"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[47779],{3486:(e,t,o)=>{o.d(t,{d:()=>a});var r=()=>o(278238);const n={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function a(e,t){const o=(0,r().VA)(e),a="lightgray"===o?"gray":o;return{...n[t.mode][a],icon:{primary:r().l8[t.mode][a]}}}},90907:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,lockIcon:()=>a});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,r.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},a=(0,o(340498).wt)("lock",n)},101209:(e,t,o)=>{o.d(t,{v:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},112282:(e,t,o)=>{o.d(t,{s:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M9.792 2.41a.6.6 0 0 0-.234.148l-5.4 5.4a.625.625 0 1 0 .884.884l4.333-4.333V17a.625.625 0 1 0 1.25 0V4.509l4.333 4.333a.625.625 0 1 0 .884-.884l-5.4-5.4a.62.62 0 0 0-.65-.147"})},n=(0,o(340498).wt)("arrowStraightUp",r)},112698:(e,t,o)=>{o.d(t,{B:()=>g});o(296540);var r=()=>o(484714),n=()=>o(847249),a=()=>o(401497),i=()=>o(959013),l=()=>o(100622),s=()=>o(534177),c=()=>o(284371),d=()=>o(824160),p=()=>o(859428),u=()=>o(962730),y=()=>o(351360),m=()=>o(991249),f=o(474848);function g(e){let{upsell:t,mobileStyle:o,desktopStyle:g,analyticsName:A,onClick:v,disableTooltip:h}=e;const b=(0,a().DP)(),C=(0,r().v3)(),{device:x}=C,_=(0,n().K8)((()=>{const{currentSpaceStore:e}=y().default.state;return null==e?void 0:e.canAdmin()}),[]),S=(0,n().K8)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?l().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:c().Wy.medium};default:return{}}}(t,b)),[t,b]);if("product"!==t.type)return null;if(x.isMobileNative)return null;const w=(()=>{switch(t.product){case"personal":return(0,f.jsx)(i().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,f.jsx)(i().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,f.jsx)(i().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,f.jsx)(i().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,f.jsx)(i().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,f.jsx)(i().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:(0,s().HB)(t.product)}})();return x.isMobile||!_?(0,f.jsx)(d().A,{mobileStyle:o,children:w}):(0,f.jsx)(p().A,{delayThreshold:120,disableTooltip:h,placement:u().W.Bottom,renderTooltip:()=>(0,f.jsx)("div",{style:{maxWidth:500},children:(0,f.jsx)(i().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,f.jsx)(d().A,{desktopStyle:g,innerStyle:S,onClick:e=>function(e,t,o,r,n){m().K(r,{from:t,upsell:o}),n&&n(e)}(e,A,t,C,v),...e,children:w})})}},118849:(e,t,o)=>{o.d(t,{A:()=>p});o(296540);var r=()=>o(847249),n=()=>o(979340),a=()=>o(959013),i=()=>o(100622),l=()=>o(284371),s=()=>o(824160),c=()=>o(991249),d=o(474848);const p=function(e){let{subscriptionTier:t,mobileStyle:p,desktopStyle:u,analyticsName:y,onClick:m,disableTooltip:f,tooltipContent:g}=e;const A=(0,o(401497).DP)(),v=(0,o(484714).v3)(),{device:h}=v,b=(0,r().K8)((()=>{const{currentSpaceStore:e}=o(351360).default.state;return null==e?void 0:e.canAdmin()}),[]),C=(0,r().K8)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?i().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:l().Wy.medium};default:return{}}}(t,A)),[t,A]);if(h.isMobileNative)return null;let x;return"personal"===t?x=(0,d.jsx)(a().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,n().$P)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,n().tL)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,n().OX)(t)?x=(0,d.jsx)(a().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,o(534177).HB)(t),h.isMobile||!b?(0,d.jsx)(s().A,{mobileStyle:p,children:x}):(0,d.jsx)(o(859428).A,{delayThreshold:120,disableTooltip:f,placement:o(962730).W.Bottom,renderTooltip:()=>(0,d.jsx)("div",{style:{maxWidth:500},children:g?(0,d.jsx)(a().sA,{defaultMessage:"{tooltipText}",id:"upgradeButton.upgrade.custom.tooltip",values:{tooltipText:g}}):(0,d.jsx)(a().sA,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,d.jsx)(s().A,{desktopStyle:u,innerStyle:C,onClick:e=>function(e,t,o,r,n){c().K(r,{from:t,upsell:{type:"product",product:o,limit:{type:"none"},trialability:"none"}}),n&&n(e)}(e,y,t,v,m),...e,children:x})})}},135221:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var r=o(474848);const n=function(e){let{style:t,styleParentContainer:n,isTriColored:a}=e;const i=(0,o(959013).tz)();return(0,r.jsxs)("div",{"aria-valuetext":i.formatMessage({id:"loadingDots.label",defaultMessage:"Loading..."}),role:"progressbar",className:"loading-dots",style:{...n},children:[(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#F6C050"}}}),(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#ED6A5F"}}}),(0,r.jsx)("div",{className:"loading-dot",style:{...t,...a&&{backgroundColor:"#5F9CDB"}}})]})}},147294:(e,t,o)=>{o.d(t,{E:()=>m});o(296540);var r=()=>o(847249),n=()=>o(401497),a=()=>o(959013),i=()=>o(963589),l=()=>o(351360),s=()=>o(464708),c=o(474848);const d={define_variables_automation_action:{launchDateMs:17277408e5,expiryDateMs:1738368e6},passkey_setting:{launchDateMs:1729101727e3,expiryDateMs:1738432882e3},http_request_automation_action:{launchDateMs:173324302e4,expiryDateMs:1738368e6},publish_site_settings_embed_page:{launchDateMs:1736208e6,expiryDateMs:1743984e6},generalized_recurrence_automations:{launchDateMs:17365536e5,expiryDateMs:17460576e5},ai_page_translation_topbar_more_action:{launchDateMs:1740451280830,expiryDateMs:17434656e5},verification:{launchDateMs:1740096e6,expiryDateMs:174375e7},notion_ai_workspace_settings:{launchDateMs:17424288e5,expiryDateMs:17550432e5},notion_mail_launch_modal:{launchDateMs:17446752e5,expiryDateMs:17525376e5},notion_mail_launch_modal_2:{launchDateMs:17446752e5,expiryDateMs:17578944e5},ui_doc_example:{launchDateMs:19249056e5,expiryDateMs:19249056e5},show_integration_webhooks_callout:{launchDateMs:17428608e5,expiryDateMs:17506368e5},collection_property_permissions:{launchDateMs:17433792e5,expiryDateMs:17671392e5},salesforce_sync_unfurling_option:{launchDateMs:17443296e5,expiryDateMs:17538336e5}};function p(e){let{style:t}=e;const o=(0,n().IS)((e=>({badge:{letterSpacing:0,whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,c.jsx)(s().A,{color:"blue",style:o.badge,content:(0,c.jsx)(a().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}function u(e){let{style:t,newBadgeKey:o}=e;const{launchDateMs:n,expiryDateMs:a}=d[o];return(0,r().K8)((()=>{const{currentUserSettingsStore:e}=l().default.state;if(e&&e.isReady()){var t;const o=null===(t=e.getSettings())||void 0===t?void 0:t.signup_time;if(o&&o>n)return!1}return Date.now()<=a}),[a,n])?(0,c.jsx)(p,{style:t}):null}function y(e){let{style:t,newBadgeKey:o}=e;return(0,i().X)(o)?(0,c.jsx)(p,{style:t}):null}function m(e){return e.didUserEngage?null:"feature_gate"===e.keyType?(0,c.jsx)(y,{...e}):(0,c.jsx)(u,{...e})}},231314:(e,t,o)=>{o.d(t,{y:()=>a});o(296540);var r=()=>o(401497),n=o(474848);function a(e){let{icon:t,backgroundColor:o,backgroundSize:a}=e;const i=(0,r().IS)((e=>({iconContainer:{height:a??28,width:a??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,a]);return(0,n.jsx)("div",{style:i.iconContainer,children:t})}},311894:(e,t,o)=>{o.d(t,{K:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.78 3.524a.63.63 0 0 1 .583-.399h9.274a.625.625 0 0 1 0 1.25h-7.66l5.662 5.163a.625.625 0 0 1 0 .924l-5.663 5.163h7.661a.625.625 0 0 1 0 1.25H5.363a.625.625 0 0 1-.421-1.087L11.29 10 4.942 4.212a.625.625 0 0 1-.162-.688"})},n=(0,o(340498).wt)("formula",r)},312540:(e,t,o)=>{o.r(t),o.d(t,{autofillPropertyForBlocks:()=>X,autofillPropertyForCollection:()=>ee,fillAllPagesMessages:()=>V,getDefaultAiInference:()=>le,getPropertyCompletionForBlock:()=>ie,saveOrRemovePropertyAiInference:()=>ae,triggerAiAutofillUpsell:()=>J});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454);var r=o(296540),n=()=>o(221844),a=()=>o(970013),i=()=>o(713998),l=()=>o(206267),s=()=>o(134025),c=()=>o(959013),d=()=>o(532659),p=()=>o(973647),u=()=>o(534177);const y=(0,o(583835).Dv)("fillAutofillPropertiesInViewTask");var m=()=>o(937075),f=()=>o(299709),g=()=>o(449506),A=()=>o(884107),v=()=>o(583289),h=()=>o(901389),b=()=>o(357625),C=()=>o(436572),x=()=>o(319975),_=()=>o(751156),S=()=>o(2220),w=()=>o(831566),M=()=>o(289190),k=()=>o(364280),I=()=>o(104012),j=o(474848);const P=function(e){let{environment:t,inferenceIds:n,aiInference:a}=e;const i=(0,o(847249).K8)((()=>{const{state:e}=M().m;return"uninitialized"===e.type?null:{numBlocksToAutofill:e.numBlocksToAutofill,numBlocksAutofilled:e.numBlocksAutofilled,propertySchema:e.propertySchema,collectionId:e.collectionId,sessionId:e.sessionId,haveAllBlocksCompletedAutofill:e.haveAllBlocksCompletedAutofill}}),[]),l=(0,r.useCallback)((()=>{i&&(n.forEach((e=>{m().oe(t,{ai_inference_type:a.type,type:"undo_from_snackbar",inference_id:e,collection_id:i.collectionId,session_id:i.sessionId})})),o(495262).tN({environment:t,preventSelectText:!0}),C().N2(),M().m.setState({type:"filling",...i,didInterruptStreaming:!0}))}),[i,t,a,n]);if(!i)return null;const{numBlocksToAutofill:s,numBlocksAutofilled:d,propertySchema:{name:p}}=i;return d===s?(0,j.jsxs)(k().fI,{gap:4,alignItems:"center",children:[(0,o(413267).b)({width:16}),(0,j.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillInProgress",values:{propertyName:p,numPages:s}}),(0,j.jsx)(I().Ag,{onClick:l,children:(0,j.jsx)(c().sA,{defaultMessage:"Undo",id:"snackbar.aiAutofill.undo"})}),(0,j.jsx)(I().Ag,{onClick:()=>{C().N2()},children:(0,j.jsx)(c().sA,{defaultMessage:"Close",id:"snackbar.aiAutofill.close"})})]}):(0,j.jsxs)(k().fI,{gap:4,alignItems:"center",children:[(0,j.jsx)(o(331542).A,{}),0===d?(0,j.jsx)(c().sA,{defaultMessage:'AI updating "{propertyName}" on {numPages, plural, one {1 page} other {# pages}}',id:"snackbar.aiAutofill.autofillStarting",values:{propertyName:p,numPages:s}}):(0,j.jsx)(c().sA,{defaultMessage:'AI updated "{propertyName}" on {numFilledPages} of {numTotalPages} pages',id:"snackbar.aiAutofill.completedAutofill",values:{propertyName:p,numFilledPages:d,numTotalPages:s}}),(0,j.jsx)(I().Ag,{onClick:l,children:(0,j.jsx)(c().sA,{defaultMessage:"Stop & undo",id:"snackbar.aiAutofill.undoAndStop"})})]})};var T=()=>o(659602),D=()=>o(335722),B=()=>o(972435),N=()=>o(71304),F=()=>o(351360),W=()=>o(508496),U=()=>o(630116),O=()=>o(666429),R=()=>o(991249),L=()=>o(807778),z=()=>o(577437),H=()=>o(108184);const V=(0,c().YK)({fillAllPagesTooltip:{defaultMessage:"{hasNames, select, true {Autofill {propertyName} for all pages in {collectionName}} other {Autofill this property for all pages in the database}}",id:"aiAutofill.fillAllPages.buttonTooltip"},fillAllPagesAddOnMessage:{defaultMessage:"Only with Notion AI add-on",id:"aiAutofill.fillAllPages.onlyWithAiAddOnMessageInTooltip"},fillAllPagesAddAiMessage:{defaultMessage:"Only with upgraded Notion AI",id:"aiAutofill.fillAllPages.onlyWithAiBusinessMessageInTooltip"}});function E(e){const{environment:t,propertyId:o,propertySchema:r,storesWithCompletions:n,useTemporaryStore:a,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:l,clipboardActions:s,doneStreaming:c,aiInferenceOverride:d}=e;_().createAndCommit({userAction:"BlockPropertyValue.handleActionButtonClick.aiAutofill",environment:t,canUndo:!Boolean(a),undoCheckpoint:!0,perform:e=>{K({environment:t,propertyId:o,propertySchema:r,storesWithCompletions:n,useTemporaryStore:a,markdownLinkifyIt:i,tinyMceMicrosoftWordPasteFilter:l,clipboardActions:s,doneStreaming:c,aiInferenceOverride:d,transaction:e})}})}function K(e){var t;const{environment:o,propertyId:r,propertySchema:n,storesWithCompletions:l,useTemporaryStore:s,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d,clipboardActions:p,doneStreaming:y,aiInferenceOverride:m,transaction:f}=e;for(const{store:g,temporaryStore:A,completion:v}of l){const e=s?A:g;let l;switch(n.type){case"text":l=p.getInlineTitleValueFromClipboardTextHtml({text:v.trim(),stripText:!1,stripSurroundingWhitespace:!0,markdownLinkifyIt:c,tinyMceMicrosoftWordPasteFilter:d});break;case"multi_select":case"select":const e=s?null===(t=g.getAssociatedCollectionStore())||void 0===t?void 0:t.clone(A.inMemoryRecordCache):g.getAssociatedCollectionStore(),o=m??n.select_ai_inference;let h=v.trim().split(",").map((e=>e.trim()));if(y||(h=h.slice(0,-1)),e&&null!=o&&o.add_options){const t=(0,a().nP)({newTokenValues:h.length>0&&"select"===n.type?[[h[0]]]:[h],property:r,propertySchema:n,collectionId:e.id});if(t)for(const o of t)_().applyOperation({store:e,operation:o,transaction:f})}null!=o&&o.add_options||(h=h.filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.value===e))}))),l=(0,i().rK)(h);break;default:(0,u().HB)(n)}x().R9({environment:o,store:e.getPropertyStore(r),value:l,transaction:f})}}const q=(0,c().YK)({FAILED_TO_AUTOFILL:{defaultMessage:"Something went wrong. Please try again later",id:"propertyCompletionActions.propertyCompletionActions.error.unableToAutofill"},INVALID_PROPERTY_FOR_AUTOFILL:{defaultMessage:"Invalid property configuration for AI autofill",id:"propertyCompletionActions.propertyCompletionActions.error.invalidPropertyForAutofill"},NO_BLOCKS_TO_AUTOFILL:{defaultMessage:"Nothing to update with AI",id:"propertyCompletionActions.propertyCompletionActions.error.noBlocksToAutofill"}}),Z=(0,c().YK)({featureUnavailable:{id:"completionActions.featureNotEnabledError",defaultMessage:"This feature is not currently enabled"}});function Y(e){let{autofillPropertyResult:t}=e;const o=B().A.formatMessage(q[t]);C().N2(),h().c1(o)}const $={ai_limit_property_autofill:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_try_on_view:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to add Notion AI.",id:"aiAutofill.outOfAiUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,j.jsx)(c().sA,{defaultMessage:"Auto-update requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.autoUpdateOnPageEditUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,j.jsx)(c().sA,{defaultMessage:"Updating all pages requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.fillAllPagesUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,j.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires the Notion AI Add-on. Contact your workspace owner to add Notion AI.",id:"aiAutofill.bulkFillUpsellDialogMessage"})},G={ai_limit_property_autofill:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiBusinessUpsellDialogMessage"}),ai_autofill_try_on_view:(0,j.jsx)(c().sA,{defaultMessage:"This workspace has used all of its free AI responses. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.outOfAiUpgradedUpsellDialogMessage"}),ai_autofill_on_page_edit:(0,j.jsx)(c().sA,{defaultMessage:"Auto-update requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.autoUpdateOnPageEditAiUpgradedUpsellDialogMessage"}),ai_autofill_fill_all_pages:(0,j.jsx)(c().sA,{defaultMessage:"Updating all pages requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.fillAllPagesAiUpgradedUpsellDialogMessage"}),ai_autofill_bulk_fill:(0,j.jsx)(c().sA,{defaultMessage:"Filling more pages at once requires upgraded Notion AI. Contact your workspace owner to upgrade Notion AI.",id:"aiAutofill.bulkFillAiUpgradedUpsellDialogMessage"})};function J(e){var t;let{environment:o,from:r,upsell:n}=e;const a=(0,L().Le)()?G:$;null!==(t=F().default.state.currentSpaceStore)&&void 0!==t&&t.canAdmin()||h().c1(a[r]),R().K(o,{from:r,upsell:n})}function Q(e){let{errorCode:t,environment:o,autofillAvailability:r}=e;return 405===t?C().D6({label:B().A.formatMessage(Z.featureUnavailable)}):(402===t&&r.upsell&&(C().N2(),J({environment:o,from:"ai_limit_property_autofill",upsell:r.upsell})),H().showCompletionErrorWithCode(t))}async function X(e){var t;let{environment:o,stores:r,property:i,propertySchema:s,userEventForAnalytics:c,sessionIdForAnalytics:p,collectionContextStore:y,from:v,isBulkAction:h,aiInferenceOverride:b,transaction:x}=e;const _=p||l().JW(),S=i,w=r.map((e=>({spaceId:e.getSpaceId(),...e.pointer,propertyId:S,inferenceId:l().JW()}))),k=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),I=new(n().A)({name:"propertyCompletionActions.autofillPropertyForBlocks"});if(M().m.setIsWriting({stores:r,propertySchema:s,sessionIdForAnalytics:p}),"uninitialized"!==M().m.state.type&&(0,a().$M)(s)&&k){C().D6({label:(0,j.jsx)(P,{environment:o,inferenceIds:w.map((e=>e.inferenceId)),aiInference:(0,a().om)(s)}),durationMs:O().LX});try{var B,N,W;if(o.defaultRecordCache.inMemoryRecordCache.addCacheOverride(I),!(0,u().EI)(w))return Y({autofillPropertyResult:"NO_BLOCKS_TO_AUTOFILL"});const e=b||(0,a().om)(s);if(!e)return Y({autofillPropertyResult:"INVALID_PROPERTY_FOR_AUTOFILL"});w.forEach((t=>{m().oe(o,{type:c,inference_id:t.inferenceId,ai_inference_type:e.type,collection_id:k,session_id:_})})),null!==(B=F().default.state.currentSpaceStore)&&void 0!==B&&B.id&&g().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:_,spaceId:F().default.state.currentSpaceStore.id,metadata:{blockPropertyPointers:w,aiInference:e,collection_id:k}}});const t=await(0,z().Bw)(o,{name:"collection_property_autofill",spaceId:null===(N=F().default.state.currentSpaceStore)||void 0===N?void 0:N.id,userId:null===(W=F().default.state.currentUserStore)||void 0===W?void 0:W.id,amount:"unknown"}),n=await g().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:w,aiInference:e,aiSessionId:_,model:"default"}});if("success"!==n.type)return Y({autofillPropertyResult:"FAILED_TO_AUTOFILL"});y&&(0,f().E)({block_id:r[0].pointer.id,property:S,property_type:s.type,from:v,environment:o,collectionContextStore:y,isFromBulkActionsToolbar:h});const i=Object.fromEntries(r.map((e=>[e.pointer.id,{store:e,temporaryStore:e.clone(I),completion:""}]))),l=new Set,[p,C,j]=await Promise.all([T().g.load(),D().S.load(),A().R.clipboardActions.load()]);if(d().hS.is(n.data)){for await(const e of n.data){if("error"===e.type)return M().m.setState({...M().m.state,didInterruptStreaming:!0}),Q({errorCode:e.errorCode,environment:o,autofillAvailability:t});if(M().m.state.didInterruptStreaming)return;const r=i[e.blockPropertyPointer.id],n=r.completion+e.completion;i[e.blockPropertyPointer.id]={...r,completion:n},l.add(e.blockPropertyPointer.id),x?K({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b,transaction:x}):E({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!0,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,aiInferenceOverride:b}),M().m.setState({...M().m.state,numBlocksAutofilled:l.size})}M().m.setState({...M().m.state,haveAllBlocksCompletedAutofill:!0})}o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I),x?K({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b,transaction:x}):E({environment:o,propertyId:S,propertySchema:s,storesWithCompletions:Object.values(i),useTemporaryStore:!1,markdownLinkifyIt:p,tinyMceMicrosoftWordPasteFilter:C,clipboardActions:j,doneStreaming:!0,aiInferenceOverride:b})}finally{o.defaultRecordCache.inMemoryRecordCache.hasCacheOverride(I)&&o.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(I)}}}async function ee(e){const t=W().default.checkGate({gateName:"autofill_all_pages_use_new_endpoint"})?re:ne;return await t(e)}const te=(0,c().YK)({invalidCollectionSource:{id:"propertyCompletionActions.error.invalidCollectionSource",defaultMessage:"There was a problem with the database."},noMemcachedRecord:{id:"propertyCompletionActions.error.noMemcachedRecord",defaultMessage:"Something went wrong. Please try again."},lockAlreadyTaken:{id:"propertyCompletionActions.error.lockAlreadyTaken",defaultMessage:"A fill is already in progress"},invalidUser:{id:"propertyCompletionActions.error.invalidUser",defaultMessage:"The provided user information is not valid."},invalidCollectionView:{id:"propertyCompletionActions.error.invalidCollectionView",defaultMessage:"We encountered an issue accessing the collection view."},invalidCollection:{id:"propertyCompletionActions.error.invalidCollection",defaultMessage:"The collection you are trying to access is not valid."},noLoadedUser:{id:"propertyCompletionActions.error.noLoadedUser",defaultMessage:"User information is missing."},noUserTimeZone:{id:"propertyCompletionActions.error.noUserTimeZone",defaultMessage:"User time zone information is not available."},unauthorizedCollectionAccess:{id:"propertyCompletionActions.error.unauthorizedCollectionAccess",defaultMessage:"Insufficient permissions"},unableToQueryCollection:{id:"propertyCompletionActions.error.unableToQueryCollection",defaultMessage:"We couldn’t retrieve the collection details at this time."},invalidPropertyForAutofill:{id:"propertyCompletionActions.error.invalidPropertyForAutofill",defaultMessage:"The property provided for autofill is not valid."},NoResults:{id:"propertyCompletionActions.error.noResults",defaultMessage:"No results were found. Please try again."},somethingWentWrong:{id:"propertyCompletionActions.error.somethingWentWrong",defaultMessage:"Something went wrong. Please try again later."}});function oe(e){switch(e){case"invalidCollectionSource":return(0,j.jsx)(c().sA,{...te.invalidCollectionSource});case"noMemcachedRecord":return(0,j.jsx)(c().sA,{...te.noMemcachedRecord});case"lockAlreadyTaken":return(0,j.jsx)(c().sA,{...te.lockAlreadyTaken});case"invalidUser":return(0,j.jsx)(c().sA,{...te.invalidUser});case"invalidCollectionView":return(0,j.jsx)(c().sA,{...te.invalidCollectionView});case"invalidCollection":return(0,j.jsx)(c().sA,{...te.invalidCollection});case"noLoadedUser":return(0,j.jsx)(c().sA,{...te.noLoadedUser});case"noUserTimeZone":return(0,j.jsx)(c().sA,{...te.noUserTimeZone});case"unauthorizedCollectionAccess":return(0,j.jsx)(c().sA,{...te.unauthorizedCollectionAccess});case"unableToQueryCollection":return(0,j.jsx)(c().sA,{...te.unableToQueryCollection});case"invalidPropertyForAutofill":return(0,j.jsx)(c().sA,{...te.invalidPropertyForAutofill});case"NoResults":return(0,j.jsx)(c().sA,{...te.NoResults});case"somethingWentWrong":return(0,j.jsx)(c().sA,{...te.somethingWentWrong});default:return(0,j.jsx)(c().sA,{defaultMessage:"An unexpected error occurred. Please try again.",id:"propertyCompletionActions.error.unknown"})}}async function re(e){var t,o;const{environment:r,collectionStore:n,propertySchema:i,property:l,collectionViewStore:s}=e;if(!(0,a().$M)(i))return;const c=(0,a().om)(i);if(!n||!i||!c)return;const d=null===(t=F().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!d)return;if(!(null===(o=F().default.state.currentUserStore)||void 0===o?void 0:o.id))return;const u=B().A.getIntl(),m=(0,N().tS)({environment:r,intl:u,store:n});if(!(await v().U({sourceAction:"fill_all_pages",propertyName:i.name,collectionName:m})))return;(0,S().u)({environment:r,event:{eventName:"generate_from_fill_all_pages_in_view",eventProperties:{collection_id:n.id,ai_inference_type:c.type}}});const f=(0,b().UT)(r,y,{spaceId:d,collectionSource:{id:n.id,type:"collection",spaceId:d},collectionViewPointer:s.pointer,propertyId:l});for await(const a of f){var g;if(p().Q.isFail(a)||"failure"===a.taskStatus)return void C().D6({label:oe("somethingWentWrong")});if("error"===(null===(g=a.value)||void 0===g?void 0:g.status)){const e=a.value.errorType;return void C().D6({label:oe(e)})}}}async function ne(e){var t;let{environment:o,collectionStore:r,propertySchema:n,property:i,sessionIdForAnalytics:c}=e;if(!(0,a().$M)(n))return;const d=(0,a().om)(n);if(!r||!n||!d)return;const p=await(0,z().Bw)(o,{name:"collection_property_autofill",spaceId:r.getSpaceId(),userId:null===(t=F().default.state.currentUserStore)||void 0===t?void 0:t.id,amount:"unknown"});if(!(0,z().e2)(p))return void J({environment:o,from:"ai_autofill_fill_all_pages",upsell:p.upsell});const u=B().A.getIntl(),y=(0,N().tS)({environment:o,intl:u,store:r});if(!(await v().U({sourceAction:"fill_all_pages",propertyName:n.name,collectionName:y})))return;m().oe(o,{type:"generate_from_fill_all_pages",inference_id:l().JW(),ai_inference_type:d.type,collection_id:r.id,session_id:c??l().JW()});const f=[];f.push(s().op.update({pointer:r.pointer,path:["format","update_ai_inferences_status"],args:{[i]:{type:"requested",created_time:Date.now()}}})),(0,w().p)({environment:o,collectionStore:r,performTransaction:e=>{for(const t of f)_().applyOperation({store:(0,U().Oo)(r,t.pointer),operation:t,transaction:e})}})}function ae(e){const{environment:t,propertySchema:o,collectionStore:r,property:n,draftAiInference:i}=e;let l="";switch(o.type){case"text":l="ai_inference";break;case"select":case"multi_select":l="select_ai_inference";break;default:return}const s=[];if(s.push({pointer:r.pointer,command:"set",path:["schema",n,l],args:i}),i)m().Nj(t,{type:"set_ai_inference",ai_inference_type:i.type,collection_id:r.id});else{const e=(0,a().om)(o);m().Nj(t,{type:"remove_ai_inference",ai_inference_type:null==e?void 0:e.type,collection_id:r.id})}(0,w().p)({environment:t,collectionStore:r,performTransaction:e=>{for(const t of s)_().applyOperation({store:(0,U().Oo)(r,t.pointer),operation:t,transaction:e})}})}async function ie(e){var t;let{environment:o,store:r,property:n,propertySchema:a,userEventForAnalytics:i,sessionIdForAnalytics:s}=e;const c=s||l().JW(),p=n,u={spaceId:r.getSpaceId(),...r.pointer,propertyId:p,inferenceId:l().JW()},y=r.getAssociatedCollectionId()??(null===(t=r.getCollectionStore())||void 0===t?void 0:t.id),f=le(a,!1);if(!f)return"";m().oe(o,{type:i,inference_id:u.inferenceId,ai_inference_type:f.type,collection_id:y,session_id:c});const A=l().JW();g().callApi({eventName:"publishAiSession",environment:o,data:{inference_type:"autofill",id:A,metadata:{blockPropertyPointers:[u],aiInference:f,collection_id:y}}});const v=await g().callStreamApi({eventName:"getCompletionForProperty",environment:o,data:{blockPropertyPointers:[u],aiInference:f,aiSessionId:A,model:"default"}});if("success"!==v.type)return"";let h="";if(d().hS.is(v.data))for await(const l of v.data)"error"!==l.type&&(h+=l.completion);return h}function le(e,t){if(!(0,a().$M)(e))return;const o=(0,a().om)(e);return!o&&(0,a().lx)(e)?{type:e.type,auto_update_on_edit:t,add_options:!1}:o}},358354:(e,t,o)=>{o.d(t,{B:()=>c,I:()=>s});var r=()=>o(966759),n=()=>o(235191),a=()=>o(854593),i=()=>o(4319),l=()=>o(751156);async function s(e){let{theme:t,collectionContextStore:o,environment:r,property:n,from:i,schema:l,onDeleteCompleted:s,...d}=e;await a().q({environment:r,collectionContextStore:o,property:n,handleDeleteAccept:async()=>{await c({collectionContextStore:o,environment:r,property:n,schema:l,from:i,...d}),null==s||s()},theme:t,from:i})}async function c(e){const{collectionContextStore:t,environment:o,property:a,schema:s,from:c,...d}=e,p=t.collectionStore();if(!p)return;const u=p.getSchema()[a];await l().createAndCommitAsync({environment:o,userAction:"TableHeaderCell.handleDeleteAccept",waitForServerCommit:!1,perform:async e=>{await n().PF({environment:o,collectionStore:p,schema:s,property:a,transaction:e}),d.updateFrozenColumn&&i().sp({environment:o,collectionContextStore:t,currentIndex:d.columnIndex,entrypoint:d.updateFrozenColumnEntrypoint,transaction:e,propertyAction:"delete"})}}),u&&(0,r().i)({environment:o,collectionContextStore:t,property_type:u.type,from:c,property:a})}},388182:(e,t,o)=>{o.d(t,{A:()=>r});const r=o(757695).default.createValue({open:!1},{name:"ConfirmOverwriteModalStore"})},437426:(e,t,o)=>{o.d(t,{$:()=>s});var r=o(296540),n=()=>o(847249),a=()=>o(895876),i=()=>o(8980),l=o(474848);const s=r.memo(r.forwardRef((function(e,t){let{collectionContextStore:s,property:c,iconTransformer:d=(e=>e),getTitleOverride:p,...u}=e;const{isMobile:y}=(0,o(484714).Y0)(),m=(0,n().K8)((()=>s.collectionStore()),[s]),f=(0,n().K8)((()=>null==m?void 0:m.getDatabaseType()),[m]),g=(0,n().K8)((()=>Boolean(m&&f&&o(313892).jP((0,o(617254).appConfigs)(),f,c,m))),[m,f,c]),A=(0,r.useCallback)((e=>(0,a().eF)(f,e)),[f]),v=(0,r.useCallback)((e=>(0,l.jsx)(o(760217).A,{...u,...e,disabled:g,disabledFeedback:g,title:(null==p?void 0:p({isRequiredProperty:g}))??(0,l.jsx)(o(959013).sA,{defaultMessage:"Delete property",id:"database.tableHeaderCell.deleteProperty"}),caption:y&&g?(0,a().eF)(f):null,icon:d(g?(0,l.jsx)("div",{...e,children:(0,l.jsx)(i().I,{icon:o(471095).lockFillIcon})}):(0,l.jsx)(i().I,{icon:o(236262).trashIcon})),isRedOnHover:!0})),[f,p,d,y,g,u]);return(0,l.jsx)(o(859428).A,{placement:o(962730).W.Left,disableTooltip:!g,renderTooltip:A,render:v})})))},462892:(e,t,o)=>{o.d(t,{_:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("layout",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},471095:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,lockFillIcon:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},n=(0,o(340498).wt)("lockFill",r)},525884:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},a=(0,o(340498).wt)("infoCircle",n)},582684:(e,t,o)=>{o.d(t,{C:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M14.075 3.45a.625.625 0 0 0-.884 0l-3.497 3.5a.625.625 0 0 0 .883.884l2.431-2.431v10.705a.625.625 0 0 0 1.25 0V5.402l2.431 2.43a.625.625 0 1 0 .884-.883zM2.427 12.167a.625.625 0 0 1 .884 0l2.43 2.431V3.893a.625.625 0 0 1 1.25 0v10.705l2.431-2.43a.625.625 0 0 1 .884.883L6.81 16.55a.625.625 0 0 1-.884 0l-3.498-3.498a.625.625 0 0 1 0-.884"})},n=(0,o(340498).wt)("arrowUpDown",r)},583289:(e,t,o)=>{o.d(t,{U:()=>n});var r=()=>o(388182);async function n(e){return new Promise((t=>{r().A.setState({open:!0,onClose:()=>{r().A.setState({open:!1}),t(!1)},onConfirm:()=>{r().A.setState({open:!1}),t(!0)},...e})}))}},655923:(e,t,o)=>{o.d(t,{v:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},n=(0,o(340498).wt)("arrowStraightDown",r)},824160:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var r=()=>o(484714),n=()=>o(401497),a=()=>o(704152),i=o(474848);function l(e){const t=(0,r().Y0)(),o=(0,n().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,i.jsx)(a().A,{style:{...o.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,i.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})}):(0,i.jsx)(a().A,{style:{...o.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,i.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})})}},854593:(e,t,o)=>{o.d(t,{q:()=>f});o(944114),o(296540);var r=()=>o(959013),n=()=>o(284371),a=()=>o(521358),i=()=>o(16006),l=()=>o(685889),s=()=>o(470928),c=()=>o(290966),d=()=>o(204067),p=()=>o(27732),u=()=>o(901389),y=()=>o(751156),m=o(474848);async function f(e){const{environment:t,collectionContextStore:o,property:f,handleDeleteAccept:g}=e,A=o.collectionStore();if(!A)return;if(A.isTypedProperty(f)){if(await a().nD({environment:t,property:f,collectionContextStore:o,theme:e.theme,from:e.from}))return}const v=(0,d().R5)({environment:t,collectionStore:A,propertyId:f});if(v.length>0){if((0,c().E_)({environment:t,collectionStore:A,propertyId:f,compoundTemplateInstancesToDelete:v,collectionContextStore:o,from:e.from}))return}else if(((0,s().k$)(f)||(0,s().Do)({collectionStore:A,propertyId:f}))&&(0,s().aF)(A)&&(0,s().Io)()){if((0,c().I5)({environment:t,collectionStore:A,propertyId:f,collectionContextStore:o,from:e.from}))return}const h=o.normalizedSchemaStore.state,b=h[f],C=l().pg(o,b);await(null==C?void 0:C.load());const x=C&&l().D5(o,f,C),_=C&&l().uf(C),S=C&&A.id===C.id,w=[{label:(0,m.jsx)(r().sA,{id:"database.viewSettings.propertyTab.deleteProperty.modal.confirmButton",defaultMessage:"Delete"}),color:"red",onAccept:g}];let M;if(x&&A&&_&&!S&&w.push({label:(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.inverseConfirmButton",defaultMessage:"Delete, but keep related property"}),color:"red",onAccept:()=>{y().createAndCommit({userAction:"collectionPropertyActions.showDeletePropertyDialog",environment:t,canUndo:!0,perform:e=>{if(b&&"relation"===b.type&&b.property&&C){const o=b.property,r=C.getSchema();p().C4({environment:t,collectionStore:C,propertySchema:r[o],property:o,targetPropertyID:void 0,autoRelate:A.isSyncedCollection()&&!C.isSyncedCollection()?{enabled:!1}:b.autoRelate,transaction:e})}p().t$({environment:t,collectionStore:A,property:f,transaction:e})}})}}),"auto_increment_id"===(null==b?void 0:b.type))M=l().me(h)?(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdWithGithubProperty.modal.prompt",defaultMessage:"You will no longer be able to link new GitHub PRs and status automations will stop working."}):(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteUniqueIdProperty.modal.prompt",defaultMessage:"The ID property will be permanently deleted."});else if("status"===(null==b?void 0:b.type)){const e=l().AX(h);if(e){const t=e.connectedRelation.automation;t&&t[f]&&(M=(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteStatusProperty.modal.prompt",defaultMessage:"Deleting this status property will stop the GitHub Pull Requests status automation."}))}}else C&&_&&!S&&x&&(M=(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteRelatedProperty.modal.prompt",defaultMessage:"This property has a related property on {relationTargetName} which will also be deleted.",values:{relationTargetName:(0,m.jsx)(i().A,{style:{display:"inline",fontWeight:n().Wy.medium},store:C})}}));u().ui({message:(0,m.jsx)("span",{children:(0,m.jsx)(r().sA,{id:"database.tableHeaderCell.deleteProperty.modal.prompt",defaultMessage:"Delete this property from {databaseName}? It will be removed from all views.",values:{databaseName:(0,m.jsx)(i().A,{style:{display:"inline",fontWeight:n().Wy.bold},shouldWrap:!0,store:A})}})}),description:M,showCancel:!0,keepFocus:!0,items:w,mode:"wide"})}},902842:(e,t,o)=>{o.d(t,{n:()=>S,z:()=>x});o(16280),o(296540);var r=()=>o(847249),n=()=>o(401497),a=()=>o(663077),i=()=>o(632625),l=()=>o(743176),s=()=>o(278238),c=()=>o(101209),d=()=>o(366295),p=()=>o(462892),u=()=>o(926329),y=()=>o(534177),m=()=>o(745266),f=()=>o(231314),g=()=>o(963589),A=()=>o(3486),v=()=>o(913454),h=o(474848);const b=16;function C(e){let{icon:t,theme:o,size:r,style:a}=e;const l=(0,n().IS)((e=>({icon:{fill:(0,A().d)(t,e).icon.primary,...a}})),[t,a]);return(0,h.jsx)(i().p,{icon:t,theme:o,size:r,style:l.icon})}function x(e){var t;let{template:o,size:r,iconStyle:i}=e;const l=r??b,f=(0,n().IS)((()=>({icon:{width:l,height:l,...i}})),[l,i]),g=(0,n().DP)();if((0,a().cB)(o.templateId))return(0,d().L)(f.icon);const{type:A}=o;switch(A){case"property":return(0,h.jsx)(_,{template:o,iconSize:l,styles:f});case"collection_view":return(0,h.jsx)(m().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,h.jsx)(h.Fragment,{children:(0,p()._)(f.icon)});case"block":return(0,h.jsx)(h.Fragment,{children:(0,u().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,s().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,h.jsx)(C,{icon:e,theme:g,size:l,style:f.icon});case"automation":return(0,h.jsx)(h.Fragment,{children:(0,c().v)(f.icon)});default:(0,y().HB)(A)}}function _(e){let{template:t,iconSize:o,styles:a}=e;const i=(0,n().DP)(),s=(0,g().X)("nds_default_property_noticon"),c=(0,r().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return v().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,h.jsx)(l().zB,{type:t.value.type,icon:c,size:o,style:a.icon,theme:i,isDefaultNoticonEnabled:s})}function S(e){let{template:t,backgroundSize:o}=e;const r=(0,n().IS)((e=>({iconContainer:{background:w({theme:e,template:t})[30]},icon:{fill:w({theme:e,template:t})[400]}})),[t]);return(0,h.jsx)(f().y,{backgroundColor:r.iconContainer.background,backgroundSize:o,icon:(0,h.jsx)(x,{template:t,iconStyle:r.icon})})}function w(e){let{theme:t,template:o}=e;const{type:r}=o;switch(r){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,y().HB)(r)}}}}]);