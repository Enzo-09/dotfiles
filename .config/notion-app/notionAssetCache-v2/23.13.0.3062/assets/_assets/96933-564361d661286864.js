"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[96933],{9768:(e,t,o)=>{o.d(t,{Br:()=>k,Jh:()=>x,Lb:()=>S,YE:()=>f,cu:()=>w});o(16280),o(898992),o(672577);var i=o.n(o(32485)),n=o(296540),s=()=>o(484714),r=()=>o(847249),a=()=>o(778781),l=()=>o(534177),c=()=>o(623186),d=()=>o(299772),u=()=>o(548821),p=()=>o(517223),m=()=>o(823082),g=()=>o(241181),h=()=>o(817942),v=o(474848);const S=12,f=12,y=10,b=10,C=8;function _(e){let{collectionSchema:t,module:o}=e;return!(!t||"normalizedTitleWithIcon"!==o.type)&&(0,p().LD)({collectionSchema:t,module:o}).length>0}function x(e){let{layoutModule:t,area:o,context:p,collectionSchema:x,collectionStore:k,showDetailsPanelToggleButtonBelowTitle:w,modules:P,postContext:M}=e;const{isMobile:I}=(0,s().Y0)(),A=P.findIndex((e=>e.id===t.id)),B=null!=P&&P.length&&-1!==A?P[A+1]:void 0,T=(0,g().p)({collectionStore:k,layoutModule:B}),j=(0,c().aN)(k),L=(0,r().K8)((()=>Boolean(null==k?void 0:k.isPageTreeCollection())),[k]),[V,R]=(0,n.useMemo)((()=>{const e=_({collectionSchema:x,module:t});let i=!1;const n={};if("page_details"===o||"person_profile_page_details"===o)n.marginBottom=y,n.paddingBottom=b;else if("page_main"===o||"person_profile_page_main"===o)n.marginBottom=f,n.paddingBottom=S;else if("views_main_tab_modules"===o)n.marginBottom=f,n.paddingBottom=S;else{if("form_layout_schema"===o||"form_conditional_modules"===o)throw new Error("Not implemented for forms");(0,l().HB)(o)}const s="editor"===(null==B?void 0:B.type);(0,d().Mi)(M)?"editor"===t.type&&M!==u().Rr.DraftPostInFullPageComposer?i=!0:"normalizedTitleWithIcon"===t.type&&(n.marginBottom=void 0,n.paddingBottom=C):s&&(i=!0,"normalizedTitleWithIcon"!==t.type||e||(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0),"views_main_tab_modules"===o&&(i=!1,n.marginBottom=void 0,n.paddingBottom=void 0)),T&&n.marginBottom&&(n.marginBottom=Math.max(n.marginBottom-4,0)),"page_main"!==o&&"page_details"!==o&&"views_main_tab_modules"!==o||("discussions"===t.type?n.marginLeft=0:"normalizedTitleWithIcon"===t.type?n.marginLeft=-4:(0,a().gx)(t)||"properties"===t.type||"relationsGroup"===t.type?n.marginLeft=-6:"editor"===t.type&&(n.marginLeft=-2));const r="views"===(null==B?void 0:B.type)||"editor"===(null==B?void 0:B.type);return"page_main"!==o&&"page_details"!==o||!n.paddingBottom||r||("property_text"===t.type||"property_relation"===t.type&&j?n.paddingBottom=Math.max(n.paddingBottom-4,0):"properties"===t.type&&(L&&!I||(n.paddingBottom=Math.max(n.paddingBottom-4,0))),"viewsMain"===(null==B?void 0:B.type)&&(n.paddingBottom=Math.max(n.paddingBottom-12,0))),"normalizedTitleWithIcon"===t.type&&(e?I&&"properties"===(null==B?void 0:B.type)&&!T&&(n.paddingBottom=void 0,n.marginBottom=4):(w?"discussions"===(null==B?void 0:B.type)&&(n.marginBottom=void 0):"properties"===(null==B?void 0:B.type)?(n.paddingBottom=void 0,n.marginBottom=8):"discussions"===(null==B?void 0:B.type)&&(n.paddingBottom=S),I&&"discussions"===(null==B?void 0:B.type)&&(n.marginBottom=void 0))),"bottomControls"===t.type&&(n.paddingBottom=void 0,n.marginBottom=void 0),"discussions"===t.type&&s&&(n.paddingBottom=void 0),"inlinePageSections"!==(null==B?void 0:B.type)&&"expandedBacklinks"!==(null==B?void 0:B.type)&&"bottomControls"!==(null==B?void 0:B.type)||(n.marginBottom=8),"editor"!==t.type||(0,d().Mi)(M)||p===u().Rr.Presentation||(n.marginTop=8),("views"===t.type||"editor"===t.type&&!(0,d().Mi)(M))&&(n.paddingBottom=void 0,n.marginBottom=void 0),"viewsMain"===t.type&&(n.paddingBottom=void 0),p===u().Rr.DraftPostInInlineComposer&&(n.marginBottom=4,n.paddingBottom=0),[i,n]}),[x,t,o,null==B?void 0:B.type,T,L,p,j,I,w,M]);return(0,n.useMemo)((()=>function(e){return(0,v.jsx)(h().vV,{className:i()({"layout-content-with-divider":V}),style:R,testId:(0,m().H)(t),children:e})}),[t,V,R])}function k(e){let{layoutModule:t,area:o,collectionSchema:i,collectionStore:n,showDetailsPanelToggleButtonBelowTitle:a,pageMainModules:l}=e;const{isMobile:c}=(0,s().Y0)(),d=(0,r().K8)((()=>{if(!n)return!1;return!!l.find((e=>"normalizedTitleWithIcon"===e.type))&&a}),[n,l,a]);if(!n)return!1;if("properties"!==t.type&&"discussions"!==t.type&&"relationsGroup"!==t.type)return!1;if("page_main"!==o)return!0;const u=l.findIndex((e=>e.id===t.id));if(0===u||l.length<=1)return!1;const p=l[u-1];if("normalizedTitleWithIcon"!==(null==p?void 0:p.type))return!0;if("relationsGroup"===t.type&&d)return!0;if("properties"===t.type&&d&&!c)return!0;const m=_({collectionSchema:i,module:p});return("properties"!==t.type||!c||!m)&&m}function w(e){let{collectionStore:t,modulesByArea:o}=e;return!((t.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0})||[]).length>0)&&0===(0,p().Ul)({collectionStore:t,modulesByArea:o}).length}},25680:(e,t,o)=>{o.d(t,{S:()=>c});var i=o(296540),n=()=>o(847249),s=()=>o(466721),r=()=>o(548821),a=()=>o(547726),l=()=>o(650031);function c(e){let{store:t,environment:o,postContext:c}=e;const{pageVisitStore:d,presenceStore:u}=(0,n().K8)((()=>({pageVisitStore:new(a().A),presenceStore:new(l().A)})),[]);return(0,i.useEffect)((()=>{!c||c!==r().Rr.PostInFullPageOrPeek&&c!==r().Rr.PostInFeed||(t.id!==d.state.pageId&&d.setState({...d.getInitialState(),pageId:t.id}),s().Ds(o,{blockStore:t,pageVisitStore:d,incremental:!1,includeTotalCount:!0}))}),[t,d,o,u,c]),{pageVisitStore:d,presenceStore:u}}},33301:(e,t,o)=>{o.d(t,{T:()=>m,n:()=>p});var i=()=>o(908006),n=()=>o(508496),s=()=>o(75368),r=()=>o(970330),a=()=>o(896628),l=()=>o(722101),c=()=>o(246826),d=()=>o(778417),u=()=>o(725614);function p(e){const{environment:t,store:o,transaction:a,preventTextSelection:p,onTextSelection:m}=e;n().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&s().A.state.open&&s().A.setState({open:!1});const g=(()=>{const e=o.getContentStores();if(1===e.length&&e[0].isEmptyTextBlock())return e[0];const i=c().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:a,spaceId:o.pointer.spaceId}),n=l().BC({parentStore:o.getContentStore(),appendStore:i,transaction:a}).childStore;return r().v(t,{from:"template_picker",type:"text",creating_block_id:i.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels()}),n})();return p||i().default.afterNextFlush((()=>{d().hc({environment:t,store:g}),u().setSelectionAtStart({store:g.getBlockTitleStore()}),null==m||m()})),g}function m(e){const{environment:t,store:o,transaction:i}=e;a().vc({store:o,transaction:i}),p({environment:t,store:o,transaction:i})}},67141:(e,t,o)=>{o.d(t,{v:()=>y});o(898992),o(430670);var i=()=>o(484714),n=()=>o(847249),s=()=>o(187174),r=()=>o(68263),a=()=>o(798880),l=()=>o(496603),c=()=>o(763824),d=()=>o(186445),u=()=>o(731320),p=()=>o(351360),m=()=>o(21735),g=()=>o(508496),h=()=>o(375447),v=()=>o(870092),S=()=>o(271084);const f=100;function y(){const e=(0,i().v3)(),t=(0,n().O$)(p().AppStoreCurrentSpaceStore),o=(0,n().K8)((()=>(0,d()._m)(e)),[e]),y=(0,n().K8)((()=>{const{spaceId:e,userId:i}=h().A.state.emptyQueryUserRequestStore.state.request??{};return(null==t?void 0:t.id)!==e||(null==o?void 0:o.id)!==i}),[t,o]),b=(0,n().K8)((()=>{const e=m().A.state.shouldUseEdgeCache,t=g().default.checkGate({gateName:"edge_cache_mentions"});return e&&t}),[]);(0,s().Yb)((async()=>{if(!b||!t||!y)return;h().A.state.emptyQueryUserRequestStore.setState({...h().A.state.emptyQueryUserRequestStore.state,ready:!1,loading:!0}),await S().k.waitUntilLoaded();const e=S().k.getSortedUserIds(),i=p().default.state.mainEditorCurrentBlockStore,n=i?(0,u().i0)(i).flatMap((e=>{let{permissionItem:t}=e;return(0,r().B2)(t)?[t.user_id]:[]})):[],s=(0,l().sb)([...(0,l().oE)([null==o?void 0:o.id]),...e,...n]),d=(0,c().lX)(s.slice(0,f),f,(async e=>{if(e===(null==o?void 0:o.id))return null==o?void 0:o.getValue();const i=v().L.createChildStore(t,{table:a().oo,id:e});return await i.load(),i.getValue()})),m=await d;h().A.state.emptyQueryUserRequestStore.setState({ready:!0,loading:!1,result:(0,l().oE)(m),request:{spaceId:t.id,userId:(null==o?void 0:o.id)??""}})}),[t,o,y,b])}},155129:(e,t,o)=>{o.d(t,{X:()=>i});const i=(0,o(296540).createContext)(0);i.displayName="PageViewHorizontalOffsetContext"},165121:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{constructor(){super()}getInitialState(){}}const n=new i},257502:(e,t,o)=>{o.d(t,{d:()=>Z});o(18107),o(967357),o(898992),o(672577),o(581454);var i=()=>o(244641),n=o(296540),s=()=>o(662303),r=()=>o(484714),a=()=>o(847249),l=()=>o(401497),c=()=>o(869190),d=()=>o(546703),u=()=>o(350124),p=()=>o(310442),m=()=>o(824862),g=()=>o(798880),h=()=>o(959013),v=()=>o(534177),S=()=>o(774733),f=()=>o(517288),y=()=>o(902731),b=()=>o(848565),C=()=>o(11048),_=()=>o(155004),x=()=>o(704152),k=()=>o(285790),w=()=>o(256863),P=()=>o(453697),M=()=>o(21140),I=()=>o(126126),A=()=>o(828634),B=()=>o(862292),T=()=>o(38337),j=()=>o(645873),L=()=>o(732430),V=()=>o(548821),R=()=>o(729380),D=()=>o(551619),E=()=>o(720501),K=()=>o(161479),O=()=>o(404783),F=o(474848);function z(e){const{store:t,discussionStore:o,isFirst:i,isOnly:s,discussionLocation:a,collapsed:l}=e,c=(0,r().v3)(),d=(0,n.useMemo)((()=>new(O().A)(c,(0,K().e)(t.pointer.spaceId))),[c,t.pointer.spaceId]),{value:u}=(0,j().fJ)(S().commentsDependency);return u?(0,F.jsx)(S().PW,{store:o,format:u.discussionHelpers.DiscussionFormat.Page,isFirst:i,isOnly:s,collapsed:l,showResolveButtonByDefaultIfPossible:!1,blockStore:t,discussionInputStore:d,..."post_top_level_discussion"===a?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:"page_discussion"}},o.id):null}var W=()=>o(908006),H=()=>o(790748),N=()=>o(197959),G=()=>o(725614),U=()=>o(751156),Y=()=>o(583824),q=()=>o(143857),Q=()=>o(77126),X=()=>o(630116);function $(e){const{store:t,from:o}=e,i=(0,r().v3)(),s=(0,n.useMemo)((()=>new(O().A)(i,(0,K().e)(t.pointer.spaceId))),[i,t.pointer.spaceId]),l=(0,n.useRef)(null),c=(0,n.useCallback)((()=>{G().clear({environment:i})}),[i]),d=function(e){const{environment:t,discussionInputStore:o,store:i,from:s}=e,r=(0,a().uB)(void 0,V().Ay),l=(0,n.useCallback)((e=>{var o;const n=i.id;null===(o=t.PageDetailsStore)||void 0===o||o.setToggleState({environment:t,type:"discussion",id:n},e)}),[t,i.id]);return(0,n.useCallback)((async()=>{const e=o.state.textStore.getValue(),n=o.state.files;if((!e||0===e.length)&&0===n.length)return;const a=await B().T.formulas.load(),c=(0,K().e)(i.pointer.spaceId),d=t.idCreator.getSpaceIdCreatorSync(c).deterministicIdInSavedSpace(N().$Y,`${i.id}-discussion-0`),u=d?X().sk.createChildStore(i,{table:N().$Y,id:d,spaceId:c}):void 0;await(null==u?void 0:u.load());const p=Boolean(!(null!=u&&u.getResolved())),{performResult:m}=U().createAndCommit({userAction:"PageDiscussion.useSubmitNewDiscussion",environment:t,canUndo:!0,perform:o=>(0,Y().i)({discussionId:p?d:void 0,environment:t,type:"default",blockStore:i,commentTextValue:e||[],transaction:o,files:n,formulasModule:a,fromOverride:s}),skipUpdatingEditedMetadata:!0});if(o.reset(),r.setState({...r.state,forceDiscussionOpen:!1}),l(!0),m&&!t.device.isMobile){await W().default.afterNextFlush();const e=q().A.find((e=>e.getStore().id===m.id));e&&G().setSelectionAtEnd({store:e.getInputStore().state.textStore})}}),[o,t,r,l,i,s])}({environment:i,discussionInputStore:s,store:t,from:o});(0,H().b)(Q().j,(()=>({getNode:()=>l.current,getBlockStore:()=>t,getInputStore:()=>s})),[s]);const{value:u}=(0,j().fJ)(S().commentsDependency);return u?(0,F.jsx)("div",{ref:l,children:(0,F.jsx)(S().bd,{showAvatar:!0,parentStore:t,onSubmit:d,onCancel:c,discussionInputStore:s,discussionFormat:u.discussionHelpers.DiscussionFormat.Page,isMobileSlideUpMenu:!1,shouldSaveUnsentComments:!0,canDrop:!0,blockStore:t})}):null}function J(e){const{store:t,showDiscussionInput:o,unresolvedDiscussionStores:p,discussionLocation:m,collapsed:g}=e,v=(0,r().v3)(),C=(0,h().tz)(),{value:_}=(0,j().fJ)(B().T.formulas),{value:w}=(0,j().fJ)(S().commentsDependency),P=(0,a().K8)((()=>p.find((e=>e.getReactions().length>0))),[p]),M=(0,a().K8)((()=>p.find((e=>e.getCommentPointers().length>0))),[p]),A=(0,a().K8)((()=>Boolean(P)),[P]),R=(0,a().K8)((()=>(null==M?void 0:M.getCommentPointers().length)??0),[M]),{lastReplyTime:E,lastReplyByActorStore:K}=(0,a().K8)((()=>{const e=null==M?void 0:M.getCommentStores().at(-1),t=null==e?void 0:e.getCreatedTime(),o=null==e?void 0:e.getCreatedByStore();return{lastReplyTime:t?(0,c().eV)({value:i().c9.fromMillis(t),preset:"time",locale:s().locale}):void 0,lastReplyByActorStore:o}}),[M]),O=(0,n.useCallback)((e=>{const o=M;if(!o)return;const i=e.target;(0,y().IX)({environment:v,discussionStore:o,rect:i.getBoundingClientRect(),blockStore:t,discussionLocation:"post_top_level_discussion"})}),[v,t,M]),W=(0,r().Y0)(),H=(0,l().IS)((e=>{const t={paddingTop:p.length>0?12:-1*b().Ql/2,paddingBottom:12,paddingRight:4};return{pageViewDiscussion:{width:"100%",margin:"0 auto"},newPageDiscussionWrapper:{..."post_top_level_discussion"===m?{padding:0}:t},emptyPostDiscussion:{display:"flex",justifyContent:"space-between",paddingBottom:12},reactionButton:{...null==w?void 0:w.REACTION_PILL_STYLE,width:40,paddingLeft:10,paddingRight:10,borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid",...W.isMobile?null==w?void 0:w.MOBILE_REACTION_PILL_STYLE_OVERRIDES:{}},reactionIcon:{width:22,height:22,fill:e.icon.secondary,marginTop:-.5,marginRight:1}}}),[p.length,m,w,W.isMobile]),N=(0,l().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:12},presenceReactionsContainer:{display:"flex",flexDirection:"row",justifyContent:"space-between",...W.isMobile?{justifyContent:"flex-start",gap:4}:{}},reactionsContainer:{display:"flex",gap:6,minHeight:27},repliesButton:{display:"flex",alignItems:"center",gap:8,cursor:"pointer",padding:4,borderRadius:6},repliesButtonContent:{display:"flex",alignItems:"center",gap:8},repliesInfo:{display:"flex",alignItems:"baseline",gap:8},replyCount:{fontSize:14,color:e.text.primary},lastReplyTime:{fontSize:12,color:e.text.tertiary}})),[W.isMobile]);if("post_top_level_discussion"===m&&(null==e?void 0:e.pageViewBlockContext)===V().Rr.PostInFeed){const o=e.pageVisitStore&&e.presenceStore,i=o&&W.isMobile;return(0,F.jsxs)("div",{style:N.container,children:[(0,F.jsxs)("div",{style:N.presenceReactionsContainer,children:[(0,F.jsxs)("div",{style:N.reactionsContainer,children:[P&&(0,F.jsx)(S().PH,{focused:!0,disableShadow:!0,parentStore:P,discussionLocation:e.discussionLocation,showAddReactionButton:!0,additionalItems:i?(0,F.jsx)(L().s9,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,enableFacepile:!1,isShowingInPostFeed:!0}):void 0}),!A&&(0,F.jsx)(k().A,{ariaLabel:C.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:H.reactionButton,icon:()=>(0,d().r)(H.reactionIcon),onClick:e=>{(0,f().O)({environment:v,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:_})}})]}),A&&i||!o?null:(0,F.jsx)(L().s9,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,enableFacepile:!W.isMobile,isShowingInPostFeed:!0})]}),R>0?(0,F.jsx)(x().A,{style:N.repliesButton,onClick:O,children:(0,F.jsxs)("div",{style:N.repliesButtonContent,children:[K&&(0,F.jsx)(ee,{actorStore:K,size:24}),(0,F.jsxs)("div",{style:N.repliesInfo,children:[(0,F.jsx)("div",{style:N.replyCount,children:(0,F.jsx)(h().sA,{defaultMessage:"{replyCount, plural, one {{replyCount} reply} other {{replyCount} replies}}",id:"pageLayout.discussionsModule.replyCount",values:{replyCount:R}})}),E&&(0,F.jsx)("div",{style:N.lastReplyTime,children:E})]})]})}):(0,F.jsx)("div",{style:H.newPageDiscussionWrapper,children:(0,F.jsx)($,{from:m,store:t})})]})}return(0,F.jsxs)("div",{style:H.pageViewDiscussion,onMouseDown:D().NV,onClick:D().sx,className:T().Jv,children:["post_top_level_discussion"===m&&!A&&(0,F.jsxs)("div",{style:H.emptyPostDiscussion,children:[(0,F.jsx)(k().A,{ariaLabel:C.formatMessage({defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"}),hasBackground:!1,showShadow:!1,style:H.reactionButton,icon:()=>(0,u().s)(H.reactionIcon),onClick:e=>{(0,f().O)({environment:v,blockStore:t,rect:e.currentTarget.getBoundingClientRect(),skipOpeningDiscussionOnSubmit:!0,formulasModule:_})}}),e.pageVisitStore&&e.presenceStore&&(0,F.jsx)(I().hJ,{pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,rootStore:t,maxUsers:5,isShowingInPostFeed:!0})]}),p.map(((o,i,n)=>(0,F.jsx)(z,{store:t,discussionStore:o,isFirst:0===i,isOnly:1===n.length,collapsed:g,..."post_top_level_discussion"===m?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore}:{discussionLocation:m}},o.id))),o&&(0,F.jsx)("div",{style:H.newPageDiscussionWrapper,children:(0,F.jsx)($,{from:m,store:t})})]})}function Z(e){const{store:t,wrapper:o,discussionLocation:i,collapsed:s,showDefaultTitle:r,pageDiscussionsRenderState:a}=e,l=(0,n.useRef)(null);return(0,A().tK)(l,(e=>{R().u.setDiscussionsHeight(e.height)})),(0,F.jsx)(C().A,{name:"PageDiscussionsWrapper",children:"hidden"!==a.type&&o((0,F.jsxs)(M().wt,{gap:2,ref:l,children:[r&&(0,F.jsx)(E().j,{store:t,children:(0,F.jsx)(h().sA,{id:"pageLayout.discussionsModule.title",defaultMessage:"Comments"})}),(0,F.jsx)(_().s,{allowSelectionWithin:!0,children:(0,F.jsx)(J,{...a,withLegacyInputPadding:!0,store:t,collapsed:s,..."post_top_level_discussion"===i?{discussionLocation:"post_top_level_discussion",pageVisitStore:e.pageVisitStore,presenceStore:e.presenceStore,pageViewBlockContext:e.pageViewBlockContext}:{discussionLocation:"page_discussion"}})})]}))})}function ee(e){const{actorStore:t,size:o}=e;return t.table===m().GP?(0,F.jsx)(w().A,{botStore:t,size:o}):t.table===g().oo?(0,F.jsx)(P().A,{userStore:t,size:o}):t.table===p().yj?(0,F.jsx)(P().A,{userStore:void 0,size:o}):void(0,v().HB)(t)}},259140:(e,t,o)=>{o.d(t,{A:()=>oe});o(944114),o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(713998),a=o(474848);const l=(0,o(340498).wt)("addPageDiscussion",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{d:"M4.095 15.465c.287 0 .499-.137.84-.444l2.523-2.277 4.47.007c2.058 0 3.214-1.19 3.214-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.213h.273v1.983c0 .45.24.738.657.738zM3.958 5.156a.454.454 0 01-.444-.45c0-.24.198-.438.444-.438h7.157c.246 0 .445.198.445.437a.45.45 0 01-.445.451H3.958zm0 2.256a.454.454 0 01-.444-.451c0-.24.198-.444.444-.444h7.157a.448.448 0 010 .895H3.958zm0 2.256a.448.448 0 010-.896h4.669c.246 0 .437.206.437.452a.438.438 0 01-.437.444H3.958z"})});var c=()=>o(413267),d=()=>o(778781),u=()=>o(959013),p=()=>o(284371),m=()=>o(222299),g=()=>o(774733),h=()=>o(11048),v=()=>o(155004),S=()=>o(493823),f=()=>o(406699),y=()=>o(710149),b=()=>o(645873);const C=new(b().O2)("floatingTableOfContents",(async()=>await o.e(52614).then(o.bind(o,666892)))),_=(0,b()._h)(C,(e=>e.FloatingTableOfContents));var x=()=>o(38337),k=()=>o(449195),w=()=>o(722872),P=()=>o(478726);o(16280);var M=()=>o(299545),I=()=>o(25680),A=()=>o(644914),B=()=>o(508496),T=()=>o(548821),j=()=>o(712505),L=()=>o(557198),V=()=>o(678834),R=()=>o(918487),D=()=>o(661344),E=()=>o(601726),K=()=>o(257502),O=()=>o(729923),F=()=>o(793282),z=()=>o(483832),W=()=>o(660197),H=(o(672577),()=>o(180762)),N=()=>o(938090),G=()=>o(630116),U=()=>o(186445),Y=()=>o(747100),q=()=>o(661179),Q=()=>o(154807);function X(e){let{pageStore:t,disabled:o,viewsModule:r,wrapper:l,templatePickerMenuListStore:c,editorContentContainerRef:d}=e;const u=(0,n().v3)(),[p,m]=(0,i.useState)(void 0),{collectionViewBlockStore:g,viewsModuleContext:h,isViewsMainModule:v}=(0,s().K8)((()=>{if(!r)return{collectionViewBlockStore:void 0,collectionViewId:void 0,viewsModuleContext:void 0,isViewsMainModule:!1};const e=G().Bv.createChildStore(t,r.collection_view_block_pointer);return{collectionViewBlockStore:e,viewsModuleContext:{location:"page",viewsModule:r,currentPageStore:t,collectionViewBlockStore:e},isViewsMainModule:"viewsMain"===r.type}}),[t,r]);!function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,environment:n,collectionContextStore:r}=e;const a=(0,s().K8)((()=>{if(!t||!o)return;const e=n.RouterStore.state.route;if("page"===e.name&&e.scrollToBlockId){const e=o.getCollectionViewStores().find((e=>"page"===e.getType()));return null==e?void 0:e.id}}),[n,o,t]);(0,i.useEffect)((()=>{r&&a&&(0,H().t)({environment:n,collectionContextStore:r,collectionViewId:a,isFullScreen:r.isFullScreenStore.state,isRootChild:r.isRootChildStore.state,isInPeekRenderer:r.isInPeekRendererStore.state})}),[n,a,o,t,r])}({isViewsMainModule:v,collectionViewBlockStore:g,environment:u,collectionContextStore:p});const S=function(e){const t=(0,n().v3)();return(0,s().K8)((()=>{if(!e)return 0;const{device:o}=t,i=t.WindowSizeStore.state.width,n=Boolean(e&&(0,Y().cq)(e));if(n){const e=(0,Q().eO)({environment:t,isInPeek:!0});return j().default.getPeekModeWidth(i)-q().A.state-e}const s=(0,A().zo)(t,n)-(0,A().Ql)(t);let r=i-q().A.state-s;if(!(0,A().tv)(t))return r;const{shouldShowSidebar:a}=(0,U().X4)(t);return o.isMobile&&!o.isTablet||!a||(r-=(0,A().kf)(t)),r}),[t,e])}(g),f=function(e){let{isViewsMainModule:t,collectionViewBlockStore:o,collectionContextStore:i}=e;return(0,s().K8)((()=>{if(!t||!i)return!1;const e=null==i?void 0:i.collectionViewStore();return 1===(null==o?void 0:o.getCollectionViewStores().length)&&"page"===(null==e?void 0:e.getType())&&!(null!=e&&e.getFormat().page_pointer)}),[t,i,o])}({isViewsMainModule:v,collectionViewBlockStore:g,collectionContextStore:p});return g&&h?l((0,a.jsx)("div",{style:v?{minHeight:"60vh"}:void 0,children:(0,a.jsx)(N().dN,{store:g,isFullScreen:!1,productUseCase:"page_views_module",hideViewTabBar:f,headerActionsBehavior:f?"hidden":"always_show",headerAllowedActions:$,disabled:o,disableHoverMenu:!0,fullWidth:S,showOnlyCurrentView:!v,isUnlistedView:!1,viewsModuleContext:h,setCollectionContextStore:m,templatePickerMenuListStore:c,editorContentContainerRef:d})})):null}const $=["filter","sort","search","addItem","noDate"];var J=()=>o(996262),Z=()=>o(9768);const ee=new(b().O2)("PageLayoutModuleErrorFallback",(()=>o.e(98396).then(o.bind(o,100826)))),te=(0,b()._h)(ee,(e=>e.PageLayoutModuleErrorFallback));const oe=function(e){const{store:t,context:d,postContext:m,disabled:y,templatePickerMenuListStore:C,styleOverrides:I,onHeaderMouseEnter:B,onHeaderMouseLeave:j,pageCoverHeight:R,isEditable:D,getControlHoverStyle:E,pageViewBlockStores:K,pageViewBlockAccessor:O,onDetailMouseEnter:F,onDetailMouseLeave:z,modules:W,editorContentContainerRef:H,layoutRef:N}=e,G=(0,n().v3)(),U=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t],{debugName:"PageLayoutModules(collectionStore).useComputedStore"}),Y=(0,s().K8)((()=>t.getSchema()),[t],{debugName:"PageLayoutModules(schema).useComputedStore"}),q=(0,s().K8)((()=>(0,o(577814).A)({environment:G,store:t,pageViewBlockStore:K.pageViewBlockStore})),[G,t,K.pageViewBlockStore]),Q=(0,s().K8)((()=>{const e=(0,P().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=Y[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"inline"===e.visibility&&Y[e.section]&&0!==n})).map((e=>e.section))}),[Y,t],{debugName:"PageLayoutModules(inlinePropertyIDs).useComputedStore"}),X=(0,o(401497).IS)((e=>({bottomControls:{display:"flex",alignItems:"baseline",justifyContent:"flex-start",flexWrap:"wrap",color:e.text.tertiary,fontFamily:p().vc(o(662303).locale).sans},detailsButton:{fontWeight:p().Wy.medium,color:e.text.secondary}})),[]),$=(0,s().K8)((()=>(null==I?void 0:I.paddingX)??(0,P().OU)(d,G)),[d,G,null==I?void 0:I.paddingX],{debugName:"PageLayoutModules(horizontalPadding).useComputedStore"}),J=(0,i.useCallback)((()=>(0,M().oC)(t,{recursivelyLoadAllDiscussions:!1})),[t]),Z=(0,i.useCallback)((()=>J()>0),[J]),ee=(0,s().K8)((()=>{const e=(0,P().gV)(t);if(!e)return;return(e.collection_page_sections||[]).filter((e=>{const o=Y[e.section];if(!o||"relation"!==o.type)return;const i=t.getPropertyValue(e.section),n=(0,r().bG)({relationValue:(0,r().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length;return"minimal"===e.visibility&&Y[e.section]||"inline"===e.visibility&&Y[e.section]&&0===n})).map((e=>e.section))}),[Y,t],{debugName:"PageLayoutModules(minimalPropertyIDs).useComputedStore"}),{value:oe}=(0,b().fJ)(g().commentsDependency),{value:ne}=(0,b().fJ)(o(650829).assistantDependency),se=(0,s().K8)((()=>{var e;if(!ne)return!1;const i=ne.clientSkillHelpers.createClientGlobalSkill("fill_title");return 1===ne.assistantSurfaceValidators.filterAssistantSurfaceActionsForContext(ne.assistantSurfaceValidators.clientSkillToAssistantSurfaceAction([i]),{type:"entrypoint",entrypoint:"pageStart",pageStore:t,isMobile:G.device.isMobile,userSettings:null===(e=o(351360).default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettings()}).length}),[ne,G,t]),re=(0,s().K8)((()=>(0,o(900967).J)(t,G).backlinksCount),[G,t],{debugName:"PageLayoutModules.useComputedStore:numberOfBacklinks"}),ae=(0,L().Lx)({pageStore:t,numBacklinks:re}),le=(0,L().RR)({pageStore:t,numBacklinks:re}),ce=(0,P().L5)(d),de=(0,s().K8)((()=>(0,o(600871).LX)({device:G.device})),[G.device]),ue=(0,s().K8)((()=>{if(e.context===T().Rr.DraftPostInInlineComposer)return{bottomControls:[]};const n=async()=>{await(0,o(182034).O)({blockStore:t,pageViewBlockStore:K.pageViewBlockStore,environment:G})},s=async()=>{const{assistantDependency:e}=await Promise.resolve().then(o.bind(o,650829)),i=t.getTitleStore();if(!i)return;const n=await e.load();o(725614).setSelectionAtEnd({store:i}),n.executeAssistantSkillAction({environment:G,clientSkillWithParameterValues:n.clientSkillHelpers.dangerouslyCreateClientSkillWithParameterValues(n.clientSkillHelpers.createClientGlobalSkill("fill_title")),from:"block_action_menu",assistantSurfaceType:G.device.isMobile?"mobileWriter":"writer"})};try{let d=[];const p=[...e.topControls],m=()=>{if("section_hide"!==(0,k().Rn)()&&Z()){const e=J();return(0,a.jsx)(S().p,{isGray:!0,onClick:()=>{"PageDetailsStore"in G&&G.PageDetailsStore.setToggleState({environment:G,type:"discussion",id:t.id},!0)},icon:l,style:X.detailsButton,children:(0,a.jsx)(u().sA,{id:"pageViewBlock.show.pageComments",defaultMessage:"{numberOfComments, plural, one {{numberOfComments} comment} other {{numberOfComments} comments}}",values:{numberOfComments:e}})},"showcomments")}},h=()=>{if(!U)return;const e=(0,P().gV)(t),i=t.isNonEditableState();if(!e)return;const n=ee;return n&&n.length?(0,a.jsx)(o(764891).A,{propertyIds:n,store:t,collectionStore:U,disabled:y,locked:i,blockPropertyValueOverlayStore:ce?o(77238).A:o(205682).A,format:e,type:"minimal"}):void 0},v=()=>{const e=(0,M().hq)(t,{recursivelyLoadAllDiscussions:!1});if(0===e.length)return;const i=(0,a.jsx)(u().sA,{id:"pageViewBlock.showResolvedComments.button",defaultMessage:"{numberOfResolvedComments, plural, one {{numberOfResolvedComments} resolved comment} other {{numberOfResolvedComments} resolved comments}}",values:{numberOfResolvedComments:e.length}});return(0,A().Nk)(G)?(0,a.jsx)(S().p,{icon:c().b,isGray:!0,style:X.detailsButton,onClick:()=>{o(112873).B4({environment:G,blockStore:t,analyticsFrom:"page_comments",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,discussionIds:e.map((e=>e.id))})},children:i}):(0,a.jsx)(f().Ay,{buttonPopupStore:K.resolvedDiscussionButtonPopupStore,popupType:G.device.isMobile?f().z7.SlideUp:f().z7.Popup,renderOrigin:e=>(0,a.jsx)(S().p,{icon:c().b,isGray:!0,style:X.detailsButton,...e,children:i}),render:i=>{let n;return n=G.device.isMobile?{menuType:w().gu.Modal,title:(0,a.jsx)(u().sA,{defaultMessage:"Resolved comments",id:"pageViewBlock.resolvedComments.menuTabTitle"}),right:(0,a.jsx)(o(480095).DoneMenuText,{}),onClickRight:i.close,whiteBackground:!0}:{menuType:w().gu.Popup,width:500},(0,a.jsx)(o(928600).A,{...n,children:e.map(((e,n,s)=>(0,a.jsx)(o(13679).A,{store:e,droppable:!0,render:()=>oe?(0,a.jsx)(g().PW,{store:e,format:oe.discussionHelpers.DiscussionFormat.Menu,isFirst:0===n,isOnly:1===s.length,discussionLocation:"page_discussion",showResolveButtonByDefaultIfPossible:!0,blockStore:t,onDismiss:i.close},e.id):null},e.id)))})}},"resolve-discussions")},b=e=>{const o=[];ae&&o.push((0,a.jsx)(i.Fragment,{children:(0,a.jsx)(V().y,{pageStore:t,backlinksButtonPopupStore:K.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:X.detailsButton,buttonIsGray:!0}})},"backlinks"));const n="hidden"===e.type,s=n&&m();s&&o.push((0,a.jsx)(i.Fragment,{children:s},"discussions"));const r=v();r&&!n&&o.unshift((0,a.jsx)(i.Fragment,{children:r},"resolveddiscussions"));const l=h();return l&&o.push((0,a.jsx)(i.Fragment,{children:l},"minimalpagesections")),o};if(d=b(q),("always"===le||"onHover"===le)&&!de){const e={isBottomControl:!1,..."always"===le?{forceVisible:!0}:{}};p.unshift((0,a.jsx)(i.Fragment,{children:(0,a.jsx)(V().y,{pageStore:t,backlinksButtonPopupStore:K.backlinksButtonPopupStore,numBacklinks:re,customization:{buttonStyles:E(e),buttonIsLightGray:!0}})},"backlinks"))}"section_hide"===(0,k().Rn)()||t.isCollectionView()||t.isInsideCollection()||Z()||!t.canComment()||!G.currentUser.isLoggedIn()||K.pageViewBlockStore.state.forceDiscussionOpen||t.pathIsDead()||t.isPost()||y||de||p.push((r={isBottomControl:!1},(0,a.jsx)(S().p,{style:E({isBottomControl:r.isBottomControl}),isLightGray:!0,onClick:n,icon:l,children:G.device.isSmallPhone?(0,a.jsx)(u().sA,{id:"pageViewBlock.add.pageCommentMobile",defaultMessage:"Comment"}):(0,a.jsx)(u().sA,{id:"pageViewBlock.add.pageComment",defaultMessage:"Add comment"})},"addcomment"))),se&&p.push((0,a.jsx)(S().p,{style:E({isBottomControl:!1}),isBlue:!0,onClick:s,icon:o(263931).D,children:(0,a.jsx)(u().sA,{id:"pageViewBlock.add.fillTitle",defaultMessage:"Fill page title"})},"fill-title"));return{headerControls:(0,a.jsx)("div",{className:ce?x().S6D:void 0,children:(0,a.jsx)(o(774524).A,{store:t,context:e.context,children:p})}),bottomControls:d}}catch(d){return{bottomControls:[]}}var r}),[e.context,e.topControls,K.pageViewBlockStore,K.resolvedDiscussionButtonPopupStore,K.backlinksButtonPopupStore,G,t,E,Z,y,q,le,se,ce,J,X.detailsButton,U,ee,oe,ae,re,de],{debugName:"PageLayoutModules(headerAndBottomControlsStore).useComputedStore"});return(0,a.jsxs)(h().A,{name:"PageLayoutModules",children:[(0,a.jsx)(v().s,{style:{display:"contents"},allowSelectionWithin:!1,children:(0,a.jsx)(_,{store:t})}),W.map((i=>(0,a.jsx)(o(306631).S,{from:`PageLayout.${i.type}`,fallback:e=>{let{error:t,errorId:o}=e;return(0,a.jsx)(te,{error:t,errorId:o,type:i.type})},getParentEl:()=>N.current,children:(0,a.jsx)(ie,{editorContentContainerRef:H,module:i,context:d,postContext:m,pageViewBlockStore:K.pageViewBlockStore,disabled:y,environment:G,bottomControls:ue.bottomControls,headerControls:ue.headerControls,horizontalPadding:$,inlinePropertyIDs:Q,isEditable:D,isInPeek:ce,onDetailMouseEnter:F,onDetailMouseLeave:z,onHeaderMouseEnter:B,onHeaderMouseLeave:j,pageCoverHeight:R,pageViewBlockAccessor:O,headerFocusStore:K.headerFocusStore,store:t,collectionStore:U,collectionSchema:Y,bottomControlsStyle:X.bottomControls,templatePickerMenuListStore:C,pageTitleWithIconProps:e,modules:W,pageDiscussionsRenderState:q})},i.id)))]})};function ie(e){const{module:t,modules:o,context:i,postContext:r,disabled:l,environment:c,bottomControls:u,headerControls:p,horizontalPadding:g,inlinePropertyIDs:S,isEditable:f,isInPeek:b,onDetailMouseEnter:C,onDetailMouseLeave:_,onHeaderMouseEnter:k,onHeaderMouseLeave:w,pageCoverHeight:P,pageViewBlockAccessor:M,headerFocusStore:A,store:L,collectionStore:V,collectionSchema:H,bottomControlsStyle:N,templatePickerMenuListStore:G,pageTitleWithIconProps:U,pageDiscussionsRenderState:Y,editorContentContainerRef:q}=e,{isMobile:Q}=(0,n().Y0)(),{pageVisitStore:$,presenceStore:ee}=(0,I().S)({store:L,environment:c,postContext:r}),te=(0,s().K8)((()=>!!V&&(0,R().v)({collectionStore:V,module:t,isMobile:Q})),[V,Q,t]),oe="page_main",ie=(0,Z().Jh)({layoutModule:t,area:oe,collectionSchema:H,collectionStore:V,showDetailsPanelToggleButtonBelowTitle:te,modules:o,context:i,postContext:r}),ne=(0,Z().Br)({layoutModule:t,area:oe,collectionSchema:H,collectionStore:V,pageMainModules:o,showDetailsPanelToggleButtonBelowTitle:te}),se=(0,s().K8)((()=>B().default.checkGate({gateName:"side_peek_transition_improvements"})&&i===T().Rr.PeekView&&j().default.state.open&&"side_peek"===j().default.state.mode&&(j().default.state.isOpening||j().default.state.isClosing)&&("editor"===t.type||"views"===t.type||"viewsMain"===t.type)),[i,t.type]);return(0,a.jsx)(h().A,{name:"PageLayoutModule",children:(()=>{if(se)return(0,a.jsx)("div",{className:x().GSK,children:(0,a.jsx)(y().A,{style:{width:"100%",height:"30px",display:"block",marginTop:32,borderRadius:8}})});if((0,d().gx)(t))return(0,a.jsx)(z().v,{context:i,disabled:l,propertyId:t.propertyId,store:L,pageModule:t,wrapper:ie,stackPropertyLabelAndValue:!0});switch(t.type){case"cover":return(0,a.jsx)(E().f,{store:L,isEditable:f,paddingX:g,pageCoverHeight:P,onMouseEnter:k,onMouseLeave:w,isInPeek:b});case"normalizedTitleWithIcon":return ie((0,a.jsx)(W().H,{handleHeaderMouseEnter:k,handleHeaderMouseLeave:w,headerControls:p,headerFocusStore:A,layoutModule:t,...U}));case"properties":return(0,a.jsx)(F().h,{context:i,disabled:l,store:L,layoutModule:t,customization:{neverShowPropertiesElsewhereInLayout:!0,disableContainerPadding:!0},wrapper:ie,showDefaultTitle:ne});case"inlinePageSections":return(0,a.jsx)(D().LG,{context:i,disabled:l,inlinePropertyIDs:S,store:L,wrapper:ie});case"expandedBacklinks":case"transcript":case"formTitle":case"formQuestion":case"formSubmit":case"placeholder":case"deleted_property":case"recentActivity":case"collaborators":case"teamspaces":return null;case"discussions":return r===T().Rr.DraftPostInInlineComposer||r===T().Rr.DraftPostInFullPageComposer?null:r===T().Rr.PostInFullPageOrPeek?(0,a.jsx)(K().d,{store:L,wrapper:ie,showDefaultTitle:!1,discussionLocation:"post_top_level_discussion",pageDiscussionsRenderState:Y,presenceStore:ee,pageVisitStore:$}):(0,a.jsx)(K().d,{store:L,wrapper:ie,showDefaultTitle:ne,discussionLocation:"page_discussion",pageDiscussionsRenderState:Y});case"bottomControls":return 0===u.length?null:ie((0,a.jsx)(v().s,{allowSelectionWithin:!0,children:(0,a.jsx)("div",{style:N,className:"notion-page-details-controls",onMouseEnter:C,onMouseLeave:_,children:u})}));case"editor":return(0,a.jsx)(O().p,{context:i,disabled:l,handlePlaceholderWrapClick:e=>m().YB(e,L,c),pageBlockStore:L,pathToBlockId:t.pathToBlockId,templatePickerMenuListStore:G,pageViewBlockAccessor:M,ref:q,editorWrapper:i===T().Rr.DraftPostInInlineComposer?void 0:ie});case"viewsMain":case"views":return(0,a.jsx)(X,{pageStore:L,disabled:l,viewsModule:t,wrapper:ie,templatePickerMenuListStore:G,editorContentContainerRef:q});case"relationsGroup":return(0,a.jsx)(J().z,{pageStore:L,wrapper:ie,disabled:l,context:i,showDefaultTitle:ne})}})()})}},350124:(e,t,o)=>{o.d(t,{s:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("reactionAdd",{viewBox:"0 0 20 20",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M12 14.3516C12 14.1875 12.0573 14.0482 12.1719 13.9336C12.2891 13.8164 12.4297 13.7578 12.5938 13.7578H14.7617V11.5938C14.7617 11.4297 14.819 11.2904 14.9336 11.1758C15.0482 11.0586 15.1875 11 15.3516 11C15.5156 11 15.6549 11.0586 15.7695 11.1758C15.8867 11.2904 15.9453 11.4297 15.9453 11.5938V13.7578H18.1133C18.2747 13.7578 18.4128 13.8164 18.5273 13.9336C18.6445 14.0482 18.7031 14.1875 18.7031 14.3516C18.7031 14.5156 18.6445 14.6562 18.5273 14.7734C18.4128 14.888 18.2747 14.9453 18.1133 14.9453H15.9453V17.1133C15.9453 17.2747 15.8867 17.4128 15.7695 17.5273C15.6549 17.6445 15.5156 17.7031 15.3516 17.7031C15.1875 17.7031 15.0482 17.6445 14.9336 17.5273C14.819 17.4128 14.7617 17.2747 14.7617 17.1133V14.9453H12.5938C12.4297 14.9453 12.2891 14.888 12.1719 14.7734C12.0573 14.6562 12 14.5156 12 14.3516Z"}),(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0615 17.123C9.09538 17.123 8.1862 16.9385 7.33398 16.5693C6.48177 16.2048 5.72982 15.6966 5.07812 15.0449C4.43099 14.3932 3.92285 13.6413 3.55371 12.7891C3.18457 11.9368 3 11.0277 3 10.0615C3 9.09538 3.18457 8.1862 3.55371 7.33398C3.92285 6.48177 4.43099 5.7321 5.07812 5.08496C5.72982 4.43327 6.47949 3.92285 7.32715 3.55371C8.17936 3.18457 9.08854 3 10.0547 3C11.0254 3 11.9368 3.18457 12.7891 3.55371C13.6413 3.92285 14.3932 4.43327 15.0449 5.08496C15.6966 5.7321 16.207 6.48177 16.5762 7.33398C16.9453 8.1862 17.1299 9.09538 17.1299 10.0615C17.1299 10.6193 17.0684 11.1581 16.9453 11.678V11.5938C16.9453 11.1646 16.7813 10.7706 16.4767 10.4687C16.2657 10.2558 16.0099 10.1116 15.7285 10.0441C15.7263 9.26677 15.5805 8.53887 15.291 7.86035C14.9993 7.1722 14.5938 6.56836 14.0742 6.04883C13.5547 5.5293 12.9508 5.1237 12.2627 4.83203C11.5791 4.54036 10.8431 4.39453 10.0547 4.39453C9.27083 4.39453 8.53483 4.54036 7.84668 4.83203C7.16309 5.1237 6.5638 5.5293 6.04883 6.04883C5.53385 6.56836 5.13053 7.1722 4.83887 7.86035C4.5472 8.54395 4.40137 9.27767 4.40137 10.0615C4.40137 10.8499 4.5472 11.5859 4.83887 12.2695C5.13053 12.9531 5.53385 13.5547 6.04883 14.0742C6.56836 14.5938 7.16992 14.9993 7.85352 15.291C8.54167 15.5827 9.27767 15.7285 10.0615 15.7285C10.5739 15.7285 11.0641 15.6669 11.5321 15.5438C11.8272 15.8056 12.1958 15.9453 12.5938 15.9453H13.7617V16.0641C13.4535 16.2554 13.1293 16.4238 12.7891 16.5693C11.9368 16.9385 11.0277 17.123 10.0615 17.123ZM10.0547 13.4248C9.58073 13.4248 9.16146 13.3405 8.79688 13.1719C8.43685 12.9987 8.15658 12.8005 7.95605 12.5771C7.76009 12.3538 7.66211 12.167 7.66211 12.0166C7.66211 11.9346 7.69401 11.8776 7.75781 11.8457C7.82617 11.8092 7.89909 11.8092 7.97656 11.8457C8.22721 11.9779 8.51204 12.1055 8.83105 12.2285C9.15006 12.3516 9.55794 12.4131 10.0547 12.4131C10.5514 12.4131 10.9593 12.3516 11.2783 12.2285C11.6019 12.1055 11.8867 11.9779 12.1328 11.8457C12.2103 11.8092 12.2832 11.8092 12.3516 11.8457C12.4199 11.8776 12.4541 11.9346 12.4541 12.0166C12.4541 12.167 12.3538 12.3538 12.1533 12.5771C11.9528 12.8005 11.6725 12.9987 11.3125 13.1719C10.9525 13.3405 10.5332 13.4248 10.0547 13.4248ZM8.03809 9.44629C7.82389 9.44629 7.63704 9.3597 7.47754 9.18652C7.32259 9.01335 7.24512 8.79004 7.24512 8.5166C7.24512 8.24772 7.32259 8.02669 7.47754 7.85352C7.63704 7.67578 7.82389 7.58691 8.03809 7.58691C8.25228 7.58691 8.44141 7.67578 8.60547 7.85352C8.76953 8.02669 8.85156 8.24772 8.85156 8.5166C8.85156 8.79004 8.76953 9.01335 8.60547 9.18652C8.44141 9.3597 8.25228 9.44629 8.03809 9.44629ZM12.0713 9.44629C11.8571 9.44629 11.6702 9.3597 11.5107 9.18652C11.3558 9.01335 11.2783 8.79004 11.2783 8.5166C11.2783 8.24772 11.3558 8.02669 11.5107 7.85352C11.6702 7.67578 11.8571 7.58691 12.0713 7.58691C12.2855 7.58691 12.4746 7.67578 12.6387 7.85352C12.8027 8.02669 12.8848 8.24772 12.8848 8.5166C12.8848 8.79004 12.8027 9.01335 12.6387 9.18652C12.4746 9.3597 12.2855 9.44629 12.0713 9.44629Z"})]})})},388139:(e,t,o)=>{o.d(t,{F:()=>a});o(296540);var i=()=>o(401497),n=()=>o(959013),s=()=>o(331542),r=o(474848);function a(){const e=(0,i().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:16,marginTop:"12vh"},message:{fontSize:14,marginTop:8,color:e.text.secondary}})),[]);return(0,r.jsxs)("div",{style:e.wrapper,children:[(0,r.jsx)(s().A,{}),(0,r.jsx)("div",{style:e.message,children:(0,r.jsx)(n().sA,{defaultMessage:"Importing…",id:"frame.importingMessage"})})]})}},457510:(e,t,o)=>{function i(){return{textIndent:"27px",marginLeft:"-27px"}}o.d(t,{i:()=>i})},483832:(e,t,o)=>{o.d(t,{v:()=>P});var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(778781),a=()=>o(33791),l=()=>o(774733),c=()=>o(29247),d=()=>o(41459),u=()=>o(155004),p=()=>o(21140),m=()=>o(68350),g=()=>o(199896),h=()=>o(891078),v=()=>o(402838),S=()=>o(205682),f=()=>o(171018),y=()=>o(548821),b=()=>o(77238),C=()=>o(795963),_=()=>o(255824),x=()=>o(671891),k=()=>o(517223),w=o(474848);function P(e){const{store:t,context:o,propertyId:P,disabled:M,wrapper:I,pageModule:A,stackPropertyLabelAndValue:B}=e,T=(0,h().bx)(t,M),j=(0,s().K8)((()=>t.getAssociatedCollectionStore()),[t]),L=(0,s().K8)((()=>null==j?void 0:j.getParentStore()),[j]),V=(0,s().K8)((()=>{if(t.isCollectionViewPageWithContent())return{type:"hidden"};const e=t.getAssociatedCollectionStore();return e?{type:"visible",store:t,collectionStore:e,propertyId:P}:{type:"hidden"}}),[P,t]),R=(0,s().K8)((()=>null==j?void 0:j.getSchema()),[j]),D=(0,s().K8)((()=>null==j?void 0:j.getFormat()),[j]),E=(0,s().K8)((()=>{var e;return null===(e=V.collectionStore)||void 0===e?void 0:e.getSchema()[P]}),[V.collectionStore,P]),K=(0,s().K8)((()=>t.isNonEditableState()),[t]),O=(0,i.useMemo)((()=>new(f().YB)),[]),F=i.useRef(null),z=(0,s().K8)((()=>!(!j||!L||"block"!==L.table)&&(0,a().v)({collectionStore:j,collectionViewBlockStore:L,checkNavigableAncestorLocked:!1})),[j,L]),W=o===y().Rr.PeekView,H=(0,r().gx)(A)?A:void 0,{isPropertyInPageDetails:N}=(0,k()._1)({store:t,propertyId:P}),{isMobile:G}=(0,n().v3)().device,U=(0,v().s)(F,50),Y=(0,x().l)(t),q=(0,s().K8)((()=>{var e;return"hide"===(null==Y||null===(e=Y.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[Y]),Q=(0,_().a)();if(!E)return null;if("hidden"===V.type)return null;if(!j||!R||!D)return null;const X=!Q&&"relation"!==E.type,$=!Q,J=(0,C().Ge)({isMobile:G,stackPropertyLabelAndValue:B,isPropertyInPageDetails:N}),Z=(0,w.jsx)(l().L_,{store:t,propertyId:P,style:N||G?{flexShrink:0}:{position:"absolute",left:null!=U&&U.width?U.width+4:void 0,top:0}}),ee=(0,w.jsxs)(w.Fragment,{children:[X&&(0,w.jsxs)(p().Ye,{alignItems:"center",justifyContent:N?void 0:"space-between",style:J?{width:J,flexShrink:0}:void 0,children:[(0,w.jsx)(m().I,{schema:R,format:D,hideIcon:q,hideDragHandle:!0,property:P,blockStore:t,collectionStore:j,pagePropertiesStore:O,disabled:M,locked:K,canConfigureCollection:z,isInPeekRenderer:W,styleVariants:{width:(0,C().aG)({stackPropertyLabelAndValue:B}),height:B?{variant:"small"}:{variant:"medium"},size:"small",fontWeight:"medium"},layoutModule:H,hideDuplicatePropertyOption:!0}),$?Z:null]}),(0,w.jsx)(g().A,{store:t,analyticsName:"page_property",children:(0,w.jsx)(c().m,{store:t,property:P,disabled:!T,locked:K,format:d().j.PropertyModule,tableWrap:!0,blockPropertyValueOverlayStore:W?b().A:S().A,collectionStore:V.collectionStore,isInPeekRenderer:W,propertyModule:H},P)})]});return I((0,w.jsx)(u().s,{allowSelectionWithin:!0,style:{position:"relative",width:"100%"},children:B?(0,w.jsx)(p().wt,{ref:F,children:ee}):(0,w.jsx)(p().Ye,{ref:F,style:{alignItems:"flex-start"},children:ee})}))}},538776:(e,t,o)=>{o.d(t,{l:()=>s});var i=()=>o(645873);const n=new(i().O2)("GenerateSocialMediaPreviewImageWrapper",(async()=>Promise.all([o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(22900),o.e(49889),o.e(97727),o.e(85128),o.e(83700),o.e(95555),o.e(58823),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(67780),o.e(96933),o.e(87598),o.e(23063),o.e(3965),o.e(84341),o.e(80533),o.e(45620),o.e(58221),o.e(44763),o.e(8081),o.e(67183),o.e(64598),o.e(82720),o.e(4253),o.e(86787),o.e(77465),o.e(24593),o.e(80896),o.e(1440),o.e(67378),o.e(58504),o.e(97308),o.e(63996),o.e(20636),o.e(66268),o.e(55717),o.e(7005),o.e(40186),o.e(22585),o.e(73206),o.e(43020),o.e(33235),o.e(91957),o.e(84176),o.e(16357),o.e(75681)]).then(o.bind(o,794831)))),s=(0,i()._h)(n,(e=>e.GenerateSocialMediaPreviewImageWrapper))},557198:(e,t,o)=>{o.d(t,{Ap:()=>d,Lx:()=>p,RR:()=>u,X1:()=>c});var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(534177),a=()=>o(334261),l=()=>o(449195);function c(e){const{format:t}=e;return{backlinksConfiguredToShowAboveTitle:(0,s().K8)((()=>{const e=(0,l().nl)(t.page_section_visibility);return"section_collapsed"===e||"always_show"===e}),[t.page_section_visibility])}}function d(e){const{store:t,format:o}=e,s=(0,n().v3)();return{backlinksVisibility:(0,l().nl)(o.page_section_visibility),updateBacklinksVisibility:(0,i.useCallback)((e=>{const i=(0,l().SB)(e);a().OD({environment:s,pageSection:"backlinks",visibility:i,store:t,format:o})}),[s,t,o])}}function u(e){const{pageStore:t,numBacklinks:o}=e,{store:i,format:n}=(0,s().K8)((()=>{const e=t.getAssociatedCollectionStore()??t,o=e.getFormat();return{store:e,format:o}}),[t]),{backlinksVisibility:a}=d({store:i,format:n});return 0===o?"never":"always_show"===a?"always":"section_collapsed"===a?"onHover":"section_hide"===a?"never":void(0,r().HB)(a)}function p(e){return!1}},577814:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(354520);var i=()=>o(449195),n=()=>o(478726),s=()=>o(299545);function r(e){var t;const{store:o,pageViewBlockStore:r,environment:a}=e,l=s().O3(o,{recursivelyLoadAllDiscussions:!1}).sort(((e,t)=>t.getReactions().length-e.getReactions().length)),c=l.length>0,d=0===l.length,u=0===l.filter((e=>e.getComments().length>0)).length,p="PageDetailsStore"in a&&a.PageDetailsStore.getToggleState({environment:a,type:"discussion",id:o.id}),m={type:"hidden"},g=o.getAssociatedCollectionStore()??o,h="section_hide"===(0,i().z5)(null===(t=g.getFormat())||void 0===t?void 0:t.page_section_visibility);if(!(null==r?void 0:r.state.forceDiscussionOpen)&&(!o.isInsideCollection()||!d)&&(d||c&&(!1===p||void 0===p&&h)))return m;if(h)return m;const v=o.pathIsDead(),S=a.currentUser.isLoggedIn();if(d&&v)return m;const f=S&&o.canComment()&&u&&!(0,n().sV)(o)&&(!(0,n().fc)(o)||(0,n().Cg)(o));return!f&&d?m:{type:"visible",showDiscussionInput:f,unresolvedDiscussionStores:l}}},601726:(e,t,o)=>{o.d(t,{E:()=>g,f:()=>m});o(296540);var i=()=>o(484714),n=()=>o(847249),s=()=>o(155004),r=()=>o(145214),a=()=>o(544862),l=()=>o(38337),c=()=>o(478726),d=()=>o(551619),u=()=>o(817942),p=o(474848);function m(e){const{store:t,isEditable:o,isInPeek:c,paddingX:m,pageCoverHeight:h,onMouseEnter:v,onMouseLeave:S}=e,f=(0,i().v3)(),y=(0,n().K8)((()=>t.isCollectionView()?"20vh":h),[h,t]),b=(0,n().K8)((()=>f.WindowSizeStore.getSafePaddingLeftCSS(m)),[f.WindowSizeStore,m]),C=(0,n().K8)((()=>f.WindowSizeStore.getSafePaddingRightCSS(m)),[f.WindowSizeStore,m]),_=(0,n().K8)((()=>f.WindowSizeStore.state.width),[f.WindowSizeStore]),x=(0,d().no)(t),k=(0,n().K8)((()=>g(t,f)),[f,t]);return(0,p.jsx)(u().Pb,{style:{isolation:"isolate"},children:(0,p.jsx)(r().A,{tag:s().s,animate:{translateX:x},allowSelectionWithin:!1,className:c?l().S6D:void 0,style:k,onMouseEnter:v,onMouseLeave:S,children:(0,p.jsx)(a().A,{height:y,store:t,disabled:!o,paddingLeft:b,paddingRight:C,proxyWidth:_})})})}function g(e,t){const o=(0,c().NR)(e,t);return o.zIndex=2,o}},605243:(e,t,o)=>{o.d(t,{A:()=>p});var i=o(296540),n=()=>o(484714),s=o(474848);const r=(0,o(340498).wt)("addPageCover",{viewBox:"0 0 14 14",svg:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 0a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm0 12h10L8.5 5.5l-2 4-2-1.5L2 12z"})});var a=()=>o(959013),l=()=>o(222299),c=()=>o(751156),d=()=>o(748539),u=()=>o(493823);function p(e){const{store:t,style:o,label:p}=e,m=(0,n().v3)(),[g,h]=(0,i.useState)(!1),v=(0,n().Y0)(),S=(0,i.useCallback)((async()=>{const e=t.getCoverStore();if(!e)return;if(e.getValue())return;h(!0);const o=await d().f.load();c().createAndCommit({userAction:"PageViewBlock.handleAddRandomCoverClick",environment:m,canUndo:!0,perform:i=>{l().Oj({transaction:i,store:t,coverStore:e,pageCovers:o})}}),h(!1)}),[m,t]);return!0===g?(0,s.jsx)(u().p,{style:o,isLightGray:!0,disabled:!0,icon:r,children:v.isSmallPhone?(0,s.jsx)(a().sA,{id:"pageAddCoverButton.add.pageCoverMobileLoading",defaultMessage:"Loading"}):(0,s.jsx)(a().sA,{id:"pageAddCoverButton.add.pageCoverLoading",defaultMessage:"Loading cover"})},"add-cover-loading"):(0,s.jsx)(u().p,{style:o,isLightGray:!0,onClick:S,icon:r,children:p},"add-cover")}},620137:(e,t,o)=>{o.d(t,{e:()=>s});var i=()=>o(645873);const n=new(i().O2)("FormBlock",(async()=>await Promise.all([o.e(96346),o.e(55373),o.e(44711),o.e(53321),o.e(85864),o.e(92845),o.e(71718),o.e(95794),o.e(74562),o.e(63077),o.e(28271),o.e(17254),o.e(90966),o.e(28866),o.e(59794),o.e(80896),o.e(40186),o.e(65688)]).then(o.bind(o,504514)))),s=(0,i()._h)(n,(e=>e.FormBlock))},642054:(e,t,o)=>{o.d(t,{A:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("addPage",{viewBox:"0 0 14 14",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 0c3.861 0 7 3.139 7 7s-3.139 7-7 7-7-3.139-7-7 3.139-7 7-7zM3.561 5.295a1.027 1.027 0 1 0 2.054 0 1.027 1.027 0 0 0-2.054 0zm5.557 1.027a1.027 1.027 0 1 1 0-2.054 1.027 1.027 0 0 1 0 2.054zm1.211 2.816a.77.77 0 0 0-.124-1.087.786.786 0 0 0-1.098.107c-.273.407-1.16.958-2.254.958-1.093 0-1.981-.55-2.244-.945a.788.788 0 0 0-1.107-.135.786.786 0 0 0-.126 1.101c.55.734 1.81 1.542 3.477 1.542 1.668 0 2.848-.755 3.476-1.541z"})})},660197:(e,t,o)=>{o.d(t,{H:()=>R});var i=o(296540),n=()=>o(484714),s=()=>o(819121),r=()=>o(847249),a=()=>o(861017),l=()=>o(919709),c=()=>o(650829),d=()=>o(155004),u=()=>o(457510),p=()=>o(66858),m=()=>o(556048),g=()=>o(38337),h=()=>o(753199),v=()=>o(478726),S=()=>o(747100),f=()=>o(836251),y=()=>o(578872),b=()=>o(337567),C=()=>o(548821),_=()=>o(712505),x=()=>o(517223),k=()=>o(551619),w=()=>o(589647),P=()=>o(918487),M=()=>o(9768),I=()=>o(817942),A=o(474848);function B(e){let{onMouseEnter:t,onMouseLeave:o,headerControls:i}=e;return(0,A.jsx)("div",{onMouseEnter:t,onMouseLeave:o,children:i})}var T=()=>o(603616),j=()=>o(793282),L=()=>o(441301);const V=0;function R(e){const{store:t,hasCover:o,headerFocusStore:R,headerControls:D,isEditable:E,openMenuOnMount:K,openMenuOnMountCallback:O,pageViewBlockStore:F,discussionInputStore:z,handleHeaderMouseEnter:W,handleHeaderMouseLeave:H,hideTitleIfEmpty:N,isInPageLayoutModuleEditor:G=!1,layoutModule:U,disabled:Y,...q}=e,Q=(0,n().v3)(),{WindowSizeStore:X}=Q,{isMobile:$,isAndroid:J}=(0,n().Y0)(),[Z,ee]=(0,i.useState)((()=>!!J));(0,i.useEffect)((()=>{(async()=>{if((0,f().w6)(Q)){const e=Q.RouterStore.getState();if((0,a().bh)(e.route)){await t.load();const e=(0,y().GN)(t),o=null==e?void 0:e.getSiteStore();await(null==o?void 0:o.load());const i=null==o?void 0:o.getSettings(),n=null==i?void 0:i.embedSettings;return void ee(Boolean(!(null!=n&&n.hideTitle)))}}ee(!0)})()}),[Q,t]);const te=(0,r().K8)((()=>(0,S().cq)(t)),[t]),oe=(0,r().K8)((()=>te&&(_().default.isSidePeekOpen()||_().default.isSidePeekClosingStore.state)),[te]),{context:ie}=q,ne=C().m8.has(ie),se=(0,u().i)(),re=$&&!o,ae=!$&&q.isInSidePeek||ne,le=(0,r().K8)((()=>t.isExternalObjectInstancePageBlockStore()&&t.hasError()?t:null),[t]),ce=(0,r().K8)((()=>t.canEdit()),[t]),de=(0,r().K8)((()=>X.getSafePaddingLeftCSS(V)),[X]),ue=(0,r().K8)((()=>X.getSafePaddingRightCSS(V)),[X]),pe=(0,r().K8)((()=>(0,v().NR)(t,Q)),[t,Q]),me=(0,k().Sm)(t),ge=(0,i.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,s().p)(t)&&R.setState(!0)}),[R]),he=(0,i.useCallback)((()=>{R.setState(!1)}),[R]),ve=(0,A.jsx)("div",{className:te?g().S6D:void 0,style:{display:"flow-root",pointerEvents:"auto"},children:(0,A.jsx)(T().A,{store:t,isEditable:E,hasCover:o,isInSidePeek:q.isInSidePeek,openMenuOnMount:K,openMenuOnMountCallback:O,isInPageLayoutModuleEditor:G,isInlinePostTitle:ne})}),Se=(0,r().K8)((()=>{var e;return(0,l().w9s)(null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue())}),[t]),fe=(0,A.jsx)(L().s,{store:t,disabled:Y,hideText:N&&Se||!Z,...q}),ye=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),be=(0,r().K8)((()=>!(!ye||!U)&&(0,P().v)({collectionStore:ye,module:U,isMobile:$})),[ye,$,U]),Ce=(0,r().K8)((()=>null==ye?void 0:ye.getSchema()),[ye]),_e=Ce&&U?(0,x().LD)({collectionSchema:Ce,module:U}):void 0,xe=(0,i.useMemo)((()=>{const e={...Boolean(null==_e?void 0:_e.length)&&($?{paddingBottom:20}:{paddingBottom:M().Lb})};return(0,A.jsxs)(A.Fragment,{children:[ye&&be&&(0,A.jsx)("div",{style:e,children:(0,A.jsx)(w().L,{collectionStore:ye,pageViewBlockContext:ie})}),Boolean(null==_e?void 0:_e.length)&&(0,A.jsx)("div",{style:{paddingTop:$&&!be?M().Lb:void 0,marginLeft:-2},children:(0,A.jsx)(j().h,{context:ie,disabled:Y,store:t,variant:"pinned",layoutModule:U,propertyIds:_e,wrapper:e=>(0,A.jsx)(I().vV,{children:e}),customization:{disableContainerPadding:!0,disableLastRowBottomPadding:!0}})})]})}),[ye,$,U,ie,_e,Y,be,t]),ke=(0,r().K8)((()=>(0,b().Fm)(t)),[t]);return oe?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(d().s,{allowSelectionWithin:!0,children:[(0,A.jsx)(B,{onMouseEnter:W,onMouseLeave:H,headerControls:D}),Z&&ve,fe,me&&(0,A.jsx)(m().GL,{store:t})]}),xe]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{style:pe,onMouseEnter:W,onMouseLeave:H,children:(0,A.jsxs)("div",{style:{maxWidth:"100%",paddingLeft:de,width:"100%"},onClick:async e=>{if(ke){const e=await c().assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(Q)}(0,h().SQ)({event:e,context:h().y$.PageTitleClick})},children:[(0,A.jsxs)(d().s,{onFocus:ge,onBlur:he,allowSelectionWithin:!1,style:{pointerEvents:"none"},children:[re&&D,Z&&!ae&&ve,!re&&D]}),(0,A.jsx)("div",{style:{paddingRight:ue},children:ae?(0,A.jsxs)("div",{style:{display:"flex",alignItems:"flex-start"},children:[Z&&(0,A.jsx)("span",{style:ne?{zIndex:1,position:"relative"}:void 0,children:ve}),(0,A.jsx)("span",{style:ne?se:void 0,children:fe}),me&&(0,A.jsx)(m().GL,{store:t})]}):fe}),me&&(0,A.jsx)(m().GL,{store:t}),le?(0,A.jsx)(p().A,{store:le,canEdit:ce}):null]})}),xe]})}},661344:(e,t,o)=>{o.d(t,{LG:()=>g});var i=o(296540),n=()=>o(847249),s=()=>o(155004),r=()=>o(764891),a=()=>o(478726),l=()=>o(205682),c=()=>o(171018),d=()=>o(548821),u=()=>o(77238),p=o(474848);function m(e){const{state:t,store:o,disabled:i,blockPropertyValueOverlayStore:s}=e,a=(0,n().K8)((()=>o.isNonEditableState()),[o]);return(0,p.jsx)(r().A,{propertyIds:t.sectionPropertyIds,store:o,collectionStore:t.collectionStore,format:t.format,disabled:i,locked:a,blockPropertyValueOverlayStore:s})}function g(e){const{store:t,context:o,disabled:r,inlinePropertyIDs:g,wrapper:h}=e,v=(0,n().K8)((()=>t.getAssociatedCollectionStore()),[t]),S=(0,i.useMemo)((()=>new(c().YB)),[]),f=function(e){const{collectionStore:t,format:o,sectionPropertyIds:i}=e;if(!(t&&o&&i&&i.length))return{type:"hidden"};return{type:"visible",collectionStore:t,format:o,sectionPropertyIds:i}}({collectionStore:v,format:(0,n().K8)((()=>(0,a().gV)(t)),[t]),sectionPropertyIds:g});if("hidden"===f.type)return null;const y=o===d().Rr.PeekView;return h((0,p.jsx)(s().s,{allowSelectionWithin:!0,children:(0,p.jsx)(m,{topBorder:!0,state:f,store:t,disabled:r,blockPropertyValueOverlayStore:y?u().A:l().A,isInPeekRenderer:y,pagePropertiesStore:S})}))}},678834:(e,t,o)=>{o.d(t,{y:()=>S});o(296540);var i=()=>o(484714),n=()=>o(847249),s=()=>o(401497),r=()=>o(576250),a=()=>o(959013),l=()=>o(493823),c=()=>o(406699),d=()=>o(928600),u=()=>o(900967),p=()=>o(722872),m=()=>o(592968),g=()=>o(263711),h=()=>o(352759),v=o(474848);function S(e){const{pageStore:t,backlinksButtonPopupStore:o,numBacklinks:S,customization:f={}}=e,{buttonStyles:y,buttonIsGray:b,buttonIsLightGray:C}=f,_=(0,i().v3)(),{isPhone:x}=(0,i().Y0)(),k=(0,n().K8)((()=>void 0!==S?S:(0,u().J)(t,_).backlinksCount),[_,t,S],{debugName:"BacklinksControlButton.useComputedStore"}),w=(0,n().K8)((()=>g().g.getState().isOpen),[]),P=(0,s().IS)((e=>{const t=0===k&&w,o=e.text.quaternary;return{button:t?{color:o}:{},icon:t?{fill:o}:{}}}),[w,k]),M=e=>{let{buttonPopupEvents:t={}}=e;return(0,v.jsx)(l().p,{icon:e=>(0,r().y)({...e,transform:"rotate(180deg)",...P.icon}),style:{...y,...P.button},isGray:b,isLightGray:C,...t,children:(0,v.jsx)(a().sA,{id:"pageViewBlock.show.backlinks",defaultMessage:"{numberOfBacklinks, plural, =0 {No backlinks} one {{numberOfBacklinks} backlink} other {{numberOfBacklinks} backlinks}}",values:{numberOfBacklinks:k}})})};if(x){return M({buttonPopupEvents:{onClick:e=>{m().F.setState({isOpen:!0})}}})}return(0,v.jsx)(c().Ay,{buttonPopupStore:o,popupType:c().z7.Popup,renderOrigin:e=>M({buttonPopupEvents:e}),render:()=>{const e={menuType:p().gu.Popup,width:500};return(0,v.jsx)(d().A,{...e,children:k>0?(0,v.jsx)(h().p,{store:t}):null})}},"backlinkspopup")}},729380:(e,t,o)=>{o.d(t,{u:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{discussionsHeight:0}}setDiscussionsHeight(e){this.setState({...this.state,discussionsHeight:e})}resetHeights(){this.setState({discussionsHeight:0})}getTotalHeight(){return this.state.discussionsHeight}}const n=new i},729923:(e,t,o)=>{o.d(t,{p:()=>U});var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(401497),a=()=>o(155004),l=()=>o(478726),c=()=>o(835066),d=o(474848);function u(e){const{pageBlockStore:t,isVisible:i,context:r}=e,u=(0,n().v3)(),p=(0,s().K8)((()=>(0,l().Ck)(t,r,u)),[t,r,u]);return(0,d.jsx)(a().s,{allowSelectionWithin:!0,style:{width:p&&i?c().Qb:0},children:(0,d.jsx)(o(774733).UY,{...e})})}var p=()=>o(11048),m=()=>o(299772),g=()=>o(584262),h=()=>o(799954),v=()=>o(959013),S=()=>o(160568),f=()=>o(313209),y=()=>o(435009),b=()=>o(33301),C=()=>o(751156),_=()=>o(33791),x=()=>o(484792),k=()=>o(601734),w=()=>o(68465),P=()=>o(492414),M=()=>o(753199),I=()=>o(351360),A=()=>o(227440),B=()=>o(508496),T=()=>o(411671),j=()=>o(611371),L=()=>o(704152),V=(o(581454),()=>o(710149));function R(){const e=(0,r().IS)((()=>({menu:{display:"flex",alignItems:"center",marginBottom:5},icon:{marginLeft:5,width:26,height:26,marginRight:10,borderRadius:4},menuItem:{height:14,marginTop:8,marginBottom:8,width:"25%",borderRadius:8}})),[]);return(0,d.jsx)(d.Fragment,{children:[...Array(6)].map(((t,o)=>(0,d.jsxs)("div",{style:e.menu,children:[(0,d.jsx)(V().A,{style:e.icon}),(0,d.jsx)(V().A,{style:e.menuItem})]},o)))})}const D={width:"100%"};const E=function(e){let{menuListStore:t,store:l}=e;(0,o(852507).l)((()=>{t.reset()}));const c=(0,n().WS)(),u=(0,s().O$)(A().e),p=(0,s().K8)((()=>l.isPost()),[l]),m=(0,r().IS)((e=>({wrapStyle:{width:"100%",display:"flex",flexDirection:"column",marginBottom:p?void 0:"14vh"}})),[p]),g=(0,i.useCallback)((()=>!c&&(0,d.jsx)(R,{})),[c]);return(0,d.jsx)(a().s,{style:D,allowSelectionWithin:!1,children:(0,d.jsx)(o(109488).A,{capture:!0,render:e=>(0,o(569912).A)((o=>(0,d.jsxs)("div",{...e,...o,style:m.wrapStyle,children:[(0,d.jsx)(O,{store:l}),u&&(0,d.jsx)(k().t,{menuListStore:t,store:l,renderLoading:g})]})))})})};function K(e,t,o){const{mainEditorCurrentBlockStore:i}=I().default.state;!function(e,t,o){o?o(e):y().oo({environment:t,url:e})}(i?(0,P().Ay)({store:i,peekViewBlockId:e.id,fullyQualified:!1,pageVisitSource:g().y8.LinkInPage}):(0,P().Ay)({store:e,fullyQualified:!1,pageVisitSource:g().y8.LinkInPage}),t,o)}function O(e){let{store:t}=e;const o=(0,n().v3)(),a=(0,n().Y0)(),l=(0,i.useContext)(x().n),c=(0,s().K8)((()=>T().A.getMode(o,t)),[o,t]),u=(0,i.useCallback)((e=>function(e,t,o,i){const n=o.getAssociatedCollectionStore();if(n&&(0,j().EF)(t)){const{performResult:e}=C().createAndCommit({userAction:"TemplatePicker.newPage",environment:t,canUndo:!0,perform:e=>f().bI({environment:t,collectionStore:n,transaction:e})});e&&K(e,t,i),S().er(t,{collection_id:n.id})}}(0,o,t,l)),[o,t,l]),p=(0,s().K8)((()=>t.isTemplate()),[t]),m=(0,s().O$)(A().e),g=(0,s().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),y=(0,s().K8)((()=>function(e){const t=e.getAssociatedCollectionStore(),o=t?t.getTemplatePageStores():void 0;return o&&o.length>0}(t)),[t]),k=g&&!y,P=g&&y,I=(0,s().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=e&&e.getParentBlockStore();return!(0,_().v)({collectionStore:e,collectionViewBlockStore:o,checkNavigableAncestorLocked:!0})}),[t]),V=(0,s().K8)((()=>(0,w().ZE)(c)),[c]),R=(0,s().K8)((()=>t.isPost()),[t]),E=(0,r().IS)((e=>({placeholder:{...h().nE,color:e.text.tertiary,paddingTop:R?3:5,paddingBottom:R?3:24,paddingLeft:R?2:void 0,paddingRight:R?2:void 0}})),[R]),O=(0,s().K8)((()=>a.isMobile&&!a.isTablet&&a.isIOS&&"on"===B().default.getEligibleGroup({experimentId:"mobile_lightweight_editor_prompt",defaultGroup:"control"})),[a.isMobile,a.isIOS,a.isTablet]);let F=null;return m?p?F=(0,d.jsx)(v().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page.} other {Press Enter to continue with an empty page.}}",id:"templatePicker.isTemplate.emptyPagePrompt",values:{isMobileDevice:a.isMobile}}):a.isMobile?P?F=a.isTablet?(0,d.jsx)(v().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(v().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"}):k?F=(0,d.jsx)(v().sA,{defaultMessage:"{isParentLocked, select, true {Tap here to continue with an empty page} other {Tap here to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.mobileCollectionEmptyPage.prompt",values:{isParentLocked:I,templatebutton:e=>(0,d.jsx)(L().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):O||(F=a.isTablet?(0,d.jsx)(v().sA,{defaultMessage:"Tap here to continue with an empty page, or pick a template",id:"templatePicker.mobileTabletEmptyPage.withTemplates.prompt"}):(0,d.jsx)(v().sA,{defaultMessage:"Tap here to continue...",id:"templatePicker.mobilePhoneEmptyPage.withTemplates.prompt"})):k?F=(0,d.jsx)(v().sA,{defaultMessage:"{isParentLocked, select, true {Press Enter to continue with an empty page} other {Press Enter to continue with an empty page, or <templatebutton>create a template</templatebutton>}}",id:"templatePicker.webCollectionEmptyPage.prompt",values:{isParentLocked:I,templatebutton:e=>(0,d.jsx)(L().A,{style:{display:"inline-block",textDecoration:"underline"},onClick:u,children:e})}}):V&&!g||(F=(0,d.jsx)(v().sA,{defaultMessage:"Press Enter to continue with an empty page, or pick a template (↑↓ to select)",id:"templatePicker.webEmptyPage.withTemplates.prompt"})):F=(0,d.jsx)(v().sA,{defaultMessage:"{isMobileDevice, select, true {Tap here to continue with an empty page. Please go online to use templates.} other {Press Enter to continue with an empty page. Please go online to use templates.}}",id:"templatePicker.deviceOffline.goOnlinePrompt",values:{isMobileDevice:a.isMobile}}),F?(0,d.jsx)("div",{style:D,children:(0,d.jsx)("div",{style:E.placeholder,onClick:e=>function(e,t,o){(0,M().SQ)({event:e,context:M().y$.EditorClick,callback:()=>{(0,j().EF)(o)&&(C().createAndCommit({userAction:"TemplatePicker.handleEmptyPageContinueClick",environment:o,canUndo:!0,perform:e=>{b().n({environment:o,store:t,transaction:e})}}),S().ki(o,{is_keyboard:!1,from:"template_picker",template_type:"empty_page"}))}})}(e,t,o),children:F})}):null}var F=()=>o(622237),z=()=>o(548821),W=()=>o(712505),H=()=>o(551619),N=()=>o(817942);const G=(0,i.forwardRef)((function(e,t){let{context:a,disabled:c,onClick:u,store:g,templatePickerMenuListStore:h,testPlaceholder:v}=e;const S=(0,n().v3)(),{device:f}=S,y=(0,H().Hy)(g),b=(0,o(877051).V)(),C=function(e,t){const o=(0,H().O9)(e,t),i=(0,H().Rg)(e,t);if(o)return"horizontal";if(i)return"legacy";return"none"}(g,a),_=(0,H().f7)(g),x=(0,H().Sm)(g),w=(0,s().K8)((()=>!!c||(!!g.isNonEditableState()||!!x)),[g,c,x]),P=(0,s().K8)((()=>g.getFormat()),[g]),M=(0,s().K8)((()=>(0,l().In)(g)),[g]),I=(0,l().L5)(a),A=(0,s().K8)((()=>g.isPost()),[g]),B=(0,o(891078).bx)(g,c),T=(0,n().WS)(),j=(0,s().K8)((()=>g.isCollectionView()),[g]),L=(0,s().K8)((()=>Boolean(g.getCover())),[g]),V=(0,s().K8)((()=>{const e=(0,o(747100).cq)(g)&&!W().default.isSidePeekOpen()&&!W().default.isSidePeekClosingStore.state?`100vh - ${W().PeekModeOuterPadding}px*2`:"100vh",t=(0,o(175947).ek)(S.device.isElectronMac),i=o(729380).u.getTotalHeight();return`calc(${e} - ${t}px - 66px - 48px - 140px + ${i<250?0:i}px)`}),[S.device.isElectronMac,g]),R=(0,r().IS)((()=>{const e=P.page_font||m().zs,t=m().DX[e],i=m().JK[e]||1.5;let n;if(f.isMobile)n=f.isAndroid?m().By:m().y_;else if(a===z().Rr.DraftPostInInlineComposer)n=14;else{n=P.page_small_text?m().Y4[e]||m().dp:m().T1[e]||m().uD}let s={},r=a===z().Rr.Presentation?{}:{paddingTop:8};const c=(0,l().L5)(a);if(!(M&&c&&"none"===C&&!y)){if(M){const e=29;r={...r,paddingBottom:a===z().Rr.DraftPostInInlineComposer?e:A?0:"15vh"}}else r={...r,paddingBottom:0};s={...r,paddingLeft:0,paddingRight:0}}let d={};c&&!A&&(d={minHeight:240,zIndex:1});let u={};a===z().Rr.InAppTemplatePreview&&(u={margin:"0 auto"});let p={};if(T&&!j&&B&&!L){const e=132,t=(0,m().nu)(a,S);p={minHeight:`calc(100vh - ${o(628182).s1+e-t}px)`}}return{content:{flexShrink:0,flexGrow:1,maxWidth:"100%",display:"flex",alignItems:"flex-start",flexDirection:"column",fontFamily:m().AP[e],fontSize:n,letterSpacing:t?`${t}em`:void 0,lineHeight:i,width:"100%",zIndex:4,...s,...d,...u,...p},emptyDroppableStyle:{width:"100%"},templatePicker:{position:"absolute",top:V,width:"100%",pointerEvents:"none"}}}),[L,j,T,M,B,a,f.isAndroid,f.isMobile,S,P.page_font,P.page_small_text,y,C,V,A]),[D,K]=function(e,t){const n=(0,i.useRef)(null),r=(0,o(93583).A)(n,e),a=(0,o(828634).wY)(n),l=(0,i.useCallback)((e=>{F().A.setWidth(e.width,t)}),[t]);(0,i.useEffect)((()=>{a&&l(a)}),[l,a]);const c=(0,s().K8)((()=>F().A.getWidth(t)),[t]);return[r,c]}(t,I);return(0,d.jsxs)(p().A,{name:"PageEditor",children:[(0,d.jsxs)("div",{className:o(38337).pXT,onClick:u,style:R.content,ref:D,children:[!_&&(0,d.jsx)(o(493733).A,{store:g.getContentStore(),emptyDroppableStyle:R.emptyDroppableStyle,disabled:w,placeholder:v}),y&&(0,d.jsx)(o(331542).A,{}),h&&"legacy"===C&&(0,d.jsx)(E,{store:g,menuListStore:h})]}),"horizontal"===C&&!b&&(0,d.jsx)("div",{style:R.templatePicker,children:(0,d.jsx)(k().Nv,{store:g,context:a,menuListStore:h,editorWidth:K})})]})}));const U=(0,i.forwardRef)((function(e,t){const{context:r,disabled:a,handlePlaceholderWrapClick:m,pageBlockStore:g,pathToBlockId:h,templatePickerMenuListStore:v,pageViewBlockAccessor:S,editorWrapper:f}=e,y=(0,n().v3)(),b=(0,s().K8)((()=>h?(0,o(21140).Dk)({environment:y,pageBlockStore:g,pathToBlockId:h}):g),[y,g,h]),C=(0,s().K8)((()=>(0,c().dC)(y,g)),[y,g]),_=(0,s().K8)((()=>(0,l().In)(g)),[g]),x=(0,s().K8)((()=>(0,o(337567).Fm)(g)),[g]),k=r===z().Rr.DraftPostInInlineComposer,w=y.device.isMobile||k?0:5,P=(0,s().K8)((()=>o(610640).A.state.isHovered),[]),M=f||(e=>(0,d.jsx)(N().vV,{style:{...k?{minHeight:void 0,pointerEvents:"auto"}:{minHeight:170},paddingTop:w},children:e})),I=(0,i.useMemo)((()=>x?async()=>{const e=await o(650829).assistantDependency.load();await e.assistantEditActions.saveAssistantCreatedPage(y)}:_?m:void 0),[m,_,x,y]);return(0,d.jsxs)(p().A,{name:"PageEditorModule",children:[M((0,d.jsx)(G,{store:b,disabled:a,context:r,templatePickerMenuListStore:v,onClick:I,ref:t})),C&&S?(0,d.jsx)(N().kZ,{children:(0,d.jsx)(u,{pageBlockStore:g,isVisible:!P,context:r,pageViewBlockAccessor:S,isCollapsedAnchor:!0})}):null]})}))},736316:(e,t,o)=>{o.d(t,{f:()=>n});var i=()=>o(449412);function n(e){const{name:t,startTime:o,endTime:n}=e;try{performance.measure(t,{start:o,end:n})}catch(s){i().Fg(s,{extra:{name:t,startTime:o,endTime:n}})}}},764891:(e,t,o)=>{o.d(t,{A:()=>m});o(898992),o(354520),o(672577),o(581454);var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(496603),a=()=>o(896628),l=()=>o(751156),c=()=>o(9768),d=()=>o(439264),u=o(474848);function p(e){const{store:t,collectionStore:i,disabled:c,locked:p,propertyIds:m,blockPropertyValueOverlayStore:h,format:v,type:S}=e,f=(0,n().v3)(),y=(0,o(175116).Ks)(),b=(0,s().K8)((()=>null==y?void 0:y.permissionScopesStore.state),[y]);return y?"minimal"===S?(0,u.jsx)(u.Fragment,{children:m.map(((e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e)))}):c||p||null==b||!b.canConfigureCollection?(0,u.jsx)("div",{style:d().Bb,children:m.map(((e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e)))}):(0,u.jsx)(d().Ay,{direction:"vertical",keys:m,renderKey:(e,o)=>(0,u.jsx)(g,{format:v,locked:p,collectionStore:i,store:t,disabled:c,blockPropertyValueOverlayStore:h,propertyId:e,visibility:S,isLast:o===m.length-1},e),onDrop:e=>function(e,t,o,i){const n=o.collection_page_sections||[],s=r().oE(e.map((e=>n.find((t=>t.section===e))))),c=n.filter((t=>!e.includes(t.section))),d=[...s,...c];l().createAndCommit({userAction:"RelationPropertyPageSections.handleReorder",environment:i,canUndo:!0,perform:e=>{a().zA({stores:[t],update:{collection_page_sections:d},transaction:e})}})}(e,i,v,f)}):null}const m=i.memo(p,o(821062).A),g=i.memo((function(e){let t,{propertyId:i,format:r,locked:a,collectionStore:l,store:d,disabled:p,blockPropertyValueOverlayStore:m,visibility:g,isLast:h}=e;if(g)t=g;else{const e=r.collection_page_sections??[];t=e.filter((e=>e.section===i)).map((e=>e.visibility))[0]}const v=(0,n().Y0)(),[S,f]=(0,o(997583).z)(),y=(0,o(255824).a)(),b="inline"===t,C=!h&&"minimal"!==t,_=(0,s().K8)((()=>d.canEdit()),[d]),x=(0,o(401497).IS)((()=>{const e={position:"absolute",visibility:f?"visible":"hidden",left:f?f+4:void 0,top:0};return{discussionIndicator:v.isMobile?{flexShrink:0}:b?e:{},wrapperDiv:{position:"relative",width:"minimal"!==t?"100%":void 0,...C?{marginBottom:c().YE+c().Lb+(_?-4:0)}:{}},selectable:b?{}:{display:"flex",alignItems:"center"}}}),[f,v.isMobile,C,b,t,_]),k=(0,u.jsx)(o(774733).L_,{store:d,propertyId:i,style:x.discussionIndicator});return(0,u.jsx)("div",{className:"minimal"!==t?"layout-content":void 0,style:x.wrapperDiv,ref:S,children:(0,u.jsxs)(o(199896).A,{store:d,analyticsName:"page_property",style:x.selectable,children:[(0,u.jsx)(o(29247).m,{store:d,property:i,disabled:p,locked:a,format:o(41459).j.PropertyModule,tableWrap:!1,blockPropertyValueOverlayStore:m,collectionStore:l,propertyVisibility:t},i),y?null:k]})})}))},766081:(e,t,o)=>{o.d(t,{A:()=>g,R:()=>m});o(296540);var i=()=>o(484714),n=()=>o(847249),s=()=>o(401497),r=()=>o(868840),a=()=>o(175947),l=()=>o(959013),c=()=>o(710149),d=()=>o(299772),u=()=>o(62856),p=o(474848);function m(e){let{store:t,peekMode:o,forceShowIcon:a}=e;const l=(0,i().v3)(),{isMobile:u}=l.device,m=(0,n().K8)((()=>Boolean(t.getCover())),[t]),g=(0,n().K8)((()=>Boolean(t.getIcon())),[t])||a,h=(0,n().K8)((()=>t.isCollectionView()),[t]),v=(0,n().K8)((()=>t.isFullWidth()),[t]),S=(0,n().K8)((()=>o===r().O?"20vh":(0,d().Qs)(l)),[l,o]),f=(0,s().IS)((()=>{const e=u?24:o===r().A?48:96,t=(()=>{switch(!0){case u:return 32;case g:return 96;case o===r().O&&!g:return 54;case!g:return 102}})(),i=(()=>{switch(!0){case u&&m&&g:return 22;case u&&m&&!g:return 54;case u&&!m&&g:return 56;case u&&!m&&!g:return 4;case!u&&m&&g:return 50;case!u&&m&&!g:return 58;case!u&&!m&&g:return 92;case!u&&!m&&!g:return 20}})();return{collectionCoverPhoto:{width:"100%",height:"20vh"},collectionTitleContainer:{display:"flex",alignItems:"center",paddingLeft:e,paddingRight:e,width:"100%",paddingTop:(()=>{switch(!0){case u&&m:return 50;case u&&!m:return 78;case!u&&m:return 48;case!u&&!m:return 36}})()},collectionIcon:{flexGrow:0,flexShrink:0,width:36,height:36,borderRadius:6,marginRight:10,marginLeft:3},collectionTitle:{height:u?24:30,width:600,marginTop:u?6:3,borderRadius:15},pageCoverPhoto:{width:"100%",height:S},pageCoverPadding:{width:"100%",height:t},pageIconContainer:{maxWidth:"100%",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:v?"100%":900,height:36},pageIcon:{position:"relative",top:m?-42:0,width:78,height:78,marginLeft:2,borderRadius:16},pageTitleContainer:{display:"flex",boxSizing:"border-box",paddingLeft:e,paddingRight:e,width:v?"100%":900,maxWidth:"100%",paddingTop:i},pageTitle:{marginTop:u?3:0,height:u?24:30,width:600,borderRadius:15}}}),[v,m,g,S,u,o]);return h||o===r().A?(0,p.jsxs)(p.Fragment,{children:[m&&(0,p.jsx)(c().A,{style:f.collectionCoverPhoto}),(0,p.jsxs)("div",{style:f.collectionTitleContainer,children:[g&&(0,p.jsx)(c().A,{emphasized:!0,style:f.collectionIcon}),(0,p.jsx)(c().A,{style:f.collectionTitle})]})]}):(0,p.jsxs)(p.Fragment,{children:[m?(0,p.jsx)(c().A,{style:f.pageCoverPhoto}):(0,p.jsx)("div",{style:f.pageCoverPadding}),g&&(0,p.jsx)("div",{style:f.pageIconContainer,children:(0,p.jsx)(c().A,{emphasized:!0,style:f.pageIcon})}),(0,p.jsx)("div",{style:f.pageTitleContainer,children:(0,p.jsx)(c().A,{style:f.pageTitle})})]})}function g(e){let{isVisible:t,peekMode:o,store:c}=e;const{WindowSizeStore:d}=(0,i().v3)(),g=(0,i().Y0)(),h=(0,l().tz)(),v=g.isPhone,S=g.isMobileNative,f=a().ek(g.isElectronMac),y=(0,n().K8)((()=>{const e=o===r().O||o===r().A||v?f:0;return{top:d.getSafePaddingTopCSS(e),bottom:d.getSafePaddingBottomCSS(0),left:d.getSafePaddingLeftCSS(0),right:d.getSafePaddingRightCSS(0)}}),[d,o,v,f]),b=(0,s().IS)((()=>({root:{position:"absolute",...y,display:"flex",flexDirection:"column",alignItems:"center",pointerEvents:"none"}})),[y]);return(0,u().A)(t,S?0:10,0)?(0,p.jsx)("div",{role:"progressbar","aria-valuetext":h.formatMessage({id:"frameLoadingState.loading",defaultMessage:"Loading..."}),style:b.root,children:(0,p.jsx)(m,{store:c,peekMode:o})},"shimmer"):null}},790324:(e,t,o)=>{o.d(t,{A:()=>d});var i=o(296540),n=()=>o(484714),s=()=>o(642054),r=()=>o(896628),a=()=>o(751156),l=()=>o(493823),c=o(474848);function d(e){const{store:t,afterOnClick:o,style:d,label:u}=e,p=(0,n().v3)(),m=(0,i.useCallback)((()=>{a().createAndCommit({userAction:"PageAddIconButton.handleAddRandomIconClick",environment:p,canUndo:!0,perform:e=>{r().vc({store:t,transaction:e})}}),o()}),[p,o,t]);return(0,c.jsx)(l().p,{style:d,isLightGray:!0,onClick:m,icon:s().A,children:u},"add-icon")}},823082:(e,t,o)=>{o.d(t,{H:()=>s});var i=()=>o(778781),n=()=>o(534177);function s(e){const t=e.type;return"properties"===t?"module__properties_"+("pinned"===e.variant?"minimal":"expanded"):"normalizedTitleWithIcon"===t||"titleWithIcon"===t?"module__title_with_icon":"cover"===t?"cover__module":"views"===t?"module__views":"editor"===t?"module__editor":"formTitle"===t?"module__formTitle":"viewsMain"===t?"module__views_main":"transcript"===t?"module__transcript":"formSubmit"===t?"module__form_submit":"discussions"===t?"module__discussion":"placeholder"===t?"module__placeholder":"formQuestion"===t?"module__formQuestion":"bottomControls"===t?"module__bottomControls":"relationsGroup"===t?"module__relationsGroup":"deleted_property"===t?"module__deleted_property":"expandedBacklinks"===t?"module__expandedBacklinks":"inlinePageSections"===t?"module__inlinePageSections":"property"===t?`module__property_${e.id}`:"collectionView"===t?"module__collectionView":"collectionViewV2"===t?"module__collectionViewV2":(0,i().CA)(t)?`module__property_${e.id}`:void(0,n().HB)(t)}},864260:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:o}=this.state;t?o[e]=t:delete o[e],this.emit()}}const n=new i},892008:(e,t,o)=>{o.d(t,{Bs:()=>d,L:()=>c,Ob:()=>l});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949);var i=o(296540),n=()=>o(852507),s=()=>o(118884),r=()=>o(994310),a=()=>o(347320);const l=new class{constructor(){this.currentPageId=void 0,this._localStorage=void 0}startCachingViewIds(e){this.currentPageId=e;this.entryForPage(e).v=[]}stopCachingViewIds(){const e=this.currentPageId;if(this.currentPageId=void 0,e){0===this.entryForPage(e).v.length&&delete this.localStorage[e]}}registerView(e,t){if(this.currentPageId!==e)return;const o=this.entryForPage(e);o.v=[...new Set([...o.v,t])],o.t=Date.now(),this.writeToLocalStorage()}unregisterView(e,t){const o=this.localStorage[e];o&&(o.v=o.v.filter((e=>e!==t)),0===o.v.length&&delete this.localStorage[e],this.writeToLocalStorage())}lookupViewIds(e){const t=this.localStorage[e];return(null==t?void 0:t.v)??[]}clear(){this.currentPageId=void 0,this._localStorage=void 0}get localStorage(){return this._localStorage??(this._localStorage=r().A.get(a().O)||Object.create(null))}entryForPage(e){let t=this.localStorage[e];return t||(t={v:[],t:0},this.localStorage[e]=t),t}writeToLocalStorage(){this.limitLocalStorageSize(),r().A.set(a().O,this.localStorage)}limitLocalStorageSize(){const e=Object.keys(this.localStorage);if(e.length>=100){const t={timestamp:Number.MAX_SAFE_INTEGER,key:void 0};e.forEach((e=>{e!==this.currentPageId&&this.localStorage[e].t<t.timestamp&&(t.timestamp=this.localStorage[e].t,t.key=e)})),t.key&&delete this.localStorage[t.key]}}};function c(e){let{collectionContextStore:t,isFullScreen:o,wasCreatedThisSessionStore:n,didDelayOffscreenRenderRef:s,environment:r}=e;const a=(0,i.useCallback)((()=>{var e;const o=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,i=r.RouterStore.state.route;if("page"!==i.name)return;const n=i.blockId;n&&o&&(s.current?(l.unregisterView(n,o),t.shouldDelayRenderStore.removeListener(a)):l.registerView(n,o))}),[t,s,r]);(0,i.useEffect)((()=>{var e;if(o||n.state)return;const i=null===(e=t.collectionViewStore())||void 0===e?void 0:e.id,s=r.RouterStore.state.route;if("page"!==s.name)return;return s.blockId&&i?(t.shouldDelayRenderStore.addListener(a),a(),()=>{t.shouldDelayRenderStore.removeListener(a)}):void 0}),[t,o,n,r,a])}function d(e){let{pageId:t,isFrameContext:o}=e;(0,n().l)((()=>{o&&l.startCachingViewIds(t)})),(0,s().X)((()=>{o&&l.stopCachingViewIds()}))}},915086:(e,t,o)=>{o.r(t),o.d(t,{measurePageRenderMetrics:()=>x,setInitialRenderCompleted:()=>C,setSubMetric:()=>f,setSubMetricsAtRenderCallback:()=>S,updateMetricData:()=>y,updateMetricDataWithIsPushTag:()=>_,updateOPFSMetricData:()=>b});o(898992),o(581454),o(737550),o(814603),o(147566),o(198721);var i=()=>o(906510),n=()=>o(410690),s=()=>o(892008),r=()=>o(989423),a=()=>o(571963),l=()=>o(347320),c=()=>o(150749),d=()=>o(836251),u=()=>o(406792),p=()=>o(736316),m=()=>o(508496),g=()=>o(961581),h=()=>o(977390),v=()=>o(606932);function S(e){const{mainStartTime:t,prefetchInitiatedTime:o,statsigBootupBlockingStartTime:i,renderStartTime:s,renderEndTime:r}=e,a=n().getAppStartTime();if(!a)return;const l={app_start_to_main_start:{startTime:a,endTime:t},main_start_to_prefetch_initiated:{startTime:t,endTime:o},prefetch_initiated_to_statsig_bootup_blocking_start:{startTime:o,endTime:i},statsig_bootup_blocking:{startTime:i,endTime:s},render_start_to_render_end:{startTime:s,endTime:r}};for(const[n,c]of Object.entries(l)){const e=null==c?void 0:c.startTime,t=null==c?void 0:c.endTime;e&&t&&(0,p().f)({name:n,startTime:e,endTime:t})}g().A.state.subMetricsStore.update((e=>({...e,...l})))}function f(e){const{name:t,endTime:o}=e,i=e.startTime(g().A.state.subMetricsStore.state);i&&(g().A.state.subMetricsStore.update((e=>({...e,[t]:{startTime:i,endTime:o}}))),(0,p().f)({name:t,startTime:i,endTime:o}))}function y(e){g().A.state.metricDataStore.update((t=>({...t,...e})))}function b(e){g().A.state.OPFSMetricDataStore.update((t=>({...t,...e})))}function C(){g().A.update((e=>({...e,initialRenderCompleted:!0})))}function _(e){const t=e.RouterStore.state;let o;var i;"page"===t.route.name&&(o=t.route.mobileData,y({is_push:null===(i=o)||void 0===i?void 0:i.isPush}))}function x(e){let{environment:t,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,idSchema:p}=e;const{initialRoute:{name:S},route:y}=t.RouterStore.state,{initialRenderCompleted:b,initialRenderAfterLoginCompleted:_}=g().A.state,x=a().isPrewarmedTabInitialRender(t),P=(0,d().w6)(t);b?_||"login"!==S?function(e,t){const o="page"===t.name?t.mobileData:void 0,i=v().A.popTimings();if(i){const{navigationStart:t,requestFirstChunkStart:n,requestFirstChunkEnd:s,requestFirstChunkSource:a,requestFirstChunkLocalSource:l,pageViewBlockRender:c,nativeToWebRenderStart:d,nativeToWebRenderParams:p}=i,m=performance.now();if(u().default.measure({metricName:"navigation_page_render",startTime:t,endTime:m},{environment:e,data:{is_push:(null==o?void 0:o.isPush)??!1,wasm_sqlite_initialized:g().A.state.metricDataStore.state.wasm_sqlite_initialized}}),d){const t=Date.now();u().default.measure({metricName:"native_to_web_render",startTime:d,endTime:t},{environment:e,data:{...p??{}}})}(0,r().LM)({eventName:"navigation_page_render_sub_metric",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((o=>{if(!o)return;const i=t=>({environment:e,data:{type:t,chunk_source:a,local_source:l},sampleDecision:o});n&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:t,endTime:n},i("navigation_start_to_request_first_chunk_start")),n&&s&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:n,endTime:s},i("request_first_chunk_start_to_request_first_chunk_end")),s&&c&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:s,endTime:c},i("request_first_chunk_end_to_pvb_render")),c&&u().default.measure({metricName:"navigation_page_render_sub_metric",startTime:c,endTime:m},i("pvb_render_to_handle_navigation_render"))}))}h().A.state.isMeasuring&&h().A.update((e=>({...e,isMeasuring:!1})))}(t,y):function(e){u().default.DO_NOT_USE_measureLegacy("initial_page_render_after_login",{environment:e}),g().A.update((e=>({...e,initialRenderAfterLoginCompleted:!0})))}(t):x?function(e){let{environment:t,initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:a,idSchema:l}=e;C();const c=performance.now();f({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:c});const d=g().A.state.prewarmedTabAppStartTimeOverride;d&&u().default.measure({metricName:"initial_page_render",startTime:d,endTime:c},{environment:t,data:k({initialRoute:o,isEditable:i,isHomePage:n,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:a,idSchema:l,isPrewarmedTab:!0,prewarmedTabNavigationStart:d}),shouldSendIfStatsigNotInitialized:!0});h().A.state.isMeasuring&&h().A.update((e=>({...e,isMeasuring:!1})))}({environment:t,initialRoute:S,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:P,idSchema:p}):function(e){var t;let{environment:o,initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:p,idSchema:h}=e;const{initialLoadCachedPageChunkCalledAt:v}=g().A.state;C();const S=Boolean(null===(t=performance)||void 0===t?void 0:t.mark)?performance.mark("initial_page_render").startTime:performance.now();i().S3.mark("initial_page_render"),f({name:"await_page_chunk_end_to_browser_repaint_start",startTime:e=>{var t;return null===(t=e.await_page_chunk_start_to_await_page_chunk_end)||void 0===t?void 0:t.endTime},endTime:S});const y=n().getAppStartTime(),b=n().getPageOriginTime();y&&b&&b>0&&y>b&&f({name:"page_origin_to_app_start",startTime:()=>b,endTime:y});u().default.measureFromPageOrigin({metricName:"initial_page_render",endTime:S},{environment:o,data:k({initialRoute:s,isEditable:a,isHomePage:l,isWikiHome:c,isPageWithCustomLayout:d,isPublicDomain:p,idSchema:h,prefetchedQueryCollection:w(o),isPrewarmedTab:!1}),shouldSendIfStatsigNotInitialized:!0});g().A.state.subMetricsStore.state;void 0!==v&&u().default.DO_NOT_USE_measureFromPageOriginLegacy({metricName:"load_cached_page_chunk_wait_time",endTime:v},{environment:o,data:{initial_route:s},shouldSendIfStatsigNotInitialized:!0,sendToStatsig:!0});m().default.checkGate({gateName:"beacon_pre_ipr_assets"})&&function(e,t){var o;if(null===(o=performance)||void 0===o||!o.getEntriesByType)return;const i=performance.getEntriesByType("resource"),n={eventName:"pre_ipr_assets",eventProperties:{ipr_end:t,assets:i.map((e=>{let t;try{t=new URL(e.name).pathname}catch{t=e.name}return{url:t,initiator_type:e.initiatorType,time:e.duration,perf_start:e.startTime,perf_end:e.startTime+e.duration,decoded_body_size:e.decodedBodySize,transfer_size:e.transferSize}}))}};(0,r().u4)({environment:e,event:n})}(o,S)}({environment:t,initialRoute:S,isEditable:o,isHomePage:s,isWikiHome:l,isPageWithCustomLayout:c,isPublicDomain:P,idSchema:p})}function k(e){const{initialRoute:t,isEditable:o,isHomePage:i,isWikiHome:s,isPageWithCustomLayout:r,isPublicDomain:l,isPrewarmedTab:d,idSchema:u,prefetchedQueryCollection:p}=e;return{...a().getSubMetricsAndMetricDataForTracking(e.isPrewarmedTab?{isPrewarmedTab:!0,prewarmedTabNavigationStart:e.prewarmedTabNavigationStart}:{isPrewarmedTab:!1}),initial_route:t,is_editable:o,is_home_page:i,is_page_with_custom_layout:r,is_public_domain:l,profiling_tool:(0,c().getProfilingToolForSession)(),is_wiki_home:s,time_origin_to_app_start:n().getAppStartTime(),includes_page_origin_to_app_start:!0,id_schema:u,prefetched_cvb:p,is_prewarmed_tab:d,desktop_load_origin:a().getDesktopLoadOrigin(d)}}function w(e){const t=e.RouterStore.state.route;if("page"!==t.name||!t.blockId)return!1;return s().Ob.lookupViewIds(t.blockId).some((t=>{var o;const i=(0,l().A)(t),n=null===(o=e.prefetchCache)||void 0===o?void 0:o.getPrefetchAnalytic(i);return"hit-match"===(null==n?void 0:n.type)||"attempted"===(null==n?void 0:n.type)||"hit-mismatch"===(null==n?void 0:n.type)}))}},918487:(e,t,o)=>{o.d(t,{v:()=>n});o(898992),o(354520),o(672577),o(737550);var i=()=>o(517223);function n(e){const{collectionStore:t,module:o,isMobile:n}=e;if("normalizedTitleWithIcon"!==o.type)return!1;const s=t.getSchema(),r=!!s&&(0,i().LD)({collectionSchema:s,module:o}).length>0,a=(0,i().pm)({collectionStore:t}).count>0;return!(!n||!a)||!r&&a}},933951:(e,t,o)=>{o.d(t,{Qf:()=>S,sS:()=>h,ub:()=>v});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(737550);var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(455348),a=()=>o(691678),l=()=>o(235692),c=()=>o(778781),d=()=>o(33791),u=()=>o(577814),p=()=>o(299772),m=()=>o(548821),g=()=>o(9768);function h(e){const{pageStore:t,pageViewBlockStore:o,postContext:r,collectionStore:l,collectionSchema:p}=e,{collectionStore:m,collectionFormat:h,collectionSchema:S,canConfigureCollection:f}=(0,s().K8)((()=>{const e=l||(null==t?void 0:t.getAssociatedCollectionStore()),o=p||(null==e?void 0:e.getSchema()),i=null==e?void 0:e.getFormat(),n=e&&(0,d().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1});return{collectionStore:e,collectionSchema:o,collectionFormat:i,canConfigureCollection:n}}),[t,l,p]),y=(0,n().v3)(),b=(0,s().K8)((()=>(0,u().A)({environment:y,store:t,pageViewBlockStore:o})),[y,t,o]),C=v({collectionFormat:h,collectionSchema:S,layoutStore:(0,s().K8)((()=>null==m?void 0:m.getLayoutStore()),[m]),postContext:r,pageStoreId:null==t?void 0:t.id,pageStore:t}),_=(0,s().K8)((()=>{const e=C.page_main.some((e=>(0,c().i_)(e)))||C.page_details.some((e=>(0,c().i_)(e)));return!(!m||!e)&&(0,g().cu)({modulesByArea:C,collectionStore:m})}),[C,m]),x=(0,i.useMemo)((()=>{const e=new Set;return(!Boolean(m)||!f&&_)&&e.add("properties"),"hidden"===(null==b?void 0:b.type)&&e.add("discussions"),e}),[f,m,null==b?void 0:b.type,_]);return(0,i.useMemo)((()=>0===x.size?C:(0,a().KO)(C,(e=>!x.has(e.type)))),[C,x])}function v(e){const{layoutStore:t,collectionSchema:o,collectionFormat:n,postContext:a,pageStoreId:c,pageStore:d}=e,u=(0,i.useRef)(c),g=(0,i.useRef)(null);return(0,s().K8)((()=>{var e;if(a===m().Rr.DraftPostInInlineComposer)return l().wC;if(null!=d&&d.isPersonProfile())return l().Vp;if((0,p().Mi)(a)){const e=(0,r().aG)(o,"created_time"),t=(0,r().aG)(o,"created_by"),i=[];t&&i.push(t),e&&i.push(e);return{...l()._u,page_main:[{...l()._u.page_main[0],propertyIds:i},...l()._u.page_main.slice(1)]}}let i=null==t?void 0:t.getModules();const s=c&&i&&c===u.current&&0===i.page_main.length&&(null===(e=g.current)||void 0===e?void 0:e.page_main.find((e=>"editor"===e.type)));return i&&!s||(i=(0,l().xN)({collectionSchema:o,collectionFormat:n})),u.current=c,g.current=i,i}),[t,c,o,n,a,d])}function S(e){const{personProfileStore:t}=e;return(0,s().K8)((()=>{const e=null==t?void 0:t.getAssociatedCollectionStore();if(!e)return l().Vp;const o=e.getLayoutStore();if(!o)return l().Vp;const i=o.getModules();return!i||0===i.person_profile_page_main.length&&0===i.person_profile_page_details.length?l().Vp:i}),[t])}},941112:(e,t,o)=>{o.d(t,{E:()=>c});o(296540);var i=()=>o(401497),n=o(474848);const s={viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M4.825 3.3c-.842 0-1.525.683-1.525 1.525v10.35c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525V4.825c0-.842-.683-1.525-1.525-1.525zm7.2 0c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525zm0 7.2c-.842 0-1.525.683-1.525 1.525v3.15c0 .842.683 1.525 1.525 1.525h3.15c.842 0 1.525-.683 1.525-1.525v-3.15c0-.842-.683-1.525-1.525-1.525z"})},r=(0,o(340498).wt)("layoutFill",s);var a=()=>o(959013),l=()=>o(493823);function c(e){const{style:t,onClick:o}=e,s=(0,i().IS)((()=>({buttonIcon:{width:18,height:18}})),[]);return(0,n.jsx)(l().p,{style:t,iconStyle:s.buttonIcon,isLightGray:!0,onClick:o,icon:r,children:(0,n.jsx)(a().sA,{id:"pageViewBlock.customizeLayout",defaultMessage:"Customize layout"})},"customize-layout")}},973454:(e,t,o)=>{o.d(t,{p:()=>l,A:()=>c});var i=o(296540),n=()=>o(615234);const s=24*n().pT;function r(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=s?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-s}}function l(e){const[t,o]=(0,i.useState)((()=>r(e)));return(0,i.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function i(){t=void 0;const{status:n,nextUpdateInMs:s}=a(e);o(n),s&&(t=setTimeout(i,s))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function c(e){const[t,o]=(0,i.useState)((()=>Date.now())),s=(null==e?void 0:e.enabled)&&e.start_ts;return(0,i.useEffect)((()=>{if("number"!=typeof s)return;const e=s;let t;return function i(){const s=Date.now();o(s);const r=e*n().TD-s;if(r>0){const e=r%n().Xb,o=0===e?n().Xb:e;t=setTimeout(i,o)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[s]),{freezeStatus:r(e),minUntilFreeze:s?Math.floor((s*n().TD-t)/n().Xb):void 0}}},996262:(e,t,o)=>{o.d(t,{z:()=>b});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(847249),s=()=>o(401497),r=()=>o(487929),a=()=>o(713998),l=()=>o(651124),c=()=>o(390066),d=()=>o(959013),u=()=>o(155004),p=()=>o(21140),m=()=>o(764891),g=()=>o(205682),h=()=>o(548821),v=()=>o(77238),S=()=>o(9768),f=()=>o(720501),y=o(474848);function b(e){const{pageStore:t,disabled:o,context:b,wrapper:C,showDefaultTitle:_}=e,x=b===h().Rr.PeekView,{isPageLocked:k}=(0,n().K8)((()=>({isPageLocked:t.isNonEditableState()})),[t]),{collectionStore:w,collectionSchema:P,normalizedCollectionFormat:M}=(0,n().K8)((()=>{const e=t.getAssociatedCollectionStore(),o=null==e?void 0:e.getSchema(),i=null==e?void 0:e.getFormat();return{collectionStore:e,collectionSchema:o,normalizedCollectionFormat:i&&o&&(0,c().L)(i,o,void 0,l().jf.Collection)}}),[t]),I=(0,i.useCallback)((e=>{const o=null==P?void 0:P[e];if("relation"!==(null==o?void 0:o.type))return!1;const i=t.getPropertyValue(e);return 0===(0,a().bG)({relationValue:(0,a().n)(i),propertySchema:o,getRecordModel:t.getRecordModel,includeNoAccess:!0}).length}),[P,t]),A=(0,n().K8)((()=>{if(!P||!M)return[];return(0,r().u)({format:M,schema:P,visibilityLevels:["inline"]}).filter((e=>!I(e)))}),[P,I,M]),B=(0,n().K8)((()=>{if(!P||!M)return[];return(0,r().T)({format:M,schema:P,visibilityLevels:["minimal","inline"]}).filter((e=>"minimal"===e.visibility||!("inline"!==e.visibility||!I(e.section)))).map((e=>e.section))}),[P,I,M]),T=(0,n().K8)((()=>t.canEdit()),[t]),j=(0,s().IS)((e=>({inlinePageSectionsContainer:{...B.length>0?{marginBottom:S().YE+S().Lb+(T?-4:0)}:{}},minimalPropertiesContainer:{display:"flex",flexDirection:"row",flexWrap:"wrap"}})),[B.length,T]);return w&&P&&M&&(0!==A.length||0!==B.length)?C((0,y.jsx)(p().wt,{gap:4,children:(0,y.jsxs)(u().s,{allowSelectionWithin:!0,children:[A.length>0&&(0,y.jsx)("div",{style:j.inlinePageSectionsContainer,children:(0,y.jsx)(m().A,{propertyIds:A,store:t,collectionStore:w,disabled:o,locked:k,blockPropertyValueOverlayStore:x?v().A:g().A,format:M,type:"inline"})}),B.length>0&&(0,y.jsxs)(y.Fragment,{children:[_&&(0,y.jsx)(f().j,{store:t,style:{marginLeft:6},children:(0,y.jsx)(d().sA,{id:"pageLayout.relationsGroup.defaultTitle",defaultMessage:"Relations"})}),(0,y.jsx)("div",{style:j.minimalPropertiesContainer,children:(0,y.jsx)(m().A,{propertyIds:B,store:t,collectionStore:w,disabled:o,locked:k,blockPropertyValueOverlayStore:x?v().A:g().A,format:M,type:"minimal"})})]})]})})):null}}}]);