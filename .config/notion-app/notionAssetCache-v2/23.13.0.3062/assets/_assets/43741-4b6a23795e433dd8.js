"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22542,43741],{3079:(e,t,o)=>{o.d(t,{H:()=>a});var n=o(296540),r=o(474848);const a=n.forwardRef((function(e,t){const{children:n,property:a,store:i}=e,l=(0,o(171722).y)({propertyId:a,store:i})||[];return(0,r.jsx)("div",{ref:t,className:l.length?l.join(" "):void 0,children:n})}))},63473:(e,t,o)=>{o.d(t,{B:()=>a});var n=()=>o(449412);const r={};function a(e){const{throttleSeconds:t,...o}=e,a=`${e.from}:${e.type}`,i=r[a],l=Date.now();(!i||l-i>1e3*t)&&(r[a]=l,function(e){const{error:t,...o}=e;(0,n().O8)(t,o)}(o))}},67775:(e,t,o)=>{o.d(t,{l:()=>g});o(296540);var n=()=>o(401497),r=()=>o(72135),a=()=>o(496603),i=()=>o(720665),l=()=>o(458366),s=()=>o(972435),c=()=>o(78901),d=()=>o(162010),u=o(474848);const p=21;function g(e){const{numberValue:t,numberFormat:o,numberPrecision:g,numberShowAs:m,shouldRenderTooltip:y,withComma:f,style:h,ringWidth:v,className:b,barHeight:S}=e,x=(0,n().DP)();if(a().yr(t)||i().pN(t))return null;const C=e.progressSize??p,M=(null==m?void 0:m.showValue)??!0,k=M&&r().ZV(t,o,s().A.getIntl(),void 0,g);let _;if("bar"===(null==m?void 0:m.type)||"ring"===(null==m?void 0:m.type)){const n=r().XK(t,m.maxValue),{filledColor:a,gapColor:i,unfilledColor:s}=function(e){let{theme:t,color:o}=e;const n="default"===o?t.selectLightGray:t.accentColors[o],r="dark"===t.mode?n[500]:n[400],a=n[50],i="dark"===t.mode?n[200]:t.selectLightGray[200];return{filledColor:r,gapColor:a,unfilledColor:i}}({theme:x,color:m.color}),p=y?l().lh({numberValue:t,numberFormat:o,numberShowAs:m}):void 0;_="bar"===m.type?(0,u.jsx)(c().z,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,height:S,style:{height:C,...e.barStyle,...M?{}:{flexBasis:"100%"}},tooltip:p}):(0,u.jsx)(d().C,{percentage:n,filledColor:a,gapColor:i,unfilledColor:s,size:C,ringWidth:v,tooltip:p})}return(0,u.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",gap:"6px 8px",...h},className:b,children:[k,_,f?", ":null]})}},68350:(e,t,o)=>{o.d(t,{I:()=>b});var n=o(296540),r=()=>o(484714),a=()=>o(847249),i=()=>o(401497),l=()=>o(970013),s=()=>o(452862),c=()=>o(645873);const d=new(c().O2)("PagePropertiesRowNameMenu",(async()=>Promise.all([o.e(96346),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(74562),o.e(63077),o.e(28271),o.e(17254),o.e(90966),o.e(1423)]).then(o.bind(o,716547)))),u=(0,c()._h)(d,(e=>e.PagePropertiesRowNameMenu));var p=()=>o(795963),g=()=>o(962730),m=()=>o(735372),y=()=>o(59364),f=()=>o(897119),h=()=>o(398842),v=o(474848);const b=n.memo((function(e){const{property:t,schema:c,disabled:d,locked:m,canConfigureCollection:h,isInPeekRenderer:b,labelComponent:x,hideDragHandle:C,pagePropertiesStore:M,styleVariants:k,disableRowNameInteractivity:_,dragHandleStyle:A,layoutModule:w,forceHighlight:I,forceFocusedHighlight:P,hideIcon:T,propertyNameAriaId:j,showDragHandleAsIcon:R}=e,B=(0,n.useRef)(null),L=(0,o(175116).Ks)(),N=(0,r().v3)(),F=(0,r().Y0)(),[D,V]=(0,n.useState)(!1),O=c[t],W=(0,a().K8)((()=>M.state.hoveredProperty===t),[M,t]),E=(0,a().K8)((()=>!F.isMobile&&W&&!o(732770).A.state.isKeyboardMode&&!C),[F.isMobile,C,W]),z=(0,a().K8)((()=>M.state.openProperty),[M]),H=(0,o(806401).D)(O),U=(0,a().K8)((()=>null==L?void 0:L.collectionStore()),[L]),K=(0,i().IS)((e=>{const{size:t="medium",width:n={variant:"fixed",widthMobile:p().yN,widthDesktop:p().OQ},height:r,color:a="default"}=k||{},i="medium"!==(null==r?void 0:r.variant)&&(null!=r&&r.variant||"medium"!==t)?24:34;let l;if("fixed"===n.variant){const e=F.isMobile?n.widthMobile||p().yN:n.widthDesktop||p().OQ;l={width:e,maxWidth:e,minWidth:0}}else if("hug-content"===n.variant){l={width:"min-content",maxWidth:F.isMobile?n.maxWidthMobile||"100%":n.maxWidthDesktop||"100%",minWidth:0}}else(0,o(534177).HB)(n);return{propertyLabelContainerStyles:{display:"flex",alignItems:"center",color:"primary"===a?e.text.primary:e.text.secondary,height:i,...l},tooltipLockedIcon:{width:12,fill:e.text.contrastPrimary,marginLeft:2,display:"inline-block",verticalAlign:"middle",paddingBottom:3},tooltipDescription:{color:e.text.contrastSecondary},tooltipAutoUpdatedByAi:{color:e.text.contrastSecondary},sharingEnabledTooltip:{marginTop:8,color:e.text.contrastSecondary},personPropertyPermissionsTooltip:{marginTop:8,color:e.text.contrastSecondary}}}),[F.isMobile,k]),q=(0,n.useCallback)((()=>{M.setState({...M.state,hoveredProperty:void 0})}),[M]),X=(0,n.useCallback)((()=>{M.setState({...M.state,hoveredProperty:t})}),[M,t]),G=(0,n.useMemo)((()=>!F.isMobile&&!d&&!(m||!h)&&!C&&!e.showDragHandleAsIcon&&(0,v.jsx)(o(145214).A,{animate:{opacity:E?1:0},initial:{opacity:0},exit:{opacity:0},style:{width:y().Z+4,marginLeft:-(y().Z+4)},onMouseMove:X,onMouseLeave:q,children:(0,v.jsx)(o(348501).A,{role:"cell",disallowTabbing:!0,onClick:t=>function(e,t,n,r){o(592678).Zm()||r.setState({...r.state,openProperty:{property:t,isInPeekRenderer:n}})}(0,e.property,e.isInPeekRenderer,M)})})),[h,F.isMobile,d,C,m,M,e.isInPeekRenderer,e.property,e.showDragHandleAsIcon,E,q,X]),Q=(0,n.useCallback)((e=>{if(!L)return;const n=L.permissionScopesStore.state,r={onClick:!_&&n.canConfigureBlock?()=>function(e,t,n,r){o(725614).clear({environment:n}),o(778417).IU({environment:n}),(0,o(404779).y)(),r.setState({...r.state,openProperty:{property:e,isInPeekRenderer:t}})}(t,b,N,M):o(496603).D_};return(0,v.jsx)(S,{hideIcon:Boolean(T),showDragIcon:!T&&R&&E,dragHandleStyle:A,schema:c,property:t,disabled:d||Boolean(_),locked:m,canConfigureCollection:h,events:(0,o(553965).A)(r,e),propertyNameAriaId:j,setIsDescriptionIconTooltipHovered:e=>V(e),styleVariants:k,layoutModule:w,forceHighlight:I,forceFocusedHighlight:P,isSharingEnabled:H,collectionStore:U})}),[L,_,T,R,E,A,c,t,d,m,h,j,k,w,I,P,H,U,b,N,M]),$=Boolean(z&&!d&&z.property===t&&z.isInPeekRenderer===b),Y=(0,n.useCallback)((()=>{if(!L)return;M.setState({...M.state,openProperty:void 0});const e=L.settingsStore;o(686526).os({collectionSettingsStore:e})}),[L,M]),Z=(0,n.useCallback)((()=>{const t=null==L?void 0:L.settingsStore;if(L&&t)return(0,v.jsx)("div",{ref:B,children:t.state.open?(0,v.jsx)(o(59400).m$,{context:o(525432).Bd.TopbarFilterPopup,collectionContextStore:L,collectionSettingsStore:t,hideDesktopHeader:!0}):(0,v.jsx)(u,{...e,popupContainerRef:B})})}),[L,e]),J=(0,n.useCallback)((e=>{if(!L||!O)return null;const n=(0,l().$M)(O)&&(0,l().om)(O);return(0,v.jsxs)("div",{...e,style:o(673730).Q$,children:[(0,v.jsxs)("div",{children:[O.name,U&&"relation"===O.type&&H&&(0,v.jsx)(s().F,{propertySchema:O,collectionStore:U,style:K.sharingEnabledTooltip}),m&&(0,o(315564).S)(K.tooltipLockedIcon)]}),void 0!==(null==O?void 0:O.description)&&O.description.length>0?(0,v.jsx)("div",{style:K.tooltipDescription,children:O.description}):null,U&&(0,v.jsx)(o(591872).o,{propertySchema:O,collectionStore:U,propertyId:t,style:K.personPropertyPermissionsTooltip}),n&&n.auto_update_on_edit&&(0,v.jsx)("div",{style:K.tooltipAutoUpdatedByAi,children:(0,v.jsx)(o(959013).sA,{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"})})]})}),[L,O,U,H,K.sharingEnabledTooltip,K.tooltipLockedIcon,K.tooltipDescription,K.personPropertyPermissionsTooltip,K.tooltipAutoUpdatedByAi,m,t]);return L&&O?(0,v.jsx)(o(859428).A,{disableTooltip:F.isMobile,renderTooltip:J,delayThreshold:D?0:500,placement:g().W.Left,tooltipClassName:o(38337).StS,render:e=>(0,v.jsxs)("div",{style:K.propertyLabelContainerStyles,onMouseMove:X,onMouseLeave:q,children:[G,(0,v.jsx)(f().Ay,{popupType:F.isMobile?f().nl.SlideUp:f().nl.Popup,originGap:1,alignmentToOrigin:g().C.Start,render:Z,open:$,onDismiss:Y,origin:x??Q(e)})]},t)}):null})),S=n.memo((function(e){var t;const{schema:n,property:l,disabled:c,locked:d,canConfigureCollection:u,events:p,styleVariants:g,forceHighlight:y,forceFocusedHighlight:f,showDragIcon:b,isSharingEnabled:S,collectionStore:x}=e,C=(null==g?void 0:g.color)||"default",M=(null==g?void 0:g.size)||"medium",k=null==g?void 0:g.fontWeight,_=n[l],{isMobile:A}=(0,r().Y0)(),w=(0,a().K8)((()=>{if(f)return!0;const e=m().wb.state;return!(!e||"page_property_name"!==e.type)&&e.propertyId===l}),[l,f]),I=(0,a().K8)((()=>{var e;if(y)return!0;const t=m().qu.state,o=null===(e=n[l])||void 0===e?void 0:e.name;if(!t||!o)return!1;return o.toLowerCase().includes(t.toLowerCase())}),[l,n,y]),P=(0,i().IS)((t=>{const n=w?t.findHighlightMatch.selectedBackground:t.findHighlightMatch.unselectedBackground;return{button:{display:"flex",alignItems:"center",height:"100%",width:(0,o(778781).gx)(e.layoutModule)?void 0:"100%",borderRadius:4,padding:"0 6px",maxWidth:"100%"},property:{backgroundColor:I?n:void 0,outline:I?`5px solid ${n}`:void 0,borderRadius:I?4:void 0,color:w?"black":void 0,..."medium"===M?{fontSize:14,lineHeight:"20px"}:{fontSize:13,lineHeight:"18px"},...k?{fontWeight:o(284371).Wy[k]}:{}},icon:{marginRight:2,..."primary"===C?{fill:t.icon.primary}:w?{fill:"black"}:{}}}}),[C,w,M,k,e.layoutModule,I]);return _?(0,v.jsx)(o(704152).A,{role:"cell",id:e.propertyNameAriaId,style:P.button,disabled:c||d||!u,...p,onContextMenu:e=>{e.preventDefault(),p.onClick(e)},children:(0,v.jsx)(h().mA,{propertySchema:_,showIcon:!e.hideIcon,showDragIcon:b,badge:(0,v.jsxs)(v.Fragment,{children:["relation"===_.type&&S&&(0,v.jsx)(s().z,{style:{width:20,height:20,marginLeft:4}}),x&&(0,v.jsx)(o(297264).s,{propertySchema:_,collectionStore:x,propertyId:l}),(0,v.jsx)(h().Jv,{propertySchema:_}),!A&&Boolean(null===(t=_.description)||void 0===t?void 0:t.length)&&(0,v.jsx)(o(769068).g,{setIsHovered:e.setIsDescriptionIconTooltipHovered})]}),style:P.property,property:l,className:w?o(643707).wT:void 0,labelSizeVariant:M,iconSize:"medium"===M?16:14,iconStyle:P.icon,dragHandleStyle:e.dragHandleStyle})}):null}))},86499:(e,t,o)=>{o.d(t,{q:()=>a});var n=()=>o(645873);const r=new(n().O2)("RelationMenuRow",(async()=>{const{RelationMenuRow:e}=await Promise.all([o.e(43380),o.e(18766)]).then(o.bind(o,525174));return{RelationMenuRow:e}})),a=(0,n()._h)(r,(e=>e.RelationMenuRow))},93549:(e,t,o)=>{o.d(t,{j:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("parentItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.29662 5.47368L7.33167 4.11653L6.30839 5.24265L4.22625 7.32458C4.16064 7.39019 4.0821 7.43856 3.99288 7.47024C3.90958 7.5013 3.82192 7.51646 3.73089 7.51646C3.54036 7.51646 3.37427 7.45062 3.24187 7.31823L3.23992 7.31628C3.11249 7.18353 3.04999 7.01804 3.04999 6.82921C3.04999 6.63758 3.12598 6.46746 3.2656 6.32285L3.26711 6.32129L7.4749 2.10083C7.62016 1.9509 7.79567 1.87 7.99651 1.87C8.19734 1.87 8.37284 1.95089 8.51809 2.10079L12.7355 6.32457C12.8705 6.46954 12.943 6.63917 12.943 6.82921C12.943 7.01927 12.8775 7.18502 12.7458 7.31725C12.617 7.45083 12.4522 7.51646 12.2621 7.51646C12.1706 7.51646 12.0814 7.50115 11.995 7.47068L11.9926 7.4698C11.9069 7.43769 11.8313 7.38908 11.7668 7.32458L9.6802 5.238L8.65635 4.11153L8.69652 5.47736L8.69011 9.81896C8.69011 10.5736 8.80303 11.157 9.01808 11.5793C9.2312 11.9935 9.55909 12.2887 10.0079 12.4675L10.0088 12.4678C10.4652 12.6536 11.062 12.7499 11.8051 12.7499C11.952 12.7499 12.0793 12.7478 12.1871 12.7436C12.303 12.7393 12.417 12.7372 12.5287 12.7372C12.7186 12.7372 12.8855 12.7955 13.0191 12.9179C13.1612 13.0441 13.2287 13.2138 13.2287 13.4117C13.2287 13.5394 13.2018 13.6569 13.1388 13.7556C13.0846 13.8467 13.0093 13.919 12.9157 13.9718C12.8317 14.0256 12.7415 14.0631 12.6459 14.0833C12.5373 14.1068 12.4035 14.12 12.2469 14.1243C12.0973 14.1286 11.931 14.1307 11.748 14.1307C10.2678 14.1307 9.14333 13.8104 8.40142 13.144C7.6536 12.4723 7.29657 11.3702 7.29657 9.87609L7.29662 5.47368Z"})})},112886:(e,t,o)=>{o.d(t,{a:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 1.675a3.7 3.7 0 0 0-1.825 6.92v4.092c0 .094.04.183.111.245l1.5 1.313a.325.325 0 0 0 .428 0l1.5-1.313a.325.325 0 0 0 .033-.456l-.944-1.101.944-1.1a.33.33 0 0 0 .078-.213V8.595A3.7 3.7 0 0 0 8 1.674M8 3.75A.875.875 0 1 1 8 5.5a.875.875 0 0 1 0-1.75"})},r=(0,o(340498).wt)("keyFillSmall",n)},115562:(e,t,o)=>{o.d(t,{W:()=>s});o(296540);var n=()=>o(819121),r=()=>o(401497),a=()=>o(955825),i=()=>o(677195),l=o(474848);function s(e){const{selectorSize:t="normal",...o}=e,{disabled:s,checked:c}=o,[d,u]=(0,n().A)(),p=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:a}=e;return(0,r().IS)((e=>({root:{position:"absolute",display:"flex",width:"large"===a?15:11,height:"large"===a?15:11,margin:1.5,justifyContent:"center",alignItems:"center",flexShrink:0,borderRadius:"large"===a?2:1,transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.outlineBlueInputBoxShadow}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"large"===a?18:void 0,height:"large"===a?18:void 0,...o?{pointerEvents:"none"}:{cursor:"pointer"}},icon:{color:e.text.contrastPrimary,width:"large"===a?12:10,height:"large"===a?12:10,ariaHidden:!0}})),[a,t,o,n])}({checked:c,disabled:s,selectorSize:t,isFocusVisible:u});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{ref:d,type:"checkbox",style:p.input,...o}),(0,l.jsx)("span",{...(0,a().AH)(p.root,s?{}:{pseudoActive:p.active}),children:c&&(0,i().R)(p.icon)})]})}},130636:(e,t,o)=>{o.d(t,{T:()=>a,m:()=>r});var n=()=>o(645873);const r=new(n().O2)("formPropertyRenderer",(()=>o.e(59111).then(o.bind(o,843190)))),a=(0,n().jQ)(r,(e=>e.default))},162010:(e,t,o)=>{o.d(t,{C:()=>s});o(296540);var n=()=>o(401497),r=()=>o(962730),a=()=>o(859428),i=o(474848);const l=2;function s(e){const{percentage:t,ringWidth:o,size:s,style:c,label:d}=e,u=(0,n().DP)(),p=o??3,g=s/2-p/2,m=2*Math.PI*g,y=s/2,f=e.filledColor??u.accentColors.gray[500],h=e.unfilledColor??u.accentColors.gray[100],v=e.gapColor??"transparent",b=Math.min(Math.max(t,0),100),S=b>l&&b+2*l<95&&(0,i.jsx)("circle",{r:g,cx:y,cy:y,strokeWidth:p,stroke:v,strokeLinecap:"round",strokeDasharray:`${m} ${m*(100-(b+2*l))/100}`,strokeDashoffset:""+m*(100-(b+l))/100,fill:"transparent"}),x=e=>(0,i.jsx)("div",{role:"progressbar","aria-valuenow":b,style:{height:s,width:s,...c,pointerEvents:"auto"},...e,children:(0,i.jsxs)("svg",{viewBox:`0 0 ${s} ${s}`,color:"transparent",style:{width:"100%",height:"100%",transform:"rotate(-90deg)",transformOrigin:"50% 50%"},children:[(0,i.jsx)("circle",{r:g,cx:y,cy:y,strokeWidth:p,stroke:h,strokeLinecap:"round",fill:"transparent"}),S,(0,i.jsx)("circle",{r:g,cx:y,cy:y,strokeWidth:p,stroke:f,strokeLinecap:"round",strokeDasharray:m,strokeDashoffset:m-b/100*m,fill:"transparent"}),(0,i.jsx)("text",{x:y,y,textAnchor:"middle",dominantBaseline:"middle",fill:u.text.secondary,fontSize:"0.75em",style:{transformOrigin:"50% 50%",transform:"rotate(90deg)"},children:d})]})});return e.tooltip?(0,i.jsx)(a().A,{placement:r().W.Top,renderTooltip:()=>e.tooltip,render:x}):x()}},163194:(e,t,o)=>{o.d(t,{A:()=>r});o(898992),o(672577);class n extends(()=>o(959180))().A{findRow(e,t,o){return this.find((n=>n.relatedPageStoreId===e&&n.rowType===t&&n.property===o))}}const r=new n},164124:(e,t,o)=>{o.d(t,{W:()=>u});o(296540);var n=()=>o(847249),r=()=>o(401497),a=()=>o(970013),i=()=>o(807831),l=()=>o(284371),s=()=>o(519839),c=()=>o(405417),d=o(474848);function u(e){let{blockStore:t,collectionContextStore:o,wrapperStyle:u}=e;const p=(0,n().O$)(o.currentSubitemFormatStoreForCollectionStore),g=(0,n().K8)((()=>(0,s().Dj)({store:t,collectionContextStore:o})),[o,t]),m=(0,n().K8)((()=>{if(!p||!g)return;const e=g.getSchema()[p.property];return void 0!==e&&(0,a().nC)(e)?e:void 0}),[g,p]),y=(0,r().IS)((e=>({subItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},wrapper:{display:"inline-flex",alignItems:"center",verticalAlign:" text-top",paddingRight:8,...u},numSubitemsSpan:{fontSize:l().J.UISmall.desktop,fontWeight:l().Wy.medium,color:e.text.tertiary}})),[u]),f=(0,n().K8)((()=>p&&m?(0,c().rt)({store:t,subitemFormat:p,propertySchema:m}):[]),[t,p,m]);return(0,n().K8)((()=>(0,c().Kk)({collectionContextStore:o,blockStore:t})),[o,t])&&0!==f.length?(0,d.jsxs)("span",{style:y.wrapper,children:[(0,i().V)(y.subItemIcon),(0,d.jsx)("span",{style:y.numSubitemsSpan,children:f.length})]}):null}},171559:(e,t,o)=>{o.d(t,{ML:()=>l,Pe:()=>a});var n=()=>o(645873);const r=new(n().O2)("formEditorActionButtons",(()=>Promise.all([o.e(75134),o.e(9304),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(17989),o.e(90625),o.e(59794),o.e(26483),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(67780),o.e(96933),o.e(45620),o.e(77905),o.e(16357),o.e(69095)]).then(o.bind(o,621269)))),a=(0,n().jQ)(r,(e=>e.default)),i=new(n().O2)("conditionalLogicTooltip",(()=>o.e(16130).then(o.bind(o,879022)))),l=(0,n()._h)(i,(e=>e.ConditionalLogicTooltip))},175882:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleSmallIcon:()=>a,iconDefinition:()=>r});o(296540);var n=o(474848);const r={viewBox:"0 0 16 16",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M7.9 5.281a.625.625 0 0 0-.625.625v2.5a.625.625 0 0 0 1.25 0v-2.5a.625.625 0 0 0-.625-.625m0 4.7a.725.725 0 1 0 0 1.45.725.725 0 0 0 0-1.45"}),(0,n.jsx)("path",{d:"M9.58 2.788c-.702-1.217-2.458-1.217-3.16 0l-4.677 8.1c-.702 1.216.176 2.737 1.58 2.737h9.354c1.405 0 2.283-1.52 1.58-2.738zm-2.078.625a.575.575 0 0 1 .996 0l4.677 8.1a.575.575 0 0 1-.498.862H3.324a.575.575 0 0 1-.498-.863z"})]})},a=(0,o(340498).wt)("exclamationMarkTriangleSmall",r)},265665:(e,t,o)=>{o.d(t,{j:()=>d});var n=o(296540),r=()=>o(484714),a=()=>o(401497),i=()=>o(284371),l=()=>o(859428);var s=()=>o(962730),c=o(474848);function d(e){let{children:t,style:o,tooltipStyle:d,placement:u=s().W.Bottom}=e;const{isSafari:p}=(0,r().Y0)(),g=(0,n.useRef)(null),m=function(e){const[t,o]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const{current:t}=e;if(!t)return void o(!1);const n="ResizeObserver"in window?new ResizeObserver((e=>{let[t]=e;o(t.target.scrollWidth>t.target.clientWidth)})):void 0;return null==n||n.observe(t),()=>null==n?void 0:n.unobserve(t)}),[]),t}(g),y=(0,a().IS)((()=>({overflowText:{...i().RC,...o}})),[o]);return(0,c.jsx)(l().A,{delayThreshold:500,placement:u,textWrap:!0,style:d,forceVisibleState:!(p||!m)&&void 0,renderTooltip:()=>m?t:void 0,render:e=>(0,c.jsx)("div",{ref:g,style:y.overflowText,...e,children:t})})}},289190:(e,t,o)=>{o.d(t,{m:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{type:"uninitialized"}}isWriting(){return"filling"===this.state.type&&!this.state.haveAllBlocksCompletedAutofill&&!this.state.didInterruptStreaming}setIsWriting(e){var t;const{propertySchema:n,stores:r,sessionIdForAnalytics:a}=e,i=r[0].getAssociatedCollectionId()??(null===(t=r[0].getCollectionStore())||void 0===t?void 0:t.id),l=a||o(206267).JW();return this.setState({type:"filling",propertySchema:n,collectionId:i,numBlocksToAutofill:r.length,numBlocksAutofilled:0,sessionId:l,didInterruptStreaming:!1,haveAllBlocksCompletedAutofill:!1}),l}}const r=new n},297264:(e,t,o)=>{o.d(t,{s:()=>l});o(296540);var n=()=>o(112886),r=()=>o(763870),a=()=>o(464708),i=o(474848);function l(e){let{collectionStore:t,propertyId:o,propertySchema:l}=e;return(0,r().i)({collectionStore:t,propertyId:o,propertySchema:l})?(0,i.jsx)(a().A,{color:"yellow",style:{borderRadius:4,height:16,width:16,display:"flex",alignItems:"center",justifyContent:"center"},content:(0,i.jsx)(i.Fragment,{children:(0,n().a)({width:14,height:14})})}):null}},310188:(e,t,o)=>{o.d(t,{K:()=>a});var n=()=>o(713998),r=()=>o(641007);function a(e){let{type:t,store:o,textValue:a}=e;if(!a||!t)return{linkHref:void 0,shouldShowMaliciousContentDialog:!1};const i=(null==o?void 0:o.getCreatedById())===r().xY.id&&"url"===t;return{linkHref:(0,n().UY)(t,a),shouldShowMaliciousContentDialog:i}}},315564:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("locked",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M4.79395 14.7227H11.1992C12.252 14.7227 12.7783 14.1963 12.7783 13.0479V8.20801C12.7783 7.19629 12.3682 6.66992 11.541 6.56055V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.56055C3.625 6.66992 3.21484 7.19629 3.21484 8.20801V13.0479C3.21484 14.1963 3.73438 14.7227 4.79395 14.7227ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.54004H5.75098V4.83105ZM4.99219 13.5059C4.69141 13.5059 4.54102 13.3623 4.54102 13V8.25586C4.54102 7.89355 4.69141 7.76367 4.99219 7.76367H11.0078C11.3086 7.76367 11.4521 7.89355 11.4521 8.25586V13C11.4521 13.3623 11.3086 13.5059 11.0078 13.5059H4.99219Z"})})},348241:(e,t,o)=>{o.d(t,{Q1:()=>i,cJ:()=>a,zi:()=>r});o(16280);var n=o(296540);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("useFormLayoutEditorContext must be used inside FormLayoutEditorContext.Provider");return(0,n.useMemo)((()=>e),[e])}function i(){return(0,n.useContext)(r)}r.displayName="FormLayoutEditorContext"},348501:(e,t,o)=>{o.d(t,{A:()=>s,q:()=>l});var n=o(296540),r=()=>o(959013),a=()=>o(59364),i=o(474848);const l=300,s=(0,n.forwardRef)((function(e,t){const s=(0,r().tz)(),c=(0,o(444570).Jj)(),d=(0,o(401497).IS)((t=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",cursor:e.disableDrag?"pointer":"grab",width:e.width??a().Z,height:e.height??a().S,borderRadius:4,fill:c?t.icon.secondary:t.lightIconColor,...e.style},text:{color:t.text.contrastSecondary}})),[e.disableDrag,e.width,e.height,e.style,c]);const{onClick:u}=e,p=(0,n.useCallback)((e=>{u&&(e.preventDefault(),u(e))}),[u]);return(0,i.jsx)(o(859428).A,{placement:e.tooltipPlacement??o(962730).W.Bottom,delayThreshold:l,renderTooltip:function(){return(0,i.jsxs)("div",{style:{textAlign:"center"},children:[!e.disableDrag&&(0,i.jsx)(r().sA,{defaultMessage:"Drag <medium>to move</medium>",id:"dragHandleButton.dragPrompt.text",values:{medium:e=>(0,i.jsx)("span",{style:d.text,children:e})}}),!e.hideClickMessage&&(0,i.jsx)("div",{children:(0,i.jsx)(r().sA,{defaultMessage:"Click <medium>to open menu</medium>",id:"dragHandleButton.clickPrompt.text",values:{medium:e=>(0,i.jsx)("span",{style:d.text,children:e})}})})]})},render:n=>(0,i.jsx)(o(704152).A,{ref:t,ariaLabel:s.formatMessage({id:"dragHandleButton.ariaLabel",defaultMessage:"Drag"}),role:e.role,style:d.buttonStyle,onClick:e.onClick,onContextMenu:p,disallowTabbing:e.disallowTabbing,...n,children:(0,o(887146).i)({width:14,height:14,...e.iconStyle})})})}))},358167:(e,t,o)=>{o.d(t,{v:()=>a});var n=()=>o(847249),r=()=>o(116008);function a(e){const{blockId:t,propertyId:o}=e;return(0,n().K8)((()=>r().A.isPropertyWithDraftDiscussion({blockId:t,propertyId:o})),[t,o])}},360525:(e,t,o)=>{o.d(t,{A:()=>y});o(296540);var n=()=>o(484714),r=()=>o(847249),a=()=>o(310442),i=()=>o(824862),l=()=>o(798880),s=()=>o(53528),c=()=>o(959013),d=()=>o(534177),u=()=>o(630116),p=()=>o(427636),g=()=>o(994006),m=o(474848);function y(e){const{isMobile:t}=(0,n().Y0)();return(0,m.jsx)("div",{style:t?{padding:"12px 20px",fontSize:14}:{fontSize:12,display:"flex",alignItems:"center"},children:(0,m.jsx)(f,{...e})})}function f(e){const{verificationState:t,blockStore:o}=e,n=(0,c().tz)();switch(t.type){case"none":return null;case"verified":return t.isIndefinite?(0,m.jsx)(c().sA,{defaultMessage:"Verified by {user} on {date}",id:"VerificationSummary.verifiedIndefinitely",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),date:(0,s().OH)({dateTime:t.startDateTime,intl:n})}}):(0,m.jsx)(c().sA,{defaultMessage:"Verified by {user} from {dateTimeRange}",id:"VerificationSummary.verified",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().do)({luxonRange:t.dateTimeRange,intl:n})}});case"expired":return(0,m.jsx)(c().sA,{defaultMessage:"Last verified by {user} from {dateTimeRange}",id:"VerificationSummary.verificationExpired",values:{user:(0,m.jsx)(h,{actorPointer:t.actorPointer,blockStore:o}),dateTimeRange:(0,s().do)({luxonRange:t.dateTimeRange,intl:n})}});default:(0,d().HB)(t)}}function h(e){const{actorPointer:t,blockStore:o}=e,n=(0,r().K8)((()=>u().sk.createChildStore(o,t)),[o,t]),s={display:"flex",marginLeft:4,marginRight:4};return n.table===l().oo?(0,m.jsx)(g().A,{userStore:n,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):n.table===i().GP?(0,m.jsx)(p().A,{botStore:n,style:s,avatarSize:16}):n.table===a().yj?(0,m.jsx)(g().A,{userStore:void 0,inline:!0,style:s,avatarSize:16,avatarMarginRight:4}):void(0,d().HB)(n)}},452862:(e,t,o)=>{o.d(t,{F:()=>a,z:()=>i});var n=()=>o(645873);const r=new(n().O2)("SharingEnabled",(async()=>{const[{default:e},{default:t}]=await Promise.all([o.e(47307).then(o.bind(o,883358)),o.e(14227).then(o.bind(o,893244))]);return{SharingEnabledIcon:e,SharingEnabledPropertyNameTooltip:t}})),a=(0,n()._h)(r,(e=>e.SharingEnabledPropertyNameTooltip)),i=(0,n()._h)(r,(e=>e.SharingEnabledIcon))},458366:(e,t,o)=>{o.d(t,{B2:()=>j,EI:()=>I,F1:()=>_,Kc:()=>M,NN:()=>T,UY:()=>C,br:()=>P,lA:()=>A,lh:()=>k,pi:()=>b,w_:()=>x,zP:()=>S});o(898992),o(737550);var n=()=>o(584262),r=()=>o(443239),a=()=>o(970013),i=()=>o(713998),l=()=>o(882262),s=()=>o(415566),c=()=>o(177256),d=()=>o(72135),u=()=>o(919709),p=()=>o(496603),g=()=>o(534177),m=()=>o(939768),y=()=>o(720665),f=()=>o(41459),h=()=>o(492414),v=()=>o(972435);function b(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function S(e){switch(e){case f().j.Table:return"table";case f().j.Board:return"board";case f().j.ListView:return"list";case f().j.GalleryView:return"gallery";case f().j.Relation:case f().j.RelationSection:return"relation_section";case f().j.Timeline:return"timeline";case f().j.Calendar:return"calendar";case f().j.Page:return"page_properties";case f().j.CompactPage:return"compact_page";case f().j.Mini:return"mini_peek";case f().j.FormEditor:case f().j.FormViewer:case f().j.PropertyModule:return"property_module";default:(0,g().HB)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function C(e){const{store:t,property:o,propertySchema:r}=e,a=null==r?void 0:r.type;if("title"===a)return(0,h().Ay)({store:t,fullyQualified:!1,pageVisitSource:n().y8.LinkInPage});{const e=t.getPropertyValue(o);return i().UY(a,e)}}function M(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let o=m().qg(t),n=o.host;if(o.protocol&&n||(o=m().qg(`http://${t}`),n=o.host),!n)return{domain:void 0,restOfUrl:void 0};n&&(n=n.replace(/^www./i,""));const r=t.toLowerCase().indexOf(n.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};n=t.slice(r,r+n.length);return{domain:n,restOfUrl:t.slice(r+n.length)}}function k(e){const{numberValue:t,numberFormat:o,numberShowAs:n}=e;if(!(p().yr(t)||y().pN(t)||"bar"!==(null==n?void 0:n.type)&&"ring"!==(null==n?void 0:n.type))){const e=v().A.getIntl();return"percent"===o?d().ZV(t,"percent",e):`${t} / ${n.maxValue}`}}function _(e){const{property:t,collectionStore:o}=e,n=o.isSyncedCollection();return Boolean(n)&&(0,r().u)(t)}function A(e,t){switch(e){case"side_peek":return{icon:c().A,tooltip:v().A.formatMessage(w.openInSidePeekTooltip),caption:t?"":v().A.formatMessage(w.openAsPageTitle)};case"center_peek":return{icon:s().q,tooltip:v().A.formatMessage(w.openInCenterPeekTooltip),caption:t?"":v().A.formatMessage(w.openAsPageTitle)};case"full_page":return{icon:l().m,tooltip:v().A.formatMessage(w.openAsPageTooltip),caption:t?"":v().A.formatMessage(w.openAsPageTitle)};default:(0,g().HB)(e)}}const w=(0,o(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function I(e){const t=e.getSchema();if(t)for(const[n,r]of Object.entries(t)){var o;if(r&&"text"===r.type&&"summarize"===(null===(o=r.ai_inference)||void 0===o?void 0:o.type)){const t=e.getPropertyValue(n);if(t)return t}}}function P(e){const{store:t,additionalStores:o,collectionContextStore:n}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==n?void 0:n.contextType)||!r)&&o.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function T(e){return e===f().j.FormEditor||e===f().j.FormViewer}function j(e){return Boolean(e&&!a().dA.includes(e.type))}},464778:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"click_block_property_url",t)}},465274:(e,t,o)=>{o.d(t,{z:()=>X});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577),o(581454),o(737550);var n=o(296540),r=()=>o(908006),a=()=>o(484714),i=()=>o(852507),l=()=>o(847249),s=()=>o(401497),c=()=>o(970013),d=()=>o(713998),u=()=>o(565040),p=()=>o(236262),g=()=>o(475140),m=()=>o(959013),y=()=>o(496603),f=()=>o(901952),h=()=>o(596359),v=()=>o(436572),b=()=>o(725614),S=()=>o(751156),x=()=>o(755199),C=()=>o(832857),M=()=>o(171559),k=()=>o(740840),_=()=>o(348241),A=()=>o(98205),w=()=>o(753199),I=()=>o(972435),P=()=>o(47170),T=()=>o(963589),j=()=>o(176983),R=()=>o(628315),B=()=>o(937199),L=()=>o(962730),N=()=>o(351360),F=()=>o(991249),D=()=>o(577437),V=()=>o(348501),O=()=>o(285790),W=()=>o(805751),E=()=>o(623580),z=()=>o(505108),H=()=>o(859428),U=()=>o(234359),K=()=>o(41459),q=o(474848);const X=(0,n.forwardRef)((function(e,t){const{property:r,propertySchema:i,format:s}=(0,n.useContext)(U().L8),{collectionStore:u,disabled:p,locked:g,store:m,formQuestionStore:y,formDataStore:f}=e,{isMobile:h}=(0,a().Y0)(),v=(0,l().K8)((()=>{var e;return"multi_select"===(null==i?void 0:i.type)?null==y||null===(e=y.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0}),[y,i]),b=(0,o(465741).Vm)({formQuestionStore:y,propertySchema:i}),S=(0,l().K8)((()=>i&&(0,c().lx)(i)?i.options??[]:[]),[i]),x=(0,l().K8)((()=>{var e;const t=null==f||null===(e=f.getFormState())||void 0===e?void 0:e.draftFormBlockStore;if(!r||!t)return new Set;const o=null==t?void 0:t.getPropertyValue(r),n=(0,d().J4)(o,S);return new Set(n.map((e=>e.id)))}),[f,S,r]),C=(0,l().K8)((()=>`form-question-${null==y?void 0:y.id}`),[y]);return s!==K().j.FormEditor||g?(0,q.jsx)("div",{style:{marginTop:8,marginLeft:h?void 0:-8,display:"flex",gap:h?4:0,flexDirection:"column"},children:S.map((e=>{let t=p;return v&&x.size>=v&&!b&&(x.has(e.id)||(t=!0)),(0,q.jsx)($,{store:m,disabled:t,option:e,allOptions:S,showRadioButtonSelector:b,questionName:C},e.id)}))}):(0,q.jsx)(G,{options:S,collectionStore:u,showRadioButtonSelector:b,formQuestionStore:y})}));function G(e){const t=(0,a().v3)(),[r,i]=(0,n.useState)(!1),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),{options:g,collectionStore:f,showRadioButtonSelector:v,formQuestionStore:b}=e,{property:S}=(0,n.useContext)(U().L8),x=(0,l().K8)((()=>f.getSchema()),[f]),C=(0,s().IS)((e=>({addOptionButtonStyle:{color:e.text.tertiary,fill:e.text.tertiary},selectOptionList:{marginTop:g.length>0?4:0},newSelectOption:{marginTop:g.length>0?0:4}})),[g]);return S?(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(o(439264).Ay,{direction:"vertical",style:C.selectOptionList,keys:null==g?void 0:g.map((e=>e.value)),disabled:c,onDragStart:()=>p(!0),onDragEnd:()=>p(!1),renderKey:e=>{const t=g.find((t=>t.value===e));return t?(0,q.jsx)(Y,{type:"persisted",option:t,options:g,showRadioButtonSelector:v,isDragging:u,collectionStore:f,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b},t.id):null},onDrop:e=>{h().gc({newValues:e,property:S,schema:x,collectionStore:f,environment:t})}}),r?(0,q.jsx)("div",{style:C.newSelectOption,children:(0,q.jsx)(Y,{type:"temporary",collectionStore:f,options:g,showRadioButtonSelector:v,isDragging:u,setNewOptionInput:i,setDisableDragging:d,formQuestionStore:b})}):null,(0,q.jsx)(o(493823).p,{onMouseDown:e=>{(0,w().SQ)({event:e,context:w().y$.EditorMouseDown,callback:y().D_})},icon:e=>(0,o(689094).W)({...e,width:18,marginLeft:1,marginRight:11,fill:C.addOptionButtonStyle.fill}),style:{color:C.addOptionButtonStyle.color,marginLeft:6,marginTop:4},onClick:e=>{i(!0)},children:(0,q.jsx)(m().sA,{id:"questionModule.formSelectMultiSelectProperty.addOption",defaultMessage:"Add option"})})]}):null}const Q=6;function $(e){const{option:t,allOptions:r,store:i,disabled:u,showRadioButtonSelector:p,questionName:g}=e,m=(0,a().v3)(),{isMobile:y}=(0,a().Y0)(),{format:f,property:h,propertySchema:v}=(0,n.useContext)(U().L8),b=(0,l().K8)((()=>null==v?void 0:v.type),[v]),x=(0,l().K8)((()=>{if(!h||!v||!(0,c().lx)(v))return!1;const e=i.getPropertyValue(h);let o=[];if("select"===v.type){const t=(0,d().fF)(e,r);o=t?[t]:[]}else o=(0,d().J4)(e,r);return o.some((e=>e.value===t.value))}),[i,t,r,v,h]),C=(0,s().IS)((e=>({selectorButton:{width:"calc(100% + 16px)",borderRadius:Q},selectorButtonInner:{border:"none",padding:"4px 8px",borderRadius:Q,...y?{backgroundColor:"light"===e.mode?e.accentColors.gray[30]:e.accentColors.gray[100]}:{}},selectorButtonPressed:{backgroundColor:e.buttonPressedBackground},selectorButtonHovered:{backgroundColor:e.buttonHoveredBackground},rowPadding:{padding:f===K().j.FormEditor?"0px 0px 0px 16px":void 0}})),[f,y]),M=(0,n.useCallback)((()=>{h&&v&&(0,c().lx)(v)&&("multi_select"!==v.type||p?S().createAndCommit({userAction:"FormSelectProperty.handleSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{t&&o(319975).R9({environment:m,store:i.getPropertyStore(h),value:(0,o(919709).x9d)(t.value),transaction:e})}}):S().createAndCommit({userAction:"FormSelectProperty.handleMultiSelectQuestionSelectOption",environment:m,canUndo:!0,perform:e=>{x?S().applyOperation({transaction:e,store:i.getPropertyStore(h),operation:{path:["properties",h],pointer:i.pointer,command:"removeSelectOption",args:{option:t.value}}}):S().applyOperation({transaction:e,store:i.getPropertyStore(h),operation:{path:["properties",h],pointer:i.pointer,command:"addSelectOptionAfter",args:{option:t.value}}})}}))}),[m,t,x,v,h,i,p]);return v&&(0,c().lx)(v)?(0,q.jsx)("div",{style:{display:"flex",alignItems:"center",wordBreak:"break-word"},children:(0,q.jsx)(o(84817).Y1,{direction:"horizontal",padding:C.rowPadding.padding,children:(0,q.jsx)(o(704152).A,{hoveredStyle:C.selectorButtonHovered,pressedStyle:C.selectorButtonPressed,style:C.selectorButton,disallowTabbing:!0,children:(0,q.jsx)(z().a,{style:C.selectorButtonInner,name:g,isDisabled:u,label:t.value,onChange:M,selectorSize:"large",isSelected:f===K().j.FormViewer&&x,value:"select_option",selectType:"select"===b||p?"radio":"checkbox",selectAlignYAxis:"center"})})})}):null}function Y(e){var t;const o=(0,a().v3)(),d=(0,m().tz)(),{type:S,collectionStore:w,formQuestionStore:K,option:X,options:G,isDragging:Q,setNewOptionInput:$,setDisableDragging:Y,showRadioButtonSelector:J}=e,[ee,te]=n.useState((null==X?void 0:X.value)??""),[oe,ne]=(0,n.useState)(!1),[re,ae]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(!1),se=(0,T().X)("forms_conditional_logic"),ce=(0,B().v$)(),de=(0,P().O)(),ue=(0,_().Q1)(),{currentUserSettingsStore:pe}=(0,l().K8)((()=>N().default.state),[]);(0,i().l)((()=>{"temporary"===S&&(le(!0),ae(!0))}));const{property:ge,propertySchema:me,collectionContextStore:ye}=(0,n.useContext)(U().L8),fe=(0,l().K8)((()=>null==K?void 0:K.getParentStore()),[K]),{currentQuestionModuleAndArea:he,modulesByArea:ve}=(0,l().K8)((()=>{const e=null==fe?void 0:fe.getModules();if(!e||!K)return{undefined:void 0,normalizedModulesByArea:e};return{currentQuestionModuleAndArea:(0,g().Ib)({modulesByArea:e,find:e=>"formQuestion"===e.type&&e.formQuestionId===K.id}),modulesByArea:e}}),[K,fe]),be=(0,n.useMemo)((()=>{if(null==X||!X.value||!me)return!1;const e=null==he?void 0:he.module.conditionalGroups,t="select"===me.type?{property:ge,filter:{operator:"enum_is",value:{type:"exact",value:X.value}}}:{property:ge,filter:{operator:"enum_contains",value:{type:"exact",value:X.value}}},o=null==e?void 0:e.some((e=>y().n4(e.trigger,t)));return Boolean(o)}),[he,X,ge,me]),Se=(0,n.useCallback)((()=>{if(!ge||!me||!(0,c().lx)(me))return;const e=ee.trim();if(e){"alphabetical"===me.auto_sort_options||"reverse_alphabetical"===me.auto_sort_options?h().Uk({modification:{type:"autoSortInsert",newValue:e},property:ge,propertySchema:me,options:G,environment:o,collectionStore:w}):h().Uk({modification:{type:"keyedObjectListAfter",newValue:e},property:ge,propertySchema:me,options:G,environment:o,collectionStore:w}),$(!1);const t=null==pe?void 0:pe.getSettingsStore().getKeyStore("seen_forms_add_conditional_logic_tooltip").getValue(),n=null==he?void 0:he.module.formQuestionId;se&&n&&!t&&(null==ue||ue.formAddConditionalLogicTooltipStore.setState({openTooltip:(0,A().fY)({formQuestionId:n,optionValue:e})}),R().HH(o,A().wG)),ye&&(0,f().V)({environment:o,collectionContextStore:ye,property:ge,from:"form_editor",action:"select_add_option"})}else $(!1);le(!1)}),[ge,$,ye,me,G,o,ee,w,null==he?void 0:he.module.formQuestionId,se,pe,ue]),xe=(0,n.useCallback)((e=>{ge&&X&&me&&(0,c().lx)(me)?(e?h().r$({environment:o,option:X,property:ge,propertySchema:me,collectionStore:w,deleteMessage:be?I().A.formatMessage(Z.deleteModalWithConditionalLogic):void 0}):h().Uk({modification:{type:"keyedObjectListRemove",id:X.id},property:ge,propertySchema:me,environment:o,collectionStore:w}),ye&&(0,f().V)({environment:o,collectionContextStore:ye,property:ge,from:"form_editor",action:"select_delete_option"}),$&&$(!1),le(!1),ae(!1),Y(!1),x().p$({environment:o}),R().a(o,A().wG)):$&&$(!1)}),[ge,$,ye,be,me,X,ae,Y,o,w]),Ce=(0,n.useCallback)((()=>{if(!(ge&&X&&me&&(0,c().lx)(me)))return;const e=ee.trim();e?(e&&e!==(null==X?void 0:X.value)&&(h().Uk({modification:{type:"keyedObjectListUpdate",option:X,newValue:e},property:ge,propertySchema:me,options:G,environment:o,collectionStore:w}),ye&&(0,f().V)({environment:o,collectionContextStore:ye,property:ge,from:"form_editor",action:"select_rename_option"})),le(!1),ae(!1),Y(!1)):xe()}),[ge,ye,xe,me,o,ae,Y,X,G,ee,w]),Me=(0,n.useCallback)((()=>{ge&&me&&(0,c().lx)(me)&&he&&fe&&X&&(C().lF({environment:o,layoutStore:fe,currentQuestionModule:he.module,area:he.area,property:ge,filterValue:{type:me.type,value:X},setModuleSelection:null==ce?void 0:ce.setModuleSelection,sessionId:(null==ce?void 0:ce.sessionId)??""}),x().p$({environment:o}),R().a(o,A().wG))}),[ge,o,he,fe,X,ce,me]),ke=y().sg((()=>ne(!0)),5),_e=ke,Ae=(0,n.useCallback)((()=>{ne(!1),ke.cancel()}),[ke]),we=(0,n.useMemo)((()=>oe&&!re),[oe,re]),Ie=(0,l().K8)((()=>(0,A().Yx)({type:"multi_select",formQuestionId:null==he?void 0:he.module.formQuestionId,optionValue:null==X?void 0:X.value,isConditionalLogicEnabled:se,formAddConditionalLogicTooltipStore:null==ue?void 0:ue.formAddConditionalLogicTooltipStore})),[X,null==he?void 0:he.module.formQuestionId,se,ue]),Pe=(0,j().J)(),Te=(0,D()._X)({name:"forms_conditional_logic",spaceId:de,userId:null===(t=o.currentUser)||void 0===t?void 0:t.id}),je=null==Te?void 0:Te.upsell,Re=(0,n.useMemo)((()=>(0,A().DG)({isConditionalLogicEnabled:se,mouseEntered:oe,currentQuestionModule:null==he?void 0:he.module,modulesByArea:ve,featureAvailable:"available"===(null==Te?void 0:Te.type),isDragging:Q,inputFocused:re,showTutorialTooltip:Ie})),[se,oe,null==he?void 0:he.module,ve,null==Te?void 0:Te.type,Ie,Q,re]),Be=(0,n.useMemo)((()=>(oe||Ie&&Re)&&!re&&!Q),[re,Q,oe,Ie,Re]),Le=(0,s().IS)((e=>({container:{display:"flex",alignItems:"center",width:"calc(100% + 16px)",marginLeft:-8,padding:"2px 4px",borderRadius:6,backgroundColor:oe?e.buttonHoveredBackground:void 0,cursor:"grab"},dragHandle:{position:"absolute",zIndex:2,marginLeft:"-2px"},innerContainer:{display:"flex",alignItems:"center",padding:"0px 0px 0px 16px",width:"100%"},conditionalButtonBorder:{outlineStyle:"solid",outlineWidth:2,outlineColor:e.icon.uiBlueTertiary,borderRadius:4}})),[oe]),Ne=(0,n.useRef)(null);return ge&&me&&(0,c().lx)(me)?(0,q.jsxs)("div",{style:Le.container,onMouseMove:_e,onMouseLeave:Ae,children:[we&&(0,q.jsx)(V().A,{width:16,height:24,disallowTabbing:!0,disableDrag:re,tooltipPlacement:L().W.Left,hideClickMessage:!0,style:Le.dragHandle}),(0,q.jsxs)("div",{style:Le.innerContainer,children:[(0,q.jsx)(z().a,{style:{border:"none",padding:0,cursor:"grab",flexGrow:0},isDisabled:!0,label:null,isSelected:!1,selectorSize:"large",value:"select_option",selectType:"select"===me.type||J?"radio":"checkbox"}),(0,q.jsx)(W().A,{debugName:"Form question option",capture:re,allowMenuList:!0,allowEsc:!0,allowCopyPaste:!0,allowUndo:!0,children:(0,q.jsx)(E().A,{value:ee,style:{padding:"2px 0px",paddingRight:3,maxWidth:Be?"calc(100% - 50px)":"100%",flexGrow:1,overflowX:"hidden"},focus:re,format:E().C.Transparent,onMouseDown:e=>e.stopPropagation(),onFocus:()=>{Y(!1),ie||b().clear({environment:o})},onClick:()=>ae(!0),onChange:e=>{le(!1);const t=/,/g;t.test(e.target.value)&&v().D6({label:(0,q.jsx)(m().sA,{id:"questionModule.formSelectMultiSelectProperty.commaWarning",defaultMessage:"Commas are currently not supported."})});const o=e.target.value.replace(t,"").trim();te(o)},onKeyDown:e=>{"Backspace"===e.key&&""===ee&&xe()},onBlur:"temporary"===S?Se:Ce,onSubmit:e=>{"temporary"===S?Se():Ce(),r().default.afterNextFlush((()=>{$(!0)}))}})}),Re&&(0,q.jsxs)(q.Fragment,{children:[(0,q.jsx)(H().A,{placement:L().W.Top,textWrap:!0,renderTooltip:()=>(0,q.jsx)(M().ML,{featureAvailability:Te,isAdmin:Pe}),disableTooltip:Ie,render:e=>(0,q.jsx)(O().A,{ref:Ne,style:{width:24,height:24,flexGrow:0,marginRight:3,...Ie&&Le.conditionalButtonBorder},onClick:()=>{if("unavailable"===(null==Te?void 0:Te.type)&&"product"===(null==je?void 0:je.type))F().K(o,{upsell:je,from:"forms_conditional_logic"});else if("available"===(null==Te?void 0:Te.type))return Me()},icon:u().C,iconStyle:{width:16,height:16},ariaLabel:d.formatMessage({defaultMessage:"Add conditional logic",id:"FormMultiSelectProperty.ConditionalLogicIcon.title"}),...e})}),Ie&&(0,q.jsx)(k().O,{buttonRef:Ne})]}),Be&&(0,q.jsx)(O().A,{style:{width:24,height:24,flexGrow:0},iconStyle:{width:18,height:18},onClick:()=>xe(!0),icon:p().trashIcon,ariaLabel:d.formatMessage({defaultMessage:"Delete option",id:"BlockPropertyRouter.FormSelectProperty.TrashIcon.title"})})]})]}):null}const Z=(0,m().YK)({deleteModalWithConditionalLogic:{id:"FormMultiSelectProperty.deleteModalWithConditionalLogic.prompt",defaultMessage:"Are you sure you want to delete this option? The conditional logic that depends on this option will also be removed."}})},477660:(e,t,o)=>{function n(e){switch(null==e?void 0:e.type){case"url":case"email":case"phone_number":return e;default:return}}o.d(t,{z:()=>n})},505108:(e,t,o)=>{o.d(t,{a:()=>g});var n=o(296540),r=()=>o(401497),a=()=>o(534177),i=()=>o(284371),l=()=>o(84817),s=()=>o(819121),c=()=>o(955825),d=o(474848);function u(e){const{disabled:t,checked:o,selectorSize:n}=e,[a,i]=(0,s().A)(),l=function(e){const{checked:t,disabled:o,isFocusVisible:n,selectorSize:a}=e;return(0,r().IS)((e=>({root:{position:"absolute",display:"flex",width:15,height:15,padding:5,margin:1.5,justifyContent:"center",alignItems:"center",gap:8,flexShrink:0,borderRadius:"50%",transition:"background 100ms ease-out",...t?{boxShadow:`0 0 0 1.5px ${o?e.tint.regular:e.blueColor}`,background:o?e.tint.regular:e.blueColor}:{boxShadow:`0 0 0 1.5px ${o?e.icon.quaternary:e.stroke.input}`,background:e.surface.page},...n&&{boxShadow:e.outlineBlueInputBoxShadow}},active:{background:t?e.blueButtonPressedBackground:e.buttonHoveredBackground},input:{opacity:0,width:"small"===a?14:18,height:"small"===a?14:18,...o?{pointerEvents:"none"}:{cursor:"pointer"}}})),[t,o,n,a])}({checked:o,disabled:t,isFocusVisible:i,selectorSize:n});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("input",{ref:a,type:"radio",style:l.input,className:"radio-button",...e}),(0,d.jsx)("span",{...(0,c().AH)("custom-radio-button",l.root,t?{}:{pseudoActive:l.active})})]})}var p=()=>o(554509);const g=n.forwardRef((function(e,t){let{additionalContent:o,description:a,isDisabled:s,isSelected:c,label:u,name:p,onChange:g,width:f="fill",selectorSize:h="normal",selectAlignXAxis:v="left",selectAlignYAxis:b="center",selectType:S="checkbox",style:x,supportText:C,value:M,colorName:k,alignAdditionalContent:_,...A}=e;const w=(0,n.useId)(),I=function(e){const{isSelected:t,isDisabled:o,selectAlignYAxis:n,alignAdditionalContent:a}=e;return(0,r().IS)((e=>{const r=t&&!o?e.blueColor:e.selectorBorderUnselected;return{container:{display:"flex",alignItems:a??"center",gap:12,userSelect:"none",padding:"9px 16px 10px 10px",borderRadius:6,border:`1px solid ${r}`,...!o&&{cursor:"pointer"}},title:{fontWeight:i().Wy.medium,fontSize:14,userSelect:"none",lineHeight:18},additionalContentWrapper:{flexShrink:0},selectorWrapper:{display:"flex",..."top"===n?{marginTop:2}:{}},rightAlignSelectorWrapper:{display:"flex"}}}),[t,o,n,a])}({isSelected:c,isDisabled:s,selectAlignYAxis:b,alignAdditionalContent:_}),P=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===b?"top-left":"center-left",gap:12,width:f,children:[(0,d.jsx)("div",{style:I.selectorWrapper,children:(0,d.jsx)(y,{id:w,selectType:S,name:p,value:M,onChange:g,isSelected:c,selectorSize:h,isDisabled:s,...A})}),(0,d.jsx)(m,{colorName:k,description:a,label:u,selectorSize:h,supportText:C,isDisabled:s})]}),T=(0,d.jsxs)(l().Y1,{direction:"horizontal",align:"top"===b?"top-center":"center",gap:12,children:[(0,d.jsx)(m,{colorName:k,description:a,label:u,selectorSize:h,supportText:C,isDisabled:s}),(0,d.jsx)("div",{style:{...I.selectorWrapper,...I.rightAlignSelectorWrapper},children:(0,d.jsx)(y,{id:w,selectType:S,name:p,value:M,onChange:g,selectorSize:h,isSelected:c,isDisabled:s,...A})})]}),j=o?(0,d.jsx)("div",{style:I.additionalContentWrapper,children:o}):null;return(0,d.jsx)("label",{ref:t,style:{...I.container,...x},htmlFor:w,children:"left"===v?(0,d.jsxs)(d.Fragment,{children:[P,j]}):(0,d.jsxs)(d.Fragment,{children:[j,T]})})}));function m(e){const{description:t,label:o,supportText:n,selectorSize:r,isDisabled:i,colorName:s}=e;let c;return"large"===r?c="Page-Content/Text-Block":"normal"===r||void 0===r?c="Body-13px/Medium":"small"===r?c="Body-12px/Regular":(0,a().HB)(r),(0,d.jsxs)(l().Y1,{gap:4,children:[(0,d.jsxs)(l().Y1,{gap:2,children:[(0,d.jsx)(p().D,{styleName:c,colorName:s||(i?"quaternary":"primary"),children:o}),t?(0,d.jsx)(p().D,{styleName:"Caption-12px/Regular",colorName:i?"quaternary":"secondary",children:t}):null]}),n?(0,d.jsx)(p().D,{styleName:"Caption-12px/Medium",colorName:"tertiary",children:n}):null]})}function y(e){const{selectType:t,selectorSize:n="normal",id:i,name:l,value:s,onChange:c,isSelected:p,isDisabled:g,...m}=e,y=(0,r().IS)((()=>({checkboxWrapper:{minWidth:18,display:"flex",justifyContent:"center"}})),[]);switch(t){case"radio":return(0,d.jsx)(u,{id:i,name:l,value:s,onChange:c,checked:p,disabled:g,selectorSize:n,...m});case"checkbox":return(0,d.jsx)("div",{style:y.checkboxWrapper,children:(0,d.jsx)(o(115562).W,{id:i,name:l,value:s,onChange:c,checked:p,disabled:g,selectorSize:n,...m})});default:(0,a().HB)(t)}}},512397:(e,t,o)=>{o.d(t,{T:()=>i});o(296540);var n=()=>o(35622),r=()=>o(360083),a=o(474848);function i(e){const{imageRef:t,url:o,blockStore:i,environment:l}=e;return e=>{if(e.stopPropagation(),e.preventDefault(),!t.current)return;const s=t.current.getBoundingClientRect(),c=s.width/s.height;n().o9({environment:l,renderFullScreenNode:()=>(0,a.jsx)(r().A,{url:o,isAuthenticated:!0,permissionRecord:i.pointer,width:window.innerWidth,render:(e,t)=>(0,a.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:s,contentAspectRatio:c,imageUrl:o,blockStore:i})}}},519745:(e,t,o)=>{o.d(t,{F:()=>r,n:()=>l});var n=()=>o(963589);const r=Symbol("loading"),a=Object.freeze({recomputeSchedule:{type:"debounce",debounceMs:250,maxWaitMs:500,initialValue:r}}),i=Object.freeze({});function l(){return(0,n().X)("experimental_computed_store_defer_debounce")?a:i}},529854:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("arrowUpDown",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 16.8662C9.89518 16.8662 9.79492 16.848 9.69922 16.8115C9.60807 16.7751 9.52604 16.7181 9.45312 16.6406L5.90527 13.0244C5.75488 12.874 5.67969 12.6986 5.67969 12.498C5.67969 12.2839 5.74577 12.1107 5.87793 11.9785C6.01009 11.8464 6.18099 11.7803 6.39062 11.7803C6.49544 11.7803 6.58887 11.8008 6.6709 11.8418C6.75293 11.8828 6.82585 11.9352 6.88965 11.999L8.33203 13.4756L9.33008 14.6514L9.26855 13.1133V7.01562L9.33008 5.47754L8.33203 6.64648L6.88965 8.12988C6.82585 8.19368 6.75293 8.24609 6.6709 8.28711C6.58887 8.32357 6.49544 8.3418 6.39062 8.3418C6.18099 8.3418 6.01009 8.27799 5.87793 8.15039C5.74577 8.01823 5.67969 7.84277 5.67969 7.62402C5.67969 7.42806 5.75488 7.25488 5.90527 7.10449L9.45312 3.48828C9.52604 3.41081 9.60807 3.35384 9.69922 3.31738C9.79492 3.28092 9.89518 3.2627 10 3.2627C10.0957 3.2627 10.1891 3.28092 10.2803 3.31738C10.376 3.35384 10.4626 3.41081 10.54 3.48828L14.0879 7.10449C14.2383 7.25488 14.3135 7.42806 14.3135 7.62402C14.3135 7.84277 14.2451 8.01823 14.1084 8.15039C13.9762 8.27799 13.8076 8.3418 13.6025 8.3418C13.4977 8.3418 13.4043 8.32357 13.3223 8.28711C13.2402 8.24609 13.165 8.19368 13.0967 8.12988L11.6611 6.64648L10.6562 5.47754L10.7246 7.01562V13.1133L10.6562 14.6514L11.6611 13.4756L13.0967 11.999C13.165 11.9352 13.2402 11.8828 13.3223 11.8418C13.4043 11.8008 13.4977 11.7803 13.6025 11.7803C13.8076 11.7803 13.9762 11.8464 14.1084 11.9785C14.2451 12.1107 14.3135 12.2839 14.3135 12.498C14.3135 12.6986 14.2383 12.874 14.0879 13.0244L10.54 16.6406C10.4626 16.7181 10.376 16.7751 10.2803 16.8115C10.1891 16.848 10.0957 16.8662 10 16.8662Z"})})},548218:(e,t,o)=>{o.d(t,{E:()=>O,V:()=>H});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(672577);var n=()=>o(908006),r=()=>o(716016),a=()=>o(787626),i=()=>o(970013),l=()=>o(713998),s=()=>o(597777),c=()=>o(869190),d=()=>o(604995),u=()=>o(977345),p=()=>o(416504),g=()=>o(72135),m=()=>o(919709),y=()=>o(191772),f=()=>o(496603),h=()=>o(534177),v=()=>o(720665),b=()=>o(319975),S=()=>o(634224),x=()=>o(897119),C=()=>o(780054),M=()=>o(267419),k=()=>o(862292),_=()=>o(989423),A=()=>o(458366),w=()=>o(921855),I=()=>o(476492),P=()=>o(909470),T=()=>o(761408),j=()=>o(972435),R=()=>o(508496),B=()=>o(843141),L=()=>o(299709),N=()=>o(522986),F=()=>o(884107),D=()=>o(620689),V=()=>o(751156);async function O(e){const{environment:t,theme:o,store:n,schema:i,property:c,collectionContextStore:g}=e,f=t.device,b=i[c],S=await F().R.clipboardActions.load();if(b){switch(b.type){case"formula":{const e=await k().T.formulas.load();"v2"===b.version?function(e){const{clipboardActions:t,environment:o,store:n,propertySchema:r,property:a,formulasModule:i}=e,l=n.getModel();if(!r.formula2||!l)return;const s=j().A.getIntl(),c=(0,p().P)(),d=i.evaluateCollectionFormula2({block:l,property:a,formulaCode:r.formula2.code,getRecordModel:n.getRecordModel,intl:s,userTimeZone:c,depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:R().default,collectionFeatureGates:(0,P().i)()});if(!d)return;const g=(0,u().Ht)(d),m=(0,w().r4)(g,n);t.copyString({stringValue:m,environment:o,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}({clipboardActions:S,environment:t,store:n,propertySchema:b,property:c,formulasModule:e}):function(e){var t;const{clipboardActions:o,environment:n,store:r,schema:a,property:i,propertySchema:l,formulasModule:c}=e,d=r.getValue();if(!d)return;const u=c.evaluateFormulaProperty({property:i,schema:a,block:d,getRecordValue:r.getRecordValue,collectionRequestContext:{userId:void 0,userTimeZone:(0,p().P)(),depth:0,intl:j().A.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:R().default,collectionFeatureGates:(0,P().i)()}}),g=null==l||null===(t=l.formula)||void 0===t?void 0:t.result_type;switch(g){case"number":v().Et(u)&&E({clipboardActions:o,value:u,propertySchema:l,environment:n});break;case"date":u&&s().kC(u)&&z({clipboardActions:o,date:u,environment:n});break;case"text":u&&o.copyString({stringValue:u.toString(),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard});break;case"checkbox":case void 0:return;default:(0,h().HB)(g)}}({clipboardActions:S,environment:t,store:n,schema:i,property:c,propertySchema:b,formulasModule:e});break}case"person":{const e=n.getPropertyValue(c);W({actors:l().e5({textValue:e,propertySchema:b,blockCreatorPointer:n.getCreatedByPointer()}),clipboardActions:S,environment:t,store:n});break}case"created_by":{const e=n.getCreatedByPointer();e&&W({actors:[e],clipboardActions:S,environment:t,store:n});break}case"last_edited_by":{const e=n.getLastEditedByPointer();e&&W({actors:[e],clipboardActions:S,environment:t,store:n});break}case"number":E({clipboardActions:S,environment:t,propertySchema:b,value:l().Me(n.getPropertyValue(c))});break;case"text":{const e=n.getPropertyValue(c);if(!e)return;const r=y().$e({textValue:{value:e,spaceId:n.getSpaceId()},getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,disableHover:!1,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,userTimeZone:(0,p().P)(),isClient:!0,isAndroid:f.isAndroid,isSafariOrIOS:f.isSafari||f.isIOS,isWindows:f.isWindows,showEmojiInline:f.isWindows,emojiType:"raw",theme:o,baseUrl:C().A.domainBaseUrl,publicDomainName:C().A.publicDomainName,currentUserId:t.currentUser.id,intl:j().A.getIntl(),katex:void 0,getPublicBaseUrlForPage:void 0,externalIntegrations:[],formulaValueTypes:[],emojiData:M().A.state,isMobileNative:f.isMobileNative,isMobileNativeExternalLinkFixEnabled:R().default.checkGate({gateName:"mobile_native_external_link_fix"})}),a=(0,w().r4)(n.getPropertyValue(c),n);S.copyHtml({stringValue:a,htmlValue:r,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"url":case"email":case"phone_number":{const e=m().k4p(n.getPropertyValue(c));S.copyString({stringValue:e,environment:t,copiedMessage:S.clipboardMessages.copiedPropertyToClipboard});break}case"date":{const e=n.getPropertyValue(c),o=(0,a().b)(e);o&&z({clipboardActions:S,date:o,environment:t,dateFormat:b.date_format,timeFormat:b.time_format});break}case"last_edited_time":case"created_time":{const e=n.getKeyStore(b.type).getValue();if(e){z({clipboardActions:S,date:d().KQ(e,(0,p().P)()),environment:t,dateFormat:b.date_format,timeFormat:b.time_format})}break}case"auto_increment_id":{const e=n.getPropertyValue(c);!function(e){const{clipboardActions:t,value:o,environment:n,collectionContextStore:a}=e;if(o&&a){var i;const e=(null===(i=a.collectionStore())||void 0===i||null===(i=i.getRecordKeyStore())||void 0===i?void 0:i.getRecordKey())??"";t.copyString({stringValue:(0,r().H4)(e,o),environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}({clipboardActions:S,value:l().On(e),environment:t,collectionContextStore:g});break}}(0,B().E)(t,g,{block_id:n.id,property:c,property_type:b.type})}}function W(e){const{actors:t,clipboardActions:o,environment:n,store:r}=e,a=l().AH(t);o.copyString({stringValue:(0,w().r4)(a,r),environment:n,copiedMessage:o.clipboardMessages.copiedPropertyToClipboard})}function E(e){const{clipboardActions:t,value:o,propertySchema:n,environment:r}=e;if(!f().yr(o)&&!v().pN(o)){const e=(null==n?void 0:n.number_format)||g().C4,a=g().ZV(o,e,j().A.getIntl());t.copyString({stringValue:a,environment:r,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}}function z(e){const{clipboardActions:t,date:o,environment:n,dateFormat:r,timeFormat:a}=e,i=(0,c().ZF)({value:o,date_format:r??s().vz,time_format:a??s().CE,allowRelativeDates:!0,intl:j().A.getIntl()});t.copyString({stringValue:i,environment:n,copiedMessage:t.clipboardMessages.copiedPropertyToClipboard})}async function H(e){const{element:t,rect:o,environment:r,onClick:a,store:s,additionalStores:c=[],property:d,format:u,collectionStore:p,blockPropertyValueOverlayStore:g,disableHorizontalEdgeScroll:m,collectionContextStore:y,collectionSchema:f,mouseStore:h,setMouseEntered:v,statusSetCheckbox:C,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,scrollerContext:w,sizing:P,formQuestionStore:R,onClose:B,isDBUXMobileEnabled:F}=e,{device:O,WindowSizeStore:W}=r,E=y&&A().br({store:s,additionalStores:c,collectionContextStore:y});let z=p.getSchema();E&&(z=y.normalizedSchemaStore.state),f&&(z=f);const H=(0,T().L)({collectionStore:p,collectionContextStore:y,property:d}),U=z[H],K=null==U?void 0:U.type;if(!K)return;if(A().F1({property:d,collectionStore:p}))return;const q=s.getPropertyStore(H);if("checkbox"===K)q&&V().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{N().qS({stores:[s,...c],property:H,transaction:e})}}),y&&(0,L().E)({environment:r,collectionContextStore:y,block_id:q.id,property:H,property_type:K,from:A().zP(u),isFromBulkActionsToolbar:Boolean(k)});else if("status"===K&&"status"===U.type&&C){const e=s.getPropertyValue(H),t=l().MC(e,U,j().A.getIntl());q&&V().createAndCommit({userAction:"BlockPropertyValue.handleEditButtonClick",environment:r,canUndo:!0,perform:e=>{const o=U.groups??[],n=!0===t?o[0]:o[o.length-1],a=(U.options??[]).find((e=>{var t;return e.id===(null==n||null===(t=n.optionIds)||void 0===t?void 0:t[0])}));if(a)for(const t of[s,...c])b().R9({environment:r,store:t.getPropertyStore(H),value:l().wb(a.value),transaction:e})}})}else{if(-1===i().dA.indexOf(K)){null==v||v(!1),h&&h.setState({...h.state,mouseEntered:!1});const e=F?S().w1:S().Hp;if(t&&w&&O.isMobileNative&&e[K]===x().nl.Popup&&(D().hT({element:t,environment:r,scrollerContext:w,vertical:{reveal:"bottom",paddingToTopEdge:4,paddingToBottomEdge:W.getSafePaddingBottomPx(320)},horizontal:{reveal:"closest"}}),await n().default.afterNextFlush()),N().ho({environment:r,blockPropertyValueOverlayStore:g,store:s,additionalStores:c,property:H,format:u,rect:o,disableHorizontalEdgeScroll:m,collectionContextStore:y,collectionSchema:f,preventClearSelection:M,collectionsBulkActionsToolbarStore:k,sizing:P,formQuestionStore:R,onClose:B}),y){const e=(0,I().sl)(y)||{};_().vd(r,"collection_open_block_property_overlay",{property:H,property_type:K,property_context:void 0,from:A().zP(u),isFromBulkActionsToolbar:Boolean(k),...e})}}}a&&a()}},555439:(e,t,o)=>{o.d(t,{_:()=>a});var n=()=>o(645873);const r=new(n().O2)("FilePropertyModule",(async()=>await o.e(5938).then(o.bind(o,637360)))),a=(0,n()._h)(r,(e=>e.FilePropertyModule))},563015:(e,t,o)=>{o.d(t,{eJ:()=>y,ew:()=>m,ml:()=>d,rA:()=>p,yI:()=>g,zf:()=>u});o(581454);var n=()=>o(496603),r=()=>o(534177),a=()=>o(708685),i=()=>o(145076),l=()=>o(349835),s=()=>o(977345);function c(e){switch(e){case"checkbox":return"boolean";case"number":return"number";case"text":return"text";case"date":return"date";case"array":return"array";case"block":return"block";case"person":return"person";case"select":return"select";case"function":return"function";case"unknown":return"unknown";case"undefined":return"undefined";default:(0,r().HB)(e)}}function d(e){switch(e.type){case l().M9.InvalidCharacter:return{...i().x0.InvalidCharacter,values:{errorCharacter:e.character}};case l().M9.UnclosedStringLiteral:return i().x0.UnclosedStringLiteral;case l().M9.UnclosedComment:return i().x0.UnclosedComment;case l().M9.TokenExpected:return{...i().x0.TokenExpected,values:{expectedToken:e.token}};case l().M9.StringLiteralContainsToken:return i().x0.StringLiteralContainsToken;case l().M9.ExpressionExpected:return i().x0.ExpressionExpected;case l().M9.PropertyTokenOrFunctionExpected:return i().x0.PropertyTokenOrFunctionExpected;case l().M9.EndOfInputExpected:return i().x0.EndOfInputExpected;case l().M9.UnexpectedError:return i().x0.UnexpectedError;case l().M9.TooDeeplyNested:return i().x0.TooDeeplyNested;default:(0,r().HB)(e)}}function u(e){switch(e.type){case l().IA.FunctionCallArgumentWrongType:case l().IA.FunctionCallUnexpectedArgument:return e.argument;default:return e.node}}function p(e,t){let o;switch(t.type){case l().IA.ThisRowTypeNotFound:o=i().Xz.ThisRowTypeNotFound;break;case l().IA.ThisRowNotBlockWithCollection:o=i().Xz.ThisRowNotBlockWithCollection;break;case l().IA.MissingPropertyOnThisRow:o={...i().Xz.MissingPropertyOnThisRow,values:{propertyName:t.property}};break;case l().IA.MissingContextVariable:{const e=(0,s().ix)(t.token)?t.token.contextValueId:t.token.valueId;o={...i().Xz.MissingContextVariable,values:{valueId:e}}}break;case l().IA.MissingBlock:o={...i().Xz.MissingBlock,values:{blockId:t.token.blockId}};break;case l().IA.CallingNotFunction:o={...i().Xz.CallingNotFunction,values:{expressionType:c(t.callee.type.type)}};break;case l().IA.FunctionCallTooFewArguments:o={...i().Xz.FunctionCallTooFewArguments,values:{minNumParameters:t.minNumParameters,functionName:t.libraryFunction.name,numArguments:t.numArguments}};break;case l().IA.FunctionCallUnexpectedArgument:o={...i().Xz.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().IA.FunctionCallArgumentWrongType:o={...i().Xz.FunctionCallArgumentWrongType,values:{argumentType:c(t.argument.type.type),functionName:t.libraryFunction.name}};break;case l().IA.MemberPropertyMismatchCollection:o={...i().Xz.MemberPropertyMismatchCollection,values:{propertyName:t.token.property}};break;case l().IA.MemberPropertyMissing:o={...i().Xz.MemberPropertyMissing,values:{propertyName:t.property}};break;case l().IA.MemberPropertyTargetNotBlock:o=i().Xz.MemberPropertyTargetNotBlock;break;case l().IA.MemberPropertyTypeInvalid:o={...i().Xz.MemberPropertyTypeInvalid,values:{propertyName:t.propertyName,propertyType:t.propertyType}};break;case l().IA.UndefinedIdentifier:o={...i().Xz.UndefinedIdentifier,values:{identifier:t.node.text}};break;case l().IA.UnifiedFunctionCannotFindFunction:o={...i().Xz.UnifiedFunctionCannotFindFunction,values:{functionName:t.name}};break;case l().IA.UnifiedFunctionNoArguments:o={...i().Xz.UnifiedFunctionNoArguments,values:{functionName:t.libraryFunction.name}};break;case l().IA.UnifiedFunctionTargetWrongType:o={...i().Xz.UnifiedFunctionTargetWrongType,values:{functionName:t.libraryFunction.name,targetType:c(t.expression.type.type)}};break;case l().IA.CannotRelativelyCompareTypes:o={...i().Xz.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().IA.CannotDoMathOnType:o={...i().Xz.CannotDoMathOnType,values:{lhsType:c(t.lhsType.type),rhsType:c(t.rhsType.type)}};break;case l().IA.UnaryMinusOnNonNumber:o={...i().Xz.UnaryMinusOnNonNumber,values:{type:c(t.expression.type.type)}};break;case l().IA.IdentifierExpected:o=i().Xz.IdentifierExpected;break;case l().IA.FunctionCallExpected:o={...i().Xz.FunctionCallExpected,values:{functionName:t.functionName}};break;case l().IA.RenamedIdentifier:o={...i().Xz.RenamedIdentifier,values:{identifier:t.identifier,renamedTo:t.renamedTo}};break;case l().IA.RemovedFunction:o={...i().Xz.RemovedFunction,values:{functionName:t.functionName,alternative:t.alternative}};break;case l().IA.ContextVariableNotBlockWithCollection:o={...i().Xz.ContextVariableNotBlockWithCollection,values:{valueId:t.token.contextValueId}};break;case l().IA.MissingPropertyOnContextVariable:o={...i().Xz.MissingPropertyOnContextVariable,values:{propertyName:t.property,valueId:t.token.contextValueId}};break;case l().IA.BlockPropertyTypeInvalid:o={...i().Xz.BlockPropertyTypeInvalid,values:{propertyName:t.propertyName}};break;case l().IA.DisallowedReturnType:{const n=t.allowedReturnTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().Xz.DisallowedReturnType,values:{allowedReturnType:e.formatList(n,{style:"long",type:"conjunction"}),allowedReturnTypeCount:t.allowedReturnTypes.length,returnType:e.formatMessage((0,a().getHumanReadableType)(t.returnType)).toLocaleLowerCase()}};break}case l().IA.CrossSpacePropertyNotSupported:o={...i().Xz.CrossSpacePropertyNotSupported};break;default:(0,r().HB)(t)}return{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}}function g(e,t){let o;switch(t.type){case l().uW.MissingThisRow:o=i().X8.MissingThisRow;break;case l().uW.MissingSchemaPropertyOnThisRow:o={...i().X8.MissingSchemaPropertyOnThisRow,values:{propertyName:t.property}};break;case l().uW.ThisRowBlockPropertyMismatchCollection:o=i().X8.ThisRowBlockPropertyMismatchCollection;break;case l().uW.MissingContextVariable:o={...i().X8.MissingContextVariable,values:{valueId:t.valueId}};break;case l().uW.IdentifierNotFound:o={...i().X8.IdentifierNotFound,values:{identifier:t.node.text}};break;case l().uW.CannotRelativelyCompareTypes:o={...i().X8.CannotRelativelyCompareTypes,values:{lhsType:c(t.lhsType),rhsType:c(t.rhsType)}};break;case l().uW.CannotDoMathOnType:o={...i().X8.CannotDoMathOnType,values:{valueType:c(t.valueType)}};break;case l().uW.CannotCallNonFunction:o={...i().X8.CannotCallNonFunction,values:{calleeType:c(t.calleeType)}};break;case l().uW.UnifiedFunctionPropertyNotFound:o={...i().X8.UnifiedFunctionPropertyNotFound,values:{functionName:t.node.name}};break;case l().uW.LibraryFunctionExecutionError:const n=t.error instanceof l().x4?t.error:void 0;o=(null==n?void 0:n.info.type)===l().v3.DateInvalidDurationUnit?{...i().gW.DateInvalidDurationUnit,values:{functionName:t.libraryFunction.name,invalidUnit:n.info.invalidUnit}}:(null==n?void 0:n.info.type)===l().v3.CannotUseToNumberOnList?{...i().gW.CannotUseToNumberOnList}:(null==n?void 0:n.info.type)===l().v3.CannotRoundToNonInteger?{...i().gW.CannotRoundToNonInteger,values:{precision:n.info.precision}}:(null==n?void 0:n.info.type)===l().v3.CannotRoundToTooManyDecimalPlaces?{...i().gW.CannotRoundToTooManyDecimalPlaces,values:{precision:n.info.precision}}:{...i().X8.LibraryFunctionExecutionError,values:{functionName:t.libraryFunction.name}};break;case l().uW.FunctionCallTooFewArguments:o={...i().X8.FunctionCallTooFewArguments,values:{functionName:t.libraryFunction.name}};break;case l().uW.FunctionCallUnexpectedArgument:o={...i().X8.FunctionCallUnexpectedArgument,values:{functionName:t.libraryFunction.name}};break;case l().uW.FunctionCallArgumentWrongType:o={...i().X8.FunctionCallArgumentWrongType,values:{functionName:t.libraryFunction.name,argumentType:c(t.argumentType)}};break;case l().uW.AccessingPropertyOnNonBlock:o=i().X8.AccessingPropertyOnNonBlock;break;case l().uW.MissingDataDependencyBlock:o={...i().X8.MissingDataDependencyBlock,values:{blockId:t.blockPointer.id}};break;case l().uW.MissingDataDependencyPerson:o={...i().X8.MissingDataDependencyPerson,values:{personId:t.personPointer.id}};break;case l().uW.MemberPropertyMismatchCollection:o=i().X8.MemberPropertyMismatchCollection;break;case l().uW.MissingPropertyOnSchemaForMemberProperty:o=i().X8.MissingPropertyOnSchemaForMemberProperty;break;case l().uW.UnaryMinusOnNonNumber:o={...i().X8.UnaryMinusOnNonNumber,values:{expressionType:c(t.expressionType)}};break;case l().uW.UnexpectedRecoveryNode:o=i().X8.UnexpectedRecoveryNode;break;case l().uW.UnexpectedError:o=i().X8.UnexpectedError;break;case l().uW.DepthExceeded:o=i().X8.DepthExceeded;break;case l().uW.CycleDetected:o=i().X8.CycleDetected;break;case l().uW.DownstreamParseFailure:o=i().X8.DownstreamParseFailure;break;case l().uW.MaxEvaluationTimeExceeded:o=i().X8.MaxEvaluationTimeExceeded;break;case l().uW.MissingSchemaPropertyOnCollection:o={...i().X8.MissingSchemaPropertyOnCollection,values:{collectionId:t.collectionId,propertyName:t.property}};break;case l().uW.ContextVariableWrongType:o={...i().X8.ContextVariableWrongType,values:{expectedType:t.expectedType,propertyType:t.resultType,valueId:t.valueId}};break;case l().uW.DisallowedValueType:{const n=t.allowedValueTypes.map((t=>e.formatMessage((0,a().getHumanReadableType)(t)).toLocaleLowerCase()));o={...i().Xz.DisallowedReturnType,values:{allowedValueType:e.formatList(n,{style:"long",type:"conjunction"}),allowedValueTypeCount:t.allowedValueTypes.length,valueType:e.formatMessage((0,a().getHumanReadableValueType)(t.expressionValue)).toLocaleLowerCase()}};break}default:(0,r().HB)(t)}return(0,s().li)(t)?{...o,values:{...o.values,startOffset:t.node.startOffset,endOffset:t.node.endOffset+1}}:o}function m(e){const t=null==e?void 0:e.values;return[n().cJ(e,"values"),t]}function y(e){return e.type===l().uW.DepthExceeded||e.type===l().uW.CycleDetected||e.type===l().uW.MaxEvaluationTimeExceeded||e.type===l().uW.LibraryFunctionExecutionError}},565040:(e,t,o)=>{o.d(t,{C:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M16.837 5.797a.625.625 0 0 0 0-.884l-2.475-2.475a.625.625 0 0 0-.883.884l1.41 1.41h-2.917A4.63 4.63 0 0 0 8.7 6.089L6.404 8.386c-.63.63-1.485.986-2.377.99H2.595a.625.625 0 0 0 0 1.25h1.432a3.38 3.38 0 0 1 2.377.988L8.7 13.912a4.63 4.63 0 0 0 3.272 1.355h2.917l-1.41 1.411a.625.625 0 1 0 .883.884l2.475-2.475a.625.625 0 0 0 0-.884l-2.475-2.475a.625.625 0 1 0-.883.884l1.405 1.405h-2.912a3.38 3.38 0 0 1-2.388-.989L7.288 10.73a4.6 4.6 0 0 0-.95-.73c.344-.2.664-.444.95-.73l2.296-2.298a3.38 3.38 0 0 1 2.388-.99h2.912l-1.405 1.406a.625.625 0 1 0 .883.884z"})},r=(0,o(340498).wt)("arrowsDivergeRight",n)},573451:(e,t,o)=>{o.d(t,{C:()=>r});var n=()=>o(945895);function r(e){const{store:t,transient:o}=e;n().A.setState({isActive:!0,store:t,transient:Boolean(o)})}},591872:(e,t,o)=>{o.d(t,{o:()=>s});o(16280),o(296540);var n=()=>o(847249),r=()=>o(959013),a=()=>o(534177),i=()=>o(763870),l=o(474848);function s(e){let{collectionStore:t,propertyId:o,propertySchema:s,style:c}=e;const d=(0,i().i)({collectionStore:t,propertyId:o,propertySchema:s}),u=(0,n().K8)((()=>{if(!d)return null;const{role:e}=d,t=s.name;switch(e){case"editor":return(0,l.jsx)(r().sA,{id:"PersonPropertyPermissionsBadge.tooltipText.editor",defaultMessage:"Anyone selected in {propertyName} has full access to this page",values:{propertyName:t}});case"read_and_write":return(0,l.jsx)(r().sA,{id:"PersonPropertyPermissionsBadge.tooltipText.readAndWrite",defaultMessage:"Anyone selected in {propertyName} can edit this page",values:{propertyName:t}});case"reader":return(0,l.jsx)(r().sA,{id:"PersonPropertyPermissionsBadge.tooltipText.reader",defaultMessage:"Anyone selected in {propertyName} can view this page",values:{propertyName:t}});case"comment_only":return(0,l.jsx)(r().sA,{id:"PersonPropertyPermissionsBadge.tooltipText.commentOnly",defaultMessage:"Anyone selected in {propertyName} can comment on this page",values:{propertyName:t}});case"content_only_editor":case"membership_admin":case"none":throw new Error(`Unhandled role in person property permissions badge: ${e}`);default:(0,a().HB)(e)}}),[d,s.name]);return u?(0,l.jsx)("span",{style:c,children:u}):null}},596359:(e,t,o)=>{o.d(t,{Uk:()=>u,gc:()=>p,r$:()=>m});o(944114),o(898992),o(354520),o(672577),o(430670),o(581454);var n=()=>o(970013),r=()=>o(183558),a=()=>o(831566),i=()=>o(519839),l=()=>o(972435),s=()=>o(630116),c=()=>o(901389),d=()=>o(751156);function u(e){const{modification:t,property:o,propertySchema:i,options:u,groupIndex:p,environment:m,collectionStore:y,isCollectionsStatusMissingOptionsFixEnabled:f}=e;let h,v;if("keyedObjectListRemove"===t.type)h={pointer:y.pointer,command:"keyedObjectListRemove",path:["schema",o,"options"],args:{remove:{id:t.id}}},void 0!==p&&"status"===i.type&&(v={pointer:y.pointer,command:"listRemove",path:["schema",o,"groups",p,"optionIds"],args:{id:t.id}});else{if(u){if(u.find((e=>e.value===t.newValue)))return void c().f1(l().A.formatMessage(g.optionAlreadyExists))}if("keyedObjectListUpdate"===t.type)h={pointer:y.pointer,command:"keyedObjectListUpdate",path:["schema",o,"options"],args:{value:{...t.option,value:t.newValue}}};else{const e=i.options||[];let a=(0,n().Zd)(e);if("status"===i.type&&void 0!==p){var b;const e=null===(b=i.groups)||void 0===b||null===(b=b[p])||void 0===b?void 0:b.color;e&&(a=e)}const l={id:(0,r().Ay)(),value:t.newValue,color:a};if("autoSortInsert"===t.type){if(!(0,n().lx)(i))return;h=(0,n().og)({collectionId:y.id,property:o,propertySchema:i,newOption:l,isAscending:"alphabetical"===i.auto_sort_options})}else"keyedObjectListBefore"===t.type?(h={pointer:y.pointer,command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:l,before:t.beforeOption}},void 0!==p&&"status"===i.type&&(v={pointer:y.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}})):"keyedObjectListAfter"===t.type&&(h={pointer:y.pointer,command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:l,after:t.afterOption}},void 0!==p&&"status"===i.type&&(v={pointer:y.pointer,command:"listBefore",path:["schema",o,"groups",p,"optionIds"],args:{id:l.id}}))}}(0,a().p)({environment:m,collectionStore:y,performTransaction:e=>{if(d().applyOperation({store:y,operation:h,transaction:e}),v&&d().applyOperation({store:(0,s().Oo)(y,v.pointer),operation:v,transaction:e}),"status"===i.type&&f){const t=i.options??[],n=(i.groups??[]).flatMap((e=>e.optionIds)),r=t.filter((e=>!n.includes(e.id)));for(const a of r)d().applyOperation({store:(0,s().Oo)(y,y.pointer),operation:{pointer:y.pointer,command:"listBefore",path:["schema",o,"groups",0,"optionIds"],args:{id:a.id}},transaction:e})}}})}function p(e){const{newValues:t,property:o,schema:r,collectionStore:l,environment:c,isCollectionsStatusMissingOptionsFixEnabled:u}=e,p=r[o];let g;if("status"===(null==p?void 0:p.type)){g=[[]];for(const e of t)e.startsWith("group-header-")?g.push([]):g[g.length-1].push(e);if(u){const e=((null==p?void 0:p.options)??[]).filter((e=>!t.includes(e.value)));g[0].push(...e.map((e=>e.value)))}}else g=t;const m=(0,i().os)({newOptions:g,collectionId:l.id,property:o,schema:r});if(m){if(p&&(0,n().lx)(p)){"manual"!==(p.auto_sort_options||"manual")&&m.push({pointer:l.pointer,command:"update",path:["schema",o],args:{auto_sort_options:"manual"}})}(0,a().p)({environment:c,collectionStore:l,performTransaction:e=>{for(const t of m)d().applyOperation({store:(0,s().Oo)(l,t.pointer),operation:t,transaction:e})}})}}const g=(0,o(959013).YK)({deleteModalPrompt:{id:"database.selectPropertyOptionEditMenu.deleteModal.prompt",defaultMessage:"Are you sure you want to delete this option?"},acceptButtonLabel:{id:"database.selectPropertyOptionEditMenu.deleteModal.confirmButton",defaultMessage:"Delete"},preventDefaultStatusOptionDelete:{defaultMessage:"Cannot delete default option.",id:"database.editProperty.errorDialog.forbidDeleteDefaultOption.message"},optionAlreadyExists:{defaultMessage:"Option already exists.",id:"database.optionExistsAlreadyError.message"}});function m(e){const{option:t,propertySchema:o,property:r,collectionStore:a,statusGroup:i,environment:s,deleteMessage:d}=e;"status"!==o.type||t.value!==o.defaultOption?c().ui({showCancel:!0,keepFocus:!1,message:d??l().A.formatMessage(g.deleteModalPrompt),items:[{label:l().A.formatMessage(g.acceptButtonLabel),color:"red",onAccept:()=>{if((0,n().lx)(o)||"status"===o.type)if("status"===o.type&&i){const e=(o.groups??[]).findIndex((e=>e.id===i.id));u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a,groupIndex:e})}else u({modification:{type:"keyedObjectListRemove",id:t.id},property:r,propertySchema:o,environment:s,collectionStore:a})}}]}):c().f1(l().A.formatMessage(g.preventDefaultStatusOptionDelete))}},671891:(e,t,o)=>{o.d(t,{l:()=>r});var n=()=>o(847249);function r(e){const t=(0,n().K8)((()=>function(e){if(!e)return;const t=null==e?void 0:e.getAssociatedCollectionStore();return null==t?void 0:t.getLayoutStore()}(e)),[e]);return t}},675592:(e,t,o)=>{o.d(t,{DV:()=>s,PD:()=>l,Pr:()=>r,UB:()=>c,Wm:()=>i,Z6:()=>a});var n=o(296540);const r=n.createContext(void 0);r.displayName="ColumnVirtualizerContext";const a=n.createContext(!1);a.displayName="ColumnVirtualizerExistenceContext";const i=n.createContext({propertiesInRange:[],propertiesInRangeIndices:[],beforeWidth:0,afterWidth:0});function l(){return(0,n.useContext)(r)}function s(){return(0,n.useContext)(a)}function c(){return(0,n.useContext)(i)}i.displayName="ColumnVirtualizerVisiblePropertiesContext"},677195:(e,t,o)=>{o.d(t,{R:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,n.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},714574:(e,t,o)=>{o.d(t,{P:()=>r});var n=()=>o(996494);function r(e){const{store:t}=e;"new"===n().A.state.editMode&&n().A.state.store.id===t.id&&n().A.reset()}},722372:(e,t,o)=>{o.d(t,{SE:()=>y,Y9:()=>C,cx:()=>b,fp:()=>h,jA:()=>v,o_:()=>S,rv:()=>M,zI:()=>x,zY:()=>g});var n=()=>o(148307),r=()=>o(67657),a=()=>o(597777),i=()=>o(869190),l=()=>o(72135),s=()=>o(959013),c=()=>o(496603),d=()=>o(534177),u=()=>o(972435);const p=(0,s().YK)({show_unique:{defaultMessage:"Show unique values",id:"database.aggregationFullName.unique_values"},count:{defaultMessage:"Count all",id:"database.aggregationFullName.count"},count_values:{defaultMessage:"Count values",id:"database.aggregationFullName.count_values"},unique:{defaultMessage:"Count unique values",id:"database.aggregationFullName.unique"},empty:{defaultMessage:"Count empty",id:"database.aggregationFullName.empty"},not_empty:{defaultMessage:"Count not empty",id:"database.aggregationFullName.not_empty"},percent_empty:{defaultMessage:"Percent empty",id:"database.aggregationFullName.percent_empty"},percent_not_empty:{defaultMessage:"Percent not empty",id:"database.aggregationFullName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationFullName.sum"},average:{defaultMessage:"Average",id:"database.aggregationFullName.average"},median:{defaultMessage:"Median",id:"database.aggregationFullName.median"},min:{defaultMessage:"Min",id:"database.aggregationFullName.min"},max:{defaultMessage:"Max",id:"database.aggregationFullName.max"},range:{defaultMessage:"Range",id:"database.aggregationFullName.range"},earliest_date:{defaultMessage:"Earliest date",id:"database.aggregationFullName.earliest_date"},latest_date:{defaultMessage:"Latest date",id:"database.aggregationFullName.latest_date"},date_range:{defaultMessage:"Date range",id:"database.aggregationFullName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationFullName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationFullName.unchecked"},percent_checked:{defaultMessage:"Percent checked",id:"database.aggregationFullName.percent_checked"},percent_unchecked:{defaultMessage:"Percent unchecked",id:"database.aggregationFullName.percent_unchecked"},count_per_group:{defaultMessage:"Count per group",id:"database.aggregationFullName.count_per_group"},percent_per_group:{defaultMessage:"Percent per group",id:"database.aggregationFullName.percent_per_group"},count_aggregations:{defaultMessage:"Count",id:"database.aggregationBucket.count"},percent_aggregations:{defaultMessage:"Percent",id:"database.aggregationBucket.percent"},statistics_aggregations:{defaultMessage:"More options",id:"database.aggregationBucket.more_options"},date_aggregations:{defaultMessage:"Date",id:"database.aggregationBucket.dateGroupingLabel"}}),g={count:u().A.formatMessage(p.count),count_values:u().A.formatMessage(p.count_values),unique:u().A.formatMessage(p.unique),show_unique:u().A.formatMessage(p.show_unique),empty:u().A.formatMessage(p.empty),not_empty:u().A.formatMessage(p.not_empty),percent_empty:u().A.formatMessage(p.percent_empty),percent_not_empty:u().A.formatMessage(p.percent_not_empty),sum:u().A.formatMessage(p.sum),average:u().A.formatMessage(p.average),median:u().A.formatMessage(p.median),min:u().A.formatMessage(p.min),max:u().A.formatMessage(p.max),range:u().A.formatMessage(p.range),earliest_date:u().A.formatMessage(p.earliest_date),latest_date:u().A.formatMessage(p.latest_date),date_range:u().A.formatMessage(p.date_range),checked:u().A.formatMessage(p.checked),unchecked:u().A.formatMessage(p.unchecked),percent_checked:u().A.formatMessage(p.percent_checked),percent_unchecked:u().A.formatMessage(p.percent_unchecked),count_per_group:u().A.formatMessage(p.count_per_group),percent_per_group:u().A.formatMessage(p.percent_per_group)},m=(0,s().YK)({count:{defaultMessage:"Count",id:"database.aggregationShortName.count"},count_values:{defaultMessage:"Values",id:"database.aggregationShortName.count_values"},unique:{defaultMessage:"Unique",id:"database.aggregationShortName.unique"},show_unique:{defaultMessage:"Show unique",id:"database.aggregationShortName.showUnique"},empty:{defaultMessage:"Empty",id:"database.aggregationShortName.empty"},not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.not_empty"},percent_empty:{defaultMessage:"Empty",id:"database.aggregationShortName.percent_empty"},percent_not_empty:{defaultMessage:"Not Empty",id:"database.aggregationShortName.percent_not_empty"},sum:{defaultMessage:"Sum",id:"database.aggregationShortName.sum"},average:{defaultMessage:"Average",id:"database.aggregationShortName.average"},median:{defaultMessage:"Median",id:"database.aggregationShortName.median"},min:{defaultMessage:"Min",id:"database.aggregationShortName.min"},max:{defaultMessage:"Max",id:"database.aggregationShortName.max"},range:{defaultMessage:"Range",id:"database.aggregationShortName.range"},earliest_date:{defaultMessage:"Earliest",id:"database.aggregationShortName.earliest_date"},latest_date:{defaultMessage:"Latest",id:"database.aggregationShortName.latest_date"},date_range:{defaultMessage:"Range",id:"database.aggregationShortName.date_range"},checked:{defaultMessage:"Checked",id:"database.aggregationShortName.checked"},unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.unchecked"},percent_checked:{defaultMessage:"Checked",id:"database.aggregationShortName.percent_checked"},percent_unchecked:{defaultMessage:"Unchecked",id:"database.aggregationShortName.percent_unchecked"},count_per_group:{defaultMessage:"Count",id:"database.aggregationShortName.count_per_group"},percent_per_group:{defaultMessage:"Percent",id:"database.aggregationShortName.percent_per_group"}}),y={count:u().A.formatMessage(m.count),count_values:u().A.formatMessage(m.count_values),unique:u().A.formatMessage(m.unique),show_unique:u().A.formatMessage(m.show_unique),empty:u().A.formatMessage(m.empty),not_empty:u().A.formatMessage(m.not_empty),percent_empty:u().A.formatMessage(m.percent_empty),percent_not_empty:u().A.formatMessage(m.percent_not_empty),sum:u().A.formatMessage(m.sum),average:u().A.formatMessage(m.average),median:u().A.formatMessage(m.median),min:u().A.formatMessage(m.min),max:u().A.formatMessage(m.max),range:u().A.formatMessage(m.range),earliest_date:u().A.formatMessage(m.earliest_date),latest_date:u().A.formatMessage(m.latest_date),date_range:u().A.formatMessage(m.date_range),checked:u().A.formatMessage(m.checked),unchecked:u().A.formatMessage(m.unchecked),percent_checked:u().A.formatMessage(m.percent_checked),percent_unchecked:u().A.formatMessage(m.percent_unchecked),count_per_group:u().A.formatMessage(m.count_per_group),percent_per_group:u().A.formatMessage(m.percent_per_group)},f=(0,s().YK)({count:{defaultMessage:"Counts the total number of pages, including blank pages.",id:"database.aggregationDescription.count"},count_values:{defaultMessage:"Counts the number of non-empty values for this property. For a type that can contain multiple values like multi-select or person, this will count the number of selected values for each page.",id:"database.aggregationDescription.count_values"},unique:{defaultMessage:"Counts the number of unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.unique"},show_unique:{defaultMessage:"Shows the unique values for this property. For a type that can contain multiple values like multi-select or person, this will count the unique values across all pages.",id:"database.aggregationDescription.show_unique"},empty:{defaultMessage:"Counts the number of pages with an empty value for this property.",id:"database.aggregationDescription.empty"},not_empty:{defaultMessage:"Counts the number of pages with a non-empty value for this property.",id:"database.aggregationDescription.not_empty"},percent_empty:{defaultMessage:"Displays the percentage of pages that have an empty value for this property.",id:"database.aggregationDescription.percent_empty"},percent_not_empty:{defaultMessage:"Displays the percentage of pages that have a non-empty value for this property.",id:"database.aggregationDescription.percent_not_empty"},sum:{defaultMessage:"Computes the sum of a numeric property.",id:"database.aggregationDescription.sum"},average:{defaultMessage:"Computes the average of a numeric property.",id:"database.aggregationDescription.average"},median:{defaultMessage:"Finds the median of a numeric property.",id:"database.aggregationDescription.median"},min:{defaultMessage:"Finds the minimum of a numeric property.",id:"database.aggregationDescription.min"},max:{defaultMessage:"Finds the maximum of a numeric property.",id:"database.aggregationDescription.max"},range:{defaultMessage:"Computes the range (maximum - minimum) of a numeric property.",id:"database.aggregationDescription.range"},earliest_date:{defaultMessage:"Finds the earliest date in time of a date property.",id:"database.aggregationDescription.earliest_date"},latest_date:{defaultMessage:"Finds the latest date in time of a date property.",id:"database.aggregationDescription.latest_date"},date_range:{defaultMessage:"Computes the date range (latest date - earliest date) of a date property.",id:"database.aggregationDescription.date_range"},checked:{defaultMessage:"Counts the number of pages with a checked checkbox for this property.",id:"database.aggregationDescription.checked"},unchecked:{defaultMessage:"Counts the number of pages with an unchecked checkbox for this property.",id:"database.aggregationDescription.unchecked"},percent_checked:{defaultMessage:"Displays the percentage of pages that have a checked checkbox for this property.",id:"database.aggregationDescription.percent_checked"},percent_unchecked:{defaultMessage:"Displays the percentage of pages that have an unchecked checkbox for this property.",id:"database.aggregationDescription.percent_unchecked"},count_per_group:{defaultMessage:"Counts the total number of pages that have this Status Group.",id:"database.aggregationDescription.count_per_group"},percent_per_group:{defaultMessage:"Displays the percentage of pages that have this Status Group",id:"database.aggregationDescription.percent_per_group"}}),h={count:u().A.formatMessage(f.count),count_values:u().A.formatMessage(f.count_values),unique:u().A.formatMessage(f.unique),show_unique:u().A.formatMessage(f.show_unique),empty:u().A.formatMessage(f.empty),not_empty:u().A.formatMessage(f.not_empty),percent_empty:u().A.formatMessage(f.percent_empty),percent_not_empty:u().A.formatMessage(f.percent_not_empty),sum:u().A.formatMessage(f.sum),average:u().A.formatMessage(f.average),median:u().A.formatMessage(f.median),min:u().A.formatMessage(f.min),max:u().A.formatMessage(f.max),range:u().A.formatMessage(f.range),earliest_date:u().A.formatMessage(f.earliest_date),latest_date:u().A.formatMessage(f.latest_date),date_range:u().A.formatMessage(f.date_range),checked:u().A.formatMessage(f.checked),unchecked:u().A.formatMessage(f.unchecked),percent_checked:u().A.formatMessage(f.percent_checked),percent_unchecked:u().A.formatMessage(f.percent_unchecked),count_per_group:u().A.formatMessage(f.count_per_group),percent_per_group:u().A.formatMessage(f.percent_per_group)},v={count_aggregations:u().A.formatMessage(p.count_aggregations),percent_aggregations:u().A.formatMessage(p.percent_aggregations),statistics_aggregations:u().A.formatMessage(p.statistics_aggregations),date_aggregations:u().A.formatMessage(p.date_aggregations)},b={count:n().A.images.aggregations.countPng,count_values:n().A.images.aggregations.countValuesPng,unique:n().A.images.aggregations.uniquePng,show_unique:void 0,empty:n().A.images.aggregations.emptyPng,not_empty:n().A.images.aggregations.notEmptyPng,percent_empty:n().A.images.aggregations.percentEmptyPng,percent_not_empty:n().A.images.aggregations.percentNotEmptyPng,sum:n().A.images.aggregations.sumPng,average:n().A.images.aggregations.averagePng,median:n().A.images.aggregations.medianPng,min:n().A.images.aggregations.minPng,max:n().A.images.aggregations.maxPng,range:n().A.images.aggregations.rangePng,earliest_date:n().A.images.aggregations.earliestDatePng,latest_date:n().A.images.aggregations.latestDatePng,date_range:n().A.images.aggregations.dateRangePng,checked:n().A.images.aggregations.checkedPng,unchecked:n().A.images.aggregations.uncheckedPng,percent_checked:n().A.images.aggregations.percentCheckedPng,percent_unchecked:n().A.images.aggregations.percentUncheckedPng,count_per_group:n().A.images.aggregations.countPng,percent_per_group:n().A.images.aggregations.percentCheckedPng};function S(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":return"percent";case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return"number";case"sum":case"average":case"median":case"min":case"max":case"range":return t??"number";default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return"percent";default:(0,d().HB)(e.operator)}}}function x(e,t){switch(e){case"earliest_date":case"show_unique":case"latest_date":case"date_range":case"count":case"empty":case"not_empty":case"unique":case"count_values":case"checked":case"unchecked":return;case"percent_empty":case"percent_not_empty":case"percent_checked":case"percent_unchecked":case"average":return t??"precision_2";case"sum":case"median":case"min":case"max":case"range":return t??void 0;default:switch(e.operator){case"count_per_group":return;case"percent_per_group":return t??"precision_2";default:(0,d().HB)(e.operator)}}}function C(e){const{aggregationType:t,value:o,userTimeZone:n,dateFormat:s,numberPrecision:d}=e;if("date"===o.type){if(!(0,r().Y)(t))return;if(!o.value)return;return"date_range"===t?(0,i().a3)(o.value,n,u().A.getIntl()):(0,i().ZF)({value:a().pp(o.value),date_format:s??a().vz,userTimeZone:n,allowRelativeDates:!0,intl:u().A.getIntl()})}if((0,r().Y)(t))return;if("show_unique"===t)return;if("object"==typeof o.value)return;if("string"==typeof o.value)return o.value;let p;p=void 0===d||"precision_uncapped"===d?void 0===o.value?void 0:c().LI(o.value,5):o.value;const g=S(t,e.numberFormat);return(0,l().ZV)(p,g,u().A.getIntl(),void 0,d)}function M(e){const{aggregation:t,value:o,numberFormat:n,dateFormat:a,numberPrecision:i}=e,l=C({numberFormat:n,dateFormat:a,aggregationType:t?t.aggregator:"count",userTimeZone:e.userTimeZone,value:o,numberPrecision:i});if(null!=t&&t.enforceMaxAggregationLimit){const e=Number(l);if(e&&e>=r().iY)return r().iY-1+"+"}return l}},727395:(e,t,o)=>{o.d(t,{_:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"relation_navigate_block",t)}},729650:(e,t,o)=>{o.d(t,{M:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("collectionInbox",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M11.0918,0 C11.5383,0 11.9307,0.295898 12.0533,0.725586 L13.9615,7.40332 C13.9871,7.49316 14,7.58594 14,7.67871 L14,13 C14,13.5527 13.5522,14 13,14 L1,14 C0.447754,14 0,13.5527 0,13 L0,7.67871 C0,7.58594 0.0129395,7.49316 0.0384521,7.40332 L1.94666,0.725586 C2.06934,0.295898 2.46167,0 2.9082,0 L11.0918,0 Z M4.27271,1.5 C3.83728,1.5 3.45178,1.78223 3.31982,2.19727 L1.91455,6.61328 C1.70947,7.25879 2.1908,7.91699 2.86755,7.91699 L4.70837,7.91699 C4.70837,8.93652 5.16663,10.168 7,10.168 C8.83337,10.168 9.29163,8.93652 9.29163,7.91699 L11.1478,7.89355 C11.8201,7.88477 12.2927,7.22852 12.0876,6.58887 L10.681,2.19531 C10.5485,1.78125 10.1635,1.5 9.72864,1.5 L4.27271,1.5 Z"})})},736230:(e,t,o)=>{o.d(t,{V:()=>r});var n=()=>o(847249);function r(e){let{collectionContextStore:t,blockId:o,property:r,featureEnabled:a=!1}=e;return(0,n().K8)((()=>{if(!(a&&o&&r&&t))return!1;const e=t.virtualizedModule.getBlockHeightsCache();return e&&e.propertyCanExpandStore(o,r).state}),[t,o,r,a])}},738328:(e,t,o)=>{o.d(t,{M:()=>ce});o(944114),o(898992),o(354520),o(581454),o(908872);var n=o(296540),r=()=>o(908006),a=()=>o(484714),i=()=>o(847249),l=()=>o(401497),s=()=>o(66689),c=()=>o(700500),d=()=>o(970013),u=()=>o(713998),p=()=>o(743176),g=()=>o(784892),m=()=>o(729650),y=()=>o(689094),f=o(474848);const h=(0,o(340498).wt)("replace",{viewBox:"0 0 16 16",svg:(0,f.jsx)("path",{d:"M3.26465 3.96094C2.95996 4.26562 2.979 4.66553 3.23291 4.8877C3.49316 5.12256 3.86133 5.12256 4.16602 4.83057C5.11182 3.80225 6.48291 3.15479 8 3.15479C10.6851 3.15479 12.856 5.12891 13.2051 7.66162H12.2466C11.7642 7.66162 11.6309 8.01709 11.9102 8.41064L13.4209 10.5435C13.6494 10.8608 13.9985 10.8608 14.2334 10.5435L15.7441 8.41699C16.0298 8.02344 15.8965 7.66162 15.4077 7.66162H14.519C14.1445 4.44336 11.3516 1.85986 8 1.85986C6.13379 1.85986 4.43262 2.68506 3.26465 3.96094ZM0.249512 8.42334C-0.0297852 8.81689 0.097168 9.17871 0.585938 9.17871H1.4873C1.85547 12.397 4.64844 14.9805 8 14.9805C9.87256 14.9805 11.5737 14.1553 12.748 12.873C13.0464 12.5684 13.0273 12.1685 12.7734 11.9399C12.5132 11.7051 12.1514 11.7114 11.8403 12.0034C10.9009 13.0381 9.52979 13.6855 8 13.6855C5.32129 13.6855 3.14404 11.7178 2.79492 9.17871H3.74707C4.22949 9.17871 4.36279 8.82324 4.0835 8.42969L2.57275 6.29688C2.34424 5.97949 1.99512 5.97949 1.7666 6.29688L0.249512 8.42334Z"})});var v=()=>o(381138),b=()=>o(179034),S=()=>o(919709),x=()=>o(959013),C=()=>o(284371),M=()=>o(970330),k=()=>o(989423);var _=()=>o(846156);var A=()=>o(522986),w=()=>o(27732),I=()=>o(313209),P=()=>o(176072),T=()=>o(44729),j=()=>o(246826),R=()=>o(899453),B=()=>o(870578),L=()=>o(319975),N=()=>o(725614),F=()=>o(751156),D=()=>o(895876),V=()=>o(175116),O=()=>o(86499),W=()=>o(645873);const E=new(W().O2)("RelationPropertyCustomizeLayoutMenu",(async()=>{const{default:e}=await Promise.all([o.e(43380),o.e(92222)]).then(o.bind(o,50651));return{RelationPropertyCustomizeLayoutMenu:e}})),z=(0,W()._h)(E,(e=>e.RelationPropertyCustomizeLayoutMenu));var H=()=>o(458366),U=()=>o(476492),K=()=>o(594794),q=()=>o(478726),X=()=>o(299545),G=()=>o(685889),Q=()=>o(671891),$=()=>o(163194),Y=()=>o(170253),Z=()=>o(970585),J=()=>o(630116),ee=()=>o(41459),te=()=>o(317958),oe=()=>o(704152),ne=()=>o(439264),re=()=>o(939740),ae=()=>o(89924),ie=()=>o(859428),le=()=>o(68350);const se={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0};function ce(e){const t=(0,n.useContext)(V().p2),o=(0,i().uB)(void 0,Z().A),r=(0,i().uB)(void 0,Y().A),[c,p]=(0,n.useState)(10),{schema:v,format:S,locked:C,property:M,collectionStore:A,store:I,disabled:T,visibility:j,isInPeekRenderer:L,topBorder:D,pagePropertiesStore:W,blockPropertyValueOverlayStore:E}=e,z=(0,a().v3)(),U=(0,i().K8)((()=>{const e=v[M];if(!e||"relation"!==e.type)return[];const t=I.getPropertyValue(M);return u().bG({relationValue:u().n(t),propertySchema:e,getRecordModel:I.getRecordModel,includeNoAccess:!0})}),[v,M,I],{useDeepEqual:!0}),K=(0,i().K8)((()=>U.length),[U.length]),G=(0,n.useCallback)(((e,t)=>function(e,t,o,n,r,a,i,l){const s=r[a];if(!s||"relation"!==s.type)return;const c=d().Nv(s);if(!c)return;const p=J().md.createChildStore(i,c);if(!(0,X()._p)(i)||!a)return;const g=i.getPropertyValue(a),m=u().n(g),y=[...e.map((e=>({id:e,spaceId:n.pointer.spaceId,table:b().ev}))),...m.slice(e.length)];fe({newValues:y,oldValues:m},p,i,a,o),(0,_().F)(o,{from:"relation_section"}),P().pl({store:l,focus:{section:0,indexLocal:t.endPosition,indexGlobal:t.endPosition,footerFocused:!1}})}(e,t,z,A,v,M,I,o)),[z,A,v,M,I,o]),$=(0,n.useCallback)(((o,n,r)=>be(o,n,r,z,e.blockPropertyValueOverlayStore,I,M,t,ie)),[t,z,M,e.blockPropertyValueOverlayStore,I]),ie=(0,n.useRef)(null),ce=(0,a().Y0)(),ge=v[M],Se=(0,i().K8)((()=>null==t?void 0:t.permissionScopesStore.state),[t]),xe=(0,i().K8)((()=>{if("relation"===(null==ge?void 0:ge.type)&&t)return ge}),[t,ge]),Ce=(0,i().K8)((()=>{if(!xe)return;const e=d().Nv(xe);return e?J().md.createChildStore(I,e):void 0}),[xe,I]),Me=(0,i().K8)((()=>(null==Ce?void 0:Ce.canEdit())??!1),[Ce]),ke=(0,i().K8)((()=>{const e=A.getSchema()[M];return Boolean(e&&d().UU(e))}),[A,M]),_e=(0,i().K8)((()=>I.canEdit()),[I]),Ae=(0,i().K8)((()=>(0,q().fc)(I)),[I]),we=(0,l().IS)((e=>({addNewRelationButtonWrapper:me(e),addNewRelationButtonIcon:ye(e,ce.isMobile),replacePageSprint:{color:e.text.secondary}})),[ce.isMobile]),Ie=(0,n.useMemo)((()=>U.slice(0,c)),[U,c]),Pe=(0,i().K8)((()=>(null==Ce?void 0:Ce.getFormatStore().getKeyStore("app_config_uri").getValue())===s().av),[Ce]),Te=1===(null==xe?void 0:xe.limit),je=!(ce.isMobile||T||C||Te),Re=(0,Q().l)(I),Be=(0,i().K8)((()=>{var e;return"hide"===(null==Re||null===(e=Re.getFormat())||void 0===e?void 0:e.property_icons_visibility)}),[Re]),Le=(0,n.useCallback)((()=>{Ce&&xe&&(Pe?he(Ce,e.store,e.property,U,z):ke||Te?$(!0):ve(U.length>=c?c:U.length+1,Ce,"relation_section_footer",z,I,M,A,c,p,t,xe))}),[t,A,c,z,$,Te,ke,Pe,M,e.property,e.store,xe,U,I,Ce]),Ne=(0,i().K8)((()=>{if(!Ce||!xe||!A)return[];const e=Ce.getFormatStore().getKeyStore("app_config_uri").getValue()===s().av;return Ie.reduce(((n,r,a)=>{const i=J().Bv.createChildStore(I,r),l=i.getAssociatedCollectionStore(),s=!i.canRead();if((null==l?void 0:l.id)===d().zO(xe)||s){const r={key:i.id,render:n=>{let{ref:r,...l}=n;return(0,f.jsx)(O().q,{...l,canDrag:je&&1!==xe.limit&&I.canEdit(),schema:v,propertySchema:xe,collectionStore:A,collectionId:A.id,targetCollectionStore:Ce,relatedPageStore:i,disabled:T,locked:C,isSelected:!0,pageStore:I,property:M,rowType:"section",onActionButtonClick:()=>function(e,t,o,n,r,a,i,l,s,c){const d=a[i];if("relation"!==(null==d?void 0:d.type)||!c)return;if((0,q().fc)(r))return;const u=d.limit,p=u?[]:e.filter((e=>e.id!==t.id));F().createAndCommit({userAction:"RelationSection.handleRemoveRelationClick",environment:n,canUndo:!0,perform:e=>{w().Iq({store:r,propertyId:i,value:p,environment:n,relatedPageId:t.id,propertySchema:d,transaction:e,collectionContextStore:c,analyticsData:{isFromBulkActionsToolbar:H().pi(l),analyticsFrom:H().zP(ee().j.Page)},isUnthrottled:!1})}}),function(e,t){k().vd(e,"relation_remove_block",t)}(n,{from:"relation_section",collection_id:null==s?void 0:s.id,target_collection_id:null==o?void 0:o.id})}(U,i,Ce,z,I,v,M,E,A,t),onMouseLeave:()=>o.unsetFocus(),onSecondaryButtonClick:()=>ve(a+1,Ce,"relation_section_inline",z,I,M,A,c,p,t,xe),onInsertInline:e?()=>{N().clear({environment:z})}:()=>ve(a+1,Ce,"relation_section_inline",z,I,M,A,c,p,t,xe),onTitleEsc:()=>{var e;!Boolean(null===(e=i.getTitleStore())||void 0===e||null===(e=e.getValue())||void 0===e?void 0:e.length)&&"relation"===xe.type?function(e){const{relatedPageStore:t,environment:o,store:n,property:r}=e;if((0,q().fc)(n))return;F().createAndCommit({userAction:"RelationSection.handleDeleteRelatedPage",environment:o,canUndo:!0,perform:e=>{const a={pointer:t.pointer,command:"update",path:[],args:{alive:!1}};F().applyOperation({store:t,operation:a,transaction:e}),R().zB({environment:o,store:n,propertyId:r,id:t.id,transaction:e})}})}({relatedPageStore:i,environment:z,store:I,property:M}):N().clear({environment:z})},onOpenPageButtonClick:s?void 0:()=>{B().k({relationPointers:U,relatedPageStore:i,environment:z,from:"relation_section_inline"})},index:a+1,propertyLimit:xe.limit})},action:e=>{}};n.push(r)}return n}),[])}),[Ce,xe,A,Ie,I,je,v,T,C,M,U,z,E,t,o,c]);if(!("section_hide"!==j&&xe&&Ce&&t&&Se))return null;if("minimal"===j)return(0,f.jsx)(ue,{property:M,propertySchema:xe,numberOfRelations:K,onHandleOpenProperty:$,onHandleRelationPropertyPageSectionRefMount:e=>{e&&(ie.current=e)},schema:v,format:S,disabled:T,locked:C,canConfigureCollection:Se.canConfigureCollection,blockStore:I,collectionStore:A,collectionContextStore:t,isInPeekRenderer:L,targetCollectionStore:Ce,pagePropertiesStore:W,shouldHideIcon:Be});const Fe=Ne.map((e=>e.key.toString())),De=(0,f.jsx)(re().Ay,{type:re().Oh.Vertical,store:o,initialFocus:void 0,disableKeyboard:!0,style:{width:"100%"},sections:[{key:"section",render:e=>(0,f.jsx)(ae().A,{...e,disableDesktopPadding:!0,disableMobilePadding:!0,disableMobileBorders:!0,children:je?(0,f.jsx)(ne().Ay,{direction:"vertical",keys:Fe,renderKey:t=>e.children[Fe.indexOf(t)],onDrop:G,store:r}):e.children}),items:Ne}]});return(0,f.jsx)(pe,{collectionContextStore:t,isConnectedRelation:ke,title:e.propertyRowName??(0,f.jsx)(le().I,{schema:v,format:S,property:M,blockStore:I,collectionStore:A,disabled:T,locked:C,canConfigureCollection:Se.canConfigureCollection,styleVariants:de,isInPeekRenderer:L,pagePropertiesStore:W,hideIcon:Be}),collectionStore:A,targetCollectionStore:Ce,property:M,showRight:!0,disabled:T,schema:v,format:S,locked:C,canEditTargetCollection:Me,canConfigureCollection:Se.canConfigureCollection,canEditCurrentPage:_e,handleMouseMove:e.handleMouseMove,onHandleOpenProperty:()=>{be(!1,void 0,void 0,z,E,I,M,t,ie)},onHandleRelationPropertyPageSectionRefMount:e=>{e&&(ie.current=e)},onTitleEnter:()=>ve(void 0,Ce,"relation_section_inline",z,I,M,A,c,p,t,xe),handleClearProperty:()=>he(Ce,I,M,U,z),topBorder:D,children:(0,f.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexWrap:"wrap",flexDirection:"column",width:"100%",...ce.isMobile&&{paddingLeft:"none"}},onMouseMove:e.handleMouseMove,onMouseLeave:e.handleMouseLeave,children:[De,U.length>c&&(0,f.jsx)(oe().A,{style:{width:"100%",display:"flex",alignItems:"center",borderRadius:3,fontSize:14,minHeight:30,margin:0,padding:"6px 8px 7px 8px"},onClick:()=>p(c+10),children:(0,f.jsx)(te().A,{count:U.length-c,format:g().NY.Medium,style:{margin:void 0},fixedHeight:!1,isCompact:!1})}),Me&&_e&&!C&&!Ae&&(0,f.jsx)(oe().A,{style:we.addNewRelationButtonWrapper,onClick:Le,disabled:T||C,children:0===K?(0,f.jsxs)(f.Fragment,{children:[(0,y().W)({...we.addNewRelationButtonIcon,marginLeft:6,marginRight:6}),(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"})]}):(0,f.jsxs)(f.Fragment,{children:[Pe?(0,m().M)({width:16,height:16,marginRight:11,marginTop:1,marginLeft:4,fill:"#868682"}):1===xe.limit?h(we.addNewRelationButtonIcon):(0,y().W)(we.addNewRelationButtonIcon),(0,f.jsxs)("div",{style:se,children:[Pe&&(0,f.jsx)("span",{style:we.replacePageSprint,children:(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.button.replacePageSprint",defaultMessage:"Move to backlog"})}),!Pe&&(1===xe.limit?(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.button.replacePage",defaultMessage:"Replace"}):(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.button.addPage",defaultMessage:"New"}))]})]})})]})},M)}const de={width:{variant:"hug-content"},height:{variant:"small"},fontWeight:"medium",size:"small"};function ue(e){const{property:t,propertySchema:o,numberOfRelations:r,schema:a,format:c,disabled:d,locked:u,canConfigureCollection:g,blockStore:m,collectionStore:y,onHandleOpenProperty:h,onHandleRelationPropertyPageSectionRefMount:v,isInPeekRenderer:b,targetCollectionStore:S,pagePropertiesStore:M,shouldHideIcon:k}=e,_=(0,l().IS)((e=>({hoverButton:{display:"flex",alignItems:"baseline",justifyContent:"normal",color:e.text.secondary,width:"100%"},minimalButton:{display:"flex",alignItems:"center",flexShrink:0,whiteSpace:"nowrap",height:28,borderRadius:4,fontSize:14,lineHeight:1.2,minWidth:0,paddingLeft:6,paddingRight:8,fontWeight:C().Wy.regular,color:e.text.tertiary},minimalButtonWrapper:{width:"100%",maxWidth:"100%",fontWeight:C().Wy.regular,color:e.text.tertiary},iconStyle:{width:14,height:14,fill:e.lightIconColor,marginRight:6,alignItems:"baseline"},minmalButtonLabelStyle:{...C().RC}})),[]),A=(0,l().DP)(),w=(0,n.useCallback)((e=>{d||u||!g||(e.preventDefault(),M.setState({...M.state,openProperty:{property:t,isInPeekRenderer:b}}))}),[d,u,g,M,t,b]),I=(0,n.useCallback)((e=>{h(!0)}),[h]),P=(0,n.useMemo)((()=>({size:"medium",fontWeight:"regular",width:{variant:"hug-content",maxWidthDesktop:300,maxWidthMobile:300}})),[]),T=(0,n.useCallback)((()=>{M.setState({...M.state,hoveredProperty:t})}),[t,M]),j=(0,n.useCallback)((()=>{M.setState({...M.state,hoveredProperty:void 0})}),[M]),R=(0,i().K8)((()=>S.getFormatStore().getKeyStore("app_config_uri").getValue()),[S]),B=(0,D().$O)(s().av),L=(0,D().oj)(s().av);return(0,f.jsx)("div",{style:_.hoverButton,onMouseMove:T,onMouseLeave:j,children:(0,f.jsx)(le().I,{schema:a,format:c,property:t,blockStore:m,collectionStore:y,disabled:d,locked:u,canConfigureCollection:g,styleVariants:P,pagePropertiesStore:M,labelComponent:(0,f.jsx)("div",{ref:v,style:_.minimalButtonWrapper,children:(0,f.jsxs)(oe().A,{style:_.minimalButton,onClick:I,onContextMenu:w,children:[(0,f.jsx)(p().zB,{size:14,style:_.iconStyle,theme:A,type:o.type??"relation",icon:o.icon}),(0,f.jsx)("div",{style:_.minmalButtonLabelStyle,children:R===s().av?(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.sprints.showSprintRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {singleTypedItemName}} other {{numberOfRelations} {pluralTypedItemName}}}",values:{numberOfRelations:r,propertyName:o.name,singleTypedItemName:B,pluralTypedItemName:L}}):(0,f.jsx)(x().sA,{id:"RelationPropertyPageSection.showRelations",defaultMessage:"{numberOfRelations, plural, =0 {Add {propertyName}} one {1 {propertyName}} other {{numberOfRelations} {propertyName}}}",values:{numberOfRelations:r,propertyName:o.name}})})]},`minimal-section-${t}`)}),hideDragHandle:!0,isInPeekRenderer:b,hideIcon:k})})}function pe(e){const{collectionStore:t,targetCollectionStore:o,property:r,showRight:l,disabled:c,style:d,children:u,canConfigureCollection:p,isConnectedRelation:g,canEditCurrentPage:m,handleMouseMove:y,onHandleOpenProperty:h,onHandleRelationPropertyPageSectionRefMount:b,topBorder:S,collectionContextStore:C}=e,M=(0,i().K8)((()=>o.isSyncedCollection()),[o]),k=(0,i().K8)((()=>o.getFormatStore().getKeyStore("app_config_uri").getValue()===s().av),[o]),_=(0,i().K8)((()=>C.permissionScopesStore.state),[C]),A=(0,a().v3)(),[w,I]=(0,n.useState)(!1),P=A.device.isMobile?l:l&&w;return(0,f.jsx)("div",{style:{width:"100%"},ref:b,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:(0,f.jsx)(ae().A,{...e,topBorder:S,children:u,noTextOverflow:!1,disableMobilePadding:!0,right:P&&!M&&!_.isExternallyImportedAndSyncedCollection&&!g&&(0,f.jsxs)("div",{style:{height:"100%",display:"flex",alignItems:"center",width:"100%"},children:[m&&(0,f.jsx)(ge,{disabled:c,handleMouseMove:y,onClick:h,icon:v().q,tooltipMessage:k?(0,f.jsx)(x().sA,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButtonSprints.message",defaultMessage:"Search for a sprint"}):(0,f.jsx)(x().sA,{id:"database.RelationPropertyPageSectionHeaderButton.tooltip.searchButton.message",defaultMessage:"Link a page"})},`searchIcon-${r}`),(0,f.jsx)(z,{collectionStore:t,targetCollectionStore:o,property:r,disabled:c||!p,rowType:"section"})]}),style:{paddingTop:0,paddingBottom:0,width:"100%",...d},mobileStyle:{boxShadow:"none"},desktopTitleStyle:{marginTop:0,marginBottom:4,paddingLeft:0,paddingRight:8,fontWeight:"normal"},mobileTitleStyle:{paddingLeft:0,alignItems:"center",fontWeight:"normal"}})})}function ge(e){const{disabled:t,handleMouseMove:o,onClick:n,icon:r,tooltipMessage:a}=e,i=(0,l().IS)((e=>({buttonStyle:{width:24,height:24,borderRadius:4,display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:4},iconStyle:{width:14,height:14,flexGrow:0,flexShrink:0,fill:e.mediumIconColor}})),[]);return(0,f.jsx)(ie().A,{renderTooltip:()=>a,render:e=>(0,f.jsx)(oe().A,{style:i.buttonStyle,onMouseMove:o,onClick:n,disabled:t,...e,children:r(i.iconStyle)})})}function me(e){return{display:"flex",alignItems:"center",color:e.text.tertiary,borderRadius:4,paddingRight:4,height:32,width:"100%",fontSize:14}}function ye(e,t){return{width:16,height:16,marginRight:t?7:11,marginTop:1,marginLeft:5,fill:e.lightIconColor}}function fe(e,t,o,n,a){if(!(0,X()._p)(o)||!n)return;let i;F().createAndCommit({userAction:"RelationToken.handleRelationPropertyMenuUpdate",environment:a,canUndo:!0,perform:r=>{const l=t.id;if(e.newPage&&l){const l=S().x9d(e.newPage.name);i=j().Wv({environment:a,id:e.newPage.id,type:c().xd.page,properties:{title:l},spaceId:e.newPage.spaceId,inMemoryRecordCache:t.inMemoryRecordCache,transaction:r}),T().X$({childStore:i,parentStore:t,transaction:r});const s=J().Bv.createChildStore(o,i.pointer),d=t.getDefaultTemplatePageStore();return d&&I().n5({title:{text:l},environment:a,store:s,templateStore:d,isKeyboard:!1,isCreateIn:!1,transaction:r,from:"relation_property_page_section"}),void R().K6({store:o,propertyId:n,id:i.id,environment:a,transaction:r,position:{type:"after"}})}if(e.newValues){const t=u().Ap(e.newValues),i=o.getPropertyStore(n);L().R9({environment:a,store:i,value:t,transaction:r})}}}),r().default.afterNextFlush((()=>{if(!i)return;const e=$().A.findRow(i.id,"section",n);if(!e)return;const t=e.relationTokenBlockStoreRef.current;if(!t)return;const o=t.getBlockTitleStore(),r={start:{index:0,store:o},end:{index:0,store:o}};N().setMultiSelection({multiSelection:r})}))}function he(e,t,o,n,r){fe({newValues:[],oldValues:n},e,t,o,r)}function ve(e,t,o,n,r,a,i,l,s,c,d){if(!d||"relation"!==d.type)return;if(!r.canEdit())return;if((0,q().fc)(r))return;const p=i.pointer.spaceId,g=d.limit,m=(0,K().zP)({environment:n,table:b().ev,spaceId:p}),y=m.id;if(!(0,X()._p)(r)||!a)return;const f=r.getPropertyValue(a),h=u().n(f);e&&e+1>l&&s(e+1);fe({newPage:{id:y,spaceId:p,name:""},newValues:g?[m]:e?[...h.slice(0,e),m,...h.slice(e)]:[m,...h],oldValues:h},t,r,a,n),M().v(n,{...(0,U().sl)(c),from:o,type:"page",target_collection_id:null==t?void 0:t.id,new_page_id:y,creating_block_id:y})}function be(e,t,o,n,r,a,i,l,s){const c=s.current;if(!(c&&c instanceof Element))return;if((0,q().fc)(a))return;const d=o?null==o?void 0:o.getBoundingClientRect():c.getBoundingClientRect(),u=e?d.top+G().d0:d.top+5,p=new DOMRect(d.left,u,d.width,d.height);A().ho({environment:n,blockPropertyValueOverlayStore:r,store:a,property:i,rect:p,format:ee().j.Page,mode:t,collectionContextStore:l}),function(e,t){k().vd(e,"relation_section_link_pages",t)}(n,{from:"relation_section"})}},739041:(e,t,o)=>{o.d(t,{u:()=>r});var n=()=>o(989423);function r(e,t,o){n().vd(e,t,o)}},740840:(e,t,o)=>{o.d(t,{O:()=>v});var n=o(296540),r=()=>o(484714),a=()=>o(847249),i=()=>o(401497),l=()=>o(591779),s=()=>o(755199),c=()=>o(515918),d=()=>o(953006),u=()=>o(972435),p=()=>o(628315),g=()=>o(131448),m=()=>o(962730),y=()=>o(98205),f=o(474848);const h=(0,o(959013).YK)({tryConditionalLogicTooltip:{defaultMessage:"Try conditional logic",id:"ConditionalLogicIcon.tutorialTooltip.title"}});function v(e){const t=(0,r().v3)(),o=(0,a().K8)((()=>g().default.isVisible(y().wG)),[]),v=(0,l().ZC)(o),b=(0,n.useCallback)((()=>{v&&(s().p$({environment:t}),(0,p().a)(t,y().wG))}),[t,v]),S=(0,i().IS)((e=>({badge:{color:"rgba(102, 179, 255, 1)",background:"rgba(35, 131, 226, 0.3)",whiteSpace:"nowrap",display:"inline"},tutorialTooltipContent:{whiteSpace:"nowrap",margin:0,color:e.text.contrastPrimary},tutorialTooltip:{padding:"0 2px 4px 8px",borderRadius:8,marginBottom:4}})),[]),{buttonRef:x}=e,C=(0,f.jsxs)("div",{style:S.tutorialTooltipContent,children:[u().A.formatMessage(h.tryConditionalLogicTooltip),(0,f.jsx)("span",{children:(0,f.jsx)(c().A,{style:S.badge})})]});return(0,f.jsx)(d().k,{origin:x,hideCloseButton:!0,style:S.tutorialTooltip,hideActions:!0,placementToOrigin:"top",alignmentToOrigin:m().C.Center,showPointer:!1,content:C,onCloseClick:b,shouldDismissUponOutsideClick:!0})}},743147:(e,t,o)=>{o.d(t,{n:()=>x});o(296540);var n=()=>o(484714),r=()=>o(847249),a=()=>o(401497),i=()=>o(970013),l=()=>o(416504),s=()=>o(93549),c=()=>o(959013),d=()=>o(284371),u=()=>o(870578),p=()=>o(405417),g=()=>o(962730),m=()=>o(148832),y=()=>o(704152),f=()=>o(859428),h=o(474848);const v=200,b=75,S=75;function x(e){let{blockStore:t,collectionContextStore:o,columnWidth:x}=e;const C=(0,r().O$)(o.currentSubitemFormatStoreForCollectionStore),M=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),k=(0,r().K8)((()=>{var e;return null===(e=o.collectionViewStore())||void 0===e?void 0:e.getType()}),[o]),_=(0,r().K8)((()=>{if(!C||!M)return;const e=M.getSchema()[C.property];return void 0!==e&&(0,i().nC)(e)?e:void 0}),[M,C]),A="table"===k||"list"===k||"timeline"===k,w=(0,n().v3)(),I=(0,c().tz)(),P=w.device.isMobile?b:v,T=(0,a().IS)((e=>({parentItemIcon:{color:e.mediumIconColor,width:14,height:14,marginRight:2},button:{height:20,display:"flex",alignItems:"center",color:e.text.tertiary,borderRadius:6,padding:"0 6px"},parentTitle:{...A?{maxWidth:x?Math.min(P,x-S):P}:{},fontWeight:d().Wy.medium,fontSize:d().J.UISmall.desktop,...d().RC}})),[x,A,P]),j=(0,r().K8)((()=>C&&_?(0,p().eO)({store:t,subitemFormat:C,propertySchema:_}):[]),[t,C,_]),R=(0,r().K8)((()=>{if(0===j.length)return;const e=j[0];return m().B.createChildStore(t,e)}),[t,j]),B=(0,r().K8)((()=>{var e;return null==R||null===(e=R.getModel())||void 0===e?void 0:e.getRenderTitleWithPlaceholder({getRecordModel:R.getRecordModel,userTimeZone:(0,l().P)(),intl:I})}),[R,I]);return(0,r().K8)((()=>(0,p().xC)({collectionContextStore:o,blockStore:t})),[o,t])&&R?(0,h.jsx)(f().A,{renderTooltip:()=>(0,h.jsx)("div",{children:B}),alignment:g().C.Start,delayThreshold:300,render:e=>(0,h.jsxs)(y().A,{ariaLabel:I.formatMessage({id:"parentItemIndicator.button.openParentSidePeek.ariaLabel",defaultMessage:"Open parent in side peek"}),onClick:()=>{u().k({relationPointers:j,relatedPageStore:R,environment:w,from:"relation_property",peekMode:"side_peek"})},style:T.button,...e,children:[(0,s().j)(T.parentItemIcon),(0,h.jsx)("div",{style:T.parentTitle,children:B})]})}):null}},761408:(e,t,o)=>{o.d(t,{L:()=>a,y:()=>i});var n=()=>o(847249),r=()=>o(175116);function a(e){let{collectionStore:t,collectionContextStore:o,property:n}=e;return null!=o&&o.isMultiSourceView?t.getMappedProperty(n):n}function i(e){let{collectionStore:t,property:o}=e;const i=(0,r().Ks)();return(0,n().K8)((()=>a({collectionStore:t,collectionContextStore:i,property:o})),[t,i,o])}},763870:(e,t,o)=>{o.d(t,{i:()=>a});o(898992),o(672577);var n=()=>o(847249),r=()=>o(68263);function a(e){let{collectionStore:t,propertyId:o,propertySchema:a}=e;const i=(0,n().K8)((()=>{if("person"!==a.type)return;return(t.getPermissionItems()??[]).find((e=>(0,r().tb)(e)&&"person"===e.property_info.type&&e.property_info.property_id===o))}),[t,o,a.type]);return i&&(0,r().tb)(i)?i:void 0}},769068:(e,t,o)=>{o.d(t,{g:()=>s});var n=o(296540),r=()=>o(401497),a=()=>o(738418),i=()=>o(554283),l=o(474848);function s(e){let{setIsHovered:t}=e;const[o,s]=(0,i().B)();(0,n.useEffect)((()=>{t(s)}),[s,t]);const c=(0,r().IS)((e=>({container:{display:"inline-flex",alignItems:"center"},icon:{width:14,fill:s?e.mediumIconColor:e.lightIconColor,marginLeft:5,marginTop:1}})),[s]);return(0,l.jsx)("div",{ref:o,style:c.container,children:(0,a().G)(c.icon)})}},795963:(e,t,o)=>{o.d(t,{Ge:()=>l,OQ:()=>r,aG:()=>s,yN:()=>i});var n=()=>o(864994);const r=160,a=120,i=120;function l(e){let{isMobile:t,stackPropertyLabelAndValue:o,isPropertyInPageDetails:l}=e;if(o||!l)return;const s=a/n().b*100;return t?i:`min(max(${s}%, ${a}px), ${r}px)`}function s(e){let{stackPropertyLabelAndValue:t}=e;return t?{variant:"hug-content"}:{variant:"fixed"}}},802975:(e,t,o)=>{o.d(t,{B:()=>g});o(16280),o(898992),o(354520);var n=()=>o(792071),r=()=>o(37165),a=()=>o(235191),i=()=>o(686526),l=()=>o(751156),s=()=>o(989423),c=()=>o(640868),d=()=>o(630116),u=()=>o(465741),p=()=>o(98205);function g(e){let{environment:t,module:o,sessionId:n,layoutStore:r,collectionSettingsStore:a,isCollectionEmpty:l,collectionContextStore:s,area:c,transaction:d,updateParentModule:u}=e;const g=s.collectionStore();if(!g)throw new Error("Could not find collection store");const y=r.getModules().form_conditional_modules??{},f=(0,p().Yg)({currentModule:o,nestedModules:y,includePlaceholders:!0}).formQuestionDescendants.filter((e=>e.id!==o.id)),h=s.normalizedSchemaStore.state;for(const i of f)m({environment:t,module:i,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:"form_conditional_modules",transaction:d,schema:h,updateParentModule:!1});m({environment:t,module:o,sessionId:n,layoutStore:r,isCollectionEmpty:l,collectionContextStore:s,collectionStore:g,area:c,transaction:d,schema:h,updateParentModule:u}),i().os({collectionSettingsStore:a})}function m(e){let t,{environment:o,module:i,sessionId:p,layoutStore:g,isCollectionEmpty:m,collectionContextStore:y,collectionStore:f,area:h,transaction:v,updateParentModule:b,schema:S}=e;if("formQuestion"===i.type){var x;if(t=d().c7.createChildStore(g,{table:r().lo,id:i.formQuestionId,spaceId:g.getSpaceId()??""}).getPropertyId(),!t)return;const e=null===(x=S[t])||void 0===x?void 0:x.type;m&&e&&"title"!==e&&a().BJ({environment:o,collectionStore:f,schema:S,property:t,transaction:v}),(0,s().u4)({environment:o,event:{eventName:"delete_form_question",eventProperties:(0,u().YA)({collectionContextStore:y,propertyId:t,questionId:i.id,parentModuleId:b?i.parentModuleId:void 0,area:h,layoutStore:g})}})}b?(0,c().U)({environment:o,position:{area:h,moduleId:i.id},layoutStore:g,sessionId:p,transaction:v}):l().applyOperation({transaction:v,store:g,operation:n().N4X.deleteModuleInArea({pointer:g.pointer,area:h,moduleId:i.id})})}},806401:(e,t,o)=>{o.d(t,{D:()=>u});var n=o(296540),r=()=>o(484714),a=()=>o(847249),i=()=>o(970013),l=()=>o(630053),s=()=>o(798880),c=()=>o(351360),d=()=>o(508496);function u(e){const t=function(){const e=(0,r().v3)();return(0,a().K8)((()=>{var t;return(0,l().Sf)({experimentService:d().default,actor:{table:s().oo,id:e.currentUser.id??""},spaceId:(null===(t=c().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??""})}),[e.currentUser])}();return(0,n.useMemo)((()=>{var o;if(!t)return!1;if(!e)return!1;if(!i().nC(e))return!1;return Boolean(null===(o=e.permissions_data)||void 0===o?void 0:o.shared_by_enabled)}),[e,t])}},807831:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("subItem",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.88642 2.43778C1.98215 2.3846 2.09567 2.35999 2.22362 2.35999C2.41846 2.35999 2.58374 2.42299 2.71309 2.55179C2.84789 2.67678 2.91386 2.84079 2.91386 3.03655C2.91386 3.161 2.90926 3.28545 2.90008 3.40989C2.8956 3.52687 2.89335 3.66669 2.89335 3.82952C2.89335 4.6672 2.99989 5.34012 3.20906 5.85192C3.42107 6.35987 3.76386 6.73052 4.23921 6.9683C4.72178 7.20285 5.37665 7.32288 6.20897 7.32288H10.9303L12.4002 7.41264L10.2433 5.44074L8.72396 3.8939C8.66786 3.83269 8.6225 3.76177 8.58753 3.68184L8.58532 3.67681C8.55515 3.59133 8.54022 3.50307 8.54022 3.41252C8.54022 3.22504 8.60443 3.06601 8.73414 2.94147C8.86699 2.81372 9.02934 2.74963 9.21678 2.74963C9.40179 2.74963 9.5677 2.81976 9.71223 2.95431L9.71419 2.95614L14.2523 7.49436C14.4062 7.63869 14.4871 7.81019 14.4871 8.00627C14.4871 8.20241 14.4062 8.37593 14.2528 8.52459L9.72696 13.0436C9.57465 13.191 9.40407 13.2698 9.21678 13.2698C9.03026 13.2698 8.86827 13.2086 8.73525 13.0858L8.73305 13.0838C8.60434 12.9551 8.54022 12.7943 8.54022 12.6069C8.54022 12.5163 8.55535 12.4281 8.58551 12.3426C8.61631 12.2554 8.66304 12.1796 8.72601 12.1166L10.2463 10.5689L12.3938 8.61275L10.9258 8.69663L6.14745 8.69651C4.516 8.69651 3.32454 8.32105 2.59311 7.55211C1.86303 6.77991 1.50604 5.55355 1.50604 3.89104C1.50604 3.68942 1.51062 3.50571 1.51983 3.34C1.52904 3.17413 1.54527 3.03558 1.56915 2.92552C1.58898 2.82668 1.62376 2.73465 1.67362 2.64989C1.72566 2.56142 1.79795 2.48982 1.88642 2.43778Z"})})},831566:(e,t,o)=>{o.d(t,{p:()=>a});var n=()=>o(751156),r=()=>o(724456);function a(e){const{environment:t,collectionStore:o,performTransaction:a}=e;return n().createAndCommit({userAction:"collectionViewActions.createSchemaUpdateTransaction",environment:t,canUndo:!0,perform:e=>{const n=o.getSchema(),i=a(e),l=o.getSchema();return(0,r().H)({environment:t,collectionStore:o,oldSchema:n,newSchema:l,transaction:e}),i}}).performResult}},832857:(e,t,o)=>{o.d(t,{FG:()=>h,Is:()=>f,Ix:()=>v,jD:()=>b,lF:()=>y});o(944114),o(898992),o(354520),o(672577),o(581454);var n=()=>o(289915),r=()=>o(792071),a=()=>o(500993),i=()=>o(183558),l=()=>o(534177),s=()=>o(751156),c=()=>o(909470),d=()=>o(978846),u=()=>o(640868),p=()=>o(33218),g=()=>o(508496),m=()=>o(802975);function y(e){const{environment:t,layoutStore:o,currentQuestionModule:n,area:r,property:a,filterValue:l,setModuleSelection:c,sessionId:u}=e;s().createAndCommit({userAction:"FormSelectProperty.handleAddConditionalLogic",environment:t,canUndo:!0,perform:e=>{if(!o.getModel())return;const s=(0,i().Ay)(),g=(0,i().Ay)(),m=function(e){var t,o;switch(e.type){case"select":return{operator:"enum_is",value:{type:"exact",value:null===(t=e.value)||void 0===t?void 0:t.value}};case"multi_select":return{operator:"enum_contains",value:{type:"exact",value:null===(o=e.value)||void 0===o?void 0:o.value}};case"checkbox":return{operator:"checkbox_is",value:{type:"exact",value:e.value}}}}(l);(0,p().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:r,moduleId:n.id},updatedModule:{...n,conditionalGroups:[...n.conditionalGroups??[],{id:s,trigger:{property:a,filter:m},children:[]}]}});const y={id:g,type:"placeholder",parentModuleId:n.id,parentConditionalGroupId:s};(0,d().UQ)({environment:t,transaction:e,layoutStore:o,position:{type:"absolute",area:"form_conditional_modules",parentConditionalGroupId:s,parentModuleId:n.id},module:y,sessionId:u,isPropertyCreation:!1}),c&&c({type:"existing_module",moduleId:g,isDragging:!1})}})}function f(e){var t;const{environment:o,layoutStore:n,module:r,conditionalGroupId:i,newValue:l}=e,c=(0,a().A)(r.id,n.getModules()),d={...r,conditionalGroups:null===(t=r.conditionalGroups)||void 0===t?void 0:t.map((e=>e.id===i?{...e,trigger:{...e.trigger,filter:l}}:e))};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.updateTriggerFilter",environment:o,canUndo:!0,perform:e=>{(0,p().UQ)({environment:o,transaction:e,layoutStore:n,position:{area:c.area,moduleId:r.id},updatedModule:d})}})}function h(e){const{environment:t,parentModule:o,groupId:n,layoutStore:a,collectionContextStore:i,isCollectionEmpty:l,sessionId:c}=e,d=a.getModules().form_conditional_modules??{};s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{var u,g;const y=null==a?void 0:a.getModel();if(!a||!y)return;const f=null===(u=o.conditionalGroups)||void 0===u?void 0:u.filter((e=>e.id!==n)),h=null===(g=o.conditionalGroups)||void 0===g?void 0:g.find((e=>e.id===n));if(void 0!==h){for(const o of h.children??[]){const n=d[o];n&&("placeholder"!==n.type?(0,m().B)({environment:t,module:n,sessionId:c,transaction:e,layoutStore:a,collectionContextStore:i,collectionSettingsStore:i.settingsStore,isCollectionEmpty:l,area:"form_conditional_modules",updateParentModule:!1}):s().applyOperation({transaction:e,store:a,operation:r().N4X.deleteModuleInArea({pointer:a.pointer,area:"form_conditional_modules",moduleId:o})}))}(0,p().UQ)({environment:t,transaction:e,layoutStore:a,position:{area:Object.keys(d).includes(o.id)?"form_conditional_modules":"form_layout_schema",moduleId:o.id},updatedModule:{...o,conditionalGroups:f}})}}})}function v(e){const{environment:t,layoutStore:o,formQuestionModule:n,sessionId:r}=e;s().createAndCommit({userAction:"FormConditionalLogicModuleRenderer.deleteConditionalGroup",environment:t,canUndo:!0,perform:e=>{(0,u().U)({environment:t,transaction:e,layoutStore:o,position:{area:"form_conditional_modules",moduleId:n.id}}),(0,d().UQ)({environment:t,transaction:e,layoutStore:o,position:{area:"form_layout_schema",type:"area_relative",location:"end_moveable"},module:{...n,parentModuleId:void 0,parentConditionalGroupId:void 0},sessionId:r,isPropertyCreation:!1})}})}function b(e){const{questionModulesToVisit:t,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:i}=e,s=[],d=o.getModel();if(!d)return[];for(const p of t){s.push(p);const e=p.conditionalGroups;if(e)for(const t of e){var u;const e=t.trigger;if(!(0,n().ts)({filter:e.filter,property:e.property,propertyMapping:void 0,context:{schema:r,userId:void 0,userTimeZone:"",userStartOfWeek:0,relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,intl:i,collectionFeatureGates:(0,c().i)()},depth:0})({block:d,getRecordModel:o.getRecordModel,propertyMapping:void 0,resultCache:new Map,regExpCache:new Map,experimentService:g().default,formulasModule:void 0}))continue;const p=null===(u=t.children)||void 0===u?void 0:u.map((e=>{const t=a[e];if(t&&"formQuestion"===t.type)return t})).filter(l().O9);if(!p||0===p.length)continue;const m=b({questionModulesToVisit:p,draftSubmissionPageStore:o,collectionSchema:r,nestedQuestionModules:a,intl:i});s.push(...m)}}return s}},843141:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(534177),r=()=>o(989423),a=()=>o(476492);function i(e,t,o){var i,l,s;let c="page_properties";const d=(0,a().sl)(t);switch(d.view_type){case void 0:case"page":case"table":c="table";break;case"list":c="list";break;case"gallery":c="gallery";break;case"board":c="board";break;case"calendar":c="calendar";break;case"timeline":c="timeline";break;case"chart":case"form_editor":case"feed":case"map":case"chat":case"custom":break;default:(0,n().HB)(d.view_type)}const u={...o,collection_id:null==t||null===(i=t.collectionStore())||void 0===i?void 0:i.id,collection_view_id:null==t||null===(l=t.collectionViewStore())||void 0===l?void 0:l.id,collection_view_block_id:null==t||null===(s=t.collectionViewBlockStore())||void 0===s?void 0:s.id,from:c};r().vd(e,"copy_property",u)}},846156:(e,t,o)=>{o.d(t,{F:()=>r});var n=()=>o(989423);function r(e,t){n().vd(e,"relation_reorder",t)}},864994:(e,t,o)=>{o.d(t,{b:()=>a,g:()=>i});var n=()=>o(548821),r=()=>o(154807);const a=r().YG;function i(e){let{environment:t,layoutArea:o,moduleType:i,pageViewBlockContext:l}=e;return("page_main"===o||"views_main_tab_modules"===o)&&"properties"===i||"properties"===i&&"page_details"===o&&(0,r().Wi)({environment:t,isInPeek:l===n().Rr.PeekView})>=a}},870578:(e,t,o)=>{o.d(t,{N:()=>y,k:()=>m});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577);var n=()=>o(584262),r=()=>o(970013),a=()=>o(713998),i=()=>o(921940),l=()=>o(562800),s=()=>o(351360),c=()=>o(508496),d=()=>o(712505),u=()=>o(630116),p=()=>o(727395),g=()=>o(435009);function m(e){let{relationPointers:t,relatedPageStore:o,environment:r,from:a,peekMode:c,openInNew:m}=e;const{mainEditorCurrentBlockStore:y}=s().default.state;if(!y)return;const f=t.find((e=>e.id===o.id));if(!f)return;let h;if(m){const e=u().Bv.createChildStore(y,f),t=e.getModel(),o=l().E2(r,e);h=(0,i().A)({pageId:f.id,pageModel:t,baseUrl:o,pageVisitSource:n().y8.MentionInPage})}else{const e=y.getModel(),t=l().E2(r,y);h=(0,i().A)({pageId:y.id,pageModel:e,baseUrl:t,peekViewBlockId:f.id,peekMode:(0,d().getUrlParamFromPeekMode)("full_page"===c?void 0:c??d().default.state.mode),pageVisitSource:n().y8.MentionInPage}),(0,p()._)(r,{from:a,meta_click:Boolean(m)})}g().oo({environment:r,url:h,openInNew:m})}async function y(e){var t,o;const{update:n,environment:i,store:l,collectionStore:d,propertySchema:p}=e,g=l.state.isOpen?l.state:null,m=new Set(n.oldValues),y=n.newValues.filter((e=>!m.has(e)));if(!c().default.checkGate({gateName:"relation_two_way_limit_of_1_add_relation_confirmation_dialog"}))return!1;const f=s().default.state.currentUserSettingsStore;if(Boolean(null==f?void 0:f.getSettingsStore().getKeyStore("relation_limit_confirmation_dialog_dismissed_at").getValue()))return!1;if(1!==y.length||!g)return!1;const h=g.property,v=(null===(t=g.collectionContextStore)||void 0===t?void 0:t.collectionViewStore())||(null==d||null===(o=d.getParentBlockStore())||void 0===o?void 0:o.getCollectionViewStores()[0]);if(!d||!v||!p)return!1;const b=await async function(e){const{collectionStore:t,property:o,environment:n,targetCollectionStore:a}=e,i=t.getSchema()[o];if(!i||"relation"!==i.type)return!1;const l=r().Nv(i),s=i.property;if(!l||!s)return!1;const c=a??new(u().md)(n,l);await c.load();const d=c.getSchema();if(!(0,r().rd)({propertySchema:i,property:o,sourceCollectionId:t.id,targetCollectionSchema:d}))return!1;const p=d[s];return!(!p||"relation"!==p.type)&&Boolean(p.limit)}({collectionStore:d,property:h,environment:i});if(!b)return!1;const S=await async function(e){const{collectionStore:t,relationPointer:o,environment:n,property:r}=e,i=new(u().Bv)(n,o);await i.load();const l=t.getSchema()[r];if(!l||"relation"!==l.type)return;const s=l.property;if(!s)return;const c=i.getPropertyValue(s);if(!c)return;const[d]=a().n(c);return d}({collectionStore:d,relationPointer:y[0],property:h,environment:i});if(!S)return!1;const x=new(u().Bv)(i,S);await x.load();return{blockWithExistingRelationTitle:x.getPropertyValue("title"),currentBlockTitle:g.store.getPropertyValue("title"),update:n,canAccessBlockWithExistingRelation:x.canRead()}}},880298:(e,t,o)=>{o.d(t,{r:()=>m});var n=o(296540),r=()=>o(401497),a=()=>o(372160),i=()=>o(677195),l=()=>o(53528),s=()=>o(931075),c=()=>o(959013),d=()=>o(534177),u=()=>o(284371),p=()=>o(828180),g=o(474848);function m(e){const{verificationValue:t,fontSize:o=p().Mi}=e,m=(0,c().tz)(),y=(0,n.useMemo)((()=>s().B2(t)),[t]),f=y.type,h=(0,r().IS)((e=>({icon:{width:"expired"===f?8:14,height:"expired"===f?9:14,fill:"verified"===f?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:u().Wy.regular,color:e.text.primary,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:o,lineHeight:p().$g},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[f,o]);if("none"===f)return null;let v=null,b=null;const S=h.caption;switch(f){case"verified":v=(0,a().E)({...h.icon}),b=y.isIndefinite?(0,g.jsx)(c().sA,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,g.jsx)(c().sA,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:l().OH({dateTime:y.dateTimeRange.end,intl:m})}});break;case"expired":v=(0,g.jsx)("div",{style:h.expiredIconContainer,children:(0,i().R)({...h.icon})}),b=(0,g.jsx)(c().sA,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:s().F7(y.dateTimeRange.end.setLocale(m.locale))}});break;default:(0,d().HB)(f)}return(0,g.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[v,(0,g.jsx)("div",{style:S,children:b})]})}},882262:(e,t,o)=>{o.d(t,{m:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485H8.86a.625.625 0 0 0 0-1.25h-5a.625.625 0 0 0-.625.625v5a.625.625 0 1 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 1 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},r=(0,o(340498).wt)("arrowExpandDiagonal",n)},913687:(e,t,o)=>{o.d(t,{A:()=>n});const n=(0,o(959013).YK)({inputPlaceholder:{defaultMessage:"Property name",id:"database.viewSettings.propertyTab.propertyName"},autofillOffLabel:{defaultMessage:"Off",id:"database.viewSettings.propertyTab.autofillOffLabel"},autofillOnLabel:{defaultMessage:"On",id:"database.viewSettings.propertyTab.autofillOnLabel"},keptUpToDateWithNotionAITooltip:{defaultMessage:"Auto-updated by AI",id:"database.tableHeaderCell.tooltipAiAutofillDescription"},buttonPropertyErrorTooltip:{defaultMessage:"Button property has an error",id:"database.tableHeaderCell.tooltipButtonPropertyError"}})},937199:(e,t,o)=>{o.d(t,{LH:()=>a,Op:()=>r,bi:()=>s,sf:()=>l,v$:()=>i});o(16280);var n=o(296540);const r=(0,n.createContext)(null);function a(){const e=(0,n.useContext)(r);if(!e)throw new Error("usePageLayoutEditorContext must be used inside BaseLayoutEditorContext.Provider");return e}function i(){return(0,n.useContext)(r)}r.displayName="BaseLayoutEditorContext";const l=(0,n.createContext)(null);function s(){const e=(0,n.useContext)(l);if(!e)throw new Error("usePageLayoutEditorContext must be used inside PageLayoutEditorContextProvider");return e}l.displayName="PageLayoutEditorContext"},961529:(e,t,o)=>{o.d(t,{a:()=>a});var n=()=>o(645873);const r=new(n().O2)("PropertyModulePersonProperty",(async()=>await Promise.all([o.e(74562),o.e(28866),o.e(6463),o.e(59794),o.e(82120)]).then(o.bind(o,444823)))),a=(0,n()._h)(r,(e=>e.PersonPropertyModule))},963912:(e,t,o)=>{o.d(t,{A:()=>M,O:()=>S});o(581454),o(296540);var n=()=>o(847249),r=()=>o(401497),a=()=>o(584262),i=()=>o(987555),l=()=>o(449552),s=()=>o(234194),c=()=>o(959013),d=()=>o(100622),u=()=>o(906719),p=()=>o(565049),g=()=>o(108944),m=()=>o(630116),y=()=>o(898808),f=()=>o(614505),h=o(474848);const v=(0,c().YK)({shared:{defaultMessage:"Shared",id:"CollectionLocation.SidebarTitle.sectionShared"},private:{defaultMessage:"Private",id:"CollectionLocation.SidebarTitle.sectionPrivate"},noAccess:{defaultMessage:"No access",id:"CollectionLocation.noAccess"},emptyCollectionName:{id:"CollectionLocation.EmptyCollectionName",defaultMessage:"Untitled"}});function b(e){return(0,h.jsx)("span",{style:{paddingTop:4,paddingLeft:4,...e.style},children:"/"})}function S(e){const{collectionForLocationStore:t,collectionContextStore:o}=e,a=(0,c().tz)(),u=(0,n().K8)((()=>{const e=g().fU(t);return e.reverse(),e}),[t]),{collectionIsInPrivate:p,collectionIsInRestricted:m,collectionIsInShared:y}=(0,n().K8)((()=>{const e=o.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[t.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[t.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[t.id])}}),[o.groupsForTypedDatabasesStore,t.id],{useDeepEqual:!0}),f=(0,n().K8)((()=>(0,d().O4)({theme:"light"})),[]),S=(0,r().IS)((e=>({textStyle:{color:f.popoverWaxPaperBackground,fontWeight:"normal"},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:f.accentColors.gray[100],borderRadius:3}})),[f]),C=p||m||y;let M=null;return p?M=(0,h.jsxs)(h.Fragment,{children:[(0,l().g)(S.shareTypeIndicatorIcon),(0,h.jsx)("span",{children:a.formatMessage(v.private)})]}):m?M=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{style:{...S.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().T)({...S.shareTypeIndicatorIcon,margin:0,background:void 0})}),(0,h.jsx)("span",{children:a.formatMessage(v.noAccess)})]}):y&&(M=(0,h.jsxs)(h.Fragment,{children:[(0,s().M)(S.shareTypeIndicatorIcon),(0,h.jsx)("span",{children:a.formatMessage(v.shared)})]})),(0,h.jsxs)("div",{style:{display:"flex"},children:[C&&(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4,...S.textStyle},children:[M,!m&&(0,h.jsx)(b,{style:{marginTop:-4,...S.textStyle}})]}),u.length>3?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(x,{ancestorStore:u[0],showDivider:!0}),(0,h.jsx)("span",{style:{paddingLeft:2,paddingTop:4,...S.textStyle},children:"..."}),(0,h.jsx)(b,{style:S.textStyle}),!(p||y)&&(0,h.jsx)(x,{ancestorStore:u[u.length-2],showDivider:!0}),(0,h.jsx)(x,{ancestorStore:u[u.length-1],showDivider:!1})]}):u.map(((e,t)=>(0,h.jsx)(x,{ancestorStore:e,showDivider:t<u.length-1},e.id)))]})}function x(e){const{ancestorStore:t,showDivider:o}=e,a=(0,n().K8)((()=>(0,d().O4)({theme:"light"})),[]),i=(0,r().IS)((e=>({teamIconStyle:{background:e.popoverWaxPaperBackground},textStyle:{color:a.popoverWaxPaperBackground,fontWeigth:"normal"}})),[a]);return t instanceof m().h4?(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(p().A,{store:t,showDivider:!1,maxWidth:160,iconSize:16,iconStyle:i.teamIconStyle,titleStyle:i.textStyle}),o&&(0,h.jsx)(b,{style:i.textStyle})]}):(0,h.jsxs)("div",{style:{display:"flex"},children:[(0,h.jsx)(u().A,{store:t,showDivider:!1,emojiSize:18,maxWidth:160,titleStyle:i.textStyle},t.id),o&&(0,h.jsx)(b,{style:i.textStyle})]})}function C(e){const{teamStore:t,collectionStore:o}=e,a=(0,n().K8)((()=>o.getIcon()),[o]),i=(0,r().IS)((e=>({miniTeamSpaceIcon:{background:e.home.tile.background,position:"absolute",bottom:-3,right:-3,borderRadius:2},teamSpaceIcon:{borderRadius:2,marginRight:2}})),[]);return a?(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative",marginRight:2},children:[(0,h.jsx)(f().B,{icon:a,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),(0,h.jsx)(y().x,{store:t,disabled:!0,size:12,style:i.miniTeamSpaceIcon},"icon")]}):(0,h.jsx)(y().x,{store:t,disabled:!0,size:20,style:i.teamSpaceIcon},"icon")}const M=function(e){const{collectionContextStore:t,collectionForLocationStore:d}=e,u=(0,o(484714).v3)(),p=(0,c().tz)(),{collectionIsInPrivate:m,collectionIsInRestricted:y,collectionIsInShared:b}=(0,n().K8)((()=>{const e=t.groupsForTypedDatabasesStore.state;return{collectionIsInPrivate:Boolean(null==e?void 0:e.privateDatabases[d.id]),collectionIsInRestricted:Boolean(null==e?void 0:e.restrictedDatabases[d.id]),collectionIsInShared:Boolean(null==e?void 0:e.sharedDatabases[d.id])}}),[t.groupsForTypedDatabasesStore,d.id],{useDeepEqual:!0}),S=(0,n().K8)((()=>g().Uo(d)),[d]),x=(0,n().K8)((()=>(0,o(921855).r4)(d.getName(),d)??p.formatMessage(v.emptyCollectionName)),[d,p]),M=(0,n().K8)((()=>d.getIcon()),[d]),k=(0,n().K8)((()=>{var e;return null===(e=t.collectionViewBlockStore())||void 0===e?void 0:e.id}),[t]),_=(0,n().K8)((()=>{let e=a().y8.LocationProperty;return k?((0,o(186445).sj)(k)&&(e=t.isInHomeWidgetStore.state?a().y8.PersonalHomeTileTasks:a().y8.PersonalHomePageTasks),e):e}),[k,t]),A=(0,r().IS)((e=>({button:{color:e.accentColors.gray[800],cursor:"pointer"},inner:{display:"flex",flexDirection:"row",alignItems:"center",columnGap:4},shareTypeIndicatorIcon:{width:20,height:20,marginRight:2,color:e.mediumIconColor,padding:2,backgroundColor:e.fill.lightGraySecondary,borderRadius:3},miniShareTypeIndicatorIcon:{position:"absolute",bottom:-3,right:-3,width:12,height:12,color:e.mediumIconColor,backgroundColor:e.fill.grayPrimary,borderRadius:3,paddingTop:1,paddingBottom:1},collectionTitleTextStyle:{lineHeight:1,fontWeight:o(284371).Wy.medium,marginTop:2,marginLeft:2,whiteSpace:"nowrap",...(0,o(458366).w_)(e)}})),[]);if(!(S||m||y||b))return null;const w=m||y||b;let I=(0,s().M)(A.shareTypeIndicatorIcon);return M?I=(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",position:"relative"},children:[(0,h.jsx)(f().B,{icon:M,size:20,emojiSize:20,isEmptyPage:!1,bucket:"public",isLarge:!0,largeIcon:!0,disabled:!0}),m?(0,l().g)(A.miniShareTypeIndicatorIcon):(0,s().M)(A.miniShareTypeIndicatorIcon)]}):y?I=(0,h.jsx)("div",{style:{...A.shareTypeIndicatorIcon,padding:0,paddingLeft:1,margin:0},children:(0,i().T)({...A.shareTypeIndicatorIcon,margin:0,background:void 0})}):m&&(I=(0,l().g)(A.shareTypeIndicatorIcon)),(0,h.jsx)(o(704152).A,{hoveredStyle:{background:"transparent"},pressedStyle:{background:"transparent"},style:A.button,onClick:e=>{const t=d.getParentBlockStore();if(t){const n=(0,o(728611).Vr)(e);o(857783).uK({environment:u,store:t,pageVisitSource:_,openInNew:n})}},children:(0,h.jsxs)("div",{style:A.inner,children:[S&&(0,h.jsx)(C,{teamStore:S,collectionStore:d}),w&&I,(0,h.jsx)("div",{style:A.collectionTitleTextStyle,children:x})]})})}},991114:(e,t,o)=>{o.d(t,{C:()=>i});var n=()=>o(847249);const r=Number(o(720665).Xb),a=new(o(496506).default)((()=>o(508496).default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??r),{debugName:"clientFormulaTimeoutMsStore"});function i(){return(0,n().O$)(a)}},996494:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{editMode:void 0,store:void 0}}cloneState(){return o(496603).o8(this.state)}}const r=new n}}]);