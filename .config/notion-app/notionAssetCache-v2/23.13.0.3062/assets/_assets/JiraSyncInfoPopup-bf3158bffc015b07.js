"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[68744],{408453:(e,t,o)=>{o.r(t),o.d(t,{JiraSyncInfoPopup:()=>g});var i=o(296540),n=()=>o(484714),s=()=>o(847249),r=()=>o(543906),a=()=>o(651124),l=()=>o(831098),c=()=>o(959013),u=()=>o(812182),p=()=>o(751156),d=()=>o(755199),S=()=>o(504836),y=()=>o(351360),f=()=>o(666803);const _="jira_sync_info_toast",C=(0,c().YK)({titleWhenProject:{id:"jiraSyncInfoPopup.titleForProjectsCollectionView",defaultMessage:"Keep track of projects in Jira"},titleWhenIssues:{id:"jiraSyncInfoPopup.titleForTasksCollectionView",defaultMessage:"Keep track of issues in Jira"},descriptionWhenProject:{id:"jiraSyncInfoPopup.descriptionForProjectsCollectionView",defaultMessage:"Notion makes it easy to preview Jira content, so you can keep track of projects and collaborate more easily"},descriptionWhenIssues:{id:"jiraSyncInfoPopup.descriptionForIssuesCollectionsView",defaultMessage:"Notion makes it easy to preview Jira content, so you can keep track of issues and collaborate more easily"}});function g(e){const t=(0,n().v3)(),o=(0,c().tz)(),{isMobile:g}=(0,n().Y0)(),{blockStore:j}=e,{inAppCalloutStore:m,currentUserSettingsStore:P}=(0,s().K8)((()=>({inAppCalloutStore:y().default.state.inAppCalloutStore,currentUserSettingsStore:y().default.state.currentUserSettingsStore})),[]),h=(0,s().K8)((()=>m.getCalloutVisibility("jira_sync_info_popup").canShow),[m]),{isProjectCollectionView:v,isSetupComplete:w,isJiraSyncedCollection:k}=(0,s().K8)((()=>{if(j.isCollectionView()){var e,t;const o=null===(e=j.getCollectionStore())||void 0===e?void 0:e.getFormat(),i=(null==o?void 0:o.external_collection_type)===a().uO.Jira,n=Boolean(null==o||null===(t=o.sync_state)||void 0===t?void 0:t.last_synced_at);return{isProjectCollectionView:"notion://projects_collection"===(null==o?void 0:o.app_config_uri),isSetupComplete:n,isJiraSyncedCollection:i}}return{isProjectCollectionView:!1,isSetupComplete:!1,isJiraSyncedCollection:!1}}),[j]),b=(0,s().K8)((()=>{var e;const t=null==P||null===(e=P.getSettingsStore())||void 0===e?void 0:e.getValue();if(!t)return!0;const o=t.jira_sync_onboarding_tour_state;return Boolean(o&&"notSeen"!==o)}),[P]),I=(0,s().K8)((()=>(0,S().Sd)()),[])&&k&&w&&!b&&h&&!g,V=(0,i.useMemo)((()=>function(e){const{isProjectCollectionView:t,intl:o,onDismiss:i}=e,n=t?C.titleWhenProject:C.titleWhenIssues,s=t?C.descriptionWhenProject:C.descriptionWhenIssues;return{presentationType:"persistent",id:_,title:o.formatMessage(n),icon:l().y,message:o.formatMessage(s),actions:{primary:{title:o.formatMessage({id:"jiraSyncInfoPopup.primaryButton",defaultMessage:"Take the tour"}),onAction:()=>{f().Ay.setState({...f().Ay.state,showOnboardingTour:!0}),i(),u().UW(_)}}},onDismiss:i}}({isProjectCollectionView:v,intl:o,onDismiss:()=>{m.updateCalloutStatus({calloutId:"jira_sync_info_popup",visible:!1}),P&&p().createAndCommit({userAction:"JiraSyncInfoPopup.handleDismiss",environment:t,canUndo:!0,perform:e=>{d().mJ({transaction:e,userSettingsStore:P,data:{jira_sync_onboarding_tour_state:"completed"}})}})}})),[P,t,m,o,v]);return(0,r().A)((()=>{m.updateCalloutStatus({calloutId:"jira_sync_info_popup",visible:!0}),u().HK(V)}),I),null}}}]);