"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[77282,83728],{346:(e,t,n)=>{n.d(t,{MG:()=>m,T1:()=>g,a1:()=>b,dt:()=>f,kg:()=>h,lC:()=>y,n_:()=>v});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(187174),r=()=>n(645873),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const g=new(r().O2)("PerformanceToolbar",(()=>Promise.all([n.e(96346),n.e(16471),n.e(85864),n.e(92845),n.e(71718),n.e(21194),n.e(17989),n.e(90625),n.e(37580),n.e(45624)]).then(n.bind(n,140401)))),m=(0,r()._h)(g,(e=>e.PerformanceToolbar)),f=(0,r()._h)(g,(e=>e.PerformanceToolbarSettings));function h(){const e=(0,i().v3)();return(0,s().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,i().v3)(),t=x("PerformanceToolbarStore"),n=x("isPerformanceToolbarVisible");return(0,s().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function y(){const e=x("PerformanceToolbarStore");return(0,s().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function b(){const e=(0,i().v3)(),t=x("createPerformanceToolbarMouseListeners"),n=x("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:r,secondarySidebarExpanded:p,secondarySidebarWidth:g,updateSidebarExpanded:m,updateSidebarWidth:f}=(0,s().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,r,p,g,m,f)}),[t,e,n,a,r,p,g,m,f])}function x(e){const t=h(),[{value:n}]=(0,a().Yb)((()=>t?g.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},43972:(e,t,n)=>{n.d(t,{w:()=>l});n(296540);var o=()=>n(764880),i=()=>n(534177),s=()=>n(256863),a=()=>n(453697),r=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,r.jsx)(s().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,r.jsx)(a().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,r.jsx)(a().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},63467:(e,t,n)=>{n.d(t,{y:()=>c});var o=()=>n(637997),i=()=>n(267419);const s={ko:()=>n.e(2268).then(n.bind(n,224434)),es:()=>n.e(95264).then(n.bind(n,196425)),de:()=>n.e(35390).then(n.bind(n,653703)),fr:()=>n.e(3272).then(n.bind(n,94677)),pt:()=>n.e(27315).then(n.bind(n,766869)),zh:()=>n.e(69945).then(n.bind(n,516814)),ja:()=>n.e(77757).then(n.bind(n,824432)),da:()=>n.e(9423).then(n.bind(n,440761)),fi:()=>n.e(59337).then(n.bind(n,462135)),nb:()=>n.e(2040).then(n.bind(n,937314)),nl:()=>n.e(51106).then(n.bind(n,530897)),sv:()=>n.e(53631).then(n.bind(n,895222))};let a=!1,r=!1;async function l(e){for(const[n,i]of Object.entries(e.emojiLocaleKeywords)){var t;o().fB[n]={...o().fB[n],keywords:[...i,...(null===(t=o().fB[n])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=n(662303).locale.split("-");e in s&&(await l(await s[e]()),a=!0)}const c=(0,n(279900).A)((async()=>{await async function(){r||(await l(await n.e(51872).then(n.bind(n,443716))),r=!0)}(),await d()}))},69447:(e,t,n)=>{n.d(t,{Lq:()=>o,WK:()=>s,nh:()=>i});const o=40,i=48,s=60},72307:(e,t,n)=>{n.d(t,{A:()=>o});const o={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},73223:(e,t,n)=>{n.r(t),n.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>p,tutorialAdvanceToStepAfter:()=>g,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var o=()=>n(541235),i=()=>n(751156),s=()=>n(755199),a=()=>n(739135),r=()=>n(351360);function l(e,t){var n;const{currentUserSettingsStore:o}=r().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;m({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{s().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().i9)(o,t)}}})},userId:o.id})}function d(e,t){var n;const{currentUserSettingsStore:o}=r().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;m({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{s().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(o,t)}}})},userId:o.id})}function c(e,t){var n;const{currentUserSettingsStore:i}=r().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;(null==a?void 0:a[t])!==o().YD&&m({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{s().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:o().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=r().default.state;t&&m({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{s().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function p(e,t,n){var i;const{currentUserSettingsStore:l}=r().default.state;if(!l||(0,a().x$)(l,t))return;const d=(0,a().gt)(l,t);o().c$[t].steps.findIndex((e=>e.id===d))>=o().c$[t].steps.findIndex((e=>e.id===n))||s().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:n}}})}function g(e,t,n){if((0,a().ll)(n))return;const o=(0,a().tb)(t,n);o&&p(e,t,o)}function m(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},97059:(e,t,n)=>{n.d(t,{W:()=>f,w:()=>m});n(944114);var o=()=>n(585515),i=()=>n(577449),s=()=>n(161479),a=()=>n(545285),r=()=>n(763824),l=()=>n(780054),d=()=>n(870618),c=()=>n(670631),u=()=>n(227440),p=()=>n(508496),g=()=>n(540758);async function m(e){const{environment:t}=e;return(await r().lX(Object.keys(c().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,r={page:{id:n,spaceId:(0,s().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},c=[];return await o().T(r,i().h.sideEffect((e=>((0,a().u)(e)&&c.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await d().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),c}({environment:t,pageId:e})))).flat()}function f(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},101749:(e,t,n)=>{n.d(t,{N:()=>a});n(296540);var o=()=>n(959013),i=()=>n(423657),s=n(474848);function a(e){const t=(0,i().A)(e);return t.isGuestRequestRequired?(0,s.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.guestRequestRequired",defaultMessage:"This guest must be approved by a workspace owner first"}):t.isStoreInTeam?t.teamAllowsGuests?void 0:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine1",defaultMessage:"This teamspace doesn't allow guests."})}),(0,s.jsx)("div",{children:(0,s.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.teamDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]}):t.spaceAllowsGuests?void 0:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine1",defaultMessage:"This workspace doesn't allow guests."})}),(0,s.jsx)("div",{children:(0,s.jsx)(o().sA,{id:"contextualInvite.buttonAndTokenTooltip.spaceDisablesGuestsAlertLine2",defaultMessage:"Remove any guests to continue."})})]})}},103674:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{permissionsInviteStore:new(n(986229).A),contextualInviteStore:new(n(159026).Ay)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const i=o},120114:(e,t,n)=>{n.d(t,{AX:()=>a,Ur:()=>o,uw:()=>i,yP:()=>s});const o=["unified_find_variant"],i=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],s=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function a(e,t,n){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:n("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:n("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:n("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:n("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:n("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},123350:(e,t,n)=>{n.r(t),n.d(t,{RequestMembersModal:()=>B,default:()=>R,messages:()=>T});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(401497),r=()=>n(959013),l=()=>n(100622),d=()=>n(284371),c=()=>n(134696),u=()=>n(542056),p=()=>n(436572),g=()=>n(805751),m=()=>n(623580),f=()=>n(928600),h=()=>n(433876),v=()=>n(897119),y=()=>n(204063),b=()=>n(125565),x=()=>n(654856),S=()=>n(263919),k=()=>n(495867),C=()=>n(722872),w=()=>n(743260),A=()=>n(962730),I=()=>n(766343),M=()=>n(103674),j=n(474848);const T=(0,r().YK)({reason_placeholder:{id:"RequestMembersModal.reason.placeholder",defaultMessage:"Add a reason (optional)"}});function B(e){const t=(0,i().v3)(),{store:n,origin:B,analyticsFrom:R}=e,{modalOpen:P,focus:_}=(0,s().K8)((()=>{const{open:e,focus:t}=I().A.state;return{modalOpen:e,focus:t}}),[]),L=(0,o.useCallback)((e=>{P&&I().A.setState({...I().A.state,open:!0,focus:e})}),[P]),E=(0,s().uB)(void 0,M().A),W=(0,r().tz)(),F=(0,a().IS)((()=>({modalStyle:{alignSelf:"center",overflow:"visible",top:0,width:420},container:{padding:20},title:{fontWeight:d().Wy.medium,marginBottom:10},reasonTitle:{color:l().Ay.mediumTextColor,marginTop:10,marginBottom:5},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20}})),[]);(0,o.useEffect)((()=>{L("invites")}),[L]);const D=e=>{e.currentTarget===e.target&&L("none")},G=async()=>{c().RH(t,{...k().nE(t,E.state.contextualInviteStore),from:R}),u().KW({permissionsInviteStore:E.state.permissionsInviteStore,contextualInviteStore:E.state.contextualInviteStore}),E.state.contextualInviteStore.startRequestMembership();const e=E.state.contextualInviteStore.state.invitedUsers;I().A.close();const o=await k().xi({environment:t,spaceStore:n,originId:void 0,originType:R,reasonMessage:E.state.permissionsInviteStore.state.emailMessage,contextualInviteStore:E.state.contextualInviteStore,intl:W});H({success:o,intl:W,users:e}),E.reset()},H=e=>{const{success:t,intl:n,users:o}=e;0!==o.length&&(t?p().D6({label:n.formatMessage({id:"requestMembersModal.requestSuccess.toast",defaultMessage:"Successfully requested membership for {users} to your workspace admins."},{users:k().id(o,n)})}):p().D6({label:n.formatMessage({id:"requestMembersModal.requestFail.toast",defaultMessage:"Failed to invite {users} to the workspace."},{users:k().id(o,n)})}))};return(0,j.jsx)(h().A,{modalStyle:F.modalStyle,open:P,onDismiss:async()=>{if(!(await(0,w().iQ)({environment:t,permissionsInviteStoreState:E.state.permissionsInviteStore.state,from:"space_settings_add_members"})))return I().A.close(),void E.reset();L("none")},renderContent:()=>(0,j.jsxs)("div",{style:F.container,onClick:D,children:[(0,j.jsx)("div",{style:F.title,onClick:D,children:(0,j.jsx)(r().sA,{id:"requestMembersModal.title",defaultMessage:"Request to invite members"})}),(0,j.jsx)(v().Ay,{popupType:v().nl.Popup,alignmentToOrigin:A().C.Start,placementToOrigin:A().W.Bottom,open:"invites"===_,sameWidthAsOrigin:!0,originGap:10,disableMouseCapture:!0,origin:(0,j.jsx)(x().A,{permissionsInviteStore:E.state.permissionsInviteStore,store:n,handleClickRemoveToken:e=>{u().St({targetToRemove:e,permissionsInviteStore:E.state.permissionsInviteStore,defaultRoleForNonBot:"read_and_write"})},handleInputChange:async e=>{L("invites"),await u().Pp({environment:t,event:e,permissionsInviteStore:E.state.permissionsInviteStore})},handleInputSubmit:async()=>{},origin:"add_members",defaultRoleForNonBot:"read_and_write",right:(0,j.jsx)("div",{}),focus:"invites"===_,handleFocus:()=>L("invites")}),onDismiss:()=>L("none"),render:()=>{const e=(0,j.jsx)(S().A,{permissionsInviteStore:E.state.permissionsInviteStore,store:n,defaultRoleForSpaceBot:"editor",shouldShowBots:!1,shouldShowGroups:!1,sectionRenderLimit:10,membersOnly:!1}),t={menuType:C().gu.Popup,disableScroller:!1};return(0,j.jsx)("div",{children:(0,j.jsx)(f().A,{...t,width:380,children:e})})},style:{width:"100%"}}),(0,j.jsx)("div",{style:F.reasonTitle,onClick:D,children:(0,j.jsx)(r().sA,{id:"requestMembersModal.reasonForRequest.title",defaultMessage:"Reason for request"})}),(0,j.jsx)(g().A,{debugName:"RequestMembersModal",capture:!0,allowEsc:!0,children:(0,j.jsx)(m().A,{textarea:!0,style:{padding:8},value:E.state.permissionsInviteStore.state.emailMessage,focus:"reason"===_,onFocus:()=>L("reason"),onChange:e=>{E.state.permissionsInviteStore.setState({...E.state.permissionsInviteStore.state,emailMessage:e.target.value})},placeholder:W.formatMessage(T.reason_placeholder)})}),(0,j.jsxs)("div",{style:F.footer,onClick:D,children:[(0,j.jsx)(b().A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,j.jsx)(r().sA,{id:"RequestMembersModal.caption",defaultMessage:"Your admins will approve or decline your request."})}),(0,j.jsx)(y().A,{size:"lg",style:F.requestInvitesButton,onClick:G,children:(0,j.jsx)(r().sA,{id:"requestMembersModal.requestInvitesButton.label",defaultMessage:"Request invites"})})]})]}),origin:(0,j.jsx)("div",{onClick:()=>{I().A.open()},children:B})})}const R=B},126617:(e,t,n)=>{n.d(t,{Y:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},i=(0,n(340498).wt)("ellipsisSmall",o)},173019:(e,t,n)=>{n.d(t,{r:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},188799:(e,t,n)=>{n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("taskList",{viewBox:"0 0 18 17",svg:(0,o.jsx)("path",{d:"M3.48438 7.29688C5.35938 7.29688 6.92188 5.73438 6.92188 3.85938C6.92188 1.96875 5.35938 0.40625 3.48438 0.40625C1.59375 0.40625 0.0390625 1.96875 0.0390625 3.85938C0.0390625 5.73438 1.60156 7.29688 3.48438 7.29688ZM3.07031 5.70312C2.89844 5.70312 2.77344 5.61719 2.65625 5.47656L1.78125 4.42969C1.69531 4.32812 1.66406 4.23438 1.66406 4.10156C1.66406 3.85938 1.85156 3.67188 2.08594 3.67188C2.24219 3.67188 2.35156 3.73438 2.45312 3.875L3.05469 4.625L4.44531 2.39062C4.54688 2.23438 4.67969 2.15625 4.83594 2.15625C5.07031 2.15625 5.26562 2.33594 5.26562 2.55469C5.26562 2.66406 5.24219 2.76562 5.16406 2.88281L3.5 5.46875C3.39844 5.61719 3.25 5.70312 3.07031 5.70312ZM9.39844 4.54688H17.2578C17.6406 4.54688 17.9531 4.24219 17.9531 3.85938C17.9531 3.47656 17.6406 3.17188 17.2578 3.17188H9.39844C9.01562 3.17188 8.71875 3.47656 8.71875 3.85938C8.71875 4.24219 9.01562 4.54688 9.39844 4.54688ZM3.48438 16.3281C5.35938 16.3281 6.92188 14.7656 6.92188 12.8828C6.92188 10.9922 5.35938 9.4375 3.48438 9.4375C1.59375 9.4375 0.0390625 11 0.0390625 12.8828C0.0390625 14.7656 1.60156 16.3281 3.48438 16.3281ZM3.48438 15C2.32812 15 1.36719 14.0312 1.36719 12.8828C1.36719 11.7344 2.33594 10.7578 3.48438 10.7578C4.625 10.7578 5.60156 11.7344 5.60156 12.8828C5.60156 14.0312 4.625 15 3.48438 15ZM9.39844 13.5859H17.2578C17.6406 13.5859 17.9531 13.2812 17.9531 12.8984C17.9531 12.5156 17.6406 12.2109 17.2578 12.2109H9.39844C9.01562 12.2109 8.71875 12.5156 8.71875 12.8984C8.71875 13.2812 9.01562 13.5859 9.39844 13.5859Z"})})},205618:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:n(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const i=o},224011:(e,t,n)=>{n.d(t,{A:()=>s});var o=()=>n(705540);class i extends(()=>n(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await o().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},o().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const s=new i},253447:(e,t,n)=>{n.d(t,{F:()=>i});var o=()=>n(963575);function i(e,t){if(e)return e;switch(t){case"large":return o().A.card.desktop.large.height;case"small":return o().A.card.desktop.small.height;default:return o().A.card.desktop.medium.height}}},256863:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(847249),i=()=>n(824862),s=n(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:r,style:l,size:d}=e,c=(0,n(959013).tz)(),u=(0,o().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:i().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),p=(0,o().K8)((()=>(null==a?void 0:a.getDisplayName(c))??(0,n(799288).Hg)(t)),[a,t,c]),{activeDotStyle:g}=(0,n(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,s.jsxs)("div",{style:l,children:[(0,s.jsx)(n(614505).B,{icon:u,title:p,size:d||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),r?(0,s.jsx)("div",{style:g}):void 0]})}},263919:(e,t,n)=>{n.d(t,{A:()=>C});n(944114),n(898992),n(354520),n(672577),n(581454);var o=n(296540),i=()=>n(847249),s=()=>n(842599),a=()=>n(985595),r=()=>n(792071),l=()=>n(798880),d=()=>n(959013),c=()=>n(284371),u=()=>n(743260),p=()=>n(299545),g=()=>n(962730),m=()=>n(406999),f=()=>n(630116),h=()=>n(760217),v=()=>n(939740),y=()=>n(64e3),b=()=>n(267155),x=n(474848);const S=(0,d().YK)({invited_page:{id:"PermissionsInviteSearchRequest.userTooltip.invited_page",defaultMessage:"{userNameAndEmail} is invited to this page already"},invited_database:{id:"PermissionsInviteSearchRequest.userTooltip.invite_database",defaultMessage:"{userNameAndEmail} is invited to this database already"},invited_space:{id:"PermissionsInviteSearchRequest.userTooltip.invited_space",defaultMessage:"{userNameAndEmail} is invited to this workspace already"},invited_team:{id:"PermissionsInviteSearchRequest.userTooltip.invited_team",defaultMessage:"{userNameAndEmail} is invited to this teamspace already"},not_in_space:{id:"PermissionsInviteSearchRequest.userTooltip.admin",defaultMessage:"Click to invite {userNameAndEmail}"}});function k(e,t){return e.filter(((e,n)=>n<t))}const C=function(e){const{store:t,shouldShowBots:C,shouldShowGroups:w,sectionRenderLimit:A,membersOnly:I,hideCurrentUser:M,hideUserTypeToken:j,disableInvitedUsers:T,guestsMustBeRequested:B,hideTitle:R,defaultUserTitle:P,performSearchRequest:_}=e,[L,E,W]=(0,i().$y)(e.permissionsInviteStore),F=(0,n(484714).v3)(),{device:D}=F,G=(0,d().tz)(),{tokenQuery:H}=L,V=(0,o.useMemo)((()=>u()._c({environment:{device:D}})),[D]),z=(0,n(401497).IS)((e=>({roleBadge:{...V},invitedBadge:{...V,backgroundColor:e.defaultBadgeBackground}})),[V]),U="invitee",N=(0,i().K8)((()=>{const e=n(21735).A.state.shouldUseEdgeCache,t=n(508496).default.checkGate({gateName:"edge_cache_settings"});return e&&t}),[]),O={request:H,performRequest:e=>_?_({query:e,limit:10,environment:F}):n(542056).hQ({query:e,sectionLimit:{userLimit:10,botLimit:C?10:0,groupLimit:w?10:0,importContactLimit:0},membersOnly:I,environment:F,intl:G,shouldUseEdgeCache:N}),render:(e,o,i)=>{if(e)return(0,x.jsx)(b().z,{loading:!i,hideTitle:R,children:(0,x.jsx)(y().A,{title:(0,x.jsx)(d().sA,{id:"inviteUserModal.searchInput.errorMessage",defaultMessage:"Something went wrong"})})});const C=o&&{...o,inviteUsers:o.inviteUsers.filter((e=>!(0,u().mQ)({permissionsInviteStore:W,target:e})&&(!M||e.value.id!==F.currentUser.id))),importedContacts:(0,u().GZ)(o.inviteUsers,o.importedContacts)},I=C&&(null==H?void 0:H.length)>0,{inviteUsers:_,inviteGroups:E,importedContacts:D=[]}=I?C:(0,u().Es)({currentInviteActors:C,permissionsInviteStore:W,targetStore:t}),V=[...k(_,A),...k(D,10)].map(((e,o)=>{const i="newUser"===e.type?e.value.email:e.value.id,s=(0,u().$D)(e),c=Boolean(I&&(0,u().VF)({permissionsInviteStore:W,userTarget:e,targetStore:t}));return{key:i,render:o=>{const{tooltip:i,userTypeToken:m}=function(e){const{userTarget:t,targetStore:n,isInvited:o,userSpaceRole:i,styles:s,intl:a}=e,c="newUser"===t.type?null:r().Bj6.fromValue(l().oo,t.value).getDisplayName(a),g=t.value.email,m=c&&c!==g?`${c} (${g})`:g,h=i&&"not_in_space"!==i;if(o)return{tooltip:(0,p().Yu)(n)?a.formatMessage(S.invited_space,{userNameAndEmail:m}):n instanceof f().Bv?a.formatMessage(S.invited_page,{userNameAndEmail:m}):n instanceof f().md?a.formatMessage(S.invited_database,{userNameAndEmail:m}):a.formatMessage(S.invited_team,{userNameAndEmail:m}),userTypeToken:(0,x.jsx)("div",{style:{...s.invitedBadge},children:(0,x.jsx)(d().sA,{id:"inviteUserModal.userRole.invitedBadge.label",defaultMessage:"Invited"})})};if(h){const e=u().S6({role:i,intl:a,nameOrEmail:m});return{tooltip:e.tooltip,userTypeToken:(0,x.jsx)("div",{style:{...s.roleBadge},children:e.userRoleBadge})}}return{tooltip:a.formatMessage(S.not_in_space,{userNameAndEmail:m}),userTypeToken:void 0}}({userTarget:e,targetStore:t,userSpaceRole:s,isInvited:c,styles:z,intl:G});return"existingUser"===e.type?(0,x.jsx)(n(457688).A,{...o,actor:(0,n(764880).A7)(e.value),right:j?void 0:m,tooltip:i,tooltipPlacement:g().W.Left,disabled:T&&c,defaultUserTitle:P}):(0,x.jsx)(n(859428).A,{placement:g().W.Left,alignment:g().C.Start,textWrap:!0,render:t=>(0,x.jsx)(h().A,{...o,...t,icon:(0,a().n)({width:24,height:24}),right:m,title:e.value.email.trim(),disabled:T&&c}),disableTooltip:!i,renderTooltip:()=>i})},action:()=>{if(T&&c)return;if(!L.isInviteTargetsEmpty&&(0,m().qs)(L))return;const t={...e,..."existingUser"===e.type&&{spaceRole:s}};n(134696).kH(F,{subscription_tier:(0,n(10984).AI)(),invite_token_query:H,selected_user_token:e,selected_user_token_rank:o,from:"permission_invite"}),W.setState({...L,inviteTargets:[...L.inviteTargets,t],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:U})}}})),N=k(E,A).map((e=>{const{value:t}=e;return{key:t.id,render:e=>(0,x.jsx)(n(862139)._,{group:t,menuListItemProps:e}),action:()=>{!L.isInviteTargetsEmpty&&(0,m().qs)(L)||W.setState({...L,inviteTargets:[...L.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:"",inputFocus:U})}}})),O=[],q=L.isInviteTargetsEmpty||!(0,m().qs)(L);if(V.length>0&&q&&O.push({key:"user results",render:e=>(0,x.jsx)(b().z,{...e,loading:!i,hideTitle:R}),items:V}),w&&N.length>0&&q&&O.push({key:"group results",render:e=>(0,x.jsx)(n(89924).A,{...e,title:(0,x.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.selectGroupTitle",defaultMessage:"Select a group"}),loading:!i}),items:N}),0===O.length&&q){const e=(0,s().qh)(L.tokenQuery);if((0,s().DT)(e)){const s={type:"newUser",value:{email:e},source:"email"},a=(0,u().mQ)({target:s,permissionsInviteStore:W});if(!a)return;if(a)return(0,x.jsx)(b().z,{loading:!i,hideTitle:R,children:(0,x.jsx)(y().A,{title:(0,x.jsx)(d().sA,{id:"inviteUserModal.userAlreadyInvitedMessage",defaultMessage:"Already inviting {user}.",values:{user:(0,x.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,u().Sk)({intl:G,target:a})})}})})});const r=(o&&o.inviteUsers||[]).find((t=>"existingUser"===t.type&&t.value.email===e));if(r&&"existingUser"===r.type&&(0,u().wF)({store:t,target:r}))return(0,x.jsx)(b().z,{loading:!i,hideTitle:R,children:(0,x.jsx)(y().A,{title:(0,x.jsx)(d().sA,{id:"inviteUserModal.userAlreadyHasPermissionMessage",defaultMessage:"{user} already has permission.",values:{user:(0,x.jsx)("span",{style:{fontWeight:c().Wy.bold},children:(0,n(695608).c6)(G,r.value)})}})})})}else{if(!L.tokenQuery)return null;O.push({key:"user results",render:e=>(0,x.jsx)(b().z,{...e,loading:!i,hideTitle:R,title:B?(0,x.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.requestPeople",defaultMessage:"Keep typing to request inviting an email"}):(0,x.jsx)(d().sA,{id:"inviteUserModal.searchDropdown.addPeople",defaultMessage:"Keep typing to invite email"})}),items:[{key:L.tokenQuery,render:e=>(0,x.jsx)(h().A,{icon:(0,a().n)({width:24,height:24}),title:L.tokenQuery,...e}),action:()=>{}}]})}}return(0,x.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:H.length>0?0:void 0,sections:O})}};return(0,x.jsx)(n(251126).A,{...O})}},267155:(e,t,n)=>{n.d(t,{z:()=>r});n(296540);var o=()=>n(401497),i=()=>n(959013),s=()=>n(89924),a=n(474848);function r(e){const t=(0,o().IS)((()=>({container:{paddingBlock:4}})),[]);return(0,a.jsx)(s().A,{title:e.hideTitle?void 0:(0,a.jsx)(i().sA,{id:"inviteUserModal.searchDropdown.selectPersonTitle",defaultMessage:"Select a person"}),style:t.container,...e})}},271232:(e,t,n)=>{n.d(t,{t:()=>s});var o=n(296540),i=n(474848);const s=o.memo((function(e){const{coverHeight:t,coverSizeFormat:o,emptyGalleryCoverStyle:s}=e,a=(0,n(401497).IS)((()=>({container:{height:(0,n(253447).F)(t,o),...s}})),[t,o,s]);return(0,i.jsx)("div",{style:a.container})}))},277201:(e,t,n)=>{n.d(t,{I:()=>S,i:()=>C});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(401497),r=()=>n(387964),l=()=>n(340498),d=()=>n(959013),c=()=>n(186445),u=()=>n(38337),p=()=>n(869562),g=()=>n(749687),m=()=>n(962730),f=()=>n(948914),h=()=>n(145214),v=()=>n(285790),y=()=>n(35392),b=()=>n(859428),x=n(474848);function S(e){const t=(0,i().v3)(),n=(0,i().Y0)(),o=(0,d().tz)(),a=(0,s().O$)(g().sidebarMouseEnteredStore),l=(0,s().O$)(f().b),u=(0,s().O$)(c().$o),m=o.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),h=(!n.isElectronMac||!u)&&!l&&a;return(0,x.jsx)(C,{isVisible:h,icon:r().S,caption:m,onClick:()=>{p().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const k={width:l().Ev.lg,height:l().Ev.lg,fill:"inherit"};function C(e){const t=(0,i().Y0)(),n=(0,a().IS)((e=>({keyboardShortcut:{color:e.text.contrastSecondary},button:{fill:e.mediumIconColor}})),[]),s=(0,o.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button,t.isMobile]);return(0,x.jsx)(b().A,{renderTooltip:()=>(0,x.jsxs)("div",{children:[(0,x.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,x.jsx)(y().A,{style:n.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?m().W.Right:m().W.Bottom,render:n=>(0,x.jsx)(h().A,{tag:v().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:s,hoveredStyle:e.hoveredStyle,iconStyle:k,mobileFeedback:t.isMobile,onClick:e.onClick,className:u().P7S,...n})})}},279900:(e,t,n)=>{function o(e){let t,n,o;return async function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return t?(o=s,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...s),t)}}n.d(t,{A:()=>o})},299177:(e,t,n)=>{n.d(t,{A:()=>s});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o;n(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const s=i},311004:(e,t,n)=>{e.exports=n.p+"edfba4a6d1ff7acd.png"},352759:(e,t,n)=>{n.d(t,{p:()=>y,t:()=>b});n(581454),n(296540);var o=()=>n(484714),i=()=>n(847249),s=()=>n(584262),a=()=>n(959013),r=()=>n(857783),l=()=>n(255018),d=()=>n(939740),c=()=>n(958378),u=()=>n(89924),p=()=>n(900967),g=()=>n(728611),m=()=>n(211716),f=()=>n(592968),h=()=>n(551619),v=n(474848);function y(e){let{store:t}=e;return(0,v.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:h().NV,onClick:h().sx,children:(0,v.jsx)(l().A,{type:"page",store:t,headerText:(0,v.jsx)(a().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function b(e){let{store:t}=e;const n=(0,o().v3)(),a=(0,i().K8)((()=>(0,p().c)(t,n)),[t,n]),l=(0,i().K8)((()=>a.backlinks.map((e=>e.backlinkStore))),[a]).map(((e,t)=>({key:e.id,render:t=>(0,v.jsx)(c().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:o}=t;f().F.setState({isOpen:!1});const i=g().Vr(o);r().uK({environment:n,store:e,openInNew:i,visitType:m().ig.Link,pageVisitSource:s().y8.Backlinks})}})));return(0,v.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:l,render:e=>(0,v.jsx)(u().A,{...e})}]})}},358006:(e,t,n)=>{n.d(t,{z:()=>a});n(296540);var o=()=>n(645873),i=n(474848);const s=new(o().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await n.e(79883).then(n.bind(n,873718));return{CollectionItemCover:e}})),a=(0,o()._h)(s,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:o,coverSizeFormat:s,emptyGalleryCoverStyle:a,showEmptyGalleryCover:r}=t;return r?(0,i.jsx)(n(271232).t,{coverHeight:o,coverSizeFormat:s,emptyGalleryCoverStyle:a}):null}})},381138:(e,t,n)=>{n.d(t,{q:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},387964:(e,t,n)=>{n.d(t,{S:()=>s});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,o.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},s=(0,n(340498).wt)("arrowChevronDoubleBackward",i)},417555:(e,t,n)=>{n.d(t,{A:()=>c});n(296540);var o=()=>n(799288),i=()=>n(784892),s=()=>n(738418),a=()=>n(695608),r=()=>n(534177),l=()=>n(698449),d=n(474848);const c=function(e){let{isStrikedThrough:t,backgroundColor:c,onClickRemove:u,target:p,disabled:g,showInfoIcon:m,style:f,shouldWrap:h}=e;const v=(0,n(484714).v3)(),y=(0,n(959013).tz)(),{device:b}=v,x=(0,n(847249).K8)((()=>function(e){let t,{target:n,intl:i,showInfoIcon:c}=e;switch(n.type){case"newUser":t=n.value.email.trim();break;case"existingUser":t=(0,a().c6)(i,n.value);break;case"bot":t=(0,o().Hg)(n.value);break;case"group":t=(0,l().Pf)({intl:i,groupName:n.value.name});break;default:(0,r().HB)(n)}return c?(u=t,(0,d.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,s().G)({marginRight:4,width:14,height:14}),u]})):t;var u}({target:p,intl:y,showInfoIcon:m})),[p,y,m]);return(0,d.jsx)(n(881690).A,{showRemoveButton:!0,isSingle:!0,isStrikedThrough:t,backgroundColor:c,format:b.isMobile?i().NY.Large:i().NY.Medium,onClickRemove:e=>function(e,t,n){e.stopPropagation(),t(n)}(e,u,p),disabled:g,disabledFeedback:!0,value:x,style:f,shouldWrap:h})}},423098:(e,t,n)=>{n.r(t),n.d(t,{AiBlockV2:()=>Ft});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(153321),i=n(296540),s=()=>n(17022),a=()=>n(662303),r=()=>n(484714),l=()=>n(847249),d=()=>n(401497),c=()=>n(534177),u=()=>n(68263),p=()=>n(179034),g=()=>n(519831),m=()=>n(96689),f=()=>n(189141);function h(e){const{referenceContext:t,getRecordRole:n,getCanReadSlackChannel:o}=e;if(!t)return!0;for(const i of t)if("collection"===i.type){const e=n({id:i.collectionId,table:g().Vl})??"none";if(!(0,u().Tt)(e))return!1}else if("page"===i.type||"currentPage"===i.type){const e=n({id:i.pageId,table:p().ev})??"none";if(!(0,u().Tt)(e))return!1}else if("slack"===i.type){if(!o(i))return!1}else(0,c().HB)(i);return!0}class v{constructor(e){this.permissionLevel=void 0,this.permissionLevel=e}canOpenConfigurationPanel(){switch(this.permissionLevel){case"editor":case"configuration_reader":return!0;case"reader":return!1;default:(0,c().HB)(this.permissionLevel)}}canEditConfigurationPanel(){switch(this.permissionLevel){case"reader":case"configuration_reader":return!1;case"editor":return!0;default:(0,c().HB)(this.permissionLevel)}}canGenerateBlock(){switch(this.permissionLevel){case"editor":return!0;case"configuration_reader":case"reader":return!1;default:(0,c().HB)(this.permissionLevel)}}canDuplicateBlock(){switch(this.permissionLevel){case"reader":return!1;case"configuration_reader":case"editor":return!0;default:(0,c().HB)(this.permissionLevel)}}}var y=()=>n(857639),b=()=>n(513416),x=()=>n(134025),S=()=>n(370085),k=()=>n(439180),C=()=>n(959013),w=()=>n(532659),A=()=>n(496603),I=()=>n(532313),M=()=>n(284371),j=()=>n(449506),T=()=>n(901389),B=()=>n(44729),R=()=>n(915457),P=()=>n(246826),_=()=>n(751156),L=()=>n(859428),E=()=>n(989423),W=()=>n(864145),F=()=>n(972435),D=()=>n(351360),G=()=>n(829e3),H=()=>n(630116),V=()=>n(155004),z=()=>n(406699),U=()=>n(493733),N=n(474848);function O(e){const{traceId:t,feedbackState:o,setFeedbackState:i}=e;return(0,N.jsx)(n(617837).j,{setFeedbackState:i,feedbackState:o,traceId:t,feedbackType:"ai_block"})}var q=()=>n(936916),K=(n(672577),n(581454),()=>n(908006)),$=()=>n(395361),Y=()=>n(727706),Z=()=>n(668725),Q=()=>n(54241),X=()=>n(188799),J=()=>n(919709),ee=()=>n(829300),te=()=>n(725614),ne=()=>n(515692),oe=()=>n(220331),ie=()=>n(928600),se=()=>n(38337),ae=()=>n(847743),re=()=>n(792540),le=()=>n(722872),de=()=>n(231722),ce=()=>n(24157),ue=()=>n(84817),pe=()=>n(493823),ge=()=>n(843189),me=()=>n(760217),fe=()=>n(805751),he=()=>n(939740),ve=()=>n(509657),ye=()=>n(204063),be=()=>n(89924),xe=()=>n(628864),Se=()=>n(524702),ke=()=>n(946548),Ce=()=>n(125565);function we(e){const{store:t,style:n}=e,o=(0,r().v3)(),s=(0,l().K8)((()=>{const e=t.getNavigableBlockStore();return(null==e?void 0:e.isTemplate())??!1}),[t]),a=(0,l().K8)((()=>t.autoGenerateOnTemplateDuplication()),[t]),d=(0,i.useCallback)((()=>{_().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:o,canUndo:!0,perform:e=>{P().zv({store:t.getFormatStore().getKeyStore("ai_block_configuration_menu"),data:{autoGenerateOnTemplateDuplication:!a},transaction:e})}})}),[t,o,a]);return s?(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",...n},children:[(0,N.jsx)(Ce().A,{children:(0,N.jsx)(C().sA,{id:"AiBlockV2.AutoGenerateOnTemplateDuplicationFieldToggle.Label",defaultMessage:"Autofill when template is duplicated"})}),(0,N.jsx)(ke().A,{on:a,onClick:d})]}):null}n(944114);var Ae=()=>n(148307),Ie=()=>n(149375),Me=()=>n(245241),je=()=>n(778078),Te=()=>n(604018),Be=()=>n(825972),Re=()=>n(135599),Pe=()=>n(962730),_e=()=>n(970585),Le=()=>n(464708),Ee=()=>n(285790),We=()=>n(64e3),Fe=()=>n(897119),De=()=>n(958378),Ge=(n(18107),n(967357),()=>n(612740)),He=()=>n(784892),Ve=()=>n(416504),ze=()=>n(614505),Ue=()=>n(16006),Ne=()=>n(881690);const Oe=(0,n(340498).xh)("plus",{default:{loader:()=>n.e(8881).then(n.bind(n,617668))},small:{loader:()=>n.e(8881).then(n.bind(n,863330))},fill:{loader:()=>n.e(8881).then(n.bind(n,73822))},fillSmall:{loader:()=>n.e(8881).then(n.bind(n,621837))}},["plus","add","new","create","increase"]);var qe=()=>n(623580),Ke=()=>n(460292);const $e=(0,C().YK)({addContextPlaceholder:{id:"ContextTokenPlaceholderTypeahead.addContextPlaceholder",defaultMessage:"Add context"}});function Ye(e){const{disabled:t,currentlyFocusedItem:n,items:o,query:s,setQuery:a,isMenuOpen:r,hasContextsAlready:l,inputRef:c}=e,u=(0,C().tz)(),p=(0,i.useMemo)((()=>{var e;if(!s)return;if(n)return n.title.toLowerCase().startsWith(s.toLowerCase())?`${s}${n.title.slice(s.length)}`:s;const t=null===(e=o.find((e=>e.title.toLowerCase().startsWith(s.toLowerCase()))))||void 0===e?void 0:e.title;return t?`${s}${t.slice(s.length)}`:s}),[o,s,n]),g=(0,i.useMemo)((()=>!r&&l),[r,l]),m=(0,i.useMemo)((()=>s?p??"":u.formatMessage($e.addContextPlaceholder)),[s,u,p]),f=(0,i.useRef)(null),[h,v]=(0,i.useState)(null);(0,i.useEffect)((()=>{f.current&&v(f.current.offsetWidth)}),[f,m,g]),(0,i.useEffect)((()=>{r||a("")}),[r,a]);const y=(0,d().IS)((e=>({container:{display:"flex",alignItems:"center",background:g?"transparent":e.inputBackground,borderRadius:6,paddingLeft:0,paddingRight:0,height:24,...M().RC},backgroundInput:{height:void 0,position:"absolute",top:0,left:0,display:"flex",alignItems:"center",borderRadius:6,paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,fontSize:14,lineHeight:"20px",width:"fit-content",...M().RC,color:e.text.quaternary},foregroundInput:{boxShadow:"none",background:"transparent",width:null===h?void 0:h,color:e.text.secondary},plusIcon:{fill:e.text.quaternary,width:14,height:14,marginLeft:6,...g&&{marginRight:6}}})),[h,g]);return(0,N.jsx)(L().A,{disableTooltip:!g,textWrap:!0,style:{minWidth:200,padding:"4px 8px"},renderTooltip:()=>(0,N.jsx)(C().sA,{id:"ContextTokenPlaceholderTypeahead.tooltip",defaultMessage:"Add context to help Notion AI generate relevant content"}),render:n=>(0,N.jsxs)(pe().p,{...n,style:y.container,onClick:e.onFocus,disabled:t,children:[(0,N.jsx)(Ke().Q,{iconGroup:Oe,variantName:"default",colorName:"grayPrimary",style:y.plusIcon}),!g&&(0,N.jsxs)("div",{style:{position:"relative"},children:[(0,N.jsx)("div",{ref:f,style:y.backgroundInput,children:m}),(0,N.jsx)(fe().A,{capture:!0,debugName:"ContextTokenPlaceholderTypeahead",allowMenuList:!0,children:(0,N.jsx)(qe().A,{ref:c,disabled:t,style:y.foregroundInput,focus:r,value:s,onChange:e=>{a(e.target.value)},suppressFocusRing:!0,onFocus:()=>{e.onFocus()}})})]})]})})}const Ze=(0,C().YK)({slackIconAriaLabel:{id:"AiBlockV2ContextTokenInput.slackIconAriaLabel",defaultMessage:"Slack"}});function Qe(e){const{disabled:t,currentContexts:n,contextInputRef:o,inputRef:s,query:a,setQuery:r,searchResultMenuIsOpen:u,setSearchResultMenuIsOpen:p,handleUpdateContexts:g,searchResultMenuState:m,menuListStore:f}=e,h=(0,Ve().P)(),v=(0,C().tz)(),y=(0,l().K8)((()=>"notion"===m.type?m.results.map((e=>({key:e.blockStore.id,item:e,title:e.blockStore.getRenderTitle({userTimeZone:h,intl:v})??(0,Ge().L)(v)}))):"slack"===m.type?m.results.map((e=>({key:e.channel.id,title:e.channel.name,item:e}))):"choose"===m.type?[]:void(0,c().HB)(m)),[m,h,v]),b=(0,l().K8)((()=>{const e=f.state.focus.indexGlobal;return void 0!==e?y.at(e):void 0}),[f,y]),x=(0,i.useCallback)((e=>{g(n.filter((t=>!(0,A().n4)(t,e))))}),[n,g]),S=(0,d().IS)((e=>({container:{position:"relative",borderRadius:6,boxShadow:e.inputBoxShadow,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",display:"flex",alignItems:"center",padding:4,gap:4,flexWrap:"wrap",cursor:"pointer"},firstLinePlaceholder:{position:"absolute",top:0,left:0,height:32,width:"100%"}})),[]);return(0,N.jsxs)("div",{style:S.container,onClick:()=>p(!0),children:[(0,N.jsx)("div",{ref:o,style:S.firstLinePlaceholder}),(0,N.jsx)(Ye,{disabled:t,inputRef:s,query:a,setQuery:r,items:y,currentlyFocusedItem:b,onSuggestionSelected:e=>{u&&(g([e.item,...n]),r(""),p(!1))},hasContextsAlready:n.length>0,onFocus:()=>{p(!0)},isMenuOpen:u}),n.map((e=>(0,N.jsx)(Xe,{contextItem:e,disabled:t,onRemove:t=>{x(e),t.preventDefault(),t.stopPropagation()}},function(e){if("currentPage"===e.type)return`currentPage-${e.blockStore.id}`;if("block"===e.type)return`block-${e.blockStore.id}`;if("slack"===e.type)return`slack-${e.channel.id}`}(e))))]})}function Xe(e){const{contextItem:t,disabled:n,onRemove:o}=e,i=(0,C().tz)(),s=(0,Ve().P)(),a=(0,l().K8)((()=>"currentPage"===t.type||"block"===t.type?t.blockStore.getRenderTitle({userTimeZone:s,intl:i})??(0,Ge().L)(i):"slack"===t.type?t.channel.name:void(0,c().HB)(t)),[t,i,s]),r=(0,d().IS)((e=>({tokenWrapper:{backgroundColor:e.lightGrayBannerBackground,cursor:"pointer",paddingLeft:4,paddingRight:4,paddingTop:12,paddingBottom:12,borderRadius:4,maxWidth:150,height:24,color:e.text.secondary}})),[]);return(0,N.jsx)(Ne().A,{disabled:n,style:r.tokenWrapper,format:He().NY.Small,isSingle:!0,shouldShrink:!0,backgroundColor:"transparent",shouldWrap:!1,showRemoveButton:!0,onClickRemove:o,value:(0,N.jsx)(nt,{contextItem:t}),showTooltip:"overflow",tooltip:a,tooltipPlacement:Pe().W.Bottom,tooltipOriginGap:0})}const Je=16,et=12;function tt(){return(0,d().IS)((e=>({recordTitleStyle:{display:"flex",alignItems:"center",gap:4}})),[])}function nt(e){const{contextItem:t}=e;return"currentPage"===t.type?(0,N.jsx)(ot,{blockStore:t.blockStore}):"block"===t.type?(0,N.jsx)(it,{blockStore:t.blockStore}):"slack"===t.type?(0,N.jsx)(st,{channel:t.channel}):(0,c().HB)(t)}function ot(e){const{blockStore:t}=e,n=tt(),o=(0,l().K8)((()=>t.getIcon()),[t]);return(0,N.jsxs)("div",{style:n.recordTitleStyle,children:[(0,N.jsx)(ze().B,{disabled:!0,icon:o,isEmptyPage:!1,size:Je}),(0,N.jsx)("div",{style:M().RC,children:(0,N.jsx)(C().sA,{defaultMessage:"Current page",id:"ContextTokenInput.currentPage"})})]})}function it(e){const{blockStore:t}=e,n=tt(),o=(0,l().K8)((()=>t.getIcon()),[t]);return(0,N.jsxs)("div",{style:n.recordTitleStyle,children:[(0,N.jsx)(ze().B,{disabled:!0,icon:o,isEmptyPage:!1,size:Je}),(0,N.jsx)(Ue().A,{store:t})]})}function st(e){const{channel:t}=e,n=tt(),o=(0,C().tz)();return(0,N.jsxs)("div",{style:n.recordTitleStyle,children:[(0,N.jsx)("img",{width:et,src:Ae().A.images.externalIntegrations.slackIconPng,alt:o.formatMessage(Ze.slackIconAriaLabel)}),(0,N.jsx)("div",{children:t.name})]})}const at=(0,C().YK)({notionIconAriaLabel:{id:"notionIconAriaLabel",defaultMessage:"Notion"},slackIconAriaLabel:{id:"slackIconAriaLabel",defaultMessage:"Slack"},notionContextLabel:{id:"notionContextLabel",defaultMessage:"Notion"},slackContextLabel:{id:"slackContextLabel",defaultMessage:"Slack"}}),rt="notion";function lt(e){var t;const{currentContexts:n,handleUpdateContexts:o,disabled:s}=e,[a,d]=(0,i.useState)(!1),u=(0,l().uB)(void 0,_e().A),p=(0,l().K8)((()=>["notion",...(0,Te().wd)().filter(ut)]),[]),[g,m]=(0,i.useState)(""),{searchResultMenuState:f,setCurrentSearchContext:h}=function(e){const{availableSearchContexts:t,currentContexts:n,query:o}=e,s=t.length>1,[a,d]=(0,i.useState)(s?void 0:rt),u=(0,r().v3)(),p=(0,l().O$)(D().AppStoreCurrentSpaceStore),g=null==p?void 0:p.id,m=(0,l().K8)((()=>Be().NK.state.map((e=>e.store))),[]),{results:f,isResultsLoading:h}=(0,Re().W)({source:"ai_block_v2_page_context_search",query:o,limit:20,type:Me().Vz.BlocksInSpace,excludedBlockIds:n.filter((e=>"slack"!==e.type)).map((e=>e.blockStore.id)),filters:{requireEditPermissions:!1,excludeTemplates:!1},options:{disable:!o||"notion"!==a}}),v=(0,i.useMemo)((()=>f.map((e=>e.store))),[f]),y=(0,i.useMemo)((()=>o?h?"searching":"loaded":"default"),[o,h]),b=(0,l().O$)(D().AppStoreMainEditorCurrentBlockStore),x=(0,l().K8)((()=>{if(o)return v??[];return[...b?[b]:[],...m]}),[o,v,m,b]);(0,i.useEffect)((()=>{g&&(0,xe().Hn)({environment:u,spaceId:g,externalAuthConfig:{type:"universal",app:"slack",spaceId:g}})}),[u,g]);const{channels:S,isFetchingSlack:k}=(0,l().K8)((()=>{if(!g)return{channels:G().m.channels,isFetchingSlack:G().m.fetching};const e=G().c.getStateForBot({type:"universal",app:"slack",spaceId:g});return{channels:e.channels,isFetchingSlack:e.fetching}}),[g]),C=(0,i.useMemo)((()=>Object.values(S).map((e=>({type:"slack",channel:e})))),[S]),[w,A]=(0,i.useState)([]);(0,i.useEffect)((()=>{0===w.length&&C.length>0&&A(C)}),[C,w.length]);const I=function(e,t){const[n,o]=(0,i.useState)(e);return(0,i.useEffect)((()=>{const n=setTimeout((()=>o(e)),t);return()=>clearTimeout(n)}),[e,t]),n}(o,300),[M,j]=(0,i.useState)([]);(0,i.useEffect)((()=>{let e=!1;async function t(){if("slack"===a&&I){const t=await async function(e,t,n,o){const i=100,s=[];for(let a=0;a<t.length;a+=i){const r=t.slice(a,a+i);await new Promise((e=>setTimeout(e,0)));const l=(0,je().Ay)(e,r,n,o);s.push(...l)}return(0,je().Ay)(e,s,n,o)}(I,C,(e=>e.channel.name));e||j(t)}else j(w)}return t(),()=>{e=!0}}),[a,I,C,w]);const T=(0,i.useDeferredValue)(I),B=(0,i.useMemo)((()=>"slack"===a&&T?M:w),[a,T,w,M]),R=(0,i.useMemo)((()=>{if(!a)return{type:"choose"};const e=x.map((e=>({type:e.id===(null==b?void 0:b.id)?"currentPage":"block",blockStore:e})));if("slack"===a){let e="default";return o&&(e=k?"searching":"loaded"),{type:a,status:e,results:B}}if("notion"===a)return{type:a,status:y,results:e};(0,c().HB)(a)}),[a,o,x,B,y,k,b]);return{setCurrentSearchContext:d,searchResultMenuState:dt({currentContexts:n,state:R})}}({availableSearchContexts:p,currentContexts:n,query:g}),v=(0,i.useRef)(null),y=(0,i.useRef)(null);return(0,N.jsx)(Fe().Ay,{popupType:Fe().nl.Popup,open:a,onDismiss:()=>{d(!1)},placementToOrigin:Pe().W.Bottom,alignmentToOrigin:Pe().C.Start,originRect:null==y||null===(t=y.current)||void 0===t?void 0:t.getBoundingClientRect(),trapFocus:!1,sameWidthAsOrigin:!0,origin:(0,N.jsx)(Qe,{disabled:s,currentContexts:n,inputRef:v,handleUpdateContexts:o,searchResultMenuIsOpen:a,setSearchResultMenuIsOpen:d,menuListStore:u,query:g,setQuery:m,searchResultMenuState:f,contextInputRef:y}),render:()=>(0,N.jsx)(ct,{query:g,setQuery:m,availableSearchContexts:p,onSelectResult:e=>{o([e,...n]),d(!1),m("")},currentContexts:n,setCurrentSearchContext:e=>{var t;h(e),null===(t=v.current)||void 0===t||t.focus()},state:f,menuListStore:u})})}function dt(e){const{currentContexts:t,state:n}=e,o=new Set,i=new Set;for(const s of t)"block"===s.type?o.add(s.blockStore.id):"slack"===s.type?i.add(s.channel.id):"currentPage"===s.type?o.add(s.blockStore.id):(0,c().HB)(s);if("choose"===n.type)return n;if("notion"===n.type){const e=(0,A().hS)(n.results.filter((e=>!o.has(e.blockStore.id))),(e=>e.blockStore.id));return{...n,results:e}}if("slack"===n.type){const e=n.results.filter((e=>!i.has(e.channel.id))).sort(((e,t)=>e.channel.name.localeCompare(t.channel.name)));return{...n,results:e}}(0,c().HB)(n)}function ct(e){const{onSelectResult:t,availableSearchContexts:n,state:o,setCurrentSearchContext:s,menuListStore:a,query:r,setQuery:l}=e,u=(0,C().tz)(),p=(0,d().IS)((e=>({backText:{color:e.text.tertiary,fontSize:12},backContentWrap:{display:"flex",alignItems:"center",cursor:"pointer",marginTop:4,marginLeft:8}})),[]),g=(0,i.useMemo)((()=>(0,je().Ay)(r,n,(e=>"notion"===e?u.formatMessage(at.notionContextLabel):"slack"===e?u.formatMessage(at.slackContextLabel):void(0,c().HB)(e)))),[n,r,u]),m=(0,i.useMemo)((()=>{const e={key:"no-results",render:()=>(0,N.jsx)(We().A,{title:(0,N.jsx)(C().sA,{defaultMessage:"No results found.",id:"contextTokenInput.searchResultMenu.noResults.message"})}),action:()=>{}};if("choose"===o.type)return 0===g.length?[e]:g.map((e=>({key:e,render:t=>(0,N.jsx)(pt,{...t,searchContext:e}),action:()=>{s(e),l("")}})));const n=[];return"default"===o.status||"loaded"===o.status||"searching"===o.status?0===o.results.length?"searching"===o.status?(n.push({key:"loading",render:()=>(0,N.jsx)(We().A,{title:(0,N.jsx)(C().sA,{defaultMessage:"Loadingâ€¦",id:"contextTokenInput.searchResultMenu.loading.message"})}),action:()=>{}}),n):(n.push(e),n):n.concat(o.results.map((e=>"block"===e.type?{key:e.blockStore.id,render:t=>(0,N.jsx)(De().A,{...t,store:e.blockStore}),action:()=>{t(e)}}:"slack"===e.type?{key:e.channel.id,render:t=>(0,N.jsx)(xe().qj,{...t,channel:e.channel}),action:()=>{t(e)}}:"currentPage"===e.type?{key:`${e.blockStore.id}-currentPage`,render:t=>(0,N.jsx)(De().A,{...t,store:e.blockStore,right:(0,N.jsx)(Le().A,{content:(0,N.jsx)(C().sA,{id:"ContextTokenInput.currentPage",defaultMessage:"Current page"})})}),action:()=>{t(e)}}:void(0,c().HB)(e)))):(0,c().HB)(o.status)}),[o,g,s,t,l]);return(0,N.jsx)(ie().A,{menuType:le().gu.Popup,maxHeight:200,header:"choose"!==o.type&&n.length>1&&(0,N.jsx)("div",{style:p.backContentWrap,children:(0,N.jsx)(Ee().A,{ariaLabel:u.formatMessage({id:"ContextTokenInput.backButton",defaultMessage:"Back"}),icon:Ie().v,onClick:()=>{s(void 0)},caption:(0,N.jsx)("div",{style:p.backText,children:(0,N.jsx)(C().sA,{id:"ContextTokenInput.backButton",defaultMessage:"Back"})}),captionStyle:{textTransform:void 0,letterSpacing:void 0}})}),children:(0,N.jsx)(he().Ay,{type:he().Oh.Vertical,initialFocus:0,store:a,sections:[{key:"search-results",render:e=>(0,N.jsx)(be().A,{...e}),items:m}]})})}const ut=(0,c().u0)((e=>"slack"===e?{true:e}:{false:e})),pt=i.forwardRef(((e,t)=>{const{searchContext:n,...o}=e,i=(0,C().tz)();let s,a;return"notion"===n?s=(0,N.jsx)("img",{width:20,src:Ae().A.images.notionLogoPng,alt:i.formatMessage(at.notionIconAriaLabel)}):"slack"===n?s=(0,N.jsx)("img",{width:20,src:Ae().A.images.externalIntegrations.slackIconPng,alt:i.formatMessage(at.slackIconAriaLabel)}):(0,c().HB)(n),"notion"===n?a=i.formatMessage(at.notionContextLabel):"slack"===n?a=i.formatMessage(at.slackContextLabel):(0,c().HB)(n),(0,N.jsx)(me().A,{ref:t,...o,icon:s,title:a})}));pt.displayName="SearchContextMenuItem";var gt=()=>n(792485),mt=()=>n(68465),ft=()=>n(227440);const ht=(0,C().YK)({disabledAiCredits:{id:"AiBlockV2.disabled.aiCredits",defaultMessage:"AI is currently disabled"},currentlyGenerating:{defaultMessage:"Generation in progress",id:"AiBlockV2.currentlyGenerating"},cannotEditBlock:{defaultMessage:"This block cannot be edited",id:"AiBlockV2.cannotEditBlock"},insufficientPermissions:{defaultMessage:"You do not have permission to generate this block",id:"AiBlockV2.insufficientPermissions"},noInstructions:{defaultMessage:"No instructions provided",id:"AiBlockV2.noInstructions"},offline:{defaultMessage:"Unavailable while offline",id:"AiBlockV2.offline"}});function vt(e){const{store:t,isGenerating:n,permissionLevelCalculator:o}=e,i=(0,gt().S)(),s=(0,C().tz)(),{blockConfiguration:a}=yt(t),r=!(0,l().O$)(ft().e);return(0,l().K8)((()=>{const e=i&&i.publicEditModeStore.state;return(0,mt().ZE)(e)?n?{isDisabled:!0,disabledMessage:s.formatMessage(ht.currentlyGenerating)}:r?{isDisabled:!0,disabledMessage:s.formatMessage(ht.offline)}:!t.canEdit()||t.isNonEditableState()?{isDisabled:!0,disabledMessage:s.formatMessage(ht.cannotEditBlock)}:o.canGenerateBlock()?"summarizeThisPage"===a.type||"extractKeyPointsFromThisPage"===a.type||a.autofillInstructions?{isDisabled:!1}:{isDisabled:!0,disabledMessage:s.formatMessage(ht.noInstructions)}:{isDisabled:!0,disabledMessage:s.formatMessage(ht.insufficientPermissions)}:{isDisabled:!0,disabledMessage:s.formatMessage(ht.disabledAiCredits)}}),[i,n,t,o,a,s,r])}function yt(e){const t=(0,r().v3)();return{blockConfiguration:(0,l().K8)((()=>bt({model:e.getModel()})),[e]),updateBlockConfiguration:(0,i.useCallback)((n=>{_().createAndCommit({userAction:"AiBlock.updateBlockConfiguration",environment:t,canUndo:!0,perform:t=>{_().applyOperation({store:e,operation:x().op.update({pointer:e.pointer,path:["format"],args:{ai_block_configuration_menu:n}}),transaction:t})}})}),[t,e])}}function bt(e){var t;const{model:n}=e;if(!n)return f().Z0;const o=null===(t=D().default.state.currentSpaceStore)||void 0===t?void 0:t.getRecordModel;if(!o)return f().Z0;if(null==n||!n.getFormatValue("ai_block_configuration_menu")){const e=(0,f().Hx)({model:n,getRecordModel:o});if(e)return e}return(0,f().Lv)({model:n})}function xt(e){const{store:t,isGenerating:n,permissionLevelCalculator:o}=e,s=vt({store:t,isGenerating:n,permissionLevelCalculator:o}),a=(0,d().IS)((()=>({generatingText:{display:"flex",alignItems:"center",justifyContent:"center",paddingTop:4,paddingBottom:4,paddingLeft:6,paddingRight:8,fontSize:14,fontWeight:400}})),[]),r=function(e){const t=(0,C().tz)(),n=(0,l().K8)((()=>{const n=e.getFormat().ai_last_edited;return n?t.formatDate(n,{day:"numeric",month:"long",year:"numeric"}):void 0}),[t,e]);return(0,l().K8)((()=>{var o;const i=e.getLastEditedTime();if(!i)return;const s=t.formatDate(i,{day:"numeric",month:"long",year:"numeric"});if(s===n)return{lastAiEditGenerationTime:n,lastEditedByName:void 0,lastHumanEditedTime:void 0};return{lastEditedByName:(null===(o=e.getLastEditedByStore())||void 0===o?void 0:o.getDisplayName(t,!1))??void 0,lastHumanEditedTime:s,lastAiEditGenerationTime:n}}),[t,n,e])}(t),c=(0,i.useMemo)((()=>n?(0,N.jsx)(C().sA,{id:"aiBlock.generate.loading.label",defaultMessage:"Generatingâ€¦"}):null!=r&&r.lastAiEditGenerationTime?(0,N.jsx)(C().sA,{id:"aiBlock.configurableTitle.regenerate",defaultMessage:"Regenerate"}):(0,N.jsx)(C().sA,{id:"aiBlock.configurableTitle.editlabel",defaultMessage:"Generate"})),[n,r]);return(0,N.jsx)(L().A,{renderTooltip:()=>(0,N.jsx)(St,{store:t,disabledResult:s,lastGeneratedProps:r}),disableTooltip:!s.isDisabled&&!r,render:e=>(0,N.jsx)("div",{style:a.generatingText,...e,children:c})})}function St(e){const{disabledResult:t,lastGeneratedProps:n}=e,o=(0,d().IS)((e=>({darkTextColor:{color:"#787774"}})),[]);return t.isDisabled?(0,N.jsx)("div",{children:t.disabledMessage}):n?(0,N.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",gap:4},children:[n.lastEditedByName&&n.lastHumanEditedTime&&(0,N.jsx)("div",{style:o.darkTextColor,children:(0,N.jsx)(C().sA,{defaultMessage:"Edited by <whiteName>{personName}</whiteName> {timestamp}",id:"AiBlockV2.lastGeneratedByHuman",values:{personName:n.lastEditedByName,whiteName:e=>(0,N.jsx)("span",{style:{color:"white"},children:e}),timestamp:n.lastHumanEditedTime}})}),(0,N.jsx)("div",{style:o.darkTextColor,children:(0,N.jsx)(C().sA,{defaultMessage:"Generated by <white>AI</white> {timestamp}",id:"AIBlockV2.LastGeneratedAt",values:{timestamp:n.lastAiEditGenerationTime,white:e=>(0,N.jsx)("span",{style:{color:"white"},children:e})}})})]}):null}const kt=(0,C().YK)({custom:{id:"AiBlockV2.skillSelector.custom",defaultMessage:"Custom"},summarize:{id:"AiBlockV2.skillSelector.summarize",defaultMessage:"Summarize"},extractKeyPoints:{id:"AiBlockV2.skillSelector.extractKeyPoints",defaultMessage:"Extract key points"}});function Ct(e){const{store:t,handleGenerateClick:n,isGenerating:o,permissionLevelCalculator:i,updateBlockConfiguration:s}=e,a=(0,d().IS)((()=>({popup:{marginTop:4,width:300,padding:12,paddingTop:4,display:"flex",flexDirection:"column",gap:10}})),[]),r=vt({store:t,isGenerating:o,permissionLevelCalculator:i});return(0,N.jsxs)("div",{style:a.popup,children:[(0,N.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,N.jsx)("div",{style:{fontSize:14,fontWeight:500,marginLeft:4},children:(0,N.jsx)(C().sA,{id:"aiBlock.configuration.blockSettingsTitle",defaultMessage:"AI block"})}),(0,N.jsx)(Bt,{store:t,permissionCalculator:i})]}),(0,N.jsx)(we,{style:{marginLeft:4,marginRight:4},store:t}),(0,N.jsx)(At,{store:t,permissionLevelCalculator:i,updateBlockConfiguration:s}),(0,N.jsx)(wt,{store:t}),r.isDisabled?(0,N.jsx)(ge().E,{style:{cursor:"not-allowed"},onClick:n,isLoading:o,disabled:!0,children:(0,N.jsx)(xt,{isGenerating:o,store:t,permissionLevelCalculator:i})}):(0,N.jsx)(ye().A,{onClick:n,isLoading:o,children:(0,N.jsx)(xt,{isGenerating:o,store:t,permissionLevelCalculator:i})})]})}function wt(e){const t=(0,d().IS)((e=>({divider:{borderTop:`1px solid ${e.lightDividerColor}`,marginLeft:-12,marginRight:-12}})),[]),n=(0,l().K8)((()=>bt({model:e.store.getModel()})),[e.store]);return n&&"custom"===n.type?(0,N.jsx)("div",{style:t.divider}):null}function At(e){const{store:t,permissionLevelCalculator:n,updateBlockConfiguration:o}=e,i=(0,l().K8)((()=>bt({model:t.getModel()})),[t]);if(!i)return null;switch(i.type){case"custom":return(0,N.jsx)(Mt,{blockConfiguration:i,permissionLevelCalculator:n,updateBlockConfiguration:e=>{o({...i,...e})}});case"extractKeyPointsFromThisPage":case"summarizeThisPage":return(0,N.jsx)(It,{});default:(0,c().HB)(i)}}function It(){const e=(0,d().IS)((e=>({textWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",marginLeft:4,marginRight:4},currentPageLabel:{color:e.text.tertiary,fontSize:14},pageLabel:{fontSize:14}})),[]);return(0,N.jsxs)("div",{style:e.textWrapper,children:[(0,N.jsx)("div",{style:e.pageLabel,children:(0,N.jsx)(C().sA,{defaultMessage:"Page",id:"AiBlockV2.extractKeyPointsFromThisPage.contextLabel"})}),(0,N.jsx)("div",{style:e.currentPageLabel,children:(0,N.jsx)(C().sA,{defaultMessage:"Current page",id:"AiBlockV2.extractKeyPointsFromThisPage.currentPageLabel"})})]})}function Mt(e){const{blockConfiguration:t,updateBlockConfiguration:n,permissionLevelCalculator:o}=e,s=(0,i.useCallback)((e=>{"custom"===t.type&&n({autofillInstructions:e})}),[t,n]),{store:a}=(0,ae().AI)({initialValue:"custom"===t.type?t.autofillInstructions:void 0,onChange:s}),r=(0,C().tz)(),l=t.context,c=(0,i.useCallback)((e=>{n({context:e})}),[n]),u=(0,i.useCallback)((()=>{n({dontSearchWorkspaceAndConnectors:!t.dontSearchWorkspaceAndConnectors})}),[t,n]),p=(0,d().IS)((e=>({textStyle:{display:"flex",alignItems:"center",fontSize:12,paddingLeft:0,paddingRight:0,paddingTop:4,paddingBottom:4,cursor:"pointer",userSelect:"none",fontWeight:400,border:"none"},selectedSourceText:{color:e.text.secondary,marginTop:2},sourcesLabel:{marginTop:4,marginBottom:-2,color:e.text.secondary,fontSize:12,fontWeight:500}})),[]);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(Tt,{store:a,placeholder:r.formatMessage({id:"AiBlockV2.AutofillInstructions.Placeholder",defaultMessage:"Describe the content that should be generated. Use '@' to mention people, pages, or dates"}),minTextHeight:115,showAtMentionMenu:!0,fontSize:14,fontWeight:400,disabled:!o.canEditConfigurationPanel(),context:l,updateContexts:c}),(0,N.jsx)("div",{style:p.sourcesLabel,children:(0,N.jsx)(C().sA,{defaultMessage:"Sources",id:"AiBlockV2ConfigurationMenu.sourcesLabel"})}),(0,N.jsx)(jt,{contexts:l,updateContexts:c,disabled:!o.canEditConfigurationPanel()}),(0,N.jsxs)(ue().Y1,{direction:"vertical",gap:0,children:[(0,N.jsx)(ve().a,{selectorSize:"small",style:p.textStyle,label:(0,N.jsx)("div",{style:p.selectedSourceText,children:(0,N.jsx)(C().sA,{defaultMessage:"Use selected sources only",id:"AiBlockV2ConfigurationMenu.selectedSourcesOnly"})}),onChange:()=>{},isSelected:!0===t.dontSearchWorkspaceAndConnectors,onClick:u,value:"selected_sources",selectType:"radio"}),(0,N.jsx)(ve().a,{style:p.textStyle,selectAlignYAxis:"top",label:(0,N.jsx)("div",{style:p.selectedSourceText,children:(0,N.jsx)(C().sA,{defaultMessage:"Use selected sources and search workspace to find related information",id:"AiBlockV2ConfigurationMenu.useAllSources"})}),onChange:()=>{},selectType:"radio",isSelected:!Boolean(t.dontSearchWorkspaceAndConnectors),onClick:u,value:"all_sources",selectorSize:"small"})]})]})}function jt(e){const{contexts:t,updateContexts:n,disabled:o}=e,s=(0,l().O$)(D().AppStoreCurrentSpaceStore),a=(0,r().v3)(),u=(0,l().K8)((()=>(0,c().O9)(t)&&s?t.map((e=>"page"===e.type||"collection"===e.type?{type:"block",blockStore:new(H().Bv)(a,{table:p().ev,id:e.pageId,spaceId:s.id})}:"currentPage"===e.type?{type:"currentPage",blockStore:new(H().Bv)(a,{table:p().ev,id:e.pageId,spaceId:s.id})}:"slack"===e.type?e:void(0,c().HB)(e))):[]),[t,s,a]),g=(0,i.useCallback)((e=>{if(o)return;const t=e.map((e=>{if("block"===e.type){var t;const n=null===(t=e.blockStore.getCollectionPointer())||void 0===t?void 0:t.id;return n?{pageId:e.blockStore.id,collectionId:n,type:"collection"}:{pageId:e.blockStore.id,type:"page"}}return"slack"===e.type?e:"currentPage"===e.type?{type:"currentPage",pageId:e.blockStore.id}:void(0,c().HB)(e)}));return n(t)}),[n,o]),m=(0,d().IS)((e=>({titleStyle:{fontSize:14,fontWeight:500,color:e.text.tertiary,display:"-webkit-box",lineClamp:1,WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"}})),[]);return s?(0,N.jsx)("div",{style:m.titleStyle,children:(0,N.jsx)(fe().A,{debugName:"PromptOrActionInput",capture:!0,allowMenuList:!1,allowEsc:!0,children:(0,N.jsx)(lt,{currentContexts:u,handleUpdateContexts:g,disabled:o})})}):null}function Tt(e){const{store:t,minTextHeight:n=50,placeholder:o,showAtMentionMenu:a,fontSize:l=14,fontWeight:c=500,disabled:u,context:p,updateContexts:g}=e,m=(0,d().IS)((e=>({inputWrap:{display:"flex",flexDirection:"column",justifyContent:"space-between",boxShadow:e.inputBoxShadow,minHeight:n,backgroundColor:"dark"===e.mode?e.accentColors.translucentGray[100]:"transparent",borderRadius:6,overflow:"inherit",flexGrow:1,flexShrink:1,paddingLeft:6,paddingRight:6,paddingBottom:6},textContainer:{fontSize:l,fontWeight:c,flexGrow:1,padding:"4px 0",maxHeight:240,overflow:"auto"},placeholder:{color:e.text.quaternary}})),[l,c,n]),f=(0,r().v3)();(0,i.useEffect)((()=>{const e=s().A.withListenerIgnored((()=>{var e;return null===(e=D().default.state.currentSpaceStore)||void 0===e?void 0:e.id}));e&&(0,xe().Hn)({environment:f,spaceId:e,externalAuthConfig:{type:"universal",app:"slack",spaceId:e}})}),[f]);const h=(0,i.useCallback)((async()=>{const e=ce().default.state;"editing"===e.mode&&(0,de().KP)(e.multiSelection)&&e.multiSelection.start.store===t||(te().setSelectionAtEnd({store:t}),await K().default.afterNextFlush())}),[t]),v=(0,i.useCallback)((e=>{u||(e.preventDefault(),e.stopPropagation(),async function(){await h(),await K().default.afterNextFlush(),ee().Gf({environment:f,mentionTypes:ne().Ap,usePopupOnMobile:!0,mentionSectionOrdering:ne().h2})}())}),[u,f,h]),y=(0,i.useMemo)((()=>{const e=new Set;return null==p||p.forEach((t=>{"page"!==t.type&&"currentPage"!==t.type||e.add(t.pageId)})),e}),[p]),b=(0,i.useCallback)((()=>{const e=s().A.withListenerIgnored((()=>t.getValue()));if(e){const t=(0,J().moK)(e).filter((e=>!y.has(e.id))).map((e=>({type:"page",pageId:e.id})));g([...p??[],...t])}}),[p,y,t,g]),x=(0,$().Y)(b,200);return(0,i.useEffect)((()=>{!async function(){await K().default.afterNextFlush(),await K().default.afterNextFlush(),te().setSelectionAtEnd({store:t})}()}),[t]),(0,N.jsxs)("div",{style:m.inputWrap,className:se().CCX,children:[(0,N.jsx)(Se().A,{onChange:x,placeholder:o,placeholderStyle:m.placeholder,style:m.textContainer,disabled:u,store:t,pasteBehavior:"inline",disableSlashCommands:!0,disableEmbedMenu:!0,disableEmojiCommands:!1,disableComment:!0,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableMobileActionBar:!0,disableStyleAnnotations:!0,disableInsertedDeletedAnnotations:!0,disableSuggestEdit:!0,inPageFind:re().Os.none}),a&&(0,N.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",flexDirection:"column",alignItems:"flex-end"},children:(0,N.jsx)(oe().q,{onClick:v})})]})}function Bt(e){const{store:t,permissionCalculator:n}=e,o=(0,d().IS)((e=>({icon:{marginLeft:4,fill:e.lightIconColor,width:16,height:12,marginTop:2},optionIcon:{marginRight:4,fill:e.lightIconColor,width:16,height:16},dropdownLabel:{fontSize:14,fontWeight:400,display:"flex",alignItems:"center",marginRight:-4},secondaryTextColor:{color:e.text.tertiary}})),[]),s=[{key:"custom",label:(0,N.jsx)(C().sA,{...kt.custom}),icon:e=>(0,Q().l)({...o.optionIcon,...e&&{fill:void 0}})},{key:"summarizeThisPage",label:(0,N.jsx)(C().sA,{...kt.summarize}),icon:e=>(0,Y().G)({...o.optionIcon,...e&&{fill:void 0}})},{key:"extractKeyPointsFromThisPage",label:(0,N.jsx)(C().sA,{...kt.extractKeyPoints}),icon:e=>(0,X().b)({...o.optionIcon,...e&&{fill:void 0}})}],{currentSkillType:a,updateBlockSkillType:r}=function(e){const t=(0,i.useRef)(void 0),{blockConfiguration:n,updateBlockConfiguration:o}=yt(e);return{updateBlockSkillType:(0,i.useCallback)((e=>{var i;if(e===n.type)return;if(e===(null===(i=t.current)||void 0===i?void 0:i.type))return o(t.current),void(t.current=n);let s;switch(e){case"custom":s={type:"custom",version:2,title:n.title,autofillInstructions:void 0,placeholderText:void 0,context:void 0};break;case"extractKeyPointsFromThisPage":s={type:"extractKeyPointsFromThisPage",version:2,title:n.title};break;case"summarizeThisPage":s={type:"summarizeThisPage",version:2,title:n.title};break;default:(0,c().HB)(e)}t.current=n,o(s)}),[n,o]),currentSkillType:n.type}}(t),u=s.find((e=>e.key===a))??null,p=(0,i.useCallback)(((e,t)=>{r(e),t()}),[r]),g=(0,l().K8)((()=>!n.canEditConfigurationPanel()),[n]);return(0,N.jsx)(z().Ay,{isWaxPaper:!0,popupType:z().z7.Popup,disabled:g,placementToOrigin:z().sx.Top,trapFocus:!1,renderOrigin:e=>(0,N.jsxs)(pe().p,{...e,style:o.dropdownLabel,hoveredStyle:{background:"rgba(0, 0, 0, 0)"},children:[null==u?void 0:u.icon(),(0,N.jsx)("div",{style:o.secondaryTextColor,children:null==u?void 0:u.label}),(0,Z().b)(o.icon)]}),render:e=>{const t={menuType:le().gu.Popup,width:220},n=[{key:"skillSelectorSection",render:e=>(0,N.jsx)(be().A,{...e}),items:s.map((t=>({key:t.key,action:()=>p(t.key,e.close),render:e=>(0,N.jsx)(me().A,{...e,title:t.label,shouldWrapCaption:!0,left:t.icon(!0),isChecked:t.key===a})})))}];return(0,N.jsx)(ie().A,{...t,children:(0,N.jsx)(he().Ay,{initialFocus:void 0,type:he().Oh.Vertical,sections:n,style:{position:"relative"}})})}})}function Rt(e){const t=e?G().c.getStateForBot({type:"universal",app:"slack",spaceId:e}):void 0;return e=>{if("public"===e.channel.type)return!0;const n=null==t?void 0:t.channels[e.channel.id];return Boolean(n)}}function Pt(e){const{handleGenerateClick:t,store:n,isGenerating:u,permissionLevelCalculator:g,configurationPopupStore:m,traceId:f}=e,{blockConfiguration:h,updateBlockConfiguration:v}=yt(n),y=vt({store:n,isGenerating:u,permissionLevelCalculator:g}),b=(0,l().K8)((()=>m.state.open),[m]),x=(0,d().IS)((e=>({divider:{borderRight:`1px solid ${e.regularDividerColor}`},actionbarWrapperStyle:{position:"absolute",zIndex:85,top:-40,right:-2,borderRadius:10,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:M().vc(a().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD,visibility:b?"hidden":"visible"}})),[b]),S=(0,r().v3)(),{isMobile:k}=S.device;(0,l().K8)((()=>{R().EF.state===n.pointer.id&&(!function(e){var t;const{updateBlockConfiguration:n,blockConfiguration:o,environment:i}=e,a=new Set,r=null===(t=D().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(r&&"context"in o){for(const e of o.context??[])if("collection"===e.type||"page"===e.type||"currentPage"===e.type){const t=new(H().Bv)(i,{table:p().ev,id:e.pageId,spaceId:r});s().A.withListenerIgnored((()=>!t.canRead()))&&a.add(e.pageId)}else"slack"===e.type?Rt(r)(e)||a.add(e.channel.id):(0,c().HB)(e);n({...o,context:(o.context??[]).filter((e=>"slack"===e.type?!a.has(e.channel.id):!a.has(e.pageId)))})}}({environment:S,blockConfiguration:h,updateBlockConfiguration:v}),m.setState({open:!0}),R().EF.setState(void 0))}),[h,S,n,v,m]);const C=(0,i.useCallback)((()=>{m.setState({open:!1})}),[m]),w=(0,l().K8)((()=>m.state.open),[m]),A=g.canOpenConfigurationPanel();return(0,N.jsx)(o().P.div,{animate:{opacity:1},initial:{opacity:0},style:x.actionbarWrapperStyle,children:(0,N.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,N.jsx)(Lt,{disabledResult:y,onClick:t,isGenerating:u,store:n,permissionLevelCalculator:g,traceId:f}),(0,N.jsx)("div",{style:x.divider}),(0,N.jsx)(z().Ay,{disabled:!A||k,buttonPopupStore:m,open:w,onClick:()=>{(0,E().u4)({environment:S,event:{eventName:"ai_block_settings_panel_opened",eventProperties:{}}})},render:()=>(0,N.jsx)(Ct,{store:n,updateBlockConfiguration:v,onClosePopup:C,handleGenerateClick:t,isGenerating:u,permissionLevelCalculator:g}),renderOrigin:e=>(0,N.jsx)(_t,{...e,disabled:!A}),popupType:z().z7.Popup,originGap:8})]})})}const _t=i.forwardRef((function(e,t){const{onClick:o,...i}=e,s=(0,C().tz)(),a=(0,d().IS)((()=>({wrapper:{display:"flex",alignItems:"center",cursor:"pointer",paddingLeft:10,paddingRight:10,paddingTop:6,paddingBottom:6,...i.disabled&&{cursor:"not-allowed",opacity:.5}}})),[i.disabled]);return(0,N.jsx)(L().A,{renderTooltip:()=>s.formatMessage({defaultMessage:"Insufficient permissions to view",id:"AiBlockV2.insufficientPermissionsTooltip"}),disableTooltip:!i.disabled,render:e=>(0,N.jsx)(n(704152).A,{style:a.wrapper,ignoreLocalHoverState:!0,hovered:!1,onClick:o,ref:t,...(0,n(553965).A)(i,e),children:(0,N.jsx)(C().sA,{id:"AiBlockV2.editConfiguration",defaultMessage:"Settings"})})})})),Lt=i.forwardRef((function(e,t){const{onClick:n,disabledResult:o,isGenerating:s,store:a,permissionLevelCalculator:l,traceId:c}=e,u=o.isDisabled,p=(0,d().IS)((e=>({wrapper:{cursor:u?"not-allowed":"pointer",paddingTop:6,paddingBottom:6,paddingRight:6,paddingLeft:6,fontSize:12,opacity:u?.5:1,display:"flex",alignItems:"center"}})),[u]),g=(0,r().v3)(),{isMobile:m}=g.device,[f,h]=(0,i.useState)(void 0);return(0,N.jsxs)("div",{style:p.wrapper,onClick:u?void 0:n,ref:t,children:[(0,N.jsx)(xt,{isGenerating:s,store:a,permissionLevelCalculator:l}),m?null:(0,N.jsx)(O,{traceId:c,feedbackState:f,setFeedbackState:h})]})})),Et=(0,C().YK)({failedToGenerate:{id:"AIBlockV2.FailedToGenerate",defaultMessage:"Failed to generate. Please try again later."}});function Wt(e){const{spaceId:t,currentUserId:n}=(0,l().K8)((()=>{var e,t;return{spaceId:null===(e=D().default.state.currentSpaceStore)||void 0===e?void 0:e.id,currentUserId:null===(t=D().default.state.currentUserStore)||void 0===t?void 0:t.id}}),[]),o=(0,l().K8)((()=>e.getModel()),[e]),i=(0,l().K8)((()=>{var t;return null===(t=e.getNavigableBlockStore())||void 0===t?void 0:t.pointer}),[e]);return(0,l().K8)((()=>function(e){const{model:t,spaceId:n,currentUserId:o,getRecordRole:i,getCanReadSlackChannel:s,currentPagePointer:a}=e;if(!t)return"reader";if(!n||!o)return"reader";const r=i(t.pointer)??"none";if(!(0,u().Tt)(r))return"reader";const l=i({id:n,table:m().NX})??"none";if(!(0,u().Tt)(l))return"reader";if(!(0,u().p2)(r))return"configuration_reader";const d=(0,f().Lv)({model:t});if("custom"===d.type)return h({referenceContext:d.context,getCanReadSlackChannel:s,getRecordRole:i})?"editor":"configuration_reader";if("summarizeThisPage"===d.type||"extractKeyPointsFromThisPage"===d.type)return a?h({referenceContext:[{type:"page",pageId:a.id}],getCanReadSlackChannel:s,getRecordRole:i})?"editor":"configuration_reader":"reader";(0,c().HB)(d)}({spaceId:t,currentUserId:n,getCanReadSlackChannel:Rt(t),getRecordRole:e.getRecordRole,model:o,currentPagePointer:i})),[t,n,e,o,i])}function Ft(e){const{store:t,hoveredOrSelectionState:n,setHaloShouldBeVisible:o,showingOverlay:s,disabled:a,disableHoverMenu:d,configurationPopupStore:c}=e,u=(0,r().v3)(),p=(0,C().tz)(),g=new v(Wt(t)),m=(0,i.useCallback)((e=>{T().ui({message:e,showCancel:!1,keepFocus:!1,items:[{label:F().A.formatMessage(T()._0.dismissButtonLabel),onAccept:A().D_}]})}),[]),[f,h]=(0,i.useState)(!1),x=(0,l().K8)((()=>t.isGenerating()),[t]);(0,i.useEffect)((()=>{h(x)}),[x]);const S=t.id,k=(0,i.useCallback)((async()=>{await async function(e){const{environment:t,setIsGenerating:n,onError:o,store:i,intl:s}=e;function a(){o(s.formatMessage(Et.failedToGenerate))}n(!0);const r=async()=>{var e,n;const o=null===(e=D().default.state.currentSpaceStore)||void 0===e?void 0:e.id;if(!o)return;const s=null===(n=i.getNavigableBlockStore())||void 0===n?void 0:n.pointer;if(!s)return;const a=await j().callStreamApi({eventName:"generateAiBlock",environment:t,data:{blockPointer:{...i.pointer,spaceId:o},parentPagePointer:{...s,spaceId:o},analyticsSource:"client"}});if((0,b().kX)(a)||"success"!==a.type||!w().hS.is(a.data))throw new Error("InvalidServerResponse");{let e=[];for await(const n of a.data){if(!(0,b().PX)(n))throw new Error("InvalidStreamResponse");Gt({environment:t,operations:n.operations,blockIds:n.blockIds,aiBlockStore:i}),e=n.operations}if(0===e.length)throw new Error("EmptyGeneration")}};try{return await(0,I().L5)({fn:r,retryAttemptsMS:[50,100,200],retryAttemptRandomOffsetMS:0,initialInput:void 0,handleError:(e,t,n)=>(t&&a(),function(e){const{type:t,aiBlockId:n,spaceId:o,miscDataToConvertToString:i}=e;y().log({from:"generateAiBlockTask",level:"error",type:t,data:{miscDataToConvertToString:{aiBlockId:n,spaceId:o,...i}}})}({aiBlockId:i.id,spaceId:i.getSpaceId(),type:e.name,miscDataToConvertToString:{source:"client",isRetrying:!t,retryAttempt:n}}),t?{status:"throw",error:e}:{status:"retry"})})}finally{n(!1)}}({environment:u,intl:p,onError:m,store:t,setIsGenerating:h})}),[u,p,m,t]),M=(0,i.useCallback)((()=>{c.setState({open:!0})}),[c]),B=(0,l().K8)((()=>!t.hasContent()),[t]),R=(0,l().K8)((()=>t.getContentStore()),[t]),P=(0,r().Y0)();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{style:{paddingLeft:8,minHeight:32},onClick:B?M:void 0,children:(0,N.jsx)(U().A,{emptyPlaceholder:(0,N.jsx)(Dt,{placeholderText:p.formatMessage({id:"AiBlockV2.EmptyEditingPlaceholder3",defaultMessage:"Your AI content will be generated here - click to setup"})}),disabled:a||f,store:R,disableHoverMenu:d||n!==W().l.SelectedDescendant,disableDrag:P.isMobile})}),s&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(q().gM,{hoveredOrSelectionState:n,setHaloShouldBeVisible:o,colorVariant:"blue",configurationPopupStore:c}),(0,N.jsx)(V().s,{allowSelectionWithin:!1,children:(0,N.jsx)(Pt,{store:t,handleGenerateClick:k,isGenerating:f,permissionLevelCalculator:g,configurationPopupStore:c,traceId:S})})]})]})}function Dt(e){const{placeholderText:t}=e,n=(0,d().IS)((e=>({textWrapper:{caretColor:e.text.tertiary,color:e.text.tertiary,marginTop:4,marginBottom:4,cursor:"pointer"}})),[]);return(0,N.jsx)("div",{style:n.textWrapper,children:t})}function Gt(e){const{environment:t,operations:n,blockIds:o,aiBlockStore:i}=e;0!==n.length&&_().createAndCommit({userAction:"aiBlockV2.handleGenerateStreamResponse",environment:t,canUndo:!0,perform:e=>{i.getContentIds().forEach((t=>{_().applyOperation({store:i,operation:(0,S().TQ)({blockParentId:i.id,recordId:t}),transaction:e})}));for(const o of n)if((0,k().ph)(o)){const n=new(H().Bv)(t,o.pointer);_().applyCrdtTextOperation({store:n,operation:o,invertedOperation:void 0,transaction:e})}else if((0,x().$Y)(o)||(0,x().mP)(o))switch(o.pointer.table){case p().ev:{const n=new(H().Bv)(t,o.pointer);if("set"===o.command&&0===o.path.length){const i=n.getParentStore()??(o.args.parent_id&&o.args.parent_table?new(H().pm)({environment:t,pointer:{table:o.args.parent_table,id:o.args.parent_id,spaceId:o.args.space_id??n.getSpaceId()}}):void 0),s=P().Wv({environment:t,id:o.pointer.id,type:o.args.type,properties:o.args.properties,format:o.args.format,permissions:o.args.permissions,inMemoryRecordCache:n.inMemoryRecordCache,spaceId:o.args.space_id??n.getSpaceId(),transaction:e});i&&B().NI({childStore:s,parentStore:i,transaction:e})}else _().applyOperation({store:n,operation:o,transaction:e});break}default:{const n=new(H().pm)({environment:t,pointer:o.pointer,path:o.path});_().applyOperation({store:n,operation:o,transaction:e})}}else(0,c().HB)(o);for(const n of o){const o=new(H().Bv)(t,{table:p().ev,id:n,spaceId:i.getSpaceId()});B().NI({childStore:o,parentStore:i,transaction:e})}P().zv({store:i.getFormatStore(),data:{ai_last_edited:Date.now()},transaction:e})}})}},423657:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(108944),i=()=>n(299545),s=()=>n(640653);function a(e,t){return(0,s().hN)(e)?{isGuestRequestRequired:!0}:t?{isStoreInTeam:!0,teamAllowsGuests:!0,spaceAllowsGuests:!0,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1}}const r=function(e){return(0,n(847249).K8)((()=>{if((0,i().nw)(e))return{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};if(!(0,i()._p)(e))return(0,s().r7)(e)?a(e,void 0):{isStoreInTeam:!1,spaceAllowsGuests:!0,isGuestRequestRequired:!1};const t=(0,o().Uo)(e),r=(0,o().pp)(e),l=r||n(351360).default.state.currentSpaceStore;if((0,s().r7)(l))return a(l,t);const d=!(null!=r&&r.getDisableGuests());return t?{isStoreInTeam:!0,teamAllowsGuests:!t.getDisableGuests(),spaceAllowsGuests:d,isGuestRequestRequired:!1}:{isStoreInTeam:!1,spaceAllowsGuests:d,isGuestRequestRequired:!1}}),[e])}},427636:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:s,style:a,inline:r}=e,l=(0,n(959013).tz)(),d=(0,n(484714).Y0)(),c=(0,n(847249).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:p,badgeStyle:g}=(0,n(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...a},avatarWrapStyle:r?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:d.isMobile?11:9,lineHeight:d.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[a,r,d]);return(0,o.jsxs)("div",{style:u,children:[(0,o.jsx)("div",{style:p,children:(0,o.jsx)(n(256863).A,{botStore:t,size:i})}),(0,o.jsx)("div",{style:{...n(284371).RC},children:c}),s&&(0,o.jsx)("div",{style:g,children:"Bot"})]})}},454531:(e,t,n)=>{n.d(t,{W:()=>g});var o=()=>n(972435),i=()=>n(867772),s=()=>n(681810),a=()=>n(901389),r=()=>n(896628),l=()=>n(383594),d=()=>n(751156),c=()=>n(892632);const u=1500,p=(0,n(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:n,store:o,rect:i}=e;l().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;l().I(),d().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{r().PT({store:n,transaction:e})}})}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:{originUrl:n},position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(p.fileTypeCaption,{idealImageWidth:u}),onUpload:e=>{var i;l().I(),c().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=o.getCoverStore())||void 0===i?void 0:i.pointer)??o.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:h,onProgress:v,onComplete:e=>{var n;n={environment:t,store:o,url:{originUrl:e}},m({...n,position:.5})},onError:()=>{a().f1(n.formatMessage(p.uploadFailed))}})}},{type:"embed",title:n.formatMessage(p.embedTitle),inputPlaceholder:n.formatMessage(p.embedPlaceholder),caption:n.formatMessage(p.embedCaption),buttonText:n.formatMessage(p.embedSubmit),onChange:e=>{var n;n={environment:t,store:o,url:e},m({...n,position:.5}),l().I()}},{type:"unsplash",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:{originUrl:n},position:i})}}]})}async function m(e){const{environment:t,store:n,url:a,position:l}=e,{serverCommitResult:c}=d().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{r().fg({store:n,url:a,position:l||.5,transaction:e})}});await c,s().A.state.loadingMode===i().vS&&s().A.setState({loadingMode:i().Gi,dataURL:s().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:o().A.formatMessage(p.downloading)})}function f(e){m(e),e.environment.device.isMobile&&l().I()}function h(e){const{file:t,name:n,size:a}=e;if(l().I(),s().A.setState({loadingMode:i().Wc,file:t,name:n,size:a}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{s().A.state.loadingMode===i().Wc&&s().A.setState({...s().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else s().A.state.loadingMode===i().Wc&&s().A.setState({...s().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:o().A.formatMessage(p.preparing)});else s().A.state.loadingMode===i().Wc&&s().A.setState({...s().A.state,loadingMode:i().vS,progressText:o().A.formatMessage(p.preparing)})}function v(e){const{progressPercent:t,progressText:n}=e;s().A.state.loadingMode===i().vS&&s().A.setState({...s().A.state,uploadProgress:t,progressText:n})}},490044:(e,t,n)=>{n.d(t,{A:()=>p});n(296540);var o=()=>n(484714),i=()=>n(847249),s=()=>n(401497),a=()=>n(500066),r=()=>n(159588),l=()=>n(963589),d=()=>n(644914),c=n(474848);function u(){const e=(0,s().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,a().G)(e.icon)})}function p(e){var t;const n=(0,o().v3)(),a=n.device.isMobile,{isTablet:p}=(0,o().Y0)(),g=(0,l().X)("tablet_refresh_gate"),m=(0,i().K8)((()=>{var t,o;if(a)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(o=e.style)||void 0===o?void 0:o.paddingLeft:10)}),[n.WindowSizeStore,a,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),f=(0,s().IS)((t=>({wrapper:{...a?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:p&&g?4:8,paddingBottom:p&&g?4:8,paddingLeft:m,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:d().Zr,paddingTop:4,paddingBottom:4,...(0,r().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:a?28:22,height:a?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:a?24:d().ry,height:a?24:d().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!a?"clip":"ellipsis",...e.childrenStyle}})),[a,p,g,m,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:f.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:f.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:f.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(u,{})]}),(0,c.jsx)("div",{style:f.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:f.right,children:e.right})]})}},527580:(e,t,n)=>{n.d(t,{TK:()=>r,YC:()=>a,ui:()=>s});var o=()=>n(645873);const i={pageVerification:new(o().O2)("pageVerification",(()=>n.e(94891).then(n.bind(n,80826)))),pageVerificationBadge:new(o().O2)("pageVerificationBadge",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(28866),n.e(6463),n.e(1213),n.e(59794),n.e(75601),n.e(58504),n.e(14590),n.e(41412)]).then(n.bind(n,161901)))),pageVerificationMenuRenderer:new(o().O2)("pageVerificationMenuRenderer",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(28866),n.e(6463),n.e(1213),n.e(59794),n.e(75601),n.e(58504),n.e(14590),n.e(26207)]).then(n.bind(n,196770))))},s=(0,o()._h)(i.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,o()._h)(i.pageVerificationBadge,(e=>e.PageVerificationBadge)),r=(0,o()._h)(i.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},529803:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{}const i=new o},541235:(e,t,n)=>{n.d(t,{YD:()=>s,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",s="dismissed"},544862:(e,t,n)=>{n.d(t,{A:()=>w});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(959013),r=()=>n(896628),l=()=>n(454531),d=()=>n(751156),c=()=>n(600871),u=()=>n(478726),p=()=>n(227440),g=()=>n(867772),m=()=>n(681810),f=()=>n(608581),h=()=>n(145214),v=()=>n(704152),y=()=>n(807683),b=()=>n(401497),x=()=>n(534177),S=n(474848);function k(e){let{src:t,placeholderSrc:n,placeholderBehavior:i,imageStyle:s,containerStyle:a,onLoadComplete:r,testId:l}=e;const[d,c]=(0,o.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!n&&(d||void 0===t);break;default:(0,x().HB)(i)}const p=(0,b().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,o.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,o.useCallback)((e=>{c(!1),null==r||r()}),[r]);return(0,S.jsxs)("div",{style:p.container,children:[(0,S.jsx)(y().Ay,{src:t,onLoad:g,style:s,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),n&&(0,S.jsx)(y().Ay,{src:n,style:s,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var C=()=>n(24611);const w=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:u,proxyWidth:p}=e;const f=(0,i().v3)(),h=(0,s().uB)(void 0,n(454305).A),v=(0,s().K8)((()=>a||"suggest"===n(77246).Uv.getMode(t)),[a,t]),b=(0,s().K8)((()=>t.getCover()),[t]),x=(0,s().O$)(m().A),[C,w]=(0,o.useState)(void 0);if(!b)return null;const M=x.loadingMode!==g().pF&&x.loadingMode!==g().Wc;return(0,S.jsx)(n(801678).A,{mouseStore:h,onFlushTemporaryPosition:e=>function(e,t,n){const{imagePosition:o,reset:i}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:n,canUndo:!0,perform:e=>{r().yY({store:t,coverPosition:o,transaction:e}),i()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:s,isRepositioning:a}=e;return(0,S.jsx)(I,{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:s,isRepositioning:a,lastProxiedUrl:C,store:t,disabled:v,paddingRight:l,paddingLeft:c,mouseStore:h})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(n(360083).A,{url:b.cover,isAuthenticated:!0,permissionRecord:b.pointer,width:p,onFinishedLoadingProxyUrl:w,render:(t,n)=>{const o={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:M?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,S.jsx)(k,{src:n,placeholderSrc:M?x.dataURL:void 0,placeholderBehavior:M?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:o,onLoadComplete:A,testId:"pageCover"})}}),M&&(0,S.jsxs)("div",{style:y().fd,children:[(0,S.jsx)(n(331542).A,{size:"md",style:{marginRight:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==x.uploadProgress?(0,S.jsx)(n(773382).A,{percentage:x.uploadProgress}):x.progressText?(0,S.jsx)("span",{children:x.progressText}):null})]})]})})};function A(){m().A.reset()}function I(e){let{isVisible:t,isRepositioning:n,handleCancelClick:r,handleRepositionClick:d,handleSavePositionClick:y,lastProxiedUrl:b,store:x,disabled:k,paddingRight:w,paddingLeft:A,mouseStore:I}=e;const M=(0,i().v3)(),j=(0,a().tz)(),T=(0,o.useCallback)((e=>function(e,t,n,o,i){i.reset();const s=e.target.getBoundingClientRect();l().W({environment:t,intl:n,store:o,rect:s})}(e,M,j,x,I)),[M,j,x,I]),B=(0,s().K8)((()=>m().A.state.loadingMode),[]),R=(0,s().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":u().x6,t}(x)),[x]),{device:P}=M,_=(0,s().K8)((()=>!n&&!(0,c().LX)({device:P})),[n,P]),L=(0,s().O$)(p().e);if(k||B!==g().pF||!L)return null;const{isMobile:E}=P;return(0,S.jsx)(h().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(f().A,{isVisible:t,position:"bottom",style:{marginRight:w,marginLeft:A},children:[_&&(0,S.jsx)(v().A,{style:{borderRight:E?"none":void 0,...C().k},onClick:T,children:(0,S.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!n&&!E&&(0,S.jsx)(v().A,{style:{...C().k,borderRight:"none"},onClick:e=>d(e,b),children:(0,S.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),n&&!E&&(0,S.jsx)(v().A,{style:C().k,onClick:y,children:(0,S.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),n&&!E&&(0,S.jsx)(v().A,{style:{...C().k,borderRight:"none"},onClick:r,children:(0,S.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551345:(e,t,n)=>{n.d(t,{VN:()=>l,or:()=>a,pV:()=>r});var o=()=>n(120114),i=()=>n(430483),s=()=>n(508496);function a(e){const{configurationState:t}=e;return t.deepFindRequested&&i().zD.isDeepFindEnabled()}function r(e){const{configurationState:t,assistantSurface:n}=e;return a({configurationState:t})&&n.isType("fullPage")}function l(){const e=i().zD.state;return(0,o().AX)(e,(e=>s().default.getConfigKey("deep_find_config",e)),(e=>s().default.checkGate({gateName:e})))}new(n(496506).default)((()=>{var e;const t=i().zD.isDeepFindEnabled(),o=Boolean(null===(e=n(295169).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&o}),{debugName:"isDeepFindActiveStore"})},555267:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(401497),s=()=>n(62856),a=()=>n(331542),r=n(474848);function l(e){let{loadingMessage:t}=e;const n=(0,i().DP)(),l=(0,s().A)(!0,400);return(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,r.jsxs)(o.Fragment,{children:[(0,r.jsx)(a().A,{}),t&&(0,r.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},562866:(e,t,n)=>{n.d(t,{$c:()=>r,aI:()=>a,cx:()=>s,uf:()=>i});var o=()=>n(645873);const i={RequestMembersModal:new(o().O2)("RequestMembersModal",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(64598),n.e(38119),n.e(77282)]).then(n.bind(n,123350)))),GoogleImportsInviteWithModal:new(o().O2)("GoogleImportsInviteWithModal",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(38744),n.e(51195),n.e(51226)]).then(n.bind(n,720193)))),InviteDropdownMenuItemLabel:new(o().O2)("InviteDropdownMenuItemLabel",(()=>n.e(25171).then(n.bind(n,726799)))),personPropertyInviteActions:new(o().O2)("personPropertyInviteActions",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(38744),n.e(57613)]).then(n.bind(n,980270))))},s=(0,o()._h)(i.RequestMembersModal,(e=>e.RequestMembersModal)),a=(0,o()._h)(i.GoogleImportsInviteWithModal,(e=>e.GoogleImportsInviteWithModal)),r=(0,o()._h)(i.InviteDropdownMenuItemLabel,(e=>e.InviteDropdownMenuItemLabel))},563615:(e,t,n)=>{n.d(t,{$b:()=>c,Nz:()=>l,Q1:()=>a,Vh:()=>u,ZO:()=>d,bl:()=>r,eN:()=>s,oQ:()=>i});var o=()=>n(645873);const i={WorkflowPageBlock:new(o().O2)("WorkflowPageBlock",(async()=>await n.e(87700).then(n.bind(n,885789)))),WorkflowEditorTopbar:new(o().O2)("WorkflowEditorTopbar",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(92143)]).then(n.bind(n,484654)))),WorkflowInPlaceEditor:new(o().O2)("WorkflowInPlaceEditor",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(4253),n.e(9150),n.e(50437)]).then(n.bind(n,742628)))),ChatCollectionView:new(o().O2)("ChatCollectionView",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(85864),n.e(7114),n.e(45666)]).then(n.bind(n,227519)))),CustomCollectionView:new(o().O2)("CustomCollectionView",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(64165)]).then(n.bind(n,120250)))),WorkflowEditorCollectionViewPage:new(o().O2)("WorkflowEditorCollectionViewPage",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(16697)]).then(n.bind(n,258651)))),WorkflowContainerEmptyState:new(o().O2)("WorkflowContainerEmptyState",(async()=>await n.e(97891).then(n.bind(n,50512)))),workflowActions:new(o().O2)("workflowActions",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,847)))),workflowNavigationActions:new(o().O2)("workflowNavigationActions",(async()=>await n.e(93139).then(n.bind(n,691093)))),workflowNavigationHelpers:new(o().O2)("workflowNavigationHelpers",(async()=>await n.e(92821).then(n.bind(n,564037)))),workflowAdvanced:new(o().O2)("workflowAdvanced",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(4253),n.e(9150)]).then(n.bind(n,140659))))},s=(0,o()._h)(i.WorkflowPageBlock,(e=>e.default)),a=(0,o()._h)(i.ChatCollectionView,(e=>e.ChatCollectionView)),r=(0,o()._h)(i.CustomCollectionView,(e=>e.CustomCollectionView)),l=(0,o()._h)(i.WorkflowEditorTopbar,(e=>e.WorkflowEditorTopbar)),d=(0,o()._h)(i.WorkflowInPlaceEditor,(e=>e.WorkflowInPlaceEditor)),c=(0,o()._h)(i.WorkflowEditorCollectionViewPage,(e=>e.WorkflowEditorCollectionViewPage)),u=(0,o()._h)(i.WorkflowContainerEmptyState,(e=>e.WorkflowContainerEmptyState))},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>s,RH:()=>i,Yi:()=>r,ls:()=>o});const o=32,i=202,s=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",r="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,n)=>{n.d(t,{r:()=>o});const o=(0,n(583835).Dv)("importEvernote")},592968:(e,t,n)=>{n.d(t,{F:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}}const i=new o},608581:(e,t,n)=>{n.d(t,{A:()=>c});n(898992),n(354520),n(581454),n(941795);var o=n(296540),i=()=>n(401497),s=()=>n(955825),a=()=>n(284371),r=()=>n(963575),l=n(474848);function d(e){const{button:t,isLast:n}=e,r=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,s().AH)(t.props.style,r.button,n&&r.buttonLast),hoveredStyle:(0,s().AH)(r.buttonHovered,n&&r.buttonLast).style,pressedStyle:r.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const g=(0,n(484714).v3)(),m=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:r().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:a().vc(n(662303).locale).sans,position:"absolute",right:r().A.horizontal.small,bottom:r().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:r().A.vertical.small,bottom:void 0}})),[g]),f=o.Children.toArray(t).filter(n(534177).O9),h=f.length;return(0,l.jsx)(n(145214).A,{animate:{opacity:c?1:0},...(0,s().AH)(m.container,p,c&&m.containerHover,"top"===u&&m.containerTop),children:f.map(((e,t)=>{const i=t===h-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===n(859428).A&&o.isValidElement(e))return o.cloneElement(e,{render:(t,n)=>{const o=e.props.render(t,n);return(0,l.jsx)(d,{isLast:i,button:o},e.key)}});if(e.type===n(704152).A&&o.isValidElement(e))return(0,l.jsx)(d,{isLast:i,button:e},e.key)}}))})}},617837:(e,t,n)=>{n.d(t,{j:()=>m});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(959013),r=()=>n(534177),l=()=>n(937075),d=()=>n(273190),c=()=>n(227440),u=()=>n(966106),p=()=>n(285790),g=n(474848);function m(e){const{traceId:t,feedbackState:n,setFeedbackState:l,feedbackType:m}=e,{thumbsUpType:h,thumbsDownType:v}=(0,o.useMemo)((()=>{switch(m){case"ai_block":return{thumbsDownType:"ai_block_thumbs_down",thumbsUpType:"ai_block_thumbs_down"};case"autofill":return{thumbsDownType:"ai_autofill_thumbs_down",thumbsUpType:"ai_autofill_thumbs_up"};default:(0,r().HB)(m)}}),[m]),y=(0,a().tz)(),b=(0,i().v3)(),x=!(0,s().O$)(c().e),S=(0,o.useCallback)((()=>{u().A.setState({...u().A.state,open:!0,type:v,traceId:t,thumbsUpOrDown:"down"}),l({type:"thumbsdown",userContent:"",shareWithNotion:!0}),f({environment:b,inferenceId:t,feedbackType:"thumbsdown",userContent:"",shareWithNotion:!0})}),[b,l,v,t]),k=(0,o.useCallback)((()=>{u().A.setState({...u().A.state,open:!0,type:h,traceId:t,thumbsUpOrDown:"up"}),l({type:"thumbsup",userContent:"",shareWithNotion:!0}),f({environment:b,inferenceId:t,feedbackType:"thumbsup",userContent:"",shareWithNotion:!0})}),[b,l,h,t]);return(0,g.jsxs)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,g.jsx)(p().A,{onClick:k,icon:(0,d().gZ)("thumbsup","thumbsup"===(null==n?void 0:n.type)),ariaLabel:y.formatMessage({id:"AiFeatureFeedbackButtons.thumbsUp",defaultMessage:"Helpful"}),disabled:x}),(0,g.jsx)(p().A,{icon:(0,d().gZ)("thumbsdown","thumbsdown"===(null==n?void 0:n.type)),onClick:S,ariaLabel:y.formatMessage({id:"AiFeatureFeedbackButtons.thumbsDown",defaultMessage:"Not helpful"}),disabled:x})]})}function f(e){const{environment:t,inferenceId:n,feedbackType:o,userContent:i,shareWithNotion:s}=e;l().I5(t,{type:"property_autofill",inference_id:n,feedback_type:o,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:s})}},654856:(e,t,n)=>{n.d(t,{A:()=>u});n(581454);var o=n(296540),i=()=>n(847249),s=()=>n(959013),a=()=>n(743260),r=()=>n(299545),l=()=>n(417555),d=()=>n(856952),c=n(474848);const u=function(e){const{origin:t,permissionsInviteStore:u,store:p,handleClickRemoveToken:g,handleInputChange:m,handleInputSubmit:f,defaultRoleForNonBot:h,right:v,focus:y,handleFocus:b}=e,x=(0,i().K8)((()=>0!==(0,n(731320).Qo)()),[]),S="share_menu"===t||"add_members"===t,k="add_members"===t,[C,w]=(0,i().$y)(u),A=(0,n(484714).v3)(),{device:I}=A,M=(0,s().tz)(),{tokenQuery:j}=C,T=(0,n(101749).N)(p),B=C.inviteTargets.map((e=>{const t="newUser"===e.type?e.value.email:`${e.type}-${e.value.id}`,i=(0,a().yi)(e),r="newUser"===e.type||"existingUser"===e.type?e.value.email:void 0,d=i?T:void 0,u={key:t,target:e,onClickRemove:g,role:C.inviteRole,shouldWrap:S,showInfoIcon:Boolean(d)};return S&&r?(0,c.jsx)(n(859428).A,{placement:n(962730).W.Top,disableTooltip:k,renderTooltip:()=>i?d||(0,c.jsx)(s().sA,{defaultMessage:"{email} will be invited as a guest",id:"ContextualInvite.permissions_invites.guest.tooltip",values:{email:r}}):r,render:n=>(0,o.createElement)("span",{...n,key:t},(0,c.jsx)(l().A,{...u,backgroundColor:(0,a().qv)(e)}))},t):(0,o.createElement)(l().A,{...u,key:t})}));return(0,c.jsx)(d().Ay,{focus:I.isMobile?void 0:y,focusInitial:I.isMobile,focusAfterAnimation:!0,onClick:()=>{I.isMobile||null==b||b()},format:d().le.Share,value:j,onChange:m,type:"email",tokens:B,disabled:!1,autoComplete:"off",placeholder:S?x?M.formatMessage({defaultMessage:"Add people, groups, or emailsâ€¦",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithTeams"}):M.formatMessage({defaultMessage:"Add emails or people",id:"ContexualInvites.inviteUserModal.searchInput.placeholderWithoutBots"}):(0,r().Yu)(p)||(0,r().nw)(p)?M.formatMessage({id:"inviteUserModal.searchInput.placeholder",defaultMessage:"Search name or emails"}):M.formatMessage({id:"permissionsInvite.searchInput.placeholder",defaultMessage:"Search emails, names, or groups"}),onRemoveLastToken:()=>{const e={...C};e.inviteTargets=e.inviteTargets.slice(0,-1),0===e.inviteTargets.length&&(e.isInviteTargetsEmpty=!0,e.inviteRole=h),w(C)},right:v,inputFullWidth:!0,inputAndTokenWrapRightStyle:{paddingTop:A.device.isMobile?0:C.isInviteTargetsEmpty?7:6,paddingBottom:A.device.isMobile||S?0:4},onEmptySubmit:()=>f(),dontShowBorderBottom:I.isAndroid,showBorder:S,...!S&&{style:{padding:"10px  9px 4px 9px"}},...S&&{style:{borderRadius:4,paddingTop:C.isInviteTargetsEmpty?3:0,paddingBottom:0,...y&&{background:"none"}}}})}},665579:(e,t,n)=>{n.d(t,{$E:()=>M,$L:()=>r,BZ:()=>c,EC:()=>m,EI:()=>x,E_:()=>I,Ed:()=>p,Fq:()=>v,Lu:()=>k,Mk:()=>g,O0:()=>A,UO:()=>j,V$:()=>w,VQ:()=>f,Xx:()=>S,Xy:()=>d,YS:()=>h,_g:()=>b,dd:()=>u,pW:()=>l,q3:()=>a,wH:()=>s});var o=()=>n(496603),i=()=>n(534177);const s=160,a=40,r=24,l=20,d=600,c=270,u=405,p=480,g=500,m=void 0,f=16,h=10,v=8,y=(n(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),b=4;function x(e){return{icon:e.mediumIconColor,text:e.text.secondary}}function S(e){return{width:48,height:48,fill:e.lightIconColor}}function k(e){let{theme:t,isPhone:n}=e;return n?t.personalHomeBackgroundPhone:t.surface.page}const C=1;function w(e){let{isPhone:t,theme:n}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:n.home.tile.background,boxShadow:I({isPhone:t,theme:n}),...y}}function A(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return C;default:return(0,i().ub)(t),0}}function I(e){let{isPhone:t,theme:n,borderOnly:i}=e;if("dark"===n.mode)return"unset";n.mode;const s=A({mode:n.mode});return(0,o().oE)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${s}px rgba(0, 0, 0, 0.05)`]).join(", ")}function M(e){return{display:"flex",flexDirection:"column",width:"100%",gap:24}}function j(e){const{isPhone:t,theme:n,borderOnly:o}=e;return{unhoveredBoxShadow:I({isPhone:t,theme:n,borderOnly:o}),hoveredBoxShadow:"light"===n.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):n.homeShadow.card.hovered}}},681810:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(867772).Ay)},709687:(e,t,n)=>{n.d(t,{r:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("bell",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},739135:(e,t,n)=>{n.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>a,tb:()=>r,x$:()=>s});var o=()=>n(541235),i=()=>n(496603);function s(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function r(e,t){if(a(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function l(e,t){const n=c(e,t);if(n&&!a(n))return r(t,n)}function d(e,t){const n=c(e,t);if(n)return function(e,t){const n=o().c$[e];var s;if(a(t))return null===(s=(0,i().HV)(n.steps))||void 0===s?void 0:s.id;const r=n.steps.findIndex((e=>e.id===t));return-1!==r&&0!==r?n.steps[r-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},748539:(e,t,n)=>{n.d(t,{f:()=>o});const o=new(n(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await n.e(40198).then(n.bind(n,519737));return e}))},756114:(e,t,n)=>{n.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},801678:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(296540),i=()=>n(662303),s=()=>n(484714),a=()=>n(847249),r=()=>n(955825),l=()=>n(959013),d=()=>n(100622),c=()=>n(496603),u=()=>n(284371),p=()=>n(720665),g=()=>n(145214),m=n(474848);const f={isRepositioning:!1};const h=function(e){const t=(0,o.useRef)(null),i=(0,s().v3)(),{isMobile:l}=(0,s().Y0)(),[d,u]=(0,o.useState)(f),g=(0,o.useCallback)((()=>{u(f)}),[]),{renderControl:h,onFlushTemporaryPosition:y,style:b,source:x,store:S}=e,{isRepositioning:k,image:C,startDragRenderedPosition:w,startDragImageScreenHeight:A}=d,I=(0,a().K8)((()=>0===n(502438).default.state.stores.length),[]),[M,j]=(0,o.useState)(!1),T=(0,a().uB)(e.mouseStore,n(454305).A),B=(0,a().K8)((()=>T.state.mouseEntered),[T]),R=(0,n(401497).IS)((()=>({dragContainer:{width:"100%",cursor:k?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[k]),P=(0,a().K8)((()=>function(e,t,n){return(0,c().Et)(n)?n:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const n=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?n:t}}const o=t.getFormat(),i=o.page_cover_position;if((0,c().Et)(i))return i;return n}(e,t)}(x,S,d.temporaryPosition)),[d.temporaryPosition,x,S]);(0,o.useEffect)((()=>{const e=e=>{const n=t.current;n&&!n.contains(e.target)&&k&&y({imagePosition:P,reset:()=>{T.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[P,k,T,y,g]),k&&!I&&g();const _=(0,o.useMemo)((()=>(0,c().nF)((e=>{T.setState({...T.state,mouseEntered:!0})}),100)),[T]),L=(0,o.useMemo)((()=>(0,c().sg)((e=>{T.setState({...T.state,mouseEntered:!1})}),100)),[T]),E=(0,o.useCallback)(((e,t)=>{n(778417).IU({environment:i});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[i]),W=(0,o.useCallback)((e=>{y({imagePosition:P,reset:()=>{g()}})}),[P,y,g]),F=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,n(819121).p)(t)&&j(!0)}),[]),D=(0,o.useCallback)((()=>{j(!0)}),[]),G=(0,o.useCallback)((e=>{if(C&&k){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/C.width*C.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:P})))}}}),[C,P,k]),H=(0,o.useCallback)((e=>{if(k){const t=e.diffY/(A||0)+(w||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,n(40845).A)(t,0,1),4)})))}}),[k,A,w]),V=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),z=(0,a().K8)((()=>h({handleRepositionClick:E,handleSavePositionClick:W,handleCancelClick:g,isVisible:l||B||M||k,isRepositioning:k})),[E,W,M,l,k,B,h,g]);return(0,m.jsxs)("div",{ref:t,onFocus:F,onBlur:D,onMouseEnter:_,onMouseMove:_,onMouseLeave:L,...(0,r().AH)(R.container,b),children:[(0,m.jsx)(n(603820).A,{onDraggableDragStart:G,onDraggableDragMove:H,onDraggableDragEnd:V,onDraggableDragCancel:V,disabled:!k,render:t=>(0,m.jsx)("div",{...(0,r().AH)(R.dragContainer),...t,children:e.render({imagePosition:P,isRepositioning:k})})}),(0,m.jsx)(v,{small:e.small,isRepositioning:k}),z]})};function v(e){let{small:t,isRepositioning:n}=e;if(t)return null;const o={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:u().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(g().A,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,m.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},824160:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(484714),i=()=>n(401497),s=()=>n(704152),a=n(474848);function r(e){const t=(0,o().Y0)(),n=(0,i().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(s().A,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(s().A,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},835755:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},862139:(e,t,n)=>{n.d(t,{_:()=>m});var o=n(296540),i=()=>n(484714),s=()=>n(847249),a=()=>n(959013),r=()=>n(698449),l=()=>n(351360),d=()=>n(760217),c=()=>n(173783),u=()=>n(678553),p=()=>n(614505),g=n(474848);function m(e){const t=(0,i().Y0)(),{group:n,menuListItemProps:m,spaceStore:f,iconSizeOverride:h}=e,v=(0,a().tz)(),y=(0,s().K8)((()=>{const e=f??l().AppStoreCurrentSpaceStore.state;if(e&&n.icon)return{pointer:{table:e.table,id:e.id},icon:n.icon}}),[n,f]),b=(0,o.useMemo)((()=>(0,r().Pf)({intl:v,groupName:n.name})),[n.name,v]),x=h||(t.isMobile?u().nd:u().pg);return(0,g.jsx)(d().A,{...m,icon:y?(0,g.jsx)(p().B,{disabled:!0,size:x,icon:y,isEmptyPage:!1,title:b}):(0,g.jsx)(c().A,{size:x}),title:b})}},863330:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,plusSmallIcon:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},i=(0,n(340498).wt)("plusSmall",o)},867772:(e,t,n)=>{n.d(t,{Ay:()=>l,Gi:()=>s,Wc:()=>o,pF:()=>a,vS:()=>i});const o="loadingLocalImage",i="uploading",s="downloading",a="loaded";class r extends(()=>n(757695))().default{getInitialState(){return{loadingMode:a}}}const l=r},877051:(e,t,n)=>{n.d(t,{V:()=>a});var o=()=>n(847249),i=()=>n(351360),s=()=>n(963589);function a(){const e=(0,s().X)("lazier_dependencies"),t=(0,o().K8)((()=>i().default.state.renderPhase),[]);return e&&"rendered"!==t}},883234:(e,t,n)=>{n.d(t,{_:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},926329:(e,t,n)=>{n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,o.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,o.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},985595:(e,t,n)=>{n.d(t,{n:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("mailRound",{viewBox:"0 0 17 12",svg:(0,o.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})},986229:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",isInviteTargetsEmpty:!0,table:n(179034).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const i=o}}]);