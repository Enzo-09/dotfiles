"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[27942,33161],{179030:(e,t,i)=>{i.d(t,{l:()=>s().lZ});var s=()=>i(661764)},243581:(e,t,i)=>{i.d(t,{r:()=>n});i(296540);const s={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},n=(0,i(340498).wt)("arrowBranch",s)},246760:(e,t,i)=>{i.d(t,{G:()=>s});const s=(0,i(340498).xh)("questionMarkCircled",{default:{loader:()=>i.e(35839).then(i.bind(i,835839))},small:{loader:()=>i.e(83633).then(i.bind(i,183633))},mini:{loader:()=>i.e(58431).then(i.bind(i,658431))},large:{loader:()=>i.e(38405).then(i.bind(i,838405))}})},247123:(e,t,i)=>{i.d(t,{QU:()=>x,f2:()=>h,r6:()=>f});i(581454),i(296540);var s=()=>i(847249),n=()=>i(401497),r=()=>i(68263),o=()=>i(959013),a=()=>i(534177),l=()=>i(284371),d=()=>i(663590),c=()=>i(756279),m=()=>i(351360),u=()=>i(2143),p=()=>i(921194),g=i(474848);function h(e){const{openState:t}=e,{mainEditorCurrentBlockStore:i,currentSpaceStore:r}=(0,s().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=m().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),o=(0,s().K8)((()=>(0,d().FI)()),[]),a=(0,n().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...o?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[o]);if(!i||!r)return null;const l=Date.now();return(0,g.jsx)(u().H,{type:c().A.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[s,n]=e;const o={timestamp:l,space_id:r.id,type:"permission-changed",permission_data:{before:s,after:n}};return(0,g.jsx)("div",{style:a.editContainer,children:(0,g.jsx)(p().A,{rootStore:i,edit:o})},`${s.type}-${t}`)}))})}function x(e,t){return["remove","restrict"].includes(e.type)?t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function f(e,t){switch(e.type){case"remove":return t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:y(e)}});case"restrict":return t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().HB(e)}}function y(e){return(0,r().B2)(e.permissionItem)?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,r().Ds)(e.permissionItem)?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,r().Lg)(e.permissionItem)?(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(o().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},406859:(e,t,i)=>{i.d(t,{M:()=>n});class s extends(()=>i(757695))().default{getInitialState(){return{blockStoreMode:{},siteTemplateStatus:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((i=>({...i,blockStoreMode:{...i.blockStoreMode,[e]:t}})))}setSiteTemplateStatus(e,t){this.update((i=>({...i,siteTemplateStatus:{[e]:t}})))}isTemplateListing(e){var t;return(null===(t=this.state.siteTemplateStatus[e])||void 0===t?void 0:t.templateListingExists)??!1}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}}const n=new s;(0,i(604341).exposeDebugValue)("MarketplaceTemplateStore",n)},661764:(e,t,i)=>{i.d(t,{fT:()=>I,lZ:()=>T,pq:()=>v});i(581454),i(296540);var s=()=>i(484714),n=()=>i(401497),r=()=>i(246760),o=()=>i(949306),a=()=>i(959013),l=()=>i(84817),d=()=>i(704152),c=()=>i(285790),m=()=>i(864943),u=()=>i(859428),p=()=>i(460292),g=()=>i(554509),h=i(474848);const x=(0,a().YK)({learnMore:{id:"banner.learnMore",defaultMessage:"Learn more"}}),f={red:"uiRedPrimary",yellow:"uiYellowPrimary",blue:"uiBluePrimary",gray:"secondary"},y={red:"uiRedSecondary",yellow:"uiYellowSecondary",blue:"uiBlueSecondary",gray:"secondary"},M={red:"uiRedPrimary",yellow:"uiYellowPrimary",blue:"uiBluePrimary",gray:"secondary"},j={red:e=>e.tint.uiRed,yellow:e=>e.tint.uiYellow,blue:e=>e.tint.uiBlue,gray:e=>e.surface.wash},v={red:e=>e.text.uiRedPrimary,blue:e=>e.text.uiBluePrimary,yellow:e=>e.text.uiYellowPrimary,gray:e=>"dark"===e.mode?e.text.primary:e.text.secondary},w={red:e=>e.icon.uiRedSecondary,blue:e=>e.icon.uiBlueSecondary,yellow:e=>e.icon.uiYellowSecondary,gray:e=>"dark"===e.mode?e.text.secondary:e.text.quaternary};function C(e){return(0,n().IS)((t=>({container:{backgroundColor:j[e](t),padding:"8px 12px"},content:{color:v[e](t)},learnMoreIcon:{fill:v[e](t)},titleIcon:{marginRight:8}})),[e])}function b(e){const{onDismiss:t,tint:i}=e;return t?(0,h.jsx)(d().A,{onClick:t,style:{width:20,height:20},children:(0,h.jsx)(p().Q,{iconGroup:o().Q,variantName:"default",colorName:M[i]})}):(0,h.jsx)("div",{})}function S(e){const{tint:t,iconGroup:i,style:s}=e;return i?(0,h.jsx)(p().Q,{iconGroup:i,variantName:"small",colorName:f[t],style:s}):null}function P(e){const{tint:t,iconGroup:i}=e;return i?(0,h.jsx)(p().Q,{iconGroup:i,variantName:"small",colorName:y[t]}):null}function I(e){const{tint:t,action:i}=e,{label:s,onClick:r,iconGroup:o}=i,a=(0,n().IS)((e=>({button:{color:v[t](e),borderWidth:1,borderStyle:"solid",borderColor:w[t](e),padding:o?"4px 10px 4px 8px":"4px 8px",height:"unset",gap:o&&4},buttonContent:{display:"flex",flexDirection:"row",alignItems:"center"}})),[t,o]);return(0,h.jsx)(m().A,{size:"lg",icon:()=>(0,h.jsx)(P,{iconGroup:o,tint:t}),onClick:r,buttonStyle:a.button,children:(0,h.jsx)(g().D,{styleName:"UIRegular-14px/Medium",customStyles:a.buttonContent,children:s})})}function A(e){const{label:t,iconGroup:i,tint:s,onDismiss:n,actions:o,onLearnMoreClick:d}=e,m=C(s),u=(0,a().tz)();return(0,h.jsxs)(l().Y1,{style:m.container,gap:"auto",direction:"horizontal",align:"center",width:"fill",children:[(0,h.jsxs)(l().Y1,{style:m.content,direction:"horizontal",align:"center",width:"hug",children:[(0,h.jsx)(S,{tint:s,iconGroup:i,style:m.titleIcon}),(0,h.jsx)(g().D,{styleName:"UIRegular-14px/Medium",children:t}),d&&(0,h.jsx)(c().A,{onClick:d,icon:()=>(0,h.jsx)(p().Q,{iconGroup:r().G,variantName:"large",colorName:"secondary",style:m.learnMoreIcon}),ariaLabel:u.formatMessage(x.learnMore)})]}),(0,h.jsxs)(l().Y1,{direction:"horizontal",align:"center-right",gap:12,children:[(0,h.jsx)(l().Y1,{direction:"horizontal",align:"center",gap:8,width:"hug",children:null==o?void 0:o.map(((e,t)=>e.isCustom?e.render():(0,h.jsx)(I,{tint:s,action:e},t)))}),(0,h.jsx)(b,{tint:s,onDismiss:n})]})]})}function k(e){const{label:t,iconGroup:i,staticIcon:s,tint:n,onDismiss:o,actions:d,onLearnMoreClick:m}=e,f=C(n),y=(0,a().tz)(),M=i?(0,h.jsx)(S,{tint:n,iconGroup:i,style:f.titleIcon}):s;return(0,h.jsxs)(l().Y1,{style:f.container,gap:"auto",direction:"horizontal",align:"center",children:[(0,h.jsx)("div",{}),(0,h.jsxs)(l().Y1,{style:f.content,direction:"horizontal",align:"center",width:"hug",gap:24,children:[(0,h.jsxs)(l().Y1,{direction:"horizontal",align:"center",width:"hug",children:[M,(0,h.jsx)(g().D,{styleName:"UIRegular-14px/Medium",children:t}),m&&(0,h.jsx)(u().A,{renderTooltip:()=>y.formatMessage(x.learnMore),render:e=>(0,h.jsx)(c().A,{onClick:m,icon:()=>(0,h.jsx)(p().Q,{iconGroup:r().G,variantName:"large",colorName:"secondary",style:f.learnMoreIcon}),ariaLabel:y.formatMessage(x.learnMore),...e})})]}),(0,h.jsx)(l().Y1,{direction:"horizontal",gap:8,width:"hug",children:null==d?void 0:d.map(((e,t)=>e.isCustom?e.render():(0,h.jsx)(I,{tint:n,action:e},t)))})]}),(0,h.jsx)(b,{tint:n,onDismiss:o})]})}function D(e){const{label:t,description:i,iconGroup:s,staticIcon:r,tint:o,onDismiss:a,actions:d}=e,c=(0,n().IS)((e=>({container:{backgroundColor:j[o](e),padding:16,borderRadius:8},content:{color:v[o](e)},iconContainer:{height:20,display:"flex",alignItems:"center",justifyContent:"center"}})),[o]),m=s?(0,h.jsx)(S,{tint:o,iconGroup:s}):r;return(0,h.jsxs)(l().Y1,{style:c.container,gap:8,direction:"horizontal",children:[m?(0,h.jsx)("div",{style:c.iconContainer,children:m}):null,(0,h.jsxs)(l().Y1,{style:c.content,gap:8,children:[(0,h.jsxs)(l().Y1,{gap:4,children:[(0,h.jsx)(g().D,{styleName:"UIRegular-14px/Medium",colorName:"gray"===o?"primary":void 0,children:t}),(0,h.jsx)(g().D,{styleName:"UIRegular-14px/Regular",children:i})]}),d?(0,h.jsx)(l().Y1,{direction:"horizontal",gap:8,children:null==d?void 0:d.map(((e,t)=>e.isCustom?e.render():(0,h.jsx)(I,{tint:o,action:e},t)))}):null]}),(0,h.jsx)(b,{tint:o,onDismiss:a})]})}function B(e){const{tint:t,onDismiss:i,content:s}=e,n=C(t);return(0,h.jsxs)(l().Y1,{style:n.container,align:"center",gap:8,direction:"horizontal",children:[(0,h.jsx)("div",{style:{flex:1,...n.content},children:s}),(0,h.jsx)(b,{tint:t,onDismiss:i})]})}function T(e){const{display:t}=e,i=(0,s().v3)();switch(t){case"inline":return(0,h.jsx)(D,{...e});case"full-width":return i.device.isMobile?(0,h.jsx)(A,{...e}):(0,h.jsx)(k,{...e});case"full-width-no-content":return(0,h.jsx)(B,{...e})}return(0,h.jsx)(h.Fragment,{})}},746426:(e,t,i)=>{i.d(t,{J:()=>l});var s=()=>i(484714),n=()=>i(857639),r=()=>i(187174),o=()=>i(449506),a=()=>i(406859);function l(e,t){const i=(0,s().v3)(),[{value:l,status:d}]=(0,r().Yb)((async()=>{if(!t)return{templateListingExists:!1};try{const t=await o().callApi({eventName:"inAppGetBannerByBlockId",environment:i,data:{blockId:e.id}});var s,r,l;if("success"===t.type&&t.data.success)return a().M.setSiteTemplateStatus((null===(s=t.data.template)||void 0===s?void 0:s.root_block_id)??"",{templateListingExists:Boolean(null===(r=t.data.template)||void 0===r?void 0:r.listing_id),template:t.data.template,status:"resolved"}),{templateListingExists:Boolean(null===(l=t.data.template)||void 0===l?void 0:l.listing_id),template:t.data.template}}catch(d){n().log({level:"error",from:"AllPublishedSiteSettings",type:"getTemplateByBlockId",data:{blockId:e.id}})}return a().M.setSiteTemplateStatus(e.id,{templateListingExists:!1,template:void 0,status:"rejected"}),{templateListingExists:!1}}),[i,t,e]);return{templateListingExists:(null==l?void 0:l.templateListingExists)??!1,status:d,template:null==l?void 0:l.template}}},976721:(e,t,i)=>{i.d(t,{Dw:()=>w,Hc:()=>v,o5:()=>j});i(16280),i(296540);var s=()=>i(857639),n=()=>i(243581),r=()=>i(340498),o=()=>i(433847),a=()=>i(161479),l=()=>i(959013),d=()=>i(496603),c=()=>i(701763),m=()=>i(901389),u=()=>i(579627),p=()=>i(751156),g=()=>i(125565),h=()=>i(247123),x=()=>i(406792),f=()=>i(630116),y=()=>i(663590),M=i(474848);async function j(e){let{newRole:t,...i}=e;const s=i.oldPermissionItem,n=(0,d().o8)(s);return n.role=t,await v({newPermissionItem:n,...i})}async function v(e){const{oldPermissionItem:t,newPermissionItem:i,wasInherited:n,environment:r,store:l,sudoModeStore:d,restrictingVisibility:m,fromPermissionWrapper:g,trustedDomainsLoggingData:h}=e,M=(0,y().FI)();if(!(0,o().nK)(t,i))throw new Error("Permission type mismatch.");const j=!!d&&d.shouldSaveTransactionWithSudoMode(l),v=(0,o().$q)(t.role,i.role);if(n&&v!==i.role||m){return await w({environment:r,useSudoMode:j,store:l,permissionItem:i,fromPermissionWrapper:g,isRedesignEnabled:M,shouldInherit:!0,trustedDomainsLoggingData:h})}return l instanceof f().Bv&&!l.isTopLevel()&&t.role!==i.role&&v!==t.role&&c().MR(r),p().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:r,canUndo:!0,useSudoMode:j,perform:t=>{const s=x().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");u().wd({environment:r,store:l,permissionItems:[i],transaction:t,pagePermissionChangeLocation:e.location,metric:s,fromPermissionWrapper:g})}}),"trusted_domain_permission"===i.type&&s().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,a().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:i,trustedDomainsLoggingData:h}}}),!0}async function w(e){const{environment:t,useSudoMode:i,store:s,permissionItem:o,fromPermissionWrapper:a,isRedesignEnabled:d,shouldInherit:c,trustedDomainsLoggingData:x}=e,f="none"===(null==o?void 0:o.role)?{type:"remove",permissionItem:o}:{type:"restrict"};return!!("user_permission"===(null==o?void 0:o.type)&&(null==o?void 0:o.user_id)===t.currentUser.id||(d?await m().Gh({message:(0,h().r6)(f,d),description:(0,M.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,M.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,h().QU)(f,d),icon:(0,n().r)({height:r().Ev.xl,width:r().Ev.xl})}):await m().Gh({message:(0,h().r6)(f),acceptLabel:(0,h().QU)(f),cancelLabel:(0,M.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,M.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,M.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(p().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:i,perform:e=>{u().wW({environment:t,store:s,permissionItem:o,shouldInherit:c,transaction:e,fromPermissionWrapper:a,trustedDomainsLoggingData:x})}}),!0)}}}]);