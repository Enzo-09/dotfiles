"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[62620],{3486:(e,t,o)=>{o.d(t,{d:()=>i});var n=()=>o(278238);const r={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,n().VA)(e),i="lightgray"===o?"gray":o;return{...r[t.mode][i],icon:{primary:n().l8[t.mode][i]}}}},44750:(e,t,o)=>{o.d(t,{Z:()=>T,p:()=>M});o(16280),o(581454),o(296540);var n=()=>o(484714),r=()=>o(847249),i=()=>o(401497),l=()=>o(663077),a=()=>o(970013),c=()=>o(534177),s=()=>o(686526),d=()=>o(751156),u=()=>o(736982),p=()=>o(403905),m=()=>o(989423),y=()=>o(972435),g=()=>o(317053),f=()=>o(101926),v=()=>o(513349),h=()=>o(922952),b=()=>o(913454),w=()=>o(204067),S=()=>o(272752),x=()=>o(362941),_=()=>o(960127),C=()=>o(342288),k=()=>o(902842),I=o(474848);function T(e){let{environment:t,template:o,isInSuggestedSection:n,collectionContextStore:r}=e;return{key:o.templateId,action:()=>{if(n)M({environment:t,template:o,collectionContextStore:r,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:n,collectionSettingsStore:i}=(0,S().i)(r);(0,v().UD)({template:o,environment:t,collectionStore:e,collectionViewStore:n,collectionSettingsStore:i,collectionContextStore:r})}},render:e=>(0,I.jsx)(A,{buttonMenuItemProps:e,template:o,isInSuggestedSection:n})}}function M(e){let{environment:t,collectionContextStore:o,template:n,suggestedFeatureAnalytics:r}=e;const i=o.collectionStore();if(!i)throw new Error("collectionStore not found");const a=i.getWorkflowTemplateId();r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:r.origin,selected_index:r.selectedIndex,template_ids_shown:r.shownTemplateIds,template_id_clicked:n.templateId,collection_template_id:a}}});const c=o.settingsStore;if((0,_().isWorkflowTemplateWithConfirmStep)(n))s().a2({collectionSettingsStore:c,item:{type:"confirmAddTemplate",template:n}});else if((0,l().Sz)(n)){const{relatedCollectionTemplateId:e}=n;!function(e){var t;let{environment:o,template:n,collectionStore:r,relatedCollectionTemplateId:i}=e;const l=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!l)throw new Error(`parentStore not found for ${r.id}`);if(!(0,h().u)(l))throw new Error(`Incorrect parent store: ${l.table} ${l.id}`);const a=b().globalWorkflowTemplates.fromIdOfType({templateId:i,type:"collection"});(0,g().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:a,origin:"suggested_feature_template",parentStore:l,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:r,relationPropertyTemplate:n}],aiPrompt:void 0})}({environment:t,template:n,collectionStore:i,relatedCollectionTemplateId:e})}else d().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{f().ai({environment:t,transaction:e,collectionStore:i,template:n,logger:new(b().WorkflowTemplateLogger),origin:"suggested_feature"}),r&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:r.origin,template_id_added:n.templateId,collection_template_id:a}}});const l=o.collectionViewStore();l&&v().UD({template:n,environment:t,collectionStore:i,collectionViewStore:l,collectionSettingsStore:c,collectionContextStore:o})}})}function A(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:l}=e;const s=(0,i().IS)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:d}=(0,S().V)(),m=(0,n().v3)(),g=(0,r().K8)((()=>(0,w().NU)({environment:m,collectionStore:d,templateId:o.templateId})),[m,d,o.templateId]),f=(0,r().K8)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:n}=t;switch(n){case"property":const{value:e}=t;if((0,a().DQ)(e)){const n=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:n}=e;const r=(0,w().S1)({collectionStore:n,templateId:t,instancePointerType:"property"});if(!r)return o.options??[];const i=n.getSchema()[r.id];if(!i||!(0,a().DQ)(i))return[];return i.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,b().getWorkflowTemplateItemsCaption)(n)}return;case"collection_view":return`${y().A.formatMessage(p().X[t.value.type])} view`;case"compound":return;default:(0,c().HB)(n)}}({template:o,collectionStore:d})),[o,d]),v=(0,b().getWorkflowTemplateName)(o);return l?(0,I.jsx)(u().I,{buttonMenuItemProps:t,title:v,icon:(0,I.jsx)(k().n,{template:o}),right:(0,I.jsx)(C().z,{isAdded:g})}):(0,I.jsx)(u().I,{buttonMenuItemProps:t,title:v,caption:f,icon:(0,I.jsx)("div",{style:s.iconContainer,children:(0,I.jsx)(k().z,{template:o,iconStyle:s.icon})}),right:(0,I.jsx)(x()._,{})})}},93709:(e,t,o)=>{o.r(t),o.d(t,{CollectionNewViewsPopupComponent:()=>$});o(16280),o(944114),o(898992),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),a=()=>o(663077),c=()=>o(955363),s=()=>o(465505),d=()=>o(568625),u=()=>o(617668),p=()=>o(904789),m=()=>o(959013),y=()=>o(154017),g=()=>o(751156),f=()=>o(767435),v=()=>o(617254),h=()=>o(313892),b=()=>o(94778),w=()=>o(760217),S=()=>o(297872),x=()=>o(928600),_=()=>o(939740),C=()=>o(480095),k=()=>o(8980),I=()=>o(89924),T=()=>o(859428),M=()=>o(972435),A=()=>o(722872),V=()=>o(963589),j=()=>o(962730),R=()=>o(351360),E=()=>o(691093),D=()=>o(46986),B=()=>o(44750),P=()=>o(902842),F=()=>o(913454),H=()=>o(393695),N=()=>o(759709),W=()=>o(423938),U=()=>o(180762),O=()=>o(519839),z=()=>o(403905),L=()=>o(745266),K=o(474848);const q=3;function Y(e){let{numberOfSuggestedViews:t,isShowingMoreSuggestions:o}=e;return t>=5&&!o}function Z(e){let{suggestedWorkflowTemplateViews:t,isShowingMoreSuggestions:o}=e;const n=t.map((e=>e.templateId));return Y({numberOfSuggestedViews:n.length,isShowingMoreSuggestions:o})?n.slice(0,q):n}function $(e){let{collectionContextStore:t,onClose:o,showNewViewItems:$}=e;const X=(0,r().v3)(),G=X.device,J=(0,i().K8)((()=>(0,D().ei)(X)),[X]),[Q,ee]=(0,n.useState)(!1),te=(0,i().K8)((()=>{const e=t.collectionStore(),o=t.collectionViewBlockStore();if(!e||!o)return[];const n=e.getFormat().app_config_uri,r=n?(0,h().lS)((0,v().appConfigs)(),n):void 0;return r?(0,h().Ib)({environment:X,appConfig:r,collectionStore:e,collectionViewBlockStore:o}):[]}),[t,X]),oe=(0,i().K8)((()=>(0,O().NB)(t,G)||!$?"none":J?"item":"section"),[t,G,J,$]),ne=(0,H().Y)(t).filter((e=>(0,a().Xq)(e,"collection_view"))),re=(0,n.useCallback)((e=>({key:e,render:t=>(0,K.jsx)(w().A,{title:M().A.formatMessage(z().X[e]),icon:(0,K.jsx)(L().h,{color:"regular",viewType:e}),...t}),action:()=>{g().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:X,canUndo:!0,perform:o=>{(0,W().Z)({environment:X,collectionContextStore:t,newViewType:e,transaction:o,skipOpenSettings:!1})}}),(0,y().b)({environment:X,collectionContextStore:t,view_type:e,from:"addButton"})}})),[X,t]),{renderSuggestedTypedView:ie}=function(e,t){const o=(0,r().v3)(),l=(0,i().O$)(R().AppStoreCurrentSpaceViewStore),a=(0,i().K8)((()=>e.collectionViewBlockStore()),[e]),c=(0,i().K8)((()=>e.collectionStore()),[e]),s=(0,i().K8)((()=>{var e;if(!c)return;const t=null===(e=c.getFormat())||void 0===e?void 0:e.app_config_uri;return t?(0,h().lS)((0,v().appConfigs)(),t):void 0}),[c]),d=n.useCallback((t=>{if(!a||!s||!l)return;const n=a.getParentStore();if(!n||"block"!==n.table&&"space"!==n.table&&"team"!==n.table)return;if(1!==t.dependencies.length)return;const r=t.dependencies[0];g().createAndCommit({userAction:"CollectionViewSuggestedViews.createView",environment:o,canUndo:!0,perform:i=>{var c;f().applyTypedFeatures({environment:o,spaceViewStore:l,appParentStore:n,appUri:s.uri,features:[{type:"simple",featureUri:t.uri}],appCollectionViewBlockStores:[a],createOrModify:"modify",transaction:i});const d=((null===(c=a.getFormat())||void 0===c?void 0:c.app_uri_map)??{})[r.uri];(0,U().t)({environment:o,collectionContextStore:e,collectionViewId:d,isFullScreen:e.isFullScreenStore.state,isRootChild:e.isRootChildStore.state,isInPeekRenderer:e.isInPeekRendererStore.state}),(0,y().b)({environment:o,collectionContextStore:e,view_type:r.value.type,view_config_uri:t.uri,feature:{id:d,from:"suggested_view",type:t.uri},from:"addButton"})}})}),[a,s,l,o,e]),u=n.useCallback((e=>{const o=(e,t)=>{var o;const n=e.dependencies[0],r=(0,K.jsx)(L().h,{color:"regular",viewIcon:null===(o=n.value.format)||void 0===o?void 0:o.collection_view_icon,viewType:n.value.type});return(0,K.jsx)(w().A,{title:n.value.name?n.value.name:"New View",icon:r,...t})};return{key:e.uri,render:t=>(0,K.jsx)(T().A,{placement:j().W.Left,render:n=>o(e,{...t,...n,onMouseEnter:e=>{var o,r;null===(o=n.onMouseEnter)||void 0===o||o.call(n,e),null===(r=t.onMouseEnter)||void 0===r||r.call(t,e)}}),renderTooltip:()=>e.description}),action:()=>{d(e),t()}}}),[d,t]);return{renderSuggestedTypedView:u}}(t,o),{renderSuggestedWorkflowTemplateView:le}=function(e,t){const o=(0,r().v3)(),n=(0,l().IS)((e=>({icon:{fill:e.regularIconColor}})),[]);return{renderSuggestedWorkflowTemplateView:(r,i,l)=>({key:`workflow.${r.templateId}`,action:()=>{(0,B().p)({environment:o,collectionContextStore:e,template:r,suggestedFeatureAnalytics:{origin:"suggested_views",shownTemplateIds:l,selectedIndex:i}}),t()},render:e=>(0,K.jsx)(w().A,{...e,icon:(0,K.jsx)(P().z,{template:r,size:16,iconStyle:n.icon}),title:(0,F().getWorkflowTemplateName)(r)})})}}(t,o),ae=(0,l().IS)((e=>({showMoreLabel:{color:e.text.secondary}})),[]),ce=["table","board","chart","list","timeline","calendar","gallery"];(0,V().X)("geo_point_property")&&ce.push("map");const se={key:"showMore",render:e=>(0,K.jsx)(w().A,{...e,style:ae.showMoreLabel,icon:(0,d().L)({width:14,marginRight:2}),title:(0,K.jsx)(m().sA,{defaultMessage:"More...",id:"collectionViewSuggestedViews.showMore.label"})}),action:()=>{ee(!0)}},de={key:"emptyView",render:e=>(0,K.jsx)(w().A,{title:(0,K.jsx)(m().sA,{defaultMessage:"Empty view",id:"collectionTabBar.newEmptyView.title"}),icon:(0,K.jsx)(k().I,{icon:u().plusIcon}),...e}),action:()=>{g().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:X,canUndo:!0,perform:e=>{(0,W().Z)({environment:X,collectionContextStore:t,newViewType:"table",transaction:e,skipOpenSettings:!1})}}),(0,y().b)({environment:X,collectionContextStore:t,view_type:"table",from:"addButton"})}},ue=ce.map((e=>re(e)));let pe;pe=te.length?te.map((e=>ie(e))):ne.length?ne.map(((e,t)=>le(e,t,Z({suggestedWorkflowTemplateViews:ne,isShowingMoreSuggestions:Q})))):ue,(0,N().O)({collectionContextStore:t,origin:"suggested_views",shownTemplateIds:Z({suggestedWorkflowTemplateViews:ne,isShowingMoreSuggestions:Q})});const me=(ne.length||te.length)&&Y({numberOfSuggestedViews:pe.length,isShowingMoreSuggestions:Q}),ye=(0,i().K8)((()=>!!(0,D().sx)()&&t.isFullScreenStore.state),[t]),ge={key:"openBuilderConfig",action:()=>{const e=t.collectionViewBlockStore();if(!e)throw new Error("Parent store is undefined");(0,E().showWorkflowEditor)({environment:X,parentStore:e})},render:e=>(0,K.jsx)(w().A,{title:(0,K.jsx)(m().sA,{defaultMessage:"Builder mode",id:"collectionViewSuggestedViews.openBuilderConfig.label"}),icon:(0,K.jsx)(k().I,{icon:s().cubeIcon}),right:(0,K.jsx)(k().I,{icon:c().arrowDiagonalUpRightIcon,color:"secondary",size:18}),...e})},fe={key:"formViewItem",action:()=>{},render:e=>(0,K.jsx)(b().A,{collectionContextStore:t,onClose:o,focused:e.focused,isCompact:J,compactColor:"primary"})},ve={key:"form",render:e=>(0,K.jsx)(I().A,{topBorder:!0,...e}),items:[fe]},he={key:"genericViews",render:e=>(0,K.jsx)(I().A,{title:J?void 0:(0,K.jsx)(m().sA,{defaultMessage:"New view",id:"database.collectionTabBar.newViews"}),...e}),items:[de,...me?[...pe.slice(0,q),se]:pe,..."item"===oe?[fe]:[]]},be=[...J?[{key:"emptyView",render:e=>(0,K.jsx)(w().A,{title:(0,K.jsx)(m().sA,{defaultMessage:"New database",id:"collectionTabBar.newDatabase.title"}),icon:(0,K.jsx)(k().I,{icon:p().R}),...e}),action:()=>{(0,W().l)({environment:X,collectionContextStore:t}),(0,y().b)({environment:X,collectionContextStore:t,view_type:"table",from:"addNewDatabaseButton"})}}]:[],...ye?[ge]:[]],we=be.length>0?{key:"advancedSection",render:e=>(0,K.jsx)(I().A,{topBorder:!0,...e}),items:be}:void 0;return(0,K.jsx)(S().A,{capture:!0,allowEsc:!0,render:e=>{let t;return t=G.isPhone?{menuType:A().gu.Modal,right:(0,K.jsx)(C().DoneMenuText,{}),onClickRight:o,...e}:{menuType:A().gu.Popup,minWidth:J?200:290,maxWidth:J?200:320,maxHeight:J?"70vh":"50vh",...e},(0,K.jsx)(x().A,{...t,children:(0,K.jsx)(_().Ay,{type:_().Oh.Vertical,initialFocus:void 0,sections:[he,..."section"===oe?[ve]:[],...we?[we]:[]],onAccept:e=>{"showMore"!==e.key&&o()}})})}})}},94778:(e,t,o)=>{o.d(t,{A:()=>g});o(296540);var n=()=>o(484714),r=()=>o(847249),i=()=>o(401497),l=()=>o(575157),a=()=>o(959013),c=()=>o(154017),s=()=>o(751156),d=()=>o(760217),u=()=>o(8980),p=()=>o(645873),m=()=>o(339034),y=o(474848);function g(e){const{collectionContextStore:t,onClose:o,focused:g,isCompact:f,compactColor:v="primary"}=e,h=(0,n().v3)(),{value:b}=(0,p().fJ)(m().formsEditorDependency),w=(0,i().IS)((e=>({compactFormButton:{color:"secondary"===v?e.text.secondary:void 0,display:"flex",flexDirection:"row"}})),[v]),S=(0,r().K8)((()=>{var e;return(null===(e=t.collectionViewBlockStore())||void 0===e||null===(e=e.inMemoryRecordCache)||void 0===e?void 0:e.isTemporaryData)??!1}),[t]);function x(){s().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:h,canUndo:!0,skipDefaultPostPerformValidationChecks:S,perform:e=>{b&&b.formEditorActions.createAndFocusCollectionFormEditorView({environment:h,collectionContextStore:t,transaction:e})}}),o(),(0,c().b)({environment:h,collectionContextStore:t,view_type:"form_editor",from:"addButton"})}if(!b)return null;const _=(0,y.jsx)(d().A,{focused:g,onClick:x,title:(0,y.jsx)("div",{style:w.compactFormButton,children:(0,y.jsx)(a().sA,{defaultMessage:"New form",id:"database.collectionViewSelect.newFormButtonTitle"})}),style:{padding:"1 0"},icon:(0,y.jsx)(u().I,{icon:l().docPlainTextIcon,color:v})}),C=(0,y.jsx)(d().A,{focused:g,onClick:x,title:(0,y.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:(0,y.jsx)(a().sA,{defaultMessage:"Form",id:"CollectionViewTabBar.newFormItem.title"})}),icon:(0,y.jsx)(u().I,{icon:l().docPlainTextIcon}),shouldWrapCaption:!0,caption:(0,y.jsx)(a().sA,{defaultMessage:"Create a form to input data directly into this database",id:"CollectionViewTabBar.newFormItem.description"})});return f?_:C}},101209:(e,t,o)=>{o.d(t,{v:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("boltFilled",{svg:(0,n.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,pencilLineIcon:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},r=(0,o(340498).wt)("pencilLine",n)},154017:(e,t,o)=>{o.d(t,{b:()=>l});var n=()=>o(476492),r=()=>o(989423);var i=()=>o(504066);function l(e){const{environment:t,collectionContextStore:o,view_type:l,view_config_uri:a,from:c,...s}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,n().sl)(o)||{},...s,view_type:l,view_config_uri:a,from:c}),(0,i().f)({collectionContextStore:o,action:"create_view",from:c,property_type:void 0})}},200277:(e,t,o)=>{o.d(t,{$:()=>p,N:()=>d});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454);var n=()=>o(428045),r=()=>o(663077),i=()=>o(496603),l=()=>o(534177),a=()=>o(299545),c=()=>o(913454),s=()=>o(204067);function d(e,t){const o=(0,s().Xg)(e,t),n=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(l().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const n of e)o.push(...u(n).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(r().bz).filter((e=>!(0,r().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!n.has(e.value.name??"")))}function u(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function p(e){let{persona:t,parentStore:o}=e;const r=t?(0,n().Qf)({persona:t}):[],l=c().globalWorkflowTemplates.allOfType({templateIds:r??[],type:"collection"}),s=i().hS(function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,a().Yu)(o))return t;const n=(0,a().$R)(o)?o.getTeamPageStores():o.getContentStores(),r=new Set((0,i().oE)(n.flatMap((e=>{var t;return(null===(t=e.getCollectionStores())||void 0===t?void 0:t.map((e=>e.getWorkflowTemplateId())))??[]})))),l=[],c=[];for(const i of t)r.has(i.templateId)?l.push(i):c.push(i);return[...c,...l]}({collectionTemplates:[...l,...c().globalWorkflowTemplates.allOfType({templateIds:(0,n().dj)(),type:"collection"})],parentStore:o}),(e=>e.templateId));return s}},231314:(e,t,o)=>{o.d(t,{y:()=>i});o(296540);var n=()=>o(401497),r=o(474848);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const l=(0,n().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,r.jsx)("div",{style:l.iconContainer,children:t})}},265793:(e,t,o)=>{o.d(t,{b:()=>f,w:()=>v});var n=()=>o(484714),r=()=>o(847249),i=()=>o(888325),l=()=>o(187174),a=()=>o(96689),c=()=>o(541801),s=()=>o(449506),d=()=>o(645873),u=()=>o(351360),p=()=>o(889097),m=()=>o(961581),y=()=>o(299177);const g=!1;function f(e){var t;const o=null===(t=(0,d().fJ)(c().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!o)return;const t=e instanceof p().A?e.collectionStore():e;t&&o(t)}),[o,e])}function v(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=m().A.state.initialRenderCompleted;g&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=u().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,l().Yb)((async()=>{if(!t)return;(y().A.debug||g)&&console.log("Refreshing workflow template instance map for space",t);const o={table:a().NX,id:t,spaceId:t},n=await s().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i()._)(o);y().A.setState({...y().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},272752:(e,t,o)=>{o.d(t,{V:()=>l,i:()=>a});var n=()=>o(847249),r=()=>o(220719),i=()=>o(175116);function l(){const e=(0,i().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r}=(0,n().K8)((()=>a(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:r,collectionContextStore:e}}function a(e){return{collectionStore:(0,r().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,r().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},342288:(e,t,o)=>{o.d(t,{z:()=>a});o(296540);var n=()=>o(401497),r=()=>o(831310),i=()=>o(464699),l=o(474848);function a(e){let{isAdded:t}=e;const o=(0,n().IS)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,l.jsx)("div",{style:o.circle,children:t?(0,r().o)(o.checkIcon):(0,i().b)(o.plusIcon)})}},362941:(e,t,o)=>{o.d(t,{_:()=>l});o(296540);var n=()=>o(401497),r=()=>o(742117),i=o(474848);function l(){const e=(0,n().IS)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,i.jsx)(i.Fragment,{children:(0,r().V)(e.icon)})}},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>j,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>_,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>x,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>f,adjustedStartDateIfPossible:()=>k,areRecurrenceSchedulesEqual:()=>P,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>V,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>E,getNextDateUtc:()=>M,getRecurrenceAfter:()=>I,isRunningBetweenMidnightAnd3AM:()=>T,isValidRecurrenceInterval:()=>b,isValidRecurrenceNumberOfRuns:()=>w,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>C});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function r(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const i=[];for(const l of e)i.push(...r(o[0],...o.slice(1)).map((e=>[l,...e])));return i}var i=()=>o(496603),l=()=>o(534177),a=()=>o(720665),c=()=>o(597777),s=()=>o(869190),d=()=>o(416504),u=()=>o(402390);class p extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const y=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},f={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},v=99,h=999;function b(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function w(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function S(e){const{start_date:t,frequency:o,interval:n,weekdays:i,timezone:a,hour:s,minute:d}=e,u="week"===o&&i?i.map((e=>f[e])):void 0,m={};return(0,l().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,l().HB)(e.end_condition)),"month"===e.frequency&&(0,l().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return f[t].nth(o)})):(0,l().HB)(e.monthly_restriction)),new p({freq:g[o],dtstart:(0,c().eU)(t),interval:n,byweekday:u,tzid:a,byhour:s??0,byminute:d??0,bysecond:0,...m})}const x=1,_=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=n>x,l=o.length>=_;return{violatesConstraint:i||l,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:l,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:r}}function k(e){var t;const{recurrence:o,afterDate:r}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=r)return o;let i=n().c9.fromMillis(o.start_date,{zone:"utc"});const l=n().c9.fromMillis(r,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(l.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(l.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(l.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(l.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,c().DH)(i.toMillis())}}function I(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,c().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(k({recurrence:t,afterDate:o})).after((0,c().eU)(o));if(!e)return;return(0,c().h1)(e)}}function T(e){return 0===e.hour||1===e.hour||2===e.hour}function M(e){return S(e).after((0,c().eU)((0,c().Rz)()))||void 0}function A(e){const{recurrence:t,intl:o}=e,r=M(B(t));if(!r)return;const i=T(t),l=n().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(o)).setZone(t.timezone),a=(0,s().Yq)({date:l,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(y.dateBetweenMidnightAnd3AM,{date:a});{let e=l.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${l.toFormat("ZZZZ")}`),o.formatMessage(y.dateAtTime,{date:a,time:e})}}function V(e,t){return(0,l().O9)(e)?"number"===e.type?t.formatMessage(y.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,l().HB)(e):t.formatMessage(y.noEndCondition)}const j=100;function R(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,l().HB)(e.end_condition):void 0}}function E(e,t,o){return e.plus(o-t)}function D(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(o.toJSDate())}}function B(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,l().HB)(e.end_condition):void 0}}function P(e,t){const o=i().fN(e,(e=>void 0!==e)),n=i().fN(t,(e=>void 0!==e));return i().n4(o,n)}},393695:(e,t,o)=>{o.d(t,{Y:()=>a});var n=()=>o(484714),r=()=>o(847249),i=()=>o(200277),l=()=>o(265793);function a(e){const t=(0,n().v3)();return(0,l().b)(e),(0,r().K8)((()=>{const o=e.collectionStore();return o?(0,i().N)(t,o):[]}),[t,e])}},399762:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>d});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),l=()=>o(288722),a=()=>o(881690),c=o(474848);function s(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,hideTooltip:g,description:f,tooltipPlacement:v,...h}=e,b=(0,n().DP)(),w=(0,n().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:S,backgroundColor:x}=(0,r().LD)(b,o);return t?(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:m,color:S,backgroundColor:x,shouldShrink:y,tooltipPlacement:v,showTooltip:g?"never":"overflow",style:w.token,...h}):null}function d(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:m,shouldShrink:y,groupColor:g,tooltipPlacement:f,description:v,hideTooltip:h,...b}=e,w=(0,n().DP)(),S=(0,n().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:x,backgroundColor:_}=(0,r().LD)(w,o??g??"gray");let C;return C=o||(g||"gray"),(0,c.jsx)(a().A,{format:s,value:(0,c.jsx)(l().A,{children:t}),description:v,onClickRemove:u,showRemoveButton:p,isSingle:m,color:x,backgroundColor:_,shouldShrink:y,showTooltip:h?"never":"overflow",style:S.token,isRound:!0,showColoredDot:C,tooltipPlacement:f,...b})}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,questionMarkCircleIcon:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(340498).wt)("questionMarkCircle",r)},422540:(e,t,o)=>{o.d(t,{$0:()=>f,Fx:()=>_,Ge:()=>m,I3:()=>u,Kj:()=>S,PP:()=>C,TK:()=>k,Yy:()=>d,aE:()=>I,cQ:()=>x,kH:()=>y,m7:()=>p,nq:()=>b,nv:()=>v,tj:()=>g});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(970013),l=()=>o(651124),a=()=>o(349835),c=()=>o(390066);(0,r().u0)((e=>(0,r().O9)(e)&&(0,r().O9)(e.target)&&(0,r().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(s[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s,sourcePropertyIds:d}=e,p=(d??(0,r().uv)(o)).filter(((t,n,r)=>{const l=o[t];return!(!l||!u(l))&&(("relation"!==l.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,l))&&(!a||a([t,l],n,o)))}));if(0===p.length)return[];if(!t||!1===s)return p;const m=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:a}=e,s=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().JY)(r))}));if(0===s.length)return[];if(!t||!1===a)return s;const d=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(s,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===a().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===a().M9.TokenExpected?{type:e.type,token:e.token}:e.type===a().uW.MissingSchemaPropertyOnThisRow||e.type===a().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===a().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===a().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===a().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===a().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===a().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===a().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===a().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===a().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===a().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===a().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===a().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const g={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function f(e){return Boolean(g[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:a,sort:s}=e,d=(0,r().uv)(o).filter(((e,t,n)=>{var r;const l=o[e];return!(!l||!g[l.type])&&((!(0,i().$M)(l)||null===(r=(0,i().om)(l))||void 0===r||!r.auto_update_on_edit)&&(!a||a([e,l],t,o)))}));if(0===d.length)return[];if(!t||!1===s)return d;const u=(0,c().L)(t,o,void 0,l().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return h[e.type]}const w={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function S(e){return w[e.type]}function x(e){return 0===e}function _(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function C(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function k(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!u(r):!g[r.type])}function I(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:l}=t.event;if(void 0===i)return!1;const a="some"===n.type&&n.some,c="all"===n.type&&n.all;if((a||c||[]).some((e=>C({collectionSchema:o,property:e.property})||k({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),d="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||s||d)&&!l)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},462892:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("layout",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},464699:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},465505:(e,t,o)=>{o.r(t),o.d(t,{cubeIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.302 1.853a.63.63 0 0 0-.604 0l-6.65 3.669c-.2.11-.323.32-.323.547v7.862c0 .228.124.437.323.547l6.65 3.67a.63.63 0 0 0 .604 0l6.65-3.67c.2-.11.323-.32.323-.547V6.069a.63.63 0 0 0-.323-.547zM3.975 7.127l5.4 2.98v6.434l-5.4-2.98zm6.65 9.414v-6.434l5.4-2.98v6.435zM15.356 6.07 10 9.024 4.644 6.069 10 3.114z"})},r=(0,o(340498).wt)("cube",n)},497222:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(804773),r=()=>o(401497),i=()=>o(742117),l=()=>o(30626),a=()=>o(284371),c=()=>o(760217),s=()=>o(700251),d=o(474848);function u(e){const{icon:t,iconStyle:o,title:u,caption:p,right:m,rightStyle:y,isRed:g,isGray:f,isOrange:v,onClick:h,onMouseDown:b,onMouseEnter:w,onMouseLeave:S,disabled:x,showChevron:_,chevronStyle:C,rotateChevron:k,showDragHandle:I,focused:T,textWrapperStyle:M,shouldWrapCaption:A,desktopIconStyle:V,buttonStyle:j,desktopTitleStyle:R}=e,E=(0,s().y$)(),D=(0,r().IS)((e=>({style:{color:f?e.text.secondary:v?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:f?e.mediumIconColor:v?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:x?.4:void 0,...j},leftIconStyle:{width:E,height:E,...t===l()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:x?e.text.primary:e.text.tertiary,fill:x?e.regularIconColor:e.lightIconColor,flexShrink:0,...y},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...C},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[f,v,x,o,t,C,y,j,E]),{itemRef:B,isTabbable:P,onKeyDown:F,onFocus:H}=(0,n().e)();return(0,d.jsx)(c().A,{ref:B,icon:null==t?void 0:t(D.leftIconStyle),focused:T||!1,disabled:x,title:u,caption:p,shouldWrapCaption:A,desktopTitleStyle:{flexGrow:1,flexShrink:1,...R},onKeyDown:F,onFocus:H,disallowTabbing:!P,showDragHandle:I,buttonStyle:D.style,rightStyle:D.rightStyle,isRedOnHover:g,ignoreLocalHoverState:!!x||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...a().RC,display:"flex"},children:m}),!x&&_&&(0,i().V)({...D.rightIconStyle,...k&&D.rightIconRotatedStyle})]}),onClick:h,onMouseDown:b,onMouseEnter:w,onMouseLeave:S,textWrapperStyle:M,desktopIconStyle:V})}},546461:(e,t,o)=>{o.d(t,{EC:()=>x,To:()=>S,YC:()=>_,or:()=>w,u:()=>b});o(16280);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(496506),a=()=>o(322867),c=()=>o(959013),s=()=>o(534177),d=()=>o(813297),u=()=>o(862292),p=()=>o(698331),m=()=>o(645873),y=()=>o(190019),g=()=>o(76190),f=o(474848);const v=new WeakMap,h=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:n}=e,b=(0,r().v3)(),w=(0,c().tz)(),{value:S}=(0,m().fJ)(u().T.formulas),{value:x}=(0,m().fJ)(d().QV.automationTypecheck),_=(0,g().n)(t),C=(0,i().K8)((()=>{if(!S)return{error:new(a().N9)("Missing formulas dependency")};if(!x)return{error:new(a().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:c}=e,d=v.get(o);if(d)return d;{const e=new(l().default)((()=>{const e=o.getTriggerType();let l=r;return(0,s().O9)(e)&&(0,p().x2)(e)&&(l=(0,p().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:l,formulasModule:i,intl:a,isSubscribed:c})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:x,contextType:n,formulasModule:S,intl:w,isSubscribed:_});return e.state}),[b,t,x,n,S,w,_]);return(0,f.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:C,contextType:n,defined:!0},children:o})}function w(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,f.jsx)(b,{automationStore:t,contextType:(0,p().H8)(n??"event"),children:o})}function S(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function x(){const e=n.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function _(){return n.useContext(h)}},698331:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>l,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function l(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},725649:(e,t,o)=>{function n(e){return!(!e||"askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>r,K$:()=>n,j6:()=>i})},736982:(e,t,o)=>{o.d(t,{I:()=>d,h:()=>s});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(284371),l=()=>o(760217),a=()=>o(115512),c=o(474848);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px",alignItems:"center"}}function d(e){let{buttonMenuItemProps:t,title:o,caption:d,icon:u,onClick:p,right:m,isDisabled:y}=e;const g=(0,n().v3)(),f=(0,r().IS)((e=>({menuItem:{display:"flex",...s({environment:g}),opacity:y?.4:void 0},title:{fontSize:(0,a().ny)(g,"UIRegular"),...i().RC},caption:{fontSize:(0,a().ny)(g,"UISmall"),overflow:"hidden",color:e.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[g,y]),v={};return p&&(v.onClick=p),(0,c.jsx)(l().A,{...t,style:f.menuItem,disabled:y,title:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:f.title,children:o}),d&&(0,c.jsx)("div",{style:f.caption,children:d})]}),icon:u,right:m,...v})}},759709:(e,t,o)=>{o.d(t,{O:()=>a});var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(989423);function a(e){let{collectionContextStore:t,shownTemplateIds:o,origin:a}=e;const c=(0,r().v3)(),s=(0,i().K8)((()=>{var e;return null===(e=t.collectionStore())||void 0===e?void 0:e.getWorkflowTemplateId()}),[t]),d=(0,n.useRef)(!1);(0,n.useEffect)((()=>{!d.current&&o.length>0&&((0,l().u4)({environment:c,event:{eventName:"suggested_feature_templates_shown",eventProperties:{origin:a,collection_template_id:s,template_ids_shown:o}}}),d.current=!0)}))}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},902842:(e,t,o)=>{o.d(t,{n:()=>C,z:()=>x});o(16280),o(296540);var n=()=>o(847249),r=()=>o(401497),i=()=>o(663077),l=()=>o(632625),a=()=>o(743176),c=()=>o(278238),s=()=>o(101209),d=()=>o(366295),u=()=>o(462892),p=()=>o(926329),m=()=>o(534177),y=()=>o(745266),g=()=>o(231314),f=()=>o(963589),v=()=>o(3486),h=()=>o(913454),b=o(474848);const w=16;function S(e){let{icon:t,theme:o,size:n,style:i}=e;const a=(0,r().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,b.jsx)(l().p,{icon:t,theme:o,size:n,style:a.icon})}function x(e){var t;let{template:o,size:n,iconStyle:l}=e;const a=n??w,g=(0,r().IS)((()=>({icon:{width:a,height:a,...l}})),[a,l]),f=(0,r().DP)();if((0,i().cB)(o.templateId))return(0,d().L)(g.icon);const{type:v}=o;switch(v){case"property":return(0,b.jsx)(_,{template:o,iconSize:a,styles:g});case"collection_view":return(0,b.jsx)(y().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:g.icon});case"layout":return(0,b.jsx)(b.Fragment,{children:(0,u()._)(g.icon)});case"block":return(0,b.jsx)(b.Fragment,{children:(0,p().b)(g.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,c().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,b.jsx)(S,{icon:e,theme:f,size:a,style:g.icon});case"automation":return(0,b.jsx)(b.Fragment,{children:(0,s().v)(g.icon)});default:(0,m().HB)(v)}}function _(e){let{template:t,iconSize:o,styles:i}=e;const l=(0,r().DP)(),c=(0,f().X)("nds_default_property_noticon"),s=(0,n().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return h().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,b.jsx)(a().zB,{type:t.value.type,icon:s,size:o,style:i.icon,theme:l,isDefaultNoticonEnabled:c})}function C(e){let{template:t,backgroundSize:o}=e;const n=(0,r().IS)((e=>({iconContainer:{background:k({theme:e,template:t})[30]},icon:{fill:k({theme:e,template:t})[400]}})),[t]);return(0,b.jsx)(g().y,{backgroundColor:n.iconContainer.background,backgroundSize:o,icon:(0,b.jsx)(x,{template:t,iconStyle:n.icon})})}function k(e){let{theme:t,template:o}=e;const{type:n}=o;switch(n){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(n)}}},904789:(e,t,o)=>{o.d(t,{R:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M12 8.875c.345 0 .625.28.625.625v1.875H14.5a.625.625 0 1 1 0 1.25h-1.875V14.5a.625.625 0 1 1-1.25 0v-1.875H9.5a.625.625 0 1 1 0-1.25h1.875V9.5c0-.345.28-.625.625-.625"}),(0,n.jsx)("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},i=(0,o(340498).wt)("squareOnSquarePlus",r)}}]);