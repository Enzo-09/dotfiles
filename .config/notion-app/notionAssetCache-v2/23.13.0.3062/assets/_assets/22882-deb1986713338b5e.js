"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[22882],{53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var o=()=>n(597777),r=()=>n(869190),i=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,a=i().C6.toPersistedDate(t.valueOf());return r().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=i().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=i().C6.toPersistedDateRange(t),l=r().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=r().fU({start_time:c.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},69447:(e,t,n)=>{n.d(t,{Lq:()=>o,WK:()=>i,nh:()=>r});const o=40,r=48,i=60},97059:(e,t,n)=>{n.d(t,{W:()=>g,w:()=>f});n(944114);var o=()=>n(585515),r=()=>n(577449),i=()=>n(161479),a=()=>n(545285),s=()=>n(763824),l=()=>n(780054),c=()=>n(870618),d=()=>n(670631),u=()=>n(227440),p=()=>n(508496),m=()=>n(540758);async function f(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,s={page:{id:n,spaceId:(0,i().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await o().T(s,r().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),r().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),d}({environment:t,pageId:e})))).flat()}function g(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,m().Bd)(t)}},173019:(e,t,n)=>{n.d(t,{r:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},175116:(e,t,n)=>{n.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>a});n(16280);var o=n(296540);const r="collectionContextStore",i=(0,n(446943).C)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),a=i.context,s=i.Provider;function l(){const e=o.useContext(a);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function c(){return o.useContext(a)}},256863:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(847249),r=()=>n(824862),i=n(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:s,style:l,size:c}=e,d=(0,n(959013).tz)(),u=(0,o().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:r().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:r().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),p=(0,o().K8)((()=>(null==a?void 0:a.getDisplayName(d))??(0,n(799288).Hg)(t)),[a,t,d]),{activeDotStyle:m}=(0,n(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,i.jsxs)("div",{style:l,children:[(0,i.jsx)(n(614505).B,{icon:u,title:p,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,i.jsx)("div",{style:m}):void 0]})}},274652:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(296540),r=n(474848);const i=o.forwardRef((function(e,t){const o=(0,n(401497).IS)((t=>({base:{color:e.isBlue?n(100622).Ay.blue:t.text.secondary},buttonMenuItem:{...e.style,...e.disabled?{cursor:"not-allowed"}:{}}})),[e.disabled,e.isBlue,e.style]),{color:i}=o.base;return(0,r.jsx)(n(760217).A,{ref:t,...e,title:(0,r.jsx)("div",{style:{color:i,fill:i},children:e.title}),icon:(0,r.jsx)(n(8980).I,{icon:n(617668).plusIcon,style:{fill:i}}),style:o.buttonMenuItem})}))},319357:(e,t,n)=>{n.d(t,{O:()=>c});var o=n(296540),r=()=>n(484714),i=()=>n(430923),a=()=>n(406699),s=()=>n(962730),l=n(474848);function c(e){const{collectionContextStore:t,groupFormat:n,renderLinkButton:c,onAddOrLink:d,...u}=e,p=(0,r().Y0)(),m=(0,o.useCallback)((e=>(0,l.jsx)(i().l7,{collectionContextStore:t,groupFormat:n,onClose:()=>e.close(),onAddOrLink:d})),[t,n,d]);return(0,l.jsx)(a().Ay,{popupType:p.isMobile?a().z7.BottomSheet:a().z7.Popup,alignmentToOrigin:s().C.Start,disableFlippingPlacement:!0,...u,renderOrigin:c,render:m})}},338931:(e,t,n)=>{n.d(t,{Gj:()=>r,RN:()=>s,vZ:()=>i});n(944114),n(898992),n(823215),n(354520),n(672577);var o=()=>n(244641);function r(e){const t=o().c9.fromMillis(e.startUnixTimestampMS),n=e.endUnixTimestampMS?o().c9.fromMillis(e.endUnixTimestampMS):void 0,r=o().c9.fromMillis(e.startOfWeekUnixTimestampMS),i=o().c9.fromMillis(e.endOfWeekUnixTimestampMS),a=t.startOf("day"),s=o().c9.max(r,a),l=Math.ceil(s.diff(r,"days").get("days"));let c=1;if(n){const e=n.endOf("day"),t=o().c9.min(i,e);c=Math.ceil(t.diff(s,"days").get("days"))}return{start:t,end:n,startOfWeek:r,endOfWeek:i,startColumn:l,columnCount:c}}function i(e){const t=(e.attendees||[]).filter((e=>!e.self&&!e.resource));return e.hasParticipants&&t.length>0&&t.every((e=>"declined"===e.responseStatus))}const a={upcomingMinsThreshold:10,startingMinsThreshold:5,startedMinsThreshold:15};function s(e){const t=e.filter((e=>{var t;if(!e.conferencing)return!1;return!function(e){if("declined"===e)return!0;return!1}((null===(t=e.attendees)||void 0===t?void 0:t.find((e=>e.self)))?e.responseStatus??"accepted":"accepted")&&!e.isAllDay}));if(0===t.length)return;const{upcomingMinsThreshold:n,startingMinsThreshold:r,startedMinsThreshold:i}=a,s=[],c=[],d=[],u=[],p=[];for(const a of t){if(a.isAllDay)continue;const e=l(a),t=o().c9.now(),m=e.start.diff(t,"minutes").minutes;m>=0&&m<=n?s.push(a):-m>=r?d.push(a):-m>=i?u.push(a):e.contains(t)?c.push(a):p.push(a)}return[...s,...d,...u,...c,...p][0]}function l(e){const t=o().c9.fromISO(e.start.dateTime,{zone:e.start.timeZone}),n=o().c9.fromISO(e.end.dateTime,{zone:e.end.timeZone});return o().IX.fromDateTimes(t,n)}},380048:(e,t,n)=>{n.d(t,{I:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("chevronLeft",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.61816 8.06445C3.61816 8.29688 3.70703 8.49512 3.8916 8.67285L9.22363 13.8887C9.36719 14.0391 9.55859 14.1143 9.77734 14.1143C10.2217 14.1143 10.5703 13.7725 10.5703 13.3213C10.5703 13.1025 10.4814 12.9043 10.3311 12.7539L5.52539 8.06445L10.3311 3.375C10.4814 3.21777 10.5703 3.01953 10.5703 2.80078C10.5703 2.35645 10.2217 2.01465 9.77734 2.01465C9.55859 2.01465 9.36719 2.08984 9.22363 2.24023L3.8916 7.45605C3.70703 7.63379 3.625 7.83203 3.61816 8.06445Z"})})},381138:(e,t,n)=>{n.d(t,{q:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},398842:(e,t,n)=>{n.d(t,{Jv:()=>h,Zr:()=>S,Rl:()=>x,mA:()=>y});var o=n(296540),r=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(970013),l=()=>n(743176),c=()=>n(68465),d=()=>n(159588),u=()=>n(963589),p=()=>n(331542),m=n(474848);function f(){const e=(0,a().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(p().A,{legacySize:14})})}var g=()=>n(399275);const v=function(){return(0,m.jsx)(n(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(n(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const y=o.memo((function(e){const{propertySchema:t,showIcon:o,showDragIcon:i,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:f,className:g,labelSizeVariant:v}=e,y=(0,r().v3)(),{device:h}=y,S=h.isMobile?16:14,b=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:S,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===v||i?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[S,s,u,v,i,c]);return(0,m.jsxs)("div",{className:g,style:b.container,children:[o&&(0,m.jsxs)("div",{style:b.iconWrapper,children:[(0,m.jsx)("div",{style:b.itemIcon,children:(0,m.jsx)(x,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,m.jsx)("div",{style:b.dragHandle,children:(0,m.jsx)(n(57232).A,{style:f,iconSize:12,iconStyle:b.dragIcon})})]}),!s&&(0,m.jsx)("div",{style:{...n(284371).RC},children:t.name}),l]})}));function h(e){const{propertySchema:t}=e,n=(0,r().v3)();return(0,i().K8)((()=>(0,c().O0)(n)&&s().$M(t)&&s().om(t)),[n,t])?(0,m.jsx)(v,{}):null}function S(e){let{propertyId:t,collectionContextStore:n}=e;return(0,i().K8)((()=>{var e;const o=null===(e=n.collectionStore())||void 0===e?void 0:e.id;if(!o)return!1;const r=g().d.state.collectionsProperties[o];return!!r&&"Loading"===r[t]}),[n,t])?(0,m.jsx)(f,{}):null}function x(e){const{propertySchema:t,iconSize:n,iconStyle:o}=e,{isMobile:i}=(0,r().Y0)(),s=(0,a().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=i?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:n||d,theme:s,style:o,isDefaultNoticonEnabled:c})}},399275:(e,t,n)=>{n.d(t,{d:()=>r});n(898992),n(354520);class o extends(()=>n(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,n(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const n=this.state.collectionsProperties[e],o=n?{...n,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:o}})}removeCollectionProperties(e,t){const n=this.state.collectionsProperties[e];if(!n)return;const o=Object.fromEntries(Object.entries(n).filter((e=>{let[n]=e;return!t.has(n)})));if(0===Object.keys(o).length){const{[e]:t,...n}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:n})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:o}})}}const r=new o;(0,n(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",r)},427636:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const r=function(e){const{botStore:t,avatarSize:r,shouldShowBadge:i,style:a,inline:s}=e,l=(0,n(959013).tz)(),c=(0,n(484714).Y0)(),d=(0,n(847249).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:u,avatarWrapStyle:p,badgeStyle:m}=(0,n(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...a},avatarWrapStyle:s?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:c.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[a,s,c]);return(0,o.jsxs)("div",{style:u,children:[(0,o.jsx)("div",{style:p,children:(0,o.jsx)(n(256863).A,{botStore:t,size:r})}),(0,o.jsx)("div",{style:{...n(284371).RC},children:d}),i&&(0,o.jsx)("div",{style:m,children:"Bot"})]})}},430923:(e,t,n)=>{n.d(t,{DV:()=>s,l7:()=>a,y7:()=>i});var o=()=>n(645873);const r={CollectionNewViewsPopupComponent:new(o().O2)("CollectionNewViewsPopupComponent",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(7605),n.e(62620)]).then(n.bind(n,93709)))),CollectionLinkExistingModal:new(o().O2)("CollectionLinkExistingModal",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(90825),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(71993),n.e(52393),n.e(26090),n.e(12341),n.e(66984),n.e(90978),n.e(64598),n.e(5287)]).then(n.bind(n,901226)))),ModalOverlayCollectionView:new(o().O2)("ModalOverlayCollectionView",(async()=>await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(74070),n.e(32413)]).then(n.bind(n,700868))))},i=(0,o()._h)(r.CollectionNewViewsPopupComponent,(e=>e.CollectionNewViewsPopupComponent)),a=(0,o()._h)(r.CollectionLinkExistingModal,(e=>e.CollectionLinkExistingModal)),s=(0,o()._h)(r.ModalOverlayCollectionView,(e=>e.ModalOverlayCollectionView))},465364:(e,t,n)=>{n.d(t,{$N:()=>R,D5:()=>k,GB:()=>M,M9:()=>P,Pt:()=>T,eW:()=>_,jo:()=>O,v7:()=>I});n(944114),n(898992),n(803949),n(581454);var o=()=>n(244641),r=()=>n(787626),i=()=>n(713998),a=()=>n(597777),s=()=>n(604995),l=()=>n(416504),c=()=>n(519831),d=()=>n(496603),u=()=>n(534177),p=()=>n(299709),m=()=>n(317001),f=()=>n(520861),g=()=>n(878060),v=()=>n(44729),y=()=>n(246826),h=()=>n(319975),S=()=>n(519839),x=()=>n(695625),b=()=>n(397248),C=()=>n(630116),w=()=>n(747671);function P(e){const{environment:t,droppedStores:n,duplicate:i,calendarBy:d,transaction:u,collectionContextStore:g,duplicateActions:y}=e,h=o().c9.fromMillis(e.startOfDay);let x=!0;for(const o of n){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:o,collectionContextStore:g});if(o.getParentTable()===c().Vl||!t){x=!1;break}v().X$({childStore:o,parentStore:t,transaction:u})||(x=!1)}const b=(0,f().T)({environment:t,droppedStores:n,duplicate:i,transaction:u,collectionStore:e.collectionStore,duplicateActions:y});for(const o of b){const n=e.collectionStore?e.collectionStore:(0,S().Dj)({store:o,collectionContextStore:g});if(!n)continue;const i=n.getMappedProperty(d),c=o.getPropertyStore(i),f=(0,r().b)(c.getValue())||s().Ec((0,l().P)()),v=s().kW(f,(0,l().P)()),y=h.toFormat(s().tr);let b;if("date"===v.type||"datetime"===v.type)b={...v,start_date:y};else{const e=s().AA(v,(0,l().P)());if(!e.end)return;const t={...v,start_date:y},n=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),o=e.end.plus(n).toFormat(s().tr);b={...v,start_date:y,end_date:o}}const C=s().kW(b,a().$K(f)||(0,l().P)());(0,m().j)({environment:t,store:o,collectionStore:n,collectionContextStore:g,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:x}),k({environment:t,type:"dateValue",propertyId:i,store:o,transaction:u,dateValue:C}),(0,p().E)({environment:t,collectionContextStore:g,block_id:o.id,property:i,property_type:"date",from:"calendar"})}}function I(e){const{calendarStore:t,direction:n,targetStore:o}=e;t.setState({...t.state,isDragging:!0,targetStore:o,direction:n,temporaryValue:void 0})}function M(e){const{calendarStore:t,x:n,y:i,calendarBy:c}=e,u=t.state;if(u.isDragging){const e=(0,r().b)(u.targetStore.getPropertyStore(c).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),m=u.temporaryValue||e,f=s().kW(m,(0,l().P)()),g=[];u.dayStoreMap.forEach(((e,t)=>{g.push({store:e,timestamp:t})}));const v=g.find((e=>{let{store:t}=e;const o=x().T.getRectFromStore(t);return Boolean(o&&b().ux(o,n,i))}));let y;if(v){const e=o().c9.fromMillis(v.timestamp),t=e.endOf("day"),n=e.toFormat(s().tr);if(p){const r=s().AA(p,(0,l().P)());if(u.direction===w().Q.Left)if(o().IX.fromDateTimes(e,t).contains(r.start))y=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:n,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:n,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:n,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());y=!r.end&&t.start>r.start||r.end&&t.start>r.end?f:e}else if(r.end?o().IX.fromDateTimes(e,t).contains(r.end):o().IX.fromDateTimes(e,t).contains(r.start))y=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:n}:"datetime"===p.type?{...p,type:"datetimerange",end_date:n,end_time:"00:00"}:{...p,end_date:n};const t=s().AA(e,(0,l().P)());y=t.end&&t.end<t.start?f:e}}}if(y&&!d().n4(f,y)){const e=s().kW(y,a().$K(m)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function _(e){const{environment:t,calendarStore:n,calendarBy:o,transaction:r}=e,i=n.state;i.isDragging&&i.temporaryValue&&(k({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:o,store:i.targetStore,transaction:r}),n.setState({...n.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,n=t.state;n.isDragging&&t.setState({...n,isDragging:!1})}function R(e){const{environment:t,store:n,collectionStore:r,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),f=a.normalizedQueryStore.state;if(!f||!f.calendar_by)return;const g=(null==r?void 0:r.getMappedProperty(f.calendar_by))??f.calendar_by,v=s().hp(u,c,p),h=v.startOf("month"),S=v.endOf("month"),x=o().c9.now().startOf("day");let b;return b=o().IX.fromDateTimes(h,S).contains(x)?s().p6(x.valueOf(),p):s().p6(s().iB(u,c,p).valueOf(),p),y().zv({store:n.getPropertiesStore(),data:{[g]:i().m5(b)},transaction:d}),(0,m().j)({environment:t,store:n,collectionStore:r,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),n}function k(e){const{environment:t,store:n,propertyId:o,transaction:r}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const c=n.getPropertyValue(o),d=i().m5(a);y().zv({store:n.getPropertiesStore(),data:{[o]:d},transaction:r}),g().O({environment:t,store:n,dateProperty:{id:o,oldValue:c,newValue:d}})}function O(e){const{environment:t,collectionStore:n,calendarBy:o,store:r,insertStores:i,collectionContextStore:a,transaction:s}=e,l=r.getPropertyStore(o).getValue();for(const c of i)(0,m().j)({environment:t,store:c,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(o),value:l,transaction:s});return i.map((e=>C().Bv.createChildStore(n,e.pointer)))}},520861:(e,t,n)=>{n.d(t,{T:()=>r});n(944114),n(898992),n(908872);var o=()=>n(415651);function r(e){const{environment:t,collectionStore:n,duplicate:r,droppedStores:i,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=i.reduce(((e,t)=>(r||t.getAssociatedCollectionId()!==(null==n?void 0:n.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...o().MS({environment:t,droppedStores:c,duplicate:r,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},551619:(e,t,n)=>{n.d(t,{Hy:()=>k,NV:()=>T,O9:()=>D,Rg:()=>O,Sm:()=>V,dK:()=>j,f7:()=>A,l8:()=>z,n$:()=>E,no:()=>B,sx:()=>R});var o=()=>n(484714),r=()=>n(792485),i=()=>n(847249),a=()=>n(700500),s=()=>n(651124),l=()=>n(519831),c=()=>n(620689),d=()=>n(591197),u=()=>n(835066),p=()=>n(964345),m=()=>n(68465),f=()=>n(753199),g=()=>n(504836),v=()=>n(478726),y=()=>n(747100),h=()=>n(963589),S=()=>n(665579),x=()=>n(351360),b=()=>n(525569),C=()=>n(508496),w=()=>n(375447),P=()=>n(66496),I=()=>n(548821),M=()=>n(712505),_=()=>n(302022);function T(e){(0,f().SQ)({event:e,context:f().y$.EditorMouseDown,callback:()=>{}})}function R(e){(0,f().SQ)({event:e,context:f().y$.EditorClick,callback:()=>{}})}function k(e){return(0,i().K8)((()=>Boolean(_().A.state.pageMap[e.id])||P().A.state.pages.has(e.id)),[e.id])}function O(e,t){const n=(0,o().v3)(),a=(0,r().S)(),s=k(e),l=(0,i().K8)((()=>{var n,o;return t===I().Rr.Frame?Boolean(null===(n=x().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===I().Rr.PeekView&&M().default.state.open?Boolean(null===(o=M().default.state.loadingContainerStore)||void 0===o?void 0:o.state.ready):t===I().Rr.CollectionPageView||t===I().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=A(e);return(0,i().K8)((()=>{if(!l)return!1;const t=n.currentUser.isLoggedIn(),o=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=o&&o.hasPublicPermission)||"edit"===(null==o?void 0:o.permission))&&!s&&!c&&(!(0,m().ZE)(o)||"completionPopup"!==b().default.state.type))}),[n.currentUser,c,l,a,s,e])}function D(e,t){const n=(0,o().v3)(),a=(0,r().S)(),{isTablet:s}=(0,o().Y0)(),l=(0,h().X)("tablet_refresh_template_pills_gate");return(0,i().K8)((()=>{if(t===I().Rr.SitePreview)return!1;if(n.device.isMobile&&(!s||!l))return!1;if(!n.currentUser.isLoggedIn())return!1;const o=a&&a.publicEditModeStore.state;if(null!=o&&o.hasPublicPermission&&"edit"!==(null==o?void 0:o.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=p().gZ.state,c=p().Di.state;if(i&&e.id===c)return!1;return!((0,v().L5)(t)?d().VY.state:d().u3.state)}),[n,a,e,t,s,l])}function A(e){return(0,i().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function V(e){return(0,i().K8)((()=>{if(!(0,g().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function j(e){return(0,i().K8)((()=>{if(!(0,g().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function z(e){return(0,i().K8)((()=>{if(!C().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().IE.CsvImport}),[e])}function E(e){const t=(0,o().v3)(),{device:n,WindowSizeStore:r}=t,a=(0,i().K8)((()=>{const e=r.state.height,o=n.isMobile&&w().A.state.open?e:0;return c().C6(t)+o}),[t,r,n.isMobile]);return(0,i().K8)((()=>"home-phone"===e?S().q3:n.isTablet?380:n.isIOS?Math.max(350,a):n.isMobile?400:"side-peek"===e||"center-peek"===e?y().ln:"home"===e?S().wH:"30vh"),[n,a,e])}function B(e){const t=(0,o().v3)(),n=(0,i().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,i().K8)((()=>n&&!e.isFullWidth()?(0,u().Zy)(t,(0,y().cq)(e),(0,y().RX)(e)):0),[t,n,e])}},591197:(e,t,n)=>{n.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>a});var o=()=>n(496506);class r extends(()=>n(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new r,a=new(o().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(o().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},617668:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,plusIcon:()=>r});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},r=(0,n(340498).wt)("plus",o)},654734:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),r=()=>n(869190),i=()=>n(604995),a=()=>n(416504),s=n(474848);const l=function(e){const t=(0,n(959013).tz)(),l=(0,n(401497).DP)(),u=(0,n(396182).I)(),p=(0,o.useRef)(),m=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=i().q8(t,(0,a().P)());if(!o)return;const r=o.valueOf(),s=r-Date.now();s<0||s>n(720665).nD||p.current&&p.current.timestamp===r||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:r,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),s)})}),[u,e.value]),f=(0,o.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,o.useEffect)((()=>{m()}),[m]),(0,o.useEffect)((()=>()=>{f()}),[f]);const{value:g,withComma:v}=e,y=(0,n(847249).K8)((()=>g?(0,r().ZF)({value:g,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,a().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,g]);if(!g)return null;const h=i().AA(g,(0,a().P)(),n(662303).locale);let S;if(g.reminder){const e=i().Zs(g,(0,a().P)());S=e?{color:l.errorText}:{color:n(100622).Ay.blue}}const x=(0,s.jsxs)(s.Fragment,{children:[y,g.reminder&&(0,n(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),v?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},children:x}):(0,s.jsx)(n(859428).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(h.start),h.end?` â†’ ${c(h.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},...t,children:x}),placement:e.tooltipPlacement})};function c(e){return(0,r().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},665579:(e,t,n)=>{n.d(t,{$E:()=>_,$L:()=>s,BZ:()=>d,EC:()=>f,EI:()=>x,E_:()=>M,Ed:()=>p,Fq:()=>y,Lu:()=>C,Mk:()=>m,O0:()=>I,UO:()=>T,V$:()=>P,VQ:()=>g,Xx:()=>b,Xy:()=>c,YS:()=>v,_g:()=>S,dd:()=>u,pW:()=>l,q3:()=>a,wH:()=>i});var o=()=>n(496603),r=()=>n(534177);const i=160,a=40,s=24,l=20,c=600,d=270,u=405,p=480,m=500,f=void 0,g=16,v=10,y=8,h=(n(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function x(e){return{icon:e.mediumIconColor,text:e.text.secondary}}function b(e){return{width:48,height:48,fill:e.lightIconColor}}function C(e){let{theme:t,isPhone:n}=e;return n?t.personalHomeBackgroundPhone:t.surface.page}const w=1;function P(e){let{isPhone:t,theme:n}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:n.home.tile.background,boxShadow:M({isPhone:t,theme:n}),...h}}function I(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return w;default:return(0,r().ub)(t),0}}function M(e){let{isPhone:t,theme:n,borderOnly:r}=e;if("dark"===n.mode)return"unset";n.mode;const i=I({mode:n.mode});return(0,o().oE)([r||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${i}px rgba(0, 0, 0, 0.05)`]).join(", ")}function _(e){return{display:"flex",flexDirection:"column",width:"100%",gap:24}}function T(e){const{isPhone:t,theme:n,borderOnly:o}=e;return{unhoveredBoxShadow:M({isPhone:t,theme:n,borderOnly:o}),hoveredBoxShadow:"light"===n.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):n.homeShadow.card.hovered}}},747671:(e,t,n)=>{n.d(t,{Q:()=>o,a:()=>r});let o=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>n(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},833880:(e,t,n)=>{n.d(t,{S4:()=>S,Sn:()=>v,j2:()=>g,kc:()=>f,oq:()=>h});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var o=()=>n(244641),r=()=>n(410486),i=()=>n(597777),a=()=>n(604995),s=()=>n(416504),l=()=>n(792071),c=()=>n(496603),d=()=>n(186445),u=()=>n(338931),p=()=>n(909470),m=()=>n(508496);(0,n(959013).YK)({week:{defaultMessage:"Week",id:"calendar.viewRanges.week"},month:{defaultMessage:"Month",id:"calendar.viewRanges.month"}});function f(e){return!1===e.isDragging}function g(e){const{collectionContextStore:t}=e,n=t.collectionViewStore();if(!n)return;const o=t.normalizedSchemaStore.state,r=n.getQuery(o);if(!r||!r.calendar_by)return;const i=t.dateRangeStartStore.state,l=t.dateRangeEndStore.state,c=(0,a().p6)(i,(0,s().P)()),d=(0,a().p6)(l,(0,s().P)());return y({calendarBy:r.calendar_by,dateRangeStartDate:c,dateRangeEndDate:d})}function v(e){const{collectionContextStore:t,startOfDay:n}=e,r=t.collectionViewStore();if(!r)return;const i=t.normalizedSchemaStore.state,l=r.getQuery(i);if(!l||!l.calendar_by)return;const c=o().c9.fromMillis(n).endOf("day").valueOf(),d=(0,a().p6)(n,(0,s().P)()),u=(0,a().p6)(c,(0,s().P)());return y({calendarBy:l.calendar_by,dateRangeStartDate:d,dateRangeEndDate:u})}function y(e){const{dateRangeStartDate:t,dateRangeEndDate:n,calendarBy:o}=e;return{type:"results",filter:{operator:"and",filters:[{property:o,filter:{operator:"date_is_on_or_after",use_end:!0,value:{type:"exact",value:t}}},{property:o,filter:{operator:"date_is_on_or_before",value:{type:"exact",value:n}}}]},limit:5e3}}function h(e){var t;const{collectionContextStore:n,results:o,getRecordValue:r,intl:l,formulasModule:p}=e,m=n.collectionViewStore(),f=n.normalizedQueryStore.state,g=n.normalizedSchemaStore.state,v=f?f.calendar_by:void 0,y=n.dateRangeStartStore.state,h=n.dateRangeEndStore.state,b=(null===(t=n.collectionViewStore())||void 0===t?void 0:t.getFormat().calendar_show_weekends)??!0,C=d().XX.state,w=(0,s().P)(),P=n.getCurrentUserId();if(!(m&&f&&v&&g))return;const I=new Map,M=new Map,_=c().oE(o.map((e=>S({blockStore:e,calendarBy:v,schema:g,getRecordValue:r,userId:P,intl:l,resultCache:I,regExpCache:M,formulasModule:p})))),T={};o.forEach(((e,t)=>{T[e.id]=t}));0===(f.sort||[]).length&&_.sort(((e,t)=>{const n=e.start.valueOf(),o=t.start.valueOf();if(n===o){return T[e.id]-T[t.id]}return n-o}));const R=b?(0,a().iB)(y,C,w):(0,a().J0)(y,C,w),k=b?(0,a().hp)(h,C,w):(0,a().EK)(h,C,w);let O=R;const D=[];do{const e=b?(0,a().hp)(O.valueOf(),C,w):(0,a().EK)(O.valueOf(),C,w),t={},n=_.filter((t=>(0,i().m6)(O.valueOf(),e.valueOf(),t.start.valueOf(),t.end?t.end.valueOf():void 0))).map((n=>{const{id:o,start:r,end:i,includeTime:a,timeZone:s}=n,{startColumn:l,columnCount:c}=(0,u().Gj)({startUnixTimestampMS:r.valueOf(),endUnixTimestampMS:i?i.valueOf():void 0,startOfWeekUnixTimestampMS:O.valueOf(),endOfWeekUnixTimestampMS:e.valueOf()}),d=x(l,c,t);return{id:o,start:r.valueOf(),end:i?i.valueOf():void 0,row:d,includeTime:a,timeZone:s}}));D.push({start:O.valueOf(),end:e.valueOf(),items:n}),O=b?(0,a().iB)(O.plus({week:1}).plus({hour:25}).valueOf(),C,w):(0,a().J0)(O.plus({week:1}).plus({hour:25}).valueOf(),C,w)}while(O<k);return D}function S(e){const{blockStore:t,calendarBy:n,schema:o,getRecordValue:i,intl:c,userId:d,resultCache:u,regExpCache:f,formulasModule:g}=e,v=t.getAssociatedCollectionStore(),y=t.getModel();if(!y)return;const h=(0,r().d2)({property:n,schema:o,block:y,getRecordModel:l().b4_.fromGetRecordValueFn(i),propertyMapping:null==v?void 0:v.getPropertyMapping(),collectionRequestContext:{userId:d,userTimeZone:(0,s().P)(),depth:0,intl:c,visitedProperties:new Set,resultCache:u,regExpCache:f,experimentService:m().default,collectionFeatureGates:(0,p().i)()},formulasModule:g}).next().value;if("date"!==(null==h?void 0:h.type))return;const S=h.value;if(!S)return;const x=(0,a().AA)(S,(0,s().P)());if(!x)return;return{id:y.id,start:x.start,end:x.end,includeTime:"datetime"===S.type||"datetimerange"===S.type,timeZone:"datetime"===S.type||"datetimerange"===S.type?S.time_zone:void 0}}function x(e,t,n){let o=0;for(;;){let r=!1;for(let i=0;i<t;i++)b(n,e+i,o)&&(r=!0);if(!r)break;o++}for(let r=0;r<t;r++)C(n,e+r,o);return o}function b(e,t,n){return Boolean(e[n]&&e[n][t])}function C(e,t,n){e[n]||(e[n]={}),e[n][t]=!0}},860118:(e,t,n)=>{n.d(t,{T:()=>r});var o=()=>n(713998);function r(e){const{block:t,property:n,schema:r,getRecordModel:i,userId:a,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:d,formulasModule:u}=e;if(!t)return!1;if("title"===n)return!1;const p=r[n];return!(!p||"checkbox"!==p.type)||(!(!p||"button"!==p.type)||(!(!p||"status"!==p.type)||!o().r8({property:n,schema:r,block:t,getRecordModel:i,userId:a,userTimeZone:s,intl:l,experimentService:c,collectionFeatureGates:d,formulasModule:u})))}}}]);