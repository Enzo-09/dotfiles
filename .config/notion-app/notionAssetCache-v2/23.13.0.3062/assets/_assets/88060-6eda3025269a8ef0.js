"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[88060],{6731:(e,t,r)=>{r.d(t,{D:()=>d});r(898992),r(803949);var o=r(296540),s=()=>r(847249),n=()=>r(351028),i=()=>r(388821),a=()=>r(751156),l=()=>r(841696),c=()=>r(351360);function d(e){let{unpersistedInMemoryRecordCache:t}=e;const r=(0,s().K8)((()=>{var e;return null===(e=c().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]);return{createAndCommit:(0,o.useCallback)((e=>{let{perform:o}=e;const s=new(l().Z)({deadlockTimeoutMs:a().DEADLOCK_WARNING_TIMEOUT_MS}),c=o(s),d=i().RecordMap.create();s.stores.forEach((e=>{const t=e.getRecordModel(e.pointer);t&&d.addModel(t)})),(0,n().applyOperationsToRecordMap)({operations:s.operations,recordMap:d,updateOnly:!1});for(const n of d){const{model:e,pointer:o}=n;t.setModelAndRole({pointer:o,userId:r},e,"editor")}return t.emitAll(),{performResult:c,serverCommitResult:Promise.resolve(void 0)}}),[t,r])}}},75491:(e,t,r)=>{r.d(t,{ED:()=>x,Kb:()=>j});r(296540);var o=()=>r(847249),s=()=>r(401497),n=()=>r(668725),i=()=>r(722872),a=()=>r(463830),l=()=>r(406699),c=()=>r(928600),d=()=>r(939740),u=()=>r(897119),g=()=>r(89924),p=()=>r(125565),f=()=>r(493823),m=()=>r(566468),h=r(474848);function x(e){let{title:t,items:r,disabled:n,hideDropdownIcon:p,itemMaxWidth:f,itemMinWidth:m,...x}=e;const j=(0,o().uB)(void 0,a().A),y=(0,s().IS)((()=>({container:{minWidth:180}})),[]),b={key:"workspace-users-menu",render:e=>(0,h.jsx)(g().A,{...e}),items:r};return(0,h.jsx)(l().Ay,{popupType:u().nl.Popup,style:y.container,buttonPopupStore:j,disabled:n,renderOrigin:e=>(0,h.jsx)(v,{title:t,hideDropdownIcon:p,disabled:n,styles:x.styles,...e}),render:()=>(0,h.jsx)(c().A,{menuType:i().gu.Popup,maxWidth:f??250,minWidth:m,children:(0,h.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:0,sections:[b],onAccept:()=>{j.setState({open:!1})}})})})}function v(e){let{title:t,hideDropdownIcon:r,disabled:o,...i}=e;const a=(0,s().IS)((e=>({container:{display:"inline-flex",flexDirection:"row",justifyContent:"center",alignItems:"center",maxWidth:"100%",...i.styles},chevron:{width:10,height:10,marginLeft:4,color:e.lightIconColor}})),[i.styles]);return(0,h.jsxs)(f().p,{style:a.container,disabled:o,...i,children:[(0,h.jsx)(p().A,{showTooltipWhenTruncated:!0,children:t}),r||o?null:(0,n().b)(a.chevron)]})}function j(){const e=(0,s().IS)((()=>({title:{width:"50%"}})),[]);return(0,h.jsx)(m().mf,{titleStyles:e.title})}},90907:(e,t,r)=>{r.r(t),r.d(t,{iconDefinition:()=>s,lockIcon:()=>n});r(296540);var o=r(474848);const s={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,o.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},n=(0,r(340498).wt)("lock",s)},140612:(e,t,r)=>{r.d(t,{w:()=>s});var o=()=>r(989423);function s(e,t){const{spaceId:r,pageId:s,joinSpaceMethod:n}=t;(0,o().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:r,pageId:s,joinSpaceMethod:n}}})}},156061:(e,t,r)=>{r.d(t,{A:()=>s});class o extends(()=>r(757695))().default{getInitialState(){return{isCreatingSpace:!1,didPerformAction:!1,flowId:r(206267).JW()}}}const s=o},313786:(e,t,r)=>{r.d(t,{A:()=>n});var o=r(296540),s=()=>r(705540);function n(e){return(0,o.useEffect)((()=>{document.title=e.title,s().setWindowTitle(e.title)}),[e.title]),e.children}},322114:(e,t,r)=>{r.d(t,{A:()=>B});var o=r(296540),s=()=>r(484714),n=()=>r(847249),i=()=>r(757695),a=()=>r(959013),l=()=>r(100622),c=()=>r(534177),d=()=>r(284371),u=()=>r(452939),g=()=>r(701763),p=()=>r(140612),f=()=>r(449506),m=()=>r(898486),h=()=>r(722872),x=()=>r(351360),v=()=>r(10984),j=()=>r(251126),y=()=>r(805751),b=()=>r(623580),A=()=>r(928600),S=()=>r(864943),w=()=>r(204063),k=r(474848);const I={marginBottom:10},P={...I,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},M=(0,a().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function E(){return(0,k.jsx)(a().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const C=i().default.createClass(0,{name:"RequestAttemptStore"}),T=i().default.createClass(void 0,{name:"MessageStore"});const B=function(e){const t=(0,s().v3)(),i=(0,s().WS)(),l=(0,n().uB)(e.popupStore,r(463830).A),c=(0,n().uB)(void 0,T),g=(0,n().uB)(void 0,C),f=(0,o.useCallback)((()=>R(l)),[l]),m=(0,o.useCallback)((()=>(0,k.jsx)(W,{...e,requestAttemptStore:g,messageStore:c,buttonPopupStore:l})),[e,g,c,l]),h=(0,n().K8)((()=>g.state>0),[g]),x=(0,n().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,k.jsx)(L,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,k.jsx)(L,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?w().A:S().A,j=i?(0,k.jsx)(r(897119).Ay,{popupType:r(377586).n.SlideUp,open:x,render:m}):(0,k.jsx)(r(676007).A,{open:x,onDismiss:f,render:m});return"current-actor-to-space-via-onboarding"===e.type?j:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(v,{size:"lg",disabled:h,onClick:()=>{var r,o;return function(e,t){const{environment:r,flowId:o,type:s,source:n,spaceId:i,pageId:a}=e;"trusted_domain_page"===n&&i&&p().w(r,{spaceId:i,pageId:a,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===s?u().Xx(r,{button_name:"request-access",flow_id:o,request_access_type:"page"}):"current-actor-to-space-via-team"===s&&u().Xx(r,{button_name:"request-access",flow_id:o,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(r=e.block)||void 0===r?void 0:r.id,spaceId:null===(o=e.block)||void 0===o?void 0:o.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:h?(0,k.jsx)(a().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):N(e.type)}),j]})};function _(e){let{result:t}=e;return t&&t.error?(0,k.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function D(e){e.update((e=>e+1))}function R(e){return e.setState({open:!1})}function q(e){let{error:t,result:r,ready:i,requestAttemptStore:l,messageStore:c,type:u}=e;const g=(0,a().tz)(),p=(0,s().WS)(),f=(0,o.useCallback)((()=>D(l)),[l]),m=(0,o.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),h=(0,n().K8)((()=>Boolean(0===l.state||i&&r&&r.error)),[l,i,r]),x=(0,n().K8)((()=>c.state||""),[c]);return(0,k.jsxs)(k.Fragment,{children:[!p&&(0,k.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:N(u)}),(0,k.jsx)(b().A,{format:p?b().C.Transparent:void 0,textarea:!0,value:x,onChange:m,disabled:!h,placeholder:g.formatMessage(M.requestAccessMessagePlaceholder),style:{...p?{...P,padding:"16px"}:{...I,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!p&&(0,k.jsx)(w().A,{size:"lg",disabled:!h,onClick:f,style:I,children:(0,k.jsx)(a().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,k.jsx)(_,{result:r})]})}function W(e){const{requestAttemptStore:t,messageStore:r,buttonPopupStore:i}=e,l=(0,s().v3)(),d=(0,s().WS)(),u=(0,a().tz)(),p=(0,o.useCallback)(((o,s,n)=>(0,k.jsx)(q,{requestAttemptStore:t,messageStore:r,error:o,result:s,ready:n,type:e.type})),[t,r,e.type]),v=(0,n().K8)((()=>{var e;return null===(e=x().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),b=(0,o.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:r,type:o,teamId:s,requestAttempt:n,environment:i,currentUserId:a,intl:l,flowId:d}=e;if(0===n)return;const u=t.state,p=await async function(){if("current-actor-to-block"===o)return f().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===o)return f().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===o)return f().callApi({eventName:"requestAccess",environment:i,data:{type:"current-actor-to-space-via-team",teamId:s,message:u}});if("current-actor-to-space-via-block"===o){if(!a)return;return f().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===o){if(!a)return;return f().callApi({eventName:"requestAccess",environment:i,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:a,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return p?"success"!==p.type?"UserRateLimitResponse"===(null===(h=p.body)||void 0===h?void 0:h.name)?{error:l.formatMessage(M.rateLimitError)}:{error:(0,m().Hu)(l,p)}:("current-actor-to-block"===o?g().T_(i,{request_access_type:"page",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-team"===o?g().T_(i,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===o?g().T_(i,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===o?g().T_(i,{request_access_type:"collection",flow_id:d,requestId:p.data.requestId}):"current-actor-to-space-via-onboarding"===o?g().T_(i,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(o),r.reset(),{value:!0}):{error:l.formatMessage(M.currentUserNotFound)};var h}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),w=(0,o.useCallback)((()=>D(t)),[t]),I=(0,o.useCallback)((()=>R(i)),[i]),P=(0,n().O$)(t);return d?(0,k.jsx)(A().A,{menuType:h().gu.Modal,whiteBackground:!0,title:N(e.type),left:E(),onClickLeft:I,right:(0,k.jsx)(a().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:w,children:(0,k.jsx)(y().A,{debugName:"RequestAccessForm",capture:!0,children:(0,k.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,k.jsx)(j().A,{request:P,performRequest:b,render:p})})})}):(0,k.jsx)(y().A,{debugName:"RequestAccessForm",capture:!0,children:(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,k.jsx)(j().A,{request:P,performRequest:b,render:p}),(0,k.jsx)(S().A,{size:"lg",onClick:I,children:E()})]})})}function L(e){const{type:t,flowId:r,buttonType:i}=e,l=(0,s().v3)(),d="outline"===i?S().A:w().A,[u,p]=(0,o.useState)(!1),[m,h]=(0,o.useState)(!1),x={attributes:{add_permissions_on_approval:!1,role:(0,n().K8)((()=>(0,v().dL)()),[])?"reader":"read_and_write"},message:void 0};let j;"page"===t?j={...x,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?j={...x,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const y=(0,o.useCallback)((async()=>{var e;const o=await f().callApi({eventName:"requestAccess",environment:l,data:j});"success"===o.type&&o.data.request?(p(!0),g().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:r,requestId:o.data.requestId})):"failed"===o.type&&"UserRateLimitResponse"===(null===(e=o.body)||void 0===e?void 0:e.name)&&h(!0)}),[l,j,t,r]);return(0,k.jsx)(d,{size:"lg",disabled:u||m,disabledFeedback:u||m,onClick:y,children:u?(0,k.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):m?(0,k.jsx)(a().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):N("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function N(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,k.jsx)(a().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,k.jsx)(a().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},425736:(e,t,r)=>{r.d(t,{s:()=>s});r(296540);var o=r(474848);const s=(0,r(340498).wt)("privateTeam",{viewBox:"0 0 28 28",svg:(0,o.jsx)("path",{d:"M20.6455 21.2744C20.9092 21.5469 21.3311 21.5645 21.6035 21.2744C21.8936 20.9844 21.8672 20.5889 21.6035 20.3164L6.9082 5.62988C6.64453 5.36621 6.21387 5.36621 5.94141 5.62988C5.68652 5.88477 5.68652 6.33301 5.94141 6.58789L20.6455 21.2744ZM13.8076 6.13086C12.2783 6.13086 10.8896 6.39453 9.59766 6.8252L10.7578 7.97656C11.7246 7.68652 12.7178 7.51953 13.8076 7.51953C19.5908 7.51953 24.2754 12.6172 24.2754 13.6631C24.2754 14.375 22.7373 16.291 20.3027 17.7852L21.3838 18.8662C24.1611 17.0645 25.8135 14.7002 25.8135 13.6631C25.8135 11.8613 20.9092 6.13086 13.8076 6.13086ZM13.8076 21.1953C15.4424 21.1953 16.9365 20.9053 18.2988 20.4395L17.1475 19.2881C16.1016 19.6133 14.9941 19.8066 13.8076 19.8066C8.01562 19.8066 3.33105 14.9023 3.33105 13.6631C3.33105 13.0479 4.95703 11 7.5498 9.44434L6.45996 8.35449C3.5332 10.165 1.79297 12.5996 1.79297 13.6631C1.79297 15.4561 6.79395 21.1953 13.8076 21.1953ZM18.3164 15.5879C18.5889 14.999 18.7383 14.3398 18.7383 13.6631C18.7383 10.9121 16.541 8.74121 13.8076 8.74121C13.1133 8.74121 12.4629 8.89062 11.874 9.14551L18.3164 15.5879ZM13.8076 18.585C14.5811 18.585 15.3105 18.3916 15.9609 18.0752L9.36914 11.4834C9.04395 12.1338 8.85938 12.8721 8.85938 13.6631C8.86816 16.3438 11.0566 18.585 13.8076 18.585Z"})})},566468:(e,t,r)=>{r.d(t,{Ji:()=>w,bd:()=>M,f0:()=>I,mf:()=>P,s7:()=>k});r(944114),r(296540);var o=()=>r(847249),s=()=>r(401497),n=()=>r(30626),i=()=>r(959013),a=()=>r(496603),l=()=>r(534177),c=()=>r(722872),d=()=>r(962730),u=()=>r(463830),g=()=>r(760217),p=()=>r(406699),f=()=>r(285790),m=()=>r(710149),h=()=>r(928600),x=()=>r(939740),v=()=>r(897119),j=()=>r(89924),y=()=>r(859428),b=()=>r(125565),A=r(474848);const S=20,w=12;function k(e){let{title:t,byline:r,icon:o,iconSize:s,iconMargin:n,useThinTitle:i,useSecondaryColorTitle:a,containerStyles:l,summaryStyles:c,rightContent:d,badge:u}=e;const g=I({icon:o,iconSize:s,iconMargin:n,useThinTitle:i,containerStyles:l,summaryStyles:c});return(0,A.jsxs)("div",{style:g.container,children:[o?(0,A.jsx)("div",{style:g.iconContainer,children:o}):null,(0,A.jsxs)("div",{style:g.summaryContainer,children:[(0,A.jsxs)("div",{style:g.nameContainer,children:[(0,A.jsx)(b().A,{style:g.name,isSecondaryColor:a,showTooltipWhenTruncated:!0,children:t}),u?(0,A.jsx)("div",{style:g.badge,children:u}):null]}),r?(0,A.jsx)(b().A,{style:g.byline,children:r}):null]}),d]})}function I(e){const{icon:t,iconSize:r,iconMargin:o,useThinTitle:n,containerStyles:i,summaryStyles:a}=e,l=o??w,c=t?r??S:0;return(0,s().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",...i},summaryContainer:{width:`calc(100% - ${c}px)`,...a},iconContainer:{height:c,width:c,flexGrow:0,flexShrink:0,flexBasis:c,marginRight:l,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:6},badge:{marginRight:8},nameContainer:{display:"flex",alignItems:"center",gap:6},name:{fontSize:14,fontWeight:n?400:500},byline:{fontSize:12,lineHeight:1.3,opacity:.5}})),[c,l,n,i,a])}function P(e){let{titleStyles:t,includeByline:r,bylineStyles:o,includeIcon:n,iconStyles:i,containerStyles:a}=e;const l=(0,s().IS)((()=>({container:{height:53,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",gap:8,...a},icon:{borderRadius:4,height:24,width:24,marginLeft:-2,...i},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:"calc(100% - 32px)",gap:4},title:{borderRadius:4,height:14,width:"80%",...t},byline:{borderRadius:4,height:12,width:"60%",...o}})),[a,t,o,i]);return(0,A.jsxs)("div",{style:l.container,children:[n?(0,A.jsx)(m().A,{style:l.icon}):null,(0,A.jsxs)("div",{style:l.textContainer,children:[(0,A.jsx)(m().A,{style:l.title}),r?(0,A.jsx)(m().A,{style:l.byline}):null]})]})}function M(e){const t=(0,i().tz)(),r=(0,o().uB)(void 0,u().A),m=(0,s().IS)((()=>({popupMenu:{width:312}})),[]);let b=[];const S=[];for(const o of e.items)if("divider"===o.type){const t=S.length>0,r={key:`actions-${S.length}`,render:r=>(0,A.jsx)(j().A,{title:e.title,topBorder:t,...r}),items:b};S.push(r),b=[]}else if("action"===o.type){const e={key:o.key,render:e=>(0,A.jsx)(y().A,{textWrap:!0,render:t=>(0,A.jsx)(g().A,{...e,...t,isRedOnHover:o.isDestructive,shouldWrapCaption:!0,icon:o.icon,title:o.title,caption:o.caption,disabled:o.disabled,disabledFeedback:o.disabled}),renderTooltip:()=>o.tooltipTitle,disableTooltip:o.tooltipDisabled??!0,placement:d().W.Right}),action:()=>{o.action(),r.setState({...r.state,open:!1})}};b.push(e)}else(0,l().HB)(o);const w={key:`actions-${S.length}`,render:t=>(0,A.jsx)(j().A,{title:e.title,topBorder:S.length>0,...t}),items:b};return S.push(w),(0,A.jsx)(p().Ay,{stopClickPropagation:!0,popupType:v().nl.Popup,alignmentToOrigin:d().C.Start,placementToOrigin:d().W.Bottom,style:m.popupMenu,render:()=>(0,A.jsx)(h().A,{menuType:c().gu.Popup,width:312,children:(0,A.jsx)(x().Ay,{type:x().Oh.Vertical,initialFocus:void 0,sections:S})}),onClose:a().lQ,buttonPopupStore:r,renderOrigin:e=>(0,A.jsx)(f().A,{ariaLabel:t.formatMessage({id:"iconCellActionMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:n()._,...e})})}},623275:(e,t,r)=>{r.d(t,{$D:()=>c,CJ:()=>g,Sg:()=>l,iM:()=>v,kJ:()=>p,kx:()=>m,qj:()=>x,rL:()=>n,sH:()=>f,u6:()=>i,wo:()=>h,zr:()=>d});var o=()=>r(278238),s=()=>r(115512);const n=16,i=20,a=10,l=12,c=456,d=24,u=24,g=48;function p(e){let{theme:t,inheritanceBannerEnabled:r,isMobile:o}=e;return{background:t.tint.regular,borderRadius:8,paddingTop:8,paddingBottom:8,paddingLeft:8,paddingRight:8,marginLeft:o?0:n,marginRight:o?0:n,marginTop:4,marginBottom:8}}function f(e){let{isRedesignEnabled:t,isMobile:r}=e;return t?{...h({isMobile:r}),width:"unset",height:g,paddingTop:6,paddingBottom:6}:{}}function m(e){let{environment:t,isRedesignEnabled:r}=e;return r?(0,s().ny)(t,t.device.isMobile?"UISmall":"UIRegular"):(0,s().ny)(t,"UISmall")}function h(e){let{isMobile:t}=e;return{borderRadius:a,transition:"background 150ms ease-out"}}function x(e){let{isMobile:t}=e;return t?12:10}function v(e){let{theme:t,colorOverride:r,size:s=u,useLargeBorderRadius:n,useLightBackgroundColor:i,icon:a}=e;return{background:r||(a&&(0,o().T8)(a)?(0,o().ez)({icon:a,mode:t.mode,useLightGrayColor:i}):i?t.lightDividerColor:t.regularDividerColor),width:s,height:s,borderRadius:n?6:"0.25em"}}},790452:(e,t,r)=>{r.r(t),r.d(t,{PageError:()=>Tt,PageError404:()=>Jt});r(898992),r(823215),r(672577);var o=r(296540),s=()=>r(662303),n=()=>r(484714),i=()=>r(847249),a=()=>r(401497),l=()=>r(584262),c=()=>r(148307),d=()=>r(416504),u=()=>r(711901),g=r(474848);const p=(0,r(340498).wt)("googlePlay",{viewBox:"0 0 14 14",svg:(0,g.jsx)("path",{d:"M3.41741,13.7929001 L13.0843,8.42241009 C14.2002,7.80245009 14.2002,6.19755009 13.0843,5.57759009 L3.41741,0.207109087 C2.33284,-0.395426913 1,0.388821087 1,1.62952009 L1,12.3705001 C1,13.6112001 2.33284,14.3954001 3.41741,13.7929001 Z"})});var f=()=>r(735384),m=()=>r(427704),h=()=>r(677338),x=()=>r(959013),v=()=>r(100622),j=()=>r(284371),y=()=>r(245981),b=()=>r(705540),A=()=>r(915086),S=()=>r(730570),w=()=>r(857783),k=()=>r(755636),I=()=>r(435009),P=()=>r(904671),M=()=>r(345913),E=()=>r(482707),C=()=>r(972435),T=()=>r(836251),B=()=>r(640653),_=()=>r(991221),D=()=>r(106694),R=()=>r(684381),q=()=>r(997513),W=()=>r(211212),L=()=>r(133234),N=()=>r(222130),z=()=>r(215152),U=()=>r(20489),F=()=>r(623275),O=()=>r(437487),K=()=>r(869562),V=()=>r(817411),H=()=>r(962730),J=()=>r(756279),Y=()=>r(351360),$=()=>r(227440),Z=()=>r(508496),G=()=>r(529183),X=()=>r(156061),Q=()=>r(990261),ee=()=>r(712505),te=()=>r(454354),re=()=>r(236933),oe=()=>r(749240),se=()=>r(47582),ne=()=>r(11048),ie=()=>r(493823),ae=()=>r(297872),le=()=>r(296798),ce=()=>r(204063),de=()=>r(614505),ue=()=>r(2143),ge=()=>r(125565),pe=()=>r(313786),fe=()=>r(908470),me=()=>r(21140),he=()=>r(932736),xe=()=>r(322114),ve=()=>r(452939),je=()=>r(426116),ye=()=>r(994877);function be(e){const{publicPageData:t,environment:r,flowId:o,store:s,skipClickLogging:n}=e;s.setState({...s.state,didPerformAction:!0}),n||ve().Xx(r,{button_name:"join-workspace",flow_id:o});const{currentUserRootStore:i,currentUserSettingsStore:a}=Y().default.state;if(i&&a&&t.spaceId){const e=t.spaceId;je().DT({environment:r,userRootStore:i,spaceId:e,navigate:!0,analyticsFrom:"page_error",userSettingsStore:a})}}function Ae(e){ye().SI({environment:e,from:"page_error"})}function Se(e,t,r){ve().xn(r,{type:e,flow_id:t})}function we(e){let{pageTitle:t}=e;return t?(0,g.jsx)(x().sA,{id:"fullPageError.changePermissions.titleWithPageName",defaultMessage:"Change permissions for {pageTitle}",values:{pageTitle:t}}):(0,g.jsx)(x().sA,{id:"fullPageError.changePermissions.title",defaultMessage:"Change permissions for this page"})}function ke(){const e=(0,i().K8)((()=>{var e;return null===(e=Y().default.state.currentSpaceStore)||void 0===e?void 0:e.getName()}),[]);return e?(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.changePermissions.descriptionWithSpaceName",defaultMessage:"As a workspace owner for <b>{spaceName}</b>, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,g.jsx)("b",{children:t})},spaceName:e}}):(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.changePermissions.description",defaultMessage:"As an owner of this workspace, you can change the permissions of this page.",values:{b:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,g.jsx)("b",{children:t})}}})}var Ie=()=>r(541258),Pe=()=>r(186445),Me=()=>r(38337),Ee=()=>r(719431),Ce=()=>r(905654),Te=()=>r(589994),Be=()=>r(453697),_e=()=>r(719147),De=()=>r(426388),Re=()=>r(187485),qe=()=>r(517592),We=()=>r(175947),Le=()=>r(224011),Ne=()=>r(948914);function ze(e){let{children:t,style:r={},...o}=e;const s=(0,a().IS)((e=>({wrapper:{width:"100vw",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",...r}})),[r]);return(0,g.jsx)("section",{style:s.wrapper,...o,children:t})}function Ue(){const{isMobile:e,isElectronMac:t,isElectron:r}=(0,n().Y0)(),{isShowingTabBar:o,isFullscreen:s}=Ve(),i=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",alignSelf:"flex-start",paddingTop:!r||o||s?20:(0,We().ek)(t),maxWidth:1300,paddingLeft:20,paddingRight:20},text:{fontWeight:j().Wy.medium,fontSize:16}})),[r,t,s,o]);return(0,g.jsxs)("header",{style:i.container,children:[(0,qe().A)({width:e?28:30,height:e?28:30,marginRight:10,flexShrink:0}),(0,g.jsx)("div",{style:i.text,children:"Notion"})]})}function Fe(){const{isElectron:e,isElectronMac:t}=(0,n().Y0)(),{isShowingTabBar:r,isFullscreen:o}=Ve(),s=(0,a().IS)((e=>({desktopDragArea:{width:"100%",height:(0,We().ek)(t),position:"absolute",top:0,left:0}})),[t]);return!e||r||o?null:(0,g.jsx)("div",{className:Me().sbV,style:s.desktopDragArea})}function Oe(e){let{actionButtons:t,children:r,description:o,icon:s,title:i}=e;const{isMobile:l}=(0,n().Y0)(),c=(0,a().IS)((e=>({actionButtons:{marginTop:"15px"},description:{color:e.text.secondary,fontSize:l?j().J.UIRegular.mobile:j().J.UIRegular.desktop,lineHeight:l?j().K_.UIRegular.mobile:j().K_.UIRegular.desktop,margin:0,maxWidth:"340px",padding:"0 8px",textAlign:"center"},title:{color:e.text.primary,fontSize:"17px",fontWeight:j().Wy.semibold,lineHeight:"22px",margin:0,maxWidth:"340px",padding:"0 8px",textAlign:"center"}})),[l]);return(0,g.jsxs)(me().wt,{alignItems:"center",flexGrow:1,gap:8,justifyContent:"center",children:[s??null,void 0!==i?(0,g.jsx)("p",{style:c.title,children:i}):null,void 0!==o?(0,g.jsx)("p",{style:c.description,children:o}):null,void 0!==t?(0,g.jsx)(me().Ye,{gap:6,style:c.actionButtons,children:t}):null,r]})}function Ke(e){let{children:t,style:r}=e;const o=(0,a().IS)((e=>({PageErrorFooter:{paddingBottom:"44px",paddingTop:"44px",marginTop:"auto",textAlign:"center",...r}})),[r]);return(0,g.jsx)("footer",{style:o.PageErrorFooter,children:t})}function Ve(){return(0,i().K8)((()=>({isShowingTabBar:Ne().A.state.isShowingTabBar,isFullscreen:Le().A.state.isFullScreen})),[])}function He(e){let{forceTheme:t}=e;const r=(0,n().v3)(),o=(0,a().IS)((e=>({flexContainer:{alignItems:"center",display:"flex",gap:"6px"},secondaryColor:{color:t?t.text.secondary:e.text.secondary},button:{color:t?t.text.secondary:e.text.secondary,padding:0},buttonPressed:{background:t?t.buttonPressedBackground:e.buttonPressedBackground}})),[t]);return(0,g.jsxs)(Ke,{style:o.flexContainer,children:[(0,g.jsx)(ge().A,{isInline:!0,style:o.secondaryColor,children:(0,g.jsxs)(Re().A,{href:"https://www.notion.com/product",external:!0,style:{...o.flexContainer,...o.secondaryColor},children:[(0,De().S)({width:16,height:16}),(0,g.jsx)(x().sA,{id:"fullPageError.whatIsNotionButton.label",defaultMessage:"What is Notion?"})]})}),(0,g.jsx)(ge().A,{isInline:!0,style:o.secondaryColor,children:"·"}),(0,g.jsx)(ge().A,{isInline:!0,style:o.secondaryColor,children:(0,g.jsx)(ie().p,{isGray:!0,onClick:()=>Ae(r),pressedStyle:o.buttonPressed,style:o.button,children:(0,g.jsx)(x().sA,{id:"fullPageError.messageSupport.message",defaultMessage:"Message support"})})}),(0,g.jsx)(ge().A,{isInline:!0,style:o.secondaryColor,children:"·"}),(0,g.jsx)(ge().A,{isInline:!0,style:o.secondaryColor,children:(0,g.jsx)(Re().A,{href:m().JZ.termsAndPrivacy,external:!0,children:(0,g.jsx)(x().sA,{id:"fullPageError.termsAndPrivacyButton.label",defaultMessage:"Terms"})})})]})}function Je(e){const t=(0,a().DP)(),r=(0,n().v3)(),s=(0,i().K8)((()=>(0,Pe()._m)(r)),[r]),l=(0,i().O$)(Y().AppStoreMainEditorCurrentBlockStore),c=(0,i().K8)((()=>null==s?void 0:s.getEmail()),[s]);return(0,o.useEffect)((()=>{l&&Ie().bC({environment:r,store:l})}),[r,l]),s?(0,g.jsx)(Ke,{children:(0,g.jsxs)(me().Ye,{alignItems:"center",flexWrap:"wrap",gap:6,justifyContent:"center",children:[(0,g.jsx)(Be().A,{userStore:s}),(0,g.jsx)(ge().A,{isInline:!0,isSecondaryColor:!0,children:(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserCurrentAccount.message",defaultMessage:"Logged in as {currentlyLoggedInUser}",values:{currentlyLoggedInUser:(0,g.jsx)("span",{style:{color:t.text.primary},children:c})}})}),(0,g.jsx)(ge().A,{isInline:!0,isSecondaryColor:!0,children:"·"}),(0,g.jsx)(Ye,{...e})]})}):(0,g.jsx)(He,{})}function Ye(e){const t=(0,n().v3)(),r=(0,i().uB)(e.loginStore,U().A),o=(0,i().uB)(e.loginModalStore,z().A);return Te().transactionQueue.hasTasks()?(0,g.jsx)(ge().A,{isInline:!0,isSecondaryColor:!0,children:(0,g.jsx)(_e().A,{disableUnderline:!0,onClick:()=>Ae(t),children:(0,g.jsx)(x().sA,{id:"fullPageError.messageSupport.message",defaultMessage:"Message support"})})}):(0,g.jsx)(ge().A,{isInline:!0,isSecondaryColor:!0,style:{fontWeight:j().Wy.medium},children:Ce().T_(t)?(0,g.jsxs)(_e().A,{disableUnderline:!0,onClick:()=>{o.setState({open:!0})},children:[(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserSwitchAccount.message",defaultMessage:"Switch account"}),(0,g.jsx)(q().z,{loginModalStore:o,loginStore:r,title:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.description",defaultMessage:"Use an existing account, or sign up with a new email. Your current account will remain logged in."}),className:Me().w7$,trustedDomain:e.trustedDomain})]}):(0,g.jsx)(_e().A,{disableUnderline:!0,href:m().JZ.logout,onClick:()=>Ee().logout(t),children:(0,g.jsx)(x().sA,{id:"fullPageError.loggedInUserSwitchAccount.message",defaultMessage:"Switch account"})})})}var $e=()=>r(433052),Ze=()=>r(235921),Ge=()=>r(1130),Xe=()=>r(144114),Qe=()=>r(607859),et=()=>r(864943);function tt(e){let{canJoinSpaceWithData:t,color:r,route:o,store:s}=e;const a=(0,n().v3)(),c=(0,i().K8)((()=>{const{currentUserRootStore:e}=Y().default.state;return e&&0===e.getSpaceViewPointers().length}),[]),{isCreatingSpace:d,flowId:u}=(0,i().K8)((()=>{const{isCreatingSpace:e,flowId:t}=s.state;return{isCreatingSpace:e,flowId:t}}),[s]),p=(0,i().K8)((()=>{const{currentUserStore:e}=Y().default.state;return!(null!=e&&e.getOnboardingCompleted())}),[]);return t?(0,g.jsx)(rt,{color:r,size:"lg",onClick:()=>be({publicPageData:t,environment:a,flowId:u,store:s}),children:(0,g.jsx)(x().sA,{id:"fullPageError.joinSpaceButton.label",defaultMessage:"Join the space"})}):"onboarding"===o.name||p?(0,g.jsx)(rt,{color:r,size:"lg",onClick:()=>function(e,t){ve().Xx(e,{button_name:"back-to-onboarding",flow_id:t}),$e().Aj();const r=Qe().default.state;r.isOnboarding?Xe().up(r)?Ge().sy(e,{type:"new-user",disableRedirectUrl:!0,source:"page_error"}):Xe().Cy(r)?Ge().sy(e,{type:"create-or-join",disableRedirectUrl:!0,source:"page_error"}):(Qe().default.reset(),Ze().A.reset(),I().oo({environment:e,url:m().JZ.root})):(Qe().default.reset(),Ze().A.reset(),I().oo({environment:e,url:m().JZ.root}))}(a,u),children:(0,g.jsx)(x().sA,{id:"fullPageError.returnToOnboardingButton.label",defaultMessage:"Back to onboarding"})}):c||d?(0,g.jsx)(rt,{color:r,disabled:d,size:"lg",onClick:()=>async function(e,t,r){ve().Xx(e,{button_name:"create-account",flow_id:t});const{currentUserRootStore:o,currentUserStore:s}=Y().default.state;o&&s&&(r.setState({...r.state,isCreatingSpace:!0}),await Ge().Ig(e,"handle_create_account"),r.setState({...r.state,isCreatingSpace:!1}))}(a,u,s),children:(0,g.jsx)(x().sA,{id:"fullPageError.createOrJoinWorkspaceButton.label",defaultMessage:"Create or join a workspace"})}):(0,g.jsx)(rt,{color:r,size:"lg",onClick:()=>function(e,t){if(ve().Xx(e,{button_name:"back-to-my-content",flow_id:t}),T().UL(e))return void I().aX(e);const{currentUserRootStore:r,currentUserSettingsStore:o,currentSpaceViewStore:s}=Y().default.state;if(!r||!o)return void I().oo({environment:e,url:m().JZ.root,redirect:!0});if(s)return void je().tR({environment:e,spaceViewStore:s,userRootStore:r,userSettingsStore:o,pageVisitSource:l().y8.PageError,navigationType:"switchingToOrLoadingSpace"});je().t9({environment:e,userRootStore:r,userSettingsStore:o,pageVisitSource:l().y8.PageError})}(a,u),children:(0,g.jsx)(x().sA,{id:"fullPageError.backToMyContentButton.label",defaultMessage:"Back to my content"})})}function rt(e){let{color:t,...r}=e;const o=(0,a().DP)();return"blue"===t?(0,g.jsx)(ce().A,{size:"lg",...r}):(0,g.jsx)(et().A,{size:"lg",backgroundColor:o.whiteButtonBackground,...r,style:{fontWeight:j().Wy.medium,...r.style}})}function ot(e){let{isElectron:t}=e;const r=(0,x().tz)();return t?(0,g.jsx)(pe().A,{title:r.formatMessage({defaultMessage:"No access",id:"errorPage.workspaceNoAccess.title"})}):null}function st(e){let{canRequestAccess:t,pageTitle:r,inSudoModeAndInTrash:o}=e;return t?o?r?(0,g.jsx)(x().sA,{id:"fullPageError.canReqestAccess.inTrash.titleWithPageName",defaultMessage:"No access to {pageTitle} in Trash",values:{pageTitle:r}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.inTrash.title",defaultMessage:"No access to this page in Trash"}):r?(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.titleWithPageName",defaultMessage:"No access to {pageTitle}",values:{pageTitle:r}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.title",defaultMessage:"No access to this page"}):(0,g.jsx)(x().sA,{id:"fullPageError.noAccess.title",defaultMessage:"Page not found"})}function nt(e){let{canRequestAccess:t,inSudoModeAndInTrash:r}=e;return t?r?(0,g.jsx)(x().sA,{id:"fullPageError.pageInTrash.message",defaultMessage:"As a <bold>workspace owner</bold>, you can restore this page to update access to it",values:{bold:e=>(0,g.jsx)("b",{children:e})}}):(0,g.jsx)(x().sA,{id:"fullPageError.canRequestAccess.message",defaultMessage:"You can access this page if someone approves your request."}):(0,g.jsx)(x().sA,{id:"fullPageError.cannotRequestAccess.message",defaultMessage:"You don’t have permission to access this page."})}var it=()=>r(126553);function at(e){let{sudoModeStore:t}=e;const r=(0,a().IS)((e=>({WorkspaceOwnerPermissions:{background:e.cardBackground,borderRadius:4,padding:18,margin:24,maxWidth:400,textAlign:"center"},WorkspaceOwnerPermissionsButton:{fontWeight:j().Wy.medium,justifyContent:"center",margin:"18px auto 12px"}})),[]),o=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),s=(0,i().O$)(t);return o&&s.privatePageStore&&!s.changePermissionsEnabled?(0,g.jsxs)("div",{style:r.WorkspaceOwnerPermissions,children:[(0,g.jsx)(ge().A,{isMultiline:!0,style:{textAlign:"center"},children:(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessage",defaultMessage:"As a <b>workspace owner</b>, you can change the permissions of this page to add yourself or others. Any changes will appear in the audit log.",values:{b:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,g.jsx)("b",{children:t})}}})}),(0,g.jsxs)(et().A,{size:"lg",style:r.WorkspaceOwnerPermissionsButton,onClick:()=>t.setState({...t.state,changePermissionsEnabled:!0}),children:[(0,it().x)({width:16,height:16,marginRight:6}),(0,g.jsx)(x().sA,{id:"fullPageError.workspaceOwner.canChangePermissionsMessageButton",defaultMessage:"Change permissions"})]})]}):null}var lt=()=>r(278715);function ct(e){var t;let{route:r,store:s}=e;const i=(0,n().v3)(),a=null===(t=i.currentUser)||void 0===t?void 0:t.isLoggedIn();return(0,o.useEffect)((()=>{Se("content_classification_block",s.state.flowId,i)}),[i,s]),(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{icon:(0,g.jsx)(he().fD,{type:"unsafe"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.unsafePageError.title",defaultMessage:"Page may be unsafe"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.unsafePageError.description",defaultMessage:"This page was flagged as containing spam, phishing, illegal, or inappropriate content. If you trust this source, you can <proceedanywaylink>proceed anyway</proceedanywaylink>",values:{proceedanywaylink:e=>(0,g.jsx)(_e().A,{onClick:()=>function(e){const{mainEditorCurrentBlockStore:t}=Y().default.state;t&&(lt().A.bypassPage(t.id),ve().bL(e))}(i),children:e})}}),actionButtons:a?(0,g.jsx)(tt,{route:r,store:s,color:"white"}):null}),a?(0,g.jsx)(Je,{}):(0,g.jsx)(He,{})]})}var dt=()=>r(857639);function ut(e){let{href:t,store:r}=e;const s=(0,n().v3)();return(0,o.useEffect)((()=>Se("incorrect_domain_interstitial_block",r.state.flowId,s)),[r,s]),(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{icon:(0,g.jsx)(he().fD,{type:"incorrectDomain"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.publicDomainInterstitial.title",defaultMessage:"Continue to external site"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.publicDomainInterstitial.description",defaultMessage:"If you are not redirected to the external site automatically, <redirectlink>click here</redirectlink>",values:{redirectlink:e=>(0,g.jsx)(_e().A,{href:t,external:!1,children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(et().A,{size:"lg",onClick:()=>{(0,dt().log)({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateBack",canGoBack:(0,T().UL)(s)}}}),(0,T().UL)(s)?I().aX(s):I().oo({environment:s,url:"/home"})},children:(0,g.jsx)(x().sA,{id:"PageError.IncorrectDomainInterstitialButton.back.label",defaultMessage:"Go back"})}),(0,g.jsx)(ce().A,{size:"lg",onClick:()=>{(0,dt().log)({level:"info",from:"PageError",type:"incorrectDomainInterstitial",data:{miscDataToConvertToString:{action:"navigateHome"}}}),I().oo({environment:s,url:"/home"})},children:(0,g.jsx)(x().sA,{id:"PageError.IncorrectDomainInterstitialButton.home.label",defaultMessage:"Take me Home"})})]})}),(0,g.jsx)(Je,{})]})}function gt(e){var t;let{route:r,store:s}=e;const i=(0,n().v3)(),a=null===(t=i.currentUser)||void 0===t?void 0:t.isLoggedIn();return(0,o.useEffect)((()=>{Se("oauth_no_access",s.state.flowId,i)}),[i,s]),(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(ot,{isElectron:i.device.isElectron}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{icon:(0,g.jsx)(he().fD,{type:"notFound"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.oauthNoAccess.title",defaultMessage:"You need access to this page"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.oauthNoAccess.description",defaultMessage:"Contact the owner or try switching to a different account with access"}),actionButtons:a?(0,g.jsx)(tt,{route:r,store:s,color:"white"}):null}),(0,g.jsx)(Je,{})]})}var pt=()=>r(339702);function ft(e){let{store:t}=e;const r=(0,n().v3)();return(0,o.useEffect)((()=>{Se("offline",t.state.flowId,r),(0,pt().j)(r,{type:"page_error"})}),[t,r]),(0,g.jsxs)(ze,{children:[(0,g.jsx)(Ue,{}),(0,g.jsx)(Fe,{}),(0,g.jsx)(Oe,{icon:(0,g.jsx)(he().fD,{type:"offline"}),title:(0,g.jsx)(x().sA,{id:"fullPageError.offlineError.title",defaultMessage:"You’re offline"}),description:(0,g.jsx)(x().sA,{id:"fullPage.offlineError.description",defaultMessage:"This page isn’t available offline. Check your network connection and try again."}),actionButtons:(0,g.jsx)(et().A,{size:"lg",onClick:()=>window.location.reload(),children:(0,g.jsx)(x().sA,{id:"router.renderErrorPage.reloadButton.label",defaultMessage:"Refresh"})})}),(0,g.jsx)(Je,{})]})}var mt=()=>r(852507),ht=()=>r(799954),xt=()=>r(668725),vt=()=>r(90907),jt=()=>r(674276),yt=()=>r(763071),bt=()=>r(728611),At=()=>r(791627),St=()=>r(362749),wt=()=>r(986229),kt=()=>r(155004),It=()=>r(406699),Pt=()=>r(364280);function Mt(e){let{errorId:t,message:r,adminMessage:o}=e;const l=(0,a().IS)((()=>({reactErrorStyle:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingBottom:100,...(0,ht().xH)(s().locale)},reactErrorMessageStyle:{fontSize:14,textAlign:"center",marginTop:6,marginBottom:12,color:v().Ay.mediumTextColor},reactErrorMessageIdStyle:{fontSize:10,marginTop:8}})),[]),c=(0,n().v3)(),d=(0,i().K8)((()=>(0,B().s7)(c)),[c]);(0,mt().w)((()=>{b().navigationReady(!1)}));return(0,g.jsx)(kt().s,{allowSelectionWithin:!0,style:l.reactErrorStyle,children:(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(Oe,{icon:(0,vt().lockIcon)({width:42,height:42}),title:(0,g.jsx)(x().sA,{id:"router.workspaceAccessRenderErrorPage.message",defaultMessage:"This workspace cannot be accessed."}),description:d?o||r||(0,g.jsx)(x().sA,{id:"router.ekmRenderErrorPage.adminDescription",defaultMessage:"Please update security configurations or reach out to support@makenotion.com for support."}):r||(0,g.jsx)(x().sA,{id:"router.ekmRenderErrorPage.description",defaultMessage:"Please contact your workspace owners to enable access. You may switch workspaces."}),actionButtons:(0,g.jsxs)(Pt().fI,{wrap:"wrap",gap:8,children:[(0,g.jsx)("div",{style:{position:"absolute",top:16,left:16},children:(0,g.jsx)(Et,{})}),(0,g.jsx)(ce().A,{onClick:()=>{window.location.reload()},children:(0,g.jsx)(x().sA,{id:"router.workspaceAccessRenderErrorPage.logoutButton.label",defaultMessage:"Try again"})})]}),children:t&&(0,g.jsx)("div",{style:l.reactErrorMessageIdStyle,children:(0,g.jsx)(jt().b,{errorId:t,enablePopup:(0,yt().o)(t)})})})]})})}function Et(){const e=(0,n().v3)(),t=(0,i().uB)(void 0,At().A),r=(0,i().uB)(void 0,U().A);(0,mt().w)((()=>{b().navigationReady(!1)}));const s=(0,i().uB)(void 0,wt().A),a=(0,o.useMemo)((()=>({organizationsInfo:[],spaceInfo:[]})),[]),c=(0,o.useCallback)((async t=>{let{event:r,spaceViewStore:o}=t;const s=bt().Vr(r);await je().tR({environment:e,spaceViewStore:o,userSettingsStore:Y().default.state.currentUserSettingsStore,userRootStore:Y().default.state.currentUserRootStore,openInNew:s,pageVisitSource:l().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}),re().E.setState({hasWorkspaceAccessError:!1,errorId:void 0}),window.location.reload()}),[e]);return(0,g.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:(0,g.jsx)(It().Ay,{popupType:It().z7.Popup,renderOrigin:e=>{let{onClick:t}=e;return(0,g.jsxs)(ie().p,{onClick:t,children:[(0,g.jsx)(x().sA,{defaultMessage:"Select workspace",id:"router.workspaceAccessRenderErrorPage.switchWorkspaceButton.label"}),(0,xt().b)({width:10,marginLeft:4})]})},render:e=>(0,g.jsx)(St().UL,{parent:e,onSpaceClick:c,loginStore:r,loginPermissionsStore:t,organizationEntryPointProps:a,permissionsInviteStore:s})})})}const Ct={width:14,height:14,marginRight:6,flexShrink:0};function Tt(e){let{route:t,publicPageData:r,shouldRedirectFromHome:s}=e;const a=(0,n().v3)(),c=_t(a),d=(0,i().uB)(void 0,X().A),u=(0,i().uB)(void 0,te().A),p=(0,i().uB)(void 0,G().Ay),f=(0,i().uB)(re().E),m=(0,o.useRef)(!1),x=(0,i().K8)((()=>d.state.flowId),[d]),v=(0,i().K8)((()=>{var e;return null===(e=Y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),j=(0,i().K8)((()=>{var e;return(null===(e=Y().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isPlaceholderWorkflowTemplateBlock())??!1}),[]),y=(0,i().K8)((()=>d.state.didPerformAction),[d]),M=!(0,i().O$)($().e),E=(0,i().K8)((()=>{var e;const{mainEditorCurrentBlockStore:t}=Y().default.state;return null==t||null===(e=t.getModel())||void 0===e?void 0:e.isNonverifiedContentClassification()}),[]),{hasWorkspaceAccessError:C,ekmErrorId:_}=(0,i().K8)((()=>({hasWorkspaceAccessError:f.state.hasWorkspaceAccessError,ekmErrorId:f.state.errorId})),[f]);(0,o.useEffect)((()=>{ee().default.state.open&&S().J(ee().default.state.presenceStore,a,Q().o,ee().default.state.targetStore),S().J(Y().default.state.presenceStore,a,Q().uk,Y().default.state.mainEditorCurrentBlockStore),K().cancelSidebarInitialRenderLog()}),[a]),(0,o.useEffect)((()=>{if(!m.current&&(m.current=!0,A().setInitialRenderCompleted(),s&&async function(e){let{environment:t,flowId:r}=e;const o=Y().default.state.currentSpaceViewStore;if(!o)return;Se("invalid_home_block",r,t);const s=await(0,B().zd)(t,o);s&&w().uK({environment:t,store:s,openInNew:void 0,templateGalleryItem:void 0,projectManagementLaunch:!1,pageVisitSource:l().y8.PersonalHomeErrorRedirect})}({environment:a,flowId:x}),_t(a)||(0,h().$P)(window.location.href),a.device.isElectron||a.mobileNative)){const e=null==r?void 0:r.requireInterstitial;if(e){const t=e+window.location.hash;k().f({environment:a,url:t}),T().UL(a)?I().aX(a):b().closeTab()}}}),[a,x,null==r?void 0:r.requireInterstitial,s]);const D=(0,i().O$)(Y().AppStoreCurrentSpaceStore);(0,o.useEffect)((()=>{P().B({environment:a,sudoModeStore:u,pageBlockId:v,currentSpaceStore:D})}),[a,v,u,D]);return(0,g.jsx)(ne().A,{name:"PageError",children:y?null:M?(0,g.jsx)(ft,{store:d}):"teamsInvite"===t.name&&c?(0,g.jsx)(Kt,{publicPageData:r,route:t,store:d,sudoModeStore:u,inviteTargetsStore:p,source:"teamsInvite",canJoinSpace:!0}):C?(0,g.jsx)(Mt,{errorId:_||""}):"initiateExternalAuthenticationFromDesktop"===t.name?(0,g.jsx)(gt,{route:t,store:d}):j?(0,g.jsx)(Jt,{route:t,store:d}):r?r&&"onboarding"===t.name?(0,g.jsx)(Kt,{publicPageData:r,route:t,store:d,sudoModeStore:u,inviteTargetsStore:p,source:"onboarding",canJoinSpace:!1}):null!=r&&r.spaceName?E&&r.requireInterstitial?(0,g.jsx)(Jt,{route:t,store:d}):r.requireInterstitial?(0,g.jsx)(ut,{href:r.requireInterstitial+window.location.hash,store:d}):E?(0,g.jsx)(ct,{route:t,store:d}):c?(0,g.jsx)(Yt,{route:t,publicPageData:r,pageErrorStore:d,sudoModeStore:u,inviteTargetsStore:p}):(0,g.jsx)(Nt,{store:d,publicPageData:r}):(0,g.jsx)(Jt,{route:t,store:d}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(V().A,{skipFadeinDelay:!0})]})})}function Bt(e){let{inviteeEmail:t}=e;return(0,g.jsx)("div",{style:{color:"#535353",fontSize:"18px",fontWeight:j().Wy.regular,lineHeight:"145.34%",marginBottom:24,maxWidth:358,opacity:.78,textAlign:"center",width:"100%"},children:(0,g.jsx)(x().sA,{id:"signupPage.subtitle.invitationVersion",defaultMessage:"Please check {invitee_email} for your temporary login code.",values:{invitee_email:(0,g.jsx)("b",{children:t})}})})}function _t(e){return Boolean(e.currentUser.id)}function Dt(e){let{environment:t,currentRoute:r}=e;return(0,o.useEffect)((()=>{I().oo({environment:t,url:`/home?p=${r.peekViewBlockId}&pm=${r.peekMode}`})}),[t,r]),null}function Rt(e){let{isElectron:t,publicPageData:r,showInvitationVersion:o,inviterName:i,greetingStyle:l,iconBoxInitialStyle:c,trustedDomain:d}=e;const u=(0,n().v3)(),p=(0,x().tz)(),f=Boolean(d)&&"none"===r.publicAccessRole,m=(0,a().IS)((()=>({invitation:{fontSize:28,fontWeight:j().Wy.bold,maxWidth:358,letterSpacing:.364,lineHeight:1.2,textAlign:"center",fontFamily:j().vc(s().locale).sans},normal:{fontSize:u.device.isMobile?18:20,fontWeight:j().Wy.medium,marginBottom:10,maxWidth:358,textAlign:"center",...l}})),[u.device.isMobile,l]);return(0,g.jsxs)(g.Fragment,{children:[t&&(0,g.jsx)(pe().A,{title:p.formatMessage({defaultMessage:"Log in",id:"errorPage.loggedOutWorkspace.title"})}),o?(0,g.jsx)("div",{style:m.invitation,children:i?(0,g.jsx)(x().sA,{id:"signupPage.title.showInvitationVersion",defaultMessage:"Verify your email to accept {inviter_name}’s invite",values:{inviter_name:i}}):(0,g.jsx)(x().sA,{id:"signupPage.title.showInvitationVersion.noInviterName",defaultMessage:"Verify your email to accept the invite"})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{marginBottom:12},children:(0,g.jsx)(he().HS,{publicPageData:r,iconBoxInitialStyle:c,size:"lg"})}),(0,g.jsx)("div",{style:m.normal,children:f?(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.message",defaultMessage:"Sign in to view this shared page"}):(0,g.jsx)(x().sA,{id:"fullPageError.improveLoggedOutLandingExp.message",defaultMessage:"Sign in to see this page in {workspaceName}",values:{workspaceName:(0,g.jsx)("b",{children:r.spaceName})}})})]})]})}function qt(e){let{sudoModeStore:t,inviteTargetsStore:r}=e;const o=(0,a().DP)(),s=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),n=(0,i().O$)(t);return s&&n.privatePageStore&&n.changePermissionsEnabled?(0,g.jsx)("div",{style:{textAlign:"left",borderRadius:4,background:o.modalBackground,position:"relative",boxShadow:o.shadowMD,width:F().$D,margin:"24px auto"},children:(0,g.jsx)(E().k,{store:n.privatePageStore,sudoModeStore:t,inviteTargetsStore:r,location:"no_access_page",onClose:()=>O().Ay.reset()})}):null}function Wt(e){const t=e.state.privatePageStore;if(!e.shouldUserHaveAccessToPrivatePageBlock()||!t)return;const r=t.getModel();if(!r)return;const o=r.getRenderTitleWithPlaceholder({getRecordModel:t.getRecordModel,userTimeZone:(0,d().P)(),intl:C().A.getIntl()}),s=r.getRenderIcon({getRecordModel:t.getRecordModel});return(0,g.jsxs)(g.Fragment,{children:[s&&(0,g.jsx)(de().B,{isEmptyPage:!0,disabled:!0,icon:s,size:24,style:{display:"inline-block",marginRight:4}}),o&&(0,g.jsx)("span",{children:o})]})}function Lt(e){const t=(0,a().IS)((t=>{const r=e.themeOverride??t;return{backgroundImg:{position:"absolute",top:230,WebkitMask:"linear-gradient(to bottom, rgba(0,0,0,1) 50%, rgba(0,0,0,0) 100%)",zIndex:0},wrapper:{boxShadow:r.shadowMD,zIndex:1,border:`1px ${r.stroke.primary}`,background:r.modalBackground,borderRadius:20,display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",padding:40},loginDisclaimer:{color:r.text.secondary,maxWidth:400}}}),[e.themeOverride]);return e.isEnabled?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("img",{alt:"",src:c().A.images.onboarding.skeletonPageSvg,style:t.backgroundImg}),(0,g.jsx)("div",{style:t.wrapper,children:e.children}),(0,g.jsx)(R().z,{style:t.loginDisclaimer,themeOverride:e.themeOverride})]}):(0,g.jsx)(g.Fragment,{children:e.children})}function Nt(e){var t;let{publicPageData:r,store:s}=e;const l=(0,a().DP)(),c=(0,n().v3)(),{device:d}=c,{inviteeEmail:f,inviterName:j,showInvitationVersion:y}=(0,i().K8)((()=>{const{inviteeEmail:e,inviterName:t}=N().A.state;return{inviteeEmail:e,inviterName:t,showInvitationVersion:L().A.isTemporaryPasscode()&&e===L().A.state.email}}),[]),b=(0,v().O4)({theme:"light"}),A=null!==(t=r.domainLinkSharingEnabledDomains)&&void 0!==t&&t.length&&"none"===r.publicAccessRole?r.domainLinkSharingEnabledDomains[0]:void 0;(0,o.useEffect)((()=>{Se("team_login",s.state.flowId,c),(0,h().wA)(window.location.href)}),[s,c]);const S=(0,i().K8)((()=>!(d.isMobile||d.isElectron||y)),[d.isElectron,d.isMobile,y]),w=(0,i().K8)((()=>S?{paddingTop:"5vh"}:{}),[S]),k=(0,i().K8)((()=>L().A.isMfa()),[]),P=(0,g.jsx)(ae().A,{capture:!0,allowMobileAutoScroll:!0,render:e=>(0,g.jsx)(fe().A,{analyticsName:"team_login",hideNavItems:!0,hideNotificationBanner:!0,children:(0,g.jsxs)(ze,{style:w,...e,children:[(0,g.jsxs)(Lt,{isEnabled:S,themeOverride:b,children:[(0,g.jsx)(Rt,{isElectron:c.device.isElectron,publicPageData:r,showInvitationVersion:y,inviterName:j,greetingStyle:{color:b.text.primary,overflow:"hidden",textOverflow:"ellipsis"},iconBoxInitialStyle:{background:b.regularDividerColor,color:b.text.secondary},trustedDomain:A}),f&&y?(0,g.jsx)(Bt,{inviteeEmail:f}):null,k?(0,g.jsx)(W().A,{loginStore:L().A}):(0,g.jsx)(D().A,{emailLabelType:"email",style:{maxWidth:300},emailPasscodePlaceholderType:y?"paste_code":"enter_code",from:"pageError",loginStore:L().A,showInvitationVersion:y,isSignup:y,themeOverride:b,disableDisclaimer:S})]}),d.isMobile&&!d.isMobileNative&&!y&&(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)("div",{style:{height:1,width:"100vw",background:l.regularDividerColor,marginTop:36,marginBottom:36}}),(0,g.jsxs)(ce().A,{style:{width:280},size:"lg",onClick:()=>{I().eG({url:window.location.href,environment:c})},children:[d.isIOS?(0,u().L)(Ct):p(Ct),(0,g.jsx)(x().sA,{id:"fullPageError.openInMobileAppButton.label",defaultMessage:"Open in mobile app"})]}),(0,g.jsx)(le().A,{href:d.isIOS?m().JZ.appStore:m().JZ.playStore,external:!0,innerStyle:{marginTop:16},children:(0,g.jsx)(ge().A,{isSmall:!0,style:{textDecoration:"underline",fontSize:14,color:b.text.secondary},children:(0,g.jsx)(x().sA,{id:"fullPageError.downloadMobileAppButton.label",defaultMessage:"Get mobile app"})})})]}),(0,g.jsx)(He,{forceTheme:b})]})})});return c.device.isMobileNative?(0,g.jsx)(ue().H,{type:J().A.Y,style:{width:"100%",height:"100%",overflow:"auto",WebkitOverflowScrolling:"touch"},children:P}):P}function zt(e){let{publicPageData:t,sudoModeStore:r,inSudoModeAndInTrash:s,route:a,store:l}=e;const c=(0,i().K8)((()=>l.state.flowId),[l]),d=(0,n().v3)(),{spaceId:u,pageId:p}={...t},f=(0,o.useCallback)((async()=>{const{currentSpaceStore:e}=Y().default.state,t=r.state.privatePageStore;e&&t&&(await M().iN({environment:d,block:t,spaceId:t.pointer.spaceId||e.id,from:"page_error"}),r.reset())}),[r,d]);return t&&t.canRequestAccess&&u&&p?(0,g.jsxs)(me().Ye,{gap:8,children:[(0,g.jsx)(tt,{route:a,store:l,color:"white"}),s?(0,g.jsx)(ce().A,{onClick:f,size:"lg",children:(0,g.jsx)(x().sA,{id:"fullPageError.pageInTrash.restoreButton",defaultMessage:"Restore page"})}):(0,g.jsx)(xe().A,{type:"current-actor-to-block",block:{id:p,spaceId:u},flowId:c})]}):(0,g.jsx)(tt,{route:a,store:l,color:"white"})}function Ut(e){let{route:t,store:r}=e;const o=(0,i().K8)((()=>r.state.flowId),[r]);if("teamsInvite"!==t.name)return(0,g.jsx)(tt,{route:t,store:r,color:"white"});const{teamId:s}=t;return s?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tt,{route:t,store:r,color:"white"}),(0,g.jsx)(xe().A,{buttonType:"primary",type:"current-actor-to-space-via-team",teamId:s,flowId:o})]}):(0,g.jsx)(tt,{route:t,store:r,color:"white"})}function Ft(e){let{route:t,store:r,sudoModeStore:o,publicPageData:s,trustedDomain:a}=e;const l=(0,n().v3)(),c=(0,i().uB)(void 0,U().A),d=(0,i().uB)(void 0,z().A);return(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(ot,{isElectron:l.device.isElectron}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{icon:(0,g.jsx)(he().fD,{type:"noAccess",publicPageData:s}),title:(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.title",defaultMessage:"No access to this shared page"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.messageV2",defaultMessage:"You can access this page by signing in to an account with a <b>@{trustedDomain}</b> email address.",values:{trustedDomain:a,b:e=>(0,g.jsx)("b",{children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tt,{route:t,store:r,color:"white"}),(0,g.jsxs)(ce().A,{size:"lg",onClick:()=>d.setState({open:!0}),children:[(0,g.jsx)(x().sA,{id:"fullPageError.domainSharingPage.login.",defaultMessage:"Log in"}),(0,g.jsx)(q().z,{loginModalStore:d,loginStore:c,title:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.title",defaultMessage:"Add an account"}),description:(0,g.jsx)(x().sA,{id:"sidebarSwitcherMultiAccount.addAccount.descriptionV2",defaultMessage:"Log in/sign up with a @makenotion.com email address. Your current account will remain logged in."}),className:"notion-space-settings",trustedDomain:a})]})]}),children:(0,g.jsx)(at,{sudoModeStore:o})}),(0,g.jsx)(Je,{loginModalStore:d,loginStore:c,trustedDomain:a})]})}function Ot(e){let{publicPageData:t,route:r,store:o,sudoModeStore:s,inviteTargetsStore:a}=e;const l=(0,n().v3)(),c=(0,i().K8)((()=>s.state.loading),[s]),d=(0,i().K8)((()=>s.shouldUserHaveAccessToPrivatePageBlock&&s.shouldUserHaveAccessToPrivatePageBlock()&&s.state.changePermissionsEnabled),[s]),u=(0,i().K8)((()=>s.shouldUserHaveAccessToPrivatePageBlock()),[s]),p=(0,i().K8)((()=>{if(!u||!Z().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))return!1;const e=s.state.privatePageStore;return!!e&&(e.pathHasDeletedPermission()&&!e.pathHasPurgedDeletedPermission())}),[s,u]),f=(0,i().K8)((()=>Boolean(s.state.privatePageStore&&s.state.privatePageStore.pathIsDead()&&Z().default.checkGate({gateName:"cdrr_deleted_from_trash_view"}))),[s]),m=(0,i().K8)((()=>Wt(s)),[s]);return c?(0,g.jsx)(V().A,{skipFadeinDelay:!0}):p?(0,g.jsx)(Ht,{sudoModeStore:s,route:r,store:o}):(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(ot,{isElectron:l.device.isElectron}),(0,g.jsx)(Ue,{}),(0,g.jsxs)(Oe,{icon:(0,g.jsx)(he().fD,{type:"noAccess",publicPageData:t}),title:d?(0,g.jsx)(we,{pageTitle:m}):(0,g.jsx)(st,{canRequestAccess:Boolean(null==t?void 0:t.canRequestAccess),pageTitle:m,inSudoModeAndInTrash:f}),description:d?(0,g.jsx)(ke,{}):(0,g.jsx)(nt,{canRequestAccess:Boolean(null==t?void 0:t.canRequestAccess),inSudoModeAndInTrash:f}),actionButtons:(0,g.jsx)(zt,{publicPageData:t,sudoModeStore:s,inSudoModeAndInTrash:f,route:r,store:o}),children:[u?(0,g.jsx)(qt,{sudoModeStore:s,inviteTargetsStore:a}):null,f?null:(0,g.jsx)(at,{sudoModeStore:s})]}),(0,g.jsx)(Je,{})]})}function Kt(e){const t=(0,n().v3)(),{source:r,canJoinSpace:s,publicPageData:i,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d}=e;if((0,o.useEffect)((()=>{"onboarding"===r?Se("onboarding_error",l.state.flowId,t):"teamsInvite"===r?Se("team_invite_no_access",l.state.flowId,t):i&&Se("team_no_access",l.state.flowId,t)}),[i,r,l,t]),i){var u;const e=null!==(u=i.domainLinkSharingEnabledDomains)&&void 0!==u&&u.length?i.domainLinkSharingEnabledDomains[0]:void 0;return e?(0,g.jsx)(Ft,{route:a,store:l,sudoModeStore:c,publicPageData:i,trustedDomain:e}):(0,g.jsx)(Ot,{publicPageData:i,route:a,store:l,sudoModeStore:c,inviteTargetsStore:d})}return(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(ot,{isElectron:t.device.isElectron}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{icon:i?(0,g.jsx)(he().fD,{type:"noAccess",publicPageData:i}):null,title:s?(0,g.jsx)(x().sA,{id:"fullPageError.notInWorkspace.message",defaultMessage:"You are not in this workspace."}):(0,g.jsx)(x().sA,{id:"fullPageError.accessNotAllowed.message",defaultMessage:"You do not have access to this page."}),description:"teamsInvite"===r?(0,g.jsx)(x().sA,{id:"fullPageError.canRequestWorkspaceAccess.message",defaultMessage:"You can access this workspace if someone approves your request."}):null,actionButtons:(0,g.jsx)(Ut,{route:a,store:l}),children:(0,g.jsx)(at,{sudoModeStore:c})}),(0,g.jsx)(Je,{})]})}function Vt(e){let{publicPageData:t,route:r,store:s,sudoModeStore:i,inviteTargetsStore:a}=e;const l=(0,n().v3)();return(0,o.useEffect)((()=>{Se("team_page_no_access",s.state.flowId,l)}),[l,s]),(0,g.jsx)(Ot,{publicPageData:t,route:r,store:s,sudoModeStore:i,inviteTargetsStore:a})}function Ht(e){let{sudoModeStore:t,route:r,store:s}=e;const a=(0,n().v3)(),l=(0,i().K8)((()=>t.state.privatePageStore),[t]),c=(0,i().K8)((()=>t.shouldUserHaveAccessToPrivatePageBlock()),[t]),d=(0,i().O$)(oe().subscriptionDataStoreInstance),u=(0,_().T)({subscriptionData:d}),p=(0,o.useCallback)((()=>{l&&M().tz({environment:a,blockStore:l,handleSuccess:()=>{y().L(a,{pageId:l.id,from:"page"}),I().VP({environment:a,blocks:[l]})}})}),[a,l]),m=(0,o.useCallback)((e=>(0,g.jsx)(ce().A,{...e,size:"lg",children:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.restoreButton",defaultMessage:"Restore page"})})),[]),h=(0,i().K8)((()=>Wt(t)),[t]);return l&&c?(0,g.jsxs)(ze,{children:[(0,g.jsx)(Fe,{}),(0,g.jsx)(ot,{isElectron:a.device.isElectron}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{title:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.titleWithPageName",defaultMessage:"<bold>{pageTitle}</bold> has been deleted from the Trash",values:{pageTitle:h,bold:e=>(0,g.jsx)("b",{children:e})}}),description:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.message",defaultMessage:"As a workspace owner, you can restore this page. <br>This will be recorded in the audit log.</br>",values:{br:e=>(0,g.jsx)("div",{children:e})}}),actionButtons:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(tt,{route:r,store:s,color:"white"}),(0,g.jsx)(se().V,{renderPopupOrigin:m,blockStore:l,environment:a,placementToOrigin:H().W.Bottom,includeNonRestoreActions:!1,getValidDeletedPermissions:u,from:"retainedPage"})]}),children:(0,g.jsx)(ie().p,{icon:f().I,isGray:!0,size:"lg",onClick:p,children:(0,g.jsx)(x().sA,{id:"fullPageError.deletedFromTrashPage.permanentlyDeleteButton",defaultMessage:"Permanently delete"})})}),(0,g.jsx)(Je,{})]}):null}function Jt(e){let{store:t,route:r}=e;const s=(0,n().v3)(),{device:i}=s,{isElectron:a}=i,l=_t(s),c=(0,x().tz)();return(0,o.useEffect)((()=>Se("404",t.state.flowId,s)),[t,s]),(0,g.jsxs)(ze,{children:[a?(0,g.jsx)(pe().A,{title:c.formatMessage({defaultMessage:"Not found",id:"errorPage.contentDoesNotExist.tabTitle"})}):null,(0,g.jsx)(Fe,{}),(0,g.jsx)(Ue,{}),(0,g.jsx)(Oe,{title:(0,g.jsx)(x().sA,{id:"fullPageError.notFoundError.title",defaultMessage:"This page couldn’t be found"}),description:(0,g.jsx)(x().sA,{id:"fullPageError.notFoundError.description",defaultMessage:"You may not have access, or it might have been deleted or moved. Check the link and try again."}),actionButtons:l?(0,g.jsx)(tt,{route:r,store:t,color:"white"}):null}),l?(0,g.jsx)(Je,{}):(0,g.jsx)(He,{})]})}function Yt(e){let{route:t,publicPageData:r,pageErrorStore:o,sudoModeStore:s,inviteTargetsStore:a}=e;const l=(0,n().v3)(),{allStoresLoaded:c,foundSpaceView:d}=(0,i().K8)((()=>{const{currentUserRootStore:e}=Y().default.state;if(!e||!e.isReady())return{allStoresLoaded:!1,foundSpaceView:null};const t=(null==e?void 0:e.getSpaceViewStores())||[];if(!t.every((e=>e.isReady())))return{allStoresLoaded:!1,foundSpaceView:null};return{allStoresLoaded:!0,foundSpaceView:t.find((e=>e.getSpaceId()===r.spaceId))}}),[r.spaceId]);return c?d&&"page"===t.name?t.peekViewBlockId?(0,g.jsx)(Dt,{environment:l,currentRoute:t}):(0,g.jsx)(Vt,{publicPageData:r,route:t,store:o,sudoModeStore:s,inviteTargetsStore:a}):r.canJoinSpace?"space"===t.name?(0,g.jsx)($t,{publicPageData:r,pageErrorStore:o}):(0,g.jsx)(Kt,{publicPageData:r,route:t,store:o,sudoModeStore:s,inviteTargetsStore:a,source:"workspace",canJoinSpace:!0}):(0,g.jsx)(Kt,{publicPageData:r,route:t,store:o,sudoModeStore:s,inviteTargetsStore:a,source:"workspace",canJoinSpace:!1}):null}function $t(e){let{publicPageData:t,pageErrorStore:r}=e;const s=(0,n().v3)(),a=(0,i().K8)((()=>r.state.flowId),[r]);return(0,o.useEffect)((()=>{be({publicPageData:t,environment:s,flowId:a,store:r,skipClickLogging:!0})}),[t,s,a,r]),null}},986229:(e,t,r)=>{r.d(t,{A:()=>s});class o extends(()=>r(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",isInviteTargetsEmpty:!0,table:r(179034).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const s=o}}]);