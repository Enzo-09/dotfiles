"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[31517,34208,90871],{34373:(e,t,o)=>{o.d(t,{k:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionBoard",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.39697 14.4634H13.5964C15.0532 14.4634 15.8311 13.6921 15.8311 12.2485V4.24609C15.8311 2.80249 15.0532 2.03125 13.5964 2.03125H2.39697C0.940186 2.03125 0.162354 2.7959 0.162354 4.24609V12.2485C0.162354 13.6987 0.940186 14.4634 2.39697 14.4634ZM2.52222 12.9934C1.94214 12.9934 1.63232 12.7034 1.63232 12.0969V4.39771C1.63232 3.79126 1.94214 3.50122 2.52222 3.50122H4.92822V12.9934H2.52222ZM6.34546 12.9934V3.50122H9.64795V12.9934H6.34546ZM13.4712 3.50122C14.0447 3.50122 14.3611 3.79126 14.3611 4.39771V12.0969C14.3611 12.7034 14.0447 12.9934 13.4712 12.9934H11.0652V3.50122H13.4712Z"})})},50170:(e,t,o)=>{o.d(t,{u:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionList",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M2.08716 5.15576C2.64087 5.15576 3.08911 4.70752 3.08911 4.15381C3.08911 3.6001 2.64087 3.15186 2.08716 3.15186C1.53345 3.15186 1.08521 3.6001 1.08521 4.15381C1.08521 4.70752 1.53345 5.15576 2.08716 5.15576ZM5.29736 4.85254H14.2161C14.605 4.85254 14.9148 4.54272 14.9148 4.15381C14.9148 3.76489 14.605 3.45508 14.2161 3.45508H5.29736C4.90845 3.45508 4.59863 3.7583 4.59863 4.15381C4.59863 4.54272 4.90186 4.85254 5.29736 4.85254ZM2.08716 9.24927C2.64087 9.24927 3.08911 8.80103 3.08911 8.24731C3.08911 7.6936 2.64087 7.24536 2.08716 7.24536C1.53345 7.24536 1.08521 7.6936 1.08521 8.24731C1.08521 8.80103 1.53345 9.24927 2.08716 9.24927ZM5.29736 8.94604H14.2161C14.605 8.94604 14.9148 8.64282 14.9148 8.24731C14.9148 7.8584 14.605 7.54858 14.2161 7.54858H5.29736C4.90845 7.54858 4.59863 7.8584 4.59863 8.24731C4.59863 8.63623 4.90186 8.94604 5.29736 8.94604ZM2.08716 13.3428C2.64087 13.3428 3.08911 12.8945 3.08911 12.3408C3.08911 11.7937 2.64087 11.3389 2.08716 11.3389C1.53345 11.3389 1.08521 11.7937 1.08521 12.3408C1.08521 12.8945 1.53345 13.3428 2.08716 13.3428ZM5.29736 13.0396H14.2161C14.605 13.0396 14.9148 12.7363 14.9148 12.3408C14.9148 11.9519 14.605 11.6487 14.2161 11.6487H5.29736C4.90845 11.6487 4.59863 11.9519 4.59863 12.3408C4.59863 12.7297 4.90186 13.0396 5.29736 13.0396Z"})})},53528:(e,t,o)=>{o.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var n=()=>o(597777),i=()=>o(869190),r=()=>o(604995),a=()=>o(416504);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,a=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:a,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:o}=e,s=r().C6.toPersistedDateRange(t),l=i().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=i().fU({start_time:c.toFormat(n().GE),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},69447:(e,t,o)=>{o.d(t,{Lq:()=>n,WK:()=>r,nh:()=>i});const n=40,i=48,r=60},77126:(e,t,o)=>{o.d(t,{j:()=>i});class n extends(()=>o(959180))().A{}const i=new n},83027:(e,t,o)=>{o.r(t),o.d(t,{getMobilePreviewTemplates:()=>u,getSuggestedTemplatesForSearch:()=>p});o(581454);var n=()=>o(255591),i=()=>o(797573),r=()=>o(435009),a=()=>o(972435),s=()=>o(951340),l=()=>o(174723),c=()=>o(508496),d=()=>o(87726);function p(e){const{persona:t,environment:o}=e,n=a().A.getIntl();return(0,s().DC)(c().default,t).map((e=>{const t=(0,i().B)(e,n);return{name:t.name,icon:e.emoji||e.icon||void 0,onClick:()=>{(e=>{const t=(0,l().Up)({templateGalleryItem:e.rootId});r().oo({environment:o,url:t})})(t)}}}))}function u(e){const t=(0,d().un)(e);return(0,d().Iw)(e).map((e=>{const o=t[e];return{category:e,sectionHeaderMessage:n().bJ[e],templates:o}}))}},87726:(e,t,o)=>{o.d(t,{Hk:()=>m,Iw:()=>f,kc:()=>v,un:()=>y});o(898992),o(354520),o(581454);var n=()=>o(979340),i=()=>o(255591),r=()=>o(228271),a=()=>o(797573),s=()=>o(534177),l=()=>o(780054),c=()=>o(47373),d=()=>o(972435),p=()=>o(951340),u=()=>o(508496);const m=(0,o(959013).YK)({addToTeamspace:{id:"templateGalleryHelpers.addToTeamspace",defaultMessage:"Add to a teamspace"},addToPrivate:{id:"teamPickerButton.addToPrivate",defaultMessage:"Add to Private"}}),g=(0,s().uv)(i().PY);function f(e){let{userPersona:t,subscriptionTier:o}=e;return[...g].sort(((e,i)=>function(e,t,o,i){const r=(0,n().Pg)(i),a=(0,p().NI)({persona:o,defaultToLife:r});if("suggested"===e||"suggested"===t)return"suggested"===e?-1:1;if(a===e||a===t)return a===e?-1:1;if(("life"===e||"life"===t)&&r)return"life"===e?-1:1;if(("student"===e||"student"===t)&&function(e){let{persona:t,isPersonalishPlan:o}=e;const n=o?["other","unfilled","personal","undefined"]:["personal"];return n.includes(t??"undefined")}({persona:o,isPersonalishPlan:r}))return"student"===e?-1:1;return 0}(e,i,t,o)))}function y(e){let{subscriptionTier:t,environment:o}=e;const l=d().A.getIntl(),p=(0,c().WC)({environment:o}),m=p?function(e){return(0,n().Pg)(e)?i().sw:i().ht}(t):i().PY.suggested;return(0,s().s8)(i().PY,((e,t)=>"suggested"===t?m.map((e=>(0,a().B)(e,l))):e.filter((e=>(0,r().vc)(e,u().default))).map((e=>p?(0,r().G2)(e):e)).filter((e=>!m.includes(e))).map((e=>(0,a().B)(e,l)))))}function v(e){return`${l().A.domainBaseUrl}/@${e}`}},89849:(e,t,o)=>{o.r(t),o.d(t,{eyeIcon:()=>r,iconDefinition:()=>i});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("g",{clipPath:"url(#clip0_9098_13290)",children:[(0,n.jsx)("path",{d:"M10 13.504a3.5 3.5 0 1 0-.001-7.002A3.5 3.5 0 0 0 10 13.504m1.167-3.502a1.168 1.168 0 1 1-2.335.002 1.168 1.168 0 0 1 2.335-.002"}),(0,n.jsx)("path",{d:"M10 3.895c-4.093 0-7.662 2.189-9.351 5.408-.231.44-.231.964 0 1.404 1.689 3.22 5.258 5.408 9.351 5.408s7.662-2.189 9.351-5.408c.231-.44.231-.964 0-1.404-1.689-3.22-5.258-5.408-9.351-5.408m-8.245 5.99C3.218 7.096 6.347 5.144 10 5.144s6.782 1.952 8.245 4.74a.26.26 0 0 1 0 .24c-1.463 2.788-4.592 4.74-8.245 4.74s-6.782-1.952-8.245-4.74a.26.26 0 0 1 0-.24"})]}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_9098_13290",children:(0,n.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},r=(0,o(340498).wt)("eye",i)},97059:(e,t,o)=>{o.d(t,{W:()=>f,w:()=>g});o(944114);var n=()=>o(585515),i=()=>o(577449),r=()=>o(161479),a=()=>o(545285),s=()=>o(763824),l=()=>o(780054),c=()=>o(870618),d=()=>o(670631),p=()=>o(227440),u=()=>o(508496),m=()=>o(540758);async function g(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,r().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await n().T(s,i().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),i().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),d}({environment:t,pageId:e})))).flat()}function f(e,t){return!p().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&u().default.checkGate({gateName:"download_for_offline"})&&!(0,m().Bd)(t)}},97789:(e,t,o)=>{o.d(t,{a6:()=>n,dL:()=>a,w$:()=>r,xc:()=>i});const n="notion://projects_app",i="notion://wiki_app",r="notion://docs_app",a="notion://meetings_app"},102586:(e,t,o)=>{o.d(t,{L1:()=>a,MY:()=>c,US:()=>p,Uj:()=>l,if:()=>r,z2:()=>s});o(898992),o(354520);var n=()=>o(755199);const i=100;function r(e,t){return e.prompt===t.prompt&&e.type===t.type}function a(e,t,o){const a=s(t).filter((t=>!r(t,e)));n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:[e,...a].slice(0,i)}})}function s(e){var t;return(null===(t=e.getModel())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.recent_ai_actions)??[]}function l(e,t,o){const i=s(t),a=i.filter((t=>!r(t,e)));i.length!==a.length&&n().mJ({userSettingsStore:t,transaction:o,data:{recent_ai_actions:a}})}function c(e){const{clientPrompt:t,additionalContext:o,promptTitle:n}=e,i=null==o?void 0:o.prompt;if(("helpMeWrite"===t.key||"helpMeEdit"===t.key||"helpMeDraft"===t.key)&&i)return{type:"helpMeDraft"===t.key?"helpMeWrite":t.key,prompt:i,promptTitle:n};const r=function(e,t){if(!p(e.key))return;return null==t?void 0:t.topic}(t,o);return r?{type:"helpMeWrite",prompt:r,promptTitle:n}:void 0}const d={brainstormIdeas:!0,blogPost:!0,outline:!0,socialMediaPost:!0,pressRelease:!0,creativeStory:!0,essay:!0,poem:!0,todoList:!0,meetingAgenda:!0,prosConsList:!0,jobDescription:!0,salesEmail:!0,recruitingEmail:!0};function p(e){return d[e]}},104636:(e,t,o)=>{o.d(t,{Is:()=>p,LS:()=>g,NH:()=>f,QA:()=>m,_b:()=>u});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),i=(o(296540),()=>o(390527)),r=()=>o(604995),a=()=>o(959013),s=()=>o(488887),l=()=>o(534177),c=()=>o(108944),d=o(474848);function p(e){const t=c().g7(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,i().templateAncestorsViolateRecurrenceNesting)(o)}}function u(e){switch(e){case"day":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,d.jsx)(a().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,l().HB)(e)}}function m(){return{start_date:n().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,r().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function g(e){const{recurrence:t,intl:o,leadingPhrase:n}=e;return(0,i().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===n)return"";if("every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,l().HB)(n);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,s()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function f(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},173019:(e,t,o)=>{o.d(t,{r:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("pencil",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M3.926 13.307H14.11c.183 0 .34-.066.472-.199a.644.644 0 00.198-.471.652.652 0 00-.198-.479.644.644 0 00-.472-.198H5.272l-1.346 1.347zm-.704-.636l7.683-7.684-1.312-1.319-7.69 7.684-.67 1.606c-.037.1-.017.191.06.273.083.082.174.105.274.069l1.655-.63zm8.34-8.326l.738-.732c.182-.187.278-.376.287-.567.009-.192-.068-.374-.232-.547l-.267-.267c-.169-.168-.351-.246-.547-.232-.196.014-.385.11-.567.287l-.739.732 1.327 1.326z"})})},174723:(e,t,o)=>{o.d(t,{$Y:()=>m,AF:()=>c,Px:()=>u,Up:()=>d,dY:()=>p});o(898992),o(354520);var n=()=>o(662303),i=()=>o(427704),r=()=>o(939768),a=()=>o(780054),s=()=>o(22102),l=()=>o(630116);async function c(e,t){const o=await s().k.load();return e.filter((e=>{const n=e.getCopiedFromPointer();return Boolean(n&&o.isTemplate(n)&&Boolean(t&&t(n.id)))}))}function d(e){const t=window.location.href;return r().O$(t,{tg:e.templateGalleryItem})}function p(e){let t;return e instanceof l().$x?t=e.getBlockId():"type"in e?(e.type,t=e.template.rootId):t=e.rootId,t}function u(e){const t=n().locale&&"en-us"!==n().locale.toLocaleLowerCase()?`/${n().locale.toLowerCase()}`:"",o=void 0!==e?`${t}${i().JZ.templates}/${encodeURIComponent(e)}`:`${t}${i().JZ.templates}`;return`${a().A.domainBaseUrl}${o}`}function m(e){if(!e)return"";try{const o=JSON.parse(e);if("text"===o.content[0].content[0].nodeType){var t;const e=(null==o||null===(t=o.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(o){return""}}},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>a});o(16280);var n=o(296540);const i="collectionContextStore",r=(0,o(446943).C)({displayName:i,legacyContextKey:i,modernContextDefaultValue:void 0}),a=r.context,s=r.Provider;function l(){const e=n.useContext(a);if(void 0===e)throw new Error(`No context provided: ${i}`);return e}function c(){return n.useContext(a)}},178658:(e,t,o)=>{o.r(t),o.d(t,{closeInitialPromptAndEndSession:()=>M,closeInitialPromptButContinueSession:()=>P,openHelpMeWriteGenericPopup:()=>I,retryInitialPrompt:()=>x,showInitialPromptForAIBlock:()=>_,toggleInitialPrompt:()=>A});var n=()=>o(908006),i=()=>o(925193),r=()=>o(206267),a=()=>o(534177),s=()=>o(937075),l=()=>o(449506),c=()=>o(725614),d=()=>o(401040),p=()=>o(68465),u=()=>o(231722),m=()=>o(393255),g=()=>o(351360),f=()=>o(430483),y=()=>o(295169),v=()=>o(525569),h=()=>o(508496),S=()=>o(502438),C=()=>o(24157),b=()=>o(972911),k=()=>o(286088);function w(e,t){if((0,k().Ku)(e),!("completionPopup"!==t.type&&"assistantCompletionPopup"!==t.type||"results"!==t.stage&&"initialPrompt"!==t.stage||"textSelection"!==t.context.type&&"cursor"!==t.context.type)){const e=t.context.textSelection;n().default.afterNextFlush((()=>c().setMultiSelection({multiSelection:e})))}}function x(e){v().default.invalidateLastUpdater();const{environment:t}=e,{state:o}=v().default;if("completionPopup"!==o.type||"results"!==o.stage)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(o.inMemoryRecordCache);const n={type:"completionPopup",stage:"initialPrompt",prefilledValue:"",context:o.context,aiSessionId:o.aiSessionId,from:o.from,futureRevisions:[...o.revisions,...o.futureRevisions]};v().default.setState(n)}function M(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&w(e,v().default.state),v().default.setState({type:"closed"})}function P(e){const{state:t}=v().default;w(e,t),"completionPopup"===t.type&&"initialPrompt"===t.stage&&v().default.setState({type:"closedWithContext",context:t.context,aiSessionId:t.aiSessionId,futureRevisions:t.futureRevisions}),setTimeout((()=>{"closedWithContext"===v().default.state.type&&v().default.reset()}),1)}function _(e){v().default.setState({...e,type:"completionPopup",stage:"initialPromptForAIBlock",from:"ai_block",prefilledValue:"",aiSessionId:r().JW()}),T({environment:e.environment,promptForAnalytics:e.clientPrompt})}async function A(e){const{environment:t,from:n}=e;let{context:r,prefilledValue:a,sessionId:s}=e;const{assistantDependency:c}=await Promise.resolve().then(o.bind(o,650829)),p=await c.load();if(!(await p.assistantMenuActions.closeAssistantRightHandSideMenu({environment:t})))return;let m={type:"closed"};if("closed"===v().default.state.type||"closedWithContext"===v().default.state.type){if(!r&&S().default.state.stores.length>0){const e=C().default.state;r="empty"===e.mode?(0,d().RH)():(0,u().kM)(e.multiSelection)?(0,d().gu)():(0,d().rs)()}r&&(a||(a=""),s||(s=(0,i().gC)()),m=f().zD.isAssistantInWriterEnabled()?{type:"assistantCompletionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,sessionId:s,loading:!1,hasErrored:!1}:{type:"completionPopup",stage:"initialPrompt",context:r,from:n,prefilledValue:a,aiSessionId:s,futureRevisions:[]},g().default.state.currentSpaceStore&&l().callApi({eventName:"publishAiSession",environment:t,data:{inference_type:"writer",spaceId:g().default.state.currentSpaceStore.id,id:"assistantCompletionPopup"===m.type?s:m.aiSessionId,metadata:{from:n}}}),"spacebar"===n&&(0,b().onSpaceForAiTriggered)(t))}v().default.setState(m),T(e)}function I(e){const{title:t,environment:o,prefilledValue:n,from:i}=e,s=(0,d().gu)();if(!s)return;let l;if((0,a().O9)(t)){const e=t?(0,p().gB)({customPrompt:n??t,isPageEmpty:!0}):p().am;l={promptForAnalytics:e,prefilledValue:(0,d().oW)(e)}}else l={prefilledValue:n,promptForAnalytics:void 0};A({environment:o,from:i??"page_menu",sessionId:r().JW(),context:s,...l})}function T(e){const{environment:t,promptForAnalytics:o}=e,{state:n}=v().default;if(("completionPopup"===n.type||"assistantCompletionPopup"===n.type)&&"results"!==n.stage){"initialPromptForAIBlock"===n.stage||h().default.checkGate({gateName:"mobile_assistant_prevent_clear_selection"})||c().clear({environment:t});const e="assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,i=y().default.getSessionContext(e);s().g0(t,{session_id:"assistantCompletionPopup"===n.type?n.sessionId:n.aiSessionId,prompt_key:(null==o?void 0:o.key)??("completionPopup"!==n.type||n.prefilledValue?"unknown":"alternative_ui_empty_input"),from:n.from,sessionContext:i}),m().VN({dismissed:!1,environment:t})}}},182034:(e,t,o)=>{o.d(t,{O:()=>p,e:()=>d});o(898992),o(672577);var n=()=>o(908006),i=()=>o(878523),r=()=>o(725614),a=()=>o(892632),s=()=>o(299545),l=()=>o(77126),c=()=>o(489348);function d(e,t){const o=s().dd(t),n=a().xh(o);e.setState({...e.state,files:n})}async function p(e){const{blockStore:t,pageViewBlockStore:o,environment:a}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),i().o2(a,{from:"page_comments"}),await n().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==s?void 0:s.getInputStore();d&&r().setSelectionAtEnd({store:d.state.textStore})}},200562:(e,t,o)=>{o.d(t,{z:()=>r});var n=()=>o(645873);const i=new(n().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,81292)))),r=(0,n()._h)(i,(e=>e.TopbarSidebarButton))},207207:(e,t,o)=>{o.d(t,{J:()=>i});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})},i=(0,o(340498).wt)("magnifyingGlass",n)},226916:(e,t,o)=>{o.d(t,{c:()=>h,t:()=>S});o(16280);var n=()=>o(908006),i=()=>o(388821),r=()=>o(919709),a=()=>o(970330),s=()=>o(171718),l=()=>o(319975),c=()=>o(751156),d=()=>o(62287),p=()=>o(389658),u=()=>o(972435),m=()=>o(129522),g=()=>o(351360),f=()=>o(508496),y=()=>o(75368);const v=(0,o(959013).YK)({formDatabaseTitle:{id:"newBlock.databaseInline.formDatabaseTitle",defaultMessage:"New form"}});function h(e){var t,o,r;const{environment:c,store:u,viewType:v,transaction:h}=e,S=null===(t=u.getBlockTitleStore())||void 0===t?void 0:t.getValue();f().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&y().A.state.open&&y().A.setState({open:!1});const C=u.getSpaceId()??(null===(o=g().default.state.currentSpaceStore)||void 0===o?void 0:o.id)??(null===(r=g().default.state.mainEditorCurrentBlockStore)||void 0===r?void 0:r.getSpaceId()),b=C?c.idCreator.getSpaceIdCreatorSync(C):void 0;s().j({environment:c,sourceBlockId:"root",targetBlockPointer:u.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().qP)({isInline:!1,viewType:v})),targetRecordCache:u.inMemoryRecordCache,transaction:h,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),d().pd({environment:c,block:u,blockType:"collection_view_page",transaction:h}),S&&l().R9({environment:c,store:u.getBlockTitleStore(),value:S,transaction:h}),n().default.afterNextFlush((()=>{const e=m().K.findCollectionViewBlockFromStore(u);var t;e&&"handleCreated"in e&&(null===(t=e.handleCreated)||void 0===t||t.call(e))})),a().v(c,{from:"template_picker",type:"collection_view_page",creating_block_id:u.id,is_full_screen:!0,view_type:v})}async function S(e){var t,n,l;const{environment:m,store:f}=e,y=null===(t=f.getBlockTitleStore())||void 0===t?void 0:t.getValue(),{formsEditorDependency:h}=await Promise.resolve().then(o.bind(o,339034)),{formEditorActions:S}=await h.load(),C=f.getSpaceId()??(null===(n=g().default.state.currentSpaceStore)||void 0===n?void 0:n.id)??(null===(l=g().default.state.mainEditorCurrentBlockStore)||void 0===l?void 0:l.getSpaceId()),b=C?m.idCreator.getSpaceIdCreatorSync(C):void 0;c().createAndCommit({userAction:"HorizontalTemplatePicker.createForm",environment:m,canUndo:!0,perform:e=>{var t;s().j({environment:m,sourceBlockId:"root",targetBlockPointer:f.pointer,sourceBlockSubtree:(0,i().partialRecordMapToRecordMap)((0,p().mT)({isInline:!1,name:(0,r().w9s)(y)?(0,r().x9d)(u().A.formatMessage(v.formDatabaseTitle)):y})),targetRecordCache:f.inMemoryRecordCache,transaction:e,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:b}),d().pd({environment:m,block:f,blockType:"collection_view_page",transaction:e});const o=f.getCollectionStore(),n=null==o||null===(t=o.getModel())||void 0===t?void 0:t.getNormalizedSchema(),l=f;if(!n)throw new Error("Schema not found");const c=S.createCollectionFormEditorView({environment:m,transaction:e,collectionViewBlockStore:l,schema:n,initializeWithAllDefaultQuestions:!0});S.createResponsesCollectionView({environment:m,transaction:e,collectionViewBlockStore:l,schema:n}),a().v(m,{from:"template_picker",type:"form",creating_block_id:f.pointer.id,form_id:null==c?void 0:c.formId,view_id:l.id})}})}},255591:(e,t,o)=>{o.d(t,{PY:()=>s,bJ:()=>a,ht:()=>c,sw:()=>l});var n=()=>o(66689),i=()=>o(837384),r=()=>o(544008);const a={suggested:r().DZ.suggestedCategory,design:r().DZ.designer,eng:r().DZ.engineering,product:r().DZ.productManagement,marketing:r().DZ.marketing,sales:r().DZ.sales,support:r().DZ.support,hr:r().DZ.hr,life:r().DZ.life,student:r().DZ.student},s=(n().Vq,n().WX,n().I0,n().Y8,n().ud,n().I0,n().WX,n().I0,n().WX,n().WX,n().WX,n().WX,{suggested:[i().kx.defaultWiki],product:[i().kx.oneOnOneNotes,i().kx.productWiki,i().kx.productSpec,i().kx.visionAndStrategy,i().kx.presentation,i().kx.investorUpdate,i().kx.userResearch,i().kx.experimentResults,i().kx.brainstorm,i().kx.productLaunchBrief],design:[i().kx.designSprint,i().kx.designSystem,i().kx.designPortfolio,i().kx.userResearch,i().kx.brainstorm],eng:[i().kx.engineeringWiki,i().kx.engineeringTechSpec,i().kx.experimentResults,i().kx.brainstorm],marketing:[i().kx.presentation,i().kx.brandAssets,i().kx.brainstorm,i().kx.contentCalendar,i().kx.blogEditorialCalendar,i().kx.socialMediaCalendar,i().kx.campaignBrief,i().kx.moodBoard,i().kx.mediaList],hr:[i().kx.companyHome,i().kx.newHireOnboarding,i().kx.employeeBenefits,i().kx.interviewGuide,i().kx.recruitingTracker,i().kx.jobBoard,i().kx.applicantTracker,i().kx.peopleDirectory],sales:[i().kx.salesWiki,i().kx.salesCRM,i().kx.salesAssets,i().kx.competitiveAnalysis],support:[i().kx.productFAQs,i().kx.helpCenter],life:[i().kx.readingListV2,i().kx.habitTrackerV2,i().kx.simpleBudgetV2,i().kx.weeklyTodoV2,i().kx.travelPlannerV2,i().kx.journalV2,i().kx.resumeV2,i().kx.personalHomeV3,i().kx.quickNoteV2,i().kx.jobApplicationsV2,i().kx.lifeWikiV2,i().kx.moodBoardV2,i().kx.blogPostV2,i().kx.personalCRMV2],student:[i().kx.studentPlanner,i().kx.classNotesV2,i().kx.courseScheduleV2,i().kx.gradeCalculatorV2,i().kx.cornellNotesSystemV2,i().kx.syllabusV2,i().kx.lessonPlansV2,i().kx.classDirectoryV2,i().kx.classroomHomeV2,i().kx.clubHomepageV2]}),l=[i().kx.todoListMobile,i().kx.quickNoteMobile,i().kx.habitTrackerMobile,i().kx.journalMobile,i().kx.weeklyPlanMobile,i().kx.classNotesMobile],c=[i().kx.todoListMobile,i().kx.quickNoteMobile,i().kx.oneOnOneNotesMobile,i().kx.weeklyPlanMobile]},256863:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(847249),i=()=>o(824862),r=o(474848);const a=function(e){const{botValue:t,botStore:a,showActiveDot:s,style:l,size:c}=e,d=(0,o(959013).tz)(),p=(0,n().K8)((()=>{if(a){const e=a.getIcon();if(e)return{pointer:{table:i().GP,id:a.id,spaceId:a.getSpaceId()},icon:e}}else if(null!=t&&t.icon)return{pointer:{table:i().GP,id:t.id,spaceId:t.space_id},icon:t.icon}}),[a,t]),u=(0,n().K8)((()=>(null==a?void 0:a.getDisplayName(d))??(0,o(799288).Hg)(t)),[a,t,d]),{activeDotStyle:m}=(0,o(401497).IS)((e=>({activeDotStyle:{height:10,width:10,backgroundColor:e.accentColors.green[400],border:"2px solid white",borderRadius:"50%",position:"absolute",left:11,top:11}})),[]);return(0,r.jsxs)("div",{style:l,children:[(0,r.jsx)(o(614505).B,{icon:p,title:u,size:c||18,disabled:!0,isEmptyPage:!1,useInvertedColors:!0}),s?(0,r.jsx)("div",{style:m}):void 0]})}},274652:(e,t,o)=>{o.d(t,{A:()=>r});var n=o(296540),i=o(474848);const r=n.forwardRef((function(e,t){const n=(0,o(401497).IS)((t=>({base:{color:e.isBlue?o(100622).Ay.blue:t.text.secondary},buttonMenuItem:{...e.style,...e.disabled?{cursor:"not-allowed"}:{}}})),[e.disabled,e.isBlue,e.style]),{color:r}=n.base;return(0,i.jsx)(o(760217).A,{ref:t,...e,title:(0,i.jsx)("div",{style:{color:r,fill:r},children:e.title}),icon:(0,i.jsx)(o(8980).I,{icon:o(617668).plusIcon,style:{fill:r}}),style:n.buttonMenuItem})}))},316091:(e,t,o)=>{o.r(t),o.d(t,{default:()=>F,getIconStyle:()=>K});o(944114),o(898992),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(401497),s=()=>o(799954),l=()=>o(30626),c=()=>o(356596),d=()=>o(383286),p=()=>o(654601),u=()=>o(919709),m=()=>o(959013),g=()=>o(496603),f=()=>o(160568),y=()=>o(313209),v=()=>o(413677),h=()=>o(33301),S=()=>o(261374),C=()=>o(751156),b=()=>o(178658),k=()=>o(459240),w=()=>o(601734),x=()=>o(549500),M=()=>o(862835),P=()=>o(964345),_=()=>o(921855),A=()=>o(68465),I=()=>o(640653),T=()=>o(645873),V=()=>o(351360),B=()=>o(24157),E=()=>o(611371),R=()=>o(331542),D=()=>o(939740),j=()=>o(532731),H=()=>o(286611),L=o(474848);const N=(0,m().YK)({genericHelpMeWriteNewPage:{defaultMessage:"Write “{filter}” with AI…",id:"id.completions.genericHelpMeWriteNewPage"},genericHelpMeWriteNewPageEmpty:{defaultMessage:"Start writing with AI…",id:"id.completions.genericHelpMeWriteNewPageEmpty"},dictate:{defaultMessage:"Dictate",id:"id.dictate.dictateIntoNewPage"}});function W(e){let{menuListStore:t,sectionTitleStyle:o,handleTemplatePickerEmptyEnter:n,sectionsBeforeMobilePreviewSections:a,renderMobileTemplatePreviewItem:s}=e;const l=(0,r().K8)((()=>{var e;return null===(e=V().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()}),[]),c=(0,r().K8)((()=>(0,I().p3)().function),[]),d=(0,i().v3)(),p=(0,T().fJ)(w().Aw),u=(0,r().K8)((()=>{if(!p.value)return[];return p.value.templatePickerItems.getMobilePreviewTemplates({userPersona:c,subscriptionTier:l,environment:d}).map((e=>{let{category:t,sectionHeaderMessage:n,templates:i}=e;return{key:t,render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:o,children:(0,L.jsx)(m().sA,{...n})}),e.children]},e.key),items:i.map(s)}}))}),[p.value,c,l,d,s,o]),g="pending"===p.status?(0,L.jsx)("div",{style:{marginTop:o.marginTop,marginBottom:o.marginBottom,paddingLeft:10},children:(0,L.jsx)(R().A,{})}):void 0;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(D().Ay,{type:D().Oh.Vertical,store:t,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,onEmptyEnter:n,sections:[...a,...u]}),g]})}const F=function(e){let{store:t,menuListStore:n}=e;const a=(0,i().v3)(),s=(0,i().Y0)();(0,o(852507).l)((()=>{n.reset()}));const l=(0,r().K8)((()=>o(411671).A.getMode(a,t)),[a,t]),c=(0,r().O$)(o(227440).e),d=(0,r().K8)((()=>function(e){return Boolean(e.getAssociatedCollectionStore())}(t)),[t]),p=(0,r().K8)((()=>t.getAssociatedCollectionStore()),[t]),m=(0,r().K8)((()=>p?p.getParentBlockStore():void 0),[p]),g=(0,r().K8)((()=>p?p.getTemplatePageStores():void 0),[p]),f=(0,r().K8)((()=>function(e){return e.isTemplate()}(t)),[t]),v=(0,r().K8)((()=>{const e=t.getAssociatedCollectionStore(),n=e&&e.getParentBlockStore();return(0,o(33791).v)({collectionStore:e,collectionViewBlockStore:n,checkNavigableAncestorLocked:!0})}),[t]),S=(0,r().K8)((()=>Boolean(null==m?void 0:m.isNonEditableState())),[m]);return c?(0,L.jsxs)("div",{children:[!d&&!s.isMobile&&(0,L.jsx)(Y,{store:t,menuListStore:n,publicEditMode:l}),!d&&s.isTablet&&(0,L.jsx)(J,{store:t,menuListStore:n,publicEditMode:l}),d&&!f&&p&&m&&g&&g.length>0&&(0,L.jsx)(o(975318).D,{isOverlay:!1,collectionStore:p,canConfigureCollection:v,onTemplateClick:e=>function(e,t,o){C().createAndCommit({userAction:"TemplatePicker.handleCollectionTemplateClick",environment:o,canUndo:!0,perform:n=>{const i=t.getTitleValue();y().n5({title:""!==u().q4_(i)?{text:i}:"template",environment:o,store:t,templateStore:e.templateStore,isKeyboard:e.isKeyboard,isCreateIn:!1,transaction:n,from:"template_picker"})}})}(e,t,a),onEmptyEnter:()=>U(a),onEmptyPageClick:()=>function(e,t){C().createAndCommit({userAction:"TemplatePicker.handleTemplateEmptyPageClick",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:e,transaction:o})}})}(t,a),locked:S})]}):null};function O(e,t){const{device:o}=e;return{...s().nE,marginTop:16,marginBottom:4,letterSpacing:0,fontSize:o.isMobile?12:13,color:t.text.tertiary,display:"flex",alignItems:"center",fontWeight:500}}function K(e,t){return e.isLargeDatabaseIcon?{width:16,fill:t.lightIconColor,marginLeft:2,marginRight:12}:{width:20,fill:t.lightIconColor,marginRight:10}}function U(e){const t=B().default.state;(0,E().EF)(e)&&"editing"===t.mode&&(C().createAndCommit({userAction:"TemplatePicker.handleTemplatePickerEmptyEnter",environment:e,canUndo:!0,perform:o=>{S().Ve({environment:e,editorMode:"default",transaction:o,multiSelection:t.multiSelection})}}),f().ki(e,{is_keyboard:!0,from:"template_picker",template_type:"empty_page"}))}function z(e,t,o,n){return!!e.device.isMobile&&((0,A().ZE)(n)&&t.focused&&(0,c().K)({width:14,marginRight:6,fill:o.lightIconColor}))}function Z(e,t,o,i,r){return{key:e.name,render:i=>{var a;let{ref:s,...l}=i;return(0,n.createElement)(H().J,{...l,key:e.name,format:"page-menu-item",title:e.name,type:e.type,icon:null===(a=e.iconFn)||void 0===a?void 0:a.call(e,K(e,o)),locked:!1,right:z(t,l,o,r)})},action:o=>{(0,E().EF)(t)&&(f().ki(t,{is_keyboard:"keydown"===o.event.type,from:"template_picker",template_type:e.type}),e.onClick(t,i))}}}function J(e){let{store:t,menuListStore:o,publicEditMode:r}=e;const s=(0,a().DP)(),l=(0,i().v3)(),c=(0,n.useCallback)((e=>Z(e,l,s,t,r)),[l,s,t,r]),d=[{key:"Basic",render:e=>(0,L.jsx)("div",{children:e.children},e.key),items:j().dB.map(c)},{key:"Database",render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:O(l,s),children:(0,L.jsx)(m().sA,{defaultMessage:"Database",id:"templatePicker.mobileTemplatePicker.databaseTemplateSection.label"})}),e.children]},e.key),items:k()._.filter((e=>e.shouldShow(l))).map(c)}];return(0,L.jsx)(W,{menuListStore:o,sectionTitleStyle:O(l,s),handleTemplatePickerEmptyEnter:()=>U(l),sectionsBeforeMobilePreviewSections:d,renderMobileTemplatePreviewItem:e=>function(e,t){return{key:e.name,render:t=>{let{ref:o,...i}=t;return(0,n.createElement)(H().J,{...i,key:e.name,title:e.name,type:"page_template",format:"page-menu-item",locked:!1})},action:()=>{v().openWithItem({environment:t,item:e,createNewPage:!1,isPrivate:!1,disablePointerEvents:!1})}}}(e,l)})}function $(e,t,o,i,r,a,s){const c=(0,j().F1)(k()._,["table"]),d=g().FF(k()._,...c),p=!a&&d.length>0?function(e,t,o,i,r){return{key:e,render:o=>{let{ref:a,...s}=o;return(0,n.createElement)(H().J,{...s,key:e,format:"page-menu-item",title:(0,L.jsx)(m().sA,{defaultMessage:"More",id:"templatePicker.more.label"}),type:"more",icon:(0,l()._)({width:20,fill:i.lightIconColor,marginRight:10}),locked:!1,right:z(t,s,i,r)})},action:()=>o(!0)}}("moreNew",t,s,o,r):null,u=[j().zD,e?j().Wt:j().vP,...c,...p?[]:d].filter((e=>e.shouldShow(t))).map((e=>Z(e,t,o,i,r)));return p?u.concat(p):u}function Y(e){let{store:t,menuListStore:o,publicEditMode:s}=e;const l=(0,m().tz)(),c=(0,a().DP)(),u=(0,i().v3)(),g=(0,r().K8)((()=>P().gZ.state&&P().Di.state===t.id),[t]),[f,y]=(0,n.useState)(!1),v=(0,r().K8)((()=>(0,A().ZE)(s)),[s]),S=(0,r().K8)((()=>(0,M().h)()),[]),k=(0,r().K8)((()=>0===t.getContentLength()),[t])?[Z(j().wL,u,c,t,s)]:[],w=$(v,u,c,t,s,f,y),I=(0,r().K8)((()=>t.getTitleValue()),[t]),T=[];if(v){const e=function(e,t,o,i,r,a){return{key:"ask ai",render:r=>{let{ref:s,...l}=r;const c=e.replace(/(\r\n|\n|\r)/gm," "),d=c.length>30?`${c.slice(0,30)}…`:c;return(0,n.createElement)(H().J,{...l,key:"genericHelpMeWriteNewPageWithAI",format:"page-menu-item",title:c?i.formatMessage(N.genericHelpMeWriteNewPage,{filter:d}):i.formatMessage(N.genericHelpMeWriteNewPageEmpty),type:"ai",icon:(0,L.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,p().X)({width:16,height:16,fill:"dark"===o.mode?o.accentColors.purple[700]:o.accentColors.purple[400]})}),locked:!1,right:z(t,l,o,a)})},action:()=>{C().createAndCommit({userAction:"TemplatePicker.genericHelpMeWriteNewPageWithAI",environment:t,canUndo:!0,perform:o=>{h().n({environment:t,store:r,transaction:o,preventTextSelection:!1,onTextSelection(){(0,b().openHelpMeWriteGenericPopup)({environment:t,title:e})}})}})}}}((0,_().r4)(I,t).trim(),u,c,l,t,s);T.push(e)}if(S){const e=function(e,t,o,i,r){return{key:"dictate",render:i=>{let{ref:a,...s}=i;return(0,n.createElement)(H().J,{...s,key:"dictateNewPage",format:"page-menu-item",title:o.formatMessage(N.dictate),type:"dictation",icon:(0,L.jsx)("div",{style:{height:24,width:24,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",marginRight:4},children:(0,d().E)({width:16,height:16,fill:"dark"===t.mode?t.accentColors.red[700]:t.accentColors.red[400]})}),locked:!1,right:z(e,s,t,r)})},action:async()=>{const{dictationActions:t}=await x().$O.load();t.startDictation({environment:e,blockStore:i,from:"template_picker",includeSystemAudio:!1})}}}(u,c,l,t,s);T.push(e)}return g?null:(0,L.jsx)(D().Ay,{type:D().Oh.Horizontal,store:o,disableInitialScroll:!0,disableCommandEnter:!0,isEnterOnHoverEmpty:!0,initialFocus:void 0,disableKeyboard:!0,onEmptyEnter:()=>U(u),sections:[{key:"Basic",render:e=>(0,L.jsx)("div",{children:e.children},e.key),items:[...k,...T]},{key:"Add new",render:e=>(0,L.jsxs)("div",{children:[(0,L.jsx)("div",{style:O(u,c),children:(0,L.jsx)(m().sA,{defaultMessage:"Add new",id:"templatePicker.add new.label"})}),e.children]},e.key),items:w}]})}},381138:(e,t,o)=>{o.d(t,{q:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("search",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M.281 6.438c0-.875.164-1.696.492-2.461a6.484 6.484 0 011.375-2.032A6.237 6.237 0 016.64.078 6.2 6.2 0 019.11.57c.77.328 1.447.787 2.03 1.375a6.374 6.374 0 011.368 2.032c.333.765.5 1.586.5 2.46 0 .688-.107 1.342-.32 1.961a6.28 6.28 0 01-.868 1.696l3.563 3.578c.11.104.19.226.242.367.057.14.086.29.086.445 0 .22-.05.417-.149.594a1.122 1.122 0 01-1 .57c-.156 0-.307-.028-.453-.086a1.058 1.058 0 01-.382-.25l-3.586-3.585c-.5.333-1.047.596-1.641.789a6.089 6.089 0 01-1.86.28 6.237 6.237 0 01-2.468-.491 6.4 6.4 0 01-2.024-1.367A6.509 6.509 0 01.773 8.913a6.256 6.256 0 01-.492-2.476zm1.664 0c0 .65.12 1.26.36 1.828a4.775 4.775 0 001.015 1.5c.433.427.933.763 1.5 1.007a4.548 4.548 0 001.82.368c.652 0 1.261-.123 1.829-.368a4.747 4.747 0 002.508-2.507 4.567 4.567 0 00.367-1.829c0-.645-.123-1.252-.367-1.82a4.776 4.776 0 00-1.016-1.5A4.578 4.578 0 008.469 2.11a4.567 4.567 0 00-1.828-.367c-.646 0-1.253.123-1.82.367a4.667 4.667 0 00-1.5 1.008c-.433.432-.772.932-1.016 1.5a4.633 4.633 0 00-.36 1.82z"})})},383286:(e,t,o)=>{o.d(t,{E:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("microphone",{viewBox:"0 0 17 25",svg:(0,n.jsx)("path",{d:"M0.20752 12.0743C0.20752 13.5496 0.511882 14.853 1.12061 15.9845C1.72933 17.116 2.57438 18.0219 3.65576 18.7023C4.73714 19.3826 5.98324 19.7908 7.39404 19.9269V22.129H3.45166C3.17236 22.129 2.93245 22.2257 2.73193 22.4191C2.53141 22.6196 2.43115 22.8595 2.43115 23.1388C2.43115 23.4109 2.53141 23.6437 2.73193 23.837C2.93245 24.0376 3.17236 24.1378 3.45166 24.1378H13.313C13.5923 24.1378 13.8322 24.0376 14.0327 23.837C14.2332 23.6437 14.3335 23.4109 14.3335 23.1388C14.3335 22.8595 14.2332 22.6196 14.0327 22.4191C13.8322 22.2257 13.5923 22.129 13.313 22.129H9.37061V19.9269C10.7814 19.7908 12.0239 19.3826 13.0981 18.7023C14.1795 18.0219 15.0246 17.116 15.6333 15.9845C16.242 14.853 16.5464 13.5496 16.5464 12.0743V9.94739C16.5464 9.66809 16.4461 9.43176 16.2456 9.2384C16.0522 9.04504 15.8159 8.94836 15.5366 8.94836C15.2573 8.94836 15.0174 9.04504 14.8169 9.2384C14.6164 9.43176 14.5161 9.66809 14.5161 9.94739V11.9991C14.5161 13.2166 14.2583 14.2837 13.7427 15.2003C13.2271 16.1098 12.5109 16.8152 11.5942 17.3165C10.6776 17.8178 9.60693 18.0685 8.38232 18.0685C7.16488 18.0685 6.09424 17.8178 5.17041 17.3165C4.24658 16.8152 3.52686 16.1098 3.01123 15.2003C2.50277 14.2837 2.24854 13.2166 2.24854 11.9991V9.94739C2.24854 9.66809 2.14827 9.43176 1.94775 9.2384C1.74723 9.04504 1.50374 8.94836 1.21729 8.94836C0.94515 8.94836 0.708822 9.04504 0.508301 9.2384C0.30778 9.43176 0.20752 9.66809 0.20752 9.94739V12.0743ZM8.38232 15.8448C9.10563 15.8448 9.75016 15.6766 10.3159 15.34C10.8888 14.9962 11.3364 14.5236 11.6587 13.922C11.9881 13.3204 12.1528 12.6222 12.1528 11.8273V4.59778C12.1528 3.80286 11.9881 3.10461 11.6587 2.50305C11.3364 1.90149 10.8888 1.43241 10.3159 1.09583C9.75016 0.752075 9.10563 0.5802 8.38232 0.5802C7.65902 0.5802 7.0109 0.752075 6.43799 1.09583C5.87223 1.43241 5.42464 1.90149 5.09521 2.50305C4.76579 3.10461 4.60107 3.80286 4.60107 4.59778V11.8273C4.60107 12.6222 4.76579 13.3204 5.09521 13.922C5.42464 14.5236 5.87223 14.9962 6.43799 15.34C7.0109 15.6766 7.65902 15.8448 8.38232 15.8448Z"})})},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>V,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>k,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>y,adjustedStartDateIfPossible:()=>M,areRecurrenceSchedulesEqual:()=>j,convertFromUnpersistedRecurrenceConfig:()=>D,convertToUnpersistedRecurrenceConfig:()=>B,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>I,getNewEndTimestamp:()=>E,getNextDateUtc:()=>A,getRecurrenceAfter:()=>P,isRunningBetweenMidnightAnd3AM:()=>_,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>C,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>x});o(898992),o(354520),o(581454);var n=()=>o(244641);o(944114);function i(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),n=1;n<t;n++)o[n-1]=arguments[n];if(0===o.length)return e.map((e=>[e]));const r=[];for(const a of e)r.push(...i(o[0],...o.slice(1)).map((e=>[a,...e])));return r}var r=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const g=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},y={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},v=99,h=999;function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function C(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function b(e){const{start_date:t,frequency:o,interval:n,weekdays:r,timezone:s,hour:c,minute:d}=e,p="week"===o&&r?r.map((e=>y[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return y[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,l().eU)(t),interval:n,byweekday:p,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const k=1,w=1;function x(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),n=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=n>k,a=o.length>=w;return{violatesConstraint:r||a,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:n,immediateAncestorRecurrenceType:i}}function M(e){var t;const{recurrence:o,afterDate:i}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=i)return o;let r=n().c9.fromMillis(o.start_date,{zone:"utc"});const a=n().c9.fromMillis(i,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(r,"years").years/o.interval);r=r.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(r,"months").months/o.interval);r=r.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(r,"weeks").weeks/o.interval);r=r.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(r,"days").days/o.interval);r=r.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(r.toMillis())}}function P(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(M({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function _(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return b(e).after((0,l().eU)((0,l().Rz)()))||void 0}function I(e){const{recurrence:t,intl:o}=e,i=A(D(t));if(!i)return;const r=_(t),a=n().c9.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(r)return o.formatMessage(g.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(n().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(g.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(g.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:n().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(g.noEndCondition)}const V=100;function B(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function E(e,t,o){return e.plus(o-t)}function R(e,t){const o=n().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function D(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?R(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function j(e,t){const o=r().fN(e,(e=>void 0!==e)),n=r().fN(t,(e=>void 0!==e));return r().n4(o,n)}},398842:(e,t,o)=>{o.d(t,{Jv:()=>h,Zr:()=>S,Rl:()=>C,mA:()=>v});var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(401497),s=()=>o(970013),l=()=>o(743176),c=()=>o(68465),d=()=>o(159588),p=()=>o(963589),u=()=>o(331542),m=o(474848);function g(){const e=(0,a().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(u().A,{legacySize:14})})}var f=()=>o(399275);const y=function(){return(0,m.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const v=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:r,hideName:s,badge:l,style:c,iconStyle:p,iconSize:u,dragHandleStyle:g,className:f,labelSizeVariant:y}=e,v=(0,i().v3)(),{device:h}=v,S=h.isMobile?16:14,b=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:S,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===y||r?4:6,...p},dragHandle:{gridColumn:1,gridRow:1,opacity:r?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:r?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[S,s,p,y,r,c]);return(0,m.jsxs)("div",{className:f,style:b.container,children:[n&&(0,m.jsxs)("div",{style:b.iconWrapper,children:[(0,m.jsx)("div",{style:b.itemIcon,children:(0,m.jsx)(C,{propertySchema:t,iconSize:u,iconStyle:p})}),(0,m.jsx)("div",{style:b.dragHandle,children:(0,m.jsx)(o(57232).A,{style:g,iconSize:12,iconStyle:b.dragIcon})})]}),!s&&(0,m.jsx)("div",{style:{...o(284371).RC},children:t.name}),l]})}));function h(e){const{propertySchema:t}=e,o=(0,i().v3)();return(0,r().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,m.jsx)(y,{}):null}function S(e){let{propertyId:t,collectionContextStore:o}=e;return(0,r().K8)((()=>{var e;const n=null===(e=o.collectionStore())||void 0===e?void 0:e.id;if(!n)return!1;const i=f().d.state.collectionsProperties[n];return!!i&&"Loading"===i[t]}),[o,t])?(0,m.jsx)(g,{}):null}function C(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,{isMobile:r}=(0,i().Y0)(),s=(0,a().DP)(),c=(0,p().X)("nds_default_property_noticon"),d=r?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||d,theme:s,style:n,isDefaultNoticonEnabled:c})}},399275:(e,t,o)=>{o.d(t,{d:()=>i});o(898992),o(354520);class n extends(()=>o(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],n=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const n=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(n).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}}const i=new n;(0,o(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",i)},401040:(e,t,o)=>{o.d(t,{RH:()=>g,gu:()=>f,oW:()=>m,rs:()=>y});var n=()=>o(496603),i=()=>o(534177),r=()=>o(286088),a=()=>o(102586),s=()=>o(301421),l=()=>o(630116),c=()=>o(502438),d=()=>o(24157),p=()=>o(972435),u=()=>o(969197);function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p().A.getIntl();if("helpMeEdit"===e.key||"helpMeDraft"===e.key||"helpMeWrite"===e.key){var o;const n=null===(o=e.steps)||void 0===o?void 0:o[0],i="text"===(null==n?void 0:n.type)&&n.prefilledValue;return i?t.formatMessage({id:"completionPopup.prefilledValue",defaultMessage:"Write about {prefilledValue} "},{prefilledValue:i}):""}if(!(0,a().US)(e.key))return"";switch(e.key){case"brainstormIdeas":return t.formatMessage({id:"completionPopup.brainStorm.prefilledValue",defaultMessage:"Brainstorm ideas on "});case"blogPost":return t.formatMessage({id:"completionPopup.blogPost.prefilledValue",defaultMessage:"Write a blog post about "});case"outline":return t.formatMessage({id:"completionPopup.outline.prefilledValue",defaultMessage:"Write an outline about "});case"socialMediaPost":return t.formatMessage({id:"completionPopup.socialMediaPost.prefilledValue",defaultMessage:"Write a social media post about "});case"pressRelease":return t.formatMessage({id:"completionPopup.pressRelease.prefilledValue",defaultMessage:"Write a press release about "});case"creativeStory":return t.formatMessage({id:"completionPopup.creativeStory.prefilledValue",defaultMessage:"Write a creative story about "});case"essay":return t.formatMessage({id:"completionPopup.essay.prefilledValue",defaultMessage:"Write an essay about "});case"poem":return t.formatMessage({id:"completionPopup.poem.prefilledValue",defaultMessage:"Write a poem about "});case"todoList":return t.formatMessage({id:"completionPopup.todoList.prefilledValue",defaultMessage:"Write a todo list about "});case"meetingAgenda":return t.formatMessage({id:"completionPopup.meetingAgenda.prefilledValue",defaultMessage:"Write a meeting agenda about "});case"prosConsList":return t.formatMessage({id:"completionPopup.prosConsList.prefilledValue",defaultMessage:"Write a pros and cons list about "});case"jobDescription":return t.formatMessage({id:"completionPopup.jobDescription.prefilledValue",defaultMessage:"Write a job description about "});case"salesEmail":return t.formatMessage({id:"completionPopup.salesEmail.prefilledValue",defaultMessage:"Write a sales email about "});case"recruitingEmail":return t.formatMessage({id:"completionPopup.recruitingEmail.prefilledValue",defaultMessage:"Write a recruiting email about "});default:(0,i().HB)(e.key)}}function g(){const{stores:e}=c().default.state,t=e[0],o=n().HV(e),i=t?t.getRecordStoreUIRoot():void 0;if(i&&i instanceof l().Bv&&o){return{type:"blockSelection",stores:e,currentPage:i,origin:o,scrollerStore:(0,r().K3)(i)}}}function f(){const e=d().default.state;if("editing"!==e.mode)return;const t=e.multiSelection,o=t.start.store,n=o.getRecordStoreUIRoot(),i=s().n.findNodeFromStore(o),a=(0,u().T)(o),c=null==a?void 0:a.getRecordStoreUIParent(),p=(0,r().K3)(n),m=a&&a instanceof l().Bv&&a!==n?a:void 0,g=m??i;if(!(n&&n instanceof l().Bv&&g))return;return{type:"cursor",textSelection:t,currentPage:n,currentBlock:m,origin:g,currentParent:c,scrollerStore:p,isPageTitle:n.id===o.id}}function y(){const{stores:e}=c().default.state,t=d().default.state,o="empty"!==t.mode?t.multiSelection:void 0,n="empty"!==t.mode?t.multiSelection.start.store:void 0;let i=n?n.getRecordStoreUIRoot():void 0;if(!(i instanceof l().Bv)){let e,t=null==n?void 0:n.getRecordStoreUIParent();for(;null!=t;)t instanceof l().Bv&&(e=t),t=t.getRecordStoreUIParent();e&&(i=e)}if(o&&i&&i instanceof l().Bv){const t=(0,u().T)(o.end.store),n=null==t?void 0:t.getRecordStoreUIParent(),a=(0,r().K3)(i);if(t&&n){return{type:"textSelection",stores:e,textSelection:o,currentPage:i,origin:t,endBlock:t,endBlockParent:n,scrollerStore:a}}}}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,questionMarkCircleIcon:()=>r});o(296540);var n=o(474848);const i={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,n.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,o(340498).wt)("questionMarkCircle",i)},413677:(e,t,o)=>{o.r(t),o.d(t,{accept:()=>O,close:()=>F,createTemplateInstance:()=>U,loadAndDuplicatePageTemplate:()=>K,openWithItem:()=>N,previewItem:()=>W,setTemplateVisited:()=>z});o(16280);var n=()=>o(584262),i=()=>o(857639),r=()=>o(763884),a=()=>o(386164),s=()=>o(388821),l=()=>o(179034),c=()=>o(665344),d=()=>o(94830),p=()=>o(973647),u=()=>o(449506),m=()=>o(857783),g=()=>o(183324),f=()=>o(59110),y=()=>o(34542),v=()=>o(989423),h=()=>o(972435),S=()=>o(108944),C=()=>o(443002),b=()=>o(174723),k=()=>o(362749),w=()=>o(869562),x=()=>o(351360),M=()=>o(508496),P=()=>o(75368),_=()=>o(714818),A=()=>o(630116),I=()=>o(160568),T=()=>o(394893),V=()=>o(246826),B=()=>o(666144),E=()=>o(778417),R=()=>o(185544),D=()=>o(751156),j=()=>o(345913);const H="LastViewedTemplateId",L=(0,o(959013).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function N(e){const{environment:t,item:o,createNewPage:n,isPrivate:i,disablePointerEvents:a,isCheckout:s=!1}=e;E().IU({environment:t}),_().A.setState({open:!0,item:o,createNewPage:n,isPrivate:i,isLoading:!1,disablePointerEvents:a,isCheckout:s}),r().K.set({userId:t.currentUser.id,key:H,value:o.rootId}),I().oO(t,{template_id:(0,b().dY)(o),from:n?"sidebar":"newPage"})}function W(e){let{templateItem:t,currentUserId:o}=e;const n=_().A.state.item;_().A.setState({..._().A.state,item:t}),n!==t&&r().K.set({userId:o,key:H,value:t.rootId})}function F(e){_().A.setState({item:_().A.state.item,open:!1}),E().IU({environment:e})}async function O(e){const{acceptFrom:t,item:o,environment:i,spaceStore:r,initializeStore:a,...s}=e;_().A.state.open&&_().A.setState({..._().A.state,isLoading:!0}),M().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&P().A.state.open&&P().A.setState({open:!1});const l=a?{...{...s,item:o,environment:i,spaceStore:r},initializeStore:a,type:"inExistingStore",useMinimalTemplates:!1}:{...{...s,item:o,environment:i,spaceStore:r},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let c=!1;const d=Date.now();let p;try{var u;p=await U(l),c=!0;const e=null===(u=x().default.state.mainEditorCurrentBlockStore)||void 0===u?void 0:u.id;!p||e&&e===p.id||m().uK({environment:i,store:p,pageVisitSource:n().y8.Create,showMoveTo:!0}),F(i),i.device.isMobile&&(w().close(),P().A.setState({open:!1}))}finally{var g;const n=Date.now()-d,a=e.initializeStore?S().Uo(e.initializeStore):void 0,s=e.initializeStore?!a:e.isPrivate;I().BX(i,{destination:s?"private":"team",template_block_id:o.rootId,template_duplication_duration_ms:n,team_id:null==a?void 0:a.id,created_page_id:null===(g=p)||void 0===g?void 0:g.id}),I().hB(i,{from:"mobileApp",success:c,context:t,template_block_id:o.rootId,target_space_id:r.id,template_duplication_duration_ms:n,public_template_name:o.name,template_id:o.id})}}async function K(e){const{environment:t,initializeStore:o,item:n,isPrivate:i,useMinimalTemplates:r,spaceStore:l,spaceViewStore:c}=e,d=r?n.rootId:n.previewRootId,p=await u().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:d,spaceId:n.spaceId},shallow:!1},headers:(0,a().WS)({spaceId:n.spaceId})});let m;"success"===p.type&&(m=s().RecordMapWithRole.create(p.data.subtreeRecordMap));const y="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:S}=D().createAndCommit({userAction:y,environment:t,canUndo:!0,perform:e=>{const n=o||R().IT({environment:t,spaceStore:l,spaceViewStore:c,isPrivate:i,loading:!0,transaction:e});B()._O({environment:t,inMemoryRecordCache:n.inMemoryRecordCache,recordMap:m,debugSource:y});const r=(0,f().loadLocalSubtree)(t,{blockId:d,inMemoryRecordCache:n.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}).recordMap;if(!r)throw new Error(h().A.getIntl().formatMessage(L.clientCopyError));return g().localDuplicate({environment:t,sourceBlockId:d,targetBlockPointer:n.pointer,sourceBlockSubtree:r,targetInMemoryRecordCache:n.inMemoryRecordCache,transaction:e,options:{deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}}),n}}),C=S.getCollectionPointer();return(0,v().u4)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[S.id],template_label:n.name,collection_ids:C?[C.id]:[]}}}),S}async function U(e){var t;const{environment:o,item:n,useRecordCache:r,useMinimalTemplates:a,spaceStore:s,isOnboarding:m,from:g,type:f,initializeStore:v,teamStore:h,onSuccess:S,onError:b,isEmailShared:w}=e,P=r&&!a?n.previewRootId:n.rootId,_={id:P,table:l().ev,spaceId:n.spaceId},I=m?"onboarding":null!==(t=n.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?"mobile_app":"homepage_team"===g?"team_home":void 0,V=await(0,y().oC)(o,P),B=I?{context:"",source:I,isListedTemplate:Boolean(V),isFirstPartyPaidTemplate:void 0!==V&&(0,d().Z1)(V),isEmailShared:w}:void 0;let E=!1,H=s;const L=new(A().Bv)(o,{table:l().ev,id:_.id,spaceId:_.spaceId});if("inExistingStore"===f&&v){if(H=v,v.isEmptyPage()){const e=v.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(E=!0,H=e)}}else"inTeam"===f&&h&&(H=h);const N=M().default.checkGate({gateName:"use_initialize_page_template_api_onboarding"}),W=M().default.checkGate({gateName:"use_local_duplication_for_onboarding"}),F=M().default.checkGate({gateName:"use_duplicate_block_sync"});if("onboarding"===I&&N){const e=await async function(e){const{environment:t,item:o,spaceStore:n,teamStore:i,type:r,from:a,sourceBlock:s,onSuccess:l,onError:c}=e,d=x().default.state.currentUserRootStore,p=await(0,k().Pl)();if(!d)return;const m=(0,C().H)({spaceStore:n,userId:d.id,environment:t});if(!m)return;const{serverCommitResult:g,performResult:{pageStore:f}}=D().createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,canUndo:!0,perform:e=>{let s;return s="inTeam"===r&&i&&a?p({environment:t,spaceStore:n,spaceViewStore:m,teamStore:i,from:a,loading:!0,appendOrPrepend:"append",transaction:e}):R().IT({environment:t,spaceStore:n,spaceViewStore:m,isPrivate:!0,loading:!0,transaction:e}),z({item:o,spaceViewStore:m,transaction:e}),{pageStore:s}}});await g;const y=await u().callApi({eventName:"initializePageTemplate",environment:t,data:{sourceBlock:s,targetBlock:{id:f.id,table:"block",spaceId:n.id},isOnboarding:!0}});"failed"===y.type?null==c||c(f):null==l||l(f);return f}({environment:o,item:n,spaceStore:s,teamStore:h,type:"inTeam"===f?"inTeam":"inSpace",from:g,sourceBlock:_,onSuccess:S,onError:b});return e}B||i().log({level:"warning",from:"pageTemplateModalActions.createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:n.id,template_block_id:n.rootId,target_space_id:s.id,public_template_name:n.name,isOnboarding:m,from:g,type:f}}});const O=M().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),K=!(0,c().Fe)(null==B?void 0:B.source)&&O||W&&"onboarding"===I,U="onboarding"===I&&F,Z=await T().Jx({environment:o,store:L,newParentStore:H,addCopyName:!1,duplicateOnlyCollectionSchema:!1,unlockPage:!0,templateInstallationMetadata:B,shouldAttemptServerBackedLocalDuplication:K,shouldUseSynchronousDuplicationAPI:U,from:g??(m?"onboarding":void 0)});if(Z){if(p().Q.isSuccess(Z)&&Z.value.length>0){const e=Z.value[0];if(E&&v){const t=v;try{await t.waitUntil((()=>t.isDefined()));const{serverCommitResult:n}=D().createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplateInPlace",environment:o,canUndo:!0,perform:e=>{j().oD({environment:o,blocks:[t],transaction:e,permanentlyDelete:!0})}});return await n,e}catch(J){i().log({level:"error",from:"pageTemplateModalActions.initializePageTemplateInPlace",type:"transactionError",data:{miscDataToConvertToString:{error:J}}})}}return null==S||S(e),e}return null==b||b(),void i().log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{error:Z.error,template_id:n.id,template_block_id:n.rootId,target_space_id:s.id,public_template_name:n.name}}})}}function z(e){const{item:t,transaction:o,spaceViewStore:n}=e;if(n){const e=n.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const i=e.concat([t.rootId]);V().zv({store:n,data:{visited_templates:i},transaction:o})}}}},427636:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=o(474848);const i=function(e){const{botStore:t,avatarSize:i,shouldShowBadge:r,style:a,inline:s}=e,l=(0,o(959013).tz)(),c=(0,o(484714).Y0)(),d=(0,o(847249).K8)((()=>null==t?void 0:t.getDisplayName(l)),[t,l]),{outerStyle:p,avatarWrapStyle:u,badgeStyle:m}=(0,o(401497).IS)((e=>({outerStyle:{display:"flex",alignItems:"center",minWidth:0,...a},avatarWrapStyle:s?{width:"none",minHeight:"none",marginRight:6}:{marginRight:6},badgeStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.legacyDefaultSelectColor,fontSize:c.isMobile?11:9,lineHeight:c.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",marginLeft:8,marginTop:1}})),[a,s,c]);return(0,n.jsxs)("div",{style:p,children:[(0,n.jsx)("div",{style:u,children:(0,n.jsx)(o(256863).A,{botStore:t,size:i})}),(0,n.jsx)("div",{style:{...o(284371).RC},children:d}),r&&(0,n.jsx)("div",{style:m,children:"Bot"})]})}},459240:(e,t,o)=>{o.d(t,{_:()=>d});o(296540);var n=()=>o(340498),i=o(474848);const r=(0,n().wt)("collectionCalendar",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M3.29688 14.4561H12.7031C14.1797 14.4561 14.9453 13.6904 14.9453 12.2344V3.91504C14.9453 2.45215 14.1797 1.69336 12.7031 1.69336H3.29688C1.82031 1.69336 1.05469 2.45215 1.05469 3.91504V12.2344C1.05469 13.6973 1.82031 14.4561 3.29688 14.4561ZM3.27637 13.1162C2.70898 13.1162 2.39453 12.8154 2.39453 12.2207V5.9043C2.39453 5.30273 2.70898 5.00879 3.27637 5.00879H12.71C13.2842 5.00879 13.6055 5.30273 13.6055 5.9043V12.2207C13.6055 12.8154 13.2842 13.1162 12.71 13.1162H3.27637ZM6.68066 7.38086H7.08398C7.33008 7.38086 7.41211 7.30566 7.41211 7.05957V6.66309C7.41211 6.41699 7.33008 6.3418 7.08398 6.3418H6.68066C6.44141 6.3418 6.35938 6.41699 6.35938 6.66309V7.05957C6.35938 7.30566 6.44141 7.38086 6.68066 7.38086ZM8.92285 7.38086H9.31934C9.56543 7.38086 9.64746 7.30566 9.64746 7.05957V6.66309C9.64746 6.41699 9.56543 6.3418 9.31934 6.3418H8.92285C8.67676 6.3418 8.59473 6.41699 8.59473 6.66309V7.05957C8.59473 7.30566 8.67676 7.38086 8.92285 7.38086ZM11.1582 7.38086H11.5547C11.8008 7.38086 11.8828 7.30566 11.8828 7.05957V6.66309C11.8828 6.41699 11.8008 6.3418 11.5547 6.3418H11.1582C10.9121 6.3418 10.8301 6.41699 10.8301 6.66309V7.05957C10.8301 7.30566 10.9121 7.38086 11.1582 7.38086ZM4.44531 9.58203H4.84863C5.09473 9.58203 5.17676 9.50684 5.17676 9.26074V8.86426C5.17676 8.61816 5.09473 8.54297 4.84863 8.54297H4.44531C4.20605 8.54297 4.12402 8.61816 4.12402 8.86426V9.26074C4.12402 9.50684 4.20605 9.58203 4.44531 9.58203ZM6.68066 9.58203H7.08398C7.33008 9.58203 7.41211 9.50684 7.41211 9.26074V8.86426C7.41211 8.61816 7.33008 8.54297 7.08398 8.54297H6.68066C6.44141 8.54297 6.35938 8.61816 6.35938 8.86426V9.26074C6.35938 9.50684 6.44141 9.58203 6.68066 9.58203ZM8.92285 9.58203H9.31934C9.56543 9.58203 9.64746 9.50684 9.64746 9.26074V8.86426C9.64746 8.61816 9.56543 8.54297 9.31934 8.54297H8.92285C8.67676 8.54297 8.59473 8.61816 8.59473 8.86426V9.26074C8.59473 9.50684 8.67676 9.58203 8.92285 9.58203ZM11.1582 9.58203H11.5547C11.8008 9.58203 11.8828 9.50684 11.8828 9.26074V8.86426C11.8828 8.61816 11.8008 8.54297 11.5547 8.54297H11.1582C10.9121 8.54297 10.8301 8.61816 10.8301 8.86426V9.26074C10.8301 9.50684 10.9121 9.58203 11.1582 9.58203ZM4.44531 11.7832H4.84863C5.09473 11.7832 5.17676 11.708 5.17676 11.4619V11.0654C5.17676 10.8193 5.09473 10.7441 4.84863 10.7441H4.44531C4.20605 10.7441 4.12402 10.8193 4.12402 11.0654V11.4619C4.12402 11.708 4.20605 11.7832 4.44531 11.7832ZM6.68066 11.7832H7.08398C7.33008 11.7832 7.41211 11.708 7.41211 11.4619V11.0654C7.41211 10.8193 7.33008 10.7441 7.08398 10.7441H6.68066C6.44141 10.7441 6.35938 10.8193 6.35938 11.0654V11.4619C6.35938 11.708 6.44141 11.7832 6.68066 11.7832ZM8.92285 11.7832H9.31934C9.56543 11.7832 9.64746 11.708 9.64746 11.4619V11.0654C9.64746 10.8193 9.56543 10.7441 9.31934 10.7441H8.92285C8.67676 10.7441 8.59473 10.8193 8.59473 11.0654V11.4619C8.59473 11.708 8.67676 11.7832 8.92285 11.7832Z"})}),a=(0,n().wt)("collectionGallery",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.0542 7.75952H5.96973C7.00464 7.75952 7.50562 7.25854 7.50562 6.19727V3.58691C7.50562 2.53223 7.00464 2.03125 5.96973 2.03125H2.0542C1.01929 2.03125 0.518311 2.53223 0.518311 3.58691V6.19727C0.518311 7.25854 1.01929 7.75952 2.0542 7.75952ZM10.0303 7.75952H13.9392C14.9741 7.75952 15.4751 7.25854 15.4751 6.19727V3.58691C15.4751 2.53223 14.9741 2.03125 13.9392 2.03125H10.0303C8.98877 2.03125 8.48779 2.53223 8.48779 3.58691V6.19727C8.48779 7.25854 8.98877 7.75952 10.0303 7.75952ZM2.06079 6.55322C1.83008 6.55322 1.71802 6.44116 1.71802 6.20386V3.58032C1.71802 3.34961 1.83008 3.23755 2.06079 3.23755H5.96313C6.18726 3.23755 6.30591 3.34961 6.30591 3.58032V6.20386C6.30591 6.44116 6.18726 6.55322 5.96313 6.55322H2.06079ZM10.0369 6.55322C9.79956 6.55322 9.69409 6.44116 9.69409 6.20386V3.58032C9.69409 3.34961 9.79956 3.23755 10.0369 3.23755H13.9392C14.1633 3.23755 14.2754 3.34961 14.2754 3.58032V6.20386C14.2754 6.44116 14.1633 6.55322 13.9392 6.55322H10.0369ZM2.0542 14.4634H5.96973C7.00464 14.4634 7.50562 13.969 7.50562 12.9077V10.2974C7.50562 9.24268 7.00464 8.7417 5.96973 8.7417H2.0542C1.01929 8.7417 0.518311 9.24268 0.518311 10.2974V12.9077C0.518311 13.969 1.01929 14.4634 2.0542 14.4634ZM10.0303 14.4634H13.9392C14.9741 14.4634 15.4751 13.969 15.4751 12.9077V10.2974C15.4751 9.24268 14.9741 8.7417 13.9392 8.7417H10.0303C8.98877 8.7417 8.48779 9.24268 8.48779 10.2974V12.9077C8.48779 13.969 8.98877 14.4634 10.0303 14.4634ZM2.06079 13.2637C1.83008 13.2637 1.71802 13.1516 1.71802 12.9143V10.2974C1.71802 10.0601 1.83008 9.94141 2.06079 9.94141H5.96313C6.18726 9.94141 6.30591 10.0601 6.30591 10.2974V12.9143C6.30591 13.1516 6.18726 13.2637 5.96313 13.2637H2.06079ZM10.0369 13.2637C9.79956 13.2637 9.69409 13.1516 9.69409 12.9143V10.2974C9.69409 10.0601 9.79956 9.94141 10.0369 9.94141H13.9392C14.1633 9.94141 14.2754 10.0601 14.2754 10.2974V12.9143C14.2754 13.1516 14.1633 13.2637 13.9392 13.2637H10.0369Z"})});var s=()=>o(972435);const l=(0,o(959013).YK)({table:{defaultMessage:"Table",id:"templatePickerHelpers.databaseTemplateNames.table"},board:{defaultMessage:"Board",id:"templatePickerHelpers.databaseTemplateNames.board"},list:{defaultMessage:"List",id:"templatePickerHelpers.databaseTemplateNames.list"},calendar:{defaultMessage:"Calendar",id:"templatePickerHelpers.databaseTemplateNames.calendar"},gallery:{defaultMessage:"Gallery",id:"templatePickerHelpers.databaseTemplateNames.gallery"},timeline:{defaultMessage:"Timeline",id:"templatePickerHelpers.databaseTemplateNames.timeline"}});function c(e){const{environment:t,store:n,viewType:i}=e;o(751156).createAndCommit({userAction:"templatePickerHelpers.handleClickForViewType",environment:t,canUndo:!0,perform:e=>{(0,o(226916).c)({environment:t,store:n,viewType:i,transaction:e}),o(857783).uK({environment:t,store:n,pageVisitSource:o(584262).y8.LinkInPage});const r=n.getCollectionViewStores()[0];r&&(0,o(493260).F)(r.id,{viewType:i})}})}const d=[{name:s().A.formatMessage(l.table),type:"table",iconFn:o(29118).K,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"table"})},{name:s().A.formatMessage(l.board),type:"board",iconFn:o(34373).k,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"board"})},{name:s().A.formatMessage(l.list),type:"list",iconFn:o(50170).u,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"list"})},{name:s().A.formatMessage(l.timeline),type:"timeline",iconFn:o(880261).v,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"timeline"})},{name:s().A.formatMessage(l.calendar),type:"calendar",iconFn:r,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"calendar"})},{name:s().A.formatMessage(l.gallery),type:"gallery",iconFn:a,isLargeDatabaseIcon:!0,shouldShow:()=>!0,onClick:(e,t)=>c({environment:e,store:t,viewType:"gallery"})}]},465364:(e,t,o)=>{o.d(t,{$N:()=>I,D5:()=>T,GB:()=>P,M9:()=>x,Pt:()=>A,eW:()=>_,jo:()=>V,v7:()=>M});o(944114),o(898992),o(803949),o(581454);var n=()=>o(244641),i=()=>o(787626),r=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),c=()=>o(519831),d=()=>o(496603),p=()=>o(534177),u=()=>o(299709),m=()=>o(317001),g=()=>o(520861),f=()=>o(878060),y=()=>o(44729),v=()=>o(246826),h=()=>o(319975),S=()=>o(519839),C=()=>o(695625),b=()=>o(397248),k=()=>o(630116),w=()=>o(747671);function x(e){const{environment:t,droppedStores:o,duplicate:r,calendarBy:d,transaction:p,collectionContextStore:f,duplicateActions:v}=e,h=n().c9.fromMillis(e.startOfDay);let C=!0;for(const n of o){const t=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(n.getParentTable()===c().Vl||!t){C=!1;break}y().X$({childStore:n,parentStore:t,transaction:p})||(C=!1)}const b=(0,g().T)({environment:t,droppedStores:o,duplicate:r,transaction:p,collectionStore:e.collectionStore,duplicateActions:v});for(const n of b){const o=e.collectionStore?e.collectionStore:(0,S().Dj)({store:n,collectionContextStore:f});if(!o)continue;const r=o.getMappedProperty(d),c=n.getPropertyStore(r),g=(0,i().b)(c.getValue())||s().Ec((0,l().P)()),y=s().kW(g,(0,l().P)()),v=h.toFormat(s().tr);let b;if("date"===y.type||"datetime"===y.type)b={...y,start_date:v};else{const e=s().AA(y,(0,l().P)());if(!e.end)return;const t={...y,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),n=e.end.plus(o).toFormat(s().tr);b={...y,start_date:v,end_date:n}}const k=s().kW(b,a().$K(g)||(0,l().P)());(0,m().j)({environment:t,store:n,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:C}),T({environment:t,type:"dateValue",propertyId:r,store:n,transaction:p,dateValue:k}),(0,u().E)({environment:t,collectionContextStore:f,block_id:n.id,property:r,property_type:"date",from:"calendar"})}}function M(e){const{calendarStore:t,direction:o,targetStore:n}=e;t.setState({...t.state,isDragging:!0,targetStore:n,direction:o,temporaryValue:void 0})}function P(e){const{calendarStore:t,x:o,y:r,calendarBy:c}=e,p=t.state;if(p.isDragging){const e=(0,i().b)(p.targetStore.getPropertyStore(c).getValue());if(!e)return;const u=s().kW(e,(0,l().P)()),m=p.temporaryValue||e,g=s().kW(m,(0,l().P)()),f=[];p.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const y=f.find((e=>{let{store:t}=e;const n=C().T.getRectFromStore(t);return Boolean(n&&b().ux(n,o,r))}));let v;if(y){const e=n().c9.fromMillis(y.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(u){const i=s().AA(u,(0,l().P)());if(p.direction===w().Q.Left)if(n().IX.fromDateTimes(e,t).contains(i.start))v=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=s().AA(e,(0,l().P)());v=!i.end&&t.start>i.start||i.end&&t.start>i.end?g:e}else if(i.end?n().IX.fromDateTimes(e,t).contains(i.end):n().IX.fromDateTimes(e,t).contains(i.start))v=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?g:e}}}if(v&&!d().n4(g,v)){const e=s().kW(v,a().$K(m)||(0,l().P)());t.setState({...p,temporaryValue:e})}}}function _(e){const{environment:t,calendarStore:o,calendarBy:n,transaction:i}=e,r=o.state;r.isDragging&&r.temporaryValue&&(T({type:"dateValue",environment:t,dateValue:r.temporaryValue,propertyId:n,store:r.targetStore,transaction:i}),o.setState({...o.state,isDragging:!1}))}function A(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function I(e){const{environment:t,store:o,collectionStore:i,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,p=a.dateRangeStartStore.state,u=(0,l().P)(),g=a.normalizedQueryStore.state;if(!g||!g.calendar_by)return;const f=(null==i?void 0:i.getMappedProperty(g.calendar_by))??g.calendar_by,y=s().hp(p,c,u),h=y.startOf("month"),S=y.endOf("month"),C=n().c9.now().startOf("day");let b;return b=n().IX.fromDateTimes(h,S).contains(C)?s().p6(C.valueOf(),u):s().p6(s().iB(p,c,u).valueOf(),u),v().zv({store:o.getPropertiesStore(),data:{[f]:r().m5(b)},transaction:d}),(0,m().j)({environment:t,store:o,collectionStore:i,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function T(e){const{environment:t,store:o,propertyId:n,transaction:i}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,p().HB)(e);const c=o.getPropertyValue(n),d=r().m5(a);v().zv({store:o.getPropertiesStore(),data:{[n]:d},transaction:i}),f().O({environment:t,store:o,dateProperty:{id:n,oldValue:c,newValue:d}})}function V(e){const{environment:t,collectionStore:o,calendarBy:n,store:i,insertStores:r,collectionContextStore:a,transaction:s}=e,l=i.getPropertyStore(n).getValue();for(const c of r)(0,m().j)({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(n),value:l,transaction:s});return r.map((e=>k().Bv.createChildStore(o,e.pointer)))}},488887:(e,t,o)=>{function n(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>n})},520861:(e,t,o)=>{o.d(t,{T:()=>i});o(944114),o(898992),o(908872);var n=()=>o(415651);function i(e){const{environment:t,collectionStore:o,duplicate:i,droppedStores:r,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=r.reduce(((e,t)=>(i||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...n().MS({environment:t,droppedStores:c,duplicate:i,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},522094:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{flowId:void 0}}getOrCreateFlowId(){const e=this.state.flowId||o(206267).JW();return this.state.flowId&&this.setState({flowId:e}),e}}const i=new n},527580:(e,t,o)=>{o.d(t,{TK:()=>s,YC:()=>a,ui:()=>r});var n=()=>o(645873);const i={pageVerification:new(n().O2)("pageVerification",(()=>o.e(94891).then(o.bind(o,80826)))),pageVerificationBadge:new(n().O2)("pageVerificationBadge",(()=>Promise.all([o.e(75134),o.e(43380),o.e(96346),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(28866),o.e(6463),o.e(1213),o.e(59794),o.e(75601),o.e(58504),o.e(14590),o.e(41412)]).then(o.bind(o,161901)))),pageVerificationMenuRenderer:new(n().O2)("pageVerificationMenuRenderer",(()=>Promise.all([o.e(75134),o.e(43380),o.e(96346),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(28866),o.e(6463),o.e(1213),o.e(59794),o.e(75601),o.e(58504),o.e(14590),o.e(26207)]).then(o.bind(o,196770))))},r=(0,n()._h)(i.pageVerification,(e=>e.PageAddVerificationButton)),a=(0,n()._h)(i.pageVerificationBadge,(e=>e.PageVerificationBadge)),s=(0,n()._h)(i.pageVerificationMenuRenderer,(e=>e.PageVerificationMenuRenderer))},532731:(e,t,o)=>{o.d(t,{F1:()=>y,KQ:()=>c,Wt:()=>u,dB:()=>f,vP:()=>p,wL:()=>d,zD:()=>m});o(944114),o(898992),o(581454),o(908872);var n=()=>o(959013),i=()=>o(33301),r=()=>o(751156),a=()=>o(972435),s=()=>o(806638),l=()=>o(404141);const c=(0,n().YK)({emptyWithIcon:{defaultMessage:"Empty page with icon",id:"templatePickerHelpers.basicTemplateItems.emptyWithIcon"},empty:{defaultMessage:"Empty page",id:"templatePickerHelpers.basicTemplateItems.empty"},templates:{defaultMessage:"Templates",id:"templatePickerHelpers.basicTemplateItems.templates"},import:{defaultMessage:"Import",id:"templatePickerHelpers.basicTemplateItems.import"}}),d={name:a().A.formatMessage(c.empty),iconFn:o(47966).Y,type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.emptyTemplateItems",environment:e,canUndo:!0,perform:o=>{i().n({environment:e,store:t,transaction:o})}})}},p={name:a().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(948352).M)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},u={name:a().A.formatMessage(c.templates),type:"templates",iconFn:e=>(0,o(926329).b)(e),shouldShow:()=>!0,onClick:e=>{(0,s().P)({environment:e})}},m={name:a().A.formatMessage(c.import),type:"import",iconFn:o(555555).n,shouldShow:()=>!0,onClick:(e,t)=>{const n=o(206267).JW();o(522094).A.setState({flowId:n}),o(559926).kY(e,{from:"new_page",flowId:n}),l().A.setState({...l().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:void 0})}},g=(0,n().YK)({pageWithIcon:{defaultMessage:"Page with icon",id:"templatePickerHelpers.mobileBasicTemplateItems.pageWithIcon"},emptyPage:{defaultMessage:"Empty page",id:"templatePickerHelpers.mobileBasicTemplateItems.emptyPage"}}),f=[{name:a().A.formatMessage(g.pageWithIcon),type:"page_with_icon",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().T({environment:e,store:t,transaction:o})}})}},{name:a().A.formatMessage(g.emptyPage),type:"empty_page",shouldShow:()=>!0,onClick:(e,t)=>{r().createAndCommit({userAction:"templatePickerHelpers.mobileBasicTemplateItems",environment:e,canUndo:!0,perform:o=>{i().n({environment:e,store:t,transaction:o})}})}}];function y(e,t){const o=new Map(e.map((e=>[e.type,e])));return t.reduce(((e,t)=>(o.has(t)&&e.push(o.get(t)),e)),[])}},551619:(e,t,o)=>{o.d(t,{Hy:()=>T,NV:()=>A,O9:()=>B,Rg:()=>V,Sm:()=>R,dK:()=>D,f7:()=>E,l8:()=>j,n$:()=>H,no:()=>L,sx:()=>I});var n=()=>o(484714),i=()=>o(792485),r=()=>o(847249),a=()=>o(700500),s=()=>o(651124),l=()=>o(519831),c=()=>o(620689),d=()=>o(591197),p=()=>o(835066),u=()=>o(964345),m=()=>o(68465),g=()=>o(753199),f=()=>o(504836),y=()=>o(478726),v=()=>o(747100),h=()=>o(963589),S=()=>o(665579),C=()=>o(351360),b=()=>o(525569),k=()=>o(508496),w=()=>o(375447),x=()=>o(66496),M=()=>o(548821),P=()=>o(712505),_=()=>o(302022);function A(e){(0,g().SQ)({event:e,context:g().y$.EditorMouseDown,callback:()=>{}})}function I(e){(0,g().SQ)({event:e,context:g().y$.EditorClick,callback:()=>{}})}function T(e){return(0,r().K8)((()=>Boolean(_().A.state.pageMap[e.id])||x().A.state.pages.has(e.id)),[e.id])}function V(e,t){const o=(0,n().v3)(),a=(0,i().S)(),s=T(e),l=(0,r().K8)((()=>{var o,n;return t===M().Rr.Frame?Boolean(null===(o=C().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===M().Rr.PeekView&&P().default.state.open?Boolean(null===(n=P().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===M().Rr.CollectionPageView||t===M().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=E(e);return(0,r().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),n=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!s&&!c&&(!(0,m().ZE)(n)||"completionPopup"!==b().default.state.type))}),[o.currentUser,c,l,a,s,e])}function B(e,t){const o=(0,n().v3)(),a=(0,i().S)(),{isTablet:s}=(0,n().Y0)(),l=(0,h().X)("tablet_refresh_template_pills_gate");return(0,r().K8)((()=>{if(t===M().Rr.SitePreview)return!1;if(o.device.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=a&&a.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const i=e.getContentStores()[0];if(i&&!i.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const r=u().gZ.state,c=u().Di.state;if(r&&e.id===c)return!1;return!((0,y().L5)(t)?d().VY.state:d().u3.state)}),[o,a,e,t,s,l])}function E(e){return(0,r().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function R(e){return(0,r().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function D(e){return(0,r().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function j(e){return(0,r().K8)((()=>{if(!k().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().IE.CsvImport}),[e])}function H(e){const t=(0,n().v3)(),{device:o,WindowSizeStore:i}=t,a=(0,r().K8)((()=>{const e=i.state.height,n=o.isMobile&&w().A.state.open?e:0;return c().C6(t)+n}),[t,i,o.isMobile]);return(0,r().K8)((()=>"home-phone"===e?S().q3:o.isTablet?380:o.isIOS?Math.max(350,a):o.isMobile?400:"side-peek"===e||"center-peek"===e?v().ln:"home"===e?S().wH:"30vh"),[o,a,e])}function L(e){const t=(0,n().v3)(),o=(0,r().K8)((()=>(0,p().dC)(t,e)),[t,e]);return(0,r().K8)((()=>o&&!e.isFullWidth()?(0,p().Zy)(t,(0,v().cq)(e),(0,v().RX)(e)):0),[t,o,e])}},555555:(e,t,o)=>{o.d(t,{n:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("import",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M13.291 14.5723C13.291 14.1484 12.9902 13.834 12.5732 13.834H8.06836C8.24609 13.8203 8.42383 13.7314 8.56055 13.5947L13.0586 9.08301C13.2158 8.91895 13.291 8.74121 13.291 8.54297C13.291 8.12598 12.9902 7.81836 12.5801 7.81836C12.3682 7.81836 12.1836 7.90039 12.0469 8.03711L10.4951 9.56836L8.69043 11.585L8.75195 10.1084V1.61133C8.75195 1.16016 8.44434 0.852539 8 0.852539C7.5625 0.852539 7.25488 1.16016 7.25488 1.61133V10.1084L7.30957 11.5781L5.50488 9.56836L3.95312 8.03711C3.82324 7.90039 3.63184 7.81836 3.42676 7.81836C3.0166 7.81836 2.70898 8.12598 2.70898 8.54297C2.70898 8.74121 2.78418 8.91895 2.94141 9.08301L7.44629 13.5947C7.58301 13.7314 7.75391 13.8203 7.93848 13.834H3.44043C3.0166 13.834 2.70898 14.1484 2.70898 14.5723C2.70898 14.9893 3.0166 15.3037 3.44043 15.3037H12.5732C12.9902 15.3037 13.291 14.9893 13.291 14.5723Z"})})},556048:(e,t,o)=>{o.d(t,{C8:()=>u,Dz:()=>l,GC:()=>g,GL:()=>f,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>p,uj:()=>a});var n=()=>o(645873);const i={JiraSyncInfoPopup:new(n().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,408453)))),ImproveJiraSyncPopup:new(n().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,484967)))),JiraDCAuthModal:new(n().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,992567)))),ExternalImportAndSyncIndicator:new(n().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,984289)))),JiraSyncedAllProjectsTooltip:new(n().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedAllIssuesTooltip:new(n().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncSourceTooltip:new(n().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020))))},r={JiraSyncTeamSpaceModal:new(n().O2)("JiraSyncTeamSpaceModal",(async()=>o.e(56188).then(o.bind(o,604698))))},a=(0,n()._h)(r.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,n()._h)(i.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,n()._h)(i.JiraDCAuthModal,(e=>e.default)),c=(0,n()._h)(i.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n()._h)(i.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),p=(0,n()._h)(i.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),u=(0,n()._h)(i.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,n()._h)(i.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,n()._h)(i.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n()._h)(i.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(340498).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:24}})},563615:(e,t,o)=>{o.d(t,{$b:()=>d,Nz:()=>l,Q1:()=>a,Vh:()=>p,ZO:()=>c,bl:()=>s,eN:()=>r,oQ:()=>i});var n=()=>o(645873);const i={WorkflowPageBlock:new(n().O2)("WorkflowPageBlock",(async()=>await o.e(87700).then(o.bind(o,885789)))),WorkflowEditorTopbar:new(n().O2)("WorkflowEditorTopbar",(async()=>await Promise.all([o.e(96346),o.e(55373),o.e(36192),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(92143)]).then(o.bind(o,484654)))),WorkflowInPlaceEditor:new(n().O2)("WorkflowInPlaceEditor",(async()=>await Promise.all([o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(67780),o.e(96933),o.e(4253),o.e(9150),o.e(50437)]).then(o.bind(o,742628)))),ChatCollectionView:new(n().O2)("ChatCollectionView",(async()=>await Promise.all([o.e(96346),o.e(55373),o.e(85864),o.e(7114),o.e(45666)]).then(o.bind(o,227519)))),CustomCollectionView:new(n().O2)("CustomCollectionView",(async()=>await Promise.all([o.e(96346),o.e(55373),o.e(36192),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(64165)]).then(o.bind(o,120250)))),WorkflowEditorCollectionViewPage:new(n().O2)("WorkflowEditorCollectionViewPage",(async()=>await Promise.all([o.e(75134),o.e(43380),o.e(96346),o.e(55373),o.e(36192),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(1213),o.e(78846),o.e(43741),o.e(93282),o.e(67780),o.e(16697)]).then(o.bind(o,258651)))),WorkflowContainerEmptyState:new(n().O2)("WorkflowContainerEmptyState",(async()=>await o.e(97891).then(o.bind(o,50512)))),workflowActions:new(n().O2)("workflowActions",(async()=>await Promise.all([o.e(96346),o.e(55373),o.e(36192),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(11097)]).then(o.bind(o,847)))),workflowNavigationActions:new(n().O2)("workflowNavigationActions",(async()=>await o.e(93139).then(o.bind(o,691093)))),workflowNavigationHelpers:new(n().O2)("workflowNavigationHelpers",(async()=>await o.e(92821).then(o.bind(o,564037)))),workflowAdvanced:new(n().O2)("workflowAdvanced",(async()=>await Promise.all([o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(67780),o.e(96933),o.e(4253),o.e(9150)]).then(o.bind(o,140659))))},r=(0,n()._h)(i.WorkflowPageBlock,(e=>e.default)),a=(0,n()._h)(i.ChatCollectionView,(e=>e.ChatCollectionView)),s=(0,n()._h)(i.CustomCollectionView,(e=>e.CustomCollectionView)),l=(0,n()._h)(i.WorkflowEditorTopbar,(e=>e.WorkflowEditorTopbar)),c=(0,n()._h)(i.WorkflowInPlaceEditor,(e=>e.WorkflowInPlaceEditor)),d=(0,n()._h)(i.WorkflowEditorCollectionViewPage,(e=>e.WorkflowEditorCollectionViewPage)),p=(0,n()._h)(i.WorkflowContainerEmptyState,(e=>e.WorkflowContainerEmptyState))},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>r,u3:()=>a});var n=()=>o(496506);class i extends(()=>o(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const r=new i,a=new(n().default)((()=>!1!==r.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().default)((()=>!1!==r.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},603815:(e,t,o)=>{o.d(t,{A$:()=>M,JQ:()=>P,Vn:()=>w,s4:()=>x});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(857639),i=()=>o(585515),r=()=>o(577449),a=()=>o(388821),s=()=>o(179034),l=()=>o(545285),c=()=>o(534177),d=()=>o(449506),p=()=>o(780054),u=()=>o(989423),m=()=>o(870618),g=()=>o(303626),f=()=>o(14307),y=()=>o(245865),v=()=>o(540758),h=()=>o(670631),S=()=>o(508496),C=()=>o(571963),b=()=>o(603815),k=()=>o(108944);async function w(e){const{environment:t,request:o,abortSignal:n,prefetchCacheKey:i,headers:r}=e;return(0,C().updateLoadCachedPageChunkCalledAt)(),f().isConnected()||f().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:i,headers:r}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:i,headers:r})}async function x(e){const{mode:t,environment:o,request:c,isFirstChunk:d,abortSignal:f}=e,y={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:p().A.domainBaseUrl,publicDomainName:p().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await b().A$(o,{id:c.page.id,table:s().ev}),null!=f&&f.aborted))throw new Error("Abort signal received");const S=a().RecordMapWithRole.create(),C=[];let k=!1;const w=new Set,x=await i().T(y,r().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await m().h7({environment:o,pointer:e,abortSignal:f,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=f&&f.aborted)throw new Error("Abort signal received");if(n)return S.setModelAndRole(e,n.model,n.role),n.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!w.has(e.id)&&d){if(void 0===h().A.state.offlinePages)return C.push(e),void(k=!0);if(void 0===h().A.state.offlinePages||!v().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);C.push(e)}})),((e,t,o,n)=>{g().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=n&&n.suppressErrorOnClient&&w.add(t.id)}));if(k&&(await h().A.waitUntil((()=>void 0!==h().A.state.offlinePages)),!v().Bd(c.page.id))){const[e]=C;throw new Error(`Record not found: ${e.table},${e.id}`)}if(C.length>0&&(0,u().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,u().u4)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&n().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:C}})})),null!=f&&f.aborted)throw new Error("Abort signal received");return{recordMap:S.toJson(),cursor:x.cursorValue}}async function M(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),y().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function P(e){if(!S().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let o=0;const n=()=>o>=50,i=e=>{"space"!==(null==e?void 0:e.table)&&(n()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const a of(0,k().E)(e))i(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);i(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(n()||o>=10)break;o++,i(t.getModel(e))}}const r=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(c().O9);return r.length?r:void 0}},617668:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusIcon:()=>i});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},i=(0,o(340498).wt)("plus",n)},646668:(e,t,o)=>{o.d(t,{Rh:()=>f,d7:()=>d,nr:()=>u,rr:()=>m,uo:()=>g,v:()=>p});var n=()=>o(636090),i=()=>o(178492),r=()=>o(148307),a=()=>o(604995),s=()=>o(416504),l=()=>o(972435);const c=(0,o(959013).YK)({aiSummaryName:{id:"feature.ai_summary.name",defaultMessage:"AI summary"},aiSummaryDescription:{id:"feature.ai_summary.description",defaultMessage:"Summarize pages with AI"},aiAutofillName:{id:"feature.ai_autofill.name",defaultMessage:"Custom AI autofill"},aiAutofillDescription:{id:"feature.ai_autofill.description",defaultMessage:"Autofill properties with AI"},aiTranslationName:{id:"feature.ai_translation.name",defaultMessage:"AI translation"},aiTranslationDescription:{id:"feature.ai_translation.description",defaultMessage:"Translate pages with AI"},aiKeywordsName:{id:"feature.ai_keywords.name",defaultMessage:"AI keywords"},aiKeywordsDescription:{id:"feature.ai_keywords.description",defaultMessage:"Extract keywords with AI"}}),d=[{uri:i().Bn.priorityHmlFeature,name:"Priority",dependencies:[{uri:i().Kg.priorityHmlProperty,type:"property",collectionUri:n().iH,name:"Priority",description:"High, medium, or low",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Priority",options:[{id:"priority_low",value:"Low",color:"green"},{id:"priority_medium",value:"Medium",color:"yellow"},{id:"priority_high",value:"High",color:"red"}]}}],collectionUri:n().iH},{uri:i().Bn.progressBarFeature,collectionUri:n().iH,name:"Progress Bar",description:"Visual representation of progress",icon:r().A.images.appPackages.featureStatusSvg,dependencies:[{uri:i().Kg.progressBarCurrentProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Current",propertySchema:{type:"number",name:"Current"}},{uri:i().Kg.progressBarTargetProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Target",propertySchema:{type:"number",name:"Target"}},{uri:i().Kg.progressBarFormulaProperty,type:"property",collectionUri:n().iH,name:"Progress Bar Progress Formula",propertySchema:{type:"formula",name:"Progress bar",formula2:{code:[["‣",[["fpp",{property:i().Kg.progressBarCurrentProperty,collection:{id:n().iH,table:"collection"}}]]],["/"],["‣",[["fpp",{property:i().Kg.progressBarTargetProperty,collection:{id:n().iH,table:"collection"}}]]]],result_type:{type:"number"}},show_as:{type:"bar",color:"green",maxValue:1,showValue:!1},version:"v2"}}]},{uri:i().Bn.ganttChartFeature,collectionUri:n().iH,name:"Gantt Chat",description:"Chart to show progress of a project's tasks over time.",icon:r().A.images.appPackages.featureGanttSvg,dependencies:[{uri:i().Kg.ganttInitiativeProperty,type:"property",collectionUri:n().iH,name:"Initiative",description:"Initiatives associated with a specific project",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"select",name:"Initiative",options:[{id:"initiative_a",value:"Initiative A",color:"purple"},{id:"initiative_b",value:"Initiative B",color:"green"},{id:"initiative_c",value:"Initiative C",color:"blue"}]}},{uri:i().Kg.ganttDueDateProperty,type:"property",collectionUri:n().iH,name:"Due Date",description:"When a project is due.",icon:r().A.images.appPackages.featurePrioritySvg,propertySchema:{type:"date",name:"Due Date"}},{uri:i().Kg.ganttTimelineView,type:"collection_view",collectionUri:n().iH,description:"GANTT chart timeline view of projects",value:{type:"timeline",name:"Timeline",format:{collection_view_icon:"/icons/timeline_gray.svg",timeline_show_table:!0,timeline_table_properties:[{width:171,visible:!0,property:"title"},{width:200,visible:!0,property:i().Kg.ganttInitiativeProperty}],timeline_preference:{zoomLevel:"month",centerTimestamp:(0,a().ln)((0,a().Ec)((0,s().P)()),(0,s().P)())},collection_group_by:{sort:{type:"manual"},type:"multi_select",property:i().Kg.ganttInitiativeProperty,hideEmptyGroups:!0}},query2:{timeline_by:i().Kg.ganttDueDateProperty}},collectionViewBlockUri:n().eh}]}],p=[u(),m(),g(),f()];function u(){return{uri:i().Bn.aiSummaryFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiSummaryName),description:l().A.formatMessage(c.aiSummaryDescription),icon:r().A.images.appPackages.featureAiSummarizeSvg,tooltipImage:{img:r().A.images.tooltips.properties.aiAutofillSummaryPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiSummaryProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiSummaryName),propertySchema:{type:"text",name:l().A.formatMessage(c.aiSummaryName),ai_inference:{type:"summarize",auto_update_on_edit:!0}}}]}}function m(){return{uri:i().Bn.aiCustomAutofillFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiAutofillName),description:l().A.formatMessage(c.aiAutofillDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiCustomAutofillPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiCustomAutofillProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiAutofillName),propertySchema:{name:l().A.formatMessage(c.aiAutofillName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function g(){return{uri:i().Bn.aiTranslationFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiTranslationName),description:l().A.formatMessage(c.aiTranslationDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiTranslationPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiTranslationProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiTranslationName),propertySchema:{name:l().A.formatMessage(c.aiTranslationName),type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:!0}}}]}}function f(){return{uri:i().Bn.aiKeywordsFeature,collectionUri:n().iH,name:l().A.formatMessage(c.aiKeywordsName),description:l().A.formatMessage(c.aiKeywordsDescription),icon:"",tooltipImage:{img:r().A.images.tooltips.properties.aiKeywordsPng,scale:.5},isAi:!0,dependencies:[{uri:i().Kg.aiKeywordsProperty,type:"property",collectionUri:n().iH,name:l().A.formatMessage(c.aiKeywordsName),propertySchema:{type:"multi_select",name:l().A.formatMessage(c.aiKeywordsName),select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}}}]}}},654734:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),i=()=>o(869190),r=()=>o(604995),a=()=>o(416504),s=o(474848);const l=function(e){const t=(0,o(959013).tz)(),l=(0,o(401497).DP)(),p=(0,o(396182).I)(),u=(0,n.useRef)(),m=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const n=r().q8(t,(0,a().P)());if(!n)return;const i=n.valueOf(),s=i-Date.now();s<0||s>o(720665).nD||u.current&&u.current.timestamp===i||(u.current&&clearTimeout(u.current.timer),u.current={timestamp:i,timer:setTimeout((()=>p("DateBox","DateBox/createReminderTimer")),s)})}),[p,e.value]),g=(0,n.useCallback)((()=>{u.current&&(clearTimeout(u.current.timer),u.current=void 0)}),[]);(0,n.useEffect)((()=>{m()}),[m]),(0,n.useEffect)((()=>()=>{g()}),[g]);const{value:f,withComma:y}=e,v=(0,o(847249).K8)((()=>f?(0,i().ZF)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,a().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:o(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const h=r().AA(f,(0,a().P)(),o(662303).locale);let S;if(f.reminder){const e=r().Zs(f,(0,a().P)());S=e?{color:l.errorText}:{color:o(100622).Ay.blue}}const C=(0,s.jsxs)(s.Fragment,{children:[v,f.reminder&&(0,o(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),y?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},children:C}):(0,s.jsx)(o(859428).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(h.start),h.end?` → ${c(h.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},...t,children:C}),placement:e.tooltipPlacement})};function c(e){return(0,i().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},665579:(e,t,o)=>{o.d(t,{$E:()=>_,$L:()=>s,BZ:()=>d,EC:()=>g,EI:()=>C,E_:()=>P,Ed:()=>u,Fq:()=>v,Lu:()=>k,Mk:()=>m,O0:()=>M,UO:()=>A,V$:()=>x,VQ:()=>f,Xx:()=>b,Xy:()=>c,YS:()=>y,_g:()=>S,dd:()=>p,pW:()=>l,q3:()=>a,wH:()=>r});var n=()=>o(496603),i=()=>o(534177);const r=160,a=40,s=24,l=20,c=600,d=270,p=405,u=480,m=500,g=void 0,f=16,y=10,v=8,h=(o(69447).nh,{backdropFilter:"blur(48px)",WebkitBackdropFilter:"blur(48px)"}),S=4;function C(e){return{icon:e.mediumIconColor,text:e.text.secondary}}function b(e){return{width:48,height:48,fill:e.lightIconColor}}function k(e){let{theme:t,isPhone:o}=e;return o?t.personalHomeBackgroundPhone:t.surface.page}const w=1;function x(e){let{isPhone:t,theme:o}=e;return{zIndex:1,position:"relative",display:"flex",flexDirection:"column",borderRadius:12,background:o.home.tile.background,boxShadow:P({isPhone:t,theme:o}),...h}}function M(e){let{mode:t}=e;switch(t){case"dark":return 0;case"light":return w;default:return(0,i().ub)(t),0}}function P(e){let{isPhone:t,theme:o,borderOnly:i}=e;if("dark"===o.mode)return"unset";o.mode;const r=M({mode:o.mode});return(0,n().oE)([i||t?void 0:"0 12px 32px rgba(0, 0, 0, 0.02)",`0 0 0 ${r}px rgba(0, 0, 0, 0.05)`]).join(", ")}function _(e){return{display:"flex",flexDirection:"column",width:"100%",gap:24}}function A(e){const{isPhone:t,theme:o,borderOnly:n}=e;return{unhoveredBoxShadow:P({isPhone:t,theme:o,borderOnly:n}),hoveredBoxShadow:"light"===o.mode?["0 12px 32px rgba(0, 0, 0, 0.03)","0 0 0 1px rgba(0, 0, 0, 0.085)"].join(", "):o.homeShadow.card.hovered}}},697650:(e,t,o)=>{o.d(t,{Qo:()=>a,k9:()=>i,nE:()=>r});var n=()=>o(508496);const i=(0,o(959013).YK)({titlePlaceholder:{defaultMessage:"Untitled",id:"database.source.titlePlaceholder"},newTitlePlaceholder:{defaultMessage:"New database",id:"database.source.newTitlePlaceholder"},actionsButtonAriaLabel:{defaultMessage:"Collection actions",id:"database.source.actionsButtonAriaLabel"}});function r(e){let{intl:t}=e;const o=n().default.checkGate({gateName:"db_ux_chrome"});return t.formatMessage(o?i.newTitlePlaceholder:i.titlePlaceholder)}function a(e){let{collectionStore:t,intl:o}=e;return t.getName()??[[r({intl:o})]]}},725649:(e,t,o)=>{function n(e){return!(!e||"askUserToPick"in e)}function i(e){if(!e||!("askUserToPick"in e))return e}function r(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>i,K$:()=>n,j6:()=>r})},747671:(e,t,o)=>{o.d(t,{Q:()=>n,a:()=>i});let n=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class i extends(()=>o(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},748539:(e,t,o)=>{o.d(t,{f:()=>n});const n=new(o(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await o.e(40198).then(o.bind(o,519737));return e}))},806638:(e,t,o)=>{o.d(t,{P:()=>r});var n=()=>o(427704),i=()=>o(435009);function r(e){const{environment:t}=e;i().oo({environment:t,url:n().JZ.marketplace,redirect:!1})}},835755:(e,t,o)=>{o.d(t,{p:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionDescriptionSmall",{viewBox:"0 0 14 14",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 4.667C6.69049 4.667 6.39366 4.54405 6.17481 4.32519C5.95595 4.10634 5.833 3.80951 5.833 3.5C5.833 3.19049 5.95595 2.89366 6.17481 2.67481C6.39366 2.45595 6.69049 2.333 7 2.333C7.30951 2.333 7.60634 2.45595 7.82519 2.67481C8.04405 2.89366 8.167 3.19049 8.167 3.5C8.167 3.80951 8.04405 4.10634 7.82519 4.32519C7.60634 4.54405 7.30951 4.667 7 4.667V4.667ZM8 11C8 11.2652 7.89464 11.5196 7.70711 11.7071C7.51957 11.8946 7.26522 12 7 12C6.73478 12 6.48043 11.8946 6.29289 11.7071C6.10536 11.5196 6 11.2652 6 11V7C6 6.73478 6.10536 6.48043 6.29289 6.29289C6.48043 6.10536 6.73478 6 7 6C7.26522 6 7.51957 6.10536 7.70711 6.29289C7.89464 6.48043 8 6.73478 8 7V11ZM7 0C5.14348 0 3.36301 0.737498 2.05025 2.05025C0.737498 3.36301 0 5.14348 0 7C0 8.85652 0.737498 10.637 2.05025 11.9497C3.36301 13.2625 5.14348 14 7 14C8.85652 14 10.637 13.2625 11.9497 11.9497C13.2625 10.637 14 8.85652 14 7C14 5.14348 13.2625 3.36301 11.9497 2.05025C10.637 0.737498 8.85652 0 7 0V0Z"})})},848565:(e,t,o)=>{o.d(t,{FB:()=>u,Ql:()=>m,SM:()=>g,Wv:()=>r,Yz:()=>s,ds:()=>i,e4:()=>n,eQ:()=>a,im:()=>c,jw:()=>l,k2:()=>p,uG:()=>d});const n=8,i=10,r=8,a=24,s=6,l=1.5,c=(a-l)/2,d=a+s,p=`calc(100% + ${r+(n-s)-d}px)`,u=a+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},877051:(e,t,o)=>{o.d(t,{V:()=>a});var n=()=>o(847249),i=()=>o(351360),r=()=>o(963589);function a(){const e=(0,r().X)("lazier_dependencies"),t=(0,n().K8)((()=>i().default.state.renderPhase),[]);return e&&"rendered"!==t}},880261:(e,t,o)=>{o.d(t,{v:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("collectionTimeline",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.5964 14.4634H2.39697C0.940186 14.4634 0.162354 13.6987 0.162354 12.2485V4.24609C0.162354 2.7959 0.940186 2.03125 2.39697 2.03125H13.5964C15.0532 2.03125 15.8311 2.80249 15.8311 4.24609V12.2485C15.8311 13.6921 15.0532 14.4634 13.5964 14.4634ZM1.63232 12.0969C1.63232 12.7034 1.94214 12.9934 2.52222 12.9934H13.4712C14.0447 12.9934 14.3611 12.7034 14.3611 12.0969V4.39771C14.3611 3.79126 14.0447 3.50122 13.4712 3.50122H2.52222C1.94214 3.50122 1.63232 3.79126 1.63232 4.39771V12.0969ZM8.92711 6.13826H2.71776C2.44986 6.13826 2.23645 5.91123 2.23645 5.64787C2.23645 5.37997 2.44986 5.15747 2.71776 5.15747H8.92711C9.19955 5.15747 9.40842 5.37542 9.40842 5.64787C9.40842 5.91577 9.19955 6.13826 8.92711 6.13826ZM11.3757 8.49036H4.75992C4.49201 8.49036 4.2786 8.26332 4.2786 7.99996C4.2786 7.73206 4.49201 7.50957 4.75992 7.50957H11.3757C11.6482 7.50957 11.857 7.72752 11.857 7.99996C11.857 8.26332 11.6482 8.49036 11.3757 8.49036ZM13.2822 10.8424H8.24608C7.97818 10.8424 7.76477 10.6109 7.76477 10.352C7.76477 10.0841 7.97818 9.85711 8.24608 9.85711H13.2822C13.5547 9.85711 13.7636 10.0796 13.7636 10.352C13.7636 10.6154 13.5547 10.8424 13.2822 10.8424Z"})})},911706:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(401497),i=()=>o(30626),r=()=>o(704152),a=o(474848);function s(e){let{onClick:t,className:o,isMobile:s,style:l,onFocus:c,onBlur:d,onMouseDown:p,onMouseEnter:u,onMouseLeave:m}=e;const{buttonStyle:g,iconStyle:f}=(0,n().IS)((e=>({buttonStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,borderRadius:6,width:s?45:24,height:s?45:24,marginRight:s?-8:-6,...l},iconStyle:{width:s?18:14,height:s?18:14,fill:e.mediumIconColor}})),[s,l]);return(0,a.jsx)(r().A,{onClick:t,style:g,className:o,mobileFeedback:s,onFocus:c,onBlur:d,onMouseDown:p,onMouseEnter:u,onMouseLeave:m,children:(0,i()._)(f)})}},926329:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},937943:(e,t,o)=>{o.r(t),o.d(t,{applyUntypedFeature:()=>s});var n=()=>o(534177),i=()=>o(896628),r=()=>o(646668),a=()=>o(614537);function s(e){var t;const{environment:o,collectionStore:s,collectionViewBlockStore:l,feature:c,transaction:d}=e,p=c.dependencies,u=(null===(t=l.getFormat())||void 0===t?void 0:t.app_uri_map)??{};for(const m of p)if("property"===m.type)(0,a().Io)({environment:o,collectionStore:s,dependency:m,blockUriMap:u,allFeatures:r().d7,transaction:d});else if("collection_view"===m.type){const e=(0,a().ww)({environment:o,collectionStore:s,collectionViewBlockStore:l,dependency:m,blockUriMap:u,transaction:d});i().zA({stores:[l],update:{app_uri_map:e},transaction:d})}else(0,n().HB)(m)}},948352:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})},951340:(e,t,o)=>{o.d(t,{DC:()=>s,NI:()=>a});o(898992),o(354520),o(581454);var n=()=>o(837384),i=()=>o(255591),r=()=>o(228271);function a(e){let{persona:t,defaultToLife:o}=e;if(!t)return;if(t in i().bJ)return t;const n={customer_support:"support",designer:"design",educator:"student",entrepreneur:"hr",freelancer:"design",hr_recruiting:"hr",it:"eng",marketing_sales:"marketing",media:"marketing",operations:"hr",operations_hr:"hr",personal:"life",product_manager:"product",programmer:"eng",other:o?"life":void 0,unfilled:o?"life":void 0,undefined:o?"life":void 0,creative:"design",founderCeo:"hr",internalCommunication:"hr",productDesign:"design",projectProgramMgmt:"product",finance:void 0,itAdmin:"eng",knowledgeManagement:"hr"};return(null==n?void 0:n[t])??void 0}function s(e,t){const o=a({persona:t,defaultToLife:!0});return(o?null==l?void 0:l[o]:[]).filter((t=>(0,r().vc)(t,e)))}const l={...i().PY,design:[n().kx.designSprint,n().kx.designPortfolio],product:[n().kx.productSpec,n().kx.productWiki,n().kx.visionAndStrategy],marketing:[n().kx.blogEditorialCalendar,n().kx.socialMediaCalendar,n().kx.presentation],hr:[n().kx.companyHome,n().kx.employeeBenefits,n().kx.peopleDirectory],sales:[n().kx.salesWiki,n().kx.presentation,n().kx.oneOnOneNotes],support:[],life:[]}},965072:(e,t,o)=>{o.r(t),o.d(t,{AppInitializationOverlay:()=>L});o(898992),o(354520),o(672577),o(803949),o(581454);var n=o(296540),i=()=>o(662303),r=()=>o(484714),a=()=>o(847249),s=()=>o(401497),l=()=>o(97789),c=()=>o(304740),d=()=>o(982615),p=()=>o(179034),u=()=>o(96689),m=()=>o(854150),g=()=>o(959013),f=()=>o(284371),y=()=>o(989423),v=()=>o(508496);var h=()=>o(413677),S=()=>o(751156),C=()=>o(767435),b=()=>o(925496),k=()=>o(617254),w=()=>o(422651),x=()=>o(313892),M=()=>o(200562),P=()=>o(186445),_=()=>o(644914),A=()=>o(351360),I=()=>o(548821),T=()=>o(630116),V=()=>o(704152),B=()=>o(288722),E=()=>o(594607),R=()=>o(331542),D=()=>o(204063),j=()=>o(299772),H=o(474848);function L(e){var t;const{collectionViewBlockStore:o}=e,L=(0,r().v3)(),{isMobile:N}=(0,r().Y0)(),W=(0,a().K8)((()=>({top:L.WindowSizeStore.getSafePaddingTopPx(0),bottom:L.WindowSizeStore.getSafePaddingBottomPx(64)})),[L.WindowSizeStore]),F=(0,s().IS)((e=>({overlay:{position:"absolute",top:0,left:0,overflow:"visible",height:"100vh",width:"100%",zIndex:999,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:e.surface.wash,borderLeft:`1px solid ${e.lightDividerColor}`},welcome:{maxWidth:375,minWidth:320,maxHeight:"100%",flex:1,display:"flex",flexDirection:"column",alignItems:"stretch",marginLeft:N?void 0:"10%",marginRight:N?void 0:"10%",padding:N?`${W.top}px 16px ${W.bottom}px 16px`:"64px 16px"},welcomeLogo:{height:48,width:48},welcomeTitle:{marginTop:24,color:e.text.primary,fontFamily:f().xf({locale:i().locale}),fontWeight:f().Wy.bold,fontSize:28,flex:0,display:"flex",flexDirection:"row",alignItems:"center"},welcomeSubtitle:{marginTop:6,fontSize:18,color:e.text.secondary,fontWeight:400,flex:0},presets:{marginTop:32,marginBottom:32,gap:12,display:"flex",flexDirection:"column"},presetSelected:{background:"dark"===e.mode?e.popoverBackground:e.buttonBackground,boxShadow:e.outlineBlueInputBoxShadow},presetSelectedCheckmark:{width:24,height:24,color:e.blueButtonBackground,opacity:0,transform:"scale(0.8)",transition:"all 0.2s ease"},presetSelectedCheckmarkShown:{opacity:1,transform:"scale(1)"},preset:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",padding:"16px 14px 16px 16px",background:"dark"===e.mode?e.accentColors.gray[200]:e.buttonBackground,borderRadius:7,boxShadow:e.elevatedButtonBoxShadow,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease"},scroller:{overflow:"auto",padding:4},presetHovered:{background:"dark"===e.mode?e.accentColors.gray[200]:e.accentColors.gray[30]},presetTextContainer:{display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",flex:1},presetIcon:{flexShrink:0,marginTop:2,marginBottom:2,width:20,height:20,marginRight:12},presetTitle:{color:e.text.primary,fontWeight:f().Wy.medium,fontSize:14,marginBottom:1},presetSubtitle:{color:e.text.secondary,fontWeight:f().Wy.regular,fontSize:14},previewContainer:{flex:1,overflow:"auto",height:"70%",borderRadius:"8px 0 0 8px",border:e.lightDividerColor,boxShadow:e.shadowMD,background:e.popoverBackground},previewImage:{width:"100%",height:"100%"},hamburgerButton:{position:"absolute",zIndex:1e3,margin:5}})),[N,W]),[O,K]=n.useState(!1),U=(0,a().O$)(A().AppStoreCurrentSpaceViewStore),z=(0,a().K8)((()=>{const e=o.getFormatStore().getKeyStore("app_config_uri").getValue();if(!e)return;return(0,x().yl)((0,k().appConfigs)(),e)}),[o]),[Z,J]=n.useState(void 0);n.useEffect((()=>{J(o.getFormatStore().getKeyStore("app_template_preset").getValue())}),[o,J]);const $=(0,a().K8)((()=>{var e;return(null==z||null===(e=z.presets)||void 0===e?void 0:e.filter((e=>"core"===e.type)))??[]}),[null==z?void 0:z.presets]),[Y,q]=n.useState(Z);n.useEffect((()=>{q(Z)}),[Z,q]),n.useEffect((()=>{z&&function(e,t){y().vd(e,"app_preset_selection_shown",t),v().default.logEvent("app_preset_selection_shown",t.app_uri,t)}(L,{app_uri:z.uri})}),[z,L]);const G=n.useMemo((()=>null==z?void 0:z.presets.find((e=>e.uri===Z))),[z,Z]),X=n.useMemo((()=>{if(z&&G&&z.uri===l().xc)return(0,w().xh)(G)}),[z,G]),Q=n.useMemo((()=>{if(!z)return;const t={};return z.presets.forEach((o=>{var n;const i=z.uri===l().xc?(0,w().xh)(o):null===(n=o.previews)||void 0===n?void 0:n.find((e=>"previewRootId"in e));i&&(t[o.uri]=T().Bv.createChildStore(e.collectionViewBlockStore,{id:i.previewRootId,table:p().ev,spaceId:i.spaceId}))})),t}),[z,e.collectionViewBlockStore]),ee=(0,a().K8)((()=>{const e=(0,P().F8)(L);return{left:e,right:e,bottom:(0,j().Wj)(L),coverHeight:(0,j().Qs)(L)}}),[L]),te=(0,a().K8)((()=>{var e;const t=null==G||null===(e=G.previews)||void 0===e?void 0:e.find((e=>"url"in e&&!(0,c().L_)(e)));if(t&&"url"in t)return t.url}),[null==G?void 0:G.previews]),oe=(0,r().WS)(),ne=(0,a().K8)((()=>!!L.device.isMobileBrowser||!L.device.isMobileNative&&!(0,_().KB)(L)),[L]);return n.useEffect((()=>{"rendered"!==A().default.state.renderPhase&&A().default.setState({...A().default.state,renderPhase:"rendered"})}),[]),z?(0,H.jsxs)(E().U,{calloutId:"better_template_initialization",children:[ne&&(0,H.jsx)("div",{style:F.hamburgerButton,children:(0,H.jsx)(M().z,{})}),(0,H.jsxs)("div",{style:F.overlay,children:[(0,H.jsxs)("div",{style:F.welcome,children:[(0,H.jsxs)("div",{style:F.scroller,children:[(0,H.jsx)("div",{style:F.welcomeLogo,children:(0,H.jsx)("img",{src:z.logo,style:{height:"100%",width:"100%"}})}),(0,H.jsx)("div",{style:F.welcomeTitle,children:z.welcomeTitle??(0,H.jsx)(g().sA,{id:"apps.AppInitializationOverlay.welcomeTitle.default",defaultMessage:"Welcome to {appName}",values:{appName:z.name}})}),(0,H.jsx)("div",{style:F.welcomeSubtitle,children:z.welcomeSubtitle??""}),(0,H.jsx)("div",{style:F.presets,children:$.map(((e,t)=>{var o;const n=null!==(o=e.icon)&&void 0!==o&&o.startsWith("/")?(0,H.jsx)("img",{src:e.icon,style:{height:"100%",width:"100%"}}):(0,H.jsx)(B().A,{children:e.icon??""});return(0,H.jsxs)(V().A,{style:{height:"auto",...F.preset,...Z===e.uri?F.presetSelected:{}},disabled:O,hoveredStyle:F.presetHovered,onClick:()=>{J(e.uri),function(e,t){y().vd(e,"app_preset_selection",t),v().default.logEvent("app_preset_selection",t.preset_uri,t)}(L,{preset_uri:e.uri})},onMouseEnter:L.device.isMobile?void 0:()=>q(e.uri),onMouseLeave:L.device.isMobile?void 0:()=>q(Z),children:[(0,H.jsx)("div",{style:F.presetIcon,children:n}),(0,H.jsxs)("div",{style:F.presetTextContainer,children:[(0,H.jsx)("div",{style:F.presetTitle,children:e.name}),(0,H.jsx)("div",{style:F.presetSubtitle,children:e.description})]}),(0,H.jsx)("div",{children:(0,d().$)({...F.presetSelectedCheckmark,...Z===e.uri?F.presetSelectedCheckmarkShown:void 0})})]},t)}))})]}),(0,H.jsx)("div",{style:{padding:`0 4px ${L.device.isIOS?"32px":0} 4px`,alignSelf:"stretch"},children:(0,H.jsxs)(D().A,{style:{alignSelf:"stretch",height:36,width:"100%"},disabled:O,onClick:async()=>{if(Z){if(K(!0),X){const{currentSpaceStore:t,currentSpaceViewStore:o}=A().default.state;t&&o&&await h().loadAndDuplicatePageTemplate({environment:L,item:X,isPrivate:!1,spaceStore:t,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:e.collectionViewBlockStore})}else{const t=e.collectionViewBlockStore.getParentStore();!t||t.table!==u().NX&&t.table!==m().yK&&t.table!==p().ev||S().createAndCommit({userAction:"initializeApp",environment:L,canUndo:!0,perform:o=>{if(U){const n=C().initializeApp({environment:L,spaceViewStore:U,appUri:z.uri,presetUri:Z,appParentStore:t,temporaryContainerBlockStore:e.collectionViewBlockStore,transaction:o,from:"app_onboarding"});C().markTasksDatabaseTemplateIfNeeded(n),b().createSprintPage({environment:L,spaceViewStore:U,appParentStore:t,transaction:o,blockStores:n,creationEntryPoint:{type:"preset",presetUri:Z}})}}})}!function(e,t){y().vd(e,"app_preset_accepted",t),v().default.logEvent("app_preset_accepted",t.preset_uri,t)}(L,{preset_uri:Z})}},children:[(0,H.jsx)(g().sA,{id:"apps.AppInitializationOverlay.startButton",defaultMessage:"Get started"}),O&&(0,H.jsx)(R().A,{style:{marginLeft:5},onDarkBackground:!0})]})})]}),!oe&&(0,H.jsx)("div",{style:F.previewContainer,children:Q&&Y&&Q[Y]?(0,H.jsxs)("div",{style:{width:"108%",minWidth:900,height:"auto",minHeight:"100%",position:"relative",paddingTop:X?0:"10%"},children:[(0,H.jsx)("div",{style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:1,zIndex:999}}),(0,H.jsx)(j().Ay,{store:Q[Y],context:I().Rr.InAppTemplatePreview,titleStyle:{fontSize:28},paddingBottom:ee.bottom,disabled:!0},null===(t=Q[Y])||void 0===t?void 0:t.id)]}):(0,H.jsx)("img",{src:te,style:F.previewImage})})]})]}):null}},972911:(e,t,o)=>{o.r(t),o.d(t,{AiOnboardingQueuedSelectedStore:()=>m,advanceAITutorialTooltipsStage:()=>y,getAiOnboardingPhase:()=>g,onSpaceForAiTriggered:()=>f,useUpdateAskAIAnythingOnboardingState:()=>h,useUpdateRefineAIResponseOnboardingState:()=>v});o(16280);var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(591779),s=()=>o(495989),l=()=>o(751156),c=()=>o(755199),d=()=>o(351360),p=()=>o(337567),u=()=>o(576590);const m=o(757695).default.createValue(void 0,{name:"AiOnboardingQueuedSelectedStore"});function g(){const{currentUserSettingsStore:e}=d().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.ai_assistant_tooltips_onboarding_phase??"space_for_ai":void 0}function f(e){"space_for_ai"===g()&&y(e)}function y(e){const t=g();if(void 0===t)throw new Error("Assertion failure, AI onboarding state is undefined!");const o=s().aD.indexOf(t);if(-1===o)throw new Error(`Assertion failure, ${t} is not a valid AI onboarding state!`);if(o<s().aD.length-1){const{currentUserSettingsStore:t}=d().default.state;if(!t)return;const n=s().aD[o+1];l().createAndCommit({userAction:"AiOnboardingActions.advanceAIOnboardingStage",environment:e,canUndo:!0,perform:e=>{c().mJ({userSettingsStore:t,transaction:e,data:{ai_assistant_tooltips_onboarding_phase:n}})},userId:t.id}),"complete"===n&&(0,u().setAssistantOnboardingPhase)(e,{phase:"complete",transactionUserAction:"AiOnboardingActions.advanceAIAssistantOnboardingPhase.fromAiTooltips",userSettingsStore:t})}}function v(e){const t=(0,i().v3)(),o=(0,r().K8)((()=>{const e=(0,p().K1)();return!!e&&e.isStreaming()}),[]),s="completionPopup"===e.type&&"results"===e.stage&&!e.loading,l="assistantCompletionPopup"===e.type&&"results"===e.stage&&!o,c=s||l,d=(0,a().ZC)(c);(0,n.useEffect)((()=>{d&&!c&&"refine_ai_response"===g()&&y(t)}),[c,d,t])}function h(e){const t=(0,i().v3)(),o="results"===e.stage&&e.loading,r=(0,a().ZC)(o);(0,n.useEffect)((()=>{o&&!r&&"ask_ai_anything"===g()&&y(t)}),[o,r,t])}},975318:(e,t,o)=>{o.d(t,{D:()=>w});o(898992),o(823215),o(354520),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(401497),s=()=>o(584262),l=()=>o(959013),c=()=>o(160568),d=()=>o(313209),p=()=>o(751156),u=()=>o(284371),m=o(474848);const g=n.memo((function(e){const{prefix:t,collectionName:o}=e,n=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:u().Wy.medium,color:e.text.secondary,paddingLeft:8,paddingRight:8},databaseTitle:{...u().RC}})),[]);return(0,m.jsxs)("div",{style:n.container,children:[t,(0,m.jsxs)("span",{style:n.databaseTitle,children:[" ",o]})]})}));var f=()=>o(492414),y=()=>o(722872);const v=n.memo((function(e){const t=(0,i().v3)(),r=(0,l().tz)(),s=(0,a().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),c=(0,n.useCallback)((()=>{o(148024).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,m.jsx)(o(187485).A,{href:e.href,external:!0,style:s.link,onClick:c,children:(0,m.jsx)(o(285790).A,{icon:o(406533).questionMarkCircleIcon,style:s.button,iconStyle:s.icon,ariaLabel:r.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var h=()=>o(763996),S=()=>o(419357),C=()=>o(939740),b=()=>o(89924);const k=(0,l().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),w=n.memo((function(e){const{collectionStore:t,isOverlay:s,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,locked:g,onTemplateClick:f}=e,v=(0,i().Y0)(),[h,S]=(0,n.useState)(""),C=(0,r().uB)(void 0,o(970585).A),k=(0,r().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),w=(0,r().K8)((()=>k.every((e=>e.isReady()))),[k]),_=(0,r().K8)((()=>s&&null!=h&&h.length?(0,o(778078).Ay)(h,k,(e=>String(e.getProperties().title)??"")):k),[k,h,s]),A=(0,a().IS)((e=>({container:{fontSize:14,padding:v.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...v.isMobile&&{background:e.contentBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[v.isMobile]);if(!w)return null;if(s){const e=k.length>6,n=v.isMobile?{menuType:y().gu.Modal,title:(0,m.jsx)(l().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,m.jsx)(o(480095).CancelMenuText,{}),onClickLeft:p}:{menuType:y().gu.Popup,width:360};return(0,m.jsxs)(o(928600).A,{...n,header:(0,m.jsx)(x,{collectionStore:t}),children:[0===k.length&&(0,m.jsx)(b().A,{children:(0,m.jsx)("div",{style:A.container,children:(0,m.jsx)(l().sA,{defaultMessage:"Replicate page formats inside this database with templates.",id:"database.emptyTemplatesList.info"})})}),e?(0,m.jsx)(M,{templateInputValue:h,setTemplateInputValue:S}):null,(0,m.jsx)(P,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:g,onTemplateClick:f,menuListStore:C,templateInputValue:h,filteredTemplatePageStores:_,draggable:!(e&&h)})]})}return(0,m.jsx)(P,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:d,onCancelClick:p,canConfigureCollection:u,isOverlay:s,locked:g,onTemplateClick:f,menuListStore:C,templateInputValue:h,filteredTemplatePageStores:_,draggable:!0})})),x=n.memo((function(e){const{collectionStore:t}=e,{isMobile:n}=(0,i().Y0)(),s=(0,l().tz)(),c=(0,r().K8)((()=>(0,o(697650).Qo)({intl:s,collectionStore:t})),[t,s]),d=(0,a().IS)((()=>({container:{marginTop:6}})),[]);return n?null:(0,m.jsx)(o(678553).Ay,{style:d.container,title:(0,m.jsx)(g,{prefix:(0,m.jsx)(l().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:c}),right:(0,m.jsx)(v,{helpButtonContext:"collection_templates_menu",href:(0,o(836251).xS)("guides.databaseTemplates")})})})),M=n.memo((function(e){const{templateInputValue:t,setTemplateInputValue:r}=e,{isMobile:s,isAndroid:c}=(0,i().Y0)(),d=(0,l().tz)(),p=(0,n.useCallback)((e=>r(e.currentTarget.value)),[r]),u=(0,a().IS)((()=>({container:{margin:s?0:"10px 0"},input:{...c&&{borderBottom:"none"}}})),[c,s]);return(0,m.jsx)("div",{style:u.container,children:(0,m.jsx)(S().Ay,{value:t,focusInitial:!s||void 0,placeholder:d.formatMessage(k.filterPlaceholder),showClearButton:!0,inputLeft:(0,m.jsx)(S().Zf,{icon:o(207207).J}),onChange:p,style:u.input})})})),P=n.memo((function(e){const{filteredTemplatePageStores:t,draggable:a,collectionStore:l,onEmptyEnter:u,onEmptyPageClick:g,onCancelClick:y,canConfigureCollection:v,isOverlay:S,locked:k,onTemplateClick:w,menuListStore:x,templateInputValue:M}=e,P=(0,i().v3)(),{isMobile:A}=(0,i().Y0)(),I=(0,n.useContext)(o(175116).p2),T=(0,n.useContext)(o(484792).n),V=(0,r().K8)((()=>(0,o(611371).EF)(P)),[P]),B=(0,n.useCallback)((e=>{x.unsetFocus(),p().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:P,canUndo:!0,perform:t=>d().lU({collectionStore:l,newTemplateIds:e,transaction:t})})}),[P,l,x]),E=(0,n.useCallback)((()=>{var e;V&&(u(),c().ki(P,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:l.id,collection_view_id:null==I||null===(e=I.collectionViewStore())||void 0===e?void 0:e.id}))}),[P,l,u,I,V]),R=(0,n.useCallback)((e=>{V&&(g(e.event),c().ki(P,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,...I&&(0,o(476492).sl)(I)}))}),[V,I,P,g]),D=(0,n.useCallback)((()=>{var e;if(!V)return;const{performResult:t}=p().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:P,canUndo:!0,perform:e=>d().bI({environment:P,collectionStore:l,transaction:e,title:M})});if(t){const{mainEditorCurrentBlockStore:e}=o(351360).default.state,n=e?(0,f().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:s().y8.Create}):(0,f().Ay)({store:t,fullyQualified:!1,pageVisitSource:s().y8.Create});T?T(n):o(435009).oo({environment:P,url:n})}c().er(P,{collection_id:l.id,collection_view_id:null==I||null===(e=I.collectionViewStore())||void 0===e?void 0:e.id}),null==y||y()}),[V,P,l,I,M,y,T]),j=(0,n.useMemo)((()=>({key:"create-template",render:e=>(0,m.jsx)(_,{isOverlay:S,locked:k,menuListItemProps:e}),action:D})),[D,S,k]),H=(0,r().K8)((()=>null==I?void 0:I.defaultPageTemplateStore.state),[I]),L=(0,r().K8)((()=>({key:"empty",render:e=>0===t.length||""!==M?null:(0,m.jsx)(h().K,{collectionStore:l,canConfigureCollection:v,isOverlay:S,templateStore:void 0,isMobile:A,locked:k||!v,draggable:!0,isDefault:void 0===(null==H?void 0:H.id),onCancelClick:y,...e}),action:R})),[v,l,null==H?void 0:H.id,A,R,S,k,y,M,t.length]),N=(0,n.useCallback)((e=>{const t=e.getAutomationStore(),i=null!=t&&t.isActive()?t.getRecurrence():void 0,r=t&&!t.canEdit(),s="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),c={key:e.id,render:t=>(0,n.createElement)(h().K,{...t,key:e.id,isOverlay:S,collectionStore:l,canConfigureCollection:v,templateStore:e,isMobile:A,locked:k,onCancelClick:y,draggable:a,isDefault:(null==H?void 0:H.id)===e.id,recurrence:i,recurrenceDisabled:s,recurrenceButtonDisabled:r}),action:t=>{V&&w({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(518736).D8)(l.getSpaceStore())})}};return c}),[v,V,l,null==H?void 0:H.id,a,A,S,k,y,w]),W=(0,r().K8)((()=>{const e=t.map((e=>e.id)),n=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const n=t.children.slice(0,t.children.length-1),i=t.children[t.children.length-1];return(0,m.jsx)(b().A,{...t,disableDesktopPadding:!S,disableMobileBorders:!0,children:(0,m.jsxs)(m.Fragment,{children:[A||k||!v?n.map(((e,t)=>n[t])):(0,m.jsx)(o(439264).Ay,{direction:"vertical",keys:e,disabled:!a,renderKey:t=>n[e.indexOf(t)],onDrop:B}),i]})})},items:[...t.map(N),L]}:null,v?{key:"create-template",render:e=>(0,m.jsx)(b().A,{topBorder:S,disableDesktopPadding:!S,disableMobileBorders:!0,...e}),items:[j]}:null];return n.filter((e=>null!==e))}),[t,N,L,v,j,S,A,k,a,B]);return(0,m.jsx)(C().Ay,{type:C().Oh.Vertical,store:x,sections:W,onEmptyEnter:E,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),_=n.forwardRef((function(e,t){const{menuListItemProps:n,isOverlay:i,locked:r}=e,a=(0,m.jsx)(l().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return i?(0,m.jsx)(o(274652).A,{title:a,...n}):(0,m.jsx)(o(286611).J,{title:a,icon:(0,o(617668).plusIcon)(),type:"new_template",format:i?"collection-overlay":"page-menu-item",locked:r,...n})}))},982615:(e,t,o)=>{o.d(t,{$:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("checkmark",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.0693 18.166C14.7759 18.166 18.6606 14.2812 18.6606 9.58301C18.6606 4.88477 14.7676 1 10.061 1C5.36279 1 1.48633 4.88477 1.48633 9.58301C1.48633 14.2812 5.37109 18.166 10.0693 18.166ZM9.13965 13.6836C8.82422 13.6836 8.56689 13.5508 8.33447 13.2437L6.30078 10.7783C6.15137 10.5874 6.07666 10.3965 6.07666 10.189C6.07666 9.75732 6.41699 9.40869 6.84863 9.40869C7.10596 9.40869 7.30518 9.5 7.521 9.77393L9.11475 11.791L12.5347 6.3125C12.7173 6.02197 12.9497 5.88086 13.2153 5.88086C13.6387 5.88086 14.0205 6.17139 14.0205 6.61133C14.0205 6.80225 13.9209 7.00977 13.8047 7.19238L9.91162 13.2437C9.729 13.5342 9.45508 13.6836 9.13965 13.6836Z"})})}}]);