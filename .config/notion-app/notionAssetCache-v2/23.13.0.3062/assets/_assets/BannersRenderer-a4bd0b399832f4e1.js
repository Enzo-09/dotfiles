"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[30015,94153],{10289:(e,t,o)=>{o.d(t,{Y:()=>i});var n=()=>o(645873);const a=new(n().O2)("invoice",(async()=>await o.e(60896).then(o.bind(o,430600)))),i=(0,n()._h)(a,(e=>e.Invoice))},53528:(e,t,o)=>{o.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var n=()=>o(597777),a=()=>o(869190),i=()=>o(604995),r=()=>o(416504);function s(e){const{dateTime:t,intl:o,shortenDateAndRange:n}=e,r=i().C6.toPersistedDate(t.valueOf());return a().ZF({value:r,allowRelativeDates:!0,intl:o,shortenDateAndRange:n,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:o,userTimeZone:n,displayInUserTimezone:r,alwaysIncludeTimezone:s}=e,l=i().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return a().ZF({value:l,allowRelativeDates:!0,intl:o,userTimeZone:n,displayInUserTimezone:r,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:o}=e,s=i().C6.toPersistedDateRange(t),l=a().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:o,displayInUserTimezone:!0}),c=t.end.setZone((0,r().P)()),d=a().fU({start_time:c.toFormat(n().GE),humanReadable:!1,intl:o});return o.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},67805:(e,t,o)=>{o.d(t,{X:()=>i,c:()=>r});o(898992),o(672577);var n=()=>o(68263),a=()=>o(731320);function i(e,t){return e.sort(((e,o)=>{const n=e.store.canAdmin();if(n===o.store.canAdmin()){var a,i;const n=null===(a=e.publishedMetadata.publishedBy)||void 0===a?void 0:a.id,r=e.publishedMetadata.publishedTime,s=null===(i=o.publishedMetadata.publishedBy)||void 0===i?void 0:i.id,l=o.publishedMetadata.publishedTime;if(t){if(n===t&&s===t&&r&&l)return l-r;if(n===t)return-1;if(s===t)return 1}return r&&l?l-r:0}return n?-1:1}))}function r(e){const{environment:t,store:o}=e;if(!o.pathIsAccessibleAndAlive())return!1;if(!a().i0(o).find((e=>(0,n().W8)(e.permissionItem))))return!1;return!a().qb(t,o)}},77126:(e,t,o)=>{o.d(t,{j:()=>a});class n extends(()=>o(959180))().A{}const a=new n},97059:(e,t,o)=>{o.d(t,{W:()=>f,w:()=>g});o(944114);var n=()=>o(585515),a=()=>o(577449),i=()=>o(161479),r=()=>o(545285),s=()=>o(763824),l=()=>o(780054),c=()=>o(870618),d=()=>o(670631),u=()=>o(227440),p=()=>o(508496),m=()=>o(540758);async function g(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,i().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await n().T(s,a().h.sideEffect((e=>((0,r().u)(e)&&d.push(e.id),Promise.resolve())),a().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),d}({environment:t,pageId:e})))).flat()}function f(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,m().Bd)(t)}},104636:(e,t,o)=>{o.d(t,{Is:()=>u,LS:()=>g,NH:()=>f,QA:()=>m,_b:()=>p});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698);var n=()=>o(244641),a=(o(296540),()=>o(390527)),i=()=>o(604995),r=()=>o(959013),s=()=>o(488887),l=()=>o(534177),c=()=>o(108944),d=o(474848);function u(e){const t=c().g7(e)??[],o=[];for(const n of t){if(!("block"===n.table&&!0===n.isTemplate()&&n.getFormat().automation_id&&n.id!==e.id))continue;const t=n.getAutomationStore();if(t){if(!t.isReady())return{automationStoresReady:!1};void 0!==t.getRecurrence()&&t.isDefined()&&o.push(t.getModel())}}return{automationStoresReady:!0,...(0,a().templateAncestorsViolateRecurrenceNesting)(o)}}function p(e){switch(e){case"day":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat daily",id:"database.templatePickerItem.recurrenceFrequency.daily"});case"week":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat weekly",id:"database.templatePickerItem.recurrenceFrequency.weekly"});case"month":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat monthly",id:"database.templatePickerItem.recurrenceFrequency.monthly"});case"year":return(0,d.jsx)(r().sA,{defaultMessage:"Repeat yearly",id:"database.templatePickerItem.recurrenceFrequency.yearly"});default:(0,l().HB)(e)}}function m(){return{start_date:n().c9.local().plus({days:1}).set({hour:0,minute:0,second:0,millisecond:0}).toMillis(),timezone:(0,i().dB)(),hour:0,minute:0,frequency:"day",interval:1}}function g(e){const{recurrence:t,intl:o,leadingPhrase:n}=e;return(0,a().rruleFromRecurrence)({..."month"===t.frequency?{...t,monthly_restriction:void 0}:t,weekdays:void 0,hour:0,minute:0,end_condition:void 0}).toText((e=>{switch(e){case"every":if(void 0===n)return"";if("every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.every",defaultMessage:"every"});if("repeat every"===n)return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.repeatEvery",defaultMessage:"repeat every"});(0,l().HB)(n);break;case"day":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.day",defaultMessage:"day"});case"days":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.days",defaultMessage:"days"});case"week":{const e=(null==t?void 0:t.weekdays)||[];return 5===e.length&&(0,s()._)(new Set(e),new Set(["MO","TU","WE","TH","FR"]))?o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weekday",defaultMessage:"weekday"}):o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.week",defaultMessage:"week"})}case"weeks":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.weeks",defaultMessage:"weeks"});case"month":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.month",defaultMessage:"month"});case"months":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.months",defaultMessage:"months"});case"year":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.year",defaultMessage:"year"});case"years":return o.formatMessage({id:"database.templatePickerItem.repeatMenuLabel.years",defaultMessage:"years"});default:return e.toString()}})).trim()}function f(e){const t=e.getRecurrence();return Boolean(e.isTriggerType("recurrence")&&t&&"disabled_recurrence_ended"===e.getStatus())}},113474:(e,t,o)=>{o.d(t,{_:()=>d});o(296540);var n=()=>o(484714),a=()=>o(401497),i=()=>o(668725),r=()=>o(704152),s=()=>o(678553),l=()=>o(125565),c=o(474848);function d(e){const t=(0,a().DP)(),o=(0,n().v3)(),{device:d}=o;return(0,c.jsx)(r().A,{mobileFeedback:d.isMobile,onClick:e.onClick,hovered:e.focused,disabled:e.disabled,style:{width:"100%",...!d.isMobile&&{borderRadius:6},...e.buttonStyle},hoveredStyle:e.hoveredButtonStyle,pressedStyle:e.pressedButtonStyle,children:(0,c.jsx)(s().Ay,{...e,dontShrinkTitle:!0,right:(0,c.jsxs)("div",{style:{display:"flex",whiteSpace:"nowrap"},children:[e.right&&(0,c.jsx)(l().A,{isSecondaryColor:!0,isMobile:d.isMobile,children:e.right}),!d.isMobile&&(0,c.jsx)("div",{style:{flexShrink:0},children:(0,i().b)({width:10,marginLeft:4,fill:t.lightIconColor,transform:"right"===e.chevronType?"rotate(-90deg)":void 0,transition:"transform 0.2s ease"})})]})})})}},140612:(e,t,o)=>{o.d(t,{w:()=>a});var n=()=>o(989423);function a(e,t){const{spaceId:o,pageId:a,joinSpaceMethod:i}=t;(0,n().u4)({environment:e,event:{eventName:"trusted_domain_banner_cta_clicked",eventProperties:{spaceId:o,pageId:a,joinSpaceMethod:i}}})}},159600:(e,t,o)=>{o.d(t,{s:()=>g});var n=()=>o(484714),a=()=>o(847249),i=()=>o(584262),r=()=>o(427704),s=()=>o(677338),l=()=>o(989423);var c=()=>o(435009),d=()=>o(492414),u=()=>o(963589),p=()=>o(351360),m=()=>o(805419);function g(){const e=(0,n().v3)(),t=(0,u().X)("sharing_login_modal"),o=(0,a().K8)((()=>{const{mainEditorCurrentBlockStore:e}=p().default.state;if(e)return(0,d().J8)({store:e,pageVisitSource:i().y8.PublicShareLink})}),[]);return n=>{!function(e,t){(0,l().u4)({environment:e,event:{eventName:"click_sharing_signup",eventProperties:t}})}(e,{from:n}),o&&(0,s().wA)(o),t?m().publicShareLinkLoginModalStore.setState({open:!0}):c().oo({environment:e,url:r().JZ.login})}}},175116:(e,t,o)=>{o.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>r});o(16280);var n=o(296540);const a="collectionContextStore",i=(0,o(446943).C)({displayName:a,legacyContextKey:a,modernContextDefaultValue:void 0}),r=i.context,s=i.Provider;function l(){const e=n.useContext(r);if(void 0===e)throw new Error(`No context provided: ${a}`);return e}function c(){return n.useContext(r)}},182034:(e,t,o)=>{o.d(t,{O:()=>u,e:()=>d});o(898992),o(672577);var n=()=>o(908006),a=()=>o(878523),i=()=>o(725614),r=()=>o(892632),s=()=>o(299545),l=()=>o(77126),c=()=>o(489348);function d(e,t){const o=s().dd(t),n=r().xh(o);e.setState({...e.state,files:n})}async function u(e){const{blockStore:t,pageViewBlockStore:o,environment:r}=e;o?o.setState({...o.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),a().o2(r,{from:"page_comments"}),await n().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==s?void 0:s.getInputStore();d&&i().setSelectionAtEnd({store:d.state.textStore})}},241319:(e,t,o)=>{o.d(t,{y:()=>i});o(898992),o(672577);var n=()=>o(534177),a=()=>o(977345);function i(e){var t;const{actionModels:o,id:i}=e,r=(0,a().y5)(i),s="action"===r.source?o.find((e=>e.id===r.action_id)):void 0,l=(0,n().O9)(s)&&s.isType("create_page")?null===(t=s.getConfig())||void 0===t?void 0:t.collection:void 0;return{automationValueInfo:r,collectionPointer:l,actionModel:s}}},243581:(e,t,o)=>{o.d(t,{r:()=>a});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M3.483 4.55c0-.345.28-.625.625-.625h3.5a.625.625 0 1 1 0 1.25H5.617L8.86 8.42A6 6 0 0 1 10 10.007a6 6 0 0 1 1.14-1.588l3.243-3.244h-1.99a.625.625 0 1 1 0-1.25h3.5c.344 0 .624.28.624.625v3.5a.625.625 0 0 1-1.25 0V6.06l-3.243 3.244a4.78 4.78 0 0 0-1.399 3.358v4.108h-1.25v-4.108a4.78 4.78 0 0 0-1.398-3.358L4.733 6.059V8.05a.625.625 0 1 1-1.25 0z"})},a=(0,o(340498).wt)("arrowBranch",n)},247123:(e,t,o)=>{o.d(t,{QU:()=>y,f2:()=>f,r6:()=>h});o(581454),o(296540);var n=()=>o(847249),a=()=>o(401497),i=()=>o(68263),r=()=>o(959013),s=()=>o(534177),l=()=>o(284371),c=()=>o(663590),d=()=>o(756279),u=()=>o(351360),p=()=>o(2143),m=()=>o(921194),g=o(474848);function f(e){const{openState:t}=e,{mainEditorCurrentBlockStore:o,currentSpaceStore:i}=(0,n().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),r=(0,n().K8)((()=>(0,c().FI)()),[]),s=(0,a().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...r?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[r]);if(!o||!i)return null;const l=Date.now();return(0,g.jsx)(p().H,{type:d().A.Y,style:s.scroller,children:t.permissionChanges.map(((e,t)=>{let[n,a]=e;const r={timestamp:l,space_id:i.id,type:"permission-changed",permission_data:{before:n,after:a}};return(0,g.jsx)("div",{style:s.editContainer,children:(0,g.jsx)(m().A,{rootStore:o,edit:r})},`${n.type}-${t}`)}))})}function y(e,t){return["remove","restrict"].includes(e.type)?t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function h(e,t){switch(e.type){case"remove":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:v(e)}});case"restrict":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw s().HB(e)}}function v(e){return(0,i().B2)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,i().Ds)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,i().Lg)(e.permissionItem)?(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,g.jsx)(r().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},253093:(e,t,o)=>{o.d(t,{j:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("newSidebarSettings",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10 13C8.35003 13 7.00003 11.65 7.00003 10C7.00003 8.35 8.35003 7 10 7C11.65 7 13 8.35 13 10C13 11.65 11.65 13 10 13ZM10 8.5C9.17003 8.5 8.50003 9.17 8.50003 10C8.50003 10.83 9.17003 11.5 10 11.5C10.83 11.5 11.5 10.83 11.5 10C11.5 9.17 10.83 8.5 10 8.5ZM10.02 18.45C9.45003 18.45 8.90003 18.4 8.36003 18.29C8.08003 18.23 7.85003 18.01 7.80003 17.72L7.51003 16.06C7.51003 16.06 7.42003 16.02 7.37003 16L6.01003 16.96C5.77003 17.13 5.45003 17.13 5.21003 16.96C4.78003 16.67 4.39003 16.34 4.03003 15.98C3.63003 15.57 3.27003 15.15 2.97003 14.69C2.81003 14.45 2.81003 14.13 2.97003 13.9L3.94003 12.52C3.94003 12.52 3.90003 12.43 3.88003 12.38L2.24003 12.1C1.95003 12.05 1.72003 11.83 1.67003 11.54C1.58003 11.04 1.53003 10.52 1.53003 10.01C1.53003 9.44 1.58003 8.89 1.69003 8.35C1.75003 8.07 1.97003 7.84 2.26003 7.79L3.92003 7.5C3.92003 7.5 3.96003 7.41 3.98003 7.36L3.02003 6C2.85003 5.76 2.85003 5.44 3.02003 5.2C3.31003 4.78 3.64003 4.38 4.00003 4.02C4.40003 3.62 4.83003 3.27 5.28003 2.96C5.52003 2.8 5.84003 2.8 6.07003 2.96L7.45003 3.93C7.45003 3.93 7.54003 3.89 7.59003 3.87L7.87003 2.23C7.92003 1.94 8.14003 1.71 8.43003 1.66C8.93003 1.57 9.45003 1.52 9.96003 1.52C10.53 1.52 11.08 1.57 11.62 1.68C11.91 1.74 12.13 1.96 12.17 2.25L12.46 3.91C12.46 3.91 12.55 3.95 12.6 3.97L13.96 3.01C14.2 2.84 14.52 2.84 14.76 3.01C15.18 3.3 15.58 3.63 15.94 3.99C16.35 4.4 16.7 4.82 17 5.27C17.16 5.51 17.16 5.83 17 6.06L16.03 7.44C16.03 7.44 16.07 7.53 16.09 7.58L17.73 7.86C18.02 7.91 18.24 8.13 18.3 8.42C18.39 8.92 18.44 9.44 18.44 9.95C18.44 10.52 18.39 11.07 18.28 11.61C18.22 11.89 18 12.12 17.71 12.16L16.05 12.45C16.05 12.45 16.01 12.54 15.99 12.59L16.95 13.95C17.12 14.19 17.12 14.51 16.95 14.75C16.66 15.17 16.33 15.57 15.97 15.93C15.57 16.34 15.14 16.69 14.69 16.99C14.45 17.15 14.13 17.15 13.9 16.99L12.52 16.02C12.52 16.02 12.43 16.06 12.38 16.08L12.1 17.72C12.05 18.01 11.83 18.23 11.54 18.29C11.04 18.38 10.52 18.43 10.01 18.43L10.02 18.45ZM9.10003 16.99C9.68003 17.06 10.26 17.06 10.82 16.99L11.09 15.44C11.13 15.18 11.32 14.97 11.57 14.89C11.82 14.81 12.07 14.71 12.3 14.59C12.53 14.47 12.8 14.5 13.02 14.64L14.32 15.56C14.56 15.38 14.78 15.18 14.99 14.97C15.19 14.77 15.37 14.57 15.54 14.36L14.64 13.08C14.49 12.87 14.47 12.58 14.59 12.35C14.7 12.13 14.8 11.89 14.89 11.62C14.97 11.37 15.18 11.19 15.43 11.15L17 10.88C17.04 10.58 17.06 10.28 17.06 9.99C17.06 9.71 17.04 9.44 17.01 9.17L15.46 8.9C15.2 8.86 14.99 8.67 14.91 8.42C14.83 8.17 14.73 7.92 14.61 7.69C14.49 7.46 14.52 7.18 14.66 6.97L15.58 5.67C15.4 5.44 15.2 5.21 14.99 5C14.79 4.8 14.59 4.62 14.37 4.45L13.09 5.35C12.88 5.5 12.6 5.52 12.37 5.4C12.15 5.29 11.91 5.19 11.64 5.1C11.4 5.02 11.22 4.81 11.17 4.56L10.9 2.99C10.33 2.92 9.74003 2.92 9.18003 2.99L8.91003 4.54C8.87003 4.8 8.68003 5.01 8.43003 5.09C8.18003 5.17 7.93003 5.27 7.70003 5.39C7.47003 5.51 7.19003 5.49 6.98003 5.34L5.68003 4.42C5.44003 4.6 5.22003 4.8 5.01003 5.01C4.81003 5.21 4.63003 5.41 4.46003 5.62L5.36003 6.9C5.51003 7.11 5.53003 7.39 5.41003 7.62C5.30003 7.84 5.20003 8.08 5.11003 8.35C5.03003 8.59 4.82003 8.77 4.57003 8.82L3.00003 9.09C2.96003 9.39 2.94003 9.69 2.94003 9.98C2.94003 10.26 2.96003 10.53 2.99003 10.8L4.54003 11.07C4.80003 11.11 5.01003 11.3 5.09003 11.55C5.17003 11.8 5.27003 12.05 5.39003 12.28C5.50003 12.51 5.48003 12.79 5.34003 13L4.42003 14.3C4.60003 14.54 4.80003 14.76 5.01003 14.97C5.21003 15.17 5.41003 15.35 5.62003 15.52L6.90003 14.62C7.11003 14.47 7.39003 14.45 7.63003 14.57C7.85003 14.68 8.09003 14.78 8.36003 14.87C8.61003 14.95 8.79003 15.16 8.83003 15.41L9.10003 16.98V16.99Z"})})},258398:(e,t,o)=>{o.d(t,{A:()=>S});o(944114);var n=o(296540),a=()=>o(484714),i=()=>o(847249),r=()=>o(401497),s=()=>o(584262),l=()=>o(328347),c=()=>o(846899),d=()=>o(959013),u=()=>o(661920),p=()=>o(179030),m=()=>o(135552),g=()=>o(676870),f=()=>o(525700),y=()=>o(578872),h=()=>o(712505),v=()=>o(716979),b=()=>o(562800),C=o(474848);function S(e){let{blockStore:t,legacyColor:o}=e;const S=(0,i().K8)((()=>t.isFormBlock()),[t]),_=(0,a().v3)(),x=_.device.isMobile,M=(0,i().K8)((()=>{const e=y().UP(t);return b().Ix({spaceStore:t.getSpaceStore(),domainId:e})}),[t]),A=(0,n.useCallback)((()=>{f().uY({environment:_,store:t,pageVisitSource:s().y8.SiteBanner})}),[_,t]),k=(0,n.useCallback)((()=>{var e;h().default.isSidePeekOpen()&&(null===(e=h().default.peekTargetStore.state)||void 0===e?void 0:e.id)!==t.id&&u().YH(),v().n0(_),(0,g().EN)(_,{source:"site_settings_banner"})}),[t.id,_]),w=(0,r().IS)((()=>({icon:{height:16,width:16,marginRight:4}})),[]);if(!M||S)return null;let T;const I=[];return x?(T=(0,C.jsx)(d().sA,{defaultMessage:"This page is live on the web.",id:"pageViewBlock.sitesBannerMobile.message"}),I.push({label:(0,C.jsx)(d().sA,{defaultMessage:"View",id:"pageViewBlock.sitesBanner.view"}),onClick:()=>A()})):(T=(0,C.jsx)(d().sA,{defaultMessage:"This page is live on {domain}",id:"pageViewBlock.sitesBanner.message",values:{domain:M}}),I.push({label:(0,C.jsxs)(C.Fragment,{children:[(0,l().h)(w.icon),(0,C.jsx)(d().sA,{defaultMessage:"View site",id:"pageViewBlock.sitesBanner.viewSite"})]}),onClick:()=>A()},{label:(0,C.jsxs)(C.Fragment,{children:[(0,c().B)(w.icon),(0,C.jsx)(d().sA,{defaultMessage:"Site settings",id:"pageViewBlock.sitesBanner.settings"})]}),onClick:()=>k()})),(0,C.jsx)(p().l,{label:T,display:"full-width",actions:I,tint:(0,m().V)(o)})}},301782:(e,t,o)=>{o.d(t,{CM:()=>p,UB:()=>u,zc:()=>d});o(898992),o(354520),o(581454);var n=()=>o(890409),a=()=>o(973647),i=()=>o(534177),r=()=>o(862292),s=()=>o(989423),l=()=>o(909470),c=()=>o(546461);function d(e){const{automationActionStore:t,automationStore:o,formulaAnalyticsModule:r,formulasModule:s,simpleFormulasModule:d}=e,u=t.getModel(),p=o??t.getParentStore();if(!u||!p)return;const m=p.getActionStores().map((e=>e.getModel())).filter(i().O9),g=(0,c().To)(p);let f=[];return g&&a().Q.isSuccess(g)&&(f=g.value.valueTypes),(0,n()._f)({automationActionModel:u,automationActionModels:m,formulaAnalyticsModule:r,formulasModule:s,simpleFormulasModule:d,formulaTypecheckContextValues:f,getRecordModel:t.getRecordModel,featureGates:(0,l().i)()})}function u(e,t){const{automationStore:o,automationActionStore:n}=t;o.isTriggerType("event")||p(((t,a,i)=>{const r=d({automationActionStore:n,automationStore:o,formulaAnalyticsModule:a,formulasModule:t,simpleFormulasModule:i});r&&(0,s().pM)(e,"automation_action_update",n.id,1,{automation_action:r,automation_action_id:n.id,automation_id:o.id})}))}function p(e){return Promise.all([r().T.formulas.load(),r().T.formulaAnalytics.load(),r().T.simpleFormulas.load()]).then((t=>{let[o,n,a]=t;e(o,n,a)})).catch((e=>{console.error("Error sending analytics for automations",e)}))}},322114:(e,t,o)=>{o.d(t,{A:()=>P});var n=o(296540),a=()=>o(484714),i=()=>o(847249),r=()=>o(757695),s=()=>o(959013),l=()=>o(100622),c=()=>o(534177),d=()=>o(284371),u=()=>o(452939),p=()=>o(701763),m=()=>o(140612),g=()=>o(449506),f=()=>o(898486),y=()=>o(722872),h=()=>o(351360),v=()=>o(10984),b=()=>o(251126),C=()=>o(805751),S=()=>o(623580),_=()=>o(928600),x=()=>o(864943),M=()=>o(204063),A=o(474848);const k={marginBottom:10},w={...k,width:"100%",height:"100%",padding:10,alignItems:"top",borderRadius:0},T=(0,s().YK)({requestAccessMessagePlaceholder:{defaultMessage:"Message (optional)",id:"requestAccessForm.messageInput.placeholder"},rateLimitError:{defaultMessage:"You have recently requested access to this page.",id:"requestAccessForm.errorMessage.rateLimit"},currentUserNotFound:{defaultMessage:"Current user not found.",id:"requestAccessForm.errorMessage.currentUserNotFound"}});function I(){return(0,A.jsx)(s().sA,{defaultMessage:"Cancel",id:"requestAccessForm.cancelButton.label"})}const j=r().default.createClass(0,{name:"RequestAttemptStore"}),B=r().default.createClass(void 0,{name:"MessageStore"});const P=function(e){const t=(0,a().v3)(),r=(0,a().WS)(),l=(0,i().uB)(e.popupStore,o(463830).A),c=(0,i().uB)(void 0,B),p=(0,i().uB)(void 0,j),g=(0,n.useCallback)((()=>L(l)),[l]),f=(0,n.useCallback)((()=>(0,A.jsx)(F,{...e,requestAttemptStore:p,messageStore:c,buttonPopupStore:l})),[e,p,c,l]),y=(0,i().K8)((()=>p.state>0),[p]),h=(0,i().K8)((()=>l.state.open),[l]);if("current-actor-to-block"===e.type)return(0,A.jsx)(O,{type:"page",block:e.block,flowId:e.flowId,buttonType:e.buttonType});if("current-actor-to-collection"===e.type)return(0,A.jsx)(O,{type:"collection",collection:e.collection,flowId:e.flowId,buttonType:e.buttonType});const v="primary"===e.buttonType?M().A:x().A,b=r?(0,A.jsx)(o(897119).Ay,{popupType:o(377586).n.SlideUp,open:h,render:f}):(0,A.jsx)(o(676007).A,{open:h,onDismiss:g,render:f});return"current-actor-to-space-via-onboarding"===e.type?b:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(v,{size:"lg",disabled:y,onClick:()=>{var o,n;return function(e,t){const{environment:o,flowId:n,type:a,source:i,spaceId:r,pageId:s}=e;"trusted_domain_page"===i&&r&&m().w(o,{spaceId:r,pageId:s,joinSpaceMethod:"request_to_join"});"current-actor-to-block"===a?u().Xx(o,{button_name:"request-access",flow_id:n,request_access_type:"page"}):"current-actor-to-space-via-team"===a&&u().Xx(o,{button_name:"request-access",flow_id:n,request_access_type:"team"});t.setState({open:!0})}({environment:t,flowId:e.flowId,type:e.type,source:e.source,pageId:null===(o=e.block)||void 0===o?void 0:o.id,spaceId:null===(n=e.block)||void 0===n?void 0:n.spaceId},l)},style:"outline"===e.buttonType?{fontWeight:d().Wy.semibold}:{},children:y?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.requested",defaultMessage:"Requested access"}):N(e.type)}),b]})};function R(e){let{result:t}=e;return t&&t.error?(0,A.jsx)("div",{style:{color:l().Ay.redWithAlpha(1),textAlign:"center",width:"100%",marginBottom:16},children:t.error}):null}function V(e){e.update((e=>e+1))}function L(e){return e.setState({open:!1})}function D(e){let{error:t,result:o,ready:r,requestAttemptStore:l,messageStore:c,type:u}=e;const p=(0,s().tz)(),m=(0,a().WS)(),g=(0,n.useCallback)((()=>V(l)),[l]),f=(0,n.useCallback)((e=>function(e,t){t.setState(e.target.value)}(e,c)),[c]),y=(0,i().K8)((()=>Boolean(0===l.state||r&&o&&o.error)),[l,r,o]),h=(0,i().K8)((()=>c.state||""),[c]);return(0,A.jsxs)(A.Fragment,{children:[!m&&(0,A.jsx)("div",{style:{fontSize:16,fontWeight:d().Wy.semibold,marginBottom:16},children:N(u)}),(0,A.jsx)(S().A,{format:m?S().C.Transparent:void 0,textarea:!0,value:h,onChange:f,disabled:!y,placeholder:p.formatMessage(T.requestAccessMessagePlaceholder),style:{...m?{...w,padding:"16px"}:{...k,marginBottom:16,padding:"8px 12px",alignItems:"flex-start"}}}),!m&&(0,A.jsx)(M().A,{size:"lg",disabled:!y,onClick:g,style:k,children:(0,A.jsx)(s().sA,{defaultMessage:"Send request",id:"requestAccessForm.sendRequestButton.label"})}),(0,A.jsx)(R,{result:o})]})}function F(e){const{requestAttemptStore:t,messageStore:o,buttonPopupStore:r}=e,l=(0,a().v3)(),d=(0,a().WS)(),u=(0,s().tz)(),m=(0,n.useCallback)(((n,a,i)=>(0,A.jsx)(D,{requestAttemptStore:t,messageStore:o,error:n,result:a,ready:i,type:e.type})),[t,o,e.type]),v=(0,i().K8)((()=>{var e;return null===(e=h().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),S=(0,n.useCallback)((t=>async function(e){const{messageStore:t,buttonPopupStore:o,type:n,teamId:a,requestAttempt:i,environment:r,currentUserId:s,intl:l,flowId:d}=e;if(0===i)return;const u=t.state,m=await async function(){if("current-actor-to-block"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-block",block:e.block,message:u}});if("current-actor-to-collection"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-collection",collection:e.collection,message:u}});if("current-actor-to-space-via-team"===n)return g().callApi({eventName:"requestAccess",environment:r,data:{type:"current-actor-to-space-via-team",teamId:a,message:u}});if("current-actor-to-space-via-block"===n){if(!s)return;return g().callApi({eventName:"requestAccess",environment:r,data:{type:"actor-to-space",spaceId:e.block.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"trusted_domain_page"}}})}if("current-actor-to-space-via-onboarding"===n){if(!s)return;return g().callApi({eventName:"requestAccess",environment:r,data:{type:"actor-to-space",spaceId:e.spaceId,message:u,forActorId:s,attributes:{add_permissions_on_approval:!1,origin_type:"onboarding"}}})}}();return m?"success"!==m.type?"UserRateLimitResponse"===(null===(y=m.body)||void 0===y?void 0:y.name)?{error:l.formatMessage(T.rateLimitError)}:{error:(0,f().Hu)(l,m)}:("current-actor-to-block"===n?p().T_(r,{request_access_type:"page",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-team"===n?p().T_(r,{request_access_type:"team",flow_id:d}):"current-actor-to-space-via-block"===n?p().T_(r,{request_access_type:"space",flow_id:d,source:"trusted_domain_page"}):"current-actor-to-collection"===n?p().T_(r,{request_access_type:"collection",flow_id:d,requestId:m.data.requestId}):"current-actor-to-space-via-onboarding"===n?p().T_(r,{request_access_type:"space",flow_id:d,source:"onboarding"}):(0,c().HB)(n),o.reset(),{value:!0}):{error:l.formatMessage(T.currentUserNotFound)};var y}({...e,requestAttempt:t,environment:l,intl:u,currentUserId:v})),[l,u,e,v]),M=(0,n.useCallback)((()=>V(t)),[t]),k=(0,n.useCallback)((()=>L(r)),[r]),w=(0,i().O$)(t);return d?(0,A.jsx)(_().A,{menuType:y().gu.Modal,whiteBackground:!0,title:N(e.type),left:I(),onClickLeft:k,right:(0,A.jsx)(s().sA,{id:"requestAccessForm.mobileSend.label",defaultMessage:"Send"}),onClickRight:M,children:(0,A.jsx)(C().A,{debugName:"RequestAccessForm",capture:!0,children:(0,A.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"stretch",alignItems:"stretch",width:"100%",height:"100%"},children:(0,A.jsx)(b().A,{request:w,performRequest:S,render:m})})})}):(0,A.jsx)(C().A,{debugName:"RequestAccessForm",capture:!0,children:(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evently",alignItems:"stretch",padding:"20px 28px 24px",width:"340px"},children:[(0,A.jsx)(b().A,{request:w,performRequest:S,render:m}),(0,A.jsx)(x().A,{size:"lg",onClick:k,children:I()})]})})}function O(e){const{type:t,flowId:o,buttonType:r}=e,l=(0,a().v3)(),d="outline"===r?x().A:M().A,[u,m]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),h={attributes:{add_permissions_on_approval:!1,role:(0,i().K8)((()=>(0,v().dL)()),[])?"reader":"read_and_write"},message:void 0};let b;"page"===t?b={...h,type:"current-actor-to-block",block:{id:e.block.id,spaceId:e.block.spaceId}}:"collection"===t?b={...h,type:"current-actor-to-collection",collection:{id:e.collection.id,spaceId:e.collection.spaceId}}:(0,c().HB)(t);const C=(0,n.useCallback)((async()=>{var e;const n=await g().callApi({eventName:"requestAccess",environment:l,data:b});"success"===n.type&&n.data.request?(m(!0),p().T_(l,{request_access_type:t,previous_access_level:"none",requested_access_level:"read_and_write",flow_id:o,requestId:n.data.requestId})):"failed"===n.type&&"UserRateLimitResponse"===(null===(e=n.body)||void 0===e?void 0:e.name)&&y(!0)}),[l,b,t,o]);return(0,A.jsx)(d,{size:"lg",disabled:u||f,disabledFeedback:u||f,onClick:C,children:u?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.Requested",defaultMessage:"Requested access"}):f?(0,A.jsx)(s().sA,{id:"fullPageError.requestAccessButton.edit.TryAgain",defaultMessage:"Try again later"}):N("page"===t?"current-actor-to-block":"current-actor-to-collection")})}function N(e){return"current-actor-to-space-via-block"===e||"current-actor-to-space-via-onboarding"===e?(0,A.jsx)(s().sA,{defaultMessage:"Request membership",id:"requestAccessForm.requestAccessToSpaceButton.title"}):(0,A.jsx)(s().sA,{defaultMessage:"Request access",id:"requestAccessForm.requestAccessButton.title"})}},324587:(e,t,o)=>{o.r(t),o.d(t,{addAutomationAction:()=>E,clearInvalidVariables:()=>H,createAutomation:()=>N,deleteAutomation:()=>Q,disableAutomation:()=>Y,duplicateAutomation:()=>q,duplicateAutomationAction:()=>W,enableAutomation:()=>G,insertEmptyTextInDuplicateBlockAction:()=>J,messages:()=>O,removeAutomationAction:()=>z,reorderAutomationActions:()=>K,restartAutomation:()=>U});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454);var n=o.n(o(794148)),a=()=>o(244641),i=()=>o(908006),r=()=>o(422540),s=()=>o(890409),l=()=>o(192845),c=()=>o(390527),d=()=>o(522328),u=()=>o(433519),p=()=>o(247331),m=()=>o(134025),g=()=>o(696706),f=()=>o(912720),y=()=>o(199378),h=()=>o(161479),v=()=>o(919709),b=()=>o(496603),C=()=>o(183558),S=()=>o(973647),_=()=>o(534177),x=()=>o(722101),M=()=>o(44729),A=()=>o(246826),k=()=>o(725614),w=()=>o(751156),T=()=>o(780054),I=()=>o(183324),j=()=>o(989423),B=()=>o(909470),P=()=>o(594794),R=()=>o(695625),V=()=>o(546461),L=()=>o(301782),D=()=>o(770586),F=()=>o(190019);const O=(0,o(959013).YK)({genericErrorMessage:{id:"automations.buttonTrigger.genericErrorMessage",defaultMessage:"Button failed to execute"},open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"},defaultConfirmationWorkflowText:{defaultMessage:"Are you sure you want to continue?",id:"automations.buttonTrigger.defaultConfirmationWorkflowText"},defaultContinueWorkflowMessage:{defaultMessage:"Continue",id:"automations.buttonTrigger.defaultContinueWorkflowMessage"},defaultStopWorkflowMessage:{defaultMessage:"Cancel",id:"automations.buttonTrigger.defaultStopWorkflowMessage"},errorQueryCollectionTooManyPages:{defaultMessage:"Button impacts too many pages",id:"automations.buttonTrigger.errorQueryCollectionTooManyPages"},errorRecordInTrash:{id:"automations.buttonTrigger.errorRecordInTrash",defaultMessage:"Button is editing a page in trash"}});function N(e){const{actionIds:t,automationId:o,automationName:a,environment:i,inMemoryRecordCache:r,parentPointer:s,transaction:l,trigger:c}=e,d=o??(0,P().Z1)({environment:i,table:f().yB,spaceId:s.spaceId}),u=A().eC({environment:i,inMemoryRecordCache:r??i.defaultRecordCache.inMemoryRecordCache,table:f().yB,transaction:l,value:{action_ids:t,alive:!0,id:d,parent_id:s.id,parent_table:s.table,properties:{name:a},space_id:s.spaceId,status:"active",trigger:c}});return n()(u.isTriggerType(c.type),"Trigger type mismatch"),u}function E(e){const{actionId:t,environment:o,intl:a,automationStore:r,actionType:l,transaction:c,insertionPoint:d,config:u,createDuplicateBlocksContainer:p=!0,builderType:m="sidebar"}=e,h=r.getSpaceId();if(!h)return;let b;if("duplicate_blocks"===l&&p){b=A().Wv({environment:o,inMemoryRecordCache:r.inMemoryRecordCache,transaction:c,type:"text"});const e=J({environment:o,contentStore:b.getContentStore(),transaction:c});i().default.afterNextFlush((()=>{const t=R().T.find((t=>g().L3.isEqual(t.props.store.pointer,e.pointer)));t&&k().setSelectionAtStart({store:t.props.store.getBlockTitleStore()})}))}const S=u??function(e){const{actionType:t,automationStore:o,intl:n}=e;if("modal_confirmation"===t)return{continue_button:{text:n.formatMessage(O.defaultContinueWorkflowMessage)},cancel_button:{text:n.formatMessage(O.defaultStopWorkflowMessage)},text:{type:"simple",value:(0,v().x9d)(n.formatMessage(O.defaultConfirmationWorkflowText))}};if("define_variables"===t){const e=(0,C().Ay)();return{values:{[e]:{name:(0,D().v)(o.getActionStores(),n.formatMessage(y().xC)),value:{type:"simple",value:[[""]]}}},variableIds:[e]}}}({actionType:l,automationStore:r,intl:a})??{},M=A().eC({environment:o,inMemoryRecordCache:r.inMemoryRecordCache,table:y().SC,transaction:c,value:{id:t,type:l,parent_id:r.id,parent_table:f().yB,alive:!0,space_id:h,config:S,blocks:b?[b.id]:[]}});return b&&x().BC({transaction:c,parentStore:M.getKeyStore("blocks"),appendStore:b}),!d||"afterActionId"in d?x().BC({transaction:c,parentStore:r.getActionIdsStore(),appendStore:M,after:null==d?void 0:d.afterActionId}):"beforeActionId"in d?x().Hs({transaction:c,parentStore:r.getActionIdsStore(),prependStore:M,before:d.beforeActionId}):(0,_().HB)(d),$({transaction:c,automationStore:r}),(0,L().CM)(((e,t,n)=>{const a=(0,j().ik)(o),i=(0,L().zc)({automationActionStore:M,formulaAnalyticsModule:t,formulasModule:e,simpleFormulasModule:n});(0,_().O9)(i)&&(0,s().dW)(a,{automation_action:i,automation_action_id:M.id,automation_id:M.getParentId(),builder_type:m}),M.isDefined()&&(0,s().c_)(a,{automation_action_id:M.id,automation_action_type:M.getType(),automation_id:r.id,builder_type:m})})),n()(M.isType(l),"Action type mismatch"),M}function U(e){var t,o;const{automationStore:n,transaction:i}=e,r=n.getRecurrence();if(!r)return;const s=a().c9.now().plus({day:1}).startOf("day"),l={...r,start_date:s.toMillis(),end_condition:"date"===(null===(t=r.end_condition)||void 0===t?void 0:t.type)?{type:"date",end_at:(0,c().getNewEndTimestamp)(s,r.start_date,null===(o=r.end_condition)||void 0===o?void 0:o.end_at).toMillis()}:r.end_condition};A().zv({store:n,transaction:i,data:{status:"active"}}),A().zv({store:n.getKeyStore("trigger"),transaction:i,data:{recurrence:(0,c().convertFromUnpersistedRecurrenceConfig)(l)}})}function q(e){const{actorPointer:t,environment:o,includeParenting:n,sourceAutomationStore:a,targetAutomationId:i,transaction:r}=e,s=a.getParentStore();if(!s||!s.isReady())throw new Error("Automation parent store not ready");const l=a.getValue(),c=a.getSpaceId();if(!(0,_().O9)(l)||!(0,_().O9)(c))throw new Error("Undefined automation value or space id");const d={},p={...(0,b().mg)(l),id:i??(0,P().Z1)({environment:o,table:f().yB,spaceId:(0,h().e)(c)})};d[a.id]=p.id,(0,_().O9)(p.action_ids)&&(0,_().EI)(p.action_ids)&&p.action_ids.forEach((e=>d[e]=(0,P().Z1)({environment:o,table:y().SC,spaceId:(0,h().e)(c)})));const m=e=>{let{requested:t}=e;const o=d[t.id];return(0,_().O9)(o)?{...t,id:o}:t};(0,u().i)({actor:t,duplicateRecord:p,options:{},mapper:m,originalRecord:l});const g=A().eC({environment:o,inMemoryRecordCache:a.inMemoryRecordCache,table:f().yB,transaction:r,value:p});n&&M().NI({childStore:g,parentStore:s,transaction:r});const v=a.getActionStores(),C=Promise.all(v.map((e=>{const t=d[e.id],{automationActionStore:n,onComplete:a}=W({environment:o,includeParenting:!1,mapper:m,sourceActionStore:e,targetAutomationActionId:t,transaction:r});return M().NI({childStore:n,parentStore:g,transaction:r}),a}))),S=C.then((e=>e.flat()));return{automationStore:g,onComplete:S}}function W(e){const{environment:t,includeParenting:o,insertionPoint:n,mapper:a,sourceActionStore:i,targetAutomationActionId:r,transaction:l}=e,c=i.getParentStore();if(!c||!c.isReady())throw new Error("Automation store is not ready");const u=i.getValue(),p=i.getSpaceId();if(!(0,_().O9)(u)||!(0,_().O9)(p))throw new Error("Undefined action value or space id");const m={...(0,b().mg)(u),id:r??(0,P().Z1)({environment:t,table:y().SC,spaceId:(0,h().e)(p)})},g=t.currentUser.id,f=i.inMemoryRecordCache.makeGetRecordRoleFn(g);(0,d().I)({duplicateRecord:m,getRecordRole:f,originalRecord:u,mapper:e=>(null==a?void 0:a(e))??e.requested,options:{},originOptions:{baseUrl:T().A.domainBaseUrl,publicDomainName:T().A.publicDomainName},duplicateBlocks:!1});const v=A().eC({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,table:y().SC,transaction:l,value:m});o&&(!n||"afterActionId"in n?M().NI({after:null==n?void 0:n.afterActionId,childStore:v,parentStore:c,transaction:l}):"beforeActionId"in n?M().Ti({before:null==n?void 0:n.beforeActionId,childStore:v,parentStore:c,transaction:l}):(0,_().HB)(n),$({transaction:l,automationStore:c}));const C=Promise.all(i.getBlockStores().map((e=>{const{blockStores:o,onComplete:n}=I().duplicateBlock({environment:t,preferDuplicateLocation:"local",stores:[e],targetSpaceId:(0,h().e)(e.pointer.spaceId),transaction:l,options:{addCopyName:!1,deepCopyTransclusionContainers:!1,resolveTemplateVariables:!1}}),a=o[0];return M().NI({childStore:a,parentStore:v,transaction:l}),n}))),S=v.getModel();return(0,_().O9)(S)&&(0,L().CM)(((e,o,n)=>{const a=(0,j().ik)(t),i=(0,L().zc)({automationActionStore:v,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:n});(0,_().O9)(i)&&(0,s().dW)(a,{automation_action:i,automation_action_id:S.id,automation_id:S.parent_id,from:"duplicate"}),(0,s().c_)(a,{automation_action_id:S.id,automation_action_type:S.type,automation_id:c.id,from:"duplicate"})})),{automationActionStore:v,onComplete:C}}function K(e){const{automationStore:t,automationTypecheckModule:o,contextType:n,environment:a,formulasModule:i,from:r,intl:s,isSubscribed:l,movedActionId:c,newActionIds:d,transaction:u}=e;A().zv({store:t,transaction:u,data:{action_ids:d}}),$({automationStore:t,transaction:u});Z({automationStore:t,transaction:u,typecheckResult:(0,F().Z)({environment:a,automationStore:t,automationTypecheckModule:o,contextType:n,formulasModule:i,intl:s,isSubscribed:l})}),(0,j().u4)({environment:a,event:{eventName:"automation_action_move",eventProperties:{automation_id:t.id,automation_action_id:c,from:r}}})}function z(e){const{actionStore:t,automationStore:o,automationTypecheckModule:n,contextType:a,environment:i,formulasModule:r,intl:l,isSubscribed:c,transaction:d}=e,u=(0,F().Z)({environment:i,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:r,intl:l,isSubscribed:c});!function(e){const{automationActionStore:t,automationStore:o,environment:n,transaction:a,hasError:i=!1}=e;let r=t.getParentStore();if((0,_().O9)(o)){const e=t.getParentPointer();if(!(0,_().O9)(e))throw new Error("Automation action does not have a parent pointer");if(!g().L3.isEqual(e,o.pointer))throw new Error(`Automation action parent pointer does not match argument: ${g().L3.toKey(e)}, ${g().L3.toKey(o.pointer)}`);r=o}else if(!(0,_().O9)(r))throw new Error("Automation store is undefined");M().zz({childStore:t,parentStore:r,transaction:a});const l=t.getModel();(0,_().O9)(l)&&(0,L().CM)(((e,o,a)=>{const c=(0,j().ik)(n),d=(0,L().zc)({automationActionStore:t,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:a});(0,_().O9)(d)&&(0,s().YO)(c,{automation_action:d,automation_action_id:l.id,automation_id:l.parent_id,has_error:i}),(0,s().gW)(c,{automation_action_id:l.id,automation_action_type:l.type,automation_id:r.id,has_error:i})}))}({automationActionStore:t,environment:i,transaction:d,hasError:(S().Q.isSuccess(u)&&u.value.actionValidationFailures[t.id]||[]).length>0}),Z({automationStore:o,transaction:d,typecheckResult:u})}function H(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:r,isSubscribed:s,transaction:l}=e;Z({automationStore:o,transaction:l,typecheckResult:(0,F().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:r,isSubscribed:s})})}function $(e){const{automationStore:t,transaction:o}=e;t.getSpaceId()&&t.getActionStores().forEach(((e,t)=>{var n;if(!e.isDefined())return;const a=e.getModel();a.isType("open_page")&&"url"===(null===(n=a.getConfig())||void 0===n||null===(n=n.target)||void 0===n?void 0:n.type)&&!(0,r().cQ)(t)&&A().zv({store:e.getConfigStore(),transaction:o,data:{target:null}})}))}function Z(e){const{automationStore:t,transaction:o,typecheckResult:n}=e,a=t.getSpaceId(),i=t.getModel();if(a&&i&&!S().Q.isFail(n))for(const r of i.getActionIds()){const e=t.getRecordStore(t,{table:y().SC,id:r,spaceId:a});if(!e.isDefined())continue;const i=e.getModel(),s=new Set(n.value.actionInputValueTypes[r].map((e=>{if(e.kind===p().FormulaContextValueKind.Binding||e.kind===p().FormulaContextValueKind.ContextValue)return e.id;e.kind!==p().FormulaContextValueKind.ThisRow&&(0,_().HB)(e)})).filter(_().O9)),{value:c}=(0,l().G)({automationActionModel:i,baseUrl:T().A.domainBaseUrl,preventClearingConfig:!0,publicDomainName:T().A.publicDomainName,sourceSpaceId:a,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:void 0,visitFormulaContextValue:e=>s.has(e)?{type:"keep"}:{type:"replace",value:void 0},visitFormulaPageProperty:void 0,visitRecordPointer:void 0}}),d=m().op.update({pointer:e.pointer,path:["config"],args:c.getConfig()??{}});w().applyOperation({store:e,operation:d,transaction:o})}}function J(e){const{environment:t,contentStore:o,transaction:n}=e,a=A().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId});return x().BC({parentStore:o,appendStore:a,transaction:n}).childStore}function G(e){const{automationStore:t,environment:o,transaction:n}=e;A().zv({store:t,data:{status:"active"},transaction:n});const a=t.getModel();(0,_().O9)(a)&&(0,L().CM)(((e,n,i)=>{const r=(0,V().To)(t);let l=[];r&&S().Q.isSuccess(r)&&(l=r.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:a,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:i});(0,s().Ah)(c,d)}))}function Y(e){const{automationStore:t,environment:o,status:n,transaction:a}=e,i=n??"disabled";A().zv({store:t,data:{status:i},transaction:a}),t.isTriggerType("recurrence")&&A().zv({store:t,data:{run_at:void 0},transaction:a});const r=t.getModel();(0,_().O9)(r)&&(0,L().CM)(((e,n,a)=>{const i=(0,V().To)(t);let l=[];i&&S().Q.isSuccess(i)&&(l=i.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:r,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:a});(0,s().vN)(c,d)}))}function Q(e){const{automationStore:t,environment:o,transaction:n}=e;A().zv({store:t,data:{alive:!1},transaction:n});const a=t.getModel();(0,_().O9)(a)&&(0,L().CM)(((e,n,i)=>{const r=(0,V().To)(t);let l=[];r&&S().Q.isSuccess(r)&&(l=r.value.valueTypes);const c=(0,j().ik)(o),d=(0,s().sp)({automationModel:a,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:l,getRecordModel:t.getRecordModel,featureGates:(0,B().i)(),simpleFormulasModule:i});(0,s().Iv)(c,d)}))}},328347:(e,t,o)=>{o.d(t,{h:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},398842:(e,t,o)=>{o.d(t,{Jv:()=>v,Zr:()=>b,Rl:()=>C,mA:()=>h});var n=o(296540),a=()=>o(484714),i=()=>o(847249),r=()=>o(401497),s=()=>o(970013),l=()=>o(743176),c=()=>o(68465),d=()=>o(159588),u=()=>o(963589),p=()=>o(331542),m=o(474848);function g(){const e=(0,r().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(p().A,{legacySize:14})})}var f=()=>o(399275);const y=function(){return(0,m.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:i,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:g,className:f,labelSizeVariant:y}=e,h=(0,a().v3)(),{device:v}=h,b=v.isMobile?16:14,S=(0,r().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:b,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===y||i?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[b,s,u,y,i,c]);return(0,m.jsxs)("div",{className:f,style:S.container,children:[n&&(0,m.jsxs)("div",{style:S.iconWrapper,children:[(0,m.jsx)("div",{style:S.itemIcon,children:(0,m.jsx)(C,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,m.jsx)("div",{style:S.dragHandle,children:(0,m.jsx)(o(57232).A,{style:g,iconSize:12,iconStyle:S.dragIcon})})]}),!s&&(0,m.jsx)("div",{style:{...o(284371).RC},children:t.name}),l]})}));function v(e){const{propertySchema:t}=e,o=(0,a().v3)();return(0,i().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,m.jsx)(y,{}):null}function b(e){let{propertyId:t,collectionContextStore:o}=e;return(0,i().K8)((()=>{var e;const n=null===(e=o.collectionStore())||void 0===e?void 0:e.id;if(!n)return!1;const a=f().d.state.collectionsProperties[n];return!!a&&"Loading"===a[t]}),[o,t])?(0,m.jsx)(g,{}):null}function C(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,{isMobile:i}=(0,a().Y0)(),s=(0,r().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=i?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||d,theme:s,style:n,isDefaultNoticonEnabled:c})}},399275:(e,t,o)=>{o.d(t,{d:()=>a});o(898992),o(354520);class n extends(()=>o(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],n=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const n=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(n).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}}const a=new n;(0,o(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",a)},422540:(e,t,o)=>{o.d(t,{$0:()=>y,Fx:()=>x,Ge:()=>m,I3:()=>u,Kj:()=>S,PP:()=>M,TK:()=>A,Yy:()=>d,aE:()=>k,cQ:()=>_,kH:()=>g,m7:()=>p,nq:()=>b,nv:()=>h,tj:()=>f});o(898992),o(354520),o(737550);var n=()=>o(496603),a=()=>o(534177),i=()=>o(970013),r=()=>o(651124),s=()=>o(349835),l=()=>o(390066);(0,a().u0)((e=>(0,a().O9)(e)&&(0,a().O9)(e.target)&&(0,a().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,a().uv)(o)).filter(((t,n,a)=>{const r=o[t];return!(!r||!u(r))&&(("relation"!==r.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,r))&&(!s||s([t,r],n,o)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:s}=e,c=(0,a().uv)(o).filter(((e,t,n)=>{const a=o[e];return!(!a||!(0,i().JY)(a))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(c,(e=>d.findIndex((t=>t.property===e))))}function g(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function y(e){return Boolean(f[e.type])}function h(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c}=e,d=(0,a().uv)(o).filter(((e,t,n)=>{var a;const r=o[e];return!(!r||!f[r.type])&&((!(0,i().$M)(r)||null===(a=(0,i().om)(r))||void 0===a||!a.auto_update_on_edit)&&(!s||s([e,r],t,o)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().L)(t,o,void 0,r().jf.Page).collection_page_properties||[];return n().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return v[e.type]}const C={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function S(e){return C[e.type]}function _(e){return 0===e}function x(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function M(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function A(e){const{collectionSchema:t,property:o,type:n}=e,a=null==t?void 0:t[o];return!a||("action"===n?!u(a):!f[a.type])}function k(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:r}=t.event;if(void 0===i)return!1;const s="some"===n.type&&n.some,l="all"===n.type&&n.all;if((s||l||[]).some((e=>M({collectionSchema:o,property:e.property})||A({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===n.type&&(!(0,a().O9)(n.some)||0===n.some.length),d="all"===n.type&&(!(0,a().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||c||d)&&!r)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},428347:(e,t,o)=>{o.r(t),o.d(t,{BannersRenderer:()=>Ht});o(581454);var n=o(296540),a=()=>o(484714),i=()=>o(847249),r=()=>o(534177),s=()=>o(502626),l=()=>o(932737),c=()=>o(644914),d=()=>o(258398),u=()=>o(333618),p=()=>o(807778),m=()=>o(426433),g=()=>o(696751),f=()=>o(966689),y=()=>o(883894),h=()=>o(657982),v=()=>o(869190),b=()=>o(85562),C=()=>o(901389),S=()=>o(496414),_=()=>o(435009),x=()=>o(587124),M=()=>o(135552),A=()=>o(351360),k=()=>o(179030),w=o(474848);const T=function(e){var t;const{legacyColor:r}=e,s=(0,a().v3)(),l=(0,i().K8)((()=>A().default.state.currentUserStore),[]),c=(0,i().K8)((()=>null==l?void 0:l.getEmail()),[l]),d="makenotion.com"===(0,o(842599).zN)(c??""),[u,p]=n.useState("");n.useEffect((()=>{!async function(){try{const e=await(0,o(529543).getCookie)(s,"notion_ghost_preferred_role");p((t=>e??""))}catch(e){console.error(e)}}()}));const m="full"===u?"restricted":"full",g=n.useCallback((async()=>{if(!c)return null;const e=await b().P(s,{email:c,intercomLink:"switch role",preferredLoginRole:m});if("failed"===e.type)S().V(),C().Qg(e);else{const{userId:t}=e.data,n=`Success! click "Continue" to enter account for "${c}" in ${x().v[m].text} mode.`,a=e.data.expiryTime?`${n} The user has granted access until ${(0,v().W_)(e.data.expiryTime,"medium_with_time",o(402390).q)}.`:n;S().V(),C().ui({message:a,showCancel:!1,keepFocus:!0,items:[{label:"Continue",color:"blue",onAccept:()=>{o(115261).N({userId:t,environment:s})}}]})}}),[s,c,m]);if(!c)return null;const f=(0,w.jsxs)(w.Fragment,{children:[`You are currently logged in as ${c}`,(0,w.jsx)("i",{children:u&&d?` (${null===(t=x().v[u])||void 0===t?void 0:t.text} access)`:""}),"."]});let y=[{label:"Back to Admin Console",onClick:()=>{_().oo({environment:s,url:"/__admin"})}},{label:"Logout as user",onClick:()=>{b().A(s)}}];return u&&d&&(y=[{label:`Switch to ${x().v[m].text} mode`,onClick:()=>g()},...y]),(0,w.jsx)(k().l,{label:f,display:"full-width",actions:y,tint:(0,M().V)(r)})};o(944114);var I=()=>o(401497),j=()=>o(584262),B=()=>o(921940),P=()=>o(959013),R=()=>o(284371),V=()=>o(780054),L=()=>o(704152);const D=(0,P().YK)({viewTutorial:{id:"pageViewBlock.asanaImporterBanner.tutorialPage",defaultMessage:"View tutorial"}});const F=function(e){let{blockStore:t,legacyColor:r}=e;const{tutorial_page:s,number_of_projects:l}=(0,i().K8)((()=>{var e,o;return{tutorial_page:null===(e=t.getFormat())||void 0===e?void 0:e.asana_importer_tutorial_page,number_of_projects:(null===(o=t.getFormat())||void 0===o?void 0:o.asana_importer_number_of_projects)??0}}),[t]),c=(0,a().v3)(),d=((0,I().IS)((e=>({helpCenterButtonStyles:{display:"flex",alignItems:"baseline",justifyContent:"center",alignContent:"center",fontSize:R().J.UIRegular.desktop,padding:"6px, 0px, 0px, 0px",borderRadius:4,color:e.text.secondary,marginTop:5,width:298,height:28,gap:"4px",lineHeight:"18px"},externalLinkIcon:{width:16,height:16,padding:"0.5px, 0px, 0px, 0px"},helpCenterButtonTextStyles:{width:238,height:18,font:"SF Pro",fontWeight:R().Wy.medium,fontSize:R().J.UIRegular.desktop,color:e.accentColors.uiBlue[600]}})),[]),(0,n.useCallback)((()=>{_().oo({url:(0,B().A)({pageId:s,pageModel:void 0===s?void 0:c.defaultRecordCache.inMemoryRecordCache.getRecordModel({pointer:{table:o(179034).ev,id:s},userId:c.currentUser.id}),baseUrl:V().A.domainBaseUrl,pageVisitSource:j().y8.Import}),environment:c})}),[c,s])),u=(0,n.useCallback)((()=>{o(751156).createAndCommit({environment:c,userAction:"userSettingsActions.setDismissedAsanaImporterBanner",canUndo:!0,perform:e=>{o(246826).zv({store:t.getFormatStore(),transaction:e,data:{dismissed_asana_import_banner:!0}})}})}),[t,c]),p=[];s&&p.push({label:(0,w.jsx)(P().sA,{...D.viewTutorial}),onClick:()=>d()}),p.push({label:(0,w.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.dismiss",defaultMessage:"Dismiss"}),onClick:u});const m=(0,n.useMemo)((()=>(0,w.jsx)(P().sA,{id:"pageViewBlock.asanaImporterBanner.tutorial",defaultMessage:"Imported {number_of_projects} Asana {project_or_projects} to Notion",values:{number_of_projects:l,project_or_projects:1===l?"project":"projects"}})),[l]);return(0,w.jsx)(k().l,{label:m,display:"full-width",actions:p,tint:(0,M().V)(r)})};var O=()=>o(30626),N=()=>o(253093),E=()=>o(885791),U=()=>o(112452),q=()=>o(209660),W=()=>o(345913),K=()=>o(96689),z=()=>o(100622),H=()=>o(492414),$=()=>o(630116),Z=()=>o(296798),J=()=>o(614505),G=()=>o(16006);function Y(e){const{urlStore:t,titleStore:o}=e,n=(0,a().Y0)(),r=o||t,{icon:s,url:l}=(0,i().K8)((()=>({icon:r.getIcon(),url:(0,H().Ay)({store:t,fullyQualified:!1,pageVisitSource:j().y8.Move})})),[r,t]);return(0,w.jsxs)(Z().A,{href:l,style:{display:"inline-flex"},innerStyle:{display:"inline-flex",alignItems:"baseline"},children:[(0,w.jsx)(J().B,{disabled:!0,icon:s,isEmptyPage:!1,size:n.isMobile?18:16,emojiSize:n.isMobile?24:20,style:{marginRight:"0.2em",fill:""},pageIconStyle:{fill:z().Ay.white}}),(0,w.jsx)(G().A,{store:r,style:{fontWeight:R().Wy.medium}})]})}function Q(e){let{movedSourceBlockStore:t,moveTarget:o}=e;return n.useMemo((()=>(0,w.jsx)(Y,{urlStore:$().Bv.createChildStore(t,o.moved_to),titleStore:$().SL.createChildStore(t,{table:K().NX,id:o.moved_to.spaceId})})),[t,o])}function X(e){let{movedSourceBlockStore:t,moveTarget:o}=e;const n=Q({movedSourceBlockStore:t,moveTarget:o});return(0,w.jsx)(P().sA,{defaultMessage:"Moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.pageMovedMessage",values:{targetSpaceLink:n}})}function ee(e){let{movedSourceBlockStore:t,moveTarget:o}=e;const n=Q({movedSourceBlockStore:t,moveTarget:o});return(0,w.jsx)(P().sA,{defaultMessage:"{movedAncestorLink} was moved to {targetSpaceLink}.",id:"pageViewBlock.movedPageBanner.ancestorMovedMessage",values:{targetSpaceLink:n,movedAncestorLink:(0,w.jsx)(Y,{urlStore:t})}})}var te=()=>o(722872),oe=()=>o(58293),ne=()=>o(962730),ae=()=>o(463830),ie=()=>o(577437);const re=function(e){const t={display:"inline-flex",alignItems:"center",whiteSpace:"nowrap",borderRadius:6,height:28,padding:"0 8px",lineHeight:1.2,fontSize:14,color:z().Ay.white,border:`1px solid ${z().Ay.white}`};return(0,w.jsxs)(L().A,{onClick:e.onClick,style:{...t,...e.style},children:[e.icon,e.children]})};var se=()=>o(760217),le=()=>o(406699),ce=()=>o(285790),de=()=>o(928600),ue=()=>o(939740),pe=()=>o(897119),me=()=>o(89924),ge=()=>o(662303),fe=()=>o(624090),ye=()=>o(416504),he=()=>o(563884),ve=()=>o(287882),be=()=>o(501497),Ce=()=>o(907514),Se=()=>o(891078),_e=()=>o(755023),xe=()=>o(659799);function Me(e){const{blockStore:t,intl:o}=e,n=(0,oe().r)(),a=(0,Se().ME)(t),{trashAuthorDisplayName:r,trashTimestamp:s,isMovedToTrashMetadata:l}=(0,_e().x)({blockStore:t,closestNonAliveAncestorStore:a,intl:o}),c=(0,i().K8)((()=>(0,fe().XX)(null==n?void 0:n.getModel())),[n]),d=(0,i().K8)((()=>{const e=(0,be().RC)();return(0,fe().vw)({movedToTrashTime:l?s:void 0,deleteFromTrashDelayMs:c,cdrrDeletionEnabledTimestamp:e})}),[l,s,c]);if(d<=Date.now()){const e=(0,ve().rN)(c/1e3,o);return(0,w.jsx)(P().sA,{defaultMessage:"This page will be deleted soon since it was moved to the Trash over {retentionWindowCopy} ago",id:"pageViewBlock.trashBanner.message.pendingDeletion",values:{retentionWindowCopy:e}})}const u=(0,Ce().nl)(s,{roundDownYears:!0,useWeeks:!0,useLowercase:!0}),p=(0,v().W_)(s,"medium_with_time",ge().locale),m=(0,be().tD)({type:"daterange",start_date:(0,v().aD)(Date.now()),end_date:(0,v().aD)(d)},(0,ye().P)(),o);return l?(0,w.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} moved this page to Trash{movedToTrashDateComponent}. It will automatically be deleted in{numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.trashMetadata",values:{trashAuthorDisplayName:r,movedToTrashDateComponent:(0,w.jsx)(xe().A,{text:u,tooltipText:p,icon:he().k}),numDaysLeftInTrashComponent:(0,w.jsx)(xe().A,{text:m,tooltipText:(0,v().aD)(d),icon:he().k})}}):(0,w.jsx)(P().sA,{defaultMessage:"{trashAuthorDisplayName} last edited this page{lastEditedDateComponent}. It will automatically be deleted in{numDaysLeftInTrashComponent}.",id:"pageViewBlock.trashBanner.message.lastEdited",values:{trashAuthorDisplayName:r,lastEditedDateComponent:(0,w.jsx)(xe().A,{text:u,tooltipText:p,icon:he().k}),numDaysLeftInTrashComponent:(0,w.jsx)(xe().A,{text:m,tooltipText:(0,v().aD)(d),icon:he().k})}})}function Ae(e){var t;let{spaceStore:o,blockStore:n,sourceBlock:r}=e;const s=(0,a().v3)(),l=null===(t=s.currentUser)||void 0===t?void 0:t.id,c=(0,a().Y0)(),d=(0,i().K8)((()=>Ie(s,n,o,l)),[s,n,o,l]),u=(0,I().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",...c.isMobile&&{flexWrap:"wrap",paddingTop:8,paddingBottom:8}},button:{...c.isMobile&&{marginTop:8}}})),[c.isMobile]),{message:p,restoreVariant:m}=(0,i().K8)((()=>{const{store:e,moved:t}=r,o=e.id===n.id;return{message:o?(0,w.jsx)(X,{movedSourceBlockStore:e,moveTarget:t}):(0,w.jsx)(ee,{movedSourceBlockStore:e,moveTarget:t}),restoreVariant:o?"lastVersion":"currentPage"}}),[n.id,r]);return(0,w.jsxs)("div",{style:u.banner,children:[(0,w.jsx)("div",{children:p}),d&&(0,w.jsx)("div",{style:u.button,children:(0,w.jsx)(Te,{variant:m,blockStore:n})})]})}function ke(e){var t;const o=(0,P().tz)(),n=(0,a().v3)(),{spaceStore:r}=e,s=(0,i().uB)(void 0,ae().A),l=(0,I().IS)((()=>({popupMenu:{},iconContainer:{marginLeft:12},dotsIcon:{fill:"currentColor"},itemIcon:{height:18,width:18,fill:"currentColor"}})),[]),c=(0,ie().P9)({name:"configurable_deletion_and_retention_settings",spaceId:null==r?void 0:r.id,userId:null===(t=n.currentUser)||void 0===t?void 0:t.id});if(!(0,i().K8)((()=>(null==r?void 0:r.canAdmin())&&c),[r,c]))return null;const d=[{key:"open-settings",render:e=>(0,w.jsx)(se().A,{...e,icon:(0,N().j)(l.itemIcon),title:(0,w.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.title",defaultMessage:"Deletion and retention settings"}),caption:(0,w.jsx)(P().sA,{id:"pageViewBlock.trashBanner.workspaceOwnerActions.openRetentionSettings.caption",defaultMessage:"Only workspace owners can change this"})}),action:()=>{q().Ow({currentTab:"security",subtab:"data_retention"})}}],u={key:"actions",render:e=>(0,w.jsx)(me().A,{...e}),items:d};return(0,w.jsx)(le().Ay,{popupType:pe().nl.Popup,alignmentToOrigin:ne().C.Center,placementToOrigin:ne().W.Bottom,style:l.popupMenu,render:()=>(0,w.jsx)(de().A,{menuType:te().gu.Popup,children:(0,w.jsx)(ue().Ay,{type:ue().Oh.Vertical,initialFocus:void 0,sections:[u]})}),buttonPopupStore:s,renderOrigin:e=>(0,w.jsx)(ce().A,{style:l.iconContainer,iconStyle:l.dotsIcon,ariaLabel:o.formatMessage({id:"restoreDeleteBannerMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:O()._,...e})})}function we(e){let{blockStore:t}=e;const o=(0,a().v3)(),i=(0,n.useCallback)((()=>{W().Ne({environment:o,blocks:[t],from:"trash_banner"})}),[o,t]),r=je();return(0,w.jsxs)(n.Fragment,{children:[(0,w.jsx)(Te,{variant:"default",blockStore:t}),(0,w.jsx)(re,{style:r.button,onClick:i,icon:(0,E().h)(r.icon),children:(0,w.jsx)(P().sA,{defaultMessage:"Delete from Trash",id:"pageViewBlock.trashBanner.deleteFromTrashButton.label"})})]})}function Te(e){let{variant:t,blockStore:o}=e;const r=(0,a().v3)(),s=(0,i().K8)((()=>({default:(0,w.jsx)(P().sA,{defaultMessage:"Restore page",id:"pageViewBlock.trashBanner.restoreButton.label"}),lastVersion:(0,w.jsx)(P().sA,{defaultMessage:"Restore last version",id:"pageViewBlock.trashBanner.restoreLastVersionButton.label"}),currentPage:(0,w.jsx)(P().sA,{defaultMessage:"Restore current page",id:"pageViewBlock.trashBanner.restoreCurrentPageButton.label"})}[t])),[t]),l=(0,n.useCallback)((()=>{const{currentSpaceStore:e}=A().default.state;e&&W().iN({environment:r,block:o,spaceId:o.pointer.spaceId||e.id,from:"trash_banner"})}),[o,r]),c=je();return(0,w.jsx)(re,{style:c.button,onClick:l,icon:(0,U()._)(c.icon),children:s})}function Ie(e,t,o,n){const a=(0,ie().zD)(e,{name:"configurable_deletion_and_retention_settings",spaceId:null==o?void 0:o.id,userId:n});if(null!=o&&o.canAdmin()&&a)return!0;if(!t.canEdit())return!1;if(!t.isNavigableBlock())return!1;const i=t.getParentStore();return!i||i.canEdit()}function je(){return(0,I().IS)((e=>({button:{marginLeft:12},icon:{width:14,height:14,marginRight:6}})),[])}const Be=function(e){var t;let{blockStore:o}=e;const r=(0,a().v3)(),s=null===(t=r.currentUser)||void 0===t?void 0:t.id,l=(0,a().Y0)(),c=(0,P().tz)(),d=(0,I().IS)((()=>({banner:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"visible",whiteSpace:"normal",padding:"8px 4px",...l.isMobile&&{flexWrap:"wrap",width:"100%",paddingTop:8,paddingBottom:8}}})),[l.isMobile]),u=(0,oe().r)(),p=(0,i().K8)((()=>Ie(r,o,u,s)),[r,o,u,s]),m=(0,i().K8)((()=>l.isPhone&&p),[l.isPhone,p]),g=(0,i().K8)((()=>o.getClosestMovedBlock()),[o]),f=(0,w.jsx)("span",{children:(0,w.jsx)(Me,{blockStore:o,intl:c})}),y=(0,w.jsx)(P().sA,{defaultMessage:"This page was PERMANENTLY deleted.",id:"pageViewBlock.permanentlyDeleted.message"}),h=(0,i().K8)((()=>V().A.isAdminMode&&o.pathHasDeletedPermission()),[o]);return g?(0,w.jsx)(Ae,{spaceStore:u,blockStore:o,sourceBlock:g}):m?(0,w.jsx)("div",{style:d.banner,children:(0,w.jsx)(we,{blockStore:o})}):h?(0,w.jsxs)("div",{children:[y,(0,w.jsx)(Te,{variant:"default",blockStore:o})]}):p?(0,w.jsxs)(n.Fragment,{children:[(0,w.jsx)("div",{style:d.banner,children:f}),(0,w.jsx)(we,{blockStore:o}),(0,w.jsx)(ke,{spaceStore:u})]}):(0,w.jsx)("div",{style:d.banner,children:f})};var Pe=()=>o(340498);const Re=(0,Pe().xh)("wifiExclamationMark",{default:{loader:()=>o.e(53463).then(o.bind(o,653463))},small:{loader:()=>o.e(36425).then(o.bind(o,936425))},mini:{loader:()=>o.e(58391).then(o.bind(o,258391))},large:{loader:()=>o.e(82237).then(o.bind(o,782237))}});const Ve=function(e){const{legacyColor:t}=e,n=(0,i().O$)(o(964345).ei),a=(0,i().K8)((()=>Boolean(null==n?void 0:n.isTranscriptionBlock())),[n]);return(0,w.jsx)(k().l,{label:a?(0,w.jsx)(P().sA,{id:"dictationConnectionBanner.transcription.message",defaultMessage:"We cant reach our transcription server right now. Please check your connection"}):(0,w.jsx)(P().sA,{id:"dictationConnectionBanner.dictation.message",defaultMessage:"We cant reach our dictation server right now. Please check your connection"}),display:"full-width",actions:[],tint:(0,M().V)(t),iconGroup:Re})};var Le=()=>o(857783),De=()=>o(696746),Fe=()=>o(184966),Oe=()=>o(732800),Ne=()=>o(478146),Ee=()=>o(659915),Ue=()=>o(661945),qe=()=>o(952412);function We(e){const{legacyColor:t,blockStore:o}=e,r=(0,a().v3)(),s=(0,i().K8)((()=>qe().u.getState().setComposerStyle),[]),l=(0,n.useCallback)((()=>{const e=De().XH("main");e&&e.load().then((()=>{e.canRead()&&Le().uK({environment:r,store:e,pageVisitSource:j().y8.PersonalHomeUnknown})}))}),[r]),c=(0,i().K8)((()=>Ue().A.state.isOpen),[]),d=(0,n.useCallback)((()=>{Fe().tt({environment:r,draftPostStore:o,onSubmitPost:l,from:"expanded_banner"}),null==s||s("preview")}),[r,o,l,s]),u=(0,n.useCallback)((()=>{o&&(0,Ee().s)(o)?Ue().A.setState({isOpen:!0}):d()}),[o,d]),p=[{isCustom:!1,label:(0,w.jsx)(P().sA,{defaultMessage:"Post",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.postButton.label"}),onClick:u}];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(k().l,{label:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(P().sA,{defaultMessage:"This page is unpublished and will share to",id:"pageViewBlock.draftPostInExpandedFeedComposerBanner.message"})," ",(0,w.jsx)(Ne().eO,{postStore:o})]}),display:"full-width",actions:p,tint:(0,M().V)(t)}),(0,w.jsx)(Oe().A,{postStore:o,isOpen:c,onDismiss:()=>Ue().A.setState({isOpen:!1}),onConfirm:()=>{Ue().A.setState({isOpen:!1}),d()}})]})}const Ke=function(e){const{legacyColor:t}=e,a=(0,n.useCallback)((()=>{o(411671).A.setState({editing:!1,commenting:!0})}),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.status",defaultMessage:"You can now edit this page."}),display:"full-width",actions:[{label:(0,w.jsx)(P().sA,{id:"pageViewBlock.editingPageBanner.stop",defaultMessage:"Done editing"}),onClick:()=>a()}],tint:(0,M().V)(t)})};const ze=function(e){let{blockStore:t,legacyColor:n}=e;const a=(0,i().K8)((()=>o(864260).A.state.pageMap[t.id]),[t.id]);if(!a)return null;const r=(0,w.jsx)(P().sA,{defaultMessage:"Imported {importedNumberOfNotes} of {totalNumberOfNotes}",values:{importedNumberOfNotes:a.importedNotes,totalNumberOfNotes:a.totalNotes},id:"pageViewBlock.evernoteBanner.contents"});return(0,w.jsx)(k().l,{label:r,display:"full-width",actions:[],tint:(0,M().V)(n)})};var He=()=>o(464762);const $e=(0,Pe().xh)("exclamationMarkCircleFill",{default:{loader:()=>o.e(1117).then(o.bind(o,601117))},small:{loader:()=>o.e(7103).then(o.bind(o,607103))},mini:{loader:()=>o.e(68977).then(o.bind(o,368977))},micro:{loader:()=>o.e(43774).then(o.bind(o,743774))},large:{loader:()=>o.e(84535).then(o.bind(o,484535))},max:{loader:()=>o.e(84535).then(o.bind(o,484535))}});var Ze=()=>o(934839),Je=()=>o(159600),Ge=()=>o(792415),Ye=()=>o(150193),Qe=()=>o(826128);function Xe(e){const{isMobile:t}=e,o=(0,Je().s)(),n=(0,i().K8)((()=>{var e;return null===(e=Ge().A.getState().publicPageData)||void 0===e?void 0:e.publicAccessRole}),[]),a=(0,P().tz)();if(!t)return null;const{label:r,actionLabel:s}=(0,Qe().p)({publicAccessRole:n,intl:a}),l=[{label:s,onClick:()=>o("banner")}];return(0,w.jsx)(k().l,{label:r,iconGroup:$e,display:"full-width",actions:l,tint:M().q.Yellow,onDismiss:()=>{Ze().zA({bannerStore:Ye().A,id:"LoggedOutAppBanner"})}})}var et=()=>o(711059);const tt=function(e){const{legacyColor:t}=e,{mobileNative:n,device:r}=(0,a().v3)(),{osVersion:s}=r,l=(0,I().IS)((()=>({updated:{whiteSpace:"normal",textAlign:"center",flex:"1 auto"}})),[]),c=(0,i().K8)((()=>r.isAndroid&&(0,et().isLessThanVersion)(s,[7,0])?"Android 7.0":r.isIOS&&(0,et().isLessThanVersion)(s,[16,0])?"iOS 16.0":void 0),[r.isAndroid,r.isIOS,s]);if(!n||!n.api.openUpdateSettings||!c)return null;const d=(0,w.jsx)(P().sA,{defaultMessage:" This operating system is no longer supported.{br}Please <upgradelink>upgrade to {supportedPlatformVersion} or later.</upgradelink>.",id:"appUpdateListener.mobilePlatformNotSupported.message",values:{br:(0,w.jsx)("br",{}),upgradelink:e=>(0,w.jsx)(o(719147).A,{onClick:()=>{n.openUpdateSettings()},disableHover:!0,children:e}),supportedPlatformVersion:c}});return(0,w.jsx)(k().l,{label:(0,w.jsx)("div",{style:l.updated,children:d}),display:"full-width",actions:[],tint:(0,M().V)(t)})};const ot=function(e){const{legacyColor:t}=e;return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{defaultMessage:"This page is in an archived teamspace.",id:"pageViewBlock.archivedTeamBanner.message"}),display:"full-width",actions:[],tint:(0,M().V)(t)})};var nt=()=>o(128871);function at(){const{markBannerAsDismissed:e}=(0,nt().b)(),t=(0,i().K8)((()=>{var e;return null===(e=Ge().A.getState().publicPageData)||void 0===e?void 0:e.publicAccessRole}),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)(P().sA,{defaultMessage:"When you start {permission}, your name, email and photo may become visible to anyone who can view the page.",id:"publicShareLinkEditDisclosureBanner.banner",values:{permission:"comment_only"===t?"commenting":"editing"}}),iconGroup:$e,display:"full-width",tint:M().q.Blue,onDismiss:()=>{Ze().zA({bannerStore:Ye().A,id:"PublicShareLinkEditDisclosureBanner"}),e()}})}var it=()=>o(322769),rt=()=>o(755636),st=()=>o(836251);const lt=function(e){let{blockStore:t,legacyColor:s}=e;const l=(0,a().v3)(),c=(0,w.jsx)(P().sA,{defaultMessage:"This workspace is in a read-only state while the contents are being duplicated.",id:"pageViewBlock.contentDuplicationInProgress.message"}),d=(0,w.jsx)(P().sA,{defaultMessage:"This workspace's contents have been duplicated. Navigate to the new workspace for edits.",id:"pageViewBlock.contentDuplicationCompleted.message"}),{spaceRequestStatus:u,targetSpaceId:p}=(0,i().K8)((()=>{const e=o(108944).Gg(t);return e&&(0,it().vW)(e)?{spaceRequestStatus:e.status,targetSpaceId:e.target_space_id}:{spaceRequestStatus:void 0,targetSpaceId:void 0}}),[t]),m=(0,n.useCallback)((()=>{const e=(0,st().xS)("guides.workspaceConsolidation");rt().f({environment:l,url:e})}),[l]),g=(0,n.useCallback)((e=>{_().oo({environment:l,url:(0,it().UL)({spaceId:e,baseUrl:V().A.domainBaseUrl}),openInNew:"tab"})}),[l]);let f;const y=[{label:(0,w.jsx)(P().sA,{defaultMessage:"Learn more",id:"pageViewBlock.contentDuplication.learnMoreButton.label"}),onClick:()=>m()}];if("started"===u||"failed_with_closed_source"===u)f=c;else if("completed"===u||"pending_deletion"===u)f=d,y.push({label:(0,w.jsx)(P().sA,{defaultMessage:"Visit new workspace",id:"pageViewBlock.contentDuplication.linkToTargetWorkspace.label"}),onClick:()=>g(p)});else{if(!u)return null;(0,r().HB)(u)}return(0,w.jsx)(k().l,{label:f,display:"full-width",actions:y,tint:(0,M().V)(s)})};var ct=()=>o(973454);function dt(){const e=(0,P().tz)(),t=(0,a().v3)(),o=(0,i().K8)((()=>{var e;return null===(e=A().default.state.currentSpaceStore)||void 0===e?void 0:e.getFreezeSettings()}),[]),{freezeStatus:r,minUntilFreeze:s}=(0,ct().A)(o),l=(0,n.useCallback)((()=>{const e=(0,st().xS)("guides.workspaceConsolidation");rt().f({environment:t,url:e})}),[t]);if(!o||"disabled"===r||"scheduled"===r)return null;const c=(0,w.jsx)(P().sA,{defaultMessage:"This workspace will be frozen for migration in {timeRemaining}, during which some features may be temporarily unavailable.",id:"workspaceFreeze.banners.scheduled_migration",values:{timeRemaining:s&&s>60?e.formatRelativeTime(Math.floor(s/60),"hour"):e.formatRelativeTime(s??0,"minute")}}),d=(0,w.jsx)(P().sA,{defaultMessage:"This workspace is currently frozen to perform a migration. Changes cannot be saved at this time.",id:"workspaceFreeze.banners.active_migration"}),u=[{label:(0,w.jsx)(P().sA,{defaultMessage:"Learn more",id:"workspaceFreeze.banners.learn_more"}),onClick:()=>l()}];return(0,w.jsx)(k().l,{label:"warning"===r?c:d,display:"full-width",actions:u,tint:(0,M().V)("warning"===r?M().q.Yellow:M().q.Red)})}var ut=()=>o(148024);function pt(e){const{message:t,mobileMessage:o,learnMoreLink:n,tint:i}=e,r=(0,a().Y0)(),s=(0,a().v3)(),l=(0,I().IS)((e=>({messageContainer:{display:"flex",alignItems:"center",minWidth:0,whiteSpace:"nowrap"},updatedHelpContainer:{display:"flex",flex:1,gap:4,alignItems:"center"}})),[]);return(0,w.jsx)(k().l,{label:(0,w.jsx)("div",{style:l.messageContainer,children:r.isMobile?o:t}),display:"full-width",actions:e.actions,onLearnMoreClick:()=>{ut().FH(s,{from:"collection_template_topbar"}),n&&_().oo({environment:s,url:n,openInNew:"tab"})},tint:i})}const mt=(0,P().YK)({editInsideButton:{defaultMessage:"<mediumtext>You're editing a template in a button</mediumtext>",id:"pageViewBlock.templatePageBanner.editInsideButton"},editInsideButtonMobile:{defaultMessage:"<mediumtext>Template inside button</mediumtext>",id:"pageViewBlock.templatePageBanner.mobile.editInsideButton"}});const gt=function(e){let{context:t,legacyColor:o}=e;return(0,w.jsx)(pt,{context:t,message:(0,w.jsx)(P().sA,{...mt.editInsideButton,values:{mediumtext:e=>(0,w.jsx)("span",{children:e})}}),mobileMessage:(0,w.jsx)(P().sA,{...mt.editInsideButtonMobile,values:{mediumtext:e=>(0,w.jsx)("span",{children:e})}}),tint:(0,M().V)(o)})};var ft=()=>o(792485),yt=()=>o(668725),ht=()=>o(496603),vt=()=>o(131276),bt=()=>o(104636),Ct=()=>o(898125),St=()=>o(485894),_t=()=>o(726483),xt=()=>o(731320),Mt=()=>o(620149),At=()=>o(661764);const kt=(0,P().YK)({viewTemplate:{defaultMessage:"<mediumtext>You're viewing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.viewTemplateLabel"},editTemplate:{defaultMessage:"<mediumtext>You're editing a template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.editTemplateLabel"},editTemplateMobile:{defaultMessage:"<mediumtext>Template in</mediumtext> {pageTitleWithIcon}",id:"pageViewBlock.templatePageBanner.mobile.editTemplateLabel"},repeatEvery:{defaultMessage:"Repeat every",id:"pageViewBlock.templatePageBanner.repeatEveryLabel"}});function wt(e){let{blockStore:t,context:o,disabled:r,legacyColor:s}=e;const l=(0,i().K8)((()=>t.getAssociatedCollectionStore()),[t]),c=(0,i().K8)((()=>{const e=null==l?void 0:l.getParentBlockStore();if(e)return(0,B().A)({pageId:e.id,pageVisitSource:j().y8.LinkInPage})}),[l]),d=(0,ft().S)(),u=(0,i().K8)((()=>{if(r)return!1;if(Mt().l.state)return!1;const e=d&&d.publicEditModeStore.state;if((0,xt().QT)(e))return kt.viewTemplate;return t.canEdit()?kt.editTemplate:kt.viewTemplate}),[d,r,t]),p=function(e){let{legacyColor:t}=e;return(0,I().IS)((e=>({innerLinkBox:{display:"flex",alignItems:"center"},linkBox:{marginLeft:8,marginRight:8,minWidth:0},linkBoxMobile:{marginLeft:8,marginRight:"auto",minWidth:0},recordTitle:{marginLeft:4,maxWidth:380},recordTitleMobile:{marginLeft:4,marginRight:8},chevron:{width:10,marginLeft:4,fill:At().pq[(0,M().V)(t)](e)}})),[t])}({legacyColor:s}),m=(0,st().xS)("guides.databaseTemplates"),g=(0,i().K8)((()=>null==l?void 0:l.getIcon()),[l]),f=(0,a().v3)(),y=(0,P().tz)(),{isMobile:h}=(0,a().Y0)(),v=(0,i().K8)((()=>{const e=t.getAutomationStore();if(null!=e&&e.getActionStores())return null!=e&&e.isActive()?e.getRecurrence():void 0}),[t]),b=(0,n.useCallback)((async e=>{const{recurrenceActions:o}=await St().k.load();e?o.addRecurrence({environment:f,blockStore:t,recurrence:e}):o.deleteRecurrence({environment:f,blockStore:t})}),[f,t]),C=(0,vt().$)({recurrence:v,onChange:b,requireExplicitSaveAndAllowDelete:!0}),S=(0,i().K8)((()=>l&&_t().rc({collectionStore:l})),[l]);if(!l||!c||!u)return null;const _=[];return S&&!h&&_.push({isCustom:!0,render:()=>(0,n.createElement)(le().Ay,{...C,key:"recurrence-editor",popupType:le().z7.Popup,originGap:4,onClose:async()=>{C.hasUnpersistedChanges()&&!(await Ct().lT({hasPendingChanges:!0}))||(C.onClose(),C.buttonPopupStore.setState({open:!1}))},persistOnClose:!0,renderOrigin:e=>(0,w.jsx)(At().fT,{tint:(0,M().V)(s),action:{label:(0,w.jsxs)(w.Fragment,{children:[v?(0,ht().ZH)((0,bt().LS)({recurrence:v,intl:y,leadingPhrase:"repeat every"})):y.formatMessage(kt.repeatEvery),(0,yt().b)(p.chevron)]}),onClick:e.onClick,iconGroup:void 0}})})}),(0,w.jsx)(pt,{actions:_,learnMoreLink:m,context:o,message:(0,w.jsx)(P().sA,{...u,values:{mediumtext:e=>(0,w.jsx)("span",{children:e}),pageTitleWithIcon:(0,w.jsxs)(Z().A,{href:c,style:p.linkBox,innerStyle:p.innerLinkBox,children:[(0,w.jsx)(J().B,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,w.jsx)(G().A,{style:p.recordTitle,store:l,underline:!0})]})}}),mobileMessage:(0,w.jsx)(P().sA,{...kt.editTemplateMobile,values:{mediumtext:e=>(0,w.jsx)("span",{children:e}),pageTitleWithIcon:(0,w.jsxs)(Z().A,{href:c,style:p.linkBoxMobile,innerStyle:p.innerLinkBox,children:[(0,w.jsx)(J().B,{disabled:!0,icon:g,isEmptyPage:!1,size:20}),(0,w.jsx)(G().A,{style:p.recordTitleMobile,store:l,underline:!0})]})}}),tint:(0,M().V)(s)})}o(16280);var Tt=()=>o(748902),It=()=>o(498212),jt=()=>o(140612),Bt=()=>o(666144),Pt=()=>o(426116),Rt=()=>o(898486),Vt=()=>o(974233),Lt=()=>o(972435),Dt=()=>o(864943),Ft=()=>o(125565),Ot=()=>o(322114);function Nt(e){const t=(0,a().v3)(),{blockId:o,trustedDomainState:r}=e,s=o.spaceId,l=(0,i().K8)((()=>{var e;return"resolved"===r.status&&"click_to_join"===(null===(e=r.value)||void 0===e?void 0:e.joinSpaceMethod)}),[r]),c=(0,I().IS)((()=>({iconArrow:{height:18,width:18},title:{fontSize:17,fontWeight:500,lineHeight:"24px",paddingBottom:8}})),[]),d=(0,n.useCallback)((e=>{let t;if(e instanceof Vt().C){var o;const n=null==e||null===(o=e.data)||void 0===o||null===(o=o.responseBody)||void 0===o?void 0:o.clientData;n&&(t=(0,Rt().t4)(Lt().A.getIntl(),n))}else e instanceof Error&&(t=e.message);C().f1((0,w.jsxs)("div",{children:[(0,w.jsx)(Ft().A,{style:c.title,children:(0,w.jsx)(P().sA,{defaultMessage:"Oops, something went wrong.",id:"pageViewBlock.trustedDomainPageBanner.joinSpaceErrorDialog.message"})}),(0,w.jsx)("div",{children:t})]}))}),[c.title]),u=(0,n.useCallback)((async()=>{const{currentUserRootStore:e,currentUserSettingsStore:n}=A().default.state;if(s&&e)try{await Pt().DT({environment:t,userRootStore:e,spaceId:s,navigate:!0,analyticsFrom:"trusted_domain_page",userSettingsStore:n,redirectSource:"click_to_join_workspace_from_dls",isJoinableTrustedDomainViewer:l}),jt().w(t,{spaceId:s,pageId:o.id,joinSpaceMethod:"click_to_join"}),Bt().IL(t)}catch(a){d(a)}}),[t,s,o,l,d]);if("resolved"!==r.status||!r.value)return null;switch(r.value.joinSpaceMethod){case"request_to_join":const e=r.value.requestMembershipCustomizationRedirectUrl;return e?(0,w.jsxs)(Dt().A,{size:"lg",onClick:()=>{window.open(e,"_blank")},children:[(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.requestToJoin",defaultMessage:"Request membership"}),(0,Tt().arrowDiagonalUpRightFillSmallIcon)(c.iconArrow)]}):(0,w.jsx)(Ot().A,{type:"current-actor-to-space-via-block",block:o,flowId:(0,It().Ay)(),source:"trusted_domain_page",buttonType:"outline"});case"click_to_join":return(0,w.jsx)(Dt().A,{size:"lg",onClick:u,children:(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.clickToJoin",defaultMessage:"Join workspace"})});default:return null}}const Et=function(e){var t;const{legacyColor:n}=e,r=(0,i().K8)((()=>{const e=Ge().A.state.publicPageData;if(e&&e.spaceId&&e.pageId)return{spaceShardedBlockId:{spaceId:e.spaceId,id:e.pageId},spaceName:e.spaceName}}),[]),s=(0,a().v3)(),l=null==r||null===(t=r.spaceShardedBlockId)||void 0===t?void 0:t.spaceId,[c]=(0,o(187174).Yb)((async()=>{if(!l)return;const e=await o(449506).callApi({eventName:"getTrustedDomainForUser",environment:s,data:{spaceId:l}});return"success"===e.type?{joinSpaceMethod:e.data.joinSpaceMethod,requestMembershipCustomizationRedirectUrl:e.data.requestMembershipCustomizationRedirectUrl}:void 0}),[s,l]),d=(0,w.jsx)("div",{style:{gap:"auto",flexDirection:"row",alignItems:"center"},children:(0,w.jsxs)(o(84817).Y1,{direction:"horizontal",align:"center",width:"hug",gap:8,children:[(0,w.jsx)(o(554509).D,{styleName:"UIRegular-14px/Medium",children:(0,w.jsx)(P().sA,{id:"pageViewBlock.trustedDomainPageBanner.label",defaultMessage:"You're viewing a shared page in the {spaceName} workspace",values:{spaceName:null==r?void 0:r.spaceName}})}),(null==r?void 0:r.spaceShardedBlockId)&&Nt({blockId:r.spaceShardedBlockId,trustedDomainState:c})]})});return(0,w.jsx)(k().l,{display:"full-width-no-content",tint:(0,M().V)(n),content:d})};var Ut=()=>o(134217);const qt=function(e){const{legacyColor:t}=e,n=(0,a().v3)(),r=(0,i().K8)((()=>n.device.isMobile&&!n.device.isTablet),[n.device]),s=(0,i().K8)((()=>{const e="personal"===Ut().Si(n),t=o(749240).subscriptionDataStoreInstance.state,a=Ut().qc(t);return!((0,o(600871).mM)({environment:n})&&e&&!a)}),[n]),l=(0,w.jsx)(P().sA,{id:"uploadLimitExceededBanner.message",defaultMessage:"{shouldShowShortMessage, select, true {Your file is over the {maxFreeAccountFileSize} MB limit} other {Your file is over the {maxFreeAccountFileSize} MB limit of the Free plan}}",values:{shouldShowShortMessage:r,maxFreeAccountFileSize:o(892632).u1}}),c=(0,w.jsx)(P().sA,{id:"uploadLimitExceededBanner.upgradeButton.label",defaultMessage:"{shouldShowShortMessage, select, true {Upgrade} other {Upgrade for unlimited uploads}}",values:{shouldShowShortMessage:r}}),d=async()=>{await o(991249).K(n,{from:"upload_limit_banner",upsell:{type:"product",product:Ut().Si(n)||"plus",limit:{type:"none"},trialability:"none"}})};return(0,w.jsx)(k().l,{label:l,display:"full-width",actions:s?[{label:c,onClick:()=>d()}]:[],tint:(0,M().V)(t)})};var Wt=()=>o(716583);const Kt=(0,Pe().wt)("mobileNewFeatures",{viewBox:"0 0 26 26",svg:(0,w.jsx)("path",{d:"M12.3984 5.47754C12.5273 5.47754 12.5918 5.40234 12.624 5.28418C12.9463 3.49023 12.9355 3.44727 14.8047 3.09277C14.9229 3.07129 15.0088 2.99609 15.0088 2.86719C15.0088 2.73828 14.9229 2.66309 14.8047 2.6416C12.9355 2.26562 13 2.22266 12.624 0.450195C12.5918 0.332031 12.5273 0.256836 12.3984 0.256836C12.2695 0.256836 12.1943 0.332031 12.1729 0.450195C11.7969 2.22266 11.8613 2.26562 9.99219 2.6416C9.86328 2.66309 9.78809 2.73828 9.78809 2.86719C9.78809 2.99609 9.86328 3.07129 9.99219 3.09277C11.8613 3.46875 11.8398 3.49023 12.1729 5.28418C12.1943 5.40234 12.2695 5.47754 12.3984 5.47754ZM7.19922 12.8682C7.40332 12.8682 7.54297 12.7393 7.56445 12.5459C7.95117 9.67773 8.04785 9.67773 11.0127 9.1084C11.1953 9.07617 11.335 8.94727 11.335 8.74316C11.335 8.5498 11.1953 8.41016 11.0127 8.37793C8.04785 7.96973 7.94043 7.87305 7.56445 4.95117C7.54297 4.75781 7.40332 4.61816 7.19922 4.61816C7.00586 4.61816 6.86621 4.75781 6.83398 4.96191C6.49023 7.84082 6.3291 7.83008 3.38574 8.37793C3.20312 8.4209 3.06348 8.5498 3.06348 8.74316C3.06348 8.95801 3.20312 9.07617 3.42871 9.1084C6.35059 9.58105 6.49023 9.65625 6.83398 12.5244C6.86621 12.7393 7.00586 12.8682 7.19922 12.8682ZM14.4824 24.7598C14.7617 24.7598 14.9658 24.5557 15.0088 24.2656C15.7715 18.3789 16.6094 17.4873 22.4316 16.8428C22.7324 16.8105 22.9365 16.585 22.9365 16.3057C22.9365 16.0264 22.7324 15.8115 22.4316 15.7686C16.6094 15.124 15.7715 14.2324 15.0088 8.3457C14.9658 8.05566 14.7617 7.8623 14.4824 7.8623C14.2031 7.8623 13.999 8.05566 13.9561 8.3457C13.1826 14.2324 12.3555 15.124 6.5332 15.7686C6.23242 15.8115 6.02832 16.0264 6.02832 16.3057C6.02832 16.585 6.23242 16.8105 6.5332 16.8428C12.3447 17.6055 13.1504 18.3896 13.9561 24.2656C13.999 24.5557 14.2031 24.7598 14.4824 24.7598Z"})});const zt=function(e){const{onClick:t,legacyColor:o}=e,n=(0,a().v3)(),{isMobile:i}=n.device,r=(0,I().IS)((()=>({icon:{width:22,marginRight:8},mobileIcon:{width:26,marginRight:12},navigateReleaseAction:{minWidth:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},mobileButton:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"flex-start"},button:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),l=s().qZ?(0,w.jsxs)(w.Fragment,{children:[Kt(i?r.mobileIcon:r.icon),(0,w.jsx)("div",{style:r.navigateReleaseAction,children:(0,w.jsx)(P().sA,{defaultMessage:"Update and see what's new",id:"updateBanner.updateAvailableBanner.message"})})]}):(0,w.jsx)("div",{children:i?(0,w.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirectMobile",defaultMessage:"Tap here to update to the latest version"}):(0,w.jsx)(P().sA,{id:"updateBanner.updateMessage.noRedirect",defaultMessage:"Click here to update to the latest version"})});return(0,w.jsx)(k().l,{label:void 0,display:"full-width",actions:[{label:l,onClick:e=>t(e)}],tint:(0,M().V)(o)})};function Ht(e){let{isInPeekRenderer:t,arbitraryRenderBefore:o,banners:n,isMobile:r}=e;const s=(0,a().v3)(),l=(0,i().K8)((()=>(0,c().zo)(s,t)),[s,t]);return(0,w.jsxs)("div",{style:{width:`calc(100% - ${l}px)`,userSelect:"none",WebkitUserSelect:"none"},children:[o,n.map(((e,t,o)=>(0,w.jsx)($t,{banner:e,index:t,array:o,isMobile:r},e.id)))]})}function $t(e){let{banner:t,index:o,array:n,isMobile:c}=e;const v=(0,a().v3)(),{styleKey:b,contentKey:C}=t,S=n.length>1&&o!==n.length-1,_=(0,i().K8)((()=>(0,p().Km)(v)),[v]);switch(C){case"russian_sanctions":return(0,w.jsx)(y().k,{});case"missing_name":return(0,w.jsx)(He().M,{});case"over_free_block_limit":return _?(0,w.jsx)(w.Fragment,{}):(0,w.jsx)(u().default,{});case"editing_page":return(0,w.jsx)(Ke,{legacyColor:b});case"subscription_trial_add_payment_method":return(0,w.jsx)(l().b,{legacyColor:b});case"upload_limit_exceeded":return(0,w.jsx)(qt,{legacyColor:b});case"admin_mode":return(0,w.jsx)(T,{legacyColor:b});case"arbitrary_subscription_banner":return(0,w.jsx)(g().U,{legacyColor:b});case"billing_subscription_status":return(0,w.jsx)(m().g,{legacyColor:b});case"test_clock":return(0,w.jsx)(f().i,{legacyColor:b});case"space_content_duplication":return(0,w.jsx)(lt,{blockStore:t.blockStore,legacyColor:b});case"space_freeze":return(0,w.jsx)(dt,{});case"minor_app_update":return(0,w.jsx)(zt,{onClick:()=>s().K0(v),legacyColor:b});case"mobile_platform_unsupported":return(0,w.jsx)(tt,{legacyColor:b});case"deleted_or_moved_page":return(0,w.jsx)(Wt().A,{styleKey:b,shouldUseDivider:S,isMobile:c,children:(0,w.jsx)(Be,{blockStore:t.blockStore})});case"page_in_archived_team":return(0,w.jsx)(ot,{legacyColor:b});case"draft_post_in_expanded_feed_composer":return(0,w.jsx)(We,{blockStore:t.blockStore,legacyColor:b});case"importing_evernote":return(0,w.jsx)(ze,{blockStore:t.blockStore,legacyColor:b});case"template_in_page":return(0,w.jsx)(wt,{blockStore:t.blockStore,context:t.context,disabled:t.disabled,legacyColor:b});case"template_in_button":return(0,w.jsx)(gt,{context:t.context,legacyColor:b});case"asana_importer_banner":return(0,w.jsx)(F,{blockStore:t.blockStore,legacyColor:b});case"site":return(0,w.jsx)(d().A,{blockStore:t.blockStore,legacyColor:b});case"dictation_connection":return(0,w.jsx)(Ve,{legacyColor:b});case"trusted_domain_page":return(0,w.jsx)(Et,{legacyColor:b});case"translate":return(0,w.jsx)(h().rN,{blockStore:t.blockStore});case"logged_out_app_banner":return(0,w.jsx)(Xe,{isMobile:c});case"public_share_link_edit_disclosure_banner":return(0,w.jsx)(at,{});default:(0,r().HB)(C)}}},485894:(e,t,o)=>{o.d(t,{k:()=>a,q:()=>i});var n=()=>o(645873);const a=new(n().O2)("recurrence",(async()=>{const[e,t,{TemplateRecurrenceConfigMenu:n}]=await Promise.all([Promise.all([o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,839916)),Promise.all([o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,390527)),Promise.all([o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(4422),o.e(82850),o.e(29021)]).then(o.bind(o,528411))]);return{recurrenceActions:e,recurrenceHelpers:t,TemplateRecurrenceConfigMenu:n}})),i=(0,n().jQ)(a,(e=>e.TemplateRecurrenceConfigMenu))},488887:(e,t,o)=>{function n(e,t){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}o.d(t,{_:()=>n})},501497:(e,t,o)=>{o.d(t,{RC:()=>l,S6:()=>c,tD:()=>d});var n=()=>o(847249),a=()=>o(624090),i=()=>o(869190),r=()=>o(604995),s=()=>o(508496);function l(){return s().default.getConfigKey("permanently_delete_tree_queue_task_override","cdrr_enabled_timestamp_override")??a().mu}function c(){return(0,n().K8)((()=>l()),[])}function d(e,t,o){const n=(0,r().AA)(e,t);if((0,r().ak)(n)){const e=n.end.diff(n.start),t=e.as("year");if(t>=1)return(0,i().up)({years:Math.round(t)},o);const a=e.as("days");if(a>=1&&a<=45)return(0,i().up)({days:Math.round(a)},o);const r=e.as("months");if(r>=1)return(0,i().up)({months:Math.round(r)},o);if(a>=1)return(0,i().up)({days:Math.round(a)},o);const s=e.as("hours");if(s>=1)return(0,i().up)({hours:Math.round(s)},o);const l=e.as("minutes");return(0,i().up)({minutes:Math.round(l)},o)}return""}},529803:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().default{}const a=new n},541181:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(645873);const a=new(n().O2)("react-day-picker",(async()=>await Promise.all([o.e(95555),o.e(75831),o.e(68548)]).then(o.bind(o,762290)))),i=(0,n()._h)(a,(e=>e.default))},546461:(e,t,o)=>{o.d(t,{EC:()=>_,To:()=>S,YC:()=>x,or:()=>C,u:()=>b});o(16280);var n=o(296540),a=()=>o(484714),i=()=>o(847249),r=()=>o(496506),s=()=>o(322867),l=()=>o(959013),c=()=>o(534177),d=()=>o(813297),u=()=>o(862292),p=()=>o(698331),m=()=>o(645873),g=()=>o(190019),f=()=>o(76190),y=o(474848);const h=new WeakMap,v=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});v.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:n}=e,b=(0,a().v3)(),C=(0,l().tz)(),{value:S}=(0,m().fJ)(u().T.formulas),{value:_}=(0,m().fJ)(d().QV.automationTypecheck),x=(0,f().n)(t),M=(0,i().K8)((()=>{if(!S)return{error:new(s().N9)("Missing formulas dependency")};if(!_)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:s,isSubscribed:l}=e,d=h.get(o);if(d)return d;{const e=new(r().default)((()=>{const e=o.getTriggerType();let r=a;return(0,c().O9)(e)&&(0,p().x2)(e)&&(r=(0,p().H8)(e)),(0,g().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:s,isSubscribed:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return h.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:_,contextType:n,formulasModule:S,intl:C,isSubscribed:x});return e.state}),[b,t,_,n,S,C,x]);return(0,y.jsx)(v.Provider,{value:{automationStore:t,typecheckResult:M,contextType:n,defined:!0},children:o})}function C(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,y.jsx)(b,{automationStore:t,contextType:(0,p().H8)(n??"event"),children:o})}function S(e){var t;return null===(t=h.get(e))||void 0===t?void 0:t.state}function _(){const e=n.useContext(v);if(!1===e.defined)throw new Error("No automation context found!");return e}function x(){return n.useContext(v)}},551619:(e,t,o)=>{o.d(t,{Hy:()=>j,NV:()=>T,O9:()=>P,Rg:()=>B,Sm:()=>V,dK:()=>L,f7:()=>R,l8:()=>D,n$:()=>F,no:()=>O,sx:()=>I});var n=()=>o(484714),a=()=>o(792485),i=()=>o(847249),r=()=>o(700500),s=()=>o(651124),l=()=>o(519831),c=()=>o(620689),d=()=>o(591197),u=()=>o(835066),p=()=>o(964345),m=()=>o(68465),g=()=>o(753199),f=()=>o(504836),y=()=>o(478726),h=()=>o(747100),v=()=>o(963589),b=()=>o(665579),C=()=>o(351360),S=()=>o(525569),_=()=>o(508496),x=()=>o(375447),M=()=>o(66496),A=()=>o(548821),k=()=>o(712505),w=()=>o(302022);function T(e){(0,g().SQ)({event:e,context:g().y$.EditorMouseDown,callback:()=>{}})}function I(e){(0,g().SQ)({event:e,context:g().y$.EditorClick,callback:()=>{}})}function j(e){return(0,i().K8)((()=>Boolean(w().A.state.pageMap[e.id])||M().A.state.pages.has(e.id)),[e.id])}function B(e,t){const o=(0,n().v3)(),r=(0,a().S)(),s=j(e),l=(0,i().K8)((()=>{var o,n;return t===A().Rr.Frame?Boolean(null===(o=C().default.state.currentLoadingContainerStore)||void 0===o?void 0:o.state.ready):t===A().Rr.PeekView&&k().default.state.open?Boolean(null===(n=k().default.state.loadingContainerStore)||void 0===n?void 0:n.state.ready):t===A().Rr.CollectionPageView||t===A().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=R(e);return(0,i().K8)((()=>{if(!l)return!1;const t=o.currentUser.isLoggedIn(),n=r&&r.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=n&&n.hasPublicPermission)||"edit"===(null==n?void 0:n.permission))&&!s&&!c&&(!(0,m().ZE)(n)||"completionPopup"!==S().default.state.type))}),[o.currentUser,c,l,r,s,e])}function P(e,t){const o=(0,n().v3)(),r=(0,a().S)(),{isTablet:s}=(0,n().Y0)(),l=(0,v().X)("tablet_refresh_template_pills_gate");return(0,i().K8)((()=>{if(t===A().Rr.SitePreview)return!1;if(o.device.isMobile&&(!s||!l))return!1;if(!o.currentUser.isLoggedIn())return!1;const n=r&&r.publicEditModeStore.state;if(null!=n&&n.hasPublicPermission&&"edit"!==(null==n?void 0:n.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const a=e.getContentStores()[0];if(a&&!a.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=p().gZ.state,c=p().Di.state;if(i&&e.id===c)return!1;return!((0,y().L5)(t)?d().VY.state:d().u3.state)}),[o,r,e,t,s,l])}function R(e){return(0,i().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(r().xd.externalObjectInstancePage)}),[e])}function V(e){return(0,i().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function L(e){return(0,i().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function D(e){return(0,i().K8)((()=>{if(!_().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().IE.CsvImport}),[e])}function F(e){const t=(0,n().v3)(),{device:o,WindowSizeStore:a}=t,r=(0,i().K8)((()=>{const e=a.state.height,n=o.isMobile&&x().A.state.open?e:0;return c().C6(t)+n}),[t,a,o.isMobile]);return(0,i().K8)((()=>"home-phone"===e?b().q3:o.isTablet?380:o.isIOS?Math.max(350,r):o.isMobile?400:"side-peek"===e||"center-peek"===e?h().ln:"home"===e?b().wH:"30vh"),[o,r,e])}function O(e){const t=(0,n().v3)(),o=(0,i().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,i().K8)((()=>o&&!e.isFullWidth()?(0,u().Zy)(t,(0,h().cq)(e),(0,h().RX)(e)):0),[t,o,e])}},556048:(e,t,o)=>{o.d(t,{C8:()=>p,Dz:()=>l,GC:()=>g,GL:()=>f,YY:()=>m,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>u,uj:()=>r});var n=()=>o(645873);const a={JiraSyncInfoPopup:new(n().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([o.e(75134),o.e(68744)]).then(o.bind(o,408453)))),ImproveJiraSyncPopup:new(n().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([o.e(75134),o.e(2686)]).then(o.bind(o,484967)))),JiraDCAuthModal:new(n().O2)("JiraDCAuthModal",(async()=>await o.e(28763).then(o.bind(o,992567)))),ExternalImportAndSyncIndicator:new(n().O2)("ExternalImportAndSyncIndicator",(async()=>await o.e(98288).then(o.bind(o,984289)))),JiraSyncedAllProjectsTooltip:new(n().O2)("JiraSyncedAllProjectsTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedAllIssuesTooltip:new(n().O2)("JiraSyncedAllIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(n().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncSourceTooltip:new(n().O2)("JiraSyncSourceTooltip",(async()=>await o.e(21446).then(o.bind(o,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(n().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await o.e(21446).then(o.bind(o,470020))))},i={JiraSyncTeamSpaceModal:new(n().O2)("JiraSyncTeamSpaceModal",(async()=>o.e(56188).then(o.bind(o,604698))))},r=(0,n()._h)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,n()._h)(a.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,n()._h)(a.JiraDCAuthModal,(e=>e.default)),c=(0,n()._h)(a.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,n()._h)(a.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,n()._h)(a.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,n()._h)(a.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),m=(0,n()._h)(a.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,n()._h)(a.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),f=(0,n()._h)(a.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,o(340498).xh)("jira",{default:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:20},small:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:16},mini:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:14},large:{loader:()=>o.e(60677).then(o.bind(o,460677)),size:24}})},558410:(e,t,o)=>{o.d(t,{A:()=>i});o(898992),o(354520);var n=()=>o(496603);class a extends(()=>o(757695))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:a,sortColumn:i}=this.state,r=this.state.sites[e];if(r)switch(i){case"page":return n().My(r,(e=>o(919709).q4_(e.store.getTitleValue()).toLowerCase()),a?"asc":"desc");case"published-by":return n().My(r,(e=>{const n=e.publishedMetadata.publishedBy,a=n?o(630116).sk.createChildStore(e.store,n):void 0;return null==a?void 0:a.getDisplayName(t).toLowerCase()}),a?"asc":"desc");case"published-date":return n().My(r,(e=>e.publishedMetadata.publishedTime),a?"asc":"desc");default:return r}}removeSiteFromSpace(e,t){const o=this.state.sites[e];o&&(this.state.sites[e]=o.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const i=new a},573351:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),a=o(474848);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:r=!0,onChange:s,onFocus:l,onBlur:c,disabledDays:d,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[m,g]=(0,n.useState)(p),f=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{f.current!==i&&(g(new Date(i)),f.current=i)}),[i]);const y=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,a.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,a.jsx)(o(541181).n,{locale:o(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:r?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:y,onMonthSelected:g,disabled:d,month:m,onDayBlur:c,onDayFocus:l})})}},591197:(e,t,o)=>{o.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>r});var n=()=>o(496506);class a extends(()=>o(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new a,r=new(n().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(n().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},603815:(e,t,o)=>{o.d(t,{A$:()=>A,JQ:()=>k,Vn:()=>x,s4:()=>M});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(857639),a=()=>o(585515),i=()=>o(577449),r=()=>o(388821),s=()=>o(179034),l=()=>o(545285),c=()=>o(534177),d=()=>o(449506),u=()=>o(780054),p=()=>o(989423),m=()=>o(870618),g=()=>o(303626),f=()=>o(14307),y=()=>o(245865),h=()=>o(540758),v=()=>o(670631),b=()=>o(508496),C=()=>o(571963),S=()=>o(603815),_=()=>o(108944);async function x(e){const{environment:t,request:o,abortSignal:n,prefetchCacheKey:a,headers:i}=e;return(0,C().updateLoadCachedPageChunkCalledAt)(),f().isConnected()||f().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:a,headers:i}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:a,headers:i})}async function M(e){const{mode:t,environment:o,request:c,isFirstChunk:d,abortSignal:f}=e,y={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await S().A$(o,{id:c.page.id,table:s().ev}),null!=f&&f.aborted))throw new Error("Abort signal received");const b=r().RecordMapWithRole.create(),C=[];let _=!1;const x=new Set,M=await a().T(y,i().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await m().h7({environment:o,pointer:e,abortSignal:f,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=f&&f.aborted)throw new Error("Abort signal received");if(n)return b.setModelAndRole(e,n.model,n.role),n.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!x.has(e.id)&&d){if(void 0===v().A.state.offlinePages)return C.push(e),void(_=!0);if(void 0===v().A.state.offlinePages||!h().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);C.push(e)}})),((e,t,o,n)=>{g().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=n&&n.suppressErrorOnClient&&x.add(t.id)}));if(_&&(await v().A.waitUntil((()=>void 0!==v().A.state.offlinePages)),!h().Bd(c.page.id))){const[e]=C;throw new Error(`Record not found: ${e.table},${e.id}`)}if(C.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&n().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:C}})})),null!=f&&f.aborted)throw new Error("Abort signal received");return{recordMap:b.toJson(),cursor:M.cursorValue}}async function A(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),y().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function k(e){if(!b().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=r().RecordMapPolymorphic.create();let o=0;const n=()=>o>=50,a=e=>{"space"!==(null==e?void 0:e.table)&&(n()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const r of(0,_().E)(e))a(r);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);a(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(n()||o>=10)break;o++,a(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(c().O9);return i.length?i:void 0}},654734:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),a=()=>o(869190),i=()=>o(604995),r=()=>o(416504),s=o(474848);const l=function(e){const t=(0,o(959013).tz)(),l=(0,o(401497).DP)(),u=(0,o(396182).I)(),p=(0,n.useRef)(),m=(0,n.useCallback)((()=>{const t=e.value;if(!t)return;const n=i().q8(t,(0,r().P)());if(!n)return;const a=n.valueOf(),s=a-Date.now();s<0||s>o(720665).nD||p.current&&p.current.timestamp===a||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:a,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),s)})}),[u,e.value]),g=(0,n.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,n.useEffect)((()=>{m()}),[m]),(0,n.useEffect)((()=>()=>{g()}),[g]);const{value:f,withComma:y}=e,h=(0,o(847249).K8)((()=>f?(0,a().ZF)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,r().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:o(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const v=i().AA(f,(0,r().P)(),o(662303).locale);let b;if(f.reminder){const e=i().Zs(f,(0,r().P)());b=e?{color:l.errorText}:{color:o(100622).Ay.blue}}const C=(0,s.jsxs)(s.Fragment,{children:[h,f.reminder&&(0,o(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),y?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},children:C}):(0,s.jsx)(o(859428).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(v.start),v.end?`  ${c(v.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},...t,children:C}),placement:e.tooltipPlacement})};function c(e){return(0,a().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},654777:(e,t,o)=>{o.d(t,{X:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("externalLink",{viewBox:"0 0 17 16",svg:(0,n.jsx)("path",{d:"M4.94922 13.498C4.31641 13.498 3.83789 13.3359 3.51367 13.0117C3.18945 12.6914 3.02734 12.2188 3.02734 11.5938V4.46289C3.02734 3.83398 3.18945 3.35938 3.51367 3.03906C3.83789 2.71875 4.31641 2.55859 4.94922 2.55859H12.0449C12.6777 2.55859 13.1562 2.71875 13.4805 3.03906C13.8047 3.35938 13.9668 3.83398 13.9668 4.46289V11.5938C13.9668 12.2188 13.8047 12.6914 13.4805 13.0117C13.1562 13.3359 12.6777 13.498 12.0449 13.498H4.94922ZM5.01953 12.3438H11.9746C12.2441 12.3438 12.4512 12.2734 12.5957 12.1328C12.7402 11.9922 12.8125 11.7793 12.8125 11.4941V4.55664C12.8125 4.27539 12.7402 4.06445 12.5957 3.92383C12.4512 3.7832 12.2441 3.71289 11.9746 3.71289H5.01953C4.74609 3.71289 4.53711 3.7832 4.39258 3.92383C4.25195 4.06445 4.18164 4.27539 4.18164 4.55664V11.4941C4.18164 11.7793 4.25195 11.9922 4.39258 12.1328C4.53711 12.2734 4.74609 12.3438 5.01953 12.3438ZM10.334 9.54297C10.1855 9.54297 10.0664 9.49609 9.97656 9.40234C9.89062 9.30859 9.84766 9.17969 9.84766 9.01562V8.08398L9.93555 7.24609L9.15039 8.10156L7.09961 10.1465C6.99023 10.2559 6.85742 10.3105 6.70117 10.3105C6.55273 10.3105 6.42969 10.2637 6.33203 10.1699C6.23828 10.0762 6.19141 9.95117 6.19141 9.79492C6.19141 9.6582 6.24609 9.53516 6.35547 9.42578L8.41211 7.36914L9.2793 6.57227L8.47656 6.66602H7.48633C7.32617 6.66602 7.19727 6.62305 7.09961 6.53711C7.00586 6.45117 6.95898 6.33203 6.95898 6.17969C6.95898 6.03516 7.00586 5.91992 7.09961 5.83398C7.19727 5.74414 7.32422 5.69922 7.48047 5.69922H10.2227C10.4062 5.69922 10.5508 5.74609 10.6562 5.83984C10.7617 5.93359 10.8145 6.08398 10.8145 6.29102V9.00977C10.8145 9.16602 10.7695 9.29492 10.6797 9.39648C10.5938 9.49414 10.4785 9.54297 10.334 9.54297Z"})})},657982:(e,t,o)=>{o.d(t,{Z6:()=>i,rN:()=>r});var n=()=>o(645873);const a={translation:new(n().O2)("translation",(()=>Promise.all([o.e(96346),o.e(16471),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(85515),o.e(21194),o.e(25700),o.e(33161),o.e(3773),o.e(8340)]).then(o.bind(o,136768)))),TranslateBanner:new(n().O2)("TranslateBanner",(async()=>await Promise.all([o.e(96346),o.e(16471),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(85515),o.e(21194),o.e(25700),o.e(33161),o.e(3773)]).then(o.bind(o,293411))))},i=(0,n()._h)(a.translation,(e=>e.TopbarAmbientSuggestTranslateButton)),r=(0,n()._h)(a.TranslateBanner,(e=>e.TranslateBanner))},659799:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(401497),a=()=>o(284371),i=()=>o(962730),r=()=>o(859428),s=o(474848);function l(e){let{text:t,tooltipText:o,icon:l}=e;const c=(0,n().IS)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:a().Wy.regular,color:e.text.secondary,fontSize:a().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,s.jsx)(r().A,{style:c.tooltip,render:e=>(0,s.jsx)("div",{style:c.text,...e,children:t}),renderTooltip:()=>(0,s.jsxs)("div",{style:c.container,children:[l(c.icon),(0,s.jsx)("div",{children:o})]}),alignment:i().C.Start,placement:i().W.Bottom})}},698331:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>r,x2:()=>a});var n=()=>o(534177);function a(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&a(t.type)}function r(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},716583:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),a=()=>o(100622),i=()=>o(284371),r=()=>o(135552),s=o(474848);const l=function(e){const{children:t,isMobile:l,textSize:c,shouldUseDivider:d,style:u,styleKey:p}=e,{WindowSizeStore:m}=(0,o(484714).v3)(),[g,f,y]=(0,o(847249).K8)((()=>[m.getSafePaddingLeftCSS(10),m.getSafePaddingLeftCSS(14),m.getSafePaddingRightCSS(14)]),[m]),h=(0,n.useMemo)((()=>l?"small"!==c?i().J.UIRegular.mobile:i().J.UISmall.mobile:"small"!==c?i().J.UIRegular.desktop:i().J.UISmall.desktop),[l,c]),v=(0,n.useMemo)((()=>void 0===c?1.2:l?"small"!==c?i().K_.UIRegular.mobile:i().K_.UISmall.mobile:"small"!==c?i().K_.UIRegular.desktop:i().K_.UISmall.desktop),[l,c]),b=(0,o(401497).IS)((e=>({bannerStyle:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",...!l&&{padding:"0px 12px"},...l&&{paddingLeft:f,paddingRight:y},fontSize:h,lineHeight:v,cursor:"default",...d?{minHeight:45,borderBottom:`1px solid ${a().Ay.halfWhite}`}:{minHeight:44}},[`colorStyle__${r().q.Red}`]:{color:a().Ay.white,background:a().Ay.red,...l&&{justifyContent:"flex-start"}},[`colorStyle__${r().q.Blue}`]:{color:a().Ay.white,fill:a().Ay.white,background:a().Ay.blue,...l&&{paddingLeft:g,paddingRight:14}},[`colorStyle__${r().q.Beige}`]:{background:e.beigeBannerBackground,paddingLeft:l?12:18,paddingRight:l?14:16},[`colorStyle__${r().q.White}`]:{background:e.contentBackground,color:e.text.tertiary,fill:e.lightIconColor,height:45,padding:0,borderTop:`1px solid ${e.regularDividerColor}`,boxShadow:`0 1px 0 ${e.regularDividerColor}`},[`colorStyle__${r().q.Purple}`]:{background:"#CA59FF",color:a().Ay.white,fill:a().Ay.white},[`colorStyle__${r().q.LightRed}`]:{background:e.accentColors.red[100],color:e.accentColors.red[500]},[`colorStyle__${r().q.Yellow}`]:{background:e.accentColors.yellow[100],color:e.accentColors.yellow[600]},[`colorStyle__${r().q.PageNotification}`]:{border:`0.5px solid ${e.regularDividerColor}`,borderRadius:12,boxShadow:"0px 8px 16px 0px rgba(0, 0, 0, 0.05)",padding:13,alignItems:"start",justifyContent:"flex-start"},[`colorStyle__${r().q.ImportNotification}`]:{color:e.accentColors.uiBlue[600],fill:e.lightIconColor,background:e.accentColors.blue[30],height:48},[`colorStyle__${r().q.LightBlue}`]:{color:a().Ay.blue,fill:a().Ay.blue,background:e.lightBlueBannerBackground},[`colorStyle__${r().q.LightGray}`]:{background:e.lightGrayBannerBackground},colorStyle__default:{color:e.text.contrastPrimary,background:e.tooltipBackground}})),[l,g,f,y,d,h,v]),C=p?`colorStyle__${p}`:"colorStyle__default";return(0,s.jsx)("div",{style:{...b.bannerStyle,...b[C],...u},children:t})}},716979:(e,t,o)=>{o.d(t,{EL:()=>x,KD:()=>S,Ss:()=>b,l2:()=>M,n0:()=>_,rw:()=>C});o(16280),o(944114),o(898992),o(354520),o(296540);var n=()=>o(388821),a=()=>o(179034),i=()=>o(959013),r=()=>o(763824),s=()=>o(449506),l=()=>o(901389),c=()=>o(106628),d=()=>o(321172),u=()=>o(437487),p=()=>o(227440),m=()=>o(630116),g=()=>o(250484),f=()=>o(67805),y=()=>o(558410),h=o(474848);const v=50;function b(e){y().A.resetSitesForSpace(e.id)}async function C(e,t){const{spaceStore:o,currentUserId:i,limit:l}=t;if(!o.id)return;const[c]=await Promise.all([s().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:o.id,limit:l||v,fetchPublishedMetadata:!0}}),(0,r().wR)(1500)]);if("failed"===c.type)throw new Error("Failed to fetch published pages.");if(c.data.recordMap){const e=[],t=n().RecordMapWithRole.create(c.data.recordMap),r=c.data.publishedEdits;for(const{model:n}of t)if(n&&n.table===a().ev){const t=m().Bv.createChildStore(o,{table:a().ev,id:n.id}),i=r[t.id],s=i&&i.authors?i.authors[0]:void 0,l={publishedTime:null==i?void 0:i.timestamp,publishedBy:s};e.push({store:t,publishedMetadata:l})}let s=e;return i&&(s=f().X(e,i)),y().A.initializeSiteResultsForSpace(o.id,s),s}}async function S(e,t){const{spaceStore:o}=t,n=e.currentUser.id,a=await C(e,{spaceStore:o,currentUserId:n});return a?a.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===n})):[]}function _(e){d().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function x(e){return new Promise(((t,o)=>{l().ui({message:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,h.jsx)("div",{style:{textAlign:"center"},children:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,h.jsx)(i().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function M(e,t){if(!p().A.state.online)return[];const o=await c().T.searchActions.load();return await o.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:g().ZK})}},748902:(e,t,o)=>{o.r(t),o.d(t,{arrowDiagonalUpRightFillSmallIcon:()=>a,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M12.462 4.288a.75.75 0 0 0-.75-.75h-6.11a.75.75 0 1 0 0 1.5h4.3l-6.177 6.177c-.275.274-.26.735.032 1.027.293.293.753.308 1.028.033l6.177-6.177v4.299a.75.75 0 0 0 1.5 0z"})},a=(0,o(340498).wt)("arrowDiagonalUpRightFillSmall",n)},755023:(e,t,o)=>{o.d(t,{x:()=>r});var n=()=>o(847249),a=()=>o(792071),i=()=>o(179034);function r(e){let{blockStore:t,closestNonAliveAncestorStore:o,intl:r}=e;return(0,n().K8)((()=>{var e;let n,s,l;const c=o&&o.table===i().ev&&o.getMovedToTrashTime();c?(n=!0,l=c,s=o.getMovedToTrashStore()):(l=t.getLastEditedTime(),s=t.getLastEditedByStore(),n=!1);return{trashAuthorStore:s,trashAuthorDisplayName:(null===(e=s)||void 0===e?void 0:e.getDisplayName(r))||r.formatMessage(a().Fvx.messages.anonymousPlaceholder),trashTimestamp:l,isMovedToTrashMetadata:n}}),[t,o,r])}},770586:(e,t,o)=>{o.d(t,{v:()=>n});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(908872);function n(e,t){const o=e.reduce(((e,t)=>{if(t.isType("define_variables")){var o;const n=null===(o=t.getModel())||void 0===o?void 0:o.getVariables();if(n)for(const t of Object.values(n))e.add(t.name)}return e}),new Set),n=t.replace(/\s*\d+$/,"");let a=1,i=`${n} ${a}`;for(;o.has(i);)i=`${n} ${a}`,a++;return i}},781697:(e,t,o)=>{o.d(t,{e:()=>s,v:()=>r});var n=()=>o(484714),a=()=>o(847249),i=()=>o(722872);function r(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i().gu.ActionSheet}:{menuType:i().gu.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function s(e){const t=(0,n().Y0)();return(0,a().K8)((()=>r({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},805419:(e,t,o)=>{o.r(t),o.d(t,{PublicShareLinkLoginModal:()=>c,publicShareLinkLoginModalStore:()=>l});o(296540);var n=()=>o(847249),a=()=>o(959013),i=()=>o(997513),r=()=>o(133234),s=o(474848);const l=new(o(215152).A);function c(){return(0,n().K8)((()=>l.state.open),[])?(0,s.jsx)(i().z,{loginModalStore:l,loginStore:r().A,title:(0,s.jsx)(a().sA,{id:"publicShareLinkLoginModal.title",defaultMessage:"Sign up or log in"}),description:(0,s.jsx)(a().sA,{id:"publicShareLinkLoginModal.description",defaultMessage:"Create an account or log in to access more features."})}):null}},826128:(e,t,o)=>{function n(e){const{publicAccessRole:t,intl:o}=e;switch(t){case"read_and_write":case"membership_admin":case"content_only_editor":return{label:o.formatMessage({defaultMessage:"Anyone with a Notion account can edit this page.",id:"permissionUtils.edit"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login to edit",id:"permissionUtils.edit.action"})};case"comment_only":return{label:o.formatMessage({defaultMessage:"Anyone with a Notion account can comment on this page.",id:"permissionUtils.comment"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login to comment",id:"permissionUtils.comment.action"})};default:return{label:o.formatMessage({defaultMessage:"Ready to explore more? Sign up or login to start building in Notion.",id:"permissionUtils.view"}),actionLabel:o.formatMessage({defaultMessage:"Sign up or login",id:"permissionUtils.view.action"})}}}o.d(t,{p:()=>n})},848565:(e,t,o)=>{o.d(t,{FB:()=>p,Ql:()=>m,SM:()=>g,Wv:()=>i,Yz:()=>s,ds:()=>a,e4:()=>n,eQ:()=>r,im:()=>c,jw:()=>l,k2:()=>u,uG:()=>d});const n=8,a=10,i=8,r=24,s=6,l=1.5,c=(r-l)/2,d=r+s,u=`calc(100% + ${i+(n-s)-d}px)`,p=r+8,m=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},885791:(e,t,o)=>{o.d(t,{h:()=>a});o(296540);var n=o(474848);const a=(0,o(340498).wt)("trashSmall",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M5.31055 14.3398C4.85742 14.3398 4.49414 14.2129 4.2207 13.959C3.95117 13.7051 3.80664 13.3516 3.78711 12.8984L3.38867 4.45508H2.74414C2.59961 4.45508 2.47656 4.4043 2.375 4.30273C2.27344 4.20117 2.22266 4.07812 2.22266 3.93359C2.22266 3.79297 2.27344 3.67383 2.375 3.57617C2.47656 3.47461 2.59961 3.42383 2.74414 3.42383H13.2617C13.4062 3.42383 13.5273 3.47266 13.625 3.57031C13.7266 3.66797 13.7773 3.78906 13.7773 3.93359C13.7773 4.07812 13.7266 4.20117 13.625 4.30273C13.5273 4.4043 13.4062 4.45508 13.2617 4.45508H12.6172L12.2188 12.8926C12.1992 13.3457 12.0527 13.6992 11.7793 13.9531C11.5059 14.2109 11.1445 14.3398 10.6953 14.3398H5.31055ZM5.42773 13.3027H10.5723C10.7363 13.3027 10.8711 13.248 10.9766 13.1387C11.082 13.0332 11.1387 12.8926 11.1465 12.7168L11.5273 4.45508H4.45508L4.85352 12.7168C4.86133 12.8887 4.91797 13.0293 5.02344 13.1387C5.12891 13.248 5.26367 13.3027 5.42773 13.3027ZM6.27734 12.3535C6.15625 12.3535 6.05859 12.3203 5.98438 12.2539C5.91016 12.1836 5.87109 12.0898 5.86719 11.9727L5.69141 5.83203C5.6875 5.71875 5.72266 5.62695 5.79688 5.55664C5.87109 5.48242 5.96875 5.44531 6.08984 5.44531C6.21094 5.44531 6.30859 5.48047 6.38281 5.55078C6.45703 5.62109 6.49414 5.71289 6.49414 5.82617L6.67578 11.9668C6.67578 12.084 6.63867 12.1777 6.56445 12.248C6.49414 12.3184 6.39844 12.3535 6.27734 12.3535ZM8 12.3535C7.87891 12.3535 7.7793 12.3184 7.70117 12.248C7.62695 12.1777 7.58984 12.0859 7.58984 11.9727V5.83203C7.58984 5.71875 7.62695 5.62695 7.70117 5.55664C7.7793 5.48242 7.87891 5.44531 8 5.44531C8.125 5.44531 8.22461 5.48242 8.29883 5.55664C8.37695 5.62695 8.41602 5.71875 8.41602 5.83203V11.9727C8.41602 12.0859 8.37695 12.1777 8.29883 12.248C8.22461 12.3184 8.125 12.3535 8 12.3535ZM9.72852 12.3535C9.60352 12.3535 9.50391 12.3184 9.42969 12.248C9.35938 12.1777 9.32617 12.084 9.33008 11.9668L9.50586 5.83203C9.50977 5.71484 9.54883 5.62109 9.62305 5.55078C9.69727 5.48047 9.79297 5.44531 9.91016 5.44531C10.0352 5.44531 10.1328 5.48242 10.2031 5.55664C10.2773 5.62695 10.3125 5.71875 10.3086 5.83203L10.1328 11.9727C10.1289 12.0898 10.0898 12.1836 10.0156 12.2539C9.94141 12.3203 9.8457 12.3535 9.72852 12.3535ZM5.33984 3.81055V2.54492C5.33984 2.0957 5.47461 1.74609 5.74414 1.49609C6.01758 1.24219 6.39648 1.11523 6.88086 1.11523H9.10742C9.5918 1.11523 9.9707 1.24219 10.2441 1.49609C10.5176 1.74609 10.6543 2.0957 10.6543 2.54492V3.81055H9.57031V2.59766C9.57031 2.44922 9.52148 2.33008 9.42383 2.24023C9.32617 2.14648 9.19531 2.09961 9.03125 2.09961H6.95703C6.79688 2.09961 6.66797 2.14648 6.57031 2.24023C6.47266 2.33008 6.42383 2.44922 6.42383 2.59766V3.81055H5.33984Z"})})},890409:(e,t,o)=>{o.d(t,{Ah:()=>y,Dk:()=>m,Iv:()=>f,SF:()=>g,YO:()=>b,_f:()=>S,c_:()=>u,dW:()=>v,gW:()=>p,sp:()=>_,vN:()=>h});o(16280),o(944114),o(898992),o(354520),o(803949),o(581454),o(737550);var n=()=>o(496603),a=()=>o(973647),i=()=>o(534177),r=()=>o(842599),s=()=>o(977345),l=()=>o(798880),c=()=>o(919709),d=()=>o(241319);function u(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"add_automation_step",properties:t})}function p(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"delete_automation_step",properties:t})}function m(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_create",properties:t})}function g(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_update",properties:t})}function f(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_delete",properties:t})}function y(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_enable",properties:t})}function h(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_disable",properties:t})}function v(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_create",properties:t})}function b(e,t){e.DO_NOT_USE_commonTrackEvent({eventName:"automation_action_delete",properties:t})}function C(e){const{formulaAnalyticsModule:t,formulasModule:o,formulaTypecheckContextValues:n,getRecordModel:r,spaceId:l,value:c,featureGates:d}=e;if("formula"===c.type){if(!(0,i().O9)(c.value))return;const e=a().Q.unwrapOr(o.parseFormulaInputToAst(c.value),void 0);if(e){const a=o.addTypesToFormulaAST(e,{handleDataRequest:(0,s().zg)(r),spaceId:l,valueTypes:n,featureGates:d});return{...t.getFormulaAnalytics(e,{getRecordModel:r,typecheckContextValues:n}),formula_return_type:a.node.type,redacted_formula:t.getRedactedFormulaAsStringSync(e,{getRecordModel:r,typecheckContextValues:n})}}}else{if("simple"===c.type){if(!(0,i().O9)(c.value))return;return t.getSimpleFormulaAnalytics(c.value,{getRecordModel:r,typecheckContextValues:n})}(0,i().HB)(c.type)}}function S(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}=e;return t.isType("complete_sprint")?{automation_action_id:t.pointer.id,type:"complete_sprint"}:t.isType("create_page")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig();let c,d=[];const u=null==l?void 0:l.collection,p=null==l?void 0:l.properties;if((0,i().O9)(u)&&(0,i().O9)(p)&&p.length>0){const e=r(u),g=null==e?void 0:e.getNormalizedSchema();(0,i().O9)(g)&&(d=p.map((e=>{var t;return(null===(t=g[e])||void 0===t?void 0:t.type)??"unknown"})));const f=null==l?void 0:l.values;if(n&&(0,i().O9)(f)){c=[];for(const e of p){var m;const i=null===(m=f[e])||void 0===m?void 0:m.value;if(!i)continue;const l=C({formulaAnalyticsModule:o,formulasModule:n,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i,featureGates:s});l&&c.push(l)}}}return{automation_action_id:t.pointer.id,property_formula_stats:c,property_types:d,type:"create_page"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("duplicate_blocks")?{automation_action_id:t.pointer.id,type:"duplicate_blocks"}:t.isType("modal_confirmation")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.text){const e=C({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:l.text,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"modal_confirmation"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("open_page")?{automation_action_id:t.pointer.id,type:"open_page"}:t.isType("query_collection")?{automation_action_id:t.pointer.id,type:"query_collection"}:t.isType("send_in_app_notification")?function(e){var t;const{automationActionModel:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:d}=e,u={automation_action_id:o.pointer.id,messageCharacterCount:0,type:"send_in_app_notification"},p=o.getConfig();if(!(0,i().O9)(p))return u;if((0,i().O9)(p.target))if("formula"===p.target.type&&(0,i().O9)(p.target.value)){if(u.targetData={type:"formula",numUserFormulaTargets:(0,c().Fbh)(p.target.value.value).length,numFormulaContextTargets:d.getReferencedContextValueIds(p.target.value).length},a){const e=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.target.value,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}}else if("property"===p.target.type&&(0,i().O9)(p.target.propertyId)&&(0,i().O9)(p.target.collectionPointer)){const e=s(p.target.collectionPointer),t=null==e?void 0:e.getSchema();var m;(0,i().O9)(t)&&(u.targetData={type:"property",propertyType:null===(m=t[p.target.propertyId])||void 0===m?void 0:m.type})}if((0,i().O9)(null===(t=p.notification_message)||void 0===t?void 0:t.value)&&(u.messageCharacterCount=(0,c().FAw)(p.notification_message.value),a)){const e=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:s,formulaTypecheckContextValues:r,spaceId:o.spaceId,value:p.notification_message,featureGates:l});e&&(u.formula_stats??=[],u.formula_stats.push(e))}return u}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g,simpleFormulasModule:f}):t.isType("send_gmail_notification")?function(e){var t,o,a,s,d,u,p;const{automationActionModel:m,formulaAnalyticsModule:g,formulasModule:f,formulaTypecheckContextValues:y,getRecordModel:h,featureGates:v}=e,b=m.getConfig();if(!(0,i().O9)(b))return{automation_action_id:m.pointer.id,fields:{},recipient_domains:{},type:"send_gmail_notification"};const S=Object.fromEntries(Object.entries(b||{}).map((e=>{let[t,o]=e;var n;return"formula"===(null==o?void 0:o.type)?[t,Boolean(null==o||null===(n=o.value)||void 0===n?void 0:n.value)]:"simple"===(null==o?void 0:o.type)?[t,Boolean(null==o?void 0:o.value)]:[t,Boolean(o)]}))),{to:_,cc:x,bcc:M}=b,A=[...(null==_||null===(t=_.value)||void 0===t?void 0:t.value)||[],...(null==x||null===(o=x.value)||void 0===o?void 0:o.value)||[],...(null==M||null===(a=M.value)||void 0===a?void 0:a.value)||[]],k=[...(0,c().Fbh)(A).map((e=>h({table:l().oo,id:e}))).map((e=>null==e?void 0:e.email)).filter(i().O9),...(0,r().C3)((0,c().k4p)(A))],w=n().Tr(k.map((e=>e.split("@")[1]))),T=[null===(s=b.to)||void 0===s?void 0:s.value,null===(d=b.cc)||void 0===d?void 0:d.value,null===(u=b.bcc)||void 0===u?void 0:u.value,null===(p=b.reply_to)||void 0===p?void 0:p.value,b.from_name,b.email_subject,b.email_body].map((e=>{if(f&&(0,i().O9)(e))return C({formulaAnalyticsModule:g,formulasModule:f,getRecordModel:h,formulaTypecheckContextValues:y,spaceId:m.spaceId,value:e,featureGates:v})})).filter(i().O9);return{automation_action_id:m.pointer.id,fields:S,formula_stats:T,recipient_domains:w,type:"send_gmail_notification"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("slack_notification")?{automation_action_id:t.pointer.id,type:"slack_notification"}:t.isType("update_pages")?function(e){const{automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:l,featureGates:c}=e,u=t.getConfig(),p=[],m=[],g=[];if((0,i().O9)(u)&&(0,i().O9)(u.target)&&(0,i().O9)(u.properties)&&u.properties.length>0){let e;if("variable"===u.target.type){const t=(0,s().y5)(u.target.id);if("action"===t.source){const t=(0,d().y)({actionModels:o,id:u.target.id}).collectionPointer;if((0,i().O9)(t)){const o=l(t);e=null==o?void 0:o.getNormalizedSchema()}}else{if("global"!==t.source||"button_page"!==t.global)throw new Error("Failed loading property schema");{const t=(0,s().IV)(r,u.target.id);if("block"===(null==t?void 0:t.type.type)&&(0,i().O9)(t.type.collection)){const o=l(t.type.collection);e=null==o?void 0:o.getNormalizedSchema()}}}}else if("collection"===u.target.type){const t=l(u.target.collection);e=null==t?void 0:t.getNormalizedSchema()}(0,i().O9)(e)&&u.properties.forEach((o=>{const s=e[o];if((0,i().O9)(s)&&(p.push(s.type),a&&(0,i().O9)(u.values))){const e=u.values[o];if((0,i().O9)(e)&&(m.push({type:s.type,operator:e.action}),e.value)){const o=C({formulasModule:a,formulaAnalyticsModule:n,getRecordModel:l,formulaTypecheckContextValues:r,spaceId:t.spaceId,value:e.value,featureGates:c});o&&g.push(o)}}}))}return{automation_action_id:t.pointer.id,property_configs:m,property_formula_stats:g,property_types:p,type:"update_pages"}}({automationActionModel:t,automationActionModels:o,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("define_variables")?function(e){const{automationActionModel:t,formulaAnalyticsModule:o,formulasModule:n,formulaTypecheckContextValues:a,getRecordModel:r,featureGates:s}=e,l=t.getConfig(),c=[];if(n&&(0,i().O9)(l)&&l.values)for(const i of Object.values(l.values))if(i.value){const e=C({formulasModule:n,formulaAnalyticsModule:o,getRecordModel:r,formulaTypecheckContextValues:a,spaceId:t.spaceId,value:i.value,featureGates:s});e&&c.push(e)}return{automation_action_id:t.pointer.id,formula_stats:c,type:"define_variables"}}({automationActionModel:t,formulaAnalyticsModule:a,formulasModule:u,formulaTypecheckContextValues:p,getRecordModel:m,featureGates:g}):t.isType("http_request")?{automation_action_id:t.pointer.id,type:"http_request"}:t.isType("publish_site")?{automation_action_id:t.pointer.id,type:"publish_site"}:void(0,i().HB)(t)}function _(e){const{automationModel:t,builderType:o="sidebar",formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c,source:d}=e,u=[],p=t.getActionPointers().map((e=>s(e))).filter(i().O9);for(const b of t.getActionPointers()){const e=s(b);(0,i().O9)(e)&&u.push(S({automationActionModel:e,automationActionModels:p,formulaAnalyticsModule:n,formulasModule:a,formulaTypecheckContextValues:r,getRecordModel:s,featureGates:l,simpleFormulasModule:c}))}const m=[];let g,f,y;if(t.isEventType()){var h;const e=t.getEventConfiguration(),o=s(t.getParentPointer());g=t.getParentId();const n=t.getEventConfiguration();if("collection_view"===(null===(h=n.source)||void 0===h?void 0:h.type)){const e=s(n.source.pointer);y=null==e?void 0:e.parent_id,f=null==n?void 0:n.source.pointer.id}const a=null==o?void 0:o.getNormalizedSchema();if((0,i().O9)(a)){const{pagesAdded:t,pagePropertiesEdited:o}=e;if(t&&m.push({type:"page"}),"any"===o.type)m.push({condition:"any",type:"property"});else if("none"===o.type)m.push({condition:"none",type:"property"});else{let e=[];"some"===o.type?e=o.some??[]:"all"===o.type&&(e=o.all??[]);const t=[],n=[];e.forEach((e=>{var o;const r=null===(o=a[e.property])||void 0===o?void 0:o.type;(0,i().O9)(r)&&(t.push({type:r,operator:e.filter.operator}),n.push(r))})),m.push({condition:o.type,property_configs:t,property_types:n,type:"property"})}}}else if(t.isButtonType())m.push({type:"button"});else if(t.isRecurrenceType()){var v;m.push({type:"recurrence",frequency:null===(v=t.getTrigger().recurrence)||void 0===v?void 0:v.frequency})}else(0,i().HB)(t);return{automation_actions:u,automation_id:t.id,automation_triggers:m,collection_id:g,collection_view_id:f,collection_view_block_id:y,builder_type:o,source:d}}},976721:(e,t,o)=>{o.d(t,{Dw:()=>_,Hc:()=>S,o5:()=>C});o(16280),o(296540);var n=()=>o(857639),a=()=>o(243581),i=()=>o(340498),r=()=>o(433847),s=()=>o(161479),l=()=>o(959013),c=()=>o(496603),d=()=>o(701763),u=()=>o(901389),p=()=>o(579627),m=()=>o(751156),g=()=>o(125565),f=()=>o(247123),y=()=>o(406792),h=()=>o(630116),v=()=>o(663590),b=o(474848);async function C(e){let{newRole:t,...o}=e;const n=o.oldPermissionItem,a=(0,c().o8)(n);return a.role=t,await S({newPermissionItem:a,...o})}async function S(e){const{oldPermissionItem:t,newPermissionItem:o,wasInherited:a,environment:i,store:l,sudoModeStore:c,restrictingVisibility:u,fromPermissionWrapper:g,trustedDomainsLoggingData:f}=e,b=(0,v().FI)();if(!(0,r().nK)(t,o))throw new Error("Permission type mismatch.");const C=!!c&&c.shouldSaveTransactionWithSudoMode(l),S=(0,r().$q)(t.role,o.role);if(a&&S!==o.role||u){return await _({environment:i,useSudoMode:C,store:l,permissionItem:o,fromPermissionWrapper:g,isRedesignEnabled:b,shouldInherit:!0,trustedDomainsLoggingData:f})}return l instanceof h().Bv&&!l.isTopLevel()&&t.role!==o.role&&S!==t.role&&d().MR(i),m().createAndCommit({userAction:"PermissionItem.handlePermissionItemChange",environment:i,canUndo:!0,useSudoMode:C,perform:t=>{const n=y().default.DO_NOT_USE_markLegacy("share_menu.update_page_permission_lag");p().wd({environment:i,store:l,permissionItems:[o],transaction:t,pagePermissionChangeLocation:e.location,metric:n,fromPermissionWrapper:g})}}),"trusted_domain_permission"===o.type&&n().log({level:"warning",from:"shareMenu.handlePermissionItemChange",type:"TrustedDomainPermissionChange",spaceId:(0,s().e)(l.pointer.spaceId),data:{miscDataToConvertToString:{message:"shareMenu.handlePermissionItemChange updating trusted domain permission",blockId:l.id,oldPermissionItem:t,newPermissionItem:o,trustedDomainsLoggingData:f}}}),!0}async function _(e){const{environment:t,useSudoMode:o,store:n,permissionItem:r,fromPermissionWrapper:s,isRedesignEnabled:c,shouldInherit:d,trustedDomainsLoggingData:y}=e,h="none"===(null==r?void 0:r.role)?{type:"remove",permissionItem:r}:{type:"restrict"};return!!("user_permission"===(null==r?void 0:r.type)&&(null==r?void 0:r.user_id)===t.currentUser.id||(c?await u().Gh({message:(0,f().r6)(h,c),description:(0,b.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperTextV2",defaultMessage:"Changing this will unlink this page from its parent, so it will no longer inherit share settings. Admins can still restore settings on unlinked pages."})}),acceptLabel:(0,f().QU)(h,c),icon:(0,a().r)({height:i().Ev.xl,width:i().Ev.xl})}):await u().Gh({message:(0,f().r6)(h),acceptLabel:(0,f().QU)(h),cancelLabel:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,b.jsx)(g().A,{isSmall:!0,isMultiline:!0,children:(0,b.jsx)(l().sA,{id:"restrictedPermissionConfirmationModal.footer.whisperText",defaultMessage:"Admins will still be able to restore permissions from restricted pages."})})})).accept)&&(m().createAndCommit({userAction:"PermissionItem.onAccept",environment:t,canUndo:!0,useSudoMode:o,perform:e=>{p().wW({environment:t,store:n,permissionItem:r,shouldInherit:d,transaction:e,fromPermissionWrapper:s,trustedDomainsLoggingData:y})}}),!0)}}}]);