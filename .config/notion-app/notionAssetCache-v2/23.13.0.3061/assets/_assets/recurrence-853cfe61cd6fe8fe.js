"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[29021],{113474:(e,t,o)=>{o.d(t,{_:()=>u});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(668725),a=()=>o(704152),c=()=>o(678553),s=()=>o(125565),l=o(474848);function u(e){const t=(0,r().DP)(),o=(0,n().v3)(),{device:u}=o;return(0,l.jsx)(a().A,{mobileFeedback:u.isMobile,onClick:e.onClick,hovered:e.focused,disabled:e.disabled,style:{width:"100%",...!u.isMobile&&{borderRadius:6},...e.buttonStyle},hoveredStyle:e.hoveredButtonStyle,pressedStyle:e.pressedButtonStyle,children:(0,l.jsx)(c().Ay,{...e,dontShrinkTitle:!0,right:(0,l.jsxs)("div",{style:{display:"flex",whiteSpace:"nowrap"},children:[e.right&&(0,l.jsx)(s().A,{isSecondaryColor:!0,isMobile:u.isMobile,children:e.right}),!u.isMobile&&(0,l.jsx)("div",{style:{flexShrink:0},children:(0,i().b)({width:10,marginLeft:4,fill:t.lightIconColor,transform:"right"===e.chevronType?"rotate(-90deg)":void 0,transition:"transform 0.2s ease"})})]})})})}},301782:(e,t,o)=>{o.d(t,{CM:()=>p,UB:()=>d,zc:()=>u});o(898992),o(354520),o(581454);var n=()=>o(890409),r=()=>o(973647),i=()=>o(534177),a=()=>o(862292),c=()=>o(989423),s=()=>o(909470),l=()=>o(546461);function u(e){const{automationActionStore:t,automationStore:o,formulaAnalyticsModule:a,formulasModule:c,simpleFormulasModule:u}=e,d=t.getModel(),p=o??t.getParentStore();if(!d||!p)return;const m=p.getActionStores().map((e=>e.getModel())).filter(i().O9),f=(0,l().To)(p);let y=[];return f&&r().Q.isSuccess(f)&&(y=f.value.valueTypes),(0,n()._f)({automationActionModel:d,automationActionModels:m,formulaAnalyticsModule:a,formulasModule:c,simpleFormulasModule:u,formulaTypecheckContextValues:y,getRecordModel:t.getRecordModel,featureGates:(0,s().i)()})}function d(e,t){const{automationStore:o,automationActionStore:n}=t;o.isTriggerType("event")||p(((t,r,i)=>{const a=u({automationActionStore:n,automationStore:o,formulaAnalyticsModule:r,formulasModule:t,simpleFormulasModule:i});a&&(0,c().pM)(e,"automation_action_update",n.id,1,{automation_action:a,automation_action_id:n.id,automation_id:o.id})}))}function p(e){return Promise.all([a().T.formulas.load(),a().T.formulaAnalytics.load(),a().T.simpleFormulas.load()]).then((t=>{let[o,n,r]=t;e(o,n,r)})).catch((e=>{console.error("Error sending analytics for automations",e)}))}},324587:(e,t,o)=>{o.r(t),o.d(t,{addAutomationAction:()=>U,clearInvalidVariables:()=>K,createAutomation:()=>N,deleteAutomation:()=>Y,disableAutomation:()=>J,duplicateAutomation:()=>z,duplicateAutomationAction:()=>$,enableAutomation:()=>G,insertEmptyTextInDuplicateBlockAction:()=>Z,messages:()=>V,removeAutomationAction:()=>H,reorderAutomationActions:()=>L,restartAutomation:()=>j});o(16280),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(672577),o(803949),o(581454);var n=o.n(o(794148)),r=()=>o(244641),i=()=>o(908006),a=()=>o(422540),c=()=>o(890409),s=()=>o(192845),l=()=>o(390527),u=()=>o(522328),d=()=>o(433519),p=()=>o(247331),m=()=>o(134025),f=()=>o(696706),y=()=>o(912720),g=()=>o(199378),v=()=>o(161479),h=()=>o(919709),b=()=>o(496603),S=()=>o(183558),_=()=>o(973647),C=()=>o(534177),M=()=>o(722101),A=()=>o(44729),T=()=>o(246826),x=()=>o(725614),k=()=>o(751156),I=()=>o(780054),w=()=>o(183324),R=()=>o(989423),P=()=>o(909470),B=()=>o(594794),O=()=>o(695625),W=()=>o(546461),F=()=>o(301782),E=()=>o(770586),D=()=>o(190019);const V=(0,o(959013).YK)({genericErrorMessage:{id:"automations.buttonTrigger.genericErrorMessage",defaultMessage:"Button failed to execute"},open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"},defaultConfirmationWorkflowText:{defaultMessage:"Are you sure you want to continue?",id:"automations.buttonTrigger.defaultConfirmationWorkflowText"},defaultContinueWorkflowMessage:{defaultMessage:"Continue",id:"automations.buttonTrigger.defaultContinueWorkflowMessage"},defaultStopWorkflowMessage:{defaultMessage:"Cancel",id:"automations.buttonTrigger.defaultStopWorkflowMessage"},errorQueryCollectionTooManyPages:{defaultMessage:"Button impacts too many pages",id:"automations.buttonTrigger.errorQueryCollectionTooManyPages"},errorRecordInTrash:{id:"automations.buttonTrigger.errorRecordInTrash",defaultMessage:"Button is editing a page in trash"}});function N(e){const{actionIds:t,automationId:o,automationName:r,environment:i,inMemoryRecordCache:a,parentPointer:c,transaction:s,trigger:l}=e,u=o??(0,B().Z1)({environment:i,table:y().yB,spaceId:c.spaceId}),d=T().eC({environment:i,inMemoryRecordCache:a??i.defaultRecordCache.inMemoryRecordCache,table:y().yB,transaction:s,value:{action_ids:t,alive:!0,id:u,parent_id:c.id,parent_table:c.table,properties:{name:r},space_id:c.spaceId,status:"active",trigger:l}});return n()(d.isTriggerType(l.type),"Trigger type mismatch"),d}function U(e){const{actionId:t,environment:o,intl:r,automationStore:a,actionType:s,transaction:l,insertionPoint:u,config:d,createDuplicateBlocksContainer:p=!0,builderType:m="sidebar"}=e,v=a.getSpaceId();if(!v)return;let b;if("duplicate_blocks"===s&&p){b=T().Wv({environment:o,inMemoryRecordCache:a.inMemoryRecordCache,transaction:l,type:"text"});const e=Z({environment:o,contentStore:b.getContentStore(),transaction:l});i().default.afterNextFlush((()=>{const t=O().T.find((t=>f().L3.isEqual(t.props.store.pointer,e.pointer)));t&&x().setSelectionAtStart({store:t.props.store.getBlockTitleStore()})}))}const _=d??function(e){const{actionType:t,automationStore:o,intl:n}=e;if("modal_confirmation"===t)return{continue_button:{text:n.formatMessage(V.defaultContinueWorkflowMessage)},cancel_button:{text:n.formatMessage(V.defaultStopWorkflowMessage)},text:{type:"simple",value:(0,h().x9d)(n.formatMessage(V.defaultConfirmationWorkflowText))}};if("define_variables"===t){const e=(0,S().Ay)();return{values:{[e]:{name:(0,E().v)(o.getActionStores(),n.formatMessage(g().xC)),value:{type:"simple",value:[[""]]}}},variableIds:[e]}}}({actionType:s,automationStore:a,intl:r})??{},A=T().eC({environment:o,inMemoryRecordCache:a.inMemoryRecordCache,table:g().SC,transaction:l,value:{id:t,type:s,parent_id:a.id,parent_table:y().yB,alive:!0,space_id:v,config:_,blocks:b?[b.id]:[]}});return b&&M().BC({transaction:l,parentStore:A.getKeyStore("blocks"),appendStore:b}),!u||"afterActionId"in u?M().BC({transaction:l,parentStore:a.getActionIdsStore(),appendStore:A,after:null==u?void 0:u.afterActionId}):"beforeActionId"in u?M().Hs({transaction:l,parentStore:a.getActionIdsStore(),prependStore:A,before:u.beforeActionId}):(0,C().HB)(u),q({transaction:l,automationStore:a}),(0,F().CM)(((e,t,n)=>{const r=(0,R().ik)(o),i=(0,F().zc)({automationActionStore:A,formulaAnalyticsModule:t,formulasModule:e,simpleFormulasModule:n});(0,C().O9)(i)&&(0,c().dW)(r,{automation_action:i,automation_action_id:A.id,automation_id:A.getParentId(),builder_type:m}),A.isDefined()&&(0,c().c_)(r,{automation_action_id:A.id,automation_action_type:A.getType(),automation_id:a.id,builder_type:m})})),n()(A.isType(s),"Action type mismatch"),A}function j(e){var t,o;const{automationStore:n,transaction:i}=e,a=n.getRecurrence();if(!a)return;const c=r().c9.now().plus({day:1}).startOf("day"),s={...a,start_date:c.toMillis(),end_condition:"date"===(null===(t=a.end_condition)||void 0===t?void 0:t.type)?{type:"date",end_at:(0,l().getNewEndTimestamp)(c,a.start_date,null===(o=a.end_condition)||void 0===o?void 0:o.end_at).toMillis()}:a.end_condition};T().zv({store:n,transaction:i,data:{status:"active"}}),T().zv({store:n.getKeyStore("trigger"),transaction:i,data:{recurrence:(0,l().convertFromUnpersistedRecurrenceConfig)(s)}})}function z(e){const{actorPointer:t,environment:o,includeParenting:n,sourceAutomationStore:r,targetAutomationId:i,transaction:a}=e,c=r.getParentStore();if(!c||!c.isReady())throw new Error("Automation parent store not ready");const s=r.getValue(),l=r.getSpaceId();if(!(0,C().O9)(s)||!(0,C().O9)(l))throw new Error("Undefined automation value or space id");const u={},p={...(0,b().mg)(s),id:i??(0,B().Z1)({environment:o,table:y().yB,spaceId:(0,v().e)(l)})};u[r.id]=p.id,(0,C().O9)(p.action_ids)&&(0,C().EI)(p.action_ids)&&p.action_ids.forEach((e=>u[e]=(0,B().Z1)({environment:o,table:g().SC,spaceId:(0,v().e)(l)})));const m=e=>{let{requested:t}=e;const o=u[t.id];return(0,C().O9)(o)?{...t,id:o}:t};(0,d().i)({actor:t,duplicateRecord:p,options:{},mapper:m,originalRecord:s});const f=T().eC({environment:o,inMemoryRecordCache:r.inMemoryRecordCache,table:y().yB,transaction:a,value:p});n&&A().NI({childStore:f,parentStore:c,transaction:a});const h=r.getActionStores(),S=Promise.all(h.map((e=>{const t=u[e.id],{automationActionStore:n,onComplete:r}=$({environment:o,includeParenting:!1,mapper:m,sourceActionStore:e,targetAutomationActionId:t,transaction:a});return A().NI({childStore:n,parentStore:f,transaction:a}),r}))),_=S.then((e=>e.flat()));return{automationStore:f,onComplete:_}}function $(e){const{environment:t,includeParenting:o,insertionPoint:n,mapper:r,sourceActionStore:i,targetAutomationActionId:a,transaction:s}=e,l=i.getParentStore();if(!l||!l.isReady())throw new Error("Automation store is not ready");const d=i.getValue(),p=i.getSpaceId();if(!(0,C().O9)(d)||!(0,C().O9)(p))throw new Error("Undefined action value or space id");const m={...(0,b().mg)(d),id:a??(0,B().Z1)({environment:t,table:g().SC,spaceId:(0,v().e)(p)})},f=t.currentUser.id,y=i.inMemoryRecordCache.makeGetRecordRoleFn(f);(0,u().I)({duplicateRecord:m,getRecordRole:y,originalRecord:d,mapper:e=>(null==r?void 0:r(e))??e.requested,options:{},originOptions:{baseUrl:I().A.domainBaseUrl,publicDomainName:I().A.publicDomainName},duplicateBlocks:!1});const h=T().eC({environment:t,inMemoryRecordCache:i.inMemoryRecordCache,table:g().SC,transaction:s,value:m});o&&(!n||"afterActionId"in n?A().NI({after:null==n?void 0:n.afterActionId,childStore:h,parentStore:l,transaction:s}):"beforeActionId"in n?A().Ti({before:null==n?void 0:n.beforeActionId,childStore:h,parentStore:l,transaction:s}):(0,C().HB)(n),q({transaction:s,automationStore:l}));const S=Promise.all(i.getBlockStores().map((e=>{const{blockStores:o,onComplete:n}=w().duplicateBlock({environment:t,preferDuplicateLocation:"local",stores:[e],targetSpaceId:(0,v().e)(e.pointer.spaceId),transaction:s,options:{addCopyName:!1,deepCopyTransclusionContainers:!1,resolveTemplateVariables:!1}}),r=o[0];return A().NI({childStore:r,parentStore:h,transaction:s}),n}))),_=h.getModel();return(0,C().O9)(_)&&(0,F().CM)(((e,o,n)=>{const r=(0,R().ik)(t),i=(0,F().zc)({automationActionStore:h,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:n});(0,C().O9)(i)&&(0,c().dW)(r,{automation_action:i,automation_action_id:_.id,automation_id:_.parent_id,from:"duplicate"}),(0,c().c_)(r,{automation_action_id:_.id,automation_action_type:_.type,automation_id:l.id,from:"duplicate"})})),{automationActionStore:h,onComplete:S}}function L(e){const{automationStore:t,automationTypecheckModule:o,contextType:n,environment:r,formulasModule:i,from:a,intl:c,isSubscribed:s,movedActionId:l,newActionIds:u,transaction:d}=e;T().zv({store:t,transaction:d,data:{action_ids:u}}),q({automationStore:t,transaction:d});Q({automationStore:t,transaction:d,typecheckResult:(0,D().Z)({environment:r,automationStore:t,automationTypecheckModule:o,contextType:n,formulasModule:i,intl:c,isSubscribed:s})}),(0,R().u4)({environment:r,event:{eventName:"automation_action_move",eventProperties:{automation_id:t.id,automation_action_id:l,from:a}}})}function H(e){const{actionStore:t,automationStore:o,automationTypecheckModule:n,contextType:r,environment:i,formulasModule:a,intl:s,isSubscribed:l,transaction:u}=e,d=(0,D().Z)({environment:i,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:a,intl:s,isSubscribed:l});!function(e){const{automationActionStore:t,automationStore:o,environment:n,transaction:r,hasError:i=!1}=e;let a=t.getParentStore();if((0,C().O9)(o)){const e=t.getParentPointer();if(!(0,C().O9)(e))throw new Error("Automation action does not have a parent pointer");if(!f().L3.isEqual(e,o.pointer))throw new Error(`Automation action parent pointer does not match argument: ${f().L3.toKey(e)}, ${f().L3.toKey(o.pointer)}`);a=o}else if(!(0,C().O9)(a))throw new Error("Automation store is undefined");A().zz({childStore:t,parentStore:a,transaction:r});const s=t.getModel();(0,C().O9)(s)&&(0,F().CM)(((e,o,r)=>{const l=(0,R().ik)(n),u=(0,F().zc)({automationActionStore:t,formulaAnalyticsModule:o,formulasModule:e,simpleFormulasModule:r});(0,C().O9)(u)&&(0,c().YO)(l,{automation_action:u,automation_action_id:s.id,automation_id:s.parent_id,has_error:i}),(0,c().gW)(l,{automation_action_id:s.id,automation_action_type:s.type,automation_id:a.id,has_error:i})}))}({automationActionStore:t,environment:i,transaction:u,hasError:(_().Q.isSuccess(d)&&d.value.actionValidationFailures[t.id]||[]).length>0}),Q({automationStore:o,transaction:u,typecheckResult:d})}function K(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:c,transaction:s}=e;Q({automationStore:o,transaction:s,typecheckResult:(0,D().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:a,isSubscribed:c})})}function q(e){const{automationStore:t,transaction:o}=e;t.getSpaceId()&&t.getActionStores().forEach(((e,t)=>{var n;if(!e.isDefined())return;const r=e.getModel();r.isType("open_page")&&"url"===(null===(n=r.getConfig())||void 0===n||null===(n=n.target)||void 0===n?void 0:n.type)&&!(0,a().cQ)(t)&&T().zv({store:e.getConfigStore(),transaction:o,data:{target:null}})}))}function Q(e){const{automationStore:t,transaction:o,typecheckResult:n}=e,r=t.getSpaceId(),i=t.getModel();if(r&&i&&!_().Q.isFail(n))for(const a of i.getActionIds()){const e=t.getRecordStore(t,{table:g().SC,id:a,spaceId:r});if(!e.isDefined())continue;const i=e.getModel(),c=new Set(n.value.actionInputValueTypes[a].map((e=>{if(e.kind===p().FormulaContextValueKind.Binding||e.kind===p().FormulaContextValueKind.ContextValue)return e.id;e.kind!==p().FormulaContextValueKind.ThisRow&&(0,C().HB)(e)})).filter(C().O9)),{value:l}=(0,s().G)({automationActionModel:i,baseUrl:I().A.domainBaseUrl,preventClearingConfig:!0,publicDomainName:I().A.publicDomainName,sourceSpaceId:r,visitors:{visitCollectionProperty:void 0,visitCollectionPropertyPointer:void 0,visitFormulaContextValue:e=>c.has(e)?{type:"keep"}:{type:"replace",value:void 0},visitFormulaPageProperty:void 0,visitRecordPointer:void 0}}),u=m().op.update({pointer:e.pointer,path:["config"],args:l.getConfig()??{}});k().applyOperation({store:e,operation:u,transaction:o})}}function Z(e){const{environment:t,contentStore:o,transaction:n}=e,r=T().Wv({environment:t,type:"text",inMemoryRecordCache:o.inMemoryRecordCache,transaction:n,spaceId:o.pointer.spaceId});return M().BC({parentStore:o,appendStore:r,transaction:n}).childStore}function G(e){const{automationStore:t,environment:o,transaction:n}=e;T().zv({store:t,data:{status:"active"},transaction:n});const r=t.getModel();(0,C().O9)(r)&&(0,F().CM)(((e,n,i)=>{const a=(0,W().To)(t);let s=[];a&&_().Q.isSuccess(a)&&(s=a.value.valueTypes);const l=(0,R().ik)(o),u=(0,c().sp)({automationModel:r,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,P().i)(),simpleFormulasModule:i});(0,c().Ah)(l,u)}))}function J(e){const{automationStore:t,environment:o,status:n,transaction:r}=e,i=n??"disabled";T().zv({store:t,data:{status:i},transaction:r}),t.isTriggerType("recurrence")&&T().zv({store:t,data:{run_at:void 0},transaction:r});const a=t.getModel();(0,C().O9)(a)&&(0,F().CM)(((e,n,r)=>{const i=(0,W().To)(t);let s=[];i&&_().Q.isSuccess(i)&&(s=i.value.valueTypes);const l=(0,R().ik)(o),u=(0,c().sp)({automationModel:a,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,P().i)(),simpleFormulasModule:r});(0,c().vN)(l,u)}))}function Y(e){const{automationStore:t,environment:o,transaction:n}=e;T().zv({store:t,data:{alive:!1},transaction:n});const r=t.getModel();(0,C().O9)(r)&&(0,F().CM)(((e,n,i)=>{const a=(0,W().To)(t);let s=[];a&&_().Q.isSuccess(a)&&(s=a.value.valueTypes);const l=(0,R().ik)(o),u=(0,c().sp)({automationModel:r,formulaAnalyticsModule:n,formulasModule:e,formulaTypecheckContextValues:s,getRecordModel:t.getRecordModel,featureGates:(0,P().i)(),simpleFormulasModule:i});(0,c().Iv)(l,u)}))}},422540:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>M,Ge:()=>m,I3:()=>d,Kj:()=>_,PP:()=>A,TK:()=>T,Yy:()=>u,aE:()=>x,cQ:()=>C,kH:()=>f,m7:()=>p,nq:()=>b,nv:()=>v,tj:()=>y});o(898992),o(354520),o(737550);var n=()=>o(496603),r=()=>o(534177),i=()=>o(970013),a=()=>o(651124),c=()=>o(349835),s=()=>o(390066);(0,r().u0)((e=>(0,r().O9)(e)&&(0,r().O9)(e.target)&&(0,r().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const l={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},u={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function d(e){return Boolean(l[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:o,filter:c,sort:l,sourcePropertyIds:u}=e,p=(u??(0,r().uv)(o)).filter(((t,n,r)=>{const a=o[t];return!(!a||!d(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!c||c([t,a],n,o)))}));if(0===p.length)return[];if(!t||!1===l)return p;const m=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:c}=e,l=(0,r().uv)(o).filter(((e,t,n)=>{const r=o[e];return!(!r||!(0,i().JY)(r))}));if(0===l.length)return[];if(!t||!1===c)return l;const u=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(l,(e=>u.findIndex((t=>t.property===e))))}function f(e){return e.type===c().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===c().M9.TokenExpected?{type:e.type,token:e.token}:e.type===c().uW.MissingSchemaPropertyOnThisRow||e.type===c().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===c().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===c().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===c().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===c().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===c().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===c().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===c().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===c().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===c().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===c().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===c().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===c().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const y={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(y[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:c,sort:l}=e,u=(0,r().uv)(o).filter(((e,t,n)=>{var r;const a=o[e];return!(!a||!y[a.type])&&((!(0,i().$M)(a)||null===(r=(0,i().om)(a))||void 0===r||!r.auto_update_on_edit)&&(!c||c([e,a],t,o)))}));if(0===u.length)return[];if(!t||!1===l)return u;const d=(0,s().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return n().Ul(u,(e=>d.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return h[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function _(e){return S[e.type]}function C(e){return 0===e}function M(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function A(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function T(e){const{collectionSchema:t,property:o,type:n}=e,r=null==t?void 0:t[o];return!r||("action"===n?!d(r):!y[r.type])}function x(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:n,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const c="some"===n.type&&n.some,s="all"===n.type&&n.all;if((c||s||[]).some((e=>A({collectionSchema:o,property:e.property})||T({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const l="some"===n.type&&(!(0,r().O9)(n.some)||0===n.some.length),u="all"===n.type&&(!(0,r().O9)(n.all)||0===n.all.length);if(!e&&("none"===n.type||l||u)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},528411:(e,t,o)=>{o.r(t),o.d(t,{TemplateRecurrenceConfigMenu:()=>g});var n=o(296540),r=()=>o(484714),i=()=>o(406699),a=()=>o(104636),c=()=>o(401497),s=()=>o(643381),l=()=>o(959013),u=()=>o(496603),d=()=>o(493823),p=()=>o(553965),m=o(474848);function f(e){const{buttonPopupEvents:t,focused:n,tooltipLabel:i,recurrence:a,showTooltip:f,variant:g="dropdown"}=e,v=(0,r().v3)(),{device:h}=v,b=(0,c().DP)(),S=(0,l().tz)(),_=function(){const{isMobile:e}=(0,r().Y0)();return(0,c().IS)((t=>({iconStyle:{fill:t.regularIconColor,width:e?18:16}})),[e])}(),C=Boolean(a);return(0,m.jsx)(o(859428).A,{disableTooltip:!f,delayThreshold:300,renderTooltip:()=>i,render:e=>{switch(g){case"dropdown":return(0,m.jsx)(o(113474)._,{...(0,p().A)(e,t),focused:n,icon:(0,s().l)(_.iconStyle),title:(0,m.jsx)(l().sA,{defaultMessage:"Repeat",id:"database.templatePickerItem.actionMenu.repeat"}),showExtensionArrow:h.isMobile,right:y({isActive:C,recurrence:a,intl:S})});case"icon":return(0,m.jsx)(d().p,{...u().cJ((0,p().A)(e,t),["focused","ignoreLocalHoverState"]),disallowTabbing:!1,size:"sm",role:"button",children:(0,s().l)({color:o(100622).Ay.blue,width:14})});case"label":return(0,m.jsxs)(d().p,{...(0,p().A)(e,t),children:[y({isActive:C,recurrence:a,intl:S}),(0,o(668725).b)({fill:b.lightIconColor,marginLeft:4,width:10})]})}}})}function y(e){let{isActive:t,recurrence:o,intl:n}=e;return t?o?(0,m.jsx)(m.Fragment,{children:(0,u().ZH)((0,a().LS)({recurrence:o,intl:n}))}):void 0:(0,m.jsx)(l().sA,{defaultMessage:"Off",id:"database.templatePickerItem.recurrenceConfigMenuLabel.off"})}const g=(0,n.forwardRef)((function(e,t){const{recurrence:n,onChange:c,disabled:s,buttonPopupStore:l}=e,u=(0,r().v3)(),{device:d}=u,p=d.isMobile?i().z7.SlideUp:i().z7.Popup,y=(0,o(131276).$)({recurrence:e.recurrence,onChange:c,disabled:s,requireExplicitSaveAndAllowDelete:!0,buttonPopupStore:l});return(0,m.jsx)(o(811979).A,{...e,popupType:p,ref:t,stopClickPropagation:!0,buttonPopupStore:y.buttonPopupStore,disabled:!1,onClose:async()=>{y.hasUnpersistedChanges()&&!(await o(898125).lT({hasPendingChanges:!0}))||(y.onClose(),y.buttonPopupStore.setState({open:!1}))},persistOnClose:!0,renderOrigin:t=>(0,m.jsx)(f,{buttonPopupEvents:t,focused:e.focused,tooltipLabel:n&&(0,a()._b)(n.frequency),recurrence:e.recurrence,showTooltip:e.showTooltip,variant:e.variant}),render:y.render})}))},541181:(e,t,o)=>{o.d(t,{n:()=>i});var n=()=>o(645873);const r=new(n().O2)("react-day-picker",(async()=>await Promise.all([o.e(95555),o.e(75831),o.e(68548)]).then(o.bind(o,762290)))),i=(0,n()._h)(r,(e=>e.default))},546461:(e,t,o)=>{o.d(t,{EC:()=>C,To:()=>_,YC:()=>M,or:()=>S,u:()=>b});o(16280);var n=o(296540),r=()=>o(484714),i=()=>o(847249),a=()=>o(496506),c=()=>o(322867),s=()=>o(959013),l=()=>o(534177),u=()=>o(813297),d=()=>o(862292),p=()=>o(698331),m=()=>o(645873),f=()=>o(190019),y=()=>o(76190),g=o(474848);const v=new WeakMap,h=(0,n.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function b(e){const{automationStore:t,children:o,contextType:n}=e,b=(0,r().v3)(),S=(0,s().tz)(),{value:_}=(0,m().fJ)(d().T.formulas),{value:C}=(0,m().fJ)(u().QV.automationTypecheck),M=(0,y().n)(t),A=(0,i().K8)((()=>{if(!_)return{error:new(c().N9)("Missing formulas dependency")};if(!C)return{error:new(c().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:n,contextType:r,formulasModule:i,intl:c,isSubscribed:s}=e,u=v.get(o);if(u)return u;{const e=new(a().default)((()=>{const e=o.getTriggerType();let a=r;return(0,l().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,f().Z)({environment:t,automationStore:o,automationTypecheckModule:n,contextType:a,formulasModule:i,intl:c,isSubscribed:s})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:b,automationStore:t,automationTypecheckModule:C,contextType:n,formulasModule:_,intl:S,isSubscribed:M});return e.state}),[b,t,C,n,_,S,M]);return(0,g.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:A,contextType:n,defined:!0},children:o})}function S(e){const{automationStore:t,children:o}=e,n=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(b,{automationStore:t,contextType:(0,p().H8)(n??"event"),children:o})}function _(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function C(){const e=n.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function M(){return n.useContext(h)}},573351:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:a=!0,onChange:c,onFocus:s,onBlur:l,disabledDays:u,className:d}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[m,f]=(0,n.useState)(p),y=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{y.current!==i&&(f(new Date(i)),y.current=i)}),[i]);const g=(0,n.useCallback)(((e,t,o)=>{c(e.getTime())}),[c]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(o(541181).n,{locale:o(662303).locale,className:d??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:a?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:g,onMonthSelected:f,disabled:u,month:m,onDayBlur:l,onDayFocus:s})})}},603815:(e,t,o)=>{o.d(t,{A$:()=>T,JQ:()=>x,Vn:()=>M,s4:()=>A});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var n=()=>o(857639),r=()=>o(585515),i=()=>o(577449),a=()=>o(388821),c=()=>o(179034),s=()=>o(545285),l=()=>o(534177),u=()=>o(449506),d=()=>o(780054),p=()=>o(989423),m=()=>o(870618),f=()=>o(303626),y=()=>o(14307),g=()=>o(245865),v=()=>o(540758),h=()=>o(670631),b=()=>o(508496),S=()=>o(571963),_=()=>o(603815),C=()=>o(108944);async function M(e){const{environment:t,request:o,abortSignal:n,prefetchCacheKey:r,headers:i}=e;return(0,S().updateLoadCachedPageChunkCalledAt)(),y().isConnected()||y().isConnecting()?u().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:r,headers:i}):u().callApi({eventName:"loadPageChunkV2",environment:t,data:o,abortSignal:n,prefetchCacheKey:r,headers:i})}async function A(e){const{mode:t,environment:o,request:l,isFirstChunk:u,abortSignal:y}=e,g={...l,limit:30,cursor:l.cursor||{stack:[]},baseUrl:d().A.domainBaseUrl,publicDomainName:d().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await _().A$(o,{id:l.page.id,table:c().ev}),null!=y&&y.aborted))throw new Error("Abort signal received");const b=a().RecordMapWithRole.create(),S=[];let C=!1;const M=new Set,A=await r().T(g,i().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await m().h7({environment:o,pointer:e,abortSignal:y,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=y&&y.aborted)throw new Error("Abort signal received");if(n)return b.setModelAndRole(e,n.model,n.role),n.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,s().u)(e)&&!M.has(e.id)&&u){if(void 0===h().A.state.offlinePages)return S.push(e),void(C=!0);if(void 0===h().A.state.offlinePages||!v().Bd(l.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);S.push(e)}})),((e,t,o,n)=>{f().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=n&&n.suppressErrorOnClient&&M.add(t.id)}));if(C&&(await h().A.waitUntil((()=>void 0!==h().A.state.offlinePages)),!v().Bd(l.page.id))){const[e]=S;throw new Error(`Record not found: ${e.table},${e.id}`)}if(S.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&n().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:l.page.id,missingRecords:S}})})),null!=y&&y.aborted)throw new Error("Abort signal received");return{recordMap:b.toJson(),cursor:A.cursorValue}}async function T(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),g().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function x(e){if(!b().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let o=0;const n=()=>o>=50,r=e=>{"space"!==(null==e?void 0:e.table)&&(n()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const a of(0,C().E)(e))r(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);r(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(n()||o>=10)break;o++,r(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(l().O9);return i.length?i:void 0}},643381:(e,t,o)=>{o.d(t,{l:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("repeat",{viewBox:"0 0 16 14",svg:(0,n.jsx)("path",{d:"M1.185 7.317a.689.689 0 00.697-.704v-.601c0-1.19.806-1.942 2.064-1.942H9.23v1.573c0 .328.199.52.527.52a.66.66 0 00.403-.144l2.68-2.236c.253-.212.26-.547 0-.765L10.16.782A.62.62 0 009.757.64c-.328 0-.527.184-.527.52v1.53H4.05C1.875 2.69.48 3.9.48 5.875v.738c0 .397.308.704.705.704zm13.624-.649a.689.689 0 00-.698.704v.608c0 1.19-.806 1.942-2.064 1.942H6.763V8.35c0-.329-.199-.52-.527-.52a.66.66 0 00-.403.144l-2.68 2.242c-.26.212-.26.547 0 .759l2.68 2.242a.66.66 0 00.403.143c.328 0 .527-.191.527-.52v-1.544h5.181c2.174 0 3.569-1.21 3.569-3.179v-.745a.695.695 0 00-.704-.704z"})})},698331:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>r});var n=()=>o(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,n().O9)(t)&&r(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,n().HB)(e)}},770586:(e,t,o)=>{o.d(t,{v:()=>n});o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(908872);function n(e,t){const o=e.reduce(((e,t)=>{if(t.isType("define_variables")){var o;const n=null===(o=t.getModel())||void 0===o?void 0:o.getVariables();if(n)for(const t of Object.values(n))e.add(t.name)}return e}),new Set),n=t.replace(/\s*\d+$/,"");let r=1,i=`${n} ${r}`;for(;o.has(i);)i=`${n} ${r}`,r++;return i}},781697:(e,t,o)=>{o.d(t,{e:()=>c,v:()=>a});var n=()=>o(484714),r=()=>o(847249),i=()=>o(722872);function a(e){return e.device.isPhone||"actionSheet"===e.tabletBehavior&&e.device.isTablet?{menuType:i().gu.ActionSheet}:{menuType:i().gu.Popup,maxHeight:e.maxHeight,maxWidth:e.maxWidth,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,width:e.width,minWidth:e.minWidth}}function c(e){const t=(0,n().Y0)();return(0,r().K8)((()=>a({device:t,maxHeight:null==e?void 0:e.maxHeight,maxWidth:null==e?void 0:e.maxWidth,paddingTop:null==e?void 0:e.paddingTop,paddingBottom:null==e?void 0:e.paddingBottom,width:null==e?void 0:e.width,minWidth:null==e?void 0:e.minWidth,tabletBehavior:null==e?void 0:e.tabletBehavior})),[t,null==e?void 0:e.maxHeight,null==e?void 0:e.maxWidth,null==e?void 0:e.paddingTop,null==e?void 0:e.paddingBottom,null==e?void 0:e.width,null==e?void 0:e.minWidth,null==e?void 0:e.tabletBehavior])}},811979:(e,t,o)=>{o.d(t,{A:()=>s});var n=o(296540),r=()=>o(847249),i=()=>o(592678),a=o(474848);function c(e,t){const{onClose:c,persistOnClose:s,render:d,stopClickPropagation:p,onClick:m,disablePopup:f,disabled:y,forceInitialInbound:g,renderOrigin:v,originGap:h,borderRadius:b,popupWrapStyle:S}=e,_=(0,r().uB)(e.buttonPopupStore,o(463830).A);(0,n.useEffect)((()=>()=>{_.setState({open:!1})}),[_]);const C=(0,n.useCallback)((()=>l(c,s,_)),[c,s,_]),M=(0,n.useCallback)((()=>(0,a.jsx)(u,{onClose:c,persistOnClose:s,render:d,buttonPopupStore:_})),[c,s,d,_]),A=(0,n.useCallback)((e=>function(e,t,o,n,r){t&&(null==e||e.stopPropagation());if(e&&i().Vt(e))return;o&&o(e);n||r.setState({...r.state,open:!0})}(e,p,m,f,_)),[p,m,f,_]),T=(0,r().K8)((()=>v({...e,onClick:y?o(496603).D_:A})),[y,A,e,v]),x=(0,r().K8)((()=>_.state.open),[_]);return(0,a.jsx)(o(897119).Ay,{ref:t,...e,forceInitialInbound:Boolean(g),render:M,open:x,onDismiss:C,origin:T,originGap:h,borderRadius:b,popupWrapStyle:S,trapFocus:!0})}const s=n.forwardRef(c);function l(e,t,o){e&&e(),t||o.reset()}function u(e){let{onClose:t,persistOnClose:o,render:i,buttonPopupStore:c}=e;const s=(0,n.useCallback)((()=>l(t,o,c)),[t,o,c]),u=(0,r().K8)((()=>i({close:s})),[i,s]);return(0,a.jsx)(a.Fragment,{children:u})}},839916:(e,t,o)=>{o.r(t),o.d(t,{addRecurrence:()=>v,createRecurrenceInner:()=>b,deleteRecurrence:()=>h});var n=()=>o(390527),r=()=>o(206267),i=()=>o(912720),a=()=>o(199378),c=()=>o(519831),s=()=>o(534177),l=()=>o(896628),u=()=>o(246826),d=()=>o(751156),p=()=>o(989423),m=()=>o(594794),f=()=>o(351360),y=()=>o(630116),g=()=>o(324587);function v(e){let{environment:t,blockStore:o,recurrence:r}=e;const s=o.getAutomationId(),l=(0,n().convertFromUnpersistedRecurrenceConfig)(r);s?function(e,t,o,n){const r=o.getParentStore();if(!r||r.table!==c().Vl)return;const s=o.getSpaceId(),l={table:i().yB,id:t,spaceId:s},p=y().dn.createChildStore(o,l),f=p.getTrigger();if(!f)return;const g=p.getActionStores()[0];d().createAndCommit({environment:e,userAction:"recurrenceActions.updateRecurrence",canUndo:!0,perform:t=>{const i=S({automationId:p.id,spaceId:s,collectionPointer:r.getSpaceShardedPointer(),templatePageId:o.id});let c;g?(c=g.id,u().zv({store:g,data:i,transaction:t})):(c=(0,m().Z1)({environment:e,table:a().SC,spaceId:s}),u().eC({environment:e,table:a().SC,inMemoryRecordCache:p.inMemoryRecordCache,transaction:t,value:{id:c,...i}})),u().zv({store:p,data:{alive:!0,status:"active",trigger:{id:f.id,type:"recurrence",recurrence:n},action_ids:[c]},transaction:t})}}),_(e,{type:"updated",frequency:n.frequency})}(t,s,o,l):function(e,t,o){d().createAndCommit({environment:e,userAction:"recurrenceActions.createRecurrence",canUndo:!0,perform:n=>{b(n,e,t,o)}})}(t,o,l)}function h(e){let{environment:t,blockStore:o}=e;const n=o.getAutomationStore();(0,s().O9)(n)&&(d().createAndCommit({environment:t,userAction:"recurrenceActions.deleteRecurrence",canUndo:!0,perform:e=>{g().disableAutomation({automationStore:n,environment:t,transaction:e}),g().deleteAutomation({automationStore:n,environment:t,transaction:e}),l().zA({stores:[o],update:{automation_id:void 0},transaction:e})}}),_(t,{type:"deleted"}))}function b(e,t,o,n){const{currentUserRootStore:s}=f().default.state;if(!s)return;const d=o.getParentStore();if(!d||d.table!==c().Vl)return;if(!d.getParentBlockStore())return;const p=o.getSpaceId(),y=(0,m().Z1)({environment:t,table:a().SC,spaceId:p}),g=u().eC({environment:t,table:i().yB,inMemoryRecordCache:o.inMemoryRecordCache,value:{parent_id:o.id,parent_table:o.table,alive:!0,space_id:p,status:"active",trigger:{id:r().JW(),type:"recurrence",recurrence:n},action_ids:[y]},transaction:e}).pointer.id;l().zA({stores:[o],update:{automation_id:g},transaction:e}),u().eC({environment:t,table:a().SC,inMemoryRecordCache:o.inMemoryRecordCache,transaction:e,value:{id:y,...S({automationId:g,spaceId:p,collectionPointer:d.getSpaceShardedPointer(),templatePageId:o.id})}}),_(t,{type:"created",frequency:n.frequency})}function S(e){const{automationId:t,spaceId:o,collectionPointer:n,templatePageId:r}=e;return{parent_id:t,parent_table:i().yB,type:"create_page",alive:!0,space_id:o,config:{collection:n,template_page_id:r}}}function _(e,t){p().vd(e,"recurrence_saved",t)}}}]);