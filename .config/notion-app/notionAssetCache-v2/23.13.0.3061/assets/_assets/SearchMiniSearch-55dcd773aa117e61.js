"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[98682],{7767:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(194188),o=()=>n(10123),s=()=>n(570551);function r(e,t){(0,s().A)(2,arguments);var n=(0,o().A)(e).getTime(),r=(0,i().A)(t);return new Date(n+r)}},10123:(e,t,n)=>{n.d(t,{A:()=>s});var i=()=>n(570551);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){(0,i().A)(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===o(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}},38679:(e,t,n)=>{n.d(t,{P:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M9.538 10.331c0 2.171-1.657 3.931-3.7 3.931s-3.7-1.76-3.7-3.93a4 4 0 0 1 .05-.657h-.513a.5.5 0 0 1 0-1h.806C3.069 7.33 4.351 6.4 5.838 6.4c1.362 0 2.553.782 3.195 1.948a2.5 2.5 0 0 1 1.935 0C11.61 7.182 12.8 6.4 14.163 6.4c1.486 0 2.768.931 3.356 2.275h.806a.5.5 0 1 1 0 1h-.514q.052.32.052.656c0 2.171-1.657 3.931-3.7 3.931s-3.7-1.76-3.7-3.93q.001-.55.134-1.055a1.5 1.5 0 0 0-1.194 0q.133.505.135 1.054m-1.25 0c0-1.553-1.168-2.681-2.45-2.681s-2.45 1.128-2.45 2.681 1.167 2.681 2.45 2.681c1.282 0 2.45-1.128 2.45-2.68m8.325 0c0-1.553-1.168-2.681-2.45-2.681s-2.45 1.128-2.45 2.681 1.167 2.681 2.45 2.681c1.282 0 2.45-1.128 2.45-2.68"})},o=(0,n(340498).wt)("eyeglasses",i)},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});class i extends(()=>n(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const o=new i},120114:(e,t,n)=>{n.d(t,{AX:()=>r,Ur:()=>i,uw:()=>o,yP:()=>s});const i=["unified_find_variant"],o=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],s=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function r(e,t,n){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:n("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:n("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:n("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:n("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:n("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},194188:(e,t,n)=>{function i(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}n.d(t,{A:()=>i})},253447:(e,t,n)=>{n.d(t,{F:()=>o});var i=()=>n(963575);function o(e,t){if(e)return e;switch(t){case"large":return i().A.card.desktop.large.height;case"small":return i().A.card.desktop.small.height;default:return i().A.card.desktop.medium.height}}},271232:(e,t,n)=>{n.d(t,{t:()=>s});var i=n(296540),o=n(474848);const s=i.memo((function(e){const{coverHeight:t,coverSizeFormat:i,emptyGalleryCoverStyle:s}=e,r=(0,n(401497).IS)((()=>({container:{height:(0,n(253447).F)(t,i),...s}})),[t,i,s]);return(0,o.jsx)("div",{style:r.container})}))},358006:(e,t,n)=>{n.d(t,{z:()=>r});n(296540);var i=()=>n(645873),o=n(474848);const s=new(i().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await n.e(79883).then(n.bind(n,873718));return{CollectionItemCover:e}})),r=(0,i()._h)(s,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:i,coverSizeFormat:s,emptyGalleryCoverStyle:r,showEmptyGalleryCover:a}=t;return a?(0,o.jsx)(n(271232).t,{coverHeight:i,coverSizeFormat:s,emptyGalleryCoverStyle:r}):null}})},359545:(e,t,n)=>{n.d(t,{d:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("computerChip",{viewBox:"0 0 64 64",svg:(0,i.jsx)("path",{d:"m58,21.5v-3l-6-1.5v-1c0-2.47-1.53-4-4-4h-1l-1.5-6h-3l-1.5,6h-6l-1.5-6h-3l-1.5,6h-6l-1.5-6h-3l-1.5,6h-1c-2.47,0-4,1.53-4,4v1l-6,1.5v3l6,1.5v6l-6,1.5v3l6,1.5v6l-6,1.5v3l6,1.5v1c0,2.47,1.53,4,4,4h1l1.5,6h3l1.5-6h6l1.5,6h3l1.5-6h6l1.5,6h3l1.5-6h1c2.47,0,4-1.53,4-4v-1l6-1.5v-3l-6-1.5v-6l6-1.5v-3l-6-1.5v-6l6-1.5Zm-10,26.5H16V16h32v32Zm-4-28h-24v24h24v-24Zm-17,10c-1.66,0-3-1.34-3-3s1.34-3,3-3,3,1.34,3,3-1.34,3-3,3Z"})})},392890:(e,t,n)=>{n.d(t,{A:()=>a});var i=()=>n(194188),o=()=>n(7767),s=()=>n(570551),r=6e4;function a(e,t){(0,s().A)(2,arguments);var n=(0,i().A)(t);return(0,o().A)(e,n*r)}},392998:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(194188),o=()=>n(10123),s=()=>n(570551);function r(e,t){(0,s().A)(2,arguments);var n=(0,o().A)(e),r=(0,i().A)(t);return isNaN(r)?new Date(NaN):r?(n.setDate(n.getDate()+r),n):n}},408197:(e,t,n)=>{n.d(t,{s:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10.566 16.22a4.6 4.6 0 0 1-2.068-.487v-.01l-1.423-.487h-.122V7.498l1.76-1.876c.293-.375.576-.938.846-1.475.179-.355.352-.7.519-.972l.36-.74a1.29 1.29 0 0 1 1.551-.527c.624.243.955.916.77 1.56l-.507 1.774c-.099.343-.241.63-.384.917a5.6 5.6 0 0 0-.376.887.404.404 0 0 0 .39.517h4.095a1.22 1.22 0 0 1 1.218 1.218c0 .42-.224.78-.555.995a1.2 1.2 0 0 1-.147 2.213c.274.224.459.556.459.936a1.21 1.21 0 0 1-1.21 1.219 1.22 1.22 0 0 1-.868 2.077zM5.734 8.148H3.663a.975.975 0 0 0-.975.975v5.138c0 .538.436.975.974.975h2.072z"})},o=(0,n(340498).wt)("handThumbsUpFill",i)},436150:(e,t,n)=>{n.d(t,{v:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m6.953 12.502 1.76 1.876c.293.375.576.938.846 1.475.179.356.352.7.519.972l.36.741c.322.527.976.741 1.551.527.624-.244.955-.917.77-1.56l-.507-1.775a5.3 5.3 0 0 0-.384-.917c-.138-.278-.276-.556-.376-.887a.404.404 0 0 1 .39-.517h4.095a1.22 1.22 0 0 0 1.218-1.218c0-.42-.224-.78-.555-.995.4-.195.672-.594.672-1.072a1.2 1.2 0 0 0-.819-1.141 1.21 1.21 0 0 0 .459-.936 1.21 1.21 0 0 0-1.21-1.219 1.22 1.22 0 0 0-.868-2.077h-4.308c-.722 0-1.424.166-2.068.488v.01l-1.423.487h-.122zM5.734 4.764v7.088H3.663a.975.975 0 0 1-.975-.975V5.74c0-.538.436-.975.974-.975z"})},o=(0,n(340498).wt)("handThumbsDownFill",i)},529324:(e,t,n)=>{n.d(t,{C:()=>i});const i=(0,n(340498).xh)("magnifyingGlass",{default:{loader:()=>n.e(1827).then(n.bind(n,901827))},small:{loader:()=>n.e(41805).then(n.bind(n,741805))},mini:{loader:()=>n.e(20283).then(n.bind(n,420283))},large:{loader:()=>n.e(61969).then(n.bind(n,861969))}})},551345:(e,t,n)=>{n.d(t,{VN:()=>l,or:()=>r,pV:()=>a});var i=()=>n(120114),o=()=>n(430483),s=()=>n(508496);function r(e){const{configurationState:t}=e;return t.deepFindRequested&&o().zD.isDeepFindEnabled()}function a(e){const{configurationState:t,assistantSurface:n}=e;return r({configurationState:t})&&n.isType("fullPage")}function l(){const e=o().zD.state;return(0,i().AX)(e,(e=>s().default.getConfigKey("deep_find_config",e)),(e=>s().default.checkGate({gateName:e})))}new(n(496506).default)((()=>{var e;const t=o().zD.isDeepFindEnabled(),i=Boolean(null===(e=n(295169).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&i}),{debugName:"isDeepFindActiveStore"})},570551:(e,t,n)=>{function i(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}n.d(t,{A:()=>i})},606982:(e,t,n)=>{n.d(t,{A:()=>s});var i=()=>n(10123),o=()=>n(570551);function s(e,t){(0,o().A)(2,arguments);var n=(0,i().A)(e),s=(0,i().A)(t),r=n.getTime()-s.getTime();return r<0?-1:r>0?1:r}},631818:(e,t,n)=>{n.d(t,{A:()=>D,x:()=>N});n(581454);var i=n(296540),o=()=>n(484714),s=()=>n(847249),r=()=>n(401497),a=()=>n(584262),l=()=>n(657222),c=()=>n(861017),d=()=>n(179034),u=()=>n(959013),h=()=>n(284371),m=()=>n(755636),p=()=>n(281948),g=()=>n(768407),v=()=>n(493823),f=()=>n(406699),y=()=>n(928600),b=()=>n(939740),S=()=>n(614505),x=()=>n(16006),I=()=>n(89924),A=()=>n(780054),w=()=>n(458366),C=()=>n(722872),j=()=>n(962730),k=()=>n(351360),M=()=>n(630116),_=n(474848);const T=4,R=4,P={height:20,paddingTop:2,paddingBottom:2,marginTop:-2,marginBottom:-2,paddingLeft:4,paddingRight:4,marginLeft:-T,marginRight:-R};function B(e){let{event:t,onClick:n}=e;const i=(0,o().v3)(),s=(0,r().IS)((()=>({container:{display:"flex",flexDirection:"row",justifyItems:"center",width:"fit-content",maxWidth:"100%",gap:6}})),[]),{attachments:a}=t,[l,...d]=function(e){let{environment:t,attachments:n}=e;if(!n)return[];const i=n.findIndex((e=>"page"===(0,c().parseRoute)({url:e.fileUrl,isMobile:t.device.isMobile,baseUrl:A().A.domainBaseUrl,publicDomainName:A().A.publicDomainName,protocol:A().A.protocol,currentUrl:window.location.href}).name));if(-1===i)return n;return[n[i],...n.slice(0,i),...n.slice(i+1)]}({environment:i,attachments:a});return a&&l?(0,_.jsxs)("div",{style:s.container,children:[(0,_.jsx)(E,{attachment:l,attachmentIndex:0,onClick:n}),(0,_.jsx)(F,{attachments:d,onClickAttachment:n})]}):null}function E(e){let{attachment:t,attachmentIndex:n,menuListItemProps:c,onClick:d}=e;const{fileUrl:u,iconLink:f}=t,y=0===n,b=(0,r().IS)((e=>({button:{gap:4,flexShrink:1,...y?{maxWidth:`calc(100% + ${T+R}px)`}:{width:"100%"},...y&&P},title:{...y?{...(0,w().w_)(e),fontWeight:h().Wy.medium}:{maxWidth:200},...h().RC},icon:{height:16},linkIcon:{height:16,width:16,fill:e.mediumIconColor}})),[y]),I=(0,o().v3)(),A=(0,s().K8)((()=>{const{currentSpaceStore:e}=k().default.state;return N({environment:I,fileUrl:u,currentSpaceStore:e})}),[I,u]),C=(0,s().K8)((()=>{const e=null==A?void 0:A.getIcon();return A&&e?(0,_.jsx)(S().B,{icon:e,isEmptyPage:A.isEmptyPage(),size:16,disabled:!0}):f?(0,_.jsx)("img",{style:b.icon,src:f,alt:`Icon image for the Notion calendar event attachment entitled "${t.title}"`}):(0,l().w)(b.linkIcon)}),[t.title,A,f,b.icon,b.linkIcon]),j=A?(0,_.jsx)(x().A,{store:A,underline:y}):(0,_.jsx)("div",{style:b.title,children:t.title?t.title:(0,_.jsx)(g().lj,{textValue:[[t.fileUrl]]})}),M=(0,i.useCallback)((e=>{if(e.preventDefault(),!u)return;d({index:n,attachmentType:A?"notion":"other",attachmentBlockId:null==A?void 0:A.id});const t=e.metaKey||e.ctrlKey;A?p().VU({environment:I,openInNew:t?"tab":void 0,store:A,pageVisitSource:a().y8.PersonalHomeCalendarAttachment,peekMode:"center_peek",resultsStore:void 0,collectionContextStore:void 0}):m().f({environment:I,url:u})}),[n,A,I,u,d]);return(0,_.jsxs)(v().p,{style:b.button,href:u,metaHref:u,...c,onClick:M,children:[C,j]})}function F(e){let{attachments:t,onClickAttachment:n}=e;const i=(0,o().WS)(),s=(0,r().IS)((e=>({button:{color:e.text.secondary,...P,marginRight:0},sectionMenuItem:{display:"flex",flexDirection:"column",padding:4,width:"100%"}})),[]);return t&&0!==t.length?(0,_.jsx)(f().Ay,{alignmentToOrigin:j().C.Start,placementToOrigin:j().W.Bottom,renderOrigin:e=>(0,_.jsx)(v().p,{style:s.button,...e,children:(0,_.jsx)(u().sA,{id:"EventCalendarAttachments.plusMoreAttachments",defaultMessage:"+{numRemainingAttachments}",values:{numRemainingAttachments:t.length}})}),popupType:i?f().z7.SlideUp:f().z7.Popup,render:e=>(0,_.jsx)(y().A,{menuType:C().gu.Popup,maxWidth:300,children:(0,_.jsx)(b().Ay,{onAccept:e.close,type:b().Oh.Vertical,sections:[{key:"all",render:e=>(0,_.jsx)(I().A,{...e,style:s.sectionMenuItem}),items:t.map(((e,t)=>({key:e.fileUrl,render:i=>(0,_.jsx)(E,{menuListItemProps:i,attachment:e,attachmentIndex:t+1,onClick:n},e.fileUrl),action:()=>{}})))}],initialFocus:0})})}):(0,_.jsx)(_.Fragment,{})}function N(e){const{environment:t,currentSpaceStore:n}=e;let i=e.fileUrl;if(!n)return;A().A.isLocalhost&&(i=i.replace("dev.notion.so","localhost:3000").replace("https","http"));const o=(0,c().parseRoute)({url:i,isMobile:t.device.isMobile,baseUrl:A().A.domainBaseUrl,publicDomainName:A().A.publicDomainName,protocol:A().A.protocol,currentUrl:window.location.href}),s="page"===o.name?o.blockId:void 0;if(!s)return;const r=M().Bv.createChildStore(n,{table:d().ev,id:s});return r.load(),r.isReady()?r:void 0}const D=i.memo(B)},677169:(e,t,n)=>{n.d(t,{m:()=>u});n(898992),n(354520),n(672577),n(737550);var i=n(296540),o=()=>n(484714),s=()=>n(847249),r=()=>n(617871),a=()=>n(351360),l=()=>n(508496),c=()=>n(53137),d=()=>n(523239);function u(){const e=(0,o().v3)(),t=(0,i.useRef)(void 0);return(0,s().K8)((()=>{if(void 0===t.current){if(!l().default.isStatsigReady())return{loading:!0,botId:void 0,botSpaceId:void 0,botUserId:void 0};t.current=l().default.checkGate({gateName:"calendar_home_tile_caching"})}if(t.current){var n;const{currentSpaceViewStore:t}=a().default.state;if(!t||!t.isReady())return{loading:!0,botId:void 0,botSpaceId:void 0,botUserId:void 0};const i=t.getSelectedCalendarBotId(),o=!c().A.state.loaded;if(i&&o)return{loading:!1,botId:i,botSpaceId:t.getSpaceId(),botUserId:t.getUserId()};const{spaceId:s,userId:l}=c().A.state.loaded?c().A.state:{spaceId:void 0,userId:void 0},u=c().A.bots.state.filter((e=>e.integration_id===r().io)),h=null===(n=u[0])||void 0===n?void 0:n.id,m=i&&u.some((e=>e.id===i))?i:h;return m&&m!==i?(0,d().rq)({environment:e,botId:m,shouldLog:!1}):!m&&i&&(0,d().k2)({environment:e}),{loading:o,botId:m,botSpaceId:s,botUserId:l}}{var i,o,s;const e=c().A.bots.state.filter((e=>e.integration_id===r().io)),t=null===(i=a().default.state.currentSpaceViewStore)||void 0===i?void 0:i.getSelectedCalendarBotId(),n=!c().A.state.loaded||!(null!==(o=a().default.state.currentSpaceViewStore)&&void 0!==o&&o.isReady()),{spaceId:l,userId:d}=c().A.state.loaded?c().A.state:{spaceId:void 0,userId:void 0},u=null===(s=e[0])||void 0===s?void 0:s.id;if(!t)return{loading:n,botId:u,botSpaceId:l,botUserId:d};const h=e.find((e=>e.id===t));return{loading:n,botId:(null==h?void 0:h.id)??u,botSpaceId:l,botUserId:d}}}),[e])}},709687:(e,t,n)=>{n.d(t,{r:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("bell",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},715011:(e,t,n)=>{n.d(t,{A:()=>a});var i=n(296540),o=()=>n(959013),s=()=>n(409268),r=n(474848);function a(e){const t=(0,i.useMemo)((()=>(0,s().s)(e.store)),[e.store]);return(0,r.jsx)(o().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},810072:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ct});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(803949),n(581454),n(737550);var i=()=>n(392890),o=n(296540),s=()=>n(484714),r=()=>n(852507),a=()=>n(847249),l=()=>n(401497),c=()=>n(584262),d=()=>n(921940),u=()=>n(416504),h=()=>n(187174),m=()=>n(529324),p=()=>n(356596),g=()=>n(38679),v=()=>n(340498),f=n(474848);const y={viewBox:"0 0 20 20",svg:(0,f.jsx)("path",{d:"M12.207 18.678a1.91 1.91 0 0 1-2.33-.838l-.348-.715c-.177-.293-.36-.658-.535-1.005l-.13-.257c-.225-.442-.431-.822-.627-1.08l-2.164-2.306h-2.41a1.6 1.6 0 0 1-1.6-1.6V5.74a1.6 1.6 0 0 1 1.6-1.6H6.97l1.227-.42.021-.011a5.2 5.2 0 0 1 2.347-.553h4.309a1.844 1.844 0 0 1 1.78 2.32c.554.318.922.918.922 1.6 0 .284-.067.547-.18.78.333.327.54.782.54 1.297 0 .429-.145.817-.388 1.124.17.27.271.592.271.943a1.844 1.844 0 0 1-1.843 1.844h-3.783c.069.167.15.33.242.516v.001c.14.28.302.608.416 1.004l.001.002.507 1.774a1.913 1.913 0 0 1-1.144 2.315zm-1.567-2.126.345.71a.66.66 0 0 0 .781.247.66.66 0 0 0 .393-.804l-.507-1.773v-.001c-.08-.276-.195-.512-.336-.797l-.014-.028a6 6 0 0 1-.408-.97 1.03 1.03 0 0 1 .988-1.323h4.095a.594.594 0 0 0 .593-.594.56.56 0 0 0-.27-.47.625.625 0 0 1 .066-1.086.56.56 0 0 0 .322-.511.58.58 0 0 0-.4-.55.625.625 0 0 1-.191-1.074.59.59 0 0 0 .23-.453.586.586 0 0 0-.584-.594.625.625 0 0 1-.452-1.057.594.594 0 0 0-.416-1.02h-4.31c-.593 0-1.17.13-1.703.381a.6.6 0 0 1-.161.083l-1.424.488a.6.6 0 0 1-.202.033h-.181v6.136l2.275 2.425.037.043c.286.367.547.86.772 1.303l.147.29a13 13 0 0 0 .515.966m-4.846-5.324v-5.84H3.663a.35.35 0 0 0-.35.35v5.139c0 .193.156.35.35.35z"})},b=(0,v().wt)("handThumbsDown",y);const S={viewBox:"0 0 20 20",svg:(0,f.jsx)("path",{d:"M12.207 1.322a1.91 1.91 0 0 0-2.33.838l-.348.715c-.177.292-.36.658-.535 1.005l-.13.257c-.225.442-.431.822-.627 1.08L6.073 7.521h-2.41a1.6 1.6 0 0 0-1.6 1.6v5.139a1.6 1.6 0 0 0 1.6 1.6H6.97l1.227.42.021.01c.73.366 1.528.554 2.347.554h4.309a1.844 1.844 0 0 0 1.78-2.32c.554-.318.922-.918.922-1.6 0-.284-.067-.547-.18-.78.333-.327.54-.782.54-1.297a1.8 1.8 0 0 0-.388-1.124c.17-.27.271-.592.271-.943a1.844 1.844 0 0 0-1.843-1.844h-3.783c.069-.167.15-.33.242-.516a6 6 0 0 0 .416-1.004l.001-.002.507-1.774a1.913 1.913 0 0 0-1.144-2.315zM10.64 3.449l.345-.71a.66.66 0 0 1 .781-.248c.32.128.488.471.393.804l-.507 1.773v.001c-.08.276-.195.512-.336.797l-.014.028c-.134.27-.292.59-.408.97a1.03 1.03 0 0 0 .988 1.323h4.095c.327 0 .593.267.593.594a.56.56 0 0 1-.27.47.625.625 0 0 0 .066 1.086.56.56 0 0 1 .322.511.58.58 0 0 1-.4.55.625.625 0 0 0-.191 1.074c.149.122.23.285.23.453a.586.586 0 0 1-.584.594.625.625 0 0 0-.452 1.057.594.594 0 0 1-.416 1.02h-4.31c-.593 0-1.17-.13-1.703-.381a.6.6 0 0 0-.161-.083l-1.424-.488a.6.6 0 0 0-.202-.033h-.181V8.475L9.169 6.05l.037-.043c.286-.367.547-.86.772-1.303l.147-.29a13 13 0 0 1 .515-.965M5.794 8.772v5.839H3.663a.35.35 0 0 1-.35-.35V9.122a.35.35 0 0 1 .35-.35z"})},x=(0,v().wt)("handThumbsUp",S);var I=()=>n(799384),A=()=>n(349348),w=()=>n(992437),C=()=>n(386164),j=()=>n(450648),k=()=>n(620333),M=()=>n(245241),_=()=>n(175947),T=()=>n(959013),R=()=>n(496603),P=()=>n(284371),B=()=>n(449506),E=()=>n(705540),F=()=>n(12831),N=()=>n(839752),D=()=>n(36951),K=()=>n(166442),U=()=>n(210008),L=()=>n(551345),V=()=>n(186445),O=()=>n(728611),q=()=>n(751380),z=()=>n(847743),H=()=>n(792540),W=()=>n(148777),G=()=>n(825972),$=()=>n(658883),Q=()=>n(64736),Y=()=>n(135599),Z=()=>n(508496);class X extends(()=>n(757695))().default{getInitialState(){return{pageIdToUsers:{},similarUserIdToLastVisitedPageId:{}}}getPageIdToActiveSimilarUsersCount(){const e={};for(const[t,i]of(0,n(534177).WP)(this.state.pageIdToUsers))e[t]=(null==i?void 0:i.length)??0;return e}}const J=new X;var ee=()=>n(866515);const te=6e4;function ne(e){return Date.now()-e.timestamp>=e.numberOfMinutes*te}var ie=()=>n(47170),oe=()=>n(963589),se=()=>n(857437),re=()=>n(327300),ae=()=>n(523239),le=()=>n(631818),ce=()=>n(677169),de=()=>n(614016),ue=()=>n(379560),he=()=>n(962730),me=()=>n(756279),pe=()=>n(351360),ge=()=>n(430483),ve=()=>n(295169),fe=()=>n(982254),ye=()=>n(970585),be=()=>n(786601),Se=()=>n(543491),xe=()=>n(24157),Ie=()=>n(577437),Ae=()=>n(10722),we=()=>n(122058),Ce=()=>n(298182),je=()=>n(760217),ke=()=>n(364280),Me=()=>n(285790),_e=()=>n(805751),Te=()=>n(939740),Re=()=>n(676007),Pe=()=>n(460292),Be=()=>n(897119),Ee=()=>n(128295),Fe=()=>n(2143),Ne=()=>n(228927),De=()=>n(89924),Ke=()=>n(859428),Ue=()=>n(42425),Le=()=>n(524702),Ve=()=>n(126126),Oe=()=>n(896278),qe=()=>n(90612),ze=()=>n(913441);const He=7,We=20,Ge=(0,R().sg)(we().nT,75);const $e={padding:"4px 8px"};function Qe(){const e=(0,s().v3)(),t=(0,T().tz)(),n=(0,a().O$)(be().A),p=(0,a().O$)(pe().AppStoreCurrentSpaceStore),g=(0,z().AI)({initialValue:[]}),{queryTextValue:v,query:y}=(0,a().K8)((()=>{if(!p)return{queryTextValue:[],query:""};const n=g.store.getValue()??[];return{queryTextValue:n,query:(0,j().r4)({intl:t,textValue:n,userTimeZone:(0,u().P)(),deterministic:!1,disableAnnotationPrefix:!0,disableInsertedAnnotations:!1,getRecordModel:w().b.fromGetRecordValueFn(e.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(e.currentUser.id))})}}),[p,g.store,t,e.defaultRecordCache.inMemoryRecordCache,e.currentUser.id]);(0,r().w)((()=>{be().A.update((e=>({...e,query:g})))}));const b=(0,a().K8)((()=>"on"===Z().default.getEligibleGroup({experimentId:"search_quickfind_prefetch"})),[]),S=0===y.trim().length,{results:x,searchSessionId:P,searchSessionFlowNumber:q,isResultsLoading:W,searchAnalytics:X}=(0,Y().W)({type:M().Vz.BlocksInSpace,query:y,limit:He,source:"mini_quick_find",options:{disable:S,isTitleOnly:!0,usePrefetch_EXPERIMENTAL:b,overrideSearchSessionId:n.sessionId}}),J=(0,o.useRef)(Date.now());(0,o.useEffect)((()=>{!S&&p&&(Ge({searchSessionId:P,results:x.map((e=>({id:e.store.id,source:e.localSource?"local":"server"}))),searchSessionFlowNumber:q,queryLength:y.length,queryWords:y.split(" ").length,timeToResult:Date.now()-J.current,environment:e,query:v,spaceStore:p}),J.current=Date.now())}),[x,P]);const[te,ne]=(0,o.useState)("recents"),je=(0,o.useMemo)((()=>(0,k().mk)({searchSessionId:P,searchSessionFlowNumber:q})),[P,q]),ke=(0,a().K8)((()=>n.isNewElectronTab),[n.isNewElectronTab],{debugName:"MiniSearch.isNewElectronTab"}),Me=(0,a().K8)((()=>fe().A.state.tabs),[],{debugName:"MiniSearch.electronTabs"}),Ee=(0,a().K8)((()=>{if(0===y.length)return[];return(0,Q().wn)({query:y,environment:e,searchMode:"nav-local-only"})??[]}),[e,y],{debugName:"MiniSearch.matchingActions"}),Ke=(0,o.useCallback)((t=>{var i;const o=null===(i=be().A.state.previousTextSelection)||void 0===i?void 0:i.multiSelection;(0,we().yM)({openedTimeMs:n.openedTimeMs??0,searchSessionId:n.sessionId??"",environment:e}),t.shouldResetQuery&&g.setValue([]),be().A.update((e=>({...e,isOpen:!1,isNewElectronTab:!1,openedTimeMs:t.shouldResetMetricsState?void 0:e.openedTimeMs,sessionId:t.shouldResetMetricsState?void 0:e.sessionId,previousTextSelection:void 0}))),ht(!1),dt(!1),it(We),o&&"editing"!==xe().default.state.mode&&xe().default.setState({forceExtendAnnotations:{},mode:"editing",multiSelection:o})}),[n.openedTimeMs,n.sessionId,e,g]),Ve=(0,o.useCallback)((t=>(0,Oe().g)({environment:e,result:t,action:()=>Ke({shouldResetQuery:!0,shouldResetMetricsState:!1}),queryId:je,isMiniSearch:!0,desktopProps:{electronTabs:Me,isNewElectronTabSearch:Boolean(ke)},buttonStyles:$e})),[Ke,Me,e,ke,je]),ze=(0,o.useMemo)((()=>{const e=[];return Ee.forEach((t=>{const{eventName:n}=t;"full_search"!==n&&"full_search_deep_dive"!==n&&"deep_dive"!==n&&e.push(Ve(t))})),e}),[Ve,Ee]),Qe=(0,o.useMemo)((()=>"center"===n.position),[n]),Ze=function(){const e=(0,s().v3)(),[t,n]=(0,o.useState)(!1),[r,l]=(0,o.useState)([]),c=(0,ce().m)(),d=(0,a().K8)((()=>ue().A.getEvents()),[]),u=(0,a().O$)(pe().AppStoreCurrentSpaceStore),m=(0,a().O$)(pe().AppStoreCurrentSpaceViewStore);(0,h().Yb)((async()=>{if(!c.botId||t)return;const i="two_days",o=(0,de().B7)(i),s=await(0,ae().qq)({environment:e,currentSpaceViewStore:m,forceRefetch:!1,reason:"background_load",botId:c.botId,timeRange:{key:i,...o}});"success"!==s&&"skipped"!==s||n(!0)}),[c.botId,m,e,t]);const p=(0,o.useCallback)((()=>{const e=Date.now();return d.filter((t=>{var n;if(t.isAllDay||"declined"===t.responseStatus)return!1;const o=new Date(t.end.dateTime),s=(0,i().A)(o,5);return((null===(n=t.attachments)||void 0===n?void 0:n.length)??0)>0&&s.getTime()>=e}))}),[d]);(0,ee().n)((()=>{const e=p(),t=e.map((e=>e.id)),n=r.map((e=>e.id));(0,R().R9)(t,n).length>0&&l(e)}),12e4,t);const g=2,v=(0,a().K8)((()=>{const t=[];for(const n of r){const{attachments:i}=n;if(t.length===g)break;const o=(0,R().oE)(null==i?void 0:i.map((t=>{const n=t.fileUrl;return(0,le().x)({environment:e,fileUrl:n,currentSpaceStore:u})}))),s=o.length>0?o[0]:void 0;s&&!t.includes(s)&&t.push(s)}return t}),[r,e,u]);return v}(),Xe=(0,a().K8)((()=>(0,V().ao)()),[]),Je=(0,ie().O)(),et=(0,a().K8)((()=>{var e;return null===(e=pe().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[nt,it]=(0,o.useState)(We),[ct,dt]=(0,o.useState)(!1),[ut,ht]=(0,o.useState)(!1),mt=(0,a().K8)((()=>G().NK.state.filter((e=>e.pageId!==(null==Xe?void 0:Xe.id)&&!Ze.some((t=>t.id===e.pageId)))).slice(0,nt-Ze.length)),[null==Xe?void 0:Xe.id,nt,Ze]),pt=(0,o.useCallback)((t=>{Je&&(0,qe().fQ)({environment:e,offsetFromBottom:t,spaceId:Je,setIsLoadingRecents:dt,setEndOfRecentsReached:ht,numRecents:nt,setNumRecents:it,endOfRecentsReached:ut,isLoadingRecents:ct,incrementBy:We})}),[ut,e,ct,nt,Je]),gt=c().y8.MiniQuickFind,vt=(0,o.useMemo)((()=>"results"===te?"query_results":"recent_pages"),[te]),ft=(0,a().K8)((()=>e.device.isElectron),[e]),yt=(0,a().K8)((()=>(0,$().q)(e)),[e]),bt=(0,Ie().P9)({name:"ai_usage",spaceId:Je,userId:et,amount:"unknown"}),St=(0,oe().X)("quick_find_highlights_enabled"),xt=(0,o.useCallback)((t=>{const n=t.store;return{action:i=>{let{event:o}=i;const s=(0,O().Vr)(o);if(X.trackSelectSearchItem({result:t,isMetaClick:Boolean(s),context:vt}),s||Ke({shouldResetQuery:!0,shouldResetMetricsState:!1}),Se().A.setState({queryId:je,pageId:t.store.id,timeEntered:new Date}),ft&&yt){const e=(0,d().A)({pageModel:n.getModel(),pageId:n.id,pageVisitSource:gt,queryId:je});E().openQuickSearchResult(e)}else N().q9({searchResult:{type:"custom",store:n},environment:e,pageVisitSource:gt,queryId:je,openInNew:s,electronTabSearch:{tabs:Me,isNewTab:Boolean(ke)},context:vt})},key:n.id,render:e=>(0,f.jsx)(tt,{...e,store:n,currentView:te,result:t,highlight:St?t.highlight:void 0})}}),[Ke,vt,Me,e,yt,ft,ke,gt,X,je,te,St]),It=(0,a().K8)((()=>x.map((e=>xt(e)))),[xt,x],{debugName:"MiniSearch.resultItems"}),At=(0,a().K8)((()=>{const e=new Map;return mt.forEach(((t,n)=>{const i=(0,G().ht)(t.visitedAt),o=Ye({blockStore:t.store,idx:n,resultFeatureNames:["RECENT_ALIVE_PAGES"]}),s=xt(o);var r;e.has(i)?null===(r=e.get(i))||void 0===r||r.push(s):e.set(i,[s])})),e}),[xt,mt],{debugName:"MiniSearch.resultsByBucket"}),wt=(0,o.useMemo)((()=>{const e=[...ze,...It];if(0!==e.length)return{items:e,key:"results",render:e=>(0,f.jsx)(De().A,{...e,title:t.formatMessage(at.quickMatchesSectionTitle)})}}),[t,ze,It]),Ct=(0,re().w4)(),jt=(0,a().K8)((()=>{const t=ve().default.getActiveSession(),n=null==t?void 0:t.assistantConfigurationState,i="chat"===e.RouterStore.state.route.name;if(!n||!i)return!1;return(0,L().or)({configurationState:n})}),[e]),kt=(0,o.useCallback)((async t=>{Ke({shouldResetQuery:!0,shouldResetMetricsState:!1}),Ct.isDeepFindOnInferenceTranscriptEnabled?(0,D().Iu)({environment:e,query:v,clientStore:K().Kd,config:{type:"search",searchSessionId:P,scopeForNextSearch:{type:"everything"}}}):await Ae().Wi({environment:e,menuListItemAction:t.menuListItemAction,queryTextValue:v,isNewElectronTab:ke,searchSessionId:P,isCurrentPageDeepFind:jt})}),[Ke,e,jt,ke,v,P,Ct]),Mt=(0,o.useCallback)((async n=>{Ke({shouldResetQuery:!0,shouldResetMetricsState:!1}),await F().Lv({environment:e,menuListItemAction:n.menuListItemAction,intl:t,queryTextValue:v,isNewElectronTab:ke,searchSessionId:P,notionAiLandingPageFeatureGate:Ct})}),[Ke,e,t,ke,v,P,Ct]),_t=(0,a().K8)((()=>{const e=function(e){const{onClick:t}=e;return{action:t,key:"deep-find-entry-point",render:e=>(0,f.jsx)(st,{menuListProps:e,title:(0,f.jsx)(T().sA,{...at.deepFindTitle}),subtitle:(0,f.jsx)(T().sA,{...at.deepFindSubtitle}),renderIcon:e=>(0,I().o)(e)})}}({onClick:e=>kt({menuListItemAction:e})}),t=[e];if(ge().zD.isResearchModeUnifiedFindEnabled()&&!ke&&y.includes(" ")&&bt){const e=function(e){const{onClick:t}=e;return{action:t,key:"research-mode-entry-point",render:e=>(0,f.jsx)(st,{menuListProps:e,title:(0,f.jsx)(T().sA,{...U().D.researchModeButton}),subtitle:(0,f.jsx)(T().sA,{...U().D.researchModeButtonTooltip}),renderIcon:e=>(0,f.jsx)(rt,{styles:e})})}}({onClick:e=>Mt({menuListItemAction:e})});t.push(e)}return{items:t,key:"search",render:e=>(0,f.jsx)(De().A,{...e})}}),[bt,kt,Mt,y,ke]),Tt=(0,o.useMemo)((()=>{if(ke)return(0,qe().mD)({environment:e,intl:t,electronTabs:Me,isNewElectronTab:ke})}),[e,t,ke,Me]),Rt=(0,a().K8)((()=>{const e=[];if(Tt&&e.push({items:[Tt],key:"new-page",render:e=>(0,f.jsx)(De().A,{...e})}),Ze.length>0){const n=Ze.map(((e,t)=>Ye({blockStore:e,idx:t,resultFeatureNames:["UPCOMING_MEETING_ATTACHMENTS"]})));e.push({items:n.map(xt),key:"upcoming-meeting-attachments",render:e=>(0,f.jsx)(De().A,{...e,title:t.formatMessage(at.fromCalendarEvents)})})}return G().Rj.forEach((t=>{const n=At.get(t);n&&0!==n.length&&e.push({items:n,key:`recent-pages-${t}`,render:e=>(0,f.jsx)(De().A,{...e,title:(0,f.jsx)(qe().sg,{bucket:t})})})})),e}),[xt,t,Tt,Ze,At]),Pt=(0,o.useMemo)((()=>{const e=[_t];return wt&&e.push(wt),e}),[wt,_t]),Bt=(0,o.useMemo)((()=>new(ye().A)),[]),Et=(0,o.useCallback)((e=>{Bt.setState({focus:{section:e.section??0,indexLocal:e.indexLocal,indexGlobal:e.indexGlobal,footerFocused:!1}})}),[Bt]),Ft=x.length>0;(0,o.useEffect)((()=>{S&&"results"===te?(ne("recents"),Et({indexLocal:0,indexGlobal:0,section:0})):S||"recents"!==te||ne("results");const e=Bt.state.focus;!S&&((null==e?void 0:e.indexGlobal)??0)>_t.items.length+x.length+ze.length&&Et({indexLocal:0,indexGlobal:0,section:0})}),[Et,S,Ft,Bt,_t.items.length,te,x.length,ze.length]),(0,o.useEffect)((()=>{n.isOpen&&Je&&(B().callApi({eventName:"warmSearchCache",environment:e,data:{spaceId:Je}}),B().callApi({eventName:"warmVectorDBCache",environment:e,data:{spaceId:Je},headers:(0,C().WS)({spaceId:Je})}))}),[n.isOpen,e,Je]);const Nt=!S&&0===x.length&&0===ze.length&&"results"===te&&!W,Dt=function(e){const{shouldUseCenterModal:t,isElectron:n}=e,i=(0,s().v3)(),r=(0,a().K8)((()=>"sidebar"===be().A.state.position),[]),c=(0,o.useMemo)((()=>n?(0,_().ek)(i.device.isElectronMac)-8:void 0),[i.device.isElectronMac,n]);return(0,l().IS)((e=>{const i=r?500:400;return{searchIcon:{color:e.mediumIconColor,width:25,height:25,marginLeft:4,marginRight:4},input:{margin:"10px 10px",width:"auto",fontSize:14},container:{width:t?600:420,display:"flex",flexDirection:"column"},scroller:{width:"100%",minHeight:i,maxHeight:i,position:"relative",display:"flex",flexDirection:"column"},popup:{marginTop:r&&n?c:0}}}),[r,t,n,c])}({shouldUseCenterModal:Qe,isElectron:ft}),Kt=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",margin:10,gap:8},placeholder:{cursor:"text"},input:{maxHeight:100,overflowX:"hidden",overflowY:"auto"}})),[]),Ut=(0,a().K8)((()=>(0,Ce().vp)({notionAiLandingPageFeatureGate:Ct})),[Ct]),[Lt,Vt]=(0,se().$)(),Ot=(0,o.useMemo)((()=>{const e={placeholder:t.formatMessage(ke?at.openInNewTabPlaceholder:at.defaultInputPlaceHolder),left:ke?(0,A().Y)(Dt.searchIcon):(0,I().o)(Dt.searchIcon)};return(0,f.jsx)(_e().A,{capture:!0,debugName:"MiniSearch",children:(0,f.jsxs)("div",{style:Kt.container,children:[(0,f.jsx)(Pe().Q,{iconGroup:m().C,variantName:"default",colorName:"tertiary",style:Dt.searchIcon}),(0,f.jsx)(Le().A,{...Lt,placeholder:e.placeholder,onClick:void 0,disabled:!1,store:g.store,inPageFind:H().Os.none,pasteBehavior:"inline",placeholderStyle:Kt.placeholder,disableUpDownArrows:!0,disableSlashCommands:!0,disableMobileActionBar:!0,disableEmbedMenu:!0,disableInsertedDeletedAnnotations:!0,disableEmojiCommands:!1,disableMentions:!Ut,disabledMentionTypes:Ce().md,disableComment:!0,style:Kt.input,disableSelectAllBlocks:!0,disableSelectionDrag:!0,disableEnter:!0,disableStyleAnnotations:!0,disableSuggestEdit:!0,onEsc:()=>Ke({shouldResetQuery:!1,shouldResetMetricsState:!0})})]})})}),[t,ke,Dt.searchIcon,Kt.container,Kt.placeholder,Kt.input,Lt,g.store,Ut,Ke]),qt=(0,o.useMemo)((()=>{if(Je&&et&&P)return{space_id:Je,user_id:et,search_session_id:P,search_session_flow_number:q,results:x.map((e=>({...e,store:void 0,serverEventProperties:void 0}))),query:v}}),[Je,et,P,q,x,v]),zt=(0,a().K8)((()=>(0,f.jsxs)("div",{style:Dt.container,children:[Ot,(0,f.jsxs)(Fe().H,{type:me().A.Y,style:Dt.scroller,children:[(0,f.jsx)(Te().Ay,{comboboxProps:Vt,type:Te().Oh.Vertical,initialFocus:0,sections:"recents"===te?Rt:Pt,disableKeyboardArrowWrap:!0,store:Bt}),Nt?(0,f.jsx)(lt,{}):null,"recents"===te?(0,f.jsx)(Ne().A,{onChange:pt}):null]}),(0,f.jsx)(ot,{searchSessionFlowNumber:q,quickFindFeedbackPayload:qt,currentView:te})]})),[Dt.container,Dt.scroller,Ot,Vt,te,Rt,Pt,Bt,Nt,pt,q,qt]);return Qe?(0,f.jsx)(Re().A,{open:n.isOpen,onDismiss:()=>Ke({shouldResetQuery:!1,shouldResetMetricsState:!0}),render:()=>zt,transitionAppearance:"none",isWaxPaper:!0,backgroundStyle:{background:"transparent"},innerStyle:{width:"max-content",height:"max-content"},style:{display:"flex",alignItems:"center"}}):(0,f.jsx)(Be().Ay,{open:n.isOpen,popupType:Be().nl.Popup,style:Dt.popup,placementToOrigin:he().W.Bottom,alignmentToOrigin:Ue().C1.Start,render:()=>zt,onDismiss:()=>Ke({shouldResetQuery:!1,shouldResetMetricsState:!0}),trapFocus:!0,ariaLabel:t.formatMessage(at.ariaLabel)},`mini-search-${n.position}`)}function Ye(e){const{blockStore:t,idx:n,resultFeatureNames:i}=e;return{id:t.id,score:0,spaceId:t.getSpaceId(),sources:[M().Ni.Local],featureGroups:i?[{groupName:"custom",features:i.map((e=>({name:e,value:1})))}]:[],store:t,originalPosition:n,localSource:new Set,serverEventProperties:void 0}}function Ze(e){const{spaceStore:t,similarUsers:i,isUserPresentOnPage:o}=e;if(!t)return[];return[...i].sort(((e,t)=>{const n=o({userId:e.userId,visitedAt:e.visitedAt});return n!==o({userId:t.userId,visitedAt:t.visitedAt})?n?-1:1:t.visitedAt-e.visitedAt})).slice(0,4).map((e=>{const i=n(870092).L.createChildStore(t,{table:n(798880).oo,id:e.userId});return i.load(),{store:i,visitedAt:e.visitedAt,isPresent:o({userId:e.userId,visitedAt:e.visitedAt})}}))}function Xe(e){const{store:t,pathHighlight:n,styles:i}=e,o=(0,q().PO)({words:(0,q().oQ)(n),styleOverride:i.pathHighlight});return(0,f.jsx)(Ee().Ay,{store:t,showFullPathInTooltip:!0,highlighter:o})}function Je(e){const{store:t,intl:i,pathDisplay:s,styles:r}=e,l=(0,a().K8)((()=>(0,n(819493).b)(t)),[t]),c=[s,(0,a().K8)((()=>{if(null==l||!l.canAccess)return;const e=(0,n(764880).lR)(i,l.createdBy);return(0,f.jsx)("span",{style:r.pathText,children:e})}),[l,r.pathText,i]),(0,a().K8)((()=>{const e=t.getLastEditedTime();if(e)return(0,f.jsx)("span",{style:r.pathText,children:(0,f.jsx)(T().sA,{...at.lastEdited,values:{time:(0,n(907514).nl)(e,{useCompactFormat:!0})}})})}),[t,r.pathText])].filter(Boolean);return(0,f.jsx)(ke().fI,{gap:4,children:c.map(((e,t)=>(0,f.jsxs)(o.Fragment,{children:[t>0&&(0,f.jsx)("span",{style:r.pathText,children:"•"}),e]},t)))})}function et(e){const{badges:t,store:i,highlight:s,recordPathCaption:r,isRecentsView:c}=e,d=(0,T().tz)(),u=(0,l().IS)((e=>({databaseIcon:{color:e.text.secondary,width:14,height:14},verifiedIcon:{width:15,height:15,color:e.blueColor},divider:{color:e.text.secondary,fontSize:12},title:{fontWeight:P().Wy.medium,color:c?e.text.primary:e.text.secondary},titleHighlight:{color:e.text.primary}})),[c]),h=(0,q().ip)({text:(null==s?void 0:s.title)??"",shouldHighlight:!0}),m=(0,q().PO)({words:(0,q().oQ)((null==s?void 0:s.title)??(null==s?void 0:s.text)),styleOverride:u.titleHighlight}),p=null!=s&&s.title?h:m,g=(0,a().K8)((()=>(0,f.jsx)(n(16006).A,{store:i,style:u.title,highlighter:p})),[i,p,u.title]),v=(0,o.useMemo)((()=>new Set(t.map((e=>e.type)))),[t]);return(0,f.jsxs)(ke().fI,{gap:4,alignItems:"center",children:[g,v.has("is_collection")?(0,n(648403).H)(u.databaseIcon):void 0,v.has("verified")?(0,n(943882).w)(u.verifiedIcon):void 0,v.has("is_template")?(0,f.jsx)(ze().rx,{label:d.formatMessage(M().Nz.template)}):void 0,v.has("popular_this_week")?(0,f.jsx)(ze().oj,{label:d.formatMessage(M().Nz.popularThisWeek)}):void 0,v.has("most_viewed")?(0,f.jsx)(ze().iY,{label:d.formatMessage(M().Nz.mostViewed)}):void 0,r?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{style:u.divider,children:"—"}),r]}):void 0]})}const tt=o.memo(o.forwardRef((function(e,t){const{store:i,focused:r,currentView:c,highlight:d,result:u}=e,h=(0,T().tz)(),m=(0,s().v3)(),g=(0,a().K8)((()=>(0,n(97059).W)(m,i.id)),[m,i]),v=(0,l().IS)((e=>({enterIcon:{width:12,height:12,color:e.text.secondary,display:r?"block":"none"},divider:{color:e.text.tertiary},pathHighlight:{color:e.text.primary,fontWeight:P().Wy.medium},pathText:{color:e.text.tertiary}})),[r]),y=(0,a().K8)((()=>(0,Ee().a6)(i)),[i]),b=(0,a().K8)((()=>{if(y)return(0,f.jsx)(Xe,{store:i,pathHighlight:null==d?void 0:d.pathText,styles:v})}),[i,d,v,y]),S=(0,a().O$)(pe().AppStoreCurrentSpaceStore),x=(0,a().K8)((()=>i.id),[i]),I=(0,a().K8)((()=>J.state.pageIdToUsers[x]??[]),[x]),A=(0,a().K8)((()=>i.getIcon()),[i]),w=(0,a().K8)((()=>i.isEmptyPage()),[i]),C=(0,a().K8)((()=>(0,f.jsx)(n(614505).B,{disabled:!0,icon:A,isEmptyPage:w,size:20})),[A,w]),j=(0,a().K8)((()=>J.state.similarUserIdToLastVisitedPageId),[]),k=(0,o.useCallback)((e=>function(e){return!ne({timestamp:e.timestamp,numberOfMinutes:2})}({timestamp:e.visitedAt})&&j[e.userId]===x),[j,x]),M=(0,a().K8)((()=>Ze({spaceStore:S,similarUsers:I,isUserPresentOnPage:k})),[k,I,S]),_=(0,a().K8)((()=>M.every((e=>e.store.isReady()))),[M]),R=(0,o.useMemo)((()=>{if(!_)return null;const e=M.length;return(0,f.jsx)("div",{style:{display:"flex"},children:M.map(((t,n)=>{let{store:i,visitedAt:o,isPresent:s}=t;return(0,f.jsx)("span",{style:{zIndex:e-n},children:(0,f.jsx)(nt,{userStore:i,isPresent:s})},`search-user-presence-${i.id}-${x}-${o}`)}))})}),[_,x,M]),B=(0,o.useMemo)((()=>(0,f.jsxs)(ke().fI,{gap:12,alignItems:"center",children:[R,(0,f.jsx)("div",{children:(0,p().K)(v.enterIcon)})]})),[R,v.enterIcon]),E="recents"===c,F=(0,a().K8)((()=>!E&&(i.isType("link_to_collection")||i.isType("collection_view_page")||i.isType("collection_view"))),[E,i]),N=(0,o.useMemo)((()=>{var e;const t=u.badges??[];return Boolean(null===(e=u.localSource)||void 0===e?void 0:e.has("topPages7dPageView"))&&t.push({type:"popular_this_week",properties:{},label:"Popular this week"}),F&&t.push({type:"is_collection",properties:{},label:"Collection"}),t}),[F,u.badges,u.localSource]);return(0,f.jsx)(je().A,{disabled:g,disabledFeedback:g,style:{paddingLeft:4},...e,ref:t,buttonStyle:$e,title:(0,f.jsx)(et,{badges:N,store:i,highlight:d,recordPathCaption:E&&b?b:void 0,isRecentsView:E}),caption:E?void 0:(0,f.jsx)(Je,{store:e.store,intl:h,pathDisplay:b,styles:v}),icon:C,right:B,className:"notranslate"})})));function nt(e){const{userStore:t,isPresent:i}=e,o=(0,T().tz)(),s=(0,Ve().XE)((e=>(0,n(100622).Nq)(t.id,e)),i),{name:r,email:c}=(0,a().K8)((()=>({name:(0,n(695608).c6)(o,t.getModel()),email:t.getEmail()})),[o,t]),d=(0,l().IS)((e=>({avatarOuterOutline:{...s.avatarOuterOutline,outlineColor:i?s.avatarOuterOutline.outlineColor:e.accentColors.gray[100]}})),[i,s.avatarOuterOutline]);return(0,f.jsx)(Ke().A,{textWrap:!0,renderTooltip:()=>(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{children:r}),(0,f.jsx)("div",{children:c})]}),render:e=>(0,f.jsx)("div",{style:d.avatarOuterOutline,...e,children:(0,f.jsx)("div",{style:s.avatarBorder,children:(0,f.jsx)(n(453697).A,{iconStyle:s.avatarInnerOutline,style:s.uiUserAvatarStyles,size:Ve().eQ,isOffline:!i,userStore:t,avatarShouldShowShadow:!0,initialOverrideStyle:s.initialColor})})})})}function it(e){var t,i,r,c;const d=(0,s().v3)(),u=(0,T().tz)(),h=(0,a().K8)((()=>(0,W().PE)({environment:d})),[d]),m=(0,o.useCallback)((async()=>{const e=await n(884107).R.clipboardActions.load();await e.copyString({environment:d,stringValue:JSON.stringify({cacheStats:h,readinessTimings:(0,W().Yp)()},null,2),copiedMessage:e.clipboardMessages.copiedToClipboard})}),[h,d]),p=(0,l().IS)((e=>({buttonContainer:{display:"flex",alignItems:"center",justifyContent:"center",marginLeft:4},devMessage:{color:e.text.secondary},indexBuilding:{color:e.text.tertiary,fontSize:12,display:"flex"}})),[]),g=(0,o.useMemo)((()=>{var e,t,n,i;return(0,f.jsxs)(ke().VP,{gap:8,children:[h.localSearchableBlocksCacheLoaded&&(0,f.jsxs)(ke().VP,{gap:2,children:[(0,f.jsx)("div",{children:`Pages: ${h.localSearchableBlocksCacheSize} `}),(0,f.jsx)("div",{children:`Recents: ${null===(e=h.localSearchableBlocksCacheBlockSourceCount)||void 0===e?void 0:e.recentVisit}`}),(0,f.jsx)("div",{children:`Frecency: ${null===(t=h.localSearchableBlocksCacheBlockSourceCount)||void 0===t?void 0:t.frecencyStore}`}),(0,f.jsx)("div",{children:`Similar: ${null===(n=h.localSearchableBlocksCacheBlockSourceCount)||void 0===n?void 0:n.similarUser1dRecentPages}`}),(0,f.jsx)("div",{children:`Popular: ${null===(i=h.localSearchableBlocksCacheBlockSourceCount)||void 0===i?void 0:i.topPages7dPageView}`})]}),!h.hasPersistedRecordCache&&(0,f.jsx)("div",{children:"NO RECORD CACHE"}),(0,f.jsx)("div",{style:p.devMessage,children:"[Dev] Click to copy index metadata"})]})}),[h.hasPersistedRecordCache,null===(t=h.localSearchableBlocksCacheBlockSourceCount)||void 0===t?void 0:t.frecencyStore,null===(i=h.localSearchableBlocksCacheBlockSourceCount)||void 0===i?void 0:i.recentVisit,null===(r=h.localSearchableBlocksCacheBlockSourceCount)||void 0===r?void 0:r.similarUser1dRecentPages,null===(c=h.localSearchableBlocksCacheBlockSourceCount)||void 0===c?void 0:c.topPages7dPageView,h.localSearchableBlocksCacheLoaded,h.localSearchableBlocksCacheSize,p.devMessage]),v=h.localSearchableBlocksCacheLoaded;return(0,o.useMemo)((()=>(0,f.jsx)(Ke().A,{placement:he().W.Bottom,renderTooltip:()=>g,render:e=>(0,f.jsxs)(ke().fI,{gap:8,alignItems:"center",children:[(0,f.jsx)(Me().A,{...e,style:p.buttonContainer,iconStyle:{height:15,width:15},icon:n(359545).d,onClick:m,ariaLabel:u.formatMessage(at.copySearchIndexReadiness)}),v?null:(0,f.jsx)("div",{style:p.indexBuilding,children:(0,f.jsxs)(ke().fI,{gap:4,alignItems:"center",children:[(0,f.jsx)(n(331542).A,{style:{height:12,width:12}}),"Building..."]})})]})})),[m,g,v,p.buttonContainer,p.indexBuilding,u])}const ot=o.memo((function(e){const{searchSessionFlowNumber:t,quickFindFeedbackPayload:i,currentView:r}=e,a=(0,T().tz)(),c=(0,l().IS)((e=>({container:{padding:"6px 8px",color:e.text.secondary,display:"flex",justifyContent:"space-between",borderTop:`1px solid ${e.lightDividerColor}`,marginTop:1},button:{fontSize:13,gap:4,paddingLeft:10,color:e.text.grayTertiary},icon:{width:12,height:12}})),[]),d=(0,s().v3)(),[u,h]=(0,o.useState)(!1);(0,o.useEffect)((()=>{p(void 0)}),[t,r]);const[m,p]=(0,o.useState)(void 0),g=(0,o.useCallback)((async()=>{i&&(p("thumbsUp"),await(0,Ae().Tk)({environment:d,feedback:"thumbsUp",quickFindFeedbackPayload:i}))}),[d,i]),v=(0,o.useCallback)((async()=>{i&&(p("thumbsDown"),h(!0),await(0,Ae().Tk)({environment:d,feedback:"thumbsDown",quickFindFeedbackPayload:i}))}),[d,i]),y=(0,o.useCallback)((async e=>{i&&await Ae().d7({environment:d,quickFindFeedbackPayload:{...i,additional_information:e.additionalInformation,desired_result_url:e.desiredUrl,can_followup_with_user:e.canFollowUpWithUser}})}),[d,i]);return(0,f.jsxs)("div",{style:c.container,children:[(0,n(211134).PF)(n(780054).A)?(0,f.jsx)(it,{styles:c}):null,(0,f.jsxs)("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[null,Boolean(i)?(0,f.jsxs)("div",{children:[(0,f.jsx)(Me().A,{icon:"thumbsUp"===m?n(408197).s:x,ariaLabel:a.formatMessage(at.thumbsUpFeedback),onClick:g,disabled:void 0!==m}),(0,f.jsx)(Me().A,{icon:"thumbsDown"===m?n(436150).v:b,ariaLabel:a.formatMessage(at.thumbsDownFeedback),onClick:v,disabled:void 0!==m})]}):null]}),(0,f.jsx)(n(410386).e,{isOpen:u,setIsOpen:h,submit:y})]})}));function st(e){const{menuListProps:t,title:n,subtitle:i,renderIcon:s}=e,{focused:r}=t,a=(0,l().IS)((e=>({container:{borderRadius:6,paddingLeft:4},titleContainer:{display:"flex",alignItems:"center",gap:8},title:{fontWeight:P().Wy.medium},subtitle:{color:e.text.secondary,fontSize:12},enterIcon:{width:12,height:12,color:e.text.secondary},searchIcon:{width:20,height:20}})),[]),c=(0,o.useMemo)((()=>{if(r)return(0,f.jsx)("div",{children:(0,p().K)(a.enterIcon)})}),[a.enterIcon,r]);return(0,f.jsx)(je().A,{...t,title:(0,f.jsx)("div",{style:a.titleContainer,children:(0,f.jsx)("span",{style:a.title,children:n})}),icon:s(a.searchIcon),style:a.container,right:c,buttonStyle:$e,caption:(0,f.jsx)("span",{style:a.subtitle,children:i})})}function rt(e){const{styles:t}=e,n=(0,l().IS)((e=>({iconColor:{color:e.icon.primary}})),[]);return(0,g().P)({...t,...n.iconColor})}const at=(0,T().YK)({openInNewTabPlaceholder:{defaultMessage:"Open in new tab...",id:"MiniSearch.openInNewTab"},ariaLabel:{defaultMessage:"Search Notion",id:"MiniSearch.ariaLabel"},defaultInputPlaceHolder:{defaultMessage:"Search or ask anything",id:"MiniSearch.defaultInputPlaceHolder"},giveSearchFeedbackDev:{defaultMessage:"#proj-unified-find (dev)",id:"MiniSearch.giveSearchFeedbackDev"},fromCalendarEvents:{id:"miniSearch.fromCalendarEvents",defaultMessage:"From calendar events"},searchMoreSources:{id:"miniSearch.searchMoreSources",defaultMessage:"Press {returnButton} to expand your search"},returnKey:{id:"miniSearch.returnKey",defaultMessage:"Return"},quickMatchesSectionTitle:{id:"miniSearch.quickMatches.sectionTitle",defaultMessage:"Quick matches"},deepFindTitle:{id:"miniSearch.deepFind.title",defaultMessage:"Search"},deepFindSubtitle:{id:"miniSearch.deepFind.subtitle",defaultMessage:"Get more results & AI summary"},copySearchIndexReadiness:{id:"miniSearch.copySearchIndexReadiness",defaultMessage:"Button to copy local/client search index readiness"},thumbsUpFeedback:{id:"miniSearch.thumbsUpFeedback",defaultMessage:"Give thumbs up feedback"},thumbsDownFeedback:{id:"miniSearch.thumbsDownFeedback",defaultMessage:"Give thumbs down feedback"},lastEdited:{id:"miniSearch.lastEdited",defaultMessage:"Edited {time}"}});function lt(){const e=(0,l().IS)((e=>({wrapper:{display:"grid",alignItems:"center",height:"100%",width:"100%",userSelect:"none",flex:1},container:{textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",gap:4},heading:{fontSize:14,fontWeight:500,color:e.text.secondary,display:"flex",alignItems:"center",gap:8},returnIcon:{width:12,height:12},returnText:{display:"flex",alignItems:"center",gap:6,fontSize:12,border:`1px solid ${e.stroke.secondary}`,padding:"2px 4px",borderRadius:4,color:e.text.secondary,fontFamily:"monospace",fontWeight:400}})),[]),t=(0,f.jsxs)("span",{style:e.returnText,children:[(0,p().K)(e.returnIcon),(0,f.jsx)(T().sA,{...at.returnKey})]});return(0,f.jsx)("div",{style:e.wrapper,children:(0,f.jsx)("div",{style:e.container,children:(0,f.jsx)("div",{style:e.heading,children:(0,f.jsx)(T().sA,{...at.searchMoreSources,values:{returnButton:t}})})})})}const ct=function(){return(0,a().K8)((()=>ge().zD.isMiniSearchModalEnabled()),[])?(0,f.jsx)(Qe,{}):null}},819493:(e,t,n)=>{n.d(t,{$:()=>I,b:()=>A});n(898992),n(908872),n(296540);var i=()=>n(662303),o=()=>n(484714),s=()=>n(847249),r=()=>n(401497),a=()=>n(764880),l=()=>n(869190),c=()=>n(959013),d=()=>n(777092),u=()=>n(921855),h=()=>n(972435),m=()=>n(963589),p=()=>n(962730),g=()=>n(706965),v=()=>n(678553),f=()=>n(89924),y=()=>n(859428),b=()=>n(125565),S=()=>n(715011),x=n(474848);function I(e){let{isPageMoreButton:t,hideTopBorder:n,store:i,wordCountStores:l,showWordCount:d}=e;const u=(0,s().K8)((()=>A(i)),[i]),{device:m}=(0,o().v3)(),I=(0,s().K8)((()=>m.isPhone),[m]),C=h().A.getIntl(),j=(0,r().IS)((()=>({menuItem:{paddingTop:I?8:n?0:6,paddingBottom:I?8:16}})),[n,I]);return u&&!u.canAccess?null:(0,x.jsx)(f().A,{topBorder:!t&&!n,style:{paddingTop:t?0:8,paddingBottom:t?0:8},children:(0,x.jsx)(v().Ay,{style:u?void 0:j.menuItem,shouldWrapTitle:!0,title:u?(0,x.jsx)(y().A,{placement:p().W.Right,render:e=>(0,x.jsxs)("div",{...e,children:[d&&(0,x.jsx)(b().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,x.jsx)(c().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,x.jsx)(S().A,{store:i})}})}),l&&(0,x.jsx)(w,{stores:l}),(0,x.jsx)(b().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,x.jsx)(c().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:u.lastEditedBy.asActor?(0,a().lR)(C,u.lastEditedBy):void 0}})}),(0,x.jsx)(b().A,{isSmall:!0,isSecondaryColor:!0,isMobile:m.isPhone,style:{marginBottom:d?8:0},children:u.lastEditedTime})]}),renderTooltip:()=>(0,x.jsx)(g().A,{store:i,compactFormat:!0})}):void 0,loading:!u})})}function A(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),o=e.getLastEditedByPointer(),s=e.getLastEditedTime(),r=h().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&s&&o){const a=(0,d().vt)({parentStore:e,pointer:t}),c=(0,l().jE)(n,i().locale,r),u=(0,d().vt)({parentStore:e,pointer:o}),h=(0,l().jE)(s,i().locale,r);if(!u)return;return{canAccess:!0,createdBy:a,createdTime:c,lastEditedBy:u,lastEditedTime:h}}}function w(e){const{stores:t}=e,n=(0,m().X)("selectable_word_count"),i=(0,s().K8)((()=>n?C(t):0),[n,t]);return n?(0,x.jsx)(b().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,x.jsx)(c().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:i}})}):null}function C(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+C(t.getContentStores())}),0)}},851775:(e,t,n)=>{n.d(t,{A:()=>r});var i=()=>n(194188),o=()=>n(10123),s=()=>n(570551);function r(e,t){(0,s().A)(2,arguments);var n=(0,o().A)(e),r=(0,i().A)(t),a=n.getFullYear(),l=n.getDate(),c=new Date(0);c.setFullYear(a,r,15),c.setHours(0,0,0,0);var d=function(e){(0,s().A)(1,arguments);var t=(0,o().A)(e),n=t.getFullYear(),i=t.getMonth(),r=new Date(0);return r.setFullYear(n,i+1,0),r.setHours(0,0,0,0),r.getDate()}(c);return n.setMonth(r,Math.min(l,d)),n}},894074:(e,t,n)=>{n.d(t,{A:()=>l});var i=()=>n(10123),o=()=>n(851775),s=()=>n(194188),r=()=>n(570551);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){if((0,r().A)(2,arguments),"object"!==a(t)||null===t)throw new RangeError("values parameter must be an object");var n=(0,i().A)(e);return isNaN(n.getTime())?new Date(NaN):(null!=t.year&&n.setFullYear(t.year),null!=t.month&&(n=(0,o().A)(n,t.month)),null!=t.date&&n.setDate((0,s().A)(t.date)),null!=t.hours&&n.setHours((0,s().A)(t.hours)),null!=t.minutes&&n.setMinutes((0,s().A)(t.minutes)),null!=t.seconds&&n.setSeconds((0,s().A)(t.seconds)),null!=t.milliseconds&&n.setMilliseconds((0,s().A)(t.milliseconds)),n)}}}]);