"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[7379],{342:(e,t,n)=>{n.d(t,{Zu:()=>i,o8:()=>r,oB:()=>o,oW:()=>a});const o="PageLayoutEditorContext",i="WorkflowTemplatesOnboarding",r="CsvImportPreview",a="ChartDrilldownContext"},1130:(e,t,n)=>{n.d(t,{Ig:()=>M,K2:()=>E,Vh:()=>D,ZS:()=>T,PF:()=>B,LC:()=>P,Wj:()=>A,jy:()=>N,sy:()=>R});n(296540);var o=()=>n(857639),i=()=>n(416845),r=()=>n(763884),a=()=>n(243020),s=()=>n(427704),l=()=>n(96689),c=()=>n(84520),d=()=>n(798880),u=()=>n(319625),p=()=>n(796756),m=()=>n(901389),g=()=>n(246826),f=()=>n(435009),v=()=>n(867899),h=()=>n(235921);const _=new(n(645873).O2)("onboardingStateActions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(87598),n.e(86787),n.e(45016)]).then(n.bind(n,616385))));var b=()=>n(989423),y=()=>n(719431),S=()=>n(406792),w=()=>n(351360),k=()=>n(630116),I=()=>n(144114),x=()=>n(607859);n(474848);async function A(e,t){if(!e.currentUser.id)return!1;const n=C(e);return!!I().Qf(n)||(t||(t=new(k().LU)(e,{table:d().oo,id:e.currentUser.id}),await t.awaitNonNullValue()),!t.getOnboardingCompleted())}function C(e){return{...r().K.get({userId:e.currentUser.id,key:x().onboardingPreferenceKey}),currentUserId:e.currentUser.id,stageStats:{startedTimeStampMs:Date.now()}}}async function T(e,t){const{state:n}=x().default;if(n.isLoading||n.isOnboarding||!e.currentUser.id)return;const i=C(e);if(!i.isOnboarding)return;if(I().O9(i)&&t&&(null==t?void 0:t.id)!==i.spaceViewId)return;const{flow:r}=i,a="desktop_join_or_create_space"===r||"mobile_join_or_create_space"===r,s=await I().of({environment:e,disableRedirects:a});s&&(i.onboardingData=s),x().default.setState(i);const{spaceId:d}=i;if(d&&(e.device.isMobileNative&&o().log({level:"info",from:"onboardingActions",type:"SpaceSwitchingDebug",data:{message:"onboardingActions.restoreOnboardingState setting space",spaceId:d}}),w().default.setState({...w().default.state,currentSpaceStore:new(k().SL)(e,{table:l().NX,id:d})})),i.isOnboarding&&"spaceViewId"in i&&i.spaceViewId){const t=new(k().vH)(e,{table:c().mu,id:i.spaceViewId});w().default.setState({...w().default.state,currentSpaceViewStore:t})}L(e,i)}async function M(e,t){await R(e,{type:"create-or-join",source:t})}function P(e){const{userStore:t,transaction:n}=e;g().zv({store:t,data:{onboarding_completed:!0},transaction:n})}function B(e){const{userStore:t,transaction:n}=e;g().zv({store:t,data:{mobile_onboarding_completed:!0},transaction:n})}async function R(e,t){(0,b().u4)({environment:e,event:{eventName:"start_onboarding",eventProperties:{type:t.type,redirect_url:t.redirectUrl,disable_redirect_url:t.disableRedirectUrl,source:t.source}}});try{f().oo({environment:e,url:s().JZ.onboarding});const n=S().default.DO_NOT_USE_markLegacy("onboarding.load_dependencies"),o=await I().of({environment:e,disableRedirects:Boolean(t.disableRedirectUrl)||"create-or-join"===t.type}),i=I().sg(o),r=await _.load(),a=await r.getInitialState({environment:e,startOnboardingArgs:t,onboardingData:o,redirectData:i});S().default.DO_NOT_USE_measureLegacy(n,{environment:e,data:{flow:"flow"in a?a.flow:void 0}}),a&&a.isOnboarding&&("invalid"===i.type&&(a.stage="error"),x().default.setState(a),await async function(e,t,n,o){const{initializeContextualizedOnboardingState:i,memoizeAndTrackContextualizedOnboardingStageWithHistoricalContext:r}=await v().F.contextualizedOnboardingStateActions.load();await i({environment:e,isInvalidRedirect:t,shouldShowMobileTutorialOnboarding:n,source:o});const a=h().A.state,{getContextualizedOnboardingAnalyticsData:s}=await v().F.contextualizedOnboardingHelpers.load(),l=s({onboardingState:a,environment:e});p().Gk(e,l),p().Pz(e,l),r(e,a)}(e,"invalid"===i.type,"mobile-onboarding"===t.type,t.source),a.isNewUser&&p().PU(e))}catch(n){const t=(0,u().A)(n);!function(e,t,n){x().default.setState({...x().default.state,isLoading:!1}),p().H$(e,{...I().M6(x().default.state),errorMessage:t.message}),o().log({level:"error",from:"onboardingActions",type:"handleError",error:{message:`Found onboarding error: ${t.message}`}});const i=n?async()=>await y().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:a().d.OnboardingError}):void 0;m().rG({message:t.message,onAccept:i})}(e,t,"WorkspaceCreationError"===t.name&&(0,i().USz)(t)&&t.data.newUser)}}async function E(e,t){if(t.isOnboarding)try{p().H1(e,I().M6(t));const n=await _.load();let o=await n.updateAndGetNextState(t,e);o.isOnboarding?(o={...o,stageStats:{startedTimeStampMs:Date.now()}},x().default.setState(o),L(e,o)):x().default.setState(o),p().Pz(e,I().M6(o))}catch(n){}}function D(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R;const i=x().default.state;I().up(i)?n(e,{type:"new-user",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):I().Cy(i)?n(e,{type:"create-or-join",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):e.device.isMobile?n(e,{type:"mobile-onboarding",disableRedirectUrl:!0,source:"redirect_to_onboarding_start"}):o().log({level:"error",from:"onboardingActions",type:"handleOnboardingError",error:{message:`Could not redirect onboarding: ${t.message}`,stack:String(t.stack)}})}function N(e){const{state:t}=x().default;p().IY(e,I().M6(t)),x().default.setState({isOnboarding:!1,isLoading:!1,currentUserId:e.currentUser.id})}function L(e,t,n){if(!t.isOnboarding)return;const o=[...t.historicalStages||[],{stageName:t.stage,stageNumber:t.stageNumber,timestamp:Date.now()}];x().default.setState({...t,historicalStages:o.length>20?[{stageName:"truncated",stageNumber:-1,timestamp:Date.now()}]:o})}},1346:(e,t,n)=>{n.d(t,{Hq:()=>y,RV:()=>w,f_:()=>_,jB:()=>S,qB:()=>b});n(16280),n(898992),n(354520),n(581454);var o=()=>n(206267),i=()=>n(68263),r=()=>n(798880),a=()=>n(322769),s=()=>n(166386),l=()=>n(449412),c=()=>n(496603),d=()=>n(252105),u=()=>n(351360),p=()=>n(630116),m=()=>n(134217),g=()=>n(830140),f=()=>n(668721),v=()=>n(749240),h=()=>n(991249);function _(e){g().A.setState({open:!0,addOnFeature:e,stage:"limit_reached",addOnUpgradeId:o().JW(),tax:0})}function b(){g().A.setState({open:!1})}function y(e){const t=g().A.state;t.open&&g().A.setState({...t,stage:"confirm_purchase",coupon:e&&(0,s().J5)(e)?e:void 0})}async function S(e){const{environment:t,spaceStore:n,from:o}=e,s=function(){const e=v().subscriptionDataStoreInstance.state,t=(e?m().Be(e):[]).filter((e=>(0,a().c7)(e)&&(0,i().Km)(e.role))).map((e=>e.userId));if(!t||0===t.length)throw new Error("No admins found in the current space");return(0,c().XM)(t)}(),u=n.getName(),g=p().LU.createChildStore(n,{table:r().oo,id:s});await g.load();const f=g.getEmail();f?d().go(t,{admin_id:s,admin_email:f,space_name:u,from:o}):l().Fg(new Error("Could not get email for admin in sendMemberRequestForAddOn"))}function w(e){const{environment:t,upsellType:n,isAssistantEnabled:o,aiUpsell:i}=e,r=e.from??(o?"ai_assistant_limit_in_app":"ai_qna_limit_in_app");if("requestAccess"===n||"requestAccessNoFreeCredits"===n){const e=u().default.state.currentSpaceStore;if(!e)return;S({environment:t,spaceStore:e,from:r});const n=f().A.state;n&&!n.isEligible&&f().A.setState({...n,requestedAccess:!0})}else{if(void 0===i)return;if("upsell"!==n)return n;(0,h().K)(t,{from:r,upsell:i})}}},2143:(e,t,n)=>{n.d(t,{H:()=>y,Z:()=>b});n(898992),n(672577);var o=n(296540),i=()=>n(484714),r=()=>n(496603),a=()=>n(620689),s=()=>n(789550),l=()=>n(38337),c=()=>n(728611),d=()=>n(953418),u=()=>n(906537),p=()=>n(494237),m=()=>n(756279),g=()=>n(661179),f=()=>n(574012),v=()=>n(24157),h=()=>n(150866),_=n(474848);const b=1,y=o.forwardRef((function(e,t){let{type:d,style:u,children:v,className:y,role:k,onMouseMove:I,onMouseDown:x,onMouseLeave:A,onMouseEnter:C,onMouseOver:T,onClick:M,onDoubleClick:P,onContextMenu:B,onScroll:R,onScrollLagMeasure:E,preventType:D,store:N,...L}=e;const O=(0,i().v3)(),{isMobile:U}=(0,i().Y0)(),F=(0,o.useRef)(null),V=(0,n(847249).uB)(N,n(17090).A),j=(0,o.useCallback)((e=>{V.setState({...V.state,elementRef:F,element:e?new WeakRef(e):null})}),[V]),z=(0,n(93583).A)(j,F),H=(0,o.useRef)(0),W=(0,o.useRef)(0),q=(0,o.useRef)(0),K=(0,o.useRef)(0),G=(0,o.useRef)(),$=(0,o.useMemo)((()=>({getNode:()=>F.current,getStore:()=>V,getClientRect:()=>V.measureSize(),getOverflowType:()=>d})),[F,V,d]);(0,o.useImperativeHandle)(t,(()=>$),[$]);const Y=(0,o.useCallback)((()=>{V.setState({...V.state,isScrolling:!1}),E&&G.current&&E(G.current),G.current=void 0}),[V,E]),Q=(0,n(395361).Y)(Y,200),Z=(0,o.useCallback)((()=>{(function(e){return e!==m().A.None&&n(592678).Zm()&&n(230062).A.state})(d)&&a().lJ({environment:O,scroller:$,currentMouseX:W.current,currentMouseY:H.current})}),[O,d,$]),X=(0,n(721908).d)(Z,16.666666666666668);(0,o.useEffect)((()=>{const e=e=>{W.current=e.clientX,H.current=e.clientY};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),(0,o.useEffect)((()=>{if(O.device.isMobile){const e=e=>{W.current=e.touches[0].clientX,H.current=e.touches[0].clientY};return window.addEventListener("touchmove",e),()=>{window.removeEventListener("touchmove",e)}}}),[O]),(0,o.useEffect)((()=>{const e=F.current;if(e){const t=r().sg((()=>V.measureSize()),500,{leading:!0}),n=new ResizeObserver(t);return n.observe(e),()=>{t.cancel(),n.disconnect()}}}),[V]),(0,o.useEffect)((()=>{const e=F.current;if(e){function t(t){const{device:o}=O;if(!e)return;const{scrollTop:i,scrollLeft:r}=e,a=i>K.current?"down":i<K.current?"up":r>q.current?"right":r<q.current?"left":void 0;if(K.current=i,q.current=r,V.setState({...V.state,scrollTop_DEPRECATED:i,isScrolling:!0}),E){const e=performance.now();n(908006).default.afterNextFlush((()=>{const t=performance.now();(!G.current||t-e>G.current.endTime-G.current.startTime)&&(G.current={startTime:e,endTime:t})}))}R&&R(t,a),Q(),X(),o.isMobile&&function(e,t){t.current&&t.current.scrollTop<-30&&w(t)&&(n(778417).IU({environment:e}),n(725614).blurActiveElement())}(O,F)}return c().P4(e,"scroll",t),()=>{c().Ol(e,"scroll",t)}}}),[O,d,$,V,R,E,Q,X]),(0,o.useEffect)((()=>{!function(e,t,n,o,i){const{device:r}=e;if(r.isMobile)return;const a=t.current;if(!(a&&a instanceof HTMLElement))return;let s=0,l=0;o!==m().A.All&&o!==m().A.Y||a.scrollHeight>a.clientHeight&&(n===m().A.All||n===m().A.Y)&&(s=g().A.state);o!==m().A.All&&o!==m().A.X||a.scrollWidth>a.clientWidth&&(n===m().A.All||n===m().A.X)&&(l=g().A.state);const c=i;(!c||void 0===c.marginRight&&void 0===c.margin)&&(a.style.marginRight=`${s.toString()}px`);(!c||void 0===c.marginBottom&&void 0===c.margin)&&(a.style.marginBottom=`${l.toString()}px`)}(O,F,d,D,u)}),[O,d,D,u]),(0,o.useEffect)((()=>{V.measureSize()}),[V]);const[J,ee]=(0,o.useState)(void 0);(0,o.useEffect)((()=>{if(d!==m().A.All&&d!==m().A.Y)return void ee(void 0);if(void 0!==(null==u?void 0:u.paddingBottom))return void ee(void 0);const e=new(n(496506).default)((()=>function(e,t){if(f().A.state.phase===f().i.hidden&&!(0,n(155959).T)("supportsNativeBottomBarOverlappingWebView"))return;const{WindowSizeStore:o}=e,i=t.state.clientRect;if(!i)return;const r=o.state.height,s=r-f().A.mobileNativeBottomPadding(e),l=w(t.state.elementRef)&&a().z_(e)?i.height:0,c=p().A.getSize()>0&&p().A.find((e=>e.isShown()))?n(521099).j+16:0;return Math.max(Math.min(i.bottom,r)-s,l,0)+c}(O,V)),{debugName:"ScrollerPaddingBottomStore"});function t(e){ee(e.state)}return ee(e.state),e.addListener(t),()=>{e.removeListener(t)}}),[O,V,null==u?void 0:u.paddingBottom,d]);const te=(0,o.useContext)(s().R),ne=(0,o.useMemo)((()=>({horizontalScroller:d===m().A.X||d===m().A.All?$:null==te?void 0:te.horizontalScroller,verticalScroller:d===m().A.Y||d===m().A.All?$:null==te?void 0:te.verticalScroller})),[te,d,$]),oe={zIndex:b,...u,...S(U,d,D),...J?{paddingBottom:J}:{}};return(0,_.jsx)(s().t,{value:ne,children:(0,_.jsx)("div",{...L,role:k,style:oe,className:r().oE([l().XGs,(d===m().A.Y||d===m().A.All)&&l().RYy,(d===m().A.X||d===m().A.All)&&l().Dkd,y]).join(" "),onMouseMove:e=>{I&&I(e),X()},onTouchMove:e=>{X()},onMouseDown:x,onMouseLeave:A,onMouseEnter:C,onMouseOver:T,onClick:M,onDoubleClick:P,onContextMenu:B,ref:z,children:(0,_.jsx)(h().oq,{value:oe.paddingLeft||0,children:d===m().A.All||d===m().A.Y?(0,_.jsx)(h().eM,{nodeRef:F,children:(0,_.jsx)(h().WW,{children:v})}):v})})})}));function S(e,t,n){const o={};let i;if(void 0!==n){let e=!1,o=!1;t!==m().A.All&&t!==m().A.X||(e=!0),t!==m().A.All&&t!==m().A.Y||(o=!0),n!==m().A.All&&n!==m().A.X||(e=!1),n!==m().A.All&&n!==m().A.Y||(o=!1),i=e&&o?m().A.All:e?m().A.X:o?m().A.Y:m().A.None}else i=t;return t!==m().A.None&&i===m().A.None?o.overflow="hidden":i===m().A.All?(o.overflow="auto",o.WebkitOverflowScrolling="touch"):i===m().A.X?(o.overflowX="auto",o.overflowY="hidden",o.WebkitOverflowScrolling="touch"):i===m().A.Y&&(o.overflowX="hidden",o.overflowY="auto",o.WebkitOverflowScrolling="touch"),e&&(o.transform="translate3d(0px,0px,0px)",o.willChange="scroll-position, transform"),o}function w(e){if(!e.current)return!1;if("editing"!==v().default.state.mode)return!1;const t=u().get();if(!t)return!1;const n=d().gi(t.commonAncestorContainer);return!!n&&e.current.contains(n)}},2220:(e,t,n)=>{n.d(t,{u:()=>i});var o=()=>n(679924);function i(e){const{environment:t,event:n,opts:i}=e,{eventName:r,eventProperties:a}=n;(0,o().v)(t,r,a,i)}},3020:(e,t,n)=>{n.d(t,{A:()=>r,J:()=>a});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n(496603).o8(this.state)}}const i=new o,r=i,a=new(n(496506).default)((()=>i.state.isActive),{debugName:"isSimpleTableReorderingStore"})},3284:(e,t,n)=>{n.r(t),n.d(t,{arrowSquarePathUpDownIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M6.475 3.125a.625.625 0 1 0 0 1.25h7.975c.65 0 1.175.526 1.175 1.175v6.057l-1.408-1.408a.625.625 0 1 0-.884.884l2.475 2.475a.625.625 0 0 0 .884 0l2.475-2.475a.625.625 0 0 0-.884-.884l-1.408 1.408V5.55a2.425 2.425 0 0 0-2.425-2.425zM3.308 6.442a.625.625 0 0 1 .884 0l2.475 2.475a.625.625 0 1 1-.884.884L4.375 8.393v6.057c0 .649.526 1.175 1.175 1.175h7.975a.625.625 0 0 1 0 1.25H5.55a2.425 2.425 0 0 1-2.425-2.425V8.393L1.717 9.801a.625.625 0 1 1-.884-.884z"})},i=(0,n(340498).wt)("arrowSquarePathUpDown",o)},4319:(e,t,n)=>{n.d(t,{A_:()=>q,De:()=>$,GZ:()=>Y,Nv:()=>ne,Uz:()=>j,au:()=>J,bi:()=>z,g:()=>te,ic:()=>W,jG:()=>V,jP:()=>ee,kn:()=>U,mL:()=>H,sp:()=>oe,td:()=>O,wr:()=>F});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(584262),i=()=>n(9559),r=()=>n(970013),a=()=>n(713998),s=()=>n(921940),l=()=>n(604995),c=()=>n(683259),d=()=>n(522419),u=()=>n(651124),p=()=>n(977345),m=()=>n(416504),g=()=>n(792071),f=()=>n(450648),v=()=>n(179034),h=()=>n(161479),_=()=>n(798880),b=()=>n(919709),y=()=>n(496603),S=()=>n(534177),w=()=>n(450510),k=()=>n(421107),I=()=>n(654062),x=()=>n(780054),A=()=>n(909470),C=()=>n(972435),T=()=>n(919878),M=()=>n(508496),P=()=>n(436696),B=()=>n(612008),R=()=>n(896628),E=()=>n(246826),D=()=>n(778417),N=()=>n(319975),L=()=>n(751156);function O(e){const{environment:t,selectionKey:n,selection:o,currentRowStore:i}=e,r=k().A.state.isActive?k().A.state.currentRowStore:void 0;k().A.setState({isActive:!0,selectionKey:n,selection:o,currentRowStore:i||r}),D().IU({environment:t})}function U(e){k().A.update((t=>({...t,currentRowStore:e})))}function F(){k().A.setState({isActive:!1})}function V(e){const{environment:t,selectionKey:n,shiftKey:o,columnCount:i,selection:r}=e;if(o&&r.end.col>0){const e={col:r.end.col-1,row:r.end.row},o={start:r.start,end:e};return O({environment:t,selectionKey:n,selection:o}),o}if(!o&&r.start.col>0){const e={col:r.start.col-1,row:r.start.row},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}if(!o&&0===r.start.col&&r.start.row>0){const e={col:i-1,row:r.start.row-1},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}return r}function j(e){const{environment:t,selectionKey:n,shiftKey:o,columnCount:i,rowCount:r,selection:a}=e;if(o&&a.end.col<i-1){const e={col:a.end.col+1,row:a.end.row},o={start:a.start,end:e};return O({environment:t,selectionKey:n,selection:o}),o}if(!o&&a.start.col<i-1){const e={col:a.start.col+1,row:a.start.row},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}if(!o&&a.start.col>=i-1&&a.start.row<r-1){const e={col:0,row:a.start.row+1},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}return a}function z(e){const{environment:t,selectionKey:n,shiftKey:o,selection:i}=e;if(o&&i.end.row>0){const e={col:i.end.col,row:i.end.row-1},o={start:i.start,end:e};return O({environment:t,selectionKey:n,selection:o}),o}if(!o&&i.start.row>0){const e={col:i.start.col,row:i.start.row-1},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}return i}function H(e){const{environment:t,selectionKey:n,shiftKey:o,rowCount:i,selection:r}=e;if(o&&r.end.row<i-1){const e={col:r.end.col,row:r.end.row+1},o={start:r.start,end:e};return O({environment:t,selectionKey:n,selection:{start:r.start,end:e}}),o}if(!o&&r.start.row<i-1){const e={col:r.start.col,row:r.start.row+1},o={start:e,end:e};return O({environment:t,selectionKey:n,selection:o}),o}return r}function W(e){const{selection:t,schema:n,currentRows:o,currentPropertyFormats:i,transaction:a}=e,s=w().hn(t);for(let l=s.minRow;l<=s.maxRow;l++){const e=o[l];if(e)for(let t=s.minCol;t<=s.maxCol;t++){const o=i[t],s=n[o.property];if(r().z3(s))continue;const l=e.getPropertyStore(o.property);N().R9({environment:l.environment,store:l,value:void 0,transaction:a})}}}function q(e){const{selection:t,currentRows:n,event:i,formulasModule:r}=e;if(null===i.clipboardData)return;const a=w().hn(t);let l="";const d=[],u=n.slice(Math.max(0,a.minRow),a.maxRow+1).filter((e=>e&&e.isDefined()));for(const o of u){const t=[];d.push(t);for(let n=a.minCol;n<=a.maxCol;n++){const[i,r]="selectionKey"in e?K({rowStore:o,x:n,collectionViewBlockStore:e.selectionKey.collectionViewBlockStore,...e}):G({rowStore:o,x:n,...e});t.push([i,o.pointer]),r&&(l+=r),n<a.maxCol&&(l+="\t")}o!==y().HV(u)&&(l+="\n")}if(i.preventDefault(),i.clipboardData.setData("text/plain",l),function(e,t){if(null===e.clipboardData)return;e.clipboardData.setData(w().sE,JSON.stringify(t))}(i,d),"simpleTableStore"in e){const{environment:t,simpleTableStore:n,columnOrder:l,exportJsxRenderer:d}=e;if(!d)return;const{default:p,jsxToStaticMarkup:f}=d,_=t.currentUser.id,b=t.defaultRecordCache.inMemoryRecordCache.makeGetRecordValueFn(_),y=g().b4_.fromGetRecordValueFn(b),S=l.slice(a.minCol,a.maxCol+1).filter((e=>void 0!==e)),w=(0,c().g8)({exportArgs:{root:{table:v().ev,id:n.id,spaceId:(0,h().e)(n.pointer.spaceId)},navigableBlockId:n.id,renderParentBlockId:void 0,blockId:n.id,userTimeZone:(0,m().P)(),intl:C().A.getIntl(),getRecordValue:b,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,s().A)({pageId:t,pageModel:y({table:v().ev,id:t}),baseUrl:x().A.domainBaseUrl,pageVisitSource:o().y8.Export})},baseUrl:x().A.domainBaseUrl,publicDomainName:x().A.publicDomainName,table:{[n.id]:{renderRows:u.map((e=>e.id)),renderColumns:S}},katex:t.KatexStore.getKatex(),resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,A().i)(),formulasModule:r},renderers:p});if(w){const e=f(w);i.clipboardData.setData("text/html",e)}}}function K(e){const{rowStore:t,x:n,collectionViewBlockStore:o,schema:r,currentPropertyFormats:s,formulasModule:c}=e,d=s[n],u=function(e,t,n,o){const i=t[n];if(!i)throw new Error("Property not found");if(!e.isDefined())return[];const r=e.getPropertyValue(n);if("formula"===i.type){if(!o)return[];if("v2"===i.version){if(!i.formula2)return[];const t=o.evaluateCollectionFormula2({block:e.getModel(),property:n,formulaCode:i.formula2.code,getRecordModel:e.getRecordModel,intl:C().A.getIntl(),userTimeZone:(0,m().P)(),depth:0,visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,A().i)()});return t?(0,p().Ht)(t):[]}{const i=o.propertyToFormulaValueAsString({property:n,schema:t,block:e.getModel(),getRecordModel:e.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,m().P)(),depth:0,intl:C().A.getIntl(),resultCache:new Map,regExpCache:new Map,visitedProperties:new Set,experimentService:M().default,collectionFeatureGates:(0,A().i)()}});return b().x9d(i)}}if("created_time"===i.type&&e.getCreatedTime())return a().m5(l().KQ(e.getCreatedTime(),(0,m().P)()));if("created_by"===i.type&&e.getCreatedByPointer()){const{table:t,id:n}=e.getCreatedByPointer()??{};return n&&t===_().oo?[b().wmz(["u",n])]:n?[b().wmz(["r",n])]:[]}if("last_edited_time"===i.type&&e.getLastEditedTime())return a().m5(l().KQ(e.getLastEditedTime(),(0,m().P)()));if("last_edited_by"===i.type&&e.getLastEditedByPointer()){const{table:t,id:n}=e.getLastEditedByPointer()??{};return n&&t===_().oo?[b().wmz(["u",n])]:n?[b().wmz(["r",n])]:[]}return r||[]}(t,r,d.property,c);if(!t.isDefined())return[u,void 0];return[u,(0,i().W)({property:d.property,schema:r,block:t.getModel(),getRecordModel:o.getRecordModel,collectionRequestContext:{userId:void 0,userTimeZone:(0,m().P)(),depth:0,intl:C().A.getIntl(),visitedProperties:new Set,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,A().i)()},exportedFilePaths:!1,formulasModule:c})]}function G(e){const{rowStore:t,x:n,columnOrder:o,simpleTableStore:i}=e,r=t.getPropertyStore(o[n]);return[r.getValue()||[],(0,f().r4)({textValue:r.getValue(),getRecordModel:i.getRecordModel,userTimeZone:(0,m().P)(),intl:C().A.getIntl()})]}function $(e){q(e),W(e)}function Y(e){const{clipboardActions:t,environment:n,selection:o,currentRows:i,event:r,transaction:a,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l}=e;if(!r.clipboardData)return;let c;const d=r.clipboardData.getData(w().sE),u=r.clipboardData.getData("text/html");if(d)c=JSON.parse(d);else if(u){const e=document.createElement("div");e.innerHTML=u;const t=e.querySelector("table");if(t){const e=t.querySelectorAll("tr");c=[];for(const t of Array.from(e)){const e=[],n=t.querySelectorAll("td, th");for(const t of Array.from(n)){const n=b().x9d(t.textContent||"");e.push([n,void 0])}c.push(e)}}}if(!c){const e=t.getInlineTextValueFromClipboardData({event:r,markdownLinkifyIt:s,tinyMceMicrosoftWordPasteFilter:l});e&&(c=[[[e,void 0]]])}if(c){const t=w().hn(o),r=c[0].length;let s=Math.floor((t.maxCol-t.minCol+1)/r);0===s&&(s=1);const l=c.length;let d=Math.floor((t.maxRow-t.minRow+1)/l);0===d&&(d=1);for(let n=0;n<d;n++)for(let o=0;o<s;o++){const s=t.minCol+o*r,d=t.minRow+n*l;for(let t=0;t<l;t++){let n=i[d+t];if(!n){const t="selectionKey"in e?Q(e):T().D(e);t&&(e.currentRows.push(t),n=t)}for(let o=0;o<r;o++){const i=c[t][o];if(!i)continue;const r=s+o;"currentPropertyFormats"in e?Z({rowStore:n,x:r,serializedValue:i,currentPropertyFormats:e.currentPropertyFormats,transaction:a,schema:e.schema}):X({rowStore:n,x:r,serializedValue:i,columnOrder:e.columnOrder,transaction:a})}}}const u={start:{col:t.minCol,row:t.minRow},end:{col:t.minCol+r*s-1,row:t.minRow+l*d-1}};"selectionKey"in e?O({environment:n,selectionKey:e.selectionKey,selection:u}):T().ep({environment:n,start:u.start,end:u.end,simpleTableStore:e.simpleTableStore})}}function Q(e){const{environment:t,currentRows:n,collectionContextStore:o,selectionKey:i,transaction:r}=e,{groupFormat:a}=i,s=(0,B().Q)({environment:t,collectionContextStore:o,groupsPointer:a?[a]:[],insertAtIndex:n.length,shouldCoerce:!0,transaction:r,from:{createBlock:"table_paste_selection"},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});return null==s?void 0:s.newStore}function Z(e){var t;const{rowStore:n,x:o,serializedValue:i,currentPropertyFormats:r,transaction:s,schema:l}=e,c=r[o];if(!c)return;if("verification"===(null===(t=l[c.property])||void 0===t?void 0:t.type))return;const[u,p]=i,m=n.getPropertyStore(c.property);if(N().R9({environment:m.environment,store:m,value:u,transaction:s}),p){var g;const e=u?a().pJ(u):void 0,t=null==e||null===(g=e.map((e=>{var t;return null===(t=(0,d().oN)({urlOrAlias:e.url}))||void 0===t?void 0:t.fileId})))||void 0===g?void 0:g.filter(S().O9);t&&t.length>0&&E().Bn({store:n,source:p,fileIds:t,transaction:s})}}function X(e){const{rowStore:t,x:n,serializedValue:o,transaction:i,columnOrder:r}=e,a=r[n];if(!a)return;const[s,l]=o,c=t.getPropertyStore(a);N().R9({environment:c.environment,store:c,value:b().Uee(s,{removeSuggestionAnnotationsAndText:!1,removeSuggestionAnnotations:!0,removeDiscussions:!0}),transaction:i})}function J(e){let{environment:t,collectionViewStore:n,currentValue:o}=e;L().createAndCommit({userAction:"tableActions.toggleTableVerticalLines",environment:t,canUndo:!0,perform:e=>{R().zA({stores:[n],update:{hide_table_vertical_lines:!o},transaction:e})}})}function ee(e){let{environment:t,collectionViewStore:n,currentValue:o}=e;const i="title"===o?void 0:"title";L().createAndCommit({userAction:"tableActions.toggleTableSubitemToggleOnTitle",environment:t,canUndo:!0,perform:e=>{R().zA({stores:[n],update:{table_subitem_toggle_column:i},transaction:e})}})}function te(e){let{environment:t,collectionViewStore:n,currentValue:o}=e;const i=(0,u().u9)(n.getType()??"table")??"table_properties",r=n.getFormat()[i],a=null==r?void 0:r.map((e=>({...e,wrap:!o})));L().createAndCommit({userAction:"tableActions.toggleTableWrapCells",environment:t,canUndo:!0,perform:e=>{R().zA({stores:[n],update:{table_wrap:!o,[i]:a},transaction:e})}})}function ne(e){let{property:t,collectionViewStore:n,format:o,formatKey:i,environment:r,currentValue:a}=e;const s=!a,l=n.getFormat().table_wrap,c=o[i]||[];let d=!0;const u=c.map((e=>{let n;return n=e.property===t?s:Boolean(l||e.wrap),n||(d=!1),{...e,wrap:n}})),p={...o,[i]:u,table_wrap:d};L().createAndCommit({userAction:"tableActions.toggleWrapColumn",environment:r,canUndo:!0,perform:e=>{(0,I().F)({collectionViewStore:n,update:{format:p},transaction:e})}})}function oe(e){let{environment:t,collectionContextStore:n,currentIndex:o,entrypoint:i,transaction:r,propertyAction:a}=e;const s=n.collectionViewStore(),l=n.normalizedFormatStore.state;if(!s||void 0===o)return;const c=n.frozoneStore.state.frozenIndex;let d;switch(a){case"toggle":c!==o?d=o:c===o&&(d=-1);break;case"delete":case"hide":if(!(void 0!==c&&o<=c))return;d=c-1;break;case"duplicate":if(!(void 0!==c&&o<=c))return;d=c+1;break;case void 0:if(c!==o)d=o;else if(c===o)return}const u={...l,table_frozen_column_index:d};n.frozoneStore.setState({...n.frozoneStore.state,frozenIndex:d}),(0,P().X)({environment:t,collectionContextStore:n,action:void 0===d?"table_unfreeze_columns":"table_freeze_column",entrypoint:i,propertyIndex:d}),E().zv({store:s.getFormatStore(),data:u,transaction:r})}},5705:(e,t,n)=>{n.d(t,{If:()=>z,KO:()=>j,TC:()=>Y,aD:()=>H,b$:()=>W,f0:()=>K,ke:()=>G,zd:()=>$});n(581454);var o=()=>n(763884),i=()=>n(496603),r=()=>n(404779),a=()=>n(681634),s=()=>n(902731),l=()=>n(21510),c=()=>n(770906),d=()=>n(441199),u=()=>n(869562),p=()=>n(496067),m=()=>n(919878),g=()=>n(351360),f=()=>n(525569),v=()=>n(520257),h=()=>n(195613),_=()=>n(205682),b=()=>n(77238),y=()=>n(609044),S=()=>n(212640),w=()=>n(783848),k=()=>n(899677),I=()=>n(871399),x=()=>n(502438),A=()=>n(795179),C=()=>n(538233),T=()=>n(427155),M=()=>n(466872),P=()=>n(112873),B=()=>n(901265),R=()=>n(522986),E=()=>n(35622),D=()=>n(569577),N=()=>n(898286),L=()=>n(495262),O=()=>n(778417),U=()=>n(436572),F=()=>n(725614),V=()=>n(892632);function j(e){C().A.reset(),T().A.reset(),A().A.reset(),v().A.reset(),R().VN({environment:e,blockPropertyValueOverlayStore:_().A}),V().po(),U().Sy()}function z(e,t){y().A.reset(),S().A.reset(),w().A.reset(),R().VN({environment:e,blockPropertyValueOverlayStore:b().A})}function H(e){var t;O().IU({environment:e}),F().clear({environment:e}),(0,r().y)(),m().wr(),O().rN({pivot:void 0}),B().VN(),I().default.reset(),L().xO(),P().xl(),N().V(e),D().V(e),f().default.resetStore({environment:e}),E().VN(),null===(t=e.NativeMobileActionBarStore)||void 0===t||t.clear(!1)}function W(e){p().A.reset(),k().default.reset(),M().A.state.open&&(M().A.reset(),e.device.isMobile&&u().close()),d().default.isPeekDismissableState()&&!d().default.isTransitioningState()&&c().VI({environment:e}),l().A.state.open&&s().oU(e),(0,a().c)(e)}function q(){const{mainEditorCurrentBlockStore:e}=g().default.state;let t=0,n=[];if(e){var o;const{stores:e}=x().default.state;n=i().oE(e.map((e=>e.id))),t=(null===(o=h().A.state.elementRef.current)||void 0===o?void 0:o.scrollTop)??0}return{scrollTop:t,blockIds:n}}function K(e){let{historyId:t,currentUserId:n}=e;const i=o().K.get({userId:n,key:t});return i?i.index:0}function G(e){let{historyId:t,historyIndex:n,currentUserId:i}=e;const r={scrollTop:0,blockIds:[],index:n};o().K.set({userId:i,key:t,value:r})}function $(e){let{historyId:t,currentUserId:n}=e;const i=o().K.get({userId:n,key:t});if(!i)return;const r={...q(),index:i.index};o().K.set({userId:n,key:t,value:r})}function Y(e){let{RouterStore:t,currentUserId:n}=e;const i=t.state.id;o().K.remove({userId:n,key:i})}},7674:(e,t,n)=>{n.d(t,{tf:()=>s,aO:()=>m,YA:()=>c,ZQ:()=>f});n(296540);var o=()=>n(401497),i=()=>n(581495),r=()=>n(84817),a=n(474848);function s(e){const{children:t,footer:n,header:s,showDismissButton:l=!0,sizeRange:c,gap:d}=e,u=(0,o().IS)((()=>({children:{display:"flex",flexGrow:1,overflow:"hidden"},footer:{marginTop:"auto"}})),[]);return(0,a.jsxs)(r().Y1,{gap:d??24,padding:20,style:c,children:[s,t?(0,a.jsx)("div",{style:u.children,children:t}):null,n?(0,a.jsx)("div",{style:u.footer,children:n}):null,l?(0,a.jsx)(i().Rz,{}):null]})}var l=()=>n(554509);function c(e){const{iconAndTitle:t,description:n,descriptionStyle:o}=e;return t||n?(0,a.jsxs)(r().Y1,{align:"top-center",gap:8,children:[t,n?(0,a.jsx)(l().D,{styleName:"Body-14px/Regular",colorName:"secondary",customStyles:{textAlign:"center",...o},children:n}):null]}):null}n(898992),n(354520),n(581454);var d=()=>n(534177),u=()=>n(284371),p=()=>n(106196);function m(e){var t;const{caption:n,layout:i,sectionGap:s}=e,l=(0,o().IS)((e=>({caption:{color:e.text.secondary,textAlign:"center",fontSize:12,fontWeight:u().Wy.regular,lineHeight:"15px"},primaryActionAndCaption:{gap:7},verticalContainer:{}})),[]),c=e.primaryButtons.filter(Boolean),m=null===(t=e.secondaryButtons)||void 0===t?void 0:t.filter(Boolean);return null!=c&&c.length||null!=m&&m.length||n?"vertical"===i?(0,a.jsxs)(r().Y1,{gap:s??8,children:[(0,a.jsxs)(r().Y1,{gap:7,children:[c.map(((e,t)=>(0,a.jsx)(p().N,{buttonInfo:e},t))),n?(0,a.jsx)("div",{style:l.caption,children:n}):null]}),null==m?void 0:m.map(((e,t)=>(0,a.jsx)(p().N,{buttonInfo:e},t)))]}):"horizontal-right"===i?(0,a.jsxs)(r().Y1,{align:"center-right",direction:"horizontal",gap:s??8,children:[null==m?void 0:m.map(((e,t)=>(0,a.jsx)(p().N,{buttonInfo:e},t))),c.map(((e,t)=>(0,a.jsx)(p().N,{buttonInfo:e},t)))]}):void(0,d().HB)(i):null}var g=()=>n(460292);function f(e){const{iconGroup:t,iconColorName:n="secondary",title:o,variantName:i="default"}=e;return t||o?(0,a.jsxs)(r().Y1,{align:"top-center",gap:9,children:[t?(0,a.jsx)(g().Q,{iconGroup:t,colorName:n,variantName:i,overrideSize:()=>36}):null,o?(0,a.jsx)(l().D,{styleName:"Heading-17px/Semibold",colorName:"primary",style:{textAlign:"center"},children:o}):null]}):null}},8980:(e,t,n)=>{n.d(t,{I:()=>a});var o=()=>n(484714),i=()=>n(401497),r=()=>n(340498);function a(e){let{className:t,icon:n,label:a,style:s,size:l="default",color:c="inherit",weight:d="regular"}=e;const{isMobile:u}=(0,o().Y0)(),p="number"==typeof l?l:u?r().lD[l]:r().Ev[l];return n((0,i().IS)((e=>{const t="inherit"===c?"inherit":e.icon[c];return{svg:{width:p,height:p,fill:t,stroke:"bold"===d?t:void 0,strokeWidth:"bold"===d?.3:void 0,...s}}}),[c,p,s,d]).svg,t,a)}},10594:(e,t,n)=>{n.d(t,{$e:()=>L,B2:()=>I,DF:()=>P,FS:()=>N,K0:()=>A,K3:()=>R,LS:()=>B,Qt:()=>O,RP:()=>x,Z3:()=>z,Zl:()=>j,_9:()=>k,_T:()=>T,ck:()=>E,f0:()=>U,nc:()=>C,rA:()=>V,w9:()=>M});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(66689),i=()=>n(708685),r=()=>n(921598),a=()=>n(970013),s=()=>n(381891),l=()=>n(869190),c=()=>n(604995),d=()=>n(236162),u=()=>n(416504),p=()=>n(72135),m=()=>n(959013),g=()=>n(100622),f=()=>n(496603),v=()=>n(534177),h=()=>n(508496),_=()=>n(682146),b=()=>n(325383),y=()=>n(522827),S=()=>n(972435),w=()=>n(685889);const k=10,I=10,x=50,A=(0,m().YK)({unsupportedGroupAction:{id:"collectionGroupHelpers.unsupportedGroupAction",defaultMessage:"Selected group is not available for this task."},emptyGroupLabel:{id:"database.boardView.uncategorizedColumnTitle",defaultMessage:"No {name}"},today:{id:"database.collectionGroupValue.dateGroup.today",defaultMessage:"Today"},yesterday:{id:"database.collectionGroupValue.dateGroup.yesterday",defaultMessage:"Yesterday"},last_7_days:{id:"database.collectionGroupValue.dateGroup.last7Days",defaultMessage:"Last 7 days"},last_30_days:{id:"database.collectionGroupValue.dateGroup.last_30Days",defaultMessage:"Last 30 days"},tomorrow:{id:"database.collectionGroupValue.dateGroup.tomorrow",defaultMessage:"Tomorrow"},next_7_days:{id:"database.collectionGroupValue.dateGroup.next7Days",defaultMessage:"Next 7 days"},next_30_days:{id:"database.collectionGroupValue.dateGroup.next30Days",defaultMessage:"Next 30 days"},week_differingStartAndEndYear:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndYear",defaultMessage:"{startMonth} {startDay} {startYear} – {endMonth} {endDay} {endYear}"},week_differingStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.differingStartAndEndMonth",defaultMessage:"{startMonth} {startDay} – {endMonth} {endDay} {startYear}"},week_sameStartAndEndMonth:{id:"database.collectionGroupValue.dateGroup.week.sameStartAndEndMonth",defaultMessage:"{startMonth} {startDay} – {endDay} {startYear}"},out_of_range:{id:"database.collectionGroupValue.numberGroup.outOfRange",defaultMessage:"Out of range"},range:{id:"database.collectionGroupValue.numberGroup.range",defaultMessage:"{start} to {end}"},groups:{id:"database.groupMenu.groups",defaultMessage:"Groups"},hideGroup:{id:"database.groupMenu.hideGroup",defaultMessage:"Hide group"},showGroup:{id:"database.groupMenu.showGroup",defaultMessage:"Show group"},groupLimitReachedTitle:{id:"database.groupMenu.groupLimitReachedTitle",defaultMessage:"Group limit reached"},groupLimitReachedCaption:{id:"database.groupMenu.groupLimitReachedCaption",defaultMessage:"A maximum of 1,000 groups can be shown"},noGroups:{id:"database.groupMenu.noGroups",defaultMessage:"No groups to display"},pinnedGroups:{id:"database.groupMenu.pinnedGroups",defaultMessage:"Pinned groups"},pinGroup:{id:"database.groupMenu.pinGroup",defaultMessage:"Pin group"},unpinGroup:{id:"database.groupMenu.unpinGroup",defaultMessage:"Unpin group"}});function C(e){let{intl:t,value:n}=e;if("today"===n.type)return t.formatMessage(A.today);if("yesterday"===n.type)return t.formatMessage(A.yesterday);if("last_7_days"===n.type)return t.formatMessage(A.last_7_days);if("last_30_days"===n.type)return t.formatMessage(A.last_30_days);if("tomorrow"===n.type)return t.formatMessage(A.tomorrow);if("next_7_days"===n.type)return t.formatMessage(A.next_7_days);if("next_30_days"===n.type)return t.formatMessage(A.next_30_days);if("day"===n.type){const e=(0,c().AA)(n.range,(0,u().P)(),t.locale);return(0,l().eV)({value:e.start,preset:"medium"})}if("week"===n.type){const e=(0,c().AA)(n.range,(0,u().P)(),t.locale),o=(0,l().eV)({value:e.start,preset:"month_short"}),i=(0,l().eV)({value:e.start,preset:"day"}),r=e.start.year,a=(0,l().eV)({value:e.end,preset:"month_short"}),s=(0,l().eV)({value:e.end,preset:"day"}),d=e.end.year;return r!==d?t.formatMessage(A.week_differingStartAndEndYear,{startMonth:o,startDay:i,endMonth:a,endDay:s,startYear:r,endYear:d}):o!==a?t.formatMessage(A.week_differingStartAndEndMonth,{startMonth:o,startDay:i,endMonth:a,endDay:s,startYear:r}):t.formatMessage(A.week_sameStartAndEndMonth,{startMonth:o,startDay:i,endDay:s,startYear:r})}if("month"===n.type){const e=(0,c().AA)(n.range,(0,u().P)(),t.locale);return(0,l().eV)({value:e.start,preset:"month_year_short"})}if("year"===n.type){return(0,c().AA)(n.range,(0,u().P)(),t.locale).start.year.toString()}(0,v().HB)(n)}function T(e){let{intl:t,value:n,format:o}=e;if("out_of_range"===n.type)return t.formatMessage(A.out_of_range);if("range"===n.type){const e=p().ZV(n.start,o,t),i=p().ZV(n.end,o,t);return t.formatMessage(A.range,{start:e,end:i})}if("unique"===n.type){return p().ZV(n.value,o,t)}(0,v().HB)(n)}function M(e,t){const n=f().mg(e),o=t.start_week_on??0;return(0,r().Ik)(n)&&"week"===n.groupBy?n.startDayOfWeek=o:"formula"===n.type&&(0,r().Ik)(n.groupBy)&&"week"===n.groupBy.groupBy&&(n.groupBy.startDayOfWeek=o),n}function P(e,t,n){const o=e.filter((e=>!(0,r().Mn)(e,t))),i=o.filter((e=>!(0,r().tx)(e))),a=o.filter((e=>(0,r().tx)(e)));return[...i.slice(0,n-1),t,...i.slice(n-1),...a]}function B(e,t){const n=e.filter((e=>!(0,r().Mn)(e,t))),o=n.filter((e=>!(0,r().tx)(e))),i=n.filter((e=>(0,r().tx)(e)));return[...o,t,...i]}function R(e){return!e.device.isPhone&&(e.isFullScreen||e.isRootChild)}function E(e){const{schema:t,groupBy:n,schemaGroups:a,reducerResults:l,relativeVariableResult:c,getRecordModel:d,viewAppConfigUri:u,allowedCollectionStores:p,renderGroupsFromAggregationArgs:m,removeUncategorized:g,getRecordRole:v}=e;if(!n)return[];const h=t[n.property];if(!h||!(0,r().Eg)(h))return[];const b=new Set(p.map((e=>e.id))),y=[...e.formatGroups,...a&&!l?a.map((e=>({property:n.property,value:e}))):[]];let S;if("manual"!==(0,r().Kq)(n).type||m){let e=l;l&&m&&(e=function(e,t){const n=t.aggregationResults,o=t.yAxisSortOrder;return n&&o?f().My(e,(e=>{var n;const o=e.value,i=(0,r().AC)(o);return null===(n=t.groupTotals.get(i))||void 0===n?void 0:n.total}),[o]):e}(l,m));const t=new Map;for(const n of y)t.set((0,r().Ix)(n),n);S=e?e.map((e=>{let{value:o}=e;return t.get((0,r().AC)(o))||{property:n.property,value:o}})):[];for(const n of y)S.push(n)}else{if(S=y,l)for(const{value:e}of l){const t={property:n.property,value:e};S.push(t)}if(u===o().JS){const t=S.map((e=>({value:e.value,type:e.value.type,title:void 0,total:0,aggregationState:void 0,isRestricted:!1,groupSortPreferenceMap:new Map,pinnedAggregationState:void 0,blockResultState:{sorting:"sorted",blocks:[]}})));S=(0,s().yy)(t,e.formatGroups.map((e=>e.value))).map((e=>({property:n.property,value:e.value})))}}if(l){if(n.hideEmptyGroups){const e=new Set,t=new Set;for(const n of l){const o=(0,r().AC)(n.value);0===n.total?t.add(o):e.add(o)}S=S.map((n=>{const o=(0,r().Ix)(n);if(t.has(o))return{...n,emptyHidden:!0};if(e.has(o)){const e={...n};return delete e.emptyHidden,e}return n}))}else S=S.map((e=>{if(e.emptyHidden){const t={...e};return delete t.emptyHidden,t}return e}));S=u===o().JS&&n.property===o().yx.TaskToSprintRelation?S.map((e=>"relation"===e.value.type&&(0,r().zx)(e.value.value)||void 0===e.value||void 0===e.value.value?e:{...e,hiddenByDefault:!0})):S.map((e=>{if(e.hiddenByDefault){const t={...e};return delete t.hiddenByDefault,t}return e}))}const w=S.filter((e=>{if(e.property!==n.property)return!1;const t=e.value;if(t.type!==h.type)return!1;if(g&&void 0===t.value)return!1;if(m&&m.hideZeroAggregations){var o;const e=(0,r().AC)(t),n=null===(o=m.groupTotals.get(e))||void 0===o?void 0:o.total;if(void 0!==n&&0===n)return!1}if(void 0===t.value)return!(0,_().i5)(h);if("formula"===h.type){const t=(0,i().getFormulaPropertySchemaResultType)(h);if(!h.formula&&!h.formula2||"unknown"===t)return!1;if("formula"!==e.value.type||"formula"!==n.type)return!1;const o=e.value.value;if(!o)return!0;if("block"===t&&"text"===o.type)return!0;if(o.type!==t)return!1;const a=n.groupBy;return"relation"===a.type?function(e,t,n){if(!e||!e.value)return!0;if("relation"!==t.type||"relation"!==e.type)return!1;if((0,r().zx)(e.value))return!1;const o=n(e.value);return null==o?void 0:o.alive}(o,{...a,property:n.property},d):D({groupValue:o,groupBy:{property:n.property,...a},getRecordModel:d,relativeVariableResult:c,getRecordRole:v})}return!("location"===t.type&&t.value&&!b.has(t.value.id))&&D({groupValue:t,groupBy:n,getRecordModel:d,relativeVariableResult:c,propertySchema:h,getRecordRole:v})}));return f().hS(w,(e=>(0,r().Ix)(e)))}function D(e){const{groupValue:t,groupBy:n,getRecordModel:o,relativeVariableResult:i,propertySchema:a,getRecordRole:s}=e;if(!t.value)return!0;const l=n.type;if("formula"===l)return!1;if("select"===l){if("select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("multi_select"===l){if("multi_select"!==(null==a?void 0:a.type))return!1;return(a.options??[]).some((e=>e.value===t.value))}if("status"===l){if("status"!==(null==a?void 0:a.type))return!1;const e=a.options??[],o=a.groups??[];if("status"!==t.type)return!1;const{value:i}=t;return"by_group"===i.type?("status"!==l||"group"===n.groupBy)&&o.some((e=>e.name===i.group)):"by_option"===i.type&&(("status"!==l||"option"===n.groupBy)&&e.some((e=>e.value===i.option)))}return(0,r()._o)(l)?function(e,t){if(!e||!e.value)return!0;if(!(0,r().Ik)(t)||!(0,r().DH)(e)||!t.groupBy)return!1;const n=e.value.type;if("relative"===t.groupBy)return"today"===n||"yesterday"===n||"last_7_days"===n||"last_30_days"===n||"tomorrow"===n||"next_7_days"===n||"next_30_days"===n||"month"===n;if("day"===t.groupBy)return"day"===n;if("week"===t.groupBy)return"week"===n;if("month"===t.groupBy)return"month"===n;if("year"===t.groupBy)return"year"===n;(0,v().HB)(t.groupBy)}(t,n):(0,r().Vs)(l)?function(e,t){if(!e||!e.value)return!0;if(!(0,r().Vh)(t)||!(0,r().kO)(e)||!t.groupBy)return!1;const n=e.value.type;if("alphabet_prefix"===t.groupBy)return"alphabet_prefix"===n||"other"===n;if("exact"===t.groupBy)return"exact"===n;(0,v().HB)(t.groupBy)}(t,n):"number"===l?function(e,t){if(!e||!e.value)return!0;if("number"!==t.type||"number"!==e.type)return!1;const n=e.value;if("out_of_range"===n.type)return n.start===t.start&&n.end===t.end;if("range"===n.type){const e=(0,r().WB)(n.start,t.start,t.end,t.size);return e&&"range"===e.type&&e.start===n.start}if("unique"===n.type){const e=(0,r().WB)(n.value,t.start,t.end,t.size,t.groupBy);return e&&"unique"===e.type&&e.value===n.value}(0,v().HB)(n)}(t,n):"relation"===l?"relation"===(null==a?void 0:a.type)&&function(e){var t;const{propertySchema:n,groupValue:o,groupBy:i,getRecordModel:a,relativeVariableResult:s,getRecordRole:l}=e;if(!o||!o.value)return!0;if("relation"!==i.type||"relation"!==o.type)return!1;if((0,r().zx)(o.value)){var c,u;const e=n.collection_pointer&&a(n.collection_pointer);if(!s||!e)return!1;const t=null==e||null===(c=e.getFormat())||void 0===c?void 0:c.app_config_uri,i=null===(u=s[e.id])||void 0===u?void 0:u[o.value.value.variable],r=null==e?void 0:e.getSchema();return(0,y().KN)(r,t)&&i}const p=a(o.value);if(!p){return"none"===(null==l?void 0:l(o.value))}const m=(0,d().zN)({block:p,getRecordModel:a});if(s&&m){if((0,r().VF)({relativeVariableValues:s[null==m?void 0:m.id],pointer:p.pointer}).length>0)return!1}return Boolean(p.alive&&((null==m?void 0:m.id)===n.collection_id||(null==m?void 0:m.id)===(null===(t=n.collection_pointer)||void 0===t?void 0:t.id)))}({propertySchema:a,groupValue:t,groupBy:n,getRecordModel:o,relativeVariableResult:i,getRecordRole:s}):"location"===l?function(e,t,n){if(!e||!e.value)return!0;if("location"!==t.type||"location"!==e.type)return!1;const o=n(e.value);return Boolean(o)}(t,n,o):!(!(0,r().r4)(l)&&"checkbox"!==l)||void(0,v().HB)(l)}function N(e){var t;const n=h().default.checkGate({gateName:"db_ux_chrome"}),o=null===(t=e.board_columns_by)||void 0===t?void 0:t.disableBoardColorColumns;return void 0===o?!n:o}function L(e){const{environment:t,groupFormat:n,schema:i,format:s,theme:l,ignoreDisableColorColumns:c}=e,d=!c&&N(s);if(s.collection_group_by||!d){if(n){const e=i[n.property];if(e&&!d){const i=n.value;if((0,a().lx)(e)){const t=(e.options||[]).find((e=>e.value===i.value));return(0,g().Q)(l,null==t?void 0:t.color)}if("status"===e.type&&"status"===i.type){var u,p;let t;if("by_group"===(null===(u=i.value)||void 0===u?void 0:u.type)){var m;const n=i.value.group;var f;if(t=null===(m=e.groups)||void 0===m||null===(m=m.find((e=>e.name===n)))||void 0===m?void 0:m.color,void 0===t)t=null===(f=(0,a().D)(e.name,S().A.getIntl()).groups)||void 0===f||null===(f=f.find((e=>e.name.toLowerCase()===n.toLowerCase())))||void 0===f?void 0:f.color}else if("by_option"===(null===(p=i.value)||void 0===p?void 0:p.type)){var v;const n=i.value.option;t=null===(v=e.options)||void 0===v||null===(v=v.find((e=>e.value===n)))||void 0===v?void 0:v.color}return(0,g().Q)(l,t)}if("relation"===e.type&&"relation"===i.type&&(0,r().zx)(i.value)){const n=(0,w().m3)(e,t),r=(0,w().D3)(e,t),a=null==n?void 0:n.getPropertyMapping(),s=null==a?void 0:a[o().Hx.StatusV2],c=r&&s&&r[s];if(c&&"status"===c.type){var h;const e=i.value.value.variable,t=null===(h=c.options)||void 0===h||null===(h=h.find((t=>t.id===e)))||void 0===h?void 0:h.color;if(t)return(0,g().Q)(l,t)}}}}return(0,g().Q)(l,"default")}}function O(e){return!("board"===e.viewType&&"board_columns_by"===e.groupByKey)&&"chart"!==e.viewType}function U(e){const{stores:t,collectionContextStore:n}=e,o=n.collectionStoresStore.state.map((e=>e.id));return"collectionTypedView"===n.contextType?t.filter((e=>{const t=e.getAssociatedCollectionStore();return t&&o.includes(t.id)})):t}const F=(0,m().YK)({manual:{defaultMessage:"Manual",id:"database.viewSettings.groupTab.sortType.manual"},ascending:{defaultMessage:"Ascending",id:"database.viewSettings.groupTab.sortType.ascending"},descending:{defaultMessage:"Descending",id:"database.viewSettings.groupTab.sortType.descending"},alphabetical:{defaultMessage:"Alphabetical",id:"database.viewSettings.groupTab.sortType.alphabetical"},reverseAlphabetical:{defaultMessage:"Reverse alphabetical",id:"database.viewSettings.groupTab.sortType.reverseAlphabetical"},oldestFirst:{defaultMessage:"Oldest first",id:"database.viewSettings.groupTab.sortType.chronological"},newestFirst:{defaultMessage:"Newest first",id:"database.viewSettings.groupTab.sortType.reverseChronological"}});function V(e,t){return"manual"===t?F.manual:"ascending"===t?(0,r().Ik)(e)||"formula"===e.type&&"date"===e.groupBy.type?F.oldestFirst:(0,r().Vh)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?F.alphabetical:F.ascending:"descending"===t?(0,r().Ik)(e)||"formula"===e.type&&"date"===e.groupBy.type?F.newestFirst:(0,r().Vh)(e)||"relation"===e.type||"select"===e.type||"multi_select"===e.type||"formula"===e.type&&"text"===e.groupBy.type?F.reverseAlphabetical:F.descending:void(0,v().HB)(t)}function j(e,t,n){const{visibleGroups:o,hiddenGroups:i}=e;if((0,b().Mw)({collectionContextStore:t,isForColumnGroups:n}))return!0;const r=0===o.length&&!t.shouldShowSpinnerStore.state||o.length>0;if("v2"===e.version)return e.hasMore&&r;return t.boardColumnsLimitStore.state<e.total-i.length&&r}function z(e){const{disableReorder:t,groupByKey:n,format:o,canConfigureBlock:i,isMobile:a}=e;if(a)return!1;if(t)return!1;if(!i)return!1;if("chart_config"===n)return!t;const s=o[n];if(!s)return!1;return(0,r().Nf)(s).includes("manual")}},10984:(e,t,n)=>{n.d(t,{$P:()=>m,AI:()=>a,El:()=>p,HO:()=>c,OX:()=>d,RL:()=>b,aV:()=>_,bw:()=>h,dL:()=>u,jR:()=>g,sP:()=>f,tL:()=>l,wb:()=>v,y4:()=>s});var o=()=>n(979340),i=()=>n(807778),r=()=>n(749240);function a(){var e;return o().Vm(null===(e=r().subscriptionDataStoreInstance.state)||void 0===e?void 0:e.subscriptionTier)}function s(){return o().y4(a())}function l(){return o().tL(a())}function c(){return o().HO(a())}function d(){return o().OX(a())}function u(){return o().dL(a())}function p(){return o().El(a())}function m(){return o().$P(a())}function g(){return o().jR(a())}function f(){return o().sP(a())}function v(){return o().wb(a())}function h(e){return o().Kv(a(),e)}function _(e){return e?(0,i().kh)()?o().M2:o().f(e.subscriptionTier??"free"):0}function b(e){let{salesStatus:t,packagingChangesEnabled:n}=e;return n&&"self_serve"===t}},12145:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue({open:!1,isExistingUser:!0},{name:"PerfmarkTrialIneligibleToastStore"})},12974:(e,t,n)=>{n.d(t,{M:()=>d,P:()=>u});n(944114),n(898992),n(803949),n(581454);var o=()=>n(584262),i=()=>n(612740),r=()=>n(921940),a=()=>n(980208),s=()=>n(780054),l=()=>n(37433),c=()=>n(630116);function d(e,t){if(!t)return;const n=t.id,l=(0,a().rf)({userId:e,spaceId:n}),d=c().Bv.createChildStore(t,(0,i().iL)({blockId:l,spaceId:n}));return null!=d&&d.isDefined()?a().MN(e,n,d.getRecordModel):(0,r().A)({pageId:l,baseUrl:s().A.domainBaseUrl,pageVisitSource:o().y8.MentionInPage})}function u(e){const t=[],n=[],o=[];e.forEach((e=>{const i=(0,l().getTeamMemberCountAndSampleUserIds)(e),r={memberCount:(null==i?void 0:i.memberCount)||0,teamStore:e};e.isDefault()||0===r.memberCount?o.push(r):r.memberCount&&r.memberCount>1?t.push(r):r.memberCount&&1===r.memberCount&&n.push(r)}));return[...t.sort(((e,t)=>e.memberCount-t.memberCount)),...n,...o].map((e=>e.teamStore))}},13679:(e,t,n)=>{n.d(t,{A:()=>k});n(898992),n(737550);var o=n(296540),i=()=>n(17022),r=()=>n(847249),a=()=>n(401497),s=()=>n(100622),l=()=>n(496603),c=()=>n(778417),d=()=>n(501020),u=()=>n(38337),p=()=>n(753199),m=()=>n(645873);const g={SelectableHoverMenuOverlay:new(m().O2)("SelectableHoverMenuOverlay",(()=>Promise.all([n.e(96346),n.e(16471),n.e(85864),n.e(92845),n.e(71718),n.e(21194),n.e(17989),n.e(90625),n.e(37580),n.e(51646)]).then(n.bind(n,193924))))},f=(0,m()._h)(g.SelectableHoverMenuOverlay,(e=>e.default));var v=()=>n(93658),h=()=>n(666710),_=()=>n(502438),b=n(474848);const y=10;function S(e){let t=!0;if(e.length<=y){const{selectableElementRectMap:n}=i().A.withListenerIgnored((()=>h().default.getState()));t=e.some((e=>function(e,t){const n=t.target instanceof Element?t.target:t.target.parentElement;if(!n)return!0;if(n.closest(`.${u().zN1}`))return!1;const o=n.closest(`.${u().rb2}`);if(!o)return!0;const i=e.get(o);if(!i)return!0;const r=o.getBoundingClientRect();return!(i.x===r.x&&i.y===r.y&&i.width===r.width&&i.height===r.height)}(n,e)))}t&&c().AP()}function w(e){const{isDefaultContainer:t}=e,{currentRect:n,isActive:o,showSelectionRect:i}=(0,r().K8)((()=>v().default.state.isActive?v().default.state:{currentRect:void 0,isActive:!1,showSelectionRect:!1}),[]),l=(0,a().IS)((()=>({selection:{position:"absolute",pointerEvents:"none",backgroundColor:s().Ay.blueWithAlpha(.14),border:"1px solid transparent",left:null==n?void 0:n.left,top:null==n?void 0:n.top,width:n?n.right-n.left:0,height:n?n.bottom-n.top:0}})),[n]);return o&&i&&t?(0,b.jsx)("div",{style:l.selection}):null}const k=function(e){const{render:t}=e,i=(0,o.useRef)(null),a=(0,o.useRef)({isPeekRenderer:()=>e.isPeekRenderer??!1,getProps:()=>e,getNode:()=>i.current});(0,o.useLayoutEffect)((()=>{a.current.isPeekRenderer=()=>e.isPeekRenderer??!1,a.current.getProps=()=>e,a.current.getNode=()=>i.current}),[e]);const s=(0,n(484714).v3)();(0,n(790748).b)(n(696152).A,(()=>a.current),[]),(0,o.useLayoutEffect)((()=>{const t=a.current;if(e.isDefaultContainer){const n=e.isRootContainer?l().KC([t],_().default.state.defaultContainerStack||[]):l().KC(_().default.state.defaultContainerStack||[],[t]);_().default.setState({..._().default.state,defaultContainerStack:n,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const n=e.isRootContainer?l().KC([t],_().default.state.droppableContainerStack||[]):l().KC(_().default.state.droppableContainerStack||[],[t]);_().default.setState({..._().default.state,droppableContainerStack:n})}let n;return c().sf(),i.current&&(n=new MutationObserver(S),n.observe(i.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),()=>{if(e.isDefaultContainer){const e=l().FF(_().default.state.defaultContainerStack||[],t);_().default.setState({..._().default.state,defaultContainerStack:e,pivot:void 0,anchor:void 0,anchorContainer:void 0})}if(e.droppable){const e=l().FF(_().default.state.droppableContainerStack||[],t);_().default.setState({..._().default.state,droppableContainerStack:e})}n&&n.disconnect()}}),[a,e.droppable,e.isDefaultContainer,e.isRootContainer]);const{closestSelectable:m}=(0,o.useContext)(d().z)??{},g=(0,o.useCallback)((t=>{const{device:o}=s;e.disableRectangularSelection||0!==t.button||(o.isPhone?(0,p().SQ)({event:t,context:p().y$.EditorMouseDown,callback:()=>{c().IU({environment:s}),(0,n(404779).y)(),n(919878).wr()}}):(0,p().SQ)({event:t,context:p().y$.EditorMouseDown,callback:()=>{if(t.target instanceof Element){if(t.target.closest("button")||t.target.closest('[role="button"]'))return}1!==t.button&&(t.preventDefault(),n(257615).jD({environment:s,target:t.target,startX:t.clientX,startY:t.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1}))}}))}),[s,e.disableRectangularSelection]),y=(0,o.useCallback)((t=>{(function(e){return h().default.hasBeenUpdatedSince(e.timeStamp)})(t)||!e.store.canEdit()||e.store instanceof n(630116).Bv&&(0,n(337567).dL)(e.store)||(0,p().SQ)({event:t,context:p().y$.EditorClick,callback:()=>{var o;if(null!==(o=_().default.getDefaultContainerFromTarget(t.target))&&void 0!==o&&o.isPeekRenderer()||n(661920).Cx(s),!n(592678).Zm()&&!e.disableEditNearestBlock){const{clientX:e,clientY:o,target:i}=t;n(908006).default.afterNextFlush((()=>{n(751156).createAndCommit({userAction:"SelectableContainer.click",environment:s,canUndo:!0,perform:t=>n(725614).editNearestBlockOrInsertIfAtBottomOfPage(s,{x:e,y:o,target:i instanceof Element?i:void 0},t)})}))}}})}),[s,e.disableEditNearestBlock,e.store]),k=(0,r().K8)((()=>Boolean(v().default.state.isActive&&v().default.state.defaultContainer===a.current)),[]),I=(0,r().K8)((()=>(0,b.jsx)("div",{className:u().QHh,style:{display:"contents"},ref:i,children:t({selectableEvents:{onMouseDown:g,onClick:y},selectableHoverMenuOverlay:(0,b.jsx)(f,{selectableContainer:a.current})})})),[y,g,t]),x=(0,o.useMemo)((()=>({selectableContainer:a.current,closestSelectable:m})),[m]);return(0,b.jsx)(d().v,{value:x,children:(0,b.jsx)(n(177158).A,{open:k,origin:I,children:(0,b.jsx)(w,{isDefaultContainer:e.isDefaultContainer})})})}},13898:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(959013),i=()=>n(464708),r=n(474848);function a(e){return(0,r.jsx)(i().A,{color:"gray",style:e.style,content:(0,r.jsx)(o().sA,{id:"betaBadgeComponent.label",defaultMessage:"Beta"})})}},14307:(e,t,n)=>{n.r(t),n.d(t,{isConnected:()=>r().UJ,isConnecting:()=>r().XE,resetRecordSubscriptions:()=>a,updateEnvironment:()=>s});var o=()=>n(484975),i=()=>n(643893),r=()=>n(343473);function a(){i().A.reset()}function s(e){i().A.updateEnvironment(e),o().A.updateEnvironment(e)}},16006:(e,t,n)=>{n.d(t,{A:()=>p});n(944114),n(898992),n(581454),n(908872);var o=n(296540),i=()=>n(847249),r=()=>n(401497),a=()=>n(558842),s=()=>n(284371),l=()=>n(71304),c=()=>n(115512),d=n(474848);function u(e,t){const{store:u,highlighter:p,maxLength:m,placeholder:g,shouldWrap:f,enableHover:v,showTooltipWhenTruncated:h,disableTooltip:_,removeIfEmpty:b}=e,y=(0,n(484714).v3)(),S=(0,n(959013).tz)(),w=(0,i().K8)((()=>n(508496).default.checkGate({gateName:"record_title_rich_text"})?(0,l().Jq)(u,S,y):(0,l().Qe)(u,S,y,!0)),[y,S,u]),k=(0,i().K8)((()=>u.canRead()),[u]),I=(0,i().K8)((()=>{if(!k)return(0,d.jsx)("span",{children:(0,n(612740).mA)(S)});if(w){const e=(0,a().Gn)(w);let t,o=0;if(m){t=[];for(const n of e)if("string"==typeof n){if(o+n.length>m){t.push(`${n.slice(0,m-o)}…`);break}t.push(n),o+=n.length}else{if(o+1>m){t.push("…");break}t.push(n),o+=1}}else t=e;return p?t.map(((e,t)=>"string"==typeof e?(0,d.jsx)(n(720128).A,{text:e,highlighter:p},t):e)):t.map(((e,t)=>"string"==typeof e?(0,d.jsx)(n(288722).A,{children:e},t):e))}return g||(0,l().gG)(u,S)}),[p,S,m,g,u,w,k]),x=(0,o.createRef)();(0,o.useImperativeHandle)(t,(()=>({getNode:()=>x.current})));const[A,C]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(f)return;if(!v)return;if(!x.current)return;let e=0;if(h&&m&&w){e=(0,a().Gn)(w).reduce(((e,t)=>e+("string"==typeof t?t.length:1)),0)}const t=h&&m&&w&&e>m,n=x.current.scrollWidth>x.current.clientWidth;C(!_&&(t||n))}),[f,v,x,m,w,h,_]);const T=function(e){return(0,r().IS)((t=>({root:{...e.maxLines&&(0,c().pA)(e.maxLines),...!e.shouldWrap&&{...s().RC},...e.underline&&{backgroundImage:`\n\t\t\t\t\tlinear-gradient(\n\t\t\t\t\t\tto right,\n\t\t\t\t\t\t${t.darkDividerColor} 0%,\n\t\t\t\t\t\t${t.darkDividerColor} 100%\n\t\t\t\t\t)\n\t\t\t\t`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"},...e.style}})),[e.shouldWrap,e.underline,e.style,e.maxLines])}(e);return b&&!w?null:f?(0,d.jsx)("span",{id:e.id,ref:x,className:"notranslate",style:T.root,children:I}):A?(0,d.jsx)(n(859428).A,{placement:n(962730).W.Bottom,render:t=>(0,d.jsx)("span",{id:e.id,ref:x,className:"notranslate",style:T.root,...t,children:I}),renderTooltip:()=>I}):(0,d.jsx)("div",{id:e.id,ref:x,className:"notranslate",style:T.root,children:I})}const p=o.memo(o.forwardRef(u))},16990:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isPinned:!1}}}const i=new o},17090:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(803949);class o extends(()=>n(757695))().default{getInitialState(){return{isScrolling:!1,scrollTop_DEPRECATED:0,elementRef:{current:null},element:null}}measureSize(){const e=this.state.elementRef;if(e.current){const t=e.current;let o=n(397248).z8.from(t.getBoundingClientRect());n(297727).A.forEach((e=>{const n=e.getNode();n&&t.contains(n)&&(o=e.customizeEdgeScrollRect(o))}));const i={...this.state,clientRect:o,scrollTop_DEPRECATED:t.scrollTop};return n(496603).n4(this.state,i)||this.setState(i),o}}}const i=o},17945:(e,t,n)=>{n.d(t,{l:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("threeColumns",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25H6.5v-10H4.25zm7.75 10H8v-10h4v10zm1.5 0h2.25c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25H13.5v10z",clipRule:"evenodd"})})},19575:(e,t,n)=>{n.d(t,{SG:()=>u,cg:()=>d,cz:()=>p,lK:()=>c});var o=()=>n(449506),i=()=>n(640653),r=()=>n(144114),a=()=>n(351360),s=()=>n(59862),l=()=>n(221424);function c(e){let{initialQuestion:t,openedFrom:n}=e;s().A.setState({open:!0,initialQuestion:t,openedFrom:n})}async function d(e){let{environment:t,data:n,urlAnalytics:r}=e;const s=g(r),l=await m(t),c=a().default.state.currentSpaceStore;return await o().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"contactSalesInApp",firstName:n.firstName,lastName:n.lastName,email:n.email,companyName:c?(0,i().GK)(t,c):"Untitled",companySize:v(n.companySize),country:l??"US",demoReason:h(n.question),message:n.additionalFeedback??void 0,ipCountry:l,...s}})}async function u(e){let{environment:t,data:n,urlAnalytics:r}=e;const{externalOrgSummary:s}=n,l=g(r),c=await m(t),d=a().default.state.currentSpaceStore,u=a().default.state.currentUserStore;if(!u||!d)return;const p=u.getName(),v=u.getEmail();if(!p||!v)return;const h=function(e){return"domain"in e?e.domain:void 0}(s),{firstName:_,lastName:b}=function(e){const[t,n=""]=e.trim().split(/\s+/);return{firstName:t,lastName:n}}(p);return await o().callApi({eventName:"submitMarketoForm",environment:t,data:{type:"pingSales",spaceId:d.id,firstName:_,lastName:b,email:v,domain:h,companyName:d?(0,i().GK)(t,d):"Untitled",companySize:f(s),country:c??"US",ipCountry:c,...l}})}function p(){l().L.setState({open:!0})}async function m(e){return await(0,r().k_)(e)}function g(e){const{utm_source:t,utm_medium:n,utm_content:o,utm_campaign:i,utm_term:r,gclid:a}=e??{};return{gclid:a,utm_source:_(t),utm_medium:_(n),utm_content:_(o),utm_campaign:_(i),utm_term:_(r)}}function f(e){const t="company_employee_count"in e?parseInt(e.company_employee_count??0):0;return t<100?1:t<299?100:t<1999?300:2e3}function v(e){switch(e){case"<100":return 1;case"100-299":return 100;case"300-1999":return 300;case"2000+":return 2e3}}function h(e){switch(e){case"interest_in_enterprise":case"interest_in_business":return"enterprise";case"live_demo":return"demo";case"plan_help":return"pricing";case"manage_guests":case"other":return"other"}}function _(e){return"none"!==e?e:void 0}},19794:(e,t,n)=>{n.d(t,{y:()=>w,A:()=>x});n(944114),n(898992),n(672577),n(430670);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(959013),l=()=>n(496603),c=()=>n(534177),d=()=>n(416726),u=()=>n(778417),p=()=>n(725614),m=()=>n(813297),g=()=>n(989423),f=()=>n(891078),v=()=>n(645873);class h extends(()=>n(757695))().default{getInitialState(){return{editing:!1,suppressErrorsForActionIds:[]}}startEditing(e){this.setState({editing:!0,suppressErrorsForActionIds:[],placement:e.placement})}stopEditing(){this.setState({editing:!1,suppressErrorsForActionIds:[]})}suppressErrorsForAction(e){this.setState({...this.state,suppressErrorsForActionIds:l().sb([...this.state.suppressErrorsForActionIds,e])})}}const _=h;var b=()=>n(611371),y=()=>n(859428),S=n(474848);const w=(0,s().YK)({addIconButtonAriaLabel:{defaultMessage:"Add icon",id:"buttonBlock.button.addIconButtonAriaLabel"},editButtonAriaLabel:{defaultMessage:"Edit button",id:"buttonBlock.button.editButtonAriaLabel"},buttonPlaceholder:{defaultMessage:"New button",id:"buttonBlock.button.placeholder"},buttonInsufficientPermissions:{defaultMessage:"You don’t have permission to run this button",id:"buttonBlock.button.insufficientPermissions"},buttonLoading:{defaultMessage:"Loading...",id:"buttonBlock.button.loading"},clickToEdit:{defaultMessage:"Click to edit button",id:"buttonBlock.button.clickToEdit"},deprecatedActionTooltip:{defaultMessage:"An action used in this button is no longer available. Click to submit feedback.",id:"buttonBlock.button.deprecatedActionTooltip"},buttonDisabledDuringTranslation:{id:"buttonBlock.button.disabledDuringTranslation",defaultMessage:"Cannot run button during translation."}});function k(e,t){const{store:a}=e,s=(0,r().uB)(void 0,_),l=(0,i().v3)(),[c,d]=(0,n(997583).z)(),g=(0,o.useRef)(null),v=(0,r().K8)((()=>!a.canEdit()||e.disabled),[a,e.disabled]),h=(0,r().K8)((()=>a.getAutomationPointer()),[a]);(0,n(845715).K)(a,h);const b=(0,o.useCallback)((e=>{var t;p().clear({environment:l}),u().IU({environment:l});(d||(null===(t=c.current)||void 0===t?void 0:t.getBoundingClientRect().width)||0)<300&&!l.device.isPhone&&e?s.startEditing({placement:{type:"popup",originRect:e}}):s.startEditing({placement:{type:"inline"}})}),[s,c,d,l]),y=(0,S.jsxs)(n(155004).s,{allowSelectionWithin:!0,style:{display:"flex"},ref:c,children:[(0,S.jsxs)("div",{style:{flexGrow:1,flexShrink:1,minWidth:0},children:[(0,S.jsx)(I,{store:a,buttonBlockStore:s,onConfigure:b,ref:g,disabledFromEditing:v}),(0,S.jsx)(m().oY,{store:a,disabled:v,buttonBlockStore:s})]}),(0,S.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!0})]});return(0,f().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"button",getNode:()=>c.current,getBlockStore:()=>e.store,activate(){var e;null===(e=g.current)||void 0===e||e.activate()},handleCreated(){var e;b(null===(e=g.current)||void 0===e?void 0:e.getBoundingClientRect())}})),[c,b,e.store]),y)}const I=o.forwardRef((function(e,t){const{store:h,buttonBlockStore:_,onConfigure:k,disabledFromEditing:I}=e,x=(0,s().tz)(),A=(0,i().v3)(),{isMobile:C}=(0,i().Y0)(),{value:T}=(0,v().fJ)(n(862292).T.formulas),{value:M}=(0,v().fJ)(m().QV.automationTypecheck),{value:P}=(0,v().fJ)(m().QV.automationActionRegistry),{value:B}=(0,v().fJ)(m().QV.automations),[R,E]=(0,o.useState)(!1),[D,N]=(0,o.useState)(!1),L=(0,r().K8)((()=>h.getAutomationStore()),[h]),O=(0,r().K8)((()=>(null==L?void 0:L.getNameStore().getValue())??""),[L]),U=(0,r().K8)((()=>h.getFormat().block_color||"default"),[h]),F=(0,r().K8)((()=>(0,b().EF)(A)),[A]),V=(0,n(100622).eA)(U,(0,a().DP)()),j=V.background,z=V.color,H=V.hoveredBackground,W=V.pressedBackground,q=(0,r().K8)((()=>null==L?void 0:L.getIconStore().getValue()),[L]),K=function(e){const{store:t,automationStore:o,buttonBlockStore:i,automationsModule:a}=e,s=null==a?void 0:a.automationErrorHelpers,u=(0,n(963589).X)("automation_updated_error_states"),p=(0,n(840094).OW)({store:t,automationStore:o}),m=(0,r().K8)((()=>"translate_locked"===n(77246).Uv.getMode(t)),[t]),g=!(0,r().O$)(n(227440).e);return(0,r().K8)((()=>{if(g)return{type:"disabled",tooltip:d().AY.unavailableOfflineTooltip};if(m)return{type:"disabled",tooltip:w.buttonDisabledDuringTranslation};const e=null==p?void 0:p.state,t=null==o?void 0:o.getDeprecatedActionFormUrl();if(t)return{type:"has_deprecated_action",formUrl:t,tooltip:w.deprecatedActionTooltip};if(!e||!s||"loading"===e.executionPermissionStatus)return{type:"loading",tooltip:w.buttonLoading};if("unknown"===e.executionPermissionStatus)return{type:"disabled"};if("insufficient"===e.executionPermissionStatus){if("insufficient"===e.editPermissionStatus)return{type:"disabled",tooltip:w.buttonInsufficientPermissions};{var r;const t=(null===(r=e.typecheckResult)||void 0===r?void 0:r.value.actionValidationFailures)??{},n=Object.values(t).flatMap((e=>e)).find((e=>!1===(null==e?void 0:e.execute))),o=n?s.getErrorMessagesForActionValidationFailure({failure:n,hasAutomationUpdatedErrorStatesEnabled:u}):void 0;return{type:"disabled",tooltip:(null==o?void 0:o.forButtonTooltip)??w.buttonInsufficientPermissions,subtitleTooltip:null==o?void 0:o.forButtonSubtitleTooltip}}}if("sufficient"===e.executionPermissionStatus){if(0===((null==o?void 0:o.getActionIds())??[]).length)return{type:"error",tooltip:s.automationErrorMessages.noActions,hideErrorIconWhenEditorIsOpen:!0};const t=e.typecheckResult.value.actionValidationFailures,r=[];let a=!1;for(const[e,n]of Object.entries(t))n&&(i.state.suppressErrorsForActionIds.includes(e)?a=!0:r.push(...n));const c=l().$1(r);if(c)return{type:"error",tooltip:s.getErrorMessagesForActionValidationFailure({failure:c,hasAutomationUpdatedErrorStatesEnabled:u}).forButtonTooltip};return{type:"enabled",hasSuppressedErrors:a,urlToPreview:(0,n(157857).nD)(o)}}(0,c().HB)(e)}),[s,p,o,i,u,m,g])}({store:h,automationStore:L,buttonBlockStore:_,automationsModule:B}),G=(0,f().i0)(h),$=(0,f().ty)(h),Y=!F||G||$||"disabled"===K.type||"loading"===K.type||R||"error"===K.type&&I,Q=(0,r().K8)((()=>"error"===K.type&&!(K.hideErrorIconWhenEditorIsOpen&&_.state.editing)),[K,_]),Z=(0,a().IS)((e=>{const t=C?"52px":"28px";return{wrap:{display:"flex",alignItems:"center",padding:"2px 0"},configureWrap:{display:"flex",alignItems:"center",marginLeft:4},label:{pointerEvents:"none",color:z,...n(284371).RC},button:{display:"flex",gap:6,minWidth:50,maxWidth:`calc(100% - ${t})`,padding:"8px 12px",fontWeight:500,...Y?{cursor:"not-allowed"}:{}},labelPlaceholder:{color:e.text.tertiary},warningIcon:{width:16,height:16,fill:e.errorText,color:e.errorText},spinnerWrap:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",marginLeft:-4}}}),[Y,C,z]),X=(0,o.useRef)(null),J=(0,o.useCallback)((()=>{N(!0)}),[]),ee=(0,o.useCallback)((()=>{N(!1)}),[]),te=(0,o.useCallback)((()=>{var e;k(null===(e=X.current)||void 0===e?void 0:e.getBoundingClientRect())}),[k,X]),ne=(0,o.useCallback)((()=>{F||(0,b().QY)(A),_.state.editing?(_.stopEditing(),(0,g().u4)({environment:A,event:{eventName:"click_configure_button_done",eventProperties:{block_id:h.id,automation_id:null==L?void 0:L.id}}}),n(508496).default.logEvent("click_configure_button_done")):(te(),(0,g().u4)({environment:A,event:{eventName:"click_configure_button",eventProperties:{block_id:h.id,automation_id:null==L?void 0:L.id}}}))}),[_,h,L,te,F,A]),oe=(0,r().K8)((()=>{const e=h.getRecordStoreUIRoot();if(!(T&&M&&P&&L&&e instanceof n(630116).Bv))return;const t=e.isPageBlock()?e:void 0;return{automationStore:L,automationTypecheckModule:M,automationActionRegistryModule:P,blockStore:h,currentUserId:A.currentUser.id,formulasModule:T,intl:n(972435).A.getIntl(),isLoggedIn:A.currentUser.isLoggedIn(),pageStore:t,parentRecordStore:L,type:"button_block"}}),[h,T,M,P,L,A.currentUser]),ie=(0,o.useCallback)((async()=>{if(oe)if(p().clear({environment:A}),u().IU({environment:A}),"error"===K.type)I||te();else if("enabled"===K.type){if(K.hasSuppressedErrors)return void te();try{var e;E(!0);const{automationExecutionActions:t}=await m().QV.automations.load();await t.executeClientAutomation({clientContext:oe,environment:A}),null!==(e=A.mobileNative)&&void 0!==e&&e.buzz?A.mobileNative.buzz():window.navigator.vibrate(20)}finally{E(!1)}}else"disabled"===K.type||"loading"===K.type||("has_deprecated_action"===K.type?n(755636).f({environment:A,url:K.formUrl}):(0,c().HB)(K))}),[A,K,I,te,oe]);(0,o.useImperativeHandle)(t,(()=>({activate:()=>{ie()},getBoundingClientRect:()=>{var e;return null===(e=X.current)||void 0===e?void 0:e.getBoundingClientRect()}})),[ie]);const re=()=>(0,S.jsx)("div",{style:Z.spinnerWrap,children:(0,S.jsx)(n(331542).A,{})}),ae=e=>(0,S.jsx)(n(614505).B,{largeIcon:!0,disabled:!0,isEmptyPage:!1,size:20,icon:{icon:e,pointer:h.pointer},style:{marginLeft:O?-4:0}}),se=[];q&&(R||"loading"===K.type?se.push({key:"left",comp:re()}):se.push({key:"left",comp:ae(q)})),O?se.push({key:"name",comp:(0,S.jsx)("div",{style:Z.label,children:O})}):q||se.push({key:"placeholder",comp:(0,S.jsx)("div",{style:Z.labelPlaceholder,children:(0,S.jsx)(s().sA,{...w.buttonPlaceholder})})}),q||!R&&"loading"!==K.type||se.push({key:"right",comp:re()}),Q&&se.push({key:"error",comp:(0,S.jsx)("div",{children:(0,n(693954).Q)(Z.warningIcon)})});const le=e=>(0,S.jsx)(n(864943).A,{size:"lg",disabled:Y,disabledFeedback:!0,style:Z.button,ref:X,...(0,n(553965).A)(e??{},{onClick:ie}),backgroundColor:j,hoveredBackgroundColor:H,pressedBackgroundColor:W,children:se.map((e=>{let{key:t,comp:n}=e;return(0,S.jsx)(o.Fragment,{children:n},t)}))});return(0,S.jsxs)("div",{style:Z.wrap,onMouseMove:J,onMouseLeave:ee,children:[K.tooltip?(0,S.jsx)(y().A,{renderTooltip:()=>{const e=(0,S.jsx)(s().sA,{...K.tooltip});let t=null;return K.subtitleTooltip?t=(0,S.jsx)(s().sA,{...K.subtitleTooltip}):"error"!==K.type||I||(t=(0,S.jsx)(s().sA,{...w.clickToEdit})),(0,S.jsx)(m().Od,{content:e,subtitle:t})},delayThreshold:0,render:le,placement:n(962730).W.Bottom}):K.urlToPreview?(0,S.jsx)(m().Vp,{parentStore:h,renderOrigin:le,urlToPreview:K.urlToPreview}):le(),!I&&(A.device.isMobile||D)&&(0,S.jsxs)("div",{style:Z.configureWrap,children:[!Y&&"has_deprecated_action"!==K.type&&(0,S.jsx)(y().A,{renderTooltip:()=>(0,S.jsx)(s().sA,{defaultMessage:"Edit button",id:"buttonBlock.configureTemplate.button.label"}),delayThreshold:300,render:e=>(0,S.jsx)(n(285790).A,{ariaLabel:x.formatMessage(w.editButtonAriaLabel),icon:n(846899).B,onClick:ne,...e})}),A.device.isMobile&&(0,S.jsx)(n(496889).A,{tooltipContent:(0,S.jsx)(s().sA,{defaultMessage:"More actions…",id:"buttonBlock.moreActions.button.label"}),store:h,fadeIn:!1})]})]})}));const x=o.memo(o.forwardRef(k),n(821062).A)},20039:(e,t,n)=>{n.d(t,{A:()=>p});n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(284371),s=()=>n(614505),l=()=>n(16006),c=()=>n(630116),d=()=>n(898808),u=n(474848);function p(e){const{store:t,ignoreMaxLength:n,maxWidth:p,iconSize:m,emojiSize:g,titleStyle:f,iconStyle:v,highlighter:h}=e,{device:_}=(0,o().v3)(),b=m??(_.isMobile?24:20),y=g??b,{pageIcon:S,isEmptyPage:w}=(0,i().K8)((()=>({pageIcon:t.getIcon(),isEmptyPage:t instanceof c().Bv&&t.isEmptyPage()})),[t],{useDeepEqual:!0}),k=(0,r().IS)((()=>({containerStyle:{display:"flex",alignItems:"center",minWidth:0},teamRecordTitle:{maxWidth:p,...f},pageRecordTitle:{maxWidth:n?"none":p,...f},recordIconStyle:{marginRight:6,fontWeight:a().Wy.medium,...v}})),[n,p,f,v]);return t instanceof c().h4?(0,u.jsxs)("div",{style:k.containerStyle,children:[(0,u.jsx)(d().x,{disabled:!0,store:t,size:b,style:k.recordIconStyle}),(0,u.jsx)(l().A,{store:t,style:k.teamRecordTitle,highlighter:h,enableHover:!0})]}):(0,u.jsxs)("div",{style:k.containerStyle,children:[S?(0,u.jsx)(s().B,{disabled:!0,icon:S,isEmptyPage:w,size:b,emojiSize:y,style:k.recordIconStyle,largeIcon:!0}):null,(0,u.jsx)(l().A,{store:t,style:k.pageRecordTitle,highlighter:h,enableHover:!0})]},`breadcrumb-recordtitle-${t.id}`)}},20199:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{elector:void 0,broadcastChannel:void 0,localSearchableBlocksCache:void 0,version:void 0}}}const i=new o;(0,n(604341).exposeDebugValue)("localSearchablePagesStore",i);const r=i},20313:(e,t,n)=>{n.d(t,{Ag:()=>h,OL:()=>v,PY:()=>_,Xs:()=>g,eM:()=>y,mP:()=>f,qq:()=>b});n(944114),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454);var o=()=>n(507707),i=()=>n(624919),r=()=>n(179034),a=()=>n(708830),s=()=>n(741237),l=()=>n(534177),c=()=>n(722101),d=()=>n(695625),u=()=>n(502438),p=()=>n(186445),m=()=>n(713972);function g(e,t){return(0,a().Qe)(t,(t=>t.value.store===e))}function f(e,t){const n=g(e,[t]);if(n&&n.length>0)return n[n.length-1]}function v(e){const t=e.container??u().default.getCurrentDefaultContainer();if(!t)return new(a().C2)([]);const n=[];d().T.forEach((o=>{const i=o.getNode();if(!i)return;if(o.getContextSelectableContainer()!==t)return;if(!(o.props.canSelect||e.includeNonSelectableListContainer&&o.props.isListContainer))return;const r=o.props.store;n.push({node:i,store:r,component:o})}));var i;return(i=n,(0,a().Cu)({values:i,compareOrder:(e,t)=>(0,o().A)(e.node,t.node),isAncestor:(e,t)=>m().gR(e.node,t.node)}))||new(a().C2)([])}function h(e){let{rootStore:t,...n}=e;const o=t||(0,p().ZO)();if(!o)return;const i=v(n);return new(a().PH)({store:o,node:void 0,component:void 0},i.children)}function _(e){const{rootStore:t,root:n,target:o}=e,i=(0,a().Qe)(n.children,(e=>e===o));if(void 0===i)return;const r=[t];let s=t;for(const a of i){const e=a.value.store;if(!e)return;const t=s.getTransclusionReferenceTargetStore()??s;let n=t.getContentStores();const o=t.getAutomationStore();if(o){const e=o.getActionStores();n=n.concat(e.flatMap((e=>e.getBlockStores())))}const i=n.find((t=>t.id===e.id));if(!i)return;r.push(i),s=i}return r}function b(e){var t;const{treeOperation:n,deleteFrom:o}=e,i=[],a=null===(t=n.deleteFromParent.value.store)||void 0===t?void 0:t.getContentStore(),s=n.deletingChildren.map((e=>e.value.store)).filter(l().O9);for(const l of s){const e=l.getRecordStoreUIParent(),t=e&&e.table===r().ev&&1===e.path.length&&"content"===e.path[0]&&e,n="record-store-parent"===o&&t||a;n&&i.push({parent:n,childToRemove:l})}return i}function y(e){const{transaction:t,treeOperation:n,deleteFrom:o,observer:i,preferHighLevelOperations:r}=e;switch(n.operation){case"delete":return void b({treeOperation:n,deleteFrom:o}).forEach((e=>{let{parent:o,childToRemove:r}=e;const a={parentStore:o,childToRemoveStore:r,transaction:t};c().TF(a),null==i||i.onRemove(n,a)}));case"insert":{var a;const e=n.insertIntoParent.value.store,o="transclusion_reference"===(null==e?void 0:e.getType())?e.getTransclusionReferenceTargetStore():e,i=null==o?void 0:o.getContentStore(),s=null===(a=n.adjacentSibling)||void 0===a?void 0:a.value.store,l=n.insertChildren.map((e=>e.value.store));("listAfter"===n.direction&&s||"listBefore"===n.direction&&!s)&&l.reverse();for(const a of l)if(i&&a)if("listAfter"===n.direction){const e={insertStore:a,parentStore:i,transaction:t,afterStore:s,preferHighLevelOperations:r};c().WH(e)}else{const e={insertStore:a,parentStore:i,transaction:t,beforeStore:s};c().nc(e)}return}case"move":for(const e of(0,s().E)(n))y({transaction:t,treeOperation:e,deleteFrom:o,observer:void 0,preferHighLevelOperations:r});return void(null==i||i.onMove(n));default:(0,l().HB)(n)}}!function(){const{span:e,object:t,div:n,CONTAINER_STYLE:o}=i().iY;(0,i().EX)({canFormat:e=>Boolean(e&&e instanceof a().PH),header:(i,r)=>e(o,e({},t(i,{useDefaultFormatter:!0})),n({},t(i.value.store)),i.children.length?n({},t(i.children)):void 0),hasBody:(e,t)=>!1,body:e=>null})}()},20489:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{loginType:"email",email:"",password:"",showPassword:!1,signUpLinkSent:!1,hiddenPasscode:!1,forceAdminSamlLogin:!1}}isGoogle(){return"google"===this.state.loginType}isEmail(){return"email"===this.state.loginType}isReverifying(){return"reverify"===this.state.loginType}isTemporaryPasscode(){return"temporary"===this.state.loginType}isExclusiveLoginLinkTemporaryPasscode(){return"temporary"===this.state.loginType&&Boolean(this.state.hiddenPasscode)}isPassword(){return"password"===this.state.loginType}isForgotPassword(){return"forgot"===this.state.loginType}isPasswordResetSent(){return"reset"===this.state.loginType}isSaml(){return"saml"===this.state.loginType}isMfa(){return"mfa"===this.state.loginType}isMicrosoftLogin(){return"microsoft_login"===this.state.loginType}isMicrosoftVerification(){return"microsoft_verification"===this.state.loginType}isTemporaryPasscodeOrMicrosoftVerification(){return"temporary"===this.state.loginType||"microsoft_verification"===this.state.loginType}}const i=o},20498:(e,t,n)=>{n.d(t,{D4:()=>T,Hr:()=>C,IM:()=>P,NV:()=>M,Nl:()=>B,Q2:()=>x,bX:()=>a,jl:()=>A,lW:()=>k});n(581454),n(814603),n(147566),n(198721);var o=()=>n(496603),i=()=>n(939768),r=()=>n(799288);const a={headers:{authorization:{prefix:"Bearer"},hmac:!1},body:{path:["event"]},urlValidator:function(e){return Boolean((0,i().q7)(e))}},s=(0,n(959013).YK)({nightfall:{id:"temporaryWebhookIntegrationConfig.taglines.nightfall",defaultMessage:"Simplify security and compliance with Nightfall AI"},panther:{id:"temporaryWebhookIntegrationConfig.taglines.panther",defaultMessage:"A SIEM built for speed, scale, and flexibility"},sumologic:{id:"temporaryWebhookIntegrationConfig.taglines.sumologic",defaultMessage:"Secure and protect against modern threats with cloud-native log analytics"},runreveal:{id:"temporaryWebhookIntegrationConfig.taglines.runreveal",defaultMessage:"A SIEM you can love"},splunk:{id:"temporaryWebhookIntegrationConfig.taglines.splunk",defaultMessage:"The unified security and observability platform"},datadog:{id:"temporaryWebhookIntegrationConfig.taglines.datadog",defaultMessage:"Detect, investigate, and automate response to threats at any scale"},polymer:{id:"temporaryWebhookIntegrationConfig.taglines.polymer",defaultMessage:"Protect sensitive data across cloud apps and reduce the risk of exposure"},onna:{id:"temporaryAdminIntegrationConfig.taglines.onna",defaultMessage:"Connect. Find. Act."},hanzo:{id:"temporaryAdminIntegrationConfig.taglines.hanzo",defaultMessage:"Manage Risk Everywhere Work Is Done"},aware:{id:"temporaryAdminIntegrationConfig.taglines.aware",defaultMessage:"Secure Your Digital Workplace. Drive Growth. Scale AI."},drata:{id:"temporaryAdminIntegrationConfig.taglines.drata",defaultMessage:"Continuous compliance automation platform"},drataStaging:{id:"temporaryAdminIntegrationConfig.taglines.drataStaging",defaultMessage:"Drata (Staging) tagline"},metomic:{id:"temporaryAdminIntegrationConfig.taglines.metomic",defaultMessage:"Metomic integration tagline"},custom:{id:"temporaryAdminIntegrationConfig.taglines.custom",defaultMessage:"Custom webhook integration that only requires a destination URL."},notionInternal:{id:"temporaryAdminIntegrationConfig.taglines.notionInternal",defaultMessage:"Integration for Notion services to talk to each other."}}),l={id:"a2768733-a1f9-4174-84fa-40a9ff2053d7",name:"nightfall",icon:"/images/external_integrations/nightfall-logo.svg",website_url:"https://www.nightfall.ai/",signupUrl:"https://www.nightfall.ai/integrations/notion",privacy_policy_url:"https://www.nightfall.ai/privacy",terms_of_use_url:"https://www.nightfall.ai/terms",developer_name:"Nightfall AI",installation_info_url:void 0,type:"dlp",tagline:s.nightfall,webhookUrl:"https://notion.nightfall.ai/notion/v1/event",customization:{headers:{hmac:!0}},allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_listUsers"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/nightfall-ai",redirectUri:"https://app.nightfall.ai/dashboard"},c={id:"fb50a39e-955a-4b9c-9ffb-49587de2a79c",name:"panther",icon:"/images/external_integrations/panther-logo.png",website_url:"https://panther.com/",signupUrl:"https://panther.com/product/request-a-demo/",privacy_policy_url:"https://panther.com/privacy-policy/",terms_of_use_url:"https://panther.com/terms-of-service/",developer_name:"Panther",installation_info_url:void 0,type:"siem",customization:{headers:{hmac:!0},urlValidator:function(e){if(!e||!(0,i().q7)(e))return!1;const t=new URL(e);if("https:"!==t.protocol)return!1;if(!t.pathname.startsWith("/http/"))return!1;const o=t.pathname.replace("/http/","");return!!(0,n(498212).iv)(o)}},tagline:s.panther,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0,integrationGalleryUrl:"https://www.notion.so/integrations/panther"},d={id:"3ecda536-3b09-4218-a756-bda416c512d7",name:"sumologic",icon:"/images/external_integrations/sumo-logic-logo.jpeg",website_url:"https://www.sumologic.com/",signupUrl:"https://www.sumologic.com/sign-up/",privacy_policy_url:"https://www.sumologic.com/privacy-statement/",terms_of_use_url:"https://www.sumologic.com/terms-conditions/",developer_name:"Sumo Logic",installation_info_url:void 0,type:"siem",tagline:s.sumologic,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/sumo-logic",customization:{urlValidator:function(e){if(!e||!(0,i().q7)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&(!!t.hostname.endsWith("sumologic.com")&&!!t.pathname.startsWith("/receiver/v1/http/"))}}},u={id:"ff522b0f-e688-4986-9b7d-255627316f73",name:"splunk",icon:"/images/external_integrations/splunk-logo.jpeg",website_url:"https://www.splunk.com/",signupUrl:"https://www.splunk.com/en_us/talk-to-sales.html",privacy_policy_url:"https://www.splunk.com/en_us/legal/privacy/privacy-policy.html",terms_of_use_url:"https://www.splunk.com/en_us/legal/terms/terms-of-use.html",developer_name:"Splunk",installation_info_url:void 0,integrationGalleryUrl:"https://www.notion.so/integrations/splunk",customization:{headers:{authorization:{prefix:"Splunk"}},body:{path:["event"]},urlValidator:function(e){if(!e||!(0,i().q7)(e))return!1;const t=new URL(e);if(!["http:","https:"].includes(t.protocol))return!1;let n=t.hostname;return!(!n.startsWith("http-inputs")||!n.endsWith(".splunkcloud.com"))&&(n=n.replace("http-inputs","").replace(".splunkcloud.com",""),!(n.length<2||!n.startsWith("-")&&!n.startsWith("."))&&!!["/services/collector/raw","/services/collector/event"].includes(t.pathname))}},type:"siem",tagline:s.splunk,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!0},p={id:"97d68716-a483-4472-8fa9-da26215d721a",name:"datadog",icon:"/images/external_integrations/datadog-logo.png",website_url:"https://www.datadoghq.com/",signupUrl:"https://www.datadoghq.com/free-datadog-trial/",privacy_policy_url:"https://www.datadoghq.com/legal/privacy/",terms_of_use_url:"https://www.datadoghq.com/legal/terms/",developer_name:"Datadog",installation_info_url:void 0,type:"siem",integrationGalleryUrl:"https://www.notion.so/integrations/datadog",customization:{headers:{hmac:!0}},oauth:{accountInfoPropertyNames:{accountId:"dd_oid",accountName:"dd_org_name"},usePKCE:!0,tokenPath:"/oauth2/v1/token",apiKeyPath:"/api/v2/api_keys/marketplace"},tagline:s.datadog,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1},m={id:"73da42b2-8736-4900-b53d-20a8d0d46a17",name:"runreveal",icon:"/images/external_integrations/runreveal.png",website_url:"https://runreveal.com/",signupUrl:"https://runreveal.com/signup",privacy_policy_url:"https://runreveal.com/privacy-policy",terms_of_use_url:"https://runreveal.com/terms-of-service",developer_name:"RunReveal",installation_info_url:void 0,type:"siem",tagline:s.runreveal,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/runreveal",customization:{urlValidator:function(e){if(!e||!(0,i().q7)(e))return!1;const t=new URL(e);return"https:"===t.protocol&&!!t.hostname.endsWith(".runreveal.com")}}},g={icon:"/images/external_integrations/polymer-logo.jpeg",website_url:"https://www.polymerhq.io/",signupUrl:"https://www.polymerhq.io/request-demo/",privacy_policy_url:"https://www.polymerhq.io/privacy/",terms_of_use_url:"https://www.polymerhq.io/terms-of-service/",installation_info_url:void 0,type:"dlp",tagline:s.polymer,integrationGalleryUrl:"https://www.notion.so/integrations/polymer",allowedBotCapabilities:{webhooks:!0,read_content:!0,update_content:!0,read_comment:!0,insert_comment:!0,read_user_without_email:!0,read_user_with_email:!0},allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_listUsers","public_getUser","public_external_deleteExternalBot"],acceptsSecretToken:!1,redirectUri:"https://www.polymerhq.io/"},f={...g,id:"9fb229bb-d287-45de-82f1-7331e99d9c6b",name:"polymer",developer_name:"Polymer",webhookUrl:"https://notion.polymerhq.io/notion/events"},v={...g,id:"1b725b3c-5eda-454d-9b41-0f903de3ba00",name:"polymerDev",developer_name:"PolymerDev",webhookUrl:"https://pilot.qa.polymerhq.io/notion/events"},h={icon:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/3944326d-8881-4093-90f8-63637b1ef75f/metomic.png",website_url:"https://metomic.io/",privacy_policy_url:"https://metomic.io/privacy-policy",terms_of_use_url:"https://metomic.io/terms-and-conditions",signupUrl:"https://metomic.io/",allowedBotCapabilities:{webhooks:!0,read_comment:!0,read_content:!0,insert_content:!0,update_content:!0,read_user_with_email:!0,read_user_without_email:!0,workspace_search:!0},type:"dlp",tagline:s.metomic,allowedEndpoints:["public_getPage","public_getPageProperty","public_getBlock","public_listBlockChildren","public_getDatabase","public_getSelf","public_updatePage","public_updateBlock","public_deleteBlock","public_updateDatabase","public_listComments","public_createComment","public_deleteComment","public_updateComment","public_getComment","public_unsharePageFromWeb","public_removeGuestsFromPage","public_getUser","public_external_deleteExternalBot","public_workspaceSearch","public_listTeamspaces"],acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations/metomic",redirectUri:"https://metomic.io/",customization:{headers:{hmac:!0}}},_={...h,id:"05d23763-7da5-4fcc-aad4-a147d5034cc3",name:"metomic",developer_name:"Metomic",webhookUrl:"https://integrations-api.metomic.io/notion/webhooks/generic/0188965b-c4f7-589c-45c0-7766857bad32"},b={...h,id:"75b66e0c-be9f-4fc5-bed6-1bc156f91e1c",name:"metomicStaging",developer_name:"Metomic (Staging)",webhookUrl:"https://integrations-api.metomic-staging.io/notion/webhooks/generic/01889547-4e22-1e0b-f363-571468d1b042"},y={id:"7487d286-3fa5-4984-8a62-3aa4c51f50ed",name:"custom",developer_name:"Custom SIEM integration",type:"siem",tagline:s.custom,allowedBotCapabilities:{webhooks:!0},acceptsSecretToken:!1,integrationGalleryUrl:"https://www.notion.so/integrations",acceptsCustomHeaders:!0},S=["public_exportPage","public_workspaceSearch","public_getUser","public_listUsers","public_listTeamspaces","public_getPage","public_getBlock","public_getDatabase","public_getSelf"],w={workspace_search:!0,workspace_page_export:!0,read_content:!0,read_user_without_email:!0,read_user_with_email:!0,read_teamspace:!0},k={datadog:p,nightfall:l,panther:c,polymer:f,polymerDev:v,metomic:_,metomicStaging:b,splunk:u,sumologic:d,runreveal:m,onna:{id:"bb67e6bb-09f3-48fe-a7b2-428665ff20ac",name:"onna",icon:"/images/external_integrations/onna-icon.jpeg",website_url:"https://onna.com/",privacy_policy_url:"https://onna.com/privacy-policy",terms_of_use_url:"https://onna.com/master-subscription-agreement",developer_name:"Onna",type:"ediscovery",tagline:s.onna,integrationGalleryUrl:"https://www.notion.so/integrations/onna",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},aware:{id:"99b8b727-7eee-40f8-af16-de045fb78e15",name:"aware",icon:"/images/external_integrations/aware-icon.png",website_url:"https://www.awarehq.com/",privacy_policy_url:"https://www.awarehq.com/privacy",terms_of_use_url:"https://www.awarehq.com/terms-conditions",developer_name:"Aware",type:"ediscovery",tagline:s.aware,integrationGalleryUrl:"https://www.notion.so/integrations/aware",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},hanzo:{id:"2ebac254-9d38-4c94-b579-0eac7fe0f43c",name:"hanzo",icon:"/images/external_integrations/hanzo-icon.png",website_url:"https://www.hanzo.co/",privacy_policy_url:"https://www.hanzo.co/privacy",terms_of_use_url:"https://www.hanzo.co/privacy",developer_name:"Hanzo",type:"ediscovery",tagline:s.hanzo,integrationGalleryUrl:"https://www.notion.so/integrations/hanzo",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://localhost:3005"},drata:{id:"04912200-d72b-4f0c-b61f-a192dc6e4a2f",name:"drata",icon:"/images/external_integrations/drata-icon.png",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata",type:"ediscovery",tagline:s.drata,integrationGalleryUrl:"https://www.notion.so/integrations/drata",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"https://app.drata.com/"},drataStaging:{id:"98e6e1b8-ac1b-414a-89b1-09cf4371d326",name:"drataStaging",website_url:"https://drata.com/",privacy_policy_url:"https://drata.com/privacy",terms_of_use_url:"https://drata.com/terms",developer_name:"Drata (Staging)",type:"ediscovery",tagline:s.drataStaging,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:w,allowedEndpoints:S,redirectUri:"http://localhost:5000/callback/notion"},custom:y,notion_automation_public_api:{id:n(617871).XF,name:"notion_automation_public_api",website_url:"https://notion.com/",privacy_policy_url:"https://notion.com/privacy",terms_of_use_url:"https://notion.com/terms",developer_name:"Notion",type:"ediscovery",tagline:s.notionInternal,integrationGalleryUrl:"https://www.notion.so/integrations/",allowedBotCapabilities:{read_content:!0},allowedEndpoints:["public_internal_getObject"],redirectUri:"http://localhost:5000/callback/notion"}},I=(0,n(720665).MU)((0,n(534177).WP)(k).map((e=>{let[t,n]=e;return[n.id,n]})));function x(e){var t;return null===(t=C(e))||void 0===t?void 0:t.name}function A(e){const t=C(e);return Boolean(t&&"ediscovery"===t.type)}function C(e){if(e)return I[e]}function T(e){const t=C(e);if(t&&("siem"===t.type||"dlp"===t.type))return t}function M(e){return Boolean(C(e))}function P(e){if(!e)return!1;const t=C(e);return!!t&&(0,r().qs)(t.allowedBotCapabilities)}function B(e){const{env:t,integrationConfig:n,webhookUrlToValidate:i,experimentService:r,actor:s,spaceId:l}=e,c=(0,o().h1)({},a,n.customization);return!!r.checkGate({actor:s,gateName:"bypass_webhook_url_validation",customIDs:{spaceId:l}})||(!!c.urlValidator(i)||"local"===t&&i.startsWith("http://localhost:3007/"))}},20822:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(178624).R)({key:"appearanceSettingStorageKey",namespace:n(419494).Bq,important:!0,trackingType:"necessary"})},21140:(e,t,n)=>{n.d(t,{Dk:()=>u,Ye:()=>c,wh:()=>s,wt:()=>d});var o=n(296540),i=()=>n(630116),r=n(474848);function a(e){const{style:t,row:n,column:o,reverse:i,inline:r,...a}=e,s={display:r?"inline-flex":"flex"};return o?s.flexDirection=i?"column-reverse":"column":n?s.flexDirection=i?"row-reverse":"row":i&&(s.flexDirection="row-reverse"),Object.assign(s,a,t)}function s(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},row:!0})}function l(){return a({...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},column:!0})}const c=o.forwardRef((function(e,t){const{children:n,className:o,...i}=e;return(0,r.jsx)("div",{className:o,style:s(i),ref:t,children:n})})),d=o.forwardRef((function(e,t){const{children:n,className:o,...i}=e;return(0,r.jsx)("div",{className:o,style:l(i),ref:t,children:n})}));function u(e){let{environment:t,pageBlockStore:n,pathToBlockId:o}=e;const r=new(i().pm)({environment:t,pointer:n.pointer,path:o}).getValue();return new(i().Bv)(t,{table:"block",spaceId:n.getSpaceId(),id:r})}},21497:(e,t,n)=>{n.d(t,{J2:()=>c,LR:()=>l,MQ:()=>a,OD:()=>p,_5:()=>h,b4:()=>d,lX:()=>u,o6:()=>o,p2:()=>r,qG:()=>g,rN:()=>s,wA:()=>f,wf:()=>m,xT:()=>i});const o="teamColumn",i="ownersColumn",r="AccessLevelColumn",a="lastUpdatedColumn",s="contextMenuColumn",l=[o,r,a],c="filterAccessAny",d="filterAccessOnlyOpen",u="filterAccessOnlyClosed",p="filterAccessOnlyPrivate",m="filterOwnerAny",g="filterOwnerShowOrphaned",f="filterOwnerById";class v extends(()=>n(757695))().default{getInitialState(){return{searchQuery:"",sortColumn:a,sortAscending:!1,showOnlyArchivedTeams:!1,filterByOwner:{type:m},filterAccess:c,showTeamsWithSecurityOverrides:!1}}}const h=new v},21510:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,rect:n(397248).v_,prevDiscussionLocation:void 0}}}const i=new o},21869:(e,t,n)=>{n.d(t,{s:()=>i});var o=()=>n(989423);function i(e,t){o().vd(e,"rich_text_menu_click",t)}},21899:(e,t,n)=>{n.d(t,{f:()=>i});n(898992),n(354520);var o=()=>n(640653);function i(e){const{currentUserRootStore:t}=e;return t?t.getSpaceViewStores().filter((e=>(0,o().IL)(e.getSpaceStore()))):[]}},22102:(e,t,n)=>{n.d(t,{k:()=>o});const o=new(n(645873).O2)("isTemplate",(async()=>await n.e(6993).then(n.bind(n,826880))))},22913:(e,t,n)=>{n.d(t,{H:()=>l,U:()=>s});var o=()=>n(859384),i=()=>n(878377),r=()=>n(416726);const a=(0,n(959013).YK)({renameName:{id:"action.rename.name",defaultMessage:"Rename"}}),s=(0,r().Fw)({key:"rename page",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:o().M,validators:[i().IRu,i().Xmj,i().vXb,i()._fc,i().AU6(i().afo),i().AU6(i().ln6),i().AU6(i().kD4),i().AU6(i().dKT),i().AU6(i().Xjv(n(700500).xd.externalObjectInstancePage)),i().AU6(i().PfK),i().AU6(i().IW),i().AU6(i().i6S),i().AU6(i().oy3)],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:o}=e;if(t.length>0)return n(898286).U({blockStore:t[0],originRect:o})}}),l=(0,r().Fw)({key:"rename file",displayName:a.renameName,analyticsName:a.renameName.defaultMessage,svg:o().M,validators:[i().p2L,i().vXb,i().ka$,i().AU6(i().Bb5("table"))],shortcuts:["rename"],closeParentMenu:!0,action:e=>{const{blocks:t,originRect:o}=e;if(t.length>0)return n(569577).H({blockStore:t[0],originRect:o})}})},24157:(e,t,n)=>{n.r(t),n.d(t,{TextSelectionStore:()=>l,default:()=>c});var o=()=>n(496506),i=()=>n(496603),r=()=>n(821062),a=()=>n(231722),s=()=>n(630116);class l extends(()=>n(757695))().default{constructor(){super(...arguments),this.isEditingStore=new(o().default)((()=>"editing"===this.state.mode),{debugName:"isEditingStore"}),this.isExpandedStore=new(o().default)((()=>"empty"!==this.state.mode&&!(0,a().kM)(this.state.multiSelection)),{debugName:"isExpandedStore"})}getInitialState(){return{mode:"empty"}}setState(e){if("empty"===e.mode||"empty"===this.instanceState.mode)return super.setState(e);if(!(0,r().A)(this.instanceState,e)){const{savedSelectionXPosition:t,...o}=this.instanceState,{savedSelectionXPosition:i,...a}=e;this.instanceState=e,n(992202).logStoreSet(this,e),(0,r().A)(o,a)||this.emit()}}cloneState(){return"editing"===this.state.mode?{mode:"editing",multiSelection:(0,a().Oj)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition,forceExtendAnnotations:i().mg(this.state.forceExtendAnnotations)}:"readOnly"===this.state.mode?{mode:"readOnly",multiSelection:(0,a().Oj)(this.state.multiSelection),savedSelectionXPosition:this.state.savedSelectionXPosition}:{mode:"empty"}}isEmptySelection(){if(!this.hasSelection())return!0;const{multiSelection:e}=this.state;return(0,a().kM)(e)}isEditingComment(){return"editing"===this.state.mode&&("comment"===this.state.multiSelection.start.store.table||"comment"===this.state.multiSelection.end.store.table)}isEditingFormQuestion(){return"editing"===this.state.mode&&("form_question"===this.state.multiSelection.start.store.table||"form_question"===this.state.multiSelection.end.store.table)}isEditingCaption(){return"editing"===this.state.mode&&(i().n4(this.state.multiSelection.start.store.path,["properties","caption"])||i().n4(this.state.multiSelection.end.store.path,["properties","caption"]))}hasSelection(){return"empty"!==this.state.mode}isEditingEmptyBlock(){return!(!this.hasSelection()||!this.isEmptySelection())&&!this.state.multiSelection.start.store.isDefined()}getRootBlockStoreOfSelection(){const e=this.hasSelection()&&this.state.multiSelection&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().Bv?e:void 0}getRootFormQuestionStoreOfSelection(){const e=this.hasSelection()&&this.isEditingFormQuestion()&&this.state.multiSelection.start.store.getAncestorRecordStoreAtRootPath();return e&&e instanceof s().c7?e:void 0}}const c=new l},24611:(e,t,n)=>{n.d(t,{Wh:()=>Rt,FF:()=>Vt,Ay:()=>Ot,k:()=>Bt,KJ:()=>Dt,x7:()=>Ft,t9:()=>Pt});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=n(296540),i=()=>n(872994),r=()=>n(484714),a=()=>n(847249),s=()=>n(401497),l=()=>n(700500),c=()=>n(304740),d=n(474848);const u=(0,n(340498).wt)("compass",{viewBox:"0 0 30 30",svg:(0,d.jsx)("path",{d:"M18,4.361V3c0-1.657-1.343-3-3-3s-3,1.343-3,3v1.361C6.27,5.718,2,10.854,2,17c0,7.18,5.82,13,13,13s13-5.82,13-13 C28,10.854,23.73,5.718,18,4.361z M14,3c0-0.552,0.448-1,1-1s1,0.448,1,1v1.051C15.669,4.025,15.338,4,15,4s-0.669,0.025-1,0.051V3z M16,27.949V26h-2v1.949C8.724,27.474,4.526,23.276,4.051,18H6v-2H4.051C4.526,10.724,8.724,6.526,14,6.051V8h2V6.051 c5.276,0.476,9.474,4.673,9.949,9.949H24v2h1.949C25.474,23.276,21.276,27.474,16,27.949z M8,24l10-4l4-10l-10,4L8,24z M18.41,13.59 l-1.949,4.871L11.59,20.41l1.949-4.871L18.41,13.59z"})});var p=()=>n(715862),m=()=>n(997769),g=()=>n(332737),f=()=>n(919709),v=()=>n(220719),h=()=>n(959013),_=()=>n(100622),b=()=>n(496603),y=()=>n(284371),S=()=>n(939768),w=()=>n(296511),k=()=>n(437219),I=()=>n(559926),x=()=>n(884107),A=()=>n(901389),C=()=>n(705540),T=()=>n(675074),M=()=>n(383594),P=()=>n(797265),B=()=>n(778417),R=()=>n(725614),E=()=>n(751156),D=()=>n(780054),N=()=>n(186445),L=()=>n(38337),O=()=>n(921855),U=()=>n(943846),F=()=>n(972435),V=()=>n(569912),j=()=>n(836251),z=()=>n(891078),H=()=>n(645873);const W=new(H().O2)("imageHyperlink",(()=>n.e(32644).then(n.bind(n,887750)))),q=(0,H()._h)(W,(e=>e.ImageHyperlinkPreview)),K=(0,H()._h)(W,(e=>e.ImageHyperlinkOverlay));var G=()=>n(406792),$=()=>n(962730),Y=()=>n(227440),Q=()=>n(757695);class Z extends Q().default{getInitialState(){return{hovered:!1,focused:!1,isInFrame:!1}}}const X=Z;var J=()=>n(518888),ee=()=>n(753199),te=()=>n(230062),ne=()=>n(419974),oe=()=>n(657202);let ie=null;const re=Q().default.createClass(void 0,{name:"ErrorStore"});function ae(e){let{source:t,contentWrapStyle:n,handleEmbedComp:i,contentStyle:r}=e;const s=(0,a().uB)(void 0,re),l=(0,o.useCallback)((e=>function(e,t,n){const o=(0,ne().oq)(e.currentTarget,t);o&&n.setState(o)}(e,t,s)),[t,s]),c=(0,a().K8)((()=>function(e){return{...e,pointerEvents:te().A.state?"none":"auto",position:"relative"}}(r)),[r]);return(0,d.jsx)("div",{style:n,onMouseDown:ee().tr,onTouchStart:ee().tr,children:(0,d.jsxs)("div",{style:c,children:[(0,d.jsx)("audio",{ref:e=>i(e),style:c,controls:!0,preload:"none",onError:l,onPlay:le,onPause:ce,src:t}),(0,d.jsx)(de,{errorStore:s})]})})}const se={render:function(e){const{contentStyle:t,contentWrapStyle:n,handleEmbedComp:o}=e;return(0,d.jsx)(oe().A,{url:e.source,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,render:(e,i,r)=>r?i?(0,d.jsx)(ae,{contentStyle:t,contentWrapStyle:n,source:i,handleEmbedComp:o}):void 0:(0,d.jsx)("div",{})})},resizable:!1,hideActions:!0,rendererType:"audio"};function le(e){ie&&ie.pause(),ie=e.currentTarget}function ce(e){ie===e.currentTarget&&(ie=null)}function de(e){let{errorStore:t}=e;const n=(0,a().O$)(t);return n?(0,d.jsx)(ne().Ay,{family:"audio",error:n,isSmall:!0}):null}var ue=()=>n(496889),pe=()=>n(460282),me=()=>n(739283),ge=()=>n(158218),fe=()=>n(477450),ve=()=>n(155004),he=()=>n(145214),_e=()=>n(704152),be=()=>n(493823),ye=()=>n(859428);const Se=new(H().O2)("Tldraw",(()=>Promise.all([n.e(42399),n.e(25583)]).then(n.bind(n,873925)))),we=(0,H()._h)(Se,(e=>e.TldrawAdapter));var ke=()=>n(109488),Ie=()=>n(502438);function xe(e){const t=(0,r().v3)(),i=(0,a().K8)((()=>(0,n(969197).OW)(e.store)),[e.store]),l=(0,s().IS)((t=>({sizer:{height:e.height,display:"flex",borderRadius:3,paddingTop:2,paddingLeft:10,paddingRight:10,paddingBottom:10},border:{display:"flex",flex:1,margin:2,padding:3,boxShadow:i?t.outlineBlueInputBoxShadow:void 0,outline:`1px solid ${t.regularDividerColor}`,transition:"box-shadow 0.1s ease-in-out",willChange:"box-shadow",borderRadius:3},ignoreClickArea:{flex:1,position:"relative",contain:"paint"}})),[i,e.height]),c=(0,o.useCallback)((()=>{R().clear({environment:t}),B().td({environment:t,stores:[e.store],phase:Ie().SelectionPhase.Editing})}),[t,e.store]),u=(0,o.useCallback)((t=>(0,d.jsx)("div",{...t,style:l.ignoreClickArea,className:"notion-disable-webkit-user-select",children:(0,d.jsx)(we,{...e,isEditing:i})})),[l.ignoreClickArea,e,i]);return(0,d.jsx)("div",{style:l.sizer,onPointerDown:c,children:(0,d.jsx)("div",{style:l.border,children:(0,d.jsx)(n(805751).A,{debugName:"DrawingBox",capture:i,allowEsc:!0,children:(0,d.jsx)(ke().A,{capture:!0,render:u})})})})}const Ae={render:e=>(0,d.jsx)(xe,{...e}),resizable:!0,hideActions:!0,rendererType:"drawing"};var Ce=()=>n(187174),Te=()=>n(763824);let Me=0;const Pe="notion_jsonp_callback_";function Be(e){const t=Te().yX(),n=document.createElement("script");n.type="text/javascript";const o=function(){const e=Pe+Me;return Me++,e}();window[o]=e=>{delete window[o],n.parentNode&&n.parentNode.removeChild(n),t.resolve(e)};const i=S().O$(e,{callback:o});return n.src=i,n.onerror=e=>{delete window[o],n.parentNode&&n.parentNode.removeChild(n),t.reject(e)},document.head&&document.head.appendChild(n),t.promise}var Re=()=>n(62856),Ee=()=>n(331542);const De={userSelect:"none",padding:"6px 10px",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%"},Ne={loading:!0,error:!1,html:void 0};function Le(e){const[t,n]=(0,o.useState)(Ne),i=(0,a().K8)((()=>te().A.getState()),[]);(0,Ce().Yb)((async()=>{const t=`https://gist.github.com/${function(e){const{pathname:t}=S().qg(e);return(t||"").split("/").pop()}(e.source)}.json`;try{const e=await Be(t);n({loading:!1,error:!1,html:e.div});if(!document.querySelector(`link[href="${e.stylesheet}"]`)){const t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e.stylesheet,document.head&&document.head.appendChild(t)}}catch(o){n({loading:!1,error:!0,html:void 0})}}),[e.source]);const r=(0,s().IS)((()=>({container:{width:"100%",marginBottom:"-1em",...t.html&&{overflowY:"auto"},...t.html&&{height:"100%"},...t.html&&{pointerEvents:i?"none":"auto"}}})),[t.html,i]);return(0,d.jsx)("div",{children:(0,d.jsx)(ke().A,{capture:!0,render:n=>(0,d.jsx)("div",{...n,ref:e.handleEmbedComp,style:r.container,children:(0,d.jsx)(Ue,{gistBoxState:t})})})})}const Oe={render:function(e){const{source:t,handleEmbedComp:n}=e;return(0,d.jsx)(Le,{source:t,handleEmbedComp:n})},renderFullScreen:void 0,resizable:!0,embedGhost:!0,hideActions:!0};function Ue(e){let{gistBoxState:t}=e;const{error:n,html:o,loading:i}=(0,a().K8)((()=>{const{error:e,html:n,loading:o}=t;return{error:e,html:n,loading:o}}),[t]),r=(0,Re().A)(i,1e3,500);return r||i?(0,d.jsx)("div",{style:{marginBottom:"1em"},children:(0,d.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",opacity:r?1:0,...De},children:[(0,d.jsx)(Ee().A,{}),(0,d.jsx)("div",{style:{marginLeft:8},children:(0,d.jsx)(h().sA,{defaultMessage:"Loading gist",id:"githubGistRenderer.loading.message"})})]})}):n?(0,d.jsx)("div",{style:{marginBottom:"1em"},children:(0,d.jsx)("div",{style:De,children:(0,d.jsx)(h().sA,{defaultMessage:"Error loading gist",id:"githubGistRenderer.errorLoading.message"})})}):(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:o??""},className:"notion-gist-block"})}var Fe=()=>n(613147),Ve=(n(16280),n(898992),n(354520),n.n(n(952224))),je=()=>n(522419),ze=()=>n(343666),He=()=>n(963589),We=()=>n(129522),qe=()=>n(508496),Ke=()=>n(553819),Ge=()=>n(807683),$e=()=>n(773382),Ye=()=>n(461515),Qe=()=>n(468993);function Ze(e){const{file:t,fileName:n,fileSize:o,progressPercent:i,progressText:r}=e;return(0,d.jsx)(Qe().A,{disabled:!0,iconSvg:Ye().F,isLoading:!0,progressPercent:i,progressText:r,file:t,name:n,size:o,onClick:b().lQ})}const Xe=Q().default.createClass(void 0,{name:"ErrorStore"});function Je(e){var t,i;const{store:l,dataURL:c,source:u,isFullWidth:p,isRootChild:m,aspectRatio:g,height:f,dragging:v,blockWidth:h,isFullScreen:b,imageBoxRef:y,isPageWidth:S,pageWidth:w,onSrcFailedToLoad:k,onSrcLoad:I,embedRootRef:x,disabled:A}=e,C=(0,r().v3)(),T=(0,a().uB)(void 0,Xe),M=(0,a().O$)(T),P=(0,a().K8)((()=>J().default.getKeyState(J().default.getBlockKey(l.id))),[l]),B=(0,a().K8)((()=>Ke().A.getStatus(l.id)),[l.id]),R=(0,a().K8)((()=>{if("uploading"===B||"completed"===B&&u===Ke().A.getSecureFileURL(l.id))return Ke().A.getDataURL(l.id)}),[B,l.id,u]),D=(0,o.useRef)(u),N=(0,o.useRef)(void 0),L=(0,o.useRef)(void 0),O=(0,o.useRef)(void 0),U=(0,o.useRef)(!1),F=Boolean("image/heic"===L.current),V=F&&(null==c?void 0:c.startsWith("blob:"))&&Boolean(!C.device.isSafari),j=(0,He().X)("image_sizing_v2"),z=function(e){const t=e.isFullWidth&&!e.dragging?void 0:e.blockWidth,n=window.innerWidth,o=t?Math.min(t,window.innerWidth):window.innerWidth;return e.isFullScreen?n:o}({isFullWidth:e.isFullWidth,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,isPageWidth:e.isPageWidth,pageWidth:e.pageWidth,blockWidth:e.blockWidth,dragging:e.dragging}),H=null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect().width,W=(0,o.useMemo)((()=>j?function(e){const{isFullScreen:t,isFullWidth:n,isPageWidth:o,blockWidth:i,embedContainerWidth:r,dragging:a}=e;if(t)return window.innerWidth;if(a)return Math.min(i??window.innerWidth,window.innerWidth);if(n)return window.innerWidth;let s;s=o&&r&&r>0?r:i;if(s){const e=r&&r>0?r:window.innerWidth;return Math.min(s,e)}return window.innerWidth}({isFullWidth:p,isFullScreen:b,isRootChild:m,isPageWidth:S,pageWidth:w,blockWidth:h,embedContainerWidth:H,dragging:v}):0),[p,b,m,S,w,h,H,v,j]),q=j?W:z,K=null===(i=e.embedContainerDimensions)||void 0===i?void 0:i.height,$=j?function(e){const{isFullWidth:t,isRootChild:n,height:o,aspectRatio:i,renderWidth:r,embedContainerHeight:a}=e;return t&&n?o:i&&r?r*i:a}({isFullWidth:p,isRootChild:m,height:e.height,aspectRatio:g,renderWidth:W,embedContainerHeight:K}):void 0;async function Y(t,o){const i=je()._J(e.source)?o:e.source;if(null==k||k(),o){const e=await(0,n(974233).default)({url:o,environment:C,method:"HEAD",format:"text"});if("failed"===e.type){const t=(0,ne().mg)(e.error,i);if(t)return T.setState(t),void G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!1,status:e.status}})}}T.setState({type:"unknown",source:i}),G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!1,status:0}})}function Q(e){e||(null==I||I(),T.setState(void 0),G().default.DO_NOT_USE_measureLegacy("image_load",{environment:C,data:{success:!0}}))}(0,o.useEffect)((()=>{O.current=G().default.DO_NOT_USE_markLegacy("image_load")}),[]),(0,o.useEffect)((()=>{null!=P&&P.file.type&&!Boolean(L.current)&&(L.current=null==P?void 0:P.file.type)}),[P]),(0,o.useEffect)((()=>{if(c||!u||!C.mobileNative)return;if(N.current&&u===D.current)return;D.current=u;je()._J(u)&&(0,n(518646).k)(C,{url:u,download:!1,downloadName:"image",permissionRecord:l.pointer},Boolean(n(948914).A.state.isNotionProtocolBugFixed)).then((e=>{N.current=e}))}),[C,D,N,u,l.pointer,c]),(0,o.useLayoutEffect)((()=>{var e;const t=null===(e=y.current)||void 0===e||null===(e=e.elementRef)||void 0===e?void 0:e.current;t&&!P&&(t.onload=()=>{const e=t.getBoundingClientRect().width;e<=1||e!==h&&(F||!A&&l.canEdit()&&(h!==t.naturalWidth||e===t.naturalWidth||U.current||(E().createAndCommit({userAction:"ImageRenderer.updateBlockWidth",environment:C,canUndo:!0,perform:t=>{n(896628).zA({stores:[l],update:{block_width:e},transaction:t})}}),U.current=!0)))})}),[F,h,C,y,l,P,A]);const Z=(0,s().IS)((e=>{const t={},n=S?w:Math.min(h??0,w??0);if(W&&$&&!v&&!b)t.width=W,t.height=$,t.background=_().Ay.contentGrayBackground,t.borderRadius=2;else if(p&&m||!g||!n)p&&m||!g?f&&(t.height=f,t.background=_().Ay.contentGrayBackground):(t.paddingBottom=100*g+"%",t.background=_().Ay.contentGrayBackground);else{const e=n*g;t.height=$?"100%":e,t.background=_().Ay.contentGrayBackground}const o={};return b||p||v||($&&j&&!R?o.maxHeight=$:h&&g&&!R&&(o.maxHeight=h*g)),{content:o,placeholder:t,contentWrap:{}}}),[R,p,m,g,f,b,h,v,S,w,$,W,j]);if(V&&P){const{file:e,name:t,size:n,progressPercent:o,progressText:i}=P;if(e instanceof File)return(0,d.jsx)(Ze,{file:e,fileName:t,fileSize:n,progressPercent:o,progressText:i})}return c?(0,d.jsx)(tt,{...e,proxyError:void 0,renderURL:c,embedError:M,environment:C,signedOriginalURLRef:N,onImageError:Y,onImageLoad:Q,renderHeightV2:$,renderWidth:q,useV2Sizing:j,styles:Z,enableLoadingShimmer:!1}):(0,d.jsx)(n(360083).A,{url:u,width:q,render:(t,n)=>{var o;let i=n;return void 0===n&&void 0!==L.current&&null!==(o=D.current)&&void 0!==o&&o.startsWith("blob:")&&(i=D.current),R&&(i=R),(0,d.jsx)(tt,{...e,proxyError:t,renderURL:i,embedError:M,environment:C,signedOriginalURLRef:N,onImageError:Y,onImageLoad:Q,renderHeightV2:$,renderWidth:q,useV2Sizing:j,styles:Z,enableLoadingShimmer:!0})},isAuthenticated:!0,permissionRecord:l.pointer},`width-${e.contentStyle.width}`)}function et(e){const t=e.getParentStore();if(function(e){return e.getParentTable()===ze().SN}(e)&&(null==t?void 0:t.table)===ze().SN)return t.getContentStores().filter((e=>"image"===e.getType())).filter((e=>Boolean(e.getProperties().source)));const n=Ie().default.getCurrentRootStore();return We().K.getMembersByDOMOrder({filter:e=>"image"===e.renderedType&&Boolean(e.getBlockStore().findRecordStoreUIAncestor((e=>Boolean(n&&e===n))).ancestor)}).map((e=>e.getBlockStore())).filter((e=>Boolean(e.getProperties().source)))}function tt(e){const{proxyError:t,renderURL:n,isFullScreen:i}=e,[r,a]=(0,o.useState)(n);(0,o.useEffect)((()=>{void 0!==n&&n!==r&&a(n)}),[r,n]);const s=(0,ne().mg)(t,void 0)||(0,U().Vh)(t)||e.embedError;return i?(0,d.jsx)(ot,{...e,embedError:s,renderURL:r}):(0,d.jsx)(nt,{...e,embedError:s,renderURL:r})}function nt(e){var t;const{embedError:n,renderURL:i,progressPercent:r,progressText:s,disabled:l,isLoading:c,contentStyle:u,contentWrapStyle:p,handleFullScreen:m,handleEmbedComp:g,isFullWidth:f,isRootChild:v,inlineContentStyle:h,blockLocation:_,imageBoxRef:b,environment:y,onImageError:S,onImageLoad:w,renderWidth:I,signedOriginalURLRef:x,styles:A,store:C,useV2Sizing:M}=e,[P,E]=(0,o.useState)(!1),N=(0,He().X)("imagerenderer_disable_loading_lazy"),L=T().Ox(_),U=()=>{try{var e;const{currentImageIndex:t,items:n}=function(e,t,n,o){if(!t)throw Error("Lightbox item missing URL");const i=et(e).map((e=>({type:"image",blockId:e.id,renderWidth:o,state:void 0}))),r=i.findIndex((t=>t.blockId===e.id))??-1;if(-1===r)throw new Error("Lightbox item not found.");const a=0===t.indexOf("https:")?t:`${D().A.domainBaseUrl}${t}`;return i[r]={...i[r],previewUrl:Ve()(a),originalUrl:Ve()(n??a)},{currentImageIndex:r,items:i}}(C,i,x.current??void 0,I);null===(e=y.mobileNative)||void 0===e||e.showLightBox({items:n,startingIndex:t,from:"embedded_block_click",showImageLightBoxV2:!0}),B().IU({environment:y}),R().blurActiveElement()}catch{return}},F=()=>{k().v0(y,{from:"embedded_block_click",type:"image"}),qe().default.checkGate({gateName:"mobile_lightbox_v2"})?U():(()=>{var e;if(!i)return;const t=0===i.indexOf("https:")?i:`${D().A.domainBaseUrl}${i}`;null===(e=y.mobileNative)||void 0===e||e.showLightBox({items:[{type:"image",previewUrl:Ve()(t),originalUrl:Ve()(x.current??t)}],startingIndex:0,from:"embedded_block_click"}),B().IU({environment:y}),R().blurActiveElement()})()},V=y.mobileNative&&!1===(null==i?void 0:i.startsWith("data:")),j=V?F:L?void 0:m,z=V?F:L?t=>rt(t,e.handleFullScreen):void 0,H=L?t=>rt(t,e.handleFullScreen):m,W=(0,a().K8)((()=>(0,O().r4)(C.getPropertyValue("alt_text"),C)),[C]),q=(0,a().K8)((()=>{const e=C.getImageHyperlink()||"";return"placeholder"===e?void 0:e}),[C]),K=(0,a().K8)((()=>!!c&&"uploading"!==Ke().A.getStatus(C.id)),[c,C.id]),G=($={isFullWidth:e.isFullWidth,isRootChild:e.isRootChild,height:e.height,renderURL:i,isLoaded:P,embedContainerHeight:null===(t=e.embedContainerDimensions)||void 0===t?void 0:t.height}).isFullWidth&&$.isRootChild?$.height:$.renderURL&&$.isLoaded?void 0:$.embedContainerHeight;var $;let Y=e.renderHeightV2;var Q;!e.dragging||f&&v||(Y=i&&P||null===(Q=e.embedContainerDimensions)||void 0===Q?void 0:Q.height);const Z=M?Y:G;return(0,d.jsx)("div",{ref:g,style:{...p,...A.contentWrap},onClick:Boolean(l)&&!V?H:void 0,children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Ge().Ay,{alt:W,ref:b,src:i,loading:N?void 0:"lazy",isFullScreen:!1,style:{...u,...A.content,...h},href:q,placeholderStyle:A.placeholder,onDoubleClick:j,onClick:z,height:Z,capMaxHeight:f&&v,onError:S,onLoad:e=>{w(e),i&&E(!0)},enableLoadingShimmer:e.enableLoadingShimmer}),n&&(0,d.jsx)(ne().Ay,{error:n,family:"image"}),K&&(0,d.jsxs)("div",{style:Ge().fd,children:[(0,d.jsx)(Ee().A,{size:"md",style:{marginRight:4}}),r?(0,d.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:(0,d.jsx)($e().A,{percentage:r})}):s?(0,d.jsx)("span",{children:s}):null]})]})})}function ot(e){const{contentStyle:t,embedError:n,renderURL:o,onImageError:i,onImageLoad:r,styles:a}=e,s=Math.min(500,window.innerWidth-50);return(0,d.jsx)("div",{style:{alignSelf:"center",margin:0,position:"relative",minWidth:n?s:void 0},children:(0,d.jsxs)("div",{children:[(0,d.jsx)(Ge().Ay,{src:o,isFullScreen:!0,style:{...t,...a.content},placeholderStyle:a.placeholder,capMaxHeight:!1,onError:i,onLoad:r,immediatelyDiscardImageWhenSourceChanges:!0}),n&&(0,d.jsx)(ne().Ay,{error:n,family:"image"})]})})}const it={rendererType:"image",render:e=>(0,d.jsx)(Je,{...e,isFullScreen:!1}),renderFullScreen:e=>(0,d.jsx)(Je,{...e,isFullScreen:!0}),resizable:!0};function rt(e,t){e.stopPropagation(),t()}var at=()=>n(719147),st=()=>n(839010);const lt={render:function(e){const{disabled:t,contentStyle:o,contentWrapStyle:i,handleFullScreen:r,source:a,handleEmbedComp:s,height:l}=e;return(0,d.jsx)("div",{style:i,onClick:Boolean(t)?r:void 0,children:(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)(st().A,{ref:e=>s(e),source:a,height:l,style:o,background:!1,renderPreview:()=>(0,d.jsx)(n(835779).h,{source:(0,U().Yl)(e)})})})})},renderFullScreen:function(e){const{source:t,height:n,contentStyle:o}=e;return(0,d.jsx)(st().A,{source:t,isFullWidth:!0,height:n,style:o,background:!0})},resizable:!0},ct=lt;var dt=n(440961),ut=()=>n(688149);function pt(e){const{handleEmbedComp:t,source:i,fullScreen:r}=e,a=(0,s().DP)(),l=(0,s().IS)((e=>({main:{width:r?520:"100%",minWidth:"100%",pointerEvents:"auto",margin:r?"-10px auto":"-10px 0"},loading:{userSelect:"none",borderRadius:4,border:"1px solid #dddddd",fontSize:14,width:"100%",padding:"6px 10px"}})),[r]),c=(0,o.useCallback)((async e=>{if(!e)return;const{pathname:t}=S().qg(i),n=(t||"").split("/")[3],o={dnt:!0,lang:"en",width:"100%",theme:"dark"===a.mode?"dark":"light"};if(n&&window.twttr){e.innerHTML="";if(await window.twttr.widgets.createTweetEmbed(n,e,o))return}dt.render((0,d.jsx)("div",{style:l.loading,children:"Error loading tweet"}),e)}),[i,l.loading,a.mode]);return(0,d.jsx)("div",{style:{display:"flex"},children:(0,d.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto",maxWidth:420,minWidth:0,width:"100%"},children:(0,d.jsx)(ke().A,{capture:!0,render:e=>(0,d.jsx)("div",{...e,ref:e=>e&&t(e),style:l.main,children:(0,d.jsx)(ut().A,{fetch:()=>n.e(98012).then(n.t.bind(n,268719,23)),loading:e=>e?(0,d.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",...l.loading},children:[(0,d.jsx)(Ee().A,{}),(0,d.jsx)("div",{style:{marginLeft:8},children:(0,d.jsx)(h().sA,{id:"tweetRenderer.loadingTweet.message",defaultMessage:"Loading Tweet"})})]}):null,render:()=>(0,d.jsx)("div",{ref:c})})})})})})}const mt={render:function(e){const{source:t,handleEmbedComp:n}=e;return(0,d.jsx)(pt,{source:t,handleEmbedComp:n,fullScreen:!1})},renderFullScreen:function(e){const{source:t,handleEmbedComp:n}=e;return(0,d.jsx)(pt,{source:t,handleEmbedComp:n,fullScreen:!0})},resizable:!1,embedGhost:!0,hideActions:!0};const gt={position:"absolute",left:"50%",top:"50%",transform:"translate(-30%, -50%)",height:0,width:0,borderStyle:"solid",borderColor:_().Ay.uiBlack,borderRightWidth:0,borderLeftWidth:24.5,borderTopWidth:16.1,borderBottomWidth:16.1,borderTopColor:_().Ay.transparent,borderBottomColor:_().Ay.transparent},ft={position:"relative",height:70,width:70,borderWidth:3,borderStyle:"solid",borderColor:_().Ay.uiBlack,borderRadius:70},vt={position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"},ht=Q().default.createClass(!1,{name:"PlayedStore"}),_t=Q().default.createClass(void 0,{name:"ErrorStore"});function bt(e){let{store:t,source:i,contentWrapStyle:r,handleFullScreen:l,aspectRatio:u,height:p,handleEmbedComp:m,isFullWidth:g,preserveScale:f,mediaType:v,useS3Url:h,isRootChild:_,contentStyle:b,blockLocation:y}=e;const S=(0,s().DP)(),w=(0,o.useRef)(null),k=(0,o.useCallback)((e=>{m(e),w.current=e}),[m]),I=(0,a().uB)(void 0,_t),x=(0,a().uB)(void 0,ht),A=(0,a().O$)(Y().e),C=(0,n(591779).ZC)(A);(0,o.useEffect)((()=>{var e;void 0!==C&&(A&&!C)&&"offline"===(null===(e=I.state)||void 0===e?void 0:e.type)&&I.setState(void 0)}),[A,I,C]);const T=(0,a().K8)((()=>At("embed_url",S,g,_,f,p,b,y,x)),[S,g,_,f,p,b,y,x]);return(0,d.jsx)(oe().A,{url:i,permissionRecord:t.pointer,useS3Url:h,render:(e,t,n)=>{if(!n)return(0,d.jsx)("div",{});const o=(0,ne().mg)(e,void 0)||I.state;return t?"video"===v||(0,c().L_)({url:i})?(0,d.jsx)("div",{style:r,onMouseDown:ee().tr,children:(0,d.jsxs)("div",{style:{position:"relative"},onDoubleClick:l,children:[(0,d.jsx)(xt,{videoRef:w,setVideoRef:k,source:i,isFullWidth:g,isRootChild:_,preserveScale:f,height:p,contentStyle:b,blockLocation:y,playedStore:x,errorStore:I,signedUrl:t}),o&&(0,d.jsx)(wt,{error:o}),(0,d.jsx)(It,{videoRef:w,playedStore:x,errorStore:I})]})}):(0,d.jsx)("div",{style:r,onDoubleClick:l,children:(0,d.jsx)("div",{style:{position:"relative"},children:(0,d.jsx)(st().A,{ref:e=>m(e),source:t,height:p,style:T,isFullWidth:g,preserveScale:f,aspectRatio:u,background:!0})})}):void 0}})}function yt(e){return(0,d.jsx)("div",{style:{...ft,...e.style},children:(0,d.jsx)("div",{style:gt})})}const St={render:e=>(0,d.jsx)(bt,{...e}),resizable:!0,embedGhost:!0};function wt(e){let{error:t}=e;return(0,d.jsx)(ne().Ay,{family:"video",error:t})}function kt(){const e=(0,r().v3)(),{device:t}=e;return t.isFirefox||t.isMobile?null:(0,d.jsx)(yt,{})}function It(e){let{videoRef:t,playedStore:n,errorStore:i}=e;const r=(0,o.useCallback)((e=>{const n=t.current;n&&(0,ee().SQ)({event:e,context:ee().y$.EditorClick,callback:()=>{n.play()}})}),[t]);return(0,a().K8)((()=>n.state||i.state),[n,i])?null:(0,d.jsx)("div",{onClick:r,style:vt,children:(0,d.jsx)(kt,{})})}function xt(e){let{signedUrl:t,source:n,isFullWidth:i,isRootChild:l,preserveScale:c,height:u,contentStyle:p,blockLocation:m,playedStore:g,errorStore:f,videoRef:v,setVideoRef:h}=e;const _=(0,s().DP)(),b=(0,r().v3)(),y=(0,o.useCallback)((e=>{const{device:t}=b;t.isMobile&&g.setState(!1)}),[b,g]),S=(0,o.useCallback)((()=>{g.setState(!0)}),[g]),w=(0,o.useCallback)((()=>{const{device:e}=b;e.isAndroid&&document.fullscreenElement&&document.exitFullscreen()}),[b]),k=(0,o.useCallback)((()=>{const{device:e}=b,t=v.current;e.isIOS&&t&&t.pause()}),[b,v]),I=(0,o.useCallback)((e=>{const t=(0,ne().oq)(e.currentTarget,n);t&&f.setState(t)}),[n,f]),x=(0,a().K8)((()=>At("video_file",_,i,l,c,u,p,m,g)),[_,i,l,c,u,p,m,g]);return(0,d.jsx)("video",{ref:h,style:x,autoPlay:b.device.isIOS,playsInline:!0,controls:!0,preload:"metadata",onPause:y,onPlay:S,onEnded:w,onLoadStart:k,onError:I,src:t})}function At(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"embed_url",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>5?arguments[5]:void 0,o=arguments.length>7?arguments[7]:void 0,i=arguments.length>8?arguments[8]:void 0;const r={...arguments.length>6?arguments[6]:void 0};return(arguments.length>2?arguments[2]:void 0)&&(arguments.length>3?arguments[3]:void 0)&&(arguments.length>4?arguments[4]:void 0)&&(r.height=n),"video_file"!==e||i.state||(r.pointerEvents="none"),T().Ox(o)&&(r.maxHeight=240),r.backgroundColor=t.embedPlaceholderBackground,r}var Ct=()=>n(192264);function Tt(e){const{store:t,mediaType:n,fileUploadState:o,source:i,getRenderArgs:r}=e,s=(0,a().K8)((()=>function(e,t,n,o){var i;return function(e,t,n){if(t)return Dt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:D().A.domainBaseUrl,publicDomainName:D().A.publicDomainName,preferredType:n});if("embed"!==t)return Dt[t]}if(n&&e)return Dt[n];return Fe().A}(e,null==o?void 0:o.dataURL,t??(null===(i=n)||void 0===i?void 0:i.getType()))}(i,n,t,o)),[o,n,i,t]),l=(0,a().K8)((()=>t.getProperties()),[t]);if(s){const e=r({source:i,store:t,properties:l}),n=s.render;return(0,d.jsx)(n,{...e})}return null}var Mt=()=>n(232063);const Pt={background:"rgba(255, 255, 255, 0.055)"},Bt={display:"flex",alignItems:"center",justifyContent:"center",padding:"4px 6px",borderRight:`1px solid ${_().Ay.whiteWithAlpha(.2)}`},Rt="opacity 200ms ease-in-out",Et=230,Dt={tweet:mt,gist:Oe,video:St,image:it,audio:se,invision:ct,mixpanel:Fe().A,maps:Fe().A,drive:Fe().A,framer:Fe().A,figma:Fe().A,loom:Fe().A,typeform:Fe().A,codepen:Fe().A,embed:Fe().A,pdf:n(244471).A,whimsical:Fe().A,miro:Fe().A,abstract:Fe().A,sketch:Fe().A,excalidraw:Fe().A,replit:Fe().A,hex:Fe().A,deepnote:Fe().A,drawing:Ae},Nt=new Set(["pdf","drive"]);function Lt(e,t){const{store:i,disableMediaMenu:l,disabled:u,mediaType:p,blockLocation:h,preserveScale:_,inlineContentStyle:y,centerWrappedContent:S,disableContent:w}=e,I=(0,o.useRef)(null),C=(0,z().bx)(i,u),P=(0,r().v3)(),{device:D}=P,L=(0,o.useRef)(null),[O,V]=(0,o.useState)(0),[j,H]=(0,o.useState)(!1),W=(0,o.useRef)(null),q=(0,a().K8)((()=>i.getType()),[i]),K=(0,a().K8)((()=>i.isNavigableAncestorNonEditableState()),[i]),G=(0,a().K8)((()=>jt(e.source,i)),[e.source,i]),$=(0,a().K8)((()=>n(982254).A.state.unauthorizedIframeUrls??[]),[]),Y=(0,U().Pq)({source:G,unauthorizedIframeUrls:$}),Q=(0,a().K8)((()=>{const{block_aspect_ratio:e}=i.getFormat();if(e&&!(O<=0))return O*e}),[i,O]),Z=(0,o.useId)(),ee=(0,a().uB)(e.blockResizerStore??void 0,n(891279).A),te=(0,a().uB)(void 0,n(463830).A),ne=(0,a().uB)(void 0,X),oe=(0,a().K8)((()=>J().default.getKeyState(J().default.getBlockKey(i.id))),[i.id]),ie=(0,a().K8)((()=>qt(G,p,i,oe)),[oe,p,G,i]),re=(0,a().K8)((()=>{const{block_height:e,block_width:t,block_preserve_scale:n,block_full_width:o,block_page_width:r,block_aspect_ratio:a}=i.getFormat(),{dragging:s,temporaryHeight:l,temporaryWidth:d,temporaryFullWidth:u,temporaryPageWidth:m}=ee.state,g=s?d:t??O,f=s?l:e,v=Boolean(s?u:o),h=Boolean(s?m:r);return{blockWidth:t,blockHeight:e,width:g,height:i.isExternalObjectInstanceBlockStore()&&"image"!==p?f||c().q3:f,dragging:s,preserveScale:Boolean(_||n),isFullWidth:v,isPageWidth:h,aspectRatio:a}}),[ee,O,p,_,i]),{popupWidth:ae,maxHeight:se,mediaMenuCurrentTab:le,mediaMenuTabs:ce,embedButtonText:de,mediaMenuEmbedCaption:ue,urlInputPlaceholder:pe,onRemoveBlockFromComment:me}=e,ge=(0,o.useCallback)((()=>{if(!l&&C){const e=le||"embed",t=(ce||[{type:"embed"},{type:"file",fileUpload:!0,imageUpload:D.isAndroid,videoUpload:D.isAndroid}]).map((e=>function(e,t,n,o,i,r){switch(e.type){case"embed":const a=n||F().A.formatMessage(Ct().wO.embedButtonText);return{type:"embed",caption:o||F().A.formatMessage(Ct().wO.embedCaption),buttonText:a,inputPlaceholder:i||F().A.formatMessage(Ct().wO.pastePrompt),onChange:e=>{const n=(0,g().l)(e.originUrl);e.pastedSecureFile||m().t(n,"url")?(M().I(),Ht(e,r,t)):A().f1(F().A.formatMessage(Ct().wO.validLink))}};case"file":return{type:"file",fileUpload:Boolean(e.fileUpload),imageUpload:Boolean(e.imageUpload),videoUpload:Boolean(e.videoUpload),accept:e.accept,allowMultipleFileSelection:e.allowMultipleFileSelection,onUpload:e=>async function(e,t,n){(0,v().MX)(e.length>0,"Files can't be empty.");const o=t;if(!o)return;const i=N().y0(n);if(T().QM({environment:n,store:o,file:e[0],pageWidth:i,preferredType:o.getType()}),e.length<=1)return;const r=e.slice(1),a=await x().R.clipboardActions.load();E().createAndCommit({userAction:"EmbedBlock.insertOtherFiles",environment:n,canUndo:!0,perform:e=>{a.pasteFilesForBlocks({environment:n,files:r,transaction:e,insertBelowBlockStore:t})}})}(e,r,t)};case"unsplash":return{type:"unsplash",onChange:e=>{let{url:n}=e;M().I(),Ht({originUrl:n},r,t)}};case"giphy":return{type:"giphy",onChange:e=>{let{url:n}=e;M().I(),Ht({originUrl:n},r,t)}}}}(e,P,de,ue,pe,i))),n=I.current;if(n&&n instanceof Element){const o=n.getBoundingClientRect();M().W(P,{originRect:o,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e,tabs:t,title:F().A.formatMessage(Ct().wO.embedTitle),...ae?{popupWidth:ae}:{},...se?{maxHeight:se}:{}})}}}),[C,D.isAndroid,l,P,i,ae,se,le,ce,de,ue,pe]),fe=(0,o.useCallback)((()=>{ge()}),[ge]),he=(0,o.useCallback)((()=>{ge()}),[ge]),_e=(0,o.useCallback)((()=>{ge(),q&&k().qU(P,{type:"replace",block_type:q,block_id:i.id})}),[q,P,ge,i.id]),be=(0,o.useCallback)((()=>{!function(e,t){const n=e.getPropertyStore("caption");B().hc({environment:t,store:e}),R().setSelectionAtEnd({store:n});const o=e.getType();o&&k().qU(t,{type:"caption",block_type:o,block_id:e.id})}(i,P)}),[P,i]),ye=(0,o.useCallback)((e=>{Ht(e,i,P)}),[P,i]),Se=(0,o.useCallback)((async()=>!!me&&(await me(i),!0)),[me,i]),we=(0,o.useCallback)((()=>{qt(jt(G,i),p,i,oe)?Kt(i,h,P):_e()}),[h,P,oe,p,_e,G,i]),ke=(0,o.useCallback)((()=>{const{isFullWidth:e,aspectRatio:t}=re,n=L.current;if(n&&n instanceof Element){const o=n.getBoundingClientRect();return e&&t?{...b().VP(o),width:o.width,height:o.width*t}:o}}),[re]),Ie=(0,o.useCallback)((()=>!(!ie||!ie.renderFullScreen)),[ie]),xe=(0,a().K8)((()=>i.getProperties()),[i]),Ae=(0,a().K8)((()=>i.isRootOrDirectChild()),[i]),Ce=(0,a().K8)((()=>N().y0(P)),[P]),Te=(0,a().K8)((()=>ee.state.dragging),[ee]),Me=(0,s().IS)((e=>{const t={position:"relative"};return S&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220),{content:{display:"block",pointerEvents:Te?"none":"auto",width:"100%",...w?{opacity:.4}:{}},wrapper:t}}),[Te,S,w]),Pe=(0,o.useCallback)((e=>{const{source:t,store:n,properties:o}=e,i=f().k4p(o&&o.title),r=f().k4p(o&&o.size),{blockWidth:a,blockHeight:s,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:g,aspectRatio:v}=re,_=Ce,b=Ae,{device:S}=P,w=O&&Q?{width:O,height:Q}:void 0,x={store:n,source:t,blockWidth:a,blockHeight:s,aspectRatio:v,width:l,height:c,dragging:d,preserveScale:u,isFullWidth:m,isPageWidth:g,pageWidth:_,isRootChild:b,dataURL:oe?oe.dataURL:void 0,dataName:i,dataSize:r,disabled:!C,contentStyle:Me.content,contentWrapStyle:Me.wrapper,isLoading:Boolean(oe),progressPercent:null==oe?void 0:oe.progressPercent,progressText:null==oe?void 0:oe.progressText,handleFullScreen:()=>Kt(n,h,P),handleEmbedComp:e=>L.current=e,onSrcFailedToLoad:()=>H(!0),onSrcLoad:()=>H(!1),viewOriginal:()=>function(e,t){const n=e;if(n){T().oD(t,{store:n,from:"view_original"});const o=n.getType();o&&k().qU(t,{type:"original",block_type:o,block_id:e.id})}}(n,P),inlineContentStyle:y,blockLocation:h,mediaType:p,imageBoxRef:W,useS3Url:S.isIOS&&S.isMobileNative,embedContainerDimensions:w,embedRootRef:I};return x}),[re,Ce,Ae,P,O,Q,oe,C,Me.content,Me.wrapper,y,h,p,W,H,I]),Be=(0,o.useCallback)((()=>{if(!G)return;const e=Pe({source:G,properties:xe,store:i});return ie&&ie.renderFullScreen?ie.renderFullScreen(e):void 0}),[Pe,xe,ie,G,i]),Re=(0,a().K8)((()=>n(353643).A.state.isDragging),[]),Ee=(0,a().K8)((()=>n(93658).default.state.isActive),[]),De=(0,o.useCallback)((()=>{Re||Ee||ne.setState({...ne.state,hovered:!0})}),[ne,Ee,Re]),Ne=(0,o.useCallback)((()=>{Re||Ee||ne.setState({...ne.state,hovered:!1})}),[ne,Ee,Re]),Le=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,n(819121).p)(t)&&ne.setState({...ne.state,focused:!0})}),[ne]),Oe=(0,o.useCallback)((()=>{ne.setState({...ne.state,focused:!1})}),[ne]),Ue=oe&&oe.dataURL||G;let Fe;return Fe=Y||!Ue?(0,d.jsx)(ve().s,{allowSelectionWithin:!1,ref:I,children:(0,d.jsx)(Ut,{embedBlockStore:ne,fileUploadState:oe,canEdit:C,store:i,openMenu:ge,handleMouseEnter:De,handleMouseLeave:Ne,disabled:e.disabled,iconSvg:e.iconSvg,unauthorizedElectronUrl:Y?G:void 0,children:e.children})}):(0,d.jsx)(ve().s,{allowSelectionWithin:!0,ref:I,children:(0,d.jsx)(Gt,{store:i,fileUploadState:oe,blockResizerStore:ee,embedBlockStore:ne,alignmentPopupStore:te,isStoreNavigableAncestorNonEditableState:K,captionAriaId:Z,srcFailedToLoad:j,dimensions:re,handleMouseEnter:De,handleMouseLeave:Ne,handleFocus:e=>Le(e),handleBlur:Oe,setEmbedContainerWidth:V,source:Ue,mediaType:p,blockLocation:h,preserveScale:_,disableResizers:e.disableResizers,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disableActions:e.disableActions,disabled:u,contentBelowSource:e.contentBelowSource,showExpandButton:e.showExpandButton,getRenderArgs:Pe,canEdit:C})}),(0,z().NW)(i,t,(0,o.useMemo)((()=>({renderedType:"embed",getBlockStore:()=>i,getNode:()=>I.current,handleCreated:fe,caption:be,edit:he,activate:we,replace:_e,embed:ye,canRenderFullScreen:Ie,getFullScreenNodeRect:ke,handleRemoveBlockFromComment:Se,renderFullScreenNode:Be,getBlockLocation:()=>e.blockLocation,props:e})),[fe,be,he,we,_e,ye,Ie,ke,Se,Be,i,e]),Fe)}const Ot=o.memo(o.forwardRef(Lt),n(821062).A);function Ut(e){const{embedBlockStore:t,fileUploadState:n,blockLocation:i,canEdit:l,iconSvg:c,store:p,openMenu:m,disableCommentMenu:g,hideContent:f,centerWrappedContent:v,handleMouseEnter:_,handleMouseLeave:b,unauthorizedElectronUrl:y}=e,w=(0,r().v3)(),{device:k}=w,I=!(0,a().O$)(Y().e),x=(0,a().K8)((()=>k.isMobile||t.state.hovered),[k,t]),A=(0,o.useCallback)((()=>{y&&C().openExternalUrl(y)}),[y]),M=T().Ox(i),P=(0,s().IS)((e=>{const t={position:"relative"};v&&(t.display="flex",t.justifyContent="center",t.alignItems="center",t.minHeight=220);const n={display:"flex"};return T().Ox(i)&&(n.borderWidth=1,n.borderColor=e.regularDividerColor,n.borderRadius=3,n.marginBottom=0,n.width=214,n.color=e.text.secondary),{placeholder:t,container:n}}),[i,v]);return(0,d.jsxs)("div",{style:P.container,onMouseEnter:_,onMouseLeave:b,children:[(0,d.jsx)(Qe().A,{style:P.placeholder,disabled:!l||I,iconSvg:void 0!==c?c:u,shouldHideRight:!x,right:l&&(0,d.jsx)(zt,{blockLocation:i,store:p,isPlaceholder:!0}),onClick:y?A:m,isLoading:Boolean(n),progressPercent:null==n?void 0:n.progressPercent,progressText:null==n?void 0:n.progressText,file:n?n.file:void 0,name:n?n.name:void 0,size:n?n.size:void 0,isInComment:M,children:y?(0,d.jsx)(h().sA,{id:"embedBlock.isEmbedUrlUnauthorized.placeholder",defaultMessage:"Click to view content from {domain} in the browser. <inlinelink>Learn more</inlinelink>.",values:{domain:S().FB(y),inlinelink:e=>(0,d.jsx)(at().A,{external:!0,href:(0,j().xS)("guides.connectedApps"),children:e})}}):e.children||(0,d.jsx)(h().sA,{defaultMessage:"Embed anything (PDFs, Google Docs, Google Maps, Spotify…)",id:"embedBlock.embedAnything.placeholder"})}),(0,d.jsx)(me().A,{disableCommentMenu:g,hideContent:f,store:p})]})}function Ft(e){const t=e.getProperties(),n=null==t?void 0:t.source,o=f().q4_(n),{display_source:i}=e.getFormat();return(0,c().n4)(i||o)}function Vt(e){const{device:t}=e;return t.isMobile?_().Ay.blackWithAlpha(.3):_().Ay.blackWithAlpha(.6)}function jt(e,t){return e||Ft(t)}function zt(e){let{isPlaceholder:t,blockLocation:n,store:o}=e;const i=T().Ox(n),r=i?"comment_media":"default";return(0,d.jsx)(ue().A,{store:o,fadeIn:!1,iconStyle:t?void 0:{fill:_().Ay.white},actionSectionGroupKey:r,hideFilterActionsInput:i,hoveredStyle:Pt,tooltipContent:F().A.formatMessage(Ct().wO.actionMore)})}function Ht(e,t,n){const o=t;if(!o)return;const i=N().y0(n);I().oF(n,{pastedText:e.originUrl,source:"embed_block_menu"});const r=G().default.mark("embed_render_complete");T().Fy(n,{embeddedUrl:e,isDataURL:!1,store:o,pageWidth:i,preferredType:t.getType(),metric:r})}function Wt(e){const{renderer:t,blockLocation:n,isFullWidth:o,dragging:i,srcFailedToLoad:r,isExternalObjectInstanceBlockStore:a}=e,s={display:"flex"};return T().Ox(n)&&(s.display="inline-flex",s.maxHeight=240),"audio"===t.rendererType&&(s.display="flex"),"image"===t.rendererType&&(r?s.width="100%":a||o||i||(s.width="fit-content")),s}function qt(e,t,n,o){var i;return function(e,t,n){if(t)return Dt.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:D().A.domainBaseUrl,publicDomainName:D().A.publicDomainName,preferredType:n});if("embed"!==t)return Dt[t]}return n&&e?Dt[n]:Fe().A}(e,null==o?void 0:o.dataURL,t??(null===(i=n)||void 0===i?void 0:i.getType()))}function Kt(e,t,n){P().iy({environment:n,blockStore:e,blockLocationOfTargetBlock:t});const o=e.getType();o&&k().qU(n,{type:"full_screen",block_type:o,block_id:e.id})}function Gt(e){const{store:t,blockLocation:n,fileUploadState:s,mediaType:c,source:u,blockResizerStore:p,isStoreNavigableAncestorNonEditableState:m,embedBlockStore:g,alignmentPopupStore:f,captionAriaId:v,srcFailedToLoad:h,disableResizers:_,disableCommentMenu:b,hideContent:y,disableActions:S,disabled:k,contentBelowSource:I,showExpandButton:x,dimensions:A,handleMouseEnter:C,handleMouseLeave:M,handleFocus:P,handleBlur:B,setEmbedContainerWidth:R,getRenderArgs:E,canEdit:D}=e,N=(0,r().v3)(),{device:U}=N,{blockType:j,altTextTooltipText:z,isExternalObjectInstanceBlockStore:H}=(0,a().K8)((()=>{let e=(0,O().r4)(t.getPropertyValue("alt_text"),t);return e=e.length>100?`${e.slice(0,100)}...`:e,{isExternalObjectInstanceBlockStore:t.isExternalObjectInstanceBlockStore(),blockType:t.getType(),altTextTooltipText:e}}),[t]),{preserveScale:W,isFullWidth:G,dragging:$}=A,[Y,Q]=(0,o.useState)(!0),Z=(0,a().K8)((()=>g.state.hovered),[g]),X=(0,o.useRef)(null),J=(0,o.useRef)(null),ee=(0,a().K8)((()=>t.isRootOrDirectChild()),[t]),te=(0,o.useCallback)((e=>{if(j&&(0,l().UL)(j)&&Nt.has(j))return{leftSide:!1,rightSide:!1,bottom:!1,rightCorner:!0,leftCorner:!0};const t=ee,{preserveScale:n,isFullWidth:o}=A,{resizable:i}=e,r=D&&i&&!_&&!h,a=r&&(!n||o&&t)&&!h,s=a&&!o&&!h;return{leftSide:r&&t&&!h,rightSide:r,bottom:a,rightCorner:s,leftCorner:s&&t&&!h}}),[j,A,_,D,ee,h]),ne=(0,a().K8)((()=>qt(u,c,t,s)),[s,c,u,t]),oe=(0,i().y)(),ie=(0,o.useCallback)(((e,t)=>{e&&ne&&ne.embedGhost&&(0,fe().v)(oe,(()=>e.setAttribute("embed-ghost","")))}),[oe,ne]);(0,o.useLayoutEffect)((()=>{X.current&&ie(X.current,u)}),[ie,u]),(0,o.useEffect)((()=>{if(!X.current)return;const e=new ResizeObserver((e=>{for(const t of e){const e=t.contentRect.width;e>0&&(R(e),Q(!0))}}));return e.observe(X.current),()=>{e.disconnect()}}),[ie,R,u]);const re=(0,a().K8)((()=>function(e,t){const{block_width:n}=e.getFormat(),{temporaryWidth:o}=t.state;return void 0!==o?o<=Et:void 0!==n&&n<=Et}(t,p)),[p,t]);if(ne){const{resizable:e}=ne,{leftSide:o,rightSide:i,bottom:r,leftCorner:a,rightCorner:l}=te(ne),_="external_object_instance"===j,R="video"===j,O="image"===j,Q=Boolean(z&&"image"===j&&!re&&!T().Ox(n)),ee=D&&!m?Ct().wO.actionEditAltText:Ct().wO.actionViewAltText;return(0,V().A)((T=>(0,d.jsxs)("div",{role:"figure","aria-labelledby":v,ref:X,...T,children:[Y?(0,d.jsxs)("div",{style:Wt({renderer:ne,blockLocation:n,isFullWidth:G,dragging:$,srcFailedToLoad:h,isExternalObjectInstanceBlockStore:H}),ref:J,children:[(0,d.jsxs)("div",{className:L().OiJ,style:{position:"relative",overflow:e?"hidden":"visible",flexGrow:1},onFocus:P,onBlur:B,onMouseLeave:M,onMouseEnter:C,children:[(0,d.jsx)(Tt,{store:t,mediaType:c,fileUploadState:s,source:u,getRenderArgs:E}),o&&(0,d.jsx)(Mt().A,{store:t,resizerType:ge().f9.Horizontal,resizerAlignment:ge()._l.Left,resizeComponent:J,preserveScale:W,isHovered:Z,blockResizerStore:p},"LeftResizer"),i&&(0,d.jsx)(Mt().A,{store:t,resizerType:ge().f9.Horizontal,resizerAlignment:ge()._l.Right,resizeComponent:J,preserveScale:W,isHovered:Z,blockResizerStore:p},"RightResizer"),l&&(0,d.jsx)(Mt().A,{store:t,resizerType:ge().f9.Corner,resizerAlignment:ge()._l.Right,resizeComponent:J,preserveScale:W,isHovered:Z,blockResizerStore:p},"RightCornerResizer"),a&&(0,d.jsx)(Mt().A,{store:t,resizerType:ge().f9.Corner,resizerAlignment:ge()._l.Left,resizeComponent:J,preserveScale:W,isHovered:Z,blockResizerStore:p},"LeftCornerResizer"),r&&(0,d.jsx)(Mt().A,{store:t,resizerType:ge().f9.Vertical,resizeComponent:J,preserveScale:W,isHovered:Z,blockResizerStore:p},"BottomResizer"),!S&&(0,d.jsx)(Ct().il,{store:t,alignmentPopupStore:f,blockResizerStore:p,embedBlockStore:g,fileUploadState:s,isStoreNavigableAncestorNonEditableState:m,mediaType:c,source:u,blockLocation:n,dimensions:A,canEdit:D}),S&&x&&ne.renderFullScreen&&(0,d.jsx)($t,{store:t,blockLocation:n}),I,O&&(0,d.jsx)(K,{isHovered:Z,store:t}),O&&(0,d.jsx)(q,{isHovered:Z,store:t,hideText:re,disableActions:m||!D}),!(_||R)&&(0,d.jsx)(Yt,{show:Q,tooltipText:z,tooltipSecondaryText:F().A.formatMessage(ee),buttonText:"ALT",className:L().bmm,onClickHandler:()=>{w().h({blockStore:t,entrypoint:"block_button",environment:N})}})]}),!G&&!U.isMobile&&(0,d.jsx)(me().A,{disableCommentMenu:b,hideContent:y,store:t,hideIfSidebarOrMarginCommentsVisible:!0})]}):null,(0,d.jsx)(pe().c,{store:t,captionAriaId:v,disabled:k})]})))}return null}function $t(e){let{store:t,blockLocation:n}=e;const o=(0,r().v3)(),i=(0,s().IS)((e=>({button:{position:"absolute",right:12,top:12,background:e.buttonBackground},hovered:{background:e.buttonHoveredBackground},pressed:{background:e.buttonPressedBackground}})),[]);return(0,d.jsx)(be().p,{style:i.button,icon:e=>(0,p().e)({...e,width:16,height:16}),hoveredStyle:i.hovered,pressedStyle:i.pressed,onClick:()=>Kt(t,n,o),children:(0,d.jsx)(h().sA,{id:"embedBlock.expandFullScreen.button.label",defaultMessage:"Expand"})})}function Yt(e){let{show:t,tooltipText:n,tooltipSecondaryText:o,buttonText:i,onClickHandler:a,className:l}=e;const c=(0,r().v3)(),u=(0,s().IS)((e=>({buttonWrapper:{position:"absolute",bottom:"8px",right:"8px",background:Vt(c),borderRadius:4,overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:y().Wy.medium,letterSpacing:.2,color:"white"},tooltipText:{overflow:"hidden",textOverflow:"ellipsis"},tooltipSecondaryText:{color:e.text.contrastSecondary}})),[c]);return(0,d.jsx)(he().A,{visible:t,initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,d.jsx)("div",{style:u.buttonWrapper,children:(0,d.jsx)(ye().A,{renderTooltip:()=>(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:u.tooltipText,children:n}),o&&(0,d.jsx)("div",{style:u.tooltipSecondaryText,children:o})]}),placement:$().W.Bottom,disableTooltip:!t,render:e=>(0,d.jsx)(_e().A,{className:l,...e,ariaLabel:o,style:u.button,hoveredStyle:Pt,disabled:!t,onClick:a,children:i})})})})}},24973:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},26468:(e,t,n)=>{n.d(t,{j:()=>l});var o=()=>n(731320),i=()=>n(640653),r=()=>n(351360),a=()=>n(508496),s=()=>n(326589);function l(e){const t=(0,s().g)(),n=e.currentUser.isLoggedIn(),l=r().default.state.currentSpaceStore,c=l&&!(0,i().IL)(l);if(a().default.checkGate({gateName:"sharing_full_sidebar_awtl_in_member_workspace"})&&c||!t||!n)return!1;const d=r().default.state.mainEditorCurrentBlockStore,u=!!d&&(0,o().qb)(e,d);return Boolean(u)}},27178:(e,t,n)=>{n.d(t,{mN:()=>a,qo:()=>c});var o=()=>n(959013),i=()=>n(972435);const r=(0,o().YK)({default:{defaultMessage:"Default",id:"colors.select.lightGray"},gray:{defaultMessage:"Gray",id:"colors.select.gray"},brown:{defaultMessage:"Brown",id:"colors.select.brown"},orange:{defaultMessage:"Orange",id:"colors.select.orange"},yellow:{defaultMessage:"Yellow",id:"colors.select.yellow"},green:{defaultMessage:"Green",id:"colors.select.green"},blue:{defaultMessage:"Blue",id:"colors.select.blue"},purple:{defaultMessage:"Purple",id:"colors.select.purple"},pink:{defaultMessage:"Pink",id:"colors.select.pink"},red:{defaultMessage:"Red",id:"colors.select.red"}});function a(e){const t=r[e]||r.gray;return i().A.formatMessage(t)}const s=(0,o().YK)({foregroundColorDefault:{id:"action.foregroundColor.default.name",defaultMessage:"Default text"},foregroundColorGray:{id:"action.foregroundColor.gray.name",defaultMessage:"Gray text"},foregroundColorBrown:{id:"action.foregroundColor.brown.name",defaultMessage:"Brown text"},foregroundColorOrange:{id:"action.foregroundColor.orange.name",defaultMessage:"Orange text"},foregroundColorYellow:{id:"action.foregroundColor.yellow.name",defaultMessage:"Yellow text"},foregroundColorGreen:{id:"action.foregroundColor.green.name",defaultMessage:"Green text"},foregroundColorBlue:{id:"action.foregroundColor.blue.name",defaultMessage:"Blue text"},foregroundColorPurple:{id:"action.foregroundColor.purple.name",defaultMessage:"Purple text"},foregroundColorPink:{id:"action.foregroundColor.pink.name",defaultMessage:"Pink text"},foregroundColorRed:{id:"action.foregroundColor.red.name",defaultMessage:"Red text"},backgroundColorGray:{id:"action.backgroundColor.gray.name",defaultMessage:"Gray background"},backgroundColorBrown:{id:"action.backgroundColor.brown.name",defaultMessage:"Brown background"},backgroundColorOrange:{id:"action.backgroundColor.orange.name",defaultMessage:"Orange background"},backgroundColorYellow:{id:"action.backgroundColor.yellow.name",defaultMessage:"Yellow background"},backgroundColorGreen:{id:"action.backgroundColor.green.name",defaultMessage:"Green background"},backgroundColorBlue:{id:"action.backgroundColor.blue.name",defaultMessage:"Blue background"},backgroundColorPurple:{id:"action.backgroundColor.purple.name",defaultMessage:"Purple background"},backgroundColorPink:{id:"action.backgroundColor.pink.name",defaultMessage:"Pink background"},backgroundColorRed:{id:"action.backgroundColor.red.name",defaultMessage:"Red background"},backgroundColorDefault:{id:"action.backgroundColor.default.name",defaultMessage:"Default background"}}),l={default:{...s.foregroundColorDefault},gray:{...s.foregroundColorGray},brown:{...s.foregroundColorBrown},orange:{...s.foregroundColorOrange},yellow:{...s.foregroundColorYellow},teal:{...s.foregroundColorGreen},blue:{...s.foregroundColorBlue},purple:{...s.foregroundColorPurple},pink:{...s.foregroundColorPink},red:{...s.foregroundColorRed},default_background:{...s.backgroundColorDefault},gray_background:{...s.backgroundColorGray},brown_background:{...s.backgroundColorBrown},orange_background:{...s.backgroundColorOrange},yellow_background:{...s.backgroundColorYellow},teal_background:{...s.backgroundColorGreen},blue_background:{...s.backgroundColorBlue},purple_background:{...s.backgroundColorPurple},pink_background:{...s.backgroundColorPink},red_background:{...s.backgroundColorRed}};function c(e){return l[e]}},27654:(e,t,n)=>{n.d(t,{c:()=>o});const o=(0,n(296540).createContext)(!1);o.displayName="ColumnListContext"},27732:(e,t,n)=>{n.d(t,{t$:()=>b,Go:()=>S,cT:()=>y,Iq:()=>w,xI:()=>k,C4:()=>_});var o=()=>n(713998),i=()=>n(183558),r=()=>n(254497),a=()=>n(312296),s=()=>n(342),l=()=>n(685889),c=()=>n(878423),d=()=>n(901952),u=()=>n(299709),p=()=>n(989423);var m=()=>n(235191),g=()=>n(896628),f=()=>n(899453),v=()=>n(751156);function h(e){const{environment:t,collectionStore:n,collectionPointer:o,property:i,name:r,autoRelate:s,limit:l,targetPropertyID:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e,m={type:"relation",name:r,collection_id:o.id,collection_pointer:o,limit:"1"===l?1:void 0,property:c,version:"v2",autoRelate:s,connectedRelation:d,hideByDefaultInUnconfiguredViews:p};return(0,a().F)({environment:t,collectionStore:n,update:{[i]:m},transaction:u}),m}function _(e){const{environment:t,collectionStore:n,propertySchema:o,targetPropertyID:i,property:r,autoRelate:s,transaction:l}=e;(0,a().F)({environment:t,collectionStore:n,update:{[r]:{...o,autoRelate:s,property:i,version:"v2"}},transaction:l})}function b(e){const{environment:t,collectionStore:n,property:o,transaction:i}=e,s=n.getSchema()[o];s&&"relation"===s.type&&((0,a().F)({environment:t,collectionStore:n,update:{[o]:null},transaction:i}),(0,r().E)({collectionStore:n,update:{[o]:s},transaction:i}))}function y(e){var t,n;const{environment:o,collectionContextStore:r,collectionStore:a,property:u,propertyName:p,propertyLimit:g,propertyIcon:f,hasInverseRelation:v,inverseName:_,autoRelate:b,intl:y,connectedRelation:S,transaction:w,from:k,analyticsFrom:I,onlyCheckPermissions:x}=e,A=null===(t=c().A.state.caches[s().oB])||void 0===t?void 0:t.inMemoryRecordCache,C=A?null===(n=e.targetCollectionStore)||void 0===n?void 0:n.clone(A):e.targetCollectionStore,T=C.pointer.id===a.id&&Boolean(v)?"separate_property":"same_property",M=a.getSchema()[u],P="subitem"===k||void 0,{propertyId:B}=function(e){const{environment:t,collectionStore:n,property:o,limit:r,collectionPointer:a,selfRelationType:s,oneWay:l,autoRelate:c,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p}=e;if(!n)return;const m=n.getSchema()[o];if(!m)return;const g=a.id===n.id?"same_property"===s?o:(0,i().Ay)():l?void 0:(0,i().Ay)();return{propertyId:g,relationPropertySchema:h({environment:t,collectionStore:n,collectionPointer:a,property:o,name:m.name,autoRelate:c,limit:r,targetPropertyID:g,connectedRelation:d,transaction:u,hideByDefaultInUnconfiguredViews:p})}}({environment:o,collectionStore:a,property:u,limit:g,collectionPointer:C.pointer,selfRelationType:T,oneWay:!v,autoRelate:b,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})??{};let R;if((null==M?void 0:M.name)!==p&&(m().YO({collectionStore:a,property:u,name:p,transaction:w}),(0,d().V)({environment:o,collectionContextStore:r,property:u,from:I??"view_settings",action:"rename"})),S&&f&&m().yC({collectionStore:a,property:u,icon:f,transaction:w}),x&&v&&null!=a&&a.canEditCollection()&&B){const e=l().OV({inverseName:_,collectionStore:a,propertySchema:M,intl:y,targetCollectionStore:C,from:k});R=h({environment:o,collectionStore:C,collectionPointer:a.pointer,property:B,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:u,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})}if(v&&l().uf(C)&&B){const e=l().OV({inverseName:_,collectionStore:a,propertySchema:M,intl:y,targetCollectionStore:C,from:k});R=h({environment:o,collectionStore:C,collectionPointer:a.pointer,property:B,name:e,autoRelate:b,limit:"subitem"===k?"1":"no_limit",targetPropertyID:u,connectedRelation:S,transaction:w,hideByDefaultInUnconfiguredViews:P})}return{propertyId:u,inverseRelationPropertyId:v?B:void 0,targetRelationPropertySchema:R}}function S(e){var t;const{environment:n,collectionContextStore:o,property:r,hasInverseRelation:a,inverseName:d,autoRelate:u,intl:p,transaction:g}=e,f=l().Jq(o,r);if(!f||"relation"!==f.type)return;const v=null===(t=c().A.state.caches[s().oB])||void 0===t?void 0:t.inMemoryRecordCache;let y=l().pg(o,f);y&&v&&(y=y.clone(v));const S=o.collectionStore();if(!S||!y)return;const w=l().OV({inverseName:d,collectionStore:S,propertySchema:f,intl:p,targetCollectionStore:y});if(a&&!l().D5(o,r,y)){const e=(0,i().Ay)();_({environment:n,collectionStore:S,propertySchema:f,property:r,targetPropertyID:e,autoRelate:u,transaction:g}),h({environment:n,collectionStore:y,collectionPointer:S.pointer,property:e,name:w,autoRelate:u,limit:"no_limit",targetPropertyID:r,transaction:g,hideByDefaultInUnconfiguredViews:void 0})}else if(a){const e=f.property;if(!e)return;m().YO({collectionStore:y,property:e,name:w,transaction:g}),u&&(m().qV({collectionStore:S,property:r,autoRelate:u,transaction:g}),m().qV({collectionStore:y,property:e,autoRelate:u,transaction:g}))}else{u&&m().qV({collectionStore:S,property:r,autoRelate:u,transaction:g});const e=f.property;if(!e)return;_({environment:n,collectionStore:S,propertySchema:f,property:r,targetPropertyID:y.id===S.id?r:void 0,autoRelate:u,transaction:g}),b({environment:n,collectionStore:y,property:e,transaction:g})}}function w(e){const{store:t,propertyId:n,value:o,environment:i,relatedPageId:r,propertySchema:a,transaction:s,collectionContextStore:l,analyticsData:c,isUnthrottled:d}=e;if(f().zB({environment:i,store:t,propertyId:n,id:r,transaction:s}),l&&c){var p;const{analyticsFrom:e,isFromBulkActionsToolbar:t}=c;(0,u().E)({environment:i,block_id:r,property:n,property_type:a.type,from:e,collectionContextStore:l,isFromBulkActionsToolbar:t,isUnthrottled:d,integration_id:null===(p=a.connectedRelation)||void 0===p?void 0:p.integration_id,action:"remove",value_count:o.length})}}function k(e){const{propertyFormat:t,visibility:n,collectionStore:i,property:r,environment:a}=e,s=t.property,c=l().B7({collectionStore:i,property:r}),d=(0,o().Vf)(c,s,!n),u={...l().TA(i)};u[r]||(u[r]={}),u[r].related_properties=d,v().createAndCommit({userAction:"collectionRelationActions.updateRelationPropertyVisibility",environment:a,canUndo:!0,perform:e=>{g().zA({stores:[i],update:{collection_relation_options:u},transaction:e})}}),function(e,t){p().vd(e,"relation_update_property_visibility",t)}(a,{collection_id:i.id,property_id:r,related_property_id:s,visible:!n})}},29037:(e,t,n)=>{n.r(t),n.d(t,{checkmarkIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M15.784 4.002a.625.625 0 0 1 .214.857L9.445 15.784a.625.625 0 0 1-1.01.085l-4.37-5.098a.625.625 0 0 1 .948-.814l3.806 4.44 6.109-10.181a.625.625 0 0 1 .857-.214"})},i=(0,n(340498).wt)("checkmark",o)},30175:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{url:"",status:"draft",name:""}}}const i=new o},30626:(e,t,n)=>{n.d(t,{_:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("dots",{viewBox:"0 0 13 3",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M3,1.5A1.5,1.5,0,1,1,1.5,0,1.5,1.5,0,0,1,3,1.5Z"}),(0,o.jsx)("path",{d:"M8,1.5A1.5,1.5,0,1,1,6.5,0,1.5,1.5,0,0,1,8,1.5Z"}),(0,o.jsx)("path",{d:"M13,1.5A1.5,1.5,0,1,1,11.5,0,1.5,1.5,0,0,1,13,1.5Z"})]})})},31278:(e,t,n)=>{n.d(t,{FU:()=>o,zz:()=>r});const o=5;class i extends(()=>n(757695))().default{getInitialState(){return{type:"idle"}}isAvailable(){return"ready"===this.state.type&&this.state.questions.length>0}}const r=new i},33791:(e,t,n)=>{function o(e){const{collectionStore:t,collectionViewBlockStore:n,checkNavigableAncestorLocked:o}=e;if(!n||!n.isReady()||null==t||!t.isReady())return!1;if(o&&n.isNavigableAncestorNonEditableState())return!1;const i=null==t?void 0:t.canEditCollection(),r=null==t?void 0:t.getParentBlockStore(),a=null==r?void 0:r.isNonEditableState();return Boolean(i&&!a)}n.d(t,{v:()=>o})},34542:(e,t,n)=>{n.d(t,{Fq:()=>B,f6:()=>P,oC:()=>R,yO:()=>M});n(16280);var o=()=>n(584262),i=()=>n(857639),r=()=>n(126818),a=()=>n(313784),s=()=>n(665344),l=()=>n(94830),c=()=>n(763824),d=()=>n(973647),u=()=>n(466614),p=()=>n(160568),m=()=>n(449506),g=()=>n(901389),f=()=>n(394893),v=()=>n(496414),h=()=>n(857783),_=()=>n(436572),b=()=>n(426116),y=()=>n(812182),S=()=>n(855801),w=()=>n(211716),k=()=>n(972435),I=()=>n(530681),x=()=>n(816360),A=()=>n(351360),C=()=>n(714818),T=()=>n(753035);async function M(e){const{spaceViewStore:t}=e;await b().tR({...e,userSettingsStore:A().default.state.currentUserSettingsStore,userRootStore:A().default.state.currentUserRootStore,pageVisitSource:o().y8.DuplicateTemplateSwitchSpace,navigationType:"switchingToOrLoadingSpace"}),T().A.setState({...T().A.state,spaceStore:t.getSpaceStore(),spaceViewStore:t,teamStore:void 0})}async function P(e){const{open:t,blockStore:n,teamStore:o,spaceStore:i,spaceViewStore:r}=T().A.state;if(t&&n&&i&&r)return B({environment:e,blockStore:n,spaceStore:i,spaceViewStore:r,teamStore:o})}async function B(e){const{environment:t,blockStore:n,spaceStore:o,spaceViewStore:r,teamStore:m,hideModal:h=!1,from:w,templateId:I,duplicationStartedToastProps:x={},duplicationFinishedToastProps:A={},isEmailShared:C,isMobile:M=!1,showDuplicationStartedToast:P=!0,showDuplicationFinishedToast:B=!0}=e,D=k().A.getIntl(),N=await R(t,n.id);P&&function(e){const{intl:t,toastProps:n={},isMobile:o=!1}=e;if(o)return void _().D6({label:t.formatMessage({id:"inApp.template.duplication.started.toast.mobile.message",defaultMessage:"Template is being added to your private space. We will let you know when it’s ready to use."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});y().HK({id:"template_duplication_toast",title:t.formatMessage({id:"inApp.template.duplication.started.toast.title",defaultMessage:"Template is being added"}),message:t.formatMessage({id:"inApp.template.duplication.started.toast.message",defaultMessage:"We will let you know when it’s ready to use in your workspace"}),presentationType:"transient",icon:a().S,...n})}({intl:D,toastProps:x,isMobile:M});const L=Date.now();let O,U=!1;const F=T().A.state.isFromTemplateGallery||"inApp"===w||"mobileApp"===w||"notion_template_gallery"===w||"public_page"===w&&void 0!==N&&(0,l().RS)(N);try{await Promise.all([b().yV({environment:t,spaceViewStore:r}),(0,c().wR)(0).then((()=>{T().A.setState({...T().A.state,open:!1})}))]);const e=function(e,t){const n=t?{id:e.idCreator.idInMain(s()._i),table:s()._i}:void 0;return n}(t,F),i=T().A.state.isFromTemplateGallery||"notion_template_gallery"===w?"web_gallery":"inApp"===w?"in_app":"mobileApp"===w?"mobile_app":"public_page",a={duplicateOnlyCollectionSchema:!1,addCopyName:!1,appendWithoutAfter:!0,unlockPage:!0,event:void 0,installationImprint:e},{shouldUseDuplicateTemplateBlock:u}=await(0,S().D6)();if(u(i)||await f().Xm({environment:t,blockId:n.id,spaceId:o.id,templateId:I,installationId:null==e?void 0:e.id,source:i,context:"public_page_duplicate_multiple_workspace",isEmailShared:C}),O=await f().Jx({environment:t,store:n,newParentStore:m||o,templateInstallationMetadata:{source:i,context:"public_page_duplicate_multiple_workspace",isEmailShared:C,isListedTemplate:Boolean(N),isFirstPartyPaidTemplate:void 0!==N&&(0,l().Z1)(N),isFromDuplicateParam:T().A.state.isFromDuplicateParam},...a}),!O||d().Q.isFail(O))throw new Error("Failed to duplicate template");const p=d().Q.unwrap(O);if(null==p||!p.length)throw new Error("Failed to duplicate template");if(U=!0,B){const e=Date.now()-L;e>=5e3?E({environment:t,template:N,intl:D,blockStores:p,toastProps:A,isMobile:M}):await new Promise((n=>{setTimeout((()=>{E({environment:t,template:N,intl:D,blockStores:p,toastProps:A,isMobile:M}),n()}),5e3-e)}))}return p[0]}catch(V){h?i().log({from:"client/checkoutActions",level:"error",type:"aiUpgrade.duplicationFailed",data:{message:"AI Upgrade duplication failed.  Block store not found"}}):O&&d().Q.isFail(O)&&u().Rk(O.error.error)?u().yj({product:O.error.error.clientData.metadata.product}):g().f1(D.formatMessage({id:"forkPageModalActions.duplicateToHelper.failed",defaultMessage:"Template duplication failed"}))}finally{const e=Date.now()-L;p().hB(t,{from:"notion_template_gallery"!==w&&"public_page"!==w&&w?w:"publicPage",success:U,template_id:I??(null==N?void 0:N.id),template_block_id:n.id,target_space_id:o.id,context:"public_page_duplicate_multiple_workspace",template_duplication_duration_ms:e,template_duplication_duration_with_minimum_ms:e,public_template_name:(null==N?void 0:N.name)??""}),v().V()}}async function R(e,t){let n;const o=await m().callApi({eventName:"inAppGetTemplateByBlockId",environment:e,data:{blockId:t}});return"success"===o.type&&o.data.success&&o.data.template&&(n=o.data.template),n}function E(e){const{template:t,intl:n,environment:i,blockStores:a,toastProps:s={},isMobile:l=!1}=e;if(l)return _().N2(),void _().AC({blockToOpenStore:a[0],onOpenBlock:()=>{C().A.setState({...C().A.state,open:!1})},item:{label:n.formatMessage({id:"inApp.template.duplication.finished.toast.mobile.message",defaultMessage:"Template installation successful. You can now use it in your workspace."}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}}});y().HK({id:"template_duplication_toast",title:n.formatMessage({id:"inApp.template.duplication.finished.toast.title",defaultMessage:"Template is ready"}),message:t?n.formatMessage({id:"inApp.template.duplication.finished.toast.templateName.message",defaultMessage:"''{templateName}'' has been added to your workspace"},{templateName:t.name}):n.formatMessage({id:"inApp.template.duplication.finished.toast.message",defaultMessage:"This template has been added to your workspace"}),presentationType:"persistent",iconGroup:r().g,iconGroupColorName:"greenPrimary",iconGroupVariant:"default",actions:{primary:{title:n.formatMessage({id:"inApp.template.duplication.finished.toast.seeTemplate.button",defaultMessage:"See template"}),onAction:()=>{h().uK({environment:i,store:a[0],visitType:w().ig.Link,pageVisitSource:o().y8.Duplicate}),y().UW("template_duplication_toast"),x().A.state.isModalOpen&&I().SU({environment:i})}}},...s})}},34556:(e,t,n)=>{n.d(t,{x:()=>i});var o=()=>n(945895);function i(){o().A.setState({...o().A.state,isActive:!1})}},35392:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(251057),a=n(474848);const s=function(e){let{name:t,style:i,onlyShowFirst:r}=e;const s=(0,o().v3)().device.isMac;return(0,a.jsx)(n(859428).A,{renderTooltip:()=>(0,a.jsx)(c,{name:t}),delayThreshold:0,render:e=>(0,a.jsx)("span",{style:i,...e,children:(0,a.jsx)(l,{onlyShowFirst:r,name:t,removePlus:s})})})};function l(e){let{name:t,onlyShowFirst:n,removePlus:s}=e;const l=(0,o().v3)(),c=(0,i().K8)((()=>(0,r().dK)({name:t,onlyShowFirst:n,environment:l})),[l,t,n]);return(0,a.jsx)(a.Fragment,{children:s?c.replaceAll("+",""):c})}function c(e){let{name:t}=e;const n=(0,o().v3)(),s=(0,i().K8)((()=>(0,r().dK)({name:t,environment:n,forTooltip:!0})),[n,t]);return(0,a.jsx)(a.Fragment,{children:s})}},35622:(e,t,n)=>{n.d(t,{VN:()=>s,o9:()=>a,wX:()=>l});var o=()=>n(195613),i=()=>n(640867),r=()=>n(124952);function a(e){var t;const{environment:n,renderFullScreenNode:a,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d}=e;(0,r().d)(n,{type:"open"}),i().A.setState({...i().A.state,isOpen:!0,fullscreenNodeAnimationComplete:!1,renderFullScreenNode:a,startScrollTop:(null===(t=o().A.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,fullScreenNodeRect:s,contentAspectRatio:l,blockStore:c,imageUrl:d})}function s(){i().A.setState({...i().A.state,isOpen:!1})}function l(e){return e<1020?0:32}},36088:(e,t,n)=>{n.d(t,{M:()=>a});var o=()=>n(908006),i=()=>n(778417),r=()=>n(725614);async function a(e){const{discussionInputStore:t,environment:n}=e,a=n.device.isAndroid;await o().default.afterNextFlush(),a||i().IU({preventDismissMobileKeyboard:!0,environment:n}),r().setSelectionAtEnd({store:t.state.textStore})}},36629:(e,t,n)=>{n.d(t,{XO:()=>j,h3:()=>U,nZ:()=>V,pG:()=>F});n(16280),n(944114),n(898992),n(823215),n(354520),n(803949),n(581454);var o=()=>n(66689),i=()=>n(716016),r=()=>n(970013),a=()=>n(617871),s=()=>n(857639),l=()=>n(388693),c=()=>n(792071),d=()=>n(179034),u=()=>n(332393),p=()=>n(96689),m=()=>n(854150),g=()=>n(496603),f=()=>n(534177),v=()=>n(313892),h=()=>n(254497),_=()=>n(312296),b=()=>n(519839),y=()=>n(601734),S=()=>n(989423),w=()=>n(972435),k=()=>n(395963),I=()=>n(351360),x=()=>n(53137),A=()=>n(630116),C=()=>n(908447),T=()=>n(449506),M=()=>n(84448),P=()=>n(235191),B=()=>n(27732),R=()=>n(686526),E=()=>n(803074),D=()=>n(896628),N=()=>n(751156);const L=(0,n(959013).YK)({aiCustomPromptDefaultPropertyName:{id:"collectionSettingsCreatePropertyActions.createProperty",defaultMessage:"Text"}});function O(e){const{environment:t,collectionContextStore:n,collectionUri:o,feature:i,transaction:r,addFeatureFrom:a,createFeatureStartTime:s}=e;if("dependencies"in i)for(const l of i.dependencies)"property"===l.type&&l.collectionUri===o&&(0,C().Z)({environment:t,collectionContextStore:n,from:"view_settings",property:l.uri,property_type:l.propertySchema.type,is_suggested_property:!0,feature:{id:l.uri,from:a,type:i.uri}});if("dependencies"in i&&i.dependencies.map((e=>e.type)).every((e=>"property"===e))){const e=n.collectionViewStore(),t=n.getPropertyFormatKey(),o=n.normalizedFormatStore.state;if(t&&e){const n=o[t]||[],a=[...n];i.dependencies.forEach((e=>{const t=n.findIndex((t=>t.property===e.uri));-1===t?a.push({visible:!0,property:e.uri}):a[t]={...n[t],visible:!0}})),D().zA({stores:[e],update:{[t]:a},transaction:r})}}if(void 0!==i.propertyIdCollectionSettingToNavigateTo){const e={type:"property",property:i.propertyIdCollectionSettingToNavigateTo,selectNameInitial:!1,formatKey:n.getPropertyFormatKey()};R().a2({collectionSettingsStore:n.settingsStore,item:e})}r.postSubmitCallbacks.push((e=>{S().vd(t,"collection_create_suggested_property_latency",{collection_uri:i.collectionUri,feature_uri:i.uri,time:Date.now()-s,status:Boolean(e)?"fail":"success"})}))}async function U(e){var t;const{appTemplatesSetupActions:n,appTemplatesSprintBoardActions:r,appConfigs:c}=await y().Aw.load(),{environment:g,collectionContextStore:f,feature:h,addFeatureFrom:_}=e,{currentSpaceViewStore:b}=I().default.state,S=f.collectionStore(),w=null==S?void 0:S.getParentBlockStore(),k={},C=e=>{(0,s().log)({level:"error",from:"collectionSettingsCreatePropertyActions",type:"handleCreateNewSuggestedProperty",data:{collectionId:null==S?void 0:S.id,miscDataToConvertToString:{featureUri:h.uri,addFeatureFrom:_,...k,...e}}})};if(!S||!w)return void C({hasCollectionStore:Boolean(S),hasCollectionViewBlockStore:Boolean(w)});if((0,v().u1)(h))return async function(e){const{environment:t,collectionContextStore:n,feature:i,addFeatureFrom:r}=e,{untypedFeaturesSetupActions:a}=await y().Aw.load(),s=n.collectionStore(),l=null==s?void 0:s.getParentBlockStore();if(!s||!l)return;const c=Date.now();N().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewUntypedFeature",canUndo:!0,perform:e=>{a.applyUntypedFeature({environment:t,collectionStore:s,collectionViewBlockStore:l,feature:i,transaction:e}),O({environment:t,collectionContextStore:n,collectionUri:o().iH,feature:i,transaction:e,addFeatureFrom:r,createFeatureStartTime:c})}})}({environment:g,collectionContextStore:f,feature:h,addFeatureFrom:_});const P=f.collectionViewStore(),B=null==w?void 0:w.getParentStore(),R=null==S||null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri,L=R&&(0,v().lS)(c(),R);if(k.appConfigUri=L&&L.uri,!B||B.table!==p().NX&&B.table!==d().ev&&B.table!==m().yK||!L)return void C({hasAppParentStore:Boolean(B),appParentStoreTable:null==B?void 0:B.table,appConfigUri:L?L.uri:void 0});const U=S.getSchema(),F=w.getFormat().app_id;k.appId=F;const V=F?await T().callApi({eventName:"getCollectionViewBlocksByAppId",environment:g,data:{spaceId:w.getSpaceId(),appId:F}}):void 0,j="success"===(null==V?void 0:V.type)&&V.data.result.length?V.data.result.map((e=>A().Bv.createChildStore(B,{table:d().ev,id:e.blockId,spaceId:w.getSpaceId()}))):[w],z=h.integrationId;if(z){const e=x().A.getIntegrationsAsRecordMap().getValue({table:u().Li,id:z});if(!e||!(0,l().v_)(e))return void C({hasIntegration:Boolean(e)});await E().C4(g,S,e,Boolean(h.canOnlyAdminAuth))}z===a().ob&&U&&0===(0,i().yP)(U).length&&await M().c({environment:g,collectionStore:S});const H=Date.now();N().createAndCommit({environment:g,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewSuggestedProperty",canUndo:!0,perform:e=>{var t;if(!b)return void C({hasCurrentSpaceViewStore:!1});const i=null===(t=S.getFormat())||void 0===t?void 0:t.app_config_uri;if(!i)return void C({hasCollectionUri:!1});const a=n.applyTypedFeatures({environment:g,spaceViewStore:b,appParentStore:B,appUri:L.uri,features:[{type:"simple",featureUri:h.uri}],transaction:e,createOrModify:"modify",appCollectionViewBlockStores:j});r.createSprintPage({environment:g,spaceViewStore:b,appParentStore:B,transaction:e,blockStores:a,creationEntryPoint:{type:"sprint_relation"}}),"notion://tasks/sub_task_feature"===h.uri&&D().zA({stores:[S],update:{subitem_property:o().yx.SubTaskRelation},transaction:e}),"notion://tasks/task_dependencies_feature"===h.uri&&(D().zA({stores:[S],update:{collection_default_arrows_by:o().yx.BlockingRelation},transaction:e}),P&&D().zA({stores:[P],update:{timeline_arrows_by:{property:o().yx.BlockingRelation}},transaction:e})),O({environment:g,collectionContextStore:f,collectionUri:i,feature:h,transaction:e,addFeatureFrom:_,createFeatureStartTime:H}),e.isEmpty()&&C({isEmptyTransaction:!0})}})}function F(e){let{propertyType:t,collectionContextStore:n,propertyId:o}=e;switch(t){case"ai_custom_prompt":case"ai_summary":case"ai_extract":case"ai_translate":return R().a2({collectionSettingsStore:n.settingsStore,item:{type:"propertyAiAutofill",propertySchema:n.normalizedSchemaStore[o],property:o}});case"ai_keywords":return R().a2({collectionSettingsStore:n.settingsStore,item:{type:"property",property:o,formatKey:n.getPropertyFormatKey()}});default:(0,f().HB)(t)}}function V(e){const{environment:t,collectionContextStore:n,propertyType:o,isSuggestedProperty:i,propertyName:a,selectOptions:s,from:l}=e,c=n.collectionStore(),d=n.collectionViewStore(),u=n.getPropertyFormatKey();if(!c)return;if("relation"===o)return void R().a2({collectionSettingsStore:n.settingsStore,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties"}});let p=a;"ai_custom_prompt"===o&&(p=w().A.formatMessage(L.aiCustomPromptDefaultPropertyName));const{performResult:m}=N().createAndCommit({userAction:"collectionSettingsCreatePropertyActions.handleCreateNewStandardProperty",environment:t,canUndo:!0,perform:e=>P().IL({environment:t,collectionStore:c,collectionViewArgs:d&&u?{collectionViewStore:d,format:d.getFormat(),formatKey:u}:void 0,propertyName:p,propertyType:o,selectOptions:s,transaction:e})});(0,r().hN)(o)?F({propertyType:o,propertyId:m,collectionContextStore:n}):R().n1({collectionSettingsStore:n.settingsStore,property:m,formatKey:u,selectNameInitial:!0});const g="view_settings"===l?{feature:{id:m,from:"new_property",type:o}}:{};(0,C().Z)({environment:t,collectionContextStore:n,from:l,property_type:(0,r().v2)(o),property:(0,r().hN)(o)?o:void 0,is_suggested_property:i,...g})}async function j(e){const{environment:t,collectionContextStore:n,intl:o,connectedRelationProperty:s,from:l,untypedFeatureArgs:d,propertyGroupId:u,propertyLimit:p,skipDatabaseActions:m}=e,v=n.collectionStore(),y=n.collectionViewStore(),S=n.getPropertyFormatKey();if(!v||!S)return;const w=s.integration.id;(0,a().XO)(w)||await E().C4(t,v,s.integration,Boolean(s.canOnlyAdminAuth));const I=v.getSchema();let x;w===a().ob&&I&&0===(0,i().yP)(I).length&&(x=await M().c({environment:t,collectionStore:v})),N().createAndCommit({environment:t,userAction:"collectionSettingsCreatePropertyActions.handleCreateNewConnectedRelationProperty",canUndo:!0,perform:e=>{x&&P().IL({environment:t,collectionStore:v,collectionViewArgs:y?{collectionViewStore:y,format:y.getFormat(),formatKey:S}:void 0,propertyType:"auto_increment_id",transaction:e,propertyGroupId:u});const i=v.getDeletedSchema(),I=(0,f().WP)(i).map((e=>{let[t,n]=e;if(n&&r().UU(n)&&n.connectedRelation.integration_id===a().ob)return{propertyId:t,propertySchema:n}})).filter(f().O9);if(!g().Im(I)){const{propertyId:o}=I[0],r=(0,b().KA)({deletedSchema:i,property:o});if(!r)throw new Error("Deleted property schema was not found");u&&(0,k().En)({collectionStore:v,groupId:u,propertyId:o,transaction:e}),(0,_().F)({environment:t,collectionStore:v,update:r.updateSchema,transaction:e}),(0,h().E)({collectionStore:v,update:r.updateDeletedSchema,transaction:e});const a={type:"property",property:o,formatKey:S};return void R().a2({collectionSettingsStore:n.settingsStore,item:a})}const A=c().Bj6.fromIntegration(s.integration),T=E().qM({environment:t,pattern:s.pattern,integration:A,parentCollectionStore:v,transaction:e}),M=P().IL({environment:t,collectionStore:v,collectionViewArgs:y&&S?{collectionViewStore:y,format:y.getFormat(),formatKey:S}:void 0,propertyType:"relation",transaction:e,propertyId:null==d?void 0:d.propertyId});if(B().cT({environment:t,collectionContextStore:n,collectionStore:v,property:M,propertyName:s.name,propertyIcon:s.integration.info.icon,propertyLimit:p??"no_limit",targetCollectionStore:T,hasInverseRelation:!0,autoRelate:void 0,intl:o,connectedRelation:{integration_id:w},transaction:e}),!d)if(m){const e=v.getSchema(),t=null==e?void 0:e[M];R().a2({collectionSettingsStore:n.settingsStore,item:{type:"connectedRelationDatabaseActions",source:"connectedRelationAddProperties",rootPropertyId:M,integrationId:w,rootPropertySchema:t,skipDatabaseActions:!0}})}else{const e={type:"property",property:M,formatKey:S};R().a2({collectionSettingsStore:n.settingsStore,item:e})}(0,C().Z)({environment:t,collectionContextStore:n,from:"view_settings",property_type:"relation",integration_id:w,feature:{id:M,from:l,type:`notion://feature/connection_${w}`}})}})}},37250:(e,t,n)=>{n.d(t,{A6:()=>l,Jz:()=>c,WH:()=>s,ZP:()=>u,mR:()=>d});var o=()=>n(495989),i=()=>n(351360),r=()=>n(751156),a=()=>n(755199);function s(){const{currentUserSettingsStore:e}=i().default.state;if(!e||!e.isReady())return;const t=e.getSettings();return t?t.wiki_onboarding_phase??"unseen":void 0}function l(e){const t=s();if(void 0===t)return;const n=o().wZ.indexOf(t);if(-1!==n&&n<o().wZ.length-1){const{currentUserSettingsStore:t}=i().default.state;if(!t)return;r().createAndCommit({userAction:"wikiOnboardingActions.advanceOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:o().wZ[n+1]}})}})}}function c(e){const t=s();if(void 0===t)return;const n=o().wZ.indexOf(t);if(-1!==n&&n>1){const{currentUserSettingsStore:t}=i().default.state;if(!t)return;r().createAndCommit({userAction:"wikiOnboardingActions.previousOnboardingStep",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:o().wZ[n-1]}})}})}}function d(e){const{currentUserSettingsStore:t}=i().default.state;t&&"unseen"===s()&&a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"home"}})}function u(e){if("complete"===s())return;const{currentUserSettingsStore:t}=i().default.state;t&&r().createAndCommit({userAction:"wikiOnboardingActions.completeOnboarding",environment:e,canUndo:!0,perform:e=>{a().mJ({userSettingsStore:t,transaction:e,data:{wiki_onboarding_phase:"complete"}})},userId:t.id})}},37433:(e,t,n)=>{n.r(t),n.d(t,{ROLE_MESSAGE_MAP:()=>le,TeamRoles:()=>re,TeamRolesWithGuest:()=>ae,areUpdatesFiltersEnabled:()=>U,callGetTeamsApi:()=>z,canCreateTeam:()=>X,compareTeamspaceStores:()=>ie,createTeamInviteLink:()=>ce,getAccessLevelAndPermissionsForTeamCreatedFromPage:()=>J,getActiveTeamCount:()=>he,getActiveTeamsFromCache:()=>j,getAllTeamsInSpaceForEnterpriseAdmin:()=>$,getCanRestoreTeam:()=>ye,getDefaultActiveTeamCount:()=>be,getPermissionRowInfos:()=>me,getTeamMemberCountAndSampleUserIds:()=>oe,getTeamMembershipCounts:()=>Se,getTeamsWithAggregateData:()=>W,getTeamsWithAggregateDataFromCache:()=>H,getTeamsWithUserDirectMembership:()=>Y,isDefaultActiveTeam:()=>_e,isEligibleToCreateTeamspace:()=>ve,isEligibleToUpgradeMemberToOwnerForUnownedTeam:()=>fe,isHideEmptySidebarTogglesEnabled:()=>O,isPersonalHomeDefaultLandingPageEnabled:()=>N,isPersonalHomeEnabledForUser:()=>L,isTeamInviteLinkDisabled:()=>de,isTeamsEnabled:()=>V,isUnownedTeam:()=>Z,partitionArchivedAndUnarchivedTeams:()=>ue,shouldShowLockIconForTeam:()=>Q,shouldShowZeroTeamsExperience:()=>te,teamRoleMessages:()=>se,useShouldShowZeroTeamsExperience:()=>ne,useTeams:()=>K,useTeamsFromCache:()=>G,useTeamsWithAggregateData:()=>q,useUnarchivedTeams:()=>pe});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(908872);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(857639),s=()=>n(187174),l=()=>n(386164),c=()=>n(433847),d=()=>n(68263),u=()=>n(388821),p=()=>n(854150),m=()=>n(798880),g=()=>n(762433),f=()=>n(468006),v=()=>n(496603),h=()=>n(534177),_=()=>n(449506),b=()=>n(780054),y=()=>n(646736),S=()=>n(351360),w=()=>n(605402),k=()=>n(508496),I=()=>n(630116),x=()=>n(988499),A=()=>n(486130),C=()=>n(134217),T=()=>n(749240),M=()=>n(134206),P=()=>n(912979),B=()=>n(878377),R=()=>n(499446),E=()=>n(731320),D=()=>n(640653);function N(e){return Boolean(null==e?void 0:e.getSettings().was_in_personal_home_default_treatment)}function L(){return(0,B().TMT)()}function O(){return k().default.checkGate({gateName:"sidebar_pages_hide_toggles"})}function U(){return b().A.isAdminMode}const F=v().Bj((()=>new(n(496506).default)((()=>{const{currentSpaceStore:e}=S().default.state;return!!e&&e.isTeamsEnabled()}),{debugName:"teamsEnabledStore"})));function V(){return F().state}function j(){return x().A.state.teams.filter((e=>void 0===e.getArchivedBy()))}async function z(e){const t=await _().callApi({eventName:"getTeams",environment:e.environment,data:{spaceId:e.spaceId,includeArchived:e.includeArchived,onlyJoined:e.onlyJoined},userId:e.currentUserId,headers:(0,l().WS)({cellId:void 0,recordId:void 0,spaceId:e.spaceId})});if("failed"!==t.type)return t.data;a().rateLimitedLog({from:"teamsHelpers",level:"error",type:"getTeamsFailed"})}function H(e){const t=j(),n=t.length>0,o=void 0!==x().A.state.lastEmitData.value,i=x().A.state.lastEmitData.spaceId===e;if(n&&o&&i)return{teams:t,teamAggregateData:x().A.state.teamAggregateData}}async function W(e){const{fromCache:t,environment:n,spaceStore:o,includeArchived:i,currentUserId:r}=e;if(t&&!i){const e=H(o.id);if(e)return e}const a=await z({environment:n,spaceId:o.id,currentUserId:r,includeArchived:i,onlyJoined:!1});if(!a){var s;const e=null===(s=n.defaultRecordCache)||void 0===s?void 0:s.persistedRecordCache;if(e){const t=await e.getTeams({spaceId:o.id,userId:r,includeArchived:!1});if(t&&t.length>0){const e=t.map((e=>e.id)).map((e=>I().h4.createChildStore(o,{table:p().yK,id:e}))),n={};return t.forEach((e=>{n[e.id]=Se(e)})),{teams:e,teamAggregateData:n}}}return}const{teamIds:l,teamAggregateData:c}=a;return{teams:l.map((e=>I().h4.createChildStore(o,{table:p().yK,id:e}))),teamAggregateData:c}}function q(e){const t=(0,i().v3)(),n=(0,r().K8)((()=>e.spaceStore??S().default.state.currentSpaceStore),[e.spaceStore]),o=(0,r().K8)((()=>{var e;return null===(e=S().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[{value:a}]=(0,s().Yb)((async()=>{if(n&&o)return await W({fromCache:e.fromCache,environment:t,spaceStore:n,currentUserId:o,includeArchived:e.includeArchived})}),[t,n,o,e.fromCache,e.includeArchived]);return a}function K(e){const t=q(e);return(0,o.useMemo)((()=>(null==t?void 0:t.teams)??[]),[t])}function G(e){const t=(0,r().K8)((()=>e??S().default.state.currentSpaceStore),[e]);return(0,r().K8)((()=>{var e;return void 0===(null==t?void 0:t.id)?[]:(null===(e=H(t.id))||void 0===e?void 0:e.teams)??[]}),[null==t?void 0:t.id])}async function $(e){let{spaceStore:t,currentUserId:n,includeArchived:o,minRoleOnTeamStores:i,environment:r}=e;if(!t||!n)return[];const a=await _().callApi({eventName:"getAllTeamsInSpaceForAdmin",environment:r,data:{spaceId:t.id,includeArchived:o},userId:n});if("failed"===a.type)return[];const s=a.data.teamIds.map((e=>I().h4.createChildStore(t,{table:p().yK,id:e}))),l=[],d=[];for(const u of s){const e=u.getRole()??"none";(0,c().sG)(e,i)?d.push(u.id):l.push(u)}const m=u().RecordMap.create(a.data.recordMap);M().A.initialize({environment:r,userId:n,spaceId:t.id,teamIds:a.data.teamIds,getRecordWithRole:e=>({role:i,value:m.getValue(e)})});const g=d.map((e=>M().A.createTeamStoreFromCache({environment:r,teamId:e,spaceId:t.id,userId:n}))).filter(h().O9);return[...l,...g]}function Y(e){return x().A.state.teams.filter((t=>t.isMemberOrGuest(e,new Set)))}function Q(e){return!!e&&"private"===(0,f().MA)(e)}function Z(e){return e&&(0,f().qu)(e)}function X(e){let{environment:t,spaceStore:n}=e;return!!n&&(!(0,D().IL)(n)&&((0,D().s7)(t)||!n.getDisableTeamCreation()))}function J(e){const t=(0,E().i0)(e).map((e=>e.permissionItem)),n=t.find(d().Lg),o=(null==n?void 0:n.role)??"none";let i=[];const r=T().subscriptionDataStoreInstance.state;r&&(i=(0,C().Ye)(r));const a=i.reduce(((e,t)=>(e.add(t.userId),e)),new Set),s=t.filter((e=>!(!(0,d().B2)(e)||!a.has(e.user_id))||!!(0,d().Ds)(e))),l=function(e){if(0===e.length)return;return e.reduce(((e,t)=>(0,c().Y1)(t,e)?t:e),e[0])}(s.map((e=>e.role)))??"read_and_write";return{accessLevel:"none"===o?"private":"closed",spacePermissionRole:o,teamPermissionRole:(0,c().$q)(l,o),members:s.map((e=>{const{type:t}=e;return"user_permission"===t?{entity_type:"user",type:"member",user_id:e.user_id}:"group_permission"===t?{entity_type:"group",type:"member",group_id:e.group_id}:void(0,h().HB)(t)}))}}function ee(e){let{environment:t,currentSpaceStore:n,billingData:o}=e;return!!n&&(!t.device.isMobile&&!n.isTeamsEnabled()&&!(0,g().et)(o)&&(0,D().p4)(n))}function te(e,t){const{currentSpaceStore:n}=S().default.state;return ee({environment:e,currentSpaceStore:n,billingData:t})}function ne(e){const t=(0,i().v3)();return(0,r().K8)((()=>{const{currentSpaceStore:n}=S().default.state;return ee({environment:t,currentSpaceStore:n,billingData:e})}),[t,e])}function oe(e){const t=e.id;if(t in x().A.state.teamAggregateData)return x().A.state.teamAggregateData[t]}function ie(e,t){return e.isDefault()?-1:t.isDefault()?1:0}const re=["owner","member"],ae=["owner","member","team_level_guest"],se=(0,n(959013).YK)({ownerLabel:{id:"teamPermissionsMenu.ownerItem.label",defaultMessage:"Teamspace owner"},ownerCaption:{id:"teamPermissionsMenu.ownerItem.caption",defaultMessage:"Can edit teamspace settings and full access to teamspace pages."},memberLabel:{id:"teamPermissionsMenu.memberItem.label",defaultMessage:"Teamspace member"},memberCaption:{id:"teamPermissionsMenu.memberItem.caption",defaultMessage:"Cannot edit teamspace settings and can access teamspace pages."},guestLabel:{id:"teamPermissionsMenu.guestItem.label",defaultMessage:"Teamspace guest"},guestCaption:{id:"teamPermissionsMenu.guestItem.caption",defaultMessage:"Only has access to invited teamspaces."}}),le={owner:{label:se.ownerLabel,caption:se.ownerCaption},member:{label:se.memberLabel,caption:se.memberCaption},team_level_guest:{label:se.guestLabel,caption:se.guestCaption}};function ce(e){return`${b().A.domainBaseUrl}/team/${e}/join`}function de(e){var t;return Boolean(null===(t=e.getSettings())||void 0===t?void 0:t.disable_invite_link)}function ue(e){const t=[],n=[];for(const o of e)o.isDefined()&&(void 0===o.getArchivedBy()?n.push(o):t.push(o));return{archivedTeams:t,unarchivedTeams:n}}function pe(e){const t=(0,i().v3)(),{unarchivedTeams:n,isLoaded:o}=(0,r().K8)((()=>{const n=P().A.state;switch(n.loadingState){case"uninitialized":case"loading":return{unarchivedTeams:[],isLoaded:!1};case"loaded":return{unarchivedTeams:(0,R().Gd)({environment:t,teamIds:n.unarchivedTeamIds,spaceStore:e}),isLoaded:!0};default:(0,h().HB)(n)}}),[t,e]);return{unarchivedTeams:n,isLoaded:o}}function me(e){let{currentUserStore:t,currentSpaceStore:n,teamStore:o,members:i}=e;return v().oE(i.map((e=>{const{entity_type:n}=e;return"user"===n?function(e){let{currentUserStore:t,teamStore:n,member:o}=e;if(!t)return;const i=ge({teamStore:n,member:o}),r=I().LU.createChildStore(t,{table:m().oo,id:o.user_id});return{type:"user",memberInfo:o,permissionItem:{type:"user_permission",user_id:o.user_id,role:i},userStore:r}}({currentUserStore:t,teamStore:o,member:e}):"group"===n?function(e){var t;let{teamStore:n,member:o}=e;const i=null===(t=w().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===o.group_id)))||void 0===t?void 0:t.group;if(!i||!i.isAlive())return;const r=ge({teamStore:n,member:o});return{type:"group",memberInfo:o,permissionItem:{type:"group_permission",group_id:i.group_id,role:r},permissionGroup:i}}({teamStore:o,member:e}):void(0,h().HB)(n)})))}function ge(e){let{teamStore:t,member:n}=e;const o=t.getPermissionItems();if(!o)return"none";const i=function(e){let{permissions:t,member:n}=e;const o=null==t?void 0:t.find((e=>(0,d().Ds)(e)&&"group"===n.entity_type&&e.group_id===n.group_id||(0,d().B2)(e)&&"user"===n.entity_type&&n.user_id===e.user_id));return null==o?void 0:o.role}({permissions:o,member:n});return i||(0,f().ST)({id:t.id,permissions:t.getPermissionItems()})}function fe(e){const{environment:t,teamStore:n,spaceStore:o}=e,i=t.currentUser.id;if(void 0===i)return!1;const{ownerUserIds:r,ownerGroupIds:a}=n.getAllOwnerIds();return!(r.length>0&&a.length>0)&&(!!(0,y().dp)(o,i).isWorkspaceOwner()&&("private"!==n.getTeamAccessLevel()||("enterprise"===o.getSubscriptionTier()||Boolean(n.isNonGuestMember(i,A()._.getSpacePermissionGroupIds({userId:i,spaceId:o.id}))))))}function ve(e,t){const{currentSpaceStore:n}=S().default.state;return n&&!n.isTeamsEnabled()&&(0,D().p4)(n)&&!(0,g().et)(t)}function he(){return x().A.state.teams.filter((e=>!e.isArchived())).length}function _e(e){const t=e.getTeamAccessLevel();return e.isDefault()&&!e.isArchived()&&"open"===t}function be(){return x().A.state.teams.filter(_e).length}function ye(e){const t=e.isArchived(),n=be(),o=e.getTeamAccessLevel();return t&&(n>0||"open"===o)}function Se(e){return{ownerCount:0,memberCount:0,memberCountWithGuests:0,sampleMemberUserIds:(e.membership||[]).filter((e=>"user"===e.entity_type)).map((e=>e.user_id)).slice(0,f().Ik)}}},37719:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,quoteTextIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M13.594 4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM3 14.625a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm-.625-2.875c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625m11.219-4.125a.625.625 0 1 0 0 1.25H17a.625.625 0 1 0 0-1.25zM2.5 7a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 0 1 0 1H5.25a1.75 1.75 0 0 0-1.746 1.638A1.786 1.786 0 1 1 4.929 9.75 2.43 2.43 0 0 1 2.5 7.32zm5.143 0a2.75 2.75 0 0 1 2.75-2.75h.321a.5.5 0 1 1 0 1h-.321a1.75 1.75 0 0 0-1.747 1.638 1.786 1.786 0 1 1 1.425 2.862 2.43 2.43 0 0 1-2.428-2.43z"})},i=(0,n(340498).wt)("quoteText",o)},38337:(e,t,n)=>{n.d(t,{$0P:()=>Dt,$_L:()=>Ne,A8d:()=>yn,Ad9:()=>mt,Bbz:()=>De,CCX:()=>R,CQ2:()=>tt,Cxn:()=>ke,CyB:()=>Ie,D3T:()=>ie,DJ9:()=>St,DY5:()=>c,Dkd:()=>v,DxR:()=>J,E4Q:()=>Fn,E4t:()=>Kt,EOV:()=>Rt,EUI:()=>Cn,Efz:()=>fn,Eo4:()=>Ot,Ex9:()=>on,FYj:()=>Nt,FZs:()=>jt,G1r:()=>Ht,GIL:()=>pn,GSK:()=>Ae,GpG:()=>Wn,GtI:()=>D,H1c:()=>S,HA4:()=>vn,Hfz:()=>I,HlM:()=>re,Hw6:()=>a,J5z:()=>Dn,JRJ:()=>B,Jb:()=>de,Jmu:()=>Ce,Jnf:()=>sn,Jv:()=>ae,KVM:()=>It,Kbf:()=>dt,KfS:()=>Qt,Kvs:()=>et,LF7:()=>En,LcC:()=>Et,LpV:()=>P,LvP:()=>w,MHX:()=>Ze,MUV:()=>y,MaD:()=>je,Mbm:()=>Ft,Mdy:()=>Tn,N11:()=>en,NER:()=>kn,NXe:()=>j,N_7:()=>N,OLz:()=>be,OO1:()=>Mn,OUt:()=>d,OX4:()=>At,Of1:()=>He,OiJ:()=>o,P2l:()=>Lt,P7S:()=>Me,Pji:()=>We,PvQ:()=>ht,QHh:()=>C,Qm5:()=>ye,RYy:()=>f,Rag:()=>i,RrJ:()=>ve,Rsl:()=>m,S4C:()=>st,S6D:()=>ge,SDd:()=>ln,SPN:()=>U,SdC:()=>nt,Smt:()=>Nn,StS:()=>gn,Tel:()=>an,UMc:()=>bn,Uaw:()=>Ct,UqD:()=>In,Uvd:()=>Q,V4_:()=>q,VO:()=>ee,VRj:()=>ne,Vac:()=>h,Vl:()=>x,WvK:()=>Ut,X3W:()=>Re,XGs:()=>g,Y0h:()=>$,YDC:()=>ot,YZL:()=>xt,ZEs:()=>K,ZLF:()=>Zt,Zf9:()=>Ln,_57:()=>ct,_6K:()=>V,_En:()=>Ye,_OD:()=>Wt,_Oc:()=>$e,_Qb:()=>On,_qG:()=>ce,_sW:()=>me,a9W:()=>Se,aIQ:()=>Z,bFE:()=>X,bmm:()=>zn,bry:()=>wt,byw:()=>L,bzV:()=>lt,c6k:()=>Ve,cZe:()=>b,d0I:()=>An,d1T:()=>se,dBr:()=>Yt,dn9:()=>cn,e3e:()=>Qe,e6S:()=>vt,e6W:()=>fe,eGX:()=>Pe,eL1:()=>Pt,eUs:()=>ut,f1O:()=>_n,fM9:()=>yt,fRh:()=>p,f_$:()=>rn,fep:()=>xn,g5j:()=>jn,hKK:()=>z,hqd:()=>Je,iDC:()=>u,iM5:()=>ue,jc0:()=>rt,jnS:()=>ft,jtA:()=>_e,k2l:()=>we,kJD:()=>it,kRA:()=>Fe,kXO:()=>kt,kYU:()=>gt,kel:()=>$t,kew:()=>nn,kyo:()=>Ke,l0W:()=>Xe,l5X:()=>Te,l6q:()=>O,lpW:()=>Le,lyN:()=>Bn,mJp:()=>k,mLD:()=>ze,mVR:()=>te,myD:()=>Bt,nGK:()=>wn,nKq:()=>T,ncb:()=>Rn,nfo:()=>pe,oCP:()=>_t,oDg:()=>qe,ohG:()=>Jt,ojI:()=>Ue,okd:()=>zt,pXT:()=>E,poM:()=>Y,prN:()=>Un,pz7:()=>xe,q2i:()=>pt,q5q:()=>Tt,qGl:()=>r,qZ1:()=>Vn,rR7:()=>Ee,rb2:()=>A,rgg:()=>le,rkF:()=>oe,rm:()=>G,sCR:()=>s,sbV:()=>l,sql:()=>W,st6:()=>Xt,sux:()=>mn,tXX:()=>at,uMd:()=>_,u_N:()=>Mt,ug9:()=>F,v4C:()=>un,voG:()=>H,w7$:()=>Be,wAf:()=>dn,wgf:()=>Ge,wgx:()=>Pn,wx0:()=>qt,xAE:()=>Hn,xeF:()=>tn,yHP:()=>Sn,yWO:()=>Gt,yle:()=>Vt,yuM:()=>bt,yw8:()=>he,z$c:()=>hn,zN1:()=>M,zqk:()=>Oe});const o="notion-cursor-default",i="hidden",r="notion-fadein",a="notion-mobile",s="notion-fadein-fast",l="notion-desktop-drag-area",c="notion-front-page",d="analytics-scroll-point",u="notion-login",p="notion-light-theme",m="notion-dark-theme",g="notion-scroller",f="vertical",v="horizontal",h="ignore-scrolling-container",_="notion-history-modal",b="notion-block-resizer",y="notion-overlay-container",S="notion-default-overlay-container",w="notion-page-template-modal",k="notion-modal-underlay",I="notion-peek-renderer",x="notion-text-action-menu",A="notion-selectable",C="notion-selectable-container",T="notion-selectable-halo",M="notion-selectable-hover-menu-item",P="notion-selectable-drag-handle",B="notion-suggest-remove",R="notion-focusable-within",E="notion-page-content",D="notion-frame",N="notion-topbar",L="notion-topbar-mobile",O="notion-topbar-mobile-redesigned",U="notion-topbar-mobile-elevated-buttons",F="notion-topbar-more-button",V="notion-topbar-action-buttons",j="notion-share-menu",z="notion-share-menu-publish-tab",H="notion-topbar-share-menu",W="notion-topbar-updates-menu",q="notion-topbar-updates-button",K="notion-topbar-favorite-button",G="notion-topbar-comments-button",$="notion-search-menu",Y="notion-embed-menu",Q="notion-unfurling-menu",Z="notion-media-menu",X="notion-invite",J="notion-record-icon",ee="notion-calendar-header-days",te="notion-board-group",ne="notion-block-permission-settings-workspace-access",oe="notion-block-permission-settings-team-access",ie="notion-block-permission-settings-owner-access",re="notion-block-permission-settings-group-access",ae="notion-page-view-discussion",se="notion-discussion-input-edit-existing-comment",le="notion-discussion-input",ce="notion-discussion-reply-menu",de="notion-comment-overflow-menu",ue="notion-shimmer",pe="notion-link",me="ai-block",ge="peek-top-hover-area",fe="peek-details-sidebar",ve="notion-menu-list-focused",he="notion-sharing-permission-role-select",_e="notion-language-picker",be="notion-dictation-language-picker",ye="notion-cookie-selector",Se="notion-activity-section-icon",we="notion-activity-section-header",ke="notion-activity-section-time",Ie="notion-activity-section-children",xe="notion-sidebar",Ae="layout-content",Ce="notion-sidebar-mobile",Te="notion-open-sidebar",Me="notion-close-sidebar",Pe="notion-sidebar-switcher",Be="notion-space-settings",Re="notion-outliner-bookmarks",Ee="notion-outliner-workspace",De="notion-outliner-shared",Ne="notion-outliner-private",Le="notion-outliner-offline",Oe="notion-outliner-team",Ue="notion-outliner-bookmarks-header",Fe="notion-outliner-workspace-header",Ve="notion-outliner-shared-header",je="notion-outliner-private-header",ze="notion-outliner-offline-header",He="notion-outliner-team-header",We="notion-outliner-joined-team-header",qe="notion-outliner-unjoined-team-header",Ke="notion-outliner-search-team-header",Ge="notion-outliner-public-page-template-includes-header",$e="notion-outliner-team-context-menu-button",Ye="notion-outliner-team-context-menu",Qe="notion-updates-menu",Ze="notion-sidebar-trash-menu",Xe="notion-password-modal",Je="notion-scim-table-revoke-button",et="notion-subscription-checkout-title",tt="notion-subscription-post-upgrade-title",nt="notion-subscription-checkout-description",ot="notion-update-sidebar",it="notion-update-sidebar-tab-comments-filter-control",rt="notion-update-sidebar-tab-comments-filter-button-open",at="notion-update-sidebar-tab-comments-filter-button-resolved",st="notion-update-sidebar-tab-comments-header",lt="notion-update-sidebar-tab-comments-comments-scroller",ct="notion-update-sidebar-tab-comments-discussion-item",dt="notion-update-sidebar-tab-updates-header",ut="home-tile-fade-up-in",pt="home-tile-fade-in",mt="home-tile-fade-out",gt="notion-team-settings-modal",ft="notion-add-members-modal",vt="notion-new-team",ht="notion-use-case-onboarding-profile",_t="notion-use-case-onboarding-persona-survey",bt="notion-workspace-choose",yt="notion-workspace-plan-choose",St="notion-workspace-collaborative-intent-choose",wt="notion-workspace-create",kt="notion-workspace-invite",It="notion-onboarding-popup",xt="notion-onboarding-button",At="notion-onboarding-plan-type-team",Ct="notion-onboarding-persona-survey-persona",Tt="notion-onboarding-persona-survey-role",Mt="notion-onboarding-persona-survey-companysize",Pt="notion-onboarding-persona-survey-usecases",Bt="notion-onboarding-timed-trial-upsell",Rt="notion-table-view",Et="notion-table-view-add-column",Dt="notion-table-view-add-row",Nt="notion-table-view-header-row",Lt="notion-table-view-header-cell",Ot="notion-table-view-row",Ut="notion-table-view-cell",Ft="notion-table-view-empty-placeholder",Vt="notion-table-view-drag-and-fill-handle",jt="notion-table-view-frozen-column-repositioner",zt="notion-board-view",Ht="notion-calendar-view",Wt="notion-list-view",qt="notion-gallery-view",Kt="notion-collection-item",Gt="notion-calendar-view-day",$t="notion-collection-view-item-add",Yt="notion-timeline-view",Qt="notion-timeline-item",Zt="notion-timeline-item-row",Xt="notion-timeline-item-properties",Jt="notion-collection-view-body",en="notion-view-settings-sidebar",tn="notion-view-settings-popup-background",nn="notion-layout-add-module-button",on="notion-collection-edit-view",rn="notion-collection-view-tab-button",an="notion-collection-add-view",sn="notion-collection-automation-edit-view",ln="notion-template-picker-item",cn="notion-template-picker-item-action-menu",dn="draggable-ghost-section",un="forms-properties-load-more",pn="forms-share-menu",mn="notion-automation-builder-modal",gn="notion-property-name-tooltip",fn="notion-property-value-tooltip",vn="notion-modal-overlay-collection-view",hn="notion-workflow-editor",_n="developer-integrations-container",bn="developer-integration-not-found",yn="notion-table-row-selector",Sn="notion-table-column-selector",wn="notion-table-row",kn="notion-table-cell",In="notion-table-cell-text",xn="notion-table-selection-overlay",An="notion-table-tbody-selectable",Cn="notion-table-content",Tn="notion-temporary-comment",Mn="notion-margin-discussion-item",Pn="notion-list-item-box-left",Bn="notion-transclusion-block-component",Rn="notion-transclusion-block-halo",En="search-query-result-item",Dn="search-result-body-section-title",Nn="search-result-mobile-body-scroller",Ln="notion-completions-feedback-popup",On="assistant-grouped-edit-chat-container",Un="notion-help-button",Fn="notion-ai-button",Vn="notion-assistant-corner-origin-container",jn="organization-console-content",zn="altTextBlockButton",Hn="notion-floating-table-of-contents",Wn="popup-origin-wrapper"},38789:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{}}getEditedBlocksForCollection(e){const t=this.state[e];if(t)return t;{const t=new Set;return this.state[e]=t,t}}setEditedBlock(e,t){this.getEditedBlocksForCollection(e).add(t),this.emit()}}const i=new o},40226:(e,t,n)=>{n.d(t,{R:()=>a,S:()=>r});n(814603),n(147566),n(198721);var o=()=>n(939768),i=()=>n(492414);function r(e){const{domainBaseLoginUrl:t,currentUrl:n,forceLandLastVisitedPage:i}=e,r=new URL(n);return i&&r.searchParams.set("target","sites_publish"),(0,o().Gm)({url:t,query:{redirectURL:r.toString()}})}function a(e){const{store:t,pageVisitSource:n,embedded:o}=e;return(0,i().Ay)({store:t,preferPublicLink:!0,pageVisitSource:n,disableSlug:o,embedded:o})}},40851:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{ready:!1,loading:!1}}}const i=o},40970:(e,t,n)=>{n.d(t,{DN:()=>u,Lt:()=>c,Y8:()=>l,aq:()=>a,be:()=>s,nQ:()=>i,tC:()=>r,uX:()=>d});var o=()=>n(989423);async function i(e){return o().vd(e,"notion_calendar_connect")}function r(e,t){o().vd(e,"click_open_in_calendar",t)}function a(e){o().vd(e,"calendar_rebrand_onboarding_modal_show")}function s(e,t){o().vd(e,"calendar_rebrand_onboarding_modal_click",t)}function l(e){o().vd(e,"calendar_rebrand_success_modal_show")}function c(e,t){o().vd(e,"calendar_rebrand_success_modal_click",t)}function d(e){o().vd(e,"click_calendar_sidebar_link")}function u(e){o().vd(e,"click_calendar_upsell_prompt_cta")}},41161:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(211716);const i=new class{constructor(){this.frecencyStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=n(351360).default.state,i=t&&t.id;return void 0===i||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.frecencyStore=void 0)):(this.spaceId===i&&this.userId===e||(this.spaceId=i,this.userId=e,this.frecencyStore=new(o().Fv)({store:localStorage,prefix:`BlockFrecency:${e}:${i}`,maxBlocks:100,maxStoredVisits:10,version:o().HP}),this.frecencyStore.initialize()),this.frecencyStore)}};const r={lazyFrecencyStore:i,recordVisit:function(e){const{id:t,type:o,timestampForTestingOnly:r,currentUserId:a,systemBlockType:s}=e;if((0,n(90023).kR)(s))return;const l=i.get(a);return l?l.recordVisit({id:t,type:o,timestampForTestingOnly:r}):void 0},sortFrecencyHighToLow:function(e){const{currentUserId:t,items:n,now:o,recordFrecency:r}=e,a=i.get(t);return a?a.sortFrecencyHighToLow({items:n,now:o,recordFrecency:r}):n},getVisitedIds:function(e){const t=i.get(e);return t?t.getVisitedIds():[]},clearForUser:function(e){for(let t=0;t<localStorage.length;t++){const n=localStorage.key(t);n&&n.startsWith(`BlockFrecency:${e}`)&&localStorage.removeItem(n)}},getVisits:function(e,t){const n=i.get(e);if(n){const e=n.getVisits(t);return e?e.recentVisits:[]}return[]}};(0,n(604341).exposeDebugValue)("FrecencyStore",r);const a=r},42425:(e,t,n)=>{n.d(t,{Ay:()=>x,C1:()=>l,FC:()=>_,pU:()=>h});var o=n(296540),i=()=>n(799954),r=()=>n(792002),a=()=>n(155004),s=n(474848);let l=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({});const{Start:c,Center:d,End:u}=l,p=o.forwardRef((function(e,t){return(0,s.jsxs)("div",{onClick:e.onClick,onMouseMove:e.onMouseMove,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,style:y(e),ref:t,children:[e.left&&m(e),e.children&&(0,s.jsx)("div",{style:I(e),children:e.children}),e.right&&g(e)]})}));function m(e){return(0,s.jsx)(a().s,{...(0,r().Yl)("start"),allowSelectionWithin:!1,style:w(e),className:n(38337).wgx,children:e.left})}function g(e){return(0,s.jsx)(a().s,{...(0,r().Yl)("end"),allowSelectionWithin:!1,style:k(e),children:e.right})}const f=4,v=2,h=24,_={...i().nE,textAlign:"start"},b={[c]:"flex-start",[d]:"center",[u]:"flex-end"};function y(e){return{display:"flex",alignItems:n(720665).pN(e.alignment)?b[l.Start]:b[e.alignment],width:"100%",...e.style}}function S(e){return{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,minHeight:`calc(1.5em + ${i().nE.paddingTop}px + ${i().nE.paddingTop}px)`}}function w(e){return{marginRight:v,width:h,...S(),...e.leftStyle}}function k(e){return{marginLeft:f,...S(),...e.rightStyle}}function I(e){return{flexGrow:1,flexShrink:1,flexBasis:0,minWidth:1,...e.childrenStyle}}const x=p},42583:(e,t,n)=>{n.d(t,{D:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.537 8.843a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-.695 3.009a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.695 1.62a.695.695 0 1 1-1.39 0 .695.695 0 0 1 1.39 0m1.62-3.935a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.695 1.621a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-.695 3.009a.695.695 0 1 0 0-1.39.695.695 0 0 0 0 1.39m3.01-5.324a.694.694 0 1 1-1.39 0 .694.694 0 0 1 1.39 0m-7.639 3.009a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389m.694 1.62a.695.695 0 1 1-1.389 0 .695.695 0 0 1 1.39 0m6.249-1.62a.694.694 0 1 0 0-1.389.694.694 0 0 0 0 1.389"}),(0,o.jsx)("path",{d:"M5.25 3.125A2.125 2.125 0 0 0 3.125 5.25v9.5c0 1.174.951 2.125 2.125 2.125h9.5a2.125 2.125 0 0 0 2.125-2.125v-9.5a2.125 2.125 0 0 0-2.125-2.125zm-.875 3.69h11.25v7.935a.875.875 0 0 1-.875.875h-9.5a.875.875 0 0 1-.875-.875z"})]})},r=(0,n(340498).wt)("viewCalendar",i)},42772:(e,t,n)=>{n.d(t,{m:()=>r});var o=()=>n(498212),i=()=>n(875856);function r(){const e=i().default.state.user_id;return e?(0,o().ot)(e):void 0}},42803:(e,t,n)=>{function o(e){return void 0!==e.uiLocation.findAncestor((e=>{var t;return(null===(t=e.store.recordStoreOptions)||void 0===t||null===(t=t.inMemoryRecordCache)||void 0===t?void 0:t.isSyntheticAssistantData)??!1})).ancestor}n.d(t,{n:()=>o})},44729:(e,t,n)=>{n.d(t,{Br:()=>m,Hk:()=>c,NI:()=>u,Ti:()=>p,X$:()=>a,by:()=>l,s8:()=>s,zz:()=>d});n(16280);var o=()=>n(152565),i=()=>n(246826),r=()=>n(751156);function a(e){const{childStore:t,parentStore:n,transaction:o}=e,i=t.getRecordStoreAtRootPath(),a=i.getValue(),s=i.getAssociatedCollectionId();if(a){const{alive:e}=a;if(s!==n.id||!e){const e=n.getParentBlockStore();return e&&e.isCollectionViewPageWithContent()?(u({parentStore:e,childStore:t,transaction:o}),!0):(r().applyOperation({store:n,operation:{pointer:t.pointer,path:[],command:"setParent",args:{parentId:n.id,parentTable:n.table}},transaction:o}),!0)}}return!1}function s(e){const{blockStore:t,transaction:n}=e,i=t.getParentStore();if(i){(0,o().YE)(i.table,t.table)?d({parentStore:i,childStore:t,transaction:n}):l({childStore:t,transaction:n})}}function l(e){const{childStore:t,transaction:n}=e,o=t.getAssociatedCollectionStore();if(null!=o&&o.isPageTreeCollection()){const e=t.getParentBlockStore();e&&d({childStore:t,parentStore:e,transaction:n})}t.getRecordStoreAtRootPath().getAlive()&&i().zv({store:t,data:{alive:!1},transaction:n})}function c(e){const{pageStore:t,transaction:n}=e;t.getRecordStoreAtRootPath().getAlive()&&i().zv({store:t,data:{alive:!1},transaction:n})}function d(e){const{childStore:t,parentStore:n,transaction:i}=e,a=(0,o().YE)(n.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${n.table} and child table ${t.table}`);r().applyOperation({store:n,operation:{pointer:n.pointer,path:a,command:"removeChild",args:{id:t.id}},transaction:i})}function u(e){const{childStore:t,parentStore:n,transaction:i}=e,a=(0,o().YE)(n.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${n.table} and child table ${t.table}`);r().applyOperation({store:n,operation:{pointer:n.pointer,path:a,command:"insertChildrenAfter",args:{ids:[t.id],after:e.after}},transaction:i})}function p(e){const{childStore:t,parentStore:n,transaction:i}=e,a=(0,o().YE)(n.table,t.table);if(!a)throw new Error(`Could not find child path for parent table ${n.table} and child table ${t.table}`);r().applyOperation({store:n,operation:{pointer:n.pointer,path:a,command:"insertChildrenBefore",args:{ids:[t.id],before:e.before}},transaction:i})}function m(e){const{parentStore:t,oldChildStore:n,newChildStore:o,transaction:i}=e,r=n.id;(t.getValue()||[]).indexOf(r)>=0&&(u({parentStore:t,childStore:o,transaction:i,after:r}),d({parentStore:t,childStore:n,transaction:i}))}},45359:(e,t,n)=>{n.d(t,{VV:()=>d,WE:()=>m,cO:()=>f,eh:()=>g,fE:()=>u,hX:()=>p,jH:()=>v,vH:()=>c});n(898992),n(430670);var o=()=>n(436572),i=()=>n(666429),r=()=>n(250064),a=()=>n(972435);const s=(0,n(959013).YK)({leftTeam:{id:"teamPermissionsActions.leftTeam",defaultMessage:"Left {teamName}"},leftTeamNoName:{id:"teamPermissionsActions.leftTeamNoName",defaultMessage:"Left teamspace"},leftYetStillInTeam:{id:"teamPermissionsActions.leftYetStillInTeam",defaultMessage:"You are still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because you are a member of the following groups: {groupsString}"},removedYetStillInTeam:{id:"teamPermissionsActions.removedYetStillInTeam",defaultMessage:"{hasMemberName, select, true {{memberName}} other {The removed user}} is still in {hasTeamName, select, true {{teamName}} other {the teamspace}} because they are a member of the following groups: {groupsString}"},joinedTeam:{id:"teamPermissionsActions.joinedTeam",defaultMessage:"Joined {teamName}"},joinedTeamUsingAdminPrivileges:{id:"teamPermissionsActions.joinedTeamUsingAdminPrivileges",defaultMessage:"Joined {teamName} using admin privileges"},upgradedSelfToOwner:{id:"teamPermissionsActions.upgradedSelfToOwnerUsingAdminPrivileges",defaultMessage:"Became owner of {teamName} using admin privileges"},archivedTeam:{id:"teamPermissionsActions.archivedTeam",defaultMessage:"Archived {teamName}"},restoredTeam:{id:"teamPermissionsActions.restoredTeam",defaultMessage:"Restored {teamName}"},restoredTeamNoName:{id:"teamPermissionsActions.restoredTeamNoName",defaultMessage:"Restored teamspace"},duplicatedTeam:{id:"teamPermissionsActions.duplicatedTeam",defaultMessage:"Duplicated {teamName}"},duplicatedTeamNoName:{id:"teamPermissionsActions.duplicatedTeamNoName",defaultMessage:"Duplicated teamspace"}});function l(e,t,n){const i=a().A.formatMessage(e,{...t});o().D6({label:i,durationMs:n})}function c(e){return l(s.upgradedSelfToOwner,{teamName:e})}function d(e){let{teamName:t,usingAdminPrivileges:n}=e;return l(n?s.joinedTeamUsingAdminPrivileges:s.joinedTeam,{teamName:t})}function u(e){return e?l(s.leftTeam,{teamName:e}):l(s.leftTeamNoName)}function p(e,t){const n=(0,r().l)(t.flatMap((e=>e.name||[])));l(s.leftYetStillInTeam,{hasTeamName:void 0!==e,teamName:e,groupsString:n},i().LX)}function m(e,t,n){const o=(0,r().l)(n.flatMap((e=>e.name||[])));l(s.removedYetStillInTeam,{hasMemberName:void 0!==e,hasTeamName:void 0!==t,memberName:e,teamName:t,groupsString:o},i().LX)}function g(e){return l(s.archivedTeam,{teamName:e})}function f(e){return e?l(s.restoredTeam,{teamName:e}):l(s.restoredTeamNoName)}function v(e){return e?l(s.duplicatedTeam,{teamName:e}):l(s.duplicatedTeamNoName)}},46220:(e,t,n)=>{n.d(t,{S:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("arrowRightContained",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M11.673 13.387a.75.75 0 01-1.06-1.06l1.576-1.577H6a.75.75 0 010-1.5h6.19l-1.577-1.577a.75.75 0 111.06-1.06L14.53 9.47a.75.75 0 010 1.06l-2.857 2.857z"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.5A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5z",clipRule:"evenodd"})]})})},46986:(e,t,n)=>{n.d(t,{Ff:()=>u,Ke:()=>r,Ux:()=>s,Yf:()=>a,aj:()=>l,ei:()=>d,rN:()=>c,sx:()=>i});var o=()=>n(508496);function i(){return o().default.checkGate({gateName:"workflows_ui"})&&o().default.checkGate({gateName:"workflows"})}function r(){return o().default.checkGate({gateName:"workflows_debug_tools"})}function a(e){let{environment:t}=e;return!t.device.isPhone&&"on"===o().default.getEligibleGroup({experimentId:"workflows_builder_entry_point"})}function s(){return o().default.checkGate({gateName:"workflows_database_config_modal"})}function l(){return o().default.checkGate({gateName:"workflows_use_agent"})}function c(){return o().default.checkGate({gateName:"workflows_advanced_mode"})}function d(e){return!e.device.isMobile&&o().default.checkGate({gateName:"workflows_app_container"})}function u(e){return!e.device.isMobile&&o().default.checkGate({gateName:"collection_settings_reorganization"})}},47170:(e,t,n)=>{n.d(t,{O:()=>r});var o=()=>n(847249);const i=new(n(496506).default)((()=>{var e;return null===(e=n(351360).default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),{debugName:"currentSpaceStoreIdStore"});function r(){return(0,o().O$)(i)}},47373:(e,t,n)=>{n.d(t,{C4:()=>m,CH:()=>E,Ck:()=>P,DV:()=>L,F0:()=>A,IW:()=>b,Id:()=>T,Qd:()=>S,RL:()=>C,S5:()=>f,Us:()=>V,WC:()=>O,WN:()=>w,Wl:()=>y,YA:()=>g,YE:()=>B,Yz:()=>v,_J:()=>U,bG:()=>_,bW:()=>k,dC:()=>F,gU:()=>I,hg:()=>N,i3:()=>p,ml:()=>h,nJ:()=>u,qm:()=>x,rY:()=>M,s8:()=>R,x3:()=>d,yO:()=>D});n(898992),n(737550);var o=()=>n(848538),i=()=>n(351360),r=()=>n(508496),a=()=>n(630116),s=()=>n(134217),l=()=>n(10984),c=()=>n(640653);function d(){return s().dW()&&"on"===r().default.getEligibleGroup({experimentId:"request_membership",defaultGroup:"control"})}function u(){return s().dW()&&!(0,l().OX)()}function p(e){let{environment:t,spaceStore:n,userRootStore:o}=e;const i=null==n?void 0:n.getPublicSpaceData();return!(!(n&&o&&i&&(0,c().IL)(n))||(0,l().OX)()||t.device.isMobile||!u()||i.disableGuestMembershipRequests||m({userRootStore:o}))}function m(e){let{userRootStore:t}=e;return t.getSpaceViewStores().some((e=>a().VF.createChildStore(e,o().i1({userId:t.id,spaceId:e.getSpaceId()})).isMember()))}function g(){return(0,l().El)()}function f(){return"on"===r().default.getEligibleGroup({experimentId:"improve_onboarding_profile_step",defaultGroup:"control"})}function v(){return"on"===r().default.getEligibleGroup({experimentId:"remove_onboarding_invite_step",defaultGroup:"control"})}function h(){return"on"===r().default.getEligibleGroup({experimentId:"personal_student_usecase_preview",defaultGroup:"control"})}function _(){return"on"===r().default.getEligibleGroup({experimentId:"skip_onboarding_size_and_role_stages"})}function b(){return"on"===r().default.getEligibleGroup({experimentId:"create_new_workspace_cta_on_account_switcher",defaultGroup:"control"})}function y(){return r().default.getEligibleGroup({experimentId:"improve_desktop_workspace_create_step",defaultGroup:"control"})}function S(){return"on"===r().default.getEligibleGroup({experimentId:"teamspace_guests",defaultGroup:"control"})}function w(){var e;return Boolean(null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin())}function k(e){return!e.device.isMobile&&!(0,l().OX)()}function I(){return r().default.checkGate({gateName:"drawing_block"})}function x(){return"control"!==r().default.getEligibleGroup({experimentId:"extended_user_profiles",defaultGroup:"control"})}function A(){const e="hover_and_full"===r().default.getEligibleGroup({experimentId:"extended_user_profiles",defaultGroup:"control"}),t=r().default.checkGate({gateName:"auto_manage_people_collection"});return e&&t}function C(){return"on"===r().default.getEligibleGroup({experimentId:"grant_access_via_mentions",defaultGroup:"control"})}function T(e){return!(!e.device.isMobileNative||e.device.isTablet)&&r().default.checkGate({gateName:"mobile_quick_capture_icons_redesign"})}function M(e){return!e.device.isMobile&&P()}function P(){return r().default.checkGate({gateName:"horizon_1_sidebar_panel_rollout"})}function B(){return r().default.checkGate({gateName:"enable_link_mention_hover"})}function R(){return!1}function E(){return r().default.checkGate({gateName:"new_bookmark"})}function D(){return r().default.checkGate({gateName:"new_hover_designs_lp"})}function N(e){return!e.device.isMobile&&r().default.checkGate({gateName:"persisted_secondary_sidebar_state"})}function L(e){const{environment:t}=e;return!t.device.isMobileNative||t.device.isTablet?"control":r().default.getEligibleGroup({experimentId:"mobile_onboarding_educational_refresh",defaultGroup:"control"})}function O(e){const{environment:t}=e;return!(!t.device.isMobileNative||t.device.isTablet)&&r().default.checkGate({gateName:"mobile_user_activation_template_gallery_refresh_gate"})}function U(){return r().default.checkGate({gateName:"unfurl_disable_store_verify"})}function F(){return r().default.checkGate({gateName:"gmail_action_redirect_improvements"})}function V(){return r().default.checkGate({gateName:"log_show_error_page"})}},48848:(e,t,n)=>{n.d(t,{DZ:()=>i,Ow:()=>r,sM:()=>a});var o=()=>n(416504);const i=(0,n(959013).YK)({whereToDuplicate:{id:"forkPageModal.title",defaultMessage:"Where would you like to add {blockTitle}?"},selectWorkspace:{id:"forkPageModal.selectWorkspace",defaultMessage:"Select a workspace"},untitledBlockRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledBlockRecordTitle"},untitledSpaceRecordTitle:{defaultMessage:"Untitled",id:"forkPageActions.untitledSpaceRecordTitle"},loadingStateDisplayText:{defaultMessage:"Duplicating {blockTitle} to {spaceTitle}…",id:"forkPageActions.loadingStateDisplayText"}});function r(e,t){var n;const r=null==e||null===(n=e.getModel())||void 0===n?void 0:n.getRenderTitleWithPlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,o().P)(),intl:t});return r||t.formatMessage(i.untitledBlockRecordTitle)}function a(e,t){var n;const o=null==e||null===(n=e.getModel())||void 0===n?void 0:n.getRenderTitleWithEmojiOrPlaceholder({intl:t});return o||t.formatMessage(i.untitledSpaceRecordTitle)}},49210:(e,t,n)=>{n.d(t,{b:()=>a,T:()=>s()});n(581454);var o=n(296540),i=()=>n(584931),r=n(474848);const a=o.memo((function(e){const{store:t=i().w}=e,a=(0,n(847249).K8)((()=>t.state.asyncModals),[t]);return(0,r.jsx)(r.Fragment,{children:a.map((e=>{const{id:t,internalRenderModal:n,isOpen:i}=e,a=n(i);return(0,r.jsx)(o.Fragment,{children:a},t)}))})}));var s=()=>n(342461)},49621:(e,t,n)=>{n.d(t,{h:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.875 7.505c0-.345.28-.625.625-.625h7a.625.625 0 1 1 0 1.25h-7a.625.625 0 0 1-.625-.625m0 3c0-.345.28-.625.625-.625h5a.625.625 0 1 1 0 1.25h-5a.625.625 0 0 1-.625-.625"}),(0,o.jsx)("path",{d:"M17.625 5.255A2.125 2.125 0 0 0 15.5 3.13h-11a2.125 2.125 0 0 0-2.125 2.125v7.5c0 1.173.951 2.125 2.125 2.125h1.188v2.482a.625.625 0 0 0 1.006.496l3.87-2.978H15.5a2.125 2.125 0 0 0 2.125-2.125zM15.5 4.38c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-5.148a.63.63 0 0 0-.38.13l-3.034 2.333v-1.838a.625.625 0 0 0-.625-.625H4.5a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875z"})]})},r=(0,n(340498).wt)("commentFilled",i)},53137:(e,t,n)=>{n.d(t,{A:()=>s});n(898992),n(803949);var o=()=>n(496506),i=()=>n(388821);class r extends(()=>n(757695))().default{constructor(){super(...arguments),this.integrations=new(o().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ExternalIntegrationStore.integrations"}),this.bots=new(o().default)((()=>{const e=this.state;return e.loaded?e.bots:[]}),{debugName:"ExternalIntegrationStore.bots"}),this.externalAuthentications=new(o().default)((()=>{const e=this.state;return e.loaded?e.externalAuthentications:[]}),{debugName:"ExternalIntegrationStore.externalAuthentications"}),this.completeSlackAuthentications=new(o().default)((()=>{const e=this.state;return e.loaded?e.completeSlackAuthentications:[]}),{debugName:"ExternalIntegrationStore.completeSlackAuthentications"}),this.twoWaySyncExternalEntitiesStore=new(o().default)((()=>{const e=this.state;return e.loaded?e.twoWaySyncExternalEntities:[]}),{debugName:"ExternalIntegrationStore.twoWaySyncExternalEntities"})}getInitialState(){return{loaded:!1,loading:!1}}getIntegrationsAsRecordMap(){const e=i().RecordMap.create();return this.integrations.state.forEach((t=>e.setValue({table:n(332393).Li,id:t.id},t))),e}getBotsAsRecordMap(){const e=i().RecordMap.create();return this.bots.state.forEach((t=>e.setValue({table:n(824862).GP,id:t.id},t))),e}getExternalEntitiesAsRecordMap(){const e=i().RecordMap.create();this.twoWaySyncExternalEntitiesStore.state.forEach((t=>e.setModel({table:n(329251).$,id:t.id},t)))}}const a=new r;(0,n(604341).exposeDebugValue)("ExternalIntegrationStore",a);const s=a},53664:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){return!(e.getParentTable()===n(519831).Vl)||e.isTemplate()}},54241:(e,t,n)=>{n.d(t,{l:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("drawingBlock",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M17.297 3.112a.852.852 0 011.233-.01c.314.325.306.852-.02 1.2l-8.5 9.118a1.1 1.1 0 01-.387.267l-.973.4-.106.02a.351.351 0 01-.343-.46l.326-.982c.05-.15.132-.29.24-.404l8.531-9.15z"}),(0,o.jsx)("path",{d:"M8.132 4.75c-.368 0-.73.086-1.059.25l-.658.33a.75.75 0 00.67 1.34l.659-.328a.868.868 0 01.388-.092h.09a.777.777 0 01.33 1.482L3.518 10.08A3.5 3.5 0 005 16.75h.08a3.58 3.58 0 002.53-1.048l.171-.172a.75.75 0 00-1.06-1.06l-.172.171c-.39.39-.918.609-1.47.609H5a2 2 0 01-.845-3.81l5.032-2.35a2.277 2.277 0 00-.963-4.34h-.091z"})]})})},54432:(e,t,n)=>{n.d(t,{A:()=>C});var o=n.n(n(32485)),i=n(296540),r=()=>n(484714),a=()=>n(792485),s=()=>n(847249),l=()=>n(401497),c=()=>n(584262),d=()=>n(799954),u=()=>n(500066),p=()=>n(191772),m=()=>n(931075),g=()=>n(959013),f=()=>n(246826),v=()=>n(751156),h=()=>n(492414),_=()=>n(731320),b=()=>n(962730),y=()=>n(735372),S=()=>n(496889),w=()=>n(614505),k=()=>n(859428),I=n(474848);const x={paddingTop:d().nE.paddingTop,paddingBottom:d().nE.paddingBottom,paddingLeft:d().nE.paddingLeft};function A(e,t){const{store:r,onClick:a}=e,d=(0,l().DP)(),u=(0,g().tz)(),[f,v]=(0,i.useState)(!1),_=(0,n(963589).X)("enable_deleted_page_indicator"),S=(0,s().K8)((()=>{const e=n(108944).ze(r);return _&&e}),[_,r]),w=(0,s().K8)((()=>r.inMemoryRecordCache.isTemporaryData),[r]),k=(0,s().K8)((()=>{const e=y().qu.state;if(!e)return!1;return(0,n(919709).q4_)(r.getTitleValue()).toLowerCase().includes(e.toLowerCase())}),[r]),A=(0,s().K8)((()=>{const e=y().wb.state;return!!e&&("block"===e.type&&e.id===r.id)}),[r.id]),C=(0,n(891078).i0)(r)&&!w,T=(0,s().K8)((()=>{var e;if(!(0,n(470928).Io)())return!1;const t=null===(e=n(351360).default.state.currentSpaceStore)||void 0===e?void 0:e.getModel();return t&&(0,m().Xi)(t)}),[]),M=(0,s().K8)((()=>{const e=r.getModel();return(0,m().sN)(e)}),[r]),B=(0,s().K8)((()=>{var t;const o=!n(227440).A.state.online,i=(0,n(534177).O9)(null===(t=n(670631).A.state.offlinePages)||void 0===t?void 0:t[e.store.id]);return o&&!i}),[e.store.id]),E=(0,l().IS)((t=>({title:{fontWeight:n(284371).Wy.medium,lineHeight:1.3,borderBottom:e.disableUnderline?"none":`1px solid ${k?"transparent":t.darkDividerColor}`,...S&&{color:t.text.secondary}}})),[k,e.disableUnderline,S]),D=(0,i.useCallback)((()=>v(!0)),[]),N=(0,i.useCallback)((()=>v(!1)),[]),L=(0,s().K8)((()=>(0,h().J8)({store:r,fullyQualified:!1,pageVisitSource:c().y8.LinkInPage})),[r]),O=(0,s().K8)((()=>(0,h().J8)({store:e.store,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:c().y8.PeekOpen})),[e.store]),U=(0,s().K8)((()=>n(712505).default.isSidePeekOpen()),[]);return(0,I.jsx)(n(296798).A,{ref:t,href:L,altHref:O,forceAltHref:U,external:!1,onClick:a,style:{borderRadius:4,...e.style},disableForOffline:B,children:(0,I.jsx)(n(42425).Ay,{childrenStyle:x,alignment:b().C.Center,right:(0,I.jsx)(P,{aliasStore:e.aliasStore,disabled:e.disabled,store:e.store,hovered:f}),onMouseMove:D,onMouseLeave:N,children:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(R,{store:e.store,disabled:e.disabled||B,isAlias:e.isAlias,showDeletedPageIndicator:S}),(0,I.jsx)("span",{className:o()(A&&p().wT),style:{overflow:"auto",...k&&(0,p().G3)({theme:d,isSelectedMatch:A}),opacity:B?.4:void 0},children:(0,I.jsx)(n(16006).A,{store:r,style:E.title})}),(0,I.jsx)(n(984651).A,{theme:d,intl:u,isPageInTrash:C}),T&&(0,I.jsx)(n(834344).w,{theme:d,isPageVerified:M,disabled:B})]})})})}const C=i.forwardRef(A);function T(e){let{isAlias:t}=e;return t?(0,I.jsx)("div",{children:(0,u().G)({position:"absolute",width:"50%",height:"50%",right:0,bottom:0})}):null}function M(e,t,n){const o=n&&n.publicEditModeStore.state;return!(0,_().QT)(o)&&(e.canEdit()&&!t)}function P(e){let{aliasStore:t,store:n,disabled:o,hovered:i}=e;const l=(0,a().S)(),c=(0,r().v3)(),{device:d}=c;return(0,s().K8)((()=>M(n,o,l)&&(i||d.isMobile)),[d.isMobile,o,i,l,n])?(0,I.jsx)(S().A,{store:t??n,tooltipContent:(0,I.jsx)(g().sA,{defaultMessage:"Rename, delete, and more…",id:"page.blockActionMenu.tooltip"}),style:{marginRight:4},fadeIn:!0}):null}function B(e){let{store:t,disabled:n}=e;const o=(0,a().S)(),i=(0,r().v3)(),l=(0,s().K8)((()=>t.getIcon()),[t]),c=(0,s().K8)((()=>t.getRole()),[t]),d=(0,s().K8)((()=>t.isEmptyPage()),[t]),u=(0,s().K8)((()=>t.getType()),[t]),p=(0,s().K8)((()=>M(t,n,o)),[n,o,t]);return(0,I.jsx)(k().A,{renderTooltip:()=>(0,I.jsx)(g().sA,{defaultMessage:"Change icon",id:"page.changeIcon.tooltip"}),placement:b().W.Top,disableTooltip:n||!p,render:e=>n||!p?(0,I.jsx)(w().B,{disabled:!0,icon:l,isEmptyPage:d,role:c,size:22,style:{width:"100%",height:"100%"},...e,largeIcon:!0}):(0,I.jsx)(w().B,{disabled:!1,bucket:"secure",store:t,icon:l,role:c,isEmptyPage:d,size:22,style:{width:"100%",height:"100%"},iconLoggingData:{recordTable:t.table,source:"subpage",block_type:u},onChange:e=>function(e,t,n){const o=t.getIconStore();o&&v().createAndCommit({userAction:"Page.handleRecordIconChange",environment:n,canUndo:!0,perform:t=>{f().KY({store:o,value:e,transaction:t})}})}(e,t,i),...e,largeIcon:!0})})}function R(e){let{showDeletedPageIndicator:t,store:n,disabled:o,isAlias:i}=e;const a=(0,l().DP)(),s=(0,r().v3)();if(t){const e=s.device.isSafari||s.device.isIOS;return(0,p().PO)({isSafariOrIOS:e,theme:a})}return(0,I.jsxs)("div",{style:{position:"relative",width:24,height:24,marginRight:4},children:[(0,I.jsx)(B,{store:n,disabled:o}),(0,I.jsx)(T,{isAlias:i})]})}},54821:(e,t,n)=>{n.d(t,{OZ:()=>c,QL:()=>d});n(581454);var o=()=>n(496603),i=()=>n(792071),r=()=>n(179034),a=()=>n(437607),s=()=>n(798880),l=()=>n(919709);function c(e){if(e.table===r().ev){const t=e.value;if(t)return i().Bj6.fromBlock(t).getCollectionPointer()}}function d(e){const t=l().RQ(e);return o().oE(t.map((e=>{const t=l().uPN(e),n=l().snh(t),o=l().Sev(t),i=l().SEY(t);if(n){const e=l().NcG(n);if(e)return{table:s().oo,id:e}}else if(o){const e=l().i$F(o);if(e)return e}else if(i){const e=l().FHi(i);if(e)return(0,a().bj)({spaceId:e.spaceId,spacePermissionGroupId:e.groupId})}})))}},56086:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(847249),i=()=>n(634201),r=n(474848);const a=function(e){let{char:t,size:a,sprite:s,testId:l,alt:c}=e;const d=(0,n(484714).v3)(),u=(0,o().K8)((()=>s||(0,n(712030).FN)(d)),[d,s]),p=(0,n(267419)._)(),m=i().qg.isCustomEmojiString(t),g=(0,o().K8)((()=>{if(m){const e=i().qg.fromCustomEmojiString(t).pointer;return(0,n(87878).nA)({parentStore:void 0,pointer:e})}}),[t,m]);return m?g?(0,r.jsx)(n(448664).A,{emojiStore:g,size:a??"1em",testId:l,alt:c}):null:(0,r.jsx)(n(450125).A,{char:t,size:a,type:u,emojiData:p,testId:l,alt:c})}},56125:(e,t,n)=>{n.d(t,{Lx:()=>u,d3:()=>p,En:()=>d});var o=()=>n(452540),i=(n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454),()=>n(99895)),r=()=>n(763824);async function a(e){const t=new Set,n=new(i().G)((()=>new Set));await s(0,e.keys.map((e=>({key:e,parentKey:void 0}))),e,t,n)}async function s(e,t,n,o,i){const a=[],c=[];if(await(0,r().lX)(t,100,(async t=>{const{key:r,parentKey:s}=t,d=n.loadIntoMap.get(r);d?await l(r,d,s,e,a,n,o,i):c.push(t)})),n.loadMultiFn){const t=await n.loadMultiFn(c.map((e=>{let{key:t}=e;return t})));await(0,r().lX)(c,100,(async r=>{let{key:s,parentKey:c}=r;const d=t.get(s);await l(s,d,c,e,a,n,o,i)}))}else await Promise.all(c.map((async t=>{let{key:r,parentKey:s}=t;const c=await n.loadFn(r);await l(r,c,s,e,a,n,o,i)})));a.length>0&&await s(e+1,a,n,o,i)}async function l(e,t,n,o,i,r,a,s){if(r.loadIntoMap.set(e,t),void 0===t)return;const l=(e,t)=>{if(!r.getRelatedPageForCollectionSubpage)return;const n=r.getRelatedPageForCollectionSubpage(e,t[1]);for(const o of n){const e=r.keyToString(o);a.has(e)||(a.add(e),i.push({key:o,parentKey:t[0]}))}};if(r.keyIsCollection&&r.keyIsCollection(e)){const n=s.get(r.keyToString(e));for(const e of n)l(t,e)}const c=await r.recurFn(t,e,n,o)??[];for(const d of c){const n=r.keyToString(d);if(r.keyIsCollection&&r.keyIsCollection(d)){const o=r.loadIntoMap.get(d);o?l(o,[e,t]):s.get(n).add([e,t])}a.has(n)||(a.add(n),i.push({key:d,parentKey:e}))}}var c=()=>n(519831);function d(e){return e.toRecordMap()}async function u(e){await a({keys:e.recordPointers,keyToString:o().jV,recurFn:async(t,n,o,i)=>await e.recurFn(t,o,i),getRelatedPageForCollectionSubpage:e.getRelatedPageForCollectionSubpage,keyIsCollection:e=>e.table===c().Vl,loadFn:e.loadRecordModel,loadMultiFn:async t=>{const n=await e.loadRecordModel(t);return{get:e=>n.getModel(e)}},loadIntoMap:{get:t=>e.recordMap.getModel(t),set(t,n){e.recordMap.setModel(t,n)}}})}async function p(e){const{loadRecordModels:t}=e;await a({keys:e.recordPointers,keyToString:o().jV,recurFn:(t,n,o,i)=>{if(t.model)return e.recurFn(t.model,t.role,o,i)},loadFn:e.loadRecordModel,loadMultiFn:t&&(async e=>{const n=await t(e);return{get(e){const t=n.getModel(e),o=n.getRole(e);if(o)return{model:t,role:o}}}}),loadIntoMap:{get(t){const n=e.recordMap.getModel(t),o=e.recordMap.getRole(t);if(o)return{model:n,role:o}},set(t,n){n&&e.recordMap.setModelAndRole(t,n.model,n.role)}}})}},56322:(e,t,n)=>{n.d(t,{A:()=>i});n(16280),n(944114),n(581454);var o=()=>n(763824);const i=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.requestDelayMs=void 0,this.requestTimeoutMs=void 0,this.queue=[],this.currentWorkers=0,this.currentSetTimeouts=0,this.dequeue=async e=>{if(this.currentSetTimeouts=0,this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;this.currentWorkers++;const t=this.queue.splice(0,this.batchSize),i=t.map((e=>e.request));let r,a;try{if(this.requestTimeoutMs){const e=await o().nQ(this.requestTimeoutMs,this.performRequests(i));if(e.timeout)throw new Error("Timed out.");r=e.result}else r=await this.performRequests(i)}catch(s){a=(0,n(319625).A)(s),e&&(a.stack+=`\n${e.stack}`)}try{if(a)for(let e=0;e<t.length;e++){t[e].deferred.reject(a)}else if(r)for(let e=0;e<t.length;e++){const n=t[e],o=r[e];n.deferred.resolve(o)}}catch(l){}this.currentWorkers--,this.queue.length>=this.batchSize?this.dequeue(e):this.dequeueAfterTimeout(e)};const{performRequests:t,batchSize:i,maxWorkers:r,requestDelayMs:a,requestTimeoutMs:s}=e;this.performRequests=t,this.batchSize=i,this.maxWorkers=r,this.requestDelayMs=a||0,this.requestTimeoutMs=s}getQueueSize(){return this.queue.length}updateBatchSize(e){this.batchSize=e}updateRequestDelayMs(e){this.requestDelayMs=e}getMaxWorkers(){return this.maxWorkers}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterTimeout()}enqueue(e){const t=o().yX();return this.queue.push({request:e,deferred:t}),this.dequeueAfterTimeout(),t.promise}dequeueAfterTimeout(e){this.currentSetTimeouts<this.maxWorkers&&(this.currentSetTimeouts++,setTimeout(this.dequeue,this.requestDelayMs))}}},57232:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(59364),i=n(474848);const r=function(e){const{iconSize:t,style:r,iconStyle:a}=e,s=(0,n(401497).IS)((n=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"center",width:o().Z,height:o().S,flexShrink:0,opacity:e.disabled?0:void 0,cursor:e.disabled?void 0:"-webkit-grab"},icon:{fill:n.mediumIconColor,width:t,height:t,...a}})),[t,a,e.disabled]);return(0,i.jsx)("div",{style:{...s.wrapper,...r},children:(0,n(887146).i)(s.icon)})}},57605:(e,t,n)=>{n.d(t,{A:()=>i});n(16280);const o=new(n(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:o}=t;if(o.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(n.bind(n,449506)),r=await i.callApi({eventName:"getBillingData",environment:e,data:{spaceId:o},headers:(0,n(386164).WS)({cellId:void 0,spaceId:o})});if("success"!==r.type)return;if(!r.data.billingData)return;const a=(0,n(596513).J)(r.data.billingData);return"admin"===a.type?a:void 0}));n(604341).exposeDebugValue("BillingDataStore",o);const i=o},57618:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(672577);class o extends(()=>n(965828))().O{findBlockPropertyValue(e,t,n){return this.find((o=>o.props.store===e&&o.props.property===t&&(!n||o.props.format===n)))}findBlockPropertyValueByBlockId(e,t,n){return this.find((o=>o.props.store.id===e&&o.props.property===t&&(!n||o.props.format===n)))}getRect(e,t){const n=this.findBlockPropertyValue(e,t);if(n){const e=n.getNode();if(e&&e instanceof Element)return e.getBoundingClientRect()}}}const i=new o},58283:(e,t,n)=>{n.d(t,{LE:()=>m,wC:()=>a,on:()=>v,FT:()=>_});var o=n(296540),i=()=>n(484714),r=()=>n(401497);const a=(0,o.createContext)({constrainedSize:{minWidth:0,minHeight:0,maxWidth:void 0,maxHeight:void 0},actualSize:{width:0,height:0},isWidthScrollbarVisible:!1,isHeightScrollbarVisible:!1});a.displayName="ConstrainSizeContext";var s=()=>n(720665);var l=()=>n(530267),c=()=>n(664565),d=()=>n(821062),u=()=>n(828634);var p=n(474848);function m(e){const{children:t,isSizeTransitionAnimated:n,onSizeChanged:m}=e,g=(0,o.useMemo)((()=>(0,l().Ve)(e.areaConstraint)),[e.areaConstraint]),{preferredSize:f,ref:v}=function(e){const t=(0,o.useRef)(null),[n,i]=(0,o.useState)(),r=(0,u().wY)(t),a=e.width.min,s=e.width.max,l=e.height.min,c=e.height.max;return(0,o.useLayoutEffect)((()=>{const e=t.current;if(!e)return;const n=function(e){const{div:t,minWidth:n,maxWidth:o,minHeight:i,maxHeight:r}=e,a={minWidth:t.style.minWidth,maxWidth:t.style.maxWidth,minHeight:t.style.minHeight,maxHeight:t.style.maxHeight,width:t.style.width,height:t.style.height,overflow:t.style.overflow};t.style.width="fit-content",t.style.height="fit-content",t.style.overflow="hidden",t.style.minWidth=`${n}px`,t.style.maxWidth=`${o}px`,t.style.minHeight=`${i}px`,t.style.maxHeight=`${r}px`;const s={width:t.scrollWidth,height:t.scrollHeight};return t.style.width=a.width,t.style.height=a.height,t.style.overflow=a.overflow,t.style.minWidth=a.minWidth,t.style.maxWidth=a.maxWidth,t.style.minHeight=a.minHeight,t.style.maxHeight=a.maxHeight,s}({div:e,minWidth:a,maxWidth:s,minHeight:l,maxHeight:c});i((e=>(0,d().A)(e,n)?e:n))}),[r,a,s,l,c]),{ref:t,preferredSize:n}}(g),h=(0,o.useMemo)((()=>function(e){const{areaConstraint:t,preferredSize:n}=e;return{width:(0,s().qE)((null==n?void 0:n.width)??0,t.width.min,t.width.max),height:(0,s().qE)((null==n?void 0:n.height)??0,t.height.min,t.height.max)}}({areaConstraint:g,preferredSize:f})),[g,f]),_=function(e){const{actualSize:t,preferredSize:n,areaConstraint:o}=e,i="allow"===o.width.scroll,r="allow"===o.height.scroll,a=i&&void 0!==(null==n?void 0:n.width)&&t.width<n.width,s=r&&void 0!==(null==n?void 0:n.width)&&t.height<n.height,l={minWidth:o.width.min,maxWidth:i?void 0:o.width.max,minHeight:o.height.min,maxHeight:r?void 0:o.height.max};return{actualSize:t,constrainedSize:l,isWidthScrollbarVisible:a,isHeightScrollbarVisible:s}}({actualSize:h,preferredSize:f,areaConstraint:g}),b=function(e){const{actualSize:t,areaConstraint:n,isSizeTransitionAnimated:o}=e,a=(0,c().j)(100),{prefersReducedMotion:s}=(0,i().Y0)(),d=(0,l().bv)(n);return(0,r().IS)((()=>{const e="allow"===n.width.scroll,i="allow"===n.height.scroll;return{wrapper:{position:"relative"},content:{height:null==t?void 0:t.height,overflowX:e?"auto":"clip",overflowY:i?"auto":"clip",WebkitOverflowScrolling:"touch",width:null==t?void 0:t.width,transition:o&&a&&!s?"0.25s ease width, 0.25s ease height":void 0},measure:{display:"flex",flexDirection:"column",height:d.height?"fit-content":"100%",maxHeight:n.height.max,maxWidth:n.width.max,minHeight:n.height.min,minWidth:n.width.min,width:d.width?"fit-content":"100%"}}}),[t,n,o,a,s,d])}({actualSize:h,areaConstraint:g,isSizeTransitionAnimated:n});return(0,o.useEffect)((()=>{null==m||m(h,f)}),[h,m,f]),(0,p.jsx)(a.Provider,{value:_,children:(0,p.jsx)("div",{style:b.wrapper,children:(0,p.jsx)("div",{style:b.content,children:(0,p.jsx)("div",{ref:v,className:"measure",style:b.measure,children:t})})})})}var g=()=>n(847249),f=()=>n(661179);function v(){const e=(0,o.useContext)(a),t=(0,g().O$)(f().A);return null!=e&&e.isHeightScrollbarVisible?t:0}var h=()=>n(754735);function _(e){const{minimumOutsideSpacing:t}=e,n=(0,h().lW)();return(0,o.useMemo)((()=>{const e={type:"max",length:n.width-t.left-t.right},o={type:"max",length:n.height-t.top-t.bottom};return(0,l().Ve)({width:e,height:o})}),[t.bottom,t.left,t.right,t.top,n.height,n.width])}},58293:(e,t,n)=>{n.d(t,{r:()=>r});var o=()=>n(847249),i=()=>n(351360);function r(){return(0,o().O$)(i().AppStoreCurrentSpaceStore)}},58415:(e,t,n)=>{n.d(t,{E:()=>l});var o=()=>n(179034),i=()=>n(519831),r=()=>n(246826),a=()=>n(272600),s=()=>n(630116);function l(e){const{environment:t,collectionViewBlockStore:n,transaction:l,collectionValue:c}=e,d=r().eC({environment:t,table:i().Vl,value:{...c,parent_id:n.id,parent_table:o().ev,alive:!0,space_id:n.getSpaceId()},inMemoryRecordCache:n.inMemoryRecordCache,transaction:l}),u=s().md.createChildStore(n,d.pointer);return(0,a().p)({collectionViewBlockStore:n,collectionPointer:u.pointer,transaction:l}),u}},59320:(e,t,n)=>{n.d(t,{G:()=>d});var o=()=>n(206267),i=()=>n(197959),r=()=>n(161479),a=()=>n(534177),s=()=>n(246826),l=()=>n(630116),c=()=>n(337090);function d(e){const{createDiscussionArgs:t,blockStore:n,environment:d,transaction:u,commentTextValue:p,files:m,discussionId:g}=e,f=(0,r().e)(n.pointer.spaceId);let v;"default"===t.type?(v=l().sk.createChildStore(n,{table:i().$Y,id:g,spaceId:f}),s().zv({store:v,data:{type:"default",parent_id:n.id,parent_table:n.table,resolved:!1,context:t.context,space_id:f,property_id:t.property_id},transaction:u})):"suggestion"===t.type?v=s().vt({environment:d,table:i().$Y,args:{id:g,type:"suggestion",parent:n.pointer,resolved:!1,context:{rejected:!1,modifiedBlockIds:t.modifiedBlockIds,latestSessionId:o().JW(),snapshot:{data:t.snapshotTextValue?[{type:"textValue",value:t.snapshotTextValue}]:[]},splitFrom:t.splitFrom},space_id:f},inMemoryRecordCache:n.inMemoryRecordCache,transaction:u}):(0,a().HB)(t);return{discussionStore:v,commentStore:(0,c().G)({discussionStore:v,text:p,files:m,markDiscussionRead:!0,environment:d,transaction:u})}}},59326:(e,t,n)=>{function o(e,t){return t&&e.redirect_uris.includes(t)?t:t||1!==e.redirect_uris.length?void 0:e.redirect_uris[0]}n.d(t,{H:()=>o})},59364:(e,t,n)=>{n.d(t,{S:()=>i,Z:()=>o});const o=18,i=24},59728:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(){const e=document.documentElement;return new(n(397248).z8)(0,0,e.clientWidth,e.clientHeight)}},59822:(e,t,n)=>{n.d(t,{A:()=>l});n(296540);var o=()=>n(847249),i=()=>n(401497),r=()=>n(141333),a=n(474848);const s=10;function l(e){let{store:t,leftOverlayStyle:n,rightOverlayStyle:l,backgroundColor:c}=e;const d=(0,i().DP)(),u=(0,o().K8)((()=>t.state.elementRef),[t]),p=(0,r().sj)(u),m=(0,r().Xg)(u),g=(0,r().HD)(u),f=Math.abs(p)<s,v=Math.abs(m-(p+g))<s;return(0,a.jsxs)(a.Fragment,{children:[!f&&(0,a.jsx)("div",{style:{position:"absolute",background:`linear-gradient(90deg, ${c||d.contentBackground} 0%, ${d.contentBackgroundTransparent} 100%)`,top:0,bottom:0,width:18,left:0,zIndex:10,pointerEvents:"none",...n}}),!v&&(0,a.jsx)("div",{style:{position:"absolute",background:`linear-gradient(270deg, ${c||d.contentBackground} 0%, ${d.contentBackgroundTransparent} 100%)`,top:0,bottom:0,width:18,right:0,zIndex:10,pointerEvents:"none",...l}})]})}},59862:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue({open:!1},{name:"ContactSalesModalStore"})},60382:(e,t,n)=>{function o(e,t,n,o){return Math.sqrt((e-n)*(e-n)+(t-o)*(t-o))}n.d(t,{A:()=>o})},60676:(e,t,n)=>{n.d(t,{A:()=>k});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(799954),l=()=>n(959013),c=()=>n(324089),d=()=>n(751156),u=()=>n(744705),p=()=>n(494043),m=()=>n(468484),g=()=>n(11048),f=()=>n(704152),v=()=>n(378765),h=()=>n(493733),_=()=>n(42425),b=()=>n(697868),y=()=>n(702796),S=()=>n(176663),w=n(474848);function k(e){const t=(0,i().v3)(),n=(0,a().DP)(),k=(0,o.useRef)(!0);(0,o.useLayoutEffect)((()=>{k.current&&(k.current=!1,c().MB({blockId:e.store.id,currentUserId:t.currentUser.id}),c()._z(t,e.store))}));const I=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),x=(0,r().K8)((()=>m().A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),A=(0,r().K8)((()=>!e.store.hasContent()),[e.store]),C=(0,o.useId)(),T=(0,o.useId)(),M=(0,r().K8)((()=>u().X(e.store)||!e.store.isDefaultRecordCache()),[e.store]),P=(0,r().K8)((()=>e.store.getType()),[e.store]);(0,S()._)({loaded:M,blockType:P,isOpen:x});const B=(0,o.useCallback)((()=>{p().qj(t,e.store,e.hideContent)}),[t,e.hideContent,e.store]),R=(0,o.useCallback)((()=>{d().createAndCommit({userAction:"FormatToggleable.handlePlaceholderClick",environment:t,canUndo:!0,perform:n=>{c()._N({environment:t,store:e.store,transaction:n})}})}),[t,e.store]),E=(0,w.jsx)(f().A,{style:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:n.text.tertiary,...s().nE,marginTop:2},onClick:R,disabled:e.disabled,children:(0,w.jsx)("span",{style:{color:n.text.tertiary},children:(0,w.jsx)(l().sA,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlockFormat.emptyBlock.placeholderText"})})}),D=(0,w.jsx)(y().A,{"aria-describedby":C,"aria-controls":T,isSidebar:!1,open:x,fill:!A,onClick:B}),N=x?(0,w.jsx)(v().A,{id:T,loaded:M,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:(0,b().MG)(),style:(0,b().Cu)(),children:(0,w.jsx)(h().A,{store:I,emptyPlaceholder:E,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,w.jsx)(h().A,{store:I,disabled:e.disabled,disableContent:!0});return(0,w.jsx)(g().A,{name:"FormatToggleableHeader",children:(0,w.jsxs)(_().Ay,{style:{paddingLeft:s().nE.paddingLeft},left:D,leftStyle:{paddingRight:2,...e.toggleStyle},children:[(0,w.jsx)("div",{id:C,style:e.childrenStyleWhenToggleable,children:e.children}),N]})})}},60867:(e,t,n)=>{n.d(t,{B2:()=>ce,Bz:()=>ue,Ch:()=>me,Gr:()=>oe,HF:()=>fe,QK:()=>ne,RJ:()=>X,Uz:()=>re,VI:()=>pe,VT:()=>he,fA:()=>de,jG:()=>ie,un:()=>ve,vX:()=>ge,zM:()=>se,zt:()=>ae});n(16280),n(18107),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(967357),n(898992),n(354520),n(803949),n(581454),n(737550),n(296540);var o=()=>n(908006),i=()=>n(584262),r=()=>n(66689),a=()=>n(970013),s=()=>n(713998),l=()=>n(179034),c=()=>n(161479),d=()=>n(854150),u=()=>n(708830),p=()=>n(695631),m=()=>n(358547),g=()=>n(842989),f=()=>n(220719),v=()=>n(959013),h=()=>n(496603),_=()=>n(534177),b=()=>n(284371),y=()=>n(435345),S=()=>n(857783),w=()=>n(895876),k=()=>n(799832),I=()=>n(855801),x=()=>n(989423),A=()=>n(405417),C=()=>n(594794),T=()=>n(611191),M=()=>n(972435),P=()=>n(685889),B=()=>n(494043),R=()=>n(351360),E=()=>n(589994),D=()=>n(630116),N=()=>n(908447),L=()=>n(970330),O=()=>n(134060),U=()=>n(449506),F=()=>n(317001),V=()=>n(235191),j=()=>n(27732),z=()=>n(901389),H=()=>n(357625),W=()=>n(896628),q=()=>n(44729),K=()=>n(246826),G=()=>n(899453),$=()=>n(797265),Y=()=>n(778417),Q=()=>n(751156),Z=n(474848);function X(e){const{environment:t,transaction:n,blocks:o,action:i}=e,r=(0,k().U)(o[0]);if(!r)return;const a=r.subitemTreeStore.state;if(!a)return;const s=r.currentSubitemFormatStoreForUiDisplayStore.state;if(!s||!s.property)return;const l=r.collectionViewBlockStore();if(!l)return;const c=new(u().PH)({store:l,pathKey:""},a.map((e=>e)).children),d=function(e,t){const n=new Set(e);let o,i;for(const r of m().Y_(t)){if(!n.has(r.value.store)){if(o)return;continue}const e=(0,u().Qe)([t],(e=>e===r));if(!e||e.length<2)return;if(o??=e,i=e,n.delete(r.value.store),0===n.size)break}if(o&&i)return g().W.fromNearestCommonAncestor(o,i)}(o,c);if(!d)return;const f=p().l.getIndentOperationsFromTreeRange(d,i),v=new Set,h=[],b="unindentSelf"===i?new Set(f.map((e=>e.target))):new Set;for(const m of f){const{target:e,operation:o}=m,i=(0,u().Qe)([c],(t=>t===e));if(void 0===i)return;const a=i[i.length-2];if("indentSelfAndSubtree"===o){if(v.has(a)){v.add(e),h.push(e.value.store);continue}const o=a.children,i=o.indexOf(e);if(0===i)return;const l=o[i-1].value.store;J({environment:t,parentStore:a.value.store,previousSiblingStore:l,targetStore:e.value.store,subitemFormat:s,transaction:n}),h.push(D().Bv.createChildStore(l,e.value.store.pointer)),ne({collectionContextStore:r,pathKey:(0,A().F9)(a.value.pathKey,l)})}else{if("unindentSelf"!==o)break;{var y;if(b.has(a)){b.delete(e),h.push(e.value.store);continue}if(1===i.length)return;const o=null===(y=i[i.length-3])||void 0===y?void 0:y.value.store;ee({environment:t,parentStore:a.value.store,grandparentStore:o,targetStore:e.value.store,subitemFormat:s,transaction:n}),h.push(D().Bv.createChildStore(o&&o.isPageBlock()?o:r.collectionViewBlockStore(),e.value.store.pointer))}}if(p().h.applyMutable(c,m))if("indentSelfAndSubtree"===o)v.add(e);else if("unindentSelf"===o){const t=r.subitemExpandedStore.state,n=a.value.pathKey,o=t.get(n);0===a.children.length&&null!=o&&o.isExpanded&&(t.delete(n),r.subitemExpandedStore.emit()),b.delete(e)}else(0,_().HB)(o)}h&&Y().td({environment:t,stores:h})}function J(e){const{environment:t,parentStore:n,previousSiblingStore:o,targetStore:i,subitemFormat:r,transaction:a}=e;n.isPageBlock()&&G().c3({environment:t,sourceStore:n,destStore:i,propertyWithInverse:r,transaction:a}),G().j$({environment:t,sourceStore:o,destStore:i,propertyWithInverse:r,transaction:a,position:{type:"after"}})}function ee(e){const{environment:t,parentStore:n,grandparentStore:o,targetStore:i,subitemFormat:r,transaction:a}=e;G().c3({environment:t,sourceStore:n,destStore:i,propertyWithInverse:r,transaction:a}),o&&o.isPageBlock()&&G().j$({environment:t,sourceStore:o,destStore:i,propertyWithInverse:r,position:{type:"after",after:n.id},transaction:a})}function te(e){var t,n;const{blocksToDuplicate:o,duplicatedBlocks:i,environment:r,transaction:s,migrateSubitemFormat:l,pageCollectionContextStore:c,originalSubitemSchemas:d}=e;if(o.length!==i.length)throw new Error("Error rebuilding relations. blocksToDuplicate and duplicatedBlocks must be the same length");const u=o.at(0);if(!u)return;const{from:p,to:m}=l||function(e){const t=(0,A().oC)(e);if(!t)throw new Error("Error rebuilding relations");const{subitemFormat:n}=t;return{from:n,to:n}}(u),g=(0,k().U)(u)||c;if(!g)return;const f=(null===(t=g.collectionStore())||void 0===t?void 0:t.getSchema()[p.property])||(null==d?void 0:d.subitemRelationSchema),v=(null===(n=g.collectionStore())||void 0===n?void 0:n.getSchema()[p.inverse])||(null==d?void 0:d.parentRelationSchema);if(!(f&&v&&(0,a().nC)(f)&&(0,a().nC)(v)))return;const _=new Map(h().yU(o.map((e=>e.id)),i));h().yU(o,i).forEach((e=>{let[t,n]=e;const o=(0,A().rt)({store:t,subitemFormat:{property:p.property},propertySchema:f}),i=(0,A().eO)({store:t,subitemFormat:p,propertySchema:v});o.forEach((e=>{const t=D().Bv.createChildStore(n,e),o=_.get(e.id);o&&(G().c3({environment:r,sourceStore:n,destStore:t,propertyWithInverse:p,transaction:s}),G().j$({environment:r,sourceStore:n,destStore:o,propertyWithInverse:m,transaction:s,position:{type:"after"}}))})),i.forEach((e=>{const t=D().Bv.createChildStore(n,e);_.get(e.id)&&G().c3({environment:r,sourceStore:t,destStore:n,propertyWithInverse:p,transaction:s})}))}))}function ne(e){const{collectionContextStore:t,pathKey:n}=e,o=t.subitemExpandedStore.state,i=o.get(n);null!=i&&i.isExpanded||(o.set(n,{isExpanded:!0,limit:20}),t.subitemExpandedStore.emit())}async function oe(e){const{collectionContextStore:t,forceState:n}=e;let o=!0;const i=t.subitemTreeStore.state,r=new Set,a=new Set;if("open"===n||void 0===n)for(const c of i.children){const{store:e,pathKey:n}=c.value,i=(0,A().r6)(t);if(!i)return!1;const s=t.normalizedSchemaStore.state[i.property];if(!s||"relation"!==s.type)return!1;o=await(0,A().DH)({blockStore:e,subitemExpandedStore:t.subitemExpandedStore,subitemFormat:i,propertySchema:s,pathKey:n,forceStoresToLoad:!0,visitedIds:a,expandedIds:r,resultCache:new Map,regExpCache:new Map})}let s=i.children,l=0;if("closed"===n||0===r.size)for(;s.length>0;){const e=s.shift();if(!e)break;const{value:n,children:i}=e;if(s=[...s,...i],t.subitemExpandedStore.state.set(n.pathKey,{isExpanded:!1,limit:20}),l+=1,l>A().TK){o=!1;break}}return t.subitemExpandedStore.emit(),t.subitemTreeStore.emit(),t.subitemTreeStore.enqueueRecompute(),o}function ie(e){const t=(0,k().U)(e);if(!t)return;const n=t.subitemTreeStore.state,o=(0,u().Qe)(n.children,(t=>t.value.store===e));if(!o)return;const i=o.map((e=>e.value.store.pointer)),r=(0,A().kY)(i),a=t.subitemExpandedStore.state,s=a.get(r);s&&s.isExpanded&&(a.delete(r),t.subitemExpandedStore.emit())}function re(e){var t;const n=(0,k().U)(e);if(!n)return;const o=n.subitemTreeStore.state,i=(0,u().Qe)(o.children,(t=>t.value.store===e));if(!i)return;const r=n.currentSubitemFormatStoreForUiDisplayStore.state;if(!r)return;const a=null===(t=n.collectionStore())||void 0===t?void 0:t.getSchema()[r.property];if(!a||"relation"!==a.type)return;if(0===(0,A().rt)({store:e,subitemFormat:r,propertySchema:a}).length)return;const s=i.map((e=>e.value.store.pointer));ne({collectionContextStore:n,pathKey:(0,A().kY)(s)})}function ae(e){var t;const{collectionContextStore:n,relationPropertyId:o,transaction:i,environment:a}=e,s=n.collectionStore();if(!s)return;const l=o?s.getSchema()[o]:void 0,c="relation"===(null==l?void 0:l.type)&&l.property&&"relation"===(null===(t=s.getSchema()[l.property])||void 0===t?void 0:t.type)?l.property:void 0,d=s.getFormat().subitem_property&&o?"collectionViewSubitemActions.changeSubitemProperty":s.getFormat().subitem_property?"collectionViewSubitemActions.turnOffSubitems":"collectionViewSubitemActions.turnOnSubitems";W().zA({stores:[s],update:{subitem_property:o,...s.getFormat().app_config_uri===r().dC?{app_uri_map:{...s.getFormat().app_uri_map?s.getFormat().app_uri_map:{},[r().yx.SubTaskRelation]:o,[r().yx.ParentTaskRelation]:c}}:{}},transaction:i}),x().vd(a,"update_subitem_property",{userAction:d})}async function se(e){const{environment:t,blocks:n,options:o}=e;if(n.some((e=>!e.isPageBlock())))return{result:[],status:"success"};const i=n.at(0);if(!i)return{result:[],status:"success"};const r=e.collectionContextStore??(0,k().U)(i);if(!r)return{result:[],status:"success"};const s=r.collectionStore();if(!s)return{result:[],status:"success"};const l=r.currentSubitemFormatStoreForCollectionStore.state;if(!l)return{result:[],status:"success"};const c=r.normalizedSchemaStore.state,d=l.property,u=c[d];if(void 0===d||void 0===u||!(0,a().nC)(u))return{result:[],status:"success"};if(!n.some((e=>(0,A().rt)({store:e,subitemFormat:l,propertySchema:u}).length>0)))return{result:[],status:"success"};await E().transactionQueue.drain();const p=s.id,m=s.getSpaceId(),g=await U().callApi({eventName:"getSubitems",environment:t,data:{collection:{id:p,spaceId:m},blocks:n.map((e=>({id:e.id,spaceId:m}))),childRelationProperty:d,canEdit:null==o?void 0:o.canEdit}});return"failed"===g.type?{result:[],status:"failed"}:{result:g.data.blocks.map((e=>D().Bv.createChildStore(s,{table:"block",...e}))),status:"success"}}function le(e){const t=e.at(0);if(void 0===t)return[];const n=(0,k().U)(t);if(void 0===n)return[];const o=n.collectionStore(),i=n.collectionViewBlockStore();if(void 0===o||void 0===i)return[];const r=n.currentSubitemFormatStoreForCollectionStore.state;if(void 0===r)return[];const s=n.normalizedSchemaStore.state[r.property];if(void 0===s||!(0,a().nC)(s))return[];if(void 0===s.property)return[];const l=new Set(e.map((e=>e.id))),c=[];let d=e;for(;d.length>0;){const e=h().Bq(d.map((e=>(0,A().rt)({store:e,subitemFormat:r,propertySchema:s})))).filter((e=>!l.has(e.id))).map((e=>D().Bv.createChildStore(i,e)));for(const t of e)l.add(t.id);c.push(...e),d=e}return c}function ce(e){let{environment:t,blocks:n,recordMaps:o,analyticsFrom:i,transaction:r,migrateSubitemFormat:a,collectionContextStore:s,originalSubitemSchemas:u,loadLocalSubtreeModule:p,duplicateActionsModule:m}=e;const g=n.at(0);if(!g)return[];const v=(e,n)=>{const i=o?o.get(e.id):p.loadLocalSubtree(t,{blockId:e.id,inMemoryRecordCache:e.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!0,allowCopyExternalObjectInstances:!0,skipBlockContent:!0,includeLegacyTransclusionBlockValues:null==n?void 0:n.includeLegacyTransclusionBlockValues}).recordMap;if(!i)throw new Error("Could not find cached copy of block during sub-item duplication.");return i};n.forEach((e=>{var n;const o=e.getModel();if(!o)return[];const{currentSpaceStore:r}=R().default.getState();let a;r&&o.getParentTable()===d().yK&&o.parent_id&&(a=D().h4.createChildStore(r,{table:d().yK,id:o.parent_id})),L().v(t,{from:i??"copy",type:o.type,teamStore:a,is_toggleable:(0,B().Yt)(o.type,o.getFormat()),collection_id:e.getAssociatedCollectionId()??(null===(n=e.getCollectionStore())||void 0===n?void 0:n.id),new_page_id:"page"===o.type?e.id:void 0,creating_block_id:e.id})}));const h=(0,T().$J)(),_=n.map((e=>{var n;const o=m.localDuplicate({environment:t,transaction:r,sourceBlockId:e.id,targetBlockPointer:(0,C().zP)({environment:t,table:l().ev,spaceId:(0,f().o9)(null===(n=s.collectionStore())||void 0===n?void 0:n.getSpaceId(),"Cannot find spaceId for collectionContextStore here")}),sourceBlockSubtree:v(e,{includeLegacyTransclusionBlockValues:h}),targetInMemoryRecordCache:e.inMemoryRecordCache,options:{addCopyName:!1,deepCopyTransclusionContainers:!g.isTransclusionType(),resolveTemplateVariables:!(g.isInsideTemplate()||g.isInsideFactoryOrDuplicateBlocksAction()),preventLegacyTransclusions:h}}).targetBlockStore;return K().zv({store:o,data:{content:[]},transaction:r}),o}));return te({blocksToDuplicate:n,duplicatedBlocks:_,environment:t,transaction:r,migrateSubitemFormat:a,pageCollectionContextStore:s,originalSubitemSchemas:u}),r.postSubmitCallbacks.push((async e=>{e||await Promise.all(n.map(((e,n)=>H().UT(t,y().w,{sourceBlocks:[{id:e.pointer.id,spaceId:(0,c().e)(e.pointer.spaceId)}],targetBlocks:[{id:_[n].pointer.id,spaceId:(0,c().e)(_[n].pointer.spaceId)}],addCopyName:!1,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!1,deepCopyTransclusionContainers:!1,userAction:"collectionViewSubitemActions.localDuplicateBlocksWithSubitems"}).next().finally((()=>{})))))})),_}function de(e){let{blocks:t,transaction:n,from:o,to:i,environment:r,originAction:a}=e;return t.forEach((e=>{(0,A().pC)({store:e,subitemFormat:{property:o.property},originAction:a}).forEach((t=>{const o=D().Bv.createChildStore(e,t);G().j$({environment:r,sourceStore:e,destStore:o,propertyWithInverse:i,transaction:n,position:{type:"after"}})}))})),t}async function ue(e){let{droppedStores:t,createdStores:n,collectionStore:o,environment:i,collectionContextStore:r,groupsPointer:a,alreadyMovedToCollection:s,shouldDuplicate:l}=e;const c=t.at(0);if(!c)return;const d=(0,A().oC)(c);let u=(0,A().vd)(o);if(!d)return;const{result:p,status:m}=await se({environment:i,blocks:t,options:{canEdit:!0}});if("success"!==m)return;if(p.length<=0)return;let g=[...p];if(l){const e=await ve({environment:i,blocks:p,analyticsFrom:"subitem_option_drag_drop",collectionContextStore:r});e&&(g=[...e])}Q().createAndCommit({userAction:"collectionGroupActions.handleGroupDrop.subitemsDrop",environment:i,canUndo:!0,perform:e=>{if(!u){pe({transaction:e,collectionContextStore:r,environment:i})&&(u=(0,A().vd)(o))}for(const t of g)(0,F().j)({environment:i,store:t,collectionStore:o,collectionContextStore:r,groupsPointer:a,shouldCoerce:!0,transaction:e,alreadyMovedToCollection:s});u&&me({blocksToDuplicate:[...t,...p],duplicatedBlocks:[...n,...g],environment:i,shouldDuplicate:l,originSubitemFormat:d.subitemFormat,destinationSubitemFormat:u,transaction:e,subitemRelationSchema:d.childRelationSchema,relationPropertyCollectionId:o.id})}}),(0,O().t)(i,{draggedTypes:h().oE(g.map((e=>e.getType()))),from:"subitem_drag",asCopy:l,optionalAnalyticsProperties:{collectionContextStore:r}})}function pe(e){let{transaction:t,collectionContextStore:n,environment:o}=e;if(n.permissionScopesStore.state.isLocked||!n.permissionScopesStore.state.canEditContent)return;const i=n.collectionStore(),r=n.collectionViewStore();if(!i)return;const a=i.getModel();if(!a)return;const s=n.normalizedSchemaStore.state,l=P().$H(M().A.getIntl(),{targetCollectionStore:i,isSelfRelation:!0,sourceSchema:s,createUnique:!0,from:"subitem"}),c=P().zF(M().A.getIntl(),{sourceCollection:a,isSelfRelation:!0,targetCollectionStore:i,createUnique:!0,from:"subitem"}),d=V().IL({environment:o,collectionStore:i,collectionViewArgs:r?{collectionViewStore:r,format:r.getFormat(),formatKey:"collection_page_properties"}:void 0,propertyType:"relation",transaction:t});return j().cT({environment:o,collectionContextStore:n,collectionStore:i,property:d,propertyName:l,targetCollectionStore:i,hasInverseRelation:!0,inverseName:c,autoRelate:{enabled:!1},propertyLimit:"no_limit",intl:M().A.getIntl(),transaction:t,from:"subitem",analyticsFrom:"nested_subitem_operation",onlyCheckPermissions:!0}),ae({environment:o,collectionContextStore:n,relationPropertyId:d,transaction:t}),(0,N().Z)({environment:o,collectionContextStore:n,from:"nested_subitem_operation",property_type:"relation"}),d}function me(e){let{blocksToDuplicate:t,duplicatedBlocks:n,environment:o,shouldDuplicate:i,originSubitemFormat:r,destinationSubitemFormat:a,transaction:s,subitemRelationSchema:l,relationPropertyCollectionId:c}=e;i?te({blocksToDuplicate:t,duplicatedBlocks:n,environment:o,transaction:s,migrateSubitemFormat:{from:r,to:a}}):de({blocks:t,transaction:s,from:r,to:a,environment:o})}async function ge(e){var t;let{blocks:n,subitems:o,environment:i,canUndo:r,skipConfirmation:a}=e;const s=o||le(n),l=[...n,...s];$().rW(l);const c=n.at(0);if(!c)return!1;const d=(0,k().U)(c)??(0,A().Ib)(c,i);let u=o;if(void 0===u){const{result:e,status:t}=await se({environment:i,blocks:n,options:{canEdit:!0},collectionContextStore:d});if("success"!==t)throw new Error("Failed to fetch subitems");u=e}const p=null==d||null===(t=d.collectionStore())||void 0===t?void 0:t.getFormat().app_config_uri,m=(0,w().$O)(p,!0),g=(0,w().oj)(p,!0);if(!a&&u.length>0){const e=await function(e){let{itemCount:t,subitemCount:n,newItemName:o,newItemNamePlural:i}=e;return new Promise((e=>{z().ui({onDismiss(){e(!1)},description:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.description",defaultMessage:"This will also delete {subitemCount, plural, one {{subitemCount} sub-{newItemName}} other {{subitemCount} sub-{newItemNamePlural}}}.",values:{subitemCount:n,newItemName:o,newItemNamePlural:i}}),message:(0,Z.jsx)("div",{style:{fontWeight:b().Wy.semibold,fontSize:18},children:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.message",defaultMessage:"Are you sure you want to delete {itemCount, plural, one {this {newItemName}} other {these {newItemNamePlural}}}?",values:{itemCount:t,newItemName:o,newItemNamePlural:i}})}),innerStyle:{textAlign:"center"},showCancel:!0,keepFocus:!0,items:[{label:(0,Z.jsx)(v().sA,{id:"deleteSubitems.confirmation.acceptLabel",defaultMessage:"Delete"}),color:"red",onAccept:()=>{e(!0)}}]})}))}({itemCount:n.length,subitemCount:u.length,newItemName:m,newItemNamePlural:g});if(!e)return $().q3(l),!1}const{serverCommitResult:f}=Q().createAndCommit({userAction:"collectionViewSubitemActions.removeBlocksWithSubitems",environment:i,canUndo:r,perform:e=>{$().ZL({environment:i,blocks:n,transaction:e});for(const t of u)K().zv({store:t,data:{alive:!1},transaction:e})}});return await f,!0}async function fe(e){const{environment:t,blocks:n,collectionContextStore:o,callback:r}=e,{result:a,status:s}=await se({environment:t,blocks:n,collectionContextStore:o,options:{canEdit:!0}});if("success"!==s)return;await Promise.all(a.map((e=>e.load())));const l=(0,A().n9)(o);if(!l)throw new Error("Could not find subitem info during duplication");const c=l.subitemFormat,d=await I().VI.loadLocalSubtree.load(),u=await I().VI.duplicateActions.load(),{serverCommitResult:p}=Q().createAndCommit({userAction:"collectionViewSubitemActions.duplicateBlocksWithSubitemsFromPage",environment:t,canUndo:!0,perform:e=>{const r=ce({blocks:[...n,...a],environment:t,transaction:e,migrateSubitemFormat:{from:c,to:c},collectionContextStore:o,analyticsFrom:"subitem_duplication_page_menu",loadLocalSubtreeModule:d,duplicateActionsModule:u}),s=o.collectionStore();if(!s)return;r.map((t=>{q().X$({childStore:t,parentStore:s,transaction:e})}));const l=r.at(0);l&&S().uK({environment:t,store:l,pageVisitSource:i().y8.Duplicate})}});p.then(r)}async function ve(e){var t;const{environment:n,blocks:i,analyticsFrom:r,callback:a,collectionContextStore:s}=e,l=i.at(0);if(!l)return;const c=(0,A().oC)(l),d=null===(t=(0,k().U)(l))||void 0===t?void 0:t.collectionViewBlockStore();if(!c||!d)return;const u=[...i,...le(i)];if($().rW(u),!i.at(-1))return;const{result:p,status:m}=await se({environment:n,blocks:i,options:{canEdit:!0}});if("success"!==m)return;let g=[],f=[];const v=await I().VI.loadLocalSubtree.load(),h=await I().VI.duplicateActions.load(),{serverCommitResult:_}=Q().createAndCommit({userAction:"actionRegistry.duplicateToSelectionWithSubitems",environment:n,canUndo:!0,perform:e=>{f=ce({blocks:[...i,...p],environment:n,transaction:e,analyticsFrom:r,loadLocalSubtreeModule:v,collectionContextStore:s,duplicateActionsModule:h}),g=$().LE({environment:n,blocksToInsert:f,target:i,transaction:e,replaceEmptyTextBlock:!1,preventSetSelection:!0})}});_.then(a);const{parentRelationProperty:b,parentRelationSchema:y}=c,S=(0,A().BK)({blocks:g,parentRelationProperty:b,parentRelationSchema:y,collectionViewBlockStore:d});return o().default.afterNextFlush((()=>{o().default.afterNextFlush((()=>{Y().td({environment:n,stores:S})}))})),$().q3(u),f}function he(e){const{environment:t,blockStore:n,collectionStore:o,subitemFormat:i,transaction:r}=e,a=n.getPropertyValue(i.inverse);s().n(a).forEach((e=>{const a=D().Bv.createChildStore(o,e);G().c3({environment:t,sourceStore:n,destStore:a,propertyWithInverse:{property:i.inverse,inverse:i.property},transaction:r})}))}},62287:(e,t,n)=>{n.d(t,{pd:()=>k,Ff:()=>I});n(898992),n(581454),n(737550);var o=()=>n(700500),i=()=>n(68263),r=()=>n(179034),a=()=>n(919709),s=()=>n(496603),l=()=>n(494043),c=()=>n(65269),d=()=>n(611371),u=()=>n(899038),p=()=>n(722101),m=()=>n(579627),g=()=>n(915457),f=()=>n(246826),v=()=>n(324089),h=(n(354520),()=>n(969197)),_=()=>n(861841),b=()=>n(896628),y=()=>n(547392);function S(e,t){const{store:n,transaction:o,disableAutoChildrenMove:i}=e;return i||function(e){const{environment:t,store:n,transaction:o}=e,i=(0,h().T)(n),r=(null==i?void 0:i.getContentStores())||[];let a=!1;const s=r.filter((e=>{return a?(t=e.getType(),o=n.getType(),!(!t||!o||t===o||"divider"===t||"collection_view"===t||"sub_header"===o&&"header"===t||"sub_sub_header"===o&&("header"===t||"sub_header"===t))||(a=!1,!1)):(e===n&&(a=!0),!1);var t,o}));y().MS({environment:t,targetParentStore:n.getContentStore(),droppedDirection:_().bH.Below,droppedStores:s,duplicate:!1,duplicateActions:void 0,transaction:o})}(e),b().zA({stores:[n],update:{toggleable:t},transaction:o})}var w=()=>n(751156);function k(e){const{environment:t,block:n,blockType:r,transaction:c,isMultiBlockTransformation:h}=e,_=n.getType(),b=n.getFormat(),y=n.recordStoreUIParentStore;if((0,d().EF)(t)&&_&&!function(e,t){const n=e.type,i=e.format;if(l().pL(t)){var r;return"mermaid_code_block"===t?e.type===o().xd.code&&"Mermaid"===a().q4_(null===(r=e.properties)||void 0===r?void 0:r.language):(0,o().D)(t)?l().i_(t)===e.type&&(0,o().v_)(n,i):l().i_(t)===e.type}return e.type===t&&!(0,o().v_)(n,i)}({type:_,format:b,properties:n.getProperties()},r)){const e=_,a=l().pL(r)?l().i_(r):r;if(f().zv({store:n,data:{type:a},transaction:c}),(0,o().D)(r)&&!l().PQ(n)?function(e){S(e,!0)}({environment:t,store:n,transaction:c,disableAutoChildrenMove:Boolean(h)}):!(0,o().D)(r)&&l().PQ(n)&&function(e){const{store:t}=e;t.recordStoreUIParentStore&&S(e,!1)}({environment:t,store:n,transaction:c,disableAutoChildrenMove:Boolean(h)}),"mermaid_code_block"===r&&u().IA({blocks:[n],language:"Mermaid",transaction:c}),o().BJ[e]&&!o().BJ[r]){n.getPermissionItems().some(i().T6)&&m().P8({environment:t,store:n,transaction:c})}l().BN(n)&&v().xT({blockId:n.id,state:!0,currentUserId:t.currentUser.id});const d=n.getType();d&&y&&_&&(0,o().IU)(_,b)&&!(0,o().IU)(d,n.getFormat())&&function(e){let{environment:t,block:n,parentStore:o}=e;const i=async()=>{const e=n.getContentStores();await Promise.all(e.map((e=>e.load()))),w().createAndCommit({userAction:"transformActions.runAsync",environment:t,canUndo:!0,perform:t=>{const i=s().o8(e).reverse();for(const e of i)p().TF({parentStore:n.getContentStore(),childToRemoveStore:e,transaction:t}),p().WH({parentStore:o,insertStore:e,afterStore:n,transaction:t})}})};i()}({environment:t,parentStore:y,block:n}),g().eY({environment:t,store:n,transaction:c})}return n}function I(e,t){const n=t.getFormat().alias_pointer;if(!n||n.table!==r().ev)return;const o=t.recordStoreUIParentStore;null!=o&&o.valueIs(c()._)&&w().createAndCommit({userAction:"transformActions.transformAliasBlockIntoPageMention",environment:e,canUndo:!0,perform:i=>{const r=(0,a().wmz)((0,a().ld4)(n.id,n.spaceId)),s=f().Wv({environment:e,type:"text",properties:{title:[r]},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:i});p().WH({parentStore:o,insertStore:s,afterStore:t,transaction:i}),p().TF({parentStore:o,childToRemoveStore:t,transaction:i})}})}},62856:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(296540);function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const[r,a]=(0,o.useState)(i),s=(0,o.useRef)(null),l=(0,o.useRef)(null);return(0,o.useLayoutEffect)((()=>{null!==l.current&&window.clearTimeout(l.current),null!==s.current&&window.clearTimeout(s.current),l.current=null,s.current=null,e?0===t?a(!0):s.current=window.setTimeout((()=>{s.current=null,a(!0)}),t):0===n?a(!1):l.current=window.setTimeout((()=>{l.current=null,a(!1)}),n)}),[e,t,n]),r}},63759:(e,t,n)=>{n.d(t,{R5:()=>w,pG:()=>S,Im:()=>y});n(18107),n(967357);var o=()=>n(700500),i=(n(296540),()=>n(340498)),r=n(474848);const a={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.5 2.375A2.125 2.125 0 0 0 3.375 4.5v5.25c0 1.174.951 2.125 2.125 2.125H13a2.125 2.125 0 0 0 2.125-2.125V4.5A2.125 2.125 0 0 0 13 2.375zM4.625 4.5c0-.483.392-.875.875-.875H13c.483 0 .875.392.875.875v5.25a.875.875 0 0 1-.875.875H5.5a.875.875 0 0 1-.875-.875z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M3.375 14.12c0-.345.28-.625.625-.625h12a.625.625 0 1 1 0 1.25H4a.625.625 0 0 1-.625-.625m0 2.88c0-.345.28-.625.625-.625h8.55a.625.625 0 1 1 0 1.25H4A.625.625 0 0 1 3.375 17"})]})},s=(0,i().wt)("caption",a);const l={viewBox:"0 0 20 20",svg:(0,r.jsx)("path",{d:"m5.58 11.757.685 1.855a.625.625 0 0 0 1.172-.434L4.985 6.544a.863.863 0 0 0-1.62 0l-2.45 6.634a.625.625 0 0 0 1.172.434l.686-1.855zm-.463-1.25H3.234l.941-2.548zm4.26-4.527c.345 0 .625.28.625.625v6.165h3.147a.625.625 0 1 1 0 1.25H9.377a.625.625 0 0 1-.625-.625v-6.79c0-.345.28-.625.625-.625m3.147.625c0-.345.28-.625.625-.625h5.35a.625.625 0 1 1 0 1.25h-2.05v6.165a.625.625 0 0 1-1.25 0V7.23h-2.05a.625.625 0 0 1-.625-.625"})},c=(0,i().wt)("textAlt",l);var d=()=>n(441467),u=()=>n(730307),p=()=>n(930545),m=()=>n(878377),g=()=>n(231722),f=()=>n(792002),v=()=>n(129522),h=()=>n(24157),_=()=>n(416726);const b=(0,n(959013).YK)({commentName:{id:"action.comment.name",defaultMessage:"Comment"},captionName:{id:"action.caption.name",defaultMessage:"Caption"},altTextName:{id:"action.altText.name",defaultMessage:"Alt text"},reactName:{id:"action.react.name",defaultMessage:"React"}}),y=(0,_().Fw)({key:"comment",displayName:b.commentName,analyticsName:b.commentName.defaultMessage,svg:n(49621).h,hideFromSlashActionMenu:!0,validators:[p().zp],shortcuts:["comment"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i,lazyDependencies:{formulasModule:r}}=e;const a=t[0],s=null==a?void 0:a.getModel();if(a){const e="editing"===h().default.state.mode&&h().default.state.multiSelection;if(e&&!(0,g().kM)(e)&&(e.start.store.id===a.id||null!=s&&s.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(a.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))d().hN({environment:i,blockStore:a,multiSelection:e,formulasModule:r});else if(a.isDefined()&&null!=s&&s.isType(o().uP)){const e=a.getTitleStore(),t=e&&(0,f().s6)(e);if(e&&t&&t.endIndex>0){const n={startIndex:0,endIndex:t.endIndex};d().hN({environment:i,blockStore:a,multiSelection:(0,g().$U)({store:e,selection:n}),rect:v().K.getRect(a),formulasModule:r})}}else if(a.getAssociatedCollectionStore()){var l;const e=n(299545).oC(a,{recursivelyLoadAllDiscussions:!1}),t=n(57618).A.findBlockPropertyValue(a,"title"),o=null==t||null===(l=t.getNode())||void 0===l?void 0:l.getBoundingClientRect();e>0?n(112873).B4({environment:i,blockStore:a,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:o,recursivelyLoadAllDiscussions:!1}):(0,u().l)({environment:i,blockStore:a,rect:o})}else(0,u().l)({environment:i,blockStore:a})}}}),S=(0,_().Fw)({key:"caption",displayName:b.captionName,analyticsName:b.captionName.defaultMessage,svg:s,validators:[m().p2L,m().AU6(m().vEP),m().vXb,m().z9l,m().or([m().i5y("source"),m().i5y("link"),m().Xjv("code")])],shortcuts:["caption"],closeParentMenu:!0,track:{actionName:"init_edit_caption"},action:(e,t,o)=>{let{blocks:i}=t;const r=i.at(0);r&&(n(797265).pG(r),e())}}),w=(0,_().Ls)({key:"alt text",displayName:b.altTextName,analyticsName:b.altTextName.defaultMessage,svg:c,validators:[m().vXb,m().Xjv(o().xd.image),m().i5y("source"),m().or([m().i5y("alt_text"),m().Uo6([m().p2L,m().AU6(m().vEP)])])],closeParentMenu:!0,track:{actionName:"init_edit_alt_text"},action:(e,t,o)=>{let{blocks:i,environment:r}=t;const a=i.at(0);a&&(n(296511).h({environment:r,blockStore:a,entrypoint:"block_menu"}),e())}});(0,_().Fw)({key:"react",displayName:b.reactName,analyticsName:b.reactName.defaultMessage,svg:n(546703).r,validators:[m().p2L,m().AU6(m().vEP),n(792609).Y,m().AU6(m()._fc),p().bn,m().or([m().vXb,n(202786).T]),m().AU6(m().yAQ),m().SQN("block_reactions")],shortcuts:["react"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:i,lazyDependencies:{formulasModule:r}}=e;const a=t[0],s=null==a?void 0:a.getModel();if(a){const e="editing"===h().default.state.mode&&h().default.state.multiSelection;if(e&&!(0,g().kM)(e)&&(e.start.store.id===a.id||null!=s&&s.isType("table")&&"properties"===e.start.store.path[0]&&e.start.store.path[1]&&(a.getFormatStore().getKeyStore("table_block_column_order").getValue()??[]).includes(String(e.start.store.path[1]))))d().of({environment:i,blockStore:a,multiSelection:e,formulasModule:r});else if(a.isDefined()&&null!=s&&s.isType(o().uP)){const e=a.getTitleStore(),t=e&&(0,f().s6)(e);if(e&&t&&t.endIndex>0){const n={startIndex:0,endIndex:t.endIndex};d().of({environment:i,blockStore:a,multiSelection:(0,g().$U)({store:e,selection:n}),rect:v().K.getRect(a),formulasModule:r})}}else(0,n(517288).O)({environment:i,blockStore:a,formulasModule:r})}}})},64e3:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(296540),i=n(474848);const r=o.forwardRef((function(e,t){const{title:o,right:r}=e,a=(0,n(401497).DP)();return(0,i.jsx)(n(678553).Ay,{...e,ref:t,title:(0,i.jsx)("span",{style:{color:a.text.secondary},children:o}),right:r})}))},66496:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{pages:new Set}}setStatus(e,t){t?this.state.pages.add(e):this.state.pages.delete(e),this.emit()}}const i=new o},66788:(e,t,n)=>{n.d(t,{e0:()=>k,Nz:()=>x,Tm:()=>w,Xt:()=>I});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(701218),i=()=>n(777447),r=()=>n(179034),a=()=>n(197959),s=()=>n(161479),l=()=>n(919709),c=()=>n(220719),d=()=>n(496603),u=()=>n(543225),p=()=>n(588836),m=()=>n(413962),g=()=>n(780054),f=()=>n(518736),v=()=>n(494043),h=()=>n(630116),_=()=>n(989423);var b=()=>n(264879),y=()=>n(246826),S=()=>n(751156);function w(e){const{store:t,value:n,transaction:i,expectedVersion:a,onlyLogVersionMismatch:s}=e;(0,c().MX)(!f().SL(t),"setValueInTitleStore should not be used for updating the title of a CRDT block");const d=l().__s(n);S().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"set",args:t.table===r().ev?(0,o().hA)(d):d,expectedVersion:a,onlyLogVersionMismatch:s}}),k(e)}function k(e){const{environment:t,store:n}=e;if(!n.isTable("block"))return;if(n.inMemoryRecordCache.isTemporaryData)return;const o=n.getRecordStoreAtRootPath();if(!o.inMemoryRecordCache.isMockTextStore){const e=o.getValue();var i;if(e)!function(e,t){_().WU(e,"edit_block_text_60","edit_block_text_60",60,t)}(t,{block_id:e.id,type:e.type,is_toggleable:(0,v().Yt)(e.type,e.format),parent_collection_id:o.getAssociatedCollectionId()??(null===(i=o.getParentBlockStore())||void 0===i?void 0:i.getAssociatedCollectionId())})}}function I(e){const{environment:t,oldTextValue:n,newTextValue:o,transaction:i,rootStore:r,removeInlineRecords:a}=e;if(r instanceof h().Bv){const e=new Set(d().FF(l().j2Y(n),...l().j2Y(o)));if((0,p().u)({blockStore:r,discussionIds:Array.from(e),transaction:i}),r.isType("table_row")){const t=r.getParentBlockStore();t&&(0,p().u)({blockStore:t,discussionIds:Array.from(e),transaction:i})}const a=new Set(d().FF(l().j2Y(o),...l().j2Y(n)));if(A({blockStore:r,discussionIds:a,transaction:i,environment:t}),r.isType("table_row")){A({blockStore:r.getParentBlockStore(),discussionIds:a,transaction:i,environment:t})}}a&&x(e)}function x(e){const{store:t,environment:n,oldTextValue:o,newTextValue:a,transaction:c,rootStore:u}=e;if(u instanceof h().Bv){const e=u.getValue();if(e){const r=(0,i().GS)({parentBlock:e,oldTextValue:o,newTextValue:a,getRecordValue:t.getRecordValue,baseUrl:g().A.domainBaseUrl,publicDomainName:g().A.publicDomainName});b()._I({environment:n,transaction:c,parentStore:u,inlinePageIds:r})}}const p=d().FF(l().jvm(o),...l().jvm(a));for(const i of p){const e=h().Bv.createChildStore(u,{table:r().ev,id:i,spaceId:(0,s().e)(u.pointer.spaceId)});y().zv({store:e,data:{alive:!1},transaction:c})}}function A(e){const{blockStore:t,discussionIds:n,transaction:o,environment:i}=e;if(t)for(const r of n){(0,u().B)({transaction:o,blockStore:t,discussionId:r});const e=h().sk.createChildStore(t,{table:a().$Y,id:r,spaceId:(0,s().e)(t.pointer.spaceId)});e.isSuggestionDiscussion()&&m().c3({environment:i,transaction:o,discussionStore:e,addModifiedBlockIdsAfter:[t.id]})}}},66858:(e,t,n)=>{n.d(t,{A:()=>le});n(898992),n(672577);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(617871),l=()=>n(668725),c=()=>n(553034),d=()=>n(30626),u=()=>n(738418),p=()=>n(796073),m=()=>n(693954),g=()=>n(959013),f=()=>n(751735),v=()=>n(100622),h=()=>n(284371),_=()=>n(559926),b=()=>n(901389),y=()=>n(510683),S=()=>n(797265),w=()=>n(751156),k=()=>n(633457),I=()=>n(645873);const x=new(I().O2)("ExternalObjectInstanceBlockMenu",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(17989),n.e(90625),n.e(73006)]).then(n.bind(n,487808)))),A=(0,I()._h)(x,(e=>e.ExternalObjectInstanceBlockMenu));var C=()=>n(572088),T=()=>n(493208),M=()=>n(972435),P=()=>n(351360),B=()=>n(227440),R=()=>n(53137),E=()=>n(700250),D=()=>n(444768),N=()=>n(704152),L=()=>n(493823),O=()=>n(406699),U=()=>n(854672),F=()=>n(8980),V=()=>n(864943),j=()=>n(859428),z=(n(944114),n(354520),n(803949),()=>n(133033)),H=n(474848);const W=(0,n(340498).wt)("helpButtonGuide",{viewBox:"0 0 16 16",svg:(0,H.jsx)("path",{d:"M8 2.77344C7.39844 2.0625 6.05859 1.42676 4.48633 1.42676C2.3877 1.42676 0.692383 2.51367 0.241211 3.5459V13.8066C0.241211 14.4766 0.678711 14.7363 1.16406 14.7363C1.52637 14.7363 1.73145 14.627 1.96387 14.4561C2.42871 14.0801 3.1875 13.6426 4.48633 13.6426C5.79199 13.6426 6.68066 14.0801 7.07715 14.415C7.2959 14.5791 7.54883 14.7363 8 14.7363C8.45117 14.7363 8.69727 14.5654 8.92285 14.415C9.34668 14.1006 10.208 13.6426 11.5137 13.6426C12.8125 13.6426 13.585 14.0869 14.0361 14.4561C14.2686 14.627 14.4736 14.7363 14.8359 14.7363C15.3213 14.7363 15.7588 14.4766 15.7588 13.8066V3.5459C15.3076 2.51367 13.6191 1.42676 11.5137 1.42676C9.94141 1.42676 8.6084 2.0625 8 2.77344ZM1.72461 4.01758C1.90918 3.56641 2.9209 2.80078 4.48633 2.80078C6.05176 2.80078 7.09766 3.57324 7.26172 4.01758V13.0342C6.55762 12.5283 5.55273 12.2549 4.48633 12.2549C3.41309 12.2549 2.41504 12.5283 1.72461 13.0547V4.01758ZM14.2754 4.01758V13.0547C13.585 12.5283 12.5869 12.2549 11.5137 12.2549C10.4473 12.2549 9.44238 12.5283 8.73828 13.0342V4.01758C8.90234 3.57324 9.94824 2.80078 11.5137 2.80078C13.0791 2.80078 14.0908 3.56641 14.2754 4.01758Z"})});var q=()=>n(689094),K=()=>n(735384),G=()=>n(884107),$=()=>n(755636),Y=()=>n(722872),Q=()=>n(836251),Z=()=>n(963589),X=()=>n(760217),J=()=>n(802790),ee=()=>n(928600),te=()=>n(939740),ne=()=>n(89924);const oe=(0,g().YK)({copiedDebuggingInfo:{id:"externalObjectBlock.errorDropdown.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."}});function ie(e){const{state:t,store:o,onUpdate:l,onReplace:c,onAuthenticate:d,onRemove:u,description:m,statusCode:f,errorDescription:h,isInlineMenu:y}=e,{userHasBotForIntegration:S,pattern:w,integration:I,botIds:x,originalUrl:A}=t,C=(0,i().Y0)(),T=(0,i().v3)(),M=(0,a().IS)((e=>({menuIcon:{fill:e.regularIconColor,width:16},redThemeColor:(0,v().k5)("red",e)})),[]),B=(0,r().K8)((()=>{var e;return Boolean(null===(e=P().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit())}),[]),E=(0,r().K8)((()=>o.isExternalObjectInstanceBlockStore()),[o]),D=(0,r().K8)((()=>o.isExternalObjectInstancePageBlockStore()),[o]),N=(0,Z().X)("gdrive_scope_migration_gate"),O=(0,r().K8)((()=>R().A.externalAuthentications.state.filter((e=>e.integration_id===s().Hd))),[]),F=I.id===s().Hd&&N&&428===f;let V;V=C.isMobile?{menuType:Y().gu.ActionSheet}:{menuType:Y().gu.Popup,minWidth:220};const j={key:"learn",render:e=>F?(0,H.jsx)(L().p,{icon:z().$,isLightGray:!0,style:{width:"100%",justifyContent:"flex-start",padding:"2px 8px"},...e,children:(0,H.jsx)(g().sA,{id:"unfurling.errorOptions.googleDriveAccounts.learnMore.title",defaultMessage:"Learn more"})}):(0,H.jsx)(X().A,{title:(0,H.jsx)(g().sA,{defaultMessage:"Learn more about this error",id:"unfurling.errorOptions.learnMore.title"}),icon:W(M.menuIcon),...e}),action:()=>{const e=[{label:(0,H.jsx)(g().sA,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.copyDebugData",defaultMessage:"Copy debugging information"}),color:void 0,onAccept:async()=>{const e=await G().R.clipboardActions.load(),t={statusCode:f,integrationId:I.id,botIds:x,url:A,debugMessage:h};e.copyString({environment:T,stringValue:JSON.stringify(t,null,2),copiedMessage:oe.copiedDebuggingInfo})}}];F||e.unshift({label:(0,H.jsx)(g().sA,{id:"externalObjectInstanceBlockErrorDropdown.dialogItem.reviewGuide",defaultMessage:"View guide"}),color:"blue",onAccept:()=>{$().f({environment:T,url:(0,Q().xS)("guides.unfurling")}),_().pU(T,{integrationId:I.id,entity:null==w?void 0:w.name,statusCode:f})}}),b().ui({items:e,showCancel:!0,keepFocus:!1,message:m})}},ie={key:"remove",render:e=>(0,H.jsx)(X().A,{title:(0,H.jsx)(g().sA,{defaultMessage:"Remove",id:"unfurling.errorOptions.removeAction.title"}),style:{color:M.redThemeColor.color},icon:(0,K().I)({fill:M.redThemeColor.fill,width:16}),...e}),action:()=>{null==u||u()}},re={key:"replace",render:e=>(0,H.jsx)(X().A,{title:(0,H.jsx)(g().sA,{defaultMessage:"Change URL",id:"unfurling.errorOptions.replace.title"}),icon:(0,p().$)(M.menuIcon),...e}),action:()=>{c()}},ae={key:"update",render:e=>(0,H.jsx)(X().A,{title:(0,H.jsx)(g().sA,{defaultMessage:"Try again",id:"unfurling.errorOptions.tryAgainAction.title"}),icon:(0,p().$)(M.menuIcon),...e}),action:()=>{null==l||l()}},se={key:"authenticate",render:e=>(0,H.jsx)(X().A,{title:S?401===f||439===f?(0,H.jsx)(g().sA,{defaultMessage:"Re-authenticate account",id:"unfurling.errorOptions.authenticateAction.reAuthenticate.title"}):y?(0,H.jsx)(g().sA,{defaultMessage:"Connect a different account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticatedCompact.title"}):(0,H.jsx)(g().sA,{defaultMessage:"Connect a different {integration} account",id:"unfurling.errorOptions.authenticateAction.alreadyAuthenticated.title",values:{integration:I.name}}):(0,H.jsx)(g().sA,{defaultMessage:"Connect {integration} account",id:"unfurling.errorOptions.authenticateAction.notAuthenticated.title",values:{integration:I.name}}),icon:(0,H.jsx)(U().A,{type:"image_url",imageURL:I.icon,size:16}),...e}),action:()=>{null==d||d()}},le=[];F&&(le.push({key:"gdrive-accounts-header",render:e=>(0,H.jsx)(ne().A,{...e,disableDesktopPadding:!0,title:(0,H.jsx)(g().sA,{defaultMessage:"Select account",id:"unfurling.errorOptions.googleDriveAccounts.title"})}),action:()=>{}}),O.forEach((e=>{le.push({key:`gdrive-account-${e.id}`,render:t=>(0,H.jsx)(X().A,{title:e.account_name||"Google Drive Account",icon:(0,H.jsx)(U().A,{type:"image_url",imageURL:I.icon,size:20,style:M.menuIcon}),style:{padding:"2px 8px"},...t}),action:async()=>{var t,i;const{openGoogleDriveFilePicker:r}=await Promise.resolve().then(n.bind(n,619400)),a=await k().Nl({environment:T,externalAuthenticationValue:e});if(!a||"failed"===a.type)return;const s=((null===(t=o.getFormat())||void 0===t?void 0:t.original_url)||(null===(i=o.getFormat())||void 0===i?void 0:i.uri)||"").match(/\/d\/([^/]+)\//),c=s?s[1]:"";await r({environment:T,accessToken:a.data.access_token,from:"external_object_instance_block",initialFileId:c,callback:t=>{t&&(null==l||l(e.id))}})}})})),le.push({key:"gdrive-connect-new-account",render:e=>(0,H.jsx)(X().A,{title:(0,H.jsx)(g().sA,{defaultMessage:"Connect a new account",id:"unfurling.errorOptions.googleDriveAccounts.connectNewAccount"}),style:{padding:"2px 8px"},icon:(0,q().W)(M.menuIcon),...e}),action:()=>{null==d||d()}}),le.push({key:"gdrive-accounts-divider-top",render:e=>(0,H.jsx)(J().A,{size:1,style:{margin:"2px 0"},...e}),action:()=>{}}),le.push(ae),le.push(ie),le.push({key:"gdrive-accounts-divider-bottom",render:e=>(0,H.jsx)(J().A,{size:1,style:{margin:"2px 0"},...e}),action:()=>{}}),le.push(j));const ce=[j];B&&("error"===t.type?ce.push(re):("placeholder"===t.type?ce.push(re):ce.push(ae),!F&&(E||D&&[s().Hd,s().e1].includes(I.id))&&ce.push(se))),u&&ce.push(ie);const de=[];return F?de.push({key:0,render:e=>(0,H.jsx)(ne().A,{...e,disableDesktopPadding:y}),items:le}):de.push({key:0,render:e=>(0,H.jsx)(ne().A,{...e,disableDesktopPadding:y,title:(0,H.jsx)(g().sA,{defaultMessage:"Try these options",id:"unfurling.errorOptions.menuTitle"})}),items:ce}),(0,H.jsx)(ee().A,{...V,children:(0,H.jsx)(te().Ay,{type:te().Oh.Vertical,initialFocus:y?void 0:0,sections:de})})}function re(e){const t=(0,r().K8)((()=>{var t;return e.isCollectionView()?null===(t=e.getCollectionStore())||void 0===t||null===(t=t.getFormat().error)||void 0===t?void 0:t.status_code:e.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue()}),[e]),n=(0,r().K8)((()=>{let t;var n;e.isCollectionView()?t=null===(n=e.getCollectionStore())||void 0===n?void 0:n.getFormat().bot_id:t=e.getFormat().bot_id;const o=R().A.bots.state.find((e=>e.id===t));if(o)return(0,s().$1)(o.integration_id)}),[e]),{message:i,description:a}=o.useMemo((()=>(0,C().LU)(t,n)),[t,n]);return{statusCode:t,message:i,description:a}}function ae(e){const{onAuthenticate:t,onReplace:n,onUpdate:o,state:s,store:c,onRemove:d,style:u}=e,p=(0,a().IS)((e=>({orangeThemeColor:(0,v().k5)("orange",e),dropdownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]),{statusCode:f,message:h,description:_}=re(c),{isMobile:y}=(0,i().v3)().device;return!(0,r().O$)(B().e)?(0,H.jsx)(fe,{}):(0,H.jsx)(O().Ay,{popupType:O().z7.Popup,originGap:4,renderOrigin:e=>439!==f?428===f?(0,H.jsxs)(V().A,{size:"lg",icon:e=>(0,m().Q)({...e,fill:p.orangeThemeColor.fill}),...e,...y&&{onClick:()=>{b().ui({showCancel:!1,keepFocus:!1,message:(0,H.jsx)(g().sA,{defaultMessage:"Please use the Notion desktop app or a web browser to select a file",id:"unfurling.errorOptions.googleDriveAccounts.mobileSelectFile"}),items:[{label:(0,H.jsx)(g().sA,{defaultMessage:"OK",id:"unfurling.errorOptions.googleDriveAccounts.mobileSelectFileOk"}),onAccept:()=>{}}]})}},children:[(0,H.jsx)(g().sA,{defaultMessage:"Select file to preview",id:"unfurling.errorOptions.googleDriveAccounts.selectFile"}),(0,l().b)(p.dropdownIcon)]}):(0,H.jsxs)(L().p,{style:u,icon:e=>(0,m().Q)({...e,fill:p.orangeThemeColor.fill}),...e,children:[(0,H.jsx)("span",{children:M().A.formatMessage(h)}),(0,l().b)(p.dropdownIcon)]}):(0,H.jsx)(L().p,{style:u,...e,children:(0,l().b)(p.dropdownIcon)}),render:e=>(0,H.jsx)(ie,{state:s,store:c,onUpdate:o?t=>{o(t),e.close()}:void 0,onAuthenticate:t?()=>{t(),e.close()}:void 0,onReplace:()=>{n(),e.close()},onRemove:d?()=>{d(),e.close()}:void 0,statusCode:f,errorDescription:_.description,description:M().A.formatMessage(_,{integrationName:s.integration.name,statusCode:f})})})}function se(e){const{onAuthenticate:t,onReplace:n,onUpdate:o,state:i,store:r,onRemove:l}=e,c=(0,a().IS)((e=>({orangeThemeColor:(0,v().k5)("orange",e)})),[]),{statusCode:d,message:u,description:p}=re(r),g=i.integration.id===s().Hd&&428===d;return(0,H.jsxs)("div",{style:{alignSelf:"stretch"},children:[!g&&(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,fontWeight:h().Wy.medium,marginBottom:4},children:[(0,m().Q)({width:18,height:18,marginRight:6,fill:c.orangeThemeColor.fill}),(0,H.jsx)("span",{children:M().A.formatMessage(u)})]}),(0,H.jsx)("div",{style:{margin:"0 -14px"},children:(0,H.jsx)(ie,{state:i,store:r,onUpdate:o,onAuthenticate:t,onReplace:n,onRemove:l,statusCode:d,errorDescription:p.description,description:M().A.formatMessage(p,{integrationName:i.integration.name,statusCode:d}),isInlineMenu:!0})})]})}const le=function(e){let{store:t,canEdit:o,forceActionForUIDoc:s,postActionCallback:l,openPlaceholderMenu:c,buttonStyle:d,isHoverPreview:u,renderDefaultAction:p}=e;const m=(0,a().DP)(),g=(0,i().v3)(),f=(0,r().K8)((()=>(0,T().Cm)({store:t,isInDarkMode:ce(g),canEdit:o,currentUserId:g.currentUser.id,showAction:s})),[t,g,o,s]),v=(0,n(646736).HI)(),h=(0,r().K8)((()=>Boolean(null==v?void 0:v.isMember())),[v]),b=(0,r().K8)((()=>Boolean(null==v?void 0:v.isWorkspaceOwner())),[v]),y=(0,r().K8)((()=>{var e;return null===(e=P().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue()}),[]),k=(0,r().O$)(B().e);if(!f)return null;const{integration:I,action:x}=f,A=b||(0,n(322769).nH)({spaceBotSettings:y,integrationId:I.id,env:"production"}),M={state:f,store:t,onUpdate:e=>{pe({from:"external_object_instance_block_error_dropdown",botIds:e?[e]:void 0},t,g,l)},onAuthenticate:()=>{ve({from:"external_object_instance_block_error_dropdown"},g,t,f,l)},onReplace:()=>{null==c||c()}},R={...M,onRemove:()=>{!function(e,t,n,o){var i;w().createAndCommit({userAction:"ExternalObjectInstanceAction.handleRemove",environment:e,canUndo:!0,perform:n=>{S().ZL({environment:e,blocks:[t],transaction:n})}}),_().gc(e,{integrationId:n.integration.id,entity:null===(i=n.pattern)||void 0===i?void 0:i.name}),null==o||o()}(g,t,f,l)}},E="update"===x&&k,D=p&&(!x||"update"===x&&!k);return(0,H.jsxs)(H.Fragment,{children:["authenticate"===x&&(0,C().fY)(g)&&h&&A&&(0,H.jsx)(ge,{store:t,postActionCallback:l,externalObjectState:f,buttonStyle:d}),E&&(0,H.jsx)(me,{store:t,postActionCallback:l,buttonStyle:d,isHoverPreview:u}),"error"===x&&(u?(0,H.jsx)(se,{...M}):(0,H.jsx)(ae,{...R,style:de(m,d)})),D?(0,H.jsx)(ue,{renderDefaultAction:p,buttonStyle:d,store:t}):null]})};function ce(e){return"dark"===e.ThemeStore.state.mode}function de(e,t){return{marginRight:4,color:e.text.secondary,...t}}function ue(e){let{renderDefaultAction:t,buttonStyle:n,store:o}=e;const r=(0,a().DP)(),s=(0,i().v3)(),{isMobile:l}=s.device;return(0,H.jsx)(O().Ay,{popupType:l?O().z7.SlideUp:O().z7.Popup,renderOrigin:e=>(0,H.jsx)(N().A,{...e,mobileFeedback:l,style:{display:"flex",alignItems:"center",justifyContent:"center",width:l?36:28,height:l?36:28,borderRadius:4,flexShrink:0,opacity:"shown"===t?1:0,...de(r,n)},children:(0,d()._)({width:l?18:14,color:r.mediumIconColor})}),placementToOrigin:E().UV.Bottom,render:e=>(0,H.jsx)(A,{titleForReloadMenuOption:(0,H.jsx)(g().sA,{id:"linkPreview.reload",defaultMessage:"Reload preview"}),store:o,onAccept:()=>e.close(),extraSecondaryItemKey:"preview_to_mention"})})}function pe(e,t,n,o){var i;const{from:r,botIds:a}=e,s=null===(i=P().default.state.currentSpaceStore)||void 0===i?void 0:i.id;s&&(k().lf({environment:n,from:r,store:t,spaceId:s,bypassCache:"external_object_instance_block_error_dropdown"===r,botIds:a}),null==o||o())}function me(e){let{store:t,postActionCallback:n,buttonStyle:o,isHoverPreview:r}=e;const s=(0,a().DP)(),l=(0,i().v3)(),c=(0,H.jsx)(L().p,{onClick:()=>pe({from:"external_object_instance_block"},t,l,n),style:de(s,o),icon:e=>(0,p().$)({...e}),children:(0,H.jsx)(g().sA,{defaultMessage:"Update",id:"unfurling.updateButton.title"})});return r?(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:h().J.UIRegular.desktop,marginBottom:4},children:[(0,u().G)({width:18,height:18,marginRight:6}),(0,H.jsx)("span",{children:(0,H.jsx)(g().sA,{defaultMessage:"This link preview is out-of-date.",id:"unfurling.updateButton.header"})})]}),c]}):c}function ge(e){const{externalObjectState:t,store:n,postActionCallback:o,buttonStyle:s}=e,{integration:{accentColor:l,accentIcon:c,name:d}}=t,u=(0,i().v3)(),p=(0,r().K8)((()=>ce(u)),[u]),{r:m,g:v,b:h}=l,_=`rgba(${m},${v},${h},${p?.6:1})`,b=(0,a().IS)((e=>({button:{...de(e,s),background:_,fontSize:14,height:32,paddingRight:12,color:p?e.text.primary:e.text.contrastPrimary}})),[s,_,p]);return!(0,r().O$)(B().e)?(0,H.jsx)(fe,{}):(0,H.jsx)(L().p,{icon:e=>(0,H.jsx)(U().A,{type:"image_url",imageURL:c,size:20,style:{...e,width:16,height:16,marginRight:8,marginLeft:2}}),onClick:()=>ve({from:"external_object_instance_block"},u,n,t,o),style:b.button,hoveredStyle:{background:(0,f().e$)(_,.4)},pressedStyle:{background:(0,f().e$)(_,.9)},children:(0,H.jsx)(g().sA,{defaultMessage:"Connect to {integration} to update",id:"unfurling.authenticateButton.title",values:{integration:d}})})}function fe(){return(0,H.jsx)(j().A,{renderTooltip:()=>(0,H.jsx)(g().sA,{id:"externalObjectInstanceAction.offlineTooltip",defaultMessage:"Unavailable while offline"}),render:e=>(0,H.jsx)("div",{...e,style:{paddingRight:12},children:(0,H.jsx)(F().I,{icon:c().C})})})}function ve(e,t,n,o,i){var r;const{from:a}=e,s=o.originalUrl,{currentSpaceStore:l}=P().default.state;if(!l)return;const c=null===(r=(0,T().g8)(s,l.id))||void 0===r?void 0:r.integration;c&&s&&(y().Jq({environment:t,integration:c,spaceId:l.id,unfurlUrl:s,externalObjectInstanceBlockId:n.id,from:a}),D().A.reset(),null==i||i())}},66913:(e,t,n)=>{n.d(t,{V:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("closeSmall",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M3.732 11.052c-.303.308-.32.877.011 1.202.33.33.894.32 1.203.011L8 9.21l3.05 3.05c.32.325.872.32 1.197-.011a.857.857 0 00.01-1.197L9.21 8.002l3.05-3.056a.857.857 0 00-.01-1.197.857.857 0 00-1.198-.01L8 6.788 4.946 3.732c-.31-.303-.878-.32-1.203.01-.325.331-.314.895-.01 1.203l3.055 3.056-3.056 3.05z"})})},67103:(e,t,n)=>{n.d(t,{Gl:()=>L,hJ:()=>O,nQ:()=>U});n(296540);var o=()=>n(66689),i=()=>n(700500),r=()=>n(206267),a=()=>n(792071),s=()=>n(68263),l=()=>n(179034),c=()=>n(519831),d=()=>n(869558),u=()=>n(919709),p=()=>n(116225),m=()=>n(931075),g=()=>n(498212),f=()=>n(183558),v=()=>n(409902),h=()=>n(104012),_=()=>n(989423),b=()=>n(186445),y=()=>n(682146),S=()=>n(594794),w=()=>n(972435),k=()=>n(347199),I=()=>n(953418),x=()=>n(508496),A=()=>n(630116),C=()=>n(666429),T=()=>n(901389),M=()=>n(246826),P=()=>n(436572),B=()=>n(319975),R=()=>n(751156),E=()=>n(62287),D=()=>n(37250),N=n(474848);const L=(0,n(959013).YK)({home:{id:"wikiActions.collectionView.home",defaultMessage:"Home"},allPages:{id:"wikiActions.collectionView.allPages",defaultMessage:"All pages"},pagesIOwn:{id:"wikiActions.collectionView.pagesIOwn",defaultMessage:"Pages I own"},pagePropertyName:{id:"wikiActions.collectionView.pagePropertyName",defaultMessage:"Page"},ownerPropertyName:{id:"wikiActions.collectionView.ownerPropertyName",defaultMessage:"Owner"},tagsPropertyName:{id:"wikiActions.collectionView.tagsPropertyName",defaultMessage:"Tags"},tagsDesignValue:{id:"wikiActions.collectionView.tagsDesignValue",defaultMessage:"Design"},tagsOnboardingValue:{id:"wikiActions.collectionView.tagsOnboardingValue",defaultMessage:"Onboarding"},verificationPropertyName:{id:"wikiActions.collectionView.verificationPropertyName",defaultMessage:"Verification"},undoToast:{id:"wikiActions.convertToWiki.undo.toastMessage",defaultMessage:"Turned {pageName} into a wiki"}});function O(e){const{blocks:t,transaction:n,environment:s,source:p}=e,v=r().JW(),T=t[0];if(!T||!T.isPageBlock())return;const B=T.getSpaceId(),E=(0,S().Z1)({environment:s,table:c().Vl,spaceId:B}),O=T.getFormat().page_icon,F=(0,f().Ay)(),V=m()._e.Owner,j=m()._e.Verification,z=(0,f().Ay)(),H={title:{name:w().A.formatMessage(L.pagePropertyName),type:"title"},[V]:{name:w().A.formatMessage(L.ownerPropertyName),type:"person",default:"created_by"},[z]:{name:w().A.formatMessage(L.tagsPropertyName),type:"multi_select",options:[{id:r().JW(),value:w().A.formatMessage(L.tagsOnboardingValue),color:"blue"},{id:r().JW(),value:w().A.formatMessage(L.tagsDesignValue),color:"green"}]},[F]:{name:y().dC.last_edited_time,type:"last_edited_time",date_format:"relative"}},W=[{visible:!0,property:"title",width:300},{visible:!0,property:V,width:150},{visible:!0,property:j,width:150},{visible:!0,property:z,width:150},{visible:!0,property:F,width:250}];H[j]={name:w().A.formatMessage(L.verificationPropertyName),type:"verification",verifier_property:V};const q={table:c().Vl,id:E,spaceId:B},{operations:K}=a().WBy.create({id:E,space_id:B,parent:{table:l().ev,id:T.id,spaceId:B},name:T.getTitleValue(),schema:H,cover:T.getFormat().page_cover,format:{collection_mode:{type:"page_tree",root_page_pointer:{table:l().ev,id:T.id,spaceId:B}},app_config_uri:o().pW,property_visibility:[{property:F,visibility:"hide"},{property:z,visibility:"show"},{property:V,visibility:"show"},{property:j,visibility:"show"}],collection_page_properties:W,collection_cover_position:T.getFormat().page_cover_position},icon:O});for(const o of K)R().applyOperation({store:(0,A().Oo)(T,q),operation:o,transaction:n});M().Bn({store:(0,A().Oo)(T,q),source:{id:T.id,table:l().ev,spaceId:T.getSpaceId()},fileIds:T.getFileIds(),transaction:n});const G=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B}),$=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B}),Y=(0,S().Z1)({environment:s,table:d().Gy,spaceId:B});M().zv({store:T,data:{type:i().xd.collectionViewPage,collection_id:E,view_ids:[G,$,Y]},transaction:n}),M().zv({store:T.getFormatStore(),data:{collection_pointer:q,app_config_uri:o().pO,app_uri_map:{[o().pW]:E},app_id:v},transaction:n});const Q={table:d().Gy,id:G,spaceId:B};R().applyOperation({store:(0,A().Oo)(T,Q),operation:{pointer:Q,command:"set",path:[],args:{id:G,version:0,type:"page",name:w().A.formatMessage(L.home),parent_id:T.id,parent_table:"block",space_id:B,format:{page_pointer:{id:(0,g().G2)(T.id),spaceId:B,table:"block"}},alive:!0}},transaction:n});const Z={table:d().Gy,id:$,spaceId:B};R().applyOperation({store:(0,A().Oo)(T,Z),operation:{pointer:Z,command:"set",path:[],args:{id:$,version:0,type:"table",name:w().A.formatMessage(L.allPages),parent_id:T.id,parent_table:"block",space_id:B,format:{table_properties:W},query2:{sort:[{property:F,direction:"descending"}]},alive:!0}},transaction:n});const X={table:d().Gy,id:Y,spaceId:B};R().applyOperation({store:(0,A().Oo)(T,X),operation:{pointer:X,command:"set",path:[],args:{id:Y,version:0,type:"table",name:w().A.formatMessage(L.pagesIOwn),parent_id:T.id,parent_table:"block",space_id:B,format:{table_properties:W,property_filters:[{id:r().JW(),filter:{filter:{value:{type:"relative",value:"me"},operator:"person_contains"},property:V}}]},query2:{sort:[{property:F,direction:"descending"}]},alive:!0}},transaction:n});const J=k().A.PageScroller;J&&I().VG({element:J.getNode(),environment:s,options:{top:0,behavior:"smooth"}}),D().mR(n),function(e,t){_().vd(e,"wiki_convert",t),x().default.logEvent("wiki_convert",void 0,t)}(s,{source:p,root_page_id:T.id,collection_id:E}),function(e){const{environment:t,blocks:n}=e,o=n[0];if(!o||!o.isCollectionViewPageWithContent())return;const i=(0,u().q4_)(o.getTitleValue());C().Ay.setState({...C().Ay.state,shouldReset:!1});const r=(0,b().s0)()===o.id;P().D6({label:w().A.formatMessage(L.undoToast,{pageName:i}),durationMs:C().LX,right:(0,N.jsx)(h().MZ,{blockToOpenStore:r?void 0:o,performUndo:()=>{R().createAndCommit({userAction:"wikiActions.wikiConversionToast.undo",environment:t,canUndo:!0,perform:e=>{P().N2(),U({environment:t,blocks:n,transaction:e,source:"snackbar"})}})}})})}({environment:s,blocks:t})}function U(e){var t;const{environment:n,blocks:o,transaction:r,source:a}=e,l=o[0];if(!l||!l.isCollectionView())return void T().c1("Something went wrong");const c=l.getFormat().collection_pointer;if(!c)return void T().c1("Something went wrong");const d=A().md.createChildStore(l,c),u=null===(t=l.getCover())||void 0===t?void 0:t.cover,m=d.getFormat().collection_cover_position,g=d.getName();E().pd({environment:n,block:l,blockType:i().xd.page,transaction:r}),M().zv({store:l.getFormatStore(),data:{app_config_uri:null,app_uri_map:null,app_id:null,page_cover:u??null,page_cover_position:m??null},transaction:r}),B().R9({environment:n,store:l.getBlockTitleStore(),value:g,transaction:r});for(const i of l.getPermissionItems())if(s().hI(i)&&"content_only_editor"===i.role&&!s().P3(i)){const e={...i,role:"read_and_write"};R().applyOperation({store:l.getPermissionItemsStore(),operation:{pointer:l.pointer,command:"setPermissionItem",path:l.getPermissionItemsStore().path,args:e},transaction:r})}(0,v().h)({collectionViewBlockStore:l,collectionStore:d,transaction:r}),function(e,t){_().vd(e,"wiki_undo_conversion",t),x().default.logEvent("wiki_undo_conversion",void 0,t),p().u4({name:"wiki_undo_conversion",args:t})}(n,{source:a,root_page_id:l.id,collection_id:c.id})}},68465:(e,t,n)=>{n.d(t,{am:()=>S,KW:()=>y,QV:()=>M,ZE:()=>A,gB:()=>w,eR:()=>k,I_:()=>I,t1:()=>B,N9:()=>R,ge:()=>T,O0:()=>C,jq:()=>P,cJ:()=>E,lQ:()=>D});const o="5ee0e0b5-7f0a-4788-a438-f37644514636";var i=()=>n(80586),r=()=>n(425940),a=()=>n(116089),s=()=>n(37719),l=()=>n(824375),c=()=>n(100622),d=()=>n(496603),u=()=>n(578872),p=()=>n(351360),m=()=>n(430483),g=()=>n(508496),f=()=>n(411671),v=()=>n(577437),h=()=>n(836251),_=()=>n(640653);const b=(0,n(959013).YK)({helpMeWrite:{defaultMessage:"Ask AI to write...",id:"id.completions.helpMeWrite"},helpMeWritePlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "5 reasons why we should hire a dedicated designer"',id:"id.completions.helpMeWritePlaceholder"},helpMeDraftPlaceholder:{defaultMessage:'What would you like to write about?\nFor example, "article about the benefits of learning a new language"',id:"id.completions.helpMeDraftPlaceholder"},summarize:{defaultMessage:"Summarize",id:"id.completions.summarize"},findActionItems:{defaultMessage:"Find action items",id:"id.completions.findActionItems"},summarizeMeetingTranscript:{id:"id.completions.summarizeMeetingTranscript",defaultMessage:"Summarize meeting"}}),y={key:"helpMeWrite",category:"writeWithAI",name:b.helpMeWrite,svg:l().X,svgFill:c().XA.light.purple[400],requiresContent:!0,steps:[{key:"prompt",name:b.helpMeWritePlaceholder,placeholder:b.helpMeWritePlaceholder,type:"text"}]},S={key:"helpMeDraft",category:"draftWithAI",name:b.helpMeWrite,svg:l().X,svgFill:c().XA.light.purple[400],requiresNoContent:!0,steps:[{key:"prompt",name:b.helpMeDraftPlaceholder,placeholder:b.helpMeDraftPlaceholder,type:"text"}]};function w(e){const{customPrompt:t,isPageEmpty:n}=e;return{key:n?"helpMeDraft":"helpMeWrite",category:"writeWithAI",name:b.helpMeWrite,svg:a().magicWandIcon,svgFill:c().XA.light.purple[400],steps:[{key:"prompt",name:b.helpMeWritePlaceholder,placeholder:b.helpMeWritePlaceholder,type:"text",prefilledValue:t}]}}function k(){return[{key:"summarize",category:"extractFromContent",name:b.summarize,svg:s().quoteTextIcon,svgFill:c().XA.light.purple[400]},{key:"findActionItems",category:"extractFromContent",name:b.findActionItems,svg:r().a,svgFill:c().XA.light.purple[400]},y]}function I(){return d().pY(k(),"key")}function x(){const e=p().default.state.currentSpaceStore;return!!e&&e.isAiEnabledOnSpace()}function A(e){if(g().default.checkGate({gateName:"disable_ai_big_red_button"}))return!1;if(g().default.checkGate({gateName:"enable_public_qna_sites"})){var t;const n=p().default.state.mainEditorCurrentBlockStore&&(null===(t=(0,u().GN)(p().default.state.mainEditorCurrentBlockStore))||void 0===t||null===(t=t.getSiteStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.enableQna);if(null!=e&&e.hasPublicPermission&&!(0,h().ok)()&&n)return!0}const n=p().default.state.currentSpaceStore;if((0,_().IL)(n))return!1;const o=null==n?void 0:n.canRead();return!(e&&e.hasPublicPermission&&!o)&&x()}function C(e){return x()}function T(e,t){return A(e)&&t.canEdit()}function M(){return A(void 0)&&g().default.checkGate({gateName:"enable_ai_suggested_properties"})}function P(e,t,n){return A(t)&&n.canEditCollection()}function B(e){return new(i().C)({isInitialized:!0,getEligibleGroup:(e,t,n)=>g().default.getEligibleGroup({experimentId:e,...void 0!==t&&void 0!==n?{parameter:t}:{},...void 0!==n&&void 0!==t?{defaultGroup:n}:{}}),isAiEnabled:()=>{const t=p().default.state.mainEditorCurrentBlockStore;return A(t&&f().A.getMode(e,t))},isZeroRetentionEnabled:()=>{const e=p().default.state.currentSpaceStore;return!!e&&e.getZeroRetentionEnabled()},getCanSearchWorkspaceWithCollectionIdFilter:()=>{var e;return!(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e||!e.embedding_index_is_live)||(g().default.checkGate({gateName:"enable_limited_qna"}),!1)},getIsAssistantSpaceSettingEnabled:()=>{var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.is_assistant_experience_enabled)??!1},getSearchBackend:()=>{var e;return null!==(e=p().default.state.currentSpaceStore)&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.embedding_index_is_live?"vector":g().default.checkGate({gateName:"enable_limited_qna"})?"limited_qna":void 0},checkGate:e=>g().default.checkGate({gateName:e}),getSubscriptionTier:()=>{var e;return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSubscriptionTier()},getHasUnlimitedAiCredits:()=>{var t,n;return(0,v().zD)(e,{name:"ai_usage",spaceId:null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id,userId:null===(n=p().default.state.currentUserStore)||void 0===n?void 0:n.id,amount:"unknown"})}})}function R(e){m().zD.getIsInitialized()||m().zD.setState(B(e))}function E(){var e;return(null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.id)===o}function D(){return!1}},71268:(e,t,n)=>{n.d(t,{A0:()=>m,Lv:()=>k,PG:()=>w,QU:()=>g,TC:()=>S,ZS:()=>h,df:()=>x,eQ:()=>f,nX:()=>_,uy:()=>A,xL:()=>v});n(898992),n(354520),n(581454);var o=()=>n(386164),i=()=>n(94830),r=()=>n(160568),a=()=>n(449506),s=()=>n(435009),l=()=>n(34542),c=()=>n(989423),d=()=>n(508496),u=()=>n(852100);const p=6,m=12,g=12;async function f(e){const{environment:t,locale:n,includeCreator:i,includeCategories:r,userIntent:s,currentSpaceId:l,limit:c=p}=e,d=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:n,limit:c,featured:!0,includeCreator:i,includeCategories:r,userIntent:s,isMobile:t.device.isMobile},headers:(0,o().WS)({spaceId:l})});return"success"===d.type&&d.data.success?d.data.templates:[]}async function v(e){const{environment:t,locale:n,slug:i,includeCreator:r,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c,currentSpaceId:d}=e,u=await a().callApi({eventName:"inAppGetTemplateBySlug",environment:t,data:{locale:n,slug:i,includeCreator:r,includeCategories:s,includeAllLocales:l,acquisitionDestinationId:c},headers:(0,o().WS)({spaceId:d})});if("success"===u.type&&u.data.success){return{...u.data.template,creator:u.data.creator,categories:u.data.categories,allLocales:u.data.allLocales}}}async function h(e){const{environment:t,locale:n,id:i,includeCreator:r,includeCategories:s,currentSpaceId:l}=e,c=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:n,limit:1,filterBy:{ids:[i]},includeCreator:r,includeCategories:s},headers:(0,o().WS)({spaceId:l})});if("success"===c.type&&c.data.success){const e=c.data.templates[0];return{...e,creator:e.creator,categories:e.categories}}}async function _(e){const{environment:t,locale:n,creatorContentfulId:i,includeCreator:r,includeCategories:s,offset:l,limit:c=m,excludePinnedTemplates:d,contentfulIds:u,currentSpaceId:p}=e,g=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:n,limit:c,orderBy:"popular",filterBy:{creatorId:i,excludePinnedTemplates:d,contentfulIds:u},offset:l,includeCreator:r,includeCategories:s,includeCount:!0},headers:(0,o().WS)({spaceId:p})});return"success"===g.type&&g.data.success?{templates:g.data.templates,count:g.data.count}:{templates:[],count:0}}function b(e){return 2===e.length||null==e?void 0:e[0]}function y(e){return 2===e.length||null==e?void 0:e[0]}async function S(e){const{environment:t,locale:n,hasAllCategories:i,offset:r,hasAnyCategories:s,includeCreator:l,hasAtLeastOneCategoryPerGroup:c,madeBy:d,orderBy:u,paid:p,locales:m,excludeContentfulIds:f,currentSpaceId:v,limit:h=g}=e,_=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{locale:n,limit:h,filterBy:{hasAllCategories:i,hasAnyCategories:s,hasAtLeastOneCategoryPerGroup:c,excludeContentfulIds:f,madeBy:b(d),paid:y(p)},orderBy:u,offset:r,excludeDefaultLocale:"user_locale"===m,includeCreator:l,includeCount:!0,isMobile:t.device.isMobile},headers:(0,o().WS)({spaceId:v})});return"success"===_.type&&_.data.success?{templates:_.data.templates,count:_.data.count}:{templates:[],count:0}}function w(e){const{environment:t,template:n}=e,o={product_type:"template",is_paid:(0,i().fN)(n),template_id:n.id};(0,c().u4)({environment:t,event:{eventName:"marketplace_external_link_click",eventProperties:o}}),d().default.logEvent("marketplace_external_link_click",1,o),window.open(n.attributes.purchase_url)}function k(e){const{environment:t,slug:n,openInNewTab:o,makeTabActive:i,route:r,creator:a}=e;s().oo({environment:t,url:(0,u().sO)(n,r,a),makeTabActive:Boolean(i),...o&&{openInNew:"tab"}})}const I=100;async function x(e){const{environment:t,locale:n,contentfulIds:i,includeCreator:r,limit:s}=e,l=await a().callApi({eventName:"inAppGetTemplates",environment:t,data:{filterBy:{contentfulIds:i},locale:n,limit:s??I,includeCreator:r},headers:(0,o().WS)({spaceId:void 0})});if("success"===l.type&&l.data.success){const e=new Map;for(const t of l.data.templates)e.set(t.contentful_id,t);return i.map((t=>e.get(t))).filter((e=>void 0!==e))}return[]}async function A(e){const{environment:t,template:n,templateBlockStore:o,currentSpaceStore:a,currentSpaceViewStore:s,teamStore:d,duplicationStartedToastProps:u={},duplicationFinishedToastProps:p={},isEmailShared:m,from:g="inApp",isMobile:f=!1}=e,v=Date.now(),h=await(0,l().Fq)({environment:t,blockStore:o,spaceStore:a,spaceViewStore:s,teamStore:d,from:g,templateId:n.id,duplicationStartedToastProps:u,duplicationFinishedToastProps:p,isEmailShared:m,isMobile:f}),_=Date.now()-v;r().BX(t,{destination:d?"team":"private",template_block_id:n.block_id,template_duplication_duration_ms:_,team_id:null==d?void 0:d.id,created_page_id:null==h?void 0:h.id}),r().YT(t,{from:e.from||"notion_in_app_template_gallery",is_paid:(0,i().fN)(n),is_first_party:(0,i().RS)(n),template_block_id:n.block_id,template_id:n.id,public_template_name:n.name}),(0,c().u4)({environment:t,event:{eventName:"marketplace_installation_attempt",eventProperties:{product_type:"template",product_id:n.id,block_id:n.block_id,is_paid:(0,i().fN)(n),is_first_party:(0,i().RS)(n)}}})}},71304:(e,t,n)=>{n.d(t,{D_:()=>m,Jq:()=>f,Qe:()=>v,gG:()=>g,tS:()=>h});var o=()=>n(612740),i=()=>n(416504),r=()=>n(869558),a=()=>n(919709),s=()=>n(100622),l=()=>n(403905),c=()=>n(630116),d=()=>n(921855),u=()=>n(682146),p=()=>n(640653);function m(e){return e instanceof c().Bv||e instanceof c().SL||e instanceof c().md||e instanceof c().pS||e instanceof c().h4}function g(e,t){if(e.isDefined())return e.getModel().getEmptyTitlePlaceholder({getRecordModel:e.getRecordModel,userTimeZone:(0,i().P)(),intl:t})}function f(e,t,n){if(e instanceof c().Bv&&!e.isWorkflowPage()||e instanceof c().md&&!e.isSystemCollection()){if("none"===e.getRole())return o().mA(t);const i=e instanceof c().Bv?e.getTitleValue():e.getName(),r=(0,s().O4)({theme:n.ThemeModeStore.state});if(!i||!r||0===(0,a().qAZ)(i).length)return;return(0,d().Vg)(n,r,i,e,!0)}return v(e,t,n,!0)}function v(e,t,n,r){if(e instanceof c().h4)return e.getName();if(e instanceof c().SL)return(0,p().GK)(n,e);if(e instanceof c().pS){const t=e.getName();if(t)return t;const n=e.getType();return n?u().to[n]:void 0}if(!e||!e.isDefined())return;return"none"===e.getRole()?o().mA(t):e.getRenderTitle({userTimeZone:(0,i().P)(),intl:t,disableInsertedAnnotations:r})}function h(e){const{environment:t,intl:n,untitledFallback:i,store:a}=e,s=i?n.formatMessage(i):function(e,t){if(e.table===r().Gy){const n=e.getType();if(n&&"page"!==n&&l().X[n])return t.formatMessage(l().X[n])}return o().L(t)}(a,n);return v(a,n,t,!1)||g(a,n)||s}},72234:(e,t,n)=>{n.d(t,{dK:()=>w,VI:()=>h,Jm:()=>g,VW:()=>v,p$:()=>m,mj:()=>f,OV:()=>p,F3:()=>b,Oy:()=>_,kg:()=>x,LH:()=>u,I$:()=>A,Mk:()=>d,ZK:()=>k,OF:()=>I,T$:()=>y,gI:()=>S,AG:()=>c});n(16280),n(18107),n(967357),n(898992),n(354520);var o=()=>n(857639);var i=()=>n(502800),r=()=>n(534177),a=()=>n(989423),s=()=>n(351360),l=()=>n(751156);function c(e,t,n){l().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...n}},transaction:t})}function d(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiSlackQnaNotificationTooltip.setSlackQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_slack_qna_notification_seen_at:Date.now()})}})}function u(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({environment:e,userAction:"AiGoogleDriveQnaNotificationTooltip.setGoogleDriveQnaNotificationSeenAtToCurrentTimestamp",canUndo:!0,perform:e=>{c(t,e,{ai_google_drive_qna_notification_seen_at:Date.now()})}})}function p(e){var t;const{currentSpaceViewStore:n}=s().default.state;n&&void 0===(null===(t=n.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeSpaceAnalyticsPromptSettings",environment:e,canUndo:!0,perform:e=>{c(n,e,{space_analytics_settings_prompt:{status:"showing",num_times_shown:0}})}})}function m(e){var t;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const o=null===(t=n.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;if(!o||"dismissed"===o.status||"hidden"===o.status)return;const i={...o,num_times_shown:o.num_times_shown+1};i.num_times_shown>3&&(i.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementSpaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(n,e,{space_analytics_settings_prompt:i})}})}function g(e){var t;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const o=null===(t=n.getSettings())||void 0===t?void 0:t.space_analytics_settings_prompt;o&&"dismissed"!==o.status&&l().createAndCommit({userAction:"spaceViewActions.incrementspaceAnalyticsSettings",environment:e,canUndo:!0,perform:e=>{c(n,e,{space_analytics_settings_prompt:{status:"dismissed"}})}})}function f(e){var t;const{currentSpaceViewStore:n}=s().default.state;n&&void 0===(null===(t=n.getSettings())||void 0===t?void 0:t.passkey_settings_prompt)&&l().createAndCommit({userAction:"userSettingsActions.initializeMfaPromptSettings",environment:e,canUndo:!0,perform:e=>{c(n,e,{passkey_settings_prompt:{status:"showing",num_times_shown:0}})}})}function v(e){var t;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const o=null===(t=n.getSettings())||void 0===t?void 0:t.mfa_settings_prompt;if(!o||"dismissed"===o.status||"hidden"===o.status)return;const i={...o,num_times_shown:o.num_times_shown+1};i.num_times_shown>3&&(i.status="hidden"),l().createAndCommit({userAction:"spaceViewActions.incrementOrHideMfaPrompt",environment:e,canUndo:!0,perform:e=>{c(n,e,{mfa_settings_prompt:i})}})}function h(e){var t;const{currentSpaceViewStore:n}=s().default.state;if(!n)return;const o=null===(t=n.getSettings())||void 0===t?void 0:t.passkey_settings_prompt;o&&"dismissed"!==o.status&&l().createAndCommit({userAction:"spaceViewActions.dismissPasskeyPromptSetting",environment:e,canUndo:!0,perform:e=>{c(n,e,{passkey_settings_prompt:{status:"dismissed"}})}})}function _(e,t){var n;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const i=(null===(n=o.getSettings())||void 0===n?void 0:n.page_analytics_opt_out_list)||[];i.includes(t)||(l().createAndCommit({userAction:"spaceViewActions.optOutOfPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(o,e,{page_analytics_opt_out_list:[...i,t]})}}),a().vd(e,"page_analytics_page_opt_out"))}function b(e,t){var n;const{currentSpaceViewStore:o}=s().default.state;if(!o)return;const i=(null===(n=o.getSettings())||void 0===n?void 0:n.page_analytics_opt_out_list)||[];i.includes(t)&&(l().createAndCommit({userAction:"spaceViewActions.optInToPageAnalyticsForPage",environment:e,canUndo:!0,perform:e=>{c(o,e,{page_analytics_opt_out_list:i.filter((e=>e!==t))})}}),a().vd(e,"page_analytics_page_opt_in"))}function y(e){var t;let{environment:n,newValue:o}=e;const{currentSpaceViewStore:i}=s().default.state;if(!i)return;const a={notify_email_digest:o};var d;(0,r().O9)(null===(t=i.getSettings())||void 0===t?void 0:t.notify_home_digest_email)||(a.notify_home_digest_email=(null===(d=i.getSettings())||void 0===d?void 0:d.notify_email_digest)??!1);l().createAndCommit({userAction:"userSettingsActions.emailDigestSetting.onToggle",environment:n,canUndo:!0,perform:e=>c(i,e,a)})}function S(e,t){const{currentSpaceViewStore:n}=s().default.state;n&&l().createAndCommit({userAction:"userSettingsActions.homeDigestEmailSetting.onToggle",environment:e,canUndo:!0,perform:e=>{c(n,e,{notify_home_digest_email:t})}})}function w(e){const{currentSpaceViewStore:t}=s().default.state;t&&l().createAndCommit({userAction:"spaceViewActions.confirmAdminContentSearchAcknowledgement",environment:e,canUndo:!0,perform:e=>{c(t,e,{admin_content_search_acknowledgement:!0})}})}function k(e){var t;const{currentSpaceViewStore:n}=s().default.state;n&&(null!==(t=n.getSettings())&&void 0!==t&&t.has_migrated_to_google_drive_external_integration||l().createAndCommit({userAction:"spaceViewActions.setUserMigratedToGoogleDriveExternalIntegrationInSpace",environment:e,canUndo:!0,perform:e=>{c(n,e,{has_migrated_to_google_drive_external_integration:!0})}}))}function I(e,t,n){const i=n||s().default.state.currentSpaceViewStore;if(!i)throw o().log({level:"error",from:"spaceActions",type:"setUserSurveyData",error:{message:"Couldn't find a SpaceViewStore."}}),new Error;l().createAndCommit({userAction:"spaceViewActions.setUserSurveyData",environment:e,canUndo:!0,perform:e=>{c(i,e,{user_survey_data:t})}})}function x(e){let{environment:t,spaceViewStore:n}=e;const r=n.getModel();if(!r)return;const a=function(e){let{spaceView:t}=e;return[{pointer:{table:"user_root",id:t.parent_id},path:["space_views"],command:"listRemove",args:{id:t.id}},{pointer:{table:"user_root",id:t.parent_id},path:["space_view_pointers"],command:"keyedObjectListRemove",args:{remove:{id:t.id}}},{pointer:{table:"space_view",id:t.id,spaceId:t.space_id},path:[],command:"update",args:{alive:!1}}]}({spaceView:r});try{l().createAndCommit({environment:t,userAction:"spaceViewActions.removeUserSpaceViews",canUndo:!0,perform:e=>{for(const t of a)l().applyOperation({store:n,operation:t,transaction:e})}})}catch(s){o().log({level:"error",from:"spaceViewActions",type:"removeUserSpaceViews",error:(0,i().convertErrorToLog)(s)})}}function A(e,t,n){l().createAndCommit({environment:e,userAction:"spaceViewActions.setShouldCreateTemplatesForMailOnboarding",canUndo:!0,perform:e=>{c(t,e,{should_create_templates_for_mail_onboarding:n})}})}},72256:(e,t,n)=>{n.d(t,{A:()=>l,o:()=>s});var o=()=>n(206267),i=()=>n(252105),r=()=>n(981046),a=()=>n(644837);function s(e,t){const n=o().JW();i().Hh(e,{modal_id:n,currency_code:r().A.selectedCurrencyCode,...t.analyticsArgs,desiredProducts:t.desiredProducts,desiredInterval:t.desiredInterval}),a().A.open({modalId:n,...t})}function l(e,t){i().Vq(e,{modalId:t}),a().A.setState({open:!1})}},73332:(e,t,n)=>{n.d(t,{T:()=>v});var o=n(296540),i=()=>n(401497),r=()=>n(968307),a=()=>n(980585),s=()=>n(340498),l=n(474848);const c=(0,s().wt)("roundedCheckPartial",{viewBox:"0 0 14 14",svg:(0,l.jsx)("path",{d:"M5.33496 7.91016C4.85645 7.91016 4.5 7.63672 4.5 7.14355C4.5 6.64551 4.85645 6.37695 5.33496 6.37695H8.66016C9.14355 6.37695 9.5 6.64551 9.5 7.14355C9.5 7.63672 9.14355 7.91016 8.66016 7.91016H5.33496Z"})}),d=(0,s().wt)("roundedSquareCheckbox",{viewBox:"0 0 14 14",svg:(0,l.jsx)("rect",{x:"0.5",y:"0.5",width:"13",height:"13",rx:"2.5"})});var u=()=>n(953624),p=()=>n(753476),m=()=>n(100622),g=()=>n(700239),f=()=>n(859428);function v(e){let{checked:t,disabled:n=!1,onClick:s,size:v,fill:h="none",stroke:_=m().Ay.uiLightGray,round:b=!1,thinOutline:y=!1,tooltipHeader:S,tapArea:w,checkedColor:k=m().Ay.blue,withComma:I,style:x,id:A,disallowTabbing:C,...T}=e;const M=function(e){switch(e){case 10:return 8;case 12:return 10;case 14:return 12;case 16:return 14;case 20:return 16;case 22:return 18}}(v),P=w?w.size:v,B=(0,i().DP)(),R=(0,i().IS)((()=>({root:{width:v,height:v,display:"flex",alignItems:"center",justifyContent:"center",transition:"background 200ms ease-out",borderRadius:10===v?2:3,...!1!==t&&{background:k},...b&&{borderRadius:"50%"},...x},input:{width:P,height:P,top:-(P-v)/2,left:-(P-v)/2}})),[v,P,t,b,x,k]),E=(0,o.useMemo)((()=>!0===t||"partial"===t?("partial"===t?c:a().n)({fill:m().Ay.white,width:M,height:M}):b?y?"light"===B.mode?(0,u().k)({fill:h,stroke:_}):(0,p().e)({fill:h,stroke:_}):(0,r().Z)({fill:h,stroke:_}):d({fill:h,stroke:_})),[t,b,y,h,_,M,B.mode]),D=e=>(0,l.jsxs)(o.Fragment,{children:[(0,l.jsx)(g().A,{checked:t,disabled:n,onClick:s,style:R.root,inputStyle:R.input,id:A,disallowTabbing:C,...T,...e,children:(0,l.jsx)("div",{"aria-hidden":"true",children:E})}),I?", ":""]});return S?(0,l.jsx)(f().A,{renderTooltip:()=>S,render:e=>D(e)}):D()}},75368:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},75542:(e,t,n)=>{function o(e){const t=e.id,n=e.getCollectionSource();return"trending"===(null==n?void 0:n.type)?{collectionViewId:t,teamId:n.teamId}:{collectionViewId:t}}n.d(t,{X:()=>o})},75756:(e,t,n)=>{n.d(t,{Gq:()=>p,ID:()=>c,LS:()=>s,Qq:()=>d,qV:()=>u,ti:()=>r});n(296540);var o=()=>n(959013),i=n(474848);const r="v9",a="https://www.notion.so/Cookie-Notice-bc186044eed5488a8387a9e94b14e58c",s=(0,o().YK)({cookieSettingsLabel:{id:"cookieConsent.settings.label",defaultMessage:"Cookie settings"},customizeCookiesHeader:{id:"cookieConsent.customizeCookies.header",defaultMessage:"Customize cookies"},trackingTypeNecessaryTitle:{id:"cookieConsent.trackingTypeNecessary.title",defaultMessage:"Strictly necessary"},trackingTypeNecessaryCaption:{id:"cookieConsent.trackingTypeNecessary.caption",defaultMessage:"Essential for the site to function. Always On."},trackingTypePreferenceTitle:{id:"cookieConsent.trackingTypePreference.title",defaultMessage:"Functional"},trackingTypePreferenceCaption:{id:"cookieConsent.trackingTypePreference.caption",defaultMessage:"Used to remember preference selections and provide enhanced features."},trackingTypePerformanceTitle:{id:"cookieConsent.trackingTypePerformance.title",defaultMessage:"Analytics"},trackingTypePerformanceCaption:{id:"cookieConsent.trackingTypePerformance.caption",defaultMessage:"Used to measure usage and improve your experience."},trackingTypeTargetingTitle:{id:"cookieConsent.trackingTypeTargeting.title",defaultMessage:"Marketing"},trackingTypeTargetingCaption:{id:"cookieConsent.trackingTypeTargeting.caption",defaultMessage:"Used for targeted advertising."},trackingTypeTargetingSubtitleiOS:{id:"cookieConsent.trackingTypeTargeting.subtitleiOS",defaultMessage:"Not collected nor used within the iOS app"},cookieDismissButtonLabel:{id:"cookieConsent.dismissButton.label",defaultMessage:"Done"},acceptAllButtonLabel:{id:"cookieConsent.acceptAllButton.label",defaultMessage:"Accept all"},rejectAllButtonLabel:{id:"cookieConsent.rejectAllButton.label",defaultMessage:"Reject all"},moreOptionsButtonLabel:{id:"cookieConsent.moreOptionsButton.label",defaultMessage:"More options"},reloadAfterSaveMessage:{id:"cookieConsent.reloadAfterSave.message",defaultMessage:"Notion will now reload to apply your cookie preferences. Click okay to continue."}}),l=(0,o().YK)({banner:{id:"cookieConsent.bannerDisclaimer.message",defaultMessage:"Notion uses cookies to offer you a better experience. See<cookielink>Cookie Notice</cookielink>for details."},settings:{id:"cookieConsent.settingsDisclaimer.message",defaultMessage:"Customize cookies. See<cookielink>Cookie Notice</cookielink>for details."},snackbar:{id:"cookieConsent.snackbarDisclaimer.message",defaultMessage:"Notion uses cookies. See<cookielink>Cookie Notice</cookielink>for details."}});function c(e,t){switch(e){case"necessary":return{title:s.trackingTypeNecessaryTitle,caption:s.trackingTypeNecessaryCaption};case"preference":return{title:s.trackingTypePreferenceTitle,caption:s.trackingTypePreferenceCaption};case"performance":return{title:s.trackingTypePerformanceTitle,caption:s.trackingTypePerformanceCaption};case"targeting":const e=t?s.trackingTypeTargetingSubtitleiOS:void 0;return{title:s.trackingTypeTargetingTitle,subtitle:e,caption:s.trackingTypeTargetingCaption}}}function d(e,t){return(0,i.jsx)(o().sA,{...l[t],values:{cookielink:t=>(0,i.jsxs)(i.Fragment,{children:[" ",e(a,t)," "]})}})}const u={necessary:!0,performance:!0,preference:!0,targeting:!0},p={necessary:!0,performance:!1,preference:!1,targeting:!1}},76190:(e,t,n)=>{n.d(t,{n:()=>a});var o=()=>n(847249),i=()=>n(351360),r=()=>n(577437);function a(e){const{spaceId:t,userId:n}=(0,o().K8)((()=>{var t,n;return{spaceId:(null==e?void 0:e.getSpaceId())??(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.id),userId:null===(n=i().default.state.currentUserStore)||void 0===n?void 0:n.id}}),[e]);return(0,r().P9)({name:"premium_automations",spaceId:t,userId:n})??!1}},77238:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(764218).A)},77246:(e,t,n)=>{n.d(t,{Or:()=>a,Uv:()=>i,qu:()=>r});n(16280);class o extends(()=>n(757695))().default{getInitialState(){return{blockStoreMode:{}}}getStateForBlock(e){if(e in this.state.blockStoreMode)return this.state.blockStoreMode[e]}setStateForBlock(e,t){this.update((n=>({...n,blockStoreMode:{...n.blockStoreMode,[e]:t}})))}clearStateForBlock(e){e in this.state.blockStoreMode&&(delete this.state.blockStoreMode[e],this.emit())}getMode(e,t){var n,o;if(t)return(null===(o=this.getStateForBlock(e.id))||void 0===o?void 0:o.mode)??"default";const i=null===(n=e.getNavigableBlockStore())||void 0===n?void 0:n.id;var r;return i?(null===(r=this.getStateForBlock(i))||void 0===r?void 0:r.mode)??"default":"default"}hasModeSet(e){let t=e;if(!e.isNavigableBlock()){const n=e.getNavigableBlockStore();if(!n)throw new Error("Store doesn't have a navigable block store.");t=n}return Boolean(this.getStateForBlock(t.id))}getSessionId(e){var t;if(!e.isNavigableBlock())throw new Error("getSessionId must be called with a navigable block.");return null===(t=this.getStateForBlock(e.id))||void 0===t?void 0:t.sessionId}getTranslateModeForBlock(e){const t=this.getStateForBlock(e);if(t)return r(t)?t:void 0}isBlockModeInTranslation(e){return Boolean(this.getTranslateModeForBlock(e))}}const i=new o;function r(e){return!!e&&a(e.mode)}function a(e){return"translate_locked"===e||"translate_unlocked"===e}(0,n(604341).exposeDebugValue)("EditorModeStore",i)},77272:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{recentlyUsedColors:[...n(17022).A.withListenerIgnored((()=>n(850213).A.getState()||["yellow_background"]))]}}getMostRecentlyUsedColor(){return(0,n(220719).MX)(this.state.recentlyUsedColors.length>0,"No recently used colors"),this.state.recentlyUsedColors[0]}}const i=new o},78901:(e,t,n)=>{n.d(t,{z:()=>r});var o=n(296540),i=n(474848);const r=o.memo((function(e){const{percentage:t,filledColor:r,filledBarStyle:a,gapColor:s,unfilledColor:l,style:c}=e,d=e.height??4,u=e.width??"100%",p=(0,n(720665).qE)(t,0,100),m=(0,o.useMemo)((()=>p<5||p>95?0:p<20?1:p<50?1.5:2),[p]),g=(0,n(401497).IS)((e=>({wrapper:{alignSelf:"stretch",display:"flex",alignItems:"center",justifyContent:"stretch",...c,pointerEvents:"auto"},barContainer:{position:"relative",borderRadius:1e3,backgroundColor:l??e.accentColors.gray[100],width:u,overflow:"hidden",height:d,minHeight:d},barGap:{position:"absolute",borderRadius:1e3,backgroundColor:s??"transparent",height:"100%",width:`calc(${p}% + ${m}px)`},barFilled:{position:"absolute",borderRadius:1e3,backgroundColor:r??e.accentColors.gray[500],height:"100%",width:`${p}%`,...a}})),[a,r,s,m,d,p,c,l,u]),f=(0,o.useCallback)((()=>e.tooltip?e.tooltip:null),[e.tooltip]),v=(0,o.useCallback)((e=>{const t=(0,i.jsxs)("div",{style:g.barContainer,children:[(0,i.jsx)("div",{style:g.barGap}),(0,i.jsx)("div",{style:g.barFilled})]});return(0,i.jsx)("div",{role:"progressbar","aria-valuenow":p,...e,style:g.wrapper,children:t})}),[p,g]);return e.tooltip?(0,i.jsx)(n(859428).A,{placement:n(962730).W.Top,renderTooltip:f,render:v}):v()}))},79043:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(496603),i=()=>n(753199);function r(e){return e?a:s}const a=Object.freeze({onMouseDown:e=>{(0,i().SQ)({event:e,context:i().y$.EditorMouseDown,callback:o().D_})},onClick:e=>{(0,i().SQ)({event:e,context:i().y$.EditorClick,callback:o().D_})},onDoubleClick:e=>{(0,i().SQ)({event:e,context:i().y$.EditorDoubleClick,callback:o().D_})},onContextMenu:e=>{(0,i().SQ)({event:e,context:i().y$.EditorContextMenu,callback:o().D_})}}),s=Object.freeze({onMouseDown:o().lQ,onClick:o().lQ,onDoubleClick:o().lQ,onContextMenu:o().lQ})},79059:(e,t,n)=>{n.r(t),n.d(t,{getMobileNativeSessionInfo:()=>i,mobileNativeSessionInfoKey:()=>o});const o="__mobileNativeSessionInfo";function i(){return window[o]??{}}},79628:(e,t,n)=>{n.d(t,{A:()=>o});const o=new class{constructor(){this.lruKeyStore=new(n(178624).R)({key:"frequentlyUsedActions",namespace:"NativeMobileActionBar",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(n){}return t}get(){return this.load()}set(e){this.lruKeyStore.setState(JSON.stringify(e))}track(e){const t=this.load(),n=t[e];void 0!==(null==n?void 0:n.frequency)&&void 0!==(null==n?void 0:n.lastAccessed)?(n.frequency+=1,n.lastAccessed=Date.now()):t[e]={frequency:1,lastAccessed:Date.now()},this.set(t)}}},80586:(e,t,n)=>{n.d(t,{C:()=>i});n(898992),n(672577);var o=()=>n(715256);o().P7;class i{constructor(e){this.getSearchBackend=void 0,this.getEligibleGroup=void 0,this.isAiEnabledFn=void 0,this.isZeroRetentionEnabledFn=void 0,this.getCanSearchWorkspaceWithCollectionIdFilter=void 0,this.checkGate=void 0,this.getSubscriptionTier=void 0,this.getIsAssistantSpaceSettingEnabled=void 0,this.getHasUnlimitedAiCredits=void 0,this.isInitialized=void 0,this.getEligibleGroup=e.getEligibleGroup,this.isAiEnabledFn=e.isAiEnabled,this.isZeroRetentionEnabledFn=e.isZeroRetentionEnabled,this.getCanSearchWorkspaceWithCollectionIdFilter=e.getCanSearchWorkspaceWithCollectionIdFilter,this.getSearchBackend=e.getSearchBackend,this.checkGate=e.checkGate,this.getSubscriptionTier=e.getSubscriptionTier,this.getIsAssistantSpaceSettingEnabled=e.getIsAssistantSpaceSettingEnabled,this.getHasUnlimitedAiCredits=e.getHasUnlimitedAiCredits,this.isInitialized=e.isInitialized}isAiEnabled(){return this.isAiEnabledFn()}isZeroRetentionEnabled(){return this.isZeroRetentionEnabledFn()}isXMLAssistantEnabled(){return this.modeIsNotControl()}isPdfImageConversionEnabledForUser(){return this.checkGate("assistant_chat_with_pdf_use_images")}isAiBlockV2EnabledForUser(){return this.checkGate("ai_template_filling_use_new_ai_blocks")}getNamespace(){return"prompt_only_server"}showRemindersToUseQnA(){return this.modeIsNotControl()}isAssistantSummarizeThisPageEnabledForUser(){return"on"===this.getEligibleGroup("assistant_show_summarize_this_page_reminder")&&this.modeIsNotControl()}isWebSearchEnabledForUser(){return this.checkGate("ai_assistant_universal_qna_web_search")&&!this.isZeroRetentionEnabled()&&!this.isDeepFindEnabled()}isWebSearchEnabledInWorkflows(){return this.checkGate("workflows_web_search")&&!this.isZeroRetentionEnabled()}isLoadingWebUrlsEnabledForUser(){return this.checkGate("load-web-page-rollout")}isWorkspaceLeapEligible(e){const{ignoreEnterpriseCheck:t}=e??{ignoreEnterpriseCheck:!1};return t?this.modeIsNotControl()&&!this.isZeroRetentionEnabled():this.modeIsNotControl()&&Boolean(this.getSubscriptionTier())&&"enterprise"!==this.getSubscriptionTier()&&!this.isZeroRetentionEnabled()}isSlackQnaNotificationEnabled(){return this.checkGate("slack_qna_notification_tooltip_enabled")}canUseUniversalSearchScopes(){const e=this.getSubscriptionTier();return this.checkGate("is_third_party_qna_enabled")&&(0,n(979340).jR)(e)&&this.isAiEnabled()}isGoogleDriveQnaEnabled(){return this.checkGate("google_drive_qna_ingestion")}isJiraQnaEnabled(){return this.checkGate("jira_qna_ingestion")}isGithubQnaEnabled(){return this.checkGate("github_qna")}isGmailQnaEnabled(){return this.checkGate("gmail_ai_connector")}isMicrosoftTeamsQnaEnabled(){return this.checkGate("microsoft_teams_qna")}isSharepointQnaEnabled(){return this.checkGate("sharepoint_qna")}isLinearQnaEnabled(){return this.checkGate("linear_ai_connector")}canUseUniversalJiraSearchScope(){return this.isJiraQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGmailSearchScope(){return this.isGmailQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGoogleDriveSearchScope(){return this.isGoogleDriveQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalGithubSearchScope(){return this.isGithubQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalSlackSearchScope(){return this.canUseUniversalSearchScopes()}canUseUniversalMicrosoftTeamsSearchScope(){return this.isMicrosoftTeamsQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalSharepointSearchScope(){return this.isSharepointQnaEnabled()&&this.canUseUniversalSearchScopes()}canUseUniversalLinearSearchScope(){return this.isLinearQnaEnabled()&&this.canUseUniversalSearchScopes()}isRouterV2SearchEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_search_leap")}isRouterV2SearchEnabled(){return this.checkGate("ai_assistant_router_v2_search")}isRouterV2ActionEnabledForLEAP(){return this.checkGate("ai_assistant_router_v2_action_leap")}isRouterV2ActionEnabled(){return this.checkGate("ai_assistant_router_v2_action")}isDatabaseQueryingEnabled(){return this.modeIsAtMost("exploratory")}isDatabaseScopedSearchEnabled(){return this.modeIsAtMost("assistant_0.3")&&this.checkGate("ai_assistant_router_v2_search_in_database")}isMoveToCornerEnabled(){return this.modeIsAtMost("exploratory")}canUseCollectionIdForDBScopedSearch(){return this.getCanSearchWorkspaceWithCollectionIdFilter()}canReceiveAssistantLaunchGrant(){return this.modeIsAtMost("development")}isFullPageTranslateEnabled(){return(this.modeIsAtMost("assistant_0.3")||this.checkGate("full_page_translate"))&&!this.isZeroRetentionEnabled()}canUseAssistantDebugTools(){return this.checkGate("run_assistant_allow_dev_only_args")}areAiActionsOnPasteEnabled(){return this.modeIsNotControl()&&"on"===this.getEligibleGroup("ai_actions_on_paste_experiment")}isReplaceSelectionEnabled(){return this.checkGate("assistant_replace_selection")}isDeepFindEnabled(){return(0,o().nw)({mode:"end_to_end",currentMode:this.getUnifiedFindMode()})}isMiniSearchModalEnabled(){return"end_to_end"===this.getUnifiedFindMode()}isNewStylingWithAskAiInSearchModalEnabled(){return(0,o().nw)({mode:"search_modal_with_new_deep_find",currentMode:this.getUnifiedFindMode()})}isAnswerStreamingInSearchModalEnabled(){return(0,o().nw)({mode:"search_modal_with_new_deep_find_and_answer",currentMode:this.getUnifiedFindMode()})}isTabsInSearchModalEnabled(){return(0,o().nw)({mode:"search_modal_with_new_deep_find_and_answer_and_tabs",currentMode:this.getUnifiedFindMode()})}isUnifiedFindDebugToolsEnabled(){return this.checkGate("unified_find_debug_tools")&&(0,o().nw)({mode:"end_to_end",currentMode:this.getUnifiedFindMode()})}isDeepFindAppendKeywordsEnabled(){return"on"===this.getEligibleGroup("deep_find_append_keywords")}isDeepFindSkipQueryGenCheckEnabled(){return"on"===this.getEligibleGroup("deep_find_skip_query_gen_heuristic","skip_query_gen_heuristic_check","control")}isDeepFindNoQuestionEnabled(){return"on"===this.getEligibleGroup("deepfind_querygen_noquestion")}isConflictContentEnabled(){return this.checkGate("compute_related_content")&&this.modeIsAtMost("assistant_0.3")}disableWriterAutoFollow(){return this.modeIsNotControl()&&this.checkGate("ai_disable_writer_auto_follow")}canUseHigherContextLength(){return this.modeIsNotControl()}getMode(){if(!this.isAiEnabledFn())return"control";const e=this.getEligibleGroup("assistant_variant");return e&&o().P7.find((t=>t===e))?e:this.getIsAssistantSpaceSettingEnabled()?"assistant_0.3":o().Nh}getUnifiedFindMode(){if("control"===this.getMode()||!this.getHasUnlimitedAiCredits())return"control";const e=this.getEligibleGroup("unified_find_variant");return e&&o().ky.find((t=>t===e))?e:"control"}isDeepFindQueryGenEnabled(){return this.checkGate("deep_find_enable_query_gen")}isDeepFindUniversalBlendingEnabled(){return this.checkGate("deep_find_enable_universal_blending")}areDeepFindThirdPartySourcesEnabled(){return this.checkGate("deep_find_enable_3p_sources")}isDeepFindQueryGenFinetunedJsonSchemaEnabled(){return this.checkGate("deep_find_enable_query_gen_finetuned_json_schema")}isDeepFindQueryGenJsonSchemaEnabled(){return this.checkGate("deep_find_enable_query_gen_json_schema")}isMode(e){return this.getMode()===e}modeIsAtMost(e){return(0,o().A2)({mode:e,currentMode:this.getMode()})}modeIsNotControl(){return"control"!==this.getMode()}getIsInitialized(){return this.isInitialized}}},82648:(e,t,n)=>{n.d(t,{CS:()=>u,Hg:()=>c,Tc:()=>d,yd:()=>s});n(898992),n(737550);var o=()=>n(410690),i=()=>n(496603),r=()=>n(571963);const a={};function s(e){void 0===a[e]&&(a[e]=performance.now())}const l={};function c(e){Object.assign(l,e)}function d(){return l}function u(){const{app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:n,statsig_bootup_blocking:s,render_start_to_render_end:l}=(0,r().getSubMetricsAndMetricDataForTracking)({isPrewarmedTab:!1}).sub_metrics,c=(0,o().getAppStartTime)(),d={app_start_to_await_get_spaces_start:p(c,a.await_get_spaces_start),app_start_to_await_get_spaces_end:p(c,a.await_get_spaces_end),app_start_to_browser_repaint_start:p(c,a.browser_repaint_start),app_start_to_browser_repaint_end:p(c,a.browser_repaint_end)},u=i().z7({app_start_to_main_start:e,main_start_to_prefetch_initiated:t,prefetch_initiated_to_statsig_bootup_blocking_start:n,statsig_bootup_blocking:s,render_start_to_render_end:l,...d},i().b0),m=[e,t,n,s,l];return m.some(i().b0)||(u.app_start_to_render_end=i().cz(m)),u}function p(e,t){return void 0===e||void 0===t?void 0:t-e}},83573:(e,t,n)=>{n.d(t,{A:()=>d});n(898992),n(354520),n(581454);var o=()=>n(700500),i=()=>n(179034),r=()=>n(519831),a=()=>n(534177),s=()=>n(720665),l=()=>n(53137);class c extends(()=>n(757695))().default{getInitialState(){return{externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{},externalSyncInstancePointersMap:{}}}addFromRecordMapWithRoleJson(e){this.addFromRecordMapWithRole(n(388821).RecordMapWithRole.create(e))}addFromRecordMapWithRole(e){const t=e.getByTable(r().Vl).filter((e=>{var t;let{value:n}=e;return null==n||null===(t=n.value)||void 0===t||null===(t=t.format)||void 0===t?void 0:t.external_object_id})).map((e=>{let{value:t}=e;return(null==t?void 0:t.value)&&{id:t.value.id,table:r().Vl,spaceId:t.value.space_id}})).filter(a().O9),c=e.getByTable(r().Vl).filter((e=>{var t;let{value:o}=e;return(0,n(488173).zG)(null==o||null===(t=o.value)||void 0===t?void 0:t.format)})).map((e=>{let{value:t}=e;return(null==t?void 0:t.value)&&{id:t.value.id,table:r().Vl,spaceId:t.value.space_id}})).filter(a().O9),d=l().A.getBotsAsRecordMap(),u=e.getByTable(i().ev).filter((e=>{let{value:t}=e;if(!(t&&t.value&&t.value.format&&t.value.format.external_object_id))return!1;if(t.value.type!==o().xd.externalObjectInstancePage&&t.value.type!==o().xd.externalObjectInstance)return!1;const i=t.value.format.bot_id;if(!i)return!1;if(!0===l().A.state.loaded){const e=d.getValue({table:n(824862).GP,id:i});if(e&&e.integration_id&&e.integration_id===n(617871).ob)return!1}return!0})).map((e=>{let{value:t}=e;return null==t?void 0:t.value})).filter(a().O9),p=n(496603).oE(u.map((e=>{if(e.type===o().xd.externalObjectInstancePage&&e.parent_table===r().Vl)return{id:e.parent_id,table:e.parent_table,spaceId:e.space_id}}))),m=(0,s().MU)(u.map((e=>{const t={id:e.id,table:i().ev,spaceId:e.space_id};return[e.id,t]}))),g=(0,s().MU)([...t,...p].map((e=>[e.id,e]))),f=(0,s().MU)(c.map((e=>[e.id,e])));this.setState({externalObjectInstanceBlockPointersMap:{...this.state.externalObjectInstanceBlockPointersMap,...m},externalCollectionInstancePointersMap:{...this.state.externalCollectionInstancePointersMap,...g},externalSyncInstancePointersMap:{...this.state.externalSyncInstancePointersMap,...f}})}reset(){this.setState({externalObjectInstanceBlockPointersMap:{},externalCollectionInstancePointersMap:{},externalSyncInstancePointersMap:{}})}isEmpty(){return 0===Object.keys(this.state.externalCollectionInstancePointersMap).length&&0===Object.keys(this.state.externalObjectInstanceBlockPointersMap).length&&0===Object.keys(this.state.externalSyncInstancePointersMap).length}}const d=new c},84349:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},84390:(e,t,n)=>{n.d(t,{Y:()=>o});const o=(0,n(340498).xh)("creditCard",{default:{loader:()=>n.e(34273).then(n.bind(n,34273))},small:{loader:()=>n.e(34273).then(n.bind(n,34273))},mini:{loader:()=>n.e(34273).then(n.bind(n,34273))},large:{loader:()=>n.e(34273).then(n.bind(n,34273))}})},84448:(e,t,n)=>{n.d(t,{c:()=>a});var o=()=>n(857639),i=()=>n(519831),r=()=>n(449506);async function a(e){const{environment:t,collectionStore:n}=e,a={id:n.id,table:i().Vl,spaceId:n.getSpaceId()},s=await r().callApi({eventName:"suggestRecordKey",environment:t,data:{...a,shouldSetSuccessfullySuggestedRecord:!0}});if("success"===s.type)return s.data.key;o().log({level:"error",from:"collectionAutoIncrementIdActions.suggestRecordKeyResponse",type:"JSONParseError",error:{miscDataString:s.error.message}})}},84817:(e,t,n)=>{n.d(t,{Y1:()=>o().Y});var o=()=>n(509628)},87878:(e,t,n)=>{n.d(t,{nA:()=>a,vZ:()=>r,wA:()=>s});var o=()=>n(351360),i=()=>n(186445);function r(){const e=(0,i().ao)(),t=o().default.state.currentSpaceStore;return e&&e.getSpaceId()!==(null==t?void 0:t.id)?null==e?void 0:e.getSpaceStore():t}function a(e){const t=e.parentStore??r();return null==t?void 0:t.getRecordStore(t,e.pointer)}function s(e){const{spaceStore:t}=e;return!!t&&(t.canAdmin()||t.canRead()&&!t.getSetting("custom_emoji_creation_only_admin"))}},88452:(e,t,n)=>{n.d(t,{Rp:()=>a,dL:()=>i});var o=()=>n(847249);const i="notionscript";function r(){return!1}function a(){return(0,o().K8)(r,[])}},89924:(e,t,n)=>{n.d(t,{A:()=>b});var o=n(296540),i=()=>n(484714),r=()=>n(955825),a=()=>n(284371),s=()=>n(722872),l=()=>n(62856),c=()=>n(24157),d=()=>n(331542),u=n(474848);const p={padding:4,display:"flex",flexDirection:"column",gap:1},m={paddingTop:28},g={paddingTop:16,paddingLeft:16,paddingRight:16,width:"100%"},f={paddingLeft:4,paddingRight:4,marginTop:4,marginBottom:4},v={fontSize:12,gap:4,paddingLeft:5,paddingRight:8,height:24},h={width:12,height:12};function _(e,t){let{title:a,children:l,topBorder:d,extraPadding:_,isInput:b,extraTopPadding:x,disableMobilePadding:A,enableActionSheetTitle:C,className:T,mobileTitleStyle:M,titleClassName:P,noTextOverflow:B,right:R,loading:E,disableMobileBorders:D,shouldShowBottomDivider:N,mobileStyle:L,disableDesktopPadding:O,desktopStyle:U,style:F,desktopTitleStyle:V,toggleable:j,onToggleableSectionClick:z,hideTitle:H}=e;const W=(0,n(401497).DP)(),q=(0,i().v3)(),K=(0,i().WS)(),G=(0,o.useContext)(s().xu),[$,Y]=(0,o.useState)(!1),{WindowSizeStore:Q}=q,Z=(0,n(847249).K8)((()=>Q.getSafePaddingLeftCSS(16)),[Q]),X=(0,s().Tf)();if((K||X)&&(null==G?void 0:G.menuType)!==s().gu.Popup){const J=a&&!Boolean(H)&&((null==G?void 0:G.menuType)!==s().gu.ActionSheet||C);return(0,u.jsxs)("div",{ref:t,className:T,style:{...(null==G?void 0:G.menuType)===s().gu.Modal&&!A&&(X?g:m)},children:[J&&(0,u.jsxs)("div",{style:k(W,Z,M,G),className:P,children:[(0,u.jsx)("div",{style:y(B),children:a}),(0,u.jsx)(S,{right:R,loading:E})]}),(0,u.jsx)("div",{style:{boxShadow:I(W,D||X,N,G),...X?{borderRadius:12,border:`deemphasized 1px ${W.regularDividerColor}`,overflow:"hidden"}:{},...L},children:l})]})}{function ee(){const e=c().default.state;null==z||z({newToggleState:$?"open":"closed"}),Y(!$),n(725614).clear({environment:q}),c().default.setState(e)}return(0,u.jsxs)("div",{ref:t,className:T,...(0,r().AH)({gap:1,position:"relative"},O??Boolean(H)?void 0:p,d&&{marginTop:1},_&&{padding:8},(x||b)&&{paddingTop:8},d&&a&&!j&&{marginTop:6,paddingTop:6},U,F),children:[d&&(0,u.jsx)("div",{style:{position:"absolute",top:-1,left:_?16:12,right:_?16:12,height:1,background:W.regularDividerColor}}),a&&!Boolean(H)&&(0,u.jsxs)("div",{className:P,...(0,r().AH)(K?{...k(W,Z,M),marginTop:8}:w(W,V),j&&f),children:[j?(0,u.jsxs)(n(493823).p,{size:"sm",isGray:!0,style:v,onClick:ee,children:[(0,u.jsx)(n(702796).A,{isSidebar:!1,fill:!0,disabled:!0,open:!$,color:W.text.secondary,onClick:ee,style:h}),(0,u.jsx)("div",{style:y(B),children:a})]}):(0,u.jsx)("div",{style:y(B),children:a}),(0,u.jsx)(S,{right:R,loading:E})]}),j&&$?null:l]})}}const b=o.forwardRef(_);function y(e){return e?{display:"flex",alignSelf:"center"}:{alignSelf:"center",...a().RC}}function S(e){let{right:t,loading:n}=e;const o=Boolean(n),i=t&&!o,r=(0,l().A)(o,500,300);return(0,u.jsx)("div",{style:{marginLeft:"auto"},children:i?t:(0,u.jsx)(d().A,{style:{visibility:r?void 0:"hidden"}})})}function w(e,t){return{display:"flex",paddingLeft:8,paddingRight:8,marginTop:6,marginBottom:8,color:e.text.secondary,fill:e.mediumIconColor,fontSize:12,fontWeight:a().Wy.medium,lineHeight:"120%",userSelect:"none",WebkitUserSelect:"none",...t}}function k(e,t,n,o){return{display:"flex",alignItems:"baseline",color:e.text.secondary,lineHeight:1,fontSize:12,fontWeight:a().Wy.medium,paddingLeft:(null==o?void 0:o.menuType)!==s().gu.Popup?t:16,paddingRight:(null==o?void 0:o.menuType)!==s().gu.Popup?t:16,marginBottom:8,marginTop:(null==o?void 0:o.menuType)===s().gu.ActionSheet?16:void 0,userSelect:"none",WebkitUserSelect:"none",...n}}function I(e,t,n,o){return t?"none":n?`\n                0 1px 0 ${e.regularDividerColor},\n                0 -1px 0 ${e.regularDividerColor}\n            `:(null==o?void 0:o.menuType)!==s().gu.ActionSheet?`0 -1px 0 ${e.regularDividerColor}`:"none"}},90023:(e,t,n)=>{n.d(t,{SF:()=>c,dT:()=>r,jH:()=>l,kR:()=>i,mi:()=>s,xm:()=>a});var o=()=>n(534177);function i(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_my_tasks":case"home_custom_db":case"home_most_visited":case"home_last_edited":case"home_favorites":case"home_posts":case"person_profile_main":case"people_collection_view_page":return!0;case void 0:return!1;default:(0,o().HB)(e)}}function r(e){const t=null==e?void 0:e.getSystemBlockType();switch(t){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_custom_db":case"home_favorites":case"home_posts":case"person_profile_main":case"people_collection_view_page":return!0;case void 0:return!1;default:(0,o().HB)(t)}}function a(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_my_tasks":case"home_favorites":case"home_posts":return!0;case"home_custom_db":case"person_profile_main":case"people_collection_view_page":case void 0:return!1;default:(0,o().HB)(e)}}function s(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_favorites":return!0;case"home_my_tasks":case"home_custom_db":case"home_posts":case"person_profile_main":case"people_collection_view_page":case void 0:return!1;default:(0,o().HB)(e)}}function l(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_favorites":case"home_my_tasks":case"home_custom_db":case"home_posts":case"people_collection_view_page":case"person_profile_main":return!1;case void 0:return!0;default:(0,o().HB)(e)}}function c(e){switch(e){case"home_main":case"home_trending":case"home_similar_users":case"home_most_visited":case"home_last_edited":case"home_favorites":case"home_my_tasks":case"home_custom_db":case"home_posts":case"people_collection_view_page":case"person_profile_main":return!1;case void 0:return!0;default:(0,o().HB)(e)}}},90302:(e,t,n)=>{n.d(t,{Hm:()=>S,TE:()=>p,Qy:()=>m,MB:()=>_,_N:()=>b,cN:()=>f,Fr:()=>g});var o=()=>n(700500),i=()=>n(763884),r=()=>n(972435);class a extends(()=>n(757695))().default{getInitialState(){return{}}setSelected(e,t){this.setState({...this.state,[e]:t})}getSelectedTab(e){return this.state[e]}}const s=new a;var l=()=>n(722101),c=()=>n(246826),d=()=>n(778417),u=()=>n(725614);function p(e){const t=e.getContentStores(),n=e.id,o=s.getSelectedTab(n);return o?t.findIndex((e=>e.id===o)):0}function m(e){const t=p(e),n=e.getContentStores();return n.length>t?n[t]:n[0]}function g(e){const{store:t,index:n,currentUserId:o}=e,i=t.getContentStores()[n];i&&f({store:t,id:i.id,currentUserId:o})}function f(e){const{store:t,id:n,currentUserId:o}=e;s.setSelected(t.id,n),i().K.set({userId:o,key:h(t.id),value:n})}const v="TabBlock";function h(e){return`${v}-${e}`}function _(e){const{blockId:t,currentUserId:n}=e,o=i().K.get({userId:n,key:h(t)});o&&s.setSelected(t,o)}function b(e){const{environment:t,store:n,transaction:i}=e,r=c().Wv({environment:t,type:o().xd.text,inMemoryRecordCache:n.inMemoryRecordCache,transaction:i});l().BC({parentStore:n.getContentStore(),appendStore:r,transaction:i});const a=n.getContentStores()[0];d().hc({environment:t,store:a});const s=a.getBlockTitleStore();u().setSelectionAtStart({store:s})}const y=(0,n(959013).YK)({newTab:{id:"tabBlockActions.addTab.title",defaultMessage:"New tab"}});function S(e){const{environment:t,store:n,transaction:i}=e,a=c().Wv({environment:t,type:o().xd.text,inMemoryRecordCache:n.inMemoryRecordCache,transaction:i,properties:{title:[[r().A.formatMessage(y.newTab)]]}});return l().BC({parentStore:n.getContentStore(),appendStore:a,transaction:i}),s.setSelected(n.id,a.id),a}},90873:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}getSharedPagesState(e){const{userId:t,spaceId:n}=e;let o=this.state[t];return o||(o={},this.state[t]=o),o[n]??{currentPageIds:void 0,loadingDone:void 0,emitValue:-1}}setSharedPagesState(e){const{userId:t,spaceId:n,state:o}=e;let i=this.state[t];i||(i={},this.state[t]=i),i[n]=o,this.emit()}}const i=new o},90881:(e,t,n)=>{n.r(t),n.d(t,{getBlockSuggestion:()=>r,removeBlockSuggestion:()=>a,setBlockSuggestion:()=>i});var o=()=>n(270609);function i(e,t,n){const r=e.getState().suggestions[t.id],s="crdt"===(null==r?void 0:r.type),l=e.getState(),c=t.id;e.setState({suggestions:{...l.suggestions,[c]:n}});const d=t.getTitleStore();if(!d)return;if("crdt"===n.type){if(s)return;const n=()=>{const n=e.getState().suggestions[c];if(!n||"crdt"!==n.type||!t.isDefined())return;const r=(0,o().q)((0,o().L)(t,n.edits),n.edits),a={...n,edits:r,titleTextValue:(0,o().L)(t,r)};i(e,t,a)};return void(null==d||d.addListener(n))}const u=()=>{a(e,c),d.removeListener(u)};null==d||d.addListener(u)}function r(e,t){return e.getState().suggestions[t]}function a(e,t){const n=e.getState();n.suggestions[t]&&e.setState({suggestions:{...n.suggestions,[t]:void 0}})}},90932:(e,t,n)=>{n.d(t,{E:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10 2.175A2.875 2.875 0 0 0 7.125 5.05v3.6a2.875 2.875 0 1 0 5.75 0v-3.6A2.875 2.875 0 0 0 10 2.175M8.375 5.05a1.625 1.625 0 0 1 3.25 0v3.6a1.625 1.625 0 1 1-3.25 0z"}),(0,o.jsx)("path",{d:"M5.604 10.891a.625.625 0 1 0-1.028.71 6.58 6.58 0 0 0 4.799 2.82v1.929H5.95a.625.625 0 1 0 0 1.25h8.1a.625.625 0 0 0 0-1.25h-3.425v-1.93a6.58 6.58 0 0 0 4.799-2.818.625.625 0 1 0-1.029-.71 5.33 5.33 0 0 1-4.393 2.308h-.004a5.33 5.33 0 0 1-4.394-2.309"})]})},r=(0,n(340498).wt)("microphone",i)},91451:(e,t,n)=>{n.d(t,{z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("person",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.7832 8.00195C9.27344 8.00195 10.5381 6.67578 10.5381 4.95996C10.5381 3.28516 9.2666 2 7.7832 2C6.29297 2 5.01465 3.30566 5.02148 4.97363C5.02148 6.67578 6.28613 8.00195 7.7832 8.00195ZM3.51758 14.3594H12.0352C13.1631 14.3594 13.5527 14.0176 13.5527 13.3887C13.5527 11.6318 11.3242 9.21191 7.77637 9.21191C4.23535 9.21191 2 11.6318 2 13.3887C2 14.0176 2.38965 14.3594 3.51758 14.3594Z"})})},92400:(e,t,n)=>{n.d(t,{f:()=>o});n(16280);class o extends Error{constructor(){super("Abort signal received"),this.name="OfflineDownloadAbortedError"}}},92513:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{isModalOpen:!1,currentTab:"selectData",account:void 0,isAccountLinkingInProgress:!1,isAccountDelinkingInProgress:!1,workspaces:[],teamsAndProjects:[],selectedWorkspace:void 0,selectedProjectsAndTeamspaces:{},selectedTeamspacesAndProperties:{},importCompletedTasks:!0,teams:void 0,loadMoreClicks:0,isLoadingProjects:!1,isLoadingAsanaWorkspaces:!1,result:void 0,isComplete:!1,loggerPageId:void 0,templateCreationInProgress:!1,isFetchingAsanaAccount:!1,useSectionAsStatus:!1,choosingWorkspacesCompleted:!1,showOnboardingTour:!1}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const i=new o,r=i;(0,n(604341).exposeDebugValue)("AsanaImportStore",i)},93658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}}const i=new o},94830:(e,t,n)=>{function o(e){return Boolean(e.attributes.checkout_enabled)&&s(e)}function i(e){return!e.attributes.purchase_url&&l(e)}function r(e){return o(e)||i(e)}function a(e){return Boolean(e.attributes.purchase_url)&&!Boolean(e.attributes.checkout_enabled)}function s(e){return void 0!==e.price&&e.price>0}function l(e){return void 0===e.price||0===e.price}n.d(t,{RS:()=>r,Z1:()=>o,ct:()=>a,fN:()=>s,n:()=>i})},94953:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){}getFirstSelectedDiscussionId(){var e;return null===(e=this.state)||void 0===e||null===(e=e.discussionIds)||void 0===e?void 0:e[0]}}const i=new o;(0,n(604341).exposeDebugValue)("DiscussionHoverStore",i);const r=i},95286:(e,t,n)=>{n.d(t,{$8:()=>c,N1:()=>l});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(581454),n(737550);var o=n(296540),i=()=>n(496603),r=()=>n(351360),a=()=>n(151059),s=()=>n(640653);function l(e){const{currentUserRootStore:t}=r().default.state,n=null==t?void 0:t.getSpaceViewStores(),o=i().oE(null==n?void 0:n.map((e=>e.getSpaceId()))).map((t=>a().A.getData(e,{spaceId:t}))),l=function(e){const t=e.map((e=>(0,s().Gb)(e))),n=new Set(i().oE(t));return n.has("enterprise")?"enterprise":n.has("business")?"business":n.has("plus")?"plus":n.has("team_free")?"team_free":n.has("student")?"student":n.has("personal")?"personal":n.has("personal_free")?"personal_free":(n.has("free"),"free")}(o);return{userHighestPlanType:l,isSalesAssistedPlan:i().pb(o,{subscriptionTier:l}).some((e=>{if("none"!==(null==e?void 0:e.role)&&!0===(null==e?void 0:e.is_sales_assisted))return!0}))}}function c(){const[e,t]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{function e(e){var n,o;"forethoughtWidgetOpened"===(null==e||null===(n=e.data)||void 0===n?void 0:n.event)?t(!0):"forethoughtWidgetClosed"===(null==e||null===(o=e.data)||void 0===o?void 0:o.event)&&t(!1)}return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}})),e}},95313:(e,t,n)=>{n.d(t,{D3:()=>i,Oy:()=>a,X3:()=>c,aM:()=>p,cn:()=>u,dP:()=>l,qN:()=>r,to:()=>d,uU:()=>s});var o=()=>n(989423);function i(e){o().vd(e,"click_breadcrumb_move_to")}function r(e,t){o().vd(e,"move_to_error",t)}function a(e,t){o().vd(e,"move_to",t)}function s(e,t){o().vd(e,"move_to_value_selected",t)}function l(e,t){o().vd(e,"move_to_menu_open",t)}function c(e,t){o().vd(e,"move_to_menu_cancel",t)}function d(e,t){o().vd(e,"add_editor_permission_to_ensure_undo",t)}function u(e,t){o().vd(e,"move_to_autocomplete_query_change",t)}function p(e,t){o().vd(e,"move_to_toggle_click",t)}},97270:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},98205:(e,t,n)=>{n.d(t,{DG:()=>p,Yg:()=>d,Yx:()=>m,_N:()=>u,fY:()=>g,h8:()=>f,wG:()=>c});n(944114),n(898992),n(803949);var o=()=>n(31503),i=()=>n(500993),r=()=>n(37165),a=()=>n(131448),s=()=>n(597368),l=()=>n(267834);const c="forms_add_conditional_logic_tooltip";function d(e){let{currentModule:t,nestedModules:n,includePlaceholders:o}=e;const i=[{currentModule:t,depth:1}],r=[];let a=0;for(;i.length>0;){const e=i.shift();if(!e)continue;const{currentModule:t,depth:l}=e;var s;if(r.push(t),l>a&&(a=l),"formQuestion"===t.type)null===(s=t.conditionalGroups)||void 0===s||s.forEach((e=>{const t=e.children??[];for(const r of t){const e=n[r];e&&("formQuestion"===e.type||o&&"placeholder"===e.type)&&i.push({currentModule:e,depth:l+1})}}))}return{formQuestionDescendants:r,maxDepth:a}}function u(e,t,n){if(!e)return;const o=(0,i().A)(e,t.getModules());if(!o)return;const a=l().c7.createChildStore(t,{table:r().lo,id:o.module.formQuestionId,spaceId:t.getSpaceId()??""}).getPropertyId();if(!a)return;const s=n.getSchema()[a],c=null==s?void 0:s.type;return"select"===c||"multi_select"===c||"checkbox"===c?c:void 0}function p(e){let{isConditionalLogicEnabled:t,mouseEntered:n,currentQuestionModule:i,modulesByArea:r,featureAvailable:a,inputFocused:s,isDragging:l,showTutorialTooltip:c}=e;if(void 0===r)return!1;const d=(0,o().Cg)({moduleId:null==i?void 0:i.id,modulesByArea:r}).length>=o().mh,u=t&&(n||c)&&!d&&!s&&!l;return u}function m(e){const{formQuestionId:t,isConditionalLogicEnabled:n,formAddConditionalLogicTooltipStore:o}=e;if(s().A.state.open||!t||!n||!o)return!1;if("multi_select"===e.type){const n=e.optionValue;if(!n||o.state.openTooltip!==g({formQuestionId:t,optionValue:n}))return!1}else if(o.state.openTooltip!==g({formQuestionId:t}))return!1;return a().default.isVisible(c)}function g(e){let{formQuestionId:t,optionValue:n}=e;return n?`fqid:${t} value:${n}`:`fqid:${t}`}function f(e,t){return`${e}:${t}`}},98244:(e,t,n)=>{n.d(t,{Ju:()=>v,VN:()=>h,Yf:()=>f,dw:()=>g,ns:()=>_});var o=()=>n(919709),i=()=>n(97270),r=()=>n(231722),a=()=>n(906537),s=()=>n(110955),l=()=>n(176106),c=()=>n(375447),d=()=>n(24157),u=()=>n(901997),p=()=>n(319975),m=()=>n(751156);function g(e){const{environment:t,textStore:n,oldSelection:a}=e,d=o().qAZ(n.getValue()||[]),u=a.startIndex;if(":"!==d[u])return;const p=d[u-1];if(p&&!/[\s{\[(]/.test(p))return;if(s().A.state.open||i().A.state.open||c().A.state.open||l().A.state.open)return;if(t.device.isPhone)return;const m=(0,r().$U)({store:n,selection:a});f({...e,multiSelection:m,isFromInsertion:!0})}function f(e){const{environment:t,textStore:n,oldSelection:o,oldTextValue:r,multiSelection:s,isFromInsertion:l}=e;if(t.mobileNative&&!l)return void i().A.setState({open:!0,textStore:n,oldTextValue:r,oldSelection:o,multiSelection:s,selectionRect:void 0});const c=a().get();if(!c)return;const d=a().getRect(c);d&&(i().A.setState({open:!0,textStore:n,oldTextValue:r,oldSelection:o,multiSelection:s,selectionRect:d}),u().Jg(t))}function v(e){const t=i().A.state,{environment:n,emoji:o,transaction:r}=e;t.open&&(t.textStore&&p().R9({environment:n,store:t.textStore,value:t.oldTextValue,transaction:r}),p().Wt({environment:n,editorMode:"default",multiSelection:t.multiSelection,emoji:o,transaction:r}),h())}function h(){i().A.setState({open:!1})}function _(e){p().DN({direction:"end"});const t=d().default.state;if("editing"!==t.mode)return;const n=(0,r().H7)(t.multiSelection);if(!n)return;let a=!1;if(n.selection.startIndex>0){const e=n.store.getValue()||[],t=o().qAZ(e)[n.selection.startIndex-1];/[\s]/g.test(t)||(a=!0)}m().createAndCommit({userAction:"emojiMenuActions.triggerInsertEmojiMenu",environment:e,canUndo:!0,perform:t=>{a?(p().$D({environment:e,store:n.store,editorMode:"default",string:" ",selection:n.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:t}),p().$D({environment:e,store:n.store,editorMode:"default",string:":",selection:{startIndex:n.selection.startIndex+1,endIndex:n.selection.endIndex+1},disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})):p().$D({environment:e,store:n.store,editorMode:"default",string:":",selection:n.selection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!1,transaction:t})}});const s=i().A.state;s.open&&i().A.setState({...s,showPopupWithEmptyFilter:!0})}},98302:(e,t,n)=>{n.d(t,{S:()=>r});var o=()=>n(129522),i=()=>n(630116);function r(e){const t=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?void 0:e.findRecordStoreUIAncestor((n=>n instanceof i().Bv&&n.isCollectionView()&&(t||n.id!==e.id))).ancestor}(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);if(t)return o().K.findCollectionViewBlockFromId(t.id)}},99042:(e,t,n)=>{n.d(t,{F:()=>w});n(814603),n(147566),n(198721);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(584262),l=()=>n(558842),c=()=>n(179034),d=()=>n(959013),u=()=>n(100622),p=()=>n(989423);function m(e,t){p().u4({environment:e,event:{eventName:"demo_tooltip_tour_action",eventProperties:t}})}var g=()=>n(857783),f=()=>n(435009),v=()=>n(594607),h=()=>n(548527),_=()=>n(559378),b=()=>n(630116),y=()=>n(953006),S=n(474848);function w(e){var t,n,p,w,I,x;let{children:A,step:C,subStep:T,wrapperStyle:M={},highlightStyle:P={}}=e;const B=(0,r().K8)((()=>_().A.state),[]),R=B.step,E=o.useRef(null),D=(0,a().IS)((e=>({tooltip:{width:250},highlight:{background:"dark"===e.mode?u().Ay.whiteWithAlpha(.05):u().Ay.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:1e3,...P},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:999,background:e.surface.wash,opacity:.6}})),[P]),N=void 0!==B.step?null==B||null===(t=B.tooltipTourOutline)||void 0===t||null===(t=t[B.step])||void 0===t?void 0:t.step_type:void 0,L=(0,i().v3)(),[O,U]=(0,h().P)(),F=void 0===R||!B.isActive||!(null!==(n=B.tooltipTourOutline)&&void 0!==n&&n[R])||C!==N&&"demo_signup"!==N,V=!F&&"demo_collection"===N&&T!==(null===(p=B.tooltipTourOutline)||void 0===p?void 0:p[R]).sub_step;if((0,o.useEffect)((()=>{!E.current||U||F||V||E.current.scrollIntoView({behavior:"smooth",block:"center"})}),[R,U,F,V]),F)return(0,S.jsx)(S.Fragment,{children:A});if(V)return(0,S.jsx)(S.Fragment,{children:A});const j=(0,l().Px)(E,O);return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:D.highlight,children:(0,S.jsx)(k,{ref:j,style:M,children:A})}),(0,S.jsx)("div",{style:D.opacityLayer}),(0,S.jsx)(v().B,{calloutId:"demo_tour",shouldShow:U,children:(0,S.jsx)(y().k,{onBackButtonClick:()=>{var e,t;if(m(L,{action_type:"back",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.decrementStep(),void 0!==C&&"page"===(null===(t=B.tooltipTourOutline)||void 0===t||null===(t=t[R])||void 0===t||null===(t=t.actions)||void 0===t||null===(t=t.back)||void 0===t?void 0:t.type)){var n;const e=null===(n=B.tooltipTourOutline)||void 0===n||null===(n=n[R])||void 0===n||null===(n=n.actions)||void 0===n||null===(n=n.back)||void 0===n?void 0:n.blockId;if(!e)return;const t=new(b().Bv)(L,{table:c().ev,id:e});g().uK({environment:L,store:t,pageVisitSource:s().y8.DemoTour})}},finalButtonContent:"demo_signup"===N?(0,S.jsx)(d().sA,{id:"TutorialTooltip.signupButton",defaultMessage:"Sign up"}):void 0,onPrimaryButtonClick:()=>{var e,t;if(m(L,{action_type:"next",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.incrementStep(),void 0!==R){if("demo_signup"===N){const e=new URLSearchParams;return e.set("from","demo_tour"),void f().oo({environment:L,url:`/signup?${e.toString()}`})}if(null!==(t=B.tooltipTourOutline)&&void 0!==t&&null!==(t=t[R])&&void 0!==t&&null!==(t=t.actions)&&void 0!==t&&null!==(t=t.next)&&void 0!==t&&t.type){var n,o;const e=null===(n=B.tooltipTourOutline)||void 0===n||null===(n=n[R])||void 0===n||null===(n=n.actions)||void 0===n||null===(n=n.next)||void 0===n?void 0:n.type,t=null===(o=B.tooltipTourOutline)||void 0===o||null===(o=o[R])||void 0===o||null===(o=o.actions)||void 0===o||null===(o=o.next)||void 0===o?void 0:o.blockId;if(!t)return;const i=new(b().Bv)(L,{table:c().ev,id:t});g().uK({environment:L,store:i,pageVisitSource:s().y8.DemoTour,..."peek"===e?{openInSidePeek:!0}:{}})}}},onSkipButtonClick:()=>{var e;m(L,{action_type:"skip",step:R,total_steps:(null===(e=B.tooltipTourOutline)||void 0===e?void 0:e.length)??0,tour_slug:B.slug}),_().A.endTour()},header:(0,S.jsx)("div",{children:null===(w=B.tooltipTourOutline)||void 0===w||null===(w=w[R])||void 0===w?void 0:w.title}),origin:E,placementToOrigin:"top",content:null===(I=B.tooltipTourOutline)||void 0===I||null===(I=I[R])||void 0===I?void 0:I.text,onCloseClick:()=>{_().A.endTour()},numSteps:(null===(x=B.tooltipTourOutline)||void 0===x?void 0:x.length)??0,currStepIndex:R,style:D.tooltip})})]})}const k=o.forwardRef((function(e,t){let{children:n,style:o}=e;return(0,S.jsx)("div",{ref:t,style:o,children:n})}))},99254:(e,t,n)=>{n.d(t,{L:()=>i,y:()=>a});var o=()=>n(206267);function i(){return{currentScreen:"none",analyticsFrom:"unknown",sessionId:o().JW(),jiraSiteId:"",jiraSiteUrl:"",jiraSyncState:"not_started",jiraSyncProgress:0,syncControl:{exclusionList:[],inclusionList:[],createdAt:Date.now(),updatedAt:Date.now()},isDisconnecting:!1,isLoaded:!1}}class r extends(()=>n(757695))().default{getInitialState(){return i()}}const a=new r;(0,n(604341).exposeDebugValue)("jiraAIConnectionStore",a)},100584:(e,t,n)=>{n.d(t,{A:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{openModals:new Set}}}const i=new o,r=i;(0,n(604341).exposeDebugValue)("GlobalModalStore",i)},102172:(e,t,n)=>{n.d(t,{BP:()=>l,Wv:()=>s});var o=()=>n(351360),i=()=>n(430483),r=()=>n(77246),a=()=>n(642046);function s(e,t){var n;if(!(0,i().hV)())return!1;const r=a().t.getState().overrides[e.id];if(r)return Boolean(r.autocorrect);const s=null===(n=o().default.state.currentUserSettingsStore)||void 0===n||null===(n=n.getSettings())||void 0===n?void 0:n.beta_ai_co_editing_settings;if(s){const t=s[e.getSpaceId()];return Boolean(null==t?void 0:t.autocorrect)}return!1}function l(e,t,n){return!n.isMobile&&i().zD.isAiEnabled()&&s(e)&&function(e){const t=e.isCollectionView(),n=e.isCollectionViewPageWithContent();return(e.isNavigableBlock()||e.getNavigableBlockStore())&&e.canEdit()&&!e.isLocked()&&(!t||n)&&!e.isFormBlock()}(e)&&"default"===r().Uv.getMode(e)}},102946:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,formResponseId:void 0,secretKey:void 0,formSpaceId:void 0}}}const i=new o},103448:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(284371),i=n(474848);const r=function(e){let{imageURL:t,imageWidth:o,imageHeight:r,caption:s,title:l,imageContainerStyle:c}=e;if(t){const e=(0,n(478184).L)(t);return(0,i.jsxs)("div",{style:{width:o||200,marginTop:4,marginBottom:4},children:[(0,i.jsx)("div",{style:{width:"100%",height:r||100,borderRadius:4,backgroundImage:`url(${e})`,backgroundSize:"cover",marginBottom:6,...c}}),(0,i.jsx)(a,{caption:s,title:l})]})}return(0,i.jsx)(a,{caption:s,title:l,style:{width:o}})};function a(e){let{style:t,caption:n,title:r}=e;return(0,i.jsxs)("div",{style:{whiteSpace:"normal",lineHeight:1.4,...t},children:[r&&(0,i.jsx)("header",{style:{fontWeight:o().Wy.bold,marginBottom:4},children:r}),n]})}},104012:(e,t,n)=>{n.d(t,{Ag:()=>b,J$:()=>S,MZ:()=>k,kP:()=>w,q6:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(584262),s=()=>n(262462),l=()=>n(112452),c=()=>n(959013),d=()=>n(495262),u=()=>n(857783),p=()=>n(435009),m=()=>n(436572),g=()=>n(728611),f=()=>n(211716),v=()=>n(493823),h=n(474848);const _=(0,c().YK)({open:{defaultMessage:"Open",id:"automations.buttonTrigger.open"},undo:{defaultMessage:"Undo",id:"automations.buttonTrigger.undo"}});function b(e){const t=(0,r().DP)();return(0,h.jsx)(v().p,{...e,style:{color:t.text.contrastPrimary,fontWeight:500,height:void 0,marginLeft:0,...e.style}})}function y(e){const{onUndo:t}=e,n=(0,i().v3)();return(0,h.jsx)(b,{onClick:()=>{d().tN({environment:n,preventSelectText:!0}),m().N2(),null==t||t()},children:(0,h.jsx)(c().sA,{defaultMessage:"Undo",id:"snackbar.undo.title"})})}function S(){return(0,h.jsx)(b,{onClick:()=>{},children:(0,h.jsx)(c().sA,{defaultMessage:"Help",id:"snackbar.goToSyncedCollectionHelpButton.title"})})}function w(){const e=(0,i().v3)(),t=(0,o.useCallback)((()=>{p().oo({environment:e,url:"https://notion.so/help/audio-dictation"})}),[e]);return(0,h.jsx)(b,{onClick:t,children:(0,h.jsx)(c().sA,{defaultMessage:"Get help",id:"snackbar.goToGetHelpButton.title"})})}function k(e){const{blockToOpenStore:t,performUndo:n,onOpenBlock:d}=e,p=(0,i().v3)(),m=(0,r().IS)((e=>({icon:{fill:e.text.contrastPrimary},wrap:{display:"flex",columnGap:8}})),[]),v=(0,o.useMemo)((()=>t?e=>{u().uK({environment:p,openInNew:(0,g().Vr)(e),store:t,visitType:f().ig.Link,pageVisitSource:a().y8.ButtonAutomation}),null==d||d(t)}:void 0),[t,p,d]);return(0,h.jsxs)("div",{style:m.wrap,children:[v&&(0,h.jsx)(b,{onClick:v,icon:e=>(0,s().M)({...e,...m.icon,width:16,height:16}),style:{paddingRight:0},children:(0,h.jsx)(c().sA,{..._.open})}),n&&(0,h.jsx)(b,{onClick:n,icon:e=>(0,l()._)({...e,...m.icon,marginTop:-2,width:16,height:16}),children:(0,h.jsx)(c().sA,{..._.undo})})]})}},106196:(e,t,n)=>{n.d(t,{N:()=>p});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(959013),s=()=>n(100622),l=()=>n(284371),c=()=>n(581495),d=()=>n(704152),u=n(474848);function p(e){const{buttonInfo:t,...n}=e,{isMobile:p}=(0,i().Y0)(),m=(0,o.useContext)(c().eh),g="baseStyleOverride"in t?t.baseStyleOverride:void 0,f=function(e){const t=function(e){return(0,r().IS)((t=>{const n={alignItems:"center",borderRadius:e?12:6,boxShadow:void 0,display:"flex",flexShrink:0,fontSize:e?16:14,fontWeight:l().Wy.medium,height:e?48:32,justifyContent:"center",lineHeight:1.2,paddingLeft:e?20:12,paddingRight:e?20:12,whiteSpace:"nowrap"};return{destructiveButtonDefault:{...n,background:t.redBadgeBackground,color:s().Ay.white,fill:s().Ay.lightTextColor},destructiveButtonHovered:{background:s().Ay.redWithAlpha(.8)},destructiveButtonPressed:{background:s().Ay.red},primaryButtonDefault:{...n,background:s().Ay.blue,color:s().Ay.white,fill:s().Ay.lightTextColor},primaryButtonHovered:{background:t.blueButtonHoveredBackground},primaryButtonPressed:{background:t.blueButtonPressedBackground},secondaryButtonDefault:{...n,color:t.text.secondary,fill:s().Ay.lightTextColor},outlineButtonDefault:{...n,background:t.whiteButtonBackground,color:t.text.primary,fill:t.text.primary,border:`1px solid ${t.stroke.primary}`},outlineButtonHovered:{background:t.whiteButtonHoveredBackground},outlineButtonPressed:{background:t.whiteButtonPressedBackground},blackButtonDefault:{...n,background:t.primaryBlack,color:s().Ay.white,fill:t.primaryBlack},blackButtonHovered:{background:s().Ay.frontBlackButtonBackgroundHovered},blackButtonPressed:{background:s().Ay.frontBlackButtonBackgroundPressed}}}),[e])}(e);return(0,o.useMemo)((()=>({destructive:{default:t.destructiveButtonDefault,hovered:t.destructiveButtonHovered,pressed:t.destructiveButtonPressed},primary:{default:t.primaryButtonDefault,hovered:t.primaryButtonHovered,pressed:t.primaryButtonPressed},secondary:{default:t.secondaryButtonDefault},dismiss:{default:t.secondaryButtonDefault},outline:{default:t.outlineButtonDefault,hovered:t.outlineButtonHovered,pressed:t.outlineButtonPressed},black:{default:t.blackButtonDefault,hovered:t.blackButtonHovered,pressed:t.blackButtonPressed}})),[t.blackButtonDefault,t.blackButtonHovered,t.blackButtonPressed,t.destructiveButtonDefault,t.destructiveButtonHovered,t.destructiveButtonPressed,t.outlineButtonDefault,t.outlineButtonHovered,t.outlineButtonPressed,t.primaryButtonDefault,t.primaryButtonHovered,t.primaryButtonPressed,t.secondaryButtonDefault])}(p);if("dismiss"===t.buttonType){const e=t.label??(0,u.jsx)(a().sA,{id:"actionable.dismissButton.label",defaultMessage:"Cancel"}),n=t.combinedStyles??f.dismiss;return(0,u.jsx)(d().A,{style:null==n?void 0:n.default,hoveredStyle:null==n?void 0:n.hovered,pressedStyle:null==n?void 0:n.pressed,onClick:m,children:e})}{const e=t.buttonType??"primary",o=t.combinedStyles??f[e];return(0,u.jsx)(d().A,{style:{...null==o?void 0:o.default,...g},hoveredStyle:null==o?void 0:o.hovered,pressedStyle:null==o?void 0:o.pressed,onClick:t.onClick,disabled:t.isDisabled,disabledFeedback:t.isDisabled,isLoading:t.isLoading,...n,children:t.label})}}},106261:(e,t,n)=>{n.d(t,{B:()=>u});var o=n(296540),i=()=>n(959013),r=()=>n(534177),a=()=>n(928600),s=()=>n(722872),l=()=>n(652617),c=()=>n(120303),d=n(474848);function u(e){const{children:t,title:n,displayMode:u}=e,p=(0,o.useContext)(l().e);switch(u){case"phone":return(0,d.jsx)(a().A,{menuType:s().gu.Modal,onClickRight:p,title:n,whiteBackground:!0,disableBottomPadding:!0,right:p?(0,d.jsx)(i().sA,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}):null,children:t});case"desktop":return(0,d.jsxs)(d.Fragment,{children:[t,(0,d.jsx)(c().R,{})]});default:(0,r().HB)(u)}}},106352:(e,t,n)=>{n.d(t,{Ic:()=>N,L1:()=>U,Tr:()=>O,gY:()=>L,xq:()=>V});n(898992),n(672577);var o=n(296540),i=()=>n(662303),r=()=>n(484714),a=()=>n(847249),s=()=>n(401497),l=()=>n(484392),c=()=>n(15440),d=()=>n(784892),u=()=>n(869190),p=()=>n(604995),m=()=>n(416504),g=()=>n(335098),f=()=>n(506391),v=()=>n(959013),h=()=>n(100622),_=()=>n(534177),b=()=>n(284371),y=()=>n(288722),S=()=>n(854672),w=()=>n(802963),k=()=>n(807683),I=()=>n(360083),x=()=>n(447587),A=()=>n(881690),C=()=>n(354584),T=()=>n(712030),M=()=>n(645873),P=()=>n(921855),B=()=>n(972435),R=n(474848);function E(e){const{title:t,color:n,icon:o}=e,i=(0,s().DP)(),r=n?(0,h().C8)(`rgb(${n.r},${n.g},${n.b})`):void 0,a=(0,h().LD)(i,r);return(0,R.jsx)(A().A,{format:d().NY.Medium,value:o?(0,R.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,R.jsx)(I().A,{isAuthenticated:!1,url:o,width:32,render:(e,t)=>(0,R.jsx)(k().Ay,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})}),(0,R.jsx)(y().A,{children:(0,l().A)(t)})]}):(0,R.jsx)(y().A,{children:(0,l().A)(t)}),showRemoveButton:!1,color:a.textColor,backgroundColor:a.backgroundColor,isSingle:!0,style:{display:"flex",whiteSpace:"break-spaces",flex:"0 0 auto"}})}function D(e){var t,n,o;const{uri:i,store:r,...s}=e,l=(0,a().K8)((()=>{const e=r.getExternalObjectSubInstanceStores().find((e=>{const t=e.getKeyStore("format").getKeyStore("uri").getValue();return t&&t===i}));if(e)return e.getFormat()}),[r,i]);if(!l)return null;const c=null===(t=l.attributes)||void 0===t?void 0:t.find(f().cz),d=null===(n=l.attributes)||void 0===n?void 0:n.find(f().nN),u=null===(o=l.attributes)||void 0===o?void 0:o.find(f().YX);return c?u?(0,R.jsx)(E,{title:c.values[0],color:u.values[0],icon:null==d?void 0:d.values[0]}):c?(0,R.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[d&&(0,R.jsx)(S().A,{type:"image_url",imageURL:d.values[0],size:16,style:{marginRight:4},imageStyle:s.avatarStyle}),(0,R.jsx)(N,{attribute:c,store:r,...s})]},i):null:null}function N(e){const{attribute:t,formatter:n,store:o,style:i,avatarStyle:r}=e,a=(0,s().DP)();if(!t)return null;if((0,f().cz)(t)){var l;const e=t.values[0];if("enum"===(null===(l=t.format)||void 0===l?void 0:l.type)){const{color:n}=t.format;return(0,R.jsx)(E,{title:e,color:n})}{const t=e.replace(/[\r\n]/g,"").trim(),o=n?B().A.formatMessage(n,{value:t}):t;return(0,R.jsx)("div",{spellCheck:!1,style:{whiteSpace:"nowrap",color:a.text.secondary,...i},children:o})}}if((0,f().fk)(t))return(0,R.jsx)(D,{uri:t.values[0],store:o,style:i,avatarStyle:r});if((0,f().RD)(t))return(0,R.jsx)(L,{attribute:t,formatter:e.formatter,style:e.style,dateStyle:"relative"});if((0,f().gh)(t)){const e=t.values[0];return(0,R.jsx)("div",{style:{color:a.text.secondary,fontSize:12,...i},children:n?B().A.formatMessage(n,{value:e}):String(e)})}return null}function L(e){const{attribute:t,formatter:n,style:o,dateStyle:r}=e,a=(0,v().tz)(),l=(0,s().DP)(),c=t.values[0];let d;if("datetimerange"===c.type)d=(0,u().ZF)({allowRelativeDates:!1,displayInUserTimezone:!0,intl:a,value:c});else{const e=(0,p().ln)(c,(0,m().P)());r&&"relative"!==r?"exact_time"===r?d=(0,u().W_)(e,"medium_with_time",i().locale):"exact_date"===r?d=(0,u().W_)(e,"medium",i().locale):(0,_().HB)(r):d=(0,u().v9)(e,i().locale)}const g=n?B().A.formatMessage(n,{value:d}):d;return(0,R.jsx)("div",{style:{color:l.text.secondary,fontSize:12,whiteSpace:"nowrap",...o},children:g})}function O(e){const t=(0,s().DP)(),{attribute:n,isSmall:o,isUltraSmall:i}=e,r=i?16:o?22:34,a={...e.style,borderRadius:r,boxShadow:t.avatarBoxShadow};return(0,f().nN)(n)?(0,R.jsx)(S().A,{type:"image_url",imageURL:n.values[0],size:r,imageStyle:a}):(0,f().cz)(n)?(0,R.jsx)("div",{style:{...a,borderRadius:r,overflow:"hidden",boxShadow:t.avatarBoxShadow,height:30,width:30},children:(0,R.jsx)(w().A,{size:r,title:n.values[0]})}):null}function U(e){var t;const{attribute:n}=e,{value:r}=(0,M().fJ)(C().y),a=(0,s().IS)((e=>({code:{whiteSpace:"pre-wrap",wordBreak:"break-all",fontFamily:b().vc(i().locale).githubMono,fontSize:"12px",tabSize:2,minWidth:0,textAlign:"left",lineHeight:1.5},text:{fontSize:"85%",flexGrow:1,flexShrink:1,minHeight:"1em"},buttons:{fontWeight:b().Wy.medium}})),[]),l=n.values[0],d=null===(t=n.format)||void 0===t?void 0:t.language,u=o.useMemo((()=>{if(r&&d&&(0,c().aN)(d)&&"Plain Text"!==d){const e=g().y[d],t=r.highlight(l,r.languages[e],d);return(0,R.jsx)("div",{spellCheck:!1,style:a.code,dangerouslySetInnerHTML:{__html:t}})}return(0,R.jsx)("div",{spellCheck:!1,style:a.code,children:(0,R.jsx)("code",{children:l})})}),[r,l,d,a.code]);return(0,R.jsx)("div",{style:{marginTop:4,marginRight:4,marginBottom:4,width:"100%"},children:(0,R.jsx)(x().A,{moreElement:(0,R.jsxs)(R.Fragment,{children:["…"," ",(0,R.jsx)("span",{style:{...a.text,...a.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,R.jsx)("span",{style:{...a.text,...a.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:16,clampOverride:{fontSize:12,lineHeight:1.5},children:u})})}function F(e){const{attribute:t,store:n}=e,o=(0,s().DP)(),i=(0,r().v3)(),l=(0,a().K8)((()=>(0,f().cz)(t)?t.values[0]:(0,P().S5)({environment:i,textValue:{value:t.values,spaceId:n.id},disableHover:!0,disableStyleAnnotations:!1,disableInsertedDeletedAnnotations:!1,disableDateStyleAnnotations:!1,disableSuggestionAnnotations:!1,disableLinks:!1,disabled:!1,katex:i.KatexStore.getKatex(),parentStore:n,emojiType:(0,T().FN)(i),formulaValueTypes:[],theme:o})),[i,n,o,t]);return(0,R.jsx)("div",{children:l})}function V(e){const t=(0,s().IS)((e=>({text:{color:e.text.primary,fontSize:12,lineHeight:1.45},buttons:{fontWeight:b().Wy.medium}})),[]);return(0,R.jsx)("div",{style:{marginRight:4,marginBottom:4,width:"100%"},children:(0,R.jsx)(x().A,{moreElement:(0,R.jsxs)(R.Fragment,{children:["…"," ",(0,R.jsx)("span",{style:{...t.text,...t.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.moreLabel",defaultMessage:"more"})})]}),lessElement:(0,R.jsx)("span",{style:{...t.text,...t.buttons},children:(0,R.jsx)(v().sA,{id:"externalObjectInstance.bodyAttribute.showLessLabel",defaultMessage:"show less"})}),maxLines:3,clampOverride:{fontSize:t.text.fontSize,lineHeight:t.text.lineHeight},children:(0,R.jsx)("div",{spellCheck:!1,style:t.text,children:(0,R.jsx)(F,{attribute:e.attribute,store:e.store})})})})}},106412:(e,t,n)=>{n.d(t,{Zp:()=>s,tx:()=>r});var o=n(296540);const i=(0,n(446943).C)({displayName:"CollectionPreviewContext",legacyContextKey:"collectionPreviewContext",modernContextDefaultValue:void 0}),r=i.Provider,a=i.context;function s(){return(0,o.useContext)(a)}},106628:(e,t,n)=>{n.d(t,{T:()=>o});const o={searchActions:new(n(645873).O2)("searchActions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(16471),n.e(53321),n.e(90825),n.e(37353),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28866),n.e(71993),n.e(52393),n.e(7060),n.e(26090),n.e(12341),n.e(66984),n.e(40828),n.e(90978),n.e(5023),n.e(80187)]).then(n.bind(n,574752))))}},106959:(e,t,n)=>{n.d(t,{jn:()=>a,jq:()=>r,mm:()=>i});var o=n(296540);const i={track(e,t){t(!0)},untrack(e){}},r=(0,o.createContext)(i);function a(){const e=(0,o.useContext)(r),[t,n]=(0,o.useState)(!1),i=(0,o.useRef)(null);return[(0,o.useCallback)((t=>{i.current&&(e.untrack(i.current),i.current=null),t&&(i.current=t,e.track(t,n))}),[e]),t]}r.displayName="IFrameManagerContext"},107041:(e,t,n)=>{n.d(t,{LU:()=>c,Qu:()=>u,SJ:()=>l,ek:()=>s});var o=()=>n(534177),i=()=>n(179034),r=()=>n(519831);(0,o().u0)((e=>e&&e.parent_table===i().ev&&a(e)&&e.format&&e.format.original_url&&!e.format.is_placeholder?{true:e}:{false:e})),(0,o().u0)((e=>{var t,n;return e&&e.parent_table===i().ev&&a(e)&&e.format&&void 0===e.format.original_url&&null!==(t=e.format)&&void 0!==t&&t.external_object_id&&null!==(n=e.format)&&void 0!==n&&n.uri&&!e.format.is_placeholder?{true:e}:{false:e}}));const a=(0,o().u0)((e=>d(e)&&"external_object_instance"===e.type?{true:e}:{false:e})),s=((0,o().u0)((e=>d(e)&&"external_object_instance_page"===e.type?{true:e}:{false:e})),(0,o().u0)((e=>e&&e.parent_table===r().Vl&&d(e)&&"external_object_instance_page"===e.type?{true:e}:{false:e})),(0,o().u0)((e=>{var t;return d(e)?{false:e}:e.parent_table===i().ev&&null!==(t=e.format)&&void 0!==t&&t.original_url&&e.format.external_object_id?{true:e}:{false:e}}))),l=(0,o().u0)((e=>{var t;return d(e)?{false:e}:e.parent_table===i().ev&&null!==(t=e.format)&&void 0!==t&&t.original_url&&!e.format.external_object_id?{true:e}:{false:e}})),c=((0,o().u0)((e=>{var t;return!e||d(e)?{false:e}:e.parent_table===r().Vl&&null!==(t=e.format)&&void 0!==t&&t.external_object_id?{true:e}:{false:e}})),(0,o().u0)((e=>{var t,n;return!e||d(e)?{false:e}:null!=e&&null!==(t=e.format)&&void 0!==t&&t.original_url||null!=e&&null!==(n=e.format)&&void 0!==n&&n.external_object_id||u(e)||p(e)||m(e)?{true:e}:{false:e}}))),d=(0,o().u0)((e=>"type"in e&&e.type?{true:e}:{false:e})),u=(0,o().u0)((e=>{var t,n;return!e||d(e)?{false:e}:null!==(t=e.format)&&void 0!==t&&t.is_placeholder&&null!==(n=e.format)&&void 0!==n&&n.integration_id?{true:e}:{false:e}})),p=(0,o().u0)((e=>d(e)?{false:e}:e.parent_table===r().Vl&&e.format&&e.format.uri&&void 0===e.format.external_object_id&&e.format.integration_id?{true:e}:{false:e}));const m=(0,o().u0)((e=>d(e)?{false:e}:e.parent_table===r().Vl&&e.format&&e.format.uri&&void 0===e.format.external_object_id&&void 0===e.format.integration_id?{true:e}:{false:e}))},107683:(e,t,n)=>{n.d(t,{s:()=>o().s});var o=()=>n(689309)},108066:(e,t,n)=>{n.d(t,{I:()=>c});n(296540);var o=()=>n(306631),i=()=>n(695625),r=()=>n(645873);const a=new(r().O2)("BlockErrorFallback",(()=>n.e(86774).then(n.bind(n,952670)))),s=(0,r()._h)(a,(e=>e.BlockErrorFallback));var l=n(474848);function c(e){let{children:t,store:n,type:r}=e;const a=r||"unknown";return(0,l.jsx)(o().S,{from:`Block.${a}`,fallback:e=>{let{error:t,errorId:o}=e;return(0,l.jsx)(s,{error:t,errorId:o,store:n,type:r})},getParentEl:()=>{const e=i().T.findNodeFromBlockId(n.id);return(null==e?void 0:e.parentElement)||null},children:t})}},108944:(e,t,n)=>{n.d(t,{$l:()=>Y,Cf:()=>J,E:()=>B,Gg:()=>ee,IL:()=>T,IS:()=>R,KA:()=>D,Lf:()=>j,Nq:()=>F,Uo:()=>H,Wo:()=>X,a4:()=>Q,fA:()=>V,fU:()=>O,g7:()=>P,me:()=>K,nR:()=>E,pp:()=>z,qc:()=>L,rD:()=>te,uj:()=>Z,um:()=>W,yQ:()=>q,yR:()=>G,z4:()=>$,ze:()=>U});n(944114),n(898992),n(823215),n(354520),n(672577),n(803949),n(581454),n(737550);var o=()=>n(700500),i=()=>n(142748),r=()=>n(68263),a=()=>n(813690),s=()=>n(388821),l=()=>n(363497),c=()=>n(912720),d=()=>n(199378),u=()=>n(179034),p=()=>n(63128),m=()=>n(519831),g=()=>n(869558),f=()=>n(343666),v=()=>n(197959),h=()=>n(144081),_=()=>n(123382),b=()=>n(96689),y=()=>n(854150),S=()=>n(496603),w=()=>n(534177),k=()=>n(351360),I=()=>n(630116),x=()=>n(299545);function A(e,t){const{table:n,id:o,spaceId:i}=t,r=i||e.pointer.spaceId;if(n===m().Vl)return I().md.createChildStore(e,{table:m().Vl,id:o});if(n===b().NX)return I().SL.createChildStore(e,{table:b().NX,id:o});if(n===u().ev)return I().Bv.createChildStore(e,{table:u().ev,id:o});if(n===g().Gy)return I().pS.createChildStore(e,{table:g().Gy,id:o,spaceId:r});if(n===f().SN){if(r)return I().jg.createChildStore(e,{table:f().SN,id:o,spaceId:r})}else if(n===v().$Y){if(r)return I().cc.createChildStore(e,{table:v().$Y,id:o,spaceId:r})}else if(n===y().yK){if(r)return I().h4.createChildStore(e,{table:y().yK,id:o,spaceId:r})}else if(n===d().SC){if(r)return I().bx.createChildStore(e,{table:d().SC,id:o,spaceId:r})}else if(n===c().yB){if(r)return I().dn.createChildStore(e,{table:c().yB,id:o,spaceId:r})}else if(n===p().qm&&r)return I().ZI.createChildStore(e,{table:p().qm,id:o,spaceId:r})}function C(e){const t=k().default.state.mainEditorCurrentBlockStore;return t?t.inMemoryRecordCache!==e.inMemoryRecordCache?e:t:e}function T(e){const t=C(e);return((n=e)instanceof I().Bv||n instanceof I().SL||n instanceof I().md||n instanceof I().jg||n instanceof I().cc||n instanceof I().h4||n instanceof I().bx||n instanceof I().dn||n instanceof I().ZI)&&e.getRecordStoreUIParent()===t?e:A(t,e.pointer);var n}const M=new(n(752885).p)({debugName:"getPermissionsPathStores",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){const o=e.getValue();if(!o||!(0,n(212547).ob)(o))return[e];const i=e instanceof I().Bv&&e.getPermissionsParentPointer()||n(696706).L3.getParentPointerFromRecordWithParent(o),r=A(C(e),i);return r?[e].concat(t(r)):[e]}});function P(e){const t=T(e);return t?M.getStateFor(t):[]}function B(e){return S().oE(P(e).map((e=>{if("space"===e.table){if(!(0,x().Yu)(e))return;return e.getModel()}if("block"===e.table){const{pointer:t}=e,n=(0,I().G_)(e,t,"alive").getValue(),o=(0,I().G_)(e,t,"parent_id").getValue(),i=(0,I().G_)(e,t,"type").getValue();if(void 0!==n&&void 0!==o&&void 0!==i)return e.getModel()}else{if(e.table===y().yK){const{pointer:t}=e;if(!(0,I().G_)(e,t,"settings").getValue())return;return e.getModel()}if(e.table===m().Vl)return e.getModel()}})))}function R(e){const{store:t,teamPermissionItems:n}=e,o=s().RecordMap.create(),i=z(t)||k().default.state.currentSpaceStore;return i&&n.forEach((e=>{const t=I().h4.createChildStore(i,{table:y().yK,id:e.team_id,spaceId:i.id});o.setModel({id:t.id,table:y().yK,spaceId:i.id},t.getModel())})),o}async function E(e){const t=[];return await i().U0(e.pointer,a().ho.fromMonomorphicFunctionUnsafe((async n=>{let o;if(n.table===m().Vl?o=I().md.createChildStore(e,n):n.table===b().NX?o=I().SL.createChildStore(e,n):n.table===u().ev?o=I().Bv.createChildStore(e,n):n.table===g().Gy?o=I().pS.createChildStore(e,n):n.table===f().SN?o=I().jg.createChildStore(e,n):n.table===v().$Y&&(o=I().cc.createChildStore(e,n)),o)return t.push(o),await o.load(),o.getValue()}))),t}function D(e){const t=I().sk.fromV1(e);if(t instanceof I().Bv||t instanceof I().md){const e=t.getParentTable(),n=t.getParentId();if(e&&n){if(e===m().Vl)return I().md.createChildStore(t,{table:m().Vl,id:n});if(e===b().NX)return I().SL.createChildStore(t,{table:b().NX,id:n});if(e===u().ev)return I().Bv.createChildStore(t,{table:u().ev,id:n});if(e===f().SN)return I().jg.createChildStore(t,{table:f().SN,id:n,spaceId:t.getSpaceId()});if(e===y().yK)return I().h4.createChildStore(t,{table:y().yK,id:n});if(e===d().SC)return I().bx.createChildStore(t,{table:d().SC,id:n,spaceId:t.getSpaceId()});if(e===_().MC)return I().vG.createChildStore(t,{table:_().MC,id:n,spaceId:t.getSpaceId()});if(e===g().Gy)return I().pS.createChildStore(t,{table:g().Gy,id:n,spaceId:t.getSpaceId()});if(e===h().zx)return I().K_.createChildStore(t,{table:h().zx,id:n,spaceId:t.getSpaceId()});if(e===p().qm)return I().ZI.createChildStore(t,{table:p().qm,id:n,spaceId:t.getSpaceId()});if(e===l().TF)return I().gP.createChildStore(t,{table:l().TF,id:n,spaceId:t.getSpaceId()});(0,w().HB)(e)}}}function N(e,t){if(!e.canRead())return!1;if(e instanceof I().Bv){const n=e.getType();return e.isPostCollectionBlock()?0===t:void 0!==n&&(0,o().$I)(n)}return e instanceof I().h4}function L(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=0;return P(e).find(((e,i)=>{if(N(e,i)&&t(e)){if(o===n)return!0;o++}return!1}))}function O(e){return P(e).filter(N)}function U(e){const t=P(e).find((e=>{let t;return(e instanceof I().Bv||e instanceof I().md)&&(t=e.getAlive()),!1===t}));return Boolean(t)}function F(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=O(e)[t];return n instanceof I().h4?F(n,t+1):n}function V(e){return e.findRecordStoreUIAncestor((e=>e instanceof I().Bv&&(0,o().$I)(e.getType()))).ancestor}function j(e){const t=O(e);return t[t.length-1]}function z(e){return P(e).find((e=>e.table===b().NX))}function H(e){const t=P(e);return t.find((e=>e.table===y().yK))}function W(e){return e.find((e=>e.table===y().yK))}function q(e){const t=P(e);if(t.some((e=>e.table===u().ev&&e.isPost())))return t.find((e=>e.table===y().yK))}function K(e){return P(e).find((e=>{var t;return e.table===u().ev&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))}function G(e){for(const t of e)if((t instanceof I().Bv||t instanceof I().md)&&(!t.isDefined()||!t.getAlive()))return!1;return!0}function $(e){for(const t of e)if(t instanceof I().Bv||t instanceof I().md){if(!t.isDefined())continue;if(!t.getAlive())return t}}function Y(e){for(const t of e)if(t instanceof I().Bv){if(!t.isDefined())continue;if(t.getPermissionItems().some(r().Ny))return t}}function Q(e){return Boolean($(e))}function Z(e){for(const t of e)if(t instanceof I().Bv){if(!t.isDefined())continue;const e=t.getMovedStore().getValue();if(void 0!==e)return{store:t,moved:e}}}function X(e){return"block"===e.table||"space"===e.table||"collection"===e.table||"comment"===e.table||"discussion"===e.table||"team"===e.table||"automation_action"===e.table||"automation"===e.table||"skill"===e.table||"collection_view"===e.table||"layout"===e.table||"channel"===e.table||"assistant_chat_session"===e.table}function J(e){const t=P(e).find((e=>{if(e.table===y().yK)return Boolean(e.getArchivedBy())}));return Boolean(t)}function ee(e){const t=P(e);for(const n of t)if(n.table===b().NX)return n.getSettings().space_request}function te(e){const{environment:t,store:n}=e,o=t.currentUser.id;if(!o)return!1;const i=P(n),a=i.every((e=>Boolean(e.isReady())));if(!a)return;const s=!i.some((e=>Boolean(e instanceof I().Bv&&!e.isDefined())));if(!s)return!1;const l=i.some((e=>{if(e instanceof I().Bv){const t=(e.getPermissionItemsStore().getValue()||[]).find((e=>(0,r().FP)(e)||(0,r().Ds)(e)||(0,r().Lg)(e)||(0,r().T$)(e)||(0,r()._d)(e)||(0,r().B2)(e)&&e.user_id!==o));return Boolean(t)}return e instanceof I().h4}));return!l}},109488:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(847249),i=()=>n(79043);function r(e){let{capture:t,render:n}=e;const r=(0,i().A)(t);return(0,o().K8)((()=>n(r)),[r,n])}},110192:(e,t,n)=>{n.d(t,{Q:()=>i,g:()=>r});var o=()=>n(919709);function i(e){const t=r([o().Ey_(e)]);return o().q4_(t)}function r(e){const t=o().q4_(e);if(0===t.trim().length||void 0===e)return[o().Ey_(t)];const n=e[e.length-1];if(o().bHQ(n)){return[...e.slice(0,e.length-1),a(n)]}return[...e,a([""])]}function a(e){const t=e=>`(${e})`,{title:n,digit:i}=function(e){const t=e.trimEnd(),n=t.split(" "),o=function(e){if(e.length<3||!e.startsWith("(")||!e.endsWith(")"))return;const t=e.substring(1,e.length-1),n=parseInt(t);return!Number.isNaN(n)&&n>0&&function(e){return Boolean(e.match(/^[1-9][0-9]*$/))}(t)?n:void 0}(n[n.length-1]);let i=t;if(void 0!==o){const e=n.slice(0,n.length-1).join(" ");i=e.length>0?e:void 0}return{title:i,digit:o}}(e[0]),r=void 0===n?"":`${n.trimEnd()} `,a=t(void 0===i?1:i+1);return o().Ey_(`${r}${a}`)}},110955:(e,t,n)=>{n.d(t,{A:()=>r,r:()=>a});var o=()=>n(757695);class i extends o().default{getInitialState(){return{open:!1}}}const r=new i,a=o().default.createValue(!1)},112069:(e,t,n)=>{n.d(t,{$d:()=>h,EQ:()=>l,FD:()=>b,Fw:()=>y,IM:()=>o,Rh:()=>S,WC:()=>a,_J:()=>f,ae:()=>v,kB:()=>s,o_:()=>_});n(581454),n(814603),n(147566),n(198721);const o={local:"http://localhost:3008",development:"https://integrations-api-dev.notion.com",staging:"https://integrations-api-stg.notion.com",production:"https://integrations-api.notion.com"},i={local:"http://localhost:3000/sip",development:"https://dev.notion.so/sip",staging:"https://stg.notion.so/sip",production:"https://notion.so/sip"},r="/install";function a(e){const{env:t,isServerIntegrationsProxyEnabled:n,integrationPath:a}=e;return`${(n?i:o)[t]}${a}${r}`}const s="/salesforce",l="/user",c="/slack",d="/github",u="/zendesk",p="/jira-data-center",m="/gmail",g="/google-contacts";function f(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:c})}function v(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:d})}function h(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:u})}function _(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:p})}function b(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:m})}function y(e,t){return a({env:e,isServerIntegrationsProxyEnabled:t,integrationPath:g})}const S={SECURE_EXTERNAL_PREVIEW:"/preview",APP_AUTHORIZE:"/app/authorize",AUTH_AUTHORIZE:"/auth/authorize"}},112452:(e,t,n)=>{n.d(t,{_:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("undo",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M14.542 10.6826C14.542 7.96875 12.71 6.10254 9.59961 6.10254H5.29297L3.70703 6.1709L4.91016 5.15234L6.67383 3.43652C6.80371 3.30664 6.89258 3.14258 6.89258 2.91699C6.89258 2.5 6.59863 2.19238 6.1543 2.19238C5.96973 2.19238 5.76465 2.28125 5.61426 2.4248L1.69043 6.29395C1.5332 6.4375 1.45117 6.64258 1.45117 6.84766C1.45117 7.05273 1.5332 7.25098 1.69043 7.40137L5.61426 11.2705C5.76465 11.4141 5.96973 11.5029 6.1543 11.5029C6.59863 11.5029 6.89258 11.1953 6.89258 10.7715C6.89258 10.5527 6.80371 10.3887 6.67383 10.252L4.91016 8.53613L3.70703 7.52441L5.29297 7.59277H9.64746C11.8486 7.59277 13.0586 8.84375 13.0586 10.6211C13.0586 12.4053 11.8486 13.7109 9.64746 13.7109H8.05469C7.60352 13.7109 7.2959 14.0459 7.2959 14.4629C7.2959 14.873 7.61035 15.208 8.05469 15.208H9.69531C12.751 15.208 14.542 13.4102 14.542 10.6826Z"})})},112873:(e,t,n)=>{n.d(t,{B4:()=>E,UP:()=>N,xl:()=>D});n(898992),n(354520),n(672577),n(803949),n(581454);var o=()=>n(908006),i=()=>n(197959),r=()=>n(161479),a=()=>n(496603),s=()=>n(763824),l=()=>n(725332),c=()=>n(36088),d=()=>n(938045),u=()=>n(555776),p=()=>n(116008),m=()=>n(186445),g=()=>n(682146),f=()=>n(299545),v=()=>n(953418),h=()=>n(517223),_=()=>n(57618),b=()=>n(129522),y=()=>n(143857),S=()=>n(869562),w=()=>n(644914),k=()=>n(737230),I=()=>n(372154),x=()=>n(546574),A=()=>n(508496),C=()=>n(630116),T=()=>n(878523),M=()=>n(778417),P=()=>n(725614),B=()=>n(751156);function R(e,t){const n=y().A.find((e=>e.getStore().id===t));n&&(M().IU({preventDismissMobileKeyboard:!0,environment:e}),P().setSelectionAtEnd({store:n.getInputStore().state.textStore}))}async function E(e){var t,v,y;const{environment:E,blockStore:D,analyticsFrom:N,discussionIds:O,shouldFocusDiscussion:U,recursivelyLoadAllDiscussions:F,property_id:V,openFullPropertyDiscussionOnly:j,intl:z}=e;let H=(null==O?void 0:O.map((e=>C().sk.createChildStore(D,{table:i().$Y,id:e,spaceId:(0,r().e)(D.pointer.spaceId)}))))||f().Bw(D,{recursivelyLoadAllDiscussions:F,onlyIncludePropertyDiscussions:Boolean(V)});V&&(H=H.filter((e=>e.getPropertyId()===V)),j&&z&&(H=H.filter((e=>(0,g().q7)(e,z,D,V)))));let{rect:W}=e;const{resolved:q,unresolved:K}=f().uy(H),{commentsDependency:G}=await Promise.resolve().then(n.bind(n,774733)),{discussionHelpers:$}=await G.load(),Y=$.sortDiscussionStoresByLatestComment(K.length>0?K:q)||[],Q=null==Y||null===(t=Y[0])||void 0===t?void 0:t.id,Z=null==Y||null===(v=Y[0])||void 0===v?void 0:v.getPropertyId(),{device:X}=E;X.isMobile&&"updates_sidebar"!==N&&(M().IU({environment:E}),X.isIOS&&P().blurActiveElement()),x().A.markDiscussionsInteractedWith(Y.map((e=>e.id))),A().default.checkGate({gateName:"comment_sidebar_for_you"})&&!A().default.checkGate({gateName:"margin_comments_stepper"})&&B().createAndCommit({userAction:"Comment.openDiscussion",environment:E,canUndo:!0,perform:e=>Y.forEach((t=>(0,l().U)({transaction:e,discussionStore:t})))}),await o().default.afterNextFlush();const J=(0,w().me)(E);if(D.id===(0,m().s0)()&&void 0===Z){if(Q){"PageDetailsStore"in E&&E.PageDetailsStore.setToggleState({type:"discussion",id:D.id,environment:E},!0);const e=C().sk.createChildStore(D,{table:i().$Y,id:Q,spaceId:(0,r().e)(D.pointer.spaceId)});if((J||!J&&U)&&L(Q),e.getResolved())if((0,w().me)(E))S().setUpdateSidebarCommentsMode("resolved");else if((0,w().Nk)(E))S().setUpdateSidebarTab(k().tF.Comments),S().setUpdateSidebarCommentsMode("resolved");else{const e=b().K.findBlockFromStoreWithMethod(D,"openResolvedDiscussionPopup");e&&(e.openResolvedDiscussionPopup(),await o().default.afterNextFlush(),L(Q))}T().o2(E,{from:N,discussion_id:e.id,discussion_type:e.getType()})}if(!J)return}if(!W&&!J&&"margin_comments"!==N){const e=V?_().A.getRect(D,V):b().K.getRect(D);if(!e)return;const t=e.width,n=e.height,o=e.right-t;W=new DOMRect(o,e.top,t,n)}let ee,te=I().c.Open;if(Q){var ne;ee=C().sk.createChildStore(D,{table:i().$Y,id:Q,spaceId:(0,r().e)(D.pointer.spaceId)}),ee.getResolved()&&(te=I().c.Resolved);const e=Boolean(D.isCollectionView()),t=null===(ne=D.getAssociatedCollectionStore())||void 0===ne?void 0:ne.getLayoutStore(),n=Boolean(V&&t&&(0,h().Hc)({layoutStore:t,propertyId:V}).isPropertyInPageDetails);!(0,w().Nk)(E)||k().Ay.state.currentTab!==k().tF.Comments||ee.getResolved()||e||n||S().setUpdateSidebarCommentsMode("unresolved")}else te=I().c.Resolved;if(X.isMobile&&"updates_sidebar"!==N&&(M().IU({environment:E}),X.isIOS&&P().blurActiveElement()),I().A.setState({open:!0,rect:W,tab:te,blockStore:D,discussionIds:H.map((e=>e.id)),recursivelyLoadAllDiscussions:F,property_id:V}),T().o2(E,{from:N,discussion_id:Q,discussion_type:null===(y=ee)||void 0===y?void 0:y.getType()}),!U)return;const oe=p().A.getDiscussionInputStore();if(u().A.state.overlapsExistingDiscussionMenu&&oe){if(await s().wR(10),await o().default.afterNextFlush(),(0,d().w)({animate:!1}),E.device.isMobile)return;(0,c().M)({discussionInputStore:oe,environment:E})}else if(Q){if(await s().wR(10),await o().default.afterNextFlush(),L(Q),E.device.isMobile)return;(function(e){var t;const{blockStore:n,discussionIds:o}=e;return I().A.state.open&&I().A.state.blockStore.id===n.id&&a().n4(null===(t=I().A.state)||void 0===t?void 0:t.discussionIds,o)})(e)||R(E,Q)}else{if(E.device.isMobile)return;K.length>0&&(await s().wR(10),await o().default.afterNextFlush(),R(E,K[0].id))}}function D(){const e=I().A.state;!p().A.hasContent()&&e.open&&p().A.getBlockStore()===e.blockStore&&u().A.state.overlapsExistingDiscussionMenu&&(p().A.reset(),u().A.reset()),e.open&&I().A.setState({open:!1,rect:e.rect})}function N(){const e=I().A.state;if(e.open&&e.tab===I().c.Open){0===f().O3(e.blockStore,{recursivelyLoadAllDiscussions:!1}).length&&D()}}function L(e){const t=y().A.find((t=>t.getStore().id===e&&!t.isSidebarFormat()&&!t.isMarginFormat()));if(t){const e=t.getNode();if(e&&e.parentElement){const t=Array.from(e.parentElement.children).indexOf(e);v().vq(e,{edgeDist:0===t?0:-1,animate:!1})}}}},112995:(e,t,n)=>{n.d(t,{K:()=>c});var o=n(296540),i=()=>n(445356),r=()=>n(449412),a=()=>n(963589),s=()=>n(403831),l=n(474848);function c(e){let{children:t,disableCapture:n,fallback:c,from:d,onError:u,type:p}=e;const m=(0,o.useRef)(),g=(0,a().X)("enable_error_boundary_debugger");return(0,l.jsx)(i().A,{onError:function(e,t){n||(m.current=r().O8(e,{from:d,type:p||"RenderError",data:{miscDataToConvertToString:t}})),null==u||u({error:e,errorInfo:t,errorId:m.current})},fallback:function(e){return c({...e,errorId:m.current})},children:g?(0,l.jsx)(s().q,{name:d,children:t}):t})}},113414:(e,t,n)=>{n.d(t,{g:()=>r});n(296540);var o=()=>n(959013),i=n(474848);function r(e){let{children:t}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:t||(0,i.jsx)(o().sA,{id:"errorLabel.renderError.fullTextLine1",defaultMessage:"An error has occurred."})}),(0,i.jsx)("span",{children:(0,i.jsx)(o().sA,{id:"errorLabel.renderError.fullTextLine2",defaultMessage:"We’re actively working on a fix."})})]})}},113806:(e,t,n)=>{n.d(t,{e:()=>i});const o={"1_week":6048e5,"2_weeks":12096e5,"1_minute":6e4};function i(e){return new Date(Date.now()).getTime()-e.signupTime<o[e.age]}},115512:(e,t,n)=>{n.d(t,{$t:()=>r,Nb:()=>c,Qg:()=>u,ks:()=>s,nl:()=>d,ny:()=>a,pA:()=>l});n(581454);var o=()=>n(534177),i=()=>n(284371);const r={listStyleType:"none",padding:0,margin:0};i().Wy.regular;function a(e,t){const n="UIRegular"===t?i().J.UIRegular:"UISmall"===t?i().J.UISmall:(0,o().HB)(t);return e.device.isMobile?n.mobile:n.desktop}function s(e,t){const n="UIRegular"===t?i().K_.UIRegular:"UISmall"===t?i().K_.UISmall:(0,o().HB)(t);return e.device.isMobile?n.mobile:n.desktop}function l(e){return{display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:e}}function c(e){let{topLeft:t,topRight:n,bottomLeft:o,bottomRight:i}=e;return[t,n,i,o].map((e=>e?`${e}px`:"0")).join(" ")}function d(e){let{width:t,color:n}=e;if(t>1){const e=(t-.5)/2;return{boxShadow:`0px 0px 0px ${e}px ${n}, inset 0px 0px 0px ${e}px ${n}`,borderWidth:.5,borderColor:n}}return{boxShadow:`0px 0px 0px 0px ${n}, inset 0px 0px 0px 0.5px ${n}`,borderWidth:.5,borderColor:n}}const u={position:"absolute",overflow:"hidden",clip:"rect(1px, 1px, 1px, 1px)",whiteSpace:"nowrap",height:1,width:1}},116008:(e,t,n)=>{n.d(t,{A:()=>s,f:()=>l});n(898992),n(354520);var o=()=>n(129522),i=()=>n(301421);class r extends(()=>n(757695))().default{getInitialState(){return{open:!1,rect:n(397248).v_}}hasContent(){if(this.state.open){if("comment"===this.state.content)return Boolean(this.state.discussionInputStore.state.textStore.getValue())||this.state.discussionInputStore.state.files.length>0;if("reaction"===this.state.content)return void 0!==this.state.emoji}}isComposingNewDiscussion(){return!(!this.state.open||"comment"!==this.state.content)&&!!this.hasContent()}getBlockStore(){if(this.state.open&&this.state.blockId){var e;const t=null===(e=o().K.findBlockFromId(this.state.blockId))||void 0===e?void 0:e.getBlockStore();return t&&"comment"===this.state.content&&t!==this.state.lastKnownBlockStore&&this.setState({...this.state,lastKnownBlockStore:t}),t}}isDraftCommentOnValidSelection(){return this.isTextWithCommentStillPresent()&&this.isBlockStillAlive()}getClosestBlockStore(){if(this.state.open&&"comment"===this.state.content){const{node:e,blockStore:t}=n(695625).T.findClosestVisibleParent(this.state.lastKnownBlockStore);return{node:e,parentBlockStore:t}}}getLastKnownBlockStore(){if(this.state.open&&"comment"===this.state.content)return this.state.lastKnownBlockStore}getLastSelectedEditables(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&"comment"===this.state.content)return this.state.lastEditables.filter((e=>{let{store:t}=e;return t.table===n(179034).ev}))}getDiscussionInputStore(){if(this.state.open&&"comment"===this.state.content)return this.state.discussionInputStore}getType(){if(this.state.open)return this.state.type}getMultiSelection(){if(this.state.open&&"inline"===this.state.type)return this.state.multiSelection}getPropertyId(){if(this.state.open&&"comment"===this.state.content&&this.state.property_id)return this.state.property_id}isPropertyComment(){return Boolean(this.state.open&&"comment"===this.state.content&&this.state.property_id)}shouldShowPropertyComment(){var e;return Boolean(this.isPropertyComment()&&(null===(e=n(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.isInsideCollection()))}ifPropertyCommentShouldDisplay(){return!this.isPropertyComment()||this.shouldShowPropertyComment()}isPropertyWithDraftDiscussion(e){const{blockId:t,propertyId:n}=e;return!(!t||!n)&&(this.state.open&&"comment"===this.state.content&&this.state.blockId===t&&this.isPropertyComment()&&this.state.property_id===n)}updateRect(){const e=this.getBlockStore();if(!this.state.open||!e||this.isPropertyComment())return;if(e.isType("code"))return;const t=o().K.getRect(e);if(!t)return;const n=this.state.rect.left,i=this.state.rect.width,r=this.state.rect.height;this.setState({...this.state,rect:new DOMRect(n,t.top,i,r)})}calculateMultitextSelection(){if(this.state.open&&"inline"===this.state.type&&this.state.multiSelection&&!this.getPropertyId()){var e,t;const r=this.state.multiSelection.start.store.id,a=null===(e=o().K.findBlockFromId(r))||void 0===e?void 0:e.getBlockStore(),s=null==a?void 0:a.getTitleStore(),l=this.state.multiSelection.end.store.id,c=null===(t=o().K.findBlockFromId(l))||void 0===t?void 0:t.getBlockStore().getTitleStore();if(s&&c){const e=i().n.findEditableWithStore(s),t=i().n.findEditableWithStore(c);if(r===l&&a&&a.isType(n(700500).IA))return;t&&e&&-1===(0,n(507707).A)(t.getNode(),e.getNode())?(this.state.multiSelection.start.store=c,this.state.multiSelection.end.store=c):(this.state.multiSelection.start.store=s,this.state.multiSelection.end.store=c)}}}isBlockStillAlive(){if(this.state.open&&"comment"===this.state.content&&this.state.lastKnownBlockStore){const e=this.state.lastKnownBlockStore.pathIsDead();return e&&this.reset(),!e}}isTextWithCommentStillPresent(){if(!this.state.open||"inline"!==this.state.type)return!0;const e=this.getLastSelectedEditables()??[];if(!e.length)return!1;const t=e[0].store.getValue(),o=n(919709).qAZ(t),i=this.state.multiSelection.start.index>o.length-1;return i&&this.reset(),!i}}const a=new r;(0,n(604341).exposeDebugValue)("NewDiscussionMenuStore",a);const s=a,l=new(n(496506).default)((()=>a.getDiscussionInputStore()),{debugName:"DiscussionInputStoreStore"})},116089:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,magicWandIcon:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10.55 3a.55.55 0 0 0-1.1 0v2a.55.55 0 0 0 1.1 0zM8.47 8.47a.75.75 0 0 1 1.06 0l.897.896-1.06 1.06-.897-.896a.75.75 0 0 1 0-1.06m1.603 2.664 6.647 6.646a.75.75 0 1 0 1.06-1.06l-6.646-6.647zM10.55 15a.55.55 0 0 0-1.1 0v2a.55.55 0 0 0 1.1 0zm-3.697-1.853a.55.55 0 0 1 0 .777L5.44 15.34a.55.55 0 1 1-.778-.778l1.415-1.415a.55.55 0 0 1 .777 0m8.485-8.486a.55.55 0 0 1 0 .778l-1.415 1.414a.55.55 0 1 1-.777-.777L14.56 4.66a.55.55 0 0 1 .777 0M5.55 10a.55.55 0 0 1-.55.55H3a.55.55 0 1 1 0-1.1h2a.55.55 0 0 1 .55.55m12 0a.55.55 0 0 1-.55.55h-2a.55.55 0 1 1 0-1.1h2a.55.55 0 0 1 .55.55M6.853 6.853a.55.55 0 0 1-.778 0L4.661 5.44a.55.55 0 1 1 .778-.778l1.414 1.415a.55.55 0 0 1 0 .777"})},i=(0,n(340498).wt)("magicWand",o)},116225:(e,t,n)=>{n.d(t,{LW:()=>s,u4:()=>l});n(944114);var o=n(296540),i=()=>n(591779),r=()=>n(299917);let a=!1;function s(e){const{isEnabled:t,isLoggedIn:n,userId:s,userEmail:c,spaceId:d,sprigConfig:u,userDaysSinceSignup:p,daysSinceSpaceCreated:m,userDomainType:g,isSpaceAdmin:f,spaceMemberCount:v}=e;(0,o.useEffect)((()=>{if(a=t,!t||!n||void 0===s||void 0===c||void 0===u||void 0===g)return;if(window.Sprig)return;const e=function(){e._queue.push(arguments)};e._queue=[],e.appId=u.environmentId,window.Sprig=e,window.UserLeap=e,window.Sprig("setUserId",s),window.Sprig("setEmail",c),d&&window.Sprig("setAttribute","SPACE_ID",d),v&&window.Sprig("setAttribute","SPACE_MEMBER_COUNT",v),m&&window.Sprig("setAttribute","DAYS_SINCE_SPACE_CREATED",m),window.Sprig("setAttribute","DAYS_SINCE_USER_SIGNUP",p),window.Sprig("setAttribute","USER_DOMAIN_TYPE",g),window.Sprig("setAttribute","IS_SPACE_ADMIN",f),p>=3&&p<=14&&"professional"===g&&l(f?{name:"trigger-phase-1"}:{name:"trigger-phase-1-1"}),(0,r().Ay)("https://cdn.sprig.com/shim.js").catch((e=>{console.error("Error loading Sprig shim",e)}))}),[t,n,s,u,c,d,f,g,p,m,v]);const h=(0,i().ZC)(n);(0,o.useEffect)((()=>{h&&!n&&window.Sprig&&window.Sprig("logoutUser")}),[h,n])}function l(e){const t=e.name,n="args"in e?e.args:{};window.Sprig?window.Sprig("track",t,n):a&&console.warn("Sprig not loaded, not tracking: ",t)}},116652:(e,t,n)=>{n.d(t,{o:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("personCrossedOut",{viewBox:"0 0 44 44",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.4857 44H0L44 8.56549V13.0061L5.4857 44Z"}),(0,o.jsx)("path",{d:"M39.8048 44H8.66491L25.6448 30.4378C26.9394 30.6489 28.1581 30.9719 29.3009 31.4067C31.5362 32.2374 33.4346 33.326 34.9964 34.6723C36.5725 36.0044 37.7761 37.4367 38.6071 38.9692C39.4525 40.5018 39.8752 41.9555 39.8752 43.3305C39.8752 43.5675 39.8517 43.7906 39.8048 44Z"}),(0,o.jsx)("path",{d:"M30.3971 16.7973C30.3971 16.8668 30.3965 16.9359 30.3952 17.0048L19.3828 25.9192C18.7467 25.7134 18.1339 25.4228 17.5446 25.0473C16.2408 24.2023 15.1876 23.0708 14.3853 21.6528C13.5972 20.2205 13.2032 18.6163 13.2032 16.8403C13.2032 15.0929 13.5972 13.5174 14.3853 12.1137C15.1876 10.7101 16.2408 9.60007 17.5446 8.78366C18.8485 7.96725 20.267 7.55905 21.8001 7.55905C23.3332 7.55905 24.7517 7.96009 26.0556 8.76218C27.3595 9.56426 28.4054 10.6671 29.1935 12.0708C29.9959 13.4601 30.3971 15.0356 30.3971 16.7973Z"})]})})},118757:(e,t,n)=>{n.d(t,{Bc:()=>i,ke:()=>r,qG:()=>a});var o=()=>n(720665);function i(e,t){t.startsWith("offline -")?t="offline":t.startsWith("mobileNativeError -")&&(t="mobileNativeError");const n=e[t]||0;e[t]=n+1,e._total+=1}const r=Number(o().TD),a=.5*o().TD;o().TD,o().TD},119875:(e,t,n)=>{n.d(t,{R:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("book",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M27,23V1H7C4.791,1,3,2.791,3,5v20c0,2.209,1.791,4,4,4h20v-2h-1v-4H27z M21,3v6l-1-1.333L19,9V3H21z M20,11l3,4V3h2v18H9V3 h8v12L20,11z M5,5c0-1.103,0.896-2,2-2v18c-0.729,0-1.411,0.195-2,0.537V5z M24,27H7c-1.104,0-2-0.896-2-2s0.896-2,2-2h17V27z"})})},120303:(e,t,n)=>{n.d(t,{R:()=>u});var o=n(296540),i=()=>n(401497),r=()=>n(66913),a=()=>n(285790),s=()=>n(972435),l=()=>n(58283),c=()=>n(652617),d=n(474848);function u(e){const{onClick:t,onDismiss:n,style:u,hoveredStyle:m,showBackground:g=!0}=e,f=function(e,t){const n=(0,l().on)();return(0,i().IS)((o=>({button:{alignItems:"center",background:t?o.buttonHoveredBackground:"none",borderRadius:"100%",display:"flex",height:22,justifyContent:"center",position:"absolute",right:10+n,top:10,width:22,zIndex:10,...e},buttonHovered:{background:t?o.buttonPressedBackground:o.buttonHoveredBackground}})),[t,e,n])}(u,g),v=(0,o.useContext)(c().e),h=function(e){const{onClick:t,onDismiss:n}=e,i=(0,o.useCallback)((e=>{null==t||t(e),null==n||n()}),[t,n]);return t||n?i:void 0}({onClick:t,onDismiss:n??v});return h?(0,d.jsx)(a().A,{ariaLabel:s().A.formatMessage(p.dismissModalAriaLabel),icon:r().V,onClick:h,style:f.button,hoveredStyle:{...f.buttonHovered,...m}}):null}const p=(0,n(959013).YK)({dismissModalAriaLabel:{id:"dismiss.dismissButton.label",defaultMessage:"Dismiss"}})},122058:(e,t,n)=>{n.d(t,{By:()=>s,Pw:()=>m,S9:()=>u,VK:()=>p,hp:()=>d,nT:()=>l,sS:()=>g,uU:()=>r,uu:()=>c,yM:()=>a});n(898992),n(354520),n(581454);var o=()=>n(116225),i=()=>n(989423);function r(e){(0,i().u4)({environment:e.environment,event:{eventName:"open_quick_find",eventProperties:{search_session_id:e.searchSessionId}}}),o().u4({name:"open_quick_find",args:{search_session_id:e.searchSessionId}})}function a(e){(0,i().u4)({environment:e.environment,event:{eventName:"close_quick_find",eventProperties:{search_session_id:e.searchSessionId,opened_time_ms:e.openedTimeMs}}}),o().u4({name:"close_quick_find",args:{search_session_id:e.searchSessionId,opened_time_ms:e.openedTimeMs}})}function s(e){(0,i().u4)({environment:e.environment,event:{eventName:"open_deep_find",eventProperties:{thread_id:e.threadId,ai_session_id:e.sessionId,search_session_id:e.searchSessionId}}}),o().u4({name:"open_deep_find",args:{thread_id:e.threadId,ai_session_id:e.sessionId,search_session_id:e.searchSessionId}})}function l(e){const t=Boolean(e.spaceStore.getSettings().enable_ai_training);(0,i().u4)({environment:e.environment,event:{eventName:"quick_find_result",eventProperties:{search_session_id:e.searchSessionId,results:e.results,search_session_flow_number:e.searchSessionFlowNumber,query_length:e.queryLength,query_words:e.queryWords,time_to_result:e.timeToResult,query_if_leap:t?e.query:void 0}}})}function c(e){(0,i().u4)({environment:e.environment,event:{eventName:"deep_find_result",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,results:e.results.filter((e=>"microsoftTeams"!==e.type)).map((e=>"block"===e.type||"page"===e.type||"properties"===e.type?{id:"block"===e.type?e.pageId:e.id,source:"notion"}:{id:e.id,source:e.type})).filter(((e,t,n)=>"notion"!==e.source||n.findIndex((t=>"notion"===t.source&&t.id===e.id))===t)),query_length:e.queryLength,query_words:e.queryWords,time_to_result:e.timeToResult}}})}function d(e){const{environment:t}=e;(0,i().u4)({environment:t,event:{eventName:"deep_find_search_results_on_client",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,thread_id:e.threadId,time_since_turn_start_ms:e.timeSinceTurnStartMs}}})}function u(e){(0,i().u4)({environment:e.environment,event:{eventName:"deep_find_begin_ai_answer",eventProperties:{assistant_session_id:e.assistantSessionId,search_session_id:e.searchSessionId,thread_id:e.threadId,time_since_turn_start_ms:e.timeSinceTurnStartMs}}})}function p(e){(0,i().u4)({environment:e.environment,event:{eventName:"qna_result_clicked",eventProperties:{thread_id:e.threadId,search_session_id:e.searchSessionId,trace_id:e.traceId,clicked_page_id:e.clickedPageId,position:e.position,result_type:e.resultType,source:e.source}}})}function m(e){(0,i().u4)({environment:e.environment,event:{eventName:"deep_find_answer_copied",eventProperties:{thread_id:e.threadId,search_session_id:e.searchSessionId,trace_id:e.traceId,step_id:e.stepId}}})}function g(e){(0,i().u4)({environment:e.environment,event:{eventName:"deep_find_saved_to_page",eventProperties:{thread_id:e.threadId,search_session_id:e.searchSessionId,trace_id:e.traceId,step_id:e.stepId}}})}},124672:(e,t,n)=>{n.d(t,{q:()=>a});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=()=>n(487929),i=()=>n(778781),r=()=>n(36682);function a(e){let{modulesByArea:t,collectionSchema:n,collectionFormat:a}=e;const s=function(e){let{modulesByArea:t,collectionSchema:n,collectionFormat:a}=e;const s=(0,r().Q)(t),l={propertyModule:[],pinnedProperty:[],relationsGroup:[],propertiesGroup:[]},c=new Set(Object.keys(n));for(const r of s)if((0,i().gx)(r))l.propertyModule.push(r.propertyId),c.delete(r.propertyId);else if("normalizedTitleWithIcon"===r.type){l.pinnedProperty.push(...r.propertyIds);for(const e of r.propertyIds)c.delete(e)}else if("relationsGroup"===r.type){const e=(0,o().T)({format:a,schema:n,visibilityLevels:["inline","minimal"]});l.relationsGroup.push(...e.map((e=>e.section)));for(const t of e)c.delete(t.section)}return l.propertiesGroup=Array.from(c),l}({modulesByArea:t,collectionSchema:n,collectionFormat:a}),{propertiesGroup:l,...c}=s;return Object.values(c).flat()}},124952:(e,t,n)=>{n.d(t,{d:()=>i});var o=()=>n(989423);function i(e,t){o().vd(e,"full_screen_action",t)}},125565:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(847249),r=()=>n(401497),a=()=>n(757695),s=()=>n(284371),l=()=>n(859428),c=n(474848);function d(e){const{showTooltipWhenTruncated:t,isInline:n,isMultiline:r,children:s}=e,d=(0,i().uB)(void 0,a().default.createClass(!1,{name:"canShowTooltipStore"})),m=(0,i().O$)(d),g=(0,o.useRef)(null),f=(0,o.useCallback)((()=>{g.current&&(r?d.setState(g.current.scrollHeight>g.current.offsetHeight):d.setState(g.current.scrollWidth>g.current.offsetWidth))}),[d,r]);(0,o.useEffect)((()=>{f()}),[f]);const v=(0,o.useCallback)((e=>{g.current=e,f()}),[f]);return t?(0,c.jsx)(l().A,{disableTooltip:!m,render:t=>Boolean(n)?(0,c.jsx)(u,{ref:v,tooltipEvents:t,...e}):(0,c.jsx)(p,{ref:v,tooltipEvents:t,...e}),textWrap:Boolean(r),renderTooltip:()=>(0,c.jsx)(c.Fragment,{children:s})}):Boolean(n)?(0,c.jsx)(u,{ref:v,...e}):(0,c.jsx)(p,{ref:v,...e})}const u=(0,o.forwardRef)((function(e,t){const{className:n,id:o,onMouseEnter:i,onMouseLeave:a,isMultiline:s,isSmall:l,isMobile:d,isSecondaryColor:u,style:p,children:m}=e,g=(0,r().IS)((e=>({label:v(e,s,l,d,u,p)})),[s,l,d,u,p]);return(0,c.jsx)("span",{ref:t,className:n,id:o,style:g.label,onMouseEnter:i,onMouseLeave:a,...e.tooltipEvents,children:m})})),p=(0,o.forwardRef)((function(e,t){const{className:n,id:o,onMouseEnter:i,onMouseLeave:a,isMultiline:s,isSmall:l,isMobile:d,isSecondaryColor:u,style:p,children:m}=e,g=(0,r().IS)((e=>({label:v(e,s,l,d,u,p)})),[s,l,d,u,p]);return(0,c.jsx)("div",{ref:t,className:n,id:o,style:g.label,onMouseEnter:i,onMouseLeave:a,...e.tooltipEvents,children:m})}));function m(e,t){return t?{fontSize:e?s().J.UISmall.mobile:s().J.UIRegular.mobile}:{fontSize:e?s().J.UISmall.desktop:s().J.UIRegular.desktop}}function g(e,t){return t?{lineHeight:e?s().K_.UISmall.mobile:s().K_.UIRegular.mobile}:{lineHeight:e?s().K_.UISmall.desktop:s().K_.UIRegular.desktop}}function f(e,t,n){return t?{color:n?e.text.tertiary:e.text.secondary}:{color:n?e.text.secondary:e.text.primary}}function v(e,t,n,o,i,r){return{...m(Boolean(n),Boolean(o)),...g(Boolean(n),Boolean(o)),...f(e,Boolean(n),i),...!t&&{...s().RC},...r}}},125958:(e,t,n)=>{n.d(t,{A:()=>l,T:()=>a});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=()=>n(496603),i=()=>n(700500),r=()=>n(179034);function a(e,t,n){const i=[];return s(t({table:r().ev,id:e}),t,i,!0,new Set,n),o().sb(i)}function s(e,t,n,o,a,l){if(!e)return;if(a.has(e.id))return;if(a.add(e.id),e.isType(i().wK)&&(n.push(e.id),!l))return;const c=e.getType()===i().xd.transclusionReference&&e.getTransclusionReferenceTargetPointer();c&&s(t(c),t,n,!1,a,l);if(l?o||!(0,i().$I)(e.getType())&&(0,i().IU)(e.getType(),e.getFormat())&&e.hasContent():(o||e.getType()===i().xd.columnList||e.getType()===i().xd.column||e.getType()===i().xd.transclusionContainer||e.getType()===i().xd.callout)&&e.hasContent())for(const i of e.getContentIds())s(t({table:r().ev,id:i}),t,n,!1,a,l)}function l(e){const{headerBlockId:t,headerBlockIds:n,index:a,getRecordModel:s}=e,l=s({table:r().ev,id:t});if(!l)return 0;const c=l.getType(),d=o().oE(n.map((e=>s({table:r().ev,id:e}))));if(c===i().xd.header)return 0;const u=o().Kl(d,((e,t)=>t<a&&e.getType()===i().xd.header));if(c===i().xd.subHeader)return u>=0?1:0;const p=o().Kl(d,((e,t)=>t<a&&e.getType()===i().xd.subHeader));return u>=0&&p>u?2:u>=0||p>=0?1:0}},126126:(e,t,n)=>{n.d(t,{eQ:()=>U,hJ:()=>J,Ay:()=>F,Uo:()=>H,XE:()=>Z});n(944114),n(898992),n(823215),n(672577),n(581454);var o=n(296540),i=()=>n(662303),r=()=>n(484714),a=()=>n(847249),s=()=>n(401497),l=()=>n(869190),c=()=>n(641007),d=()=>n(187174),u=()=>n(798880),p=()=>n(695608),m=()=>n(959013),g=()=>n(100622),f=()=>n(496603),v=()=>n(620689),h=()=>n(488923),_=()=>n(102172),b=()=>n(549500),y=()=>n(673657),S=()=>n(745766),w=()=>n(108944),k=()=>n(680026),I=()=>n(227440),x=()=>n(948914),A=()=>n(630116),C=()=>n(704152),T=()=>n(859428),M=()=>n(125565),P=()=>n(994006),B=()=>n(453697),R=()=>n(941541);const E=function(e){const t=(0,r().v3)(),i=(0,o.useRef)(),a=(0,n(336811).T)(),s=(0,o.useCallback)((async()=>{if(await n(589994).transactionQueue.awaitRecordTransaction(e.blockStore.pointer),!a.current)return;const o=(0,n(921997).Ws)(e.blockStore.id);i.current=R().Ay.addListener(o,void 0,f().nF((()=>n(466721).Ds(t,{blockStore:e.blockStore,pageVisitStore:e.pageVisitStore,incremental:!0,limit:e.limit})),1e3),void 0,t)}),[t,a,e.blockStore,e.limit,e.pageVisitStore]),l=(0,o.useCallback)((()=>{i.current&&(R().Ay.removeListener(i.current,t),i.current=void 0)}),[t]);return(0,o.useEffect)((()=>(s(),l)),[s,l]),null};var D=n(474848);const N=5,L=25,O=6,U=22;const F=function(e){let{pageVisitStore:t,presenceStore:n,rootStore:o,maxUsers:i}=e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(b().a0,{rootStore:o}),(0,D.jsx)(J,{rootStore:o,pageVisitStore:t,presenceStore:n,maxUsers:i,isShowingInPostFeed:!1}),(0,D.jsx)(E,{blockStore:o,pageVisitStore:t,limit:1+j(i)+L})]})};function V(e){return f().Ul(e,(e=>e.activityTimestampNearestMinuteMs))}function j(e){return e??N}function z(e,t){return A().LU.createChildStore(t,{table:u().oo,id:e})}function H(e){const{environment:t,isShowingTabBar:n,isShowingInPostFeed:o}=e;return{...(0,S().g)({noDrag:t.device.isElectron&&!n}),display:"flex",alignItems:"center",position:"relative",flexDirection:"row-reverse",marginLeft:4+O,paddingRight:O,transform:"translateZ(0)",...o&&{maxHeight:54,paddingBottom:12}}}function W(e){return{color:e.text.contrastSecondary,fontSize:10,textTransform:"uppercase",letterSpacing:"0.015em"}}function q(e){let{userData:t,isPresent:n,rootStore:o,isShowingInPostFeed:c}=e;const d=(0,s().DP)(),u=(0,r().v3)(),g=(0,m().tz)(),f=u.currentUser.id,v=(0,a().K8)((()=>z(t.userId,o)),[t,o]),h=(0,a().K8)((()=>v.isDefined()),[v]),_=(0,a().K8)((()=>(0,p().c6)(g,v.getModel())),[g,v]),b=(0,a().K8)((()=>v.getEmail()),[v]);if(!h)return null;let y;return n?f!==v.id&&(y=t.blockId&&!c?(0,D.jsx)(m().sA,{defaultMessage:"Viewing now. Click to see where they are.",id:"topbar.presenceIndicator.viewingNowWithLocation.tooltip"}):(0,D.jsx)(m().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.viewingNow.tooltip"})):f!==v.id&&t.activityTimestampNearestMinuteMs&&(y=(0,D.jsx)(m().sA,{defaultMessage:"Last viewed {timeFromNow}",id:"topbar.presenceIndicator.lastViewedTime.tooltip",values:{timeFromNow:(0,l().v9)(Math.min(t.activityTimestampNearestMinuteMs,Date.now()),i().locale)}})),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"notranslate",children:_}),(0,D.jsx)("div",{style:{fontWeight:400},children:b}),y&&(0,D.jsx)("div",{style:{color:d.text.contrastSecondary,minWidth:150,paddingTop:2,paddingBottom:2,lineHeight:1.3},children:y})]})}function K(e){let{userData:t,index:n,rootStore:o}=e;const c=(0,s().DP)(),d=(0,r().v3)(),u=(0,k().dp)(d,t),p=(0,a().K8)((()=>z(t.userId,o)),[t,o]);if(!(0,a().K8)((()=>p.isDefined()),[p]))return null;let m;!u&&t.activityTimestampNearestMinuteMs&&(m=(0,l().v9)(t.activityTimestampNearestMinuteMs,i().locale));const g=(0,D.jsxs)("div",{style:{display:"flex",alignContent:"flex-end",minWidth:140,width:"100%",marginTop:4},children:[(0,D.jsx)(P().A,{userStore:p,avatarSize:18,style:{flexGrow:1}}),(0,D.jsx)("div",{style:{marginLeft:"auto",paddingLeft:12,textAlign:"right",flexShrink:1,color:c.text.contrastSecondary},children:m})]});if(u&&t.blockId){const e=t.blockId;return(0,D.jsx)(C().A,{onClick:()=>v().BL([e],!0,d),style:{display:"flex",alignItems:"center"},children:g})}return(0,D.jsx)("div",{style:{display:"flex",alignItems:"center"},children:g})}function G(e){let{hiddenUsers:t,hiddenUsersCount:n,hasMore:o,rootStore:i}=e;return(0,D.jsx)(T().A,{allowHover:!0,originGap:7,renderTooltip:e=>(0,D.jsx)($,{hiddenUsers:t,hiddenUsersCount:n,hasMore:o,rootStore:i,events:e}),render:e=>(0,D.jsx)(Y,{hiddenUsersCount:n,events:e})})}function $(e){let{hiddenUsers:t,hiddenUsersCount:n,hasMore:o,rootStore:i,events:a}=e;const l=(0,s().DP)(),c=(0,r().v3)(),d=[],u=[];for(const r of t)(0,k().dp)(c,r)?d.push(r):u.push(r);const p=u.slice(0,L-d.length),g=n-(d.length+p.length);return(0,D.jsxs)("div",{...a,children:[d.length>0&&(0,D.jsxs)("div",{style:{marginBottom:4},children:[(0,D.jsx)(M().A,{style:W(l),children:(0,D.jsx)(m().sA,{defaultMessage:"Viewing now",id:"topbar.presenceIndicator.hiddenUsers.viewingNow.tooltip"})}),d.map(((e,t)=>(0,D.jsx)(K,{userData:e,index:t,rootStore:i},t)))]}),p.length>0&&(0,D.jsxs)("div",{style:{marginBottom:4},children:[(0,D.jsx)(M().A,{style:{...W(l)},children:(0,D.jsx)(m().sA,{defaultMessage:"Last viewed by",id:"topbar.presenceIndicator.hiddenUsers.lastViewedBy.tooltip"})}),p.map(((e,t)=>(0,D.jsx)(K,{userData:e,index:t,rootStore:i},t)))]}),(0,D.jsx)(Q,{remainingHiddenUsersCount:g,hasMore:o})]})}function Y(e){let{hiddenUsersCount:t,events:n}=e;const o=(0,s().IS)((e=>({origin:{color:e.text.secondary,fontSize:14,marginLeft:2*O,marginRight:-O,whiteSpace:"nowrap"}})),[]);return(0,D.jsx)("div",{style:o.origin,...n,children:(0,D.jsx)(m().sA,{defaultMessage:"{hiddenUsersCount, plural, one {+{hiddenUsersCount}} other {+{hiddenUsersCount}}}",id:"topbar.presenceIndicator.hiddenUsers.otherCount.message",values:{hiddenUsersCount:t}})})}function Q(e){let{hasMore:t,remainingHiddenUsersCount:n}=e;const o=(0,s().IS)((e=>({message:{marginLeft:2,marginTop:2,color:e.text.contrastSecondary}})),[]);return n>0?(0,D.jsx)("div",{style:o.message,children:t?(0,D.jsx)(m().sA,{defaultMessage:"{remainingVisitorsCount}+ more…",id:"topbarPresence.presenceIndicator.hiddenUsers.evenMoreUsersNotViewing.tooltip",values:{remainingVisitorsCount:n}}):(0,D.jsx)(m().sA,{defaultMessage:"{remainingVisitorsCount} more…",id:"topbarPresence.presenceIndicator.hiddenUsers.moreUsersNotViewing.tooltip",values:{remainingVisitorsCount:n}})}):null}function Z(e,t){return(0,s().IS)((n=>{const o={width:U,height:U,borderRadius:U},i=e(n);return{button:{transition:"all 0.2s ease",transform:"scale(1)"},buttonHovered:{transform:"scale(1.15)",background:"none"},buttonPressed:{transform:"scale(0.9)",background:"none"},uiUserAvatarStyles:{...o},avatarInnerOutline:{...o,outlineStyle:"solid",outlineColor:n.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:t?{...o,outlineStyle:"solid",outlineColor:i,outlineWidth:1.5,outlineOffset:-.5}:{},avatarOuterOutline:{...o,outlineStyle:"solid",outlineColor:t?n.UIUserAvatarOuterOutline:n.UIUserAvatarIdleOutline,outlineWidth:.5,outlineOffset:t?1:0,marginRight:-6,position:"relative"},initialColor:{color:t?i:n.icon.secondary}}}),[e,t])}function X(e){const{userData:t,rootStore:n,isShowingInPostFeed:i=!1}=e,s=(0,r().v3)(),{userId:l}=t,d=(0,k().dp)(s,t),{userStore:p,showAvatar:m}=(0,a().K8)((()=>{if((0,u().MF)(l))return{userStore:c().px,showAvatar:!0};const e=z(l,n);return{userStore:e,showAvatar:(e.isDefined()||(0,u().MF)(e.id))&&!e.getIsSuspended()}}),[l,n]),f=Z((0,o.useCallback)((e=>(0,u().MF)(l)?e.icon.secondary:l===s.currentUser.id?e.UIUserAvatarSelfBorder:(0,g().Nq)(l,e)),[s.currentUser.id,l]),d);return m?(0,D.jsx)(T().A,{disableTooltip:i,textWrap:!0,renderTooltip:()=>(0,D.jsx)(q,{rootStore:n,userData:t,isPresent:d,isShowingInPostFeed:i}),render:e=>{const n=(0,D.jsx)("div",{style:f.avatarOuterOutline,children:(0,D.jsx)("div",{style:f.avatarBorder,children:(0,D.jsx)(B().A,{iconStyle:f.avatarInnerOutline,userStore:p,style:f.uiUserAvatarStyles,isOffline:!d,size:U,avatarShouldShowShadow:!i,initialOverrideStyle:f.initialColor})})});if(d&&t.blockId){const o=t.blockId;return(0,D.jsx)(C().A,{...e,onClick:()=>v().BL([o],!0,s),style:f.button,hoveredStyle:f.buttonHovered,pressedStyle:f.buttonPressed,children:n})}return(0,D.jsx)("div",{...e,children:n})}}):null}function J(e){const{rootStore:t,pageVisitStore:n,presenceStore:o,maxUsers:i,isShowingInPostFeed:s}=e,l=(0,r().v3)(),c=l.currentUser.id,[{status:p,value:m}]=(0,d().Yb)((async()=>(0,h().$g)()),[]),g=(0,a().K8)((()=>{var e;if("resolved"===p)return null==m||null===(e=m.getPresencesForBlock(t.id))||void 0===e?void 0:e.find((e=>e.blockId===t.id))}),[m,p,t.id]),f=(0,a().K8)((()=>{const e=l.currentUser.id;if(!e)return;const r=s||(0,k().xm)(o)?(0,k().PZ)({pageVisitStore:n,presenceStore:o}):[];let a=(null==n?void 0:n.state.totalCount)??r.length;const c=[],d=[];for(const t of r)t.userId!==e?(0,k().dp)(l,t)?c.push(t):d.push(t):a--;!(0,w().rD)({environment:l,store:t})&&t.isNavigableBlock()&&(0,_().BP)(t,l,l.device)&&"resolved"===p&&null!=g&&g.present&&c.push(g);const u=[...V(c).reverse(),...V(d).reverse()],m=j(i)-1;return{visibleUsers:u.slice(0,m),hiddenUsers:u.slice(m),totalCount:a,hasMore:Boolean(null==n?void 0:n.state.hasMore)}}),[n,o,l,s,i,t,p,g],{useDeepEqual:!0}),{visibleUsers:v,hiddenUsers:S,hiddenUsersCount:A,hasMoreHiddenUsers:C,isEveryUserStoreReady:T}=(0,a().K8)((()=>{if(!c)return{};const{visibleUsers:e=[],hiddenUsers:n=[]}=f??{},o=[c,...e.map((e=>e.userId)),...n.map((e=>e.userId))].map((e=>z(e,t)));return{visibleUsers:e,hiddenUsers:n,hiddenUsersCount:Number(null==f?void 0:f.totalCount)-e.length,hasMoreHiddenUsers:Boolean(null==f?void 0:f.hasMore),isEveryUserStoreReady:o.every((e=>e.isReady()||(0,u().MF)(e.id)))}}),[c,f,t]),M=(0,a().O$)(x().b),P=(0,y().useIsDictatingToPage)(t),B=!(0,a().O$)(I().e);if(!c||!f||!T||B)return null;if(0===v.length&&0===S.length)return P?(0,D.jsx)("div",{style:H({environment:l,isShowingTabBar:M,isShowingInPostFeed:s}),children:(0,D.jsx)(b().hq,{enableClickToScroll:!0,rootStore:t})}):null;{const e=[...v];return e.reverse(),(0,D.jsxs)("div",{style:H({environment:l,isShowingTabBar:M,isShowingInPostFeed:s}),children:[A>0&&(0,D.jsx)(G,{rootStore:t,hiddenUsers:S,hiddenUsersCount:A,hasMore:C}),e.map((e=>(0,D.jsx)(X,{userData:e,rootStore:t},e.userId))),!s&&(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(X,{rootStore:t,userData:{userId:c,present:!0}}),(0,D.jsx)(b().hq,{enableClickToScroll:!0,rootStore:t})]})]})}}},126380:(e,t,n)=>{n.d(t,{G:()=>r});var o=()=>n(645873);const i=new(o().O2)("codeBlockValue",(()=>n.e(69734).then(n.bind(n,849332)))),r=(0,o()._h)(i,(e=>e.CodeBlockValueWithDeps))},126818:(e,t,n)=>{n.d(t,{g:()=>o});const o=(0,n(340498).xh)("checkmarkCircle",{default:{loader:()=>n.e(6637).then(n.bind(n,706637))},small:{loader:()=>n.e(31343).then(n.bind(n,331343))},mini:{loader:()=>n.e(78369).then(n.bind(n,878369))},large:{loader:()=>n.e(18183).then(n.bind(n,18183))}})},128265:(e,t,n)=>{n.d(t,{G:()=>a,n:()=>s});var o=n(296540),i=()=>n(484714),r=()=>n(449506);async function a(e){const t=await r().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return!1;const n=t.data;return!(!(o=n)||!("company_employee_count"in o))&&parseInt(o.company_employee_count)>99;var o}function s(){const e=(0,i().v3)(),[t,n]=(0,o.useState)(void 0);return(0,o.useEffect)((()=>{a(e).then((e=>{n(e)})).catch((()=>{}))}),[e]),Boolean(t)}},128295:(e,t,n)=>{n.d(t,{Ay:()=>w,a6:()=>S});n(898992),n(354520),n(581454),n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(584262),s=()=>n(681873),l=()=>n(854150),c=()=>n(496603),d=()=>n(284371),u=()=>n(492414),p=()=>n(108944),m=()=>n(962730),g=()=>n(630116),f=()=>n(296798),v=()=>n(16006),h=()=>n(859428),_=n(474848);const b={paddingLeft:4,paddingRight:4};function y(e,t){const n=p().fU(e);return n.reverse(),n.filter((n=>{if(n.table===l().yK)return!t;if(n.id===e.id)return!1;const o=n.getCollectionStore();return!(e instanceof g().md&&o&&o.id===e.id)}))}function S(e){return y(e).length>0}const w=function(e){let{store:t,extraLength:n,hideTeam:a,textColor:l,innerStyle:d,isLink:u,onClick:p,highlighter:m,enableHoverAncestor:f,showFullPathInTooltip:v,style:h,tooltipStyle:b,tooltipDividerStyle:S,left:w,right:k}=e;const I=(0,r().DP)(),A=(0,o().v3)(),C=2+(n?Math.floor(n):0),T=Math.ceil(C/2),B=C-T,E=(0,i().K8)((()=>y(t,a)),[a,t]).filter((e=>{if(e instanceof g().Bv||e instanceof g().h4)return!0}));if(0===E.length)return null;const D=Math.ceil(E.length/2),N=c().s(E,Math.min(D,T)),L=c().O6(E,Math.min(E.length-D,B)),O=c().oE([...N.map((e=>(0,_.jsx)(P,{store:e,textColor:l,innerStyle:d,isLink:u,onClick:p,highlighter:m,enableHoverAncestor:f},`${e.table}:${e.id}`))),E.length>C&&(0,_.jsx)(R,{showFullPathInTooltip:v,textColor:l,style:h,highlighter:m,tooltipStyle:b,innerStyle:d,tooltipDividerStyle:S,leftovers:E.slice(N.length,E.length-L.length)},"ellipsis"),...L.map((e=>(0,_.jsx)(P,{store:e,textColor:l,innerStyle:d,isLink:u,onClick:p,highlighter:m,enableHoverAncestor:f},`${e.table}:${e.id}`)))]);return(0,_.jsxs)("div",{style:{display:"flex",...M(A,I,l),...h},children:[w,(0,s().A)(O,(e=>(0,_.jsx)(x,{innerStyle:d},e))),k]})};function k(e){let{style:t}=e;return(0,_.jsx)("span",{style:t,children:"/"})}function I(e){let{handlers:t}=e;return(0,_.jsx)("div",{...t,children:"..."},"ellipsis")}function x(e){let{innerStyle:t}=e;return(0,_.jsx)(k,{style:{...b,...t}})}function A(e){let{innerStyle:t,tooltipDividerStyle:n}=e;return(0,_.jsx)(k,{style:{...b,...t,...n}})}function C(e){return{fontWeight:d().Wy.medium,color:e.text.contrastPrimary}}function T(e,t,n){return t||{color:n?e.text.contrastSecondary:e.text.contrastPrimary}}function M(e,t,n){const{device:o}=e;return{fontSize:o.isMobile?d().J.UISmall.mobile:d().J.UISmall.desktop,color:n??t.text.tertiary,overflow:"hidden"}}function P(e){let{store:t,textColor:n,innerStyle:s,isLink:l,onClick:c,highlighter:d,enableHoverAncestor:p}=e;const m=(0,r().DP)(),h={...M((0,o().v3)(),m,n),...s},b=(0,i().K8)((()=>!l||t instanceof g().h4?void 0:(0,u().Ay)({store:t,pageVisitSource:a().y8.Breadcrumb})),[l,t]);return!l||t instanceof g().h4?(0,_.jsx)(v().A,{store:t,style:h,highlighter:d,enableHover:p}):(0,_.jsx)(f().A,{href:b,onClick:c&&(()=>c(t.id)),children:(0,_.jsx)(v().A,{store:t,style:h,highlighter:d})})}function B(e){let{store:t,highlighter:n,textColor:i,tooltipStyle:a}=e;const s=(0,r().DP)(),l={...M((0,o().v3)(),s,i),...T(s,a,n)},c=n&&{...n,style:C(s)};return(0,_.jsx)(v().A,{store:t,style:l,highlighter:c})}function R(e){let{leftovers:t,showFullPathInTooltip:n,textColor:i,style:a,highlighter:l,tooltipStyle:c,innerStyle:d,tooltipDividerStyle:u}=e;const p=(0,r().DP)(),g=(0,o().v3)();return n&&t.length>0?(0,_.jsx)(h().A,{placement:m().W.Bottom,render:e=>(0,_.jsx)(I,{handlers:e}),renderTooltip:()=>(0,_.jsx)("div",{style:{display:"flex",...M(g,p,i),...a},children:(0,s().A)(t.map((e=>(0,_.jsx)(B,{store:e,highlighter:l,textColor:i,tooltipStyle:c},`${e.table}:${e.id}`))),(e=>(0,_.jsx)(A,{innerStyle:d,tooltipDividerStyle:u},e)))})},"ellipsis"):(0,_.jsx)(I,{})}},128427:(e,t,n)=>{n.d(t,{Y:()=>r});var o=()=>n(989423),i=()=>n(476492);function r(e){const{environment:t,collectionContextStore:n,...r}=e,a=(0,i().sl)(n)||{};o().vd(t,"convert_db_complete",{...a,...r})}},128713:(e,t,n)=>{n.d(t,{qh:()=>B,q5:()=>P,N8:()=>T,oV:()=>S,TG:()=>y,uY:()=>G,Z4:()=>$,V$:()=>Y,ZR:()=>W,Qw:()=>C});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(430670),n(581454);var o=n.n(n(625473)),i=()=>n(496603),r=()=>n(534177),a=()=>n(319954),s=()=>n(700500),l=()=>n(713998),c=()=>n(869190),d=()=>n(315771),u=()=>n(683259),p=()=>n(777447),m=()=>n(792071),g=()=>n(179034);var f=()=>n(335098),v=()=>n(343666),h=()=>n(798880),_=()=>n(919709),b=()=>n(695608);function y(e){const t=_()._XS(e);return"a"===t?"[":"b"===t?"**":"i"===t?"*":"c"===t?"`":"s"===t?"~~":"e"===t?"$":""}function S(e,t,n){const o=_()._XS(e);if(_().sh$(e)){const o=_().cQR(e),i=(0,p().lX)({...n,url:o});return`](${(i?t({toPageId:i}):o)||""})`}return"b"===o?"**":"i"===o?"*":"c"===o?"`":"s"===o?"~~":"e"===o?"$":""}function w(e){const{annotation:t,exportArgs:n}=e,{getRecordValue:o,userTimeZone:i,getExportedPathToPage:a,intl:s,transformAnnotation:l}=n,d=m().b4_.fromGetRecordValueFn(o);if(l){const e=l(t,n);if("string"==typeof e)return e}if(_().rie(t)){const e=_().NcG(t),n=o({table:h().oo,id:e});return`@${(0,b().c6)(s,n)}`}if(_().jIt(t)){const e=_().v55(t),i=o({table:g().ev,id:e});if(i){return`[${C({block:i,exportArgs:n})}](${a({toPageId:e})})`}}else if(_().nNl(t)){const e=_().qS0(t);var p;if(e)return null===(p=d(e))||void 0===p?void 0:p.getRenderTitle()}else{if(_().rDy(t)){var f;const e=_().ZrY(t),i=o({table:v().SN,id:e,spaceId:n.root.spaceId});return null==i||null===(f=i.text)||void 0===f?void 0:f.toString()}if(_().qsB(t)){const{date_format:e,time_format:o,...r}=_().K7D(t);return(0,c().ZF)({value:r,date_format:e,time_format:o,userTimeZone:i,allowRelativeDates:!1,intl:n.intl})}if(_().gir(t))return _().U35(t);if(_().RaC(t)){const e=(0,u().Pf)({annotation:t,exportArgs:n});if(e)return e}else if(_().JCc(t)){var y;if("everyone"===(null===(y=_().FLg(t))||void 0===y?void 0:y.mentionType))return"everyone";const e=(0,u().nZ)({annotation:t,exportArgs:n});if(e)return e}else{if(_().N53(t)){var S;const e=_().T$c(t);return null===(S=o({table:g().ev,id:e,spaceId:n.root.spaceId}))||void 0===S||null===(S=S.format)||void 0===S?void 0:S.original_url}if(_().bZo(t))return"";if(_().ik2(t)){const{href:e}=_().q1R(t);return e}if(_().jcO(t)||_().sh$(t)||_().S4U(t)||_().iQL(t)||_().I1e(t)||_().XkZ(t)||_().jIt(t)||_().EQ8(t)||_().YuY(t)||_().rlz(t)||_().go0(t)||_().lfl(t)||_().tI_(t)||_().iz3(t)||_().s1Y(t)||_().Qmu(t)||_().Si1(t)||_().fL_(t)||_().$ch(t)||_().zpJ(t)||_().HPQ(t))return;(0,r().HB)(t)}}}function k(e){const t=/^\s+/.exec(e);return t?t[0]:""}function I(e){const t=/\s+$/.exec(e);return t?t[0]:""}function x(e){const t=I(e);return t.length>0?e.slice(0,-1*t.length):e}function A(e){const t=k(e);return e.slice(t.length)}function C(e){const{block:t,exportArgs:n}=e;return W({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().title),exportArgs:n})}function T(e){const{block:t,exportArgs:n}=e,{getRecordValue:o}=n,r=t&&t.content?t.content:[];return i().oE(r.map((t=>V({block:o({table:g().ev,id:t}),exportArgs:{...n,blockId:t},visitedBlock:e.visitedBlock}))))}function M(e){return e.split("\n")}function P(e){const{block:t,exportArgs:n}=e,o=_().RQ(m().Bj6.fromBlock(t).getProperties().caption);return o.length>0?[{text:W({textValue:o,exportArgs:n}),breakLines:!0,children:[]}]:[]}function B(e){const{block:t,exportArgs:n}=e;return W({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().caption),exportArgs:n})}function R(e){var t;const{block:n,exportArgs:o}=e;return{text:C({block:n,exportArgs:o}),prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:T(e)}}function E(e){return{text:"",breakLines:!0,children:T(e)}}function D(){}function N(e){var t;const{block:n,exportArgs:o}=e;return{text:`# ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:T(e)}}function L(e){var t;const{block:n,exportArgs:o}=e;return{text:`- ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!1,childrenPrefix:j,children:T(e)}}function O(e){const{block:t,exportArgs:n}=e,{getExportedRenderAsset:o}=n,{source:i}=m().Bj6.fromBlock(t).getProperties(),r=_().q4_(i),a=o({fromBlockId:n.blockId,toFileURI:r});return{text:`[${B(e)||C({block:t,exportArgs:n})||a}](${a})`,breakLines:!0,children:P(e)}}function U(e){const{block:t,exportArgs:n}=e,{getRecordValue:o,getExportedPathToPage:i,userTimeZone:r,intl:a}=n;if("collection_view"===t.type||"collection_view_page"===t.type){return{text:`[${(0,u()._z)({blockId:t.id,getRecordValue:o,userTimeZone:r,intl:a})}](${i({toPageId:t.id,exportFileExt:".csv"})})`,breakLines:!0,children:[]}}}const F={text:R,encrypted_text:R,header:N,sub_header:function(e){var t;const{block:n,exportArgs:o}=e;return{text:`## ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:T(e)}},sub_sub_header:function(e){var t;const{block:n,exportArgs:o}=e;return{text:`### ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:T(e)}},quote:function(e){var t;const{block:n,exportArgs:o}=e;return{text:`> ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,childrenPrefix:"> ",children:T(e)}},bulleted_list:L,toggle:L,to_do:function(e){var t;const{block:n,exportArgs:o}=e;let i;return i=l().wu(m().Bj6.fromBlock(n).getProperties().checked)?"- [x] ":"- [ ] ",{text:`${i} ${C({block:n,exportArgs:o}).trim()}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!1,childrenPrefix:j,children:T(e)}},numbered_list:function(e){var t;const{block:n,exportArgs:o}=e,{getRecordValue:r}=o;return{text:`${function(e){const{block:t,getRecordValue:n}=e,o=t.parent_id,r=o?n({table:g().ev,id:o}):void 0;let a;var l;a=r?i().oE(null===(l=r.content)||void 0===l?void 0:l.map((e=>n({table:g().ev,id:e})))):[];const c=i().SL(a,(e=>e.id===t.id)),d=i().di(a,0,c),u=i().Kl(d,(e=>e.type!==s().xd.numberedList));return d.length-(u+1)}({block:n,getRecordValue:r})+1}. ${C({block:n,exportArgs:o})}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!1,childrenPrefix:j,children:T(e)}},code:function(e){var t;const{block:n,exportArgs:o}=e,i=C({block:n,exportArgs:o});return{text:`${`\`\`\`${n.properties&&n.properties.language?function(e){const t=_().q4_(e);if(!t)return"";const n=f().y[t];return void 0===n||n===f().y["Plain Text"]?"":n}(n.properties.language):""}\n${M(i).join("\n")}\n\`\`\``}`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:[]}},page:function(e){const{block:t,exportArgs:n}=e;if(t.id===n.navigableBlockId&&!n.renderParentBlockId)return N(e);const{getExportedPathToPage:o}=n;return{text:`[${C({block:t,exportArgs:n})}](${o({toPageId:t.id})})`,breakLines:!0,children:[]}},image:function(e){const{block:t,exportArgs:o}=e,{getExportedRenderAsset:i}=o,{source:r}=m().Bj6.fromBlock(t).getProperties(),a=_().q4_(r),s=i({fromBlockId:o.blockId,toFileURI:a}),l=function(e){const{block:t,exportArgs:n}=e;return W({textValue:_().RQ(m().Bj6.fromBlock(t).getProperties().alt_text),exportArgs:n})}(e)||B(e)||C({block:t,exportArgs:o});return{text:(0,n(304740).rS)({url:a})?`![${l}](${s})`:`[${l}](${s})`,breakLines:!0,children:P(e)}},video:O,embed:O,bookmark:function(e){const{block:t,exportArgs:n}=e,{link:o}=m().Bj6.fromBlock(t).getProperties(),i=l().MO(o);return{text:`[${C({block:t,exportArgs:n})}](${i})`,breakLines:!0,children:P(e)}},file:O,external_object_instance:function(e){var t;const{block:n}=e,o=null===(t=n.format)||void 0===t?void 0:t.original_url;if(o)return{text:`[${o}](${o})`,breakLines:!0,children:[]}},tweet:O,maps:O,gist:O,framer:O,invision:O,mixpanel:O,drive:function(e){const{block:t}=e;if(t.format&&t.format.drive_properties){const{url:e,title:n}=t.format.drive_properties;return{text:`[${n}](${e})`,breakLines:!0,children:[]}}return O(e)},figma:O,loom:O,pdf:O,typeform:O,codepen:O,audio:O,divider:function(){return{text:"---",breakLines:!0,children:[]}},equation:function(e){var t;const{block:n,exportArgs:o}=e;let i="";return n&&n.properties&&n.properties.title&&(i=_().q4_(n.properties.title)),{text:`$$\n${i}\n$$`,prefix:null===(t=o.getPrefixForBlock)||void 0===t?void 0:t.call(o,n),breakLines:!0,children:[]}},collection_view:U,collection_view_page:U,column_list:E,column:E,factory:D,personal_home_page:D,form:D,post:D,copy_indicator:D,breadcrumb:D,link_to_collection:D,link_to_page:D,callout:function(e){var t,o;const{block:i,exportArgs:r}=e,a=C({block:i,exportArgs:r}),s=null===(t=i.format)||void 0===t?void 0:t.page_icon;return{text:`${(0,n(945778).A)(s)?s:"string"==typeof s?function(e){let{source:t,width:n=40,exportArgs:o}=e;const{getExportedRenderAsset:i}=o,r=i({fromBlockId:o.blockId,toFileURI:t});return`<img src="${r}" alt="${r}" width="${n}px" />`}({source:s,exportArgs:r}):""} ${a}`.trim(),prefix:null===(o=r.getPrefixForBlock)||void 0===o?void 0:o.call(r,i),breakLines:!0,children:T(e),htmlTag:"aside"}},table_of_contents:D,whimsical:O,miro:O,abstract:O,sketch:O,excalidraw:O,replit:O,hex:O,deepnote:O,alias:function(e){const{block:t,exportArgs:o}=e,{getRecordValue:i}=o;if(t.format&&t.format.alias_pointer&&(0,n(696706).Yt)(t.format.alias_pointer,g().ev)){const n=i(t.format.alias_pointer);if(n)return V({block:n,exportArgs:{...o,renderParentBlockId:t.id,blockId:t.format.alias_pointer.id},visitedBlock:e.visitedBlock})}},slide:E,transclusion_container:E,transclusion_reference:function(e){const{block:t,exportArgs:n}=e,{getRecordValue:o}=n;if(t.format&&t.format.transclusion_reference_pointer){const i=o(t.format.transclusion_reference_pointer);if(i)return V({block:i,exportArgs:{...n,renderParentBlockId:t.id,blockId:t.format.transclusion_reference_pointer.id},visitedBlock:e.visitedBlock})}},table:function(e){var t,n;const{block:o,exportArgs:i}=e,{getRecordValue:r}=i,a=(null===(t=o.format)||void 0===t||null===(t=t.table_block_column_order)||void 0===t?void 0:t.length)||0,s=o.content,l={text:"",breakLines:!0,children:[]};if(0===a||!s)return l;const c=s.map((t=>{const n=r({table:g().ev,id:t});return n&&V({block:n,exportArgs:{...i,blockId:t,renderParentBlockId:o.id},visitedBlock:e.visitedBlock})||l})),d={text:`| ${[...Array(a).keys()].map((()=>"---")).join(" | ")} |`,breakLines:!1,children:[]};return{text:"",prefix:null===(n=i.getPrefixForBlock)||void 0===n?void 0:n.call(i,o),breakLines:!0,children:[c[0],d,...c.slice(1)]}},table_row:function(e){var t,n;const{block:o,exportArgs:i}=e,{getRecordValue:r,renderParentBlockId:a}=i;if(!a)return;const s=r({table:g().ev,id:a}),c=null==s||null===(t=s.format)||void 0===t?void 0:t.table_block_column_order;if(!c)return;return{text:`| ${c.map((t=>{const n=l().yQ(o,t);return n?W({textValue:n,exportArgs:e.exportArgs}):void 0})).join(" | ")} |`,prefix:null===(n=i.getPrefixForBlock)||void 0===n?void 0:n.call(i,o),breakLines:!1,children:[]}},tab:function(e){var t;const{block:n,exportArgs:o}=e,{getRecordValue:r}=o;return{text:`${i().oE(null===(t=n.content)||void 0===t?void 0:t.flatMap((e=>{const t=r({table:g().ev,id:e});if(t)return[C({block:t,exportArgs:o}),H(T({block:t,exportArgs:o})).markdown.trim()]}))).join("\n\n")}\n\t\t`,breakLines:!0,children:[]}},external_object_instance_page:D,button:D,ai_block:E,drawing:D,workflow:D,transcription:D,person_profile:D};function V(e){const{block:t,forceRenderAsText:n,exportArgs:{transformBlockMapping:o}}=e;if(t&&t.type){if(e.visitedBlock){if(e.visitedBlock.has(t.id))return;e.visitedBlock.add(t.id)}const i=n&&(0,s().Db)(t.type,t.format)?(null==o?void 0:o.text)??F.text:(null==o?void 0:o[t.type])??F[t.type];if(i)return i(e)}}const j="    ";function z(e){const t=e.indexOf(" ");return-1===t?[e,""]:[e.slice(0,t),e.slice(t+1)]}function H(e,t){let n="";const o=[];let i=0;for(const r of e){if(!r){o.push("");continue}r.breakLines&&(n+="\n"),r.prefix&&(n+=`${r.prefix}`),r.htmlTag&&(n+=`<${r.htmlTag}>\n`),r.text&&(n+=`${r.text}\n`),r.breakLines&&(n+=r.childrenPrefix?`${r.childrenPrefix}\n`:"\n");let e=H(r.children).markdown;const t=r.childrenPrefix;if(e&&t){const n=M(e);e=[...n.slice(0,-1).map((e=>{if(r.prefix){const[n,o]=z(e);return n+t+o}return t+e})),...n.slice(-1)].join("\n")}n+=`${e}`,r.htmlTag&&(n+=`</${r.htmlTag}>\n\n`),r.suffix&&(n+=`${r.suffix}\n\n`),n=n.replace(/[\n]{3,}/g,"\n\n"),o.push(n.slice(i)),i=n.length}if(t){for(let e=0;e<o.length&&(o[e]=o[e].trimStart(),!o[e]);++e);for(let e=o.length-1;e>=0;--e)if(o[e]=o[e].trimEnd(),o[e]){o[e]+="\n";break}n=o.join("")}return{markdown:n,tokenCounts:o.map((e=>e.length))}}function W(e){const{textValue:t,exportArgs:n}=e;let s="";const l=_().RQ(t);let c=[];for(const p of l){const e=a().r.normalize(_().uPN(p)),t=(0,d().H)(c,e,(e=>o()(e))),l=_().N8A(p),u=e.map((e=>w({annotation:e,exportArgs:n}))).find((e=>(0,r().O9)(e))),m=u??l,g=I(s);s=x(s),t.deleted.reverse();for(const o of t.deleted)s+=S(o,n.getExportedPathToPage,n);s+=g,s+=k(m);for(const n of t.created)s+=y(n);s+=A(m);c=[...i().kP(c,e,((e,t)=>i().n4(e,t))),...t.created]}const u=I(s);s=x(s),c.reverse();for(const o of c)s+=S(o,n.getExportedPathToPage,n);return s+=u,s}function q(e,t){const n=(new e).match(t)||[];if(0===n.length)return t;let o="",i=0;for(const r of n){const e=0===r.index||"<"!==t[r.index-1],n=r.lastIndex===t.length||">"!==t[r.lastIndex],a=Boolean(t.slice(r.index).match(/^[a-z][a-z]+:/i)),s=e&&n&&a;o+=t.slice(i,r.index),s&&(o+="<"),o+=r.raw,s&&(o+=">"),i=r.lastIndex}return o+=t.slice(i),o}function K(e){return e.replace(/\\/g,"\\\\")}function G(e){const{MarkdownIt:t,LinkifyIt:n,markdown:o,plugin:i,disable:r,options:a}=e,s=new t({linkify:!0,...a});return r&&s.disable(r,!1),i&&s.use(i),s.render(K(q(n,o)))}function $(e){const{MarkdownIt:t,LinkifyIt:n,markdown:o,plugin:i}=e,r=new t({linkify:!0});return i&&r.use(i),r.renderInline(K(q(n,o)))}function Y(e,t){const n=new Set;return H(i().oE(e.map((e=>V({block:e,exportArgs:{...t,blockId:e.id},visitedBlock:n}))))).markdown.trim()}},129522:(e,t,n)=>{n.d(t,{K:()=>i});n(898992),n(354520),n(672577);class o extends(()=>n(959180))().A{findBlockFromStore(e){return this.find((t=>t.getBlockStore()===e))}findAllBlocksFromStore(e){return this.filter((t=>t.getBlockStore()===e))}findBlockFromStoreWithMethod(e,t){return this.find((n=>n.getBlockStore()===e&&"function"==typeof n[t]))}findBlockFromId(e){return this.find((t=>{const n=t.getBlockStore();return n&&n.id===e}))}findNodeFromStore(e){const t=this.findBlockFromStore(e);if(t)return t.getNode()}getRect(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findCollectionViewBlockFromStore(e){return this.find((t=>t.getBlockStore()===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t))}findCollectionViewBlockFromId(e){return this.find((t=>{var n;return Boolean((null===(n=t.getBlockStore())||void 0===n?void 0:n.id)===e&&("collection_view"===t.renderedType||"collection_view_page"===t.renderedType)&&"collectionContextStore"in t)}))}}const i=new o;(0,n(604341).exposeDebugValue)("GlobalBlockRegistry",i)},130382:(e,t,n)=>{n.d(t,{Mn:()=>a,YH:()=>s,jX:()=>i,lH:()=>r});var o=()=>n(720665);const i=(0,n(959013).YK)({year:{id:"timeUtils.durationDescriptor.intervalYear",defaultMessage:"{numYears, plural, one {1 year} other {{numYears} years}}"},week:{id:"timeUtils.durationDescriptor.intervalWeek",defaultMessage:"{numWeeks, plural, one {1 week} other {{numWeeks} weeks}}"},day:{id:"timeUtils.durationDescriptor.intervalDay",defaultMessage:"{numDays, plural, one {1 day} other {{numDays} days}}"},hour:{id:"timeUtils.durationDescriptor.intervalHour",defaultMessage:"{numHours, plural, one {1 hour} other {{numHours} hours}}"},minute:{id:"timeUtils.durationDescriptor.intervalMinute",defaultMessage:"{numMinutes, plural, one {1 minute} other {{numMinutes} minutes}}"},second:{id:"timeUtils.durationDescriptor.intervalSecond",defaultMessage:"{numSeconds, plural, one {1 second} other {{numSeconds} seconds}}"}});function r(e,t){const n=Math.floor(e/o().Gq),r=Math.floor(e/o().lG),a=Math.floor(e/o().nD),s=Math.floor(e/o().pT),l=Math.floor(e/o().Xb),c=Math.floor(e/o().TD);return n>=1?t.formatMessage(i.year,{numYears:n}):r>=1?t.formatMessage(i.week,{numWeeks:r}):a>=1?t.formatMessage(i.day,{numDays:a}):s>=1?t.formatMessage(i.hour,{numHours:s}):l>=1?t.formatMessage(i.minute,{numMinutes:l}):t.formatMessage(i.second,{numSeconds:c})}function a(e){return Math.floor((Date.now()-e)/864e5)}function s(e){return Math.floor((Date.now()-e)/6e4)}},131448:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(941795);class o extends(()=>n(757695))().default{getInitialState(){return{messages:new Map,forcedMessages:new Set}}isVisible(e){return void 0!==this.state.messages.get(e)}isForced(e){return this.state.forcedMessages.has(e)}getMessagesForPlacement(e){return Array.from(this.state.messages.values()).filter((t=>(0,n(722559).Q3)(t)===e))}addMessage(e,t){const n=new Map(this.state.messages);n.set(e.key,e);const o=new Set(this.state.forcedMessages);t&&o.add(e.key),this.setState({messages:n,forcedMessages:o})}removeMessage(e){const t=new Map(this.state.messages),n=new Set(this.state.forcedMessages);n.has(e)&&n.delete(e),t.has(e)&&t.delete(e),this.setState({messages:t,forcedMessages:n})}emptyMessages(){return this.state.messages.values().filter((e=>"empty"===e.type)).toArray()}}const i=new o},131581:(e,t,n)=>{n.d(t,{Ju:()=>F,VN:()=>V,en:()=>O,p6:()=>U});n(898992),n(672577),n(814603),n(147566),n(198721);var o=()=>n(908006),i=()=>n(700500),r=()=>n(304740),a=()=>n(522419),s=()=>n(861017),l=()=>n(179034),c=()=>n(869558),d=()=>n(919709),u=()=>n(496603),p=()=>n(449506),m=()=>n(780054),g=()=>n(97270),f=()=>n(186445),v=()=>n(943846),h=()=>n(906537),_=()=>n(129522),b=()=>n(110955),y=()=>n(351360),S=()=>n(176106),w=()=>n(508496),k=()=>n(375447),I=()=>n(630116),x=()=>n(502438),A=()=>n(292167),C=()=>n(437219),T=()=>n(541372),M=()=>n(443120),P=()=>n(896628),B=()=>n(222299),R=()=>n(246826),E=()=>n(797265),D=()=>n(319975),N=()=>n(751156),L=()=>n(62287);function O(e){const t=e.getRecordStoreAtRootPath();return t instanceof I().Bv&&void 0!==t.getAssociatedCollectionStore()}function U(e){const{environment:t,textStore:n,url:o,oldTextValue:i,urlSelection:a}=e;if(b().A.state.open||g().A.state.open||k().A.state.open||S().A.state.open||O(n)&&r().Vp({url:o,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName}))return;const s=h().get();if(!s)return;const l=h().getRect(s);if(!l)return;const c=()=>{S().A.setState({open:!0,willOpen:!1,loading:!1,textStore:n,url:o,oldTextValue:i,urlSelection:a,selectionRect:l}),C().wQ(t,{url:o})},d=w().default.checkGate({gateName:"mobile_embed_menu_cursor_fix"});!t.device.isTablet&&d?(S().A.setState({open:!1,willOpen:!0,loading:!1}),setTimeout(c,0)):c()}async function F(e){const{environment:t}=e,n=S().A.state;if(n.open){const{url:b,textStore:w,oldTextValue:k}=n,O=x().default.state.stores,U=O[0];if(!U)return;const F=(0,a().Zv)(b)||(0,a().ku)(b,m().A.secureFileConfig.hostname),V=F?(0,a().xm)(F):b,j=(0,s().parseRoute)({url:V,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,isMobile:t.device.isMobile,protocol:m().A.protocol,currentUrl:window.location.href});if((0,s().Jx)(j))await N().createAndCommitAsync({environment:t,userAction:"embedMenuActions.embedPageAlias",waitForServerCommit:!1,perform:async i=>{let r;if(D().R9({environment:t,store:w,value:k,transaction:i}),j.peekViewBlockId){const e=I().Bv.createChildStore(w,{table:l().ev,id:j.peekViewBlockId});await e.load(),e.isPageBlock()&&(r=e)}if(!r&&"page"===j.name&&j.blockId&&(r=I().Bv.createChildStore(w,{table:l().ev,id:j.blockId})),r){const a="page"===j.name?j.scrollToBlockId:void 0,s="page"===j.name?j.collectionViewId:void 0;if("mention-page"===e.type){const e=r.getRecordModel({id:r.id,table:l().ev});D().Gf({environment:t,editorMode:"default",store:w,selection:{startIndex:n.urlSelection.startIndex,endIndex:n.urlSelection.startIndex},annotation:d().ld4(a??r.id,null==e?void 0:e.space_id),transaction:i,analyticsFrom:"block"})}else if("create-transclusion"===e.type){if(!a)return;T().Ce({environment:t,blocks:x().default.state.stores,copiedBlockIds:[a]})}else if(r.isCollectionView()){const e=s?I().pS.createChildStore(r,{table:c().Gy,id:s}):void 0;await Promise.all([r.load(),e?e.load():void 0]);const n=e?e.getCollectionStore():r.getCollectionStore();n&&(await n.load(),B().oT({environment:t,store:U,collectionStore:n,collectionViewStore:e,transaction:i}))}else{const n=U.getParentBlockStore();if(n){const o=A().s({environment:t,parentBlockStore:n,targetStore:r,transaction:i,..."page-preview"===e.type&&{isPagePreview:!0}});E().LE({environment:t,blocksToInsert:[o],target:O,transaction:i,replaceEmptyTextBlock:!0}),"form"===e.type&&(x().default.reset(),C().ol(t,{url:b,type:e.type,form_id:r.id,block_id:o.id}))}}o().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:O,transaction:e})}})}))}}});else if(e.type===i().xd.bookmark||"teamsInvite"===j.name){const{performResult:e}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var n;D().R9({environment:t,store:w,value:k,transaction:e});const o=R().Wv({environment:t,type:i().xd.bookmark,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==O.length?O[O.length-1].pointer.spaceId:null===(n=(0,f().ZO)())||void 0===n?void 0:n.pointer.spaceId}),r=E().LE({environment:t,blocksToInsert:[o],target:O,transaction:e,replaceEmptyTextBlock:!0});return P().zA({stores:[o],transaction:e,update:{bookmark_loading_ttl:Date.now()}}),r}});o().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:O,transaction:e})}})}));const n=e[0];"teamsInvite"===j.name?await M().Ht({environment:t,store:n,url:b,teamId:j.teamId}):await M().Ht({environment:t,store:n,url:b})}else if(e.type===i().xd.drive){const{performResult:e}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var n;D().R9({environment:t,store:w,value:k,transaction:e});const o=R().Wv({environment:t,type:i().xd.drive,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==O.length?O[O.length-1].pointer.spaceId:null===(n=(0,f().ZO)())||void 0===n?void 0:n.pointer.spaceId});return E().LE({environment:t,blocksToInsert:[o],target:O,transaction:e,replaceEmptyTextBlock:!0})}});o().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:O,transaction:e})}})}));const n=e[0];o().default.afterNextFlush((()=>{const e=_().K.find((e=>e.getBlockStore()===n));e&&e.initializeGoogleDriveBlockFromUrl(b)}))}else if("link-mention"===e.type){var r,g;S().A.setState({open:!1,willOpen:!1,loading:!0});const e=await p().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:V,spaceId:(null===(r=y().default.state.currentSpaceStore)||void 0===r?void 0:r.id)??(null===(g=y().default.state.mainEditorCurrentBlockStore)||void 0===g?void 0:g.getSpaceId()),source:"link_mention_activate"}});if("success"===e.type){const o=e.data;if("error"in o){const e=d().wmz(d().gru({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:o=>{D().jQ({environment:t,store:w,selection:{startIndex:n.urlSelection.startIndex,endIndex:n.urlSelection.endIndex},transaction:o}),D().yr({environment:t,store:w,tokens:[e],index:n.urlSelection.startIndex,transaction:o})}}),C().vt(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}else{var h;const{title:e,description:i,author_name:r,provider_name:a,images:s,favicon_url:l,iframe:c,height:u,padding:p,padding_top:m}=o,g=d().wmz(d().gru({href:b,title:e||(a||new URL(b).hostname),description:i,link_author:r,link_provider:a,thumbnail_url:s&&s.length>0?null===(h=s[0])||void 0===h?void 0:h.url:void 0,icon_url:l,iframe_url:b.includes("nytimes.com")?void 0:c,height:u,padding:p,padding_top:m}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:e=>{D().jQ({environment:t,store:w,selection:{startIndex:n.urlSelection.startIndex,endIndex:n.urlSelection.endIndex},transaction:e}),D().yr({environment:t,store:w,tokens:[g],index:n.urlSelection.startIndex,transaction:e})}})}}else{const e=d().wmz(d().gru({href:b,title:b.includes("mailto:")?b:new URL(b).hostname}));N().createAndCommit({environment:t,userAction:"embedMenuActions.mention",canUndo:!0,perform:o=>{D().jQ({environment:t,store:w,selection:{startIndex:n.urlSelection.startIndex,endIndex:n.urlSelection.endIndex},transaction:o}),D().yr({environment:t,store:w,tokens:[e],index:n.urlSelection.startIndex,transaction:o})}}),C().vt(t,{domain:b.includes("mailto:")?b:new URL(b).hostname})}}else{const{performResult:n}=N().createAndCommit({userAction:"embedMenuActions.insertedBlocks",environment:t,canUndo:!0,perform:e=>{var n;D().R9({environment:t,store:w,value:k,transaction:e});const o=R().Wv({environment:t,type:i().xd.copyIndicator,inMemoryRecordCache:U.inMemoryRecordCache,transaction:e,spaceId:0!==O.length?O[O.length-1].pointer.spaceId:null===(n=(0,f().ZO)())||void 0===n?void 0:n.pointer.spaceId});return E().LE({environment:t,blocksToInsert:[o],target:O,transaction:e,replaceEmptyTextBlock:!0})}});o().default.afterNextFlush((()=>{N().createAndCommit({userAction:"embedMenuActions.accept",environment:t,canUndo:!0,perform:e=>{E().um({blocks:O,transaction:e})}})}));const r=n[0],a=n=>{N().createAndCommit({environment:t,userAction:"embedMenuActions.accept.insertExtractedData",canUndo:!0,perform:t=>{let o;e.type&&"mention-page"!==e.type&&"create-transclusion"!==e.type&&"link-mention"!==e.type&&"page-preview"!==e.type&&"jira-sync"!==e.type?o=e.type:(o=i().xd.embed,n&&n.media&&("photo"===n.media.type?o=i().xd.image:"video"===n.media.type&&(o=i().xd.video))),L().pd({environment:e.environment,block:r,blockType:o,transaction:t})}}),o().default.afterNextFlush((()=>{const e=_().K.find((e=>e.getBlockStore()===r&&u().Tn(e.embed)));e&&e.embed({originUrl:V,pastedSecureFile:F})}))};v().DB(t,V).then(a)}}V()}function V(){S().A.setState({open:!1,willOpen:!1,loading:!1})}},132867:(e,t,n)=>{n.d(t,{BO:()=>v,MQ:()=>m,Y1:()=>f,b:()=>p,mE:()=>b,oJ:()=>h,pZ:()=>g,v6:()=>_});n(944114),n(898992),n(354520),n(672577),n(581454);var o=()=>n(700500),i=()=>n(179034),r=()=>n(496603),a=()=>n(186445),s=()=>n(494043),l=()=>n(695625),c=()=>n(65269),d=()=>n(468484),u=()=>n(722101);function p(e){const{parentStore:t,blockStore:n,type:o,transaction:i}=e,r=t.getTransclusionReferenceTargetStore()??t,a=r.getContentStores(),l=a.indexOf(n);if(l<=0)return;const c=a[l-1];if(!c)return;if(!y(r)||!y(c))return;if("transclusion_container"===c.getType()||"transclusion_reference"===c.getType()||c.isCalloutV2())return;u().TF({parentStore:r.getContentStore(),childToRemoveStore:n,transaction:i});const{childStore:p}=u().BC({parentStore:c.getContentStore(),appendStore:n,transaction:i});if("self"===o&&!p.isType("table"))for(const s of p.getContentStores().reverse())u().TF({parentStore:p.getContentStore(),childToRemoveStore:s,transaction:i}),u().WH({parentStore:c.getContentStore(),insertStore:s,afterStore:p,transaction:i});return s().BN(c)&&d().A.setOpen(c.id,!0),p}function m(e){const{grandparentStore:t,parentStore:n,blockStore:o,transaction:i}=e,r=t.getTransclusionReferenceTargetStore()??t;if(r.getContentStores().indexOf(n)<0)return;const a=n.getContentStores(),s=a.indexOf(o);if(s<0)return;if(!y(r)||!y(n))return;if("transclusion_container"===n.getType()||"transclusion_reference"===n.getType()||n.isCalloutV2())return;if(y(o))for(let c=s+1;c<a.length;c++){const e=a[c];u().TF({parentStore:n.getContentStore(),childToRemoveStore:e,transaction:i}),u().BC({parentStore:o.getContentStore(),appendStore:e,transaction:i})}u().TF({parentStore:n.getContentStore(),childToRemoveStore:o,transaction:i});const{childStore:l}=u().WH({parentStore:r.getContentStore(),insertStore:o,afterStore:n,transaction:i});return l}function g(e){const{transaction:t}=e,n=e.blocks,o=n[0];if(!o)return;const i=S(o);if(!i)return;const{previousChildStore:r}=i,a=r.getContentStore();return s().BN(r)&&d().A.setOpen(r.id,!0),n.map((e=>{const n=e.getRecordStoreUIParent();null!=n&&n.valueIs(c()._)&&u().TF({parentStore:n,childToRemoveStore:e,transaction:t});return u().BC({parentStore:a,appendStore:e,transaction:t}).childStore}))}function f(e){const{transaction:t}=e;let n=e.blocks;const o=n[0];if(!o)return;const i=w(o);if(!i)return;const{parentBlockStore:a,grandparentBlockStore:s}=i,l=a.getContentStores(),d=s.getContentStore();if(l){let e;for(const[t,o]of l.entries())if(o.id===n[n.length-1].id){e=l.splice(t+1);break}n=r().o8(n).reverse(),n=n.map(((n,o)=>{const i=n.getRecordStoreUIParent();null!=i&&i.valueIs(c()._)&&u().TF({parentStore:i,childToRemoveStore:n,transaction:t});const r=u().WH({parentStore:d,insertStore:n,afterStore:a,transaction:t});if(0===o&&e&&y(n))for(const a of e){const e=a.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&u().TF({parentStore:e,childToRemoveStore:a,transaction:t}),u().WH({parentStore:n.getContentStore(),insertStore:a,transaction:t})}return r.childStore}))}return n}function v(e){const{transaction:t,blocks:n}=e,o=n[0];if(!o)return;const i=a().ZO();if(!i)return;const s=I(i),l=r().SL(s,(e=>e.parentStore===o.getRecordStoreUIParent()&&e.afterStore===o)),c=r().Kl(s,((e,t)=>t<l&&e.parentStore===o.getRecordStoreUIParent())),d=r().Uk(s,((e,t)=>t<c&&!o.uiContains(e.parentStore)));return d?A({blocks:n,listPosition:d,transaction:t}):void 0}function h(e){const{transaction:t,blocks:n}=e,o=r().HV(n);if(!o)return;const i=a().ZO();if(!i)return;const s=I(i),l=r().SL(s,(e=>e.parentStore===o.getRecordStoreUIParent()&&e.afterStore===o)),c=s.find(((e,t)=>t>l&&!o.uiContains(e.parentStore)));return c?A({blocks:n,listPosition:c,transaction:t}):void 0}function _(e){return Boolean(e&&S(e))}function b(e){return Boolean(e&&w(e))}function y(e){const t=a().ao(),n=e.getType(),i=e.getFormat();return n&&((0,o().Z3)(n,i)||e===t||e.isPost())}function S(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(i().ev))return;const n=t.getAncestorRecordStoreAtRootPath();if(null==n||!n.isDefined()||!y(n))return;const o=n.getContentStores(),r=o[o.indexOf(e)-1];return null!=r&&r.isDefined()&&y(r)?{previousChildStore:r}:void 0}function w(e){const t=e.getRecordStoreUIParent();if(null==t||!t.isTable(i().ev))return;const n=t.getAncestorRecordStoreAtRootPath();if(null==n||!n.isDefined()||!y(n))return;const o=n.getRecordStoreUIParent();if(null==o||!o.isTable(i().ev))return;const r=o.getAncestorRecordStoreAtRootPath();return null!=r&&r.isDefined()&&y(r)?{parentBlockStore:n,grandparentBlockStore:r}:void 0}function k(e,t){let n=[];const{store:o}=e.props;if(e.props.canDropAbove&&x(o)){const e=o.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&n.push({parentStore:e})}const i=t.filter((t=>t.getContextClosestSelectable()===e));for(const a of i)n=r().KC(n,k(a,t));if(e.props.canDropBelow&&x(o)){const e=o.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&(e.id===o.id?n.push({parentStore:e}):n.push({parentStore:e,afterStore:o}))}return n}function I(e){let t=[];const n=l().T.getMembersByDOMOrder({filter:()=>!0}),o=e.getContentStores();for(const i of o){const e=n.find((e=>e.props.store===i));e&&(t=r().KC(t,k(e,n)))}return t}function x(e){return"collection"!==e.getParentTable()}function A(e){const{blocks:t,listPosition:n,transaction:o}=e,i=r().o8(t).reverse();for(const r of t){const e=r.getRecordStoreUIParent();null!=e&&e.valueIs(c()._)&&u().TF({parentStore:e,childToRemoveStore:r,transaction:o})}let a;return a=n.afterStore?i.map((e=>u().WH({insertStore:e,afterStore:n.afterStore,parentStore:n.parentStore,transaction:o}).childStore)):i.map((e=>u().Hs({prependStore:e,parentStore:n.parentStore,transaction:o}).childStore)),a}},133033:(e,t,n)=>{n.d(t,{$:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("help",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM8 13.7383C4.85547 13.7383 2.33301 11.209 2.33301 8.06445C2.33301 4.91992 4.84863 2.39746 7.99316 2.39746C11.1377 2.39746 13.667 4.91992 13.6738 8.06445C13.6738 11.209 11.1445 13.7383 8 13.7383ZM7.84277 9.4248C8.21875 9.4248 8.45801 9.21289 8.47852 8.93262C8.47852 8.90527 8.47852 8.87109 8.47852 8.85059C8.49902 8.49512 8.74512 8.25586 9.18945 7.96875C9.85938 7.52441 10.2969 7.13477 10.2969 6.3418C10.2969 5.2002 9.27148 4.55078 8.06152 4.55078C6.89258 4.55078 6.09277 5.08398 5.88086 5.72656C5.83984 5.84277 5.81934 5.95898 5.81934 6.08203C5.81934 6.41016 6.0791 6.61523 6.35254 6.61523C6.60547 6.61523 6.76953 6.5127 6.90625 6.32812L7.01562 6.19141C7.24121 5.81543 7.56934 5.61719 7.97949 5.61719C8.5332 5.61719 8.90918 5.94531 8.90918 6.41016C8.90918 6.84082 8.62207 7.05273 8.04102 7.45605C7.55566 7.79102 7.2002 8.14648 7.2002 8.76855V8.84375C7.2002 9.22656 7.43262 9.4248 7.84277 9.4248ZM7.83594 11.5234C8.27344 11.5234 8.63574 11.2021 8.63574 10.7715C8.63574 10.3408 8.27344 10.0264 7.83594 10.0264C7.3916 10.0264 7.03613 10.3477 7.03613 10.7715C7.03613 11.2021 7.39844 11.5234 7.83594 11.5234Z"})})},133234:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(20489).A)},134060:(e,t,n)=>{n.d(t,{t:()=>r});var o=()=>n(989423),i=()=>n(476492);function r(e,t){const{collectionContextStore:n}=t.optionalAnalyticsProperties||{},r=(0,i().sl)(n)||{},a={from:t.from,block_types:t.draggedTypes,block_count:t.draggedTypes.length,as_copy:t.asCopy||!1,draggable:t.draggableProps,dropzone:t.dropzoneProps,...r};o().vd(e,"drag",a)}},134103:(e,t,n)=>{n.d(t,{t:()=>c});var o=()=>n(847249),i=()=>n(584262),r=()=>n(868840),a=()=>n(492414),s=()=>n(747100),l=()=>n(712505);function c(e){const{scrollToBlockId:t,pageStore:n,isFloatingToc:c}=e,d=(0,o().K8)((()=>Boolean(n&&(0,s().cq)(n))),[n]),u=(0,o().K8)((()=>l().default.getPeekMode()),[]);return{href:(0,o().K8)((()=>{if(void 0!==n&&void 0!==t)return(0,a().J8)({store:n,scrollToBlockId:t,fullyQualified:!1,pageVisitSource:c?i().y8.PageTableOfContents:i().y8.LinkInPage,openInSidePeek:d&&u===r().A,openInCenterPeek:d&&u===r().O})}),[d,c,n,u,t]),replaceHistoryState:!0}}},134206:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(354520),n(581454);var o=()=>n(854150);class i extends(()=>n(757695))().default{getInitialState(){return{initialized:!1}}createTeamStoreFromCache(e){let{environment:t,teamId:i,spaceId:r,userId:a}=e;if(this.state.initialized&&r&&a&&this.state.spaceId===r&&this.state.userId===a)return new(n(95758).h)(t,{table:o().yK,id:i},{inMemoryRecordCache:this.state.inMemoryCache})}initialize(e){let{environment:t,userId:i,spaceId:r,teamIds:a,getRecordWithRole:s}=e;const l=new(n(221844).A)({name:"GlobalEnterpriseAdminTeamsStore"});for(const n of a){const e={table:o().yK,id:n};l.setRecord({pointer:e,userId:i},s(e))}return this.setState({initialized:!0,spaceId:r,userId:i,inMemoryCache:l}),a.map((e=>this.createTeamStoreFromCache({environment:t,teamId:e,spaceId:r,userId:i}))).filter(n(534177).O9)}}const r=new i},134217:(e,t,n)=>{n.d(t,{$C:()=>L,BA:()=>I,Be:()=>$,Bl:()=>q,EX:()=>F,Fq:()=>x,LM:()=>z,Nl:()=>O,RJ:()=>k,Si:()=>V,TQ:()=>W,V$:()=>Z,XK:()=>w,Ye:()=>G,_7:()=>Y,cG:()=>A,cs:()=>U,dW:()=>T,e9:()=>Q,eF:()=>y,eq:()=>R,fk:()=>J,hr:()=>N,jK:()=>B,mG:()=>H,n:()=>M,o2:()=>E,oe:()=>K,pt:()=>X,qC:()=>ee,qc:()=>S,vl:()=>C,z8:()=>P});n(944114),n(898992),n(354520),n(581454),n(296540);var o=()=>n(68263),i=()=>n(322769),r=()=>n(762433),a=()=>n(643819),s=()=>n(807487),l=()=>n(979340),c=()=>n(959013),d=()=>n(780054),u=()=>n(600871),p=()=>n(640653),m=()=>n(351360),g=()=>n(57605),f=()=>n(975971),v=()=>n(807778),h=()=>n(10984),_=n(474848);const b=.75,y=1;function S(e){return"subscribed_admin"===(null==e?void 0:e.type)||"unsubscribed_admin"===(null==e?void 0:e.type)}function w(e){if(S(e))return e}function k(e){var t;const n=null===(t=w(e))||void 0===t||null===(t=t.customerData)||void 0===t?void 0:t.stripe;if(function(e){return void 0!==e.plan}(n))return n}function I(e){var t;return null===(t=w(e))||void 0===t||null===(t=t.customerData)||void 0===t?void 0:t.stripe}function x(e){return Boolean(e&&"unsubscribed_admin"!==e.type&&"unsubscribed_member"!==e.type&&"unsubscribed_guest"!==e.type)}function A(e){return!x(e)}function C(e){return!te(e,["personal","student","personal_free"])}function T(){return(0,h().jR)()}function M(e,t){return t===(0,h().AI)()}function P(e,t,n){const o=(0,p().Xz)({environment:e,spaceId:n})??1,i=(0,v().Km)(e),r=(0,v().qp)();return!(!(0,h().dL)()||1===o)&&(!!(i&&null!==r&&r>=0)||q(e,t,n)>=b)}function B(e,t,n){return q(e,t,n)>=b}async function R(e){const{environment:t,userRootStore:n}=e;if(!n)return[];return(await Promise.all(n.getAdminSpaceIds().map((e=>g().A.awaitData(t,{spaceId:e}))))).map((e=>(0,r().AI)(e)??"free"))}function E(e){const t=k(e);return"unsubscribed_admin"===e.type||"unsubscribed_member"===e.type?e.accountBalance:t?t.accountBalance:0}function D(e,t){const n=(0,p().Xz)({environment:e,spaceId:t})??1;return(0,h().dL)()&&n>1}function N(e,t,n){return A(t)&&D(e,n)?t.blockUsage:0}function L(e,t,n){return D(e,n)?Math.max(0,(0,l().lP)()-N(e,t,n)):void 0}function O(e,t){const{currentUserStore:n}=m().default.state,o=null!=n&&n.isDefined()?n.getEmail():void 0;return e.temporaryBillingEmail||(null==t?void 0:t.email)||o}function U(e){const{currentUserStore:t}=m().default.state,n=null!=t&&t.isDefined()?null==t?void 0:t.getEmail():void 0;return(null==e?void 0:e.email)??n}function F(e){return e||"month"}function V(e){return!!(0,h().dL)()&&((0,u().mM)({environment:e})?"personal":"plus")}function j(e){const{memberCount:t,subscriptionTier:n,addOnFeature:o,isAddOnFeature:i,billingInterval:r,coupon:a}=e,s=function(e){const{subscriptionTier:t,addOnFeature:n,isAddOnFeature:o}=e;if(!d().A.pricing)return;if(o&&void 0!==n)return d().A.pricing[n].productId;const i=d().A.pricing[t];if("productId"in i)return i.productId}({subscriptionTier:n,addOnFeature:o,isAddOnFeature:i});let l,c,u;return s===d().A.pricing.ai.productId?(l=d().A.pricing.ai.yearlyPricePerMember,c=d().A.pricing.ai.monthlyPricePerMember,"ai_fifty_percent"===a&&(l-=4800,c-=500),u="year"===r?l*t:c*t):s===d().A.pricing.personal.productId?(l=d().A.pricing.personal.yearlyPrice,c=d().A.pricing.personal.monthlyPrice,u="year"===r?l:c):s===d().A.pricing.plus.productId?(l=d().A.pricing.plus.yearlyPricePerMember,c=d().A.pricing.plus.monthlyPricePerMember,u="year"===r?l*t:c*t):s===d().A.pricing.business.productId?(l=d().A.pricing.business.yearlyPricePerMember,c=d().A.pricing.business.monthlyPricePerMember,u="year"===r?l*t:c*t):(l=d().A.pricing.enterprise.yearlyPricePerMember,c=d().A.pricing.enterprise.monthlyPricePerMember,u="year"===r?l*t:c*t),{yearlyUnitPrice:l,monthlyUnitPrice:c,planAmount:u}}function z(e,t){var n;if(e&&e.isLoaded)return null===(n=e.result)||void 0===n||null===(n=n.getMonthlyUnitCost(t))||void 0===n?void 0:n.toMoneyValue()}function H(e,t){return e===d().A.pricing.personal.productId||(0,r().et)(t)?"personal":e===d().A.pricing.student.productId?"student":e===d().A.pricing.plus.productId?"plus":e===d().A.pricing.business.productId?"business":e===d().A.pricing.enterprise.productId?"enterprise":e===d().A.pricing.ai.productId?"ai":e===d().A.pricing.sites_custom_hostnames.productId?"sites_custom_hostnames":"legacy"}function W(e){const{subscriptionTier:t,memberCount:n,currencyCode:o,promo:i,data:r,onlyShowAddOn:l,calculatingTax:d,taxAmount:u,addOnFeature:p,billingInterval:m,coupon:g}=e,f=Math.min(0,E(r));let v=0,h=0,b=0;const y=void 0!==p;if(!l){const e=j({subscriptionTier:t,memberCount:n,isAddOnFeature:!1,billingInterval:m});v+=e.yearlyUnitPrice,h+=e.monthlyUnitPrice,b+=e.planAmount}if(y){const e=j({subscriptionTier:t,memberCount:n,isAddOnFeature:!0,addOnFeature:p,billingInterval:m,coupon:g});v+=e.yearlyUnitPrice,h+=e.monthlyUnitPrice,b+=e.planAmount}const S=(0,s().ex)(b,i),w=a().W.fromValue({amount:b-S.amount+f+(u&&!d?u:0),currencyCode:o}).zeroIfNegative(),k=[{type:"standard",name:(0,_.jsx)(c().sA,{id:"subscriptionHelpers.lineItems.subTotal",defaultMessage:"Subtotal"}),price:a().W.fromValue({amount:b,currencyCode:o})}];return k.push({type:d?"calculating":"standard",name:(0,_.jsx)(c().sA,{id:"subscriptionHelpers.lineItems.taxIfApplicable.title",defaultMessage:"Tax if applicable"}),price:a().W.fromValue({amount:b,currencyCode:o})}),0!==S.amount&&k.push({type:"promotion",name:(0,_.jsx)(c().sA,{id:"subscriptionHelpers.lineItems.promo",defaultMessage:"Coupon"}),price:a().W.fromValue({amount:S.amount,currencyCode:o}),subtitle:S.monthsRemaining?(0,_.jsx)(c().sA,{id:"subscriptionHelpers.lineItems.promo.subtitle",defaultMessage:"Valid for {durationInMonths} months",values:{durationInMonths:S.monthsRemaining}}):void 0}),f<0&&k.push({type:"promotion",name:(0,_.jsx)(c().sA,{id:"subscriptionHelpers.lineItems.balance",defaultMessage:"Balance"}),price:a().W.fromValue({amount:-f,currencyCode:o})}),{yearlyUnitPrice:v,monthlyUnitPrice:h,planAmount:b,payAmount:w,accountBalance:f,lineItems:k,promoInfo:S}}function q(e,t,n){return N(e,t,n)/(0,l().lP)()}function K(e){return $(e).filter(i().QE)}function G(e){return $(e).filter((e=>(0,o().DH)(e.role)))}function $(e){return"visibleUsers"in e?e.visibleUsers:e.users}function Y(e,t){return Boolean(t&&"subscribed_admin"===t.type&&(0,r().N8)(null==e?void 0:e.subscription))}function Q(e,t){if(!t)return!1;const n=f().A.getData(e,{spaceId:t});return!!n&&(0,r().N8)(n.billingData.subscription)}function Z(e,t,n){return N(e,t,n)>=(0,l().lP)()}function X(e){return l().OX(e)?"interest_in_enterprise":l().tL(e)?"interest_in_business":void 0}function J(e){return l().dL(e)}function ee(){return(0,h().y4)()}function te(e,t){const n=(0,h().AI)();return!!n&&t.includes(n)}},134696:(e,t,n)=>{n.d(t,{D2:()=>A,F1:()=>N,J8:()=>I,Jg:()=>x,Jy:()=>T,R2:()=>U,RH:()=>R,UC:()=>z,VV:()=>L,Wd:()=>O,_u:()=>B,bT:()=>P,hp:()=>F,ig:()=>V,iv:()=>M,kH:()=>C,l8:()=>D,vX:()=>j,xF:()=>E});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(430670),n(581454);var o=()=>n(842599),i=()=>n(798880),r=()=>n(762433),a=()=>n(116225),s=()=>n(496603),l=()=>n(498212),c=()=>n(989423),d=()=>n(680074),u=()=>n(640653),p=()=>n(351360),m=()=>n(508496),g=()=>n(406999),f=()=>n(630116),v=()=>n(134217),h=()=>n(10984),_=()=>n(749240),b=()=>n(966505),y=()=>n(751156),S=()=>n(755199),w=()=>n(337240);function k(e){var t;const n=e.invite_targets.filter(g().Gz),i=e.invite_targets.filter(g().ju),r=n.length+i.length,a=s().oE(e.permission_items.map((e=>{if("user_permission"===e.type)return e.user_id&&(0,l().ot)(e.user_id)}))),c=new Set(null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.getEmailDomains()),d=e.invite_targets.filter((e=>{if("existingUser"!==e.type&&"newUser"!==e.type)return!1;const t=(0,o().zN)(e.value.email);return t&&c.has(t)})).flatMap((e=>e.value.id?[(0,l().ot)(e.value.id)]:[])),u=(0,h().AI)(),m=e.invitee_ids_with_internal_domain??[];return{role:e.role,user_count:r,new_user_count:n.length,new_workspace_member_count:e.is_space?r:d.length,new_workspace_member_ids:e.is_space?a:d,is_onboarding:e.is_onboarding,invite_flow_id:e.invite_flow_id,invite_origin:e.invite_origin,invitee_ids:a,invite_message_length:e.invite_message_length,subscription_tier:u,domain_type:e.domainType,...!e.is_space&&{share_menu_session_id:e.share_menu_session_id},allow_domain_auto_invite:d.length>0,is_space:e.is_space,collection_id:e.collection_id,parent_collection_id:e.parent_collection_id,is_internal_domain:m.length>0,invitee_ids_with_internal_domain:m,invitee_ids_with_internal_domain_enforced:e.invitee_ids_with_internal_domain_enforced}}function I(e,t){const n=k(t);c().vd(e,"invite_error",n)}function x(e,t){var n;const r=(0,h().AI)(),a=k(t);c().vd(e,"invite",{...a,is_space:t.is_space});const s=null===(n=p().default.state.currentSpaceStore)||void 0===n?void 0:n.id;s&&(_().subscriptionDataStoreInstance.waitUntilLoaded().then((()=>{const n=_().subscriptionDataStoreInstance.state,r=n?v().V$(e,n,s):void 0,l=n?v().hr(e,n,s):void 0;c().vd(e,"invite_debug_with_block_usage",{...a,is_space:t.is_space,is_over_block_limit:r,block_usage:l}),t.is_space||(!function(e,t){const{currentSpaceStore:n,currentUserStore:r}=p().default.state,a=n&&n.canEditMembership(),s=d().FX(),l=null==r?void 0:r.getEmail();if(!a||!s||!l)return;if("professional"!==s)return;const u=(0,o().zN)(l),m=_().subscriptionDataStoreInstance.state;if(!m)return;const g=(0,v().oe)(m),h=g.slice(0,50).map((e=>({email:f().LU.createChildStore(n,{table:i().oo,id:e.userId}).getEmail(),guestId:e.userId}))).filter((e=>e.email&&(0,o().zN)(e.email)===u)).map((e=>e.guestId));c().vd(e,"page_invite_guest_summary",{...t,guest_with_same_domain_count:h.length,guest_ids:h})}(e,a),b().xO(e,{inviteTargets:t.invite_targets,origin:t.invite_origin}))})),(t.is_space||a.allow_domain_auto_invite)&&(c().vd(e,"space_invite",a),c().mt(e,{space_invited:!0}),m().default.logEvent("space_invite",a.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,a),b().KX(e,{invite_origin:t.invite_origin,domainType:t.domainType,new_workspace_member_count:a.new_workspace_member_count,new_workspace_member_ids:a.new_workspace_member_ids,allow_domain_auto_invite:a.allow_domain_auto_invite}),function(e,t){const n=(0,h().AI)();t.visibleMembersCount<=1&&(c().vd(e,"workspace_first_invite_sent"),w().gJ(e,{subscriptionTier:n,domainType:t.domainType}),"professional"===t.domainType&&(c().vd(e,"professional_workspace_first_invite_sent",{visible_members_count:t.visibleMembersCount,is_professional_team_user:t.isProfessionalTeamUser,domain_type:t.domainType}),w().jg(e)))}(e,{visibleMembersCount:(0,u().Xz)({environment:e,spaceId:s})??1,isProfessionalTeamUser:t.isProfessionalTeamUser,domainType:t.domainType})),t.is_space||a.new_workspace_member_ids.length===t.invite_targets.length||(c().vd(e,"page_invite",a),m().default.logEvent("page_invite",r,a),function(e,t){const{currentUserSettingsStore:n}=p().default.state;if(!n)return;const o=n.getKeyStore("settings").getKeyStore("signup_time").getValue(),i=n.getKeyStore("settings").getKeyStore("first_page_invite_at").getValue();if(!Boolean(i)){const i=Date.now(),r={...t,...o?{signup_time_ready:!0,time_from_signup_to_first_page_invite:o-i}:{signup_time_ready:!1}};c().vd(e,"page_invite_time",r),m().default.logEvent("page_invite_time",t.subscription_tier,r),y().createAndCommit({userAction:"firstPageInvite",environment:e,userId:n.id,canUndo:!0,perform:e=>{S().mJ({userSettingsStore:n,data:{first_page_invite_at:i},transaction:e})}})}}(e,a)))}function A(e,t){const n=(0,r().AI)(t.billingData);c().vd(e,"invite_typed",{invite_flow_id:t.invite_flow_id,invite_origin:t.invite_origin,subscription_tier:n}),m().default.logEvent("invite_typed",n,{...t})}function C(e,t){const{selected_user_token:n}=t;let o;"group"===n.type&&(o={type:n.type,value:{id:n.value.group_id}}),c().vd(e,"invite_select_target",o?{...t,selected_user_token:o}:t),m().default.logEvent("invite_select_target",t.subscription_tier,{selected_user_token_rank:t.selected_user_token_rank,from:t.from,type:t.type??"permission_invite"})}function T(e,t){c().vd(e,"invite_change_role",t),m().default.logEvent("invite_change_role",t.subscription_tier,{...t})}function M(e,t){c().vd(e,"abandon_permissions_invite",t),m().default.logEvent("abandon_permissions_invite",t.subscription_tier,{...t})}function P(e,t){c().vd(e,"open_share_workspace_invite",t),m().default.logEvent("open_share_workspace_invite",t.subscription_tier,{...t})}function B(e,t){c().vd(e,"send_share_workspace",t),m().default.logEvent("send_share_workspace",t.subscription_tier,{...t})}function R(e,t){c().vd(e,"send_membership_request",t),m().default.logEvent("send_membership_request",t.subscription_tier,{...t})}function E(e,t){c().vd(e,"send_guest_request",t),m().default.logEvent("send_guest_request",t.subscription_tier,{...t})}function D(e,t){c().u4({environment:e,event:{eventName:"skip_share_workspace",eventProperties:t}})}function N(e,t){c().vd(e,"open_page_share_invite",t),m().default.logEvent("open_page_share_invite",t.subscription_tier,{...t})}function L(e){c().vd(e,"open_space_invite")}function O(e,t){c().vd(e,"invite_modal_input_focus",t)}function U(e,t){c().vd(e,"invite_users_to_page",t),a().u4({name:"invite_users_to_page"})}function F(e,t){c().vd(e,"internal_domain_enforced",t)}function V(e,t){c().vd(e,"workspace_over_guest_limit",t)}function j(e,t){c().u4({environment:e,event:{eventName:"open_invite_members_modal",eventProperties:t}})}function z(e,t){c().u4({environment:e,event:{eventName:"share_menu_invite_display_mode_change",eventProperties:t}})}},135552:(e,t,n)=>{n.d(t,{V:()=>i,q:()=>o});let o=function(e){return e.Red="red",e.Blue="blue",e.Beige="beige",e.White="white",e.Purple="purple",e.LightRed="light-red",e.Yellow="yellow",e.PageNotification="page-notification",e.ImportNotification="import-notification",e.LightBlue="light-blue",e.LightGray="light-gray",e}({});function i(e){switch(e){case o.Red:return"red";case o.Blue:return"blue";case o.Beige:return"yellow";case o.White:return"gray";case o.Purple:return"blue";case o.LightRed:return"red";case o.Yellow:return"yellow";case o.PageNotification:return"gray";case o.ImportNotification:case o.LightBlue:return"blue";case o.LightGray:default:return"gray"}}},137743:(e,t,n)=>{n.d(t,{Y:()=>f,t:()=>v});n(898992),n(823215),n(296540);var o=()=>n(334003),i=()=>n(959013),r=()=>n(534177),a=()=>n(95313),s=()=>n(750660),l=()=>n(761652),c=()=>n(878377),d=()=>n(776894);var u=()=>n(351360),p=()=>n(416726),m=n(474848);const g=(0,i().YK)({moveToName:{id:"action.moveTo.name",defaultMessage:"Move to"}}),f=(0,p().Fw)({key:"move page to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,shortcuts:["moveTo"],validators:[c().AU6(c().i6S)],closeParentMenu:!0,action:e=>{let{environment:t,publicEditMode:o,analyticsFrom:i,lazyDependencies:r}=e;const{mainEditorCurrentBlockStore:a}=u().default.state;if(!a)return;const s=v.validators||[],l=document.querySelector(`.${n(38337).ug9}`);if(!l)return;const c={environment:t,blocks:[a],originRect:l.getBoundingClientRect(),publicEditMode:o,analyticsFrom:i,lazyDependencies:r};s.every((e=>e(c)))&&v.action(c)}}),v=(0,p().Fw)({key:"move to",displayName:g.moveToName,analyticsName:g.moveToName.defaultMessage,svg:o().F,shortcuts:["moveTo"],validators:[c().lj$,c().M3g,c().AU6(c().bct),c().AU6(c().CeV),c().AU6(c().kD4),c().AU6(c().Xjv(n(700500).xd.externalObjectInstancePage)),c().AU6(c().PfK),c().AU6(c().bmm),c().AU6(c().dKT),c().AU6(c().pe1),c().Xmj,c().AU6(c().i6S),c().AU6(c().oy3),c().AU6(c().J$q),c().AU6(c().r9z)],closeParentMenu:!0,render:(e,t,r)=>{let{styles:a}=r;const{environment:s,blocks:l}=t,c=d().sw({environment:s,blocks:l}),u=c.canMoveBlocks?void 0:h(c.reason),p=Boolean(u);return(0,m.jsx)(n(859428).A,{placement:n(962730).W.Right,textWrap:!0,style:{maxWidth:240},disableTooltip:!p,renderTooltip:()=>u,render:t=>(0,m.jsx)(n(575143).A,{...(0,n(553965).A)(e,t),...a,svg:o().F,title:(0,m.jsx)(i().sA,{...g.moveToName}),disabled:p,disabledFeedback:p,shortcut:"moveTo"})})},action:async e=>{const{environment:t}=e,o=d().sw({environment:t,blocks:e.blocks});if(!o.canMoveBlocks){const{reason:t}=o;return void function(e){let{environment:t,reason:o}=e;switch((()=>n(436572))().D6({label:h(o)}),o.key){case"lockedTopLevelTeamPage":a().qN(t,{type:"locked_top_level_team"});break;case"needsFullAccess":case"needsEditAccessOnParent":case"unknown":a().qN(t,{type:"no_permission"});break;default:(0,r().HB)(o)}}({environment:e.environment,reason:t})}let i=[];const l=u().default.state.mainEditorCurrentBlockStore,c=n(186445).ao();e.blocks.length>0&&e.blocks[0]!==l?i=e.blocks:c&&(i=[c]),e.environment.device.isMobileNative?await s().LP({environment:e.environment,blocks:i,originRect:e.originRect,moveToContext:"action_menu"}):s().ho({environment:e.environment,blocks:i,originRect:e.originRect,moveToContext:"action_menu"})}});function h(e){var t;switch(e.key){case"needsFullAccess":return(0,m.jsx)(i().sA,{id:"blockMenu.moveTo.disabled.fullAccess.reason",defaultMessage:'You need "Full access" to this page to move it.'});case"needsEditAccessOnParent":return null!==(t=e.parentStore)&&void 0!==t&&t.canRead()?(0,m.jsx)(i().sA,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reasonWithParentName",defaultMessage:"You need edit access to {parentPageName} to move this page.",values:{parentPageName:(0,m.jsx)(l().A,{store:e.parentStore,useInvertedColors:!0})}}):(0,m.jsx)(i().sA,{id:"blockMenu.moveTo.disabled.editAccessOnParent.reason",defaultMessage:"You need edit access to the parent page to move this page."});case"unknown":return(0,m.jsx)(i().sA,{id:"action.doNotHavePermissionToMoveBlock",defaultMessage:"You do not have permission to move this page."});case"lockedTopLevelTeamPage":return(0,m.jsx)(i().sA,{id:"action.isLockedTopLevelTeamPage",defaultMessage:"This teamspace has its sidebar locked. You must be a teamspace owner to move this page."});default:(0,r().HB)(e)}}},138856:(e,t,n)=>{n.d(t,{u:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("play",{viewBox:"0 0 14 16",svg:(0,o.jsx)("path",{d:"M1.34699 16C1.73805 16 2.07697 15.8756 2.52017 15.6089L12.8703 9.47556C13.6437 9.01333 14 8.62222 14 8C14 7.37778 13.6437 6.98667 12.8703 6.52444L2.52017 0.391111C2.07697 0.133333 1.73805 0 1.34699 0C0.582247 0 0 0.595556 0 1.57333V14.4356C0 15.4044 0.582247 16 1.34699 16Z"})})},140022:(e,t,n)=>{n.r(t),n.d(t,{trackAIChatTranscriptHistoryChatDeleted:()=>V,trackAIChatTranscriptHistoryItemRestored:()=>U,trackAIChatTranscriptHistoryNewChatCreated:()=>F,trackAcceptAllPill:()=>Z,trackAiChatTranscriptHistoryOpenHistoryButtonSelected:()=>j,trackAiDetectedGetSupportPillClick:()=>O,trackAiDetectedGetSupportPillTriggered:()=>L,trackAssistantClosed:()=>h,trackAssistantFollowUpShareButtonClick:()=>ve,trackAssistantIntroModalClose:()=>B,trackAssistantIntroModalRead:()=>R,trackAssistantIntroModalTryNow:()=>D,trackAssistantLimitBlurSeen:()=>fe,trackAssistantOpened:()=>v,trackAssistantScopeMenuGetAiConnectorsInteraction:()=>ge,trackAssistantShareModalCopyImageFailure:()=>be,trackAssistantShareModalCopyImageSuccess:()=>_e,trackAssistantShareModalDismiss:()=>he,trackAssistantSkillSuggestedButtonClick:()=>ie,trackAssistantSlackUnfurlAiActionEvent:()=>ue,trackAssistantSuggestedSkillGroupClick:()=>oe,trackAtMentionClick:()=>ne,trackCloseFullPageChatHistory:()=>H,trackConnectAppsClick:()=>ye,trackConnectorInProgressModalOpened:()=>me,trackDiscardAllPill:()=>J,trackExpandFullPageChatHistory:()=>z,trackFullPageWelcomePromptCardInteraction:()=>pe,trackInferenceEnd:()=>S,trackInferenceStart:()=>b,trackInsertPill:()=>Q,trackLeapDismissed:()=>le,trackLeapLinkClick:()=>ce,trackLeapPreferenceSelect:()=>re,trackLeapPresented:()=>se,trackLeapSubmit:()=>ae,trackLearnMoreAboutAssistantClicked:()=>E,trackLeavingFullPageChat:()=>te,trackOpeningHelpFromThreeDotMenu:()=>$,trackOpeningSupportFromThreeDotMenu:()=>Y,trackOpeningThreeDotMenu:()=>G,trackQnASilentRetry:()=>I,trackQnaBackToSearch:()=>C,trackQnaCitationsSeeMoreClick:()=>M,trackQnaCitationsToggle:()=>T,trackQnaFeedbackGiven:()=>x,trackQnaReminderShown:()=>N,trackQnaResultClicked:()=>A,trackQnaSessionInitialized:()=>P,trackSavePagePill:()=>X,trackScopeSearchMenuClose:()=>K,trackScopeSearchMenuOpen:()=>W,trackScopeSearchToggle:()=>q,trackSeeAllSkillsPill:()=>ee,trackUserClickedAssistantTryAgain:()=>w,trackUserStoppedAssistantOutput:()=>k});n(944114),n(898992),n(354520);var o=()=>n(239666),i=()=>n(116225),r=()=>n(534177),a=()=>n(631611),s=()=>n(989423),l=()=>n(291075),c=()=>n(351360),d=()=>n(430483),u=()=>n(874753),p=()=>n(525569),m=()=>n(99254),g=()=>n(577437),f=()=>n(174636);function v(e,t){const{sessionId:n,startTimestamp:o,transcript:r,hasQuery:a,searchSessionId:u,from:p,isReminder:v,reminderType:h}=t,_=d().zD.isXMLAssistantEnabled(),b=d().zD.isLimitedQnaMode(),y=_?"assistant_open":"qna_open";s().vd(e,y,{qna_session_id:n,has_query:a,search_session_id:u,is_limited_qna_session:b,from:p,is_reminder:v,reminder_type:h}),i().u4({name:y,args:{qna_session_id:n,from:p,duration:Date.now()-o,questions_asked_in_session:r.filter((e=>"human"===e.type)).length??0,is_reminder:v,reminder_type:h,is_limited_qna_session:b}});const S=c().default.state.currentSpaceStore,w=null==S?void 0:S.getMemberCountFromPublicSpaceData(),k=(0,g().zD)(e,{spaceId:null==S?void 0:S.id,userId:e.currentUser.id,name:"ai_connectors"})??!1;S&&w&&!v&&d().zD.isAudienceForAiConnectorSprigSurvey({hasAiConnectorFeature:k,isSpaceAdmin:S.canAdmin(),isMultiplayerWorkspace:w>1,qnaConnectionStoreStates:{slackUniversalQnAConnectionStoreState:f().R.state,githubAIConnectorStoreState:l().o.state,jiraAIConnectionStoreState:m().y.state}})&&i().u4({name:"assistant_open_and_in_ai_connector_sprig_audience",args:{qna_session_id:n,from:p}})}function h(e,t){const{sessionContext:n,from:o}=t,r=null==n?void 0:n.assistantConfigurationState,a=d().zD.isXMLAssistantEnabled(),l=d().zD.isLimitedQnaMode(),c=a?"assistant_close":"qna_close",u=null==r?void 0:r.sessionStartTimestamp;s().vd(e,c,{qna_session_id:null==r?void 0:r.sessionId,qna_session_length:u?Date.now()-u:0,from:o,is_limited_qna_session:l}),i().u4({name:c,args:{qna_session_id:(null==r?void 0:r.sessionId)??"",is_limited_qna_session:l,from:o,duration:u?Date.now()-u:-1,questions_asked_in_session:(null==n?void 0:n.evaluator.getTranscript().filter((e=>"human"===e.type)).length)??0}})}function _(e){if(!(0,a().Ui)(e))return u().P.state.from;switch(p().default.state.type){case"closedWithContext":case"closed":return;case"completionPopup":case"assistantCompletionPopup":return p().default.state.from;default:(0,r().HB)(p().default.state)}}function b(e){var t;const{environment:n,configurationState:i,inferenceId:r,source:a,mentionsUsed:l,skillType:c,from:u,actionCardIdForLogging:p}=e,m=de(),g=i?i.searchScope:o().W,f=y(g),v=d().zD.isXMLAssistantEnabled(),h=d().zD.isLimitedQnaMode(),b=(null==i||null===(t=i.temporaryUserInputData)||void 0===t?void 0:t.isRetrying)??!1,S=v?"assistant_inference_start":"qna_inference_start";s().vd(n,S,{qna_session_id:i?i.sessionId:void 0,qna_inference_id:r,is_limited_qna_session:h,is_retry:b,is_suggested_question:"suggested_question"===a,is_reminder_suggested_question:"reminder_suggested_question"===a,is_abandoned_search_suggested_question:"abandoned_search_suggested_question"===a,search_scope_type:g.type,search_scope_id:f,mentions_used:l,skill_type:c,action_card_id:p,from:u,search_sources:m,assistant_opened_from:_(u)})}function y(e){if("everything"!==e.type&&"workspace"!==e.type&&"notion"!==e.type&&"slack"!==e.type&&"helpdocs"!==e.type&&"gmail"!==e.type&&"ai-knowledge"!==e.type&&"labeler"!==e.type&&"google-drive"!==e.type&&"github"!==e.type&&"jira"!==e.type&&"sharepoint"!==e.type&&"linear"!==e.type&&"microsoftTeams"!==e.type&&"universal-none"!==e.type&&"notion-none"!==e.type&&"web"!==e.type&&"slackbot"!==e.type&&"universal-workspace"!==e.type)return"teamspace"===e.type?e.teamId:"page"===e.type?e.pageId:"collection"===e.type?e.collectionId:"site"===e.type?e.siteId:(0,r().HB)(e)}function S(e,t){const{configurationState:n,inferenceId:i,timeTook:r,numCitationsShown:a,numSearchResults:l,numSlackSearchResults:c,numGoogleDriveSearchResults:u,searchedHelpdocs:p,citationsBySource:m,resultsBySource:g,selectedSkill:f,assistantActions:v,from:h,observationsBeforeFirstHumanStep:b,observationsAfterFirstHumanStep:S,forcefullyStoppedByUser:w,actionCardId:k}=t;if(!n)return;const I=d().zD.isXMLAssistantEnabled(),x=de(),A=n.searchScope.type,C=y(n?n.searchScope:o().W);I?s().u4({environment:e,event:{eventName:"assistant_inference_end",eventProperties:{session_id:n.sessionId,inference_id:i,time_took:r,num_citations_shown:a,num_search_results:l,num_slack_search_results:c,num_google_drive_search_results:u,searched_helpdocs:p,citations_by_source:m,results_by_source:g,selected_skill:f,action_card_id:k,assistant_actions:(null==v?void 0:v.length)?v:["none"],search_sources:x,search_scope_type:A,observations_before_first_human_step:b,observations_after_first_human_step:S,search_scope_id:C,from:h,assistant_opened_from:_(h),forcefully_stopped_by_user:w}}}):s().vd(e,"qna_inference_end",{qna_session_id:n.sessionId,qna_inference_id:i,time_took:r,num_citations_shown:a,num_search_results:l,num_slack_search_results:c,citations_by_source:m,search_sources:x,search_scope_type:A,from:h,assistant_opened_from:_(h)})}function w(e,t){s().u4({environment:e,event:{eventName:"assistant_user_clicked_try_again",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function k(e,t){s().u4({environment:e,event:{eventName:"assistant_output_stopped_by_user",eventProperties:{session_id:t.sessionId,assistant_surface_type:t.assistantSurfaceType}}})}function I(e,t){s().vd(e,"qna_silent_retry",{qna_session_id:t.sessionId,event:t.event})}function x(e,t,n,o){t&&s().vd(e,"qna_feedback_given",{qna_session_id:t.sessionId,qna_inference_id:n,sentiment:o})}function A(e,t){const{configurationState:n,clickedPageId:o,resultType:i,source:r}=t;n&&s().vd(e,"qna_result_clicked",{qna_session_id:n.sessionId,search_session_id:n.searchSessionId,clicked_page_id:o,result_type:i,source:r})}function C(e,t){s().vd(e,"qna_back_to_search",{qna_session_id:t.sessionId})}function T(e,t){s().vd(e,"qna_citations_toggle",{qna_session_id:t.sessionId,shown:t.shown})}function M(e,t){s().vd(e,"qna_citations_see_more_click",{qna_session_id:t.sessionId})}function P(e,t){s().vd(e,"qna_session_initialized",{current_initialization_count:t.current_initialization_count})}function B(e,t){s().vd(e,"assistant_intro_modal_close",t)}function R(e,t){s().vd(e,"assistant_intro_modal_read",t)}function E(e,t){s().vd(e,"assistant_learn_more_about_assistant_clicked",t)}function D(e,t){s().vd(e,"assistant_intro_modal_continue",t),v(e,{hasQuery:!1,isReminder:!1,transcript:[],searchSessionId:void 0,sessionId:"",startTimestamp:Date.now(),reminderType:void 0,from:"assistant_intro_modal"})}function N(e,t){s().vd(e,"qna_reminder_shown",{number:t.number})}function L(e,t){s().vd(e,"ai_get_help_triggered",{sessionId:t.sessionId})}function O(e,t){s().vd(e,"ai_get_help_click",{sessionId:t.sessionId})}function U(e,t){s().vd(e,"ai_chat_transcript_history.restored",t)}function F(e,t){s().vd(e,"ai_chat_transcript_history.new_chat_created",t)}function V(e,t){s().vd(e,"ai_chat_transcript_history.chat_deleted",t)}function j(e,t){s().vd(e,"ai_chat_transcript_history.open_history_button_selected",t)}function z(e){s().vd(e,"ai_full_page_chat_history.expand")}function H(e){s().vd(e,"ai_full_page_chat_history.close")}function W(e,t){s().vd(e,"ai_scoped_search_menu_open",t)}function q(e,t){const{from:n,scope:o}=t;let i;if("everything"===o.type||"workspace"===o.type||"notion"===o.type||"slack"===o.type||"helpdocs"===o.type||"gmail"===o.type||"ai-knowledge"===o.type||"labeler"===o.type||"google-drive"===o.type||"jira"===o.type||"universal-none"===o.type||"github"===o.type||"sharepoint"===o.type||"microsoftTeams"===o.type||"linear"===o.type||"notion-none"===o.type||"web"===o.type||"slackbot"===o.type||"universal-workspace"===o.type);else if("teamspace"===o.type)i=o.teamId;else if("page"===o.type)i=o.pageId;else if("collection"===o.type)i=o.collectionId;else{if("site"!==o.type)return(0,r().HB)(o);i=o.siteId}s().vd(e,"ai_scoped_search_toggle",{from:n,search_scope_type:o.type,search_scope_id:i})}function K(e,t){s().vd(e,"ai_scoped_search_menu_close",t)}function G(e,t){s().vd(e,"ai_three_dot_menu.open",t)}function $(e,t){s().vd(e,"ai_three_dot_menu.accessing_help",t)}function Y(e,t){s().vd(e,"ai_three_dot_menu.opening_support",t)}function Q(e,t){s().vd(e,"ai_action_pill.insert",t)}function Z(e,t){s().vd(e,"ai_action_pill.accept_all_edits",t)}function X(e,t){s().vd(e,"ai_action_pill.save_page",t)}function J(e,t){s().vd(e,"ai_action_pill.discard_all_edits",t)}function ee(e,t){s().vd(e,"ai_see_all_skills",t)}function te(e){s().vd(e,"ai_full_page_exit")}function ne(e){s().vd(e,"ai_at_mention_click")}function oe(e,t){s().vd(e,"assistant_suggested_skill_group_click",t)}function ie(e,t){s().vd(e,"assistant_suggested_skill_option_click",t)}function re(e,t){s().vd(e,"leap_select",t)}function ae(e,t){s().vd(e,"leap_submit",t)}function se(e){s().vd(e,"leap_presented")}function le(e){s().vd(e,"leap_dismissed")}function ce(e,t){s().vd(e,"leap_open_link",t)}function de(){const e=["notion","helpdocs"];return d().zD.isConnectedToSlackUniversalQnA(f().R.state)&&e.push("slack"),d().zD.isConnectedToGoogleDriveUniversalQnA(f().R.state)&&e.push("google-drive"),d().zD.isConnectedToGithubUniversalQnA(l().o.state)&&e.push("github"),d().zD.isConnectedToJiraUniversalQnA(m().y.state)&&e.push("jira"),e}function ue(e){const{environment:t,action:n,interaction:o}=e;s().u4({environment:t,event:{eventName:"assistant_slack_unfurl_ai_action_event",eventProperties:{interaction:o,action:n}}})}function pe(e){const{environment:t,promptId:n,interaction:o}=e;s().u4({environment:t,event:{eventName:"assistant_full_page_welcome_prompt_card_event",eventProperties:{promptid:n,interaction:o}}})}function me(e){const{environment:t,connector:n,from:o}=e;s().u4({environment:t,event:{eventName:"ai_connector_in_progress_modal_opened",eventProperties:{from:o,connector:n}}})}function ge(e){const{environment:t,sessionId:n,interaction:o}=e;s().u4({environment:t,event:{eventName:"assistant_scope_menu_get_ai_connectors_interaction",eventProperties:{session_id:n,interaction:o}}})}function fe(e){const{environment:t}=e;s().u4({environment:t,event:{eventName:"assistant_limit_blur_seen",eventProperties:{}}})}function ve(e){const{environment:t,sessionId:n,assistantSurfaceType:o}=e;s().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_clicked_button",eventProperties:{session_id:n,assistant_surface_type:o}}})}function he(e){const{environment:t,sessionId:n,assistantSurfaceType:o}=e;s().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_dismissed_share_modal",eventProperties:{session_id:n,assistant_surface_type:o}}})}function _e(e){const{environment:t,sessionId:n,assistantSurfaceType:o}=e;s().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_success",eventProperties:{session_id:n,assistant_surface_type:o}}})}function be(e){const{environment:t,sessionId:n,assistantSurfaceType:o}=e;s().u4({environment:t,event:{eventName:"assistant_follow_up_share_action_user_copied_image_failure",eventProperties:{session_id:n,assistant_surface_type:o}}})}function ye(e){const{environment:t,sessionId:n,assistantSurfaceType:o,source:i}=e;s().u4({environment:t,event:{eventName:"assistant_click_connect_apps",eventProperties:{source:i,session_id:n,assistant_surface_type:o}}})}},140862:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(296540);function i(e){return(0,o.useMemo)((()=>({onMouseDown:t=>{if(e){if(r(t.target))return;r(document.activeElement)&&t.preventDefault()}}})),[e])}function r(e){return e instanceof HTMLElement&&("true"===e.contentEditable||"input"===e.tagName.toLowerCase())}},141032:(e,t,n)=>{n.d(t,{$E:()=>m,Lc:()=>u,Ss:()=>v,yE:()=>c,yL:()=>p});n(16280);var o=()=>n(911981),i=()=>n(857639),r=()=>n(319625),a=()=>n(502800),s=()=>n(763824),l=()=>n(972435);const c="NotionTransactionTimeout",d=(0,n(959013).YK)({ReloadAllTabs:{defaultMessage:"Try closing and re-opening all Notion tabs or windows. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.reloadAllTabs"},ReloadThisTab:{defaultMessage:"Try reloading Notion. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.reloadThisTab"},AppProfileCorrupted:{defaultMessage:"Notion's local storage may be damaged. See (?) > Help & documentation > Reset Notion. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.helpAndSupportPrompt"},FirefoxProfileCorrupted:{defaultMessage:"Your Firefox profile may be damaged. Visit https://firefox-storage-test.glitch.me/ to diagnose. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.firefoxSettingsDamaged"},ChromeProfileCorrupted:{defaultMessage:"Your Chrome profile may be damaged. If you changed any chrome://flags then please reset them, then restart your browser. If issues persist, try making a new Chrome user. Contact support if that doesn’t fix the issue.",id:"localDatabase.errorFixes.chromeSettingsDamaged"},ChromeIndexedDBBucketError:{defaultMessage:"Your Chrome profile may be damaged. For a more consistent experience download the Notion desktop app: https://www.notion.com/desktop",id:"localDatabase.errorFixes.chromeUpgradeCorruptedSettings"},noDiskSpace:{defaultMessage:"No disk space remaining. Contact support if that doesn’t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemaining"},noDiskSpaceBrowserLimit:{defaultMessage:"No disk space remaining. Your browser settings may restrict the storage Notion can use. Contact support if that doesn’t fix the issue.",id:"localDatabase.erroMessages.noDiskSpaceRemainingBrowserLimit"}});function u(e){return e}function p(e){return Promise.all(e)}class m{constructor(e,t,n,o){this.databaseName=void 0,this.databaseVersion=void 0,this.debugLogger=new(i().BatchedLogger)({from:"IndexedDBWrapper",type:"BulkDebug",level:"info",maxLength:100,logToConsole:false}),this.latestTransactionId=0,this.openDbCallbacks=void 0,this.db=void 0,this.getDBPromise=void 0,this.environment=e,this.databaseName=t,this.databaseVersion=n,this.openDbCallbacks=o}async reset(){try{return await(0,o().MR)(this.databaseName),{value:void 0}}catch(e){return{error:g({environment:this.environment,error:(0,r().A)(e),details:`Failed to reset database ${this.databaseName}`,closed:!1,aborted:!1})}}finally{this.teardown()}}async startTransaction(e,t){const n="startTransaction";let o,i=0;const r=`${e.name}.${this.latestTransactionId++}`;do{try{const l=`${r} attempt #${i+1}`;if(this.debugLogInfo(n,`${l} starting`),o=await this.startTransactionAttempt({...e,name:r},t),!o.error){this.debugLogInfo(n,`${l} succeeded`);break}const c=`${l} errored, type=${o.error.type}`;if(!o.error.closed){this.debugLogInfo(n,`${c}, closed=false`);break}if(this.debugLogInfo(n,`${c}, closed=true`),this.db)try{this.db.close()}catch(a){this.debugLogInfo(n,`db.close() threw ${a}`)}if(this.teardown(),4===i)break;await s().wR(250)}catch(a){return{error:a}}i++}while(i<5);return o}async startTransactionAttempt(e,t){const{storeNames:n,name:o,mode:s,timeoutMs:l}=e,c=`${o} failed`,d="startTransactionAttempt",u=await this.getDB();if(u.error)return u;const p=u.value,f=[];let v;try{v=p.transaction(n,s);const e=Date.now(),t=window.setTimeout((()=>{const t=Date.now()-e,n=`${o} has not completed after ${t} ms, which may prevent other transactions from running.`;this.debugLogInfo(d,n),i().log({from:"IndexedDBWrapper",type:"LongRunningTransactionWarning",level:"warning",data:{message:n,miscDataToConvertToString:{transactionLog:f}}})}),m.longRunningTimeoutMs);v.addEventListener("complete",(function(){window.clearTimeout(t)}));const r=e=>{e.stopPropagation(),window.clearTimeout(t)};v.addEventListener("error",r),v.addEventListener("abort",r)}catch(_){const e=(0,r().A)(_);return{error:g({environment:this.environment,details:`Failed to create ${s} transaction on ${this.databaseName}.${n}`,error:e,aborted:!0,closed:"InvalidStateError"===e.name})}}const h=await this.runTransaction(v,t,o,l,(e=>{i().pushWithMaxLength(f,e,100)}));if("error"in h||h.abort){this.debugLogInfo(d,`${o} command returned failed/aborted status`);try{v.abort()}catch(b){this.debugLogInfo(d,`transaction.abort() threw ${b}`)}return v.done.catch((e=>{e&&i().log({from:"IndexedDBWrapper",type:"TransactionFailure",level:"error",error:(0,a().convertErrorToLog)(g({environment:this.environment,details:c,error:e,aborted:!0,closed:!1}))})})),h}if(this.debugLogInfo(d,`${o} command returned successful status`),"readwrite"===s)try{await v.done}catch(b){return{error:g({environment:this.environment,error:(0,r().A)(b),details:`In await transaction.done: ${c}`,aborted:null===b,closed:!1})}}else v.done.catch((e=>{i().log({from:"IndexedDBWrapper",type:"ReadOnlyTransactonFailureIgnored",level:"error",error:(0,a().convertErrorToLog)(g({environment:this.environment,error:e,details:c,aborted:null===e,closed:!1}))})}));return{value:h.value}}freezeListener(){Boolean(this.db)&&(this.debugLogInfo("freezeListener"),i().log({level:"warning",from:"IndexedDBWrapper",type:"document.freeze",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}))}teardown(){this.debugLogInfo("teardown"),this.db=void 0,this.getDBPromise=void 0,document.removeEventListener("freeze",this.freezeListener)}debugLogInfo(e,t){this.debugLogger.log({from:"IndexedDBWrapper",level:"info",type:e,data:{message:t}})}async initDB(){try{this.debugLogInfo("initDB","Starting openDB()");const e=await(0,o().P2)(this.databaseName,this.databaseVersion,this.openDbCallbacks);return this.debugLogInfo("initDB","Completed openDB()"),document.addEventListener("freeze",this.freezeListener),e.addEventListener("close",(e=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onclose",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().convertErrorToLog)(f(e))}),this.teardown()})),e.addEventListener("abort",(e=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onabort",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}})})),e.addEventListener("error",(e=>{i().log({level:"error",from:"IndexedDBWrapper",type:"db.onerror",data:{dbName:this.databaseName,dbVersion:this.databaseVersion},error:(0,a().convertErrorToLog)(f(e))})})),e.addEventListener("versionchange",(()=>{i().log({level:"warning",from:"IndexedDBWrapper",type:"db.onversionchange",data:{dbName:this.databaseName,dbVersion:this.databaseVersion}}),e.close(),this.teardown()})),{value:e}}catch(e){return{error:g({environment:this.environment,details:"Unable to initialize database",error:(0,r().A)(e),aborted:!1,closed:!1})}}}async getDB(){let e=this.db;if(!e){this.getDBPromise||(this.getDBPromise=this.initDB().then((e=>(e.error?this.teardown():(this.db=e.value,this.getDBPromise=void 0),e)),(e=>(this.teardown(),{error:{type:"InitDBException",message:"An unexpected error occurred trying to create the database.",details:"Exception in initDB",error:e,closed:!1,aborted:!1}}))));const t=await this.getDBPromise;if(t&&t.error)return t;e=t.value}return{value:e}}async runTransaction(e,t,n,o,i){try{const r=Date.now(),a=t(e,(e=>{this.debugLogInfo("runTransaction",`${n} command: ${e}`),i(e)}));if(void 0!==o&&o>=0){const e=await s().Vq(a,o);if(e.timeout){const e=Date.now()-r,t=new Error(`Timeout after ${e}ms: exceeded limit ${o}ms by ${e-o}ms`);throw t.name=c,this.debugLogInfo("runTransaction",`${n} ${t.name}: ${t.message}`),this.debugLogger.flush(),t}return e.result}i("Awaiting commandResultPromise.");const l=await a;return i("Done awaiting commandResultPromise."),l}catch(a){return{error:g({environment:this.environment,error:(0,r().A)(a),details:`In runTransaction catch: ${n} failed`,closed:!1,aborted:!1})}}}}function g(e){const{environment:t,error:n,details:o,closed:i,aborted:r}=e;if(n){if(n.name===c)return{type:c,details:o,message:`Storage operation did not complete. ${l().A.formatMessage(d.ReloadAllTabs)}`,error:n,closed:!1,aborted:!1};if("TimeoutError"===n.name&&"Transaction timed out due to inactivity."===n.message)return{type:"TransactionTimeout",details:o,message:`IndexedDB access attempt timed out. ${l().A.formatMessage(d.ReloadThisTab)}`,error:n,closed:i,aborted:r};if("VersionError"===n.name)return{type:"OutdatedSchemaVersion",details:o,message:`This tab is running an outdated version of Notion. ${l().A.formatMessage(d.ReloadThisTab)}`,error:n,closed:i,aborted:r};if("UnknownError"===n.name&&"Internal error opening backing store for indexedDB.open."===n.message)return{type:"ChromeUnknownInternalError",details:o,message:`Cannot open IndexedDB. ${t.device.isNative?l().A.formatMessage(d.AppProfileCorrupted):l().A.formatMessage(d.ChromeProfileCorrupted)}`,error:n,closed:i,aborted:r};if(t.device.isBrowser&&"UnknownError"===n.name&&"Internal error retrieving bucket data directory."===n.message)return{type:"ChromeUnknownInternalError",details:o,message:l().A.formatMessage(d.ChromeIndexedDBBucketError),error:n,closed:i,aborted:r};if("SecurityError"===n.name&&"IDBFactory.open() called in an invalid security context"===n.message)return{type:"SafariIframeSecurityError",details:o,message:"Cannot access IndexedDB in an iframe in your browser. Try opening Notion in a new window or use a different browser.",error:n,closed:i,aborted:r};if("UnknownError"===n.name&&"Connection to Indexed Database server lost. Refresh the page to try again"===n.message)return{type:"SafariIndexedDatabaseServerLost",details:o,message:`Cannot access IndexedDB due to a bug in Safari/WebKit. ${l().A.formatMessage(d.ReloadThisTab)}`,error:n,closed:i,aborted:r};if("InvalidStateError"===n.name&&"A mutation operation was attempted on a database that did not allow mutations."===n.message)return{type:"FirefoxPrivateBrowsing",details:o,message:"Firefox does not allow IndexedDB in Private Browsing. Try opening Notion in a normal window.",error:n,closed:i,aborted:r};if("NotFoundError"===n.name&&"The operation failed because the requested database object could not be found. For example, an object store did not exist but was being opened."===n.message)return{type:"FirefoxObjectStoreNotFound",details:o,message:`An IndexedDB object store does not exist. ${l().A.formatMessage(d.ReloadAllTabs)} ${l().A.formatMessage(d.FirefoxProfileCorrupted)}`,error:n,closed:!0,aborted:r};if("QuotaExceededError"===n.name){let e=l().A.formatMessage(d.noDiskSpace);return t.device.isBrowser&&(e=l().A.formatMessage(d.noDiskSpaceBrowserLimit)),{type:"QuotaFull",details:o,message:e,error:n,closed:i,aborted:r}}if(window.navigator.userAgent.includes("WindowsWechat")&&"AbortError"===n.name&&"Version change transaction was aborted in upgradeneeded event handler."===n.message)return{type:"UnsupportedWechat",details:o,message:"This device or application is unsupported.",error:n,closed:i,aborted:r}}return{type:"UnknownIndexedDBError",details:o,message:`An unknown IndexedDB error occurred. ${l().A.formatMessage(d.ReloadThisTab)}`,error:n||new Error("createIndexedDBError: error was falsy"),closed:i,aborted:r}}function f(e){if(e&&e.target&&"error"in e.target){const t=e.target.error;if(!t)return;return`${t.name}: ${t.message}`}}function v(e,t){if(e.stack)return e;try{const n=new Error(`${e.message} (${t})`);throw n.name=e.name,n}catch(n){return e.stack=(0,r().A)(n).stack,e}}m.longRunningTimeoutMs=5*n(720665).Xb,(0,n(604341).exposeDebugValue)("idbUnwrap",o().oA)},141333:(e,t,n)=>{n.d(t,{CR:()=>r,HD:()=>s,HJ:()=>l,Xg:()=>i,o7:()=>c,sj:()=>u,yE:()=>p});var o=n(296540);function i(e){const[t,n]=(0,o.useState)(0);return a(e,(0,o.useCallback)((()=>{const t=e.current;t&&n(t.scrollWidth)}),[e])),t}function r(e){const[t,n]=(0,o.useState)(0);return a(e,(0,o.useCallback)((()=>{const t=e.current;t&&n(t.scrollHeight)}),[e])),t}function a(e,t){(0,o.useEffect)((()=>{const n=e.current;if(n){const o=new ResizeObserver(t);function i(){if(n)for(const e of Array.from(n.children))o.observe(e)}t(),i();const r=new MutationObserver(i);return r.observe(n,{childList:!0}),()=>{r.disconnect(),o.disconnect()}}}),[e,t])}function s(e){const[t,n]=(0,o.useState)(0);return d(e,"content-box",(0,o.useCallback)((()=>{const t=e.current;t&&n(t.clientWidth)}),[e])),t}function l(e){const[t,n]=(0,o.useState)(0);return d(e,"border-box",(0,o.useCallback)((()=>{const t=e.current;t&&n(t.offsetWidth)}),[e])),t}function c(e){const[t,n]=(0,o.useState)(0);return d(e,"border-box",(0,o.useCallback)((()=>{const t=e.current;t&&n(t.offsetHeight)}),[e])),t}function d(e,t,n){(0,o.useEffect)((()=>{const o=e.current;if(o){const e=new ResizeObserver(n);return n(),e.observe(o,{box:t}),()=>e.disconnect()}}),[e,n,t])}function u(e){const[t,n]=(0,o.useState)(0);return m(e,(0,o.useCallback)((()=>{const t=e.current;t&&n(t.scrollLeft)}),[e])),t}function p(e){var t;const[n,i]=(0,o.useState)((null===(t=e.current)||void 0===t?void 0:t.scrollTop)??0);return m(e,(0,o.useCallback)((()=>{const t=e.current;t&&i(t.scrollTop)}),[e])),n}function m(e,t){(0,o.useEffect)((()=>{const n=e.current;if(n)return t(),n.addEventListener("scroll",t),()=>n.removeEventListener("scroll",t)}),[e,t])}},141465:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){}}const i=new o;(0,n(604341).exposeDebugValue)("ItemHoverStore",i);const r=i},142406:(e,t,n)=>{n.d(t,{R:()=>u,u:()=>p});n(898992),n(354520),n(581454);var o=()=>n(534177),i=()=>n(777447),r=()=>n(179034),a=()=>n(519831),s=()=>n(197959),l=()=>n(161479),c=()=>n(919709),d=()=>n(173979);function u(e){const{text:t,mapper:n,requester:o,resolveTemplateVariables:i,baseUrl:r,publicDomainName:a}=e;if(void 0!==t)return t.value.map((e=>p({token:{token:e,spaceId:t.spaceId},mapper:n,requester:o,resolveTemplateVariables:i,baseUrl:r,publicDomainName:a})))}function p(e){const{token:t,mapper:n,requester:u,resolveTemplateVariables:p,baseUrl:m,publicDomainName:g}=e;let f;const v=c().uPN(t.token).map((e=>{if(c().jIt(e)){const t=c().i$F(e);if(t){const e=n({requested:t,requester:u});if(e)return c().ld4(e.id,e.spaceId)}}if(c().sh$(e)){const t=c().cQR(e),o=(0,i().lX)({url:t,baseUrl:m,publicDomainName:g});if(o){const e=n({requested:{table:r().ev,id:o,spaceId:(0,l().e)(void 0)},requester:u});if(e)return c().Sez((0,i().wv)({pageId:e.id}))}}if(c().N53(e)){const t=c().T$c(e);if(t){const e=n({requested:{table:r().ev,id:t,spaceId:(0,l().e)(void 0)},requester:u});if(e)return c().bMp(e.id)}}if(c().iQL(e)){const o=c().Orm(e),i=n({requested:{table:s().$Y,id:o,spaceId:t.spaceId},requester:u});if(i)return c().aQj(i.id)}if(c().go0(e)&&p){const t=d().KC(e,p);if(t&&c().rie(t)&&p){const e=c().NcG(t);if(e===p.currentUserId){if(f)return;f=e}}return t}if(c().rie(e)&&p){const t=c().NcG(e);if(t===p.currentUserId){if(f)return;f=t}}if(c().iz3(e)){const t=c().GCe(e);if((0,c()._Nw)(t)||!t.collection)return e;const o=n({requester:u,requested:t.collection});if((null==o?void 0:o.table)!==a().Vl)return e;const i=t.property;return c().ESw({collection:o,property:i})}return e})).filter(o().O9);return c().Ey_(c().N8A(t.token),v)}},143197:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{limitParents:new WeakMap}}setLimitParents(e,t){this.state.limitParents.set(e,t),this.emit()}removeLimitParents(e){this.state.limitParents.delete(e),this.emit()}}const i=new o},143857:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},144114:(e,t,n)=>{n.d(t,{BH:()=>Y,CD:()=>D,Cy:()=>M,EI:()=>J,FP:()=>ne,Gy:()=>ae,Hp:()=>pe,I1:()=>oe,JF:()=>ue,JR:()=>E,M6:()=>K,O5:()=>re,O9:()=>O,OU:()=>B,Qf:()=>L,S1:()=>ie,SY:()=>le,TM:()=>Q,TV:()=>Z,ZP:()=>se,Zz:()=>X,a3:()=>de,cp:()=>$,k_:()=>H,kv:()=>U,md:()=>W,mi:()=>N,nV:()=>ee,of:()=>z,pk:()=>ce,qg:()=>F,sg:()=>G,sr:()=>V,up:()=>P,zX:()=>j,ze:()=>te});n(898992),n(354520),n(672577),n(581454);var o=()=>n(660237),i=()=>n(842599),r=()=>n(857639),a=()=>n(480388),s=()=>n(96689),l=()=>n(313127),c=()=>n(100622),d=()=>n(496603),u=()=>n(534177),p=()=>n(796756),m=()=>n(449506),g=()=>n(579627),f=()=>n(246826),v=()=>n(426116),h=()=>n(72234),_=()=>n(751156),b=()=>n(989423),y=()=>n(972435),S=()=>n(640653),w=()=>n(719431),k=()=>n(155959),I=()=>n(351360),x=()=>n(508496),A=()=>n(630116),C=()=>n(151168),T=()=>n(607859);function M(e){return e.isOnboarding&&("desktop_join_or_create_space"===e.flow||"mobile_join_or_create_space"===e.flow)}function P(e){return e.isOnboarding&&("desktop_cold_start"===e.flow||"mobile_cold_start"===e.flow||"desktop_joinable_spaces"===e.flow||"mobile_joinable_spaces"===e.flow||"desktop_redirect"===e.flow||"mobile_redirect"===e.flow)}function B(e){const{state:t}=e;return P(t)}const R=(0,n(959013).YK)({personalWorkspaceName:{defaultMessage:"{userName}’s Notion",id:"onboardingHelpers.personalWorkspaceName"},mailPersonalWorkspaceName:{defaultMessage:"My personal workspace",id:"onboardingHelpers.mailPersonalWorkspaceName"},teamWorkspaceName:{defaultMessage:"{userName}’s Workspace",id:"onboardingHelpers.teamWorkspaceName"}});function E(e,t){return t.formatMessage(R.personalWorkspaceName,{userName:e.trim()})}function D(e){return e.formatMessage(R.mailPersonalWorkspaceName)}function N(e,t){return t.formatMessage(R.teamWorkspaceName,{userName:e.trim()})}function L(e){return e.isOnboarding&&Boolean(a().$.find((t=>t===e.stage)))}function O(e){return e.isOnboarding&&(Boolean(a().$.find((t=>t===e.stage)))||"invite"===e.stage)}function U(e){return e.isOnboarding&&"template_optout"===e.stage}function F(e){const t=e.userStore.getEmail();if(t&&e.isUserDomainJoinable)return(0,i().zN)(t)}function V(e){return"team"===e}function j(e){return e.device.isMobileNative&&(0,k().T)("supportsNativeHome")&&e.device.isAndroid}async function z(e){var t,n;T().default.setState({...T().default.state,isLoading:!0});const{disableRedirects:i,environment:a}=e;r().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"initializeOnboardingDataLoad"}});const[s,l,c,d,p,g,f]=await Promise.all([m().callApi({eventName:"getJoinableSpaces",environment:a,data:{}}),(0,S().ex)({environment:a,disableRedirectUrl:i}),m().callApi({eventName:"isUserDomainJoinable",environment:a,data:{}}),m().callApi({eventName:"isEmailEducation",environment:a,data:{}}),m().callApi({eventName:"validateUserCanCreateWorkspace",environment:a,data:{}}),m().callApi({eventName:"getVerifiedEmailDomain",environment:a,data:{}}),m().callApi({eventName:"getGeoIpLocation",environment:a,data:{}})]);r().log({level:"info",from:"onboardingHelpers",type:"loadOnboardingData",data:{message:"completedOnboardingDataLoad",miscDataToConvertToString:{joinableSpacesResponseType:s.type,joinableSpacesResponseStatus:s.status,joinableSpacesResponseResultsLength:"success"===s.type?s.data.results.length:void 0,userRedirectDataId:l.userRootStore.id,userRedirectDataFirstSpaceViewId:null===(t=l.firstSpaceView)||void 0===t?void 0:t.id,userRedirectDataLastVisitedSpaceViewId:null===(n=l.lastVisitedSpaceView)||void 0===n?void 0:n.id,isUserDomainJoinableResponseType:c.type,isUserDomainJoinableResponseStatus:c.status,validateUserCanCreateWorkspaceStatus:p.status}}}),T().default.setState({...T().default.state,isLoading:!1});const v={isUserDomainJoinable:"success"===c.type&&c.data.isJoinable,isEducationPlanEligible:"success"===d.type&&d.data.isEligible,canUserCreateSpace:"success"!==p.type||p.data.canUserCreateSpace,isUserUsingVerifiedDomain:"success"===g.type&&(0,u().O9)(g.data.id),...l,countryCode:"success"===f.type&&(0,o().Ef)(f.data.countryCodeFromIp)?f.data.countryCodeFromIp:void 0,performanceMarketingTerm:(0,C().TQ)()};return"success"===s.type?{joinableSpaceData:s.data,...v}:{joinableSpaceData:{results:[]},...v}}async function H(e){const t=await m().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});return"success"===t.type&&(0,o().Ef)(t.data.countryCodeFromIp)?t.data.countryCodeFromIp:void 0}function W(e){const{onboardingData:t,isNewUserFlow:n}=e,{userRootStore:o}=t,{results:i}=t.joinableSpaceData,r=o.getSpaceViewStores().map((e=>e.getSpaceId()));return n?i:i.filter((e=>r.indexOf(e.id)<0))}function q(e){return e.isOnboarding&&"profile"!==e.stage&&"error"!==e.stage}function K(e){var t,n,o;const{currentSpaceStore:i}=I().default.state,r=(0,S().p3)(),a="userPersona"in e?e.userPersona:r.function,s="userRole"in e?e.userRole:r.role,l="companySize"in e?e.companySize:r.companySize,c="planSelection"in e?e.planSelection:r.intent,d="useCases"in e?e.useCases:r.useCases,u="categories"in e?e.categories:r.categories,p="collaborativeIntent"in e?e.collaborativeIntent:r.collaborativeIntent;return{flow_name:e.isOnboarding?e.flow:"not_defined",flow_id:e.isOnboarding?e.flowId:void 0,stage:e.isOnboarding?e.stage:"not_defined",initial_workspace_type:q(e)?e.spaceJoinOrCreate:void 0,is_new_onboarding:te(e),is_create_or_join:M(e),stage_number:e.isOnboarding?e.stageNumber:void 0,num_of_joinable_spaces:e.isOnboarding&&"workspace_choose"===e.stage?(null===(t=e.joinableSpaces)||void 0===t?void 0:t.length)||0:void 0,historical_stages:e.isOnboarding?e.historicalStages:void 0,selectedPresets:e.isOnboarding&&"workspace_setup"===e.stage?e.selectedPresets:void 0,user_persona:a,user_team_role:s,user_use_cases:d,user_categories:u,user_company_size:l,plan_selection:c,plan_type:null==i?void 0:i.getPlanType(),collaborative_intent:p,stage_duration_in_ms:e.isOnboarding&&null!==(n=e.stageStats)&&void 0!==n&&n.startedTimeStampMs?Date.now()-(null===(o=e.stageStats)||void 0===o?void 0:o.startedTimeStampMs):void 0,onboarding_templates:void 0,trial_id:e.isOnboarding?e.trialId:void 0,performance_marketing_term:e.isOnboarding?e.performanceMarketingTerm:void 0}}function G(e){const{redirectSpaceId:t,redirectPageId:n,redirectBlockId:o,forkPageBlockId:i,hasExplicitAccessToRedirectPage:r,canJoinRedirectSpace:a,publicAccessPageId:s,oauthAuthorizationParams:l,inviteCode:c,performanceMarketingTerm:d}=e;return l?{type:"oauth_authorization_redirect",...l}:o?{type:"redirect_block",blockId:o}:i?{type:"fork_page",pageId:i}:!s||r||a?!t||r||a?t&&n&&r&&!a?{type:"guest_redirect",pageId:n,spaceId:t}:t&&n&&a?{type:"redirect_page",pageId:n,spaceId:t}:t&&c&&a?{type:"team_invite_redirect",spaceId:t,inviteCode:c}:t&&a?{type:"redirect_space",spaceId:t}:d?{type:"performance_marketing_template",pageId:n}:{type:"getting_started_page"}:{type:"invalid"}:{type:"public_access_page_redirect",pageId:s}}async function $(e,t){const{onboardingData:n,name:o,profilePhoto:i,password:r,emailOptIn:a}=e,s=n.userStore;b().mt(t,{email_optin_product_updates_and_releases:a,email_optin_newsletters_and_thought_leadership:a,email_optin_user_research_and_surveys:a,email_optin_sales_outreach:a,email_optin_events_and_resources:a,email_optin_product_education_and_how_tos:a,email_optin_notion_for_startups:a}),_().createAndCommit({userAction:"onboardingHelpers.setProfileData",environment:t,canUndo:!0,perform:e=>{const t={...i&&{profile_photo:i}};t.name=o,f().zv({store:s,data:t,transaction:e})}});const l=await w().shouldCreatePassword(t)&&!ee();r&&l&&await m().callApi({eventName:"setPassword",environment:t,data:{newPassword:r,sendEmail:!1}})}function Y(e){if(!x().default.checkGate({gateName:"survey_data_writes"}))return;const{environment:t,state:n,spaceStore:o,spaceViewStore:i}=e,r=(new Date).getTime();if(i){const e=l().De({maybeFunction:n.userPersona,guessedFunctionVersion:4,maybeRole:n.userRole,guessedRoleVersion:2,maybeCategories:n.categories,guessedCategoriesVersion:1,maybeEducationRole:n.userEducationRole,guessedEducationRoleVersion:1,maybeEducationLevel:n.userEducationLevel,guessedEducationLevelVersion:1,maybeNotionUseFrequency:n.notionUseFrequency,guessedNotionUseFrequencyVersion:1,collectedFrom:"onboarding",collectedAt:r});void 0!==e&&h().OF(t,e,i)}if(o){const e=l()._Z({maybeCollaborativeIntent:n.collaborativeIntent,guessedCollaborativeIntentVersion:1,maybeIntent:n.planSelection,guessedIntentVersion:1,maybeCompanySize:n.companySize,guessedCompanySizeVersion:2,maybeUseCases:n.useCases,guessedUseCasesVersion:3,collectedFrom:"onboarding",collectedAt:r});void 0!==e&&v().DJ(t,e,o)}}async function Q(e,t){const{spaceId:n,onboardingData:o}=e;if(!n)return;const i=A().SL.createChildStore(o.userRootStore,{table:s().NX,id:n});await async function(e,t,n){t.isChecked&&t.joinableUserEmailDomain&&await v().Yk({environment:e,emailDomains:[t.joinableUserEmailDomain],spaceStore:n})}(t,e,i);const{emails:r}=e,a=d().sb(r).map((e=>({type:"newUser",value:{email:e},source:"email"})));r.length>0&&(await g().eP({environment:t,store:i,inviteTargets:a,inviteRole:"editor",isOnboarding:!0,invite:{inviteOrigin:"onboarding_invite"}}),p().gA(t,{...K(e),emails:e.emails,auto_join_space:e.isChecked,is_bulk_invite:e.isBulkInvite}))}function Z(e){const{userStore:t}=e,n=y().A.getIntl(),o=t.getFullName(n),i=t.getProfilePhoto()||null;if(o)return{name:o,profilePhoto:i,password:null,prefilled:!0}}const X="inviteCode";function J(e){return(e.isBulkInvite?e.emailTokens:e.emailInputs.filter((e=>""!==e.sanitizedEmail))).length>0}function ee(){var e;const{currentUserSettingsStore:t}=I().default.state;return t&&t.isReady()&&"email-password"===(null===(e=t.getSettings())||void 0===e?void 0:e.mobile_ads_signup_variant)}function te(e){return e.isOnboarding&&e.isNewUser}function ne(e){return e.device.isMobileBrowser}function oe(e){return void 0!==e&&!e.canJoinSpace&&e.guestPageIds.length>0}function ie(e){return"guest_redirect"===e.type?"guest":"member"}function re(e){if(oe(e)){const t={type:"guest_redirect",pageId:e.guestPageIds[0],spaceId:e.id};return{spaceId:e.id,redirectData:t,spaceJoinOrCreate:"join"}}return{spaceId:e.id,spaceJoinOrCreate:"join"}}const ae={fontSize:12,color:c().Ay.mediumTextColor,fontWeight:n(284371).Wy.medium,lineHeight:"135%",marginTop:20,marginBottom:4},se={marginTop:14,marginBottom:14},le={marginTop:8,marginBottom:8};function ce(e){return{color:e.text.secondary}}const de={width:60},ue={marginTop:14,marginBottom:8,fontSize:16,fontWeight:600},pe={boxShadow:`0 0 0 1px ${c().Ay.red}`}},145192:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(540946),r=()=>n(959013),a=()=>n(771467),s=()=>n(197194),l=()=>n(645873),c=n(474848);function d(e){(0,o.useEffect)((()=>{s().Uw()}),[]);const t=(0,r().tz)();return(0,c.jsx)(l().u2,{dependency:a().V,children:n=>(0,c.jsx)(i().yC,{intl:t,katex:n,...e})})}},145214:(e,t,n)=>{n.d(t,{A:()=>u});n(898992),n(354520);var o=n(296540),i=()=>n(821062),r=n(474848);const a=200,s=0,l="ease";function c(e){return"number"==typeof e?`${e}px`:e}function d(e){if(0!==e)return`${e}ms`}const u=o.forwardRef((function(e,t){let{tag:u,initial:p,animate:m,exit:g,skip:f,config:v,visible:h=!0,forceCompositeLayer:_,style:b,onAnimationStart:y,onAnimationEnd:S,...w}=e;const[k,I]=(0,o.useState)(!1),x=function(e,t){const{translateX:n,translateY:o,scale:i,scaleX:r,scaleY:a,rotate:s,...l}=e,d=[void 0!==n&&`translateX(${c(n)})`,void 0!==o&&`translateY(${c(o)})`,t&&"translateZ(0)",void 0!==i&&`scale(${i})`,void 0!==r&&`scaleX(${r})`,void 0!==a&&`scaleY(${a})`,void 0!==s&&`rotate(${s})`].filter((e=>Boolean(e))).join(" ");return d?{...l,transform:d}:l}(function(e,t,n,o,i){if(!i)return e??t;if(!o)return n??t;return t}(p,m,g,h,k),Boolean(_)),A=(0,o.useRef)(x),C=(0,o.useRef)(!1),T=(0,o.useRef)(null),M=(0,n(479490).A)("(prefers-reduced-motion: reduce)")||0===(null==v?void 0:v.duration)?1:(null==v?void 0:v.duration)??a,P=(null==v?void 0:v.delay)??s,B=(0,o.useCallback)((()=>{C.current&&(C.current=!1,I(h),S&&S(h))}),[S,h]),R=(0,o.useCallback)((()=>{C.current=!0,y&&y(!0),null!==T.current&&window.clearTimeout(T.current),T.current=window.setTimeout(B,M+P)}),[y,B,M,P]);(0,o.useLayoutEffect)((()=>{if(f)return void I(h);const e=p&&!(0,i().A)(p,m);if(h&&!k){if(e){R();const e=requestAnimationFrame((()=>I(!0)));return()=>cancelAnimationFrame(e)}I(!0)}const t=g&&!(0,i().A)(g,m);h||t||(C.current=!1,I(!1)),k&&!(0,i().A)(x,A.current)&&R()}),[m,x,g,p,R,f,h,k]),(0,o.useEffect)((()=>{A.current=x}),[x]);const E=Object.keys(x),D=f?{}:{transitionDuration:d(M),transitionDelay:d(P),transitionTimingFunction:(null==v?void 0:v.timingFunction)??l,transitionProperty:E.join(",")||"none"},N=u??"div",L=k||h?(0,r.jsx)(n(753004).q.Provider,{value:!h,children:(0,r.jsx)(N,{...w,style:{...b,...x,...D},ref:t})}):null;return(0,r.jsx)(n(11048).A,{name:"AnimatedV2",children:L})}))},147577:(e,t,n)=>{n.d(t,{fi:()=>i,oR:()=>r,pN:()=>o});const o=275,i=90,r=90},147588:(e,t,n)=>{n.d(t,{Y:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("file",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.35645 15.4678H11.6367C13.0996 15.4678 13.8584 14.6953 13.8584 13.2256V7.02539C13.8584 6.0752 13.7354 5.6377 13.1406 5.03613L9.55176 1.38574C8.97754 0.804688 8.50586 0.667969 7.65137 0.667969H4.35645C2.89355 0.667969 2.13477 1.44043 2.13477 2.91016V13.2256C2.13477 14.7021 2.89355 15.4678 4.35645 15.4678ZM4.46582 14.1279C3.80273 14.1279 3.47461 13.7793 3.47461 13.1436V2.99219C3.47461 2.36328 3.80273 2.00781 4.46582 2.00781H7.37793V5.75391C7.37793 6.73145 7.86328 7.20312 8.83398 7.20312H12.5186V13.1436C12.5186 13.7793 12.1836 14.1279 11.5205 14.1279H4.46582ZM8.95703 6.02734C8.67676 6.02734 8.56055 5.9043 8.56055 5.62402V2.19238L12.334 6.02734H8.95703ZM8.59473 12.7266V10.6279L8.54004 9.56152L9.06641 10.1152L9.59277 10.6484C9.68848 10.7646 9.8457 10.833 9.98926 10.833C10.2969 10.833 10.5293 10.6143 10.5293 10.3066C10.5293 10.1357 10.4678 10.0127 10.3379 9.90332L8.45117 8.16699C8.29395 8.02344 8.16406 7.96191 7.99316 7.96191C7.8291 7.96191 7.69922 8.02344 7.54199 8.16699L5.65527 9.90332C5.52539 10.0127 5.46387 10.1357 5.46387 10.3066C5.46387 10.6143 5.68945 10.833 6.00391 10.833C6.14746 10.833 6.29785 10.7646 6.40039 10.6484L6.92676 10.1152L7.45312 9.56152L7.39844 10.6279V12.7266C7.39844 13.0547 7.67188 13.3008 7.99316 13.3008C8.32129 13.3008 8.59473 13.0547 8.59473 12.7266Z"})})},148024:(e,t,n)=>{n.d(t,{$Z:()=>a,DQ:()=>d,FH:()=>c,Kc:()=>u,VX:()=>s,wF:()=>l});var o=()=>n(989423),i=()=>n(644914),r=()=>n(508496);function a(e,t){o().vd(e,"open_support_chat",t)}function s(e,t){o().vd(e,"click_help",{from:t.from,qna_session_id:t.qnaSessionId}),r().default.logEvent("click_help")}function l(e,t){o().vd(e,"click_help_item",{...t,...(0,i().hX)({environment:e})}),"sales_chat"===t.item&&r().default.logEvent("click_help_item")}function c(e,t){o().vd(e,"global_click_learn",t)}function d(e){o().vd(e,"zendesk_metadata_open_messenger")}function u(e){o().vd(e,"zendesk_metadata_signup")}},148777:(e,t,n)=>{n.d(t,{PE:()=>u,So:()=>c,Yp:()=>d,hQ:()=>p});var o=()=>n(351360),i=()=>n(968172),r=()=>n(20199),a=()=>n(713205),s=()=>n(314648);let l={};function c(e){l=e(l)}function d(){return l}function u(e){var t,n,l,c,d,u,m,g,f,v,h;const{environment:_,overrideCurrentUserId:b,overrideSpaceId:y,overrideSpaceViewStore:S,overrideLocalSearchableBlocksCache:w}=e,k=b??(null==_||null===(t=_.currentUser)||void 0===t?void 0:t.id),I=y??(null===(n=o().default.state.currentSpaceStore)||void 0===n?void 0:n.id),x=S??o().default.state.currentSpaceViewStore,A=Boolean(I),C=Boolean(x),T=w??r().A.state.localSearchableBlocksCache,M=I&&k?s().default.getUserSignals({spaceId:I,userId:k}):void 0,{userSignalsLoaded:P,userSignalsStats:B}={userSignalsLoaded:Boolean(M),userSignalsStats:M?{recentPages:null==M||null===(l=M.recentPages)||void 0===l?void 0:l.length,similarUserRecentPages:null===(c=Object.keys(null==M?void 0:M.similarUserRecentPages))||void 0===c?void 0:c.length,topPages7dPageView:null==M||null===(d=M.topPages7dPageView)||void 0===d?void 0:d.length,editedPages:null==M||null===(u=M.editedPages)||void 0===u?void 0:u.length,similarUsersEditedPages:null==M||null===(m=M.similarUsersEditedPages)||void 0===m?void 0:m.length}:void 0},R=I?i().A.get(I):void 0,E=Boolean(R),D=(null==R?void 0:R.length)||0,N=I&&k?null===(g=a().A.getStore({spaceId:I,userId:k}))||void 0===g?void 0:g.getState():void 0,L=Boolean(null==N?void 0:N.pages),O=Object.keys((null==N?void 0:N.pages)??{}).length,U=Boolean(null==N||null===(f=N.config)||void 0===f?void 0:f.isBackfilledFromRecentPageVisits),F=null==N||null===(v=N.config)||void 0===v?void 0:v.backfillTime;return{currentSpaceLoaded:A,currentSpaceViewLoaded:C,globalRecentPagesLoaded:E,globalRecentPagesSize:D,...p(T),userSignalsLoaded:P,userSignalsStats:B,searchFrecencyLoaded:L,searchFrecencySize:O,searchFrecencyBackfilled:Boolean(U),searchFrecencyBackfillTime:F,userId:k,spaceId:I,hasPersistedRecordCache:Boolean(null===(h=_.defaultRecordCache)||void 0===h?void 0:h.persistedRecordCache)}}function p(e){var t;return{localSearchableBlocksCacheLoaded:Boolean(e),localSearchableBlocksCacheSize:(null==e||null===(t=e.blocks)||void 0===t?void 0:t.documentCount)||0,localSearchableBlocksCacheBlockSourceCount:(null==e?void 0:e.blockSourceCount)||void 0}}},150193:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(370614).A)},150866:(e,t,n)=>{n.d(t,{QP:()=>p,WW:()=>g,eM:()=>m,j8:()=>d,oq:()=>c,w:()=>l});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(970560),a=()=>n(725976),s=n(474848);const l=(0,o.createContext)(0);function c(e){let{children:t,value:n}=e;const i=(0,o.useContext)(l);return(0,s.jsx)(l.Provider,{value:n+i,children:t})}l.displayName="StickyPortalRootOffsetContext";const d=(0,o.createContext)({current:null});d.displayName="StickyPortalRootContext";const u="default",p=(0,o.createContext)({allPortals:{ceiling:Object.create(null),floor:Object.create(null)},setPortal:()=>{},requestPortal:()=>{}});function m(e){const{isMobile:t}=(0,i().Y0)(),n=(0,s.jsx)(d.Provider,{value:e.nodeRef,children:e.children});return t?(0,s.jsx)(r().Q.Provider,{value:!0,children:n}):n}function g(e){const[t,n]=(0,o.useState)([u]),[i,r]=(0,o.useState)(Object.create(null)),[l,c]=(0,o.useState)(Object.create(null)),d=(0,o.useCallback)(((e,t,n)=>{("ceiling"===e?r:c)((e=>({...e,[t]:n})))}),[]),m=(0,o.useCallback)((e=>{n((t=>t.includes(e)?t:t.concat([e])))}),[]),g=(0,o.useMemo)((()=>({allPortals:{ceiling:i,floor:l},setPortal:d,requestPortal:m})),[i,l,m,d]),v=i[u],h=l[u],_=(0,o.useMemo)((()=>({ceiling:v,floor:h,stickyHorizontally:!1})),[v,h]);return(0,s.jsxs)(p.Provider,{value:g,children:[t.map((e=>(0,s.jsx)(f,{location:"ceiling",name:e},e))),(0,s.jsx)(a().m.Provider,{value:_,children:e.children}),t.map((e=>(0,s.jsx)(f,{location:"floor",name:e},e)))]})}p.displayName="StickyPortalTargetContext";const f=o.memo((function(e){let{location:t,name:n}=e;const{setPortal:i}=(0,o.useContext)(p),r=(0,o.useRef)(null);return(0,o.useEffect)((()=>{i(t,n,r.current)}),[n,t,i]),(0,s.jsx)("div",{className:"sticky-portal-target","data-sticky-stack-name":n,ref:r,style:{position:"sticky",zIndex:85,width:"100%",["ceiling"===t?"top":"bottom"]:0,left:0,height:"ceiling"===t?0:void 0,flex:0}})}))},151059:(e,t,n)=>{n.d(t,{A:()=>l});var o=()=>n(436604),i=()=>n(848776),r=()=>n(671887);function a(e,t){n(17022).A.withListenerIgnored((()=>{e&&t&&r().D.setState({...r().D.state,[e]:t})}))}const s=new(i().U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){let{spaceId:r,userId:s}=t,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const c=await Promise.resolve().then(n.bind(n,449506));if((0,n(807778).JM)()){const t=await c.callApi({eventName:"getPublicSpaceData",environment:e,userId:s,data:{type:"space-ids",spaceIds:[r]},headers:{[o().B3]:r}});var d,u;if("success"===t.type&&t.data.results.length>0&&t.data.results[0])a(null===(d=t.data.results[0])||void 0===d?void 0:d.id,null===(u=t.data.results[0])||void 0===u?void 0:u.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}return(0,i().y)({environment:e,namespace:"PublicSpaceData",key:r,forceRefetch:l,getValue:async()=>{const t=await c.callApi({eventName:"getPublicSpaceData",environment:e,data:{type:"space-ids",spaceIds:[r]},headers:{[o().B3]:r}});var n,i;"success"===t.type&&t.data.results.length>0&&t.data.results[0]&&a(null===(n=t.data.results[0])||void 0===n?void 0:n.id,null===(i=t.data.results[0])||void 0===i?void 0:i.spaceShortId);return"success"===t.type?t.data.results[0]??void 0:void 0}})}));n(604341).exposeDebugValue("PublicSpaceDataStore",s);const l=s},151168:(e,t,n)=>{n.d(t,{TQ:()=>h,Zr:()=>m,Ot:()=>g,E5:()=>p,KF:()=>c,Os:()=>v,EE:()=>f,Q8:()=>u,ie:()=>d});n(814603),n(147566),n(198721);var o=()=>n(677338),i=()=>n(419494);const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(i().Ay)({namespace:e,important:t,trackingType:"necessary"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}}(i().Bq,!1);var a=()=>n(61844),s=()=>n(939768),l=()=>n(807778);function c(e){return Boolean("upwork"===e)}function d(e,t){(0,l().cB)(e,t)&&r.set("trialUpsell",e)}function u(){const e=(0,s().iW)(new URL(window.location.href).toString(),(0,o().JU)());null!=e&&e.trial_source&&(e.trial_source=void 0,(0,o().Fo)(e)),r.remove("trialUpsell")}function p(){var e;const t=null===(e=(0,o().JU)())||void 0===e?void 0:e.trial_source;return t&&c(t)?t:r.get("trialUpsell")??"plus"}function m(){return"business"===p()?"business":"plus"}function g(e){const t=p(),n=(0,a().Fo)();return e&&"upwork"!==t?n.enterprise:t&&"upwork"===t?n.upwork:n.default}function f(){return"upwork"===p()}function v(){return"perfmark"===p()}function h(){return r.get("performanceMarketingTerm")}},151779:(e,t,n)=>{n.d(t,{yv:()=>Re,Yw:()=>Pe});var o=()=>n(747186),i=()=>n(249386),r=()=>n(885443),a=()=>n(917629),s=()=>n(763884),l=()=>n(967786),c=()=>n(861017),d=()=>n(427704),u=()=>n(646178),p=()=>n(677338);var m=()=>n(449412),g=()=>n(530199),f=()=>n(763824),v=()=>n(534177),h=()=>n(939768),_=()=>n(662453),b=()=>n(780054),y=()=>n(671263),S=()=>n(549500),w=()=>n(47373),k=()=>n(640653),I=()=>n(551694);function x(e){let{environment:t,spaceStore:n}=e;(function(e){let{environment:t,spaceStore:n}=e;if(!n||!(0,k().IL)(n)||!(0,w().nJ)())return!1;const o=null==n?void 0:n.getDisableGuestMembershipRequests();if((0,v().O9)(o)&&!1===o)return!0;if(!(0,v().O9)(o)){const e=null==n?void 0:n.getPublicSpaceData();if((0,v().O9)(e)&&!1===e.disableGuestMembershipRequests)return!0}return!1})({environment:t,spaceStore:n})&&I().A.open()}var A=()=>n(989423),C=()=>n(68465),T=()=>n(571963),M=()=>n(965378),P=()=>n(836251),B=()=>n(327300),R=()=>n(628315),E=()=>n(215152),D=()=>n(12145),N=()=>n(30175),L=()=>n(500472),O=()=>n(351360),U=()=>n(430483),F=()=>n(57605),V=()=>n(508496),j=()=>n(961581),z=()=>n(606932),H=()=>n(927080),W=(n(898992),n(672577),()=>n(584262)),q=()=>n(959013),K=()=>n(209660),G=()=>n(436572),$=()=>n(426116),Y=()=>n(214006);const Q=(0,q().YK)({workspaceNotFound:{id:"connectedAppUpsells.workspaceNotFound",defaultMessage:"Unable to find the workspace linked. Please try logging in then visiting the settings page."}});var Z=()=>n(19575),X=()=>n(807778),J=()=>n(151168),ee=()=>n(973891),te=()=>n(338907),ne=()=>n(559926),oe=()=>n(452939),ie=()=>n(252105),re=()=>n(541258),ae=()=>n(669484),se=()=>n(260488),le=()=>n(994877),ce=()=>n(201938),de=()=>n(857783),ue=()=>n(416845),pe=()=>n(498212),me=()=>n(898486),ge=()=>n(972435),fe=()=>n(449506),ve=()=>n(901389),he=()=>n(435009);const _e=(0,q().YK)({goBack:{id:"router.githubStudentCallback.goBack",defaultMessage:"Go back"},studentPackUpgradeSuccess:{id:"router.githubStudentCallback.success.message",defaultMessage:"Your workspace has been upgraded to the Education Plus plan."},studentPackUpgradeError:{id:"router.githubStudentCallback.error.message",defaultMessage:"Failed to upgrade to the Education Plus plan. Please try again or reach out to team@makenotion.com."},studentPackUpgradeNoCode:{id:"router.githubStudentCallback.noCode.message",defaultMessage:"Failed to authenticate your GitHub account. Please try again later."},studentPackUpgradeNoSpace:{id:"router.githubStudentCallback.noSpace.message",defaultMessage:"We could not locate your workspace. Please try again."}});const be={workflowDeeplinkActions:new(n(645873).O2)("workflowDeeplinkActions",(()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(10399)]).then(n.bind(n,211619))))};var ye=()=>n(464510),Se=(n(16280),()=>n(857639)),we=()=>n(179034),ke=()=>n(96689),Ie=()=>n(753035),xe=()=>n(630116),Ae=()=>n(468602),Ce=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),()=>n(34542));const Te=new Set(["1d2d0ce4-3be0-49e4-92ca-3bb0c3de1a6e","6f574aa0-ea3e-4039-bd12-eef2b9c797e1","c92bcc92-bae6-4018-ba72-626108d28bb1","46ec1b0e-c5d5-4476-99c1-0dc578190279","b1b35f81-c752-4251-94de-5813c850d159"]);async function Me(e,t){if(!e.currentUser.isLoggedIn())return Ae().Y({currentUserId:void 0,blockId:t.blockId}),void ye().Zv({environment:e,page:t});await async function(e,t){Ie().A.reset(),await Promise.all([O().default.waitUntil((()=>void 0!==O().default.state.currentUserRootStore))]);const{currentUserRootStore:n}=O().default.state;if(void 0===n)throw new Error("User root is not defined.");const{blockId:o,workspaceId:i}=t;if(!o)throw new Error("Block ID is not defined.");const r=xe().Bv.createChildStore(n,{table:we().ev,id:o}),a=i&&(0,pe().c_)(i)?xe().SL.createChildStore(n,{table:ke().NX,id:(0,pe().G2)(i)}):void 0;await Promise.all([r.load(),null==a?void 0:a.load(),V().default.waitUntilStatsigReady()]),he().oo({environment:e,url:d().JZ.root,callback:()=>{!async function(e){const{environment:t,currentUserRootStore:n,blockStore:o,spaceStore:i,isFromTemplateGallery:r}=e;if(i&&function(e){let{blockStore:t,spaceStore:n}=e;if(!t.isReady()||!n.isReady()||!n.canEdit())return!1;const o=t.getParentId();return!!o&&Te.has(o)}({blockStore:o,spaceStore:i}))return Ie().A.setState({open:!1,isFromTemplateGallery:r,isFromDuplicateParam:!0}),void(await async function(e){const{environment:t,currentUserRootStore:n,blockStore:o,spaceStore:i}=e;if(!o.isReady()||!i.isReady()||!i.canEdit())return;const r=n.getSpaceViewPointers().find((e=>e.spaceId===i.id));if(!r)return;const a=xe().vH.createChildStore(n,r);await a.load(),await(0,Ce().Fq)({environment:t,blockStore:o,spaceStore:i,spaceViewStore:a})}({environment:t,currentUserRootStore:n,blockStore:o,spaceStore:i}));Ie().A.setState({open:!0,variant:"modal",blockStore:o,spaceStore:void 0,spaceViewStore:void 0,teamStore:void 0,isFromTemplateGallery:r,isFromDuplicateParam:!0})}({environment:e,currentUserRootStore:n,blockStore:r,spaceStore:a,isFromTemplateGallery:"notion_template_gallery"===t.from})}})}(e,t).catch((n=>{Se().log({level:"error",from:"templateRouteActions.handleTemplateDuplicationRoute",type:"handleTemplateDuplicationRouteForLoggedInUsersError",data:{miscDataToConvertToString:{nextRoute:t}},error:n}),he().oo({environment:e,url:d().JZ.root})}))}async function Pe(e){const{id:t,action:w,href:k,environment:I,updateMobileTabbedRouterArgs:q}=e,{RouterStore:Se,currentUser:we,TabbedRouterStore:ke}=I,Ie=c().parseRoute({url:k,isMobile:I.device.isMobile,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,protocol:b().A.protocol,currentUrl:window.location.href});if((0,r().O8)(window.location.href),"root"===Ie.name&&I.device.isElectronMail)return;const xe="on"===V().default.getGroup("preload_prewarm_tab_v2"),Ae="on"===V().default.getGroup("prefetch_on_navigation");m().Cr(Ie.name);const Ce=Se.state.route,Te=s().K.get({userId:we.id,key:t});Se.setState({id:t,historyState:Te,action:w,route:Ie,initialRoute:Se.state.initialRoute||Ie}),Ce&&Ie&&((0,T().isPrewarmedTabInitialRender)(I)?(xe&&ae().performPrefetchRequests({environment:I,currentUserId:we.id}),j().A.update((e=>({...e,prewarmedTabAppStartTimeOverride:performance.now()})))):(Ae&&ae().performPrefetchRequests({environment:I,currentUserId:we.id}),z().A.markNavigationStartTime(Ce,Ie)));if("page"===(null==Ce?void 0:Ce.name)&&"page"===Ie.name&&Ie.blockId!==Ce.blockId&&Ce.blockId&&!Ie.workflowViewType&&de().u3({environment:I,targetId:Ce.blockId}),null!=q&&q.forceUpdate||P().Al(I)&&(null==q||!q.tabbedRouterStateAlreadyUpdated)){const qe={type:"web",url:h().ZO(k),route:Ie};ke.updateWithWebPage({page:qe,action:null!=q&&q.forceUpdate?"replace":w,updateMobileTabbedRouterArgs:q})}const Pe=h().qg(k),Ee=Pe.query[u().P];Ee&&(0,l().R9)({currentUserId:we.id,promoCode:Ee});const De=Pe.query[i().BM];De&&((0,p().Ug)(De),Be(i().BM)),"page"===Ie.name||c().ak[Ie.name]||oe().TG(I,k);const{connectedAppEntrypoint:Ne,workspaceId:Le,upsellProduct:Oe}=function(e,t){const n={connectedAppEntrypoint:void 0,workspaceId:void 0,upsellProduct:void 0};if(!e)return n;const o=function(e){if(e)return"ai"===e?"ai":void 0}(t),i=e.split(".");if(1===i.length){const e=i[0];return"mail_app"!==e&&"calendar_app"!==e?n:{connectedAppEntrypoint:e,upsellProduct:o,workspaceId:void 0}}if(2!==i.length)return n;const[r,a]=i,s=!a,l="mail_app"!==r&&"calendar_app"!==r;if(s||l)return n;return{connectedAppEntrypoint:r,workspaceId:a,upsellProduct:o}}(Pe.query.connected_app_upgrade,Pe.query.product);if(Ne&&(function(e){var t;const{environment:n,workspaceId:o,connectedAppEntrypoint:i,upsellProduct:r}=e,a=null===(t=O().default.state.currentSpaceStore)||void 0===t||null===(t=t.id)||void 0===t?void 0:t.replace(/-/g,"");o&&o!==a?Re({timeoutMs:3e3,effect:async()=>{try{const e=Y().A.getAllSpaceViewStores(n).find((e=>e.getSpaceId().replace(/-/g,"")===o));if(!e)return void G().D6({label:Q.workspaceNotFound.defaultMessage});await $().tR({environment:n,spaceViewStore:e,userSettingsStore:O().default.state.currentUserSettingsStore,userRootStore:O().default.state.currentUserRootStore,pageVisitSource:W().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace",redirect:!0}),K().Ow({currentTab:"plans",openedFrom:"upsell",upsellType:i,upsellProduct:r})}catch(e){m().O8(e,{from:"connectedAppUpsells.ts",type:"openConnectedAppUpsell.error"})}}}):K().Ow({currentTab:"plans",openedFrom:"upsell",upsellType:i,upsellProduct:r})}({environment:I,workspaceId:Le,connectedAppEntrypoint:Ne,upsellProduct:Oe}),Be("connected_app_upgrade"),Be("product"),Le))return;const{target:Ue,subtarget:Fe}=function(e){if(!e)return{target:void 0};const t=null==e?void 0:e.indexOf(".");if(-1===t)return{target:e};return{target:e.substring(0,t),subtarget:e.substring(t+1)}}(Pe.query.target),Ve=h().ZO(k),je=o().parse(Ve.split("?")[1]||""),ze="deepFind",He=je[g().ah]&&String(je[g().ah]);Ue&&function(e){let{environment:t,target:o,subtarget:i,assistantQueryPrefill:r}=e;if("intercom"===o)le().SI({environment:t,from:"query_param"}),Be("target");else if(t.device.isMobileBrowser&&"plans"===o){async function s(){if(await V().default.waitUntilStatsigReady(),!(0,X().S$)())return;const e=await y().Xm.load(),n=O().default.state.currentSpaceStore;e.plans.canShowPlans(n)&&await e.plans.showPlans({environment:t,from:"deeplink"}),Be("target")}Re({timeoutMs:3e3,effect:s})}else if(t.device.isMobileBrowser&&"billing"===o){async function l(){if(await V().default.waitUntilStatsigReady(),!(0,X().S$)())return;const e=O().default.state.currentSpaceStore,n=await y().Xm.load();if(e){const o=await F().A.awaitData(t,{spaceId:e.getSpaceId()});n.billing.canShowBilling({spaceStore:e,billingData:o})&&n.billing.showBilling({environment:t,from:"deeplink"})}Be("target")}Re({timeoutMs:3e3,effect:l})}else if("billing"===o||"plans"===o||"members"===o||"audit_log"===o||"connected_apps"===o||"identity_provisioning"===o||"analytics"===o||"admin_content_search"===o||"profile"===o||"notifications_and_settings"===o||"user_settings"===o||"notifications"===o||"language_and_region"===o||"settings"===o||"integrations"===o||"sites"===o||"imports"===o||"security"===o)"imports"===o&&ne().kY(t,{from:"deeplink"}),K().Ow({currentTab:o,subtab:i,isMobile:t.device.isMobile,openedFrom:"email"}),Be("target");else if("contact_us"===o)(0,Z().lK)({openedFrom:"contact_us_deeplink"}),Be("target");else if("quickfind"===o)Promise.race([async()=>{await O().default.waitUntil((()=>void 0!==O().default.state.currentUserSettingsStore&&void 0!==O().default.state.currentSpaceStore&&void 0!==O().default.state.currentSpaceViewStore&&void 0!==O().default.state.currentUserRootStore)),await O().default.waitUntilRendered(),se()._N({environment:t,analyticsFrom:"deeplink"})},f().wR(1500).then((()=>{se()._N({environment:t,analyticsFrom:"deeplink"})}))]),Be("target");else if("qna"===o){const c=async()=>{if(await V().default.waitUntilStatsigReady(),(0,C().N9)(t),!U().zD.isQnaRightSideDeeplinkEnabled()||U().zD.isQnATooltipsVisible(t.device,O().default.state.currentUserSettingsStore))return;const{assistantDependency:e}=await Promise.resolve().then(n.bind(n,650829)),o=await e.load();o.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"deeplink"}),r&&(Be(g().ah),o.assistantMenuActions.setPrimeTextInput(r))};Re({timeoutMs:1500,effect:()=>(Be("target"),c())})}else if("tryAI"===o){Re({timeoutMs:4e3,effect:async()=>{await V().default.waitUntilStatsigReady(),(0,C().N9)(t);let e=U().zD.shouldRouteToWriterOrPlansAfterSignup();switch(U().zD.isAssistantInWriterEnabled()||(e="plans"),e){case"writer":return Be("target"),r&&Be(g().ah),ce().f({environment:t,prefill:r});case"plans":if(Be("target"),t.device.isMobileBrowser){const e=await y().Xm.load(),n=O().default.state.currentSpaceStore;if(e.plans.canShowPlans(n))return e.plans.showPlans({environment:t,from:"deeplink"})}return K().Ow({currentTab:"plans",subtab:i,isMobile:t.device.isMobile,openedFrom:"email"});default:(0,v().HB)(e)}}})}else if("ai_writer"===o)Re({timeoutMs:3e3,effect:()=>(Be("target"),r&&Be(g().ah),(0,C().N9)(t),ce().f({environment:t,prefill:r}))});else if("slack_qna"===o){!async function(e){const{aiQnaActions:t}=await _().aiDependency.load();t.navigateToSlackUniversalQnAOnboarding(e)}({analyticsFrom:"deeplink"})}else if("google_drive_qna"===o){!async function(e){const{aiQnaActions:t}=await _().aiDependency.load();t.navigateToGoogleDriveUniversalScreen(e)}({analyticsFrom:"deeplink",screenToShow:"info_screen"})}else if("github_ai_connector"===o){!async function(e){const{aiQnaActions:t}=await _().aiDependency.load();t.navigateToGithubAIConnectorOnboarding(e)}({analyticsFrom:"deeplink"})}else if("jira_qna"===o){!async function(e){const{aiQnaActions:t}=await _().aiDependency.load();t.navigateToJiraUniversalScreen(e)}({analyticsFrom:"deeplink",screenToShow:"info_screen"})}else if("guest_to_member"===o){(async()=>{const e=async()=>{var e;await O().default.waitUntil((()=>void 0!==O().default.state.currentSpaceStore)),await Promise.all([null===(e=O().default.state.currentSpaceStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return Boolean(null===(e=O().default.state.currentSpaceStore)||void 0===e?void 0:e.isReady())})),V().default.waitUntilStatsigReady()])};await Promise.race([e(),f().wR(3e3)]),x({environment:t,spaceStore:O().default.state.currentSpaceStore})})(),Be("target")}else if("add_pro_account"===o)Re({timeoutMs:3e3,effect:()=>new Promise((()=>{E().B.setState({open:!0,isForAddingProAccount:!0}),Be("target")}))});else if("add_another_account"===o)Re({timeoutMs:3e3,effect:()=>new Promise((()=>{E().B.setState({open:!0}),Be("target")}))});else if("create_form"===o){async function d(){await V().default.waitUntilStatsigReady();const{formsEditorDependency:e}=await Promise.resolve().then(n.bind(n,339034)),{formEditorActions:o}=await e.load();o.createFormInPrivate({environment:t,navigateToFormBuilder:!0}),Be("target")}Re({timeoutMs:3e3,effect:d})}else if("inappmessage"===o){const u=(0,a().h2)(i);u&&Re({timeoutMs:3e3,effect:async()=>{await R().HH(t,u)}})}else"auto_transcribe"===o?Re({timeoutMs:3e3,effect:async()=>{Be("target");const e=await S().$O.load();return await e.transcriptionBlockActions.startTranscribingBlockOnPage({environment:t})}}):"upgrade_requests"===o&&((0,X().Gy)(t)&&K().Ow({currentTab:"requests",openedFrom:"email"}),Be("target"))}({environment:I,target:Ue,subtarget:Fe,assistantQueryPrefill:He}),"false"!==Pe.query.mwn2024&&Boolean(Pe.query.mwn2024)&&ye().Dg(I);const We=ee().Gy();if(!ee().zN()||We&&"page"===Ie.name&&We===Ie.blockId||ee().T_(),"googleOneTapRedirect"!==Ie.name)if("samlAuthCallback"!==Ie.name)if("appleAuthCallback"!==Ie.name)if("googleAuthCallback"!==Ie.name)if("microsoftAuthCallback"!==Ie.name)if("passkeyAuthCallback"!==Ie.name)if("passkeyRegistrationCallback"!==Ie.name)if("externalAuthNativeCallback"!==Ie.name)if(await V().default.waitUntil((()=>V().default.state.isLoaded)),e.enableDesktopAppRedirect&&function(e){const{route:t}=e.RouterStore.state;return c().b1[t.name]&&"always"===H().A.state&&e.device.isDesktop&&e.device.isBrowser&&(e.device.isMac||e.device.isWindows||!1)&&(!("configureOpenInDesktopApp"in t)||!t.configureOpenInDesktopApp)}(I))ye().w7(I);else{if("root"===Ie.name){const Ke=Array.isArray(je.target)?je.target[0]:je.target,Ge="sites_publish"===Ke||I.device.isMobile&&"sites_tooltips_tour"===Ke,$e={templateGalleryItem:Ie.templateGalleryItem,mwnFeatureModalRedirect:Boolean(je.mwn2024),projectManagementLaunch:"true"===(Array.isArray(je.pjm)?je.pjm[0]:je.pjm),assistantQueryPrefill:Array.isArray(je.aq)?je.aq[0]:je.aq,assistantTargetRedirect:"qna"===Ke||"ai_writer"===Ke?Ke:void 0,forceLandLastVisitedPage:Ge};ye().t$(Ie,I,$e)}else if("onboarding"===Ie.name)ye().IC(I);else if("modal"===Ie.name)if(I.currentUser.isLoggedIn()){let Ye="/";Ie.projectManagementLaunch?Ye+="?tg=gallery":Ie.templateGalleryItem&&(Ye+=`?tg=${Ie.templateGalleryItem}`),he().oo({environment:I,url:Ye,redirect:!0})}else he().oo({environment:I,url:d().JZ.login,redirect:!0});else if("googleDriveAuthCallback"===Ie.name)ye().it(Ie,I);else if("slackAuthCallback"===Ie.name)ye().KY({route:Ie,environment:I});else if(Ie.name===c().I2.datadogAuthCallback)ye().M8({route:Ie,environment:I});else if("externalAuthCallback"===Ie.name)ye().d0({route:Ie,environment:I});else if(Ie.name===c().I2.authCallback)ye().M8({route:Ie,environment:I});else if("loginWithEmailCallback"===Ie.name)ye().mA(Ie,I);else if("loginSuccessCallback"===Ie.name)ye().L_(Ie,I);else if("passwordResetCallback"===Ie.name)ye().V4(Ie,I);else if("passwordChangeRedirect"===Ie.name)he().navigateOnBaseUrl({environment:I,url:d().JZ.login}),M().r({environment:I});else if("logout"===Ie.name)ye().vx(I);else if("login"===Ie.name||"signup"===Ie.name){(0,p().$A)(),ye().v_(I,k),Boolean(je.showNotionCalendarModal)&&await ye().Sf(I);const Qe={doNotRedirectWhenLoggedIn:Boolean(je.newSignup)},Ze=je.redirectURL&&String(je.redirectURL),Xe=Ze&&(0,P().J0)(Ze)?Ze:void 0,Je=je.prompt&&String(je.prompt),et=Je&&(0,te().u)(I)?h().O$(d().JZ.workflowTemplates,{t:"aiBuilder",prompt:Je,origin:"marketing_magic_box"}):void 0;ye().Sk({environment:I,routeName:Ie.name,option:Qe,redirectUrl:Xe??et})}else if("login/mail"===Ie.name||"signup/mail"===Ie.name){const tt=Boolean(je.error),nt=Boolean(je.addAnotherAccount);await ye().s$(I,tt,nt)}else if("login/calendar"===Ie.name||"signup/calendar"===Ie.name){const ot=Boolean(je.error),it=Boolean(je.addAnotherAccount);await ye().bz(I,ot,it)}else if("oauthAuthorization"===Ie.name)ye().DM(Ie,I);else if("page"===Ie.name||"space"===Ie.name){if(ye().v_(I,k),ye().u1(I,Ie.state),"page"===Ie.name&&Ie.shouldDuplicate)return void(await Me(I,Ie));re().w({nextRoute:Ie,currentRoute:Ce,environment:I,query:Ve}),await ye().xW(I,Ie)}else if("templatesRedirect"===Ie.name)he().oo({environment:I,url:(0,P().xS)("templateGallery"),redirect:!0});else if("communityRedirect"===Ie.name)he().oo({environment:I,url:(0,P().xS)("community"),redirect:!1});else if("guideRedirect"===Ie.name)he().oo({environment:I,url:(0,P().xS)("guides.guides"),redirect:!0});else if("invoiceRedirect"===Ie.name)he().oo({environment:I,url:d().JZ.root,redirect:!0});else if("termsRedirect"===Ie.name)he().oo({environment:I,url:(0,P().xS)("terms"),redirect:!0});else if("contentPolicyRedirect"===Ie.name)he().oo({environment:I,url:(0,P().xS)("contentPolicy"),redirect:!0});else if("uiDoc"===Ie.name)he().oo({environment:I,url:d().JZ.root,redirect:!0});else if("exportPreview"===Ie.name)he().oo({environment:I,url:d().JZ.root,redirect:!0});else if("admin"===Ie.name)b().A.isAdminMode||he().oo({environment:I,url:d().JZ.root,redirect:!0});else if("team"===Ie.name)ye().h8(I,Ie,Ce);else if("teamInvite"===Ie.name)ye().bO(I,Ie.inviteCode);else if("teamsInvite"===Ie.name)I.currentUser.isLoggedIn()||he().oo({environment:I,url:d().JZ.signup,redirect:!0});else if("aiGtmFavoriteImport"===Ie.name)ye().Kc({environment:I,route:Ie});else if("new"===Ie.name)ye().CQ(I,Ie);else if("myIntegrations"===Ie.name)ye().Ko(I);else if("creatorProfile"===Ie.name)ye().$i({environment:I,redirectRoute:{url:d().JZ.creatorProfile}});else if("creatorProfileTemplates"===Ie.name)Ie.initialValues&&(N().A.setState({url:Ie.initialValues.url??"",name:Ie.initialValues.name??"",status:"draft"}),Be("url"),Be("name")),ye().$i({environment:I,redirectRoute:{url:d().JZ.creatorProfileTemplates}});else if("creatorProfileIntegrations"===Ie.name)ye().$i({environment:I,redirectRoute:{url:d().JZ.creatorProfileIntegrations}});else if("creatorProfileAnalytics"===Ie.name)ye().$i({environment:I,redirectRoute:{url:d().JZ.creatorProfileAnalytics}});else if("creatorProfileCoupons"===Ie.name)ye().$i({environment:I,redirectRoute:{url:d().JZ.creatorProfileCoupons}});else if("workflowTemplates"===Ie.name){if(!(0,te().u)(I))return void he().oo({environment:I,url:d().JZ.root,redirect:!0});I.currentUser.isLoggedIn()?await async function(e){return await be.workflowDeeplinkActions.load().then((t=>t.handleWorkflowTemplatesDeeplink(e)))}({environment:I,nextRoute:Ie,origin:Ie.origin}):ye().$i({environment:I,redirectRoute:{url:d().JZ.workflowTemplates,query:je}})}else if("unknown"===Ie.name)he().oo({environment:I,url:d().JZ.root,redirect:!0});else if("nativeTab"===Ie.name)ye().DO(I,Ie,Ce,w);else if("quickSearch"===Ie.name)await ye().SP(I,Ie,Ce);else if("chat"===Ie.name){async function rt(){if(He){Be(g().ah);if(!(0,B().$$)().isFullPageChatInferenceTranscriptEnabled){const{assistantDependency:e}=await Promise.resolve().then(n.bind(n,650829)),{assistantMenuActions:t,assistantActions:o}=await e.load(),i=He.length>se().XM&&I.device.isElectron;t.setPrimeTextInput(i?void 0:He);const r=Boolean(je[ze]);if(r&&Be(ze),i||r){const e=await o.resetAndInitializeAssistantSession({environment:I,deepFindRequested:r}),t=(0,L().Ow)(He);o.commitHumanStep({environment:I,text:t,sessionId:e.sessionId,assistantSurfaceType:"searchPane"})}}Be("persona")}}await ye().PT(I,Ie,Ce),Re({timeoutMs:3e3,effect:rt})}else if("marketplace"===Ie.name||"gallery"===Ie.name)await ye().Eg(I,Ie,Ce);else if("uniqueId"===Ie.name)await ye().D$(I,Ie);else if("signupWithTrial"===Ie.name){const at=Ie.trialUpsell;(0,A().u4)({environment:I,event:{eventName:"upsell_link_visit",eventProperties:{source:at}}}),(0,J().ie)(at,I),(0,J().KF)(at)&&ie().kU(I,{source:at}),"perfmark"===at&&I.currentUser.isLoggedIn()&&(D().A.setState({open:!0,isExistingUser:!0}),ye().$i({environment:I,redirectRoute:{url:d().JZ.root}})),he().oo({environment:I,url:d().JZ.signup,redirect:!0})}else"posts"===Ie.name?ye().Mq(I,Ie,Ce):"home"===Ie.name?ye().Uh(I,Ie):"githubStudentPackAuthCallback"===Ie.name?async function(e,t){const n=t.code;if(!n)return void ve().rG({message:ge().A.formatMessage(_e.studentPackUpgradeNoCode),acceptLabel:ge().A.formatMessage(_e.goBack),onAccept:()=>{he().oo({environment:e,url:d().JZ.githubStudentPackHome,redirect:!0})}});if(!t.state)return ve().f1(ge().A.formatMessage(_e.studentPackUpgradeNoSpace)),void he().oo({environment:e,url:d().JZ.githubStudentPackHome});const o=(0,pe().G2)(t.state),i=await fe().callApi({eventName:"applyStudentGitHubGrant",environment:e,data:{spaceId:o,code:n}});if("success"===i.type)ve().rG({message:ge().A.formatMessage(_e.studentPackUpgradeSuccess),acceptLabel:ge().A.formatMessage(_e.goBack),onAccept:async()=>{const{currentUserRootStore:t,currentUserSettingsStore:n}=O().default.state,i=null==t?void 0:t.getSpaceViewStores(),r=null==i?void 0:i.find((e=>e.getSpaceId()===o));r?await $().tR({environment:e,spaceViewStore:r,userRootStore:t,userSettingsStore:n,pageVisitSource:W().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"}):he().oo({environment:e,url:d().JZ.githubStudentPackHome})}});else{if((0,ue().V4j)(i.error)){const e=(0,me().Hu)(ge().A.getIntl(),i);ve().f1(e)}else ve().f1(ge().A.formatMessage(_e.studentPackUpgradeError));he().oo({environment:e,url:d().JZ.githubStudentPackHome})}}(I,Ie):"formResponse"===Ie.name?ye().Mg(I,Ie):"privacyCenterRedirect"===Ie.name&&ye().QR(I);c().v1(Ie)&&(ye().ic(I,Ie,Ve),ye().Wj(I,Ie),"page"===Ie.name&&Ie.demoWorkspaceMode&&(await V().default.waitUntilStatsigReady(),ye().SS(Ie.demoTemplateSlug)),await ye().ne({environment:I,nextRoute:Ie,currentRoute:Ce}))}else ye().uh(Ie,I);else ye().LI(Ie,I);else ye().c1(Ie,I);else ye().nA(Ie,I);else ye().Ii(Ie,I);else ye().je(Ie,I);else ye().Oh(Ie,I);else ye().X$(I,{code:Ie.code,frontPathName:Ie.frontPathName,upsell:Ie.trialName})}function Be(e){const t=h().ZO(h().qm(window.location.href,e));window.history.replaceState(window.history.state,void 0,t)}function Re(e){const{timeoutMs:t,effect:n}=e;(async()=>{await function(e){const{timeoutMs:t}=e;return Promise.race([O().default.waitUntil((()=>void 0!==O().default.state.currentUserSettingsStore&&void 0!==O().default.state.currentSpaceStore&&void 0!==O().default.state.currentSpaceViewStore&&void 0!==O().default.state.currentUserRootStore)),f().wR(t)])}({timeoutMs:t}),await n()})()}},154807:(e,t,n)=>{n.d(t,{Du:()=>w,QQ:()=>b,SR:()=>x,Wi:()=>y,YG:()=>v,_D:()=>A,eO:()=>S,mQ:()=>k,xt:()=>h});var o=n(296540),i=()=>n(847249),r=()=>n(591779),a=()=>n(496603),s=()=>n(534177),l=()=>n(33791),c=()=>n(747100),d=()=>n(737230),u=()=>n(712505),p=()=>n(455994),m=()=>n(263711),g=()=>n(524165),f=()=>n(517223);const v=380,h=280,_=1040;function b(){return u().SIDEPEEK_MIN_WIDTH+h}function y(e){let{environment:t,isInPeek:n}=e;return m().g.state.isOpen?(0,g().oQ)(t).widthMinusPadding:n?"side_peek"===u().default.getPeekMode()&&u().default.getSidePeekWidth(t.WindowSizeStore.state.width)>_?v:h:d().Ay.state.width}function S(e){var t;let{environment:n,isInPeek:o}=e;if(m().g.state.isOpen)return y({environment:n,isInPeek:!1});const i=null===(t=u().default.peekTargetStore.state)||void 0===t||null===(t=t.getAssociatedCollectionStore())||void 0===t?void 0:t.getLayoutStore();return i&&"static_sidebar"===p().A.getPanelState("peek").displayStyle&&p().A.getPanelState("peek").isOpen&&0!==i.getModules().page_details.length?y({environment:n,isInPeek:o}):0}function w(e,t){const n="peek",a=(0,i().K8)((()=>e.WindowSizeStore.state.width),[e.WindowSizeStore]),s=(0,i().K8)((()=>u().default.state.preferredSidePeekWidth),[]),l=(0,i().K8)((()=>b()),[]),c=(0,i().K8)((()=>l),[l]),[d,m]=(0,o.useState)(!1),{displayStyle:g,isOpen:f}=(0,i().K8)((()=>{const e=p().A.getPanelState(n);return{displayStyle:e.displayStyle,isOpen:e.isOpen}}),[]),v=(0,r().ZC)(s),h=(0,r().ZC)(a),_=(0,r().ZC)(g),y=(0,i().K8)((()=>Boolean(t)),[t]);(0,o.useEffect)((()=>{y&&void 0!==v&&v!==s&&(s<l?f&&(p().A.setClosed(n),m(!0)):d&&(p().A.setOpen(n),m(!1)))}),[f,y,l,s,v,d]),(0,o.useEffect)((()=>{if(!t)return;if(void 0===h||h===a)return;const e="center_peek"===u().default.getPeekMode();a<c||e&&s<c?(p().A.setDisplayStyle({displayStyle:"popup",panelLocation:n}),p().A.setClosed(n)):(p().A.setDisplayStyle({displayStyle:"static_sidebar",panelLocation:n}),"popup"===_&&s<l&&p().A.setClosed(n))}),[t,c,l,a,n,s,_,h]),(0,o.useEffect)((()=>()=>{if(!p().A.state.detailsSidebarIncreasedSizeOfPeekView)return;const{clampedWidth:t}=k("closeDetailsSidebar"),n=e.WindowSizeStore.state.width;u().default.setSidePeekWidth(t,n),p().A.setSidebarIncreasedSizeOfPeekView(!1)}),[e])}function k(e){let t;if("openDetailsSidebar"===e){t=I(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?Math.max(h+u().SIDEPEEK_MIN_WIDTH,u().default.state.preferredSidePeekWidth):u().default.state.preferredSidePeekWidth+h)}else"closeDetailsSidebar"===e?t=I(u().default.state.preferredSidePeekWidth-h):(0,s().HB)(e);return{clampedWidth:t,hadEffect:t!==u().default.state.preferredSidePeekWidth}}function I(e){return(0,a().qE)(e,u().SIDEPEEK_MIN_WIDTH,(0,c().QX)())}function x(e){const t=e.getLayoutStore();return void 0!==t&&t.getModules().page_details.length>0}function A(e){const{collectionStore:t}=e;if(!x(t))return!1;const{count:n,isPropertiesModuleInPageDetails:o}=(0,f().pm)({collectionStore:t});if(n>0)return!0;if(o&&e.skipSpecialCaseForEmptyPropertiesGroup)return!1;return(0,l().v)({collectionStore:t,collectionViewBlockStore:t.getParentBlockStore(),checkNavigableAncestorLocked:!1})&&o}},155004:(e,t,n)=>{n.d(t,{s:()=>s});var o=n(296540),i=()=>n(872994),r=n(474848);const a={WebkitUserSelect:"none",userSelect:"none",pseudoSelection:{background:"transparent"}},s=o.forwardRef(((e,t)=>{const{allowSelectionWithin:o,style:s,className:l,...c}=e,d=(0,i().y)(),u=(0,r.jsx)("div",{ref:t,contentEditable:!1,...(0,n(955825).AH)(l,!o&&a,s),...n(295740).t_,...c});return d?(0,r.jsx)(i().e,{void:!0,children:u}):u}));s.displayName="ContentEditableVoid"},155098:(e,t,n)=>{n.d(t,{U:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("pageBlock",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M6.625 11.25c0-.345.28-.625.625-.625h5.5a.625.625 0 110 1.25h-5.5a.625.625 0 01-.625-.625zm.625 2.375a.625.625 0 100 1.25h5.5a.625.625 0 100-1.25h-5.5z"}),(0,o.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75a2.75 2.75 0 01-2.75 2.75h-7.5a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237v8.086zM5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 002.75 2.75H15v7.25c0 .69-.56 1.25-1.25 1.25h-7.5C5.56 17 5 16.44 5 15.75V4.25zM14.44 7h-2.19C11.56 7 11 6.44 11 5.75V3.56L14.44 7z",clipRule:"evenodd"})]})})},156988:(e,t,n)=>{n.d(t,{Hx:()=>h,KX:()=>y,Nd:()=>m,OY:()=>f,V8:()=>b,gZ:()=>g,lR:()=>u,t4:()=>d,wE:()=>_,zE:()=>v});var o=()=>n(861017),i=()=>n(919709),r=()=>n(534177),a=()=>n(939768),s=()=>n(780054),l=()=>n(958163),c=()=>n(711319);function d(){const e=c().A.state,t=l().A.state;return e.open?e:t.open?t:void 0}function u(e){switch(e.type){case"text":return Boolean(e.editingToken);case"image":return Boolean(e.imageHyperlink);default:(0,r().HB)(e)}}function p(e,t){const n=d();if(n&&n.focusLinkInput!==e)switch(n.type){case"text":c().A.setState({...n,focusLinkInput:e,url:t?"":n.url});break;case"image":l().A.setState({...n,focusLinkInput:e,url:t?"":n.url});break;default:(0,r().HB)(n)}}function m(){p(!0);const e=d();e&&"text"===e.type&&v(!1)}function g(){p(!1)}function f(){p(!1,!0)}function v(e){const t=c().A.state;t.open&&t.focusTitleInput!==e&&c().A.setState({...t,focusTitleInput:e})}function h(e){if("image"===e.type)return e.imageHyperlink;const t="text"===e.type?e.editingToken:void 0;if(!t)return;const n=i().uPN(t),o=i().VtW(n);return o?i().cQR(o):void 0}function _(e){if(!e)return;const t=i().uPN(e);return i().VtW(t)?i().N8A(e):void 0}function b(e){return e.url||""}function y(e){const t=i().ctx(e);if(t&&"url"===t.type){const e=(0,o().parseRoute)({url:t.href,baseUrl:s().A.domainBaseUrl,publicDomainName:s().A.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return(0,o().Jx)(e)?{type:"notion",url:t.href,notionPage:e}:{type:"web",url:t.href}}const n=(0,a().q7)(e);if(n)return{type:"other",url:n}}},157857:(e,t,n)=>{n.d(t,{Z6:()=>b,ip:()=>S,jl:()=>_,lp:()=>v,nD:()=>w,sl:()=>y});n(18107),n(967357),n(898992),n(823215),n(354520),n(581454),n(737550);var o=()=>n(638458),i=()=>n(537012),r=()=>n(999515),a=()=>n(433847),s=()=>n(824862),l=()=>n(973647),c=()=>n(534177),d=()=>n(190019),u=()=>n(508496),p=()=>n(630116),m=()=>n(10984),g=()=>n(68465);const f=(0,n(496603).Bj)((function(e){return new(n(496506).default)((()=>_(e)),{debugName:"buttonAutomationAnalysisCachedStore"})}),(function(e){return[e.automationStore,e.isSubscribed]}));function v(e){return f(e)}function h(e){const{action:t,automation:n,automationActionRegistryModule:i,formulasModule:s,automationStore:l,isLoggedIn:c,parentPage:d,typecheckContextValues:u}=e;if("http_request"===t.getType()&&!c)return{value:!1};const m=i.getActionRegistryItem(t.getType()),g=(0,o().Q)({automationModel:n,parentPage:d,formulasModule:s,formulaValueTypes:u}),f=r().q.runSync(l.getRecordModel,m.resolveExecutionDependencies(g,t));for(const o of f){const e=(0,p().Oo)(l,o.pointer);if(!e.isReady())return{error:"records_not_loaded"};const t=e.getRole();if(!t||(0,a().sG)(t,o.minimumRole)||!c&&(0,a().dI)(o.minimumRole,"reader"))return{value:!1}}return{value:!0}}function _(e){const t=e.automationStore.getModel();if(!t)return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:void 0};const n=e.automationStore.getActionStores().map((e=>e.getModel()));if(!n.every((0,c().u0)((e=>(0,c().O9)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:void 0};const o=(0,d().Z)({environment:e.environment,automationStore:e.automationStore,automationTypecheckModule:e.automationTypecheckModule,contextType:e.type,formulasModule:e.formulasModule,intl:e.intl,isSubscribed:e.isSubscribed});if(l().Q.isFail(o))return{editPermissionStatus:"unknown",executionPermissionStatus:"unknown",typecheckResult:o};for(const i of n){var r;const n=h({action:i,automation:t,automationActionRegistryModule:e.automationActionRegistryModule,formulasModule:e.formulasModule,automationStore:e.automationStore,isLoggedIn:e.isLoggedIn,parentPage:"button_block"===e.type?null===(r=e.pageStore)||void 0===r?void 0:r.getModel():void 0,typecheckContextValues:o.value.valueTypes});if("records_not_loaded"===n.error)return{editPermissionStatus:"loading",executionPermissionStatus:"loading",typecheckResult:void 0};if(!n.value)return{editPermissionStatus:"insufficient",executionPermissionStatus:"insufficient",typecheckResult:o}}return{editPermissionStatus:(0,i().Ls)({automationValue:t.getMinimumFieldsForPermissions(),actionValues:n.map((e=>({config:e.getConfig(),type:e.getType(),space_id:e.getSpaceId()})))}).some((t=>{const n=(0,p().Oo)(e.parentRecordStore,t.pointer).getRole();return!n||(0,a().sG)(n,t.minimumRequiredRole)}))?"insufficient":"sufficient",executionPermissionStatus:Object.values(o.value.actionValidationFailures).some((e=>{const t=e??[];return 0!==t.length&&t.some((e=>(0,c().O9)(e.execute)&&!e.execute))}))?"insufficient":"sufficient",typecheckResult:o}}function b(e,t){var n;const o=e.getModel(),i=null===(n=e.getSpaceStore())||void 0===n?void 0:n.getModel(),r=e.getActionStores(),a=r.filter((e=>e.isDefined())).map((e=>e.getModel())).filter(c().O9);if(!o||a.length!==r.length)return;const s=(0,g().t1)(e.environment);return{automation:o,automationActions:a,checkExperimentGate:e=>u().default.checkGate({gateName:e}),checkExperimentGroup:e=>u().default.getGroup(e),contextType:t,checkType:"canAddAction",isSubscribed:(0,m().y4)(),spaceModel:i,assistantFeatureGate:s}}function y(e){const{environment:t,automationStore:n,automationActionRegistryModule:o,automationTypecheckModule:r,contextType:u,formulasModule:p,intl:g,isSubscribed:f}=e,v=t.currentUser.isLoggedIn(),_=n.getValue(),b=n.getModel();if(!b||!_)return{editPermissionStatus:"unknown",reason:"missing_automation_model"};if(!p)return{editPermissionStatus:"unknown",reason:"missing_formulas_dependency"};if(!o||!r)return{editPermissionStatus:"unknown",reason:"missing_automations_dependency"};const y=n.getActionStores().map((e=>e.getModel()));if(!y.every((0,c().u0)((e=>(0,c().O9)(e)?{true:e}:{false:e}))))return{editPermissionStatus:"unknown",reason:"missing_automation_action_model"};const S=(0,d().Z)({environment:t,automationStore:n,automationTypecheckModule:r,contextType:u,formulasModule:p,intl:g,isSubscribed:f});if(l().Q.isFail(S))return{editPermissionStatus:"unknown",reason:"typecheck_error"};const w=y.length>0&&y.some((e=>!e.isType("slack_notification")));if(b.isType("event")&&w&&!(0,m().y4)())return{editPermissionStatus:"insufficient",reason:"free_workspace"};const k=y.filter((e=>e.isType("slack_notification")||e.isType("send_gmail_notification"))).filter((e=>{const t=h({action:e,automation:b,automationActionRegistryModule:o,formulasModule:p,automationStore:n,isLoggedIn:v,typecheckContextValues:S.value.valueTypes});return l().Q.isFail(t)||!t.value})).at(0);if((0,c().O9)(k)){var I;const e=null===(I=k.getConfig())||void 0===I?void 0:I.external_bot_id;return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:e?{table:s().GP,id:e}:void 0}}const x=(0,i().Ls)({automationValue:_,actionValues:y.map((e=>({config:e.getConfig(),type:e.getType()})))});for(const i of x){const e=n.getRecordRole(i.pointer);if(!e||(0,a().sG)(e,i.minimumRequiredRole))return{editPermissionStatus:"insufficient",reason:"missing_permissions",relatedPointer:i.pointer}}return{editPermissionStatus:"sufficient"}}function S(e){const{contextType:t,environment:n}=e,{device:o}=n,i=o.isIOS&&o.isMobileNative;return"event"===t&&!i}function w(e){const t=(null==e?void 0:e.getActionStores())??[];for(const o of t)if(o.isType("open_page")){var n;const e=o.getConfig();if("url"===(null==e||null===(n=e.target)||void 0===n?void 0:n.type))return e.target.url}}},158218:(e,t,n)=>{n.d(t,{Ay:()=>S,_l:()=>y,f9:()=>b});n(16280),n(898992),n(354520),n(672577);var o=n(296540),i=()=>n(700500),r=()=>n(304740),a=()=>n(778417),s=()=>n(186445),l=()=>n(846662),c=()=>n(129522),d=()=>n(489348),u=()=>n(630116),p=()=>n(915440),m=n(474848);const g={[i().xd.image]:36,[i().xd.audio]:24,[i().xd.video]:96,[i().xd.embed]:96,[i().xd.drive]:96,[i().xd.tweet]:96,[i().xd.framer]:96,[i().xd.maps]:96,[i().xd.gist]:96,[i().xd.invision]:96,[i().xd.pdf]:96,[i().xd.drawing]:200},f={[i().xd.image]:36,[i().xd.video]:96,[i().xd.embed]:246,[i().xd.maps]:96,[i().xd.framer]:96,[i().xd.tweet]:250,[i().xd.gist]:96,[i().xd.audio]:96,[i().xd.drive]:300,[i().xd.invision]:96,[i().xd.pdf]:96,[i().xd.columnList]:"page_width",[i().xd.drawing]:300,[i().xd.code]:"300.0"},v={display:"contents"},h=96,_=96;let b=function(e){return e[e.Horizontal=0]="Horizontal",e[e.Vertical=1]="Vertical",e[e.Corner=2]="Corner",e}({}),y=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});const S=function(e){const t=(0,o.useRef)(void 0),s=(0,n(484714).v3)(),g=(0,o.useRef)(null),f=(0,n(847249).uB)(e.blockResizerStore,n(891279).A),h=(0,o.useCallback)((o=>{o.preventDefault();const r=e.resizeComponent.getNode();if(!(r&&r instanceof Element))return;let m=0;if(g.current){const e=(0,n(953418).NM)(g.current);e&&(m=e.getBoundingClientRect().width)}let v=0;const h=e.store.getRecordStoreUIParent(),_=h&&h.findRecordStoreUIAncestor((e=>e instanceof u().Bv)).ancestor;if(_){const e=c().K.getRect(_);e&&(v=e.width);const t=_.getRecordStoreUIParent(),n=t&&t.findRecordStoreUIAncestor((e=>e instanceof u().Bv)).ancestor;if("tab"===(null==n?void 0:n.getType())){const e=c().K.getRect(n);e&&(v=e.width)}}const b=function(e){const t=e.getRecordStoreUIRoot(),n=d().A.find((e=>e.store===t));if(n)return n.getContentInnerWidth()}(e.store)||0,y=n(502438).default.state.stores.filter((e=>function(e){const t=e&&e.getType();return t&&(i().Ib[t]||(0,l().gV)(e))}(e)));let S;S=n(496603).mK(y,e.store)?y:[e.store];const{block_width:w,block_height:k,block_full_width:I,block_page_width:x}=e.store.getFormat();f.setState({...f.state,dragging:!0,temporaryHeight:k,temporaryWidth:w,temporaryFullWidth:I,temporaryPageWidth:x}),p().A.setState({...p().A.state,isResizing:!0}),a().IU({environment:s});const A=r.getBoundingClientRect();t.current={resizingBlocks:S,startWidth:A.width,startHeight:A.height,parentWidth:v,pageWidth:b,isRootChild:e.store.isChildOfRecordStoreUIRoot(),startScrollerWidth:m,didDragMove:!1}}),[f,s,e.resizeComponent,e.store]),_=(0,o.useCallback)((n=>{let{diffX:o}=n;if(!t.current)return;t.current.didDragMove=!0;const{temporaryHeight:i}=f.state,{width:a,isFullWidth:l,isPageWidth:c}=I({diffX:o,dragState:t.current,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,environment:s});if(e.preserveScale){const e=l?i||r().q3:i;f.setState({...f.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c,temporaryHeight:e})}else f.setState({...f.state,temporaryWidth:a,temporaryFullWidth:l,temporaryPageWidth:c})}),[f,s,e.preserveScale,e.resizeHorizontally,e.resizerAlignment,e.store]),y=(0,o.useCallback)((n=>{let{diffY:o}=n;if(!t.current)return;t.current.didDragMove=!0;const{height:i}=w({diffY:o,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});f.setState({...f.state,temporaryHeight:i})}),[f,e.resizeVertically,e.store]),S=(0,o.useCallback)((n=>{let{diffX:o,diffY:i}=n;if(!t.current)return;t.current.didDragMove=!0;const{width:r,isFullWidth:a,isPageWidth:l}=I({diffX:o,resizeHorizontally:e.resizeHorizontally,store:e.store,resizerAlignment:e.resizerAlignment,dragState:t.current,environment:s}),{height:c}=w({diffY:i,dragState:t.current,resizeVertically:e.resizeVertically,store:e.store});f.setState({...f.state,temporaryWidth:r,temporaryHeight:c,temporaryFullWidth:a,temporaryPageWidth:l})}),[f,s,e.resizeHorizontally,e.resizeVertically,e.resizerAlignment,e.store]),k=(0,o.useCallback)((t=>e.resizerType===b.Horizontal?_(t):e.resizerType===b.Vertical?y(t):e.resizerType===b.Corner?S(t):void 0),[S,_,y,e.resizerType]),x=(0,o.useCallback)((()=>{f.setState({...f.state,dragging:!1,temporaryPageWidth:void 0,temporaryFullWidth:void 0,temporaryWidth:void 0,temporaryHeight:void 0}),a().IU({environment:s}),p().A.setState({...p().A.state,isResizing:!1}),t.current=void 0}),[f,s]),A=(0,o.useCallback)((o=>{if(!t.current)return;const i=f.state;if(t.current.didDragMove&&i.dragging){const{temporaryPageWidth:o,temporaryFullWidth:i,temporaryWidth:r,temporaryHeight:a}=f.state;n(751156).createAndCommit({userAction:"BlockResizer.handleDragEnd",environment:s,canUndo:!0,perform:e=>{t.current&&n(896628).zA({stores:t.current.resizingBlocks,update:{block_height:a,block_width:r,block_full_width:i,block_page_width:o},transaction:e})}});const l=e.store.getType();l&&n(437219).Wn(s,{block_type:l,block_height:a,block_width:r,block_full_width:i,block_page_width:o})}x()}),[f,x,s,e.store]);return(0,m.jsx)(n(603820).A,{onDraggableDragStart:h,onDraggableDragMove:k,onDraggableDragEnd:A,onDraggableDragCancel:x,preventSidebar:!0,render:t=>(0,m.jsx)("div",{ref:g,style:v,className:n(38337).cZe,...t,children:e.children})})};function w(e){const t=function(e){const{dragState:t,diffY:n,resizeVertically:o,store:i}=e;if(t){if(o){const e=i.getType(),o=e&&g[e]||h;return Math.max(t.startHeight+n,o)}return t.startHeight}return 0}(e);return{height:Math.min(t,r().X6)}}function k(e){const{dragState:t,resizeHorizontally:n,store:o,resizerAlignment:r}=e;let a=e.diffX;if(!t)throw new Error("No start rect.");(function(e){const t=e.getModel();return e.isChildOfRecordStoreUIRoot()&&((null==t?void 0:t.isType(i().H_))||(0,l().gV)(e))})(o)&&(a*=2);let s=t.startWidth;n&&(r===y.Left?s-=a:r===y.Right&&(s+=a));const c=o.getType(),d=c&&f[c]||_,u="page_width"===d?Math.min(t.parentWidth,t.pageWidth):d;return u&&s<u&&(s=u),s}function I(e){const{dragState:t,store:n,environment:o}=e,r=k(e),a=r<144?12:48;const c=Math.round(r/a)*a,d=function(e,t,n){if(e)return e.isRootChild?e.pageWidth<t+n&&e.pageWidth>t-n:e.parentWidth<t+n;return!1}(e.dragState,r,a),u=function(e){const{dragState:t,width:n,round:o,environment:r,store:a}=e;if(t&&t.isRootChild){let e=t.startScrollerWidth;const c=a.getModel();return!c||c.isType(i().y4)||(0,l().gV)(a)||(e-=2*(0,s().F8)(r)),e<n+o}return!1}({dragState:t,width:r,round:a,environment:o,store:n})&&!d;return{width:c,isFullWidth:u,isPageWidth:d}}},159588:(e,t,n)=>{n.d(t,{Jg:()=>r,bM:()=>i,ic:()=>s,sQ:()=>a});const o=4,i="150ms ease";function r(){return{borderRadius:6}}function a(e){let{isMobile:t}=e;return t?{}:{borderRadius:6,display:"flex",marginLeft:0,marginRight:0,transition:`background ${i}`}}function s(){return{paddingLeft:12-o,paddingRight:12-o}}},160475:(e,t,n)=>{n.d(t,{t:()=>r});var o=()=>n(989423),i=()=>n(508496);function r(e){const{environment:t,...n}=e;i().default.logEvent("import_entrypoint_cta",e.action),(0,o().u4)({environment:t,event:{eventName:"import_entrypoint_cta",eventProperties:n}})}},160568:(e,t,n)=>{n.d(t,{BX:()=>u,KC:()=>_,RZ:()=>m,Xq:()=>v,YT:()=>c,_I:()=>y,_o:()=>f,bk:()=>k,er:()=>p,hB:()=>l,hS:()=>w,ki:()=>g,oF:()=>S,oO:()=>d,pM:()=>b});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(498212),i=()=>n(534177),r=()=>n(989423),a=()=>n(644914),s=()=>n(508496);function l(e,t){const n={is_paid:!1,...t};r().u4({environment:e,event:{eventName:"duplicate_template",eventProperties:n}}),s().default.logEvent("duplicate_template",n.from,n)}function c(e,t){r().vd(e,"duplicate_template_attempt",t)}function d(e,t){r().vd(e,"template_modal_open",{...t,...(0,a().hX)({environment:e})}),s().default.logEvent("template_modal_open",1)}function u(e,t){const{team_id:n,...o}=t;r().vd(e,"template_modal_accept",o,{forceOverrideAutomaticEventData:{team_id:n}}),s().default.logEvent("template_modal_accept",1)}function p(e,t){r().vd(e,"create_collection_template",t),s().default.logEvent("create_collection_template",1)}function m(e,t){r().vd(e,"activate_collection_template",t),s().default.logEvent("activate_collection_template",1)}function g(e,t){r().u4({environment:e,event:{eventName:"select_template",eventProperties:{is_keyboard:t.is_keyboard,from:t.from,template_type:t.template_type}}})}function f(e,t){r().vd(e,"collection_template_action",t)}function v(e,t){let{from:n,preset_uri:o,created_block_stores:r,destination_team_id:a}=t;const s=[],l=[];for(const i of r){var c;const e=null===(c=i.getCollectionStore())||void 0===c?void 0:c.getDatabaseType();e&&(l.push(i.id),s.push(e))}const d=r.map((e=>{var t;return null===(t=e.getFormat())||void 0===t?void 0:t.app_id})).filter(i().O9);h(e,{from:n,preset_uri:o,created_page_ids:l,database_types:s,destination_team_id:a,app_ids:[...new Set(d)]})}function h(e,t){r().vd(e,"create_app_template",t)}function _(e,t){r().vd(e,"delete_app_template",t)}function b(e,t){r().vd(e,"create_typed_dbs_in_team_latency",t)}function y(e,t){r().vd(e,"apply_preset_features",t)}function S(e,t){r().vd(e,"template_duplication_v2_modal_close",{template_block_id:t.templateBlockId&&(0,o().ot)(t.templateBlockId)})}function w(e,t){r().vd(e,"template_duplication_v2_account_switcher_open",{template_block_id:(0,o().ot)(t.templateBlockId),num_of_users:t.numOfUsers})}function k(e,t){r().vd(e,"template_duplication_v2_switch_space",{template_block_id:(0,o().ot)(t.templateBlockId),template_destination_space_id:t.templateDestinationSpaceId&&(0,o().ot)(t.templateDestinationSpaceId),num_of_users:t.numOfUsers})}},161132:(e,t,n)=>{n.d(t,{Ce:()=>c,W0:()=>p,sw:()=>m,xs:()=>l});var o=()=>n(857639),i=()=>n(763884),r=()=>n(79628),a=()=>n(20822),s=()=>n(41161);async function l(){if("storage"in navigator&&"estimate"in navigator.storage){const{quota:e,usage:t}=await navigator.storage.estimate();if("number"==typeof e&&"number"==typeof t)return{quota:e,usage:t}}if("webkitPersistentStorage"in navigator){const e=navigator.webkitPersistentStorage;if("queryUsageAndQuota"in e)return new Promise((t=>{e.queryUsageAndQuota(((e,n)=>{t("number"==typeof n&&"number"==typeof e?{usage:e,quota:n}:void 0)}),(()=>t(void 0)))}))}}async function c(){if(navigator.storage&&navigator.storage.persist)try{const e=await navigator.storage.persist();return o().clientLogglyEnvironmentData.isPersistent=e,e}catch(e){console.trace("Persistence is disabled",e)}}const d=.9,u=15*n(720665).A2;function p(e){const{quota:t,usage:n}=e;return n/t<=d&&t>=u}function m(e){const{isMobileNative:t,userId:n}=e??{},o=a().A.state;let l;!0===t&&(l=r().A.get()),n?(s().A.clearForUser(n),i().K.clearStorageForUser(n)):localStorage.clear(),a().A.setState(o),!0===t&&l&&r().A.set(l)}},162674:(e,t,n)=>{n.d(t,{AP:()=>d,Ao:()=>a,Ez:()=>m,GE:()=>b,KK:()=>p,X$:()=>_,ZL:()=>r,ZX:()=>v,bS:()=>u,cF:()=>g,f_:()=>l,hY:()=>s,iW:()=>h,kx:()=>f,lr:()=>c});var o=()=>n(989423),i=()=>n(644914);function r(e){let{environment:t,from:n}=e;(0,o().vd)(t,"open_home",{from:n,...(0,i().hX)({environment:t})})}function a(e){let{environment:t,args:n}=e;(0,o().vd)(t,"home_loaded",n)}function s(e){let{environment:t}=e;(0,o().vd)(t,"open_home_more_menu",{})}function l(e){const{environment:t,show:n,feature:i,from:r}=e;(0,o().vd)(t,"toggle_home_feature",{show:n,feature:i,from:r})}function c(e){let{environment:t,oldValue:n,newValue:i,from:r}=e;(0,o().vd)(t,"change_start_page",{old_value:n,new_value:i,from:r})}function d(e){let{environment:t,index:n,teamId:i}=e;(0,o().vd)(t,"change_home_trending_source",{source_type:i?"team":"space",selected_index:n,selected_team_id:i})}function u(e){let{environment:t,from:n}=e;(0,o().vd)(t,"click_empty_my_tasks",{from:n})}function p(e){let{environment:t,from:n}=e;(0,o().u4)({environment:t,event:{eventName:"click_empty_custom_db",eventProperties:{from:n}}})}function m(e){let{environment:t,from:n}=e;(0,o().vd)(t,"close_task_migration_modal",{from:n})}function g(e,t){(0,o().vd)(e,"open_home_tip",t)}function f(e,t){(0,o().vd)(e,"check_home_tip",t)}function v(e,t){(0,o().vd)(e,"show_completed_home_tips",t)}function h(e,t){(0,o().vd)(e,"home_tips_modal_error",t)}function _(e){let{environment:t}=e;(0,o().vd)(t,"visit_home_help_page")}function b(e){let{environment:t,firstUnloadedCachePageIndex:n}=e;(0,o().u4)({environment:t,event:{eventName:"home.recents.first_unloaded_cache_page_index",eventProperties:{first_unloaded_cache_page_index:n}}})}},166386:(e,t,n)=>{n.d(t,{ER:()=>m,J5:()=>a,Jf:()=>d,OJ:()=>s,Pz:()=>p,Vm:()=>f,b_:()=>g,e8:()=>u,hZ:()=>b,i:()=>_,iJ:()=>c,kd:()=>v,rM:()=>y,u6:()=>l,vk:()=>h});n(898992),n(354520),n(672577),n(908872);var o=()=>n(244641),i=()=>n(534177),r=()=>n(258037);function a(e){if(!e)return!1;switch(e){case"ai_fifty_percent":return!0;case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"resurrection_offer":case"enterprise_annual":case"new_year_2025":case"lic_25":case"lic_50":return!1;default:(0,i().HB)(e)}}function s(e){if(!e)return!1;switch(e){case"ai_fifty_percent":case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return!0;case"new_year_2025":case"lic_25":case"lic_50":case"resurrection_offer":return!1;default:(0,i().HB)(e)}}function l(e){if(!e)return!1;return"resurrection_offer"===("string"==typeof e?e:e.campaign)}function c(e){switch(e){case"team_three_months":case"ai_fifty_percent":case"lic_50":case"resurrection_offer":case"new_year_2025":return.5;case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return.1;case"lic_25":return.25;default:(0,i().HB)(e)}}function d(e,t,n){if(e&&t&&n)switch(e){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":return;case"ai_fifty_percent":return"ai"===t;case"resurrection_offer":return"plus"===t&&"month"===n;case"lic_25":case"lic_50":return"plus"===t||"business"===t;case"new_year_2025":return"ai"===t&&"month"===n;default:(0,i().HB)(e)}}function u(e,t){const n=e.filter((e=>e.offer.type===t));if(0!==n.length)return 1===n.length?n[0]:n.reduce(((e,t)=>e.startDateMs>t.startDateMs?e:t))}function p(e){if(e)return r().bC.find((t=>t.campaign===e))}function m(e,t){const n=v(e);return Math.round(n.diff(t??o().c9.now(),"days").days)}function g(e){return o().dw.fromObject(e.duration)}function f(e){return o().c9.fromMillis(e.startDateMs)}function v(e){return o().c9.fromMillis(e.endDateMs)}function h(e,t){if(!e)return 0;if("coupon"!==e.type)return 0;const n="decimal_number"===t?.01:1;return e.percentOff*n}function _(e){return e&&"trial"===e.offer.type?e.offer.subscriptionTier:"plus"}function b(e){if(!e)return!1;const t=u(e,"coupon");return!!t&&t.endDateMs>Date.now()}function y(e){return v(e)>o().c9.now()}},167355:(e,t,n)=>{n.d(t,{F:()=>o});const o=(0,n(340498).xh)("exclamationMarkCircle",{default:{loader:()=>n.e(70678).then(n.bind(n,970678))},small:{loader:()=>n.e(71300).then(n.bind(n,371300))},mini:{loader:()=>n.e(13208).then(n.bind(n,513208))},micro:{loader:()=>n.e(26545).then(n.bind(n,126545))},large:{loader:()=>n.e(64888).then(n.bind(n,664888))},max:{loader:()=>n.e(64888).then(n.bind(n,664888))}})},168687:(e,t,n)=>{n.d(t,{t:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("checkPartial",{viewBox:"0 0 14 14",svg:(0,o.jsx)("rect",{x:"1.75",y:"6.125",width:"10.5",height:"1.75"})})},170253:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isDragging:!1,willDrag:!1}}}const i=o},170722:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1,isAnimatingClosed:!1,top:0,left:0}}}const i=(0,n(604341).exposeDebugValue)("RichTextMenuStore",new o)},171018:(e,t,n)=>{n.d(t,{A6:()=>c,Ep:()=>l,YB:()=>r,es:()=>d});var o=()=>n(757695),i=()=>n(712505);class r extends o().default{getInitialState(){return{forceShowProperties:!1,searchOpen:!1,searchQuery:""}}}const a="unnamed";class s extends o().default{getInitialState(){return{pagePropertiesStoreMap:{}}}getNewEditorPagePropertiesStore(e){var t;const n=e||a;if(null!==(t=this.state.pagePropertiesStoreMap)&&void 0!==t&&t[n])return this.state.pagePropertiesStoreMap[n];const o=new r,i={pagePropertiesStoreMap:{...this.state.pagePropertiesStoreMap,[n]:o}};return this.setState(i),o}}const l=new s,c=new s;function d(e){const t=e||a;return(i().default.state.open?c:l).state.pagePropertiesStoreMap[t]}},172079:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue(!1)},172385:(e,t,n)=>{n.d(t,{EY:()=>d,X_:()=>l,YQ:()=>c});n(814603),n(147566),n(198721);var o=()=>n(498212),i=()=>n(939768),r=()=>n(584262),a=()=>n(427704),s=()=>n(530199);function l(e){const t=a().JZ.chat,n={};return e.configureOpenInDesktopApp&&(n[s().uu]="true"),e.pageVisitSource&&(n[r().k3]=String(e.pageVisitSource)),e.peekMode&&(n[s().fT]=e.peekMode),e.peekViewBlockId&&(n[s().ZI]=(0,o().Xw)(e.peekViewBlockId)),e.threadId&&(n[s().P5]=(0,o().Xw)(e.threadId)),"assistantQueryPrefill"in e&&e.assistantQueryPrefill&&(n[s().ah]=e.assistantQueryPrefill),(0,i().Gm)({url:t,query:n})}function c(e){const{currentUrl:t,assistantQueryPrefill:n,assistantTargetRedirect:o}=e,i=new URL(t);return void 0!==n&&i.searchParams.set(s().ah,n),void 0!==o&&i.searchParams.set("target",o),i.toString()}function d(e){const{isMobile:t,currentRoute:n,pageId:a,scrollToBlockId:l,pageVisitSource:c,peekModeParam:d}=e,u={};return c&&(u[r().k3]=String(c)),t?(0,i().Gm)({url:`/${(0,o().Xw)(a)}`,hash:l&&(0,o().Xw)(l)}):(d&&(u[s().fT]=d),n.threadId&&(u[s().P5]=(0,o().Xw)(n.threadId)),u[s().ZI]=(0,o().Xw)(a),(0,i().Gm)({url:"/chat",query:u,hash:l&&(0,o().Xw)(l)}))}},174636:(e,t,n)=>{n.d(t,{Q:()=>i,R:()=>a});var o=()=>n(206267);function i(){return{inProgress:!1,isPublicSync:!1,isPrivateSync:!1,selection:{allSelected:!0,selectedChannels:[],excludedChannels:[],joinFutureChannels:!0},isSyncCompleted:!1,currentScreen:"none",sessionId:o().JW(),analyticsFrom:"unknown",authUrl:void 0,canQuery:!0,connectedApps:void 0,noChannelsSelected:void 0,ingestionProgress:void 0,gridSetupUrl:void 0,isSlackGridAiConnectorEnabled:!1,isLoaded:!1}}class r extends(()=>n(757695))().default{getInitialState(){return i()}}const a=new r;(0,n(604341).exposeDebugValue)("slackUniversalQnAConnectionStore",a)},175947:(e,t,n)=>{n.d(t,{$C:()=>r,Hi:()=>i,Qy:()=>a,Uu:()=>s,ek:()=>c,jq:()=>d,pz:()=>u});var o=()=>n(418135);const i=52,r=45,a=44,s=44,l=30;function c(e){return e?s:a}function d(e){return 2*c(e)}function u(e,t,n){return(e&&!t?(0,o().JT)(n):12)+l}},176072:(e,t,n)=>{n.d(t,{D8:()=>a,EC:()=>r,Z6:()=>c,pl:()=>d,rd:()=>u});var o=()=>n(496603),i=()=>n(730688);function r(e){const{store:t,getItemsPerRowForSection:n,sections:o,disableKeyboardArrowWrap:i}=e,{focus:r}=t.state;if(void 0===r.indexLocal)return c({store:t,sections:o,indexGlobal:0});const a=o[r.section],d=n(a.key),u=r.indexLocal+d,p=a.items.length-1;if(u<=p)return c({store:t,sections:o,indexLocal:{section:r.section,indexLocal:u}});const m=function(e){const{indexLocal:t,section:n,itemsPerRow:o}=e,i=l({indexLocal:t,section:n,itemsPerRow:o});if(!i)return;const r=s({section:n,itemsPerRow:o});if(!r)return;return i.rowsBefore===r.rowsBefore}({indexLocal:r.indexLocal,section:a,itemsPerRow:d});if(void 0===m)return;if(!1===m)return c({store:t,sections:o,indexLocal:{section:r.section,indexLocal:p}});const g=function(e){const{currentSection:t,sections:n,disableWrap:o}=e;if(0===n.length)return;if(t&&t>=n.length&&o)return;const i=void 0===t?0:t+1;if(i>=n.length&&o)return;const r=i%n.length,a=n[r];if(!a)return;return{index:r,section:a}}({currentSection:r.section,sections:o,disableWrap:i});if(!g)return;const f=r.indexLocal%d,v=n(g.section.key);return g.section.items.length<=f||v<=f?c({store:t,sections:o,indexLocal:{section:g.index,indexLocal:0}}):c({store:t,sections:o,indexLocal:{section:g.index,indexLocal:f}})}function a(e){const{store:t,getItemsPerRowForSection:n,sections:o,disableKeyboardArrowWrap:r}=e,{focus:a}=t.state;if(void 0===a.indexLocal){return c({store:t,indexGlobal:i().i2(o)-1,sections:o})}const l=n(o[a.section].key),d=a.indexLocal-l;if(d>=0)return c({store:t,sections:o,indexLocal:{section:a.section,indexLocal:d}});const u=function(e){const{currentSection:t,sections:n,disableWrap:o}=e;if(0===n.length)return;if(0===t||void 0===t){if(o)return;const e=n.length-1,t=n[e];if(!t)return;return{index:e,section:t}}const i=n[t-1];if(!i)return;return{index:t-1,section:i}}({currentSection:a.section,sections:o,disableWrap:r});if(!u)return;const p=n(u.section.key),m=s({section:u.section,itemsPerRow:p});if(!m)return;const g=a.indexLocal%l;if(m.column<g)return c({store:t,sections:o,indexLocal:{section:u.index,indexLocal:m.indexLocal}});{const e=m.rowsBefore*p+g;return c({store:t,sections:o,indexLocal:{section:u.index,indexLocal:e}})}}function s(e){const{section:t,itemsPerRow:n}=e;if(0===t.items.length)return;if(0===n)return;const o=t.items.length-1,i=l({indexLocal:o,section:t,itemsPerRow:n});return i?{indexLocal:o,...i}:void 0}function l(e){const{indexLocal:t,section:n,itemsPerRow:o}=e;if(!(o<=0||t>=n.items.length))return{rowsBefore:Math.trunc(t/o),column:t%o}}function c(e){const{store:t,sections:n}=e;if(e.indexLocal){const o=i().WK(e.indexLocal,n);if(!i().SG(e.indexLocal,n))return;t.setState({...t.state,focus:{...e.indexLocal,indexGlobal:o,footerFocused:!1}})}else if(void 0===e.indexGlobal)t.unsetFocus();else{const o=i().e7(e.indexGlobal,n);if(!o)return;t.setState({...t.state,focus:{...o.index,indexGlobal:e.indexGlobal,footerFocused:!1}})}}function d(e){let{store:t,focus:n}=e;"number"==typeof t.state.focus.indexLocal&&(o().n4(n,t.state.focus)||t.setState({...t.state,focus:n}))}function u(e){let{store:t}=e;t.setState({...t.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!0}})}},176106:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,willOpen:!1,loading:!1}}}const i=new o},176581:(e,t,n)=>{function o(e){let t,n,{space:o,team:i}=e;t=i&&i.getDisableGuests()?"cannot_add":i&&!i.getDisableGuests()?"can_add":void 0;const r=o.disable_guests;return n=o.getSettings().enable_guest_invite_requests?"can_request":r?"cannot_add":"can_add","can_request"===n?{type:"can_request"}:void 0!==t?{type:t}:{type:n}}n.d(t,{v:()=>o})},176663:(e,t,n)=>{n.d(t,{_:()=>a});var o=n(296540),i=()=>n(484714),r=()=>n(406792);function a(e){const{loaded:t,blockType:n,isOpen:a}=e,s=(0,i().v3)(),l=(0,o.useRef)({step:"notMeasured"});(0,o.useEffect)((()=>{if(!0!==a||!1!==t||"notMeasured"!==l.current.step){if(!0===a&&!0===t&&"notMeasured"===l.current.step){const t=performance.now();return e({startTime:t,endTime:t}),void(l.current={step:"complete"})}if(!1!==t||!1!==a||"measuring"!==l.current.step){if(!0===t&&"measuring"===l.current.step)return e({startTime:l.current.loadStartTime}),void(l.current={step:"complete"})}else l.current={step:"complete"}}else l.current={step:"measuring",loadStartTime:performance.now()};function e(e){let{startTime:t,endTime:o}=e;r().default.measure({metricName:"toggle_load",startTime:t,endTime:o},{data:{block_type:n||"unknown"},environment:s})}}),[n,s,t,a])}},176983:(e,t,n)=>{n.d(t,{J:()=>r});var o=()=>n(847249),i=()=>n(351360);function r(){const{currentSpaceStore:e}=(0,o().O$)(i().default);return(0,o().K8)((()=>(null==e?void 0:e.canAdmin())??!1),[e])}},177158:(e,t,n)=>{n.d(t,{A:()=>S,B:()=>v});var o=n(296540),i=n(440961),r=()=>n(225661),a=()=>n(847249),s=()=>n(401497),l=()=>n(496603);var c=()=>n(713972),d=n(474848);const u="data-overlay",p={[u]:!0};function m(e){const t=(0,n(484714).v3)(),{children:i,origin:r,open:a,useCompositeLayer:s}=e,[l]=(0,o.useState)((()=>n(206267).JW())),c=e.overlayContainerStore??n(313790).A,u=(0,o.useCallback)((()=>{!function(e){const{key:t,overlayContainerStore:n}=e;n.state.overlays.has(t)||(n.state.overlays.add(t),n.emit())}({key:l,overlayContainerStore:c})}),[l,c]),p=(0,o.useCallback)((()=>{!function(e){const{key:t,overlayContainerStore:n}=e;n.state.overlays.has(t)&&(n.state.overlays.delete(t),n.emit())}({key:l,overlayContainerStore:c})}),[l,c]);(0,o.useEffect)((()=>()=>{n(908006).default.afterNextFlush(p)}),[p]),(0,o.useEffect)((()=>{a?a&&u():p()}),[a,u,p]);const m=e.trapFocus&&!t.device.isMobile;return(0,d.jsxs)(d.Fragment,{children:[r,a&&(0,d.jsx)(g,{overlayContainerStore:c,useCompositeLayer:s,zIndex:e.zIndex,trapFocus:m??!1,children:i,overlayId:l})]})}function g(e){const{overlayContainerStore:t,useCompositeLayer:n,trapFocus:o,children:c,overlayId:u}=e,m=(0,a().K8)((()=>t.containerDomNodeStore.state),[t],{debugName:"Overlay(overlayContainerDomNode).useComputedStore"}),g=(0,a().K8)((()=>{let n=e.zIndex;if(!l().Et(n)){n=Array.from(t.state.overlays).findIndex((e=>e===u))}return n}),[e.zIndex,u,t],{debugName:"Overlay(zIndex).useComputedStore"}),f=(0,s().IS)((()=>({overlay:{pointerEvents:"auto",position:"relative",transform:n?"translate3d(0, 0, 0)":void 0,zIndex:g}})),[g,n]);return m?i.createPortal((0,d.jsx)("div",{...p,...y,style:f.overlay,children:(0,d.jsx)(r().s,{active:o,children:c})}),m):null}function f(e){return Boolean(e&&c().Ll(e)&&e instanceof HTMLElement&&e.hasAttribute(u))}function v(e){return c().EV(e,f)}const h={eventPhase:Event.BUBBLING_PHASE,currentTarget:window},_={CustomEvent:!0,Event:!0,FocusEvent:!0,KeyboardEvent:!0,MouseEvent:!0,PointerEvent:!0,WheelEvent:!0,TouchEvent:!0};function b(e){const t=e.nativeEvent;if(!t||!t.constructor)return;const n=t.constructor.name||{}.toString.call(t.constructor).slice(8,-1);if(_[n])try{const n=new t.constructor(t.type,t);for(const e in t)"isTrusted"!==e&&"function"!=typeof t[e]&&Object.defineProperty(n,e,{writable:!1,value:h[e]||t[e]});e.stopPropagation(),window.dispatchEvent(n)}catch(o){}}const y={onCopy:void 0,onCopyCapture:void 0,onCut:void 0,onCutCapture:void 0,onPaste:void 0,onPasteCapture:void 0,onCompositionEnd:void 0,onCompositionEndCapture:void 0,onCompositionStart:void 0,onCompositionStartCapture:void 0,onCompositionUpdate:void 0,onCompositionUpdateCapture:void 0,onFocus:void 0,onFocusCapture:void 0,onBlur:void 0,onBlurCapture:void 0,onChange:void 0,onChangeCapture:void 0,onBeforeInput:void 0,onBeforeInputCapture:void 0,onInput:void 0,onInputCapture:void 0,onReset:void 0,onResetCapture:void 0,onSubmit:void 0,onSubmitCapture:void 0,onInvalid:void 0,onInvalidCapture:void 0,onLoad:void 0,onLoadCapture:void 0,onError:void 0,onErrorCapture:void 0,onKeyDown:void 0,onKeyDownCapture:void 0,onKeyPress:void 0,onKeyPressCapture:void 0,onKeyUp:void 0,onKeyUpCapture:void 0,onAbort:void 0,onAbortCapture:void 0,onCanPlay:void 0,onCanPlayCapture:void 0,onCanPlayThrough:void 0,onCanPlayThroughCapture:void 0,onDurationChange:void 0,onDurationChangeCapture:void 0,onEmptied:void 0,onEmptiedCapture:void 0,onEncrypted:void 0,onEncryptedCapture:void 0,onEnded:void 0,onEndedCapture:void 0,onLoadedData:void 0,onLoadedDataCapture:void 0,onLoadedMetadata:void 0,onLoadedMetadataCapture:void 0,onLoadStart:void 0,onLoadStartCapture:void 0,onPause:void 0,onPauseCapture:void 0,onPlay:void 0,onPlayCapture:void 0,onPlaying:void 0,onPlayingCapture:void 0,onProgress:void 0,onProgressCapture:void 0,onRateChange:void 0,onRateChangeCapture:void 0,onResize:void 0,onResizeCapture:void 0,onSeeked:void 0,onSeekedCapture:void 0,onSeeking:void 0,onSeekingCapture:void 0,onStalled:void 0,onStalledCapture:void 0,onSuspend:void 0,onSuspendCapture:void 0,onTimeUpdate:void 0,onTimeUpdateCapture:void 0,onVolumeChange:void 0,onVolumeChangeCapture:void 0,onWaiting:void 0,onWaitingCapture:void 0,onAuxClick:b,onAuxClickCapture:void 0,onClick:b,onClickCapture:void 0,onContextMenu:b,onContextMenuCapture:void 0,onDoubleClick:b,onDoubleClickCapture:void 0,onDrag:b,onDragCapture:void 0,onDragEnd:b,onDragEndCapture:void 0,onDragEnter:b,onDragEnterCapture:void 0,onDragExit:b,onDragExitCapture:void 0,onDragLeave:b,onDragLeaveCapture:void 0,onDragOver:b,onDragOverCapture:void 0,onDragStart:b,onDragStartCapture:void 0,onDrop:b,onDropCapture:void 0,onMouseDown:b,onMouseDownCapture:void 0,onMouseEnter:b,onMouseLeave:b,onMouseMove:b,onMouseMoveCapture:void 0,onMouseOut:b,onMouseOutCapture:void 0,onMouseOver:b,onMouseOverCapture:void 0,onMouseUp:b,onMouseUpCapture:void 0,onSelect:void 0,onSelectCapture:void 0,onTouchCancel:b,onTouchCancelCapture:void 0,onTouchEnd:b,onTouchEndCapture:void 0,onTouchMove:b,onTouchMoveCapture:void 0,onTouchStart:b,onTouchStartCapture:void 0,onPointerDown:b,onPointerDownCapture:void 0,onPointerMove:b,onPointerMoveCapture:void 0,onPointerUp:b,onPointerUpCapture:void 0,onPointerCancel:b,onPointerCancelCapture:void 0,onPointerEnter:b,onPointerLeave:b,onPointerOver:b,onPointerOverCapture:void 0,onPointerOut:b,onPointerOutCapture:void 0,onGotPointerCapture:b,onGotPointerCaptureCapture:void 0,onLostPointerCapture:b,onLostPointerCaptureCapture:void 0,onScroll:void 0,onScrollCapture:void 0,onWheel:void 0,onWheelCapture:void 0,onAnimationStart:void 0,onAnimationStartCapture:void 0,onAnimationEnd:void 0,onAnimationEndCapture:void 0,onAnimationIteration:void 0,onAnimationIterationCapture:void 0,onTransitionEnd:void 0,onTransitionEndCapture:void 0},S=o.memo(m)},177256:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.392 6.125a.5.5 0 0 0-.5.5v6.75a.5.5 0 0 0 .5.5h4.683a.5.5 0 0 0 .5-.5v-6.75a.5.5 0 0 0-.5-.5z"}),(0,o.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},r=(0,n(340498).wt)("peekSide",i)},178298:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(959013),s=()=>n(508104),l=()=>n(751156),c=()=>n(891078),d=()=>n(502438),u=()=>n(42425),p=n(474848);const m=(0,a().YK)({placeholder:{defaultMessage:"To-do",id:"todoBlock.placeholder"}});function g(e,t){const g=(0,a().tz)(),f=(0,i().Y0)(),v=(0,i().v3)(),h=(0,o.useRef)(null),_=(0,o.useId)(),b=(0,c().bx)(e.store,e.disabled),y=(0,c().pW)(e.store,!0),S=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),w=(0,r().K8)((()=>e.store.getContentStore()),[e.store]),k=(0,r().K8)((()=>{const t=e.store.getProperties();return!!t&&n(713998).wu(t.checked)}),[e.store]),I=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),x=(0,o.useCallback)((()=>{if(b){let t;t=n(496603).mK(d().default.state.stores,e.store)?d().default.state.stores:[e.store],v.mobileNative&&v.mobileNative.buzz(),k?l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().E({environment:v,blocks:t,transaction:e})}}):l().createAndCommit({userAction:"TodoBlock.toggleChecked",environment:v,canUndo:!0,perform:e=>{s().z({environment:v,blocks:t,transaction:e})}})}}),[b,v,k,e.store]),A=(0,n(401497).IS)((e=>({root:{paddingLeft:n(799954).nE.paddingLeft,...y},title:{...u().FC,width:void 0,flexGrow:1,...k&&{textDecoration:"line-through",textDecorationColor:I?e.text.uiBlueSecondary:e.strikethroughLineColor,opacity:1,color:e.text.secondary}},titlePlaceHolder:{...I?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}}})),[y,k,I]),C=(0,n(600871).cV)({device:f}),T=(0,o.useMemo)((()=>f.isMobile?C?{size:32}:{size:30}:void 0),[f.isMobile,C]),M=(0,p.jsxs)(u().Ay,{style:{...A.root,...e.style},left:(0,p.jsx)(n(625830).K,{"aria-labelledby":_,checked:k,onClick:x,disabled:!b,size:16,fill:y.color,tapArea:T}),childrenStyle:{display:"flex",flexDirection:"column"},ref:h,children:[(0,p.jsxs)("div",{style:{display:"flex"},children:[(0,p.jsx)(n(524702).A,{id:_,style:A.title,disabled:e.disabled,store:S,placeholder:e.placeholder??g.formatMessage(m.placeholder),placeholderStyle:A.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,p.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,p.jsx)(n(493733).A,{disabled:e.disabled,store:w,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})]});return(0,c().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"to_do",getNode:()=>h.current,getBlockStore:()=>e.store,activate:x})),[e.store,x]),M)}const f=o.memo(o.forwardRef(g),n(821062).A)},178687:(e,t,n)=>{n.d(t,{j:()=>o,w:()=>i});const o={localLanguagePreferenceKey:"CodeBlockDefaultLanguage",localCodeWrapPreferenceKey:"CodeBlockDefaultCodeWrap",defaultLanguage:"JavaScript",defaultCodePreviewFormat:"code"},i={localSizePreferenceKey:"QuoteBlockDefaultSize"}},179266:(e,t,n)=>{n.d(t,{L:()=>m});var o=()=>n(522419),i=()=>n(825237),r=()=>n(112069),a=()=>n(939768),s=()=>n(518646),l=()=>n(780054),c=()=>n(943846),d=()=>n(493208),u=()=>n(948914),p=()=>n(589994);async function m(e,t,n){var m;const{url:g,width:f,stripGoogleIconQuery:v}=e;e.isAuthenticated&&await p().transactionQueue.awaitRecordTransaction(e.permissionRecord);let h=g;if(o().JB(g)&&f)h=o().jy(g,f);else if(o().GM(g))h=e.isAuthenticated?i().wY({url:g,width:f,permissionRecord:e.permissionRecord,stripGoogleIconQuery:v,baseUrl:l().A.domainBaseUrl,fullyQualified:!1,userId:t.currentUser.id,freeze:e.disableAnimation}):i().x8({url:g,width:f,stripGoogleIconQuery:v,baseUrl:l().A.domainBaseUrl,fullyQualified:!1,userId:t.currentUser.id});else if(o()._J(g)&&e.isAuthenticated){const n=t.device,o=await(0,s().k)(t,{url:g,permissionRecord:e.permissionRecord,useS3Url:n.isIOS&&n.isMobileNative},Boolean(u().A.state.isNotionProtocolBugFixed));o&&(h=o)}else if(null!==(m=e.permissionRecord)&&void 0!==m&&m.id&&(0,d().x9)(g))h=a().Gm({url:`${l().A.domainBaseUrl}/eap${r().Rh.SECURE_EXTERNAL_PREVIEW}/${e.permissionRecord.id}/${encodeURIComponent(g)}`,query:e.permissionRecord});else if(!(0,c().xy)(h))throw new(c().Ld)(h);return n&&n(h),h}},179534:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(354520),n(672577),n(581454);var o=()=>n(351360);class i extends(()=>n(757695))().default{getInitialState(){return{results:[]}}getUnreadCountForCurrentSpace(){const{currentSpaceStore:e}=o().default.state,{results:t}=this.state;if(e){const n=t.find((t=>t.spaceId===e.id));if(n)return n.unread}return{mentions:0,following:0,highPriority:0,comments:0,activity:0}}getUnreadMentionsCountForOtherSpaces(){const{currentSpaceStore:e}=o().default.state,t=e&&e.id,{results:n}=this.state;let i=0;for(const o of n)o.spaceId!==t&&(i+=o.unread.mentions);return i}getTotalUnreadMentionsCount(){return this.getTotalUnreadCountForType("mentions")}getTotalUnreadCountForType(e){const{results:t}=this.state;let n=0;for(const i of t){var o;n+=(null===(o=i.unread)||void 0===o?void 0:o[e])??0}return n}markNotificationsAsReceived(e,t){const n=this.state.results.map((n=>n.spaceId===e?{...n,unreceived:{notificationIds:n.unreceived.notificationIds.filter((e=>!t.includes(e)))}}:n));this.setState({results:n})}}const r=new i},179580:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(803949);var o=()=>n(496603);const i=new class{constructor(e,t){this.messageDispatcher=void 0,this.requestToDependencies=void 0,this.dependencyToRequests=void 0,this.requestKeyToRequest=void 0,this.dependencyToListener=void 0,this.keyFn=void 0,this.fetchingStore=void 0,this.messageDispatcher=n(941541).Ay,this.requestToDependencies={},this.dependencyToRequests={},this.requestKeyToRequest={},this.dependencyToListener={},this.keyFn=e,this.fetchingStore=new(n(848776).U)(e,(async(e,n)=>{const o=await t(e,n);if(o)return this.register(e,n,o.dependencies??[]),o.value}))}getData(e,t){return this.fetchingStore.getData(e,t)}async awaitData(e,t){return await this.fetchingStore.awaitData(e,t)}register(e,t,n){const i=this.keyFn(t),r=this.requestToDependencies[i]??[],a=(0,o().R9)(n,r),s=(0,o().R9)(r,n);this.requestKeyToRequest[i]=t,this.requestToDependencies[i]=n,a.forEach((t=>{const n=this.dependencyToRequests[t]??[];if(this.dependencyToRequests[t]=(0,o().sb)([...n,i]),0===n.length){const n=this.messageDispatcher.addListener(t,void 0,(()=>{this.invalidateDependency(e,t)}),void 0,e);this.dependencyToListener[t]=n}})),s.forEach((t=>{const n=this.dependencyToRequests[t]??[],r=(0,o().R9)(n,[i]);this.dependencyToRequests[t]=r;const a=this.dependencyToListener[t];0===r.length&&a&&this.messageDispatcher.removeListener(a,e)}))}async invalidateDependency(e,t){const o=this.dependencyToRequests[t];await(0,n(763824).lX)(o,10,(t=>{const n=this.requestKeyToRequest[t];return this.fetchingStore.resetData(e,n)}))}TEST_ONLY__addListener(e,t){this.fetchingStore.TEST_ONLY__addListener(e,t)}TEST_ONLY__setMessageDispatcher(e){this.messageDispatcher=e}}((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{const o=await Promise.resolve().then(n.bind(n,449506)),i=await o.callApi({eventName:"getSubscriptionBanner",environment:e,data:t,headers:(0,n(386164).WS)({cellId:void 0,spaceId:t.spaceId})}),r=(0,n(921997).L0)(t);return"success"===i.type?{value:i.data,dependencies:[r]}:void 0}))},180762:(e,t,n)=>{n.d(t,{t:()=>m});var o=()=>n(584262),i=()=>n(763884),r=()=>n(861017),a=()=>n(869558),s=()=>n(857783),l=()=>n(638146),c=()=>n(351360),d=()=>n(630116),u=()=>n(559102),p=()=>n(407031);function m(e){const{environment:t,collectionViewId:n,openInNew:m,collectionContextStore:g,isFullScreen:f,isRootChild:v,isInPeekRenderer:h}=e,_=g.collectionViewBlockStore();if(!_)return;const{RouterStore:b}=t,y=(0,r().Fy)(b.state.route);if(_===c().default.state.mainEditorCurrentBlockStore||m||y)s().uK({environment:t,store:_,openInNew:m,collectionViewId:n,pageVisitSource:o().y8.ChangeCollectionView,...y});else{const e=new(d().pS)(t,{table:a().Gy,id:n},{inMemoryRecordCache:_.inMemoryRecordCache}),o=e.getCollectionStore();(0,u().d)({environment:t,collectionViewBlockStore:_,collectionViewStore:e,collectionStore:o,collectionContextStore:g,isFullScreen:f,isRootChild:v,isInPeekRenderer:h,viewsModuleContext:g.viewsModuleContextStore.state}),i().K.set({userId:t.currentUser.id,key:(0,l().H6)(_.id),value:n})}(0,p().S)({collectionContextStore:g})}},182106:(e,t,n)=>{n.d(t,{A:()=>i});n(944114),n(898992),n(672577),n(803949);class o extends(()=>n(959180))().A{findOutlinerItemFromStore(e){if(e)return this.find((t=>t.store===e))}findOutlinerItemsFromId(e){const t=[];return this.forEach((n=>{n.store.id===e&&t.push(n)})),t}}const i=new o},184701:(e,t,n)=>{n.d(t,{b:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{visible:!1}}}const i=new o},185544:(e,t,n)=>{n.d(t,{IT:()=>_,X$:()=>y,sg:()=>S,yM:()=>b});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var o=()=>n(700500),i=()=>n(179034),r=()=>n(919709),a=()=>n(498212),s=()=>n(534177),l=()=>n(972435),c=()=>n(640653),d=()=>n(630116),u=()=>n(160568),p=()=>n(394893),m=()=>n(468602),g=()=>n(722101),f=()=>n(246826),v=()=>n(319975);const h=(0,n(959013).YK)({forkPageError:{defaultMessage:"Could not fork page.",id:"spaceActions.dialogError.forkPageError.message"}});function _(e){const{environment:t,spaceViewStore:n,spaceStore:i,isPrivate:r,prepend:a,title:s,transaction:l,loading:c,tracker:d}=e,u=f().Wv({environment:t,type:c?o().xd.copyIndicator:o().xd.page,inMemoryRecordCache:i.inMemoryRecordCache,transaction:l,spaceId:i.id,tracker:d});return s&&v().R9({environment:t,store:u.getBlockTitleStore(),value:[[s]],transaction:l}),b({environment:t,spaceStore:i,spaceViewStore:n,pageStore:u,isPrivate:r,location:{type:a?"prepend":"append"},transaction:l}),u}function b(e){const{environment:t,spaceStore:n,spaceViewStore:o,pageStore:i,isPrivate:r,location:a,transaction:l}=e,{id:c}=t.currentUser;let d;r?c&&(d={type:"user_permission",role:"editor",user_id:c}):d={type:"space_permission",role:"editor"},f().zv({store:i,data:{permissions:d?[d]:[]},transaction:l}),r&&y({environment:t,spaceStore:n,spaceViewStore:o,transaction:l});const u=a||{type:"append"};"prepend"===u.type?g().Hs({parentStore:r?o.getPrivatePagesStore():n.getPagesStore(),prependStore:i,before:u.before,transaction:l}):"append"===u.type?g().BC({parentStore:r?o.getPrivatePagesStore():n.getPagesStore(),appendStore:i,after:u.after,transaction:l}):(0,s().HB)(u)}function y(e){const{environment:t,spaceStore:n,spaceViewStore:o,transaction:i}=e,r=new Set(o.getPrivatePageStores().map((e=>e.id)));(0,c().I0)(t,n).filter((e=>e.isTopLevelPrivatePage())).forEach((e=>{r.has(e.id)||g().BC({parentStore:o.getPrivatePagesStore(),appendStore:e,transaction:i})}))}async function S(e){const{environment:t,userRootStore:n,isPrivate:o,forkedPageId:s,spaceStore:c,spaceViewStore:g}=e;if(c.canEdit()){const e=d().Bv.createChildStore(n,{table:i().ev,id:s});m().Y({currentUserId:t.currentUser.id,blockId:void 0});const l=Date.now(),f=await p().i1({environment:t,store:e,spaceStore:c,spaceViewStore:g,isPrivate:o}),v=Date.now()-l;if(u().hB(t,{from:"onboarding",success:!f.error,template_block_id:s,target_space_id:(0,a().ot)(c.id),context:"fork_page_into_space",template_duplication_duration_ms:v,public_template_name:r().q4_(e.getTitleValue())}),void 0===f.error)return f.value}throw new Error(l().A.formatMessage(h.forkPageError))}},185991:(e,t,n)=>{function o(e){return e?"shift+command+j":"shift+ctrl+j"}function i(e){return e?"command+shift+y":"ctrl+shift+y"}n.d(t,{C:()=>i,u:()=>o})},186445:(e,t,n)=>{n.d(t,{X4:()=>K,jQ:()=>F,y0:()=>oe,ZT:()=>ne,s0:()=>U,Gu:()=>L,ao:()=>O,oc:()=>z,ZO:()=>j,_y:()=>$,UZ:()=>ae,_m:()=>V,xP:()=>Y,fl:()=>ce,Ws:()=>te,F8:()=>ee,Qr:()=>ue,jU:()=>se,kS:()=>Q,Te:()=>re,fI:()=>ie,Wu:()=>W,sj:()=>H,RR:()=>J,jx:()=>pe,$o:()=>G,tR:()=>de,rp:()=>X,XX:()=>le});n(898992),n(354520),n(672577),n(581454);var o=()=>n(496506),i=()=>n(700500),r=()=>n(219058),a=()=>n(711059);function s(e,t){const n=t.deviceType,o=t.mobileAppVersion;if(!(0,r().tq)(e)||"local"===e||!t.isMobileNative||!o)return!1;const i=function(e){const{environmentName:t,deviceType:n,mobileAppVersion:o,androidVersions:i,iosVersions:r}=e,s=(0,a().parseMobileAppVersion)(o,"android"===n);if(!s)return!1;if("android"===n&&!i||"ios"===n&&!r)return!1;let l;if("android"===n){if(!i)return!1;l=(0,a().parseMobileAppVersion)(i[t],!0)}else{if(!r)return!1;l=(0,a().parseMobileAppVersion)(r[t],!1)}return!!l&&(0,a().isLessThanVersion)(s,l)}({environmentName:e,deviceType:n,mobileAppVersion:o,iosVersions:{staging:"0.1.1022",development:"0.5.1168",production:"0.4.1021"}});return i}var l=()=>n(946065),c=()=>n(861017),d=()=>n(161479),u=()=>n(798880),p=()=>n(496603),m=()=>n(780054),g=()=>n(459882),f=()=>n(696746),v=()=>n(489348),h=()=>n(155959),_=()=>n(756279),b=()=>n(351360),y=()=>n(508496),S=()=>n(878423),w=()=>n(732770),k=()=>n(589994),I=()=>n(205682),x=()=>n(77238),A=()=>n(712505),C=()=>n(630116),T=()=>n(502438),M=()=>n(24157),P=()=>n(47373),B=()=>n(342),R=()=>n(396301),E=()=>n(747100),D=()=>n(953418),N=()=>n(640653);function L(){if(b().default.state.mainEditorCurrentBlockStore)return{id:b().default.state.mainEditorCurrentBlockStore.id,spaceId:(0,d().e)(b().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}}function O(){var e;const t=A().default.state,n=E().m3(),o=t.open&&n?t.targetStore:b().default.state.mainEditorCurrentBlockStore,i=null===(e=S().A.state.caches[B().oB])||void 0===e?void 0:e.inMemoryRecordCache;return i?null==o?void 0:o.clone(i):o}function U(){if(b().default.state.mainEditorCurrentBlockStore)return b().default.state.mainEditorCurrentBlockStore.id}function F(){return E().Gb()?x().A:I().A}function V(e){let t;return b().default.state.currentUserStore?t=b().default.state.currentUserStore:e.currentUser.id&&(t=new(C().LU)(e,{table:u().oo,id:e.currentUser.id})),t}function j(){const e=T().default.getCurrentRootStore();if(e&&e instanceof C().Bv)return e}function z(){const e=T().default.getCurrentRootStore();if(e&&e instanceof C().Bv)return e;const{currentSpaceStore:t}=b().default.state;return t||void 0}function H(e){return"myTasks"===(0,f().IA)({blockOrCollectionId:e})}function W(e){return"customDb"===(0,f().IA)({blockOrCollectionId:e})}const q=new(n(752885).p)({debugName:"getAppRenderState",memoizeRecursion:!0,deepEquals:!1,compute:function(e){var t;const{mainEditorCurrentBlockStore:o,initialized:i}=b().default.state,r=e.currentUser.isLoggedIn(),a=e.RouterStore.state.route,s=Boolean(o&&o.canRead()&&o.isDefined()),l=Boolean(o&&o.canEdit()&&o.isDefined()),d=Boolean(o&&(0,n(299545)._C)(o)),u=o&&s&&(0,n(731320).qb)(e,o),p=Boolean(u),m=u&&(0,n(68263).p2)(u.permissionItem.role),g=l&&!m,v=(null==o||null===(t=o.getModel())||void 0===t?void 0:t.isNonverifiedContentClassification())&&!(o&&n(278715).A.bypassedPage(o.id))&&!g,{publicPageData:h}=n(792415).A.state,_=!i||!d,S=Boolean(o&&o.isReady()&&!s),w=(0,f().lU)(o),k="page"===a.name&&void 0!==a.slug&&!a.blockId,I=i&&!o&&!k,x=n(236933).E.state.hasWorkspaceAccessError,A=(null==o?void 0:o.isPlaceholderWorkflowTemplateBlock())??!1,C=Boolean((0,c().BH)(a)&&(I||S&&!w||v||A||(null==h?void 0:h.requireInterstitial)||(null==h?void 0:h.requireLogin)&&!r||x));C&&(0,P().Us)()&&n(857639).log({level:"info",from:"appHelpers",type:"shouldShowError",data:{miscDataToConvertToString:{currRoute:a,publicPageData:h,shouldErrorForMissingCurrentBlockStore:I,isPageLoadedButCantRead:S,isPersonalHomeStore:w,shouldShowContentClassification:v,isMainEditorCurrentBlockStoreStillLoadingSlug:k,initialized:i,isLoggedIn:r,mainBlock:Boolean(o),mainBlockCanRead:null==o?void 0:o.canRead(),mainBlockDefined:null==o?void 0:o.isDefined()}}});const T=S&&w;return{shouldShowSidebar:function(){if((0,n(836251).w6)(e))return Boolean(null==h?void 0:h.template);if((0,n(26468).j)(e))return!0;const t=O()&&(null==h?void 0:h.isDLSViewer),o="quickSearch"===a.name,i=("marketplace"===a.name||"gallery"===a.name)&&e.device.isMobile,c="posts"===a.name,u=n(263711).g.getState().isOpen,m=y().default.checkGate({gateName:"sharing_full_sidebar_awtl_in_member_workspace"});return Boolean(!u&&!o&&!C&&!i&&!c&&r&&(_||s&&(m||l&&!p||d&&!p)&&!v&&!(null!=h&&h.requireInterstitial)&&!t))}(),shouldShowFrame:(0,c().Dk)(a)||!C,shouldShowError:C,shouldRedirectFromHome:T}}});function K(e){return q.getStateFor(e)}const G=new(o().default)((()=>{const{mainEditorCurrentBlockStore:e}=b().default.state,t=e&&e.isCollectionView();return w().A.state.isKeyboardMode&&!n(172079).A.state&&!n(270710).A.isActive()&&!t&&!n(899677).default.state.open&&!n(735372).Ay.state.open&&!(0,n(229417).y)()&&0===n(150193).A.state.banners.length&&!n(964345).gZ.state}),{debugName:"appHelpers.shouldHideTopbarStore"});function $(e){const{currentSpaceViewStore:t}=b().default.state;if(t){return p().KC(t.getWorkspacePages()??[],(0,N().cU)(e,t),t.getPrivatePages(e)??[]).filter((e=>e.isNavigableBlock()))}return[]}function Y(e){const{currentSpaceViewStore:t}=b().default.state;return t?p().hS([...t.getBookmarkedPages(),...t.getWorkspacePages()??[],...(0,N().cU)(e,t),...t.getPrivatePages(e)??[]],"id"):[]}function Q(e){return e.getType()===i().xd.copyIndicator&&!k().transactionQueue.isPendingTransactionForRecord(e.pointer)}function Z(e){var t;const{currentSpaceStore:o,currentSpaceViewStore:i,currentUserRootStore:r,currentUserSettingsStore:a}=b().default.state;if(!(i&&r&&o&&a))return;const s=(0,P().rY)(e),c=(0,N().Xz)({environment:e,spaceId:o.id})??1,d=i.getBookmarkedPages(),u=i.getWorkspacePages()??[],p=i.getTeamsStores();let{allPagesStores:m,visiblePagesStores:g}=(0,N().au)({environment:e,spaceViewStore:i,userSettingsStore:a,type:"shared"}).state;const f=(0,N().IL)(i.getSpaceStore())&&"external_pages_sidebar"===y().default.getGroup("sharing_collaboration_sidebar_guest_aggregation");if(f){const t=(0,n(581857).P)({environment:e,currentUserRootStore:r});m=t.allPageStores,g=t.visiblePageStores}const{allPagesStores:v,visiblePagesStores:h}=(0,N().au)({environment:e,spaceViewStore:i,userSettingsStore:a,type:"private"}).state,_=(0,N().IL)(o),S=1===c&&0===u.length&&"personal"===o.getPlanType(),w=d.length>0;let k=!1;void 0!==i&&(k=i.shouldShowWorkspaceSection(_));const I=m.length>0,x=null==a||null===(t=a.getSettings())||void 0===t?void 0:t.signup_time,A=Boolean((0,N().s7)(e)),C=e.device.isDesktop,T=!(x&&(0,n(113806).e)({signupTime:x,age:"1_week"})&&(0,n(440209).f1)({environment:e,experimentId:"adoption_hide_features_v2",variant:["hide_all_except_essential","hide_all_except_home","hide_all_except_templates","hide_all_except_ai"],isUserWorkspaceOwner:A,isDesktop:C}))&&!I&&S&&!(()=>{var e;const t=null===(e=n(809363).H.getState())||void 0===e?void 0:e.dismissedExpiresAt,o=Date.now();return t&&t>o})()&&y().default.checkGate({gateName:"first_time_sharing_sidebar_section"}),M=a.hasUserPinnedToOutliner({spaceId:o.id,type:"shared"}),B=(0,R().RQ)({spaceViewStore:i,type:"teamspaces"}),E=B.truncationLimit===l().vw?p:p.slice(0,B.truncationLimit),D=E.length>0,L=(0,R().RQ)({spaceViewStore:i,type:"shared"}),O=s?m.length>L.truncationLimit&&L.truncationLimit!==l().vw:m.length>N().RC||M,U=(0,R().RQ)({spaceViewStore:i,type:"private"}),F=v.length>U.truncationLimit&&U.truncationLimit!==l().vw,V=!_,j=!(w||k||I||D),z=d.length+m.length+u.length+v.length>=8,H=[w,k,I,V,D].filter(Boolean).length;return{isGuest:_,isPersonalSpace:S,showBookmarksSection:w,showWorkspaceSection:k,showSharedSection:I,showPrivateSection:V,showOnlyPrivateSection:j,showSharedOverflowButton:O,showPrivateOverflowButton:F,shownSidebarSectionCount:H,stickTemplateItemsToBottom:z,allSharedPagesStores:m,allPrivatePagesStores:v,visibleSharedPagesStores:g,visiblePrivatePagesStores:h,showTeamSection:D,userJoinedTeamsStores:p,visibleTeamsStores:E,showEmptySharedSection:T,showCrossWorkspaceGuestPagesPrototype:f}}const X=p().Bj((e=>new(o().default)((()=>Z(e)),{useDeepEqual:!0,debugName:"sidebarStateStore"}))),J=new(o().default)((()=>w().A.state.isKeyboardMode||n(93658).default.state.isActive||n(861841).Ay.state.isDragging||n(110955).A.state.open||n(375447).A.state.open||n(176106).A.state.open||n(525112).A.state.open||n(210737).A.hasOpenMouseCapturePopup()||I().A.state.isOpen&&!A().default.isCenterPeekOpen()||x().A.state.isOpen||n(597368).A.state.open||n(16990).A.state.isPinned||n(610640).A.state.isHovered),{debugName:"menuIsOpenStore"});function ee(e){return e.device.isPhone?24:96}function te(e){return ee(e)}function ne(e){const t=T().default.getCurrentDefaultContainer();if(t)return v().A.find((e=>e.store===t.getProps().store))}function oe(e){const t=g().x-2*ee(e),n=ne();if(n){const e=n.getContentInnerWidth();if(e)return Math.min(t,e)}return t}function ie(){const e=O(),t=M().default.state;if("editing"!==t.mode)return!1;const n=t.multiSelection.start.store;return Boolean(e&&e.id===n.id&&(e.getBlockTitleStore()===n||p().n4(e.getBlockTitleStore().path,n.path)))}function re(){const e=M().default.state;if("editing"!==e.mode)return!1;const t=e.multiSelection.start.store,n="collection"===t.table;return t.path.includes("name")&&n||!1}function ae(){const{currentUserRootStore:e}=b().default.state;if(e){const t=e.getSpaceViewStores();return p().oE(t.map((e=>e.getSpaceId())))}return[]}function se(e){return p().hS(e.getSpaceViewStores(),(e=>e.getSpaceId())).filter((e=>{const t=e.getSpaceStore();return e.isDefined()&&t&&t.canEdit()}))}const le=new(o().default)((function(){const{currentUserSettingsStore:e}=b().default.state,t=(0,n(604995).Lm)();if(e){const n=e.getSettings();return void 0===(null==n?void 0:n.start_day_of_week)?t:null==n?void 0:n.start_day_of_week}return t}),{debugName:"userSettingsStartOfWeek"});function ce(e){const{environment:t,store:n}=e;return n.isCollectionView()?(0,D().z4)(t)?_().A.All:_().A.Y:!E().cq(n)&&A().default.isSidePeekOpen()?_().A.All:_().A.Y}function de(e){return s("production",e.device)||!(0,h().T)("supportsNativeSearch")}function ue(e){const{currentUserRootStore:t,mainEditorCurrentBlockStore:n}=b().default.state;return"quickSearch"===e.RouterStore.state.route.name&&t||t||n}function pe(){m().A.isAdminMode||console.log("%c\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnn                         nnnn\n\tnnnnnnn                          nnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\n\tnnnnnnnn                           nnn\n\tnnnnnnnn    nnnnnnnn     nnnnnnn   nnn\n\tnnnnnnnn      nnnnnnn      nnn     nnn\n\tnnnnnnnn      nnnnnnnn     nnn     nnn\n\tnnnnnnnn      nnnnnnnnnn   nnn     nnn\n\tnnnnnnnn      nnn nnnnnnn  nnn     nnn\n\tnnnnnnnn      nnn  nnnnnnnnnnn     nnn\n\tnnnnnnnn      nnn   nnnnnnnnnn     nnn\n\tnnnnnnnn      nnn     nnnnnnnn     nnn\n\tnnnnnnnn      nnn      nnnnnnn     nnn\n\tnnnnnnnn    nnnnnnnn    nnnnnn     nnn\n\t  nnnnnn                           nnn\n\t\tnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tWe're hiring!\n\t\t  nnnnnnnnnnnnnnnnnnnnnnnnnnnnnnnn\t\tnotion.so/careers\n\n\t“yeah, I would probably eat a lemon for one hundred dollars” --Abraham Lincoln (2023-07-14)\n\t\t\t\t ","font-family: monospace")}},187015:(e,t,n)=>{function o(e){var t;return null==e||null===(t=e.split(".notion."))||void 0===t?void 0:t[1]}n.d(t,{z:()=>o})},187485:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){let{style:o,href:r,...a}=e;const[s,l]=(0,n(819121).A)(),c=(0,n(93583).A)(t,s),d=(0,n(401497).IS)((e=>({root:{display:"block",textDecoration:"none",userSelect:"none",WebkitUserSelect:"none",cursor:"pointer",color:n(100622).Ay.inherit,...l&&{boxShadow:e.outlineBlueInputBoxShadow}}})),[l]);return(0,i.jsx)(n(758740).A,{href:r??"",ref:c,style:{...d.root,...o},...a})}const a=o.forwardRef(r)},187778:(e,t,n)=>{n.d(t,{G:()=>r});var o=()=>n(148777),i=()=>n(351360);const r=(0,n(500815).g)((async function(e,t){const{hasPublicAccessPermission:r}=n(780865).Er(e),a=i().default.state.currentSpaceStore,s=i().default.state.currentSpaceViewStore;if(r)return;if(!a)return;let l=(0,o().PE)({environment:e,overrideSpaceId:a.id,overrideSpaceViewStore:s});const c=await(0,n(448433).h)({environment:e,currentSpaceStore:a,currentSpaceViewStore:s});if(l={...l,...(0,o().hQ)(c)},c){let r=!1,a=0;const s=performance.now();n(20199).A.update((e=>{var t,n,o;const s=null===(t=e.localSearchableBlocksCache)||void 0===t?void 0:t.buildStartTime,l=s&&s>=c.buildStartTime,d=(null===(n=i().default.state.currentSpaceStore)||void 0===n?void 0:n.id)&&(null===(o=i().default.state.currentSpaceStore)||void 0===o?void 0:o.id)!==c.spaceId;return l||d?e:(r=!0,a=(e.version??0)+1,{...e,localSearchableBlocksCache:c,version:a})})),r&&((0,o().So)((e=>({...e,[t]:s,[`${t}0`]:e[t]??s}))),n(406792).default.measure({metricName:"search_local_refresh_searchable_blocks",startTime:c.buildStartTime,endTime:s},{environment:e,data:{buildStartTime:c.buildStartTime,searchSessionId:void 0,documentCount:c.blocks.documentCount,cacheStats:l,refreshTrigger:t,numRecordsRequiredSync:c.numRecordsRequiredSync,readinessTimings:(0,o().Yp)(),timings:c.timings,version:a}}))}}),{concurrency:1})},187959:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},188669:(e,t,n)=>{n.d(t,{Ay:()=>a,Zj:()=>o,jU:()=>r});const o=["page","space","team","space-private-pages"];class i extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1,lastPageId:void 0}}getVariant(){if(this.state.isOpen)return this.state.variant}getDatabaseType(){return this.getOverrideDatabaseType()??this.getTargetsDatabaseType()}getOverrideDatabaseType(){if(this.state.isOpen&&"typed"===this.state.variant)return this.state.overrideDatabaseType}getTargetsDatabaseType(){if(this.state.isOpen)return r(this.state.targets)}}function r(e){var t;if(0===e.length)return;const n=null===(t=e[0].getAssociatedCollectionStore())||void 0===t?void 0:t.getDatabaseType();if(n){for(const t of e){var o;if(n!==(null===(o=t.getAssociatedCollectionStore())||void 0===o?void 0:o.getDatabaseType()))return}return n}}const a=new i},188709:(e,t,n)=>{n.d(t,{tK:()=>c,wY:()=>d});n(944114),n(898992),n(354520);var o=n(296540),i=()=>n(821062);const r=/auto|scroll/;function a(e){const t=getComputedStyle(e),n="border-box"===t.boxSizing,o=r.test(t.overflowY||""),i=r.test(t.overflowX||""),a=parseFloat(t.paddingTop||"0"),s=parseFloat(t.paddingRight||"0"),l=parseFloat(t.paddingBottom||"0"),c=parseFloat(t.paddingLeft||"0"),d=parseFloat(t.borderTopWidth||"0"),u=parseFloat(t.borderRightWidth||"0"),p=parseFloat(t.borderBottomWidth||"0"),m=c+s,g=a+l,f=parseFloat(t.borderLeftWidth||"0")+u,v=d+p,h=i?e.offsetHeight-v-e.clientHeight:0,_=o?e.offsetWidth-f-e.clientWidth:0,b=n?m+f:0,y=n?g+v:0;return{borderBoxWidth:parseFloat(t.width||"0")-b-_+m+_+f,borderBoxHeight:parseFloat(t.height||"0")-y-h+g+h+v}}let s,l;function c(e,t){s=s??new WeakMap,l=l??function(e){return new ResizeObserver((t=>{const n=new Map;for(const e of t)n.set(e.target,e);for(const o of n.values()){const t=o.target,n=e.get(t);if(!n||0===n.length)continue;let i;if("borderBoxSize"in o){const e=o.borderBoxSize[0];i={width:e.inlineSize,height:e.blockSize}}else{const{borderBoxWidth:e,borderBoxHeight:n}=a(t);i={width:e,height:n}}for(const e of n)e(i)}}))}(s),(0,o.useEffect)((()=>{const n=e.current;if(n){var o;if(s.has(n))null===(o=s.get(n))||void 0===o||o.push(t);else l.observe(n),s.set(n,[t]);return()=>{const e=(s.get(n)??[]).filter((e=>e!==t));0===e.length?(l.unobserve(n),s.delete(n)):s.set(n,e)}}}),[t,e])}function d(e){const[t,n]=(0,o.useState)(void 0);return c(e,(0,o.useCallback)((e=>{n((t=>(0,i().A)(t,e)?t:e))}),[])),t}},190019:(e,t,n)=>{n.d(t,{Z:()=>c});n(898992),n(354520),n(581454);var o=()=>n(322867),i=()=>n(416504),r=()=>n(534177),a=()=>n(68465),s=()=>n(508496),l=()=>n(630116);function c(e){const{environment:t,automationStore:n,automationTypecheckModule:c,contextType:d,formulasModule:u,intl:p,isSubscribed:m}=e,g=n.getModel();if(!(0,r().O9)(g))return{error:new(o().N9)("Missing automation model")};const f=n.getActionStores().map((e=>e.getModel())).filter(r().O9);if(f.length!==g.getActionIds().length)return{error:new(o().N9)("Missing automation action models")};const v=(0,a().t1)(t);let h;if("button_block"===d){const e=n.getRecordStoreUIRoot();if(!(e instanceof l().Bv&&(e.isPageBlock()||e.isCollectionViewPageWithContent())))return{error:new(o().N9)("Missing page block model")};h={actionModels:f,assistantFeatureGate:v,checkExperimentGate:e=>s().default.checkGate({gateName:e}),automationModel:g,contextType:d,formulasModule:u,getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,intl:p,isSubscribed:m,pageBlockModel:e.getModel(),userTimeZone:(0,i().P)(),valueTypes:[],env:"production"}}else h={actionModels:f,assistantFeatureGate:v,checkExperimentGate:e=>s().default.checkGate({gateName:e}),automationModel:g,contextType:d,formulasModule:u,getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,intl:p,isSubscribed:m,userTimeZone:(0,i().P)(),valueTypes:[],env:"production"};return c.typecheckAutomation(h)}},191597:(e,t,n)=>{n.d(t,{a:()=>r});var o=()=>n(989423),i=()=>n(508496);function r(e){const t=e.collectionContextStore.collectionViewStore();if(!t)return;const n=i().default.checkGate({gateName:"collection_group_reducer_visible"}),r=t.getFormatStore().getKeyStore("collection_group_by").getKeyStore("type").getValue(),a=t.getFormatStore().getKeyStore("board_columns_by").getKeyStore("type").getValue();o().u4({environment:e.environment,event:{eventName:"collection_extraneous_group_request",eventProperties:{view_type:t.getType(),group_by_type:r,sub_group_by_type:a,request_reason:e.request_reason,group_reducer_version:n?"v2":"v1"}}})}},192264:(e,t,n)=>{n.d(t,{il:()=>le,wO:()=>ae,nE:()=>se});var o=n(296540),i=()=>n(662303),r=()=>n(484714),a=()=>n(847249),s=()=>n(401497),l=()=>n(700500),c=()=>n(304740),d=()=>n(187174),u=()=>n(576250),p=()=>n(340498),m=n(474848);const g=(0,p().wt)("alignCenter",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-8.736 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.656-1.905-1.922-1.905H5.704c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.843-.28-.843-.85V5.78c0-.568.298-.85.843-.85h4.452c.539 0 .843.282.843.85v4.44c0 .568-.304.85-.697.85H5.774z"})}),f=(0,p().wt)("alignLeft",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zM3.372 12.218H8.11c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H3.372c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H3.442z"})}),v=(0,p().wt)("alignRight",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M14.44 15.325H1.554a.598.598 0 01-.602-.602c0-.335.267-.601.602-.601H14.44c.334 0 .608.266.608.601a.604.604 0 01-.608.602zm0-13.447H1.554a.598.598 0 01-.602-.601c0-.335.267-.602.602-.602H14.44c.334 0 .608.267.608.602a.604.604 0 01-.608.601zm-6.408 10.34h4.738c1.12 0 1.776-.65 1.776-1.905V5.687c0-1.254-.657-1.905-1.922-1.905H8.032c-1.266 0-1.922.65-1.922 1.905v4.626c0 1.254.656 1.905 1.922 1.905zm.07-1.149c-.545 0-.844-.28-.844-.85V5.78c0-.568.3-.85.844-.85h4.451c.54 0 .844.282.844.85v4.44c0 .568-.305.85-.697.85H8.102z"})}),h=(0,p().wt)("caption",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M2.87 8.975h6.74c1.119 0 1.775-.65 1.775-1.904V2.444c0-1.254-.656-1.904-1.922-1.904H2.871C1.605.54.949 1.19.949 2.444V7.07c0 1.254.656 1.904 1.922 1.904zm.07-1.148c-.544 0-.843-.282-.843-.85v-4.44c0-.568.299-.849.844-.849h6.451c.54 0 .844.281.844.85v4.44c0 .567-.305.849-.697.849H2.94zm-1.39 4.386h12.893a.604.604 0 00.608-.601.604.604 0 00-.608-.602H1.55a.598.598 0 00-.601.602c0 .335.266.601.601.601zm8.49 3.247H1.55a.598.598 0 01-.601-.601c0-.335.266-.602.601-.602h8.49c.336 0 .609.267.609.602a.604.604 0 01-.608.601z"})});var _=()=>n(668725);const b=(0,p().wt)("crop",{viewBox:"0 0 16 16",svg:(0,m.jsx)("path",{d:"M15.571 11.703c0 .187-.063.34-.191.458a.68.68 0 01-.492.177H4.21a.573.573 0 01-.424-.157.573.573 0 01-.157-.424V1.127c0-.205.064-.371.191-.499A.646.646 0 014.306.43c.196 0 .357.066.485.198a.675.675 0 01.191.5v9.734c0 .127.066.191.199.191h9.707c.205 0 .369.06.492.178a.613.613 0 01.191.472zM.43 4.306c0-.187.061-.34.184-.458a.68.68 0 01.492-.184h10.692a.56.56 0 01.581.588v10.622a.67.67 0 01-.198.506.658.658 0 01-.486.192.657.657 0 01-.485-.192.684.684 0 01-.191-.506V5.147c0-.132-.066-.198-.199-.198H1.106c-.2 0-.364-.06-.492-.178a.616.616 0 01-.184-.465z"})});var y=()=>n(812318),S=()=>n(715862),w=()=>n(901497),k=()=>n(965998),I=()=>n(959013),x=()=>n(100622),A=()=>n(284371),C=()=>n(437219),T=()=>n(799750),M=()=>n(112873),P=()=>n(675074),B=()=>n(896628),R=()=>n(797265),E=()=>n(778417),D=()=>n(725614),N=()=>n(675925),L=()=>n(751156),O=()=>n(783793),U=()=>n(36088),F=()=>n(730307),V=()=>n(359848),j=()=>n(555776),z=()=>n(116008),H=()=>n(780054),W=()=>n(553965),q=()=>n(299545),K=()=>n(963589),G=()=>n(444796),$=()=>n(962730),Y=()=>n(430483),Q=()=>n(227440),Z=()=>n(471266),X=()=>n(553819),J=()=>n(496889),ee=()=>n(704152),te=()=>n(406699),ne=()=>n(859428),oe=()=>n(613147),ie=()=>n(24611);const re=230,ae=(0,I().YK)({embedButtonText:{defaultMessage:"Embed link",id:"embedBlock.embedButton.label"},askAiText:{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePen…",id:"embedBlock.linkPrompt.caption"},pastePrompt:{defaultMessage:"Paste in https://…",id:"embedBlock.pastePrompt"},validLink:{defaultMessage:"Please enter a valid link.",id:"embedBlock.invalidLinkError.message"},embedTitle:{defaultMessage:"Embed",id:"embedBlock.embedTab.title"},actionComment:{defaultMessage:"Comment",id:"embedBlock.actionButton.tooltip.comment"},actionDownload:{defaultMessage:"Download",id:"embedBlock.actionButton.tooltip.download"},actionOriginal:{defaultMessage:"Original",id:"embedBlock.actionButton.tooltip.original"},actionAlign:{defaultMessage:"Align",id:"embedBlock.actionButton.tooltip.align"},actionCaption:{defaultMessage:"Caption",id:"embedBlock.actionButton.tooltip.caption"},actionExpand:{defaultMessage:"Expand",id:"embedBlock.actionButton.tooltip.expand"},actionMore:{defaultMessage:"More actions",id:"embedBlock.actionButton.tooltip.blockActionMenu"},actionEditImage:{defaultMessage:"Crop image",id:"embedBlock.actionButton.tooltip.cropImage"},actionViewAltText:{defaultMessage:"Click to view alt text",id:"embedBlock.actionButton.tooltip.viewAltText"},actionEditAltText:{defaultMessage:"Click to view and edit alt text",id:"embedBlock.actionButton.tooltip.editAltText"},actionOpenInBrowserText:{defaultMessage:"Open in browser",id:"embedBlock.actionButton.tooltip.openInBrowser"}});function se(e){let{environment:t,visible:n,height:o}=e;return(0,s().IS)((e=>{const{device:r}=t,{isMobile:a}=r;return{wrapper:{position:"absolute",top:4,right:4,borderRadius:4,color:x().Ay.white,fill:x().Ay.white,fontSize:11.5,background:(0,ie().FF)(t),display:"flex",whiteSpace:"nowrap",alignItems:"center",height:o||26,maxWidth:"calc(100% - 16px)",overflow:"hidden",pointerEvents:n||a?"auto":"none",opacity:n||a?1:0,transition:r.isSafari?void 0:ie().Wh,fontFamily:A().vc(i().locale).sans,zIndex:2}}}),[n,t,o]).wrapper}function le(e){const t=(0,r().v3)(),{device:i}=t,p=(0,r().WS)(),g=(0,I().tz)(),{store:f,blockLocation:v,mediaType:A,source:B,blockResizerStore:L,fileUploadState:J,isStoreNavigableAncestorNonEditableState:le,embedBlockStore:me,alignmentPopupStore:ge,canEdit:fe,dimensions:ve}=e,{hasEditPermission:he,hasCommentPermission:_e,isExternalObjectInstanceBlockStore:be,blockType:ye,originalImageSourceFromStore:Se,pathIsDead:we}=(0,a().K8)((()=>({hasEditPermission:f.canEdit(),hasCommentPermission:f.canComment(),isExternalObjectInstanceBlockStore:f.isExternalObjectInstanceBlockStore(),blockType:f.getType(),originalImageSourceFromStore:f.getOriginalImageSource(),pathIsDead:f.pathIsDead(),imageHyperlink:f.getImageHyperlink()})),[f]),{block_alignment:ke}=(0,a().K8)((()=>f.getFormat()),[f]),{isFullWidth:Ie,width:xe,isPageWidth:Ae}=ve,Ce=be,Te=(0,a().O$)(Q().e),Me=(0,a().K8)((()=>function(e,t,n,o){var i;return function(e,t,n){if(t)return ie().KJ.image;if(e){if(e.startsWith("data:")||e.startsWith("<img"))return;const t=(0,c().WT)({url:e,baseUrl:H().A.domainBaseUrl,publicDomainName:H().A.publicDomainName,preferredType:n});if("embed"!==t)return ie().KJ[t]}if(n&&e)return ie().KJ[n];return oe().A}(e,null==o?void 0:o.dataURL,t??(null===(i=n)||void 0===i?void 0:i.getType()))}(B,A,f,J)),[J,A,B,f]),Pe=(0,a().K8)((()=>function(e,t){const{block_width:n}=e.getFormat(),{temporaryWidth:o}=t.state;if(void 0!==o)return o<=re;if(void 0!==n)return n<=re;return!1}(f,L)),[L,f]),Be=(0,a().K8)((()=>X().A.getStatus(f.id)),[f.id]),Re=(0,a().K8)((()=>L.getState().dragging),[L]),Ee=P().Ox(v),De=!i.isMobile&&!Ee&&!Ce,Ne=xe&&!Ae&&!Ie&&!p&&!Ee,Le=!i.isMobile&&((null==Me?void 0:Me.renderFullScreen)&&Ce||"image"===ye),Oe=Te&&!i.isMobile,Ue=(0,K().X)("image_cropping"),Fe=(0,a().K8)((()=>z().A.state.open&&"comment"===z().A.state.content?z().A.state.discussionInputStore:null),[]),Ve=(0,a().K8)((()=>z().A.state.open&&"comment"===z().A.state.content&&z().A.state.blockId===f.id),[f.id]),je=(0,a().K8)((()=>q().oC(f,{recursivelyLoadAllDiscussions:!1})),[f]),{focused:ze,hovered:He}=(0,a().O$)(me),We=(0,a().K8)((()=>j().A),[]),qe=(0,a().K8)((()=>Z().A),[]),Ke=(0,a().K8)((()=>f.isRootOrDirectChild()),[f]),[{value:Ge}]=(0,d().Yb)((async()=>{const e=await Promise.resolve().then(n.bind(n,650829));return(await e.assistantDependency.load()).assistantActions}),[]),$e=(0,o.useCallback)((()=>ke||(Ke?"center":"left")),[Ke,ke]),Ye=se({environment:t,visible:ze||He}),Qe=(0,a().K8)((()=>Y().zD.shouldShowAttachmentImageButton()),[]),Ze=(0,s().IS)((e=>({commentButton:{position:"relative",...ie().k,...i.isMobile&&{paddingLeft:8,paddingRight:8}}})),[i.isMobile]);if(J&&"uploading"!==Be)return null;if(Re||Me&&Me.hideActions)return null;{let e=je;if(Ve&&(e+=1),"image"!==ye||!le&&fe){if(le)return(0,m.jsx)("div",{style:Ye,children:(0,m.jsx)(ee().A,{style:ie().k,hoveredStyle:ie().t9,onClick:()=>ce(f,t),children:(0,m.jsx)(I().sA,{defaultMessage:"View original",id:"embedBlock.viewOriginalLink.button.label"})})});if(Pe)return(0,m.jsx)("div",{style:Ye,children:(0,m.jsx)(de,{blockLocation:v,store:f})});{const n=300,o=$().W.Top;let r,a;"image"===ye&&(a=Se);const s=Ue&&!i.isMobile&&!Ee&&"image"===ye&&he&&a&&(0,G().AS)(a)&&!we&&Te,c=ve.blockWidth??ve.width,d=!Ee&&"image"===ye&&a&&!we&&!i.isMobile&&Qe&&c&&c>300&&Te;if(ye&&(0,l().bI)(ye))r=(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionDownload),placement:o,delayThreshold:n,render:e=>(0,m.jsx)(ee().A,{...e,ariaLabel:g.formatMessage(ae.actionDownload),style:ie().k,hoveredStyle:ie().t9,onClick:()=>function(e,t){const n=e.getType(),o={action:"download",block_type:n,from:"embed_block_actions"};(0,N().o)(t,o,(n=>{P().qI({environment:t,store:e,callback:n})})),n&&C().qU(t,{type:"download",block_type:n,block_id:e.id})}(f,t),children:(0,y().k)({width:14,height:14,marginRight:0,fill:x().Ay.white})})});else{const e=i.isElectron?ae.actionOpenInBrowserText:ae.actionOriginal;r=(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(e),placement:o,delayThreshold:n,render:n=>(0,m.jsx)(ee().A,{...n,ariaLabel:g.formatMessage(e),style:ie().k,hoveredStyle:ie().t9,onClick:()=>ce(f,t),children:(0,u().y)({width:14,height:14,marginRight:0,fill:x().Ay.white})})})}return(0,m.jsxs)("div",{style:Ye,children:[d&&Ge&&(0,m.jsx)(ee().A,{ariaLabel:g.formatMessage(ae.askAiText),style:ie().k,hoveredStyle:ie().t9,onClick:e=>{a&&(Ge.initializeSessionFromAttachmentBlockSelection({environment:t,selectedAttachmentStore:f}),e.preventDefault(),e.stopPropagation())},children:(0,m.jsx)(O().U,{})}),!Ee&&!Ce&&_e&&(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionComment),placement:o,delayThreshold:n,render:n=>(0,m.jsxs)(ee().A,{...n,ariaLabel:g.formatMessage(ae.actionComment),style:Ze.commentButton,hoveredStyle:ie().t9,onClick:()=>{E().IU({environment:t}),e>0?Ve&&Fe?(We.setActiveWithSource("text_annotation"),(0,U().M)({discussionInputStore:Fe,environment:t})):M().B4({environment:t,blockStore:f,analyticsFrom:"embed_menu",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1}):(0,F().l)({environment:t,blockStore:f})},children:[(0,k().M)({width:14,height:14,marginRight:e>0?4:0,fill:x().Ay.white}),Ve&&(0,m.jsx)(V().h,{onlyShowDraftDot:!0,customTop:4,customLeft:15,withBackgroundFill:!0}),e>0&&e]})}),he&&Ne&&(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionAlign),placement:o,delayThreshold:n,render:e=>(0,m.jsx)(te().Ay,{popupType:te().z7.Popup,buttonPopupStore:ge,originGap:1,renderOrigin:t=>(0,m.jsxs)(ee().A,{ariaLabel:g.formatMessage(ae.actionAlign),style:ie().k,hoveredStyle:ie().t9,...(0,W().A)(t,e),children:[ue($e()),(0,_().b)({width:8,fill:x().Ay.white,marginLeft:4})]}),borderRadius:6,render:e=>(0,m.jsx)(pe,{store:f,alignmentPopupStore:ge,buttonPopupParent:e}),popupWrapStyle:{background:(0,ie().FF)(t),display:"flex"}})}),he&&De&&(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionCaption),placement:o,delayThreshold:n,render:e=>(0,m.jsx)(ee().A,{...e,ariaLabel:g.formatMessage(ae.actionCaption),style:ie().k,hoveredStyle:ie().t9,onClick:()=>function(e,t){const n=e.getType(),o={action:"init_edit_caption",block_type:n,from:"embed_block_actions"};(0,N().o)(t,o,(n=>{const o=e.getPropertyStore("caption");E().hc({environment:t,store:e}),D().setSelectionAtEnd({store:o}),n()})),n&&C().qU(t,{type:"caption",block_type:n,block_id:e.id})}(f,t),children:h({width:14,height:14,marginRight:0,fill:x().Ay.white})})}),s&&(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionEditImage),placement:o,render:e=>(0,m.jsx)(ee().A,{...e,ariaLabel:g.formatMessage(ae.actionEditImage),style:ie().k,hoveredStyle:ie().t9,onClick:()=>{a&&(R().dL(t,[]),qe.openModal({blockStore:f,originalSource:a}),T().h(t,{from:"tooltip"}))},children:b({width:14,height:14,marginRight:0,fill:x().Ay.white})})}),Le&&(0,m.jsx)(ne().A,{renderTooltip:()=>g.formatMessage(ae.actionExpand),placement:o,delayThreshold:n,render:e=>(0,m.jsx)(ee().A,{...e,ariaLabel:g.formatMessage(ae.actionExpand),style:ie().k,hoveredStyle:ie().t9,onClick:()=>function(e,t,n){const o=e.getType(),i={action:"full_screen",block_type:o,from:"embed_block_actions"};(0,N().o)(n,i,(o=>{R().iy({environment:n,blockStore:e,blockLocationOfTargetBlock:t,callback:o})})),o&&C().qU(n,{type:"full_screen",block_type:o,block_id:e.id})}(f,v,t),children:"image"===ye?(0,w().J)({width:14,height:14,marginRight:0,fill:x().Ay.white}):(0,S().e)({width:14,height:14,marginRight:0,fill:x().Ay.white})})}),Oe&&r,(0,m.jsx)(de,{blockLocation:v,store:f})]})}}return(0,m.jsx)("div",{style:Ye,children:(0,m.jsx)(de,{blockLocation:v,store:f})})}}function ce(e,t){const n=e;if(n){P().oD(t,{store:n,from:"view_original"});const o=n.getType();o&&C().qU(t,{type:"original",block_type:o,block_id:e.id})}}function de(e){let{isPlaceholder:t,blockLocation:n,store:o}=e;const i=(0,I().tz)(),r=P().Ox(n),a=r?"comment_media":"default";return(0,m.jsx)(J().A,{store:o,fadeIn:!1,iconStyle:t?void 0:{fill:x().Ay.white},actionSectionGroupKey:a,hideFilterActionsInput:r,hoveredStyle:ie().t9,tooltipContent:i.formatMessage(ae.actionMore)})}function ue(e){const t={left:f,center:g,right:v},n={width:14,height:14,marginRight:0,fill:x().Ay.white};return t[e](n)}function pe(e){const{store:t,alignmentPopupStore:n}=e,i=(0,r().v3)(),s=(0,a().K8)((()=>t.getFormat()),[t]),l=(0,a().K8)((()=>t.isRootOrDirectChild()),[t]),c=(0,o.useCallback)((()=>{const{block_alignment:e}=s;return e||(l?"center":"left")}),[s,l]),d=(0,o.useCallback)((e=>{let t=.6;return c()===e&&(t=1),{width:26,height:26,opacity:t}}),[c]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(ee().A,{style:{...ie().k,...d("left"),borderRight:"none"},hoveredStyle:{...ie().t9,opacity:1},onClick:()=>me("left",i,t,n),children:ue("left")}),(0,m.jsx)("span",{style:{borderRight:`1px solid ${x().Ay.whiteWithAlpha(.2)}`}}),(0,m.jsx)(ee().A,{style:{...ie().k,...d("center"),borderRight:"none"},hoveredStyle:{...ie().t9,opacity:1},onClick:()=>me("center",i,t,n),children:ue("center")}),(0,m.jsx)("span",{style:{borderRight:`1px solid ${x().Ay.whiteWithAlpha(.2)}`}}),(0,m.jsx)(ee().A,{style:{...ie().k,...d("right"),borderRight:"none"},hoveredStyle:{...ie().t9,opacity:1},onClick:()=>me("right",i,t,n),children:ue("right")})]})}function me(e,t,n,o){const i=n.getType(),r={action:"set_alignment",block_type:i,from:"embed_block_actions"};(0,N().o)(t,r,(r=>{o.reset();const{serverCommitResult:a}=L().createAndCommit({userAction:"EmbedBlock.handleAlignment",environment:t,canUndo:!0,perform:o=>{B().TP({environment:t,store:n,alignment:e,transaction:o})}});a.then(r);const s=n.getFormat(),l=s.block_alignment,c=s.block_width,d=s.block_height,u=n.isRootOrDirectChild()?"center":"left";i&&C().qU(t,{type:"alignment",block_type:i,block_id:n.id,block_alignment:e,block_height:d,block_width:c,previous_alignment:l,default_alignment:u}),E().sf()}))}},193513:(e,t,n)=>{function o(e){return"full_page"===(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)}n.d(t,{r:()=>o})},193722:(e,t,n)=>{n.d(t,{L:()=>i});var o=()=>n(989423);function i(e,t){o().vd(e,"configure_property",t)}},195613:(e,t,n)=>{n.d(t,{A:()=>i});const o=new(n(17090).A);(0,n(604341).exposeDebugValue)("FrameScrollerStore",o);const i=o},196286:(e,t,n)=>{let o;function i(e){o=e}function r(){return o}n.d(t,{D:()=>r,g:()=>i})},196310:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(296540),i=()=>n(847249),r=()=>n(799954),a=()=>n(959013),s=()=>n(891078),l=()=>n(219839),c=n(474848);const d=(0,a().YK)({emptyPlaceholder:{defaultMessage:"Empty quote",id:"quoteBlock.emptyQuote.placeholder"}});function u(e,t){let{disabled:u,disableCommentMenu:p,disableDrag:m,disableHoverMenu:g,placeholder:f,hideContent:v,store:h,style:_}=e;const b=(0,a().tz)(),y=(0,o.useRef)(null),S=(0,s().pW)(h),w=(0,i().K8)((()=>{var e;return null===(e=h.getFormat())||void 0===e?void 0:e.quote_size}),[h]),k=(0,i().K8)((()=>h.getBlockTitleStore()),[h]),I=(0,i().K8)((()=>h.getContentStore()),[h]),x=(0,n(401497).IS)((()=>({root:{margin:0,fontSize:"large"===w?"1.2em":"1em",...r().nE,...S,display:"flex",..._},padding:{paddingLeft:r().nE.paddingLeft,paddingRight:r().nE.paddingRight},innerStyle:{borderLeft:"3px solid currentColor",paddingLeft:14,paddingRight:14,width:"100%"}})),[S,w,_]),{blockInsetRight:A}=(0,o.useContext)(l().n),C=(0,c.jsxs)("blockquote",{style:x.root,ref:y,children:[(0,c.jsxs)("div",{style:x.innerStyle,children:[(0,c.jsx)(n(524702).A,{style:x.padding,placeholderStyle:{left:14,width:"auto",right:14},disabled:u,store:k,placeholder:f??b.formatMessage(d.emptyPlaceholder),pasteBehavior:"block",inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!v&&(0,c.jsx)(l().n.Provider,{value:{blockInsetRight:A+14},children:(0,c.jsx)(n(493733).A,{disabled:u,store:I,disableCommentMenu:p,disableHoverMenu:g,disableDrag:m})})]}),(0,c.jsx)(n(739283).A,{disableCommentMenu:p,hideContent:v,store:h})]});return(0,s().NW)(h,t,(0,o.useMemo)((()=>({renderedType:"quote",getNode:()=>y.current,getBlockStore:()=>h})),[h]),C)}const p=o.memo(o.forwardRef(u),n(821062).A)},196539:(e,t,n)=>{n.d(t,{B1:()=>s,dX:()=>r,eE:()=>a});var o=()=>n(645873);const i=new(o().O2)("teamspaceMenus",(async()=>{const[{default:e},{OutlinerTeamOverflow:t,TeamOverflowMenu:o}]=await Promise.all([Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(38744),n.e(99718)]).then(n.bind(n,127896)),Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(38744),n.e(99718)]).then(n.bind(n,238518))]);return{TeamBreadcrumbPopup:e,OutlinerTeamOverflow:t,TeamOverflowMenu:o}})),r=(0,o()._h)(i,(e=>e.TeamBreadcrumbPopup)),a=(0,o()._h)(i,(e=>e.OutlinerTeamOverflow)),s=(0,o()._h)(i,(e=>e.TeamOverflowMenu))},197190:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(296540),i=()=>n(484714),r=()=>n(852477),a=()=>n(753199),s=n(474848);function l(e,t){let{id:l,role:c,allowTextSelection:d,ariaLabel:u,"aria-pressed":p,"aria-selected":m,"aria-describedby":g,"aria-expanded":f,"aria-controls":v,"aria-current":h,"aria-posinset":_,"aria-setsize":b,"aria-owns":y,"aria-labelledby":S,autoFocus:w=!1,children:k,className:I,disabled:x=!1,disabledFeedback:A,disableTransition:C,disallowTabbing:T,focused:M,hovered:P,hoveredStyle:B,wrapperDivStyle:R,isLoading:E,loadingSpinnerStyle:D,loadingSpinnerOnDark:N,ignoreLocalHoverState:L,ignoreLocalPressedState:O,mobileFeedback:U,onClick:F,onDoubleClick:V,onFocus:j,onBlur:z,onKeyDown:H,onMouseEnter:W,onMouseMove:q,onMouseLeave:K,onMouseDown:G,onMouseUp:$,onTouchStart:Y,onTouchEnd:Q,onTouchCancel:Z,onContextMenu:X,pressed:J,pressedStyle:ee,style:te,testId:ne,allowShiftClick:oe=!1,analyticsName:ie,analyticsFlowId:re,eventContextForClick:ae,disableFocusVisible:se,disableKeyboardClick:le,...ce}=e;const de=(0,i().v3)(),ue=(0,i().Y0)(),[pe,me]=(0,o.useState)(!1),[ge,fe]=(0,o.useState)(!1),ve=pe&&!x,he=ge&&!x,_e=(0,o.useRef)(null),be=(0,o.useRef)(!1);(0,o.useEffect)((()=>{const e=_e.current,t=be.current;let n;return be.current=w,e&&w&&!t&&(n=window.requestAnimationFrame((()=>{e.focus()}))),()=>{n&&window.cancelAnimationFrame(n)}}),[w]);const[ye,Se]=(0,n(819121).A)(),we=!se&&Se,ke=(0,n(93583).A)(_e,ye,t),Ie=(0,o.useContext)(n(240260).k),xe=ue.isDesktop,Ae=(0,n(401497).IS)((e=>{const t=!L&&ve||P||M||we,n=he||J,o={...(!U||M)&&{background:e.buttonHoveredBackground,...B}},i=L?{}:U?{opacity:.4}:{background:e.buttonPressedBackground,...ee},r=x||E?"default":"pointer",a={userSelect:d?"auto":"none",WebkitUserSelect:d?"auto":"none",transition:C?"none":"background 20ms ease-in",cursor:r,opacity:(x||E)&&A?.4:void 0,...te,...t&&!x&&o,...n&&!x&&i,...xe&&we&&{boxShadow:e.outlineBlueInputBoxShadow}};return{button:{...R?{...R,cursor:r}:a},buttonInnerStyle:{...a,width:"100%",height:"100%"}}}),[L,ve,P,M,we,he,J,U,B,ee,d,C,x,E,A,te,xe,R]),Ce=(0,o.useCallback)((()=>{me(!1),fe(!1)}),[]),Te=(0,o.useCallback)((e=>{if(e.shiftKey&&!e.altKey&&!oe)return;let t=!1;(0,a().SQ)({event:e,context:ae??a().y$.EditorClick,callback:()=>{(0,n(592678).Vt)(e)||(ie&&n(989423).vd(de,"button_clicked",{button_name:ie,flow_id:re}),F&&F(e),t=!0)}}),t||(e.preventDefault(),Ce())}),[oe,ae,ie,F,de,re,Ce]),Me=(0,o.useCallback)((e=>{(0,a().SQ)({event:e,context:a().y$.EditorDoubleClick,callback:()=>{me(!0),V&&V(e)}})}),[V]),Pe=(0,o.useCallback)((e=>{W&&W(e)}),[W]),Be=(0,o.useCallback)((e=>{ue.isMobile||n(732770).A.state.isKeyboardMode||n(230062).A.state||x||me(!0),q&&q(e)}),[ue.isMobile,x,q]),Re=(0,o.useCallback)((e=>{me(he),fe(!1),K&&K(e)}),[he,K]),Ee=(0,o.useCallback)((()=>{Ce(),window.removeEventListener("mouseup",Ee)}),[Ce]),De=(0,o.useCallback)((e=>{(0,a().SQ)({event:e,context:a().y$.ButtonMouseDown,callback:()=>{fe(!0),G&&G(e),window.addEventListener("mouseup",Ee)}})}),[G,Ee]),Ne=(0,o.useCallback)((e=>{fe(!1),$&&$(e),window.removeEventListener("mouseup",Ee)}),[$,Ee]),Le=(0,o.useCallback)((e=>{(0,a().SQ)({event:e,context:a().y$.MobileTap,callback:()=>{fe(!0),Y&&Y(e)}})}),[Y]),Oe=(0,o.useCallback)((e=>{fe(!1),Q&&Q(e)}),[Q]),Ue=(0,o.useCallback)((e=>{fe(!1),Z&&Z(e)}),[Z]),Fe=(0,o.useCallback)((e=>{me(!0),X&&X(e)}),[X]),Ve=(0,o.useCallback)((e=>{x||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||"Enter"!==e.key&&" "!==e.key||_e.current!==document.activeElement||le||e.target instanceof HTMLElement&&(e.target.click(),e.preventDefault()),null==H||H(e)}),[x,le,H]);(0,o.useEffect)((()=>{if(ve||he)return r().c.add(Ce),()=>{r().c.delete(Ce)}}),[ve,he,Ce]);const je={className:I,id:l,onMouseEnter:Pe,onMouseMove:Be,onMouseLeave:Re,...x?{}:{onFocus:j,onBlur:z,onClick:Te,onMouseDown:De,onMouseUp:Ne,onTouchStart:Le,onTouchEnd:Oe,onTouchCancel:Ue,onContextMenu:Fe,onKeyDown:Ve,onDoubleClick:Me},style:Ae.button,"data-testid":ne,"aria-controls":v,"aria-current":h,"aria-describedby":g,"aria-expanded":f,"aria-label":u,"aria-labelledby":S,"aria-posinset":_,"aria-pressed":p,"aria-selected":m,"aria-setsize":b,"aria-owns":y},ze=E?(0,s.jsx)(n(331542).A,{onDarkBackground:N,style:{marginRight:4,...D}}):null,He=R?(0,s.jsxs)("div",{style:Ae.buttonInnerStyle,children:[ze,k]}):(0,s.jsxs)(s.Fragment,{children:[ze,k]});return void 0!==ce.href?(0,s.jsx)(n(758740).A,{disabled:x||E,ref:ke,role:c??"link",tabIndex:T||x||E?-1:void 0,...ce,...je,children:He}):(0,s.jsx)("div",{"aria-disabled":x||E,ref:ke,role:c??"button",tabIndex:T||x||E?-1:0,...je,...void 0!==Ie?{"aria-expanded":Ie.open,"aria-haspopup":"dialog"}:{},children:He})}const c=o.memo(o.forwardRef(l),n(821062).A)},197194:(e,t,n)=>{n.d(t,{G0:()=>A,aT:()=>_,WP:()=>I,vG:()=>w,cy:()=>k,zG:()=>x,B_:()=>S,am:()=>y,Uw:()=>h,vK:()=>b});n(581454);var o=()=>n(148307),i=()=>n(540946),r=()=>n(634201),a=()=>n(299917),s=()=>n(919709),l=()=>n(191772),c=()=>n(496603),d=()=>n(534177),u=()=>n(720665),p=()=>n(989423);var m=()=>n(713972),g=()=>n(231722),f=()=>n(906537),v=()=>n(792002);function h(){return(0,a().Ay)(o().A.katex.katexMinCss,{resourceType:a().vt.Stylesheet})}function _(e){const{source:t,currentEquationToken:n,selectedText:o}=e;return"rich_text_menu"===t?n?{type:"edit",source:t}:{type:"create",source:t,selection:!0}:"input_keyboard_shortcut"===t?n?{type:"edit",source:t}:{type:"create",source:t,selection:Boolean(o)}:"slash_menu"===t?{type:"create",source:t,selection:!1}:"click_token"===t||"arrow_keys"===t?{type:"edit",source:t}:"text_filter"===t?{type:"create",source:t,selection:!0}:void(0,d().HB)(t)}function b(e){const{environment:t,equation:n,from:o}=e;!function(e,t){p().vd(e,"inline_equation_edit",t)}(t,{equation:n,equationNewlineCount:n.split("\n").length-1,equationBackslashCount:n.split("\\").length-1,equationLength:r().PE(n).length,from:o})}function y(e){return m().vq(e)&&e.classList.contains(l().X4)}function S(e){const{selection:t,environment:n}=e,o=f().getRect(t);if(!o){return m().EV(t.startContainer,m().vq).getBoundingClientRect()}if(n.device.isChrome){const e=t.startContainer.childNodes[t.startOffset];return e&&y(e)?e.getBoundingClientRect():m().vq(t.startContainer)?new DOMRect(o.left,o.top,o.width,t.startContainer.getBoundingClientRect().height):new DOMRect(o.left,o.top,o.width,22)}return o}function w(e){const{environment:t,equation:n,displayMode:o}=e,r=t.KatexStore.getKatex();return r&&(0,i().bq)({katex:r,equation:n,options:{displayMode:"block"===o}}).error}function k(e){if("editing"!==e.mode)return;const t=(0,g().H7)(e.multiSelection);if(!t)return;const{store:n,selection:o}=t,{tokensBeforeRange:i,tokensInsideRange:r}=s().AI5(n.getValue(),o.startIndex,o.endIndex);let a=c().cz(i.map(s().WWE));for(const l of r){const e=s().WWE(l),t={startIndex:a,endIndex:a+e};if(s().GiG(l))return{token:l,position:t};a+=e}}function I(e){let t=e;for(let n=0;n<2;n+=1){const e=/^\$(.*)\$$/m.exec(t);if(!e||!e[1])break;t=e[1]}return t}function x(e){const t=(0,g().H7)(e.multiSelection);if(!t)return[];const{selection:n,store:o}=t,i=o.getValue();if(!i)return[];const r=v().gE(n)&&n.startIndex>0?[n.startIndex-1]:[n.startIndex];return v().hH(r,i)[0]||[]}function A(e){const{equationState:t,isTemporary:n}=e,o=t.editingToken?u().h_(s().uPN(t.editingToken),(e=>s().gir(e)||s().lfl(e))):u().h_(t.annotations,(e=>s().gir(e)||s().lfl(e)||s().iGj(e))),i=c().oE([n&&s().TEZ(),...o]);return s().G0H(t.value,i)}},199896:(e,t,n)=>{n.d(t,{A:()=>V,M:()=>L});n(898992),n(672577),n(737550);var o=n.n(n(32485)),i=n(296540),r=()=>n(254751),a=()=>n(484714),s=()=>n(847249),l=()=>n(401497),c=()=>n(496506),d=()=>n(700500),u=()=>n(100622),p=()=>n(720665),m=()=>n(415651),g=()=>n(778417),f=()=>n(501020),v=()=>n(38337),h=()=>n(753199),_=()=>n(553965),b=()=>n(592678),y=()=>n(969197),S=()=>n(906537),w=()=>n(963589),k=()=>n(695625),I=()=>n(861841),x=()=>n(771989),A=()=>n(851802);class C extends(()=>n(757695))().default{getInitialState(){return{shouldShowSelectionHalo:!1,shouldShowDropParentHalo:!1,shouldShowDropZone:!1,shouldShowDropZoneHint:!1,forceRenderSelectionHalo:!1,showActionIsInFlight:!1}}}const T=C;var M=()=>n(502438),P=()=>n(11048),B=()=>n(145214),R=()=>n(603820),E=n(474848);const D=4,N="selectable_ref";function L(e){return e instanceof Object&&"refType"in e&&e.refType===N}class O extends r().A{constructor(){super(...arguments),this.lastDropZoneHintIndex=void 0,this.selectableDivRef=i.createRef(),this.storeTypes={draggableStore:x().A,selectableStore:T},this.legacyContextKeys=["scrollerContext","selectable"].concat(r().x),this.selectableContextValueMemoCell=new(n(493720).XQ),this.computedStore=this.createComputedStore((()=>{const e=Z(this.props.store);!p().pN(e)&&e>=0&&(this.lastDropZoneHintIndex=e);const t=te(this.props.store,this.environment,this.props.shouldShowHalo),n=$(this.props.store,Boolean(this.props.shouldShowHalo)),o=Y(this.props.store,Boolean(this.props.shouldShowDropZone)),i=Q(this.props.store,Boolean(this.props.shouldShowDropZone)),r=this.lastDropZoneHintIndex,a=this.stores.draggableStore.state.dragging,s=this.stores.draggableStore.hasDragged(),l=this.stores.draggableStore.state.initiator,c=this.stores.selectableStore.state,d=this.props.store.getType()||"unknown";return{isDragging:a,initiator:l,hasDragged:s,shouldShowSelectionHalo:t||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:n,currentDropZone:o,dropZoneHint:i,dropZoneHintIndex:r,shouldRenderSelectionHalo:t||c.shouldShowSelectionHalo||c.forceRenderSelectionHalo||Boolean(this.props.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:n||c.shouldShowDropParentHalo,shouldRenderDropZoneHint:!p().pN(i)||c.shouldShowDropZoneHint,shouldRenderDropZone:!p().pN(o)||c.shouldShowDropZone,propStoreType:d,showActionIsInFlight:c.showActionIsInFlight}}))}get refType(){return N}get registries(){return[k().T]}getNode(){return this.props.nodeRef?this.props.nodeRef.current:this.selectableDivRef.current}getContextClosestSelectable(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.closestSelectable}getContextSelectableContainer(){var e;return null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer}getScrollerContext(){return this.context.scrollerContext}getSelectableStore(){return this.stores.selectableStore}getContentEditableContext(){return this.context.contentEditableContext}renderComponent(){var e;const{isDragging:t,initiator:i,hasDragged:r,shouldShowDropParentHalo:a,shouldShowSelectionHalo:s,currentDropZone:l,dropZoneHint:c,dropZoneHintIndex:u,shouldRenderSelectionHalo:p,shouldRenderDropParentHalo:m,shouldRenderDropZoneHint:g,shouldRenderDropZone:h,propStoreType:b,showActionIsInFlight:y}=this.computedStore.state,S=Boolean(this.props.shouldShowSuggestRemoveHalo&&!this.props.store.isType(d().tA)&&this.props.store.getRemoveSuggestion()),w=Boolean(this.props.shouldShowSuggestInsertBorder&&!this.props.store.isType(d().Lk)&&this.props.store.getInsertSuggestion()),k=p||m||g||h||S||w,I=o()(v().rb2,`notion-${b}-block`,this.props.className),{inheritDir:x=!1}=this.props,A=this.renderDraggable((e=>(0,E.jsxs)("div",{ref:this.selectableDivRef,style:ne({isPositionRelative:k,isDragging:t,hasDragged:r,initiator:i,showActionIsInFlight:y,shouldRenderSuggestInsertBorder:w},this.theme,this.props.canDrag,this.props.disablePointerEvents,this.props.style),"data-block-id":this.props.store.id,dir:n(508496).default.checkGate({gateName:"editor_basic_rtl"})&&!x?"auto":void 0,className:I,...(0,_().A)(e||{},{onDoubleClick:e=>oe(e,this.props.canSelect,this.props.onDoubleClick),onContextMenu:e=>ue(e,this.props.store,this.environment,this.props.canTriggerContextMenu,this.props.contextMenuAndDragStores,this.props.actionSectionGroupKey,this.props.showBlockMenuInput),onMouseOver:e=>ie(e,this.props.store,this.props.canSelect),onMouseOut:()=>re(this.props.store),onClick:e=>de(e,this.props.store,this.environment,this.props.canSelect,this.props.onEditText,this.props.onClick),onMouseMove:this.props.onMouseMove,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave}),children:[this.props.children,p&&(0,E.jsx)(j,{selectableStore:this.stores.selectableStore,style:this.props.haloStyle,isVisible:s,isLastItem:this.props.isLastItem}),S&&(0,E.jsx)(H,{}),m&&(0,E.jsx)(z,{selectableStore:this.stores.selectableStore,isVisible:a}),g&&(0,E.jsx)(G,{selectableStore:this.stores.selectableStore,direction:c,index:u,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap}),h&&(0,E.jsx)(K,{selectableStore:this.stores.selectableStore,direction:l,aboveDropZoneMargin:this.props.aboveDropZoneMargin,belowDropZoneMargin:this.props.belowDropZoneMargin,dropzoneGap:this.props.dropzoneGap})]}))),C=this.selectableContextValueMemoCell.memo((()=>{var e;return{selectableContainer:null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer,closestSelectable:this}}),[this,null===(e=this.context.selectable)||void 0===e?void 0:e.selectableContainer]);return(0,E.jsx)(f().v,{value:C,children:A})}displaySelectionHalo(e){this.stores.selectableStore.state.forceRenderSelectionHalo||(this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{this.stores.selectableStore.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}renderDraggable(e){const{device:t}=this.environment;return this.props.canDrag?(0,E.jsx)(R().A,{draggableStore:this.stores.draggableStore,forceTouch:t.isMobile&&!this.props.disableForceTouch,touchDragOnly:this.props.touchDragOnly,onDraggableDragStart:e=>ae(e,this.environment,this.props.canDrag,this.props.onDraggableDragStart),onDraggableDragMove:e=>se(e,this.props.store,this.environment,this.props.canDrag,this.props.preventBackgroundDrag,this.props.contextMenuAndDragStores,this.props.getGhostElement,this.props.disableScrollToRevealHorizontal,this.props.onDraggableDragMove),onDraggableDragEnd:e=>le(e,this.props.analyticsName,this.environment,this.props.canDrag,this.props.onDraggableDragEnd),onDraggableDragCancel:e=>ce(e,this.environment,this.props.canDrag,this.props.onDraggableDragCancel),disableHorizontalEdgeScroll:this.props.disableHorizontalDragEdgeScroll,render:e}):e(void 0)}}function U(e){const{store:t,getSelectableRef:o}=e,[r,l]=(0,n(548527).P)(),c=(0,a().v3)(),d=(0,s().K8)((()=>c.RouterStore.state.route),[c]),u=o(),p=(0,i.useRef)(!0),m=(0,w().X)("scroll_to_block"),g=(0,s().K8)((()=>{var e;return null===(e=n(351360).default.state.currentLoadingContainerStore)||void 0===e?void 0:e.state.ready}),[]);(0,i.useEffect)((()=>{if(m&&g&&"page"===d.name&&d.scrollToBlockId===t.id)return window.addEventListener("wheel",e),window.addEventListener("touchstart",e),()=>{window.removeEventListener("wheel",e),window.removeEventListener("touchstart",e)};function e(){p.current=!1}}),[m,g,d,t.id]);const f=(0,i.useRef)(!1);return(0,i.useEffect)((()=>{if(p.current&&g)if(m&&"page"===d.name&&d.scrollToBlockId===t.id){if(M().default.isSelected()){const e=M().default.state.stores;if(e.length>1||e[0].id!==t.id)return void(p.current=!1)}u&&!l&&n(797265).gm(c,{animate:f.current,selectable:u,onSelect:(0,n(928152).W)(c)})}else p.current=!1}),[g,c,t,d,l,m,u]),r}O.displayName="SelectableLegacy";const F=i.forwardRef((function(e,t){const r=(0,a().v3)(),c=(0,i.useContext)(n(789550).R),u=(0,i.useContext)(f().z),m=(0,s().uB)(e.selectableStore,T),g=(0,s().uB)(e.draggableStore,x().A),h=(0,i.useRef)(void 0),b=(0,i.useRef)(null),y=(0,i.useCallback)((()=>e.nodeRef?e.nodeRef.current:b.current),[e.nodeRef]),S=(0,i.useCallback)((e=>{m.state.forceRenderSelectionHalo||(m.update((e=>({...e,forceRenderSelectionHalo:!0}))),window.setTimeout((()=>{m.update((e=>({...e,forceRenderSelectionHalo:!1})))}),e))}),[m]);const{isDragging:I,initiator:A,hasDragged:C,shouldShowDropParentHalo:M,shouldShowSelectionHalo:B,currentDropZone:D,dropZoneHint:L,dropZoneHintIndex:O,shouldRenderSelectionHalo:F,shouldRenderDropParentHalo:V,shouldRenderDropZoneHint:W,shouldRenderDropZone:q,propStoreType:X,showActionIsInFlight:J}=(0,s().K8)((()=>{const t=Z(e.store);!p().pN(t)&&t>=0&&(h.current=t);const n=te(e.store,r,e.shouldShowHalo),o=$(e.store,Boolean(e.shouldShowHalo)),i=Y(e.store,Boolean(e.shouldShowDropZone)),a=Q(e.store,Boolean(e.shouldShowDropZone)),s=h.current,l=g.state.dragging,c=g.hasDragged(),d=g.state.initiator,u=m.state,f=e.store.getType()||"unknown";return{isDragging:l,initiator:d,hasDragged:c,shouldShowSelectionHalo:n||u.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldShowDropParentHalo:o,currentDropZone:i,dropZoneHint:a,dropZoneHintIndex:s,shouldRenderSelectionHalo:n||u.shouldShowSelectionHalo||u.forceRenderSelectionHalo||Boolean(e.shouldForceRenderSelectionHalo),shouldRenderDropParentHalo:o||u.shouldShowDropParentHalo,shouldRenderDropZoneHint:!p().pN(a)||u.shouldShowDropZoneHint,shouldRenderDropZone:!p().pN(i)||u.shouldShowDropZone,propStoreType:f,showActionIsInFlight:u.showActionIsInFlight}}),[g,r,e.shouldForceRenderSelectionHalo,e.shouldShowDropZone,e.shouldShowHalo,e.store,m]),ee=(0,s().K8)((()=>Boolean(e.shouldShowSuggestRemoveHalo&&!e.store.isType(d().tA)&&e.store.getRemoveSuggestion())),[e.shouldShowSuggestRemoveHalo,e.store]),pe=(0,s().K8)((()=>Boolean(e.shouldShowSuggestInsertBorder&&!e.store.isType(d().Lk)&&e.store.getInsertSuggestion())),[e.shouldShowSuggestInsertBorder,e.store]),me=F||V||W||q||ee||pe,ge=(0,s().K8)((()=>o()(v().rb2,`notion-${X}-block`,e.className)),[X,e.className]),{inheritDir:fe=!1}=e,ve=(0,l().IS)((t=>({draggable:ne({isPositionRelative:me,isDragging:I,hasDragged:C,initiator:A,showActionIsInFlight:J,shouldRenderSuggestInsertBorder:pe},t,e.canDrag,e.disablePointerEvents,e.style)})),[C,A,I,me,e.canDrag,e.disablePointerEvents,e.style,pe,J]),he=(0,i.useRef)({refType:N,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>m,getContentEditableContext:()=>_e}),_e=(0,n(872994).y)();(0,i.useLayoutEffect)((()=>{he.current={refType:N,getContextClosestSelectable:()=>u.closestSelectable,getContextSelectableContainer:()=>u.selectableContainer,getScrollerContext:()=>c,displaySelectionHalo:S,getNode:y,props:e,getSelectableStore:()=>m,getContentEditableContext:()=>_e}}),[_e,S,y,c,u.closestSelectable,u.selectableContainer,m,e]);const be=U({store:e.store,getSelectableRef:()=>he.current});(0,i.useImperativeHandle)(t,(()=>he.current)),(0,n(790748).b)(k().T,(()=>he.current),[]);const ye=(0,w().X)("editor_basic_rtl"),Se=(0,n(558842).Px)(b,be),we=function(t){const{device:n}=r;return e.canDrag?(0,E.jsx)(R().A,{draggableStore:g,forceTouch:n.isMobile&&!e.disableForceTouch,touchDragOnly:e.touchDragOnly,onDraggableDragStart:t=>ae(t,r,e.canDrag,e.onDraggableDragStart),onDraggableDragMove:t=>se(t,e.store,r,e.canDrag,e.preventBackgroundDrag,e.contextMenuAndDragStores,e.getGhostElement,e.disableScrollToRevealHorizontal,e.onDraggableDragMove),onDraggableDragEnd:t=>le(t,e.analyticsName,r,e.canDrag,e.onDraggableDragEnd),onDraggableDragCancel:t=>ce(t,r,e.canDrag,e.onDraggableDragCancel),disableHorizontalEdgeScroll:e.disableHorizontalDragEdgeScroll,render:t}):t(void 0)}((t=>(0,E.jsxs)("div",{ref:Se,style:ve.draggable,"data-block-id":e.store.id,dir:ye&&!fe?"auto":void 0,className:ge,...(0,_().A)(t||{},{onDoubleClick:t=>oe(t,e.canSelect,e.onDoubleClick),onContextMenu:t=>ue(t,e.store,r,e.canTriggerContextMenu,e.contextMenuAndDragStores,e.actionSectionGroupKey,e.showBlockMenuInput),onMouseOver:t=>ie(t,e.store,e.canSelect),onMouseOut:()=>re(e.store),onClick:t=>de(t,e.store,r,e.canSelect,e.onEditText,e.onClick),onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave}),children:[e.children,F&&(0,E.jsx)(j,{selectableStore:m,style:e.haloStyle,isVisible:B,isLastItem:e.isLastItem}),ee&&(0,E.jsx)(H,{}),V&&(0,E.jsx)(z,{selectableStore:m,isVisible:M}),W&&(0,E.jsx)(G,{selectableStore:m,direction:L,index:O,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap}),q&&(0,E.jsx)(K,{selectableStore:m,direction:D,aboveDropZoneMargin:e.aboveDropZoneMargin,belowDropZoneMargin:e.belowDropZoneMargin,dropzoneGap:e.dropzoneGap})]}))),ke=(0,i.useMemo)((()=>({selectableContainer:u.selectableContainer,closestSelectable:he.current})),[u.selectableContainer]);return(0,E.jsx)(f().v,{value:ke,children:(0,E.jsx)(P().A,{name:"Selectable",children:we})})})),V=i.forwardRef((function(e,t){const n=e=>{const n=e||null;"function"==typeof t?t(n):t&&(t.current=n)},o=(0,w().X)("enable_selectable_fc");return(0,E.jsx)(P().A,{name:"SelectableFGContainer",children:o?(0,E.jsx)(F,{...e,ref:n}):(0,E.jsx)(O,{...e,ref:n})})}));function j(e){return(0,E.jsx)(B().A,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowSelectionHalo:!1})},className:v().nKq,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:u().Ay.blueWithAlpha(.14),zIndex:81,borderRadius:4,...e.style}},"halo")}function z(e){return(0,E.jsx)(B().A,{visible:e.isVisible,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!0})},onAnimationEnd:()=>{e.isVisible||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropParentHalo:!1})},className:v().nKq,style:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:u().Ay.blueWithAlpha(.07),borderRadius:4}},"parent")}function H(){const e=(0,l().IS)((e=>({halo:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:e.accentColors.gray[90],borderRadius:4}})),[]);return(0,E.jsx)("div",{className:v().JRJ,style:e.halo})}function W(e,t,n){if(void 0===n)return{};const o=e.isMobile?3:2;return n===I().bH.Above||n===I().bH.Below?{position:"relative",left:-o,width:o,height:D,background:t.contentBackground,transform:"translateZ(100px)"}:{position:"relative",top:-o,width:D,height:o,background:t.contentBackground,transform:"translateZ(100px)"}}function q(e,t,n,o,i){const r={position:"absolute",pointerEvents:"none",background:u().Ay.blueWithAlpha(.43),zIndex:88-t};if(e===I().bH.Onto)r.left=0,r.top=0,r.right=0,r.bottom=0,r.background=u().Ay.blueWithAlpha(.14);else if(e===I().bH.Above||e===I().bH.Below){const t=4;r.left=0,r.right=0,e===I().bH.Above?(r.top=-t,n&&(r.top-=n)):(r.bottom=-t,o&&(r.bottom-=o)),r.height=D}else{const t=8;r.top=0,r.bottom=0,e===I().bH.Left?r.left=i?-i:-t:r.right=i?-i:-t,r.width=D}return r}function K(e){const t=(0,a().Y0)(),n=(0,l().DP)(),o=void 0!==e.direction,i=X(e.direction);return(0,E.jsx)(B().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!0})},onAnimationEnd:()=>{o||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZone:!1})},style:q(e.direction??i,0,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:e.direction!==I().bH.Onto&&(0,E.jsx)("div",{style:W(t,n,e.direction)})},"dropZone")}function G(e){const t=(0,a().Y0)(),n=(0,l().DP)(),o=!p().pN(e.direction),i=X(e.direction);return(0,E.jsx)(B().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!0})},onAnimationEnd:()=>{o||e.selectableStore.setState({...e.selectableStore.state,shouldShowDropZoneHint:!1})},style:q(e.direction??i,(e.index||0)+1,e.aboveDropZoneMargin,e.belowDropZoneMargin,e.dropzoneGap),children:(0,E.jsx)("div",{style:W(t,n,e.direction)})},"hint")}function $(e,t){if(!t)return!1;const n=I().Ay.state;if(!n.isDragging)return!1;const{currentParentStore:o,currentHintDropZones:i,currentDropZone:r}=n;return(!r||r.type!==I().OX.DropTarget)&&(i.some((e=>e.direction===I().bH.Left||e.direction===I().bH.Right))?Boolean(r&&r.store===e):o===e)}function Y(e,t){const n=I().Ay.state;if(!n.isDragging)return;const{currentDropZone:o}=n;return o&&o.type===I().OX.Selectable&&o.store===e&&t?o.direction:void 0}function Q(e,t){const n=I().Ay.state;if(!n.isDragging)return;const{currentHintDropZones:o}=n;if(o&&t){const t=o.find((t=>t.type===I().OX.Selectable&&t.store===e));if(t)return t.direction}}function Z(e){const t=I().Ay.state;if(!t.isDragging)return;const{currentHintDropZones:n}=t;return n?n.findIndex((t=>t.type===I().OX.Selectable&&t.store===e)):void 0}function X(e){const t=(0,i.useRef)(e);return e&&(t.current=e),t.current}const J=new(c().default)((()=>M().default.state.phase),{debugName:"SelectionPhaseStore"}),ee=new(c().default)((()=>{const e=(0,n(286088).SB)(n(525569).default.state);return Boolean(e)}),{debugName:"isCompletionsActiveStore"});function te(e,t,n){const{device:o}=t;if(!n)return!1;if(!(0,y().xK)(o)&&!ee.state)return!1;if(J.state!==M().SelectionPhase.Selected)return!1;const{stores:i}=M().default.state;return i.indexOf(e)>=0&&!I().Ay.state.isDragging}function ne(e,t,n,o,i){const{isPositionRelative:r,isDragging:a,hasDragged:s,showActionIsInFlight:l,initiator:c,shouldRenderSuggestInsertBorder:d}=e,u={};return"touch"===c&&(u.transition="transform 200ms ease-out",n&&a&&!s&&(u.boxShadow=t.shadowMD,u.transform="scale(1.05)",u.borderRadius=3)),r&&(u.position="relative"),l&&(u.opacity=.5),o&&(u.pointerEvents="none"),d&&(u.borderWidth=8,u.borderStyle="solid",u.borderColor=t.accentColors.blue[50]),{...u,...i}}function oe(e,t,n){t||(0,h().SQ)({event:e,context:h().y$.EditorDoubleClick,callback:()=>{n&&n(e)}})}function ie(e,t,n){n&&(0,h().SQ)({event:e,context:h().y$.EditorMouseOver,callback:()=>{A().A.setState({...A().A.state,hoveredStore:t,lastHoveredStore:t})}})}function re(e){A().A.state.hoveredStore===e&&A().A.setState({...A().A.state,hoveredStore:void 0})}function ae(e,t,n,o){const{mobileNative:i}=t;n&&i&&i.buzz(),o&&o(e)}function se(e,t,o,i,r,a,s,l,c){const{device:d}=o;i&&!r?I().Ay.state.isDragging?m().GB(o,{currentX:e.currentX,currentY:e.currentY}):b().Zm()&&(g().Lt({environment:o,store:t,selectMode:g().tY(o)}),m().v7(o,{startX:e.startX,startY:e.startY,stores:a||M().default.state.stores,isNativeDrag:!1,getGhostElement:s})):n(93658).default.state.isActive||d.isPhone||n(257615).jD({environment:o,target:e.target,startX:e.startX,startY:e.startY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!l}),c&&c(e)}function le(e,t,o,i,r){const{device:a}=o;a.isMobile&&n(353643).A.state.isDragging&&e.preventDefault(),i&&I().Ay.state.isDragging&&m().eW({environment:o,shiftKey:e.shiftKey,optionKey:e.optionKey,commandKey:e.commandKey,analyticsFrom:t}),r&&r(e)}function ce(e,t,n,o){n&&I().Ay.state.isDragging&&(m().Pt(t),g().IU({environment:t})),o&&o(e)}function de(e,t,o,i,r,a){(0,h().SQ)({event:e,context:h().y$.EditorClick,callback:()=>{var s;if(null!==(s=M().default.getDefaultContainerFromTarget(e.target))&&void 0!==s&&s.isPeekRenderer()||n(661920).Cx(o),(0,y().xK)(o.device))b().Zm()||!i||t.isInlineCollectionView()||g().Lt({environment:o,store:t,selectMode:g().tY(o)});else if(r){const t=(0,n(792002).SL)(e.target);t&&n(751156).createAndCommit({userAction:"Selectable.handleClick",environment:o,canUndo:!0,perform:e=>{r({isAtStartOfLine:"start"===t,isClick:!0,transaction:e})}})}a&&a(e)}})}function ue(e,t,o,i,r,a,s){const{device:l}=o;if(l.isAndroid){const o=n(24157).default.state,i=(0,y().aI)(t),r=i&&"empty"!==o.mode&&(0,n(962845).xk)(o.multiSelection,i);if("editing"!==o.mode||!r)return S().isExpanded(S().get())||e.preventDefault(),e.stopPropagation(),!1}if(i){var c;const i=(0,n(799832).U)(t),l=void 0!==t.getAssociatedCollectionStore(),d=null==i||null===(c=i.collectionViewStore())||void 0===c?void 0:c.getType();(0,h().SQ)({event:e,context:h().y$.EditorContextMenu,callback:()=>{e.preventDefault(),g().Lt({environment:o,store:t}),n(901265).it({environment:o,stores:r||M().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:l?"timeline"===d?"block_in_collection_timeline_view":"block_in_collection":a||"default",showInput:Boolean(s),analyticsFrom:"content_block_menu",optionalAnalyticsProperties:{collectionContextStore:i}})}})}}},200424:(e,t,n)=>{e.exports=n.p+"9ade71d75a1c0e93.png"},201938:(e,t,n)=>{n.d(t,{f:()=>u});var o=()=>n(584262),i=()=>n(763824),r=()=>n(662453),a=()=>n(869562),s=()=>n(722101),l=()=>n(246826),c=()=>n(725614),d=()=>n(751156);async function u(e){const{environment:t,prefill:n}=e,u=await(0,a().quickAddPage)({environment:t,from:"ai_writer_deeplink",pageVisitSource:o().y8.AiWriterDeeplink});if(!u)return;const{performResult:p}=d().createAndCommit({userAction:"routerStateActions.aiWriterDeeplink",environment:t,canUndo:!0,perform:e=>{const n=l().Wv({environment:t,type:"text",inMemoryRecordCache:u.inMemoryRecordCache,transaction:e,spaceId:u.pointer.spaceId});return s().BC({parentStore:u.getContentStore(),appendStore:n,transaction:e}).childStore}}),m=p.getTitleStore();m&&c().setSelection({store:m}),await async function(e){const{environment:t,prefill:n}=e;await i().wR(1e3);const{completionInitialPromptActions:o}=await r().aiDependency.load();o.openHelpMeWriteGenericPopup({environment:t,from:"deeplink",prefilledValue:n??""})}({environment:t,prefill:n})}},202017:(e,t,n)=>{n.d(t,{n:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M7.12 4.875a.625.625 0 1 0 0 1.25h9.6a.625.625 0 1 0 0-1.25zm0 4.5a.625.625 0 1 0 0 1.25h9.6a.625.625 0 1 0 0-1.25zM6.495 14.5c0-.345.28-.625.625-.625h9.6a.625.625 0 1 1 0 1.25h-9.6a.625.625 0 0 1-.625-.625m-2.875-8a1 1 0 1 0 0-2 1 1 0 0 0 0 2m1 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m-1 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})},i=(0,n(340498).wt)("bulletedList",o)},202786:(e,t,n)=>{n.d(t,{T:()=>i});var o=()=>n(24157);function i(){return!o().default.isEmptySelection()}},204063:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(100622),r=()=>n(960715),a=n(474848);function s(e,t){let{hovered:o,onClick:s,disabled:l,style:c,hoveredStyle:d,pressedStyle:u,onFocus:p,onBlur:m,onMouseDown:g,onMouseEnter:f,onMouseLeave:v,className:h,children:_,isRed:b,isLoading:y,analyticsName:S,analyticsFlowId:w,icon:k,iconStyle:I,size:x="md",color:A="uiBlue",shape:C="default",testId:T,href:M,external:P,autoFocus:B}=e;const R=(0,n(401497).IS)((e=>({button:{...(0,r().qq)({shape:C,size:x,hasIconOnly:Boolean(k)&&!_}),justifyContent:"center",flexShrink:0,background:b||"uiRed"===A?e.redButtonBackground:"black"===A?i().Ay.frontBlackButtonBackground:i().Ay.blue,color:i().Ay.white,fill:i().Ay.white,lineHeight:1.2,fontWeight:n(284371).Wy.medium,...c},pressed:{background:b||"uiRed"===A?e.redButtonPressedBackground:"black"===A?i().Ay.frontBlackButtonBackgroundPressed:e.blueButtonPressedBackground,...u},hovered:{background:b||"uiRed"===A?e.redButtonHoveredBackground:"black"===A?i().Ay.frontBlackButtonBackgroundHovered:e.blueButtonHoveredBackground,...d},iconStyle:{...(0,r().D3)({size:x,hasIconOnly:!_}),...I}})),[_,A,d,k,I,b,u,C,x,c]);return(0,a.jsxs)(n(704152).A,{hovered:o,onClick:s,disabled:l,disabledFeedback:!0,style:R.button,hoveredStyle:R.hovered,pressedStyle:R.pressed,onFocus:p,onBlur:m,onMouseDown:g,onMouseEnter:f,onMouseLeave:v,className:h,ref:t,isLoading:y,loadingSpinnerOnDark:!0,analyticsName:S,analyticsFlowId:w,testId:T,href:M,external:P,autoFocus:B,children:[k?k(R.iconStyle):null,_]})}const l=o.memo(o.forwardRef(s),n(821062).A)},204521:(e,t,n)=>{n.d(t,{TR:()=>m,do:()=>l,zb:()=>d,PS:()=>c,Ib:()=>g,Ko:()=>s,kA:()=>f,G:()=>h,t0:()=>v,L3:()=>u,GF:()=>p});var o=()=>n(475140),i=()=>n(989423),r=()=>n(778781);function a(e){let{module:t,sessionId:n}=e;const o={type:t.type,session_id:n};return(0,r().gx)(t)?{...o,property_id:t.propertyId,property_type:t.type}:o}function s(e){let{environment:t,context:n,from:o,sessionId:r,collectionId:a,existingLayoutId:s,collectionViewId:l}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_opened",eventProperties:{context:n,from:o,sessions_id:r,collection_id:a,existing_layout_id:s,collection_view_id:l}}})}function l(e){let{environment:t,context:n,sessionId:r,collectionId:a,existingLayoutId:s,layoutSaved:l,initialLayoutModulesByArea:c,finalModulesByArea:d}=e;const u=void 0!==c&&Boolean((0,o().ku)(c,(e=>"viewsMain"===e.type))),p=void 0!==d&&Boolean((0,o().ku)(d,(e=>"viewsMain"===e.type)));let m;m=!u&&p?"tabbed":u&&!p?"simple":"unchanged",(0,i().u4)({environment:t,event:{eventName:"page_builder_closed",eventProperties:{context:n,layout_saved:l,sessions_id:r,collection_id:a,existing_layout_id:s,layout_structure_change_in_session:m}}})}function c(e){let{environment:t,context:n,sessionId:o,module:r,collectionId:s,layoutId:l,area:c,depth:d}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_module_removed",eventProperties:{...a({module:r,sessionId:o}),context:n,collection_id:s,layout_id:l,area:c,depth:d}}})}function d(e){let{environment:t,context:n,module:o,sessionId:r,collectionId:s,layoutId:l,isPropertyCreation:c,area:d,depth:u}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_module_added",eventProperties:{...a({module:o,sessionId:r}),context:n,collection_id:s,layout_id:l,is_property_created:c,area:d,depth:u}}})}function u(e){let{environment:t,layoutId:n,collectionId:o,sessionId:r,from:a}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_page_settings_opened",eventProperties:{layout_id:n,collection_id:o,session_id:r,context:"layout",from:a}}})}function p(e){let{environment:t,layoutId:n,collectionId:o,sessionId:r,structure:a}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_structure_changed",eventProperties:{layout_id:n,collection_id:o,session_id:r,context:"layout",structure:a}}})}function m(e){let{modulesByArea:t,moduleId:n,newPosition:i}=e;const r=(0,o().JO)(t,(e=>e.id===n));if(r)return"page_main"===r.area&&"page_details"===i.area?"move_to_sidebar":"page_details"===r.area&&"page_main"===i.area?"move_to_main_page":r.area===i.area?"reorder":void 0}function g(e){let{environment:t,context:n,sessionId:o,collectionId:r,layoutId:a,action:s,moduleType:l,area:c,depth:d}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_module_reordered",eventProperties:{context:n,session_id:o,collection_id:r,layout_id:a,action:s,module_type:l,new_area:c,depth:d}}})}function f(e){let{environment:t,context:n,sessionId:o,collectionId:r,layoutId:a}=e;(0,i().u4)({environment:t,event:{eventName:"page_builder_reset_to_default",eventProperties:{context:n,session_id:o,collection_id:r,layout_id:a}}})}function v(e){let{environment:t,collectionId:n,layoutId:o}=e;(0,i().u4)({environment:t,event:{eventName:"details_sidebar_open",eventProperties:{collection_id:n,layout_id:o}}})}function h(e){let{environment:t,collectionId:n,layoutId:o}=e;(0,i().u4)({environment:t,event:{eventName:"details_sidebar_closed",eventProperties:{collection_id:n,layout_id:o}}})}},205098:(e,t,n)=>{n.d(t,{Az:()=>$,Cj:()=>S,Dz:()=>H,EA:()=>w,IZ:()=>A,J:()=>h,Jk:()=>X,Ms:()=>y,RR:()=>x,SN:()=>f,WG:()=>B,YL:()=>Y,h0:()=>P,iI:()=>q,kz:()=>C,o1:()=>k,w0:()=>D,wE:()=>Z,xt:()=>m,zZ:()=>b});n(16280),n(898992),n(823215),n(354520),n(581454);var o=()=>n(67657),i=()=>n(289915),r=()=>n(568063),a=()=>n(977345),s=()=>n(931075),l=()=>n(959013),c=()=>n(496603),d=()=>n(534177),u=()=>n(972435);const p={text:{operator:"string_contains",value:{type:"exact",value:void 0}},relation:{operator:"relation_contains",value:{type:"exact",value:void 0}},url:{operator:"string_contains",value:{type:"exact",value:void 0}},checkbox:{operator:"checkbox_is",value:{type:"exact",value:void 0}},created_by:{operator:"person_contains",value:{type:"exact",value:void 0}},last_edited_by:{operator:"person_contains",value:{type:"exact",value:void 0}},select:{operator:"enum_is",value:{type:"exact",value:void 0}},multi_select:{operator:"enum_contains",value:{type:"exact",value:void 0}},status:{operator:"status_is",value:{type:"is_group",value:void 0}},person:{operator:"person_contains",value:{type:"exact",value:void 0}},number:{operator:"number_equals",value:{type:"exact",value:void 0}},auto_increment_id:{operator:"number_equals",value:{type:"exact",value:void 0}},date:{operator:"date_is_relative_to",value:{type:"relative",value:"surrounding",unit:"week"}},created_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_edited_time:{operator:"date_is",value:{type:"exact",value:void 0}},last_visited_time:{operator:"date_is",value:{type:"exact",value:void 0}},email:{operator:"string_contains",value:{type:"exact",value:void 0}},phone_number:{operator:"string_contains",value:{type:"exact",value:void 0}},title:{operator:"string_contains",value:{type:"exact",value:void 0}},file:{operator:"is_not_empty"},location:{operator:"location_is",value:{type:"exact",value:void 0}},verification:{operator:"verification_is",value:{type:"exact",value:void 0}},geo_point:{operator:"geo_point_is_within",value:{type:"exact",value:void 0}}};function m(e){return p[e]}function g(e){return"v2"===e.version?function(e){if(!e.formula2)return{operator:"is_empty"};const t=e.formula2.result_type;if("array"===t.type){const e=(0,a().JK)(t.of);return"array"===e.type||"function"===e.type?{operator:"is_empty"}:"block"===e.type||"unknown"===e.type?{operator:"any",subfilter:m("text")}:{operator:"any",subfilter:m(e.type)}}if("unknown"===t.type||"block"===t.type)return m("text");return m(t.type)}(e):function(e){return e.formula&&e.formula.result_type?m(e.formula.result_type):{operator:"is_empty"}}(e)}function f(e){const{property:t,schema:n}=e,a=n[t];if(!a||"button"===a.type)return{operator:"is_empty"};if("formula"===a.type)return g(a);if("rollup"===a.type){if(a.aggregation&&"show_unique"!==a.aggregation){return m((0,o().ou)((0,o().ZP)(a.aggregation)))}{const t=(0,r().eY)(e);if(!t){return{operator:"any",subfilter:{operator:"is_empty"}}}if("rollup"===t.targetPropertySchema.type){return{operator:"any",subfilter:{operator:"is_empty"}}}if("formula"===t.targetPropertySchema.type){const e=g(t.targetPropertySchema);if((0,i().s1)(e))return e;return{operator:"any",subfilter:e}}if("button"===t.targetPropertySchema.type)return{operator:"is_empty"};return{operator:"any",subfilter:m(t.targetPropertySchema.type)}}}return m(a.type)}const v=(0,l().YK)({date_is_within:{defaultMessage:"Is between",id:"collectionFilterMenuHelpers.operator.dateIsWithin"},date_is_relative_to:{defaultMessage:"Is relative to today",id:"collectionFilterMenuHelpers.operator.dateIsRelativeTo"},is_empty:{defaultMessage:"Is empty",id:"collectionFilterMenuHelpers.operator.isEmpty"},is_not_empty:{defaultMessage:"Is not empty",id:"collectionFilterMenuHelpers.operator.isNotEmpty"},string_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.stringIs"},string_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.stringIsNot"},string_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.stringContains"},string_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.stringDoesNotContain"},string_starts_with:{defaultMessage:"Starts with",id:"collectionFilterMenuHelpers.operator.stringStartsWith"},string_ends_with:{defaultMessage:"Ends with",id:"collectionFilterMenuHelpers.operator.stringEndsWith"},checkbox_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.checkboxIs"},checkbox_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.checkboxIsNot"},enum_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.enumIs"},enum_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.enumIsNot"},enum_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.enumContains"},enum_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.enumDoesNotContain"},status_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.statusIs"},status_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.statusIsNot"},person_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.personContains"},person_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.personDoesNotContain"},relation_contains:{defaultMessage:"Contains",id:"collectionFilterMenuHelpers.operator.relationContains"},relation_does_not_contain:{defaultMessage:"Does not contain",id:"collectionFilterMenuHelpers.operator.relationDoesNotContain"},location_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.locationIs"},location_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.locationIsNot"},number_equals:{defaultMessage:"=",id:"collectionFilterMenuHelpers.operator.numberEquals"},number_does_not_equal:{defaultMessage:"≠",id:"collectionFilterMenuHelpers.operator.numberDoesNotEqual"},number_greater_than:{defaultMessage:">",id:"collectionFilterMenuHelpers.operator.numberGreaterThan"},number_less_than:{defaultMessage:"<",id:"collectionFilterMenuHelpers.operator.numberLessThan"},number_greater_than_or_equal_to:{defaultMessage:"≥",id:"collectionFilterMenuHelpers.operator.numberGreaterThanOrEqualTo"},number_less_than_or_equal_to:{defaultMessage:"≤",id:"collectionFilterMenuHelpers.operator.numberLessThanOrEqualTo"},date_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.dateIs"},date_is_before:{defaultMessage:"Is before",id:"collectionFilterMenuHelpers.operator.dateIsBefore"},date_is_after:{defaultMessage:"Is after",id:"collectionFilterMenuHelpers.operator.dateIsAfter"},date_is_on_or_before:{defaultMessage:"Is on or before",id:"collectionFilterMenuHelpers.operator.dateIsOnOrBefore"},date_is_on_or_after:{defaultMessage:"Is on or after",id:"collectionFilterMenuHelpers.operator.dateIsOnOrAfter"},any:{defaultMessage:"Any",id:"collectionFilterMenuHelpers.operator.any"},none:{defaultMessage:"None",id:"collectionFilterMenuHelpers.operator.none"},every:{defaultMessage:"Every",id:"collectionFilterMenuHelpers.operator.every"},string_has_no_alphabet_prefix:{defaultMessage:"(Not used)",id:"collectionFilterMenuHelpers.operator.stringHasNoAlphabetPrefix"},verification_is:{defaultMessage:"Is",id:"collectionFilterMenuHelpers.operator.verificationStateIs"},verification_is_not:{defaultMessage:"Is not",id:"collectionFilterMenuHelpers.operator.verificationStateIsNot"},geo_point_is_within:{defaultMessage:"Is within",id:"collectionFilterMenuHelpers.operator.geoPointIsWithin"},geo_point_is_not_within:{defaultMessage:"Is not within",id:"collectionFilterMenuHelpers.operator.geoPointIsNotWithin"}});function h(e){if("enum_contains_all"===e)throw new Error("enum_contains_all is not supported to be displayed in the filter menu");return u().A.formatMessage(v[e])}const _=(0,l().YK)({today:{defaultMessage:"Today",id:"collectionFilterMenuHelpers.relativeDates.today"},tomorrow:{defaultMessage:"Tomorrow",id:"collectionFilterMenuHelpers.relativeDates.tomorrow"},yesterday:{defaultMessage:"Yesterday",id:"collectionFilterMenuHelpers.relativeDates.yesterday"},one_week_ago:{defaultMessage:"One week ago",id:"collectionFilterMenuHelpers.relativeDates.oneWeekAgo"},one_week_from_now:{defaultMessage:"One week from now",id:"collectionFilterMenuHelpers.relativeDates.oneWeekFromNow"},one_month_ago:{defaultMessage:"One month ago",id:"collectionFilterMenuHelpers.relativeDates.oneMonthAgo"},one_month_from_now:{defaultMessage:"One month from now",id:"collectionFilterMenuHelpers.relativeDates.oneMonthFromNow"}}),b=(0,l().YK)({past:{defaultMessage:"Past",id:"collectionFilterMenuHelpers.relativeDates.past"},future:{defaultMessage:"Next",id:"collectionFilterMenuHelpers.relativeDates.next"}}),y=(0,l().YK)({direction:{defaultMessage:"Direction",id:"collectionFilterMenuHelpers.relativeDates.direction"},unit:{defaultMessage:"Unit",id:"collectionFilterMenuHelpers.relativeDates.unit"}}),S=(0,l().YK)({this:{defaultMessage:"This",id:"collectionFilterMenuHelpers.relativedates.this"}}),w=(0,l().YK)({day:{defaultMessage:"day",id:"collectionFilterMenuHelpers.relativeDates.day"},week:{defaultMessage:"week",id:"collectionFilterMenuHelpers.relativeDates.week"},month:{defaultMessage:"month",id:"collectionFilterMenuHelpers.relativeDates.month"},year:{defaultMessage:"year",id:"collectionFilterMenuHelpers.relativeDates.year"}}),k=(0,l().YK)({day:{defaultMessage:"days",id:"collectionFilterMenuHelpers.relativeDates.days"},week:{defaultMessage:"weeks",id:"collectionFilterMenuHelpers.relativeDates.weeks"},month:{defaultMessage:"months",id:"collectionFilterMenuHelpers.relativeDates.months"},year:{defaultMessage:"years",id:"collectionFilterMenuHelpers.relativeDates.years"}}),I=(0,l().YK)({exactDate:{defaultMessage:"Custom date",id:"collectionFilterMenuHelpers.relativeDates.exactDate"},exactDateRange:{defaultMessage:"Exact dates",id:"collectionFilterMenuHelpers.relativeDates.exactDateRange"}});function x(e){return"exact"===e.type?u().A.formatMessage(I.exactDate):u().A.formatMessage(_[e.value])}const A=(0,l().YK)({custom:{defaultMessage:"Relative range",id:"collectionFilterMenuHelpers.relativeDates.range"},surrounding:{defaultMessage:"Surrounding range",id:"collectionFilterMenuHelpers.relativeDates.customRange"},this_week:{defaultMessage:"This week",id:"collectionFilterMenuHelpers.relativeDates.thisWeek"},the_past_week:{defaultMessage:"The past week",id:"collectionFilterMenuHelpers.relativeDates.thePastWeek"},the_past_month:{defaultMessage:"The past month",id:"collectionFilterMenuHelpers.relativeDates.thePastMonth"},the_past_year:{defaultMessage:"The past year",id:"collectionFilterMenuHelpers.relativeDates.thePastYear"},the_next_week:{defaultMessage:"The next week",id:"collectionFilterMenuHelpers.relativeDates.theNextWeek"},the_next_month:{defaultMessage:"The next month",id:"collectionFilterMenuHelpers.relativeDates.theNextMonth"},the_next_year:{defaultMessage:"The next year",id:"collectionFilterMenuHelpers.relativeDates.theNextYear"}});function C(e){return"custom"===e.value?function(e){const t=u().A.formatMessage(b[e.direction]),n=1===e.count?u().A.formatMessage(w[e.unit]):u().A.formatMessage(k[e.unit]);return 1===e.count?`${t} ${n}`:`${t} ${e.count} ${n}`}(e):"surrounding"===e.value?function(e){const t=u().A.formatMessage(w[e.unit]);return`${u().A.formatMessage(S.this)} ${t}`}(e):"exact"===e.type?u().A.formatMessage(I.exactDateRange):"relative"===e.type?u().A.formatMessage(A[e.value]):void(0,d().HB)(e)}const T=(0,l().YK)({start_date:{defaultMessage:"Start date",id:"collectionFilterMenuHelpers.dateFilterModes.start_date"},end_date:{defaultMessage:"End date",id:"collectionFilterMenuHelpers.dateFilterModes.end_date"}}),M=(0,l().YK)({start_date:{defaultMessage:"For date ranges, filters on the start date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.start_date"},end_date:{defaultMessage:"For date ranges, filters on the end date. For individual dates, filters on the date.",id:"collectionFilterMenuHelpers.dateFilterModesTooltip.end_date"}});function P(e){return u().A.formatMessage(T[e])}function B(e){return u().A.formatMessage(M[e])}const R=(0,l().YK)({and:{defaultMessage:"And",id:"collectionFilterMenuHelpers.combinatorOperators.and"},or:{defaultMessage:"Or",id:"collectionFilterMenuHelpers.combinatorOperators.or"}}),E=(0,l().YK)({checked:{defaultMessage:"Checked",id:"collectionFilterMenuHelpers.checkbox.checked"},unchecked:{defaultMessage:"Unchecked",id:"collectionFilterMenuHelpers.checkbox.unchecked"}});function D(e){return e.value?u().A.formatMessage(s().D6(e.value)):""}function N(e){let{filter:t,schema:n}=e;return z({filter:t.subfilter,schema:n})}function L(e){let{filter:t}=e;return x(t.value)}function O(e){let{filter:t}=e;return C(t.value)}function U(e){let{filter:t}=e;return`"${t.value.value||""}"`}function F(e){let{filter:t}=e;return void 0===t.value.value?void 0:t.value.value.toString()}function V(e){let{filter:t}=e;return function(e){const t=e.value?E.checked:E.unchecked;return u().A.formatMessage(t)}(t.value)}const j={is_empty:()=>{},is_not_empty:()=>{},string_is:U,string_is_not:U,string_contains:U,string_does_not_contain:U,string_starts_with:U,string_ends_with:U,checkbox_is:V,checkbox_is_not:V,enum_is:U,enum_is_not:U,enum_contains:U,enum_does_not_contain:U,status_is:U,status_is_not:U,relation_contains:()=>{},relation_does_not_contain:()=>{},person_contains:()=>{},person_does_not_contain:()=>{},location_is:()=>{},location_is_not:()=>{},number_equals:F,number_does_not_equal:F,number_greater_than:F,number_less_than:F,number_greater_than_or_equal_to:F,number_less_than_or_equal_to:F,date_is:L,date_is_before:L,date_is_after:L,date_is_on_or_before:L,date_is_on_or_after:L,date_is_within:O,date_is_relative_to:O,any:N,none:N,every:N,string_has_no_alphabet_prefix:()=>{},verification_is:U,verification_is_not:U,geo_point_is_within:()=>{},geo_point_is_not_within:()=>{}};function z(e){const{filter:t}=e;if("enum_contains_all"===t.operator)throw new Error("enum_contains_all is not supported to be displayed in the filter menu");const n=h(t.operator),o=j[t.operator](e);return c().oE([n,o]).join(" ")}function H(e){const{filter:t,schema:n}=e;if((0,i().dU)(t)){const e=t.filters||[],o=c().oE(e.map((e=>{const t=H({filter:e,schema:n});if(t)return(0,i().dU)(e)?`(${t})`:t}))),r=u().A.formatMessage(R[t.operator]);return o.join(` ${r} `)}if((0,i().yX)(t)){const e=n[t.property];if(!e)return;const o=t.filter,i=e.name,r=z({filter:o,schema:n});return c().oE([i,r]).join(" ")}}const W={text:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:"string_has_no_alphabet_prefix"===e.operator?{operator:t}:{operator:t,value:e.value}},number:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},checkbox:function(e,t){return{operator:t,value:e.value}},select:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},multi_select:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},status:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"is_option",value:void 0}}:{operator:t,value:e.value}},relation:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},person:function(e,t){return(0,i().tk)(t)?{operator:t}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value}},date:function(e,t,n){if((0,i().tk)(t))return{operator:t};const o=(0,i().fZ)(e)?void 0:e.use_end;return"date_is_within"===t?"date_is_within"!==e.operator?{operator:t,value:{type:"exact",value:void 0},use_end:o}:e:"date_is_relative_to"===t?"date_is_relative_to"!==e.operator?{operator:t,value:{type:"relative",value:"surrounding",unit:"week"},use_end:o}:e:(0,i().Cw)(e)?"combinator"===n?{operator:t,value:{type:"relative",value:"today"},use_end:o}:{operator:t,value:{type:"exact",value:void 0},use_end:o}:(0,i().fZ)(e)?{operator:t,value:{type:"exact",value:void 0}}:{operator:t,value:e.value,use_end:o}},file:function(e,t){return{operator:t}},location:function(e,t){return{operator:t,value:e.value}},verification:function(e,t){return{operator:t,value:e.value}},geo_point:function(e,t){return{operator:t,value:e.value}}};function q(e,t,n,o){return(0,W[e])(t,n,o)}const K=(0,l().YK)({and:{defaultMessage:"And",id:"database.filterOperators.and"},or:{defaultMessage:"Or",id:"database.filterOperators.or"}}),G=(0,l().YK)({and:{defaultMessage:"All filters must match",id:"database.filterOperators.andCaption"},or:{defaultMessage:"At least one filter must match",id:"database.filterOperators.orCaption"}});function $(e,t){return"and"===e?t.formatMessage(K.and):t.formatMessage(K.or)}function Y(e,t){return"and"===e?t.formatMessage(G.and):t.formatMessage(G.or)}const Q=(0,l().YK)({any:{defaultMessage:"Any",id:"database.filterOperators.any"},every:{defaultMessage:"Every",id:"database.filterOperators.every"},none:{defaultMessage:"None",id:"database.filterOperators.none"}});function Z(e,t){return"any"===e?t.formatMessage(Q.any):"every"===e?t.formatMessage(Q.every):t.formatMessage(Q.none)}const X=(0,l().YK)({number:{id:"collectionFilterMenuFilter.filterOperators.number.order",defaultMessage:"{operator}{operatorValue}"},text:{id:"collectionFilterMenuFilter.filterOperators.text.order",defaultMessage:"{operator}{operatorValue}"},checkbox:{id:"collectionFilterMenuFilter.filterOperators.checkbox.order",defaultMessage:"{operator}{operatorValue}"},select:{id:"collectionFilterMenuFilter.filterOperators.select.order",defaultMessage:"{operator}{operatorValue}"},multi_select:{id:"collectionFilterMenuFilter.filterOperators.multi_select.order",defaultMessage:"{operator}{operatorValue}"},status:{id:"collectionFilterMenuFilter.filterOperators.status.order",defaultMessage:"{operator}{operatorValue}"},relation:{id:"collectionFilterMenuFilter.filterOperators.relation.order",defaultMessage:"{operator}{operatorValue}"},location:{id:"collectionFilterMenuFilter.filterOperators.location.order",defaultMessage:"{operator}{operatorValue}"},person:{id:"collectionFilterMenuFilter.filterOperators.person.order",defaultMessage:"{operator}{operatorValue}"},date:{id:"collectionFilterMenuFilter.filterOperators.date.order",defaultMessage:"{operator}{operatorValue}"},file:{id:"collectionFilterMenuFilter.filterOperators.file.order",defaultMessage:"{operator}{operatorValue}"},verification:{id:"collectionFilterMenuFilter.filterOperators.verification.order",defaultMessage:"{operator}{operatorValue}"},geo_point:{id:"collectionFilterMenuFilter.filterOperators.geo_point.order",defaultMessage:"{operator}{operatorValue}"}})},205127:(e,t,n)=>{n.d(t,{fN:()=>r().f,l3:()=>s().A,vj:()=>a().A,oK:()=>l});var o=()=>n(645873);const i=new(o().O2)("Breadcrumb",(async()=>{const{default:e}=await n.e(3476).then(n.bind(n,991293));return{Breadcrumb:e}}));var r=()=>n(675811),a=()=>n(565049),s=()=>n(906719);const l=(0,o()._h)(i,(e=>e.Breadcrumb))},205682:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(764218).A)},208459:(e,t,n)=>{n.d(t,{H:()=>o});n(898992),n(737550);function o(e){const t=e.getState().stack;return t.some((e=>"customize"===e.type))?"customize_menu":t.some((e=>"automationSettings"===e.type&&"view_options"!==e.from))?void 0:t.some((e=>"main"===e.type))?"view_options":void 0}},209416:(e,t,n)=>{n.d(t,{a:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m9.89 10.71 7.985-7.986V2.71a.77.77 0 0 0 0-1.084.77.77 0 0 0-1.083 0L8.793 9.613a1.1 1.1 0 0 0-.232.387l-.284.916c-.052.194.129.374.31.31l.916-.284a.87.87 0 0 0 .387-.232"}),(0,o.jsx)("path",{d:"M4.825 3.25h8.572L12.145 4.5h-7.32c-.649 0-1.175.526-1.175 1.175v6.75c0 .649.526 1.175 1.175 1.175h4.837a.63.63 0 0 1 .382.13l2.65 2.038v-1.543c0-.345.28-.625.625-.625h1.856c.649 0 1.175-.526 1.175-1.175V6.017l1.122-1.122q.126.369.128.78v6.75a2.425 2.425 0 0 1-2.425 2.425h-1.231v2.188a.625.625 0 0 1-1.006.495L9.45 14.85H4.825A2.425 2.425 0 0 1 2.4 12.425v-6.75A2.425 2.425 0 0 1 4.825 3.25"})]})},r=(0,n(340498).wt)("commentPencil",i)},209660:(e,t,n)=>{n.d(t,{Ow:()=>s,Yp:()=>l});var o=()=>n(624307),i=()=>n(351360),r=()=>n(973189),a=()=>n(404141);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{currentTab:t,subtab:n,isMobile:r,openedFrom:s,upsellType:d,highlightedSetting:u,upsellProduct:p}=e;if(r)"notifications"!==t&&"notifications_and_settings"!==t&&"user_settings"!==t||o().A.setState({open:!0});else if(t)a().A.setState({open:!0,openedFrom:s,upsellType:d,upsellProduct:p,...c({currentTab:t,subtab:n}),highlightedSetting:u});else{const{currentSpaceStore:e}=i().default.state;a().A.setState({open:!0,openedFrom:s,upsellType:d,upsellProduct:p,currentTab:l(e),defaultSubtab:void 0,highlightedSetting:u})}}function l(e){return e&&e.canRead()?"members":"settings"}function c(e){const{currentTab:t,subtab:n}=e;if("members"===t){return{currentTab:"members",defaultSubtab:n===r().d.Members||n===r().d.Groups||n===r().d.Guests||n===r().d.Reprovisioning||n===r().d.Requests?n:void 0}}if("integrations"===t){return{currentTab:"integrations",defaultSubtab:"member_connections"===n||"workspace_connections"===n?n:void 0}}if("security"===t){return{currentTab:"security",defaultSubtab:"security"===n||"data_retention"===n?n:void 0}}if("billing"===t){return{currentTab:"billing",defaultSubtab:"address"===n?n:void 0}}if("requests"===t){return{currentTab:"requests",defaultSubtab:"upgrades"===n?n:void 0}}if("imports"===t){const e=n?function(e){switch(e){case"csv":return"csv";case"docx":return"docx";case"html":return"html";case"gdocs":return"gdocs";case"dropbox":return"dropbox";case"quip":return"quip";case"workflowy":return"workflowy";case"genericImporter":return"genericImporter";case"markdown":return"markdown";case"pdf":return"pdf";case"trello":return"trello";case"evernote":return"evernote";case"confluence":return"confluence";case"confluenceApi":return"confluenceApi";case"asana":return"asana";case"monday":return"monday";case"jira":return"jira";default:return}}(n):void 0;return{currentTab:"imports",defaultSubtab:e}}return{currentTab:t,defaultSubtab:void 0}}},210737:(e,t,n)=>{n.d(t,{A:()=>a});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(737550);var o=()=>n(377586);class i extends(()=>n(757695))().default{getInitialState(){return{openPopups:new Set,namedOpenPopups:new Set}}hasOpenPopups(){const{openPopups:e,namedOpenPopups:t}=this.getState();return e.size>0||t.size>0}hasOpenMobileSlideUps(){const{openPopups:e,namedOpenPopups:t}=this.getState();if(t.size>0)return!0;for(const n of e){if(n.current.hidesMobileNativeBottomBar)return!0;if((n.current.popupType===o().n.SlideUp||n.current.popupType===o().n.BottomSheet)&&!n.current.preventSlideUpTransition)return!0}return!1}hasOpenMouseCapturePopup(){const{openPopups:e}=this.state;return e.size>0&&Array.from(e.values()).some((e=>!e.current.disableMouseCapture))}closeAll(){for(const n of this.state.openPopups){var e,t;null===(e=(t=n.current).onDismiss)||void 0===e||e.call(t,null)}}addNamedPopup(e){this.state.namedOpenPopups.add(e),this.emit()}removeNamedPopup(e){this.state.namedOpenPopups.delete(e),this.emit()}}const r=new i;(0,n(604341).exposeDebugValue)("GlobalPopupStore",r);const a=r},211134:(e,t,n)=>{n.d(t,{PF:()=>o});n(944114);function o(e){return"development"===e.env||"local"===e.env||e.isAdminMode}},211716:(e,t,n)=>{n.d(t,{Fv:()=>u,HP:()=>s,fp:()=>d,ig:()=>a});n(944114),n(581454);var o=()=>n(244641),i=()=>n(496603),r=()=>n(825972);let a=function(e){return e.Default="Default",e.Link="Link",e.Favorite="Favorite",e.Search="Search",e}({});const s=3,l={BONUS:{DEFAULT:100,LINK:120,SEARCH:200,FAVORITE:140},BONUS_NORMALIZER:100,TIME_BUCKETS:[{days:4,weight:100},{days:14,weight:70},{days:31,weight:50},{days:90,weight:30}],DEFAULT_BUCKET_WEIGHT:10};function c(e){const{BONUS:t}=l;switch(e){case a.Default:return t.DEFAULT;case a.Link:return t.LINK;case a.Favorite:return t.FAVORITE;case a.Search:return t.SEARCH;default:(0,n(534177).HB)(e)}}function d(e){let{now:t,visitedAt:n}=e;const{TIME_BUCKETS:i,DEFAULT_BUCKET_WEIGHT:r}=l,a=o().c9.fromMillis(t).diff(o().c9.fromMillis(n),"days").get("days");return a<=i[0].days?i[0].weight:a<=i[1].days?i[1].weight:a<=i[2].days?i[2].weight:a<=i[3].days?i[3].weight:r}class u{constructor(e){var t=this;this.maxStoredVisits=void 0,this.visits=void 0,this.recordVisit=e=>{const{id:t,type:o,timestampForTestingOnly:a}=e,s=this.createVisit(o,a),l=this.visits.get(t);if(l.error)return;if((0,r().Dd)()){const{currentSpaceStore:e}=n(351360).default.state,o=e&&e.id,i=e&&e.userId;o&&i&&((0,r().B8)({spaceId:o,pageId:t,visitedAt:s.timestamp}),(0,n(355012).$B)({spaceId:o,userId:i,pageId:t,visitedAt:s.timestamp}))}const c=l.value||this.createVisitCacheEntry();var d,u,p;c.totalVisits+=1,c.recentVisits=(d=c.recentVisits,u=s,p=this.maxStoredVisits,[...(0,i().O6)(d,p-1),u]),this.visits.set(t,c)},this.getVisits=e=>{const t=this.visits.get(e);if(!t.error)return t.value},this.getVisitedIds=()=>{const e=this.visits.keys();return e.error?[]:e.value},this.getFrecencyScore=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const o=t.getVisits(e);if(!o)return u.UNVISITED_FRECENCY_SCORE;const{totalVisits:r,recentVisits:a}=o;if(0===r||0===a.length)return u.UNVISITED_FRECENCY_SCORE;const s=a.map((e=>{const{type:t,timestamp:o}=e,i=c(t);return d({now:n,visitedAt:o})*(i/l.BONUS_NORMALIZER)})),p=(0,i().cz)(s)/s.length;return Math.ceil(r*p)};const{maxBlocks:o,maxStoredVisits:a,store:s,version:p}=e;this.maxStoredVisits=a,this.visits=new(n(643534).A)({prefix:e.prefix||"FrecencyStore",maxSize:o,store:s,version:p})}initialize(){this.visits.updateVersionAndGC()}sortFrecencyHighToLow(e){const{items:t,now:n,recordFrecency:o}=e;return(0,i().Ul)(t,(e=>{const t="number"==typeof e.score?e.score:1,i=this.getFrecencyScore(e.id,n);o&&(e.frecencyScore=i);const r=e.personalizationBoost??1;return-1*t*Math.max(i,r)}))}createVisitCacheEntry(){return{totalVisits:0,recentVisits:[]}}createVisit(e,t){return{type:e,timestamp:"number"==typeof t?t:Date.now()}}clear(){const e=[];this.visits.scan((t=>e.push(t)));for(const t of e)this.visits.remove(t)}}u.UNVISITED_FRECENCY_SCORE=1},212050:(e,t,n)=>{n.d(t,{u:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("close",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.89795 13.3428C3.18799 13.6262 3.6626 13.6262 3.93945 13.3494L7.99341 9.29541L12.0474 13.3494C12.3308 13.6262 12.8054 13.6328 13.0889 13.3428C13.3723 13.0593 13.3723 12.5847 13.0955 12.3079L9.0415 8.24731L13.0955 4.19336C13.3723 3.9165 13.3789 3.4353 13.0889 3.15845C12.7988 2.875 12.3308 2.875 12.0474 3.15186L7.99341 7.20581L3.93945 3.15186C3.6626 2.875 3.1814 2.86841 2.89795 3.15186C2.6145 3.44189 2.62109 3.9231 2.89795 4.19336L6.9519 8.24731L2.89795 12.3079C2.62109 12.5781 2.6145 13.0659 2.89795 13.3428Z"})})},212326:(e,t,n)=>{n.d(t,{I6:()=>m,Ot:()=>p,Yz:()=>s,_m:()=>c,dl:()=>l});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(284371),i=()=>n(720665),r=()=>n(441199),a=()=>n(424039);function s(e,t){const n=i().$z(e,(e=>{let{notification:t}=e;return t.navigable_block_id??t.id}));return n.forEach(((e,o)=>{const i=[],r=new Set;e.forEach((e=>{const{activity:t}=e;"commented"!==t.type&&i.push(e);const n=t.discussion_id;void 0===n||r.has(n)||(i.push(e),r.add(n))}));const a=i.filter((e=>{let{notification:n}=e;return("mentions"!==t||!n.visited)&&!("archive"===t&&!n.visited)}));0!==a.length?n.set(o,a):n.delete(o)})),n}function l(){const e=a().Ay.state.filter||a().$S;return a().w_.includes(e)?e:a().$S}function c(){return{fontWeight:o().Wy.medium}}function d(e,t){const n=void 0===e?new Date:new Date(e);return n.setDate(n.getDate()-t),n.setHours(0,0,0,0),n.getTime()}function u(e,t){const n=void 0===e?new Date:new Date(e),o=n.getDay();return n.setDate(n.getDate()-o-7*t),n.setHours(0,0,0,0),n.getTime()}function p(e){return[{name:"today",cutoffTime:d(e,0)},{name:"this_week",cutoffTime:u(e,0)},{name:"last_week",cutoffTime:u(e,1)},{name:"older"}]}function m(){const{contentType:e,openState:t}=r().default.state;return"inbox"===e?t:"closed"}},212439:(e,t,n)=>{n.d(t,{V:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("duplicate",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.83887 12.1523H4.00098V13.1846C4.00098 14.6406 4.75977 15.3994 6.24316 15.3994H13.1611C14.6377 15.3994 15.4033 14.6406 15.4033 13.1846V6.21191C15.4033 4.75586 14.6377 3.99707 13.1611 3.99707H11.999V2.96484C11.999 1.50879 11.2334 0.75 9.75684 0.75H2.83887C1.3623 0.75 0.59668 1.50195 0.59668 2.96484V9.93066C0.59668 11.3936 1.3623 12.1523 2.83887 12.1523ZM2.9209 10.8125C2.28516 10.8125 1.93652 10.4844 1.93652 9.82129V3.08105C1.93652 2.41797 2.28516 2.08301 2.9209 2.08301H9.68164C10.3105 2.08301 10.666 2.41797 10.666 3.08105V3.99707H6.24316C4.75977 3.99707 4.00098 4.75586 4.00098 6.21191V10.8125H2.9209ZM6.31836 14.0596C5.68262 14.0596 5.34082 13.7314 5.34082 13.0684V6.32812C5.34082 5.66504 5.68262 5.33691 6.31836 5.33691H13.0791C13.708 5.33691 14.0635 5.66504 14.0635 6.32812V13.0684C14.0635 13.7314 13.708 14.0596 13.0791 14.0596H6.31836Z"})})},212640:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},213525:(e,t,n)=>{n.d(t,{$y:()=>m,CE:()=>S,Kb:()=>y,Lc:()=>p,SM:()=>v,d$:()=>w,f1:()=>_,fT:()=>k,g8:()=>f,kq:()=>h,oP:()=>b,yu:()=>g});n(898992),n(672577),n(581454),n(737550),n(296540);var o=()=>n(959013),i=()=>n(496603),r=()=>n(534177),a=()=>n(920093),s=()=>n(901389),l=()=>n(605402),c=()=>n(508496),d=()=>n(37433),u=n(474848);async function p(e){let{isCurrentUser:t,teamName:n,memberName:i}=e;return await s().Gh({message:t?(0,u.jsx)(o().sA,{defaultMessage:"Leave {teamName}?",id:"teamActions.leaveTeam.confirmDialogMessage.removingYourself",values:{teamName:n}}):(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.confirmDialogMessage.removingSomeoneElse",defaultMessage:"Remove {memberName} from {teamName}?",values:{memberName:i,teamName:n}}),description:t?(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.confirmDialogDescription.removingYourself",defaultMessage:"You'll no longer see this teamspace in your sidebar and you may lose permissions to the teamspace's pages."}):(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.confirmDialogDescription.removingSomeoneElse",defaultMessage:"This change won't apply to any restricted pages in the teamspace."}),acceptLabel:t?(0,u.jsx)(o().sA,{defaultMessage:"Leave Teamspace",id:"teamActions.leaveTeam.confirmDialogAcceptLabel.removingYourself"}):(0,u.jsx)(o().sA,{defaultMessage:"Remove",id:"teamActions.leaveTeam.confirmDialogAcceptLabel"}),cancelLabel:(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.confirmDialogCancelLabel.removingSomeoneElse",defaultMessage:"Cancel"})}).then((e=>e.accept))}function m(){s().rG({message:(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.onlyTeamMemberLeftDialogMessage",defaultMessage:"Invite another teamspace owner to leave this teamspace"})})}function g(e){s().rG({message:(0,u.jsx)(o().sA,{id:"teamActions.leaveTeam.userMembershipFromGroupDialogMessage",defaultMessage:"You can't leave this teamspace because you're a member of {groupNames}.",values:{groupNames:i().oE(e.map((e=>`"${e.name}"`))).join(", ")}})})}function f(e){var t;let{group:n,onAccept:i}=e;const r=(null===(t=l().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n.group_id)))||void 0===t?void 0:t.memberCount)??0;s().ui({message:n.name?(0,u.jsx)(o().sA,{id:"TeamSettings.groups.removeGroupModal.title",defaultMessage:"Remove {groupName}?",values:{groupName:n.name}}):(0,u.jsx)(o().sA,{id:"TeamSettings.groups.removeGroupModal.title.noGroupName",defaultMessage:"Remove this group?"}),description:(0,u.jsx)(o().sA,{id:"TeamSettings.groups.removeGroupModal.description",defaultMessage:"{numGroupMembers} {numGroupMembers, plural, one {member} other {members}} from this group will be removed from this teamspace.",values:{numGroupMembers:r}}),showCancel:!0,keepFocus:!1,handleCancel:s().zw,items:[{label:(0,u.jsx)(o().sA,{id:"TeamSettings.groups.removeGroupModal.confirmationButton",defaultMessage:"Remove group"}),color:"red",onAccept:i}]})}function v(){s().rG({message:(0,u.jsx)(o().sA,{id:"teamActions.removeGroup.showRemoveOnlyGroupOwnerDialogMessage",defaultMessage:"Invite another teamspace owner to remove this group from the teamspace"})})}async function h(e,t){return await a().h({title:(0,u.jsx)(o().sA,{id:"teamActions.archiveTeam.confirmDialogTitle",defaultMessage:"Archive this teamspace?"}),message:t?(0,u.jsx)(o().sA,{id:"teamActions.archiveTeam.transitionToZeroTeams.confirmDialogDescription",defaultMessage:'This is your last default teamspace. Archiving will remove the "Teamspaces" section in your sidebar. Type the teamspace name to confirm.'}):(0,u.jsx)(o().sA,{id:"teamActions.archiveTeam.confirmDialogDescription",defaultMessage:"Archiving this teamspace will remove access and hide it in the sidebar for all teamspace members. Type the teamspace name to confirm."}),acceptLabel:(0,u.jsx)(o().sA,{id:"teamActions.archiveTeam.confirmDialogAcceptLabel",defaultMessage:"Archive teamspace"}),requiredInputValue:e,width:432})}async function _(e){return await s().Gh({message:(0,u.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(o().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogTitle",defaultMessage:'Would you like to move pages under {teamName} to the "Private" and "Shared" sections in your sidebar?',values:{teamName:e}})}),acceptLabel:(0,u.jsx)(o().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogAcceptLabel",defaultMessage:"Move pages"}),cancelLabel:(0,u.jsx)(o().sA,{id:"teamActions.movePagesFromArchivedTeam.confirmDialogCancelLabel",defaultMessage:"Proceed without moving pages"})}).then((e=>e.accept))}async function b(e){let{teamName:t,currentIsDefault:n,accessLevel:i,isDefault:a,numberOfTeamGuests:l}=e;const c=(0,u.jsx)("div",{style:{marginTop:8},children:(0,u.jsx)(o().sA,{id:"teamActions.confirmTeamAccessDialog.disableDefaultTeamLabel",defaultMessage:"{teamName} will also no longer be a default teamspace and auto-add workspace members.",values:{teamName:t}})});let d,p;return"private"===i?(d=(0,u.jsx)(o().sA,{defaultMessage:"Make {teamName} private?",id:"teamActions.confirmTeamAccessChangeDialog.privateTeam.titleWithName",values:{teamName:t}}),p=(0,u.jsxs)("div",{children:[(0,u.jsx)(o().sA,{id:"teamActions.teamScreen.privateTeam.description",defaultMessage:"Only members will be able to see the teamspace and its content."}),n&&c]})):a?l>0?(d=(0,u.jsx)(o().sA,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeamWithGuests.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,u.jsx)(o().sA,{id:"teamActions.teamScreen.defaultTeamWithGuests.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace. Additionally, {numberOfTeamGuests} teamspace guests will be removed.",values:{numberOfTeamGuests:l}})):(d=(0,u.jsx)(o().sA,{id:"teamActions.confirmTeamAccessChangeDialog.defaultTeam.titleWithName",defaultMessage:"Make {teamName} a default teamspace?",values:{teamName:t}}),p=(0,u.jsx)(o().sA,{id:"teamActions.teamScreen.defaultTeam.description",defaultMessage:"Everyone in the workspace and future workspace members will be added to this teamspace."})):"open"===i?(d=(0,u.jsx)(o().sA,{defaultMessage:"Make {teamName} open?",id:"teamActions.confirmTeamAccessChangeDialog.openTeam.titleWithName",values:{teamName:t}}),p=(0,u.jsxs)("div",{children:[!n&&(0,u.jsx)(o().sA,{id:"teamActions.teamScreen.openTeam.description",defaultMessage:"Everyone in the workspace will have access to the teamspace and its content."}),n&&c]})):"closed"===i?(d=(0,u.jsx)(o().sA,{defaultMessage:"Make {teamName} closed?",id:"teamActions.confirmTeamAccessChangeDialog.closedTeam.titleWithName",values:{teamName:t}}),p=(0,u.jsxs)("div",{children:[(0,u.jsx)(o().sA,{id:"teamActions.teamScreen.closedTeam.description",defaultMessage:"The teamspace will still be discoverable, but joining will be invite-only."}),n&&c]})):(0,r().HB)(i),await s().Gh({message:d,description:p}).then((e=>e.accept))}async function y(e){let t,n,i="normal";const a=c().default.checkGate({gateName:"sharing_anyone_with_the_link"});switch(e){case"disable_guests":t=(0,u.jsx)(o().sA,{id:"teamSettings.disableGuests.confirmationTitle",defaultMessage:"Disable guests?"}),n=(0,u.jsx)(o().sA,{id:"teamSettings.disableGuests.confirmationDescription",defaultMessage:"All page guests in this teamspace will be removed."});break;case"disable_public_access":t=a?(0,u.jsx)(o().sA,{id:"teamSettings.disablePublicPages.confirmationTitleAWTLUpdate",defaultMessage:"Disable publishing sites, forms, and public links?"}):(0,u.jsx)(o().sA,{id:"teamSettings.disablePublicPages.confirmationTitle",defaultMessage:"Disable publishing sites and forms?"}),n=(0,u.jsx)(o().sA,{id:"teamSettings.disablePublicPages.confirmationDescription",defaultMessage:"This will remove access for anyone who is not a member or guest of the workspace from all pages in this teamspace."}),i="wide";break;case"disable_export":case"disable_team_page_edits":return!0;default:(0,r().HB)(e)}return await s().Gh({message:t,description:n,mode:i}).then((e=>e.accept))}async function S(e){let t,n;switch(e){case"disable_guests":t=(0,u.jsx)(o().sA,{id:"teamSettings.disableGuestsOverride.confirmationTitle",defaultMessage:"Allow guests on this teamspace?"}),n=(0,u.jsx)(o().sA,{id:"teamSettings.disableGuestsOverride.confirmationDescription",defaultMessage:"By default, guests are not allowed on teamspaces in this workspace."});break;case"disable_public_access":t=(0,u.jsx)(o().sA,{id:"teamSettings.disablePublicPagesOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be made public?"}),n=(0,u.jsx)(o().sA,{id:"teamSettings.disablePublicPagesOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be made public."});break;case"disable_export":t=(0,u.jsx)(o().sA,{id:"teamSettings.disableExportOverride.confirmationTitle",defaultMessage:"Allow teamspace pages to be exported?"}),n=(0,u.jsx)(o().sA,{id:"teamSettings.disableExportOverride.confirmationDescription",defaultMessage:"By default, pages in this workspace cannot be exported."});break;case"disable_team_page_edits":return!0;default:(0,r().HB)(e)}return await s().Gh({message:t,description:n,acceptLabel:(0,u.jsx)(o().sA,{id:"teamSettings.workspaceSettingOverride.confirmationButtonLabel",defaultMessage:"Override workspace setting"})}).then((e=>e.accept))}async function w(e){let{environment:t,spaceStore:n,teamName:i}=e;const r=t.currentUser.id;if(!r||!n)return!0;const a=await(0,d().getTeamsWithAggregateData)({fromCache:!0,environment:t,spaceStore:n,includeArchived:!1,currentUserId:r});if(!a)return!0;const{teams:l}=a;return!l.some((e=>{var t;return(null===(t=e.getName())||void 0===t?void 0:t.trim())===i.trim()}))||await s().Gh({message:(0,u.jsx)(o().sA,{id:"teamSettings.confirmDuplicateTeamName.message",defaultMessage:"A teamspace with the same name already exists. Are you sure you want to name this teamspace “{teamName}”?",values:{teamName:i}}),cancelLabel:(0,u.jsx)(o().sA,{id:"teamSettings.confirmDuplicateTeamName.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}async function k(){return await s().Gh({message:(0,u.jsx)(o().sA,{id:"teamSettings.setTeamPermissions.ClearCustomTeamPermissionsDialogMessage",defaultMessage:"Raising the permission level for all teamspace members will remove some custom permissions. Are you sure you want to proceed?"}),cancelLabel:(0,u.jsx)(o().sA,{id:"teamSettings.setTeamPermissions.cancelLabel",defaultMessage:"Cancel"})}).then((e=>e.accept))}},214006:(e,t,n)=>{n.d(t,{A:()=>a,t:()=>s});n(898992),n(354520),n(581454),n(908872),n(737550);var o=()=>n(90873),i=()=>n(630116);class r extends(()=>n(757695))().default{getInitialState(){return{createType:void 0}}getAllSpaceViewStores(e){return e.currentUser.loggedInUserIds.reduce(((t,n)=>[...t,...this.getSpaceViewStores(e,n)]),[])}hasAtLeastOneTeamPlan(e){return this.getAllSpaceViewStores(e).map((e=>{const t=e.getSpaceStore();if(t)return t.getPlanType()})).some((e=>"team"===e))}getSpaceViewStores(e,t){const o=new(i().dZ)(e,{table:n(294712).GD,id:t},{userId:t}).getSpaceViewStores();return n(496603).hS(o,(e=>e.isDefined()&&e.getSpaceId())).filter((t=>Boolean(t.isDefined())&&Boolean(t.getAlive())&&!this.isSpaceDeleted(e,t)))}isSpaceDeleted(e,t){const o=t.getSpaceStore();if(null!=o&&o.isDefined())return!1;const i=t.getSpaceId(),r=n(151059).A.getData(e,{spaceId:i});return(0,n(720665).pN)(r)}getUserEmailAddress(e,t){return new(i().LU)(e,{table:n(798880).oo,id:t},{userId:t}).getEmail()}}const a=new r;function s(e){const t=e.getUserRootParentId(),n=e.getSpaceStore();if(!t||!n)return!1;if(n.canRead())return!1;const i=o().A.getSharedPagesState({spaceId:n.id,userId:t});if(!i||i.loadingDone)return!1;return 0===(i.currentPageIds??[]).length}},215087:(e,t,n)=>{n.d(t,{r:()=>o});const o={BRL:{currencyCode:"BRL",minorUnitDigits:2},EUR:{currencyCode:"EUR",minorUnitDigits:2},GBP:{currencyCode:"GBP",minorUnitDigits:2},JPY:{currencyCode:"JPY",minorUnitDigits:0},KRW:{currencyCode:"KRW",minorUnitDigits:0},USD:{currencyCode:"USD",minorUnitDigits:2}}},215152:(e,t,n)=>{n.d(t,{A:()=>r,B:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o,r=o},215206:(e,t,n)=>{n.d(t,{m:()=>s});n(296540);var o=()=>n(847249),i=()=>n(410282),r=()=>n(155004),a=n(474848);function s(e){let{children:t,store:n}=e;const s=(0,o().K8)((()=>{const e=null==n?void 0:n.getRecordStoreUIAncestor(1),t=(0,i().j)(e);return"default_background"===t?void 0:t}),[n]);return(0,a.jsx)(r().s,{allowSelectionWithin:!1,style:l,children:t(s)})}const l={width:"100%"}},216424:(e,t,n)=>{n.d(t,{L:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{type:"closed"}}}const i=new o;(0,n(604341).exposeDebugValue)("automationBuilderModalStore",i)},218557:(e,t,n)=>{n.d(t,{NZ:()=>S,Tl:()=>v,to:()=>w});n(898992),n(737550);var o=n(296540),i=()=>n(484714),r=()=>n(790748),a=()=>n(847249),s=()=>n(401497),l=()=>n(100622),c=()=>n(501020),d=()=>n(38337),u=()=>n(585533),p=()=>n(861841),m=()=>n(11048),g=()=>n(145214),f=n(474848);function v(e){const{children:t,dropTargetKey:n,shouldShowDropZone:g=!1,aboveDropZoneMargin:v=0,belowDropZoneMargin:S=0,dropzoneGap:w,dropzoneStyle:x,style:A}=e,C=(0,i().v3)(),{selectableContainer:T}=(0,o.useContext)(c().z)??{},M=(0,o.useRef)(null);(0,r().b)(u().A,(()=>({props:{keepTextSelectionOnDrop:Boolean(e.keepTextSelectionOnDrop),dropTargetKey:n,onSelectableDrop:e.onSelectableDrop,onNativeDrop:e.onNativeDrop,canAcceptDrop:e.canAcceptDrop,dropzoneMustBeWithinHorizontalBound:e.dropzoneMustBeWithinHorizontalBound,isLastItem:e.isLastItem,dropzoneShouldNeverUseOrigin:e.dropzoneShouldNeverUseOrigin,canDropOnto:e.canDropOnto,canDropAbove:e.canDropAbove,canDropBelow:e.canDropBelow,canDropLeft:e.canDropLeft,canDropRight:e.canDropRight,canNativeDropOnto:e.canNativeDropOnto,canNativeDropAbove:e.canNativeDropAbove,canNativeDropBelow:e.canNativeDropBelow,canNativeDropLeft:e.canNativeDropLeft,canNativeDropRight:e.canNativeDropRight},getContextSelectableContainer:()=>T,canAcceptDrop:e.canAcceptDrop,getNode:()=>M.current})),[e.onSelectableDrop,e.onNativeDrop,e.keepTextSelectionOnDrop,n]);const[P,B]=(0,o.useState)({parentHaloAnimating:!1,hintHaloAnimating:!1,currentHaloAnimating:!1}),R=(e,t)=>()=>{B((n=>n[t]!==e?{...n,[t]:e}:n))},E=(0,a().K8)((()=>{var e;const t=p().Ay.state,o=function(e,t){if(!e.isDragging)return;const n=e.currentHintDropZones.findIndex((e=>_(t,e))),o=e.currentHintDropZones[n];return void 0===o?void 0:{...e.currentHintDropZones[n],index:n}}(t,n);return{shouldShowParentHalo:y({dragState:t,dropTargetKey:n,shouldShowHalo:g}),hintDropzoneDirection:null==o?void 0:o.direction,hintDropzoneIndex:(null==o?void 0:o.index)??0,currentDropzoneDirection:null===(e=b(t,n))||void 0===e?void 0:e.direction}}),[n,g]),D=E.shouldShowParentHalo||P.parentHaloAnimating,N=Boolean(E.hintDropzoneDirection)||P.hintHaloAnimating,L=Boolean(E.currentDropzoneDirection)||P.currentHaloAnimating,O=D||N||L,U=(0,s().IS)((e=>({base:{...O&&{position:"relative"},...A},dropParentHalo:{position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,background:l().Ay.blueWithAlpha(.07)},currentHalo:I({direction:E.currentDropzoneDirection,index:0,aboveDropZoneMargin:v,belowDropZoneMargin:S,dropzoneGap:w,dropzoneStyleOverride:x}),currentHaloGapBox:k({theme:e,isMobile:C.device.isMobile,direction:E.currentDropzoneDirection}),hintHalo:I({direction:E.hintDropzoneDirection,index:E.hintDropzoneIndex+1,aboveDropZoneMargin:v,belowDropZoneMargin:S,dropzoneGap:w,dropzoneStyleOverride:x}),hintHaloGapBox:k({theme:e,isMobile:C.device.isMobile,direction:E.hintDropzoneDirection})})),[v,S,E.currentDropzoneDirection,E.hintDropzoneDirection,E.hintDropzoneIndex,w,x,A,C.device.isMobile,O]);return(0,f.jsx)(m().A,{name:"DropTarget",children:(0,f.jsxs)("div",{ref:M,style:U.base,children:[t,D&&(0,f.jsx)(h,{animationKey:"parent",isVisible:E.shouldShowParentHalo,onStart:R(!0,"parentHaloAnimating"),onEnd:R(!1,"parentHaloAnimating"),className:d().nKq,style:U.dropParentHalo}),N&&(0,f.jsx)(h,{animationKey:"hint",isVisible:void 0!==E.hintDropzoneDirection,onStart:R(!0,"hintHaloAnimating"),onEnd:R(!1,"hintHaloAnimating"),style:U.hintHalo,gapStyle:U.hintHaloGapBox}),L&&(0,f.jsx)(h,{animationKey:"hint",isVisible:void 0!==E.currentDropzoneDirection,onStart:R(!0,"currentHaloAnimating"),onEnd:R(!1,"currentHaloAnimating"),style:U.currentHalo,shouldRenderGap:E.currentDropzoneDirection!==p().bH.Onto,gapStyle:U.currentHaloGapBox})]})})}function h(e){let{isVisible:t,animationKey:n,style:o,className:i,shouldRenderGap:r,gapStyle:a,onStart:s,onEnd:l}=e;return(0,f.jsx)(g().A,{visible:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:s,onAnimationEnd:l,className:i,style:o,children:r&&(0,f.jsx)("div",{style:a})},n)}function _(e,t){return(null==t?void 0:t.type)===p().OX.DropTarget&&t.key===e}function b(e,t){return e.isDragging&&_(t,e.currentDropZone)?e.currentDropZone:void 0}function y(e){const{dragState:t,shouldShowHalo:n,dropTargetKey:o}=e;return!(!n||!t.isDragging)&&(!!t.currentHintDropZones.some((e=>e.direction===p().bH.Left||e.direction===p().bH.Right))&&_(o,t.currentDropZone))}const S=4,w=l().Ay.blueWithAlpha(.43);function k(e){const{direction:t,isMobile:n,theme:o}=e;if(void 0===t)return{};const i=n?3:2;return t===p().bH.Above||t===p().bH.Below?{position:"relative",left:-i,width:i,height:S,background:o.contentBackground,transform:"translateZ(100px)"}:{position:"relative",top:-i,width:S,height:i,background:o.contentBackground,transform:"translateZ(100px)"}}function I(e){const{direction:t,index:n,aboveDropZoneMargin:o,belowDropZoneMargin:i,dropzoneGap:r,dropzoneStyleOverride:a}=e,s={position:"absolute",pointerEvents:"none",background:w,zIndex:88-n};if(t===p().bH.Onto)s.left=0,s.top=0,s.right=0,s.bottom=0,s.background=l().Ay.blueWithAlpha(.14);else if(t===p().bH.Above||t===p().bH.Below){const e=4;s.left=0,s.right=0,t===p().bH.Above?s.top=-(e+o):s.bottom=-(e+i),s.height=S}else{const e=8;s.top=0,s.bottom=0,t===p().bH.Left?s.left=r?-r:-e:s.right=r?-r:-e,s.width=S}return{...s,...a}}},219058:(e,t,n)=>{n.d(t,{fR:()=>a,tq:()=>r});var o=()=>n(534177);const i=(0,o().uv)({local:"local",staging:"stg",development:"dev",production:"prod"});(0,o().uv)({local:"local",stg:"staging",dev:"development",prod:"production"});function r(e){return"string"==typeof e&&i.includes(e)}const a={local:"localhost:3000",staging:"api-stg.notion.com",development:"api-dev.notion.com",production:"api.notion.com"}},219839:(e,t,n)=>{n.d(t,{n:()=>o});const o=(0,n(296540).createContext)({blockInsetRight:0});o.displayName="BlockRenderingContext"},220738:(e,t,n)=>{n.d(t,{L:()=>p,Q:()=>u});var o=()=>n(522419),i=()=>n(919709),r=()=>n(939768),a=()=>n(383594),s=()=>n(246826),l=()=>n(319975),c=()=>n(751156),d=()=>n(892632);function u(e){const{store:t,file:n,environment:o}=e;a().I(),d().QM({environment:o,file:n,bucket:"secure",record:t.pointer,isFileBlock:!0,reportRichUploadMetrics:!0,onComplete:(e,n)=>{n&&c().createAndCommit({userAction:"fileBlockActions.uploadFile",environment:o,canUndo:!0,perform:i=>{p({environment:o,store:t,embeddedUrl:{originUrl:e},name:n.name,size:n.size,transaction:i})}})},retryWhenOffline:!0})}function p(e){const{environment:t,store:n,name:a,size:c,transaction:d,embeddedUrl:u}=e,{originUrl:p,pastedSecureFile:m}=u||{};let g;a?g=a:p&&(g=(0,r().Z$)(p)),l().R9({environment:t,store:n.getBlockTitleStore(),value:i().x9d(g),transaction:d}),s().zv({store:n.getPropertiesStore(),data:{source:i().x9d(m?(0,o().xm)(m):p),size:i().x9d(c)},transaction:d}),m&&s().Bn({store:n,source:m.copiedSource,fileIds:[m.fileId],transaction:d})}},221424:(e,t,n)=>{n.d(t,{L:()=>o});const o=n(757695).default.createValue({open:!1},{name:"PingSalesModalStore"})},222130:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o},222299:(e,t,n)=>{n.d(t,{Oj:()=>E,X6:()=>R,YB:()=>D,Yf:()=>B,bh:()=>M,oT:()=>P});n(16280);var o=()=>n(908006),i=()=>n(700500),r=()=>n(179034),a=()=>n(519831),s=()=>n(869558),l=()=>n(496603),c=()=>n(857783),d=()=>n(519839),u=()=>n(492414),p=()=>n(753199),m=()=>n(594794),g=()=>n(592678),f=()=>n(493260),v=()=>n(129522),h=()=>n(351360),_=()=>n(66496),b=()=>n(630116),y=()=>n(65269),S=()=>n(302022),w=()=>n(292167),k=()=>n(896628),I=()=>n(722101),x=()=>n(246826),A=()=>n(435009),C=()=>n(324089),T=()=>n(751156);function M(e){const{environment:t,store:n,targetStore:o,transaction:i}=e,r=n.getParentBlockStore();if(r){const e=r.getContentStore(),a=w().s({environment:t,parentBlockStore:r,targetStore:o,transaction:i});return I().Br({parentStore:e,oldChildStore:n,newChildStore:a,transaction:i}).childStore}throw new Error("Could not create alias block.")}function P(e){const{environment:t,store:n,collectionStore:l,collectionViewStore:c,transaction:u}=e,{id:p}=t.currentUser,g=n.getRecordStoreUIParent();if(null!=g&&g.valueIs(y()._)){if(!n.isDefined())throw new Error("Block to replace was not defined.");if(g&&p){var h,_;if(g.pointer.spaceId&&n.getSpaceId()&&g.pointer.spaceId!==n.getSpaceId())throw new Error("The parent has a different spaceId than the store.");const e=g.pointer.spaceId||n.getSpaceId(),p=(0,m().Z1)({environment:t,table:r().ev,spaceId:e}),y=null===(h=(0,d().e2)(l))||void 0===h?void 0:h.getFormatStore().getKeyStore("table_properties").getValue(),S=null===(_=(0,d().e2)(l))||void 0===_||null===(_=_.getQueryStore())||void 0===_?void 0:_.getKeyStore("sort").getValue(),w={id:(0,m().Z1)({environment:t,table:s().Gy,spaceId:n.getSpaceId()}),version:0,type:"table",parent_id:p,parent_table:"block",alive:!0,space_id:n.getSpaceId(),format:{table_properties:y,collection_pointer:{table:a().Vl,id:l.id,spaceId:l.pointer.spaceId}},query2:{sort:S}};x().eC({environment:t,table:"collection_view",value:w,inMemoryRecordCache:n.inMemoryRecordCache,transaction:u});const k=x().Wv({environment:t,id:p,type:i().xd.collectionView,spaceId:n.getSpaceId(),inMemoryRecordCache:n.inMemoryRecordCache,transaction:u});x().zv({store:k,data:{view_ids:[w.id]},transaction:u});const A=I().Br({parentStore:g,oldChildStore:n,newChildStore:b().Bv.createChildStore(g,{table:r().ev,id:p}),transaction:u}).childStore;return(0,f().F)(w.id,{viewPointer:null==c?void 0:c.pointer}),o().default.afterNextFlush((()=>{const e=v().K.findBlockFromStoreWithMethod(A,"handleCreated");e&&e.handleCreated()})),A}}}function B(e){const{environment:t,blocks:n,openInNew:o,pageVisitSource:i}=e,r=n[0];if(o){const e=(0,u().Ay)({store:r,pageVisitSource:i,embedded:!1});A().oo({environment:t,url:e,openInNew:o})}else{const e=r.recordStoreUIParentStore instanceof b().Bv&&r.recordStoreUIParentStore.isCollectionView(),{mainEditorCurrentBlockStore:n}=h().default.state;if(e&&n){const e=(0,u().Ay)({store:n,fullyQualified:!1,peekViewBlockId:r.id,pageVisitSource:i});A().oo({environment:t,url:e})}else c().uK({environment:t,store:r,pageVisitSource:i})}}function R(e){const{environment:t,store:n,lock:o}=e,{id:i}=t.currentUser;if(!i)return;const r={block_locked:o,block_locked_by:i};T().createAndCommit({userAction:"pageBlockActions.setPageLock",environment:t,canUndo:!0,perform:e=>{x().zv({store:n.getFormatStore(),data:r,transaction:e})}})}function E(e){const{transaction:t,store:n,coverStore:o,pageCovers:i}=e,r=Object.keys(i),a=i[r[l().yT(0,r.length-1)]],s=a.items[l().yT(0,a.items.length-1)],c=s.coverUrl,d=s.position;x().KY({store:o,value:c,transaction:t}),k().yY({store:n,coverPosition:d,transaction:t})}function D(e,t,n){(0,p().SQ)({event:e,context:p().y$.EditorClick,callback:()=>function(e,t){const n=Boolean(S().A.state.pageMap[e.id])||_().A.state.pages.has(e.id);!e.canEdit()||e.isNonEditableState()||n||(0,g().Zm)()||T().createAndCommit({userAction:"PageViewBlock.handlePlaceholderClick",environment:t,canUndo:!0,perform:n=>{C()._N({environment:t,store:e,transaction:n})}})}(t,n)})}},222917:(e,t,n)=>{n.d(t,{$n:()=>S,WF:()=>w,YR:()=>p,bo:()=>m,fe:()=>h,mG:()=>v,mg:()=>y,o:()=>k,pF:()=>_,rD:()=>g,vl:()=>b,w3:()=>u,wr:()=>I,yN:()=>f});var o=()=>n(116225),i=()=>n(989423),r=()=>n(644914),a=()=>n(430483),s=()=>n(508496),l=()=>n(786601),c=()=>n(899677),d=()=>n(543491);function u(e,t){const n={...t,...(0,r().hX)({environment:e})};s().default.logEvent("open_search",n.from),i().vd(e,"open_search",n),o().u4({name:"open_search",args:n})}function p(e,t){i().vd(e,"space_invitation_email_clicked",t)}function m(e,t){i().vd(e,"select_search_item",t);const{numKeystrokes:n,timeToSelectMs:o,selectedItemIndex:r,originalPosition:a,context:l,numLocalResults:c,searchSessionId:d,searchSessionFlowNumber:u,numVisibleMembers:p,localSources:m,isMobile:g,timeToRenderResult:f}=t,v=Boolean(!!m&&m.length>0),h=p>1;s().default.logEvent("select_search_item",r,{numKeystrokes:n,timeToSelectMs:o,selectedItemIndex:r,numLocalResults:c,originalItemIndex:a,searchSessionFlowNumber:u,searchSessionId:d,context:l,isMultiplayer:h,isLocalResult:v,isMobile:g,timeToRenderResult:f});const _=1/(r+1);i().vd(e,"quick_find_reciprocal_rank",{reciprocalRank:_,context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h}),s().default.logEvent("quick_find_reciprocal_rank",_,{context:l,searchSessionId:d,numLocalResults:c,isMultiplayer:h,isLocalResult:v,isMobile:g})}let g=function(e){return e[e.SidePeekPanel=0]="SidePeekPanel",e[e.KeyboardShortcut=1]="KeyboardShortcut",e}({});function f(e,t){i().vd(e,"search_copy_link",t)}function v(e,t){i().vd(e,"abandoned_search",t);const{numKeystrokes:n,timeToAbandonMs:o,numLocalResults:r,numVisibleMembers:a,isMobile:l}=t,c=a>1;s().default.logEvent("abandoned_search",n,{numKeystrokes:n,timeToAbandonMs:o,numLocalResults:r,searchSessionId:t.searchSessionId,isMultiplayer:c,isMobile:l}),i().vd(e,"quick_find_reciprocal_rank",{reciprocalRank:0,searchSessionId:t.searchSessionId,numLocalResults:r,isMultiplayer:c}),s().default.logEvent("quick_find_reciprocal_rank",0,{searchSessionId:t.searchSessionId,numLocalResults:r,isMultiplayer:c,isMobile:l})}function h(e,t){i().vd(e,"search_client_results",t)}function _(e,t){i().vd(e,"search_post_click_page_interaction",t)}function b(e,t){var n;i().vd(e,"search_post_click_page_exit",{dwellTime:(new Date).getTime()-t.timeEntered.getTime()},{forceOverrideAutomaticEventData:{queryId:null===(n=d().A.state)||void 0===n?void 0:n.queryId}})}function y(e,t){const{currentSearchSessionId:n,currentWorkspaceId:o,newWorkspaceId:r}=t;i().vd(e,"search_quick_search_switch_workspace",{current_search_session_id:n,current_workspace_id:o,new_workspace_id:r})}function S(e,t){i().vd(e,"search_open_shortcut_settings_from_command_search_hint",{search_session_id:t.searchSessionId})}function w(e,t){i().vd(e,"search_hover_command_search_hint",{search_session_id:t.searchSessionId})}function k(e,t){i().vd(e,"search_query_has_operators",{operations:t.operations,search_session_id:t.searchSessionId})}function I(){return a().zD.isMiniSearchModalEnabled()?l().A.state.sessionId:c().default.state.sessionId}},224701:(e,t,n)=>{n.d(t,{$D:()=>u,L1:()=>m,M2:()=>d,Ow:()=>p,XO:()=>_,Z:()=>b,dl:()=>f,iw:()=>r,nV:()=>i,qI:()=>g,sC:()=>c,wX:()=>h,xj:()=>s,yU:()=>l,zA:()=>a,zo:()=>v});const o={subscriptionActions:new(n(645873).O2)("subscriptionActions",(()=>Promise.all([n.e(58550),n.e(11341),n.e(65213)]).then(n.bind(n,411341))))},i=S(y("updateSubscription")),r=S(y("trackSubscriptionUpdate")),a=S(y("updatePaymentMethod")),s=S(y("payUnpaidInvoice")),l=S(y("updateAddress")),c=S(y("updateVatId")),d=(S(y("updateBillingEmail")),S(y("cancelSubscription"))),u=S(y("updateCurrentSpace")),p=S(y("refresh")),m=S(y("refreshBillingHistory")),g=S(y("openSubscriptionUpgradeModal")),f=S(y("closeSubscriptionUpgradeModal")),v=S(y("openSubscriptionUpgradeModalForClaimAndUpgrade")),h=S(y("handlePlanChangeClick")),_=S(y("handlePaymentIntentNextActions")),b=(S(y("applyStudentGitHubGrant")),S(y("updateSubscriptionToEducationPlan")));async function y(e){return await o.subscriptionActions.load().then((t=>t[e]))}function S(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.then((e=>e(...n)))}}},228927:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=()=>n(728611),r=n(474848);const a=function(e){let{children:t,onChange:a,horizontal:s,style:l}=e;const c=(0,o.useRef)(null),d=(0,o.useRef)(0),u=(0,o.useRef)(0);return(0,o.useEffect)((()=>{const e=c.current;if(!e)return;const t=(0,n(953418).NM)(e);if(t){function o(){if(e&&t){const n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),{scrollTop:i}=t;return n.top+n.height+i-o.top-(i+o.height)}return 0}function r(){if(e&&t){const n=e.getBoundingClientRect(),o=t.getBoundingClientRect(),{scrollLeft:i,scrollWidth:r}=t,a=n.left+n.width+i-o.left,s=i+o.width;return r-n.width-(s-a)}return 0}function l(){return(null==t?void 0:t.scrollTop)||0}function p(){if(s){const e=r(),t={offsetFromTop:l()};e!==u.current&&(u.current=e,a(e,t))}else{const e=o(),t={offsetFromTop:l()};e!==d.current&&(d.current=e,a(e,t))}}function m(e){p()}p();const g=n(496603).nF(m,50);return i().P4(t,"scroll",g),()=>{i().Ol(t,"scroll",g)}}}),[s,a]),(0,r.jsx)("div",{style:l,ref:c,children:t})}},229417:(e,t,n)=>{n.d(t,{L:()=>a,y:()=>s});var o=()=>n(227440),i=()=>n(620149);const r=Number(n(720665).Xb);function a(){var e;if(o().A.state.online){if(null!==(e=i().A.state.connectionError)&&void 0!==e&&e.startTime){var t;if(Date.now()-(null===(t=i().A.state.connectionError)||void 0===t?void 0:t.startTime)<r)return}return i().A.state.connectionError}}function s(){return Boolean(a())}},230062:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(496506).default)((()=>n(353643).A.state.isDragging||n(861841).Ay.state.isDragging||n(649642).A.state.isDragging||n(93658).default.state.isActive),{debugName:"GlobalIsDraggingStore"})},231722:(e,t,n)=>{n.d(t,{$U:()=>m,An:()=>c,H7:()=>p,KP:()=>s,OH:()=>r,Oj:()=>a,Zq:()=>f,cL:()=>u,kM:()=>l,z_:()=>d});var o=()=>n(792002);function i(e,t){return e.store===t.store&&e.index===t.index}function r(e,t){return!e&&!t||!(!e||!t)&&(i(e.start,t.start)&&i(e.end,t.end))}function a(e){return{start:{...e.start},end:{...e.end}}}function s(e){return!e||e.start.store===e.end.store}function l(e){return s(e)&&e.start.index===e.end.index}function c(e){return 0===e.start.index&&l(e)}function d(e){return l(e)&&(0,o().NG)(e.start.store,{startIndex:e.start.index,endIndex:e.end.index})}function u(e,t){const n=[e.start.store,e.end.store];return n.includes(t.start.store)||n.includes(t.end.store)}function p(e){if(e)return s(e)?{store:e.start.store,selection:{startIndex:e.start.index,endIndex:e.end.index}}:void 0}function m(e){const{store:t,selection:n}=e;if(t&&n)return{start:{store:t,index:n.startIndex},end:{store:t,index:n.endIndex}}}function g(e){return!!(e&&"object"==typeof e&&"store"in e&&"index"in e)}function f(e){if("object"==typeof e&&e&&"start"in e&&"end"in e){const{start:t,end:n}=e;if(g(t)&&g(n))return!0}return!1}},232063:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=n(474848);const s=(0,n(340498).wt)("cornerResize",{viewBox:"0 0 16 16",svg:(0,a.jsx)("path",{fillRule:"evenodd",strokeWidth:"1.5",d:"M 14 0C 12.8955 0 12 0.895447 12 2L 12 12L 2 12C 0.895508 12 0 12.8954 0 14C 0 15.1046 0.895508 16 2 16L 14 16C 15.1045 16 16 15.1046 16 14L 16 2C 16 0.895447 15.1045 0 14 0Z"})});var l=()=>n(751735),c=()=>n(100622),d=()=>n(891279),u=()=>n(158218),p=()=>n(24611);function m(e){let{store:t,resizerType:n,resizerAlignment:m,resizeComponent:h,preserveScale:_,isHovered:b,blockResizerStore:y}=e;const S=(0,i().v3)(),w=(0,i().Y0)(),k=(0,r().uB)(y,d().A),I=(0,r().K8)((()=>!w.isMobile&&b),[w.isMobile,b]),x=(0,r().K8)((()=>{const e={position:"absolute",pointerEvents:I?"auto":"none",display:"flex",alignItems:"center",justifyContent:"center"};return m===u()._l.Right?e.right=0:m===u()._l.Left&&(e.left=0),n===u().f9.Horizontal?(e.top=0,e.zIndex=1,e.height="100%",e.width=g,e.cursor="col-resize"):n===u().f9.Vertical?(e.bottom=0,e.zIndex=1,e.width="100%",e.height=g,e.cursor="row-resize"):n===u().f9.Corner&&(e.zIndex=2,e.bottom=0,e.width=e.height=v,m===u()._l.Left?e.cursor="nesw-resize":m===u()._l.Right&&(e.cursor="nwse-resize")),e}),[m,n,I]),A=(0,o.useMemo)((()=>{const e={position:"absolute"};return n===u().f9.Vertical||n===u().f9.Corner?e.bottom=f:n===u().f9.Horizontal&&(e.top=f),m===u()._l.Left?e.left=f:m===u()._l.Right&&(e.right=f),{...x,style:e}}),[m,x,n]),C=(0,r().K8)((()=>{const{ThemeStore:e}=S,t=e.state.mode,o={opacity:I?1:0,transition:p().Wh,borderRadius:20,background:(0,l().X4)(c().CM[t].black,.6),border:`1px solid ${c().Ay.whiteWithAlpha(.9)}`};return n===u().f9.Horizontal?(o.width=6,o.height=48,o.maxHeight="50%"):n===u().f9.Vertical&&(o.height=6,o.width=48,o.maxWidth="50%"),o}),[S,n,I]),T=(0,o.useMemo)((()=>n===u().f9.Corner?s({stroke:c().Ay.whiteWithAlpha(.5),fill:c().Ay.blackWithAlpha(.65),width:v,height:v,transition:`opacity ${p().Wh}`,opacity:I?1:0,position:"relative",bottom:3,left:m===u()._l.Left?3:-3,transform:m===u()._l.Left?"rotate(90deg)":"none"}):(0,a.jsx)("div",{style:C})),[m,C,n,I]),M=(0,o.useMemo)((()=>({getNode:()=>h.current})),[h]);return(0,a.jsx)(u().Ay,{store:t,preserveScale:_,resizerType:n,resizerAlignment:m,resizeComponent:M,blockResizerStore:k,resizeHorizontally:!0,resizeVertically:!0,disabled:!1,children:(0,a.jsx)("div",{style:A,children:T})})}const g=15,f=0,v=20},233996:(e,t,n)=>{n.d(t,{w:()=>w});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(187015),i=()=>n(677338),r=()=>n(496603),a=()=>n(498212),s=()=>n(939768),l=()=>n(780054),c=()=>n(607859),d=()=>n(524450),u=()=>n(227440),p=()=>n(559378),m=(n(898992),n(354520),n(672577),()=>n(292930)),g=()=>n(209199),f=()=>n(534177);const v="v2";function h(e){let t=[];if(e.length>0){if(t=e.filter((e=>{let{code:t}=e;return(0,g().wo)(t)})),0===t.length)return"en-US";const n=t[0].quality,o=t.filter((e=>{let{quality:t}=e;return t===n}));let i=o.find((e=>"en"===e.code));return i||(i=o[0]),function(e){let t=(0,f().O)(g().fk,e.code)?g().fk[e.code]:g().fk.en;return"es"===e.code?t="ES"===e.region?"es-ES":"es-LA":"zh"===e.code&&(t="TW"===e.region||"HK"===e.region?"zh-TW":"zh-CN"),t}(i)}return"en-US"}function _(e){const t=function(e){return h(m().parse(e))}(e);return`${v}/${t}`}var b=()=>n(508496);function y(){return b().default.getAcceptLanguageHeader()}var S=()=>n(268405);async function w(e){var t,n,m,g;const{device:f}=e,v="currentUser"in e,h=v?e.RouterStore:void 0,b=null==h||null===(t=h.getState())||void 0===t||null===(t=t.route)||void 0===t?void 0:t.name,w=v?e.WindowSizeStore:void 0,k=null==w?void 0:w.state.width,x=null==w?void 0:w.state.height,A=!!v&&function(e){const t=function(e){var t;return(null==e||null===(t=e.currentUser)||void 0===t?void 0:t.id)||e.publicDomainUserId}(e);return Boolean(t)}(e),C=await(0,S().T)(e),{pathname:T,...M}=(0,s().iW)(null===(n=document.location)||void 0===n?void 0:n.href,(0,i().JU)())||{},P={app_version:f.version,desktop_app_version:f.desktopAppVersion,mobile_app_version:f.mobileAppVersion,is_desktop_app_or_browser:!f.isMobile,is_desktop:f.isElectron,is_mobile:f.isMobile,is_tablet:f.isTablet,is_react_native:f.isMobileNative,is_ios:f.isIOS,is_logged_in:A,deviceType:f.os,device_type:f.deviceType,device_os:f.os,platform:f.platform,browser:f.browserName,browser_version:f.browserVersion,browser_version_bucketized:I(f.browserVersion,f.browserName),dnt:null==f?void 0:f.doNotTrackEnabled,device_id:C&&(0,a().ot)(C),tags:(0,i().sY)(),host:null===(m=document.location)||void 0===m?void 0:m.host,route_name:b,notion_top_level_domain:(0,o().z)(null===(g=document.location)||void 0===g?void 0:g.hostname),referrer:document.referrer||"none",accept_language_raw:y(),accept_language_preference:_(y()||""),...M,windowWidth:k,windowHeight:x,isActive:d().A.state.active,is_foreground:document.hasFocus(),fired_during_onboarding:c().default.state.isOnboarding,is_experimental_build:"clientExperimental"===l().A.buildTarget,is_demo:p().A.state.isActive,is_online:u().A.state.online};return{...r().z7(P,r().b0),appSource:"client"}}const k=new Set(["Safari","Mobile Safari"]);function I(e,t){const n=e.split(".");return k.has(t)?n.slice(0,2).join("."):n[0]}},235116:(e,t,n)=>{n.d(t,{I5:()=>v,KE:()=>f,OG:()=>_});var o=()=>n(522419),i=()=>n(825237),r=()=>n(857639),a=()=>n(711059),s=()=>n(763824),l=()=>n(780054),c=()=>n(437219),d=()=>n(518646),u=()=>n(705540),p=()=>n(755636);function m(e){if(!Boolean(e.mobileNative))return!1;const{device:t}=e,n=(0,a().parseMobileAppVersion)(t.mobileAppVersion,t.isAndroid);return!!n&&(t.isIOS?(0,a().isGreaterThanOrEqualToVersion)(n,[0,4,669]):!!t.isAndroid&&(0,a().isGreaterThanOrEqualToVersion)(n,[0,6,735]))}async function g(e,t){return e.device.isElectron||e.device.isMobileNative?await(0,d().k)(e,t,!1):(0,i().Ws)({...t,baseURL:l().A.domainBaseUrl,currentUserId:e.currentUser&&e.currentUser.id})}async function f(e,t){let n=t.url;const a=e.mobileNative&&m(e),l=o()._J(t.url);l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"fetching"}),n=(await s().nQ(i().Eq,g(e,t))).result),n?l&&a?e.mobileNative.showLightBoxV2({url:n,downloadName:t.downloadName,type:"file",from:"download",state:"url_ready"}):l?h({environment:e,url:n}):p().f({environment:e,url:n}):(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:"file",from:"download",state:"error"}),r().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}}))}function v(e,t){const n=e.mobileNative&&m(e);if(o().T8(t)&&n){const n=o().SB({title:void 0,source:t});e.mobileNative.showLightBoxV2({url:void 0,downloadName:n,type:"file",from:"download",state:"fetching"}),e.mobileNative.showLightBoxV2({url:t,downloadName:n,type:"file",from:"download",state:"url_ready"})}else h({environment:e,url:t})}function h(e){const{environment:t,url:n}=e;t.mobileNative?t.mobileNative.openInAppBrowser(n):t.device.isElectron?u().downloadUrl(n):window.location.href=n}async function _(e,t){c().v0(e,{from:"embedded_block_click",type:t.type});let n=t.url;const a=e.mobileNative&&m(e),l=o()._J(t.url);var d;if(l&&(a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"fetching"}),n=(await s().nQ(i().Eq,g(e,t))).result),n)return l&&a?e.mobileNative.showLightBoxV2({url:n,downloadName:t.downloadName,type:t.type,from:t.from,state:"url_ready"}):p().f({environment:e,url:n}),void(null===(d=t.callback)||void 0===d||d.call(t));a&&e.mobileNative.showLightBoxV2({url:void 0,downloadName:t.downloadName,type:t.type,from:t.from,state:"error"}),r().log({level:"error",from:"routerActions",type:"openFileUrl",data:{message:`failed to get url for ${t.url}`}})}},235191:(e,t,n)=>{n.d(t,{Z7:()=>j,UM:()=>R,IL:()=>B,BJ:()=>V,PF:()=>F,H_:()=>U,qV:()=>D,a5:()=>O,yC:()=>L,YO:()=>N,Hj:()=>E});n(944114),n(898992),n(672577);var o=()=>n(687871),i=()=>n(970013),r=()=>n(407730),a=()=>n(651124),s=()=>n(390066),l=()=>n(519831),c=()=>n(931075),d=()=>n(496603),u=()=>n(183558),p=()=>n(534177),m=()=>n(254497),g=()=>n(312296),f=()=>n(519839),v=()=>n(682146),h=()=>n(972435),_=()=>n(470928),b=()=>n(395963),y=()=>n(508496),S=()=>n(53137),w=()=>n(630116),k=()=>n(908447),I=()=>n(989423);var x=()=>n(686526),A=()=>n(36629),C=()=>n(334261),T=()=>n(896628),M=()=>n(751156),P=()=>n(67103);function B(e){const{environment:t,collectionViewArgs:n,collectionStore:a,propertyName:s,propertyType:l,selectOptions:d,transaction:m,propertyId:f,propertySchema:S,propertyGroupId:w}=e,k={},I=a.getSchema(),x=Object.keys(I),A=(0,r().A)(s??v().dC[l],(e=>!x.find((t=>{const n=I[t];return Boolean(n&&n.name===e)}))));let C;if(S&&S.type===l)C=S;else{const e=a.getSpaceId(),n=t.currentUser.id,o=(0,v().hn)({environment:t,userId:n,spaceId:e});if((0,i().hN)(l))switch(l){case"ai_custom_prompt":C={name:A,type:"text",ai_inference:{type:"custom",prompt:"",auto_update_on_edit:o}};break;case"ai_summary":C={name:A,type:"text",ai_inference:{type:"summarize",auto_update_on_edit:o}};break;case"ai_extract":C={name:A,type:"text",ai_inference:{type:"extract",prompt:"",auto_update_on_edit:o}};break;case"ai_translate":C={name:A,type:"text",ai_inference:{type:"translate",targetProperties:["title"],toLanguage:"english",auto_update_on_edit:o}};break;case"ai_keywords":C={name:A,type:"multi_select",select_ai_inference:{type:"multi_select",add_options:!0,auto_update_on_edit:!1}};break;default:(0,p().HB)(l)}else C=!d||"select"!==l&&"multi_select"!==l?{name:A,type:l}:{name:A,type:l,options:d}}const M=a.isPageTreeCollection()&&Boolean(I[o().Z.Owner]),B=y().default.checkGate({gateName:"new_verification_property_id"});let R=f;R||(R=!i().M1(C)||M&&!B?(0,u().Ay)():c()._e.Verification),k[R]=C;if(!((0,_().Io)()&&!a.isPageTreeCollection())&&i().M1(C)){const e=M?o().Z.Owner:c()._e.Owner;x.includes(e)||(k[e]={name:h().A.formatMessage(P().Gl.ownerPropertyName),type:"person",default:"created_by"}),C.verifier_property=e}if(w&&(0,b().En)({collectionStore:a,groupId:w,propertyId:R,transaction:m}),n){const{format:e,formatKey:t,collectionViewStore:o}=n,i=[...e[t]||[],{property:R,visible:!0}];T().zA({stores:[o],update:{[t]:i},transaction:m})}return(0,g().F)({environment:t,collectionStore:a,update:k,transaction:m}),R}function R(e){const{environment:t,collectionStore:n,transaction:o,propertiesToBeAdded:i,collectionViewArgs:r,rootPropertyId:a,integrationId:s}=e,l={},c=[],d=S().A.state;if(!d.loaded)return;const p=d.integrations.find((e=>e.id===s));if(p){for(const e of i){const t={name:e.name,type:"rollup",relation_property:a,target_property:` ${e.id}`,target_property_type:e.type,icon:p.info.icon},n=(0,u().Ay)();l[n]=t,c.push(n)}if(r){const{format:e,formatKey:t,collectionViewStore:n}=r,i=[...e[t]||[],...c.map((e=>({property:e,visible:!0})))];T().zA({stores:[n],update:{[t]:i},transaction:o})}(0,g().F)({environment:t,collectionStore:n,update:l,transaction:o})}}function E(e){const{environment:t,collectionStore:n,property:o,type:r,transaction:a}=e,s=n.getSchema()[o];if(!s||s.type===r)return;const l={...s};l.type=(0,i().v2)(r),(0,g().F)({environment:t,collectionStore:n,update:{[o]:l},transaction:a})}function D(e){const{collectionStore:t,property:n,autoRelate:o,transaction:i}=e;t.getSchema()[n]&&M().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",n,"autoRelate"],command:"set",args:o},transaction:i})}function N(e){const{collectionStore:t,property:n,name:o,transaction:i}=e;t.getSchema()[n]&&M().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",n,"name"],command:"set",args:o},transaction:i})}function L(e){const{collectionStore:t,property:n,icon:o,transaction:i}=e;t.getSchema()[n]&&M().applyOperation({store:t,operation:{pointer:t.pointer,path:["schema",n,"icon"],command:"set",args:o},transaction:i})}function O(e){const{formatStore:t,formatKey:n,property:o,update:i,transaction:r}=e,a=[...t.getFormat()[n]||[]],s=a.findIndex((e=>e.property===o));-1!==s?a[s]={...a[s],...i}:a.push({property:o,...i}),T().zA({stores:t instanceof w().Bv||t instanceof w().md||t instanceof w().pS?[t]:(0,p().HB)(t),update:{[n]:a},transaction:r})}function U(e){const{propertyGroupId:t,collectionContextStore:n,collectionStore:o,environment:r,isInPeekRenderer:l,onCloseMenu:c,pagePropertiesStore:d,propertyVisibility:u}=e,p=n.settingsStore;x().a2({collectionSettingsStore:p,item:{type:"propertyType",propertyGroupId:t,onAccept:(e,m,g,f)=>{if("relation"===e)return void x().a2({collectionSettingsStore:p,item:{type:"selectRelationSource",property:void 0,formatKey:"collection_page_properties",propertyGroupId:t}});const{performResult:v}=M().createAndCommit({userAction:"PageProperties.handleAddPropertyClick",environment:r,canUndo:!0,perform:t=>B({environment:r,collectionStore:o,collectionViewArgs:void 0,propertyType:e,propertyName:g,selectOptions:f,transaction:t})});(t||u)&&M().createAndCommit({userAction:"PageProperties.handleAddPropertyClick.addPropertyToGroupAndUpdateVisibility",environment:r,canUndo:!0,perform:e=>{t&&(0,b().En)({collectionStore:o,groupId:t,propertyId:v,transaction:e}),u&&C().D7({property:v,visibility:u,format:(0,s().L)(o.getFormat(),o.getSchema(),void 0,a().jf.Collection),store:o,transaction:e})}}),null==c||c(v),x().dP({collectionSettingsStore:p,item:{type:"property",formatKey:"collection_page_properties",property:v,selectNameInitial:!r.device.isMobile}}),d.setState({...d.state,openProperty:{property:v,isInPeekRenderer:l},forceShowProperties:!0}),(0,i().hN)(e)&&A().pG({propertyType:e,propertyId:v,collectionContextStore:n}),(0,k().Z)({environment:r,collectionContextStore:n,from:"page_properties",property_type:(0,i().v2)(e),property:(0,i().hN)(e)?e:void 0,is_suggested_property:m})}}})}async function F(e){const{environment:t,collectionStore:n,schema:o,property:r,transaction:a}=e,s=o[r];if(s)if("relation"===s.type&&i().zO(s)&&s.property&&i().zO(s)!==n.id){const e=new(w().md)(t,i().Nv(s));await e.load(),V({environment:t,collectionStore:n,schema:o,property:r,transaction:a,targetCollectionStore:e})}else V({environment:t,collectionStore:n,schema:o,property:r,transaction:a})}function V(e){const{environment:t,collectionStore:n,schema:o,property:i,transaction:r,targetCollectionStore:a,permanentlyDelete:s}=e;if(!n.isDefined())return;const c=Boolean(s),u=f().Cq({environment:t,collectionId:n.id,schema:o,property:i,targetCollectionStore:a,omitNewSchema:!0});if(!u)return;(0,b().it)({collectionStore:n,propertyId:i,transaction:r}),c||(0,m().E)({collectionStore:n,update:u.deletedSchema,transaction:r});let p=d().mg(u.deletedSchema);for(const l in p)p[l]=null;if((0,g().F)({environment:t,collectionStore:n,update:p,transaction:r}),u.otherCollectionId&&u.otherCollectionSchema){c||(0,m().E)({collectionStore:w().md.createChildStore(n,{table:l().Vl,id:u.otherCollectionId}),update:u.otherCollectionDeletedSchema||{},transaction:r}),p=d().mg(u.otherCollectionDeletedSchema||{});for(const e in p)p[e]=null;(0,g().F)({environment:t,collectionStore:w().md.createChildStore(n,{table:l().Vl,id:u.otherCollectionId}),update:p||{},transaction:r})}const v=o[i];("auto_increment_id"===(null==v?void 0:v.type)||c)&&(0,m().E)({collectionStore:n,update:{[i]:null},transaction:r})}function j(e){let{visibility:t,property:n,schema:o,collectionStore:i,format:r,environment:a,transaction:s}=e;const l=r.collection_page_sections?d().mg(r.collection_page_sections):[];if(!o[n])return;const c=l.findIndex((e=>e.section===n));-1!==c?l[c]={section:n,visibility:t}:l.push({section:n,visibility:t}),l&&(M().createAndCommitOrAppend({userAction:"PagePropertiesRowName.handleShowAsClick",environment:a,canUndo:!0,transaction:s,perform:e=>{C().LK({environment:a,pageSectionFormats:l,store:i,transaction:e})}}),function(e,t){I().vd(e,"relation_show_as",t)}(a,{from:"relation_section",mode:"inline"===t?"page_section":"minimal"===t?"minimal_page_section":"property"}))}},235280:(e,t,n)=>{n.d(t,{n:()=>p,q:()=>m});var o=()=>n(763824),i=()=>n(283699),r=(n(16280),()=>n(496603));let a,s,l=!1;function c(){return l}async function d(e){if(l)return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://decagon.ai/loaders/notion.js",t.id="decagon-widget-embed-script";const n=document.getElementsByTagName("script")[0];return null==n||n.parentNode.insertBefore(t,n),new Promise((n=>{t.addEventListener("load",(async t=>{if((0,r().gD)(window.duet))throw new Error("Decagon script not loaded");l=!0,window.duet.setMetadata(e.initArgs),window.duet.setUserId(e.initArgs.userId),await window.duet.hide(),await window.duet.close(),n()}))}))}async function u(e,t,n){if(a)return a;e.planType=t,e.isSalesAssistedPlan=n;const r=(0,o().yX)();a=r.promise,await async function(e){if(!(await i().nQ({service:"zendesk",cookieService:e.cookieService})))return;const t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://solve-widget.forethought.ai/embed.js",t.id="forethought-widget-embed-script",t.setAttribute("data-api-key","c895ee24-2c6c-4ed6-a100-3037e65cadda"),e.initialQuery&&t.setAttribute("initial-query",e.initialQuery);if(t.setAttribute("data-ft-full-name",e.fullName||"Forethought Deflected"),t.setAttribute("data-ft-email",e.email||"forethought@makenotion.com"),e.locale){var n;const o=null===(n=e.locale.split("-")[0])||void 0===n?void 0:n.toLowerCase();o&&t.setAttribute("data-ft-embed-script-language",o)}const o=e.planType||"undefined";"enterprise"===o&&e.isSalesAssistedPlan?(t.setAttribute("data-ft-plan-type","enterprise_free"),t.setAttribute("data-ft-workflow-tag","enterprise_free"),e.initialQuery||t.setAttribute("initial-intent-id","d5cb32d0-3637-4e8e-87fa-c4ea8d79d45f")):(t.setAttribute("data-ft-plan-type",o),t.setAttribute("data-ft-workflow-tag",o));const r=document.getElementsByTagName("script")[0];return null==r||r.parentNode.insertBefore(t,r),window.addEventListener("message",(e=>{var t,n;"forethoughtWidgetClosed"===(null==e||null===(t=e.data)||void 0===t?void 0:t.event)&&(null===(n=Forethought)||void 0===n||n("widget","hide"))})),new Promise((e=>{t.addEventListener("load",(()=>{var t;null===(t=Forethought)||void 0===t||t("widget","hide"),e()}))}))}(e),r.resolve()}async function p(e){if(s)return s;const t=(0,o().yX)();s=t.promise;try{if("forethought"===e.type&&await u({...e.forethoughtInitializeArgs,initialQuery:e.initialQuery},e.userHighestPlanType,e.isSalesAssistedPlan),"decagon"===e.type){!c()&&Boolean(e.decagonInitializeArgs)&&await d({initArgs:e.decagonInitializeArgs})}await async function(e){const{locale:t,cookieService:n}=e;if(!(await i().nQ({service:"zendesk",cookieService:n})))return;const o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://static.zdassets.com/ekr/snippet.js?key=b9ad856d-6b98-4cf5-a2f6-d96e50557722",o.id="ze-snippet";const r=document.getElementsByTagName("script")[0];return null==r||r.parentNode.insertBefore(o,r),new Promise((e=>{o.addEventListener("load",(()=>{const n=window.zE;n&&(n("webWidget","setLocale",t),n("webWidget","hide"),e())}))}))}(e)}catch(n){e.onError&&e.onError(n)}finally{t.resolve()}}async function m(e){if(await p(e),"undefined"!=typeof Forethought)Forethought("widget","show"),Forethought("widget","open");else if(c())e.initialQuery&&window.duet.setInitialUserMessage(e.initialQuery),await window.duet.open();else{let e=window.zE;if(!e)return;e("webWidget","show"),e("webWidget","open"),e("webWidget:on","close",(function(t){e=window.zE,e&&e("webWidget","hide")}))}}},235921:(e,t,n)=>{n.d(t,{A:()=>l,l:()=>i});var o=()=>n(867899);const i="contextualizedOnboardingStateKeyV2";function r(e,t){if("undefined"===e.flowName||e.isInvalidRedirect)return;const{onboardingData:o,password:r,...a}=e;n(763884).K.set({userId:t,key:i,value:a})}class a extends(()=>n(757695))().default{setState(e){var t;super.setState(e);const o=null===(t=n(351360).default.state.currentUserStore)||void 0===t?void 0:t.id;o&&r(e,o)}getInitialState(){return{flowId:n(206267).JW(),flowName:"undefined",currentStageIndex:0,isFirstTimeOnboarding:void 0,joinableSpaces:[],isPasswordRequired:!0,onboardingExperiments:{}}}async goToNextStage(e){const t=await o().F.contextualizedOnboardingHelpers.load(),n=await o().F.contextualizedOnboardingStageHelpers.load();let i=this.state.currentStageIndex+1;const r=t.getStages({flowName:this.state.flowName,environment:e});for(;i<=r.length-1&&await n.shouldSkipCurrentStage({flowName:this.state.flowName,stageIndex:i,environment:e});)i++;if(i<=r.length-1)this.setState({...this.state,currentStageIndex:i});else{if("undefined"===this.state.flowName)return;await this.completeOnboarding(e,"create")}}async goToPreviousStage(e){const t=await o().F.contextualizedOnboardingStageHelpers.load(),n=await t.getPreviousStageIndex({flowName:this.state.flowName,stageIndex:this.state.currentStageIndex,environment:e});n>=0&&this.setState({...this.state,currentStageIndex:n})}async completeOnboarding(e,t){const{onboardingFlowNameToFlowConfig:n}=await o().F.contextualizedOnboardingFlowDefinitions.load(),{defaultOnboardingComplete:i,clearAllOnboardingStates:r}=await o().F.contextualizedOnboardingActions.load(),a=n[this.state.flowName];a.onCompleteFlow?(await a.onCompleteFlow(e,this.state,t),a.persistStoreStateAfterFlowComplete||r(e)):(await i(e,t),r(e))}}const s=new a;(0,n(604341).exposeDebugValue)("contextualizedOnboardingStore",s);const l=s},236030:(e,t,n)=>{n.d(t,{Fh:()=>l,NH:()=>u,PN:()=>d,S8:()=>a,gK:()=>p,hj:()=>c,n1:()=>r,sH:()=>i,tG:()=>s,tz:()=>o});const o=8,i=34,r=42,a=14,s=32,l=s,c=-16,d=400,u="calc(66.66vh - 174px)",p="calc(66.66vh - 50px)"},236262:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,trashIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.806 8.505a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0zm3.488 0a.55.55 0 0 0-1.1 0v5.979a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M6.386 3.925v1.464H3.523a.625.625 0 1 0 0 1.25h.897l.393 8.646A2.425 2.425 0 0 0 7.236 17.6h5.528a2.425 2.425 0 0 0 2.422-2.315l.393-8.646h.898a.625.625 0 1 0 0-1.25h-2.863V3.925c0-.842-.683-1.525-1.525-1.525H7.91c-.842 0-1.524.683-1.524 1.525M7.91 3.65h4.18c.15 0 .274.123.274.275v1.464H7.636V3.925c0-.152.123-.275.274-.275m-.9 2.99h7.318l-.39 8.588a1.175 1.175 0 0 1-1.174 1.122H7.236a1.175 1.175 0 0 1-1.174-1.122l-.39-8.589z"})]})},r=(0,n(340498).wt)("trash",i)},236933:(e,t,n)=>{n.d(t,{E:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{hasWorkspaceAccessError:!1,errorId:void 0}}setState(e){super.setState(e)}}const i=new o},239666:(e,t,n)=>{n.d(t,{W:()=>o});const o={type:"everything",dateRangeFilter:{startDate:void 0,endDate:void 0},createdByFilter:[],titleOnlyFilter:!1,ancestorsFilter:[],teamspacesFilter:[]}},240260:(e,t,n)=>{n.d(t,{k:()=>o});const o=(0,n(296540).createContext)(void 0);o.displayName="PopupOriginContext"},243020:(e,t,n)=>{n.d(t,{d:()=>o});let o=function(e){return e.NotSpecified="NotSpecified",e.CreatorProfile="CreatorProfile",e.SpaceSwitcher="SpaceSwitcher",e.DeleteAccount="DeleteAccount",e.NoAvailableSpaces="NoAvailableSpaces",e.MobileNativeListener="MobileNativeListener",e.LogoutRouteVisited="LogoutRouteVisisted",e.AdminActionSelfLogout="AdminActionSelfLogout",e.AdminLogoutFallThrough="AdminActionFallThrough",e.PublicPageAccessDenied="PublicPageAccessDenied",e.PageAccessDenied="PageAccessDenied",e.OnboardingError="OnboardingError",e.OnboardingExit="OnboardingExit",e.ContextualizedOnboardingExit="ContextualizedOnboardingExit",e.WorkspaceNotAllowed="WorkspaceNotAllowed",e.OrganizationConsoleDenied="OrganizationConsoleDenied",e.LogoutFromMail="LogoutFromMail",e.LogoutFromCalendar="LogoutFromCalendar",e}({})},244309:(e,t,n)=>{n.d(t,{v:()=>i});var o=()=>n(534177);function i(e,t){const{notificationId:n,activityId:i,sessionId:r,from:a,alreadyRead:s}=t,l=function(e){const{alreadyRead:t,from:n}=e;switch(n){case"mark_as_unread":return t?"unread":"no_change";case"read_on_page":case"email":case"mark_as_read":case"add_reaction":case"remove_reaction":case"title":case"body":case"frame":case"archive":case"unarchive":case"open_reply_menu":case"mark_all_as_read":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"main":case"approve_request_access":case"deny_request_access":return t?"no_change":"read";default:return(0,o().HB)(n)}}({alreadyRead:s,from:a});if("no_change"===l)return;const c={notificationId:n,activityId:i,sessionId:r,from:a,target:l};e.DO_NOT_USE_commonTrackEvent({eventName:"mark_notification_as_read",properties:c})}},244471:(e,t,n)=>{n.d(t,{A:()=>D});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(522419),l=()=>n(100622),c=()=>n(496603),d=()=>n(778417),u=()=>n(645873);const p=new(u().O2)("react-pdf",(async()=>{const[e]=await Promise.all([Promise.all([n.e(26346),n.e(65129)]).then(n.bind(n,626346)),Promise.all([n.e(26346),n.e(65129)]).then(n.bind(n,951439))]);return e}));var m=()=>n(109488);n(16280),n(814603),n(147566),n(198721);function g(e,t){return{...e,variantOptions:t.opts&&function(e){const t=new URLSearchParams;for(const[n,o]of Object.entries(e))o&&t.append(n,o.toString());return t}(t.opts),variantMode:t.mode}}var f=()=>n(780054);function v(e,t){return function(e,t,n){const o="s3"===t.mode?`${t.bucket}/${t.key}`:t.url;return g({baseUrl:e,sourceMode:t.mode,sourceLocation:o,searchParams:void 0},n)}(f().A.imageProxy.baseUrl,e,t)}function h(e,t){return`${(n=v(e,t)).baseUrl}${[n.sourceMode,n.sourceLocation,n.variantMode].map(encodeURIComponent).concat(void 0!==n.variantOptions?[n.variantOptions.toString()]:[]).join("/")}${n.searchParams?`?${n.searchParams}`:""}`;var n}var _=()=>n(553965),b=()=>n(836251),y=()=>n(756279),S=()=>n(661179),w=()=>n(331542),k=()=>n(2143),I=()=>n(228927),x=()=>n(419974),A=n(474848);const C={position:"absolute",top:"calc(50% - 9px)",left:"calc(50% - 9px)"},T=200,M=8,P=16,B={INVALID_PASSWORD:2};function R(e){const{value:t}=(0,u().fJ)(p),n=(0,i().v3)(),{device:g}=n,[f,v]=(0,o.useState)(null),[h,R]=(0,o.useState)({ready:!1,pages:0,showPages:0}),[E,D]=(0,o.useState)(e.width),{showPages:N,pages:L}=h,O=(0,a().IS)((()=>({scroller:{position:"relative",height:e.height,maxHeight:g.isMobile?"75vh":void 0,background:l().Ay.uiExtraLightGray,paddingTop:M,paddingBottom:M,paddingLeft:P,paddingRight:P,overflow:"visible"},passwordContainer:{minWidth:80}})),[g.isMobile,e.height]);function U(){d().IU({environment:n})}(0,o.useEffect)((()=>{const t=setTimeout((()=>{D(e.width)}),1e3);return()=>clearTimeout(t)}),[e.width]);const F=(0,r().K8)((()=>Math.min(window.innerWidth,E)-2*P-S().A.state),[E]);function V(e,t){const n=parseInt(t,10);if(n===B.INVALID_PASSWORD){e(prompt("Invalid password. Please try again.")??"")}else v({status:"required",onPassword:e,reason:n})}function j(){if(!f)return;const e=prompt("Enter the password to open this PDF file.");f.onPassword(e??"")}function z(e){e&&e._pdfInfo&&(R({...h,pages:e._pdfInfo.numPages,showPages:1}),v(null))}function H(){R({...h,ready:!0})}function W(e){e<T&&h.ready&&N<L&&R({...h,ready:!1,showPages:N+1})}const{source:q}=e,K=(0,r().K8)((()=>(0,s().T8)(q)&&!(0,b().w6)(n)),[q,n]);if(!t)return null;const{Document:G,Page:$}=t,Y=Boolean(f);return(0,A.jsx)(m().A,{capture:!0,render:e=>(0,A.jsxs)(k().H,{type:y().A.All,style:O.scroller,...(0,_().A)(e,{onMouseDown:U}),children:[Y&&(0,A.jsx)("div",{style:O.passwordContainer,children:(0,A.jsx)(x().Ay,{family:"pdf",error:{type:"document_locked"},onClickLink:j})}),q&&(0,A.jsx)(G,{file:q,loading:Y?(0,A.jsx)("div",{}):(0,A.jsx)(w().A,{legacySize:18,style:C}),onPassword:V,onLoadSuccess:z,options:{cMapUrl:"/notion-assets/cmaps/",cMapPacked:!0,withCredentials:K,isEvalSupported:!1},children:c().y1(h.showPages).map((e=>(0,A.jsx)($,{pageNumber:e+1,width:F,loading:"",renderAnnotationLayer:!1,renderInteractiveForms:!1,onRenderSuccess:H},e+1)))}),(0,A.jsx)(I().A,{onChange:W})]})})}function E(e){const{contentWrapStyle:t,width:o,height:r,blockLocation:a,source:l}=e,c=e.store.pointer,d=(0,i().v3)(),[{value:u}]=(0,n(187174).Yb)((async()=>{if(await n(589994).transactionQueue.awaitRecordTransaction(c),(0,s()._J)(l)){const e=d.device;return await(0,n(518646).k)(d,{url:l,permissionRecord:c,useS3Url:e.isIOS&&e.isMobileNative},Boolean(n(948914).A.state.isNotionProtocolBugFixed))}return h({mode:"ext",url:l},{mode:"raw",opts:void 0})}),[d,c,l]);return(0,A.jsx)("div",{style:t,children:(0,A.jsx)(R,{source:u,width:o||500,height:r||(n(675074).Ox(a)?240:500)})})}const D={render:e=>(0,A.jsx)(E,{...e}),embedGhost:!0,resizable:!0}},245128:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){const{spaceViewStore:t,pageId:n}=e;return!(!t||!n)&&-1!==t.getBookmarkedPageIds().indexOf(n)}},245241:(e,t,n)=>{n.d(t,{$8:()=>M,Iy:()=>p,N2:()=>c,Ni:()=>I,Nz:()=>A,Vz:()=>l,_x:()=>P,fg:()=>s,gG:()=>k,jp:()=>x,m2:()=>u,vm:()=>d,yq:()=>C});var o=()=>n(638681);const i=o().object({required:{type:o().literal("date"),start_date:o().string()},optional:{}}),r=o().union([o().object({required:{starting:i,ending:o().isUndefined()},optional:{}}),o().object({required:{starting:o().isUndefined(),ending:i},optional:{}}),o().object({required:{starting:i,ending:i},optional:{}}),o().object({required:{starting:o().isUndefined(),ending:o().isUndefined()},optional:{}})]),a=o().union([o().array(o().string()),o().object({required:{teamIds:o().array(o().string()),includeSpaceRecords:o().boolean()},optional:{}})]);function s(e){if(e)return Array.isArray(e)?e:e.teamIds?e.teamIds:void 0}o().object({required:{id:o().string(),type:o().union([o().literal("user"),o().literal("permission_group")])},optional:{}});let l=function(e){return e.CollectionsInSpace="CollectionsInSpace",e.BlocksInSpace="BlocksInSpace",e.BlocksInAncestor="BlocksInAncestor",e.BlocksInParent="BlocksInParent",e.BlocksInCollection="BlocksInCollection",e}({});o().object({required:{ancestors:o().array(o().string()),createdBy:o().array(o().string()),editedBy:o().array(o().string()),lastEditedTime:r,createdTime:r},optional:{requireEditPermissions:o().boolean(),isDeletedOnly:o().boolean(),excludeTemplates:o().boolean(),verificationOwners:o().array(o().string()),isAdminModeDeletedPageSearch:o().boolean(),blockTypes:o().minLength(o().array(o().literals(...Object.values(n(700500).xd))),1),inTeams:a,navigableBlockContentOnly:o().boolean(),includePublicPagesWithoutExplicitAccess:o().boolean(),audience:o().array(o().literals("private","shared_internally","shared_externally","shared_to_web")),dev_excludedPages:o().array(o().string()),dev_excludedTeams:o().array(o().string()),parentId:o().string(),databaseType:o().array(o().literals(...n(636090).kw)),adminContentSearchDeletionStatus:o().nonEmpty(o().array(o().literals("in_trash","deleted_from_trash","alive"))),isOfflineOnly:o().boolean()}});function c(e){return{isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,requireEditPermissions:!1,includePublicPagesWithoutExplicitAccess:!1,ancestors:[],parentId:void 0,createdBy:[],editedBy:[],lastEditedTime:{starting:void 0,ending:void 0},createdTime:{starting:void 0,ending:void 0},inTeams:[],...e}}function d(e,t){return{...e,...t,createdTime:{...e.createdTime,...t.createdTime},lastEditedTime:{...e.lastEditedTime,...t.lastEditedTime}}}const u={searchModal:"search_modal",searchModalQueueTask:"search_modal_queue_task"},p=["quick_find","quick_find_public","quick_find_input_change","quick_find_scroll","quick_find_filters","quick_find_ancestor_filter","quick_find_navigational_mode","mini_quick_find","mini_quick_find_prefetch","admin_tool_search_as_user","admin_tool_search_eval","admin_tool_search_eval_mini_quick_find"];const m=["question_answer_context_search","question_answer_limited_content_search"],g=["cron_attachment_search_input_change","cron_attachment_parent_search_input_change","cron_time_collection_views_query"],f=["mail_get_pages"],v=["legacy_searchPagesWithParent","relation_setup_menu"],h=o().union([...p.map(o().literal),...g.map(o().literal),...f.map(o().literal),...m.map(o().literal),...v.map(o().literal),o().literal("ancestor_filter_page_search"),o().literal("trash"),o().literal("verified_pages_settings"),o().literal("link_to_page_block"),o().literal("link_to_collection_block"),o().literal("mention_menu"),o().literal("move_to_menu"),o().literal("public_home_page_menu"),o().literal("relation_menu"),o().literal("link_existing_menu"),o().literal("layout_builder_page_selector"),o().literal("web_clipper"),o().literal("oauth"),o().literal("collection_group_value"),o().literal("collection_settings_source"),o().literal("collection_settings_select_relation_source"),o().literal("admin_search_permanently_deleted_pages"),o().literal("bot_iterate_blocks_in_space"),o().literal("api_unknown"),o().literal("simple_formula_value_page_search"),o().literal("automation_page_picker"),o().literal("automation_collection_picker"),o().literal("admin_content_search"),o().literal("ediscovery_search_api"),o().literal("admin_content_search_export"),o().literal("export_content_analytics"),o().literal("send_to_notion_database_options"),o().literal("send_to_notion_project_options"),o().literal("search_content_analytics"),o().literal("search_unique_id"),o().literal("collection_page_tree_query"),o().literal("assistant_scoped_search_menu"),o().literal("assistant_search_databases"),o().literal("admin_tool_search_as_user"),o().literal("admin_tool_search_eval"),o().literal("debugging"),o().literal("report_bad_search"),o().literal("benchmark_tests"),o().literal("audit_log"),o().literal("ui_doc"),o().literal("unified_find_deep_dive"),o().literal("legal_hold_pages_search"),o().literal("ai_block_v2_page_context_search")]),_=o().union([o().literal("bulk_index_records")]),b=o().union([o().literal("permanently_delete_space")]),y=(o().union([h,_,b]),["lastEdited","created","scroll","id",...Object.keys({pageViewsLast7Days:"pageViews.pageViewsLast7Days",pageViewsLast28Days:"pageViews.pageViewsLast28Days",pageViewsLast90Days:"pageViews.pageViewsLast90Days",pageViewsAllTime:"pageViews.pageViewsAllTime",uniquePageViewsLast7Days:"uniquePageViews.uniquePageViewsLast7Days",uniquePageViewsLast28Days:"uniquePageViews.uniquePageViewsLast28Days",uniquePageViewsLast90Days:"uniquePageViews.uniquePageViewsLast90Days",uniquePageViewsAllTime:"uniquePageViews.uniquePageViewsAllTime"})]),S=o().object({required:{field:o().literals("relevance")},optional:{}}),w=o().object({required:{field:o().literals(...y),direction:o().literals("asc","desc")},optional:{missing:o().union([o().literal("_first"),o().literal("_last"),o().number(),o().boolean(),o().string()]),searchAfter:o().undefinable(o().union([o().number(),o().string()]))}}),k=o().union([S,w]);let I=function(e){return e.Local="local",e.ElasticSearch="es",e.Postgres="pg",e.VectorDBBlock="vector_block",e.VectorDBCollection="vector_collection",e.ElasticsearchRandom="es_random",e.ElasticsearchUniqueID="es_uniqueId",e.ElasticsearchForcedRecentRecall="es_forced_recent_recall",e.NotionUnknown="notion_unknown",e.UniversalUnknown="universal_unknown",e}({});const x=["spacePage","recentVisit","bookmarkedPage","sharedPage","frecencyStore","teamPage","defaultRecordCache","unknown","similarUser1dRecentPages","topPages7dPageView","editedPages1d","similarUsersEditedPages1d","offlinePage"],A=(0,n(959013).YK)({popularThisWeek:{defaultMessage:"Popular this week",id:"search.result.popularThisWeek.badge.text"},mostViewed:{defaultMessage:"Most viewed",id:"search.result.mostViewed.badge.text"},verified:{defaultMessage:"Verified",id:"search.result.verified.badge.text"},verifiedExpired:{defaultMessage:"Verification Expired",id:"search.result.verifiedExpired.badge.text"},template:{defaultMessage:"Template",id:"search.result.template.badge.text"}}),C={RequestFailed:{type:"RequestFailed",message:"Something went wrong."},NoResults:{type:"NoResultsFound",message:"No results found."},Offline:{type:"Offline",message:"Go online for more results."}},T="gzkNfoUU",M=`<${T}>`,P=`</${T}>`},245865:(e,t,n)=>{n.r(t),n.d(t,{cancelEviction:()=>T,subscribe:()=>A,unsubscribe:()=>R,unsubscribeAfterDelay:()=>N,unsubscribeForAllUsers:()=>P});n(16280);var o=()=>n(908006),i=()=>n(857639),r=()=>n(921997),a=()=>n(365233),s=()=>n(720665),l=()=>n(666144),c=()=>n(508496),d=()=>n(589994),u=(n(944114),n(581454),()=>n(643893)),p=()=>n(343473);const m=!1,g=!1,f=60*s().TD,v=15*s().TD;s().TD;class h{constructor(e){this.map=new Map,this.timeoutMs=e}set(e){const{key:t,onTimeout:n,onClear:o,value:i}=e;this.clear(t);const r=window.setTimeout((()=>{this.map.delete(t),null==n||n()}),this.timeoutMs);this.map.set(t,{timeout:r,value:i,onClear:o})}get(e){var t;return null===(t=this.map.get(e))||void 0===t?void 0:t.value}clear(e){const t=this.map.get(e);var n;void 0!==t&&(window.clearTimeout(t.timeout),this.map.delete(e),null===(n=t.onClear)||void 0===n||n.call(t))}has(e){return this.map.has(e)}}const _=new h(f),b=new h(v);var y=()=>n(484975),S=()=>n(941541);const w="recordSubscriptionActions";function k(e,t,n){const o=r().Zg(t);o?null===n||"number"==typeof n?(p().lD&&((0,p().Yl)(t,{latestUpdateTimestamp:Date.now()}),function(e){if(m&&g)return;const t=_.get(e);t&&(t.latestUpdate=Date.now()),b.clear(e)}(t)),I({environment:e,pointer:o,version:n})):i().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{pointer:o,version:n}}}):i().rateLimitedLog({level:"warning",from:"handleRemoteVersionUpdate",type:"ValidationError",data:{key:t,miscDataToConvertToString:{version:n}}})}function I(e){const{environment:t,pointer:n,version:o}=e,i=[void 0,...t.currentUser.loggedInUserIds];for(const r of i){if(u().A.getSubscriptionForRecord({userId:r,pointer:n})){const i=t.defaultRecordCache.inMemoryRecordCache.getVersion({pointer:n,userId:r});if(d().transactionQueue.isPendingTransactionForRecord(n))return void(c().default.checkGate({gateName:"defer_remote_version_update_for_pending_tx"})&&x.deferUntilTransactionIsDone(e));if(c().default.getConfigKey("always_force_refetch_for_specific_tables","tables").includes(n.table))return void l().BB({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:n,userId:r});(null===o||o>i)&&l().sy({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,pointer:n,userId:r})}}}const x=new class{constructor(e){this.recordUpdates=new Map,this.handleRemoteVersionUpdateForPointer=e}deferUntilTransactionIsDone(e){const{pointer:t,version:o}=e,i=n(696706).L3.toKey(t).toString(),r=this.recordUpdates.get(i);if(r)null===r.version||(null===o||o>r.version)&&this.recordUpdates.set(i,e);else{if(!d().transactionQueue.isPendingTransactionForRecord(t))throw new Error("Pending transaction must exist for record");this.recordUpdates.set(i,e),d().transactionQueue.awaitRecordTransaction(t).then((()=>{const e=(0,n(220719).o9)(this.recordUpdates.get(i),"Pending record update for key must exist");this.recordUpdates.delete(i),this.handleRemoteVersionUpdateForPointer(e)}))}}}(I);function A(e){const{pointer:t,userId:n,environment:i}=e,r={pointer:t,userId:n};C(t)||(T({pointer:t,userId:n}),u().A.isSubscribedToRecord(r)||(u().A.addToSubscribedRecords(r),o().default.afterNextFlush((()=>{const o=i.defaultRecordCache.inMemoryRecordCache.getRecord(r);o?M({record:o,...e}):l().sy({environment:i,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,userId:n,pointer:t}).then((t=>{M({record:t,...e})}),(()=>{u().A.removeFromSubscribedRecords(r)}))}))))}function C(e){return!e.id||!e.table||("emptyDroppableKey"===e.id||"placeholder"===e.id)}function T(e){const{pointer:t,userId:n}=e,o={pointer:t,userId:n};C(t)||(u().A.removeFromPendingUnsubscribeRecords(o),y().A.removeFromPendingEvictions(o))}function M(e){const{environment:t,pointer:n,userId:o,record:s}=e,l={pointer:n,userId:o};if(!u().A.isSubscribedToRecord(l))return;const c=r().N8(n);(0,a().A)(c)&&(n.id&&n.table?S().Ay.addListener(c,void 0,(e=>{let{key:n,value:o}=e;return k(t,n,o)}),w,t):i().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:subscribe",type:"KeyValidationError",data:{pointer:n,miscDataToConvertToString:{record:s,key:l,versionsKey:c}}}))}function P(e){for(const t of e.environment.currentUser.loggedInUserIds)R({...e,userId:t})}function B(e){const{pointer:t}=e;if(C(t))return!1;if(!u().A.isSubscribedToRecord(e))return!1;u().A.removeFromSubscribedRecords(e);const n=r().N8(t);return!!(0,a().A)(n)&&(!(!t.id||!t.table)||(i().rateLimitedLog({level:"warning",from:"recordSubscriptionActions:unsubscribe",type:"KeyValidationError",data:{pointer:t,miscDataToConvertToString:{versionsKey:n}}}),!1))}function R(e){const{environment:t}=e;B(e)&&S().Ay.removeListener({key:r().N8(e.pointer),subscriptionId:w},t)}const E=2*s().Xb,D=E;function N(e){const{pointer:t,environment:n,userId:o}=e;if(C(t))return;if(n.defaultRecordCache.inMemoryRecordCache.hasListener(t))return;const i=r().N8(t);if((0,p().Dy)(i)){const e={pointer:t,userId:o};return y().A.addToPendingEvictions(e,Date.now()+D),void(B(e)&&(0,p().zG)(i,w))}u().A.addToPendingUnsubscribeRecords(e,Date.now()+E)}function L(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u().A.forEachPendingUnsubscribeRecord((n=>{let{pointer:o,userId:i,timestamp:r,environment:a}=n;if(r<e){u().A.removeFromPendingUnsubscribeRecords({pointer:o,userId:i});const e={pointer:o,userId:i};t&&console.log("Unsubscribing and evicting",JSON.stringify(o)),R({pointer:o,userId:i,environment:a}),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}})),y().A.forEachPendingEviction((n=>{let{pointer:o,userId:i,timestamp:r,environment:a}=n;if(r<e){y().A.removeFromPendingEvictions({pointer:o,userId:i});const e={pointer:o,userId:i};t&&console.log("Evicting",JSON.stringify(o)),B(e),a.defaultRecordCache.inMemoryRecordCache.deleteRecord(e)}}))}setInterval((()=>{L(Date.now())}),1e4),(0,n(604341).exposeDebugValue)("forceUnsubscribeAndEvictPendingRecords",(()=>{L(1/0,!0)})),setTimeout((()=>{(0,p().UL)((()=>{u().A.forEachPendingUnsubscribeRecord((e=>{let{pointer:t,userId:n,timestamp:o,environment:i}=e;R({pointer:t,userId:n,environment:i});const r={pointer:t,userId:n};y().A.addToPendingEvictions(r,o),u().A.removeFromPendingUnsubscribeRecords(r)}))}))}),0)},246125:(e,t,n)=>{n.d(t,{l:()=>a});var o=n(296540),i=()=>n(221844),r=()=>n(484714);function a(e,t){const{cacheFallback:n,isMockTextStore:a,isTemporaryData:s,onOperationCallback:l,overrideDefaultRecordCache:c}=t??{},d=(0,r().v3)(),{inMemoryRecordCache:u}=d.defaultRecordCache,p=(0,o.useMemo)((()=>{const t=new(i().A)({isTemporaryData:Boolean(s),name:e});return t.isMockTextStore=Boolean(a),n&&t.addCacheFallback(n),c&&u.addCacheOverride(t),t}),[n,u,a,s,e,c]);return(0,o.useEffect)((()=>{p.onOperationCallback=l}),[p,l]),(0,o.useEffect)((()=>function(){n&&p.removeCacheFallback(n),c&&u.removeCacheOverride(p)}),[n,u,p,c]),p}},246826:(e,t,n)=>{n.d(t,{Bn:()=>A,KY:()=>I,Wv:()=>k,eC:()=>w,vt:()=>C,zv:()=>x});n(16280),n(944114);var o=()=>n(701218),i=()=>n(175482),r=()=>n(933449),a=()=>n(416845),s=()=>n(792071),l=()=>n(134025),c=()=>n(212547),d=()=>n(696706),u=()=>n(179034),p=()=>n(439180),m=()=>n(496603),g=()=>n(534177),f=()=>n(518736),v=()=>n(594794),h=()=>n(733166),_=()=>n(351360),b=()=>n(630116),y=()=>n(751156),S=()=>n(838256);function w(e){const{environment:t,table:n,value:o,transaction:i,inMemoryRecordCache:r}=e;if(!o.id){const e=o,i=c().ms.create(n,e),r=c().ms.getSpaceId(i);o.id=(0,v().Z1)({environment:t,table:n,spaceId:r})}const a=o,s=c().ms.create(n,a),l=d().L3.fromRecordWithTable(s),u=b().sk.createUniqueRootStore(t,l,{userId:i.userId,inMemoryRecordCache:r});return y().applyOperation({store:u,operation:{pointer:u.pointer,path:[],command:"set",args:o},transaction:i}),u}function k(e){var t,n;const{environment:o,type:r,properties:s,format:c,permissions:d,transaction:m,inMemoryRecordCache:w,createdByTable:k,createdById:I,createdTime:x,lastEditedByTable:A,lastEditedById:C,lastEditedTime:T}=e;let M=e.tracker;const P=e.spaceId||m.spaceId,B=e.id||(0,v().Z1)({environment:o,table:u().ev,spaceId:P}),R=new(b().Bv)(o,{table:u().ev,id:B,spaceId:P},{userId:m.userId,inMemoryRecordCache:w}),E=(0,f().D8)(R.getSpaceStore());if(!M&&!m.getUserFlowForAnalyticsPurposesOnly()){const e="page"===r?"user_flow_create_page":"user_flow_create_block";M=new(S().UF)({environment:o,entryPointName:"recordActions.createBlock",userFlow:e,succeedOnEnqueue:!0})}null===(t=M)||void 0===t||t.track(R.pointer,m);const D=null===(n=_().default.state.currentUserStore)||void 0===n?void 0:n.pointer,N=i().VC({block:{id:B,type:r,permissions:d,properties:s,format:c,space_id:P,created_time:x??Date.now(),created_by_table:k??(null==D?void 0:D.table),created_by_id:I??(null==D?void 0:D.id),last_edited_time:T??void 0,last_edited_by_table:A??void 0,last_edited_by_id:C??void 0},useCrdt:E});for(const i of N)(0,l().$Y)(i)?y().applyOperation({store:R,operation:i,transaction:m}):(0,p().ph)(i)?y().applyCrdtTextOperation({store:R,operation:i,invertedOperation:void 0,transaction:m}):(0,g().HB)(i);return m.postPerformAssertions.push((function(){if(m.isLocal)return;if(!R.getParentStore())throw new(a().yI4)(`Created block was not given a parent before being committed in transaction ${m.getUserActionForAnalyticsPurposesOnly()}`)})),(0,h().v)({environment:o,store:R}),R}function I(e){const{store:t,value:n,transaction:o}=e,i=t.path;y().applyOperation({store:t,operation:{pointer:t.pointer,path:i,command:"set",args:n??null},transaction:o})}function x(e){const{store:t,transaction:n}=e,i=t.path;let r=e.data;r&&t.table===u().ev&&(m().n4(i,[])?(r=function(e){const{properties:t,format:n,crdt_data:o,crdt_format_version:i,...r}=e;return r}(r),r=o().hA(r)):m().n4(i,["properties"])&&("title"in r||(r=o().hA(r)))),y().applyOperation({store:t,operation:{pointer:t.pointer,path:i,command:"update",args:r},transaction:n})}function A(e){const{store:t,source:n,fileIds:o,transaction:i}=e,r=t.path;for(const a of o)y().applyOperation({store:t,operation:{pointer:t.pointer,path:r,command:"copyFile",args:{source:n,fileId:a}},transaction:i})}function C(e){let{environment:t,table:n,args:o,transaction:i,inMemoryRecordCache:a}=e;const l=s().JUt[n],{model:c,operations:d}=l.create(o),m=b().sk.createUniqueRootStore(t,c.pointer,{userId:i.userId,inMemoryRecordCache:a});for(const s of d)(0,p().ph)(s)?y().applyCrdtTextOperation({store:(0,r().Wg)(m,(e=>e.table===u().ev),`Expected "${u().ev}", got "${m.table}"`),operation:s,invertedOperation:void 0,transaction:i}):y().applyOperation({store:m,operation:s,transaction:i});return m}},247450:(e,t,n)=>{n.d(t,{h:()=>i});var o=()=>n(792415);function i(e){var t;let{blockId:n,setting:i}=e;const{publicPageData:r}=o().A.state;if((null==r?void 0:r.pageId)!==n)return;return null===(t=r.securitySettings)||void 0===t?void 0:t[i]}},248566:(e,t,n)=>{function o(){return!0===window.__mobileAppBackgroundLaunch}n.d(t,{A:()=>o})},249349:(e,t,n)=>{n.d(t,{j:()=>d});n(898992),n(354520);var o=()=>n(785082),i=()=>n(878523),r=()=>n(246826),a=()=>n(372154),s=()=>n(606846),l=()=>n(94953),c=()=>n(807060);function d(e){var t,n,d;const{environment:u,commentStore:p,discussionStore:m,transaction:g,discussionLocation:f}=e;if(a().A.state.open){var v;const e=null===(v=a().A.state.discussionIds)||void 0===v?void 0:v.filter((e=>e!==m.id));a().A.setState({...a().A.state,discussionIds:e,open:((null==e?void 0:e.length)||0)>0})}r().zv({store:m,data:{resolved:!0},transaction:g}),l().A.setState({...l().A.state,discussionIds:(null===(t=l().A.state)||void 0===t||null===(t=t.discussionIds)||void 0===t?void 0:t.filter((e=>e!==m.id)))||[]});const h=o().eR.includes(f),_=null==m||null===(n=m.getParentStore())||void 0===n?void 0:n.getNavigableBlockStore(),b=m.getPropertyId(),y=m.getParentStore(),{property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:x}=(0,c().q)(b,y);i().MR(u,{comment_id:null==p?void 0:p.id,discussion_id:m.id,discussion_type:m.getType(),parent_block_id:m.getParentId(),resolution_type:e.resolutionType,from:e.discussionLocation,parent_collection_id:null===(d=m.getParentStore())||void 0===d?void 0:d.getParentCollectionIdUpToTwoLevels(),...h&&{inbox_session_id:s().Ay.state.sessionId,notification_page_id:null==_?void 0:_.id},property_type:S,collection_id:w,collection_view_id:k,view_type:I,collection_view_block_id:x})}},249506:(e,t,n)=>{n.d(t,{W:()=>o,c:()=>i});const o={text:!0,bulleted_list:!0,numbered_list:!0,quote:!0,to_do:!0,header:!0,sub_header:!0,sub_sub_header:!0,callout:!0,toggle:!0,table:!0,equation:!0,code:!0,file:!0,pdf:!0,image:!0},i={...o}},250064:(e,t,n)=>{n.d(t,{l:()=>r});var o=()=>n(972435);const i=(0,n(959013).YK)({twoItems:{id:"formatSettings.twoItems",defaultMessage:"{item1} and {item2}"},threeOrMoreItems:{id:"formatSettings.threeOrMoreItems",defaultMessage:"{item1}, and {numberOfOther} others"},twoItemsWithAmpersand:{id:"formatSettings.twoItems.withAmpersand",defaultMessage:"{item1} & {item2}"},threeOrMoreItemsWithAmpersand:{id:"formatSettings.threeOrMoreItems.withAmpersand",defaultMessage:"{item1}, & {numberOfOther} others"},threeOrMoreItemsWithAmpersandAndRemoveComma:{id:"formatSettings.threeOrMoreItems.withAmpersandAndRemoveComma",defaultMessage:"{item1} & {numberOfOther} others"}});function r(e,t){const{removeComma:n,useAmpersand:r}=t||{};if(0===e.length)return"";const a=e[0];if(1===e.length)return a;const s=e[1];if(2===e.length)return r?o().A.formatMessage(i.twoItemsWithAmpersand,{item1:a,item2:s}):o().A.formatMessage(i.twoItems,{item1:a,item2:s});const l=e.length-1;return r?n?o().A.formatMessage(i.threeOrMoreItemsWithAmpersandAndRemoveComma,{item1:a,numberOfOther:l}):o().A.formatMessage(i.threeOrMoreItemsWithAmpersand,{item1:a,numberOfOther:l}):o().A.formatMessage(i.threeOrMoreItems,{item1:a,numberOfOther:l})}},250182:(e,t,n)=>{async function o(){const e={};if(!window.__isElectron)return{};const t=window.__desktopDeviceInfo;if(t)e.desktopOsVersion=t.os,e.desktopKernelVersion=t.kernel,e.desktopElectronVersion=t.electron,e.desktopChromiumVersion=t.chromium,e.desktopArch=t.arch,e.desktopPlatform=t.platform;else{const t=["architecture","fullVersionList","platformVersion"],o=await navigator.userAgentData.getHighEntropyValues(t);e.desktopArch="arm"===(n=o.architecture)?"arm64":n,e.desktopOsVersion=o.platformVersion,e.desktopPlatform=window.__platform;const i=navigator.userAgent.match(/Chrome\/([\d.]+)/);e.desktopChromiumVersion=i?i[1]:"Unknown";const r=navigator.userAgent.match(/Electron\/([\d.]+)/);e.desktopElectronVersion=r?r[1]:"Unknown"}var n;return e}n.r(t),n.d(t,{getDesktopDeviceInfo:()=>o})},250484:(e,t,n)=>{n.d(t,{Ay:()=>s,ZK:()=>i});var o=()=>n(245241);const i=20;let r=function(e){return e.Default="Default",e.Results="Results",e}({});class a extends(()=>n(757695))().default{constructor(){super(...arguments),this.resetQuery=e=>{let{resetFilters:t}=e;this.setState({...this.state,query:{...this.state.query,text:"",...t&&{filters:(0,o().N2)()}},limit:i,source:"quick_find_input_change"})},this.resetFilters=()=>{this.update((e=>({...e,query:{...e.query,filters:(0,o().N2)()}})))},this.updateFilters=e=>{const t=this.state.query.filters,n=(0,o().vm)(t,e);this.setState({...this.state,query:{...this.state.query,filters:n},limit:i,source:"quick_find_filters"})},this.setIsAnyPopupOpen=e=>{this.update((t=>({...t,isPopupOpen:e})))},this.expandFilterBar=()=>{this.updateFilterBarVisibilityState(!0)},this.collapseFilterBar=()=>{this.updateFilterBarVisibilityState(!1)},this.updateFilterBarVisibilityState=e=>{var t;this.update((t=>({...t,filterBar:{...t.filterBar,show:e}})));const o=null===(t=n(351360).default.state.currentUserStore)||void 0===t?void 0:t.id;o&&n(763884).K.set({userId:o,key:n(620333).lv,value:e})},this.updateQueryText=e=>{this.setState({...this.state,query:{...this.state.query,text:e},limit:i,source:"quick_find_input_change"})},this.switchToSearchPane=()=>{this.setState({...this.state,mode:"search"})}}getInitialState(){return{mode:"search",isSidePeekPanelOpen:!1,isDebugSidebarOpen:!1,query:{text:"",filters:(0,o().N2)(),sort:{field:"relevance"}},limit:i,source:"quick_find",hasScrolled:!1,filterBar:{order:["titleToggle","personFilter","teamsFilter","pageFilter","dateFilter","dev_notInPageFilter","dev_notInTeamFilter"],show:!0},isPopupOpen:!1}}updateFilterOrder(e){this.setState({...this.state,filterBar:{...this.state.filterBar,order:e}})}hasQuery(){return Boolean(this.state.query.text)}isDebugSidebarOpen(){return this.state.isDebugSidebarOpen}enableNavigationalMode(){const e=this.state.query.filters,t=(0,o().vm)(e,{navigableBlockContentOnly:!0});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find_navigational_mode"})}disableNavigationalMode(){const e=this.state.query.filters,t=(0,o().vm)(e,{navigableBlockContentOnly:!1});this.setState({...this.state,query:{...this.state.query,filters:t},source:"quick_find"})}}a.Mode=r;const s=new a},251057:(e,t,n)=>{n.d(t,{_w:()=>a,dK:()=>s});n(581454);var o=()=>n(588165),i=()=>n(484392),r=()=>n(534177);function a(e){const{environment:t,forTooltip:n}=e;let o;o=n?t.device.isMac?"command":"control":t.device.isMac?"⌘":"ctrl";let i,r="shift";n||(r="⇧"),i=n?t.device.isMac?"option":"alt":t.device.isMac?"⌥":"alt";let a="control";return n||(a="⌃"),{command:o,enter:"↵",delete:"del",backspace:"del",esc:"escape",left:"←",right:"→",up:"↑",down:"↓",tab:"⇥",alt:i,shift:r,ctrl:a}}function s(e){const{name:t,environment:n,onlyShowFirst:s,forTooltip:l}=e,c=function(e,t){let n=(0,o().c)(t.device,e);return Array.isArray(n)||(n=[n]),n.map((e=>e.split("+")))}(t,n),d=a({environment:n,forTooltip:l});return c.map((e=>e.map((e=>function(e){const{shortcut:t,shortcutItemMap:n}=e;let o=t;return(0,r().O)(n,t)&&(o=n[t]),(0,i().A)(o)}({shortcutItemMap:d,shortcut:e}))).join("+"))).slice(0,s?1:void 0).join(" or ")}},251126:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(847249),r=()=>n(187174),a=()=>n(496603),s=()=>n(534177),l=n(474848);function c(e){const{performRequest:t,request:n}=e;return{request:function(e){const t=(0,o.useRef)(e);return a().n4(t.current,e)||(t.current=e),t.current}(n),performRequest:(0,o.useCallback)(t,[n])}}function d(e){const{request:t,performRequest:n,render:d,requestStore:u,debounce:p,throttle:m,interval:g,debugName:f}=e,[v,h]=function(e){const{performRequest:t,request:n,options:o}=e,{performRequest:i,request:a}=c({performRequest:t,request:n});return(0,r().Yb)((()=>i(a)),[i,a],o)}({performRequest:n,request:t,options:{debounce:p,throttle:m,interval:g,debugName:f}});(0,o.useEffect)((()=>{if(u){u.refresh=()=>h().then((()=>{}));let e={};"idle"===v.status?e={request:t,ready:!1,loading:!1}:"pending"===v.status?e={request:t,ready:!1,loading:!0}:"resolved"===v.status?e={request:t,error:void 0,result:v.value,ready:!0,loading:!1}:"rejected"===v.status?e={request:t,error:v.error,result:void 0,ready:!0,loading:!1}:(0,s().HB)(v);const n={...u.state,...e};a().n4(u.state,n)||u.setState(n)}}));const _=(0,i().K8)((()=>d(v.error,v.value,"pending"!==v.status&&"idle"!==v.status)),[d,v.error,v.value,v.status]);return(0,l.jsx)(o.Fragment,{children:void 0===_?null:_})}},252105:(e,t,n)=>{n.d(t,{$7:()=>ie,$X:()=>L,AF:()=>U,Ak:()=>de,BK:()=>H,C3:()=>P,CK:()=>w,D5:()=>x,Ds:()=>ce,Fp:()=>D,G3:()=>C,GB:()=>F,Gh:()=>ue,Gk:()=>Y,Gs:()=>R,Hh:()=>_,Hk:()=>G,Hm:()=>ee,Jq:()=>V,OC:()=>j,QP:()=>X,VG:()=>A,Vq:()=>y,WB:()=>O,_M:()=>ne,_w:()=>h,ab:()=>te,ae:()=>M,bT:()=>B,cJ:()=>k,cr:()=>z,dI:()=>E,go:()=>re,hq:()=>ae,jr:()=>J,kU:()=>le,m4:()=>T,o6:()=>Q,oC:()=>$,pT:()=>K,pp:()=>Z,qC:()=>N,qv:()=>I,tt:()=>q,u4:()=>pe,wD:()=>b,wJ:()=>S,xF:()=>oe,xN:()=>W,yF:()=>se});var o=()=>n(244641),i=()=>n(861017),r=()=>n(807487),a=()=>n(498212),s=()=>n(720665),l=()=>n(705540),c=()=>n(780054),d=()=>n(989423),u=()=>n(680074),p=()=>n(640653),m=()=>n(508496),g=()=>n(807778),f=()=>n(10984),v=()=>n(337240);function h(e){d().vd(e,"pricing_grid_view_end"),m().default.logEvent("pricing_grid_view_end")}function _(e,t){d().vd(e,"subscription_update_modal_open",t),m().default.logEvent("subscription_update_modal_open",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function b(e,t){d().vd(e,"subscription_update_modal_confirmation_click",{modal_id:t.modalId}),m().default.logEvent("subscription_update_modal_confirmation_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function y(e,t){d().vd(e,"subscription_update_modal_exit",{modal_id:t.modalId}),m().default.logEvent("subscription_update_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function S(e,t){d().vd(e,"subscription_update_modal_expand_billing_summary",{modal_id:t.modalId}),m().default.logEvent("subscription_update_modal_expand_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function w(e,t){d().vd(e,"subscription_update_modal_hide_billing_summary",{modal_id:t.modalId}),m().default.logEvent("subscription_update_modal_hide_billing_summary",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function k(e){d().vd(e,"subscription_billing_dismissed"),m().default.logEvent("subscription_billing_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function I(e,t){d().vd(e,"subscription_billing_opened",t),m().default.logEvent("subscription_billing_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function x(e){d().vd(e,"subscription_plans_dismissed"),m().default.logEvent("subscription_plans_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function A(e,t){d().vd(e,"subscription_plans_opened",t),m().default.logEvent("subscription_plans_opened",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function C(e){d().vd(e,"currently_subscribed")}function T(e,t){d().u4({environment:e,event:{eventName:"subscription_upgrade_modal_present_price",eventProperties:{external_id:t.externalId}}})}function M(e,t){d().vd(e,"subscription_upgrade_modal_open",t),m().default.logEvent("subscription_upgrade_modal_open",void 0,t)}function P(e,t){const{event:n,modal_id:o,modal_type:i}=t,r={...(0,s().Om)(n),modal_id:o,modal_type:i};d().vd(e,"subscription_upgrade_modal_payment_element_changed",r),m().default.logEvent("subscription_upgrade_modal_payment_element_changed",void 0,{...r,device_os:e.device.os,platform:e.device.platform})}function B(e,t){d().vd(e,"subscription_upgrade_modal_billing_interval_updated",t),m().default.logEvent("subscription_upgrade_modal_billing_interval_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function R(e,t){d().vd(e,"subscription_upgrade_modal_add_on_features_updated",t),m().default.logEvent("subscription_upgrade_modal_add_on_features_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function E(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_accepted",t),m().default.logEvent("subscription_upgrade_modal_upgrade_accepted",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function D(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_click",t),m().default.logEvent("subscription_upgrade_modal_upgrade_click",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function N(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_validation",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_validation",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function L(e,t){d().vd(e,"subscription_upgrade_onboarding_failed_validation",t)}function O(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_payment",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function U(e){d().vd(e,"subscription_upgrade_onboarding_failed_payment")}function F(e,t){d().vd(e,"subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",t),m().default.logEvent("subscription_upgrade_modal_upgrade_failed_payment_recovery_initiated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function V(e,t){d().vd(e,"subscription_upgrade_modal_address_form_updated",t),m().default.logEvent("subscription_upgrade_modal_address_form_updated",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function j(e,t){d().vd(e,"subscription_upgrade_modal_exit",t),m().default.logEvent("subscription_upgrade_modal_exit",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function z(e,t){d().vd(e,"subscription_upgrade_modal_stripe_error",t),m().default.logEvent("subscription_upgrade_modal_stripe_error",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function H(e,t){d().u4({environment:e,event:{eventName:"create_subscription",eventProperties:t}}),m().default.logEvent("create_subscription",t.plan,t)}async function W(e,t){var n,s,f,h;const _=u().FX(),b=await(0,p().Pu)({environment:e,spaceId:t.spaceId})??1,y=!!t.trialEndDate&&t.trialEndDate>=o().c9.now();d().vd(e,"update_subscription_tier",{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,is_professional_team:t.isProfessionalTeamUser,domain_type:_,space_visible_members:b,is_trial:t.isTrial,is_mid_trial:y,is_mm_or_ent_trial:t.isMmOrEnt,trial_end_date:null==t?void 0:t.trialEndDate,trial_id:null===(n=t.trialData)||void 0===n?void 0:n.id,trial_from:null===(s=t.trialData)||void 0===s?void 0:s.from,modal_id:t.modalId}),m().default.logEvent("update_subscription_tier",void 0,{from:t.from,action:t.action,old_subscription_tier:t.oldSubscriptionTier,new_subscription_tier:t.newSubscriptionTier,old_price_id:t.oldPriceId,new_price_id:t.newPriceId,old_currency:t.oldCurrency,new_currency:t.newCurrency,old_add_ons:t.oldAddOns,new_add_ons:t.newAddOns,old_billing_interval:t.oldBillingInterval,new_billing_interval:t.newBillingInterval,is_cancel_subscription:t.isCancelSubscription,space_visible_members:b,is_trial:t.isTrial,is_mid_trial:y,trial_end_date:null==t?void 0:t.trialEndDate,device_os:e.device.os,platform:e.device.platform,is_mm_or_ent_trial:t.isMmOrEnt,modal_id:t.modalId});const S=null===(f=t.oldAddOns)||void 0===f?void 0:f.includes("ai"),w=null===(h=t.newAddOns)||void 0===h?void 0:h.includes("ai");if(!S&&w&&(d().vd(e,"ai_addon_purchased",t),v().FI(e)),!t.oldSubscriptionTier||!t.newSubscriptionTier)return;const{device:k}=e;if(!(0,r()._6)(t.oldSubscriptionTier)&&(0,r()._6)(t.newSubscriptionTier)&&"personal"!==t.newSubscriptionTier){const n={country:t.addressCountry,productName:t.newPriceId,price:t.creditAmount||0,spaceId:(0,a().Xw)(t.spaceId),deviceType:k.isTablet?"tablet":k.isMobile?"mobile":"desktop",subscriptionTier:t.newSubscriptionTier};if("professional"===_&&d().vd(e,"professional_workspace_upgraded",t),d().vd(e,"workspace_upgraded",t),v().lg(e,{...n,domainType:_}),"professional"===_&&v().G0(e),"team"===t.planType&&(d().vd(e,"team_workspace_upgraded",t),v().KP(e)),e.device.isElectron&&!(0,g().Pe)()){const o=(0,i().YO)(c().A.domainBaseUrl,{deviceId:await d().TZ(e),oldSubscriptionTier:t.oldSubscriptionTier,newSubscriptionTier:t.newSubscriptionTier,isProfessionalTeamUser:t.isProfessionalTeamUser,deviceType:e.device.deviceType,domainType:_,eventData:n});return void l().openExternalUrl(o)}}}function q(e,t){d().vd(e,"subscription_update_plan",t),m().default.logEvent("subscription_update_plan",void 0,t)}function K(e,t){d().vd(e,"subscription_update_billing",t),m().default.logEvent("subscription_update_billing",void 0,t)}function G(e,t){const{firstName:n,email:o,...i}=t;d().vd(e,"enterprise_sales_contact",{...i,enterprise_name:n,enterprise_email:o}),m().default.logEvent("enterprise_sales_contact")}function $(e,t){d().vd(e,"enterprise_sales_contact_opened",t)}function Y(e){d().u4({environment:e,event:{eventName:"enterprise_sales_contact_dismissed",eventProperties:{}}})}function Q(e,t){d().vd(e,"enterprise_sales_contact_updated",t)}function Z(e,t){d().vd(e,"cancel_subscription",t),m().default.logEvent("cancel_subscription",void 0,t)}function X(e,t){d().vd(e,"click_upgrade_button",t),m().default.logEvent("click_upgrade_button",void 0,t)}function J(e,t){d().vd(e,"plan_cta_click",t),m().default.logEvent("plan_cta_click",void 0,t)}function ee(e){d().vd(e,"compare_all_features_click"),m().default.logEvent("compare_all_features_click",void 0)}function te(e,t){d().u4({environment:e,event:{eventName:"block_limit_banner_viewed",eventProperties:t}})}function ne(e){d().WU(e,"approaching_block_limit","approaching_block_limit",60)}function oe(e){const t=d().WU(e,"reach_block_limit","reach_block_limit",60);m().default.logEvent("reach_block_limit",1),t&&d().mt(e,{reach_block_limit:!0,reach_block_limit_time:Date.now(),subscription_tier:f().AI()})}function ie(e,t){d().vd(e,"add_on_update_click",t)}function re(e,t){d().vd(e,"member_requested_ai_addon",t),m().default.logEvent("member_requested_ai_addon",void 0,{...t,device_os:e.device.os,platform:e.device.platform})}function ae(e,t){d().u4({environment:e,event:{eventName:"student_ai_offer_viewed",eventProperties:t}}),m().default.logEvent("student_ai_offer_viewed",void 0,{device_os:e.device.os,platform:e.device.platform})}function se(e){d().u4({environment:e,event:{eventName:"student_ai_popup_dismissed",eventProperties:{}}}),m().default.logEvent("student_ai_popup_dismissed",void 0,{device_os:e.device.os,platform:e.device.platform})}function le(e,t){d().vd(e,"partner_trial_signup",t),m().default.logEvent("partner_trial_signup",void 0,{...t})}function ce(e){d().vd(e,"cancel_trial_button_clicked"),m().default.logEvent("cancel_trial_button_clicked",void 0)}function de(e,t){d().u4({environment:e,event:{eventName:"onboarding_trial_offer_accepted",eventProperties:t}})}function ue(e,t,n){d().WU(e,"subscription_uncollectible_blurred_experience_displayed","subscription_uncollectible_blurred_experience_displayed",300,{is_workspace_owner:t,overdue_invoice_count:n})}function pe(e,t){const n=t.name,o="args"in t?t.args:void 0;d().vd(e,n,o)}},252651:(e,t,n)=>{n.d(t,{js:()=>y,x6:()=>b});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);var o=()=>n(534177),i=()=>n(310442),r=()=>n(179034),a=()=>n(824862),s=()=>n(96689),l=()=>n(296900),c=()=>n(437607),d=()=>n(848538),u=()=>n(854150),p=()=>n(798880);n(16280);class m{constructor(e){this.agentPointer=void 0,this.logErrorFn=void 0;const{agentPointer:t,logErrorFn:n}=e;this.agentPointer=t,this.logErrorFn=n}getActorPointer(){return this.agentPointer}getSpaceRole(e){return"none"}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}function g(e){const{undecoratedGetRecordModel:t,logErrorFn:o,from:i}=e;return n(792071).b4_.fromMonomorphicFunctionUnsafe((e=>{const n=t(e);return void 0===n&&"space_user"!==e.table&&"space_bot"!==e.table&&"space_permission_group"!==e.table&&"space_permission_group_member"!==e.table&&o({from:i,type:"NecessaryRecordWasNotProvided",error:new Error(`${i} needed the following record: ${e.table}/${e.id}, but it was not provided`),data:e}),n}),t.getRecordValue)}class f{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"BotActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}constructor(e){this.botPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.memoizedSpaceRoles=void 0,this.relevantEntities=void 0;const{botPointer:t,getRecordModel:n,logErrorFn:o,relevantEntities:i}=e;this.botPointer=t,this.logErrorFn=o,this.getRecordModel=g({undecoratedGetRecordModel:n,logErrorFn:o,from:"BotActorMembership"}),this.memoizedSpaceRoles={},this.relevantEntities=i}getActorPointer(){return this.botPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const n=this.getRecordModel((0,l().gZ)({botId:this.botPointer.id,spaceId:e})),o=void 0===n?"none":n.membership_type;return this.memoizedSpaceRoles[e]=o,this.memoizedSpaceRoles[e]}getTeamRole(e){return"none"}getGroupRole(e){return"none"}}n(944114),n(354520),n(737550);class v{logIfUnexpectedSpace(e){this.relevantEntities.relevantSpaceIds.has(e)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantSpaceRequested",error:new Error(`Space role was requested for ${e}, which was not a pre-determined "relevant" space id`),data:{spaceId:e}})}logIfUnexpectedTeam(e){const{teamId:t,spaceId:n}=e;[...this.relevantEntities.relevantTeamIds.values()].some((e=>e.has(t)))||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantTeamRequested",error:new Error(`Team role was requested for ${t}, which was not a pre-determined "relevant" team id`),data:{teamId:t,spaceId:n}})}logIfUnexpectedGroup(e){var t;const{groupId:n,spaceId:o}=e;null!==(t=this.relevantEntities.relevantGroupIds.get(o))&&void 0!==t&&t.has(n)||this.logErrorFn({from:"UserActorMembership",type:"NonRelevantGroupRequested",error:new Error(`Group role was requested for ${n}, which was not a pre-determined "relevant" group id`),data:e})}constructor(e){this.userPointer=void 0,this.getRecordModel=void 0,this.logErrorFn=void 0,this.relevantEntities=void 0,this.memoizedSpaceRoles=void 0,this.memoizedTeamRoles=void 0,this.memoizedSpaceToGroupMembership=void 0;const{userPointer:t,getRecordModel:n,logErrorFn:o,relevantEntities:i}=e;this.userPointer=t,this.getRecordModel=g({undecoratedGetRecordModel:n,logErrorFn:o,from:"UserActorMembership"}),this.logErrorFn=o,this.relevantEntities=i,this.memoizedSpaceRoles={},this.memoizedTeamRoles={},this.memoizedSpaceToGroupMembership={}}getActorPointer(){return this.userPointer}getSpaceRole(e){this.logIfUnexpectedSpace(e);const t=this.memoizedSpaceRoles[e];if(void 0!==t)return t;const n=this.getRecordModel((0,d().i1)({userId:this.userPointer.id,spaceId:e})),o=void 0===n?"none":n.membership_type;return this.memoizedSpaceRoles[e]=o,this.memoizedSpaceRoles[e]}getTeamRole(e){const{teamId:t,spaceId:i}=e;this.logIfUnexpectedTeam({teamId:t,spaceId:i});const r=this.memoizedTeamRoles[t];if(void 0!==r)return r;const a=this.getRecordModel({table:u().yK,id:t,spaceId:i});if(void 0===a||a.getSpaceId()!==i)return this.memoizedTeamRoles[t]="none",this.memoizedTeamRoles[t];const s=this.getSpaceRole(a.getSpaceId()),l=(0,d().MN)(s);let c=[];l&&a.isDefault()&&c.push("member"),a.getRawMembership().forEach((e=>{if("user"===e.entity_type)e.user_id===this.userPointer.id&&c.push(e.type);else if("group"===e.entity_type)if("owner"===e.type||"member"===e.type){"none"!==this.getGroupRole({spaceId:a.getSpaceId(),groupId:e.group_id})&&c.push(e.type)}else(0,o().HB)(e.type);else(0,o().HB)(e)})),l||(c=c.filter((e=>"team_level_guest"===e)));const p=(0,n(468006).eF)(...c);return this.memoizedTeamRoles[t]=p,this.memoizedTeamRoles[t]}getGroupRole(e){const{groupId:t,spaceId:o}=e;this.logIfUnexpectedGroup({groupId:t,spaceId:o});const i=this.getSpaceRole(o);if(!(0,d().MN)(i))return"none";const r=this.getRecordModel({table:c().n,id:(0,c().T1)({spacePermissionGroupId:t,spaceId:o}),spaceId:o});if(!r||!r.isAlive())return"none";const a=this.memoizedSpaceToGroupMembership[o];if(a&&a[t])return a[t];a||(this.memoizedSpaceToGroupMembership[o]={});const s=this.getRecordModel((0,n(158009).BZ)({spacePermissionGroupId:t,userId:this.userPointer.id,spaceId:o}));return s&&s.isAlive()?this.memoizedSpaceToGroupMembership[o][t]="member":this.memoizedSpaceToGroupMembership[o][t]="none",this.memoizedSpaceToGroupMembership[o][t]}}class h{constructor(e){this.userActorMemberships=void 0,this.botActorMemberships=void 0,this.agentActorMemberships=void 0,this.logErrorFn=void 0;const{logErrorFn:t,relevantEntities:n,getRecordModel:r,actorPointers:s}=e;this.userActorMemberships={},this.botActorMemberships={},this.agentActorMemberships={},this.logErrorFn=t;for(const l of s)l.table===p().oo?this.userActorMemberships[l.id]=new v({userPointer:l,relevantEntities:n,logErrorFn:t,getRecordModel:r}):l.table===a().GP?this.botActorMemberships[l.id]=new f({botPointer:l,relevantEntities:n,logErrorFn:t,getRecordModel:r}):l.table===i().yj?this.agentActorMemberships[l.id]=new m({agentPointer:l,logErrorFn:t}):(0,o().HB)(l)}getActorMembership(e){let t;if(e.table===p().oo?t=this.userActorMemberships[e.id]:e.table===a().GP?t=this.botActorMemberships[e.id]:e.table===i().yj?t=this.agentActorMemberships[e.id]:(0,o().HB)(e),void 0===t){const t=new Error("Requested actor did not have an actor membership");this.logErrorFn({from:"ActorMemberships",type:"MissingActorMembership",error:t,data:{actorPointer:e}})}return t}*[Symbol.iterator](){yield*Object.values(this.userActorMemberships),yield*Object.values(this.botActorMemberships),yield*Object.values(this.agentActorMemberships)}}var _=()=>n(68263);function b(e){const{recordMapFromWhichToFindRelevantEntities:t,alreadyKnownRelevantEntities:n}=e,i={relevantSpaceIds:new Set,relevantTeamIds:new Map,relevantGroupIds:new Map},a=e=>{null!=n&&n.relevantSpaceIds.has(e)||i.relevantSpaceIds.add(e)},c=(e,t)=>{var o;if(null!=n&&null!==(o=n.relevantTeamIds.get(t))&&void 0!==o&&o.has(e))return;const r=i.relevantTeamIds.get(t);void 0===r?i.relevantTeamIds.set(t,new Set([e])):r.add(e)},p=(e,t)=>{var o;if(null!=n&&null!==(o=n.relevantGroupIds.get(t))&&void 0!==o&&o.has(e))return;const r=i.relevantGroupIds.get(t);void 0===r?i.relevantGroupIds.set(t,new Set([e])):r.add(e)},m=(e,t)=>{e.forEach((e=>{if((0,_().Ds)(e))p(e.group_id,t);else if((0,_().eu)(e)||(0,_().un)(e))c(e.team_id,t);else if(!((0,_().B2)(e)||(0,_().P3)(e)||!(0,_().hI)(e)||(0,_().FP)(e)||(0,_().sk)(e)||(0,_().Jx)(e)||(0,_().tb)(e)||(0,_().Lg)(e)||(0,_().cd)(e)||(0,_()._S)(e)||(0,_().ZK)(e)))throw(0,o().HB)(e)}))};for(const{pointer:o,model:g}of t)if(void 0!==o.spaceId&&a(o.spaceId),o.table===s().NX)a(o.id);else if(o.table===u().yK){if(void 0!==g){const e=g;c(o.id,e.getSpaceId()),a(e.getSpaceId()),e.getRawMembership().forEach((t=>{"group"===t.entity_type&&p(t.group_id,e.getSpaceId())}));m(e.getPermissionItems(),e.getSpaceId());const t=e.getParentPointer();t.table===s().NX&&void 0!==t.id&&a(t.id)}}else if(o.table===d().aJ){const{spaceId:e}=(0,d().SM)(o.id);a(e)}else if(o.table===l().m3){const{spaceId:e}=(0,l().bx)(o.id);a(e)}else if(o.table===r().ev&&void 0!==g){const e=g;a(e.getSpaceId()),m(e.getPermissionItems(),e.getSpaceId())}return i}function y(e){const{recordMap:t,actorPointers:n,logErrorFn:o,getRecordModelFnWithMaybeMissingRecords:i}=e,r=b({recordMapFromWhichToFindRelevantEntities:t});return new h({getRecordModel:i,actorPointers:n,logErrorFn:o,relevantEntities:r})}},252799:(e,t,n)=>{n.d(t,{e:()=>o});const o=1e3},252833:(e,t,n)=>{n.d(t,{Fe:()=>w,Ip:()=>k,Jv:()=>C,LA:()=>x,NW:()=>T,Rw:()=>D,Vz:()=>I,cb:()=>P,cd:()=>L,fH:()=>b,jg:()=>E,m0:()=>M,mE:()=>R,o7:()=>N,sP:()=>B,vT:()=>A});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(296540);var o=()=>n(617871),i=()=>n(651124),r=()=>n(792071),a=()=>n(179034),s=()=>n(919709),l=()=>n(506391),c=()=>n(959013),d=()=>n(498212),u=()=>n(534177),p=()=>n(53137),m=()=>n(630116),g=()=>n(485634),f=()=>n(504836),v=()=>n(972435),h=()=>n(108944),_=n(474848);function b(e,t){const n=y(e),o=null==n?void 0:n.name,i=function(e,t){if(!e)return;const n=(0,l().$B)({url:e,integrations:p().A.integrations.state,currentSpaceId:t});if("success"!==n.type)return;if(!n.pattern.collectionItemType)return;switch(n.pattern.collectionItemType){case"project":return(0,_.jsx)(c().sA,{defaultMessage:"Project",id:"syncedCollectionIndicators.project.label"});case"pull_request":return(0,_.jsx)(c().sA,{defaultMessage:"Pull Requests",id:"syncedCollectionIndicators.pullRequests.label"});case"issue":return(0,_.jsx)(c().sA,{defaultMessage:"Issues",id:"syncedCollectionIndicators.issues.label"});case"calendar":return(0,_.jsx)(c().sA,{defaultMessage:"Calendar",id:"syncedCollectionIndicators.calendar.label"});case"release":return(0,_.jsx)(c().sA,{defaultMessage:"Releases",id:"syncedCollectionIndicators.releases.label"});default:(0,u().HB)(n.pattern.collectionItemType)}}(e,t);return i?o?(0,_.jsx)(c().sA,{id:"syncedCollectionIndicators.originalUrlWithIntegration",defaultMessage:"{collectionType} in {integrationName}",values:{integrationName:o,collectionType:i}}):(0,_.jsx)("span",{children:o}):(0,_.jsx)(c().sA,{defaultMessage:"Link to original url",id:"syncedCollectionIndicators.originalUrl"})}function y(e,t){if(!e)return;const n=(0,l().$B)({url:e,integrations:p().A.integrations.state,currentSpaceId:t});return"success"===n.type?n.integration:void 0}const S=(0,c().YK)({github_pull:{defaultMessage:"Oauth Pull Request",id:"syncedCollectionIndicators.oauthGithubPullRequest.label"},github_issue:{defaultMessage:"Oauth Issue",id:"syncedCollectionIndicators.oauthGithubIssue.label"},Event:{defaultMessage:"Event",id:"syncedCollectionIndicators.event.label"},figma_file:{defaultMessage:"File",id:"syncedCollectionIndicators.figmaFile.label"},google_drive_file:{defaultMessage:"File",id:"syncedCollectionIndicators.googleDriveFile.label"},zendesk_ticket:{defaultMessage:"Ticket",id:"syncedCollectionIndicators.zendeskTicket.label"},slack_channel:{defaultMessage:"Channel",id:"syncedCollectionIndicators.slackChannel.label"},slack_message:{defaultMessage:"Message",id:"syncedCollectionIndicators.slackMessage.label"}});function w(e){const{pattern:t,integration:n}=e;return`${r().Bj6.isAnyModel(n)?n.getName():n.name} ${function(e){switch(e.name){case"Event":return v().A.formatMessage(S.Event);case"figma_file":return v().A.formatMessage(S.figma_file);case"github_pull":return v().A.formatMessage(S.github_pull);case"github_issue":return v().A.formatMessage(S.github_issue);case"google_drive_file":return v().A.formatMessage(S.google_drive_file);case"zendesk_ticket":return v().A.formatMessage(S.zendesk_ticket);case"slack_channel":return v().A.formatMessage(S.slack_channel);case"slack_message":return v().A.formatMessage(S.slack_message);default:return e.name}}(t)}`}function k(e){const t=y(e);return(null==t?void 0:t.id)===o().me}function I(e,t){return t===i().uO.Jira&&e.type===i().uO.Jira?{self:e.self,accountId:e.accountId,name:e.name,displayName:e.displayName,accountType:"app",emailAddress:e.emailAddress,active:!0,notionUserId:e.notionUserId,type:i().uO.Jira}:e}function x(e){const{syncCollectionType:t,errorCode:n,intl:o}=e;return t===i().uO.Jira?(0,f().Pf)({errorCode:n}):o.formatMessage({id:"syncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update"})}function A(e){const{pageId:t,propertyId:n}=e;return(0,d().gB)(`${t}:${n}`)}function C(e){const{uniquePropertyId:t}=e;g().A.setState({...g().A.getState(),syncingProperties:new Set([...g().A.getState().syncingProperties,t])})}function T(e){const t=g().A.getState().syncingProperties;t.delete(e),g().A.setState({...g().A.getState(),syncingProperties:new Set(t)})}function M(e){var t;const{transaction:n,updateOperation:o,environment:i}=e,a=null==n||null===(t=n.initialRecordMap)||void 0===t?void 0:t.getModel(o.pointer);if(!(a&&a instanceof r().zgg))return!1;const s=a.getParentPointer();if("comment"!==s.table)return!1;const l=P({transaction:n,commentPointer:s,environment:i});return!!l&&{...l,commentPointer:s}}function P(e){var t;const{commentPointer:n,environment:o}=e,i=new(m().jg)(o,n),r=null===(t=h().Nq(i))||void 0===t?void 0:t.getAssociatedCollectionStore(),a=i.getParentBlockStore();return!!(r&&a&&r.isExternallyImportedAndSyncedCollection())&&{collectionStore:r,collectionPagePointer:a.pointer}}function B(e){var t;const{transaction:n,updateOperation:o,environment:i}=e,a=null==n||null===(t=n.initialRecordMap)||void 0===t?void 0:t.getModel(o.pointer);if(!(a&&a instanceof r().zgg&&a.isInsideCollection()))return!1;const s=a.getParentPointer(),l=new(m().md)(i,{id:s.id,table:"collection"});return!(null==l||!l.isExternallyImportedAndSyncedCollection())&&l}function R(e){const{updateOperation:t,transaction:n,collectionStore:o,collectionPagePointer:i}=e,r=JSON.stringify(t.args);if(!r)throw new Error("Could not extract comment content from update operation");const a=o.getFormat().external_collection_type;if(!a)throw new Error("Collection is not an external synced collection");return{syncType:a,syncCollectionUpdates:[{commentData:r,collectionPagePointer:i,updateType:"CREATE_COMMENT",notionCommentId:t.pointer.id,numberOfAttachments:n.operations.filter((e=>{var t;return"set"===e.command&&"embed"===(null===(t=e.args)||void 0===t?void 0:t.type)})).length}],spaceId:n.spaceId}}function E(e){const{updateOperation:t,transaction:n,collectionStore:o}=e,i=function(e,t){var n,o,i;if(2!==e.path.length)return;const r=e.path[1].toString();switch(e.command){case"set":if("person"===(null===(n=t[r])||void 0===n?void 0:n.type)&&Array.isArray(e.args)&&1===e.args.length){var a;const t=null===(a=e.args[0])||void 0===a||null===(a=a[1])||void 0===a?void 0:a[0];return s().rie(t)?{propertyId:r,propertyUpdatedValue:{type:"person",value:s().NcG(t)}}:void 0}return{propertyId:r,propertyUpdatedValue:{type:"text",value:s().q4_(e.args)}};case"addPersonAfter":return{propertyId:r,propertyUpdatedValue:{type:"person",value:"me"===(null===(o=e.args)||void 0===o?void 0:o.pointer)?"me":null===(i=e.args)||void 0===i?void 0:i.pointer.id}};case"removePerson":return{propertyId:r,propertyUpdatedValue:{type:"person",value:void 0}};default:return}}(t,o.getSchema());if(!i)throw new Error("Unsupported update for synced collection");const{propertyId:r,propertyUpdatedValue:l}=i,c=o.getFormat().external_collection_type;if(!c)throw new Error("Collection is not an external synced collection");return{syncType:c,syncCollectionUpdates:[{propertyId:r,propertyUpdatedValue:l,updateType:"UPDATE_PROPERTY",collectionPagePointer:{table:a().ev,id:t.pointer.id,spaceId:t.pointer.spaceId}}],spaceId:n.spaceId}}function D(e){const t=g().A.getState().syncingComments;t.delete(e),g().A.setState({...g().A.getState(),syncingComments:new Set(t)})}function N(e){return g().A.getState().syncingComments.has(e)}function L(e){return"Jira"===e&&(0,f().CS)()}},253021:(e,t,n)=>{n.d(t,{LQ:()=>l,dI:()=>s});var o=()=>n(597777),i=()=>n(763884);function r(e){return`CalendarView:${e}`}function a(e){const{collectionViewId:t,currentUserId:n}=e;return i().K.get({userId:n,key:r(t)})}function s(e){var t;const{collectionViewId:n,currentUserId:o}=e;return(null===(t=a({collectionViewId:n,currentUserId:o}))||void 0===t?void 0:t.dateRangeStart)||Date.now()}function l(e){const{newCalendarStart:t,newCalendarEnd:n,collectionViewId:s,currentUserId:l="0"}=e;(0,o().dV)(t,n,Date.now())?function(e){const{collectionViewId:t,currentUserId:n}=e,o=r(t);i().K.remove({userId:n,key:o})}({collectionViewId:s,currentUserId:l}):function(e){const{collectionViewId:t,dateRangeStart:n,currentUserId:o}=e,s=r(t),l={...a({collectionViewId:t,currentUserId:o})||{},dateRangeStart:n};i().K.set({userId:o,key:s,value:l})}({collectionViewId:s,currentUserId:l,dateRangeStart:t})}},253579:(e,t,n)=>{n.d(t,{Rp:()=>a,iX:()=>u,m5:()=>c,oM:()=>r,pM:()=>l,rW:()=>s,u2:()=>d});var o=()=>n(38337),i=()=>n(713972);function r(e){const{menuElement:t,clickedElement:n}=e;return t!==n&&!t.contains(n)&&(!n.classList.contains("notion-link")&&!(n.closest(`.${o().MUV}`)&&!n.closest(`.${o().Hfz}`)&&!n.closest(`.${o().uMd}`)&&!n.closest(`.${o().LvP}`)))}function a(e){if((0,i().EV)(e,(e=>e.classList&&(e.classList.contains(o().Hfz)||e.classList.contains(o().uMd)||e.classList.contains(o().LvP)||e.classList.contains(o().sux)||e.classList.contains(o().HA4)||e.classList.contains(o().z$c)))))return!1;const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().MUV)));return Boolean(t)}function s(e){const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().N11)));return Boolean(t)}function l(e){const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().xeF)));return Boolean(t)}function c(e){const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().mJp)));return Boolean(t)}function d(e){const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().Jnf)));return Boolean(t)}function u(e){const t=(0,i().EV)(e,(e=>e.classList&&e.classList.contains(o().kew)));return Boolean(t)}},254452:(e,t,n)=>{n.d(t,{z:()=>l});n(18107),n(967357),n(296540);var o=()=>n(236262),i=()=>n(959013),r=()=>n(878377),a=()=>n(416726),s=n(474848);const l=(0,a().Fw)({key:"delete block",displayName:a().AY.deleteName,analyticsName:a().AY.deleteName.defaultMessage,svg:o().trashIcon,validators:[r().or([r().Uo6([r().VjU,r().ecY]),r().Uo6([r().or([r().SvZ,r().AVO]),r().AU6(r().xqI)])]),r().or([r().p2L,r().AVO]),r().AU6(r().Uo6([r()._fc,r().AVO])),r().AU6(r().vEP),r().AU6(r().jfA),r().AU6(r().P$I),r().AU6(r().Xjv(n(700500).xd.externalObjectInstancePage)),r().AU6(r().PfK),r().zrb,r().AU6(r().r9z)],shortcuts:["delete","backspace"],closeParentMenu:!0,render:(e,t,l)=>{let{styles:c}=l;const d=r().dj5(t.blocks.at(0));return(0,s.jsx)(n(859428).A,{renderTooltip:()=>(0,s.jsx)("div",{style:{maxWidth:400,whiteSpace:"pre-wrap"},children:(0,s.jsx)(i().sA,{...a().AY.cannotDeleteBlockTooltip})}),render:()=>(0,s.jsx)(n(575143).A,{...e,...c,isRed:!0,svg:o().trashIcon,title:(0,s.jsx)(i().sA,{...a().AY.deleteName}),shortcut:"delete",disabled:d,disabledFeedback:d,tooltipText:d?(0,s.jsx)(i().sA,{...a().AY.cannotDeleteBlockTooltip}):void 0})})},track:{actionName:"delete"},action:async(e,t,o)=>{let{blocks:i,environment:r}=t;await n(797265).Af({environment:r,blocks:i,shouldCheckSuggestEdit:!0,callback:e})}})},254497:(e,t,n)=>{n.d(t,{E:()=>r});var o=()=>n(246826),i=()=>n(630116);function r(e){const{collectionStore:t,update:n,transaction:r}=e;o().zv({store:(0,i()._y)(t,t.pointer,["deleted_schema"]),data:n,transaction:r})}},254526:(e,t,n)=>{n.d(t,{K6:()=>l,Ow:()=>s,i_:()=>a});n(944114),n(898992),n(672577);var o=()=>n(617871),i=()=>n(508496),r=()=>n(53137);function a(e){if(!e||!e.isDefined()||!e.getAlive()||e.getIntegrationId()!==o().mn)return{status:"not_connected",userAccessAuthentication:void 0};const t=r().A.externalAuthentications.state.find((e=>{let{integration_id:t}=e;return t===o().Iy}));return s()&&!t?{status:"no_user_access",userAccessAuthentication:void 0}:{status:"connected",userAccessAuthentication:t}}function s(){return i().default.checkGate({gateName:"enforce_sfdc_double_auth"})}function l(e){const{collectionStore:t,rootPropertyId:n}=e,o=t.getSchema(),i=[];for(const c in o){var r;if("rollup"===(null===(r=o[c])||void 0===r?void 0:r.type)){var a,s;if((null===(a=o[c])||void 0===a?void 0:a.relation_property)===n)i.push({id:c,attributeName:null===(s=o[c])||void 0===s||null===(s=s.target_property)||void 0===s?void 0:s.trim()})}else{var l;const e=null===(l=o[c])||void 0===l?void 0:l.derived_property_record_metadata;(null==e?void 0:e.pointer_property_uri)===n&&i.push({id:c,attributeName:null==e?void 0:e.external_object_attribute})}}return i}},255018:(e,t,n)=>{n.d(t,{A:()=>B});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(757695),s=()=>n(959013),l=()=>n(401497),c=()=>n(576250),d=()=>n(284371),u=()=>n(731320),p=()=>n(614505),m=()=>n(16006),g=()=>n(125565),f=n(474848);const v=function(e){let{store:t,style:o}=e;const i=(0,r().K8)((()=>n(108944).fU(t)),[t]);(0,r().K8)((()=>t.isNavigableBlock()),[t])&&i.shift(),i.reverse();const a=i.length;if(0===a)return null;a>2&&i.splice(1,i.length-2);const s=i.map((e=>(0,f.jsx)(b,{store:e},e.id)));a>2&&s.splice(1,0,(0,f.jsx)(_,{}));const l=(0,n(681873).A)(s,(e=>(0,f.jsx)(h,{},e)));return(0,f.jsx)(g().A,{isSecondaryColor:!0,isSmall:!0,style:o,children:l})};function h(){return(0,f.jsx)("span",{style:{paddingLeft:4,paddingRight:4},children:"/"})}function _(){return(0,f.jsx)("span",{children:"..."})}function b(e){let{store:t}=e;return(0,f.jsx)(m().A,{store:t,shouldWrap:!0,maxLength:20})}var y=()=>n(42425),S=()=>n(365136);const w=function(e){let{currentBlockStore:t,backlinkStore:o,scrollToBlockId:a,discussionId:c,showOriginalToken:d,disableCurrentPageToken:p,disableArrow:g}=e;const h=(0,l().DP)(),_=(0,i().v3)(),b=(0,r().K8)((()=>!(0,u().X9)(_,t)&&(0,u().X9)(_,o)),[_,t,o]),S=(0,r().O$)(n(351360).AppStoreMainEditorCurrentBlockStore),w=S&&S.id===o.id,T=(0,r().K8)((()=>(0,n(492414).Ay)({store:o,scrollToBlockId:a,discussionId:c,fullyQualified:!0,preferPublicLink:(0,n(836251).w6)(_),pageVisitSource:n(584262).y8.LinkInPage})),[o,a,c,_]);return(0,f.jsx)(n(296798).A,{href:T,external:!1,innerStyle:{paddingLeft:8,paddingRight:16},children:(0,f.jsx)(y().Ay,{childrenStyle:{padding:"4px 2px"},alignment:y().C1.Center,style:{marginBottom:2,marginRight:4},right:(0,f.jsxs)(f.Fragment,{children:[d&&(0,f.jsx)("div",{style:x(_,h),children:(0,f.jsx)(s().sA,{defaultMessage:"Original",id:"backlink.originalTokenLabel"})}),w&&!p&&(0,f.jsx)("div",{style:x(_,h),children:(0,f.jsx)(s().sA,{defaultMessage:"This page",id:"backlink.currentPageTokenLabel"})})]}),children:(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[!g&&(0,f.jsx)(A,{}),(0,f.jsx)(k,{backlinkStore:o}),(0,f.jsx)(m().A,{store:o,style:I(h)}),(0,f.jsxs)("div",{style:{marginTop:-2,minWidth:0,display:"flex",alignItems:"baseline",flex:"2 0 40%",paddingTop:"0.1em"},children:[(0,f.jsx)(v,{store:o,style:{paddingLeft:8}}),(0,f.jsx)(C,{isPrivate:b})]})]})})})};function k(e){let{backlinkStore:t}=e;const n=(0,r().K8)((()=>t.getIcon()),[t]),o=(0,r().K8)((()=>t.isEmptyPage()),[t]);return(0,f.jsx)(p().B,{disabled:!0,icon:n,isEmptyPage:o,size:20,style:{marginLeft:4,marginRight:4}})}function I(e){return{fontWeight:d().Wy.medium,fontSize:d().J.UIRegular.desktop,lineHeight:1.3,borderBottom:`1px solid ${e.darkDividerColor}`,flexShrink:1}}function x(e,t){const{device:n}=e;return{padding:"2px 6px",borderRadius:4,color:t.text.secondary,background:t.legacyDefaultSelectColor,fontSize:n.isMobile?11:9,lineHeight:n.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap",marginLeft:4}}function A(){const e=(0,l().DP)();return(0,f.jsx)("div",{style:{marginLeft:4,transform:"rotate(180deg)",fill:e.regularIconColor},children:(0,c().y)({width:15,height:15})})}function C(e){let{isPrivate:t}=e;return t?(0,f.jsx)(S().A,{style:{paddingRight:4,marginLeft:12}}):null}const T=10,M=a().default.createClass(T,{name:"ShowMoreStore"}),P=a().default.createClass(!1,{name:"HoveredStore"});const B=function(e){let{store:t,originalTransclusionStore:a,disableInaccessiblePages:l,headerText:c,disableArrow:d,disableCurrentPageToken:u}=e;const p=(0,i().v3)(),m=(0,r().uB)(void 0,P),g=(0,r().uB)(void 0,M),v=(0,r().K8)((()=>(0,n(900967).c)(t,p)),[t,p]),h=(0,o.useCallback)((()=>function(e){e.setState(e.state+T)}(g)),[g]),_=(0,o.useCallback)((()=>function(e){e.setState(!1)}(m)),[m]),b=(0,o.useCallback)((()=>function(e){e.setState(!0)}(m)),[m]),y=(0,r().O$)(g),S=(0,r().K8)((()=>a?a.getNavigableBlockStore():void 0),[a]);if(0===v.backlinks.length&&!a)return null;const k=v.backlinks.length>y,I=v.inaccessibleBacklinkCount>0&&!l;return(0,f.jsxs)("div",{onMouseMove:b,onMouseLeave:_,children:[c&&(0,f.jsx)(R,{headerText:c}),a&&S&&(0,f.jsx)(w,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,backlinkStore:S,scrollToBlockId:a.id,showOriginalToken:!0}),v.backlinks.slice(0,y).map((e=>(0,f.jsx)(w,{currentBlockStore:t,disableArrow:d,disableCurrentPageToken:u,...e},e.backlinkStore.id))),(k||I)&&(0,f.jsx)(n(859428).A,{disableTooltip:k,renderTooltip:()=>(0,f.jsx)(s().sA,{defaultMessage:"Synced in pages that you don't have access to.",id:"page.backlinks.privatePagesTooltip"}),render:e=>(0,f.jsx)(n(493823).p,{icon:n(30626)._,isGray:!0,onClick:h,style:{padding:`2px ${d?17:14}px`,width:"100%"},disabled:!k,...e,children:k?(0,f.jsx)(s().sA,{defaultMessage:"{count} more",id:"page.backlinks.more",values:{count:v.backlinks.length-y}}):(0,f.jsx)(s().sA,{id:"page.backlinks.privatePages",defaultMessage:"{count, plural, one {{count} private page} other {{count} private pages}}",values:{count:v.inaccessibleBacklinkCount}})})})]})};function R(e){let{headerText:t}=e;return(0,f.jsx)("div",{style:{display:"flex"},children:(0,f.jsx)(g().A,{isSmall:!0,style:{marginTop:12,marginBottom:8,marginLeft:4,flex:1,paddingLeft:8},children:t})})}},255460:(e,t,n)=>{n.d(t,{Cf:()=>m,NH:()=>h,YW:()=>g});n(898992),n(354520),n(672577),n(581454);var o=()=>n(179034),i=()=>n(496603),r=()=>n(748197),a=()=>n(108944),s=()=>n(744705),l=()=>n(494043),c=()=>n(351360),d=()=>n(630116),u=()=>n(90302),p=()=>n(324089);function m(e){const t=e.state;return"page"===t.route.name&&t.route.scrollToBlockId?[t.route.scrollToBlockId]:t.historyState?t.historyState.blockIds:[]}function g(e,t){const n=function(e,t){const n=t.map((t=>d().Bv.createChildStore(e,{table:o().ev,id:t}))).map((e=>a().g7(e))).filter((t=>{let n=!1;const o=t.slice(1).find((e=>{if("block"===e.table)return e.isTransclusionType()&&(n=!0),e.isNavigableBlock()}));return o&&(o.id===e.id||n)})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>"block"===e.table&&(0,l().BN)(e)))}));return i().hS(i().Bq(n),(e=>e.id))}(e,t);for(const o of n)p().xT({blockId:o.id,state:!0,currentUserId:o.environment.currentUser.id});return n}function f(e,t){const n=function(e,t){const n=t.map((t=>d().Bv.createChildStore(e,{table:o().ev,id:t,spaceId:e.pointer.spaceId}))).map((e=>a().g7(e))).filter((t=>{const n=t.slice(1).find((e=>"block"===e.table&&e.isNavigableBlock()));return n&&n.id===e.id})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>{if("block"!==e.table)return!1;const t=e.getParentStore();return"block"===(null==t?void 0:t.table)&&"tab"===(null==t?void 0:t.getType())}))}));return i().hS(i().Bq(n),(e=>e.id))}(e,t);for(const i of n){const e=i.getParentStore();var r;if((null==e?void 0:e.table)===o().ev&&"tab"===(null==e?void 0:e.getType()))u().cN({store:e,id:i.id,currentUserId:null===(r=c().default.state.currentUserStore)||void 0===r?void 0:r.id})}return n}function v(e,t){const n=function(e,t){const n=t.map((t=>d().Bv.createChildStore(e,{table:o().ev,id:t,spaceId:e.pointer.spaceId}))).map((e=>a().g7(e))).filter((t=>{const n=t.slice(1).find((e=>"block"===e.table&&e.isNavigableBlock()));return n&&n.id===e.id})).map((e=>{const t=e.findIndex((e=>"block"===e.table&&e.isNavigableBlock()));return e.slice(1,t).filter((e=>{if("block"!==e.table)return!1;const t=e.getParentStore();return"block"===(null==t?void 0:t.table)&&"transcription"===(null==t?void 0:t.getType())}))}));return i().hS(i().Bq(n),(e=>e.id)).filter((e=>"block"===e.table))}(e,t);for(const i of n){const e=i.getParentStore();(null==e?void 0:e.table)===o().ev&&"transcription"===(null==e?void 0:e.getType())&&r().c.setTabState(e.id,i.id)}return n}async function h(e,t){await async function(e,t){const n=t.map((t=>d().Bv.createChildStore(e,{table:o().ev,id:t})));await Promise.all(n.map((e=>a().nR(e))))}(e,t);const n=i().hS([...g(e,t),...f(e,t),...v(e,t)],(e=>e.id));await async function(e){await Promise.all(e.map((e=>s().o(e))))}(n)}},256754:(e,t,n)=>{n.d(t,{I:()=>o});const o=(0,n(340498).xh)("arrowUpCircleFill",{default:{loader:()=>n.e(81917).then(n.bind(n,681917))},small:{loader:()=>n.e(49951).then(n.bind(n,849951))},mini:{loader:()=>n.e(31857).then(n.bind(n,631857))},large:{loader:()=>n.e(72791).then(n.bind(n,472791))}})},257120:(e,t,n)=>{n.d(t,{A:()=>b});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454),n(737550);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(965998),s=()=>n(880922),l=n(474848);const c=(0,n(340498).wt)("suggestionDiscussionCombo",{viewBox:"0 0 14 13",svg:(0,l.jsxs)("g",{children:[(0,l.jsx)("path",{fillRule:"evenodd",d:"M1.427 7.748c.314.172.674.259 1.081.259h.43V6.963H2.66c-.366 0-.64-.091-.822-.273-.179-.184-.268-.457-.268-.817V2.524c0-.36.09-.631.268-.813.182-.184.456-.276.822-.276h5.682c.363 0 .634.092.813.276.18.18.27.447.272.8h1.127V2.37c0-.446-.087-.83-.26-1.152a1.753 1.753 0 00-.738-.742C9.235.299 8.85.21 8.401.21H2.583c-.448 0-.833.088-1.156.264-.32.172-.565.42-.738.742-.173.323-.26.706-.26 1.152v3.48c0 .445.089.83.264 1.151.18.323.424.572.734.748z",clipRule:"evenodd"}),(0,l.jsx)("path",{d:"M6.492 12.557c-.217 0-.387-.07-.51-.207-.123-.138-.185-.327-.185-.567v-.975h-.28c-.408 0-.768-.087-1.082-.26a1.895 1.895 0 01-.734-.747c-.176-.322-.264-.706-.264-1.151V5.17c0-.446.087-.83.26-1.152.173-.322.419-.57.738-.743.322-.175.708-.263 1.156-.263h5.818c.448 0 .834.088 1.156.263.322.173.568.42.738.743.173.322.26.706.26 1.151v3.48c0 .446-.087.83-.26 1.152a1.78 1.78 0 01-.738.747c-.322.173-.708.26-1.156.26H8.882l-1.485 1.3a2.497 2.497 0 01-.479.343.91.91 0 01-.426.106zm.272-1.257L8.14 9.946a.938.938 0 01.294-.215.96.96 0 01.365-.057h2.544c.364 0 .634-.091.813-.273.182-.184.273-.457.273-.817V5.235c0-.36-.091-.631-.273-.813-.179-.184-.45-.276-.813-.276H5.661c-.366 0-.64.092-.822.276-.178.182-.268.453-.268.813v3.349c0 .36.09.633.268.817.182.182.456.273.822.273h.699c.132 0 .231.03.299.092.07.062.105.166.105.312V11.3zm-.343-3.696a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.67.67 0 01.202.493.68.68 0 01-.202.492.67.67 0 01-.493.202zm2.083 0a.685.685 0 01-.496-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.677.677 0 01.496-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202zm2.083 0a.68.68 0 01-.492-.202.68.68 0 01-.202-.492.67.67 0 01.202-.493.672.672 0 01.492-.206c.194 0 .358.069.493.206a.663.663 0 01.206.493c0 .19-.069.354-.206.492a.67.67 0 01-.493.202z"})]})});var d=()=>n(112873),u=()=>n(778417),p=()=>n(186445),m=()=>n(299545),g=()=>n(351360),f=()=>n(372154),v=()=>n(938045),h=()=>n(555776),_=()=>n(116008);function b(e){const t=(0,i().v3)(),{store:n,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:b,propertyId:y}=e,S=(0,r().K8)((()=>{const e=_().A.state.open?_().A.state.blockId:null;return!!l&&(0,m().zo)({blockStore:n,transclusionReferences:"recurseInto",childPages:"omit"}).some((t=>t.id===e))}),[n,l]),w=(0,r().K8)((()=>_().A.state.open&&_().A.state.blockId===n.id&&"comment"===_().A.state.content&&(!_().A.state.property_id||_().A.state.property_id===y)),[y,n.id]),k=(0,r().O$)(_().f),I=w||S,x=(0,r().K8)((()=>{const e=m().O3(n,{recursivelyLoadAllDiscussions:l,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)}).filter((e=>e.getPropertyId()===y));if(0===e.length)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:I&&h().A.state.isActivelyComposing,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};const t=new Set(e.map((e=>e.id))),o=f().A.getFramePageFirstSelectedDiscussionId(),i=Boolean(o&&t.has(o)),r=p().ZO();if(r){const e=m().zo({blockStore:r,transclusionReferences:"recurseInto",childPages:"omit"}),o=e.indexOf(n),i=new Set(t);for(let n=o-1;n>=0;n--){const o=e[n],r=m().O3(o,{recursivelyLoadAllDiscussions:!1,excludeSelf:!1,onlyIncludeBlockLevelDiscussions:!1,includeLoadingDiscussions:!0}).map((e=>e.id));for(const e of i)r.includes(e)?t.delete(e):i.delete(e);if(0===t.size)return{commentsCount:0,numberOfReactions:0,discussionIsSelected:!1,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1};if(0===i.size)break}}const{comments:a,reactions:s,hasSuggestionDiscussions:c,hasDefaultDiscussions:d}=m().qE(n,{recursivelyLoadAllDiscussions:l,onlyIncludeBlockLevelDiscussions:b,onlyIncludePropertyDiscussions:Boolean(y)},y);return{commentsCount:a,numberOfReactions:s,discussionIsSelected:i,hasSuggestionDiscussions:c,hasDefaultDiscussions:d}}),[b,y,l,I,n]),{commentsCount:A,numberOfReactions:C,hasSuggestionDiscussions:T,hasDefaultDiscussions:M}=x,P=(0,o.useCallback)((()=>{if(f().A.state.open)d().xl();else if(u().IU({preventDismissMobileKeyboard:!0,environment:t}),I){if(A>0)h().A.setActiveWithSource("popover_comments"),h().A.setState({...h().A.state,overlapsExistingDiscussionMenu:!0}),d().B4({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId});else if(k){const e=g().default.state.mainEditorCurrentBlockStore;(0,v().x)({currentBlockStore:e,discussionInputStore:k,environment:t})}}else d().B4({environment:t,blockStore:e.store,analyticsFrom:"discussion_indicator",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:e.recursivelyLoadAllDiscussions,property_id:e.propertyId})}),[t,I,A,k,e.store,e.recursivelyLoadAllDiscussions,e.propertyId]),B=A>0||C>0||I,R=C>9?"9+":`${C}`,E=T&&!M,D=E?s().A:T&&M?c:a().M,N=A+(I?1:0);return{showIndicator:B,formattedReactionCount:R,onlySuggestions:E,icon:D,showReactionsIcon:C>0&&!I&&0===A,onlyHasDraftIndicator:I&&0===A,commentCountWithDraft:N,formattedCommentCount:N>9?"9+":`${N}`,handleClick:P,discussionIsSelected:x.discussionIsSelected,commentsCount:A,shouldShowDraftIndicator:I}}},257216:(e,t,n)=>{n.d(t,{Bu:()=>v,Zd:()=>f,bn:()=>g});var o=()=>n(212547),i=()=>n(199378),r=()=>n(179034),a=()=>n(519831),s=()=>n(343666),l=()=>n(123382),c=()=>n(96689),d=()=>n(84520),u=()=>n(854150),p=()=>n(294712),m=()=>n(246826);function g(e){const{childStore:t,parentStore:n,transaction:o}=e,i=t.getRecordStoreAtRootPath().getValue();if(i){const{parent_id:r,parent_table:a,alive:s}=i;r===n.id&&a===n.table&&s===e.alive||m().zv({store:t,data:{parent_id:n.id,parent_table:n.table,alive:e.alive},transaction:o})}}function f(e){if((0,o().rt)(e.childStore.table)){const t=e.childStore;return function(e){const{childStore:t,parentStore:n,transaction:o}=e,m=t.getRecordStoreUIParent();if(n.table===c().NX&&t.table===r().ev||n.table===u().yK&&t.table===r().ev||n.table===p().GD&&t.table===d().mu||n.table===i().SC&&t.table===r().ev||n.table===l().MC&&t.table===r().ev)g({childStore:t,parentStore:n,alive:!0,transaction:o});else if(n.table===d().mu&&n.path&&"private_pages"===n.path[0]&&t.table===r().ev){const e=n.getRecordStoreUIParent().getSpaceStore();e&&g({childStore:t,parentStore:e,alive:!0,transaction:o})}else n.table===r().ev&&m&&m.table===d().mu&&m.path&&"private_pages"===m.path[0]?g({childStore:t,parentStore:n,alive:!0,transaction:o}):n.table!==r().ev&&n.table!==a().Vl&&n.table!==s().SN||g({childStore:t,parentStore:n,alive:!0,transaction:o})}({...e,childStore:t})}{const{childStore:t,parentStore:n,transaction:o}=e,{parent_id:i,parent_table:r}=t.getValue()||{};i===n.id&&r===n.table||m().zv({store:t,data:{parent_id:n.id,parent_table:n.table},transaction:o})}}function v(e){const{childStore:t,parentStore:n,transaction:o}=e,{parent_id:i,parent_table:r,alive:a}=t.getValue()||{},s=n.table===d().mu&&n.path&&"private_pages"===n.path[0]&&a,l=i===n.id&&r===n.table&&a;(s||l)&&m().zv({store:t,data:{alive:!1},transaction:o})}},257615:(e,t,n)=>{n.d(t,{K1:()=>h,OG:()=>_,jD:()=>v});n(944114),n(898992),n(354520),n(672577),n(581454);var o=()=>n(496603),i=()=>n(404779),r=()=>n(728611),a=()=>n(281322),s=()=>n(953418),l=()=>n(695625),c=()=>n(919878),d=()=>n(397248),u=()=>n(661179),p=()=>n(93658),m=()=>n(666710),g=()=>n(502438),f=()=>n(778417);function v(e){const{environment:t,target:n,startX:o,startY:d,showSelectionRect:m,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}=e,y=g().default.getDefaultContainerFromTarget(n);if(!y)return;if(o>=window.innerWidth-u().A.state)return;if(d>=window.innerHeight-u().A.state)return;const S=s().NM(n),w=s().T8(n),k=l().T.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===y}),I=()=>{p().default.state.isActive&&(f().sf(),h({environment:t,currentX:p().default.state.currentX,currentY:p().default.state.currentY,toggle:a().r().shift}))};S&&r().P4(S,"scroll",I),w&&r().P4(w,"scroll",I),p().default.setState({moved:!1,isActive:!0,startX:o,startY:d,currentX:o,currentY:d,currentRect:void 0,defaultContainer:y,startSelection:g().default.state.stores,startSelectables:k,verticalScrollerEl:S,horizontalScrollerEl:w,startScrollTop:S?S.scrollTop:0,startScrollLeft:w?w.scrollLeft:0,showSelectionRect:m,handleScroll:I,preventSelectStores:v,allowVerticalEdgeScroll:_,allowHorizontalEdgeScroll:b}),f().IU({environment:t}),(0,i().y)(),c().wr()}function h(e){const{environment:t}=e,n=p().default.state;if(n.isActive){const{currentX:i,currentY:r,verticalScrollerEl:a,horizontalScrollerEl:s,startScrollTop:l,startScrollLeft:c,preventSelectStores:u}=n;let g=n.startY;if(a){g-=a.scrollTop-l}let v=n.startX;if(s){v-=s.scrollLeft-c}const h={top:Math.min(g,r),bottom:Math.max(g,r),left:Math.min(v,i),right:Math.max(v,i)},_=m().default.state.selectableRectMap,y=function(e){const t=new Map,n={root:!0};for(const o of e){const e=b(o)||n;t.get(e)||t.set(e,[]),t.get(e).push(o)}return Array.from(t.values())}(n.startSelectables.filter((e=>{const t=_.get(e),o=e.props.store;return e.props.canSelect&&t&&d().HY(h,t)&&u.indexOf(o)<0&&(!n.showSelectionRect||o.isTransclusionType()||!o.isInsideTransclusion())})));let S=[];const w=y.find((e=>e.length>1));if(w)S=w;else{const e=o().HV(y);e&&(S=e)}let k=S.map((e=>e.props.store));if(e.toggle)for(const e of n.startSelection)o().mK(k,e)?k=o().FF(k,e):k.push(e);p().default.setState({...n,moved:!0,currentX:e.currentX,currentY:e.currentY,currentRect:h}),f().td({environment:t,stores:k})}}function _(e){const t=p().default.state;if(t.isActive){const{moved:n,verticalScrollerEl:o,horizontalScrollerEl:i,handleScroll:a}=t;n||f().IU({environment:e}),o&&r().Ol(o,"scroll",a),i&&r().Ol(i,"scroll",a),p().default.setState({isActive:!1})}}function b(e){if(e)for(;;){if(!(e=e.getContextClosestSelectable()))return;if(e.props.canSelect)return e}}},258035:(e,t,n)=>{n.d(t,{CO:()=>J,HL:()=>T,L5:()=>C,ph:()=>A});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(430670),n(803949),n(581454),n(737550);var o=()=>n(496603),i=()=>n(720665),r=()=>n(700500),a=()=>n(970013),s=()=>n(713998),l=()=>n(175482),c=()=>n(498140),d=()=>n(651124),u=()=>n(857639),p=()=>n(384813),m=()=>n(416845),g=()=>n(997769),f=()=>n(792071),v=()=>n(72135),h=()=>n(134025),_=()=>n(179034),b=()=>n(519831),y=()=>n(869558),S=()=>n(919709);const w="PartialMatch",k="FullMatch",I="ColumnCategory",x=(0,n(959013).YK)({titleColumnName:{id:"database.titleColumn.name",defaultMessage:"Title"},genericColumnName:{id:"database.genericColumn.name",defaultMessage:"Column {columnNumber}"}});function A(e){const{table:t,deps:{intl:n,randomShortID:i,isPhoneNumber:s},options:{useCsvAdaptiveSchema:c,addHeadersToCollectionEnabled:u,isCsvImportV2Enabled:g}}=e,v=function(e,t,n,i){var r;let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0;e=e.filter((e=>e.some((e=>Boolean((e.text||"").trim())))));const u=e.length>0?e[0].length:0,p=e.map(((e,t)=>({row:e,rowIndex:t}))).filter((e=>{let{row:t}=e;return t.length!==u}));if(p.length>0){const e=p[0];throw new(m().yI4)("CsvImportError",{data:{},clientData:{type:"csv_import_inconsistent_columns",messageValues:{numTitleColumns:u,numBadRows:p.length,firstBadRowIndex:e.rowIndex+1,firstBadRow:JSON.stringify(e.row.map((e=>e.text))),firstBadRowLength:e.row.length}}})}const g=null===(r=e[0])||void 0===r?void 0:r.length;null==s||s.set(I,function(e){return e<50?"lessthan50":e<100?"lessthan100":e<500?"lessthan500":e<1e3?"lessthan1000":e<5e3?"lessthan5000":"greaterthan5000"}(g));const f=null==l?void 0:l.columnHeaders,v=void 0!==d&&void 0!==f&&f.length>0;let h=[];v?(h=f.flatMap((e=>e.doNotImport?[]:[e.headerName])),null!=l&&l.useFirstRowAsHeaders&&e.shift()):1===e.length||c?h=e[0].map(((e,n)=>t.formatMessage(x.genericColumnName,{columnNumber:n+1}))):e.length>1&&(h=e[0].map((e=>e.text)),e.shift());const _=e,{types:b,schema:y,pages:S}=v&&f?function(e){const{body:t,intl:n,randomShortID:i,headerTitles:r,headersMetadata:a,isPreTypedCSV:s,csvEvalContext:l}=e,c=performance.now(),{types:d,notToImportColumnIndex:u}=function(e){const{intl:t,columns:n,randomShortID:i}=e,r=[],a=n.flatMap(((e,n)=>{if(e.doNotImport)return r.push(n),[];let a=o().D_;"checkbox"===e.propertyType?a=e=>L(e):"number"===e.propertyType?a=e=>U(e):"date"===e.propertyType&&(a=e=>j(e,t));return[{id:"title"===e.propertyType?"title":i(),schema:{name:e.headerName,type:e.propertyType},coerce:a}]}));return{types:a,notToImportColumnIndex:r}}({intl:n,columns:a,randomShortID:i}),p=performance.now()-c;null==l||l.set("columnTypeInferenceTimeTakenMS",p);const{pages:m,selectPropertyOptions:g}=P({body:t,types:d,isPreTypedCSV:s,notToImportColumnIndex:u});if(g)for(const o of d)!g[o.id]||"select"!==o.schema.type&&"multi_select"!==o.schema.type||(o.schema.options=B({randomShortID:i,optionValues:g[o.id]}));const{schema:f}=M({body:t,intl:n,randomShortID:i,headers:r,types:d,isPreTypedCSV:s});return{types:d,schema:f,pages:m}}({body:_,intl:t,randomShortID:n,headerTitles:h,headersMetadata:f,isPreTypedCSV:v,csvEvalContext:s}):function(e){const{body:t,intl:n,randomShortID:o,isPhoneNumber:i,useCsvAdaptiveSchema:r,headers:a,isPreTypedCSV:s,csvEvalContext:l}=e,c=performance.now(),{types:d}=T({body:t,intl:n,randomShortID:o,isPhoneNumber:i,useCsvAdaptiveSchema:r,csvEvalContext:l}),u=performance.now()-c;null==l||l.set("columnTypeInferenceTimeTakenMS",u);const{schema:p}=M({body:t,intl:n,randomShortID:o,headers:a,types:d,isPreTypedCSV:s}),{pages:m}=P({body:t,types:d,isPreTypedCSV:s});return{types:d,schema:p,pages:m}}({body:_,intl:t,randomShortID:n,isPhoneNumber:i,useCsvAdaptiveSchema:a,headers:h,isPreTypedCSV:v,csvEvalContext:s});return{schema:y,types:b,pages:S}}(t,n,i,s,c,e.csvEvalContext,e.metadata,u,g);return function(e){const{actor:t,blockType:n,root:i,parent:s,name:c,format:u,deps:{randomID:m,spaceIdCreator:g,addFileIdsToBlock:v,createCollectionAsyncWithStatusLabel:w},options:{ignoreBlockCount:k,useCrdt:I},pages:x,schema:A,columnIds:C}=e,T=e.collectionId??(null==g?void 0:g.idInSavedSpace(b().Vl))??m(),M=e.collectionViewId??(null==g?void 0:g.idInSavedSpace(y().Gy))??m(),P=[],B=[],R=[],{operations:E}=f().WBy.create({id:T,parent:i.existing?i.record.pointer:{id:i.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,name:S().x9d(c),schema:A,format:{collection_page_properties:o().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...w&&{sync_state:{syncing:!0,last_synced_at:Date.now()},static_import_collection_type:d().IE.CsvImport}}});P.push(...E);const D=i.existing?i.record.id:i.id,{model:N,operations:L}=f().zgg.create({id:D,type:n,collection_id:T,format:{collection_pointer:{table:b().Vl,id:T,spaceId:s.spaceId}},view_ids:[M],createdBy:t,parentPointer:s,space_id:s.spaceId},{useCrdt:I});i.existing?P.push(...l().mP({existingBlock:i.record,updatedBlock:N})):P.push(...L);if(w){const{operations:e}=f().lqf.create({id:M,type:"table",name:"Show All",parent:i.existing?i.record.pointer:{id:i.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,format:{table_properties:o().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...u},createdBy:t});P.push(...e)}const O=function(e){const{actor:t,collectionId:n,spaceId:o,pages:i,randomID:a,spaceIdCreator:s,options:l}=e;return i.map((i=>{const c=(null==s?void 0:s.idInSavedSpace(_().ev))??a(),{model:d,operations:u}=f().zgg.createWithoutParentCheck_DoNotUse({id:c,parentPointer:{id:n,table:b().Vl,spaceId:o},space_id:o,type:r().xd.page,createdBy:t,properties:i,...l.ignoreBlockCount?{ignore_block_count:!0}:void 0},{useCrdt:l.useCrdt}),m=[...u];if(e.addFileIdsToBlock){const e=(0,p().c)(d,"","").fileIds;e.length>0&&m.push(h().op.update({pointer:d.pointer,path:[],args:{file_ids:e.map((e=>e.id))}}))}return{id:c,operations:m}}))}({actor:t,collectionId:T,addFileIdsToBlock:v,spaceId:s.spaceId,pages:x,randomID:m,spaceIdCreator:g,options:{useCrdt:I,ignoreBlockCount:k}});for(const{operations:o}of O)B.push(...o);const{operations:U}=f().lqf.create({id:M,type:"table",name:"Show All",parent:i.existing?i.record.pointer:{id:i.id,table:_().ev,spaceId:s.spaceId},space_id:s.spaceId,format:{table_properties:o().oE(C.map((e=>{if(e)return{visible:!0,property:e}}))),...u},page_sort:O.map((e=>e.id)).slice(0,a().WF),createdBy:t});if(B.push(...U),w){const e={table:b().Vl,id:T,spaceId:s.spaceId},t=h().op.update({pointer:e,path:["format","sync_state"],args:{syncing:!1,last_synced_at:Date.now()}});return R.push(t),{operations:B,createCollectionOperations:P,collectionFinishedOperations:R}}return{operations:[...P,...B]}}({...v,columnIds:v.types.map((e=>e.id)),...e})}function C(e){const{table:t,actor:n,parent:o,tableId:a,deps:{randomID:s,spaceIdCreator:l,randomShortID:c},options:{useCrdt:d,ignoreBlockCount:u}}=e,p=[],m=t.length?t[0].map((e=>c())):[],g=t.map((e=>(null==l?void 0:l.idInSavedSpace(_().ev))??s()));p.push(...f().zgg.create({id:a,type:r().xd.table,content:g,format:{table_block_column_order:m},properties:{},parentPointer:o,space_id:o.spaceId,createdBy:n,ignore_block_count:!!u||void 0},{useCrdt:d}).operations);const v=g.flatMap(((e,s)=>{const l=i().MU(m.flatMap(((e,n)=>{var o;const i=null===(o=t[s])||void 0===o||null===(o=o[n])||void 0===o?void 0:o.textValue;return i?[[e,i]]:[]})));return f().zgg.create({id:e,type:r().xd.tableRow,parentPointer:{id:a,table:_().ev,spaceId:o.spaceId},space_id:o.spaceId,properties:l,createdBy:n},{useCrdt:d}).operations}));return p.push(...v),{operations:p}}function T(e){const{body:t,intl:n,randomShortID:r,isPhoneNumber:a,useCsvAdaptiveSchema:s,csvEvalContext:l}=e,c=function(e){return[{test:$.bind(null,e),sampledSchemaIsComplete:!0},{test:F,sampledSchemaIsComplete:!0},{test:W,sampledSchemaIsComplete:!0},{test:K,sampledSchemaIsComplete:!0},{test:z,sampledSchemaIsComplete:!0},{test:O,sampledSchemaIsComplete:!1},{test:Y,sampledSchemaIsComplete:!1},{test:Z,sampledSchemaIsComplete:!1},{test:X,sampledSchemaIsComplete:!0}]}(a),d=o().oE(o().sn(t).map((e=>e.length&&e[0].columnType?e[0].columnType:function(e,t,n,r,a,s){const l=t.filter((e=>Boolean(e)));if(0===l.length)return X(e,l);if(a){const o=l.length>1e3?function(e,t){const n=e.length,o=[];for(let i=0;i<t;i++){const t=Math.floor(Math.random()*n);o.push(e[t])}return o}(l,1e3):l;for(const a of r){const r=a.test(e,o,n);if(r){let n=r;if(!1===r.isFullMatch){u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, setting data type as string",columnType:r.schema.type,matchType:"Partial"}}),n=X(e,t);const o=(null==s?void 0:s.get(w))||0;(0,i().Et)(o)&&(null==s||s.set(w,o+1))}else u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Complete column type match detected",columnType:r.schema.type,matchType:"Full"}});const o=(null==s?void 0:s.get(k))||0;return(0,i().Et)(o)&&(null==s||s.set(k,o+1)),n}}}else{const t=l.filter((e=>!o().Im(e))).slice(0,100);for(const o of r){const r=o.test(e,t,n);if(r){const a=o.sampledSchemaIsComplete||t.length===l.length?r:o.test(e,l,n);if(a){if(!1===a.isFullMatch){u().log({level:"info",from:"csvHelper",type:"csvColumnTypes",data:{message:"Partial column type match detected, Potential data loss due to parsing failures",columnType:a.schema.type,matchType:"Partial"}});const e=(null==s?void 0:s.get(w))||0;(0,i().Et)(e)&&(null==s||s.set(w,e+1))}else{const e=(null==s?void 0:s.get(k))||0;(0,i().Et)(e)&&(null==s||s.set(k,e+1))}return a}}}}return X(e,[])}(n,e.map((e=>null==e?void 0:e.text)),r,c,s,l))));return{types:d}}function M(e){const{body:t,intl:n,randomShortID:o,headers:i,types:r,isPreTypedCSV:a}=e,s=i.map((()=>!1));if(!a)for(let d=0;d<i.length;d++)if("text"===r[d].schema.type)for(let e=0;e<t.length;e++){const n=t[e][d].textValue;if(n)for(const o of n)if(S().BEe(o)){s[d]=!0,e=t.length;break}}let l=!0;const c={title:{type:"title",name:n.formatMessage(x.titleColumnName)}};return i.forEach(((e,t)=>{const n=r[t];if(n)if("text"!==n.schema.type||!l||s[t]||a)if(a&&"title"===n.schema.type){const t=c.title;t&&(t.name=e)}else{const t=n.id??o();n.id||(n.id=t),c[t]={...n.schema,name:e}}else{l=!1,n.id="title",n.schema={type:"title",name:e};const t=c.title;t&&(t.name=e)}})),{schema:c}}function P(e){const{body:t,types:n,isPreTypedCSV:o,notToImportColumnIndex:i}=e,r={};return{pages:t.map((e=>{null!=i&&i.length&&(e=e.filter(((e,t)=>!i.includes(t))));const t={};return n.forEach(((n,i)=>{if(n){const{id:l,schema:c,coerce:d}=n,{type:u}=c;if(l){const n=e[i]||"";if("url"===u)t[l]=s().jw(n.text);else if("date"===u)t[l]=s().m5(d(n.text));else if("text"===u)t[l]=n.textValue||S().x9d(d(n.text));else if("file"===u)t[l]=n.textValue||[];else if("select"===u||"multi_select"===u){var a;!o||null!==(a=r[l])&&void 0!==a&&a.includes(n.text)||(r[l]?r[l].push(n.text):r[l]=[n.text]),t[l]=S().x9d(d(n.text))}else t[l]=S().x9d(d(n.text))}}})),t})),selectPropertyOptions:o?r:void 0}}function B(e){const{randomShortID:t,optionValues:n}=e;return n.map((e=>({id:t(),value:e})))}const R=["yes","Yes","true","True","checked"],E=["no","No","false","False","unchecked"];function D(e){return R.some((t=>e===t))||E.some((t=>e===t))}function N(e,t){return e.length===t.length}function L(e){return R.some((t=>e===t))?a().I1:a().oP}function O(e,t){if(t.every(D))return{schema:{type:"checkbox"},validate:D,coerce:e=>L(e)}}function U(e){const t=v().sA(e);return`${t?t.value:void 0}`}function F(e,t){const n=t.map(v().sA),o=n[0];if(o&&n.every((e=>Boolean(e&&e.format===o.format))))return{schema:{type:"number",number_format:o.format},validate(e){const t=v().sA(e);return!i().pN(t)&&t.format===o.format},coerce:e=>U(e)}}function V(e,t){if(parseInt(t)&&t.length<=6)return!1;const n=c().JC(t,e);return Boolean(n)}function j(e,t){return c().JC(e,t)}function z(e,t){const n=t.filter((t=>V(e,t)));if(n.length>=t.length/2)return{schema:{type:"date"},validate:t=>V(e,t),coerce:t=>j(t,e),isFullMatch:N(t,n)}}function H(e){return e.length<320&&e.includes("@")&&g().t(e,"email")}function W(e,t){const n=t.filter(H);if(n.length>=t.length/2)return{schema:{type:"email"},validate:H,coerce:o().D_,isFullMatch:N(t,n)}}function q(e){return e.length<320&&g().t(e,"url")}function K(e,t){const n=t.filter(q);if(n.length>=t.length/2)return{schema:{type:"url"},validate:q,coerce:o().D_,isFullMatch:N(t,n)}}function G(e,t){return!String(t).match(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)&&e(String(t))}function $(e,t,n){const i=G.bind(null,e),r=n.filter(i);if(r.length>=n.length/2)return{schema:{type:"phone_number"},validate:i,coerce:o().D_,isFullMatch:N(n,r)}}function Y(e,t,n){const i=[];t.forEach((e=>e.split(",").forEach((e=>i.push(e.trim())))));const r=new Set(i);if(s=r.size,l=i.length,c=t.length,l>c&&Q(s,l)){return{schema:{type:"multi_select",options:Array.from(r).map(((e,t)=>({id:n(),value:e,color:(0,a().Zd)([])})))},validate:e=>r.has(e),coerce:o().D_}}var s,l,c}function Q(e,t){return e>0&&e**2<t}function Z(e,t,n){const i=new Set(t);if(Q(i.size,t.length)){return{schema:{type:"select",options:Array.from(i).map(((e,t)=>({id:n(),value:e,color:(0,a().Zd)([])})))},validate:e=>i.has(e),coerce:o().D_}}}function X(e,t){return{schema:{type:"text"},validate:o().vF,coerce:o().D_}}function J(e){const t=[];let n=[],o="",i=!1;for(let r=0;r<e.length;r++){const a=e[r],s=e[r+1];if('"'===a)i&&'"'===s?(o+='"',r++):i=!i;else if(","!==a||i)if("\n"!==a&&("\r"!==a||"\n"===s)||i){if("\r"===a&&"\n"===s&&!i)continue;o+=a}else n.push(o),t.push(n),n=[],o="";else n.push(o),o=""}return(o||n.length>0)&&(n.push(o),t.push(n)),t}},260488:(e,t,n)=>{n.d(t,{XM:()=>E,Yc:()=>O,_N:()=>N,jd:()=>F,st:()=>L,su:()=>D,sv:()=>U});var o=()=>n(244641),i=()=>n(206267),r=()=>n(386164),a=()=>n(919709),s=()=>n(534177),l=()=>n(449506),c=()=>n(662453),d=()=>n(650829),u=()=>n(140022),p=()=>n(31278),m=()=>n(728611),g=()=>n(658883),f=()=>n(644914),v=()=>n(351360),h=()=>n(430483),_=()=>n(295169),b=()=>n(948914),y=()=>n(732770),S=()=>n(786601),w=()=>n(899677),k=()=>n(498719),I=()=>n(250484),x=()=>n(24157),A=()=>n(122058),C=()=>n(222917),T=()=>n(705540),M=()=>n(476380),P=()=>n(725614),B=()=>n(751156),R=()=>n(755199);const E=6;function D(e){h().zD.isMiniSearchModalEnabled()&&S().A.state.isOpen?S().A.closeAndResetMetricsState():w().default.state.open?L({environment:e.environment,reset:!1}):N(e)}function N(e){const{environment:t,isQuickSearch:n,isPublicPageSearch:o,isNewElectronTab:a,query:s}=e,c=i().JW(),p=h().zD.isUnifiedFindDebugToolsEnabled(),m=h().zD.isMiniSearchModalEnabled(),g=p?"nav-local-only":"default",b=Date.now().valueOf();if(Boolean(n)||"query-args"===e.analyticsFrom)w().default.setState({open:!1,openAsPage:!0,openedTimeMs:b,sessionId:c,isPublicPageSearch:o??!1,searchMode:g});else{if(w().default.state.open||S().A.state.isOpen)return;if(m&&!p){const n="editing"===x().default.state.mode?x().default.state:void 0,o="sidebar"!==e.analyticsFrom||!(0,f().KB)(t);S().A.update((e=>({...e,isOpen:!0,surface:"default",position:o?"center":"sidebar",sessionId:c,isNewElectronTab:a??!1,openedTimeMs:b,previousTextSelection:n})));const i=S().A.state.query;i&&P().setSelectionAtEnd({store:i.store}),(0,A().uU)({searchSessionId:c,environment:t})}else{var y;const e=null===(y=v().default.state.currentSpaceStore)||void 0===y?void 0:y.id;if(e){l().callApi({eventName:"warmSearchCache",environment:t,data:{spaceId:e}});h().zD.isDeepFindEnabled()&&l().callApi({eventName:"warmVectorDBCache",environment:t,data:{spaceId:e},headers:(0,r().WS)({spaceId:e})})}w().default.update((e=>({...e,open:!0,openAsPage:!1,isQuickSearch:!1,openedTimeMs:b,sessionId:c,isPublicPageSearch:o??!1,isNewElectronTab:a,searchMode:g})))}M().VN({clearQuery:!1})}if(Boolean(e.doNotTrackOpenSearchEvent)||C().w3(e.environment,{from:e.analyticsFrom,searchSessionId:c,type:m?"mini_search":"modal"}),(!m||p)&&("default"!==g?I().Ay.enableNavigationalMode():I().Ay.disableNavigationalMode(),s&&I().Ay.setState({...I().Ay.state,query:{...I().Ay.state.query,text:s}}),"assistant"===I().Ay.state.mode&&!n)){const n=_().default.getActiveSessionId()||_().default.getNextSessionId(),o=_().default.getActiveSession();d().assistantDependency.load().then((e=>{let{assistantMenuActions:n}=e;n.closeAssistantRightHandSideMenu({environment:t})})),u().trackAssistantOpened(e.environment,{from:"return_to_search",hasQuery:!1,searchSessionId:C().wr(),isReminder:!1,reminderType:void 0,sessionId:n,startTimestamp:(null==o?void 0:o.assistantConfigurationState.sessionStartTimestamp)||Date.now(),transcript:(null==o?void 0:o.evaluator.getTranscript())||[]})}}function L(e){const{environment:t,reset:n}=e;if(w().default.state.open){if(w().default.reset(),y().A.setKeyboardMode(!1),"assistant"===I().Ay.state.mode){const e=_().default.getActiveSession();e&&u().trackAssistantClosed(t,{sessionContext:e,from:"search"})}n&&O({resultStore:e.searchResultStore,secondaryResultStore:void 0})}}function O(e){const{resultStore:t,secondaryResultStore:n}=e;I().Ay.reset(),k().default.reset(),t.reset(),n&&n.reset()}async function U(e){var t,n,o;const{environment:i,shouldResetAssistantStore:r=!0,quickSearchMode:s,device:l,event:c}=e,p=v().default.state.mainEditorCurrentBlockStore??v().default.state.currentSpaceStore,f=I().Ay.state.query.text,{isNewElectronTab:y}=w().default.state,k=(null===(t=b().A.state.preferences)||void 0===t?void 0:t.isNewTabSearchEnabled)&&y?m().Vr(c)||"tab":m().Vr(c),x=h().zD.isDeepFindEnabled(),A=h().zD.isMiniSearchModalEnabled(),{sessionId:C,openedTimeMs:M}=A?S().A.state:w().default.state,P=f.length>E||x&&f.length>0;if(!p||"assistant"===I().Ay.state.mode)return;const{assistantActions:B,assistantMenuActions:R}=await d().assistantDependency.load();r&&B.clearActiveAssistantSession({environment:i});const D=f.length<=E||x?f:void 0,N=!P||!x,O=h().zD.isFullPageAssistantChatEnabled(i.device),U=(0,g().q)(i);let F;if(l.isMobileBrowser?R.openAssistantRightHandSideMenu({environment:i,primeTextInput:D,from:"search"}):O&&!U?(L({environment:i,reset:!1}),R.openFullPageChat({environment:i,shouldFocusInput:N,openInNew:k,deepFindRequestedForNewTabOrWindow:x,queryTextValue:(0,a().x9d)(f),from:"search"})):(I().Ay.update((e=>({...e,mode:"assistant"}))),R.setPrimeTextInput(D,N),await R.closeAssistantRightHandSideMenu({environment:i})),x||P){const e=await B.resetAndInitializeAssistantSession({environment:i,deepFindRequested:x,searchSessionId:C,searchOpenTimestamp:M});P&&(F=e.sessionId,B.commitHumanStep({environment:i,text:(0,a().x9d)(f),sessionId:F,assistantSurfaceType:"searchPane"}),B.updateAssistantTimestampsAfterSessionInitialization({environment:i}))}F||(F=_().default.getActiveSessionId()??_().default.getNextSessionId());const V=null===(n=_().default.getSessionContext(F))||void 0===n||null===(n=n.assistantConfigurationStore)||void 0===n?void 0:n.state,j=(null===(o=_().default.getSessionContext(F))||void 0===o?void 0:o.evaluator.getTranscript())??[];u().trackAssistantOpened(i,{hasQuery:P,from:e.from,searchSessionId:C,isReminder:!1,reminderType:void 0,sessionId:F,startTimestamp:(null==V?void 0:V.sessionStartTimestamp)||Date.now(),transcript:j}),s&&l.isElectron&&T().quickSearchSetSearchAssistantMode(!0)}async function F(e){let{environment:t,query:i}=e;const{assistantDependency:r}=await Promise.resolve().then(n.bind(n,650829)),a=(await r.load()).getCurrentQnaReminderUserSettings();if(!a)return;const l=o().c9.utc();if((0,s().O9)(a.last_exposed_to_ai_qna_at)){if(l.diff(o().c9.fromMillis(a.last_exposed_to_ai_qna_at),"days").days<7)return}const c=a.ai_qna_abandoned_search_reminder_shown_at??[],d=c[c.length-1];if(c.length>=p().FU)return;if((0,s().O9)(d)&&l.diff(o().c9.fromMillis(d),"days").days<2)return;if(i.trim().length<9)return;if(!h().zD.isQnaAbandonedSearchReminderEnabledForUser())return;if("idle"!==p().zz.state.type)return;p().zz.setState({type:"loading",query:i});const u=v().default.state.currentUserSettingsStore;if(u){const e={ai_qna_abandoned_search_reminder_shown_at:[...c,l.toMillis()]};B().createAndCommit({environment:t,userAction:"searchMenuActions.setAbandonedSearchReminderShownAt",canUndo:!0,perform:t=>{R().mJ({userSettingsStore:u,transaction:t,data:e})}})}return V({environment:t,compareTimestamp:a.last_exposed_to_ai_qna_at,query:i})}async function V(e){const{environment:t,compareTimestamp:o,query:i}=e,{assistantDependency:r}=await Promise.resolve().then(n.bind(n,650829)),a=await r.load(),{cascadeActions:s}=await c().aiDependency.load(),l=await s.getFirstCascadeInferenceOutput({environment:t,type:"keywordSearchToSuggestedQuestions",inputs:[{query:i}]});if(!l)return void p().zz.setState({type:"idle"});const d=function(){const{currentUserSettingsStore:e}=v().default.state;if(e)return e.getSettingsStore().getKeyStore("last_exposed_to_ai_qna_at").getValue()}();d&&o&&d>o?p().zz.setState({type:"idle"}):(p().zz.setState({type:"ready",questions:l}),_().default.endCurrentSession(),a.assistantMenuActions.openAssistantRightHandSideMenu({environment:t,from:"button",isReminder:!0,reminderType:"abandoned_search"}))}(0,n(466103).exposeDebugEnvironmentValue)("showQnaReminderOnAbandonedSearch",(e=>t=>V({environment:e,compareTimestamp:Date.now(),query:t})))},261237:(e,t,n)=>{n.d(t,{c:()=>C});n(16280),n(944114),n(898992),n(737550);var o=n.n(n(36545)),i=n(296540),r=()=>n(199834),a=()=>n(700500),s=()=>n(534177),l=()=>n(831872),c=()=>n(725614),d=()=>n(295740),u=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(803949),()=>n(906537));const p=["initial","keyDown","compositionStart","beforeInput","compositionUpdate","domMutations","input","compositionEnd","keyUp"],m={keyDown:"keyUp",beforeInput:"input",input:"domMutations",domMutations:"input",compositionStart:"compositionEnd"},g={compositionUpdate:"beforeInput"};class f{constructor(){this.flowData=new Map,this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.listeners=new Set,this.currentKeyDownEventTimeStamp=void 0,this.handleSelectionChange=()=>{this.nextFlow.beforeRange=u().toStaticRange(u().get())},this.handleKeyDown=e=>{const t=e.timeStamp;this.currentKeyDownEventTimeStamp=t,setTimeout((()=>{this.currentKeyDownEventTimeStamp===t&&(this.currentKeyDownEventTimeStamp=void 0)}),0),this.advanceToPhase("keyDown").keyDown={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionStart=e=>{this.advanceToPhase("compositionStart").compositionStart={event:e},this.emitUpdate(),this.endIfComplete()},this.handleBeforeInput=e=>{var t;if(!(0,n(713972).vr)(e))return;const o=(null===(t=e.getTargetRanges)||void 0===t?void 0:t.call(e))||[];this.advanceToPhase("beforeInput").beforeInput={event:e,targetRanges:o},this.emitUpdate(),this.endIfComplete()},this.handleCompositionUpdate=e=>{this.advanceToPhase("compositionUpdate").compositionUpdate={event:e},this.emitUpdate()},this.handleInput=e=>{this.advanceToPhase("input").input={event:e},this.emitUpdate(),this.endIfComplete()},this.handleCompositionEnd=e=>{this.advanceToPhase("compositionEnd").compositionEnd={event:e},this.emitUpdate(),this.endIfComplete()},this.handleKeyUp=e=>{this.advanceToPhase("keyUp").keyUp={event:e},this.emitUpdate(),this.endFlow()},this.handleMutations=e=>{let{currentFlow:t}=this;t&&!t.domMutations||(t=this.advanceToPhase("initial")),t.domMutations={afterPhase:t.phase,mutations:e},this.emitUpdate(),this.endIfComplete()},this.reset()}reset(){this.nextFlow=new v,this.currentFlow=void 0,this.previousFlow=void 0,this.flowData=new Map,this.currentKeyDownEventTimeStamp=void 0}attachEventListeners(e){const{div:t,document:n}=e;return n.addEventListener("selectionchange",this.handleSelectionChange),t.addEventListener("input",this.handleInput),t.addEventListener("keydown",this.handleKeyDown),t.addEventListener("keyup",this.handleKeyUp),t.addEventListener("beforeinput",this.handleBeforeInput),t.addEventListener("compositionstart",this.handleCompositionStart),t.addEventListener("compositionupdate",this.handleCompositionUpdate),t.addEventListener("compositionend",this.handleCompositionEnd),()=>{n.removeEventListener("selectionchange",this.handleSelectionChange),t.removeEventListener("input",this.handleInput),t.removeEventListener("keydown",this.handleKeyDown),t.removeEventListener("keyup",this.handleKeyUp),t.removeEventListener("beforeinput",this.handleBeforeInput),t.removeEventListener("compositionstart",this.handleCompositionStart),t.removeEventListener("compositionupdate",this.handleCompositionUpdate),t.removeEventListener("compositionend",this.handleCompositionEnd)}}onInputFlowChange(e){return this.listeners.add(e),()=>this.listeners.delete(e)}isComposing(){var e;return this.currentFlow&&!this.currentFlow.isPhase("initial")?this.currentFlow.isComposing():(null===(e=this.previousFlow)||void 0===e?void 0:e.isComposing())||!1}getCurrentFlow(){const e=this.currentFlow;if(!e)return;return{flow:e,data:this.getData(e)}}getData(e){const t=this.flowData.get(e);if(t)return t;const n={};return this.flowData.set(e,n),n}endIfComplete(){const{currentFlow:e}=this;e&&e.isComplete()&&this.endFlow()}emitUpdate(){const{currentFlow:e}=this;if(e){const t={type:"update",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(t)))}}endFlow(){const{currentFlow:e}=this;if(e){const t=this.previousFlow;this.previousFlow=e,this.currentFlow=void 0;const n={type:"end",flow:e,data:this.getData(e)};this.listeners.forEach((e=>e(n))),t&&this.flowData.delete(t)}}advanceToPhase(e){return this.currentFlow&&this.currentFlow.canTransitionToPhase(e)||(this.endFlow(),this.currentFlow=this.nextFlow,this.nextFlow=new v),this.currentFlow.phase=e,this.currentFlow}}class v{constructor(){this.phase="initial",this.beforeRange=u().toStaticRange(u().get()),this.initial=void 0,this.keyDown=void 0,this.compositionStart=void 0,this.beforeInput=void 0,this.compositionUpdate=void 0,this.input=void 0,this.compositionEnd=void 0,this.domMutations=void 0,this.keyUp=void 0}isPhase(e){return this.phase===e}hasEvents(){return Boolean(this.compositionStart||this.compositionEnd||this.compositionUpdate||this.keyDown||this.keyUp||this.beforeInput||this.input)}isComposing(){var e;switch(this.phase){case"compositionStart":case"compositionUpdate":return!0;case"compositionEnd":case"initial":return!1;case"beforeInput":case"input":case"keyDown":case"keyUp":return Boolean(null===(e=this[this.phase])||void 0===e?void 0:e.event.isComposing);default:(0,s().HB)(this.phase)}}transitionToPhase(e,t){return!!this.canTransitionToPhase(e)&&(this.phase=e,this[e]=t,!0)}canTransitionToPhase(e){return!this[e]&&(!(!(0,s().O)(g,this.phase)||g[this.phase]!==e)||1===function(e,t){const n=p.indexOf(e),o=p.indexOf(t),i=n-o;if(i<0)return-1;if(i>0)return 1;return 0}(e,this.phase))}isComplete(){for(const[e,t]of(0,s().WP)(m))if(this[e]&&!this[t])return!1;return!0}getTargetRanges(){var e;const t=null===(e=this.beforeInput)||void 0===e?void 0:e.targetRanges;return null!=t&&t.length?t:this.beforeRange?[this.beforeRange]:[]}}var h=()=>n(231722),_=()=>n(962845),b=()=>n(792002),y=(n(581454),()=>n(416845));class S{constructor(e){if(this.leftToRight=new Map,this.rightToLeft=new Map,e)for(const[t,n]of e)this.assoc(t,n)}assoc(e,t){const n=[];if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);n.push((()=>this.rightToLeft.delete(t)))}if(this.rightToLeft.has(t)){const e=this.rightToLeft.get(t);n.push((()=>this.leftToRight.delete(e)))}for(const o of n)o();return this.leftToRight.set(e,t),this.rightToLeft.set(t,e),this}getLeft(e){return this.leftToRight.get(e)}getRight(e){return this.rightToLeft.get(e)}hasLeft(e){return this.leftToRight.has(e)}hasRight(e){return this.rightToLeft.has(e)}deleteLeft(e){if(this.leftToRight.has(e)){const t=this.leftToRight.get(e);return this.leftToRight.delete(e),this.rightToLeft.delete(t),!0}return!1}deleteRight(e){if(this.rightToLeft.has(e)){const t=this.rightToLeft.get(e);return this.leftToRight.delete(t),this.rightToLeft.delete(e),!0}return!1}*[Symbol.iterator](){for(const[e,t]of this.leftToRight)yield[e,t]}}class w{constructor(e,t,n){if(this.leftName=void 0,this.rightName=void 0,this.biMap=void 0,e===t)throw new(y().Umn)("NamedBiMap left and right names are equal",{data:{name:e}});if(this.leftName=e,this.rightName=t,this.biMap=new S,n)for(const[o,i]of n)this.biMap.assoc(o,i)}assoc(e){const t=e[this.leftName],n=e[this.rightName];return this.biMap.assoc(t,n),this}get(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.getLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.getRight(t)}throw new(y().Umn)("NamedBiMap.get fallthrough should never occur",{data:e})}delete(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.deleteLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.deleteRight(t)}throw new(y().Umn)("NamedBiMap.delete fallthrough should never occur",{data:e})}has(e){if(this.leftName in e){const t=e[this.leftName];return this.biMap.hasLeft(t)}if(this.rightName in e){const t=e[this.rightName];return this.biMap.hasRight(t)}throw new(y().Umn)("NamedBiMap.has fallthrough should never occur",{data:e})}[Symbol.iterator](){return this.biMap[Symbol.iterator]()}}class k extends(()=>n(959180))().A{constructor(){super(...arguments),this.nodeMap=new w("node","ref",new S)}register(e){const t=super.register(e),n=e.getNode();return n?this.nodeMap.assoc({node:n,ref:e}):this.nodeMap.delete({ref:e}),t}unregister(e){super.unregister(e),this.nodeMap.delete({ref:e})}getByDOMOrder(){const e=Array.from(this.nodeMap.biMap.rightToLeft.entries());return e.sort(((e,t)=>{const o=e[1],i=t[1];return(0,n(507707).A)(o,i)})),e.map((e=>{let[t,n]=e;return{node:n,leaf:t}}))}getParentContentEditableLeaf(e){const t=(0,d().sT)(e),n=t&&this.nodeMap.get({node:t});if(t&&n)return{node:t,leaf:n}}}var I=()=>n(24157),x=n(474848);const A=!1,C=(0,i.forwardRef)((function(e,t){const p=(0,n(959013).tz)(),{children:m,style:g,displayName:v,shouldSelectOnEnter:y,onBlur:S}=e,w=!e.disabled,C=(0,i.useRef)(null),R=(0,i.useRef)(0),[E,D]=(0,i.useState)(null),N=(0,i.useRef)(!1),L=(0,i.useRef)(!1),[O]=(0,i.useState)((()=>function(e){return`${e}-${B++}`}(v))),U=(0,i.useRef)(void 0),F=(0,i.useRef)({displayName:O}),[V]=(0,i.useState)((()=>new f)),[j]=(0,i.useState)((()=>new k)),[z]=(0,i.useState)((()=>new(r().L)({onMutations(e){n(17022).A.withListenerIgnored((()=>{V.handleMutations(e)}))},enableLogging:!1}))),H=(0,i.useRef)(!1),W=(0,i.useCallback)((e=>{H.current!==e&&(H.current=e,z.mutate((()=>{var t,n;e?null===(t=C.current)||void 0===t||t.setAttribute(d().tD,"true"):null===(n=C.current)||void 0===n||n.removeAttribute(d().tD)})))}),[z]),q=(0,i.useRef)(!1),K=(0,i.useCallback)((e=>{q.current!==e&&(q.current=e,z.mutate((()=>{var t,n;e?null===(t=C.current)||void 0===t||t.setAttribute(d().cm,"true"):null===(n=C.current)||void 0===n||n.removeAttribute(d().cm)})))}),[z]),G=(0,i.useCallback)((e=>{C.current=e,z.setNode(e),D(e)}),[z]);(0,i.useImperativeHandle)(t,(()=>C.current));const $=(0,n(484714).v3)(),Y=(0,n(847249).K8)((()=>(0,_().fF)($)),[$]);(0,i.useEffect)((()=>{if(E)return V.attachEventListeners({div:E,document:window.document})}),[V,E]);const{isAndroid:Q}=$.device;(0,i.useEffect)((()=>{const e=e=>{var t;const n=u().get(),o=(0,_().n3)({range:n,contentEditableLeafRegistry:j,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:C.current||void 0}),i=I().default.state,r="editing"===i.mode?i.multiSelection:void 0;return{leafs:o,multiSelection:Q&&e.isPhase("beforeInput")&&(!r||(0,h().kM)(r))&&u().isExpanded(n)?null===(t=(0,_().GI)({range:n,contentEditableLeafRegistry:j,allowInvisibleEndSelection:!0}))||void 0===t?void 0:t.multiSelection:r,range:u().toStaticRange(n)}};return V.onInputFlowChange((t=>{var i,a;K(V.isComposing());const{flow:u,type:p,data:m}=t;if("end"===p)return void M("flow ended",m,u);if(A){const t=m.log||=[],n={phase:u.phase,hasMutations:Boolean(u.domMutations),target:e(u),isComposing:u.isComposing()};t.push(n),M("flow updated",u.phase,n)}const g=u.hasEvents(),f=A||n(780054).A.isLocalhost||!g;if("update"!==p||!u.isPhase("beforeInput")&&m.target||(m.target=e(u)),Q&&"update"===p&&(0,n(155959).T)("supportsAlwaysMultiTextSelectionBehavior")&&"Unidentified"===(null===(i=u.keyDown)||void 0===i?void 0:i.event.key)&&"deleteContentBackward"===(null===(a=u.beforeInput)||void 0===a?void 0:a.event.inputType)){var v;u.isPhase("beforeInput")&&!m.beforeInputTarget&&(m.beforeInputTarget=e(u));if(Boolean(null===(v=m.beforeInputTarget)||void 0===v?void 0:v.leafs)){var _;if(u.isPhase("beforeInput")){if(null===(_=u.beforeInput)||void 0===_||_.event.preventDefault(),u.domMutations){m.handledMutations=!0,M("deleteContentBackward: revertDOMMutation");const e=u.domMutations.mutations;for(let t=e.length-1;t>=0;t--)(0,r().m)(e[t],f)}}else if(u.isPhase("keyUp")){var y;const e=function(e){var t;if(!e||0!==e.end.index)return e;let n=e;const o=(0,b().H4)(n.end.store),i=o?null===(t=(0,b().s6)(o))||void 0===t?void 0:t.endIndex:void 0;if(!o||void 0===i)return e;n.start.store===o&&n.start.index===i?(n={start:n.end,end:n.end},M("deleteContentBackward: mutating selection for start of line",n)):(0,h().kM)(n)||0!==n.end.index||(n={start:n.start,end:{store:o,index:i}},M("deleteContentBackward: mutating selection for end of line",n));return n}(null===(y=m.beforeInputTarget)||void 0===y?void 0:y.multiSelection);if(e){const t=(0,h().An)(e);M("deleteContentBackward: propagateShortcut backspace");const o=()=>{c().setMultiSelection({multiSelection:e}),l().uj($,new KeyboardEvent("keydown"),"backspace")};t?o():n(908006).default.afterNextFlush(o)}}return}}if("update"===p&&u.domMutations&&!m.handledMutations){var S,w;m.handledMutations=!0;const t=u.domMutations.mutations,n=m.target||e(u),i=null===(S=n.leafs)||void 0===S?void 0:S.start,a=null===(w=n.leafs)||void 0===w?void 0:w.start,l=null==i?void 0:i.leaf.getText();M("onMutations",m,l,u,i);let c=!1,p=!1,v=!1;for(let e=t.length-1;e>=0;e--){const n=t[e];P(n,i);const o=(0,d().sr)(n.target);if(o!==C.current){M("allowed mutation on interior region",o,n);continue}const a=(0,d().xr)(n.target);if(a){M("allowed mutation on error boundary",a,n);continue}if(!g&&"attributes"===n.type&&"style"===n.attributeName)continue;if("attributes"===n.type&&"dir"===n.attributeName)continue;if(!i){(0,r().m)(n,f);continue}if("childList"===n.type){const e=Array.from(n.removedNodes);p||=e.some(d().qb)||e.some(d().hU);const t=Array.from(n.addedNodes);v||=t.some(d().qb)}const l=(0,d().sT)(n.target);if(l&&l===i.node){switch(n.type){case"attributes":(0,r().m)(n,f);continue;case"characterData":case"childList":break;default:(0,s().HB)(n.type)}c=!0}else(0,r().m)(n,f)}if(a&&(c||p)){var k,I,x,T;if("string"!=typeof l)throw new Error("focusedLeafText must be string");const e=null===(k=u.beforeInput)||void 0===k?void 0:k.event,t=null===(I=u.keyDown)||void 0===I?void 0:I.event.keyCode,n="enter"!==(void 0!==t&&o()(t))&&("insertLineBreak"===(null==e?void 0:e.inputType)||"insertParagraph"===(null==e?void 0:e.inputType)||"insertCompositionText"===(null==e?void 0:e.inputType)&&(null==e||null===(x=e.data)||void 0===x?void 0:x.endsWith("\n"))||Q&&v),i={multiSelection:null===(T=m.target)||void 0===T?void 0:T.multiSelection,newValue:l,deletedLine:p,insertedLine:n,isComposing:V.isComposing(),timeStamp:V.currentKeyDownEventTimeStamp};M("delegateMutation",i),a.leaf.delegateMutation(i)}}}))}),[j,$,V,Q,K]),(0,i.useEffect)((()=>{const e=C.current;e&&N.current&&z.mutate((()=>{w?e.contentEditable="true":e.removeAttribute("contentEditable")}))}),[w,z]);const Z=(0,i.useCallback)((()=>{const e=C.current;return!!e&&(N.current?("always"===Y&&W(!0),!1):(z.mutate((()=>{w?e.contentEditable="true":e.removeAttribute("contentEditable"),(0,_()._V)($.device)&&(e.spellcheck=!1)})),z.lock(F.current),N.current=!0,W("gesture"===Y),M("enableMultiSelection"),!0))}),[z,Y,W,$.device,w]),X=(0,i.useCallback)((()=>{const e=C.current;return!(!N.current||!e)&&("always"===Y?(W(!1),!1):!V.isComposing()&&(z.unlock(F.current),e.removeAttribute("contenteditable"),W(!1),M("disableMultiSelection"),N.current=!1,!0))}),[z,Y,W,V]),J=(0,i.useCallback)((()=>{const e=C.current;if(!e)return;const t=u().get();if(null!=t&&t.collapsed&&(0,d().sr)(t.commonAncestorContainer)===e){const e=(0,d().sT)(t.commonAncestorContainer),o=t.startContainer,i=t.startOffset;if(e&&o&&(0,n(921855).a8)(e,o,i)){const r=e.getElementsByClassName(n(191772).gy)[0];r&&(M("Move collapsed selection before EOL marker",{parentLeafNode:e,caretContainer:o,caretOffset:i}),t.setStartBefore(r),t.setEndBefore(r),u().set(t,$.device))}}}),[$.device]);(0,i.useEffect)((()=>{let e=u().get();function t(){var t;const n=null===(t=u().get())||void 0===t?void 0:t.cloneRange(),o=e;e=n;const i=C.current;i&&u().isExpanded(n)&&!u().isExpanded(o)&&(0,d().sr)(n.commonAncestorContainer)===i&&(0,d().sT)(n.commonAncestorContainer)&&Z()&&(i.focus(),u().isExpanded(u().get())||u().set(n,$.device))}return document.addEventListener("selectionchange",t),document.addEventListener("selectionchange",J),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("selectionchange",J)}}),[Z,J,$.device]);const ee=(0,i.useCallback)((function(){const e=u().get();if(!u().isExpanded(e)&&X()&&e){const t=T(j,C.current,e);t&&t.node&&t.node instanceof HTMLElement&&t.node.focus(),u().set(e,$.device)}}),[j,X,$.device]),te=(0,i.useMemo)((()=>n(496603).sg(ee,50)),[ee]),{KeyboardShortcutStackStore:ne}=$,oe=(0,i.useRef)(),ie=(0,i.useCallback)((function(e){const t=C.current;if(!t)return;if(!N.current)return;if(c().maybeHandleExpectedBrowserSelectionUpdate("reactSelectionChange"))return void M("maybeHandleExpectedBrowserSelectionUpdate() returned true");const n=u().get();if(M("onSelect (react selection)",u().toStaticRange(n)),!oe.current&&n&&ue.current&&n.commonAncestorContainer===ue.current)u().clear($);else if(!(oe.current&&n&&u().areRangesEqual(n,oe.current))){if(oe.current=u().toStaticRange(n),n){const o=n.startContainer===t&&0===n.startOffset&&n.endContainer===t&&0===n.endOffset,i=ue.current&&n.startContainer===ue.current&&me.current&&n.endContainer===me.current,r=$.device.isIOS&&$.device.isMobileNative&&e.timeStamp-R.current>500&&function(e,t,n){if(!e.collapsed||0!==e.startOffset)return!1;const o=(0,_().n3)({range:e,contentEditableLeafRegistry:t,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:n}),i=t.getByDOMOrder()[0];return Boolean(i&&o&&o.start.leaf===i.leaf)}(n,j,t);if(o||i||r)return M("onSelect: propagateShortcut selectAll"),void l().uj({KeyboardShortcutStackStore:ne},new KeyboardEvent("keydown"),"selectAll")}if("contextmenu"!==e.nativeEvent.type){if(n&&(u().isExpanded(n)||"always"===Y)&&(0,d().sr)(n.commonAncestorContainer)===t){if(L.current)return void(U.current=e);const t=T(j,C.current,n);t&&(M("onSelect: delegateSelection",t),t.leaf.delegateSelection("start"))}u().isExpanded(n)||te()}}}),[Y,j,te,ne,$]);(0,i.useEffect)((()=>{if(!w){function e(){const e=u().get(),t=C.current;if(!t||!e)return;const n=(0,_().GI)({contentEditableLeafRegistry:j,range:e,allowInvisibleEndSelection:!0});n&&(0,d().sr)(e.commonAncestorContainer)===t&&c().selectAndEditMultiSelection({...n,environment:$,focus:"start",readOnly:"infer"})}return document.addEventListener("selectionchange",e),()=>document.removeEventListener("selectionchange",e)}}),[$,w,j]);const re=(0,i.useCallback)((()=>{L.current=!0,U.current=void 0}),[]),ae=(0,i.useCallback)((e=>{const t=U.current;if(L.current=!1,U.current=void 0,R.current=e.timeStamp,t){const e=T(j,C.current);M("handleTouchEnd: delegateSelection",e),null==e||e.leaf.delegateSelection("start")}}),[j]),se=(0,i.useCallback)((e=>{if(R.current=e.timeStamp,!N.current)return;e.target!==C.current||"Enter"!==e.key||!1!==e.ctrlKey||!1!==e.metaKey||!1!==e.altKey||!1!==e.shiftKey||y&&!y()||void 0!==u().get()||!ue.current||u().setOnNode(ue.current,$.device);const t=T(j,C.current);M("handleKeyDown: delegateKeyDown",t),null==t||t.leaf.delegateKeyDown(e)}),[j,$.device,y]);(0,i.useEffect)((()=>{const e=C.current;if(e)return e.addEventListener("beforeinput",t),()=>e.removeEventListener("beforeinput",t);function t(e){if(!N.current)return;const t=T(j,C.current);null==t||t.leaf.delegateBeforeInput(e)}}),[j]),(0,i.useEffect)((()=>{"always"!==Y||N.current||Z()}),[Z,Y]);const le=(0,i.useCallback)((()=>{const e=u().get();return!u().isExpanded(e)&&X()}),[X]),ce=(0,i.useCallback)((()=>!Q&&Boolean(V.isComposing())),[V,Q]),de=(0,n(401497).IS)((e=>{const t={height:1,width:1,caretColor:"transparent"};return{div:{caretColor:e.text.primary,...g},whenContentEditable:{WebkitUserModify:"read-write-plaintext-only"},selectionTrapStart:{...t,marginTop:-1},selectionTrapEnd:t}}),[g]),ue=(0,i.useRef)(null),pe=(0,x.jsx)("span",{style:de.selectionTrapStart,ref:ue,...d().ip}),me=(0,i.useRef)(null),ge=(0,x.jsx)("span",{style:de.selectionTrapEnd,ref:me,...d().ip}),fe=(0,i.useCallback)((e=>{if(null==S||S(e),$.device.isIOS&&!u().get()&&"editing"===I().default.state.mode){const e=I().default.state.multiSelection.start.store;if(e instanceof n(630116).Bv){const t=e.getType();if(t===a().xd.linkToPage||t===a().xd.linkToCollection)return}c().clear({environment:$})}}),[$,S]),ve=(0,i.useCallback)((()=>{!C.current||u().get()&&"empty"!==I().default.state.mode||C.current.blur()}),[]),he=(0,i.useRef)(w&&"always"===Y);return(0,x.jsx)("div",{role:"textbox","aria-disabled":!w,"aria-label":p.formatMessage({id:"contentEditableRoot.ariaLabel",defaultMessage:"Start typing to edit text"}),"aria-multiline":!0,tabIndex:w?0:void 0,onBlur:fe,onFocus:$.device.isIOS?ve:void 0,onTouchStart:re,onTouchEnd:ae,onTouchCancel:ae,onKeyDown:se,onCompositionEnd:function(e){if(!N.current)return;const t=T(j,C.current);null==t||t.leaf.delegateCompositionEnd(e)},ref:G,...(0,n(955825).AH)(de.div,{whenContentEditable:de.whenContentEditable}),onSelect:ie,contentEditable:he.current,suppressContentEditableWarning:!0,...d().ph,children:(0,x.jsxs)(n(872994).e,{id:O,tryEnableMultiSelection:Z,tryDisableMultiSelection:le,isComposing:ce,domLock:z,contentEditableLeafRegistry:j,children:[pe,m,ge]})})}));function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u().get();const o=(0,_().n3)({range:n,contentEditableLeafRegistry:e,allowInvisibleEndSelection:!0,constraintToContentEditableRootNode:t||void 0});if(o)return o.start}function M(){if(A){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("ContentEditableRoot:",...t)}}function P(e){const t={};if(t.type=e.type,t.target=e.target,t.targetIsText=e.target.nodeType===Node.TEXT_NODE,t.targetIsLeaf=(0,d().qb)(e.target),e.addedNodes.length){const n=Array.from(e.addedNodes);t.added=n,t.addedALeaf=n.some(d().qb),t.addedAText=n.some((e=>e.nodeType===Node.TEXT_NODE))}if(e.removedNodes.length){const n=Array.from(e.removedNodes);t.removed=n,t.removedALeaf=n.some(d().qb),t.removedAText=n.some((e=>e.nodeType===Node.TEXT_NODE))}"characterData"===e.type&&(t.newChars=e.target.textContent,t.oldChars=e.oldValue),t.mutation=e;for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];M("mutation: ",t,...o)}let B=0},261374:(e,t,n)=>{n.d(t,{Ad:()=>U,Ve:()=>N});n(18107),n(967357),n(581454);var o=()=>n(908006),i=()=>n(319954),r=()=>n(700500),a=()=>n(179034),s=()=>n(397277),l=()=>n(919709),c=()=>n(220719),d=()=>n(534177),u=()=>n(413962),p=()=>n(534402),m=()=>n(423804),g=()=>n(845489),f=()=>n(594794),v=()=>n(231722),h=()=>n(969197),_=()=>n(494043),b=()=>n(77246),y=()=>n(630116),S=()=>n(24157),w=()=>n(468484),k=()=>n(611371),I=()=>n(970330),x=()=>n(910302),A=()=>n(132867),C=()=>n(722101),T=()=>n(246826),M=()=>n(620689),P=()=>n(778417),B=()=>n(319975),R=()=>n(315097),E=()=>n(725614);function D(e){const t=(0,h().T)(e.store);if(t&&function(e){var t;const n=e.getType();return!!n&&(!!(0,r().B8)(n)&&!(e.id!==(null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))))}(t)){const n=A().Y1({environment:e.environment,blocks:[t],transaction:e.transaction});if(n)return void o().default.afterNextFlush((()=>{const e=n[0].getTitleStore();e&&E().setMultiSelection({multiSelection:{start:{store:e,index:0},end:{store:e,index:0}}})}))}R()._I(e)}function N(e){const{environment:t,transaction:n,multiSelection:c}=e;(0,k().EF)(t)?((0,h().Le)(c.start.store)?function(e){const{environment:t,editorMode:n,transaction:i}=e;let a=e.multiSelection;const s=(0,h().T)(a.start.store);if(!s||s.isCollectionView())return;if("default"===n||(0,b().Or)(n))B().f0({environment:t,multiSelection:a,transaction:i});else{if("suggest"===n)return;(0,d().HB)(n)}const l=S().default.state;a="editing"===l.mode&&l.multiSelection||a;const c=a.start.store,u={environment:t,type:r().xd.text,inMemoryRecordCache:c.inMemoryRecordCache,transaction:i,spaceId:s.pointer.spaceId},p=T().Wv(u),m=C().Hs({parentStore:s.getContentStore(),prependStore:p,transaction:i}).childStore;U({environment:t,blockStore:s,store:c,targetBlockStore:m,splitAtIndex:a.start.index,transaction:i}),o().default.afterNextFlush((()=>{E().setSelectionAtStart({store:m.getBlockTitleStore()})})),I().v(t,{from:"text_enter",type:r().xd.text,creating_block_id:p.id,parent_collection_id:p.getParentCollectionIdUpToTwoLevels()})}(e):(0,v().kM)(c)&&(function(e){const t=e.getRecordStoreUIParent();return t instanceof y().Bv&&e&&t.isType(r().bl)&&0===l().q4_(t.getTitleValue()).length}(c.start.store)||function(e){var t;const n=e.getAncestorBlockStoreAtRootPath();return n&&n.getType()===r().xd.text&&n.isDirectlyWithinCalloutV2Block()&&0===l().q4_(n.getTitleValue()).length&&n.id===(null===(t=n.getParentBlockStore())||void 0===t?void 0:t.getRenderableContentIds().at(-1))}(c.start.store))?D({environment:t,transaction:n,store:c.start.store}):(0,v().An)(c)&&L(c.start.store)&&O(c.start.store)?function(e){const{environment:t,transaction:n,multiSelection:c,editorMode:d}=e,p=c.start.store,v=(0,h().T)(p);if(!v||!(v.canEdit()||v.isCommentOnly()&&(0,m()._1)({blockStore:v,currentUser:t.currentUser})))return;const _=v.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(v)})),b=(0,h().T)(v);if(!_||!b)return;const y=T().Wv({environment:t,type:(0,r().B8)(_.type)?_.type:r().xd.text,inMemoryRecordCache:p.inMemoryRecordCache,transaction:n,spaceId:b.pointer.spaceId,properties:_.properties?F(_.properties):void 0,format:_.format?[_.format].map(s().ZU).map(V)[0]:void 0,permissions:_.permissions});if(C().nc({parentStore:b.getContentStore(),beforeStore:v,insertStore:y,transaction:n}).childStore,"suggest"===d){var S;const e=(0,g().J)(p),o=e?(0,h().T)(e):void 0,r=(0,u().RR)(t,n,y,{annotations:i().r.fromArray(l().mIW(null==e?void 0:e.getValue())),annotationTypes:[l().Ifu.SuggestionInsertText],currentUser:t.currentUser},o?{blockStore:o,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0);(0,u().tM)(n,y,{type:"add_line_break",id:(0,f().Z1)({table:a().ev,environment:t,spaceId:b.pointer.spaceId}),discussionId:r.id}),null!=v&&null!==(S=v.getNavigableBlockStore())&&void 0!==S&&S.isCommentOnly()&&(0,u().tM)(n,y,{type:"insert",id:(0,f().Z1)({table:a().ev,environment:t,spaceId:b.pointer.spaceId}),discussionId:r.id}),(0,u().c3)({environment:t,transaction:n,discussionStore:r,addModifiedBlockIdsAfter:[y.id]})}I().v(t,{from:"text_enter",type:r().xd.text,creating_block_id:y.id,parent_collection_id:y.getParentCollectionIdUpToTwoLevels()}),t.device.isMobile&&o().default.afterNextFlush((()=>M().pS(t)))}(e):function(e){const{environment:t,editorMode:n,transaction:o,multiSelection:i}=e,a=(0,h().T)(i.start.store);if(!a)return;if(!(a.canEdit()||a.isCommentOnly()&&(0,m()._1)({blockStore:a,currentUser:t.currentUser})))return;const s=(0,h().T)(a);if(!s)return;if(!(0,v().kM)(i))if("suggest"===n){const n=(0,u().RR)(t,o,i);(0,u().rY)({...e,discussionStore:n})}else"default"===n||"translate_unlocked"===n?B().f0(e):"translate_locked"===n?x()._4():(0,d().HB)(n);const l=i.start.store,c=a.getType(),p=a.getContentLength(),g=a.getModel();let f;if((0,_().BN)(a)&&w().A.isOpen(a.id))f=r().xd.text;else if(g&&p>0&&g.isType(r().RG)){f=r().xd.text;const e=a.getContentStores()[0];if(e){const t=e.getType();e.isDefined()&&t&&r().KT[t]&&(f=t)}}else f=c&&g&&!g.isType(r().ev)&&L(l)&&O(l)&&"code"!==c?c:r().xd.text;const b={environment:t,type:f,inMemoryRecordCache:l.inMemoryRecordCache,transaction:o,spaceId:s.pointer.spaceId},y=T().Wv(b),S=s.getRenderableContentIds()||[];let k,A=!1;if((0,_().BN)(a)&&w().A.isOpen(a.id)){const e=a.getContentStore();A=!0,k=C().Hs({parentStore:e,prependStore:y,transaction:o})}else if(g&&p&&g.isType(r().RG)){const e=a.getContentStore();A=!0,k=C().Hs({parentStore:e,prependStore:y,transaction:o})}else k=S.indexOf(a.id)>=0?C().WH({parentStore:s.getContentStore(),afterStore:a,insertStore:y,transaction:o}):C().Hs({parentStore:s.getContentStore(),prependStore:y,transaction:o});const M=k.childStore;if(L(l)&&c&&!A&&!(0,_().BN)(a)){const e=a.getContentStores(),t=a.getContentStore(),n=M.getContentStore();for(const i of e)C().TF({parentStore:t,childToRemoveStore:i,transaction:o}),C().BC({parentStore:n,appendStore:i,transaction:o})}U({environment:t,blockStore:a,store:i.start.store,targetBlockStore:M,splitAtIndex:i.start.index,transaction:o}),(0,u().nZ)({environment:t,transaction:o,sourceBlockStore:a,targetBlockStore:M,selectionIsExpanded:!(0,v().kM)(i),editorMode:n}),I().v(t,{from:"text_enter",type:f,creating_block_id:y.id,is_toggleable:(0,_().Yt)(f,y.getFormat()),parent_collection_id:y.getParentCollectionIdUpToTwoLevels()})}(e),t.device.isMobile||o().default.afterNextFlush((()=>{M().BM({environment:t})}))):(0,k().QY)(t)}function L(e){if(e.table===a().ev){const t=y().Bv.createChildStore(e,{table:a().ev,id:e.id}).getType();return t&&!(0,r().$I)(t)}return!1}function O(e){if(e.table===a().ev){const t=y().Bv.createChildStore(e,{table:a().ev,id:e.id}).getModel();return t&&!t.isType(r().IA)&&!t.isType(r().Ib)}return!1}function U(e){const{environment:t,blockStore:n,store:o,targetBlockStore:i,splitAtIndex:r,transaction:a}=e,s={store:o,index:r},l={start:s,end:s};if(n.useCrdt()&&n.getBlockTitleStore()===o&&i.useCrdt()){(0,c().MX)(i.useCrdt(),"Calling splitText() with a non-CRDT target block is not currently supported");(0,v().z_)(l)||p().X0({sourceBlockStore:n,targetBlockStore:i,splitAtGraphemeIndex:r,transaction:a,moveIntoNewBlock:!0})}else B().jN({environment:t,sourceStore:l.end.store,sourceIndex:l.end.index,targetStore:i.getBlockTitleStore(),targetIndex:0,transaction:a});P().hc({environment:t,store:i}),E().setSelectionAtStart({store:i.getBlockTitleStore()})}function F(e){const{title:t,...n}=e;return n}function V(e){const{block_color:t,...n}=e;return n}},261403:(e,t,n)=>{n.d(t,{R:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.875 5.75c.345 0 .625.28.625.625V8.25h1.875a.625.625 0 1 1 0 1.25H9.5v1.875a.625.625 0 1 1-1.25 0V9.5H6.375a.625.625 0 1 1 0-1.25H8.25V6.375c0-.345.28-.625.625-.625"}),(0,o.jsx)("path",{d:"M8.875 2.625a6.25 6.25 0 1 0 3.955 11.09l3.983 3.982a.625.625 0 1 0 .884-.884l-3.983-3.982a6.25 6.25 0 0 0-4.84-10.205m-5 6.25a5 5 0 1 1 10 0 5 5 0 0 1-10 0"})]})},r=(0,n(340498).wt)("magnifyingGlassPlus",i)},261450:(e,t,n)=>{n.d(t,{E:()=>r,V:()=>i});var o=()=>n(989423);const i=(0,n(959013).YK)({offlineError:{id:"duplicateActions.offlineError.message",defaultMessage:"Please go online to copy this block."},unknownError:{id:"duplicateActions.unknownError.message",defaultMessage:"An unknown error occurred."}});function r(e){(0,o().u4)({environment:e.environment,event:{eventName:"duplicate_block_duration",eventProperties:{time:e.time,success:e.success,user_action:e.user_action,is_duplication_local:e.is_duplication_local,duplication_size:e.duplication_size,is_await_post_submit_transaction:e.is_await_post_submit_transaction,strip_layouts_child_collection_view_block_enabled:e.strip_layouts_child_collection_view_block_enabled}}})}},262462:(e,t,n)=>{n.d(t,{M:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("settingsConnectedApps",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M16.492 3.922C15.695 3.125 14.57 3 13.234 3H7.148c-1.312 0-2.437.125-3.234.922C3.117 4.719 3 5.836 3 7.14v6.03c0 1.337.117 2.446.914 3.243.797.797 1.922.922 3.25.922h6.07c1.336 0 2.461-.125 3.258-.922.797-.797.914-1.906.914-3.242V7.164c0-1.336-.117-2.453-.914-3.242zm-.344 3.023v6.438c0 .812-.101 1.64-.578 2.117-.468.469-1.312.578-2.117.578h-6.5c-.805 0-1.648-.11-2.125-.578-.469-.477-.57-1.305-.57-2.117V6.969c0-.82.101-1.664.57-2.133.477-.477 1.328-.578 2.149-.578h6.476c.805 0 1.649.11 2.117.578.477.476.578 1.305.578 2.11zm-3.492 5.149c.344 0 .57-.266.57-.625V7.78c0-.46-.25-.64-.648-.64h-3.71c-.368 0-.602.226-.602.57s.242.57.617.57h1.422l1.156-.125-1.219 1.133-2.875 2.883a.62.62 0 00-.187.422c0 .351.226.578.57.578.188 0 .336-.07.445-.18l2.875-2.875 1.125-1.203-.117 1.219v1.351c0 .368.227.61.578.61z"})})},263711:(e,t,n)=>{n.d(t,{g:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}getSessionId(){return this.state.isOpen?this.state.sessionId:void 0}}const i=new o},263928:(e,t,n)=>{n.d(t,{J:()=>a,u:()=>l});n(16280),n(581454);var o=()=>n(496603),i=()=>n(37433),r=()=>n(634157);async function a(e){let{environment:t,spaceId:n,userId:o}=e;if(!t.currentUser.loggedInUserIds.includes(o))throw new Error("Must be logged in user.");r().A.getUserJoinedTeamsState({userId:o,spaceId:n})||await l({environment:t,spaceId:n,userId:o})}function s(e,t,n,i){var a;const s=(null===(a=r().A.getUserJoinedTeamsState({userId:e,spaceId:t}))||void 0===a?void 0:a.joinedTeamsIds)||[],l=n.length!==s.length||0!==o().R9(n,s).length;(l||i)&&r().A.setUserJoinedTeamsState({userId:e,spaceId:t,state:{joinedTeamsIds:l?n:s,lastEmitValue:i}})}async function l(e){var t;let{environment:n,spaceId:o,userId:a,emitValue:l}=e;if(!n.currentUser.loggedInUserIds.includes(a))throw new Error("Must be logged in user.");r().A.setHasFetched({userId:a,spaceId:o});const c=await(0,i().callGetTeamsApi)({environment:n,spaceId:o,currentUserId:a,onlyJoined:!0,includeArchived:!1});if(c)return void s(a,o,c.teamIds,l);const d=null===(t=n.defaultRecordCache)||void 0===t?void 0:t.persistedRecordCache;if(d){const e=await d.getTeams({spaceId:o,userId:a,includeArchived:!1,onlyJoinedTeams:!0});if(e&&e.length>0){return void s(a,o,e.map((e=>e.id)),l)}}}},264879:(e,t,n)=>{n.d(t,{D8:()=>A,_I:()=>x,nT:()=>I,oj:()=>k,zz:()=>C});n(898992),n(672577),n(803949),n(581454);var o=()=>n(700500),i=()=>n(179034),r=()=>n(220719),a=()=>n(534177),s=()=>n(44729),l=()=>n(62287),c=()=>n(186445),d=()=>n(108944),u=()=>n(731320),p=()=>n(351360),m=()=>n(411671),g=()=>n(630116),f=()=>n(970330),v=()=>n(313209),h=()=>n(722101),_=()=>n(524539),b=()=>n(750660),y=()=>n(257216),S=()=>n(246826),w=()=>n(751156);function k(e){const{environment:t,transaction:n,titleText:o,recordStoreParentStore:a}=e,{databaseTemplateStore:s,createInValue:l}=function(e,t){let n;if("page"===e.type){const o=g().Bv.createChildStore(t,{table:i().ev,id:e.id});if(o.isTemplate()){const t=(0,d().Nq)(o,1);t&&(n=o,e={type:"page",id:t.id})}}return{databaseTemplateStore:n,createInValue:e}}(e.createInValue,a),c="block"===l.type?g().Bv.createChildStore(a,{table:i().ev,id:l.id}):void 0,u=S().Wv({transaction:n,environment:t,type:"page",inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,properties:o?{title:[[o]]}:void 0,spaceId:a.pointer.spaceId});let p;if("block"===l.type)y().bn({transaction:n,childStore:u,parentStore:(0,r().o9)(c),alive:!0});else p=b().HY({transaction:n,environment:t,targets:[u],value:l});return{environment:t,databaseTemplateStore:s,createdPages:[u],moveToStorePromise:p}}async function I(e){const{environment:t,createdPages:n,databaseTemplateStore:o,moveToStorePromise:r}=e.createInState;let a,s;(null==n?void 0:n.length)>0&&(a=n[0].id,s=n[0].getParentCollectionIdUpToTwoLevels()),f().v(t,{type:"page",from:e.analyticsFrom,new_page_id:a,creating_block_id:a,parent_collection_id:s});const{currentSpaceStore:l}=p().default.state;if(o)w().createAndCommit({userAction:"inlinePageActions.completeCreateIn",environment:t,canUndo:!0,perform:e=>{n.forEach((n=>v().n5({title:{text:n.getTitleValue()},environment:t,store:n,templateStore:o,isKeyboard:!1,isCreateIn:!0,transaction:e,from:"inline_page_action"})))}}),l&&await _().Ym(l,l.id,o.id);else{const e=await r;l&&e&&e.table===i().ev&&await _().Ym(l,l.id,e.id)}}function x(e){const{environment:t,transaction:n,parentStore:r,inlinePageIds:l}=e;if(0===l.length)return;const c=g().Bv.createChildStore(r,r.pointer),p=(0,d().g7)(c).find((e=>{if(e.table!==i().ev)return!1;const t=e.getType(),n=e.getFormat();return!(!t||!n)&&((0,o().IU)(t,n)||(0,o().$I)(t))})),f=p&&p.isCollectionView()?p.getCollectionStore():p,v=f&&m().A.getMode(t,f);if(!f||(0,u().QT)(v)||!f.canEdit()){for(const e of l)s().Hk({pageStore:g().Bv.createChildStore(r,{table:i().ev,id:e}),transaction:n});return}let _=r;for(const o of l){const e=g().Bv.createChildStore(r,{table:i().ev,id:o});if(e.isEmptyPage()){s().Hk({pageStore:e,transaction:n});continue}const t=!e.isDefined()||Boolean(e.getAlive());y().bn({parentStore:f,childStore:e,transaction:n,alive:t}),"block"!==f.table?"collection"!==f.table&&(0,a().HB)(f):(h().WH({parentStore:f.getContentStore(),afterStore:_,insertStore:e,transaction:n}),_=e)}}function A(e){const t=c().ao();if(t){if(e&&e.table===i().ev)return{pageStore:(0,d().Nq)(e,0)||t,createInValue:{type:"block",id:e.id}};if(e&&(0,d().Wo)(e)){const t=(0,d().Nq)(e,0);if(t)return{pageStore:t,createInValue:{type:"page",id:t.id}}}return{pageStore:t,createInValue:{type:"page",id:t.id}}}}async function C(e,t){const{createInValue:n,blocksToTransform:o}=t,r="page"===n.type?new(g().Bv)(e,{table:i().ev,id:n.id}):void 0,a=Boolean(r&&r.isTemplate()),{performResult:{transformedPages:s,pageStore:c}}=await w().createAndCommitAsync({environment:e,userAction:"inlinePageActions.createNewPageIn",waitForServerCommit:!0,perform:async t=>{const s=o.map((n=>l().pd({environment:e,block:n,blockType:"page",transaction:t})));let c;if("page"===n.type)if(r&&a){const n=r.getAssociatedCollectionStore(),o=null==n?void 0:n.getParentPointer();o&&o.table===i().ev&&(c=await b().YX({transaction:t,environment:e,targets:s,value:{type:"page",id:o.id}}))}else{const{mainEditorCurrentBlockStore:o}=p().default.state;o&&o.id!==n.id&&(c=await b().YX({transaction:t,environment:e,targets:s,value:n}))}else"team"===n.type&&await b().HY({transaction:t,environment:e,targets:s,value:n});return{transformedPages:s,pageStore:c}}});await I({analyticsFrom:"new_page_in",createInState:{environment:e,createdPages:s,databaseTemplateStore:a?r:void 0,moveToStorePromise:Promise.resolve(c)}})}},265201:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},267419:(e,t,n)=>{n.d(t,{A:()=>a,_:()=>s});var o=()=>n(847249);class i extends(()=>n(757695))().default{getInitialState(){return{positionalEmojiData:{},emojiByName:{},emojiByCategory:{},emojiByColorRaw:{},emojiByColorProcessed:{}}}async waitUntilLoaded(){await(0,n(987201).x)()}}const r=new i,a=r;function s(){return(0,o().O$)(r)}},267856:(e,t,n)=>{n.d(t,{D:()=>a});var o=()=>n(406792),i=()=>n(712505),r=()=>n(150749);function a(e){const{environment:t,type:n,blockStore:a,store:s,isInCollectionView:l,eventTimeStamp:c}=e,d=o().default.DO_NOT_USE_markLegacy(n),u=null==a?void 0:a.getType(),p=null==a?void 0:a.useCrdt();function m(){const e=null==a?void 0:a.getType(),t=a&&"properties"===s.path[0]&&"title"===s.path[1],n=a&&"properties"===s.path[0]&&"caption"===s.path[1];return{table:s.table,block_property:t?"title":n?"caption":void 0,block_type:e,use_crdt:p,block_type_initial:e!==u?u:void 0,peek_mode:i().default.state.mode,is_in_collection_view:l,profiling_tool:r().getProfilingToolForSession()}}o().default.DO_NOT_USE_measureAfterNextFlushLegacy(d,{environment:t,getData:m,sendToStatsig:!0}),void 0!==c&&o().default.DO_NOT_USE_measureAfterNextFlushLegacy({metricName:`${n}_from_event_timestamp`,startTime:c},{environment:t,getData:m,sendToStatsig:!0})}},268405:(e,t,n)=>{n.d(t,{T:()=>r});var o=()=>n(498212),i=()=>n(529543);async function r(e){const t=await(0,i().getBrowserId)(e);return t&&(0,o().ot)(t)}},269380:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(296540),i=n(474848);const r=function(e){const t=(0,n(484714).v3)(),r=(0,o.useRef)(null);return(0,o.useEffect)((()=>{const t=r.current,n=e.element.cloned;t&&n&&t.replaceChildren(n)}),[e.element]),(0,i.jsx)("div",{ref:r,style:{position:"absolute",top:e.element.rect.top,left:e.element.rect.left,width:e.element.rect.width,height:e.element.rect.height,opacity:e.opacity||(t.device.isMobile?.25:.4),pointerEvents:"none"}})}},269429:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(296540),i=n(440961),r=()=>n(584262),a=()=>n(319975),s=()=>n(211716),l=()=>n(891078),c=n(474848);function d(e,t){const d=(0,n(484714).v3)(),u=(0,o.useContext)(n(484792).n),p=(0,o.useRef)(null),m=(0,o.useRef)(null),g=(0,l().bx)(e.store,e.disabled),f=(0,l().pW)(e.store),v=(0,o.useCallback)((()=>{n(899963).KO(d),n(296206).l8(d,{page_visit_id:n(990261).uk.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()}),n(41161).A.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:s().ig.Link,currentUserId:d.currentUser.id})}),[d,e.store]),h=(0,o.useCallback)((()=>{if(!m||!m.current)return;const t=i.findDOMNode(m.current);return(0,n(921855).ng)(e.store,t)}),[e.store]),_=(0,o.useCallback)((t=>{const n=h(),o=e.store.getTitleStore();o&&n&&a().xE({environment:d,event:t,interactiveToken:n,store:o,canEdit:g})}),[g,d,h,e.store]),b=(0,o.useCallback)((t=>{const n=h(),o=e.store.getTitleStore();o&&n&&a().HH({environment:d,event:t,interactiveToken:n,store:o,canEdit:g})}),[g,d,h,e.store]),y=(0,o.useCallback)((()=>{if(u){const t=(0,n(492414).Ay)({store:e.store,pageVisitSource:r().y8.Create});u(t)}else n(857783).uK({environment:d,store:e.store,visitType:s().ig.Link,openInSidePeek:n(712505).default.isSidePeekOpen(),pageVisitSource:r().y8.Create})}),[d,u,e.store]);(0,o.useEffect)((()=>()=>{n(347469).OZ(e.store.getTitleStore())}),[e.store]);const S=(0,n(847249).K8)((()=>e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,l().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"page",getNode:()=>p.current,getBlockStore:()=>e.store,activate:y,handleCreated(){y(),n(732770).A.setKeyboardMode(!1)}})),[y,e.store]),(0,c.jsx)(n(155004).s,{allowSelectionWithin:!1,onMouseOver:_,onMouseOut:b,ref:p,children:(0,c.jsx)(n(599945).c,{step:"demo_sub_page",store:e.store,children:(0,c.jsx)(n(54432).A,{ref:m,store:e.store,style:{...f,...e.style},isAlias:S,disabled:e.disabled,onClick:v})})}))}const u=o.memo(o.forwardRef(d),n(821062).A)},269643:(e,t,n)=>{function o(e,t,n){return e.getSpaceIdCreatorSync(t).deterministicIdInSavedSpace("collection_view",`${n}-settings`)}n.d(t,{D:()=>o})},270609:(e,t,n)=>{n.d(t,{L:()=>s,q:()=>l});n(898992),n(354520),n(803949),n(581454);var o=()=>n(91913),i=()=>n(416845),r=()=>n(919709),a=()=>n(220719);function s(e,t){const n=(0,a().o9)(e.getBlockTitleTextSliceTree());return Object.values(t).forEach((e=>null==e?void 0:e.underlineOperations.forEach((e=>{try{n.applyAnnotationOperation(e)}catch(t){if(!(0,i().ubK)(t)||t.message!==o().Dp)throw t}})))),n.getTextValue()}function l(e,t){const n={};return Object.values(t).forEach((t=>{if(!t)return;var o,i,a;(o=e,i=t.editId,o.map((e=>{const[t,n]=e;return(n?(0,r().$qC)(n,i):void 0)?t:""})).join(""))===(a=t.context,(0,r().q4_)(a.filter((e=>{let[t,n]=e;return!(!n||!(0,r().byt)(n)&&((0,r().azZ)(n),1))}))))&&(n[t.editId]=t)})),n}},270710:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.clonedBlockStore)}}const i=new o},271372:(e,t,n)=>{n.d(t,{D2:()=>d,gq:()=>l,vl:()=>c});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(430670),n(581454);var o=()=>n(455348),i=()=>n(179034),r=()=>n(372657),a=()=>n(108944),s=()=>n(895876);function l(e){let{environment:t,typedDatabases:n,spaceStore:o,joinedTeamIds:i,blocksToFilterParents:r}=e;return function(e){let{environment:t,typedDatabases:n,spaceStore:o,joinedTeamIds:i}=e;const{sharedDatabases:r,privateDatabases:a,restrictedDatabases:l,teamDatabases:c}=(0,s().uK)({environment:t,typedCollections:n,spaceStore:o}),d=Object.values(l),u=Object.values(a),p=Object.values(r),m=function(e){let{teamDatabases:t,joinedTeamIds:n}=e;const o=[];for(const[r,a]of Object.entries(t))for(const e of a)o.push([r,e]);if(0===o.length)return[];const i=new Map([...n,...Object.keys(t).filter((e=>!n.includes(e)))].map(((e,t)=>[e,t])));return Object.entries(t).flatMap((e=>{let[t,n]=e;return n.map((e=>({teamIndex:i.get(t),name:String(e.getName()),store:e})))})).sort(((e,t)=>e.teamIndex-t.teamIndex||e.name.localeCompare(t.name))).map((e=>e.store))}({teamDatabases:c,joinedTeamIds:i});return[...m,...p,...u,...d]}({environment:t,spaceStore:o,typedDatabases:c({typedDatabases:n.filter((e=>{const t=(0,a().Uo)(e);return!t||!t.isArchived()})),blocksToFilterParents:r}),joinedTeamIds:i})}function c(e){let{typedDatabases:t,blocksToFilterParents:n}=e;const o=n?new Set((0,r().rD)(n)):void 0;return t.filter((e=>{if(!e.canEdit())return!1;if(!o)return!0;const t=e.getParentPointer();return!t||t.table!==i().ev||!o.has(t.id)}))}function d(e){const t=e.getPropertyMapping(),n=e.getSchema();return o().u9.toViewSchema(n,t)}},271584:(e,t,n)=>{n.d(t,{d:()=>o,o:()=>i});const o=(0,n(498212).Ay)(),i=18e5},272600:(e,t,n)=>{n.d(t,{p:()=>l,u:()=>c});n(898992),n(672577),n(737550);var o=()=>n(896628),i=()=>n(246826),r=()=>n(751156),a=()=>n(508496),s=()=>n(46986);function l(e){const{collectionViewBlockStore:t,collectionPointer:n,transaction:r}=e;i().zv({store:t,data:{collection_id:null},transaction:r});if(a().default.checkGate({gateName:"workflow_container"})){const e=t.getCollectionPointers();(null==e?void 0:e.find((e=>e.id===n.id)))||o().zA({stores:[t],update:{collection_pointers:[...e??[],n]},transaction:r})}o().zA({stores:[t],update:{collection_pointer:n},transaction:r})}function c(e){const{collectionViewBlockStore:t,collectionStore:n,transaction:o,environment:i}=e;if((0,s().sx)())return;if(!(0,s().ei)(i))return;if(!n)return;if(n.getParentId()===t.id)return;if(t.getCollectionViewStores().some((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===n.id})))return;const a=t.getCollectionPointers();null!=a&&a.length&&r().applyOperation({store:t,operation:{pointer:t.pointer,command:"keyedObjectListRemove",path:["format","collection_pointers"],args:{remove:n.pointer}},transaction:o})}},274511:(e,t,n)=>{n.d(t,{j:()=>r,U:()=>a});var o=()=>n(645873);const i=new(o().O2)("moveTo",(()=>Promise.all([n.e(75134),n.e(95794),n.e(74562),n.e(28271),n.e(17254),n.e(42120),n.e(67435),n.e(1440),n.e(91957),n.e(76983)]).then(n.bind(n,844545)))),r=(0,o()._h)(i,(e=>e.MoveToMenuRenderer));async function a(){return(await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(4876)]).then(n.bind(n,450486))).moveToTeamImpl}},276282:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{updatingUrls:new Set}}add(e){this.state.updatingUrls.add(e),this.emit()}delete(e){this.state.updatingUrls.delete(e),this.emit()}}const i=new o},276470:(e,t,n)=>{n.d(t,{e:()=>m});n(944114),n(898992),n(672577),n(581454);var o=()=>n(857639),i=()=>n(436604),r=()=>n(386164),a=()=>n(388821),s=()=>n(696706),l=()=>n(534177),c=()=>n(520348),d=()=>n(83573),u=()=>n(449506);const p=new(n(56322).A)({performRequests:async e=>{const t=new Array(e.length),s=e.map(((e,t)=>({environment:e.environment,request:e.args,index:t}))),p=n(496603).$z(s,(e=>e.request.userId));for(const[f,v]of Object.entries(p)){const e=v[0].environment,s=[],{mainDbObjects:p,spaceCellObjects:h,spaceCellObjectsWithShortSpaceId:_,spaceCellObjectsMissingSpaceId:b}=(0,c().Qs)(v.map((e=>{let{request:{pointer:t,version:n}}=e;return{pointer:t,version:n}})),(e=>e.pointer)),y=[];0!==p.length&&y.push({endpointType:"main",requests:p});for(const[t,o]of Object.entries(h)){var m;const e=null===(m=o.find((e=>{var t;const o=null===(t=e.pointer)||void 0===t?void 0:t.id;return(0,l().O9)(o)&&(0,n(498212)._q)(o)})))||void 0===m||null===(m=m.pointer)||void 0===m?void 0:m.id,i=(0,r().WS)({cellId:void 0,recordId:e,spaceId:t});y.push({endpointType:"space",cellHeaders:i,requests:o})}if(0!==b.length){o().rateLimitedLog({level:"info",from:"syncRecordValuesBatched",type:"recordPointerMissingSpaceId",data:{miscDataToConvertToString:{requests:b}}});const t=(0,c().L8)(e);let n;if(i().B3 in t&&(n=t[i().B3]),n){const e=y.find((e=>{var t;return(null===(t=e.cellHeaders)||void 0===t?void 0:t[i().B3])===n}));e?e.requests.push(...b):y.push({endpointType:"space",requests:b})}else y.push({endpointType:"space",requests:b})}for(const[t,n]of Object.entries(_)){var g;const e=(0,r().WS)({cellId:void 0,recordId:null===(g=n[0].pointer)||void 0===g?void 0:g.id,spaceId:void 0});y.push({endpointType:"space",cellHeaders:e,requests:n})}await n(763824).lX(y,20,(async t=>{const{requests:n,cellHeaders:o,endpointType:i}=t;if("main"===i){const t=await u().callApi({eventName:"syncRecordValuesMain",environment:e,data:{requests:n},userId:"undefined"===f?void 0:f,headers:o??{}});s.push(t)}else if("space"===i){const t=u().callMultiCellApi({eventName:"syncRecordValuesSpace",environment:e,data:{requests:n},userId:"undefined"===f?void 0:f,headers:o??{}});for await(const e of t)s.push(e)}else(0,l().HB)(i)}));const S=a().RecordMapWithRole.create();let w;for(const t of s)"failed"!==t.type?S.assign(a().RecordMapWithRole.create(t.data.recordMap)):(w||(w=t.error),o().rateLimitedLog({level:"error",from:"syncRecordValuesBatched",type:"responseError",error:t.error}));if(w)throw w;d().A.addFromRecordMapWithRole(S),d().A.isEmpty()||n(633457).lK({environment:e});for(const{request:n,index:o}of v)if(n.pointer){const e=S.getValue(n.pointer),i=S.getRole(n.pointer);i&&(t[o]={value:e,role:i})}}return t},batchSize:500,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:30*n(720665).TD});async function m(e,t){if(t.pointer&&(0,s().TX)(t.pointer))try{const n=await p.enqueue({environment:e,args:t});return n||-1!==t.version?n:{value:void 0,role:"editor"}}catch(n){if(console.error("syncRecordValue error",n),t.shouldThrowError)throw n}}},278589:(e,t,n)=>{n.d(t,{N:()=>r});var o=()=>n(534177),i=()=>n(126126);function r(e){return"avatar"===e?i().eQ:"xsmall"===e?18:"small"===e?28:"medium"===e?36:"medium_large"===e?48:"large"===e?50:"xlarge"===e?94:"plans"===e?20:"deep_dive"===e?16:(0,o().HB)(e)}},278715:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{bypassedPageIds:new Set}}bypassedPage(e){return this.state.bypassedPageIds.has(e)}bypassPage(e){this.state.bypassedPageIds.add(e),this.emit()}}const i=new o},278768:(e,t,n)=>{n.d(t,{EA:()=>c,FZ:()=>p,Kn:()=>h,OE:()=>_,Om:()=>b,T8:()=>f,X0:()=>u,Y7:()=>s,_J:()=>y,bt:()=>a,d7:()=>g,hy:()=>m,kF:()=>S,wG:()=>v,x8:()=>d,ym:()=>l});var o=()=>n(989423),i=()=>n(644914),r=()=>n(508496);function a(e,t){o().u4({environment:e,event:{eventName:"open_settings",eventProperties:{...t,...(0,i().hX)({environment:e})}}})}function s(e,t){o().vd(e,"toggle_settings_tab",t)}function l(e,t){o().vd(e,"site_settings_action",t)}function c(e){o().vd(e,"upload_profile_photo")}function d(e,t){o().vd(e,"name_changed",t)}function u(e){o().vd(e,"delete_account_clicked")}function p(e){o().vd(e,"delete_account_confirmed")}function m(e){o().vd(e,"log_out_from_active_sessions_clicked")}function g(e){o().vd(e,"change_password_clicked")}function f(e){o().vd(e,"remove_password_clicked")}function v(e,t){o().vd(e,"locale_changed",t)}function h(e,t){o().vd(e,"change_locale_clicked",t)}function _(e,t){o().vd(e,"invite_link_updated",t),r().default.logEvent("invite_link_updated",String(t.enabled),t)}function b(e,t){o().vd(e,"allowed_email_domains_updated",t)}function y(e,t){o().vd(e,"security_settings_tab_changed",t)}function S(e,t){o().vd(e,"cdrr_setting_updated",t)}},280335:(e,t,n)=>{n.d(t,{Z:()=>o});const o=(0,n(340498).xh)("exclamationMarkTriangle",{default:{loader:()=>n.e(11674).then(n.bind(n,311674))},small:{loader:()=>n.e(12720).then(n.bind(n,112720))},mini:{loader:()=>n.e(4964).then(n.bind(n,304964))},large:{loader:()=>n.e(88580).then(n.bind(n,888580))}})},281322:(e,t,n)=>{n.d(t,{r:()=>i});const o={shift:!1,option:!1,control:!1,command:!1};function i(){return o}function r(e){o.shift=Boolean(e.shiftKey),o.option=Boolean(e.altKey),o.control=Boolean(e.ctrlKey),o.command=Boolean(e.metaKey)}window.addEventListener("keydown",r),window.addEventListener("keyup",r),window.addEventListener("mousemove",r),window.addEventListener("focus",(function(e){o.shift=!1,o.option=!1,o.control=!1,o.command=!1}))},281948:(e,t,n)=>{n.d(t,{ET:()=>m,NQ:()=>p,VU:()=>u});var o=()=>n(584262),i=()=>n(172385),r=()=>n(492414),a=()=>n(351360),s=()=>n(712505),l=()=>n(645302),c=()=>n(661920),d=()=>n(435009);function u(e){const{environment:t,store:n,peekMode:l,openInNew:u,showMoveTo:p,saveParent:m,resultsStore:g,collectionContextStore:f,pageVisitSource:v}=e,h=e.currentBlockStore??a().default.state.mainEditorCurrentBlockStore,_=t.RouterStore.state.route;let b;if("chat"===_.name&&"side_peek"===l){const e=n.getNavigableBlockStore();if(!e)return;b=(0,i().EY)({currentRoute:_,pageId:e.id,scrollToBlockId:void 0,pageVisitSource:o().y8.AIChat,isMobile:t.device.isMobile})}else b=Boolean(u)||"full_page"===l||!h?(0,r().J8)({store:n,fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v}):(0,r().J8)({store:h,peekViewBlockId:n.id,peekMode:(0,s().getUrlParamFromPeekMode)(l),fullyQualified:!1,showMoveTo:p,saveParent:m,pageVisitSource:v});d().oo({environment:t,url:b,openInNew:u}),c().DN({resultsStore:g,collectionContextStore:f,pageVisitSource:v})}function p(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,n=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:i}=a().default.state;if(i&&n>0){const e=(0,r().J8)({store:i,fullyQualified:!1,peekViewBlockId:t[n-1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:o().y8.PeekScroll});d().oo({environment:i.environment,url:e}),l().EK(i.environment,{direction:"up"})}}}function m(){const{resultsStore:e}=s().default.state,t=null==e?void 0:e.getState();if(s().default.state.open&&t){const{targetStore:e}=s().default.state,n=t.findIndex((t=>t.id===e.id)),{mainEditorCurrentBlockStore:i}=a().default.state;if(i&&n<t.length-1){const e=(0,r().J8)({store:i,fullyQualified:!1,peekViewBlockId:t[n+1].id,peekMode:(0,s().getUrlParamFromPeekMode)(s().default.state.mode),pageVisitSource:o().y8.PeekScroll});d().oo({environment:i.environment,url:e}),l().EK(i.environment,{direction:"down"})}}}},281994:(e,t,n)=>{n.d(t,{HI:()=>f,ZU:()=>g,dL:()=>u});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(970013),i=()=>n(452540),r=()=>n(999515),a=()=>n(247331),s=()=>n(443881),l=()=>n(501053),c=()=>n(490704),d=()=>n(433847);function u(e){return p({...e,depth:0,visitedPointers:new Set})}function*p(e){const{depth:t,formulasModule:n,permission:i,spaceId:r,typecheckContextValues:l,visitedPointers:d}=e,u=[];if(t>a().FORMULA_MAX_DEPTH)return u;const p=(0,c().MP)({formulas:n,formulaTypecheckContextValues:l,spaceId:r,value:i.value});for(const a of p){const e=(0,s().G7)(a);if(!d.has(e))if((0,o().pq)(a)){const e=yield*m({depth:t,formulasModule:n,minimumRole:i.minimumRole,pointer:a,spaceId:r,typecheckContextValues:l,visitedPointers:d});u.push(...e)}else d.add(e),u.push({minimumRole:i.minimumRole,pointer:{id:a.id,spaceId:a.spaceId,table:a.table},type:"record_permission"})}return u}function*m(e){const{depth:t,formulasModule:n,minimumRole:i,pointer:c,spaceId:d,typecheckContextValues:u,visitedPointers:g}=e,f=[],v=(0,s().G7)(c);if(g.has(v))return f;g.add(v),f.push({minimumRole:i,pointer:{id:c.id,spaceId:c.spaceId,table:c.table},type:"record_permission"});const h=yield*r().q.fetchRecord(c);if(!h)return f;const _=h.getNormalizedSchema(),b=_[c.propertyId];if(!b)return f;if((0,o().nC)(b)){const e=(0,o().Nv)(b);e&&f.push({minimumRole:i,pointer:e,type:"record_permission"})}else if((0,o().bT)(b)){if(!b.relation_property||!b.target_property)return f;const e=_[b.relation_property];if(!e||"relation"!==e.type)return f;const a=(0,o().Nv)(e);if(!a)return f;const s=yield*r().q.fetchRecord(a);f.push({minimumRole:i,pointer:a,type:"record_permission"});const l=(null==s?void 0:s.getNormalizedSchema())??{};if(b.target_property_type){const e=l[b.target_property];if(e&&b.target_property_type===e.type){const o="formula"===e.type?t+1:t,r=yield*m({depth:o,formulasModule:n,minimumRole:i,pointer:{...a,propertyId:b.target_property},spaceId:d,typecheckContextValues:u,visitedPointers:g});f.push(...r)}}}else if((0,o().lb)(b))if("v2"===b.version){var y;if(null!==(y=b.formula2)&&void 0!==y&&y.code){const e=yield*p({depth:t+1,formulasModule:n,permission:{minimumRole:i,value:{type:"formula",value:b.formula2.code}},spaceId:d,typecheckContextValues:[{kind:a().FormulaContextValueKind.ThisRow,type:{collection:c,type:"block"}}],visitedPointers:g});f.push(...e)}}else{const e=(0,l().kh)(b.formula);for(const o of e){const e=_[o];if(!e)continue;const r="formula"===e.type?t+1:t,a=yield*m({depth:r,formulasModule:n,minimumRole:i,pointer:{...c,propertyId:o},spaceId:d,typecheckContextValues:u,visitedPointers:g});f.push(...a)}}return f}function g(e){const{formulaValueTypes:t,minimumRole:n,targetId:o,formulasModule:i}=e,r=i.findFormulaTypecheckContextValue(t,o);if(r){const e=r.type;if("array"===e.type&&"block"===e.of.type&&e.of.collection)return[{type:"record_permission",pointer:e.of.collection,minimumRole:n??"reader"}];if("block"===e.type&&e.collection)return[{type:"record_permission",pointer:e.collection,minimumRole:n??"reader"}]}return[]}function f(e){const t=new Map;for(const n of e){const e=(0,i().wx)(n.pointer),o=t.get(e);o&&!(0,d().Pr)(n.minimumRole,o.minimumRole)||t.set(e,n)}return[...t.values()]}},282883:(e,t,n)=>{n.d(t,{En:()=>a,nH:()=>r});var o=()=>n(939768),i=()=>n(66689);function r(e){return(0,o().FB)(e)}const a=[i().yx.Status,i().yx.Priority,i().yx.Assign]},284030:(e,t,n)=>{n.d(t,{u:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("googleDriveColor",{viewBox:"0 0 87.3 78",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{fill:"#0066da",d:"M6.6 66.85l3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3L27.5 53H0c0 1.55.4 3.1 1.2 4.5z"}),(0,o.jsx)("path",{fill:"#00ac47",d:"M43.65 25L29.9 1.2c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44A9.06 9.06 0 000 53h27.5z"}),(0,o.jsx)("path",{fill:"#ea4335",d:"M73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75L86.1 57.5c.8-1.4 1.2-2.95 1.2-4.5H59.798l5.852 11.5z"}),(0,o.jsx)("path",{fill:"#00832d",d:"M43.65 25L57.4 1.2C56.05.4 54.5 0 52.9 0H34.4c-1.6 0-3.15.45-4.5 1.2z"}),(0,o.jsx)("path",{fill:"#2684fc",d:"M59.8 53H27.5L13.75 76.8c1.35.8 2.9 1.2 4.5 1.2h50.8c1.6 0 3.15-.45 4.5-1.2z"}),(0,o.jsx)("path",{fill:"#ffba00",d:"M73.4 26.5l-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3L43.65 25 59.8 53h27.45c0-1.55-.4-3.1-1.2-4.5z"})]})})},284611:(e,t,n)=>{n.d(t,{b:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M16.153 5.05a2.875 2.875 0 0 0-5.75 0v3.6a2.875 2.875 0 1 0 5.75 0zm-4.5 3.6v-3.6a1.625 1.625 0 1 1 3.25 0v3.6a1.625 1.625 0 1 1-3.25 0"}),(0,o.jsx)("path",{d:"M8.013 10.732a.625.625 0 0 1 .87.16 5.33 5.33 0 0 0 4.395 2.308 5.33 5.33 0 0 0 4.395-2.309.625.625 0 1 1 1.029.71 6.58 6.58 0 0 1-4.8 2.82v1.929h3.426a.625.625 0 0 1 0 1.25h-8.1a.625.625 0 1 1 0-1.25h3.425v-1.93a6.58 6.58 0 0 1-4.8-2.818.625.625 0 0 1 .16-.87m1.206-6.607H2.25a.625.625 0 1 0 0 1.25h6.969zm-6.969 7h4.24c.119.401.283.83.505 1.25H2.25a.625.625 0 1 1 0-1.25"}),(0,o.jsx)("path",{d:"M2.25 14.625h6.269c-.5.272-.923.67-1.067 1.25H2.25a.625.625 0 1 1 0-1.25m0-7h6.969v1.25H2.25a.625.625 0 1 1 0-1.25"})]})},r=(0,n(340498).wt)("microphoneText",i)},285288:(e,t,n)=>{n.d(t,{A:()=>o});const o=(0,n(604341).exposeDebugValue)("PeekViewScrollerStore",new(n(17090).A))},285790:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){let{icon:o,isDarkIconColor:r,caption:a,hasBackground:s,showShadow:l,disableBackground:c,style:d,iconStyle:u,hoveredStyle:p,pressedStyle:m,captionStyle:g,disabledFeedback:f,isBlue:v,isPurple:h,isLightIconColor:_,...b}=e;const y=Boolean(a),S=(0,n(401497).IS)((e=>({button:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,borderRadius:6,height:24,width:y?"none":24,padding:y?"0 6px":0,...s&&{background:e.whiteButtonBackground},...l&&{boxShadow:e.shadowSM},...d},icon:{width:14,height:14,fill:h?"dark"===e.mode?e.accentColors.purple[800]:e.accentColors.purple[400]:v?e.blueColor:r?e.regularIconColor:_?e.lightIconColor:e.mediumIconColor,...u},caption:{fontSize:12,fontWeight:n(284371).Wy.medium,textTransform:"uppercase",letterSpacing:.5,color:e.text.secondary,marginLeft:4,...g||{}},hovered:{...s&&{background:e.whiteButtonHoveredBackground},...v&&{background:e.outlineBlueButtonHoveredBackground},...c&&{background:"none"},...p},pressed:{...s&&{background:e.whiteButtonPressedBackground},...v&&{background:e.outlineBlueButtonPressedBackground},...c&&{background:"none"},...m}})),[y,g,c,s,p,u,v,r,h,m,l,d,_]),w=(0,n(847249).K8)((()=>o(S.icon)),[o,S.icon]);return(0,i.jsxs)(n(704152).A,{style:S.button,disabledFeedback:f??!0,hoveredStyle:S.hovered,pressedStyle:S.pressed,ref:t,...b,children:[w,a&&(0,i.jsx)("div",{style:S.caption,children:a})]})}const a=o.memo(o.forwardRef(r),n(821062).A)},286088:(e,t,n)=>{n.d(t,{B2:()=>M,FO:()=>B,K3:()=>P,Ku:()=>A,Ne:()=>x,Q9:()=>C,SB:()=>k,j0:()=>T,q2:()=>w,uP:()=>I});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(416504),l=()=>n(591779),c=()=>n(450648),d=()=>n(534177),u=()=>n(884107),p=()=>n(862292),m=()=>n(951177),g=()=>n(812072),f=()=>n(972435),v=()=>n(906537),h=()=>n(141333),_=()=>n(351360),b=()=>n(430483),y=()=>n(195613),S=()=>n(285288);function w(){const e=(0,i().WS)();return(0,a().IS)((t=>{const n="dark"===t.mode?t.accentColors.purple[900]:t.accentColors.purple[400];return{purpleButton:{padding:4,fontWeight:600,color:n},keyboardShortcut:{textTransform:"uppercase",fontWeight:500,fontSize:11,marginLeft:6,color:t.text.tertiary,display:e?"none":void 0},lightweightButton:{display:"flex",alignItems:"baseline",justifyContent:"center",fontSize:14,padding:"5px 8px",borderRadius:6,color:t.text.secondary,height:32,marginTop:2},returnIndicatorIconStyles:{width:14,height:14,paddingLeft:4,fill:t.lightIconColor},keyboardShortcutInverted:{color:t.text.contrastSecondary,paddingLeft:4},writingLabel:{flex:1,color:n,fontWeight:500,flexDirection:"row",gap:6,display:"flex",alignItems:"center"},inputActions:{height:36,display:"flex",alignSelf:"flex-end",alignItems:"center"},loadingDots:{backgroundColor:n}}}),[e])}function k(e){if("completionPopup"===e.type||"assistantCompletionPopup"===e.type)return e}function I(e){return"initialPromptForAIBlock"===e.stage?"aiBlock":e.context.type}function x(e){return"initialPromptForAIBlock"===e.stage?"write":function(e){switch(e.type){case"cursor":return"write";case"blockSelection":case"textSelection":return"edit"}}(e.context)}function A(e){v().clear(e)}function C(e){if("initialPromptForAIBlock"===e.stage){const t=e.originRef.current;if(!t)return;return{origin:t.getBoundingClientRect(),scrollerStore:P(e.store.getRecordStoreUIRoot())}}return{origin:e.context.origin,scrollerStore:e.context.scrollerStore}}function T(e){const{areWeLoading:t,scrollerStore:n,resetWhenScrolledToBottom:i}=e,a=(0,l().ZC)(t);(0,o.useEffect)((()=>{t!==a&&c(!1)}),[t,a]);const[s,c]=(0,o.useState)(!1),d=(0,r().K8)((()=>(null==n?void 0:n.state.elementRef)??{current:null}),[n]),u=(0,h().yE)(d),p=(0,h().CR)(d),m=(0,h().o7)(d),g=(0,l().ZC)(u),f=p-m;return(0,o.useEffect)((()=>{void 0!==g&&void 0!==u&&g-u>1&&c(!0)}),[u,g]),(0,o.useEffect)((()=>{i&&void 0!==u&&void 0!==f&&Math.abs(u-f)<1&&c(!1)}),[f,u,i]),s}function M(e){const{scrollerRef:t,areWeLoading:n,unpauseAfterMs:i}=e,[a,s,l]=function(e){const t=(0,o.useRef)(e),[n,i]=(0,o.useReducer)(((e,n)=>{const o=n instanceof Function?n(e):n;return t.current=o,o}),e);return[n,t,i]}(!1),c=(0,o.useRef)(void 0),d=(0,r().K8)((()=>b().zD.disableWriterAutoFollow()),[]);return(0,o.useEffect)((()=>{const e=t.current;if(e&&!d){if(n){let t;const n=()=>{!1!==i&&(t&&window.clearTimeout(t),t=void 0)},o=()=>{if(!1===i)return;n();const e=c.current;e&&(t=window.setTimeout((()=>{e===c.current&&(c.current=void 0),l(!1)}),Math.max(0,i-(Date.now()-e))))};s.current&&o();const r=e=>{Math.abs(e.deltaY)>0&&0===e.deltaX&&(l(!0),c.current=Date.now(),o())};return e.addEventListener("wheel",r),()=>{n(),e.removeEventListener("wheel",r)}}c.current=void 0,l(!1)}}),[n,t,s,l,i,d]),d||a}function P(e){return e===_().default.state.mainEditorCurrentBlockStore?y().A:S().A}async function B(e,t){const n=f().A.getIntl(),o=(0,c().r4)({intl:n,textValue:t.getBlockTitleStore().getValue(),getRecordModel:t.getRecordModel,userTimeZone:(0,s().P)()}),i=t.getRenderableContentStores().map((e=>e.getValue())).filter(d().O9),r=await u().R.clipboardActions.load(),a=await p().T.formulas.load();return{title:o,content:[r.serializePagePropertiesAsText({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue}),(0,m().ZI)({rootBlock:{...t.pointer,spaceId:t.getSpaceId()},getRecordValue:t.getRecordValue,blockValues:i,isWindows:e.device.isWindows,markdownSerializationOptions:(0,g().ez)(),markdownLinkifyIt:void 0,formulasModule:a}).markdown].filter(d().O9).join("\n\n")}}},287133:(e,t,n)=>{n.d(t,{Lc:()=>p,Zm:()=>u});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 1 0-.95.814l.755.88A7.6 7.6 0 0 0 2.375 10v1.151L1.188 9.964a.625.625 0 1 0-.884.884l2.254 2.254c.244.244.64.244.884 0l2.254-2.254a.625.625 0 1 0-.884-.884l-1.187 1.187V10a6.35 6.35 0 0 1 1.772-4.41l8.258 9.634A6.35 6.35 0 0 1 10 16.375a6.35 6.35 0 0 1-4.338-1.703.625.625 0 0 0-.85.915A7.6 7.6 0 0 0 10 17.626a7.6 7.6 0 0 0 4.472-1.448l.754.88a.625.625 0 0 0 1.041-.67L4.989 3.228a.6.6 0 0 1-.093-.144M16.22 14.411A7.6 7.6 0 0 0 17.625 10V8.849l1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.35 6.35 0 0 1-.998 3.427zM7.435 4.162A6.35 6.35 0 0 1 10 3.625c1.676 0 3.2.646 4.338 1.703a.625.625 0 1 0 .85-.916A7.6 7.6 0 0 0 10 2.375a7.6 7.6 0 0 0-3.409.802z"})},i=(0,n(340498).wt)("arrowCircleLoopSlash",o);n(898992),n(672577);var r=()=>n(129522),a=()=>n(840790);async function s(e){const{environment:t,store:o}=e;if(!o.isTransclusionType())throw new(n(416845).yI4)("Unknown transclusion type");const i=o.getRecordStoreUIParent();let s;if(s="transclusion_reference"===o.getType()?o.getTransclusionReferenceTargetStore():o,!i||!(0,n(299545).iU)(i)||!s)return;const l=function(e){return r().K.find((t=>t.getBlockStore()===e))}(s);if(!l)return;if("transclusion_container"===o.getType()){if(!(await l.confirmUnsyncTransclusionContainer()))return}else if(!(await l.confirmUnsyncTransclusionReference()))return;const c=(0,n(357625).UT)(t,n(526088).K,{block:{id:o.pointer.id,spaceId:(0,n(161479).e)(o.pointer.spaceId)}});"transclusion_reference"===o.getType()&&a().A.addUnsyncingBlockId(o.id);for await(const r of c)n(973647).Q.isSuccess(r)&&("started"===r.value.status||"succeeded"===r.value.status||("failed"===r.value.status?a().A.removeUnsyncingBlockId(o.id):(0,n(534177).HB)(r.value.status)))}var l=()=>n(878377),c=()=>n(416726);const d=(0,n(959013).YK)({unsyncTransclusionReferenceName:{id:"action.unsyncTransclusionReference.name",defaultMessage:"Unsync"},unsyncTransclusionReferenceFuzzySearch:{id:"action.unsyncTransclusionReference.fuzzySearchKeywords",defaultMessage:"Unsync ungroup"},unsyncTransclusionContainerName:{id:"action.unsyncTransclusionContainerName.name",defaultMessage:"Unsync all"},unsyncTransclusionContainerFuzzySearch:{id:"action.unsyncTransclusionContainer.fuzzySearchKeywords",defaultMessage:"Unsync all ungroup"}}),u=(0,c().Fw)({key:"unsyncTransclusionReference",displayName:d.unsyncTransclusionReferenceName,analyticsName:d.unsyncTransclusionReferenceName.defaultMessage,fuzzySearchKeywords:d.unsyncTransclusionReferenceFuzzySearch,svg:i,validators:[l().p2L,l().Lzj,l().vXb],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{s({environment:e.environment,store:e.blocks[0]})}}),p=(0,c().Fw)({key:"unsyncTransclusionContainer",displayName:d.unsyncTransclusionContainerName,analyticsName:d.unsyncTransclusionContainerName.defaultMessage,fuzzySearchKeywords:d.unsyncTransclusionContainerFuzzySearch,svg:i,validators:[l().p2L,l().fAV,l().vXb],shortcuts:["ungroup"],closeParentMenu:!0,action:e=>{s({environment:e.environment,store:e.blocks[0]})}})},287882:(e,t,n)=>{n.d(t,{J1:()=>a,PL:()=>s,Uw:()=>c,Vl:()=>r,rN:()=>d,sV:()=>l});var o=()=>n(720665),i=()=>n(869190);const r={days:o().i5,years:o().xq},a=10*r.years,s=Number(r.days);function l(e){return e&&e%r.years==0?"years":"days"}function c(e,t){return e?Math.ceil(e/r[t]):30}function d(e,t){const n=l(e),o={[n]:c(e,n)};return(0,i().up)(o,t)}},288502:(e,t,n)=>{n.d(t,{i:()=>r});n(18107),n(967357);var o=()=>n(878377);const i=(0,n(959013).YK)({fullScreenName:{id:"action.fullScreen.name",defaultMessage:"Full screen"}}),r=(0,n(416726).Fw)({key:"full screen",displayName:i.fullScreenName,analyticsName:i.fullScreenName.defaultMessage,svg:n(261403).R,validators:[o().vXb,o().ISA,o().Wir,o().AU6(o().c5w)],shortcuts:["space"],closeParentMenu:!0,track:{actionName:"full_screen"},action:(e,t,o)=>{let{environment:i,blocks:r}=t;const a=r.at(0);a&&n(797265).iy({environment:i,blockStore:a,callback:e})}})},288722:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){let{children:t}=e;const i=(0,n(484714).v3)(),r=(0,n(847249).K8)((()=>(0,n(712030).FN)(i)),[i]),a=(0,n(267419)._)();return(0,o.jsx)(n(932116).w,{type:r,size:"1em",emojiData:a,children:t})}},289068:(e,t,n)=>{n.d(t,{Re:()=>be,SM:()=>oe,CF:()=>he});var o=()=>n(645873),i=(n(898992),n(672577),n(581454),n(296540)),r=()=>n(662303),a=()=>n(484714),s=()=>n(847249),l=()=>n(401497),c=()=>n(757695),d=()=>n(584262),u=()=>n(700500),p=()=>n(987555),m=()=>n(738418),g=()=>n(959013),f=()=>n(100622),v=()=>n(821062),h=()=>n(534177),_=()=>n(284371),b=()=>n(901389),y=()=>n(778417),S=()=>n(324089),w=()=>n(751156),k=()=>n(989423),I=()=>n(38337),x=()=>n(492414),A=()=>n(753199),C=()=>n(864145),T=()=>n(722872),M=()=>n(592678),P=()=>n(731320),B=()=>n(836251),R=()=>n(906537),E=()=>n(891078),D=()=>n(353643),N=()=>n(712505),L=()=>n(93658),O=()=>n(871399),U=()=>n(255018),F=()=>n(351360);const V=function(e){const t=(0,a().v3)(),o=(0,s().K8)(j,[]);return(0,i.useEffect)((()=>{if(!o)return t.LocalBacklinkStore.initializeBacklinks({block:{id:e.store.pointer.id,spaceId:(0,n(161479).e)(e.store.pointer.spaceId)},currentUserId:t.currentUser.id,environment:t}),()=>{t.LocalBacklinkStore.destroyBacklinks(e.store.id,t)}}),[t,o,e.store.id,e.store.pointer.id,e.store.pointer.spaceId]),null};function j(){const{mainEditorCurrentBlockStore:e}=F().default.state;return Boolean(e&&"15776535-3f2c-4705-bd45-474e5ba8b46c"===e.id)}var z=()=>n(155004),H=()=>n(145214),W=()=>n(704152),q=()=>n(406699),K=()=>n(296798),G=()=>n(331542),$=()=>n(928600),Y=()=>n(16006),Q=()=>n(89924),Z=()=>n(962036),X=()=>n(21140),J=()=>n(493733),ee=n(474848);const te=(0,g().YK)({copySuccessMessage:{defaultMessage:"Copied! Now paste in any page to sync content.",id:"transclusionContainerBlock.actions.copySuccessMessage"}});function ne(e,t){const o=(0,a().v3)(),r=(0,l().DP)(),d=(0,i.useRef)(null),{disabled:p,referenceStore:m,store:v}=e,h=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),_=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),b=(0,i.useMemo)((()=>c().default.createValue(!1)),[]),x=(0,s().O$)(h),T=(0,s().K8)((()=>{const t=se(e.store,e.referenceStore);return(0,C().B)(t,x)}),[x,e.referenceStore,e.store]),N=(0,s().K8)((()=>!(T!==C().l.Selected&&T!==C().l.SelectedDescendant||n(170722).A.state.isActive||n(861841).Ay.state.isDragging||L().default.state.isActive||n(732770).A.state.isKeyboardMode)),[T]),O=(0,i.useMemo)((()=>new(n(496506).default)((()=>{const t=(0,n(900967).J)(e.store,o);return t.backlinksCount+t.inaccessibleBacklinkCount}),{debugName:"numberOfBacklinksStore"})),[o,e.store]),[U,F]=(0,i.useState)(void 0),j=(0,s().K8)((()=>e.store.getFormatStore().getKeyStore("unsync_transclusion_task_id").getValue()),[e.store]);(0,i.useEffect)((()=>{let e=!1,t=!1;return async function(){if(!j)return;const i=n(357625).BP({environment:o,eventName:n(526088).K,taskId:j});for await(const n of i){if(e)break;if("success"===n.taskStatus){F("succeeded");break}if("failure"===n.taskStatus){F(t?"failed_show_error":"failed");break}"in_progress"===n.taskStatus&&(t=!0,F("in_progress"))}}(),()=>{e=!0}}),[o,j]);const K=(0,s().K8)((()=>N?O.state:-1),[O,N]),G=(0,s().K8)((()=>!(!m||!m.pathIsDead())||!(!m||!(0,n(337567).dL)(m))),[m]),$=(0,s().K8)((()=>{if(n(780054).A.isAdminMode)return!1;if(p&&!G)return!0;const e=se(v,m);if(!e.canEdit())return!0;const t=e.findRecordStoreUIAncestor((t=>t!==e&&t instanceof n(630116).Bv&&t.getType()===u().xd.transclusionContainer));return Boolean(t.ancestor)}),[G,p,m,v]),Y=(0,s().K8)((()=>{if(!m||!v.canEdit()||!m.canEdit())return!1;const e=(0,P().i0)(v).map((e=>{let{permissionItem:t}=e;return t})),t=(0,P().i0)(m).map((e=>{let{permissionItem:t}=e;return t})),o=(0,n(433847).ny)(e,t).created.find((e=>!(0,n(68263).P3)(e)));return Boolean(o)}),[m,v]),Q=(0,s().O$)(n(227440).e),Z=(0,i.useCallback)((async()=>{y().td({environment:o,stores:[se(e.store,e.referenceStore)]}),await n(908006).default.afterNextFlush();const t=await n(884107).R.clipboardActions.load(),i=d.current;i&&o.device.isSafari?(R().setOnNode(i,o.device),t.triggerBrowserCopy(),R().clear(o)):t.triggerBrowserCopy(),function(e){k().vd(e,"transclusion_container_copy_button")}(o),n(436572).D6({label:n(972435).A.formatMessage(te.copySuccessMessage),helpUrl:(0,B().xS)("guides.transclusions")})}),[o,d,e.referenceStore,e.store]),X=(0,i.useCallback)((()=>(0,ee.jsx)(fe,{store:e.store,hasDifferingReadPermissionsFromSource:Y})),[Y,e.store]),ne=(0,i.useCallback)((()=>{D().A.state.isDragging||L().default.state.isActive||$||h.setState(!0)}),[$,h]),oe=(0,i.useCallback)((()=>{D().A.state.isDragging||L().default.state.isActive||$||h.setState(!1)}),[$,h]),re=(0,i.useCallback)((()=>{h.setState(!1),y().IU({environment:o});const t=e.store.getContentStores()[0];t&&t.getType()===u().xd.text&&(y().hc({environment:o,store:t}),n(725614).setSelectionAtStart({store:t.getBlockTitleStore()}))}),[o,h,e.store]),ae=(0,i.useCallback)((async()=>{if(0===O.state)return{canRemove:!0,canUndo:!0};const e=await ie({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.header",defaultMessage:"Delete original?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.text",defaultMessage:"These blocks are synced in {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}. If you delete the original, the blocks will no longer be synced.",values:{numberOfBacklinks:O.state}}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.remove.confirm",defaultMessage:"Delete and unsync copies"})});return{canRemove:e,canUndo:e}}),[O]),pe=(0,i.useCallback)((async()=>0===O.state||ie({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.header",defaultMessage:"Unsync this?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.text",defaultMessage:"The selected blocks will no longer be synced with the original."}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionReference.confirm",defaultMessage:"Unsync"})})),[O]),ve=(0,i.useCallback)((async()=>0===O.state||ie({header:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.header",defaultMessage:"Unsync all?"}),text:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.text",defaultMessage:"{numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}} will no longer sync with these blocks.",values:{numberOfBacklinks:O.state}}),acceptLabel:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncTransclusionContainer.confirm",defaultMessage:"Unsync all"})})),[O]),he=(0,i.useRef)(null),_e=()=>{const{isDesktop:t}=o.device;return(0,ee.jsxs)(ee.Fragment,{children:[Q&&(0,ee.jsx)(q().Ay,{popupType:q().z7.Popup,onClick:()=>function(e,t,n){y().td({environment:t,stores:[se(e,n)]}),function(e,t){k().vd(e,"transclusion_container_open_backlinks",t)}(t,{from:"action_bar"})}(e.store,o,e.referenceStore),originGap:4,renderOrigin:e=>(0,ee.jsxs)(W().A,{style:ce(r),...e,children:[K>0?(0,ee.jsx)(g().sA,{defaultMessage:"Editing in {icon} {numberOfBacklinks, plural, one {{numberOfBacklinks} other page} other {{numberOfBacklinks} other pages}}",id:"transclusionContainerBlock.editingMultiple",values:{icon:(0,n(576250).y)({width:14,transform:"rotate(180deg)",marginLeft:4,marginRight:4}),numberOfBacklinks:K}}):(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.editingOriginal",defaultMessage:"Editing original"}),Y&&(0,n(693954).Q)({width:14,fill:(0,f().k5)("orange",r).fill,marginLeft:6}),(0,n(668725).b)({width:10,fill:r.mediumIconColor,marginLeft:4})]}),render:X}),t&&(0,ee.jsx)(W().A,{style:ce(r),onClick:Z,children:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.copy",defaultMessage:"Copy and sync"})}),(0,ee.jsx)(n(496889).A,{store:se(e.store,e.referenceStore),fadeIn:!1,style:{width:30,height:void 0},iconStyle:{marginTop:1,fill:r.text.primary}})]})},be=(0,s().K8)((()=>e.store.pathIsDead()),[e.store]),ye=(0,s().K8)((()=>T!==C().l.Default||_.state||b.state),[T,_,b]),Se=(0,s().K8)((()=>!e.store.hasContent()),[e.store]),we=(0,s().K8)((()=>e.disabled||"in_progress"===U),[e.disabled,U]),ke=(()=>{const{store:t}=e,{device:n}=o,i=Boolean(e.referenceStore);return be&&i?(0,ee.jsx)(de,{store:e.store,blockType:"transclusion_container"}):$?(0,ee.jsx)(J().A,{disabled:we,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,store:e.store.getContentStore()}):(0,ee.jsxs)("div",{ref:he,className:I().lyN,style:{display:"flex"},children:[(0,ee.jsx)("span",{ref:d,style:{height:"1px",width:"1px",position:"absolute"}}),(0,ee.jsxs)("div",{style:{display:"flex",flexDirection:"column",position:ye?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%"},onMouseLeave:oe,onMouseEnter:ne,onClick:Se?t=>function(e,t,n){(0,A().SQ)({event:e,context:A().y$.EditorClick,callback:()=>{(0,M().Vt)(e)||w().createAndCommit({userAction:"TransclusionContainerBlock.handleEmptyClick",environment:n,canUndo:!0,perform:e=>{S()._N({environment:n,store:t,transaction:e})}})}})}(t,e.store,o):void 0,children:[(0,ee.jsx)(ue,{unsyncStatus:U}),(0,ee.jsx)(J().A,{disabled:we,store:e.store.getContentStore(),emptyPlaceholder:(0,ee.jsx)(me,{}),disableHoverMenu:e.disableHoverMenu||T!==C().l.SelectedDescendant||G,disableDrag:n.isMobile}),(0,ee.jsx)(V,{store:t},t.id),ye&&(0,ee.jsx)(ge,{haloShouldBeVisibleStore:_,state:T}),ye&&(0,ee.jsx)(z().s,{allowSelectionWithin:!1,children:(0,ee.jsx)(H().A,{visible:N,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{b.setState(!0)},onAnimationEnd:()=>{N||b.setState(!1)},style:le(r),children:_e()})})]})]})})();return(0,E().NW)(e.store,t,(0,i.useMemo)((()=>({renderedType:"transclusion_container",getBlockStore:()=>e.store,getNode:()=>he.current,handleCreated:re,canRemoveBlock:ae,confirmUnsyncTransclusionReference:pe,confirmUnsyncTransclusionContainer:ve})),[ae,ve,pe,re,e.store]),ke)}const oe=i.memo(i.forwardRef(ne),v().A);function ie(e){const{header:t,text:n,acceptLabel:o}=e;return new Promise((e=>{b().ui({showCancel:!0,keepFocus:!1,message:(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{style:{fontWeight:_().Wy.semibold},children:t}),n]}),items:[{label:o,color:"red",onAccept:()=>{e(!0)}}],handleCancel:()=>{e(!1)}})}))}function re(){return(0,ee.jsx)(g().sA,{defaultMessage:"Learn more about Synced blocks",id:"transclusionContainerBlock.learnMoreLabel"})}function ae(){return(0,ee.jsx)(Q().A,{topBorder:!0,children:(0,ee.jsx)(Z().A,{title:(0,ee.jsx)(re,{}),href:(0,B().xS)("guides.transclusions"),analyticsFrom:"transclusion_container_block"})})}function se(e,t){return t||e}function le(e){return{position:"absolute",zIndex:85,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:_().vc(r().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD}}function ce(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${f().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1}}function de(e){let{store:t,blockType:n}=e;const o=(0,l().DP)(),i=(0,s().K8)((()=>(0,x().Ay)({store:t,fullyQualified:!1,pageVisitSource:d().y8.LinkInPage})),[t]),r=(0,s().K8)((()=>(0,x().Ay)({store:t,openInSidePeek:!0,fullyQualified:!1,pageVisitSource:d().y8.PeekOpen})),[t]),a=(0,s().K8)((()=>N().default.isSidePeekOpen()),[]),c=(0,ee.jsx)(K().A,{href:i,altHref:r,forceAltHref:a,external:!1,inline:!0,underline:!0,children:(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.viewDeletedPage",defaultMessage:"View deleted page"})});return(0,ee.jsxs)(X().Ye,{style:{color:o.text.secondary,background:o.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,m().G)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,ee.jsx)("div",{style:{fontSize:14},children:(0,ee.jsx)(pe,{pageLink:c,blockType:n})})]})}function ue(e){let{unsyncStatus:t}=e;const n=(0,l().DP)();if(!t||"failed"===t)return null;return(0,ee.jsxs)(X().Ye,{style:{color:n.text.secondary,background:n.accentColors.gray[30],padding:"16px 16px 16px 12px",borderRadius:4},alignItems:"center",children:[(0,m().G)({width:24,height:24,flexShrink:0,marginRight:10,padding:2}),(0,ee.jsx)("div",{style:{fontSize:14},spellCheck:!1,children:(e=>{switch(e){case"in_progress":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.inProgress",defaultMessage:"Unsync operation in progress"});case"failed_show_error":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.failed",defaultMessage:"Unsync operation failed, please try again."});case"succeeded":return(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.unsyncingInProgressBanner.succeeded",defaultMessage:"Unsync operation completed successfully."});case"failed":return null;default:return(0,h().HB)(e)}})(t)}),(e=>{if("in_progress"===e)return(0,ee.jsx)(G().A,{style:{marginLeft:10}})})(t)]})}function pe(e){const{pageLink:t,blockType:n}=e;return n===u().xd.collectionView?(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.collection",defaultMessage:"The original database has been deleted and cannot be edited. {pageLink}",values:{pageLink:t}}):n===u().xd.transclusionContainer?(0,ee.jsx)(g().sA,{id:"transclusionContainerBlock.deletedContainerBanner.syncedContentPageDeleted.syncedBlock",defaultMessage:"The page with the original synced block has been deleted. {pageLink}",values:{pageLink:t}}):void(0,h().HB)(n)}function me(){const e=(0,l().DP)();return(0,ee.jsx)("div",{style:{caretColor:e.text.tertiary,color:e.text.tertiary,paddingTop:4,paddingBottom:4},children:(0,ee.jsx)(g().sA,{defaultMessage:"Click or drag blocks here, then paste in another page to sync content.",id:"transclusionContainerBlock.emptyEditingPlaceholder"})})}function ge(e){let{state:t,haloShouldBeVisibleStore:n}=e;const o=(0,s().K8)((()=>O().default.state.isOpen&&O().default.state.isHoveringPlusButton&&t===C().l.Hovered),[t]),i=t!==C().l.Default,r=(0,l().IS)((e=>({halo:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${e.transclusionBorderColor}`}})),[]);return(0,ee.jsx)(H().A,{visible:i&&!o,initial:{opacity:0},animate:{opacity:t===C().l.Hovered?.45:1,scale:1},exit:{opacity:0},onAnimationStart:()=>{n.setState(!0)},onAnimationEnd:()=>{i||n.setState(!1)},className:I().ncb,style:r.halo})}function fe(e){let{store:t,hasDifferingReadPermissionsFromSource:n}=e;const o=(0,l().DP)(),i={menuType:T().gu.Popup,width:400},r=(0,s().K8)((()=>t.getNavigableBlockStore()),[t]),a=(0,s().K8)((()=>r&&(0,x().Ay)({store:r,fullyQualified:!1,pageVisitSource:d().y8.Breadcrumb})),[r]),c=n&&r?(0,ee.jsx)(K().A,{underline:!0,inline:!0,href:a,style:{color:o.text.secondary},children:(0,ee.jsx)(Y().A,{store:r,style:{display:"inline"},shouldWrap:!0,maxLength:30})}):void 0;return(0,ee.jsxs)($().A,{...i,children:[n&&r&&(0,ee.jsx)(Q().A,{style:{background:o.sidebarSecondaryBackground},children:(0,ee.jsxs)("div",{style:{display:"flex",fontSize:12,padding:"6px 16px"},children:[(0,p().T)({width:16,marginTop:6,marginRight:8,color:o.regularIconColor}),(0,ee.jsx)("div",{style:{flexGrow:1,minWidth:0},children:(0,ee.jsx)("span",{style:{overflowWrap:"break-word"},children:(0,ee.jsx)(g().sA,{defaultMessage:"Viewership permissions on this page are different from the original page <page></page>. Some members might not have access.",id:"transclusionContainerBlock.differingPermissionsWarning",values:{page:()=>c}})})})]})}),(0,ee.jsx)(Q().A,{topBorder:n,children:(0,ee.jsx)(U().A,{type:"transclusion_container",store:t,originalTransclusionStore:t,disableArrow:!0})}),(0,ee.jsx)(ae,{})]})}function ve(e,t){const o=(0,g().tz)(),r=(0,i.useRef)(null),a=(0,s().K8)((()=>e.store.getTransclusionReferenceTargetStore()),[e.store]),c=(0,s().K8)((()=>a&&a.canRead()),[a]),d=(0,s().K8)((()=>e.store.useCrdt()!==(null==a?void 0:a.useCrdt())),[e.store,a]),u=(0,l().IS)((e=>({paddedContainer:{paddingTop:8,paddingBottom:8}})),[]),p=(0,s().K8)((()=>null==a?void 0:a.isReady()),[a]);return(0,E().NW)(e.store,t,(0,i.useMemo)((()=>({renderedType:"transclusion_reference",getNode:()=>{const e=r.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(()=>{if(!a||!p)return null;if(!c)return(0,ee.jsx)(z().s,{allowSelectionWithin:!1,style:u.paddedContainer,children:(0,ee.jsx)(be,{targetStore:a})});const t=(0,ee.jsx)(oe,{store:a,disabled:e.disabled,intl:o,referenceStore:e.store,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,ref:r});return d?(0,ee.jsx)(z().s,{allowSelectionWithin:!0,children:(0,ee.jsx)(n(261237).c,{displayName:"TransclusionReferenceBlock.mixedCrdtTransclusion",disabled:!1,children:t})}):t})())}const he=i.memo(i.forwardRef(ve),v().A),_e={RestrictedTransclusionBlockContent:new(o().O2)("RestrictedTransclusionBlockContent",(async()=>Promise.all([n.e(67032),n.e(2865)]).then(n.bind(n,190553))))},be=(0,o()._h)(_e.RestrictedTransclusionBlockContent,(e=>e.default))},289117:(e,t,n)=>{n.d(t,{Y:()=>o});function o(){return!1}},291050:(e,t,n)=>{n.d(t,{Ay:()=>d,Zw:()=>c});var o=n(296540),i=()=>n(662303),r=()=>n(819121),a=()=>n(401497),s=()=>n(284371),l=n(474848);const c={fontSize:12,paddingTop:2,paddingBottom:2};function d(e){const[t,n]=(0,o.useState)(!1),{isInComment:c}=e,d=(0,a().IS)((n=>({root:{width:"100%",fontSize:14,fontFamily:s().vc(i().locale).sans,color:n.text.secondary,borderRadius:4,background:n.embedPlaceholderBackground,position:"relative",...e.style},right:{position:"absolute",top:4,right:4,transition:"opacity 200ms ease-in",opacity:e.shouldHideRight&&!t?0:1},inner:{padding:12,paddingRight:36,display:"flex",alignItems:"center",textAlign:"left",width:"100%",overflow:"hidden",...c?{padding:"8px 10px 10px 8px",paddingRight:10,gap:10}:{}},iconContainer:c?{background:n.tint.regular,height:32,width:32,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0}:{},icon:{width:25,height:25,flexShrink:0,marginRight:12,fill:n.mediumIconColor,...e.iconStyle},children:c?{color:n.text.secondary}:{}})),[e.style,e.shouldHideRight,e.iconStyle,t,c]);return(0,l.jsxs)("div",{style:d.root,onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,r().p)(t)&&n(!0)},onBlur:()=>n(!1),children:[(0,l.jsxs)("div",{style:d.inner,children:[(0,l.jsx)("div",{style:d.iconContainer,children:e.iconSvg(d.icon)}),(0,l.jsx)("div",{style:{...s().RC,...d.children},children:e.children})]}),e.right&&(0,l.jsx)("div",{style:d.right,children:e.right})]})}},291075:(e,t,n)=>{n.d(t,{F:()=>i,o:()=>a});var o=()=>n(206267);function i(){return{currentScreen:"none",selection:{allSelected:!0,selectedRepos:[],excludedRepos:[],ingestNewRepos:!0},status:"not_started",sessionId:o().JW(),analyticsFrom:"unknown",authUrl:void 0,githubOrg:void 0,isConnected:!1,isPersonalAuthComplete:!1,isDisconnecting:!1,forceShowGithubAuthNotificationTriggeredAt:void 0,isLoaded:!1}}class r extends(()=>n(757695))().default{getInitialState(){return i()}}const a=new r;(0,n(604341).exposeDebugValue)("githubAIConnectorStore",a)},292167:(e,t,n)=>{n.d(t,{s:()=>u});n(16280);var o=()=>n(584262),i=()=>n(700500),r=()=>n(179034),a=()=>n(343666),s=()=>n(780054),l=()=>n(108944),c=()=>n(630116),d=()=>n(246826);function u(e){const{environment:t,parentBlockStore:n,targetStore:u,transaction:p,isPagePreview:m}=e;if(!u.isDefined())throw new Error("Target store was not defined.");if(!n.isDefined())throw new Error("Parent block store was not defined.");const g=u instanceof c().Bv;let f;if(!g){if(l().Nq(u)&&u.isDefined()){const e=u.getParentStore(),t=null==e?void 0:e.getParentStore();var v;if(null!=e&&e.isDefined())f=null==t||null===(v=t.getModel())||void 0===v?void 0:v.getRenderUrl({getRecordModel:u.getRecordModel,baseUrl:s().A.domainBaseUrl,discussionId:e.id,pageVisitSource:o().y8.LinkInPage})}}const h=d().Wv({environment:t,type:i().xd.alias,format:{alias_pointer:{table:g?r().ev:a().SN,id:u.id,spaceId:u.getSpaceIdFromValue()||u.getSpaceId()},comment_alias_url:f,alias_page_preview:m||void 0},spaceId:n.getSpaceId(),inMemoryRecordCache:n.inMemoryRecordCache,transaction:p}).pointer.id;return c().Bv.createChildStore(n.getContentStore(),{table:r().ev,id:h,spaceId:n.getSpaceId()})}},293596:(e,t,n)=>{n.d(t,{B:()=>o});n(944114);class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{};this.buckets={},this.count=0,this.total=0,this.unique=0,this.startedAt=new Map,this.logger=e}async measureErrors(e,t,n,o){const i=`${e} ${++this.unique}`;this.start(i);try{const e=await o();return this.end(i,t),e}catch(r){throw this.end(i,n,r),r}}get average(){return Math.floor(this.total/this.count)}get summary(){const e=[];e.push(`avg ${this.average}ms for ${this.count} calls`);for(const[t,o]of(0,n(534177).WP)(this.buckets)){if(!o)continue;const n=Math.floor(o.total/o.count),i=(o.count/this.count*100).toFixed(2);e.push(`[${t}: ${i}% avg ${n}ms]`)}return e.join(" ")}start(e){this.startedAt.set(e,"object"==typeof performance?performance.now():Date.now())}end(e,t){const n=this.startedAt.get(e);if(!n)return;this.startedAt.delete(e);const o=("object"==typeof performance?performance.now():Date.now())-n;this.count++,this.total=this.total+o;let i=this.buckets[t];i||(i={count:0,total:0},this.buckets[t]=i),i.count++,i.total=i.total+o;for(var r=arguments.length,a=new Array(r>2?r-2:0),s=2;s<r;s++)a[s-2]=arguments[s];this.logger(`end ${e} ${t}: ${o}ms`,...a)}}},294917:(e,t,n)=>{n.d(t,{J:()=>r});var o=()=>n(763884),i=()=>n(787812);function r(e){const{environment:t,groupFormat:n,toggleStateStore:r,newValue:a,collectionContextStore:s}=e,l=s.collectionViewStore();l&&(r.setState(a),o().K.set({userId:t.currentUser.id,key:(0,i().i)(l.id,n),value:a}))}},295169:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});n(16280);var o=()=>n(925193),i=()=>n(604341);const r=10*n(720665).Xb;class a extends(()=>n(757695))().default{constructor(){super(...arguments),this.nextSessionId=void 0}getInitialState(){return{activeAiSessionId:void 0,sessions:{},lastSessionInitializedUnixEpochTime:Date.now()}}clearAllSessions(){this.reset()}getActiveSessionId(){return this.state.activeAiSessionId}getNextSessionId(){return this.nextSessionId||(this.nextSessionId=(0,o().gC)()),this.nextSessionId}getNextSessionIdAndIncrement(){const e=this.getNextSessionId();return this.nextSessionId=(0,o().gC)(),e}getActiveSession(){const e=this.state.activeAiSessionId;if(e)return this.state.sessions[e]}getActiveAssistantConfigurationStore(){var e;return null===(e=this.getActiveSession())||void 0===e?void 0:e.assistantConfigurationStore}getActiveAssistantConfigurationState(){var e;return null===(e=this.getActiveAssistantConfigurationStore())||void 0===e?void 0:e.state}getSessionContext(e){return this.state.sessions[e]}getSessionContextOrThrow(e){const t=this.getSessionContext(e);if(!t)throw new Error("No assistant context for given session");return t}setActiveSessionId(e){this.update((t=>({...t,activeAiSessionId:e})))}setNewActiveSession(e){const{sessionId:t,context:n}=e;this.update((e=>({...e,activeAiSessionId:t,sessions:{...e.sessions,[t]:n},lastSessionInitializedUnixEpochTime:Date.now()})))}addNewSession(e){const{sessionId:t,context:n}=e;this.update((e=>({...e,sessions:{...e.sessions,[t]:n}})))}endCurrentSession(){this.update((e=>({...e,activeAiSessionId:void 0})))}setLastSessionInitializedUnixEpochTime(){this.update((e=>({...e,lastSessionInitializedUnixEpochTime:Date.now()})))}wasActiveSessionLastOpenedOutsideOfHistorySavedWindow(){const e=this.state.lastSessionInitializedUnixEpochTime;return!e||Date.now()-e>=r}}const s=new a,l=s;(0,i().exposeDebugValue)("AssistantRegistryStore",s),(0,i().exposeDebugValue)("getTranscript",(()=>{var e;const t=(null===(e=s.getActiveSession())||void 0===e?void 0:e.evaluator.getTranscript())??[];return JSON.stringify(t)}))},295740:(e,t,n)=>{n.d(t,{AD:()=>l,Hz:()=>v,Id:()=>S,b2:()=>y,cm:()=>p,dv:()=>r,hU:()=>h,ip:()=>d,ph:()=>s,qb:()=>f,sT:()=>b,sr:()=>w,tD:()=>u,t_:()=>g,xr:()=>k});var o=()=>n(713972);const i="data-content-editable-leaf",r={[i]:!0},a="data-content-editable-root",s={[a]:!0},l="data-content-editable-error",c="data-content-editable-root-tiny-selection-trap",d={[c]:!0},u="data-content-editable-selecting",p="data-content-editable-composing",m="data-content-editable-void",g={[m]:!0};function f(e){return o().vq(e)&&e.hasAttribute(i)}function v(e){return o().vq(e)&&e.hasAttribute(c)}function h(e){return Boolean(o().vq(e)&&e.querySelector(`[${i}]`))}function _(e){return o().vq(e)&&e.hasAttribute(a)}function b(e){return o().EV(e,f)}function y(e,t){return e.parentElement===t?e:o().EV(e,(e=>e.parentElement===t))||e}function S(e,t){if(!e||!t)return!1;const n=w(e),o=w(t);return Boolean(n&&n===o)}function w(e){const t=o().EV(e,(e=>_(e)||function(e){return o().vq(e)&&e.hasAttribute(m)}(e)));if(t&&_(t))return t}function k(e){return o().EV(e,(e=>function(e){return o().vq(e)&&e.hasAttribute(l)}(e)))}},296206:(e,t,n)=>{n.d(t,{Av:()=>_,BI:()=>h,Hp:()=>d,Q_:()=>g,Z3:()=>m,ZX:()=>p,bp:()=>s,dC:()=>u,l8:()=>f,o2:()=>l,qX:()=>v,sM:()=>c,wZ:()=>b});var o=()=>n(116225),i=()=>n(498212),r=()=>n(989423),a=()=>n(508496);function s(e,t){r().vd(e,"open_mention_menu",t),a().default.logEvent("open_mention_menu",void 0,t)}function l(e,t){const{clickIndexLocal:n,clickIndexGlobal:o}=t,i=void 0!==n?1/(n+1):void 0,s=void 0!==o?1/(o+1):void 0,l={...t,localReciprocalRank:i,globalReciprocalRank:s};r().vd(e,"insert_mention_from_mention_menu",l),a().default.logEvent("insert_mention_from_mention_menu",i,l)}function c(e,t){r().vd(e,"mention_menu_abandon",t),a().default.logEvent("mention_menu_abandon",void 0,t)}function d(e,t){r().vd(e,"mention_user",{mentioned_user_id:(0,i().ot)(t.user_id),mentioned_user_access_level:t.user_access_level,from:t.from,block_type:t.block_type,share_menu_selection:t.share_menu_selection}),a().default.logEvent("mention_user",t.user_access_level,t),t.is_current_user||"none"===t.user_access_level||"reader"===t.user_access_level||o().u4({name:"mention_other_user"})}function u(e,t){r().vd(e,"mention_group",{mentioned_group_id:(0,i().ot)(t.group_id),from:t.from,block_type:t.block_type})}function p(e,t){r().vd(e,"hover_mention_group",{group_id:(0,i().ot)(t.group_id)})}function m(e,t){r().vd(e,"hover_page_mention_start",t)}function g(e,t){r().vd(e,"hover_page_mention_end",t)}function f(e,t){r().vd(e,"page_mention_click",t)}function v(e,t){r().vd(e,"mention_date",t)}function h(e,t){r().vd(e,"mention_page",{mentioned_page_id:(0,i().ot)(t.page_id),from:t.from,block_type:t.block_type})}function _(e,t){r().vd(e,"hyperlink_hover",t),a().default.logEvent("hyperlink_hover",t.type,void 0)}function b(e,t){r().vd(e,"link_mention_hover",t),a().default.logEvent("link_mention_hover",t.type,void 0)}},296511:(e,t,n)=>{n.d(t,{V:()=>d,h:()=>c});var o=()=>n(38337),i=()=>n(921855),r=()=>n(129522),a=()=>n(24973),s=()=>n(989423);var l=()=>n(778417);function c(e){let{blockStore:t,entrypoint:n,environment:o}=e;const i=!t.getPropertyValue("alt_text");a().A.setState({open:!0,blockStore:t,originRect:u(t),isEmptyOnOpen:i}),function(e,t){s().vd(e,"alt_text_open",t)}(o,{entrypoint:n,is_empty:i})}function d(e){let t=0,n=!1;const o=a().A.state.blockStore;a().A.state.open&&null!=o&&o.getPropertyValue("alt_text")&&(t=(0,i().r4)(o.getPropertyValue("alt_text"),o).length,n=a().A.state.isEmptyOnOpen),function(e,t){s().vd(e,"alt_text_close",t)}(e,{number_of_characters:t,did_create:n}),a().A.setState({open:!1,blockStore:o}),l().IU({environment:e})}function u(e){var t;const n=r().K.findNodeFromStore(e);return n&&n instanceof Element?null===(t=n.querySelector(`.${o().bmm}`))||void 0===t?void 0:t.getBoundingClientRect():void 0}},296798:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){let{inline:o,underline:r,style:a,innerStyle:s,discussionStore:l,disableForOffline:c,...d}=e;const u=(0,n(484714).Y0)(),p=(0,n(106412).Zp)(),m=null==p?void 0:p.disablePageLinks,g=(0,n(401497).IS)((()=>({root:{display:o?"inline":"block",color:n(100622).Ay.inherit,textDecoration:"none",...r&&{textDecoration:"underline"},...a,...s}})),[o,s,a,r]);let f;return null!=l&&l.id&&(f=`discussion-id-${null==l?void 0:l.id}`),(0,i.jsx)(n(704152).A,{style:g.root,mobileFeedback:u.isMobile,ref:t,className:f,...d,...(m||c)&&{href:void 0,metaHref:void 0,onClick:void 0,disabled:!0}})}const a=o.forwardRef(r)},297727:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},297872:(e,t,n)=>{n.d(t,{A:()=>c});n(296540);var o=()=>n(790748),i=()=>n(847249),r=()=>n(79043),a=()=>n(447438),s=()=>n(805751),l=n(474848);function c(e){let{capture:t,allowMenuList:n,allowEsc:c,allowUndo:d,allowMobileAutoScroll:u,allowTabUntab:p,allowOpenLinkMenu:m,allowSearch:g,allowCopyPaste:f,allowBackspace:v,debugName:h,keyboardAreaPriority:_,render:b}=e;(0,o().b)(a().A,(()=>({capture:t,allowMobileAutoScroll:u})),[t,u]);const y=(0,r().A)(t),S=(0,i().K8)((()=>b(y)),[b,y]);return(0,l.jsx)(s().A,{debugName:h??"IgnoreArea",capture:t,allowMenuList:n,allowEsc:c,allowUndo:d,allowTabUntab:p,allowOpenLinkMenu:m,allowSearch:g,allowCopyPaste:f,allowBackspace:v,priority:_,children:S})}},299545:(e,t,n)=>{n.d(t,{$R:()=>b,Bw:()=>B,Lz:()=>T,Md:()=>k,No:()=>j,O3:()=>R,P4:()=>O,Yu:()=>Y,_C:()=>X,_p:()=>y,bN:()=>w,c7:()=>S,dd:()=>z,eK:()=>K,eP:()=>H,g5:()=>$,gp:()=>q,hS:()=>J,hq:()=>E,iU:()=>ee,j3:()=>te,jA:()=>G,jP:()=>W,nw:()=>Q,oC:()=>N,qE:()=>L,rY:()=>P,uB:()=>F,uy:()=>D,wc:()=>V,wm:()=>U,zo:()=>C});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(430670),n(581454),n(908872);var o=()=>n(601813),i=()=>n(696706),r=()=>n(801634),a=()=>n(179034),s=()=>n(343666),l=()=>n(946064),c=()=>n(96689),d=()=>n(854150),u=()=>n(919709),p=()=>n(220719),m=()=>n(496603),g=()=>n(630116),f=()=>n(752885),v=()=>n(972435),h=()=>n(108944);const _=128;function b(e){return e.table===d().yK}function y(e){return e.table===a().ev}function S(e){return B(e,{recursivelyLoadAllDiscussions:!1}).filter(te)}function w(e){return(0,g().G_)(e,e.pointer,"discussions")}function k(e){let t=0;return e.findRecordStoreUIAncestor((n=>(n!==e&&e.id&&n.id===e.id&&n.table===e.table&&m().n4(e.path,n.path)&&t++,!1))),t>1}const I=new(f().p)({debugName:"recursiveChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return x({blockStore:e,traverseTransclusionReferences:!0}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function x(e){const{blockStore:t,traverseTransclusionReferences:o}=e;if(k(t))return[];return t.getContentStores().map((e=>{const t=e.getType();if(t){if("transclusion_reference"===t){if(!o)return;const t=e.getTransclusionReferenceTargetStore();return t||void 0}return e}})).filter(n(534177).O9)}const A=new(f().p)({debugName:"recursiveWihTransclusionChildBlocks",memoizeRecursion:!0,deepEquals:!1,compute:function(e,t){return x({blockStore:e,traverseTransclusionReferences:!1}).flatMap((e=>[e,..."page"===e.getType()?[]:t(e)]))}});function C(e){const{blockStore:t,transclusionReferences:n,childPages:o}=e,i=("recurseInto"===n?I:A).getStateFor(t);return"includeWithoutRecursion"===o?i:i.filter((e=>!e.isType("page")))}function*T(e){const{blockStores:t,traverseTransclusionReferences:n}=e;for(const o of t){yield o;for(const e of C({blockStore:o,transclusionReferences:n?"recurseInto":"omit",childPages:"omit"}))yield e}}const M=new(f().p)({debugName:"loadedDiscussionStores",memoizeRecursion:!1,deepEquals:!1,compute:function(e){const t=w(e),o=((null==t?void 0:t.getValue())||[]).map((t=>g().sk.createChildStore(e,i().L3.fromPointerLike({table:n(197959).$Y,id:t,spaceId:e.pointer.spaceId}))));return o.reverse(),o}});function P(e){return e.table===s().SN}function B(e,t){const n=t.excludeSelf?[]:[e],o=null!=t&&t.recursivelyLoadAllDiscussions?[...n,...C({blockStore:e,transclusionReferences:"recurseInto",childPages:"omit"})]:n,i=new Set;return o.flatMap(M.getStateFor).filter((e=>{if(!(null!=t&&t.includeLoadingDiscussions||e.isDefined()))return!1;if(i.has(e.id))return!1;if(null!=t&&t.onlyIncludePropertyDiscussions){if(void 0===e.getPropertyId())return!1}else if((null==t||!t.includePropertyDiscussions)&&void 0!==e.getPropertyId())return!1;return i.add(e.id),!0}))}function R(e,t){return D(B(e,t)).unresolved}function E(e,t){return D(B(e,t)).resolved}function D(e){const t=e.filter((e=>e.isDefined())),[n,o]=m().jB(t,(e=>e.getResolved()));return{resolved:n,unresolved:o}}function N(e,t){return(Array.isArray(e)?e:R(e,t)).reduce(((e,n)=>{const o=n.getModel();return o?t.onlyIncludeBlockLevelDiscussions&&!te(n)?e:e+(o.getComments()||[]).length:e}),0)}function L(e,t,n){let o=Array.isArray(e)?e:R(e,t);return n&&(o=o.filter((e=>e.getPropertyId()===n))),o.reduce(((e,n)=>{const o=n.getModel();return o?t.onlyIncludeBlockLevelDiscussions&&!te(n)?e:{comments:e.comments+(o.getComments()||[]).length,reactions:e.reactions+g().Lk.getUserVisibleReactions(n).length,hasSuggestionDiscussions:!!e.hasSuggestionDiscussions||"suggestion"===o.getType(),hasDefaultDiscussions:!!e.hasDefaultDiscussions||"default"===o.getType()}:e}),{comments:0,reactions:0,hasSuggestionDiscussions:!1,hasDefaultDiscussions:!1})}function O(e){return!!U(e)&&0===function(e,t){return R(e,t).length}(e,{recursivelyLoadAllDiscussions:!1})}function U(e){if("text"!==e.getType())return!1;const t=e.getBlockTitleStore().getValue();return(!t||!t.length)&&!e.hasContent()}function F(e){return(0,g().G_)(e,e.pointer,"comments")}function V(e){if(!e)return[];const t=F(e);return(t.getValue()||[]).map((e=>g().jg.createChildStore(t,{table:s().SN,id:e,spaceId:t.pointer.spaceId})))}function j(e){if(e.isDefined())return g().sk.createChildStore(e,e.getParentPointer())}function z(e){const t=H(e);return(t.getValue()||[]).map((n=>g().Bv.createChildStore(t,i().L3.fromPointerLike({table:a().ev,id:n,spaceId:e.pointer.spaceId}))))}function H(e){return(0,g().G_)(e,e.pointer,"content")}function W(e){return(0,g().G_)(e,e.pointer,"last_edited_time")}function q(e){return(0,g().G_)(e,e.pointer,"text")}function K(e){if(e.isDefined())return g().sk.createChildStore(e,e.getParentPointer())}function G(e,t,n){return g().sk.createChildStore(e,{table:r().kz,id:t,spaceId:n})}function $(e){if(e.isDefined())return G(e,e.getActivityId(),e.getSpaceId())}function Y(e){return e.table===c().NX}function Q(e){return e.table===l().y7}(0,n(604341).exposeDebugValue)("getDiscussionStores",B);const Z=m().nF((e=>{n(857639).log(e)}),500);function X(e){let t=e,n=0;for(;t;){if(!t.isReady())return!1;if(n>=_)return Z({level:"error",from:"recordStoreHelpers",type:"areAncestorsLoaded",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;n+=1,t=(0,h().KA)(t)}return!0}async function J(e){let t=e,n=0;for(;t;){if(t.isReady()||await t.load(),n>=_)return Z({level:"error",from:"recordStoreHelpers",type:"loadAncestors",data:{message:"max depth reached",miscDataToConvertToString:{maxDepth:_,id:e.id,table:e.table,currentStoreId:t.id,currentTable:t.table}}}),!1;n+=1,t=(0,h().KA)(t)}}function ee(e){return e.table===a().ev&&m().n4(e.path,["content"])}function te(e){if(!e.isDefined())return!1;if("suggestion"===e.getType())return!1;if(e.getPropertyId())return!1;const t=e.getContext(),n=t?(0,o().l8)({discussionContextData:t,discussionType:(0,p().o9)(e.getType()),discussionId:e.id,intl:v().A.getIntl()}):void 0;if(!n)return!0;return function(e){return 0===u().j2Y(e).length}(u().JJ$(n,(t=>!u().iQL(t)||u().Orm(t)===e.id)))}},299709:(e,t,n)=>{n.d(t,{E:()=>s});var o=()=>n(476492),i=()=>n(405417),r=()=>n(810519),a=()=>n(504066);function s(e){var t;const{environment:n,collectionContextStore:s,block_id:l,property:c,property_type:d,from:u,isFromBulkActionsToolbar:p,isUnthrottled:m,collection_id:g,...f}=e,v=(0,o().sl)(s,g)||{};let h;if(null!==(t=s.currentSubitemFormatStoreForCollectionStore.state)&&void 0!==t&&t.property){h=(0,i().Tk)({blockId:l,collectionContextStore:s})?"subitem":"parent_item"}else s.currentArrowsByFormatStore.state&&(h="timeline_arrows_by");(0,r().u)(n,{block_id:l,property:c,property_type:d,property_context:h,from:u,isFromBulkActionsToolbar:p,...f,...v},m||!1),(0,a().f)({action:"edit_property",from:u,property_type:d,collectionContextStore:s})}},299917:(e,t,n)=>{n.d(t,{Ay:()=>a,dC:()=>r,vt:()=>i});const o={};let i=function(e){return e[e.Javascript=0]="Javascript",e[e.Stylesheet=1]="Stylesheet",e}({});function r(e){const t=o[e];void 0!==t&&(t.element.remove(),delete o[e])}const a=function(e){let{resourceType:t=i.Javascript,id:n,attributes:r={},async:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=o[e];if(s)return s.loaded;let l;switch(t){case i.Javascript:if(l=document.createElement("script"),l.async=a,l.src=e,void 0!==n&&(l.id=n),void 0!==r)for(const e in r)l.setAttribute(e,r[e]);break;case i.Stylesheet:l=document.createElement("link"),l.href=e,l.type="text/css",l.rel="stylesheet"}const c=new Promise(((e,t)=>{l.addEventListener("load",(()=>{e(void 0)})),l.addEventListener("error",(()=>{t()}));document.getElementsByTagName("head")[0].appendChild(l)}));return o[e]={loaded:c,element:l},c}},300857:(e,t,n)=>{n.d(t,{b:()=>a});var o=()=>n(955825),i=()=>n(620689),r=()=>n(374026);function a(e){let{discussionId:t,blockId:n,environment:a,animate:s=!0}=e;const l=(0,r().S)({discussionId:t,blockId:n}),c=document.getElementsByClassName((0,o().wV)({discussionId:t}))[0];return!(!l||!c)&&(i().hT({element:c,environment:a,scrollerContext:l.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:s}),!0)}},301421:(e,t,n)=>{n.d(t,{n:()=>i});n(898992),n(672577);class o extends(()=>n(959180))().A{findEditableWithinSelectable(e){return this.find((t=>t.getContextClosestSelectable()===e))}findEditableWithStore(e){return this.find((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findEditableWithStore(e);if(t)return t.getNode()}findStoreFromNode(e){const t=this.find((t=>t.getNode()===e));if(t)return t.props.store}}const i=new o},301523:(e,t,n)=>{n.d(t,{x:()=>a});var o=()=>n(720665),i=()=>n(246826),r=()=>n(299545);function a(e,t){const n=r().jP(e);i().KY({store:n,value:(0,o().WY)(Date.now()),transaction:t})}},301608:(e,t,n)=>{n.d(t,{Bt:()=>p,Eb:()=>r,Yr:()=>s,_v:()=>m,bo:()=>d,jf:()=>i,jy:()=>a,mj:()=>l,tV:()=>u,xV:()=>c});var o=()=>n(959013);const i=["last_7_days","last_28_days","last_90_days","all_time"];const r={last_7_days:7,last_28_days:28,last_90_days:90},a=((0,n(534177).u0)((e=>7===e||28===e||90===e?{true:e}:{false:e})),(0,o().YK)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.last7days",defaultMessage:"Last 7 Days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.last28days",defaultMessage:"Last 28 Days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.last90days",defaultMessage:"Last 90 Days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.allTime",defaultMessage:"All Time"}})),s=(0,o().YK)({last_7_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last7days",defaultMessage:"last 7 days"},last_28_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last28days",defaultMessage:"last 28 days"},last_90_days:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.last90days",defaultMessage:"last 90 days"},all_time:{id:"spaceAnalyticsUserTab.dateFilter.lowercase.allTime",defaultMessage:"all time"}});function l(e,t,n){const o=e||0,i=t||0;return n?o-i:i-o}function c(e,t,n){const o=e||-1,i=t||-1;return n?o-i:i-o}const d=(0,o().YK)({page:{id:"contentAnalyticsHeaderMessages.columnHeader.page",defaultMessage:"Page"},pageId:{id:"contentAnalyticsHeaderMessages.columnHeader.pageId",defaultMessage:"Page ID"},teams:{id:"contentAnalyticsHeaderMessages.columnHeader.teamspace",defaultMessage:"Teamspace"},audience:{id:"contentAnalyticsHeaderMessages.columnHeader.audience",defaultMessage:"Audience"},allViews:{id:"contentAnalyticsHeaderMessages.columnHeader.allViews",defaultMessage:"All views"},uniqueViews:{id:"contentAnalyticsHeaderMessages.columnHeader.uniqueViews",defaultMessage:"Unique views"},createdBy:{id:"contentAnalyticsHeaderMessages.columnHeader.createdBy",defaultMessage:"Created by"},createdAt:{id:"contentAnalyticsHeaderMessages.columnHeader.createdAt",defaultMessage:"Created at"},lastEditedBy:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedBy",defaultMessage:"Last edited by"},lastEditedAt:{id:"contentAnalyticsHeaderMessages.columnHeader.lastEditedAt",defaultMessage:"Last edited at"}});const u={num_searches:"numSearches",num_unique_users:"numUniqueUsers",ctr:"ctr"},p={numSearches:"num_searches",numUniqueUsers:"num_unique_users",ctr:"ctr"};function m(e){return e<=1?"1":e<=50?"2-50":e<=100?"51-100":e<=500?"101-500":e<=1e3?"501-1000":e<=5e3?"1001-5000":"5001-plus"}},301948:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(959013),i=()=>n(464708),r=n(474848);function a(e){return(0,r.jsx)(i().A,{color:"gray",style:e.style,content:(0,r.jsx)(o().sA,{id:"AlphaBadgeComponent.label",defaultMessage:"Alpha"})})}},302022:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{pageMap:{}}}setStatus(e,t){const{pageMap:n}=this.state;t?n[e]=!0:delete n[e],this.emit()}}const i=new o},302033:(e,t,n)=>{n.d(t,{A:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(757695);class i extends o().default{constructor(){super(...arguments),this.containerDomNodeStore=o().default.createValue(null,{name:"containerDomNodeStore"})}getInitialState(){return{overlays:new Set}}}const r=i},303626:(e,t,n)=>{n.d(t,{N:()=>i});var o=()=>n(870618);const i=(0,n(604341).exposeDebugValue)("offlineDebugger",new class{constructor(){var e=this;this.enableLogging=!1,this.operationLatency={},this.log=function(t){if(e.enableLogging){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];console.groupCollapsed(t,...o),console.trace(),console.groupEnd()}},this.generateLocalRecordMap=o().ww,this.getLocalRecord=o().h7,this.getLocalBlocksWithParent=o().wB}async measure(e,t,o){var i=this;const r=`OFFLINE: ${e}:`;return this.operationLatency[e]||(this.operationLatency[e]=new(n(293596).B)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.log(r,...t)}))),this.operationLatency[e].measureErrors(t,"hit","miss",o)}trace(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log("OFFLINE:",...t)}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.log("OFFLINE:",...t)}traceMiss(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];this.trace(`missed: record ${e}:${t}`,...o)}clearMemory(){n(666144).IL(window.__console.environment)}})},304740:(e,t,n)=>{n.d(t,{CN:()=>oe,L_:()=>J,Ql:()=>v,US:()=>se,Vp:()=>ee,WT:()=>ne,X6:()=>u,Xc:()=>m,ck:()=>W,dA:()=>te,n4:()=>le,pw:()=>ie,q3:()=>p,rS:()=>z});n(944114),n(898992),n(354520),n(581454),n(737550),n(814603),n(147566),n(198721);var o=()=>n(496603),i=()=>n(939768),r=()=>n(720665),a=()=>n(700500),s=()=>n(522419),l=()=>n(735577),c=()=>n(861017),d=()=>n(919709);const u=930,p=320,m=708,g=700,f=500;function v(e,t){if(e&&t){const n=i().qg(e).pathname||"";return n.substring(n.length-t.length,n.length).toLowerCase()===t}return!1}const h=/^(https?:)?(\/\/)?app\.hex\.tech\/[^\/]+\/app\/[^\/]+/;const _=/^(https?:)?(\/\/)?embed\.deepnote\.com\/[^\/]+/;const b=/^(https?:)?(\/\/)?gist\.github\.com\/([^\/]+\/)?[0-9a-f]+/;const y=/^(https?:)?(\/\/)?(drive|docs|sheets)\.google\.com\/(open|(document|spreadsheets|presentation)\/d\/).+/;const S=/^(https?:)?(\/\/)?docs\.google\.com\/document\/d\/[^\/]+\/edit.*/;function w(e){return S.test(e.url)}const k=/^(https?:)?(\/\/)?docs\.google\.com\/presentation\/d\/[^\/]+\/edit.*/;function I(e){return k.test(e.url)}const x=/^(https?:)?(\/\/)?docs\.google\.com\/spreadsheets\/d\/[^\/]+\/edit.*/;const A=/^(https?:)?(\/\/)?(twitter|x)\.com\/[^\/]+\/status\/[^\/]+/;const C=/^(https?:)?(\/\/)?(www\.)?google\.com\/maps\/.+/;const T=/^(https?:)?(\/\/)?framer\.cloud\/.+/;const M=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/.+/,P=/^(https?:)?(\/\/)?(www\.)?whimsical\.com\/blog\/.+/;const B=/^(https?:)?(\/\/)?(www\.)?miro\.com\/app\/.+/;const R=/^(https?:)?(\/\/)?app\.abstract\.com\/share\/.+/,E=/^(https?:)?(\/\/)?share\.goabstract\.com\/.+/;const D=/^(https?:)?(\/\/)?sketch\.(com|cloud)\/s\/.+/;const N=/^(https?:)?(\/\/)?excalidraw\.com\/.+/;const L=/^(https?:)?(\/\/)?(replit\.com|repl\.it)\/.+/;const O=/^(https?:)?(\/\/)?invis\.io\/.+/,U=/^(https?:)?(\/\/)?invisionapp\.com\/.+/,F=/^(https?:)?(\/\/)?invisionapp\.com\/inside-design\/.+/;const V=/^(https?:)?(\/\/)?(?:eu\.)?mixpanel\.com\/(project|s|public|report|p)\/.+/;const j=[".png",".jpg",".jpeg",".gif",".tif",".tiff",".bmp",".svg",".heic",".webp"];function z(e){return(0,s().JB)(e.url)||(0,s().SR)(e.url)||j.some((t=>v(e.url,t)))}const H=[".mp3",".wav",".ogg",".oga",".m4a"];function W(e){return H.some((t=>v(e.url,t)))}const q=/^(https?:)?(\/\/)?(www\.)?youtube\.com\/[watch|embed].+/,K=/^(https?:)?(\/\/)?vimeo.com\/[0-9]+/;const G=/^(https?:)?(\/\/)?([\w\.-]+\.)?figma.com\/(file|proto|board|design|slides|deck)\/([0-9a-zA-Z]{22,128})(?:\/.*)?$/;const $=/^(https?:)?(\/\/)?(www\.)?(use)?loom\.com\/share\/.+/;const Y=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/to\/.+/,Q=/^(https?:)?(\/\/)?[\w\.]+\.typeform\.com\/.+/;const Z=/^(https?:)?(\/\/)?codepen\.io\/[^\/]+\/pen\/.+/;const X=[".webm",".mkv",".flv",".flv",".vob",".ogv",".ogg",".drc",".gifv",".mng",".avi",".mov",".qt",".wmv",".yuv",".rm",".rmvb",".asf",".amv",".mp4",".m4p",".m4v",".mpg",".mp2",".mpeg",".mpe",".mpv",".mpg",".mpeg",".m2v",".m4v",".svi",".3gp",".3g2",".mxf",".roq",".nsv",".flv",".f4v",".f4p",".f4a",".f4b"];function J(e){return X.some((t=>v(e.url,t)))}function ee(e){if(!(0,l().A)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().Jx)(t)}const te={image:z,video:function(e){return J(e)||q.test(e.url)||K.test(e.url)},tweet:function(e){return A.test(e.url)},drive:function(e){return y.test(e.url)},gist:function(e){return b.test(e.url)},invision:function(e){return!z(e)&&!F.test(e.url)&&(O.test(e.url)||U.test(e.url))},framer:function(e){return T.test(e.url)},audio:W,maps:function(e){return C.test(e.url)},figma:function(e){return G.test(e.url)},loom:function(e){return $.test(e.url)},typeform:function(e){return Y.test(e.url)||Q.test(e.url)},codepen:function(e){return Z.test(e.url)},pdf:function(e){const t=i().qg(e.url);return Boolean(t.pathname&&t.pathname.indexOf(".pdf")>=0)},whimsical:function(e){return M.test(e.url)&&!P.test(e.url)},miro:function(e){return B.test(e.url)},abstract:function(e){return R.test(e.url)||E.test(e.url)},sketch:function(e){return D.test(e.url)},excalidraw:function(e){return N.test(e.url)},replit:function(e){return L.test(e.url)},embed:function(e){if(!(0,l().A)(e.url))return!1;const t=(0,c().parseRoute)({url:e.url,baseUrl:e.baseUrl,publicDomainName:e.publicDomainName,isMobile:!1,protocol:void 0,currentUrl:void 0});return!(0,c().Jx)(t)&&!r().HP(te).filter((e=>"embed"!==e)).map((e=>te[e])).some((t=>t(e)))},hex:function(e){return h.test(e.url)},mixpanel:function(e){return V.test(e.url)},deepnote:function(e){return _.test(e.url)},drawing:function(e){return!1}};function ne(e){const{preferredType:t}=e,n=r().HP(te),o=[];for(const i of n)if(te[i](e)){if(i===t&&"embed"!==t)return i;o.push(i)}return o.length>0?o[0]:"embed"}function oe(e){const{width:t,height:n,scale:o,type:i,pageWidth:r}=e,a={block_width:t,block_height:n,block_preserve_scale:Boolean(o),block_full_width:!1,block_page_width:!1};return"embed"===i||"pdf"===i?(a.block_page_width=!a.block_width,a.block_height=n||p):"video"===i&&n?(a.block_page_width=!0,a.block_aspect_ratio=n/t):"image"===i&&n?a.block_aspect_ratio=n/t:"audio"===i||"maps"===i?(a.block_width=void 0,a.block_page_width=!0):"whimsical"===i||"framer"===i||"miro"===i||"excalidraw"===i?(a.block_width=void 0,a.block_page_width=!0,a.block_height=400):"replit"===i&&(a.block_width=void 0,a.block_page_width=!0,a.block_height=600),t>r&&(a.block_page_width=!0,"image"!==i&&"video"!==i||(a.block_height=void 0)),a}async function ie(e){const{type:t,isDataURL:n,source:o,trackEmbedType:i}=e;return function(e){const{type:t,isDataURL:n,url:o}=e;if(t===a().xd.tweet||t===a().xd.gist||t===a().xd.figma||t===a().xd.audio||t===a().xd.image||n||t===a().xd.invision||t===a().xd.pdf||t===a().xd.drive&&(w({url:o})||I({url:o})))return!0;return!1}({type:t,isDataURL:n,url:o})&&i(t),t===a().xd.tweet?function(e){const{source:t}=e;return{type:"tweet",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.gist?function(e){const{source:t}=e;return{type:"gist",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.figma?function(e){const{source:t}=e,n=t.replace("www.figma.com","embed.figma.com"),o=new URL(n);return o.searchParams.append("embed-host","notion"),o.searchParams.append("footer","false"),o.searchParams.append("theme","system"),{type:"figma",properties:{source:d().x9d(o.href.toString())},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.audio?function(e){const{source:t}=e;return{type:"audio",properties:{source:d().x9d(t)},format:{display_source:void 0}}}(e):t===a().xd.image||n?function(e){const{source:t}=e;return{type:"image",properties:{source:d().x9d(t)},format:{display_source:t}}}(e):t===a().xd.invision?function(e){const{source:t}=e;return{type:"invision",properties:{source:d().x9d(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.pdf?function(e){const{source:t}=e;return{type:"pdf",properties:{source:d().x9d(t)},format:{display_source:void 0,block_height:p}}}(e):t===a().xd.drive&&w({url:o})?async function(e){const{source:t,type:n,pageWidth:o,getEmbedData:i}=e;if(t.includes("preview")){const e=await i({source:t,pageWidth:o,type:n});if(e&&!e.empty)return e}return{type:n,properties:{source:d().x9d(t)},format:{display_source:t,block_height:p}}}(e):t===a().xd.drive&&I({url:o})?async function(e){const{source:t,type:n,pageWidth:o,isMobileDevice:i,getEmbedData:r}=e,a=await r({source:t,pageWidth:o,type:n});if(a&&!a.empty)return a;return{type:n,properties:{source:d().x9d(t)},format:{display_source:t,block_height:i?p:f,block_width:g}}}(e):t===a().xd.drive&&function(e){return x.test(e.url)}({url:o})?async function(e){const{source:t,type:n,pageWidth:o,getEmbedData:i,isMobileDevice:r}=e;if(t.includes("preview")){const e=await i({source:t,pageWidth:o,type:n});if(e&&!e.empty)return e}return{type:n,properties:{source:d().x9d(t)},format:{display_source:t,block_height:r?p:f,block_width:g}}}(e):(i("generic"),async function(e){const{pageWidth:t,getEmbedData:n,source:o,type:i}=e,r=await n({source:o,pageWidth:t,type:i});if(r&&!r.empty)return r;let s=i,l={...oe({type:i,width:400,height:void 0,scale:!1,pageWidth:t}),display_source:o},c={source:d().x9d(o)};null!=r&&r.headerValidationFailed&&function(e){if("drive"===e||"figma"===e||"gist"===e||"invision"===e)return!1;return!0}(s)?(s=a().xd.bookmark,l={},c={link:d().x9d(o),title:d().x9d(o)}):(l={block_height:p},c={source:d().x9d(o)});return{type:s,properties:c,format:l}}(e))}const re=["http:","https:"],ae="http:";function se(e){if((0,s().Nh)(e))return e;const t=i().qg(e);let n=e;if(t.protocol){if(re.indexOf(t.protocol)<0){const o=e.slice(t.protocol.length);n=`${ae}${o}`}}else n=`${ae}//${(0,o().Dw)(e,"/")}`;return n}function le(e){var t,n,o,r,a;const s=i().qg(e,{slashesDenoteHost:!0});if(!s)return e;if(s.host&&s.host.endsWith(".embedly.com")&&s.query.src)return s.query.src;if("www.youtube.com"===s.hostname&&"/watch"===s.pathname&&s.query&&s.query.v)return i().Gm({url:`https://www.youtube.com/embed/${s.query.v}`,query:{...s.query,v:void 0}});if("whimsical.com"===s.hostname&&s.pathname){const e=s.pathname.split("/").slice(-1)[0];return i().Gm({url:`https://whimsical.com/embed/${e}`})}if("miro.com"===s.hostname&&s.pathname){const e=s.pathname.split("/")[3],t=s.query.playRecording?s.query.playRecording:void 0;return i().Gm({url:`https://miro.com/app/live-embed/${e}/`,query:{embedMode:t?"board_recording_player":"view_only_without_ui",autoplay:"true",playRecording:t}})}if(null!==(t=s.hostname)&&void 0!==t&&t.includes("replit.com")||null!==(n=s.hostname)&&void 0!==n&&n.includes("repl.it")){return"true"===new URLSearchParams(e).get("lite")?e:i().O$(e,{lite:"true"})}if(null!==(o=s.hostname)&&void 0!==o&&o.includes("docs.google.com")&&null!==(r=s.pathname)&&void 0!==r&&r.includes("presentation")&&null!==(a=s.pathname)&&void 0!==a&&a.includes("/edit")){const e=s.pathname.replace("/edit","/preview");return i().Gm({url:`https://${s.hostname}${e}`,query:{...s.query},hash:s.hash||void 0})}return e}},306631:(e,t,n)=>{n.d(t,{S:()=>c});n(296540);var o=()=>n(872994),i=()=>n(852507),r=()=>n(11048),a=()=>n(295740),s=()=>n(112995),l=n(474848);function c(e){let{children:t,fallback:n,from:i,getParentEl:c,onError:u,...p}=e;const m=(0,o().y)();return(0,l.jsx)(s().K,{...p,fallback:function(e){return(0,l.jsx)(r().A,{name:`${i}.ContentEditableErrorBoundary`,children:(0,l.jsx)(d,{onRender:function(){null==m||m.domLock.mutate((()=>{var e;null===(e=c())||void 0===e||e.removeAttribute(a().AD)}))},children:n(e)})})},from:i,onError:function(e){var t;null===(t=c())||void 0===t||t.setAttribute(a().AD,"true"),null==u||u(e)},children:t})}function d(e){let{children:t,onRender:n}=e;return(0,i().w)((()=>{n()})),(0,l.jsx)(l.Fragment,{children:t})}},308145:(e,t,n)=>{n.d(t,{$5:()=>o,Bz:()=>i,Z5:()=>r,al:()=>a});n(898992),n(803949),n(908872);const o=5,i=10,r=Object.entries({image:["JPG","JPEG","PNG","GIF","SVG","BMP","HEIC","TIF","TIFF","WEBP","ICO","PSD"],video:["MP4","MOV","AVI","WMV","MKV","FLV","WEBM","MPEG","M4V","3GP","3G2","OGV"],audio:["MP3","WAV","AAC","FLAC","OGG","M4A","WMA","ALAC","AIFF","OPUS","MID","MIDI"],pdf:["PDF"],slides:["PPT","PPTX","PPS","PPSX","ODP"],sheet:["XLS","XLSX","ODS","CSV","TSV"],cad:["STL","STEP"],other:["TXT","MD","LOG","DOC","DOCX","ODT","RTF"]}).reduce(((e,t)=>{let[n,o]=t;return o.forEach((t=>{e[t]=n})),e}),{});function a(e){return r.hasOwnProperty(e.toUpperCase())}},308701:(e,t,n)=>{n.d(t,{DF:()=>r,j3:()=>i,uL:()=>o});const o=90,i=275,r=32},310001:(e,t,n)=>{n.d(t,{Mo:()=>d,R7:()=>u,_I:()=>c});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(799288),i=()=>n(332393),r=()=>n(20498),a=()=>n(534177),s=()=>n(351360),l=()=>n(878710);function c(e){const{currentUserRootStore:t}=s().default.state;if(!t||!e)return!1;const n=(0,l().v3)(t,{id:e,table:i().Li}).getKeyStore("capabilities").getValue();return(0,o().qs)(n)}function d(e){const t={},n={};for(const o of e){const e=o.getIntegrationId();if(o.isInternalBot()||!e)continue;(0,r().Q2)(e)?(t[e]??=[],t[e].push(o.id)):(n[e]??=[],n[e].push(o.id))}return{compliance:t,nonCompliance:n}}function u(e){return new Set(e.filter((e=>e.isDefined()&&!e.isInternalBot())).map((e=>e.getIntegrationId())).filter(a().O9))}},310795:(e,t,n)=>{n.d(t,{LB:()=>r,jw:()=>a,qr:()=>s});var o=()=>n(508496),i=()=>n(654534);function r(){return"on"===o().default.getEligibleGroup({experimentId:"generic_importer",defaultGroup:"control"})}function a(){return o().default.checkGate({gateName:"zip_importer_enabled"})}function s(e){const t=o().default.getEligibleGroup({experimentId:"special_case_generic_file_size",defaultGroup:i().Sj.toString()});return Number(t)}},311337:(e,t,n)=>{n.d(t,{y:()=>s});var o=()=>n(731320),i=()=>n(792415),r=()=>n(351360),a=()=>n(326589);function s(e){var t;if(!(0,a().g)())return!1;if(!e.currentUser.isLoggedIn())return!0;const n=null===(t=i().A.state.publicPageData)||void 0===t?void 0:t.spaceId;if(!e.currentUser.id||!n)return!1;const s=r().default.state.mainEditorCurrentBlockStore,l=!!s&&(0,o().qb)(e,s);return Boolean(l)}},311890:(e,t,n)=>{n.d(t,{NG:()=>l,O1:()=>s});var o=()=>n(584262),i=()=>n(534177),r=()=>n(351360),a=()=>n(696746);function s(e){let{blockOrCollectionId:t}=e;const n=l({blockOrCollectionId:t});switch(n){case"home":return o().y8.PersonalHomePage;case"home_tile_recents":return o().y8.PersonalHomeTileRecents;case"home_tile_trending":return o().y8.PersonalHomeTileTrending;case"home_tile_tips":return o().y8.PersonalHomeTileTips;case"home_tile_tasks":return o().y8.PersonalHomeTileTasks;case"home_tasks":return o().y8.PersonalHomePageTasks;case"home_tile_custom_db":return o().y8.PersonalHomeTileCustomDb;case"home_custom_db":return o().y8.PersonalHomePageCustomDb;case"home_tile_similar_users":return o().y8.PersonalHomeTileSimilarUsers;case"home_tile_most_visited":return o().y8.PersonalHomeTileMostVisited;case"home_tile_last_edited":return o().y8.PersonalHomeTileLastEdited;case"home_tile_favorites":return o().y8.PersonalHomeTileFavorites;case"home_unknown":return o().y8.PersonalHomeUnknown;case"home_tile_notes":return o().y8.PersonalHomeNotes;case void 0:return;default:(0,i().HB)(n)}}function l(e){let{blockOrCollectionId:t}=e;const n=(0,a().IA)({blockOrCollectionId:t}),{mainEditorCurrentBlockStore:o}=r().default.state;if(n)switch(n){case"main":return"home";case"myTasksAssignedToMeCollectionView":case"myTasks":return(0,a().lU)(o)?"home_tile_tasks":"home_tasks";case"customDbCollectionView":case"customDb":return(0,a().lU)(o)?"home_tile_custom_db":"home_custom_db";case"trendingCollectionView":return"home_tile_trending";case"similarUsersCollectionView":return"home_tile_similar_users";case"mostVisitedCollectionView":return"home_tile_most_visited";case"lastEditedCollectionView":return"home_tile_last_edited";case"favoritesCollectionView":return"home_tile_favorites";case"trending":case"trendingCollection":case"similarUsers":case"similarUsersCollection":case"mostVisited":case"mostVisitedCollection":case"lastEdited":case"lastEditedCollection":case"favorites":case"favoritesCollection":case"posts":case"postsCollectionView":case"postsFollowingCollectionView":case"postsDiscoverCollectionView":return"home_unknown";default:(0,i().HB)(n)}}},312296:(e,t,n)=>{n.d(t,{F:()=>a});var o=()=>n(970013),i=()=>n(246826),r=()=>n(724456);function a(e){const{environment:t,collectionStore:n,update:a,transaction:s}=e,l=n.getSchema(),c=o().q(a);i().zv({store:n.getSchemaStore(),data:c,transaction:s}),(0,r().H)({environment:t,collectionStore:n,oldSchema:l,newSchema:n.getSchema(),transaction:s})}},313209:(e,t,n)=>{n.d(t,{bI:()=>z,Ur:()=>Y,m0:()=>W,oZ:()=>H,lU:()=>G,n5:()=>K});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577);var o=()=>n(700500),i=()=>n(110192),r=()=>n(522419),a=()=>n(857639),s=()=>n(416504),l=()=>n(161479),c=()=>n(919709),d=()=>n(973647),u=()=>n(939768),p=()=>n(435345),m=()=>n(584262),g=()=>n(970330),f=()=>n(612008),v=()=>n(281948),h=()=>n(186445),_=()=>n(476492),b=()=>n(519839);function y(e){const{blockId:t,collectionContextStore:n}=e,o=(0,h().sj)(t),i=(0,h().Wu)(t),r=n.isInHomeWidgetStore.state;return i?r?m().y8.PersonalHomeTileCustomDbCreate:m().y8.PersonalHomeCustomDbCreate:o?r?m().y8.PersonalHomeTileTasksCreate:m().y8.PersonalHomeTasksCreate:m().y8.Create}var S=()=>n(586481),w=()=>n(855801),k=()=>n(261450),I=()=>n(972435),x=()=>n(406792),A=()=>n(508496),C=()=>n(66496),T=()=>n(630116),M=()=>n(160568),P=()=>n(765370),B=()=>n(901389),R=()=>n(357625),E=()=>n(896628),D=()=>n(722101),N=()=>n(246826),L=()=>n(319975),O=()=>n(482287),U=()=>n(324089),F=()=>n(751156);const V=(0,n(959013).YK)({duplicateTemplateError:{id:"databaseTemplatePickerActions.duplicateTemplateFailedError.message",defaultMessage:"Duplicate template failed."}});function j(e){const{environment:t,pageStore:n,copiedFromPointer:o,addCopyName:r,transaction:a,resolveTemplateVariables:c,userAction:u}=e,m=performance.now();a.getUserActionForAnalyticsPurposesOnly()||(Q({environment:t,type:"creatorCopyOfCollectionTemplate.noUserActionFromTransaction",data:{message:`No user action from transaction for user ${t.currentUser.id}`}}),a.annotateWithUserAction(u));const g=new(T().Bv)(t,o);if(q({environment:t,store:n,properties:g.getProperties(),transaction:a}),c&&(Q({environment:t,type:"creatorCopyOfCollectionTemplate.resolveTemplateVariables",data:{message:`Resolving template variables for user: ${t.currentUser.id}`,resolveTemplateVariables:c}}),O().hz({environment:t,store:n,context:{currentUserId:t.currentUser.id,currentTimeZone:(0,s().P)()},transaction:a})),r){const e=n.getBlockTitleStore();L().R9({environment:t,store:e,value:(0,i().g)(e.getValue()),transaction:a})}const f={copied_from:o.id};N().zv({store:n,data:f,transaction:a});const{automation_id:v,app_config_uri:h,..._}=g.getFormat(),b={..._,copied_from_pointer:o};if(N().zv({store:n.getFormatStore(),data:b,transaction:a}),g.hasContent()){Q({environment:t,type:"creatorCopyOfCollectionTemplate.startDuplication",data:{message:`Starting duplication for user: ${t.currentUser.id} from pointer ${o.id} to ${n.id}`,pageStoreId:n.id}}),C().A.setStatus(n.id,!0);let e=!0,i=0;const u=performance.now(),f=A().default.checkGate({gateName:"enable_server_backed_local_duplicate_for_collection_template_picker"});a.postSubmitCallbacks.push((async v=>{if(v)return Z({environment:t,type:"creatorCopyOfCollectionTemplate.transactionPostSubmitCallbackError",data:{message:"Error on post submit callback",error:v,resolveTemplateVariables:c,pageStoreId:n.id}}),B().f1(I().A.formatMessage(V.duplicateTemplateError)),void C().A.setStatus(n.id,!1);if(f){const e=g.getSpaceId(),i=n.getSpaceId(),s={id:g.id,spaceId:g.getSpaceId()};Q({environment:t,type:"creatorCopyOfCollectionTemplate.startAttemptServerBackedLocalDuplicate",data:{message:`Starting attemptServerBackedLocalDuplicate page template duplication for user: ${t.currentUser.id} from pointer ${o.id} to ${n.id}`,sourceSpaceId:e,targetSpaceId:i,sourceBlockPointer:s,resolveTemplateVariables:c}});const l=await w().VI.duplicateActions.load(),{success:d,size:u,pageStore:p}=await l.attemptServerBackedLocalDuplicate({environment:t,sourceBlockPointer:s,targetInMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,targetBlockStore:n,userAction:a.getUserActionForAnalyticsPurposesOnly()||"",options:{deepCopyTransclusionContainers:!1,convertExternalObjectInstancesToPlaceholders:e!==i,addCopyName:r,resolveTemplateVariables:c,isTemplateInstallation:!0,appendContentOnly:!0},recordLimit:250,actionStartTimestamp:m});if(d)return Q({environment:t,type:"creatorCopyOfCollectionTemplate.successAttemptServerBackedLocalDuplicate",data:{message:`Successful attemptServerBackedLocalDuplicate page template duplication for user: ${t.currentUser.id} from pointer ${o.id} to ${n.id}`,resultPageId:p.id,size:u}}),void C().A.setStatus(n.id,!1)}await async function(){try{Q({environment:t,type:"creatorCopyOfCollectionTemplate.startDuplicateServerside",data:{message:`Duplicating server side for user: ${t.currentUser.id} from pointer ${o.id} to ${n.id}`,resolveTemplateVariables:c,sourceBlockId:o.id,targetBlock:n.id,sourceSpaceId:o.spaceId,targetSpaceId:n.pointer.spaceId}});const e=(0,R().UT)(t,p().w,{sourceBlocks:[{id:o.id,spaceId:(0,l().e)(o.spaceId)}],targetBlocks:[{id:n.id,spaceId:(0,l().e)(n.pointer.spaceId)}],addCopyName:r,appendContentOnly:!0,isTemplateInstantiation:!0,resolveTemplateVariables:!!c&&{currentUserId:t.currentUser.id,currentTimeZone:(0,s().P)()},deepCopyTransclusionContainers:!1,userAction:a.getUserActionForAnalyticsPurposesOnly()});for await(const n of e)if(Q({environment:t,type:"creatorCopyOfCollectionTemplate.duplicateServersideDuplicateBlockIteratorResponse",data:{message:"Duplicate block iterator response for server side duplication",response:n}}),d().Q.isSuccess(n)){n.value.totalBlocks>i&&(i=n.value.totalBlocks)}}catch(m){Z({environment:t,type:"creatorCopyOfCollectionTemplate.duplicateServersideError",data:{message:`Failed duplicateServerside page template duplication for user: ${t.currentUser.id} from pointer ${o.id} to ${n.id}`,e:m,pageId:n.id,resolveTemplateVariables:c}}),e=!1}finally{C().A.setStatus(n.id,!1),(0,k().E)({environment:t,success:e,time:performance.now()-u,user_action:a.getUserActionForAnalyticsPurposesOnly(),is_duplication_local:!1,duplication_size:i})}}()}))}return n}function z(e){const{environment:t,collectionStore:n,transaction:i,title:r}=e,a=N().Wv({environment:t,type:o().xd.page,inMemoryRecordCache:n.inMemoryRecordCache,transaction:i,spaceId:n.getTemplatePagesStore().pointer.spaceId,properties:{title:(0,c().x9d)(r||"")}});return N().zv({store:a,data:{is_template:!0},transaction:i}),D().BC({parentStore:n.getTemplatePagesStore(),appendStore:a,transaction:i}),a}function H(e){const{environment:t,collectionStore:n,templateStore:i,transaction:r}=e,a=N().Wv({environment:t,type:o().xd.page,inMemoryRecordCache:i.inMemoryRecordCache,transaction:r,spaceId:n.getTemplatePagesStore().pointer.spaceId});N().zv({store:a,data:{is_template:!0},transaction:r}),D().WH({parentStore:n.getTemplatePagesStore(),afterStore:i,insertStore:a,transaction:r});try{j({environment:t,copiedFromPointer:i.pointer,pageStore:a,addCopyName:!0,transaction:r,resolveTemplateVariables:!1,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.automation"})}catch(s){B().f1(I().A.formatMessage(V.duplicateTemplateError))}return a}function W(e){const{collectionStore:t,templateStore:n,transaction:o}=e;D().TF({parentStore:t.getTemplatePagesStore(),childToRemoveStore:n,transaction:o})}function q(e){const{environment:t,store:n,properties:o,transaction:i}=e;S().L({environment:t,store:n,properties:o,transaction:i})}function K(e){const{environment:t,store:n,templateStore:o,title:i,isKeyboard:a,isCreateIn:s,transaction:l,from:c}=e,d=n.getProperties(),p=n.getFormatStore().getKeyStore("page_icon").getValue(),m=n.getFormatStore().getKeyStore("page_cover").getValue(),g=n.getFormatStore().getKeyStore("page_cover_position").getValue(),f=n.getFileIds(),v=f.find((e=>{var t;return m&&(0,r()._J)(m)&&(null===(t=(0,r().oN)({urlOrAlias:m}))||void 0===t?void 0:t.fileId)===e})),h=f.find((e=>{var t;return p&&(0,r()._J)(p)&&(null===(t=(0,r().oN)({urlOrAlias:p}))||void 0===t?void 0:t.fileId)===e}));Q({environment:t,type:"initializeCollectionTemplate.originalPageFileData",data:{message:"Original page file data",originalFileIds:f,originalCoverFileId:v,originalIconFileId:h}});const _=x().default.DO_NOT_USE_markLegacy("rum.initialize_collection_template"),b=j({environment:t,pageStore:n,copiedFromPointer:o.pointer,transaction:l,resolveTemplateVariables:!0,userAction:"collectionTemplatePickerActions.createCopyOfCollectionTemplate.manual"});if("template"!==i){const e="empty"===i?void 0:i.text;L().R9({environment:t,store:n.getBlockTitleStore(),value:e,transaction:l})}const y=o.getFormatStore().getKeyStore("page_cover").getValue(),S=o.getFormatStore().getKeyStore("page_icon").getValue(),w=function(e){var t;const n=JSON.stringify(e.getProperties());return null===(t=e.getFileIds())||void 0===t?void 0:t.filter((t=>{var o,i,r;const a=null===(o=e.getFormatStore())||void 0===o?void 0:o.getKeyStore("display_source").getValue(),s=null===(i=e.getFormatStore())||void 0===i?void 0:i.getKeyStore("page_cover").getValue(),l=null===(r=e.getFormatStore())||void 0===r?void 0:r.getKeyStore("page_icon").getValue();return!(!a||-1===a.indexOf(t))||(!(!s||-1===s.indexOf(t))||(!(!l||-1===l.indexOf(t))||-1!==n.indexOf(t)))}))}(o),k=w.filter((e=>!(null!=y&&y.includes(e)||null!=S&&S.includes(e)))),I=w.find((e=>{var t;return y&&(0,r()._J)(y)&&(null===(t=(0,r().oN)({urlOrAlias:y}))||void 0===t?void 0:t.fileId)===e})),A=w.find((e=>{var t;return S&&(0,r()._J)(S)&&(null===(t=(0,r().oN)({urlOrAlias:S}))||void 0===t?void 0:t.fileId)===e}));Q({environment:t,type:"initializeCollectionTemplate.templateFileData",data:{message:"Template file data",templatePageCoverFileId:I,templatePageIconFileId:A,trimmedFileIds:w}});const C=[...k];let T=!1;if(p&&!b.getIcon()){Q({environment:t,type:"initializeCollectionTemplate.updateToOriginalPageIcon",data:{message:"Updating page icon to original page icon"}}),N().zv({store:b.getFormatStore(),data:{page_icon:p},transaction:l});void 0!==(0,u().bk)(p)&&h&&C.push(h),T=!0}let P=!1;m&&!b.getCover()&&(Q({environment:t,type:"initializeCollectionTemplate.updateToOriginalPageCover",data:{message:"Updating page cover to original page cover"}}),N().zv({store:b.getFormatStore(),data:{page_cover:m,page_cover_position:g},transaction:l}),v&&C.push(v),P=!0),!T&&A&&C.push(A),!P&&I&&C.push(I),Q({environment:t,type:"initializeCollectionTemplate.applyListAfterMultiOperation",data:{message:"Applying operation to add file_ids to original page pointer",fileIdsToAddToOriginalPage:C}}),F().applyOperation({store:b,transaction:l,operation:{pointer:b.pointer,path:["file_ids"],command:"listAfterMulti",args:{ids:C}}}),Q({environment:t,type:"initializeCollectionTemplate.updateWithRestoreProperties",data:{message:"Updating block properties with restoreProperties",restoreProperties:d}}),q({environment:t,store:n,properties:d,transaction:l}),Q({environment:t,type:"initializeCollectionTemplate.updateIsTemplateMetadata",data:{message:"Remove is_template and metadata"}}),N().zv({store:n,data:{is_template:null},transaction:l}),Q({environment:t,type:"initializeCollectionTemplate.removePageLock",data:{message:"Remove page lock"}}),E()._l({environment:t,store:n,isLocked:!1,transaction:l}),0===o.getContentLength()&&U()._N({environment:t,store:n,transaction:l}),x().default.DO_NOT_USE_measureLegacy(_,{environment:t}),M().RZ(t,{template_id:o.id,collection_id:o.getParentId(),is_keyboard:a,is_create_in:s,from:c})}function G(e){const{collectionStore:t,newTemplateIds:n,transaction:o}=e;N().zv({store:t,data:{template_pages:$(t.getTemplatePages(),n)},transaction:o})}function $(e,t){const n=[...t],o=new Set(n),i=new Set,r=[];for(const a of e)if(o.has(a))for(;n.length>0;){const e=n.shift();if(!e)break;if(r.push(e),o.delete(e),i.add(e),e===a)break}else i.has(a)||r.push(a);return r}function Y(e){let{environment:t,collectionContextStore:n,collectionViewBlockStore:o,templateStore:i,useCrdt:r,isKeyboard:a,from:s,shouldCoerce:l,showMoveTo:c,peekModeOverride:d,userAction:u}=e;F().createAndCommit({userAction:"collectionTemplatePickerActions.updatePreferredDatabase",environment:t,canUndo:!0,perform:e=>{(0,P().w)({collectionContextStore:n,transaction:e})}}),F().createAndCommit({userAction:u??"collectionTemplatePickerActions.createPageFromCollectionTemplate",environment:t,canUndo:!0,perform:e=>{!function(e){const{transaction:t,store:n,collectionContextStore:o,environment:i,shouldCoerce:r,templateStore:a,showMoveTo:s,peekModeOverride:l,from:c,isKeyboard:d}=e,u=(0,f().H)({environment:i,collectionContextStore:o,groupsPointer:[],insertAtIndex:0,shouldCoerce:r,templateStore:a,transaction:t,from:c,inMemoryRecordCache:i.defaultRecordCache.inMemoryRecordCache,isKeyboard:d});if(!u)return;const p=l??b().hH(o);v().VU({environment:i,store:u.newStore,peekMode:p,showMoveTo:s,resultsStore:void 0,collectionContextStore:o,pageVisitSource:y({blockId:n.id,collectionContextStore:o})});const m="collectionTypedView"===o.contextType?u.newStore.getAssociatedCollectionId():void 0;g().v(i,{from:c.createBlock,type:"page",new_page_id:u.newStore.id,creating_block_id:u.newStore.id,..._().sl(o,m)}),u.newStore}({transaction:e,store:o,collectionContextStore:n,environment:t,shouldCoerce:l,templateStore:i,from:s,isKeyboard:a,showMoveTo:c,peekModeOverride:d})}})}function Q(e){const{environment:t,type:n,data:o}=e;X({environment:t,level:"info",from:"collectionTemplatePickerActions",type:n,data:o})}function Z(e){const{environment:t,type:n,data:o}=e;X({environment:t,level:"warning",from:"collectionTemplatePickerActions",type:n,data:o})}function X(e){const{environment:t,level:n,from:o,type:i,data:r}=e,s=A().default.getConfigKey("page_template_duplication_verbose_logging_config","userIds");t.currentUser.id&&s.includes(t.currentUser.id)&&a().log({level:n,from:o,type:i,data:r})}},313462:(e,t,n)=>{n.d(t,{I:()=>s});var o=()=>n(604341),i=()=>n(780054);let r=!1;function a(){r=!0,localStorage.setItem("__console.enableVerboseAnalytics","true")}function s(){return i().A.isAdminMode||r}(0,o().exposeDebugValue)("enableVerboseAnalytics",a),(0,o().exposeDebugValue)("disableVerboseAnalytics",(function(){r=!1,localStorage.setItem("__console.enableVerboseAnalytics","false")})),"undefined"!=typeof window&&"true"===localStorage.getItem("__console.enableVerboseAnalytics")&&a()},313784:(e,t,n)=>{n.d(t,{S:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("hourglass",{viewBox:"0 0 16 16",svg:(0,o.jsx)("g",{children:(0,o.jsx)("path",{d:"M5.521 13.475c-.316 0-.566-.09-.75-.27-.183-.176-.275-.43-.275-.762v-.111c0-.36.08-.719.24-1.078a5.66 5.66 0 01.61-1.037 9.91 9.91 0 01.756-.908c.261-.274.486-.506.673-.698.192-.183.29-.38.293-.591.008-.211-.09-.415-.293-.61a85.634 85.634 0 01-.673-.697c-.258-.274-.51-.574-.756-.902a5.767 5.767 0 01-.61-1.032 2.682 2.682 0 01-.24-1.09v-.093c0-.336.092-.592.275-.768.184-.18.434-.27.75-.27h4.946c.32 0 .572.09.756.27.183.176.275.432.275.768v.093c0 .364-.082.727-.246 1.09a5.34 5.34 0 01-.61 1.032c-.245.328-.497.628-.755.902-.258.273-.483.506-.674.697-.2.195-.295.399-.287.61.008.21.103.408.287.591.191.192.416.424.674.698.258.273.51.576.756.908.246.328.449.674.609 1.037.164.36.246.719.246 1.078v.111c0 .332-.092.586-.275.762-.184.18-.436.27-.756.27H5.52zm2.936-6.422c.105-.09.248-.225.428-.405.18-.183.37-.386.574-.609.207-.223.4-.443.58-.662.18-.223.32-.42.422-.592.066-.105.086-.197.059-.275-.024-.078-.092-.117-.205-.117H5.674c-.106 0-.172.039-.2.117-.027.078-.01.17.053.275.106.172.248.37.428.592.18.219.371.44.574.662.203.223.395.426.575.61.183.18.326.314.427.404.168.14.323.21.463.21.145 0 .299-.07.463-.21z"})})})},313790:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(302033).A)},313892:(e,t,n)=>{n.d(t,{$h:()=>z,$n:()=>I,BI:()=>j,BL:()=>S,DH:()=>E,Hb:()=>D,Ib:()=>N,Kb:()=>R,LS:()=>J,T6:()=>k,TW:()=>Z,Ts:()=>L,Un:()=>Q,YH:()=>T,_q:()=>X,aJ:()=>ee,cc:()=>$,i$:()=>P,jP:()=>F,lK:()=>x,lS:()=>w,ne:()=>K,nf:()=>H,rv:()=>O,s6:()=>V,sZ:()=>U,u1:()=>A,u6:()=>M,yl:()=>y});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(803949),n(581454),n(737550);var o=()=>n(66689),i=()=>n(687871),r=()=>n(128914),a=()=>n(289915),s=()=>n(455348),l=()=>n(604995),c=()=>n(617871),d=()=>n(416504),u=()=>n(799829),p=()=>n(332393),m=()=>n(931075),g=()=>n(496603),f=()=>n(534177),v=()=>n(522827),h=()=>n(470928),_=()=>n(508496),b=()=>n(53137);function y(e,t){return e.find((e=>e.uri===t))}function S(e,t){return e.find((e=>e.presets.some((e=>e.uri===t))))}function w(e,t){if(!t)return;return e.find((e=>e.allFeatures.find((e=>{if(x(e))for(const n of e.dependencies)if("collection"===n.type&&n.uri===t)return!0}))))}function k(e,t){const n=S(e,t.uri);if(!n)return[];return[...t.requiredFeatures,...t.defaultOnFeatures].filter((e=>{const t=n.allFeatures.find((t=>t.uri===e.featureUri));if(!t)return!1;const{type:o}=e;return"simple"===o?"dependencies"in t:"with_variant"===o?"variants"in t:void(0,f().HB)(o)}))}function I(e){return"variants"in e&&(0,r().ec)(e.collectionUri)}function x(e){return"dependencies"in e&&(0,r().ec)(e.collectionUri)}function A(e){return"dependencies"in e&&(0,r().XA)(e.collectionUri)}const C=[i().Z.Owner,m()._e.Owner];function T(e,t){const n=w(e,t);if(n)for(const o of n.allFeatures)if(x(o)){const e=o.dependencies.find((e=>"collection"===e.type&&e.uri===t));if(e)return e.value.schema??{}}}function M(e){let{featurePointers:t,appConfig:n}=e;const o=g().oE(t.map((e=>{const{type:t}=e;return"simple"===t?e.featureUri:"with_variant"===t?e.defaultVariantUri:void(0,f().HB)(t)}))),i={};for(const s of n.allFeatures)i[s.uri]=s;const r=o.map((e=>i[e])).filter((e=>x(e))),a={};for(const s of r)for(const e of s.dependencies)a[e.uri]=e;return Object.values(a)}function P(e){return e.endsWith(o().W)}const B={[o().yx.Status]:["status","checkbox","select"]};function R(e,t,n){const o=t.type,i=e in B?B[e]:[o];return Object.entries(n).filter((e=>{let[t,n]=e;if(n)return i.includes(n.type)}))}function E(e,t){const n={};for(const[o,i]of Object.entries(e)){if(!o.startsWith("notion://"))continue;if(null==i?void 0:i.type){const e=R(o,i,t);1===e.length&&(n[o]=e[0][0])}}return n}function D(e){var t,n,o,i,l,c,d,u;const{environment:p,viewDependency:m,collectionStore:g}=e,h=s().u9.derivePropertyUris((null==g?void 0:g.getSchema())??{},null==g?void 0:g.getPropertyMapping()),_=m.optionalProperties??[],b=e=>!_.includes(e)&&!h.has(e),y=m.value;switch(y.type){case"table":case"list":case"gallery":case"timeline":if(null!==(t=y.format)&&void 0!==t&&t.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,r().LE)(e)||b(e))return!1}if(null!==(n=y.query2)&&void 0!==n&&n.timeline_by){const e=y.query2.timeline_by;if(!(0,r().LE)(e)||b(e))return!1}break;case"board":if(null!==(o=y.format)&&void 0!==o&&o.board_columns_by){const e=y.format.board_columns_by.property;if(!(0,r().LE)(e)||b(e))return!1}if(null!==(i=y.format)&&void 0!==i&&i.collection_group_by){const e=y.format.collection_group_by.property;if(!(0,r().LE)(e)||b(e))return!1}break;case"calendar":if(null!==(l=y.query2)&&void 0!==l&&l.calendar_by){const e=y.query2.calendar_by;if(!(0,r().LE)(e)||b(e))return!1}break;case"chart":if(null!==(c=y.format)&&void 0!==c&&c.chart_config){var S;if("placeholder"===(null===(S=y.format)||void 0===S?void 0:S.chart_config.type))return!1;if("groups_reducer"===y.format.chart_config.dataConfig.type){const e=y.format.chart_config.dataConfig.groupBy;if(!(0,r().LE)(e.property)||b(e.property))return!1}else{const e=y.format.chart_config.dataConfig.nameProperty;if(!(0,r().LE)(e)||b(e))return!1}}break;case"page":case"form_editor":case"feed":case"map":case"chat":case"custom":return!1;default:(0,f().HB)(y.type)}const w=e=>!!(0,a().t_)(e)||(0,r().LE)(e.property)&&!b(e.property);if(null!==(d=y.format)&&void 0!==d&&d.property_filters)for(const r of y.format.property_filters){if(!W(r.filter,w))return!1;if(!(0,v().t6)(p,r.filter,g))return!1}if(null!==(u=y.query2)&&void 0!==u&&u.filter){const e=y.query2.filter;if(e.filters)for(const t of e.filters){if(!q(t,w))return!1}}return!0}function N(e){const{environment:t,appConfig:n,collectionStore:o,collectionViewBlockStore:i}=e,r=n.allFeatures.filter((e=>(e=>{var n;if(!x(e)||1!==e.dependencies.length||"collection_view"!==e.dependencies[0].type)return!1;const r=e.dependencies[0],a=i.getFormat().app_config_uri,s=o.getFormat().app_config_uri,l=(null===(n=i.getFormat())||void 0===n?void 0:n.app_uri_map)??{};return!(!a||!s)&&r.collectionViewBlockUri===a&&r.collectionUri===s&&!(r.uri in l)&&"notion://projects/task_by_status_feature"!==e.uri&&D({environment:t,viewDependency:r,collectionStore:o})})(e)));return g().hS(r,"uri")}function L(e,t){return O(e,t.allFeatures)}function O(e,t){const n=[];for(const o of t)(x(o)||A(o))&&n.push(...o.dependencies);return g().hS(n.filter((t=>e.includes(t.uri))),(e=>e.uri))}function U(e){return"app_container"===e.getFormatStore().getKeyStore("collection_view_sub_type").getValue()}function F(e,t,n,r){if(!(0,h().Io)()&&t===o().pW&&(n===i().Z.Owner||n===m()._e.Owner))return!0;const a=s().u9.derivePropertyUri(n,r.getPropertyMapping());if(!a)return!1;const l=function(e,t){if(t===o().pW)return C;const n=T(e,t);return n?Object.keys(n):void 0}(e,t);return!!l&&l.includes(a)}function V(e,t,n){return(0,u().e0)(e,t,n)}function j(e){return e===o().IZ||e===o().QW}function z(e){return e!==o().Lu}function H(e,t){const n=[];for(const i of t)"property"===i.type||"database_template"===i.type?e.has(i.collectionUri)&&n.push(i):"block"===i.type?e.has(i.parentUri)&&n.push(i):"collection"!==i.type&&"collection_view"!==i.type||e.has(i.collectionViewBlockUri)&&n.push(i);let o=[];return n.length>0&&(o=H(new Set(n.map((e=>e.uri))),t)),[...n,...o]}function W(e,t){return!!t(e)}function q(e,t){if((0,a().yX)(e)){if(!W(e,t))return!1}else{if((0,a().LB)(e))return!0;if(e.filters)for(const n of e.filters){if(!q(n,t))return!1}}return!0}function K(e,t){const n=[];if(e.filters)for(const o of e.filters){const e=G(o,t);if(!e)throw new Error("Invalid filter");n.push(e)}return{...e,filters:n}}function G(e,t){if((0,a().yX)(e))return null!=t&&t[e.property]?{...e,property:t[e.property]}:e;if((0,a().LB)(e))return e;if((0,a().dU)(e)){if(e.filters){const n=[];for(const o of e.filters){const e=G(o,t);if(!e)throw new Error("Invalid filter");n.push(e)}return{operator:e.operator,filters:n}}}else(0,f().HB)(e)}function $(e){const{collectionViewBlockStore:t,dependencyUri:n}=e,o=null==t?void 0:t.getCollectionViewStores();if(!t)return;return null==o?void 0:o.find((e=>e.getAppConfigUri()===n))}function Y(e){const{propertyDependency:t,viewDependency:n,collectionViewStore:o,collectionStore:i}=e;if(n.optionalProperties&&n.optionalProperties.includes(t.uri))return!1;const r=o.getQuery(i.getSchema()),s=o.getFormat(),l=null==r?void 0:r.sort;if(l){if(l.some((e=>t.uri===e.property)))return!0}const c=o.getFormat().property_filters;if(c){const e=e=>!(0,a().t_)(e)&&e.property===t.uri;if(c.some((t=>W(t.filter,e))))return!0}const d=null==r?void 0:r.filter;if(void 0!==d&&d.filters){const e=e=>!!(0,a().t_)(e)||e.property!==t.uri;for(const t of d.filters){if(!q(t,e))return!0}}switch(o.getType()){case"table":case"list":case"gallery":case"timeline":if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}if(null!=r&&r.timeline_by){if(r.timeline_by===t.uri)return!0}break;case"board":if(s.board_columns_by){if(s.board_columns_by.property===t.uri)return!0}if(s.collection_group_by){if(s.collection_group_by.property===t.uri)return!0}break;case"calendar":if(null!=r&&r.calendar_by){if(r.calendar_by===t.uri)return!0}}return!1}function Q(e,t){const n=(0,d().P)(),o=(0,l().iB)(e,1,n);return(0,l().Mk)(o.valueOf(),o.plus({weeks:t}).minus({days:1}).valueOf(),n)}function Z(e,t){const n=(0,l().HF)(e,(0,d().P)()).plus({days:t});return(0,l().lN)(n)}const X=[o().d0,o().bq,o().IE];function J(e){var t;const{dependencies:n,collectionStore:o,collectionViewBlockStore:i,viewStores:r,validDependencies:a,formulasModule:l}=e,c=n.filter((e=>"property"===e.type)),d=[...c.filter((e=>"rollup"===e.propertySchema.type)),...c.filter((e=>"formula"===e.propertySchema.type))],u=n.filter((e=>"collection_view"===e.type)),p=s().u9.derivePropertyUris(o.getSchema(),o.getPropertyMapping()),m=null===(t=i.getFormat())||void 0===t?void 0:t.app_uri_map,g={validDependencies:a,propertyDeps:[],viewDeps:[]};if(!p||!m)return g;for(const s of d){if(!p.has(s.uri))continue;const e=o.getSchema()[s.uri];if(e){if("rollup"===e.type){const t=a.some((t=>t.uri===e.relation_property));t&&(a.push(s),g.propertyDeps.push(e))}if("formula"===e.type){const t=l.getFormulaDependencies(e).some((e=>{for(const t of a)if(t.uri===e)return!0}));t&&(a.push(s),g.propertyDeps.push(e))}}}for(const s of u){if(!m[s.uri])continue;const e=r.find((e=>e.id===m[s.uri]));if(!e)continue;a.some((t=>"property"===t.type&&Y({propertyDependency:t,viewDependency:s,collectionViewStore:e,collectionStore:o})))&&(a.push(s),g.viewDeps.push(e))}return g.validDependencies=a,g}function ee(){return b().A.getIntegrationsAsRecordMap().getModel({table:p().Li,id:c().io})&&_().default.checkGate({gateName:"cron_connected_relation"})}},314648:(e,t,n)=>{n.r(t),n.d(t,{USER_SIGNALS_KEYS:()=>r,default:()=>u,getInitialUserSignalsState:()=>a,shouldPersistUserSignals:()=>c});var o=()=>n(757695),i=()=>n(351360);const r=["recentPages","similarUserRecentPages","topPages7dPageView","editedPages","similarUsersEditedPages"];function a(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}class s extends o().default{getInitialState(){return{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]}}}class l extends o().default{getInitialState(){return{stores:{},refreshIntervalId:void 0}}getStore(e){let{spaceId:t,userId:o,version:i}=e;const r=function(e){let{spaceId:t,userId:n,version:o}=e;return`userSignals:${t}:${n}:${o??0}`}({spaceId:t,userId:o,version:i});return this.state.stores[r]||(c()?(this.instanceState.stores[r]=new(n(178624).R)({key:r,namespace:n(419494).Bq,important:!0,trackingType:"necessary"}),void 0===this.instanceState.stores[r].state&&this.instanceState.stores[r].setState({lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]})):this.state.stores[r]=new s),this.state.stores[r]}getUserSignals(e){const t=this.getStore(e).state??{lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]};return n(496603).cJ(t,"lastUpdatedTime")}setUserSignals(e){const{spaceId:t,userId:n,userSignals:o,initialize:i}=e,r=this.getStore({spaceId:t,userId:n});let a={lastUpdatedTime:void 0,recentPages:[],similarUserRecentPages:{},topPages7dPageView:[],editedPages:[],similarUsersEditedPages:[]};!i&&r.state&&(a=r.state),r.setState({...a,...o,lastUpdatedTime:Date.now()})}}function c(){var e;const t=d.state.shouldPersist;return void 0!==t?t:Boolean(null===(e=i().default.getState().currentSpaceStore)||void 0===e?void 0:e.environment.defaultRecordCache.persistedRecordCache)}const d=new l,u=d},315097:(e,t,n)=>{n.d(t,{CZ:()=>W,_I:()=>V,oZ:()=>U,wT:()=>H});n(410838),n(898992),n(672577),n(581454);var o=()=>n(908006),i=()=>n(319954),r=()=>n(700500),a=()=>n(713998),s=()=>n(416845),l=()=>n(919709),c=()=>n(220719),d=()=>n(496603),u=()=>n(534177),p=()=>n(413962),m=()=>n(534402),g=()=>n(518736),f=()=>n(423804),v=()=>n(845489),h=()=>n(231722),_=()=>n(969197),b=()=>n(792002),y=()=>n(494043),S=()=>n(301421),w=()=>n(695625),k=()=>n(393255),I=()=>n(110955),x=()=>n(77246),A=()=>n(24157),C=()=>n(896628),T=()=>n(910302),M=()=>n(132867),P=()=>n(722101),B=()=>n(44729),R=()=>n(797265),E=()=>n(778417),D=()=>n(319975),N=()=>n(725614),L=()=>n(508104),O=()=>n(62287);function U(e){const{store:t,block:n,targetStore:o,targetBlock:i}=e;n&&(0,g().Le)({store:t,blockStore:n})&&i&&(0,g().Le)({store:o,blockStore:i})?m().LT({...e,targetStore:o,sourceBlockStore:n}):F(e)}function F(e){const{environment:t,transaction:n,store:o,targetStore:i}=e,r=(0,b().s6)(i);r?D().jN({environment:t,sourceStore:o,sourceIndex:0,targetStore:i,targetIndex:r.endIndex,transaction:n}):D().jQ({environment:t,transaction:n,store:o,selection:{startIndex:0,endIndex:1/0}})}function V(e){const{environment:t,store:n,transaction:i}=e;i.annotateWithUserAction("textBackspaceActions.annotatedContentBlockBackspaceAtBeginning");const s=(0,_().T)(n);if(s){if("callout"===s.getType()&&C().zA({stores:[s],update:{block_color:void 0},transaction:i}),s.isType("to_do")){const e=s.getProperties();e&&a().wu(e.checked)&&L().E({environment:t,blocks:[s],transaction:i})}let e=s,n=r().xd.text;if(y().PQ(s)){const e=s.getType();e&&(n=e)}e=O().pd({environment:t,block:s,blockType:n,transaction:i}),o().default.afterNextFlush((()=>{const n=w().T.findEditableStoreWithin(e);n&&(N().setSelectionAtStart({store:n}),E().hc({environment:t,store:e}))}))}return n}function j(e){const{environment:t,editorMode:n,multiSelection:o,transaction:r,deleteForwards:a}=e;if("suggest"===n)return void function(e){const{multiSelection:t}=e,n=(0,_().T)(t.start.store);if(!n)throw new(s().yI4)("Can not make suggest edits without associated block store");(0,h().kM)(t)?function(e){const{environment:t,multiSelection:n,transaction:o,deleteForwards:r,blockStore:a}=e,c=n.start,d={indexOfAboutToBeDeletedChar:r?c.index:c.index-1,indexOfLeadingChar:r?c.index-1:c.index,annotateSelectionIndex:r?[c.index,c.index+1]:[c.index-1,c.index],newCursorIndex:r?c.index+1:c.index-1},u={start:{store:c.store,index:d.annotateSelectionIndex[0]},end:{store:c.store,index:d.annotateSelectionIndex[1]}},m=(0,b().aR)(c.store.getValue(),d.indexOfAboutToBeDeletedChar),g=(0,f().x5)(a,i().r.fromArray(m),t.currentUser,l().Ifu.SuggestionInsertText);if(g)return D().f0({...e,multiSelection:u}),void(0,p().c3)({environment:t,transaction:o,discussionStore:g.discussionStore});const[v,h]=[d.indexOfAboutToBeDeletedChar,d.indexOfLeadingChar].map((e=>{const t=(0,b().IX)(c.store.getValue(),e,l().Ifu.SuggestionRemoveText);if(t&&l().I1e(t))return l().vu(t)})),_=l().qAZ(c.store.getValue()).length;(r&&c.index<_||!r&&c.index>0)&&z(c.store,d.newCursorIndex);if(v)return;let y;if(h){const e=p().Iw(u,h);if(!e)throw new(s().yI4)("Could not get discussion store from selection and leadingSuggestRemoveDiscussionId");(0,f().Ih)(e,t.currentUser)&&(y=e)}y||(y=p().RR(t,o,u));p().rY({environment:t,transaction:o,multiSelection:u,discussionStore:y})}({...e,blockStore:n}):function(e){const{environment:t,transaction:n,multiSelection:o,blockStore:i}=e,r=p().RR(t,n,i);p().rY({environment:t,transaction:n,multiSelection:o,discussionStore:r}),z(o.start.store,o.start.index)}({...e,blockStore:n})}(e);let c;r.annotateWithUserAction("textBackspaceActions.textBackspaceWithinContent"),c=(0,h().kM)(o)?a?{start:o.start,end:{store:o.start.store,index:o.start.index+1}}:{start:{store:o.start.store,index:o.start.index-1},end:o.start}:o,D().f0({environment:t,multiSelection:c,transaction:r})}function z(e,t){N().setMultiSelection({multiSelection:{start:{store:e,index:t},end:{store:e,index:t}}})}function H(e){const{environment:t,editorMode:n,multiSelection:i,transaction:a,deleteForwards:s,event:m}=e,g=t.device.isApple&&m.metaKey,C=!(t.device.isIOS&&(0,h().kM)(i));N().clearForceExtendAnnotations();const D=(0,h().H7)(i);if(D&&0===D.selection.startIndex&&0===D.selection.endIndex&&!s){const{store:e}=D;m.preventDefault();const i=(0,_().T)(e);if(i){const s=i.getModel();if(s){const i=s.isType(r().bl);i&&!g?V({environment:t,store:e,transaction:a}):s.isType(r().ti)||i&&g?function(e){const{store:t,editorMode:n,transaction:i,environment:r}=e;i.annotateWithUserAction("textBackspaceActions.textBackspaceAtBeginning");const a=(0,_().T)(t);if(!a)return;if(I().A.state.open&&I().A.state.isAddMenu&&""===l().q4_(t.getValue()))return void k().VN({environment:r,dismissed:!0});const s=(0,_().T)(a),c=s&&(0,_().T)(s);if(s&&c){const e=s.getRenderableContentIds()??[];if(!(d().HV(e)!==a.id||s.isTransclusionType()||y().BN(s)&&d().$1(e)===a.id||"tab"===c.getType())){const e=M().MQ({blockStore:a,parentStore:s,grandparentStore:c,transaction:i});if(e)return void o().default.afterNextFlush((()=>{if(e){const t=w().T.findEditableStoreWithin(e);t&&(E().hc({environment:r,store:e}),N().setSelectionAtStart({store:t}))}}))}s.isCalloutV2()&&1===e.length&&R().ZL({environment:r,blocks:[s],transaction:i})}const m=(0,v().J)(t),g=m?(0,_().T)(m):void 0;if(m&&a&&g){const e=()=>{const e=(0,b().s6)(m);if(U({environment:r,transaction:i,store:t,block:a,targetStore:m,targetBlock:g}),N().setSelection({store:m,selection:e}),E().hc({environment:r,store:g}),!y().BN(a)&&s){const e=a.getContentStores();for(const n of e)P().nc({parentStore:s.getContentStore(),beforeStore:a,insertStore:n,transaction:i});const t=a.getContentStore();for(const n of e)P().TF({parentStore:t,childToRemoveStore:n,transaction:i})}R().TF({store:a,transaction:i})},o=()=>{const e=(0,b().s6)(m);N().setSelection({store:m,selection:e})};if("suggest"===n){var h;if("page"===g.getType()||m.path.includes("caption"))return;const n=null===(h=(0,f().jS)({blockStore:g,currentUser:r.currentUser,type:l().Ifu.SuggestionInsertText}))||void 0===h?void 0:h.discussionStore,s=(0,f().Vv)({blockStore:g,currentUser:r.currentUser,suggestionType:"add_line_break"});if(n)o(),e(),p().c3({environment:r,transaction:i,discussionStore:n,removeModifiedBlockIds:[t.id]});else if(s)0===g.getTitleValue().length?(R().TF({store:g,transaction:i}),N().setSelection({store:t,selection:{startIndex:0,endIndex:0}})):(p().X2({environment:r,transaction:i,blockStore:g,type:"add_line_break",removeDiscussionId:!0}),o());else{const e=0===a.getTitleValue().length;p().tW({environment:r,transaction:i,blockStore:g,createDiscussionStore:()=>p().RR(r,i,g,void 0,e?{blockStore:a,suggestionTypes:["remove_line_break"],currentUser:r.currentUser}:void 0),type:"remove_line_break"}),o()}}else"default"===n||"translate_unlocked"===n?(g.getAddLineBreakSuggestion()?p().X2({environment:r,transaction:i,blockStore:g,type:"add_line_break",removeDiscussionId:!0}):g.getRemoveLineBreakSuggestion()&&p().X2({environment:r,transaction:i,blockStore:g,type:"remove_line_break",removeDiscussionId:!0}),e()):"translate_locked"===n?T()._4():(0,u().HB)(n)}}({environment:t,editorMode:n,store:e,transaction:a}):D.store.path.includes("caption")&&function(e){const{environment:t,editorMode:n,store:o,transaction:i}=e;if("suggest"===n)return;i.annotateWithUserAction("textBackspaceActions.captionBackspaceAtBeginning");const r=S().n.getMembersByDOMOrder({filter:()=>!0}),a=r.findIndex((e=>e.props.store===o)),s=r.findLast(((e,t)=>t<a&&e.props.canInsertText)),l=null==s?void 0:s.props.store;if(!l)return;const d=(0,c().o9)((0,_().T)(o)),u=(0,c().o9)((0,_().T)(l)),p=(0,b().s6)(l);F({environment:t,store:o,targetStore:l,transaction:i,targetBlock:d,block:u}),N().setSelection({store:l,selection:p});const m=(0,_().T)(l);E().hc({environment:t,store:m})}({environment:t,editorMode:n,store:e,transaction:a})}}}else D&&(0,b().NG)(D.store,D.selection)&&s?(m.preventDefault(),function(e){const{environment:t,editorMode:n,store:o,transaction:i}=e;i.annotateWithUserAction("textBackspaceActions.textDeleteAtEnd");const r=S().n.getMembersByDOMOrder({filter:()=>!0}),a=d().SL(r,(e=>e.props.store===o)),s=r.find(((e,t)=>Boolean(t>a&&e.props.canInsertText))),l=s?s.props.store:void 0,c=(0,_().T)(o),m=l?(0,_().T)(l):void 0;if(c&&m&&l)if("suggest"===n){if(m.path.includes("caption"))return;const e=(0,v().J)(o),n=e?(0,_().T)(e):void 0,r=n&&0===c.getTitleValue().length;p().tW({environment:t,transaction:i,blockStore:c,type:"remove_line_break",createDiscussionStore:()=>p().RR(t,i,c,void 0,r?{blockStore:n,suggestionTypes:["remove_line_break"],currentUser:t.currentUser}:void 0)}),N().setSelection({store:l,selection:{startIndex:0,endIndex:0}})}else if("default"===n||(0,x().Or)(n))if(c.isEmptyTextBlock()){const e=(0,_().T)(c);e&&B().zz({childStore:c,parentStore:e,transaction:i}),N().setMultiSelection({multiSelection:{start:{store:l,index:0},end:{store:l,index:0}}})}else{const e="readOnly"===A().default.state.mode,n="empty"!==A().default.state.mode&&A().default.state.multiSelection;if(U({environment:t,transaction:i,store:l,block:m,targetStore:o,targetBlock:c}),m){const t=(0,_().T)(m);if(t){const e=m.getContentStore(),n=m.getContentStores();for(const o of n)P().TF({parentStore:e,childToRemoveStore:o,transaction:i}),P().nc({parentStore:t.getContentStore(),beforeStore:m,insertStore:o,transaction:i})}R().TF({store:m,transaction:i}),n&&N().setMultiSelection({multiSelection:n,readOnly:e})}}else(0,u().HB)(n)}({environment:t,editorMode:n,store:D.store,transaction:a})):C&&(m.preventDefault(),j({environment:t,editorMode:n,multiSelection:i,deleteForwards:s,transaction:a}));const L=A().default.state;"editing"===L.mode&&(0,b().oT)(L.multiSelection.start.store.getValue(),L.multiSelection.start.index-1,"c")&&N().setExtendAnnotation({annotation:["c"],extend:!0})}function W(e){const{event:t,multiSelection:n,device:o}=e;return(o.isApple&&t.metaKey||!o.isApple&&t.ctrlKey||o.isApple&&t.altKey)&&!(0,b().ts)(n)}},315957:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}isActive(){return Boolean(this.state.blockStore)}}const i=new o},316221:(e,t,n)=>{n.d(t,{KV:()=>p,gS:()=>m});n(898992),n(737550),n(296540);var o=()=>n(529099),i=()=>n(430483),r=()=>n(227440),a=()=>n(621793),s=()=>n(416726),l=n(474848);const c=[...a().XI,e=>{const{blocks:t}=e;return t.some((e=>{const t=e.getType();return void 0!==t&&(!!(i().zD.isAttachmentUploadEnabledForUser()||"pdf"!==t&&"file"!==t&&"image"!==t)&&n(249506).W[t])}))}],d=[...a().XI,e=>i().zD.isXMLAssistantEnabled()],u=(0,n(959013).YK)({blockSelectionCompletionName:{id:"action.blockSelectionCompletionName.name",defaultMessage:"Ask AI"},pageCompletionName:{id:"action.pageCompletionName.name",defaultMessage:"Notion AI"},writeWithAiName:{id:"action.writeWithAI.name",defaultMessage:"Write with AI"}}),p=(0,s().Fw)({key:"block selection completion",displayName:u.blockSelectionCompletionName,analyticsName:u.blockSelectionCompletionName.defaultMessage,svg:o().aiFaceIcon,shortcuts:["commandJ"],validators:c,hideFromSlashActionMenu:!0,closeParentMenu:!0,action:async(e,t)=>{const{environment:o,blocks:i}=e,r=await Promise.resolve().then(n.bind(n,650829)),a=await r.assistantDependency.load();if(a.assistantActions.isSelectionValidAttachmentSelection(i))return void a.assistantActions.initializeSessionFromAttachmentBlockSelection({environment:o,selectedAttachmentStore:i[0]});const{aiDependency:s}=await Promise.resolve().then(n.bind(n,662453));(await s.load()).completionInitialPromptActions.toggleInitialPrompt({from:"block_action_menu",environment:o})},disabled:()=>!r().A.state.online,renderTooltip:()=>n(972435).A.formatMessage(s().AY.unavailableOfflineTooltip),disableTooltip:()=>r().A.state.online}),m=((0,s().Ls)({key:"page completion",displayName:u.pageCompletionName,analyticsName:u.pageCompletionName.defaultMessage,svg:e=>(0,l.jsx)("img",{style:{borderRadius:"100%",background:"white",border:"1px solid rgba(0, 0, 0, 0.09)",...e,width:"22px",height:"22px",marginLeft:"-3px",marginRight:"-3px",overflowX:"visible"},src:n(200424)}),validators:d,closeParentMenu:!0,action:async(e,t)=>{const{environment:o}=e,{assistantDependency:i}=await Promise.resolve().then(n.bind(n,650829));(await i.load()).assistantMenuActions.openAssistantRightHandSideMenu({environment:o,from:"sidebar"})}}),(0,s().Fw)({key:"ai prompt menu",analyticsName:"ai_prompt_menu",displayName:void 0,validators:[...a().XI,n(878377).O1v],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{aiDependency:o}=await Promise.resolve().then(n.bind(n,662453));(await o.load()).completionInitialPromptActions.toggleInitialPrompt({from:"keyboard_shortcut",environment:t})}}));(0,s().Fw)({key:"write with ai",analyticsName:"write with AI",displayName:u.writeWithAiName,validators:a().m7,shortcuts:["commandJ"],closeParentMenu:!0,svg:e=>(0,o().aiFaceIcon)(e),action:async e=>{let{environment:t}=e;const{aiDependency:o}=await Promise.resolve().then(n.bind(n,662453));(await o.load()).completionInitialPromptActions.toggleInitialPrompt({from:"slash_menu",environment:t})}})},317001:(e,t,n)=>{n.d(t,{j:()=>b});n(898992),n(672577);var o=()=>n(700500),i=()=>n(592269),r=()=>n(416504),a=()=>n(797809),s=()=>n(496603),l=()=>n(797535),c=()=>n(33791),d=()=>n(799832),u=()=>n(186445),p=()=>n(873050),m=()=>n(972435),g=()=>n(508496),f=()=>n(44729),v=()=>n(246826),h=()=>n(751156),_=()=>n(394653);function b(e){var t;const{environment:n,store:b,collectionStore:y,collectionContextStore:S,groupsPointer:w,transaction:k,shouldCoerce:I,alreadyMovedToCollection:x}=e,A=y.getSchema(),C=y.getParentBlockStore(),T=C&&C.isNonEditableState();let M=!I;const P=(null==S||null===(t=S.groupsStore.getGroupState(w))||void 0===t?void 0:t.resultsStore.state)||[];if(b.isDefined()){var B,R;const e=x?(0,a().RX)(m().A.getIntl()):b.getSchema()||{},t=null===(B=b.getAssociatedCollectionStore())||void 0===B?void 0:B.getDatabaseType(),o=y.getDatabaseType(),r=void 0!==t&&t===o,d=i().Yt({blockProperties:b.getProperties(),oldSchema:e,oldPropertyMapping:null===(R=b.getAssociatedCollectionStore())||void 0===R?void 0:R.getPropertyMapping(),newPropertyMapping:y.getPropertyMapping(),newSchema:A,typesMatch:r});d.propertyUpdate&&(0,_().l)({environment:n,blockStore:b,properties:d.propertyUpdate,transaction:k}),s().n4(A,d.newSchema)||T||!(0,c().v)({collectionStore:y,collectionViewBlockStore:C,checkNavigableAncestorLocked:!1})||(0,l().I)({environment:n,collectionStore:y,update:{schema:d.newSchema},transaction:k})}if(b.getType()===o().xd.page||b.getType()===o().xd.collectionViewPage&&b.isAssociatedCollectionAPageTree()||y.isPageTreeCollection()||b.getType()===o().xd.copyIndicator||b.getType()===o().xd.externalObjectInstancePage||v().zv({store:b,data:{type:o().xd.page},transaction:k}),S){if(S.collectionViewStore()){var E;const e=b.getModel(),t=S.relativeVariableStore.state,o=null===(E=S.viewsModuleContextStore.currentPageStore())||void 0===E?void 0:E.id,a=(0,p().Ay)(S,!1);if(e&&I){const s=b.getAssociatedCollectionStore()??y,l="collectionTypedView"===S.contextType&&s?s.getSchema():S.normalizedSchemaStore.state,c=i().H3({block:e,schema:l,groupBy:S.getGroupByAndGroupFormats().groupBy,propertyMapping:y.getPropertyMapping(),filter:a,userFilterContext:{userId:n.currentUser.id,userTimeZone:(0,r().P)(),userStartOfWeek:u().XX.state},relativeVariableResult:t,currentPageInRelatedCollection:o,groupsPointer:w,getRecordModel:y.getRecordModel,intl:m().A.getIntl(),resultCache:new Map,regExpCache:new Map,experimentService:g().default});(0,_().l)({environment:n,blockStore:b,properties:c.update,transaction:k}),M=c.coercionSucceeded}}}const D="collectionTypedView"===(null==S?void 0:S.contextType)&&(0,d().U)(b)===S;if(x||D?h().applyOperation({store:b,operation:{pointer:b.pointer,path:["alive"],command:"set",args:!0},transaction:k}):f().X$({childStore:b,parentStore:y,transaction:k}),S&&S.resultSetStore.addLocalChange([b.id]),S){var N;const e=null===(N=S.groupsStore.getGroupState(w))||void 0===N?void 0:N.currentLimit;if(e){const t=e.state,n=P.find((e=>e.id===b.id));P.length>=t&&!n&&e.setState(P.length+1)}}return M}},317182:(e,t,n)=>{n.d(t,{A:()=>s});n(581454),n(296540);var o=n(474848);const i={height:32,width:"100%"},r={paddingTop:8,paddingBottom:8},a={fontWeight:n(284371).Wy.regular,textAlign:"left",paddingTop:8,paddingBottom:8};const s=function(e){let{columns:t,rows:s,cellStyle:d,tableStyle:u,rowStyle:p,tableBodyStyle:m,hideHeader:g,hideTopBorderForFirstRow:f,hideTopBorderForHeader:v}=e;const h=(0,n(401497).DP)();return(0,o.jsxs)("table",{style:{...l(h,v),...u},children:[!g&&(0,o.jsx)("thead",{children:(0,o.jsx)("tr",{style:i,children:t.map((e=>(0,o.jsx)("th",{style:{...a,...e.style},children:(0,o.jsx)(n(125565).A,{isSmall:!0,children:e.header})},e.key)))})}),(0,o.jsx)("tbody",{style:m,children:s.map(((e,n)=>(0,o.jsx)("tr",{style:{...c(h),...0===n&&f?{borderTop:void 0}:{},..."function"==typeof p?p({rowIndex:n}):p},children:e.columns.map(((e,i)=>{const a=t[i];return(0,o.jsx)("td",{style:{...r,..."function"==typeof d?d({rowIndex:n,columnIndex:i}):d},children:e},a.key)}))},e.key)))})]})};function l(e,t){return{width:"100%",fontSize:13,borderTop:t?void 0:`1px solid ${e.regularDividerColor}`,borderBottom:`1px solid ${e.regularDividerColor}`}}function c(e){return{width:"100%",borderTop:`1px solid ${e.regularDividerColor}`}}},317965:(e,t,n)=>{n.d(t,{hX:()=>T,ol:()=>M});var o=()=>n(638681);const i=o().union([o().number(),o().string(),o().boolean(),o().isNull(),o().array(o().string())]),r=o().undefinable(i),a=o().union([i,o().record(o().string(),i)]),s=o().union([r,o().record(o().string(),r)]),l=o().union([s,o().record(o().string(),s)]),c=l,d=o().without(o().without(o().nonEmpty(o().string()),"{"),"}");o().object({required:{key:d,value:a,ttl:o().undefinable(o().number())},optional:{}}),o().object({required:{key:d,value:s,version:o().number()},optional:{}}),o().object({required:{key:d,value:o().number(),ttl:o().undefinable(o().number())},optional:{}}),o().object({required:{key:d,value:o().number(),version:o().number()},optional:{}}),o().object({required:{key:d,amount:o().number(),ttl:o().undefinable(o().number())},optional:{passThroughData:c}}),o().object({required:{key:d,value:o().number(),version:o().number()},optional:{}}),o().object({required:{key:d,field:o().string(),value:s,ttl:o().undefinable(o().number())},optional:{}}),o().object({required:{key:d,field:o().string(),value:l,version:o().number()},optional:{}}),o().object({required:{id:o().string()},optional:{}}),o().object({required:{setValueTime:o().number()},optional:{}}),o().object({required:{ackId:o().string()},optional:{}}),o().object({required:{},optional:{}}),o().object({required:{key:d,field:o().string(),updates:o().record(o().string(),r),ttl:o().undefinable(o().number())},optional:{onDisconnectFields:o().undefinable(o().object({required:{presenceOnDisconnectFlag:o().literals("register","clear"),subscriptionId:o().string(),pageVisitId:o().undefinable(o().string()),spaceId:o().string(),pageId:o().string()},optional:{}}))}}),o().object({required:{key:d,field:o().string(),value:l,version:o().number()},optional:{}});const u=o().object({required:{blockId:o().string(),userId:o().string(),spaceId:o().string(),operation:o().literal("logPageExit"),pageVisitId:o().undefinable(o().string()),ts:o().number()},optional:{}}),p=(o().object({required:{key:d},optional:{}}),o().object({required:{key:d,value:s,version:o().number()},optional:{}}),o().object({required:{operation:o().literal("setValue"),key:d,value:o().string(),ttl:o().undefinable(o().number())},optional:{}})),m=o().object({required:{operation:o().literal("setValue"),key:d,value:s,version:o().number()},optional:{}}),g=o().object({required:{operation:o().literal("increment"),key:d,amount:o().number(),ttl:o().undefinable(o().number())},optional:{passThroughData:c}}),f=o().object({required:{operation:o().literal("increment"),key:d,value:o().number(),version:o().number()},optional:{}}),v=o().object({required:{operation:o().literal("setIfGreater"),key:d,value:o().number(),ttl:o().undefinable(o().number())},optional:{}}),h=o().object({required:{operation:o().literal("setIfGreater"),key:d,value:o().number(),version:o().number()},optional:{}}),_=o().object({required:{operation:o().literal("setField"),key:d,field:o().string(),value:s,ttl:o().undefinable(o().number())},optional:{}}),b=o().object({required:{operation:o().literal("setField"),key:d,field:o().string(),value:l,version:o().number()},optional:{}}),y=o().object({required:{operation:o().literal("updateField"),key:d,field:o().string(),updates:o().record(o().string(),r),ttl:o().undefinable(o().number())},optional:{onDisconnectFields:o().undefinable(o().object({required:{presenceOnDisconnectFlag:o().literals("register","clear"),subscriptionId:o().string(),pageVisitId:o().undefinable(o().string()),spaceId:o().string(),pageId:o().string()},optional:{}}))}}),S=o().object({required:{operation:o().literal("updateField"),key:d,field:o().string(),value:l,version:o().number()},optional:{}}),w=o().object({required:{operation:o().literal("logPageExit"),spaceId:o().string(),userId:o().string(),blockId:o().string(),pageVisitId:o().undefinable(o().string())},optional:{}}),k=o().object({required:{operation:o().literal("logPageExit")},optional:{}}),I={setValue:p,increment:g,setIfGreater:v,setField:_,updateField:y,logPageExit:w},x=o().union(Object.values(I)),A={setValue:m,increment:f,setIfGreater:h,setField:b,updateField:S,logPageExit:k},C=o().union(Object.values(A)),T=(o().object({required:{operations:o().array(x)},optional:{}}),o().object({required:{responses:o().array(C)},optional:{}}),o().object({required:{subscriptions:o().array(o().object({required:{key:d,version:o().number()},optional:{authorizationToken:o().string()}}))},optional:{}}),o().object({required:{responses:o().array(o().object({required:{key:d,wasNotified:o().boolean()},optional:{}})),internalProcessingTimeMs:o().number()},optional:{}}),o().object({required:{key:d,version:o().number()},optional:{authorizationToken:o().string()}}),o().object({required:{key:d,wasNotified:o().boolean()},optional:{}}),o().object({required:{keys:o().array(d)},optional:{}}),o().object({required:{keys:o().array(d),internalProcessingTimeMs:o().number()},optional:{}}),o().object({required:{key:d},optional:{}}),o().object({required:{key:d},optional:{}}),o().object({required:{disconnectId:o().string(),operations:o().array(x)},optional:{}}),o().object({required:{disconnectId:o().string(),hadDisconnect:o().boolean()},optional:{}}),o().object({required:{disconnectId:o().string()},optional:{}}),o().object({required:{disconnectId:o().string(),wasRemoved:o().boolean()},optional:{}}),o().union([o().object({required:{type:o().literal("notification"),key:d,value:l,version:o().number()},optional:{status:o().literals("ok","error"),ackId:o().string(),passThroughData:c}}),o().object({required:{type:o().literal("response"),status:o().literals("ok","error"),requestId:o().string(),result:o().any()},optional:{}})])),M=o().object({required:{userId:o().string(),present:o().boolean()},optional:{activityTimestamp:o().number(),blockId:o().union([o().isNull(),o().string()]),onTrustedDomain:o().boolean()}});o().object({required:{spaceId:o().string(),visitedAt:o().number()},optional:{blockId:o().string()}}),o().object({required:{max_records:o().number()},optional:{}}),o().object({required:{values:o().array(u)},optional:{}}),o().object({required:{last_length:o().number(),new_length:o().number(),added:o().boolean()},optional:{}})},319975:(e,t,n)=>{n.d(t,{R9:()=>lt,tc:()=>Xe().tc,Mw:()=>Xe().Mw,sr:()=>et().sr,rq:()=>et().rq,kE:()=>mt,dw:()=>ft,uD:()=>Bt,DN:()=>it,f0:()=>tt,jQ:()=>nt,di:()=>ct,Tv:()=>kt,Ip:()=>At,HH:()=>Tt,xE:()=>Ct,RJ:()=>bt,Wt:()=>_t,Gf:()=>ht,$D:()=>rt,yr:()=>at,jN:()=>dt,$P:()=>pt,wu:()=>Pt,VO:()=>Je().V,gw:()=>Je().g,eF:()=>Mt,ek:()=>St,US:()=>vt,Mf:()=>ut,bS:()=>xt,Vv:()=>wt,Ye:()=>yt});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550),n(941795);var o=()=>n(908006),i=()=>n(584262),r=()=>n(319954),a=()=>n(172385),s=()=>n(921940),l=()=>n(634201),c=()=>n(857639),d=()=>n(416504),u=()=>n(756005),p=()=>n(792071),m=()=>n(450648),g=()=>n(861017),f=()=>n(179034),v=()=>n(343666),h=()=>n(197959),_=()=>n(161479),b=()=>n(397277),y=()=>n(919709),S=()=>n(191772),w=()=>n(695631),k=()=>n(220719),I=()=>n(496603),x=()=>n(534177),A=()=>n(939768),C=()=>n(112873),T=()=>n(743336),M=()=>n(662453),P=()=>n(650829),B=()=>n(140022),R=()=>n(681445),E=()=>n(588836),D=()=>n(405981),N=()=>n(413962),L=()=>n(555776),O=()=>n(116008),U=()=>n(780054),F=()=>n(534402),V=()=>n(518736),j=()=>n(964345),z=()=>n(594635),H=()=>n(47373),W=()=>n(423804),q=()=>n(921855),K=()=>n(909470),G=()=>n(87878),$=()=>n(845489),Y=()=>n(728611),Q=()=>n(492414),Z=()=>n(972435),X=()=>n(231722),J=()=>n(962845),ee=()=>n(108944),te=()=>n(731320),ne=()=>n(299545),oe=()=>n(836251),ie=()=>n(347199),re=()=>n(953418),ae=()=>n(20313),se=()=>n(969197),le=()=>n(357473),ce=()=>n(906537),de=()=>n(792002),ue=()=>n(494043),pe=()=>n(12974),me=()=>n(424746),ge=()=>n(695625),fe=()=>n(393255),ve=()=>n(659026),he=()=>n(397248),_e=()=>n(351360),be=()=>n(295169),ye=()=>n(372154),Se=()=>n(797162),we=()=>n(77246),ke=()=>n(569777),Ie=()=>n(53137),xe=()=>n(205682),Ae=()=>n(990261),Ce=()=>n(77238),Te=()=>n(712505),Me=()=>n(630116),Pe=()=>n(24157),Be=()=>n(468484),Re=()=>n(808207),Ee=()=>n(234459),De=()=>n(796977),Ne=()=>n(122058);function Le(e){const{environment:t,threadId:n,traceId:o,clickedPageId:i,position:r,resultType:a,source:s}=e,l=_e().default.state.currentSpaceStore;if(!l)return;const c=De().E.createChildStore(l,{table:Ee().To,id:n,spaceId:l.id}).getConfig();if(!c||"search"!==c.type)return;const d="helpdoc"===a?"helpdocs":a;(0,Ne().VK)({environment:t,threadId:n,searchSessionId:c.searchSessionId,traceId:o,clickedPageId:i,position:r,resultType:d,source:s})}var Oe=()=>n(296206),Ue=()=>n(901265),Fe=()=>n(98244),Ve=()=>n(448619),je=()=>n(910302),ze=()=>n(132867),He=()=>n(829300),We=()=>n(755636),qe=()=>n(435009),Ke=()=>n(620689),Ge=()=>n(778417),$e=()=>n(66788),Ye=()=>n(863188),Qe=()=>n(725614),Ze=()=>n(347469),Xe=()=>n(538527),Je=()=>n(789200),et=()=>n(699744);function tt(e){const{multiSelection:t,environment:n,transaction:o}=e,i=(0,J().$W)(t);if(0===i.length)return;if(1===i.length){const{store:e,selection:t}=i[0];return nt({environment:n,transaction:o,store:e,selection:t})}const r=t.start.store,a=V().SL(r),s=i.some((e=>{let{store:t}=e;return V().SL(t)!==a})),l=(0,J().Tp)({multiSelection:t,includeNonSelectable:!1});if(!l)return;const{treeRange:d}=l;if(a&&!s){const e=new Set,i=[];for(const t of d.iterateDeletion())if("delete"===t.operation)for(const{childToRemove:e}of(0,ae().qq)({treeOperation:t,deleteFrom:"record-store-parent"}))i.push(e);else if("move"===t.operation)for(const n of t.movingChildren)n.value.store&&e.add(n.value.store);let r=0;for(const t of i)r+=1+(0,ne().zo)({blockStore:t,transclusionReferences:"omit",childPages:"omit"}).length;r<=V().Fh?F().Xt({environment:n,transaction:o,multiSelection:t,removedBlocks:i,movedBlocks:e}):c().log({level:"info",from:"deleteMultiSelection",type:"crdt:deleteMultiSelectionOverBlockLimit",data:{miscDataToConvertToString:{blockLimit:V().Fh,numBlocksInSelection:r}}})}const{start:u,end:p}=t;nt({environment:n,transaction:o,selection:{startIndex:u.index,endIndex:1/0},store:u.store});const m=(0,de().s6)(u.store),g=p.store,f=V().SL(g);if(a&&f){const e=(0,k().o9)((0,se().T)(g),"End of selection must be in a block");nt({environment:n,transaction:o,selection:{startIndex:0,endIndex:p.index},store:p.store}),F().LT({transaction:o,sourceBlockStore:e,targetStore:r})}else m?dt({environment:n,transaction:o,sourceStore:p.store,sourceIndex:p.index,targetStore:u.store,targetIndex:m.endIndex}):nt({environment:n,transaction:o,store:p.store,selection:{startIndex:p.index,endIndex:1/0}});for(const c of d.iterateDeletion())(0,ae().eM)({transaction:o,treeOperation:c,deleteFrom:"record-store-parent"});Qe().setSelection({store:u.store,selection:m}),Ge().hc({environment:n,store:d.start.value.store})}function nt(e){let{updateSelection:t=!0,...n}=e;ot({...n,updateSelection:t,removeInlineRecords:!0})}function ot(e){const{environment:t,store:n,selection:o,transaction:i,updateSelection:r,removeInlineRecords:a}=e,s=n.getValue(),c=y().xbM(s,o);if(c.startIndex===c.endIndex)return void(r&&Qe().setSelection({store:n,selection:c}));const d=y().lzV(s,o.startIndex,o.endIndex),u=n.isTable(f().ev)&&(0,se().T)(n)||n.getRecordStoreAtRootPath();if(u instanceof Me().Bv&&V().Le({store:n,blockStore:u})){const o=(0,k().o9)(u.getBlockTitleTextSliceTree()),r=new(l().Z4)(y().qAZ(s)),{startIndex:p,endIndex:m}=r.getInclusiveStringRangeForSelection(c),{operations:g,invertedOperations:f}=o.getOperationsForDeleteText(p,m);Re().d({transaction:i,store:u,crdtOperations:g,invertedOperations:f,fullTextValue:d}),$e().e0(e),a&&$e().Nz({environment:t,store:n,oldTextValue:s,newTextValue:d,transaction:i,rootStore:u})}else{var p;$e().Tm({environment:t,store:n,value:d,transaction:i,expectedVersion:null===(p=n.getAncestorBlockStoreAtRootPath())||void 0===p?void 0:p.getVersion(),onlyLogVersionMismatch:!0}),$e().Xt({environment:t,store:n,oldTextValue:s,newTextValue:d,transaction:i,rootStore:u,removeInlineRecords:a})}r&&Qe().setSelection({store:n,selection:{startIndex:c.startIndex,endIndex:c.startIndex}})}function it(e){const t=Pe().default.state;if("editing"!==t.mode)return;if((0,X().kM)(t.multiSelection))return;const{start:n,end:o}=t.multiSelection,i="start"===e.direction?n:o;Pe().default.setState({...t,multiSelection:{start:i,end:i}})}function rt(e){const{environment:t,editorMode:n,disableMentions:o,disableSlashCommands:i,disableEmojiCommands:a,disableFilters:s,string:c,transaction:d,selectAll:p,usePopupForMentionOnMobile:m,mentionSectionOrdering:g}=e,f=(0,u().Yz)(e.disabledMentionTypes);let v;const h=[];if("editing"!==Pe().default.state.mode)return;let _="multiSelection"in e?e.multiSelection:(0,X().$U)(e);const b=(0,X().H7)(_);let S=!1;const w=b?{canRestore:!0,oldSelection:b,toTextValue:b.store.getValue()}:{canRestore:!1};"default"===n||"translate_unlocked"===n?tt({environment:t,multiSelection:_,transaction:d}):"suggest"===n?(0,X().kM)(_)||(S=!0,v=N().RR(t,d,_),N().rY({environment:t,multiSelection:_,transaction:d,discussionStore:v}),_={start:{store:_.end.store,index:_.end.index},end:{store:_.end.store,index:_.end.index}}):"translate_locked"===n?je()._4():(0,x().HB)(n);const k=y().xV3(c),I=l().PE(k).length;if(0===I)return;const A=(0,de().I6)(n);if(v&&S&&A.remove([y().Ifu.SuggestionRemoveText,v.id]),"suggest"===n){if(v||0!==_.start.index)v||(v=N().RR(t,d,_,{annotations:A,annotationTypes:[y().Ifu.SuggestionRemoveText,y().Ifu.SuggestionInsertText],currentUser:t.currentUser}));else{const e=(0,$().J)(_.start.store),n=e?(0,se().T)(e):void 0;v=N().RR(t,d,_,{annotations:r().r.fromArray(y().mIW(null==e?void 0:e.getValue())),annotationTypes:[y().Ifu.SuggestionInsertText],currentUser:t.currentUser},n?{blockStore:n,suggestionTypes:["add_line_break"],currentUser:t.currentUser}:void 0)}A.add([y().Ifu.SuggestionInsertText,v.id]),A.remove([y().Ifu.SuggestionRemoveText,v.id]),h.push(_.start.store.id)}const C=y().Ey_(k,A.toArray());st({environment:t,store:_.start.store,tokens:[C],index:_.start.index,transaction:d,updateSelection:!1});const T={startIndex:p?_.start.index:_.start.index+I,endIndex:_.start.index+I};if(Qe().setSelection({store:_.start.store,selection:T}),s||Ye()._D({environment:t,editorMode:n,store:_.start.store,transaction:d}),w.canRestore){o||He().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue,disabledMentionTypes:f,usePopupOnMobile:m,mentionSectionOrdering:g}),i||fe().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),a||Fe().dw({environment:t,textStore:w.oldSelection.store,oldSelection:w.oldSelection.selection,oldTextValue:w.toTextValue}),"suggest"===n&&v&&N().c3({environment:t,transaction:d,discussionStore:v,addModifiedBlockIdsAfter:h});const e=j().Ay.state.rootBlock;t.device.isMobile&&j().Ay.state.enabled&&(0,x().O9)(e)&&!e.isTranscriptionBlock()&&z().A.setState(!0)}}function at(e){let{updateSelection:t=!0,...n}=e;st({...n,updateSelection:t})}function st(e){const{environment:t,store:n,index:o,transaction:i,selectAll:r,updateSelection:a,editorMode:s}=e;let c,d=e.tokens.map(y().x9_);if(d.length){if("suggest"===s){const e=n.getAncestorBlockStoreAtRootPath();e&&(c=N().RR(t,i,e),d=y().Mwp({textValue:d,selection:{startIndex:0,endIndex:1/0},annotation:[y().Ifu.SuggestionInsertText,c.id]}))}const r=n.getValue()||[],a=y().xym(r,d,o);if(V().SL(n)){const t=(0,k().o9)((0,se().T)(n)),r=(0,k().o9)(t.getBlockTitleTextSliceTree()),s=new(l().Z4)(y().qAZ(n.getValue())).getStringStartIndex(o),{operations:c,invertedOperations:u}=r.getOperationsForInsertTextValue(s,d);Re().d({transaction:i,store:t,crdtOperations:c,invertedOperations:u,fullTextValue:a}),$e().e0(e)}else{var u;$e().Tm({environment:t,store:n,value:a,transaction:i,expectedVersion:null===(u=n.getAncestorBlockStoreAtRootPath())||void 0===u?void 0:u.getVersion(),onlyLogVersionMismatch:!0});const e=n.getRecordStoreAtRootPath();$e().Xt({environment:t,store:n,rootStore:e,transaction:i,oldTextValue:r,newTextValue:a,removeInlineRecords:!1})}if("suggest"===s){const e=n.getAncestorBlockStoreAtRootPath();e&&N().c3({environment:t,transaction:i,discussionStore:(0,k().o9)(c),addModifiedBlockIdsAfter:[e.id]})}}if(a){const e=y().qAZ(d).length;Qe().setSelection({store:n,selection:{startIndex:r?o:o+e,endIndex:o+e}})}}function lt(e){const{environment:t,store:n,value:o,transaction:i}=e,r=n.getValue()??[];V().SL(n)?(ot({environment:t,store:n,selection:{startIndex:0,endIndex:1/0},transaction:i,updateSelection:!1,removeInlineRecords:!0}),o&&y().AhH(o)&&st({environment:t,store:n,tokens:o,index:0,transaction:i,updateSelection:!1}),$e().e0(e)):$e().Tm(e);const a=n.getRecordStoreAtRootPath();if(a instanceof Me().Bv&&r&&"suggest"===we().Uv.getMode(a)){const e=(0,b().Nk)(r),o=(0,b().Nk)(n.getValue()??[]),s=I().FF(e,...o);(0,E().u)({discussionIds:s,blockStore:a,transaction:i}),e.forEach((e=>{const n=Me().sk.createChildStore(a,{table:h().$Y,id:e,spaceId:(0,_().e)(a.pointer.spaceId)});N().c3({environment:t,transaction:i,discussionStore:n})}))}}function ct(e){const{environment:t,store:n,selection:o,transaction:i}=e,r=Z().A.getIntl(),a=p().b4_.fromGetRecordValueFn(n.inMemoryRecordCache.makeGetRecordValueFn(t.currentUser.id)),s=n.getValue()??[];let l=0,c=0;for(const u of s){const e=y().WWE(u);if(c<o.startIndex){c+=e;continue}if(c+e>o.endIndex)break;const s=y().uPN(u),p=s.find(y().iGj);let g;if(p){const o=(0,m().r4)({textValue:[u],intl:r,getRecordModel:a,userTimeZone:(0,d().P)(),externalIntegrations:Ie().A.integrations.state});g=y().Ey_(o,s.filter((e=>!I().n4(e,p)))),nt({environment:t,store:n,selection:{startIndex:c,endIndex:c+e},transaction:i}),at({environment:t,store:n,tokens:[g],index:c,transaction:i}),l+=y().WWE(g)-y().WWE(u)}c+=g?y().WWE(g):e}return{startIndex:o.startIndex,endIndex:o.endIndex+l}}function dt(e){const{environment:t,sourceStore:n,sourceIndex:o,targetStore:i,targetIndex:r,transaction:a}=e,s=y().RQ(n.getValue()),l=y().q4_(s).length,{tokensInsideRange:c}=y().AI5(s,o,l);c.length>0&&(ot({environment:t,store:n,selection:{startIndex:o,endIndex:l},transaction:a,updateSelection:!0,removeInlineRecords:!1}),at({environment:t,store:i,tokens:c,index:r,transaction:a}))}function ut(e){const{environment:t,shiftKey:n,transaction:i}=e;return function(e){const{transaction:t}=e,n=Pe().default.state;if("editing"!==n.mode)return;const{multiSelection:i}=n,r=(0,J().Tp)({multiSelection:i,includeNonSelectable:!0});if(!r)return;const{tree:a,treeRange:s}=r,l=a.value.store,c=w().l.getIndentOperationsFromTreeRange(s,e.direction);for(const o of c){const{target:e,operation:n}=o,i=(0,ae().PY)({rootStore:l,root:a,target:e});if(void 0===i)throw new Error("Cannot find node to indent");let r=!1;switch(n){case"indentSelf":case"indentSelfAndSubtree":if(i.length>=2){const e=i[i.length-2],o=i[i.length-1];if(o){let i="indentSelf"===n?"self":"subtree";(0,ue().BN)(o)&&!Be().A.isOpen(o.id)&&(i="subtree");void 0!==ze().b({blockStore:o,parentStore:e,transaction:t,type:i})&&(r=!0)}}break;case"unindentSelfAndUpdateSiblings":if(i.length>=3){const e=i[i.length-3],n=i[i.length-2],o=i[i.length-1];if(n&&o){void 0!==ze().MQ({blockStore:o,parentStore:n,grandparentStore:e,transaction:t})&&(r=!0)}}}r&&w().h.applyMutable(a,o)}o().default.afterNextFlush((()=>{const e=(0,ae().PY)({rootStore:l,root:a,target:s.start}),t=(0,ae().PY)({rootStore:l,root:a,target:s.end}),n=e&&(0,se().aI)(e[e.length-1]),o=t&&(0,se().aI)(t[t.length-1]);if(n&&o){const e={start:{store:n,index:i.start.index},end:{store:o,index:i.end.index}};Qe().setMultiSelection({multiSelection:e})}}))}({environment:t,transaction:i,direction:n?"unindent":"indent"})}function pt(e){const{transaction:t,direction:n}=e,i=Pe().default.state;if("editing"!==i.mode)return!1;const{multiSelection:r}=i,a=(0,J().ZS)({multiSelection:r,filterCommonAncestors:!0,focus:void 0});if(!a)return!1;const s=a.stores;return!("up"===n?ze().BO({transaction:t,blocks:s}):ze().oJ({transaction:t,blocks:s}))||(o().default.afterNextFlush((()=>{const[t,n]=ge().T.findSelectablesFromIds([r.start.store.id,r.end.store.id]),o=(null==t?void 0:t.props.store)&&(0,se().aI)(null==t?void 0:t.props.store),i=(null==n?void 0:n.props.store)&&(0,se().aI)(null==n?void 0:n.props.store);o&&i&&(Qe().setMultiSelection({multiSelection:{start:{store:o,index:r.start.index},end:{store:i,index:r.end.index}},forceEmit:!0}),Ke().BM({environment:e.environment}))})),!0)}function mt(e){const{transaction:t,environment:n,editorMode:o,multiSelection:i,store:r,newValue:a}=e;let s,c=r,d=a;if("suggest"===o&&i){if(!(0,X().kM)(i)){const e=y().q4_(y().Ffo(i.start.store.getValue(),0,i.start.index)),t=e.length,n=y().q4_(y().Ffo(i.start.store.getValue(),i.start.index,y().q4_(i.start.store.getValue()).length)),o=l().PE(a),r=y().FAw(y().Ffo(i.end.store.getValue(),i.end.index,y().q4_(i.end.store.getValue()).length)),u=o.slice(t,o.length-r).join(""),p=u.length;d=`${e}${u}${n}`,c=i.start.store,s={start:{store:i.start.store,index:i.start.index+p},end:{store:i.end.store,index:i.end.store===i.start.store?i.end.index+p:i.end.index}}}}else"default"===o&&i&&!(0,X().KP)(i)&&tt({environment:n,transaction:t,multiSelection:i});if(ft({...e,store:c,usingMultiSelection:!0,newValue:d}),s){const e=N().RR(n,t,s);N().rY({environment:n,transaction:t,multiSelection:s,discussionStore:e})}}function gt(e){const{environment:t,editorMode:n,store:o,disableSlashCommands:i,disableEmojiCommands:r,disableFilters:a,transaction:s,disableMentions:c,disabledMentionTypes:d,usePopupForMentionOnMobile:u,mentionSectionOrdering:p,textDiff:m,startIndex:g}=e;let f=0;for(let b=0;b<m.length;b++){const e=m[b];if(f+l().PE(e[1]).length>g){if(e[0]===le().lw){const t=m[b-1],n=m[b+1];let o=m[b-2],i=m[b+2];if(n&&n[0]===le().Ug)for(i||(i=[le().lw,""],m.push(i));f+l().PE(e[1]).length>g&&e[1].endsWith(n[1]);)e[1]=e[1].slice(0,e[1].length-n[1].length),i[1]=n[1]+i[1];else if(t&&t[0]===le().Ug)for(o||(o=[le().lw,""],m.unshift(o));f+l().PE(e[1]).length>g&&e[1].startsWith(t[1]);)e[1]=e[1].slice(t[1].length),o[1]=o[1]+t[1],f-=l().PE(t[1]).length}break}f+=l().PE(e[1]).length}let v=!1,h=!1,_=0;for(let b=0;b<m.length;b++){const[e,g]=m[b],f=l().PE(g).length;if(e===le().Ug)v=!0,rt({environment:t,editorMode:n,store:o,selection:{startIndex:_,endIndex:_},string:g,disableSlashCommands:i,disableEmojiCommands:r,disableFilters:a,transaction:s,disableMentions:c,disabledMentionTypes:d,usePopupForMentionOnMobile:u,mentionSectionOrdering:p}),_+=f;else if(e===le().Cm)if("suggest"===n){const e={start:{store:o,index:_},end:{store:o,index:_+f}},n=y().Ffo(o.getValue(),e.start.index,e.end.index),i=y().RQ(n);for(const r of i){const n=y().q4_([r]),i=l().PE(n).length,a=y().uPN(r).filter((e=>{const n=y().vu(e),i=W().o9({store:o,discussionId:n});if(i)return W().Ih(i,t.currentUser)})),c=a.find((e=>y().ZRT(e))),d=a.find((e=>y().O3D(e)));if(c){_+=i;continue}if(d){v=!0,h=g===y().Sj,nt({environment:t,store:o,selection:{startIndex:_,endIndex:_+i},transaction:s});continue}const u=N().RR(t,s,e);N().rY({environment:t,multiSelection:e,transaction:s,discussionStore:u});const p=e.start.index+i;Qe().setSelection({store:e.start.store,selection:{startIndex:p,endIndex:p}}),_+=i}}else"default"===n||"translate_unlocked"===n?(v=!0,h=g.includes(y().Sj),nt({environment:t,store:o,selection:{startIndex:_,endIndex:_+f},transaction:s})):"translate_locked"===n?je()._4():(0,x().HB)(n);else e===le().lw&&(_+=f)}return{textChanged:v,mentionDeleted:h}}function ft(e){const{environment:t,editorMode:n,store:o,newValue:i,usingMultiSelection:r,enableCaretBasedDMP:a}=e,s=o.getValue(),l=y().q4_(s),c=le().rE(l,i),d=Pe().default.state;if("editing"!==d.mode)return;const u=d.multiSelection.start.index;let p=!1,m=!1,g=!1;const f=d.multiSelection;let v;if(a&&(0,X().kM)(f)){const t=ce().get();if(v=(0,J().GI)({range:t,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}),v){const t=f.start.index,n=v.multiSelection.start.index,o=l.slice(0,t),r=l.slice(t),a=i.slice(0,n),s=i.slice(n),c=le().rE(o,a),d=le().rE(r,s),h=gt({...e,textDiff:c,startIndex:u}),_=gt({...e,textDiff:d,startIndex:u});p=h.textChanged||_.textChanged,m=h.mentionDeleted||_.mentionDeleted,g=!0}}if(!g){const t=gt({...e,textDiff:c,startIndex:u});p=t.textChanged,m=t.mentionDeleted}const h=!t.TextSelectionCompositionStore.state.isComposing;p&&h&&!m&&"suggest"!==n&&vt({environment:t,store:o,usingMultiSelection:r,updatedSelection:v})}function vt(e){const{environment:t,usingMultiSelection:n,store:o,updatedSelection:i}=e;let r=i;if(n){if(!r){const e=ce().get();r=(0,J().GI)({range:e,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0})}r&&Qe().setMultiSelection(r)}else{const e=q()._S(t);e&&(Qe().setSelection({store:o,selection:e.selection}),e.forceEmitSelectionStore&&Pe().default.emit())}}function ht(e){const{environment:t,editorMode:n,store:o,selection:i,annotation:r,analyticsFrom:a,transaction:s,shareMenuSelection:l}=e;if("suggest"===n)return;nt({environment:t,store:o,selection:i,transaction:s});const c=(0,de().DX)(i,o,n).toArray().filter((e=>e[0]!==y().Ifu.Link)),d=[y().wmz(r,c),y().Ey_(" ",c)];if(at({environment:t,store:o,tokens:d,index:i.startIndex,transaction:s}),Qe().setSelection({store:o,selection:{startIndex:i.startIndex+d.length,endIndex:i.startIndex+d.length}}),y().rie(r)&&(o.isTable("block")||o.isTable("comment"))){const e=t.currentUser.id,n=y().NcG(r),i=o.getRecordStoreAtRootPath();e&&Oe().Hp(t,{is_current_user:n===e,user_id:n,user_access_level:(0,te().om)(n),from:a,block_type:i instanceof Me().Bv?i.getType():void 0,share_menu_selection:l})}else if(y().RaC(r)&&(o.isTable("block")||o.isTable("comment"))){var u;const e=null===(u=y().FHi(r))||void 0===u?void 0:u.groupId,n=o.getRecordStoreAtRootPath();e&&Oe().dC(t,{group_id:e,from:a,block_type:n instanceof Me().Bv?n.getType():void 0})}else if(y().qsB(r)&&(o.isTable("block")||o.isTable("comment"))){const e=y().K7D(r),n=o.getRecordStoreAtRootPath();Oe().qX(t,{date:e,from:a,block_type:n instanceof Me().Bv?n.getType():void 0})}else if(y().jIt(r)&&(o.isTable("block")||o.isTable("comment"))){const e=y().v55(r),n=o.getRecordStoreAtRootPath();Oe().BI(t,{page_id:e,from:a,block_type:n instanceof Me().Bv?n.getType():void 0})}}function _t(e){const{environment:t,editorMode:n,multiSelection:o,emoji:i,transaction:r}=e;if("suggest"===n)return;tt({environment:t,multiSelection:o,transaction:r});const a=[l().qg.isCustomEmojiString(i)?y().wmz(y().XTT(l().qg.fromCustomEmojiString(i).pointer)):y().Ey_(i)];st({environment:t,store:o.start.store,tokens:a,index:o.start.index,transaction:r,updateSelection:!0}),Qe().setSelection({store:o.start.store,selection:{startIndex:o.start.index+a.length,endIndex:o.start.index+a.length}})}function bt(e){const{environment:t,editorMode:n,shouldStripTokens:o,disableFilters:i,store:r,selection:a,transaction:s}=e,c=(0,de().iu)(r,a,o),d=o?y().k4p(r.getValue()):y().q4_(r.getValue());let u=[...l().PE(d)],p=0;for(const l of c)if(p++,0===l)u.unshift("\t");else{const e=l+p;u=[...I().di(u,0,e),"\t",...I().di(u,e)]}ft({environment:t,store:r,editorMode:n,newValue:y().xV3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:i,transaction:s}),Qe().setSelection({store:r,selection:{startIndex:a.startIndex+1,endIndex:a.endIndex+p}})}function yt(e){const{environment:t,editorMode:n,shouldStripTokens:o,disableFilters:i,store:r,selection:a,transaction:s}=e,c=(0,de().iu)(r,a,o),d=o?y().k4p(r.getValue()):y().q4_(r.getValue());let u=l().PE(d),p=0,m=0;for(const l of c){const e=l-p;0===e?"\t"===u[0]?(u=I().di(u,1),p+=1):" "===u[0]&&" "===u[1]?(u=I().di(u,2),p+=2):" "===u[0]&&(u=I().di(u,1),p+=1):"\t"===u[e+1]?(u=[...I().di(u,0,e+1),...I().di(u,e+2)],p+=1):" "===u[e+1]&&" "===u[e+2]?(u=[...I().di(u,0,e+1),...I().di(u,e+3)],p+=2):" "===u[e+1]&&(u=[...I().di(u,0,e+1),...I().di(u,e+2)],p+=1),l<=a.startIndex&&(m=p)}ft({environment:t,store:r,editorMode:n,newValue:y().xV3(u.join("")),disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:i,transaction:s}),Qe().setSelection({store:r,selection:{startIndex:a.startIndex-m,endIndex:a.endIndex-p}})}function St(e){const{token:t,store:n,readOnly:o}=e;let i=0,r=0;if(t.textValue){let e=0;for(;e<t.tokenIndex;)i+=y().WWE(t.textValue[e]),e++;r=i+y().WWE(t.textValue[e])}Qe().setSelection({store:n,selection:{startIndex:i,endIndex:r},readOnly:o})}function wt(e,t){if(!t)return;const n=be().default.getSessionContext(t);if(!n)return;const o=n.getCombinedSteps().find((t=>{var n;return"queryDatabase"===t.type&&(null===(n=t.ephemeralViewData)||void 0===n?void 0:n.assistantQueryDatabaseResultId)===e}));if(null==o||!o.ephemeralViewData)return;const{collectionViewBlockId:i,collectionViewId:r}=o.ephemeralViewData;return R().S.open({collectionViewId:r,collectionViewBlockId:i})}function kt(e){var t;const{environment:o,event:r,interactiveToken:l,store:c,parentStore:d,canEdit:u}=e,p=y().uPN(l.textToken),m=y().VtW(p),b=(0,H().F0)()&&y().snh(p),w=y().Srj(p),k=y().Sev(p),I=y().g2K(p),A=y().EF0(p).map((e=>y().Orm(e))),R=y().QVD(p).map((e=>y().vu(e))),E=y().Pqo(p),N=o.RouterStore.state.route,F="chat"===N.name,V=F?N.threadId:void 0;if(y().GiG(l.textToken)&&!r.shiftKey&&!r.altKey){if(r.preventDefault(),!ke().A.state.open){const e=l.textToken,t=document.createRange(),n=l.node.parentNode,i=l.tokenIndex+1;if(t.setStart(n,l.tokenIndex),t.setEnd(n,i),ce().set(t,o.device),vt({environment:o,store:c,usingMultiSelection:!0}),"editing"!==Pe().default.state.mode)return;const r=(0,X().H7)(Pe().default.state.multiSelection);if(!r)return;return void Ve().Wx({environment:o,selectedToken:{token:e,position:r.selection},selectionRect:l.node.getBoundingClientRect(),analyticsFrom:"click_token"})}Ve().IV()}const j=[...A,...R].map((e=>{const t=d||c;return Me().sk.createChildStore(t,{table:h().$Y,id:e,spaceId:(0,_().e)(t.pointer.spaceId)})}));if(E&&null!==(t=be().default.getActiveSession())&&void 0!==t&&t.hasPendingOperations())return void P().assistantDependency.load().then((e=>{let{assistantMenuActions:t}=e;t.openAssistantFromEdit({environment:o})}));const{unresolved:z}=ne().uy(j);let W,q,K=!1;if(z.length>0){const e=Boolean(m||k||b),t=ye().A.state.open||o.device.isMobile,n=(0,se().T)(c);if(e&&t)C().xl();else if(n){const i=r.target&&r.target.getBoundingClientRect();if(L().A.reset(),C().B4({environment:o,blockStore:n,analyticsFrom:"existing_comment",discussionIds:z.map((e=>e.id)),rect:i,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,property_id:xe().A.state.isOpen?xe().A.state.property:Ce().A.state.isOpen?Ce().A.state.property:void 0}),K=!0,e&&!t)return void r.preventDefault()}}else{ne().rY(c)||me().A.find((e=>e.isEditing()))||C().xl()}if(y().zKJ(p)){var G;L().A.setActiveWithSource("text_annotation"),K&&L().A.setState({...L().A.state,overlapsExistingDiscussionMenu:!0});const e=null===(G=ie().A.UpdateSidebarCommentScroller)||void 0===G?void 0:G.getNode();e&&re().VG({element:e,environment:o,options:{top:0,behavior:"smooth"}})}else L().A.reset();if(m&&(W=xt(y().cQR(m))),b){const e=y().NcG(b);W=(0,pe().M)(e,_e().default.state.currentSpaceStore)}let $,Z,J,te,ae=!1;if(k){q=y().v55(k);const e=Me().Bv.createChildStore(d||c,{table:f().ev,id:q});ae=e.isNavigableBlock();const t=(r.altKey||Te().default.isSidePeekOpen())&&!r.metaKey;W=(0,Q().Ay)({store:e,openInSidePeek:t,preferPublicLink:(0,oe().w6)(o),pageVisitSource:i().y8.LinkInPage})}if(I){const e=y().NpB(I);if($=e.resultId,J=e.positionWithinSource,Z=e.traceId,"query_database_result"===e.type)return void wt(e.queryDatabaseResultId,c.inMemoryRecordCache.relatedAssistantSessionId);if("slack"===e.type)W=(0,S().mQ)({baseUrl:e.baseUrl,domain:e.domain,channelId:e.channelId,messageId:e.messageId,threadTs:e.threadTs}),te="slack";else if("google-drive"===e.type)W=e.url,te="google-drive";else if("helpdoc"===e.type)W=e.url,te="helpdoc";else if("helpdoc-section"===e.type)W=e.url,te="helpdoc-section";else if("github"===e.type)W=e.url,te="github";else if("gmail"===e.type)W=e.url,te="gmail";else if("webpage"===e.type)W=e.url,te="webpage";else if("url"===e.type)W=e.href;else if("jira"===e.type)W=e.url,te="jira";else if("microsoftTeams"===e.type)W=e.url,te="microsoftTeams";else if("sharepoint"===e.type)W=e.url,te="sharepoint";else if((0,x().O9)(e.type)&&"block"!==e.type)(0,x().HB)(e.type);else{const t=e.blockId;if(t){const e=Me().Bv.createChildStore(d||c,{table:f().ev,id:t});ae=e.isNavigableBlock();const n=e.getNavigableBlockStore();if(!n)return;W=F&&!r.metaKey?(0,a().EY)({currentRoute:N,pageVisitSource:i().y8.AIQna,pageId:n.id,scrollToBlockId:n.id!==e.id?e.id:void 0,isMobile:o.device.isMobile}):(0,Q().Ay)({store:e,openInSidePeek:!1,preferPublicLink:(0,oe().w6)(o),pageVisitSource:i().y8.AIQna})}}}if(W){if(O().A.isComposingNewDiscussion()){r.preventDefault();const e=O().A.state,t=e.open&&"comment"===e.content&&e.discussionInputStore||void 0;return void(t&&(async()=>{const{commentsDependency:e}=await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(24593),n.e(85314),n.e(23844),n.e(71115),n.e(4390),n.e(37125)]).then(n.bind(n,774733)),{discussionHelpers:i}=await e.load();(0,D().HR)({discussionInputStore:t,environment:o,discussionHelpers:i,reason:"navigating_away"})})())}r.preventDefault(),Qe().clear({environment:o}),Ze().co();const{device:e}=o;if(e.isIOS&&Qe().blurActiveElement(),r.shiftKey&&!r.altKey)return;const t=(0,g().parseRoute)({url:W,baseUrl:U().A.domainBaseUrl,publicDomainName:U().A.publicDomainName,isMobile:o.device.isMobile,protocol:U().A.protocol,currentUrl:window.location.href});if((0,g().Jx)(t)||"chat"===t.name){const e=Y().Vr(r);qe().oo({environment:o,url:W,openInNew:e}),k&&q&&Oe().l8(o,{page_visit_id:Ae().uk.getCurrentPageVisitId(),mentioned_page_id:q,source_type:"inline_page_mention_token",hover_preview_enabled:!0,is_navigable_block:ae});const n="page"===t.name?t.blockId:"chat"===t.name?t.peekViewBlockId:void 0;if(n)if(c.inMemoryRecordCache.isSyntheticAssistantData){const e=be().default.getActiveAssistantConfigurationState();e&&B().trackQnaResultClicked(o,{configurationState:e,clickedPageId:n,resultType:"page",source:"chat"})}else V&&Le({environment:o,threadId:V,clickedPageId:n,position:J??-1,resultType:"notion",traceId:Z,source:"chat"})}else{if("aiGtmFavoriteImport"===t.name&&o.currentUser.isLoggedIn())return void async function(e){const{favoriteImportActions:t}=await M().aiDependency.load();await t.importGtmFavorite(e)}({environment:o,importArgs:t});if("external"===t.name&&te)if(c.inMemoryRecordCache.isSyntheticAssistantData){const e=be().default.getActiveAssistantConfigurationState();e&&B().trackQnaResultClicked(o,{configurationState:e,resultType:te,source:"chat"})}else V&&$&&Le({environment:o,threadId:V,clickedPageId:$,position:J??-1,resultType:te,traceId:Z,source:"chat"});We().f({environment:o,url:W})}}else{if(u){const{textToken:e,node:t,tokenIndex:n}=l,i=y().uPN(e);if(y().$CJ(i)){const e=c.getAncestorBlockStoreAtRootPath();if(e){if("suggest"===we().Uv.getMode(e))return}return Ze().co(),T().h(o,{originRect:t.getBoundingClientRect(),textStore:c,tokenIndex:n,allowReminders:"comment"!==c.table}),void r.preventDefault()}}if(w){const e=Me().jg.createChildStore(c,{table:v().SN,id:w[1],spaceId:w[2]}),t=e.getModel();if(!t)return;const n=ee().Nq(e);if(!n)return;const a=Me().cc.createChildStore(n,t.getParentPointer()).getModel();if(!a)return;const l=Me().Bv.createChildStore(n,a.getParentPointer()).getModel(),d=l&&"table_row"===l.getType()?l.getParentId():a.getParentId(),u=(0,s().A)({pageId:n.id,scrollToBlockId:d,pageModel:n.getModel(),baseUrl:void 0,discussionId:a.id,pageVisitSource:i().y8.MentionInPage});r.preventDefault(),qe().oo({environment:o,url:u})}u&&y().G6d(p)&&(r.preventDefault(),It(e)),u&&(y().SEY(p)||y().snh(p))&&(r.preventDefault(),It(e))}}function It(e){var t;const{event:n,interactiveToken:o,environment:i,store:r}=e,{tokenIndex:a}=o,s=(0,de().Bv)(r.getValue(),a)??{startIndex:0,endIndex:0},l=Array.from(o.node.getClientRects()),c=he().KK(l),d=(null===(t=c.rects.find((e=>he().ux(e.original,n.clientX,n.clientY))))||void 0===t?void 0:t.translate)??(0,ve().zg)(),u=c.total.x+c.total.width/2,p=(0,ve().bZ)({x:n.clientX,y:n.clientY},d).x>u?s.endIndex:s.startIndex;Qe().selectAndEditMultiSelection({environment:i,multiSelection:(0,X().$U)({store:r,selection:{startIndex:p,endIndex:p}}),focus:void 0,forceEmit:!1})}function xt(e){const t=A().Jf({str:e,allowNoProtocol:!0}),n=A().qg(t);return t&&!t.startsWith("/")&&n&&!n.protocol?`http://${e}`:t}function At(e){const{environment:t,event:n,interactiveToken:o,store:i,parentStore:r,canEdit:a}=e;if(!r)return;const s=y().uPN(o.textToken),l=y().Sev(s);if(l){const e=y().i$F(l);if(!e)return;const o=Me().Bv.createChildStore(r||i,e);n.preventDefault(),Ue().it({environment:t,stores:[o],left:n.clientX,top:n.clientY,showInput:!1,actionSectionGroupKey:"page_mention",analyticsFrom:"page_mention_block_menu",pageAnnotationToken:{parentStore:r,pageAnnotation:l}})}const c=y().G6d(s);if(a&&c&&(0,G().wA)({spaceStore:_e().default.state.currentSpaceStore})){var d;const e=y().qS0(c),t=null===(d=_e().default.state.currentSpaceStore)||void 0===d?void 0:d.id;if(!e||!t||e.spaceId===t)return;const i=(0,G().nA)({parentStore:r,pointer:e});if(!i)return;n.preventDefault(),Se().A.setState({open:!0,isEditing:!1,entrypoint:"cross_workspace",originRect:o.node.getBoundingClientRect(),store:i})}}function Ct(e){Ze().LO({token:e.interactiveToken,store:e.store})}function Tt(e){Ze().co({relatedNode:e.interactiveToken.node})}function Mt(e){const{block:t,transaction:n,tokenIndex:o}=e,i=t.getBlockTitleStore();if(!t.getTitleStore()||!i.isDefined()||!i.getValue()||i.getValue().length<o)return!1;const r=i.getValue(),a=(0,de().Bv)(r,o);return!!a&&(ot({environment:t.environment,store:i,selection:a,transaction:n,updateSelection:!1,removeInlineRecords:!0}),!0)}function Pt(e){var t;const{clipboardActions:n,formulasModule:o,store:i,transaction:r}=e,a=n.getFormulaEditorInformation();if(!a)return;if(!("editing"===Pe().default.state.mode&&(null===(t=(0,X().H7)(Pe().default.state.multiSelection))||void 0===t?void 0:t.selection)))return;const s=i.getValue();if(!s)return;const l=o.textValueToFormulaTokens({formulasModule:o,getRecordModel:i.getRecordModel,sourceCollection:a.parentCollection,textValue:s,featureGates:(0,K().i)()});lt({environment:i.environment,store:i,value:l,transaction:r})}function Bt(e){const{store:t,transaction:n}=e;lt({environment:t.environment,store:t,value:void 0,transaction:n})}},320460:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},321172:(e,t,n)=>{n.d(t,{XP:()=>g,T:()=>f,Tk:()=>m});n(898992),n(354520),n(581454),n(296540);var o=()=>n(959013),i=()=>n(989423);var r=()=>n(508496);var a=()=>n(901389),s=()=>n(380682),l=()=>n(712505),c=()=>n(212640),d=()=>n(538233),u=()=>n(437487),p=n(474848);function m(e){u().Ay.reset(),l().default.state.open?c().A.setState({...c().A.state,open:!0}):d().A.setState({...d().A.state,open:!0}),function(e,t){i().vd(e,"open_page_share",t),r().default.logEvent("open_page_share")}(e,{share_menu_session_id:u().Ay.state.sessionId})}function g(e){l().default.state.open?c().A.setState({...c().A.state,open:!1}):d().A.setState({...d().A.state,open:!1}),s().A.setState({...s().A.state,siteSettingContentType:"initial"}),function(e,t){i().vd(e,"close_page_share",t)}(e,{share_menu_session_id:u().Ay.state.sessionId})}async function f(e){const{inviteTargetsStore:t}=e,n=(0,p.jsx)(o().sA,{id:"shareMenu.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),i=(0,p.jsx)(o().sA,{id:"shareMenu.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),r=(0,p.jsx)(o().sA,{id:"shareMenu.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(t.state.inviteTargets.length>0){return(await a().Gh({message:n,acceptLabel:i,cancelLabel:r})).accept}return!1}},322769:(e,t,n)=>{n.d(t,{C0:()=>v,D1:()=>f,Fu:()=>u,PM:()=>C,QE:()=>x,UL:()=>I,ao:()=>p,az:()=>m,c7:()=>A,kF:()=>_,me:()=>h,nH:()=>g,vW:()=>k,zL:()=>d,zq:()=>b});var o=()=>n(534177),i=()=>n(939768),r=()=>n(617871),a=()=>n(68263),s=()=>n(861017),l=()=>n(437607),c=()=>n(158009);function d(e,t,n){return!e||!t||!(0,a().Km)(t)||n}function u(e){let{groupId:t,spaceId:n,userId:o}=e;return{command:"set",pointer:(0,c().BZ)({userId:o,spacePermissionGroupId:t,spaceId:n}),path:[],args:{id:(0,c().bq)({userId:o,spacePermissionGroupId:t,spaceId:n}),space_permission_group_id:t,user_id:o,space_id:n}}}function p(e){let{spaceId:t,groupId:n,args:o}=e;return{command:"set",pointer:(0,l().bj)({spacePermissionGroupId:n,spaceId:t}),path:[],args:{id:(0,l().T1)({spacePermissionGroupId:n,spaceId:t}),group_id:n,space_id:t,created_at:Date.now(),name:l().uh,...o}}}function m(e){const t=null==e?void 0:e.integration_restrictions;return"approved_only"===t||"approved_or_built_by_notion"===t}function g(e){const{spaceBotSettings:t,integrationId:n,env:o}=e;return!t||(!m(t)||(!(!t.integration_approval_statuses||!t.integration_approval_statuses[n])||!("approved_or_built_by_notion"!==t.integration_restrictions||!(0,r().CX)({integrationId:n,env:o}))))}const f=(0,o().u0)((e=>e&&"personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),v=(0,o().u0)((e=>e&&"organization_personal_external_transfer"===e.type&&"completed"!==e.status?{true:e}:{false:e})),h=(0,o().u0)((e=>e&&"team_claim_upgrade"===e.type&&"requested"===e.status?{true:e}:{false:e})),_=((0,o().u0)((e=>e&&"organization_claiming_space"===e.type&&"requested"===e.status?{true:e}:{false:e})),(0,o().u0)((e=>{if(!e||"domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}}))),b=(0,o().u0)((e=>{if(!e||"organization_domain_claim_space_deletion"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"canceled":return{false:e}}})),y=((0,o().u0)((e=>y(e)||S(e)||w(e)?{true:e}:{false:e})),(0,o().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"started":return{true:e};case"failed_with_closed_source":case"failed":case"completed":case"dry_run_completed":case"pending_deletion":return{false:e}}}))),S=(0,o().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"completed":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"pending_deletion":return{false:e}}})),w=((0,o().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":case"started":case"failed_with_closed_source":case"completed":return{false:e}}})),(0,o().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":return{true:e};case"dry_run_completed":case"failed":case"started":case"completed":case"pending_deletion":return{false:e}}}))),k=(0,o().u0)((e=>{if(!e||"space_content_duplication"!==e.type)return{false:e};switch(e.status){case"failed_with_closed_source":case"started":case"completed":case"pending_deletion":return{true:e};case"dry_run_completed":case"failed":return{false:e}}}));function I(e){const{spaceId:t,baseUrl:n}=e,o=(0,s().p0)({route:{name:"space",spaceId:t,spaceDomain:void 0,requestedOnPublicDomain:void 0,searchQuery:void 0,searchRequest:void 0}});return(0,i().pf)({relativeUrl:o,baseUrl:n})}function x(e){return"none"===e.role}function A(e){return"none"!==e.role}function C(e){const t=T.exec(e);if(t&&t[1])return parseInt(t[1],16).toString()}const T=new RegExp("^v2_([a-fA-F0-9]{1,10})[a-fA-F0-9]{40}$")},322867:(e,t,n)=>{n.d(t,{Dr:()=>m,F_:()=>f,N9:()=>i,Ob:()=>_,PD:()=>y,Q:()=>v,Qo:()=>I,WY:()=>d,Zm:()=>k,_r:()=>a,dd:()=>u,g7:()=>g,k2:()=>h,kB:()=>s,mU:()=>x,oM:()=>b,rl:()=>p,rm:()=>w,ry:()=>l,tC:()=>c,yc:()=>r,zK:()=>S});n(16280);var o=()=>n(973647);class i extends Error{}class r extends Error{constructor(){super("Recurrence trigger missing schedule!")}}class a extends Error{constructor(e,t){super(t),this.automationId=void 0,this.type=e}}function s(e,t){return async n=>{const i=await e(n);return o().Q.isFail(i)&&(i.error.automationId=t(n)),i}}class l extends a{constructor(e){super("invalid_record_pointer","Invalid record pointer"),this.data=e}}class c extends a{constructor(e){super("record_pointer_in_trash","Record pointer is in trash"),this.data=e}}class d extends a{constructor(e){super("invalid_record","Invalid record"),this.data=e}}class u extends a{constructor(e){super("invalid_variable_type","Invalid variable type"),this.data=e}}class p extends a{constructor(e){super(e.type,e.message),this.data=e}}class m extends a{constructor(e){super("invalid_property_schema","Invalid property schema"),this.data=e}}class g extends a{constructor(e){super("unsupported_context","Unsupported context"),this.data=e}}class f extends a{constructor(e){super("formula_execution_failed","Formula execution failed"),this.data=e}}class v extends a{constructor(e){super("missing_context_value","Missing context value"),this.data=e}}class h extends a{constructor(e){super("missing_action_config","Missing automation action config"),this.data=e}}class _ extends a{constructor(e){super("notification_unresolvable_target_error","One or more of the send-in-app-notification targets could not be resolved to a user ID."),this.data=e}}class b extends a{constructor(e){super("misc",e.message),this.data=e}}class y extends a{constructor(e){super("execute_server_side_effect_error",e.message),this.data=e}}class S extends a{constructor(e){super("mismatch_trigger_context",e.message),this.data=e}}class w extends a{constructor(e){super("timeout","Automation execution timed out"),this.data=e}}Error;class k extends a{constructor(e){super("missing_current_sprint","No current sprint, unable to execute automation"),this.data=e}}class I extends a{constructor(e){super("unsupported_sprint_schema","Unsupported sprint schema, the collection may be using sprints V1"),this.data=e}}class x extends a{constructor(e){super("mismatch_associated_collection","Mismatch associated collection"),this.data=e}}},322931:(e,t,n)=>{n.d(t,{z:()=>r});var o=()=>n(744705),i=()=>n(630116);function r(e,t){const n=i().dn.createChildStore(e,t);if(!n||!n.isDefined())return!1;const r=n.getActionStores();for(const i of r){if(!i.isDefined())return!1;const e=i.getBlockStores();for(const t of e){if(!o().X(t))return!1}}return!0}},323316:(e,t,n)=>{n.d(t,{Dm:()=>k,JT:()=>_,xP:()=>w});n(944114),n(898992),n(354520),n(581454),n(737550);var o=()=>n(496603),i=()=>n(821062),r=()=>n(534177),a=()=>n(700500),s=()=>n(970013),l=()=>n(315771),c=()=>n(236162),d=()=>n(792071),u=()=>n(142748),p=()=>n(696706),m=()=>n(179034),g=()=>n(343666),f=()=>n(197959),v=()=>n(161479),h=()=>n(919709);async function _(e){const{loadRecordValue:t,operationPointers:n,getInitialRecordModel:i,getFinalRecordModel:r,skipCrossSpaceCollectionBacklinks:a}=e,s=[],c=[],u=async(n,o)=>{var i;const r=e.getSpaceIdFromBlockId?await e.getSpaceIdFromBlockId(n,o):void 0;if(r)return r;return null===(i=await t({table:m().ev,id:n,spaceId:o}))||void 0===i?void 0:i.space_id};return await Promise.all(n.map((async n=>{if((0,p().Yt)(n,m().ev)){const p=i.getRecordValue(n),g=r.getRecordValue(n),S=null==g?void 0:g.space_id,A={...n,spaceId:(0,v().e)(S)};let C;if(p&&(C=d().Bj6.fromBlock(p).getCollectionPointer()),(!p||!C)&&g){const n=d().Bj6.fromBlock(g).getCollectionPointer();if(n)if(a&&S&&n.spaceId&&n.spaceId!==S);else{let o=r.getRecordValue(n);if(o||(o=await t(n)),o&&o.parent_id!==g.id){const t=o.space_id;var f;if(!t)null===(f=e.logBacklinkUpdatesMissingSpaceId)||void 0===f||f.call(e,{updateType:"create",backlinkType:"collection_reference",sourceBlockId:o.parent_id,referencePointer:{id:g.id,spaceId:g.space_id,table:m().ev}});s.push({space_id:t,block_id:o.parent_id,mentioned_from:{type:"collection_reference",block_id:g.id,pointer:{id:g.id,spaceId:g.space_id,table:m().ev}}})}}}const P=(0,l().H)(y(p),y(g),b);for(const{blockId:t,propertyId:o}of P.created){const i=await u(t,S);var h;if(!i)null===(h=e.logBacklinkUpdatesMissingSpaceId)||void 0===h||h.call(e,{updateType:"create",backlinkType:"property_mention",sourceBlockId:t,referencePointer:A});s.push({space_id:i,block_id:t,mentioned_from:{type:"property_mention",block_id:n.id,property_id:o,pointer:A}})}for(const{blockId:t,propertyId:o}of P.deleted){const i=await u(t,S);var _;if(!i)null===(_=e.logBacklinkUpdatesMissingSpaceId)||void 0===_||_.call(e,{updateType:"delete",backlinkType:"property_mention",sourceBlockId:t,referencePointer:A});c.push({space_id:i,block_id:t,mentioned_from:{type:"property_mention",block_id:n.id,property_id:o,pointer:A}})}const B=T(p),R=T(g);if(B&&!o().n4(B,R)){const t=B.spaceId;var w;if(!t)null===(w=e.logBacklinkUpdatesMissingSpaceId)||void 0===w||w.call(e,{updateType:"delete",backlinkType:"alias",sourceBlockId:B.id,referencePointer:A});c.push({space_id:t,block_id:B.id,mentioned_from:{type:"alias",pointer:A}})}if(R&&!o().n4(B,R)){const t=R.spaceId;var k;if(!t)null===(k=e.logBacklinkUpdatesMissingSpaceId)||void 0===k||k.call(e,{updateType:"create",backlinkType:"alias",sourceBlockId:R.id,referencePointer:A});s.push({space_id:t,block_id:R.id,mentioned_from:{type:"alias",pointer:A}})}const E=M(p),D=M(g);if(E&&!o().n4(E,D)){const t=E.spaceId;var I;if(!t)null===(I=e.logBacklinkUpdatesMissingSpaceId)||void 0===I||I.call(e,{updateType:"delete",backlinkType:"transclusion_reference",sourceBlockId:E.id,referencePointer:A});c.push({space_id:t,block_id:E.id,mentioned_from:{type:"transclusion_reference",pointer:A}})}if(D&&!o().n4(E,D)){const t=D.spaceId;var x;if(!t)null===(x=e.logBacklinkUpdatesMissingSpaceId)||void 0===x||x.call(e,{updateType:"create",backlinkType:"transclusion_reference",sourceBlockId:D.id,referencePointer:A});s.push({space_id:t,block_id:D.id,mentioned_from:{type:"transclusion_reference",pointer:A}})}}else if((0,p().Yt)(n,g().SN)){const t=i.getRecordValue(n),o=r.getRecordValue(n),a=null==o?void 0:o.space_id,d={...n,spaceId:(0,v().e)(a)},p=(0,l().p)(S(t),S(o));for(const i of p.created){const t=await u(i,a);var A;if(!t)null===(A=e.logBacklinkUpdatesMissingSpaceId)||void 0===A||A.call(e,{updateType:"create",backlinkType:"comment_mention",sourceBlockId:i,referencePointer:d});s.push({space_id:t,block_id:i,mentioned_from:{type:"comment_mention",comment_id:n.id,pointer:d}})}for(const i of p.deleted){const t=await u(i,a);var C;if(!t)null===(C=e.logBacklinkUpdatesMissingSpaceId)||void 0===C||C.call(e,{updateType:"delete",backlinkType:"comment_mention",sourceBlockId:i,referencePointer:d});c.push({space_id:t,block_id:i,mentioned_from:{type:"comment_mention",comment_id:n.id,pointer:d}})}}}))),{createdBacklinks:s,deletedBacklinks:c}}function b(e){return`${e.blockId}${e.propertyId}`}function y(e){const t=d().Bj6.fromValue(m().ev,e),n=[];if(!t)return n;const o=t.getProperties();if(!o)return n;for(const i in o){const e=h().N5L(t.getProperty(i));for(const t of e)n.push({propertyId:i,blockId:t})}return n}function S(e){const t=d().Bj6.fromValue(g().SN,e);return t&&t.alive?h().N5L(t.getText()):[]}function w(e){var t,n,o,i;return"comment_mention"===e.mentioned_from.type?{table:g().SN,id:e.mentioned_from.comment_id,spaceId:(0,v().e)(null===(t=e.mentioned_from.pointer)||void 0===t?void 0:t.spaceId)}:"reference"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.parent_block_id,spaceId:(0,v().e)(null===(n=e.mentioned_from.parent_pointer)||void 0===n?void 0:n.spaceId)}:"property_mention"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.block_id,spaceId:(0,v().e)(null===(o=e.mentioned_from.pointer)||void 0===o?void 0:o.spaceId)}:"collection_reference"===e.mentioned_from.type?{table:m().ev,id:e.mentioned_from.block_id,spaceId:(0,v().e)(null===(i=e.mentioned_from.pointer)||void 0===i?void 0:i.spaceId)}:"alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type?e.mentioned_from.pointer:void(0,r().HB)(e.mentioned_from)}function k(e){const{backlinks:t,getRecordModel:n,sourceBlockRecordPointer:i}=e,r=(0,u().Yn)(i,n),a=o().HV(r),s=r[0];return a&&"block"===s.table?t.filter((t=>{const o=w(t),i=(0,u()._n)(o,n),r=(0,u().Yn)(o,n);return i&&I({...e,mentionedFromRecordPointer:o,shouldCheckSourceBlockPublicPermission:{sourceBlockRecordPointer:s}})&&x({mentionedFromRecordPath:r})&&A({...e,backlink:t,shouldPerformRelationCheck:{sourceBlock:s}})&&C({...e,backlink:t,mentionedFromRecordPath:r})})):[]}function I(e){const{actor:t,actorHasPermissionViaPublicAccessOnlyFn:n,mentionedFromRecordPointer:o,shouldCheckSourceBlockPublicPermission:r}=e,a=n({actor:t,recordPointer:o});if(a){if(!r)return!1;{const e=n({actor:t,recordPointer:r.sourceBlockRecordPointer});if(!e)return!1;if(!(0,i().A)(a.from,e.from))return!1}}return!0}function x(e){const{mentionedFromRecordPath:t}=e;return!t.some((e=>e.table===f().$Y&&e.resolved))}function A(e){const{getRecordModel:t,backlink:n,shouldPerformRelationCheck:o}=e;if("property_mention"===n.mentioned_from.type){var i;const e=t({table:m().ev,id:n.mentioned_from.block_id,spaceId:(0,v().e)(null===(i=n.mentioned_from.pointer)||void 0===i?void 0:i.spaceId)});if(!e)return!1;const r=(0,c().SH)({block:e,getRecordModel:t});if(r){if("title"!==n.mentioned_from.property_id){const e=s().JW(r),i=n.mentioned_from.property_id,a=e[i];if(!a)return!1;if("relation"===a.type){if(!o)return!1;{const e=o.sourceBlock,n=(0,c().SH)({block:e,getRecordModel:t}),l=s().zO(a);if(!n||n.id!==l)return!1;if(s().G2({...r.pointer,propertyId:i,propertySchema:a},n))return!1}}else if("title"!==a.type&&"text"!==a.type)return!1}}else if("title"===n.mentioned_from.property_id){if(!(0,a().Db)(e.getType(),e.getFormat()))return!1}else{if("caption"!==n.mentioned_from.property_id)return!1;if(!e.isType(a().IA))return!1}}return!0}function C(e){const{getRecordModel:t,backlink:n,mentionedFromRecordPath:o}=e,i=(0,u().NB)(o)[0],r=(0,u().fU)({table:m().ev,id:n.block_id},t)[1];return!i||!r||i.id!==r.id}function T(e){const t=d().Bj6.fromValue(m().ev,e);if(t&&"alias"===t.type)return t.getAliasTargetPointer()}function M(e){const t=d().Bj6.fromValue(m().ev,e);if(t&&"transclusion_reference"===t.type)return t.getTransclusionReferenceTargetPointer()}},324089:(e,t,n)=>{n.d(t,{MB:()=>I,_N:()=>w,_z:()=>x,xT:()=>k,In:()=>C});n(944114),n(898992),n(823215),n(430670),n(803949),n(581454);var o=()=>n(700500),i=()=>n(763884),r=()=>n(386164),a=()=>n(161479),s=()=>n(496603),l=()=>n(494043),c=()=>n(129522),d=()=>n(508496),u=()=>n(468484),p=()=>n(436604);const m=new(n(56322).A)({performRequests:async e=>{const{environment:t}=e[0],o=s().$z(e,(e=>{const t=e.headers;return t[p().eG]||t[p().B3]}));return await n(763824).lX(Object.values(o),10,(async e=>{if(e.length>0){const o=await n(449506).callApi({eventName:"loadCachedPageChunks",environment:t,data:{requests:e.map((e=>e.args))},headers:e[0].headers});if("failed"===o.type)throw o.error}})),[]},batchSize:50,maxWorkers:2,requestDelayMs:20,requestTimeoutMs:10*n(720665).TD});var g=()=>n(294917),f=()=>n(60867),v=()=>n(722101),h=()=>n(246826),_=()=>n(778417),b=()=>n(725614);const y="ToggleBlock";function S(e){return`${y}-${e}`}function w(e){const{environment:t,store:n,transaction:i}=e,r=h().Wv({environment:t,type:o().xd.text,inMemoryRecordCache:n.inMemoryRecordCache,transaction:i,spaceId:n.pointer.spaceId});v().BC({parentStore:n.getContentStore(),appendStore:r,transaction:i});const a=n.getContentStores()[0];_().hc({environment:t,store:a});const s=a.getBlockTitleStore();b().setSelectionAtStart({store:s})}function k(e){let{blockId:t,state:n,currentUserId:o}=e;u().A.setOpen(t,n),i().K.set({userId:o,key:S(t),value:n})}function I(e){let{blockId:t,currentUserId:n}=e;const o=i().K.get({userId:n,key:S(t)});u().A.setOpen(t,o)}function x(e,t){if(!t.isDefaultRecordCache())return;if(!t.hasContent())return;const n=t.pointer;!async function(e,t,n){await m.enqueue({environment:e,args:t,headers:n})}(e,{page:{id:n.id,spaceId:(0,a().e)(n.spaceId)},cursor:{stack:[]},verticalColumns:!1},(0,r().WS)({recordId:n.id,spaceId:n.spaceId}))}function A(e,t){const n=(null==t?void 0:t.toggleBlockIds)||[],i=(null==t?void 0:t.collectionBlockIds)||[],r=e.getType();if((0,l().BN)(e)&&n.push(e.id),"collection_view"!==r&&"collection_view_page"!==r||i.push(e.id),r===o().xd.transclusionReference){const t=e.getTransclusionReferenceTargetStore();t&&A(t,{toggleBlockIds:n,collectionBlockIds:i})}else{const t=e.getContentStores();for(const e of t)e.isNavigableBlock()||A(e,{toggleBlockIds:n,collectionBlockIds:i}),"collection_view"===e.getType()&&i.push(e.id)}return{toggleBlockIds:n,collectionIds:i}}function C(e){const{environment:t,blockStore:n,includeSubitems:o}=e,{toggleBlockIds:i,collectionIds:r}=A(n),a=n.environment.currentUser.id;i.forEach((e=>I({blockId:e,currentUserId:a})));const l=s().oE(r.map((e=>function(e){const t=c().K.findCollectionViewBlockFromId(e);if(t&&"collectionContextStore"in t)return t.collectionContextStore}(e)))),p=l.flatMap((e=>e.groupsStore.getAllGroupStates())),m=i.every((e=>u().A.isOpen(e))),v=p.every((e=>e.toggleStateStore.state)),h=!(m&&v);i.forEach((e=>k({blockId:e,state:h,currentUserId:a}))),function(e,t,n){for(const o of t)for(const t of o.groupsStore.getAllGroupStates())(0,g().J)({environment:e,collectionContextStore:o,groupFormat:t.groupsPointer[0],toggleStateStore:t.toggleStateStore,newValue:n})}(t,l,h);const _=d().default.checkGate({gateName:"expand_sub_items_hotkey"});if(!o||!_)return;const b=i.length>0;for(const s of l)f().Gr({collectionContextStore:s,forceState:b?h?"open":"closed":void 0})}},324234:(e,t,n)=>{n.r(t),n.d(t,{handleTokenRefresh:()=>v,initializeMobileNativeApp:()=>m,invalidateToken:()=>f,registerPushNotifications:()=>g,waitForCssInsets:()=>h});var o=()=>n(857639),i=()=>n(873005),r=()=>n(651170),a=()=>n(502800),s=()=>n(763824),l=()=>n(989423),c=()=>n(630116),d=()=>n(276470),u=()=>n(246826),p=()=>n(751156);async function m(e){if(e.device.isMobileNative&&e.mobileNative&&(await h(e),e.mobileNative.updateReceiveApiHandlers({track:t=>{l().vd(e,t.eventName,{...t.eventData,logging_source:"mobile_native"})}}),e.mobileNative&&e.mobileNative.sqliteConnection)){try{await e.mobileNative.sqliteConnection.ensureMigrated()}catch(t){o().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionEnsureMigratedError",error:(0,a().convertErrorToLog)(t),data:(0,r().CS)(t,{isBrowser:!1})})}e.mobileNative.sqliteConnection.optimize().catch((e=>{o().log({level:"error",from:"mobileNativeActions",type:"sqliteConnectionOptimizeError",error:(0,a().convertErrorToLog)(e),data:(0,r().CS)(e,{isBrowser:!1})})}))}}async function g(e){const{mobileNative:t}=e;if(t&&t.api.registerPushNotifications){const n=await t.api.registerPushNotifications();n&&v(e,n,"registration")}}function f(e){const{environment:t,token:n,userId:o}=e,r=(0,i().ON)({user_id:o,token:n}),a=new(c().pm)({environment:t,pointer:{table:i().T2,id:r}});p().createAndCommit({userAction:"mobileNativeActions.invalidateToken",userId:o,canUndo:!0,environment:t,perform:e=>{u().zv({store:a,data:{invalid:!0},transaction:e})}})}async function v(e,t,n){const o=e.currentUser.id;if(t&&o){const n=(0,i().ON)({user_id:o,token:t}),r=await(0,d().e)(e,{pointer:{table:i().T2,id:n},userId:o,version:-1});let a=!1;r&&(r.value&&!r.value.invalid||(p().createAndCommit({userAction:"mobileNativeActions.handleTokenRefresh",environment:e,canUndo:!0,perform:r=>{u().vt({environment:e,table:i().T2,args:{id:n,token:t,user_id:o,invalid:!1},inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:r})}}),a=!0))}}async function h(e){if(!e.device.isIOS||!e.device.isMobileNative)return;const t=document.createElement("div");t.style.width=`calc(${["env(safe-area-inset-top)","env(safe-area-inset-bottom)","env(safe-area-inset-left)","env(safe-area-inset-right)"].join(" + ")})`,t.style.visibility="hidden",document.body.appendChild(t);let n=0;for(;n<50&&!(t.offsetWidth>0);)await s().wR(1),n++;document.body.removeChild(t),e.WindowSizeStore.updateWindowSize()}},325383:(e,t,n)=>{n.d(t,{Kk:()=>s,Mw:()=>a,c_:()=>r,iv:()=>i});var o=()=>n(496603);function i(e){const{collectionContextStore:t,groupsPointer:n,hasPartialResults:i}=e,r=t.shouldShowSpinnerStore.state,a="load_general"===t.loadingDetailsStore.state.type&&!i||"load_more_blocks"===t.loadingDetailsStore.state.type&&o().n4(t.loadingDetailsStore.state.group,n);return r&&a}function r(e){const{collectionContextStore:t,displayState:n}=e;return t.shouldShowSpinnerStore.state&&0===n.visibleGroups.length}function a(e){const{collectionContextStore:t,isForColumnGroups:n}=e,o=n?"load_more_columns":"load_more_groups";return t.isLoadingStore.state&&t.loadingDetailsStore.state.type===o}function s(e){const{collectionContextStore:t,groupsPointer:n}=e;return t.shouldShowSpinnerStore.state&&"load_more_blocks"===t.loadingDetailsStore.state.type&&o().n4(t.loadingDetailsStore.state.group,n)}},326406:(e,t,n)=>{n.d(t,{A:()=>i});var o=()=>n(677338);function i(){const e=o().$m();return Boolean(e)}},326589:(e,t,n)=>{n.d(t,{g:()=>i});var o=()=>n(792415);function i(){var e,t;return!(null===(e=o().A.state.publicPageData)||void 0===e||!e.isPublicShareLink)||!(null===(t=o().A.state.publicPageData)||void 0===t||!t.isEditableOrCommentableSite)}},327300:(e,t,n)=>{n.d(t,{$$:()=>p,ML:()=>c,w4:()=>u});var o=n(296540),i=()=>n(847249),r=()=>n(715256),a=()=>n(430483),s=()=>n(508496),l=()=>n(477293);const c=["control",...r().pF];r().o2;class d{constructor(e){this.sidebarVariant=e,this.sidebarVariant=e}get showOldAiSidebarItem(){return{control:!0,deep_find_on_inference_transcript:!0,unified_home:!1,separate_home_and_ai_with_home_module:!1}[this.sidebarVariant]}get showNewAiSidebarItem(){return{control:!1,deep_find_on_inference_transcript:!1,unified_home:!1,separate_home_and_ai_with_home_module:!0}[this.sidebarVariant]}get showAiFaceInHomeIcon(){return{control:!1,deep_find_on_inference_transcript:!1,unified_home:!0,separate_home_and_ai_with_home_module:!1}[this.sidebarVariant]}get showAiChatModuleInHome(){return{control:!1,deep_find_on_inference_transcript:!1,unified_home:!0,separate_home_and_ai_with_home_module:!0}[this.sidebarVariant]}get isDeepFindOnInferenceTranscriptEnabled(){return"control"!==this.sidebarVariant}get showChatHistoryInHomeSidebarItem(){return{control:!1,unified_home:!0,separate_home_and_ai_with_home_module:!1,deep_find_on_inference_transcript:!1}[this.sidebarVariant]}get isFullPageChatInferenceTranscriptEnabled(){return{control:!1,deep_find_on_inference_transcript:!1,unified_home:!0,separate_home_and_ai_with_home_module:!0}[this.sidebarVariant]}}function u(){const e=(0,l().r)("ai_sidebar_v2"),t=(0,i().K8)((()=>a().zD.isAiEnabled()),[]);return(0,o.useMemo)((()=>new d(t?e:"control")),[e,t])}function p(){const e=s().default.getGroup("ai_sidebar_v2");return new d(e)}},327994:(e,t,n)=>{n.d(t,{Cz:()=>l,jK:()=>s,uy:()=>r,yh:()=>a});var o=()=>n(751735),i=()=>n(59364);const r=i().Z+6,a=i().Z,s=i().S;function l(e,t){return{fill:t?e.icon.secondary:(0,o().X4)(e.icon.secondary,.5),transition:"0.15s"}}},328523:(e,t,n)=>{n.d(t,{Mq:()=>s,cW:()=>r,gS:()=>a,l7:()=>l,np:()=>i,yY:()=>c});var o=()=>n(989423);function i(e,t){o().vd(e,"tap_mobile_action_bar_item",{item_name:t.itemName,from:t.from})}function r(e){o().vd(e,"scroll_mobile_action_bar")}function a(e){o().vd(e,"open_mobile_sidebar")}function s(e,t){o().vd(e,"tap_mobile_bottom_bar_item",{...t})}function l(e){o().vd(e,"mobile_add_to_menu_accept")}function c(e,t){o().vd(e,"navigation",{...t})}},328732:(e,t,n)=>{n.d(t,{hs:()=>Ye,ry:()=>$e,h_:()=>Ge,Vg:()=>We});n(898992),n(672577),n(737550);var o=()=>n(908006),i=()=>n(148307),r=()=>n(700500),a=(n(296540),()=>n(340498)),s=n(474848);const l=(0,a().wt)("audioBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M8.897 3.238c.798-.746 2.103-.18 2.103.913v11.697c0 1.094-1.305 1.66-2.103.914L5.673 13.75H2.75A.75.75 0 012 13V7a.75.75 0 01.75-.75h2.923l3.224-3.012zm.603 1.49l-3.02 2.82a.75.75 0 01-.511.202H3.5v4.5h2.469a.75.75 0 01.512.202l3.019 2.82V4.728z",clipRule:"evenodd"}),(0,s.jsx)("path",{d:"M12.77 6.424a.75.75 0 011.056.096 5.436 5.436 0 010 6.96.75.75 0 11-1.152-.96 3.936 3.936 0 000-5.04.75.75 0 01.096-1.056z"}),(0,s.jsx)("path",{d:"M16.364 4.57a.75.75 0 10-1.228.86 7.969 7.969 0 010 9.14.75.75 0 001.228.86 9.469 9.469 0 000-10.86z"})]})}),c=(0,a().wt)("bookmarkBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M13.75 1.5a2.75 2.75 0 012.75 2.75v11.305c0 1.501-1.766 2.306-2.898 1.32L10 13.745l-3.602 3.132c-1.132.985-2.898.18-2.898-1.32V4.25A2.75 2.75 0 016.25 1.5h7.5zM15 4.25C15 3.56 14.44 3 13.75 3h-7.5C5.56 3 5 3.56 5 4.25v11.305c0 .215.252.33.414.189l4.094-3.56a.75.75 0 01.984 0l4.094 3.56a.25.25 0 00.414-.189V4.25z",clipRule:"evenodd"})}),d=(0,a().wt)("bulletedList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M6.5 6A1.75 1.75 0 113 6a1.75 1.75 0 013.5 0zm3-.75a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm0 8a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5zm-4.75 2.5a1.75 1.75 0 100-3.5 1.75 1.75 0 000 3.5z"})}),u=(0,a().wt)("callout",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M7 6.3h6a.7.7 0 01.7.7v1a.7.7 0 11-1.4 0v-.3h-1.6v4.6h.2a.7.7 0 110 1.4H9.1a.7.7 0 110-1.4h.2V7.7H7.7V8a.7.7 0 11-1.4 0V7a.7.7 0 01.7-.7z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})}),p=(0,a().wt)("codeBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M11.741 3.614a.75.75 0 00-1.482-.228l-2 13a.75.75 0 001.482.228l2-13zM18.247 10l-3.933 4.494a.75.75 0 11-1.128-.988L16.253 10l-3.067-3.506a.75.75 0 111.128-.988L18.247 10zm-16.994.077l3.933-4.494a.75.75 0 111.128.988l-3.067 3.506 3.067 3.506a.75.75 0 11-1.128.988l-3.933-4.494z"})}),m=(0,a().wt)("csv",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 4.25C5 3.56 5.56 3 6.25 3H9.5v2.75a2.75 2.75 0 0 0 2.75 2.75H15V9a.75.75 0 0 0 1.5 0V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 0 0-1.237-.513H6.25A2.75 2.75 0 0 0 3.5 4.25v11.5a2.75 2.75 0 0 0 2.75 2.75h9.25a.75.75 0 0 0 0-1.5H6.25C5.56 17 5 16.44 5 15.75zm6-.69v2.19c0 .69.56 1.25 1.25 1.25h2.19z",clipRule:"evenodd"}),(0,s.jsx)("path",{d:"M14.011 12.932c-.333-.282-.789-.446-1.31-.546-.431-.082-.642-.19-.737-.272-.064-.054-.089-.102-.089-.205 0-.025.004-.073.103-.14.111-.074.315-.144.605-.144.559 0 .77.234.819.305a.625.625 0 0 0 1.03-.708c-.285-.414-.883-.847-1.849-.847-.472 0-.934.111-1.3.355-.376.252-.658.659-.658 1.18 0 .442.166.848.53 1.158.334.282.79.446 1.311.546.431.082.642.19.737.272.064.054.089.102.089.205 0 .025-.004.073-.104.14-.11.074-.315.144-.605.144-.558 0-.77-.234-.818-.305a.625.625 0 1 0-1.03.708c.285.414.883.847 1.848.847.472 0 .935-.111 1.3-.355.377-.252.659-.659.659-1.18 0-.442-.166-.848-.53-1.158ZM9.807 10.71c-.669-.377-1.62-.457-2.42-.13-.86.351-1.512 1.159-1.512 2.42s.652 2.069 1.512 2.42c.8.327 1.751.247 2.42-.13a.625.625 0 0 0-.614-1.09c-.336.19-.885.246-1.333.063-.389-.159-.735-.508-.735-1.263s.346-1.104.735-1.263c.448-.183.997-.127 1.333.062a.625.625 0 1 0 .614-1.088Zm6.28.243a.625.625 0 0 0-1.174.427l1.333 3.667a.625.625 0 0 0 1.175 0l1.333-3.667a.625.625 0 1 0-1.175-.427l-.746 2.052z"})]})}),g=(0,a().wt)("cursorHover",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M4.25 5C3.56 5 3 5.56 3 6.25v7.5c0 .69.56 1.25 1.25 1.25h1a.75.75 0 0 1 0 1.5h-1a2.75 2.75 0 0 1-2.75-2.75v-7.5A2.75 2.75 0 0 1 4.25 3.5h11.5a2.75 2.75 0 0 1 2.75 2.75v7.5a2.75 2.75 0 0 1-2.75 2.75h-.5a.75.75 0 0 1 0-1.5h.5c.69 0 1.25-.56 1.25-1.25v-7.5C17 5.56 16.44 5 15.75 5z"}),(0,s.jsx)("path",{d:"M6.364 10.11a.25.25 0 0 0-.348.308l2.612 7.186a.25.25 0 0 0 .469.005l.757-1.987 2.793 3.055a.748.748 0 1 0 1.108-1.009l-2.852-3.12 1.934-.696a.25.25 0 0 0 .027-.457z"})]})}),f=(0,a().wt)("divider",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.25 10A.75.75 0 013 9.25h14.5a.75.75 0 010 1.5H3a.75.75 0 01-.75-.75z",clipRule:"evenodd"})});const v=(0,a().wt)("duplicateSquares",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M15.25 4.75v-.472a2.53 2.53 0 0 0-2.528-2.528H4.278A2.53 2.53 0 0 0 1.75 4.278v8.444a2.53 2.53 0 0 0 2.528 2.528h.472v.472a2.53 2.53 0 0 0 2.528 2.528h8.444a2.53 2.53 0 0 0 2.528-2.528V7.278a2.53 2.53 0 0 0-2.528-2.528zM4.278 3.25c-.568 0-1.028.46-1.028 1.028v8.444c0 .568.46 1.028 1.028 1.028h.472V7.278A2.53 2.53 0 0 1 7.278 4.75h6.472v-.472c0-.568-.46-1.028-1.028-1.028zM6.25 7.278c0-.568.46-1.028 1.028-1.028h8.444c.568 0 1.028.46 1.028 1.028v8.444c0 .568-.46 1.028-1.028 1.028H7.278c-.568 0-1.028-.46-1.028-1.028z",clipRule:"evenodd"})}),h=(0,a().wt)("embedBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M16.75 6a.75.75 0 0 0 1.5 0V4.5a2.75 2.75 0 0 0-2.75-2.75H12a.75.75 0 0 0 0 1.5h3.5c.69 0 1.25.56 1.25 1.25zm-13.5 6a.75.75 0 0 0-1.5 0v3.5a2.75 2.75 0 0 0 2.75 2.75H6a.75.75 0 0 0 0-1.5H4.5c-.69 0-1.25-.56-1.25-1.25zM2.5 8.75A.75.75 0 0 0 3.25 8V4.5c0-.69.56-1.25 1.25-1.25H8a.75.75 0 0 0 0-1.5H4.5A2.75 2.75 0 0 0 1.75 4.5V8c0 .414.336.75.75.75m11.42.484a1.66 1.66 0 0 1 2.346 2.347l-1.278 1.277a.75.75 0 0 0 1.06 1.061l1.279-1.278a3.16 3.16 0 1 0-4.468-4.468L11.58 9.451a.75.75 0 0 0 1.06 1.06l1.278-1.277Zm-4.686 7.032a1.66 1.66 0 0 0 2.347 0l1.278-1.278a.75.75 0 0 1 1.06 1.06l-1.277 1.279a3.16 3.16 0 0 1-4.469-4.469l1.278-1.277a.75.75 0 1 1 1.06 1.06L9.235 13.92a1.66 1.66 0 0 0 0 2.347Z"}),(0,s.jsx)("path",{d:"M14.771 11.79a.75.75 0 0 0-1.06-1.061l-2.982 2.981a.75.75 0 0 0 1.06 1.061z"})]})}),_=(0,a().wt)("equationBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M12.5 6.75H8.375l2.28 2.171c.5.477.519 1.269.042 1.769l-2.444 2.56H12.5a.75.75 0 010 1.5H7.668c-1.1 0-1.663-1.318-.904-2.113L9.44 9.835l-2.551-2.43c-.817-.778-.266-2.155.862-2.155h4.75a.75.75 0 010 1.5z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.074 2.25A2.824 2.824 0 002.25 5.074v9.852a2.824 2.824 0 002.824 2.824h9.852a2.824 2.824 0 002.824-2.824V5.074a2.824 2.824 0 00-2.824-2.824H5.074zM3.75 5.074c0-.731.593-1.324 1.324-1.324h9.852c.731 0 1.324.593 1.324 1.324v9.852c0 .731-.593 1.324-1.324 1.324H5.074a1.324 1.324 0 01-1.324-1.324V5.074z",clipRule:"evenodd"})]})});const b=(0,a().wt)("fileBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10.146 3.179a3.75 3.75 0 115.304 5.303L9.793 14.14a2.25 2.25 0 11-3.182-3.182L9.439 8.13A.75.75 0 0110.5 9.19l-2.828 2.829a.75.75 0 101.06 1.06l5.657-5.656a2.25 2.25 0 10-3.182-3.182L5.55 9.896a3.75 3.75 0 105.304 5.304l4.95-4.95a.75.75 0 011.06 1.06l-4.95 4.95A5.25 5.25 0 014.49 8.836l5.656-5.657z",clipRule:"evenodd"})}),y=(0,a().wt)("fileHash",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{fillRule:"evenodd",d:"M7.75 10.625a.625.625 0 100 1.25h.752l-.269 1.75H7.25a.625.625 0 100 1.25h.79l-.158 1.03a.625.625 0 001.236.19l.187-1.22h1.736l-.159 1.03a.625.625 0 101.236.19l.188-1.22H13a.625.625 0 100-1.25h-.502l.269-1.75h.733a.625.625 0 100-1.25h-.54l.158-1.03a.625.625 0 00-1.236-.19l-.187 1.22H9.959l.159-1.03a.625.625 0 00-1.236-.19l-.187 1.22H7.75zm2.017 1.25l-.27 1.75h1.736l.27-1.75H9.766z",clipRule:"evenodd"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.5 15.75V7.664c0-.464-.184-.909-.513-1.237l-4.414-4.414a1.75 1.75 0 00-1.237-.513H6.25A2.75 2.75 0 003.5 4.25v11.5a2.75 2.75 0 002.75 2.75h7.5a2.75 2.75 0 002.75-2.75zM6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25h7.5c.69 0 1.25-.56 1.25-1.25V8.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zm6 4h2.19L11 3.56v2.19c0 .69.56 1.25 1.25 1.25z",clipRule:"evenodd"})]})}),S=(0,a().wt)("fiveColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M1.5 6a2.75 2.75 0 012.75-2.75h11.5A2.75 2.75 0 0118.5 6v7.5a2.75 2.75 0 01-2.75 2.75H4.25A2.75 2.75 0 011.5 13.5V6zm2.75-1.25C3.56 4.75 3 5.31 3 6v7.5c0 .69.56 1.25 1.25 1.25h.186v-10H4.25zm3.39 10H5.936v-10H7.64v10zm4.703 0h1.704v-10h-1.704v10zm-1.5 0v-10H9.14v10h1.703zm4.907 0h-.203v-10h.203c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25z",clipRule:"evenodd"})}),w=(0,a().wt)("folderWithTabs",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25.25A2.75 2.75 0 001.5 3v10.75a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75v-7.5c0-.055-.002-.11-.005-.164A.756.756 0 0018.5 6V3A2.75 2.75 0 0015.75.25H4.25zM3 3c0-.69.56-1.25 1.25-1.25h2c.69 0 1.25.56 1.25 1.25v1.25c0 .414.336.75.75.75h7.5c.69 0 1.25.56 1.25 1.25v7.5c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75V3zm5.7-1.25c.192.375.3.8.3 1.25v.5h3.5V3c0-.69-.56-1.25-1.25-1.25H8.7zM14 3.5h1.75a2.739 2.739 0 011.25.3V3c0-.69-.56-1.25-1.25-1.25H13.7c.192.375.3.8.3 1.25v.5z",clipRule:"evenodd"})}),k=(0,a().wt)("fourColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h1v10h-1c-.69 0-1.25-.56-1.25-1.25V6zm3.75 8.75h2.5v-10h-2.5v10zm6.5 0h-2.5v-10h2.5v10zm1.5 0h1c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-1v10z",clipRule:"evenodd"})});const I=(0,a().wt)("heading1",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zM15.2 6.147a.75.75 0 01.55.723v7.75h1a.75.75 0 010 1.5H13a.75.75 0 110-1.5h1.25V8.663a2.52 2.52 0 01-1 .207.75.75 0 010-1.5c.357 0 .688-.187.871-.493l.236-.393a.75.75 0 01.843-.337z"})}),x=(0,a().wt)("heading2",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm13.5 11.25H12.5a.75.75 0 01-.557-1.252l3.904-4.338a1.57 1.57 0 00.403-1.05 1.36 1.36 0 00-1.36-1.36h-.136c-.687 0-1.285.467-1.452 1.133l-.074.299a.75.75 0 01-1.456-.364l.075-.298a2.996 2.996 0 012.907-2.27h.136a2.86 2.86 0 012.86 2.86c0 .758-.28 1.49-.788 2.054l-2.778 3.086h3.066a.75.75 0 010 1.5z"})}),A=(0,a().wt)("heading3",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3.75 4.87a.75.75 0 10-1.5 0v10.5a.75.75 0 001.5 0v-4.25h5.5v4.25a.75.75 0 001.5 0V4.87a.75.75 0 00-1.5 0v4.75h-5.5V4.87zm8.5 2.5a.75.75 0 01.75-.75h3.5a.75.75 0 01.576 1.23l-1.62 1.945a3.37 3.37 0 012.294 3.194v.135a2.996 2.996 0 01-5.903.727l-.075-.299a.75.75 0 111.456-.364l.074.299a1.496 1.496 0 002.948-.363v-.135a1.87 1.87 0 00-1.87-1.869H14a.75.75 0 01-.576-1.23l1.475-1.77H13a.75.75 0 01-.75-.75z"})}),C=(0,a().wt)("htmlBrackets",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M14.314 14.494 18.247 10l-3.933-4.494a.75.75 0 1 0-1.128.988L16.253 10l-3.067 3.506a.75.75 0 1 0 1.128.988m-9.128-8.91-3.933 4.493 3.933 4.494a.75.75 0 1 0 1.128-.988l-3.067-3.506L6.314 6.57a.75.75 0 1 0-1.128-.988Z",clipRule:"evenodd"})}),T=(0,a().wt)("imageBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M9.75 7.5a1.75 1.75 0 11-3.5 0 1.75 1.75 0 013.5 0z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M18.25 13.5a2.75 2.75 0 01-2.75 2.75H4a2.75 2.75 0 01-2.75-2.75V6A2.75 2.75 0 014 3.25h11.5A2.75 2.75 0 0118.25 6v7.5zM4 4.75c-.69 0-1.25.56-1.25 1.25v5.69l2.22-2.22a.75.75 0 011.06 0l2.22 2.22 4.47-4.47a.75.75 0 011.06 0l2.97 2.97V6c0-.69-.56-1.25-1.25-1.25H4zm12.75 7.56l-3.5-3.5-4.47 4.47a.75.75 0 01-1.06 0L5.5 11.06l-2.719 2.72A1.25 1.25 0 004 14.75h11.5c.69 0 1.25-.56 1.25-1.25v-1.19z",clipRule:"evenodd"})]})});const M=(0,a().wt)("mermaidTail",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M1.963 3.477a.75.75 0 01.671-.215l3.106.565A6.75 6.75 0 0110 6.51a6.75 6.75 0 014.26-2.683l3.106-.565a.75.75 0 01.868.891l-.624 2.998a5.764 5.764 0 01-4.118 4.383c-.512.14-.867.606-.867 1.137V16a.75.75 0 01-.75.75h-3.75a.75.75 0 01-.75-.75v-3.33c0-.53-.355-.995-.867-1.136A5.764 5.764 0 012.39 7.151l-.624-2.998a.75.75 0 01.197-.676zm1.498 1.46l.398 1.909a4.264 4.264 0 003.046 3.242 2.678 2.678 0 011.97 2.583v2.579h2.25v-2.58c0-1.206.806-2.263 1.97-2.582a4.264 4.264 0 003.046-3.242l.398-1.909-2.01.366a5.25 5.25 0 00-3.333 2.113l-.586.82a.75.75 0 01-1.22 0l-.586-.82a5.25 5.25 0 00-3.333-2.113l-2.01-.366z",clipRule:"evenodd"})});const P=(0,a().wt)("numberedList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.126 2.961c.19.113.308.318.308.539v4a.625.625 0 11-1.25 0V4.562l-.13.073a.625.625 0 11-.608-1.093l1.06-.588a.625.625 0 01.62.007zM8.5 5.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zM6 16.625H3.5a.625.625 0 01-.474-1.032l1.923-2.24a.614.614 0 00.148-.4.26.26 0 00-.206-.255l-.164-.035a.48.48 0 00-.213.003l-.029.008a.499.499 0 00-.37.38.625.625 0 11-1.228-.234 1.748 1.748 0 011.303-1.36l.03-.008a1.73 1.73 0 01.765-.01l.164.034a1.51 1.51 0 011.197 1.478c0 .445-.16.876-.45 1.214L4.86 15.375H6a.625.625 0 110 1.25z"})});const B=(0,a().wt)("quoteBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.038 5.25a4.788 4.788 0 00-4.788 4.789v.576a4.211 4.211 0 004.212 4.212 3.058 3.058 0 10-2.712-4.472v-.316A3.288 3.288 0 017.038 6.75h.577a.75.75 0 100-1.5h-.577zm3.442 4.789a4.788 4.788 0 014.79-4.789h.576a.75.75 0 010 1.5h-.577a3.288 3.288 0 00-3.288 3.289v.316a3.057 3.057 0 112.711 4.472 4.211 4.211 0 01-4.211-4.212v-.576z"})}),R=(0,a().wt)("syncedBlock",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M1.75 4.5a.75.75 0 01.75-.75H15a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zm0 4a.75.75 0 01.75-.75H7a.75.75 0 010 1.5H2.5a.75.75 0 01-.75-.75zM13.9 9.748a3.375 3.375 0 00-4.06 2.056h.3a.623.623 0 01.441 1.066l-1.143 1.143a.625.625 0 01-.883 0L7.412 12.87a.623.623 0 01-.004-.88l.008-.007a.623.623 0 01.438-.18h.675a4.626 4.626 0 018.316-1.369.625.625 0 01-1.04.694 3.375 3.375 0 00-1.905-1.38zm4.684 4.265a.624.624 0 01-.442.183h-.675a4.62 4.62 0 01-2.494 2.987 4.624 4.624 0 01-5.822-1.617.625.625 0 111.04-.694 3.375 3.375 0 005.964-.676h-.299a.623.623 0 01-.625-.625.622.622 0 01.188-.446l1.138-1.138a.625.625 0 01.884 0l1.143 1.143a.621.621 0 010 .883z"})});const E=(0,a().wt)("tableOfContents",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M9.75 15a.75.75 0 01.75-.75H18a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM8.5 9.25a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-2-5a.75.75 0 000 1.5H14a.75.75 0 000-1.5H6.5zm-3 5a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2zM.75 5a.75.75 0 01.75-.75h2a.75.75 0 010 1.5h-2A.75.75 0 01.75 5zm4.75 9.25a.75.75 0 000 1.5h2a.75.75 0 000-1.5h-2z"})}),D=(0,a().wt)("text",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M4.25 4A.75.75 0 015 3.25h10a.75.75 0 01.75.75v2a.75.75 0 01-1.5 0V4.75h-3.5v10.5h.75a.75.75 0 010 1.5h-3a.75.75 0 010-1.5h.75V4.75h-3.5V6a.75.75 0 01-1.5 0V4z"})}),N=(0,a().wt)("textLines",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.25 6A.75.75 0 0 1 3 5.25h14a.75.75 0 0 1 0 1.5H3A.75.75 0 0 1 2.25 6m0 4A.75.75 0 0 1 3 9.25h14a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75m0 4a.75.75 0 0 1 .75-.75h8.615a.75.75 0 0 1 0 1.5H3a.75.75 0 0 1-.75-.75",clipRule:"evenodd"})});const L=(0,a().wt)("toggleHeading1",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7.75 5a.75.75 0 00-1.5 0v10.5a.75.75 0 001.5 0v-4.272h4.5V15.5a.75.75 0 001.5 0V5a.75.75 0 00-1.5 0v4.728h-4.5V5zm-5.349 7.634a.76.76 0 01-1.151-.652V9.018a.76.76 0 011.151-.652l2.47 1.482a.76.76 0 010 1.304l-2.47 1.482zM18.216 8.95a.7.7 0 00-1.04-.612l-1.766.981a.7.7 0 00.68 1.224l.726-.403v5.48a.7.7 0 101.4 0V8.95z"})}),O=(0,a().wt)("toggleHeading2",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm17.25 4.243h-3a.625.625 0 01-.505-.993l2.305-3.17c.157-.216.242-.476.242-.742v-.064a.644.644 0 00-.487-.623l-.037-.01a.67.67 0 00-.346.007.746.746 0 00-.531.594l-.024.145a.625.625 0 01-1.234-.205l.025-.145c.126-.76.68-1.38 1.42-1.591a1.92 1.92 0 01.993-.017l.037.01c.843.21 1.434.967 1.434 1.835v.064c0 .53-.169 1.048-.481 1.477l-1.584 2.178H18.5a.625.625 0 110 1.25z"})}),U=(0,a().wt)("toggleHeading3",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M7 4.25a.75.75 0 01.75.75v4.728h4.5V5a.75.75 0 011.5 0v10.5a.75.75 0 01-1.5 0v-4.272h-4.5V15.5a.75.75 0 01-1.5 0V5A.75.75 0 017 4.25zm-5.75 7.732a.76.76 0 001.151.652l2.47-1.482a.76.76 0 000-1.304l-2.47-1.482a.76.76 0 00-1.151.652v2.964zm14.333-2.607a.625.625 0 100 1.25h1.109l-.948 1.308a.625.625 0 00.506.992h.254c.62 0 1.121.502 1.121 1.121v.09a.872.872 0 01-1.719.211l-.05-.199a.625.625 0 00-1.212.304l.05.199a2.123 2.123 0 004.181-.515v-.09a2.372 2.372 0 00-1.515-2.212l1.063-1.467a.625.625 0 00-.506-.992h-2.334z"})}),F=(0,a().wt)("toggleList",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M2.5 7.688a.56.56 0 00.841.485l2.882-1.688a.563.563 0 000-.97L3.34 3.827a.56.56 0 00-.841.485v3.376zm6-2.438a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm0 8a.75.75 0 000 1.5H16a.75.75 0 000-1.5H8.5zm-5.159 2.923a.56.56 0 01-.841-.485v-3.376a.56.56 0 01.841-.485l2.882 1.688c.37.217.37.753 0 .97L3.34 16.173z"})}),V=(0,a().wt)("twoColumns",{viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4.25 3.25A2.75 2.75 0 001.5 6v7.5a2.75 2.75 0 002.75 2.75h11.5a2.75 2.75 0 002.75-2.75V6a2.75 2.75 0 00-2.75-2.75H4.25zM3 6c0-.69.56-1.25 1.25-1.25h5v10h-5c-.69 0-1.25-.56-1.25-1.25V6zm7.75 8.75h5c.69 0 1.25-.56 1.25-1.25V6c0-.69-.56-1.25-1.25-1.25h-5v10z",clipRule:"evenodd"})}),j=(0,a().wt)("videoBlock",{viewBox:"0 0 20 20",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M7.25 12.804c0 .344.376.558.675.385l4.852-2.805a.443.443 0 000-.768L7.925 6.81a.449.449 0 00-.675.385v5.608z"}),(0,s.jsx)("path",{fillRule:"evenodd",d:"M15.75 16.5a2.75 2.75 0 002.75-2.75v-7.5a2.75 2.75 0 00-2.75-2.75H4.25A2.75 2.75 0 001.5 6.25v7.5a2.75 2.75 0 002.75 2.75h11.5zM17 13.75c0 .69-.56 1.25-1.25 1.25H4.25C3.56 15 3 14.44 3 13.75v-7.5C3 5.56 3.56 5 4.25 5h11.5c.69 0 1.25.56 1.25 1.25v7.5z",clipRule:"evenodd"})]})});var z=()=>n(388821),H=()=>n(179034),W=()=>n(431404),q=()=>n(972435),K=()=>n(700251);const G=(0,K().kq)("abstractColorDarkIcon",(()=>n.e(41091).then(n.bind(n,481143)).then((e=>e.abstractColorDarkIcon)))),$=(0,K().kq)("abstractColorLightIcon",(()=>n.e(41091).then(n.bind(n,196013)).then((e=>e.abstractColorLightIcon)))),Y=(0,K().kq)("asanaColorIcon",(()=>n.e(41091).then(n.bind(n,501203)).then((e=>e.asanaColorIcon)))),Q=(0,K().kq)("codepenColorDarkIcon",(()=>n.e(41091).then(n.bind(n,229553)).then((e=>e.codepenColorDarkIcon)))),Z=(0,K().kq)("codepenColorLightIcon",(()=>n.e(41091).then(n.bind(n,394623)).then((e=>e.codepenColorLightIcon)))),X=(0,K().kq)("confluenceColorDarkIcon",(()=>n.e(41091).then(n.bind(n,950751)).then((e=>e.confluenceColorDarkIcon)))),J=(0,K().kq)("confluenceColorLightIcon",(()=>n.e(41091).then(n.bind(n,949829)).then((e=>e.confluenceColorLightIcon)))),ee=(0,a().wt)("deepnoteColor",{viewBox:"0 0 20 20",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M7.353 1c-.327.002-.471 0-.471 0L1 9.538h5.412c.46 0 .966.017 1.487.068l-1.606 2.24L1 19h7.538-.008S19 18.68 19 9.49C19 1.44 9.66.991 7.352 1Z",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"#1560AB",fillRule:"evenodd",d:"M8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.005-4.498l-1.604 2.24L1 19zm2.285-2.101.013-.02z",clipRule:"evenodd"}),(0,s.jsx)("path",{fill:"#012447",fillRule:"evenodd",d:"M6.294 11.847c3.322 0 5.496 1.557 5.056 3.74C10.909 17.768 8.53 19 8.53 19s4.373-.822 4.373-4.896c0-3.337-2.65-4.27-5.004-4.498l-1.605 2.24Z",clipRule:"evenodd"})]})}),te=(0,K().kq)("dropboxPaperColorIcon",(()=>n.e(41091).then(n.bind(n,850221)).then((e=>e.dropboxPaperColorIcon)))),ne=(0,K().kq)("evernoteColorIcon",(()=>n.e(41091).then(n.bind(n,208109)).then((e=>e.evernoteColorIcon)))),oe=(0,K().kq)("excalidrawColorDarkIcon",(()=>n.e(41091).then(n.bind(n,416245)).then((e=>e.excalidrawColorDarkIcon)))),ie=(0,K().kq)("excalidrawColorLightIcon",(()=>n.e(41091).then(n.bind(n,154427)).then((e=>e.excalidrawColorLightIcon)))),re=(0,K().kq)("figmaColorIcon",(()=>n.e(41091).then(n.bind(n,772661)).then((e=>e.figmaColorIcon)))),ae=(0,K().kq)("framerColorDarkIcon",(()=>n.e(41091).then(n.bind(n,794424)).then((e=>e.framerColorDarkIcon)))),se=(0,K().kq)("framerColorLightIcon",(()=>n.e(41091).then(n.bind(n,655640)).then((e=>e.framerColorLightIcon)))),le=(0,K().kq)("githubColorDarkIcon",(()=>n.e(41091).then(n.bind(n,837730)).then((e=>e.githubColorDarkIcon)))),ce=(0,K().kq)("githubColorLightIcon",(()=>n.e(41091).then(n.bind(n,262522)).then((e=>e.githubColorLightIcon)))),de=(0,K().kq)("googleDocsColorDarkIcon",(()=>n.e(41091).then(n.bind(n,535513)).then((e=>e.googleDocsColorDarkIcon)))),ue=(0,K().kq)("googleDocsColorLightIcon",(()=>n.e(41091).then(n.bind(n,524503)).then((e=>e.googleDocsColorLightIcon)))),pe=(0,K().kq)("hexColorDarkIcon",(()=>n.e(41091).then(n.bind(n,69088)).then((e=>e.hexColorDarkIcon)))),me=(0,K().kq)("hexColorLightIcon",(()=>n.e(41091).then(n.bind(n,435152)).then((e=>e.hexColorLightIcon)))),ge=(0,K().kq)("invisionColorIcon",(()=>n.e(41091).then(n.bind(n,52554)).then((e=>e.invisionColorIcon)))),fe=(0,K().kq)("loomColorIcon",(()=>n.e(41091).then(n.bind(n,131924)).then((e=>e.loomColorIcon)))),ve=(0,K().kq)("mapsColorIcon",(()=>n.e(41091).then(n.bind(n,756134)).then((e=>e.mapsColorIcon)))),he=(0,K().kq)("miroColorIcon",(()=>n.e(41091).then(n.bind(n,965940)).then((e=>e.miroColorIcon)))),_e=(0,K().kq)("mixpanelColorDarkIcon",(()=>n.e(41091).then(n.bind(n,196093)).then((e=>e.mixpanelColorDarkIcon)))),be=(0,K().kq)("mixpanelColorLightIcon",(()=>n.e(41091).then(n.bind(n,205011)).then((e=>e.mixpanelColorLightIcon)))),ye=(0,K().kq)("mondayColorIcon",(()=>n.e(41091).then(n.bind(n,442385)).then((e=>e.mondayColorIcon)))),Se=(0,K().kq)("quipColorDarkIcon",(()=>n.e(41091).then(n.bind(n,493198)).then((e=>e.quipColorDarkIcon)))),we=(0,K().kq)("quipColorLightIcon",(()=>n.e(41091).then(n.bind(n,870750)).then((e=>e.quipColorLightIcon)))),ke=(0,K().kq)("replitColorDarkIcon",(()=>n.e(41091).then(n.bind(n,237385)).then((e=>e.replitColorDarkIcon)))),Ie=(0,K().kq)("replitColorLightIcon",(()=>n.e(41091).then(n.bind(n,775591)).then((e=>e.replitColorLightIcon)))),xe=(0,K().kq)("sketchColorDarkIcon",(()=>n.e(41091).then(n.bind(n,168069)).then((e=>e.sketchColorDarkIcon)))),Ae=(0,K().kq)("sketchColorLightIcon",(()=>n.e(41091).then(n.bind(n,974379)).then((e=>e.sketchColorLightIcon)))),Ce=(0,K().kq)("trelloColorDarkIcon",(()=>n.e(41091).then(n.bind(n,507087)).then((e=>e.trelloColorDarkIcon)))),Te=(0,K().kq)("trelloColorLightIcon",(()=>n.e(41091).then(n.bind(n,834325)).then((e=>e.trelloColorLightIcon)))),Me=(0,K().kq)("twitterColorDarkIcon",(()=>n.e(41091).then(n.bind(n,612802)).then((e=>e.twitterColorDarkIcon)))),Pe=(0,K().kq)("twitterColorLightIcon",(()=>n.e(41091).then(n.bind(n,334810)).then((e=>e.twitterColorLightIcon)))),Be=(0,K().kq)("typeformColorDarkIcon",(()=>n.e(41091).then(n.bind(n,629271)).then((e=>e.typeformColorDarkIcon)))),Re=(0,K().kq)("typeformColorLightIcon",(()=>n.e(41091).then(n.bind(n,807501)).then((e=>e.typeformColorLightIcon)))),Ee=(0,K().kq)("whimsicalColorDarkIcon",(()=>n.e(41091).then(n.bind(n,112094)).then((e=>e.whimsicalColorDarkIcon)))),De=(0,K().kq)("whimsicalColorLightIcon",(()=>n.e(41091).then(n.bind(n,705550)).then((e=>e.whimsicalColorLightIcon)))),Ne=(0,K().kq)("wordColorIcon",(()=>n.e(41091).then(n.bind(n,862761)).then((e=>e.wordColorIcon)))),Le=(0,K().kq)("workflowyColorDarkIcon",(()=>n.e(41091).then(n.bind(n,555197)).then((e=>e.workflowyColorDarkIcon)))),Oe=(0,K().kq)("workflowyColorLightIcon",(()=>n.e(41091).then(n.bind(n,459795)).then((e=>e.workflowyColorLightIcon))));var Ue=()=>n(227440),Fe=()=>n(404141),Ve=()=>n(878377),je=()=>n(389658),ze=()=>n(661491);const He=(0,n(959013).YK)({textDescription:{id:"newBlock.text.description",defaultMessage:"Just start writing with plain text."},textKeywords:{id:"newBlock.text.fuzzySearchKeywords",defaultMessage:"Text"},encryptedTextDescription:{id:"newBlock.encryptedText.description",defaultMessage:"Just start writing...and your text will be stored encrypted!"},pageDescription:{id:"newBlock.page.description",defaultMessage:"Embed a sub-page inside this page."},pageKeywords:{id:"newBlock.page.fuzzySearchKeywords",defaultMessage:"Page"},linkToPageDescription:{id:"newBlock.linkToPage.description",defaultMessage:"Link to an existing page."},linkToPageKeywords:{id:"newBlock.linkToPage.fuzzySearchKeywords",defaultMessage:"Link to page ltp"},transclusionContainerDescription:{id:"newBlock.transclusionContainer.description",defaultMessage:"Sync content across pages."},transclusionContainerKeywords:{id:"newBlock.transclusionContainer.fuzzySearchKeywords",defaultMessage:"synced block reference portal block embed group"},toDoDescription:{id:"newBlock.toDo.description",defaultMessage:"Track tasks with a to-do list."},toDoKeywords:{id:"newBlock.toDo.fuzzySearchKeywords",defaultMessage:"Todo To-Do Checkbox List Do"},headerDescription:{id:"newBlock.header.description",defaultMessage:"Big section heading."},headerKeywords:{id:"newBlock.header.fuzzySearchKeywords",defaultMessage:"Heading 1 h1"},subHeaderDescription:{id:"newBlock.subHeader.description",defaultMessage:"Medium section heading."},subHeaderKeywords:{id:"newBlock.subHeader.fuzzySearchKeywords",defaultMessage:"sub heading 2 h2 two"},subSubHeaderDescription:{id:"newBlock.subSubHeader.description",defaultMessage:"Small section heading."},subSubHeaderKeywords:{id:"newBlock.subSubHeader.fuzzySearchKeywords",defaultMessage:"subsub heading 3 h3 three"},imageDescription:{id:"newBlock.image.description",defaultMessage:"Upload or embed with a link."},imageKeywords:{id:"newBlock.image.fuzzySearchKeywords",defaultMessage:"Image Picture Gif Giphy Photo img"},bookmarkDescription:{id:"newBlock.bookmark.description",defaultMessage:"Save a link as a visual bookmark."},bookmarkKeywords:{id:"newBlock.bookmark.fuzzySearchKeywords",defaultMessage:"Web Link Bookmark"},dividerDescription:{id:"newBlock.divider.description",defaultMessage:"Visually divide blocks."},dividerKeywords:{id:"newBlock.divider.fuzzySearchKeywords",defaultMessage:"Horizontal Rule Divider line section separator —-"},codeDescription:{id:"newBlock.code.description",defaultMessage:"Capture a code snippet."},codeKeywords:{id:"newBlock.code.fuzzySearchKeywords",defaultMessage:"Code"},quoteDescription:{id:"newBlock.quote.description",defaultMessage:"Capture a quote."},quoteKeywords:{id:"newBlock.quote.fuzzySearchKeywords",defaultMessage:"Quote ”"},bulletedListDescription:{id:"newBlock.bulletedList.description",defaultMessage:"Create a simple bulleted list."},bulletedListKeywords:{id:"newBlock.bulletedList.fuzzySearchKeywords",defaultMessage:"Bulleted List"},numberedListDescription:{id:"newBlock.numberedList.description",defaultMessage:"Create a list with numbering."},numberedListKeywords:{id:"newBlock.numberedList.fuzzySearchKeywords",defaultMessage:"Numbered List"},toggleDescription:{id:"newBlock.toggle.description",defaultMessage:"Toggles can hide and show content inside."},toggleKeywords:{id:"newBlock.toggle.fuzzySearchKeywords",defaultMessage:"Toggle list expand collapse details"},fileDescription:{id:"newBlock.file.description",defaultMessage:"Upload or embed with a link."},fileKeywords:{id:"newBlock.file.fuzzySearchKeywords",defaultMessage:"File upload attach"},videoDescription:{id:"newBlock.video.description",defaultMessage:"Embed from YouTube, Vimeo..."},videoKeywords:{id:"newBlock.video.fuzzySearchKeywords",defaultMessage:"Video"},audioDescription:{id:"newBlock.audio.description",defaultMessage:"Embed from SoundCloud, Spotify..."},audioKeywords:{id:"newBlock.audio.fuzzySearchKeywords",defaultMessage:"Audio Sound Music"},embedDescription:{id:"newBlock.embed.description",defaultMessage:"For PDFs, Google Maps, and more."},embedKeywords:{id:"newBlock.embed.fuzzySearchKeywords",defaultMessage:"Embed iFrame"},driveDescription:{id:"newBlock.drive.description",defaultMessage:"Embed a Google Doc, Google Sheet..."},driveKeywords:{id:"newBlock.drive.fuzzySearchKeywords",defaultMessage:"Google Drive"},figmaDescription:{id:"newBlock.figma.description",defaultMessage:"Embed a Figma file."},figmaKeywords:{id:"newBlock.figma.fuzzySearchKeywords",defaultMessage:"Figma"},loomDescription:{id:"newBlock.loom.description",defaultMessage:"Embed a Loom recording."},loomKeywords:{id:"newBlock.loom.fuzzySearchKeywords",defaultMessage:"Loom"},typeformDescription:{id:"newBlock.typeform.description",defaultMessage:"Embed a Typeform."},typeformKeywords:{id:"newBlock.typeform.fuzzySearchKeywords",defaultMessage:"Typeform"},codepenDescription:{id:"newBlock.codepen.description",defaultMessage:"Embed a CodePen."},codepenKeywords:{id:"newBlock.codepen.fuzzySearchKeywords",defaultMessage:"CodePen"},tweetDescription:{id:"newBlock.tweet.description",defaultMessage:"Embed a Tweet."},tweetKeywords:{id:"newBlock.tweet.fuzzySearchKeywords",defaultMessage:"Tweet"},gistDescription:{id:"newBlock.gist.description",defaultMessage:"Embed a Gist from GitHub."},gistKeywords:{id:"newBlock.gist.fuzzySearchKeywords",defaultMessage:"GitHub Gist"},mapsDescription:{id:"newBlock.maps.description",defaultMessage:"Embed a Google Map."},mapsKeywords:{id:"newBlock.maps.fuzzySearchKeywords",defaultMessage:"Google Maps"},framerDescription:{id:"newBlock.framer.description",defaultMessage:"Embed a Framer prototype."},framerKeywords:{id:"newBlock.framer.fuzzySearchKeywords",defaultMessage:"Framer"},invisionDescription:{id:"newBlock.invision.description",defaultMessage:"Embed an Invision project."},invisionKeywords:{id:"newBlock.invision.fuzzySearchKeywords",defaultMessage:"Invision"},mixpanelDescription:{id:"newBlock.mixpanel.description",defaultMessage:"Embed a Mixpanel project."},mixpanelKeywords:{id:"newBlock.mixpanel.fuzzySearchKeywords",defaultMessage:"Mixpanel"},equationDescription:{id:"newBlock.equation.description",defaultMessage:"Display a standalone math equation."},equationKeywords:{id:"newBlock.equation.fuzzySearchKeywords",defaultMessage:"LaTeX Math Block Equation $$ Formula"},pdfDescription:{id:"newBlock.pdf.description",defaultMessage:"Embed a PDF."},pdfKeywords:{id:"newBlock.pdf.fuzzySearchKeywords",defaultMessage:"PDF"},factoryDescription:{id:"newBlock.factory.description",defaultMessage:"Duplicate blocks with a click."},factoryKeywords:{id:"newBlock.factory.fuzzySearchKeywords",defaultMessage:"Template Duplicate Button"},buttonDescription:{id:"newBlock.button.description",defaultMessage:"Run custom automations with a click."},buttonKeywords:{id:"newBlock.button.fuzzySearchKeywords",defaultMessage:"Button automation template duplicate"},breadcrumbDescription:{id:"newBlock.breadcrumb.description",defaultMessage:"Show the current page location."},breadcrumbKeywords:{id:"newBlock.breadcrumb.fuzzySearchKeywords",defaultMessage:"Breadcrumb"},calloutDescription:{id:"newBlock.callout.description",defaultMessage:"Make writing stand out."},calloutKeywords:{id:"newBlock.callout.fuzzySearchKeywords",defaultMessage:"Callout"},table_of_contentsDescription:{id:"newBlock.tableOfContents.description",defaultMessage:"Show an outline of your page."},table_of_contentsKeywords:{id:"newBlock.tableOfContents.fuzzySearchKeywords",defaultMessage:"TOC Table of Contents"},whimsicalDescription:{id:"newBlock.whimsical.description",defaultMessage:"Embed a Whimsical board."},whimsicalKeywords:{id:"newBlock.whimsical.fuzzySearchKeywords",defaultMessage:"Whimsical"},hexDescription:{id:"newBlock.hex.description",defaultMessage:"Embed a Hex cell."},hexKeywords:{id:"newBlock.hex.fuzzySearchKeywords",defaultMessage:"Hex"},deepnoteDescription:{id:"newBlock.deepnote.description",defaultMessage:"Embed a Deepnote block."},deepnoteKeywords:{id:"newBlock.deepnote.fuzzySearchKeywords",defaultMessage:"Deepnote"},miroDescription:{id:"newBlock.miro.description",defaultMessage:"Embed a Miro board."},miroKeywords:{id:"newBlock.miro.fuzzySearchKeywords",defaultMessage:"Miro"},abstractDescription:{id:"newBlock.abstract.description",defaultMessage:"Embed an Abstract project."},abstractKeywords:{id:"newBlock.abstract.fuzzySearchKeywords",defaultMessage:"Abstract"},sketchDescription:{id:"newBlock.sketch.description",defaultMessage:"Embed a Sketch document."},sketchKeywords:{id:"newBlock.sketch.fuzzySearchKeywords",defaultMessage:"Sketch"},excalidrawDescription:{id:"newBlock.excalidraw.description",defaultMessage:"Embed an Excalidraw whiteboard."},excalidrawKeywords:{id:"newBlock.excalidraw.fuzzySearchKeywords",defaultMessage:"Excalidraw"},replitDescription:{id:"newBlock.replit.description",defaultMessage:"Embed a repl."},replitKeywords:{id:"newBlock.replit.fuzzySearchKeywords",defaultMessage:"Replit"},simpleTableDescription:{id:"newBlock.simple_table.description",defaultMessage:"Add simple tabular content to your page."},simpleTableKeywords:{id:"newBlock.simple_table.fuzzySearchKeywords",defaultMessage:"Table"},tabDescription:{id:"newBlock.tab.description",defaultMessage:"Organize content in tabs."},tabKeywords:{id:"newBlock.tab.keywords",defaultMessage:"tab tabs tabbed switch toggle"},toggleFormatHeaderTitle:{id:"newBlock.toggleFormatHeader.title",defaultMessage:"Toggle heading 1"},toggleFormatHeaderDescription:{id:"newBlock.toggleFormatHeader.description",defaultMessage:"Hide content inside a large heading."},toggleFormatHeaderKeywords:{id:"newBlock.toggleFormatHeader.fuzzySearchKeywords",defaultMessage:"toggle heading expand 1 h1 th1"},toggleFormatSubHeaderTitle:{id:"newBlock.toggleFormatSubHeader.title",defaultMessage:"Toggle heading 2"},toggleFormatSubHeaderDescription:{id:"newBlock.toggleFormatSubHeader.description",defaultMessage:"Hide content inside a medium heading."},toggleFormatSubHeaderKeywords:{id:"newBlock.toggleFormatSubHeader.fuzzySearchKeywords",defaultMessage:"toggle sub heading expand 2 h2 two th2"},toggleFormatSubSubHeaderTitle:{id:"newBlock.toggleFormatSubSubHeader.title",defaultMessage:"Toggle heading 3"},toggleFormatSubSubHeaderDescription:{id:"newBlock.toggleFormatSubSubHeader.description",defaultMessage:"Hide content inside a small heading."},toggleFormatSubSubHeaderKeywords:{id:"newBlock.toggleFormatSubSubHeader.fuzzySearchKeywords",defaultMessage:"toggle subsub heading expand 3 h3 three th3"},columnListDescription:{id:"newBlock.columnList.description",defaultMessage:"Create columns of blocks."},columnListKeywords:{id:"newBlock.columnList.fuzzySearchKeywords",defaultMessage:"col column columns block vertical"},column2Title:{id:"newBlock.column2.title",defaultMessage:"2 columns"},column2Description:{id:"newBlock.column2.description",defaultMessage:"Create 2 columns of blocks."},column2Keywords:{id:"newBlock.column2.fuzzySearchKeywords",defaultMessage:"col c2 col2 columns block vertical 2col two"},column3Title:{id:"newBlock.column3.title",defaultMessage:"3 columns"},column3Description:{id:"newBlock.column3.description",defaultMessage:"Create 3 columns of blocks."},column3Keywords:{id:"newBlock.column3.fuzzySearchKeywords",defaultMessage:"col c3 col3 column3 columns 3col three"},column4Title:{id:"newBlock.column4.title",defaultMessage:"4 columns"},column4Description:{id:"newBlock.column4.description",defaultMessage:"Create 4 columns of blocks."},column4Keywords:{id:"newBlock.column4.fuzzySearchKeywords",defaultMessage:"col c4 col4 column4 columns 4col four"},column5Title:{id:"newBlock.column5.title",defaultMessage:"5 columns"},column5Description:{id:"newBlock.column5.description",defaultMessage:"Create 5 columns of blocks."},column5Keywords:{id:"newBlock.column5.fuzzySearchKeywords",defaultMessage:"col c5 col5 column5 columns 5col five"},mermaidCodeTitle:{id:"newBlock.mermaidCode.title",defaultMessage:"Code - Mermaid"},mermaidCodeDescription:{id:"newBlock.mermaidCode.description",defaultMessage:"Create a diagram by writing code."},mermaidCodeKeywords:{id:"newBlock.mermaidCode.fuzzySearchKeywords",defaultMessage:"mermaid diagram graphviz flowchart code"},aiFreePromptBlockTitle:{id:"newBlock.aiFreePromptBlock.title2",defaultMessage:"AI Block"},aiFreePromptDescription:{id:"newBlock.aiFreePromptBlock.description",defaultMessage:"Generate content from any instruction."},aiFreePromptKeywords:{id:"newBlock.aiFreePromptBlock.fuzzySearchKeywords",defaultMessage:"ask help question prompt ai custom block content"},drawingDescription:{id:"newBlock.drawing.description",defaultMessage:"Draw and diagram on an infinite canvas."},drawingKeywords:{id:"newBlock.drawing.fuzzySearchKeywords",defaultMessage:"drawing diagram canvas illustration draw sketch tldraw doodle mindmap architecture paint pen"},slideDescription:{id:"newBlock.slide.description",defaultMessage:"Create a presentable slide."},slideKeywords:{id:"newBlock.slide.fuzzySearchKeywords",defaultMessage:"slide present presentation"},transcriptionDescription:{id:"newBlock.transcription.description",defaultMessage:"Turn meetings into organized notes."},transcriptionKeywords:{id:"newBlock.transcription.fuzzySearchKeywords",defaultMessage:"ai meeting notes transcription dictation audio speech record voice"},asanaImportTitle:{id:"newBlock.asanaImport.import",defaultMessage:"Asana"},asanaImportDescription:{id:"newBlock.asanaImport.description",defaultMessage:"Bring projects and tasks form Asana into Notion."},asanaImportKeywords:{id:"newBlock.asanaImport.fuzzySearchKeywords",defaultMessage:"Asana Projects Tasks Import"},confluenceApiImportTitle:{id:"newBlock.confluenceApiImport.import",defaultMessage:"Confluence"},confluenceApiImportDescription:{id:"newBlock.confluenceApiImport.description",defaultMessage:"Bring documents from Confluence via API into Notion."},confluenceApiImportKeywords:{id:"newBlock.confluenceApiImport.fuzzySearchKeywords",defaultMessage:"Confluence"},googleDocsImportTitle:{id:"newBlock.googleDocsImport.import",defaultMessage:"Google Docs"},googleDocsImportDescription:{id:"newBlock.googleDocsImport.description",defaultMessage:"Bring documents from Google Docs into Notion."},googleDocsImportKeywords:{id:"newBlock.googleDocsImport.fuzzySearchKeywords",defaultMessage:"Google Docs Import"},dropboxPaperImportTitle:{id:"newBlock.dropboxPaperImport.import",defaultMessage:"Dropbox Paper"},dropboxPaperImportDescription:{id:"newBlock.dropboxPaperImport.description",defaultMessage:"Bring documents from Dropbox Paper into Notion."},dropboxPaperImportKeywords:{id:"newBlock.dropboxPaperImport.fuzzySearchKeywords",defaultMessage:"Dropbox Paper Import"},evernoteImportTitle:{id:"newBlock.evernoteImport.import",defaultMessage:"Evernote"},evernoteImportDescription:{id:"newBlock.evernoteImport.description",defaultMessage:"Bring notes from Evernote into Notion."},evernoteImportKeywords:{id:"newBlock.evernoteImport.fuzzySearchKeywords",defaultMessage:"Evernote Import"},wordImportTitle:{id:"newBlock.wordImport.import",defaultMessage:"Word"},wordImportDescription:{id:"newBlock.wordImport.description",defaultMessage:"Bring documents from Microsoft Word into Notion."},wordImportKeywords:{id:"newBlock.wordImport.fuzzySearchKeywords",defaultMessage:"Word Import"},workflowyImportTitle:{id:"newBlock.workflowyImport.import",defaultMessage:"Workflowy"},workflowyImportDescription:{id:"newBlock.workflowyImport.description",defaultMessage:"Bring documents from Workflowy into Notion."},workflowyImportKeywords:{id:"newBlock.workflowyImport.fuzzySearchKeywords",defaultMessage:"Workflowy Import"},mondayImportTitle:{id:"newBlock.mondayImport.import",defaultMessage:"Monday"},mondayImportDescription:{id:"newBlock.mondayImport.description",defaultMessage:"Bring projects & tasks from Monday into Notion."},mondayImportKeywords:{id:"newBlock.mondayImport.fuzzySearchKeywords",defaultMessage:"Monday Import"},trelloImportTitle:{id:"newBlock.trelloImport.import",defaultMessage:"Trello"},trelloImportDescription:{id:"newBlock.trelloImport.description",defaultMessage:"Bring projects & tasks from Trello into Notion."},trelloImportKeywords:{id:"newBlock.trelloImport.fuzzySearchKeywords",defaultMessage:"Trello Import"},quipImportTitle:{id:"newBlock.quipImport.import",defaultMessage:"Quip"},quipImportDescription:{id:"newBlock.quipImport.description",defaultMessage:"Bring documents from Quip into Notion."},quipImportKeywords:{id:"newBlock.quipImport.fuzzySearchKeywords",defaultMessage:"Quip Import"},csvImportTitle:{id:"newBlock.csvImport.import",defaultMessage:"CSV"},csvImportDescription:{id:"newBlock.csvImport.description",defaultMessage:"Bring data from CSV into Notion."},csvImportKeywords:{id:"newBlock.csvImport.fuzzySearchKeywords",defaultMessage:"CSV Import"},genericImportTitle:{id:"newBlock.genericImport.import",defaultMessage:"ZIP"},genericImportDescription:{id:"newBlock.genericImport.description",defaultMessage:"Bring data from other tools into Notion."},genericImportKeywords:{id:"newBlock.genericImport.fuzzySearchKeywords",defaultMessage:"Generic Universal Zip Import"},htmlImportTitle:{id:"newBlock.htmlImport.import",defaultMessage:"HTML"},htmlImportDescription:{id:"newBlock.htmlImport.description",defaultMessage:"Bring data from HTML into Notion."},htmlImportKeywords:{id:"newBlock.htmlImport.fuzzySearchKeywords",defaultMessage:"HTML Import"},markdownImportTitle:{id:"newBlock.markdownImport.import",defaultMessage:"Text and Markdown"},markdownImportDescription:{id:"newBlock.markdownImport.description",defaultMessage:"Bring data from text and markdown into Notion."},markdownImportKeywords:{id:"newBlock.markdownImport.fuzzySearchKeywords",defaultMessage:"Text Markdown Import"},pdfImportTitle:{id:"newBlock.pdfImport.import",defaultMessage:"PDF"},pdfImportDescription:{id:"newBlock.pdfImport.description",defaultMessage:"Bring data from PDF into Notion."},pdfImportKeywords:{id:"newBlock.pdfImport.fuzzySearchKeywords",defaultMessage:"PDF Import"}});function We(e){const{key:t,displayName:n,fuzzySearchKeywords:o,blockType:i,thumbnail:r,mobileNativeThumbnail:a,thumbnailPadding:s,tooltipPhoto:l,description:c,shouldShow:d,isDisabled:u,disabledTooltipMessage:p,badge:m,postCreateCallback:g,collectionViewType:f,isToggleable:v,icon:h}=e,_=q().A.formatMessage(o),b=_!==o.defaultMessage?`${_} ${o.defaultMessage}`:_,y=e.createTemplate??(()=>z().RecordMapPolymorphic.create({[H().ev]:{root:{id:"root",type:i}}}));return{key:t,displayName:q().A.formatMessage(n),analyticsName:n.defaultMessage,searchName:b,thumbnail:r,mobileNativeThumbnail:a,thumbnailPadding:s,tooltipPhoto:l,description:c?q().A.formatMessage(c):void 0,templateRootBlockId:"root",blockType:i,formatBlockType:qe(t),createTemplate:y,shouldShow:d,isDisabled:u,disabledTooltipMessage:p,badge:m,postCreateCallback:g,collectionViewType:f,isToggleable:v,hasTransformShortcut:H().Ky[i],icon:h}}function qe(e){if((0,r().pL)(e))return e}function Ke(e){const{key:t,displayName:n,fuzzySearchKeywords:o,thumbnail:i,icon:r,tooltipPhoto:a,description:s,shouldShow:l,badge:c,postCreateCallback:d,collectionViewType:u,isToggleable:p,action:m}=e,g=q().A.formatMessage(o),f=g!==o.defaultMessage?`${g} ${o.defaultMessage}`:g;return{key:t,displayName:q().A.formatMessage(n),analyticsName:n.defaultMessage,searchName:f,thumbnail:i,icon:r,tooltipPhoto:a,description:s?q().A.formatMessage(s):void 0,templateRootBlockId:"root",shouldShow:l,badge:c,postCreateCallback:d,collectionViewType:u,isToggleable:p,action:m}}const Ge={[r().bF.asanaImport]:Ke({key:r().bF.asanaImport,displayName:He.asanaImportTitle,fuzzySearchKeywords:He.asanaImportKeywords,thumbnail:i().A.images.import.asanaPng,icon:()=>Y,description:He.asanaImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.confluenceApiImport]:Ke({key:r().bF.confluenceApiImport,displayName:He.confluenceApiImportTitle,fuzzySearchKeywords:He.confluenceApiImportKeywords,thumbnail:i().A.images.import.confluencePng,icon:e=>e?X:J,description:He.confluenceApiImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"confluenceApi",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.googleDocsImport]:Ke({key:r().bF.googleDocsImport,displayName:He.googleDocsImportTitle,fuzzySearchKeywords:He.googleDocsImportKeywords,thumbnail:i().A.images.import.googleDocsPng,icon:e=>e?de:ue,description:He.googleDocsImportDescription,badge:"new",action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.dropboxPaperImport]:Ke({key:r().bF.dropboxPaperImport,displayName:He.dropboxPaperImportTitle,fuzzySearchKeywords:He.dropboxPaperImportKeywords,thumbnail:i().A.images.import.dropboxPaperPng,icon:()=>te,description:He.dropboxPaperImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"dropbox",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.evernoteImport]:Ke({key:r().bF.evernoteImport,displayName:He.evernoteImportTitle,fuzzySearchKeywords:He.evernoteImportKeywords,thumbnail:i().A.images.import.evernotePng,icon:()=>ne,description:He.evernoteImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"evernote",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.mondayImport]:Ke({key:r().bF.mondayImport,displayName:He.mondayImportTitle,fuzzySearchKeywords:He.mondayImportKeywords,thumbnail:i().A.images.import.mondayPng,icon:()=>ye,description:He.mondayImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"monday",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,n(397292).c)()}),[r().bF.quipImport]:Ke({key:r().bF.quipImport,displayName:He.quipImportTitle,fuzzySearchKeywords:He.quipImportKeywords,thumbnail:i().A.images.import.quipPng,icon:e=>e?Se:we,description:He.quipImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"quip",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.trelloImport]:Ke({key:r().bF.trelloImport,displayName:He.trelloImportTitle,fuzzySearchKeywords:He.trelloImportKeywords,thumbnail:i().A.images.import.trelloPng,icon:e=>e?Ce:Te,description:He.trelloImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"trello",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.workflowyImport]:Ke({key:r().bF.workflowyImport,displayName:He.workflowyImportTitle,fuzzySearchKeywords:He.workflowyImportKeywords,thumbnail:i().A.images.import.workflowyPng,icon:e=>e?Le:Oe,description:He.workflowyImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"workflowy",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.wordImport]:Ke({key:r().bF.wordImport,displayName:He.wordImportTitle,fuzzySearchKeywords:He.wordImportKeywords,thumbnail:i().A.images.import.wordPng,icon:()=>Ne,description:He.wordImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"docx",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.csvImport]:Ke({key:r().bF.csvImport,displayName:He.csvImportTitle,fuzzySearchKeywords:He.csvImportKeywords,thumbnail:i().A.images.import.csvPng,icon:()=>m,description:He.csvImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"csv",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.htmlImport]:Ke({key:r().bF.htmlImport,displayName:He.htmlImportTitle,fuzzySearchKeywords:He.htmlImportKeywords,thumbnail:i().A.images.import.htmlPng,icon:()=>C,description:He.htmlImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"html",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.markdownImport]:Ke({key:r().bF.markdownImport,displayName:He.markdownImportTitle,fuzzySearchKeywords:He.markdownImportKeywords,thumbnail:i().A.images.import.textPng,icon:()=>N,description:He.markdownImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"markdown",openedFrom:"slash_command"})},shouldShow:e=>Qe()}),[r().bF.genericImport]:Ke({key:r().bF.genericImport,displayName:He.genericImportTitle,fuzzySearchKeywords:He.genericImportKeywords,thumbnail:i().A.images.import.importPng,description:He.genericImportDescription,action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"genericImporter",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,n(310795).LB)()}),[r().bF.pdfImport]:Ke({key:r().bF.pdfImport,displayName:He.pdfImportTitle,fuzzySearchKeywords:He.pdfImportKeywords,thumbnail:i().A.images.import.pdfSvg,description:He.pdfImportDescription,badge:"beta",action:()=>{Fe().A.setState({...Fe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"pdf",openedFrom:"slash_command"})},shouldShow:e=>Qe()&&(0,n(874096).s)()})},$e={[r().xd.text]:We({key:r().xd.text,blockType:r().xd.text,displayName:W().Q.textTitle,fuzzySearchKeywords:He.textKeywords,thumbnail:i().A.images.blocks.textPng,icon:()=>D,mobileNativeThumbnail:()=>i().A.images.mab.blocks.textSvg,description:He.textDescription,tooltipPhoto:i().A.images.tooltips.blocks.textPng}),[r().xd.encryptedText]:We({key:r().xd.encryptedText,blockType:r().xd.encryptedText,displayName:W().Q.encryptedTextTitle,fuzzySearchKeywords:He.textKeywords,thumbnail:i().A.images.blocks.textPng,icon:()=>n(721265).p,mobileNativeThumbnail:()=>i().A.images.mab.blocks.encryptedTextSvg,description:He.encryptedTextDescription,tooltipPhoto:i().A.images.tooltips.blocks.textPng}),[r().xd.page]:We({key:r().xd.page,blockType:r().xd.page,displayName:W().Q.pageTitle,fuzzySearchKeywords:He.pageKeywords,thumbnail:i().A.images.blocks.pagePng,icon:()=>n(155098).U,mobileNativeThumbnail:()=>i().A.images.mab.blocks.pageSvg,description:He.pageDescription,tooltipPhoto:i().A.images.tooltips.blocks.pagePng}),[r().xd.linkToPage]:We({key:r().xd.linkToPage,blockType:r().xd.linkToPage,displayName:W().Q.linkToPageTitle,fuzzySearchKeywords:He.linkToPageKeywords,thumbnail:i().A.images.blocks.linkPng,icon:()=>n(956152).C,mobileNativeThumbnail:()=>i().A.images.mab.blocks.linkToPageSvg,description:He.linkToPageDescription,tooltipPhoto:i().A.images.tooltips.blocks.linkToPagePng}),[r().xd.transclusionContainer]:We({key:r().xd.transclusionContainer,blockType:r().xd.transclusionContainer,displayName:W().Q.transclusionContainerTitle,fuzzySearchKeywords:He.transclusionContainerKeywords,thumbnail:i().A.images.blocks.transclusionPng,icon:()=>R,mobileNativeThumbnail:()=>i().A.images.mab.advanced.syncedBlockSvg,description:He.transclusionContainerDescription,tooltipPhoto:i().A.images.tooltips.blocks.transclusionPng,shouldShow:e=>!(0,Ve().uAU)(e),createTemplate:e=>je().jY()}),[r().xd.toDo]:We({key:r().xd.toDo,blockType:r().xd.toDo,displayName:W().Q.toDoTitle,fuzzySearchKeywords:He.toDoKeywords,thumbnail:i().A.images.blocks.toDoPng,icon:()=>n(716934).W,mobileNativeThumbnail:()=>i().A.images.mab.blocks.toDoSvg,description:He.toDoDescription,tooltipPhoto:i().A.images.tooltips.blocks.toDoListPng}),[r().xd.header]:We({key:r().xd.header,blockType:r().xd.header,displayName:W().Q.headerTitle,fuzzySearchKeywords:He.headerKeywords,thumbnail:i().A.images.blocks.headerPng,icon:()=>I,mobileNativeThumbnail:()=>i().A.images.mab.blocks.headerH1Svg,description:He.headerDescription,tooltipPhoto:i().A.images.tooltips.blocks.headerPng}),[r().xd.subHeader]:We({key:r().xd.subHeader,blockType:r().xd.subHeader,displayName:W().Q.subHeaderTitle,fuzzySearchKeywords:He.subHeaderKeywords,thumbnail:i().A.images.blocks.subheaderPng,mobileNativeThumbnail:()=>i().A.images.mab.blocks.headerH2Svg,icon:()=>x,description:He.subHeaderDescription,tooltipPhoto:i().A.images.tooltips.blocks.subHeaderPng}),[r().xd.subSubHeader]:We({key:r().xd.subSubHeader,blockType:r().xd.subSubHeader,displayName:W().Q.subSubHeaderTitle,fuzzySearchKeywords:He.subSubHeaderKeywords,thumbnail:i().A.images.blocks.subsubheaderPng,icon:()=>A,mobileNativeThumbnail:()=>i().A.images.mab.blocks.headerH3Svg,description:He.subSubHeaderDescription,tooltipPhoto:i().A.images.tooltips.blocks.subsubheaderPng}),[r().xd.image]:We({key:r().xd.image,blockType:r().xd.image,displayName:W().Q.imageTitle,fuzzySearchKeywords:He.imageKeywords,description:He.imageDescription,tooltipPhoto:i().A.images.tooltips.blocks.imagePng,thumbnail:i().A.images.blocks.imagePng,icon:()=>T,mobileNativeThumbnail:()=>i().A.images.mab.media.imageBlockSvg,isDisabled:()=>!Ue().A.state.online}),[r().xd.bookmark]:We({key:r().xd.bookmark,blockType:r().xd.bookmark,displayName:W().Q.bookmarkTitle,fuzzySearchKeywords:He.bookmarkKeywords,thumbnail:i().A.images.blocks.webBookmarkPng,icon:()=>c,mobileNativeThumbnail:()=>i().A.images.mab.media.bookmarkSvg,description:He.bookmarkDescription,tooltipPhoto:i().A.images.tooltips.blocks.webBookmarkPng}),[r().xd.divider]:We({key:r().xd.divider,blockType:r().xd.divider,displayName:W().Q.dividerTitle,fuzzySearchKeywords:He.dividerKeywords,thumbnail:i().A.images.blocks.dividerPng,icon:()=>f,mobileNativeThumbnail:()=>i().A.images.mab.blocks.dividerSvg,description:He.dividerDescription,tooltipPhoto:i().A.images.tooltips.blocks.dividerPng}),[r().xd.code]:We({key:r().xd.code,blockType:r().xd.code,displayName:W().Q.codeTitle,fuzzySearchKeywords:He.codeKeywords,thumbnail:i().A.images.blocks.codePng,icon:()=>p,mobileNativeThumbnail:()=>i().A.images.mab.media.codeSvg,description:He.codeDescription,tooltipPhoto:i().A.images.tooltips.blocks.codePng}),[r().xd.quote]:We({key:r().xd.quote,blockType:r().xd.quote,displayName:W().Q.quoteTitle,fuzzySearchKeywords:He.quoteKeywords,thumbnail:i().A.images.blocks.quotePng,icon:()=>B,mobileNativeThumbnail:()=>i().A.images.mab.blocks.quoteSvg,description:He.quoteDescription,tooltipPhoto:i().A.images.tooltips.blocks.quotePng}),[r().xd.bulletedList]:We({key:r().xd.bulletedList,blockType:r().xd.bulletedList,displayName:W().Q.bulletedListTitle,fuzzySearchKeywords:He.bulletedListKeywords,thumbnail:i().A.images.blocks.bulletedListPng,icon:()=>d,mobileNativeThumbnail:()=>i().A.images.mab.blocks.bulletedListSvg,description:He.bulletedListDescription,tooltipPhoto:i().A.images.tooltips.blocks.bulletedListPng}),[r().xd.numberedList]:We({key:r().xd.numberedList,blockType:r().xd.numberedList,displayName:W().Q.numberedListTitle,fuzzySearchKeywords:He.numberedListKeywords,thumbnail:i().A.images.blocks.numberedListPng,icon:()=>P,mobileNativeThumbnail:()=>i().A.images.mab.blocks.numberedListSvg,description:He.numberedListDescription,tooltipPhoto:i().A.images.tooltips.blocks.numberedListPng}),[r().xd.toggle]:We({key:r().xd.toggle,blockType:r().xd.toggle,displayName:W().Q.toggleTitle,fuzzySearchKeywords:He.toggleKeywords,thumbnail:i().A.images.blocks.togglePng,icon:()=>F,mobileNativeThumbnail:()=>i().A.images.mab.blocks.toggleListSvg,description:He.toggleDescription,tooltipPhoto:i().A.images.tooltips.blocks.toggleListPng,isToggleable:!0}),[r().xd.file]:We({key:r().xd.file,blockType:r().xd.file,displayName:W().Q.fileTitle,fuzzySearchKeywords:He.fileKeywords,thumbnail:i().A.images.blocks.filePng,icon:()=>b,mobileNativeThumbnail:()=>i().A.images.mab.media.fileSvg,tooltipPhoto:i().A.images.tooltips.blocks.filePng,description:He.fileDescription,isDisabled:()=>!Ue().A.state.online}),[r().xd.video]:We({key:r().xd.video,blockType:r().xd.video,displayName:W().Q.videoTitle,fuzzySearchKeywords:He.videoKeywords,thumbnail:i().A.images.blocks.videoPng,icon:()=>j,mobileNativeThumbnail:()=>i().A.images.mab.media.videoSvg,tooltipPhoto:i().A.images.tooltips.blocks.videoPng,description:He.videoDescription,isDisabled:()=>!Ue().A.state.online}),[r().xd.audio]:We({key:r().xd.audio,blockType:r().xd.audio,displayName:W().Q.audioTitle,fuzzySearchKeywords:He.audioKeywords,thumbnail:i().A.images.blocks.audioPng,icon:()=>l,mobileNativeThumbnail:()=>i().A.images.mab.media.audioSvg,description:He.audioDescription,isDisabled:()=>!Ue().A.state.online}),[r().xd.embed]:We({key:r().xd.embed,blockType:r().xd.embed,displayName:W().Q.embedTitle,fuzzySearchKeywords:He.embedKeywords,thumbnail:i().A.images.blocks.embedPng,icon:()=>h,mobileNativeThumbnail:()=>i().A.images.mab.embeds.embedsSvg,description:He.embedDescription}),[r().xd.drive]:We({key:r().xd.drive,blockType:r().xd.drive,displayName:W().Q.driveTitle,fuzzySearchKeywords:He.driveKeywords,thumbnail:i().A.images.blocks.drivePng,icon:()=>n(284030).u,description:He.driveDescription,shouldShow:e=>(0,Ve().g$R)()}),[r().xd.figma]:We({key:r().xd.figma,blockType:r().xd.figma,displayName:W().Q.figmaTitle,fuzzySearchKeywords:He.figmaKeywords,thumbnail:i().A.images.blocks.figmaPng,icon:()=>re,description:He.figmaDescription}),[r().xd.loom]:We({key:r().xd.loom,blockType:r().xd.loom,displayName:W().Q.loomTitle,fuzzySearchKeywords:He.loomKeywords,thumbnail:i().A.images.blocks.loomPng,thumbnailPadding:2,icon:()=>fe,description:He.loomDescription}),[r().xd.typeform]:We({key:r().xd.typeform,blockType:r().xd.typeform,displayName:W().Q.typeformTitle,fuzzySearchKeywords:He.typeformKeywords,thumbnail:i().A.images.blocks.typeformPng,icon:e=>e?Be:Re,description:He.typeformDescription}),[r().xd.codepen]:We({key:r().xd.codepen,blockType:r().xd.codepen,displayName:W().Q.codepenTitle,fuzzySearchKeywords:He.codepenKeywords,thumbnail:i().A.images.blocks.codepenPng,icon:e=>e?Q:Z,description:He.codepenDescription}),[r().xd.tweet]:We({key:r().xd.tweet,blockType:r().xd.tweet,displayName:W().Q.tweetTitle,thumbnailPadding:8,fuzzySearchKeywords:He.tweetKeywords,thumbnail:i().A.images.blocks.twitterPng,icon:e=>e?Me:Pe,description:He.tweetDescription}),[r().xd.gist]:We({key:r().xd.gist,blockType:r().xd.gist,displayName:W().Q.gistTitle,fuzzySearchKeywords:He.gistKeywords,thumbnail:i().A.images.blocks.githubPng,thumbnailPadding:2,icon:e=>e?le:ce,description:He.gistDescription}),[r().xd.maps]:We({key:r().xd.maps,blockType:r().xd.maps,displayName:W().Q.mapsTitle,fuzzySearchKeywords:He.mapsKeywords,thumbnail:i().A.images.blocks.mapsPng,icon:()=>ve,description:He.mapsDescription}),[r().xd.framer]:We({key:r().xd.framer,blockType:r().xd.framer,displayName:W().Q.framerTitle,fuzzySearchKeywords:He.framerKeywords,thumbnail:i().A.images.blocks.framerPng,icon:e=>e?ae:se,description:He.framerDescription}),[r().xd.invision]:We({key:r().xd.invision,blockType:r().xd.invision,displayName:W().Q.invisionTitle,fuzzySearchKeywords:He.invisionKeywords,thumbnail:i().A.images.blocks.invisionPng,icon:()=>ge,description:He.invisionDescription}),[r().xd.equation]:We({key:r().xd.equation,blockType:r().xd.equation,displayName:W().Q.equationTitle,fuzzySearchKeywords:He.equationKeywords,thumbnail:i().A.images.blocks.texPng,icon:()=>_,mobileNativeThumbnail:()=>i().A.images.mab.advanced.blockEquationSvg,tooltipPhoto:i().A.images.tooltips.blocks.mathPng,description:He.equationDescription}),[r().xd.pdf]:We({key:r().xd.pdf,blockType:r().xd.pdf,displayName:W().Q.pdfTitle,fuzzySearchKeywords:He.pdfKeywords,thumbnail:i().A.images.blocks.pdfPng,thumbnailPadding:6,description:He.pdfDescription}),[r().xd.factory]:We({displayName:W().Q.factoryTitle,fuzzySearchKeywords:He.factoryKeywords,thumbnail:i().A.images.blocks.templateButtonPng,icon:()=>v,key:r().xd.factory,blockType:r().xd.factory,description:He.factoryDescription,tooltipPhoto:i().A.images.tooltips.blocks.templateButtonPng,createTemplate:je().Bw,shouldShow:()=>!1,isDisabled:()=>!Ue().A.state.online}),[r().xd.button]:We({displayName:W().Q.buttonTitle,fuzzySearchKeywords:He.buttonKeywords,thumbnail:i().A.images.blocks.templateButtonPng,icon:()=>n(46220).S,mobileNativeThumbnail:()=>i().A.images.mab.advanced.buttonSvg,key:r().xd.button,blockType:r().xd.button,description:He.buttonDescription,tooltipPhoto:i().A.images.tooltips.blocks.templateButtonPng,createTemplate:je().Tf,isDisabled:()=>!Ue().A.state.online}),[r().xd.breadcrumb]:We({displayName:W().Q.breadcrumbTitle,thumbnail:i().A.images.blocks.breadcrumbPng,icon:()=>y,mobileNativeThumbnail:()=>i().A.images.mab.advanced.breadcrumbSvg,tooltipPhoto:i().A.images.tooltips.blocks.breadcrumbPng,description:He.breadcrumbDescription,fuzzySearchKeywords:He.breadcrumbKeywords,key:r().xd.breadcrumb,blockType:r().xd.breadcrumb}),[r().xd.callout]:We({key:r().xd.callout,blockType:r().xd.callout,displayName:W().Q.calloutTitle,thumbnail:i().A.images.blocks.calloutPng,icon:()=>u,mobileNativeThumbnail:()=>i().A.images.mab.blocks.calloutSvg,description:He.calloutDescription,fuzzySearchKeywords:He.calloutKeywords,tooltipPhoto:i().A.images.tooltips.blocks.calloutPng,createTemplate:je().n2}),[r().xd.tableOfContents]:We({displayName:W().Q.tableOfContentsTitle,fuzzySearchKeywords:He.table_of_contentsKeywords,thumbnail:i().A.images.blocks.tableOfContentsPng,icon:()=>E,mobileNativeThumbnail:()=>i().A.images.mab.advanced.tableOfContentsSvg,tooltipPhoto:i().A.images.tooltips.blocks.tableOfContentsPng,description:He.table_of_contentsDescription,key:r().xd.tableOfContents,blockType:r().xd.tableOfContents}),[r().xd.slide]:We({key:r().xd.slide,blockType:r().xd.slide,displayName:W().Q.slideTitle,thumbnail:i().A.images.blocks.slideblockPng,icon:()=>g,description:He.slideDescription,fuzzySearchKeywords:He.slideKeywords,tooltipPhoto:i().A.images.blocks.slideblockPng,shouldShow:e=>(0,Ve().QTI)(e)}),[r().xd.transcription]:We({key:r().xd.transcription,blockType:r().xd.transcription,displayName:W().Q.transcriptionTitle,thumbnail:i().A.images.blocks.templateButtonPng,mobileNativeThumbnail:()=>i().A.images.mab.blocks.transcriptionSvg,icon:()=>n(284611).b,description:He.transcriptionDescription,fuzzySearchKeywords:He.transcriptionKeywords,badge:"alpha",shouldShow:()=>(0,Ve().xIn)(),createTemplate:()=>je().Hg(),isDisabled:()=>!Ue().A.state.online}),[r().xd.whimsical]:We({key:r().xd.whimsical,blockType:r().xd.whimsical,displayName:W().Q.whimsicalTitle,fuzzySearchKeywords:He.whimsicalKeywords,thumbnail:i().A.images.blocks.whimsicalPng,icon:e=>e?Ee:De,description:He.whimsicalDescription}),[r().xd.mixpanel]:We({key:r().xd.mixpanel,blockType:r().xd.mixpanel,displayName:W().Q.mixpanelTitle,fuzzySearchKeywords:He.mixpanelKeywords,thumbnail:i().A.images.blocks.mixpanelPng,thumbnailPadding:10,icon:e=>e?_e:be,description:He.mixpanelDescription}),[r().xd.miro]:We({key:r().xd.miro,blockType:r().xd.miro,displayName:W().Q.miroTitle,fuzzySearchKeywords:He.miroKeywords,thumbnail:i().A.images.blocks.miroPng,icon:()=>he,description:He.miroDescription}),[r().xd.abstract]:We({key:r().xd.abstract,blockType:r().xd.abstract,displayName:W().Q.abstractTitle,thumbnail:i().A.images.blocks.abstractPng,icon:e=>e?G:$,description:He.abstractDescription,fuzzySearchKeywords:He.abstractKeywords}),[r().xd.sketch]:We({key:r().xd.sketch,blockType:r().xd.sketch,displayName:W().Q.sketchTitle,thumbnail:i().A.images.blocks.sketchPng,icon:e=>e?xe:Ae,description:He.sketchDescription,fuzzySearchKeywords:He.sketchKeywords}),[r().xd.excalidraw]:We({key:r().xd.excalidraw,blockType:r().xd.excalidraw,displayName:W().Q.excalidrawTitle,thumbnail:i().A.images.blocks.excalidrawPng,thumbnailPadding:6,icon:e=>e?oe:ie,description:He.excalidrawDescription,fuzzySearchKeywords:He.excalidrawKeywords}),[r().xd.replit]:We({key:r().xd.replit,blockType:r().xd.replit,displayName:W().Q.replitTitle,thumbnail:i().A.images.blocks.replitPng,thumbnailPadding:2,icon:e=>e?ke:Ie,description:He.replitDescription,fuzzySearchKeywords:He.replitKeywords}),[r().xd.table]:We({key:r().xd.table,blockType:r().xd.table,displayName:W().Q.simpleTableTitle,thumbnail:i().A.images.blocks.simpleTablePng,icon:()=>n(571731).J,mobileNativeThumbnail:()=>i().A.images.mab.blocks.simpleTableSvg,description:He.simpleTableDescription,fuzzySearchKeywords:He.simpleTableKeywords,tooltipPhoto:i().A.images.tooltips.blocks.simpleTablePng,createTemplate:()=>je().L5()}),[r().xd.tab]:We({key:r().xd.tab,blockType:r().xd.tab,displayName:W().Q.tabTitle,thumbnail:i().A.images.blocks.tabsPng,icon:()=>w,mobileNativeThumbnail:()=>i().A.images.mab.advanced.tabsSvg,tooltipPhoto:i().A.images.tooltips.blocks.tabsPng,description:He.tabDescription,fuzzySearchKeywords:He.tabKeywords,createTemplate:()=>je().aI(),shouldShow:e=>(0,Ve().gU$)(e)}),[r().xd.hex]:We({key:r().xd.hex,blockType:r().xd.hex,displayName:W().Q.hexTitle,thumbnail:i().A.images.blocks.hexPng,icon:e=>e?pe:me,description:He.hexDescription,fuzzySearchKeywords:He.hexKeywords}),[r().xd.deepnote]:We({key:r().xd.deepnote,blockType:r().xd.deepnote,displayName:W().Q.deepnoteTitle,thumbnail:i().A.images.blocks.deepnotePng,icon:()=>ee,description:He.deepnoteDescription,fuzzySearchKeywords:He.deepnoteKeywords}),[r().sh.toggleFormatHeaderBlock]:We({key:r().sh.toggleFormatHeaderBlock,blockType:r().xd.header,displayName:He.toggleFormatHeaderTitle,fuzzySearchKeywords:He.toggleFormatHeaderKeywords,thumbnail:i().A.images.blocks.toggleHeading1Png,icon:()=>L,mobileNativeThumbnail:()=>i().A.images.mab.advanced.toggleHeading1Svg,description:He.toggleFormatHeaderDescription,tooltipPhoto:i().A.images.tooltips.blocks.toggleH1Png,createTemplate:()=>je().kE(r().xd.header),isToggleable:!0}),[r().sh.toggleFormatSubHeaderBlock]:We({key:r().sh.toggleFormatSubHeaderBlock,blockType:r().xd.subHeader,displayName:He.toggleFormatSubHeaderTitle,fuzzySearchKeywords:He.toggleFormatSubHeaderKeywords,thumbnail:i().A.images.blocks.toggleHeading2Png,icon:()=>O,mobileNativeThumbnail:()=>i().A.images.mab.advanced.toggleHeading2Svg,description:He.toggleFormatSubHeaderDescription,tooltipPhoto:i().A.images.tooltips.blocks.toggleH2Png,createTemplate:()=>je().kE(r().xd.subHeader),isToggleable:!0}),[r().sh.toggleFormatSubSubHeaderBlock]:We({key:r().sh.toggleFormatSubSubHeaderBlock,blockType:r().xd.subSubHeader,displayName:He.toggleFormatSubSubHeaderTitle,fuzzySearchKeywords:He.toggleFormatSubSubHeaderKeywords,thumbnail:i().A.images.blocks.toggleHeading3Png,icon:()=>U,mobileNativeThumbnail:()=>i().A.images.mab.advanced.toggleHeading3Svg,description:He.toggleFormatSubSubHeaderDescription,tooltipPhoto:i().A.images.tooltips.blocks.toggleH3Png,createTemplate:()=>je().kE(r().xd.subSubHeader),isToggleable:!0}),[r().xd.columnList]:We({key:r().xd.columnList,blockType:r().xd.columnList,displayName:W().Q.columnListTitle,fuzzySearchKeywords:He.columnListKeywords,thumbnail:i().A.images.blocks.columnListPng,description:He.columnListDescription,tooltipPhoto:i().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(2),shouldShow:e=>!e.environment.device.isPhone}),[r().sh.column2Block]:We({key:r().sh.column2Block,blockType:r().xd.columnList,displayName:He.column2Title,fuzzySearchKeywords:He.column2Keywords,thumbnail:i().A.images.blocks.columnListPng,icon:()=>V,mobileNativeThumbnail:()=>i().A.images.mab.advanced.twoColumnSvg,description:He.column2Description,tooltipPhoto:i().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(2),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[r().sh.column3Block]:We({key:r().sh.column3Block,blockType:r().xd.columnList,displayName:He.column3Title,fuzzySearchKeywords:He.column3Keywords,thumbnail:i().A.images.blocks.columnListPng,icon:()=>n(17945).l,mobileNativeThumbnail:()=>i().A.images.mab.advanced.threeColumnSvg,description:He.column3Description,tooltipPhoto:i().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(3),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[r().sh.column4Block]:We({key:r().sh.column4Block,blockType:r().xd.columnList,displayName:He.column4Title,fuzzySearchKeywords:He.column4Keywords,thumbnail:i().A.images.blocks.columnListPng,icon:()=>k,mobileNativeThumbnail:()=>i().A.images.mab.advanced.fourColumnSvg,description:He.column4Description,tooltipPhoto:i().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(4),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[r().sh.column5Block]:We({key:r().sh.column5Block,blockType:r().xd.columnList,displayName:He.column5Title,fuzzySearchKeywords:He.column5Keywords,thumbnail:i().A.images.blocks.columnListPng,icon:()=>S,mobileNativeThumbnail:()=>i().A.images.mab.advanced.fiveColumnSvg,description:He.column5Description,tooltipPhoto:i().A.images.tooltips.blocks.columnListPng,createTemplate:()=>je().vq(5),shouldShow:e=>!e.environment.device.isPhone&&!e.blocks.some(ze().qO)}),[r().sh.mermaidCodeBlock]:We({key:r().sh.mermaidCodeBlock,blockType:r().xd.code,displayName:He.mermaidCodeTitle,fuzzySearchKeywords:He.mermaidCodeKeywords,thumbnail:i().A.images.blocks.codePng,icon:()=>M,mobileNativeThumbnail:()=>i().A.images.mab.advanced.codeMermaidSvg,description:He.mermaidCodeDescription,tooltipPhoto:i().A.images.tooltips.blocks.codePng,createTemplate:()=>je().h0("Mermaid","graph TD\n  Mermaid --\x3e Diagram"),postCreateCallback:e=>{o().default.afterNextFlush((()=>{o().default.afterNextFlush((async()=>{const t=await Promise.resolve().then(n.bind(n,725614)),o=n(695625).T.find((t=>t.props.store.id===e.id)),i=null==o?void 0:o.props.store,r=i&&(0,n(969197).aI)(i);if(r){var a;const e=(0,n(231722).$U)({store:r,selection:{startIndex:0,endIndex:(null===(a=(0,n(792002).s6)(r))||void 0===a?void 0:a.endIndex)??0}});t.setMultiSelection({multiSelection:e})}}))}))}}),[r().sh.aiFreePromptBlock]:We({key:r().sh.aiFreePromptBlock,blockType:r().xd.aiBlock,displayName:He.aiFreePromptBlockTitle,fuzzySearchKeywords:He.aiFreePromptKeywords,thumbnail:i().A.images.blocks.calloutPng,icon:()=>n(366295).L,description:He.aiFreePromptDescription,badge:"ai",createTemplate:()=>je().GK("helpMeWrite"),shouldShow:e=>!e.environment.device.isPhone&&function(e){let{publicEditMode:t}=e;return(0,n(68465).ZE)(t)}(e),isDisabled:()=>!Ue().A.state.online}),[r().xd.drawing]:We({key:r().xd.drawing,blockType:r().xd.drawing,displayName:W().Q.drawingTitle,fuzzySearchKeywords:He.drawingKeywords,thumbnailPadding:8,thumbnail:i().A.images.externalIntegrations.acmeIconPng,icon:()=>n(54241).l,mobileNativeThumbnail:()=>i().A.images.mab.media.drawingSvg,description:He.drawingDescription,shouldShow:e=>(0,n(47373).gU)(),createTemplate:()=>je()._N()})},Ye=($e[r().xd.callout],$e[r().xd.toggle],[r().sh.aiFreePromptBlock]);function Qe(){return"on"===n(508496).default.getEligibleGroup({experimentId:"slash_command_import",defaultGroup:"control"})}},329418:(e,t,n)=>{n.d(t,{g:()=>r});var o=()=>n(763884),i=()=>n(271584);function r(e){const t=o().K.get({userId:e.userId,key:`${e.spaceId}:analytics_session`});if(!(t&&Date.now()-t.lastFocusedTime>i().o))return t}},331435:(e,t,n)=>{n.d(t,{e:()=>a,u:()=>r});n(898992),n(823215);var o=()=>n(757695);const i=new Map;function r(e){const t=i.get(e);if(t)return t;{const t=o().default.createValue(!1,{name:"newStore"});return i.set(e,t),t}}function a(){const e=Array.from(i.entries());return 0===e.length||e.every((e=>!e[1].state))}},331542:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const i={sm:{container:"12px",border:"1.5px"},md:{container:"16px",border:"1.65px"},lg:{container:"22px",border:"2px"},relative:{container:"1em",border:"0.125em"},expand:{container:"100%",border:"12.5%"}};const r=function(e){let{style:t,onDarkBackground:r,size:a,legacySize:s,circleColorStyle:l,shouldAnimate:c=!0}=e;const d=(0,n(959013).tz)(),u=(0,n(401497).IS)((e=>{const{container:o,border:d}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"relative";return"number"==typeof e?{container:`${e}px`,border:.125*e+"px"}:"sm"===e||"md"===e||"lg"===e||"relative"===e?i[e]:{container:e,border:`${.125*parseFloat(e)}${e.replace(/[\d.]/g,"")}`}}(a||s||"relative"),u=r?e.icon.contrast:e.icon.primary,p=(null==l?void 0:l.color)??(r?n(100622).XA.dark.translucentGray[400]:e.icon.quaternary);return{spinnerStyle:{position:"relative",pointerEvents:"none",display:"inline-block",width:`${o}`,height:`${o}`,...t},circleStyle:{position:"absolute",top:0,left:0,width:`${o}`,height:`${o}`,borderRadius:"50%",border:`${d} solid ${p}`},arcStyle:{position:"absolute",top:0,left:0,width:`${o}`,height:`${o}`,borderRadius:"50%",borderTop:`${d} solid ${u}`,borderRight:`${d} solid ${u}`,borderBottom:`${d} solid transparent`,borderLeft:`${d} solid transparent`,mask:"linear-gradient(90deg, transparent 66.66%, black 66.66%)",animation:c?"spin 1.2s linear infinite":void 0}}}),[a,s,r,t,l,c]);return(0,o.jsx)(n(155004).s,{allowSelectionWithin:!1,style:{display:"contents"},children:(0,o.jsxs)("span",{role:"progressbar","aria-live":"polite","aria-busy":"true","aria-label":d.formatMessage({id:"loadingSpinner.label",defaultMessage:"Loading..."}),style:u.spinnerStyle,children:[(0,o.jsx)("span",{style:u.circleStyle}),(0,o.jsx)("span",{style:u.arcStyle})]})})}},332751:(e,t,n)=>{n.d(t,{I:()=>r});var o=()=>n(170722),i=()=>n(369241);function r(){o().A.state.isActive&&(i().A.setState({...i().A.state,open:!1}),o().A.setState({...o().A.state,isActive:!1,isAnimatingClosed:!0}))}},333665:(e,t,n)=>{n.d(t,{ZC:()=>c,aX:()=>a,mX:()=>s,vD:()=>l});n(898992),n(354520);var o=()=>n(634201),i=()=>n(919709),r=()=>n(496603);function a(e,t,n){const a=e.getValue(),s=i().qAZ(t),l=i().qAZ(a);if(0===s.length&&0===l.length)return""===n?{filter:{startIndex:0,endIndex:0}}:void 0;const c=r().o8(s).reverse(),d=r().o8(l).reverse(),u=l.findIndex(((e,t)=>e!==s[t])),p=d.findIndex(((e,t)=>e!==c[t]));if(-1===u||-1===p)return;const m=o().PE(n),g={filter:{startIndex:u+(m.length>0?1:0),endIndex:u+l.length-s.length}};if(m.length>0){const e=g.filter.startIndex-m.length,t=g.filter.startIndex;l.slice(e,t).join("")===n&&(g.prefix={startIndex:e,endIndex:t})}return g}function s(e,t){if(!t)return;const n=e.getValue();return i().qAZ(n).slice(t.filter.startIndex,t.filter.endIndex).join("")}function l(e,t,n){return s(e,a(e,t,n?"@":""))}function c(e,t,n,o,a){if(void 0===e)return!0;if(t&&n&&o>3)return!0;if(1===e.length){const t=r().HV(e);if(t){if(/\s/g.test(t)){const e=a.getValue();if(e&&e.length>=1){const t=i().q4_(e);return!(2===t.length&&t.startsWith("/"))}}}}else if(e.length>=2){return e.endsWith("  ")}return!1}},334003:(e,t,n)=>{n.d(t,{F:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M12.408 4.792a.625.625 0 0 1 .884-.884l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884l3.333-3.333H5.25a.875.875 0 0 0-.875.875v5a.625.625 0 1 1-1.25 0v-5c0-1.173.951-2.125 2.125-2.125h10.491z"})},i=(0,n(340498).wt)("arrowTurnUpRight",o)},334261:(e,t,n)=>{n.d(t,{VN:()=>m,ho:()=>p,LK:()=>v,OD:()=>f,D7:()=>g});n(581454);var o=()=>n(534177),i=()=>n(796249),r=()=>n(609044),a=()=>n(630116),s=()=>n(795179),l=()=>n(989423);var c=()=>n(901265),d=()=>n(896628),u=()=>n(751156);function p(e){const{originRect:t}=e;s().A.reset(),r().A.reset(),c().VN(),i().A.setState({isOpen:!0,rect:t})}function m(){i().A.setState({isOpen:!1})}function g(e){const{format:t,store:n,property:o,visibility:i,transaction:r}=e,a=t.property_visibility;a&&d().zA({stores:[n],update:{property_visibility:Object.values(a||{}).map((e=>({property:e.property,visibility:o===e.property?i:e.visibility})))},transaction:r})}function f(e){const{store:t,pageSection:n,visibility:i,environment:r,format:s}=e,c=s.page_section_visibility;c&&(!function(e,t){l().vd(e,"update_page_section_visibility",t)}(r,{section:n,visibility:i}),u().createAndCommit({userAction:"customizePageActions.updatePageSectionVisibility",environment:r,canUndo:!0,perform:e=>{d().zA({stores:t instanceof a().md||t instanceof a().Bv?[t]:(0,o().HB)(t),update:{page_section_visibility:{...c,[n]:i}},transaction:e})}}))}function v(e){const{store:t,transaction:n,pageSectionFormats:i}=e;d().zA({stores:t instanceof a().md||t instanceof a().Bv?[t]:(0,o().HB)(t),update:{collection_page_sections:i},transaction:n})}},335098:(e,t,n)=>{n.d(t,{q:()=>r,y:()=>i});var o=()=>n(979004);const i={ABAP:o().PrismLanguages.abap,Agda:o().PrismLanguages.agda,Arduino:o().PrismLanguages.arduino,"ASCII Art":"null",Assembly:o().PrismLanguages.nasm,Bash:o().PrismLanguages.bash,BASIC:o().PrismLanguages.basic,BNF:o().PrismLanguages.bnf,C:o().PrismLanguages.c,"C#":o().PrismLanguages.csharp,"C++":o().PrismLanguages.cpp,Clojure:o().PrismLanguages.clojure,CoffeeScript:o().PrismLanguages.coffeescript,Coq:o().PrismLanguages.coq,CSS:o().PrismLanguages.css,Dart:o().PrismLanguages.dart,Dhall:o().PrismLanguages.dhall,Diff:o().PrismLanguages.diff,Docker:o().PrismLanguages.docker,EBNF:o().PrismLanguages.ebnf,Elixir:o().PrismLanguages.elixir,Elm:o().PrismLanguages.elm,Erlang:o().PrismLanguages.erlang,"F#":o().PrismLanguages.fsharp,Flow:o().PrismLanguages.flow,Fortran:o().PrismLanguages.fortran,Gherkin:o().PrismLanguages.gherkin,GLSL:o().PrismLanguages.glsl,Go:o().PrismLanguages.go,GraphQL:o().PrismLanguages.graphql,Groovy:o().PrismLanguages.groovy,Haskell:o().PrismLanguages.haskell,HCL:o().PrismLanguages.hcl,HTML:o().PrismLanguages.html,Idris:o().PrismLanguages.idris,Java:o().PrismLanguages.java,JavaScript:o().PrismLanguages.jsx,JSON:o().PrismLanguages.json,Julia:o().PrismLanguages.julia,Kotlin:o().PrismLanguages.kotlin,LaTeX:o().PrismLanguages.latex,Less:o().PrismLanguages.less,Lisp:o().PrismLanguages.lisp,LiveScript:o().PrismLanguages.livescript,"LLVM IR":o().PrismLanguages.llvm,Lua:o().PrismLanguages.lua,Makefile:o().PrismLanguages.makefile,Markdown:o().PrismLanguages.markdown,Markup:o().PrismLanguages.markup,MATLAB:o().PrismLanguages.matlab,Mathematica:o().PrismLanguages.mathematica,Mermaid:o().PrismLanguages.mermaid,Nix:o().PrismLanguages.nix,"Notion Formula":o().PrismLanguages.notion,"Objective-C":o().PrismLanguages.objectivec,OCaml:o().PrismLanguages.ocaml,Pascal:o().PrismLanguages.pascal,Perl:o().PrismLanguages.perl,PHP:o().PrismLanguages.php,"Plain Text":"null",PowerShell:o().PrismLanguages.powershell,Prolog:o().PrismLanguages.prolog,Protobuf:o().PrismLanguages.protobuf,PureScript:o().PrismLanguages.purescript,Python:o().PrismLanguages.python,R:o().PrismLanguages.r,Racket:o().PrismLanguages.racket,Reason:o().PrismLanguages.reason,Ruby:o().PrismLanguages.ruby,Rust:o().PrismLanguages.rust,Sass:o().PrismLanguages.sass,Scala:o().PrismLanguages.scala,Scheme:o().PrismLanguages.scheme,Scss:o().PrismLanguages.scss,Shell:o().PrismLanguages.bash,Smalltalk:o().PrismLanguages.smalltalk,Solidity:o().PrismLanguages.solidity,SQL:o().PrismLanguages.sql,Swift:o().PrismLanguages.swift,TOML:o().PrismLanguages.toml,TypeScript:o().PrismLanguages.tsx,"VB.Net":o().PrismLanguages.vbnet,Verilog:o().PrismLanguages.verilog,VHDL:o().PrismLanguages.vhdl,"Visual Basic":o().PrismLanguages.visualBasic,WebAssembly:o().PrismLanguages.wasm,XML:o().PrismLanguages.xml,YAML:o().PrismLanguages.yaml,"Java/C/C++/C#":o().PrismLanguages.clike,[n(15440).jA.NotionScript]:o().PrismLanguages.javascript},r={[o().PrismLanguages.abap]:"ABAP",[o().PrismLanguages.agda]:"Agda",[o().PrismLanguages.arduino]:"Arduino",[o().PrismLanguages.bash]:"Shell",[o().PrismLanguages.basic]:"BASIC",[o().PrismLanguages.bnf]:"BNF",[o().PrismLanguages.c]:"C",[o().PrismLanguages.clojure]:"Clojure",[o().PrismLanguages.coffeescript]:"CoffeeScript",[o().PrismLanguages.coq]:"Coq",[o().PrismLanguages.cpp]:"C++",[o().PrismLanguages.csharp]:"C#",[o().PrismLanguages.css]:"CSS",[o().PrismLanguages.dart]:"Dart",[o().PrismLanguages.dhall]:"Dhall",[o().PrismLanguages.diff]:"Diff",[o().PrismLanguages.docker]:"Docker",[o().PrismLanguages.ebnf]:"EBNF",[o().PrismLanguages.elixir]:"Elixir",[o().PrismLanguages.elm]:"Elm",[o().PrismLanguages.erlang]:"Erlang",[o().PrismLanguages.flow]:"Flow",[o().PrismLanguages.fortran]:"Fortran",[o().PrismLanguages.fsharp]:"F#",[o().PrismLanguages.gherkin]:"Gherkin",[o().PrismLanguages.glsl]:"GLSL",[o().PrismLanguages.go]:"Go",[o().PrismLanguages.graphql]:"GraphQL",[o().PrismLanguages.groovy]:"Groovy",[o().PrismLanguages.haskell]:"Haskell",[o().PrismLanguages.hcl]:"HCL",[o().PrismLanguages.html]:"HTML",[o().PrismLanguages.idris]:"Idris",[o().PrismLanguages.java]:"Java",[o().PrismLanguages.javascript]:"JavaScript",[o().PrismLanguages.json]:"JSON",[o().PrismLanguages.jsx]:"JavaScript",[o().PrismLanguages.julia]:"Julia",[o().PrismLanguages.kotlin]:"Kotlin",[o().PrismLanguages.latex]:"LaTeX",[o().PrismLanguages.less]:"Less",[o().PrismLanguages.lisp]:"Lisp",[o().PrismLanguages.livescript]:"LiveScript",[o().PrismLanguages.llvm]:"LLVM IR",[o().PrismLanguages.lua]:"Lua",[o().PrismLanguages.makefile]:"Makefile",[o().PrismLanguages.markdown]:"Markdown",[o().PrismLanguages.markup]:"Markup",[o().PrismLanguages.matlab]:"MATLAB",[o().PrismLanguages.mathematica]:"Mathematica",[o().PrismLanguages.mermaid]:"Mermaid",[o().PrismLanguages.nasm]:"Assembly",[o().PrismLanguages.notion]:"Notion Formula",[o().PrismLanguages.nix]:"Nix",[o().PrismLanguages.objectivec]:"Objective-C",[o().PrismLanguages.ocaml]:"OCaml",[o().PrismLanguages.pascal]:"Pascal",[o().PrismLanguages.perl]:"Perl",[o().PrismLanguages.php]:"PHP",[o().PrismLanguages.powershell]:"PowerShell",[o().PrismLanguages.prolog]:"Prolog",[o().PrismLanguages.protobuf]:"Protobuf",[o().PrismLanguages.purescript]:"PureScript",[o().PrismLanguages.python]:"Python",[o().PrismLanguages.r]:"R",[o().PrismLanguages.racket]:"Racket",[o().PrismLanguages.reason]:"Reason",[o().PrismLanguages.ruby]:"Ruby",[o().PrismLanguages.rust]:"Rust",[o().PrismLanguages.sass]:"Sass",[o().PrismLanguages.scala]:"Scala",[o().PrismLanguages.scheme]:"Scheme",[o().PrismLanguages.scss]:"Scss",[o().PrismLanguages.smalltalk]:"Smalltalk",[o().PrismLanguages.solidity]:"Solidity",[o().PrismLanguages.sql]:"SQL",[o().PrismLanguages.swift]:"Swift",[o().PrismLanguages.toml]:"TOML",[o().PrismLanguages.tsx]:"TypeScript",[o().PrismLanguages.typescript]:"TypeScript",[o().PrismLanguages.vbnet]:"VB.Net",[o().PrismLanguages.verilog]:"Verilog",[o().PrismLanguages.vhdl]:"VHDL",[o().PrismLanguages.visualBasic]:"Visual Basic",[o().PrismLanguages.wasm]:"WebAssembly",[o().PrismLanguages.xml]:"XML",[o().PrismLanguages.yaml]:"YAML",[o().PrismLanguages.clike]:"Java/C/C++/C#"}},335722:(e,t,n)=>{n.d(t,{S:()=>o});const o=new(n(645873).O2)("tinymce-word-paste-filter",(async()=>(await n.e(96316).then(n.bind(n,818640))).default))},337090:(e,t,n)=>{n.d(t,{G:()=>m});var o=()=>n(343666),i=()=>n(722101),r=()=>n(246826),a=()=>n(319975),s=()=>n(594794),l=()=>n(299545),c=()=>n(508496),d=()=>n(855821),u=()=>n(725332),p=()=>n(301523);function m(e){const{discussionStore:t,files:n,text:m,markDiscussionRead:g,environment:f,transaction:v}=e,h=(0,s().Z1)({environment:f,table:o().SN,spaceId:t.pointer.spaceId}),_=r().vt({environment:f,table:o().SN,args:{id:h,parent:t.pointer},inMemoryRecordCache:t.inMemoryRecordCache,transaction:v}),b=l().uB(t);i().BC({parentStore:b,appendStore:_,transaction:v});const y=l().gp(_);return a().R9({environment:f,store:y,value:m,transaction:v}),(0,d().t)({commentStore:_,files:n,environment:f,transaction:v}),(0,p().x)(_,v),g&&c().default.checkGate({gateName:"comment_sidebar_for_you"})&&(0,u().U)({discussionStore:t,transaction:v}),_}},337240:(e,t,n)=>{n.d(t,{D$:()=>S,FI:()=>y,G0:()=>_,IA:()=>g,KP:()=>b,M8:()=>m,PU:()=>s,c3:()=>d,gJ:()=>f,i_:()=>c,jg:()=>v,lg:()=>h,qF:()=>u,qq:()=>p});var o=()=>n(554279),i=()=>n(763824),r=()=>n(680074),a=()=>n(351360);function s(e,t){o().u4({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"registration"}},source:"client"}),(async()=>{const n=await async function(){var e;return await(0,i().nQ)(2500,(null===(e=a().default.state.currentUserSettingsStore)||void 0===e?void 0:e.waitUntil((()=>{var e;return void 0!==(null===(e=a().default.state.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.domain_type)})))||Promise.resolve()),(0,r().FX)()}();!function(e,t){l(e,{event:"sign_up_flow_complete",data:t})}(e,{domainType:n,metaEventId:t})})()}function l(e,t){o().u4({device:e.device,cookieService:e.cookieService,event:{google:{eventName:"custom",data:t}},source:"client"})}function c(e){l(e,{event:"sign_up_flow_start"})}function d(e){l(e,{event:"login_success"})}function u(e,t){const{planType:n,subscriptionTier:o,domainType:i}=t;n&&"team"===n?l(e,{event:"create_space",data:{planType:n}}):o&&l(e,{event:"create_space",data:{subscriptionTier:o,domainType:i}})}function p(e,t){l(e,{event:"professional_workspace_created",data:t})}function m(e,t){l(e,{event:"team_workspace_created",data:t})}function g(e){l(e,{event:"onboarding_complete"})}function f(e,t){l(e,{event:"workspace_first_invite_sent",data:t})}function v(e){l(e,{event:"professional_workspace_first_invite_sent"})}function h(e,t){l(e,{event:"workspace_upgraded",data:t})}function _(e){l(e,{event:"professional_workspace_upgraded"})}function b(e){l(e,{event:"team_workspace_upgraded"})}function y(e){l(e,{event:"ai_addon_purchased"})}function S(e,t){l(e,{event:"trial_apply_attempt",data:t})}},337567:(e,t,n)=>{n.d(t,{A5:()=>f,Fm:()=>u,K1:()=>m,Lz:()=>p,Vk:()=>g,dL:()=>d,pQ:()=>c,x3:()=>l});n(898992),n(354520),n(581454),n(737550);var o=()=>n(861017),i=()=>n(496603),r=()=>n(534177),a=()=>n(295169),s=()=>n(525569);function l(){return i().oE([a().default.getActiveSession(),m()])}function c(e){return l().some((t=>t.groupedPendingOperations.state.some((t=>t.pageId===e))))}function d(e){const t=e.getNavigableBlockStore();return Boolean(t&&c(t.id))}function u(e){const t=e.getNavigableBlockStore();if(!t)return!1;const n=t.id;return l().some((e=>e.groupedPendingOperations.state.some((e=>"updatedPage"===e.type&&e.pageId===n&&e.didCreatePage))))}function p(e){const t=a().default.getActiveSession();if(!t)return[];const n=(0,o().hZ)(e.RouterStore.state.route);return t.groupedPendingOperations.state.filter((0,r().u0)((e=>"updatedPage"===e.type&&e.didCreatePage?{true:e}:{false:e}))).filter((e=>n.includes(e.pageId)))}function m(){const e=s().default.state;if("assistantCompletionPopup"===e.type)return a().default.getSessionContext(e.sessionId)}function g(){const e=a().default.getActiveSession();if(!e)return;return e.groupedPendingOperations.state.filter((e=>"updatedPage"===e.type&&e.didCreatePage)).map((e=>e.pageId))}function f(){return l().some((e=>e.getAllPendingNonCreateExecutableOperations().length>0))}},338907:(e,t,n)=>{n.d(t,{M:()=>o,u:()=>i});function o(){return"M3_3"}function i(e){return!e.device.isPhone}},339034:(e,t,n)=>{n.d(t,{formsEditorDependency:()=>o});const o=new(n(645873).O2)("collectionFormsEditor",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(78846),n.e(86227)]).then(n.bind(n,536308))))},342461:(e,t,n)=>{n.r(t),n.d(t,{showAsyncModal:()=>a,showAsyncModalComponent:()=>s,testOnly:()=>f});n(898992),n(354520),n(672577),n(581454);var o=n(296540),i=()=>n(206267),r=()=>n(584931);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r().w;return new Promise(((n,o)=>{try{l({asyncModal:p({renderModal:e,promiseResolve:n,promiseReject:o,store:t}),store:t})}catch(i){o(i)}}))}function s(e){return a((t=>o.createElement(e,t)),arguments.length>1&&void 0!==arguments[1]?arguments[1]:r().w)}function l(e){const{asyncModal:t,store:n=r().w}=e;n.update((e=>({asyncModals:[...e.asyncModals,t]})))}function c(e){const{id:t,promiseResolve:n,store:o=r().w}=e;return e=>{const i=m({id:t,store:o});null!=i&&i.isOpen&&(g({id:t,store:o,update:{isOpen:!1}}),n(e))}}function d(e){const{id:t,promiseResolve:n,store:o=r().w}=e;return()=>{const e=m({id:t,store:o});null!=e&&e.isOpen&&(g({id:t,store:o,update:{isOpen:!1}}),n())}}function u(e){const{id:t,store:n=r().w}=e;return()=>{n.update((e=>({asyncModals:e.asyncModals.filter((e=>e.id!==t))})))}}function p(e){const{renderModal:t,promiseResolve:n,promiseReject:o,store:a=r().w}=e,s=i().JW(),l=u({id:s,store:a}),p=d({id:s,promiseResolve:n,store:a}),m=c({id:s,promiseResolve:n,store:a});return{id:s,internalRenderModal:e=>{try{return t({isOpen:e,onClosed:l,onDismiss:p,resolve:m})}catch(n){throw o(n),n}},isOpen:!0}}function m(e){const{id:t,store:n=r().w}=e;return n.state.asyncModals.find((e=>e.id===t))}function g(e){const{id:t,update:n,store:o=r().w}=e;o.update((e=>({asyncModals:e.asyncModals.map((e=>e.id!==t?e:{...e,...n}))})))}const f={addAsyncModal:l,createAsyncModal:p,createOnClosed:u,createOnDismiss:d,createResolve:c,getAsyncModal:m,updateAsyncModal:g}},343473:(e,t,n)=>{n.d(t,{zG:()=>Ee,yn:()=>L,Yq:()=>Pe,SU:()=>O,K6:()=>he,FA:()=>_e,ry:()=>ve,i$:()=>be,UJ:()=>de,XE:()=>ue,lD:()=>pe,Dy:()=>Re,zg:()=>De,UL:()=>Ae,x:()=>Me,B1:()=>Le,uQ:()=>Ne,al:()=>Ue,cP:()=>Te,Yl:()=>me});n(16280),n(944114),n(898992),n(354520),n(672577),n(803949),n(581454);var o=()=>n(857639),i=()=>n(206267),r=()=>n(317965),a=()=>n(921997),s=()=>n(449412),l=()=>n(999752),c=(n(737550),()=>n(763824)),d=()=>n(882362);const u=class{constructor(e){this.performRequests=void 0,this.batchSize=void 0,this.maxWorkers=void 0,this.maxDelayMs=void 0,this.timeSource=void 0,this.queue=[],this.workerTasks=new Map,this.nextWorkerId=0,this.currentWorkers=0,this.requestsRunning=0,this.awaitingTimeout=!1,this.dequeue=async()=>{if(this.currentWorkers>=this.maxWorkers||0===this.queue.length)return;const e=this.nextWorkerId;this.nextWorkerId++,this.currentWorkers++;const t=this.queue.splice(0,this.batchSize),o=t.map((e=>e[0]));let i,r;this.workerTasks.set(e,t),this.requestsRunning+=t.length;try{i=await this.performRequests(o)}catch(a){r=(0,n(319625).A)(a)}try{if(r)for(let e=0;e<t.length;e++){t[e][1].reject(r)}else if(i)for(let e=0;e<t.length;e++){const n=t[e],o=i[e];n[1].resolve(o)}}catch(a){}this.currentWorkers--,this.workerTasks.delete(e),this.requestsRunning-=t.length,this.dequeueAfterFilledBatchOrTimeout()};const{performRequests:t,batchSize:o,maxWorkers:i,maxDelayMs:r}=e;this.performRequests=t,this.batchSize=o,this.maxWorkers=i,this.maxDelayMs=r,this.timeSource=d().u}getStats(){return{queue:this.queue.length,running:this.requestsRunning,workers:this.currentWorkers}}updateTimeSource(e){this.timeSource=e}updateBatchSize(e){this.batchSize=e}updateMaxDelayMs(e){this.maxDelayMs=e}updateMaxWorkers(e){this.maxWorkers=e,this.dequeueAfterFilledBatchOrTimeout()}enqueue(e){const t=c().yX();return this.queue.push([e,t]),this.dequeueAfterFilledBatchOrTimeout(),(0,l().c)({promise:t.promise,canCancel:()=>this.queue.some((e=>e[1]===t)),cancel:e=>{const n=this.queue.findIndex((e=>e[1]===t));n>=0&&(this.queue.splice(n,1),t.reject(e))}})}dequeueAfterFilledBatchOrTimeout(){this.queue.length>=this.batchSize?this.dequeue():this.awaitingTimeout||(this.awaitingTimeout=!0,this.timeSource.setTimeout((()=>{this.awaitingTimeout=!1,this.dequeue()}),this.maxDelayMs))}cancel(){const e=this.workerTasks,t=this.queue;this.workerTasks=new Map,this.queue=[];for(const n of e.values())for(const e of n)e[1].reject(new Error("CanceledTask."));for(const n of t)n[1].reject(new Error("CanceledTask."))}};var p=()=>n(496603),m=()=>n(502800),g=()=>n(720665),f=()=>n(671593),v=()=>n(989423),h=()=>n(508496),_=()=>n(695905);var b=()=>n(780054),y=()=>n(406792),S=()=>n(227440);const w=window.location.host.endsWith(b().A.publicDomainName);var k=()=>n(908006);function I(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&v().vd(e,"message_store.client.send_request",t)}))}const x=async()=>Promise.all([n.e(2681),n.e(36733)]).then(n.bind(n,976060)),A=!1,C=90*g().TD,T=.5*g().TD,M=30*g().TD,P=3e3,B=10*g().TD,R={versions:!0,collection:!0,activity:!0,notification:!0,teams_in_space:!0,user_page_visit:!0,backlinks:!0,user_content:!0,page_visit:!0,user_shared_pages_in_space:!0,presence:!0,user_joined_teams_in_space:!0,teams_migration_completed_in_space:!0,diagnosticPing:!0,_other:!0};function E(e){const t=e.indexOf("/");if(-1===t)return"_other";const n=e.substring(0,t);return n in R?n:"_other"}function D(e,t){var n;const o=E(t),i=null===(n=(0,a().Zg)(t))||void 0===n?void 0:n.table,r=e[o];if(r){if(i){const e=r[i];if(!e)return void Ze(`Warning: "${o}.${i}" has no existing counters!`);r[i]=e-1}r._total-=1,e._total-=1}else Ze(`Warning: "${o}" has no existing counters!`)}function N(e){return{_id:e,charactersSent:0,requestsSent:0,requestsTimedOut:0,responsesReceivedWithoutHandlers:0,successfulResponsesReceived:0,unsuccessfulResponsesReceived:0,invalidMessagesReceived:0,notificationsReceived:0,messagesReceived:0}}function L(){return{...ie}}function O(e){const t=ie;if(e._id===t._id)return{charactersSent:t.charactersSent-e.charactersSent,requestsSent:t.requestsSent-e.requestsSent,requestsTimedOut:t.requestsTimedOut-e.requestsTimedOut,responsesReceivedWithoutHandlers:t.responsesReceivedWithoutHandlers-e.responsesReceivedWithoutHandlers,successfulResponsesReceived:t.successfulResponsesReceived-e.successfulResponsesReceived,unsuccessfulResponsesReceived:t.unsuccessfulResponsesReceived-e.unsuccessfulResponsesReceived,invalidMessagesReceived:t.invalidMessagesReceived-e.invalidMessagesReceived,notificationsReceived:t.notificationsReceived-e.notificationsReceived,messagesReceived:t.messagesReceived-e.messagesReceived}}const U=new Map,F=new Map;class V extends Map{isCancelable(e){return Boolean(this.getCancelable(e))}getCancelable(e){const t=this.get(e);if(null!=t&&t.canCancel())return t}}const j=new V,z=new V,H=new Map,W=new Map,q=Date.now();let K={_total:0};const G="messageStoreInternals",$=new(o().BatchedLogger)({from:G,type:"BulkDebug",level:"info",maxLength:250,logToConsole:A});let Y,Q,Z,X,J,ee=0,te=0,ne=0,oe=0,ie=N(0),re=0,ae=d().u,se=!1,le="uninitialized",ce=!0;function de(){return"open"===le}function ue(){return"uninitialized"===le||"opening"===le}const pe=!0;function me(e,t){let n=W.get(e);n||(n={},W.set(e,n)),Object.assign(n,t)}function ge(e){$.log({level:"info",from:G,type:e})}function fe(){Q=we(this),ge(`ping:${Q}`),Y=Date.now(),Ze(`Incoming primus ping received from server via ${Q}.`)}function ve(){return K}function he(){return{...Fe.getStats(),batchSubscribeQueue:je.getStats(),batchUnsubscribeQueue:ze.getStats()}}function _e(e){const{lastOfflineTimestamp:t}=S().A.getState(),n=he(),{batchSubscribeQueue:o,batchUnsubscribeQueue:i}=n;return{currentConnectionCounters:ie,timeSinceLastIncomingPing:Y&&e-Y,lastIncomingPingTransportType:Q,timeSinceLastResponseReceived:Z&&e-Z,timeSinceLastReadyStateChange:X&&e-X,timeSinceLastOffline:t&&e-t,largestMessageSize:re||void 0,messageStoreRequestsQueued:n.queue,messageStoreRequestsRunning:n.running,batchSubscribeQueue:o,batchUnsubscribeQueue:i,messageStoreConnectionState:le,uptime:e-q,subscriptionCounters:K,primusEndEventsReceived:te,primusErrorEventsReceived:ne,connectionResetsDueToFailedRequests:oe}}function be(){const e=[];F.forEach(((t,n,o)=>{const i=(0,a().Zg)(n);i&&t.value&&e.push({id:i.id,table:i.table,version:t.value})}));const t=p().$z(e,(e=>e.table)),n={};return Object.entries(t).map((e=>{let[t,n]=e;const o={};return n.forEach((e=>{o[e.id]=e.version})),{table:t,value:o}})).forEach((e=>{n[e.table]=e.value})),n}function ye(e){switch($.log({level:"info",from:G,type:"readyStateChange",data:{message:e}}),X=Date.now(),e){case"end":le="closed";break;case"open":le="open";break;case"opening":le="opening"}}const Se=p().Bj((e=>async function(e){if(w)return;ee+=1;const{createClient:t}=await x(),a=h().default.getConfigKey("message_store_client_config","min_reconnect_delay_secs"),s=h().default.getConfigKey("message_store_client_config","max_reconnect_delay_secs"),l=t({minReconnectDelayMs:a*g().TD,maxReconnectDelayMs:s*g().TD});return l.on("data",(t=>function(e,t){ie.messagesReceived+=1;const n=(0,f().tf)(r().hX,e);if(n)return ie.invalidMessagesReceived+=1,void o().rateLimitedLog({level:"warning",from:G,type:"ValidationError",data:{miscDataToConvertToString:e},error:(0,m().convertErrorToLog)(n)});const a=e;if("response"===a.type){var s;const{requestId:e,status:t,result:n}=a,o=H.get(e);if(H.delete(e),$.log({level:"info",from:G,type:"responseReceived",data:{requestId:e,response:t,time:o&&Date.now()-o.sendTime,internalProcessingTimeMs:null===(s=a.result)||void 0===s?void 0:s.internalProcessingTimeMs}}),!o)return void(ie.responsesReceivedWithoutHandlers+=1);Z=Date.now(),window.clearTimeout(o.timeout),"ok"===t?(ie.successfulResponsesReceived+=1,o.resolve(n)):(ie.unsuccessfulResponsesReceived+=1,o.reject(new Qe(n)))}else{ie.notificationsReceived+=1;const{ackId:e,key:n,status:r,value:s,version:c,passThroughData:d}=a;e&&async function(e){if(w)return;const{method:t,request:n,environment:o}=e,r=await Ge(o);(function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"send_request_ack_metric_enabled"})&&v().u4({environment:e,event:{eventName:"message_store.client.send_request_ack",eventProperties:t}})}))})(o,{primus_transport_type:r}),Fe.enqueue((()=>(Ye({message:{type:`${b().A.messageStore.api}/${t}`,requestId:i().JW(),...n},environment:o}),Promise.resolve({}))))}({method:"ackNotification",request:{ackId:e},environment:t});const{listeners:u}=U.get(n)||{};if(!u)return;"error"!==r&&F.set(n,{version:c,value:s,passThroughData:d});for(const{listener:t}of u)try{t("error"===r?{key:n,value:void 0,error:s,passThroughData:d,version:-1}:{key:n,value:s,passThroughData:d,version:c})}catch(l){o().log({level:"warning",from:G,type:"ListenerError",error:(0,m().convertErrorToLog)(l)})}}}(t,e))),l.on("open",(()=>{ge("open"),function(e){(function(e){const t=_().A.state.numConnectionAttempts;h().default.checkGate({gateName:"log_messagestore_attempts"})&&(0,v().u4)({environment:e,event:{eventName:"message_store.client.num_connection_attempts",eventProperties:{num_connection_attempts:t}}}),_().A.setState({isConnected:!0,numConnectionAttempts:0})})(e),ie=N(ie._id+1),ce?(ce=!1,ke(e)):(J&&window.clearTimeout(J),J=window.setTimeout((()=>{de()&&ke(e)}),1e3));A&&function(){const e=Date.now(),t=20;function n(){const o=he();function i(e){return 0===e.queue&&0===e.running}if(i(o)&&i(o.batchSubscribeQueue)&&i(o.batchUnsubscribeQueue))return Ze(`Queues emptied after ${Date.now()-e} ms`),void(Ie=void 0);Ie=window.setTimeout(n,t)}Ie&&window.clearTimeout(Ie);Ze("Starting measurement of time until send queues are empty."),n()}()}(e)})),l.on("reconnected",(e=>{Ce(),$.log({level:"info",from:G,type:"reconnected",data:{message:`Reconnected in ${null==e?void 0:e.duration} ms`}})})),l.on("reconnect",(()=>{ge("reconnect")})),l.on("reconnect scheduled",(e=>{_().A.update((e=>({isConnected:!1,numConnectionAttempts:e.numConnectionAttempts+1}))),$.log({level:"info",from:G,type:"reconnect scheduled",data:{message:`Reconnecting in ${null==e?void 0:e.scheduled} ms, attempt ${null==e?void 0:e.attempt} of ${null==e?void 0:e.retries}`}})})),l.on("reconnect timeout",(()=>{ge("reconnect timeout")})),l.on("reconnect failed",(()=>{ge("reconnect failed")})),l.on("timeout",(()=>{ge("timeout")})),l.on("destroy",(()=>{ge("destroy")})),l.on("close",(()=>{ge("close")})),l.on("online",(()=>{ge("online")})),l.on("offline",(()=>{ge("offline")})),l.on("error",(e=>{let t;t="TransportError"===e.type?{level:"info",from:G,type:"primusTransportError",error:(0,m().convertErrorToLog)(e)}:{level:"error",from:G,type:"unknownPrimusError",error:(0,m().convertErrorToLog)(e)};(0,n(745875).rQ)(1)&&o().rateLimitedLog(t),$.log(t),ne+=1})),l.on("incoming::ping",fe),l.on("readyStateChange",ye),l.on("end",(()=>{ge("end"),te+=1,h().default.checkGate({gateName:"messagestore_client_simplify_reconnect_on_offline"})?l.online&&$e(l,e):$e(l,e)})),window.__primusClient=l,l}(e)),(function(){return"primus"}));function we(e){var t;const n=null==e||null===(t=e.socket)||void 0===t||null===(t=t.transport)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.transport;if("websocket"===n||"polling"===n)return n}function ke(e){J&&(window.clearTimeout(J),J=void 0),U.forEach(((t,n)=>{let{authorizationToken:i}=t;const r=F.get(n);Be(n,r?r.version:-1,i,e).catch((e=>{o().log({level:"warning",from:G,type:"ReconnectSubscriptionError",error:(0,m().convertErrorToLog)(e)})}))}))}let Ie,xe;function Ae(e){if(xe)throw new Error("Having more than one onRestartMessageStoreConnectionHandler is not currently supported");xe=e}function Ce(){var e;se=!1,je.cancel(),ze.cancel(),function(){for(const e of H.values())window.clearTimeout(e.timeout);H.clear()}(),j.clear(),z.clear(),He.cancel(),Fe.cancel(),W.clear(),K={_total:0},null===(e=xe)||void 0===e||e()}async function Te(e){var t;const{key:n,field:o,updates:i,ttl:r,environment:a,onDisconnectFields:s}=e,l=await Ge(a);await(null===(t=Ke({method:"updateField",request:{key:n,field:o,updates:i,ttl:r,onDisconnectFields:s},environment:a,primusTransportType:l}))||void 0===t?void 0:t.response)}async function Me(e){var t;const{key:n,field:o,value:i,ttl:r,environment:a}=e,s=await Ge(a);await(null===(t=Ke({method:"setField",request:{key:n,field:o,value:i,ttl:r},environment:a,primusTransportType:s}))||void 0===t?void 0:t.response)}async function Pe(e){if(w)return{type:"messageStoreDisabled"};const t=i().JW(),{environment:n}=e,o=(0,a().VF)(t),r="diagnosticPing",l=c().yX(),d=e.logToConsole??A,u={};function p(e,t){u[e]=t,d&&console.log(`diagnosticPing ${e}=${t}`)}const m=await c().Vq(async function(){var e;const i=await Ge(n),a=performance.now();await Le(o,void 0,(e=>{let{key:t,value:n}=e;n&&l.resolve(performance.now())}),r,n);const s=performance.now(),c=s-a;p("registerSubscriptionResponseMs",c);const d=await(null===(e=Ke({method:"diagnosticPing",request:{id:t},environment:n,primusTransportType:i,onRequestSent:()=>{p("diagnosticPingEnqueuedMs",performance.now()-s)}}))||void 0===e?void 0:e.response);if(!d)return{type:"canceled",key:o,...u};const m=function(e){const t=u[e];if(void 0===t)throw new Error(`Assertion failure, expected timing for "${e}" to be defined`);return t}("diagnosticPingEnqueuedMs"),g=d.setValueTime;p("diagnosticPingServerSideSetValueMs",g);const f=performance.now()-s;p("diagnosticPingResponseMs",f);const v=await l.promise-s;p("diagnosticPingNotificationMs",v);const h=performance.now();await Ue(o,r,n);const _=performance.now();return{type:"success",key:o,registerSubscriptionResponseMs:c,diagnosticPingEnqueuedMs:m,diagnosticPingServerSideSetValueMs:g,diagnosticPingResponseMs:f,diagnosticPingNotificationMs:v,unregisterSubscriptionResponseMs:_-h,totalMs:_-a}}().catch((e=>(s().O8(e,{from:G,type:"diagnosticPingError",data:{key:o}}),{type:"error",key:o,...u}))),M);return m.timeout?{type:"timeout",key:o,...u}:m.result}async function Be(e,t,n,o){pe&&me(e,{latestRegisterSubscriptionRequestTimestamp:Date.now()}),function(e,t){var n;const o=E(t),i=null===(n=(0,a().Zg)(t))||void 0===n?void 0:n.table;let r=e[o];if(r||(r={_total:0},e[o]=r),i){const e=r[i]||0;r[i]=e+1}r._total+=1,e._total+=1}(K,e);const i=z.getCancelable(e);if(i)i.cancel(new Error("Cancelled by sendRegisterSubscription()"));else{const i={key:e,version:t,authorizationToken:h().default.checkGate({gateName:"presence_messagestore_permissions_use"})?n:void 0},r=je.enqueueCancelable({request:i,environment:o});if(r){j.set(e,r.asyncQueuePromise);try{await r.response}finally{j.delete(e)}}}pe&&me(e,{latestRegisterSubscriptionResponseTimestamp:Date.now()})}function Re(e){return j.isCancelable(e)}function Ee(e,t){const n=j.getCancelable(e);if(!n)throw new Error(`Assertion failure, subscription request for key ${e} does not exist or is not cancelable`);Oe(e,t)&&(D(K,e),n.cancel(new Error("Cancelled by cancelRegisterSubscription()")),pe&&W.delete(e))}async function De(e,t,n){var o;const i=await Ge(n);await(null===(o=Ke({method:"registerOnDisconnect",request:{disconnectId:e,operations:t},environment:n,primusTransportType:i}))||void 0===o?void 0:o.response)}async function Ne(e,t){var n;const o=await Ge(t);await(null===(n=Ke({method:"unregisterOnDisconnect",request:{disconnectId:e},environment:t,primusTransportType:o}))||void 0===n?void 0:n.response)}async function Le(e,t,n,o,i){if(w)return;let{listeners:r}=U.get(e)||{};if(!r||0===r.length)return r=[{listener:n,listenerId:o}],U.set(e,{authorizationToken:t,listeners:r}),void(de()?await Be(e,-1,t,i):"uninitialized"===le&&await Se(i));if(r.find((e=>e.listenerId===o)))r=[...r.filter((e=>e.listenerId!==o)),{listener:n,listenerId:o}],U.set(e,{authorizationToken:t,listeners:r});else{r=[...r,{listener:n,listenerId:o}],U.set(e,{authorizationToken:t,listeners:r});const i=F.get(e);i&&n({key:e,value:i.value,passThroughData:i.passThroughData})}}function Oe(e,t){if(w)return!1;const{authorizationToken:n,listeners:o}=U.get(e)||{};if(!o)return!1;const i=o.filter((e=>e.listenerId!==t));return i.length!==o.length&&(0===i.length?(U.delete(e),F.delete(e),!0):(U.set(e,{authorizationToken:n,listeners:i}),!1))}async function Ue(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Oe(e,t)&&de()&&await async function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];pe&&me(e,{latestUnregisterSubscriptionRequestTimestamp:Date.now()}),D(K,e);const o=j.getCancelable(e);if(o)o.cancel(new Error("Cancelled by sendUnregisterSubscription()"));else{const o={key:e},i=ze.enqueueCancelable({request:o,environment:t});if(i){n&&z.set(e,i.asyncQueuePromise);try{await i.response}finally{z.delete(e)}}}pe&&W.delete(e)}(e,n,o)}const Fe=new(l().O)(20);class Ve{constructor(e,t){this.queue=void 0,this.wrappedPerformRequests=async e=>{const t=e[0].environment;Ze(`Sending a batch of ${e.length} ${this.methodName} requests.`);const n=this.performRequests(t,e.map((e=>e.request)));if(!n)throw new Error("MessageStore is disabled.");const o=await n;if(!o)throw new Error("Request cancelled.");return o},this.methodName=e,this.performRequests=t,this.queue=new u({performRequests:this.wrappedPerformRequests,batchSize:250,maxDelayMs:T,maxWorkers:1})}updateTimeSource(e){this.queue.updateTimeSource(e)}getStats(){return this.queue.getStats()}cancel(){this.queue.cancel()}enqueueCancelable(e){if(w)return;const t=this.queue.enqueue(e),n=t.catch((e=>{Ze(`enqueueCancelable() for ${this.methodName} cancelled (${e.message})`)}));return{asyncQueuePromise:t,response:n}}}const je=new Ve("registerSubscription",((e,t)=>He.enqueue((async()=>{var n;const o=await Ge(e),i=Ke({method:"registerBatchSubscriptions",request:{subscriptions:t},environment:e,primusTransportType:o});return null===(n=await(null==i?void 0:i.response))||void 0===n?void 0:n.responses})))),ze=new Ve("unregisterSubscription",((e,t)=>He.enqueue((async()=>{var n;const o=await Ge(e),i=Ke({method:"unregisterBatchSubscriptions",request:{keys:t.map((e=>e.key))},environment:e,primusTransportType:o});return null===(n=await(null==i?void 0:i.response))||void 0===n?void 0:n.keys.map((e=>({key:e})))})))),He=new(l().O)(1);let We;function qe(){if(!We)return;const{totalRequests:e,requestCounts:t,startTime:n}=We;Ze("checkRequestThroughputForBurstWarning requestCounts =",t),e>P&&o().log({level:"warning",from:G,type:"BurstThroughputExceeded",data:{time:Date.now()-n,totalRequests:e,requestCounts:t}}),We=void 0}function Ke(e){if(w)return;const{method:t,request:n,environment:o,primusTransportType:r}=e,a=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.in_queue_time");I(o,{status:"enqueued",primus_transport_type:r,endpoint:t}),pe&&function(e){We||(We={startTime:Date.now(),totalRequests:0,requestCounts:{}},ae.setTimeout(qe,B)),We.totalRequests+=1,We.requestCounts[e]=(We.requestCounts[e]||0)+1}(t);const s=Fe.enqueue((()=>{var s;const l=i().JW();!function(e,t){k().default.afterNextFlush((()=>{h().default.checkGate({gateName:"message_store_client_send_request_metric_enabled"})&&(v().vd(e,"message_store.client.send_request.queue_running_size",{value:t.running}),v().vd(e,"message_store.client.send_request.queue_backup_size",{value:t.queue}))}))}(o,Fe.getStats());const d=y().default.DO_NOT_USE_markLegacy("message_store.client.send_request.round_trip_time");y().default.DO_NOT_USE_measureLegacy(a,{environment:o,data:{endpoint:t}});const u=c().yX(),p=Date.now(),m=pe?window.setTimeout((()=>{"open"===le&&(ie.requestsTimedOut+=1,$.log({level:"info",from:G,type:"requestTimeout",data:{requestId:l,time:Date.now()-p}}))}),C):void 0;H.set(l,{resolve:u.resolve,reject:u.reject,timeout:m,sendTime:p}),$.log({level:"info",from:G,type:"requestSent",data:{requestId:l,method:t}});const g={type:`${b().A.messageStore.api}/${t}`,requestId:l,...n};return ie.requestsSent+=1,Ye({message:g,environment:o}),null===(s=e.onRequestSent)||void 0===s||s.call(e),u.promise.then((e=>{y().default.DO_NOT_USE_measureLegacy(d,{environment:o,data:{endpoint:t}}),I(o,{status:"success",primus_transport_type:r,endpoint:t})})).catch((e=>{const n=Fe.getStats();I(o,{status:"failure",primus_transport_type:r,endpoint:t,queue_running_size:n.running,queue_backup_size:n.queue})})),u.promise}));return{response:s.catch((e=>{e instanceof Qe&&!se?(se=!0,oe+=1,ge("connectionResetDueToFailedRequest"),Se(o).then((e=>{null==e||e.end()})),Ze(`sendRequest() for ${t} returned server error (${e.message}), resetting connection`,n)):Ze(`sendRequest() cancelled or errored for ${t} (${e.message})`,n)})),asyncQueuePromise:s}}async function Ge(e){const t=await Se(e);if(t){const e=we(t);if(e)return e}return"unknown"}async function $e(e,t){var n,i;e.off("readyStateChange",ye),o().log({level:"info",from:G,type:"messageStoreEnd",error:{message:`SocketId: ${null===(n=e.socket)||void 0===n?void 0:n.id} Query:${null===(i=e.transport)||void 0===i?void 0:i.query}`}}),J&&(window.clearTimeout(J),J=void 0),Ce(),ae.setTimeout((()=>{e.destroy()}),0);const r=await Se(t);e===r&&(Se.cache.clear(),ae.setTimeout((()=>{Se(t)}),2*g().TD))}async function Ye(e){const{message:t,environment:n}=e,o=JSON.stringify(t);ie.charactersSent+=o.length,re<o.length&&(re=o.length);const i=await Se(n);null==i||i.write(t)}class Qe extends Error{constructor(e){super(e),this.name="FailedMessageStoreRequestError"}}function Ze(){if(A){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.info("messageStoreInternals:",...t)}}},344051:(e,t,n)=>{n.d(t,{B:()=>Ca});var o=()=>n(604917),i=()=>n(645873);const r={TranscriptionBlock:new(i().O2)("TranscriptionBlock",(async()=>({TranscriptionBlock:(await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(45620),n.e(2681),n.e(48438),n.e(22464)]).then(n.bind(n,458156))).TranscriptionBlock})))},a=(0,i().jQ)(r.TranscriptionBlock,(e=>e.TranscriptionBlock));var s=()=>n(849839),l=n(296540),c=()=>n(847249),d=()=>n(340498),u=n(474848);const p=(0,d().wt)("abstract",{viewBox:"0 0 32 32",svg:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 16C0 3.199 3.199 0 16 0s16 3.199 16 16-3.199 16-16 16S0 28.801 0 16zm9.976 7.71a6.128 6.128 0 003.398 1.043 6.14 6.14 0 006.146-6.127 6.126 6.126 0 10-9.544 5.085zm11.521.79h3.004v-17H7.499v2.997h13.998V24.5zm-5-5.874a3.123 3.123 0 11-6.246 0 3.123 3.123 0 016.246 0z"})});var m=()=>n(959013),g=()=>n(821062),f=()=>n(891078),v=()=>n(891279),h=()=>n(24611);const _=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Abstract",id:"abstractBlock.embeds.button.label"}});function b(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"abstract",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:p,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Abstract links with public access enabled",id:"abstractBlock.embeds.caption"}),embedButtonText:n.formatMessage(_.embedButtonText),urlInputPlaceholder:"https://abstract.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Abstract",id:"abstractBlock.placeholder"})}))}const y=l.memo(l.forwardRef(b),g().A);var S=()=>n(662303),w=()=>n(484714),k=()=>n(401497),I=()=>n(668725),x=()=>n(654601),A=()=>n(100622),C=()=>n(284371),T=()=>n(937075),M=()=>n(38337),P=()=>n(864145),B=()=>n(972435),R=()=>n(907514),E=()=>n(463830),D=()=>n(525569),N=()=>n(861841),L=()=>n(353643),O=()=>n(732770),U=()=>n(93658),F=()=>n(170722),V=()=>n(155004),j=()=>n(145214),z=()=>n(704152),H=()=>n(364280),W=()=>n(864943),q=()=>n(493733),K=()=>n(936916);const G={AiBlockV2:new(i().O2)("AiBlockV2",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(64598),n.e(38119),n.e(77282)]).then(n.bind(n,423098))))},$=(0,i()._h)(G.AiBlockV2,(e=>e.AiBlockV2)),Y=l.forwardRef((function(e,t){const{store:o,disabled:i,disableHoverMenu:r,ai:{completionActions:a,completionInitialPromptActions:s},assistant:{AssistantFeatureGateStore:d}}=e,p=(0,w().v3)(),[m,g]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[h,_]=(0,l.useState)(!1),b=(0,c().uB)(void 0,E().A),y=(0,l.useRef)(null),S=(0,n(402838).s)(y),k=!S||S.width<400,I=(0,c().K8)((()=>!o.hasContent()),[o]),x=(0,c().K8)((()=>I?P().l.Hovered:(0,P().B)(o,m)),[I,m,o]),A=(0,c().K8)((()=>x!==P().l.Default||f||h||b.state.open),[h,f,x,b]),C=(0,l.useCallback)((e=>{const{prompt:t,clientPrompt:n}=e;s.showInitialPromptForAIBlock({environment:p,store:o,originRef:y,prompt:t,clientPrompt:n})}),[s,p,o]),T=(0,c().K8)((()=>d.isAiBlockConfigurationMenuEnabledForUser()),[d]);return(0,u.jsx)(Z,{store:o,setIsHovering:g,showingOverlay:A,forwardedRef:t,containerRef:y,isV2Enabled:T,children:T?(0,u.jsx)($,{store:o,hoveredOrSelectionState:x,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:C,showingOverlay:A,isCompact:k,disabled:i,configurationPopupStore:b,disableHoverMenu:r}):(0,u.jsx)(Q,{store:o,hoveredOrSelectionState:x,setHaloShouldBeVisible:v,triggerCompletionForAiBlock:a.triggerCompletionForAiBlock,showInitialPromptForAiBlock:C,showingOverlay:A,isCompact:k,disabled:i,setActionBarShouldBeVisible:_,disableHoverMenu:r})})}));function Q(e){const t=(0,w().Y0)(),{store:o,hoveredOrSelectionState:i,setHaloShouldBeVisible:r,showInitialPromptForAiBlock:a,showingOverlay:s,isCompact:d,disabled:p,triggerCompletionForAiBlock:g,setActionBarShouldBeVisible:v,disableHoverMenu:h}=e,_=(0,w().v3)(),{titleStore:b}=(0,c().K8)((()=>{const e=o.getBlockTitleStore();return{titleStore:e,titleValue:e.getValue()}}),[o]),{prompt:y,additionalContext:S}=(0,K().SJ)({store:o}),I=(0,l.useCallback)((()=>"helpMeWrite"===y.key?S||B().A.formatMessage(K().yc.helpMeWrite):B().A.formatMessage(K().yc[y.key])),[S,y.key]),[A,C]=(0,l.useState)(!1),M=(0,l.useCallback)((()=>{a({prompt:S,clientPrompt:y})}),[a,S,y]),R=(0,l.useCallback)((()=>{T().DZ(_,{type:"generate",prompt_key:y.key}),C(!0),g({environment:_,store:o,prompt:y,additionalContext:S?{prompt:S}:void 0}).then((()=>{C(!1)}))}),[_,y,g,o,S]),E=(0,K().FF)({store:o,isGenerating:A}),N=(0,k().IS)((e=>({icon:{fill:e.accentColors.purple[300],width:21,height:21,position:"relative",top:5},generateButtonStyles:{fontWeight:500,color:e.accentColors.purple[500],opacity:E?.5:1,cursor:E?"not-allowed":"pointer"}})),[E]),L=(0,c().K8)((()=>!o.hasContent()),[o]),O=(0,f().bx)(o,p),U=(0,c().K8)((()=>"completionPopup"===D().default.state.type&&"results"===D().default.state.stage&&D().default.state.loading),[]),F=(0,c().K8)((()=>o.getContentStore()),[o]);var j;return L?(0,u.jsxs)(V().s,{allowSelectionWithin:!0,children:[(0,u.jsxs)(H().fI,{justifyContent:"space-between",padding:8,gap:8,wrap:d?"wrap":"initial",children:[(0,u.jsxs)(H().fI,{gap:12,alignItems:"baseline",grow:1,children:[(null===(j=y.svg)||void 0===j?void 0:j.call(y,N.icon))??(0,x().X)(N.icon),"helpMeWrite"===y.key?(0,u.jsx)(n(524702).A,{onFocus:M,disabled:!O,store:b,placeholder:B().A.formatMessage(K().yc.helpMeWrite),pasteBehavior:"block",style:{flexGrow:1,flexBasis:0},onEnter:R,inPageFind:n(792540).Os.block_match}):I()]}),(0,u.jsx)(W().A,{size:"lg",disabled:E,onClick:R,style:N.generateButtonStyles,children:A?(0,u.jsx)(m().sA,{id:"aiBlock.generate.loading.label",defaultMessage:"Generating…"}):(0,u.jsx)(m().sA,{id:"aiBlock.generate.label",defaultMessage:"Generate"})})]}),(0,u.jsx)(K().gM,{hoveredOrSelectionState:i,setHaloShouldBeVisible:r})]}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(q().A,{disabled:p,store:F,disableHoverMenu:h||i!==P().l.SelectedDescendant,disableDrag:t.isMobile}),s&&(0,u.jsx)(K().gM,{hoveredOrSelectionState:i,setHaloShouldBeVisible:r}),!U&&s&&(0,u.jsx)(X,{hoveredOrSelectionState:i,store:o,handleGenerateClick:R,isGenerating:A,setActionBarShouldBeVisible:v,showInitialPromptForAiBlock:a})]})}function Z(e){const{children:t,forwardedRef:n,store:o,showingOverlay:i,setIsHovering:r,containerRef:a,isV2Enabled:s}=e,d=(0,l.useCallback)((()=>{L().A.state.isDragging||U().default.state.isActive||r(!0)}),[r]),p=(0,l.useCallback)((()=>{L().A.state.isDragging||U().default.state.isActive||r(!1)}),[r]),m=(0,c().K8)((()=>s&&!o.hasContent()),[s,o]),g=(0,u.jsx)("div",{className:M()._sW,style:{display:"flex"},ref:a,children:(0,u.jsx)("div",{style:{position:i?"relative":void 0,paddingTop:3,paddingBottom:3,width:"100%",...!m&&{marginTop:4,marginBottom:4}},onMouseLeave:p,onMouseEnter:d,children:t})});return(0,f().NW)(o,n,(0,l.useMemo)((()=>({renderedType:"ai_block",getBlockStore:()=>o,getNode:()=>null==a?void 0:a.current})),[a,o]),g)}function X(e){const{hoveredOrSelectionState:t,store:n,showInitialPromptForAiBlock:o,isGenerating:i,handleGenerateClick:r,setActionBarShouldBeVisible:a}=e,s=(0,c().K8)((()=>!(t!==P().l.Selected&&t!==P().l.SelectedDescendant||F().A.state.isActive||N().Ay.state.isDragging||U().default.state.isActive||O().A.state.isKeyboardMode)),[t]),{prompt:d,additionalContext:p}=(0,K().SJ)({store:n}),g=(0,w().v3)(),f=(0,l.useCallback)((()=>{T().DZ(g,{type:"edit_prompt"}),o({prompt:p,clientPrompt:d})}),[o,g,d,p]),v=(0,c().K8)((()=>n.getFormat().ai_last_edited),[n]),h=(0,K().FF)({store:n,isGenerating:i}),_=(0,k().IS)((e=>({actionBar:{position:"absolute",zIndex:85,top:-40,right:-2,borderRadius:6,height:32,fontSize:14,lineHeight:1.2,display:"flex",whiteSpace:"nowrap",fontFamily:C().vc(S().locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD},actionButton:{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${A().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`,marginRight:1},actionBarSparklesIcon:{width:16,height:16,fill:e.accentColors.purple[400]},generatedByAiHeader:{color:e.accentColors.purple[500],fontWeight:500},lastEditedTime:{color:e.accentColors.purple[300]},chevronDownIcon:{width:10,marginLeft:4,fill:e.lightIconColor}})),[]);return(0,u.jsx)(j().A,{visible:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onAnimationStart:()=>{a(!0)},onAnimationEnd:()=>{s||a(!1)},style:_.actionBar,children:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(z().A,{style:{..._.actionButton,display:"flex",gap:4},onClick:f,disabled:h,children:[(0,x().X)(_.actionBarSparklesIcon),(0,u.jsx)("span",{style:_.generatedByAiHeader,children:(0,u.jsx)(m().sA,{id:"aiBlock.generated",defaultMessage:"Generated by AI"})}),v?(0,u.jsx)("span",{style:_.lastEditedTime,children:(0,R().nl)(v,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0})}):null,h?null:(0,I().b)(_.chevronDownIcon)]}),(0,u.jsx)(z().A,{onClick:r,disabled:h,style:{..._.actionButton,opacity:h?.5:1,cursor:h?"not-allowed":"pointer"},children:i?(0,u.jsx)(m().sA,{id:"aiBlockBlock.update.loading",defaultMessage:"Updating…"}):(0,u.jsx)(m().sA,{id:"aiBlockBlock.update",defaultMessage:"Update"})})]})})}const J=l.memo(l.forwardRef((function(e,t){const{value:o}=(0,i().fJ)(n(662453).aiDependency),{value:r}=(0,i().fJ)(n(650829).assistantDependency);return(0,u.jsx)(n(11048).A,{name:"LazyAiBlock",children:o&&r&&(0,u.jsx)(Y,{...e,ai:o,assistant:r,ref:t})})})),g().A);var ee=()=>n(441265);const te=(0,m().YK)({embedButtonText:{defaultMessage:"Embed audio",id:"audioBlock.embedAudio.button.label"}});function ne(e,t){const o=(0,m().tz)(),i=(0,l.useRef)(null),r=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"audio",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:n(607624).i,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with .MP3s, .WAVs, and .OGGs",id:"audioBlock.embed.caption"}),embedButtonText:o.formatMessage(te.embedButtonText),urlInputPlaceholder:"https://…",children:(0,u.jsx)(m().sA,{defaultMessage:"Add an audio file",id:"audioBlock.placeholder"})}))}const oe=l.memo(l.forwardRef(ne),g().A);var ie=()=>n(919709),re=()=>n(939768),ae=()=>n(720665),se=()=>n(559926),le=()=>n(383594),ce=()=>n(778417),de=()=>n(725614),ue=()=>n(47373),pe=()=>n(115512),me=()=>n(496889),ge=()=>n(460282),fe=()=>n(739283),ve=()=>n(854672),he=()=>n(807683),_e=()=>n(296798),be=()=>n(331542),ye=()=>n(554509),Se=()=>n(360083),we=()=>n(125565),ke=()=>n(468993),Ie=()=>n(21140);const xe={width:16,height:16,minWidth:16,marginRight:6},Ae={flexGrow:4,flexShrink:1,flexBasis:180,padding:14,paddingTop:12,overflow:"hidden",textAlign:"left"},Ce=2*ae().Xb,Te=(0,m().YK)({linkPlaceholder:{defaultMessage:"Paste in https://…",id:"bookmarkBlock.editBookmark.linkPlaceholder"},bookmarkTitle:{defaultMessage:"Bookmark",id:"bookmarkBlock.bookmark.title"},errorMessage:{defaultMessage:"Please enter a valid link",id:"bookmarkBlock.invalidLinkError.message"}});function Me(e,t){const{store:o}=e,i=(0,l.useRef)(null),r=(0,w().v3)(),a=(0,w().Y0)(),s=(0,f().bx)(e.store,e.disabled),d=(0,c().K8)((()=>o.getProperties()),[o]),[p,g]=(0,l.useState)(!1),v=a.isMobile||p,h=(0,c().K8)((()=>(0,ue().CH)()),[]),_=(0,l.useCallback)((()=>{const e=o.getPropertyStore("caption");ce().hc({environment:r,store:o}),de().setSelectionAtEnd({store:e})}),[r,o]),b=(0,l.useCallback)((e=>(se().oF(r,{pastedText:e,source:"bookmark_block_menu"}),n(443120).Ht({environment:r,store:o,url:e}))),[r,o]),y=(0,l.useCallback)((()=>{const e=ie().q4_((null==d?void 0:d.link)??[]);e&&n(755636).f({environment:r,url:e})}),[r,d]),S=(0,l.useCallback)((e=>b(e)),[b]),k=(0,l.useCallback)((()=>{const e=i.current;if(s){if(!(e&&e instanceof Element))return;const t=e.getBoundingClientRect();le().W(r,{originRect:t,originGap:0,isSmallWidth:!0,showArrow:!0,title:B().A.formatMessage(Te.bookmarkTitle),currentTab:"embed",tabs:[{type:"embed",caption:(0,u.jsx)(m().sA,{defaultMessage:"Create a visual bookmark from a link.",id:"bookmarkBlock.visualBookmark.prompt"}),buttonText:(0,u.jsx)(m().sA,{defaultMessage:"Create bookmark",id:"bookmarkBlock.visualBookmark.create"}),inputPlaceholder:B().A.formatMessage(Te.linkPlaceholder),onChange:e=>{const t=n(332737).l(e.originUrl);n(997769).t(t,"url")?(le().I(),S(t)):n(901389).f1(B().A.formatMessage(Te.errorMessage))}}]})}}),[s,r,S]),I=null!=d&&d.link?h?(0,u.jsx)(De,{ref:i,store:o,canEdit:s,showActionButton:v,setHover:g,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,u.jsx)(Ee,{ref:i,store:o,canEdit:s,showActionButton:v,setHover:g,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,disabled:e.disabled}):(0,u.jsx)(Re,{ref:i,store:e.store,hideContent:e.hideContent,disableCommentMenu:e.disableCommentMenu,canEdit:s,disabled:e.disabled,showActionButton:v,onClick:k,setHover:g});return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"bookmark",getBlockStore:()=>o,getNode:()=>i.current,handleCreated:k,edit:k,caption:_,embed:b,activate:y})),[y,_,b,k,o]),I)}const Pe=l.memo(l.forwardRef(Me),g().A);function Be(e){let{imageURL:t,store:n}=e;const o={display:"block",width:"100%",height:"100%",objectFit:"cover"};return(0,u.jsx)("div",{style:{flexGrow:1,flexShrink:1,flexBasis:180,display:"block",position:"relative"},children:(0,u.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,u.jsx)(Se().A,{url:t,isAuthenticated:!0,permissionRecord:n.pointer,width:250,render:(e,t)=>t&&(0,u.jsx)(he().Ay,{style:o,src:t})})})})}const Re=l.forwardRef((function(e,t){const{store:o,hideContent:i,disableCommentMenu:r,canEdit:a,disabled:s,showActionButton:l,onClick:c,setHover:d}=e;return(0,u.jsxs)(V().s,{ref:t,allowSelectionWithin:!1,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),style:{display:"flex"},children:[(0,u.jsx)(ke().A,{iconSvg:n(119875).R,disabled:s,shouldHideRight:!l,right:a&&(0,u.jsx)(me().A,{store:e.store,fadeIn:!1}),onClick:c,isLoading:!1,progressPercent:0,children:(0,u.jsx)(m().sA,{defaultMessage:"Add a web bookmark",id:"bookmarkBlock.addWebBookmark.placeholder"})}),(0,u.jsx)(fe().A,{disableCommentMenu:r,hideContent:i,store:o,hideIfSidebarOrMarginCommentsVisible:!0})]})})),Ee=l.forwardRef((function(e,t){const{store:o,setHover:i,showActionButton:r,canEdit:a}=e,s=(0,w().v3)(),d=(0,l.useId)(),p=(0,f().pW)(o),g=(0,c().K8)((()=>o.getProperties()),[o]),v=(0,c().K8)((()=>o.getFormat()),[o]),_=ie().k4p(null==g?void 0:g.description),b=v.bookmark_cover,y=v.bookmark_icon,S=v.bookmark_loading_ttl,I=S?S-Date.now()-Ce:0,[x,C]=(0,l.useState)(I>0),T=(0,l.useCallback)((()=>i(!0)),[i]),M=(0,l.useCallback)((()=>i(!1)),[i]);(0,l.useEffect)((()=>{let e;return I>0&&(e=setTimeout((()=>{C(!1)}),I+1e3)),()=>clearTimeout(e)}),[x,I]);const P=(0,k().IS)((e=>({content:{display:"flex",flexWrap:"wrap-reverse",alignItems:"stretch",textAlign:"left",overflow:"hidden",border:`1px solid ${e.darkDividerColor}`,borderRadius:4,position:"relative",...p},loadingLabel:{minHeight:24,marginBottom:2,display:"inline-flex",alignItems:"center",color:e.text.secondary},link:{color:e.text.primary},menuButton:{position:"absolute",top:4,right:4,background:(0,h().FF)(s)}})),[p,s]),B=ie().k4p(null==g?void 0:g.link);let R=ie().k4p(null==g?void 0:g.title);if(B===R||!R){const e=re().qg(B);e.hostname&&(R=e.hostname)}return(0,u.jsxs)(V().s,{role:"figure",ref:t,"aria-labelledby":d,allowSelectionWithin:!0,children:[(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsx)(n(657202).A,{permissionRecord:o.pointer,url:B,render:(t,n)=>(0,u.jsxs)(_e().A,{href:n,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:P.content,onMouseMove:T,onMouseLeave:M,children:[(0,u.jsxs)("div",{style:Ae,children:[x?(0,u.jsxs)(we().A,{style:P.loadingLabel,children:[(0,u.jsx)(be().A,{style:{marginRight:8}})," ",(0,u.jsx)(m().sA,{defaultMessage:"Fetching preview",id:"bookmarkBlock.loadWhileFetching.message"})]}):(0,u.jsx)(we().A,{style:{minHeight:24,marginBottom:2},children:R}),_&&(0,u.jsx)(we().A,{isSmall:!0,isMultiline:!0,style:{height:32,overflow:"hidden"},children:_}),(0,u.jsxs)("div",{style:{display:"flex",marginTop:6},children:[y&&y.length>0&&(0,u.jsx)(Se().A,{url:y,isAuthenticated:!0,permissionRecord:e.store.pointer,render:(e,t)=>t&&(0,u.jsx)("img",{src:t,style:xe})}),(0,u.jsx)(we().A,{style:P.link,isSmall:!0,children:B})]})]}),b&&(0,u.jsx)(Be,{store:e.store,imageURL:b}),r&&a&&(0,u.jsx)(me().A,{store:e.store,style:P.menuButton,iconStyle:{fill:A().Ay.white},fadeIn:!0})]})}),(0,u.jsx)(fe().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]}),(0,u.jsx)(ge().c,{store:e.store,captionAriaId:d,disabled:e.disabled})]})})),De=l.forwardRef((function(e,t){const{store:n,setHover:o,showActionButton:i,canEdit:r}=e,a=(0,l.useId)(),s=(0,w().Y0)(),d=(0,f().pW)(n),p=(0,c().K8)((()=>n.getProperties()),[n]),{imageURL:m,faviconURL:g,loadingTtl:v}=(0,c().K8)((()=>{const e=n.getFormat();return{imageURL:e.bookmark_cover,faviconURL:e.bookmark_icon,loadingTtl:e.bookmark_loading_ttl}}),[n]),h=ie().k4p(null==p?void 0:p.description),_=v?v-Date.now()-Ce:0,[b,y]=(0,l.useState)(_>0),S=(0,l.useCallback)((()=>o(!0)),[o]),I=(0,l.useCallback)((()=>o(!1)),[o]);(0,l.useEffect)((()=>{let e;return _>0&&(e=setTimeout((()=>{y(!1)}),_+1e3)),()=>clearTimeout(e)}),[b,_]);const x=(0,k().IS)((e=>({menuButton:{position:"absolute",top:4,right:4,border:"1px solid var(--Stroke-Deemphasized, rgba(227, 226, 224, 0.50))",background:"dark"===e.mode?e.accentColors.gray[100]:e.buttonBackground,zIndex:1,cursor:"pointer",transition:"box-shadow 0.1s ease, background 0.1s ease",borderRadius:6},mainContainer:{display:"flex",flexDirection:s.isMobile?"column":"row",flexWrap:"wrap",flexGrow:1,alignItems:"stretch",borderRadius:4,border:`1px solid ${e.tableDividerColor}`,position:"relative",...d},imageContainer:{height:154,position:"relative",flexGrow:1,flexShrink:1,flexBasis:100,overflow:"hidden",display:"block",width:"-webkit-fill-available"},contentContainer:{display:"flex",width:"100%",padding:"18px 24px 14px 24px",gap:8,flexDirection:"column",flex:"1 0 0",justifyContent:"space-between",alignItems:"flex-start",alignSelf:"stretch",flexGrow:4,flexShrink:1,flexBasis:s.isMobile?100:180,overflow:"hidden",textAlign:"left"},flex:{display:"flex"}})),[d,s]),C=ie().k4p(null==p?void 0:p.link);let T=ie().k4p(null==p?void 0:p.title);if(C===T||!T){const e=re().qg(C);e.hostname&&(T=e.hostname)}return(0,u.jsxs)(V().s,{role:"figure",ref:t,"aria-labelledby":a,allowSelectionWithin:!0,children:[(0,u.jsxs)("div",{style:x.flex,children:[(0,u.jsxs)(_e().A,{href:C,external:!0,style:x.mainContainer,onMouseMove:S,onMouseLeave:I,children:[m&&(0,u.jsx)("div",{style:x.imageContainer,children:(0,u.jsx)("div",{style:{position:"absolute",inset:0},children:(0,u.jsx)(he().Ay,{src:m,style:{width:"100%",height:"100%",borderTopLeftRadius:3,borderBottomLeftRadius:3,position:"relative",objectFit:"cover"}})})}),(0,u.jsxs)(Ie().wt,{style:x.contentContainer,children:[(0,u.jsxs)(Ie().wt,{style:{alignSelf:"stretch",gap:3},children:[g&&g.length>0&&(0,u.jsx)(ve().A,{type:"image_url",imageURL:g,size:24,style:{margin:1}}),(0,u.jsx)(ye().D,{styleName:"UIHeading-17px/Medium",colorName:"primary",customStyles:{...(0,pe().pA)(1),textOverflow:"ellipsis"},children:T}),h&&(0,u.jsx)(ye().D,{styleName:"UIMedium-13px/Regular",colorName:"primary",customStyles:{...(0,pe().pA)(2),textOverflow:"ellipsis"},children:h})]}),(0,u.jsx)(Ie().Ye,{style:{alignSelf:"stretch"},children:(0,u.jsx)(ye().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",customStyles:{...(0,pe().pA)(1)},children:C})})]}),i&&r&&(0,u.jsx)(me().A,{store:e.store,style:x.menuButton,iconStyle:{fill:A().Ay.uiGray},fadeIn:!0})]}),(0,u.jsx)(fe().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]}),(0,u.jsx)(ge().c,{store:e.store,captionAriaId:a,disabled:e.disabled})]})}));var Ne=()=>n(799954);function Le(e,t){const o=(0,l.useRef)(null),i=(0,w().Y0)(),r=(0,f().bx)(e.store,e.disabled),a=(0,c().K8)((()=>e.store.getNavigableBlockStore()),[e.store]),s=a?(0,u.jsxs)(V().s,{allowSelectionWithin:!0,style:{display:"flex",paddingTop:Ne().nE.paddingTop,paddingBottom:Ne().nE.paddingBottom},ref:o,children:[(0,u.jsx)(n(205127).oK,{showCurrentPageControls:!1,ancestorMaxWidth:200,currentPageMaxWidth:300,store:a,maxAncestorCount:3,isMobile:i.isMobile,style:{flexGrow:1,minWidth:0,fontSize:"inherit"}}),i.isMobile&&r&&(0,u.jsx)(me().A,{store:e.store,fadeIn:!0,style:{marginTop:2,marginRight:4}}),(0,u.jsx)(fe().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}):null;return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"breadcrumb",getNode:()=>o.current,getBlockStore:()=>e.store})),[e.store]),s)}const Oe=l.memo(l.forwardRef(Le),g().A);var Ue=()=>n(870571),Fe=()=>n(19794),Ve=()=>n(596514),je=()=>n(161479),ze=()=>n(846662),He=()=>n(459882),We=()=>n(158218),qe=()=>n(925907),Ke=()=>n(884107),Ge=()=>n(675925),$e=()=>n(493823);function Ye(e){let{disabled:t,store:n,onEditCaption:o}=e;const i=(0,w().v3)(),r=(0,w().Y0)(),a=r.isMobile&&!r.isTablet,s=(0,f().bx)(n,t),c=(0,l.useCallback)((()=>{(0,Ge().o)(i,{action:"copy_text",block_type:"code",from:"code_block_actions"},(async e=>{const t=ie().k4p(n.getBlockTitleStore().getValue()),o=await Ke().R.clipboardActions.load();o.copyString({environment:i,stringValue:t,copiedMessage:o.clipboardMessages.copiedCodeToClipboard}).then(e)}))}),[i,n]),d=(0,l.useCallback)((()=>{(0,Ge().o)(i,{action:"init_edit_caption",block_type:"code",from:"code_block_actions"},(e=>{o(),e()}))}),[i,o]),p=(0,k().IS)((e=>{const t={height:25,background:e.codeBlockButtonBackground,color:e.text.primary,fontWeight:C().Wy.regular,padding:"4px 6px",fontSize:11.5},n={...t};s&&(n.borderTopRightRadius=0,n.borderBottomRightRadius=0);const o={...t,borderTopRightRadius:4,borderBottomRightRadius:4};return a&&(o.borderTopLeftRadius=4,o.borderBottomLeftRadius=4),{wrapper:{color:e.text.secondary,display:"flex",alignItems:"center",justifyContent:"center",fontSize:12,marginTop:4,marginRight:4},copyButton:n,captionButton:{...t,marginLeft:1,marginRight:1,borderRadius:0},actionMenuButton:o}}),[s,a]);return(0,u.jsxs)("div",{style:p.wrapper,children:[!a&&(0,u.jsxs)($e().p,{isGray:!0,size:"xs",onClick:c,style:p.copyButton,children:[(0,qe().n)({height:16,width:16,paddingRight:4}),(0,u.jsx)(m().sA,{defaultMessage:"Copy",id:"codeBlock.copyToClipboard.button"})]}),!a&&s&&(0,u.jsx)($e().p,{isGray:!0,size:"xs",onClick:d,style:p.captionButton,children:(0,u.jsx)(m().sA,{defaultMessage:"Caption",id:"codeBlock.caption.button"})}),s&&(0,u.jsx)(me().A,{style:p.actionMenuButton,store:n,fadeIn:!1})]})}var Qe=()=>n(534177);const Ze=(0,d().wt)("codePreviewOnly",{viewBox:"0 0 24 20",svg:(0,u.jsx)("path",{d:"M2.608 11.906h1.21v1.032c0 1.463.766 2.215 2.243 2.215h9.33c1.477 0 2.243-.758 2.243-2.215V6.444c0-1.463-.766-2.221-2.242-2.221H14.12V3.197c0-1.463-.772-2.221-2.242-2.221h-9.27C1.132.976.366 1.734.366 3.197v6.494c0 1.457.766 2.215 2.242 2.215zm.082-1.34c-.635 0-.984-.328-.984-.99v-6.27c0-.662.349-.99.984-.99h9.106c.629 0 .984.328.984.99v.917H6.06c-1.476 0-2.242.758-2.242 2.221v4.122H2.69zm3.453 3.254c-.636 0-.985-.335-.985-.998V6.561c0-.664.349-.998.985-.998h9.167c.628 0 .984.334.984.998v6.261c0 .663-.356.998-.984.998H6.143zm2.713-1.77c0 .307.335.437.595.287l3.972-2.324a.372.372 0 00-.007-.643L9.451 7.046c-.26-.15-.595-.027-.595.287v4.717z"})}),Xe=(0,d().wt)("splitView",{viewBox:"0 0 24 20",svg:(0,u.jsx)("path",{d:"M13.456 11.143V2.864c0-1.476-.766-2.242-2.222-2.242H2.915C1.452.622.693 1.388.693 2.864v8.278c0 1.477.76 2.243 2.222 2.243h8.32c1.462 0 2.221-.766 2.221-2.242zm-1.34-.083c0 .636-.335.985-.998.985H3.024c-.663 0-.99-.349-.99-.985V7.663h10.082v3.397zM2.033 2.946c0-.629.328-.984.991-.984h8.094c.663 0 .998.355.998.984v3.405H2.033V2.946z"})});var Je=()=>n(899038),et=()=>n(89924),tt=()=>n(416726);const nt=(0,m().YK)({showCodePreviewSection:{id:"action.codePreviewSection.name",defaultMessage:"Show in block"}}),ot=(0,tt().Ls)({key:"show code",displayName:tt().AY.showOnlyCodeFormat,analyticsName:tt().AY.showOnlyCodeFormat.defaultMessage,svg:n(628149).Z,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;Je().s9({environment:n,blocks:t,previewFormat:"code"})}}),it=(0,tt().Ls)({key:"show preview on code block",displayName:tt().AY.showCodePreviewFormat,analyticsName:tt().AY.showCodePreviewFormat.defaultMessage,svg:Ze,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;Je().s9({environment:n,blocks:t,previewFormat:"preview"})}}),rt=(0,tt().Ls)({key:"show code and preview",displayName:tt().AY.showSplitViewFormat,analyticsName:tt().AY.showSplitViewFormat.defaultMessage,svg:Xe,validators:[],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;Je().s9({environment:n,blocks:t,previewFormat:"split_view"})}}),at=[{key:"code preview actions block",render:e=>(0,u.jsx)(et().A,{...e}),title:B().A.formatMessage(nt.showCodePreviewSection),actions:[ot,it,rt]}];var st=()=>n(722872),lt=()=>n(700250),ct=(n(18107),n(967357),()=>n(921855));const dt=new(i().O2)("NotionScriptRenderer",(()=>Promise.all([n.e(46933),n.e(51197)]).then(n.bind(n,20911)))),ut=(0,i()._h)(dt,(e=>e.NotionScriptRenderer));var pt=()=>n(616610),mt=()=>n(337567),gt=(n(16280),n(814603),n(147566),n(198721),()=>n(206267)),ft=()=>n(319625);const vt=new(i().O2)("mermaidAPI",(async()=>{const e=(await Promise.all([n.e(49889),n.e(42838),n.e(96304)]).then(n.bind(n,622279))).default;return e.initialize({startOnLoad:!1,securityLevel:"strict",themeVariables:{fontFamily:C().O9}}),e})),ht="\n---\n";var _t=()=>n(719147);const bt=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableMermaid")}catch(e){return!1}})(),yt={lineHeight:1.16};function St(e){const{mermaidAPI:t,source:n}=e,o=(0,l.useRef)(null),i=(0,l.useRef)(`mermaid-${gt().JW()}`),[r,a]=(0,l.useState)(),s=(0,k().IS)((e=>({diagram:(0,Ie().wh)({alignContent:"center",justifyContent:"center"})})),[]),c=function(e){switch(e){case"dark":return"dark";case"light":return"neutral";default:(0,Qe().HB)(e)}}((0,k().DP)().mode),d=(0,l.useMemo)((()=>function(e){const{source:t,theme:n}=e,o=`%%{init: {'theme':'${n}'}}%%\n`;return t.startsWith("---\n")&&t.includes(ht)?t.replace(ht,`${ht}${o}`):`${o}${t}`}({source:n,theme:c})),[n,c]);return(0,l.useLayoutEffect)((()=>{if(!t)return;let e=!1;try{t.render(i.current,d).then((t=>{const n=t.svg,i=t.bindFunctions;if(e)return;if(!o.current)return;o.current.innerHTML=n;const r=o.current.firstChild;r&&r instanceof SVGSVGElement&&r.removeAttribute("height");try{i&&i(o.current),a(void 0)}catch(s){a((0,ft().A)(s))}}),(e=>{a((0,ft().A)(e))}))}catch(n){a((0,ft().A)(n))}return()=>{e=!0}}),[d,t]),(0,u.jsxs)(u.Fragment,{children:[r&&(0,u.jsx)(wt,{error:r}),(0,u.jsx)("div",{style:s.diagram,ref:o})]})}function wt(e){const{error:t}=e,n=(0,k().IS)((e=>({label:{color:e.errorText,marginBottom:4,whiteSpace:"pre-wrap"}})),[]);return"str"in t?(0,u.jsx)("div",{children:(0,u.jsxs)(we().A,{isMultiline:!0,style:n.label,children:[t.str,(0,u.jsx)("div",{children:(0,u.jsx)(_t().A,{external:!0,href:"https://mermaid-js.github.io/mermaid/#/examples",children:(0,u.jsx)(m().sA,{id:"mermaidRenderer.error.seeMermaidExamples",defaultMessage:"See Mermaid examples"})})})]})}):(0,u.jsx)(we().A,{isMultiline:!0,style:n.label,children:(0,u.jsx)(m().sA,{id:"mermaidRenderer.error.unknownError",defaultMessage:"Syntax error in Mermaid diagram: {error}",values:{error:`${t.name}: ${t.message}`}})})}function kt(e){const t=(0,c().K8)((()=>e.store.getBlockTitleStore()),[e.store]),n="code"===e.currentCodePreviewFormat,o=(0,l.useMemo)((()=>xt(e.currentLanguage)),[e.currentLanguage]),i=(0,c().K8)((()=>t.getValue()),[t]),r=(0,c().K8)((()=>{const e=(0,mt().x3)().at(0);return!(null==e||!e.isStreaming())&&(t.inMemoryRecordCache.isTemporaryData&&t.inMemoryRecordCache.name.includes(pt().b))}),[t]);if(n||!i||!o)return null;const a=o.component;return(0,u.jsx)("div",{style:Ct(e.currentCodePreviewFormat),children:(0,u.jsx)(a,{source:ct().r4(i,t),isAssistantDataLoading:r})})}const It={Mermaid:{component:function(e){const{source:t,isAssistantDataLoading:o}=e,r=(0,n(591779).lW)(t,300,Object.is),a=(0,i().fJ)(vt),s=bt?new Error("Mermaid is disabled because 'disableMermaid=true' was in the query string when the page loaded. Reload the page to re-enable Mermaid."):a.error;return(0,u.jsx)("div",{style:s?void 0:yt,children:s?!o&&(0,u.jsx)(wt,{error:s}):(0,u.jsx)(St,{mermaidAPI:a.value,source:r})})}},NotionScript:{component:ut}};function xt(e){const t=(0,Qe().O)(It,e)?It[e]:void 0;if(t)return t}function At(e){return Boolean(xt(e))}function Ct(e){switch(e){case"split_view":return{padding:16,flexGrow:1,flexShrink:0};case"preview":return{padding:16,paddingTop:40,alignSelf:"center",flexGrow:1,flexShrink:0};case"code":return{};default:(0,Qe().HB)(e)}}var Tt=()=>n(452558),Mt=()=>n(406699),Pt=()=>n(928600);function Bt(e){const t=(0,w().v3)(),n=(0,w().Y0)(),o=(0,k().DP)(),i=(0,f().bx)(e.store,e.disabled),r=(0,c().uB)(void 0,E().A),a=(0,l.useCallback)((o=>{const i=(0,u.jsx)(Tt().A,{context:{blocks:[e.store],environment:t,publicEditMode:void 0,analyticsFrom:"code_block_preview_menu"},sections:at,initialFocus:["code","preview","split_view"].findIndex((t=>t===e.currentCodePreviewFormat)),onAccept:o.close});let r;return r=n.isMobile?{menuType:st().gu.ActionSheet}:{menuType:st().gu.Popup,width:167,maxHeight:"50vh"},(0,u.jsx)(Pt().A,{...r,children:i})}),[n.isMobile,t,e.currentCodePreviewFormat,e.store]);return At(e.currentLanguage)?(0,u.jsx)(Mt().Ay,{popupType:n.isMobile?Mt().z7.SlideUp:Mt().z7.Popup,renderOrigin:t=>(0,u.jsxs)($e().p,{isGray:!0,size:"xs",disabled:!i,style:{marginRight:5},...t,children:[Rt(e.currentCodePreviewFormat),i&&(0,I().b)({width:10,marginLeft:4,fill:o.lightIconColor})]}),buttonPopupStore:r,placementToOrigin:lt().UV.Bottom,render:a}):null}function Rt(e){let t;switch(e){case"split_view":t=tt().AY.showSplitViewFormat;break;case"preview":t=tt().AY.showCodePreviewFormat;break;case"code":t=tt().AY.showOnlyCodeFormat;break;default:(0,Qe().HB)(e)}return(0,u.jsx)(m().sA,{...t})}n(898992),n(354520),n(581454);var Et=()=>n(792485),Dt=()=>n(15440),Nt=()=>n(763884),Lt=()=>n(751156),Ot=()=>n(857437),Ut=()=>n(88452),Ft=()=>n(178687),Vt=()=>n(77246),jt=()=>n(760217),zt=()=>n(419357);function Ht(e){const t=(0,Et().S)(),n=(0,m().tz)(),o=(0,w().v3)(),i=(0,w().Y0)(),r=(0,k().DP)(),a=(0,c().K8)((()=>t&&t.pageStore?Vt().Uv.getMode(t.pageStore):"default"),[t]),s=null!=t&&t.pageStore?a:"default",d=(0,f().bx)(e.store,e.disabled)&&"suggest"!==s,[p,g]=(0,l.useState)(""),v=(0,c().uB)(void 0,E().A),h=(0,Ut().Rp)(),[_,b]=(0,Ot().$)(),y=(0,l.useCallback)((e=>{g(e.target.value)}),[]),S=(0,l.useCallback)((()=>{g("")}),[]),x=(0,l.useCallback)((t=>{Lt().createAndCommit({userAction:"CodeBlock.setPersistedLanguage",environment:o,canUndo:!0,perform:n=>{Je().IA({blocks:[e.store],language:t,transaction:n})}}),Nt().K.set({userId:o.currentUser.id,key:Ft().j.localLanguagePreferenceKey,value:t})}),[o,e.store]),A=(0,l.useCallback)((t=>{const r=Dt().Dm.filter((e=>!(!h&&e===Dt().jA.NotionScript)&&"Java/C/C++/C#"!==e)),a=[{key:0,render:e=>(0,u.jsx)(et().A,{...e}),actions:r.map((e=>{const n={key:e,displayName:e,analyticsName:e,searchName:e,render:t=>(0,u.jsx)(jt().A,{title:e,...t}),action:()=>{x(e),t.close()},closeParentMenu:!0};return n}))}],s=(0,u.jsx)(Tt().A,{filter:p,context:{blocks:[],environment:o,publicEditMode:void 0,analyticsFrom:"code_block_language_menu"},sections:a,initialFocus:p?0:r.findIndex((t=>t===e.currentLanguage)),comboboxProps:b}),l=(0,u.jsx)(et().A,{isInput:!0,children:(0,u.jsx)(zt().Ay,{value:p,onChange:y,focus:!i.isMobile||void 0,placeholder:n.formatMessage(tt().AY.searchPlaceholder),focusAfterAnimation:!0,..._})});let c;return c=i.isMobile?{menuType:st().gu.Modal,title:(0,u.jsx)(m().sA,{defaultMessage:"Language",id:"codeBlock.mobileLanguageMenu.title"}),right:(0,u.jsx)(m().sA,{defaultMessage:"Done",id:"codeBlock.mobileLanguageMenu.doneButton.label"}),onClickRight:t.close,header:l}:{menuType:st().gu.Popup,width:240,maxHeight:"50vh",header:l},(0,u.jsx)(Pt().A,{...c,children:s})}),[e.currentLanguage,i.isMobile,o,y,n,p,x,h,_,b]);return(0,u.jsx)(Mt().Ay,{popupType:i.isMobile?Mt().z7.SlideUp:Mt().z7.Popup,renderOrigin:t=>(0,u.jsxs)($e().p,{isGray:!0,size:"xs",disabled:!d,style:{marginRight:5},...t,children:[e.currentLanguage,d&&(0,I().b)({width:10,marginLeft:4,fill:r.lightIconColor})]}),buttonPopupStore:v,placementToOrigin:lt().UV.Bottom,render:A,onClose:S})}var Wt=()=>n(232063);const qt="opacity 300ms ease-in";function Kt(e,t){const o=(0,w().v3)(),{isMobile:i}=(0,w().Y0)(),r=(0,l.useId)(),a=(0,l.useRef)(null),s=(0,c().uB)(void 0,v().A),{store:d,disabled:p}=e,m=(0,c().K8)((()=>(0,ze().Z0)(d)),[d]),g=n(335098).y[m],h=(0,c().K8)((()=>(0,ze().X$)(d)),[d]),_=(0,c().K8)((()=>d.getFormat().code_wrap),[d]),b=(0,c().K8)((()=>d.getBlockTitleStore()),[d]),[y,S]=(0,l.useState)(!1),[I,x]=(0,l.useState)(!1),A=(0,c().K8)((()=>O().A.state.isKeyboardMode),[]),C="ASCII Art"===m?1:void 0,T=(0,c().K8)((()=>!!d.isRootOrDirectChild()),[d]),M=(0,c().K8)((()=>(0,ze().gV)(d)),[d]),P=(0,c().K8)((()=>{let e;const t=n(712505).default.isSidePeekOpen(),i=(0,n(747100).cq)(d),r=(0,n(835066).xK)(o,i),a=n(622237).A.getWidth(i),s=d.getFormat().block_width;if(!T)return e;if(i)return e;if(t){if(!s||!r||!a)return e;r>=a&&s>=r?r>He().x?e=r:s>He().x&&(e=He().x):a>=r&&s>=a&&(a>He().x?e=a:s>He().x&&(e=He().x))}return e}),[o,T,d]),B=(0,k().IS)((t=>({resizableRootContainer:{display:"flex",position:"relative",margin:"auto",overflow:"visible",width:P},resizableContentContainer:{justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"100%",overflow:"scroll"},valueAndPreview:{padding:"22px"},wrapper:{flexGrow:1,textAlign:"left",position:"relative",minWidth:0,lineHeight:C,width:"100%",background:t.codeBlockBackground,borderRadius:4,...e.style},languageSelector:{position:"absolute",top:8,left:8,zIndex:1,color:t.text.secondary,display:"flex",alignItems:"center",justifyContent:"flex-end",opacity:y||I||i?1:0,transition:qt},header:{position:"absolute",top:3,right:1,zIndex:1,color:t.text.secondary,display:"flex",alignItems:"center",justifyContent:"flex-end",height:25,fontSize:11.5,opacity:i||I||!A&&y?1:0,transition:qt},captionContainer:{background:t.contentBackground,paddingRight:105}})),[C,I,y,A,i,e.style,P]),R=(0,l.useCallback)((()=>{const e=d.getPropertyStore("caption");ce().hc({environment:o,store:d}),de().setSelectionAtEnd({store:e})}),[o,d]),E=(0,l.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,n(819121).p)(t)&&x(!0)}),[]),D=(0,l.useCallback)((e=>{x(!1)}),[]),N=(0,l.useCallback)((()=>{S(!0)}),[]),L=(0,l.useCallback)((()=>{S(!1)}),[]),U=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{onFocus:E,onBlur:D,style:B.languageSelector,children:[(0,u.jsx)(Ht,{disabled:e.disabled,store:e.store,currentLanguage:m}),(0,u.jsx)(Bt,{disabled:e.disabled,store:e.store,currentLanguage:m,currentCodePreviewFormat:h})]}),(0,u.jsx)("div",{onFocus:E,onBlur:D,style:B.header,children:(0,u.jsx)(Ye,{store:e.store,disabled:e.disabled,onEditCaption:R})}),(0,u.jsxs)("div",{style:B.valueAndPreview,children:[$t(m,h)&&(0,u.jsx)(n(126380).G,{store:b,blockStore:d,language:g,disabled:p,codeWrap:Boolean(_),isQuickFind:Boolean(e.isQuickFind),parentSpaceId:(0,je().e)(d.pointer.spaceId),disableSuggestEdit:e.disableSuggestEdit}),(0,u.jsx)(kt,{store:d,disabled:p,currentCodePreviewFormat:h,currentLanguage:m})]}),(0,u.jsx)("div",{style:B.captionContainer,children:(0,u.jsx)(ge().c,{store:e.store,captionAriaId:r,disabled:e.disabled})})]}),F=(0,u.jsx)(u.Fragment,{children:"​"}),j=(0,u.jsx)(fe().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0}),z=M?(0,u.jsxs)("div",{ref:a,style:B.resizableRootContainer,children:[(0,u.jsxs)("div",{style:{width:"100%"},onMouseMove:N,onMouseLeave:L,children:[T&&(0,u.jsx)(Wt().A,{store:d,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Left,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"LeftResizer"),(0,u.jsxs)("div",{style:B.resizableContentContainer,children:[(0,u.jsx)(V().s,{role:"figure","aria-labelledby":r,allowSelectionWithin:!0,style:B.wrapper,children:U}),F]}),(0,u.jsx)(Wt().A,{store:d,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Right,resizeComponent:a,preserveScale:!1,isHovered:y,blockResizerStore:s},"RightResizer")]}),j]}):(0,u.jsxs)("div",{ref:a,style:{display:"flex"},children:[(0,u.jsx)(V().s,{role:"figure","aria-labelledby":r,allowSelectionWithin:!0,style:B.wrapper,onMouseMove:N,onMouseLeave:L,children:U}),F,j]});return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"code",getBlockStore:()=>d,getNode:()=>a.current,caption:R})),[R,d]),z)}const Gt=l.memo(l.forwardRef(Kt),g().A);function $t(e,t){return!At(e)||"preview"!==t}const Yt=(0,d().wt)("codepen",{viewBox:"0 0 40 40",svg:(0,u.jsx)("path",{d:"M39.9834,13.7071 C39.8236,12.6665 38.6647,12.1063 37.8655,11.586 C36.4269,10.6255 35.0283,9.70502 33.5897,8.74452 C30.1931,6.46334 26.7564,4.18216 23.3598,1.90098 C22.5606,1.38071 21.7613,0.820424 20.9621,0.300155 C20.4027,-0.100052 19.6434,-0.100052 19.044,0.300155 C16.7663,1.82094 14.4485,3.38175 12.1708,4.90253 L2.10066,11.626 C1.22152,12.1863 0.0626603,12.7466 0.0226996,13.9472 C-0.0172612,15.2679 0.0226996,16.6286 0.0226996,17.9493 L0.0226996,24.3526 C0.0226996,25.5132 -0.217065,26.8739 0.861875,27.5943 C3.41936,29.3552 6.01681,31.036 8.61426,32.7569 C11.8111,34.878 15.008,37.0391 18.2048,39.1602 C19.084,39.7606 19.9631,40.4009 21.0421,39.6805 C21.9611,39.0802 22.8403,38.4799 23.7594,37.8796 C27.3159,35.5184 30.8724,33.1171 34.4289,30.7559 L38.385,28.1145 C38.6248,27.9544 38.9045,27.7944 39.1443,27.5943 C39.7037,27.1941 39.9435,26.6338 39.9435,25.9534 L39.9435,14.9477 C39.9834,14.5075 40.0234,14.1073 39.9834,13.7071 C39.9834,13.7871 39.9834,13.6671 39.9834,13.7071 Z M21.7214,4.94255 L35.1882,13.9472 L29.194,17.9893 L21.7214,12.9867 L21.7214,4.94255 Z M18.2848,4.94255 L18.2848,12.9467 L10.8521,17.9493 L4.81799,13.9472 L18.2848,4.94255 Z M3.45932,17.1489 L7.73512,20.0304 L3.45932,22.9118 L3.45932,17.1489 Z M18.2848,35.1182 L4.81799,26.1135 L10.8121,22.0714 L18.2448,27.074 L18.2448,35.1182 L18.2848,35.1182 Z M20.0031,24.1125 L13.929,20.0304 L20.0031,15.9482 L26.0771,20.0304 L20.0031,24.1125 Z M21.7214,35.1182 L21.7214,27.114 L29.1541,22.1114 L35.1482,26.1535 L21.7214,35.1182 Z M36.5468,22.9118 L32.271,20.0304 L36.5868,17.1489 L36.5468,22.9118 Z"})});function Qt(e,t){const n=(0,l.useRef)(null),o=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"codepen",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:o,ref:n,store:e.store,iconSvg:Yt,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any public CodePen link…",id:"codepenBlock.embed.caption"}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed CodePen",id:"codepenBlock.placeholder"})}))}const Zt=l.memo(l.forwardRef(Qt),g().A);var Xt=()=>n(938090),Jt=()=>n(908006),en=()=>n(547392),tn=()=>n(855801),nn=()=>n(661491),on=()=>n(753199),rn=()=>n(666710),an=()=>n(454305),sn=()=>n(230062);const ln={width:46,handleWidth:4};function cn(e){const t=(0,c().uB)(e.mouseStore,an().A),{showHandle:n,onMouseDown:o,onTouchStart:i,onContextMenu:r,onDoubleClick:a}=e,s=(0,w().v3)(),d=(0,c().K8)((()=>n&&(t.state.mouseEntered||s.device.isMobile&&sn().A.state)),[n,t,s.device]),p=(0,l.useCallback)((()=>{t.setState({...t.state,mouseEntered:!1}),sn().A.removeListener(p)}),[t]),m=(0,l.useCallback)((()=>{sn().A.removeListener(p),sn().A.state||t.setState({...t.state,mouseEntered:!0})}),[p,t]),g=(0,l.useCallback)((()=>{sn().A.state?sn().A.addListener(p):t.setState({...t.state,mouseEntered:!1})}),[p,t]),f=(0,k().IS)((e=>{const t={position:"relative",width:ln.width,flexGrow:0,flexShrink:0,transition:"opacity 200ms ease-out",opacity:0};return{base:t,hovered:{...t,opacity:1,cursor:"col-resize"},handle:{position:"absolute",top:0,bottom:0,left:ln.width/2-ln.handleWidth/2,width:ln.handleWidth,height:"100%",background:e.darkDividerColor}}}),[]),v=d?f.hovered:f.base;return(0,u.jsx)("div",{style:v,onDoubleClick:a,onMouseDown:o,onTouchStart:i,onContextMenu:r,onMouseEnter:m,onMouseLeave:g,children:n&&(0,u.jsx)("div",{style:f.handle})})}const dn=l.memo(cn);var un=()=>n(199896);function pn(e,t){const{ratio:o,store:r,isLastItem:a,disabled:s,numColumns:d}=e,p=(0,w().v3)(),m=(0,l.useRef)(!1),g=(0,f().bx)(r,s),v=l.useRef(null),h=(0,c().K8)((()=>1===r.getContentLength()),[r]),_=(0,c().K8)((()=>{const e={width:"100%"};return d>1&&(e.width=`calc((100% - ${ln.width*(d-1)}px) * ${o})`),(0,nn().l2)(r,p)||(e.width="100%"),e}),[p,d,o,r]),b=(0,c().K8)((()=>(0,nn().l2)(r,p)),[r,p]),{value:y}=(0,i().fJ)(tn().VI.duplicateActions),S=(0,u.jsx)(j().A,{animate:_,ref:v,style:fn(b),onMouseDown:e=>{(0,nn().l2)(r,p)&&(0,on().SQ)({event:e,context:on().y$.EditorMouseDown,callback:()=>{m.current=!0,e.preventDefault(),n(257615).jD({environment:p,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!1})}})},onMouseUp:e=>{if(m.current&&!n(592678).Vt(e)){const{clientX:t,clientY:n,target:o}=e;Jt().default.afterNextFlush((()=>{de().editNearestBlock(p,{x:t,y:n,target:o instanceof Element?o:void 0}),m.current=!1}))}},onClick:t=>function(e,t,n){if(rn().default.hasBeenUpdatedSince(e.timeStamp))return;if(t.canEdit()){const{clientX:o,clientY:i,target:r}=e;Jt().default.afterNextFlush((()=>{Lt().createAndCommit({userAction:"Column.handleClick",environment:n,canUndo:!0,perform:e=>{de().insertIfAtBottomOfColumn(n,{x:o,y:i,target:r instanceof Element?r:void 0},t,e)}})}))}}(t,e.store,p),children:(0,u.jsx)(n(852302).l,{children:(0,u.jsx)(un().A,{store:r,canDropLeft:g&&b,canDropRight:a&&g&&b,onSelectableDrop:t=>function(e,t,n,o,i){const{droppedDirection:r,droppedStores:a,duplicate:s}=e;Lt().createAndCommit({userAction:"Column.handleDrop",environment:o,canUndo:!0,perform:e=>{en().MS({environment:o,droppedDirection:r,droppedStores:a,targetParentStore:t.getContentStore(),targetStore:n,duplicate:s,transaction:e,duplicateActions:i})}})}(t,e.columnListStore,e.store,p,y),analyticsName:"column",style:{display:"flex",flexDirection:"column"},shouldShowDropZone:!0,isListContainer:!0,children:(0,u.jsx)(q().A,{store:r.getContentStore(),disabled:s,disableLayout:h,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})})})});return(0,f().NW)(r,t,(0,l.useMemo)((()=>({renderedType:"column",getBlockStore:()=>r,getNode:()=>v.current})),[r]),S)}const mn=l.memo(l.forwardRef(pn),g().A),gn=12;function fn(e){const t={paddingTop:gn,paddingBottom:gn};return e?{...t,flexGrow:0,flexShrink:0}:t}n(944114),n(803949);var vn=()=>n(700500),hn=()=>n(496603),_n=()=>n(896628),bn=()=>n(757695);class yn extends bn().default{getInitialState(){return{dragging:!1}}}const Sn=yn;var wn=()=>n(40845),kn=()=>n(129522),In=()=>n(989423);function xn(e){const{columnListStore:t}=e;t.setState({dragging:!1})}function An(e){const{columnListBlockStore:t,diffX:n,columnListStore:o,leftColumnStore:i,rightColumnStore:r}=e;if(o.state.dragging){const{leftColumnStartWidth:e}=o.state,a=(0,wn().A)(o.state.leftColumnStartRatio,0,1),{rightColumnStartWidth:s}=o.state,l=(0,wn().A)(o.state.rightColumnStartRatio,0,1),c=e+s,d=a+l,u=(0,wn().A)(e+n,0,c),p=(0,wn().A)(s-n,0,c),m=d*(u/c),g=d*(p/c);if(0===u&&0===p)return o.setState({...o.state,temporaryRatios:{}}),{leftColumnNewRatio:a,rightColumnNewRatio:l};{const e=1/(8*t.getContentLength());let n=Math.round(m/e)*e,s=g+(m-n);return n<e&&(n=e,s=a+l-e),s<e&&(s=e,n=l+a-e),o.setState({...o.state,temporaryRatios:{[i.id]:n,[r.id]:s}}),{leftColumnNewRatio:n,rightColumnNewRatio:s}}}}function Cn(e){const{environment:t,columnListStore:n,transaction:o,leftColumnStore:i,rightColumnStore:r}=e,a=An(e);if(a){const{leftColumnNewRatio:e,rightColumnNewRatio:s}=a;_n().zA({stores:[i],update:{column_ratio:e},transaction:o}),_n().zA({stores:[r],update:{column_ratio:s},transaction:o}),n.state.dragging&&n.setState({...n.state,temporaryRatios:{}}),function(e){In().vd(e,"resize_column")}(t)}}function Tn(e){const{columnListBlockStore:t,transaction:n,environment:o}=e,i=1/t.getContentLength();_n().zA({stores:t.getContentStores(),update:{column_ratio:i},transaction:n}),function(e){In().vd(e,"reset_column_sizes")}(o)}function Mn(e){const t=(0,c().uB)(e.mouseStore,an().A),{canDrag:o,columnListBlockStore:i,leftColumnBlockStore:r,rightColumnBlockStore:a,columnListStore:s}=e,d=(0,w().v3)(),p=(0,l.useCallback)((e=>{o&&(e.preventDefault(),function(e){const{environment:t,columnListStore:n,leftColumnStore:o,rightColumnStore:i}=e,r=kn().K.getRect(o),a=kn().K.getRect(i);r&&a&&(n.setState({dragging:!0,temporaryRatios:{},leftColumnStartWidth:r.width,leftColumnStartRatio:o.getColumnRatio(),rightColumnStartWidth:a.width,rightColumnStartRatio:i.getColumnRatio()}),ce().IU({environment:t}),de().clear({environment:t}))}({environment:d,columnListStore:s,leftColumnStore:r,rightColumnStore:a}),ce().IU({environment:d}),de().blurActiveElement())}),[o,d,r,s,a]),m=(0,l.useCallback)((e=>{o&&An({columnListBlockStore:i,columnListStore:s,leftColumnStore:r,rightColumnStore:a,diffX:e.diffX})}),[o,i,s,r,a]),g=(0,l.useCallback)((e=>{Lt().createAndCommit({userAction:"ColumnDivider.handleDragEnd",environment:d,canUndo:!0,perform:t=>{o&&Cn({environment:d,columnListBlockStore:i,columnListStore:s,leftColumnStore:r,rightColumnStore:a,diffX:e.diffX,transaction:t})}}),xn({columnListStore:s})}),[o,i,s,d,r,a]),f=(0,l.useCallback)((()=>{xn({columnListStore:s})}),[s]),v=(0,l.useCallback)((()=>{Lt().createAndCommit({userAction:"ColumnDivider.handleDoubleClick",environment:d,canUndo:!0,perform:e=>{o&&Tn({environment:d,columnListBlockStore:i,transaction:e})}})}),[o,i,d]);return o?(0,u.jsx)(n(603820).A,{allowDragWhileTextEditing:!0,onDraggableDragStart:p,onDraggableDragMove:m,onDraggableDragEnd:g,onDraggableDragCancel:f,disableHorizontalEdgeScroll:!0,disableVerticalEdgeScroll:!0,render:e=>(0,u.jsx)(dn,{showHandle:!0,mouseStore:t,onDoubleClick:v,...e})}):(0,u.jsx)(dn,{mouseStore:t,showHandle:!1})}const Pn=l.memo(Mn),Bn={display:"flex",position:"relative",flexGrow:1};function Rn(e,t){const o=(0,w().v3)(),i=(0,f().bx)(e.store,e.disabled),r=(0,l.useRef)(null),a=(0,c().uB)(void 0,Sn),s=(0,c().uB)(void 0,v().A),{store:d}=e,p=(0,c().K8)((()=>(0,nn().l2)(d,o)),[o,d]),m=(0,l.useCallback)((()=>{const e=d.getContentStores()[0];if(e&&e.getType()===vn().xd.column){const t=e.getContentStores()[0];t&&t.getType()===vn().xd.text&&(ce().hc({environment:o,store:t}),de().setSelectionAtStart({store:t.getBlockTitleStore()}))}}),[o,d]),g=(0,l.useCallback)((()=>{Lt().createAndCommit({userAction:"ColumnList.handleResizeDoubleClick",environment:o,canUndo:!0,perform:e=>{if(d.canEdit()){const t=!d.getFormat().block_full_width;_n().zA({stores:[d],transaction:e,update:{block_full_width:t}})}}})}),[o,d]),h=(0,c().K8)((()=>{const{limitParents:t}=n(143197).A.state;let o;return e.store.findRecordStoreUIAncestor((n=>{const i=t.get(n);return!!i&&(o=i[e.store.id],!0)})),o}),[e.store]),_=(0,c().K8)((()=>i&&(0,nn().kv)(e.store,o)),[i,o,e.store]);let b=(0,c().K8)((()=>e.store.getContentStores()),[e.store]);const{disabled:y}=e;hn().Et(h)&&(b=hn().di(b,0,h));let S=(0,c().K8)((()=>b.map(((e,t)=>{let n;return n=a.state.dragging&&a.state.temporaryRatios.hasOwnProperty(e.id)?a.state.temporaryRatios[e.id]:e.getColumnRatio(),n}))),[a,b]);const k=hn().cz(S);S=S.map((e=>e/k));const I=[];b.forEach(((t,n)=>{const o=0===n,r=n===b.length-1;I.push((0,u.jsx)(mn,{store:t,isFirstItem:o,isLastItem:r,numColumns:b.length,ratio:S[n],disabled:y,columnListStore:e.store},t.id)),r||I.push((0,u.jsx)(Pn,{canDrag:i,columnListBlockStore:e.store,leftColumnBlockStore:t,rightColumnBlockStore:b[n+1],columnListStore:a},`divider${t.id}`))}));const x=(0,c().K8)((()=>{const e=Boolean(d.getFormat().block_full_width),t=e&&s.state.dragging?s.state.temporaryFullWidth:e;return{position:"relative",transition:"padding 0.2s linear",paddingLeft:t?ln.width:void 0,paddingRight:t?ln.width:void 0}}),[s,d]),A=(0,l.useMemo)((()=>({getNode:()=>r.current})),[]);let C;return C=_?(0,u.jsx)("div",{ref:r,style:x,children:(0,u.jsxs)("div",{style:Bn,children:[(0,u.jsx)(We().Ay,{disabled:!i,blockResizerStore:s,resizeComponent:A,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Left,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,children:(0,u.jsx)("div",{style:Dn("left"),children:(0,u.jsx)(dn,{onDoubleClick:g,showHandle:i})})},"divider-left-edge"),I,(0,u.jsx)(We().Ay,{disabled:!i,resizeComponent:A,resizerType:We().f9.Horizontal,resizerAlignment:We()._l.Right,preserveScale:!0,resizeHorizontally:!0,resizeVertically:!1,store:e.store,blockResizerStore:s,children:(0,u.jsx)("div",{style:Dn("right"),children:(0,u.jsx)(dn,{onDoubleClick:g,showHandle:i})})},"divider-right-edge")]})}):(0,u.jsx)("div",{ref:r,style:{display:p?"flex":"block"},children:I}),(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"column_list",getBlockStore:()=>e.store,getNode:()=>r.current,handleCreated:m})),[m,e.store]),(0,u.jsx)(n(27654).c.Provider,{value:!0,children:C}))}const En=l.memo(l.forwardRef(Rn),g().A);function Dn(e){return{display:"flex",position:"absolute",top:0,bottom:0,right:"left"===e?"100%":"auto",left:"right"===e?"100%":"auto"}}function Nn(e,t){const o=l.useRef(null),i=(0,k().IS)((()=>({root:{minHeight:"1.5em",display:"flex",alignItems:"center"},wrapper:{...Ne().nE},progressBar:{flex:1,margin:"0 8px"}})),[]);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"copy_indicator",getNode:()=>o.current,getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(V().s,{allowSelectionWithin:!1,style:i.wrapper,ref:o,children:(0,u.jsxs)("div",{style:i.root,children:[(0,u.jsx)(be().A,{}),(0,u.jsx)("div",{style:i.progressBar,children:(0,u.jsx)(n(575650).A,{targetRecordId:e.store.id})})]})}))}const Ln=l.memo(l.forwardRef(Nn),g().A),On=(0,d().wt)("deepnote",{viewBox:"0 0 92 92",svg:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,u.jsx)("path",{fill:"#0265B4",fillRule:"evenodd",d:"M20 73h22.153l12.461-4.673-4.673-18.346-14.365 1.558L20 73z",clipRule:"evenodd"}),(0,u.jsx)("path",{fill:"#002868",fillRule:"evenodd",d:"M42.153 73s7.004-3.695 8.3-10.242c1.296-6.546-5.1-11.22-14.876-11.22 0-.172 8.582-12.114 8.582-12.114l20.84.605-4.622 24.407-8.628 6.74L42.153 73z",clipRule:"evenodd"}),(0,u.jsx)("path",{fill:"#3793EF",fillRule:"evenodd",d:"M20 44.615l17.307-25.614s.424.004 1.385 0c6.784-.03 34.268 1.315 34.268 25.467 0 27.57-30.807 28.53-30.807 28.53s12.865-2.463 12.865-14.687-11.619-13.696-19.095-13.696H20z",clipRule:"evenodd"})]})}),Un=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.embeds.button.label"}});function Fn(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"deepnote",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:On,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Deepnote blocks with public links",id:"deepnoteBlock.embeds.caption"}),embedButtonText:n.formatMessage(Un.embedButtonText),urlInputPlaceholder:"https://deepnote.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Deepnote",id:"deepnoteBlock.placeholder"})}))}const Vn=l.memo(l.forwardRef(Fn),g().A);var jn=()=>n(502438);function zn(e,t){let{store:o}=e;const i=(0,w().v3)(),r=(0,l.useRef)(null),a=(0,n(444570).Jj)(),s=(0,k().IS)((e=>({root:{color:e.darkDividerColor,pointerEvents:"auto",...a?{marginTop:9,marginBottom:8}:{}}})),[a]),c=(0,l.useCallback)((e=>{n(780054).A.isMobile&&(ce().Lt({environment:i,store:o}),n(901265).it({environment:i,stores:jn().default.state.stores,left:e.clientX,top:e.clientY,actionSectionGroupKey:"default",showInput:!0,analyticsFrom:"content_block_menu"}))}),[i,o]);return(0,f().NW)(o,t,(0,l.useMemo)((()=>({renderedType:"divider",getNode:()=>r.current,getBlockStore:()=>o,handleCreated(){Lt().createAndCommit({userAction:"DividerBlock.handleCreated",environment:i,canUndo:!0,perform:e=>en().Rp({environment:i,targetStore:o,targetParentStore:o.getRecordStoreUIParent(),isAtStartOfLine:!1,isClick:!1,transaction:e})})}})),[i,o]),(0,u.jsx)(n(802790).A,{className:M().OiJ,size:13,style:s.root,onClick:c,ref:r}))}const Hn=l.memo(l.forwardRef(zn),g().A);function Wn(e,t){const n=(0,l.useRef)(null),o=(0,w().v3)(),i=(0,ue().gU)()?{source:"https://www.notion.so/product/drawing"}:{};return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"drawing",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store,handleCreated(){de().clear({environment:o}),ce().td({environment:o,stores:[e.store],phase:jn().SelectionPhase.Editing})}})),[o,e.store]),(0,u.jsx)(h().Ay,{...e,...i,ref:n,mediaMenuTabs:[],disableMediaMenu:!0,preserveScale:!1,showURLInput:!1}))}const qn=l.memo(l.forwardRef(Wn),g().A);var Kn=()=>n(869190),Gn=()=>n(305491),$n=()=>n(415559),Yn=()=>n(319975),Qn=()=>n(619400);class Zn extends bn().default{getInitialState(){return{error:!1,loading:!1}}}const Xn=Zn,Jn={flexGrow:1,flexShrink:1,flexBasis:180,overflow:"hidden",textAlign:"left",justifyContent:"center",display:"flex",flexDirection:"column"},eo={display:"block",width:"100%",height:"100%",objectFit:"cover",objectPosition:"top"},to={position:"absolute",top:0,left:0,right:0,bottom:0},no={display:"block",position:"relative",width:"100%",paddingBottom:"55%"},oo=(0,m().YK)({menuTitle:{defaultMessage:"Embed",id:"googleDriveBlock.mediaMenuActions.embedTab.title"}});function io(e,t){const{store:o}=e,i=(0,n(311029).B)(),r=(0,l.useRef)(null),a=(0,w().v3)(),s=(0,f().bx)(e.store,e.disabled),{properties:d,format:p}=(0,c().K8)((()=>({properties:o.getProperties(),format:o.getFormat()})),[o]),g=(0,c().uB)(void 0,Xn),[v,h]=(0,l.useState)(!1),_=(0,l.useCallback)((async e=>{const t=n(943846).Or(e);if(!t)return void(await uo(e,o,a));const i=await $n().Dx({environment:a,store:o,fileId:t});i&&i.auth_error&&($n().pQ(a,{onSuccess:e=>{So(t,e,a,o,g)},onFailure:()=>{uo(e,o,a)}}),po("url_embed",a))}),[g,a,o]),b=(0,l.useCallback)((()=>{const{device:e}=a,t=[];return t.push({type:"embed",caption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any file in your Google Drive",id:"googleDriveBlock.embedTab.caption"}),buttonText:(0,u.jsx)(m().sA,{defaultMessage:"Embed Google Drive file",id:"googleDriveBlock.embedTab.embedButton.label"}),onChange:e=>{le().I(),_(e.originUrl)}}),e.isMobile||t.push({type:"drive",title:(0,u.jsx)(m().sA,{defaultMessage:"Browse Google Drive",id:"googleDriveBlock.mediaPicker.googleDriveTab.title"}),onSelect:async e=>{if(le().I(),e&&e.token)wo(e.token,a,o,g),se().pu(a);else{const e=await $n().W3(a);e&&e.token&&wo(e.token,a,o,g),po("drive_file_picker",a)}}}),t}),[g,a,_,o]),y=(0,l.useCallback)((()=>{const{device:e}=a;if(s){const t=r.current;if(t&&t instanceof Element){const n=t.getBoundingClientRect();le().W(a,{originRect:n,originGap:0,isSmallWidth:!1,showArrow:!0,currentTab:e.isMobile?"embed":"drive",tabs:b(),title:B().A.formatMessage(oo.menuTitle),popupWidth:320,maxHeight:420})}}}),[s,a,b]);(0,l.useEffect)((()=>{p&&p.drive_properties&&p.drive_properties.file_id&&p.drive_status&&p.drive_status.last_fetched+5*ae().Xb<Date.now()&&$n().ub(a,{id:o.id,spaceId:(0,je().e)(o.pointer.spaceId)})}),[a,p,o.id,o.pointer.spaceId]);const S=(0,l.useCallback)((()=>h(!0)),[h]),k=(0,l.useCallback)((()=>h(!1)),[h]),I=(0,u.jsx)(V().s,{allowSelectionWithin:!0,ref:r,style:{position:"relative"},children:p&&p.drive_properties&&p.drive_status?(0,u.jsx)(ao,{...e,store:o,canEdit:s,captionAriaId:i,fileData:p.drive_properties,driveStore:g,shouldShowActionButton:yo(a,v),handleMouseEnter:S,handleMouseLeave:k}):d&&d.source?(0,u.jsx)(lo,{...e,store:o,handleMouseEnter:S,handleMouseLeave:k}):(0,u.jsx)(so,{...e,store:o,onClick:y,shouldShowActionButton:yo(a,v),canEdit:s,driveStore:g,handleMouseEnter:S,handleMouseLeave:k})});return(0,f().NW)(o,t,(0,l.useMemo)((()=>({renderedType:"drive",getBlockStore:()=>o,getNode:()=>r.current,handleCreated:y,initializeGoogleDriveBlockFromUrl:_})),[y,_,o]),I)}const ro=l.memo(l.forwardRef(io),g().A);function ao(e){const{store:t,fileData:n,captionAriaId:o,driveStore:i,canEdit:r,disableCommentMenu:a,hideContent:s,disabled:l,shouldShowActionButton:c,handleMouseEnter:d,handleMouseLeave:p,style:m}=e,g=(0,f().pW)(t),v=(0,k().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderTopLeftRadius:0,borderTopRightRadius:0,flexDirection:"column",width:"100%",...m,...g}})),[m,g]);return(0,u.jsxs)("div",{role:"figure","aria-labelledby":o,children:[(0,u.jsxs)("div",{style:{display:"flex"},children:[(0,u.jsxs)(_e().A,{href:n.url,external:!0,style:v.linkBox,onMouseLeave:p,onMouseEnter:d,children:[(0,u.jsx)(bo,{store:t,driveStore:i,fileData:n}),(0,u.jsx)(_o,{fileData:n}),c&&r&&(0,u.jsx)(mo,{store:t})]}),(0,u.jsx)(fe().A,{disableCommentMenu:a,hideContent:s,store:t})]}),(0,u.jsx)(ge().c,{store:t,captionAriaId:o,disabled:l})]})}function so(e){const{disabled:t,store:n,canEdit:o,driveStore:i,disableCommentMenu:r,hideContent:a,onClick:s,shouldShowActionButton:l,handleMouseEnter:d,handleMouseLeave:p}=e,g=(0,c().K8)((()=>n.getFormat().drive_status),[n]),f=Boolean(g&&g.authed),v=(0,c().K8)((()=>i.getState().loading),[i]);return(0,u.jsxs)("div",{onMouseEnter:d,onMouseLeave:p,style:{display:"flex"},children:[(0,u.jsx)(ke().A,{iconSvg:Gn().x,disabled:t,shouldHideRight:l,right:o&&(0,u.jsx)(me().A,{store:n,fadeIn:!1}),onClick:s,isLoading:v,progressPercent:0,children:f?(0,u.jsx)(m().sA,{defaultMessage:"Choose a file to embed from Google Drive",id:"googleDriveBlock.placeholder.authenticated"}):(0,u.jsx)(m().sA,{defaultMessage:"Connect Google Drive to Notion to embed a file",id:"googleDriveBlock.placeholder.notAuthenticated"})}),(0,u.jsx)(fe().A,{disableCommentMenu:r,hideContent:a,store:n})]})}function lo(e){const{store:t,handleMouseEnter:n,handleMouseLeave:o}=e,i=(0,k().IS)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);return(0,u.jsx)("div",{style:i.container,children:(0,u.jsx)(h().Ay,{...e,store:t,iconSvg:Gn().x,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Google Docs, Google Sheets…",id:"googleDriveBlock.legacyLinkInput.caption"}),contentBelowSource:(0,u.jsx)(co,{...e,handleMouseLeave:o,handleMouseEnter:n}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a file from Google Drive",id:"googleDriveBlock.legacy.placeholder"})})})}function co(e){const{store:t,handleMouseEnter:n,handleMouseLeave:o,style:i}=e,{properties:r,format:a}=(0,c().K8)((()=>({properties:t.getProperties(),format:t.getFormat()})),[t]),s=(0,f().pW)(t),l=(0,k().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:"none",borderRight:"none",borderTopLeftRadius:0,borderTopRightRadius:0,padding:"8px 12px",...i,...s},title:{fontWeight:C().Wy.medium,...C().RC,color:e.text.primary},uiLabel:{color:e.text.secondary,fontSize:12}})),[i,s]),d=ie().k4p(r&&r.source);let p=a.link_title;const m=a.link_provider?`${a.link_provider} Embed`:"Google Drive Embed";d!==p&&p||(p=d.includes("spreadsheets")?"A Google Sheets file":d.includes("document")?"A Google Docs file":d.includes("presentation")?"A Google Slides file":"A Google Drive file");return(0,u.jsxs)(_e().A,{href:d,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:l.linkBox,onMouseMove:n,onMouseLeave:o,children:[(0,u.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,u.jsx)(ve().A,{type:"image_url",imageURL:"https://s3-us-west-2.amazonaws.com/public.notion-static.com/8fb58690-ee50-4584-b9fd-ca9b524f56aa/google-drive-icon-19632.png",size:38})}),(0,u.jsxs)("div",{style:Jn,children:[(0,u.jsx)(we().A,{style:l.title,children:p}),(0,u.jsx)("div",{style:{display:"flex"},children:(0,u.jsx)(we().A,{style:l.uiLabel,isSmall:!0,children:m})})]})]})}async function uo(e,t,n){const o=await(0,tn().zQ)();Lt().createAndCommit({userAction:"DriveBlock.convertToTextBlock",environment:n,canUndo:!0,perform:i=>{Yn().R9({environment:t.environment,store:t.getBlockTitleStore(),value:[ie().Ey_(e,[ie().Sez(e)])],transaction:i}),o({environment:n,blocks:[t],blockType:"text",transaction:i})}})}function po(e,t){se().iT(t,{integration_name:"google",from:e})}function mo(e){let{store:t}=e;const n=(0,w().v3)();return(0,u.jsx)(me().A,{store:t,style:{position:"absolute",top:4,right:4,background:(0,h().FF)(n)},iconStyle:{fill:A().Ay.white},fadeIn:!0})}function go(e){return{...no,paddingBottom:"20%",minHeight:80,background:e.embedPlaceholderBackground}}function fo(e){return{width:"100%",minHeight:60,padding:14,paddingTop:12,overflow:"hidden",borderTop:`1px solid ${e.darkDividerColor}`}}function vo(e){return{fontSize:12,lineHeight:1.3,color:e.text.secondary,maxHeight:32,overflow:"hidden"}}function ho(e){let{fileData:t}=e;const n=(0,k().DP)(),o=t.user_name||t.modified_time?(0,u.jsx)(m().sA,{defaultMessage:"Last modified {hasUserName, select, true {by {userName}} other {}} {hasLastModifiedTime, select, true {{lastModifiedTime}} other {}}",id:"googleDriveBlock.pageDescription",values:{hasUserName:Boolean(t.user_name),userName:t.user_name,hasLastModifiedTime:Boolean(t.modified_time),lastModifiedTime:t.modified_time&&(0,Kn().v9)(t.modified_time,S().locale)}}):void 0;return(0,u.jsxs)("div",{style:vo(n),children:[t.trashed&&(0,u.jsx)(m().sA,{defaultMessage:"This file is in trash.",id:"googleDriveBlock.pageDeleted.caption"}),o]})}function _o(e){let{fileData:t}=e;const n=(0,k().DP)(),o=t.title,i=t.url,r=re().qg(i).hostname;return(0,u.jsxs)("div",{style:fo(n),children:[o&&(0,u.jsx)(we().A,{style:{marginBottom:2},children:o}),(0,u.jsx)(ho,{fileData:t}),(0,u.jsxs)("div",{style:{display:"flex",alignItems:"center",marginTop:6},children:[t.icon&&(0,u.jsx)("div",{style:(a=t.icon,{flexShrink:0,backgroundImage:`url(${a})`,backgroundSize:"cover",width:16,height:16,marginRight:6})}),(0,u.jsx)(we().A,{style:{color:n.text.primary},isSmall:!0,children:r})]})]});var a}function bo(e){let{fileData:t,store:n,driveStore:o}=e;const i=(0,k().DP)(),r=(0,c().uB)(o,Xn),a=t.thumbnail,s=(0,c().K8)((()=>r.state.error),[r]);return a&&!s?(0,u.jsx)("div",{style:no,children:(0,u.jsx)("div",{style:to,children:(0,u.jsx)(Se().A,{url:a,width:1e3,isAuthenticated:!0,permissionRecord:n.pointer,render:(e,n)=>{if(n){const e=re().O$(n,{v:t.version});return(0,u.jsx)("img",{src:e,style:eo,onError:e=>{r.setState({error:!0,loading:!1})}})}e&&r.setState({error:!0,loading:!1})}})})}):(0,u.jsx)("div",{style:go(i)})}function yo(e,t){const{device:n}=e;return n.isMobile||t}async function So(e,t,n,o,i){i.setState({loading:!0,error:!1});const r=await $n().Dx({environment:n,store:o,fileId:e,token:t});i.setState({loading:!1,error:!r||Boolean(r.auth_error)})}function wo(e,t,n,o){Qn().openGoogleDriveFilePicker({environment:t,accessToken:e.accessToken,callback:i=>{So(i,e,t,n,o)}})}const ko=(0,d().wt)("tex",{viewBox:"0 0 32 21",svg:(0,u.jsxs)("g",{children:[" ",(0,u.jsxs)("g",{id:"d7fc5246-3c04-467c-8f25-6c129c5642ac","data-name":"tex",children:[" ",(0,u.jsxs)("g",{id:"ec363c67-067d-4da0-8c27-f8d029e068bd","data-name":"E",children:[" ",(0,u.jsx)("path",{id:"e1948427-1829-4c96-a9f4-14a99a3d5b97","data-name":"path0 fill",d:"M497.33,497.82c-1.2,0-2.11-.06-3-0.06a0.5,0.5,0,0,0-.55.27c0,0.15.17,0.23,0.57,0.32a1.08,1.08,0,0,1,1.06,1.23c0,0.55,0,1,0,3.32s-0.08,4.43-.13,5.21c-0.08,1-.42,1.2-1.39,1.41a0.59,0.59,0,0,0-.53.32c0,0.21.23,0.25,0.59,0.25,0.7,0,1.08-.09,2.13-0.09,2.76,0,6,.13,6.21.13a0.7,0.7,0,0,0,.36-0.21,14.63,14.63,0,0,0,.68-2.07c0-.21,0-0.53-0.15-0.53a0.78,0.78,0,0,0-.48.55,2.41,2.41,0,0,1-1.54,1.41,9,9,0,0,1-1.8.15,10.57,10.57,0,0,1-1.69-.13,0.74,0.74,0,0,1-.38-0.44,7,7,0,0,1-.15-1.56c0-.78,0-2.49.06-2.93a0.26,0.26,0,0,1,.17-0.17c0.53,0,1.29,0,1.9,0,1.06,0.06,1.18.13,1.44,1a0.52,0.52,0,0,0,.32.4c0.15,0,.23-0.19.23-0.53s-0.06-.68-0.06-1.2,0-.84.06-1.35c0-.17,0-0.46-0.17-0.46a0.54,0.54,0,0,0-.36.42c-0.34.87-.38,0.93-2.09,0.93h-1.27a0.18,0.18,0,0,1-.17-0.17c0-.44,0-3.84.08-4.29a0.5,0.5,0,0,1,.27-0.55,21.09,21.09,0,0,1,2.7.1,1.4,1.4,0,0,1,1.25,1.31,0.54,0.54,0,0,0,.3.47,0.46,0.46,0,0,0,.3-0.51c0-.38,0-1.08,0-1.84a0.28,0.28,0,0,0-.17-0.23,14.12,14.12,0,0,1-1.75.08h-2.81Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,u.jsxs)("g",{id:"8dfbf0a9-85f0-49da-99d8-6229354b9534","data-name":"T",children:[" ",(0,u.jsx)("path",{id:"8602b8e9-f5d6-42d3-88c6-0649b350ce04","data-name":"path1 fill",d:"M490.48,490.82c-2.18,0-3.91-.06-4.39-0.11a1.32,1.32,0,0,1-.68-0.34,0.85,0.85,0,0,0-.3-0.3,0.39,0.39,0,0,0-.28.32,19.85,19.85,0,0,1-.38,2.55,0.4,0.4,0,0,0,.23.42c0.08,0,.19,0,0.38-0.42a5.64,5.64,0,0,1,.61-1,1.72,1.72,0,0,1,1.35-.44c0.32,0,1.94,0,2.3.09a0.26,0.26,0,0,1,.17.25v2.26c0,1.46-.09,5.3-0.13,6.44-0.06,1.41-.11,1.71-1.41,2a0.47,0.47,0,0,0-.38.34c0,0.11.19,0.23,0.57,0.23s1.33-.13,2.22-0.13,2.13,0.1,2.28.1,0.53,0,.53-0.25a0.65,0.65,0,0,0-.49-0.34c-1.22-.25-1.31-0.53-1.39-1.33s-0.1-2.6-.1-4.81c0-1.63,0-3.61,0-4.5a0.35,0.35,0,0,1,.15-0.25c0.29-.06,2.26-0.06,2.6,0,1.12,0.06,1.37.15,1.5,1.16,0.06,0.48.15,0.61,0.28,0.61a0.43,0.43,0,0,0,.32-0.38,11.69,11.69,0,0,1,.42-2.2c0.1-.27,0-0.44-0.09-0.44a0.72,0.72,0,0,0-.28.13,2.49,2.49,0,0,1-1.33.32C494,490.8,491.49,490.82,490.48,490.82Z",transform:"translate(-484.44 -490.06)"})," "]})," ",(0,u.jsxs)("g",{id:"88168da7-a35d-4a6e-af2a-2bab78b9d062","data-name":"X",children:[" ",(0,u.jsx)("path",{id:"f33958e3-fb20-476c-b2a8-674ffe821a96","data-name":"path2 fill",d:"M504,491a0.52,0.52,0,0,0,.51.36,3,3,0,0,1,1.84,1.14,53.54,53.54,0,0,1,3,4.73,0.22,0.22,0,0,1-.06.27c-1.14,1.58-2.22,2.87-3,3.72a4.47,4.47,0,0,1-2.22,1.27c-0.51.1-.7,0.27-0.7,0.44s0.15,0.21.51,0.21,1.2-.1,2-0.1c0.61,0,1.48.06,2,.06,0.25,0,.46-0.08.46-0.27a0.53,0.53,0,0,0-.46-0.32c-0.74-.27-1-0.47-0.17-1.82,0.53-.78,1.44-2,2.05-2.72a0.15,0.15,0,0,1,.19,0c0.23,0.21,2.09,3.17,2.53,4a0.26,0.26,0,0,1-.08.34,3.18,3.18,0,0,1-.68.23c-0.32.11-.42,0.19-0.42,0.34s0.11,0.25.47,0.25,1-.08,1.58-0.08c1.12,0,2.17.11,2.79,0.11,0.42,0,.57-0.09.57-0.25a0.49,0.49,0,0,0-.44-0.36,3.37,3.37,0,0,1-2.34-1.73c-0.49-.67-2.7-4-2.83-4.31a0.45,0.45,0,0,1,0-.23c0.91-1.27,2.17-2.7,2.85-3.52a3.79,3.79,0,0,1,2.38-1.41,0.5,0.5,0,0,0,.44-0.34,0.44,0.44,0,0,0-.46-0.21c-0.44,0-1.56.06-2,.06s-1.12,0-1.69,0c-0.36,0-.53.1-0.53,0.25a0.49,0.49,0,0,0,.48.34c0.67,0.13,1,.34.72,0.89a32.86,32.86,0,0,1-2.53,3.44,0.14,0.14,0,0,1-.19,0,33.44,33.44,0,0,1-2.3-3.63c-0.21-.38,0-0.59.34-0.68s0.46-.21.46-0.36a0.43,0.43,0,0,0-.47-0.21c-0.55,0-.91,0-1.63,0s-2-.1-2.39-0.1S504,490.84,504,491Z",transform:"translate(-484.44 -490.06)"})," "]})," "]})," "]})});function Io(e,t){const o=(0,w().Y0)(),r=(0,k().DP)(),a=(0,w().v3)(),{store:s}=e,d=(0,f().bx)(s,e.disabled),p=(0,f().pW)(s),g=(0,l.useRef)(null),[v,h]=(0,l.useState)(!1),[_,b]=(0,l.useState)(!1),[y,S]=(0,l.useState)(!1),I=(0,c().K8)((()=>{const e=s.getBlockTitleStore().getValue();return ie().k4p(e)}),[s]),x=Boolean(I),C=(0,l.useCallback)((()=>{h(!0)}),[]),T=(0,l.useCallback)((()=>{h(!1)}),[]),M=(0,l.useCallback)((()=>{b(!0)}),[]),P=(0,l.useCallback)((()=>{b(!1)}),[]),B=(0,l.useCallback)((()=>{S(!0)}),[]),R=(0,l.useCallback)((()=>{S(!1),ce().Lt({environment:a,store:s})}),[a,s]),E=(0,l.useCallback)((()=>{!function(e,t){In().vd(e,"equation_block_edit",t)}(a,{equation:I})}),[a,I]),D=(0,l.useCallback)((e=>{Lt().createAndCommit({userAction:"EquationBlock.handleChange",environment:a,canUndo:!1,perform:t=>{Yn().R9({environment:a,store:s.getBlockTitleStore(),value:ie().x9d(e),transaction:t})}})}),[a,s]),N=(0,l.useCallback)((()=>{y?R():B()}),[R,B,y]),L=(0,c().K8)((()=>n(197194).vG({environment:a,equation:I,displayMode:"block"})),[a,I]),O=(0,k().IS)((e=>{const t=o.isMobile||_||v;return{container:{display:"flex",padding:"4px 8px",width:"100%",flexDirection:x?"column":void 0,overflow:x?"auto":void 0,color:x?void 0:A().Ay.contentPlaceholder,...p},error:{background:e.equationErrorPlaceholderBackground},actionMenuButton:{position:"absolute",top:4,right:4,color:e.text.secondary,opacity:t?1:0},button:{position:"relative",width:"100%",borderRadius:4,background:x?void 0:e.surface.wash}}}),[p,o.isMobile,v,_,x]),U=y?{isOpen:!0,equationValue:I,error:L}:{isOpen:!1,equationValue:void 0,error:void 0},F=!d,j=(0,u.jsxs)(V().s,{ref:g,allowSelectionWithin:!0,style:{display:"flex",position:"relative"},children:[(0,u.jsx)(i().u2,{dependency:n(354584).y,children:t=>(0,u.jsx)(n(548901).A,{...U,Prism:t,displayMode:"block",disabled:F,origin:(0,u.jsxs)(z().A,{onMouseMove:M,onMouseLeave:P,onClick:B,style:O.button,children:[I?(0,u.jsx)(n(145192).A,{theme:r,display:"block",equation:I,style:O.container,errorStyle:{...O.container,...O.error}}):(0,u.jsx)(n(291050).Ay,{iconSvg:ko,iconStyle:{width:28,height:28,marginRight:8},style:{background:void 0},children:e.placeholder??(0,u.jsx)(m().sA,{defaultMessage:"Add a TeX equation",id:"equationBlock.empty.placeholder"})},"button"),d&&(0,u.jsx)(me().A,{onFocus:C,onBlur:T,store:s,tooltipContent:(0,u.jsx)(m().sA,{defaultMessage:"Rename, delete, and more…",id:"equationBlock.actions.tooltip"}),style:O.actionMenuButton,fadeIn:!1})]}),onDismiss:R,onChange:D,onSubmit:E})}),(0,u.jsx)(fe().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"equation",getBlockStore:()=>e.store,getNode:()=>g.current,handleCreated:B,edit:B,activate:N})),[N,B,e.store]),j)}const xo=l.memo(l.forwardRef(Io),g().A),Ao=(0,d().wt)("excalidraw",{viewBox:"0 0 32 32",svg:(0,u.jsxs)("g",{children:[(0,u.jsx)("path",{d:"m14.2933 1.41174c-.8308.66246-2.1108 1.78526-3.1214 2.75088l-.7972.75228.146.98807c.0786.53895.2246 1.59439.3144 2.33544.101.74105.2021 1.43719.2358 1.53825.0449.13473 0 .2021-.1235.2021-.2134 0-.2246-.05614.3593 1.79654.2133.7073.4154 1.3586.4379 1.4259.0224.0786.1122.1123.2133.0786.1011-.0449.1572-.1347.1235-.2133-.0337-.0898.0225-.1797.1123-.2133.1235-.045.1123-.1348-.0786-.4604-.3032-.5053-1.0779-4.81685-1.1228-6.20913-.0337-.98807-.0337-.9993.3817-1.5607.4043-.55018 1.3362-1.38105 2.7734-2.43649.4042-.30316.8084-.64.9207-.75228.1684-.20211.247-.14597 1.6617 1.35859.8197.86456 1.7292 1.75158 2.0211 1.97614l.5389.40422-.4154.87579c-.2246.47157-1.134 2.29052-2.0323 4.01966-1.8751 3.6379-1.4933 3.2898-3.6716 3.3235l-1.4147.0112-.4716.539c-.494.5726-.5614.7859-.3256 1.1452.0898.1235.1572.3257.1572.4492 0 .2021.0786.2358.5277.2582.2807.0112.539.0449.5726.0786.0337.0337.0786.7298.1123 1.5495l.0449 1.4821-.7522 1.6168c-1.2464 2.6948-1.74039 3.9299-1.74039 4.3341 0 .2133.04491.3929.08982.3929.11227 0 .11227-.0112 4.68207-9.5438 2.1221-4.4239 4.132-8.5895 4.4688-9.27441.3369-.68491.64-1.31369.6625-1.40351.0224-.10105-.7523-.87579-1.9874-1.96491-1.1116-.98807-2.0884-1.88632-2.1782-1.98737-.2583-.314389-.64-.213336-1.325.33684zm.3818 12.91226c-.5165.9993-.539 1.0106-1.9537 1.0779-1.2463.0674-1.2688.0562-1.2688-.1796 0-.1348-.0449-.3144-.101-.4042-.0674-.1011-.0225-.2807.1347-.5278l.247-.3817h1.1228c.6176-.0112 1.325-.0562 1.572-.1011s.4603-.0673.4828-.0561c.0224.0112-.0898.2695-.2358.5726zm-.9432 1.7965c-.0898.2358-.3256.7298-.5165 1.1004-.3143.6287-.348.6512-.4266.393-.0449-.1572-.0786-.6176-.0898-1.033-.0113-.8197-.0337-.8084.9094-.8646l.3032-.0112z"}),(0,u.jsx)("path",{d:"m14.6302 4.08401c-.2021.14597-.2583.29193-.2583.66246 0 .43789.0337.50526.3369.62877s.3817.11228.7298-.12351c.4604-.31439.4716-.39298.1348-.89824-.292-.4379-.5839-.51649-.9432-.26948zm.64.40421c.1796.31439.0674.55018-.2695.55018-.3031 0-.4379-.30316-.2695-.60632.1348-.24701.393-.22456.539.05614z"}),(0,u.jsx)("path",{d:"m21.6702 6.61034c0 .05614-.0674.11228-.146.11228-.0674 0-.2582.31439-.4042.69614-.4491 1.16772-4.9404 10.04914-4.9516 9.76844 0-.146-.0673-.247-.1796-.247-.1572 0-.1797.0898-.1123.5277.0674.5053.0224.6175-1.5719 3.7165-.8983 1.7628-1.8639 3.6042-2.1446 4.0982-.2919.5165-.5165 1.0779-.5389 1.3137-.0337.4042.0112.4604.988 1.3025.5614.494 1.28 1.1115 1.5944 1.3922 1.4147 1.2913 2.0772 1.8078 2.2569 1.7741.2694-.0449 4.435-4.4127 4.4463-4.6597 0-.1122-.2021-1.8189-.4492-3.7951-.4266-3.3684-.8308-7.3094-.7859-7.6912.0337-.2358-.1348-1.4259-.2583-1.9424-.101-.4043-.0561-.5727.7523-2.4141.4716-1.0891 1.0891-2.42524 1.3586-2.96419.2583-.53894.4828-1.01052.4828-1.04421 0-.03368-.0786-.05614-.1684-.05614s-.1684.04492-.1684.11228zm-2.5825 8.38736c.1235.786.3705 2.6723.5502 4.1881.3481 2.7845.7523 5.8723.8646 6.6582.0673.393.0224.4716-.7074 1.28-1.2688 1.426-2.6162 2.8295-3.0765 3.1888l-.4267.3368-2.1894-2.0435c-2.0211-1.8638-2.1895-2.0547-2.066-2.2793.0674-.1235.64-1.1677 1.2688-2.3129.6287-1.1453 1.4596-2.6723 1.8414-3.3909.3929-.7299.7522-1.3586.8196-1.3923.0786-.0449.1011 1.0891.0786 3.5032-.0449 3.6042-.0337 3.6154.3256 3.5368.0449 0 .0786-1.819.0786-4.0309v-4.0196l1.179-2.3579c.6512-1.3025 1.1901-2.3467 1.2126-2.3355.0225.0113.1347.6737.247 1.4709z"})]})}),Co=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.embeds.button.label"}});function To(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"excalidraw",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:Ao,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Excalidraw whiteboards.",id:"excalidrawBlock.embeds.caption"}),embedButtonText:n.formatMessage(Co.embedButtonText),urlInputPlaceholder:"https://excalidraw.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Excalidraw",id:"excalidrawBlock.placeholder"})}))}const Mo=l.memo(l.forwardRef(To),g().A);var Po=()=>n(361873);var Bo=()=>n(797265),Ro=()=>n(962730);const Eo=(0,m().YK)({tombstoneLabelNoPermission:{id:"factoryBlock.tombstoneLabelNoPermission",defaultMessage:"Template buttons are no longer supported"},tombstoneLabel:{id:"factoryBlock.tombstoneLabel",defaultMessage:"Template buttons are no longer supported. Click to turn into a button block."},titlePlaceholder:{id:"factoryBlock.titlePlaceholder",defaultMessage:"New button"}});function Do(e,t){const{store:o,disabled:r}=e,a=(0,w().v3)(),s=(0,l.useRef)(null),d=(0,n(416504).P)(),p=(0,m().tz)(),g=(0,c().K8)((()=>{var e;return null===(e=o.getModel())||void 0===e?void 0:e.getRenderTitle({getRecordModel:o.getRecordModel,userTimeZone:d,intl:p})}),[p,o,d]),v=(0,c().K8)((()=>r||!o.canEdit()),[o,r]),{value:h}=(0,i().fJ)(tn().VI.duplicateActions),_=(0,l.useCallback)((async()=>{const e=await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(99171)]).then(n.bind(n,87017));Lt().createAndCommit({userAction:"FactoryBlock.handleClickUpgrade",environment:a,canUndo:!0,perform:t=>{var n;if(!h)return;const i=e.duplicateBlocks({environment:a,blocks:[o],transaction:t,preferDuplicateLocation:"local",duplicateActions:h});Bo().ZL({environment:a,blocks:[o],transaction:t}),function(e,t){In().u4({environment:e,event:{eventName:"factory_block_upgrade",eventProperties:t}})}(a,{factory_block_id:o.id,button_block_id:null===(n=i[0])||void 0===n?void 0:n.id})}})}),[h,a,o]),b=(0,k().IS)((e=>({iconStyle:{fill:e.errorText},buttonStyle:{overflowX:"auto",...v?{cursor:"not-allowed"}:{},...C().RC,fontWeight:500,margin:"2px 0"}})),[v]),y=(0,u.jsx)(n(859428).A,{placement:Ro().W.Bottom,renderTooltip:()=>(0,u.jsx)(m().sA,{...v?Eo.tombstoneLabelNoPermission:Eo.tombstoneLabel}),render:e=>(0,u.jsx)(W().A,{size:"lg",disabled:v,disabledFeedback:!0,style:b.buttonStyle,ref:s,icon:n(693954).Q,iconStyle:b.iconStyle,onClick:_,...e,children:g??(0,u.jsx)(m().sA,{...Eo.titlePlaceholder})})});return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"factory",getBlockStore:()=>e.store,getNode:()=>{var e;return(null===(e=s.current)||void 0===e?void 0:e.parentElement)??null}})),[e.store]),y)}const No=l.memo(l.forwardRef(Do),g().A),Lo=(0,d().wt)("figma",{viewBox:"0 0 36 55",svg:(0,u.jsx)("path",{d:"M19.5,27.5 C19.5,23.08142 23.08142,19.5 27.5,19.5 C31.9186,19.5 35.5,23.08142 35.5,27.5 C35.5,31.9186 31.9186,35.5 27.5,35.5 C23.08142,35.5 19.5,31.9186 19.5,27.5 Z M0.5,46.5 C0.5,42.08142 4.08142,38.5 8.5,38.5 L16.5,38.5 L16.5,46.5 C16.5,50.9186 12.9186,54.5 8.5,54.5 C4.08142,54.5 0.5,50.9186 0.5,46.5 Z M19.5,16.5 L19.5,0.5 L27.5,0.5 C31.9186,0.5 35.5,4.08142 35.5,8.5 C35.5,12.9186 31.9186,16.5 27.5,16.5 L19.5,16.5 Z M8.5,16.5 C4.08142,16.5 0.5,12.9186 0.5,8.5 C0.5,4.08142 4.08142,0.5 8.5,0.5 L16.5,0.5 L16.5,16.5 L8.5,16.5 Z M8.5,35.5 C4.08142,35.5 0.5,31.9186 0.5,27.5 C0.5,23.08142 4.08142,19.5 8.5,19.5 L16.5,19.5 L16.5,35.5 L8.5,35.5 Z"})});function Oo(e,t){const n=(0,l.useRef)(null),o=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"figma",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,ref:n,blockResizerStore:o,store:e.store,iconSvg:Lo,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any public Figma shareable link",id:"figmaBlock.caption"}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Figma",id:"figmaBlock.placeholder"})}))}const Uo=l.memo(l.forwardRef(Oo),g().A);var Fo=()=>n(489436);const Vo=(0,d().wt)("framer",{viewBox:"0 0 32 32",svg:(0,u.jsx)("g",{children:(0,u.jsx)("path",{d:"m9 6h14v7h-7zm0 7h7l7 7h-14zm0 7h7v7z"})})}),jo=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Framer",id:"framerBlock.embedFramer.button.label"}});function zo(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"framer",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:Vo,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Framer prototypes",id:"framerBlock.linkInput.caption"}),embedButtonText:n.formatMessage(jo.embedButtonText),urlInputPlaceholder:"https://framer.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a Framer prototype",id:"framerBlock.placeholder"})}))}const Ho=l.memo(l.forwardRef(zo),g().A);const Wo=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Gist",id:"gistBlock.embedButton.label"}});function qo(e,t){const o=(0,m().tz)(),i=(0,l.useRef)(null),r=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"gist",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:n(595797).F,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with links to Gists on GitHub",id:"gistBlock.linkInput.caption"}),embedButtonText:o.formatMessage(Wo.embedButtonText),urlInputPlaceholder:"https://gist.github.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a Gist",id:"gistBlock.placeholder"})}))}const Ko=l.memo(l.forwardRef(qo),g().A);var Go=()=>n(895007);const $o=(0,d().wt)("hex",{viewBox:"0 0 92 92",svg:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("path",{fill:"#fff",d:"M0 0h92v92H0z"}),(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.8 34v8.368h-2.4V34H15v24h8.4V46h2.4v12h8.4V34h-8.4Zm10.7995 24h19.2v-9.6h-8.4v6h-2.4V46h10.8V34h-19.2v24Zm8.4-15.6v-4.8h2.4v4.8h-2.4Zm24.0007 0V34h8.4v6l-3.6 4.2 3.6 4.2V58h-8.4V45.968h-2.4V58h-8.4v-9.6l3.6-4.2-3.6-4.2v-6h8.4v8.4h2.4Z",fill:"#473982"})]})}),Yo=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Hex",id:"hexBlock.embeds.button.label"}});function Qo(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"hex",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:$o,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Hex cell links with public access.",id:"hexBlock.embeds.caption"}),embedButtonText:n.formatMessage(Yo.embedButtonText),urlInputPlaceholder:"https://hex.tech/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Hex",id:"hexBlock.placeholder"})}))}const Zo=l.memo(l.forwardRef(Qo),g().A),Xo=(0,d().wt)("picture",{viewBox:"0 0 30 30",svg:(0,u.jsx)("path",{d:"M1,4v22h28V4H1z M27,24H3V6h24V24z M18,10l-5,6l-2-2l-6,8h20L18,10z M11.216,17.045l1.918,1.918l4.576-5.491L21.518,20H9 L11.216,17.045z M7,12c1.104,0,2-0.896,2-2S8.104,8,7,8s-2,0.896-2,2S5.896,12,7,12z"})});var Jo=()=>n(675074),ei=()=>n(436572),ti=()=>n(500507),ni=()=>n(186445),oi=()=>n(937182);const ii=(0,m().YK)({urlPlaceholder:{defaultMessage:"Paste the image link…",id:"imageBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed image",id:"imageBlock.embedImage.button.label"}}),ri=[{type:"file",imageUpload:!0},{type:"embed"},{type:"unsplash"}],ai=[...ri,{type:"giphy"}];function si(e,t){const o=(0,m().tz)(),i=(0,w().v3)(),r=(0,l.useRef)(null),a=(0,c().uB)(e.blockResizerStore,v().A),s=(0,f().bx)(e.store,e.disabled),d=(0,c().K8)((()=>n(508496).default.checkGate({gateName:"enable_giphy_feature_gate"})?ai:ri),[]);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"image",getNode:()=>r.current,getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)("div",{ref:r,children:(0,u.jsx)(ti().V,{type:oi().Dn,dropTargetKey:`image-block-${e.store.id}`,onDropFile:s?t=>{if("invalidFileDrop"===t.type)return void ei().D6({label:(0,u.jsx)(m().sA,{id:"imageBlock.invalidImageDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const n=ni().y0(i);Jo().QM({environment:i,store:e.store,file:t.file,pageWidth:n,preferredType:e.store.getType()})}:hn().lQ,children:(0,u.jsx)(h().Ay,{...e,blockResizerStore:a,store:e.store,urlInputPlaceholder:o.formatMessage(ii.urlPlaceholder),iconSvg:Xo,preserveScale:!0,mediaMenuCurrentTab:"file",mediaMenuTabs:d,mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any image from the web",id:"imageBlock.linkInput.caption"}),embedButtonText:o.formatMessage(ii.embedButtonText),popupWidth:540,maxHeight:420,children:(0,u.jsx)(m().sA,{defaultMessage:"Add an image",id:"imageBlock.placeholder"})})})}))}const li=l.memo(l.forwardRef(si),g().A),ci=(0,d().wt)("invision",{viewBox:"0 0 215 182",svg:(0,u.jsxs)("g",{stroke:"none",strokeWidth:"1",children:[" ",(0,u.jsxs)("g",{transform:"translate(0.000000, -222.000000)",children:[" ",(0,u.jsxs)("g",{children:[" ",(0,u.jsx)("path",{d:"M98.9196618,401.249534 L67.23738,401.249534 C69.0283748,394.069758 70.787323,387.019973 72.4415558,380.387695 C68.8636285,384.425558 65.4170469,389.032134 61.2582199,392.866884 C50.6503674,402.647395 38.1012175,405.941417 24.0797327,402.23079 C13.9819165,399.55829 7.92421985,391.917675 6.61663119,381.562133 C5.46837247,372.464529 7.41824578,363.782628 9.57890401,355.080416 C13.7219334,338.391847 17.8017725,321.687933 21.9028255,304.989434 C22.0454551,304.409889 22.1339216,303.817254 22.2995706,302.96283 L-0.0003,302.96283 C2.30975824,294.403698 4.53721769,286.151943 6.78995327,277.806756 L60.5229552,277.806756 C60.3491817,278.642223 60.2273147,279.357627 60.0512844,280.059943 C53.0231647,308.023022 45.9535198,335.97572 39.0057421,363.95911 C38.1427426,367.435481 37.6331576,371.059899 37.479244,374.638277 C37.2535643,379.877659 40.2013936,382.783512 45.4935844,382.824134 C53.5440336,382.885068 60.4588621,379.769784 66.3955944,374.554776 C72.743064,368.979131 77.1564578,362.201967 79.1663619,353.808936 C83.0828089,337.452117 87.2971531,321.167064 91.379249,304.850416 C91.5232327,304.276286 91.5715282,303.678686 91.6933952,302.909569 L69.2513464,302.909569 C69.6155936,301.479211 69.9089773,300.269116 70.2316994,299.067145 C71.9843286,292.540938 73.758623,286.020597 75.4882328,279.488522 C75.7789084,278.389461 76.0555918,277.645621 77.5008451,277.651037 C92.8448135,277.709714 108.18833,277.692562 123.531847,277.702492 C123.75166,277.702492 123.97102,277.781931 124.411096,277.867238 C122.458966,286.803255 120.511801,295.717606 118.565087,304.631958 C118.656261,304.671226 118.747887,304.710043 118.838611,304.749311 C120.277996,302.605804 121.639297,300.404524 123.17076,298.328721 C129.752485,289.408051 137.659853,281.997178 148.043831,277.728671 C168.022811,269.515732 188.005402,280.685076 192.142563,302.283534 C193.975534,311.851454 193.064691,321.305631 190.553778,330.628914 C187.175803,343.16994 183.622249,355.664024 180.318748,368.224458 C179.661569,370.722733 179.467484,373.448493 179.624106,376.035235 C179.988804,382.073072 185.463796,384.737899 190.442292,381.268749 C192.360119,379.932273 194.120421,378.060937 195.308399,376.052387 C197.438816,372.450086 199.08989,368.563429 200.922861,364.787355 C201.278532,364.054347 201.552056,363.281168 201.937066,362.346854 C206.06836,363.936993 210.106223,365.491476 214.381049,367.137584 C210.178891,380.337594 205.268551,393.058261 192.248181,399.864312 C181.021966,405.732889 169.389528,405.395272 158.535233,398.5987 C151.013326,393.889214 148.484358,386.186312 148.027131,377.697592 C147.620005,370.133709 149.656088,362.968376 151.693976,355.800786 C154.30148,346.629159 157.031754,337.485517 159.315182,328.232646 C160.272516,324.353211 160.657977,320.20973 160.534756,316.210233 C160.26394,307.425422 153.949871,301.479211 145.147908,301.094201 C135.701404,300.681207 128.636273,304.704626 123.601357,312.562796 C119.514296,318.940958 117.721496,326.162711 115.917863,333.384916 C110.367494,355.603993 104.804488,377.819911 99.2455434,400.036731 C99.157077,400.390597 99.0564238,400.741303 98.9196618,401.249534 Z M28.7006165,241.023028 C28.6658618,230.356047 37.1446512,221.982425 47.9637399,222.000028 C58.6717942,222.017631 67.1365914,230.335285 67.169992,240.873176 C67.2033927,251.467488 58.5991253,259.984192 47.8874602,259.958916 C37.2349231,259.934091 28.7349198,251.545573 28.7006165,241.023028 Z"})," "]})," "]})," "]})}),di=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Invision",id:"invisionBlock.embeds.button.label"}});function ui(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"invision",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:ci,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Invision projects",id:"invisionBlock.embeds.caption"}),embedButtonText:n.formatMessage(di.embedButtonText),urlInputPlaceholder:"https://invis.io/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed an Invision project",id:"invisionBlock.placeholder"})}))}const pi=l.memo(l.forwardRef(ui),g().A);var mi=()=>n(106628),gi=()=>n(361330),fi=()=>n(351360);class vi extends bn().default{getInitialState(){return{query:""}}}const hi=vi;var _i=()=>n(251126),bi=()=>n(545805),yi=()=>n(519831),Si=()=>n(222299),wi=()=>n(575301),ki=()=>n(630116),Ii=()=>n(939740),xi=()=>n(64e3),Ai=()=>n(958378),Ci=()=>n(790748),Ti=()=>n(556544),Mi=()=>n(377586),Pi=()=>n(297872),Bi=()=>n(623580),Ri=()=>n(897119);function Ei(e){const{autocompleteStore:t,disableMouseCapture:n,focus:o,format:i,inputPlaceholder:r,inputStyle:a,isOpen:s,onBgClick:d,onInputBlur:p,onInputClick:m,onInputFocus:g,onQueryUpdate:f,popupStyle:v,preventCaptureEsc:h,queryUpdateDebounce:_,renderPopup:b}=e,y=(0,w().Y0)(),S=(0,c().K8)((()=>t.state.query),[t]);(0,Ci().b)(Ti().A,(()=>({isOpen:s})),[s]);const k=(0,l.useMemo)((()=>hn().sg((e=>{f&&f({query:e,autocompleteStore:t})}),_)),[f,_,t]);return(0,u.jsx)(Ri().Ay,{alignmentToOrigin:Ro().C.Start,disableDarkOverlayBackground:y.isPhone,disableMouseCapture:n,onDismiss:d,open:s,origin:(0,u.jsx)(Di,{isOpen:s,value:S,inputPlaceholder:r,focus:o,handleInputChange:e=>{const n=e.target.value;t.setState({...t.state,query:n}),k(n)},handleInputClick:m,handleInputFocus:g,handleInputBlur:p,inputStyle:a,format:i}),originGap:4,placementToOrigin:Ro().W.Bottom,popupType:y.isPhone?Mi().n.SlideUp:Mi().n.Popup,preventCaptureEsc:h,render:b,style:v})}function Di(e){const{focus:t,format:n,handleInputChange:o,inputPlaceholder:i,inputStyle:r,isOpen:a,handleInputBlur:s,handleInputClick:l,handleInputFocus:c,value:d}=e;return(0,u.jsx)(Pi().A,{allowMenuList:!0,capture:a,render:e=>(0,u.jsx)(V().s,{allowSelectionWithin:!0,...e,children:(0,u.jsx)(Bi().A,{focus:t,format:void 0!==n?n:Bi().C.Transparent,onBlur:s,onChange:o,onClick:l,onFocus:c,placeholder:i,style:r,value:d})})})}const Ni=(0,m().YK)({inputPlaceholder:{defaultMessage:"Search for a database…",id:"linkToCollectionBlock.input.placeholder"}});function Li(e){const t=(0,m().tz)(),n=(0,w().v3)(),o=(0,w().Y0)(),i=(0,l.useRef)(!1),r=(0,wi().o_)(),a=(0,l.useCallback)((()=>{const t=(e.results||[]).map((t=>{const o=ki().md.createChildStore(e.store,{table:yi().Vl,id:t});return{key:t,render:e=>(0,u.jsx)(Ai().A,{...e,store:o}),action:()=>{i.current||(i.current=!0,Lt().createAndCommit({userAction:"LinkToCollectionBlock.menuListItem",environment:n,canUndo:!0,perform:t=>{const i=Si().oT({environment:n,store:e.store,collectionStore:o,collectionViewStore:void 0,transaction:t});i&&ce().td({environment:n,stores:[i]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,u.jsx)(et().A,{title:(0,u.jsx)(m().sA,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.noResults.title"}),loading:!e.ready,children:(0,u.jsx)(xi().A,{title:(0,u.jsx)(m().sA,{defaultMessage:"No results",id:"linkToCollectionBlock.menuItem.noResults.label"})})}):(0,u.jsx)(Ii().Ay,{type:Ii().Oh.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,u.jsx)(et().A,{...t,title:(0,u.jsx)(m().sA,{defaultMessage:"Select a database",id:"linkToCollectionBlock.menuItem.showResults.title"}),loading:!e.ready}),items:t}]}),s=o.isPhone?{menuType:st().gu.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${r}px)`}:{menuType:st().gu.Popup,width:460,maxHeight:"40vh"},(0,u.jsx)(Pt().A,{...s,children:a})}),[o.isPhone,n,e.ready,e.results,e.store,r]),s=(0,l.useCallback)((()=>{de().clear({environment:n}),i.current||(i.current=!0,Lt().createAndCommit({userAction:"LinkToCollectionBlock.handleBlur",environment:n,canUndo:!0,perform:t=>{Bo().TF({store:e.store,transaction:t})}}))}),[n,e.store]);return(0,u.jsx)(Ei,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:gi().tu,inputPlaceholder:t.formatMessage(Ni.inputPlaceholder),focus:!0,inputStyle:{...Oi(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function Oi(){return{lineHeight:1.3}}function Ui(e,t){const o=(0,w().v3)(),i=(0,l.useRef)(null),r=(0,c().uB)(void 0,hi),a=(0,c().K8)((()=>r.state.query),[r]),s=(0,c().K8)((()=>{const t=n(24157).default.state;return Boolean("editing"===t.mode&&(0,n(231722).KP)(t.multiSelection)&&t.multiSelection.start.store.id===e.store.id)}),[e.store.id]);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"link_to_collection",getNode:()=>i.current,getBlockStore:()=>e.store,handleCreated(){ce().A({environment:o,phase:jn().SelectionPhase.Editing}),de().setSelection({store:e.store,selection:void 0})}})),[o,e.store]),s?(0,u.jsx)(_i().A,{request:a,performRequest:t=>async function(e,t,n){const o=await mi().T.searchActions.load(),{currentSpaceStore:i}=fi().default.state,r=await o.searchCollections(n,{query:e,limit:20,source:"link_to_collection_block",spaceStore:i,searchSessionId:void 0});return r.results}(t,e.store,o),debounce:gi().tu,render:(t,n,o)=>(0,u.jsx)(bi().A,{debugName:"LinkToCollectionBlock",capture:s,children:(0,u.jsx)(Li,{store:e.store,results:n,ready:o,autocompleteStore:r})})}):null)}const Fi=l.memo(l.forwardRef(Ui),g().A);n(672577);var Vi=()=>n(68263),ji=()=>n(731320),zi=()=>n(179034);const Hi=(0,m().YK)({inputPlaceholder:{defaultMessage:"Search for a page…",id:"linkToPageBlock.searchPlaceholder"}});function Wi(e){const t=(0,m().tz)(),n=(0,w().v3)(),o=(0,w().Y0)(),i=(0,wi().o_)(),r=(0,l.useRef)(!1),a=(0,l.useCallback)((()=>{const t=(e.results||[]).map((t=>{const o=ki().Bv.createChildStore(e.store,{table:zi().ev,id:t});return{key:t,render:e=>(0,u.jsx)(Ai().A,{...e,store:o,showVerifiedPageBadge:!0}),action:()=>{r.current||(r.current=!0,Lt().createAndCommit({userAction:"LinkToPageBlock.menuListItem",environment:n,canUndo:!0,perform:t=>{const i=Si().bh({environment:n,store:e.store,targetStore:o,transaction:t});i&&ce().td({environment:n,stores:[i]})}}))}}}));let a,s;return a=e.results&&0===t.length?(0,u.jsx)(et().A,{title:(0,u.jsx)(m().sA,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt"}),loading:!e.ready,children:(0,u.jsx)(xi().A,{title:(0,u.jsx)(m().sA,{defaultMessage:"No results",id:"linkToPageBlock.noSearchResults"})})}):(0,u.jsx)(Ii().Ay,{type:Ii().Oh.Vertical,initialFocus:0,sections:[{key:0,render:t=>(0,u.jsx)(et().A,{...t,title:(0,u.jsx)(m().sA,{defaultMessage:"Select a page",id:"linkToPageBlock.selectPrompt.withContents"}),loading:!e.ready}),items:t}]}),s=o.isPhone?{menuType:st().gu.ActionSheet,disableBottomPadding:!0,maxHeight:`calc(70vh - ${i}px)`}:{menuType:st().gu.Popup,width:460,maxHeight:"40vh"},(0,u.jsx)(Pt().A,{...s,children:a})}),[n,o.isPhone,i,e.ready,e.results,e.store]),s=(0,l.useCallback)((()=>{de().clear({environment:n}),r.current||(r.current=!0,Lt().createAndCommit({userAction:"LinkToPageBlock.handleBlur",environment:n,canUndo:!0,perform:t=>{Bo().TF({store:e.store,transaction:t})}}))}),[n,e.store]);return(0,u.jsx)(Ei,{loading:!e.ready,isOpen:!0,autocompleteStore:e.autocompleteStore,queryUpdateDebounce:gi().tu,inputPlaceholder:e.placeholder??t.formatMessage(Hi.inputPlaceholder),focus:!0,inputStyle:{...qi(),borderBottom:void 0},onBgClick:s,renderPopup:a})}function qi(){return{lineHeight:1.3}}const Ki=20;function Gi(e,t){const o=(0,w().Y0)(),i=(0,w().v3)(),r=(0,l.useRef)(null),a=(0,c().uB)(void 0,hi),s=(0,c().K8)((()=>a.state.query),[a]),{overriddenPublicShareLinkSpaceStore:d,furthestPublicShareAncestorId:p}=(0,n(477244).W)();return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"link_to_page",getNode:()=>r.current,getBlockStore:()=>e.store,handleCreated(){ce().A({environment:i,phase:jn().SelectionPhase.Editing}),de().setSelection({store:e.store,selection:void 0}),o.isMobile&&n(574012).A.onShow((()=>n(620689).pS(i)))}})),[o.isMobile,i,e.store]),(0,u.jsx)(_i().A,{request:s,performRequest:t=>async function(e){const{environment:t,query:n,store:o,overrideSpaceStore:i,furthestPublicShareAncestorId:r}=e,{currentSpaceStore:a,mainEditorCurrentBlockStore:s}=fi().default.state,l=(0,ji().i0)(o).find((e=>{let{permissionItem:t}=e;return(0,Vi().FP)(t)})),c=await mi().T.searchActions.load();if(a){if(n){return(await c.searchPageIds({environment:t,query:n,limit:Ki,spaceId:a.id,requireEditPermissions:!1,excludeTemplates:!1,source:"link_to_page_block",boostRecentlyViewedPages:!0})).results}return ni().xP(t).map((e=>e.id))}const d=r||(null==s?void 0:s.id);if(l&&d){return(await c.searchPageIdsInAncestor({environment:t,query:n,limit:Ki,ancestorId:d,excludeTemplates:!1,includePublicPagesWithoutExplicitAccess:!0,spaceId:null==i?void 0:i.id,source:"link_to_page_block"})).results}return[]}({query:t,store:e.store,environment:i,furthestPublicShareAncestorId:p,overrideSpaceStore:d}),debounce:gi().tu,render:(t,n,o)=>(0,u.jsx)(bi().A,{debugName:"LinkToPageBlock",capture:!0,children:(0,u.jsx)(Wi,{store:e.store,results:n,ready:o,autocompleteStore:a,placeholder:e.placeholder})})}))}const $i=l.memo(l.forwardRef(Gi),g().A),Yi=(0,d().wt)("loom",{viewBox:"0 0 190 190",svg:(0,u.jsx)("path",{d:"M189.611 84.2622H134.166L182.184 56.539L171.639 38.2692L123.621 65.9923L151.338 17.9781L133.068 7.42678L105.351 55.4409V0H84.2598V55.4462L56.5322 7.42678L38.2681 17.9728L65.9904 65.987L17.9723 38.2692L7.42658 56.5337L55.4447 84.2569H0V105.349H55.4394L7.42658 133.072L17.9723 151.342L65.9851 123.624L38.2628 171.638L56.5322 182.184L84.2545 134.165V189.611H105.346V134.17L133.063 182.184L151.332 171.638L123.61 123.619L171.628 151.342L182.174 133.072L134.161 105.354H189.6V84.2622H189.611ZM94.8055 123.491C78.9021 123.491 66.0116 110.601 66.0116 94.6968C66.0116 78.7929 78.9021 65.9021 94.8055 65.9021C110.709 65.9021 123.599 78.7929 123.599 94.6968C123.599 110.601 110.709 123.491 94.8055 123.491Z"})});function Qi(e,t){const n=(0,l.useRef)(null),o=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"loom",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:o,ref:n,store:e.store,iconSvg:Yi,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any Loom shareable link",id:"loomBlock.embed.caption"}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Loom",id:"loomBlock.placeholder"})}))}const Zi=l.memo(l.forwardRef(Qi),g().A),Xi=(0,d().wt)("maps",{viewBox:"0 0 160 164",svg:(0,u.jsxs)("g",{children:[" ",(0,u.jsx)("polyline",{points:"16 163.155 76.159 103 136.314 163.155 16 163.155"})," ",(0,u.jsx)("path",{d:"M91.1523093,12 C89.1061243,15.5558234 87.6020864,19.4206238 86.7688642,23.441 C84.8448642,33.084 86.5958642,43.241 91.3038642,51.836 C91.8382207,52.8588753 92.3925227,53.8704894 92.9644441,54.8718184 L0,147.839 L0,24.942 C0,17.799 5.796,12 12.942,12 L91.1523093,12 L91.1523093,12 Z M27.8186945,28.8787927 C20.9826945,31.9947927 15.9026945,38.8067927 15.1686945,46.3227927 C13.7376945,56.9777927 21.5856945,67.7337927 32.0706945,69.9057927 C40.5536945,71.9007927 50.5746945,68.4527927 54.8196945,60.5497927 C57.5256945,56.1347927 57.8816945,50.7917927 57.3626945,45.7587927 C50.5816945,45.0857927 43.5296945,45.6577927 36.6486945,45.4797927 C36.5946945,48.0237927 36.6096945,50.5677927 36.7256945,53.1037927 C40.8396945,53.0417927 44.9526945,53.0807927 49.0736945,53.0727927 C47.8296945,58.9497927 41.9446945,62.9007927 36.0456945,62.2127927 C27.0296945,62.0967927 20.6586945,51.4727927 24.4936945,43.3927927 C27.4236945,35.1807927 39.1766945,32.2347927 45.4326945,38.4437927 C47.4426945,36.5027927 49.4526945,34.5547927 51.4096945,32.5597927 C45.1536945,26.7907927 35.5196945,25.3527927 27.8186945,28.8787927 Z"})," ",(0,u.jsx)("path",{d:"M124.80036,20.6120969 C120.325021,21.6105482 116.569675,25.5689693 116.191987,30.2012296 C115.721991,34.5142624 118.24735,38.8911407 122.112695,40.7949674 C126.304191,43.0118678 131.806442,42.332644 135.307176,39.1288306 C138.574835,36.2380909 139.764822,31.2458343 138.057917,27.2058756 C136.037937,22.1505427 130.041845,19.2713414 124.80036,20.6120969 Z M129.322621,0 C138.754833,0.539994477 147.978584,5.14840888 153.696218,12.7298698 C157.440026,17.5182824 159.529236,23.4620677 160,29.4989291 L160,31.7396754 C159.779233,43.4418634 152.290848,53.047919 145.807068,62.1501336 C138.528681,72.435413 131.801058,83.6445291 129.937231,96.3213226 C129.438005,98.4697621 129.034302,102.445875 127.470333,102.445875 C124.80036,102.3677 123.210376,86.842958 120.185792,80.3707165 C116.755058,72.8300244 111.978183,66.0154787 107.125156,59.3463161 C104.17134,55.3471262 101.384446,51.2079378 99.0798538,46.7964445 C95.4583524,40.1849736 94.1114431,32.3719766 95.591428,24.9543602 C96.8052617,19.097497 99.8698458,13.6698602 104.112879,9.47298004 C109.830513,3.88303721 117.561972,0.499225663 125.538045,0 L129.322621,0 Z"})," ",(0,u.jsx)("path",{d:"M151.652474,72 L151.652474,148.672145 C135.535571,132.464045 127.553192,124.419378 127.705338,124.538145 C131.041338,123.277145 130.263338,119.369145 130.912338,116.576145 C133.335338,100.096145 142.081338,85.5241452 151.543338,72.1531452 C151.579693,72.102109 151.616072,72.0510607 151.652474,72 Z"})," ",(0,u.jsx)("path",{d:"M106.040648,74 L92,88.0399478 L125.952845,121.992793 C123.906994,113.374953 121.723258,103.970177 117.61803,95.9459594 C114.174293,88.3766869 110.811044,80.7912134 106.040648,74 Z"})," "]})}),Ji=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Map",id:"googleMapsBlock.embedButton.label"}});function er(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"maps",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:Xi,urlInputPlaceholder:"https://www.google.com/maps…",embedButtonText:n.formatMessage(Ji.embedButtonText),mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with places on Google Maps",id:"googleMapsBlock.embed.caption"}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a Google Map",id:"googleMapsBlock.placeholder"})}))}const tr=l.memo(l.forwardRef(er),g().A),nr=(0,d().wt)("miro",{viewBox:"0 0 32 32",svg:(0,u.jsx)("path",{d:"M13.75 20.895l1.761.359v-7.82l-1.76.344v7.117zm4.604-4.28v4.28l1.761.359V16.88c0-.993.56-1.441 1.432-1.607l1.015-.186v-1.835l-1.015.164c-1.935.44-3.193 1.073-3.193 3.197zm-7.446-.256c0-2.313-1.539-3.085-2.777-3.068-.984.014-1.785.423-2.265 1.047-.478-.685-1.325-1.068-2.016-1.068-.85 0-1.597.373-2.09.97v-.806L0 13.778v7.117l1.76.359v-4.895c0-.776.568-1.328 1.418-1.328.836 0 1.403.552 1.403 1.328v4.536l1.76.359v-4.895c0-.776.568-1.328 1.404-1.328.835 0 1.402.552 1.402 1.328v4.536l1.76.359v-4.895h.001zm17.176 5.059c2.356 0 3.916-1.636 3.916-4.081 0-2.446-1.56-4.067-3.916-4.067-2.446 0-4.082 1.62-4.082 4.067 0 2.445 1.636 4.08 4.082 4.08zm0-1.65c-1.366 0-2.281-.976-2.281-2.431 0-1.456.915-2.416 2.281-2.416 1.275 0 2.115.96 2.115 2.416 0 1.455-.84 2.43-2.115 2.43zm-13.416-7.552c.641 0 1.065-.445 1.065-1.11S15.31 10 14.668 10c-.665 0-1.11.44-1.11 1.106 0 .665.445 1.11 1.11 1.11"})}),or=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Miro",id:"miroBlock.embeds.button.label"}});function ir(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"miro",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:nr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Miro links with public access enabled",id:"miroBlock.embeds.caption"}),embedButtonText:n.formatMessage(or.embedButtonText),urlInputPlaceholder:"https://miro.com/app/board/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Miro",id:"miroBlock.placeholder"})}))}const rr=l.memo(l.forwardRef(ir),g().A),ar=(0,d().wt)("mixpanel",{viewBox:"0 0 101 106",svg:(0,u.jsx)("g",{children:(0,u.jsx)("path",{d:"M31.008 41.412h13.385c-3.342-2.09-4.593-5.021-6.272-10.454l-5.022-18.613C30.803 3.982 28.918.005 19.714.005H.484v5.022H3.21c5.639 0 6.273 2.091 7.952 8.364l4.387 16.315c2.297 7.952 5.861 11.706 15.476 11.706h-.016zm30.968 0h13.37c9.614 0 12.956-3.77 15.27-11.706l4.387-16.315c1.679-6.273 2.502-8.364 7.952-8.364h2.724V.006H86.655c-9.41 0-11.294 3.77-13.385 12.34l-5.02 18.611c-1.68 5.639-2.93 8.363-6.273 10.454zM44.393 58.963h17.584l-.001-17.55H44.393v17.55zM.484 100.369h19.23c9.204 0 11.088-3.976 13.385-12.34l5.022-18.611c1.679-5.434 2.93-8.364 6.272-10.455H31.008c-9.615 0-13.179 3.77-15.475 11.706l-4.388 16.315c-1.68 6.273-2.297 8.364-7.952 8.364H.484v5.021zm86.14 0h19.023v-5.021h-2.724c-5.433 0-6.273-2.091-7.952-8.364L90.583 70.67c-2.296-7.952-5.639-11.706-15.27-11.706H61.976c3.343 2.091 4.546 4.816 6.225 10.455l5.022 18.612c2.09 8.57 3.975 12.339 13.385 12.339h.015z"})})}),sr=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Mixpanel",id:"mixpanelBlock.embeds.button.label"}});function lr(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"mixpanel",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:ar,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Mixpanel projects",id:"mixpanelBlock.embeds.caption"}),embedButtonText:n.formatMessage(sr.embedButtonText),urlInputPlaceholder:"https://mixpanel.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a Mixpanel project",id:"mixpanelBlock.placeholder"})}))}const cr=l.memo(l.forwardRef(lr),g().A);var dr=()=>n(405789),ur=()=>n(269429),pr=()=>n(565304),mr=()=>n(196310);const gr=(0,d().wt)("replit",{viewBox:"0 0 793.8 871.5",svg:(0,u.jsx)("g",{children:(0,u.jsx)("path",{d:"M396.9 356.1H227.2c-16.6 0-30-13.4-30-30v-99.8c0-16.6 13.4-30 30-30h139.7c16.6 0 30 13.4 30 30v129.8zm169.7 159.7H396.9V356.1h169.7c16.5 0 29.9 13.4 29.9 29.9v99.8c0 16.6-13.4 30-29.9 30zM366.9 675.6H227.2c-16.5 0-29.9-13.4-29.9-29.9v-99.8c0-16.5 13.4-29.9 29.9-29.9h169.7v129.8c0 16.3-13.4 29.8-30 29.8z"})})}),fr=(0,m().YK)({embedButtonText:{defaultMessage:"Embed a repl",id:"replitBlock.embeds.button.label"}});function vr(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"replit",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:gr,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Replit.",id:"replitBlock.embeds.caption"}),embedButtonText:n.formatMessage(fr.embedButtonText),urlInputPlaceholder:"https://replit.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a repl",id:"replitBlock.placeholder"})}))}const hr=l.memo(l.forwardRef(vr),g().A),_r=(0,d().wt)("sketch",{viewBox:"0 0 46 46",svg:(0,u.jsx)("g",{fillRule:"evenodd",children:(0,u.jsx)("path",{d:"M23.0831783 10.0045301l8.1450351.8960958c.2099814.0231017.4008968.1324906.5270123.3019626l6.0917147 8.1859511c.2137793.2872733.1982297.6847539-.0373384.9544486L23.4296391 36.806161c-.2072579.2372831-.5676296.2616233-.8049127.0543654l-.0543655-.0543654L8.19039805 20.3429882c-.23556813-.2696947-.25111774-.6671753-.03733843-.9544486l6.09171468-8.1859511c.1261155-.169472.3170309-.2788609.5270123-.3019626l8.1450351-.8960958a.76060447.76060447 0 01.1663566 0zm2.0141776 2.4229231c-.0693405-.0648437-.1764661-.0687976-.2504897-.0092454-.081512.0655766-.0939018.1841651-.0276733.2648747l3.8573181 4.7007387c.055083.0671271.085151.1509825.085151.2374739 0 .207984-.1702805.3765884-.3803321.3765884H17.6186701c-.0873512 0-.1720402-.0297721-.2398346-.0843129-.163024-.1311532-.1878035-.3683301-.0553465-.5297494l3.8573181-4.7007387c.0601442-.073295.0561509-.1793661-.0093373-.2480242-.0721132-.0756035-.1924706-.0790085-.2688257-.0076051l-5.750016 5.3771171c-.0774384.0724164-.1819972.1093609-.2882425.1018466-.2095178-.0148182-.3672335-.1950067-.352268-.4024622l.2753824-3.8174045c.0064096-.0888512-.0509385-.1699933-.1374402-.1944648-.1009848-.0285688-.206239.0293302-.2350918.129321L13.1553109 17.98681c-.0869135.3012032-.3194364.539875-.62031.6367138l-2.76499194.8899366c-.07834118.0252148-.13137885.0975058-.13137885.1790711 0 .1039921.08514024.1882942.19016605.1882942h2.66553224c.3250892 0 .6276464.1644528.8021788.4360184L20.3459621 31.28552c.0777639.1209976.2347663.165079.3651002.1025088.1417556-.0680534.2009545-.2370061.1322245-.3773663l-5.0526479-10.3185107c-.0376144-.0768161-.0571558-.1610746-.0571558-.2464434 0-.3119761.2554207-.5648827.5704981-.5648827h13.3920376c.0862174 0 .1713136.0193492.2488932.0565933.2835111.1361069.401909.4740123.2644491.7547328l-5.0526479 10.3185107c-.0631922.129051-.0186726.2845081.1035279.3615065.1329093.0837462.3092182.0449521.3937968-.086649l7.0494549-10.9686759c.1745324-.2715656.4770896-.4360184.8021788-.4360184h2.5849257c.0818532 0 .1545231-.0518618.1804073-.1287503.0332121-.0986555-.0206353-.2052903-.1202715-.2381755l-2.6912281-.888246c-.2977515-.0982735-.5273437-.3357047-.6135671-.6345159l-1.2609059-4.3697316c-.0247148-.0856502-.1066636-.1424338-.196398-.1360873-.1047589.0074091-.1836168.0975033-.176134.2012311l.2753824 3.8174045c.0075889.1051994-.0297228.2087291-.1028592.2854053-.1442263.1512071-.3849411.158017-.5376513.0152103z"})})}),br=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Sketch",id:"sketchBlock.embeds.button.label"}});function yr(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"sketch",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:i,ref:o,store:e.store,iconSvg:_r,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Sketch links with Public Link Access enabled",id:"sketchBlock.embeds.caption"}),embedButtonText:n.formatMessage(br.embedButtonText),urlInputPlaceholder:"https://sketch.com/…",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Sketch",id:"sketchBlock.placeholder"})}))}const Sr=l.memo(l.forwardRef(yr),g().A),wr={SlideBlock:new(i().O2)("SlideBlock",(async()=>await n.e(52009).then(n.bind(n,505902))))},kr=(0,i().jQ)(wr.SlideBlock,(e=>e.default));var Ir=()=>n(993553),xr=()=>n(687519),Ar=()=>n(90302),Cr=()=>n(689094),Tr=()=>n(197959),Mr=()=>n(722101),Pr=()=>n(898286),Br=()=>n(94953),Rr=()=>n(108944),Er=()=>n(953418),Dr=()=>n(695625),Nr=()=>n(756279),Lr=()=>n(65269),Or=()=>n(17090),Ur=()=>n(439264),Fr=()=>n(614505),Vr=()=>n(16006),jr=()=>n(2143),zr=()=>n(59822);function Hr(e){const t=(0,m().tz)(),n=(0,w().v3)(),o=(0,k().DP)(),i=(0,k().IS)((e=>({baseStyle:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},mobileStyle:$r(e),desktopStyle:Gr(e),scrollerOverlayStyle:Yr(e)})),[]),r=(0,c().uB)(void 0,Or().A),a=(0,l.useRef)(null);return(0,u.jsxs)(V().s,{allowSelectionWithin:!0,style:{...n.device.isMobile?i.mobileStyle:i.desktopStyle,...i.baseStyle},children:[(0,u.jsx)(jr().H,{role:"tablist","aria-label":t.formatMessage(Kr.tabListLabel),type:Nr().A.X,ref:a,store:r,children:(0,u.jsx)(Ur().Ay,{disabled:e.disabled,direction:"horizontal",keys:e.tabs.map((e=>e.id)),renderKey:(t,n)=>(0,u.jsx)(Wr,{index:n,...e}),onDrop:(t,o)=>function(e){const{environment:t,parentStore:n,onDropArgs:o,newTabs:i}=e;Lt().createAndCommit({userAction:"TabBlockMenu.handleTabReorder",environment:t,canUndo:!0,perform:e=>{const{key:t,endPosition:r}=o,a=n.getContentStores().find((e=>e.id===t)),s=i[r-1],l=n.getContentStores().find((e=>e.id===s));a&&Mr().Yb({parentStore:n.getContentStore(),afterStore:l,currentStore:a,transaction:e})}})}({environment:n,newTabs:t,parentStore:e.parentStore,onDropArgs:o}),disableHorizontalEdgeScroll:!1})}),(0,u.jsx)(zr().A,{store:r,rightOverlayStyle:i.scrollerOverlayStyle}),!e.disabled&&(0,u.jsx)($e().p,{"aria-label":t.formatMessage(Kr.addTab),style:{height:28,width:28,marginTop:6,display:"flex",justifyContent:"center"},onClick:()=>{!function(e,t,n){var o;const{performResult:i}=Lt().createAndCommit({userAction:"TabBlockMenu.newTab",environment:e,canUndo:!0,perform:n=>Ar().Hm({environment:e,store:t,transaction:n})}),r=()=>{const e=t.getContentStores(),n=e[e.length-1];Pr().U({blockStore:i,renderDelete:!0,originRect:n?Dr().T.getRectFromStore(n):void 0})},a=null===(o=n.current)||void 0===o?void 0:o.getNode();a?(Er().VG({element:a,environment:e,options:{left:a.scrollWidth,behavior:"smooth"}}),Er().gT(a,r)):r()}(n,e.parentStore,a)},children:(0,Cr().W)({fill:o.mediumIconColor,width:16,height:16})})]})}function Wr(e){const t=(0,w().v3)(),n=(0,m().tz)(),{index:o,parentStore:r,selectedIndex:a,tabs:s}=e,l=s[o],d=(0,k().IS)((e=>({selectedTab:{...{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},position:"relative"},tab:{paddingTop:6,paddingBottom:12,whiteSpace:"nowrap",minWidth:0,flexShrink:0,fontWeight:500},border:Qr(e)})),[]),p=(0,c().K8)((()=>{const e=Br().A.getFirstSelectedDiscussionId();if(!e)return!1;const t=ki().cc.createChildStore(l,{table:Tr().$Y,id:e,spaceId:l.getSpaceId()});return(0,Rr().g7)(t).map((e=>e.id)).includes(l.id)}),[l]),{device:g}=t,f=a===o,v=o===s.length-1,h=0===o,_=s.length,{value:b}=(0,i().fJ)(tn().VI.duplicateActions);return(0,u.jsx)(un().A,{store:l,analyticsName:"tab",canSelect:!0,canDrag:!1,canDropBelow:!1,canDropLeft:!h,canDropAbove:!1,canNativeDropBelow:!1,canNativeDropLeft:!h,canNativeDropRight:!v,canDropOnto:!0,dropzoneShouldNeverUseOrigin:!0,dropzoneMustBeWithinHorizontalBound:!0,canInsertAbove:!h,canDropRight:!v,canInsertBelow:!v,shouldShowHalo:!0,shouldShowDropZone:!0,shouldShowParentHalo:!0,dropzoneGap:10,onSelectableDrop:e=>{const{droppedDirection:n,droppedStores:o,duplicate:i}=e;Lt().createAndCommit({userAction:"TabBlockMenu.dropOntoTab",environment:t,canUndo:!0,perform:e=>{en().MS({environment:t,targetParentStore:l.getContentStore(),targetStore:l,droppedDirection:n,droppedStores:o,duplicate:i,transaction:e,duplicateActions:b})}})},onRemove:()=>{!function(e){const{environment:t,parentStore:n,tabStore:o,index:i}=e;Lt().createAndCommit({userAction:"TabBlockMenu.handleRemoveTab",environment:t,canUndo:!0,perform:e=>{const r=n.getContentStores();if(1===r.length){const t=n.getRecordStoreUIParent();"block"!==(null==t?void 0:t.table)&&"space"!==(null==t?void 0:t.table)||null==t||!t.valueIs(Lr()._)||Mr().TF({parentStore:t,childToRemoveStore:n,transaction:e})}else{const e=i<r.length-1?r[i+1]:r[i-1];Ar().cN({store:n,id:e.id,currentUserId:t.currentUser.id})}Mr().TF({parentStore:n.getContentStore(),childToRemoveStore:o,transaction:e})}})}({environment:t,parentStore:r,tabStore:l,index:o})},children:(0,u.jsxs)("div",{style:{...f?d.selectedTab:d.tab},children:[(0,u.jsxs)($e().p,{role:"tab","aria-selected":f,"aria-controls":f?e.contentAriaId:void 0,"aria-posinset":o+1,"aria-setsize":_,id:f?e.selectedTabAriaId:void 0,style:{fontSize:16},onClick:()=>function(e,t,n){if(e.onChange(t),n&&!e.disabled){const n=e.parentStore.getContentStores()[t];Pr().U({blockStore:n,renderDelete:!0})}}(e,o,f),disabled:e.readOnly,mobileFeedback:g.isMobile,hovered:p,isGray:!f,children:[(0,u.jsx)(qr,{store:l}),(0,u.jsx)(Vr().A,{store:l,placeholder:n.formatMessage(Kr.untitledTab)})]}),f&&(0,u.jsx)("div",{style:d.border})]},o)},o)}function qr(e){const{store:t}=e,{icon:n,isEmptyPage:o}=(0,c().K8)((()=>({icon:t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]);return n?(0,u.jsx)(Fr().B,{disabled:!0,icon:n,isEmptyPage:o,size:20,style:{marginRight:6}}):null}const Kr=(0,m().YK)({untitledTab:{id:"tabMenuBlock.title.placeholder",defaultMessage:"Untitled"},addTab:{id:"tabMenuBlock.addTab",defaultMessage:"Add tab"},tabListLabel:{defaultMessage:"Tab block",id:"tabBlockMenu.tabListLabel"}});function Gr(e){return{display:"flex",fontSize:14,width:"100%",paddingLeft:8,paddingRight:8,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:1}}function $r(e){return{display:"flex",fontSize:16,width:"100%",paddingTop:2,paddingLeft:16,paddingRight:16,boxShadow:`0 1px 0 ${e.regularDividerColor}`,position:"relative",zIndex:2,height:44,background:e.popoverBackground}}function Yr(e){return{background:e.regularDividerColor,right:28,opacity:1,marginTop:6,marginBottom:12,width:1}}function Qr(e){return{borderBottom:`2px solid ${e.text.primary}`,position:"absolute",bottom:0,left:0,right:0}}function Zr(e,t){const{store:o,style:i,disabled:r,disableCommentMenu:a,hideContent:s}=e,d=(0,w().v3)(),p=(0,f().pW)(o,!0),m=(0,k().IS)((()=>({root:{paddingLeft:Ne().nE.paddingLeft,flex:1,...p,...i},tabContainer:{display:"flex",flexDirection:"column"}})),[i,p]);(0,l.useEffect)((()=>{Ar().MB({blockId:o.id,currentUserId:d.currentUser.id})}),[d,o]);const g=(0,l.useId)(),v=(0,l.useId)(),h=(0,c().K8)((()=>o.getContentStores()),[o]),_=(0,c().K8)((()=>Ar().TE(o)),[o]),b=(0,f().bx)(o,r),y=(0,c().K8)((()=>n(744705).X(o)),[o]),S=(0,l.useRef)(null),I=(0,u.jsxs)("div",{style:m.root,ref:S,children:[(0,u.jsx)("div",{style:m.tabContainer,children:(0,u.jsx)(Hr,{contentAriaId:g,selectedTabAriaId:v,disabled:!b,parentStore:o,tabs:h,selectedIndex:_,onChange:e=>Ar().Fr({store:o,index:e,currentUserId:d.currentUser.id})})}),(0,u.jsx)("div",{role:"tabpanel",id:g,"aria-labelledby":v,style:{position:"relative"},children:(0,u.jsx)(n(378765).A,{loaded:y,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column"},children:(0,u.jsx)(Xr,{...e})})}),(0,u.jsx)(fe().A,{disableCommentMenu:a,hideContent:s,store:o,hideIfSidebarOrMarginCommentsVisible:!0})]});return(0,f().NW)(o,t,(0,l.useMemo)((()=>({renderedType:"tab",getNode:()=>S.current,getBlockStore:()=>o})),[o]),I)}function Xr(e){const{store:t,disabled:n}=e,{selectedContentStore:o,contentStore:i}=(0,c().K8)((()=>{const e=Ar().Qy(t),n=e.getContentStore();return{selectedContentStore:e,contentStore:n}}),[t]),r=(0,k().IS)((()=>({selectable:{display:"flex",flexDirection:"column"}})),[]),a=(0,f().bx)(t,n);return(0,u.jsx)(un().A,{store:o,analyticsName:"page_content",canSelect:!1,canDrag:!1,isListContainer:!0,style:r.selectable,children:(0,u.jsx)(q().A,{store:i,disabled:n,disableContent:!1,emptyPlaceholder:(0,u.jsx)(Jr,{store:o,canEdit:a})})},o.id)}function Jr(e){const{store:t,canEdit:n}=e,o=(0,k().IS)((e=>({button:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:e.text.tertiary,...Ne().nE,marginTop:2},text:{color:e.text.tertiary}})),[]),i=(0,w().v3)(),r=(0,l.useCallback)((()=>{Lt().createAndCommit({userAction:"TabBlock.handlePlaceholderClick",environment:i,canUndo:!0,perform:e=>{Ar()._N({environment:i,store:t,transaction:e})}})}),[t,i]);return(0,u.jsx)(z().A,{style:o.button,onClick:r,disabled:!n,children:(0,u.jsx)("span",{style:o.text,children:(0,u.jsx)(m().sA,{defaultMessage:"Empty tab. Click or drop blocks inside.",id:"tabBlock.emptyBlock.placeholderText"})})})}const ea=l.memo(l.forwardRef(Zr),g().A);var ta=()=>n(125958),na=()=>n(134103),oa=()=>n(42425);function ia(e,t){const o=(0,w().v3)(),i=(0,w().Y0)(),r=(0,l.useRef)(null),a=(0,f().bx)(e.store,e.disabled),s=e.disabled||!a,{navigableAncestorStore:c,headerStores:d}=(0,n(960701).d)({parentStore:e.store}),p=(0,k().IS)((e=>({root:{position:"relative"},placeholder:{...sa,paddingTop:Ne().nE.paddingTop,paddingBottom:Ne().nE.paddingBottom,color:e.text.tertiary,...!s&&i.isMobile&&{marginRight:36}},actionMenuButton:{position:"absolute",top:3,right:6}})),[i.isMobile,s]),g=(0,u.jsx)("div",{style:p.placeholder,children:(0,u.jsx)(m().sA,{defaultMessage:"Add headings to create a table of contents. <linktohelpbutton>Learn more</linktohelpbutton>.",id:"tableOfContentsBlock.placeholder",values:{linktohelpbutton:e=>(0,u.jsx)(_t().A,{href:(0,n(836251).xS)("guides.tableOfContents"),external:!0,onClick:()=>n(148024).FH(o,{from:"table_of_contents_placeholder"}),children:e})}})}),v=(0,u.jsxs)(V().s,{allowSelectionWithin:!0,style:p.root,ref:r,children:[d.map((t=>(0,u.jsx)(aa,{headerStore:t,index:d.indexOf(t),headerStores:d,store:e.store,navigableAncestorStore:c,style:e.style},t.id))),0===d.length&&g,!s&&i.isMobile&&(0,u.jsx)(me().A,{style:p.actionMenuButton,tooltipContent:(0,u.jsx)(m().sA,{defaultMessage:"More actions…",id:"tableOfContentsBlock.mobileActionMenu.button.label"}),store:e.store,fadeIn:!1})]});return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"table_of_contents",getNode:()=>r.current,getBlockStore:()=>e.store})),[e.store]),v)}const ra=l.memo(l.forwardRef(ia),g().A);function aa(e){const t=(0,c().K8)((()=>ta().A({headerBlockId:e.headerStore.id,headerBlockIds:e.headerStores.map((e=>e.id)),index:e.index,getRecordModel:e.store.getRecordModel})),[e.headerStore.id,e.headerStores,e.index,e.store.getRecordModel]),n=(0,f().pW)(e.store),o=(0,k().IS)((()=>({container:n,innerHeader:{...sa,display:"flex",alignItems:"center",marginLeft:oa().pU*t,paddingTop:2*Ne().nE.paddingTop,paddingBottom:2*Ne().nE.paddingBottom}})),[n,t]),i=(0,na().t)({scrollToBlockId:e.headerStore.id,pageStore:e.navigableAncestorStore});return e.navigableAncestorStore?(0,u.jsx)("div",{style:{...o.container,...e.style},children:(0,u.jsx)(_e().A,{...i,external:!1,children:(0,u.jsx)("div",{style:o.innerHeader,children:(0,u.jsx)(Vr().A,{store:e.headerStore,shouldWrap:!1,underline:!0})})})}):null}const sa={paddingRight:Ne().nE.paddingRight,paddingLeft:Ne().nE.paddingLeft,fontSize:14,lineHeight:1.3};var la=()=>n(718725),ca=()=>n(178298),da=()=>n(697868),ua=()=>n(289068);const pa=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Tweet",id:"tweetBlock.embedTweet.button.label"}});function ma(e,t){const o=(0,m().tz)(),i=(0,l.useRef)(null),r=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"tweet",getNode:()=>{const e=i.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:r,ref:i,store:e.store,iconSvg:n(701685).X,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with links to Tweets",id:"tweetBlock.linkInput.caption"}),embedButtonText:o.formatMessage(pa.embedButtonText),urlInputPlaceholder:"https://twitter.com/… or https://x.com/",children:(0,u.jsx)(m().sA,{defaultMessage:"Embed a Tweet from X",id:"tweetBlock.placeholder"})}))}const ga=l.memo(l.forwardRef(ma),g().A),fa=(0,d().wt)("typeform",{viewBox:"0 0 30 31",svg:(0,u.jsx)("path",{d:"M15.027 30.53c-4.294-.036-8.467-2.247-11.47-5.222C.553 22.333-.09 19.78.009 15.654.107 11.53 1.2 7.81 4.047 4.68 6.895 1.55 10.121.11 14.25.006c4.129-.103 7.291 1.046 10.44 4.156 3.15 3.11 5.242 7.127 5.31 11.392.067 4.266-1.978 6.94-4.972 9.936-2.994 2.995-5.706 5.077-10 5.04zm-4.891-19.66h3.818v10.304h1.903V10.87h3.818V9.071h-9.54v1.798z"})});function va(e,t){const n=(0,l.useRef)(null),o=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"typeform",getNode:()=>{const e=n.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,blockResizerStore:o,ref:n,store:e.store,iconSvg:fa,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with any public Typeform link",id:"typeformBlock.embed.caption"}),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Typeform",id:"typeformBlock.placeholder"})}))}const ha=l.memo(l.forwardRef(va),g().A),_a=(0,d().wt)("video",{viewBox:"0 0 30 30",svg:(0,u.jsx)("path",{d:"M2,2v26h26V2H2z M26,6h-2V4h2V6z M22,14H8V4h14V14z M6,10H4V8h2V10z M6,12v2H4v-2H6z M6,16v2H4v-2H6z M6,20v2H4v-2H6z M8,16 h14v10H8V16z M24,20h2v2h-2V20z M24,18v-2h2v2H24z M24,14v-2h2v2H24z M24,10V8h2v2H24z M6,4v2H4V4H6z M4,24h2v2H4V24z M24,26v-2h2v2 H24z"})}),ba=(0,m().YK)({urlPlaceholder:{defaultMessage:"Paste the video link…",id:"videoBlock.linkInput.placeholder"},embedButtonText:{defaultMessage:"Embed video",id:"videoBlock.embedVideo.button.label"}});function ya(e,t){const n=(0,m().tz)(),o=(0,w().v3)(),i=(0,l.useRef)(null),r=(0,c().uB)(e.blockResizerStore,v().A),a=(0,f().bx)(e.store,e.disabled);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"video",getNode:()=>i.current,getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)("div",{ref:i,children:(0,u.jsx)(ti().V,{type:oi().Rt,dropTargetKey:`video-block-${e.store.id}`,onDropFile:a?t=>{if("invalidFileDrop"===t.type)return void ei().D6({label:(0,u.jsx)(m().sA,{id:"videoBlock.invalidVideoDrop.wrongTypeErrorMessage",defaultMessage:"Sorry, that file type is not supported."})});const n=ni().y0(o);Jo().QM({environment:o,store:e.store,file:t.file,pageWidth:n,preferredType:e.store.getType()})}:()=>{},children:(0,u.jsx)(h().Ay,{...e,blockResizerStore:r,store:e.store,iconSvg:_a,preserveScale:!0,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"},{type:"file",videoUpload:!0}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with YouTube, Vimeo, and more",id:"videoBlock.linkInput.caption"}),embedButtonText:n.formatMessage(ba.embedButtonText),urlInputPlaceholder:n.formatMessage(ba.urlPlaceholder),children:(0,u.jsx)(m().sA,{defaultMessage:"Embed or upload a video",id:"videoBlock.placeholder"})})})}))}const Sa=l.memo(l.forwardRef(ya),g().A),wa=(0,d().wt)("whimsical",{viewBox:"0 0 32 32",svg:(0,u.jsxs)("g",{children:[(0,u.jsx)("path",{opacity:".8",fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#A7A6A2"}),(0,u.jsx)("mask",{id:"a",maskUnits:"userSpaceOnUse",x:"3",y:"7",width:"19",height:"19",children:(0,u.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.807 9.772a.497.497 0 00-.705 0L5.76 16.146a.502.502 0 000 .708l6.343 6.374c.195.195.51.195.705 0l6.343-6.374a.503.503 0 000-.708l-6.343-6.374zm.352-2.479a.993.993 0 00-1.41 0l-8.457 8.499a1.005 1.005 0 000 1.416l8.458 8.499a.993.993 0 001.41 0l8.457-8.499c.39-.391.39-1.025 0-1.416l-8.458-8.499z",fill:"#fff"})}),(0,u.jsx)("g",{filter:"url(#filter0_d)",mask:"url(#a)",children:(0,u.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#000",fillOpacity:".01"})}),(0,u.jsx)("path",{d:"M18.84 7.293a.993.993 0 011.41 0l8.458 8.499c.39.39.39 1.025 0 1.416l-8.458 8.499a.993.993 0 01-1.41 0l-8.457-8.499a1.005 1.005 0 010-1.416l8.457-8.499z",fill:"#A7A6A2"}),(0,u.jsx)("defs",{children:(0,u.jsxs)("filter",{id:"filter0_d",x:"8.055",y:"4.964",width:"22.98",height:"23.071",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,u.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,u.jsx)("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,u.jsx)("feOffset",{}),(0,u.jsx)("feGaussianBlur",{stdDeviation:"1.018"}),(0,u.jsx)("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.6 0"}),(0,u.jsx)("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow"}),(0,u.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow",result:"shape"})]})})]})}),ka=(0,m().YK)({embedButtonText:{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.embeds.button.label"}});function Ia(e,t){const n=(0,m().tz)(),o=(0,l.useRef)(null),i=(0,c().uB)(e.blockResizerStore,v().A);return(0,f().NW)(e.store,t,(0,l.useMemo)((()=>({renderedType:"whimsical",getNode:()=>{const e=o.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),(0,u.jsx)(h().Ay,{...e,ref:o,store:e.store,iconSvg:wa,mediaMenuCurrentTab:"embed",mediaMenuTabs:[{type:"embed"}],mediaMenuEmbedCaption:(0,u.jsx)(m().sA,{defaultMessage:"Works with Whimsical links with Public Link Access enabled",id:"whimsicalBlock.embeds.caption"}),embedButtonText:n.formatMessage(ka.embedButtonText),urlInputPlaceholder:"https://whimsical.com/…",blockResizerStore:i,children:(0,u.jsx)(m().sA,{defaultMessage:"Embed Whimsical",id:"whimsicalBlock.placeholder"})}))}const xa=l.memo(l.forwardRef(Ia),g().A);let Aa;function Ca(e){const t=e.getType();if(t)return"collection_view"===t&&e.recordStoreParentDiffersFromPersistedParent()?o().A:(Aa||(Aa={text:la().A,encrypted_text:la().A,image:li,video:Sa,bookmark:Pe,drive:ro,audio:oe,tweet:ga,gist:Ko,maps:tr,framer:Ho,invision:pi,file:Fo().A,page:ur().A,to_do:ca().A,toggle:da().Ay,bulleted_list:Ue().A,numbered_list:dr().A,code:Gt,factory:No,button:Fe().A,divider:Hn,column_list:En,copy_indicator:Ln,embed:h().Ay,breadcrumb:Oe,equation:xo,header:Go().A,sub_header:Ir().A,sub_sub_header:xr().A,quote:mr().A,collection_view:Xt().dN,collection_view_page:o().A,link_to_page:$i,link_to_collection:Fi,figma:Uo,loom:Zi,codepen:Zt,typeform:ha,column:mn,pdf:pr().A,callout:Ve().A,table_of_contents:ra,whimsical:xa,miro:rr,abstract:y,sketch:Sr,excalidraw:Mo,alias:ee().oA,transclusion_container:ua().SM,transclusion_reference:ua().CF,replit:hr,external_object_instance:Po().A,external_object_instance_page:void 0,table:s().K,table_row:s().W,tab:ea,hex:Zo,deepnote:Vn,mixpanel:cr,ai_block:J,drawing:qn,slide:kr,personal_home_page:void 0,form:void 0,post:void 0,workflow:void 0,transcription:a,person_profile:void 0}),Aa[t])}},344300:(e,t,n)=>{n.r(t),n.d(t,{readAndCacheOfflinePages:()=>r,readAndCacheOfflinePagesMemo:()=>l,tellOtherTabsToReadAndCacheOfflinePagesThrottled:()=>s});var o=()=>n(496603),i=()=>n(670631);const r=o().nF((async function(e){const{userId:t,persistedRecordCache:n,tellOtherTabsToUpdate:o}=e;o&&a();const r={},s=await n.getOfflinePages({userId:t});for(const[i,a]of s)r[i]=a;i().A.setState({...i().A.state,offlinePages:r})}),1e3,{leading:!0});function a(){i().A.setState({...i().A.state,shouldPublishUpdate:!0})}const s=o().nF(a,1e3,{leading:!0}),l=o().Bj(r,(e=>[e.userId,String(e.tellOtherTabsToUpdate)].join("-")))},345913:(e,t,n)=>{n.d(t,{LS:()=>E,Ne:()=>R,Ys:()=>N,aR:()=>U,iN:()=>P,oD:()=>B,tP:()=>L,tz:()=>D});n(944114),n(581454);var o=()=>n(584262),i=()=>n(624090),r=()=>n(416845),a=()=>n(734410),s=()=>n(179034),l=()=>n(161479),c=()=>n(287882),d=()=>n(979340),u=()=>n(857783),p=()=>n(989423),m=()=>n(972435),g=()=>n(869562),f=()=>n(718807),v=()=>n(792415),h=()=>n(351360),_=()=>n(666429),b=()=>n(449506),y=()=>n(901389),S=()=>n(44729),w=()=>n(507785),k=()=>n(435009),I=()=>n(436572),x=()=>n(812182),A=()=>n(751156),C=()=>n(755199),T=()=>n(664713);const M=(0,n(959013).YK)({deletePageConfirmationMessage:{id:"trashActions.deletePagePermanentlyDialog.prompt",defaultMessage:"Are you sure you want to delete this page from Trash?"},deletePageConfirmationButton:{id:"trashActions.deletePagePermanentlyDialog.confirmDeleteButton.label",defaultMessage:"Delete page"},permanentlyDeleteFailedToast:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.toast",defaultMessage:"Failed to delete, please try again later."},permanentlyDeletePermissionsFailure:{id:"trashActions.deletePagePermanentlyDialog.actionFailed.permissions",defaultMessage:"You do not have sufficient permissions to delete this page from Trash."},purgePageConfirmationMessage:{id:"trashActions.purgePageDialog.message",defaultMessage:"Are you sure you want to permanently delete this page?"},purgePageConfirmationDescription:{id:"trashActions.purgePageDialog.description",defaultMessage:"You won't be able to view or restore it."},purgePageConfirmationButton:{id:"trashActions.purgePageDialog.confirm",defaultMessage:"Permanently delete"},purgeFailedToast:{id:"trashActions.purgePageDialog.actionedFailed",defaultMessage:"Failed to permanently delete, please try again later."},restorationFailedToast:{id:"trashActions.restoreDeletedFromTrashPage.actionFailed.toast",defaultMessage:"Failed to restore page, please try again later."},trashDeletionToast:{defaultMessage:"Starting September 19th, pages in Trash will be automatically deleted after {duration}",id:"trashDeletionToast.body"}});async function P(e){const{environment:t,block:n,spaceId:i,from:r,restoreWithoutNavigation:a}=e;f().Ay.state.excludePages.add(n.id),f().Ay.emit(),await b().callApi({eventName:"restoreBlock",environment:t,data:{pointer:{table:s().ev,id:n.id,spaceId:i}}});const l=await w().Li({environment:t,request:{type:"block-space",blockId:n.id,spaceId:i},ignoreLocalResult:!0});v().A.setState({publicPageData:l}),p().vd(t,"restore_trash_page",{from:r}),Boolean(a)||(u().uK({environment:t,store:n,pageVisitSource:o().y8.Restore}),t.device.isMobile&&g().close())}function B(e){const{environment:t,blocks:n,transaction:o,permanentlyDelete:i=!1}=e;for(const r of n)S().s8({blockStore:r,transaction:o});o.postSubmitCallbacks.push((async e=>{e||await b().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:n.map((e=>({id:e.id,spaceId:(0,l().e)(e.pointer.spaceId)}))),permanentlyDelete:i}})}))}function R(e){const{environment:t,handleSuccess:n,blocks:o}=e;p().vd(t,"open_delete_trash_page_modal"),y().ui({message:m().A.formatMessage(M.deletePageConfirmationMessage),showCancel:!0,keepFocus:!1,items:[{label:m().A.formatMessage(M.deletePageConfirmationButton),color:"red",onAccept:async()=>{await E(e),null==n||n(o)}}],handleCancel:()=>{p().vd(t,"cancel_delete_trash_page")}})}async function E(e){const{blocks:t,environment:n,from:o}=e,{currentSpaceStore:i}=h().default.state,a=e.environment.currentUser.id;if(i&&a){await b().callApi({eventName:"deleteBlocks",environment:e.environment,data:{blocks:t.map((e=>({id:e.id,spaceId:(0,l().e)(e.pointer.spaceId)}))),permanentlyDelete:!0}}).then((e=>{if("failed"===e.type)throw function(e){let t=M.permanentlyDeleteFailedToast;(0,r().io_)(e)&&(t=M.permanentlyDeletePermissionsFailure);I().D6({label:m().A.formatMessage(t),durationMs:_().LX})}(e.body),e.error})),p().vd(n,"delete_trash_page",{from:o});for(const e of t)f().Ay.state.excludePages.add(e.id),f().Ay.emit();await T().Z({environment:n,spaceId:i.id,userId:a}),k().VP({environment:e.environment,blocks:t})}}function D(e){const{blockStore:t,handleSuccess:n,environment:o}=e;y().ui({message:m().A.formatMessage(M.purgePageConfirmationMessage),description:m().A.formatMessage(M.purgePageConfirmationDescription),showCancel:!0,keepFocus:!1,items:[{label:m().A.formatMessage(M.purgePageConfirmationButton),color:"red",onAccept:async()=>{await b().callApi({eventName:"purgeBlockTree",environment:o,data:{pointer:t.pointer}}).then((e=>{if("failed"===e.type)throw function(){const e=M.purgeFailedToast;I().D6({label:m().A.formatMessage(e),durationMs:_().LX})}(),e.error;null==n||n(t.id)}))}}],handleCancel:()=>{}})}async function N(e){"failed"!==(await b().callApi({eventName:"restoreBlock",environment:e.environment,data:{pointer:{id:e.blockStore.id,table:s().ev,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_to_private"}})).type?(p().vd(e.environment,"restore_trash_page",{from:e.from,destination:"private_pages"}),e.navigateToPage&&u().uK({environment:e.environment,store:e.blockStore,pageVisitSource:o().y8.Restore})):O()}async function L(e){"failed"!==(await b().callApi({eventName:"restoreBlock",environment:e.environment,data:{pointer:{id:e.blockStore.id,table:s().ev,spaceId:e.spaceId},deletedFromTrashRestorationOption:"restore_original_access"}})).type?p().vd(e.environment,"restore_trash_page",{from:e.from,destination:"original_location"}):O()}function O(){const e=M.restorationFailedToast;I().D6({label:m().A.formatMessage(e),durationMs:_().LX})}function U(e){var t;let{experimentStore:n,currentSpaceStore:o,currentUserSettingsStore:r,intl:s,environment:l}=e;const u=new Date>=new Date("2024-09-19"),g=!(0,d().OX)(o.getSubscriptionTier()),f=null===(t=r.getSettings())||void 0===t?void 0:t.seen_trash_autodeletion_announcement,v=l.device.isMobile;if(!u&&g&&!f&&!v){const e=()=>{(0,p().u4)({environment:l,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"dismissed",subscriptionTier:o.getSubscriptionTier()}}}),A().createAndCommit({userAction:"TrashDeletionToast.handleDismiss",environment:l,canUndo:!0,perform:e=>{C().mJ({transaction:e,userSettingsStore:r,data:{seen_trash_autodeletion_announcement:!0}})}})},t=function(e){const{deleteFromTrashDelaySeconds:t,intl:n,onDismiss:o}=e;return{presentationType:"transient",id:"trash_deletion_toast",icon:a().q,message:m().A.formatMessage(M.trashDeletionToast,{duration:(0,c().rN)(t,n)}),onDismiss:o}}({deleteFromTrashDelaySeconds:(0,i().XX)(null==o?void 0:o.getModel())/1e3,intl:s,environment:l,onDismiss:e});(0,p().u4)({environment:l,event:{eventName:"trash_deletion_toast",eventProperties:{actionType:"viewed",subscriptionTier:o.getSubscriptionTier()}}}),x().HK(t)}}},346615:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronDownRoundedThick",{viewBox:"0 0 12 12",svg:(0,o.jsx)("path",{d:"M6.02734 8.80274C6.27148 8.80274 6.47168 8.71484 6.66211 8.51465L10.2803 4.82324C10.4268 4.67676 10.5 4.49609 10.5 4.28125C10.5 3.85156 10.1484 3.5 9.72363 3.5C9.50879 3.5 9.30859 3.58789 9.15234 3.74902L6.03223 6.9668L2.90722 3.74902C2.74609 3.58789 2.55078 3.5 2.33105 3.5C1.90137 3.5 1.55469 3.85156 1.55469 4.28125C1.55469 4.49609 1.62793 4.67676 1.77441 4.82324L5.39258 8.51465C5.58789 8.71973 5.78808 8.80274 6.02734 8.80274Z"})})},346923:(e,t,n)=>{n.d(t,{l:()=>r});var o=n(296540),i=()=>n(496603);function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i().n4;const n=(0,o.useRef)(e);return t(n.current,e)||(n.current=e),n.current}},347199:(e,t,n)=>{n.d(t,{A:()=>o});const o={}},347469:(e,t,n)=>{n.d(t,{co:()=>v,OZ:()=>h,LO:()=>f});n(898992),n(354520);var o=()=>n(919709),i=()=>n(191772),r=()=>n(534177),a=()=>n(667019),s=(n(581454),()=>n(94953));var l=()=>n(555776),c=()=>n(47373),d=()=>n(947983),u=()=>n(351360),p=()=>n(786074),m=()=>n(230062),g=()=>n(141465);function f(e){var t;if(m().A.state)return;const n=(0,c().qm)(),{token:f,store:h}=e,_=o().uPN(f.textToken),b=null===(t=u().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getSpaceId(),y=b?o().EF0(_).filter((e=>!(0,i().TH)({annotation:e,spaceId:b,getRecordModel:h.getRecordModel}))):[],S=b?o().QVD(_).filter((e=>!(0,i().TH)({annotation:e,spaceId:b,getRecordModel:h.getRecordModel}))):[],w=o().Pqo(_),k=o().i54(_),I=[o().VtW(_),o().$CJ(_),o().PVS(_),o().MzR(_),o().SEY(_),o().G6d(_),o().Sev(_)||void 0,o().lqY(_),o().GhC(_),o().zKJ(_),n&&o().snh(_)||void 0,...y,...S,o().g2K(_),w,k].filter(r().O9);I.length>0?(g().A.setState({type:"token",token:f,store:h,annotations:I}),(y.length>0||S.length>0)&&function(e){let{source:t,discussionAnnotations:n}=e;s().A.setState({source:t,discussionIds:n.map(o().fmO)})}({discussionAnnotations:[...y,...S],source:"editor"}),w&&!d().A.containedByAssistantEditCard(f.node)&&p().A.setState({...p().A.state,hoveredEditId:w[1]}),o().zKJ(_)&&l().A.setHoverWithSource("text_annotation"),k&&a().W.setState({hoveredEditId:k[1]})):v()}function v(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{relatedNode:n}=t;var o,i;g().A.state&&g().A.setState(void 0),o="editor",(null===(i=s().A.state)||void 0===i?void 0:i.source)===o&&s().A.setState(void 0),l().A.resetHoverSource("text_annotation"),!p().A.state.hoveredEditId||n&&d().A.containedByAssistantEditCard(n)||p().A.setState({...p().A.state,hoveredEditId:void 0}),null!==(e=a().W.state)&&void 0!==e&&e.hoveredEditId&&a().W.setState({hoveredEditId:void 0})}function h(e){e&&g().A.state&&g().A.state.store===e&&v()}},349679:(e,t,n)=>{n.r(t),n.d(t,{checkmarkSmallIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M12.692 3.094a.625.625 0 0 0-.858.214l-4.798 7.997-2.931-3.42a.625.625 0 0 0-.95.813l3.496 4.079a.625.625 0 0 0 1.011-.085l5.244-8.74a.625.625 0 0 0-.214-.858"})},i=(0,n(340498).wt)("checkmarkSmall",o)},350188:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},352271:(e,t,n)=>{n.d(t,{Au:()=>c,GF:()=>i,_N:()=>s,ad:()=>g,g:()=>v,nc:()=>l,qe:()=>f,tu:()=>m,tz:()=>u,uM:()=>r,x3:()=>p,x4:()=>h,yP:()=>d});n(898992),n(354520),n(581454);var o=()=>n(496603);const i="COMPLETE_SPRINT_NEXT_SPRINT_DATE_RANGE",r="COMPLETE_SPRINT_ACTION_TYPE",a={duplicate_blocks:{display:!0},create_page:{display:!0},modal_confirmation:{display:!0},open_page:{display:!0},query_collection:{display:!0},slack_notification:{display:!0},update_pages:{display:!0},send_in_app_notification:{display:!0},send_gmail_notification:{display:!0},define_variables:{display:!0},http_request:{display:!0},publish_site:{display:!0},complete_sprint:{display:!1}};function s(e){return Object.entries(a).filter((t=>{let[n,o]=t;return o[e]})).map((e=>{let[t]=e;return t}))}function l(e,t){return a[e][t]}const c=["replace","append","remove","toggle"],d="replace";function u(e){return(null==e?void 0:e.action)||d}const p=100,m=50;function g(e){const{isGenericRecurrenceAllowed:t}=e;return{recurrence:t?{min:1,max:"default_bound"}:{min:1,max:1},button:{min:0,max:"default_bound"},event:{min:1,max:"default_bound"}}}function f(e){return l(e.type,"display")}function v(e){return"recurrence"===e.automation.getTriggerType()}function h(e){return(0,o().cz)(Object.values(e.actionValidationFailures).map((e=>(null==e?void 0:e.length)??0)))>0}},353643:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{initiator:"none",isDragging:!1,disableVerticalEdgeScroll:!1,disableHorizontalEdgeScroll:!1}}}const i=new o},354584:(e,t,n)=>{n.d(t,{y:()=>o});const o=new(n(645873).O2)("prismjs",(async()=>{const e=await Promise.resolve().then(n.bind(n,979004));return await e.importPrism()}))},355012:(e,t,n)=>{n.d(t,{$B:()=>l,C8:()=>a,K2:()=>c,Kn:()=>p,Wt:()=>s,fB:()=>u,oG:()=>d});n(944114),n(898992),n(803949),n(581454);var o=()=>n(496603),i=()=>n(41161),r=()=>n(713205);function a(e){let{spaceId:t,userId:n,pageId:o}=e;const i=r().A.getStore({spaceId:t,userId:n}).getState();if(!i)return;const a=i.pages[o];return a?{totalVisits:a.t,visits:a.v.map((e=>g(i.config,e)))}:void 0}function s(e){let{spaceId:t,userId:n,pageId:i,now:r,weightForVisit:s}=e;const l=a({spaceId:t,userId:n,pageId:i});if(!l)return;const c=l.visits.map((e=>s({now:r,visitedAt:e})));return l.totalVisits*(0,o().i2)(c)}function l(e){let{spaceId:t,userId:n,pageId:o,visitedAt:i}=e;c({spaceId:t,userId:n,visits:[{pageId:o,visitedAt:i}]})}function c(e){let{spaceId:t,userId:n,visits:o,isFromRecentPageVisits:a,isBackfill:s}=e;r().A.getStore({spaceId:t,userId:n}).update((e=>{if(s&&null!=e&&e.config.isBackfilledFromRecentPageVisits)return e;const t=s?{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0}:e??{config:{maxEvents:1e3,minPages:100,maxVisitsPerPage:7,visitTimestampGranularity:"minute",isBackfilledFromRecentPageVisits:!1},pages:{},lastFrecencyUpdateFromRecentPageVisitsTime:0};if(s&&(o.push(...function(e){let{userId:t}=e;const n=i().A.getVisitedIds(t),o=[];return n.forEach((e=>{i().A.getVisits(t,e).forEach((t=>o.push({pageId:e,visitedAt:t.timestamp})))})),o}({userId:n})),t.config.isBackfilledFromRecentPageVisits=!0,t.config.backfillTime=Date.now()),o.sort(m),a&&o.length){const e=o[o.length-1];t.lastFrecencyUpdateFromRecentPageVisitsTime=Math.max(t.lastFrecencyUpdateFromRecentPageVisitsTime,e.visitedAt)}let r=!1;for(const n of o){const e=n.pageId,o=f(t.config,n.visitedAt);if(v({state:t,pageId:e,truncatedVisitedAt:o}))continue;const i=t.pages[e]??{t:0,v:[]};r=!0,i.t+=1,i.v.push(o),i.v.sort(),i.v.length>t.config.maxVisitsPerPage&&i.v.shift(),t.pages[e]=i}if(!r)return t;const l=function(e){const t=[],n=Object.keys(e.pages);return n.forEach((n=>{(e.pages[n].v??[]).forEach((e=>t.push({pageId:n,visitedAt:e})))})),t.sort(m),t}(t);let c=l.length,d=Object.keys(t.pages).length;for(let n=0;c>t.config.maxEvents&&d>=t.config.minPages&&n<l.length;n++){const e=l[n],o=t.pages[e.pageId];if(c--,!o)continue;const i=o.v.shift();o.v.length||(d<=t.config.minPages&&i?(o.v.push(i),c++):(d--,delete t.pages[e.pageId]))}return t}))}function d(e){var t;let{spaceId:n,userId:o}=e;return null===(t=r().A.getStore({spaceId:n,userId:o}).getState())||void 0===t?void 0:t.lastFrecencyUpdateFromRecentPageVisitsTime}function u(e){var t;let{spaceId:n,userId:o}=e;return!0===(null===(t=r().A.getStore({spaceId:n,userId:o}).getState())||void 0===t?void 0:t.config.isBackfilledFromRecentPageVisits)}function p(e){let{spaceId:t,userId:n}=e;const o=r().A.getStore({spaceId:t,userId:n}).getState();if(!o||!o.config.isBackfilledFromRecentPageVisits)return;const i=[];return Object.keys(o.pages).forEach((e=>{const t=o.pages[e].v??[];i.push({pageId:e,visitedAt:g(o.config,t[t.length-1])})})),i.sort(((e,t)=>t.visitedAt-e.visitedAt))}function m(e,t){return e.visitedAt-t.visitedAt!=0?e.visitedAt-t.visitedAt:e.pageId.localeCompare(t.pageId)}function g(e,t){return"minute"===e.visitTimestampGranularity?60*t*1e3:(e.visitTimestampGranularity,0)}function f(e,t){return"minute"===e.visitTimestampGranularity?Math.floor(t/60/1e3):(e.visitTimestampGranularity,0)}function v(e){let{state:t,pageId:n,truncatedVisitedAt:o}=e;const i=t.pages[n]??void 0;if(!i)return!1;const r=i.v??void 0;return!!r&&r.includes(o)}},356596:(e,t,n)=>{n.d(t,{K:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("enter",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M5.38965 14.1667C5.81812 14.1667 6.10156 13.8767 6.10156 13.468C6.10156 13.2571 6.01587 13.0989 5.89062 12.967L4.18994 11.3125L3.02979 10.3369L4.55908 10.4028H12.7922C14.4402 10.4028 15.1389 9.65796 15.1389 8.04297V4.13403C15.1389 2.48608 14.4402 1.78735 12.7922 1.78735H9.13379C8.70532 1.78735 8.4021 2.11035 8.4021 2.50586C8.4021 2.90137 8.69873 3.22437 9.13379 3.22437H12.7593C13.4316 3.22437 13.7151 3.50781 13.7151 4.17358V7.99683C13.7151 8.67578 13.425 8.95923 12.7593 8.95923H4.55908L3.02979 9.03174L4.18994 8.04956L5.89062 6.39502C6.01587 6.26978 6.10156 6.11157 6.10156 5.89404C6.10156 5.48535 5.81812 5.19531 5.38965 5.19531C5.21167 5.19531 5.01392 5.27441 4.8689 5.41943L1.08521 9.1438C0.933594 9.28882 0.854492 9.48657 0.854492 9.68433C0.854492 9.87549 0.933594 10.0732 1.08521 10.2183L4.8689 13.9492C5.01392 14.0876 5.21167 14.1667 5.38965 14.1667Z"})})},357307:(e,t,n)=>{n.d(t,{Y:()=>c});var o=()=>n(110750),i=()=>n(607859),r=()=>n(155959),a=()=>n(351360),s=()=>n(210737),l=()=>n(991699);function c(e){var t,n;const{currentUserStore:c}=a().default.state,d=Boolean(null==c?void 0:c.id),u=i().default.state.isOnboarding,p=(0,r().T)("supportsNativeBottomBarOverlappingWebView")?s().A.hasOpenMobileSlideUps():s().A.hasOpenPopups(),m=l().A.state.open,g=(0,o().Xz)(e.TabbedRouterStore.state),f="web"!==g.type,v="web"===g.type&&("nativeTab"===g.route.name&&["members","trash","help","offline","settings"].includes(g.route.tab)||"nativeTab"===(null===(t=g.redirectedTo)||void 0===t?void 0:t.route.name)&&["members","trash","help","offline","settings"].includes(null===(n=g.redirectedTo)||void 0===n?void 0:n.route.tab)),h=d&&!m&&!u&&!p&&!v;return(0,r().T)("supportsWebManagedTabNavigation")&&!!f||h}},357473:(e,t,n)=>{n.d(t,{Cm:()=>a,Ug:()=>s,lw:()=>l,rE:()=>c});n(16280),n(898992),n(354520),n(581454);var o=n.n(n(702189)),i=()=>n(634201);const r=new(o()),a=o().DIFF_DELETE,s=o().DIFF_INSERT,l=o().DIFF_EQUAL;function c(e,t){const n=d(e,{count:0,encoding:{},decoding:{}}),o=n.encodedString,i=d(t,n.cypher),a=i.encodedString,s=i.cypher,l=function(e,t){return e.map((e=>{let[n,o]=e;return[n,u(o,t)]}))}(r.diff_main(o,a),s);return l.filter((e=>{let[t,n]=e;return""!==n}))}function d(e,t){const n=i().PE(e).map((e=>{const n=t.encoding[e];if(n)return n;{const n=String.fromCharCode(t.count);return t.count++,t.encoding[e]=n,t.decoding[n]=e,n}}));if(t.count>65535)throw new Error("This string has way too many different characters.");const o=n.join("");return{cypher:t,encodedString:o}}function u(e,t){return e.split("").map((e=>t.decoding[e])).join("")}},357625:(e,t,n)=>{n.d(t,{BP:()=>l,UT:()=>s,fJ:()=>d,u_:()=>u});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(416845),i=()=>n(386164),r=()=>n(449506),a=()=>n(787172);async function*s(e,t,n,o){const a={task:{eventName:t,request:n}},s=await r().callApi({eventName:"enqueueTask",environment:e,data:a,headers:o?(0,i().WS)(o):void 0});if("failed"===s.type)yield{error:s.error,taskStatus:"not_started"};else{const{taskId:o}=s.data;d.add(o),yield*l({environment:e,eventName:t,taskId:o,request:n})}}async function*l(e){const{environment:t,eventName:n,taskId:i,request:r}=e;for(;;){const e=await c(i);if("success"===e.state){const o=e.status;(0,a().s)({environment:t,eventName:n,response:o}),yield{value:o,taskStatus:"success"};break}if("failure"===e.state||"dead"===e.state||"timeout_before_execution"===e.state){yield{error:new(o().mvP)(e.error||"Something went wrong.",{eventName:n,request:r},e.clientData),taskStatus:"failure"};break}"in_progress"===e.state&&e.status&&(yield{value:e.status,taskStatus:"in_progress"})}}async function c(e){return new Promise(((t,n)=>{u.addOnceListener(e,(e=>{t(e)}))}))}const d=new Set,u=new(n(752196).A)},358373:(e,t,n)=>{n.d(t,{v:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("dot",{viewBox:"0 0 5 4",svg:(0,o.jsx)("circle",{cx:"2.5",cy:"2",r:"2"})})},358547:(e,t,n)=>{n.d(t,{Lu:()=>a,Xi:()=>r,Y_:()=>i});n(16280);var o=()=>n(534177);function*i(e){yield e;for(const t of e.children)yield*i(t)}function*r(e){for(let t=e.startPath.length-1;t>=0;t--){const n=e.getStartBoundary(t);if(!n)throw new Error("Start boundary must be defined");t===e.startPath.length-1?yield n.parent:yield*n.childrenInsideRange}}function*a(e){for(const{position:t,tree:n}of function*(e){for(let t=e.startPath.length-1;t>=0;t--){const n=e.getStartBoundary(t);if(n&&(t===e.startPath.length-1&&(yield{position:"start",tree:n.parent}),t>0))for(const e of n.childrenInsideRange)yield{position:"within",tree:e}}for(let t=0;t<e.endPath.length;t++){const n=e.getEndBoundary(t);if(n)for(const t of n.childrenInsideRange)e.isInEndPath(t)?yield{position:"endPath",tree:t}:yield{position:"within",tree:t}}}(e))switch(t){case"start":case"endPath":yield n;break;case"within":yield*i(n);break;default:(0,o().HB)(t)}}},359391:(e,t,n)=>{n.d(t,{Fo:()=>se,i4:()=>ae,OR:()=>ce,_D:()=>Q,Jm:()=>V,Nt:()=>Be,tV:()=>xe,lg:()=>ke,ry:()=>we,JP:()=>le,Li:()=>fe,$c:()=>Z,rH:()=>$,ZU:()=>Te,ew:()=>_e,Pf:()=>ne,M2:()=>ee,g_:()=>be,d6:()=>ie,TI:()=>ye,Kg:()=>J,cz:()=>re,W9:()=>X,NJ:()=>Y,sm:()=>me,An:()=>ue,tB:()=>G,W3:()=>Ae,ZN:()=>pe,gh:()=>te,OL:()=>he,zv:()=>ve,Rr:()=>Re,g8:()=>ge,I6:()=>Se,qM:()=>de,Wr:()=>Ie});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550);var o=()=>n(212547),i=()=>n(696706),r=()=>n(179034),a=()=>n(292588);const s={table:r().ev,recordColumnTypes:{id:a().A.UUID,space_id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,type:a().A.String,properties:a().A.JSON,crdt_data:a().A.JSON,crdt_format_version:a().A.Number,content:a().A.StringArray,non_content_children:a().A.UUIDArray,discussions:a().A.StringArray,view_ids:a().A.StringArray,collection_id:a().A.UUID,permissions:a().A.JSON,created_time:a().A.Number,last_edited_time:a().A.Number,copied_from:a().A.UUID,file_ids:a().A.StringArray,ignore_block_count:a().A.Boolean,is_template:a().A.Boolean,parent_id:a().A.UUID,parent_table:a().A.String,alive:a().A.Boolean,moved:a().A.JSON,format:a().A.JSON,created_by:a().A.UUID,last_edited_by:a().A.UUID,created_by_table:a().A.String,created_by_id:a().A.UUID,last_edited_by_table:a().A.String,last_edited_by_id:a().A.UUID,content_classification:a().A.String,moved_to_trash_table:a().A.String,moved_to_trash_id:a().A.UUID,moved_to_trash_time:a().A.Number,deleted_from_trash_time:a().A.Number,deleted_from_trash_table:a().A.String,deleted_from_trash_id:a().A.UUID},metaColumnTypes:{meta_user_id:a().A.UUID,meta_last_access_timestamp:a().A.Number,meta_role:a().A.String}};const l={table:n(519831).Vl,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,name:a().A.JSON,description:a().A.JSON,icon:a().A.String,cover:a().A.String,schema:a().A.JSON,format:a().A.JSON,parent_id:a().A.UUID,parent_table:a().A.String,alive:a().A.Boolean,file_ids:a().A.StringArray,template_pages:a().A.StringArray,copied_from:a().A.UUID,migrated:a().A.Boolean,space_id:a().A.UUID,deleted_schema:a().A.JSON},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const c={table:n(869558).Gy,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,type:a().A.String,name:a().A.String,page_sort:a().A.UUIDArray,parent_id:a().A.UUID,parent_table:a().A.String,alive:a().A.Boolean,format:a().A.JSON,query2:a().A.JSON,space_id:a().A.UUID},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const d={table:n(343666).SN,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,parent_id:a().A.UUID,parent_table:a().A.String,text:a().A.JSON,created_time:a().A.Number,last_edited_time:a().A.Number,alive:a().A.Boolean,created_by_table:a().A.String,created_by_id:a().A.UUID,space_id:a().A.UUID,content:a().A.UUIDArray,reactions:a().A.UUIDArray},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const u={table:n(837420).e,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,space_id:a().A.UUID,name:a().A.String,url:a().A.String,file_ids:a().A.StringArray,created_time:a().A.Number,created_by_id:a().A.UUID,created_by_table:a().A.String,alive:a().A.Boolean},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const p={table:n(197959).$Y,recordColumnTypes:{id:a().A.UUID,type:a().A.String,version:a().A.Number,last_version:a().A.Number,parent_id:a().A.UUID,parent_table:a().A.String,context:a().A.JSON,resolved:a().A.Boolean,comments:a().A.StringArray,space_id:a().A.UUID,reactions:a().A.UUIDArray,property_id:a().A.String},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const m={table:n(959044)._p,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,user_id:a().A.UUID,activity_id:a().A.UUID,received:a().A.Boolean,read:a().A.Boolean,visited:a().A.Boolean,emailed:a().A.Boolean,invalid:a().A.Boolean,space_id:a().A.UUID,navigable_block_id:a().A.UUID,collection_id:a().A.UUID,discussion_id:a().A.UUID,type:a().A.String,end_time:a().A.String,channel:a().A.String,archived_at:a().A.Number},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const g={table:n(798880).oo,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,email:a().A.String,given_name:a().A.String,family_name:a().A.String,profile_photo:a().A.String,onboarding_completed:a().A.Boolean,mobile_onboarding_completed:a().A.Boolean,clipper_onboarding_completed:a().A.Boolean,reverify:a().A.Boolean,name:a().A.String,is_banned:a().A.Boolean,suspended_time:a().A.Number},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const f={table:n(204384).ez,recordColumnTypes:{id:a().A.UUID,space_id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,created_time:a().A.Number,parent_id:a().A.UUID,parent_table:a().A.String,icon:a().A.String,actors:a().A.JSON},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const v={table:n(158009).f3,recordColumnTypes:{id:a().A.String,space_id:a().A.UUID,space_permission_group_id:a().A.UUID,user_id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,removed_at:a().A.Number},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const h={table:n(437607).n,recordColumnTypes:{id:a().A.String,version:a().A.Number,last_version:a().A.Number,name:a().A.String,icon:a().A.String,space_id:a().A.UUID,group_id:a().A.UUID,created_by_id:a().A.UUID,created_by_table:a().A.String,created_at:a().A.Number,last_edited_by_table:a().A.String,last_edited_by_id:a().A.UUID,last_edited_at:a().A.Number,deleted_at:a().A.Number},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const _={table:n(96689).NX,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,name:a().A.String,email_domains:a().A.StringArray,pages:a().A.StringArray,icon:a().A.String,disable_public_access:a().A.Boolean,disable_public_access_requests:a().A.Boolean,disable_guests:a().A.Boolean,disable_move_to_space:a().A.Boolean,disable_export:a().A.Boolean,disable_space_page_edits:a().A.Boolean,beta_enabled:a().A.Boolean,created_time:a().A.Number,last_edited_time:a().A.Number,deleted_by:a().A.UUID,permanently_deleted_time:a().A.Number,created_by_table:a().A.String,created_by_id:a().A.UUID,last_edited_by_table:a().A.String,last_edited_by_id:a().A.UUID,admin_disable_public_access:a().A.Boolean,space_pages:a().A.UUIDArray,plan_type:a().A.String,invite_link_enabled:a().A.Boolean,initial_use_cases:a().A.String,public_home_page:a().A.String,bot_settings:a().A.JSON,settings:a().A.JSON,subscription_tier:a().A.String,disable_team_creation:a().A.Boolean,overdue_subscription:a().A.JSON,short_id:a().A.Number,short_id_str:a().A.String},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const b={table:n(848538).aJ,recordColumnTypes:{id:a().A.String,user_id:a().A.String,space_id:a().A.String,membership_type:a().A.String,invite_id:a().A.String,version:a().A.Number},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const y={table:n(84520).mu,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,space_id:a().A.UUID,bookmarked_pages:a().A.StringArray,shared_pages:a().A.StringArray,shared_pages_manual_sort:a().A.StringArray,visited_templates:a().A.StringArray,sidebar_hidden_templates:a().A.StringArray,notify_mobile:a().A.Boolean,notify_desktop:a().A.Boolean,notify_email:a().A.Boolean,notify_email_always:a().A.Boolean,created_getting_started:a().A.Boolean,parent_id:a().A.UUID,parent_table:a().A.String,alive:a().A.Boolean,created_onboarding_templates:a().A.Boolean,private_pages:a().A.UUIDArray,joined:a().A.Boolean,joined_teams:a().A.UUIDArray,settings:a().A.JSON,ai_suggestions:a().A.JSON,assistant_session_starters:a().A.UUIDArray,sidebar_order:a().A.StringArray,first_joined_space_time:a().A.Number,public_share_link_pages:a().A.UUIDArray},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const S={table:n(854150).yK,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,space_id:a().A.UUID,name:a().A.String,description:a().A.String,icon:a().A.String,created_time:a().A.Number,created_by_table:a().A.String,created_by_id:a().A.UUID,last_edited_time:a().A.Number,last_edited_by_table:a().A.String,last_edited_by_id:a().A.UUID,archived_by:a().A.UUID,archived_at:a().A.Number,team_pages:a().A.UUIDArray,pinned_pages:a().A.UUIDArray,parent_id:a().A.UUID,parent_table:a().A.String,settings:a().A.JSON,is_default:a().A.Boolean,membership:a().A.JSON,permissions:a().A.JSON},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const w={table:n(294712).GD,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,space_views:a().A.StringArray,space_view_pointers:a().A.JSON,left_spaces:a().A.StringArray,deleted_email:a().A.String},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}};const k={table:n(495989).xM,recordColumnTypes:{id:a().A.UUID,version:a().A.Number,last_version:a().A.Number,settings:a().A.JSON},metaColumnTypes:{meta_user_id:a().A.UUID,meta_role:a().A.String}},I=[s,_,y,w,g,c,l,S,k,m,d,p,f,h,v,u,b],x=new Set(I.map((e=>e.table)));var A=()=>n(651170),C=()=>n(430476),T=()=>n(68336),M=()=>n(496603),P=()=>n(763824),B=()=>n(534177);const R=[...I.map((e=>e.table)),"records"],E=["offline_page","offline_action"],D={Records:{tableName:"records",idColumn:"record_id",priorityColumns:"importance, timestamp",priorityColumnsOrderBy:"importance DESC, timestamp DESC"},Block:{tableName:"block",idColumn:"id",priorityColumns:"meta_last_access_timestamp",priorityColumnsOrderBy:"meta_last_access_timestamp DESC"}},N=Object.keys({record_table:!0,record_id:!0,record_value:!0,space_id:!0,timestamp:!0,parent_table:!0,parent_id:!0,importance:!0,user_id:!0});async function L(e){return await(0,C().G2)({...e,webLockRequest:{tables:"sqliteRecordCache",isWrite:!1}})}async function O(e){return await(0,C().G2)({...e,webLockRequest:{tables:"sqliteRecordCache",isWrite:!0}})}async function U(e){return await(0,C().G2)({...e,webLockRequest:{tables:"offlineStorage",isWrite:!1}})}async function F(e){return await(0,C().G2)({...e,webLockRequest:{tables:"offlineStorage",isWrite:!0}})}async function V(e,t){await O({connection:e,statements:[{sql:"\n\t\t\t\tUPDATE records SET user_id = ? WHERE user_id is null\n\t\t\t\t",args:[t]}],queryName:"backfillRecordsWithUserId"})}function j(e){const t=M().$z(e.records,(e=>e.pointer.table)),n=[];return Object.entries(t).forEach((t=>{let[o,i]=t;const r=I.find((e=>e.table===o));if(!r)return;const a=(0,B().uv)(r.recordColumnTypes),s=(0,B().uv)(r.metaColumnTypes),l=[...a,...s];M().iv(i,Math.floor(C().Zj/l.length)).forEach((t=>{const i=`(${l.join(",")})`,r=Array(t.length).fill(`(${"?, ".repeat(l.length-1)}?)`).join(",");let c;c=e.maybeStaleRecords&&l.includes("version")?`INSERT INTO ${o} ${i} VALUES ${r}`.concat("ON CONFLICT (id, meta_user_id) DO UPDATE SET").concat("\n").concat(l.map((e=>`${e} = excluded.${e}`)).join(",")).concat("\n").concat(`WHERE excluded.version > ${o}.version`):`INSERT OR REPLACE INTO ${o} ${i} VALUES ${r}`;const d=M().Bq(t.map((e=>{let{value:t,timestamp:n,userId:o}=e;if(!t)return[];const i=t.value;if(!i)return[];const r=a.map((e=>function(e){if(null==e)return null;if("string"==typeof e||"number"==typeof e)return e;if("boolean"==typeof e)return e?1:0;return JSON.stringify(e)}((0,B().O)(i,e)?i[e]:void 0))),l=s.map((e=>{switch(e){case"meta_user_id":return o;case"meta_role":return t.role;case"meta_last_access_timestamp":return n;default:throw new Error(`Unknown meta column ${e}`)}}));return r.concat(l)})));n.push({sql:c,args:d})}))})),n}function z(e){const[t,n]=M().jB(e.records,(e=>Ce(e))),i=j({records:t,maybeStaleRecords:e.maybeStaleRecords}),r=function(e){const{records:t,maybeStaleRecords:n}=e;return M().iv(t,Math.floor(C().Zj/N.length)).map((e=>{let t=`\n\t\t\tINSERT INTO records\n\t\t\t(\n\t\t\t\trecord_table,\n\t\t\t\trecord_id,\n\t\t\t\trecord_value,\n\t\t\t\ttimestamp,\n\t\t\t\tparent_table,\n\t\t\t\tparent_id,\n\t\t\t\timportance,\n\t\t\t\tuser_id,\n\t\t\t\tspace_id\n\t\t\t)\n\t\t\tVALUES ${Array(e.length).fill("(?, ?, ?, ?, ?, ?, ?, ?, ?)").join(",")}`;return t=n?t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.record_value\n\t\t\t\t\t\tELSE records.record_value\n\t\t\t\t\t\tEND,\n\t\t\t\t\ttimestamp =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.timestamp\n\t\t\t\t\t\tELSE records.timestamp\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_table =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_table\n\t\t\t\t\t\tELSE records.parent_table\n\t\t\t\t\t\tEND,\n\t\t\t\t\tparent_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.parent_id\n\t\t\t\t\t\tELSE records.parent_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\timportance =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.importance\n\t\t\t\t\t\tELSE records.importance\n\t\t\t\t\t\tEND,\n\t\t\t\t\tuser_id =\n\t\t\t\t\t\tCASE WHEN json_extract(excluded.record_value, '$.value.version') > json_extract(records.record_value, '$.value.version')\n\t\t\t\t\t\tTHEN excluded.user_id\n\t\t\t\t\t\tELSE excluded.user_id\n\t\t\t\t\t\tEND,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"):t.concat("\n\t\t\t\tON CONFLICT (record_table, record_id, user_id) DO UPDATE SET\n\t\t\t\t\trecord_value = excluded.record_value,\n\t\t\t\t\ttimestamp = excluded.timestamp,\n\t\t\t\t\tparent_table = excluded.parent_table,\n\t\t\t\t\tparent_id = excluded.parent_id,\n\t\t\t\t\timportance = excluded.importance,\n\t\t\t\t\tuser_id = excluded.user_id,\n\t\t\t\t\t-- space_id never changes.\n\t\t\t\t\tspace_id = COALESCE(records.space_id, excluded.space_id)"),{sql:t,args:M().Bq(e.map((e=>{let{pointer:t,value:n,timestamp:i,importance:r,userId:a}=e,s=null,l=null;return n&&n.value&&(0,o().ob)(n.value)&&(s=n.value.parent_id,l=n.value.parent_table),[t.table,t.id,(0,C().Fm)(n),i,l,s,"number"==typeof r?r:null,a,t.spaceId||null]})))}}))}({records:n,maybeStaleRecords:e.maybeStaleRecords});return[...H(t),...W(n.filter((e=>x.has(e.pointer.table)))),...i,...r]}function H(e){return M().iv(e,Math.floor(C().Zj/(2*e.length))).map((e=>{const t=T().F4.or(e.map((e=>T().F4`(records.record_id = ${e.pointer.id} AND records.user_id = ${e.userId})`)));return T().F4`DELETE FROM records WHERE ${t}`.asWrite()}))}function W(e){const t=M().$z(e,(e=>e.pointer.table)),n=[];return Object.entries(t).forEach((e=>{let[t,o]=e;M().iv(o,Math.floor(C().Zj/(2*o.length))).forEach((e=>{const o=T().F4.or(e.map((e=>T().F4`(id = ${e.pointer.id} AND meta_user_id = ${e.userId})`)));n.push(T().F4`DELETE FROM ${T().F4.ident(t)} WHERE ${o}`.asWrite())}))})),n}async function q(e,t){if(0===t.length)return[];const n=M().$z(t,(e=>e.pointer.table)),o=[];Object.entries(n).forEach((t=>{let[n,r]=t;const a=I.find((e=>e.table===n));if(!a)return;const s=Array(r.length).fill("(id = ? AND meta_user_id = ?)").join(" OR "),l=M().qI(r,(e=>{let{pointer:{table:t,id:n},userId:o}=e;return[n,o]}));o.push(async function(){const[t]=await L({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM ${n}\n\t\t\t\tWHERE ${s}`,args:l,getData:!0}],queryName:"getRecordsFromSeparateTables"});return t.data.map((e=>function(e,t,n){return{pointer:i().L3.fromPointerLike({table:e,id:t.id,spaceId:t.space_id||void 0}),value:{role:t.meta_role,value:K(t,n)},timestamp:t.meta_last_access_timestamp,importance:0,userId:t.meta_user_id}}(n,e,a)))}())}));const r=await Promise.all(o);return M().Bq(r)}function K(e,t){const n={};return(0,B().uv)(t.recordColumnTypes).forEach((o=>{const i=t.recordColumnTypes[o];if(null!==e[o])switch(i){case a().A.UUID:case a().A.String:case a().A.Number:n[o]=e[o];break;case a().A.StringArray:case a().A.JSON:n[o]=JSON.parse(e[o]);break;case a().A.XML:n[o]=e[o];break;case a().A.UUIDArray:n[o]=JSON.parse(e[o]);break;case a().A.Boolean:n[o]=1===e[o];break;case a().A.CIDR:n[o]=e[o];break;case a().A.NumberArray:n[o]=JSON.parse(e[o]);break;case a().A.Blob:n[o]=e[o];break;default:(0,B().HB)(i)}})),n}async function G(e,t){const[n,o]=M().jB(t,(e=>x.has(e.pointer.table))),r=await q(e,n),a=new Set(r.map((e=>i().tr.toKey({pointer:e.pointer,userId:e.userId})))),s=n.filter((e=>!a.has(i().tr.toKey(e)))),l=await async function(e,t){if(0===t.length)return[];const n=Array(t.length).fill("(record_table = ? AND record_id = ? AND user_id = ?)").join(" OR "),o=M().qI(t,(e=>{let{pointer:{table:t,id:n},userId:o}=e;return[t,n,o]})),[r]=await L({connection:e,statements:[{sql:`\n\t\t\t\tSELECT * FROM records\n\t\t\t\tWHERE ${n}`,args:o,getData:!0}],queryName:"getRecordsFromRecordsTable"});return r.data.map((e=>({pointer:i().L3.fromPointerLike({table:e.record_table,id:e.record_id,spaceId:e.space_id||void 0}),value:JSON.parse(e.record_value),timestamp:e.timestamp,importance:"number"==typeof e.importance?e.importance:void 0,userId:e.user_id})))}(e,o.concat(s)),c=l.filter((e=>!Ce(e)));return r.concat(c)}async function $(e,t){const n=T().F4`
  SELECT * FROM block
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asRead(),o=T().F4`
  UPDATE block
  SET meta_last_access_timestamp = ${t.timestamp}
  WHERE parent_table = ${t.parent.table}
  AND parent_id = ${t.parent.id}
  AND meta_user_id = ${t.userId}
  `.asWrite(),[a]=await O({connection:e,statements:[n,o],queryName:"getBlocksWithParent"});return a.data.map((e=>({pointer:i().L3.fromPointerLike({table:r().ev,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:K(e,s)},userId:t.userId})))}async function Y(e,t){const n=T().F4`
    WITH RECURSIVE page_blocks AS (
      SELECT * FROM block
      WHERE id = ${t.page.id}
      AND meta_user_id = ${t.userId}

      UNION

      SELECT block.*
      FROM
        block INDEXED BY block_parent_id,
        page_blocks
      WHERE
      (
        page_blocks.id = ${t.page.id}
        OR page_blocks.type NOT IN ('page', 'toggle')
      )
      AND block.parent_table = 'block'
      AND block.parent_id = page_blocks.id
      AND block.meta_user_id = ${t.userId}
    )
    SELECT * FROM page_blocks
    `,o=await n.all(e,"getPageBlocksByParent");return 0===o.length?[]:o.map((e=>({pointer:i().L3.fromPointerLike({table:r().ev,id:e.id,spaceId:e.space_id||void 0}),value:{role:e.meta_role,value:K(e,s)},userId:t.userId})))}async function Q(e,t){const n=t.filter((e=>"set"===e.type&&!e.maybeStaleRecord)),o=t.filter((e=>"set"===e.type&&e.maybeStaleRecord)),i=t.filter((e=>{let{type:t}=e;return"access"===t})),a=t.filter((e=>{let{type:t}=e;return"delete"===t})),s=[];if(i.forEach((e=>{const t=e.record.pointer.table;Ce(e.record)?t===r().ev&&s.push(T().F4`
	        UPDATE block
	        SET meta_last_access_timestamp = ${e.record.timestamp}
	        WHERE id = ${e.record.pointer.id}
	        AND meta_user_id = ${e.record.userId}
	        `.asWrite()):s.push({sql:"UPDATE records\n          SET timestamp = ?\n          WHERE record_table = ?\n          AND record_id = ?\n          AND user_id = ?",args:[e.record.timestamp,t,e.record.pointer.id,e.record.userId]})})),n.length>0||o.length>0){if(n.length>0){const e=n.map((e=>e.record));s.push(...z({records:e,maybeStaleRecords:!1}))}if(o.length>0){const e=o.map((e=>e.record));s.push(...z({records:e,maybeStaleRecords:!0}))}}if(a.length>0){const e=a.map((e=>e.record));s.push(...function(e){const t=W(e.filter((e=>x.has(e.pointer.table)))),n=H(e);return t.concat(n)}(e))}0!==s.length&&await O({connection:e,statements:s,queryName:"applyRecordCacheOperations"})}async function Z(e){const{connection:t,tables:n,maxSize:o,offlineRecordIds:i}=e;if(0===n.length)return;const r=n.map((e=>function(e){const{table:t,maxSize:n,offlineRecordIds:o}=e,{tableName:i,idColumn:r,priorityColumns:a,priorityColumnsOrderBy:s}=D[t],l=`\n\t\tWITH offline_record_ids(id) AS (\n\t\t\t${o.length>0?`VALUES ${o.map((()=>"(?)")).join(", ")}`:"SELECT 1 WHERE false"}\n\t\t)\n\n\t`,c=`\n\t\t\n\t\tSELECT\n\t\t\t${r},\n\t\t\t0 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${i}\n\t\tWHERE ${r} IN (SELECT id FROM offline_record_ids)\n\t\n\t\tUNION\n\t\t\n\t\tSELECT\n\t\t\t${r},\n\t\t\t1 as preservation_priority,\n\t\t\t${a}\n\t\tFROM ${i}\n\t\tWHERE ${r} NOT IN (SELECT id FROM offline_record_ids)\n\t\n\t\tORDER BY preservation_priority ASC, ${s}\n\t\tLIMIT ${Math.max(n,o.length)}\n\t`;return{sql:`\n\t\t\t${l}\n\t\t\tDELETE FROM ${i}\n\t\t\tWHERE ${r} NOT IN (\n\t\t\t\tSELECT ${r} FROM (\n\t\t\t\t\t${c}\n\t\t\t\t)\n\t\t\t)\n\t\t`,args:o}}({table:e,maxSize:o,offlineRecordIds:i})));await O({connection:t,statements:r,queryName:"evictTables"})}async function X(e){const{connection:t,userId:n,orderBy:o}=e,[{data:i}]=await U({connection:t,statements:[{sql:`\n\t\t\t\t\tSELECT\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tdownload_status,\n\t\t\t\t\t\tlast_downloaded_at,\n\t\t\t\t\t\tlast_downloaded_version,\n\t\t\t\t\t\tCASE \n\t\t\t\t\t\t\t\tWHEN EXISTS (\n\t\t\t\t\t\t\t\t\tSELECT 1 FROM offline_action\n\t\t\t\t\t\t\t\t\tWHERE offline_action.impacted_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.origin_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.autosync_type = 'not_autosynced'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tTHEN 1\n\t\t\t\t\t\t\t\tELSE 0\n\t\t\t\t\t\tEND AS is_explicitly_offlined_origin,\n\t\t\t\t\t\tCASE\n\t\t\t\t\t\t\t\tWHEN EXISTS (\n\t\t\t\t\t\t\t\t\tSELECT 1 FROM offline_action\n\t\t\t\t\t\t\t\t\tWHERE offline_action.impacted_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.origin_page_id = offline_page.id\n\t\t\t\t\t\t\t\t\tAND offline_action.autosync_type = 'frecent'\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tTHEN 1\n\t\t\t\t\t\t\t\tELSE 0\n\t\t\t\t\t\tEND AS is_autosynced_origin\n\t\t\t\t\tFROM offline_page\n\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t${"mostStaleFirst"===o?"ORDER BY last_downloaded_at ASC":""}\n\t\t\t\t`,args:[n],getData:!0}]}),r=[];for(const a of i)(0,B().Gv)(a)&&(0,B().O)(a,"id")&&"string"==typeof a.id&&r.push([a.id,{downloadStatus:oe(a.download_status)?a.download_status:void 0,lastDownloadedAt:"number"==typeof a.last_downloaded_at?a.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof a.last_downloaded_version?a.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===a.is_explicitly_offlined_origin,isAutosyncedOrigin:1===a.is_autosynced_origin}]);return r}async function J(e){const{connection:t,userId:n}=e,[{data:o}]=await U({connection:t,statements:[T().F4`
				SELECT 
					id,
					download_status,
					last_downloaded_at,
					last_downloaded_version,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
							)
							THEN 1
							ELSE 0
					END AS is_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'not_autosynced'
							)
							THEN 1
							ELSE 0
					END AS is_explicitly_offlined_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'frecent'
							)
							THEN 1
							ELSE 0
					END AS is_autosynced_origin 
				FROM offline_page 
				WHERE meta_user_id = ${n} 
					AND is_origin = 1 
				ORDER BY last_downloaded_at ASC
			`.asRead()]}),i=[];for(const r of o)(0,B().Gv)(r)&&(0,B().O)(r,"id")&&"string"==typeof r.id&&i.push([r.id,{downloadStatus:oe(r.download_status)?r.download_status:void 0,lastDownloadedAt:"number"==typeof r.last_downloaded_at?r.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof r.last_downloaded_version?r.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===r.is_explicitly_offlined_origin,isAutosyncedOrigin:1===r.is_autosynced_origin}]);return i}async function ee(e){const{connection:t,userId:n}=e,[{data:o}]=await U({connection:t,statements:[T().F4`
				SELECT 
					id,
					download_status,
					last_downloaded_at,
					last_downloaded_version,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
							)
							THEN 1
							ELSE 0
					END AS is_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'not_autosynced'
							)
							THEN 1
							ELSE 0
					END AS is_explicitly_offlined_origin,
					CASE 
							WHEN EXISTS (
								SELECT 1 
								FROM offline_action
								WHERE offline_action.impacted_page_id = offline_page.id
								AND offline_action.origin_page_id = offline_page.id
								AND offline_action.autosync_type = 'frecent'
							)
							THEN 1
							ELSE 0
					END AS is_autosynced_origin 
				FROM offline_page 
				WHERE meta_user_id = ${n} 
					AND is_autosynced_origin = 1 
				ORDER BY last_downloaded_at ASC
			`.asRead()]}),i=[];for(const r of o)(0,B().Gv)(r)&&(0,B().O)(r,"id")&&"string"==typeof r.id&&i.push([r.id,{downloadStatus:oe(r.download_status)?r.download_status:void 0,lastDownloadedAt:"number"==typeof r.last_downloaded_at?r.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof r.last_downloaded_version?r.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===r.is_explicitly_offlined_origin,isAutosyncedOrigin:!0}]);return i}async function te(e){const{connection:t,pageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT COUNT(*) FROM offline_page WHERE id = ${n} AND meta_user_id = ${o} LIMIT 1`.asRead()]});return 1===M().Jt(i,"[0][COUNT(*)]")}async function ne(e){const{connection:t,impactedPageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT * FROM offline_action WHERE impacted_page_id = ${n} AND meta_user_id = ${o}`.asRead()]}),r=[];for(const s of i)(0,B().Gv)(s)&&(0,B().O)(s,"impacted_page_id")&&"string"==typeof s.impacted_page_id&&(!(0,B().O)(s,"autosync_type")||"frecent"!==s.autosync_type&&"not_autosynced"!==s.autosync_type||r.push({impactedPageId:s.impacted_page_id,originPageId:"string"==typeof s.origin_page_id?s.origin_page_id:void 0,autosyncType:(a=s.autosync_type,"frecent"===a||"not_autosynced"===a?s.autosync_type:void 0)}));var a;return r}function oe(e){return"downloading"===e||"success"===e||"failed"===e}async function ie(e){const{connection:t,pageId:n,userId:o}=e,[{data:[i]}]=await U({connection:t,statements:[T().F4`
				SELECT last_downloaded_version FROM offline_page
				WHERE id = ${n}
				AND meta_user_id = ${o}
			`.asRead()]});if((0,B().Gv)(i)&&(0,B().O)(i,"last_downloaded_version")&&"number"==typeof i.last_downloaded_version)return i.last_downloaded_version}async function re(e){const{connection:t,pageId:n,userId:o}=e,i=T().F4`
					SELECT
						download_status,
						last_downloaded_at,
						last_downloaded_version,
						CASE 
								WHEN EXISTS (
									SELECT 1 FROM offline_action
									WHERE offline_action.impacted_page_id = offline_page.id
									AND offline_action.origin_page_id = offline_page.id
									AND offline_action.autosync_type = 'not_autosynced'
								)
								THEN 1
								ELSE 0
						END AS is_explicitly_offlined_origin,
						CASE
								WHEN EXISTS (
									SELECT 1 FROM offline_action
									WHERE offline_action.impacted_page_id = offline_page.id
									AND offline_action.origin_page_id = offline_page.id
									AND offline_action.autosync_type = 'frecent'
								)
								THEN 1
								ELSE 0
						END AS is_autosynced_origin
					FROM offline_page
					WHERE meta_user_id = ${o}
						AND id = ${n}
					LIMIT 1
				`,[{data:r}]=await U({connection:t,statements:[i.asRead()]});if(1===r.length){const e=r[0];if((0,B().Gv)(e)&&(0,B().O)(e,"download_status")&&"string"==typeof e.download_status)return{downloadStatus:oe(e.download_status)?e.download_status:void 0,lastDownloadedAt:"number"==typeof e.last_downloaded_at?e.last_downloaded_at:void 0,lastDownloadedVersion:"number"==typeof e.last_downloaded_version?e.last_downloaded_version:void 0,isExplicitlyOfflinedOrigin:1===e.is_explicitly_offlined_origin,isAutosyncedOrigin:1===e.is_autosynced_origin}}}async function ae(e){const{connection:t,userId:n,pageId:o}=e;await F({connection:t,statements:[T().F4`INSERT OR IGNORE INTO offline_page (meta_user_id, id) VALUES (${n}, ${o})`.asWrite()]})}async function se(e){const{connection:t,userId:n,originPageId:o,impactedPageId:i,autosyncTypes:r}=e;await F({connection:t,statements:r.map((e=>T().F4`INSERT OR IGNORE INTO offline_action (meta_user_id, origin_page_id, impacted_page_id, autosync_type) VALUES (${n}, ${o}, ${i}, ${e})`.asWrite()))})}async function le(e){const{connection:t,userId:n,originPageId:o,impactedPageIds:i}=e,r=i.map((e=>"?")).join(","),a="string"==typeof o?{sql:`\n\t\t\t\t\t\tDELETE FROM offline_action\n\t\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t\tAND origin_page_id = ?\n\t\t\t\t\t\tAND impacted_page_id IN (${r})\n\t\t\t\t\t`,args:[n,o,...i]}:{sql:`\n\t\t\t\t\t\tDELETE FROM offline_action\n\t\t\t\t\t\tWHERE meta_user_id = ?\n\t\t\t\t\t\tAND impacted_page_id IN (${r})\n\t\t\t\t\t`,args:[n,...i]};await F({connection:t,statements:[a,T().F4`DELETE FROM offline_page 
			WHERE meta_user_id = ${n}
			AND NOT EXISTS (
				SELECT 1 
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${n}
			)`.asWrite()]})}async function ce(e){const{connection:t,userId:n,impactedPageId:o,originPageId:i,autosyncTypes:r,downloadStatus:a}=e,s=[T().F4`INSERT OR IGNORE INTO offline_page (
			id,
			meta_user_id,
			download_status
		) VALUES (
			${o},
			${n},
			${a}
		)`.asWrite(),...r.map((e=>T().F4`INSERT OR IGNORE INTO offline_action (
				meta_user_id,
				origin_page_id,
				impacted_page_id,
				autosync_type
			) VALUES (
				${n},
				${i},
				${o},
				${e}
			)`.asWrite()))];await F({connection:t,statements:s})}async function de(e){const{connection:t,pageId:n,userId:o,lastDownloadedAt:i,lastDownloadedVersion:r}=e,a=[T().F4`
			UPDATE offline_page
			SET
				last_downloaded_at = ${i},
				last_downloaded_version = ${r??null}
			WHERE id = ${n}
			AND meta_user_id = ${o}
		`.asWrite()];await F({connection:t,statements:a})}async function ue(e){const{connection:t,originPageId:n,userId:o,visitedBlockIds:i,skippedCollectionIds:r}=e,a=[T().F4`offline_action.meta_user_id = ?`,T().F4`origin_page_id = ?`],s=[o,n];if(i.size){const e=Array.from(i),t=T().F4.or(e.map((e=>T().F4`block.id = ?`)));a.push(T().F4`NOT (${t})`),s.push(...e)}if(r.size){const e=Array.from(r),t=T().F4.or(e.map((e=>T().F4`block.parent_id = ?`)));a.push(T().F4`NOT (${t})`),s.push(...e)}const l=T().F4.and(a),c={sql:T().F4`
			SELECT impacted_page_id 
			FROM offline_action 
			JOIN block ON offline_action.impacted_page_id = block.id 
			WHERE ${l}`.sql(),args:s},[{data:d}]=await U({connection:t,statements:[{...c,getData:!0}]});return d.map((e=>e.impacted_page_id))}async function pe(e){const{connection:t,spaceId:n,userId:o,includeArchived:i=!1,onlyJoinedTeams:r=!1}=e,[{data:a}]=await U({connection:t,statements:[T().F4`
		  SELECT * FROM team
		  WHERE ${T().F4.and([T().F4`parent_id = ${n}`,T().F4`parent_table = 'space'`,T().F4`meta_user_id = ${o}`,i?T().F4`1=1`:T().F4`archived_by IS NULL`])}
		`.asRead()]}),s=[],l=I.find((e=>"team"===e.table));if(!l)return[];for(const c of a){if(!(0,B().Gv)(c))continue;const e={value:K(c,l),role:c.meta_role};if(!e.value)continue;const t={id:String(e.value.id),version:Number(e.value.version||0),space_id:String(e.value.space_id||n),parent_id:n,parent_table:"space",name:String(e.value.name),description:String(e.value.description),created_time:Number(e.value.created_time),created_by_table:e.value.created_by_table,created_by_id:String(e.value.created_by_id),is_default:Boolean(e.value.is_default||!1),settings:(0,B().Gv)(e.value.settings)?e.value.settings:{visibility:"team_members",space_member_join_access:"invite_only",invite_access:"team_owners"},membership:Array.isArray(e.value.membership)?e.value.membership:[]};s.push(t)}return r?s.filter((e=>Array.isArray(e.membership)&&e.membership.some((e=>(0,B().Gv)(e)&&(0,B().O)(e,"user_id")&&e.user_id===o)))):s}async function me(e){const{connection:t,pageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT download_status FROM offline_page WHERE id = ${n} AND meta_user_id = ${o} LIMIT 1`.asRead()]});if(0!==i.length)return M().Jt(i,"[0][download_status]")}async function ge(e){const{connection:t,pageId:n,userId:o,downloadStatus:i}=e;await F({connection:t,statements:[T().F4`UPDATE offline_page SET download_status = ${i} WHERE id = ${n} AND meta_user_id = ${o}`.asWrite()]})}async function fe(e){const{connection:t,originPageId:n,userId:o,autosyncType:i}=e;await F({connection:t,statements:[T().F4`DELETE FROM offline_action WHERE ${T().F4.and([T().F4`meta_user_id = ${o}`,T().F4`origin_page_id = ${n}`,T().F4`autosync_type = ${i}`])}`.asWrite(),T().F4`DELETE FROM offline_page 
			WHERE meta_user_id = ${o}
			AND NOT EXISTS (
				SELECT 1
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${o}
			)`.asWrite()]})}async function ve(e){const{connection:t,userId:n}=e;await F({connection:t,statements:[T().F4`DELETE FROM offline_action WHERE ${T().F4.and([T().F4`meta_user_id = ${n}`,T().F4`autosync_type = ${"frecent"}`])}`.asWrite(),T().F4`DELETE FROM offline_page 
			WHERE meta_user_id = ${n}
			AND NOT EXISTS (
				SELECT 1
				FROM offline_action 
				WHERE offline_action.impacted_page_id = offline_page.id
				AND offline_action.meta_user_id = ${n}
			)`.asWrite()]})}async function he(e){const{connection:t,pageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT COUNT(*) FROM offline_action WHERE ${T().F4.and([T().F4`meta_user_id = ${o}`,T().F4`impacted_page_id = ${n}`,T().F4`origin_page_id = ${n}`])} LIMIT 1`.asRead()]});return 1===M().Jt(i,"[0][COUNT(*)]")}async function _e(e){const{connection:t,pageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT offline_page.id FROM offline_action
			JOIN offline_page ON offline_action.impacted_page_id = offline_page.id
			WHERE ${T().F4.and([T().F4`offline_page.meta_user_id = ${o}`,T().F4`offline_action.meta_user_id = ${o}`,T().F4`offline_action.origin_page_id = ${n}`,T().F4`offline_action.impacted_page_id <> ${n}`])}`.asRead()]}),a=i.map((e=>(0,B().Gv)(e)&&(0,B().O)(e,"id")&&"string"==typeof e.id?e.id:void 0)).filter(B().O9);if(0===a.length)return[];return(await G(t,a.map((e=>({userId:o,pointer:{id:e,table:r().ev}}))))).map((e=>{var t,n,o;if(null!==(t=e.value)&&void 0!==t&&t.value)return"type"in(null===(n=e.value)||void 0===n?void 0:n.value)&&"collection_view"===(null===(o=e.value)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.type)?e.pointer.id:void 0})).filter(B().O9)}async function be(e){const{connection:t,pageId:n,userId:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT last_downloaded_at FROM offline_page WHERE id = ${n} AND meta_user_id = ${o} LIMIT 1`.asRead()]});if(0!==i.length)return M().Jt(i,"[0][last_downloaded_at]")}async function ye(e){const{connection:t,userId:n,taskType:o}=e,[{data:i}]=await U({connection:t,statements:[T().F4`SELECT last_executed_at FROM offline_download_metadata WHERE ${T().F4.and([T().F4`meta_user_id = ${n}`,T().F4`task_type = ${o}`])} LIMIT 1`.asRead()]});return M().Jt(i,"[0][last_executed_at]")}async function Se(e){const{connection:t,userId:n,taskType:o,lastExecutedAt:i}=e;await F({connection:t,statements:[T().F4`INSERT OR REPLACE INTO offline_download_metadata (meta_user_id, task_type, last_executed_at) VALUES (${n}, ${o}, ${i})`.asWrite()]})}async function we(e){const t=[];x.forEach((e=>{t.push(T().F4`DELETE FROM ${T().F4.ident(e)}`.asWrite())})),await O({connection:e,statements:t,queryName:"deleteAllCachedRecordsFromSeparateTables"})}async function ke(e){await O({connection:e,statements:[{sql:"DELETE FROM records"}],queryName:"deleteAllCachedRecordsFromRecordsTable"})}async function Ie(e){await(0,C().fi)({connection:e})}async function xe(e){await we(e),await ke(e),await async function(e){await F({connection:e,statements:[T().F4`DELETE FROM offline_action`.asWrite(),T().F4`DELETE FROM offline_page`.asWrite()],queryName:"deleteAllCachedRecordsFromOfflineTables"})}(e)}async function Ae(e){const{connection:t,maxSize:n}=e,o={Records:{sql:`SELECT COUNT(*) FROM ${D.Records.tableName}`,getData:!0},Block:{sql:`SELECT COUNT(*) FROM ${D.Block.tableName}`,getData:!0}},i=await L({connection:t,statements:Object.values(o),queryName:"getTablesThatNeedEviction"}),r=M().Jt(i,"[0][data][0][COUNT(*)]"),a=M().Jt(i,"[1][data][0][COUNT(*)]");if("number"!=typeof r||"number"!=typeof a)throw new Error("getTablesThatNeedEviction query returned malformed results.");return[...r>n?["Records"]:[],...a>n?["Block"]:[]]}function Ce(e){return x.has(e.pointer.table)&&void 0!==e.value&&void 0!==e.value.value}async function Te(e){const{connection:t}=e,[n,o]=await Promise.all([(0,P().lX)(R,100,(e=>Me({connection:t,table:e,tableType:"recordCache"}))),(0,P().lX)(E,100,(e=>Me({connection:t,table:e,tableType:"offline"})))]);return{corruptRecordCacheResults:n.filter((e=>e.isCorrupt)).map((e=>({table:e.table,integrityCheckResult:e.integrityCheckResult}))),corruptOfflineResults:o.filter((e=>e.isCorrupt)).map((e=>({table:e.table,integrityCheckResult:e.integrityCheckResult})))}}async function Me(e){const{connection:t,table:n,tableType:o}=e,i="recordCache"===o?L:"offline"===o?U:(0,B().HB)(o);try{const[{data:e}]=await i({connection:t,statements:[{sql:`PRAGMA integrity_check(${n})`,getData:!0}]});return{table:n,integrityCheckResult:e,isCorrupt:Pe(e)}}catch(r){return r instanceof A().lh||r instanceof A().PW?{table:n,integrityCheckResult:[],isCorrupt:!0}:{table:n,integrityCheckResult:[],isCorrupt:!1}}}function Pe(e){return!!(e.length>=1&&(0,B().Gv)(e[0])&&(0,B().O)(e[0],"integrity_check"))&&"ok"!==e[0].integrity_check}async function Be(e){const{connection:t}=e,n=await U({connection:t,statements:[T().F4`SELECT * FROM "offline_page"`.asRead(),T().F4`SELECT * FROM "offline_action"`.asRead()]});return{offline_page:n[0].data,offline_action:n[1].data}}async function Re(e){const{connection:t,backup:n}=e,o=["last_downloaded_at","last_downloaded_version","download_status"],i=n.offline_page.map((e=>(0,B().Gv)(e)?M().cJ(e,o):void 0)).filter(B().O9),r=["id"],a=n.offline_action.map((e=>(0,B().Gv)(e)?M().cJ(e,r):void 0)).filter(B().O9),s=[];if(i.length>0){const e=Object.keys(i[0]),t=`INSERT OR IGNORE INTO offline_page (${e.join(", ")}) VALUES ${i.map((t=>`(${e.map((e=>t[e]?`'${t[e]}'`:"null")).join(", ")})`))}`;s.push({sql:t})}if(a.length>0){const e=Object.keys(a[0]),t=`INSERT OR IGNORE INTO offline_action (${e.join(", ")}) VALUES ${a.map((t=>`(${e.map((e=>t[e]?`'${t[e]}'`:"null")).join(", ")})`))}`;s.push({sql:t})}s.length>0&&await F({connection:t,statements:s})}},359848:(e,t,n)=>{n.d(t,{h:()=>l});n(296540);var o=()=>n(401497),i=()=>n(358373),r=()=>n(965998),a=n(474848);const s="#CB9433";function l(e){const{onlyShowDraftDot:t,customTop:n,customLeft:l,withBackgroundFill:c}=e,d=(0,o().IS)((e=>({icon:{height:24,width:24,color:e.text.tertiary},sharedDotStyles:{position:"absolute",borderRadius:"50%",color:s,stroke:e.whiteButtonBackground,strokeWidth:"1.2px",pointerEvents:"none"},absoluteDot:{top:n??20,left:l??"calc(50% + 4px)",height:12,width:12},absoluteOnlyDot:{top:n??6,left:l??19,height:8,width:8},withBackgroundFill:{backgroundColor:s,fill:"transparent"},container:{width:"100%",display:"flex",justifyContent:"center",marginBottom:10}})),[l,n]);return t?(0,i().v)({...d.sharedDotStyles,...d.absoluteOnlyDot,...c&&d.withBackgroundFill}):(0,a.jsxs)("div",{style:d.container,children:[(0,r().M)(d.icon),(0,i().v)({...d.sharedDotStyles,...d.absoluteDot})]})}},360083:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){let{isAuthenticated:t,url:i,width:r,onFinishedLoadingProxyUrl:a,permissionRecord:s,stripGoogleIconQuery:l,disableAnimation:c,render:d}=e;const u=(0,n(484714).v3)(),[p]=(0,n(187174).Yb)((()=>{const e=t?{isAuthenticated:!0,url:i,width:r,permissionRecord:s,stripGoogleIconQuery:l,disableAnimation:c}:{isAuthenticated:!1,url:i,width:r,permissionRecord:void 0,stripGoogleIconQuery:l,disableAnimation:c};return(0,n(179266).L)(e,u,a)}),[u,a,i,r,s,l,c,t]),m=d(p.error,p.value);return(0,o.jsx)(o.Fragment,{children:m??null})}},361330:(e,t,n)=>{n.d(t,{GR:()=>i,ab:()=>r,tu:()=>o});const o=300,i=75,r=225},361873:(e,t,n)=>{n.d(t,{A:()=>N});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(534177),s=()=>n(633457),l=()=>n(493208),c=()=>n(891078);class d extends(()=>n(757695))().default{getInitialState(){return{error:!1,loading:!1}}}const u=d;var p=()=>n(155004),m=()=>n(401497);function g(e,t){n(989423).vd(e,"view_link_preview",t)}var f=()=>n(227440),v=(n(581454),()=>n(681873)),h=()=>n(506391),_=()=>n(284371),b=()=>n(645873);const y=new(b().O2)("TooltipOnSlackEmbed",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(49908)]).then(n.bind(n,909492)))),S=(0,b()._h)(y,(e=>e.TooltipOnSlackEmbed));var w=()=>n(106352),k=()=>n(854672),I=()=>n(296798),x=n(474848);const A=o.forwardRef((function(e,t){var s;const{state:d,store:u,style:p,externalObjectTokenStore:b,canEdit:y,forceActionForUIDoc:k,onClick:A,showDefaultAction:P}=e,{originalUrl:B,renderConfig:R,integration:E,updating:D,status_code:N}=d,L=(0,i().v3)(),O=(0,o.useRef)(null),U="placeholder"===d.type,F="error"===d.type,V=(0,r().K8)((()=>B&&(0,l().e)(B,u.pointer.spaceId)),[u.pointer,B]),{botId:j,externalObjectId:z}=(0,r().K8)((()=>{const e=u.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[u]),H=(0,r().K8)((()=>n(131448).default.isVisible("ai_slack_qna_embed_tooltip")),[]),W=(0,r().K8)((()=>b.state.loading),[b]);(0,o.useEffect)((()=>{g(L,{integrationName:E.name,integrationId:E.id,botId:j,externalObjectId:z})}),[E,j,z,L]);const q=(0,c().pW)(u),K=!(0,r().O$)(f().e),G=(0,m().IS)((e=>{const t=!(!Boolean(R.previewAttributes)||!R.previewAttributes)&&(0,a().EI)(R.previewAttributes);return{linkBox:{flexGrow:1,minWidth:0,...(U||F)&&{background:e.embedPlaceholderBackground},...K&&{opacity:.4}},linkBoxInner:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:t?"0px 0px 4px 4px":4,borderLeft:t?"none":`1px solid ${e.tableDividerColor}`,borderRight:t?"none":`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...q,...p},title:{fontWeight:_().Wy.medium,..._().RC,color:e.text.primary},subHeaderContainer:{display:"flex",alignItems:"center",color:e.text.secondary,fontSize:12}}}),[U,F,R.previewAttributes,q,p,K]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(I().A,{style:G.linkBox,innerStyle:G.linkBoxInner,...U||F?{onClick:A}:{href:V,external:!0},disableForOffline:K,children:[(0,x.jsx)("div",{style:{display:"flex",alignSelf:"start",height:32,width:32,marginRight:12,marginLeft:4,marginTop:3,marginBottom:3,position:"relative"},children:(0,x.jsx)(C,{renderConfig:R,integrationIcon:E.icon})}),(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",flexGrow:1,flexShrink:1,overflow:"hidden"},children:[(0,x.jsxs)("div",{style:{display:"flex",alignItems:"baseline",fontSize:14},children:[(0,v().A)((null===(s=R.headerAttributes)||void 0===s?void 0:s.map(((e,t)=>(0,x.jsx)(w().Ic,{...e,store:u,style:0===t?G.title:{}},`attribute-${t}`))))||[],(e=>(0,x.jsx)("span",{style:{marginRight:6}},`spacer-${e}`))),(D||439===N||W)&&(0,x.jsx)(n(331542).A,{style:{marginLeft:6}})]}),R.bodyAttribute&&((0,h().Q7)(R.bodyAttribute)?(0,x.jsx)(w().L1,{attribute:R.bodyAttribute}):(0,x.jsx)(w().xq,{attribute:R.bodyAttribute,store:u})),(0,x.jsxs)("div",{style:G.subHeaderContainer,children:[R.subheaderIcon&&(0,x.jsx)(T,{attribute:R.subheaderIcon}),R.subheaderAttributes&&(0,v().A)(R.subheaderAttributes.map((e=>(0,x.jsx)(M,{attributeConfig:e,store:u},e.attribute.id))),(e=>(0,x.jsx)("span",{style:{marginLeft:3,marginRight:3},children:"•"},e)))]})]}),U?null:(0,x.jsx)(n(66858).A,{canEdit:y,forceActionForUIDoc:k,store:u,renderDefaultAction:P?"shown":"invisible",buttonStyle:R.bodyAttribute?{alignSelf:"flex-start",marginTop:4}:{marginLeft:4},openPlaceholderMenu:A})]}),(0,x.jsx)(n(594607).B,{shouldShow:H,calloutId:"ai_slack_qna_embed_tooltip",children:(0,x.jsx)(S,{origin:O,originalUrl:B})})]})}));function C(e){let{renderConfig:t,integrationIcon:o}=e;const i=(0,m().DP)(),r=n(496603).hS(t.icons||[],(e=>`${e.type}:${e.values[0].toString()}`));return r.length>=2?(0,x.jsxs)("div",{style:{width:32,height:32},children:[(0,x.jsx)(w().Tr,{attribute:r[0],isSmall:!0}),(0,x.jsx)(w().Tr,{attribute:r[1],isSmall:!0,style:{position:"absolute",bottom:0,right:2}}),(0,x.jsx)(k().A,{type:"image_url",imageURL:o,size:16,style:{position:"absolute",bottom:-3,right:-3},imageStyle:P(i)})]}):1===r.length?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(w().Tr,{attribute:r[0],isSmall:!1}),(0,x.jsx)(k().A,{type:"image_url",imageURL:o,size:16,style:{position:"absolute",bottom:-2,right:-2},imageStyle:P(i)})]}):(0,x.jsx)(k().A,{type:"image_url",imageURL:o,size:38})}function T(e){let{attribute:t}=e;const o=(0,m().DP)();if((0,h().nN)(t)){const e=t.values[0];return(0,x.jsx)(n(360083).A,{isAuthenticated:!1,url:e,width:32,render:(e,t)=>(0,x.jsx)(n(807683).Ay,{src:t,height:12,placeholderLoadedStyle:{width:12,height:12,marginRight:4}})})}if((0,h().YX)(t)){const e=t.values[0],i=e?`rgb(${e.r},${e.g},${e.b})`:"gray",{colorName:r,shade:a}=(0,n(100622).zl)(i);return(0,x.jsx)("div",{style:{width:12,height:12,marginRight:4,background:o.accentColors[r][a],borderRadius:4,flexShrink:0}})}return null}function M(e){let{attributeConfig:t,store:n}=e;return(0,x.jsx)(w().Ic,{...t,store:n})}function P(e){return{filter:`\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n            drop-shadow(0px 0px 1px ${e.contentBackground})\n        `}}const B=o.forwardRef((function(e,t){const{attributes:s,state:c,store:d,blockResizerStore:u,externalObjectTokenStore:p,canEdit:v,forceActionForUIDoc:h,onClick:_,showDefaultAction:b}=e,y=s[0],{values:S,mimeType:w}=y,k=S[0],I=(0,i().v3)(),C=(0,r().K8)((()=>d.isExternalObjectInstanceBlockStore()?d:void 0),[d]),{botId:T,externalObjectId:M}=(0,r().K8)((()=>{const e=d.getFormat();return{botId:(null==e?void 0:e.bot_id)||"",externalObjectId:(null==e?void 0:e.external_object_id)||""}}),[d]);(0,o.useEffect)((()=>{g(I,{integrationName:c.integration.name,integrationId:c.integration.id,botId:T,externalObjectId:M})}),[c.integration,T,M,I]);const P=(0,m().IS)((e=>({container:{overflow:"hidden",borderRadius:6,border:`1px solid ${e.tableDividerColor}`,borderBottom:void 0,position:"relative"}})),[]);let B;"image/*"===w?B="image":"audio/*"===w?B="audio":"video/*"===w?B="video":"application/pdf"===w?B="pdf":"text/html"===w?B="embed":(0,a().HB)(w);const R="image"===B||"pdf"===B||"embed"===B,E=!(0,r().O$)(f().e),{action:D}=(0,r().K8)((()=>(0,l().Cm)({store:d,isInDarkMode:"dark"===I.ThemeStore.state.mode,canEdit:v,currentUserId:I.currentUser.id,showAction:h})),[d,I,v,h])??{},N=E&&("error"===D||"authenticate"===D);return C?(0,x.jsx)("div",{style:P.container,children:(0,x.jsx)(n(24611).Ay,{store:C,source:k,showExpandButton:R,mediaType:B,disabled:!1,preserveScale:"image"===B,blockResizerStore:u,contentBelowSource:(0,x.jsx)(A,{state:c,store:d,canEdit:v,externalObjectTokenStore:p,forceActionForUIDoc:h,ref:t,onClick:_,showDefaultAction:b}),disableContent:N})}):null}));function R(e){const{originalUrl:t,store:n}=e,o=(0,c().pW)(n),i=(0,m().IS)((e=>({linkBox:{display:"flex",alignItems:"center",border:`1px solid ${e.tableDividerColor}`,borderRadius:4,borderLeft:`1px solid ${e.tableDividerColor}`,borderRight:`1px solid ${e.tableDividerColor}`,padding:"8px 12px",...o}})),[o]);return(0,x.jsxs)(I().A,{href:t,external:!0,style:{flexGrow:1,minWidth:0},innerStyle:i.linkBox,children:[(0,x.jsx)(E,{style:{width:38,height:38}}),(0,x.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexGrow:1},children:[(0,x.jsx)(E,{style:{width:"50%",height:14,margin:4}}),(0,x.jsx)(E,{style:{width:"40%",height:12,margin:4}})]})]})}function E(e){let{style:t}=e;const n=(0,m().IS)((e=>({container:{overflow:"hidden",position:"relative",background:e.selectLightGray[30],...t},shimmerDiv:{position:"absolute",height:"100%",width:"100%",zIndex:1,animation:"shimmer 1s infinite",background:`linear-gradient(to right, ${e.selectLightGray[30]} 0%, ${e.selectLightGray[50]} 20%, ${e.selectLightGray[30]} 40%, ${e.selectLightGray[30]} 100%)`}})),[t]);return(0,x.jsx)("div",{style:n.container,children:(0,x.jsx)("div",{style:n.shimmerDiv})})}function D(e,t){const{store:d}=e,m=(0,o.useRef)(null),g=(0,i().v3)(),f=(0,c().bx)(d,e.disabled),[v,h]=(0,o.useState)(!1),_=v||g.device.isMobile,b=(0,r().uB)(void 0,u),y=(0,r().uB)(e.blockResizerStore,n(891279).A),S=(0,o.useCallback)((()=>{h(!0)}),[]),w=(0,o.useCallback)((()=>{h(!1)}),[]),k=(0,r().K8)((()=>(0,l().Cm)({store:d,isInDarkMode:L(g),canEdit:f,currentUserId:g.currentUser.id,showAction:e.forceActionForUIDoc})),[f,g,e.forceActionForUIDoc,d],{useDeepEqual:!0}),I=(0,r().K8)((()=>(0,l().gV)(d)),[d]),C=(0,o.useCallback)((()=>{if("placeholder"===(null==k?void 0:k.type)||"error"===(null==k?void 0:k.type)){const e=m.current;if(e&&e instanceof Element)return e}}),[k]),T=(0,o.useCallback)((()=>{const e=C();e&&function(e,t,n,o,i){const r=(0,l().gV)(n);s().pk({originRect:e.getBoundingClientRect(),environment:t,externalObjectInstanceBlockStore:n,placeholderIntegrationId:null==r?void 0:r.integration_id,integration:null==i?void 0:i.integration,externalObjectTokenStore:o})}(e,g,d,b,k)}),[g,b,C,d,k]),M=k?"error"!==k.type||null!=I&&I.integration_id?(0,x.jsx)(p().s,{allowSelectionWithin:!0,ref:m,onMouseEnter:S,onMouseLeave:w,children:k.renderConfig.previewAttributes&&(0,a().EI)(k.renderConfig.previewAttributes)?(0,x.jsx)(B,{attributes:k.renderConfig.previewAttributes,blockResizerStore:y,canEdit:f,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,onClick:T,ref:m,showDefaultAction:_}):(0,x.jsx)(A,{canEdit:f,externalObjectTokenStore:b,state:k,store:d,forceActionForUIDoc:e.forceActionForUIDoc,style:e.style,onClick:T,ref:m,showDefaultAction:_})}):(0,x.jsx)(p().s,{allowSelectionWithin:!0,ref:m,children:(0,x.jsx)(R,{store:d,style:e.style,originalUrl:k.originalUrl})}):(0,x.jsx)(p().s,{allowSelectionWithin:!0,ref:m,children:(0,x.jsx)(R,{store:d,style:e.style,originalUrl:void 0})});return(0,c().NW)(d,t,(0,o.useMemo)((()=>({renderedType:"external_object_instance",getBlockStore:()=>d,getNode:()=>m.current,handleCreated:T})),[T,d]),M)}const N=o.memo(o.forwardRef(D),n(821062).A);function L(e){return"dark"===e.ThemeStore.state.mode}},363019:(e,t,n)=>{n.d(t,{F:()=>p});var o=()=>n(209416),i=()=>n(473227),r=()=>n(930545),a=()=>n(878377),s=()=>n(792609),l=()=>n(202786),c=()=>n(165162),d=()=>n(416726);const u=(0,n(959013).YK)({suggestName:{id:"action.suggest.name",defaultMessage:"Suggest"},suggestName6dotRedesign:{id:"action.suggest.name.6dotredesign",defaultMessage:"Suggest edits"}});function p(e){return(0,d().Fw)({key:"suggest",displayName:(0,c().Sx)({gateName:"updated_6dot_menu"})?u.suggestName6dotRedesign:u.suggestName,analyticsName:u.suggestName.defaultMessage,svg:o().a,hideFromSlashActionMenu:!0,validators:[a().AU6(a().FrL),a().$9,a().AU6(a().vEP),s().Y,r()._h,r().bn,a().or([a().vXb,l().T]),a().AU6(a().yAQ)],shortcuts:["suggest"],closeParentMenu:!0,action:t=>{let{blocks:n,environment:o}=t;n[0]&&i().tf({environment:o,navigableBlockStore:n[0],mode:"suggest",location:e})}})}},364280:(e,t,n)=>{n.d(t,{VP:()=>s,fI:()=>a});n(296540);var o=()=>n(401497),i=n(474848);function r(e){const t=(0,o().IS)((t=>{const n=function(e){const t={};return void 0!==e.margin&&(t.margin=e.margin),void 0!==e.marginTop&&(t.marginTop=e.marginTop),void 0!==e.marginBottom&&(t.marginBottom=e.marginBottom),void 0!==e.marginLeft&&(t.marginLeft=e.marginLeft),void 0!==e.marginRight&&(t.marginRight=e.marginRight),t}({margin:e.margin,marginTop:e.marginTop,marginBottom:e.marginBottom,marginLeft:e.marginLeft,marginRight:e.marginRight}),o=function(e){const t={};return void 0!==e.padding&&(t.padding=e.padding),void 0!==e.paddingTop&&(t.paddingTop=e.paddingTop),void 0!==e.paddingBottom&&(t.paddingBottom=e.paddingBottom),void 0!==e.paddingLeft&&(t.paddingLeft=e.paddingLeft),void 0!==e.paddingRight&&(t.paddingRight=e.paddingRight),t}({padding:e.padding,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,paddingLeft:e.paddingLeft,paddingRight:e.paddingRight});return{root:{display:"flex",flexDirection:e.flexDirection,alignItems:e.alignItems,justifyContent:e.justifyContent,alignSelf:e.alignSelf,gap:e.gap??"inherit",flexGrow:e.grow,flexWrap:e.wrap,height:e.height,width:e.width,...n,...o}}}),[e.flexDirection,e.alignItems,e.justifyContent,e.alignSelf,e.gap,e.margin,e.padding,e.grow,e.wrap,e.height,e.marginTop,e.marginBottom,e.marginLeft,e.marginRight,e.paddingTop,e.paddingBottom,e.paddingLeft,e.paddingRight,e.width]);return(0,i.jsx)("div",{style:t.root,children:e.children})}function a(e){return(0,i.jsx)(r,{flexDirection:"row",...e})}function s(e){return(0,i.jsx)(r,{flexDirection:"column",...e})}},365002:(e,t,n)=>{n.d(t,{Y:()=>s,_:()=>l});var o=()=>n(484714),i=()=>n(847249),r=()=>n(134217),a=()=>n(47170);function s(e,t){return(0,i().K8)((()=>r()._7(e,t.state)),[e,t])}function l(){const e=(0,o().v3)(),t=(0,a().O)();return(0,i().K8)((()=>r().e9(e,t)),[e,t])}},365136:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(959013),i=()=>n(100622),r=n(474848);const a=function(e){let{style:t}=e;return(0,r.jsx)(n(859428).A,{renderTooltip:()=>(0,r.jsx)(o().sA,{defaultMessage:"Only you can see this page",id:"privatePageBadge.tooltip"}),render:e=>(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",...t||{}},...e,children:(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,r.jsx)("div",{style:{flexShrink:0,marginTop:-1,marginRight:4,fill:i().Ay.red},children:(0,r.jsx)(n(8980).I,{icon:n(642557).lockSmallIcon,size:"sm"})}),(0,r.jsx)("span",{style:{fontSize:12,fontWeight:n(284371).Wy.semibold,color:i().Ay.red},children:(0,r.jsx)(o().sA,{defaultMessage:"Private",id:"privatePageBadge.label"})})]})})})}},365233:(e,t,n)=>{n.d(t,{A:()=>o});n(898992),n(908872);function o(e){return![".","#","$","[","]"].map((t=>-1!==e.indexOf(t))).reduce(((e,t)=>e||t),!1)}},366295:(e,t,n)=>{n.d(t,{L:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("face",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00992 2.5822C7.37564 1.60345 5.34973 1.8529 4.00205 3.05811C3.69329 3.33423 3.66683 3.80837 3.94295 4.11712C4.21906 4.42588 4.6932 4.45234 5.00196 4.17622C5.874 3.39637 7.18434 3.23731 8.23923 3.86907C8.49682 4.02334 8.71888 4.21224 8.90393 4.42579C9.17518 4.73883 9.64885 4.7727 9.96188 4.50144C10.2749 4.23018 10.3088 3.75652 10.0375 3.44348C9.7497 3.11132 9.40554 2.81913 9.00992 2.5822ZM10.5773 5.23958C11.7812 3.22935 14.3868 2.57569 16.397 3.77958C17.031 4.15924 17.5315 4.6799 17.8804 5.27786C18.0892 5.6356 17.9685 6.09487 17.6107 6.30365C17.253 6.51244 16.7937 6.39169 16.5849 6.03394C16.3601 5.64878 16.038 5.31297 15.6264 5.06646C14.3268 4.2882 12.6425 4.71076 11.8642 6.01027L6.20294 15.4633L10.5234 16.1636C10.9322 16.2299 11.21 16.615 11.1437 17.0239C11.0774 17.4328 10.6922 17.7105 10.2834 17.6443L4.87132 16.767C4.62587 16.7272 4.41609 16.5684 4.31125 16.3429C4.2064 16.1175 4.22013 15.8547 4.34788 15.6414L10.5773 5.23958ZM14.4038 8.94146C14.2934 9.6229 13.6514 10.0858 12.97 9.97532C12.2885 9.86487 11.8257 9.22291 11.9361 8.54147C12.0466 7.86003 12.6885 7.39716 13.37 7.50761C14.0514 7.61806 14.5143 8.26002 14.4038 8.94146ZM7.81488 7.87364C7.70443 8.5551 7.06245 9.01799 6.38099 8.90754C5.69953 8.79708 5.23663 8.15511 5.34709 7.47364C5.45755 6.79218 6.09952 6.32929 6.78099 6.43975C7.46245 6.5502 7.92534 7.19218 7.81488 7.87364Z"})})},369186:(e,t,n)=>{n.d(t,{Lv:()=>k,dI:()=>w,fx:()=>b,jr:()=>y,ke:()=>x});n(16280),n(944114),n(898992),n(354520),n(672577),n(581454);var o=()=>n(534177),i=()=>n(31503),r=()=>n(708685),a=()=>n(970013),s=()=>n(487929),l=()=>n(713998),c=()=>n(651124),d=()=>n(390066),u=()=>n(924329),p=()=>n(778781),m=()=>n(691678),g=()=>n(475140),f=()=>n(564262),v=()=>n(976618),h=()=>n(120997),_=()=>n(251822);function b(e){const{rawModulesByArea:t,relatedRecordData:n,normalizationOptions:i}=e,{collectionSchema:r,collectionFormat:a,viewsModuleCollectionViewBlock:s,formQuestionModels:l}=n,{includeDeletedPropertyModules:c}=i;let d={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]};if(!t||!r)return d;const g=(0,v().E)(t,(e=>function(e){const{module:t}=e;if((0,p().cn)(t))return;if("property"===t.type)return w({...e,module:t});if("titleWithIcon"===t.type)return(0,u().X)(t);return t}({module:e,collectionSchema:r}))),f={page_main:g.page_layout_schema||[],page_details:g.page_info_layout_schema||[],form_layout_schema:g.form_layout_schema||[],person_profile_page_main:g.person_profile_page_main||[],person_profile_page_details:g.person_profile_page_details||[],...g.form_conditional_modules?{form_conditional_modules:g.form_conditional_modules}:{},...g.views_main_tab_modules?{views_main_tab_modules:g.views_main_tab_modules}:{}};return d=(0,m()._V)(f),d=y({modulesByArea:d,collectionSchema:r,collectionFormat:a,formQuestionModels:l,includeDeletedPropertyModules:c}),d=function(e){const t=function(e,t){const n=new Map,o=[];for(const i of e)t.includes(i.type)?n.has(i.type)||(n.set(i.type,i),o.push(i)):o.push(i);return o}(e.page_main,["normalizedTitleWithIcon"]);return{...e,page_main:S(t)}}(d),d=function(e){const{modulesByArea:t,viewsModuleCollectionViewBlock:n}=e;if(n)return t;let i=t;i=(0,m().KO)(t,(e=>"viewsMain"!==e.type));const r=i.views_main_tab_modules;if(!r)return i;const{nonMoveableHeaderModules:a,moveableModules:s,nonMoveableFooterModules:l}=(0,_().jS)("page_main",i.page_main),c=[],d=[],u=[];for(const p of(0,o().uv)(r)){const e=r[p],{nonMoveableHeaderModules:t,moveableModules:n,nonMoveableFooterModules:o}=(0,_().jS)("views_main_tab_modules",e);c.push(...t),d.push(...n),u.push(...o)}return i.page_main=[...a,...c,...s,...d,...l,...u],i.views_main_tab_modules=void 0,i}({modulesByArea:d,viewsModuleCollectionViewBlock:s}),d}function y(e){const{modulesByArea:t,collectionFormat:n,collectionSchema:r,formQuestionModels:u,includeDeletedPropertyModules:v}=e;let b=t;return b=(0,m().KO)(t,(e=>"expandedBacklinks"!==e.type)),b=function(e){const{collectionFormat:t,collectionSchema:n,modulesByArea:o}=e;let i=(0,m().KO)(o,(e=>!(0,p().N1)(e)&&!(0,p().QV)(e)));return i=function(e){var t;const{collectionFormat:n,collectionSchema:o,modulesByArea:i}=e,r=Boolean((0,g().JO)(i,p().V_)),a=n&&o?(0,d().L)(n,o,void 0,c().jf.Collection):void 0,l=a&&o?(0,s().u)({schema:o,format:a,visibilityLevels:["inline","minimal"]}):void 0,u=Boolean(null==l?void 0:l.length);if(u&&r)return i;if(!u&&!r)return i;if(!u&&r)return(0,m().KO)(i,(e=>!(0,p().V_)(e)));const v=(0,f().W)(i),h="views_main_tab_modules"===v.area?null==i||null===(t=i.views_main_tab_modules)||void 0===t?void 0:t[v.viewsMainTabId]:i.page_main;if(!h)throw new Error("layout area to add relations group module to is not initialized");const{nonMoveableHeaderModules:b,moveableModules:y,nonMoveableFooterModules:S}=(0,_().jS)(v.area,h),w=[...b,...y,{id:"relations_group",type:"relationsGroup"},...S];let k;k="views_main_tab_modules"===v.area?{...i,views_main_tab_modules:{...i.views_main_tab_modules,[v.viewsMainTabId]:w}}:{...i,page_main:w};return k}({collectionFormat:t,collectionSchema:n,modulesByArea:i}),i}({collectionFormat:n,collectionSchema:r,modulesByArea:b}),v||(b=(0,m().KO)(b,(e=>!(0,p().nM)(e)))),b=function(e){const{modulesByArea:t,collectionSchema:n,formQuestionModels:r}=e;if(!n||!r)return t;const s={...t,form_layout_schema:[],form_conditional_modules:{}},c=t.form_layout_schema,d=[...c],u=e=>{var t;if("formQuestion"!==e.type)return e;const s={...e,conditionalGroups:void 0},c=r.find((t=>t&&t.id===e.formQuestionId)),d=null==c||null===(t=c.getConfig())||void 0===t?void 0:t.propertyId;if(!d)return s;const u=(0,l()._g)({schema:n,property:d});if(!u)return s;const p=(0,a().lx)(u)||(0,l().MW)(u),m=c.getInternalQuestionErrorState({collectionSchema:n});if(!p||m)return s;const g=(0,i().hm)(u,c),f=(e.conditionalGroups??[]).map((e=>{const t=(0,i().xj)({propertyId:d,propertySchema:u,conditionalGroup:e});if(!t)return;const{filter:n}=t.trigger;return"enum_contains_all"===n.operator&&1===g?{...e,trigger:{...e.trigger,filter:{...n,operator:"enum_contains"}}}:t})).filter(o().O9);return{...e,conditionalGroups:f}};for(;d.length>0;){const e=d.shift();if(!e)continue;const n=u(e);if(n&&((0,h().p)(n,"form_conditional_modules")&&void 0!==n.parentModuleId?(s.form_conditional_modules||(s.form_conditional_modules={}),s.form_conditional_modules[n.id]=n):s.form_layout_schema.push(n),"formQuestion"===n.type))for(const o of n.conditionalGroups??[])for(const e of o.children??[]){var p;const n=null===(p=t.form_conditional_modules)||void 0===p?void 0:p[e];n&&d.push(n)}}return s}({modulesByArea:b,collectionSchema:r,formQuestionModels:u}),b}function S(e){const t=[...e],n=t.findIndex((e=>"editor"===e.type));if(-1!==n&&n!==t.length-1){const e=t.splice(n,1)[0];t.push(e)}return t}function w(e){const{module:t}=e;let n;if(n=e.collectionSchema?e.collectionSchema[t.propertyId]:e.collectionModel.getNormalizedSchema()[t.propertyId],!n)return{type:"deleted_property",id:t.id,rawModule:t};if((0,a().JY)(n)){var o;const e=`property_${n.type}`;return{type:e,propertyId:t.propertyId,id:t.id,style:(null===(o=t.config)||void 0===o||null===(o=o[e])||void 0===o?void 0:o.style)??"compact"}}var i,s,l;if((0,a().AM)(n))return{type:`property_${n.type}`,propertyId:t.propertyId,id:t.id,style:(null===(i=t.config)||void 0===i||null===(i=i.property_number)||void 0===i?void 0:i.style)??"large"};if("formula"===n.type)return{type:`property_${n.type}`,propertyId:t.propertyId,id:t.id,style:(0,r().isNumberFormulaPropertySchema)(n)?(null===(s=t.config)||void 0===s||null===(s=s.property_formula)||void 0===s?void 0:s.style)??"large":"small"};if("file"===n.type)return{type:`property_${n.type}`,propertyId:t.propertyId,id:t.id,style:(null===(l=t.config)||void 0===l||null===(l=l.property_file)||void 0===l?void 0:l.style)??"landscape"};return{type:`property_${n.type}`,propertyId:t.propertyId,id:t.id}}function k(e){if((0,p().gx)(e)){return{type:"property",propertyId:e.propertyId,id:e.id,config:I(e)}}return"deleted_property"===e.type?e.rawModule:"normalizedTitleWithIcon"===e.type?(0,u().I)(e):e}function I(e){if((0,p().gx)(e))switch(e.type){case"property_person":case"property_created_by":case"property_last_edited_by":case"property_number":case"property_formula":case"property_file":return{[e.type]:{style:e.style}};default:return{}}return{}}function x(e){return e.map((e=>k(e)))}},369241:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},370614:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{banners:[]}}}const i=o},372154:(e,t,n)=>{n.d(t,{A:()=>a,c:()=>o});let o=function(e){return e[e.Open=0]="Open",e[e.Resolved=1]="Resolved",e[e.NewThread=2]="NewThread",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1,rect:n(397248).v_}}getFramePageFirstSelectedDiscussionId(){var e,t;return this.state.open&&(n(489348).A.isBlockInFrame(this.state.blockStore)||this.state.blockStore.id===(null===(e=n(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id))?null===(t=this.state.discussionIds)||void 0===t?void 0:t[0]:void 0}addNewDiscussionId(e){this.state.open&&this.setState({...this.state,discussionIds:[...this.state.discussionIds??[],e],keepNewDiscussionAtBottom:!0})}getOpenDiscussionIds(){return this.state.open?this.state.discussionIds??[]:[]}}const r=new i;(0,n(604341).exposeDebugValue)("BlockDiscussionMenuStore",r);const a=r},372657:(e,t,n)=>{n.d(t,{Hc:()=>g,Pk:()=>u,n6:()=>m,rD:()=>p,zO:()=>d});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=()=>n(700500),i=()=>n(179034),r=()=>n(519831),a=()=>n(861841),s=()=>n(188669),l=()=>n(630116),c=()=>n(776894);function d(e,t){return!(!e.isNavigableBlock()&&e.getType()!==o().xd.alias)&&(!e.isLinkedCollectionView()&&(!e.getMovedStore().getValue()&&!(0,c().qy)({targets:t,destination:e,direction:a().bH.Onto})))}function u(e){let{recentPageResults:t,blockResults:n,suggestedPages:o}=e;const i=new Set;for(const r of o){const e=r instanceof l().md?r.getParentId():r.id;e&&i.add(e)}return[...t.filter((e=>!i.has(e.blockId))),...n.filter((e=>!i.has(e.blockId)))]}function p(e){const t=[];for(const o of e){const e=o.getParentPointer();if(e)if(e.table===i().ev)t.push(e.id);else if(e.table===r().Vl){var n;const e=null===(n=o.getAssociatedCollectionStore())||void 0===n?void 0:n.getParentPointer();e&&e.table===i().ev&&t.push(e.id)}}return t}function m(){const e=s().Ay.getDatabaseType();return"typed"===s().Ay.getVariant()&&e&&"notion://wiki_collection"!==e}function g(){return s().Ay.state.isOpen&&s().Ay.state.targets.length>0}},373444:(e,t,n)=>{n.d(t,{O:()=>o});const o=new(n(645873).O2)("workflowTemplatesOnboardingActions",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,317053))))},374026:(e,t,n)=>{n.d(t,{S:()=>a,V:()=>r});var o=()=>n(955825),i=()=>n(695625);function r(e){var t;let n,{discussionId:r}=e;const a=null===(t=document.getElementsByClassName(`${(0,o().wV)({discussionId:r})}`))||void 0===t?void 0:t[0];return a&&(n=i().T.findSelectableFromChildNode(a)),n}function a(e){let{discussionId:t,blockId:n}=e,o=r({discussionId:t});if(!o){const e=i().T.findScrollToSelectablesFromIds([n]);e.length>0&&(o=e[0])}return o}},375447:(e,t,n)=>{n.d(t,{A:()=>a,k:()=>i});var o=()=>n(40851);const i=["date","user","page","team","group","heading","bot","formula","custom-formula","createPage"];class r extends(()=>n(757695))().default{getInitialState(){return{open:!1,sessionId:void 0,botRequestStore:new(o().A),emptyQueryUserRequestStore:new(o().A),mentionTypes:{page:!1,heading:!1,createPage:!1,user:!1,inviteUserToWorkspace:!1,inviteUserToPage:!1,bot:!1,date:!1,reminder:!1,templateVariable:!1,group:!1,team:!1,formulaContextVariable:!1,slackSpecialMention:!1}}}updateOpenState(e){const t=this.state;t.open&&this.setState({...t,...e})}getMentionMenuContext(){const e=this.state;if(e.open)return e.textStore.table===n(179034).ev?"block":"comment"}getInviteOrigin(){return"comment"===this.getMentionMenuContext()?"comment_mention":"inline_mention"}getIsMockText(){var e;const t=this.state;return t.open&&(null===(e=t.textStore)||void 0===e?void 0:e.inMemoryRecordCache.isMockTextStore)}}const a=new r},375555:(e,t,n)=>{function o(e,t){const{device:n}=e;n.isAndroid&&t.focus(),t.select()}n.d(t,{G:()=>o})},377315:(e,t,n)=>{n.d(t,{CA:()=>d});n(16280),n(898992),n(354520),n(581454);var o=()=>n(534177),i=()=>n(720665),r=()=>n(638681);const a=Symbol("JSON Schema"),s=Symbol("JSON Schema Components"),l=Symbol("No JSON Schema");const c={isNull:()=>({type:"null",[s]:{}}),boolean:()=>({type:"boolean",[s]:{}}),number:()=>({type:"number",[s]:{}}),integer:()=>({type:"integer",[s]:{}}),string:()=>({type:"string",[s]:{}}),dateString:()=>({type:"string",format:"date",[s]:{}}),literal:e=>({enum:[e],[s]:{}}),literals:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{enum:t,[s]:{}}},uuid:()=>({type:"string",format:"uuid",[s]:{}}),binary:()=>({type:"string",format:"binary",[s]:{}}),uuidWithoutDashes:()=>({type:"string",format:"uuid",[s]:{}}),array:e=>({type:"array",items:e[a],[s]:e[a][s]}),tuple:e=>({type:"tuple",items:!1,prefixItems:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),record:(e,t)=>({type:"object",additionalProperties:t[a],[s]:t[a][s]}),object:e=>{let{required:t,optional:n,exact:o}=e;return{type:"object",properties:(0,i().MU)(Object.entries({...t,...n}).filter((e=>{let[t,n]=e;return n[a]!==l})).map((e=>{let[t,n]=e;return[t,n[a]]}))),...o&&{additionalProperties:!1},...Object.keys(t).length>0&&{required:Object.keys(t)},[s]:Object.assign({},...Object.values({...t,...n}).map((e=>e[a][s])))}},union:e=>({anyOf:e.map((e=>e[a])).filter((e=>e!==l)),[s]:Object.assign({},...e.map((e=>e[a][s])))}),gte:(e,t)=>{const n=e[a];return n!==l?{...n,minimum:t}:n},lte:(e,t)=>{const n=e[a];return n!==l?{...n,maximum:t}:n},maxLength:(e,t)=>{const n=e[a];if(n===l)return n;if("type"in n){if("string"===n.type)return{...n,maxLength:t};if("array"===n.type)return{...n,maxItems:t}}throw new Error("Unknown type for max length.")},minLength:(e,t)=>{const n=e[a];if(n===l)return n;if("type"in n){if("string"===n.type)return{...n,minLength:t};if("array"===n.type)return{...n,minItems:t}}throw new Error("Unknown type for min length.")},nonEmpty:e=>{const t=e[a];if(t===l)return t;if("type"in t){if("string"===t.type)return{...t,minLength:1};if("object"===t.type)return{...t,minProperties:1};if("array"===t.type)return{...t,minItems:1}}throw new Error("Unknown non-emptyable type.")},nullable:e=>{const t=e[a];if(t===l)return t;if("type"in t)if(Array.isArray(t.type)){if("null"===t.type[1])return t;(0,o().HB)(t.type[1])}else{if("string"===t.type)return{...t,type:[t.type,"null"]};if("object"===t.type)return{...t,type:[t.type,"null"]};if("array"===t.type)return{...t,type:[t.type,"null"]};if("tuple"===t.type)return{...t,type:[t.type,"null"]};if("boolean"===t.type)return{...t,type:[t.type,"null"]};if("integer"===t.type)return{...t,type:[t.type,"null"]};if("number"===t.type)return{...t,type:[t.type,"null"]};if("null"===t.type)return t;(0,o().HB)(t.type)}else{if("const"in t)return{...t,enum:[t.const,null]};if("enum"in t)return{...t,enum:[...t.enum,null]};if("anyOf"in t)return{...t,anyOf:t.anyOf.map((e=>c.nullable({[a]:e})))};if("$ref"in t)return{anyOf:[t,{type:"null"}],[s]:t[s]};if(n=t,(0,o().Gv)(n)&&0===Object.keys(n).length)return t;(0,o().HB)(t)}var n}},d=(0,i().MU)(Object.entries(c).map((e=>{let[t,n]=e;return[t,function(){for(var e=arguments.length,i=new Array(e),l=0;l<e;l++)i[l]=arguments[l];return 1===i.length&&(0,o().Gv)(i[0])&&("id"in i[0]||"description"in i[0])?function(){const{description:e,examples:o,id:l}=i[0];let c={description:e,...o&&{examples:o},...n(...arguments)};return l&&(c={$ref:`#/components/schemas/${l}`,[s]:{...c[s],[l]:c}}),{[a]:c,...r()[t](...arguments)}}:{[a]:n(...i),...r()[t](...i)}}]})));Symbol("Exact empty object ({})"),d.object({id:"emptyObject"})({required:{},optional:{},exact:!0})},377586:(e,t,n)=>{n.d(t,{n:()=>o});let o=function(e){return e[e.Popup=0]="Popup",e[e.SlideUp=1]="SlideUp",e[e.BottomSheet=2]="BottomSheet",e}({})},378765:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(401497),r=()=>n(11048),a=()=>n(331542),s=n(474848);function l(e){const[t,n]=(0,o.useState)((()=>!0===e.loaded?"content":"blank")),l=(0,o.useRef)(),c=(0,o.useRef)(e.loaded);(0,o.useEffect)((()=>{e.loaded&&!c.current&&(window.clearTimeout(l.current),n("content")),c.current=e.loaded}),[e.loaded]);const d=(0,o.useRef)(!1);(0,o.useEffect)((()=>{d.current||e.loaded||(d.current=!0,l.current=window.setTimeout((()=>{c.current||n((e=>"blank"===e?"spinner":e))}),e.showSpinnerTimeout))}),[e.loaded,e.showSpinnerTimeout]),(0,o.useEffect)((()=>()=>{window.clearTimeout(l.current)}),[]);const u=(0,i().IS)((()=>({root:{..."spinner"===t&&{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},...e.style},inner:{..."content"!==t&&{opacity:0,pointerEvents:"none",position:"absolute",width:"100%"},...e.innerStyle},spinner:{zIndex:1,margin:8}})),[t,e.innerStyle,e.style]);return(0,s.jsx)(r().A,{name:"LoadingSpinnerContainer",children:(0,s.jsxs)("div",{role:e.role,"aria-labelledby":e["aria-labelledby"],style:u.root,className:e.className,id:e.id,children:[(0,s.jsx)("div",{style:u.inner,children:e.children}),"spinner"===t&&(0,s.jsx)(a().A,{size:e.spinnerSize,legacySize:e.legacySpinnerSize,style:u.spinner})]})})}},380682:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{siteSettingContentType:"initial"}}}const i=new o},383594:(e,t,n)=>{n.d(t,{I:()=>a,W:()=>r});var o=()=>n(969141),i=()=>n(778417);function r(e,t){t.disableClearSelection||i().IU({environment:e}),o().A.setState({...t,isActive:!0})}function a(){const e=o().A.state;e.isActive&&e.onCancel&&e.onCancel(),o().A.reset()}},388487:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=()=>n(908006),r=()=>n(595985);function a(e){let{capture:t,preventType:n}=e;(0,o.useEffect)((()=>{if(t){const e={preventType:n};return i().default.afterNextFlush((()=>{r().A.state.capturingAreas.add(e),r().A.emit()})),()=>{i().default.afterNextFlush((()=>{r().A.state.capturingAreas.delete(e),r().A.emit()}))}}}),[t,n])}},389658:(e,t,n)=>{n.d(t,{Bw:()=>x,EO:()=>U,GK:()=>j,Hg:()=>Q,L5:()=>H,Tf:()=>A,_N:()=>$,aI:()=>q,g$:()=>C,h0:()=>G,jY:()=>V,kE:()=>K,mT:()=>P,n2:()=>Y,n4:()=>B,qP:()=>O,sj:()=>F,vq:()=>z});n(18107),n(967357),n(581454);var o=()=>n(244641),i=()=>n(594013),r=()=>n(970013),a=()=>n(713998),s=()=>n(254947),l=()=>n(604995),c=()=>n(416504),d=()=>n(206267),u=()=>n(388821),p=()=>n(179034),m=()=>n(519831),g=()=>n(919709),f=()=>n(959013),v=()=>n(496603),h=()=>n(183558),_=()=>n(534177),b=()=>n(972435),y=()=>n(351360),S=()=>n(430483),w=()=>n(508496),k=()=>n(712505);const I=(0,f().YK)({addNewTodoTitle:{defaultMessage:"Add a new to-do",id:"blockTemplates.templateButton.addNewTodoTitle"}});function x(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",version:27,type:"factory",properties:{title:[[b().A.formatMessage(I.addNewTodoTitle)]]},content:["to_do"]},to_do:{id:"to_do",version:4,type:"to_do",parent_table:"block",parent_id:"root",alive:!0}}})}function A(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",version:0,type:"button",format:{automation_id:"automation"}}},automation:{automation:{id:"automation",parent_id:"root",parent_table:p().ev,alive:!0,status:"active",trigger:{id:d().JW(),type:"button"},action_ids:[],properties:{name:""}}}})}function C(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"collection_view_page",alive:!0}}})}const T=(0,f().YK)({chartViewTitle:{defaultMessage:"Chart",id:"blockTemplates.chart.chartViewTitle"},dataViewTitle:{defaultMessage:"Data",id:"blockTemplates.chart.dataViewTitle"}});const M=(0,f().YK)({responderPropertyTitle:{defaultMessage:"Respondent",id:"blockTemplates.form.responderPropertyTitle"},createdTimePropertyName:{defaultMessage:"Submission time",id:"blockTemplates.form.createdTimePropertyName"},formInitialQuestionPropertyTitle:{defaultMessage:"Question 1",id:"blockTemplates.form.formInitialQuestionPropertyTitle"},formInitialQuestionPropertySelect:{defaultMessage:"Question 2",id:"blockTemplates.form.formInitialQuestionPropertySelect"},formInitialQuestionPropertySelectOption1:{defaultMessage:"Option 1",id:"blockTemplates.form.formInitialQuestionPropertySelectOption1"},formInitialQuestionPropertySelectOption2:{defaultMessage:"Option 2",id:"blockTemplates.form.formInitialQuestionPropertySelectOption2"},formInitialQuestionPropertySelectOption3:{defaultMessage:"Option 3",id:"blockTemplates.form.formInitialQuestionPropertySelectOption3"}});function P(e){const{isInline:t,name:n}=e,o=(0,h().Ay)(),i=(0,h().Ay)(),r=(0,h().Ay)(),a=(0,h().Ay)(),s=(0,h().Ay)(),l=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:[],alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(M.formInitialQuestionPropertyTitle),type:"title"},[o]:{name:b().A.formatMessage(M.responderPropertyTitle),type:"created_by"},[i]:{name:b().A.formatMessage(M.createdTimePropertyName),type:"created_time"},[r]:{name:b().A.formatMessage(M.formInitialQuestionPropertySelect),type:"multi_select",options:[{id:a,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption1),color:"blue"},{id:s,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption2),color:"yellow"},{id:l,value:b().A.formatMessage(M.formInitialQuestionPropertySelectOption3),color:"red"}]}},format:{},parent_id:"root",parent_table:"block",alive:!0}}})}const B=(0,f().YK)({namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.table.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.table.tagsPropertyTitle"}});const R=(0,f().YK)({viewTitle:{defaultMessage:"Board view",id:"blockTemplates.board.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.board.namePropertyTitle"},assignPropertyTitle:{defaultMessage:"Assign",id:"blockTemplates.board.assignPropertyTitle"},statusPropertyTitle:{defaultMessage:"Status",id:"blockTemplates.board.statusPropertyTitle"},card1Title:{defaultMessage:"Card 1",id:"blockTemplates.board.card1Title"},card2Title:{defaultMessage:"Card 2",id:"blockTemplates.board.card2Title"},card3Title:{defaultMessage:"Card 3",id:"blockTemplates.board.card3Title"}});const E=(0,f().YK)({viewTitle:{defaultMessage:"Calendar view",id:"blockTemplates.calendar.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.calendar.namePropertyTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.calendar.datePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.calendar.tagsPropertyTitle"}});const D=(0,f().YK)({viewTitle:{defaultMessage:"Timeline view",id:"blockTemplates.timeline.viewTitle"},datePropertyTitle:{defaultMessage:"Date",id:"blockTemplates.timeline.datePropertyTitle"}});const N=(0,f().YK)({viewTitle:{defaultMessage:"Gallery view",id:"blockTemplates.gallery.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.gallery.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.gallery.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.gallery.createdPropertyTitle"}});const L=(0,f().YK)({viewTitle:{defaultMessage:"List view",id:"blockTemplates.list.viewTitle"},namePropertyTitle:{defaultMessage:"Name",id:"blockTemplates.list.namePropertyTitle"},tagsPropertyTitle:{defaultMessage:"Tags",id:"blockTemplates.list.tagsPropertyTitle"},createdPropertyTitle:{defaultMessage:"Created",id:"blockTemplates.list.createdPropertyTitle"}});function O(e){const{isInline:t,viewType:n,name:d,chartType:p}=e;return"table"===n?function(e){const{isInline:t,name:n}=e,o=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"table",format:{collection_pointer:{table:m().Vl,id:"collection"},table_properties:[{property:"title",visible:!0,width:276},{property:o,visible:!0}],table_wrap:!0},page_sort:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"}},format:{},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"board"===n?function(e){const{isInline:t,name:n}=e,o=(0,h().Ay)(),i=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"board",name:b().A.formatMessage(R.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},board_columns_by:{property:o,type:"status",groupBy:"option",sort:{type:"ascending"}},board_columns:[{property:o,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionNotStarted)}}},{property:o,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionInProgress)}}},{property:o,value:{type:"status",value:{type:"by_option",option:b().A.formatMessage(s().M_.statusOptionDone)}}}],board_properties:[{property:o,visible:!1},{property:i,visible:!0}]},page_sort:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(R.namePropertyTitle),type:"title"},[i]:{name:b().A.formatMessage(R.assignPropertyTitle),type:"person"},[o]:(0,r().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl())},format:{collection_page_properties:[{property:o,visible:!0},{property:i,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"calendar"===n?function(e){const{isInline:t,name:n}=e,o=(0,h().Ay)(),i=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"calendar",name:b().A.formatMessage(E.viewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"}},query2:{calendar_by:o},parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(E.namePropertyTitle),type:"title"},[o]:{name:b().A.formatMessage(E.datePropertyTitle),type:"date"},[i]:{name:b().A.formatMessage(E.tagsPropertyTitle),type:"multi_select"}},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"list"===n?function(e){const{isInline:t,name:n}=e,o=(0,h().Ay)(),i=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"list",name:b().A.formatMessage(L.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},list_properties:[{property:o,visible:!0}]},page_sort:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(L.namePropertyTitle),type:"title"},[o]:{name:b().A.formatMessage(L.tagsPropertyTitle),type:"multi_select",options:[]},[i]:{name:b().A.formatMessage(L.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:i,visible:!0},{property:o,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"gallery"===n?function(e){const{isInline:t,name:n}=e,o=(0,h().Ay)(),i=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:"gallery",name:b().A.formatMessage(N.viewTitle),query2:{aggregations:[{aggregator:"count"}]},format:{collection_pointer:{table:m().Vl,id:"collection"},gallery_cover:{type:"page_content"}},page_sort:[],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(N.namePropertyTitle),type:"title"},[o]:{name:b().A.formatMessage(N.tagsPropertyTitle),type:"multi_select",options:[]},[i]:{name:b().A.formatMessage(N.createdPropertyTitle),type:"created_time"}},format:{collection_page_properties:[{property:i,visible:!0},{property:o,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"timeline"===n?function(e){const{isInline:t,name:n}=e,i=(0,h().Ay)(),s=(0,h().Ay)(),d=(0,h().Ay)();return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card1Title)]],[i]:(0,a().m5)((0,l().Mk)(o().c9.now().minus({days:5}).startOf("day").valueOf(),o().c9.now().minus({days:1}).startOf("day").valueOf(),(0,c().P)()))},alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card2Title)]],[i]:(0,a().m5)((0,l().Mk)(o().c9.now().minus({days:3}).startOf("day").valueOf(),o().c9.now().plus({days:1}).startOf("day").valueOf(),(0,c().P)()))},alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:{title:[[b().A.formatMessage(R.card3Title)]],[i]:(0,a().m5)((0,l().Mk)(o().c9.now().minus({days:1}).startOf("day").valueOf(),o().c9.now().plus({days:3}).startOf("day").valueOf(),(0,c().P)()))},alive:!0}},collection_view:{view:{id:"view",version:0,type:"timeline",name:b().A.formatMessage(D.viewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"},timeline_show_table:!t,timeline_properties:[{property:"title",visible:!0}],timeline_table_properties:[{property:"title",visible:!0,width:280},{property:i,visible:!1,width:180},{property:s,visible:!1,width:180},{property:d,visible:!1,width:180}]},page_sort:["item_1","item_2","item_3"],parent_id:"root",parent_table:"block",alive:!0}},collection:{collection:{id:"collection",name:n,schema:{title:{name:b().A.formatMessage(R.namePropertyTitle),type:"title"},[i]:{name:b().A.formatMessage(D.datePropertyTitle),type:"date"},[s]:{name:b().A.formatMessage(R.assignPropertyTitle),type:"person"},[d]:(0,r().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl())},format:{collection_page_properties:[{property:i,visible:!0},{property:s,visible:!0},{property:d,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d}):"page"===n?u().RecordMapPolymorphic.create({}):"chart"===n?function(e){const{isInline:t,name:n,chartType:o}=e,s=(0,h().Ay)(),d=(0,h().Ay)(),p=(0,r().D)(b().A.formatMessage(R.statusPropertyTitle),b().A.getIntl()),g="line"===o?{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"},[d]:{name:b().A.formatMessage(E.datePropertyTitle),type:"date"}}:{title:{name:b().A.formatMessage(B.namePropertyTitle),type:"title"},[s]:p},f="donut"===o?(0,i().ZS)({collectionSchema:g}):(0,i().EZ)({collectionSchema:g,axisChartType:o}),v=(0,c().P)(),_={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:4}))},y={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:3}))},S={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:2}))},w={type:"date",start_date:(0,l().kB)((0,l().ah)(v).minus({days:1}))},k="line"===o?[{[d]:(0,a().m5)(_)},{[d]:(0,a().m5)(y)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(S)},{[d]:(0,a().m5)(w)}]:[{[s]:[[p.options.at(0).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(1).value]]},{[s]:[[p.options.at(2).value]]}];return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["chart_view","data_view"],alive:!0},item_1:{id:"item_1",type:"page",parent_id:"collection",parent_table:"collection",properties:k[0],alive:!0},item_2:{id:"item_2",type:"page",parent_id:"collection",parent_table:"collection",properties:k[1],alive:!0},item_3:{id:"item_3",type:"page",parent_id:"collection",parent_table:"collection",properties:k[2],alive:!0},item_4:{id:"item_4",type:"page",parent_id:"collection",parent_table:"collection",properties:k[3],alive:!0},..."line"===o&&{item_5:{id:"item_5",type:"page",parent_id:"collection",parent_table:"collection",properties:k[4],alive:!0},item_6:{id:"item_6",type:"page",parent_id:"collection",parent_table:"collection",properties:k[5],alive:!0}}},collection_view:{chart_view:{id:"chart_view",version:0,type:"chart",name:b().A.formatMessage(T.chartViewTitle),format:{collection_pointer:{table:m().Vl,id:"collection"},chart_config:f,subitem_display_mode:"flattened",hide_linked_collection_name:!0},page_sort:[],parent_id:"root",parent_table:"block",alive:!0},data_view:{id:"data_view",version:0,type:"table",parent_id:"root",parent_table:"block",alive:!0,name:b().A.formatMessage(T.dataViewTitle),format:{table_properties:[{property:"title",visible:!0}],table_wrap:!0,hide_linked_collection_name:!0}}},collection:{collection:{id:"collection",name:n,schema:g,format:{collection_page_properties:[{property:s,visible:!0}]},parent_id:"root",parent_table:"block",alive:!0}}})}({isInline:t,name:d,chartType:p}):"form_editor"===n||"feed"===n||"map"===n||"chat"===n||"custom"===n?u().RecordMapPolymorphic.create({}):void(0,_().HB)(n)}function U(e){const{isInline:t,viewType:n,chartType:o}=e;return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",view_ids:["view"],alive:!0}},collection_view:{view:{id:"view",version:0,type:n,parent_id:"root",parent_table:"block",alive:!0,format:o?{chart_config:{type:"placeholder",placeHolderType:o}}:{}}}})}function F(e){const{isInline:t,viewType:n,integrationId:o}=e;return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:t?"collection_view":"collection_view_page",collection_id:"collection",format:{collection_pointer:{table:m().Vl,id:"collection"}},view_ids:["view"],alive:!0}},collection:{collection:{id:"collection",name:void 0,schema:{},format:{is_placeholder:!0,integration_id:o},parent_id:"root",parent_table:"block",alive:!0}},collection_view:{view:{id:"view",version:0,type:n,format:{collection_pointer:{table:m().Vl,id:"collection"}},parent_id:"root",parent_table:"block",alive:!0}}})}function V(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"transclusion_container",content:["empty_text"],alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}})}function j(e){var t,n;const o=S().zD.isAiBlockConfigurationMenuEnabledForUser(),i=(null===(t=k().default.peekTargetStore.state)||void 0===t?void 0:t.id)??(null===(n=y().default.state.mainEditorCurrentBlockStore)||void 0===n?void 0:n.id);let r;if(o){r={ai_block_configuration_menu:{version:2,type:"custom",context:i?[{type:"currentPage",pageId:i}]:[],title:void 0,autofillInstructions:void 0,placeholderText:void 0}}}else r={ai_prompt_key:e};return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"ai_block",content:[],alive:!0,format:r}}})}function z(e){const t=v().Hn(e,(e=>`column${e+1}`));return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"column_list",content:t,alive:!0},...Object.assign({},...t.map((t=>{const n=`${t}_text`;return{[t]:{id:t,type:"column",parent_id:"root",parent_table:"block",content:[n],alive:!0,format:{column_ratio:1/e}},[n]:{id:n,type:"text",parent_id:t,parent_table:"block",alive:!0}}})))}})}function H(){const e=[(0,h().Ay)(),(0,h().Ay)()];return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"table",content:["row_1","row_2","row_3"],alive:!0,format:{table_block_column_order:e}},row_1:{id:"row_1",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_2:{id:"row_2",type:"table_row",parent_id:"root",parent_table:"block",alive:!0},row_3:{id:"row_3",type:"table_row",parent_id:"root",parent_table:"block",alive:!0}}})}const W=(0,f().YK)({tab1Title:{defaultMessage:"Tab 1",id:"blockTemplates.list.tab1Title"},tab2Title:{defaultMessage:"Tab 2",id:"blockTemplates.list.tab2Title"},tab3Title:{defaultMessage:"Tab 3",id:"blockTemplates.list.tab3Title"}});function q(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"tab",alive:!0,content:["tab1","tab2","tab3"]},tab1:{id:"tab1",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(W.tab1Title)]]}},tab2:{id:"tab2",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(W.tab2Title)]]}},tab3:{id:"tab3",parent_id:"root",parent_table:"block",type:"text",alive:!0,properties:{title:[[b().A.formatMessage(W.tab3Title)]]}}}})}function K(e){return u().RecordMapPolymorphic.create({[p().ev]:{root:{id:"root",type:e,format:{toggleable:!0}}}})}function G(e,t){return u().RecordMapPolymorphic.create({[p().ev]:{root:{id:"root",type:"code",properties:{title:g().x9d(t),language:g().x9d(e)}}}})}function $(){return u().RecordMapPolymorphic.create({[p().ev]:{root:{id:"root",type:"drawing",format:{drawing_value:void 0,block_page_width:!0,block_height:480}}}})}function Y(){return w().default.checkGate({gateName:"create_v2_callouts"})?u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"callout",content:["empty_text"],format:{callout_version:2},alive:!0},empty_text:{id:"empty_text",type:"text",parent_id:"root",parent_table:"block",alive:!0}}}):u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"callout",alive:!0}}})}function Q(){return u().RecordMapPolymorphic.create({block:{root:{id:"root",type:"transcription",alive:!0,content:["transcription_notes","transcription_transcript"],format:{transcription_notes_id:"transcription_notes",transcription_transcript_id:"transcription_transcript"}},transcription_notes:{id:"transcription_notes",type:"text",parent_id:"root",parent_table:"block",content:["transcription_notes_placeholder"],alive:!0},transcription_notes_placeholder:{id:"transcription_notes_placeholder",type:"text",parent_id:"transcription_notes",parent_table:"block",properties:{},alive:!0},transcription_transcript:{id:"transcription_transcript",type:"text",parent_id:"root",parent_table:"block",alive:!0}}})}},390575:(e,t,n)=>{n.d(t,{NU:()=>r,ZC:()=>i});var o=()=>n(534177);function i(e,t){if(!(0,o().O9)(t)||"production"===e)return t;const n=`notion-${e}-`;return t.startsWith(n)?t:`${n}${t}`}function r(e){return e&&e.startsWith("//")?`https:${e}`:e}},393255:(e,t,n)=>{n.d(t,{jz:()=>P,Ju:()=>L,dw:()=>D,VN:()=>O,zz:()=>N,Tj:()=>U,BJ:()=>E});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=()=>n(757695),i=()=>n(700500),r=()=>n(206267),a=()=>n(919709),s=()=>n(970330),l=()=>n(741496),c=()=>n(778417),d=()=>n(319975),u=()=>n(725614),p=()=>n(97270),m=()=>n(989423),g=()=>n(969197),f=()=>n(333665),v=()=>n(906537),h=()=>n(494043),_=()=>n(663038),b=()=>n(695625),y=()=>n(176106),S=()=>n(508496),w=()=>n(732770),k=()=>n(375447),I=()=>n(502438),x=(n(581454),()=>n(351360)),A=()=>n(875464),C=()=>n(846955);var T=()=>n(878855),M=()=>n(110955);const P="/",B=new Set([P,"／"]);const R={"ja-JP":new Set(["；"])}[n(662303).locale]||new Set;function E(e){return!!B.has(e)||!!R.has(e)}function D(e){const{environment:t,textStore:n,oldSelection:i,oldTextValue:s}=e,l=a().qAZ(n.getValue()||[]),c=i.startIndex,d=l[c];if(!E(d))return;const u=a().Pej(l,c-10,c).join("");if(/[0-9]$/.test(u[u.length-1]))return;if(u.endsWith("http:")||u.endsWith("http:/")||u.endsWith("https:")||u.endsWith("https:/"))return;if(0!==c&&!(0,_().Yv)(u[u.length-1])&&w().A.state.isKeyboardMode)return;if(M().A.state.open||p().A.state.open||k().A.state.open||y().A.state.open)return;if(t.device.isPhone&&!t.device.isIpad)return;const g=v().get();if(!g)return;let f=v().getRect(g);if(!f)return;(B.has(d)||R.has(d))&&(f={...f,left:f.left-11}),(0,C().tourIsActive)(C().default.state)&&"create_page_type_slash"===C().default.state.step&&function(){var e;if(!(0,C().tourIsActive)(C().default.state))return;const t=C().default.state.type,n=C().default.state.step,o=(0,A().DI)(t),i={teamStoreIds:((null===(e=x().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id)),initialTeamStoreId:C().default.state.initialTeamStoreId},r=(0,A().sX)(o,n,i);var a,s;null===r?(null===(a=(s=C().default.state).onCompleteOrClose)||void 0===a||a.call(s),C().default.setState({type:"inactive"})):C().default.setState({...C().default.state,type:t,step:r})}();const h=r().JW();M().A.setState({id:h,open:!0,isAddMenu:!1,collapsed:!0,textStore:n,oldTextValue:s,oldSelection:i,selectionRect:f,lettersAtLastResult:0,filter:"",temporaryInputDataStore:o().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:"none"}),S().default.logEvent("open_slash_menu","slash_command"),(0,m().u4)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:h,source:"slash_command"}}})}function N(e){const{environment:t,blockStore:n,insertedTextBlockLocation:i}=e,a=M().A.state;if(c().hc({environment:t,store:n}),u().setSelectionAtStart({store:n.getBlockTitleStore()}),!a.open&&!t.device.isPhone){const e=n.getBlockTitleStore(),a=b().T.getRectFromStore(n),s=r().JW();a&&(M().A.setState({id:s,open:!0,isAddMenu:!0,collapsed:!0,textStore:e,oldTextValue:e.getValue(),oldSelection:{startIndex:0,endIndex:0},selectionRect:a,lettersAtLastResult:0,filter:"",temporaryInputDataStore:o().default.createValue(void 0,{name:"temporaryInputData"}),insertedTextBlockLocation:i}),u().clear({environment:t}),u().setSelectionAtStart({store:e}),S().default.logEvent("open_slash_menu","add_button"),(0,m().u4)({environment:t,event:{eventName:"open_slash_menu",eventProperties:{id:s,source:"add_button"}}}))}}function L(e){const{transaction:t,environment:n,action:o,sectionKey:i,searchEventSource:r,itemIndex:a}=e,s=M().A.state;if(s.open){const{textStore:e,oldTextValue:p,oldSelection:f,filter:v,id:_}=s,b=I().default.state.stores[0];if(b){const e=b.getType(),t=b.getFormat();(0,l().N)(n,{analyticsName:o.analyticsName,action_type:o.analyticsActionType,from:"slash_menu",block_id:b.id,block_type:e,is_toggleable:e?(0,h().Yt)(e,t):void 0,slash_menu_filter_length:v.length,slash_menu_section:i,parent_collection_id:b.getParentCollectionIdUpToTwoLevels(),slash_menu_id:_})}d().R9({environment:n,store:e,value:p,transaction:t});const y=void 0!==a?a+1:void 0;(0,m().u4)({environment:n,event:{eventName:"slash_menu_search",eventProperties:{id:s.id,source:r||(s.filter?{type:"query",query:s.filter}:{type:"scroll",rank:y})}}}),T().A.track(o),O({dismissed:!1});const S=(0,g().T)(e);S&&c().hc({environment:n,store:S}),u().setSelection({store:e,selection:f})}}function O(e){const{dismissed:t,environment:n}=e,o=M().A.state;if(o.open&&o.isAddMenu&&n&&t&&"none"!==o.insertedTextBlockLocation){const e="above"===o.insertedTextBlockLocation?"text_insert_above":"text_insert_below";s().v(n,{from:e,type:i().xd.text,creating_block_id:void 0})}M().A.setState({open:!1,previousFilter:o.open?o.filter:void 0})}function U(e){return f().vD(e.textStore,e.oldTextValue,!e.isAddMenu)}},394653:(e,t,n)=>{n.d(t,{l:()=>i});var o=()=>n(586481);function i(e){const{environment:t,blockStore:n,properties:i,transaction:r}=e;o().L({environment:t,store:n,properties:i,transaction:r})}},394893:(e,t,n)=>{n.d(t,{Ew:()=>K,hh:()=>Z,Jx:()=>Q,i1:()=>Y,w7:()=>$,Ul:()=>G,Xm:()=>X});n(898992),n(672577),n(803949);var o=()=>n(584262),i=()=>n(857639),r=()=>n(861017),a=()=>n(427704),s=()=>n(179034),l=()=>n(96689),c=()=>n(496603),d=()=>n(763824),u=()=>n(498212),p=()=>n(973647),m=()=>n(534177),g=()=>n(211716),f=()=>n(466614),v=()=>n(857783),h=()=>n(521358),_=()=>n(855801),b=()=>n(989423),y=()=>n(186445),S=()=>n(48848),w=()=>n(492414),k=()=>n(972435),I=()=>n(836251),x=()=>n(443002),A=()=>n(274511),C=()=>n(562800),T=()=>n(792415),M=()=>n(351360),P=()=>n(508496),B=()=>n(520257),R=()=>n(630116),E=()=>n(160568),D=()=>n(187015);var N=()=>n(449506),L=()=>n(901389),O=()=>n(468602),U=()=>n(896628),F=()=>n(496414),V=()=>n(44729),j=()=>n(729283),z=()=>n(435009),H=()=>n(185544),W=()=>n(751156);const q=750;function K(){B().A.setState({open:!1})}async function G(e){const{environment:t,store:n,originRect:i}=e;!function(e,t){var n;b().vd(e,"fork_page",{blockId:t},{dontWait:!0}),P().default.logEvent("fork_page",(0,D().z)(null===(n=document.location)||void 0===n?void 0:n.hostname))}(t,n.id);const{RouterStore:l}=t,c=l.state.route;if(I().w6(t)){var d;let e=n;if("space"===c.name){const t=n.getSpaceStore();if(!t)return;const o=c.spaceDomain?C().kn(t,c.spaceDomain):void 0,i=null==o?void 0:o.getPublicHomePage();if(!i)return;const r=R().Bv.createChildStore(t,{id:i,table:s().ev,spaceId:t.id});if(!r)return;e=r}const{publicPageData:i}=T().A.state,a=null==i||null===(d=i.template)||void 0===d?void 0:d.listingId;if(a){const e=await N().callApi({eventName:"getMarketplacePurchaseRoute",environment:t,data:{marketplaceListingId:a}});if("success"===e.type&&e.data.success){var u;const n=P().default.getConfigKey("marketplace_public_purchase_url_optout","usernames").includes((null==i||null===(u=i.template)||void 0===u?void 0:u.creator.username)??""),o=e.data.url,r=e.data.type;if(o&&!(n&&"checkout"===r||"external"===r))return void z().navigateOnBaseUrl({environment:t,url:o,extraSearchParams:{from:"public_page",tid:await(0,b().TZ)(t)}})}}const l=(0,w().Ay)({store:e,fullyQualified:!1,duplicate:!0,pageVisitSource:o().y8.Duplicate,embedded:!1,disableSlug:!0});return void z().navigateOnBaseUrl({environment:t,url:l,extraSearchParams:{...await j().Mh(t),utm_source:"public_page",utm_content:"duplicate_button",tid:await(0,b().TZ)(t),from:"public_page",n:"duplicate_public_page"},openInNewTab:(0,r().bh)(c)})}const{currentUserRootStore:p}=M().default.state;if(p){const e=y().jU(p);if(1===e.length){const o=e[0],i=o.getSpaceStore();if(!i)return;$({environment:t,store:n,spaceStore:i,spaceViewStore:o,isPrivate:!0,context:"public_page_duplicate_single_workspace"})}else B().A.setState({open:!0,store:n,originRect:i})}else O().Y({currentUserId:t.currentUser.id,blockId:n.id}),z().oo({environment:t,url:a().JZ.login})}async function $(e){const{environment:t,store:n,spaceStore:i,context:r,templateId:a}=e,s=Date.now();let l;const c=Y({...e}),[u]=await Promise.all([c.then((e=>(l=Date.now()-s,e))),(0,d().wR)(q)]);F().V();const p=Date.now()-s;if("public_page_duplicate_multiple_workspace"===r||"public_page_duplicate_single_workspace"===r){const{blockTitle:e}=function(e){const{store:t,spaceStore:n}=e,o=k().A.getIntl(),i=(0,S().Ow)(t,o),r=(0,S().sM)(n,o);return F().m({message:S().DZ.loadingStateDisplayText,interpolatedValues:{blockTitle:i,spaceTitle:r}}),{blockTitle:i,spaceTitle:r}}({store:n,spaceStore:i});E().hB(t,{from:"publicPage",success:!u.error,template_block_id:n.id,target_space_id:i.id,context:r,template_duplication_duration_ms:l,template_duplication_duration_with_minimum_ms:p,public_template_name:e,template_id:a})}void 0!==u.error?L().f1(u.error):v().uK({environment:t,store:u.value,visitType:g().ig.Link,pageVisitSource:o().y8.Duplicate})}async function Y(e){const{environment:t,store:n,spaceStore:o,spaceViewStore:i,isPrivate:r,duplicateOnlyCollectionSchema:a}=e,{duplicateBlock:s}=await(0,_().D6)();return new Promise((e=>{W().createAndCommit({userAction:"forkPageActions.forkPage",environment:t,canUndo:!0,perform:l=>{const{blockStores:c,onComplete:d}=s({environment:t,stores:[n],transaction:l,targetSpaceId:o.id,preferDuplicateLocation:"local",options:{addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,duplicateOnlyCollectionSchema:a}}),u=c[0];d.then((n=>{"error"===n.status?f().Rk(n.error)?f().yj({product:n.error.clientData.metadata.product}):L().f1(n.errorMessage):(e({value:u}),u.isLocked()&&W().createAndCommit({userAction:"forkPageActions.forkPageWithLoadingAndNavigate",environment:t,canUndo:!0,perform:e=>{U()._l({environment:t,store:u,isLocked:!1,transaction:e})}}))})),H().yM({environment:t,spaceStore:o,spaceViewStore:i,pageStore:u,isPrivate:r,location:{type:"prepend"},transaction:l})}})}))}async function Q(e){const{environment:t,store:n,newParentStore:o,duplicateOnlyCollectionSchema:r,shouldAttemptServerBackedLocalDuplication:a,shouldUseSynchronousDuplicationAPI:s,from:d,templateInstallationMetadata:u,appendWithoutAfter:p,unlockPage:g,installationImprint:f,addCopyName:v}=e;let b="forkPageActions.duplicateTo";null!=u&&u.isListedTemplate?b="forkPageActions.duplicateTo.marketplaceTemplateInstallation":"public_page"===(null==u?void 0:u.source)?b="forkPageActions.duplicateTo.publicPageInstallation":"onboarding"===(null==u?void 0:u.source)?b="forkPageActions.duplicateTo.onboardingInstallation":"team_home"===(null==u?void 0:u.source)&&(b="forkPageActions.duplicateTo.teamHomeInstallation");const y="space"===o.table?o.id:o.getSpaceId(),S=M().default.state.currentUserRootStore;if(!y||!S)return void i().log({level:"info",from:"duplicateToHelper",type:y?"no_current_user_root_store":"no_target_space_id",data:{miscDataToConvertToString:{targetSpaceId:y,userId:null==S?void 0:S.id,duplicateBlockUserAction:b}}});const w="space"===o.table?o:R().sk.createUniqueRootStore(t,{table:l().NX,id:y}),k=x().H({spaceStore:w,userId:S.id,environment:t});if(!k)return void i().log({level:"info",from:"duplicateToHelper",type:"no_target_space_view_store",data:{miscDataToConvertToString:{targetSpaceId:y,userId:null==S?void 0:S.id,duplicateBlockUserAction:b}}});const I=await h().rW({environment:t,block:n,action:"duplicate"});if("user_canceled"===I)return;const C=await(0,A().U)(),{duplicateBlock:T}=await(0,_().D6)(),{createdPages:P,onComplete:B}=W().createAndCommit({userAction:b,isTemplateInstantiationTransaction:Boolean(u),environment:t,canUndo:!0,perform:e=>{const{blockStores:i,onComplete:l}=T({environment:t,stores:I,transaction:e,targetSpaceId:w.id,preferDuplicateLocation:"local",installationImprint:f,templateInstallationMetadata:u,shouldAttemptServerBackedLocalDuplication:a,shouldUseSynchronousDuplicationAPI:s,analyticsFrom:d,options:{addCopyName:v,duplicateOnlyCollectionSchema:r,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}});return function(e){const{environment:t,store:n,transaction:o,newParentStore:i,createdPages:r,appendWithoutAfter:a,targetSpaceViewStore:s,targetSpaceStore:l,moveToTeam:d}=e,u={type:"append",after:a?void 0:n.id},p=c().o8(r).reverse();if("team"===i.table)d({transaction:o,currentSpaceViewStore:s,teamStore:i,targets:r,environment:t,location:u,action:"move",value:{type:"team",id:i.id,spaceId:l.id}});else if("block"===i.table)for(const c of p)V().NI({parentStore:i,childStore:c,transaction:o,after:u.after});else if("space"===i.table)for(const c of p)H().yM({environment:t,spaceStore:l,spaceViewStore:s,pageStore:c,isPrivate:!0,location:u,transaction:o});else(0,m().HB)(i)}({environment:t,store:n,transaction:e,newParentStore:o,createdPages:i,targetSpaceViewStore:k,targetSpaceStore:w,appendWithoutAfter:p,moveToTeam:C}),{createdPages:i,onComplete:l}}}).performResult,E=await B;return"error"===E.status?{error:E}:(g&&P.find((e=>e.isLocked()))&&W().createAndCommit({userAction:"forkPageActions.duplicateToHelper",environment:t,canUndo:!0,perform:e=>{P.forEach((n=>{n.isLocked()&&U()._l({environment:t,store:n,isLocked:!1,transaction:e})}))}}),{value:P})}async function Z(e){const t=await Q({...e,addCopyName:!0});if(t)if(p().Q.isFail(t)){const e=t.error;f().Rk(e.error)?f().yj({product:e.error.clientData.metadata.product}):L().f1(e.errorMessage)}else if(p().Q.isSuccess(t)){const{environment:n,callback:i}=e;null==i||i(),v().uK({environment:n,store:t.value[0],visitType:g().ig.Link,pageVisitSource:o().y8.Duplicate})}else(0,m().HB)(t)}async function X(e){let{environment:t,blockId:n,spaceId:o,templateId:i,installationId:r,source:a,context:s,isEmailShared:l}=e;if(i&&(0,u().iv)(i))await N().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:o,productTable:"template",productId:i,installationId:r,source:a,context:s,isEmailShared:l}});else{const e=await N().callApi({eventName:"inAppGetTemplateByBlockId",environment:t,data:{blockId:n}});if("success"===e.type&&e.data.success&&e.data.template){const n=e.data.template;await N().callApi({eventName:"createMarketplaceInstallation",environment:t,data:{destinationTable:"space",destinationId:o,productTable:"template",productId:n.id,installationId:r,source:a,context:s,isEmailShared:l}})}}}},395963:(e,t,n)=>{n.d(t,{En:()=>c,PA:()=>m,Px:()=>g,QI:()=>v,Tk:()=>f,Yf:()=>p,_h:()=>u,it:()=>d});n(16280),n(898992),n(354520),n(581454);var o=()=>n(706665),i=()=>n(797809),r=()=>n(183558),a=()=>n(517223),s=()=>n(896628);class l extends Error{constructor(e,t){super();const n=`Collection with id ${t} had no property groups on format.property_groups`;this.message=`${e} -- ${n}`}}function c(e){var t;let{collectionStore:n,groupId:i,propertyId:r,transaction:a}=e;const c=null===(t=n.getFormat())||void 0===t?void 0:t.property_groups;if(!c)throw new l("cannot reorder properties",n.id);const d=(0,o().xR)({propertyGroups:c,groupId:i,propertyIds:[r]});s().zA({stores:[n],update:{property_groups:d},transaction:a})}function d(e){let{collectionStore:t,propertyId:n,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,o().V7)({propertyGroups:r,propertyId:n});s().zA({stores:[t],update:{property_groups:a},transaction:i})}function u(e){let{collectionStore:t,newPartialPropertyIds:n,groupId:i,transaction:r}=e;const a=t.getNormalizedPropertyGroups();if(!a)throw new l("cannot reorder properties",t.id);const c=(0,o().H9)({propertyGroups:a,groupId:i,errorMessageIfMissing:"cannot reorder properties"}),{id:d,...u}=(0,o().xU)({propertyGroup:c,newPartialProperties:n}),p=(0,o().S5)({propertyGroups:a,groupId:d,newValue:u});s().zA({stores:[t],update:{property_groups:p},transaction:r})}function p(e){let{collectionStore:t,newGroups:n,transaction:i}=e;s().zA({stores:[t],update:{property_groups:(0,o().UW)(n)},transaction:i})}function m(e){let{collectionStore:t,newGroupTitle:n,transaction:o}=e;const l=t.getNormalizedPropertyGroups(),c={title:n,id:(0,r().Ay)()};if(!l){const e=(0,a().HZ)({format:t.getFormat(),propertyGroupId:void 0,propertyIds:void 0}).map((e=>{let{property:t}=e;return t})).filter((e=>!(0,i().TV)(e)));c.propertyIds=e}const d=[c,...l||[]];return s().zA({stores:[t],update:{property_groups:d},transaction:o}),c.id}function g(e){let{collectionStore:t,groupId:n,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const l=(0,a().HZ)({propertyIds:void 0,propertyGroups:t.getNormalizedPropertyGroups(),propertyGroupId:n,format:t.getFormat()}),c=(0,o().Q9)({propertyGroups:r,groupId:n});s().zA({stores:[t],update:{property_groups:c,...Boolean(null==c?void 0:c.length)?void 0:{collection_page_properties:l}},transaction:i})}function f(e){let{collectionStore:t,groupId:n,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,o().ZG)({propertyGroups:r,groupId:n});s().zA({stores:[t],update:{property_groups:a},transaction:i})}function v(e){let{collectionStore:t,groupId:n,transaction:i}=e;const r=t.getNormalizedPropertyGroups();if(!r)return;const a=(0,o().wJ)({propertyGroups:r,groupId:n});s().zA({stores:[t],update:{property_groups:a},transaction:i})}},396301:(e,t,n)=>{n.d(t,{$e:()=>I,BP:()=>q,KP:()=>Q,Kv:()=>W,L$:()=>k,Lh:()=>O,Mr:()=>E,NX:()=>R,OJ:()=>L,RQ:()=>V,VR:()=>Y,X5:()=>j,XA:()=>z,dp:()=>M,o_:()=>P,ox:()=>T,rE:()=>B,s4:()=>D,xy:()=>H,yD:()=>x});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(581454);var o=()=>n(584262),i=()=>n(700500),r=()=>n(604995),a=()=>n(416504),s=()=>n(763884),l=()=>n(946065),c=()=>n(179034),d=()=>n(343666),u=()=>n(854150),p=()=>n(496603),m=()=>n(534177),g=()=>n(351360),f=()=>n(41161),v=()=>n(630116),h=()=>n(211716),_=()=>n(972435),b=()=>n(776894),y=()=>n(640653);const S=new Set([i().xd.page,i().xd.collectionView,i().xd.collectionViewPage,i().xd.alias]),w=new Set([i().xd.factory]);function k(e){const{allPages:t,state:n,intl:o}=e,{query:i}=n;return t.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();if(!t)return;const n=e.getLastEditedByPointer()??e.getCreatedByPointer();return(0,l().Pt)({block:e.getModel(),query:i,getRecordModel:e.getRecordModel,userTimeZone:(0,a().P)(),intl:o})?{blockId:e.id,store:e,timestamp:t,authorPointer:n}:void 0})).filter(m().O9)}function I(e){const{pageItems:t}=e;return p().Ul(t,(e=>{let{timestamp:t}=e;return t})).reverse()}function x(e){const{rootStore:t}=e,n=e.shouldSkipItemTypes??w,o=e.shouldShowItemTypes??S,i=[],r=new Set,a=[t];for(;a.length>0;){const e=a.shift();if(r.has(e.id))continue;r.add(e.id);const s=C(e,t,n,o);i.push(...s.outlinerItems),a.unshift(...s.subtree)}return i}const A=new(n(752885).p)({debugName:"getOutlinerItemsStoresInSubtreePageMentions",memoizeRecursion:!1,deepEquals:!1,compute(e){var t;const o=null===(t=e.getTitleStore())||void 0===t?void 0:t.getValue(),i=n(919709).moK(o);return e.getRecordStoreArray(e,i).filter((t=>t.getParentId()===e.id)).concat(e.getContentStores())}});function C(e,t,n,o){var r;const a=e.getType();if(a&&n.has(a)||(null===(r=e.getModel())||void 0===r||null===(r=r.getAliasTargetPointer())||void 0===r?void 0:r.table)===d().SN)return{outlinerItems:[],subtree:[]};if(a&&e!==t&&o.has(a))return{outlinerItems:[e],subtree:[]};const s=e.getType()===i().xd.transclusionReference?e.getTransclusionReferenceTargetStore():e;if(!s)return{outlinerItems:[],subtree:[]};return{outlinerItems:[],subtree:A.getStateFor(s)}}function T(e){let{environment:t,draggingStores:n,parentStore:o,currentSpaceStore:i}=e;if(!t.currentUser.id)return!1;if(!n.every((e=>e.isNavigableBlock())))return!1;if(!(0,b().w8)({environment:t,blocks:n}))return!1;if((null==o?void 0:o.table)===u().yK){return M({environment:t,teamStore:v().h4.createChildStore(i,{table:u().yK,id:o.id,spaceId:i.id})})}return!0}function M(e){let{environment:t,teamStore:n}=e;const o=t.currentUser.id;if(!n.isDefined())return!1;return!(n.getDisableTeamPageEdits()&&o&&!n.isOwner(o))&&n.canAddOrRemoveTopLevelPages()}function P(e){let{typeWithTeam:t,currentSpaceViewStore:n,sidebarState:o}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStores();case"bookmarks":return n.getBookmarkedPages();case"workspace":return n.getWorkspacePages()??[];case"shared":return o.visibleSharedPagesStores;case"private":return o.visiblePrivatePagesStores;default:(0,m().HB)(t)}}function B(e){let{typeWithTeam:t,currentSpaceStore:n,currentSpaceViewStore:o}=e;switch(t.type){case"team":return t.teamStore.getTeamPagesStore();case"bookmarks":return o.getBookmarkedPagesStore();case"workspace":return n.getPagesStore();case"shared":return o.getSharedPagesStore();case"private":return o.getPrivatePagesStore();default:(0,m().HB)(t)}}function R(e){let{type:t,from:n}=e;switch(t){case"bookmarks":return o().y8.SidebarBookmark;case"workspace":return o().y8.SidebarWorkspace;case"shared":return"main_sidebar"===n?o().y8.SidebarShared:o().y8.SidebarSharedPane;case"private":return"main_sidebar"===n?o().y8.SidebarPrivate:o().y8.SidebarPrivatePane;case"team":return o().y8.SidebarTeam;case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":return o().y8.SidebarTeamBrowser;case l().yy:return o().y8.SidebarPublicPageTemplateIncludes;default:(0,m().HB)(t)}}function E(e){return x({rootStore:v().Bv.createChildStore(e,{table:c().ev,id:e.id}),shouldSkipItemTypes:w,shouldShowItemTypes:S})}function D(e){const{store:t,toOpen:n,environment:o,isTopLevelItem:i}=e;i&&s().K.set({userId:o.currentUser.id,key:`Outliner-${t.id}`,value:n})}const N=(0,n(959013).YK)({updatedToday:{id:"sharedWithMePopover.updatedTodaySection.label",defaultMessage:"Updated today"},today:{id:"sharedWithMePopover.todaySection.label",defaultMessage:"Today"},updatedPastWeek:{id:"sharedWithMePopover.updatedPastWeekSection.label",defaultMessage:"Updated in the past week"},pastWeek:{id:"sharedWithMePopover.pastWeekSection.label",defaultMessage:"Past week"},updatedEarlier:{id:"sharedWithMePopover.updatedEarlierSection.label",defaultMessage:"Updated earlier"},earlier:{id:"sharedWithMePopover.earlierSection.label",defaultMessage:"Earlier"}});function L(e){const{section:t,isFirst:n}=e;switch(t){case"today":return n?_().A.formatMessage(N.updatedToday):_().A.formatMessage(N.today);case"past-week":return n?_().A.formatMessage(N.updatedPastWeek):_().A.formatMessage(N.pastWeek);case"earlier":return n?_().A.formatMessage(N.updatedEarlier):_().A.formatMessage(N.earlier);case"all":return;default:throw(0,m().HB)(t)}}function O(e){const t="today",n="past-week",o="earlier",i=(0,r().ah)((0,a().P)()),s=i.valueOf(),l=i.minus({week:1}).valueOf(),c=p().$z(e,(e=>{let{timestamp:i}=e;return i>s?t:i>l?n:o}));let d=-1;return p().oE([t,n,o].map((e=>{const t=c[e];if(t&&0!==t.length)return{key:e,pages:t.map((e=>(d+=1,{...e,index:d})))}})))}const U=new Date("May 16 2024 08:00:00 GMT+0000").getTime();function F(){var e;const{currentUserSettingsStore:t,currentSpaceStore:n}=g().default.state;if(!n)return!0;const o=null==t||null===(e=t.getSettings())||void 0===e?void 0:e.signup_time,i=null==n?void 0:n.getCreatedTime();return(0,m().O9)(o)&&o>U||(0,m().O9)(i)&&i>U}function V(e){const{spaceViewStore:t,type:n}=e,{currentUserSettingsStore:o}=g().default.state,i=t.getSpaceStore(),r=((null==i?void 0:i.getMemberCountFromPublicSpaceData())||0)<=1?10:5,a=i&&(null==o?void 0:o.hasUserPinnedToOutliner({spaceId:i.id,type:"shared"})),s={sortOption:{private:F()?"lastEdited":"manual",shared:a?"manual":"lastEdited"},truncationLimit:{private:r,shared:r,teamspaces:r}},l=p().h1(p().mg(s),null==t?void 0:t.getSidebarSectionMenuConfig());return{sortOption:l.sortOption[n]??"manual",truncationLimit:l.truncationLimit[n]??5}}function j(){return 10}function z(e){const{spaceViewStore:t}=e;return"lastEdited"===V({spaceViewStore:t,type:"private"}).sortOption}function H(e){let t,{environment:n,store:o,type:i}=e;switch(i){case"bookmarks":t=h().ig.Favorite;break;case"team":case"workspace":case"shared":case"private":t=h().ig.Link;break;default:(0,m().HB)(i)}f().A.recordVisit({id:o.id,systemBlockType:o.getSystemBlockTypeStore().getValue(),type:t,currentUserId:n.currentUser.id})}const W={bookmarks:"favorites",team:"teamspaces",workspace:"workspace",shared:"shared",private:"private",teamSidebar:void 0,teamBrowserSearch:void 0,teamBrowserUnjoinedTeams:void 0,teamBrowserJoinedTeams:void 0,publicPageTemplateIncludes:void 0},q={favorites:"bookmarks",teamspaces:"team",workspace:"workspace",shared:"shared",private:"private"},K=["favorites","workspace","teamspaces","shared","private"],G=["favorites","private","teamspaces","shared"],$=["favorites","teamspaces","shared","private"];function Y(){const{currentSpaceStore:e,currentSpaceViewStore:t}=g().default.state,n=F();let o=!1;void 0!==t&&(o=t.shouldShowWorkspaceSection((0,y().IL)(e)));const i=o?K:n?G:$;if(!t)return i;const r=t.getSidebarOrder(),a=p().sb(r),s=i.filter((e=>!a.includes(e)));return[...a,...s]}function Q(e){let{sidebarOrder:t,sidebarState:n,showLockedSidebar:o}=e;if(!n)return t;return t.filter((e=>{switch(e){case"workspace":return n.showWorkspaceSection;case"favorites":return n.showBookmarksSection;case"private":return n.showPrivateSection;case"shared":return n.showSharedSection||n.showEmptySharedSection||o;case"teamspaces":return n.showTeamSection||o;default:(0,m().HB)(e)}}))}},397248:(e,t,n)=>{n.d(t,{z8:()=>a,fT:()=>v,$E:()=>h,HY:()=>p,Wi:()=>m,IA:()=>g,Lq:()=>l,GL:()=>_,KK:()=>w,l6:()=>y,ux:()=>c,X6:()=>d,JK:()=>u,v_:()=>s});n(944114),n(898992),n(581454),n(908872);class o{constructor(e){this.parentOf=void 0,this.sizeOf=void 0,this.parentOf=[],this.sizeOf=[],this.ensureCapacity(e)}get capacity(){return this.parentOf.length}ensureCapacity(e){if(!(e<=this.capacity))for(let t=this.parentOf.length;t<e;t++)this.parentOf[t]=t,this.sizeOf[t]=1}getNodeSize(e){return this.ensureCapacity(e+1),this.sizeOf[e]}getSets(){const e=[],t=[];for(let n=0;n<this.capacity;n++){const o=this.findRoot(n);o===n&&e.push(n),t[o]??=[],t[o].push(n)}return e.map((e=>t[e]))}unionContainingSets(e,t){return this.ensureCapacity(Math.max(e,t)+1),this.unionContainingSetsInternal(e,t)}unionContainingSetsInternal(e,t){if((e=this.findRootInternal(e))===(t=this.findRootInternal(t)))return e;const[n,o]=this.sizeOf[e]>this.sizeOf[t]?[e,t]:[t,e];return this.parentOf[o]=n,this.sizeOf[n]=this.sizeOf[n]+this.sizeOf[o],n}findRoot(e){return this.ensureCapacity(e+1),this.findRootInternal(e)}findRootInternal(e){for(;this.parentOf[e]!==e;){const t=this.parentOf[e];this.parentOf[e]=this.parentOf[this.parentOf[e]],e=t}return e}isRoot(e){return this.parentOf[e]===e}}var i=()=>n(496603),r=()=>n(659026);class a{static from(e){return new a(e.left,e.top,e.width,e.height)}constructor(e,t,n,o){this.x=e,this.y=t,this.width=n,this.height=o,this.top=this.height<0?this.y+this.height:this.y,this.bottom=this.height<0?this.y:this.y+this.height,this.left=this.width<0?this.x+this.width:this.x,this.right=this.width<0?this.x:this.x+this.width}toJSON(){return{...this}}}const s=new a(0,0,0,0);function l(e){return Boolean(e&&(i().Et(e.top)||i().Et(e.left)))}function c(e,t,n){return e.left<=t&&t<=e.right&&e.top<=n&&n<=e.bottom}function d(e,t){return e.left<=t.left&&e.right>=t.right}function u(e,t){return e.top<=t.top&&e.bottom>=t.bottom}function p(e,t){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)}function m(e,t){return!(e.right<=t.left||t.right<=e.left)}function g(e,t){return!(e.bottom<=t.top||t.bottom<=e.top)}function f(e,t,n){return new a(e.left+t,e.top+n,e.width,e.height)}function v(e,t){return new a(e.left-t,e.top-t,e.width+2*t,e.height+2*t)}function h(e,t){return new a(e.left-t.left,e.top-t.top,t.left+e.width+t.right,t.top+e.height+t.bottom)}function _(e){const t=e.top+e.height/2,n=e.left+e.width/2;return new a(n,t,0,0)}function b(e){const t=e.slice();return t.sort(((e,t)=>{const n=e.top-t.top;if(0!==n)return n;const o=e.left-t.left;if(0!==o)return o;const i=t.width-e.width;return 0!==i?i:t.height-e.height})),t}function y(e,t){const n=Math.min(e.left,t.left),o=Math.min(e.top,t.top),i=Math.max(e.right,t.right),r=Math.max(e.bottom,t.bottom);return new a(n,o,i-n,r-o)}function S(e){const t=new o(e.length),n=b(e);for(let o=0;o<n.length;o++)for(let e=o+1;e<n.length;e++)p(n[o],n[e])&&t.unionContainingSets(o,e);return b(t.getSets().map((e=>e.map((e=>n[e])).reduce(((e,t)=>y(e,t))))))}function w(e){const t=S(e);if(0===t.length)return{total:new a(0,0,0,0),rects:[]};if(1===t.length){const e=a.from(t[0]);return{total:e,rects:[{original:e,translate:(0,r().zg)(),translated:e}]}}const[n,...o]=t;let i=a.from(n);const s=[{original:n,translate:(0,r().zg)(),translated:n}];for(const a of o){if(g(n,a)){i=y(i,a),s.push({original:a,translate:(0,r().zg)(),translated:a});continue}const e={x:i.right,y:i.top},t=(0,r().Nh)(e,a),o=f(a,t.x,t.y);s.push({original:a,translate:t,translated:o}),i=y(i,o)}return{total:i,rects:s}}(0,n(604341).exposeDebugValue)("Rect",{ComparableRect:a,simplifyIntersectingRects:S,intersects:p,undoTextWrapping:w})},397292:(e,t,n)=>{n.d(t,{G:()=>r,c:()=>i});var o=()=>n(508496);function i(){return"on"===o().default.getEligibleGroup({experimentId:"monday_importer",defaultGroup:"control"})}function r(){return o().default.checkGate({gateName:"monday_v2_enabled"})}},397740:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{loading:!1,areAccountsFetched:!1,accountsResponse:{accounts:[]}}}}const i=new o},398194:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,hasPassword:!1}}isSetNewPasswordModal(){const e=this.state;return!0===e.setNewPassword&&!1===e.isSet}isPasswordSetModal(){const e=this.state;return!0===e.setNewPassword&&!0===e.isSet}isRemovePasswordModal(){const e=this.state;return!0===e.removePassword&&!1===e.isSuccess}isRemovePasswordSuccessModal(){const e=this.state;return!0===e.removePassword&&!0===e.isSuccess}isVerifyIdentityWithMfaModal(){return!0===this.state.verifyIdentity}isPasswordModalClosed(){return!this.state.open}}const i=new o},398209:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},398391:(e,t,n)=>{n.d(t,{f:()=>i});n(944114),n(581454);class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}setFileMetadata(e,t,n){this.state.open&&this.setState({...this.state,fileName:e,fileUrl:t,fileSize:n})}setPreviewCollectionInfo(e){this.state.open&&this.setState({...this.state,previewCollectionInfo:e})}setLoading(e){this.state.open&&this.setState({...this.state,isLoading:e})}setError(e){this.state.open&&this.setState({...this.state,error:e})}nextStep(){this.state.open&&this.setState({...this.state,currentStepIndex:this.state.currentStepIndex+1})}previousStep(){this.state.open&&0!==this.state.currentStepIndex&&this.setState({...this.state,currentStepIndex:this.state.currentStepIndex-1})}setImportType(e){this.state.open&&this.setState({...this.state,importType:e})}setFirstRowAsHeader(){this.state.open&&this.setState({...this.state,firstRowAsHeader:!this.state.firstRowAsHeader})}updateUseFirstRowAsHeaders(e){this.state.open&&this.setState({...this.state,firstRowAsHeader:e})}setCsvData(e,t){if(!this.state.open)return;const n={...this.state,csvHeaders:[...e],csvSampleRows:t.map((e=>[...e]))};this.setState(n)}updatePropertyMapping(e,t){if(!this.state.open)return;const n=[...this.state.userPropertyMapping||[]],o=n.findIndex((t=>t.headerName===e));o>=0?n[o]={...n[o],propertyType:t}:n.push({headerName:e,propertyType:t}),this.setState({...this.state,userPropertyMapping:n})}open(e,t,n,o){this.setState({open:!0,currentStepIndex:0,fileName:"",fileUrl:"",fileSize:0,isLoading:!1,previewCollectionInfo:void 0,firstRowAsHeader:!0,importType:e,importLocation:"",teamspaceId:void 0,csvHeaders:void 0,csvSampleRows:void 0,userPropertyMapping:[],parentId:t||"",parentTable:n||"space",spaceId:o||""})}close(e){this.setState({...this.getInitialState()})}getCurrentStep(){if(!this.state.open)return;const e=["uploadFile"];return"import"===this.state.importType?e.push("mapFieldsForImport"):e.push("mapFieldsForMerge"),e.push("importing"),e[this.state.currentStepIndex]}setImportLocation(e){this.state.open&&this.setState({...this.state,importLocation:e})}setParent(e,t){this.state.open&&this.setState({...this.state,parentId:e,parentTable:t})}setSpaceId(e){this.state.open&&this.setState({...this.state,spaceId:e})}}const i=new o;(0,n(604341).exposeDebugValue)("csvImportStore",i)},399561:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{toasts:{}}}}const i=new o},400851:(e,t,n)=>{n.d(t,{X:()=>u,Y:()=>d});var o=()=>n(847249),i=()=>n(179034),r=()=>n(534177),a=()=>n(731320),s=()=>n(77246),l=()=>n(548821),c=()=>n(411671);function d(e){let{environment:t,blockStore:n,from:o,blockContext:d}=e;const{device:u,currentUser:p}=t;if(!p.isLoggedIn()||(0,a().qb)(t,n)&&!c().A.state.editing)return!1;if(u.isMobile)return!1;if(d===l().Rr.InPageSnapShot)return!1;if("suggest"===s().Uv.getMode(n))return!1;if(n.pathIsDead())return!1;if(n.isCollectionView()&&"topControls"!==o)return Boolean(n.canEditCollection()&&(function(e){switch(e){case"topControls":case"pageActionsMenu":return!1;case"viewsModule":case"pagePropertiesRowNameMenu":case"collectionSettingsMenu":return!0;default:(0,r().HB)(e)}}(o)||n.getCollectionStoreIfSingleSource())&&!n.isCollectionViewPageWithContent()&&!n.isLocked()&&!n.isPost()&&!n.isPostCollectionBlock());if(n.isPageBlock()||n.isExternalObjectInstancePageBlockStore()){const e=n.getAssociatedCollectionStore(),t=null==e?void 0:e.getParentStore();return Boolean(!n.isLocked()&&e&&e.canEditCollection()&&!e.isPageTreeCollection()&&(null==t?void 0:t.table)===i().ev&&!t.isLocked())}return!1}function u(e){let{environment:t,blockStore:n,from:i,blockContext:r}=e;return(0,o().K8)((()=>!!n&&d({environment:t,blockStore:n,from:i,blockContext:r})),[r,n,t,i])}},402838:(e,t,n)=>{n.d(t,{s:()=>r});var o=n(296540),i=()=>n(472090);function r(e,t){const[n,r]=(0,o.useState)(void 0),a=e.current;return(0,o.useEffect)((()=>{if(!a)return;const e=new(i().E)({throttleMs:t});return e.observe(a),e.rect.addListener((e=>{r(e.state)})),()=>{e.destroy()}}),[a,t]),n}},403409:(e,t,n)=>{n.d(t,{e:()=>s,A:()=>p});var o=n(296540),i=()=>n(484714),r=()=>n(496603),a=()=>n(534177);let s=function(e){return e.Inline="Inline",e.InlineWrap="InlineWrap",e.Textarea="Textarea",e}({}),l=function(e){return e.Submit="Submit",e.Newline="Newline",e}({});function c(e){const{device:t,e:n,action:o,onSubmit:i}=e;if(o===l.Submit)i&&i(n);else if(o===l.Newline){if(!t.isIOS)return;n.preventDefault&&n.preventDefault(),document.execCommand("insertLineBreak")}else(0,a().HB)(o)}var d=()=>n(728611),u=n(474848);const p=(0,o.forwardRef)((function(e,t){const[p,m]=(0,o.useState)(),g=(0,o.useRef)(null),f=(0,i().Y0)(),v=(0,i().v3)(),{onBlur:h,onCancel:_,type:b,onSubmit:y,onLeft:S,onRight:w,onChange:k,getHtml:I,onCompose:x}=e;(0,o.useEffect)((()=>{const e=e=>{var t;const n=null===(t=g.current)||void 0===t?void 0:t.getNode();n&&e.target instanceof Node&&!n.contains(e.target)&&h&&h()};return d().P4(window,"mousedown",e),()=>d().Ol(window,"mousedown",e)}),[h]),(0,o.useEffect)((()=>{e.focus&&!p&&(e.selectAll?m({startIndex:0,endIndex:e.value.length}):m({startIndex:e.value.length,endIndex:e.value.length}))}),[e.focus,e.selectAll,e.value.length,p]);const A=(0,o.useCallback)((()=>{const t=r().ih(e.value+(e.value.length>0?"\n":""));return I?I(t):t}),[I,e.value]),C=(0,o.useCallback)((()=>!!e.disabled||!e.focus),[e.disabled,e.focus]),T=(0,o.useCallback)((()=>p&&{type:"contain",selection:p}),[p]);(0,o.useImperativeHandle)(t,(()=>({getSelection:T})),[T]);const M=(0,o.useCallback)((()=>{const e=n(921855)._S(v,n(906537).get());e&&(r().n4(e.selection,p)||m(e.selection),e.forceEmitSelectionStore&&n(24157).default.emit())}),[v,p]),P=(0,o.useCallback)((()=>{n(908006).default.afterNextFlush((()=>{M()}))}),[M]),B=(0,o.useCallback)((e=>{P(),null==_||_(e)}),[P,_]),R=(0,o.useCallback)((e=>{if(C())return;const t=function(e){const{device:t,type:n,e:o}=e;return n===s.Inline?l.Submit:n===s.InlineWrap?t.isPhone?l.Submit:"altKey"in o&&o.altKey||"shiftKey"in o&&o.shiftKey?l.Newline:l.Submit:n===s.Textarea?l.Newline:void(0,a().HB)(n)}({device:f,type:b,e});c({device:f,e,action:t,onSubmit:y})}),[f,C,y,b]),E=(0,o.useCallback)((e=>{f.isIOS&&!("shiftKey"in e)?c({device:f,e,action:l.Newline}):R(e)}),[f,R]),D=(0,o.useCallback)((e=>{C()||(P(),null==S||S(e))}),[C,P,S]),N=(0,o.useCallback)((e=>{C()||(P(),null==w||w(e))}),[C,P,w]),L=(0,o.useCallback)((e=>{let{newValue:t,isComposing:n}=e;M(),null==x||x(n),!n&&k(t)}),[k,M,x]);return(0,u.jsx)(n(545805).A,{debugName:"ContentEditableInput",capture:!C(),onDelete:P,onBackspace:P,onEnter:R,onShiftEnter:E,onCommandEnter:P,onCommandShiftEnter:P,onUp:P,onDown:P,onLeft:D,onRight:N,onTab:P,onUntab:P,onSelectAll:P,onToggleBold:P,onToggleItalics:P,onToggleStrike:P,onToggleCode:P,onUndo:P,onRedo:P,onEsc:B,onCut:P,onCopy:P,onPaste:P,onKeypress:P,onHome:P,onEnd:P,onGoToBeginningOfLine:P,onGoToEndOfLine:P,onGoForwardOneChar:P,onGoBackwardOneChar:P,children:(0,u.jsx)(n(477450).A,{leafRef:g,style:{...e.style,whiteSpace:"pre-wrap"},debugName:"ContentEditableInput",placeholder:e.placeholder,placeholderStyle:e.placeholderStyle,spellCheck:!1,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,isDisabled:C(),getHtml:A,getSelection:T,onMutation:L,suppressNewlineEvents:b===s.Inline,expandSelectionOnTripleClick:!0})})}))},403831:(e,t,n)=>{n.d(t,{X:()=>a,q:()=>r});var o=()=>n(645873);const i=new(o().O2)("errorBoundaryDebugger",(async()=>await n.e(14068).then(n.bind(n,415168)))),r=(0,o()._h)(i,(e=>e.ErrorBoundaryDebugger)),a=new(o().O2)("errorBoundaryDebuggingStore",(async()=>await n.e(82430).then(n.bind(n,731506))))},403905:(e,t,n)=>{n.d(t,{X:()=>o});const o=(0,n(959013).YK)({new:{id:"database.viewSettings.createViewTab.title",defaultMessage:"New view"},board:{id:"database.collectionView.untitledName.board",defaultMessage:"Board"},gallery:{id:"database.collectionView.untitledName.gallery",defaultMessage:"Gallery"},timeline:{id:"database.collectionView.untitledName.timeline",defaultMessage:"Timeline"},calendar:{id:"database.collectionView.untitledName.calendar",defaultMessage:"Calendar"},list:{id:"database.collectionView.untitledName.list",defaultMessage:"List"},table:{id:"database.collectionView.untitledName.table",defaultMessage:"Table"},page:{id:"database.collectionView.untitledName.page",defaultMessage:"Page"},chart:{id:"database.collectionView.untitledName.chart",defaultMessage:"Chart"},form_editor:{id:"database.collectionView.untitledName.form_editor",defaultMessage:"Form"},feed:{id:"database.collectionView.untitledName.feed",defaultMessage:"Feed"},map:{id:"database.collectionView.untitledName.map",defaultMessage:"Map"},chat:{id:"database.collectionView.untitledName.chat",defaultMessage:"Chat"},custom:{id:"database.collectionView.untitledName.custom",defaultMessage:"Custom"}})},404141:(e,t,n)=>{n.d(t,{A:()=>r,r:()=>o});let o=function(e){return e[e.OpenInDesktopApp=0]="OpenInDesktopApp",e[e.TwoStepVerification=1]="TwoStepVerification",e[e.Passkey=2]="Passkey",e[e.LanguageSetting=3]="LanguageSetting",e[e.StudentPlanOffer=4]="StudentPlanOffer",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1,currentTab:"settings",defaultSubtab:void 0,highlightedSetting:void 0,openedFrom:void 0}}}const r=new i},404482:(e,t,n)=>{n.d(t,{D8:()=>a,Nw:()=>r});var o=()=>n(662303),i=()=>n(236005);Boolean("en-US"===o().locale);function r(e){const t="https://www.notion.so";return"en-US"!==o().locale?`${t}/${o().locale.toLocaleLowerCase()}${e}`:`${t}${e}`}function a(e,t){if(e.device.isElectron||e.device.isMobileNative)return!1;const n=(0,i().H2)(t,e.currentUser.isLoggedIn());return!!n&&"devOnly"!==n}},404779:(e,t,n)=>{n.d(t,{y:()=>s});var o=()=>n(4319),i=()=>n(945895),r=()=>n(502438),a=()=>n(34556);function s(){o().wr(),function(){const e=i().A.state,t=r().default.state;e.isActive&&1===t.stores.length&&t.stores[0].id===e.store.id||(0,a().x)()}()}},404783:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{constructor(e,t){super(),this.environment=void 0,this.spaceId=void 0,this.environment=e,this.spaceId=t,this.reset()}getInitialState(){if(!this.environment)return;const e=new(n(221844).A)({name:"DiscussionInputStore",isTemporaryData:!0});return{textStore:new(n(630116).pm)({environment:this.environment,pointer:(0,n(594794).zP)({environment:this.environment,table:n(343666).SN,spaceId:this.spaceId}),path:["text"],recordStoreOptions:{inMemoryRecordCache:e}}),localRecordCache:e,files:[],showAttachFileIntro:!1,renderFileAttachIntro:!1}}isEmpty(){const e=this.state.textStore.getValue();return!e||0===e.length}hasNewLineCharacter(){const e=this.state.textStore.getValue();return n(919709).q4_(e).includes("\n")}}const i=o},405417:(e,t,n)=>{n.d(t,{BK:()=>X,Ch:()=>B,DH:()=>H,F9:()=>O,Ib:()=>G,Kk:()=>ie,Ku:()=>te,Pi:()=>S,Px:()=>ee,QV:()=>Z,TK:()=>z,Tk:()=>Q,W5:()=>J,aR:()=>K,ag:()=>D,ay:()=>F,eI:()=>j,eO:()=>P,f5:()=>N,jF:()=>R,jz:()=>ne,kY:()=>L,ls:()=>Y,n9:()=>W,oC:()=>q,pC:()=>T,qS:()=>x,qr:()=>A,r6:()=>I,rt:()=>C,v2:()=>E,vd:()=>$,x2:()=>k,xC:()=>oe,yS:()=>U,yy:()=>w});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(700500),i=()=>n(289915),r=()=>n(970013),a=()=>n(713998),s=()=>n(244149),l=()=>n(416504),c=()=>n(708830),d=()=>n(496603),u=()=>n(799832),p=()=>n(862292),m=()=>n(129522),g=()=>n(695625),f=()=>n(889097),v=()=>n(508496),h=()=>n(630116),_=()=>n(186445),b=()=>n(909470),y=()=>n(972435);const S=4,w=24,k=10;function I(e){var t;const n=null===(t=e.collectionStore())||void 0===t?void 0:t.getFormat().subitem_property,o=e.collectionStore();if(!o||!o.getSchema()||!n)return;const i=o.getSchema()[n];if(!i||"relation"!==i.type||r().zO(i)!==o.id)return;const a=i.property;if(!a)return;const s=o.getSchema()[a];return s&&"relation"===s.type?{property:n,inverse:a}:void 0}function x(e){return"table"===e||"timeline"===e||"list"===e}function A(e){var t;const n=(0,u().U)(e),o=null==n||null===(t=n.collectionViewStore())||void 0===t?void 0:t.getType();return Boolean((null==n?void 0:n.currentSubitemFormatStoreForUiDisplayStore.state)&&o&&x(o))}function C(e){const{store:t,subitemFormat:n,propertySchema:o}=e,i=t.getPropertyValue(n.property),r=(0,a().n)(i),s=t.getRecordModel;return a().bG({relationValue:r,propertySchema:o,getRecordModel:s,includeNoAccess:!1})}function T(e){const{store:t,subitemFormat:n,originAction:o}=e,i=t.getPropertyValue(n.property),r=(0,a().n)(i),s=t.getRecordModel;return a().pj({relationValue:r,getRecordModel:s,originAction:o})}async function M(e){const{store:t,subitemFormat:n,propertySchema:o}=e,i=t.getPropertyValue(n.property),r=(0,a().n)(i);await Promise.all(r.map((e=>h().Bv.createChildStore(t,e).load())));const s=t.getRecordModel;return a().bG({relationValue:r,propertySchema:o,getRecordModel:s,includeNoAccess:!0})}function P(e){const{store:t,subitemFormat:n,propertySchema:o}=e,i=t.getPropertyValue(n.inverse),r=(0,a().n)(i),s=t.getRecordModel;return a().bG({relationValue:r,propertySchema:o,getRecordModel:s,includeNoAccess:!1})}function B(e){var t;const{store:n,collectionStore:o,collectionContextStore:r,subitemFormat:a,subitemPathKey:s,propertyFilters:c,combinatorFilter:d,currentUserId:u,resultCache:p,regExpCache:m,formulasModule:g}=e,f=o.getSchema()[a.property];if(!f||"relation"!==f.type)return[];const v=C({store:n,subitemFormat:a,propertySchema:f});if(0===v.length)return[];let S=v.filter((e=>!s.includes(e.id))).map((e=>h().Bv.createChildStore(n,e)));const w=r.relativeVariableStore.state,k={schema:r.normalizedSchemaStore.state,userId:u,userTimeZone:(0,l().P)(),userStartOfWeek:_().XX.state,intl:y().A.getIntl(),relativeVariableResult:w,currentPageInRelatedCollection:null===(t=r.viewsModuleContextStore.currentPageStore())||void 0===t?void 0:t.id,collectionFeatureGates:(0,b().i)()};if(c&&c.length>0||d){const e=(0,i().oR)({filter:{filters:d?[...c.filter((e=>!(0,i().t_)(e.filter))).map((e=>e.filter)),d]:c.filter((e=>!(0,i().t_)(e.filter))).map((e=>e.filter)),operator:"and"},propertyMapping:void 0,context:k});S=S.filter((t=>V({blockStore:t,compiledFilter:e,subitemFormat:a,propertySchema:f,visitedIds:new Set,resultCache:p,regExpCache:m,formulasModule:g})))}return S}function R(e,t){var n,o;const i=e.currentSubitemFormatStoreForUiDisplayStore.state;if(!i)return new(c().C2)([]);const a=e.collectionStore();if(!a)return new(c().C2)([]);const u=e.currentSortsStore.state,p=a.getRecordModel,m=e.formulasCodeStore.state,g=s().kX({userTimeZone:(0,l().P)(),intl:y().A.getIntl(),userSorts:u,userId:e.getCurrentUserId(),apiSorts:[],schema:e.normalizedSchemaStore.state,formulasModule:m}),f=e.normalizedSchemaStore.state[i.property],h=f&&"relation"===f.type&&r().zO(f)===(null===(n=e.collectionStore())||void 0===n?void 0:n.id)&&f.property,_=null===(o=e.collectionViewStore())||void 0===o?void 0:o.getType(),S=!h||_&&x(_)?void 0:{property:h,filter:{operator:"is_empty"}},w=[...S&&h?[{id:h,filter:S}]:[],...e.currentPropertyFiltersStore.state],k=e.currentCombinatorFilterStore.state,I=e.subitemExpandedStore.state,A=d().Bq(e.groupsStore.getAllGroupStates().map((e=>e.resultsStore.state))),C=new Map,T=new Map;return new(c().C2)(A.map((n=>{const o=N(n);return(0,c().v)(o,(n=>{let{store:o,pathKey:r}=n;const l=I.get(r);if(!l)return{value:{store:o,pathKey:r},children:[]};const c=function(e){const{store:t,collectionStore:n,collectionContextStore:o,subitemFormat:i,querySorts:r,limit:a,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,getRecordModel:m,resultCache:g,regExpCache:f,formulasModule:h}=e,_=B({store:t,collectionStore:n,collectionContextStore:o,subitemFormat:i,subitemPathKey:l,propertyFilters:c,combinatorFilter:u,currentUserId:p,resultCache:g,regExpCache:f,formulasModule:h});if(!_)return[];const y=new(s().z8)([...r,...s().e$(_.map((e=>e.id))??[])]),S=(0,b().i)();_.forEach((e=>{y.updateBlock({block:e.getModel(),schema:n.getSchema(),propertyMapping:void 0,getRecordModel:m,resultCache:g,regExpCache:f,experimentService:v().default,collectionFeatureGates:S})}));const w=_.map((e=>e.id))??[],k=s().bC(w,y),I={};return k.forEach(((e,t)=>{I[e]=t})),d().Ul(_,(e=>I[e.id])).slice(0,a)}({store:o,collectionStore:a,collectionContextStore:e,subitemFormat:i,querySorts:g,limit:l.limit,subitemPathKey:r,propertyFilters:w,combinatorFilter:k,currentUserId:t,getRecordModel:p,resultCache:C,regExpCache:T,formulasModule:m}).map((e=>({store:e,pathKey:O(r,e)})));return{value:{store:o,pathKey:r},children:c}}))})))}function E(e,t){const n=e?[e]:[],o=t.groupsStore.getGroupState(n);if(!o)return[];const i=o.resultsStore.state;if(!t.currentSubitemFormatStoreForUiDisplayStore.state)return i;const r=[],a=t.subitemTreeStore.state.children.filter((e=>i.includes(e.value.store)));for(const s of a)U({results:r,tree:s});return r}function D(e){return(0,c().wI)(e.children[e.children.length-1])}function N(e){return{store:e,pathKey:L([e.pointer])}}function L(e){return e.map((e=>e.id)).join(",")}function O(e,t){return e?`${e},${t.id}`:t.id}function U(e){const{results:t,tree:n}=e;t.push(n.value.store);for(const o of n.children)U({results:t,tree:o})}function F(e){var t,n;const{block:o,collectionContextStore:i}=e,s=null==i||null===(t=i.currentSubitemFormatStoreForUiDisplayStore.state)||void 0===t?void 0:t.inverse;if(!s)return!1;const l=i.normalizedSchemaStore.state[s];if(!l||!(0,r().nC)(l))return!1;const c=null===(n=i.collectionViewBlockStore())||void 0===n?void 0:n.getRecordModel;if(!c)return!1;return(0,a().O4)({block:o,propertySchema:l,getRecordModel:c}).length>0}function V(e){const{blockStore:t,compiledFilter:n,subitemFormat:o,propertySchema:i,visitedIds:r,resultCache:a,regExpCache:s,formulasModule:l}=e;r.add(t.id);const c=t.getModel();if(!c)return!1;if(n({block:c,getRecordModel:t.getRecordModel,propertyMapping:void 0,resultCache:a,regExpCache:s,experimentService:v().default,formulasModule:l}))return!0;const d=C({store:t,subitemFormat:o,propertySchema:i});return 0!==d.length&&d.map((e=>h().Bv.createChildStore(t,e))).filter((e=>!r.has(e.id))).some((e=>V({blockStore:e,compiledFilter:n,subitemFormat:o,propertySchema:i,visitedIds:r,resultCache:a,regExpCache:s,formulasModule:l})))}async function j(e){const{blockStore:t,compiledFilter:n,subitemFormat:o,propertySchema:i,subitemExpandedStore:r,pathKey:a,forceStoresToLoad:s,visitedIds:l,resultCache:c,regExpCache:d}=e;if(await t.load(),l.has(t.id))return;l.add(t.id);const u=s?await M({store:t,subitemFormat:o,propertySchema:i}):C({store:t,subitemFormat:o,propertySchema:i});if(0!==u.length){r.state.set(a,{isExpanded:!0,limit:20});for(const e of u){const u=h().Bv.createChildStore(t,e),m=u.getModel();if(!m)continue;const g=await p().T.formulas.load();n({block:m,getRecordModel:u.getRecordModel,propertyMapping:void 0,resultCache:c,regExpCache:d,experimentService:v().default,formulasModule:g})||await j({blockStore:u,compiledFilter:n,subitemFormat:o,propertySchema:i,subitemExpandedStore:r,pathKey:O(a,u),forceStoresToLoad:s,visitedIds:l,resultCache:c,regExpCache:d})}}}const z=100;async function H(e){var t;const{blockStore:n,subitemFormat:o,propertySchema:i,subitemExpandedStore:r,pathKey:a,forceStoresToLoad:s,visitedIds:l,expandedIds:c,resultCache:d,regExpCache:u}=e;if(l.size>z)return!1;if(l.has(n.id))return!0;await n.load(),l.add(n.id);const p=s?await M({store:n,subitemFormat:o,propertySchema:i}):C({store:n,subitemFormat:o,propertySchema:i});if(0===p.length)return!0;(null===(t=r.state.get(a))||void 0===t?void 0:t.isExpanded)||(r.state.set(a,{isExpanded:!0,limit:20}),c.add(n.id));let m=!0;for(const g of p){const e=h().Bv.createChildStore(n,g);if(!e.getModel())continue;const t=await H({blockStore:e,subitemFormat:o,propertySchema:i,subitemExpandedStore:r,pathKey:O(a,e),forceStoresToLoad:s,visitedIds:l,expandedIds:c,resultCache:d,regExpCache:u});m=m&&t}return m}function W(e){if(!e.collectionStore())return;const t=e.currentSubitemFormatStoreForCollectionStore.state,n=e.normalizedSchemaStore.state,o=(null==t?void 0:t.inverse)&&n[t.inverse],i=(null==t?void 0:t.property)&&n[t.property];if(!(i&&(0,r().nC)(i)&&o&&(0,r().nC)(o)))return;const a=o.property,s=i.property;return a&&s?{childRelationProperty:a,parentRelationProperty:s,childRelationSchema:o,parentRelationSchema:i,subitemFormat:t}:void 0}function q(e){const t=(0,u().U)(e);if(t)return W(t)}function K(e,t){const n=G(e,t);if(n)return W(n)}function G(e,t){if(!e)return;if(!(e.isType(o().xd.collectionViewPage)||e.isType(o().xd.page)))return;const n=e.getAssociatedCollectionStore();if(!n)return;const i=new(f().A)(t);return i.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:n}),i}function $(e){const t=e.getFormat().subitem_property;if(!t)return;const n=e.getSchema()[t];if(!n||"relation"!==n.type)return;const o=n.property;return o?{property:t,inverse:o}:void 0}function Y(e,t){if(!e.isType("page")||e.isTemplate())return!1;if(!t)return!1;return!!t.collectionStore()&&Boolean(t.currentSubitemFormatStoreForCollectionStore.state)}function Q(e){var t,n;const{blockId:o,collectionContextStore:i}=e,r=null===(t=i.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,a=null==r?void 0:r.inverse;if(!r||!a)return!1;const s=e.blockStore??(null===(n=m().K.findBlockFromId(o))||void 0===n?void 0:n.getBlockStore());if(!s)return!1;const l=s.getSchema();if(!l)return!1;const c=l[a];return!(!c||"relation"!==c.type)&&P({store:s,subitemFormat:r,propertySchema:c}).length>0}function Z(e){var t;const{collectionContextStore:n,blockStore:o}=e,i=null===(t=n.currentSubitemFormatStoreForCollectionStore)||void 0===t?void 0:t.state,r=null==i?void 0:i.property;if(!i||!r)return!1;const a=o.getSchema();if(!a)return!1;const s=a[r];return!(!s||"relation"!==s.type)&&C({store:o,subitemFormat:i,propertySchema:s}).length>0}function X(e){let{blocks:t,parentRelationProperty:n,parentRelationSchema:o,collectionViewBlockStore:i}=e;const r=new Set;for(const a of t)r.add(a.id);return d().Bq(t.map((e=>{const t=(e=>{const t=e.getPropertyValue(n);return a().bG({relationValue:a().n(t),propertySchema:o,getRecordModel:e.getRecordModel,includeNoAccess:!1})})(e),s=t.map((e=>e.id));if(0===t.length)return[h().Bv.createChildStore(i,e.pointer)];return g().T.findAllSelectablesFromIds(s.filter((e=>!r.has(e)))).map((e=>e.props.store)).map((t=>h().Bv.createChildStore(t,e.pointer)))})))}function J(e,t){const n=e.subitemTreeStore,o=(0,c().Qe)(n.state.children,(e=>e.value.store===t)),i=o?L(o.map((e=>e.value.store))):"";return e.subitemExpandedStore.state.get(i)}function ee(e,t){const n=te(e,t);return e.filter(((e,t)=>n.includes(t)))}function te(e,t){const n=new Set;e.forEach((e=>{n.add(e.pointer.id)}));const o=[];return e.forEach(((e,i)=>{const r=e.getPropertyValue(t.inverse);a().n(r).some((e=>n.has(e.id)))||o.push(i)})),o}function ne(e){var t;let{collectionContextStore:n}=e;return I(n)&&"flattened"===(null===(t=n.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}function oe(e){let{collectionContextStore:t,blockStore:n}=e;return ne({collectionContextStore:t})&&Q({blockId:n.id,collectionContextStore:t,blockStore:n})}function ie(e){let{collectionContextStore:t,blockStore:n}=e;return function(e){var t;let{collectionContextStore:n}=e;return I(n)&&"hidden"===(null===(t=n.collectionViewStore())||void 0===t?void 0:t.getFormat().subitem_display_mode)}({collectionContextStore:t})&&Z({collectionContextStore:t,blockStore:n})}},405789:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(296540),i=()=>n(847249),r=()=>n(959013),a=()=>n(891078),s=()=>n(42425),l=(n(898992),n(672577),()=>n(955825)),c=()=>n(544303),d=n(474848);function u(e){const{rank:t,index:n,listFormat:o}=e;if("numbers"===o)return{index:n,listFormat:o};if("letters"===o)return{index:(0,c().GB)(n),listFormat:o};if("roman"===o)return{index:(0,c().ao)(n),listFormat:o};{const e=t%3;return 0===e?{index:n,listFormat:"numbers"}:1===e?{index:(0,c().GB)(n),listFormat:"letters"}:{index:(0,c().ao)(n),listFormat:"roman"}}}const p=function(e){const t=(0,i().K8)((()=>{if(!e.numberedListCounterStore)return u({rank:0,index:1,listFormat:void 0});const t=e.numberedListCounterStore.state.numberedListBlockIdsWithFormat.find((t=>t.id===e.store.id));return u({rank:(null==t?void 0:t.depth)||0,index:(null==t?void 0:t.index)||0,listFormat:null==t?void 0:t.format})}),[e.numberedListCounterStore,e.store.id]);if("roman"===t.listFormat){const e=t.index;return(0,d.jsx)("span",{...(0,l().AH)({pseudoBefore:{content:`"${e}."`},textAlign:"left",width:(0,c().KK)(e),whiteSpace:"nowrap"})})}{const e=t.index.toString().length;let n=24;return 3===e?n=32:4===e?n=42:e>4&&(n="unset"),(0,d.jsx)("span",{...(0,l().AH)({pseudoBefore:{content:`"${t.index}."`},width:n,textAlign:"center",whiteSpace:"nowrap"})})}};const m=(0,r().YK)({listPlaceholder:{defaultMessage:"List",id:"numberedListBlock.placeholder.label"}});function g(e,t){const l=(0,r().tz)(),c=o.useRef(null),u=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),g=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),f=(0,a().pW)(e.store,!0),v=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),h=(0,n(401497).IS)((t=>({root:{paddingLeft:n(799954).nE.paddingLeft,...f,...e.style},title:{...s().FC},titlePlaceHolder:{...v?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{width:"unset"}})),[f,v,e.style]),_=(0,d.jsxs)(s().Ay,{style:h.root,left:(0,d.jsx)(p,{store:e.store,numberedListCounterStore:e.numberedListCounterStore}),leftStyle:h.leftStyle,childrenStyle:{display:"flex",flexDirection:"column"},ref:c,children:[(0,d.jsxs)("div",{style:{display:"flex"},children:[(0,d.jsx)(n(524702).A,{style:h.title,disabled:e.disabled,store:u,placeholder:e.placeholder??l.formatMessage(m.listPlaceholder),placeholderStyle:h.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,d.jsx)(n(493733).A,{disabled:e.disabled,store:g,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,numberedListCounterStore:e.numberedListCounterStore})]});return(0,a().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"numbered_list",getNode:()=>c.current,getBlockStore:()=>e.store})),[e.store]),_)}const f=o.memo(o.forwardRef(g),n(821062).A)},405981:(e,t,n)=>{n.d(t,{HR:()=>p,_y:()=>m});var o=()=>n(534177),i=()=>n(878523),r=()=>n(901389),a=()=>n(972435),s=()=>n(351360),l=()=>n(116008),c=()=>n(681634),d=()=>n(938045);const u=(0,n(959013).YK)({discardCommentConfirmationPrompt:{id:"newDiscussionMenu.discardCommentConfirmationDialog.prompt",defaultMessage:"Do you want to discard the comment?"},discardCommentButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.discardButton.label",defaultMessage:"Discard"},draftCommentConfirmationPromptTitle:{id:"newDiscussionMenu.draftCommentConfirmationDialogTitle.prompt",defaultMessage:"Finish your draft comment?"},draftCommentConfirmationStartingNewDescription:{id:"newDiscussionMenu.draftCommentConfirmationStartingNewDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you start a new one"},draftCommentConfirmationNavigateAwayPromptDescription:{id:"newDiscussionMenu.draftCommentConfirmationNavigateAwayPromptDescription.prompt",defaultMessage:"You have a draft comment that will be lost if you leave the page"},returnToPageButtonLabel:{id:"newDiscussionMenu.discardCommentConfirmationDialog.returnToPage.label",defaultMessage:"Return to draft"}});function p(e){const{discussionInputStore:t,environment:n,discussionHelpers:o,reason:s}=e;l().A.isComposingNewDiscussion()?m({environment:n,reason:s??"navigating_away"}):o.hasCommentChanged(t)?(i().yO(n),r().ui({message:a().A.formatMessage(u.discardCommentConfirmationPrompt),showCancel:!0,handleCancel:()=>i().Ie(n),keepFocus:!0,items:[{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"red",onAccept:()=>{i().QP(n),(0,c().c)(n)}}]})):(0,c().c)(n)}function m(e){const{environment:t}=e;if(!l().A.isDraftCommentOnValidSelection())return;const n=l().A.getDiscussionInputStore();i().yO(t),r().ui({message:a().A.formatMessage(u.draftCommentConfirmationPromptTitle),description:(()=>{switch(e.reason){case"starting_new":return a().A.formatMessage(u.draftCommentConfirmationStartingNewDescription);case"navigating_away":return a().A.formatMessage(u.draftCommentConfirmationNavigateAwayPromptDescription);default:(0,o().HB)(e.reason)}})(),keepFocus:!0,innerStyle:{textAlign:"center"},showCancel:!1,shouldRenderDraftCommentIcon:!0,items:[{label:a().A.formatMessage(u.returnToPageButtonLabel),buttonType:"solid",color:"blue",onAccept:()=>{(0,d().x)({currentBlockStore:s().default.state.mainEditorCurrentBlockStore,discussionInputStore:n,environment:t}),i().Ie(t)}},{label:a().A.formatMessage(u.discardCommentButtonLabel),color:"gray",buttonType:"plain",onAccept:()=>{i().QP(t),(0,c().c)(t)}}]})}},406018:(e,t,n)=>{n.d(t,{l:()=>o});const o={invalid_request:"invalid_request",unauthorized_client:"unauthorized_client",access_denied:"access_denied",unsupported_response_type:"unsupported_response_type",invalid_scope:"invalid_scope",server_error:"server_error",temporarily_unavailable:"temporarily_unavailable"}},406699:(e,t,n)=>{n.d(t,{Ay:()=>u,sx:()=>d,yP:()=>l,z7:()=>c});var o=n(296540),i=()=>n(847249),r=()=>n(962730),a=()=>n(897119),s=n(474848);const l=r().C,c=a().nl,d=r().W,u=o.forwardRef((function(e,t){const{render:r,onClose:l,persistOnClose:c,renderOrigin:d,disabled:u,onClick:p,open:m}=e,g=(0,o.useRef)(null),f=(0,i().uB)(e.buttonPopupStore,n(463830).A),v=(0,i().K8)((()=>f.state.open),[f]);(0,o.useEffect)((()=>f.setState({...f.state,open:Boolean(m)})),[f,m]);const h=(0,o.useCallback)((()=>{l&&l(),c||f.reset()}),[f,l,c]),_=(0,o.useCallback)((()=>r({close:h})),[r,h]),b=(0,o.useCallback)((t=>{e.disablePopup||f.setState({...f.state,open:t})}),[f,e.disablePopup]),y=(0,o.useCallback)((t=>{e.stopClickPropagation&&(null==t||t.stopPropagation()),t&&n(592678).Vt(t)||(null==p||p(t),e.disablePopup||f.setState({...f.state,open:!0}))}),[f,e.stopClickPropagation,p,e.disablePopup]);(0,o.useImperativeHandle)(t,(()=>({setOpen:b,getAnchor:()=>g.current})));const S=()=>d({onClick:u?n(496603).D_:y}),w=(0,i().K8)(S,[S]);return(0,s.jsx)(a().Ay,{ref:g,...e,forceInitialInbound:Boolean(e.forceInitialInbound),render:_,open:v,onDismiss:h,origin:w,originGap:e.originGap,borderRadius:e.borderRadius,popupWrapStyle:e.popupWrapStyle,trapFocus:!0})}))},406792:(e,t,n)=>{n.r(t),n.d(t,{NotionPerformanceClass_TEST_ONLY:()=>w,default:()=>S});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);var o=()=>n(908006),i=()=>n(410690),r=()=>n(248566),a=()=>n(449412),s=()=>n(989423),l=()=>n(675742),c=()=>n(571963),d=()=>n(150749),u=()=>n(508496),p=()=>n(961581),m=()=>n(745875);const g=Object.entries({jsHeapSizeLimit:"browser.mem.heap_size_limit",totalJSHeapSize:"browser.mem.total_heap_size",usedJSHeapSize:"browser.mem.used_heap_size"});function f(e,t,o){const{computedStoreCount:i,computedStoreSubscriptionCount:r,computedStoreRecomputesTotal:a,computedStoreRerendersTotal:s}=(0,n(496506).g5)();v(e,t,{eventName:"computed_store_metrics",eventProperties:{computed_store_metrics:{"computed_store.instances.total":i,"computed_store.subscriptions.total":r,"computed_store.recomputes.total":a,"computed_store.rerenders.total":s},collected_during:t,...o}})}function v(e,t,n,o){var i;const r=o??Math.random(),a=u().default.getConfigKey("event_trail_events",n.eventName),l=a&&"sampleRatesByMetric"in a&&"object"==typeof a.sampleRatesByMetric&&(null===(i=a.sampleRatesByMetric)||void 0===i?void 0:i[t])||0;(0,m().ox)(l,(()=>r))&&(0,s().u4)({environment:e,event:n,opts:{sampling:{behavior:"custom",sampleRate:1}}})}function h(){const e=navigator.webdriver,t=window.notionIsPlaywrightTimeFrozen;return e&&t}const _=new Set(["navigation_page_render","navigation_database_render","typing_lag"]);class b{constructor(){this.startTimesByMetricName={},this.lastVisibilityChange=0,n(865241).A.addListener((()=>{this.lastVisibilityChange=performance.now()}))}DO_NOT_USE_markLegacy(e){return this.mark(e)}mark(e){var t;if(h())return{metricName:e,startTime:performance.now(),sentryTransaction:void 0};let n;if(Boolean(null===(t=performance)||void 0===t?void 0:t.mark)){const t=performance.mark(e);if(t)n=t.startTime;else{const t=performance.getEntriesByName(e);n=t[t.length-1].startTime}}else n=performance.now();const o="sentry"===d().getProfilingToolForSession()&&_.has(e)?a().nb({name:e}):void 0;return this.startTimesByMetricName[e]={startTime:n,sentryTransaction:o},{metricName:e,startTime:n,sentryTransaction:o}}DO_NOT_USE_markAllOfLegacy(e){this.markAllOf(e)}markAllOf(e){if(0===e.length)return;const t=performance.now();for(const n of e)this.startTimesByMetricName[n]={startTime:t,sentryTransaction:"sentry"===d().getProfilingToolForSession()&&_.has(n)?a().nb({name:n}):void 0}}DO_NOT_USE_measureLegacy(e,t){h()||this.measure(e,t)}measure(e,t){this._measure(e,t)}DO_NOT_USE_measureAfterNextFlushLegacy(e,t){this.measureAfterNextFlush(e,t)}measureAfterNextFlush(e,t){o().default.afterNextFlush((()=>{const n="getData"in t?t.getData():void 0;"getData"in t&&void 0===n||this._measure(e,{...t,data:n})}))}DO_NOT_USE_measureFromPageOriginLegacy(e,t){this.measureFromPageOrigin(e,t)}measureFromPageOrigin(e,t){if((0,r().A)())return;const n="object"==typeof e?e.metricName:e,o=y(t.environment);"number"==typeof o&&this.measure({metricName:n,startTime:o,..."object"==typeof e?{endTime:e.endTime}:{}},t)}measureFromAppStart(e,t){if((0,r().A)())return;const n="object"==typeof e?e.metricName:e,o="RouterStore"in(a=t.environment)&&(0,c().isPrewarmedTabInitialRender)(a)?p().A.state.prewarmedTabAppStartTimeOverride:i().getAppStartTime();var a;"number"==typeof o&&this.measure({metricName:n,startTime:o,..."object"==typeof e?{endTime:e.endTime}:{}},t)}DO_NOT_USE_measureFromPageOriginAfterNextFlushLegacy(e,t){this.measureFromPageOriginAfterNextFlush(e,t)}measureFromPageOriginAfterNextFlush(e,t){if((0,r().A)())return;const n="object"==typeof e?e.metricName:e;o().default.afterNextFlush((()=>{const o="getData"in t?t.getData():void 0;if("getData"in t&&void 0===o)return;const i=y(t.environment);"number"==typeof i&&this._measure({metricName:n,startTime:i,..."object"==typeof e?{endTime:e.endTime}:{}},{...t,data:o})}))}hasMetricBeenMarked(e){return void 0!==this.startTimesByMetricName[e]}_measure(e,t){const{shouldExcludeFromTimeline:o}=t;if("object"==typeof e){const{startTime:n,endTime:i,metricName:r,sentryTransaction:a}=e;this.startTimesByMetricName[r]=void 0;const s=this.getDuration({metricName:r,startTime:n,endTime:i,shouldExcludeFromTimeline:o});a&&a.finish(i),this.trackDuration({metricName:r,startTime:n,duration:s,options:t})}else if("string"==typeof e){const n=e,i=this.startTimesByMetricName[n];if(!i)return;const{startTime:r,sentryTransaction:a}=i;this.clearStartTimesByMetricName(n);const s=this.getDuration({metricName:n,startTime:r,shouldExcludeFromTimeline:o});a&&a.finish(),this.trackDuration({metricName:n,startTime:r,duration:s,options:t})}else(0,n(534177).HB)(e)}clearStartTimesByMetricName(e){this.startTimesByMetricName[e]&&(this.startTimesByMetricName[e]=void 0)}getDuration(e){const{metricName:t,startTime:n,shouldExcludeFromTimeline:o}=e,i="number"==typeof e.endTime?e.endTime:performance.now();if(!o)try{return performance.measure(t,{start:n,end:i}).duration}catch(r){}return i-n}async trackDuration(e){const{metricName:t,duration:n,startTime:o,options:i}=e,{environment:r,preboot:a,sendToStatsig:c}=i,d="data"in i?i.data:void 0;if(document.hidden)return;if("number"==typeof this.lastVisibilityChange&&o<this.lastVisibilityChange)return;const p=void 0!==i.sampleDecision?i.sampleDecision:await s().LM({eventName:t,eventProperties:d,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:i.shouldSendIfStatsigNotInitialized?"track":"drop"}});if(p){if(r.device.isElectron&&l().electronApi&&l().electronApi.windowIsVisible){if(!(await l().electronApi.windowIsVisible()))return}if(r.device.isElectron&&l().electronApi&&l().electronApi.isActiveTab&&l().electronApi.isActiveTab.get){if(!(await l().electronApi.isActiveTab.get()))return}s().u4({environment:r,event:{eventName:t,eventProperties:{time:n,...d,sample_decision:p,is_document_focused:document.hasFocus()}},opts:{preboot:a,sampling:{behavior:"decided",sampleDecision:p}}}),c&&u().default.logEvent(t,n),function(e,t,n){if(!("memory"in(window.performance||{})))return;const o=Math.random();g.forEach((i=>{let[r,a]=i;if(!(r in window.performance.memory))return;const s={eventName:a,eventProperties:{bytes:window.performance.memory[r],collected_during:t,...n}};v(e,t,s,o)}))}(r,t,d),f(r,t,d)}}}function y(e){return"RouterStore"in e&&(0,c().isPrewarmedTabInitialRender)(e)?p().A.state.prewarmedTabAppStartTimeOverride:i().getPageOriginTime()}const S=new b;class w extends b{}},406999:(e,t,n)=>{n.d(t,{Gz:()=>i,eL:()=>r,ju:()=>o,nV:()=>s,qs:()=>a});n(898992),n(823215);function o(e){return"existingUser"===e.type}function i(e){return"newUser"===e.type}function r(e){return"newUser"===e.type||"existingUser"===e.type}function a(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function s(e){return e.inviteTargets.every((e=>"existingUser"===e.type||"newUser"===e.type||"group"===e.type))}},407031:(e,t,n)=>{n.d(t,{S:()=>i});var o=()=>n(129522);function i(e){const{collectionContextStore:t}=e,n=t.collectionViewBlockStore();if(!n)return;const i=o().K.findCollectionViewBlockFromStore(n);i&&"resetLeftScrollAfterFlush"in i&&i.resetLeftScrollAfterFlush&&i.resetLeftScrollAfterFlush()}},407054:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}}const i=new o},407730:(e,t,n)=>{function o(e,t){if(t(e))return e;let n,o=0;do{o++,n=`${e} ${o}`}while(!t(n));return n}n.d(t,{A:()=>o})},409902:(e,t,n)=>{n.d(t,{h:()=>a});n(898992),n(354520);var o=()=>n(246826),i=()=>n(751156),r=()=>n(414360);function a(e){var t;const{collectionViewBlockStore:n,collectionStore:a,transaction:s}=e;if(!n.isDefined()||!a.isDefined())return;const l=n.getCollectionViewStores().filter((e=>{var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.id)===a.id}));for(const o of l)(0,r().T)({collectionViewBlockStore:n,collectionViewStore:o,transaction:s});(null===(t=n.getFormat().collection_pointer)||void 0===t?void 0:t.id)===a.id&&(o().zv({store:n,data:{collection_id:null},transaction:s}),o().zv({store:n.getFormatStore(),data:{collection_pointer:null},transaction:s})),i().applyOperation({store:n,operation:{pointer:n.pointer,command:"keyedObjectListRemove",path:["format","collection_pointers"],args:{remove:a.pointer}},transaction:s});a.getAlive()&&a.getParentId()===n.id&&o().zv({store:a,data:{alive:!1},transaction:s})}},410282:(e,t,n)=>{n.d(t,{j:()=>r});var o=()=>n(100622),i=()=>n(630116);function r(e){for(;null!==(t=e)&&void 0!==t&&t.isTable("block");){var t;const n=e.getRecordStoreUIParent(),r=n?i().Bv.createChildStore(n,e.pointer):void 0,a=null==r?void 0:r.getFormat().block_color;if(a&&(0,o().Cg)(a))return a;e=e.getRecordStoreUIAncestor(1)}return"default_background"}},411387:(e,t,n)=>{n.d(t,{jx:()=>m,_d:()=>p,e2:()=>f,RN:()=>_,iI:()=>u,t:()=>a(),N9:()=>v,Vi:()=>h});n(898992),n(354520);var o=()=>n(244641),i=()=>n(496603),r=()=>n(534177),a=()=>n(638681),s=()=>n(762433);const l=["student","personal","plus","business","enterprise"];function c(e){return(0,r().Xk)(l,e)}var d=()=>n(979340);const u=["plus","business","enterprise","ai","sites_custom_hostnames"];function p(e,t,n){return f(m(e,t,n))}function m(e,t,n){const{name:i,scope:a,actor:l}=n,c={...n,billingData:a.billingData},d=a.premiumFeatureOverrides,u=i in d?function(e,t,n){const o={type:"contact_account_manager"},i=e[t.name].type;if("check"===i){const e={type:"none"};return!0===n?{type:"available",limit:e}:{type:"unavailable",upsell:o,limit:e}}if("per_use"===i){const e=t.amount,i={type:"per_use",amount:n};return"unlimited"===n||n>e?{type:"available",limit:i}:{type:"unavailable",upsell:o,limit:i}}if("cumulative"===i){const e=t.amount,i=t.data.current,r={type:"cumulative",current:i,total:n};return"unlimited"===n||n>=i+e?{type:"available",limit:r}:{type:"unavailable",upsell:o,limit:r}}(0,r().HB)(i)}(e,n,d[i]):t[i](c);let p;if("available"===u.type)if(u.expiry&&u.expiry.endDate<o().c9.now())p={type:"unavailable",limit:u.limit,upsell:g(a.billingData,u.expiry.upsell,n.supportedProducts)},n.environment.logFunction({level:"info",from:"premiumFeatureFramework",type:"expiredFeature",data:{featureName:i,featureScope:a,featureActor:l,rawFeatureAvailability:u}});else{const e=u.upsell?g(a.billingData,u.upsell,n.supportedProducts):void 0;p={...u,upsell:e}}else{const e=g(a.billingData,u.upsell,n.supportedProducts);p={...u,upsell:e}}const m=(0,s().N8)(a.billingData.subscription);return Math.random()<.001&&n.environment.logFunction({level:"info",from:"premiumFeatureFramework",type:"getPremiumFeatureAvailability",data:{featureName:i,featureScope:a,featureActor:l,rawFeatureAvailability:u,isSalesAssisted:m,featureBillingData:a.billingData}}),n.environment.trackFunction({feature_name:i,is_feature_available:"available"===p.type}),p}function g(e,t,n){if((0,s().N8)(e.subscription))return{type:"contact_account_manager"};if("product"!==(null==t?void 0:t.type)||n.includes(t.product)||!c(t.product))return t;const o=t.product,r=n.filter((e=>c(e))).filter((e=>"student"!==e)).filter((e=>d().o3[e]>=d().o3[o])),a=(0,i().wq)(r,(e=>d().o3[e]));return a?{...t,product:a}:{type:"contact_sales"}}function f(e){return"available"===(null==e?void 0:e.type)}function v(e,t){let{available:n,unavailable:o}=t;return"available"===e.type?n():"unavailable"===e.type?o(e):(0,r().HB)(e)}function h(e,t){if(void 0!==e)return v(e,{available:()=>{},unavailable:t})}function _(e){return a().object({required:e,optional:{}})}},411671:(e,t,n)=>{n.d(t,{A:()=>s,s:()=>r});var o=()=>n(68263),i=()=>n(792415);const r={disabled:{hasPublicPermission:!1},view:{hasPublicPermission:!0,permission:"view"},comment:{hasPublicPermission:!0,permission:"comment"},edit:{hasPublicPermission:!0,permission:"edit"}};Object.freeze(r),Object.freeze(r.disabled),Object.freeze(r.view),Object.freeze(r.comment),Object.freeze(r.edit);class a extends(()=>n(757695))().default{getInitialState(){return{editing:!1,commenting:!1}}getMode(e,t){const n=this.getModeType(e,t)||"disabled";return r[n]}getModeType(e,t){if(!t.isDefaultRecordCache()||!(0,n(731320).qb)(e,t))return;const r=t.getRole(),a=!r||(0,o().p2)(r),s=!r||(0,o().ok)(r),l=e.currentUser.isLoggedIn();return a&&l&&(this.state.editing||null!==(c=i().A.state.publicPageData)&&void 0!==c&&c.isPublicShareLink||null!==(d=i().A.state.publicPageData)&&void 0!==d&&d.isEditableOrCommentableSite)?"edit":s&&l?"comment":"view";var c,d}}const s=new a},413468:(e,t,n)=>{n.d(t,{k:()=>i});var o=()=>n(496603);function i(e,t){return t.getAlive()!==e.getAlive()||!o().n4(t.getText(),e.getText())||!o().n4(t.getContent(),e.getContent())}},413962:(e,t,n)=>{n.d(t,{Iw:()=>Z,RR:()=>ie,Rq:()=>Q,X2:()=>K,_3:()=>H,c3:()=>X,d9:()=>G,kE:()=>le,nZ:()=>se,rY:()=>ae,tM:()=>ne,tW:()=>$});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454),n(737550);var o=()=>n(319954),i=()=>n(700500),r=()=>n(416845),a=()=>n(206267),s=()=>n(179034),l=()=>n(197959),c=()=>n(161479),d=()=>n(798880),u=()=>n(397277),p=()=>n(919709),m=()=>n(449412),g=()=>n(220719),f=()=>n(496603),v=()=>n(534177),h=()=>n(878523),_=()=>n(571062),b=()=>n(112873),y=()=>n(722101),S=()=>n(246826),w=()=>n(797265),k=()=>n(319975),I=()=>n(315097),x=()=>n(751156),A=()=>n(423804),C=()=>n(845489),T=()=>n(594794),M=()=>n(962845),P=()=>n(108944),B=()=>n(20313),R=()=>n(969197),E=()=>n(792002),D=()=>n(351360),N=()=>n(77246),L=()=>n(630116),O=()=>n(835066),U=()=>n(543225),F=()=>n(59320),V=()=>n(588836),j=()=>n(249349),z=()=>n(583824);function H(e){const{action:t,environment:n,commentStore:o,discussionStore:i,transaction:s,discussionLocation:l,currentPageStore:c}=e;if(!c)throw new(r().yI4)("Expected current page store to be defined");const u=i.getSuggestModifiedBlockStores()??[],{currentUserStore:m}=D().default.state;if(!m)throw new(r().yI4)("Expected current user store to be defined");const v=u.filter((e=>{const t=P().fA(e);return c.id===(null==t?void 0:t.id)}));if(v.length!==u.length)return void function(e){const{action:t,blockStoresInPage:n,discussionStore:o,transaction:i,environment:s,discussionLocation:l,currentPageStore:c}=e,d=o.getParentStore();if(!d)throw new(r().yI4)("Suggestion should have parent block store");const u=o.getRawContextStore(),m=u.getValue(),v=n.map((e=>e.id));S().KY({store:u,value:{...m,modifiedBlockIds:f().FF(o.getSuggestModifiedBlockIds(),...v),resolvedBlockIds:v},transaction:i});const{discussionStore:h,commentStore:_}=Y({environment:s,transaction:i,blockStore:d,modifiedBlockIds:v,splitFrom:o.id,skipAnnotatingTransaction:!0});(function(e){const{environment:t,blockStores:n,oldDiscussionStore:o,newDiscussionStore:i,transaction:r}=e;n.forEach((n=>{(0,V().u)({transaction:r,blockStore:n,discussionIds:[o.id]}),(0,U().B)({transaction:r,blockStore:n,discussionId:i.id});const s=te(n,o.id);s&&(oe({environment:t,transaction:r,blockStore:n,blockSuggestionId:s.id,removeDiscussionId:{discussionId:s.discussionId}}),X({environment:t,transaction:r,discussionStore:o}),ne(r,n,{id:a().JW(),type:s.type,discussionId:i.id})),function(e){const{blockStore:t,oldDiscussionStore:n,newDiscussionStore:o,transaction:i,environment:r}=e,a=(0,g().o9)(t.getTitleStore()),s=t.getTitleValue();for(let l=0;l<s.length;l++){const e=p().uPN(s[l]);for(const t of e)if(p().I1e(t)&&p().vu(t)===n.id){const e=(0,g().o9)(E().Bv(s,l));k().gw({environment:r,store:a,selection:e,annotationKey:p().JIi(t),transaction:i,updateSelection:!1});const n=p()._kG(t,o.id);k().Mw({environment:r,store:a,selection:e,annotation:n,transaction:i})}}}({...e,blockStore:n})}))})({blockStores:n,oldDiscussionStore:o,newDiscussionStore:h,transaction:i,environment:s}),H({action:t,environment:s,commentStore:_,discussionStore:h,transaction:i,discussionLocation:l,currentPageStore:c})}({action:t,discussionLocation:l,blockStoresInPage:v,discussionStore:i,transaction:s,environment:n,currentPageStore:c});(0,j().j)({environment:n,commentStore:o,discussionStore:i,transaction:s,discussionLocation:l,resolutionType:t}),function(e){const{blockStores:t,discussionStore:n,environment:o,transaction:i,action:r}=e;for(const a of t){const e=te(a,n.id);if(e){if(oe({environment:o,transaction:i,blockStore:a,blockSuggestionId:e.id}),"reject"===r&&"insert"===e.type){const e=a.getTitleStore(),t=null==e?void 0:e.getValue();t&&ee(t)||w().ZL({environment:o,blocks:[a],transaction:i})}if("accept"===r&&"remove"===e.type&&w().ZL({environment:o,blocks:[a],transaction:i}),"reject"===r&&"add_line_break"===e.type||"accept"===r&&"remove_line_break"===e.type){const e=(0,g().o9)(a.getTitleStore()),t=(0,C().b)(e),n=t?(0,R().T)(t):void 0;if(t&&n){I().oZ({environment:o,transaction:i,store:t,block:n,targetStore:e,targetBlock:a});const r=n.getContentStores(),s=(0,g().o9)((0,R().T)(a));for(const e of r)y().nc({parentStore:s.getContentStore(),beforeStore:n,insertStore:e,transaction:i}),y().TF({parentStore:n.getContentStore(),childToRemoveStore:e,transaction:i});w().ZL({environment:o,transaction:i,blocks:[n]})}}}}}({environment:n,transaction:s,blockStores:u,discussionStore:i,action:t});for(const a of u){if(a.isType("table_row")){var h;const e=(null===(h=a.getParentBlockStore())||void 0===h?void 0:h.getFormat().table_block_column_order)??[];for(const o of e){W({environment:n,transaction:s,discussionStore:i,titleStore:a.getPropertyStore(o),action:t})}}else{const e=a.getTitleStore(),o=a.getCaptionStore();if(!e&&!o)throw new(r().yI4)("Could not get title store or caption store for block");e&&W({environment:n,transaction:s,discussionStore:i,titleStore:e,action:t}),o&&W({environment:n,transaction:s,discussionStore:i,titleStore:o,action:t})}(0,U().B)({transaction:s,blockStore:a,discussionId:i.id})}const _=(0,g().o9)(i.getSuggestionRawContextStore());S().zv({store:_,data:{rejected:"reject"===t,resolvedBy:{id:m.id,table:d().oo}},transaction:s})}function W(e){const{environment:t,transaction:n,discussionStore:o,titleStore:i,action:a}=e,s=i.getValue();if(s)for(let l=s.length-1;l>=0;l--){const e=p().uPN(s[l]);for(const c of e)if(p().I1e(c)&&p().vu(c)===o.id){const e=E().Bv(s,l);if(!e)throw new(r().yI4)("Could not generate selection for token");q({annotation:c,action:a,selection:e,environment:t,transaction:n,titleStore:i})}}}function q(e){const{annotation:t,action:n,selection:o,environment:i,transaction:r,titleStore:a}=e,s=p().JIi(t);if("accept"===n)if(p().O3D(t))k().gw({environment:i,store:a,selection:o,annotationKey:s,transaction:r,updateSelection:!1});else if(p().ZRT(t))k().jQ({environment:i,store:a,selection:o,transaction:r});else if(p().MXn(t)||p().zIw(t)){k().gw({environment:i,store:a,selection:o,annotationKey:s,transaction:r,updateSelection:!1});const e=p().Dew(t);if(p().MXn(t))k().Mw({environment:i,store:a,selection:o,annotation:e,transaction:r});else{const t=p().JIi(e);k().gw({environment:i,store:a,selection:o,annotationKey:t,transaction:r,updateSelection:!1})}}else(0,v().HB)(t);else"reject"===n?p().ZRT(t)||p().MXn(t)||p().zIw(t)?k().gw({environment:i,store:a,selection:o,annotationKey:s,transaction:r,updateSelection:!1}):p().O3D(t)?k().jQ({environment:i,store:a,selection:o,transaction:r}):(0,v().HB)(t):(0,v().HB)(n)}function K(e){const{environment:t,transaction:n,blockStore:o,type:i,removeDiscussionId:r}=e;let a;"add_line_break"===i?a=o.getAddLineBreakSuggestion():"remove_line_break"===i?a=o.getRemoveLineBreakSuggestion():"insert"===i?a=o.getInsertSuggestion():"remove"===i?a=o.getRemoveSuggestion():(0,v().HB)(i),a&&oe({environment:t,transaction:n,blockStore:o,blockSuggestionId:a.id,removeDiscussionId:r?{discussionId:a.discussionId}:void 0})}function G(e){const{environment:t,transaction:n,blockStores:o,formulasModule:i}=e;if(0===o.length)return;const s=(0,z().i)({environment:t,blockStore:o[0],commentTextValue:[[""]],transaction:n,files:[],type:"suggestion",formulasModule:i});if(!s)throw new(r().yI4)("Discussion must be created when creating a block with suggestion");return o.forEach((e=>{ne(n,e,{id:a().JW(),type:"remove",discussionId:s.id}),X({environment:t,transaction:n,discussionStore:s,addModifiedBlockIdsAfter:[e.id]})})),s}function $(e){const{environment:t,transaction:n,blockStore:o,type:i,createDiscussionStore:s}=e;if(o.getAddLineBreakSuggestion()||o.getRemoveLineBreakSuggestion())return;const l=s();if(ne(n,o,{id:a().JW(),type:i,discussionId:l.id}),!l)throw new(r().yI4)("Discussion must be created when creating a block with suggestion");return X({environment:t,transaction:n,discussionStore:l,addModifiedBlockIdsAfter:[o.id]}),l}function Y(e){var t;const{environment:n,transaction:o,blockStore:i,modifiedBlockIds:a,splitFrom:s,skipAnnotatingTransaction:c}=e;if(!c&&o.getSuggestionDiscussionStore())throw new(r().yI4)("Calling createSuggestionDiscussion when already have a suggestion discussion store in the transaction.");const d={createDiscussionArgs:{type:"suggestion",modifiedBlockIds:a,splitFrom:s},blockStore:i,environment:n,transaction:o,commentTextValue:[[""]],files:[],discussionId:(0,T().Z1)({environment:n,table:l().$Y,spaceId:i.pointer.spaceId})},u=(0,F().G)(d);return c||o.annotationWithSuggestionDiscussionStore(u.discussionStore),h().bJ(n,{comment_id:u.commentStore.id,discussion_id:u.discussionStore.id,discussion_type:"suggestion",parent_block_id:u.discussionStore.getParentId(),parent_collection_id:null===(t=u.discussionStore.getParentStore())||void 0===t?void 0:t.getParentCollectionIdUpToTwoLevels()}),u}function Q(e){return(0,R().T)(e.start.store)}function Z(e,t){const n=(0,R().T)(e.start.store);if(n)return L().sk.createChildStore(n,{table:l().$Y,id:t,spaceId:(0,c().e)(n.pointer.spaceId)})}function X(e){var t;const{environment:n,transaction:o,discussionStore:i,addModifiedBlockIdsBefore:a=[],addModifiedBlockIdsAfter:s=[],removeModifiedBlockIds:l=[],addModifiedBlockIdsAfterAnchor:c}=e;if("suggestion"!==i.getType())throw new(r().yI4)("This fn only used for suggestion");const d=i.getContext(),p=(0,g().o9)(i.getSuggestionRawContextStore());if(a.length>0||s.length>0||l.length>0){const e=i.getSuggestModifiedBlockIds()??[],t=f().FF(a,...e),n=f().FF(s,...e),{first:r,second:d}=(0,u().wF)(e,c),m=[...t,...r,...n,...d].filter((e=>!l.includes(e)));S().zv({store:p,data:{modifiedBlockIds:m},transaction:o})}let m;const v=i.getSuggestModifiedBlockStores()??[];if(0===v.length)m=void 0;else{const e=v[0],t=P().fA(e);m=t?N().Uv.getSessionId(t):void 0}m&&p.getKeyStore("latestSessionId").getValue()!==m&&S().zv({store:p,data:{latestSessionId:m},transaction:o});const h=i.getSuggestionSnapshotStore();if(!h)throw new(r().yI4)("Suggestion discussion snapshot store required to update context");const b=null===(t=i.getModel())||void 0===t?void 0:t.getLiveContext(i.getRecordModel);b&&S().zv({store:h,data:{data:b},transaction:o}),d&&d.length>0||_().A2({environment:n,suggesting_session_id:m,discussion_id:i.id,suggestion_types:J(i),target_block_id:i.getParentId()})}function J(e){const t=e.getContext();if(!t)return[];const n=e.id,o=new Set;for(const i of t)if("textValue"===i.type){const e=i.value.flatMap((e=>p().uPN(e))).filter((e=>p().I1e(e)&&p().vu(e)===n));let t=!1,r=!1;for(const n of e)n[0]===p().Ifu.SuggestionInsertText?t=!0:n[0]===p().Ifu.SuggestionRemoveText?r=!0:n[0]===p().Ifu.SuggestionAnnotate?o.add("add_annotation"):n[0]===p().Ifu.SuggestionUnannotate&&o.add("remove_annotation");t&&r?o.add("replace_text"):(t&&o.add("add_text"),r&&o.add("remove_text"))}else if("blockSuggestion"===i.type){const e=i.value.type;switch(e){case"insert":o.add("add_block");break;case"remove":o.add("remove_block");break;case"remove_line_break":o.add("remove_line_break");break;case"add_line_break":o.add("add_line_break");break;default:(0,v().HB)(e)}}else(0,v().HB)(i);return Array.from(o)}function ee(e){for(const t of e){if(!p().uPN(t).some(p().I1e))return!0}return!1}function te(e,t){const n=e.getSuggestionsStore().getValue();return null==n?void 0:n.find((e=>e.discussionId===t))}function ne(e,t,n){if("page"===t.getType()){const n=new(r().yI4)("Page-level suggestion added.");m().O8(n,{from:"suggestionActions",type:"pageLevelSuggestionAdded",data:{miscDataToConvertToString:{blockId:t.id,blockType:t.getType(),userAction:e.getUserActionForAnalyticsPurposesOnly(),oldBlock:t.getCreatedTime()<Date.now()-5e3}}})}const o=t.getFormatStore().getKeyStore("suggestions");x().applyOperation({store:t,operation:{pointer:o.pointer,command:"keyedObjectListAfter",path:o.path,args:{value:n}},transaction:e}),(0,U().B)({transaction:e,blockStore:t,discussionId:n.discussionId})}function oe(e){const{transaction:t,blockStore:n,blockSuggestionId:o,removeDiscussionId:i}=e,r=n.getFormatStore().getKeyStore("suggestions");x().applyOperation({store:n,operation:{pointer:r.pointer,command:"keyedObjectListRemove",path:r.path,args:{remove:{id:o}}},transaction:t}),i&&(0,V().u)({transaction:t,blockStore:n,discussionIds:[i.discussionId]})}function ie(e,t,n,o,i){const{discussionStore:a,blockStore:s}=function(e,t,n,o,i){let a;if(n instanceof L().Bv)a=n;else{const e=n.start.store.getAncestorRecordStoreAtRootPath();if(!(e&&e instanceof L().Bv))throw new(r().yI4)("Cannot create a suggestion on a RecordStore that's not a block.");a=e}const s=t.getSuggestionDiscussionStore();if(s)return{discussionStore:s,blockStore:a};const d=a.getInsertSuggestion();if(d){const n=L().sk.createChildStore(a,{table:l().$Y,id:d.discussionId,spaceId:(0,c().e)(a.pointer.spaceId)});if((0,A().Ih)(n,e.currentUser))return t.annotationWithSuggestionDiscussionStore(n),{discussionStore:n,blockStore:a}}if(o)for(const r of o.annotationTypes){const e=(0,A().x5)(a,o.annotations,o.currentUser,r);if(e)return{discussionStore:e.discussionStore,blockStore:a}}if(i)for(const r of i.suggestionTypes){const e=i.blockStore.getAllBlockSuggestions().find((e=>{if(e.type===r){const t=L().sk.createChildStore(i.blockStore,{table:l().$Y,id:e.discussionId,spaceId:(0,c().e)(i.blockStore.pointer.spaceId)});return(0,A().Ih)(t,i.currentUser)}}));if(e)return{discussionStore:L().sk.createChildStore(i.blockStore,{table:l().$Y,id:e.discussionId,spaceId:(0,c().e)(i.blockStore.pointer.spaceId)}),blockStore:a}}const u=Y({transaction:t,blockStore:a,modifiedBlockIds:[a.id],environment:e});return{discussionStore:u.discussionStore,blockStore:a}}(e,t,n,o,i);return O().$N(e,s)&&b().B4({environment:e,blockStore:s,shouldFocusDiscussion:!0,analyticsFrom:"new_suggestion",discussionIds:[a.id],recursivelyLoadAllDiscussions:!1}),a}function re(e){const{environment:t,store:n,discussionStore:o,selection:i,transaction:r}=e,a=p().LPC({textValue:n.getValue(),startIndex:i.startIndex,endIndex:i.endIndex,groupingKey:p().Ifu.SuggestionInsertText}).map((e=>{let{annotation:o,startIndex:r,endIndex:a}=e;const s=p().vu(o),l=(0,A().o9)({store:n,discussionId:s});if(l&&(0,A().Ih)(l,t.currentUser))return{startIndex:Math.max(r,i.startIndex),endIndex:Math.min(a,i.endIndex),annotation:o}}));k().Mw({environment:t,store:n,annotation:[p().Ifu.SuggestionRemoveText,o.id],selection:i,transaction:r}),a.reverse().forEach((e=>{if(e){k().jQ({environment:t,store:n,selection:{startIndex:e.startIndex,endIndex:e.endIndex},transaction:r});const o=p().vu(e.annotation),i=(0,A().o9)({store:n,discussionId:o});i&&X({environment:t,transaction:r,discussionStore:i})}}))}function ae(e){const{environment:t,multiSelection:n,transaction:o,discussionStore:r}=e,s=(0,M().$W)(n);if(0===s.length)return;if(1===s.length){const{store:e,selection:n}=s[0];return re({environment:t,store:e,selection:n,transaction:o,discussionStore:r}),void X({environment:t,transaction:o,discussionStore:r,addModifiedBlockIdsAfter:[e.id]})}const{start:l,end:c}=n;re({environment:t,store:l.store,selection:{startIndex:l.index,endIndex:1/0},transaction:o,discussionStore:r}),X({environment:t,transaction:o,discussionStore:r,addModifiedBlockIdsAfter:[l.store.id]});const d=[n.start.store.id],u=(0,M().Tp)({multiSelection:n,includeNonSelectable:!0});if(!u)return;const{treeRange:p}=u;for(const m of p.iterateDeletion())"delete"===m.operation&&(0,B().qq)({treeOperation:m,deleteFrom:"record-store-parent"}).forEach((e=>{let{childToRemove:t}=e;t.id===n.start.store.id||t.id===n.end.store.id||(0,i().$I)((0,g().o9)(t.getType()))||(d.push(t.id),ne(o,t,{id:a().JW(),type:"remove",discussionId:r.id}))}));X({environment:t,transaction:o,discussionStore:r,addModifiedBlockIdsAfter:d}),re({environment:t,store:c.store,selection:{startIndex:0,endIndex:n.end.index},transaction:o,discussionStore:r}),X({environment:t,transaction:o,discussionStore:r,addModifiedBlockIdsAfter:[c.store.id]})}function se(e){const{environment:t,sourceBlockStore:n,targetBlockStore:i,transaction:r,selectionIsExpanded:d,editorMode:u}=e,m=n.getAddLineBreakSuggestion()??n.getRemoveLineBreakSuggestion();if(m){const e=L().sk.createChildStore(n,{id:m.discussionId,table:l().$Y,spaceId:(0,c().e)(n.pointer.spaceId)});S().zv({store:e,data:{parent_id:i.id,parent_table:s().ev},transaction:r}),ne(r,i,m),X({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsBefore:[i.id],removeModifiedBlockIds:[n.id],addModifiedBlockIdsAfterAnchor:n.id}),oe({environment:t,transaction:r,blockStore:n,blockSuggestionId:m.id,removeDiscussionId:{discussionId:m.discussionId}})}if("suggest"===u){var g,f;const e=null===(g=(0,A().jS)({blockStore:n,currentUser:t.currentUser,type:p().Ifu.SuggestionInsertText}))||void 0===g?void 0:g.discussionStore;if(null!==(f=i.getNavigableBlockStore())&&void 0!==f&&f.isCommentOnly()){const e=r.getSuggestionDiscussionStore()??ie(t,r,n,{annotations:o().r.fromArray(p().mIW(n.getTitleValue())),annotationTypes:[p().Ifu.SuggestionInsertText],currentUser:t.currentUser});ne(r,i,{type:"insert",id:a().JW(),discussionId:e.id}),X({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsAfter:[i.id],addModifiedBlockIdsAfterAnchor:n.id})}if(!e){const e=r.getSuggestionDiscussionStore()??Y({transaction:r,blockStore:n,modifiedBlockIds:[n.id],environment:t}).discussionStore;ne(r,n,{id:a().JW(),type:"add_line_break",discussionId:e.id});X({environment:t,transaction:r,discussionStore:e,addModifiedBlockIdsAfter:d?[n.id,i.id]:[n.id],addModifiedBlockIdsAfterAnchor:n.id})}if(0===i.getTitleValue().length||e){const o=r.getSuggestionDiscussionStore()??e??Y({transaction:r,blockStore:i,modifiedBlockIds:[i.id],environment:t}).discussionStore;ne(r,i,{id:a().JW(),type:"insert",discussionId:o.id}),X({environment:t,transaction:r,discussionStore:o,addModifiedBlockIdsAfter:[i.id],addModifiedBlockIdsAfterAnchor:n.id})}}}function le(e){const{environment:t,transaction:n,currentPageStore:o,blockStore:i}=e,r=f().sb([...i.getAllBlockSuggestions().map((e=>e.discussionId)),...i.getInlineSuggestionDiscussionIds()]);for(const a of r){const e=L().cc.createChildStore(i,{table:l().$Y,id:a,spaceId:i.getSpaceId()});if(!e.isDefined())continue;const r=e.getCommentStores()[0];r&&H({environment:t,transaction:n,action:"reject",discussionStore:e,commentStore:r,discussionLocation:"ai_reject_all_suggestions",currentPageStore:o})}}},414360:(e,t,n)=>{n.d(t,{T:()=>s});var o=()=>n(869558),i=()=>n(896628),r=()=>n(722101),a=()=>n(630116);function s(e){const{collectionViewBlockStore:t,collectionViewStore:n,transaction:s}=e,l=a().pS.createChildStore(t,{table:o().Gy,id:n.id,spaceId:t.getSpaceId()}),c=n.getFormat().app_config_uri;if(c){var d;const e=null===(d=t.getFormat())||void 0===d?void 0:d.app_uri_map;e&&delete e[c],i().zA({stores:[t],update:{app_uri_map:e},transaction:s})}r().TF({parentStore:t.getCollectionViewsStore(),childToRemoveStore:l,transaction:s})}},415559:(e,t,n)=>{n.d(t,{Dx:()=>_,QZ:()=>y,W3:()=>w,oA:()=>k,pQ:()=>S,ub:()=>b});var o=()=>n(386164),i=()=>n(861017),r=()=>n(161479),a=()=>n(939768),s=()=>n(559926),l=()=>n(901389),c=()=>n(705540),d=()=>n(780054),u=()=>n(725951),p=()=>n(931432),m=()=>n(589994),g=()=>n(449506),f=()=>n(496414),v=()=>n(957416);const h=(0,n(959013).YK)({authenticatingWithGoogle:{id:"googleDriveActions.authenticatingWithGoogle.loadingMessage",defaultMessage:"Authenticating with Google…"},googleLoginTitle:{defaultMessage:"Google login",id:"googleDriveActions.loginWithGoogleModal.title"}});async function _(e){const{environment:t,store:n,fileId:i,token:a}=e;await m().transactionQueue.awaitRecordTransaction(n.pointer);const c=await g().callApi({eventName:"initializeGoogleDriveBlock",environment:t,data:{block:{id:n.id,spaceId:(0,r().e)(n.pointer.spaceId)},fileId:i,token:a},headers:(0,o().WS)({spaceId:(0,r().e)(n.pointer.spaceId)})});if("failed"!==c.type)return c.data.file&&s().sn(t,{file_type:c.data.file.mimeType??void 0}),c.data;l().Qg(c)}function b(e,t){g().callApi({eventName:"refreshGoogleDriveBlock",environment:e,data:{block:t}})}async function y(e){const t=await g().callApi({eventName:"getGoogleDriveAccounts",environment:e,data:{}});return"success"===t.type&&t.data.accounts?t.data:{accounts:[]}}function S(e,t){const{onSuccess:n,onFailure:o}=t;p().A.setState({open:!0,onConfirm:async()=>{const t=await w(e);t&&t.token?n(t.token):o&&o()},onDecline:o})}async function w(e){const t=(0,u().LX)(e);let n=(0,i()._)(d().A.domainBaseUrl,{authType:t});if(n=t.redirectToAuth?n:await(0,u().YN)(e,n),e.device.isElectron)return void c().openExternalUrl(n);const o=await v().P(e,{width:610,height:700,url:n,titleMessage:h.googleLoginTitle});if(!o)return;const r=a().qg(o);return await k(e,r.query.code)}async function k(e,t){if(!t)return;f().m({message:h.authenticatingWithGoogle});const n=await g().callApi({eventName:"authWithGoogleForDrive",environment:e,data:{code:t}});if(f().V(),"failed"!==n.type)return s().mu(e,{integration_name:"google"}),n.data;{const e=n.error;console.error(e),l().Qg(n)}}},415566:(e,t,n)=>{n.d(t,{q:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M5.93 7.125a.5.5 0 0 0-.5.5v4.75a.5.5 0 0 0 .5.5h8.145a.5.5 0 0 0 .5-.5v-4.75a.5.5 0 0 0-.5-.5z"}),(0,o.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},r=(0,n(340498).wt)("peekCenter",i)},415651:(e,t,n)=>{n.d(t,{GB:()=>N,MS:()=>O,Pt:()=>R,b:()=>D,eW:()=>E,up:()=>U,v7:()=>L});n(944114),n(898992),n(672577),n(803949),n(581454),n(908872);var o=()=>n(700500),i=()=>n(634201),r=()=>n(416504),a=()=>n(206267),s=()=>n(161479),l=()=>n(100622),c=()=>n(496603),d=()=>n(498212),u=()=>n(534177),p=()=>n(466614),m=()=>n(799832),g=()=>n(413962),f=()=>n(989423),v=()=>n(38337),h=()=>n(108944),_=()=>n(53664),b=()=>n(585533),y=()=>n(182106),S=()=>n(695625),w=()=>n(861841),k=()=>n(77246),I=()=>n(871399),x=()=>n(502438),A=()=>n(134060),C=()=>n(901389),T=()=>n(797265),M=()=>n(778417),P=()=>n(482287),B=()=>n(725614);function R(e,t){w().Ay.state.isDragging&&(w().Ay.reset(),M().A({environment:e,phase:x().SelectionPhase.Selected,preventClearEditingText:t}))}function E(e){if(w().Ay.state.isDragging){const{draggedStores:i,currentDropZone:r}=w().Ay.state,a=e.optionKey;let s;if(r){var t,n;const e=r.type===w().OX.Selectable?S().T.findSelectablesFromStore(r.store):b().A.findDropTargetsFromKey(r.key);null===(t=e.find((e=>Boolean(e.props.onSelectableDrop))))||void 0===t||null===(t=t.props)||void 0===t||null===(n=t.onSelectableDrop)||void 0===n||n.call(t,{droppedDirection:r.direction,droppedStores:i,duplicate:a}),s=function(e,t){const n=t.props,o="store"in n?n.store:void 0,i=o?y().A.findOutlinerItemFromStore(o):void 0,r=o&&h().Uo(o),a=r&&(0,f()._d)(r),s={...i&&{...a,type:i.type},..."analyticsName"in n&&{dropzone_from:n.analyticsName}};if(!e)return{...s,has_dropzone:!1};let l;switch(e.direction){case w().bH.Above:l="above";break;case w().bH.Below:l="below";break;case w().bH.Left:l="left";break;case w().bH.Onto:l="onto";break;case w().bH.Right:l="right";break;default:(0,u().HB)(e.direction)}if(e.type===w().OX.Selectable)return{...s,has_dropzone:!0,dropzone_type:"selectable",dropzone_block_id:(0,d().Xw)(e.store.id),dropzone_direction:l};return{...s,has_dropzone:!0,dropzone_type:"drop_target",dropzone_key:e.key,dropzone_direction:l}}(r,e[0])}const l=i.find((e=>{const t=e.getType();return Boolean(t&&(0,o().$I)(t))})),p=l&&h().Uo(l),g=l&&(0,m().U)(l);(0,A().t)(e.environment,{draggedTypes:c().oE(i.map((e=>e.getType()))),from:e.analyticsFrom,asCopy:a,draggableProps:{draggable_from:e.analyticsFrom,...p&&(0,f()._d)(p)},dropzoneProps:s,optionalAnalyticsProperties:{collectionContextStore:g}}),R(e.environment),e.environment.device.isPhone&&M().IU({environment:e.environment})}}function D(e){const{environment:t,files:n,analyticsFrom:o}=e;if(w().Ay.state.isDragging){var i;const e=w().Ay.state.currentDropZone;let s;var r,a;if(e)s=e.type===w().OX.Selectable?S().T.findSelectableFromStore(e.store):b().A.findDropTargetFromKey(e.key),null===(r=s)||void 0===r||null===(r=r.props)||void 0===r||null===(a=r.onNativeDrop)||void 0===a||a.call(r,{files:n,droppedDirection:e.direction});(0,A().t)(t,{draggedTypes:[],from:o,asCopy:!1}),R(t,null===(i=s)||void 0===i?void 0:i.props.keepTextSelectionOnDrop)}}function N(e,t){w().Ay.state.isDragging&&(B().clear({environment:e}),w().Ay.setState({...w().Ay.state,...t}))}function L(e,t){if(w().Ay.state.isDragging)return!1;{const{startX:n,startY:o,isNativeDrag:i}=t,r=M().Ko(t.stores);B().clear({environment:e});const a=S().T.getRectFromStore(r[0]);return w().Ay.setState({isDragging:!0,startX:n,startY:o,currentX:n,currentY:o,offsetX:n-(a&&a.left||0),offsetY:o-(a&&a.top||0),currentHintDropZones:[],draggedStores:r,isNativeDrag:i,ghostElements:r.map((e=>t.getGhostElement?t.getGhostElement(e):function(e){const{store:t}=e,n=S().T.findSelectablesFromStore(t);return c().oE(n.map((e=>{if(e.props.canSelect){const t=e.getNode();if(t)return U(t)}})))}({store:e})))}),M().A({environment:e,phase:x().SelectionPhase.Selected}),I().default.reset(),!0}}function O(e){const{droppedStores:t,transaction:n,environment:i,duplicate:l,duplicateActions:c}=e,d=e.resolveTemplateVariables,u=t.map((e=>{if(!S().T.findSelectableFromStore(e))return e;if(l&&c){const r=!e.isTransclusionType(),{blockStores:a,onComplete:l}=c.duplicateBlock({environment:i,stores:[e],transaction:n,targetSpaceId:(0,s().e)(e.pointer.spaceId),preferDuplicateLocation:"local",options:{addCopyName:(0,_().A)(e),resolveTemplateVariables:e.getType()!==o().xd.factory&&d,deepCopyTransclusionContainers:r}}),u=a[0];return l.then((e=>{if("error"===e.status){const n=e.error;p().Rk(n)?1===t.length?p().yj({product:n.clientData.metadata.product}):p().UK(i,{product:n.clientData.metadata.product}):C().f1(e.errorMessage)}})),u}return d&&P().hz({environment:i,store:e,context:{currentUserId:i.currentUser.id,currentTimeZone:(0,r().P)()},transaction:n}),T().TF({store:e,transaction:n}),e}));if(u.length>0&&"suggest"===k().Uv.getMode(u[0])){const e=g().RR(i,n,u[0]);u.forEach((t=>{g().tM(n,t,{type:"insert",discussionId:e.id,id:a().JW()})})),g().c3({environment:i,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:u.map((e=>e.id))})}return u}function U(e){const t=e.style.transform,n=e.style.transition;e.style.transform="",e.style.transition="";const o=e.getBoundingClientRect();e.style.transform=t,e.style.transition=n;const i=e.cloneNode(!0);!function(e,t){const{firstElementChild:n}=e;if(n&&n.hasAttribute("embed-ghost")){const n=F(e,[]);if(n){const i=V(e,n),r=V(t,n);if(i&&r)if(i.shadowRoot){const e=i.shadowRoot;let t=null;if(r.createShadowRoot)t=r.createShadowRoot();else if(r.attachShadow)try{t=r.attachShadow({mode:"open"})}catch(o){}t&&(t.innerHTML=e.innerHTML)}else if(!i.src&&i.contentDocument){const e=document.createElement("iframe");e.width=i.offsetWidth,e.height=i.offsetHeight,j(e,r),r.parentElement.replaceChild(e,r),e.onload=t=>{const n=e.contentDocument.children[0],o=i.contentDocument.children[0];j(n,o),n.innerHTML=o.innerHTML}}else r.width=i.offsetWidth,r.height=i.offsetHeight,r.style.backgroundColor=l().Ay.blackWithAlpha(.12),r.style.backgroundImage=null,r.src=""}}}(e,i);const r=getComputedStyle(e);for(let l=0;l<r.length;l++){const e=r[l],t=r.getPropertyValue(e);"app-region"===e&&"none"===t||"-webkit-text-fill-color"!==e&&(i.style[e]=t)}"absolute"!==r.position&&"relative"!==r.position||(i.style.position="",i.style.top="",i.style.left="",i.style.bottom="",i.style.right="");const a=i.querySelectorAll(`.${v().nKq}`);for(const l of a)l.remove();i.style.pointerEvents="none";const s=i.querySelectorAll("*");for(const l of s)l.style&&(l.style.pointerEvents="none");return{cloned:i,rect:o}}function F(e,t){if(e.shadowRoot)return t;if(e instanceof HTMLIFrameElement)return t;{const{firstElementChild:n,nextElementSibling:o}=e;if(n){t.push(0);const e=F(n,t);if(e)return e;t.pop()}if(o){t[t.length-1]+=1;const e=F(o,t);if(e)return e}return null}}function V(e,t){return t.reduce(((e,t)=>e&&e.children&&e.children[t]?e.children[t]:null),e)}function j(e,t){i().PE(t.attributes).forEach((t=>{let{name:n,value:o}=t;e.setAttribute(n,o)}))}},416726:(e,t,n)=>{n.d(t,{Kg:()=>K,gy:()=>U,Fw:()=>E,Ls:()=>D,uk:()=>F,fi:()=>z,Mf:()=>W,cz:()=>G,uo:()=>j,R2:()=>N,qs:()=>P,eW:()=>q,AY:()=>M,G9:()=>R});n(18107),n(967357),n(898992),n(581454),n(737550),n(296540);var o=()=>n(484714),i=()=>n(847249),r=n(474848);const a=(0,n(340498).wt)("stopThinOutlineIcon",{viewBox:"0 0 16 16",svg:(0,r.jsx)("g",{children:(0,r.jsx)("path",{d:"M7.998 14.97c-3.808 0-6.973-3.165-6.973-6.972 0-3.815 3.159-6.973 6.966-6.973 3.815 0 6.98 3.158 6.98 6.973 0 3.807-3.159 6.972-6.973 6.972m0-1.162a5.79 5.79 0 0 0 5.81-5.81c0-3.227-2.59-5.81-5.817-5.81a5.777 5.777 0 0 0-5.797 5.81 5.783 5.783 0 0 0 5.804 5.81m-1.811-3.322c-.424 0-.684-.253-.684-.67V6.179c0-.424.26-.67.684-.67h3.609c.43 0 .684.246.684.67v3.637c0 .417-.253.67-.684.67h-3.61Z"})})});var s=()=>n(959013),l=()=>n(100622),c=()=>n(534177),d=()=>n(675925),u=()=>n(751156),p=()=>n(575143),m=()=>n(452558),g=()=>n(760217),f=()=>n(331542),v=()=>n(928600),h=()=>n(480095),_=()=>n(574036),b=()=>n(859428),y=()=>n(662971),S=()=>n(780054),w=()=>n(878377),k=()=>n(478184),I=()=>n(972435),x=()=>n(722872),A=()=>n(553965),C=()=>n(700251),T=()=>n(962730);const M=(0,s().YK)({deleteName:{id:"action.delete.name",defaultMessage:"Delete"},moveToTrashName:{id:"action.moveToTrash.name",defaultMessage:"Move to Trash"},undoName:{id:"action.undo.name",defaultMessage:"Undo"},redoName:{id:"action.redo.name",defaultMessage:"Redo"},duplicateName:{id:"action.duplicate.name",defaultMessage:"Duplicate"},duplicateToPrivateName:{id:"action.duplicateToPrivate.name",defaultMessage:"Duplicate to Private"},turnIntoName:{id:"action.turnInto.name",defaultMessage:"Turn into"},copyLinkName:{id:"action.copyLink.name",defaultMessage:"Copy link to block"},copyLinkNavigableTypeName:{id:"action.copyLinkNavigableType.name",defaultMessage:"Copy link"},showCodePreviewFormat:{id:"action.showCodePreviewFormat.name",defaultMessage:"Preview"},showOnlyCodeFormat:{id:"action.showOnlyCodeFormat.name",defaultMessage:"Code"},showSplitViewFormat:{id:"action.showSplitViewFormat.name",defaultMessage:"Split"},searchPlaceholder:{defaultMessage:"Search for a language…",id:"codeBlock.searchPrompt"},foregroundColorDefaultKeywords:{id:"action.foregroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White"},backgroundColorDefaultKeywords:{id:"action.backgroundColor.default.fuzzySearchKeyword",defaultMessage:"Default Black White defaultbackground Defaultbackground"},foregroundColorGrayKeywords:{id:"action.foregroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray"},backgroundColorGrayKeywords:{id:"action.backgroundColor.gray.fuzzySearchKeyword",defaultMessage:"Grey Gray background Greybackground Graybackground"},foregroundColorBrownKeywords:{id:"action.foregroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown"},backgroundColorBrownKeywords:{id:"action.backgroundColor.brown.fuzzySearchKeyword",defaultMessage:"Brown background Brownbackground"},foregroundColorOrangeKeywords:{id:"action.foregroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange"},backgroundColorOrangeKeywords:{id:"action.backgroundColor.orange.fuzzySearchKeyword",defaultMessage:"Orange background Orangebackground"},foregroundColorYellowKeywords:{id:"action.foregroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow"},backgroundColorYellowKeywords:{id:"action.backgroundColor.yellow.fuzzySearchKeyword",defaultMessage:"Yellow background Yellowbackground"},foregroundColorTealKeywords:{id:"action.foregroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green"},backgroundColorTealKeywords:{id:"action.backgroundColor.teal.fuzzySearchKeyword",defaultMessage:"Teal green background Tealbackground Greenbackground"},foregroundColorBlueKeywords:{id:"action.foregroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue"},backgroundColorBlueKeywords:{id:"action.backgroundColor.blue.fuzzySearchKeyword",defaultMessage:"Blue background Bluebackground"},foregroundColorPurpleKeywords:{id:"action.foregroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple"},backgroundColorPurpleKeywords:{id:"action.backgroundColor.purple.fuzzySearchKeyword",defaultMessage:"Purple background Purplebackground"},foregroundColorPinkKeywords:{id:"action.foregroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink"},backgroundColorPinkKeywords:{id:"action.backgroundColor.pink.fuzzySearchKeyword",defaultMessage:"Pink background Pinkbackground"},foregroundColorRedKeywords:{id:"action.foregroundColor.red.fuzzySearchKeyword",defaultMessage:"Red"},backgroundColorRedKeywords:{id:"action.backgroundColor.red.fuzzySearchKeyword",defaultMessage:"Red background Redbackground"},backgroundSectionKeywords:{id:"action.section.background.fuzzySearchKeywords",defaultMessage:"Color Background"},backgroundSection:{id:"action.section.background",defaultMessage:"Background color"},colorSection:{id:"action.section.color",defaultMessage:"Text color"},colorName:{id:"action.color.name",defaultMessage:"Color"},duplicateCollectionSchemaOnlyName:{id:"action.duplicateSchemaOnly.name",defaultMessage:"Duplicate without content"},duplicateCollectionWithDataName:{id:"action.duplicateWithData.name",defaultMessage:"Duplicate with content"},convertToLinkMentionName:{id:"action.convertToLinkMention.name",defaultMessage:"Turn into mention"},unavailableOfflineTooltip:{id:"action.tooltip.unavailableOffline",defaultMessage:"Unavailable while offline"},cannotDeleteBlockTooltip:{id:"action.tooltip.cannotDeleteBlock",defaultMessage:"Please delist from Marketplace in order to delete"},aiUnavailableOfflineTooltip:{id:"action.aiUnavailableOfflineTooltip",defaultMessage:"AI is unavailable offline"}});function P(e){let{title:t}=e;return t}const B={maxWidth:400,whiteSpace:"pre-wrap"};function R(e,t){return(n,o)=>{var i;const r={action:e,block_type:null===(i=n.blocks.at(0))||void 0===i?void 0:i.getType(),from:n.analyticsFrom};return(0,d().o)(n.environment,r,(e=>t(e,n,o)))}}function E(e){const{key:t,displayName:n,displayNameInterpolatedValues:o,contextualDisplayName:i,analyticsName:r,analyticsActionType:a,fuzzySearchKeywords:s,svg:l,svgCustomFill:c,validators:d,shortcuts:u,sortScoreMultiplier:p,closeParentMenu:m,subActions:g,collapseSubActionsIntoParent:f,nativeImageReference:v,alwaysShowInSearch:h,right:_,renderTooltip:b,disableTooltip:y,userProvidedSearchName:S,hideFromSlashActionMenu:w,badge:k,clientSkill:I,disabled:x}=e,{formattedDisplayName:A,searchName:C}=L({displayName:n,displayNameInterpolatedValues:o,userProvidedSearchName:S,fuzzySearchKeywords:s}),T=e.render??O({svg:l,svgCustomFill:c,formattedDisplayName:A,right:_,contextualDisplayName:i,shortcut:u[0],renderTooltip:b,disableTooltip:y,badge:k,disabled:x});return{key:`action ${t}`,displayName:A,analyticsName:r,analyticsActionType:a,searchName:C,validators:d,shortcuts:u,sortScoreMultiplier:p,action:e.track?R(e.track.actionName,e.action):e.action,subActions:g,collapseSubActionsIntoParent:f,closeParentMenu:m,render:T,nativeImageReference:v,alwaysShowInSearch:h,hideFromSlashActionMenu:w,svg:l,svgCustomFill:c,clientSkill:I}}function D(e){const{key:t,displayName:n,displayNameInterpolatedValues:o,contextualDisplayName:i,analyticsName:r,analyticsActionType:a,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:l,svg:c,svgCustomFill:d,validators:u,sortScoreMultiplier:p,closeParentMenu:m,subActions:g,collapseSubActionsIntoParent:f,hideSubActions:v,nativeImageReference:h,alwaysShowInSearch:_,right:b,renderTooltip:y,disableTooltip:S,userProvidedSearchName:w,clientSkill:k,tooltipPlacement:I,badge:x,isRed:A,disabled:C}=e,{formattedDisplayName:T,searchName:M}=L({displayName:n,displayNameInterpolatedValues:o,userProvidedSearchName:w,fuzzySearchKeywords:s,fuzzySearchKeywordsArray:v?l:void 0}),P=e.render??O({svg:c,svgCustomFill:d,formattedDisplayName:T,right:b,contextualDisplayName:i,renderTooltip:y,disableTooltip:S,tooltipPlacement:I,badge:x,isRed:A,disabled:C});return{key:(B=t,`action ${B}`),displayName:T,analyticsName:r,analyticsActionType:a,searchName:M,validators:u,sortScoreMultiplier:p,action:e.track?R(e.track.actionName,e.action):e.action,subActions:g,collapseSubActionsIntoParent:f,hideSubActions:v,closeParentMenu:m,render:P,nativeImageReference:h,alwaysShowInSearch:_,svg:c,svgCustomFill:d,clientSkill:k};var B}function N(e){if("string"==typeof e)return e.split(" ").at(-1)}function L(e){const{displayName:t,displayNameInterpolatedValues:n,fuzzySearchKeywords:o,fuzzySearchKeywordsArray:i,userProvidedSearchName:r}=e,a=t?I().A.formatMessage(t,n):void 0,s=o||t,l=o?I().A.formatMessage(o):a,c=null==i?void 0:i.map((e=>I().A.formatMessage(e))).join(" ");let d=r;return d||(d=s?l===s.defaultMessage?c?`${c} ${l}`:l:`${l} ${s.defaultMessage}`:void 0),{formattedDisplayName:a,searchName:d}}function O(e){const{formattedDisplayName:t,svg:n,svgCustomFill:o,shortcut:i,right:a,renderTooltip:s,disableTooltip:l,badge:c,isRed:d,tooltipPlacement:u=T().W.Right,disabled:m}=e;return function(g,f,v){var h;const _=(null===(h=e.contextualDisplayName)||void 0===h?void 0:h.call(e,f))||t;return(0,r.jsx)(b().A,{render:e=>{var t;return(0,r.jsx)(p().A,{...(0,A().A)(g,e),...v.styles,title:_,svg:n,svgCustomFill:o??(null===(t=v.styles)||void 0===t?void 0:t.svgCustomFill),shortcut:i,badge:c,isRed:d,right:"function"==typeof a?a(g,f,v):a,disabled:null==m?void 0:m(),disabledFeedback:null==m?void 0:m()})},renderTooltip:()=>(0,r.jsx)("div",{style:B,children:null==s?void 0:s({title:_})}),disableTooltip:!s||(null==l?void 0:l()),placement:u})}}function U(e){const{key:t,title:n,overrideSearchTitle:o,render:i,actions:r}=e,a=n?I().A.formatMessage(n):void 0,s=o||n,l=s&&I().A.formatMessage(s);return{key:t,title:a,searchTitle:s?l===s.defaultMessage?l:`${l} ${s.defaultMessage}`:void 0,render:i,actions:r}}function F(e){const{key:t,displayName:n,displayNameInterpolatedValues:o,analyticsName:i,validators:a,subActions:s,collapseSubActionsIntoParent:l,hideSubActions:c,svg:d,icon:u,right:m,rightStyle:f,width:v,initialFocus:h,clientSkill:_,fuzzySearchKeywordsArray:b,disabled:S}=e,w=D({clientSkill:_,key:`extension ${t}`,displayName:n,displayNameInterpolatedValues:o,analyticsName:i,validators:a,subActions:s,collapseSubActionsIntoParent:l,hideSubActions:c,fuzzySearchKeywordsArray:b,closeParentMenu:!0,action:()=>{},render:(e,t,o)=>(0,r.jsx)(y().A,{...e,renderOrigin:(e,t)=>d?(0,r.jsx)(p().A,{...e,title:w.displayName,svg:d,right:m,rightStyle:f,ref:t}):(0,r.jsx)(g().A,{...e,title:w.displayName,icon:u,right:m,rightStyle:f,ref:t}),onFocus:o.onFocus,renderExtension:(e,i)=>(0,r.jsx)(V,{context:t,extensionMenuParent:i,actionMenuListParent:o,popupEvents:e,displayName:n,width:v,initialFocus:h,subActions:s})}),disabled:S});return w}function V(e){const{context:t,extensionMenuParent:n,actionMenuListParent:a,popupEvents:l,displayName:c,width:d,initialFocus:u,subActions:p}=e,{isPhone:g}=(0,o().Y0)(),f=(0,x().Tf)();let _;_=g?f?{menuType:x().gu.Modal,onClickLeft:n.close,left:(0,r.jsx)(h().MobileModalBackButton,{}),shouldRenderMobileRefresh:f,paddingTop:10,title:(0,r.jsx)(s().sA,{...c}),...l}:{menuType:x().gu.Modal,right:(0,r.jsx)(h().DoneMenuText,{}),onClickRight:n.close,...l}:{menuType:x().gu.Popup,width:d??220,...l};const b=(0,i().K8)((()=>p(t)),[t,p]);return(0,r.jsx)(v().A,{..._,children:(0,r.jsx)(m().A,{initialFocus:u??0,context:t,sections:b,onAccept:a.onAccept})})}const j=[w().AU6(w().Xjv(n(700500).xd.externalObjectInstancePage)),w().AU6(w().PfK),w().AU6(w().IW),w().p2L,w().AU6((e=>e.blocks.some((e=>e.isDefined()&&(0,n(313892).sZ)(e))))),w().AU6(w().IuJ),w().zrb];function z(e){function t(t){let{environment:n,blocks:o,analyticsFrom:i}=t;return u().createAndCommit({userAction:"actionRegistry.createToggleAction",environment:n,canUndo:!0,perform:t=>{var r;const a=o[0],s=!e.isEnabled(a);e.action(n,a,t,i),null===(r=e.afterAction)||void 0===r||r.call(e,s,n)}})}const n={key:`format ${e.key}`,displayName:e.displayName,analyticsName:e.displayName.defaultMessage,validators:e.validators,render:(t,n)=>{var o,i;let{blocks:a,environment:s}=n;const c=a[0],d=e.isEnabled(c),u=(null===(o=e.isLoading)||void 0===o?void 0:o.call(e,c))||!1,p=(0,l().O4)({theme:s.ThemeModeStore.state}),m=(0,C().xI)({isMobile:s.device.isMobile});return(0,r.jsx)(b().A,{placement:T().W.Right,disableTooltip:!e.renderTooltip||(null===(i=e.disableTooltip)||void 0===i?void 0:i.call(e,c)),renderTooltip:()=>{var t;return(0,r.jsx)("div",{style:B,children:null===(t=e.renderTooltip)||void 0===t?void 0:t.call(e,{title:e.label})})},render:n=>{var o,i;return(0,r.jsx)(_().A,{...(0,A().A)(t,n),title:e.label,icon:H({svg:e.svg,svgWhenEnabled:e.svgWhenEnabled,size:m,isLoading:u,isEnabled:d,theme:p}),badge:e.badge,on:d,disabled:null===(o=e.disabled)||void 0===o?void 0:o.call(e,c),disabledFeedback:null===(i=e.disabled)||void 0===i?void 0:i.call(e,c)})}})},closeParentMenu:!1};return D(e.track?{...n,track:e.track,action:(e,n)=>{const{serverCommitResult:o}=t(n);o.then(e)}}:{...n,action:t})}function H(e){const{svg:t,svgWhenEnabled:n,isLoading:o,isEnabled:i,size:a,theme:s}=e;if(!t)return;const l={display:"flex",alignItems:"center",justifyContent:"center",width:a,height:a};if(o)return(0,r.jsx)("div",{style:l,children:(0,r.jsx)(f().A,{size:"md"})});const c=i&&n?n:t;return(0,r.jsx)("div",{style:l,children:c({fill:s.icon.primary})})}function W(e){switch(e){case"default":return M.foregroundColorDefaultKeywords;case"default_background":return M.backgroundColorDefaultKeywords;case"gray":return M.foregroundColorGrayKeywords;case"gray_background":return M.backgroundColorGrayKeywords;case"brown":return M.foregroundColorBrownKeywords;case"brown_background":return M.backgroundColorBrownKeywords;case"orange":return M.foregroundColorOrangeKeywords;case"orange_background":return M.backgroundColorOrangeKeywords;case"yellow":return M.foregroundColorYellowKeywords;case"yellow_background":return M.backgroundColorYellowKeywords;case"teal":return M.foregroundColorTealKeywords;case"teal_background":return M.backgroundColorTealKeywords;case"blue":return M.foregroundColorBlueKeywords;case"blue_background":return M.backgroundColorBlueKeywords;case"purple":return M.foregroundColorPurpleKeywords;case"purple_background":return M.backgroundColorPurpleKeywords;case"pink":return M.foregroundColorPinkKeywords;case"pink_background":return M.backgroundColorPinkKeywords;case"red":return M.foregroundColorRedKeywords;case"red_background":return M.backgroundColorRedKeywords;default:return(0,c().HB)(e)}}function q(e){const t=e.thumbnail?(0,k().L)(null==e?void 0:e.thumbnail):void 0,n=Boolean(void 0!==t&&/^https?:\/\//.test(t));return{remoteImageUrl:t?`${n?"":S().A.domainBaseUrl}${t}`:void 0,localAssetBundleImagePath:n?void 0:t}}function K(e,t,n){const o=e.device.isAndroid?(0,l().O4)({theme:"light"}):(0,l().O4)({theme:e.ThemeStore.state.mode}),i=(0,l().k5)(t,o);let r,a,s;const c="default_background"!==t;t.includes("background")||null!=n&&n.includes("background")?(r="background",a=c?"square.fill":"square",s="textBackgroundColor"):(r="color",a="character",s="textColor");const d=r in i?i[r]:void 0,u=d&&(0,l().vU)(d);return{sfProGlyphName:a,localImageIdentifier:s,imageTintColor:c?u:void 0}}function G(e,t){return t?(0,r.jsxs)("div",{style:{color:e.text.tertiary,fontSize:14,display:"flex",flexDirection:"row",alignItems:"center",gap:2},children:[a({width:14,height:14}),"Stop"]}):void 0}},418135:(e,t,n)=>{n.d(t,{JT:()=>l,WS:()=>c,rx:()=>s,vN:()=>a,y$:()=>r,yU:()=>i});var o=()=>n(496603);const i=.5,r=4.9,a=.1,s=1;function l(e){switch(o().qE(o().LI(e,1),i,r)){case i:return 155;case.6:return 128;case.7:return 108;case.8:return 94;case.9:return 83;default:return 75}}function c(e){const t=o().qE(o().LI(e,1),i,r);switch(t){case i:return 273;case.6:return 228;case.7:return 195;case.8:return 171;case.9:return 151;case 1:return 136;case 1.1:return 123;case 1.2:return 113;case 1.3:return 105;case 1.4:return 97;case 1.5:return 91;case 1.6:return 85;default:return Math.max(85-Math.floor(10*(t-1.6)*5),0)}}},419101:(e,t,n)=>{n.d(t,{On:()=>r,Vp:()=>a,YL:()=>i});var o=()=>n(620149);function i(){o().A.setState({...o().A.state,connectionError:void 0})}function r(e){const{connectionError:t}=o().A.state,n=Date.now(),i=void 0===e.backoffEstimate?void 0:e.backoffEstimate+n;o().A.setState({...o().A.state,connectionError:{startTime:(null==t?void 0:t.startTime)??n,numAttempts:t?t.numAttempts+1:1,approximateBackoffDelayEndTime:i,retryReason:e.retryReason??(null==t?void 0:t.retryReason)}})}const a={onReset:i,onBackoff(e,t){r({backoffEstimate:e,retryReason:t})}}},419357:(e,t,n)=>{n.d(t,{Ay:()=>_,KF:()=>h,Zf:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(496603),l=()=>n(722872),c=()=>n(623580),d=()=>n(678553),u=()=>n(864943),p=n(474848);const m=14,g=30,f=28;function v(e){const{icon:t}=e;return t({fill:(0,a().DP)().mediumIconColor,width:m,height:m,flexGrow:0,flexShrink:0})}function h(e){const t=(0,i().WS)();return(0,p.jsx)(u().A,{size:"sm",...e,style:{...e.style,height:t?g:f,width:t?g:f}})}const _=o.forwardRef((function(e,t){let{preventCaptureArrowShortcuts:a,preventCaptureDeleteWhenEmpty:c,preventCaptureClipboardShortcuts:u,...m}=e;const{left:g,right:f,inputLeft:v,inputRight:h,inputRightStyle:_,disableInput:b,inputOuterStyle:w,rightMobileEditLabel:k,mobileKeyboardOnDismiss:I,style:x,value:A,onChange:C,autosize:T,autosizeMinHeight:M,autosizeMaxHeight:P,customElementAttributes:B,disabled:R,format:E,id:D,placeholder:N,type:L,autoFocus:O,focus:U,focusInitial:F,focusAfterAnimation:V,forceShowClearButton:j,inputElementAttributes:z,inputStyle:H,isRightLastElementOfInput:W,maxlength:q,min:K,max:G,selectAll:$,showClearButton:Y,suppressFocusRing:Q,textarea:Z,textareaSubmitOnEnter:X,onBlur:J,onCancel:ee,onClearButtonClick:te,onClick:ne,onFocus:oe,onKeyDown:ie,onSubmit:re,...ae}=m,se=(0,r().uB)(void 0,n(995444).A),le=a?void 0:s().D_,ce=!c||A.length>0?s().D_:void 0,de=u?void 0:s().D_;(0,n(852507).l)((()=>{(U||F)&&se.setState({focused:!0})})),(0,o.useEffect)((()=>{void 0!==U&&se.setState({focused:U})}),[U,se]);const ue=(0,i().Y0)().isMobile,pe=(0,l().Tf)(),me=(0,o.useContext)(l().xu),ge=(0,o.useRef)(null),fe=(0,r().K8)((()=>se.state.focused),[se]),ve={value:A,onChange:C,autosize:T,autosizeMinHeight:M,autosizeMaxHeight:P,customElementAttributes:B,disabled:R,format:E,id:D,placeholder:N,type:L,autoFocus:O,focus:U,focusInitial:F,focusAfterAnimation:V,forceShowClearButton:j,inputElementAttributes:z,inputStyle:H,isRightLastElementOfInput:W,maxlength:q,min:K,max:G,selectAll:$,showClearButton:Y,suppressFocusRing:Q,textarea:Z,textareaSubmitOnEnter:X,onBlur:J,onCancel:ee,onClearButtonClick:te,onClick:ne,onFocus:oe,onKeyDown:ie,onSubmit:re};return(0,p.jsx)(n(545805).A,{debugName:"InputMenuItem",capture:!0,onUntab:s().D_,onTab:s().D_,onSelectAll:s().D_,onRedo:s().D_,onUndo:s().D_,onToggleBold:s().D_,onToggleItalics:s().D_,onToggleCode:s().D_,onCut:de,onCopy:de,onPaste:de,onKeypress:s().D_,onLeft:le,onRight:le,onDelete:ce,onBackspace:ce,children:ue?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d().Ay,{ref:t,...ae,...pe?{itemMarginLeft:8}:{},title:(0,p.jsx)(S,{ref:ge,left:g,right:f,inputLeft:v,inputRight:h,inputRightStyle:_,disableInput:b,inputOuterStyle:w,rightMobileEditLabel:k,inputMenuItemStore:se,...ve})}),(0,p.jsx)(n(594739).A,{show:fe&&me.menuType!==l().gu.ActionSheet,onDismiss:I,inputRef:ge})]}):(0,p.jsx)(d().Ay,{ref:t,...ae,left:g,right:f,isTokenTitle:!0,title:(0,p.jsx)(y,{ref:ge,disableInput:b,inputOuterStyle:w,inputRight:h,inputRightStyle:_,inputLeft:v,...ve}),style:{paddingTop:4,paddingBottom:4,...x}})})}));function b(e){let{rightMobileEditLabel:t,inputRef:r}=e;const s=(0,a().DP)(),l=(0,i().v3)(),c=(0,o.useCallback)((e=>{e.preventDefault();const t=r.current;t&&(0,n(375555).G)(l,t)}),[l,r]);return(0,p.jsx)(n(704152).A,{mobileFeedback:!0,onClick:c,style:{color:s.text.secondary},children:t})}const y=o.forwardRef((function(e,t){const{disabled:n,disableInput:o,inputOuterStyle:i,inputRight:r,inputRightStyle:a,inputLeft:s,min:l,textarea:d,...u}=e;return(0,p.jsx)(c().A,{...u,ref:t,disabled:n||o,style:{height:d?void 0:28,padding:"3px 6px",...i},left:s,right:r,rightStyle:a,min:l,textarea:d})})),S=o.forwardRef((function(e,t){const{left:i,right:a,inputLeft:s,inputRight:l,inputRightStyle:d,disableInput:u,inputOuterStyle:m,rightMobileEditLabel:g,inputMenuItemStore:f,disabled:v,showClearButton:h,onBlur:_,onFocus:y,...S}=e,w=(0,o.useCallback)((e=>{f.setState({focused:!1}),_&&_(e)}),[_,f]),k=(0,o.useCallback)((e=>{f.setState({focused:!0}),y&&y(e)}),[y,f]),I=(0,o.useRef)(null),x=(0,n(93583).A)(I,t),A=(0,r().K8)((()=>f.state.focused),[f]),C=g&&!A?(0,p.jsx)(b,{rightMobileEditLabel:g,inputRef:I}):null;return(0,p.jsx)(c().A,{...S,ref:x,format:c().C.Transparent,style:{fontSize:16,...m},onFocus:k,onBlur:w,showClearButton:!1!==h,disabled:v||u,left:s||i,right:C||l||a,rightStyle:d})}))},419942:(e,t,n)=>{n.d(t,{o:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M4.93 6.125a.5.5 0 0 0-.5.5v6.75a.5.5 0 0 0 .5.5h10.145a.5.5 0 0 0 .5-.5v-6.75a.5.5 0 0 0-.5-.5z"}),(0,o.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},r=(0,n(340498).wt)("peekFull",i)},419974:(e,t,n)=>{n.d(t,{Ay:()=>x,mg:()=>y,oq:()=>S});var o=n(296540),i=()=>n(522419),r=()=>n(750559),a=()=>n(340498),s=n(474848);const l=(0,a().wt)("imageError",{viewBox:"0 0 32 32",svg:(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("path",{d:"M6.39515 31.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33305.6662-.69079.6662z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 17.5539V3h26v26H12.6862c.4113-.6095.7364-1.282.9578-2H28v-4H13.7749c-.1687-.7106-.4373-1.3825-.7902-2H28V5H6v12.1798c-.69548.0352-1.36626.164-2 .3741zM11.3329 19c-.6875-.5905-1.48192-1.0601-2.35027-1.3757L13 12l2 1 5-5 6 11H11.3329zM12 9c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm3.395 6.434l-1.76-.881L11.887 17h10.744l-3.107-5.695-4.129 4.129z"})]})}),c=(0,a().wt)("lockedDocument",{viewBox:"0 0 27 33",svg:(0,s.jsx)("path",{d:"M9.281 26.605c0 .878.406 1.318 1.216 1.318h6.02c.811 0 1.216-.44 1.216-1.318V21.99c0-.79-.327-1.216-.981-1.274v-1.348c0-1.084-.298-1.958-.894-2.622-.595-.664-1.377-.996-2.343-.996-.967 0-1.748.332-2.344.996-.596.664-.894 1.538-.894 2.622v1.348c-.664.058-.996.483-.996 1.274v4.615zm2.359-5.919v-1.45c0-.654.17-1.176.512-1.567.342-.4.796-.6 1.363-.6.566 0 1.015.2 1.347.6.342.39.513.913.513 1.567v1.45H11.64zM5.692 32.288h15.601c1.572 0 2.759-.41 3.56-1.23.8-.81 1.2-2.002 1.2-3.575V14.197c0-.683-.038-1.26-.117-1.728a3.829 3.829 0 00-.454-1.304c-.214-.4-.537-.815-.966-1.245L16.84 2.112c-.41-.42-.81-.737-1.201-.952a3.822 3.822 0 00-1.275-.454 8.661 8.661 0 00-1.611-.132h-7.06c-1.573 0-2.76.41-3.56 1.23C1.332 2.616.932 3.808.932 5.38v22.104c0 1.582.4 2.779 1.2 3.59.802.81 1.988 1.215 3.56 1.215zm.235-2.886c-.703 0-1.23-.18-1.582-.542-.352-.361-.528-.879-.528-1.552V5.569c0-.673.176-1.196.528-1.567.351-.371.884-.557 1.596-.557h6.24v8.028c0 1.045.255 1.826.762 2.343.518.518 1.3.777 2.344.777h7.896v12.715c0 .673-.176 1.191-.528 1.552-.351.362-.884.542-1.596.542H5.927zm9.638-17.343c-.302 0-.522-.069-.659-.205-.127-.137-.19-.357-.19-.66V3.841l8.071 8.218h-7.222z"})}),d=(0,a().wt)("playbackError",{viewBox:"0 0 32 32",svg:(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)("path",{d:"M6.39515 29.0485c3.44161 0 6.29115-2.8495 6.29115-6.2911 0-3.4355-2.8557-6.2912-6.29732-6.2912-3.43544 0-6.28495 2.8557-6.28495 6.2912 0 3.4416 2.85568 6.2911 6.29112 6.2911zm-.00617-5.366c-.32689 0-.50575-.1912-.51809-.5181l-.08635-3.0468c-.01233-.3393.24671-.5798.59828-.5798.34539 0 .61677.2467.60444.5859l-.09252 3.0407c-.01233.3331-.1912.5181-.50576.5181zm0 2.2698c-.35773 0-.69078-.2838-.69078-.6662s.32689-.6661.69078-.6661c.3639 0 .69079.2776.69079.6661 0 .3886-.33306.6662-.69079.6662z"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29.1373 16.1987c0 6.7017-5.542 12.2437-12.2436 12.2437-1.622 0-3.1761-.3246-4.6001-.9118.3323-.4107.6226-.8567.8644-1.3316 1.1612.4325 2.4197.6687 3.7357.6687 5.9082 0 10.6689-4.7608 10.6689-10.669-.0122-5.9082-4.7729-10.65671-10.6812-10.65671-5.5497 0-10.08288 4.20726-10.5961 9.62871-.55173.0075-1.08925.0738-1.60656.193.4362-6.32082 5.78156-11.40862 12.20266-11.40862 6.7139 0 12.2559 5.54199 12.2559 12.24362zm-15.4585 4.4372a7.628 7.628 0 00-.0797-.2566.65573.65573 0 01-.0013-.0424v-8.2764c0-.5004.5859-.7202 1.0498-.4516l6.7016 4.0161c.4395.2686.4517.8911 0 1.1597l-6.7016 3.9917c-.3763.2257-.796.1398-.9688-.1405z"})]})});var u=()=>n(668435),p=()=>n(959013),m=()=>n(534177),g=()=>n(939768),f=()=>n(780054),v=()=>n(974233),h=()=>n(836251),_=()=>n(125565);function b(e,t){if("offline"===t)return u().h;switch(e){case"image":return l;case"pdf":return"document_locked"===t?c:r().f;case"audio":case"video":return d;default:return r().f}}function y(e,t){if(e&&e instanceof v().C){let n=t||e.data.url;return g().cW(n)&&(n=g().pf({relativeUrl:n,baseUrl:f().A.domainBaseUrl})),e.data.offline?g().cW(e.data.url)||e.data.url.startsWith(f().A.domainBaseUrl)?{type:"offline"}:{type:"unknown",source:n}:{type:"http",source:n,statusCode:e.data.status}}}function S(e,t){const n=e.error,o=t||e.src;if(n)return n.code===n.MEDIA_ERR_DECODE||n.code===n.MEDIA_ERR_SRC_NOT_SUPPORTED?{type:"unsupported_content_type",extension:o&&(0,i().QC)(o)}:n.code===n.MEDIA_ERR_NETWORK?{type:"offline"}:void 0}function w(){return(0,s.jsx)(p().sA,{id:"embedError.extension.unknown",defaultMessage:"unknown"})}function k(e){const{source:t,statusCode:n}=e,o=g().qg(t).hostname;return(0,s.jsx)(p().sA,{defaultMessage:"{hostname} (Error {statusCode})",id:"embedError.hostnameAndStatusCode",values:{hostname:o,statusCode:n}})}function I(e){switch(e){case"audio":return(0,h().xS)("guides.audioFaqs");case"video":return(0,h().xS)("guides.videosFaqs");case"image":return(0,h().xS)("guides.imagesFaqs");default:return(0,h().xS)("guides.embedsFaqs")}}const x=function(e){let{style:t,error:i,family:r,isSmall:a,onClickLink:l}=e;const c=(0,n(401497).DP)(),d=(0,n(484714).v3)(),u={background:c.embedPlaceholderBackground,cursor:"default",...t||{},position:"absolute",top:0,bottom:0,left:0,right:0,display:"flex",alignContent:"center",alignItems:"center",justifyContent:a?"flex-start":"center",padding:a?"7px 14px":"0.5em 1em",textAlign:"center",flexDirection:a?"row":"column",overflow:"hidden"},f=a||"offline"===i.type?25:48,v=a?"0 14px 0 0":"offline"===i.type?"0 0 8px 0":"0 0 14px 0",h=function(e,t){return"image"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This image format ({extension}) can’t be played on this device.",id:"embedError.image.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this image",id:"embedError.image.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be loaded.",id:"embedError.image.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be found.",id:"embedError.image.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.image.permissionDenied",defaultMessage:"Permission denied."}):413===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.image.imageTooBig",defaultMessage:"Image too big to display."}):(0,s.jsx)(p().sA,{defaultMessage:"This image couldn’t be loaded.",id:"embedError.image.serverError"}):"audio"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This audio format ({extension}) can’t be played on this device.",id:"embedError.audio.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this audio",id:"embedError.audio.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be loaded.",id:"embedError.audio.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be found.",id:"embedError.audio.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.audio.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This audio couldn’t be loaded.",id:"embedError.audio.serverError"}):"video"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This video format ({extension}) can’t be played on this device.",id:"embedError.video.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this video",id:"embedError.video.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be loaded.",id:"embedError.video.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be found.",id:"embedError.video.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.video.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This video couldn’t be loaded.",id:"embedError.video.serverError"}):"file"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This file format ({extension}) can’t be played on this device.",id:"embedError.file.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this file",id:"embedError.file.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be loaded.",id:"embedError.file.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be found.",id:"embedError.file.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.file.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This file couldn’t be loaded.",id:"embedError.file.serverError"}):"embed"===t?"unsupported_content_type"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This embed format ({extension}) can’t be played on this device.",id:"embedError.embed.unsupportedContentType",values:{extension:e.extension||w()}}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this embed",id:"embedError.embed.offline"}):"unknown"===e.type||"invalid_protocol"===e.type||"invalid_url"===e.type||"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.unknown"}):404===e.statusCode?(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be found.",id:"embedError.embed.notFound"}):401===e.statusCode||403===e.statusCode?(0,s.jsx)(p().sA,{id:"embedError.embed.permissionDenied",defaultMessage:"Permission denied."}):(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.serverError"}):"pdf"===t?"document_locked"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"This PDF is locked",id:"embedError.pdf.locked"}):"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this PDF",id:"embedError.pdf.offline"}):(0,s.jsx)(p().sA,{defaultMessage:"This embed couldn’t be loaded.",id:"embedError.embed.unknown"}):"tweet"===t?"offline"===e.type?(0,s.jsx)(p().sA,{defaultMessage:"Go online to view this Tweet",id:"embedError.tweet.offline"}):(0,s.jsx)(p().sA,{defaultMessage:"This Tweet couldn’t be loaded.",id:"embedError.tweet.unknown"}):void(0,m().HB)(t)}(i,r);return(0,o.useEffect)((()=>{n(437219).Ax(d,{embedType:r,embedErrorType:i.type})}),[d,i.type,r]),(0,s.jsxs)("div",{style:u,children:[b(r,i.type)({fill:c.text.tertiary,width:f,height:f,margin:v}),(0,s.jsxs)(_().A,{isSecondaryColor:!0,isMultiline:!a,style:{margin:v},children:[(0,s.jsx)("div",{style:{display:a?"inline-block":"block",marginRight:a?"14px":void 0},children:h}),"offline"!==i.type&&(0,s.jsx)(n(187485).A,{style:{display:"inline",pointerEvents:"auto",cursor:"auto",borderBottom:`1px solid ${c.text.tertiary}`},href:"document_locked"===i.type?void 0:I(r),external:!0,onClick:()=>{n(148024).FH(d,{from:"embed_error"}),null==l||l()},children:"document_locked"===i.type?(0,s.jsx)(p().sA,{defaultMessage:"Unlock Document",id:"embedError.unlock"}):(0,s.jsx)(p().sA,{defaultMessage:"Learn more",id:"embedError.learnMore"})})]}),!a&&"http"===i.type&&(0,s.jsx)(_().A,{isSmall:!0,isSecondaryColor:!0,children:k(i)}),!a&&"unknown"===i.type&&i.source&&(0,s.jsx)(_().A,{isSmall:!0,isSecondaryColor:!0,children:g().qg(i.source).hostname})]})}},421107:(e,t,n)=>{n.d(t,{A:()=>a,g:()=>i});var o=()=>n(496603);function i(e,t){return e.collectionViewBlockStore===t.collectionViewBlockStore&&o().n4(e.groupFormat,t.groupFormat)}class r extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return o().o8(this.state)}}const a=new r},421559:(e,t,n)=>{n.d(t,{T:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zm11.875 7h-5.75v-2.25h5.75zm-5.75 1.25h5.75v1.375a.875.875 0 0 1-.875.875h-4.875zm-1.25-1.25h-5.75v-2.25h5.75zm-5.75 1.25h5.75v2.25H4.5a.875.875 0 0 1-.875-.875zm0-4.75V6.25c0-.483.392-.875.875-.875h4.875v2.25zm7 0v-2.25H15.5c.483 0 .875.392.875.875v1.375z"})},i=(0,n(340498).wt)("viewTable",o)},423804:(e,t,n)=>{n.d(t,{Ih:()=>p,Vv:()=>m,_1:()=>f,jS:()=>g,o9:()=>u,x5:()=>d});n(898992),n(672577);var o=()=>n(319954),i=()=>n(179034),r=()=>n(197959),a=()=>n(161479),s=()=>n(798880),l=()=>n(919709),c=()=>n(630116);function d(e,t,n,o){for(const i of t.findByGroupingKey(o)){if(!l().I1e(i))continue;const t=l().vu(i),o=c().sk.createChildStore(e,{table:r().$Y,id:t,spaceId:(0,a().e)(e.pointer.spaceId)});if(p(o,n))return{discussionStore:o,annotation:i}}}function u(e){const{store:t,discussionId:n}=e,o=t.getAncestorRecordStoreAtRootPath();if(!o||o.table!==i().ev)return;return o.getDiscussionStores().find((e=>e.id===n))}function p(e,t){const n=e.getCommentStores();if(!n[0])return!1;const o=n[0].getCreatedByPointer();return(null==o?void 0:o.table)===s().oo&&(null==o?void 0:o.id)===t.id}function m(e){const{blockStore:t,suggestionType:n,currentUser:o}=e;let i;if("insert"===n?i=t.getInsertSuggestion():"remove"===n?i=t.getRemoveSuggestion():"add_line_break"===n?i=t.getAddLineBreakSuggestion():"remove_line_break"===n&&(i=t.getRemoveSuggestion()),i){return p(c().sk.createChildStore(t,{table:r().$Y,id:i.discussionId,spaceId:(0,a().e)(t.pointer.spaceId)}),o)}}function g(e){const{blockStore:t,currentUser:n,type:i}=e,r=t.getTitleValue(),a=l().mIW(r);return d(t,o().r.fromArray(a),n,i)}function f(e){const{blockStore:t,currentUser:n}=e,o=t.getInsertSuggestion();if(o){return p(c().sk.createChildStore(t,{table:r().$Y,id:o.discussionId,spaceId:(0,a().e)(t.pointer.spaceId)}),n)}return!1}},423938:(e,t,n)=>{n.d(t,{Z:()=>v,l:()=>h});var o=()=>n(908006),i=()=>n(885110),r=()=>n(686526),a=()=>n(896628),s=()=>n(751156),l=()=>n(508496),c=()=>n(46986),d=()=>n(179034),u=()=>n(478251),p=()=>n(896461);function m(e){var t,n;const{environment:o,collectionContextStore:i,collectionViewBlockStore:r,newViewType:a,existingCollectionViewStore:s,transaction:l}=e,c=e.collectionStore??i.collectionStore(),m=null==c||null===(t=c.getFormat())||void 0===t?void 0:t.collection_default_arrows_by,g=(0,u().i)({environment:o,collectionViewBlockStore:r,collectionView:{type:a??"table",parent_id:r.id,parent_table:d().ev,alive:!0,space_id:r.getSpaceId(),format:{collection_pointer:null==c?void 0:c.pointer,table_properties:null==s||null===(n=s.getFormat())||void 0===n?void 0:n.table_properties,timeline_arrows_by:m?{property:m}:void 0,table_subitem_toggle_column:"title",...s&&"collectionTypedView"===i.contextType?{collection_view_source:s.getFormat().collection_view_source,property_filters:s.getFormat().property_filters}:{}}},transaction:l});return(0,p().W)({environment:o,collectionContextStore:i,collectionViewStore:g,collectionStore:c,newViewType:a,transaction:l}),g}var g=()=>n(58415),f=()=>n(180762);function v(e){const{environment:t,collectionContextStore:n,newViewType:a="table",transaction:s,skipOpenSettings:d}=e,u=n.collectionViewBlockStore(),p=n.collectionViewStore(),g=n.settingsStore;if(!u)return;const v=m({environment:t,collectionContextStore:n,collectionViewBlockStore:u,newViewType:a,existingCollectionViewStore:p,transaction:s});"chart"===a&&(i().Z({environment:t,collectionContextStore:n,collectionViewId:v.id,from:"new_view_button"}),l().default.logEvent("chart_created")),(0,f().t)({environment:t,collectionContextStore:n,collectionViewId:v.id,isFullScreen:n.isFullScreenStore.state,isRootChild:n.isRootChildStore.state,isInPeekRenderer:n.isInPeekRendererStore.state}),d||o().default.afterNextFlush((()=>{if(r().Ow({collectionContextStore:n,collectionSettingsStore:g}),u.hasSingleSourceAndNoLinkedCollections()||(0,c().ei)(t))r().R8({collectionSettingsStore:g,item:{type:"createView"}});else{var e;n.hasSingleCollection()&&"page"!==(null===(e=n.collectionViewStore())||void 0===e?void 0:e.getType())&&r().R8({collectionSettingsStore:g,item:{type:"linkToDatabase",existingCollectionStore:void 0}})}}))}function h(e){let{environment:t,collectionContextStore:n}=e;const o=n.collectionViewBlockStore(),i=n.settingsStore;if(!o)return;const l=1===o.getAllSourceCollectionStores().length&&0===o.getAllLinkedCollectionStores().length&&void 0===o.getFormatStore().getKeyStore("hide_inline_collection_name"),{collectionStore:c,newViewStore:d}=s().createAndCommit({environment:t,userAction:"createAndFocusNewDatabase",canUndo:!0,perform:e=>{const i=(0,g().E)({environment:t,collectionViewBlockStore:o,transaction:e,collectionValue:{}});if(!i)return;const r=m({environment:t,collectionContextStore:n,collectionViewBlockStore:o,collectionStore:i,newViewType:"table",transaction:e});return l&&a().zA({stores:[o],update:{hide_inline_collection_name:!1},transaction:e}),{collectionStore:i,newViewStore:r}}}).performResult??{};c&&d&&((0,f().t)({environment:t,collectionContextStore:n,collectionViewId:d.id,isFullScreen:n.isFullScreenStore.state,isRootChild:n.isRootChildStore.state,isInPeekRenderer:n.isInPeekRendererStore.state}),r().Ow({collectionContextStore:n,collectionSettingsStore:i}),r().R8({collectionSettingsStore:n.settingsStore,item:{type:"addNewDatabase",collectionStore:c}}))}},424039:(e,t,n)=>{n.d(t,{$S:()=>i,Ay:()=>c,CV:()=>s,w_:()=>r});var o=()=>n(994310);const i="unread_and_read",r=["unread_and_read","unread_only","archived_only","all_updates"],a={filter:i},s="notification_inbox_panel";const l=n(757695).default.createValue(function(){const e=o().A.get(s);return{...a,...e}}(),{name:"preferenceStore"});l.addListener((e=>{try{t=e.state,o().A.set(s,t)}catch{}var t}));const c=l},424746:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},425940:(e,t,n)=>{n.d(t,{a:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M7.82 4.037a.625.625 0 0 0-1.072-.644L4.344 7.4 3.008 5.842a.625.625 0 1 0-.949.813l1.9 2.217a.625.625 0 0 0 1.01-.085zm1.928 1.992a.625.625 0 1 0 0 1.25h7.125a.625.625 0 1 0 0-1.25zm-.625 7.275c0-.345.28-.625.625-.625h7.125a.625.625 0 1 1 0 1.25H9.748a.625.625 0 0 1-.625-.625M4.534 10.68a2.625 2.625 0 1 0 0 5.249 2.625 2.625 0 0 0 0-5.25m-1.375 2.624a1.375 1.375 0 1 1 2.75 0 1.375 1.375 0 0 1-2.75 0"})},i=(0,n(340498).wt)("checklist",o)},425946:(e,t,n)=>{n.d(t,{L:()=>a,M:()=>r});var o=()=>n(496603),i=()=>n(402390);const r="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";function a(e,t){if(o().Kg(e))return e;{const n=e[t];return void 0!==n?n:e[i().q]}}},426116:(e,t,n)=>{n.d(t,{cJ:()=>Qe,np:()=>$e,bz:()=>Me,c$:()=>Ze,cN:()=>We,CU:()=>ot,DT:()=>je,ev:()=>He,rr:()=>Pe,t9:()=>Ne,tR:()=>De,IO:()=>Le,iz:()=>Ge,xu:()=>nt,Mr:()=>qe,Od:()=>Ke,uK:()=>Je,Xk:()=>Ve,If:()=>tt,DJ:()=>et,M1:()=>Xe,yV:()=>Be,O1:()=>Ye,l3:()=>Fe,Yk:()=>Oe,Ef:()=>Ue});n(16280),n(944114),n(898992),n(354520),n(672577),n(581454);var o=()=>n(584262),i=()=>n(857639),r=()=>n(416845),a=()=>n(206267),s=()=>n(68263),l=()=>n(388821),c=()=>n(179034),d=()=>n(96689),u=()=>n(84520),p=()=>n(854150),m=()=>n(294712),g=()=>n(322769),f=()=>n(994310),v=()=>n(496603),h=()=>n(502800),_=()=>n(763824),b=()=>n(821062),y=()=>n(534177),S=()=>n(583835);const w=(0,S().Dv)("deleteSpace"),k=(0,S().Dv)("moveToSpace");var I=()=>n(857783),x=()=>n(662453),A=()=>n(650829),C=()=>n(780054),T=()=>n(549500),M=()=>n(989423),P=()=>n(680074),B=()=>n(529543),R=()=>n(211716),E=()=>n(594794),D=()=>n(972435),N=()=>n(100875),L=()=>n(731320),O=()=>n(640653),U=()=>n(37433),F=()=>n(327300),V=()=>n(510473),j=()=>n(935370),z=()=>n(1130),H=()=>n(144114),W=()=>n(162674),q=()=>n(696746),K=()=>n(770906),G=()=>n(441199),$=()=>n(214006),Y=()=>n(351360),Q=()=>n(430483),Z=()=>n(227440),X=()=>n(508496),J=()=>n(150193),ee=()=>n(968172),te=()=>n(545206),ne=()=>n(630116),oe=()=>n(224701),ie=()=>n(981046),re=()=>n(701763),ae=()=>n(278768),se=()=>n(966505),le=()=>n(449506),ce=()=>n(934839),de=()=>n(901389),ue=()=>n(357625),pe=()=>n(824772),me=()=>n(433052),ge=()=>n(722101),fe=()=>n(496414),ve=()=>n(899193),he=()=>n(579627),_e=()=>n(824188),be=()=>n(246826),ye=()=>n(435009),Se=()=>n(537941),we=()=>n(706024),ke=()=>n(185544),Ie=()=>n(72234),xe=()=>n(751156),Ae=()=>n(840153),Ce=()=>n(755199);const Te=(0,n(959013).YK)({deletingWorkspace:{id:"spaceActions.deletingWorkspace.loadingMessage",defaultMessage:"Deleting workspace…"},goOnlineCreateSpace:{id:"spaceActions.dialogError.createWorkspaceError.goOnline.message",defaultMessage:"Please go online to create your workspace."},createSpaceError:{id:"spaceActions.dialogError.createWorkspaceError.message",defaultMessage:"Sorry! We could not create your workspace. Please try again."},loginToCreateSpace:{id:"spaceActions.dialogError.createWorkspaceError.notLoggedIn.message",defaultMessage:"Please log in to create a workspace."},moveToSpaceOnlineError:{id:"spaceActions.dialogError.moveContentError.goOnline.message",defaultMessage:"Please go online to move content to another workspace."},loginToMoveContent:{id:"spaceActions.dialogError.movetoWorkspace.notLoggedIn.message",defaultMessage:"Please log in to move content to another workspace."},cannotMoveShardRestriction:{id:"spaceActions.dialogError.moveContentError.cannotMovePages.message",defaultMessage:"Cannot move pages from multiple workspaces at once."},cannotMoveContent:{id:"spaceActions.dialogError.couldNotMoveContentError.message",defaultMessage:"Sorry! We could not move this content. Please try again."},spaceContentDuplicationTooLarge:{id:"spaceActions.dialogError.spaceContentDuplicationTooLarge.message",defaultMessage:"Content too large to duplicate. Please try breaking it up into smaller batches."},spaceContentDuplicationRefreshRequired:{id:"spaceActions.dialogError.spaceContentDuplicationRefreshRequired.message",defaultMessage:"Content successfully duplicated. A refresh is required to load the new content."},unableToJoinSpace:{id:"spaceActions.dialogError.unableToJoinSpace.message",defaultMessage:"Cannot join since you previously belonged to this workspace. Please ask an administrator to invite you directly."},inviteLinkDisabled:{id:"spaceActions.dialogError.inviteLinkDisabled.message",defaultMessage:"Invite link disabled. Please ask an administrator to invite you directly to this workspace."},invalidSpaceStoreOnNavigate:{id:"spaceActions.dialogError.navigateToWorkspace.invalidStorage.message",defaultMessage:"Failed to load workspace data."},noSpaceViewOnJoin:{id:"spaceActions.dialogError.joinWorkspace.invalidWorkspaceStorage.message",defaultMessage:"No workspace view data was created."},noLocalDataForPermissionGroup:{id:"spaceActions.dialogError.createOrUpdatePermissionGroup.invalidWorkspaceStorage.message",defaultMessage:"No local data about this workspace."}});async function Me(e){const{environment:t,name:n,domain:o,userRootStore:r,emailDomains:a,analyticsFrom:s,icon:l,planType:c,planSelection:g,userPersona:f,shouldCreateUserPersonaTeam:h,shouldMakeUserPersonaTeamDefault:_,collaborativeIntent:b,source:y}=e,{id:S}=t.currentUser;if(S){const e=await le().callApi({eventName:"createSpace",environment:t,data:{name:n,domain:o,emailDomains:a,icon:l,planType:c,planSelection:g,initialPersona:f,shouldCreateUserPersonaTeam:h,shouldMakeUserPersonaTeamDefault:_,domainType:(0,P().FX)(),collaborativeIntent:b,deviceId:await(0,B().getExperimentDeviceId)(t),deviceType:t.device.deviceType,source:y}});if("failed"===e.type){if(e.offline)throw new Error(D().A.formatMessage(Te.goOnlineCreateSpace));throw new Error(D().A.formatMessage(Te.createSpaceError))}X().default.logEvent("create_workspace",c,{analyticsFrom:s,userPersona:f,collaborativeIntent:b,deviceType:t.device.deviceType});const{spaceId:w,teamId:k,inviteLinkCode:I}=e.data,x=new(ne().SL)(t,{table:d().NX,id:w}),A=k?ne().h4.createChildStore(x,{table:p().yK,id:k}):void 0,{serverCommitResult:C,performResult:{spaceViewStore:T}}=xe().createAndCommit({userAction:"spaceActions.createSpace",environment:t,canUndo:!0,perform:e=>{const n=be().vt({environment:t,table:u().mu,args:{id:(0,E().Z1)({environment:t,table:u().mu,spaceId:x.id}),space_id:x.id,notify_mobile:!0,notify_desktop:!0,notify_email:!0,parentPointer:{table:m().GD,id:S},joined:!0,joined_teams:A&&v().oE([null==A?void 0:A.id]),settings:{notify_email_digest:!0,notify_home_digest_email:!0},first_joined_space_time:Date.now()},inMemoryRecordCache:r.inMemoryRecordCache,transaction:e}),o=new(ne().vH)(t,n.pointer);return ge().BC({parentStore:r.getSpaceViewsStore(),appendStore:n,transaction:e}),ge().B8({parentStore:r.getSpaceViewPointersStore(),appendStore:n,transaction:e}),t.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.createSpace setting space"}}),Y().default.setState({...Y().default.state,currentSpaceStore:x,currentSpaceViewStore:o}),se().qF(t,{from:s,planType:c,isProfessionalTeamUser:(0,P().YD)(),domain_type:(0,P().FX)()}),{spaceViewStore:o}}});return await C,await pe().fD(t),{spaceViewStore:T,spaceStore:x,inviteLinkCode:I,teamStore:A}}throw new Error(D().A.formatMessage(Te.loginToCreateSpace))}async function Pe(e){const{environment:t,blockStores:n,spaceId:o,targetParent:a}=e,{id:s}=t.currentUser;if(s){if(!Z().A.state.online)return{error:{message:D().A.formatMessage(Te.moveToSpaceOnlineError)}};const e=[],p=[];for(const t of n)t.isDefined()&&(e.push({id:t.id,spaceId:t.getSpaceId()}),p.push(o));if(v().sb(p).length>1)return{error:{message:D().A.formatMessage(Te.cannotMoveShardRestriction)}};if(a&&a.spaceId!==o)return{error:{message:D().A.formatMessage(Te.cannotMoveShardRestriction)}};const m=(0,ue().UT)(t,k,{blocks:e,targetSpaceId:o,targetParent:a,clearPermissions:(0,U().getActiveTeamCount)()>0});let g,f=0;for await(const n of m){if(ve().DW(n,o),n.error)return M().vd(t,"move_to_space_error",{}),i().log({level:"error",from:"spaceActions",type:"moveSpaceError",error:(0,h().convertErrorToLog)(n.error),data:{userId:s,blocks:e,spaceId:o}}),(0,r().Xdn)(n.error)||f>te().z?{error:{message:D().A.formatMessage(Te.spaceContentDuplicationTooLarge),data:n.error}}:{error:{message:D().A.formatMessage(Te.cannotMoveContent),data:n.error}};if(f=n.value.totalBlocks,void 0===n.value.recordMap){if("success"===n.taskStatus)return{error:{message:D().A.formatMessage(Te.spaceContentDuplicationRefreshRequired)}}}else{const e=l().RecordMapWithRole.create(n.value.recordMap).getByTable(c().ev);for(const{value:t}of e){var d,u;if("copy_indicator"===(null==t||null===(d=t.value)||void 0===d?void 0:d.type))g=null==t||null===(u=t.value)||void 0===u?void 0:u.id}}}return ve().L7(o),{value:g}}return{error:{message:D().A.formatMessage(Te.loginToMoveContent)}}}async function Be(e){const{environment:t,spaceViewStore:n,openInNew:o,isNewlyCreatedSpace:r,leavingSpace:a}=e;await n.awaitNonNullValue();const s=n.getSpaceStore();if(!s)throw new Error(D().A.formatMessage(Te.invalidSpaceStoreOnNavigate));if(!o){try{const{dictationActions:e}=await T().$O.load();await e.stopDictation({environment:t,from:"space_switch"})}catch(d){}if(ce().zA({bannerStore:J().A,id:"SubscriptionEditingBlocker"}),t.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.switchToSpace",spaceId:s.id}}),Y().default.setState({...Y().default.state,currentSpaceStore:s,currentSpaceViewStore:n}),a){const e=await(0,O().zd)(t,n);e&&((0,N().hr)({spaceView:n.getModel(),pageId:e.id}),Y().default.setState({...Y().default.state,mainEditorCurrentBlockStore:e}))}}ie().A.reset();const l=t.currentUser.id,c=n.getUserRootParentId();if(c&&l!==c){const e=await Ae().T({environment:t,newCurrentUserId:c});await oe().$D({environment:e,spaceId:s.id,isNewlyCreatedSpace:r});const{currentUserSettingsStore:n,currentUserRootStore:o}=Y().default.state;return{switchedUser:!0,newEnvironment:e,newUserRootStore:o,newUserSettingsStore:n}}return await oe().$D({environment:t,spaceId:s.id,isNewlyCreatedSpace:r}),{switchedUser:!1}}const Re=4;async function Ee(e){var t;const{spaceViewStore:n,redirectPageId:r,openInNew:a,isNewlyCreatedSpace:s,templateGalleryItem:l,projectManagementLaunch:d,redirect:u,leavingSpace:p,pageVisitSource:m,forceLandLastVisitedPage:g,navigateToStore:f}=e;let{environment:v,userSettingsStore:h,userRootStore:_}=e;const b=n.getSpaceStore();if(!b)throw new Error(D().A.formatMessage(Te.invalidSpaceStoreOnNavigate));const y=await Be({environment:v,spaceViewStore:n,openInNew:a,isNewlyCreatedSpace:s,leavingSpace:p});y.switchedUser&&(v=y.newEnvironment,h=y.newUserSettingsStore,_=y.newUserRootStore),G().default.isOpen()&&(0,K().VI)({environment:v}),Q().zD.isAiEnabled()&&(A().assistantDependency.load().then((e=>{let{assistantActions:t}=e;t.clearAllAssistantSessions()})),async function(){const{aiQnaActions:e}=await x().aiDependency.load();e.resetAllAiConnectors()}());const S=_&&_.getSpaceViewStores(),w=O().Yi(v,{space:b.getModel(),spaceView:null==n?void 0:n.getModel()}),k=q().x$(n);if(f)return void I().uK({environment:v,store:f,visitType:R().ig.Link,pageVisitSource:o().y8.NewWorkspaceWorkflowTemplateOnboarding});if(r)return void I().uK({environment:v,store:new(ne().Bv)(v,{table:c().ev,id:r}),openInNew:a,pageVisitSource:m,redirect:u});(0,H().zX)(v)&&Se().navigateToHomeTab(v),_&&await _e().reinitializeGlobalRecentPagesStoreState(v,_.id,b.id);const C=(null===(t=h)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.ai_seen_reroute_to_home_default_landing_page)??0,T="personal_home"!==w&&(0,F().$$)().showAiChatModuleInHome&&!v.device.isMobile&&C<Re;if(g||"last_visited_page"===w&&!T){const e=function(e){const{spaceId:t}=e,n=ee().A.getWithoutSubscribing(t);if(!Array.isArray(n))return;const o=n[0];if(void 0===(null==o?void 0:o.pageId))return;return o.store}({environment:v,spaceId:b.id});if(e&&e.canRead()&&e.pathIsAccessibleAndAlive()&&!e.isPlaceholderWorkflowTemplateBlock()&&!L().qb(v,e))return void I().uK({environment:v,store:e,openInNew:a,templateGalleryItem:l,projectManagementLaunch:d,pageVisitSource:o().y8.LastVisitedPage,redirect:u})}if("chat"===w&&!v.device.isTablet&&Q().zD.isFullPageAssistantInStartOptions())return void ye().oo({environment:v,url:"/chat",redirect:u});if(("personal_home"===w||T||"chat"===w&&v.device.isTablet||"chat"===w&&!Q().zD.isFullPageAssistantInStartOptions())&&k&&(T&&h&&xe().createAndCommit({userAction:"spaceActions.setAiReroutedToHomeDefaultLandingPage",environment:v,canUndo:!0,perform:e=>{Ce().mJ({userSettingsStore:h,transaction:e,data:{ai_seen_reroute_to_home_default_landing_page:C+1}})}}),await k.load(),k.canRead()))return I().uK({environment:v,store:k,openInNew:a,templateGalleryItem:l,projectManagementLaunch:d,pageVisitSource:o().y8.DefaultHome,redirect:u}),void(0,W().ZL)({environment:v,from:"on_app_start_page"});const M=await(0,O().zd)(v,n);if(M)return(0,N().hr)({spaceView:n.getModel(),pageId:M.id}),void I().uK({environment:v,store:M,openInNew:a,templateGalleryItem:l,projectManagementLaunch:d,pageVisitSource:m,redirect:u});if(b.canEdit()){const{performResult:e}=xe().createAndCommit({userAction:"spaceActions.createdPage",environment:v,canUndo:!0,perform:e=>ke().IT({environment:v,spaceStore:b,spaceViewStore:n,isPrivate:!0,transaction:e,prepend:!1})});I().uK({environment:v,store:e,openInNew:a,pageVisitSource:m,redirect:u})}else{if(h&&_&&S&&S.length>0&&S[0]&&S[0].id!==n.id)return me().Aj(),v.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because navigateToSpace didn't find a page"}}),void(await Ne({environment:v,userRootStore:_,userSettingsStore:h,openInNew:a,pageVisitSource:m}));me().Aj(),await z().Ig(v,"navigate_to_space_inner")}}async function De(e){Y().default.setState({...Y().default.state,spaceTransitionStatus:e.navigationType}),await Ee(e),await pe().fD(e.environment,!0),Y().default.setState({...Y().default.state,spaceTransitionStatus:"notTransitioning"})}async function Ne(e){const{environment:t,userRootStore:n,ignoreSpaceId:i,userSettingsStore:r,openInNew:a,skipPendingTransferWorkspaces:s,leavingSpace:l,templateGalleryItem:c,projectManagementLaunch:d,pageVisitSource:u,redirect:p,forceLandLastVisitedPage:m}=e;await n.load();const f=n.getSpaceViewStores();await Promise.all(f.map((e=>e.load())));const v=f.filter((e=>{var t,n;if(!e.isDefined())return!1;if(i)return e.getSpaceId()!==i;const o=(0,g().D1)(null===(t=e.getSpaceStore())||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.space_request)||(0,g().C0)(null===(n=e.getSpaceStore())||void 0===n||null===(n=n.getSettings())||void 0===n?void 0:n.space_request);return!s||!o}));let h;for(const o of v){if(!O().IL(o.getSpaceStore())){h=o;break}{const e=await(0,O().zd)(t,o);if(e&&e.isDefined()){h=o,(0,N().hr)({spaceView:o.getModel(),pageId:e.id});break}}}h||u!==o().y8.PublicShareLink?h?await De({environment:t,spaceViewStore:h,userSettingsStore:r,userRootStore:n,openInNew:a,leavingSpace:l,templateGalleryItem:c,projectManagementLaunch:d,pageVisitSource:u,redirect:p,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:m}):(me().Aj(),await z().Ig(t,"navigate_to_first_space")):me().Aj()}async function Le(e){const{environment:t,index:n,userRootStore:i,userSettingsStore:r}=e,a=$().A.getAllSpaceViewStores(t)[n];a&&await De({environment:t,spaceViewStore:a,userSettingsStore:r,userRootStore:i,pageVisitSource:o().y8.SwitchSpace,navigationType:"switchingToOrLoadingSpace"})}async function Oe(e){const{environment:t,spaceStore:n}=e;n.isDefined()&&!(0,b().A)(n.getEmailDomains(),e.emailDomains)&&ae().Om(t,{domains:e.emailDomains||[],confirmed:!0});const o={email_domains:e.emailDomains};e.name&&(o.name=e.name);const i={};for(const r of(0,y().uv)(o)){const e=n.getKeyStore(r).getValue(),t=o[r];v().n4(e,t)||(i[r]=t||null)}v().Im(i)||await new Promise(((e,o)=>{xe().createAndCommit({userAction:"spaceActions.updateSpace",environment:t,canUndo:!0,perform:t=>{be().zv({store:n,data:i,transaction:t}),t.postSubmitCallbacks.push((t=>{t?o(t):e()}))}})}))}async function Ue(e){const{environment:t,spaceStore:n,spaceBasicSettingsStore:o,securitySettingsStore:i}=e,{name:r,emailDomains:a}=o.state;await Promise.all([Oe({environment:t,spaceStore:n,name:r,emailDomains:a}),i?we().V(t,{spaceStore:n,securitySettingsState:i.state}):Promise.resolve()])}function Fe(e){const{environment:t,transaction:n,spaceStore:o,disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:d,disableMembershipRequests:u,disableExternalMembershipRequests:p,disableGuestMembershipRequests:m,disableTeamGuests:g,enableGuestInviteRequests:f,enableAiTraining:v,zeroRetentionEnabled:h,disableMemberUpgradeRequests:_}=e;be().zv({store:o,data:{disable_public_access:i,disable_guests:r,disable_move_to_space:a,disable_export:s,disable_space_page_edits:l,disable_public_access_requests:c,settings:{...o.getSettings(),disable_team_guests:g,enable_guest_invite_requests:f,enable_ai_training:v,...!1===v&&{is_assistant_experience_enabled:!1},zero_retention_enabled:h,disable_member_upgrade_requests:_},disable_team_creation:d},transaction:n}),xe().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","disable_membership_requests"],command:"set",args:u},transaction:n}),xe().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","disable_external_membership_requests"],command:"set",args:p},transaction:n}),xe().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","disable_guest_membership_requests"],command:"set",args:m},transaction:n}),xe().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings","disable_member_upgrade_requests"],command:"set",args:_},transaction:n}),c&&re().FX(t,{disable_public_access_requests:c})}function Ve(e){const{transaction:t,spaceStore:n,inviteLinkEnabled:o}=e;be().zv({store:n,data:{invite_link_enabled:o},transaction:t})}async function je(e){var t;const{environment:r,spaceId:a,userRootStore:s,navigate:l,analyticsFrom:c,userSettingsStore:d,redirectPageId:u,inviteCode:p,redirectSource:m,isOnboarding:g,isJoinableTrustedDomainViewer:v}=e,_=await ze({userRootStore:s,spaceId:a,waitForLoad:!1});if(!_||v){const t=await le().callApi({eventName:"addUsersToSpace",environment:r,data:{userIds:[s.id],spaceId:e.spaceId,inviteCode:p}});var b;if("failed"===t.type)switch(i().log({level:"error",from:"spaceActions",type:"addUsersToSpace",error:(0,h().convertErrorToLog)(t.error),data:{miscDataToConvertToString:{response:t}}}),null===(b=t.body)||void 0===b||null===(b=b.clientData)||void 0===b?void 0:b.type){case"unable_to_join_space":throw new Error(D().A.formatMessage(Te.unableToJoinSpace));case"invite_link_disabled":throw f().A.remove(H().Zz),new Error(D().A.formatMessage(Te.inviteLinkDisabled));default:throw t.error}}const y=_||await ze({userRootStore:s,spaceId:a,waitForLoad:!1});if(!y)throw new Error(D().A.formatMessage(Te.noSpaceViewOnJoin));await y.load();const S=y.getJoined();S||(xe().createAndCommit({userAction:"spaceActions.joinSpace",environment:r,canUndo:!0,perform:e=>{!function(e){be().zv({store:e.spaceViewStore,data:{joined:!0},transaction:e.transaction})}({spaceViewStore:y,transaction:e})}}),C().A.isAdminMode||(le().callApi({eventName:"setSpaceNotificationsAsRead",environment:r,data:{timestamp:Date.now(),spaceId:a}}),se().gy(r,{from:m??c})),g||await async function(e){const{environment:t,spaceViewStore:o,userSettingsStore:i,userRootStore:r}=e,{onboardingActionsDependency:a}=await Promise.resolve().then(n.bind(n,935370)),{createOnboardingTemplatesActions:s}=await a.load(),l=s.getStarterTemplatesForSpace({environment:t,onboardingPlanType:"team",categories:[],isJoiner:!0,intl:D().A.getIntl()});await s.createTemplatePagesInSpace({environment:t,redirectData:{type:"getting_started_page"},spaceViewStore:o,isPrivate:!0,userSettingsStore:i,userRootStore:r,templatesToCreateInSpace:{pageTemplates:l},planType:"team",spaceJoinOrCreate:"join",useCases:[],userPersona:"other",isNewUserOnboarding:!1})}({environment:r,spaceViewStore:y,userSettingsStore:d,userRootStore:s}));if((null===(t=y.getSettings())||void 0===t?void 0:t.should_create_templates_for_mail_onboarding)&&await async function(e){const{environment:t,spaceViewStore:n,userSettingsStore:o,userRootStore:i}=e;Ie().I$(t,n,!1);const{createOnboardingTemplatesActions:r}=await j().onboardingActionsDependency.load(),a=r.getStarterTemplatesForSpace({environment:t,onboardingPlanType:"personal",categories:[],isJoiner:!1,intl:D().A.getIntl()});await r.createTemplatePagesInSpace({environment:t,redirectData:{type:"getting_started_page"},spaceViewStore:n,isPrivate:!0,userSettingsStore:o,userRootStore:i,templatesToCreateInSpace:{pageTemplates:a},planType:"personal",spaceJoinOrCreate:"create",useCases:[],userPersona:"unfilled",isNewUserOnboarding:!0,teamStore:void 0})}({environment:r,spaceViewStore:y,userSettingsStore:d,userRootStore:s}),l&&await De({environment:r,spaceViewStore:y,userSettingsStore:d,redirectPageId:u,userRootStore:s,pageVisitSource:o().y8.SwitchSpace,navigationType:_?"switchingToOrLoadingSpace":"joiningOrCreatingSpace"}),!_&&(Y().default.setState({...Y().default.state,currentSpaceStore:y.getSpaceStore(),currentSpaceViewStore:y}),oe().$D({environment:r,spaceId:a}).then((()=>{se().eR(r,{from:c})})),f().A.remove(H().Zz),r.device.isMobileNative&&i().log({level:"info",from:"spaceActions",type:"SpaceSwitchingDebug",data:{message:"spaceActions.joinSpace"}}),await pe().fD(r),!S)){const e=p?"shareable_link_join":"verified_domain_join";se().KX(r,{invite_origin:e,domainType:(0,P().FX)(),new_workspace_member_count:1,new_workspace_member_ids:[s.id]})}return{spaceViewStore:y}}async function ze(e){const t=e.userRootStore.getSpaceViewStores();return e.waitForLoad&&await _().lX(t,10,(e=>e.load())),t.find((t=>t.getSpaceId()===e.spaceId))}async function He(e){const{environment:t,spaceId:n,userSettingsStore:i}=e,{currentUserRootStore:r,currentUserStore:a}=Y().default.state;if(r&&a){const e=await le().callApi({eventName:"removeUsersFromSpace",environment:t,data:{userIds:[a.id],spaceId:n,removePagePermissions:!0,revokeUserTokens:!1}});return"success"===e.type?(Ne({environment:t,userRootStore:r,ignoreSpaceId:n,userSettingsStore:i,leavingSpace:!0,pageVisitSource:o().y8.SwitchSpace}),!0):(de().Qg(e),!1)}}async function We(e){const{environment:t,spaceId:n,organizationId:o,onDelete:i}=e;fe().m({message:Te.deletingWorkspace});try{const{value:e}=await(0,ue().UT)(t,w,{spaceId:n,source:"user_initiated_deletion",organizationId:o}).next();if(e.error)throw e.error;await i()}finally{fe().V()}}function qe(e){const{environment:t,blocks:n,transaction:o}=e,i=t.currentUser.id;if(i)for(const r of n){const e=r.getPermissionItems().filter((e=>(0,s().P3)(e)));be().zv({store:r,data:{permissions:[...e,{type:"user_permission",role:"editor",user_id:i}]},transaction:o})}}function Ke(e){const{environment:t,blocks:n,transaction:o}=e;if(t.currentUser.id)for(const i of n){const e=i.getPermissionItems(),n=e.find((e=>"space_permission"===e.type)),r=e.filter((e=>(0,s().P3)(e)));n||he().zP({environment:t,store:i,permissionItems:[...r,{type:"space_permission",role:"editor"}],transaction:o})}}function Ge(e){const{blocks:t,transaction:n}=e;for(const o of t){const e=o.getPermissionItems().filter((e=>(0,s().P3)(e)));be().zv({store:o,data:{permissions:e.length>0?e:null},transaction:n})}}function $e(e){const{spaceStore:t,transaction:n}=e;if(!t.isDefined())throw new Error(D().A.formatMessage(Te.noLocalDataForPermissionGroup));const o=(0,a().JW)(),i=(0,V().E)({spaceStore:t,groupId:o});return xe().applyOperation({store:i,operation:(0,g().ao)({spaceId:t.id,groupId:o}),transaction:n}),i}function Ye(e){const{transaction:t,spacePermissionGroupStore:n,value:o}=e;xe().applyOperation({store:n,operation:{command:"update",pointer:n.pointer,path:[],args:{...o}},transaction:t})}function Qe(e){const{groupMemberStore:t,spaceId:n,groupId:o,userId:i,transaction:r}=e;xe().applyOperation({store:t,operation:(0,g().Fu)({groupId:o,spaceId:n,userId:i}),transaction:r})}async function Ze(e){const{environment:t,groupStore:n,transaction:o}=e;await n.load();const i=n.getGroupId(),r=n.getSpaceId();r&&i&&(xe().applyOperation({store:n,operation:{pointer:n.pointer,path:[],command:"update",args:{deleted_at:Date.now()}},transaction:o}),await le().callApi({eventName:"transferPermissionGroup",environment:t,data:{spaceId:r,groupId:i}}))}function Xe(e){const{userRootStore:t,spaceViewIds:n,transaction:o,spaceViewPointers:i}=e;be().zv({store:t,data:{space_views:n,space_view_pointers:i},transaction:o})}function Je(e){const{planType:t,spaceStore:n,transaction:o}=e;be().zv({store:n,data:{plan_type:t},transaction:o})}function et(e,t,n){const o=n||Y().default.state.currentSpaceStore;if(!o)throw i().log({level:"error",from:"spaceActions",type:"setSpaceSurveyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;xe().createAndCommit({userAction:"spaceActions.setSpaceSurveyData",environment:e,canUndo:!0,perform:e=>{it(o,e,{space_survey_data:t})}})}function tt(e,t,n){const o=n||Y().default.state.currentSpaceStore;if(!o)throw i().log({level:"error",from:"spaceActions",type:"setSpacePlanType",error:{message:"Couldn't find a SpaceStore."}}),new Error;xe().createAndCommit({userAction:"spaceActions.setSpacePlanType",environment:e,canUndo:!0,perform:e=>{be().zv({store:o,data:{plan_type:t},transaction:e})}})}function nt(e,t){const n=t||Y().default.state.currentSpaceStore;if(!n)throw i().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"Couldn't find a SpaceStore."}}),new Error;const o=e.currentUser.id;if(!o)throw i().log({level:"error",from:"spaceActions",type:"setHIPAACompliancyData",error:{message:"No User"}}),new Error;const r={last_edited_time:Date.now(),last_edited_by_id:o};xe().createAndCommit({userAction:"spaceActions.setHIPAACompliancyData",environment:e,canUndo:!0,perform:e=>{it(n,e,{hipaa_compliancy_data:r})}})}function ot(e){const t=e.getEditDomain();return t?`${window.location.host}/${t}`:null}function it(e,t,n){xe().applyOperation({store:e,operation:{pointer:e.pointer,path:["settings"],command:"update",args:{...e.getSettings(),...n}},transaction:t})}},427155:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},429825:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{constructor(){super(...arguments),this.isSwipingStore=new(n(496506).default)((()=>this.state.swiping),{debugName:"SidebarMobileSwipeStore_isSwipingStore"})}getInitialState(){return{touching:!1,swiping:!1}}}const i=new o},430483:(e,t,n)=>{n.d(t,{hV:()=>c,rm:()=>l,ts:()=>s,zD:()=>d});n(898992),n(823215);var o=()=>n(534177),i=()=>n(508496),r=()=>n(756315);class a extends(()=>n(757695))().default{getInitialState(){return new(n(80586).C)({isInitialized:!1,getEligibleGroup:()=>"control",isAiEnabled:()=>!1,isZeroRetentionEnabled:()=>!1,getCanSearchWorkspaceWithCollectionIdFilter:()=>!1,getSearchBackend(){},checkGate:()=>!1,getSubscriptionTier(){},getIsAssistantSpaceSettingEnabled:()=>!1,getHasUnlimitedAiCredits:()=>!1})}getIsInitialized(){return Boolean(this.state.getIsInitialized()&&i().default.isStatsigReady())}isAiEnabled(){return this.state.isAiEnabled()}isEphemeralViewDatabaseQueryingEnabled(){return this.modeIsAtMost("assistant_0.3")}isDatabaseQueryingEnabled(){return this.state.isDatabaseQueryingEnabled()}isDatabaseScopedSearchEnabled(){return this.state.isDatabaseScopedSearchEnabled()}isQnATooltipsVisible(e,t){if(!t||!t.isReady())return!1;if(e.isMobile)return!1;if(this.isXMLAssistantEnabled())return!1;const n=t.getSettings();return!!n&&"tooltip"===n.ai_qna_intro_onboarding_phase}shouldDisableForMobileBrowser(e){return e.isMobileBrowser&&!this.modeIsNotControl()}shouldShowSearchMenuItemAskAI(e){return this.modeIsNotControl()}isAssistantThumbsUpDownFeedbackBarActionEnabled(e){return e&&this.modeIsNotControl()}showRemindersToUseQnA(){return this.state.showRemindersToUseQnA()}canSeeGoogleDriveUniversalQnaAnnouncementModal(){return this.state.canUseUniversalGoogleDriveSearchScope()}canSeeGithubAIConnectorAnnouncementModal(){return this.state.canUseUniversalGithubSearchScope()}isWorkspaceLeapEligible(e){return this.state.isWorkspaceLeapEligible(e)}shouldShowAttachmentImageButton(){return this.isAttachmentUploadEnabledForUser()&&i().default.checkGate({gateName:"attachment_show_ask_ai_in_images"})}disableWriterAutoFollow(){return this.state.disableWriterAutoFollow()}isSlackQnaNotificationEnabled(){return this.state.isSlackQnaNotificationEnabled()}shouldShowAnimatedAssistantFace(e){return e.isMobile&&!e.isIOS?this.modeIsAtMost("development"):this.modeIsNotControl()}canShowWebSearchScope(){return this.state.isWebSearchEnabledForUser()}canLoadWebPageURLs(){return this.state.isLoadingWebUrlsEnabledForUser()}shouldUseMarkdown(){return i().default.checkGate({gateName:"ai_assistant_markdown"})}isAssistantSummarizeThisPageEnabledForUser(){return this.state.isAssistantSummarizeThisPageEnabledForUser()}isAiBlockConfigurationMenuEnabledForUser(){return i().default.checkGate({gateName:"ai_template_filling_use_new_ai_blocks"})}isQnaAbandonedSearchReminderEnabledForUser(){if(!this.modeIsNotControl())return!1;const e=i().default.getConfigKey("qna_ai_reminders","abandonedSearchReminderProbability");return(0,n(745875).ox)(e)&&"on"===i().default.getEligibleGroup({experimentId:"qna_abandoned_search_reminders",defaultGroup:"unassigned"})}shouldShowAssistantBadge(){const e=this.getMode();switch(e){case"assistant_0.3":case"development":case"exploratory":return!0;case"control":case"assistant_0.25_with_marketing":return!1;default:(0,o().HB)(e)}return"control"!==e}getNamespace(){return this.state.getNamespace()}showAiSearchQueryRecommendationTreatment(e){const{disableExposureLogging:t}=e;t||i().default.manuallyLogExperimentExposure("ai_search_query_expansion");const n=i().default.getEligibleGroup({experimentId:"ai_search_query_expansion",disableExposureLogging:t});return n||"control"}getNavigationTargetForTryAssistantNowButton(){const e=i().default.getEligibleGroup({experimentId:"025m_ai_launch_entrypoints",defaultGroup:"control"});return void 0===e?"fullPage":"corner"===e?"corner":"writer"===e?"writer":"control"===e?"fullPage":void(0,o().HB)(e)}showSearchDebugTools(){return this.modeIsAtMost("development")}canUseAssistantDebugTools(){return i().default.checkGate({gateName:"run_assistant_allow_dev_only_args"})}isResearchModeUnifiedFindEnabled(){return i().default.checkGate({gateName:"ai_research_mode_unified_find"})}isResearchModeWelcomePageAiEnabled(){return i().default.checkGate({gateName:"ai_research_mode_welcome_page_ai"})}isResearchModeWebSearchEnabled(){return i().default.checkGate({gateName:"ai_research_mode_web_search"})&&!this.state.isZeroRetentionEnabled()}isResearchModeMultiturnEnabled(){return i().default.checkGate({gateName:"ai_research_mode_multiturn"})}isResearchModeSkipClaimsEnabled(){return i().default.checkGate({gateName:"ai_research_mode_skip_claims"})}isResearchModeFilterUncitedArtifactsEnabled(){return i().default.checkGate({gateName:"ai_research_mode_filter_uncited_artifacts"})}showsLimitedQnaLabel(){return"control"!==i().default.getEligibleGroup({experimentId:"qna_vectorless_enabled",defaultGroup:"control"})&&i().default.checkGate({gateName:"show_limited_qna_label"})&&this.isLimitedQnaMode()}isLimitedQnaMode(){return"limited_qna"===this.state.getSearchBackend()}isParameterizationAndEmptyStateEnabled(){return this.modeIsNotControl()}isRichTextMenuSuggestionEnabled(){return this.isAssistantInWriterEnabled()}isBottomBarSuggestionsEnabled(){return this.isAssistantInWriterEnabled()}isFullPageTranslateEnabled(){return this.state.isFullPageTranslateEnabled()}shouldRouteToWriterOrPlansAfterSignup(){return"control"===i().default.getEligibleGroup({experimentId:"ai_signup_redirect_to_writer",defaultGroup:"control"})?"plans":"writer"}areAiActionsOnPasteEnabled(){return this.state.areAiActionsOnPasteEnabled()}isReplaceSelectionEnabled(){return this.state.isReplaceSelectionEnabled()}isMoveToCornerEnabled(){return this.state.isMoveToCornerEnabled()}canShowUniversalSearchScopes(){return this.state.canUseUniversalSearchScopes()}isAiConnectorEnabled(e){return!!this.canShowUniversalSearchScopes()&&("slack"===e?this.canUseUniversalSlackSearchScope():"google_drive"===e?this.isGoogleDriveQnaEnabled():"github"===e?this.isGithubQnaEnabled():"jira"===e?this.isJiraQnaEnabled():"gmail"===e?this.isGmailQnaEnabled():"microsoftTeams"===e?this.isMicrosoftTeamsQnaEnabled():"sharepoint"!==e&&("linear"!==e&&void(0,o().HB)(e)))}isGithubQnaEnabled(){return this.state.isGithubQnaEnabled()}isGmailQnaEnabled(){return this.state.isGmailQnaEnabled()}isGoogleDriveQnaEnabled(){return this.state.isGoogleDriveQnaEnabled()}isJiraQnaEnabled(){return this.state.canUseUniversalJiraSearchScope()}isMicrosoftTeamsQnaEnabled(){return this.state.canUseUniversalMicrosoftTeamsSearchScope()}canUseUniversalSlackSearchScope(){return this.state.canUseUniversalSlackSearchScope()}canUseUniversalGoogleDriveSearchScope(){return this.state.canUseUniversalGoogleDriveSearchScope()}canUseUniversalGithubSearchScope(){return this.state.canUseUniversalGithubSearchScope()}canUseUniversalJiraSearchScope(){return this.state.canUseUniversalJiraSearchScope()}canUseUniversalGmailSearchScope(){return this.state.canUseUniversalGmailSearchScope()}canUseUniversalMicrosoftTeamsSearchScope(){return this.state.canUseUniversalMicrosoftTeamsSearchScope()}canUseUniversalSharepointSearchScope(){return this.state.canUseUniversalSharepointSearchScope()}canUseUniversalLinearSearchScope(){return this.state.canUseUniversalLinearSearchScope()}getCollectionViewEntrypointVariant(e){let{device:t}=e;if(t.isMobile)return"none";if(!this.isAiEnabled())return"none";if(this.modeIsAtMost("assistant_0.3")){const e=i().default.getEligibleGroup({experimentId:"ai_collection_view_entrypoint"});return"button"===e||"search_input"===e?e:"none"}return"none"}isNewFullPageWelcomeStateEnabled(){return i().default.checkGate({gateName:"ai_full_page_welcome_state"})}isNewCornerChatWelcomeStateEnabled(e){return e.canShowNewCornerChatWelcomeState&&i().default.checkGate({gateName:"ai_corner_chat_welcome_state"})}isNewLargerInputActive(e){return this.isNewCornerChatWelcomeStateEnabled(e)||e.canShowNewFullPageWelcomeState&&this.isNewFullPageWelcomeStateEnabled()}isNewWriterInputDesignEnabled(e){return e.canShowNewWriterDesign&&i().default.checkGate({gateName:"ai_yassified_writer"})}getUnfurlingMenuAiActionSectionVariant(e){let{device:t,slackUniversalQnAConnectionStoreState:n}=e;return i().default.checkGate({gateName:"ai_slack_connector_option_on_paste"})?this.isConnectedToSlackUniversalQnA(n)?"feature":this.canShowUniversalSearchScopes()?t.isMobile?"hidden":n.inProgress?"modal_in_progress":"modal_onboarding":"hidden":"hidden"}isAudienceForAiConnectorSprigSurvey(e){const{hasAiConnectorFeature:t,isSpaceAdmin:n,isMultiplayerWorkspace:o,qnaConnectionStoreStates:i}=e,{slackUniversalQnAConnectionStoreState:r,githubAIConnectorStoreState:a,jiraAIConnectionStoreState:s}=i,l=[this.notYetConnectedToSlackUniversalQnA(r),this.notYetConnectedToGoogleDriveUniversalQnA(r),this.notYetConnectedToGithubUniversalQnA(a),this.notYetConnectedToJiraUniversalQnA(s)].every(Boolean);return t&&n&&o&&l&&this.state.canUseUniversalSearchScopes()}isConnectedToSlackUniversalQnA(e){const{connectedApps:t,inProgress:n}=e;return this.canShowUniversalSearchScopes()&&Boolean(null==t?void 0:t.includes("slack-admin"))&&!n}notYetConnectedToSlackUniversalQnA(e){const{connectedApps:t}=e;return!Boolean(null==t?void 0:t.includes("slack-admin"))}isConnectedToGoogleDriveUniversalQnA(e){const{connectedApps:t}=e,n=r().d.state;return this.canUseUniversalGoogleDriveSearchScope()&&(Boolean(null==t?void 0:t.includes("google-drive"))||"completed"===n.initialSyncState||"completed"===n.syncProgress)}notYetConnectedToGoogleDriveUniversalQnA(e){const{connectedApps:t}=e,n=r().d.state;return!Boolean((null==t?void 0:t.includes("google-drive"))||"completed"===n.initialSyncState||"completed"===n.syncProgress)}isConnectedToGithubUniversalQnA(e){const{isConnected:t,isPersonalAuthComplete:n,isDisconnecting:o}=e;return this.canUseUniversalGithubSearchScope()&&t&&n&&!o}notYetConnectedToGithubUniversalQnA(e){const{isConnected:t,isDisconnecting:n}=e;return!t&&!n}isConnectedToJiraUniversalQnA(e){const{jiraSyncState:t}=e;return this.canUseUniversalJiraSearchScope()&&"completed"===t}isConnectedToGmailUniversalQnA(e){const{status:t}=e;return this.canUseUniversalGmailSearchScope()&&"authenticated"===t}isConnectedToMicrosoftTeamsUniversalQnA(e){const{connectionStatus:t}=e;return this.canUseUniversalMicrosoftTeamsSearchScope()&&"completed"===t}isConnectedIsSharepointAiConnector(e){const{connectionDetails:t}=e;return this.canUseUniversalSharepointSearchScope()&&"completed"===(null==t?void 0:t.status)}notYetConnectedToJiraUniversalQnA(e){const{jiraSyncState:t}=e;return"not_started"===t||"pending_connection"===t}isAiConnectorsAiPlanUpsellIntroModalEnabled(){return i().default.checkGate({gateName:"ai_connectors_ai_plan_upsell_intro_modal"})}isAiSettingsTabEnabled(){return i().default.checkGate({gateName:"notion_ai_workspace_settings"})}isDeepFindQueryGenEnabled(){return this.state.isDeepFindQueryGenEnabled()}isDeepFindUniversalBlendingEnabled(){return this.state.isDeepFindUniversalBlendingEnabled()}canShowHelpdocsScope(){return i().default.checkGate({gateName:"ai_assistant_helpdocs_scoped_search"})}sessionStartersEnabledInChat(){return!1}canEditAssistantWriterFavorite(){return this.modeIsNotControl()}canSeeExploratoryAiReportsUi(){return this.modeIsAtMost("exploratory")}isDeepFindEnabled(){return this.state.isDeepFindEnabled()}isMiniSearchModalEnabled(){return this.state.isMiniSearchModalEnabled()}isNewStylingWithAskAiInSearchModalEnabled(){return this.state.isNewStylingWithAskAiInSearchModalEnabled()}isAnswerStreamingInSearchModalEnabled(){return this.state.isAnswerStreamingInSearchModalEnabled()}isSearchConnectorTabSectionEnabled(){return this.state.isTabsInSearchModalEnabled()}isUnifiedFindDebugToolsEnabled(){return this.state.isUnifiedFindDebugToolsEnabled()}getUnifiedFindMode(){return this.state.getUnifiedFindMode()}isAttachmentUploadEnabledForUser(){return this.modeIsNotControl()&&i().default.checkGate({gateName:"assistant_enable_attachment_upload"})}isFullPageAssistantChatEnabled(e){return this.modeIsNotControl()&&!e.isMobile}isFullPageAssistantInStartOptions(){return this.modeIsNotControl()&&!(0,n(327300).$$)().showAiChatModuleInHome}isAssistantInWriterEnabled(){return this.modeIsNotControl()}isXMLAssistantEnabled(){return this.state.isXMLAssistantEnabled()}isInPageFindQnaOptionEnabledForUser(){return this.modeIsNotControl()}shouldEnablePageTitleDiffs(e){return this.modeIsNotControl()&&!e.isMobile}shouldShowAssistantFace(){return this.modeIsNotControl()}showAssistantNotionAiCopy(){return this.isXMLAssistantEnabled()}canSeeAssistantFeaturePromotionalModal(){return this.modeIsNotControl()}isShowingQNAOnMobile(){return this.modeIsNotControl()}showSearchAiFeatures(){return this.modeIsNotControl()}isShowingAssistantInsteadOfHelpCenterInBottomRight(){return this.modeIsNotControl()}shouldShowAssistantInCorner(e){return!(e.isMobileNative&&e.isPhone)&&this.modeIsNotControl()}isQnaRightSideDeeplinkEnabled(){return this.modeIsNotControl()}getMode(){return this.state.getMode()}isMode(e){return this.state.isMode(e)}modeIsAtMost(e){return this.state.modeIsAtMost(e)}modeIsNotControl(){return this.state.modeIsNotControl()}}const s=new(n(496506).default)((()=>d.shouldShowAssistantFace()),{debugName:"ShouldShowAssistantFaceStore"});function l(){return i().default.checkGate({gateName:"compute_related_content"})}function c(){return i().default.checkGate({gateName:"ai_co_editing"})}const d=new a;(0,n(604341).exposeDebugValue)("AssistantFeatureGateStore",d)},431404:(e,t,n)=>{n.d(t,{Q:()=>i,Z:()=>r});var o=()=>n(534177);const i=(0,n(959013).YK)({aiBlockTitle:{id:"newBlock.aiBlock.title",defaultMessage:"AI"},abstractTitle:{id:"newBlock.abstract.title",defaultMessage:"Abstract"},aliasTitle:{id:"newBlock.alias.title",defaultMessage:"Link to page"},audioTitle:{id:"newBlock.audio.title",defaultMessage:"Audio"},bookmarkTitle:{id:"newBlock.bookmark.title",defaultMessage:"Web bookmark"},breadcrumbTitle:{id:"newBlock.breadcrumb.title",defaultMessage:"Breadcrumb"},bulletedListTitle:{id:"newBlock.bulletedList.title",defaultMessage:"Bulleted list"},buttonTitle:{id:"newBlock.button.title",defaultMessage:"Button"},calloutTitle:{id:"newBlock.callout.title",defaultMessage:"Callout"},codeTitle:{id:"newBlock.code.title",defaultMessage:"Code"},codepenTitle:{id:"newBlock.codepen.title",defaultMessage:"CodePen"},columnListTitle:{id:"newBlock.columnList.title",defaultMessage:"Columns"},databaseTitle:{id:"newBlock.database.title",defaultMessage:"Database"},deepnoteTitle:{id:"newBlock.deepnote.title",defaultMessage:"Deepnote"},dividerTitle:{id:"newBlock.divider.title",defaultMessage:"Divider"},drawingTitle:{id:"newBlock.drawing.title",defaultMessage:"Drawing"},driveTitle:{id:"newBlock.drive.title",defaultMessage:"Google Drive"},embedTitle:{id:"newBlock.embed.title",defaultMessage:"Embed"},encryptedTextTitle:{id:"newBlock.encryptedText.title",defaultMessage:"Encrypted Text"},equationTitle:{id:"newBlock.equation.title",defaultMessage:"Block equation"},excalidrawTitle:{id:"newBlock.excalidraw.title",defaultMessage:"Excalidraw"},factoryTitle:{id:"newBlock.factory.title",defaultMessage:"Template button"},fileTitle:{id:"newBlock.file.title",defaultMessage:"File"},figmaTitle:{id:"newBlock.figma.title",defaultMessage:"Figma"},framerTitle:{id:"newBlock.framer.title",defaultMessage:"Framer"},gistTitle:{id:"newBlock.gist.title",defaultMessage:"GitHub Gist"},headerTitle:{id:"newBlock.header.title",defaultMessage:"Heading 1"},hexTitle:{id:"newBlock.hex.title",defaultMessage:"Hex"},imageTitle:{id:"newBlock.image.title",defaultMessage:"Image"},invisionTitle:{id:"newBlock.invision.title",defaultMessage:"Invision"},linkToPageTitle:{id:"newBlock.linkToPage.title",defaultMessage:"Link to page"},loomTitle:{id:"newBlock.loom.title",defaultMessage:"Loom"},mapsTitle:{id:"newBlock.maps.title",defaultMessage:"Google Maps"},miroTitle:{id:"newBlock.miro.title",defaultMessage:"Miro"},mixpanelTitle:{id:"newBlock.mixpanel.title",defaultMessage:"Mixpanel"},numberedListTitle:{id:"newBlock.numberedList.title",defaultMessage:"Numbered list"},pageTitle:{id:"newBlock.page.title",defaultMessage:"Page"},pdfTitle:{id:"newBlock.pdf.title",defaultMessage:"PDF"},quoteTitle:{id:"newBlock.quote.title",defaultMessage:"Quote"},replitTitle:{id:"newBlock.replit.title",defaultMessage:"Replit"},simpleTableTitle:{id:"newBlock.simple_table.title",defaultMessage:"Table"},slideTitle:{id:"newBlock.slide.title",defaultMessage:"Slide"},sketchTitle:{id:"newBlock.sketch.title",defaultMessage:"Sketch"},subHeaderTitle:{id:"newBlock.subHeader.title",defaultMessage:"Heading 2"},subSubHeaderTitle:{id:"newBlock.subSubHeader.title",defaultMessage:"Heading 3"},tabTitle:{id:"newBlock.tab.title",defaultMessage:"Tabs"},tableOfContentsTitle:{id:"newBlock.tableOfContents.title",defaultMessage:"Table of contents"},textTitle:{id:"newBlock.text.title",defaultMessage:"Text"},toDoTitle:{id:"newBlock.toDo.title",defaultMessage:"To-do list"},toggleTitle:{id:"newBlock.toggle.title",defaultMessage:"Toggle list"},transcriptionTitle:{id:"newBlock.transcription.title",defaultMessage:"AI Meeting Notes"},transclusionContainerTitle:{id:"newBlock.transclusionContainer.title",defaultMessage:"Synced block"},tweetTitle:{id:"newBlock.tweet.title",defaultMessage:"Tweet"},typeformTitle:{id:"newBlock.typeform.title",defaultMessage:"Typeform"},videoTitle:{id:"newBlock.video.title",defaultMessage:"Video"},whimsicalTitle:{id:"newBlock.whimsical.title",defaultMessage:"Whimsical"}});function r(e){switch(e){case"ai_block":return i.aiBlockTitle;case"abstract":return i.abstractTitle;case"alias":return i.aliasTitle;case"audio":return i.audioTitle;case"bookmark":return i.bookmarkTitle;case"breadcrumb":return i.breadcrumbTitle;case"bulleted_list":return i.bulletedListTitle;case"button":return i.buttonTitle;case"callout":return i.calloutTitle;case"code":return i.codeTitle;case"codepen":return i.codepenTitle;case"collection_view":case"collection_view_page":return i.databaseTitle;case"column":case"column_list":return i.columnListTitle;case"deepnote":return i.deepnoteTitle;case"divider":return i.dividerTitle;case"drawing":return i.drawingTitle;case"drive":return i.driveTitle;case"embed":return i.embedTitle;case"encrypted_text":return i.encryptedTextTitle;case"equation":return i.equationTitle;case"excalidraw":return i.excalidrawTitle;case"factory":return i.factoryTitle;case"file":return i.fileTitle;case"figma":return i.figmaTitle;case"framer":return i.framerTitle;case"gist":return i.gistTitle;case"header":return i.headerTitle;case"hex":return i.hexTitle;case"image":return i.imageTitle;case"invision":return i.invisionTitle;case"link_to_collection":case"link_to_page":return i.linkToPageTitle;case"loom":return i.loomTitle;case"maps":return i.mapsTitle;case"miro":return i.miroTitle;case"mixpanel":return i.mixpanelTitle;case"numbered_list":return i.numberedListTitle;case"page":return i.pageTitle;case"pdf":return i.pdfTitle;case"quote":return i.quoteTitle;case"replit":return i.replitTitle;case"sketch":return i.sketchTitle;case"slide":return i.slideTitle;case"sub_header":return i.subHeaderTitle;case"sub_sub_header":return i.subSubHeaderTitle;case"tab":return i.tabTitle;case"table":return i.simpleTableTitle;case"table_of_contents":return i.tableOfContentsTitle;case"text":return i.textTitle;case"to_do":return i.toDoTitle;case"toggle":return i.toggleTitle;case"transcription":return i.transcriptionTitle;case"transclusion_container":case"transclusion_reference":return i.transclusionContainerTitle;case"tweet":return i.tweetTitle;case"typeform":return i.typeformTitle;case"video":return i.videoTitle;case"whimsical":return i.whimsicalTitle;case"copy_indicator":case"external_object_instance":case"external_object_instance_page":case"form":case"personal_home_page":case"person_profile":case"post":case"table_row":case"workflow":return;default:(0,o().HB)(e)}}},431481:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{cache:{}}}getBlockIdForSlug(e){return this.state.cache[e]}setBlockIdForSlug(e,t){this.state.cache[e]||this.setState({cache:{...this.state.cache,[e]:t}})}}const i=new o},433052:(e,t,n)=>{n.d(t,{Aj:()=>_,fm:()=>h,uv:()=>g,v4:()=>f,wA:()=>v});var o=()=>n(120739),i=()=>n(861017),r=()=>n(179034),a=()=>n(994310),s=()=>n(780054),l=()=>n(492414),c=()=>n(731320),d=()=>n(630116);const u="lastVisitedRoute",p="lastVisitedRouteUserId",m="lastVisitedRouteSpaceId";function g(e,t){const n=i().parseRoute({url:window.location.href,isMobile:e.device.isMobile,baseUrl:s().A.domainBaseUrl,publicDomainName:s().A.publicDomainName,protocol:s().A.protocol,currentUrl:window.location.href}),{route:o,userId:a}=b();("root"===n.name||"workflowTemplates"===n.name||"new"===n.name||"nativeTab"===n.name)&&o&&"page"===o.name&&o.blockId&&a===t&&new(d().Bv)(e,{table:r().ev,id:o.blockId,spaceId:o.spaceId}).load()}function f(e){const{route:t,userId:n}=b();if("page"===(null==t?void 0:t.name)&&t.blockId){return{url:(0,l().Ay)({fullyQualified:!1,store:new(d().Bv)(e,{table:r().ev,id:t.blockId,spaceId:t.spaceId},{userId:n}),scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0,chatThreadId:t.chatThreadId,workflowPrompt:t.workflowPrompt,workflowViewKey:t.workflowViewKey,workflowViewType:t.workflowViewType}),userId:n}}if("team"===(null==t?void 0:t.name))return{url:(0,o().a)({teamId:t.teamId}),userId:n};if("space"===(null==t?void 0:t.name)){return{url:(0,i().p0)({route:t}),userId:n}}return{}}async function v(e){const{route:t,userId:n}=b();let a,s;if(t)if("page"===t.name&&t.blockId){const o=new(d().Bv)(e,{table:r().ev,id:t.blockId,spaceId:t.spaceId},{userId:n});await o.load();c().qb(e,o)?(s=t.spaceId??o.getSpaceId(),a=s?i().nX(s):void 0):(a=(0,l().Ay)({fullyQualified:!1,store:o,scrollToBlockId:t.scrollToBlockId,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode,collectionViewId:t.collectionViewId,templateGalleryItem:t.templateGalleryItem,projectManagementLaunch:t.projectManagementLaunch,discussionId:void 0,pageVisitSource:void 0}),s=o.getSpaceId())}else"space"===t.name?(s=t.spaceId,a=(0,i().p0)({route:t})):"nativeTab"===t.name?s=t.spaceId:"team"===t.name&&(a=(0,o().a)({teamId:t.teamId}));return{url:a,userId:n,route:t,spaceId:s}}function h(e){const{route:t,userId:n,spaceId:o}=e;a().A.set(u,t),a().A.set(p,n),a().A.set(m,o)}function _(){a().A.remove(u),a().A.remove(p),a().A.remove(m)}function b(){return{route:a().A.get(u),userId:a().A.get(p),spaceId:a().A.get(m)}}},434663:(e,t,n)=>{n.d(t,{r:()=>d});n(296540);var o=()=>n(484714),i=()=>n(84817),r=()=>n(460292),a=()=>n(125565),s=()=>n(763071),l=()=>n(674276),c=n(474848);function d(e){const{children:t,iconGroup:n,overrideSize:d,error:u,errorId:p,direction:m}=e,g=(0,o().v3)();return(0,c.jsxs)(i().Y1,{style:{cursor:"default",...e.style},direction:m,align:"horizontal"===m?"center-left":"center",gap:"horizontal"===m?10:5,children:[(0,c.jsx)(r().Q,{iconGroup:n,variantName:"default",colorName:"secondary",overrideSize:d}),(0,c.jsx)(a().A,{isInline:!0,isMobile:g.device.isMobile,isSecondaryColor:!0,showTooltipWhenTruncated:!0,children:(0,c.jsxs)("div",{style:{display:"flex",flexDirection:"horizontal"===m?"row":"column",alignItems:"center",gap:"horizontal"===m?6:2,fontWeight:"initial"},children:[t,(0,s().o)(p)&&(0,c.jsx)(l().b,{error:u,errorId:p,enablePopup:!0})]})})]})}},435009:(e,t,n)=>{n.d(t,{Mu:()=>ie,VP:()=>ae,Vl:()=>ue,_r:()=>ce,aX:()=>se,eG:()=>re,kc:()=>ne,navigateOnBaseUrl:()=>ee,oo:()=>te,qf:()=>oe,sY:()=>le,up:()=>de});n(16280),n(898992),n(672577),n(814603),n(147566),n(198721);var o=()=>n(908006),i=()=>n(110750),r=()=>n(584262),a=()=>n(386164),s=()=>n(861017),l=()=>n(427704),c=()=>n(179034),d=()=>n(496603),u=()=>n(183558),p=()=>n(502492),m=()=>n(534177),g=()=>n(939768),f=()=>n(449506),v=()=>n(681445),h=()=>n(405981),_=()=>n(116008),b=()=>n(780054),y=()=>n(989423),S=()=>n(108944),w=()=>n(836251),k=()=>n(263711),I=()=>n(406792),x=()=>n(695625),A=()=>n(869562),C=()=>n(644914),T=()=>n(749687),M=()=>n(737230),P=()=>n(155959),B=()=>n(351360),R=()=>n(77246),E=()=>n(948914),D=()=>n(982254),N=()=>n(977390),L=()=>n(712505),O=()=>n(630116),U=()=>n(543491),F=()=>n(452939),V=()=>n(222917),j=()=>n(502626),z=()=>n(705540),H=()=>n(622232),W=()=>n(910302),q=()=>n(433052),K=()=>n(255460),G=()=>n(426116),$=()=>n(857783),Y=()=>n(755636),Q=()=>n(5705),Z=()=>n(151779),X=()=>n(537941);const J=[`${r().y8.MentionInPage}`,`${r().y8.LinkInPage}`,`${r().y8.PeekOpen}`,`${r().y8.Expand}`,`${r().y8.Duplicate}`,`${r().y8.Move}`,`${r().y8.PageTableOfContents}`];function ee(e){const t=function(e,t){try{const n=e.startsWith("/")?new URL(e,b().A.domainBaseUrl):new URL(e);if(t)for(const[e,o]of Object.entries(t))n.searchParams.append(e,o);return n.pathname+n.search+n.hash}catch{throw new Error(`${e} is neither a URL nor an absolute path`)}}(e.url,e.extraSearchParams);if(!e.openInNewTab)return te({...e,url:`${b().A.domainBaseUrl}${t}`});window.open(`${b().A.domainBaseUrl}${t}`,"_blank")}function te(e){var t,o,i;const{environment:l,openInNew:d,frontPreserveScrollPosition:y,callback:S}=e,{RouterStore:x,currentUser:P}=l,H=P.id,{savedSidebarExpandedStoreState:q}=L().default.state;q&&T().sidebarExpandedStore.setState(!0),k().g.setState({isOpen:!1});const K=x.state.route,G=s().parseRoute({url:e.url,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,isMobile:l.device.isMobile,protocol:b().A.protocol,currentUrl:window.location.href}),$=e.queryId??("page"===G.name&&G.queryId),{redirect:X,updateMobileTabbedRouterArgs:ee}=function(e,t){var n;const o={redirect:e.redirect,updateMobileTabbedRouterArgs:e.updateMobileTabbedRouterArgs};if(!w().Al(e.environment))return o;"login"!==t.name&&"logout"!==t.name&&"onboarding"!==t.name||(o.redirect=!0,o.updateMobileTabbedRouterArgs={...o.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});(null===(n=e.updateMobileTabbedRouterArgs)||void 0===n||!n.tabbedRouterStateAlreadyUpdated)&&(e.environment.TabbedRouterStore.state.modal??[]).length>0&&(o.redirect=!0,o.updateMobileTabbedRouterArgs={...o.updateMobileTabbedRouterArgs,clearNativeRootPageOverride:!0});return o}(e,G),te=g().bk(window.location.href),ne=g().bk(e.url),ie=Boolean((null==ne?void 0:ne.hostname)&&(ne.hostname!==(null==te?void 0:te.hostname)||(null==te?void 0:te.port)&&ne.port!==te.port));if("external"===G.name||ie)return void Y().f({environment:l,url:e.url,targetSelf:ie&&!d});const re=p().kb({schemeUrl:e.url,baseUrl:b().A.domainBaseUrl}),ae=g().ZO(e.url);let se=!1,le=e.makeTabActive;const ce=D().A.state.currentTab.isPinned,de=null===(t=E().A.state.preferences)||void 0===t?void 0:t.isPinnedTabNewTabEnabled;if(!d&&de&&ce&&s().WZ(K)&&("page"===G.name||"chat"===G.name||"team"===G.name)){var ue;const e="page"===K.name&&"page"===G.name&&K.blockId===G.blockId,t=Boolean(G.peekViewBlockId),n=Boolean(K.peekViewBlockId&&("chat"===G.name||"team"===G.name||(null===(ue=B().default.state.mainEditorCurrentBlockStore)||void 0===ue?void 0:ue.id)===G.blockId)&&!t);e||t||n||(se=!0,le=!0)}if("tab"===d||se){if(!l.device.isElectron||"page"!==G.name&&"chat"!==G.name&&"marketplace"!==G.name&&"team"!==G.name)Y().f({environment:l,url:re});else{const e="pageVisitSource"in G?G.pageVisitSource:void 0;z().openInNewTabAfterFlush(l,{url:ae,position:"after-children",makeTabActive:le,isNewPage:e===`${r().y8.Create}`})}return}if("window"===d&&l.device.isElectron&&("page"===G.name||"chat"===G.name||"marketplace"===G.name||"team"===G.name))return void z().openInNewWindow(ae);if("quickSearch"===K.name&&l.device.isElectron&&"chat"!==G.name)return void z().openQuickSearchResult(ae);const pe="page"===K.name&&"page"===G.name&&K.blockId===G.blockId,me="page"===K.name&&"page"===G.name&&K.spaceDomain!==G.spaceDomain&&(K.requestedOnPublicDomain||G.requestedOnPublicDomain),ge="page"===G.name?G.updateSidebarTab:void 0,fe="page"===G.name?G.blockId:void 0,ve=l.AppUpdateStore.state.appUpdate;if(!pe&&!e.redirect&&j().JM(l,ve))return void j().JG({environment:l,url:ae,version:ve.version,versionCreatedTime:ve.versionCreatedTime});if(_().A.isComposingNewDiscussion()){const e=_().A.state,t=e.open&&"comment"===e.content&&e.discussionInputStore||void 0;if(t)return void(async()=>{const{commentsDependency:e}=await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(24593),n.e(85314),n.e(23844),n.e(71115),n.e(4390),n.e(37125)]).then(n.bind(n,774733)),{discussionHelpers:o}=await e.load();(0,h().HR)({discussionInputStore:t,environment:l,discussionHelpers:o,reason:"navigating_away"})})()}if(X||pe||(Q().zd({historyId:x.state.id,currentUserId:H}),"page"===K.name&&B().default.state.mainEditorCurrentBlockStore&&R().Uv.isBlockModeInTranslation(B().default.state.mainEditorCurrentBlockStore.id)&&W().DL({environment:l,pageStore:B().default.state.mainEditorCurrentBlockStore,triggeredFrom:"navigation"}),void 0===ge&&(0,C().Nk)(l)&&(A().setUpdateExpand({environment:l,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),M().Ay.update((e=>({...e,canRender:!1})))),v().S.state.isOpen&&v().S.setState({isOpen:!1})),Q().b$(l),me)return void Y().f({environment:l,url:e.url,targetSelf:!0});const he=(0,u().Ay)();X?window.history.replaceState({id:he,currentUserId:l.currentUser.id},void 0,ae):window.history.pushState({id:he,currentUserId:l.currentUser.id},void 0,ae);const _e=Q().f0({historyId:x.state.id,currentUserId:H});if(Q().ke({historyId:he,historyIndex:X?_e:_e+1,currentUserId:H}),"pageVisitSource"in G&&(0,m().Xk)(J,G.pageVisitSource)&&F().R1(l,K,G),!pe&&"page"===K.name&&U().A.state&&(null===(o=U().A.state)||void 0===o?void 0:o.pageId)===K.blockId&&V().vl(l,U().A.state),l.device.isElectron&&D().A.update((e=>({...e,unauthorizedIframeUrls:[]}))),Z().Yw({environment:l,id:he,action:X?"replace":"push",href:ae,updateMobileTabbedRouterArgs:ee}).then((()=>{"page"===G.name&&G.blockId&&!pe&&$?U().A.setState({queryId:$,pageId:G.blockId,timeEntered:new Date}):U().A.reset()})).then((()=>{S&&S()})),"nativeTab"===G.name&&"assistant"===G.tab){const{currentSpaceStore:e}=B().default.state;e&&f().callApi({eventName:"warmVectorDBCache",environment:l,data:{spaceId:e.id},headers:(0,a().WS)({spaceId:e.id})})}if(pe||"nativeTab"===K.name&&"page"===G.name&&(null===(i=B().default.state.mainEditorCurrentBlockStore)||void 0===i?void 0:i.id)===G.blockId||"chat"===K.name&&"chat"===G.name){const e="chat"===G.name&&G.peekViewBlockId&&B().default.state.currentSpaceStore?O().Bv.createChildStore(B().default.state.currentSpaceStore,{table:c().ev,id:G.peekViewBlockId}):void 0;oe(l,e)}void 0!==ge&&Number.isFinite(ge)&&(A().setUpdateExpand({environment:l,isExpanded:!0,from:"page_grouped_notification_url",saveDetailsSidebarPreference:!1}),M().Ay.update((e=>({...e,openedOnBlockId:fe??e.openedOnBlockId,...M().Ay.createUpdateForNewCommentsSidebar(ge)})))),!y&&window.scrollTo(0,0),N().A.update((e=>({...e,isMeasuring:!0}))),I().default.DO_NOT_USE_markLegacy("initial_page_render_after_login")}function ne(e){te({environment:e,url:l().JZ.onboarding})}async function oe(e,t){const{RouterStore:n}=e,i=B().default.state.mainEditorCurrentBlockStore??t;if(i&&("page"===n.state.route.name||"chat"===n.state.route.name)){if(n.state.route.scrollToBlockId){const e=[n.state.route.scrollToBlockId];0===d().oE(x().T.findSelectablesFromIds(e)).length&&(await K().NH(i,e),await o().default.afterNextFlush())}H().$(e,{animateScrollToBlocks:!0,shouldScroll:!0})}}function ie(e){var t;const{environment:n,url:o}=e;if(!w().Al(n))return;const{TabbedRouterStore:r}=n,a=(0,i().Xz)(r.state);if("web"!==a.type)return;const l=s().parseRoute({url:o,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,isMobile:n.device.isMobile,protocol:b().A.protocol,currentUrl:window.location.href}),c=(null===(t=a.redirectedTo)||void 0===t?void 0:t.route)??a.route;if(l.name!==c.name)return;const d=g().ZO(e.url);a.redirectedTo?(a.redirectedTo.route=l,a.redirectedTo.url=d):(a.route=l,a.url=d)}async function re(e){const{environment:t,url:n,callbackType:o}=e,i=g().ZO(n);if(t.device.isNative)te({url:i,environment:t});else{const e="nativemailredirect"===o,n="nativecalendarredirect"===o,r=e||n,a=r?`${b().A.domainBaseUrl}${i}`:i,s=e?b().A.mail.protocol:n?b().A.calendar.desktopProtocol:b().A.protocol;window.location.href=g().O$(p().$J({httpUrl:a,protocol:s,includePort:r}),{di:await(0,y().TZ)(t)})}}async function ae(e){const{environment:t,blocks:n}=e,{mainEditorCurrentBlockStore:o,currentSpaceViewStore:i,currentUserSettingsStore:a,currentUserRootStore:s}=B().default.state,l=o&&n.find((e=>e.id===o.id));if(l&&i){const e=S().Nq(l,1);(0,P().T)("supportsNativeHome")?w().UL(t)?se(t):X().navigateToHomeTab(t):e?$().uK({environment:t,store:e,pageVisitSource:r().y8.LeaveOrRemove}):await G().tR({environment:t,spaceViewStore:i,userSettingsStore:a,userRootStore:s,pageVisitSource:r().y8.LeaveOrRemove,navigationType:"switchingToOrLoadingSpace"})}Boolean(n.find((e=>{var t;return e.id===(null===(t=L().default.peekTargetStore.state)||void 0===t?void 0:t.id)})))&&o&&$().uK({environment:t,store:o,pageVisitSource:r().y8.LeaveOrRemove})}function se(e){w().Al(e)?function(e){const{TabbedRouterStore:t}=e,n=t.state,o=(0,i().XB)(n);if(!o)return;const r=o.type;"native"===r?t.updateWithNativePage({page:o,clearPages:!1,navigationAction:"pop",navigationSource:"mobile-back-navigation"}):"web"===r?window.history.back():(0,m().HB)(r)}(e):window.history.back()}function le(){window.history.forward()}function ce(){const e=B().default.state.mainEditorCurrentBlockStore;return!!e&&Boolean(S().Nq(e,1))}function de(e){const t=B().default.state.mainEditorCurrentBlockStore;if(!t)return;const n=S().Nq(t,1);n&&$().uK({environment:e,store:O().Bv.createChildStore(n,n.pointer),pageVisitSource:r().y8.Breadcrumb})}function ue(e){const{url:t}=q().v4(e);te({url:t||l().JZ.root,environment:e})}},435345:(e,t,n)=>{n.d(t,{w:()=>o});const o=(0,n(583835).Dv)("duplicateBlock")},436371:(e,t,n)=>{function o(e){const{collectionContextStore:t}=e,{localResultStore:n,remoteRequestStore:o,remoteRequestStoreCallback:i,localResultStoreCallback:r}=t;i&&o.removeListener(i),r&&n.removeListener(r),t.infiniteScrollLongTaskObserver.disconnect()}n.d(t,{u:()=>o})},436572:(e,t,n)=>{n.d(t,{AC:()=>p,D6:()=>s,Kp:()=>d,N2:()=>l,Sy:()=>m,rL:()=>c,yq:()=>u});n(296540);var o=()=>n(183558),i=()=>n(104012),r=()=>n(666429),a=n(474848);function s(e){const t={...e,key:(0,o().Ay)()};r().Ay.setState({...r().Ay.state,currentItem:t}),"keep"!==t.durationMs&&setTimeout((()=>{r().Ay.state.currentItem===t&&"keep"!==r().Ay.state.currentItem.durationMs&&r().Ay.setState({...r().Ay.state,currentItem:void 0,shouldReset:!0})}),t.durationMs??r().ey)}function l(){r().Ay.setState({...r().Ay.state,currentItem:void 0})}function c(e){const{item:t,undoFunc:n}=e;s({...t,right:(0,a.jsx)(i().q6,{onUndo:n})})}function d(e){const{item:t}=e;s({...t,right:(0,a.jsx)(i().kP,{})})}function u(e){const{item:t}=e;s({...t,right:(0,a.jsx)(i().J$,{})})}function p(e){const{blockToOpenStore:t,item:n,performUndo:o,onOpenBlock:r}=e;s({...n,right:(0,a.jsx)(i().MZ,{blockToOpenStore:t,performUndo:o,onOpenBlock:r})})}function m(){r().Ay.state.shouldReset&&r().Ay.reset()}},436696:(e,t,n)=>{n.d(t,{X:()=>a});n(898992),n(672577);var o=()=>n(476492),i=()=>n(755022),r=()=>n(504066);function a(e){var t;const{environment:n,collectionContextStore:a,action:s,original_view_type:l,new_view_type:c,new_view_id:d,property_type:u,new_date_shift_mode:p,new_avoid_weekends:m,sort_direction:g,charts_analytics_context:f}=e,v=(0,o().sl)(a);if(!v||!v.view_type)return;const h=null==a||null===(t=a.collectionViewBlockStore())||void 0===t||null===(t=t.getCollectionViewStores())||void 0===t?void 0:t.find((e=>e.id===d)),_=null==h?void 0:h.getCollectionSource(),b="typed"===(null==_?void 0:_.type)?_.databaseType:void 0;(0,i().D)(n,{action:s,...v,view_type:v.view_type,original_view_type:l,new_view_type:c,new_view_id:d,new_database_type:b,property_type:u,new_date_shift_mode:p,new_avoid_weekends:m,charts_analytics_context:f}),(0,r().f)({collectionContextStore:a,action:s,from:"view_settings",property_type:u,view_type:v.view_type,original_view_type:l,new_view_type:c,sort_direction:g})}},436725:(e,t,n)=>{n.d(t,{e:()=>u});n(16280);var o=()=>n(134025),i=()=>n(179034),r=()=>n(439180),a=()=>n(496603),s=()=>n(246826),l=()=>n(319975),c=()=>n(751156),d=()=>n(630116);function u(e){const{environment:t,operation:n,transaction:u,inMemoryRecordCache:p}=e;if(n.pointer.table!==i().ev)throw new Error("Expected block operation");const m=new(d().Bv)(t,n.pointer,{inMemoryRecordCache:p});(0,o().$Y)(n)?function(e){const{environment:t,operation:n,store:o,transaction:i}=e;if("update"===n.command&&a().n4(n.path,["properties"])&&"title"in n.args){const{title:e,...r}=n.args;l().R9({environment:t,store:o.getBlockTitleStore(),value:e,transaction:i}),Object.keys(r).length>0&&s().zv({store:o.getPropertiesStore(),data:r,transaction:i})}else if("set"===n.command&&a().n4(n.path,["properties","title"]))l().R9({environment:t,store:o.getBlockTitleStore(),value:n.args,transaction:i});else{if("update"===n.command&&0===n.path.length&&"properties"in n.args||"set"===n.command&&a().n4(n.path,["properties"]))throw new Error("Woah woah woah - this is a collaborative app here. We can't just overwrite the entire properties object!");c().applyOperation({store:o,operation:n,transaction:i})}}({environment:t,operation:n,store:m,transaction:u}):(0,r().ph)(n)?c().applyCrdtTextOperation({store:m,operation:n,invertedOperation:void 0,transaction:u}):c().applyOperation({store:m,operation:n,transaction:u})}},437219:(e,t,n)=>{n.d(t,{$r:()=>f,Ax:()=>h,Hg:()=>p,Wn:()=>s,iZ:()=>v,ol:()=>u,qU:()=>a,uR:()=>l,v0:()=>c,vt:()=>m,vz:()=>g,wQ:()=>d});var o=()=>n(939768),i=()=>n(989423),r=()=>n(508496);function a(e,t){(0,i().u4)({environment:e,event:{eventName:"embed_block_action",eventProperties:t}})}function s(e,t){(0,i().u4)({environment:e,event:{eventName:"embed_block_resize",eventProperties:t}})}function l(e,t){(0,i().u4)({environment:e,event:{eventName:"download_file",eventProperties:t}})}function c(e,t){(0,i().u4)({environment:e,event:{eventName:"file_open_attempt",eventProperties:t}})}function d(e,t){const n=(0,o().bk)(t.url);r().default.logEvent("open_embed_menu"),(0,i().u4)({environment:e,event:{eventName:"open_embed_menu",eventProperties:{url_domain:null==n?void 0:n.hostname}}})}function u(e,t){let n;n=void 0===t.url?void 0:t.url.includes("mailto:")?t.url:(0,o().qg)(t.url).hostname,(0,i().u4)({environment:e,event:{eventName:"click_embed_menu",eventProperties:{url_domain:n,type:t.type,form_id:t.form_id,block_id:t.block_id}}})}function p(e,t){(0,i().u4)({environment:e,event:{eventName:"url_turned_bookmark",eventProperties:{}}})}function m(e,t){(0,i().u4)({environment:e,event:{eventName:"link_mention_shows_placeholder",eventProperties:t}})}function g(e,t){(0,i().u4)({environment:e,event:{eventName:"embed_type",eventProperties:t}})}function f(e,t){r().default.logEvent("embed_render",t.embedType),(0,i().u4)({environment:e,event:{eventName:"embed_render",eventProperties:t}})}function v(e,t){r().default.logEvent("embed_render_persisted",t.embedType),(0,i().u4)({environment:e,event:{eventName:"embed_render_persisted",eventProperties:t}})}function h(e,t){(0,i().u4)({environment:e,event:{eventName:"embed_client_error",eventProperties:t}})}},437487:(e,t,n)=>{n.d(t,{Ay:()=>c,NL:()=>a,QC:()=>o,mc:()=>r,pP:()=>i,yZ:()=>s});let o=function(e){return e.Share="share",e.Publish="publish",e}({}),i=function(e){return e.MainShareMenu="mainShareMenu",e.Invite="invite",e.Publish="publish",e}({}),r=function(e){return e.InviteBackButton="invite_back_navigation",e.ShareTopbarButton="share_topbar_button_click",e.ShareTab="share_tab_click",e.PublicPermissionLevelBanner="public_permission_level_banner",e}({}),a=function(e){return e.Notion="notion",e.Slack="slack",e.Google="google",e}({}),s=function(e){return e.Search="search",e.Message="message",e}({});class l extends(()=>n(757695))().default{getInitialState(){return{sessionId:n(206267).JW(),display:i.MainShareMenu,tab:o.Share,isInitialized:!1,source:r.ShareTopbarButton}}getIsInitialized(){return this.state.isInitialized}}const c=new l},438754:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(529543);class i extends(()=>n(757695))().default{getInitialState(){return{permission:n(75756).qV}}getId(){return this.getState().id}getPermission(){return this.getState().permission}setPermission(e){this.setState({...this.state,permission:e})}async setCookieConsent(e,t){this.setState(t),await(0,o().setCookieConsentCookie)(e,t)}clearCookieConsent(){this.reset(),(0,o().removeCookieConsentCookie)()}}const r=new i},439264:(e,t,n)=>{n.d(t,{Ay:()=>f,Bb:()=>p,Z0:()=>m});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(581454),n(908872);var o=n(296540),i=()=>n(847249),r=()=>n(40845),a=()=>n(496603),s=()=>n(534177),l=()=>n(60382),c=()=>n(953418),d=()=>n(145214),u=n(474848);const p={margin:0},m={display:"inline-flex",margin:0},g={position:"absolute",display:"flex",cursor:"grabbing"},f=function(e){const{className:t,childClassName:f,direction:v,keys:h,disableVerticalEdgeScroll:_,disableHorizontalEdgeScroll:b,disabled:y,id:S,role:w,"aria-label":k,shouldAnimateDrop:I,draggingStyle:x,draggingStyleForNonDraggedItems:A,getInvalidDropIndices:C,forceDragKeyIndex:T}=e,M=(0,o.useRef)(null),P=(0,o.useRef)(),[B,R]=(0,o.useState)(null),E=(0,i().uB)(e.store,n(170253).A),D=(0,i().O$)(E),{draggingKey:N,startKeyPosition:L}=D.isDragging?D:{draggingKey:void 0,startKeyPosition:void 0},O=(0,i().K8)((()=>{if(!N||!(0,s().O9)(L))return new Set;const e=(null==C?void 0:C(N))??new Set;if(0===e.size)return e;const t=new Set;for(const n of e){const e=n<=L?n:n-1;t.add(e)}return t}),[N,C,L]),U="horizontal"===v,F=e=>(0,s().O9)(T)?T:e.currentKeyPosition,V=(0,o.useMemo)((()=>"function"==typeof f?f:()=>f),[f]),j={...U?m:p,...D.isDragging&&{position:"relative",zIndex:1,width:D.savedContainerRect.width,height:D.savedContainerRect.height},...e.style};function z(e){return"string"==typeof e?e:e.key}const H=(t,n)=>{const{renderKey:o,direction:i,hoverCursorStyleOverride:a}=e,l=z(t),c=e.keys.map(z),p=o(l,n,n===c.length-1),m=V(l,n,n===c.length-1);if(D.isDragging&&D.draggingKey===l){const{savedKeyRects:e,savedContainerRect:t,currentXOffset:o,currentYOffset:a}=D,s=e[n];let c,f;"vertical"===i?(c=(0,r().A)(s.top+a,t.top,t.top+t.height-s.height)-t.top,f=s.left-t.left):(c=s.top-t.top,f=(0,r().A)(s.left+o,t.left,t.left+t.width-s.width)-t.left);const v={...g,left:f,width:s.width,height:s.height,zIndex:1,...x};return(0,u.jsx)(d().A,{skip:!I||"vertical"!==i,animate:{translateY:(null==B?void 0:B.top)??c},config:{duration:B?300:0},onAnimationEnd:()=>{B&&W()},className:m,style:v,children:p},l)}if(D.isDragging){const e=F(D),{savedKeyRects:t,savedContainerRect:o,startKeyPosition:r,draggingKey:a}=D,s=t[c.indexOf(a)];if(!s)return null;let f=0,v=0;e!==r&&n>=e&&n<r?"vertical"===i?v=s.height:f=s.width:e!==r&&n<=e&&n>r&&("vertical"===i?v=-s.height:f=-s.width);const h=t[n];return h?(0,u.jsx)(d().A,{animate:{translateX:h.left-o.left+f,translateY:h.top-o.top+v,width:h.width,height:h.height},className:m,style:{...g,...A?x:{}},children:p},l):null}return(0,u.jsx)("div",{className:m,style:{display:"flex",flexDirection:"vertical"===e.direction?"column":"horizontal"===e.direction?"row":(0,s().HB)(e.direction),cursor:y?void 0:a||"grab"},children:p},l)},W=()=>{if(R(null),D.isDragging){const t=F(D),{keys:n,onDrop:o}=e,{startKeyPosition:i}=D,r={key:z(n[i]),startPosition:i,endPosition:t};if(i!==t){const e=a().o8(n);e.splice(t,0,e.splice(i,1)[0]),o(e.map(z),r)}e.onDragEnd&&e.onDragEnd(r),E.reset()}else e.onClick?e.onClick(D.willDrag?D.draggingKey:void 0):e.onDragEnd&&e.onDragEnd()};function q(){const{direction:t}=e;return!P.current&&M.current&&(P.current="vertical"===t?(0,c().NM)(M.current):(0,c().T8)(M.current)),P.current}const K=y?{}:{onDraggableDragCancel:()=>{var t;D.isDragging&&E.reset(),null==e||null===(t=e.onDragCancel)||void 0===t||t.call(e)},onDraggableDragEnd:()=>{if(I&&"vertical"===v||W(),D.isDragging&&I&&"vertical"===v){const{savedContainerRect:e,savedKeyRects:t,startKeyPosition:n,draggingKey:o}=D,i=F(D),a=t[i],s=t[h.indexOf(o)],l=i>n?t.reduce(((e,t,n)=>n<=i?t.height+e:e),0)-s.height:a.top-e.top;l===(0,r().A)(s.top+D.currentYOffset,e.top,e.top+e.height-s.height)-e.top?W():R({top:l})}},onDraggableDragStart:t=>{const{keys:o}=e,i=M.current;if(!i)return;if(!(i instanceof Element))return;const r=n(713972).EV(t.target,(e=>e.parentNode===i));if(r){const t=n(634201).PE(i.children).indexOf(r),a=o[t];if("object"==typeof a&&!a.draggable)return;const s=i.getBoundingClientRect(),l=o.map(((e,t)=>i.children[t].getBoundingClientRect())),c=q();if(c){const n=z(o[t]);e.onDraggingKeyChanged&&e.onDraggingKeyChanged(n),E.setState({isDragging:!1,willDrag:!0,currentXOffset:0,currentYOffset:0,draggingKey:n,startKeyPosition:t,startScrollX:c.scrollLeft,startScrollY:c.scrollTop,currentKeyPosition:t,savedContainerRect:s,savedKeyRects:l})}}},onDraggableDragMove:t=>{var o;!D.isDragging&&D.willDrag&&D.draggingKey&&(0,l().A)(t.startX,t.startY,t.currentX,t.currentY)>=n(592678).tC[t.device]&&(null===(o=window.getSelection())||void 0===o||o.removeAllRanges(),E.setState({currentXOffset:D.currentXOffset,currentYOffset:D.currentYOffset,startScrollX:D.startScrollX,startScrollY:D.startScrollY,startKeyPosition:D.startKeyPosition,currentKeyPosition:D.currentKeyPosition,savedKeyRects:D.savedKeyRects,savedContainerRect:D.savedContainerRect,draggingKey:D.draggingKey,isDragging:!0,willDrag:!1}),e.onDragStart&&e.onDragStart());const i=q();if(D.isDragging&&i){const{savedKeyRects:e,startScrollX:n,startScrollY:o}=D,r=i.scrollLeft-n,s=i.scrollTop-o,c=e.map(((e,t)=>({rect:e,index:t}))),d=a().wq(c,(e=>{let{rect:n,index:o}=e;return(0,l().A)(t.currentX+r,t.currentY+s,n.left+n.width/2,n.top+n.height/2)+(O.has(o)?1e6:0)}));if(d){const n=e.indexOf(d.rect);E.setState({...D,currentXOffset:t.diffX+r,currentYOffset:t.diffY+s,currentKeyPosition:n})}}}};return(0,u.jsx)(n(603820).A,{...K,forceTouch:!0,allowDragWhileTextEditing:!0,disableVerticalEdgeScroll:_||"horizontal"===v,disableHorizontalEdgeScroll:b||"vertical"===v,render:e=>(0,u.jsx)("div",{ref:M,id:S,role:w,"aria-label":k,style:j,className:t,onClick:e=>{e.stopPropagation()},...e,children:h.map(H)})})}},439270:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(354520),n(672577);class o extends(()=>n(959180))().A{findCellsInRowFromStore(e,t,n){return this.filter((o=>{const i=o.getProps();return e?i.store===e:i.simpleTableStore===t&&i.rowIndex===n}))}findCellsInColumnFromStore(e,t){return this.filter((n=>{const o=n.getProps();return o.simpleTableStore===e&&("number"==typeof t&&o.columnIndex===t||"string"==typeof t&&o.columnID===t)}))}findCellFromTextStore(e){return this.find((t=>t.getTextStore()===e))}findCellFromElement(e,t){return this.find((n=>n.getProps().simpleTableStore===t&&n.getNode()===e))}}const i=new o},440209:(e,t,n)=>{n.d(t,{Mq:()=>s,f1:()=>l});var o=()=>n(186445),i=()=>n(733848),r=()=>n(680074),a=()=>n(508496);function s(e){var t;const{environment:n,experimentId:o}=e,i=(0,r().R$)(n);if(!i)return!1;const a=null===(t=i.getSettings())||void 0===t?void 0:t.exposed_to_adoption_user_journey_experiment,s=null==a?void 0:a[o];return Boolean(s)}function l(e){const{environment:t,variant:n,experimentId:l,isUserWorkspaceOwner:c,isDesktop:d,experimentStartDate:u}=e,p=function(e){var t;const{environment:n,experimentId:l,isUserWorkspaceOwner:c,isDesktop:d}=e;let u;try{u=(0,i().oM)(n)}catch(_){return!1}if(!u)return!1;if(!d)return!1;const p=u.getCreatedTime(),m=s({environment:n,experimentId:l}),g=(0,o()._m)(n);if(!g)return!1;const f=g.id,v=u.getCreatedById(),h=(0,r().R$)(n);return!!h&&function(e){let{isUserPreviouslyExposed:t,currentUserId:n,spaceCreatedById:o,userSignUpDate:i,workspaceCreatedDate:r,experimentStartDate:a,isUserWorkspaceOwner:s}=e;return!!t||!!(i&&a&&r&&a<=i&&a<=r&&s&&n===o)}({isUserPreviouslyExposed:m,currentUserId:f,spaceCreatedById:v,userSignUpDate:null===(t=h.getSettings())||void 0===t?void 0:t.signup_time,isUserWorkspaceOwner:c,experimentStartDate:e.experimentStartDate??a().default.getConfigKey("adoption_stack_ranking_experiment_start",l),workspaceCreatedDate:p})}({environment:t,experimentId:l,isUserWorkspaceOwner:c,isDesktop:d,experimentStartDate:u});if(!p)return!1;const m=a().default.getEligibleGroup({experimentId:l,defaultGroup:"control"});return"control"!==m&&(Array.isArray(n)?n.includes(m):m===n)}},441199:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=()=>n(534177);class i extends(()=>n(757695))().default{getInitialState(){return{mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},openState:"closed",contentType:"none",isResizerHovered:!1,isResizing:!1,isMouseEntered:!1,flowId:n(206267).JW(),autoClosed:!1}}isOpen(){const{openState:e}=this.state;switch(e){case"open":case"opening":return!0;case"closed":case"closing":return!1;default:(0,o().HB)(e)}}isVisible(){const{openState:e}=this.state;switch(e){case"open":case"opening":case"closing":return!0;case"closed":return!1;default:(0,o().HB)(e)}}isTransitioningState(){const{openState:e}=this.state;switch(e){case"opening":case"closing":return!0;case"open":case"closed":return!1;default:(0,o().HB)(e)}}isPeekDismissableState(){return"peek"===this.state.mode&&this.isVisible()}isPanelPinnedState(){return"panel"===this.state.mode&&this.isOpen()}isTogglingToPanelModeState(){return"open"===this.state.openState&&"panel"===this.state.mode}}const r=new i},441265:(e,t,n)=>{n.d(t,{oA:()=>r});var o=()=>n(645873);const i={aliasBlock:new(o().O2)("aliasBlock",(()=>Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(85515),n.e(1213),n.e(17989),n.e(90625),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(65999),n.e(88488)]).then(n.bind(n,388138)))),aliasBlockPopupMenu:new(o().O2)("aliasBlockPopupMenu",(()=>Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(85515),n.e(1213),n.e(17989),n.e(90625),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(65999),n.e(88488)]).then(n.bind(n,176789))))},r=(0,o().jQ)(i.aliasBlock,(e=>e.default));(0,o()._h)(i.aliasBlockPopupMenu,(e=>e.default))},441467:(e,t,n)=>{n.d(t,{DZ:()=>U,Ek:()=>H,hN:()=>V,i5:()=>j,of:()=>F});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949);var o=()=>n(700500),i=()=>n(179034),r=()=>n(197959),a=()=>n(161479),s=()=>n(798880),l=()=>n(919709),c=()=>n(878523),d=()=>n(112873),u=()=>n(383594),p=()=>n(246826),m=()=>n(332751),g=()=>n(538527),f=()=>n(751156),v=()=>n(892632),h=()=>n(594794),_=()=>n(972435),b=()=>n(962845),y=()=>n(299545),S=()=>n(347199),w=()=>n(953418),k=()=>n(906537),I=()=>n(486666),x=()=>n(372154),A=()=>n(630116),C=()=>n(404783),T=()=>n(555776),M=()=>n(116008),P=()=>n(543225),B=()=>n(59320),R=()=>n(528787),E=()=>n(681634),D=()=>n(583824),N=()=>n(36088),L=()=>n(807060),O=()=>n(405981);const U=(0,n(959013).YK)({emojiPicker:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"},emojiTitle:{id:"recordIcon.emojiTab.title",defaultMessage:"Emoji"}});function F(e){const{environment:t,blockStore:n,multiSelection:o,rect:i,formulasModule:r}=e;let a=i;if(!a){const e=k().get();if(!e)return;a=k().getRect(e)}if(!a)return;const s=a.width,l=a.height,c=a.right-s;M().A.setState({open:!0,rect:new DOMRect(c,a.top,s,l),type:"inline",content:"reaction",blockStore:n,blockId:n.id,multiSelection:o,emoji:void 0}),u().W(t,{originGap:4,originRect:a,popupWidth:I().jv,popupHeight:I().GF,isSmallWidth:!1,title:_().A.formatMessage(U.emojiPicker),currentTab:"emoji",onCancel:()=>M().A.reset(),tabs:[{type:"emoji",title:_().A.formatMessage(U.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=M().A.state;n.open&&"reaction"===n.content&&(M().A.setState({...n,emoji:e}),j({environment:t,formulasModule:r}),u().I())}}]})}async function V(e){var t;const{environment:n,blockStore:o,multiSelection:i,rect:r,from:s,property_id:l}=e;if(M().A.hasContent())return void(0,O()._y)({environment:n,reason:"starting_new"});let d=r;if(!d){const e=k().get();if(!e)return;d=k().getRect(e)}if(!d)return;const u=d.width,p=d.height,g=d.right-u,f=new(C().A)(n,(0,a().e)(o.pointer.spaceId));M().A.setState({open:!0,rect:new DOMRect(g,d.top,u,p),type:"inline",content:"comment",blockStore:o,lastKnownBlockStore:o,blockId:o.id,multiSelection:i,lastEditables:(0,b().$W)(i),discussionInputStore:f,property_id:l,from:s}),w().VG({element:null===(t=S().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),T().A.setActiveWithSource("text_annotation"),m().I(),await(0,N().M)({discussionInputStore:f,environment:n}),c().z0(n,{from:s})}function j(e){const{environment:t,allowActionsWhileCommenting:n,skipOpeningDiscussion:a,formulasModule:u}=e,p=M().A.state;if(p.open){const e="comment"===p.content?p.property_id:void 0,m=M().A.getBlockStore()??M().A.getLastKnownBlockStore();if(M().A.hasContent()&&(!n||m))if("inline"===p.type)f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:a=>{const s=function(e){const{environment:t,multiSelection:n,transaction:a,allowActionsWhileCommenting:s}=e,{id:c}=t.currentUser;if(!c)return;const d=s?M().A.getLastSelectedEditables():(0,b().$W)(n).filter((e=>{let{store:t}=e;return t.table===i().ev}));if(!d||0===d.length)return;const u=d[0].store.getRecordStoreAtRootPath(),p=(0,h().Z1)({environment:t,table:r().$Y,spaceId:u.pointer.spaceId}),m=[],f=new Set;d.forEach(((e,n)=>{let{store:i,selection:r}=e;f.add(i.id);const s=i.getRecordStoreAtRootPath();if(!(s instanceof A().Bv))return;const c=s.getType(),d=s.getFormat();if(c&&(0,o().pD)(c,d))return;let u=i.getValue();const v=l().xbM(u,r);g().Mw({environment:t,store:i,selection:v,annotation:[l().Ifu.Discussion,p],transaction:a}),u=i.getValue();const h=l().Ffo(u,v.startIndex,v.endIndex),_=0===n?[]:[l().Ey_("\n")];m.push(..._,...h)}));const v=(0,b().ZS)({multiSelection:n,filterCommonAncestors:!1,focus:void 0});if(v)for(const i of v.stores){if(f.has(i.id))continue;const e=i.getType(),t=i.getFormat();e&&(0,o().pD)(e,t)||(0,P().B)({blockStore:i,discussionId:p,transaction:a})}return{blockStore:u,context:m,discussionId:p}}({environment:t,multiSelection:p.multiSelection,transaction:a,allowActionsWhileCommenting:n});if(!s)return;const{context:d,blockStore:u,discussionId:f}=s;if("comment"===p.content){const o=p.discussionInputStore.state.textStore.getValue()||[],i=p.discussionInputStore.state.files,{discussionStore:r,commentStore:s}=(0,B().G)({createDiscussionArgs:{type:"default",context:d,property_id:e},blockStore:u,environment:t,transaction:a,commentTextValue:o,files:v().JC(i),discussionId:f}),{property_type:l,collection_id:g,collection_view_id:h,view_type:_,collection_view_block_id:b}=(0,L().q)(e,m);c().bJ(t,{discussion_id:r.id,discussion_type:r.getType(),comment_id:s.id,parent_block_id:r.getParentId(),from:M().A.state.open&&"comment"===M().A.state.content?M().A.state.from:void 0,property_id:e,property_type:l,collection_view_id:h,view_type:_,collection_id:g,collection_view_block_id:b}),n&&x().A.addNewDiscussionId(f)}else p.emoji&&z({context:d,blockStore:u,environment:t,transaction:a,icon:p.emoji,discussionId:f})},skipUpdatingEditedMetadata:!0});else if("block"===p.type)if("comment"===p.content){const o=p.discussionInputStore.state.textStore.getValue()||[],i=p.discussionInputStore.state.files;n?m&&f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,D().i)({environment:t,type:"default",blockStore:m,commentTextValue:o||[],files:i,transaction:n,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0}):f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDiscussion",environment:t,canUndo:!0,perform:n=>{(0,D().i)({environment:t,type:"default",blockStore:p.blockStore,commentTextValue:o||[],files:i,transaction:n,property_id:e,formulasModule:u})},skipUpdatingEditedMetadata:!0})}else{const e=t.currentUser.id,{emoji:n,blockStore:o}=p,i=y().O3(o,{recursivelyLoadAllDiscussions:!1}).find((e=>e.getReactions().length>0));n&&e&&f().createAndCommit({userAction:"newDiscussionMenuActions.submitNewDefaultDiscussion.addReaction",environment:t,canUndo:!0,perform:r=>{null!=i&&i.isDefined()?R().createReaction({environment:t,transaction:r,store:i,icon:n,currentActorPointer:{table:s().oo,id:e},discussionLocation:"block_menu"}):z({context:void 0,blockStore:o,environment:t,transaction:r,icon:n})},skipUpdatingEditedMetadata:!0})}(0,E().c)(t);const _=n?m&&m.getAssociatedCollectionStore():p.blockStore.getAssociatedCollectionStore();a||e||!_||d().B4({environment:t,blockStore:n?m??p.blockStore:p.blockStore,shouldFocusDiscussion:!0,analyticsFrom:"db_page_comments",rect:M().A.state.rect,recursivelyLoadAllDiscussions:!1})}}function z(e){const{context:t,blockStore:n,environment:o,transaction:i,icon:l}=e,c=e.discussionId??(0,h().Z1)({environment:o,table:r().$Y,spaceId:n.pointer.spaceId});if(void 0===o.currentUser.id)return;const d=p().vt({environment:o,table:"discussion",args:{type:"default",id:c,parent:n.pointer,context:t,space_id:(0,a().e)(n.pointer.spaceId)},inMemoryRecordCache:n.inMemoryRecordCache,transaction:i});(0,P().B)({transaction:i,blockStore:n,discussionId:d.id});const u={table:s().oo,id:o.currentUser.id};return R().createReaction({environment:o,transaction:i,store:d,icon:l,currentActorPointer:u,discussionLocation:"block_menu"}),d}function H(e){const{environment:t}=e;if(!t.currentUser.id)return;const n=M().A.getPropertyId();if(n){var i;const e=null===(i=M().A.getBlockStore())||void 0===i?void 0:i.getPropertyStore(n);if(e)return{blockStore:e,context:e.getValue()}}const r=M().A.getLastSelectedEditables();if(!r||0===r.length)return;const a=r[0].store.getRecordStoreAtRootPath(),s=[],c=new Set;return r.forEach(((e,t)=>{let{store:n,selection:i}=e;c.add(n.id);const r=n.getRecordStoreAtRootPath();if(!(r instanceof A().Bv))return;const a=r.getType(),d=r.getFormat();if(a&&(0,o().pD)(a,d))return;const u=n.getValue(),p=l().xbM(u,i),m=l().Ffo(u,p.startIndex,p.endIndex),g=0===t?[]:[l().Ey_("\n")];s.push(...g,...m)})),{blockStore:a,context:s}}},441738:(e,t,n)=>{n.d(t,{Mc:()=>r,Nf:()=>l,Of:()=>i,dx:()=>a,hq:()=>s});n(16280),n(898992),n(672577),n(737550);var o=()=>n(416845);const i=["ai","sites_custom_hostnames"],r=["ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly"],a=["ai_add_on_standard_sales_assisted","ai_add_on_standard_sales_assisted_eur","ai_add_on_standard_sales_assisted_gbp","ai_add_on_standard_sales_assisted_jpy","ai_add_on_standard_sales_assisted_krw","ai_add_on_employee_discount_monthly","ai_add_on_employee_discount_yearly","ai_add_on_marketing_discount_monthly","ai_add_on_marketing_discount_yearly","sites_custom_hostnames_add_on_sales_assisted_gbp","sites_custom_hostnames_add_on_sales_assisted_usd","sites_custom_hostnames_add_on_sales_assisted_eur","sites_custom_hostnames_add_on_sales_assisted_jpy","sites_custom_hostnames_add_on_sales_assisted_krw","ai_add_on_standard_trial_monthly_usd","ai_add_on_standard_trial_yearly_usd","ai_add_on_standard_trial_monthly_eur","ai_add_on_standard_trial_yearly_eur","ai_add_on_standard_trial_monthly_gbp","ai_add_on_standard_trial_yearly_gbp","ai_add_on_standard_trial_monthly_jpy","ai_add_on_standard_trial_yearly_jpy","ai_add_on_standard_trial_monthly_krw","ai_add_on_standard_trial_yearly_krw",...["ai_add_on_standard_monthly_10","ai_add_on_standard_monthly_eur","ai_add_on_standard_monthly_gbp","ai_add_on_standard_monthly_jpy","ai_add_on_standard_monthly_krw","ai_add_on_standard_yearly_96","ai_add_on_standard_yearly_eur","ai_add_on_standard_yearly_gbp","ai_add_on_standard_yearly_jpy","ai_add_on_standard_yearly_krw","sites_custom_hostnames_add_on_monthly_usd","sites_custom_hostnames_add_on_yearly_usd","sites_custom_hostnames_add_on_monthly_eur","sites_custom_hostnames_add_on_yearly_eur","sites_custom_hostnames_add_on_monthly_gbp","sites_custom_hostnames_add_on_yearly_gbp","sites_custom_hostnames_add_on_monthly_jpy","sites_custom_hostnames_add_on_yearly_jpy","sites_custom_hostnames_add_on_monthly_krw","sites_custom_hostnames_add_on_yearly_krw"]];function s(e){return i.some((t=>t===e))}function l(e){return e===o()._D_}Error},443002:(e,t,n)=>{n.d(t,{H:()=>a});n(898992),n(672577);var o=()=>n(84520),i=()=>n(294712),r=()=>n(630116);function a(e){let{spaceStore:t,userId:n,environment:a}=e;const s=new(r().dZ)(a,{table:i().GD,id:n}).getSpaceViewPointers().find((e=>e.spaceId===t.id));return s?r().vH.createChildStore(t,{id:s.id,table:o().mu,spaceId:t.id}):void 0}},443120:(e,t,n)=>{n.d(t,{Ht:()=>g,ed:()=>f,uS:()=>v});n(814603),n(147566),n(198721);var o=()=>n(700500),i=()=>n(386164),r=()=>n(161479),a=()=>n(919709),s=()=>n(763824),l=()=>n(722101),c=()=>n(351360),d=()=>n(449506),u=()=>n(246826),p=()=>n(319975),m=()=>n(751156);async function g(e){const{store:t,url:n,environment:l,teamId:g}=e,f=void 0!==e.transformTimeout?e.transformTimeout:3e3,{serverCommitResult:v}=m().createAndCommit({userAction:"bookmarkBlockActions.createBookmark",environment:l,canUndo:!0,perform:e=>{u().zv({store:t.getPropertiesStore(),data:{link:a().x9d(n)},transaction:e}),p().R9({environment:l,store:t.getBlockTitleStore(),value:a().x9d(n),transaction:e})}}),{winner:h,rest:_}=await s().O4([v,s().wR(f)]);if(1===h&&(await async function(e,t){const{serverCommitResult:n}=m().createAndCommit({userAction:"bookmarkBlockActions.transformIntoBookmark",environment:e,canUndo:!0,perform:e=>{u().zv({store:t,data:{type:o().xd.bookmark},transaction:e})}});await n}(l,t),await _),g){const{currentSpaceStore:e}=c().default.state;await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"team-invite-bookmark",block:{id:t.id,spaceId:(0,r().e)(t.pointer.spaceId)},url:n,teamId:g,spaceId:e&&e.id},headers:(0,i().WS)({spaceId:(0,r().e)(t.pointer.spaceId)})})}else await d().callApi({eventName:"setBookmarkMetadata",environment:l,data:{type:"external-bookmark",block:{id:t.id,spaceId:(0,r().e)(t.pointer.spaceId)},url:n},headers:(0,i().WS)({spaceId:(0,r().e)(t.pointer.spaceId)})})}function f(e){var t;const{transaction:n,blockStore:o,parentBlockStore:i,token:r}=e,{tokenIndex:a}=r;if(!o.isDefined())return;const s=null===(t=i.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;p().eF({block:i,editorMode:"default",transaction:n,tokenIndex:a})&&l().WH({parentStore:s,insertStore:o,afterStore:i,transaction:n})}async function v(e){const{environment:t,blocks:n}=e,i=n[0],r=i.getPropertyValue("link");if(!r)return;const s=r[0][0];await(async e=>{var n,o;return await d().callApi({eventName:"getDataForLinkMention",environment:t,data:{url:e,spaceId:(null===(n=c().default.state.currentSpaceStore)||void 0===n?void 0:n.id)??(null===(o=c().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.getSpaceId()),source:"bookmark_to_link_mention"}})})(s).then((e=>{m().createAndCommit({userAction:"bookmarkBlockActions.transformBookmarkToLinkMention",environment:t,canUndo:!0,perform:n=>{if("success"===e.type){const l=e.data;if("error"in l){const e=a().wmz(a().gru({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().zv({store:i,data:{type:o().xd.text},transaction:n}),p().R9({environment:i.environment,store:i.getBlockTitleStore(),value:[e],transaction:n})}else{var r;const{title:e,description:c,author_name:d,provider_name:m,images:g,favicon_url:f,iframe:v,height:h,padding:_,padding_top:b}=l,y=a().wmz(a().gru({href:s,title:e||(m||new URL(s).hostname),description:c,link_author:d,link_provider:m,thumbnail_url:g&&g.length>0?null===(r=g[0])||void 0===r?void 0:r.url:void 0,icon_url:f,iframe_url:v,height:h,padding:_,padding_top:b}));u().zv({store:i,data:{type:o().xd.text},transaction:n}),p().R9({environment:t,store:i.getBlockTitleStore(),value:[y],transaction:n})}}else{const e=a().wmz(a().gru({href:s,title:s.includes("mailto:")?s:new URL(s).hostname}));u().zv({store:i,data:{type:o().xd.text},transaction:n}),p().R9({environment:t,store:i.getBlockTitleStore(),value:[e],transaction:n})}u().zv({store:i,data:{type:o().xd.text},transaction:n})}})}))}},443616:(e,t,n)=>{n.d(t,{DX:()=>k,II:()=>S,J1:()=>I,Rw:()=>B,kl:()=>P,nd:()=>x,qC:()=>A,qW:()=>w});n(581454),n(296540);var o=()=>n(100622),i=()=>n(496603),r=()=>n(896628),a=()=>n(906590),s=()=>n(482287),l=()=>n(751156),c=()=>n(491073),d=()=>n(89924),u=()=>n(878377),p=()=>n(27178),m=()=>n(299545),g=()=>n(792609),f=()=>n(508496),v=()=>n(77272),h=()=>n(630116),_=()=>n(416726),b=n(474848);const y=(0,n(959013).YK)({lastUsedHighlightTitle:{id:"action.lastUsedHighlight.title",defaultMessage:"Last used"},lastUsedHighlightKeywords:{id:"action.lastUsedHighlight.fuzzySearchKeywords",defaultMessage:"Color last used"},highlightName:{id:"action.highlight.name",defaultMessage:"Highlight"}});function S(e){const{itemRenderer:t}=e;return(0,_().gy)({key:"text color actions",title:_().AY.colorSection,render:e=>(0,b.jsx)(d().A,{...e}),actions:o().N.map((e=>T({blockColor:e,itemRenderer:t})))})}const w=S({itemRenderer:e=>{const{color:t,overrideDisplayName:n,selected:o}=e;return(0,b.jsx)(c().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:n,selected:o})}});function k(e){const{itemRenderer:t}=e;return(0,_().gy)({key:"background color actions",title:_().AY.backgroundSection,overrideSearchTitle:_().AY.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:o().AQ.map((e=>T({blockColor:e,itemRenderer:t})))})}const I=k({itemRenderer:e=>{const{color:t,overrideDisplayName:n,selected:o}=e;return(0,b.jsx)(c().Ay,{...e.menuListItemProps,color:t,overrideDisplayName:n,selected:o})}}),x=(0,_().gy)({key:"background color selection actions",title:_().AY.backgroundSection,overrideSearchTitle:_().AY.backgroundSectionKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:o().AQ.map((e=>M(e)))}),A=(0,_().gy)({key:"text color selection actions",title:_().AY.colorSection,render:e=>(0,b.jsx)(d().A,{...e}),actions:o().N.map((e=>M(e)))});function C(){return[u().p2L,u().AU6(u().vEP),g().Y,u().My5,u().AU6(u().Cuf),u().P5O]}function T(e){const{blockColor:t,overrideKey:n,overrideDisplayName:c,itemRenderer:d}=e,u=c||(0,p().qo)(t),g=(0,_().Ls)({key:`color ${n||t}`,displayName:u,analyticsName:u.defaultMessage,analyticsActionType:"change_block_color",fuzzySearchKeywords:(0,_().Mf)(t),validators:C(),track:{actionName:"set_color"},action:(e,n,c)=>{let{blocks:d,environment:u}=n;const p=f().default.checkGate({gateName:"updated_color_picker"});a().Q(t,!p);const{serverCommitResult:g}=l().createAndCommit({userAction:"actionRegistry.createBlockColorAction",environment:u,canUndo:!0,perform:e=>{if(1===d.length&&d[0].isFirstBlockInCalloutV2Block()){const e=d[0].getParentStore();e instanceof h().Bv&&(d=[e])}(0,o().Cg)(t)||(s().Vd({environment:u,annotationKey:"hb",blocks:d,transaction:e}),s().Vd({environment:u,annotationKey:"hf",blocks:d,transaction:e}),r().zA({stores:i().qI(d,(e=>(0,m().zo)({blockStore:e,transclusionReferences:"omit",childPages:"omit"}))),update:{block_color:void 0},transaction:e})),r().zA({stores:d,update:{block_color:t},transaction:e})}});g.then(e)},closeParentMenu:!0,render:(e,n)=>{let{blocks:o}=n;const i=t===(o.length>0?o[0].getFormat().block_color:"default");return d({menuListItemProps:e,color:t,selected:i,overrideDisplayName:g.displayName})},nativeImageReference:e=>{let{environment:o}=e;return(0,_().Kg)(o,t,n)}});return g}function M(e,t,o){const i=o||(0,p().qo)(e),r=(0,_().Ls)({key:`color ${t||e}`,displayName:i,analyticsName:i.defaultMessage,fuzzySearchKeywords:(0,_().Mf)(e),validators:C(),action:async t=>{let{blocks:o,environment:i}=t;var r;n(986260).jk(i)&&await(null===(r=i.NativeMobileActionBarStore)||void 0===r?void 0:r.clearNativeActionMenuAndRestoreSelectionIfNecessary());const l=f().default.checkGate({gateName:"updated_color_picker"});a().Q(e,!l),s().po({environment:i,annotation:["h",e]}),(0,n(21869).s)(i,{action:"h",color:e})},closeParentMenu:!0,render:t=>(0,b.jsx)(c().Ay,{...t,color:e,overrideDisplayName:r.displayName}),nativeImageReference:n=>{let{environment:o}=n;return(0,_().Kg)(o,e,t)}});return r}const P=(0,_().gy)({key:"toggle last highlight",title:y.lastUsedHighlightTitle,overrideSearchTitle:y.lastUsedHighlightKeywords,render:e=>(0,b.jsx)(d().A,{...e}),actions:[(0,_().Fw)({key:"toggle highlight action",displayName:y.highlightName,analyticsName:y.highlightName.defaultMessage,validators:C(),shortcuts:["toggleHighlight"],closeParentMenu:!0,track:{actionName:"set_color"},action:(e,t,n)=>{let{environment:o,blocks:a}=t;const s=v().A.getMostRecentlyUsedColor(),{serverCommitResult:c}=l().createAndCommit({userAction:"actionRegistry.toggleLastUsedHighlight",environment:o,canUndo:!0,perform:e=>{const t=i().Si(a.map((e=>{const t=e.getFormat();return t&&t.block_color===s})))?void 0:s;r().zA({stores:a,update:{block_color:t},transaction:e})}});c.then(e)},render:e=>{const t=v().A.getMostRecentlyUsedColor();return(0,b.jsx)(c().Ay,{...e,color:t,shortcuts:["toggleHighlight"]})}})]}),B=(0,_().uk)({key:"color section",displayName:_().AY.colorName,analyticsName:_().AY.colorName.defaultMessage,svg:n(933152).M,validators:C(),subActions:()=>[P,w,I]})},443881:(e,t,n)=>{n.d(t,{D3:()=>A,G7:()=>x,RI:()=>T,zm:()=>I});n(944114),n(898992),n(430670),n(908872);var o=()=>n(496603),i=()=>n(973647),r=()=>n(534177),a=()=>n(970013),s=()=>n(452540),l=()=>n(142406),c=()=>n(728272),d=()=>n(912720),u=()=>n(179034),p=()=>n(519831),m=()=>n(798880),g=()=>n(919709),f=()=>n(247331),v=()=>n(349835),h=()=>n(977345);function _(e){for(const t of e)if(t.kind===f().FormulaContextValueKind.ThisRow)return t}function b(e){const{formulaTokenBlockProperty:t,formulaTypecheckContextValues:n,spaceId:o}=e;if("collection"in t){const{collection:e}=t;if(e)return{id:e.id,propertyId:(0,h().Yi)(t.property),spaceId:e.spaceId,table:p().Vl};const o=_(n);if(o&&"block"===o.type.type&&o.type.collection)return{id:o.type.collection.id,propertyId:t.property,spaceId:o.type.collection.spaceId,table:p().Vl}}else if("contextValueId"in t){const{contextValueId:e}=t,i=(0,h()._H)(n,(0,h().GH)(e));if("block"===(null==i?void 0:i.type.type)&&i.type.collection)return{id:i.type.collection.id,propertyId:(0,h().Yi)(t.property),spaceId:i.type.collection.spaceId??o,table:p().Vl}}else(0,r().HB)(t)}function y(e){const{formulaTokenContextValue:t,formulaTypecheckContextValues:n,spaceId:o}=e,{valueId:i}=t,r=(0,h()._H)(n,(0,h().GH)(i));return r?(0,h().qU)(r,o):[]}function S(e){const{formulaToken:t,formulaTypecheckContextValues:n,spaceId:o}=e;switch(t.type){case f().FormulaTokenType.Checkbox:case f().FormulaTokenType.Date:return[];case f().FormulaTokenType.Block:return[{id:t.blockId,spaceId:t.spaceId,table:u().ev}];case f().FormulaTokenType.Person:return[{id:t.userId,table:m().oo}];case f().FormulaTokenType.BlockProperty:{const e=b({formulaTokenBlockProperty:t,formulaTypecheckContextValues:n,spaceId:o});return e?[e]:[]}case f().FormulaTokenType.ContextValue:return y({formulaTokenContextValue:t,formulaTypecheckContextValues:n,spaceId:o});default:(0,r().HB)(t)}}function w(e){const{formulaTypecheckContextValues:t,memberPropertyToken:n}=e;if(n.collection)return{id:n.collection.id,propertyId:(0,h().Yi)(n.property),table:p().Vl,spaceId:n.collection.spaceId};const o=_(t);return o&&"block"===o.type.type&&o.type.collection?{id:o.type.collection.id,propertyId:n.property,spaceId:o.type.collection.spaceId,table:p().Vl}:void 0}function k(e){const{formulaTypecheckContextValues:t,nodes:n,spaceId:i}=e;return(0,o().oE)(n).flatMap((e=>I({formulaTypecheckContextValues:t,node:e,spaceId:i})))}function I(e){const{formulaTypecheckContextValues:t,node:n,spaceId:o}=e;switch(n.kind){case v().NM.Conditional:return k({formulaTypecheckContextValues:t,nodes:[n.condition,n.expIfFalse,n.expIfTrue],spaceId:o});case v().NM.Equality:case v().NM.Relational:case v().NM.Additive:case v().NM.Multiplicative:case v().NM.Exponentiation:return k({formulaTypecheckContextValues:t,nodes:[n.lhs,n.rhs],spaceId:o});case v().NM.Call:return k({formulaTypecheckContextValues:t,nodes:[...n.arguments,n.expression],spaceId:o});case v().NM.Unary:case v().NM.UnifiedFunctionProperty:return I({formulaTypecheckContextValues:t,node:n.expression,spaceId:o});case v().NM.LogicalAnd:case v().NM.LogicalOr:case v().NM.Array:return k({formulaTypecheckContextValues:t,nodes:n.elements,spaceId:o});case v().NM.NotionToken:return S({formulaTypecheckContextValues:t,formulaToken:n.token,spaceId:o});case v().NM.MemberBlockProperty:{const e=I({formulaTypecheckContextValues:t,node:n.expression,spaceId:o}),i=w({formulaTypecheckContextValues:t,memberPropertyToken:n.propertyToken});return i&&e.push(i),e}case v().NM.RecoveryNode:case v().NM.String:case v().NM.Boolean:case v().NM.Identifier:case v().NM.Number:return[];default:(0,r().HB)(n)}}function x(e){return(0,a().pq)(e)?`${e.spaceId}:${e.id}:${e.table}:${e.propertyId}`:(0,s().wx)(e)}function A(e){const{formulas:t,formulaTypecheckContextValues:n,formulaValue:r,spaceId:a}=e,s=t.parseFormulaInputToAst(r);if(i().Q.isFail(s))return[];const l=I({formulaTypecheckContextValues:n,node:s.value,spaceId:a});return(0,o().hS)(l,(e=>x(e)))}function C(){return{type:"keep"}}function T(e){const{baseUrl:t,formula:n,publicDomainName:i,spaceId:a,visitors:s}=e,u={visitFormulaContextValue:s.visitFormulaContextValue??C,visitFormulaPageProperty:s.visitFormulaPageProperty??C,visitRecordPointer:s.visitRecordPointer??C},p=new(c().d);function m(e){const{requested:t}=e,n=u.visitRecordPointer(t);return"replace"===n.type?(0,r().O9)(n.value)&&n.value.table===t.table?(p.add(n.value),n.value):t:"keep"===n.type?t:void(0,r().HB)(n)}const f=n.reduce(((e,n)=>{const s=g().uPN(n),c=g().tVx(s);if(c){const t=g().iVq(c),i=u.visitFormulaContextValue(t.id);return"replace"===i.type?(0,r().O9)(i.value)&&e.push(g().wmz(g().CA$({id:i.value}))):"keep"===i.type?e.push((0,o().mg)(n)):(0,r().HB)(i),e}const f=g().TVE(s);if(f){const t=g().GCe(f);let i;i="contextValueId"in t?{property:t.property,contextValueId:t.contextValueId}:{property:t.property,collection:t.collection};const a=u.visitFormulaPageProperty(i);return"replace"===a.type?(void 0===a.value||(("collection"in t&&"collection"in a.value&&(0,r().O9)(a.value.collection)&&!(0,o().n4)(t.collection,a.value.collection)||"contextValueId"in t&&"collection"in a.value&&(0,r().O9)(a.value.collection))&&p.add(a.value.collection),e.push(g().wmz(g().ESw(a.value)))),e):(e.push((0,o().mg)(n)),e)}const v=(0,l().u)({baseUrl:t,mapper:m,publicDomainName:i,requester:{table:d().yB,id:"",spaceId:a},resolveTemplateVariables:!1,token:{spaceId:a,token:n}});return e.push(v),e}),[]);return{remappedRecordPointers:p,value:f}}},444196:(e,t,n)=>{n.d(t,{k:()=>r});var o=()=>n(498212),i=()=>n(551625);function r(e,t){(0,i().T)({environment:e,userId:(0,o().ot)(t.user_id),traits:{...t,user_id:(0,o().ot)(t.user_id)}})}},444570:(e,t,n)=>{n.d(t,{Jj:()=>v,KG:()=>m,TH:()=>p,mC:()=>g,zb:()=>f});var o=()=>n(700500),i=()=>n(534177),r=()=>n(186445),a=()=>n(963589),s=()=>n(695625),l=()=>n(508496),c=()=>n(630116),d=()=>n(666710),u=()=>n(327994);function p(e){var t,n,i;const{environment:a,store:l,selectableBoundingRect:u}=e,p=l.getType();if(!p||!(0,o().UL)(p))return(null==u?void 0:u.width)??0;const m=null===(t=l.getParentBlockStore())||void 0===t?void 0:t.getType();if("page"===m)return r().y0(a);const g=null===(n=l.getRecordStoreUIParent())||void 0===n||null===(n=n.findRecordStoreUIAncestor((e=>Boolean(e instanceof c().Bv&&e.isPath([])&&s().T.findSelectableFromStore(e)))))||void 0===n?void 0:n.ancestor,f=g&&g instanceof c().Bv?s().T.findSelectableFromStore(g):void 0,v=f?null===(i=d().default.state.selectableRectMap.get(f))||void 0===i?void 0:i.width:(null==u?void 0:u.width)??0,h=m?function(e){switch(e){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return 26;case"callout":return 60;default:return 0}}(m):0;return(v??0)-h}function m(e){const{store:t,selectableBoundingRect:n,containerWidth:r}=e,a=t.getType();if(!(n&&r&&a&&(0,o().UL)(a)))return 0;const s=(e=>{const n=null===(e=t.getFormat())||void 0===e?void 0:e.block_alignment;if(!n){return t.isRootOrDirectChild()?"center":"left"}return n})();switch(s){case"right":const e=r/2;return n.width-e-e;case"center":return(n.width-r)/2;case"left":return 0;default:(0,i().HB)(s)}}function g(e){if(!l().default.checkGate({gateName:"selectable_top_margin"}))return 0;const t=e.getNode();return t?parseInt(getComputedStyle(t).marginTop):0}function f(){return l().default.checkGate({gateName:"plus_button_between_blocks"})?u().uy:u().yh}function v(){return(0,a().X)("plus_button_between_blocks")}},444768:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},444796:(e,t,n)=>{n.d(t,{AS:()=>l,EH:()=>c});var o=()=>n(522419),i=()=>n(220719),r=()=>n(691648),a=()=>n(179266);const s=["png","jpg","jpeg","webp","heic","heif"];function l(e){if(!e)return!1;const t=o().QC(e);if(!t)return!1;const n=o()._J(e),i=s.includes(t.toLowerCase());return n&&i}async function c(e,t){const n=e.getOriginalImageSource();if((0,i().o9)(n),!n)return;const o=await(0,a().L)({url:n,isAuthenticated:!0,permissionRecord:e.pointer},t),{imageEditActions:s}=await r().h.load();return s.cropAndUploadImage({store:e,environment:t,proxiedOriginalUrl:o})}},445120:(e,t,n)=>{n.d(t,{b:()=>i,m:()=>o});const o="guest";class i{constructor(e){this.data=void 0,this.data=e??{}}get size(){return Object.keys(this.data).length}getUserRecordMap(e){const t=e??o;let i=this.data[t];return i||(i=n(388821).RecordMapWithRole.create(),this.data[t]=i),i}getValue(e){return this.getUserRecordMap(e.userId).getValue(e.pointer)}getRole(e){return this.getUserRecordMap(e.userId).getRole(e.pointer)}getModelWithBackfilledSpaceId(e){return this.getUserRecordMap(e.userId).getModelWithBackfilledSpaceId(e.pointer)}setValueAndRole(e,t,n){return this.getUserRecordMap(e.userId).setValueAndRole(e.pointer,t,n),this}setModelAndRole(e,t,n){return this.getUserRecordMap(e.userId).setModelAndRole(e.pointer,t,n),this}delete(e){this.getUserRecordMap(e.userId).delete(e.pointer)}*[Symbol.iterator](){for(const[e,t]of(0,n(534177).WP)(this.data))for(const{pointer:n,model:i,role:r}of t)void 0!==i&&(yield{pointer:n,model:i,role:r,userId:e===o?void 0:e})}}},447438:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(672577);class o extends(()=>n(965828))().O{shouldPreventMobileAutoScroll(e){const t=this.find((t=>t.capture&&!(t.allowMobileAutoScroll&&e.device.isMobile)));return Boolean(t)}}const i=new o},447587:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(296540),i=()=>n(401497),r=()=>n(719147),a=n(474848);function s(e){const{children:t,maxLines:n,onMore:r,onLess:s,clampOverride:c}=e,d=(0,o.useRef)(null),u=(0,o.useRef)(null),p=(0,o.useRef)(null),[m,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!n),[h,_]=(0,o.useState)(0),[b,y]=(0,o.useState)(0),S=c&&n&&c.fontSize*c.lineHeight*n+.5,w=Boolean(c);(0,o.useEffect)((()=>{if(m){var e;const t=null===(e=u.current)||void 0===e?void 0:e.getClientRects()[0];_((null==t?void 0:t.height)??0),y((null==t?void 0:t.width)??0)}}),[m]);const k=(0,o.useCallback)((()=>{d.current&&g(d.current.scrollHeight>d.current.clientHeight+5)}),[]);(0,o.useEffect)((()=>{!f&&Boolean(n)&&k()}),[f,n,k]),(0,o.useEffect)((()=>{if(p.current){const e=new MutationObserver((()=>{f||k()})),t=new ResizeObserver((()=>{f||k()}));return t.observe(p.current),e.observe(p.current,{childList:!0,subtree:!0,characterData:!0}),()=>{t.disconnect(),e.disconnect()}}}),[f,k]);const I=(0,o.useCallback)((e=>{r?r(e):(e.preventDefault(),e.stopPropagation(),v(!0))}),[r]),x=(0,o.useCallback)((e=>{s?s(e):(e.preventDefault(),e.stopPropagation(),v(!1))}),[s]),A=(0,o.useMemo)((()=>(0,a.jsx)(l,{style:{position:"absolute",right:0,bottom:0},onClick:I,children:(0,a.jsx)("div",{ref:u,children:e.moreElement})})),[e.moreElement,I]),C=(0,o.useMemo)((()=>(0,a.jsx)(l,{onClick:x,children:e.lessElement})),[e.lessElement,x]),T=(0,i().IS)((e=>({base:{display:"-webkit-box",WebkitBoxOrient:"vertical",...!w&&{WebkitLineClamp:f?void 0:n},...w&&{maxHeight:f?void 0:S}},clamped:{WebkitMaskPosition:"right bottom",WebkitMask:`linear-gradient(0deg,transparent 0,transparent ${h}px,#000 ${h}px),\n\t\t\t\t\t\t\t linear-gradient(270deg,transparent 0,transparent ${b}px,#000 ${2*b}px)`}})),[n,f,h,b,S,w]);return(0,a.jsxs)("div",{style:{position:"relative"},dir:"auto",children:[(0,a.jsxs)("div",{ref:d,style:{...T.base,...m&&!f&&T.clamped,...e.style},children:[(0,a.jsx)("div",{ref:p,children:t}),m&&f&&C]}),m&&!f&&A]})}function l(e){let{onClick:t,style:n,children:o}=e;return(0,a.jsx)(r().A,{disableUnderline:!0,style:n,onClick:e=>{t(e)},children:o})}},448433:(e,t,n)=>{n.d(t,{ey:()=>P,h:()=>M});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(803949),n(581454);var o=()=>n(474424),i=()=>n(700500),r=()=>n(207289),a=()=>n(792071),s=()=>n(142748),l=()=>n(212547),c=()=>n(813690),d=()=>n(388821),u=()=>n(56125),p=()=>n(179034),m=()=>n(496603),g=()=>n(534177),f=()=>n(870618),v=()=>n(108944),h=()=>n(355012),_=()=>n(640653),b=()=>n(670631),y=()=>n(508496),S=()=>n(41161),w=()=>n(968172),k=()=>n(630116),I=()=>n(314648),x=()=>n(523584);const A=432e5,C=1e3;async function T(e){let{currentSpaceStore:t,environment:n,blockSourceLookup:i,recordsIdsToSubscribe:g}=e;const h=performance.now(),_=t.id,b=d().RecordMapWithRole.create(),y=Array.from(i.keys()).map((e=>({table:p().ev,id:e,spaceId:_}))),S=new Set;await(0,u().d3)({recordPointers:y,recordMap:b,loadRecordModel:async e=>{const o=await(0,f().h7)({environment:n,pointer:e});if(!o){S.add(e.id);const n=k().sk.createChildStore(t,e);await n.load();const o=n.getRole(),i=n.getModel();if(o)return{model:i,role:o}}return o},recurFn:e=>m().oE([(0,l().A0)(e)&&e.getParentPointer(),e.table===p().ev&&e.getCollectionPointer()])});const w=performance.now(),I=c().xb.fromRecordMapWithRole(b),x=a().b4_.fromGetRecordValueFn(I),A=new Array;for(const[a,l]of i.entries()){const e={table:p().ev,id:a,spaceId:_};let n;g.has(a)&&(n=k().sk.createChildStore(t,e));const i=x(e);if(!i)continue;const c=(0,s().n1)(e,b);if(0===c.length)continue;if(i.getSpaceId()!==t.id)continue;if(!l)continue;const d=(0,v().um)(c);if(d&&Boolean(d.value.archived_by))continue;const u=(0,r().KM)((0,o().g)({blockValue:i,getRecordValue:I}).text);if(!u)continue;const m=u.substring(0,C).trim();A.push({blockModel:i,text:m,path:c,source:l,blockStore:n})}return{indexRecords:A.map((e=>{return{id:e.blockModel.id,text:e.text,inits:(t=e.text,t.split(" ").map((e=>Array.from(e).slice(0,1))).join("")),block:e};var t})),recordMap:b,numRecordsRequiredSync:S.size,recordsLoadedMs:w-h,textGeneratedMs:performance.now()-w}}async function M(e){const{environment:t,currentSpaceStore:n,currentSpaceViewStore:o}=e,r=performance.now();let a=r;const s=(0,x().Fr)().finally((()=>{a=performance.now()})),{id:l}=n,c=new Map,d=new Set;function u(e,t){var n;c.has(e)?null===(n=c.get(e))||void 0===n||n.add(t):c.set(e,new Set([t]))}const m=(new Date).getTime();if(o)for(const i of o.getBookmarkedPageIds())u(i,"bookmarkedPage");const f=t.currentUser.id;if(o){for(const{id:n}of(0,_().cU)(t,o))u(n,"sharedPage");const e=m-A;t.defaultRecordCache.inMemoryRecordCache.forEachRecord(f,(t=>{let{model:o}=t;if(o.table===p().ev&&o.spaceId===n.id){const{id:t,last_edited_time:n,last_edited_by_id:r,type:a}=o;(0,i().$I)(a)&&r===f&&n&&n>e&&(u(t,"defaultRecordCache"),d.add(t))}}))}const v=S().A.getVisitedIds(f);for(const i of v)u(i,"frecencyStore"),d.add(i);if(f)for(const i of(0,h().Kn)({spaceId:l,userId:f})??[])u(i.pageId,"frecencyStore"),d.add(i.pageId);if(l&&f){var k;const e=I().default.getUserSignals({spaceId:l,userId:f});var C,M;if(Object.values((null==e?void 0:e.similarUserRecentPages)??{}).forEach((e=>{let{pageId:t}=e;u(t,"similarUser1dRecentPages"),d.add(t)})),null==e||null===(k=e.topPages7dPageView)||void 0===k||k.forEach((e=>{let{pageId:t}=e;u(t,"topPages7dPageView"),d.add(t)})),"on"===y().default.getGroup("search-include-all-local-sources"))null==e||null===(C=e.editedPages)||void 0===C||C.forEach((e=>{let{pageId:t}=e;u(t,"editedPages1d"),d.add(t)})),null==e||null===(M=e.similarUsersEditedPages)||void 0===M||M.forEach((e=>{let{pageId:t}=e;u(t,"similarUsersEditedPages1d"),d.add(t)}))}const P=w().A.get(l);P&&P.forEach((e=>{let{pageId:t}=e;u(t,"recentVisit"),d.add(t)}));const B=b().A.state.offlinePages;if(B)for(const i of(0,g().uv)(B))i&&u(i,"offlinePage");const R={spacePage:0,recentVisit:0,bookmarkedPage:0,sharedPage:0,frecencyStore:0,teamPage:0,defaultRecordCache:0,unknown:0,similarUser1dRecentPages:0,topPages7dPageView:0,editedPages1d:0,similarUsersEditedPages1d:0,offlinePage:0};c.forEach((e=>{e.forEach((e=>{R[e]+=1}))}));const E=performance.now(),{indexRecords:D,recordMap:N,numRecordsRequiredSync:L,recordsLoadedMs:O,textGeneratedMs:U}=await T({currentSpaceStore:n,environment:t,blockSourceLookup:c,recordsIdsToSubscribe:d}),{index:F,getAllBlocks:V}=await s,j=performance.now();await F.addAllAsync(D);const z=performance.now();return{spaceId:n.id,blocks:F,getAllBlocks:V,recordMap:N,blockSourceCount:R,buildStartTime:r,numRecordsRequiredSync:L,timings:{blocksGatheredMs:E-r,recordsLoadedMs:O,textGeneratedMs:U,indexMs:z-j,indexConstructedMs:a-r}}}async function P(e){let{currentSpaceStore:t,id:n,source:o}=e;const i=new Map;i.set(n,o);const r=new Set([n]),a=t.environment,{indexRecords:s}=await T({currentSpaceStore:t,environment:a,blockSourceLookup:i,recordsIdsToSubscribe:r});return s.find((e=>e.id===n))}},448619:(e,t,n)=>{n.d(t,{IV:()=>f,Wx:()=>g,t5:()=>h});n(16280);var o=()=>n(908006),i=()=>n(919709),r=()=>n(534177),a=()=>n(197194),s=()=>n(231722),l=()=>n(906537),c=()=>n(792002),d=()=>n(569777),u=()=>n(24157),p=()=>n(319975),m=()=>n(725614);function g(e){var t;const{environment:n,selectedToken:o,selectionRect:r,analyticsFrom:p}=e,g=l().get();if(!g)return;if("editing"!==u().default.state.mode)return;const f=null===(t=(0,s().H7)(u().default.state.multiSelection))||void 0===t?void 0:t.store;if(!f)return;const v=o||a().cy(u().default.state);v&&m().setSelection({store:f,selection:v.position});const h=c().O7(u().default.state),_=v?i().u$N(v.token):a().WP(h),b=a().vG({environment:n,equation:_,displayMode:"inline"}),y=v?{editingToken:v.token}:{annotations:a().zG(u().default.state)};d().A.setState({open:!0,value:_,error:b,savedTextSelectionState:u().default.state,savedTextSelectionRect:r||a().B_({environment:n,selection:g}),...y,analyticsFrom:a().aT({source:p,currentEquationToken:Boolean(v),selectedText:h})}),m().clear({environment:n})}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d().q.Forward;d().A.isOpen()&&(v({equationStore:d().A,getNextSelection:t=>e===d().q.Forward?{startIndex:t.endIndex,endIndex:t.endIndex}:e===d().q.Backward?{startIndex:t.startIndex,endIndex:t.startIndex}:(0,r().HB)(e)}),d().A.reset(),o().default.afterNextFlush((()=>{u().default.emit()})))}function v(e){const{equationStore:t,getNextSelection:n}=e;if(!t.isOpen())return;const{savedTextSelectionState:o}=t.state,i=(0,s().H7)(o.multiSelection);if(!i)return;const r=n(i.selection);if(m().setSelection({store:i.store,selection:r}),"editing"!==u().default.state.mode)throw new Error("TextSelectionStore should have a selection after calling `setSelection`.");t.setState({...t.state,savedTextSelectionState:u().default.state})}function h(e){const{environment:t,equationStore:n,transaction:o}=e;n.isOpen()&&(n.state.error||n.state.editingToken&&i().u$N(n.state.editingToken)===n.state.value||(!function(e){const{environment:t,equationStore:n,transaction:o}=e;if(!n.isOpen())return;if(n.state.error)return;const{savedTextSelectionState:r}=n.state,{multiSelection:s}=r;let l;p().f0({environment:t,multiSelection:s,transaction:o}),n.state.value&&(l=a().G0({equationState:n.state,isTemporary:!1}),p().yr({environment:t,store:s.start.store,index:s.start.index,tokens:[l],transaction:o})),v({equationStore:n,getNextSelection:e=>{const t=l?i().qAZ([l]).length:0;return{startIndex:e.startIndex,endIndex:e.startIndex+t}}})}({environment:t,equationStore:d().A,transaction:o}),v({equationStore:n,getNextSelection:e=>({startIndex:e.endIndex,endIndex:e.endIndex})}),a().vK({environment:t,equation:n.state.value,from:n.state.analyticsFrom})))}},448664:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){let{emojiStore:t,size:i,testId:r,alt:a}=e;const s=(0,n(484714).v3)(),l=(0,n(401497).IS)((e=>({icon:{fill:e.icon.tertiary,width:i}})),[i]);return(0,n(847249).K8)((()=>t.isDefined()&&t.getAlive()?(0,o.jsx)(n(853002).A,{emojiId:t.id,emojiName:t.getName(),emojiUrl:t.getUrl(),spaceId:t.pointer.spaceId,size:i,baseUrl:n(780054).A.domainBaseUrl,currentUserId:s.currentUser.id,disableAnimation:s.device.prefersReducedMotion,testId:r,alt:a}):(0,n(736492).G)(l.icon)),[t,i,s.currentUser.id,s.device.prefersReducedMotion,l.icon,r,a])}},448801:(e,t,n)=>{n.d(t,{i:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(371562);o();function i(e,t){const n=o().create({arrays:{detectMove:!1,includeValueOnMove:!0}}).diff(e,t);if(!n)return{beforeOps:{},removeOps:new Set};let i=[],r=[];for(const o in n)"_t"!==o&&("_"===o[0]?i.push(parseInt(o.slice(1),10)):1===n[o].length&&r.push({index:parseInt(o,10),value:n[o][0]}));const a={},s=new Set,l=[...e];i=i.sort(((e,t)=>e-t));for(let o=i.length-1;o>=0;o--){const e=i[o],t=l.splice(e,1)[0];s.add(t)}r=r.sort(((e,t)=>e.index-t.index));for(let o=0;o<r.length;o++){const e=r[o];a[e.value]=l[e.index],l.splice(e.index,0,e.value)}return{beforeOps:a,removeOps:s}}},449195:(e,t,n)=>{n.d(t,{LN:()=>m,Rn:()=>u,SB:()=>f,SE:()=>c,_f:()=>h,nl:()=>v,vk:()=>g,z5:()=>p});var o=()=>n(713998),i=()=>n(651124),r=()=>n(534177),a=()=>n(351360),s=()=>n(712505);function l(){const{mainEditorCurrentBlockStore:e}=a().default.state;return s().default.state.open&&s().default.state.targetStore||e}function c(){var e;return null===(e=l())||void 0===e?void 0:e.getAssociatedCollectionStore()}function d(){const e=l();return c()||e}function u(){const e=d();if(!e)return;return p(e.getFormat().page_section_visibility)}function p(e){return(null==e?void 0:e.comments)??i().Zi.comments}function m(){const e=d();if(!e)return;return g(e.getFormat().page_section_visibility)}function g(e){return(null==e?void 0:e.margin_comments)??i().Zi.margin_comments}function f(e){return"always_show"===e?"always_show":"section_hide"===e||"inline"===e||"minimal"===e?"section_hide":"section_show"===e||"section_collapsed"===e?"section_collapsed":void(0,r().HB)(e)}function v(e){return f((null==e?void 0:e.backlinks)??i().Zi.backlinks)}function h(e){const{propertySchema:t}=e,{type:n}=t,i=(0,o().MW)(t);return!(["created_time","created_by","last_edited_time","last_edited_by"].includes(n)||i)}},449506:(e,t,n)=>{n.r(t),n.d(t,{callApi:()=>N,callMultiCellApi:()=>L,callStreamApi:()=>O});n(898992),n(581454),n(908872);var o=()=>n(905343),i=()=>n(857639),r=()=>n(416845),a=()=>n(243020);const s={getPageBacklinks:{initial:"getBacklinksForBlockInitial",fanout:"getBacklinksForBlockFanout"},testMultiCell:{initial:"testMultiCellInitial",fanout:"testMultiCellFanout"},getSpaces:{initial:"getSpacesInitial",fanout:"getSpacesFanout"},getUserNotifications:{initial:"getUserNotificationsInitial",fanout:"getUserNotificationsFanout"},getWebClipperData:{initial:"getWebClipperDataInitial",fanout:"getWebClipperDataFanout"},syncRecordValuesSpace:{initial:"syncRecordValuesSpaceInitial",fanout:"syncRecordValuesSpaceFanout"}};var l=()=>n(427704),c=()=>n(532659),d=()=>n(496603),u=()=>n(763824),p=()=>n(939768),m=()=>n(780054),g=()=>n(989423),f=()=>n(754704),v=()=>n(898486),h=()=>n(974233),_=()=>n(972435),b=()=>n(740456),y=()=>n(836251),S=()=>n(719431),w=()=>n(133234),k=()=>n(459225),I=()=>n(320460),x=()=>n(351360),A=()=>n(227440),C=()=>n(961581),T=()=>n(236933),M=()=>n(787172),P=()=>n(901389),B=()=>n(435009);const R=d().sg((async(e,t)=>{await S().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:t,doNotRedirect:!0,logoutOrigin:a().d.PageAccessDenied})}),1e3);let E;async function D(e,t,n,o){var s,c;if((0,r().IQ8)(n.body)){P().Qg(n);const t=n.body.clientData&&(0,v().Yu)(n.body.clientData);g().vd(e,"show_user_validation_response",{type:null==t?void 0:t.type})}if(n.offline)return n;console.error(n.error);const{RouterStore:u}=e;switch(401===n.status&&i().log({level:"error",from:"api",type:"httpTrigger401",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:n},routeName:u.state.route.name}}),403===n.status&&n.headers["content-type"]&&n.headers["content-type"].startsWith("text/html")&&i().logWithSampleRate({logMessage:{level:"error",from:"api",type:"httpTrigger403",data:{eventName:t,isLoggedIn:e.currentUser.isLoggedIn(),miscDataToConvertToString:{response:n},userId:e.currentUser.id,routeName:u.state.route.name}},samplePercentage:1}),n.status){case 403:switch(null===(s=n.body)||void 0===s?void 0:s.name){case"CantAccessWorkspaceFromNetworkError":if(!(0,r().d5r)(n.body.clientData))break;const t=I().A.state.open,i=n.body.clientData.spaceId,s=null===(c=x().default.state.currentSpaceStore)||void 0===c?void 0:c.id;if(t)break;if(void 0!==i&&i===s){const t=[{label:_().A.formatMessage(P()._0.tryAgainButtonLabel),onAccept:d().D_},{label:_().A.formatMessage(P()._0.logoutButtonLabel),onAccept:async()=>{await S().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:o,nextLocation:l().JZ.root,logoutOrigin:a().d.WorkspaceNotAllowed})}}];P().Qg(n,void 0,t)}break;case"CantAccessWorkspaceFromEKMError":o&&o===e.currentUser.id&&T().E.setState({hasWorkspaceAccessError:!0,errorId:n.body.errorId})}break;case 401:if(Boolean(n.body&&n.body.errorId)&&e.currentUser.isLoggedIn())switch(u.state.route.name){case"settingsConsoleOrganization":if(o&&o===e.currentUser.id){const t=(0,p().Gm)({url:`${m().A.domainBaseUrl}${l().JZ.login}`,query:{redirectURL:window.location.pathname}});await S().actuallyLogoutAndDeleteMostLocalData({environment:e,userId:o,nextLocation:t,logoutOrigin:a().d.OrganizationConsoleDenied})}break;case"page":if((0,y().w6)(e)){await S().actuallyLogoutAndDeleteMostLocalData({environment:e,nextLocation:window.location.pathname,logoutOrigin:a().d.PublicPageAccessDenied});break}case"root":case"space":case"onboarding":case"myIntegrations":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"creatorProfileIntegrations":case"studentGroupSignup":if(o&&o===e.currentUser.id){await R(e,o);!function(e,t){const{RouterStore:n}=e;if((0,r().op4)(t.body)&&"saml_sso_required"===t.body.clientData.type){const e=(0,v().Hu)(_().A.getIntl(),t);w().A.setState({...w().A.state,loginType:"saml",alert:e})}else if((0,r().op4)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:e,thirdPartyToken:n}=t.body.clientData;w().A.setState({...w().A.state,loginType:"microsoft_login",email:e,thirdPartyToken:n,needsSendTemporaryPasswordReason:"microsoft_login_verification"})}else if((0,r().op4)(t.body)&&("login_custom_session_expired"===t.body.clientData.type||"login_generic_session_expired"===t.body.clientData.type)){const e=_().A.getIntl().formatMessage("login_custom_session_expired"===t.body.clientData.type?v().YT.login_custom_session_expired:v().YT.login_generic_session_expired,{errorCode:t.status});w().A.setState({...w().A.state,alert:e})}B().oo({environment:e,url:"page"===n.state.route.name?window.location.href:l().JZ.login})}(await S().clearCurrentUser(e),n)}break;case"startupsApplication":case"lennyApplication":case"creatorProgramApplication":o&&o===e.currentUser.id&&(await R(e,o),await S().clearCurrentUser(e))}}return n}async function N(e){const{environment:t,eventName:n,data:a,userId:l,tracking:c,abortSignal:u,prefetchCacheKey:p,encoding:m,headers:g,prefetchMultiCellFanout:v,inMemoryRecordCache:_}=e;!function(e){for(const t of Object.keys(e)){const n=e[t];(d().kZ(n)||d().b0(n))&&delete e[t]}}(a);const y=l||t.currentUser.id,S=(0,f().createApiHttpJsonRequestOptions)({environment:t,eventName:n,data:a,activeUserId:y,tracking:c,abortSignal:u,encoding:m,eventListeners:(0,k().getPerformanceEventListeners)({eventName:n,isPrefetchRequest:!1}),headers:g});let w;if(p&&t.prefetchCache){let e=p;if(v){if(!(p in s))throw new(r().yI4)("prefetchMultiCellFanout can only enable prefetching for multi-cell api events");e=`${p}-${(0,b().hK)(S)}`}w=t.prefetchCache.getPrefetchedHttpRequest({key:e,request:S,abortSignal:u,isMobileNative:t.device.isMobileNative})}w??=(0,h().default)(S),C().A.incrementNumApiCallsInitiated();const I=Date.now(),T=await w,P=Date.now();return o().A.addTrace({type:"api_call",name:n,start:I,end:P}),C().A.incrementNumApiCallsCompleted(),"success"===T.type?(M().s({environment:t,eventName:n,response:T.data,userId:y,inMemoryRecordCache:_}),function(e){const{environment:t,responseUserId:n,eventName:o}=e;if(!n)return;if("saveTransactions"!==o&&"saveTransactionsMain"!==o&&"saveTransactionsFanout"!==o)return;const{id:r}=t.currentUser;if(n!==r){if(E===n)return;const{currentUserStore:e,currentUserRootStore:t,currentUserSettingsStore:a,currentSpaceViewStore:s}=x().default.state,l=r||"<undefined>",c=`currentUser ${l} didn't match user's cookie ${n}`;i().log({from:"client/api",level:"error",type:"currentUserWrong",data:{eventName:o,miscDataToConvertToString:{responseUserId:n,connectionStoreState:A().A.state,currentUserId:l,userStoreId:e&&e.id,userRootStoreId:t&&t.id,userSettingsStoreId:a&&a.id,currentSpaceViewStoreParentId:s&&s.getParentId()},message:c}}),E=n}else E=void 0}({environment:t,eventName:n,responseUserId:T.headers["X-Notion-User-Id"]}),T):D(t,n,T,y)}async function*L(e){const{eventName:t}=e,{initial:n,fanout:o}=function(e){return s[e]}(t),i=await N({...e,eventName:n});if("failed"===i.type)return void(yield i);if(yield i,!i.data.fanoutData)return;const r=async function*(t){const n=await u().lX(t,10,(async t=>N({...e,data:t.request,eventName:o,headers:t.headers,prefetchMultiCellFanout:!0})));for(const e of n)yield e;const i=n.map((e=>{if("success"===e.type)return e.data.fanoutData})).reduce(((e,t)=>t?e.concat(t):e),[]);i&&i.length&&(yield*r(i))};yield*r(i.data.fanoutData)}async function O(e){const{eventName:t,environment:n,data:o,userId:i,tracking:r,abortSignal:a,headers:s}=e,l=i||n.currentUser.id,d=(0,f().createApiHttpRequestOptions)({environment:n,eventName:t,data:o,activeUserId:l,tracking:r,abortSignal:a,eventListeners:(0,k().getPerformanceEventListeners)({eventName:t,isPrefetchRequest:!1}),format:"jsonStream",headers:s}),u=await(0,h().default)(d);return"failed"===u.type?D(n,t,u,l):(c().hS.is(u.data)||M().s({environment:n,eventName:t,response:u.data,userId:l}),u)}},449552:(e,t,n)=>{n.d(t,{g:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("lockedFilled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.69141 14.6338H11.3018C12.2178 14.6338 12.6689 14.1826 12.6689 13.1914V8.08496C12.6689 7.18945 12.293 6.72461 11.541 6.64941V4.96094C11.541 2.36328 9.81152 1.1123 7.99316 1.1123C6.18164 1.1123 4.45215 2.36328 4.45215 4.96094V6.67676C3.74805 6.78613 3.32422 7.2373 3.32422 8.08496V13.1914C3.32422 14.1826 3.77539 14.6338 4.69141 14.6338ZM5.75098 4.83105C5.75098 3.22461 6.76953 2.35645 7.99316 2.35645C9.2168 2.35645 10.2422 3.22461 10.2422 4.83105V6.64258L5.75098 6.64941V4.83105Z"})})},449918:(e,t,n)=>{n.d(t,{e:()=>a});var o=()=>n(496603),i=()=>n(875856),r=()=>n(42772);function a(){const e={user_id:(0,r().m)(),user_email:i().default.state.user_email,email:i().default.state.user_email,name:i().default.state.user_name};return o().z7(e,o().b0)}},450510:(e,t,n)=>{n.d(t,{B2:()=>T,BC:()=>w,BJ:()=>M,GW:()=>P,QP:()=>x,Ty:()=>B,fU:()=>h,hn:()=>b,oe:()=>A,sE:()=>_,sG:()=>y,si:()=>S,ut:()=>k,wy:()=>I,yR:()=>C});var o=()=>n(700500),i=()=>n(340498),r=()=>n(100622),a=()=>n(284371),s=()=>n(720665),l=()=>n(519839),c=()=>n(835066),d=()=>n(828180),u=()=>n(186445),p=()=>n(405417),m=()=>n(478726),g=()=>n(644914),f=()=>n(502438),v=()=>n(236030);function h(e,t){return e.col===t.col&&e.row===t.row}const _="text/_notion-table";function b(e){return{minCol:Math.min(e.start.col,e.end.col),maxCol:Math.max(e.start.col,e.end.col),minRow:Math.min(e.start.row,e.end.row),maxRow:Math.max(e.start.row,e.end.row)}}function y(e){let{isMobile:t}=e;return t?d().Um:d().tt}function S(e){let{columnIndex:t,titleColumnIndex:n,indentLevel:o,isSubitemToggleOnTitleColumn:i}=e;if(w({columnIndex:t,titleColumnIndex:n,isSubitemToggleOnTitleColumn:i})&&o>0){return p().yy*o+5}return 0}function w(e){let{columnIndex:t,titleColumnIndex:n,isSubitemToggleOnTitleColumn:o}=e;return o?t===n:0===t}function k(e){let{collectionViewBlockId:t}=e;const n=f().default.state.stores;return 0!==n.length&&!(0,l().Rd)(n,t)}function I(e){const{environment:t,collectionContextStore:n,isPhone:o,stickyLeft:i,theme:a}=e;if(o)return{};const s=n.collectionViewBlockStore(),c=null==s?void 0:s.getParentBlockStore();let d;const u=n.isInPeekRendererStore.state;if("dark"===a.mode&&u&&(d=a.peekModalBackground),"dark"===a.mode&&n.isInHomeWidgetStore.state&&(d=a.accentColors.gray[90]),c&&!n.isFullScreenStore.state&&(null==s||!s.isRootOrDirectChild())){var p;const e=null===(p=c.getModel())||void 0===p?void 0:p.getFormat().block_color;e&&(d=(0,r().k5)(e,a).background)}const m=n.frozoneStore.state.scrollerLeftOffset??0,f=(0,g().kf)(t),h=Math.max(f-m,0),_=x(t,n)?h:0,b=n.frozoneStore.state.scrollerLeftPadding,y=(0,l().f5)({environment:t,collectionContextStore:n});return{background:d||a.contentBackground,position:"sticky",left:`calc(${(i||0)+_-(b||0)+(y?v().Fh:0)}px + -1 * var(--sticky-horizontal-offset, 0px))`,zIndex:83}}function x(e,t){const n=t.collectionViewBlockStore();return!!n&&(n.isRootOrDirectChild()&&(0,c().dC)(e,n)&&!t.isFullScreenStore.state&&!(0,m().Ck)(n,void 0,e)&&!n.isCollectionViewPageWithContent())}function A(e){const{environment:t,propertyFormat:n}=e,o=n.width;if(!t.device.isPhone)return o;const i=t.WindowSizeStore.getSafePaddingLeftPx((0,u().F8)(t)),r=t.WindowSizeStore.getSafePaddingRightPx((0,u().F8)(t)),a=t.WindowSizeStore.state.width-i-r;return o?Math.min(o,a):a}function C(e,t,n){return{start:{col:(0,s().qE)(e.start.col,0,t-1),row:(0,s().qE)(e.start.row,0,n-1)},end:{col:(0,s().qE)(e.end.col,0,t-1),row:(0,s().qE)(e.end.row,0,n-1)}}}function T(e){const{blockStore:t,isFullScreen:n,environment:i,collectionContextStore:r}=e;if(n)return!1;if(!(0,l().f5)({environment:i,collectionContextStore:r}))return!1;const a=t.getParentBlockStore(),s=null==a?void 0:a.getType(),c=null==a?void 0:a.getFormat();return!(!a||!s)&&(0,o().Z3)(s,c)}function M(e){let{theme:t,isMobile:n,hideTextWithTransition:o,hideTextWithoutTransition:r}=e;return{button:{display:"flex",alignItems:"center",height:y({isMobile:n})+1,width:"100%",paddingLeft:v().tz,lineHeight:a().K_.UIRegular.desktop},buttonInner:{fontSize:14,color:t.text.tertiary,display:"inline-flex",alignItems:"center",position:"sticky",left:n?v().Fh:v().tz+v().Fh,opacity:o?0:1,transition:"opacity 0.2s ease",...r&&{display:"none"}},icon:{width:i().Ev.sm,height:i().Ev.sm,marginLeft:n?0:1,marginRight:7,fill:t.icon.tertiary}}}function P(e,t){const n=B(e,t);return n&&n.table_properties?n.table_properties:[]}function B(e,t){const{temporaryFormat:n}=t.state;return n||e}},450519:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n(496603).o8(this.state)}}const i=new o},452558:(e,t,n)=>{n.d(t,{A:()=>S});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(847249),r=()=>n(959013),a=()=>n(953448),s=()=>n(176072),l=()=>n(845955),c=()=>n(730688),d=()=>n(793531),u=()=>n(110955),p=()=>n(970585),m=()=>n(939740),g=()=>n(64e3),f=()=>n(228927),v=()=>n(89924),h=n(474848);const _=25,b=200,y=n(757695).default.createClass(_,{name:"limitStore"});function S(e){let{topBorder:t,context:n,onAccept:S,empty:w,keyboardPriority:k,disableKeyboard:I,initialFocus:x,onEmptyEnter:A,comboboxProps:C,useLimit:T,onFilteredSectionsChange:M,filter:P,sections:B,menuListStore:R,resetInitialFocusOnSectionChangeAlways:E,resetFocusOnMouseOut:D,toggleableSections:N,onToggleSection:L,showNoResultsMessage:O,onFooterEnter:U,filterSections:F,flattenSectionsOnSearch:V,renderItemStyles:j,shouldShowBlockTypeTitle:z}=e;const H=(0,a().J)(),W=(0,i().uB)(void 0,y),q=(0,i().uB)(R,p().A),[K,G,$]=(0,i().K8)((()=>{let e=0;const t=(0,l().js)({sections:P&&F?F:B,context:n,query:P||"",shouldShowBlockTypeTitle:z});for(const n of t)e+=n.actions.length;return[T?(0,l().Le)(t,W.state):t,e,t]}),[B,n,P,T,W,F,z]);(0,o.useEffect)((()=>{u().A.state.open&&u().r.setState(0===$.length)}),[$]),(0,o.useEffect)((()=>{null==M||M(K)}),[M,K]);const Y=(0,o.useRef)(P),Q=(0,o.useCallback)((e=>{e<b&&W.state<G&&W.setState(W.state+_)}),[W,G]),Z=Boolean(V&&P),X=(0,o.useMemo)((()=>{const e=new Map;for(const t of $)if(t.key!==d().IZ)for(const n of t.actions)e.set(n.key,t.title);return e}),[$]),{menuItemActionMap:J,menuItemSectionKeyMap:ee,menuListSections:te}=(0,o.useMemo)((()=>{const e=new Map,o=new Map,i=K.map((i=>{const r=i.key.toString();return{key:i.key,render:e=>i.render({...e,topBorder:!Z&&(0!==e.index||Boolean(t)),title:i.title,hideTitle:Z}),items:i.actions.map((t=>{const a={key:t.key,render:(e,o)=>{const a=i.key===d().IZ?X.get(t.key):i.title,s=Z||i.key===d().IZ;return t.render(e,n,{onAccept:(e,t,n)=>{null==S||S(e,t,n,r)},onFocus:o.onFocus,sectionTitle:a,extendItemTitle:s,styles:j})},action:e=>{let{event:o}=e;t.action({...n,lazyDependencies:H},o)}};return e.set(a,t),o.set(a,r),a}))}}));return{menuItemActionMap:e,menuItemSectionKeyMap:o,menuListSections:i}}),[K,Z,t,X,n,j,S,H]);(0,o.useEffect)((()=>{if(P!==Y.current&&0===x){Y.current=P;if(Boolean(U)&&0===c().i2(te))return s().rd({store:q});q.setState({...q.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}}),[P,x,te,q,U]);const ne=(0,o.useCallback)(((e,t)=>{if(S){const i=J.get(e),r=ee.get(e);if(i){var o;if(null!==(o=i.isDisabled)&&void 0!==o&&o.call(i,n))return;S(i,n,t.event,r,t.index)}}}),[S,n,J,ee]),oe=(0,o.useCallback)((e=>{N&&(null==L||L(e),T&&W.setState(G))}),[N,T,W,G,L]);return(0,h.jsxs)(h.Fragment,{children:[Boolean(O)&&0===K.length&&(0,h.jsx)(v().A,{children:(0,h.jsx)(g().A,{title:w||(0,h.jsx)(r().sA,{id:"action.search.noResults",defaultMessage:"No results"})})}),(0,h.jsx)(m().Ay,{type:m().Oh.Vertical,priority:k,store:q,disableKeyboard:I,sections:te,initialFocus:x,onEmptyEnter:A,onAccept:ne,comboboxProps:C,resetInitialFocusOnSectionChangeAlways:E,resetFocusOnMouseOut:D,toggleableSections:N,onToggleableSectionClick:oe,onFooterEnter:U}),T&&(0,h.jsx)(f().A,{onChange:Q})]})}},452939:(e,t,n)=>{n.d(t,{$W:()=>R,A8:()=>B,K5:()=>A,LT:()=>I,Mb:()=>M,ND:()=>g,Pg:()=>T,R1:()=>P,TG:()=>_,Tv:()=>E,Xx:()=>y,bL:()=>k,ff:()=>w,p:()=>S,rr:()=>h,uB:()=>x,vO:()=>v,xL:()=>C,xn:()=>b,yP:()=>f});var o=()=>n(554279),i=()=>n(584262),r=()=>n(677338),a=()=>n(763824),s=()=>n(939768),l=()=>n(989423),c=()=>n(670631),d=()=>n(311890),u=()=>n(644914),p=()=>n(155959),m=()=>n(508496);function g(e){if(e.isCollectionView())return"database";return"collection"===e.getParentTable()?"database_page":"page"}function f(e,t){var n,o;const{page_id:r,query:a,team_id:m,page_visit_id:g,previous_page_visit_id:f,marketplace_state:v,page_visit_source_override:h,..._}=t,b=s().qn(a,i().k3),y=h??parseInt(b),S="push"===e.RouterStore.getState().action,w=(0,i().z2)(y)&&S?(0,i().hJ)(i().y8.LinkInPage):(0,i().hJ)(y),k=s().qn(a,i().rh),I=d().NG({blockOrCollectionId:r}),x=(null===(n=c().A.state.offlinePages)||void 0===n||null===(n=n[r])||void 0===n?void 0:n.isAutosyncedOrigin)??!1,A=(null===(o=c().A.state.offlinePages)||void 0===o||null===(o=o[r])||void 0===o?void 0:o.isExplicitlyOfflinedOrigin)??!1,C=e.device.isPhone&&(0,p().T)("supportsNativeHome")?{is_sidebar_open:!1}:(0,u().hX)({environment:e}),T={eventName:"page_visit",eventProperties:{..._,page_visit_source:w,notification_id:k,page_visit_id:g,previous_page_visit_id:f,entered_at:Date.now(),home_page_type:I,marketplace_state:v,is_autosynced_offline:x,is_explicitly_offline:A,...C}},M={team_id:m,...r?{page_id:r}:{}};l().u4({environment:e,event:T,opts:{forceOverrideAutomaticEventData:M}})}function v(e,t){const{pageVisitId:n,pageVisitDuration:o,...i}=t;l().vd(e,"page_exit",{exited_at:Date.now(),visit_duration:o,page_visit_id:n},{forceOverrideAutomaticEventData:i})}function h(e){const t=[{name:"initial_partner_stack_key",value:e.partner_stack_key,operation:"setOnce"},{name:"partner_stack_key",value:e.partner_stack_key,operation:"set"}];l().J1(t)}function _(e,t){const n=s().iW(t,(0,r().JU)());if(n){const{fbclid:e,gclid:t}=n;e&&o().Mj({type:"facebook",id:e}),t&&o().Mj({type:"google",id:t}),(0,r().Fo)(n)}l().u4({environment:e,event:{eventName:"visit",eventProperties:{}}})}function b(e,t){l().vd(e,"page_error",t)}function y(e,t){l().vd(e,"page_error_button_click",t)}function S(e,t){l().vd(e,"reorder_workspaces",t)}function w(e,t){l().vd(e,"multi_account_add_or_create_account_clicked",t)}function k(e){l().vd(e,"content_classification_proceed")}function I(e,t){l().vd(e,"notion_topbar_click",t,{dontWait:!0}),m().default.logEvent("notion_topbar_click",t.variant)}function x(e,t){l().vd(e,"template_gallery_public_page_topbar_click",t,{dontWait:!0}),m().default.logEvent("template_gallery_public_page_topbar_click",t.target)}function A(e,t){l().vd(e,"getting_started_page_create",t)}function C(e,t){l().vd(e,"debug_getting_started_page_error",t)}function T(e,t){l().vd(e,"landing_page_visit",{routerName:t.routerName,from_cta:t.fromCta}),(0,a().wR)(4e3).then((n=>{m().default.logEvent(`${t.routerName}_page_visit`,e.device.deviceType,{})}))}function M(e,t){l().vd(e,"desktop_app_signup_browser_visit",{desktop_app_reroute_email:t.desktopAppRerouteEmail,desktop_app_device_id:t.desktopAppDeviceId})}function P(e,t,n){const o=e=>({blockId:"blockId"in e?e.blockId:void 0,peekViewBlockId:"peekViewBlockId"in e?e.peekViewBlockId:void 0}),{blockId:r,peekViewBlockId:a}=o(t),{blockId:s,peekViewBlockId:c}=o(n),d="pageVisitSource"in n&&n.pageVisitSource?(0,i().hJ)(parseInt(n.pageVisitSource)):void 0;l().vd(e,"click_in_page_navigation",{current_route_name:t.name,next_route_name:n.name,page_visit_source:d,current_page_id:r,current_peek_view_page_id:a,next_page_id:s,next_peek_view_page_id:c})}function B(e){l().vd(e,"public_page_topbar_edit_click",{},{dontWait:!0}),m().default.logEvent("public_page_topbar_edit_click")}function R(e){l().vd(e,"public_page_topbar_comment_click",{},{dontWait:!0}),m().default.logEvent("public_page_topbar_comment_click")}function E(e){l().vd(e,"public_page_topbar_menu_sign_up_log_in_click",{},{dontWait:!0}),m().default.logEvent("public_page_topbar_menu_sign_up_log_in_click")}},452951:(e,t,n)=>{n.d(t,{Z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("arrowRight",{viewBox:"0 0 30 30",svg:(0,o.jsx)("polygon",{points:"1 14 25.188 14 16.594 5.406 18 4 29 15 18 26 16.594 24.594 25.188 16 1 16"})})},453697:(e,t,n)=>{n.d(t,{A:()=>c,n:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(401497),a=()=>n(962730),s=n(474848);function l(e){return(0,r().IS)((t=>({tooltipTextStyle:{color:t.text.contrastSecondary},tooltipAvatarContainer:{display:"flex",alignItems:"center",marginRight:8},tooltipContainer:{display:"flex",flexDirection:"row",padding:"4px 6px",alignItems:"center",...e},tooltipUserInfoContainer:{overflow:"hidden",textOverflow:"ellipsis"}})),[e])}const c=function(e){const{hasTooltip:t,showAvatarInTooltip:c,tooltipHeader:d,style:u,iconStyle:p,isOffline:m,borderStyle:g,avatarShouldShowShadow:f,initialOverrideStyle:v,tooltipOverrideStyle:h,userValue:_,userStore:b,avatar:y,type:S="avatar",delayThreshold:w}=e,k=(0,n(959013).tz)(),I=e.size??18,{initialStyle:x,avatarWrapStyle:A,avatarStyle:C,personIconStyle:T,proxiedImageStyle:M,suspendedUserIconStyle:P,suspendedUserStyle:B}=(0,r().IS)((e=>({initialStyle:{boxSizing:"content-box",borderRadius:"100%",lineHeight:`${I}px`,width:I,height:I,overflow:"hidden",textAlign:"center",fontSize:Math.max(.4375*I,11),background:e.popoverBackground,userSelect:"none",WebkitUserSelect:"none",color:e.icon.secondary,opacity:m?.3:1,isolation:"auto",...p,...v},avatarWrapStyle:{background:e.UIUserAvatarBackground,borderRadius:"100%",boxShadow:f?e.avatarBoxShadow:"none",outlineWidth:1,outlineStyle:g??"solid",outlineColor:e.stroke.secondary,outlineOffset:-1,...p},avatarStyle:{borderRadius:"100%",width:I,height:I,display:"flex",alignItems:"center",justifyContent:"center",userSelect:"none",WebkitUserSelect:"none",opacity:m?.3:1,...p},personIconStyle:{width:16,height:16,color:e.regularIconColor},proxiedImageStyle:{width:I,height:I,...p},suspendedUserIconStyle:{width:I-2,height:I-2,color:e.lightIconColor},suspendedUserStyle:{boxSizing:"content-box",borderRadius:"100%",width:I-2,height:I-2,overflow:"hidden",background:e.suspendedUIUserAvatarBackground,userSelect:"none",WebkitUserSelect:"none",color:e.text.primary,opacity:m?.3:1,display:"flex",justifyContent:"center",alignItems:"center",...p}})),[v,f,g,m,I,p]),{tooltipTextStyle:R,tooltipAvatarContainer:E,tooltipContainer:D,tooltipUserInfoContainer:N}=l(h),L=(0,o.useMemo)((()=>b??(_?n(792071).Bj6.fromValue(n(798880).oo,_):void 0)),[_,b]),O=(0,i().K8)((()=>null==L?void 0:L.getFullName(k)),[L,k]),U=(0,i().K8)((()=>null==L?void 0:L.getDisplayName(k)),[L,k]),F=(0,i().K8)((()=>null==L?void 0:L.getEmail()),[L]),V=(0,i().K8)((()=>null==L?void 0:L.getProfilePhoto()),[L]),j=(0,i().K8)((()=>null==L?void 0:L.getIsSuspended()),[L]),z=()=>(0,n(91451).z)(T),H=e=>e?(0,s.jsx)(n(807683).Ay,{src:e,style:{width:"100%",height:"100%",borderRadius:"100%"}}):z(),W=e=>(0,s.jsxs)("div",{style:D,children:[(0,s.jsx)("div",{style:E,children:G()}),(0,s.jsxs)("div",{style:N,children:[L?U:null==y?void 0:y.name,!e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("br",{}),L?(0,s.jsx)("span",{style:R,children:F}):null!=y&&y.email?(0,s.jsx)("span",{style:R,children:null==y?void 0:y.email}):null]})]})]}),q=()=>c?W():(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:d}),U,(0,s.jsx)("br",{}),L&&(0,s.jsx)("span",{style:R,children:F})]}),K=e=>{const t=n(634201).PE(e)[0].toUpperCase();return(0,s.jsx)("div",{style:A,children:(0,s.jsx)("div",{style:x,children:(0,s.jsx)("div",{children:t})})})},G=()=>{if(L){if(j)return(0,s.jsx)("div",{style:A,children:(0,s.jsx)("div",{style:B,children:(0,n(116652).o)(P)})});if(V)return(0,s.jsx)("div",{style:A,children:(0,s.jsx)("div",{style:C,children:(0,s.jsx)(n(360083).A,{stripGoogleIconQuery:!0,url:V,isAuthenticated:!1,width:Math.max(Number(M.width),120),render:(e,t)=>H(t)})})});if(O)return K(O);if(F)return K(F)}else if(y){if(y.avatarUrl)return $(y.avatarUrl);if(y.name)return K(y.name);if(y.email)return K(y.email)}return z()},$=e=>(0,s.jsx)("div",{style:A,children:(0,s.jsx)("div",{style:C,children:H(e)})});return t?(0,s.jsx)(n(859428).A,{renderTooltip:q,placement:a().W.Bottom,alignment:a().C.Start,delayThreshold:w,render:e=>(0,s.jsx)("div",{style:u,"aria-label":U,...e,children:G()})}):"avatar-name"===S||"avatar-name-email"===S?W("avatar-name"===S):(0,s.jsx)("div",{style:u,children:G()})}},454305:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{mouseEntered:!1,mousePressed:!1}}enter(){this.setState({...this.state,mouseEntered:!0})}exit(){this.setState({...this.state,mouseEntered:!1})}}const i=o},454503:(e,t,n)=>{n.r(t),n.d(t,{arrowUTurnUpLeftIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M7.592 4.792a.625.625 0 1 0-.884-.884l-4.4 4.4a.625.625 0 0 0 0 .884l4.4 4.4a.625.625 0 1 0 .884-.884L4.259 9.375H14a2.625 2.625 0 0 1 0 5.25h-1.42a.625.625 0 1 0 0 1.25H14a3.875 3.875 0 0 0 0-7.75H4.259z"})},i=(0,n(340498).wt)("arrowUTurnUpLeft",o)},455215:(e,t,n)=>{n.d(t,{A:()=>A});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(75756),l=()=>n(839816),c=()=>n(959013),d=()=>n(673998),u=()=>n(38337),p=()=>n(722872),m=()=>n(438754),g=()=>n(700250),f=()=>n(493823),v=()=>n(760217),h=()=>n(406699),_=()=>n(928600),b=()=>n(939740),y=()=>n(89924),S=()=>n(946548),w=()=>n(125565),k=n(474848);function I(e){let{hasDismissButton:t,onDismiss:n}=e;const r=(0,i().v3)(),g=(0,a().DP)(),v=(0,c().tz)(),[h,S]=(0,o.useState)(!1);(0,o.useEffect)((()=>()=>{t||h&&d().wB()}),[v,h,t]);const I=[{key:"trackingTypes",render:e=>(0,k.jsx)(y().A,{...e,topBorder:0!==e.index}),items:l().dc.map((e=>({key:e,render:t=>(0,k.jsx)(x,{menuListItemProps:t,trackingType:e,setShowReloadOnMenuClose:S,isNativeiOSApp:r.device.isMobileNative&&r.device.isIOS}),action:()=>d().Ef(r,e)})))}];return(0,k.jsxs)(_().A,{className:u().Qm5,menuType:p().gu.Popup,width:260,children:[(0,k.jsx)("div",{style:{display:"flex",alignItems:"center",paddingTop:t?4:0},children:t&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(w().A,{isSmall:!0,isMultiline:!0,style:{width:"80%",paddingLeft:14},children:(0,k.jsx)("b",{children:(0,k.jsx)(c().sA,{...s().LS.customizeCookiesHeader})})}),(0,k.jsx)(f().p,{style:{float:"right",marginLeft:-8,paddingLeft:8,paddingRight:8,color:g.blueColor},onClick:()=>{d().gz(r,m().A.getPermission()),n&&n()},children:(0,k.jsx)(c().sA,{...s().LS.cookieDismissButtonLabel})})]})}),(0,k.jsx)(b().Ay,{type:b().Oh.Vertical,initialFocus:void 0,sections:I})]})}function x(e){const{menuListItemProps:t,trackingType:n,setShowReloadOnMenuClose:o,isNativeiOSApp:l}=e,{title:u,caption:p,subtitle:g}=(0,s().ID)(n,l),[{permission:f}]=(0,r().$y)(m().A),h=(0,a().DP)(),_=(0,i().v3)();return(0,k.jsx)(v().A,{...t,title:(0,k.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,k.jsx)("div",{style:{marginRight:0},children:(0,k.jsx)(c().sA,{...u})})}),caption:(0,k.jsxs)("div",{children:[g&&(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.errorText},children:(0,k.jsx)(c().sA,{...g})})}),(0,k.jsx)("div",{children:(0,k.jsx)("span",{style:{color:h.text.secondary},children:(0,k.jsx)(c().sA,{...p})})})]}),shouldWrapCaption:!0,right:(0,k.jsx)("div",{style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"},children:(0,k.jsx)(S().A,{on:f[n],disabled:"necessary"===n,onClick:()=>{o(!0),d().Ef(_,n)}})})})}const A=function(e){let{renderOrigin:t,hasDismissButton:n,onDismiss:o}=e;return(0,k.jsx)(h().Ay,{popupType:h().z7.Popup,placementToOrigin:g().UV.Bottom,alignmentToOrigin:g().MY.Start,renderOrigin:t,render:()=>(0,k.jsx)(I,{hasDismissButton:n,onDismiss:o})})}},455425:(e,t,n)=>{n.d(t,{$:()=>r});n(898992),n(354520);function o(e){const{userId:t,blockId:n}=e;return`${t||"logged_out"}:${n}`}class i extends(()=>n(757695))().default{getInitialState(){return{temporarilyUnlockedBlockKeys:[]}}isTemporarilyUnlocked(e){const t=o(e);return this.state.temporarilyUnlockedBlockKeys.includes(t)}temporarilyUnlockBlock(e){const t=o(e);this.isTemporarilyUnlocked(e)||this.setState({...this.state,temporarilyUnlockedBlockKeys:[...this.state.temporarilyUnlockedBlockKeys,t]})}relockBlock(e){const t=o(e);this.setState({...this.state,temporarilyUnlockedBlockKeys:this.state.temporarilyUnlockedBlockKeys.filter((e=>e!==t))})}}const r=new i},455968:(e,t,n)=>{n.d(t,{U:()=>a});var o=()=>n(496603);var i=()=>n(991385),r=()=>n(351360);function a(){const{currentUserSettingsStore:e}=r().default.state;if(e&&e.isDefined()){let n={};const r=e.getSettings();return r&&(n={user_persona:r.persona,user_source:r.source,user_use_case:r.use_case,time_zone:r.time_zone,time_zone_region:"string"==typeof r.time_zone?(t=r.time_zone,"N/A"===t?t:t.split("/")[0]):void 0,locale:r.locale,preferred_locale:r.preferred_locale,signup_time:r.signup_time,used_desktop_web_app:r.used_desktop_web_app,used_mobile_web_app:r.used_mobile_web_app,used_mac_app:r.used_mac_app,used_windows_app:r.used_windows_app,used_ios_app:r.used_ios_app,used_android_app:r.used_android_app,user_session_count:(0,i().B)(e.id)}),o().z7(n,o().b0)}var t}},455994:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{panelStates:{mainPage:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1},peek:{isOpen:!1,displayStyle:void 0,isMouseHoveringPanel:!1}}}}updatePanelState(e,t){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:{...this.state.panelStates[e],...t}}})}resetPanelState(e){this.setState({...this.state,panelStates:{...this.state.panelStates,[e]:this.getInitialState().panelStates[e]}})}setOpen(e){this.state.panelStates[e].isOpen||this.updatePanelState(e,{isOpen:!0})}setClosed(e){this.state.panelStates[e].isOpen&&this.updatePanelState(e,{isOpen:!1})}setDisplayStyle(e){const{panelLocation:t,displayStyle:n}=e;this.state.panelStates[t].displayStyle!==n&&this.updatePanelState(t,{displayStyle:n})}setIsMouseHoveringPanel(e){const{panelLocation:t,isMouseHoveringPanel:n}=e;this.state.panelStates[t].isMouseHoveringPanel!==n&&this.updatePanelState(t,{isMouseHoveringPanel:n})}setSidebarIncreasedSizeOfPeekView(e){e!==this.state.detailsSidebarIncreasedSizeOfPeekView&&this.setState({...this.state,detailsSidebarIncreasedSizeOfPeekView:e})}getPanelState(e){return this.state.panelStates[e]}}const i=new o},456328:(e,t,n)=>{n.d(t,{BS:()=>c,CO:()=>a,Hb:()=>l,Y3:()=>r,_T:()=>d});n(898992),n(672577),n(803949),n(814603),n(147566),n(198721);var o=()=>n(997769),i=()=>n(792071);const r=8,a=70,s=1e3;(0,n(959013).YK)({member:{id:"sharedContextualInviteHelpers.member.inviteMessage2",defaultMessage:"{userName} shared a page {pageName} with you."},guest:{id:"sharedContextualInviteHelpers.guest.inviteMessage2",defaultMessage:"Accept {userName}{userNameEndsWithS, select, true {’} other {’s}} invite to view {pageName}."},default:{id:"sharedContextualInviteHelpers.default.inviteMessage",defaultMessage:"Your invitation message"},optional:{id:"sharedContextualInviteHelpers.default.inviteMessagePrefix",defaultMessage:"Optional message..."}});function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;if(!e)return"";const n=o().I(e,"url");let i=e.slice();return n.forEach(((e,t)=>{i=i.replace(e.value,"[link]")})),i.length>t&&(i=`${i.substring(0,t)}...`),i}function c(e){if(!e)return!1;return o().I(e,"url").length>0}function d(e,t){var n;const o=null===(n=i().Bj6.fromValue("block",e).getPermissionItems())||void 0===n?void 0:n.find((e=>"user_permission"===e.type&&e.user_id===t.invited_user_id));if(o&&"invite_id"in o)return o.invite_id}},456663:(e,t,n)=>{n.d(t,{A:()=>r,o:()=>o});let o=function(e){return e[e.Team=0]="Team",e[e.Members=1]="Members",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1,screen:o.Team,description:"",accessLevel:"open",isDefault:!1,name:"",icon:void 0,flowId:n(206267).JW(),pageNumber:1,onClose:void 0}}}const r=new i},457222:(e,t,n)=>{n.d(t,{Y_:()=>u,EE:()=>p});var o=()=>n(508496),i=(n(581454),n.n(n(169749))),r=()=>n(638681);const a=r().array(r().tuple([r().string(),r().boolean()]));class s{constructor(e){this.localStorageStore=void 0,this.localStorageStore=new(n(419494).Ay)({namespace:e,important:!1,trackingType:"necessary"})}getEntryFromLocalStorage(e){let t;try{t=this.localStorageStore.get(e)}catch{}if(t&&null===a.validator(t))return t;this.localStorageStore.remove(e)}get(e){let{key:t}=e;const n=this.getEntryFromLocalStorage(t);if(n)return n.map((e=>{let[t,n]=e;return t}))}getLruCacheFromLocalStorage(e){const t=new(i())({max:10}),n=this.getEntryFromLocalStorage(e)??[];for(const[o,i]of Array.from(n).reverse())t.set(o,!0);return t}set(e){let{key:t,pageId:n}=e;try{const e=this.getLruCacheFromLocalStorage(t);e.set(n,!0);const o=e.dump().map((e=>{let{k:t,v:n}=e;return[t,n]}));this.localStorageStore.set(t,o)}catch{}}}const l=new s("recentlySelectedRelationPagesCache"),c=new s("recentlyVisitedRelationPagesCache");function d(e){let{disableExposureLogging:t}=e;return o().default.getEligibleGroup({experimentId:"initial_relations_search_result_ranking",defaultGroup:"control",disableExposureLogging:t})}function u(e){let{targetCollectionId:t}=e;const n=d({disableExposureLogging:!1});return"rank_by_recently_selected"===n?l.get({key:t}):"rank_by_recently_visited"===n?c.get({key:t}):void 0}function p(e){let{type:t,targetCollectionId:n,pageId:o}=e;const i=d({disableExposureLogging:!0});if(i===t&&"rank_by_recently_selected"===t)l.set({key:n,pageId:o});else{if(i!==t||"rank_by_recently_visited"!==t)return;c.set({key:n,pageId:o})}}},457395:(e,t,n)=>{n.d(t,{n:()=>y,y:()=>S});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);var o=()=>n(17022),i=()=>n(763884),r=()=>n(388821),a=()=>n(179034),s=()=>n(96689),l=()=>n(84520),c=()=>n(294712),d=()=>n(870618),u=()=>n(554493),p=()=>n(303626),m=()=>n(82648),g=()=>n(227440),f=()=>n(508496),v=()=>n(671887),h=()=>n(640812),_=()=>n(449506),b=()=>n(666144);function y(e,t){!function(){w&&g().A.removeListener(w);h().A.reset()}();const n=new AbortController;!async function(e){const{environment:t,userId:n,abortSignal:o}=e,i=await p().N.measure("loadUserContent","(current user)",(()=>async function(e){const{environment:t,abortSignal:n}=e,{defaultRecordCache:o,currentUser:i}=t;if(!o.persistedRecordCache)return;const r=i.id;if(!r)return;const a=[],u=await d().ww({environment:t,recordPointers:[{table:c().GD,id:r}],recurFn:e=>{const t=[],n=e=>{e&&(e.table!==l().mu&&e.table!==c().GD||a.push(e),t.push(e))};return e.table===c().GD?(n(e.getUserPointer()),e.getSpaceViewPointers().forEach(n)):e.table===l().mu?(e.getBookmarkedPagePointers().forEach(n),e.getSharedPagePointers().forEach(n),e.getSharedPagesManualSortPointers().forEach(n),n(e.getSpacePointer())):e.table===s().NX&&e.getPagePointers().forEach(n),t},recordIsRequired:e=>e.table===c().GD||e.table===l().mu});if(n.aborted)return;for(const s of a){const e=u.getModel(s);if(u.getRole(s)&&!e)return void 0}return{recordMap:u.toJson()}}({environment:t,abortSignal:o})));if(!i)return;if(o.aborted)return;const a=r().RecordMapWithRole.create(i.recordMap);b()._O({environment:t,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:a,debugSource:"fetchLocalUserContent"}),h().A.setState({...h().A.state,localSpaceInaccessiblePages:x(a,n)}),h().A.state.readyPromise.resolve(),k(a)}({environment:e,userId:t,abortSignal:n.signal}),I(e).then((()=>{n.abort()}));let o=g().A.state.online;w=()=>{const t=g().A.state.online;!t||o||h().A.state.remoteSpaceInaccessiblePages||I(e),o=t},g().A.addListener(w)}async function S(){await h().A.state.readyPromise.promise}let w;function k(e){o().A.withListenerIgnored((()=>{for(const t of e.getModelsByTable(s().NX)){const e=t.getShortIdStr();e&&t.id&&v().D.setState({...v().D.state,[t.id]:e})}}))}async function I(e){const t=e.currentUser.id,n=f().default.checkGate({gateName:"multi_cell_aware_apis"});if(i().K.set({userId:e.currentUser.id,key:(0,u().H)("prefetchGetSpaces"),value:n}),n){m().yd("await_get_spaces_start");const n=_().callMultiCellApi({eventName:"getSpaces",environment:e,data:{},headers:{},prefetchCacheKey:"getSpaces"}),o={};for await(const e of n){if("success"!==e.type)throw new Error("Request failed");const t=e.data;for(const[e,n]of Object.entries(t.users))o[e]??=[],o[e].push(r().RecordMapWithRole.create(n))}m().yd("await_get_spaces_end");for(const[i,a]of Object.entries(o)){const n=r().RecordMapWithRole.merge(a);b()._O({environment:e,userId:i,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:n,debugSource:"fetchAllUserSpaces"}),i===t&&(h().A.setState({...h().A.state,remoteSpaceInaccessiblePages:x(n,i)}),h().A.state.readyPromise.resolve()),k(n)}}else{m().yd("await_get_spaces_start");const n=await _().callApi({eventName:"getSpaces",environment:e,data:{},prefetchCacheKey:"getSpaces"});if(m().yd("await_get_spaces_end"),"success"!==n.type)throw n.error;for(const[o,i]of Object.entries(n.data)){const n=r().RecordMapWithRole.create(i);b()._O({environment:e,userId:o,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:n,debugSource:"fetchAllUserSpaces"}),o===t&&(h().A.setState({...h().A.state,remoteSpaceInaccessiblePages:x(n,o)}),h().A.state.readyPromise.resolve()),k(n)}}}function x(e,t){const n={};for(const{pointer:o}of e.getByTable(s().NX)){const i=o.id,r=e.getValue({table:s().NX,id:i});if(r){const o=new Set;if(r.pages){for(const t of r.pages){e.getValue({table:a().ev,id:t})||o.add(t)}n[t]||(n[t]={}),n[t][i]=o}}}return n}},459882:(e,t,n)=>{n.d(t,{x:()=>o});const o=900},459887:(e,t,n)=>{n.d(t,{r:()=>i});var o=()=>n(994310);class i{static getNumber(e){const t=o().A.get(e);if("number"==typeof t&&!isNaN(t))return t}static getLatest(){return this.getNumber(this.LAST_TIMEOUT_STORAGE_KEY)}static trackPersistently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();o().A.set(this.LAST_TIMEOUT_STORAGE_KEY,e);const t=this.getTotal()??0;o().A.set(this.TOTAL_TIMEOUTS_STORAGE_KEY,t+1)}static getTotal(){return this.getNumber(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static clear(){o().A.remove(this.LAST_TIMEOUT_STORAGE_KEY),o().A.remove(this.TOTAL_TIMEOUTS_STORAGE_KEY)}static hasOccurredRecently(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();const t=this.getLatest();return"number"==typeof t&&e-t<this.RECENT_TIME_WINDOW_MS}}i.LAST_TIMEOUT_STORAGE_KEY="latestNotionTransactionTimeout",i.TOTAL_TIMEOUTS_STORAGE_KEY="totalNotionTransactionTimeouts",i.RECENT_TIME_WINDOW_MS=7*n(720665).nD,(0,n(604341).exposeDebugValue)("IndexedDBTimeoutTracker",i)},460282:(e,t,n)=>{n.d(t,{c:()=>S});n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(799954),s=()=>n(959013),l=()=>n(284371),c=()=>n(296511),d=()=>n(835066),u=()=>n(792540),p=()=>n(231722),m=()=>n(644914),g=()=>n(962730),f=()=>n(24157),v=()=>n(704152),h=()=>n(859428),_=()=>n(524702),b=n(474848);const y=(0,s().YK)({imageCaption:{defaultMessage:"Write a caption…",id:"block.imageCaption.placeholder"},altText:{defaultMessage:"Add alt text",id:"block.imageCaption.altText.tooltip"}});function S(e){let{captionAriaId:t,disabled:n,store:S}=e;const w=(0,o().v3)(),k=(0,o().Y0)(),I=(0,s().tz)(),x=(0,i().K8)((()=>S.getPropertyStore("caption")),[S]),{shouldShowCaption:A,shouldShowAltTextButton:C}=(0,i().K8)((()=>{var e;const t=x.getValue(),n=!t||0===t.length,o="editing"===f().default.state.mode&&(null===(e=(0,p().H7)(f().default.state.multiSelection))||void 0===e?void 0:e.store)===x;return{shouldShowCaption:!n||o,shouldShowAltTextButton:o&&n&&"image"===S.getType()&&!S.getPropertyValue("alt_text")}}),[x,S]),T=(0,i().K8)((()=>{const{block_full_width:e,block_width:t,block_page_width:n}=S.getFormat();if(k.isMobile)return!1;if(n)return!1;if(e)return!0;const o=(0,d().dC)(w,S);return(t||0)>=w.WindowSizeStore.state.width-(0,m().kf)(w)-(o&&S.isFullWidth()?d().Qb:0)}),[k.isMobile,w,S]),M=(0,r().IS)((e=>({root:{fontSize:14,lineHeight:1.4,color:e.text.secondary,paddingTop:6,paddingBottom:6,paddingLeft:a().nE.paddingLeft,...T&&{paddingLeft:26,paddingRight:26}},buttonWrapper:{position:"absolute",top:3.5,right:0,background:e.tint.regular,color:e.text.secondary,borderRadius:6,opacity:C?1:0,transition:k.isSafari?void 0:"opacity 300ms ease-in",overflow:"hidden"},button:{padding:"4px 6px",fontSize:12,fontWeight:l().Wy.medium,letterSpacing:.2}})),[T,k.isSafari,C]);return A?(0,b.jsxs)("div",{style:{position:"relative"},children:[(0,b.jsx)(_().A,{id:t,disabled:n,style:M.root,placeholderStyle:M.root,placeholder:I.formatMessage(y.imageCaption),disableSlashCommands:!0,disableEmbedMenu:!0,disableRightMarginHoverStyling:!0,store:x,pasteBehavior:"block",inPageFind:u().Os.block_match}),(0,b.jsx)("div",{style:M.buttonWrapper,children:(0,b.jsx)(h().A,{renderTooltip:()=>I.formatMessage(y.altText),placement:g().W.Bottom,disableTooltip:!C,render:e=>(0,b.jsx)(v().A,{...e,ariaLabel:I.formatMessage(y.altText),style:M.button,disabled:!C,onClick:()=>{c().h({blockStore:S,entrypoint:"caption",environment:w})},children:"ALT"})})})]}):null}},460292:(e,t,n)=>{n.d(t,{Q:()=>l});n(16280),n(296540);var o=()=>n(401497),i=()=>n(783982),r=()=>n(187174),a=()=>n(340498),s=n(474848);function l(e){const{colorName:t,iconGroup:n,overrideSize:l,variantName:u,style:p,label:m}=e,g=n.variants[u],f=(null==g?void 0:g.size)||a().CN[u]||a().Ev.default;let v=f;l&&(v=l(v));const h=(0,o().IS)((e=>({svg:{fill:t?e.icon[t]:void 0,flexGrow:0,flexShrink:0,height:v,overflow:"visible",width:v,...p}})),[t,v,p]),_=function(e){const{iconGroup:t,variantName:n}=e,o=t.variants[n],i=function(e,t){return`${e.name}.${t}`}(t,n),[a]=(0,r().Yb)((()=>{if(void 0===c[i]){const e=null==o?void 0:o.loader;if(!e)return Promise.resolve(void 0);{const t=e().then((e=>"default"in e?e.default:e.iconDefinition));c[i]=t}}return c[i]}),[o,i]);return a}({iconGroup:n,variantName:u});if(!g)return(0,s.jsx)(d,{errorText:`Missing variant '${u}' in icon group '${n.name}'`});if("pending"===_.status||"idle"===_.status)return(0,s.jsx)("div",{role:"graphics-symbol","aria-hidden":!0,className:n.name,style:h.svg});const b=_.value;return b?(0,s.jsx)(i().A,{className:n.name,style:h.svg,viewBox:b.viewBox??`0 0 ${f} ${f}`,label:m,children:b.svg}):(0,s.jsx)(d,{errorText:`Error loading variant '${u}' in icon group '${n.name}'`})}const c={};function d(e){const{errorText:t}=e;return null}},461515:(e,t,n)=>{n.d(t,{F:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("image",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M2,2v26h26V2H2z M26,26H4v-4h22V26z M26,20H4V4h22V20z M8,10c1.104,0,2-0.896,2-2S9.104,6,8,6S6,6.896,6,8S6.896,10,8,10z M18,7l-5,5l-2-1l-5,7h18L18,7z M11.635,13.553l1.76,0.881l4.129-4.129L20.631,16H9.887L11.635,13.553z"})})},463830:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=o},464291:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm14 2.625h-5.75v2.25h5.75zm0 3.5h-5.75v2.25H15.5a.875.875 0 0 0 .875-.875zm-7-3.5h-5.75v2.25h5.75zm0 3.5h-5.75v1.375c0 .483.392.875.875.875h4.875z"})},i=(0,n(340498).wt)("tableHeaderRow",o)},464510:(e,t,n)=>{n.d(t,{Kc:()=>qt,je:()=>At,bz:()=>on,PT:()=>vt,SS:()=>Zt,w7:()=>Xt,uh:()=>Rt,d0:()=>Nt,Mg:()=>an,Ii:()=>Pt,it:()=>Dt,X$:()=>St,Uh:()=>nn,Ko:()=>wt,Sk:()=>Ht,L_:()=>Ut,mA:()=>Ot,vx:()=>$t,s$:()=>rn,Eg:()=>_t,nA:()=>Bt,DO:()=>gt,CQ:()=>bt,DM:()=>zt,IC:()=>yt,c1:()=>Tt,LI:()=>Mt,V4:()=>Ft,ic:()=>kt,Mq:()=>tn,QR:()=>un,SP:()=>ft,t$:()=>xt,Oh:()=>Ct,Wj:()=>Qt,Dg:()=>pt,Sf:()=>ut,ne:()=>Yt,KY:()=>Et,h8:()=>ht,bO:()=>Kt,xW:()=>It,M8:()=>Lt,D$:()=>Wt,Zv:()=>cn,$i:()=>ln,V:()=>sn,v_:()=>dt,u1:()=>mt});n(16280),n(944114),n(898992),n(354520),n(672577),n(581454),n(964979),n(814603),n(147566),n(198721);var o=()=>n(584262),i=()=>n(172385),r=()=>n(90023),a=()=>n(857639),s=()=>n(243020),l=()=>n(590265),c=()=>n(386164),d=()=>n(868840),u=()=>n(388821),p=()=>n(861017),m=()=>n(427704),g=()=>n(179034),f=()=>n(197959),v=()=>n(161479),h=()=>n(84520),_=()=>n(798880),b=()=>n(294712),y=()=>n(677338),S=()=>n(994310),w=()=>n(20498),k=()=>n(319625),I=()=>n(498212),x=()=>n(183558),A=()=>n(534177),C=()=>n(939768),T=()=>n(671593),M=()=>n(638681),P=()=>n(662453),B=()=>n(421107),R=()=>n(780054),E=()=>n(867899),D=()=>n(235921),N=()=>n(572088),L=()=>n(529543),O=()=>n(597755),U=()=>n(211716),F=()=>n(310001),V=()=>n(972435),j=()=>n(108944),z=()=>n(836251),H=()=>n(640653),W=()=>n(628315),q=()=>n(719431),K=()=>n(905654),G=()=>n(133234),$=()=>n(222130);class Y extends(()=>n(757695))().default{getInitialState(){return{args:void 0}}}const Q=new Y;var Z=()=>n(852100),X=()=>n(645200),J=()=>n(694498),ee=()=>n(838824),te=()=>n(1130),ne=()=>n(144114),oe=()=>n(607859),ie=()=>n(712287),re=()=>n(154807),ae=()=>n(455994),se=()=>n(406792),le=()=>n(162674),ce=()=>n(696746),de=()=>n(578136),ue=()=>n(457222),pe=()=>n(869562),me=()=>n(749687),ge=()=>n(737230),fe=()=>n(40226),ve=()=>n(155959),he=()=>n(792415),_e=()=>n(351360),be=()=>n(945895),ye=()=>n(559378),Se=()=>n(508496),we=()=>n(53137),ke=()=>n(102946),Ie=()=>n(41161),xe=()=>n(188669),Ae=()=>n(865688),Ce=()=>n(990261),Te=()=>n(547726),Me=()=>n(712505),Pe=()=>n(650031),Be=()=>n(630116),Re=()=>n(502438),Ee=()=>n(404141),De=()=>n(151168),Ne=()=>n(559926),Le=()=>n(452939),Oe=()=>n(848259),Ue=()=>n(222917),Fe=()=>n(449506),Ve=()=>n(541258),je=()=>n(901389),ze=()=>n(415559),He=()=>n(705540),We=()=>n(433052),qe=()=>n(496414),Ke=()=>n(816074),Ge=()=>n(466721),$e=()=>n(775191),Ye=()=>n(661920),Qe=()=>n(730570),Ze=()=>n(507785),Xe=()=>n(666144),Je=()=>n(260488),et=()=>n(426116),tt=()=>n(633457),nt=()=>n(857783),ot=()=>n(755636),it=()=>n(5705),rt=()=>n(867201),at=()=>n(836285),st=()=>n(435009),lt=()=>n(537941);const ct=(0,n(959013).YK)({errorSamlMessage:{defaultMessage:"Could not log you in.",id:"router.loginWithSamlError.message"},appleErrorMessage:{id:"loginActions.loggingInWithApple.errorMessage",defaultMessage:"Something went wrong while trying to log in with Apple."},microsoftErrorMessage:{id:"loginActions.loggingInWithMicrosoft.errorMessage",defaultMessage:"Something went wrong while trying to log in with Microsoft."},passkeyLoginErrorMessage:{id:"loginActions.passkeyLoginError.message",defaultMessage:"Something went wrong while trying to log in with your passkey."},passkeyRegistrationErrorMessage:{id:"loginActions.passkeyRegistrationError.message",defaultMessage:"Something went wrong while trying to register your passkey."},authenticating:{id:"externalIntegrationAuthActions.authenticationWithIntegration.loadingMessage",defaultMessage:"Authorizing with integration…"},backToContent:{id:"router.joinSpaceError.acceptLabel.backToContent",defaultMessage:"Back to my content"},goBack:{id:"router.joinSpaceError.acceptLabel.goBack",defaultMessage:"Go back"},thirdPartyDebugPrefix:{id:"router.debugMessage.thirdPartyError",defaultMessage:"Error from third party"},inviteLinkError:{id:"router.inviteError.message",defaultMessage:"Invite link is not valid. Please contact workspace admin."}});function dt(e,t){if(L().canSetCookie(e))try{const n=new URL(t),o=n.searchParams.get("ps_partner_key"),i=n.searchParams.get("ps_xid"),r="ernot"===n.searchParams.get("utm_content");if(i&&o&&!r){const t={partnerKey:window.atob(o),clickId:i};return L().setS2STrackingCookie(e,t),void Le().rr({partner_stack_key:t.partnerKey})}const a=n.searchParams.get("gspk");if(a&&!r){const t=window.atob(a);return L().setPartnerStackCookie(e,t),void Le().rr({partner_stack_key:t})}}catch(n){}}async function ut(e){st().oo({environment:e,url:m().JZ.root,redirect:!0}),await _e().default.waitUntil((()=>void 0!==_e().default.state.currentSpaceStore));const{currentSpaceStore:t}=_e().default.state;if(H().IL(t)){const t=await L().getCookie(e,"notion_browser_id"),n=Boolean(t)?`?from=marketing&notionDeviceId=${t}`:"?from=marketing";ot().f({environment:e,url:`${R().A.calendar.domainBaseUrl}${n}`,targetSelf:!0})}else J().A.setState({signupCtaAttribution:"marketing"}),X().AJ(e)}async function pt(e){await _e().default.waitUntil((()=>void 0!==_e().default.state.currentSpaceStore)),W().UW(e,"mwn_feature_modal")}function mt(e,t){if(t)try{const{experimentGroups:n,inviteeEmail:o,inviterName:i}=JSON.parse(window.atob(t));Ue().YR(e,{invitee_email:o,invitation_experiment_groups:n}),$().A.setState({...$().A.state,inviteeEmail:o,inviterName:i}),o&&G().A.setState({...G().A.state,email:o})}catch(n){}}async function gt(e,t,n,o){if(!e.currentUser.id)return void st().oo({environment:e,url:m().JZ.root,redirect:!0});let i;if(t.spaceId)i=t.spaceId;else{const{spaceId:t}=await We().wA(e);i=t}Ve().w({nextRoute:{...t,spaceId:i},currentRoute:n,environment:e,query:""}),"updates"===t.tab&&Oe().gI({environment:e,from:"pop"===o?"mobile-back-navigation":"mobile-bottom-bar"})}async function ft(e,t,n){if(!e.currentUser.id)return;Ve().w({nextRoute:t,currentRoute:n,environment:e,query:""});const o=e.device.isElectron&&!(await He().quickSearchVisibilityState.isVisible());Je()._N({environment:e,analyticsFrom:"quick-search",isQuickSearch:!0,doNotTrackOpenSearchEvent:o})}async function vt(e,t,n){e.currentUser.id&&await Ve().w({nextRoute:t,currentRoute:n,environment:e,query:""})}async function ht(e,t,n){if(e.currentUser.id)return Se().default.waitUntilStatsigReady().then((()=>{(0,de().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})?Ve().w({nextRoute:t,currentRoute:n,environment:e,query:""}):st().oo({environment:e,url:m().JZ.root,redirect:!0})}))}async function _t(e,t,n){if(e.currentUser.id)if(await Se().default.waitUntilStatsigReady(),t.templateGalleryItem)await It(e,t);else if("gallery"===t.name){const n=new URL(window.location.href);let o="";o=void 0===t.pageType?t.showBuyerProfileModal?`${m().JZ.marketplace}?bp=true`:m().JZ.marketplace:n.toString().replace("/gallery/","/marketplace/"),st().oo({environment:e,url:o,redirect:!0})}else if(t.pageType&&!(0,l().T6)(t.pageType))st().oo({environment:e,url:m().JZ.marketplace,redirect:!0});else if("search"!==t.pageType||t.query){await Ve().w({nextRoute:t,currentRoute:n,environment:e,query:""});const o=n&&("gallery"===n.name||"marketplace"===n.name),i=n&&o?n:void 0,r=void 0!==i?{url:(0,l().Zi)(R().A,i),marketplace_page_type:i.pageType??"home",product_slug:i.slug,is_previewing:"templates"===i.pageType&&i.preview}:void 0;let a={url:window.location.href,marketplace_page_type:t.pageType??"home",product_slug:t.slug,is_previewing:"templates"===t.pageType&&t.preview,from:r};const s=n&&o&&n.pageType&&!(0,l().T6)(n.pageType),c=n&&o&&"search"===n.pageType&&!n.query;(s||c)&&(a={...a,marketplace_page_type:"home",is_redirect:!0});const d=t.pageType&&(0,l().T6)(t.pageType)?(0,l().xv)({routePageType:t.pageType,slug:t.slug}):"home";Se().default.logEvent("marketplace_visit",d,{source:"in_app"}),Le().yP(e,{query:"",page_id:"",is_peek:!1,peek_mode:void 0,type:"marketplace",page_visit_id:void 0,previous_page_visit_id:void 0,marketplace_state:a})}else st().oo({environment:e,url:m().JZ.marketplace,redirect:!0})}async function bt(e,t){if(!e.currentUser.id)return void st().oo({environment:e,url:m().JZ.root,redirect:!0});const{id:n,type:o,from:i}=t;let r,a;if(t.spaceId)r=t.spaceId;else{const{spaceId:t}=await We().wA(e);r=t}if(r){const{currentUserSettingsStore:t}=_e().default.state,n=new(Be().dZ)(e,{table:b().GD,id:e.currentUser.id});if(await n.load(),void 0===_e().default.state.currentSpaceStore||_e().default.state.currentSpaceStore.id!==r)try{const o=Se().default.checkGate({gateName:"new_page_navigation_fix"}),i=await et().DT({environment:e,userRootStore:n,spaceId:r,navigate:!o,analyticsFrom:"redirect",userSettingsStore:t,redirectSource:"handle_new_page"});o&&_e().default.setState({..._e().default.state,currentSpaceViewStore:i.spaceViewStore,currentSpaceStore:i.spaceViewStore.getSpaceStore()})}catch(s){return void je().rG({message:(0,k().A)(s).message,onAccept:()=>{st().aX(e)}})}}else st().oo({environment:e,url:m().JZ.root,redirect:!0}),await _e().default.waitUntil((()=>void 0!==_e().default.state.currentSpaceStore&&void 0!==_e().default.state.currentSpaceViewStore&&void 0!==_e().default.state.currentUserRootStore));if(o){if(!(0,T().tf)(M().literals(...xe().Zj),o)){const e=o;switch(e){case"page":case"team":n&&(a={type:e,spaceId:r,id:n});break;case"space":n&&(a={type:e,id:n});break;case"space-private-pages":a={type:e,spaceId:r}}}}pe().quickAddPage({environment:e,from:i||"route",redirect:!0,quickAddParentOverride:a})}async function yt(e){if(e.currentUser.isLoggedIn()){if(await te().Wj(e)){await te().ZS(e);const{restoreContextualizedOnboardingState:t}=await E().F.contextualizedOnboardingStateActions.load();await t({environment:e})}}else{const t=oe().default.state,n=D().A.state,o=S().A.get(ne().Zz);t.isOnboarding||"undefined"!==n.flowName||o?st().oo({environment:e,url:m().JZ.signup}):st().oo({environment:e,url:m().JZ.login})}}async function St(e,t){const{code:n,frontPathName:o,upsell:i}=t;if(!n)return void st().oo({environment:e,url:m().JZ.signup});i&&(0,De().ie)(i,e);"fail"===(await q().requestLoginWithGoogleOneTap({environment:e,store:G().A,idToken:n,frontPathName:o})).status&&st().oo({environment:e,url:jt()})}function wt(e){e.currentUser.isLoggedIn()||st().oo({environment:e,url:m().JZ.login}),st().oo({environment:e,url:m().JZ.creatorProfileIntegrations})}function kt(e,t,n){var o;if(e.device.isMobile)return;const i=Me().default.state;let a,s,l=!1,c=!1;if("page"===t.name&&t.peekViewBlockId){const{mainEditorCurrentBlockStore:e}=_e().default.state;if(e){const n=Be().Bv.createChildStore(e,{table:g().ev,id:t.peekViewBlockId});l=Boolean(t.showMoveTo),c=Boolean(t.saveParent),a=n;const o="page"===t.name&&t.peekMode?t.peekMode:void 0;s=(0,Me().getPeekModeFromUrlParam)(o)}}else if((0,p().Dk)(t)&&t.peekViewBlockId){l=!1,c=!1,a=new(Be().Bv)(e,{table:g().ev,id:t.peekViewBlockId});const n=t.peekMode?t.peekMode:void 0,o="team"===t.name?d().O:d().A;s=(0,Me().getPeekModeFromUrlParam)(n)??o}if(!(0,r().mi)(null===(o=a)||void 0===o?void 0:o.getSystemBlockTypeStore().getValue())){if(a&&(!i.open||a.id!==i.targetStore.id||s!==i.mode)){var u,m,f;i.open&&Qe().J(i.presenceStore,e,Ce().o,i.targetStore);const t=Ce().o.getCurrentPageVisitId();Ce().o.initializeNewPageVisitId();const o=Re().default.cloneState(),r=B().A.cloneState(),p=be().A.cloneState(),g=e.currentUser.id;it().If(e,i.mode),it().b$(e),it().aD(e);const v=a.getAssociatedCollectionStore(),h=null==v?void 0:v.getLayoutStore(),_=Boolean(null==h?void 0:h.firstModuleOfType("viewsMain")),{publicPageData:b}=he().A.state,S=(null==v?void 0:v.id)??(null===(u=a.getAssociatedCollectionStore())||void 0===u?void 0:u.id);S&&(0,ue().EE)({type:"rank_by_recently_visited",targetCollectionId:S,pageId:a.id}),Le().yP(e,{page_id:a.id,collection_id:(null==v?void 0:v.id)??(null===(m=a.getCollectionStore())||void 0===m?void 0:m.id),layout_id:null==h?void 0:h.id,layout_has_tabbed_structure:_,team_id:null===(f=(0,j().Uo)(a))||void 0===f?void 0:f.id,form_id:a.isFormBlock()?a.id:void 0,is_peek:!0,peek_mode:s,type:Le().ND(a),query:n,page_visit_id:Ce().o.getCurrentPageVisitId(),previous_page_visit_id:t,user_has_explicit_access:null==b?void 0:b.userHasExplicitAccess,is_dls_viewer:null==b?void 0:b.isDLSViewer,trusted_domains:null==b?void 0:b.domainLinkSharingEnabledDomains});const w=new(Be().Bv)(e,a.pointer),k=new(Te().A),I=new(Pe().A),x=new(Ae().A);Ye().ho(e,{mode:s??d().O,targetStore:w,pageVisitStore:k,presenceStore:I,showMoveTo:l,saveParent:c,loadingContainerStore:x,savedSelectionStoreState:o,savedTableSelectionStoreState:r,savedCollectionViewSelectionStoreState:p,savedSidebarExpandedStoreState:me().sidebarExpandedStore.state}),Qe().I({userId:g,authorizationToken:null==b?void 0:b.presenceAuthorizationToken,rootStore:w,presenceStore:I,environment:e,pageVisitIdStore:Ce().o}),Ge().FZ(e,{blockStore:w,pageVisitStore:k,timestamp:Date.now(),fromPageRefresh:(0,y().oJ)()}),Ie().A.recordVisit({id:a.id,systemBlockType:a.getSystemBlockTypeStore().getValue(),type:U().ig.Default,currentUserId:g})}i.open&&!a&&(Ye().YH(),Qe().J(i.presenceStore,e,Ce().o,i.targetStore),it().If(e,i.mode))}}async function It(e,t){if(!e.device.isMobile&&("page"===t.name||"marketplace"===t.name)&&t.templateGalleryItem){const n=(0,I().G2)(t.templateGalleryItem);let o=m().JZ.marketplace;const i=await Fe().callApi({eventName:"inAppGetTemplateByBlockId",environment:e,data:{blockId:n},userId:e.currentUser.id});if("success"===i.type&&i.data.success&&i.data.template){const e={name:"marketplace"};o=(0,Z().sO)(i.data.template.slug,e)}st().oo({environment:e,url:o,redirect:!0})}}async function xt(e,t,n){const r=t.currentUser.isLoggedIn(),{RouterStore:s,device:l}=t,c=l.isMobileNative,d=s.state.route,u=(e,t)=>{c&&"root"!==s.state.route.name?a().log({level:"warning",from:"routerActions",type:"handleRootRedirect",data:{message:`Prevented ${e} as route has since changed to "${s.state.route.name}"]. Initial route at the start of handleRootRedirect was "${d.name}"}`}}):(c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:`Redirecting for ${e} as route is still root. Initial route at the start of handleRootRedirect was "${d.name}"}`}}),t())};if(r){c&&a().log({level:"info",from:"routerActions",type:"handleRootRedirect",data:{message:"Called handleRootRedirect"}});const e=await(0,H().ex)({environment:t,disableRedirectUrl:!1,blockNoAccessRedirect:!0}),{firstSpaceView:i,lastVisitedSpaceView:s,publicAccessPageId:l,oauthAuthorizationParams:d,userRootStore:p,redirectUrl:m,userSettingsStore:f,userStore:v,isPersonalHomeRedirect:_,lastVisitedUrl:b}=e;_&&(0,le().ZL)({environment:t,from:"on_app_start_page"}),await Se().default.waitUntil((()=>Se().default.state.isLoaded));await te().Wj(t,v)&&await te().ZS(t);const y=oe().default.state,w=t.currentUser.id,k=S().A.get(ne().Zz);if(k&&r)return void(await Kt(t,k));if(d&&i&&(e.onboardingCompleted||ne().Qf(y))){const{responseType:e,redirectUri:n,integrationId:o,state:i,owner:r,userId:a,spaceId:s}=d;return void Ke().t({environment:t,responseType:e,redirectUri:n,integrationId:o,state:i,owner:r,userId:a,spaceId:s})}const I=at().s(void 0);at().I({currentUserId:void 0,params:void 0});const x=(null==n?void 0:n.templateGalleryItem)||(null==I?void 0:I.tg),A=(null==n?void 0:n.projectManagementLaunch)||Boolean(null==I?void 0:I.pjm),T=(null==n?void 0:n.mwnFeatureModalRedirect)||Boolean(null==I?void 0:I.mwn2024);if(y.isOnboarding)if(ne().Qf(y)){if(y.spaceViewId){const e=new(Be().vH)(t,{table:h().mu,id:y.spaceViewId});"workspace_setup"!==y.stage&&await et().tR({environment:t,spaceViewStore:e,userSettingsStore:f,userRootStore:p,templateGalleryItem:null==n?void 0:n.templateGalleryItem,projectManagementLaunch:null==n?void 0:n.projectManagementLaunch,pageVisitSource:o().y8.Onboarding,navigationType:"joiningOrCreatingSpace",forceLandLastVisitedPage:null==n?void 0:n.forceLandLastVisitedPage,redirect:!0})}}else st().kc(t);else if(d&&e.onboardingCompleted){const{responseType:e,integrationId:n,redirectUri:o,state:i,owner:r,userId:a,spaceId:s}=d;Ke().t({environment:t,responseType:e,integrationId:n,redirectUri:o,state:i,owner:r,userId:a,spaceId:s})}else if(l&&e.onboardingCompleted){Ze().iZ({currentUserId:w,blockId:void 0});const e=Be().Bv.createChildStore(p,{table:g().ev,id:l});await e.load(),nt().uK({environment:t,store:e,pageVisitSource:o().y8.Direct})}else if(i&&e.onboardingCompleted){const i=m;if(t.device.isMobile&&!e.mobileOnboardingCompleted)await te().sy(t,{type:"mobile-onboarding",redirectUrl:m,source:"handle_root_redirect"});else if(null!=n&&n.forceLandLastVisitedPage&&b)u("redirectUrl",(()=>{st().oo({environment:t,url:b,redirect:!0})}));else if(i){const e=new URLSearchParams(window.location.search).get("prompt");let n=i;(A||x||T)&&(n=C().O$(n,{tg:x,pjm:A,mwn2024:T})),e&&(n=C().O$(n,{prompt:e})),u("redirectUrl",(()=>{st().oo({environment:t,url:n,redirect:!0})}))}else s?u("lastVisitedSpaceView",(()=>{et().tR({environment:t,spaceViewStore:s,userRootStore:p,userSettingsStore:f,templateGalleryItem:x,projectManagementLaunch:A,pageVisitSource:o().y8.Login,navigationType:"switchingToOrLoadingSpace",forceLandLastVisitedPage:null==n?void 0:n.forceLandLastVisitedPage,redirect:!0})})):(t.device.isMobileNative&&a().log({level:"info",from:"routerActions",type:"SpaceSwitchingDebug",data:{message:"navigateToFirstSpace because handleRootRedirect"}}),u("spaceActions.navigateToFirstSpace",(()=>{et().t9({environment:t,userRootStore:p,userSettingsStore:f,templateGalleryItem:x,projectManagementLaunch:A,pageVisitSource:o().y8.Login,forceLandLastVisitedPage:null==n?void 0:n.forceLandLastVisitedPage,redirect:!0})})))}else{const{publicPageData:e}=he().A.state;if(null!=e&&e.isDLSViewer&&e.pageId){const n=Be().Bv.createChildStore(p,{table:g().ev,id:e.pageId});return await n.load(),void rt().Y({environment:t,store:n,pageVisitSource:o().y8.Login})}await te().sy(t,{type:"new-user",redirectUrl:m,source:"handle_root_redirect"})}}else if(null!=n&&n.assistantQueryPrefill||null!=n&&n.assistantTargetRedirect){const e=(0,i().YQ)({currentUrl:window.location.href,assistantQueryPrefill:null==n?void 0:n.assistantQueryPrefill,assistantTargetRedirect:null==n?void 0:n.assistantTargetRedirect}),o=(0,C().Gm)({url:`${R().A.domainBaseUrl}${m().JZ.login}`,query:{redirectURL:e}});st().oo({environment:t,url:o,redirect:!0})}else if(null!=n&&n.forceLandLastVisitedPage){const e=(0,fe().S)({domainBaseLoginUrl:`${R().A.domainBaseUrl}${m().JZ.login}`,currentUrl:window.location.href,forceLandLastVisitedPage:null==n?void 0:n.forceLandLastVisitedPage});st().oo({environment:t,url:e,redirect:!0})}else st().oo({environment:t,url:m().JZ.login,redirect:!0})}async function At(e,t){const{callbackType:n,encryptedToken:o,encryptedNonce:i,code:r,error:a,encryptedUserObject:s,webBrowserDeviceId:l}=e;if("native"===n&&!t.device.isNative)return void st().eG({url:window.location.href,environment:t});if("user_cancelled_authorize"===a)return G().A.setState({...G().A.state,loginType:"email"}),void st().oo({environment:t,url:Vt()});if(a||!r||!o||!i){const e=V().A.formatMessage(ct.appleErrorMessage);return G().A.setState({...G().A.state,alert:e}),void st().oo({environment:t,url:Vt()})}const c=await q().loginWithAppleAuth({environment:t,encryptedToken:o,encryptedNonce:i,code:r,encryptedUserObject:s,webBrowserDeviceId:l});c&&(G().A.setState({...G().A.state,alert:c}),st().oo({url:Vt(),environment:t}))}async function Ct(e,t){let n;if(e.userId)await q().loginSamlUser({environment:t,userId:e.userId,isNewSignup:e.isNewSignup||!1,previousUserId:e.previousUserId});else if(e.token&&e.csrfState)n=await q().loginSamlUserWithToken({environment:t,csrfState:e.csrfState,token:e.token,isNewSignup:e.isNewSignup||!1,email:G().A.state.email});else{const o=t.device.isElectronMail?void 0:V().A.formatMessage(ct.errorSamlMessage);n=e.error||o}n&&(G().A.setState({...G().A.state,alert:n}),st().oo({environment:t,url:Vt()}))}async function Tt(e,t){let n;if(e.attestation&&e.attemptId)await q().loginUserWithPasskeyVerifyChallenge({environment:t,attestation:JSON.parse(e.attestation),attemptId:e.attemptId});else{const o=t.device.isElectronMail?void 0:V().A.formatMessage(ct.passkeyLoginErrorMessage);n=e.error||o}n&&(G().A.setState({...G().A.state,alert:n}),st().oo({environment:t,url:Vt()}))}async function Mt(e,t){let n;if(e.response&&e.attemptId&&e.csrfToken){const n=await $e().d6({environment:t,attemptId:e.attemptId,attestation:JSON.parse(e.response),shouldValidateCsrfToken:!0,csrfToken:e.csrfToken});null==n||n.created,st().oo({environment:t,url:"?target=profile"})}else{const o=t.device.isElectronMail?void 0:V().A.formatMessage(ct.passkeyRegistrationErrorMessage);n=e.error||o}n&&(G().A.setState({...G().A.state,alert:n}),st().oo({environment:t,url:m().JZ.login}))}async function Pt(e,t){const{callbackType:n,encryptedToken:o,code:i,error:r,webBrowserDeviceId:s}=e,l=sessionStorage.getItem("googleLoginRequestId");if(l&&a().log({level:"info",from:"handleGoogleAuthRedirect",type:"googleAuthRedirect",data:{requestId:l}}),"native"===n&&!t.device.isNative)return void st().eG({url:window.location.href,environment:t});if("access_denied"===r&&G().A.setState({...G().A.state,loginType:"email"}),r||!i||!o)return G().A.setState({...G().A.state,alert:r}),void st().oo({environment:t,url:Vt()});const c=await q().loginWithGoogleAuth({environment:t,encryptedToken:o,code:i,callbackType:"native"===n||"nativeredirect"===n||"nativemailredirect"===n||"nativecalendarredirect"===n?n:void 0,webBrowserDeviceId:s,requestId:l||void 0});c&&(G().A.setState({...G().A.state,alert:c}),st().oo({url:Vt(),environment:t})),sessionStorage.removeItem("googleLoginRequestId")}async function Bt(e,t){const{callbackType:n,encryptedToken:o,encryptedNonce:i,state:r,code:a,error:s,webBrowserDeviceId:l}=e;if("native"===n&&!t.device.isNative)return void st().eG({url:window.location.href,environment:t});if("access_denied"===s&&G().A.setState({...G().A.state,loginType:"email"}),s||!a||!o||!i||!r){const e=V().A.formatMessage(ct.microsoftErrorMessage);return G().A.setState({...G().A.state,alert:e}),void st().oo({environment:t,url:Vt()})}G().A.setState({...G().A.state,loginType:"microsoft_login",thirdPartyToken:o});const c=await q().loginWithMicrosoftAuth({environment:t,encryptedToken:o,encryptedNonce:i,code:a,state:r,callbackType:"native"===n||"nativeredirect"===n||"nativemailredirect"===n||"nativecalendarredirect"===n?n:void 0,webBrowserDeviceId:l});c&&(G().A.setState({...G().A.state,loginType:"email",alert:c}),st().oo({url:Vt(),environment:t}))}function Rt(e,t){tt().oX({environment:t}),st().oo({environment:t,url:m().JZ.login})}async function Et(e){const{route:t,environment:n}=e;"legacy"===t.type?await async function(e){const{route:{code:t,state:n},environment:o}=e;let i;if(t&&n){const e=await Fe().callApi({eventName:"authWithSlack",environment:o,data:{code:t,encryptedState:n}});"failed"===e.type&&(i=e.error.message)}else i="Something went wrong.";i&&je().c1(i);const{url:r}=We().v4(o);st().oo({url:r||m().JZ.root,environment:o})}({environment:n,route:t}):"new"===t.type?await async function(e){const{route:{error:t},environment:n}=e;if(t){const e=V().A.formatMessage((0,N().yJ)(t),{value:t});je().f1(e)}else await tt().oX({environment:n});const{url:o}=We().v4(n);st().oo({url:o||m().JZ.root,environment:n})}({environment:n,route:t}):(0,A().HB)(t)}function Dt(e,t){const{code:n,error:o}=e;!o&&n&&ze().oA(t,n);const{url:i}=We().v4(t);st().oo({url:i||m().JZ.root,environment:t})}async function Nt(e){const{route:t,environment:n,preventRedirectToLastVisitedPage:o}=e;let i=t.error?t.errorDescription||V().A.formatMessage((0,N().yJ)(t.error),{value:t.error}):void 0;try{if(!t.notionState)throw new Error("No notionState.");const e=JSON.parse(decodeURIComponent(t.notionState));await tt().oX({environment:n}),await tt().A1({environment:n,notionState:e})}catch(r){i||(i="An unknown error occurred.")}i&&je().c1(i),o||st().Vl(n)}async function Lt(e){const{route:t,environment:n,integrationId:o,from:i,options:r}=e;let a=t.error?t.errorDescription||V().A.formatMessage((0,N().yJ)(t.error),{value:t.error}):void 0;try{if(!t.state)throw new Error("No state provided.");if(!t.code)throw new Error("No code provided.");qe().m({message:ct.authenticating});const e=await Fe().callApi({eventName:"authWithExternalIntegration",environment:n,data:{code:t.code,state:t.state,...t.name===p().I2.datadogAuthCallback?{accountName:t.organizationName,accountId:t.organizationId,accountDomain:t.site,domain:t.domain}:void 0}});if(qe().V(),"failed"===e.type){var s;const t="access_token_retrieval_failed"===(null===(s=e.body)||void 0===s||null===(s=s.clientData)||void 0===s?void 0:s.type)?V().A.formatMessage(ct.thirdPartyDebugPrefix):void 0;je().Qg(e,t)}else{const{externalObjectInstanceBlockId:t,spaceId:i}=e.data;if(await tt().oX({environment:n}),await tt().A1({environment:n,notionState:{externalObjectInstanceBlockId:t,spaceId:i}}),o&&(0,w().NV)(o)){const e=we().A.bots.state.filter((e=>e.integration_id===o))[0];Ne().dm(n,{integration_id:o,configuration_type:"oauth",bot_id:null==e?void 0:e.id})}}}catch(l){a||(a=(0,k().A)(l).message)}a&&je().c1(a),await async function(e){const{environment:t,integrationId:n,from:o}=e;if((0,F()._I)(n)&&!(0,w().IM)(n)){const{spaceId:e}=await We().wA(t);Ke().t({environment:t,responseType:"code",spaceId:e,integrationId:n,redirectUri:void 0,state:void 0,owner:void 0,userId:void 0})}else"workspace_connections_redirect"!==o&&st().Vl(t)}({environment:n,integrationId:o,shouldOpenSettings:null==r?void 0:r.shouldOpenSettings,from:i})}async function Ot(e,t){const{state:n,password:o,isSignup:i,redirectURL:r,webBrowserDeviceId:a,isMicrosoft:s}=e;se().default.mark("login_time.passcode");const l=await q().loginWithTemporaryPasscode({environment:t,state:n,password:o,redirectURL:r,webBrowserDeviceId:a,passcodeEnterMethod:"magic_link",email:G().A.state.email});s&&G().A.setState({...G().A.state,loginType:"microsoft_login",thirdPartyToken:""}),"fail"===l.status&&(G().A.setState({...G().A.state,alert:l.errorMessage}),i?st().oo({url:jt(),environment:t}):st().oo({url:Vt(),environment:t}))}async function Ut(e,t){const{args:n}=Q.getState(),{webBrowserDeviceId:o}=e;n?await q().handleLoginWithTemporaryPasscodeSuccess({environment:t,...n,webBrowserDeviceId:o}):(a().log({level:"error",from:"routerActions",type:"handleLoginSuccessRedirect",data:{message:"empty args for handleLoginSuccessRedirect"}}),st().oo({url:m().JZ.root,environment:t}))}async function Ft(e,t){const{state:n,password:o}=e,i=await q().loginPasswordReset({environment:t,csrfState:n,password:o,loginStore:G().A});i&&(G().A.setState({...G().A.state,loginType:"email",alert:i}),st().oo({url:Vt(),environment:t}))}function Vt(){switch(y().dY()){case"mail":return m().JZ.loginMail;case"calendar":return m().JZ.loginCalendar;default:return m().JZ.login}}function jt(){switch(y().dY()){case"mail":return m().JZ.signupMail;case"calendar":return m().JZ.signupCalendar;default:return m().JZ.signup}}async function zt(e,t){y().NI(e);const{userId:n,spaceId:o}=e;if(o){const e=n?[n]:t.currentUser.loggedInUserIds;for(const n of e){const e=new(Be().dZ)(t,{table:b().GD,id:n},{userId:n});await e.load();const i=e.getSpaceViewStores();if(i.length>0){await Promise.all(i.map((e=>e.load())));const e=i.find((e=>e.getSpaceId()===o));if(e)return void(await et().yV({environment:t,spaceViewStore:e}))}}}const{currentUserRootStore:i}=_e().default.state;if(i){await i.load();const e=i.getSpaceViewStores().find((e=>{var t;return Boolean(null===(t=e.getSpaceStore())||void 0===t?void 0:t.canRead())}));if(e)return void(await et().yV({environment:t,spaceViewStore:e}))}st().oo({environment:t,url:m().JZ.login,redirect:!0})}function Ht(e){let{environment:t,routeName:n,option:o,redirectUrl:i}=e;const r="microsoft_login"===G().A.state.loginType;if((0,z().w6)(t)){const e=C().t4({publicDomainName:R().A.publicDomainName},window.location.host);Ve().AG({spaceDomain:e,environment:t})}else if(r||!t.currentUser.isLoggedIn()||null!=o&&o.doNotRedirectWhenLoggedIn){const e=new URLSearchParams(window.location.search).get("prompt");Le().Pg(t,{routerName:n,fromCta:Boolean(e)?"ai_magic_box":void 0})}else st().oo({environment:t,url:i??m().JZ.root,redirect:!0})}async function Wt(e,t){const n=e.currentUser.id;if(!n)return void Jt(e);const i=new(Be().dZ)(e,{table:b().GD,id:n},{userId:n});await i.load();const r=await async function(e,t,n){if(n.spaceDomain){const t=await Fe().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceDomain:n.spaceDomain,uniqueId:n.uniqueId}});return"success"===t.type&&t.data.id?t.data.id:void 0}for(const o of t.getSpaceViewStores()){const t=o.getSpaceId();if(!t)continue;const i=await Fe().callApi({eventName:"getIdFromUniqueId",environment:e,data:{spaceId:t,uniqueId:n.uniqueId}});if("failed"!==i.type&&i.data.id)return i.data.id}}(e,i,t);if(!r)return void Jt(e);const a=Be().Bv.createChildStore(i,{table:g().ev,id:r});await a.load(),rt().Y({environment:e,store:a,pageVisitSource:o().y8.Direct})}async function qt(e){const{environment:t,route:n}=e;st().oo({environment:t,url:m().JZ.root,redirect:!0});const[{favoriteImportActions:o}]=await Promise.all([P().aiDependency.load(),async()=>{await _e().default.waitUntil((()=>void 0!==_e().default.state.currentUserSettingsStore&&void 0!==_e().default.state.currentSpaceStore&&void 0!==_e().default.state.currentSpaceViewStore&&void 0!==_e().default.state.currentUserRootStore)),await _e().default.waitUntilRendered()}]);await o.importGtmFavorite({environment:t,importArgs:n})}async function Kt(e,t){const n=await Fe().callApi({eventName:"getPublicPageDataForInviteLink",environment:e,data:{inviteLinkCode:t}});if("success"!==n.type)throw n.error;const i=n.data;he().A.setState({publicPageData:i});const r=()=>{S().A.set(ne().Zz,t),st().kc(e)};if(e.currentUser.isLoggedIn()&&i.spaceId){const{id:n}=e.currentUser;if(n){const s=new(Be().LU)(e,{table:_().oo,id:n});await s.load();if(!s.getFullName(V().A.getIntl())){r();const t=await(0,H().ex)({environment:e,disableRedirectUrl:!1});return void(await te().sy(e,{type:"new-user",redirectUrl:t.redirectUrl,source:"team_invite"}))}const l=new(Be().dZ)(e,{table:b().GD,id:n});await l.load();const{currentUserSettingsStore:c}=_e().default.state;try{const n=await et().DT({environment:e,userRootStore:l,userSettingsStore:c,spaceId:i.spaceId,navigate:!1,analyticsFrom:"redirect",inviteCode:t,redirectSource:"handle_team_invite"});await et().tR({environment:e,spaceViewStore:n.spaceViewStore,userSettingsStore:c,userRootStore:l,pageVisitSource:o().y8.SwitchSpace,navigationType:"joiningOrCreatingSpace",redirect:!0})}catch(a){Gt(e,(0,k().A)(a).message)}}}else e.currentUser.isLoggedIn()&&!i.spaceId?Gt(e,V().A.formatMessage(ct.inviteLinkError)):r()}function Gt(e,t){const{currentUserRootStore:n,currentUserSettingsStore:i}=_e().default.state,r=n&&i;je().rG({message:t,acceptLabel:r?V().A.formatMessage(ct.backToContent):V().A.formatMessage(ct.goBack),onAccept:()=>{S().A.remove(ne().Zz),r?et().t9({environment:e,userRootStore:n,userSettingsStore:i,pageVisitSource:o().y8.Onboarding}):st().aX(e)}})}async function $t(e){await q().actuallyLogoutAndDeleteMostLocalData({environment:e,logoutOrigin:s().d.LogoutRouteVisited})}async function Yt(e){const{environment:t,nextRoute:n,currentRoute:o}=e;"page"===(null==o?void 0:o.name)&&o.blockId||"page"!==n.name||ae().A.setDisplayStyle({panelLocation:"mainPage",displayStyle:t.device.isMobile?"popup":"sidebar"});const i=o&&p().WZ(o)&&o.peekViewBlockId;if(ae().A.getPanelState("peek").isOpen&&i){const e="page"===n.name&&o.peekViewBlockId===n.blockId,i=p().WZ(n)&&o.peekViewBlockId===n.peekViewBlockId&&o.peekMode!==n.peekMode,r=p().WZ(n)&&n.peekViewBlockId&&"page"===n.name&&n.name===o.name&&n.blockId===o.blockId&&o.peekViewBlockId!==n.peekViewBlockId;(e||i||r)&&(0,ie().j)({environment:t,layoutStore:void 0,from:"topbar",panelLocation:n.peekMode?"peek":"mainPage",preventPeekWidthResize:i})}const r=p().WZ(n),a="page"===(null==o?void 0:o.name)&&"page"===n.name&&o.blockId!==n.blockId;!i||r&&n.peekViewBlockId&&o.name===n.name&&!a||ae().A.resetPanelState("peek");const s=p().WZ(n)&&n.peekViewBlockId;!i&&s&&ae().A.setDisplayStyle({panelLocation:"peek",displayStyle:t.WindowSizeStore.state.width<(0,re().QQ)()?"popup":"static_sidebar"});const l=Me().default.peekTargetStore.state,{mainEditorCurrentBlockStore:c}=_e().default.state;if(!c&&!l)return;const d="page"===n.name?n.blockId:void 0,u=d&&c?Be().Bv.createChildStore(c,{table:g().ev,id:d}):void 0;if("page"===n.name&&n.discussionId&&u){const e=(0,Be().Oo)(u,{table:f().$Y,id:n.discussionId,spaceId:(0,v().e)(u.pointer.spaceId)});await e.load();if(e.getKeyStore("resolved").getValue())return pe().setUpdateSidebarTab(ge().tF.Comments),pe().setUpdateExpand({environment:t,isExpanded:!0,from:"resolved_comment",saveDetailsSidebarPreference:!0}),void pe().setUpdateSidebarCommentsMode("resolved")}}async function Qt(e,t){"configureOpenInDesktopApp"in t&&t.configureOpenInDesktopApp&&(await Se().default.waitUntilStatsigReady(),e.device.isDesktop&&(e.device.isMac||e.device.isWindows)&&Ee().A.setState({open:!0,openedFrom:"misc",currentTab:"user_settings",defaultSubtab:void 0,highlightedSetting:Ee().r.OpenInDesktopApp}))}function Zt(e){let t;var n;e&&(t=null===(n=Se().default.getConfigKey("demo_tooltip_tour_config","tour"))||void 0===n?void 0:n[e]);ye().A.setState({tooltipTourOutline:t,isActive:!0,step:t?0:void 0,slug:e})}function Xt(e){let t;try{t=C().he((0,O().P)(window.location.href))}catch{}t&&st().oo({environment:e,url:t})}function Jt(e){const t={name:"notFound"};e.RouterStore.setState({id:(0,x().Ay)(),route:t,action:"push",initialRoute:e.RouterStore.state.initialRoute||t})}function en(e){st().oo({environment:e,url:m().JZ.root,redirect:!0})}async function tn(e,t,n){if(e.device.isMobileNative&&(0,ve().T)("supportsPosts")){if(!e.currentUser.id)return;await Ve().w({nextRoute:t,currentRoute:n,environment:e,query:""})}else en(e)}async function nn(e,t){var n;null!==(n=e.mobileNative)&&void 0!==n&&n.supportsNativeHomeOnPhone()&&Se().default.checkGate({gateName:"allow_mobile_home_redirect"})?lt().navigateToHomeTab(e):e.device.isMobileNative?en(e):await async function(e){const{environment:t,peekViewBlockId:n,peekMode:i,redirect:r}=e,a=(0,C().qn)(window.location.href,"pvs");let s=t.currentUser.id;if(!s&&(st().oo({environment:t,url:m().JZ.login,redirect:!0}),await _e().default.waitUntil((()=>void 0!==_e().default.state.currentUserStore&&void 0!==_e().default.state.currentUserRootStore&&void 0!==_e().default.state.currentSpaceStore)),s=t.currentUser.id,!s))return;const l=await Fe().callApi({eventName:"getHomeEnabledSpaceViews",environment:t,data:{}});if("failed"===l.type)return void en(t);const{usersToSpaceViews:d}=l.data,p=[],g=new(Be().dZ)(t,{table:b().GD,id:s});for(const o of Object.values(d)){const e=u().RecordMapWithRole.create(o.recordMap);Xe()._O({environment:t,userId:s,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,recordMap:e,debugSource:"navigateToPersonalHome"}),p.push(...o.homeEnabledSpaceViewIds.map((e=>Be().vH.createChildStore(g,{table:h().mu,id:e}))))}const{spaceId:f}=await We().wA(t),v=function(e){let{currentUserId:t,lastVisitedSpaceId:n,homeEnabledSpaceViewStores:o}=e;const i=n&&o.find((e=>e.getSpaceId()===n&&e.getParentId()===t));if(i)return i;const r=o.find((e=>e.getParentId()===t));if(r)return r;return o[0]}({currentUserId:s,lastVisitedSpaceId:f,homeEnabledSpaceViewStores:p}),_=ce().x$(v);if(!_||!v)return void en(t);if(await _.load(),!_.isDefined()){const e=await Fe().callApi({eventName:"getUserHomePages",environment:t,data:{spaceViewId:v.id,spaceId:v.getSpaceId()},userId:v.getUserId(),headers:(0,c().WS)({cellId:void 0,recordId:v.id,spaceId:v.getSpaceId()})});if("failed"===e.type||void 0===e.data.recordMap.block)return Le().xn(t,{type:"invalid_home_block_from_redirect",flow_id:"home_redirect"}),void en(t)}const y=a?Number(a):o().y8.PersonalHomeLink;(0,le().ZL)({environment:t,from:y===o().y8.PersonalHomeEmailLink?"email_link":"link"}),nt().uK({environment:t,store:_,redirect:r,peekViewBlockId:n,peekMode:i,pageVisitSource:y})}({environment:e,peekViewBlockId:t.peekViewBlockId,peekMode:t.peekMode})}async function on(e,t,n){t?(await(0,q().clearMostUserStorageAndState)(e),(0,K().kD)()):!e.currentUser.isLoggedIn()||n?(0,K().kD)():await X().J7({environment:e,url:`${R().A.domainBaseUrl}/calendarAuth/`,from:"handleCalendarRedirect",targetSelf:!0})}async function rn(e,t,n){if(e.currentUser.isLoggedIn()){if(!(await async function(e){return 200===(await fetch(m().JZ.authValidate,{method:"POST",credentials:"include"})).status}()))return await(0,q().clearMostUserStorageAndState)(e),void(0,K().kD)()}t?(await(0,q().clearMostUserStorageAndState)(e),(0,K().kD)()):!e.currentUser.isLoggedIn()||n?(0,K().kD)():await(0,ee().Z)({environment:e,from:"handleMailRedirect",targetSelf:!0})}function an(e,t){if(!t.formResponseId||!t.secretKey||!t.formSpaceId)return void st().oo({environment:e,url:m().JZ.root,redirect:!0});e.currentUser.id?function(e,t,n,o){sn(t,n,o),st().oo({environment:e,url:m().JZ.root})}(e,t.formResponseId,t.secretKey,t.formSpaceId):(y().hl(t.formResponseId,t.secretKey,t.formSpaceId,t.formSpaceIntent),st().oo({environment:e,url:m().JZ.login,redirect:!0}))}function sn(e,t,n){ke().A.setState({open:!0,formResponseId:e,secretKey:t,formSpaceId:n}),y().ip()}function ln(e){const{environment:t,redirectRoute:n,options:o}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};return dn({environment:t,redirectURL:C().Gm(n),options:o})}function cn(e){const{environment:t,page:n,options:o}=e;if(t.currentUser.isLoggedIn()||!n.blockId)return{redirected:!1};return dn({environment:t,redirectURL:C().Gm({url:`/${(0,I().Xw)(n.blockId)}`,query:{...n.shouldDuplicate?{duplicate:"true"}:{},...n.workspaceId?{workspaceId:n.workspaceId}:{}}}),options:o})}function dn(e){const{environment:t,redirectURL:n,options:o}=e;if(t.currentUser.isLoggedIn())return{redirected:!1};const i=C().Gm({url:`${R().A.domainBaseUrl}${m().JZ.login}`,query:{redirectURL:n}});return(0,z().J0)(i)?(st().oo({environment:t,url:i,redirect:!0,openInNew:null==o?void 0:o.openInNew}),{redirected:!0}):{redirected:!1}}async function un(e){const{currentUser:t}=e;if(t.isLoggedIn())try{const t=await Fe().callApi({eventName:"getAuthorizedEmailPreferenceCenterLink",environment:e,data:{}});return t&&"success"===t.type&&t.data.preferenceCenterLink?void ot().f({environment:e,url:t.data.preferenceCenterLink,targetSelf:!0}):(a().log({level:"error",from:"routerActions",type:"handlePrivacyCenterRedirect",data:{message:"Did not get a redirect url from the privacy center endpoint"}}),void st().oo({url:m().JZ.root,environment:e}))}catch(n){a().log({level:"error",from:"routerActions",type:"handlePrivacyCenterRedirect",data:{message:(0,k().A)(n).message}}),st().oo({environment:e,url:m().JZ.root})}else ln({environment:e,redirectRoute:{url:m().JZ.privacyCenterRedirect}})}},464708:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var o=()=>n(401497),i=()=>n(284371),r=n(474848);function a(e){const{color:t="gray",style:n,content:a,...s}=e,l=(0,o().IS)((e=>{const o=function(e,t){switch(e){case"blue":return{color:t.text.uiBluePrimary,backgroundColor:t.fill.uiBlueSecondary};case"red":return{color:t.text.uiRedPrimary,backgroundColor:t.fill.uiRedSecondary};case"yellow":return{color:t.text.yellowSecondary,backgroundColor:t.fill.yellowSecondary};case"purple":return{color:t.text.purpleSecondary,backgroundColor:t.fill.purpleSecondary};default:return{color:t.text.secondary,backgroundColor:t.tint.regular}}}(t,e);return{badge:{alignSelf:"center",marginLeft:6,padding:"2px 4px",background:o.backgroundColor,color:o.color,borderRadius:4,fontSize:11,fontWeight:i().Wy.medium,lineHeight:1.3,...n}}}),[n,t]);return(0,r.jsx)("div",{style:l.badge,...s,children:a})}},465741:(e,t,n)=>{n.d(t,{C0:()=>w,CK:()=>M,Dx:()=>A,Fc:()=>B,Gi:()=>_,TW:()=>T,Vm:()=>R,YA:()=>x,d0:()=>v,eb:()=>h,ls:()=>k,mY:()=>y,px:()=>I});n(16280),n(296540);var o=()=>n(847249),i=()=>n(584262),r=()=>n(959013),a=()=>n(284371),s=()=>n(720665),l=()=>n(901389),c=()=>n(476492),d=()=>n(492414),u=()=>n(972435),p=()=>n(731320),m=()=>n(630116),g=()=>n(98205),f=n(474848);const v=5e3,h=500,_=(0,r().YK)({characterLimitReached:{defaultMessage:"Character limit reached.",id:"form.characterLimitReached"},questionLimitReachedTitle:{defaultMessage:"Question limit reached",id:"form.questionLimitReached.title"},questionLimitReachedSubtitle:{defaultMessage:"Please delete a question before creating a new one.",id:"form.questionLimitReached.subtitle"},questionLimitReachedFullMessage:{defaultMessage:"Question limit reached. Please delete a question before creating a new one.",id:"form.questionLimitReached.fullMessage"}}),b=(0,r().YK)({title:{defaultMessage:"Title",id:"database.questionTypeName.title"},text:{defaultMessage:"Text",id:"database.questionTypeName.text"},number:{defaultMessage:"Number",id:"database.questionTypeName.numberTypeLabel"},url:{defaultMessage:"URL",id:"database.questionTypeName.url"},multi_select:{defaultMessage:"Multiple choice",id:"database.questionTypeName.multi_select"},person:{defaultMessage:"Person",id:"database.questionTypeName.person"},email:{defaultMessage:"Email",id:"database.questionTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.questionTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.questionTypeName.dateTypeLabel"},file:{defaultMessage:"Files & media",id:"database.questionTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.questionTypeName.checkbox"},relation:{defaultMessage:"Relation",id:"database.questionTypeName.relation"}}),y={title:u().A.formatMessage(b.title),text:u().A.formatMessage(b.text),number:u().A.formatMessage(b.number),url:u().A.formatMessage(b.url),multi_select:u().A.formatMessage(b.multi_select),person:u().A.formatMessage(b.person),email:u().A.formatMessage(b.email),phone_number:u().A.formatMessage(b.phone_number),date:u().A.formatMessage(b.date),file:u().A.formatMessage(b.file),checkbox:u().A.formatMessage(b.checkbox),relation:u().A.formatMessage(b.relation)},S=["relation","person"];function w(e,t){return t?"closed":e?"shared_to_web":"shared_to_space"}function k(e){const{formSharingState:t,isOverBlockLimit:n,spaceName:o}=e;if(n)return(0,f.jsx)(r().sA,{id:"editorFormResponderWarning.overBlockLimit.message",defaultMessage:"You are over the block limit. No new responses can be submitted through this form."});switch(t){case"closed":return(0,f.jsx)(r().sA,{id:"editorFormResponderWarning.closed.message",defaultMessage:"This form is closed. No new responses can be submitted."});case"shared_to_web":return(0,f.jsx)(r().sA,{id:"editorFormResponderWarning.public.message",defaultMessage:"This form is public. Anyone with the link can submit a response."});case"shared_to_space":return(0,f.jsx)(r().sA,{id:"editorFormResponderWarning.internal.message",defaultMessage:"Only members at {spaceName} can fill out this form.",values:{spaceName:o}})}}function I(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.getIsFormPublic()?(0,d().Ay)({store:e,preferPublicLink:!0,pageVisitSource:i().y8.FormPublicPage}):(0,d().Ay)({store:e,openInCenterPeek:t,pageVisitSource:i().y8.FormInternalPage})}function x(e){var t,n;let{collectionContextStore:o,propertyId:i,questionId:r,area:a,parentModuleId:s,layoutStore:l}=e;const d=o?(0,c().sl)(o):void 0,u=null==o?void 0:o.collectionViewStore(),p=null==o?void 0:o.collectionStore(),m=null==u?void 0:u.getFormat(),f=null==m||null===(t=m.form_block_pointer)||void 0===t?void 0:t.id,v=null==o||null===(n=o.normalizedSchemaStore.state)||void 0===n||null===(n=n[i])||void 0===n?void 0:n.type;if(!p)throw new Error("Collection store is undefined");return{question_type:v,question_id:r,form_id:f,is_conditional:"form_conditional_modules"===a,parent_question_type:(0,g()._N)(s,l,p),...d??{}}}function A(e){const t=null==e?void 0:e.getFormat().form_layout_pointer;if(t)return m().K_.createChildStore(e,t)}const C=new(n(178624).R)({key:"opt_out_form_content_warning",namespace:n(419494).cd,important:!1,trackingType:"preference"});function T(e){const t=C.getState(),n=void 0===t||Date.now()-t>s().nD,o="file"===e.propertyType?(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.message",defaultMessage:"Download file?"}):(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.message",defaultMessage:"Open link?"}),i=(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.description",defaultMessage:"This content was submitted anonymously. Only proceed if you trust the source."}),c="file"===e.propertyType?(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.file.confirmLabel",defaultMessage:"Download anyway"}):(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.url.confirmLabel",defaultMessage:"Open anyway"});n?l().ui({showCancel:!1,showCloseButton:!0,keepFocus:!0,mode:"wide",message:(0,f.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",fontWeight:a().Wy.medium},children:o}),description:(0,f.jsx)("div",{style:{textAlign:"center",fontSize:14},children:i}),items:[{label:c,onAccept:e.onConfirm,color:"red",buttonType:"solid"}],selectionItems:[{key:"opt_out",showBelowButtons:!0,text:(0,f.jsx)("span",{style:{fontWeight:a().Wy.regular},children:(0,f.jsx)(r().sA,{id:"collectionFormHelpers.maybeWarnAboutMaliciousContent.optOut",defaultMessage:"Don't show again for 24 hours"})}),onSelect:e=>{!0===e?C.setState(Date.now()):C.setState(void 0)}}]}):e.onConfirm()}function M(e){const{environment:t,propertyType:n,propertySchema:o,isPublicForm:i}=e;if(i&&S.includes(n)){if("person"===n)return"invalid_property_type_for_public_form";if("relation"===(null==o?void 0:o.type)){const e=o.collection_pointer;if(e){const n=new(m().md)(t,e);if(n.isDefined()){if(!(0,p().qw)(n))return"related_collection_not_public"}}}}}const P=(0,r().YK)({checkboxYes:{id:"FormResponseSnapshotModal.Checkbox.Yes",defaultMessage:"Yes"},checkboxNo:{id:"FormResponseSnapshotModal.Checkbox.No",defaultMessage:"No"}});function B(e){return"true"===e?u().A.formatMessage(P.checkboxYes):u().A.formatMessage(P.checkboxNo)}function R(e){const{formQuestionStore:t,propertySchema:n}=e;return(0,o().K8)((()=>{var e;if(!t||!n)return!1;return 1===("multi_select"===n.type?null===(e=t.getPropertyTypeSpecificConfig("multi_select"))||void 0===e?void 0:e.maxSelectionCount:void 0)||"select"===(null==n?void 0:n.type)}),[t,n])}},466614:(e,t,n)=>{n.d(t,{$2:()=>y,F:()=>b,Lw:()=>w,Rk:()=>h,UK:()=>S,yj:()=>_});var o=()=>n(416845),i=()=>n(693954),r=()=>n(402390),a=()=>n(792071),s=()=>n(100622),l=()=>n(973647),c=()=>n(435009),d=()=>n(436572),u=()=>n(812182),p=()=>n(972435),m=()=>n(71268),g=()=>n(852100),f=()=>n(351360),v=()=>n(547162);function h(e){return!!(e instanceof o().mvP&&e.clientData&&"invalid_destination_imprinted_block"===e.clientData.type)}function _(e){v().A.setState({isOpen:!0,content:e.product})}function b(){v().A.setState({isOpen:!1,content:null})}function y(e,t){if(l().Q.isSuccess(t)&&t.value.restrictedContent.length>0)for(const n of t.value.restrictedContent)S(e,{product:n})}async function S(e,t){var n;const o=t.product,a=null==o?void 0:o.id,l=e.ThemeModeStore.state,v=(0,s().O4)({theme:l}),h=e.device.isMobile,_=null===(n=f().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(h||!a)return void d().D6({label:p().A.getIntl().formatMessage({defaultMessage:"The copied content belonged to a protected template. It has been removed, as the creator has limited redistribution.",id:"accessLocking.restrictedContent.snackbar.title"}),position:"bottom",style:{maxWidth:"calc(100% - 40px)",justifyContent:"center",textAlign:"center"}});const b=await(0,m().ZS)({environment:e,locale:(0,r().H)(p().A.getIntl()),id:a,currentSpaceId:_}),y=null==b?void 0:b.slug;u().Iz({id:a,title:p().A.getIntl().formatMessage({defaultMessage:"A piece of content that was copied belonged to a template",id:"accessLocking.restrictedContent.callout.title"}),message:p().A.getIntl().formatMessage({defaultMessage:"Check out the original template listing in Marketplace",id:"accessLocking.restrictedContent.callout.message"}),presentationType:"persistent",icon:()=>(0,i().Q)({color:v.accentColors.red[500],height:16,width:16}),actions:h?void 0:{primary:{title:p().A.getIntl().formatMessage({defaultMessage:"View template",id:"accessLocking.restrictedContent.callout.action.title"}),onAction:()=>function(t){if(u().UW(a),t){const n={name:"marketplace"};c().oo({environment:e,url:(0,g().sO)(t,n)})}}(y)}}})}function w(e){const{sourceSpaceId:t,targetSpaceId:n,sourceBlockSubtree:o}=e;if(!(n!==t))return!1;const i=function(e){for(const{model:t}of e)if(t instanceof a().zgg&&t.getIsImprintableBlock()&&t.getFormat().installation_imprint)return!0;return!1}(o);return i}},466721:(e,t,n)=>{n.d(t,{Ds:()=>S,FD:()=>b,FZ:()=>y});n(898992),n(354520),n(581454);var o=()=>n(90023),i=()=>n(179034),r=()=>n(874852),a=()=>n(559653),s=()=>n(161479),l=()=>n(496603),c=()=>n(534177),d=()=>n(211716),u=()=>n(731320),p=()=>n(299545),m=()=>n(351360),g=()=>n(41161),f=()=>n(589994),v=()=>n(630116),h=()=>n(449506);const _=32,b=100;async function y(e,t){await m().default.waitUntilRendered();const{fromPageRefresh:n,blockStore:l,pageVisitStore:c,timestamp:_,type:b}=t,y=e.currentUser.id;if(void 0===y||n)return;t.blockStore.id!==c.state.pageId&&c.setState({...c.getInitialState(),pageId:t.blockStore.id});const S=(0,v().Oo)(l,{table:a().F9,id:(0,a().$5)({parent_id:l.id,user_id:y}),spaceId:(0,s().e)(l.pointer.spaceId)}),k=(0,v().Oo)(l,{table:r().ou,id:(0,a().$5)({parent_id:l.id,user_id:y}),spaceId:(0,s().e)(l.pointer.spaceId)});if(await f().transactionQueue.awaitRecordTransaction({table:i().ev,id:l.id}),await(0,p().hS)(l),!l.canRead()||(0,u().qb)(e,l))return;await S.load(),await k.load();const I=S.getKeyStore("visited_at").getValue(),x=k.getKeyStore("exited_at").getValue(),A=await async function(e,t,n,i,r){const{id:a}=e.currentUser,s=t.id,l=t.getSystemBlockTypeStore().getValue();if((0,o().kR)(l))return{type:"skipped"};if(a&&"passive"!==r){var c;null==e||null===(c=e.mobileNative)||void 0===c||c.recordPageVisit(a,{blockId:s,spaceId:n,visitedAt:i}),g().A.recordVisit({id:s,systemBlockType:l,type:d().ig.Default,currentUserId:a})}const u=await h().callApi({eventName:"recordPageVisit",environment:e,data:{block:{id:s,spaceId:n},timestamp:i,type:r},headers:{recordId:s,spaceId:n}});return u}(e,l,(0,s().e)(l.pointer.spaceId),_,b);if("skipped"===A.type)return;if("failed"===A.type)return;const C=w({pageVisits:A.data.pageVisits,currentState:c.state,blockStore:l,totalCount:c.state.totalCount,hasMore:void 0});c.state.pageId===l.id&&c.setState({...C,lastViewTime:I,lastExitTime:x})}async function S(e,t){await m().default.waitUntilRendered();const n=e.currentUser.id;if(void 0===n)return;const{blockStore:o,pageVisitStore:i,incremental:r}=t,a=t.limit||_;let d;if(r){const{pageId:e,lastViewTime:t,lastExitTime:o,totalCount:r,hasMore:a,...s}=i.state,u=Object.entries(s).map((e=>{let[t,o]=e;if(n===t)return;const i=o.getVisitedAt();return void 0!==i?i+1:void 0}));d=l().T9(u.filter(c().O9))}const u=await h().callApi({eventName:"getPageVisitors",environment:e,data:{block:{id:o.id,spaceId:(0,s().e)(o.pointer.spaceId)},sinceTimestamp:d,limit:a,includeTotalCount:t.includeTotalCount},headers:{recordId:o.id,spaceId:(0,s().e)(o.pointer.spaceId)}});if("failed"===u.type)return;const p=w({pageVisits:u.data.pageVisits,blockStore:o,currentState:i.state,totalCount:u.data.totalCount,hasMore:u.data.hasMore});let g;if(Object.keys(p).length<=b)g=p;else{const{pageId:e,lastViewTime:t,lastExitTime:n,totalCount:o,hasMore:i,...r}=p,a=(0,c().WP)(r).map((e=>{let[t,n]=e;return[t,n.getVisitedAt()??0]}));g={pageId:e,lastViewTime:void 0,lastExitTime:void 0,totalCount:o,hasMore:i};const s=l().Ul(a,(e=>{let[,t]=e;return-t})).slice(0,b);for(const[l]of s)g[l]=p[l]}i.state.pageId===p.pageId&&i.setState(g)}function w(e){const{blockStore:t,pageVisits:n,currentState:o,totalCount:i,hasMore:r}=e,l={...o,pageId:t.id,totalCount:i,hasMore:r};for(const c of n){const{id:e,user_id:n}=c;n in l||(l[n]=v().sk.createChildStore(t,{table:a().F9,id:e,spaceId:(0,s().e)(t.pointer.spaceId)}))}return l}},466872:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},467676:(e,t,n)=>{n.d(t,{t:()=>u});var o=()=>n(66689),i=()=>n(110192),r=()=>n(869558),a=()=>n(594794),s=()=>n(972435),l=()=>n(403905),c=()=>n(478251);const d=(0,n(959013).YK)({currentSprintViewDefaultName:{defaultMessage:"Current Sprint",id:"collectionViewActions.typedView.currentSprintViewName"}});function u(e){var t;const{environment:n,collectionViewBlockStore:u,collectionViewStore:p,intl:m,transaction:g,copyNameExactly:f=!1}=e;if(!u)return;const v=p.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:t}=e;return t(p)}));if(!v)return;let h;(null===(t=v.format)||void 0===t?void 0:t.app_config_uri)===o().Lu?s().A.formatMessage(d.currentSprintViewDefaultName):h=f?v.name:(0,i().Q)(v.name||m.formatMessage(l().X[v.type]));const _=(0,a().Z1)({environment:n,table:r().Gy,spaceId:u.getSpaceId()}),b={...v,id:_,name:h};return(0,c().i)({environment:n,collectionViewBlockStore:u,collectionView:b,transaction:g})}},468484:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}setOpen(e,t){this.setState({...this.state,[e]:t})}toggle(e){this.setState({...this.state,[e]:!this.isOpen(e)})}isOpen(e){return Boolean(this.state[e])}}const i=new o},468602:(e,t,n)=>{n.d(t,{M:()=>a,Y:()=>r});var o=()=>n(763884);const i="forkPageTemplate";function r(e){let{currentUserId:t,blockId:n}=e;o().K.set({userId:t,key:i,value:n})}function a(e){return o().K.get({userId:e,key:i})}},468993:(e,t,n)=>{n.d(t,{A:()=>u});n(296540);var o=()=>n(401497),i=()=>n(284371),r=()=>n(774733),a=()=>n(645873),s=()=>n(331542),l=()=>n(773382),c=()=>n(291050),d=n(474848);const u=function(e){let{isLoading:t,file:i,name:r,size:a,progressPercent:s,progressText:l,style:u,iconSvg:m,onClick:g,disabled:f,right:v,shouldHideRight:h,isInComment:_,children:b}=e;const y=(0,o().IS)((e=>({container:{background:e.embedPlaceholderBackground,width:"100%",borderRadius:4},hoveredStyle:_?{background:e.surface.wash}:{}})),[_]);return t?(0,d.jsx)(p,{file:i,name:r,size:a,progressPercent:s,progressText:l,style:u,iconSvg:m,isInComment:_}):(0,d.jsx)("div",{style:y.container,children:(0,d.jsx)(n(704152).A,{onClick:g,disabled:f,hoveredStyle:y.hoveredStyle,children:(0,d.jsx)(c().Ay,{style:{background:void 0,...u},iconSvg:m,right:v,shouldHideRight:h,isInComment:_,children:b})})})};function p(e){let{file:t,name:n,size:u,progressPercent:p,progressText:m,style:g,iconSvg:f,isInComment:v}=e;const h=(0,o().DP)(),{value:_}=(0,a().fJ)(r().commentsDependency);let b;if(t){if(!_)return null;const e=_.discussionHelpers.formatFileSize(u);b=(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{style:v?{fontWeight:i().Wy.medium,color:h.text.primary,fontSize:14,lineHeight:"18px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}:{},children:n}),(0,d.jsx)("div",{style:v?{fontSize:12,lineHeight:"15px"}:c().Zw,children:(0,d.jsxs)("div",{style:{display:"flex",alignItems:"center",...v?{gap:4}:{}},children:[(0,d.jsx)("div",{style:v?{color:h.text.secondary}:{},children:e}),(0,d.jsx)("div",{style:v?{color:h.text.tertiary}:{marginLeft:3},children:v?"—":" – "}),(0,d.jsx)(s().A,{style:v?{}:{marginLeft:3,marginRight:3}}),p?(0,d.jsx)(l().A,{style:v?{color:h.text.tertiary}:{},percentage:p}):m?(0,d.jsx)("span",{children:m}):null]})})]},"FileLoadingSpinner")}else b=(0,d.jsx)("div",{children:(0,d.jsx)(s().A,{style:{marginLeft:3,marginRight:3}})},"LoadingSpinner");return(0,d.jsx)(c().Ay,{style:{...g,...v?{borderRadius:12,background:h.surface.wash}:{}},iconSvg:f,isInComment:v,children:b})}},470333:(e,t,n)=>{n.d(t,{A:()=>c});var o=()=>n(244641),i=()=>n(597777),r=()=>n(604995),a=()=>n(416504),s=()=>n(919709),l=()=>n(319975);function c(e){const{environment:t,blockStore:n,transaction:c}=e,d=n.getBlockTitleStore(),u=o().c9.now(),p=[s().wmz(s().Ww9({type:"datetime",start_date:u.toFormat(r().tr),start_time:u.toFormat(i().GE),time_zone:(0,a().P)(),date_format:"relative"}),[[s().BQP.Bold]])];l().R9({environment:t,store:d,value:p,transaction:c})}},470928:(e,t,n)=>{n.d(t,{$3:()=>y,Do:()=>x,EG:()=>C,Es:()=>S,Io:()=>h,Ur:()=>T,Wk:()=>_,aF:()=>A,h4:()=>k,i1:()=>w,k$:()=>I,xE:()=>b});n(898992),n(803949),n(737550);var o=()=>n(687871),i=()=>n(970013),r=()=>n(713998),a=()=>n(179034),s=()=>n(96689),l=()=>n(245241),c=()=>n(979340),d=()=>n(931075),u=()=>n(646736),p=()=>n(351360),m=()=>n(77246),g=()=>n(508496),f=()=>n(682146),v=()=>n(972435);function h(){return g().default.checkGate({gateName:"page_verification"})}function _(e){var t;let{environment:n,blockStore:o,showUpsell:i}=e;if(!h())return!1;if(n.device.isMobile)return!1;const r=null==o||null===(t=o.getSpaceStore())||void 0===t?void 0:t.getModel();if(!(r&&(0,d().Xi)(r))&&!i)return!1;const a=null==o?void 0:o.getPropertyStore(d()._e.Verification);return(null==a||!a.isDefined())&&((null==o||!o.pathIsDead())&&(!(null==o||!o.canEdit())&&"suggest"!==m().Uv.getMode(o)))}function b(e){return!!h()&&(!!g().default.checkGate({gateName:"page_verification_new_badge"})&&!e.device.isMobile)}function y(e){var t;let{environment:n,collectionStore:o}=e;if(!h())return!1;if(!g().default.checkGate({gateName:"page_verification_upsell"}))return!1;if(n.device.isMobile)return!1;if(o){if(o.isPageTreeCollection())return!1}const i=null===(t=n.currentUser)||void 0===t?void 0:t.id;if(!i)return!1;const{currentSpaceStore:r}=p().default.state;if(!r)return!1;const a=(0,u().dp)(r,i),s=r.getSubscriptionTier(),l=a.isWorkspaceOwner(),d=(0,c().$P)(s);return Boolean(l&&d)}function S(e){var t;let{blockStore:n}=e;if(!h())return!1;const o=null==n||null===(t=n.getSpaceStore())||void 0===t?void 0:t.getModel();if(!o||!(0,d().Xi)(o))return!1;const i=null==n?void 0:n.getPropertyStore(d()._e.Verification);return Boolean(null==i?void 0:i.isDefined())}function w(e){const t=e.getPropertyStore(d()._e.Verification).getValue(),n=(0,d().U1)(t);return(0,d().B2)(n)}function k(e){let{blockStore:t}=e;const n=t.getPropertyStore(d()._e.Owner).getValue(),o=(0,r().e5)({textValue:n,propertySchema:{type:"person",name:"verifier"},blockCreatorPointer:void 0});if(0===o.length){const e=t.getCreatedByPointer();return e?{verificationOwners:[e],isCreatedByDefault:!0}:{verificationOwners:[]}}return{verificationOwners:o}}function I(e){return e===d()._e.Owner||e===o().Z.Owner}function x(e){let{collectionStore:t,propertyId:n}=e;const o=t.getSchema()[n];return!!o&&i().M1(o)}function A(e){const t=e.getSchema(),n=Object.keys(t).some(I),o=(0,f().L6)(t,"verification");return n&&o}function C(e){const{results:t,recordMap:n}=e;if(!h())return;const o={type:"verified",label:v().A.formatMessage(l().Nz.verified),properties:{}};t.forEach((e=>{const{id:t,badges:i,spaceId:r}=e;if(Boolean(i&&i.some((e=>"verified"===e.type))))return;const l=n.getModel({table:s().NX,id:r});if(!l||!(0,d().Xi)(l))return;const c=n.getModel({table:a().ev,id:t});(0,d().sN)(c)&&(e.badges=[...i||[],o])}))}function T(e){var t;const{environment:n,spaceStore:o}=e;if(!h())return!1;const i=o.getModel();if(!i)return!1;const r=null===(t=n.currentUser)||void 0===t?void 0:t.id;if(!r)return!1;const a=(0,u().dp)(o,r),s=o.getSubscriptionTier(),l=(0,c().$P)(s)&&a.isWorkspaceOwner();return(0,d().Xi)(i)||l}},471266:(e,t,n)=>{n.d(t,{A:()=>s});var o=()=>n(917992),i=()=>n(553819);const r={open:!0,isImageLoaded:!1,saveButtonLoading:!1,imageRef:void 0,fixedAspectSelection:void 0,aspectSelectionFlipped:!1,outerContainerSize:void 0,innerContainerSize:void 0};class a extends(()=>n(757695))().default{getInitialState(){return{open:!1}}openModal(e){const{originalSource:t,blockStore:n}=e,a="uploading"===i().A.getStatus(n.id)&&i().A.getMetadataByBlockId(n.id)||{...o().b,...n.getImageEditMetadata()};this.setState({...r,blockStore:n,originalSource:t,editMetadata:a,cropAspect:"Circle"===a.mask?1:void 0})}setSaveButtonLoading(e){this.state.open&&this.setState({...this.state,saveButtonLoading:e})}closeModal(e){var t;null==e||null===(t=e.onClose)||void 0===t||t.call(e),this.setState({open:!1})}getEditMetadata(){return this.state.open&&this.state.editMetadata||o().b}getIsImageLoaded(){return!!this.state.open&&this.state.isImageLoaded}setIsImageLoaded(e){this.state.open&&this.setState({...this.state,isImageLoaded:!0,imageRef:e})}setCrop(e){if(this.state.open){const t={...this.state.editMetadata,crop:e};this.setState({...this.state,editMetadata:t})}}setMask(e){if(this.state.open)switch(this.setState({...this.state,fixedAspectSelection:void 0,aspectSelectionFlipped:!1}),e){case"None":return void this.setFreeform();case"Circle":return void this.setCircleMask();default:(0,n(534177).HB)(e)}}async setFixedAspectRatio(e,t){if(!this.state.open)return;const{width:n,height:i}=o().oU[e],r=t?i/n:n/i,a=this.state.editMetadata,s=await this.getAspectCrop(a,r);s&&this.setState({...this.state,cropAspect:r,editMetadata:{...a,crop:s,mask:"None"},fixedAspectSelection:e,aspectSelectionFlipped:t})}setFreeform(){if(!this.state.open)return;const e=this.state.editMetadata;this.setState({...this.state,cropAspect:void 0,editMetadata:{...e,mask:"None"}})}async setCircleMask(){if(!this.state.open)return;const e=this.state.editMetadata,t=await this.getAspectCrop(e,1);t&&this.setState({...this.state,cropAspect:1,editMetadata:{crop:t,mask:"Circle"}})}async getAspectCrop(e,t){if(this.state.open){var o;const i=null===(o=this.state.imageRef)||void 0===o?void 0:o.current,r=null==e?void 0:e.crop;if(!i||!r)return;const{makeAspectCrop:a}=await n(691648).h.load();return a(r,t,i.width,i.height)}}resetCrop(){this.state.open&&(this.setCrop(o().b.crop),this.setMask(o().b.mask))}}const s=new a},472090:(e,t,n)=>{n.d(t,{E:()=>i});var o=()=>n(397248);class i{constructor(e){this.rect=n(757695).default.createValue(o().v_,{name:"rect"}),this.el=void 0,this.resizeObserver=void 0,this.recomputeThrottled=void 0,this.recompute=()=>{var e;const t=(null===(e=this.el)||void 0===e?void 0:e.getBoundingClientRect())??o().v_;return this.rect.setState(t),t};const t=(null==e?void 0:e.throttleMs)??10;t&&(this.recomputeThrottled=n(496603).nF(this.recompute,t,{leading:!0,trailing:!0}))}observe(e){var t;this.el!==e&&(null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.el=e,"undefined"!=typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.getRecomputeFn()),this.resizeObserver.observe(this.el)),this.recompute())}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=void 0),this.el=void 0}getRecomputeFn(){return this.recomputeThrottled||this.recompute}}},473227:(e,t,n)=>{n.d(t,{CR:()=>l,Nz:()=>u,PD:()=>c,eB:()=>p,tf:()=>d,v8:()=>s});n(16280);var o=()=>n(206267),i=()=>n(534177),r=()=>n(77246),a=()=>n(571062);function s(e){const{navigableBlockStore:t,editorModeConfig:n}=e;if(!t.isNavigableBlock())throw new Error("Can only set editor mode on navigable block.");r().Uv.setStateForBlock(t.id,n)}function l(e){const{navigableBlockStore:t}=e;if(!t.isNavigableBlock())throw new Error("Can only clear editor mode on navigable block.");r().Uv.state&&r().Uv.clearStateForBlock(t.id)}function c(e){const{navigableBlockStore:t,mode:n}=e;"default"===n?p(e):"suggest"===n?u(e):(0,r().Or)(n)||(0,i().HB)(n);let o=t;if(!t.isNavigableBlock()){const e=t.getNavigableBlockStore();if(!e)throw new Error("Store doesn't have a navigable block store.");o=e}const a=r().Uv.state;r().Uv.setState({...a,blockStoreMode:{...a.blockStoreMode,[o.id]:{...a.blockStoreMode[o.id],mode:n}}})}function d(e){const t=r().Uv.getMode(e.navigableBlockStore);c({...e,mode:"default"===t?"suggest":"default"})}function u(e){const{environment:t,location:n}=e,i=o().JW();a().FW({environment:t,from:n,suggesting_session_id:i}),r().Uv.setState({blockStoreMode:{...r().Uv.state.blockStoreMode,[e.navigableBlockStore.id]:{...r().Uv.state.blockStoreMode[e.navigableBlockStore.id],startMilliseconds:Date.now(),sessionId:i}}})}function p(e){const{environment:t,location:n}=e,o=r().Uv.state.blockStoreMode[e.navigableBlockStore.id]||{mode:"default"};o.sessionId&&o.startMilliseconds&&a().uW({environment:t,from:n,suggesting_session_id:o.sessionId,duration_ms:Date.now()-o.startMilliseconds}),r().Uv.setState({blockStoreMode:{...r().Uv.state.blockStoreMode,[e.navigableBlockStore.id]:{...o,startMilliseconds:void 0,sessionId:void 0}}})}},474424:(e,t,n)=>{n.d(t,{g:()=>c});n(581454);var o=()=>n(700500),i=()=>n(713998),r=()=>n(792071),a=()=>n(179034),s=()=>n(519831),l=()=>n(919709);function c(e){const{getRecordValue:t,blockValue:n}=e;let c="";const d={user:new Map},u=r().Bj6.fromBlock(n),p=r().b4_.fromGetRecordValueFn(t);if(u.isCollectionView()){const e=function(e){const{getRecordModel:t,model:n}=e,o=n.getRenderFormatPointer(t);if(!o)return;const r=t(o);if(!r)return;if(r.table===a().ev)return(0,i().yQ)(r,"title")||[];if(r.table===s().Vl)return r.getNormalizedName()}({model:u,getRecordModel:p});e&&e.length>0&&(c=l().$VL(e,p,d).text)}else if(u.isType("file")){c=`${l().$VL(u.getProperty("title"),p,d).text} ${l().$VL(u.getProperty("caption"),p,d).text}`}else if(u.isType("bookmark")){c=`${l().$VL(u.getProperty("title"),p,d).text} ${l().$VL(u.getProperty("description"),p,d).text} ${l().$VL(u.getProperty("caption"),p,d).text}`}else if(u.isType(o().Ib)){const e=u.getProperty("caption");c=l().$VL(e,p,d).text}else if(u.isType(o().xd.tableRow)){const e=function(e){const{blockModel:t,getRecordModel:n}=e,o=n({table:a().ev,id:t.getParentId(),spaceId:t.getSpaceId()});return null==o?void 0:o.getFormatValue("table_block_column_order")}({blockModel:u,getRecordModel:p});if(e){c=e.map((e=>l().$VL(u.getProperty(e),p,d).text)).join(" ")}}else{const e=(0,i().yQ)(n,"title");c=l().$VL(e,p,d).text}return{text:c.trim()||void 0,mentions:d}}},476380:(e,t,n)=>{n.d(t,{HC:()=>R,Hc:()=>D,T5:()=>M,V9:()=>E,VN:()=>C,c2:()=>N,ho:()=>T,zV:()=>P});n(898992),n(354520),n(672577),n(803949),n(941795);var o=()=>n(908006),i=()=>n(919709),r=()=>n(643707),a=()=>n(496603),s=()=>n(534177),l=()=>n(413962),c=()=>n(792540),d=()=>n(347199),u=()=>n(953418),p=()=>n(792002),m=()=>n(712287),g=()=>n(455994),f=()=>n(656219),v=()=>n(143857),h=()=>n(735372),_=()=>n(171018),b=()=>n(24157),y=()=>n(112873),S=()=>n(620689),w=()=>n(255460),k=()=>n(436572),I=()=>n(319975),x=()=>n(725614),A=()=>n(751156);function C(e){const{clearQuery:t,overridePreviousTextSelection:n}=e,{textSelectionOnOpen:o,open:i}=h().Ay.state;i&&("editing"!==b().default.state.mode&&(n?b().default.setState({forceExtendAnnotations:{},mode:"editing",multiSelection:n}):o&&b().default.setState({...o,multiSelection:{start:o.multiSelection.end,end:o.multiSelection.end}})),h().Ay.update((e=>({...e,focused:!1,open:!1,findQuery:t?"":e.findQuery}))))}function T(e){const{environment:t,selectedString:n,textSelectionOnOpen:o}=e,i=n&&n.length>0;h().Ay.update((e=>({...e,open:!0,findQuery:i?n:h().Ay.state.findQuery,focused:!0,showReplaceInput:!1,textSelectionOnOpen:o}))),x().clear({environment:t})}function M(){h().Ay.state.focused||h().Ay.update((e=>({...e,focused:!0})))}function P(){h().Ay.update((e=>({...e,showReplaceInput:!e.showReplaceInput,focused:e.showReplaceInput})))}const B=200;function R(e){const{environment:t,matches:n,replace:o,find:r,intl:d,editorViewEditorModeMap:u}=e,{pageDetails:{activePageDetails:m,secondaryPageDetails:g}}=e,f=o.length-r.length,v=n.filter(s().O9).filter((e=>(0,c().M5)({environment:t,match:e,pageStore:e.view===m.view?m.store:null==g?void 0:g.store}))),_={id:"",columnId:void 0,offset:0};0!==v.length?(v.length>1&&C({clearQuery:!1}),a().iv(v,B).forEach((e=>{A().createAndCommit({userAction:"findAndReplaceInstance",environment:t,canUndo:!0,perform:n=>{e.forEach((e=>{if(!e.allowReplace)return;const{blockStore:a,selection:s}=e,c="block"===e.type,d=c?e.propertyType:e.propertyId,m=a.getPropertyStore(d);if(!m)return;const g=e.blockStore.id,v=c?void 0:e.propertyId;_.id!==g||_.columnId!==v?(_.id=g,_.columnId=v,_.offset=0):_.offset+=f;const h=s.startIndex+_.offset,b=s.endIndex+_.offset,y=("main"===e.view?u.main:u.side_peek)??"default",S=(0,p().DX)({startIndex:h,endIndex:b},m,y).toArray().filter(i().Ta1);if("suggest"===y){const o={start:{store:m,index:h},end:{store:m,index:b}},i=(0,l().RR)(t,n,e.blockStore);(0,l().rY)({environment:t,multiSelection:o,transaction:n,discussionStore:i}),_.offset+=r.length}else I().jQ({environment:t,selection:{startIndex:h,endIndex:b},store:m,transaction:n});const w=S.length>0?[o,S]:[o];I().yr({environment:t,index:"default"===y?h:h+r.length,store:m,tokens:[w],transaction:n,editorMode:y})}))}}),k().rL({item:{label:d.formatMessage({id:"inPageFind.replaceAll.snackbarCopy",defaultMessage:"{numMatches, plural, one {Replaced {numMatches} match} other {Replaced {numMatches} matches}}"},{numMatches:e.length})},undoFunc:()=>{h().Ay.update((e=>({...e,open:!0,showReplaceInput:!0})))}})}))):k().D6({label:d.formatMessage({id:"inPageFind.replaceAll.noMatches",defaultMessage:"No matches replaced"})})}async function E(e){var t;const{match:n,pagePropertiesStore:i,pageStore:a,environment:s}=e;if(!a)return;function l(e){let{isPeek:t}=e;const n=t?"peek":"mainPage";"popup"===g().A.getPanelState(n).displayStyle&&(0,m().F)({environment:s,from:"search",panelLocation:n,layoutStore:void 0})}const c="main"!==n.view;switch(n.type){case"block":case"simple_table_cell":await w().NH(a,[n.blockStore.id]),l({isPeek:c});break;case"page_property_name":case"page_property_value":const e=a.getAssociatedCollectionStore(),r=null==e||null===(t=e.getNormalizedPropertyGroups())||void 0===t?void 0:t.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(n.propertyId)}));n.visible||!i||i.state.forceShowProperties||i.update((e=>({...e,forceShowProperties:!0})));if(!(null==e?void 0:e.getLayoutStore()))break;n.isMatchInLayoutPageDetails?(0,m().j)({environment:s,from:"search",panelLocation:c?"peek":"mainPage",layoutStore:void 0}):l({isPeek:c}),n.isPropertyInGroup&&r&&f().A.setPropertyGroupExpandedOverride({groupId:r.id,override:"open"});break;case"comment":l({isPeek:c}),await w().NH(a,[n.blockStore.id]);const d=v().A.find((e=>e.getStore().id===n.discussionId)),p=null==d?void 0:d.getNode();if(!(p&&p instanceof Element))return;const g=p.getBoundingClientRect();await y().B4({analyticsFrom:"in_page_find",blockStore:n.blockStore,environment:s,shouldFocusDiscussion:!1,recursivelyLoadAllDiscussions:!1,rect:g}),await o().default.afterNextFlush((()=>{const e=null==d?void 0:d.getMarginDiscussionScrollContainer();if(e){const t=e.getNode();t&&u().VG({element:t,environment:s,options:{top:t.scrollHeight,behavior:"smooth"}})}}))}("page_property_name"!==n.type&&"page_property_value"!==n.type||!n.isMatchInLayoutPageDetails)&&await async function(e,t){await o().default.afterNextFlush();const n=document.getElementsByClassName(r().wT).item(0);if(!n)return;const i="main"===e.view?d().A.PageScroller:d().A.PeekViewScroller;if(!i)return;S().hT({element:n,environment:t,scrollerContext:{verticalScroller:i,horizontalScroller:void 0},vertical:{reveal:"closest"},horizontal:void 0,animate:!1})}(n,s)}function D(e,t){const n=e.getElementsByClassName(r().wT);if(!n.length)return;const o=n.item(0);o&&(0,u().$v)({element:o,environment:t,blockAlignment:"center",inlineAlignment:"nearest",behavior:"auto"})}function N(e,t){var n;if("page_property_name"!==t.type&&"page_property_value"!==t.type)return;const o=t.propertyId,i=e.getAssociatedCollectionStore(),r=null==i||null===(n=i.getNormalizedPropertyGroups())||void 0===n?void 0:n.find((e=>{let{propertyIds:t}=e;return null==t?void 0:t.includes(o)}));return(0,_().es)(null==r?void 0:r.id)}},476492:(e,t,n)=>{n.d(t,{nL:()=>E,sl:()=>I,kz:()=>C,tv:()=>B,ax:()=>R,Cu:()=>T,K6:()=>P});n(898992),n(354520),n(672577),n(803949);var o=()=>n(584262),i=()=>n(410690),r=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454),n(908872),n(737550),()=>n(534177)),a=()=>n(720665),s=()=>n(289915),l=()=>n(921598),c=()=>n(970013),d=()=>n(381891),u=()=>n(400017);function p(e,t,n){return void 0!==e&&((0,s().dU)(e)?Boolean(null===(o=e.filters)||void 0===o?void 0:o.some((e=>p(e,t,n)))):!!(0,s().yX)(e)&&n.has(e.property));var o}function m(){return(0,a().MU)(c().Pl.map((e=>[e,0])))}function g(e,t){const n=m();if(void 0===e)return n;var o;if((0,s().dU)(e))return(null===(o=e.filters)||void 0===o?void 0:o.reduce(((e,n)=>{const o=g(n,t);for(const[t,i]of(0,r().WP)(o))e[t]+=i;return e}),n))||n;if((0,s().yX)(e)){var i;const o=null===(i=t[e.property])||void 0===i?void 0:i.type;return o&&(n[o]+=1),n}return(0,s().LB)(e)?(n[e.timestamp]+=1,n):n}function f(e,t){const n=new(u().A);if((0,s().yX)(e)){var o;const i=e.filter.operator;"relation"===(null===(o=t[e.property])||void 0===o?void 0:o.type)&&(0,s().j)(i)&&n.add({operator:i,schema:t[e.property]})}else(0,s().dU)(e)?e.filters&&e.filters.forEach((e=>f(e,t).valuesArray().forEach((e=>{let{operator:t,schema:o}=e;return n.add({operator:t,schema:o})})))):(0,s().LB)(e);return n}function v(e,t,n,o){const i=(0,r().uv)(e),a=new Set;for(const r of i){var s;(null===(s=e[r])||void 0===s?void 0:s.type)===o&&a.add(r)}const l=p(t,e,a),c=Boolean(n&&n.some((e=>a.has(e.property))));return l&&c?"in_filter_and_sort":c?"in_sort":l?"in_filter":void 0}var h=()=>n(329199),_=()=>n(632905),b=()=>n(248566),y=()=>n(351360),S=()=>n(940371),w=()=>n(961581),k=()=>n(347320);function I(e,t){const n=null==e?void 0:e.collectionViewBlockStore(),i=null==e?void 0:e.collectionStore(),r=null==e?void 0:e.collectionViewStore(),a=null==e?void 0:e.filtersBarOpenStore.state,s=null==r?void 0:r.getType(),l=(null==e?void 0:e.settingsStore)&&(0,S().S)(null==e?void 0:e.settingsStore),c=null==r?void 0:r.getChartType(),d=null==r?void 0:r.getChartPlaceholderType(),u=null==r?void 0:r.getFormId(),p=null==n?void 0:n.id,m=null==e?void 0:e.getPageVisitSourceOverride(),g=Boolean(null==e?void 0:e.viewsModuleContextStore.getState()),f=g&&Boolean(null==e?void 0:e.viewsModuleContextStore.isInLayoutBuilder()),v=null==e?void 0:e.getPreviewContextAnalytics(),h="workflow_templates_onboarding"===(null==v?void 0:v.location);return{view_type:s,context_type:null==e?void 0:e.contextType,is_full_screen:null==e?void 0:e.isFullScreenStore.state,settings_menu:null!=e&&e.settingsStore.state.open&&l?l.type:void 0,collection_id:t||(null==i?void 0:i.id),collection_view_id:null==r?void 0:r.id,collection_view_block_id:p,filters_bar_open:a,is_in_wiki:null==n?void 0:n.isCollectionViewPageWithContent(),module:g?"viewsMain":void 0,is_in_template_onboarding:h,flow_id:null==v?void 0:v.flowId,is_in_page_builder:f,personal_home_type:m?(0,o().hJ)(m):void 0,database_visit_id:null==e?void 0:e.visitSessionId,chart_type:"placeholder"===c?d:c,is_chart_placeholder:"placeholder"===c,form_id:u}}const x="missing_context_store",A="missing_schema";function C(e,t){var n,o,i,s,c,u,p,_;if(!e)return{view_type:x,row_count_category:x,column_count_category:x,has_relation_column:x,has_rollup_column:x,has_formula_column:x,formula_property_state:x,rollup_property_state:x,is_client_mode_enabled:x,tracking_source:void 0,collection_view_block_id:x,collection_view_id:x,collection_id:x,collection_type:x,collection_request_backend:x,has_groups:x,has_aggregations:x,has_estimated_aggregations:x,group_reducer_version:x,database_visit_id:x,is_full_screen:x,product_use_case:x,is_multi_source_view:x,uses_subitems:x,property_visibility:x,property_sort:x,property_filter:x,property_groups:x,relation_loader_status:x,group_sorts:x,is_wiki:x,is_relation_querying_eligible:x,virtualized_columns_enabled:void 0};const b=e.isClientModeEnabledStore.state,y=e.isFullScreenStore.state,S=e.productUseCase||"missing",w=(null===(n=e.collectionViewBlockStore())||void 0===n?void 0:n.id)||"missing",k=e.collectionViewStore(),I=(null==k?void 0:k.id)||"missing",C=(null===(o=e.collectionStore())||void 0===o?void 0:o.id)||"missing",P=null==k?void 0:k.getCollectionSource(),B=null===(i=e.collectionStore())||void 0===i?void 0:i.getSchema(),R=e.requestBackend,E=e.isMultiSourceView;if(!B)return{view_type:A,row_count_category:A,column_count_category:A,has_relation_column:A,has_rollup_column:A,has_formula_column:A,formula_property_state:A,rollup_property_state:A,is_client_mode_enabled:b,tracking_source:t,collection_view_block_id:w,collection_view_id:I,collection_id:C,collection_type:(null==P?void 0:P.type)||"missing",collection_request_backend:R,has_groups:A,has_aggregations:A,has_estimated_aggregations:A,group_reducer_version:A,database_visit_id:e.visitSessionId,is_full_screen:y,product_use_case:S,is_multi_source_view:E,uses_subitems:A,property_visibility:A,property_sort:A,property_filter:A,property_groups:A,relation_loader_status:A,group_sorts:A,is_wiki:A,is_relation_querying_eligible:A,virtualized_columns_enabled:void 0};const{has_relation_column:D,has_rollup_column:N,has_formula_column:L}=function(e){if(void 0===e)return{has_relation_column:A,has_rollup_column:A,has_formula_column:A};let t=!1,n=!1,o=!1;for(const i of Object.values(e))if("relation"===(null==i?void 0:i.type)&&(t=!0),"rollup"===(null==i?void 0:i.type)&&(n=!0),"formula"===(null==i?void 0:i.type)&&(o=!0),t&&n&&o)break;return{has_relation_column:t,has_rollup_column:n,has_formula_column:o}}(B),O=null===(s=e.remoteRequestStore.state)||void 0===s?void 0:s.loader;let U="missing",F="missing",V="missing";O&&(U=h().V0(O),F=h().NM(O),V=h().P1(O));const j=e.getPropertyFormatKey(),z=m();let H=0;if(k&&j){var W;const e=null==k||null===(W=k.getPropertyFormatsStore(j))||void 0===W?void 0:W.getValue();e&&e.forEach((e=>{if(e.visible){var t;H+=1;const n=null===(t=B[e.property])||void 0===t?void 0:t.type;n&&(z[n]+=1)}}))}const q=Boolean(null===(c=e.collectionStore())||void 0===c?void 0:c.getFormat().subitem_property),K=z,G=function(e,t){const n=m();return void 0===e||e.forEach((e=>{var o;const i=null===(o=t[e.property])||void 0===o?void 0:o.type;i&&(n[i]+=1)})),n}(null==O?void 0:O.sort,B),$=g(null==O?void 0:O.filter,B),Y=function(e){const t=m();if(null==e||!e.reducers)return t;const n=Object.values(e.reducers).filter((e=>"groups"===e.type));if(0===n.length)return t;for(const o of n)t[o.groupBy.type]+=1,void 0!==o.subGroup&&(t[o.subGroup.groupBy.type]+=1);return t}(O),Q=function(e){const t={manual:0,ascending:0,descending:0};if(null==e||!e.reducers)return t;const n=(0,r().WP)(e.reducers).filter((e=>{let[t,n]=e;return(0,d().BF)(n)}));if(0===n.length)return t;for(const[o,i]of n)(0,d().BF)(i)&&!o.startsWith(l().RO)&&(t[("formula"===i.groupBy.type?i.groupBy.groupBy:i.groupBy).sort.type]+=1);return t}(O),Z=function(e,t){const n={is_empty:!1,is_not_empty:!1,relation_contains:!1,relation_does_not_contain:!1,in_group:!1,in_aggregation:!1};if(!e)return n;const o=e=>"relation"===(null==e?void 0:e.type)&&(1!==e.limit||"limit_of_1");if(e.filter&&f(e.filter,t).valuesArray().forEach((e=>{let{operator:t,schema:i}=e;"limit_of_1"!==n[t]&&(n[t]=o(i))})),!e.reducers)return n;for(const r of Object.values(e.reducers)){if((0,d().BF)(r)){var i;const e=r.groupBy,a=null===(i=r.subGroup)||void 0===i?void 0:i.groupBy,s="relation"===e.type?t[e.property]:void 0,l="relation"===(null==a?void 0:a.type)?t[a.property]:void 0,c=o(s),d=o(l);n.in_group=Boolean(c||d),"limit_of_1"!==c&&"limit_of_1"!==d||(n.in_group="limit_of_1")}if((0,d().dV)(r)&&r.filter&&f(r.filter,t).valuesArray().forEach((e=>{let{operator:t,schema:i}=e;"limit_of_1"!==n[t]&&(n[t]=o(i))})),(0,d().DW)(r)&&"count"!==r.aggregation.aggregator){const e=r.aggregation.property;if(!e)continue;const i=t[e];n.in_aggregation=o(i)}}return n}(O,B),X=Boolean(null===(u=e.collectionStore())||void 0===u?void 0:u.isPageTreeCollection()),J=!0===(ee=Z).in_group||!0===ee.relation_does_not_contain||!0===ee.is_empty||!0===ee.is_not_empty||!0===ee.in_aggregation;var ee;const te=(0,a().LG)(Z,(e=>Boolean(e))),ne=null===(p=Object.values((null==O?void 0:O.reducers)??{}).find((e=>"groups"===e.type)))||void 0===p?void 0:p.version;return{view_type:e.getViewType()||"unknown",row_count_category:T(null===(_=e.remoteResultStore.state)||void 0===_?void 0:_.sizeHint),column_count_category:M(H),has_relation_column:D,has_rollup_column:N,has_formula_column:L,formula_property_state:v(B,null==O?void 0:O.filter,null==O?void 0:O.sort,"formula"),rollup_property_state:v(B,null==O?void 0:O.filter,null==O?void 0:O.sort,"rollup"),is_client_mode_enabled:b,tracking_source:t,collection_view_block_id:w,collection_view_id:I,collection_id:C,collection_type:(null==P?void 0:P.type)||"missing",collection_request_backend:R,has_groups:U,has_aggregations:F,has_estimated_aggregations:V,group_reducer_version:ne,database_visit_id:e.visitSessionId,is_full_screen:y,product_use_case:S,is_multi_source_view:E,uses_subitems:q,property_visibility:K,property_sort:G,property_filter:$,property_groups:Y,relation_loader_status:te,is_relation_querying_eligible:J,group_sorts:Q,is_wiki:X,virtualized_columns_enabled:e.virtualizedModule.getVirtualizedColumnsEnabled()}}function T(e){return void 0===e?"unknown":(t=e)<=1e3?"0-1K":t<=2500?"1K-2.5K":t<=5e3?"2.5K-5K":t<=1e4?"5K-10K":t<=25e3?"10K-25K":t<=5e4?"25K-50K":t<=1e5?"50K-100K":t<=2e5?"100K-200K":t<=5e5?"200K-500K":t<=1e6?"500K-1M":"1M+";var t}function M(e){return void 0===e?"unknown":e<=5?"0-5":e<=10?"6-10":e<=20?"10-20":e<=50?"20-50":"51_or_more"}function P(e){const{from:t,collectionContextStore:n,sizeHintAtStart:o}=e,i=C(n),{row_count_category:r,...a}=i;return{...a,from:t,property_type:"property_type"in e?e.property_type:void 0,did_trigger_fetch:n?n.isLoadingStore.state:x,row_count_category:T(o)}}function B(e){const{collectionContextStore:t,is_native_drop:n,is_empty:o}=e;return{...C(t),is_native_drop:n,is_empty:o}}function R(e){var t,n;const{environment:o,collectionContextStore:r,visibleItemsCount:a,isPrewarmedTab:s,cvbLoadingStateOnInitialRender:l}=e,c=C(r),d=r.remoteResultStore.state?h().uX({result:r.remoteResultStore.state}).length:0,u=0===d?void 0:a/d,p=null===(t=y().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),m=r.collectionViewStore(),g=null==m?void 0:m.id,f=(0,k().A)(g),v=null===(n=o.prefetchCache)||void 0===n?void 0:n.getPrefetchAnalytic(f);return{...c,percentage_of_remote_result_visible:void 0===u?"empty_remote_result":0===u?"0":u<=.25?"0-25":u<=.5?"25-50":u<=.75?"50-75":u<1?"75-100":1===u?"100":"greater_than_100",wasm_sqlite_initialized:w().A.state.metricDataStore.state.wasm_sqlite_initialized,did_prefetch:"hit-match"===(null==v?void 0:v.type),prefetch_analytic_type:null==v?void 0:v.type,initial_cvb_loading_state:l,is_mobile_background_launch:(0,b().A)(),was_server_response_from_cache:r.wasServerResponseFromCache,was_initial_render_empty:e.wasInitialRenderEmpty,collection_request_backend:r.requestBackend,relation_querying_group:r.relationQueryingGroup,workspace_tag:void 0!==p?_().wB[p]:void 0,includes_page_origin_to_app_start:!0,time_origin_to_app_start:i().getAppStartTime(),is_prewarmed_tab:s}}function E(e){const t=e.collectionViewStore(),n=null==t?void 0:t.getChartConfig();return{new_data_config:"placeholder"===(null==n?void 0:n.type)||null==n?void 0:n.dataConfig,chart_type:null==t?void 0:t.getChartType()}}},477244:(e,t,n)=>{n.d(t,{W:()=>d});var o=()=>n(484714),i=()=>n(847249),r=()=>n(578872),a=()=>n(792415),s=()=>n(351360),l=()=>n(488999),c=()=>n(311337);function d(){const e=(0,o().v3)(),t=(0,i().K8)((()=>(0,c().y)(e)),[e]);return{furthestPublicShareAncestorId:(0,i().K8)((()=>{var e,n;const{mainEditorCurrentBlockStore:o}=s().default.state;var i;if(t&&o)return null!==(e=a().A.state.publicPageData)&&void 0!==e&&e.isPublicShareLink?null===(i=(0,l().A)(o))||void 0===i?void 0:i.id:null===(n=(0,r().GN)(o))||void 0===n?void 0:n.id}),[t]),overriddenPublicShareLinkSpaceStore:(0,i().K8)((()=>{if(!t)return;const{mainEditorCurrentBlockStore:e}=s().default.state;return null==e?void 0:e.getSpaceStore()}),[t])}}},477293:(e,t,n)=>{n.d(t,{r:()=>r});var o=()=>n(847249),i=()=>n(508496);function r(e){return(0,o().K8)((()=>i().default.getGroup(e)),[e])}},477450:(e,t,n)=>{n.d(t,{A:()=>v,v:()=>h});n(16280);var o=n(296540),i=()=>n(872994),r=()=>n(17022),a=()=>n(484714),s=()=>n(847249),l=()=>n(534177),c=()=>n(921855),d=()=>n(713972),u=()=>n(906537),p=()=>n(24157),m=n(474848);let g=!1;const f=new(n(757695).default)("FALSE_STORE");f.setState(!1);const v=o.forwardRef((function(e,t){const v=(0,a().Y0)(),b=(0,a().v3)(),y=(0,n(959013).tz)(),S=(0,o.useRef)(null),w=(0,o.useRef)(!1),k=(0,o.useRef)(!1),I=(0,i().y)(),{debugName:x,store:A,onContextMenu:C,onDoubleClick:T,onMouseDown:M,onTouchStart:P,placeholder:B,onBlur:R,onFocus:E,onMouseOver:D,onMouseOut:N,suppressNewlineEvents:L,getHtml:O,getSelection:U,expandSelectionOnTripleClick:F,onSelect:V,onMutation:j,onClick:z}=e,H=(0,s().O$)(e.canEditStore||f,"ContentEditableLeaf_canEditStore"),W=e.canEditStore?!H:e.isDisabled??!1,q=(0,n(645873).fJ)(n(403831).X,{disabled:!0}),K=(0,o.useRef)(""),G=(0,o.useRef)(),$=(0,s().K8)((()=>{const e=`${x}.ContentEditableLeaf`;try{const{status:t,value:n}=q;if("resolved"===t&&n.ErrorBoundaryDebuggingStore.shouldComponentThrow(e))throw new Error(`Simulated RenderError from ${e}`);return O()}catch(t){return G.current||(G.current={error:(0,n(319625).A)(t),errorId:n(449412).O8(t,{from:`${x}.ContentEditableLeaf`,type:"RenderError"})}),K.current}}),[x,q,O],{recomputeSchedule:"eager"});K.current=$;const Y=(0,o.useCallback)((()=>Boolean(w.current||(null==I?void 0:I.isComposing()))),[I]),Q=(0,o.useCallback)((()=>W),[W]),Z=(0,n(963589).X)("force_update_celeaf_oncompositionend"),X=(0,n(396182).I)(),J=(0,o.useCallback)((()=>{Z&&k.current&&(k.current=!1,X("ContentEditableLeaf","ContentEditableLeaf/onCompositionEnd"));const t=e.onCompositionEnd;null==t||t()}),[X,Z,e.onCompositionEnd]),ee=(0,o.useCallback)((t=>{const n=e.onKeyDown;null==n||n(t)}),[e.onKeyDown]),te=(0,o.useCallback)((e=>{Y()||null==V||V({endpoint:e,component:ge.current})}),[Y,V]),ne=(0,o.useCallback)((()=>c().Z6(b,S.current)),[b]),oe=(0,o.useCallback)((()=>S.current),[]),ie=!(0,n(962845)._V)(v)&&e.spellCheck,re=e.tagName??"div",ae=(0,o.useCallback)((e=>{null==j||j(e),n(908006).default.flush()}),[j]),se=(0,o.useCallback)((e=>{ae({newValue:ne(),insertedLine:!1,isComposing:Y(),timeStamp:void 0})}),[ne,ae,Y]),le=(0,o.useCallback)((()=>{if(v.isAndroid)return;w.current=!0;const t=e.onCompositionStart;null==t||t()}),[v.isAndroid,e.onCompositionStart]),ce=(0,o.useCallback)((t=>{if(v.isAndroid)return;w.current=!1,se(t);const n=e.onCompositionEnd;null==n||n()}),[v.isAndroid,se,e.onCompositionEnd]),de=(0,o.useCallback)((e=>function(e){const{event:t,suppressNewlineEvents:n,rootRef:o,getText:i,handleMutation:r,isComposing:a,device:s}=e;if(!d().vr(t))throw new Error("Invalid event");g;s.isAndroid&&"insertText"===t.inputType&&""===t.data&&t.preventDefault();if(n){var l;if("insertLineBreak"!==t.inputType&&"insertParagraph"!==t.inputType||t.preventDefault(),s.isAndroid&&"insertCompositionText"===t.inputType&&null!==(l=t.data)&&void 0!==l&&l.endsWith("\n")&&t.target===o.current){var c;g;const e=()=>{var t;r({insertedLine:!0,deletedLine:!1,newValue:i(),multiSelection:void 0,isComposing:a(),timeStamp:void 0}),null===(t=o.current)||void 0===t||t.removeEventListener("input",e)};null===(c=o.current)||void 0===c||c.addEventListener("input",e)}}}({event:e,suppressNewlineEvents:L,rootRef:S,getText:ne,handleMutation:ae,isComposing:Y,device:v})),[v,ne,ae,Y,L]),ue=(0,o.useCallback)((()=>{te("contain")}),[te]),pe=(0,o.useCallback)((e=>{3===e.nativeEvent.detail&&F&&(c().oB(v),te("contain")),null==z||z(e)}),[te,v,z,F]);(0,o.useEffect)((()=>{const e=S.current;if(e&&d().a2)return e.addEventListener("beforeinput",de),()=>e.removeEventListener("beforeinput",de)}),[de]);const me=Boolean(!$),ge=function(e,t){const r=(0,i().y)(),{getNode:a,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getText:p,isComposing:m,isDisabled:g}=t,f=(0,o.useRef)(null);f.current||(f.current={isComposing:m,getText:p,delegateCompositionEnd:s,delegateKeyDown:l,delegateBeforeInput:c,delegateMutation:d,delegateSelection:u,getNode:a,isDisabled:g});return(0,o.useLayoutEffect)((()=>{f.current.getNode=a,f.current.delegateCompositionEnd=s,f.current.delegateKeyDown=l,f.current.delegateBeforeInput=c,f.current.delegateMutation=d,f.current.delegateSelection=u,f.current.getText=p,f.current.isComposing=m,f.current.isDisabled=g}),[c,s,l,d,u,a,p,m,g]),(0,(()=>n(790748))().b)(null==r?void 0:r.contentEditableLeafRegistry,(()=>f.current),[]),(0,o.useImperativeHandle)(e,(()=>f.current),[]),f}(e.leafRef,{getNode:oe,delegateCompositionEnd:J,delegateKeyDown:ee,delegateBeforeInput:de,delegateMutation:ae,delegateSelection:te,getText:ne,isComposing:Y,isDisabled:Q});!function(e,t,n,m,g,f,v){const b=(0,o.useRef)(!1),y=(0,o.useRef)(null);y.current||(y.current=document.createElement("div"));const S=(0,o.useRef)(),w=(0,i().y)(),k=(0,a().Y0)(),I=(0,a().v3)(),x=(0,s().K8)(f,[f]),A=function(e){const{disableContentEditableWhenNotEditingTextOnMobile:t=!1,disabled:n,rootRef:s}=e,l=(0,a().Y0)(),c=(0,i().y)(),d=l.isMobile&&t,u=(0,o.useRef)(null);null===u.current&&(u.current=!!d&&r().A.withListenerIgnored((()=>!p().default.isEditingStore.state)));return(0,o.useEffect)((()=>{if(d){function e(){u.current=!p().default.isEditingStore.state,s.current&&_(s.current,c,n||u.current)}return p().default.isEditingStore.addListener(e),()=>p().default.isEditingStore.removeListener(e)}u.current=!1}),[c,n,s,d]),u}({disabled:m,rootRef:e,disableContentEditableWhenNotEditingTextOnMobile:g});(0,o.useLayoutEffect)((()=>{const o=!b.current;b.current=!0;const i=e.current;if(i)if(_(i,w,m||A.current),n)v.current=!0;else{if(o)h(w,(()=>{i.innerHTML=t}));else{S.current!==t&&(S.current=t,y.current.innerHTML=t);const e=i.innerHTML,n=y.current.innerHTML??"";e!==n&&h(w,(()=>{i.innerHTML=t}))}if(m)return;if(u().isMouseSelecting())return;if(u().isMouseRightClicking())return void u().resetMouseRightClicking();if(x)switch(x.type){case"start":case"end":{null==w||w.tryEnableMultiSelection();const e=c().vA(i,x.index),t={endpoint:x.type,onlyIfEqual:w,position:e};u().setDOMEndpoint(t,k),function(e,t,n){const o=u().get(),i=u().getIncompleteDOMEndpoint();if(o&&i===n)switch(n.endpoint){case"start":return void u().setDOMEndpoint({endpoint:"end",onlyIfEqual:t,position:{container:o.endContainer,offset:o.endOffset}},e);case"end":return void u().setDOMEndpoint({endpoint:"start",onlyIfEqual:t,position:{container:o.startContainer,offset:o.startOffset}},e);default:(0,l().HB)(n.endpoint)}}(k,w,t);break}case"contain":{const e=c().rM(i,x.selection.startIndex,x.selection.endIndex),t=u().get();c().Rq(t,e)||(k.isAndroid&&document.activeElement!==i&&i.focus(),u().set(e,k));break}default:(0,l().HB)(x)}else if(!o){const e=u().get(),t=!k.isAndroid||r().A.withListenerIgnored((()=>"empty"===p().default.state.mode));e&&e.commonAncestorContainer&&d().Ll(e.commonAncestorContainer)&&i.contains(e.commonAncestorContainer)&&t&&u().clear(I)}}}))}(S,$,Y(),W,e.disableContentEditableWhenNotEditingTextOnMobile,U,k);const fe=(0,o.useRef)(W);return(0,m.jsx)(n(11048).A,{name:"ContentEditableLeaf",children:G.current?(0,m.jsx)(n(215206).m,{store:A,children:e=>{var t,o;return(0,m.jsx)(n(719061).o,{backgroundColor:e,error:null===(t=G.current)||void 0===t?void 0:t.error,errorId:null===(o=G.current)||void 0===o?void 0:o.errorId})}}):(0,m.jsx)(re,{id:e.id,ref:(0,n(558842).Px)(t,S),...(0,n(955825).AH)(e.className,me&&e.placeholderStyle?e.placeholderStyle:e.style,!W&&"notranslate"),onCompositionStart:le,onCompositionEnd:ce,onInput:se,spellCheck:ie,autoCorrect:e.autoCorrect,autoCapitalize:e.autoCapitalize,onSelect:ue,onClick:pe,onBlur:R,onFocus:E,onContextMenu:C,onKeyDown:ee,onDoubleClick:T,onMouseDown:M,onTouchStart:P,onMouseOver:D,onMouseOut:N,placeholder:B,contentEditable:!fe.current,suppressContentEditableWarning:!0,...n(295740).dv,...void 0===I?{tabIndex:0,role:"textbox","aria-label":y.formatMessage({id:"contentEditableLeaf.ariaLabel",defaultMessage:"Start typing to edit text"})}:{}})})}));function h(e,t){const n=null==e?void 0:e.domLock;return n?n.mutate(t):t()}function _(e,t,n){const o=e.getAttribute("contenteditable");n?"false"!==o&&h(t,(function(){e.contentEditable="false"})):"true"!==o&&h(t,(function(){e.contentEditable="true"}))}},478184:(e,t,n)=>{n.d(t,{L:()=>r});var o=()=>n(662303),i=()=>n(425946);function r(e){return i().L(e,o().locale)}},478251:(e,t,n)=>{n.d(t,{i:()=>s});var o=()=>n(869558),i=()=>n(722101),r=()=>n(246826),a=()=>n(630116);function s(e){const{environment:t,collectionViewBlockStore:n,collectionView:s,transaction:l,isEphemeral:c=!1}=e,d=r().eC({environment:t,table:o().Gy,value:s,inMemoryRecordCache:n.inMemoryRecordCache,transaction:l}),u=a().pS.createChildStore(n,{table:o().Gy,id:d.id,spaceId:n.getSpaceId()});return c||i().BC({parentStore:n.getCollectionViewsStore(),appendStore:u,transaction:l}),u}},478726:(e,t,n)=>{n.d(t,{$n:()=>M,Cg:()=>b,Ck:()=>I,In:()=>S,L5:()=>x,NR:()=>w,OU:()=>A,XD:()=>T,fc:()=>_,gV:()=>v,mb:()=>C,sV:()=>h,uf:()=>k,x6:()=>f,yU:()=>y});n(944114),n(898992),n(803949);var o=()=>n(700500),i=()=>n(651124),r=()=>n(390066),a=()=>n(519831),s=()=>n(747100),l=()=>n(953418),c=()=>n(548821),d=()=>n(712505),u=()=>n(630116),p=()=>n(186445),m=()=>n(504836),g=()=>n(108944);const f=900;function v(e){const t=e.getAssociatedCollectionStore();if(!t)return;const n=e.getSchema(),o=t.getFormat();return(0,r().L)(o,n,void 0,i().jf.Collection)}function h(e){if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(o().xd.externalObjectInstancePage)}function _(e){if(!(0,m().pB)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===a().Vl){const e=t.getFormat();return!(null==e||!e.external_collection_type)}return!1}function b(e){if(!(0,m().CS)())return!1;const t=e.getAssociatedCollectionStore();if(t){const e=t.getFormatStore(),n=e.getKeyStore("sync_state").getValue(),o=e.getKeyStore("app_config_uri").getValue();if(null!=n&&n.enable_two_way_sync&&(null==n||!n.syncing)&&"notion://tasks_collection"===o)return!0}return!1}function y(e){if(!(0,m().pB)())return!1;const t=g().fU(e),n=[];t.forEach((e=>{e instanceof u().h4||n.push(e)}));const o=n.find((e=>_(e)));return Boolean(o)}function S(e){return!e.hasContent()&&(!e.isCollectionView()||e.isType("collection_view_page")&&e.isCollectionViewPageWithContent())}function w(e,t){const n={width:"100%",display:"flex",flexDirection:"column",alignItems:"center",flexShrink:0,flexGrow:0};return e.isCollectionView()&&(e.isNonEditableState()&&(n.cursor="default"),l().z4(t)&&(n.position="sticky",n.left=0)),n}function k(e,t,n){return I(e,t,n)?"100%":f}function I(e,t,n){const{device:o}=n,{isPhone:i}=o;if(i)return!0;if(t&&x(t))return!0;if(t===c().Rr.CollectionPageViewFullScreen||t===c().Rr.CollectionViewBlockFullScreen)return!0;const r=e.getRecordStoreUIRoot();return r instanceof u().Bv&&r.isFullWidth()}function x(e){return e===c().Rr.PeekView}function A(e,t){if(e===c().Rr.PeekView){const e=d().default.getPeekMode();return d().PeekModePadding.horizontal[e]}return(0,p().F8)(t)}function C(e){return(0,s().cq)(e)&&(d().default.isSidePeekOpen()||d().default.isSidePeekClosingStore.state)}function T(e,t){return t.device.isMobile?16:x(e)||e===c().Rr.Form?32:80}function M(e){return e.device.isMobile?12:4}},479199:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{isModalOpen:!1,account:void 0,selectedImportType:"FullImport",workspaces:[],isLoadingProjects:!1,selectedProjectsAndTeamspaces:{},templateCreationInProgress:!1,currentTab:"selectData",loggerPageId:void 0,showAuthPopup:!1,email:void 0,APIToken:void 0,result:void 0,isComplete:!1,selectedWorkspace:void 0,isLoadingMondayWorkspaces:!1,isFetchingMondayAccount:!1,excludeProjectsAndTasks:!1,isLoadingHierarchy:!1,isLoadingBoards:!1,fetchedHierarchy:!1,selectedTeamspacesForFullImport:{},selectedFolderIdsForFullImport:new Set,selectedBoardIdsForFullImport:new Set,mondayFoldersDetailsMap:{},mondayBoardsDetailsMap:{}}}resetImport(){const{account:e,workspaces:t}=this.getState();this.setState({...this.getInitialState(),account:e,workspaces:t})}}const i=new o},479490:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(296540);function i(e){const[t,n]=o.useState((()=>window.matchMedia(e).matches));return o.useEffect((()=>{const t=window.matchMedia(e);function o(){n(t.matches)}return o(),t.addEventListener("change",o),()=>{t.removeEventListener("change",o)}}),[e]),t}},480095:(e,t,n)=>{n.r(t),n.d(t,{BackMenuText:()=>_,CancelMenuText:()=>h,DoneMenuText:()=>f,MobileModal:()=>w,MobileModalBackButton:()=>y,MobileModalExitButton:()=>b,mobileModalMessages:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(212050),s=n(474848);const l=(0,n(340498).wt)("mobileTopbarChevronLeft",{viewBox:"0 0 26 26",svg:(0,s.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("path",{d:"M8.45117 13.0001L16.2512 5.20012",strokeWidth:"1.5",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M8.45117 13.0001L16.2512 20.8001",strokeWidth:"1.5",strokeLinecap:"round"})]})});var c=()=>n(959013),d=()=>n(284371),u=()=>n(704152);const p={display:"flex",alignItems:"center",height:"100%",paddingLeft:16,paddingRight:16,fontWeight:d().Wy.medium,color:n(100622).Ay.blue},m={display:"flex",alignItems:"center",justifyContent:"flex-end",flex:1},g={display:"flex",alignItems:"center",flex:1};function f(){return(0,s.jsx)(c().sA,{id:"mobile.modal.doneButton",defaultMessage:"Done"})}const v=(0,c().YK)({done:{id:"mobile.modal.doneButton.a11y",defaultMessage:"Done"}});function h(){return(0,s.jsx)(c().sA,{id:"mobile.modal.cancelButton",defaultMessage:"Cancel"})}function _(){return(0,s.jsx)(c().sA,{id:"mobile.modal.backButton",defaultMessage:"Back"})}function b(){const e=(0,r().IS)((e=>({exitButton:{height:32,width:32,backgroundColor:e.accentColors.gray[75],borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}})),[]);return(0,s.jsx)("div",{style:e.exitButton,children:(0,a().u)({height:16,width:16})})}function y(){const e=(0,r().IS)((e=>({exitButton:{height:24,width:24,display:"flex",alignItems:"center",justifyContent:"center",stroke:e.icon.primary}})),[]);return(0,s.jsx)("div",{style:e.exitButton,children:l({width:24,height:24})})}function S(e,t){let{onCancel:a,forceFullScreenSlideUp:l,width:c,hideMobileTopbar:d,disableHeaderShadow:u,wrapStyle:p,topbarStyle:m,left:g,onClickLeft:f,leftDisabled:v,shouldRenderLeftDirectly:h,leftOuterStyle:_,leftRightButtonStyle:b,paddingTop:y,title:S,titleOuterStyle:w,right:I,shouldRenderRightDirectly:C,onClickRight:T,rightDisabled:M,rightOuterStyle:P,additionalTopbarContent:B,children:R,rightAriaLabel:E,shouldRenderMobileRefresh:D,whiteBackground:N}=e;const L=(0,i().v3)(),{isTablet:O}=(0,i().Y0)(),{WindowSizeStore:U}=L,[F,V,j]=(0,n(847249).K8)((()=>[U.state.paddingTopCSS,U.state.paddingLeftCSS,U.state.paddingRightCSS]),[U]),z=(0,n(888789).$e)(),H=(0,o.useMemo)((()=>z||D),[z,D]),W=(0,o.useMemo)((()=>{if(z)return 0;let e;return e=O&&!l?0:void 0!==y?y:F,e}),[z,O,l,y,F]),q=(0,r().IS)((e=>({topBarWrapStyle:{position:"relative",boxShadow:u||H?void 0:`0 1px 0 ${e.regularDividerColor}`,zIndex:3,cursor:"pointer"},topBarStyle:{display:"flex",alignItems:"stretch",justifyContent:"center",flexGrow:0,flexShrink:0,height:44,fontSize:16,color:e.text.primary},wrapStyle:{display:"flex",flexDirection:"column",height:O||z?"100%":"var(--full-viewport-height)",width:c,paddingTop:W,background:N?e.contentBackground:e.surface.wash}})),[u,z,O,W,H,c,N]);return(0,s.jsx)(n(527606).k,{debugName:"MobileModal",enable:void 0!==a,shortcuts:{backbutton:a},children:(0,s.jsxs)("div",{style:{...q.wrapStyle,...p},ref:t,children:[!d&&(0,s.jsxs)("div",{style:q.topBarWrapStyle,children:[(0,s.jsxs)("div",{style:{...q.topBarStyle,paddingLeft:V,paddingRight:j,...m},children:[(0,s.jsx)(x,{left:g,onClickLeft:f,leftDisabled:v,shouldRenderLeftDirectly:h,leftOuterStyle:_,leftRightButtonStyle:b}),(0,s.jsx)(k,{title:S,titleOuterStyle:w}),(0,s.jsx)(A,{right:I,shouldRenderRightDirectly:C,onClickRight:T,rightDisabled:M,rightOuterStyle:P,leftRightButtonStyle:b,ariaLabel:E})]}),B]}),R]})})}const w=o.forwardRef(S);function k(e){let{title:t,titleOuterStyle:n}=e;const o={...{flex:1,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:d().Wy.semibold,whiteSpace:"nowrap"},...n};return t?(0,s.jsx)("div",{style:o,children:t}):null}function I(e){const{item:t,onClick:n,disabled:o,leftRightButtonStyle:i,ariaLabel:r}=e,a={...p,...i};return(0,s.jsx)(u().A,{mobileFeedback:!0,style:a,onClick:n,disabledFeedback:!0,disabled:o,ariaLabel:r,children:t})}function x(e){let{left:t,onClickLeft:n,leftDisabled:o,shouldRenderLeftDirectly:i,leftOuterStyle:r,leftRightButtonStyle:a}=e;const l={...g,...r};return i?(0,s.jsx)("div",{style:l,children:t}):(0,s.jsx)("div",{style:l,children:(0,s.jsx)(I,{leftRightButtonStyle:a,item:t,onClick:n,disabled:o})})}function A(e){let{right:t,shouldRenderRightDirectly:n,onClickRight:o,rightDisabled:i,rightOuterStyle:r,leftRightButtonStyle:a,ariaLabel:l}=e;const c={...m,...r};return n?(0,s.jsx)("div",{style:c,"aria-label":l,children:t}):(0,s.jsx)("div",{style:c,children:(0,s.jsx)(I,{leftRightButtonStyle:a,item:t,onClick:o,disabled:i,ariaLabel:l})})}},480289:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},480388:(e,t,n)=>{n.d(t,{$:()=>i,M:()=>o});const o=670,i=["template_optout","workspace_setup"]},481235:(e,t,n)=>{n.d(t,{H:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("dateInterval",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M4.345 10.359l1.832 1.36c.191.146.378.182.56.11.183-.074.274-.226.274-.459v-.847H8.96a.52.52 0 00.54-.533.513.513 0 00-.157-.376.521.521 0 00-.383-.158H7.01V8.63c0-.246-.093-.4-.28-.465-.186-.068-.371-.034-.553.103L4.345 9.64a.43.43 0 00-.185.362c0 .146.062.264.185.356zm11.31 0l-1.832 1.36c-.191.146-.378.182-.56.11-.183-.074-.274-.226-.274-.459v-.847H11.04a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.146.052-.272.157-.376a.521.521 0 01.383-.158h1.95V8.63c0-.246.093-.4.28-.465.186-.068.371-.034.553.103l1.832 1.374a.43.43 0 01.185.362.423.423 0 01-.185.356zM3.378 15.16c.183 0 .33-.051.445-.16a.553.553 0 00.17-.42V5.449a.592.592 0 00-.17-.438.601.601 0 00-.445-.17.592.592 0 00-.437.17.592.592 0 00-.171.438v9.132c0 .173.057.31.17.42s.26.16.438.16zm13.24 0c.183 0 .33-.051.445-.16a.552.552 0 00.17-.42V5.447a.592.592 0 00-.17-.437.6.6 0 00-.445-.17.592.592 0 00-.437.17.593.593 0 00-.171.437v9.132c0 .173.057.31.17.42.115.11.26.16.438.16z"})})},482287:(e,t,n)=>{n.d(t,{Vd:()=>g,hz:()=>f,po:()=>m});n(898992),n(908872);var o=()=>n(173979),i=()=>n(496603),r=()=>n(962845),a=()=>n(299545),s=()=>n(792002),l=()=>n(24157),c=()=>n(246826),d=()=>n(319975),u=()=>n(725614),p=()=>n(751156);function m(e){const{environment:t,annotation:n}=e,o=l().default.state;if("editing"!==o.mode)return;if(l().default.isEmptySelection())return void u().toggleExtendAnnotation({annotation:n});const{multiSelection:i}=o;(0,r().$W)(i).length>0&&(p().createAndCommit({userAction:"textAnnotationActions.annotateSelection",environment:t,canUndo:!0,perform:t=>{d().sr({...e,transaction:t,multiSelection:i})}}),u().setMultiSelection({multiSelection:i}))}function g(e){const{environment:t,annotationKey:n,blocks:o,transaction:i}=e;for(const r of(0,a().Lz)({blockStores:o,traverseTransclusionReferences:!1})){const e=r.getBlockTitleStore(),o=(0,s().mk)(e);o&&d().gw({environment:t,store:e,annotationKey:n,selection:o,transaction:i,updateSelection:!1})}}function f(e){const{environment:t,store:n,context:r,transaction:a}=e;if(!n.canEdit())return;const{title:s,...l}=n.getProperties(),u=Object.entries(l).reduce(((e,t)=>{let[n,a]=t;if(a){const t=(0,o().f$)(a,r);i().n4(a,t)||(e[n]=t)}return e}),{});i().Im(u)||c().zv({store:n.getPropertiesStore(),data:u,transaction:a});const p=n.getTitleValue();if(p){const e=(0,o().f$)(p,r);i().n4(p,e)||d().R9({environment:t,store:n.getBlockTitleStore(),value:e,transaction:a})}}},483461:(e,t,n)=>{function o(e){return e.isType("page")&&!e.isNonEditableState()&&!e.isCollectionView()&&!e.isInsideCollection()&&!e.isAssociatedCollectionAPageTree()&&e.canAdmin()}function i(e){var t;return(null===(t=e.getCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())??!1}n.d(t,{E:()=>i,S:()=>o})},484792:(e,t,n)=>{n.d(t,{B:()=>i,n:()=>r});const o=(0,n(446943).C)({modernContextDefaultValue:void 0,displayName:"OverrideLinkClickContext",legacyContextKey:"overrideLinkClick"}),i=o.Provider,r=o.context},484975:(e,t,n)=>{n.d(t,{A:()=>i});n(16280);var o=()=>n(221844);const i=new class{constructor(){this.pendingEvictions=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.pendingEvictions=new Map}getPendingEvictionCount(){return this.pendingEvictions.size}updateEnvironment(e){this.environmentProvider=()=>e}addToPendingEvictions(e,t){const n=(0,o().Z)(e),i={...e,timestamp:t};this.pendingEvictions.set(n,i)}removeFromPendingEvictions(e){this.pendingEvictions.delete((0,o().Z)(e))}forEachPendingEviction(e){for(const{pointer:t,userId:n,timestamp:o}of this.pendingEvictions.values())e({userId:n,pointer:t,timestamp:o,environment:this.environmentProvider()})}}},485634:(e,t,n)=>{n.d(t,{A:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{syncingProperties:new Set,syncingComments:new Set}}hasPendingSyncedCollectionChanges(){return this.state.syncingProperties.size>0||this.state.syncingComments.size>0}}const i=new o},486130:(e,t,n)=>{n.d(t,{_:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{}}getSpacePermissionGroupIds(e){var t;let{userId:n,spaceId:o}=e;return(n&&o&&(null===(t=this.state[n])||void 0===t||null===(t=t[o])||void 0===t?void 0:t.spacePermissionGroupIds))??new Set}shouldRefetch(e){let{userId:t,spaceId:n,emitValue:o}=e;return!this.state[t]||!this.state[t][n]||this.state[t][n].lastEmitValue!==o}}const i=new o},486666:(e,t,n)=>{n.d(t,{FU:()=>m,GF:()=>f,H:()=>_,MP:()=>b,Sq:()=>l,Te:()=>r,UA:()=>d,Vq:()=>i,Zl:()=>c,bc:()=>o,cx:()=>v,jv:()=>g,ru:()=>u,w$:()=>h,zG:()=>p,zR:()=>s,zf:()=>a});const o=12,i=9,r=2,a=12,s=16,l=32,c=24,d=44,u=32,p=12,m=9,g=l*o+2*p,f=356,v=390,h=305,_=10,b=2},487532:(e,t,n)=>{n.d(t,{DZ:()=>l,Lu:()=>a,N$:()=>s,Rq:()=>c});var o=()=>n(496603),i=()=>n(92400),r=()=>n(570241);function a(e){const t=new AbortController;return r().Z.setState({...r().Z.state,abortControllersByPage:{...r().Z.state.abortControllersByPage,[e]:t}}),AbortSignal.any([t.signal,r().Z.state.globalAbortController.signal])}function s(e){var t;null===(t=r().Z.state.abortControllersByPage[e])||void 0===t||t.abort(new(i().f)),l(e)}function l(e){r().Z.setState({...r().Z.state,abortControllersByPage:o().cJ(r().Z.state.abortControllersByPage,e)})}function c(){r().Z.state.globalAbortController.abort(new(i().f)),r().Z.reset()}},487929:(e,t,n)=>{n.d(t,{T:()=>a,u:()=>s});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(651124),i=()=>n(390066);function r(e){let{format:t,schema:n,visibilityLevels:r}=e;const a=(0,i().L)(t,n,void 0,o().jf.Collection);if(null==a||!a.collection_page_sections)return[];const s=new Set(r);return a.collection_page_sections.filter((e=>s.has(e.visibility)))}function a(e){let{format:t,schema:n,visibilityLevels:o}=e;return r({format:t,schema:n,visibilityLevels:o}).filter((e=>n[e.section]))}function s(e){const{format:t,schema:n,visibilityLevels:o}=e,i=r({format:t,schema:n,visibilityLevels:o}),a=[];return i.forEach((e=>{n[e.section]&&a.push(e.section)})),a}},487941:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{focused:!1,hovered:!1}}}const i=o},488173:(e,t,n)=>{n.d(t,{UY:()=>l,fW:()=>c,zG:()=>d});var o=()=>n(615234),i=()=>n(66689),r=()=>n(617871),a=()=>n(651124);const s=4*o().pT,l=new Map([[i().yx.Status,"status"],["title","title"],[i().yx.Priority,"priority"],[i().yx.Tags,"tags"],[i().yx.Assign,"assignee"],[i().yx.DueDate,"duedate"],[i().yx.SubTaskRelation,"subtasks"],[i().yx.ParentTaskRelation,"parent_task"],[i().yx.BlockingRelation,"blocking_tasks"],[i().yx.BlockedRelation,"blocked_by_tasks"],[i().yx.TaskToProjectRelation,"task_to_project"]]);new Map([[i().K4.Status,"status"],["title","title"],[i().K4.Priority,"priority"],[i().K4.Collaborators,"collaborators"],[i().K4.CompletionRollup,"completion_rollup"],[i().K4.People,"people"],[i().K4.ProjectDates,"project_dates"],[i().K4.ProjectToTaskRelation,"project_to_task"]]),a().uO.Jira,r().me,a().uO.Salesforce,r().Iy;function c(e){let{isUserOnEnterprisePlan:t,twoWaySyncEnabled:n,canEdit:o,isEditableProperty:i}=e;return t?n?i?o?"full_access":"connect_to_integration":"property_not_editable":"two_way_sync_not_enabled":"upgrade_to_enterprise"}function d(e){var t,n;return!(null==e||!e.external_collection_type)&&(!0===(null===(t=e.sync_state)||void 0===t?void 0:t.syncing)?!!e.sync_state.last_synced_at&&Date.now()-e.sync_state.last_synced_at>Number(o().pT):!(null===(n=e.sync_state)||void 0===n||!n.last_synced_at)&&Date.now()-e.sync_state.last_synced_at>s)}},488923:(e,t,n)=>{n.d(t,{$g:()=>l,YY:()=>r,gY:()=>c,ne:()=>d,uZ:()=>s});var o=()=>n(645873);const i=new(o().O2)("coediting",(()=>Promise.all([n.e(16471),n.e(41870),n.e(8184),n.e(53095)]).then(n.bind(n,919523)))),r=(0,o()._h)(i,(e=>e.HoverCoEditingOverlayRenderer));let a;async function s(){if(!a){const e=await i.load();a=new e.CoEditingTasksManager}return a}async function l(){return(await i.load()).CoEditingPresenceStore}async function c(){return(await i.load()).coEditingPresenceStoreActions}async function d(e){const{environment:t,pageId:n,active:o}=e;return(await i.load()).coEditingSettingsActions.setCoEditingOverride({environment:t,pageId:n,active:o})}(0,n(604341).exposeDebugValue)("coEditingTasksManager",(()=>a))},488999:(e,t,n)=>{n.d(t,{A:()=>a});n(410838),n(898992),n(737550);var o=()=>n(68263),i=()=>n(179034),r=()=>n(108944);function a(e){if(!e.getSpaceStore())return;const t=r().g7(e).findLast((e=>{if(e.table===i().ev){if(e.getPermissionItems().some((e=>(0,o().vZ)(e))))return!0}return!1}));return t}},489348:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(672577);var o=()=>n(548821);class i extends(()=>n(959180))().A{isBlockInFrame(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===o().Rr.Frame&&e.store===t)))}isBlockInTemplate(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===o().Rr.InAppTemplatePreview&&e.store===t)))}isBlockInPageSnapshot(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>e.blockContext===o().Rr.InPageSnapShot&&e.store===t)))}isBlockInWiki(e){const t=e.getRecordStoreUIRoot();return Boolean(this.find((e=>(0,n(483461).E)(e.store)&&e.store===t)))}openNewPageDiscussionInput(e){const t=this.find((t=>t.store.id===e.id));if(!t)return;const{pageViewBlockStore:n}=t;n.setState({...n.state,forceDiscussionOpen:!0})}getPageViewBlockStore(e){const t=this.find((t=>t.store.id===e.id));if(!t)return;const{pageViewBlockStore:n}=t;return n}}const r=new i},489436:(e,t,n)=>{n.d(t,{A:()=>N,n:()=>E});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(799954),l=()=>n(522419),c=()=>n(187174),d=()=>n(147588),u=()=>n(919709),p=()=>n(959013),m=()=>n(284371),g=()=>n(559926),f=()=>n(220738),v=()=>n(383594),h=()=>n(751156),_=()=>n(500507),b=()=>n(38337),y=()=>n(937182),S=()=>n(891078),w=()=>n(554283),k=()=>n(227440),I=()=>n(518888),x=()=>n(496889),A=()=>n(739283),C=()=>n(704152),T=()=>n(125565),M=()=>n(42425),P=n(474848);const B=(0,p().YK)({fileTitle:{defaultMessage:"File",id:"fileBlock.fileTab.title"},embedButtonText:{defaultMessage:"Embed link",id:"fileBlock.embedButton.label"},embedFilePrompt:{defaultMessage:"Paste a file link…",id:"fileBlock.linkPrompt.placeholder"},embedCaption:{defaultMessage:"Works with links of PDFs, Google Drive, Google Maps, CodePen…",id:"fileBlock.linkPrompt.caption"}});function R(e,t){var a,s;const c=Boolean(e.commentProps),m=null===(a=e.commentProps)||void 0===a?void 0:a.onRemoveBlockFromComment,b=(0,p().tz)(),w=(0,i().v3)(),k=(0,i().Y0)(),C=(0,o.useRef)(null),T=(0,o.useId)(),[M,R]=(0,o.useState)(!1),N=(0,S().bx)(e.store,e.disabled),L=(0,S().pW)(e.store),O=(0,r().K8)((()=>{const t=e.store.getProperties(),n=t&&t.source,o=u().q4_(n),{display_source:i}=e.store.getFormat();return i||o}),[e.store]),U=(0,r().K8)((()=>I().default.getKeyState(I().default.getBlockKey(e.store.id))),[e.store.id]),F=k.isMobile||M,V=(0,r().K8)((()=>e.store.getProperties()),[e.store]),j=(0,o.useMemo)((()=>u().k4p(V&&V.title)),[V]),z=(0,o.useMemo)((()=>u().k4p(V&&V.size)),[V]),H=F&&N&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(D,{fileBlockStore:e.store}),(0,P.jsx)(x().A,{style:{marginRight:4},store:e.store,fadeIn:!0})]}),W=(0,o.useCallback)((()=>{const t=e.store.getPropertyStore("caption");n(778417).hc({environment:w,store:e.store}),n(725614).setSelectionAtEnd({store:t})}),[w,e.store]),q=(0,o.useCallback)((t=>{const n=t[0];h().createAndCommit({userAction:"FileBlock.handleUpload",environment:w,canUndo:!0,perform:t=>{f().L({environment:w,store:e.store,embeddedUrl:void 0,name:void 0,size:void 0,transaction:t})}}),g().Sy(w,{source:"upload",file:n.name}),f().Q({environment:w,store:e.store,file:n})}),[w,e.store]),K=(0,o.useCallback)((t=>{t.file&&f().Q({environment:w,store:e.store,file:t.file})}),[w,e.store]),G=(0,o.useCallback)((()=>{const t=C.current;if(N&&t){const n=t.getBoundingClientRect();v().W(w,{originRect:n,originGap:0,isSmallWidth:!0,showArrow:!0,title:b.formatMessage(B.fileTitle),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>q(e)},{type:"embed",buttonText:b.formatMessage(B.embedButtonText),inputPlaceholder:b.formatMessage(B.embedFilePrompt),caption:b.formatMessage(B.embedCaption),onChange:t=>{const{originUrl:n}=t;v().I(),h().createAndCommit({userAction:"FileBlock.handleOpenMenu",environment:w,canUndo:!0,perform:n=>{f().L({environment:w,store:e.store,embeddedUrl:t,name:void 0,size:void 0,transaction:n})}}),g().Sy(w,{file:n,source:"embed"}),g().oF(w,{pastedText:n,source:"file_block_menu"})}}]})}}),[N,w,q,b,e.store]),$=(0,o.useCallback)((()=>{n(675074).oD(w,{store:e.store,from:"embedded_block_click"})}),[w,e.store]),Y=(0,o.useMemo)((()=>({flexGrow:1,minWidth:0,borderRadius:4,...n(496603).cJ(L,["fontSize","lineHeight"])})),[L]),Q=(0,P.jsx)("div",{role:"figure","aria-labelledby":T,ref:C,children:(0,P.jsxs)(_().V,{type:y().cM,dropTargetKey:`file-block-${e.store.id}`,onDropFile:N?K:()=>{},children:[(0,P.jsxs)("div",{onMouseMove:()=>R(!0),onMouseLeave:()=>R(!1),style:{display:"flex"},children:[c?(0,P.jsx)(n(774733).vY,{title:l().SB({title:j,source:O}),source:O,size:z,store:e.store,onClick:$,showBlockActionMenuButton:!(null!==(s=e.commentProps)&&void 0!==s&&s.shouldHideBlockActionMenu)}):(0,P.jsx)(E,{title:j,url:O,size:z,onClick:$,right:H,style:Y}),(0,P.jsx)(A().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),(0,P.jsx)(n(460282).c,{store:e.store,captionAriaId:T,disabled:e.disabled})]})}),Z=(0,P.jsx)("div",{ref:C,children:(0,P.jsx)(_().V,{type:y().cM,dropTargetKey:`file-block-${e.store.id}`,onDropFile:N?K:()=>{},children:(0,P.jsxs)(n(155004).s,{allowSelectionWithin:!1,onMouseMove:()=>R(!0),onMouseLeave:()=>R(!1),style:{display:"flex"},children:[(0,P.jsx)(n(468993).A,{disabled:e.disabled,iconSvg:d().Y,shouldHideRight:!F,right:N&&(0,P.jsx)(x().A,{store:e.store,fadeIn:!1}),isLoading:Boolean(U),progressPercent:null==U?void 0:U.progressPercent,progressText:null==U?void 0:U.progressText,file:null==U?void 0:U.file,name:null==U?void 0:U.name,size:null==U?void 0:U.size,onClick:G,children:(0,P.jsx)(p().sA,{defaultMessage:"Upload or embed a file",id:"fileBlock.uploadOrEmbed.placeholder"})}),(0,P.jsx)(A().A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]})})}),X=O?Q:Z;return(0,S().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"file",getNode:()=>C.current,getBlockStore:()=>e.store,caption:W,handleCreated:G,edit:G,activate:G,replace:G,...m&&{handleRemoveBlockFromComment:()=>m(e.store)}})),[W,G,m,e.store]),X)}function E(e){const{style:t,right:n,title:o,url:i,size:a,onClick:c}=e,u={paddingTop:s().nE.paddingTop,paddingBottom:s().nE.paddingBottom,paddingLeft:s().nE.paddingLeft},p=!(0,r().O$)(k().e);return(0,P.jsx)(C().A,{style:t,onClick:c,disabled:p,children:(0,P.jsx)(M().Ay,{style:u,left:(0,d().Y)(),leftStyle:{width:"1.35em",height:"1.35em"},alignment:M().C1.Center,right:n,children:(0,P.jsxs)("div",{style:{display:"flex",alignItems:"baseline"},children:[(0,P.jsx)("div",{style:{...m().RC},children:l().SB({title:o,source:i})}),a&&(0,P.jsx)(T().A,{isSmall:!0,style:{marginLeft:6,whiteSpace:"nowrap"},children:a})]})})})}function D(e){const{fileBlockStore:t}=e,[{value:s}]=(0,c().Yb)((async()=>{const e=await Promise.resolve().then(n.bind(n,650829));return(await e.assistantDependency.load()).assistantActions}),[]),[l,d]=(0,w().B)(),u=(0,a().IS)((e=>({askAiText:{fontSize:14,color:e.aiPurpleColor,marginRight:4,paddingTop:4,paddingBottom:4,paddingRight:6,paddingLeft:6,borderRadius:6,background:d?e.buttonHoveredBackground:void 0}})),[d]),m=(0,r().K8)((()=>s&&s.isSelectionValidAttachmentSelection([t])),[s,t]),g=(0,i().v3)(),f=(0,o.useCallback)((e=>{s&&(s.initializeSessionFromAttachmentBlockSelection({environment:g,selectedAttachmentStore:t}),e.preventDefault(),e.stopPropagation())}),[s,g,t]);return!(0,r().O$)(k().e)?null:m?(0,P.jsx)("div",{style:u.askAiText,onClick:f,className:b().qGl,ref:l,children:(0,P.jsx)(p().sA,{defaultMessage:"Ask AI",id:"FileBlock.AssistantChatWithAiTextButton"})}):null}const N=o.memo(o.forwardRef(R),n(821062).A)},490704:(e,t,n)=>{n.d(t,{BT:()=>k,BZ:()=>b,FW:()=>m,Iv:()=>_,LU:()=>u,M0:()=>g,MP:()=>w,eU:()=>y,fd:()=>p,h0:()=>v,ii:()=>f,qB:()=>h,yP:()=>S});n(944114),n(898992),n(354520),n(581454);var o=()=>n(496603),i=()=>n(534177),r=()=>n(681873),a=()=>n(519831),s=()=>n(161479),l=()=>n(919709),c=()=>n(443881),d=()=>n(977345);function u(e){const t=[];for(const n of e)if((0,l().bHQ)(n))t.push(n[0]);else if((0,l().BEe)(n))t.push((0,l().N8A)(n));else if((0,l().qXl)(n)){const e=(0,l().uPN)(n),o=l().snh(e);if(o){t.push(o);continue}const i=l().Sev(e);if(i){t.push(i);continue}const r=l().tVx(e);if(r){t.push(r);continue}const a=l().TVE(e);if(a){t.push(a);continue}}return t}function p(e){if(void 0!==e)return[f(e)]}function m(e){const t=e||[],n=[];for(const o of t){const e=l().uPN(o),t=l().snh(e)||l().Sev(e)||l().tVx(e)||l().TVE(e)||l().$CJ(e);t&&n.push(t);const i=l().N8A(o).split(",");for(const o of i){const e=o.trim(),t=e.indexOf('"'),i=e.lastIndexOf('"');if(t>=0&&i>=0){const o=e.slice(t+1,i);o.length>0&&n.push(o.replaceAll('\\"','"').replaceAll("\\\\","\\"))}else"true"===e?n.push(!0):"false"===e&&n.push(!1)}}return n}function g(e){const t=o().hS(e,(e=>JSON.stringify(e)));if(0!==t.length)return l().__s([["["],...(0,r().A)(t.map(f),(()=>[", "])),["]"]])}function f(e){return"string"==typeof e?[`"${t=e,t.replaceAll("\\","\\\\").replaceAll('"','\\"')}"`]:"boolean"==typeof e?[`${e}`]:l().wmz(e);var t}function v(e,t){return e.filter((e=>JSON.stringify(e)!==JSON.stringify(t)))}function h(e,t,n){const o=_(e,t,n);if(o)return b(o)}function _(e,t,n){if("text"===n.type||"url"===n.type||"email"===n.type||"phone_number"===n.type||"title"===n.type||"geo_point"===n.type)return{type:"text"};if("checkbox"===n.type)return{type:"checkbox"};if("multi_select"===n.type)return{type:"select_array",collection:e,property:t};if("select"===n.type||"status"===n.type)return{type:"select",collection:e,property:t};if("person"===n.type)return{type:"person_array"};if("number"===n.type||"auto_increment_id"===n.type)return{type:"number"};if("date"===n.type)return{type:"date"};if("relation"===n.type){if(n.collection_pointer)return{type:"block_array",collection:{table:a().Vl,id:n.collection_pointer.id,spaceId:(0,s().e)(n.collection_pointer.spaceId)}};if(n.collection_id)return{type:"block_array",collection:{table:a().Vl,id:n.collection_id,spaceId:e.spaceId}}}else{if("formula"===n.type||"rollup"===n.type||"last_edited_by"===n.type||"last_edited_time"===n.type||"button"===n.type||"created_time"===n.type||"created_by"===n.type||"file"===n.type||"location"===n.type||"verification"===n.type||"last_visited_time"===n.type)return;(0,i().HB)(n)}}function b(e){return"text"===e.type||"number"===e.type||"checkbox"===e.type||"date"===e.type?e:"block_array"===e.type?{type:"array",of:{type:"block",collection:e.collection}}:"person_array"===e.type?{type:"array",of:{type:"person"}}:"select"===e.type?{type:"select",collection:e.collection,property:e.property}:"select_array"===e.type?{type:"array",of:{type:"select",collection:e.collection,property:e.property}}:void(0,i().HB)(e)}function y(e){return"string"!=typeof e&&"boolean"!=typeof e}function S(e){return(e.value??[]).map((e=>{if(!l().qXl(e))return;const t=l().tVx(e[1]);if(!t)return;return l().iVq(t).id})).filter(i().O9)}function w(e){const{formulas:t,formulaTypecheckContextValues:n,value:o,spaceId:r}=e;return(0,i().O9)(o.value)?"formula"===o.type?(0,c().D3)({formulas:t,formulaTypecheckContextValues:n,formulaValue:o.value,spaceId:r}):"simple"===o.type?k({formulaTypecheckContextValues:n,simpleFormulaValue:o.value,spaceId:r}):void(0,i().HB)(o.type):[]}function k(e){const{formulaTypecheckContextValues:t,simpleFormulaValue:n,spaceId:o}=e,i=[],r=l().kNd(n);for(const a of r){const e=(0,d()._H)(t,a.id);e&&i.push(...(0,d().qU)(e,o))}const s=l().IQD(n);for(const c of s)if((0,l()._Nw)(c)){const e=(0,d()._H)(t,c.contextValueId);if(!e)continue;i.push(...(0,d().qU)(e,o))}else c.collection&&i.push({...c.collection,spaceId:o,table:a().Vl});return i}},491073:(e,t,n)=>{n.d(t,{Ay:()=>g,Nc:()=>u,Yr:()=>d});var o=n(296540),i=()=>n(401497),r=()=>n(100622),a=()=>n(284371),s=()=>n(963589),l=()=>n(760217),c=n(474848);function d(e,t){return`inset 0 0 0 ${t?"2px":"1px"} ${e}`}function u(e,t,n){"dark"!==n.mode&&t||"default"!==e&&"default_background"!==e||(e="gray");const o=r().Ld[e];return o?t?n.stroke[`${o}Primary`]:n.stroke[`${o}Secondary`]:n.text.primary}function p(e){const{color:t,selected:n,isHovered:o,overrideStyles:l}=e,p=(0,s().X)("updated_color_picker"),m=(0,r().Cg)(t),g=(0,i().IS)((e=>{const i=(0,r().k5)(t,e);if(!p)return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:22,height:22,textAlign:"center",fontSize:16,borderRadius:4,fontWeight:a().Wy.medium,boxShadow:e.innerBorderBoxShadow,...i,...l}};const s=u(t,n??!1,e);return{icon:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:26,height:26,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:a().Wy.medium,boxShadow:d(s,n||o),...i,...l}}}),[t,n,p,o,l]);return(0,c.jsx)("div",{style:g.icon,"aria-hidden":"true",children:p&&m?"":"A"})}function m(e,t){const r=(0,n(484714).Y0)(),[a,s]=(0,o.useState)(!1),{color:d,overrideDisplayName:u,right:m,shortcuts:g,selected:f,shouldShowUpdatedColorPicker:v,desktopTitleStyle:h,iconStyle:_,itemMarginLeft:b,itemMarginRight:y,desktopIconStyle:S,rightStyle:w}=e,k=u||n(972435).A.formatMessage((0,n(27178).qo)(d)),I=!r.isMobile&&g&&g[0],x=(0,i().IS)((e=>v?{tooltipStyle:{display:"inline-block",width:30,padding:0,lineHeight:1},desktopStyleIcon:{position:"absolute"},buttonStyle:{display:"inline-block",width:"100%",height:"100%",margin:0,padding:2,position:"relative"},menuItemStyle:{margin:0,padding:0,gap:0,minHeight:26},disableButtonStyleHoverOrPressed:{background:"transparent"},shortcut:{}}:{shortcut:{color:e.text.tertiary,fontSize:12,whiteSpace:"nowrap"},tooltipStyle:{},desktopStyleIcon:{},buttonStyle:{},menuItemStyle:{},disableButtonStyleHoverOrPressed:{}}),[v]),A=(0,o.useCallback)((()=>(0,c.jsx)(p,{color:d,selected:f,isHovered:a,overrideStyles:_})),[d,a,f,_]);return v?(0,c.jsx)(n(859428).A,{renderTooltip:()=>(0,c.jsx)("div",{children:k}),render:n=>(0,c.jsx)("div",{style:{...x.tooltipStyle},...n,onMouseEnter:e=>{var t;s(!0),null===(t=n.onMouseEnter)||void 0===t||t.call(n,e)},onMouseLeave:e=>{var t;s(!1),null===(t=n.onMouseLeave)||void 0===t||t.call(n,e)},children:(0,c.jsx)(l().A,{...e,ref:t,icon:A(),style:x.menuItemStyle,itemMarginLeft:b,itemMarginRight:y,hoveredStyle:x.disableButtonStyleHoverOrPressed,pressedStyle:x.disableButtonStyleHoverOrPressed,desktopIconStyle:S||x.desktopStyleIcon,right:m,buttonStyle:x.buttonStyle,desktopTitleStyle:h,rightStyle:w})})}):(0,c.jsx)(l().A,{...e,ref:t,title:k,icon:A(),dontShrinkRight:!0,isChecked:f&&!(m||I),right:m||I&&(0,c.jsx)(n(35392).A,{name:I,style:x.shortcut}),itemMarginLeft:b,itemMarginRight:y,desktopIconStyle:S,desktopTitleStyle:h,rightStyle:w})}const g=o.forwardRef(m)},492414:(e,t,n)=>{n.d(t,{Ay:()=>S,Ef:()=>y,J8:()=>_,QN:()=>b});n(16280);var o=()=>n(921940),i=()=>n(142748),r=()=>n(868840),a=()=>n(861017),s=()=>n(939768),l=()=>n(780054),c=()=>n(562800),d=()=>n(578872),u=()=>n(431481),p=()=>n(351360),m=()=>n(712505),g=()=>n(638146),f=()=>n(108944),v=()=>n(836251);function h(e){let t,n,o;const{store:r}=e,a=(r.getSpaceId()&&r.getSpaceStore())??p().default.state.currentSpaceStore,s=(0,v().w6)(r.environment);return(e.preferPublicLink||s)&&(0,i().ot)((0,f().E)(r))?((e.fullyQualified||e.preferPublicLink&&!s||d().Nt(r))&&(n=c().QN(r)),e.disableSlug||(o=function(e){const t=d().LC(e);if((null==t?void 0:t.public_home_page)===e.id)return"";return e.getSlug()}(r),o&&u().A.setBlockIdForSlug(o,r.id))):(t=null==a?void 0:a.getEditDomain(),e.fullyQualified&&(n=l().A.domainBaseUrl)),{spaceDomain:t,baseUrl:n,slug:o}}function _(e){var t,n;const{store:i,collectionViewId:s,showMoveTo:l,saveParent:c,duplicate:d,pageVisitSource:u,queryId:v,embedded:_}=e;let b;if(s)b=s;else if(i&&i.isCollectionView()){const e=(0,g().cf)({userId:i.environment.currentUser.id,viewBlockId:i.id});if(e)b=e;else{const e=i.getCollectionViewsStore().getValue();e&&(b=e[0])}}const{spaceDomain:y,baseUrl:S,slug:w}=h({fullyQualified:!0,...e});let k=i,I=e.scrollToBlockId;if(i.isReady()&&!i.isNavigableBlock()){const e=(0,f().Nq)(i);e&&(k=e,I=i.id)}const x=p().default.state.mainEditorCurrentBlockStore;let A,C,T;k.canRead()?x&&e.openInSidePeek?(A=x,C=k.id,T=(0,m().getUrlParamFromPeekMode)(r().A)):x&&e.openInCenterPeek?(A=x,C=k.id,T=(0,m().getUrlParamFromPeekMode)(r().O)):(A=k,C=e.peekViewBlockId,T=e.peekMode):(A=k,C=e.peekViewBlockId,T=e.peekMode);const M=null===(t=e.demoSettingsStore)||void 0===t||null===(n=t.isActiveDemo)||void 0===n?void 0:n.call(t);return(0,o().A)({pageId:A.id,pageModel:A.getModel(),pageVisitSource:u,queryId:v,scrollToBlockId:I,peekViewBlockId:C,peekMode:T,collectionViewId:b,discussionId:e.discussionId,spaceDomain:y,baseUrl:S,showMoveTo:l,saveParent:c,duplicate:d,templateGalleryItem:e.templateGalleryItem,projectManagementLaunch:e.projectManagementLaunch,demoWorkspaceMode:M,slug:w,embedded:void 0===_?(0,a().bh)(i.environment.RouterStore.state.route):_,...(0,a().wX)(e)})}function b(e){let t;const n=p().default.state.mainEditorCurrentBlockStore,o=null==n?void 0:n.getRecordStore(n,e);if(o){const{baseUrl:e,spaceDomain:n}=h({store:o,fullyQualified:!0});e&&(t=(0,s().hd)(e,n||""))}return t}function y(e){const{environment:t,updates:n}=e,o=n.store??p().default.state.mainEditorCurrentBlockStore;if(!o)throw new Error("No store provided and no current block store is found in AppStore");return _({...function(e){const t={pageVisitSource:void 0};switch(e.name){case"page":const n=e;return{...n,...t,disableSlug:!n.slug};case"chat":case"home":case"posts":case"team":case"marketplace":case"gallery":return{...e,...t};default:return t}}(t.RouterStore.state.route),...n,store:o})}const S=_},492696:(e,t,n)=>{n.d(t,{E:()=>i,c:()=>o});const o="calloutBlockIcon",i="calloutBlockBackground"},493208:(e,t,n)=>{n.d(t,{Cm:()=>f,Su:()=>v,au:()=>m,e:()=>h,g8:()=>g,gV:()=>p,jj:()=>_,x9:()=>b});n(898992),n(354520),n(672577),n(581454);var o=()=>n(612740),i=()=>n(561565),r=()=>n(19916),a=()=>n(506391),s=()=>n(534177),l=()=>n(351360),c=()=>n(508496),d=()=>n(53137),u=()=>n(276282);function p(e){if(e.isCollectionView()){var t,n;if(null===(t=e.getCollectionStore())||void 0===t||!t.isSyncedCollection())return;return null===(n=e.getCollectionStore())||void 0===n?void 0:n.getFormat()}return e.getFormat()}function m(e,t){const n=d().A.state;if(!e||!n.loaded)return[];const o=(0,a().$B)({url:e,integrations:d().A.integrations.state,currentSpaceId:t});return"success"!==o.type?[]:n.bots.filter((e=>e.integration_id===o.integration.id))}function g(e,t){if(!e)return;const n=(0,a().$B)({url:e,integrations:d().A.integrations.state,currentSpaceId:t});return"success"===n.type?n:void 0}function f(e){const{store:t,isInDarkMode:n}=e,i=p(t);if(null!=i&&i.is_placeholder||null!=i&&i.error){const e=d().A.integrations.state.find((e=>{let{id:t}=e;return i.integration_id===t}));if(e){const t=d().A.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t})),{icon:s,dark_icon:c,accent_color:u,accent_icon:p}=e.info,m=n&&c?c:s;if(!m||!u||!p)return;const g=i.original_url;let f;if(g){var r;const t=(0,a().$B)({url:g,integrations:[e],currentSpaceId:null===(r=l().default.state.currentSpaceStore)||void 0===r?void 0:r.id});"success"===t.type&&(f=t.pattern)}return{type:null!=i&&i.is_placeholder?"placeholder":"error",userHasBotForIntegration:t.length>0,renderConfig:{headerAttributes:[{formatter:o().MC.placeholder,attribute:{id:"title",name:"Title",type:"inline",values:[e.name],format:{type:"title"}}}]},action:g&&!f?"error":void 0,updating:!1,originalUrl:g,pattern:f,integration:{id:e.id,icon:m,name:e.name,accentColor:u,accentIcon:p},botIds:t}}}return v({...e,getRenderFn:e=>e.block})}function v(e){var t;const{store:n,isInDarkMode:o,canEdit:r,currentUserId:c,showAction:d,getRenderFn:f}=e,v=p(n);if(!v||v.is_placeholder)return;if(void 0===v.external_object_id&&void 0!==v.uri)return;const h=v.original_url||v.uri;if(!n.isDefined())return;const _=g(h,n.getSpaceId()??(null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id));if(!h||!_)return;const b=m(h,n.getSpaceId()),y=b.length>0,S=n.getExternalObjectSubInstanceStores(),w=S.map((e=>e.getFormat())).filter(s().O9);if(w.length!==S.length)return;const{integration:k,pattern:I}=_,{icon:x,dark_icon:A,accent_color:C,accent_icon:T}=k.info,M=o&&A?A:x;if(!M||!C||!T)return;const P=(0,i().e)(I.name),B=(0,a().WS)({url:h,integration:k}),R=f(P)({integrationIcon:M,root:v,relations:w,parsedAttributes:B});if(!R)return;const E=u().A.state.updatingUrls.has(h);let D;var N;n.isCollectionView()?D=null===(N=n.getCollectionStore())||void 0===N||null===(N=N.getFormat().error)||void 0===N?void 0:N.status_code:D=n.getFormatStore().getKeyStore("error").getKeyStore("status_code").getValue();const L=Date.now(),O=Boolean(n.getCreatedById()!==c&&n.getCreatedTime()&&L-n.getCreatedTime()<6e4);let U;return!E&&r&&c&&(d?U=d:v.error?U="error":(null==v||!v.stale)&&v.attributes||O||(U=y?"update":"authenticate")),{type:"active",renderConfig:R,action:U,updating:E,status_code:D,originalUrl:h,integration:{id:k.id,icon:M,name:k.name,accentColor:C,accentIcon:T},pattern:I,userHasBotForIntegration:y,botIds:b.map((e=>{let{id:t}=e;return t}))}}function h(e,t){if(!t)return e;const n=g(e,t);return"success"!==(null==n?void 0:n.type)?e:(0,r().y)({url:e,integration:n.integration,pattern:n.pattern})}function _(){return"on"===c().default.getEligibleGroup({experimentId:"link_preview_resizing_api",defaultGroup:"control"})}function b(e){const t=c().default.checkGate({gateName:"use_eap_secureexternalpreview"});return e.includes("eap/proxy/files")&&t}},493260:(e,t,n)=>{n.d(t,{F:()=>r,v:()=>i});const o=new Map;function i(e){return o.get(e)}function r(e,t){o.set(e,t)}},493733:(e,t,n)=>{n.d(t,{A:()=>X});n(813451),n(944114),n(898992),n(672577),n(581454),n(908872);var o=n(296540),i=()=>n(484714),r=()=>n(792485),a=()=>n(847249),s=()=>n(700500),l=()=>n(179034),c=()=>n(534177),d=()=>n(547392),u=()=>n(751156),p=()=>n(855801),m=()=>n(186445),g=()=>n(108944),f=()=>n(731320),v=()=>n(645873),h=()=>n(644914),_=()=>n(77246),b=()=>n(143197),y=()=>n(630116),S=()=>n(263711);const w=new(n(496506).default)((()=>{if(S().g.state.isOpen&&"site-settings-editor"===S().g.state.mode)return n(622237).A.getEditorWidth()}),{debugName:"SiteSettingsEditorWidthStore"});var k=()=>n(620149),I=(n(737550),()=>n(496603)),x=()=>n(722101),A=()=>n(835066),C=()=>n(846662),T=()=>n(661491),M=()=>n(611191),P=()=>n(459882),B=()=>n(747100),R=()=>n(661179),E=()=>n(712505),D=()=>n(502438),N=()=>n(308701),L=()=>n(199896),O=()=>n(147577),U=n(474848);n(720665).TD;const F=4,V=4,j={quote:V,code:V,header:V,bookmark:V,external_object_instance:V,file:void 0,video:V,embed:V,tweet:V,drive:V,audio:V,gist:V,maps:V,framer:V,invision:V,figma:V,loom:V,typeform:V,mixpanel:V,codepen:V,equation:V,pdf:V,image:V,sub_header:void 0,sub_sub_header:void 0,page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,personal_home_page:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:V,table_of_contents:V,whimsical:V,miro:V,abstract:V,sketch:V,excalidraw:V,replit:V,hex:V,deepnote:V,table:1,table_row:void 0,tab:V,external_object_instance_page:V,button:void 0,ai_block:1,drawing:V,slide:V,post:V,workflow:V,transcription:V,person_profile:V},z={quote:F,code:F,bookmark:F,external_object_instance:F,file:void 0,video:F,embed:F,tweet:F,audio:F,drive:F,gist:F,maps:F,framer:F,invision:F,figma:F,loom:F,typeform:F,codepen:F,equation:F,pdf:F,header:"2em",sub_header:"1.4em",sub_sub_header:"1em",image:F,page:void 0,personal_home_page:void 0,collection_view:void 0,collection_view_page:void 0,form:void 0,column_list:void 0,column:void 0,breadcrumb:void 0,text:void 0,encrypted_text:void 0,bulleted_list:void 0,numbered_list:void 0,to_do:void 0,toggle:void 0,factory:void 0,copy_indicator:void 0,divider:void 0,link_to_collection:void 0,link_to_page:void 0,alias:void 0,transclusion_container:1,transclusion_reference:1,callout:F,table_of_contents:F,whimsical:F,miro:F,abstract:F,mixpanel:F,sketch:F,excalidraw:F,replit:F,table:1,table_row:void 0,tab:F,hex:F,deepnote:F,external_object_instance_page:F,button:void 0,ai_block:1,drawing:F,slide:F,post:F,workflow:F,transcription:F,person_profile:F},H={left:"flex-start",center:"center",right:"flex-end"};function W(e){const{store:t,listStore:b,isFirstItem:w,isInsideMarginCollapseContainer:k,canEditList:W,disableSelection:q,disableHoverMenu:G,disableCommentMenu:$,disableDrag:Y,isLastItem:Q,isPageFullWidth:Z,maybeSiteSettingsEditorWidth:X,sidePeekWidth:J,shouldShowSidebar:ee,canHideOrphanedBlocks:te,plusButtonBetweenBlocksEnabled:ne}=e,oe=(0,i().v3)(),ie=(0,r().S)(),re=(0,o.useContext)(n(27654).c),ae=(0,o.useRef)(),[se]=(0,o.useState)((()=>n(17022).A.withListenerIgnored((()=>m().kS(t))))),le=(0,a().uB)(void 0,n(891279).A),{isPhantomSyncedBlock:ce,legacyTransclusionParent:de}=(0,a().K8)((()=>{const e=t.getParentId(),n=Boolean(e&&b.id!==e),o=n?b.getRecordStoreAtRootPath():void 0;return{isPhantomSyncedBlock:n,legacyTransclusionParent:o&&o instanceof y().Bv?o:void 0}}),[b,t]),ue=(0,a().K8)((()=>{if(t.isTransclusionType()){if(n(840790).A.state.unsyncingBlockIds.has(t.id))return!0}return!1}),[t]),pe=(0,a().K8)((()=>{var o;return!!e.disabled||t.id===(null===(o=n(964345).Ay.state.block)||void 0===o?void 0:o.id)}),[e.disabled,t.id]),me=(0,a().K8)((()=>{const e=ie&&ie.publicEditModeStore.state;return!pe&&(!(0,f().QT)(e)&&t.canEdit())}),[ie,pe,t]),ge=(0,a().K8)((()=>{const e=ie&&ie.publicEditModeStore.state;return W&&!n(878377).x7S({environment:oe,blocks:[t],publicEditMode:e})}),[oe,ie,W,t]),fe=(0,a().K8)((()=>_().Uv.getMode(t)),[t]),ve=(0,a().K8)((()=>(0,A().dC)(oe,t)),[oe,t]),he=(0,o.useMemo)((()=>(0,n(42803).n)(t)),[t]),_e=(0,a().K8)((()=>{const e=ie&&ie.publicEditModeStore.state;return!(!e||!e.hasPublicPermission)&&("view"===e.permission||("comment"===e.permission?"suggest"!==fe:"edit"!==e.permission&&void(0,c().HB)(e.permission)))}),[ie,fe]),{type:be,isFullWidth:ye,canDropOnto:Se,canDropLeftRight:we,shouldShowParentHalo:ke,showHoverMenu:Ie,canDrag:xe,canSelect:Ae,shouldShowSelectionHalo:Ce,shouldShowCommentMenu:Te,numSimpleTableComments:Me,isInlineCollectionView:Pe,isSimpleTable:Be,shouldCollapseTopMargin:Re,isInPeekRenderer:Ee,preventBackgroundDrag:De,disableForceTouch:Ne,alignStyle:Le,canTriggerContextMenu:Oe,isRootChild:Ue,Renderer:Fe}=(0,a().K8)((()=>{const{device:e}=oe,o=t.getFormat(),i=t.getType(),{dragging:r,temporaryFullWidth:a}=le.state,c=(0,n(344051).B)(t),d=r?a:o.block_full_width,u=i===s().xd.page||i===s().xd.collectionViewPage||o.alias_pointer&&(0,n(696706).Yt)(o.alias_pointer,l().ev)||i&&(0,n(494043).Yt)(i,o)&&!n(468484).A.isOpen(t.id),p=Boolean(i&&(0,s().Ef)(i)),m=i===s().xd.table,g=i===s().xd.columnList,f=c===n(938090).dN,v=w&&k&&t.isType(s().u0),h=f,_=t.isRootOrDirectChild(),b=t.getParentStore(),y="block"===(null==b?void 0:b.table)&&b.isType(s().xd.toggle),S=(_||y)&&!g&&!m&&W&&!e.isPhone,I=ie&&ie.publicEditModeStore.state,x=f&&t.getCollectionStore();let A=f;if(x){void 0===x.getKeyStore("version").getValue()&&(A=!1)}const T=!q&&t.canRead()&&!m&&!A&&(!ge||"suggest"===fe),M=!_e&&T&&!f&&!m,P=M,B=(i===s().xd.transclusionContainer||i===s().xd.transclusionReference||i===s().xd.aiBlock)&&function(e){return D().default.state.stores.some((t=>t!==e&&e.uiContains(t)))}(t),R=!_e&&!G&&(!g||ne)&&!m&&!B,N=!$&&!p&&!g&&!(0,C().gV)(t)&&!m&&oe.currentUser.isLoggedIn()&&(!G&&t.canComment()||!W&&("comment"===(null==I?void 0:I.permission)||"comment_only"===t.getRole()))&&(0,n(930545).zp)({blocks:[t]}),L=m?n(980914).Xe({simpleTableStore:t,environment:oe,includeInline:!ve}):0;return{type:i,isFullWidth:d,canDropOnto:u,canDropLeftRight:S,shouldShowParentHalo:P,showHoverMenu:R,canDrag:W&&!g&&!Y,canSelect:T,shouldShowSelectionHalo:M,shouldShowCommentMenu:N,numSimpleTableComments:L,isInlineCollectionView:f,isSimpleTable:m,shouldCollapseTopMargin:v,isInPeekRenderer:Boolean(t.findRecordStoreUIAncestor((e=>e===E().default.peekTargetStore.state)).ancestor),preventBackgroundDrag:h,disableForceTouch:"drawing"===i&&(0,n(969197).OW)(t),alignStyle:o.block_alignment,canTriggerContextMenu:!(0,s().Db)(i,o)&&W&&!g&&!t.inMemoryRecordCache.isSyntheticAssistantData,isRootChild:_,Renderer:c}}),[le,fe,oe,ge,ve,ie,t,w,k,W,q,G,$,Y,ne,_e],{debugName:"renderStateStore"}),Ve=(0,a().K8)((()=>{const{device:e}=oe,o=oe.WindowSizeStore.state.width,i=(0,h().zo)(oe,Ee)-J,r=re||!Ue||he;if(function(e){return Boolean(e.inMemoryRecordCache.snapshotData)}(t)&&!r&&!e.isPhone)return o*(O().oR/100)-O().pN-R().A.state;if(n(489348).A.isBlockInTemplate(t)&&!re&&!e.isPhone)return o*(N().uL/100)-N().j3-R().A.state;if(S().g.state.isOpen&&"site-settings-editor"===S().g.state.mode&&X){const e=K(oe,t,be)?2*m().F8(oe):0;return X+e}if(r)return"100%";if(Ee){const e=(0,n(154807).eO)({environment:oe,isInPeek:!0});return E().default.getPeekModeWidth(o)-R().A.state-e}let a=o-R().A.state-i;return(0,h().tv)(oe)?(e.isMobile&&!e.isTablet||!ee||(a-=(0,h().kf)(oe)),!Pe&&ve&&(a-=Z?A().Qb:2*(0,A().Zy)(oe,Ee,(0,B().RX)(t))),K(oe,t,be)||(a-=2*m().F8(oe)),a):a}),[oe,Ee,J,re,t,X,ee,Pe,ve,be,Z,Ue,he]),{value:je}=(0,v().fJ)(p().VI.duplicateActions),ze=(0,a().K8)((()=>{if(!function(e,t,n){return!!n&&(Boolean(s().Ib[n])||(0,C().gV)(t)||t.isType("column_list")&&(0,T().kv)(t,e)||t.isType("external_object_instance"))}(oe,t,be))return null;if(be&&(0,n(565304).h)({environment:oe,type:be}))return{width:"100%"};const{dragging:e,temporaryWidth:o,temporaryFullWidth:i,temporaryPageWidth:r}=le.state,{block_width:a,block_full_width:l,block_page_width:c}=t.getFormat(),d=(e?i:l)?Ve:(e?r:c)?"100%":e?o:a;return void 0!==d?{width:d}:null}),[le,oe,Ve,t,be]),He=(0,a().K8)((()=>{const{device:e}=oe;let o;if(t.isExternalObjectInstanceBlockStore()){var i;const e=(0,n(493208).Cm)({store:t,canEdit:me,currentUserId:oe.currentUser.id,isInDarkMode:"dark"===oe.ThemeStore.state.mode,showAction:void 0});o=(null==e?void 0:e.renderConfig.previewAttributes)&&(null===(i=e.renderConfig.previewAttributes[0])||void 0===i?void 0:i.mimeType)}const r={};o?"image/*"!==o&&(r.width="100%"):r.width="100%",r.maxWidth=Ve,(e.isMobile&&!ye||re||!Ue)&&(r.maxWidth="100%"),Le&&!ye&&!e.isPhone&&H[Le]?r.alignSelf=H[Le]:Ue&&be&&(s().H_[be]||(0,C().gV)(t))?r.alignSelf="center":be&&s().Ib[be]&&(r.alignSelf="flex-start"),r.marginTop=w?2:1,r.marginBottom=Q?0:1;const a=be&&(0,s().UL)(be)&&!t.getProperties().source;if(a?r.marginTop=F:be&&z[be]&&(r.marginTop=z[be]),a&&!Q?r.marginBottom=V:!Q&&be&&j[be]&&(r.marginBottom=j[be]),Re&&(r.marginTop=0),Be&&0===Me&&(Ue||e.isPhone)){const e=Ve;r.maxWidth="center_peek"===E().default.getPeekMode()?`calc(100vw - ${2*E().PeekModeOuterPadding-R().A.state}px)`:(0,B().RX)(t)&&!Z?P().x:e,r.width=(0,B().RX)(t)&&!Z?P().x:e,r.alignSelf="center"}return Ue&&ve&&Pe&&(r.zIndex=1),(0,M().iE)()&&ce&&(r.border="3px dashed deeppink"),(0,M().xf)()&&!1===t.getAlive()&&(r.outline="3px dashed deepSkyBlue"),r}),[oe,Ve,ye,re,t,me,Le,be,w,Q,Be,Me,Re,ve,Pe,Ue,ce,Z]),We=(0,a().K8)((()=>g().pp(t)),[t]),qe=(0,o.useCallback)((e=>{ae.current&&"edit"in ae.current?ae.current.edit():d().Rp({environment:oe,targetStore:t,targetParentStore:b,isAtStartOfLine:!1,isClick:!1,transaction:e.transaction})}),[ae,oe,b,t]),Ke=(0,o.useCallback)((e=>{const{droppedDirection:n,droppedStores:o,duplicate:i}=e;u().createAndCommit({userAction:"ListItemBlock.handleDrop",environment:oe,canUndo:!0,perform:e=>{d().MS({environment:oe,targetParentStore:b,targetStore:t,droppedDirection:n,droppedStores:o,duplicate:i,transaction:e,duplicateActions:je})}})}),[je,oe,b,t]),Ge=(0,o.useCallback)((e=>{const{files:n,droppedDirection:o}=e;u().createAndCommit({userAction:"ListItemBlock.handleNativeDrop",environment:oe,canUndo:!0,perform:e=>d().vZ({environment:oe,files:n,targetParentStore:b,targetStore:t,droppedDirection:o,transaction:e,duplicateActions:je})})}),[je,oe,b,t]),$e=(0,o.useCallback)((e=>{const{insertStores:n,transaction:o}=e;return I().o8(n).reverse().map((e=>x().WH({parentStore:b,insertStore:e,afterStore:t,transaction:o}).childStore))}),[b,t]),Ye=(0,o.useCallback)((e=>{const{insertStores:n,transaction:o}=e;return I().o8(n).reverse().map((e=>x().nc({parentStore:b,insertStore:e,beforeStore:t,transaction:o}).childStore))}),[b,t]),Qe=(0,o.useCallback)((e=>{d().MB({environment:oe,targetStore:t,targetParentStore:b,isAtStartOfLine:e.isAtStartOfLine,isAtStartOfContainer:e.isAtStartOfContainer,isClick:e.isClick,transaction:e.transaction})}),[oe,b,t]),Ze=(0,o.useCallback)((e=>{{const{transaction:o}=e,i=t.getRecordStoreUIParent();i&&(i.table!==l().ev&&i.table!==n(96689).NX&&i.table!==n(199378).SC||!i.valueIs(n(65269)._)||(n(838256).VS(oe,"user_flow_delete_block",o,"ListItemBlock.handleRemove"),x().TF({parentStore:i,childToRemoveStore:t,transaction:o})))}}),[oe,t]),Xe=(0,o.useMemo)((()=>!("suggest"!==fe)&&(!be||!s().D2[be])),[fe,be]),Je=t=>{const{store:o,canEditList:i,isFirstItem:r,isLastItem:a}=e,s={style:He,store:o,canSelect:Ae,canEditText:me,shouldShowHalo:Ce,shouldShowParentHalo:ke,canDrag:xe,canDropAbove:i&&r,canDropBelow:i,canDropLeft:we,canDropRight:we,canDropOnto:i&&Se,isLastItem:a,canNativeDropAbove:i&&r,canNativeDropBelow:i,canNativeDropLeft:we,canNativeDropRight:we,onSelectableDrop:Ke,onNativeDrop:Ge,canTriggerContextMenu:Oe,onInsertBelow:$e,onInsertAbove:Ye,canInsertAbove:i,canInsertBelow:i,onEditText:Qe,onEnter:qe,onRemove:Ze,showBlockMenuInput:!0,shouldShowSuggestRemoveHalo:!0,shouldShowSuggestInsertBorder:!0,shouldShowHoverMenu:Ie,disableForceTouch:Ne,shouldShowCommentMenu:Te,shouldShowDropZone:!Be,isListContainer:!0,preventBackgroundDrag:De,analyticsName:"page_content",...t,ignoreForTocSelectionIntersection:"table"===be};return ze?(0,U.jsx)(n(145214).A,{tag:L().A,animate:ze,...s,children:et()}):(0,U.jsx)(L().A,{...s,children:et()})},et=()=>{const{store:t,placeholder:o,disableHoverMenu:i,disableDrag:r,disableCommentMenu:a,numberedListCounterStore:s,bulletedListFormatStore:l,disableSuggestEdit:c}=e;return!We&&te||ue?null:Fe?(0,U.jsx)(n(108066).I,{store:t,type:be,children:(0,U.jsx)(Fe,{ref:ae,store:t,disabled:pe||Xe,placeholder:o,isFirstItem:w,isLastItem:Q,blockResizerStore:le,disableCommentMenu:a,disableSuggestEdit:c,numberedListCounterStore:s,bulletedListFormatStore:l,disableHoverMenu:i,disableDrag:r,legacyTransclusionParentStore:de,fullWidth:Ve,...Pe?{productUseCase:"inline"}:{}})}):void 0};return se&&be===s().xd.copyIndicator?null:Pe?Je():(0,n(569912).A)(Je)}const q=o.memo(W,n(821062).A);function K(e,t,n){return!!n&&(s().y4[n]||(0,C().gV)(t)||t.isType("column_list")&&(0,T().kv)(t,e)&&t.getFormat().block_full_width)}const G="emptyDroppableKey",$="placeholder",Y={depth:1,numberedListBlockIdsWithFormat:[]},Q=Object.freeze({depth:0,blockIdFormats:new Map});function Z(e){const t=(0,o.useContext)(n(807005).Z),S=(0,a().K8)((()=>null==t?void 0:t.state),[t]),I=(0,i().v3)(),x=(0,r().S)(),A=(0,a().K8)((()=>{if(e.disabled)return!1;if(k().l.state)return!1;const t=(0,g().Wo)(e.store)&&x&&x.publicEditModeStore.state;return!(0,f().QT)(t)&&e.store.canEdit()}),[x,e.disabled,e.store]),C=(0,a().K8)((()=>!e.disabled&&(!k().l.state&&Boolean(e.store.isCommentOnly()&&(null==x?void 0:x.pageStore)&&"suggest"===_().Uv.getMode(null==x?void 0:x.pageStore)))),[e.store,null==x?void 0:x.pageStore,e.disabled]),T=(0,a().K8)((()=>{if(e.forceIsInsideMarginCollapseContainer)return!0;const t=J(e.store.id,e.store);return(0,s().wy)(t.getType(),t.getFormat())}),[e.store,e.forceIsInsideMarginCollapseContainer]),M=(0,a().K8)((()=>null==x?void 0:x.pageStore.isFullWidth()),[null==x?void 0:x.pageStore]),P=(0,a().O$)(w),B=(0,a().K8)((()=>(0,h().Ql)(I)),[I]),R=(0,a().K8)((()=>m().X4(I).shouldShowSidebar),[I]),E=(0,n(963589).X)("hide_orphan_blocks"),D=(0,n(444570).Jj)(),{value:N}=(0,v().fJ)(p().VI.duplicateActions),O=(t,i,r)=>{if(t===G)return(0,U.jsx)(o.Fragment,{children:F()},t);if(t===$)return(0,U.jsx)(o.Fragment,{children:e.emptyPlaceholder},t);{const a=J(t,e.store),s=r.findLastIndex((e=>(0,n(498212).uj)(e)));return(0,U.jsx)(o.Fragment,{children:(0,U.jsx)(q,{store:a,listStore:e.store,isFirstItem:0===i,isInsideMarginCollapseContainer:T,isLastItem:i===s,disabled:e.disabled,placeholder:e.placeholder,disableLayout:e.disableLayout,canEditList:A||C,disableSelection:e.disableSelection,disableSuggestEdit:e.disableSuggestEdit,disableHoverMenu:!(!e.disableFirstItemHoverMenu||0!==i)||e.disableHoverMenu,disableCommentMenu:e.disableCommentMenu,disableDrag:e.disableDrag,numberedListCounterStore:z,bulletedListFormatStore:j,isPageFullWidth:M,maybeSiteSettingsEditorWidth:P,sidePeekWidth:B,shouldShowSidebar:R,canHideOrphanedBlocks:E,plusButtonBetweenBlocksEnabled:D})},t)}};function F(){const t=y().Bv.createChildStore(e.store,{table:l().ev,id:e.store.id});return(0,U.jsx)(L().A,{store:t,canDropBelow:A,canNativeDropBelow:A,onSelectableDrop:t=>function(e,t,n,o){const{droppedDirection:i,droppedStores:r,duplicate:a}=e;u().createAndCommit({userAction:"List.handleEmptyDrop",environment:n,canUndo:!0,perform:e=>{d().MS({environment:n,targetParentStore:t,targetStore:void 0,droppedDirection:i,droppedStores:r,duplicate:a,transaction:e,duplicateActions:o})}})}(t,e.store,I,N),onNativeDrop:t=>function(e,t,n,o){const{files:i,droppedDirection:r}=e;u().createAndCommit({userAction:"List.handleEmptyNativeDrop",environment:n,canUndo:!0,perform:e=>{d().vZ({environment:n,files:i,targetParentStore:t,targetStore:void 0,droppedDirection:r,transaction:e,duplicateActions:o})}})}(t,e.store,I,N),style:e.emptyDroppableStyle,analyticsName:"page_content",shouldShowDropZone:!0})}const V=(0,a().K8)((()=>{const t=e.store.getValue()||[];let n=t;const o=function(e){const{limitParents:t}=b().A.state,n=e.id;let o;return e.findRecordStoreUIAncestor((e=>{const i=t.get(e);return!(!i||!i.hasOwnProperty(n))&&(o=i[n],!0)})),o}(e.store),i=0===t.length;return void 0!==o&&(n=n.slice(0,o)),A&&i&&(n.push(G),e.emptyPlaceholder&&n.push($)),n}),[A,e.emptyPlaceholder,e.store]),j=(0,a().r6)((()=>{var t;const n=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState().depth,o="number"==typeof n?n+1:0,i=new Map;let r;for(const a of V){const t=J(a,e.store);r=t.getType()===s().xd.bulletedList?t.getFormat().bullet_list_format||r:void 0,r&&i.set(a,r)}return 0===o&&0===i.size?Q:{depth:o,blockIdFormats:i}}),[V,e.bulletedListFormatStore,e.store]);(0,a().O$)(j);const z=(0,a().r6)((()=>{var t;const n=[],o=V.length?V[0]:void 0,i=o?J(o,e.store):void 0,r=null==i?void 0:i.getParentId(),a=null===(t=e.numberedListCounterStore)||void 0===t?void 0:t.state.numberedListBlockIdsWithFormat.find((e=>e.id===r)),l=null==a?void 0:a.format;let d=void 0===(null==a?void 0:a.depth)?0:(null==a?void 0:a.depth)+1,u=l,p=0;for(const g of V)if(g!==G&&g!==$){const t=J(g,e.store),o=t.getType(),i=t.getFormat();if(u=(null==i?void 0:i.list_format)??u,o===s().xd.numberedList){let e=i.list_start_index;(0,c().O9)(e)&&0!==p&&(e=void 0),p=(0,c().O9)(e)?e:p+1,n.push({id:g,format:u,depth:d||0,index:p})}else u=void 0,n.push({id:void 0,format:u,depth:0,index:p}),d=0,p=0}const m={depth:d||0,numberedListBlockIdsWithFormat:n};return 1===m.depth&&0===m.numberedListBlockIdsWithFormat.length?Y:m}),[V,e.numberedListCounterStore,e.store]);(0,a().O$)(z);return(0,U.jsx)(n(11048).A,{name:"List",children:e.disableContent?null:S?V.reduce(((e,t,n,o)=>(S.indexOf(t)>=0&&e.push(O(t,n,o)),e)),[]):V.map(O)})}const X=o.memo(Z);function J(e,t){return y().Bv.createChildStore(t,{table:l().ev,id:e})}},493823:(e,t,n)=>{n.d(t,{p:()=>o().p});var o=()=>n(920773)},494043:(e,t,n)=>{n.d(t,{BN:()=>p,O3:()=>c,PQ:()=>m,Yt:()=>l,i_:()=>d,pL:()=>s,qj:()=>g,x_:()=>u});var o=()=>n(700500),i=()=>n(324089),r=()=>n(502438),a=()=>n(468484);function s(e){return Boolean(o().B$[e])}function l(e,t){return Boolean("toggle"===e||o().kC[e]&&(null==t?void 0:t.toggleable))}function c(e){return Boolean(o().kC[e])}function d(e){return o().B$[e]}function u(e){return o().kC[e]}function p(e){return"toggle"===e.getType()||m(e)}function m(e){const t=e.getType(),n=e.getFormat();return Boolean(void 0!==t&&(0,o().v_)(t,n))}function g(e,t,n){let o;o=r().default.state.stores.includes(t)?r().default.state.stores:[t];const s=!(a().A.isOpen(t.id)&&!n);for(const r of o)i().xT({blockId:r.id,state:s,currentUserId:e.currentUser.id})}},494237:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},495074:(e,t,n)=>{n.d(t,{A:()=>u});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(452540),i=()=>n(592328),r=()=>n(220719),a=(n(16280),n(581454),()=>n(496603));class s extends i().A{constructor(e){super(),this.blocks=void 0,this.liveBlocks=void 0,this.rootBlock=void 0,this.detachedRootBlocks=void 0,this.blocks=new Map,this.liveBlocks=new Map,this.rootBlock=this.createBlock(e,"page"),this.detachedRootBlocks=new Map}hasBlock(e){return this.blocks.has(e)}getBlock(e){return(0,r().o9)(this.blocks.get(e))}createBlock(e,t){(0,r().MX)(!this.hasBlock(e.id),"Block already exists on page");const n=new l({blockStore:e,tracker:this,reference:t,onCreated:e=>{this.blocks.set(e.getId(),e)}});return n.hasLiveReference()&&this.addLiveBlock(n),n}removeBlock(e){(0,r().MX)(this.hasBlock(e),"Block must exist on page"),(0,r().MX)(!this.liveBlocks.has(e),"Should not be possible to remove a live block"),this.blocks.delete(e)}getLiveBlocks(){return[...this.liveBlocks.values()]}addLiveBlock(e){(0,r().MX)(!this.liveBlocks.has(e.getId()),"Block already added to live blocks"),this.liveBlocks.set(e.getId(),e),this.emit({type:"add_block",blockStore:e.blockStore})}removeLiveBlock(e){this.liveBlocks.delete(e.getId()),this.emit({type:"remove_block",blockId:e.getId()})}destroy(){for(const e of this.blocks.values())e.destroy();this.blocks.clear(),this.liveBlocks.clear(),this.detachedRootBlocks.clear()}getClosestPageAndTransclusionReferenceAncestorIds(e){const t=this.liveBlocks.get(e);return t?t.getClosestPageAndTransclusionReferenceAncestors().map((e=>e.getId())):[]}getPathToBlock(e){const t=this.liveBlocks.get(e);if(!t)return;const n=[];let o=t;for(;o;){n.unshift(o.getId());const e=o.liveReferences.values().next().value;if("page"===e)return n;e&&(o=e)}throw new Error("Block should have a page ancestor")}}class l{constructor(e){this.tracker=void 0,this.blockStore=void 0,this.liveReferences=void 0,this.detachedReferences=void 0,this.childBlocks=void 0,this.childBlocksList=void 0,this.contentStoreListener=void 0;const{blockStore:t,tracker:n,reference:o,onCreated:i}=e;this.tracker=n,this.blockStore=t,this.liveReferences=new Set,this.detachedReferences=new Set,"page"===o||o.hasLiveReference()?this.liveReferences.add(o):this.detachedReferences.add(o),this.childBlocks=new Map,this.childBlocksList=[],i(this),this.contentStoreListener=()=>this.handleContentStoreChange(),this.blockStore.getKeyStore("type").addListener(this.contentStoreListener),this.blockStore.getContentStore().addListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").addListener(this.contentStoreListener),this.handleContentStoreChange()}handleContentStoreChange(){const e=[...this.childBlocks.keys()],t=new Map,o=this.blockStore.getType();if(this.liveReferences.has("page")||o&&!(0,n(700500).$I)(o))for(const r of(0,n(653609).W)(this.blockStore))t.set(r.id,r);const i=[...t.keys()],s=a().R9(i,e),l=a().R9(e,i);for(const n of s)if(this.tracker.hasBlock(n)){const e=this.tracker.getBlock(n);e.addReference(this),this.childBlocks.set(n,e)}else{const e=this.tracker.createBlock((0,r().o9)(t.get(n)),this);this.childBlocks.set(n,e)}for(const n of l){const e=(0,r().o9)(this.childBlocks.get(n));this.childBlocks.delete(n),e.removeReference(this)}this.childBlocksList=[...t.keys()].map((e=>(0,r().o9)(this.childBlocks.get(e)))),this.tracker.emit({type:"content_store_change"})}getId(){return this.blockStore.id}hasLiveReference(){return this.liveReferences.size>0}addReference(e){e.hasLiveReference()?this.addLiveReference(e):this.addDetachedReference(e)}addLiveReference(e){if((0,r().MX)(!this.liveReferences.has(e),"Reference already exists for block"),this.liveReferences.add(e),1===this.liveReferences.size){this.tracker.addLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}}addDetachedReference(e){this.detachedReferences.add(e)}removeReference(e){e.hasLiveReference()?this.removeLiveReference(e):this.removeDetachedReference(e)}removeLiveReference(e){if(this.liveReferences.delete(e),this.detachedReferences.add("detached"),this.tracker.detachedRootBlocks.set(this.getId(),this),0===this.liveReferences.size){this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}removeDetachedReference(e){if(this.detachedReferences.delete(e),0===this.liveReferences.size&&0===this.detachedReferences.size){for(const[e,t]of this.childBlocks.entries())this.childBlocks.delete(e),t.removeReference(this);this.tracker.removeBlock(this.getId()),this.destroy()}}updateReference(e){const t=this.hasLiveReference();this.liveReferences.has(e)&&!e.hasLiveReference()?(this.liveReferences.delete(e),this.detachedReferences.add(e)):this.detachedReferences.has(e)&&e.hasLiveReference()&&(this.liveReferences.add(e),this.detachedReferences.delete(e));const n=this.hasLiveReference();if(t!==n){n?this.tracker.addLiveBlock(this):this.tracker.removeLiveBlock(this);for(const e of this.childBlocks.values())e.updateReference(this)}return this}getClosestPageAndTransclusionReferenceAncestors(){if(0===this.liveReferences.size)return[];if(this===this.tracker.rootBlock)return[this];const e=new Set,t=new Set,n=[this];for(;n.length>0;){const o=(0,r().o9)(n.shift());if(t.has(o))continue;const i=o.liveReferences;for(const t of i)"page"===t?e.add(o):"transclusion_reference"===t.blockStore.getType()?e.add(t):n.push(t);t.add(o)}return(0,r().MX)(e.size>0,"Block must have one or more ancestors"),[...e]}destroy(){this.contentStoreListener&&(this.blockStore.getKeyStore("type").removeListener(this.contentStoreListener),this.blockStore.getContentStore().removeListener(this.contentStoreListener),this.blockStore.getFormatStore().getKeyStore("transclusion_reference_pointer").removeListener(this.contentStoreListener),this.contentStoreListener=void 0)}}class c{constructor(e){this.blockTextInstanceMap=void 0,this.textInstanceBlockMap=void 0,this.blockTextSliceTreeListenerMap=void 0,this.pageBlockTracker=void 0,this.pageBlockTrackerListener=void 0,this.blockTextInstanceMap=new Map,this.textInstanceBlockMap=new Map,this.blockTextSliceTreeListenerMap=new Map,this.pageBlockTracker=e,this.pageBlockTrackerListener=e=>this.handlePageEvent(e),this.pageBlockTracker.addListener(this.pageBlockTrackerListener);for(const{blockStore:t}of e.getLiveBlocks())this.addBlock(t)}handlePageEvent(e){const t=e.type;switch(t){case"add_block":this.addBlock(e.blockStore);break;case"remove_block":this.removeBlock(e.blockId);break;case"content_store_change":break;default:(0,n(534177).HB)(t)}}addBlock(e){const t=e.id;if(this.blockTextSliceTreeListenerMap.has(t))return;const n=()=>{this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())};e.getSerializedTextSliceTreeStore().addListener(n),this.blockTextSliceTreeListenerMap.set(t,{blockStore:e,textSliceTreeListener:n}),this.handleTextSliceTreeChange(t,e.getBlockTitleTextSliceTree())}removeBlock(e){this.removeMappingForBlock(e);const{blockStore:t,textSliceTreeListener:n}=(0,r().o9)(this.blockTextSliceTreeListenerMap.get(e));t.getSerializedTextSliceTreeStore().removeListener(n),this.blockTextSliceTreeListenerMap.delete(e)}handleTextSliceTreeChange(e,t){if(this.removeMappingForBlock(e),t)for(const n of t.getTextInstanceIds())this.addBlockTextInstanceMapping(e,n)}removeMappingForBlock(e){const t=this.blockTextInstanceMap.get(e);if(t)for(const n of t)this.removeBlockTextInstanceMapping(e,n)}addBlockTextInstanceMapping(e,t){const n=this.blockTextInstanceMap.get(e)??new Set;n.add(t),this.blockTextInstanceMap.set(e,n);const o=this.textInstanceBlockMap.get(t)??new Set;o.add(e),this.textInstanceBlockMap.set(t,o)}removeBlockTextInstanceMapping(e,t){const n=(0,r().o9)(this.blockTextInstanceMap.get(e));n.delete(t),0===n.size&&this.blockTextInstanceMap.delete(e);const o=(0,r().o9)(this.textInstanceBlockMap.get(t));o.delete(e),0===o.size&&this.textInstanceBlockMap.delete(t)}getTextInstanceIdsForBlock(e){return this.blockTextInstanceMap.has(e)?[...(0,r().o9)(this.blockTextInstanceMap.get(e))]:[]}getBlockIdsForTextInstance(e){return this.textInstanceBlockMap.has(e)?[...(0,r().o9)(this.textInstanceBlockMap.get(e))]:[]}getBlockIdForTextInstanceItemId(e,t,n){const o=this.getBlockIdsForTextInstance(e);for(const i of o){const o=(0,r().o9)(this.blockTextSliceTreeListenerMap.get(i)).blockStore;if((0,r().o9)(o.getBlockTitleTextSliceTree()).findTextSliceTreeContainingItemWithId(e,t,n))return o.id}}destroy(){for(const e of this.blockTextSliceTreeListenerMap.keys())this.removeBlock(e);this.pageBlockTracker.removeListener(this.pageBlockTrackerListener)}}class d extends i().A{constructor(){super(...arguments),this.pageInfoMap=new(n(795727).A)({getKey:e=>(0,o().jV)(e)})}trackPage(e){if(this.pageInfoMap.has(e.pointer))return void(0,r().o9)(this.pageInfoMap.get(e.pointer)).pageStores.add(e);const t=new s(e),n=new c(t),i=new Set([e]);this.pageInfoMap.set(e.pointer,{pageBlockTracker:t,pageTextInstanceTracker:n,pageStores:i}),this.emit({type:"track_page",combinedId:(0,o().jV)(e.pointer)})}untrackPage(e){const t=e.pointer,n=(0,r().o9)(this.pageInfoMap.get(t));var i;(n.pageStores.delete(e),0===n.pageStores.size)&&(n.pageBlockTracker.destroy(),null===(i=n.pageTextInstanceTracker)||void 0===i||i.destroy(),this.pageInfoMap.delete(t));this.emit({type:"untrack_page",combinedId:(0,o().jV)(e.pointer)})}clear(){const e=[];for(const[n,i]of this.pageInfoMap){var t;i.pageBlockTracker.destroy(),null===(t=i.pageTextInstanceTracker)||void 0===t||t.destroy(),this.pageInfoMap.delete(n),e.push({type:"untrack_page",combinedId:(0,o().jV)(n)})}this.emit(...e)}getPageStoreForBlockStore(e){for(const[t,n]of this.pageInfoMap)for(const o of n.pageStores)if(o.uiLocation.contains(e.uiLocation))return o;for(const[t,n]of this.pageInfoMap)for(const o of n.pageStores){const t=this.pageInfoMap.get(o.pointer);if(null!=t&&t.pageBlockTracker&&t.pageBlockTracker.hasBlock(e.pointer.id))return o}}getPageBlockTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageBlockTracker}getPageTextInstanceTrackerForPage(e){var t;return null===(t=this.pageInfoMap.get(e))||void 0===t?void 0:t.pageTextInstanceTracker}}const u=new d},495249:(e,t,n)=>{n.d(t,{Dz:()=>i,Nq:()=>a,Tl:()=>r,ud:()=>o});n(944114);function o(e){const{ids:t,table:n,userStore:o}=e,r=[];for(const i of t){const e=o.getRecordModel({id:i,table:n});e&&r.push(e)}return i(r)}function i(e){return e.slice().sort(((e,t)=>t.created_at-e.created_at))}const r=["all","internal","public"],a={[n(824862).GP]:"internal",[n(332393).Li]:"public"}},495262:(e,t,n)=>{n.d(t,{BB:()=>I,Bl:()=>T,Fn:()=>y,JM:()=>A,ZS:()=>w,fH:()=>x,li:()=>C,tN:()=>S,xO:()=>k,xy:()=>M});n(18107),n(944114),n(967357),n(898992),n(354520),n(672577),n(803949),n(737550);var o=()=>n(933449),i=()=>n(134025),r=()=>n(696706),a=()=>n(179034),s=()=>n(439180),l=()=>n(220719),c=()=>n(496603),d=()=>n(534177),u=()=>n(436725),p=()=>n(886564),m=()=>n(630116),g=()=>n(733539),f=()=>n(502438),v=()=>n(24157),h=()=>n(551864),_=()=>n(496879),b=()=>n(751156);function y(e){const t=g().default.state,{undoStack:n,invertedTextOperationIdMapper:o}=t,i=e.currentTime??Date.now(),r=e.transaction.getUserActionForAnalyticsPurposesOnly()??"unknown";if("string"==typeof e.undoCheckpoint){const t=n.find((t=>t.namedRevisionId===e.undoCheckpoint));t?(t.transactions.push(e.transaction),t.userActions.push(r)):n.push({userActions:[r],transactions:[e.transaction],timestamp:i,namedRevisionId:e.undoCheckpoint,undoRedoCount:0})}else{const t=n.at(-1);!e.undoCheckpoint&&t&&!t.namedRevisionId&&i-t.timestamp<=g().groupIntervalMs&&0===t.undoRedoCount&&t.transactions[0].isLocal===e.transaction.isLocal&&t.transactions[0].operations.some(s().ph)===e.transaction.operations.some(s().ph)?(t.transactions.push(e.transaction),t.userActions.push(r)):n.push({userActions:[r],transactions:[e.transaction],timestamp:i,undoRedoCount:0})}g().default.setState({undoStack:n,redoStack:[],invertedTextOperationIdMapper:o}),g().default.emit()}function S(e){const{environment:t,preventSelectText:n,callback:o}=e,i=g().default.state,{undoStack:r,redoStack:a}=E(i),s=r.pop();if(!s)return void(null==o||o());if(s.namedRevisionId)return void A({environment:t,namedRevisionId:s.namedRevisionId,callback:o});const{invertedTextOperationIdMapper:l}=i,c=B({environment:t,revision:s,preventSelectText:n,invertedTextOperationIdMapper:l,callback:o});a.push(c),g().default.setState({undoStack:r,redoStack:a,invertedTextOperationIdMapper:l})}function w(e){const{environment:t,preventSelectText:n,callback:o}=e,i=g().default.state,{undoStack:r,redoStack:a}=E(i),s=a.pop();if(!s)return;const{invertedTextOperationIdMapper:l}=i,c=B({environment:t,revision:s,preventSelectText:n,invertedTextOperationIdMapper:l,callback:o});r.push(c),g().default.setState({undoStack:r,redoStack:a,invertedTextOperationIdMapper:l})}function k(){g().default.reset()}function I(){return Boolean(C())}function x(){return Boolean(T())}function A(e){const{environment:t,namedRevisionId:n,skipDefaultPostPerformValidationChecks:o,callback:i}=e,r=g().default.state,{undoStack:a,redoStack:s}=E(r),l=a.findIndex((e=>e.namedRevisionId===n));if(l<0)return;const c=a.splice(l,1)[0],{invertedTextOperationIdMapper:d}=r,u=B({environment:t,revision:c,invertedTextOperationIdMapper:d,skipDefaultPostPerformValidationChecks:o,callback:i});s.push(u),g().default.setState({undoStack:a,redoStack:s,invertedTextOperationIdMapper:d})}function C(){const e=g().default.state.undoStack.at(-1);return e?P(e):void 0}function T(){const e=g().default.state.redoStack.at(-1);return e?P(e):void 0}function M(e){return g().default.state.undoStack.some((t=>t.namedRevisionId===e))}function P(e){return{getUserActions:()=>e.userActions.slice(),getFirstStore(){var t;return null==e||null===(t=e.transactions)||void 0===t||null===(t=t[0].stores)||void 0===t?void 0:t[0]}}}function B(e){const{environment:t,revision:n,invertedTextOperationIdMapper:o,preventSelectText:s,skipDefaultPostPerformValidationChecks:l,callback:m}=e;let{transactions:g}=n;p().A.isDebuggingEnabled()&&console.log("Undoing/redoing transactions with user actions",n.userActions.join(","));const{performResult:h,serverCommitResult:y}=b().createAndCommit({userAction:"revisionActions.performUndoRedoRevisionTransaction",environment:t,canUndo:!1,isUndoTransaction:!0,skipDefaultPostPerformValidationChecks:l,perform:e=>{g=c().o8(g),g.reverse();for(const l of g){l.undoStartCallbacks.forEach((e=>e()));const p=c().o8(l.invertedOperations);p.reverse(),e.copyDebugTagsFrom(l);for(const s of p)if((0,_().E)(s))R({environment:t,invertedOperation:s,invertedTextOperationIdMapper:o,transaction:l,newTransaction:e});else if((0,i().$Y)(s)||(0,i().mP)(s)){var n;const o=l.stores.find((e=>(0,r().Z2)(e.pointer,s.pointer)));if(!o)continue;if(o.table===a().ev&&!o.inMemoryRecordCache.isMockTextStore&&null!==(n=o.getAncestorBlockStoreAtRootPath())&&void 0!==n&&n.useCrdt()){(0,u().e)({environment:t,operation:s,transaction:e,inMemoryRecordCache:o.inMemoryRecordCache});continue}b().applyOperation({transaction:e,store:o,operation:s})}else(0,d().HB)(s);l.beforeSelection&&f().default.setState({...f().default.state,...l.beforeSelection}),l.beforeTextSelection&&!s&&v().default.setState(l.beforeTextSelection)}return e}});y.then(m);return{...n,transactions:[h],undoRedoCount:n.undoRedoCount+1}}function R(e){const{environment:t,invertedOperation:n,invertedTextOperationIdMapper:i,transaction:a,newTransaction:s}=e,c=a.stores.filter((e=>(0,r().Z2)(e.pointer,n.pointer)&&e instanceof m().Bv)),u=c.find((e=>{var t;return Boolean(null===(t=e.getBlockTitleStore())||void 0===t?void 0:t.uiLocation.uiParent)}))??c.at(0);if(!u)return;const g=s.operations.length,f=i.getInvertedTextOperationWithMaybeRemappedIds(n),v=(0,h().e)({environment:t,store:u,transaction:s,operation:f});if("success_non_crdt"===v)return;"success"!==v&&p().A.logInvertedTextOperationError({transaction:a,invertedOperation:n,maybeRemappedInvertedOperation:f,errorCode:v});const _=s.operations.length;if("invertedDeleteText"===f.command&&_>g){const e=(0,o().o9)(s.operations.slice(g,_).find((e=>"insertText"===e.command)),"New operations should contain an InsertTextOperation");i.remapIdsForReinsertedText(f,(0,l().Wg)(e,(0,d().u0)((e=>"insertText"===e.command?{true:e}:{false:e})),`Expected "insertText" operation, got "${e.command}"`))}}function E(e){const{undoStack:t,redoStack:n}=e;return{undoStack:t.slice(),redoStack:n.slice()}}},496067:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},496414:(e,t,n)=>{n.d(t,{V:()=>a,m:()=>r});var o=()=>n(972435),i=()=>n(991699);function r(e){let{message:t,interpolatedValues:n,targetRecordId:r}=e;i().A.setState({open:!0,message:o().A.formatMessage(t,n),targetRecordId:r})}function a(){i().A.setState({open:!1,targetRecordId:void 0})}},496879:(e,t,n)=>{n.d(t,{E:()=>r,c:()=>a});var o=()=>n(534177);const i={invertedInsertText:!0,invertedDeleteText:!0,invertedMoveTextSlice:!0,invertedAddAnnotation:!0,invertedRemoveAnnotation:!0};function r(e){return Boolean(i[e.command])}function a(e){const{pointer:t,invertedCrdtOperation:n,previousTextValue:i}=e,r=n.type;switch(r){case"invertedInsertText":return{command:"invertedInsertText",pointer:t,path:[],args:{...n,previousTextValue:i}};case"invertedDeleteText":return{command:"invertedDeleteText",pointer:t,path:[],args:{...n,previousTextValue:i}};case"invertedAddAnnotation":return{command:"invertedAddAnnotation",pointer:t,path:[],args:{...n,previousTextValue:i}};case"invertedRemoveAnnotation":return{command:"invertedRemoveAnnotation",pointer:t,path:[],args:{...n,previousTextValue:i}};default:(0,o().HB)(r)}}},496889:(e,t,n)=>{n.d(t,{A:()=>p,X:()=>g});n(296540);var o=()=>n(401497),i=()=>n(568625),r=()=>n(901265),a=()=>n(778417),s=()=>n(38337),l=()=>n(553965),c=()=>n(502438),d=()=>n(704152),u=n(474848);const p=function(e){let{tooltipContent:t,fadeIn:o,style:i,hoveredStyle:s,store:l,onClick:d,extraAnalyticsData:p,hideFilterActionsInput:m,actionSectionGroupKey:f,onFocus:v,onBlur:h,iconStyle:_,isFromCollectionView:b}=e;const y=(0,n(484714).v3)();function S(e){!function(e,t,n,o,i,s,l,d){a().Lt({environment:n,store:t}),r().it({environment:n,stores:c().default.state.stores,left:e.clientX,top:e.clientY,showInput:!s,actionSectionGroupKey:Boolean(d)?"block_in_collection":l||"default",analyticsFrom:"block_more_menu",optionalAnalyticsProperties:{isFromBulkActionsToolbar:i?i.isFromBulkActionsToolbar:void 0}}),null==o||o()}(e,l,y,d,p,m,f,b)}return t?(0,u.jsx)(n(859428).A,{renderTooltip:()=>t,delayThreshold:300,render:e=>(0,u.jsx)(g,{environment:y,tooltipEvents:e,fadeIn:o,style:i,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})}):(0,u.jsx)(g,{environment:y,fadeIn:o,style:i,hoveredStyle:s,onClick:S,onFocus:v,onBlur:h,iconStyle:_})};function m(e,t,n){const{device:o}=e;return{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:26,height:26,fill:o.isMobile?t.lightIconColor:t.mediumIconColor,transition:"opacity 200ms ease-in",...n}}function g(e){let{environment:t,tooltipEvents:n={},fadeIn:r,style:a,hoveredStyle:c,onClick:p,onFocus:g,onBlur:f,iconStyle:v,ariaLabel:h}=e;const _=(0,o().DP)();return(0,u.jsx)(d().A,{className:r?s().qGl:void 0,style:m(t,_,a),hoveredStyle:c,onClick:p,ariaLabel:h,...(0,l().A)(n,{onFocus:g,onBlur:f}),children:(0,i().L)({width:16,height:16,...v})})}},497259:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}}}const i=o},498719:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{selectedQueryResult:!1,numKeystrokes:0,numServerRequests:0,numLocalRequests:0,hadMetaClick:!1,firstKeyStrokeTimeMs:void 0}}}const i=new o},499446:(e,t,n)=>{n.d(t,{Gd:()=>h,R6:()=>v,WQ:()=>g,zY:()=>f});n(898992),n(354520),n(581454),n(296540);var o=()=>n(854150),i=()=>n(959013),r=()=>n(496603),a=()=>n(534177),s=()=>n(901389),l=()=>n(706024),c=()=>n(351360),d=()=>n(21497),u=()=>n(630116),p=()=>n(848237),m=n(474848);function g(e){let{data:t,sortColumn:n,sortAscending:i}=e;const s=[i?"asc":"desc"],l=[i?"desc":"asc"];switch(n){case d().o6:return r().My(t,(e=>e.name),l);case d().p2:return r().My(t,(e=>o().nJ.indexOf(e.accessLevel)),s);case d().MQ:return r().My(t,(e=>e.lastUpdated),s);default:(0,a().HB)(n)}}async function f(e){let{newSettingValue:t,environment:n,workspaceSecuritySettings:o,spaceStore:r}=e;const a="allowTeamCreation"===t?(0,m.jsx)(i().sA,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.allowTeamCreation",defaultMessage:"Allow all members of this workspace to create teamspaces?"}):(0,m.jsx)(i().sA,{id:"manageTeamsHelpers.confirmChangeSecuritySetting.workspaceOwners.disableTeamCreation",defaultMessage:"Limit teamspace creation to only workspace owners?"}),{accept:c}=await s().Gh({message:a});return!!c&&(l().V(n,{securitySettingsState:{...o,disableTeamCreation:"disableTeamCreation"===t},spaceStore:r}),!0)}async function v(e){let{addedTeams:t,removedTeams:n,environment:o,spaceStore:i}=e;if(!i.isDefined())return!1;return await p().FE({addedStores:t.map((e=>{let{store:t}=e;return t})),removedStores:n.map((e=>{let{store:t}=e;return t})),environment:o,spaceStore:i,createNewTeamFlowId:void 0,from:"workspace_settings"})}function h(e){let{environment:t,teamIds:n,spaceStore:i}=e;const{currentSpaceStore:r,currentUserStore:s}=c().default.state,l=r||i;return l&&s?n.map((e=>{const n=u().h4.createChildStore(l,{table:o().yK,id:e,spaceId:l.id});if(n.canRead())return n;const i=r&&p().M8({environment:t,teamId:n.id,spaceStore:r,from:"manage_teams_table"});return null!=i&&i.canRead()?i:void 0})).filter(a().O9):[]}},499755:(e,t,n)=>{n.d(t,{S0:()=>i,e0:()=>a,gN:()=>r});var o=()=>n(970013);let i=function(e){return e.manual="manual",e.resultsAdvanced="results-advanced",e.yAscending="y-ascending",e.yDescending="y-descending",e.xAscending="x-ascending",e.xDescending="x-descending",e}({});function r(e){switch(null==e?void 0:e.type){case"manual":return i.manual;case"descending":return i.xDescending;default:return i.xAscending}}function a(e){return!(0,o().$L)(e)}},500472:(e,t,n)=>{n.d(t,{Dp:()=>m,KA:()=>l,Ow:()=>c,Zw:()=>d,m:()=>p,n_:()=>u});n(16280),n(581454);var o=()=>n(857639),i=()=>n(430476),r=()=>n(68336),a=()=>n(502800);const s="sqliteTransactionStorage";async function l(e,t){await r().F4`
		INSERT OR REPLACE INTO transactions (
		    id,
		    user_id,
		    space_id,
		    operations,
		    timestamp,
			debug,
			isTemplateInstantiationTransaction,
			isUndoTransaction
		)
		VALUES (
		    ${t.id},
		    ${t.userId||null},
		    ${t.spaceId||null},
		    ${JSON.stringify(t.operations)},
		    ${t.timestamp},
			${t.debug?JSON.stringify(t.debug):null},
			${void 0===t.isTemplateInstantiationTransaction?null:t.isTemplateInstantiationTransaction?1:0},
			${void 0===t.isUndoTransaction?null:t.isUndoTransaction?1:0}
		)
	`.run(e)}function c(e){try{const t=JSON.parse(e);if(!Array.isArray(t))throw new Error(`JSON value is not an array: ${t}`);return t}catch(t){return o().log({from:s,level:"error",type:"safeParseArray",error:(0,a().convertErrorToLog)(t)}),[]}}async function d(e){return(await(0,i().qU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions"}))[0].count}async function u(e,t){return(await(0,i().qU)({connection:e,sql:"SELECT COUNT(*) AS count FROM transactions WHERE user_id = ?",args:[t]}))[0].count}async function p(e){await r().F4`DELETE FROM transactions`.run(e)}async function m(e,t){const[n]=await(0,i().G2)({connection:e,statements:[{sql:"SELECT * FROM transactions WHERE user_id = ?",args:[t],getData:!0},{sql:"DELETE FROM transactions WHERE user_id = ?",args:[t]}],queryName:"deleteTransactionsForUser"});return n.data.map((e=>e.id))}},500507:(e,t,n)=>{n.d(t,{V:()=>u});n(296540);var o=()=>n(847249),i=()=>n(959013),r=()=>n(436572),a=()=>n(937182),s=()=>n(351360),l=()=>n(13679),c=()=>n(218557),d=n(474848);function u(e){let{type:t,dropTargetKey:n,children:u,dropzoneStyle:p,style:m,onDropFile:g,supportMultipleFiles:f,numFilesLimit:v,store:h,disabled:_}=e;const b=(0,o().O$)(s().AppStoreCurrentSpaceStore),y=h??b;if(!y)return(0,d.jsx)(d.Fragment,{children:u});const S=e=>{let{files:n}=e;const o=f?n:[n[0]];var s;if(void 0!==v&&o.length>v)r().D6({label:(0,d.jsx)(i().sA,{id:"FileDropTarget.numFilesLimitReached",defaultMessage:"The maximum number of files has been reached."})});else for(const i of o)s=i.type,(0,a().B7)({allowedType:t,fileMimeType:s})?g({type:"validFileDrop",file:i}):g({type:"invalidFileDrop",file:i})};return _?(0,d.jsx)("div",{style:m,children:u}):(0,d.jsx)(l().A,{store:y,droppable:!0,render:()=>(0,d.jsx)(c().Tl,{dropTargetKey:n,canNativeDropOnto:!0,onNativeDrop:S,keepTextSelectionOnDrop:!0,shouldShowDropZone:!0,style:m,dropzoneStyle:p,canAcceptDrop:e=>e.isNativeDrag,children:u})})}},501020:(e,t,n)=>{n.d(t,{v:()=>s,z:()=>a});const o={selectableContainer:void 0,closestSelectable:void 0},i="selectable",r=(0,n(446943).C)({modernContextDefaultValue:o,displayName:i,legacyContextKey:i}),a=r.context,s=r.Provider},501666:(e,t,n)=>{n.d(t,{BK:()=>f,GC:()=>b,ar:()=>h,d:()=>_,fi:()=>g,sp:()=>v});n(898992),n(672577);var o=()=>n(919709),i=()=>n(156988),r=()=>n(231722),a=()=>n(906537),s=()=>n(792002),l=()=>n(711319),c=()=>n(24157),d=()=>n(538527),u=()=>n(319975),p=()=>n(725614),m=()=>n(751156);function g(e){const t=c().default.state;if("editing"!==t.mode)return;const n="selectionFocus"===e.type?(0,r().$U)({store:e.store,selection:e.selection}):t.multiSelection,s=(0,r().H7)(n);if(!s)return;const{tokensInsideRange:d}=o().AI5(s.store.getValue(),n.start.index,n.end.index),u=d.find((e=>Boolean(o().So_(e)))),p=a().get();if(!p)return;const m=a().getRect(p);if(!m)return;const g=Boolean(u);let f="";if(!u){const e=o().k4p(d),t=o().ctx(e);t&&(f=t.href)}l().A.setState({open:!0,url:f,title:u&&(0,i().wE)(u)||"",type:"text",editingToken:u,savedTextSelectionState:{...t,multiSelection:n},selectionRect:m,focusLinkInput:!g&&e.focus,focusTitleInput:g&&e.focus,trapFocus:"focusOnly"===e.type})}function f(e){const{environment:t,transaction:n,url:o,title:i,editingToken:a,savedTextSelectionState:s}=e,l=(0,r().H7)(s.multiSelection);if(!l)return;a&&u().gw({environment:t,store:l.store,annotationKey:"a",selection:l.selection,transaction:n,updateSelection:!1});const c=["a",o];return d().Mw({environment:t,store:l.store,annotation:c,selection:l.selection,transaction:n}),p().setSelection({store:l.store,selection:{startIndex:l.selection.startIndex,endIndex:l.selection.endIndex}}),i?{editingToken:[i,[c]]}:void 0}function v(e){const t=l().A.state;if(!t.open)return;const{editingToken:n,savedTextSelectionState:o}=t;if(!n)return;const i=(0,r().H7)(o.multiSelection);i&&(m().createAndCommit({userAction:"linkAnnotationActions.unlinkSelection",environment:e,canUndo:!0,perform:t=>{u().gw({environment:e,store:i.store,annotationKey:"a",selection:i.selection,transaction:t,updateSelection:!1})}}),c().default.emit(),l().A.reset())}function h(e){const{environment:t,title:n,transaction:i,editingToken:a,savedTextSelectionState:s}=e;if(!n||!a)return;const l=(0,r().H7)(s.multiSelection);if(!l)return;const c=l.store;u().f0({environment:t,multiSelection:s.multiSelection,transaction:i});const d=l.selection.startIndex,m=d+n.length,g={startIndex:d,endIndex:m},f=["a",o().So_(a)],v=o().Ey_(n,[f]);return u().yr({environment:t,store:c,tokens:[v],index:d,transaction:i}),p().setSelection({store:c,selection:g}),{editingToken:[n,[f]],savedTextSelectionState:{...s,multiSelection:{start:{store:c,index:d},end:{store:c,index:m}}}}}function _(){l().A.setState({open:!1,type:"text"})}function b(){const e=l().A.state;if(!e.open)return!1;if(e.focusLinkInput||e.focusTitleInput)return!1;const t=c().default.state;if("editing"!==t.mode)return!0;const n=(0,r().H7)(t.multiSelection);if(!n)return!0;const{store:i,selection:a}=n;return(0,s().gE)(a)?!o().wuy(i.getValue(),a.startIndex,a.endIndex,o().Ifu.Link):!(0,r().OH)(t.multiSelection,e.savedTextSelectionState.multiSelection)}},502438:(e,t,n)=>{n.r(t),n.d(t,{SelectionPhase:()=>i,default:()=>a});n(898992),n(354520),n(672577),n(581454);var o=()=>n(712505);let i=function(e){return e[e.Selected=0]="Selected",e[e.Editing=1]="Editing",e}({});class r extends(()=>n(757695))().default{getInitialState(){return{stores:[],phase:i.Selected}}cloneState(){return{stores:[...this.state.stores],phase:this.state.phase}}getEditing(){if(this.state.phase===i.Editing)return this.state.stores[0]}isSelected(){return this.state.stores.length>0&&this.state.phase===i.Selected}getNodes(){return this.state.stores.map((e=>n(695625).T.findNodeFromStore(e)||void 0)).filter(n(534177).O9)}getCurrentRootStore(){var e,t;const o=null===(e=this.getCurrentDefaultContainer())||void 0===e?void 0:e.getProps().store;return o&&o instanceof n(630116).Bv?o:null===(t=this.getDefaultContainer())||void 0===t||null===(t=t.getProps())||void 0===t?void 0:t.store}getCurrentRecordCache(){const e=this.getCurrentRootStore();if(e)return e.inMemoryRecordCache}getDefaultContainerFromTarget(e){const t=e.closest(`.${n(38337).QHh}`);if(t)return n(696152).A.find((e=>{const n=e.getNode();return Boolean(n&&n===t)}))}getCurrentDefaultContainer(){const e=this.state.anchorContainer;return e||this.getDefaultContainer()}getDefaultContainer(){const e=this.state.defaultContainerStack;if(e&&e.length>0)return e[e.length-1]}isInPeekRenderer(){if(this.state.anchorContainer)return Boolean(this.state.anchorContainer.isPeekRenderer());if(!o().default.state.open)return!1;if(!this.state.anchor)return!0;const e=this.state.anchor.isPageBlock(),t=this.state.anchor===o().default.state.targetStore;return e&&t}}const a=new r},502626:(e,t,n)=>{n.d(t,{qZ:()=>R,fC:()=>b,wp:()=>E,bg:()=>A,B0:()=>x,K7:()=>I,Cv:()=>k,K0:()=>D,JG:()=>_,wT:()=>P,KD:()=>B,qr:()=>w,JM:()=>y,Dv:()=>C});n(16280);var o=()=>n(857639),i=()=>n(427704),r=()=>n(677338),a=()=>n(994310),s=()=>n(711059),l=()=>n(720665),c=()=>n(780054),d=()=>n(989423),u=()=>n(404482),p=()=>n(150193),m=()=>n(589994);var g=()=>n(934839),f=()=>n(901389),v=()=>n(705540),h=()=>n(755636);function _(e){var t;const{environment:n,url:i,version:a,versionCreatedTime:s}=e,{AppUpdateStore:l,device:c}=n;c.isElectron&&i.startsWith("https:")?o().log({level:"error",from:"appUpdateActions",type:"installAppJsUpdate",error:{message:"Attempting to refresh app js on desktop for an https url",stack:(new Error).stack},data:{url:i}}):(l.setState({electronUpdate:l.state.electronUpdate,appUpdate:void 0}),a&&w(a,s),b(a)||(n.mobileNative&&n.mobileNative.showSplashscreen(),(0,r().ED)(!0),null!==(t=v().electronApi)&&void 0!==t&&t.installAppJsUpdate?v().electronApi.installAppJsUpdate(i):i!==window.location.href?window.location.href=i:window.location.reload()))}function b(e){return(0,s().isEqualVersion)(e,x())}function y(e,t){if(!t)return!1;if("ready"!==t.state)return!1;if(m().transactionQueue.hasTasks())return!1;if(!e.currentUser.isLoggedIn())return!1;if(t.type===s().UpdateType.Silent){if(e.device.isMobileNative)return!1;const t=I(),n=168;if(t&&(Date.now()-t)/l().pT<n)return!1;o().log({level:"info",from:"appUpdateActions",type:"shouldUpdateOnNavigate",data:{lastKnownUpdateTime:t}})}return!0}const S="lastKnownAppJsVersion";function w(e,t){a().A.set(S,{version:e,time:t})}function k(){const e=a().A.get(S);if(e&&e.version)return e.version;{const e=(0,s().parseVersion)(c().A.version),t=c().A.lastUpdatedTime;return a().A.set(S,{version:e,time:t}),e}}function I(){const e=a().A.get(S);if(e&&e.time)return e.time}function x(){return(0,s().parseVersion)(c().A.version)}function A(){return c().A.lastUpdatedTime}function C(e,t,n){const o=t===s().UpdateType.Major?"major":t===s().UpdateType.Minor?"minor":"patch";(0,d().u4)({environment:e,event:{eventName:"client_app_updated",eventProperties:{type:o,intervention:n}}})}const T=336*l().pT,M=672*l().pT;function P(){const e=A();return(I()||Date.now())-e>T}function B(){const e=A();return(I()||Date.now())-e>M}const R=!1,E="electronUpdateReady2";function D(e){const{AppUpdateStore:t,device:n}=e;if(function(e){d().vd(e,"confirm_app_update")}(e),R){const t=(0,u().Nw)(i().JZ.releases);h().f({environment:e,url:t})}if(n.isElectron&&t.state.electronUpdate&&"ready"===t.state.electronUpdate.state){const e=v().getDesktopVersion();a().A.set(E,(0,s().formatVersion)(e)),v().installElectronUpdate()}else t.state.appUpdate&&"ready"===t.state.appUpdate.state?(_({environment:e,url:window.location.href,version:t.state.appUpdate.version,versionCreatedTime:t.state.appUpdate.versionCreatedTime}),f().zw(),g().Re({bannerStore:p().A})):(w((0,s().parseVersion)(c().A.version),c().A.lastUpdatedTime),f().zw(),g().Re({bannerStore:p().A}))}},502856:(e,t,n)=>{n.d(t,{D0:()=>N,MC:()=>L,SN:()=>D,xc:()=>B});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(496603),i=()=>n(763824),r=()=>n(534177),a=()=>n(67657),s=()=>n(289915),l=()=>n(970013),c=()=>n(713998),d=()=>n(455348),u=()=>n(835243),p=()=>n(247331),m=()=>n(236162),g=()=>n(792071),f=()=>n(577449),v=()=>n(400017),h=()=>n(212547),_=()=>n(388821),b=()=>n(56125),y=()=>n(696706),S=()=>n(54821),w=()=>n(179034),k=()=>n(519831),I=()=>n(559653);const x=Symbol("collection property dependency id");function A(e){return(0,r().GV)(`${e.collectionPointer.spaceId}:${e.collectionPointer.id}:${e.property}`,x)}async function C(e){let{record:t,dependencies:o,blockIdToAssociatedCollectionModelCache:i,getRecordModel:r,loadRecordModel:a,loadRecordModelForFormulas:s,userTimeZone:l,intl:d,formulaTimeoutMs:f,logFormulaStatsFn:v,logFormulaTimeoutFn:h,checkCancellation:_,dependencyCache:b,resultCache:x,regExpCache:A,experimentService:C,collectionFeatureGates:T,userId:M}=e;_&&_();const P=[],B=t.value;if(B.parent_table&&B.parent_id&&P.push(y().L3.getParentPointerFromRecordWithParent(B)),t.table!==w().ev||!t.value)return P;const R=t.value,E=g().Bj6.fromBlock(R),D=E.getCollectionPointer();D&&P.push(D);const N=i[E.id]??await(0,m().wC)({block:E,loadRecordModel:a});if(!N)return P;E.id in i||(i[E.id]=N);const O=o.get(N.id);if(null==O||!O.size)return P;const U=[...(null==O?void 0:O.get("title"))??[],...(null==O?void 0:O.get("text"))??[]].map((e=>{let{property:t}=e;return t}));for(const n of U){var F;const e=null===(F=R.properties)||void 0===F?void 0:F[n];e&&P.push(...(0,S().QL)(e))}(null==O?void 0:O.get("created_by"))&&R.created_by_table&&R.created_by_id&&P.push({table:R.created_by_table,id:R.created_by_id,spaceId:R.space_id});(null==O?void 0:O.get("last_edited_by"))&&R.last_edited_by_table&&R.last_edited_by_id&&P.push({table:R.last_edited_by_table,id:R.last_edited_by_id,spaceId:R.space_id});(null==O?void 0:O.get("auto_increment_id"))&&P.push((0,u().aZ)({spaceId:N.spaceId||R.space_id,parentTable:k().Vl,parentId:N.id}));const V=null==O?void 0:O.get("last_visited_time");if(M&&V){const e=(0,I().$5)({parent_id:R.id,user_id:M});P.push({table:I().F9,id:e,spaceId:R.space_id})}if(!(0,c().Xw)(R))return P;const j=O.get("relation");if(j)for(const n of j){const e=(0,c().yQ)(R,n.property),t=(0,c().n)(e);for(const n of t)P.push(n)}const z=O.get("person");if(z)for(const n of z){const e=(0,c().yQ)(R,n.property),t=(0,c().e5)({textValue:e,propertySchema:n.propertySchema,bypassLimit:!0,blockCreatorPointer:E.getCreatedByPointer()});for(const n of t)P.push(n)}const H=O.get("formula");if(H&&l&&d){const e=await Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(22542)]).then(n.bind(n,80979));for(const t of H){var W;_&&_();const n=t.propertySchema;if(void 0===n.version||void 0===n.formula2)return P;let o;const a=e.getFormula2ResultCache({resultCache:x,blockId:R.id,property:t.property});if(void 0!==a)o={value:e.formulaValueToCollectionFormulaValue(a)};else{const a={values:[{kind:p().FormulaContextValueKind.ThisRow,value:{type:"block",value:{table:"block",id:R.id}}}],handleDataRequest:L({blockIdToAssociatedCollectionModelCache:i,checkCancellation:_,collectionFeatureGates:T,dependencyCache:b,experimentService:C,formulaTimeoutMs:f,getRecordModel:r,loadRecordModel:s,logFormulaStatsFn:v,logFormulaTimeoutFn:h,regExpCache:A,resultCache:x}),intl:d,userTimeZone:l,depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:f&&Date.now()+f,logFormulaTimeoutFn:h,resultCache:x,regExpCache:A,experimentService:C,spaceId:R.space_id,collectionFeatureGates:T},c=await e.executeFormulaAsync(n.formula2.code,a);"value"in c&&e.setFormula2ResultCache({resultCache:x,blockId:R.id,property:t.property,value:c.value}),o=e.mapExecuteFormulaResult(c),e.setFormula2Thunk({blockModel:g().Bj6.fromBlock(R),collectionVersion:N.getVersion(),propertyId:t.property,thunkCallback:()=>o})}null==v||v({cachedCount:a?1:0,uncachedCount:a?0:1,error:null===(W=o.error)||void 0===W?void 0:W.type})}}return P}async function T(e){return M(e,new(v().A)(A))}async function M(e,t){var i;const{collectionPointer:r,schema:a,property:s,loadRecordModel:c,dependencyCache:d}=e,u=a[s];if(!u)return[];const p=null===(i=d.get(r.id))||void 0===i?void 0:i.get(s);if(p)return p;const m={collectionPointer:r,property:s,propertySchema:u};if(t.has(m))return[m];if(t.add(m),u.derived_property_record_metadata){const e=u.derived_property_record_metadata.pointer_property_uri,t=a[e];if(t){return[{collectionPointer:r,property:e,propertySchema:t}]}}else{if("relation"===u.type){const e=(0,l().Nv)(u);return e&&await c(e),[]}if("formula"===u.type){const e=await Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(22542)]).then(n.bind(n,80979)),i=o().oE(e.getFormulaDependencies(u).map((e=>{const t=a[e];if(t){return{collectionPointer:r,property:e,propertySchema:t}}}))),l=await Promise.all(i.map((e=>{let{property:n}=e;return M({collectionPointer:r,schema:a,property:n,loadRecordModel:c,dependencyCache:d},t)}))),p=o().hS([...i,...o().Bq(l)],(e=>{let{collectionPointer:t,property:n}=e;return`${t.id}${n}`}));return P({dependencyCache:d,collectionPointer:r,property:s,result:p}),p}if("rollup"===u.type&&u.relation_property&&u.target_property){const e=a[u.relation_property];if(!e||"relation"!==e.type)return[];const n=(0,l().Nv)(e);if(!n)return[];const i=await c(n),p=(null==i?void 0:i.getNormalizedSchema())??{},m=[],g={collectionPointer:r,property:u.relation_property,propertySchema:e};if(m.push(g),u.target_property_type){const e=p[u.target_property];if(e&&u.target_property_type===e.type){const t={collectionPointer:{table:k().Vl,id:n.id,spaceId:null==i?void 0:i.space_id},property:u.target_property,propertySchema:e};m.push(t)}}const f=await M({collectionPointer:n,schema:p,property:u.target_property,loadRecordModel:c,dependencyCache:d},t);m.push(...f);const v=o().hS(m,(e=>{let{collectionPointer:t,property:n}=e;return`${t.id}${n}`}));return P({dependencyCache:d,collectionPointer:r,property:s,result:v}),v}}return[]}function P(e){const{dependencyCache:t,collectionPointer:n,property:o,result:i}=e,r=t.get(n.id);if(void 0!==r)r.set(o,i);else{const e=new Map;e.set(o,i),t.set(n.id,e)}}function B(e){const{filter:t,propertyIdSet:n}=e;if((0,s().yX)(t))n.add(t.property);else if((0,s().dU)(t)){const e=t.filters||[];for(const t of e)B({filter:t,propertyIdSet:n})}}function R(e){const{loader:t,schema:n,loadAllProperties:i,searchProperties:r}=e,s=new Set,l=new Set;if(t){var c;if(null!=t&&null!==(c=t.upwardTraversalRelation)&&void 0!==c&&c.property&&s.add(t.upwardTraversalRelation.property),(t.filter||t.filterToComputeDependencies)&&B({propertyIdSet:s,filter:t.filterToComputeDependencies??t.filter}),t.sort)for(const o of t.sort){var d;"formula"===(null===(d=n[o.property])||void 0===d?void 0:d.type)?l.add(o.property):s.add(o.property)}const e=t.reducers||{};o().jJ(e,(e=>{if(e){"groups"!==e.type&&e.filter&&B({propertyIdSet:s,filter:e.filter});const t=[];if("aggregation"===e.type&&(0,a().G9)(e.aggregation)&&t.push(e.aggregation.property),"groups"===e.type&&(t.push(e.groupBy.property),e.subGroup&&t.push(e.subGroup.groupBy.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"intersection"===e.aggregation.type)&&(0,a().G9)(e.aggregation.intersectionAggregation)&&t.push(e.aggregation.intersectionAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.groupAggregation&&(0,a().G9)(e.aggregation.groupAggregation)&&t.push(e.aggregation.groupAggregation.property),e.aggregation&&("intersection_and_independent"===e.aggregation.type||"independent"===e.aggregation.type)&&e.aggregation.subGroupAggregation&&(0,a().G9)(e.aggregation.subGroupAggregation)&&t.push(e.aggregation.subGroupAggregation.property)),0===t.length)return;for(const e of t){const t=n[e];"formula"===(null==t?void 0:t.type)?l.add(e):s.add(e)}}}))}const u=function(e){return Boolean(null==e?void 0:e.searchQuery)||Boolean(Object.values((null==e?void 0:e.reducers)||{}).some((e=>Boolean("results"===e.type&&e.searchQuery))))}(t);if(u)for(const o of r??Object.keys(n)){const e=n[o];if(e){if("rollup"===e.type||"formula"===e.type)continue;s.add(o)}}if(i)for(const o of Object.keys(n))l.add(o);for(const o of l)s.has(o)&&l.delete(o);return{filterStagePropertyIdsSet:s,incrementStagePropertyIdsSet:l}}function E(e){return"property"in e}async function D(e){const{collectionValueOrModel:t,loader:n,recordMap:o,loadRecordModel:i,loadAllProperties:r,apiSorts:a,dependencyCache:s,searchProperties:l}=e,c=g().Bj6.fromValue(k().Vl,t),u=c.getNormalizedSchema(),p=c.getPropertyMapping(),m=a?[...a.filter(E)]:[],{filterStagePropertyIdsSet:h,incrementStagePropertyIdsSet:_}=R({loader:n,schema:u,loadAllProperties:r,searchProperties:l}),b=new Set([...h,..._,...m.map((e=>e.property))]),y=d().u9.fromViewPropertyIds(Array.from(b),p);return(await async function(e){const{recordMap:t,loadRecordModel:n,collectionModelOrValue:o,properties:i,schema:r,dependencyCache:a}=e,s=f().h.throughRecordMap(t,n),l=new(v().A)(A),c=g().Bj6.fromValue(k().Vl,o).pointer;return await Promise.all(i.map((async e=>{const t=r[e];if(t){const n={collectionPointer:c,property:e,propertySchema:t};l.add(n);const o=await T({collectionPointer:c,schema:r,property:e,loadRecordModel:s,dependencyCache:a});for(const e of o)l.add(e)}}))),l}({recordMap:o,loadRecordModel:i,collectionModelOrValue:c,properties:y,schema:u,dependencyCache:s})).valuesArray()}async function N(e){const{blocks:t,recordMap:n,dependencies:o,blockIdToAssociatedCollectionModelCache:i,loadRecordModel:r,loadRecordModelForFormulas:a,userTimeZone:s,intl:l,formulaTimeoutMs:c,logFormulaStatsFn:d,logFormulaTimeoutFn:u,checkCancellation:p,dependencyCache:m,resultCache:v,regExpCache:_,experimentService:y,collectionFeatureGates:S,userId:w}=e;p&&p();const k=[];for(const f of t){const e=g().Bj6.fromBlock(f),t=e.pointer;k.push(t),n.setModel(e.pointer,e)}const I=new Map,x=new Map;for(const g of o){const e=g.collectionPointer.id,t="formula"===g.propertySchema.type?I:x;let n=t.get(e);void 0===n&&(n=new Map,t.set(e,n));const o=n.get(g.propertySchema.type);void 0===o?n.set(g.propertySchema.type,[g]):o.push(g)}const A=f().h.throughRecordMap(n,r),T=f().h.throughRecordMap(n,a);for(const f of[x,I]){const e=performance.now(),t=new Set;await(0,b().Lx)({recordPointers:k,recurFn:async(e,o,r)=>{const a=`${e.table}:${e.id}:${null==o?void 0:o.table}:${null==o?void 0:o.id}`;return t.has(a)?[]:(t.add(a),await C({record:h().ms.create(e.table,e.__IM_SORRY__getValue()),dependencies:f,dependencyCache:m,blockIdToAssociatedCollectionModelCache:i,getRecordModel:g().b4_.fromRecordMap(n),loadRecordModel:A,loadRecordModelForFormulas:T,intl:l,userTimeZone:s,formulaTimeoutMs:c,logFormulaTimeoutFn:u,logFormulaStatsFn:d,checkCancellation:p,resultCache:v,regExpCache:_,experimentService:y,collectionFeatureGates:S,userId:w}))},loadRecordModel:A,recordMap:n}),null==d||d({executionTimeMs:performance.now()-e})}}function L(e){let{blockIdToAssociatedCollectionModelCache:t,checkCancellation:n,collectionFeatureGates:a,dependencyCache:s,experimentService:l,formulaTimeoutMs:c,getRecordModel:d,loadRecordModel:u,logFormulaStatsFn:p,logFormulaTimeoutFn:m,regExpCache:h,resultCache:b}=e;return e=>{var y;n&&n();let S=0,w=0;const k=performance.now(),I=f().h.sideEffect((()=>(w++,Promise.resolve())),u),x=[],A=_().RecordMap.create();if(null===(y=e.recordPointers)||void 0===y||y.forEach((e=>{const t=d(e);void 0!==t?(A.setModel(e,t),S++):x.push(e)})),0===x.length&&(void 0===e.collectionBlockProperties||0===e.collectionBlockProperties.length))return null==p||p({getRecordModelRecordCount:S,loadRecordModelRecordCount:w,recordFetchTimeMs:performance.now()-k}),{getRecordModel:g().b4_.fromRecordMap(A)};const C=void 0!==e.collectionBlockProperties?O(e.collectionBlockProperties):[],M=s??new Map,P=b??new Map,B=h??new Map,R=t??{},E=f().h.throughRecordMap(A,I);return new Promise((async(e,t)=>{try{const t=new(v().A)((e=>`${e.id}${e.table}`));t.add(...x),C.forEach((e=>{let{blockPointers:n,collectionPointer:o}=e;t.add(...n),t.add(o)})),await(0,i().lX)(t.valuesArray(),500,(async e=>{await E(e)})),await(0,i().lX)(C,5,(async e=>{let{blockPointers:t,collectionPointer:i,schema:s,property:d}=e;const u=await T({collectionPointer:i,schema:s,property:d,loadRecordModel:E,dependencyCache:M}),g=o().hS(t,(e=>e.id)).map((e=>A.getModel(e))).filter(r().O9),f=A.getModel(i);f&&g.forEach((e=>{R[e.id]=f})),await N({blocks:g,dependencies:u,blockIdToAssociatedCollectionModelCache:R,recordMap:A,loadRecordModel:E,loadRecordModelForFormulas:E,formulaTimeoutMs:c,logFormulaTimeoutFn:m,logFormulaStatsFn:p,checkCancellation:n,dependencyCache:M,resultCache:P,regExpCache:B,experimentService:l,collectionFeatureGates:a,userId:void 0})})),null==p||p({getRecordModelRecordCount:S,loadRecordModelRecordCount:w,recordFetchTimeMs:performance.now()-k}),e({getRecordModel:g().b4_.fromRecordMap(A)})}catch(s){t(s)}}))}}function O(e){const t=[];for(const n of e){const e=t.find((e=>(0,y().Z2)(e.collectionPointer,n.collectionPointer)&&e.property===n.property));void 0!==e?e.blockPointers.push(...n.blockPointers):t.push({...n,blockPointers:[...n.blockPointers]})}return t}},504066:(e,t,n)=>{n.d(t,{f:()=>l});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(116225),i=()=>n(476492);const r=new Set(["rename","change_icon","change_type","select_add_option","select_delete_option","select_rename_option","select_change_color","select_options_reorder","select_change_auto_sort_options","status_change_format","status_set_default","status_change_group","select_set_description","date_change_format","date_change_time_format","formula_edit","formula_v2_edit","relation_edit","relation_toggle_inverse_on","relation_toggle_inverse_off","auto_relation_toggle_on","auto_relation_toggle_off","person_toggle_limit_on","person_toggle_limit_off","relation_toggle_limit_on","relation_toggle_limit_off","number_change_show_as","number_change_precision","number_change_format","url_toggle_show_full_off","url_toggle_show_full_on","toggle_include_subpages","unique_id_change_collection_key","configure_github_pr_automation","set_description"]),a=new Set(["rename","change_icon","change_type","duplicate","add_filter","duplicate_filter","add_filter_group","turn_into_filter_group","turn_into_filter","set_filter_operator","set_filter_property","set_filter_comparator","set_filter_value","set_filter_value_type","set_rollup_set_filter","delete_filter","add_sort","set_sort_property","set_sort_direction","delete_sort","set_cover_format","set_cover_size_format","set_cover_aspect_format","set_group_by","set_calendar_by","toggle_calendar_show_weekends","set_timeline_by","reorder_properties","hide_property","show_property","board_add_group","board_reorder_groups","board_reorder_hidden_groups","board_show_group","board_hide_group","board_group_change_color","board_delete_group","board_change_aggregation","add_group","reorder_groups","reorder_hidden_groups","show_group","hide_group","group_change_color","rename_group","delete_group","chart_reorder_groups","change_aggregation","table_freeze_column","table_unfreeze_columns","table_hide_column","table_delete_column","table_reorder_columns","table_resize_columns","table_change_aggregation","table_remove_aggregation","timeline_toggle_show_table","set_first_load_limit","toggle_show_hide_all_properties","click_topbar_no_date","click_topbar_filter","click_topbar_sort","click_topbar_search","click_topbar_view_settings","click_topbar_new_item","click_topbar_templates_dropdown","click_view_tab","click_view_in_dropdown","click_views_dropdown","click_select_data_source","click_source","click_layout","click_properties","click_show_hide_properties","click_manage_properties","click_filters","click_sort","click_duplicate","click_copy_link","click_delete","click_delete_database","click_toggle_lock","click_group","click_configure","click_subgroup","click_subitem","click_timeline_arrows_by","click_more_settings","select_source_collection","select_existing_collection","select_new_collection","update_subitem","update_default_subitem","update_timeline_by","update_timeline_by_end","update_timeline_arrows_by","update_default_timeline_arrows_by","update_calendar_by","update_calendar_view_range","click_board_group_by","change_type","update_cover_format","toggle_cover_size_format","toggle_cover_aspect_format","toggle_show_collection_title","toggle_table_wrap_cells","click_create_view_done","click_timeline_table_properties","toggle_timeline_separate_dates","click_duplicate_view","click_new_empty_view","click_properties_tab_timeline","click_properties_tab_table","click_hide_all_properties","click_show_all_properties","toggle_property_visibility","toggle_property_wrap","click_property","click_new_property","duplicate_property","delete_property","click_deleted_properties","select_relation_source","configure_self_relation_accept","click_group_by_property","toggle_hide_empty_groups","toggle_group_color_columns","click_groups_hide_all","click_groups_show_all","toggle_group_visibility","toggle_group_pin","update_group_sort","update_text_group_by","update_date_group_by","update_status_group_by","click_remove_grouping","group_by_property_accept","group_by_number_update","reorder_filters","click_new_filter","click_combinator_filter","update_combinator_filter","delete_combinator_filter","click_property_filter","expand_property_filter","update_property_filter","delete_property_filter","merge_filter_into_combinator","click_new_sort","reorder_sorts","update_sort","delete_sort","delete_all_sorts","click_save_control_reset","click_save_control_save_in_current_view","click_save_control_save_as_new_view","click_save_control_more_options_button","click_save_control_more_options_popup","create_combinator_filter","create_property_filter","create_sort_accept","click_mobile_search","click_collection_name_link_button","click_collection_name_input","click_source_view","click_source_edit_title","click_source_hide_title","click_source_show_title","view_action_menu_rename","view_action_menu_edit","view_action_menu_delete","view_action_menu_copy_link","view_action_menu_duplicate","view_action_menu_configure_layout","table_header_rename","table_header_edit","table_header_sort_asc","table_header_sort_desc","table_header_filter","table_header_hide","table_header_duplicate","table_header_wrap_column","table_header_freeze_column","toggle_table_vertical_lines","toggle_table_subitem_toggle_on_title","click_table_header_dot_menu","update_dependency_date_shift_mode","update_dependency_date_shift_avoid_weekends","set_description","toggle_show_page_icon","charts_update_chart_type","charts_x_axis_what_to_show","charts_x_axis_groupBy_option","charts_x_axis_sort","charts_x_axis_hide_empty_groups","charts_y_axis_what_to_show","charts_y_axis_aggregate_by","charts_y_axis_group_by","charts_y_axis_cumulative","charts_y_axis_range","charts_donut_property","charts_donut_groups","charts_donut_slice_value","charts_donut_aggregate_by","charts_export_copy_png","charts_export_download_png","charts_set_subitems","charts_style_color","charts_style_weight_color_value","charts_style_grid_line","charts_style_axis_label","charts_style_smooth_line","charts_style_area_fill","charts_style_donut_value","charts_style_legend_toggle","charts_style_data_labels","charts_style_donut_data_labels","charts_style_value_label","charts_style_show_caption","charts_style_update_caption","charts_y_axis_precision"]),s=new Set(["table_header_edit","update_sort","create_property_filter","click_new_filter","click_topbar_no_date","click_topbar_filter","click_topbar_sort","click_topbar_search","click_topbar_view_settings","click_topbar_new_item","click_topbar_templates_dropdown","click_view_tab","click_view_in_dropdown","click_views_dropdown","click_select_data_source","click_source","click_layout","click_properties","click_filters","click_sort","click_duplicate","click_copy_link","click_group","click_configure","click_subgroup","click_subitem","click_timeline_arrows_by","click_property","click_new_property","click_table_header_dot_menu"]);function l(e){const{collectionContextStore:t,action:n,from:l,view_type:c,original_view_type:d,new_view_type:u,property_type:p,new_property_type:m,sort_direction:g}=e,{collection_id:f,collection_view_id:v,collection_view_block_id:h,view_type:_,is_full_screen:b}=(0,i().sl)(t)||{},{row_count_category:y,column_count_category:S}=(0,i().kz)(t)||{},w={collection_id:f,collection_view_id:v,collection_view_block_id:h,view_type:c||_,is_full_screen:b,row_count_category:y,column_count_category:S};if(!s.has(n))if("create_page"!==n)if("create_view"!==n)if("add_filter"!==n&&"update_property_filter"!==n)if("create_sort_accept"!==n&&"set_sort_property"!==n&&"set_sort_direction"!==n)if("group_by_property_accept"!==n)if("create_property"!==n)"edit_property"!==n?a.has(n)&&"view_settings"===l?o().u4({name:"configure_view",args:{analytics_action:n,...w,original_view_type:d,new_view_type:u}}):r.has(n)&&"property_settings"===l&&o().u4({name:"configure_property",args:{analytics_action:n,property_type:p,new_property_type:m,...w}}):o().u4({name:"edit_property",args:{from:l,property_type:p,...w}});else{if("table"!==l&&"view_settings"!==l)return;o().u4({name:"create_property",args:{from:l,property_type:p,...w}})}else o().u4({name:"group_property",args:{analytics_action:n,property_type:p,...w}});else o().u4({name:"sort_property",args:{analytics_action:n,property_type:p,sort_direction:g,...w}});else o().u4({name:"filter_property",args:{analytics_action:n,property_type:p,...w}});else o().u4({name:"create_view",args:{from:l,...w}});else o().u4({name:"create_page",args:{from:l,...w}})}},504836:(e,t,n)=>{n.d(t,{Be:()=>S,CS:()=>b,Pf:()=>k,Sd:()=>h,UJ:()=>y,X7:()=>m,Yq:()=>x,Zf:()=>g,ay:()=>I,nh:()=>f,pB:()=>d,ru:()=>_,vL:()=>p,yX:()=>v});var o=()=>n(496506),i=()=>n(66689),r=()=>n(700500),a=()=>n(970013),s=()=>n(282883),l=()=>n(508496),c=()=>n(972435);function d(){return"on"===l().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"})}let u;function p(){return void 0===u&&(u=new(o().default)(d,{debugName:"isJiraImportAndSyncEnabledCached"})),u.state}function m(){return"on"===l().default.getEligibleGroup({experimentId:"jira_sync_data_center_integration",defaultGroup:"control"})}function g(){return l().default.checkGate({gateName:"jira_dc_members_flow_enabled"})}function f(){return l().default.checkGate({gateName:"jira_dc_basic_auth_enabled"})}function v(){return l().default.checkGate({gateName:"disable_jira_sync_source_for_members"})}function h(){return l().default.checkGate({gateName:"jira_onboarding_tour"})}function _(){return l().default.checkGate({gateName:"jira_dc_streaming_projects"})&&m()}function b(){return l().default.checkGate({gateName:"jira_2_way_sync"})}function y(e){return e===i().Tw}function S(e){let t=null,n=null;if(!e)return{projectCollectionPointer:t,taskCollectionPointer:n};const o=e.getFormat();if(y(o.app_config_uri)){t=e.pointer;const o=e.getSchema()[i().K4.ProjectToTaskRelation];o&&(0,a().nC)(o)&&o.collection_pointer&&(n=o.collection_pointer)}else if(o.app_config_uri===i().dC){n=e.pointer;const o=e.getSchema()[i().yx.TaskToProjectRelation];o&&(0,a().nC)(o)&&o.collection_pointer&&(t=o.collection_pointer)}return{projectCollectionPointer:t,taskCollectionPointer:n}}const w=(0,n(959013).YK)({issueKeyNotFound:{id:"jiraSyncedCollectionUpdateError.issueKeyNotFound",defaultMessage:"Could not find jira issue key from Notion task"},collectionPageNotFound:{id:"jiraSyncedCollectionUpdateError.collectionPageNotFound",defaultMessage:"Found error getting collection page"},collectionNotFound:{id:"jiraSyncedCollectionUpdateError.collectionNotFound",defaultMessage:"Found error getting collection"},invalidPropertyId:{id:"jiraSyncedCollectionUpdateError.invalidPropertyId",defaultMessage:"Invalid property id"},unsupportedPropertyForTwoWaySync:{id:"jiraSyncedCollectionUpdateError.unsupportedPropertyForTwoWaySync",defaultMessage:"Unsupported property for two way sync"},invalidPropertyValue:{id:"jiraSyncedCollectionUpdateError.invalidPropertyValue",defaultMessage:"Invalid property value"},updateFailed:{id:"jiraSyncedCollectionUpdateError.updateFailed",defaultMessage:"Failed to update Jira issue"},permissionDeniedOrResourceNotFound:{id:"jiraSyncedCollectionUpdateError.permissionDeniedOrResourceNotFound",defaultMessage:"Permission denied or resource not found in Jira"},unknownError:{id:"jiraSyncedCollectionUpdateError.unknownError",defaultMessage:"Failed to update jira"},transitionNotFound:{id:"jiraSyncedCollectionUpdateError.transitionNotFound",defaultMessage:"Status not found in the Jira issue workflow"},jiraUserNotFound:{id:"jiraSyncedCollectionUpdateError.jiraUserNotFound",defaultMessage:"Jira user not found"},notionUserNotFound:{id:"jiraSyncedCollectionUpdateError.notionUserNotFound",defaultMessage:"Notion user not found"},convertNotionCommentToJiraCommentBodyFailed:{id:"jiraSyncedCollectionUpdateError.convertNotionCommentToJiraCommentBodyFailed",defaultMessage:"Failed to convert notion comment to jira comment body"}});function k(e){const{errorCode:t}=e,n=c().A.getIntl();switch(t){case"issue_key_not_found":return n.formatMessage(w.issueKeyNotFound);case"collection_page_not_found":return n.formatMessage(w.collectionPageNotFound);case"collection_not_found":return n.formatMessage(w.collectionNotFound);case"invalid_property_id":return n.formatMessage(w.invalidPropertyId);case"unsupported_property_for_two_way_sync":return n.formatMessage(w.unsupportedPropertyForTwoWaySync);case"invalid_property_value":return n.formatMessage(w.invalidPropertyValue);case"update_failed":return n.formatMessage(w.updateFailed);case"permission_denied_or_resource_not_found":return n.formatMessage(w.permissionDeniedOrResourceNotFound);case"transition_not_found":return n.formatMessage(w.transitionNotFound);case"jira_user_not_found":return n.formatMessage(w.jiraUserNotFound);case"notion_user_not_found":return n.formatMessage(w.notionUserNotFound);case"convert_notion_comment_to_jira_comment_body_failed":return n.formatMessage(w.convertNotionCommentToJiraCommentBodyFailed);default:return n.formatMessage(w.unknownError)}}function I(e){var t;return null===(t=(0,s().nH)(e))||void 0===t?void 0:t.split(".")[0]}function x(e){if(!d())return!1;const t=e.getType(),n=e.getFormat();return!(!t||!(0,r().Ef)(t)||(null==n?void 0:n.app_config_uri)!==i().d0&&(null==n?void 0:n.app_config_uri)!==i().bq)}},506090:(e,t,n)=>{n.d(t,{A:()=>r,p:()=>o});let o=function(e){return e.CurrentSpace="current-space",e.TargetSpace="domain-claim-upgrade-team-plan-workspace",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1}}closeWithSuccess(){this.setState({open:!1,succeeded:!0})}closeWithFailure(){this.setState({open:!1,succeeded:!1})}open(e){const{subscriptionTier:t,addOnFeature:n,billingInterval:i,coupon:r,isTrial:a,sessionId:s,dismissMobilePlansModal:l,from:c}=e;this.setState({open:!0,temporaryBillingInterval:i,temporaryAddress:{name:"",businessName:"",addressLine1:"",addressLine2:"",zipCode:"",city:"",state:"",country:""},appliedPromo:void 0,error:void 0,subscriptionTier:t,vatApplicable:!1,calculatingTax:!1,payButtonState:"enabled",type:o.CurrentSpace,addOnFeature:n,onlyShowAddOn:void 0!==n,sessionId:s,coupon:r,isTrial:a,dismissMobilePlansModal:l,from:c})}setAddressField(e){this.state.open&&this.setState({...this.state,temporaryAddress:{...this.state.temporaryAddress,...e},taxCalculationError:void 0})}}const r=new i},506406:(e,t,n)=>{n.d(t,{Q:()=>o});const o={assistant_basic:"https://notion.notion.site/198efdeead058086b9b1f970461920be?pvs=105"}},506671:(e,t,n)=>{n.d(t,{d:()=>l});var o=()=>n(908006),i=()=>n(745875),r=()=>n(534177),a=()=>n(508496),s=()=>n(271584);async function l(e){const{eventName:t,eventProperties:n,sampling:l}=e;if("decided"===l.behavior)return l.sampleDecision;if("custom"===l.behavior)return!!(0,i().ox)(l.sampleRate)&&"custom";await o().default.afterNextFlush();const c=a().default.getConfigKey("event_trail_events",t);let d=i().ox;if("object"==typeof c&&"string"==typeof c.sampleMethod&&"client_init_id"===c.sampleMethod&&(d=i().fp.bind(null,s().d)),"object"==typeof c&&"object"==typeof c.sampleRateByProperty){const{sampleRateByProperty:e}=c;for(const[t,o]of Object.entries(e)){const e=o[null==n?void 0:n[t]];if(void 0!==e)return!!d(e)&&"by_property"}}if("object"==typeof c&&"number"==typeof c.sampleRate)return!!d(c.sampleRate)&&"by_event";if("custom"===l.fallbackBehavior)return!!d(l.fallbackSampleRate)&&"fallback_in_code";const u=a().default.getConfigKey("event_trail_events","defaultSampleRate");if("number"==typeof u)return!!d(u)&&"default";const{statsigNotAvailableBehavior:p}=l;switch(p){case"track":return"statsig_not_available";case"drop":return!1;default:(0,r().HB)(p)}}},507785:(e,t,n)=>{n.d(t,{Ty:()=>q,Ch:()=>W,Li:()=>j,cG:()=>z,iZ:()=>H});n(16280),n(944114),n(898992),n(354520),n(581454);var o=()=>n(17022),i=()=>n(857639),r=()=>n(763884),a=()=>n(792071),s=()=>n(436604),l=()=>n(386164),c=()=>n(142748),d=(n(672577),()=>n(842599)),u=()=>n(68263),p=()=>n(179034),m=()=>n(519831),g=()=>n(96689),f=()=>n(979340);function v(e){const{space:t,actor:n,publicAccessRequestExpEnabled:o,canActorJoinSpace:i}=e;return!!i||function(e,t){const n=Boolean(e.disable_public_access_requests||e.admin_disable_public_access);return!(!t||!t.getActorUserId()||n)}(t,n)&&o}function h(e){const{space:t,trustedDomains:n,enableTrustedDomainPermissionRedesign:o,user:i,spaceUser:r}=e;if(!i)return"disabled";if(null!=r&&r.isMember())return"click_to_join";if(!i.email)return"disabled";const a=(0,d().zN)(i.email);let s;s=o&&(0,f().OX)(t.subscription_tier)?(n||[]).map((e=>({domain:e.email_domain,joinSpaceMethod:e.join_space_method}))):(t.getEmailDomains()||[]).map((e=>({domain:e,joinSpaceMethod:"click_to_join"})));const l=s.find((e=>e.domain===a));return(null==l?void 0:l.joinSpaceMethod)??"disabled"}function _(e){const{block:t,viewer:n,canViewerJoinSpace:o,spaceUserIds:i}=e;if(!t)return;if(null==n||!n.isUser()||!o)return;const r=t.getPermissionItems().filter((e=>"user_permission"===e.type&&(0,u().Km)(e.role))).map((e=>e.user_id));return 0!==r.length?r.find((e=>i.includes(e))):void 0}function b(e){const{spaceDomain:t,actor:n,userHasExplicitAccess:o,intl:i,requireInterstitial:r,requireLogin:s,publicAccessRole:l,publicHomePage:c,template:d,presenceAuthorizationToken:u,securitySettings:f,spaceUserIds:b,isDeleted:S,spaceUser:w,publicDomainName:k,isDLSViewer:I,trustedDomains:x,siteGoogleAnalyticsId:A,associatedLayoutModel:C,siteTheme:T,customEmojiUrl:M,isPublicShareLink:P,enableTrustedDomainPermissionRedesign:B,isEditableOrCommentableSite:R}=e,E=a().Bj6.fromValue(p().ev,e.block),D=a().Bj6.fromValue(g().NX,e.space),N=a().Bj6.fromValue(m().Vl,e.associatedCollectionValue),L="none"!==l,O=(null==n?void 0:n.isUser())&&function(e){return"click_to_join"===h(e)}({space:D,trustedDomains:x,enableTrustedDomainPermissionRedesign:B,user:n,spaceUser:w}),U=N&&(o||L)?N.getNormalizedSchema():void 0,F=N&&(o||L)?N.id:void 0,V=N&&(o||L)?N.getFormat():void 0,j=o||L?null==C?void 0:C.id:void 0,z=o||L?null==C?void 0:C.getRawModules():void 0,H=o||L?null==C?void 0:C.getFormat():void 0;return{pageId:null==E?void 0:E.id,...y({space:D,intl:i}),spaceDomain:t,spaceShortId:D.getShortIdStr(),canJoinSpace:O,userHasExplicitAccess:o,ownerUserId:_({block:E,viewer:n,spaceUserIds:b,canViewerJoinSpace:O}),collectionId:F,collectionSchema:U,collectionFormat:V,layoutId:j,layoutModules:z,layoutFormat:H,canRequestAccess:!(null==n||!n.isUser())&&v({space:D,actor:n,canActorJoinSpace:O,publicAccessRequestExpEnabled:e.publicAccessRequestExpEnabled}),requireInterstitial:r,requireLogin:Boolean(s),publicAccessRole:l,publicHomePage:c,presenceAuthorizationToken:u,securitySettings:f,template:d,isDeleted:S,publicDomainName:k,isDLSViewer:I,domainLinkSharingEnabledDomains:null==x?void 0:x.filter((e=>e.getDomainLinkSharingEnabled())).map((e=>e.getEmailDomain())),siteGoogleAnalyticsId:A,siteTheme:T,...M?{icon:M}:{icon:void 0},isPublicShareLink:P,isEditableOrCommentableSite:R}}function y(e){let{space:t,intl:n}=e;return{spaceName:t.name||n.formatMessage({id:"publicPageDataHelpers.untitledWorkspace.placeholder",defaultMessage:"Untitled Workspace"}),spaceId:t.id,icon:t.icon,betaEnabled:t.beta_enabled}}var S=()=>n(212547),w=()=>n(854150),k=()=>n(277816),I=()=>n(798880),x=()=>n(322769),A=()=>n(176581),C=()=>n(468006),T=()=>n(319625),M=()=>n(502800),P=()=>n(534177),B=()=>n(972435),R=()=>n(870618),E=()=>n(303626),D=()=>n(508496),N=()=>n(671887),L=()=>n(134217),O=()=>n(749240),U=()=>n(449506);const F="publicAccessPageId";async function V(e){const{firstResult:t,localPromise:n,remotePromise:o}=await async function(e){const{environment:t,request:n}=e,o="block-space"===n.type?E().N.measure("loadPublicPageData",`block:${n.blockId} space:${n.spaceId}`,(()=>async function(e,t){if("block-space"!==t.type)return{error:Error("Shouldn't be looking for a non-block-space page")};const{blockId:n}=t,{id:o}=e.currentUser;if(n&&o){let t,d,u,f,v,h,_;const y=[];try{var i;const l=await R().ww({environment:e,recordPointers:[{table:p().ev,id:n},{table:I().oo,id:o}],recurFn:e=>{const o=[];return e.table===p().ev&&e.id===n&&(t=e),e.table===g().NX&&(d=e),e.table===w().yK&&(u=e),e.table===m().Vl&&t&&t.parent_id===e.id&&(f=e),e.table===I().oo&&(h=e),e.table===k().A&&y.push(e),(0,S().A0)(e)&&o.push(e.getParentPointer()),o},recordIsRequired:()=>!0});var r;if(d&&h)_=null===(r=await R().h7({environment:e,pointer:h.toSpaceUserPointer(d.id)}))||void 0===r?void 0:r.model;const x=null===(i=f)||void 0===i?void 0:i.getLayoutPointer();var s;if(x)v=null===(s=await R().h7({environment:e,pointer:x}))||void 0===s?void 0:s.model;if(t&&d&&h&&_){const e={table:p().ev,id:n},o=c().MR(e,l),i=!c()._n(e,a().b4_.fromRecordMapWithRole(l)),r=h,s=Boolean(c().uA(o,r)),m=c().Y1(o),g={publicAccess:(0,C().oZ)({spaceModel:d,teamModel:u,setting:"disable_public_access"}),disableExport:(0,C().oZ)({spaceModel:d,teamModel:u,setting:"disable_export"}),guestSetting:(0,A().v)({space:d,team:u})};let S=[];const w=O().subscriptionDataStoreInstance.state;w&&(S=(0,L().Ye)(w));const k=S.map((e=>e.userId));return{value:b({block:t,space:d,spaceDomain:void 0,associatedCollectionValue:f,associatedLayoutModel:v,actor:r,userHasExplicitAccess:s,intl:B().A.getIntl(),requireInterstitial:void 0,publicAccessRole:m,securitySettings:g,publicHomePage:void 0,template:void 0,publicAccessRequestExpEnabled:D().default.checkGate({gateName:"allow_public_page_access_request",disableExposureLogging:!0}),isDeleted:s?i:void 0,spaceUserIds:k,spaceUser:_,isDLSViewer:!1,trustedDomains:y,enableTrustedDomainPermissionRedesign:D().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})||"on"===D().default.getEligibleGroup({experimentId:"domain_link_sharing_redesign",defaultGroup:"control"})})}}}catch(l){return{error:(0,T().A)(l)}}}return{error:Error("No offline public page data found.")}}(t,n))).then((e=>({from:"local",result:"value"in e?e.value:void 0}))):Promise.resolve({from:"local",result:void 0}),i=q({environment:t,request:n}).then((e=>({from:"remote",result:e}))),r=await Promise.race([o,i].filter(P().O9));return{firstResult:r,localPromise:o,remotePromise:i}}(e);if(t.result){if("local"===t.from&&!e.ignoreLocalResult)return t.result;if("remote"===t.from&&"success"===t.result.type)return t.result.data}const i=await o;if("local"===t.from){if("success"===i.result.type)return i.result.data}else if("remote"===t.from){const t=await n;if(t.result&&!e.ignoreLocalResult)return t.result}const r="Error loading public page data both locally and remotely";throw"failed"===i.result.type?new Error(`${r}: ${i.result.error}`):new Error(r)}async function j(e){try{const t=await V(e);return o().A.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&N().D.setState({...N().D.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){return void i().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageData",error:(0,M().convertErrorToLog)(t)})}}async function z(e){try{const t=await V(e);return o().A.withListenerIgnored((()=>{t.spaceId&&t.spaceShortId&&N().D.setState({...N().D.state,[t.spaceId]:t.spaceShortId})})),t}catch(t){throw i().log({level:"error",from:"publicPageDataActions",type:"loadPublicPageDataUnsafely",error:(0,M().convertErrorToLog)(t)}),t}}function H(e){let{currentUserId:t,blockId:n}=e;r().K.set({userId:t,key:F,value:n})}function W(e){return r().K.get({userId:e,key:F})}async function q(e){const{environment:t,request:n}=e,o="invite-link"===n.type?(0,x().PM)(n.inviteLinkCode):void 0;let i={[s().eG]:o};return"block-space"===n.type&&(i=(0,l().WS)({spaceId:n.spaceId,recordId:n.blockId,verifyShortSpaceIdVersion:!0})),function(e){return Boolean("block-space"===e.type&&(e.blockId||e.spaceId))}(n)?U().callApi({eventName:"getPublicPageData",environment:t,data:n,headers:i}):"spaceDomain"in n&&n.spaceDomain?U().callApi({eventName:"getPublicPageDataForDomain",environment:t,data:{...n,type:"block-space",spaceDomain:n.spaceDomain},headers:i}):U().callApi({eventName:"getPublicPageData",environment:t,data:n,headers:i})}},508104:(e,t,n)=>{n.d(t,{z:()=>s,E:()=>l});var o=()=>n(713998),i=()=>n(989423);function r(e,t){i().vd(e,"todo_block_check",t)}var a=()=>n(246826);function s(e){const{blocks:t,transaction:n,environment:i}=e;for(const r of t)a().zv({store:r.getPropertiesStore(),data:{checked:o().rN(!0)},transaction:n});r(i,{is_checked:!0})}function l(e){const{environment:t,blocks:n,transaction:i}=e;for(const r of n)a().zv({store:r.getPropertiesStore(),data:{checked:o().rN(!1)},transaction:i});r(t,{is_checked:!1})}},508496:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v,localExperimentsV2Key:()=>u});n(16280),n(898992),n(672577),n(803949);var o=()=>n(496506),i=()=>n(715256),r=()=>n(656048),a=()=>n(496603),s=()=>n(534177);function l(e){const t={};return e?((0,s().WP)(e).forEach((e=>{let[n,o]=e;null!=n&&null!=o&&(t[String(n)]=a().Kg(o)?o:JSON.stringify(o))})),t):t}var c=()=>n(165162),d=()=>n(686594);const u="experimentsSettingsV2";class p extends(()=>n(757695))().default{getInitialState(){return{isLoaded:!1}}updateState(e,t){!e.test&&this.state.isLoaded&&this.state.test||(this.setState(e),n(763884).K.set({userId:e.userId,key:u,value:e}))}setState(e){super.setState(e)}getExperimentsForCurrentSpace(){if(!this.state.isLoaded)return[];if(this.state.test)return this.state.experiments;const e=n(351360).default.state.currentSpaceStore;return e&&this.state.experimentsBySpace[e.id]||this.state.experimentsWithoutSpace}getGroup(e){if(i().bl.has(e))return r().Jl;let t;if(this.state.isLoaded){const n=this.getExperimentsForCurrentSpace().find((t=>t.experimentId===e));if(!n)return r().Jl;t=n.group}return t||r().Jl}getExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e[t.experimentId]=t.group})),e}getExperimentMap(){const e=new Map;return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{e.set(t.experimentId,t)})),e}getUsedNonControlExperimentsMap(){const e={};return this.state.isLoaded&&this.getExperimentsForCurrentSpace().forEach((t=>{"control"!==t.group&&(0,i().XK)(t.experimentId)&&(e[t.experimentId]=t.group)})),e}getAcceptLanguageHeader(){if(this.state.isLoaded)return this.state.acceptLanguageHeader}}let m={};const g=void 0,f=void 0,v=new class extends p{constructor(){super(),this.computedStoreMap=new Map,this.featureGateContextDataStores=void 0,this.isStatsigEnabled()&&d().A.addListener((()=>{this.recomputeAllGroupStores()}))}isStatsigEnabled(){var e;return Boolean(null===(e=n(780054).A.statsig)||void 0===e?void 0:e.apiKey)}isStatsigEnabledAndInitialized(){return this.isStatsigEnabled()&&d().A.isInitialized()}isLoaded(){return this.state.isLoaded}getGroup(e,t){return(0,i().o7)(e)?this.getEligibleGroup({experimentId:e,defaultGroup:r().Jl,disableExposureLogging:null==t?void 0:t.disableExposureLogging}):r().Jl}getEligibleGroup(e){const{experimentId:t,defaultGroup:n,parameter:o=d().K,disableExposureLogging:i=!1}=e,r=(null==o?void 0:o.toLowerCase())===d().K,a=this.getExperimentOverrideForBrowserTest(t);if((0,s().O9)(a))return a[o];const l=e.actor;this.validateActor(l),this.state.isLoaded;const c=`eligibleGroup.${t}.${o}${i?".disableLogging":""}`;return this.createComputedGroupStore(c,(()=>{if(!this.isStatsigEnabledAndInitialized())return;const e=this.validateGroupIsString(d().A.getGroup(t,i));return void 0!==e&&(m[`statsig-${t}`]=e),r?e:d().A.getGroup(t,i,o,n)})).state.group??n}manuallyLogExperimentExposure(e){d().A.manuallyLogExperimentExposure(e)}validateActor(e){if(void 0!==e&&e!==i().S3){const t=this.isStatsigEnabledAndInitialized()&&d().A.state.currentUserId?{table:n(798880).oo,id:d().A.state.currentUserId}:void 0;if(t&&e!==t)throw new Error("Invalid user: actor does not match currentUser")}}checkGate(e){let{gateName:t,disableExposureLogging:n}=e;const o=this.getFeatureGateContextDataStores();return n?o.withoutExposureLoggingStore.state(t):o.withExposureLoggingStore.state(t)}getFeatureGateContextDataStores(){if(!this.featureGateContextDataStores){this.featureGateContextDataStores=Object.create(null);for(const e of[!0,!1])this.featureGateContextDataStores[e?"withoutExposureLoggingStore":"withExposureLoggingStore"]=new(o().default)((()=>{const t=this.isStatsigEnabledAndInitialized(),n=this.state,o=Object.create(null);return i=>{const r=null==f?void 0:f(i);if((0,s().O9)(r))return r;const a=null==g?void 0:g(i,n);if((0,s().O9)(a))return a;if(!t)return!1;let l=o[i];return void 0===l&&(l=d().A.checkGate(i,e),m[`statsig-${i}`]=l,o[i]=l),l}}),{debugName:"FeatureGateContextDataStore"})}return this.featureGateContextDataStores}getConfigKey(e,t,n){const o=i().Hb[e][t];return this.createComputedDynamicConfigKeyStore(e,t,(()=>{var i;return this.isStatsigEnabledAndInitialized()?(null===(i=d().A.getConfig(e,n))||void 0===i?void 0:i.get(String(t),o))??o:o})).state.value}logEvent(e,t,o){return this.isStatsigEnabledAndInitialized()?d().A.logEvent(e,t,l(o)):(n(857639).log({level:"error",from:"ExperimentStore.ts",type:"statsigIsNotInitialized",data:{miscDataToConvertToString:{eventName:e,value:t,metadata:l(o),isStatsigEnabled:this.isStatsigEnabled(),isInitialized:d().A.isInitialized()}}}),!1)}getExperimentsMap(){return{...super.getExperimentsMap(),...this.getStatsigExperimentsMap()}}getStatsigExperimentsMap(){return this.getBootstrappedExperimentGroups(),m}updateState(e,t){(void 0===e.userId||this.state.isLoaded&&this.state.userId!==e.userId)&&(m={}),super.updateState(e,t)}reset(){super.reset(),m={},this.recomputeAllGroupStores()}async waitUntilStatsigReady(){this.isStatsigEnabled()&&await d().A.waitUntil((()=>d().A.state.ready))}isStatsigReady(){return d().A.state.ready}recomputeAllGroupStores(){const{computedStoreMap:e,featureGateContextDataStores:t}=this;e.forEach((e=>e.enqueueRecompute())),t&&(t.withExposureLoggingStore.enqueueRecompute(),t.withoutExposureLoggingStore.enqueueRecompute())}createComputedGroupStore(e,t){return this.createComputedStore(e,(()=>({group:t(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedDynamicConfigKeyStore(e,t,n){return this.createComputedStore(`config.${e}.${String(t)}`,(()=>({value:n(),lastUpdatedMinute:(new Date).getMinutes()})))}createComputedStore(e,t){let n=this.computedStoreMap.get(e);return n||(n=new(o().default)(t,{debugName:`ExperimentStore.${e}`}),n.addListener(a().lQ),this.computedStoreMap.set(e,n)),n}getExperimentOverrideForBrowserTest(e){}validateGroupIsString(e){return"string"==typeof e?e:void 0}getBootstrappedExperimentGroups(){for(const e of i().jy){if(void 0!==m[`statsig-${e}`])continue;const t=(0,c().gg)({experimentId:e,disableExposureLogging:!0});void 0!==t&&(m[`statsig-${e}`]=t)}for(const e of i().TQ){if(void 0!==m[`statsig-${e}`])continue;const t=(0,c().Sx)({gateName:e,disableExposureLogging:!0});null!==t&&(m[`statsig-${e}`]=t)}}}},509628:(e,t,n)=>{n.d(t,{Y:()=>l});var o=n(296540),i=(n(944114),()=>n(534177));function r(e){const{align:t,borderRadius:n,className:o,direction:r="vertical",height:s,padding:l,width:c="fill"}=e,d=function(e){const{width:t,height:n}=e,o={},r=[];"number"==typeof t?o.width=t:"fill"===t?r.push("autolayout-fill-width"):"hug"===t||void 0===t||(0,i().HB)(t);"number"==typeof n?o.height=n:"fill"===n?r.push("autolayout-fill-height"):"hug"===n||void 0===n||(0,i().HB)(n);return{style:o,classNames:r}}({width:c,height:s}),u={...d.style,borderRadius:n,padding:l},p=[a(r),...d.classNames];var m;return t&&p.push(function(e){switch(e){case"top-left":case"top-center":case"top-right":case"center-left":case"center":case"center-right":case"bottom-left":case"bottom-center":case"bottom-right":case"start":case"end":return`autolayout-${e}`;default:(0,i().HB)(e)}}(t)),o&&p.push(o),!function(e){return"auto"===e.gap}(e)?function(e){return void 0!==e.gap}(e)&&("object"==typeof(m=e.gap)&&void 0!==m.column&&void 0!==m.row?(u.columnGap=e.gap.column,u.rowGap=e.gap.row):u.gap=e.gap):(p.push("autolayout-space"),u.gap=e.minGap),{style:u,classNames:p}}function a(e){switch(e){case"horizontal":return"autolayout-row";case"vertical":return"autolayout-col";default:(0,i().HB)(e)}}var s=n(474848);const l=(0,o.forwardRef)((function(e,t){const{children:n,style:o,...i}=e,{style:a,classNames:l}=r(i),c={...a,...o},d=l.join(" ");return(0,s.jsx)("div",{ref:t,className:d,style:c,children:n})}))},510473:(e,t,n)=>{n.d(t,{A:()=>s,E:()=>a});var o=()=>n(437607),i=()=>n(158009),r=()=>n(630116);function a(e){const{spaceStore:t,groupId:n}=e;return r().Cv.createChildStore(t,(0,o().bj)({spacePermissionGroupId:n,spaceId:t.id}))}function s(e){const{spaceStore:t,groupId:n,userId:o}=e;return r().mm.createChildStore(t,(0,i().BZ)({spacePermissionGroupId:n,spaceId:t.id,userId:o}))}},510683:(e,t,n)=>{n.d(t,{Jq:()=>L,En:()=>O,NB:()=>N,Je:()=>V,_2:()=>F});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(617871),i=()=>n(388693),r=()=>n(861017),a=()=>n(427704),s=()=>n(112069),l=()=>n(677338),c=()=>n(20498),d=()=>n(973647),u=()=>n(534177),p=()=>n(939768),m=()=>n(780054),g=()=>n(989423),f=()=>n(725951),v=()=>n(974233),h=()=>n(859004),_=()=>n(508496),b=()=>n(53137),y=()=>n(666803),S=()=>n(404141),w=()=>n(559926),k=()=>n(449506),I=()=>n(901389),x=()=>n(705540),A=()=>n(664133),C=()=>n(351360);var T=()=>n(433052),M=()=>n(957416),P=()=>n(464510),B=()=>n(435009),R=()=>n(72234),E=()=>n(633457);const D=(0,n(959013).YK)({titleMessage:{id:"externalIntegrationAuthActions.loginWithExternalIntegrationPopupModal.title",defaultMessage:"Authenticate"}});async function N(e){const{environment:t,integration:n,spaceId:o,from:i}=e,a=n.id,s=t.currentUser.id,l=(0,f().LX)(t);if(!s)throw new Error("No user id found");let d;w().xI(t,{integrationId:a,from:i});const u=(0,c().Hr)(a);if("dlp"===(null==u?void 0:u.type)||"ediscovery"===(null==u?void 0:u.type)){const e=await k().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:a,spaceId:o}});if("failed"===e.type)return I().Qg(e),{error:`Unexpected error creating authorization code: ${(0,v().V)(e)}`};d=e.data.code}await H({environment:t,notionAuthorizationCode:d,integration:n,spaceId:o,userId:s,authType:l,from:i,callbackRouteName:(null==u?void 0:u.id)===c().lW.datadog.id?r().I2.datadogAuthCallback:r().I2.authCallback}),await E().oX({environment:t}),"workspace_connections_redirect"===i&&S().A.setState({open:!0,openedFrom:"workspace_connections_redirect",currentTab:"integrations",defaultSubtab:"workspace_connections",highlightedSetting:void 0})}async function L(e){const{environment:t,spaceId:n,integration:i,from:r}=e;if(i.id===o().F6)return await A().jh({environment:t,from:r,action:"add_account"}),(0,g().u4)({environment:t,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",flowId:y().Ay.createNewFlowId(),from:"my_connections"}}}),{value:{externalAuthentication:void 0}};if(i.id===o().Fv){if(!t.currentUser.id)return{error:"User must be signed in."};const o=(0,f().LX)(t),a={externalObjectInstanceBlockId:e.externalObjectInstanceBlockId,spaceId:n,callbackType:o.callbackType,...o.redirectToAuth&&{redirectToAuth:"true"}};return function(e){const{currentSpaceStore:t}=C().default.state;if(!t)return;const n=y().Ay.getFlowId();y().Ay.setState({...y().Ay.state,type:"dc-auth",open:!0,instanceValue:y().cK.DataCenter,spaceId:e.spaceId,notionState:e.notionState}),(0,g().u4)({environment:e.environment,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira-dc",actionType:"auth_render",flowId:n}}})}({environment:t,from:r,action:"add_account",spaceId:n,notionState:e.externalObjectInstanceBlockId&&a}),w().xI(t,{integrationId:i.id,from:r}),{value:{externalAuthentication:void 0}}}return i.id===o().mn?(h().rT({environment:t,from:r,action:"add_account"}),{value:{externalAuthentication:void 0}}):await O(e)}async function O(e){const{environment:t,spaceId:n,integration:c,externalObjectInstanceBlockId:u,unfurlUrl:g,preventRedirectToLastVisitedPage:h,from:y}=e;l().NI(void 0);const S=c.id,A=S===o().zG?b().A.completeSlackAuthentications.state:b().A.externalAuthentications.state,C=new Set(A.filter((e=>{let{integration_id:t}=e;return t===S})).map((e=>e.parent_id)));S===o().Hd&&R().ZK(t);const N=(0,o().CX)({integrationId:S,env:"production"}),L=(0,i().UI)(m().A.domainBaseUrl),O=c.redirect_uris.includes(L)?L:c.redirect_uris[0],F=await k().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:S,spaceId:n,...N?{redirectUri:O}:{}}});if("failed"===F.type)return I().Qg(F),{error:`Unexpected error creating authorization code: ${(0,v().V)(F)}`};const V=F.data.code,j=t.currentUser.id,W=(0,f().LX)(t),q=r().I2.authCallback;if(!j)return{error:"User must be signed in."};const K={environment:t,notionAuthorizationCode:V,integration:c,spaceId:n,externalObjectInstanceBlockId:u,unfurlUrl:g,authType:W,from:y,userId:j,callbackRouteName:q};(0,o().CX)({integrationId:S,env:"production"})?await async function(e){const{environment:t,redirectUri:n,notionAuthorizationCode:i,integration:l,spaceId:c,externalObjectInstanceBlockId:u,unfurlUrl:g,authType:f,userId:v}=e,h=await async function(e){const{integration:t}=e;if("external"===t.type&&void 0!==t.info.handled_by_integrations_server)return"github"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,notionAuthorizationCode:n,spaceId:o,authType:i}=e,l={notion_workspace_id:o,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:n,callback_type:i.callbackType,...i.redirectToAuth&&{redirectToAuth:"true"}},c=_().default.checkGate({gateName:"enable_server_integrations_proxy"}),d=(0,p().Gm)({url:(0,s().ae)("production",c),query:{...l}});if((t.device.isTablet||t.device.isMobile)&&t.mobileNative&&"on"===_().default.getEligibleGroup({experimentId:"allow_auth_with_app_browser_for_mobile",defaultGroup:"control"}))return void t.mobileNative.openInAppBrowser(d);if(t.device.isElectron){if(_().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(d)}});x().openExternalUrl(e)}else x().openExternalUrl(d);return}const u=await M().P(t,{width:610,height:700,url:d,titleMessage:D.titleMessage});if(!u)return;const g=(0,r().parseRoute)({url:u,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:f}=T().v4(t);"externalAuthCallback"===g.name&&await P().d0({route:g,environment:t});B().oo({url:f||a().JZ.root,environment:t})}(e),{value:{success:!0}}):"slack"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,userId:n,spaceId:o,authType:i,from:l,externalObjectInstanceBlockId:c,options:d,notionAuthorizationCode:u}=e,g={notion_workspace_id:o,notion_user_id:n,notion_last_visited_url:window.location.href,auth_initiator:l,callback_type:i.callbackType,slack_workspace_id:null==d?void 0:d.slackWorkspaceId,external_object_instance_block_id:c,...i.redirectToAuth&&{redirectToAuth:"true"},notion_authorization_code:u},f=_().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().Gm)({url:(0,s()._J)("production",f),query:{...g}});if(t.mobileNative)return void t.mobileNative.openInAppBrowser(v);if(t.device.isElectron){if(_().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});x().openExternalUrl(e)}else x().openExternalUrl(v);return}const h=await M().P(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!h)return;const b=(0,r().parseRoute)({url:h,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});"externalAuthCallback"===b.name&&await P().d0({route:b,environment:t})}(e),{value:{success:!0}}):"zendesk"===t.info.handled_by_integrations_server?(await U(e),{value:{success:!0}}):"salesforce"===t.info.handled_by_integrations_server?(await async function(e){const{environment:t,notionAuthorizationCode:n,spaceId:i,authType:l,externalObjectInstanceBlockId:c,integration:d}=e,u={notion_workspace_id:i,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,callback_type:l.callbackType,external_object_instance_block_id:c,notion_authorization_code:n,...l.redirectToAuth&&{redirectToAuth:"true"}},g=_().default.checkGate({gateName:"enable_server_integrations_proxy"}),f=d.id===o().mn?s().kB:`${s().kB}${s().EQ}`,v=(0,p().Gm)({url:(0,s().WC)({env:"production",isServerIntegrationsProxyEnabled:g,integrationPath:f}),query:{...u}});if(t.device.isElectron)return void x().openExternalUrl(v);const h=await M().P(t,{width:610,height:700,url:v,titleMessage:D.titleMessage});if(!h)return;const b=(0,r().parseRoute)({url:h,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:y}=T().v4(t);"externalAuthCallback"===b.name&&await P().d0({route:b,environment:t});B().oo({url:y||a().JZ.root,environment:t})}(e),{value:{success:!0}}):"gmail"===t.info.handled_by_integrations_server?(await z(e,"gmail"),{value:{success:!0}}):"google_contacts"===t.info.handled_by_integrations_server?(await z(e,"google_contacts"),{value:{success:!0}}):"jira_data_center"===t.info.handled_by_integrations_server?(await U(e),{value:{success:!0}}):{error:{success:!1}};return{error:{success:!1}}}(e);if(d().Q.isSuccess(h))return;const b={externalObjectInstanceBlockId:u,spaceId:c,userId:v,callbackType:f.callbackType,...f.redirectToAuth&&{redirectToAuth:"true"}},y={code:i,notion_state:JSON.stringify(b),integration_id:l.id,external_url:g,redirect_uri:n},S=(0,p().Gm)({url:n,query:{...y}});if(t.device.isElectron){if(_().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"})){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});x().openExternalUrl(e)}else x().openExternalUrl(S);return}const w=await M().P(t,{width:610,height:700,url:S,titleMessage:D.titleMessage});if(!w)return;const k=(0,r().parseRoute)({url:w,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});"externalAuthCallback"===k.name&&await P().d0({route:k,environment:t})}({...K,integration:c,notionAuthorizationCode:V,redirectUri:O,preventRedirectToLastVisitedPage:h}):await H(K),w().xI(t,{integrationId:c.id,numberOfAccountsAlreadyConnected:C.size,from:y}),await E().oX({environment:t});return{value:{externalAuthentication:b().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===S})).find((e=>!C.has(e.parent_id)))}}}async function U(e){const{environment:t,notionAuthorizationCode:n,spaceId:o,authType:i,externalObjectInstanceBlockId:s}=e,l={notion_workspace_id:o,notion_user_id:t.currentUser.id,notion_last_visited_url:window.location.href,notion_authorization_code:n,external_object_instance_block_id:s,callback_type:i.callbackType,integration_id:e.integration.id,...i.redirectToAuth&&{redirectToAuth:"true"}},c=(0,p().Gm)({url:`${m().A.domainBaseUrl}/initiateExternalAuthentication`,query:{...l}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(c)}});return void x().openExternalUrl(e)}const d=await M().P(t,{width:610,height:700,url:c,titleMessage:D.titleMessage});if(!d)return;const u=(0,r().parseRoute)({url:d,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href}),{url:g}=T().v4(t);"externalAuthCallback"===u.name&&await P().d0({route:u,environment:t}),B().oo({url:g||a().JZ.root,environment:t})}function F(e){const{environment:t,notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,zendeskSubDomain:u}=e,g={notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,zendeskSubDomain:u,...d&&{redirectToAuth:"true"}},f=_().default.checkGate({gateName:"enable_server_integrations_proxy"}),v=(0,p().Gm)({url:(0,s().$d)("production",f),query:{...g}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(v)}});x().openExternalUrl(e)}else window.location.href=v}function V(e){const{environment:t,notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,redirectToAuth:d,domain:u,personalAccessToken:g,username:f,password:v,authType:h}=e,b={notion_workspace_id:n,notion_user_id:o,notion_last_visited_url:i,notion_authorization_code:r,external_object_instance_block_id:l,callback_type:c,domain:u,personalAccessToken:g,username:f,password:v,authType:h,...d&&{redirectToAuth:"true"}},y=_().default.checkGate({gateName:"enable_server_integrations_proxy"}),S=(0,p().Gm)({url:(0,s().o_)("production",y),query:{...b}});if(t.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(S)}});x().openExternalUrl(e)}else window.location.href=S}function j(e){const t=_().default.checkGate({gateName:"enable_server_integrations_proxy"});return"gmail"===e?(0,s().FD)("production",t):"google_contacts"===e?(0,s().Fw)("production",t):void(0,u().HB)(e)}async function z(e,t){const{environment:n,notionAuthorizationCode:o,spaceId:i,authType:s,externalObjectInstanceBlockId:l,preventRedirectToLastVisitedPage:c}=e,d={notion_workspace_id:i,notion_user_id:n.currentUser.id,notion_last_visited_url:window.location.href,callback_type:s.callbackType,external_object_instance_block_id:l,notion_authorization_code:o,...s.redirectToAuth&&{redirectToAuth:"true"}},u=(0,p().Gm)({url:j(t),query:{...d}});if(n.device.isElectron){const e=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.initiateExternalAuthenticationFromDesktop}`,query:{redirectUri:encodeURIComponent(u)}});return void x().openExternalUrl(e)}const g=await M().P(n,{width:610,height:700,url:u,titleMessage:D.titleMessage});if(!g)return;const f=(0,r().parseRoute)({url:g,isMobile:n.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});if("externalAuthCallback"===f.name&&await P().d0({route:f,environment:n,preventRedirectToLastVisitedPage:c}),!c){const{url:e}=T().v4(n);B().oo({url:e||a().JZ.root,environment:n})}}async function H(e){const{environment:t,notionAuthorizationCode:n,integration:o,spaceId:i,userId:s,authType:l,externalObjectInstanceBlockId:c,from:d,callbackRouteName:u}=e,g=o.id,v={notionAuthorizationCode:n,userId:s,spaceId:i,integrationId:g,externalObjectInstanceBlockId:c,callbackType:l.callbackType,...l.redirectToAuth&&{redirectToAuth:"true"}};let h=(0,p().Gm)({url:`${m().A.domainBaseUrl}${a().JZ.externalIntegrationPopupRedirect}`,query:{...v}});if(h=l.redirectToAuth?h:await(0,f().YN)(t,h),t.device.isElectron)return void x().openExternalUrl(h);const _=await M().P(t,{width:610,height:700,url:h,titleMessage:D.titleMessage});if(!_)return;const b=(0,r().parseRoute)({url:_,isMobile:t.device.isMobile,baseUrl:m().A.domainBaseUrl,publicDomainName:m().A.publicDomainName,protocol:m().A.protocol,currentUrl:window.location.href});b.name===u&&await P().M8({route:b,environment:t,integrationId:g,from:d})}},515402:(e,t,n)=>{n.d(t,{d:()=>g,g:()=>m});n(898992),n(354520),n(581454);var o=()=>n(857639),i=()=>n(388821),r=()=>n(332393),a=()=>n(606219),s=()=>n(496603),l=()=>n(502800),c=()=>n(351360),d=()=>n(992237),u=()=>n(449506),p=()=>n(847307);async function m(e){const{currentSpaceStore:t}=c().default.state;t&&await g({environment:e.environment,spaceId:t.id,force:!0})}async function g(e){const{environment:t,spaceId:n,force:m}=e;if(!t.currentUser.id)return;await c().default.waitUntilRendered();const g=d().A.state;if(!g.loaded&&!g.loading||g.loaded&&n!==g.spaceId||m){d().A.setState({...d().A.state,loading:!0});const e=async()=>{const e=await u().callApi({eventName:"searchIntegrations",environment:t,data:{query:"",type:"compliance",spaceId:n}});return"success"!==e.type?(o().log({level:"error",from:"complianceIntegrationActions",type:"searchIntegrationsError",error:(0,l().convertErrorToLog)(e.error)}),{status:"rejected",error:e.error}):{status:"resolved",value:e}},c=async()=>{try{return{status:"resolved",value:await p().C({environment:t,spaceId:n})}}catch(e){return o().log({level:"error",from:"complianceIntegrationActions",type:"fetchWebhookSubscriptionsError",error:(0,l().convertErrorToLog)(e)}),{status:"rejected",error:e}}},[m,g]=await Promise.all([e(),c()]);if("rejected"===m.status||"rejected"===g.status)return;const{value:f}=m,{value:v}=g,h=i().RecordMapWithRole.create(f.data.recordMap),_=i().RecordMapWithRole.create(v.recordMap);d().A.setState({loaded:!0,loading:!1,spaceId:n,integrations:s().Ul(s().oE(f.data.integrationIds.map((e=>h.getModel({table:r().Li,id:e})))).filter(r().kC),(e=>{let{created_at:t}=e;return t})),webhookSubscriptions:s().oE(v.webhookSubscriptionIds.map((e=>_.getModel({table:a().TF,id:e,spaceId:n}))))})}}},515918:(e,t,n)=>{n.d(t,{A:()=>c});n(296540);var o=()=>n(401497),i=()=>n(959013),r=()=>n(100622),a=()=>n(284371),s=()=>n(464708),l=n(474848);function c(e){const{style:t}=e,n=(0,o().IS)((e=>({badge:{fontWeight:a().Wy.medium,letterSpacing:0,fontSize:11,color:e.blueColor,background:"light"===e.mode?r().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",whiteSpace:"nowrap",width:"fit-content",...t}})),[t]);return(0,l.jsx)(s().A,{style:n.badge,content:(0,l.jsx)(i().sA,{id:"newBadgeComponent.label",defaultMessage:"New"})})}},517223:(e,t,n)=>{n.d(t,{HZ:()=>_,Hc:()=>S,LD:()=>I,Ul:()=>b,_1:()=>w,e7:()=>y,pm:()=>k});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(908872),n(737550);var o=()=>n(847249),i=()=>n(487929),r=()=>n(713998),a=()=>n(651124),s=()=>n(416504),l=()=>n(390066),c=()=>n(120997),d=()=>n(124672),u=()=>n(706665),p=()=>n(778781),m=()=>n(797809),g=()=>n(534177),f=()=>n(909470),v=()=>n(847743),h=()=>n(508496);function _(e){let{propertyGroups:t,propertyIds:n,propertyGroupId:o,format:i}=e;const r=n?n.map((e=>({property:e,visible:!0}))):void 0;if(r)return r;if(o){if(!t)return[];const e=(0,u().z5)({propertyGroups:t,groupId:o});return null!=e&&e.propertyIds?e.propertyIds.map((e=>({property:e,visible:!0}))):[]}return(i.collection_page_properties||[]).filter((e=>{var t;return null===(t=i.collection_page_sections)||void 0===t||!t.some((t=>t.section===e.property&&("inline"===t.visibility||"minimal"===t.visibility)))}))}function b(e){let{collectionStore:t,modulesByArea:n}=e;const o=(0,l().L)(t.getFormat(),t.getSchema(),void 0,a().jf.Page),i=_({propertyGroups:[],propertyIds:void 0,propertyGroupId:void 0,format:o}),r=new Set((0,d().q)({modulesByArea:n,collectionSchema:t.getSchema(),collectionFormat:o}));return i.filter((e=>!r.has(e.property)))}function y(e){let{store:t,format:n,schema:o,collectionStore:i,propertyIds:c,propertyGroupId:d,intl:u,environment:p,formulasModule:m}=e;const g=t.getModel(),b=(0,l().L)(n,o,void 0,a().jf.Page),y=_({propertyGroups:i.getNormalizedPropertyGroups({publicPageDataFallbackEnabled:!0}),propertyIds:c,propertyGroupId:d,format:b}),S=b&&b.property_visibility;if(S){return y.map((e=>{const n=o[e.property];let i;return i=("formula"!==(null==n?void 0:n.type)||!v().Pe)&&!Boolean(g&&r().r8({block:g,property:e.property,schema:o,getRecordModel:t.getRecordModel,userId:p.currentUser.id,userTimeZone:(0,s().P)(),intl:u,experimentService:h().default,collectionFeatureGates:(0,f().i)(),formulasModule:m})),{visibility:"show",hasValue:i,name:(null==n?void 0:n.name)??"",...e,...S.find((t=>t.property===e.property))}}))}return y?y.map((e=>{var n;return{...e,visibility:"show",hasValue:Boolean(t.getPropertyValue(e.property)),name:(null===(n=o[e.property])||void 0===n?void 0:n.name)??""}})):[]}function S(e){const{layoutStore:t,propertyId:n}=e;let o=!1,i=!1;const r=t.getModules(),a=Boolean(r.page_main.some((e=>(0,p().gx)(e)?n===e.propertyId:"normalizedTitleWithIcon"===e.type&&e.propertyIds.includes(n))));return a||(i=Boolean(r.page_details.some((e=>!!(0,p().gx)(e)&&n===e.propertyId)))),o=!a&&!i,o&&(i=Boolean(r.page_details.find((e=>{let{type:t}=e;return"properties"===t})))),{isPropertyInPageDetails:i,isPropertyInGroup:o,isPropertyInMainPage:a}}function w(e){const{propertyId:t,store:n}=e;return(0,o().K8)((()=>{var e;const o=null==n||null===(e=n.getAssociatedCollectionStore())||void 0===e?void 0:e.getLayoutStore();return o&&t?S({layoutStore:o,propertyId:t}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1,isPropertyInMainPage:!1}}),[t,n])}function k(e){var t;const{collectionStore:n}=e,o=n.getLayoutStore(),r=null==o?void 0:o.getModules();if(null==r||null===(t=r.page_details)||void 0===t||!t.length)return{count:0,isPropertiesModuleInPageDetails:!1};const a=n.getSchema(),s=n.getFormat(),l=(0,i().T)({format:s,schema:a,visibilityLevels:["inline","minimal"]}).map((e=>e.section));let d=!1;const u=new Set,f=new Set;r.page_main.forEach((e=>{if((0,c().p)(e,"page_main"))if((0,p().gx)(e))u.add(e.propertyId);else if((0,p().V_)(e))l.forEach((e=>u.add(e)));else if("normalizedTitleWithIcon"!==e.type)switch(e.type){case"deleted_property":case"inlinePageSections":case"expandedBacklinks":case"discussions":case"cover":case"editor":case"views":case"viewsMain":case"transcript":case"bottomControls":case"placeholder":case"properties":return;default:(0,g().HB)(e)}else e.propertyIds.forEach((e=>{u.add(e)}))})),r.page_details.forEach((e=>{(0,c().p)(e,"page_details")&&((0,p().i_)(e)?d=!0:(0,p().gx)(e)?f.add(e.propertyId):"deleted_property"!==e.type&&(0,g().HB)(e))}));const v=n.getSchema();return{count:Object.keys(v).reduce(((e,t)=>{const n=v[t];return n?(0,m().TV)(n.type)?e:f.has(t)||!u.has(t)&&d?e+1:e:e}),0),isPropertiesModuleInPageDetails:d}}function I(e){const{module:t,collectionSchema:n}=e;return t.propertyIds.filter((e=>Boolean(n[e])))}},517288:(e,t,n)=>{n.d(t,{O:()=>c});var o=()=>n(383594),i=()=>n(972435),r=()=>n(486666),a=()=>n(129522),s=()=>n(116008),l=()=>n(441467);function c(e){const{environment:t,blockStore:n,rect:c,skipOpeningDiscussionOnSubmit:d,formulasModule:u}=e,p=c??a().K.getRect(n);if(!p)return;const m=p.width,g=p.height,f=p.right-m;s().A.setState({open:!0,rect:new DOMRect(f,p.top,m,g),type:"block",content:"reaction",blockStore:n,blockId:n.id,emoji:void 0}),o().W(t,{originGap:4,originRect:p,popupWidth:r().jv,popupHeight:r().GF,isSmallWidth:!1,title:i().A.formatMessage(l().DZ.emojiPicker),currentTab:"emoji",onCancel:()=>s().A.reset(),tabs:[{type:"emoji",title:i().A.formatMessage(l().DZ.emojiTitle),hideRandomButton:!0,onChange:e=>{const n=s().A.state;n.open&&"reaction"===n.content&&(s().A.setState({...n,emoji:e}),(0,l().i5)({environment:t,skipOpeningDiscussion:d,formulasModule:u}),o().I())}}]})}},518362:(e,t,n)=>{n.d(t,{F:()=>a});var o=()=>n(763884),i=()=>n(720665),r=()=>n(834211);function a(e){let{currentUserId:t,spaceId:n}=e;const a=o().K.get({userId:t,key:(0,r().Y)(n)});if(a){const e=(0,i().$l)(a);return Array.isArray(e)?e:[]}return[]}},518646:(e,t,n)=>{n.d(t,{k:()=>g});n(898992),n(354520),n(803949),n(581454);var o=n.n(n(169749)),i=()=>n(522419),r=()=>n(825237),a=()=>n(386164),s=()=>n(502492),l=()=>n(780054),c=()=>n(449506);function d(e){return[e.url,e.downloadName,e.download].filter(Boolean).join(":")}const u=new class{constructor(){this.lru=new(o())({max:1e3,maxAge:n(720665).pT})}set(e,t){this.lru.set(d(e),t)}get(e){return this.lru.get(d(e))}},p=new(n(56322).A)({performRequests:async e=>{const t=e.map((e=>{let{url:t}=e;return t})),o=e[0].environment,i=(0,r().De)(t);n(989423).u4({environment:o,event:{eventName:"multi_cell.batch_by_space_id.num_batches",eventProperties:{event_name:"getSignedFileUrls",num_batches:i.length}}});const a=new Map;for(const{spaceId:n,urls:r}of i){const e=await m({environment:o,urls:r,spaceId:n});for(const[t,n]of r.entries())a.set(d(n),e[t])}const s=new Array(t.length);for(const[n,r]of t.entries())s[n]=a.get(d(r));return s},batchSize:500,maxWorkers:1});async function m(e){const{environment:t,urls:n,spaceId:o}=e,i=await c().callApi({eventName:"getSignedFileUrls",environment:t,data:{urls:n},headers:(0,a().WS)({spaceId:o})});if("failed"===i.type)throw i.error;const{signedUrls:r}=i.data;return n.forEach(((e,t)=>{const n=r[t];u.set(e,n)})),r}async function g(e,t,n){let o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const a=u.get(t);let c;if(a)c=a;else if(o)c=await p.enqueue({environment:e,url:t});else{const n=(0,r().De)([t]);if(0===n.length)return c;const{spaceId:o,urls:i}=n[0],a=await m({environment:e,urls:i,spaceId:o});if(0===a.length)return c;c=a[0]}return c&&(0,i().T8)(c)&&n&&(c=(0,s().$J)({httpUrl:c,protocol:l().A.protocol,includePort:!0})),c}},518736:(e,t,n)=>{n.d(t,{D8:()=>d,Fh:()=>a,Le:()=>l,SL:()=>c,tX:()=>s});var o=()=>n(179034),i=()=>n(969197),r=()=>n(351360);const a=100,s=(0,n(855355).bX)();function l(e){const{store:t,blockStore:n}=e;return n.useCrdt()&&n.getBlockTitleStore()===t}function c(e){if(!e.isTable(o().ev))return!1;const t=(0,i().T)(e);return!!t&&l({store:e,blockStore:t})}function d(e){var t;const n=(null==e?void 0:e.getCrdtStatus())??(null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.getCrdtStatus())??"off";return"prefer_on"===n||"migrating"===n||"on"===n}},518888:(e,t,n)=>{n.r(t),n.d(t,{GlobalFileUploadStore:()=>o,default:()=>i});n(814603),n(147566),n(198721);class o extends(()=>n(757695))().default{getInitialState(){return{}}getKeyState(e){return this.state[e]}setKeyState(e,t){const n=this.state;let o;if(t){var i;const a=t.file.type.indexOf("image")>=0;var r;if(t.file!==(null===(i=n[e])||void 0===i?void 0:i.file)&&a)o=null===(r=n[e])||void 0===r?void 0:r.dataURL,t.dataURL=t.file instanceof File?URL.createObjectURL(t.file):t.file.dataURL;n[e]={...t,dataURL:t.dataURL}}else{var a;o=null===(a=n[e])||void 0===a?void 0:a.dataURL,delete n[e]}if(o){const e=o;setTimeout((()=>{URL.revokeObjectURL(e)}),1e3)}this.emit()}isUploading(e){const t=this.state,n=Object.keys(t);for(const o of n){if(e&&!e(o))continue;if(t[o])return!0}return!1}getBlockKey(e){return e}}const i=new o},519839:(e,t,n)=>{n.d(t,{As:()=>Ae,CG:()=>ve,Cn:()=>Se,Cq:()=>ce,Dj:()=>We,Eh:()=>ze,HG:()=>le,In:()=>re,JK:()=>ne,KA:()=>de,LI:()=>qe,MW:()=>Ue,Mf:()=>Ke,NB:()=>Ge,NM:()=>Ee,O:()=>Pe,OO:()=>Ie,Oq:()=>ge,Oz:()=>Ye,Rd:()=>je,VZ:()=>Fe,W4:()=>ue,XQ:()=>be,aK:()=>fe,d4:()=>Te,e2:()=>xe,f5:()=>Ve,fG:()=>ye,h6:()=>ie,hH:()=>Re,hc:()=>Be,l0:()=>we,mM:()=>_e,og:()=>Me,os:()=>Ce,oy:()=>se,qi:()=>He,rU:()=>$e,rq:()=>ke,t2:()=>Ne,wh:()=>De,wy:()=>Le,xE:()=>Qe,xY:()=>Ze,zE:()=>he,zv:()=>ae});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(581454);var o=()=>n(847249),i=()=>n(401497),r=()=>n(584262),a=()=>n(148307),s=()=>n(172385),l=()=>n(700500),c=()=>n(592269),d=()=>n(970013),u=()=>n(713998),p=()=>n(329199),m=()=>n(448801),g=()=>n(110192),f=()=>n(304740),v=()=>n(651124),h=()=>n(416504),_=()=>n(706665),b=()=>n(912720),y=()=>n(179034),S=()=>n(519831),w=()=>n(869558),k=()=>n(919709),I=()=>n(100622),x=()=>n(496603),A=()=>n(183558),C=()=>n(895876),T=()=>n(42803),M=()=>n(236030),P=()=>n(450510),B=()=>n(794959),R=()=>n(186445),E=()=>n(873050),D=()=>n(544073),N=()=>n(492414),L=()=>n(594794),O=()=>n(972435),U=()=>n(478726),F=()=>n(747100),V=()=>n(963575),j=()=>n(494043),z=()=>n(489348),H=()=>n(644914),W=()=>n(38337),q=()=>n(351360),K=()=>n(889097),G=()=>n(508496),$=()=>n(548821),Y=()=>n(712505),Q=()=>n(630116),Z=()=>n(502438),X=()=>n(308701),J=()=>n(193513),ee=()=>n(98302),te=()=>n(403905);function ne(e){switch(e){case"table":return W().EOV;case"board":return W().okd;case"calendar":return W().G1r;case"list":return W()._OD;case"gallery":return W().wx0;case"timeline":return W().dBr;default:return}}new Set(["gallery","list","calendar"]);const oe=(0,n(959013).YK)({addTypedItemTitle:{id:"collectionViewBlock.action.newItem.typedDatabaseTitle",defaultMessage:"New {singleItemName}"},addItemTitle:{id:"collectionViewBlock.action.newItem.nonTypedDatabaseTitle",defaultMessage:"New"}});function ie(e){return"collectionTypedView"===e.contextType?O().A.formatMessage(oe.addTypedItemTitle,{singleItemName:(0,C().$O)(e.databaseType)}):O().A.formatMessage(oe.addItemTitle)}function re(e){const t=Object.keys(e);return t.find((t=>{const n=e[t];return Boolean(n&&"status"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"select"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"person"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"multi_select"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"relation"===n.type)}))}function ae(e){const t=Object.keys(e);return t.find((t=>{const n=e[t];return Boolean(n&&"date"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"created_time"===n.type)}))||t.find((t=>{const n=e[t];return Boolean(n&&"last_edited_time"===n.type)}))}function se(e){return Object.keys(e).find((t=>{const n=e[t];return Boolean(n&&"geo_point"===n.type)}))}function le(e){return Object.keys(e).find((t=>{const n=e[t];return Boolean(n&&"date"===n.type)}))}function ce(e){const{collectionId:t,schema:n,property:o,targetCollectionStore:i,omitNewSchema:r}=e,a=n[o];if(!a)return;const s={newSchema:r?{}:{...n,[o]:void 0},deletedSchema:{[o]:n[o]}};if("relation"===a.type&&d().zO(a)&&a.property&&!(0,u().di)(a))if(d().zO(a)===t&&a.property!==o){const e=r?{}:{...s.newSchema,[a.property]:void 0},t={...s.deletedSchema,[a.property]:n[a.property]};s.newSchema=e,s.deletedSchema=t}else if(d().zO(a)!==t&&null!=i&&i.canEditCollection()&&i.isDefined()){const e=d().Dp(i.getModel()),t=r?{}:{...e,[a.property]:void 0},n={[a.property]:e[a.property]};s.otherCollectionId=i.id,s.otherCollectionSchema=t,s.otherCollectionDeletedSchema=n}return s}function de(e){const{deletedSchema:t,property:n}=e;if(t[n])return{updateSchema:{[n]:t[n]},updateDeletedSchema:{[n]:null}}}async function ue(e){const{schema:t,properties:n,property:o,propertyGroups:i,parentStore:r,spaceId:a,environment:s}=e,l=t[o];if(!l)return;if(d().st(l))return;const c=(0,A().Ay)(),u={...l,name:(0,g().Q)(l.name)};let p;if("button"===u.type&&u.automation_id){const e=Q().dn.createChildStore(r,{id:u.automation_id,spaceId:a,table:b().yB});await e.load();const t=e.getActionStores();await Promise.all(t.map((e=>e.load())));const n=(0,L().Z1)({environment:s,table:b().yB,spaceId:a});u.automation_id=n,p={sourceAutomationStore:e,targetAutomationId:n}}return{newProperty:c,newPropertySchema:u,newProperties:(()=>{if(!n)return[];const e=n.findIndex((e=>e.property===o)),t=n[e],i={property:c,visible:!0,width:t&&t.width},r=[...n];return r.splice(e+1,0,i),r})(),newPropertyGroups:(()=>{if(!i)return;const e=i.find((e=>(0,_().xT)({propertyGroup:e,propertyId:o})));if(!e)return;return(0,_().mK)({propertyGroups:i,propertyIds:[c],groupId:e.id,belowPropertyId:o})})(),automationUpdate:p}}function*pe(e){const{rootStore:t,depth:n=0}=e;if(t.getType()===l().xd.transclusionReference){const e=t.getTransclusionReferenceTargetStore();e&&(yield*pe({rootStore:e,depth:n}))}else{const o=t.getContentStores();for(const t of o)yield{blockStore:t,depth:n},t.isNavigableBlock()||!e.goIntoToggles&&j().BN(t)||(yield*pe({rootStore:t,depth:t.getType()===l().xd.columnList||t.getType()===l().xd.column||t.getType()===l().xd.transclusionContainer||t.getType()===l().xd.transclusionReference?n:n+1}))}}function me(e){const{rootStore:t,renderAdditionalBlocks:n,startBlockId:o,tableRenderMode:i}=e,r={image:void 0,blocks:[],isDefined:!0},a=pe({rootStore:t,goIntoToggles:void 0!==o});let s=0,c=0,d=!1;for(const{blockStore:u,depth:m}of a){if(o&&!d){if(u.id!==o)continue;d=!0}if(s++,s>p().Tl)return r;u.isDefined()||(r.isDefined=!1);const e=u.getType(),t=u.getModel();if(!e||!t)continue;const a=u.getProperties();if(t.isType(l().Ib)&&!r.image&&a){const t=(0,k().q4_)(a.source);if(t&&((0,f().rS)({url:t})||e===l().xd.image))return r.image={pointer:{table:"block",id:u.id},url:t},r}const g=(0,l().Mp)(e),v=u.isCalloutV2(),h=t.isType(l().EY)&&(!u.isEmptyTitle()||g||v);let _=u;o&&u.id===o&&"table_row"===e&&(_=_.getParentBlockStore());const b=n&&_&&void 0!==(0,B().F)({store:_,tableRenderMode:i});(h||b)&&c<p().Xz&&(r.blocks.push({blockStore:u,depth:m}),g||c++)}return r}function ge(e){const{image:t,blocks:n,isDefined:o}=me(e);return t?{image:t,blockIds:[],isDefined:o}:{image:void 0,blockIds:n.map((e=>e.blockStore.id)),isDefined:o}}function fe(e){var t,n;const{rootStore:o,renderAdditionalBlocks:i,theme:r}=e;if(i&&o.isCollectionView()&&(null===(t=o.getModel())||void 0===t||!t.hasWikiBlockUri())&&(null===(n=o.getAssociatedCollectionStore())||void 0===n||!n.isPageTreeCollection()))return{image:{url:"dark"===r?a().A.images.blockRendererCovers.collectionTableDarkPng:a().A.images.blockRendererCovers.collectionTableLightPng,pointer:{id:o.id,table:o.table,spaceId:o.getSpaceId()}},blockIds:[],isDefined:!0};const{image:s,blocks:c,isDefined:d}=me({rootStore:o,renderAdditionalBlocks:i,tableRenderMode:"image"});if(s)return{image:s,blockIds:[],isDefined:d};return{image:void 0,blockIds:c.filter((e=>{const{blockStore:t,depth:n}=e;return 0===n&&t.getType()!==l().xd.transclusionReference&&t.getType()!==l().xd.transclusionContainer})).map((e=>e.blockStore.id)),isDefined:d}}function ve(e,t){const n=e.isFullScreenStore.state,o=e.collectionViewStore();if(!o)throw new Error("Collection view store not defined.");const i=e.normalizedFormatStore.state,r=o.isDefined()&&o.getType(),a="board"===r,s="table"===r,l="feed"===r,c=i.collection_group_by,d=a?i.board_columns_by:void 0,u=c||d;if(u&&t)return 10;if(!n||u||l){const e=v().i3(i.inline_collection_first_load_limit,Boolean(c));if("load_limit"===e.type)return e.limit}if(a)return 20;if(n){if(s&&!Boolean(c)){const e=G().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.initial_limit)??50}return 50}return 20}function he(e){const{collectionViewStore:t,isFullScreen:n,currentResultCount:o,isMobile:i}=e,r=t.isDefined()&&t.getType(),a="board"===r,s="table"===r,l=t.getFormatStore().getKeyStore("collection_group_by").getValue(),c=a?t.getFormatStore().getKeyStore("board_columns_by").getValue():void 0;if((l||c)&&i)return 10;if(a)return 20;if(n){if(s&&!Boolean(l)){const e=G().default.getConfigKey("collection_virtualized_load_limits","table");return(null==e?void 0:e.increment_limit)??50}return 50}return o<=50?50:100}function _e(e,t){const n=e.collectionViewStore();if(!n)return!1;if("collectionSystemView"===e.contextType)return!1;const o=n.getFormatStore().getKeyStore("collection_group_by").getValue();return!t||Boolean(o)}function be(e){const{collectionContextStore:t,isFullScreen:n,reducerResult:o}=e;return o&&o.blockIds.length>0&&!((i=o)&&!i.hasMore)&&_e(t,n);var i}function ye(e){var t;const{collectionContextStore:n,environment:o,intl:i}=e,{device:r}=o;if(!n||r.isMobile&&!G().default.checkGate({gateName:"packaging_page_linking_mobile"})||!G().default.checkGate({gateName:"packaging_page_linking"}))return!1;const a=n.collectionStore(),s=null==a?void 0:a.getModel(),l=n.viewsModuleContextStore;if(!(a&&s&&l&&l.getViewModuleType()))return!1;const d=(0,E().Ay)(n,!1);return!!d&&c().Iw({filter:d,userFilterContext:{userId:o.currentUser.id,userTimeZone:(0,h().P)(),userStartOfWeek:R().XX.state},getRecordModel:a.getRecordModel,experimentService:G().default,intl:i,collectionModel:s,currentPageInRelatedCollection:null===(t=l.currentPageStore())||void 0===t?void 0:t.id,relativeVariableResult:n.relativeVariableStore.state})}function Se(e){const{query:t,schema:n}=e,{timeline_by:o,timeline_by_end:i}=t;if(o){const e=n[o];if(e&&"date"!==e.type)return!1}if(i){const e=n[i];if(e&&"date"!==e.type)return!1}return!0}function we(e){const{environment:t,isFullScreen:n,store:o,sizeObserver:i,viewType:r,collectionContextStore:a}=e,{device:s,WindowSizeStore:l}=t,c=o.isRootOrDirectChild(),d=!n&&!c,u=z().A.isBlockInTemplate(o),p=(0,T().n)(o);if("feed"===r&&s.isMobile)return{paddingLeft:22,paddingRight:22};if(d&&"gallery"===r)return{paddingLeft:1,paddingRight:1};if(!c||p){return{paddingLeft:0+(r&&a&&P().B2({blockStore:o,isFullScreen:Boolean(n),environment:t,collectionContextStore:a})?M().Fh:0),paddingRight:0}}if((0,F().cq)(o))return{paddingLeft:Y().PeekModePadding.horizontal[Y().default.state.mode],paddingRight:Y().PeekModePadding.horizontal[Y().default.state.mode]};if(s.isPhone)return{paddingLeft:l.getSafePaddingLeftPx((0,R().F8)(t)),paddingRight:l.getSafePaddingRightPx((0,R().F8)(t))};if(n)return{paddingLeft:96,paddingRight:96};if(!u&&!z().A.isBlockInPageSnapshot(o)||z().A.isBlockInWiki(o)){if(null!=a&&a.isFullScreenStore.state||(0,U().Ck)(o,void 0,t)||function(e,t){const{WindowSizeStore:n}=e;return n.state.width-((0,H().kf)(e)+(0,H().zo)(e,t)-(0,H().Ql)(e))<U().x6}(t,(0,F().cq)(o))||(0,F().RX)(o)&&!Y().default.isSidePeekClosingStore.state){const e=(0,R().F8)(t);return{paddingLeft:e,paddingRight:e}}{const e=i.rect.state.width;if(0===e)return;const n=(e-(U().x6-2*(0,R().F8)(t)))/2;return{paddingLeft:n,paddingRight:n}}}{const e=i.rect.state.width;if(0===e)return;const n=u&&(0,U().Ck)(o,$().Rr.InAppTemplatePreview,t)?20+X().DF:20,r=Math.max((e-U().x6)/2,n);return{paddingLeft:r,paddingRight:r}}}function ke(e){switch(e){case"large":return V().A.card.desktop.large.width;case"small":return V().A.card.desktop.small.width;default:return V().A.card.desktop.medium.width}}function Ie(e){let{collectionViewName:t,collectionViewType:n}=e;return t||O().A.formatMessage(te().X[n??"new"])}function xe(e){var t;return((null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getCollectionViewsStore().getValue())||[]).map((t=>Q().pS.createChildStore(e,{table:w().Gy,id:t}))).find((e=>"table"===e.getType()))}function Ae(e,t){const n=e.getType();if(!n)return!1;if(""===t)return!0;return-1!==Ie({collectionViewName:e.getName(),collectionViewType:n}).toUpperCase().indexOf(t.toUpperCase())}function Ce(e){const{newOptions:t,collectionId:n,property:o,schema:i}=e,r=i[o];if(!r)return;if(!d().lx(r)&&"status"!==r.type)return;const a=r.options||[],s=[],l=x().Bq(t),c=a.map((e=>e.value)),{beforeOps:u}=(0,m().i)(c,l);for(const[d,p]of Object.entries(u)){const e=a.find((e=>e.value===d));if(e)if(p){const t=a.find((e=>e.value===p));if(t){const i={pointer:{table:S().Vl,id:n},command:"keyedObjectListBefore",path:["schema",o,"options"],args:{value:e,before:{id:t.id}}};s.push(i)}}else{const t={pointer:{table:S().Vl,id:n},command:"keyedObjectListAfter",path:["schema",o,"options"],args:{value:e}};s.push(t)}}if("status"===r.type){const e=r.groups??[];for(const[i]of e.entries()){const e=t[i];if(!Array.isArray(e))return;const r=a.filter((t=>e.includes(t.value))).map((e=>e.id)),l={pointer:{table:S().Vl,id:n},command:"set",path:["schema",o,"groups",i,"optionIds"],args:r};s.push(l)}}return s.length>0?s:void 0}function Te(e){const{collectionId:t,property:n,propertySchema:o,schema:i,isAscending:r}=e;return Ce({newOptions:[...o.options||[]].map((e=>e.value)).sort(((e,t)=>e.localeCompare(t,void 0,{sensitivity:"base"})*(r?1:-1))),collectionId:t,property:n,schema:i})}function Me(e){const{collectionId:t,property:n,propertySchema:o,newOption:i,isAscending:r}=e,a=o.options||[],s=x().SL(a,(e=>e.value.localeCompare(i.value,void 0,{sensitivity:"base"})*(r?1:-1)>=0));return-1!==s?{pointer:{table:S().Vl,id:t},command:"keyedObjectListBefore",path:["schema",n,"options"],args:{value:i,before:a[s]}}:{pointer:{table:S().Vl,id:t},command:"keyedObjectListAfter",path:["schema",n,"options"],args:{value:i}}}function Pe(e){const{viewType:t,format:n}=e;return"board"===t?v().zl(n.board_cover):"gallery"===t?v().zl(n.gallery_cover):"timeline"===t&&v().w3(Boolean(n.timeline_show_table),n.timeline_table_properties||[])}function Be(e){const{viewType:t,property:n}=e;return"table"===t||("board"===t||"gallery"===t?"title"!==n:"calendar"===t&&"title"===n)}function Re(e){var t;const n=null==e?void 0:e.collectionViewStore(),o=null==n?void 0:n.getType();return null!=n&&null!==(t=n.getUnlistedStatus())&&void 0!==t&&t.isUnlisted&&null!=e&&e.isInlineViewStore.state?"center_peek":(null==e?void 0:e.normalizedFormatStore.state.collection_peek_mode)??(o?D().C9[o]:"side_peek")}function Ee(e){const{stores:t,phase:n}=Z().default.state;return!(n===Z().SelectionPhase.Selected&&t.indexOf(e)>=0)&&(Y().default.state.open&&Y().default.isSidePeekOpen()&&Y().default.state.targetStore.id===e.id)}function De(e,t){return t?{background:I().Ay.blueWithAlpha(.025),boxShadow:e.collectionTableOutlineUltraThinBlueInputBoxShadow,borderRadius:6}:{borderRadius:6}}function Ne(e){const t=e.collectionStore();if(!t)return;const n=t.getParentBlockStore();return n?(0,N().Ay)({store:n,fullyQualified:!1,pageVisitSource:r().y8.Breadcrumb}):void 0}function Le(e){const{environment:t,store:n,mainEditorCurrentBlockStore:o,collectionContextStore:i,fullyQualified:a,overridePeekMode:l,showMoveTo:c}=e,d=t.RouterStore.state.route;return!l&&(0,J().r)(i)?(0,N().Ay)({store:n,fullyQualified:a,pageVisitSource:(null==i?void 0:i.getPageVisitSourceOverride())??r().y8.Expand,showMoveTo:c}):o?(0,N().Ay)({store:o,collectionViewId:null!=i&&i.isFullScreenStore.state?null==i||null===(u=i.collectionViewStore())||void 0===u?void 0:u.id:void 0,fullyQualified:a,peekViewBlockId:n.id,peekMode:Oe({collectionContextStore:i,overridePeekMode:l}),pageVisitSource:(null==i?void 0:i.getPageVisitSourceOverride())??r().y8.PeekOpen,showMoveTo:c}):"chat"===d.name?(0,s().EY)({currentRoute:d,pageId:n.id,pageVisitSource:(null==i?void 0:i.getPageVisitSourceOverride())??r().y8.PeekOpen,isMobile:t.device.isMobile,peekModeParam:Oe({collectionContextStore:i,overridePeekMode:l})}):void 0;var u}function Oe(e){const{collectionContextStore:t,overridePeekMode:n}=e,o=null==t?void 0:t.getViewType();let i;i=null!=t&&t.isUnlistedViewStore.state&&null!=t&&t.isInlineViewStore.state?"center_peek":(null==t?void 0:t.normalizedFormatStore.state.collection_peek_mode)??(o?D().C9[o]:void 0);const r=n??(0,Y().getPeekModeFromCollectionPeekModeFormat)(i);return(0,Y().getUrlParamFromPeekMode)(r)}function Ue(e){var t;const n=null===(t=e.getCollectionViewStores().find((e=>"page"===e.getType())))||void 0===t?void 0:t.getFormat().page_pointer;if(n)return Q().Bv.createChildStore(e,{table:y().ev,id:null==n?void 0:n.id,spaceId:e.getSpaceId()})}async function Fe(e){let{environment:t,collectionStore:n}=e;const o=n.getParentBlockStore();if(await(null==o?void 0:o.load()),null==o||!o.isCollectionView())throw new Error("collectionViewBlockStore not found");const i=o.getCollectionViewStores();if(0===i.length)throw new Error("collectionViewStores not found");const r=i[0];await r.load();const a=new(K().A)(t);return a.setContext({type:"collectionView",collectionViewBlockStore:o,collectionStore:n,collectionViewStore:i[0],pageVisitSourceOverride:void 0}),a}function Ve(e){var t,n;let{environment:o,collectionContextStore:i,overrideViewType:r}=e;if(o.device.isMobile)return!1;if("table"!==(null===(t=i.collectionViewStore())||void 0===t?void 0:t.getType()))return!1;if(i.isInHomeWidgetStore.state||i.isUnlistedViewStore.state)return!1;if("feed"===r)return!1;const{currentUserStore:a}=q().default.state,s=Boolean(i.permissionScopesStore.state.canEditContent||"collectionTypedView"===i.contextType&&(null===(n=i.collectionViewBlockStore())||void 0===n?void 0:n.canEdit()));return Boolean(a)&&s}function je(e,t){let n=t;return e.every((e=>{if(e.getType()===l().xd.page||e.getType()===l().xd.collectionViewPage){var t;const o=null===(t=(0,ee().S)(e,!1))||void 0===t||null===(t=t.getBlockStore())||void 0===t?void 0:t.id;return!!o&&(void 0===n&&(n=o),o===n)}return!1}))}function ze(e){return void 0!==e&&e>=0}function He(e){return void 0!==e?e+1:0}function We(e){let{store:t,collectionContextStore:n}=e;return"collectionSystemView"===n.contextType?n.collectionStore():t.getAssociatedCollectionStore()}function qe(e){return"page"===e?"page_view":"chat"===e?"chat_view":"custom"===e?"custom_view":e}function Ke(e){const{collectionStore:t,sourceCollectionViewBlockStore:n,currentCollectionViewBlockStore:o,currentCollectionViewStore:i,constraints:r}=e;let a=x().hS([...o.getCollectionViewStores(),...n.getCollectionViewStores()],(e=>e.id)).filter((e=>{var n;return(null===(n=e.getCollectionStore())||void 0===n?void 0:n.id)===t.id&&e.id!==i.id&&"page"!==e.getType()&&"form_editor"!==e.getType()}));if(null!=r&&r.viewType&&(a=[...a.filter((e=>e.getType()===r.viewType)),...a.filter((e=>e.getType()!==r.viewType))]),null!=r&&r.viewPointer){const{id:e}=r.viewPointer,t=a.find((t=>t.pointer.id===e))||Q().pS.createChildStore(n,r.viewPointer);a=[t,...a.filter((t=>t.pointer.id!==e))]}return a}function Ge(e,t){var n,o,i;if(t.isMobile)return!0;const r=e.collectionViewBlockStore(),a=null==r||null===(n=r.getAllSourceCollectionStores())||void 0===n?void 0:n.filter((e=>!e.isSyncedCollection())),s=a&&1===a.length,l=Boolean(null===(o=e.collectionStore())||void 0===o?void 0:o.isPageTreeCollection()),c=Boolean(null===(i=e.collectionViewBlockStore())||void 0===i?void 0:i.canEditMembership()),d=Boolean(e.isInHomeWidgetStore.state);return!s||l||!c||d}function $e(e){let{isMobile:t}=e;return t?52:41}function Ye(e){const t=(0,i().DP)();return(0,o().K8)((()=>{const n=e.collectionViewBlockStore();if(!n)return;const o=n.findRecordStoreUIAncestor((e=>Boolean(e instanceof Q().Bv&&e.getRecordStoreUIParent()&&e.getFormat().block_color&&!e.isCollectionView()))).ancestor;if(o&&o instanceof Q().Bv){const e=o.getType(),n=o.getFormat().block_color;return e===l().xd.callout?(0,I().ed)(n,t):(0,I().k5)(n,t)}}),[e,t],{useDeepEqual:!0,debugName:"inheritedBlockColorStore"})}let Qe=function(e){return e[e.Hidden=0]="Hidden",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded",e}({});function Ze(e){return e===Qe.Collapsed||e===Qe.Hidden}},520257:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},521099:(e,t,n)=>{n.d(t,{j:()=>o});const o=44},521358:(e,t,n)=>{n.d(t,{QQ:()=>K,rW:()=>q,bC:()=>z,nD:()=>G,Fr:()=>H});n(16280),n(944114),n(898992),n(354520),n(672577),n(803949),n(581454);var o=n(296540),i=()=>n(66689),r=()=>n(128914),a=()=>n(148307),s=()=>n(743176),l=()=>n(452951),c=()=>n(212439),d=()=>n(735384),u=()=>n(206267),p=()=>n(179034),m=()=>n(96689),g=()=>n(854150),f=()=>n(959013),v=()=>n(100622),h=()=>n(496603),_=()=>n(534177),b=()=>n(284371),y=()=>n(128427),S=()=>n(449506),w=()=>n(235191),k=()=>n(901389),I=()=>n(896628),x=()=>n(847249),A=()=>n(401497),C=()=>n(745266),T=()=>n(317182),M=n(474848);function P(e){const{relatedDependencies:t}=e,n=(0,A().DP)(),i=(0,x().K8)((()=>{const e=null==t?void 0:t.viewDeps;return e?e.map((e=>({name:e.getName(),icon:e.getFormat().collection_view_icon,type:e.getType()}))):[]}),[t.viewDeps]),r=o.useCallback((e=>(0,M.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,M.jsx)(C().h,{color:"light",viewIcon:e.icon,viewType:e.type,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},size:13}),e.name]},e.name)),[]),a=[{key:"entity_type",header:void 0},{key:"entities",header:void 0}];return(0,M.jsx)(T().A,{columns:a,rows:(()=>{const e=[],o=null==t?void 0:t.propertyDeps;if(o.length>0){const t=o.map((e=>(0,M.jsxs)("span",{style:{marginRight:10,display:"inline-block"},children:[(0,M.jsx)(s().zB,{icon:e.icon,type:e.type,size:13,style:{display:"inline-block",verticalAlign:"middle",marginRight:2,marginBottom:2},theme:n}),e.name]},e.name))),i=(0,M.jsx)(f().sA,{id:"appTemplates.featureBundleDelete.properties",defaultMessage:"{count, plural, one {1 property} other {{count} properties}}",values:{count:t.length}});e.push({key:"bundledProperties",columns:[[i],t]})}if(i.length>0){const t=i.map((e=>r(e))),n=(0,M.jsx)(f().sA,{id:"appTemplates.featureBundleDelete.views",defaultMessage:"{count, plural, one {1 view} other {{count} views}}",values:{count:t.length}});e.push({key:"bundledViews",columns:[[n],t]})}return e})(),hideHeader:!0,cellStyle:{width:"40%"}})}var B=()=>n(16006),R=()=>n(601734),E=()=>n(862292),D=()=>n(342),N=()=>n(609429),L=()=>n(972435),O=()=>n(695625),U=()=>n(878423),F=()=>n(630116),V=()=>n(313892);const j=(0,f().YK)({multiDBNameConnector:{id:"appTemplateHelpers.multiDBNameConnector",defaultMessage:"and"}});function z(e){const{environment:t,collectionViewBlockStore:n,collectionStore:o,databaseType:a,propertyMapping:s,typedPropertySchemas:l,transaction:c}=e;if(o.isTypedCollection())throw new Error("Collection is already typed");const d=i().Fh[a].blockUri,p=a,m={};Object.entries(s).forEach((e=>{let[n,i]=e;if(!i||i===r().Ul)return;const a=l[n],s=o.getSchema()[i];if(!s)throw new Error("Mapped property does not exist");a&&a.type!==s.type&&(w().Hj({environment:t,collectionStore:o,property:i,type:a.type,transaction:c}),m[i]=s.type)}));const g=Object.entries(s).filter((e=>{let[t,n]=e;return n===r().Ul})).map((e=>{let[t,n]=e;return t})),f={};g.forEach((e=>{const t=l[e];t&&(f[e]=t)})),Object.entries(f).forEach((e=>{let[n,i]=e;const r=w().IL({environment:t,collectionStore:o,collectionViewArgs:void 0,propertyName:i.name,propertyType:i.type,transaction:c});s[n]=r})),I().zA({stores:[n],update:{app_id:u().JW(),app_config_uri:d,app_uri_map:{[d]:n.id,[p]:o.id}},transaction:c}),I().zA({stores:[o],update:{app_config_uri:p,app_uri_map:s,mapped_property_types:m},transaction:c})}function H(e){var t;const{environment:n,collectionContextStore:o,transaction:i}=e,r=o.collectionStore(),a=o.collectionViewBlockStore();if(!r||!a)return;const s=(null===(t=r.getFormat())||void 0===t?void 0:t.mapped_property_types)??{};Object.entries(s).forEach((e=>{let[t,o]=e;w().Hj({environment:n,collectionStore:r,property:t,type:o,transaction:i})})),I().zA({stores:[a],update:{app_id:void 0,app_config_uri:void 0,app_uri_map:void 0},transaction:i}),I().zA({stores:[r],update:{app_config_uri:void 0,app_uri_map:void 0,mapped_property_types:void 0},transaction:i}),(0,y().Y)({environment:n,database_type:void 0,collectionContextStore:o})}async function W(e){const{environment:t,blockStore:n}=e,o=n.getFormat().app_id;if(!o)return[n];const i=await S().callApi({eventName:"getCollectionViewBlocksByAppId",environment:t,data:{spaceId:n.getSpaceId(),appId:o}}),r=n.getParentStore();return"success"!==i.type||void 0===r?[n]:i.data.result.map((e=>F().Bv.createChildStore(r,{table:p().ev,id:e.blockId,spaceId:n.getSpaceId()})))}async function q(e){const{environment:t,block:n,action:o}=e,r=n.getFormat().app_config_uri||"";if(r===i().d0&&(N().e.locallyMutatedTasksDatabase=!0),V()._q.includes(r)){const e=await async function(e){const{environment:t,blockStore:n}=e,o=n.getParentStore();if(!o)return[n];const i=await W({environment:t,blockStore:n}),r=o.id;return i.filter((e=>{var t;return(null===(t=e.getParentStore())||void 0===t?void 0:t.id)===r}))}({environment:t,blockStore:n});if(e.length<=1)return[n];const i=function(e,t,n){if("delete"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.message",defaultMessage:"Are you sure you want to delete {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.description",defaultMessage:"{appName} work closely together. You can delete them together, or you might encounter issues after deletion.",values:{appName:n}}),allLabel:(0,M.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.allLabel",defaultMessage:"Delete {appName}",values:{appName:n}})}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)("div",{style:{maxWidth:"300",textOverflow:"ellipsis",overflowX:"hidden"},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDeleteAlert.oneLabel",defaultMessage:"Delete {dbName} only",values:{dbName:t.getTitleValue()}})}),actionIcon:d().I};if("move"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.message",defaultMessage:"Are you sure you want to move {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.description",defaultMessage:"{appName} work closely together. You can move them together, or you might encounter issues after separating.",values:{appName:n}}),allLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.allLabel",defaultMessage:"Move together"}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBMoveAlert.oneLabel",defaultMessage:"Only move {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:l().Z};if("duplicate"===e)return{message:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.message",defaultMessage:"Are you sure you want to duplicate {dbName}?",values:{dbName:t.getTitleValue()}}),description:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.description",defaultMessage:"{appName} work closely together. You can duplicate them together, or you might encounter issues after separating.",values:{appName:n}}),allLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.allLabel",defaultMessage:"Duplicate together"}),cancelLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.cancelLabel",defaultMessage:"Cancel"}),oneLabel:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.multiDBDuplicateAlert.oneLabel",defaultMessage:"Only duplicate {dbName}",values:{dbName:t.getTitleValue()}}),actionIcon:c().V};throw(0,_().HB)(e)}(o,n,function(e){if(1===e.length)return e[0].getTitleValue().toString();let t="";for(let n=0;n<e.length-1;n++)t+=e[n].getTitleValue(),e.length>2?t+=", ":t+=" ";return t+=`${L().A.formatMessage(j.multiDBNameConnector)} ${e[e.length-1].getTitleValue()}`,t}(e)),r=await function(e,t){const{message:n,description:o,allLabel:i,cancelLabel:r,oneLabel:s,actionIcon:l}=e;return new Promise((e=>{k().ui({showCancel:!1,keepFocus:!1,message:(0,M.jsxs)("div",{style:{textAlign:"center"},children:[(0,M.jsxs)("span",{style:{display:"inline-block",verticalAlign:"-0.15em",position:"relative"},children:[(0,M.jsx)("img",{src:a().A.images.appPackages.projectsIconSvg,style:{width:"1.4em",height:"1.4em"}}),l({width:"0.9em",height:"0.9em",position:"absolute",fill:v().Tj.red,right:"-0.3em",bottom:"0.05em"})]}),(0,M.jsx)("div",{style:{fontWeight:b().Wy.semibold,margin:"0.7em"},children:n}),(0,M.jsx)("div",{style:{fontSize:14},children:o})]}),items:"delete"===t?[{label:s,color:"red",onAccept:()=>{e("one")}},{label:i,onAccept:()=>{e("all")}},{label:r,onAccept:()=>{e("cancel")}}]:[{label:i,color:"blue",onAccept:()=>{e("all")}},{label:s,onAccept:()=>{e("one")}},{label:r,onAccept:()=>{e("cancel")}}],handleCancel:()=>{e("cancel")}})}))}(i,o);if("cancel"===r)return"user_canceled";const s=[n];if("all"===r)for(const t of e)if(t.id!==n.id){const e=O().T.findSelectablesFromIds([t.id]);e.length>0?s.push(e[0].props.store):s.push(t)}return s}return[n]}async function K(e){var t;const{environment:n,collectionViewBlockStore:o,appParentStore:i}=e,r=o.getFormat().app_id,a=r?await S().callApi({eventName:"getCollectionViewBlocksByAppId",environment:n,data:{spaceId:o.getSpaceId(),appId:r}}):void 0,s=null===(t=U().A.state.caches[D().oB])||void 0===t?void 0:t.inMemoryRecordCache;return(0,_().O9)(null==a?void 0:a.type)&&"failed"!==(null==a?void 0:a.type)&&"success"===(null==a?void 0:a.type)?a.data.result.map((e=>{const t=F().Bv.createChildStore(i,{table:p().ev,id:e.blockId,spaceId:o.getSpaceId()});return s?t.clone(s):t})).filter((e=>e.isType("collection_view")||e.isType("collection_view_page"))):[o]}async function G(e){var t;let{environment:n,property:o,collectionContextStore:i,theme:r,from:a}=e;const{appTemplatesSetupActions:l,appConfigs:c}=await R().Aw.load(),d=i.collectionStore(),u=i.collectionViewBlockStore(),v=null==u?void 0:u.getCollectionViewStores();if(!(d&&u&&v&&u.getFormat().app_config_uri))return!1;const _=d.getSchema()[o],y=d.getFormat().app_config_uri;if(!_||!y)return!1;const S=(0,V().lS)(c(),y);if(!S)return!1;const w=h().oE([...Object.keys(d.getPropertyMapping()||{}),...Object.keys((null===(t=u.getFormat())||void 0===t?void 0:t.app_uri_map)||{})]),I=(0,V().Ts)(w,S),x=h().oE([I.find((e=>e.uri===o))]),A=await E().T.formulas.load(),C=(0,V().LS)({validDependencies:x,dependencies:I,collectionStore:d,collectionViewBlockStore:u,viewStores:v,formulasModule:A}),{validDependencies:T}=C;if(0===T.length)return!1;const D=null==u?void 0:u.getParentStore();if(!d||!u||!D||D.table!==m().NX&&D.table!==p().ev&&D.table!==g().yK)return!1;const N=await K({environment:n,collectionViewBlockStore:u,appParentStore:D}),L=[{label:(0,M.jsx)(f().sA,{id:"appTemplatesHelpers.bundledPropertyDelete.deleteMessage",defaultMessage:"{count, plural, one {Delete} other {Delete all}}",values:{count:T.length}}),color:"red",onAccept:()=>l.removeTypedDependencies({environment:n,dependencies:T,appCollectionViewBlockStores:N,from:a})}],O=T.length>1&&(0,M.jsx)(P,{relatedDependencies:C,collectionContextStore:i});return k().ui({message:(0,M.jsxs)("div",{style:{textAlign:"center"},children:[(0,M.jsx)("span",{style:{fontWeight:b().Wy.medium},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.bundledPropertyDelete.message",defaultMessage:"Delete {property} property for everyone on {databaseName}?",values:{databaseName:(0,M.jsx)(B().A,{style:{display:"inline",fontWeight:b().Wy.medium},shouldWrap:!0,store:d}),property:(0,M.jsxs)("span",{children:[(0,M.jsx)(s().zB,{icon:_.icon,type:_.type,size:18,style:{verticalAlign:"middle",display:"inline-block",marginRight:3,marginBottom:2},theme:r}),_.name]})}})}),T.length>1&&(0,M.jsx)("div",{style:{margin:"0.17em"},children:(0,M.jsx)("span",{style:{fontSize:13,fontWeight:b().Wy.light},children:(0,M.jsx)(f().sA,{id:"appTemplateHelpers.bundledPropertyDelete.description",defaultMessage:"These related entities will also be deleted since they work together."})})})]}),description:O,showCancel:!0,keepFocus:!0,innerStyle:{width:480},items:L}),!0}},522200:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(178624).R)({key:"spreadsheet_prototype_store",namespace:n(419494).Bq,important:!1,trackingType:"necessary"})},522827:(e,t,n)=>{n.d(t,{KN:()=>u,QZ:()=>m,ax:()=>p,t6:()=>g,yW:()=>f});n(898992),n(354520),n(737550);var o=()=>n(289915),i=()=>n(410486),r=()=>n(970013),a=()=>n(799829),s=()=>n(179034),l=()=>n(519831),c=()=>n(630116),d=()=>n(685889);function u(e,t){return(0,a().GN)(e,t)}function p(e,t,n,o){const i=e.relativeVariableStore.state;if(i){const e=i[n.id],r=null==e?void 0:e[t];if(r){return c().Bv.createChildStore(o,{table:s().ev,id:r,spaceId:n.spaceId})}}}function m(e){var t;const{blockStore:n,collectionId:r,appConfigUri:s,variable:l,schema:c}=e;if((null===(t=n.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r)return!1;const d=a().n$[s][l].reducer,u=d.getProperty(),p=c[u],m=n.getPropertyValue(u),g=d.getPropertyFilter(c,l);return!!(0,o().cM)({filter:g,filterType:"status",relativeVariableValues:void 0})((0,i().po)({propertySchema:p,propertyValue:m}))}function g(e,t,n){if((0,o().Pq)(t.filter)){if(((0,o().gc)(t.filter)?(0,o().Rh)(t.filter):[]).some((e=>"relative"===e.type)))return function(e,t,n){const o=n.getSchema()[t];return!(!o||!(0,r().nC)(o))&&(0,a().GN)((0,d().D3)(o,e),(0,d().LQ)(o,n))}(e,t.property,n)}return!0}function f(e,t,n){return!!e&&Object.values(e).some((e=>{if("groups"===e.type&&"relation"===e.groupBy.type){const o=e.groupBy.property,i=t[o];if(i.collection_pointer){const e=c().md.createChildStore(n,{table:l().Vl,id:i.collection_pointer.id}),t=e.getFormat().app_config_uri;return t&&a().n$[t]&&e.isDefined()&&(0,a().GN)(e.getSchema(),t)}}return!1}))}},522945:(e,t,n)=>{n.d(t,{$C:()=>s,Ay:()=>l});var o=n(296540),i=()=>n(484714),r=()=>n(60382),a=()=>n(592678);let s={x:0,y:0,moved:!1,device:"mouse"};function l(){const e=(0,i().v3)();(0,o.useEffect)((()=>(e.device.isMobile?(window.addEventListener("touchstart",c),window.addEventListener("touchmove",d),window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)):(window.addEventListener("mousedown",u),window.addEventListener("mousemove",p)),()=>{e.device.isMobile?(window.removeEventListener("touchstart",c),window.removeEventListener("touchmove",d),window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p)):(window.removeEventListener("mousedown",u),window.removeEventListener("mousemove",p))})),[e.device.isMobile])}function c(e){const t=e.touches[0];s={moved:!1,x:t.clientX,y:t.clientY,device:(0,a().Qn)(t)}}function d(e){const{x:t,y:n}=s,o=e.touches[0];(0,r().A)(t,n,o.clientX,o.clientY)>a().tC[(0,a().Qn)(o)]&&(s={...s,moved:!0})}function u(e){s={moved:!1,x:e.clientX,y:e.clientY,device:"mouse"}}function p(e){const{x:t,y:n}=s;(0,r().A)(t,n,e.clientX,e.clientY)>a().tC.mouse&&(s={...s,moved:!0})}},522986:(e,t,n)=>{n.d(t,{VN:()=>f,XQ:()=>h,gu:()=>_,ho:()=>g,iF:()=>b,qS:()=>v,tY:()=>y,vF:()=>S});var o=n(440961),i=()=>n(908006),r=()=>n(970013),a=()=>n(713998),s=()=>n(919709),l=()=>n(57618),c=()=>n(620689),d=()=>n(778417),u=()=>n(319975),p=()=>n(725614),m=()=>n(751156);function g(e){const{environment:t,blockPropertyValueOverlayStore:n,store:a,additionalStores:g=[],property:f,format:v,preventClearSelection:h,insertChar:_,uploadFiles:b,disableHorizontalEdgeScroll:y,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:x,readOnly:A,sizing:C,formQuestionStore:T,onClose:M}=e;let P=(null==w?void 0:w.normalizedSchemaStore.state)??a.getSchema();k&&(P=k);const B=P[f],R=l().A.findBlockPropertyValue(a,f,v);let E=e.rect;const D=null==R?void 0:R.getNode();if(D&&(c().hT({element:D,environment:t,vertical:{reveal:"closest"},horizontal:y?void 0:{reveal:"closest"},scrollerContext:null==R?void 0:R.getScrollerContext()}),!E)){const e=o.findDOMNode(D);e instanceof Element&&(E=e.getBoundingClientRect())}if(!E)return;const N=a.clone();if(n.setState({isOpen:!0,store:a,clonedStore:N,additionalStores:g,property:f,format:v,rect:E,preventClearSelection:h,insertChar:_,uploadFiles:b,isNewBlock:S,collectionContextStore:w,collectionSchema:k,mode:I,collectionsBulkActionsToolbarStore:x,readOnly:A,sizing:C,formQuestionStore:T,onClose:M}),!x||"title"!==(null==B?void 0:B.type)&&"text"!==(null==B?void 0:B.type)||null==x||x.setState({textStoresBeingEdited:[...g,a]}),B&&r().YW(B.type)){h||d().IU({environment:t});const e=N.getPropertyStore(f);_&&m().createAndCommit({userAction:"blockPropertyValueOverlayActions.open",environment:t,canUndo:!0,perform:n=>{u().R9({environment:t,store:e,value:s().x9d(_),transaction:n})}}),i().default.afterNextFlush((()=>{i().default.afterNextFlush((()=>{i().default.afterNextFlush((()=>{p().setSelectionAtEnd({store:e})}))}))}))}else h||d().IU({environment:t}),p().clear({preventDismissMobileKeyboard:h,environment:t})}function f(e){const{environment:t,blockPropertyValueOverlayStore:n}=e,o=n.state;var i;o.isOpen&&(o.preventClearSelection||d().IU({environment:t}),o.onClose&&o.onClose(),n.reset(),null===(i=o.collectionsBulkActionsToolbarStore)||void 0===i||i.setState({textStoresBeingEdited:[]}))}function v(e){const{stores:t,property:n,transaction:o}=e,i=t[0].getPropertyStore(n),r=(0,a().wu)(i.getValue());for(const s of t)u().R9({environment:s.environment,store:s.getPropertyStore(n),value:(0,a().rN)(!r),transaction:o})}function h(e){const{blockPropertyValueOverlayStore:t}=e,n=t.state;if(n.isOpen){const{store:t,property:r}=n,a=l().A.findBlockPropertyValue(t,r);var o,i;if(null!=a&&a.props.onTab)null==a||null===(o=(i=a.props).onTab)||void 0===o||o.call(i);else f(e)}}function _(e){const{blockPropertyValueOverlayStore:t}=e,n=t.state;if(n.isOpen){const{store:t,property:r}=n,a=l().A.findBlockPropertyValue(t,r);var o,i;if(null!=a&&a.props.onUntab)null==a||null===(o=(i=a.props).onUntab)||void 0===o||o.call(i);else f(e)}}function b(e){const{blockPropertyValueOverlayStore:t}=e,n=t.state;if(n.isOpen){const{store:t,property:r}=n,a=l().A.findBlockPropertyValue(t,r);var o,i;if(null!=a&&a.props.onEnter)null==a||null===(o=(i=a.props).onEnter)||void 0===o||o.call(i);else f(e)}}function y(e){const{blockPropertyValueOverlayStore:t}=e,n=t.state;if(n.isOpen){const{store:t,property:r}=n,a=l().A.findBlockPropertyValue(t,r);var o,i;if(null!=a&&a.props.onEsc)null==a||null===(o=(i=a.props).onEsc)||void 0===o||o.call(i);else f(e)}}function S(e){const{blockPropertyValueOverlayStore:t}=e,n=t.state;if(n.isOpen){const{store:t,property:r}=n,a=l().A.findBlockPropertyValue(t,r);var o,i;if(null!=a&&a.props.onBgClick)null==a||null===(o=(i=a.props).onBgClick)||void 0===o||o.call(i);else f(e)}}},523584:(e,t,n)=>{n.d(t,{B1:()=>p,Bj:()=>d,Fr:()=>u,k2:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=()=>n(496603),i=()=>n(711771);const r=3,a=5,s=new Set(["a","an","and","are","as","at","be","but","by","for","if","in","is","it","of","on","or","that","the","to","was","will","with"]);function l(e,t,n){return e.length>=r}function c(e,t,n){return e.length>=a&&.2}function d(e){return e.split(/[^\w]+/g).filter((e=>!s.has(e)))}async function u(){const{default:e}=await i().f.load(),t=new e({fields:["text","id","inits"],storeFields:["block"],searchOptions:{prefix:l,fuzzy:c},tokenize:(e,t)=>e.split(/\s/g),processTerm:(e,t)=>{const n=e.toLowerCase();if(!s.has(e))switch(t){case"text":{const e=d(n).filter((e=>e.length>r));return(0,o().sb)([n,...e])}case"inits":return[...Array(e.length).keys()].slice(0,e.length-r+1).map(((e,t)=>n.slice(t)));default:return n}}});return{index:t,getAllBlocks:()=>t.search(e.wildcard)}}function p(e,t,n){const o=e.normalize().toLowerCase(),i=t.normalize().toLowerCase();if(o===i)return n.exactMatch;const r=i.indexOf(o);return 0===r?n.prefixMatch:" "===i[r-1]?n.wordPrefixMatch:r>-1?n.substringMatch:1}},524165:(e,t,n)=>{n.d(t,{MH:()=>a,oQ:()=>l,uZ:()=>s});var o=()=>n(534177),i=()=>n(154807),r=()=>n(812412);const a=28,s=24;function l(e){const t=(0,r().dV)(e);let n;switch(t){case"xSmall":case"small":case"medium":n=300;break;case"large":n=380;break;case"xLarge":n=i().YG+2*s;break;default:(0,o().HB)(t)}return{totalWidth:n,widthMinusPadding:n-2*s}}},524450:(e,t,n)=>{n.d(t,{A:()=>i});n(581454);class o extends(()=>n(757695))().default{constructor(){super(...arguments),this.pause=()=>{this.setState({active:!1,onActive:[]})},this.resume=()=>{this.state.onActive.map((e=>e())),this.setState({active:!0,onActive:[]})}}getInitialState(){return{active:!0,onActive:[]}}whenActive(e){this.state.active?e():this.setState({...this.state,onActive:n(496603).sb([...this.state.onActive,e])})}}const i=new o},524539:(e,t,n)=>{n.d(t,{Ce:()=>h,Ym:()=>b,_P:()=>y,kl:()=>_});n(898992),n(354520),n(672577),n(803949),n(581454),n(737550),n(296540);var o=()=>n(763884),i=()=>n(179034),r=()=>n(496603),a=()=>n(720665),s=()=>n(116008),l=()=>n(776894),c=()=>n(554060),d=()=>n(351360),u=()=>n(630116),p=()=>n(95313),m=()=>n(579627),g=()=>n(436572),f=n(474848);const v=10;function h(e){const{environment:t,movedItems:n,previousParentPointers:o,moveToLocation:i,disableSuccessToast:r,numSubitems:a}=e,d=n.some((e=>{var t;const n=null==o||null===(t=o[e.id])||void 0===t?void 0:t.id,i=e.getParentId();return!(!n||n===i)})),u=n.some((e=>{var t;return"space"===(null==o||null===(t=o[e.id])||void 0===t?void 0:t.table)}));if(!r&&d){var p;g().D6({label:(0,l().lD)({environment:t,movedItems:n,moveToLocation:i,numSubitems:a}),right:(0,f.jsx)(c().F,{moveToLocation:i,movedItems:n,hideUndoButton:u})});const e=s().A.state.open?null===(p=s().A.state)||void 0===p?void 0:p.blockId:void 0;s().A.state.open&&e&&n.find((t=>t.id===e))&&s().A.setState({open:!1,rect:new DOMRect})}}function _(e){const{environment:t,transaction:n,moveToStore:o,targetBlocks:i,from:r}=e,{currentUserStore:a}=d().default.state;null!=a&&a.isDefined()&&o.canEdit()&&!o.canAdmin()&&i.forEach((e=>{if(e.canAdmin())return p().to(t,{from:r}),m().zP({transaction:n,store:e,environment:t,permissionItems:[{type:"user_permission",user_id:a.id,role:"editor"}]})}))}async function b(e,t,n){const i=await y(e,t),a=r().sb([n,...i]).slice(0,v);o().K.set({userId:e.environment.currentUser.id,key:S(t),value:JSON.stringify(a)})}async function y(e,t){const n=o().K.get({userId:e.environment.currentUser.id,key:S(t)});if(n){const t=(0,a().$l)(n);if(t){const n=await Promise.all(t.map((async t=>{const n=u().Bv.createChildStore(e,{table:i().ev,id:t});return await n.load(),n.canEdit()})));return t.filter(((e,t)=>n[t]))}}return[]}function S(e){return`recentMoveToTargets2:${e}`}},524702:(e,t,n)=>{n.d(t,{A:()=>Ue});n(898992),n(430670),n(581454);var o=n(296540),i=()=>n(908006),r=()=>n(484714),a=()=>n(792485),s=()=>n(700500),l=()=>n(955825),c=()=>n(604995),d=()=>n(416504),u=()=>n(493720),p=()=>n(756005),m=()=>n(379632),g=()=>n(179034),f=()=>n(161479),v=()=>n(919709),h=()=>n(191772),_=()=>n(643707),b=()=>n(959013),y=()=>n(100622),S=()=>n(496603),w=()=>n(720665);function k(e,t){n(989423).vd(e,"keyboard_annotation",t)}var I=()=>n(319975),x=()=>n(482287),A=()=>n(315097),C=()=>n(261374),T=()=>n(863188),M=()=>n(725614),P=()=>n(347469),B=()=>n(751156),R=()=>n(838256),E=()=>n(662453),D=()=>n(602098),N=()=>n(488923),L=()=>n(90881),O=()=>n(102172),U=()=>n(780942),F=()=>n(555776),V=()=>n(116008),j=()=>n(964345),z=()=>n(712030),H=()=>n(921855),W=()=>n(713972),q=()=>n(792540),K=()=>n(972435),G=()=>n(231722),$=()=>n(962845),Y=()=>n(792002),Q=()=>n(267856),Z=()=>n(645873),X=()=>n(963589),J=()=>n(393255),ee=()=>n(110955),te=()=>n(295169),ne=()=>n(407054),oe=()=>n(525569),ie=()=>n(227440),re=()=>n(559378),ae=()=>n(77246),se=()=>n(569777),le=()=>n(508496),ce=()=>n(735372),de=()=>n(77272),ue=()=>n(711319),pe=()=>n(375447),me=()=>n(574012),ge=()=>n(630116),fe=()=>n(871399),ve=()=>n(620149),he=()=>n(24157),_e=()=>n(998109),be=()=>n(846955),ye=()=>n(11048),Se=()=>n(477450),we=()=>n(99042),ke=()=>n(682372),Ie=()=>n(719147),xe=()=>n(847249),Ae=n(474848);const Ce=(0,b().YK)({typeTextPlaceholder:{defaultMessage:"Press ‘/’ for commands…",id:"text.commandsMenuNotOpen.placeholder"},expandedPlaceholder:{defaultMessage:"Write, press ‘space’ for AI, ‘/’ for commands…",id:"text.expandedPlaceholder"},postBodyPlaceholder:{defaultMessage:"Share your announcement or update...",id:"text.postBody.placeholder"},typeTextAiPlaceholder:{defaultMessage:"Press ‘/’ for commands, ‘space’ for AI…",id:"text.commandsMenuNotOpen.placeholder.textAi"},filterPlaceholder:{defaultMessage:"Type to filter…",id:"text.commandsMenuOpen.placeholder"}}),Te=o.forwardRef((function(e,t){const{store:i,style:u,placeholderStyle:h,parentStore:b,id:E,tagName:Z,canTruncate:Ie,className:Te,clipboardActions:Ne,disabled:Le,disableInsertText:Oe,disableBrowserSpellcheck:Ue,disableMentions:Fe,disabledMentionTypes:Ve,disableSuggestEdit:je,disableSlashCommands:ze,disableEmojiCommands:He,disableEquationInteraction:We,disableStyleAnnotations:qe,disableInsertedDeletedAnnotations:Ke,disableSuggestionAnnotations:Ge,disableShiftEnter:$e,disableFilters:Ye,disableEmbedMenu:Qe,disableSelectAllBlocks:Ze,disableSelectionDrag:Xe,disableDrag:Je,disableRightMarginHoverStyling:et,disableMoveCursorToEndOnFocus:tt,formulasModule:nt,formulaValueTypes:ot,hasTemporaryDiscussionOnProperty:it,inPageFind:rt,isDiscussionInput:at,legacyTransclusionParentStore:st,legacyTransclusionActions:lt,maxChars:ct,mentionSectionOrdering:dt,markdownLinkifyIt:ut,onChange:pt,onBlur:mt,onFocus:gt,onClick:ft,onEnter:vt,onTab:ht,onUntab:_t,onCut:bt,onCopy:yt,onPasteFiles:St,onMoveUp:wt,onMoveDown:kt,placeholder:It,renderWhiteSpaceWhenEmptyOnAndroid:xt,trackEditsToUserFlow:At,tinyMceMicrosoftWordPasteFilter:Ct,selectableBlockActions:Tt,usePopupForMentionOnMobile:Mt}=e,Pt=(0,r().v3)(),Bt=(0,a().S)(),Rt=(0,X().X)("caret_based_dmp_experiment"),Et=Le?void 0:e.pasteBehavior,Dt=o.useRef(null),Nt=o.useMemo((()=>function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return(0,n(558842).Px)(Dt,...t)}),[]),Lt=(0,o.useCallback)((e=>{Dt.current=e}),[]),Ot=o.useRef(!1),Ut=(0,n(401497).DP)(),{isMobile:Ft,isMobileNative:Vt}=(0,r().Y0)(),jt=(0,o.useRef)(null),zt=(0,o.useRef)(null);(0,o.useEffect)((()=>{zt.current&&(jt.current=zt.current.parentElement)}),[zt]),(0,o.useEffect)((()=>()=>{P().OZ(i)}),[i]);const Ht=(0,xe().K8)((()=>{if(!F().A.state.isHovered||"right_margin_button"!==F().A.state.hoverEntryPoint)return!1;const e=fe().default.state,t=e.isOpen?e.currentStore:void 0;return(null==t?void 0:t.id)===i.id}),[i],{debugName:"isRightMarginCommentActionHovered"}),Wt=(0,xe().K8)((()=>{if("none"===rt.type)return;const e=ce().wb.state;return(0,q().wc)(e)&&e.id===i.id?e:void 0}),[rt.type,i],{debugName:"inPageFindFocusedResult"}),qt=(0,xe().K8)((()=>at||je?"default":null!=Bt&&Bt.pageStore?ae().Uv.getMode(null==Bt?void 0:Bt.pageStore):"default"),[je,at,null==Bt?void 0:Bt.pageStore],{debugName:"editorMode"}),Kt=(0,xe().K8)((()=>{if(Le)return!1;if(ve().l.state)return!1;const e=null==Bt?void 0:Bt.publicEditModeStore.state;return e&&e.hasPublicPermission?at?"view"!==e.permission:"comment"===e.permission&&"suggest"===qt||"edit"===e.permission:!(!i.canComment()||"suggest"!==qt)||i.canEdit()}),[Le,at,Bt,i,qt],{debugName:"canEdit"}),Gt=(0,xe().K8)((()=>function(e,t){return!e&&t.canComment()}(Le,i)&&!Kt),[Kt,Le,i],{debugName:"canExclusivelyComment"}),$t=(0,p().Yz)(Ve),Yt=(0,o.useCallback)((()=>{var e;return(null===(e=Dt.current)||void 0===e?void 0:e.getNode())||void 0}),[]),Qt=(0,o.useCallback)((()=>{var e;null===(e=Yt())||void 0===e||e.blur()}),[Yt]),Zt=i.pointer.table===g().ev?ge().Bv.createChildStore(i,i.pointer):void 0,Xt=(0,xe().K8)((()=>(0,Y().j_)(i)),[i],{debugName:"isEditing"}),Jt=(0,xe().K8)((()=>(0,Y().D9)(i)),[i],{debugName:"isSelectionEndpoint"}),en=(0,xe().K8)((()=>"on"===le().default.getEligibleGroup({experimentId:"prioritize_slash_menu_block_placeholder",defaultGroup:"control"})),[],{debugName:"aiTextPlaceholderMessage"}),tn=(0,xe().K8)((()=>!(null==Bt||!Bt.arePublicEditCompletionsEnabledStore.state)&&!Ft),[null==Bt?void 0:Bt.arePublicEditCompletionsEnabledStore,Ft],{debugName:"isExpandedPlaceholder"}),nn=(0,X().X)("ai_co_editing"),on=(0,xe().K8)((()=>{if(tn)return!1;if(Ft||Vt)return!1;if(Le)return!1;const e=null==Zt?void 0:Zt.getType();return Boolean(e&&(0,s().ZW)(e))&&"contains-selection"===Xt&&!(Zt&&(0,D().u)(Zt))}),[Le,Ft,Vt,Xt,Zt,tn],{debugName:"shouldRenderInteractiveAiPlaceholder"}),rn=(0,xe().K8)((()=>{const e=V().A.state;return V().A.calculateMultitextSelection(),e.open&&"inline"===e.type&&Boolean((0,$().xk)(e.multiSelection,i))}),[i],{debugName:"isNewDiscussionMenuTarget"}),an=(0,xe().K8)((()=>{const e=Me();if(!e)return!1;const t=oe().default.state;if("assistantCompletionPopup"===t.type){const e=te().default.getSessionContext(t.sessionId);if(e&&e.getAllPendingOperations().length>0)return!1}return Boolean((0,$().xk)(e,i))}),[i],{debugName:"isCompletionPopupTarget"}),sn=(0,xe().K8)((()=>{var e;return se().A.isOpen()&&(null===(e=(0,G().H7)(se().A.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store)===i}),[i],{debugName:"isInlineEquationOverlayTarget"}),ln=(0,xe().K8)((()=>{const e=pe().A.state;return!!e.open&&(e.textStore===i&&e)}),[i],{debugName:"isMentionMenuTarget"}),cn=(0,xe().K8)((()=>{const e=ee().A.state;return!!e.open&&(e.textStore===i&&e)}),[i],{debugName:"isSlashMenuTarget"}),dn=(0,xe().K8)((()=>{const e=ue().A.state;if(!e.open)return!1;if(!e.focusLinkInput&&!e.focusTitleInput)return!1;if(!Xt)return!1;const t=(0,G().H7)(e.savedTextSelectionState.multiSelection);return!!t&&t.selection}),[Xt],{debugName:"linkingMenuSelection"}),un=(0,xe().K8)((()=>ce().qu.state),[],{debugName:"findAndReplaceOpenQuery"}),pn=(0,xe().K8)((()=>{const e=ne().A.state;if(!e.isActive)return;const{clickedPageAnnotation:t}=e;if(!t)return;const{parentStore:n,pageAnnotation:o}=t;if(n!==Zt)return;const r=i.getValue();return r?r.map((e=>v().qXl(e)?[e[0],e[1].flatMap((e=>v().jIt(e)&&e===o?[o,v().CXp()]:[e]))]:e)):void 0}),[Zt,i],{debugName:"pageAnnotationBlockMenu"}),mn=(0,xe().K8)((()=>null==Zt?void 0:Zt.getRemoveSuggestion()),[Zt],{debugName:"blockRemoveSuggestion"}),gn=(0,o.useCallback)((()=>{const e=Boolean(dn);if(Jt){if(e)return;return(0,Y().Do)(i)}if(Xt&&!e){const e=he().default.state;if("editing"===e.mode){const t=(0,$().cR)("Text",e.multiSelection);if(t){const{selection:e}=t,n=i.getValue(),o=v().qAZ(n).length;return{type:"contain",selection:{startIndex:Math.min(e.startIndex,o),endIndex:Math.min(e.endIndex,o)}}}}}}),[Xt,Jt,dn,i]),fn=(0,o.useCallback)(((e,t)=>{const n="inline"===Et;(0,Q().D)({type:e,environment:Pt,blockStore:Zt,store:i,isInCollectionView:n,eventTimeStamp:t})}),[Et,Zt,i,Pt]),vn=(0,o.useCallback)((e=>{const t=mn;return e&&t?H().xh({textValue:e,discussionId:t.discussionId}):e}),[mn]),hn=(0,xe().K8)((()=>null==Zt?void 0:Zt.getAddLineBreakSuggestion()),[Zt],{debugName:"addLineBreakSuggestion"}),_n=(0,xe().K8)((()=>null==Zt?void 0:Zt.getRemoveLineBreakSuggestion()),[Zt],{debugName:"removeLineBreakSuggestion"}),bn=(0,o.useCallback)((()=>{if(rn)return H().Fm({store:i});if(it){const e=V().A.getMultiSelection(),t=i.getValue();if(e)return v().Mwp({textValue:t,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[v().Ifu.TemporaryComment]});if("block"===V().A.getType()){const e=v().qAZ(i.getValue());return v().Mwp({textValue:t,selection:{startIndex:0,endIndex:e.length},annotation:[v().Ifu.TemporaryComment]})}}if(sn)return H().kw({store:i,equationStore:se().A});if(ln)return H().k5({store:i,stateType:{type:"mentionMenu",state:ln}});if(cn)return H().k5({store:i,stateType:{type:"slashMenu",state:cn}});if(Ht&&et){const e=v().qAZ(i.getValue());return H().PB({store:i,temporaryAnnotation:v().Ifu.TemporarySelection,multiSelection:{start:{store:i,index:0},end:{store:i,index:e.length}}})}if(dn)return H().Vr({store:i,selection:dn});if(un&&"none"!==rt.type&&!i.inMemoryRecordCache.isSyntheticAssistantData){return H().nu({textValue:i.getValue(),blockId:i.id,textProps:rt,find:un,currentFocusedResult:Wt})}if(an)return H().PB({store:i,temporaryAnnotation:v().Ifu.TemporarySelection,multiSelection:Me()});if(pn)return pn;if(Xt){const e=he().default.state;if("editing"===e.mode){const t=(0,G().H7)(e.multiSelection);if(t){const{textValue:e,modified:n}=H().K8({store:i,selection:t.selection});if(n)return e}}}const e=(0,L().getBlockSuggestion)(U().T,i.id);return e?e.titleTextValue:i.getValue()}),[i,Wt,an,Xt,sn,ln,rn,Ht,cn,dn,un,pn,rt,et,it]),yn=(0,o.useCallback)((()=>{let e=bn();return e=H().Xu({store:i,textValue:e}),e=vn(e),e}),[bn,i,vn]),Sn=(0,o.useCallback)((()=>{const e=v().qAZ(yn());return{startIndex:e.length,endIndex:e.length}}),[yn]);!function(e){const t=(0,o.useRef)({}),i=(0,n(396182).I)(),r=(0,xe().K8)((()=>{const t=v().Cok(e),n=Date.now();return S().oE(t.map((e=>{const t=(0,c().q8)(e,(0,d().P)()),o=null==t?void 0:t.toMillis();if(!o)return null;const i=o-n;return i>0&&i<w().nD?o:null})))}),[e],{debugName:"activeTimestamps"});(0,o.useEffect)((()=>{for(const n in t.current)r.includes(parseInt(n,10))||(clearTimeout(t.current[n]),delete t.current[n]);for(const n of r){const e=n.toString();e in t.current||(t.current[e]=setTimeout((()=>i("Text2","Text2/useRerenderReminders")),n-Date.now()))}const e=t.current;return()=>{for(const t in e)clearTimeout(e[t]),delete e[t]}}),[r,i])}((0,xe().K8)(yn,[yn],{debugName:"textValue"})),(0,o.useEffect)((()=>{Pt.KatexStore.loadIfNeeded(yn)}),[Pt,yn]);const wn=(0,o.useCallback)((()=>{(0,Y().j_)(i)||tt||M().setSelectionAtEnd({store:i})}),[tt,i]),kn=(0,o.useCallback)((()=>{var e;return Boolean(null===(e=Dt.current)||void 0===e?void 0:e.isComposing)}),[]),In=(0,o.useRef)(e);(0,o.useEffect)((()=>{In.current=e}),[e]);const xn=(0,o.useCallback)((()=>In.current),[]);(0,o.useImperativeHandle)(t,(()=>({getProps:xn,focus:wn,isComposing:kn})),[xn,wn,kn]);const An=(0,o.useCallback)((()=>0===v().RQ(yn()).length),[yn]),Cn=(0,xe().K8)((()=>{var e;const t=null==Zt?void 0:Zt.getNavigableBlockStore({skipCurrent:!0}),n=(null==t?void 0:t.isPost())&&1===(null==t||null===(e=t.getModel())||void 0===e?void 0:e.getContentLength());return Boolean(n)}),[Zt],{debugName:"showPostPlaceholder"}),Tn=(0,o.useCallback)((()=>{var e;if(on)return en?K().A.formatMessage(Ce.typeTextAiPlaceholder):K().A.formatMessage(Ce.typeTextPlaceholder);if(It)return It;if(Le||i.id===(null===(e=j().kj.state)||void 0===e?void 0:e.id))return" ";if(Cn)return K().A.formatMessage(Ce.postBodyPlaceholder);if(!ze&&"contains-selection"===Xt&&Kt){if(ee().A.state.open)return K().A.formatMessage(Ce.filterPlaceholder);if(!Ft)return tn?K().A.formatMessage(Ce.expandedPlaceholder):K().A.formatMessage(Ce.typeTextPlaceholder)}return" "}),[i,Kt,Le,Xt,Ft,It,on,ze,Cn,tn,en]),Mn=(0,o.useCallback)((e=>()=>{let t=yn(),n=!1;if(Ie&&void 0!==ct){v().qAZ(t).length>ct&&(t=v().Ffo(t,0,ct),n=!0)}if(function(e,t){const n=t&&e;if(n)return!!function(){var e,t,n,o;const i=null===(e=me().A.state.packageName)||void 0===e?void 0:e.includes("com.google.android.inputmethod.latin"),r=(null===(t=me().A.state.activeLocale)||void 0===t?void 0:t.includes("ko"))||(null===(n=me().A.state.activeLocale)||void 0===n?void 0:n.includes("zh"))||(null===(o=me().A.state.activeLocale)||void 0===o?void 0:o.includes("ja"));return Boolean(i&&!r)}();return!1}(Boolean(xt),An()))return m().A.renderToStaticMarkup((0,Ae.jsx)("span",{className:_().F8,style:{position:"relative"},placeholder:Tn(),children:(0,Ae.jsx)("br",{})}));const r=H().S5({environment:Pt,textValue:t&&{value:t,spaceId:(0,f().e)(i.pointer.spaceId)},parentStore:b||i,disableHover:!1,disableStyleAnnotations:Boolean(qe),disableInsertedDeletedAnnotations:Boolean(Ke),disableDateStyleAnnotations:Boolean(null==Ve?void 0:Ve.date),disableSuggestionAnnotations:Boolean(Ge),disabled:!Kt,theme:e,emojiType:(0,z().FN)(Pt),katex:Pt.KatexStore.getKatex(),parentBlockId:Be(i),renderedPageBlockId:null==Bt?void 0:Bt.pageStore.id,formulaValueTypes:ot??[]}),a=Boolean(hn),s=(null==hn?void 0:hn.discussionId)||(null==_n?void 0:_n.discussionId),l=(0,Ae.jsxs)(o.Fragment,{children:[r,n&&Re(e),s&&Ee(e,a?"add":"remove",s)]});return m().A.renderToStaticMarkup(l)}),[Kt,Ie,Ke,qe,Ge,null==Ve?void 0:Ve.date,yn,Tn,_n,Pt,hn,ct,null==Bt?void 0:Bt.pageStore.id,b,i,xt,An,ot]),Pn=(0,o.useCallback)((async()=>{var e;if(at||null!==(e=Dt.current)&&void 0!==e&&e.isComposing())return;if(!nn)return;const t=i.getAncestorBlockStoreAtRootPath();if(!t)return;const n=t.getNavigableBlockStore();if(!n||!(0,O().BP)(n,Pt,Pt.device))return;(await(0,N().uZ)()).submitEvent({type:"blockUpdated",environment:Pt,blockStore:t})}),[Pt,at,i,nn]),Bn=(0,o.useCallback)((()=>{const e=v().qAZ(yn());return 1===e.length&&("　"===e[0]||" "===e[0])}),[yn]),Rn=(0,o.useCallback)((e=>{if(fn("typing_lag",e.timeStamp),Kt){if(B().createAndCommit({userAction:"Text.handleMutation",environment:Pt,canUndo:!0,perform:t=>{let n=i;const{multiSelection:o}=e;if(o&&!(0,G().KP)(o))n=o.start.store;else if(st&&lt&&!e.insertedLine&&!e.isComposing&&!e.deletedLine){const e=lt.maybeAutofixLegacyTransclusionProperty({environment:Pt,store:n,parentStore:st,transaction:t});e&&(n=e)}if(I().kE({transaction:t,environment:Pt,store:n,newValue:e.newValue,editorMode:qt,disableMentions:Boolean(Fe),disabledMentionTypes:$t,disableSlashCommands:Boolean(ze),disableEmojiCommands:Boolean(He),disableFilters:Ye||e.isComposing,multiSelection:o,usePopupForMentionOnMobile:Mt,mentionSectionOrdering:dt,enableCaretBasedDMP:Rt}),e.insertedLine){const e="editing"===he().default.state.mode&&he().default.state.multiSelection;e&&C().Ve({transaction:t,environment:Pt,multiSelection:e,editorMode:qt})}At&&!t.isEmpty()&&R().VS(Pt,At,t)}}),Pn(),Zt){if(Zt.getType()){const e=Zt.getSchema()||{},[t,n]=i.path;if("properties"===t&&"string"==typeof n){e[n]&&!Ot.current&&(Ot.current=!0)}}}if(pt){let e;Bn()&&(e=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32})),pt(e)}}}),[pt,Bn,Kt,Pt,i,Zt,At,Pn,Ye,Fe,ze,He,dt,Mt,$t,qt,st,lt,fn,Rt]),En=(0,o.useCallback)((()=>{M().setSelectionComposing(Pt,!1),"suggest"!==qt&&I().US({environment:Pt,store:i,usingMultiSelection:!0}),null==pt||pt(),on&&Bn()?De({from:"spacebar",environment:Pt}):B().createAndCommit({userAction:"Text.runAllFiltersAfterCompositionEnd",environment:Pt,canUndo:!0,perform:e=>{Ye||T().Ul({environment:Pt,store:i,transaction:e,editorMode:qt,selectableBlockActions:Tt})}})}),[Pt,qt,pt,on,Bn,i,Ye,Tt]),Dn=(0,o.useCallback)((e=>{var t;if(!Kt)return;if(null!==(t=Dt.current)&&void 0!==t&&t.isComposing())return;fn("typing_delete",e.timeStamp);const n=he().default.state;if("editing"===n.mode){const t=n.multiSelection;t.start.store===i&&B().createAndCommit({userAction:"Text.handleDelete",environment:Pt,canUndo:!0,perform:n=>{A().wT({environment:Pt,multiSelection:t,deleteForwards:!0,transaction:n,event:e,editorMode:qt})}})}Pe(),null==pt||pt()}),[Kt,Pt,pt,i,qt,fn]),Nn=(0,o.useCallback)((e=>{var t;if(!Kt)return;if(null!==(t=Dt.current)&&void 0!==t&&t.isComposing())return;const n=he().default.state;if("editing"!==n.mode)return;const o=n.multiSelection;(0,G().kM)(o)&&(0,Y().NG)(i,{startIndex:o.start.index,endIndex:o.end.index})&&Dn(e)}),[Kt,i,Dn]),Ln=(0,o.useCallback)((e=>{var t;if(!Kt||null!==(t=Dt.current)&&void 0!==t&&t.isComposing())return;fn("typing_backspace",e.timeStamp);const n=he().default.state;if("editing"===n.mode){const t=n.multiSelection;if(t.start.store===i){if(A().CZ({device:Pt.device,event:e,multiSelection:t}))return;B().createAndCommit({userAction:"Text.handleBackspace",environment:Pt,canUndo:!0,perform:n=>{A().wT({environment:Pt,multiSelection:t,deleteForwards:!1,transaction:n,event:e,editorMode:qt})}})}}Pe(),null==pt||pt(e)}),[Kt,Pt,pt,i,qt,fn]),On=(0,o.useCallback)((e=>{var t;if(!Kt)return;if(fn("typing_enter",e.timeStamp),W().Xs(e),null!==(t=Dt.current)&&void 0!==t&&t.isComposing())return;const n=he().default.state;if("editing"===n.mode)if(vt)vt(e);else{const{multiSelection:e}=n;B().createAndCommit({userAction:"Text.handleEnter",environment:Pt,canUndo:!0,perform:t=>{C().Ve({environment:Pt,multiSelection:e,transaction:t,editorMode:qt})}}),Pe()}null==pt||pt(e)}),[Kt,Pt,pt,qt,fn,vt]),Un=(0,o.useCallback)((e=>{var t;if(!Kt)return;if(null!==(t=Dt.current)&&void 0!==t&&t.isComposing())return;const n=he().default.state;if("editing"===n.mode){const{device:t}=Pt;if(!("shiftKey"in e)||e.shiftKey&&!t.isIOS){if($e)return;B().createAndCommit({userAction:"Text.handleShiftEnter",environment:Pt,canUndo:!0,perform:e=>{I().$D({environment:Pt,editorMode:qt,string:"\n",multiSelection:n.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:dt})}}),null==pt||pt(e)}else On(e)}}),[Kt,Pt,pt,qt,On,$e,dt]),Fn=(0,o.useCallback)((e=>{if(Kt)if("suggest"!==qt){if(fn("typing_tab",e.timeStamp),ht){ht(e)||e.preventDefault()}else e.preventDefault(),B().createAndCommit({userAction:"Text.handleTab",environment:Pt,canUndo:!0,perform:e=>{I().Mf({environment:Pt,shiftKey:!1,transaction:e})}}),Pe();null==pt||pt()}else e.preventDefault()}),[Kt,Pt,pt,qt,fn,ht]),Vn=(0,o.useCallback)((e=>{if(Kt)if("suggest"!==qt){if(fn("typing_untab",e.timeStamp),_t){_t(e)||e.preventDefault()}else e.preventDefault(),B().createAndCommit({userAction:"Text.handleUntab",environment:Pt,canUndo:!0,perform:e=>{I().Mf({environment:Pt,shiftKey:!0,transaction:e})}}),Pe();null==pt||pt()}else e.preventDefault()}),[Kt,Pt,pt,qt,fn,_t]),jn=(0,o.useCallback)(((e,t)=>{Kt&&(t.preventDefault(),x().po({environment:Pt,annotation:e}),Pe(),null==pt||pt(),k(Pt,{type:v()._XS(e)}))}),[Kt,Pt,pt]),zn=(0,o.useCallback)((e=>jn(["h",de().A.getMostRecentlyUsedColor()],e)),[jn]),Hn=(0,o.useCallback)((e=>jn(["b"],e)),[jn]),Wn=(0,o.useCallback)((e=>jn(["i"],e)),[jn]),qn=(0,o.useCallback)((e=>jn(["s"],e)),[jn]),Kn=(0,o.useCallback)((e=>jn(["_"],e)),[jn]),Gn=(0,o.useCallback)((e=>jn(["c"],e)),[jn]),$n=(0,o.useCallback)((e=>{H().HP({environment:Pt,event:e,textValue:yn(),editorNode:Yt(),store:i,parentStore:b,canEdit:Kt,disableEquationInteraction:We}),ft&&ft(e)}),[Pt,Yt,yn,i,b,Kt,We,ft]),Yn=(0,o.useCallback)((e=>{Zt&&H().PP({environment:Pt,event:e,textValue:yn(),editorNode:Yt(),store:i,parentStore:Zt,canEdit:Kt})}),[Pt,Yt,yn,i,Zt,Kt]),Qn=(0,o.useCallback)((e=>{H().sp({environment:Pt,event:e,textValue:yn(),editorNode:Yt(),store:i,parentStore:b,canEdit:Kt})}),[Pt,Yt,yn,i,b,Kt]),Zn=(0,o.useCallback)((e=>{H().W5({environment:Pt,event:e,textValue:yn(),editorNode:Yt(),store:i,parentStore:b,canEdit:Kt})}),[Pt,Yt,yn,i,b,Kt]),Xn=(0,o.useCallback)((e=>{if(Kt)return bt?(bt(e),void Pe()):void(Ne&&(Ne.cutWithMaybeConfirmation({environment:Pt,event:e,markdownLinkifyIt:ut}),Pe(),null==pt||pt()));e.preventDefault()}),[Kt,Pt,ut,Ne,pt,bt]),Jn=(0,o.useCallback)((e=>{Kt&&(B().createAndCommit({userAction:"Text.handlePaste",environment:Pt,canUndo:!0,perform:t=>{null==Ne||Ne.paste({environment:Pt,event:e,disableEmbedMenu:Boolean(Qe),transaction:t,onPasteFiles:St||Ne.pasteFilesForBlocks,formulasModule:nt,markdownLinkifyIt:ut,tinyMceMicrosoftWordPasteFilter:Ct})}}),Pe(),null==pt||pt())}),[Kt,Pt,Ne,ut,pt,Qe,nt,St,Ct]),eo=(0,o.useCallback)((e=>{const t=Zt&&Zt.getType(),n=Boolean(t&&(0,s().ZW)(t));if(" "===e.key&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&An()&&(on||tn)&&!i.inMemoryRecordCache.isMockTextStore&&n&&ie().A.state.online)return e.preventDefault(),void De({from:"spacebar",environment:Pt});Kt||e.metaKey&&"c"===e.key||e.preventDefault()}),[Kt,Pt,An,tn,Zt,on,i.inMemoryRecordCache.isMockTextStore]),to=(0,o.useCallback)((e=>{!function(e,t,n,o,i){if(t)return void t(e);null==i||i.copy({environment:o,event:e,markdownLinkifyIt:n})}(e,yt,ut,Pt,Ne)}),[yt,ut,Pt,Ne]),no=(0,o.useCallback)((e=>{!function(e,t,n){if(n)return void n(e);e.preventDefault(),B().createAndCommit({userAction:"Text.handleMoveUp",environment:t,canUndo:!0,perform:n=>{I().$P({environment:t,transaction:n,direction:"up"})&&e.preventDefault()}})}(e,Pt,wt)}),[Pt,wt]),oo=(0,o.useCallback)((e=>{!function(e,t,n){if(n)return void n(e);B().createAndCommit({userAction:"Text.handleMoveDown",environment:t,canUndo:!0,perform:n=>{I().$P({environment:t,transaction:n,direction:"down"})&&e.preventDefault()}})}(e,Pt,kt)}),[Pt,kt]),io=(0,xe().K8)((()=>(0,l().AH)((()=>{let e={maxWidth:"100%",width:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",caretColor:Gt?y().Ay.transparent:Ut.text.primary,...u};return An()&&(e.minHeight="1em",e={...e,color:Ut.text.primary,WebkitTextFillColor:Ut.text.tertiary,...h,...Cn&&{color:Ut.text.quaternary,WebkitTextFillColor:Ut.text.quaternary}}),Ft&&Kt&&(Xt?e.WebkitUserModify="read-write-plaintext-only":(e.userSelect="none",e.WebkitUserSelect="none",e.whenFocusedEditable={userSelect:"text",WebkitUserSelect:"text",WebkitUserModify:"read-write-plaintext-only"})),e})(),Te)),[Kt,Gt,Ft,Xt,An,h,u,Cn,Ut,Te],{debugName:"classNameAndStyle"}),ro=(0,o.useCallback)((()=>{if(!ee().A.state.open&&!ze){const e=he().default.state;"editing"===e.mode&&B().createAndCommit({userAction:"TourTutorial.slashTooltip",environment:Pt,canUndo:!0,perform:t=>{I().$D({environment:Pt,editorMode:qt,string:J().jz,multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!1,disableEmojiCommands:!0,transaction:t})}})}}),[Pt,qt,ze]),ao=(0,xe().K8)((()=>!!(0,be().tourIsActive)(be().default.state)&&!(ze||"contains-selection"!==Xt||!Kt||Ft)),[Ft,Xt,Kt,ze],{debugName:"isPageContentForTourTutorial"}),so=(0,xe().K8)((()=>{const e=Bt&&Bt.publicEditModeStore.state;return!!re().A.isActiveDemo()&&!(Ft||!e||(null==Zt?void 0:Zt.id)!==re().A.getCurrentStepBlockId())}),[Bt,Zt,Ft],{debugName:"isPageContentForDemoTutorial"}),lo=(0,o.useCallback)(((e,t)=>{const n=Mn(Ut),o=(0,Ae.jsx)(Se().A,{...io,debugName:"Text",store:i,onBlur:mt,onFocus:gt,spellCheck:!Gt&&!Ue,getHtml:n,getSelection:gn,onMutation:Rn,onCompositionStart:()=>function(e,t){M().setSelectionComposing(t,!0),null==e||e()}(pt,Pt),onCompositionEnd:En,onMouseOver:Qn,onMouseOut:Zn,placeholder:Tn(),suppressNewlineEvents:!0,onSelect:t,disableContentEditableWhenNotEditingTextOnMobile:!0,expandSelectionOnTripleClick:!0,isDisabled:Le,id:E,tagName:Z,...e,ref:zt,leafRef:Nt(Lt,e.leafRef)});return so?(0,Ae.jsx)(we().F,{step:"demo_text_block",children:o}):ao?(0,Ae.jsx)(_e().n,{step:"create_page_type_slash",showSidebarOverlays:!1,onNextButtonClick:ro,children:o}):o}),[so,ao,Gt,Pt,io,mt,gt,gn,Rn,Ue,Le,Tn,En,Qn,Zn,Lt,E,Nt,Z,pt,ro,Mn,Ut,zt,i]);return(0,Ae.jsx)(ye().A,{name:"Text2",children:(0,Ae.jsx)(ke().F,{...e,clearBrowserSelection:Qt,getEndSelection:Sn,canInsertText:!Le&&!Oe,onClick:$n,onContextMenu:Yn,onDelete:Dn,onDeleteToEndOfLine:Nn,onDeleteNextWord:Nn,onBackspace:Ln,onEnter:On,onShiftEnter:Un,onTab:Fn,onUntab:Vn,onToggleHighlight:zn,onToggleBold:Hn,onToggleItalics:Wn,onToggleStrike:qn,onToggleUnderline:Kn,onToggleCode:Gn,onCopy:to,onCut:Xn,onPaste:Jn,onKeypress:eo,onMoveUp:no,onMoveDown:oo,render:lo,disableStyleAnnotations:qe,canSelectAllBlocks:!Ze,canSelectionDrag:!Xe,disableDrag:Je,topBottomPadding:9,onBlur:Qt})})}));function Me(){const e=oe().default.state;return("closedWithContext"===e.type||"completionPopup"===e.type&&"initialPromptForAIBlock"!==e.stage||"assistantCompletionPopup"===e.type)&&"textSelection"===e.context.type?e.context.textSelection:void 0}function Pe(){i().default.flush()}function Be(e){if(e.table===g().ev)return e.id;const{ancestor:t}=e.findRecordStoreUIAncestor((e=>{let{table:t}=e;return t===g().ev}));return t?t.id:void 0}function Re(e){return(0,Ae.jsxs)(Ie().A,{disableUnderline:!0,style:{color:e.text.secondary},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["…",(0,Ae.jsx)("span",{children:(0,Ae.jsx)(b().sA,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]})}function Ee(e,t,n){const o={textDecoration:"add"===t?"":"line-through",WebkitTextFillColor:"initial",..."add"===t?(0,h().B0)(e):(0,h().tR)(e)},i=(0,l().ED)({type:"add"===t?"update":"remove"}),r=(0,l().wV)({discussionId:n});return(0,Ae.jsx)("span",{style:o,className:`${_().gy} ${_().Do} ${i} ${r}`,children:"add"===t?"+":"-"})}async function De(e){const{completionInitialPromptActions:t}=await E().aiDependency.load();await t.toggleInitialPrompt(e)}const Ne=(0,b().YK)({typeTextPlaceholder:{defaultMessage:"Press ‘/’ for commands…",id:"text.commandsMenuNotOpen.placeholder"},expandedPlaceholder:{defaultMessage:"Write, press ‘space’ for AI, ‘/’ for commands…",id:"text.expandedPlaceholder"},postBodyPlaceholder:{defaultMessage:"Share your announcement or update...",id:"text.postBody.placeholder"},typeTextAiPlaceholder:{defaultMessage:"Press ‘/’ for commands, ‘space’ for AI…",id:"text.commandsMenuNotOpen.placeholder.textAi"},filterPlaceholder:{defaultMessage:"Type to filter…",id:"text.commandsMenuOpen.placeholder"}}),Le=new(n(496506).default)((()=>"on"===le().default.getEligibleGroup({experimentId:"prioritize_slash_menu_block_placeholder",defaultGroup:"control"})),{debugName:"aiTextPlaceholderMessageStore"});class Oe extends(()=>n(254751))().A{constructor(e){super(e),this.editor=null,this.mergeEditorRefs=(0,u().RJ)(),this.triggeredAnalytics=!1,this.reminderTimers={},this.onTutorialNextButtonClick=()=>{if(!ee().A.state.open&&!this.props.disableSlashCommands){const e=he().default.state;"editing"===e.mode&&B().createAndCommit({userAction:"TourTutorial.slashTooltip",environment:this.props.environment,canUndo:!0,perform:t=>{I().$D({environment:this.props.environment,editorMode:this.getEditorMode(),string:J().jz,multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!1,disableEmojiCommands:!0,transaction:t})}})}},this.renderContentContainer=(e,t)=>{const n=this.getThemeAndSubscribe(),o=this.getHtmlMemo.memo((()=>this.getHtmlFn(n)),[n]),i=(0,Ae.jsx)(Se().A,{...this.classNameAndStyleStore.state,debugName:"Text",store:this.props.store,onBlur:this.props.onBlur,onFocus:this.props.onFocus,canEditStore:this.canEditStore,spellCheck:!this.canExclusivelyComment()&&!this.props.disableBrowserSpellcheck,getHtml:o,getSelection:this.getContainerSelection,onMutation:this.handleMutation,onCompositionStart:()=>{return e=this.props.onChange,t=this.props.environment,M().setSelectionComposing(t,!0),void(e&&e());var e,t},onCompositionEnd:this.handleCompositionEnd,onSelect:t,placeholder:this.getCurrentPlaceholder(),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,suppressNewlineEvents:!0,disableContentEditableWhenNotEditingTextOnMobile:!0,expandSelectionOnTripleClick:!0,id:this.props.id,tagName:this.props.tagName,...e,ref:this.props.contentEditableLeafRef,leafRef:this.mergeEditorRefs(this.handleEditorRef,e.leafRef)});return this.isPageContentForDemoTutorial()?(0,Ae.jsx)(we().F,{step:"demo_text_block",children:i}):this.isPageContentForTourTutorial()?(0,Ae.jsx)(_e().n,{step:"create_page_type_slash",showSidebarOverlays:!1,onNextButtonClick:this.onTutorialNextButtonClick,children:i}):i},this.handleEditorRef=e=>{this.editor=e},this.isSpaceComposition=()=>{const e=v().qAZ(this.getTextValue());return 1===e.length&&("　"===e[0]||" "===e[0])},this.handleCompositionEnd=()=>{M().setSelectionComposing(this.props.environment,!1),"suggest"!==this.getEditorMode()&&I().US({environment:this.props.environment,store:this.props.store,usingMultiSelection:!0}),this.props.onChange&&this.props.onChange(),this.shouldRenderInteractiveAiPlaceholderStore.state&&this.isSpaceComposition()?We({from:"spacebar",environment:this.props.environment}):B().createAndCommit({userAction:"Text.runAllFiltersAfterCompositionEnd",environment:this.props.environment,canUndo:!0,perform:e=>{this.props.disableFilters||T().Ul({environment:this.props.environment,store:this.props.store,editorMode:this.getEditorMode(),transaction:e,selectableBlockActions:this.props.selectableBlockActions})}})},this.handleDelete=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_delete",e.timeStamp);const{store:t}=this.props,n=he().default.state;if("editing"===n.mode){const o=n.multiSelection;if(o.start.store===t){const t=this.getEditorMode();B().createAndCommit({userAction:"Text.handleDelete",environment:this.props.environment,canUndo:!0,perform:n=>{A().wT({environment:this.props.environment,multiSelection:o,deleteForwards:!0,transaction:n,event:e,editorMode:t})}})}}Ve(),this.props.onChange&&this.props.onChange()},this.handleForwardDeleteAtEndOfLine=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const{store:t}=this.props,n=he().default.state;if("editing"!==n.mode)return;const o=n.multiSelection;(0,G().kM)(o)&&(0,Y().NG)(t,{startIndex:o.start.index,endIndex:o.end.index})&&this.handleDelete(e)},this.handleBackspace=e=>{if(!this.canEditStore.state||this.editor&&this.editor.isComposing())return;this.logTypingLag("typing_backspace",e.timeStamp);const{store:t}=this.props,n=he().default.state;if("editing"===n.mode){const o=n.multiSelection;if(o.start.store===t){if(A().CZ({device:this.props.environment.device,event:e,multiSelection:o}))return;const t=this.getEditorMode();B().createAndCommit({userAction:"Text.handleBackspace",environment:this.props.environment,canUndo:!0,perform:n=>{A().wT({environment:this.props.environment,multiSelection:o,deleteForwards:!1,transaction:n,event:e,editorMode:t})}})}}Ve(),this.props.onChange&&this.props.onChange(e)},this.handleEnter=e=>{if(!this.canEditStore.state)return;if(this.logTypingLag("typing_enter",e.timeStamp),W().Xs(e),this.editor&&this.editor.isComposing())return;const t=he().default.state;if("editing"===t.mode)if(this.props.onEnter)this.props.onEnter(e);else{const{multiSelection:e}=t;B().createAndCommit({userAction:"Text.handleEnter",environment:this.props.environment,canUndo:!0,perform:t=>{C().Ve({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:t})}}),Ve()}this.props.onChange&&this.props.onChange(e)},this.handleShiftEnter=e=>{if(!this.canEditStore.state)return;if(this.editor&&this.editor.isComposing())return;const t=he().default.state;if("editing"===t.mode){const{device:n}=this.props.environment;if(!("shiftKey"in e)||e.shiftKey&&!n.isIOS){if(this.props.disableShiftEnter)return;B().createAndCommit({userAction:"Text.handleShiftEnter",environment:this.props.environment,canUndo:!0,perform:e=>{I().$D({environment:this.props.environment,editorMode:this.getEditorMode(),string:"\n",multiSelection:t.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:this.props.mentionSectionOrdering})}}),this.props.onChange&&this.props.onChange(e)}else this.handleEnter(e)}},this.handleTab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_tab",e.timeStamp),this.props.onTab){this.props.onTab(e)||e.preventDefault()}else e.preventDefault(),B().createAndCommit({userAction:"Text.handleTab",environment:this.props.environment,canUndo:!0,perform:e=>{I().Mf({environment:this.props.environment,shiftKey:!1,transaction:e})}}),Ve();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleUntab=e=>{if(this.canEditStore.state)if("suggest"!==this.getEditorMode()){if(this.logTypingLag("typing_untab",e.timeStamp),this.props.onUntab){this.props.onUntab(e)||e.preventDefault()}else e.preventDefault(),B().createAndCommit({userAction:"Text.handleUntab",environment:this.props.environment,canUndo:!0,perform:e=>{I().Mf({environment:this.props.environment,shiftKey:!0,transaction:e})}}),Ve();this.props.onChange&&this.props.onChange()}else e.preventDefault()},this.handleAnnotation=(e,t)=>{this.canEditStore.state&&(t.preventDefault(),x().po({environment:this.props.environment,annotation:e}),Ve(),this.props.onChange&&this.props.onChange(),k(this.props.environment,{type:v()._XS(e)}))},this.handleToggleHighlight=e=>this.handleAnnotation(["h",de().A.getMostRecentlyUsedColor()],e),this.handleToggleBold=e=>this.handleAnnotation(["b"],e),this.handleToggleItalics=e=>this.handleAnnotation(["i"],e),this.handleToggleStrike=e=>this.handleAnnotation(["s"],e),this.handleToggleUnderline=e=>this.handleAnnotation(["_"],e),this.handleToggleCode=e=>this.handleAnnotation(["c"],e),this.handleClick=e=>{this.handleClickActions(e),this.props.onClick&&this.props.onClick(e)},this.handleContextMenu=e=>{const t=this.parentBlockStore.state;t&&H().PP({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:t,canEdit:this.canEditStore.state})},this.handleMouseOver=e=>{H().sp({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleMouseOut=e=>{H().W5({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state})},this.handleCut=e=>{if(this.canEditStore.state)return this.props.onCut?(this.props.onCut(e),void Ve()):void(this.props.clipboardActions&&(this.props.clipboardActions.cutWithMaybeConfirmation({environment:this.props.environment,event:e,markdownLinkifyIt:this.props.markdownLinkifyIt}),Ve(),this.props.onChange&&this.props.onChange()));e.preventDefault()},this.handlePaste=e=>{this.canEditStore.state&&(B().createAndCommit({userAction:"Text.handlePaste",environment:this.props.environment,canUndo:!0,perform:t=>{var n;null===(n=this.props.clipboardActions)||void 0===n||n.paste({environment:this.props.environment,event:e,disableEmbedMenu:Boolean(this.props.disableEmbedMenu),transaction:t,onPasteFiles:this.props.onPasteFiles||this.props.clipboardActions.pasteFilesForBlocks,formulasModule:this.props.formulasModule,markdownLinkifyIt:this.props.markdownLinkifyIt,tinyMceMicrosoftWordPasteFilter:this.props.tinyMceMicrosoftWordPasteFilter})}}),Ve(),this.props.onChange&&this.props.onChange())},this.handleKeypress=e=>{const t=this.parentBlockStore.state,n=t&&t.getType(),o=Boolean(n&&(0,s().ZW)(n));if(" "===e.key&&!e.shiftKey&&!e.ctrlKey&&!e.altKey&&this.isEmpty()&&(this.shouldRenderInteractiveAiPlaceholderStore.state||this.isHorizon1PlaceholderEnabledStore.state)&&!this.props.store.inMemoryRecordCache.isMockTextStore&&o&&ie().A.state.online)return e.preventDefault(),void We({from:"spacebar",environment:this.props.environment});this.canEditStore.state||e.metaKey&&"c"===e.key||e.preventDefault()},this.handleCopy=e=>{!function(e,t,n,o,i){if(t)return void t(e);null==i||i.copy({environment:o,event:e,markdownLinkifyIt:n})}(e,this.props.onCopy,this.props.markdownLinkifyIt,this.props.environment,this.props.clipboardActions)},this.handleMoveUp=e=>{!function(e,t,n){if(n)return void n(e);B().createAndCommit({userAction:"Text.handleMoveUp",environment:t,canUndo:!0,perform:n=>{I().$P({environment:t,transaction:n,direction:"up"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveUp)},this.handleMoveDown=e=>{!function(e,t,n){if(n)return void n(e);B().createAndCommit({userAction:"Text.handleMoveDown",environment:t,canUndo:!0,perform:n=>{I().$P({environment:t,transaction:n,direction:"down"})&&e.preventDefault()}})}(e,this.props.environment,this.props.onMoveDown)},this.isRightMarginCommentActionHoveredStore=this.createComputedStore((()=>{if(!F().A.state.isHovered||"right_margin_button"!==F().A.state.hoverEntryPoint)return!1;const e=fe().default.state,t=e.isOpen?e.currentStore:void 0;return(null==t?void 0:t.id)===this.props.store.id})),this.inPageFindFocusedResultStore=this.createComputedStore((()=>{if("none"===this.props.inPageFind.type)return;const e=ce().wb.state;return(0,q().wc)(e)&&e.id===this.props.store.id?e:void 0}),{debugName:"inPageFindFocusedResultStore"}),this.canEditStore=this.createComputedStore((()=>{if(this.props.disabled)return!1;if(ve().l.state)return!1;const e=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return e&&e.hasPublicPermission?this.props.isDiscussionInput?"view"!==e.permission:"comment"===e.permission&&"suggest"===this.getEditorMode()||"edit"===e.permission:!(!this.props.store.canComment()||"suggest"!==this.getEditorMode())||this.props.store.canEdit()}),{debugName:"canEditStore"}),this.getThemeAndSubscribe=()=>{var e;const t=this.props.environment.ThemeModeStore.state;return(0,y().O4)({theme:(null===(e=this.props.themeContext)||void 0===e?void 0:e.mode)??t})},this.getHtmlMemo=new(u().XQ),this.getHtmlFn=e=>()=>{var t,i,r,a;const s=Boolean(this.addLineBreakSuggestionStore.state),l=(null===(t=this.addLineBreakSuggestionStore.state)||void 0===t?void 0:t.discussionId)||(null===(i=this.removeLineBreakSuggestionStore.state)||void 0===i?void 0:i.discussionId);let c=this.getTextValue(),d=!1;if(this.props.canTruncate&&void 0!==this.props.maxChars){v().qAZ(c).length>this.props.maxChars&&(c=v().Ffo(this.getTextValue(),0,this.props.maxChars),d=!0)}if(function(e,t){if(!(0,n(155959).T)("supportsAlwaysMultiTextSelectionBehavior"))return!1;if(t&&e)return!!function(){var e,t,n,o;const i=null===(e=me().A.state.packageName)||void 0===e?void 0:e.includes("com.google.android.inputmethod.latin"),r=(null===(t=me().A.state.activeLocale)||void 0===t?void 0:t.includes("ko"))||(null===(n=me().A.state.activeLocale)||void 0===n?void 0:n.includes("zh"))||(null===(o=me().A.state.activeLocale)||void 0===o?void 0:o.includes("ja"));return Boolean(i&&!r)}();return!1}(Boolean(this.props.renderWhiteSpaceWhenEmptyOnAndroid),this.isEmpty()))return m().A.renderToStaticMarkup((0,Ae.jsx)("span",{className:_().F8,style:{position:"relative"},placeholder:this.getCurrentPlaceholder(),children:(0,Ae.jsx)("br",{})}));const u=H().S5({environment:this.props.environment,textValue:c&&{value:c,spaceId:(0,f().e)(this.props.store.pointer.spaceId)},parentStore:this.props.parentStore||this.props.store,disableHover:!1,disableStyleAnnotations:Boolean(this.props.disableStyleAnnotations),disableInsertedDeletedAnnotations:Boolean(this.props.disableInsertedDeletedAnnotations),disableDateStyleAnnotations:Boolean(null===(r=this.props.disabledMentionTypes)||void 0===r?void 0:r.date),disableSuggestionAnnotations:Boolean(this.props.disableSuggestionAnnotations),disableCommentAnnotations:this.props.disableComment??!1,disabled:!this.canEditStore.state,theme:e,emojiType:(0,z().FN)(this.props.environment),katex:this.props.environment.KatexStore.getKatex(),parentBlockId:je(this.props.store),renderedPageBlockId:null===(a=this.props.pageContext)||void 0===a?void 0:a.pageStore.id,formulaValueTypes:this.props.formulaValueTypes??[]}),p=(0,Ae.jsxs)(o.Fragment,{children:[u,d&&ze(e),l&&He(e,s?"add":"remove",l)]});return m().A.renderToStaticMarkup(p)},this.clearBrowserSelection=()=>{var e;null===(e=this.getEditorNode())||void 0===e||e.blur()},this.getTextValue=()=>[this.getTextValueHelper()].map((e=>H().Xu({store:this.props.store,textValue:e}))).map(this.applyTemporarySuggestRemovalAnnotation)[0],this.applyTemporarySuggestRemovalAnnotation=e=>{const t=this.blockRemoveSuggestionStore.state;return e&&t?H().xh({textValue:e,discussionId:t.discussionId}):e},this.getTextValueHelper=()=>{if(this.isNewDiscussionMenuTargetStore.state)return H().Fm({store:this.props.store});if(this.props.hasTemporaryDiscussionOnProperty){const e=V().A.getMultiSelection(),t=this.props.store.getValue();if(e)return v().Mwp({textValue:t,selection:{startIndex:e.start.index,endIndex:e.end.index},annotation:[v().Ifu.TemporaryComment]});if("block"===V().A.getType()){const e=v().qAZ(this.props.store.getValue());return v().Mwp({textValue:t,selection:{startIndex:0,endIndex:e.length},annotation:[v().Ifu.TemporaryComment]})}}if(this.isInlineEquationOverlayTargetStore.state)return H().kw({store:this.props.store,equationStore:se().A});if(this.isMentionMenuTargetStore.state)return H().k5({store:this.props.store,stateType:{type:"mentionMenu",state:this.isMentionMenuTargetStore.state}});if(this.isSlashMenuTargetStore.state)return H().k5({store:this.props.store,stateType:{type:"slashMenu",state:this.isSlashMenuTargetStore.state}});if(this.isRightMarginCommentActionHoveredStore.state&&!this.props.disableRightMarginHoverStyling){const e=v().qAZ(this.props.store.getValue());return H().A6({store:this.props.store,multiSelection:{start:{store:this.props.store,index:0},end:{store:this.props.store,index:e.length}}})}if(this.linkingMenuSelectionStore.state)return H().Vr({store:this.props.store,selection:this.linkingMenuSelectionStore.state});if(ce().qu.state&&"none"!==this.props.inPageFind.type&&!this.props.store.inMemoryRecordCache.isSyntheticAssistantData){return H().nu({textValue:this.props.store.getValue(),blockId:this.props.store.id,textProps:this.props.inPageFind,find:ce().qu.state,currentFocusedResult:this.inPageFindFocusedResultStore.state})}if(this.isCompletionPopupTargetStore.state)return H().PB({store:this.props.store,temporaryAnnotation:v().Ifu.TemporarySelection,multiSelection:Fe()});const e=this.pageAnnotationBlockMenuStore.state;if(e)return e;if(this.isEditingStore.state){const e=he().default.state;if("editing"===e.mode){const t=(0,G().H7)(e.multiSelection);if(t){const{textValue:e,modified:n}=H().K8({store:this.props.store,selection:t.selection});if(n)return e}}}const t=(0,L().getBlockSuggestion)(U().T,this.props.store.id);return t?t.titleTextValue:this.props.store.getValue()},this.parentBlockStore=this.createComputedStore((()=>{const{store:e}=this.props;if(e.pointer.table===g().ev)return ge().Bv.createChildStore(e,e.pointer)}),{debugName:"parentBlockStore"}),this.isEditingStore=this.createComputedStore((()=>(0,Y().j_)(this.props.store)),{debugName:"isEditing"}),this.isSelectionEndpointStore=this.createComputedStore((()=>(0,Y().D9)(this.props.store)),{debugName:"isSelectionEndpoint"}),this.shouldRenderInteractiveAiPlaceholderStore=this.createComputedStore((()=>{var e;if(this.isHorizon1PlaceholderEnabledStore.state)return!1;if(this.props.environment.device.isMobile||this.props.environment.device.isMobileNative)return!1;if(this.props.disabled)return!1;if(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)return!1;const t=this.parentBlockStore.state,n=t&&t.getType();return Boolean(n&&(0,s().ZW)(n))&&"contains-selection"===this.isEditingStore.state&&!(t&&(0,D().u)(t))}),{debugName:"shouldRenderInteractiveAiPlaceholder"}),this.isHorizon1PlaceholderEnabledStore=this.createComputedStore((()=>{var e;return!(null===(e=this.props.pageContext)||void 0===e||!e.arePublicEditCompletionsEnabledStore.state)&&!this.props.environment.device.isPhone}),{debugName:"isHorizon1PlaceholderEnabled"}),this.isNewDiscussionMenuTargetStore=this.createComputedStore((()=>{const e=V().A.state;return V().A.calculateMultitextSelection(),e.open&&"inline"===e.type&&Boolean((0,$().xk)(e.multiSelection,this.props.store))}),{debugName:"isNewDiscussionMenuTarget"}),this.blockInsertSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getInsertSuggestion()}),{debugName:"blockInsertSuggestion"}),this.blockRemoveSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveSuggestion()}),{debugName:"blockRemoveSuggestion"}),this.addLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getAddLineBreakSuggestion()}),{debugName:"addLineBreakSuggestionStore"}),this.removeLineBreakSuggestionStore=this.createComputedStore((()=>{var e;return null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getRemoveLineBreakSuggestion()}),{debugName:"removeLineBreakSuggestionStore"}),this.isCompletionPopupTargetStore=this.createComputedStore((()=>{const e=Fe();if(!e)return!1;const t=oe().default.state;if("assistantCompletionPopup"===t.type){const e=te().default.getSessionContext(t.sessionId);if(e&&e.getAllPendingOperations().length>0)return!1}return Boolean((0,$().xk)(e,this.props.store))}),{debugName:"isCompletionPopupTarget"}),this.isInlineEquationOverlayTargetStore=this.createComputedStore((()=>{var e;return se().A.isOpen()&&(null===(e=(0,G().H7)(se().A.state.savedTextSelectionState.multiSelection))||void 0===e?void 0:e.store)===this.props.store}),{debugName:"isInlineEquationOverlayTarget"}),this.isMentionMenuTargetStore=this.createComputedStore((()=>{const e=pe().A.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isMentionMenuTarget"}),this.isSlashMenuTargetStore=this.createComputedStore((()=>{const e=ee().A.state;return!!e.open&&(e.textStore===this.props.store&&e)}),{debugName:"isSlashMenuTarget"}),this.linkingMenuSelectionStore=this.createComputedStore((()=>{const e=ue().A.state;if(!e.open)return!1;if(!e.focusLinkInput&&!e.focusTitleInput)return!1;if(!this.isEditingStore.state)return!1;const t=(0,G().H7)(e.savedTextSelectionState.multiSelection);return!!t&&t.selection}),{debugName:"linkingMenuSelectionStore"}),this.pageAnnotationBlockMenuStore=this.createComputedStore((()=>{const e=ne().A.state;if(!e.isActive)return;const{clickedPageAnnotation:t}=e;if(!t)return;const{parentStore:n,pageAnnotation:o}=t;if(n!==this.parentBlockStore.state)return;const i=this.props.store.getValue();return i?null==i?void 0:i.map((e=>v().qXl(e)?[e[0],e[1].flatMap((e=>v().jIt(e)&&e===o?[o,v().CXp()]:[e]))]:e)):void 0}),{debugName:"pageAnnotationBlockMenuStore"}),this.disabledMentionTypes=new(u().XQ),this.getContainerSelection=()=>{const e=Boolean(this.linkingMenuSelectionStore.state);if(this.isSelectionEndpointStore.state){if(e)return;return(0,Y().Do)(this.props.store)}if(this.isEditingStore.state&&!e){const{store:e}=this.props,t=he().default.state;if("editing"===t.mode){const n=(0,$().cR)("Text",t.multiSelection);if(n){const{selection:t}=n,o=e.getValue(),i=v().qAZ(o).length;return{type:"contain",selection:{startIndex:Math.min(t.startIndex,i),endIndex:Math.min(t.endIndex,i)}}}}}},this.getEndSelection=()=>{const e=v().qAZ(this.getTextValue());return{startIndex:e.length,endIndex:e.length}},this.classNameAndStyleStore=this.createComputedStore((()=>(0,l().AH)(this.getStyle(),this.props.className)),{debugName:"classNameAndStyleStore"}),this.showPostPlaceholderStore=this.createComputedStore((()=>{var e,t;const n=null===(e=this.parentBlockStore.state)||void 0===e?void 0:e.getNavigableBlockStore({skipCurrent:!0}),o=(null==n?void 0:n.isPost())&&1===(null==n||null===(t=n.getModel())||void 0===t?void 0:t.getContentLength());return Boolean(o)})),this.handleMutation=this.handleMutation.bind(this)}UNSAFE_willMountOrUpdate(){this.createReminderTimers(),this.props.environment.KatexStore.loadIfNeeded(this.getTextValue)}willUnmount(){this.clearReminderTimers(),P().OZ(this.props.store)}isComposing(){var e;return Boolean(null===(e=this.editor)||void 0===e?void 0:e.isComposing())}createReminderTimers(){const e=this.getTextValue(),t=v().Cok(e),n=S().oE(t.map((e=>{const t=(0,c().q8)(e,(0,d().P)());return null==t?void 0:t.toMillis()}))),o=Date.now();for(const i of n){const e=i-o;e>0&&e<w().nD&&(i in this.reminderTimers||(this.reminderTimers[i]=setTimeout(this.enqueueForceUpdate,e)))}for(const i in this.reminderTimers)n.includes(Number.parseInt(i))||(clearTimeout(this.reminderTimers[i]),delete this.reminderTimers[i])}clearReminderTimers(){for(const e in this.reminderTimers)clearTimeout(this.reminderTimers[e]),delete this.reminderTimers[e]}renderComponent(){const{disableInsertText:e,disableStyleAnnotations:t,disableSelectAllBlocks:n,disableSelectionDrag:o,disableDrag:i,disabled:r}=this.props;return(0,Ae.jsx)(ke().F,{...this.props,clearBrowserSelection:this.clearBrowserSelection,getEndSelection:this.getEndSelection,canInsertText:!r&&!e,onBlur:this.clearBrowserSelection,onClick:this.handleClick,onContextMenu:this.handleContextMenu,onDelete:this.handleDelete,onDeleteToEndOfLine:this.handleForwardDeleteAtEndOfLine,onDeleteNextWord:this.handleForwardDeleteAtEndOfLine,onBackspace:this.handleBackspace,onEnter:this.handleEnter,onShiftEnter:this.handleShiftEnter,onTab:this.handleTab,onUntab:this.handleUntab,onToggleHighlight:this.handleToggleHighlight,onToggleBold:this.handleToggleBold,onToggleItalics:this.handleToggleItalics,onToggleStrike:this.handleToggleStrike,onToggleUnderline:this.handleToggleUnderline,onToggleCode:this.handleToggleCode,onCopy:this.handleCopy,onCut:this.handleCut,onPaste:this.handlePaste,onKeypress:this.handleKeypress,onMoveUp:this.handleMoveUp,onMoveDown:this.handleMoveDown,render:this.renderContentContainer,disableStyleAnnotations:t,canSelectAllBlocks:!n,canSelectionDrag:!o,disableDrag:i,topBottomPadding:9})}getCurrentPlaceholder(){var e;const{device:t}=this.props.environment,n=Le.state;if(this.shouldRenderInteractiveAiPlaceholderStore.state)return n?K().A.formatMessage(Ne.typeTextAiPlaceholder):K().A.formatMessage(Ne.typeTextPlaceholder);if(this.props.placeholder)return this.props.placeholder;if(this.props.disabled||j().gZ.state&&this.props.store.id===(null===(e=j().kj.state)||void 0===e?void 0:e.id))return" ";if(this.showPostPlaceholderStore.state)return K().A.formatMessage(Ne.postBodyPlaceholder);if(!this.props.disableSlashCommands&&"contains-selection"===this.isEditingStore.state&&this.canEditStore.state)if(ee().A.state.open){if(ee().A.state.isAddMenu)return K().A.formatMessage(Ne.filterPlaceholder)}else if(!t.isPhone)return this.isHorizon1PlaceholderEnabledStore.state?K().A.formatMessage(Ne.expandedPlaceholder):K().A.formatMessage(Ne.typeTextPlaceholder);return" "}isPageContentForTourTutorial(){const{device:e}=this.props.environment;return!!(0,be().tourIsActive)(be().default.state)&&!(this.props.disableSlashCommands||"contains-selection"!==this.isEditingStore.state||!this.canEditStore.state||e.isMobile)}isPageContentForDemoTutorial(){var e;const{device:t}=this.props.environment,n=this.props.pageContext&&this.props.pageContext.publicEditModeStore.state;return!!re().A.isActiveDemo()&&!(t.isMobile||!n||(null===(e=this.parentBlockStore.getState())||void 0===e?void 0:e.id)!==re().A.getCurrentStepBlockId())}async handleTriggerAutoCorrect(){var e;if(this.props.isDiscussionInput||null!==(e=this.editor)&&void 0!==e&&e.isComposing())return;if(!le().default.checkGate({gateName:"ai_co_editing"}))return;const t=this.props.store.getAncestorBlockStoreAtRootPath();if(!t)return;const n=t.getNavigableBlockStore();if(!n||!(0,O().BP)(n,this.props.environment,this.props.environment.device))return;(await(0,N().uZ)()).submitEvent({type:"blockUpdated",environment:this.props.environment,blockStore:t})}handleMutation(e){this.logTypingLag("typing_lag",e.timeStamp);const t=le().default.checkGate({gateName:"caret_based_dmp_experiment"});if(!this.canEditStore.state)return;B().createAndCommit({userAction:"Text.handleMutation",environment:this.props.environment,canUndo:!0,perform:n=>{let o=this.props.store;const{multiSelection:i}=e;if(i&&!(0,G().KP)(i))o=i.start.store;else if(this.props.legacyTransclusionParentStore&&this.props.legacyTransclusionActions&&!e.insertedLine&&!e.isComposing&&!e.deletedLine){const e=this.props.legacyTransclusionActions.maybeAutofixLegacyTransclusionProperty({environment:this.props.environment,store:o,parentStore:this.props.legacyTransclusionParentStore,transaction:n});e&&(o=e)}if(I().kE({environment:this.props.environment,store:o,newValue:e.newValue,editorMode:this.getEditorMode(),disableMentions:Boolean(this.props.disableMentions),disabledMentionTypes:this.disabledMentionTypes.memo((()=>(0,p().Yz)(this.props.disabledMentionTypes)),[this.props.disabledMentionTypes]),disableSlashCommands:Boolean(this.props.disableSlashCommands),disableEmojiCommands:Boolean(this.props.disableEmojiCommands),disableFilters:this.props.disableFilters||e.isComposing,transaction:n,multiSelection:i,usePopupForMentionOnMobile:this.props.usePopupForMentionOnMobile,mentionSectionOrdering:this.props.mentionSectionOrdering,enableCaretBasedDMP:t}),e.insertedLine){const e="editing"===he().default.state.mode&&he().default.state.multiSelection;e&&C().Ve({environment:this.props.environment,editorMode:this.getEditorMode(),multiSelection:e,transaction:n})}this.props.trackEditsToUserFlow&&!n.isEmpty()&&R().VS(this.props.environment,this.props.trackEditsToUserFlow,n)}}),this.handleTriggerAutoCorrect();const{store:n}=this.props,o=this.parentBlockStore.state;if(o){if(o.getType()){const e=o.getSchema()||{};if("properties"===n.path[0]&&n.path[1]){e[n.path[1]]&&!this.triggeredAnalytics&&(this.triggeredAnalytics=!0)}}}if(this.props.onChange){let e;this.isSpaceComposition()&&(e=new KeyboardEvent("keydown",{key:" ",code:"Space",keyCode:32})),this.props.onChange(e)}}getEditorMode(){var e,t;return this.props.isDiscussionInput||this.props.disableSuggestEdit?"default":null!==(e=this.props.pageContext)&&void 0!==e&&e.pageStore?ae().Uv.getMode(null===(t=this.props.pageContext)||void 0===t?void 0:t.pageStore):"default"}handleClickActions(e){H().HP({environment:this.props.environment,event:e,textValue:this.getTextValue(),editorNode:this.getEditorNode(),store:this.props.store,parentStore:this.props.parentStore,canEdit:this.canEditStore.state,disableEquationInteraction:this.props.disableEquationInteraction})}canExclusivelyComment(){return e=this.props.disabled,t=this.props.store,!e&&t.canComment()&&!this.canEditStore.state;var e,t}focus(){this.isEditingStore.state||this.props.disableMoveCursorToEndOnFocus||M().setSelectionAtEnd({store:this.props.store})}getEditorNode(){var e;return(null===(e=this.editor)||void 0===e?void 0:e.getNode())||void 0}isEmpty(){return 0===v().RQ(this.getTextValue()).length}logTypingLag(e,t){const n=!this.props.disabled&&"inline"===this.props.pasteBehavior;(0,Q().D)({type:e,environment:this.props.environment,blockStore:this.parentBlockStore.state,store:this.props.store,isInCollectionView:n,eventTimeStamp:t})}getStyle(){const e=this.getThemeAndSubscribe(),{device:t}=this.props.environment;let n={maxWidth:"100%",width:"100%",whiteSpace:"pre-wrap",wordBreak:"break-word",caretColor:this.canExclusivelyComment()?y().Ay.transparent:e.text.primary,...this.props.style};return this.isEmpty()&&(n.minHeight="1em",n={...n,color:e.text.primary,WebkitTextFillColor:e.text.tertiary,...this.props.placeholderStyle,...this.showPostPlaceholderStore.state&&{color:e.text.quaternary,WebkitTextFillColor:e.text.quaternary}}),t.isMobile&&this.canEditStore.state&&(this.isEditingStore.state?n.WebkitUserModify="read-write-plaintext-only":(n.userSelect="none",n.WebkitUserSelect="none",n.whenFocusedEditable={userSelect:"text",WebkitUserSelect:"text",WebkitUserModify:"read-write-plaintext-only"})),n}}Oe.displayName="Text",Oe.contextType=null;const Ue=o.memo(o.forwardRef((function(e,t){const i=(0,o.useRef)(null),s=(0,o.useRef)(null);(0,o.useEffect)((()=>{s.current&&(i.current=s.current.parentElement)}),[s]);const{value:l}=(0,Z().fJ)(n(659602).g),{value:c}=(0,Z().fJ)(n(335722).S),{value:d}=(0,Z().fJ)(n(855801).VI.selectableBlockActions),{value:u}=(0,Z().fJ)(n(862292).T.formulas),{value:p}=(0,Z().fJ)(n(884107).R.clipboardActions),{value:m}=(0,Z().fJ)(n(764061).l.legacyTransclusionActions),g=(0,r().v3)(),f=(0,o.useContext)(n(560198).Ke),v=(0,a().S)(),h=(0,X().X)("functional_text_component");return(0,Ae.jsx)(ye().A,{name:"TextFGContainer",children:(0,Ae.jsx)(n(306631).S,{from:"Text",fallback:t=>{let{error:o,errorId:i}=t;return(0,Ae.jsx)(n(215206).m,{store:e.store,children:e=>(0,Ae.jsx)(n(719061).o,{backgroundColor:e,error:o,errorId:i})})},getParentEl:()=>i.current,children:h?(0,Ae.jsx)(Te,{...e,ref:t,clipboardActions:p,formulasModule:u,legacyTransclusionActions:m,markdownLinkifyIt:l,tinyMceMicrosoftWordPasteFilter:c,selectableBlockActions:d}):(0,Ae.jsx)(Oe,{...e,contentEditableLeafRef:s,ref:t,clipboardActions:p,formulasModule:u,legacyTransclusionActions:m,selectableBlockActions:d,markdownLinkifyIt:l,tinyMceMicrosoftWordPasteFilter:c,environment:g,themeContext:f,pageContext:v})})})})));function Fe(){const e=oe().default.state;return("closedWithContext"===e.type||"completionPopup"===e.type&&"initialPromptForAIBlock"!==e.stage||"assistantCompletionPopup"===e.type)&&"textSelection"===e.context.type?e.context.textSelection:void 0}function Ve(){i().default.flush()}function je(e){if(e.table===g().ev)return e.id;const{ancestor:t}=e.findRecordStoreUIAncestor((e=>{let{table:t}=e;return t===g().ev}));return t?t.id:void 0}function ze(e){return(0,Ae.jsxs)(Ie().A,{disableUnderline:!0,style:{color:e.text.secondary},onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["…",(0,Ae.jsx)("span",{children:(0,Ae.jsx)(b().sA,{id:"text.truncated.showMoreLabel",defaultMessage:"more"})})]})}function He(e,t,n){const o={textDecoration:"add"===t?"":"line-through",WebkitTextFillColor:"initial",..."add"===t?(0,h().B0)(e):(0,h().tR)(e)},i=(0,l().ED)({type:"add"===t?"update":"remove"}),r=(0,l().wV)({discussionId:n});return(0,Ae.jsx)("span",{style:o,className:`${_().gy} ${_().Do} ${i} ${r}`,children:`${v().nfR}`})}async function We(e){const{completionInitialPromptActions:t}=await E().aiDependency.load();await t.toggleInitialPrompt(e)}},525112:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},525569:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});n(16280);class o extends(()=>n(757695))().default{constructor(){super(...arguments),this.lastUpdater=0}getInitialState(){return{type:"closed"}}setState(e){if("completionPopup"===this.state.type&&"results"===this.state.stage&&("completionPopup"!==e.type||"results"!==e.stage)){const{inMemoryRecordCache:e,context:t}=this.state;if(e.cacheUsingThisInstanceAsAnOverride){const o=`CompletionsStore transitioning away from completionPopup results while inMemoryRecord cache is still overriding ${e.cacheUsingThisInstanceAsAnOverride===t.currentPage.inMemoryRecordCache?"page's in-memory cache":"an unknown cache"}!`;n(449412).O8(new Error(o),{from:"CompletionsStore",type:"dangerousStateTransition"})}}super.setState(e)}createUpdater(){const e=++this.lastUpdater;return t=>{if(e===this.lastUpdater)return t()}}invalidateLastUpdater(){this.lastUpdater+=1}resetStore(e){const{environment:t}=e;this.invalidateLastUpdater();const n=this.state;"completionPopup"!==n.type&&"assistantCompletionPopup"!==n.type||("completionPopup"===n.type&&"initialPromptForAIBlock"!==n.stage&&"initialPrompt"!==n.stage&&t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(n.inMemoryRecordCache),this.setState({type:"closed"}))}getExistingAISessionId(){return"closed"!==this.state.type?"assistantCompletionPopup"===this.state.type?this.state.sessionId:this.state.aiSessionId:void 0}isEditingEmptyBlock(){var e;const t=this.state;return Boolean(("completionPopup"===t.type||"assistantCompletionPopup"===t.type)&&"initialPrompt"===t.stage&&"cursor"===t.context.type&&(null===(e=t.context.currentBlock)||void 0===e?void 0:e.isEmptyEditableBlock()))}}const i=new o;(0,n(604341).exposeDebugValue)("CompletionsStore",i);const r=i},526088:(e,t,n)=>{n.d(t,{K:()=>o});const o=(0,n(583835).Dv)("unsyncTransclusionBlock")},527328:(e,t,n)=>{n.d(t,{WD:()=>r,eV:()=>o,fh:()=>i});const o={name:"Salesforce Record",regex:"^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+(?:-[a-z0-9]+)*\\.?[a-z0-9-]+(?:-[a-z0-9]+)*\\.(lightning|my)\\.force\\.com)(?:/lightning\\/r)?\\/?(?:(?<objectName>[a-zA-Z0-9_]+)\\/)?(?<recordId>[a-zA-Z0-9]{15}|[a-zA-Z0-9]{18})(?:/(?<action>[a-zA-Z0-9_]+))?$",attributes:[{id:"Id",name:"Id",type:"inline",format:{type:"title",section:"title"},values:["$<recordId>"]},{id:"instanceUrl",name:"Instance URL",type:"inline",format:{type:"title",section:"title"},values:["$<instanceUrl>"]},{id:"objectName",name:"Object Name",type:"inline",format:{type:"title",section:"secondary"},values:["$<objectName>"]}],additional_types:{connectedRelation:!0},connected_relation_properties:{title:{name:"Name",type:"title"},Id:{name:"Id",type:"text"},CreatedById:{name:"Created By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_CreatedById:{name:"Mapped Created By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},LastModifiedById:{name:"Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"relation"},mapped_LastModifiedById:{name:"Mapped Last Modified By",uri:"notion://user-defined-collection/salesforce:User",type:"person",source_property_id:"Email"},CreatedDate:{name:"Created Date",type:"date"},LastModifiedDate:{name:"Last Modified Date",type:"date"}},connected_relation_sub_schemas:{"notion://user-defined-collection/salesforce:User":{title:{name:"Name",type:"title"},SmallPhotoUrl:{name:"Avatar URL",type:"url"},Email:{name:"Email",type:"email"}},"notion://user-defined-collection/salesforce:Account":{title:{name:"Name",type:"title"},Type:{name:"Type",type:"text"},AccountNumber:{name:"Account Number",type:"text"},AnnualRevenue:{name:"Annual Revenue",type:"number"}},"notion://user-defined-collection/salesforce:Opportunity":{title:{name:"Name",type:"title"},Amount:{name:"Amount",type:"number"},CloseDate:{name:"Close Date",type:"date"},StageName:{name:"Stage",type:"text"}}}};function i(e){return`^(https?:\\/\\/)?(?<instanceUrl>[a-z0-9-]+\\.[\\w.]+\\.force\\.com)\\/lightning\\/r\\/${e}\\/(?<recordId>[a-zA-Z0-9]+)\\/(?<action>[a-zA-Z0-9_]+)`}function r(e){return{name:e,regex:i(e),attributes:o.attributes,additional_types:{connectedRelation:!0},connected_relation_properties:o.connected_relation_properties,connected_relation_sub_schemas:o.connected_relation_sub_schemas}}},527606:(e,t,n)=>{n.d(t,{k:()=>l});var o=n(296540),i=()=>n(17022),r=()=>n(484714),a=()=>n(831872),s=n(474848);function l(e){let{children:t,innerKey:n,...o}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c,{...o},n),t]})}function c(e){let{priority:t,enable:n,debugName:s,shortcuts:l}=e;const c=(0,r().v3)(),u=(0,o.useRef)(!1),p=(0,o.useRef)(Symbol(s)),m=(0,o.useRef)(t);return(0,o.useEffect)((()=>{m.current!==t&&(d(c,p,u),m.current=t),function(e,t,n,o){i().A.withListenerIgnored((()=>{if(n.current=n.current||o.enable,n.current){const n={listener:t.current,debugName:o.debugName,shortcuts:o.shortcuts,enable:o.enable,priority:o.priority||0};a().sm({environment:e,stackItem:n})}}))}(c,p,u,{priority:t,enable:n,debugName:s,shortcuts:l})}),[c,t,n,s,l]),(0,o.useEffect)((()=>()=>{d(c,p,u)}),[c]),null}function d(e,t,n){i().A.withListenerIgnored((()=>{a().pQ(e,t.current),n.current=!1}))}},528787:(e,t,n)=>{n.r(t),n.d(t,{createReaction:()=>b,toggleReaction:()=>_});n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(785082),i=()=>n(197959),r=()=>n(204384),a=()=>n(161479),s=()=>n(798880),l=()=>n(534177),c=()=>n(878523),d=()=>n(722101),u=()=>n(246826),p=()=>n(751156),m=()=>n(594794),g=()=>n(630116),f=()=>n(606846),v=()=>n(741817),h=()=>n(807060);function _(e){const{discussionLocation:t,environment:n,transaction:d,store:u,icon:m}=e,h=function(e){let{store:t,icon:n}=e;const o=(0,g().G_)(t,t.pointer,"reactions").getValue();if(void 0===o)return;return o.map((e=>{const n=g().sk.createChildStore(t,{table:r().ez,id:e,spaceId:(0,a().e)(t.pointer.spaceId)});if(n.isDefined())return n})).filter(l().O9).find((e=>e.getIcon()===n))}({store:u,icon:m});if(void 0===n.currentUser.id)return;const _={table:s().oo,id:n.currentUser.id};return null!=h&&h.isDefined()?function(e){var t;let{store:n,actorPointer:r,transaction:a,environment:s,discussionLocation:l}=e;const d={store:n,actorPointer:r,transaction:a,environment:s,discussionLocation:l},u=(null===(t=n.getActors())||void 0===t?void 0:t.some((e=>e.id===r.id)))??!1;return u?(function(e){var t,n;const{store:r,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!r.isDefined())return;const u=r.getParentStore(),m=(null==u?void 0:u.table)===i().$Y?u:null==u?void 0:u.getParentStore(),h=o().eR.includes(s),_=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),b=1===g().Lk.getUserVisibleReactions(u).length&&1===r.getActors().length&&r.getActors()[0].id===d.currentUser.id;c().fq({environment:d,reaction_value:r.getIcon(),comment_id:r.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(n=m.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:r.getActors().length??0,from:s,...h&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==_?void 0:_.id}});const y=r.getModel();p().applyOperation({transaction:l,store:r,operation:y.ops.removeActor(a)}),b&&u&&u.table===i().$Y&&(0,v().v)({environment:d,discussionStore:u,transaction:l})}(d),"Removed"):(function(e){var t,n;const{store:r,actorPointer:a,discussionLocation:s,transaction:l,environment:d}=e;if(!r.isDefined())return;const u=r.getParentStore(),m=(null==u?void 0:u.table)===i().$Y?u:null==u?void 0:u.getParentStore(),g=o().eR.includes(s),v=null==m||null===(t=m.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore();c().MP({environment:d,reaction_value:r.getIcon(),comment_id:r.getParentId(),discussion_id:null==m?void 0:m.id,discussion_type:null==m?void 0:m.getType(),parent_block_id:null==m?void 0:m.getParentId(),parent_collection_id:null==m||null===(n=m.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:r.getActors().length??0,from:s,...g&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==v?void 0:v.id}});const h=r.getModel();p().applyOperation({transaction:l,store:r,operation:h.ops.appendActor(a)})}(d),"Added")}({environment:n,store:h,actorPointer:_,transaction:d,discussionLocation:t}):(b({environment:n,transaction:d,store:u,icon:m,currentActorPointer:_,discussionLocation:t}),"Added")}function b(e){var t,n;let{environment:s,transaction:l,store:p,icon:v,currentActorPointer:_,discussionLocation:b}=e;const y=(0,m().JH)({environment:s,table:r().ez,spaceId:(0,a().e)(p.pointer.spaceId)}),S=p.table===i().$Y?p:p.getParentStore(),w=o().eR.includes(b),k=null==S||null===(t=S.getParentStore())||void 0===t?void 0:t.getNavigableBlockStore(),I=null==S?void 0:S.getPropertyId(),x=null==S?void 0:S.getParentStore(),{property_type:A,collection_id:C,collection_view_id:T,view_type:M,collection_view_block_id:P}=(0,h().q)(I,x);c().MP({environment:s,reaction_value:v,comment_id:p.id,discussion_id:null==S?void 0:S.id,discussion_type:null==S?void 0:S.getType(),parent_block_id:null==S?void 0:S.getParentId(),parent_collection_id:null==S||null===(n=S.getParentStore())||void 0===n?void 0:n.getParentCollectionIdUpToTwoLevels(),reaction_count:0,from:b,...w&&{inbox_session_id:f().Ay.state.sessionId,notification_page_id:null==k?void 0:k.id},property_type:A,collection_id:C,collection_view_id:T,view_type:M,collection_view_block_id:P});const B=u().vt({environment:s,table:y.table,args:{id:y.id,spaceId:y.spaceId,commentId:p.id,icon:v,actorPointer:_},inMemoryRecordCache:p.inMemoryRecordCache,transaction:l}),R=(0,g().G_)(p,p.pointer,"reactions");d().BC({parentStore:R,appendStore:B,transaction:l})}},529099:(e,t,n)=>{n.r(t),n.d(t,{aiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M12.758 9.976a1.178 1.178 0 1 0 .377-2.326 1.178 1.178 0 0 0-.377 2.326M6.547 8.97a1.178 1.178 0 1 0 .377-2.327 1.178 1.178 0 0 0-.377 2.326"}),(0,o.jsx)("path",{d:"M10.573 5.554a3.917 3.917 0 0 1 6.743.035.625.625 0 1 1-1.08.63 2.667 2.667 0 0 0-4.591-.023l-5.398 9.015 4.192.68a.625.625 0 0 1-.2 1.233l-5.102-.827a.625.625 0 0 1-.436-.938zM4.36 3.517a3.92 3.92 0 0 1 5.572.356.625.625 0 1 1-.945.818 2.67 2.67 0 0 0-3.795-.243.625.625 0 1 1-.833-.931"})]})},r=(0,n(340498).wt)("aiFace",i)},529183:(e,t,n)=>{n.d(t,{Ay:()=>a,ju:()=>o,rP:()=>i});n(898992),n(823215);function o(e){return"existingUser"===e.type}function i(e){return"newUser"===e.type&&"email"!==e.source}class r extends(()=>n(757695))().default{getInitialState(){return{tokenQuery:"",inviteTargets:[]}}}const a=r},530267:(e,t,n)=>{n.d(t,{Ve:()=>r,Vo:()=>i,bv:()=>s});var o=()=>n(534177);function i(e){if(!e)return{type:"range",min:0,max:Number.MAX_SAFE_INTEGER};if("range"===e.type)return e;let t=0,n=Number.MAX_SAFE_INTEGER;switch(e.type){case"fill":t=Number.MAX_SAFE_INTEGER;break;case"fixed":t=e.length,n=e.length;break;case"unlimited":break;case"min":t=e.length;break;case"max":n=e.length;break;default:(0,o().HB)(e)}return{type:"range",min:t,max:n,scroll:e.scroll}}function r(e){return{width:i(null==e?void 0:e.width),height:i(null==e?void 0:e.height)}}function a(e){switch(null==e?void 0:e.type){case"fill":case"fixed":return!1;case"range":return e.min!==e.max;case"max":case"min":case"unlimited":case void 0:return!0;default:(0,o().HB)(e)}}function s(e){return{width:a(null==e?void 0:e.width),height:a(null==e?void 0:e.height)}}},530681:(e,t,n)=>{n.d(t,{Bx:()=>p,SU:()=>c,bt:()=>a,eO:()=>d,gi:()=>l,su:()=>m,zC:()=>u});n(814603),n(147566),n(198721);var o=()=>n(449506),i=()=>n(435009),r=()=>n(816360);const a=9,s=1e3;function l(){r().A.setState({...r().A.state,isModalOpen:!0,openedTimestamp:Date.now()})}function c(e){const{environment:t}=e;r().A.setState({...r().A.state,isModalOpen:!1});const n=new URL(window.location.href);n.searchParams.delete("bp"),i().oo({environment:t,url:n.toString()})}const d={listings:[],count:0};async function u(e){const{environment:t,includeProduct:n,offset:i,spaceId:r,productTable:a,includeCount:l,includeRefunds:c}=e,u=await o().callApi({eventName:"getMarketplaceAcquiredListings",environment:t,data:{spaceId:r,limit:s,offset:i,productTable:a,includeProduct:n,includeCount:l,includeRefunds:c}});return"success"===u.type&&u.data.success?{listings:u.data.listings,count:u.data.count}:d}function p(e){const{environment:t}=e,n=new URL(window.location.href);n.searchParams.has("bp")?l():(n.searchParams.append("bp","true"),i().oo({environment:t,url:n.toString()}))}async function m(e){const{environment:t,acquisitionId:n}=e,i=await o().callApi({eventName:"getAcquisitionInvoicePdfUrl",environment:t,data:{acquisitionId:n}});return"success"===i.type&&i.data.success?i.data.pdfUrl:""}},532338:(e,t,n)=>{n.d(t,{og:()=>B,zB:()=>R,lX:()=>T});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(296540);var o=()=>n(401497),i=()=>n(179034),r=()=>n(449412),a=()=>n(496603),s=()=>n(763824),l=()=>n(534177),c=()=>n(436572),d=()=>n(989423),u=()=>n(972435),p=()=>n(870618);const m=new(n(645873).O2)("offlineSync",(()=>n.e(44425).then(n.bind(n,332186))));var g=()=>n(406792),f=()=>n(508496),v=()=>n(630116);var h=()=>n(416504),_=()=>n(449506),b=()=>n(796621);var y=()=>n(92400);class S extends Error{constructor(e){super(e)}}var w=()=>n(650012),k=()=>n(540758),I=()=>n(670631),x=()=>n(487532),A=()=>n(344300),C=n(474848);async function T(e){const{store:t,environment:n,analyticsFrom:o}=e,{currentUser:i,defaultRecordCache:{persistedRecordCache:a}}=n;if(!a||!i.id)return;const d=t.id,u=k().fF(d)?"removePage":"addPage";"removePage"===u&&(0,x().N$)(d),I().A.setState({...I().A.state,isSlowWrite:!1});const p="addPage"===u?B({environment:n,pageId:t.id,from:"toggleAvailableOffline",originPageId:d,visitedBlockIds:{forThisOriginPage:new Set},stats:{imageCount:0,loadCachedPageChunkV2ForOfflineCount:0,queryCollectionCount:0},autosyncTypes:["not_autosynced"],downloadAbortSignal:(0,x().Lu)(d),analyticsFrom:o,skippedCollectionIds:new Set}).finally((()=>{(0,x().DZ)(d)})):"removePage"===u?R({environment:n,pageId:t.id,from:"toggleUnavailableOffline",analyticsFrom:o}):(0,l().HB)(u);try{(await(0,s().nQ)(200,p)).timeout&&I().A.setState({...I().A.state,isSlowWrite:!0});const e=await p;null!=e&&e.success&&c().D6({label:(0,C.jsx)(P,{isCollectionViewBlock:t.isCollectionView()})})}catch(m){r().O8(m,{from:"toggleAvailableOffline",type:"error",data:{pageId:d}})}finally{I().A.setState({...I().A.state,isSlowWrite:!1})}}const M=(0,n(959013).YK)({togglePageAvailableOfflineSuccessTitle:{id:"offlinePagesActions.togglePageAvailableOfflineSuccessTitle",defaultMessage:"Page now available offline"},togglePageAvailableOfflineSuccessBody:{id:"offlinePagesActions.togglePageAvailableOfflineSuccessBody",defaultMessage:"This page and all inline databases within it are available offline."},toggleCollectionViewBlockAvailableOfflineTitle:{id:"offlinePagesActions.toggleCollectionViewBlockAvailableOfflineSuccess",defaultMessage:"Database now available offline"},toggleCollectionViewBlockAvailableOfflineBody:{id:"offlinePagesActions.toggleCollectionViewBlockAvailableOfflineBody",defaultMessage:"The top 50 pages in the first view are available offline. To guarantee offline access to a page, make it available manually."}});function P(e){const{isCollectionViewBlock:t}=e,n=(0,o().IS)((e=>({container:{maxWidth:"300px"},title:{fontSize:"12px"},body:{fontSize:"12px",color:e.text.secondary}})),[]),i=t?M.toggleCollectionViewBlockAvailableOfflineTitle:M.togglePageAvailableOfflineSuccessTitle,r=t?M.toggleCollectionViewBlockAvailableOfflineBody:M.togglePageAvailableOfflineSuccessBody,a=u().A.getIntl();return(0,C.jsxs)("div",{style:n.container,children:[(0,C.jsx)("div",{style:n.title,children:a.formatMessage(i)}),(0,C.jsx)("div",{style:n.body,children:a.formatMessage(r)})]})}async function B(e){var t,n;const{pageId:o,from:a,environment:c,originPageId:u,visitedBlockIds:k,skippedCollectionIds:x,autosyncTypes:C}=e,{currentUser:{id:T},defaultRecordCache:{persistedRecordCache:M}}=c;if(!M||!T)return;let P;const R=performance.now();if(k.forThisOriginPage.has(o))return void(o===u&&r().O8(new Error("Potential infinite loop prevented in makePageAvailableOffline()"),{from:"makePageAvailableOffline",type:"infiniteLoopPrevented",data:{pageId:u}}));k.forThisOriginPage.add(o);const E=f().default.getConfigKey("offline_mode_settings","max_blocks_per_origin_page");if(k.forThisOriginPage.size>E)throw new S(`Max blocks limit of ${E} exceeded.`);const D=null===(t=k.forThisInterval)||void 0===t?void 0:t.has(o);if(null===(n=k.forThisInterval)||void 0===n||n.add(o),"toggleAvailableOffline"===a){var N;const e=null===(N=I().A.state.offlinePages)||void 0===N?void 0:N[o];I().A.setState({...I().A.state,offlinePages:{...I().A.state.offlinePages,[o]:e?{...e,isExplicitlyOfflinedOrigin:!0}:{downloadStatus:"downloading",lastDownloadedAt:void 0,lastDownloadedVersion:void 0,isExplicitlyOfflinedOrigin:!0,isAutosyncedOrigin:!1}}})}else"onBlockCreated"===a&&I().A.setState({...I().A.state,offlinePages:{...I().A.state.offlinePages,[o]:{downloadStatus:"success",lastDownloadedAt:void 0,lastDownloadedVersion:void 0,isExplicitlyOfflinedOrigin:!0,isAutosyncedOrigin:!1}}});const L=await async function(e){const{operation:t,pageId:n,userId:o,persistedRecordCache:i,environment:a,trackAnalytics:s}=e;let c=!1;try{"addPage"===t?await async function(e){const{persistedRecordCache:t,userId:n,originPageId:o,impactedPageId:i,autosyncTypes:r}=e,a=await t.isPageAvailableOffline({pageId:i,userId:n});a?await t.addOfflineAction({userId:n,originPageId:o,impactedPageId:i,autosyncTypes:r}):await t.addOfflinePageAndOfflineAction({userId:n,impactedPageId:i,originPageId:o,autosyncTypes:r,downloadStatus:"downloading"})}({persistedRecordCache:i,userId:o,originPageId:e.originPageId,impactedPageId:n,autosyncTypes:e.autosyncTypes}):"removePage"===t?await i.deleteOfflineActionsAndCleanUp({userId:o,originPageId:n,impactedPageIds:[n]}):(0,l().HB)(t),c=!0}catch(u){s&&(r().O8(u,{from:t,type:"performOfflinePageOperationInDbError",data:{pageId:n}}),(0,d().u4)({environment:a,event:{eventName:"offline_toggle_failure",eventProperties:{action:"addPage"===t?"add_page":"remove_page"}}}))}return{saveDidSucceed:c}}({operation:"addPage",userId:T,pageId:o,originPageId:u,persistedRecordCache:M,environment:c,trackAnalytics:"toggleAvailableOffline"===a,autosyncTypes:C});"toggleAvailableOffline"===a&&L&&g().default.measure({metricName:"offline_toggle_on",startTime:R,endTime:performance.now()},{environment:c,data:{from:e.analyticsFrom}});const O="isRefetch"in e?e.isRefetch:"useRefetchOfflinePages"===e.from;if(!L){if(!O)try{await M.setPageDownloadStatus({pageId:o,userId:T,downloadStatus:"failed"})}catch(F){}if("toggleAvailableOffline"===a||"onBlockCreated"===a)try{await(0,A().readAndCacheOfflinePages)({userId:T,persistedRecordCache:M,tellOtherTabsToUpdate:!1})}catch(F){}return}if("onBlockCreated"===a)return void(0,A().tellOtherTabsToReadAndCacheOfflinePagesThrottled)();"toggleAvailableOffline"===a&&await navigator.locks.request(`toggle_offline_page_${T}`,(()=>{}));let U=!1;try{const t=await async function(){if(!M||void 0===T)return{success:!1};if("onBlockCreated"===e.from)return{success:!0};"toggleAvailableOffline"!==e.from&&"useRefetchOfflinePages"!==e.from&&"makePageAvailableOffline"!==e.from&&"makeCollectionViewBlockAvailableOffline"!==e.from&&"addAutosyncedPage"!==e.from&&(0,l().HB)(e.from);const{stats:t,downloadAbortSignal:n}=e,S=D,I=performance.now(),A=async function(){const e=new(v().Bv)(c,{id:o,table:i().ev});return await e.load(),e}(),[R,E]=await Promise.all([async function(){try{var e;const i=null===(e=await A)||void 0===e?void 0:e.getSpaceId();if(n.throwIfAborted(),!i)return{didSucceed:!1,shouldUpdateMetadata:!1};let r=!0;const s=await M.getOfflineLastDownloadedVersion({pageId:o,userId:T}),l={pageId:o,spaceId:i,environment:c,lastDownloadedVersion:s,visitedPages:new Set([]),isToggleBlock:!1,abortSignal:n},d=f().default.checkGate({gateName:"offline_batched_sync"}),{loadRemotePageAndImages:p,loadRemotePageAndImagesBatched:g}=await m.load(),v=S?{imageCount:0,downloadedVersion:void 0,collectionViewBlockIds:[],pageDownloadTime:0,imagesDownloadTime:0,loadPageChunkV2ForOfflineCount:0}:d?await g({...l,skipBatching:"toggleAvailableOffline"===a}):await p(l);if(n.throwIfAborted(),t.imageCount+=v.imageCount,t.loadCachedPageChunkV2ForOfflineCount+=v.loadPageChunkV2ForOfflineCount,d&&(t.didUseBatchedApi=!0),u===o){let e;v.downloadedVersion!==s?e=v.collectionViewBlockIds:(e=await M.getInlineCollectionsInOfflinePage({pageId:o,userId:T}),n.throwIfAborted());for(const o of e){const e=await B({from:"makePageAvailableOffline",isRefetch:O,pageId:o,environment:c,originPageId:u,visitedBlockIds:k,stats:t,autosyncTypes:C,downloadAbortSignal:n,skippedCollectionIds:x,skipMakeCollectionViewBlockAvailableOffline:!1});void 0!==e&&e.success||(r=!1),n.throwIfAborted()}}return{didSucceed:r,shouldUpdateMetadata:!0,lastDownloadedVersion:v.downloadedVersion,pageDownloadTime:v.pageDownloadTime,imagesDownloadTime:v.imagesDownloadTime,imageCount:v.imageCount}}catch(F){return F instanceof y().f||F instanceof w().W||r().O8(F,{from:"toggleAvailableOffline",type:"makePageAvailableOfflineError",data:{pageId:o}}),{didSucceed:!1,shouldUpdateMetadata:!1}}}(),async function(){if("makeCollectionViewBlockAvailableOffline"===e.from&&e.skipMakeCollectionViewBlockAvailableOffline)return{didSucceed:!0,skippedCollectionId:void 0,collectionChildrenCount:0,collectionChildrenDownloadTime:0};const i=O?f().default.getConfigKey("offline_query_collection_settings","skip_if_downloaded_within_ms"):void 0,a=await A;if(n.throwIfAborted(),!a.isCollectionView())return{didSucceed:!0,skippedCollectionId:void 0,collectionChildrenCount:0,collectionChildrenDownloadTime:0};try{const e=performance.now(),o=await async function(e){const{store:t,environment:n,originPageId:o,visitedBlockIds:i,isRefetch:r,stats:a,autosyncTypes:l,downloadAbortSignal:c,skipIfDownloadedWithinMs:d,skippedCollectionIds:u}=e;if(!t.isCollectionView())return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};const p=n.defaultRecordCache.persistedRecordCache,m=n.currentUser.id;if(!p||!m)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};const g=t.getCollectionViewStores();if(0===g.length)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};const v=g[0],y=v.getCollectionStore();if(!y)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};if(d){const e=await p.getOfflineLastDownloadedAt({pageId:o,userId:m});if(e&&Date.now()-e<d)return u.add(y.id),{success:!0,skippedCollectionId:y.id,collectionChildrenCount:0}}const S=f().default.getConfigKey("offline_query_collection_settings","limit");if(0===S)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};const w=await async function(e){let{environment:t,collectionViewStore:n,spaceId:o,isRefetch:i,limit:r,abortSignal:a}=e;const s=t.currentUser.id;if(!s)return;const l=n.getCollectionStore(),c=null==l?void 0:l.getModel(),d=n.getModel();if(!l||!c||!d)return;const u=function(e){var t;const{collection:n,collectionView:o,userId:i,userTimeZone:r,searchQuery:a,reducersOverride:s}=e,l=n.getSchema();return{filter:o.getCombinedFilter(l),sort:null===(t=o.getQueryStore().getValue())||void 0===t?void 0:t.sort,userId:i,userTimeZone:r,searchQuery:a,reducers:s??{}}}({collection:c,collectionView:d,userId:s,userTimeZone:(0,h().P)(),searchQuery:void 0,reducersOverride:{offline_pages:{type:"results",limit:r}}});return _().callApi({eventName:"queryCollection",environment:t,data:{source:{type:"collection",id:l.id,spaceId:o},collectionView:{id:n.id,spaceId:o},loader:u},tracking:{src:i?"download_for_offline_refetch":"download_for_offline"},inMemoryRecordCache:b().o,abortSignal:a})}({environment:n,collectionViewStore:v,spaceId:y.getSpaceId(),isRefetch:r,limit:S,abortSignal:c});if(c.throwIfAborted(),a.queryCollectionCount++,!w||"success"!==w.type)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};const k=w.data.result.reducerResults.offline_pages;if("results"!==k.type)return{success:!1,skippedCollectionId:void 0,collectionChildrenCount:0};return await(0,s().lX)(k.blockIds,10,(async e=>{await B({from:"makeCollectionViewBlockAvailableOffline",isRefetch:r,pageId:e,environment:n,originPageId:o,visitedBlockIds:i,stats:a,autosyncTypes:l,downloadAbortSignal:c,skipMakeCollectionViewBlockAvailableOffline:!0,skippedCollectionIds:u}),c.throwIfAborted()})),{success:!0,skippedCollectionId:void 0,collectionChildrenCount:k.blockIds.length}}({store:a,environment:c,originPageId:u,visitedBlockIds:k,isRefetch:O,stats:t,autosyncTypes:C,downloadAbortSignal:n,skipIfDownloadedWithinMs:i,skippedCollectionIds:x});return n.throwIfAborted(),{didSucceed:o.success,skippedCollectionId:o.skippedCollectionId,collectionChildrenCount:o.collectionChildrenCount,collectionChildrenDownloadTime:performance.now()-e}}catch(F){return F instanceof y().f||r().O8(F,{from:"toggleAvailableOffline",type:"makeCollectionViewBlockAvailableOfflineError",data:{pageId:o}}),{didSucceed:!1,skippedCollectionId:void 0,collectionChildrenCount:0,collectionChildrenDownloadTime:0}}}()]),N=R.didSucceed&&E.didSucceed,L=N?"success":"failed";"success"!==L&&O||await M.setPageDownloadStatus({pageId:o,userId:T,downloadStatus:L});if(R.shouldUpdateMetadata&&!E.skippedCollectionId){const e=R.lastDownloadedVersion,t=await M.getOfflineLastDownloadedVersion({pageId:o,userId:T});await M.updateOfflinePageLastDownloadedMetadata({pageId:o,userId:T,lastDownloadedAt:Date.now(),lastDownloadedVersion:"number"==typeof e&&"number"==typeof t?Math.max(e,t):e||t})}if("toggleAvailableOffline"===a)if(R.didSucceed&&E.didSucceed){var U;const t=null===(U=await p().h7({useInMemoryCacheOnly:!0,environment:c,pointer:{id:o,table:i().ev}}))||void 0===U||null===(U=U.model)||void 0===U?void 0:U.getType();g().default.measure({metricName:"offline_toggle_on_non_blocking",startTime:I,endTime:performance.now()},{environment:e.environment,data:{sub_metrics:{page_download:R.pageDownloadTime??0,images_download:R.imagesDownloadTime??0,collection_children_download:E.collectionChildrenDownloadTime??0},number_of_collection_children:E.collectionChildrenCount??0,number_of_images_fetched:R.imageCount??0,page_type:t||"unknown"}})}else(0,d().u4)({environment:e.environment,event:{eventName:"offline_toggle_on_non_blocking_failure",eventProperties:{load_remote_page_and_images_failed:!R.didSucceed,make_collection_children_available_offline_failed:!E.didSucceed}}});"useRefetchOfflinePages"===a&&(P=R.lastDownloadedVersion);return{success:N}}();U=t.success}catch(F){}return"toggleAvailableOffline"!==a&&"useRefetchOfflinePages"!==a&&"addAutosyncedPage"!==a||(0,A().readAndCacheOfflinePages)({userId:T,persistedRecordCache:M,tellOtherTabsToUpdate:!0}).catch((()=>{})),{success:U,visitedBlockIds:k,downloadedVersion:P}}async function R(e){const{pageId:t,environment:{currentUser:{id:n},defaultRecordCache:{persistedRecordCache:o}},from:i,analyticsFrom:s}=e;if(o&&n)if("removeAutosyncedPage"!==i){"toggleUnavailableOffline"===i&&(0,d().u4)({environment:e.environment,event:{eventName:"offline_toggle_off",eventProperties:{page_id:t,from:s}}}),I().A.setState({...I().A.state,offlinePages:a().cJ(I().A.state.offlinePages,t)});try{await o.deleteOfflineActionsWithOriginPageIdAndCleanUp({originPageId:t,userId:n,autosyncType:"not_autosynced"})}catch(l){r().O8(l,{from:"toggleUnavailableOffline",type:"deleteRowsFromDbError",data:{pageId:t}}),(0,d().u4)({environment:e.environment,event:{eventName:"offline_toggle_failure",eventProperties:{action:"remove_page"}}})}(0,A().readAndCacheOfflinePages)({userId:n,persistedRecordCache:o,tellOtherTabsToUpdate:!0}).catch((()=>{}))}else try{await o.deleteOfflineActionsWithOriginPageIdAndCleanUp({originPageId:t,userId:n,autosyncType:"frecent"})}catch(l){r().O8(l,{from:"removeAutosyncedPage",type:"deleteRowsFromDbError",data:{pageId:t}})}}},534402:(e,t,n)=>{n.d(t,{LT:()=>f,X0:()=>h,Xt:()=>v});var o=()=>n(700500),i=()=>n(91913),r=()=>n(933449),a=()=>n(634201),s=()=>n(416845),l=()=>n(919709),c=()=>n(439180),d=()=>n(319975),u=()=>n(751156),p=()=>n(299545),m=()=>n(969197),g=()=>n(518736);function f(e){const{transaction:t,targetStore:n,sourceBlockStore:o}=e,a=(0,r().o9)(o.getBlockTitleTextSliceTree(),i().cf),l=(0,m().T)(n);if(!l||!g().Le({store:n,blockStore:l}))throw new(s().yI4)("Previous block should exist and use CRDT");const c=a.getOperationsForSplitForMerge();(0,r().MX)(0===c.textSliceTreesToMove.length,"Root nodes should have no siblings to move"),_({sourceBlockStore:o,targetBlockStore:l,splitInfo:c,isMerge:!0,transaction:t})}function v(e){const{environment:t,transaction:n,multiSelection:i,removedBlocks:a,movedBlocks:s}=e,l=i.start.store;function c(e){if((0,r().MX)(!s.has(e),"Block being reparented should not be deleted"),!(0,o().Db)(e.getType(),e.getFormat()))return;const i=e.getBlockTitleStore();(0,r().MX)(g().SL(i),"Expected CRDT block title"),d().jQ({environment:t,transaction:n,selection:{startIndex:0,endIndex:1/0},store:i}),f({transaction:n,sourceBlockStore:e,targetStore:l})}(0,r().MX)(g().SL(l),"Expected CRDT block title");const u=(0,m().T)(i.end.store);for(const o of a){if(o===u)return;c(o);for(const e of(0,p().zo)({blockStore:o,transclusionReferences:"omit",childPages:"omit"})){if(e===u)return;c(e)}}}function h(e){const{sourceBlockStore:t,targetBlockStore:n,splitAtGraphemeIndex:o,transaction:s,moveIntoNewBlock:d}=e;(0,r().MX)(t.useCrdt(),"Expected CRDT source block"),(0,r().MX)(n.useCrdt(),"Expected CRDT target block");const p=t.getBlockTitleStore().getValue(),m=new(a().Z4)(l().qAZ(p)).getStringStartIndex(o),g=(0,r().o9)(t.getBlockTitleTextSliceTree(),i().cf).getOperationsForSplitAtIndex(m);!function(e){const{blockStore:t,splitInfo:n,transaction:o}=e,i=t.getBlockTitleStore().getValue()??[],r=n.textSliceTreesToMove,a="splitWithinNode"===n.type?n.textSliceTreeToSplit:n.newTextSliceTree;for(const s of r){const e=s.getTextSlice().getSearchLabel(),n=s.getTextSlice().getStartItem().id,r=t.id,l=a.getTextSlice().textInstanceId,d=a.getTextSlice().getSearchLabel(),p=a.getTextSlice().getEndItem().id;u().applyCrdtTextOperation({transaction:o,store:t,operation:{command:"moveTextSlice",pointer:t.pointer,path:[],opVersion:c().TU,args:{textInstanceId:s.getTextSlice().textInstanceId,sourceSearchLabel:e,textSliceStartItemId:n,targetBlockId:r,targetTextInstanceId:l,targetSearchLabel:d,targetTextSliceEndItemId:p,forDowngrade:{fullSourceTextValue:i,fullTargetTextValue:i}}},invertedOperation:void 0})}}({blockStore:t,splitInfo:g,transaction:s}),d?function(e){const{sourceBlockStore:t,targetBlockStore:n,splitInfo:o,transaction:a}=e;let s,d,p,m,g;if("splitNodeEnd"===o.type){const e=o.newTextSliceTree;s=e.getTextSlice().textInstanceId,d=e.getTextSlice().getSearchLabel(),p=e.getTextSlice().getStartItem().id;const t=o.previousTextSliceTree.getTextSlice();m=t.textInstanceId,g=t.getEndItem().id}else u().applyCrdtTextOperation({transaction:a,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],opVersion:c().TU,args:o.splitOp},invertedOperation:void 0}),s=o.splitOp.textInstanceId,d=o.splitOp.searchLabel,p=o.splitOp.id,m=o.splitOp.textInstanceId,g=o.splitOp.id;const f=(0,r().o9)(t.getBlockTitleTextSliceTree(),i().cf),v=(0,r().o9)(f.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:s,start:p}),i().Dp).startIndex,h=f.getTextValue(),_=l().Ffo(h,0,v),b=l().Ffo(h,v,l().AhH(h));u().applyCrdtTextOperation({transaction:a,store:t,operation:{command:"moveTextSliceIntoBlock",path:[],pointer:t.pointer,opVersion:c().TU,args:{textInstanceId:s,sourceSearchLabel:d,textSliceStartItemId:p,targetBlockId:n.id,forDowngrade:{fullSourceTextValue:_,fullTargetTextValue:b}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:s,textSliceStartItemId:p,targetTextInstanceId:m,targetTextSliceEndItemId:g,sourceBlockId:n.id,previousSourceTextValue:n.getBlockTitleStore().getValue()??[],targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}({sourceBlockStore:t,targetBlockStore:n,splitInfo:g,transaction:s}):_({sourceBlockStore:t,targetBlockStore:n,splitInfo:g,isMerge:!1,transaction:s})}function _(e){const{sourceBlockStore:t,targetBlockStore:n,splitInfo:o,isMerge:a,transaction:s}=e;let d,p,m,g,f;if("splitNodeEnd"===o.type){const e=o.newTextSliceTree;d=e.getTextSlice().textInstanceId,m=e.getTextSlice().getSearchLabel(),p=e.getTextSlice().getStartItem().id;const t=o.previousTextSliceTree.getTextSlice();g=t.textInstanceId,f=t.getEndItem().id}else u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"splitText",pointer:t.pointer,path:[],opVersion:c().TU,args:o.splitOp},invertedOperation:void 0}),d=o.splitOp.textInstanceId,m=o.splitOp.searchLabel,p=o.splitOp.id,g=o.splitOp.textInstanceId,f=o.splitOp.id;const v=(0,r().o9)(t.getBlockTitleTextSliceTree(),i().cf),h=(0,r().o9)(v.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:d,start:p}),i().Dp).startIndex,_=v.getTextValue(),b=l().Ffo(_,0,h),y=l().Ffo(_,h,l().AhH(_)),S=n.getBlockTitleStore().getValue()??[],w=l().__s(l().xym(S,y,l().AhH(S))),k=(0,r().o9)(n.getBlockTitleTextSliceTree(),i().cf).getLastTextSliceTreeInPreOrderTraversal(),I=k.getTextSlice().getSearchLabel();u().applyCrdtTextOperation({transaction:s,store:t,operation:{command:"moveTextSlice",path:[],pointer:t.pointer,opVersion:c().TU,args:{textInstanceId:d,textSliceStartItemId:p,sourceSearchLabel:m,targetBlockId:n.id,targetTextInstanceId:k.getTextSlice().textInstanceId,targetSearchLabel:I,targetTextSliceEndItemId:k.getTextSlice().getEndItem().id,isMerge:a,forDowngrade:{fullSourceTextValue:b,fullTargetTextValue:w}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:t.pointer,args:{textInstanceId:d,textSliceStartItemId:p,targetTextInstanceId:g,targetTextSliceEndItemId:f,sourceBlockId:n.id,previousSourceTextValue:S,targetBlockId:t.id,previousTargetTextValue:t.getBlockTitleStore().getValue()??[]}}})}},536131:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},537012:(e,t,n)=>{n.d(t,{Ls:()=>d,Mn:()=>p,rM:()=>c,yx:()=>u});n(944114),n(898992),n(354520),n(430670);var o=()=>n(534177),i=()=>n(179034),r=()=>n(824862),a=()=>n(519831),s=()=>n(869558),l=()=>n(96689);function c(e){const{targetTriggerType:t,targetParentPointer:n,targetSpaceId:i}=e;return"event"===t?[{pointer:n,minimumRequiredRole:"editor"},{pointer:{id:i,table:l().NX},minimumRequiredRole:"read_and_write"}]:"recurrence"===t||"button"===t||"chat"===t?[{pointer:n,minimumRequiredRole:"read_and_write"}]:void(0,o().HB)(t)}function d(e){const{automationValue:t,actionValues:n}=e,i=n.flatMap((e=>p(e))).filter(o().O9);return"event"===t.trigger.type?(i.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"editor"},{pointer:{id:t.space_id,table:l().NX},minimumRequiredRole:"read_and_write"}),(0,o().O9)(t.trigger.event.source)&&(t.trigger.event.source.type===s().Gy||t.trigger.event.source.type===a().Vl?i.push({pointer:t.trigger.event.source.pointer,minimumRequiredRole:"reader"}):"filter"===t.trigger.event.source.type||(0,o().HB)(t.trigger.event.source))):"recurrence"===t.trigger.type||"button"===t.trigger.type?i.push({pointer:{id:t.parent_id,table:t.parent_table,spaceId:t.space_id},minimumRequiredRole:"read_and_write"}):(0,o().HB)(t.trigger),i}function u(e){return"event"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"editor"},{pointer:{id:e.space_id,table:l().NX},minimumRequiredRole:"read_and_write"}]:"recurrence"===e.trigger.type||"button"===e.trigger.type?[{pointer:{id:e.parent_id,table:e.parent_table,spaceId:e.space_id},minimumRequiredRole:"read_and_write"}]:void(0,o().HB)(e.trigger)}function p(e){if("create_page"===e.type){var t,n;const o=[];var a,s;if(null!==(t=e.config)&&void 0!==t&&t.collection)o.push({pointer:null===(a=e.config)||void 0===a?void 0:a.collection,minimumRequiredRole:"content_only_editor"});if(null!==(n=e.config)&&void 0!==n&&n.template_page_id)o.push({pointer:{id:null===(s=e.config)||void 0===s?void 0:s.template_page_id,table:i().ev,spaceId:e.space_id},minimumRequiredRole:"reader"});return o}var l,c;if("query_collection"===e.type){if(null!==(l=e.config)&&void 0!==l&&l.collection)return[{pointer:null===(c=e.config)||void 0===c?void 0:c.collection,minimumRequiredRole:"content_only_editor"}]}else if("update_pages"===e.type){var d;const t=null===(d=e.config)||void 0===d?void 0:d.target;if(!t)return[];if("collection"===t.type)return[{pointer:t.collection,minimumRequiredRole:"content_only_editor"}];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"content_only_editor"}];if("variable"===t.type)return[];(0,o().HB)(t)}else if("open_page"===e.type){var u;const t=null===(u=e.config)||void 0===u?void 0:u.target;if(!t)return[];if("page"===t.type)return[{pointer:t.page,minimumRequiredRole:"reader"}];if("variable"===t.type||"url"===t.type)return[];(0,o().HB)(t)}else if("slack_notification"===e.type){var p;if(null!==(p=e.config)&&void 0!==p&&p.external_bot_id)return[{pointer:{id:e.config.external_bot_id,table:r().GP},minimumRequiredRole:"reader"}]}else{if("duplicate_blocks"===e.type)return[];if("modal_confirmation"===e.type)return[];if("complete_sprint"===e.type){var m,g;const t=[];return null!==(m=e.config)&&void 0!==m&&m.sprint_collection&&t.push({pointer:e.config.sprint_collection,minimumRequiredRole:"editor"}),null!==(g=e.config)&&void 0!==g&&g.task_collection&&t.push({pointer:e.config.task_collection,minimumRequiredRole:"editor"}),t}if("send_in_app_notification"===e.type)return[];if("define_variables"===e.type)return[];if("http_request"===e.type)return[];if("send_gmail_notification"===e.type){var f;const t=[];return null!==(f=e.config)&&void 0!==f&&f.external_bot_id&&t.push({pointer:{id:e.config.external_bot_id,table:r().GP},minimumRequiredRole:"editor"}),t}if("publish_site"===e.type){var v;const t=[],n=null===(v=e.config)||void 0===v?void 0:v.target;return n?("page"===n.type&&t.push({pointer:n.page,minimumRequiredRole:"editor"}),t):[]}(0,o().HB)(e)}}},537941:(e,t,n)=>{n.d(t,{navigateToHomeTab:()=>_,s:()=>h});n(944114),n(898992),n(354520),n(803949),n(581454);var o=()=>n(110750),i=()=>n(857639),r=()=>n(861017),a=()=>n(496603),s=()=>n(183558),l=()=>n(780054),c=()=>n(836251),d=()=>n(351360),u=()=>n(210737),p=()=>n(848259),m=()=>n(741496),g=()=>n(751156),f=()=>n(345913),v=()=>n(435009);function h(e){var t,n,u,h,_;const{environment:b,tab:y,navigationAction:S,navigationSource:w}=e,{TabbedRouterStore:k,currentUser:I}=b;if(!c().Al(b))return;"updates"!==y&&p().L_(b);const x=k.state.activeTab,A=(0,o().Xz)(k.state),C=a().mg(k.state);C.activeTab=y,C.navigationAction=S,C.navigationSource=w;let T=!1;if(void 0!==e.nativeRootPageOverrideEnabled&&(T=C.tabs[C.activeTab].nativeRootPageOverrideEnabled!==e.nativeRootPageOverrideEnabled,C.tabs[C.activeTab].nativeRootPageOverrideEnabled=e.nativeRootPageOverrideEnabled),a().n4(e.modal,C.modal)||(T=!0,C.modal=e.modal??[]),void 0!==e.pages&&0===((null===(t=e.modal)||void 0===t?void 0:t.length)??0)){const t=e.pages.map((e=>{const t=(0,o().Ee)(e,!0),n=r().parseRoute({url:t,baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,isMobile:b.device.isMobile,protocol:l().A.protocol,currentUrl:window.location.href});return{...e,route:n}})),n=C.tabs[C.activeTab].pages;T||=!a().n4(n,t),C.tabs[C.activeTab].pages=t}k.setState(C);const M="addPage"===y;if(k.state.activeTab===x&&!T&&!M)return;const P=d().default.state.mainEditorCurrentBlockStore,B="web"===A.type&&(null===(n=A.redirectedTo)||void 0===n?void 0:n.route)&&"page"===(null===(u=A.redirectedTo)||void 0===u?void 0:u.route.name)&&(null===(h=A.redirectedTo)||void 0===h?void 0:h.route.showMoveTo),R=P&&(null==P?void 0:P.canEdit())&&P.isEmptyTitle()&&P.isEmptyPage();"addPage"===x&&B&&R&&I.isLoggedIn()&&g().createAndCommit({userAction:"routerActions.navigateToTab",environment:b,canUndo:!0,perform:e=>{f().oD({environment:b,blocks:[P],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,m().N)(b,{analyticsName:"delete",from:"mobile_navigation",block_id:P.id,block_type:"page"})}))}});const E=(null===(_=C.modal)||void 0===_?void 0:_.filter((e=>"web"===e.type)))??[],D=k.state.tabs[y],{rootPage:N,pages:L}=D;let O=!1;switch(N.type){case"native":break;case"web":if(L.length+E.length===0)v().oo({environment:b,redirect:!0,url:(0,o().Ee)(N,!0,{...e.queryParams,...N.queryParams,type:"space-private-pages",from:"mobile_bottom_bar"}),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}});else{O=!0;const e=(0,s().Ay)();window.history.replaceState({id:e,currentUserId:b.currentUser.id},void 0,(0,o().Ee)(N))}}const U=!0===C.tabs[C.activeTab].nativeRootPageOverrideEnabled,F=E[E.length-1];E.length>1&&i().log({level:"error",from:"tabNavigationActions",type:"navigateToTab",data:{message:`TabbedRouterStore only support 1 modal page for now. ${E.length} is detected`}}),L.forEach(((e,t)=>{if(!U&&t===L.length-1&&!F){let t=(0,o().Ee)(e);return"/blank"===t&&(t="/nativetab/empty"),void v().oo({environment:b,redirect:!O,url:t,updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}if(U&&0===t)return;const n=(0,s().Ay)(),i=(0,o().Ee)(e);O?window.history.pushState({id:n,currentUserId:b.currentUser.id},void 0,i):(O=!0,window.history.replaceState({id:n,currentUserId:b.currentUser.id},void 0,i))})),F&&"web"===F.type&&v().oo({environment:b,redirect:!O,url:(0,o().Ee)(F),updateMobileTabbedRouterArgs:{tabbedRouterStateAlreadyUpdated:!0}})}function _(e,t){var n,o;if(c().Al(e))return e.device.isMobileNative&&e.device.isAndroid&&u().A.closeAll(),h({environment:e,tab:"home",nativeRootPageOverrideEnabled:!0}),void(t&&t());Boolean(null===(n=e.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone())&&(null===(o=e.mobileNative)||void 0===o||o.showNativeHomeTab(t))}},538233:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},538527:(e,t,n)=>{n.d(t,{Mw:()=>m,Ug:()=>g,tc:()=>p});n(898992),n(803949);var o=()=>n(634201),i=()=>n(919709),r=()=>n(220719),a=()=>n(518736),s=()=>n(962845),l=()=>n(969197),c=()=>n(792002),d=()=>n(808207),u=()=>n(66788);function p(e){const{environment:t,multiSelection:n,annotation:o,transaction:i}=e;(0,s().$W)(n).forEach((e=>{let{store:n,selection:r}=e;m({environment:t,store:n,annotation:o,selection:r,transaction:i})}))}function m(e){const{environment:t,store:n,annotation:s,selection:p,transaction:m}=e,g=n.getValue();if(!g)return;const f=i().Mwp({textValue:g,selection:p,annotation:s});if(a().SL(n)){!function(e){const{blockStore:t,selection:n,annotation:a,transaction:s,fullTextValue:l}=e;(0,r().MX)(t.useCrdt(),"Expected CRDT block");const u=t.getBlockTitleStore().getValue(),p=i().xbM(u,n);if((0,c().gE)(p))return;const m=(0,r().o9)(t.getBlockTitleTextSliceTree()),g=new(o().Z4)(i().qAZ(u)),{startIndex:f,endIndex:v}=g.getInclusiveStringRangeForSelection(p),{operations:h,invertedOperations:_}=m.getOperationsForAddAnnotation(f,v,a);d().d({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:(0,r().o9)((0,l().T)(n)),selection:p,annotation:s,transaction:m,fullTextValue:f})}else{u().Tm({environment:t,store:n,value:f,transaction:m});const e=n.getRecordStoreAtRootPath();u().Xt({environment:t,store:n,oldTextValue:g,newTextValue:f,transaction:m,rootStore:e,removeInlineRecords:!1})}}function g(e){const{environment:t,blocks:n,annotation:o,transaction:i}=e;for(const r of n){const e=r.getTitleStore();if(!e)continue;e.getValue()&&m({environment:t,store:e,annotation:o,selection:{startIndex:0,endIndex:1/0},transaction:i})}}},540022:(e,t,n)=>{function o(e){return`collectionViewFilterBarOpenState:${e}`}n.d(t,{N:()=>o})},540144:(e,t,n)=>{n.d(t,{Fz:()=>g,I8:()=>m,M5:()=>_,Ql:()=>p,b8:()=>v,by:()=>h,lk:()=>d,pg:()=>u,y1:()=>c});n(944114),n(898992),n(354520),n(672577);var o=()=>n(919709),i=()=>n(534177),r=()=>n(299545),a=()=>n(508496),s=()=>n(10984),l=()=>n(862835);function c(e,t){const n=e.getContentStores(),o=(()=>{const n=e.getFormat();switch(t){case"transcript":return null==n?void 0:n.transcription_transcript_id;case"notes":return null==n?void 0:n.transcription_notes_id;case"summary":return null==n?void 0:n.transcription_summary_id;default:return(0,i().HB)(t)}})();if(o)return n.find((e=>e.id===o))}function d(e){const t=c(e,"transcript");if(!t)return!1;const n=t.getContentStores().filter((e=>!e.isEmptyTitle()&&!e.pathIsDead()));return n.length>0}function u(e){const t=c(e,"transcript");if(!t)return!1;let n="";const i=t.getContentStores().filter((e=>!e.isEmptyTitle()));for(const r of i){const e=r.getTitleValue();if(n+=(0,o().k4p)(e),n.length>300)return!0}return!1}function p(e,t){const n=t??[];e.isType("transcription")&&n.push(e);const o=e.getContentStores();for(const i of o)p(i,n);return n}function m(e){const t=[];for(const n of f({blockStore:e.blockStore}))t.push(n);return t}function g(e){for(const t of f({blockStore:e.blockStore}))return!0;return!1}function*f(e){const{blockStore:t}=e,n=t.getNavigableBlockStore();if(!n)return;const o=(0,r().zo)({blockStore:n,transclusionReferences:"omit",childPages:"omit"});for(const i of o){const e=i.getFormatStore();(null==e?void 0:e.getKeyValue("created_by_transcription_block_id"))===t.id&&(yield i)}}function v(e){return e.isElectron||e.isMobile}function h(e){var t;const n=null===(t=e.getModel())||void 0===t?void 0:t.getFormat();return(null==n?void 0:n.transcription_state)??{state:"idle"}}function _(){if(a().default.checkGate({gateName:"meeting_notes_override"}))return!0;const e=(0,s().AI)();return(0,l().h)()&&"enterprise"!==e&&a().default.checkGate({gateName:"meeting_notes"})}},540758:(e,t,n)=>{n.d(t,{B1:()=>i,Bd:()=>r,fF:()=>a});var o=()=>n(670631);function i(e){var t;return Boolean(null===(t=o().A.state.offlinePages)||void 0===t?void 0:t[e])}function r(e){var t;return Boolean("success"===(null===(t=o().A.state.offlinePages)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.downloadStatus))}function a(e){var t;return Boolean(null===(t=o().A.state.offlinePages)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.isExplicitlyOfflinedOrigin)}},541258:(e,t,n)=>{n.d(t,{AG:()=>Se,LU:()=>ge,bC:()=>ve,cL:()=>me,gB:()=>he,w:()=>fe});n(898992),n(354520),n(672577);var o=()=>n(249386),i=()=>n(584262),r=()=>n(244309),a=()=>n(857639),s=()=>n(243020),l=()=>n(179034),c=()=>n(869558),d=()=>n(959044),u=()=>n(798880),p=()=>n(294712),m=()=>n(495989),g=()=>n(677338),f=()=>n(994310),v=()=>n(319625),h=()=>n(498212),_=()=>n(939768),b=()=>n(720665),y=()=>n(466721),S=()=>n(989423),w=()=>n(68465),k=()=>n(492414),I=()=>n(108944),x=()=>n(836251),A=()=>n(719431),C=()=>n(457222),T=()=>n(431481),M=()=>n(792415),P=()=>n(351360),B=()=>n(546574),R=()=>n(187959),E=()=>n(973618),D=()=>n(865688),N=()=>n(990261),L=()=>n(650031),O=()=>n(630116),U=()=>n(793765),F=()=>n(543491),V=()=>n(250484),j=()=>n(224701),z=()=>n(263928),H=()=>n(541801),W=()=>n(373444),q=()=>n(452939),K=()=>n(515402),G=()=>n(673998),$=()=>n(901389),Y=()=>n(824772),Q=()=>n(664133),Z=()=>n(433052),X=()=>n(324234),J=()=>n(572080),ee=()=>n(730570),te=()=>n(507785),ne=()=>n(5705),oe=()=>n(435009),ie=()=>n(260488),re=()=>n(426116),ae=()=>n(751156),se=()=>n(633457),le=()=>n(840153),ce=()=>n(457395),de=()=>n(755199),ue=()=>n(664713);let pe=null;function me(e){P().default.setState(P().default.getInitialState());const{id:t}=e.currentUser;(!P().default.state.currentUserStore||t&&t!==P().default.state.currentUserStore.id)&&(t?(ce().n(e,t),Z().uv(e,t),he(e,t)):(P().default.setState({...P().default.state,initialized:!0}),G().$V(e)))}function ge(){const{currentSpaceStore:e}=P().default.getState();return e?e.id:void 0}async function fe(e){const{nextRoute:t,currentRoute:n,environment:u,query:p}=e,m=P().default.state.mainEditorCurrentBlockStore,f=P().default.state.currentCollectionViewStore,b=u.currentUser.id,I=e=>{P().default.state.lastUpdater===I&&(u.device.isMobileNative&&e.currentSpaceStore&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"AppStore setting space with update in updateCurrentRoute: ",spaceId:e.currentSpaceStore.id}}),P().default.setState({...P().default.state,...e}))};P().default.setState({...P().default.state,lastUpdater:I});let x;if("page"===t.name&&t.queryId&&t.blockId&&F().A.setState({queryId:t.queryId,pageId:t.blockId,timeEntered:new Date}),"marketplace"===t.name){const{currentSpaceStore:e}=P().default.state;if(!(null==e?void 0:e.id)){const{spaceId:e}=await Z().wA(u);x=e}}if("page"===t.name||"space"===t.name||"nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"marketplace"===t.name||"team"===t.name||"posts"===t.name){let e,c;const f=async()=>(e||(e=await te().cG({environment:u,request:{type:"block-space",...t},ignoreLocalResult:"nativeRedirect"===(null==n?void 0:n.name)})),await P().default.waitUntil((()=>P().default.state.initialized)),c=e.spaceId,(e=>{P().default.state.lastUpdater===I&&M().A.setState({publicPageData:e})})(e),e),R=(0,g().oJ)();if((0,w().N9)(u),"page"!==t.name||P().default.state.currentSpaceStore&&m&&m.id===t.blockId&&(!n||"page"!==n.name||n.blockId===t.blockId)&&m.userId===b){if("space"===t.name){const e=await f();if(e.publicHomePage){const t=new(O().Bv)(u,{table:l().ev,id:e.publicHomePage}),n=new(D().A);I({mainEditorCurrentBlockStore:t,currentLoadingContainerStore:n})}else if(I({mainEditorCurrentBlockStore:void 0,currentLoadingContainerStore:void 0}),ye({environment:u,publicPageData:e}))return void Se({spaceDomain:e.spaceDomain,environment:u})}else if("nativeTab"===t.name||"quickSearch"===t.name||"chat"===t.name||"marketplace"===t.name||"team"===t.name||"posts"===t.name){ne().KO(u),ne().b$(u),we(),ne().aD(u),await P().default.waitUntil((()=>P().default.state.initialized));const e="spaceId"in t?t.spaceId:void 0;if((!P().default.state.currentSpaceViewStore||!P().default.state.currentSpaceStore||e&&P().default.state.currentSpaceStore.id!==e)&&P().default.state.currentUserRootStore){var q;const n=P().default.state.currentUserRootStore.getSpaceViewStores();let o=n[0];if(e){const t=n.find((t=>{var n;return(null===(n=t.getSpaceId())||void 0===n?void 0:n.replaceAll("-",""))===(null==e?void 0:e.replaceAll("-",""))}));o=t||o}else if(x){const e=n.find((e=>{var t,n;return(null===(t=e.getSpaceId())||void 0===t?void 0:t.replaceAll("-",""))===(null===(n=x)||void 0===n?void 0:n.replaceAll("-",""))}));o=e||o}const i=null===(q=o)||void 0===q?void 0:q.getSpaceStore();if(o&&i){var G,X;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:`updateCurrentRoute updating space because it's native tab and current space store id (${null===(G=P().default.state.currentSpaceStore)||void 0===G?void 0:G.id}, spaceView: ${null===(X=P().default.state.currentSpaceViewStore)||void 0===X?void 0:X.id}) doesn't match nextRoute space id`,spaceId:e}});I({currentSpaceStore:i,currentSpaceViewStore:o});const n="chat"===t.name,r="marketplace"===t.name,s="team"===t.name,l="posts"===t.name;if(b&&(n||r||s||l)){const e=i.id;ue().Z({environment:u,spaceId:e,userId:b}),se().bG({environment:u,spaceId:e,force:!1}),K().d({environment:u,spaceId:e,force:!1}),Q().zo({environment:u,spaceId:e}),j().$D({environment:u,spaceId:e})}}}("chat"===t.name||"nativeTab"===t.name&&"assistant"===t.tab||"marketplace"===t.name||"team"===t.name||"posts"===t.name)&&I({mainEditorCurrentBlockStore:void 0,currentCollectionViewStore:void 0})}}else{var le;let e,c=t.blockId;if(void 0!==t.slug&&!t.blockId){const n=await async function(e,t){const n=T().A.getBlockIdForSlug(e);if(n)return{blockId:n,publicPageData:void 0};const o=await t(),i=o.pageId;i&&T().A.setBlockIdForSlug(e,i);return{blockId:i,publicPageData:o}}(t.slug,f);c=n.blockId,e=n.publicPageData}if(!c)return void a().log({level:"error",from:"appActions",type:"missingBlockIdForPageRoute",data:{miscDataToConvertToString:{route:t}}});const g=new(O().Bv)(u,{table:l().ev,id:c}),v=g.getFormat().placeholder_workflow_template_id;if(g.isCollectionView()&&v){const{getCollectionTemplateFromId:e}=await H().tA.load(),t=e(v);if(t){const{onNavigateToPlaceholderWorkflowTemplateBlock:e}=await W().O.load(),{didOpenOnboardingModal:n}=e({environment:u,collectionTemplate:t,collectionViewBlockStore:g});if(n)return void oe().aX(u)}}t.blockId=c,"page"===(null==n?void 0:n.name)&&null!=n&&n.chatThreadId&&g.getSpaceId()===(null==m?void 0:m.getSpaceId())&&(t.chatThreadId=n.chatThreadId),ne().KO(u),ne().b$(u),we(),ne().aD(u);const w=new(D().A);I({mainEditorCurrentBlockStore:g,currentLoadingContainerStore:w}),m||await ve({environment:u,store:g}),e||(e=await f());const{currentUserSettingsStore:x}=P().default.state;if(ye({environment:u,publicPageData:e}))return void function(e){const{store:t,environment:n}=e,o=(0,k().Ay)({store:t,preferPublicLink:!1,pageVisitSource:void 0});oe().oo({environment:n,url:o})}({store:g,environment:u});const{presenceStore:M,currentUserRootStore:E}=P().default.state;ee().J(M,u,N().uk,m),y().FZ(u,{blockStore:g,fromPageRefresh:R,pageVisitStore:P().default.state.pageVisitStore,timestamp:Date.now()}),B().A.resetIfNotCurrentPage(g.id);const U=new(L().A);I({presenceStore:U});const F=N().uk.getCurrentPageVisitId();if(N().uk.initializeNewPageVisitId(),ee().I({userId:b,authorizationToken:e.presenceAuthorizationToken,rootStore:g,presenceStore:U,environment:u,pageVisitIdStore:N().uk}),E){const t=E.getSpaceViewStores().filter((t=>t.getSpaceId()===e.spaceId)).length>0;if("root"===(null==n?void 0:n.name)&&(void 0===e.spaceId||!t&&!e.isDLSViewer))if(x)u.device.isMobileNative&&a().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{message:"SpaceDebug: navigateToFirstSpace because updateCurrentRoute is root and page is not in current spaceView"}}),await re().t9({environment:u,userRootStore:E,userSettingsStore:x,pageVisitSource:e.isPublicShareLink||e.isEditableOrCommentableSite?i().y8.PublicShareLink:i().y8.BackForward});else if(b)return void(await A().logoutSingleAccount({environment:u,userId:b,logoutOrigin:s().d.NoAvailableSpaces}));const o=!e.isDLSViewer&&e.canJoinSpace,r=e.isPublicShareLink&&!e.userHasExplicitAccess&&!t;if(e.spaceId&&(o||e.userHasExplicitAccess)&&!r){const t=await re().DT({environment:u,userRootStore:E,spaceId:e.spaceId,navigate:!1,analyticsFrom:"redirect",userSettingsStore:x,redirectSource:"update_current_route_with_space_id"});u.device.isMobileNative&&a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because the route is a page with spaceId",spaceId:e.spaceId}}),I({currentSpaceViewStore:t.spaceViewStore,currentSpaceStore:t.spaceViewStore.getSpaceStore()})}else if(!e.spaceId&&P().default.state.currentSpaceStore){const e=await re().DT({environment:u,userRootStore:E,spaceId:P().default.state.currentSpaceStore.id,navigate:!1,analyticsFrom:"redirect",userSettingsStore:x,redirectSource:"update_current_route_no_space_id"});var ce;if(u.device.isMobileNative)a().log({level:"info",from:"appActions",type:"SpaceSwitchingDebug",data:{message:"updateCurrentRoute updating space because of joinSpaceResult of current space",spaceId:null===(ce=e.spaceViewStore)||void 0===ce?void 0:ce.getSpaceId()}});I({currentSpaceViewStore:e.spaceViewStore,currentSpaceStore:e.spaceViewStore.getSpaceStore()})}}e.spaceId&&b&&(ue().Z({environment:u,spaceId:e.spaceId,userId:b}),z().J({environment:u,spaceId:e.spaceId,userId:b}));const V=null==E?void 0:E.getSpaceViewStores(),q=null==V||null===(le=V.filter((e=>e.getSpaceId()===g.getSpaceId())))||void 0===le?void 0:le[0],G=Boolean(void 0!==q),{currentSpaceStore:$}=P().default.state;$?(j().$D({environment:u,spaceId:$.id}).then((async()=>{await g.load();const n=g.getAssociatedCollectionStore();n&&(0,C().EE)({type:"rank_by_recently_visited",targetCollectionId:n.id,pageId:g.id}),be(u,g,p,N().uk,F,t.slug,e.userHasExplicitAccess,e.isDLSViewer,e.trustedDomains,G,t.embedded)})),S().uX(u)):e&&e.spaceId&&(await g.load(),be(u,g,p,N().uk,F,t.slug,e.userHasExplicitAccess,e.isDLSViewer,e.domainLinkSharingEnabledDomains,G,t.embedded)),async function(e,t,n){const a=(0,_().qg)(t).query,s=a[o().BM];if(parseInt(a[i().k3])===i().y8.Email&&(s.includes("email_digest")||s.includes("email_push"))&&a[i().rh]&&n){const t=(0,h().np)(a[i().rh]),o=O().Tu.createChildStore(n,{table:d()._p,id:t,spaceId:n.id});await o.load();const s=o.getModel();if(!s)return;if((0,r().v)((0,S().ik)(e),{alreadyRead:s.getRead(),notificationId:t,activityId:s.getActivityId(),from:"email"}),!s.getRead()){const t={id:s.id,space_id:s.getSpaceId(),read:s.getRead(),type:s.getType()};ae().createAndCommit({userAction:"appActions.setNotificationAsReadFromEmail",environment:e,canUndo:!0,perform:e=>J().ZB({notification:t,rootStore:n,transaction:e,read:!0})})}}}(u,p,$);const Y=(null==$?void 0:$.id)||e.spaceId;Y&&(se().bG({environment:u,spaceId:Y,force:!1}),K().d({environment:u,spaceId:Y,force:!1}),Q().zo({environment:u,spaceId:Y}))}if("team"===t.name||"page"===t.name){const{currentSpaceStore:e}=P().default.state,n=(null==e?void 0:e.id)||c;Z().fm({route:t,userId:b,spaceId:n})}if("searchQuery"in t||"searchRequest"in t)if(t.searchQuery)ie()._N({environment:u,analyticsFrom:"query-args"}),V().Ay.setState({...V().Ay.state,query:{...V().Ay.state.query,text:t.searchQuery}});else if(t.searchRequest)try{const e=JSON.parse(t.searchRequest),{text:n,sort:o,filters:i}=e;p&&V().Ay.setState({...V().Ay.state,query:{text:n,sort:o,filters:i}}),U().Ay.setState({...U().Ay.state,showDebugInfo:!0,debug:"everything"})}catch(me){$().c1("Invalid json in searchRequest param"),a().log({level:"error",from:"appActions",type:"JSONParseError",error:{miscDataString:(0,v().A)(me).message}})}Y().fD(u),(0,g().ED)(!1)}const de=f?f.id:void 0;if("page"===t.name&&de!==t.collectionViewId){const e=t.collectionViewId;I({currentCollectionViewStore:e?new(O().pS)(u,{table:c().Gy,id:e}):void 0})}const pe=(0,_().qg)(p).query[i().ec];Boolean(pe)&&(E().E.setState(!0),R().A.setState({open:!0}))}async function ve(e){const{environment:t,store:n}=e,o=await async function(e){const{environment:t,blockId:n}=e,{currentUser:o}=t,i=(0,b().sb)([...o.id?[o.id]:[],...o.loggedInUserIds]);for(const r of i){const e=new(O().Bv)(t,{table:l().ev,id:n},{userId:r});if(await e.load(),e.isDefined())return o.id===r?void 0:r}}({environment:t,blockId:n.id});o&&await le().V({newCurrentUserId:o,environment:t,store:n})}async function he(e,t){const n=new(O().LU)(e,{table:u().oo,id:t},{userId:t}),o=new(O().GG)(e,{table:m().xM,id:t},{userId:t});o.addListener(_e);const i=new(O().dZ)(e,{table:p().GD,id:t},{userId:t});X().registerPushNotifications(e),P().default.setState({...P().default.state,currentUserStore:n,currentUserSettingsStore:o,currentUserRootStore:i,initialized:!1}),await ce().y(),P().default.setState({...P().default.state,initialized:!0}),de().sM(e),G().kE(e)}function _e(e){const t=e.getSettingsStore().getKeyStore("preferred_locale").getValue();t||f().A.set("preferredLocale",t)}function be(e,t,n,o,i,r,a,s,l,c,d){var u,p;const m=t.getAssociatedCollectionStore(),g=null==m?void 0:m.getLayoutStore(),f=Boolean(null==g?void 0:g.firstModuleOfType("viewsMain"));q().yP(e,{query:n,page_id:t.id,is_peek:!1,peek_mode:void 0,type:q().ND(t),collection_id:(null==m?void 0:m.id)??(null===(u=t.getCollectionStore())||void 0===u?void 0:u.id),layout_id:null==g?void 0:g.id,layout_has_tabbed_structure:f,form_id:t.isFormBlock()?t.id:void 0,team_id:null===(p=(0,I().Uo)(t))||void 0===p?void 0:p.id,page_visit_id:o.getCurrentPageVisitId(),previous_page_visit_id:i,slug:r,user_has_explicit_access:a,is_dls_viewer:s,trusted_domains:l,has_space_view_for_page:c,embedded:d})}function ye(e){const{environment:t,publicPageData:n}=e;return!(!(0,x().w6)(t)||"none"!==n.publicAccessRole||!n.spaceName)}function Se(e){const{spaceDomain:t,environment:n}=e,o=(0,x().j5)(t);oe().oo({environment:n,url:o,redirect:!0})}function we(){pe&&pe.close()}},541372:(e,t,n)=>{n.d(t,{Ce:()=>U,GV:()=>O,T_:()=>P,Tw:()=>M,VN:()=>B,Xw:()=>L,ei:()=>E,gi:()=>C,h8:()=>D});n(16280),n(18107),n(967357),n(898992),n(823215),n(581454),n(737550);var o=()=>n(584262),i=()=>n(700500),r=()=>n(921940),a=()=>n(696706),s=()=>n(179034),l=()=>n(919709),c=()=>n(496603),d=()=>n(534177),u=()=>n(780054),p=()=>n(989423),m=()=>n(186445),g=()=>n(969197),f=()=>n(695625),v=()=>n(430483),h=()=>n(84349),_=()=>n(77246),b=()=>n(630116),y=()=>n(292167),S=()=>n(44729),w=()=>n(246826),k=()=>n(797265),I=()=>n(778417),x=()=>n(319975),A=()=>n(751156);function C(e){const{environment:t,blocks:n,copiedStores:o,pageSource:i}=e,r=c().HV(n);if(!r)return;const a=f().T.getRectFromStore(r);a&&(h().A.setState({open:!0,type:"blocks",blocks:n,rect:a,copiedStores:o,pageSource:i}),(0,p().u4)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"blocks"}}}))}const T=250;function M(e){if(!v().zD.areAiActionsOnPasteEnabled())return!1;const{blocks:t,environment:n}=e;if(!t.some((e=>e.isAiFollowupEligibleBlock())))return!1;if((0,g().Rg)(t,!0).length<T)return!1;const o=t.at(0);if(!o)return!1;const i=f().T.getRectFromStore(o);return!!i&&(h().A.setState({open:!0,type:"ai_actions",blocks:t,rect:i}),(0,p().u4)({environment:n,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"ai_actions"}}}),!0)}function P(e){const{environment:t,blocks:n,copiedLinks:o,rootStore:i}=e;if(n.length!==o.length)return!1;if(!n.every(R))return!1;if(o.some((e=>e.blockId===i.id)))return!1;const r=c().HV(n);if(!r)return!1;const a=f().T.getRectFromStore(r);return!!a&&(h().A.setState({open:!0,type:"links",blocks:n,rect:a,copiedLinks:o}),(0,p().u4)({environment:t,event:{eventName:"block_paste_menu_opened",eventProperties:{type:"links"}}}),!0)}function B(e){h().A.state.open&&(0,p().u4)({environment:e,event:{eventName:"block_paste_menu_closed",eventProperties:{type:h().A.state.type}}}),h().A.setState({open:!1})}function R(e){return!(e.isType(i().xd.copyIndicator)||e.isTransclusionType()||e.isInsideCollection())}function E(e){const{blocks:t,pageSource:n,wasContiguousSelection:o,action:r,rootStore:s,copiedStores:l}=e,c=_().Uv.getMode(t[0]);return"copy"===r&&o&&!(0,a().Z2)(n,s.pointer)&&(D(e)||O({currentSpaceId:s.getSpaceId(),...e}))&&t.every(R)&&!l.every((e=>e.getType()===i().xd.externalObjectInstance))&&"suggest"!==c}function D(e){const{blocks:t}=e;return 1===t.length}function N(e){const{transaction:t,blockUrl:n,spaceId:o,environment:r}=e,a=w().Wv({environment:r,type:i().xd.text,inMemoryRecordCache:r.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:o}),s=[(0,l().Ey_)(n,[(0,l().Sez)(n)])];return x().R9({environment:r,store:a.getBlockTitleStore(),value:s,transaction:t}),a}async function L(e){const{environment:t,blocks:n,source:i}=e,a=c().$1(n);if(!a)return;const l=a.getParentBlockStore();if(!l)return;const p=a.getContentStore();let m;await A().createAndCommitAsync({environment:t,userAction:"blockPasteMenuActions.acceptLinkToPage",waitForServerCommit:!0,perform:async e=>{if("blocks"===i.type){const{copiedStores:n,pageSource:c}=i,d=a,g=n[0];if(!d||!g)return;const f=b().Bv.createChildStore(p,{table:s().ev,id:g.id});if(f.isNavigableBlock())await f.load(),m=[y().s({environment:t,parentBlockStore:l,targetStore:f,transaction:e})];else{const n=(0,r().A)({pageId:c.id,scrollToBlockId:f.id,baseUrl:u().A.domainBaseUrl,pageVisitSource:o().y8.LinkInPage});m=[N({blockUrl:n,spaceId:a.getSpaceId(),environment:t,transaction:e})]}}else if("links"===i.type){const{copiedLinks:d}=i;if(d.length!==n.length)return;m=(0,c().oE)(await Promise.all(d.map((async n=>{const i=n.scrollToBlockId||n.peekViewBlockId||n.blockId;if(i){const c=b().Bv.createChildStore(p,{table:s().ev,id:i});if(await c.load(),c.isNavigableBlock())return y().s({environment:t,parentBlockStore:l,targetStore:c,transaction:e});{const i=n.peekViewBlockId||n.blockId;if(i){const n=b().Bv.createChildStore(p,{table:s().ev,id:i});await n.load();return N({blockUrl:(0,r().A)({pageId:i,pageModel:n.getModel(),scrollToBlockId:c.id,baseUrl:u().A.domainBaseUrl,pageVisitSource:o().y8.LinkInPage}),spaceId:a.getSpaceId(),environment:t,transaction:e})}}}}))))}else(0,d().HB)(i);const g=k().LE({environment:t,blocksToInsert:m,target:n,replaceEmptyTextBlock:!0,transaction:e});k().ZL({environment:t,blocks:n,transaction:e}),I().td({environment:t,stores:g}),B(t)}})}function O(e){const{currentSpaceId:t,blocks:n,copiedStores:o}=e;return n.length>0&&!o.some((e=>e.isInsideCollection()))&&o.every((e=>e.canEdit()))&&o.every((e=>e.getSpaceId()===t))}async function U(e){const{environment:t,blocks:n,copiedBlockIds:o}=e,r=await Promise.all(o.map((async e=>{const t=b().Bv.createChildStore(n[0],{table:s().ev,id:e});await t.load();const o=t.getParentBlockStore();if(!o)throw new Error("Block has no parent.");await o.load();const i=o.getContentStore();return{store:b().Bv.createChildStore(i,{table:s().ev,id:e}),parentStore:o,parentContentStore:i}}))),a=r[0];if(!a)return;const l=(0,m().ZO)();if(!l)return;const{serverCommitResult:c}=A().createAndCommit({userAction:"blockPasteMenuActions.acceptCreateTransclusion",environment:t,canUndo:!0,perform:e=>{let o;if(a.store.getType()===i().xd.transclusionContainer)o=a.store;else if(a.store.getType()===i().xd.transclusionReference){const e=a.store.getTransclusionReferenceTargetStore();if(!e)throw new Error("Could not find target");o=e}else if(a.parentStore.getType()===i().xd.transclusionContainer)o=a.parentStore;else{o=w().Wv({environment:t,type:i().xd.transclusionContainer,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:a.store.pointer.spaceId});const n=o.getContentStore();S().Br({parentStore:a.parentContentStore,oldChildStore:a.store,newChildStore:o,transaction:e});for(const{store:t}of r)S().NI({parentStore:n,childStore:t,transaction:e})}const s=w().Wv({environment:t,type:i().xd.transclusionReference,format:{transclusion_reference_pointer:o.pointer},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:0!==n.length?n[n.length-1].pointer.spaceId:l.pointer.spaceId}),c=k().LE({environment:t,blocksToInsert:[s],target:n,transaction:e,replaceEmptyTextBlock:!0});k().ZL({environment:t,blocks:n,transaction:e}),I().td({environment:t,stores:c}),B(t)}});await c}},541801:(e,t,n)=>{n.d(t,{JA:()=>c,P6:()=>s,W3:()=>l,tA:()=>d,vK:()=>r,wT:()=>a,xl:()=>u});var o=()=>n(645873);const i={WorkflowSettingsViews:new(o().O2)("WorkflowSettingsViews",(()=>Promise.all([n.e(75134),n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(7605),n.e(92579)]).then(n.bind(n,216304)))),WorkflowTemplatesTooltip:new(o().O2)("WorkflowTemplatesTooltip",(()=>Promise.all([n.e(63077),n.e(20636),n.e(24598)]).then(n.bind(n,428137)))),WorkflowSettingsLinkedCollections:new(o().O2)("WorkflowSettingsLinkedCollections",(()=>Promise.all([n.e(75134),n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(7605),n.e(15399)]).then(n.bind(n,765556)))),WorkflowSettingsConfirmAddTemplate:new(o().O2)("WorkflowSettingsConfirmAddTemplate",(()=>Promise.all([n.e(75134),n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(7605),n.e(24708)]).then(n.bind(n,960127)))),WorkflowTemplatesOnboardingModal:new(o().O2)("WorkflowTemplatesOnboardingModal",(()=>Promise.all([n.e(75134),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(58550),n.e(22900),n.e(32257),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(12341),n.e(87598),n.e(86787),n.e(20636),n.e(15529)]).then(n.bind(n,56565))))},r=(0,o()._h)(i.WorkflowSettingsViews,(e=>e.WorkflowSettingsViews)),a=(0,o()._h)(i.WorkflowTemplatesTooltip,(e=>e.WorkflowTemplatesTooltip)),s=(0,o()._h)(i.WorkflowSettingsLinkedCollections,(e=>e.WorkflowSettingsLinkedCollections)),l=(0,o()._h)(i.WorkflowSettingsConfirmAddTemplate,(e=>e.WorkflowSettingsConfirmAddTemplate)),c=(0,o()._h)(i.WorkflowTemplatesOnboardingModal,(e=>e.WorkflowTemplatesOnboardingModalWithErrorBoundary)),d=new(o().O2)("workflowTemplatesHelpers",(()=>Promise.all([n.e(63077),n.e(71204)]).then(n.bind(n,913454)))),u=new(o().O2)("loadWorkflowTemplateInstances",(async()=>n.e(17586).then(n.bind(n,191458))))},543225:(e,t,n)=>{n.d(t,{B:()=>r});var o=()=>n(751156),i=()=>n(299545);function r(e){const{transaction:t,blockStore:n,discussionId:r}=e,a=i().bN(n);return o().applyOperation({store:a,operation:{pointer:a.pointer,path:a.path,command:"listAfter",args:{id:r}},transaction:t}),a}},543491:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){}}const i=new o},544073:(e,t,n)=>{n.d(t,{C9:()=>l,LA:()=>u,_t:()=>p,qg:()=>m});var o=()=>n(415566),i=()=>n(419942),r=()=>n(177256),a=()=>n(959013),s=()=>n(972435);const l={table:"side_peek",board:"side_peek",calendar:"center_peek",list:"side_peek",gallery:"center_peek",timeline:"side_peek",page:"side_peek",chart:"side_peek",form_editor:"side_peek",feed:"side_peek",map:"center_peek",chat:"side_peek",custom:"side_peek"},c=(0,a().YK)({side_peek:{defaultMessage:"Side peek",id:"database.viewPropertiesMenu.peekMode.sidePeek"},center_peek:{defaultMessage:"Center peek",id:"database.viewPropertiesMenu.peekMode.centerPeek"},full_page:{defaultMessage:"Full page",id:"database.viewPropertiesMenu.peekMode.fullPage"}}),d=(0,a().YK)({side_peek:{defaultMessage:"Open pages on the side. Keeps the view behind interactive.",id:"database.viewPropertiesMenu.peekMode.description.sidePeek"},center_peek:{defaultMessage:"Open pages in a focused, centered modal.",id:"database.viewPropertiesMenu.peekMode.description.centerPeek"},full_page:{defaultMessage:"Open pages in full page.",id:"database.viewPropertiesMenu.peekMode.description.fullPage"}});function u(e){switch(e){case"side_peek":return s().A.formatMessage(c.side_peek);case"center_peek":return s().A.formatMessage(c.center_peek);case"full_page":return s().A.formatMessage(c.full_page)}}function p(e){switch(e){case"side_peek":return s().A.formatMessage(d.side_peek);case"center_peek":return s().A.formatMessage(d.center_peek);case"full_page":return s().A.formatMessage(d.full_page)}}function m(e){switch(e){case"side_peek":return r().A;case"center_peek":return o().q;case"full_page":return i().o}}},544303:(e,t,n)=>{n.d(t,{GB:()=>l,KK:()=>_,WN:()=>b,ao:()=>u,cJ:()=>p,sK:()=>c});n(944114);var o=()=>n(700500),i=()=>n(634201),r=()=>n(179034),a=()=>n(534177),s=()=>n(630116);function l(e){if(0===e)return"a";let t=0,n=0,o="";for(;e>0;)t=(e-1)/26,n=(e-1)%26,e=Math.floor(t),o=String.fromCharCode(97+n)+o;return o}function c(e){let t=0,n=0;const o=e.split("").reverse();for(const i of o){t+=(i.charCodeAt(0)-96)*26**n,n+=1}return t}const d={"m̄":1e6,"d̄":5e5,"c̄":1e5,"l̄":5e4,"x̄":1e4,"v̄":5e3,m:1e3,cm:900,d:500,cd:400,c:100,xc:90,l:50,xl:40,x:10,ix:9,v:5,iv:4,i:1};function u(e){let t="";if(0===e)return"0";for(const n of(0,a().uv)(d)){const o=Math.floor(e/d[n]);if(o>=0)for(let e=0;e<o;e++)t+=n;e%=d[n]}return t}function p(e){const t=i().PE(e);let n,o,r,a,s=0;for(let i=0;i<t.length;i++){if(n=t[i],o=n?d[n]:void 0,r=t[i+1],a=r?d[r]:void 0,!o)return-1;a&&o<a?s-=o:s+=o}return s}const m=4.44,g={i:3.64,v:8.36,x:8.08,l:3.73,c:8.64,d:9.52,m:13.61,"m̄":13.61,"d̄":9.52,"c̄":8.64,"l̄":3.73,"x̄":8.08,"v̄":8.36};function f(e){const t=i().PE(e);let n=0;for(const o of t)n+=g[o];return n+m}const v=[24],h=14;function _(e){const t=p(e);if(t<=v.length)return v[t-1];let n=v[v.length-1];for(let o=v.length+1;o<=t;o++){const e=f(u(o));e>n&&(n=e+h),v.push(n)}return n}function b(e){const{blockIds:t,parentStore:n}=e,i=[];let a=0;for(;a<t.length;){let e=t[a],l=s().Bv.createChildStore(n,{table:r().ev,id:e});if(l.getType()===o().xd.numberedList){const c=[{blockId:e,idx:1}],d=[{id:e,format:void 0,depth:c.length-1,index:c[0].idx}];for(a+=1;a<t.length&&(e=t[a],l=s().Bv.createChildStore(n,{table:r().ev,id:e}),l.getType()===o().xd.numberedList);){{const t=l.getParentId();if(l.getParentId()===c[c.length-1].blockId)c.push({blockId:e,idx:1});else{let n=c[c.length-1].idx;for(;c.length>0&&c[c.length-1].blockId!==t;)n=c[c.length-1].idx,c.pop();c.push({blockId:e,idx:n+1})}d.push({id:e,format:void 0,depth:c.length-1,index:c[c.length-1].idx})}a+=1}i.push(d)}else a+=1}return i}},545206:(e,t,n)=>{n.d(t,{A:()=>r,z:()=>o});const o=3e4;class i extends(()=>n(757695))().default{getInitialState(){return{}}}const r=new i},545285:(e,t,n)=>{n.d(t,{u:()=>o});function o(e){return i[e.table]}const i={block:!0,notion_user:!0,space:!0,space_bot:!0,space_permission_group:!0,space_permission_group_member:!0,space_user:!0,organization:!0,organization_space:!0,space_view:!0,user_root:!0,collection:!0,collection_view:!0,follow:!0,discussion:!0,comment:!0,user_settings:!0,slack_integration:!0,bot:!0,integration:!0,space_invite_link:!0,page_visit:!0,page_exit:!0,[n(402904).As]:!0,team:!0,[n(204384).ez]:!0,[n(310442).yj]:!0,[n(123382).MC]:!0,[n(144081).zx]:!0,[n(837420).e]:!0,[n(63128).Ay]:!0,[n(921515).rM]:!0,[n(144986).WQ]:!0,activity:!1,notification:!1,access_request:!1,customer:!1,temporary_password:!1,password:!1,slack_notification:!1,snapshot:!1,credit:!1,used_credit:!1,space_recover_pages:!1,user_metadata:!1,saml_config:!1,experiment:!1,education_domain:!1,education_email:!1,public_email_domain:!1,user_data_consent_permissions:!1,token:!1,apple_token:!1,google_token:!1,firebase_token:!1,trello_token:!1,asana_token:!1,confluence_token:!1,monday_token:!1,external_entity:!1,external_integration_app:!1,external_token:!1,evernote_token:!1,drive_token:!1,block_token:!1,bot_token:!1,integration_token:!1,subscription:!1,space_domain:!1,admin_api_log:!1,admin_api_op_log:!1,oauth_authorization_code:!1,mfa_settings:!1,device:!1,user_device:!1,[n(343747).rG]:!1,[n(908651).p]:!1,[n(379922).o]:!1,[n(317727).$]:!1,[n(599677).h]:!1,[n(791036).W]:!1,[n(258911).h]:!1,[n(840911).Ps]:!1,[n(926397).Hx]:!1,[n(326399).XH]:!1,[n(545893).$]:!1,[n(426302).Yx]:!1,[n(912720).yB]:!1,[n(415292).sN]:!1,[n(526147).Fu]:!1,[n(199378).SC]:!1,[n(7615).Jm]:!1,[n(231460).sB]:!1,[n(324694).y]:!1,[n(412742)._0]:!1,[n(641284).a]:!1,[n(29568).gD]:!1,[n(197577).hR]:!1,[n(959577).XX]:!1,[n(192249).Hi]:!1,[n(87845).b]:!1,[n(527925).v]:!1,[n(529745).Ht]:!1,[n(664540).K]:!1,[n(666450).UL]:!1,[n(827570)._F]:!1,[n(610409).P]:!1,[n(299816).y]:!1,[n(510618).W]:!1,[n(606219).TF]:!1,[n(363497).TF]:!1,[n(771927).Nm]:!1,[n(421076).yt]:!1,[n(204742).CE]:!1,[n(449418)._6]:!1,[n(853040).kf]:!1,[n(602468).Yx]:!1,[n(959017).h]:!1,[n(101628).Eu]:!1,[n(665344)._i]:!1,[n(266442).UN]:!1,[n(365970).en]:!1,[n(374982).QO]:!1,[n(549094).Eg]:!1,[n(736062).Kc]:!1,[n(197651).zi]:!1,[n(471987).XX]:!1,[n(581325).pE]:!1,[n(37165).lo]:!1,[n(783230).i]:!1,[n(837241).Z]:!1,[n(847866).iP]:!1,[n(193657).bh]:!1,[n(277816).A]:!0,[n(548632).YV]:!1,[n(296749).j]:!1,[n(506327).bw]:!1,[n(765008).eV]:!1,[n(633240).e]:!1,[n(232802).GU]:!1,[n(429485).Xh]:!1,[n(885316).s]:!1,[n(158158).o]:!1,[n(384148).eq]:!1,[n(591822).G]:!1,[n(474989).ns]:!1,[n(41693).H]:!1,[n(838968).m]:!1,[n(628588).G]:!1,[n(652106).k]:!1,[n(141150).Q]:!1,[n(829126).W]:!1,[n(978841).b]:!1,[n(62182).C]:!1,[n(743246).C0]:!1,[n(969752).Ec]:!1,[n(145820).QR]:!1,[n(39603).P]:!1,[n(541837).ly]:!1,[n(78881).N]:!1,[n(183541).tE]:!1,[n(758256).U6]:!1,[n(552826).yD]:!1,[n(234459).To]:!1,[n(155792).mS]:!1,[n(82904).Xi]:!1,[n(976617).H]:!1,[n(776217).bn]:!1,[n(192125).h]:!1,[n(379951).PX]:!1,[n(761152).I]:!1,[n(338180).o]:!1,[n(485819).n]:!1,[n(895180).S]:!1,[n(838838).KN]:!1,[n(40117).l]:!1,[n(623403).r]:!1,[n(767194).q]:!1,[n(952232).O]:!1,[n(741037).dP]:!1,[n(80518).kM]:!1}},545805:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(296540),i=()=>n(753004),r=()=>n(527606),a=n(474848);function s(e){const t=(0,o.useMemo)((()=>({enter:e.onEnter,shiftEnter:e.onShiftEnter,commandEnter:e.onCommandEnter,commandShiftEnter:e.onCommandShiftEnter,commandSlash:e.onCommandSlash,commandS:e.onCommandS,commandJ:e.onCommandJ,space:e.onSpace,delete:e.onDelete,deleteToEndOfLine:e.onDeleteToEndOfLine,deleteNextWord:e.onDeleteNextWord,backspace:e.onBackspace,esc:e.onEsc,left:e.onLeft,right:e.onRight,up:e.onUp,down:e.onDown,untab:e.onUntab,tab:e.onTab,ungroup:e.onUngroup,group:e.onGroup,home:e.onHome,end:e.onEnd,selectAll:e.onSelectAll,redo:e.onRedo,undo:e.onUndo,toggleUnderline:e.onToggleUnderline,toggleHighlight:e.onToggleHighlight,toggleBold:e.onToggleBold,toggleItalics:e.onToggleItalics,toggleStrike:e.onToggleStrike,toggleCode:e.onToggleCode,duplicate:e.onDuplicate,duplicateSchema:e.onDuplicateSchema,cut:e.onCut,copy:e.onCopy,paste:e.onPaste,openLinkMenuOrOpenSearch:e.onOpenLinkMenuOrOpenSearch,openEquationMenu:e.onOpenEquationMenu,goBack:e.onGoBack,goForward:e.onGoForward,newTab:e.onNewTab,commandLeft:e.onCommandLeft||e.onLeft,commandRight:e.onCommandRight||e.onRight,goUp:e.onGoUp,search:e.onSearch,goToBeginningOfLine:e.onGoToBeginningOfLine,goToEndOfLine:e.onGoToEndOfLine,switchSpacesPreTabs:e.onSwitchSpaces,switchSpacesPostTabs:e.onSwitchSpaces,keypress:e.onKeypress,quickFind:e.onQuickFind,goForwardOneChar:e.onGoForwardOneChar,goBackwardOneChar:e.onGoBackwardOneChar,moveUp:e.onMoveUp,moveDown:e.onMoveDown,peekUp:e.onPeekUp,peekDown:e.onPeekDown,comment:e.onComment,suggest:e.onSuggest,caption:e.onCaption,react:e.onReact,rename:e.onRename,copyLinkToCurrentPage:e.onCopyLinkToCurrentPage,copyLinkToPageInCommandSearch:e.onCopyLinkToPageInCommandSearch,copyLinkToBlock:e.onCopyLinkToBlock,copyCurrentPageLinkifiedBlockTitle:e.copyCurrentPageLinkifiedBlockTitle,toggleSidebar:e.onToggleSidebar,toggleUpdateSidebar:e.onToggleUpdateSidebar,toggleBothSidebars:e.onToggleBothSidebars,openCommentsTabInUpdateSidebar:e.onOpenCommentsTabInUpdateSidebar,openUpdatesTabInUpdateSidebar:e.onOpenUpdatesTabInUpdateSidebar,turnIntoType:e.onTurnIntoType,zoomIn:e.onZoomIn,zoomOut:e.onZoomOut,zoomReset:e.onZoomReset,newPage:e.onNewPage,newPageAndDictate:e.onNewPageAndDictate,settings:e.onSettings,backbutton:e.onBackButton,toggleDarkMode:e.onToggleDarkMode,dictate:e.onDictate,openFile:e.onOpenFile,moveTo:e.onMoveTo,toggleAllToggles:e.onToggleAllToggles,togglePropertyVisibility:e.onTogglePropertyVisibility,toggleRecordingInputLatency:e.onToggleRecordingInputLatency,toggleFavorite:e.onToggleFavorite,toggleAllUpdates:e.onToggleAllUpdates,toggleAllTeams:e.onToggleAllTeams,openHome:e.onOpenHome,openShareMenu:e.onOpenShareMenu,openInSidePeek:void 0,toggleInPageFindReplace:e.onToggleInPageFindReplace,openExperimentSettings:e.onOpenExperimentSettings,notionAiCommandSearchDefault:e.notionAiCommandSearchDefault,transcription:e.onTranscription})),[e]),n=(0,o.useContext)(i().q);return(0,a.jsx)(r().k,{enable:e.capture&&!n,priority:e.priority,shortcuts:t,debugName:e.debugName,innerKey:e.innerKey,children:e.children})}},546369:(e,t,n)=>{n.r(t),n.d(t,{getDataForStatsigUser:()=>m,waitForStatsigInitialization:()=>p});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(244641),i=()=>n(427704),r=()=>n(762433),a=()=>n(763824),s=()=>n(640653),l=()=>n(905654),c=()=>n(165162),d=()=>n(351360),u=()=>n(975971);async function p(e){const{environment:t,initializeStatsigResult:n}=e;if(n.initializedOnServer)try{const{timeout:e}=await(0,a().nQ)(function(e){const{environment:t}=e;if(t.device.isMobile)return function(){const e=(0,l().EU)();return new Set([i().JZ.signup,i().JZ.login,i().JZ.signupCalendar,i().JZ.loginCalendar,i().JZ.signupMail,i().JZ.loginMail]).has(e)}()?1e3:0;switch(t.device.platform){case"browser":switch(t.device.os){case"chrome":return 604;case"linux":return 613;case"mac":return 550;case"windows":return 633}break;case"electron":switch(t.device.os){case"chrome":return 1555;case"mac":return 1680;case"windows":return 1931}}return 700}({environment:t}),n.finishInitializePromise);return{didStatsigBootupTimeout:e}}catch(o){return{didStatsigBootupTimeout:!1}}return{didStatsigBootupTimeout:!1}}function m(e){var t,n,i,a;const{environment:l,deviceId:p,browserId:m}=e,{device:g,currentUser:f}=l,{currentUserStore:v,currentUserSettingsStore:h,currentSpaceStore:_}=d().default.getState(),b=f.id,y=null==v?void 0:v.getEmail(),S=null==_?void 0:_.id,{function:w,role:k,companySize:I,useCases:x}=s().p3(),A=S?null===(t=u().A.getData(l,{spaceId:S}))||void 0===t?void 0:t.billingData:void 0;return{stableId:(0,c().getOrCreateStableID)(),userId:b,device:g,spaceId:S,userEmail:y,deviceId:p,browserId:m,locale:null==h||null===(n=h.getSettings())||void 0===n?void 0:n.preferred_locale,spaceCreatedTime:null==_?void 0:_.getCreatedTime(),spaceCreatedDate:null!=_&&_.getCreatedTime()?o().c9.fromMillis(null==_?void 0:_.getCreatedTime()).toFormat("yyyy-MM-dd"):void 0,subscriptionTier:void 0===A?void 0:(0,r().AI)(A),isSalesAssistedPlan:(0,r().N8)(null==A?void 0:A.subscription),planType:null==_?void 0:_.getPlanType(),signupTime:null==h||null===(i=h.getSettings())||void 0===i?void 0:i.signup_time,domainType:null==h||null===(a=h.getSettings())||void 0===a?void 0:a.domain_type,persona:w,teamRole:k,useCases:x,companySize:I}}},546574:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(803949);class o extends(()=>n(757695))().default{getInitialState(){return{pageId:void 0,lastInteractionTimes:{}}}resetIfNotCurrentPage(e){e!==this.state.pageId&&this.reset()}markDiscussionsInteractedWith(e){const t={};e.forEach((e=>{t[e]=Date.now()})),this.setState({...this.state,lastInteractionTimes:t})}}const i=new o},546703:(e,t,n)=>{n.d(t,{r:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("g",{clipPath:"url(#clip0_9055_13169)",children:[(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 1.633 15.075 4.6 4.6 0 0 1-.228-1.23 6.375 6.375 0 1 1 4.815-4.814q.643.032 1.23.227A7.625 7.625 0 0 0 10 2.375"}),(0,o.jsx)("path",{d:"M7.365 9.665c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m-.187 1.872a.625.625 0 0 1 .867.169 2.36 2.36 0 0 0 1.96 1.044c.812 0 1.536-.416 1.96-1.044a.625.625 0 0 1 1.036.698A3.62 3.62 0 0 1 10.005 14a3.6 3.6 0 0 1-2.996-1.596.625.625 0 0 1 .169-.867m5.457-1.872c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m1.969-4.094h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375a.625.625 0 0 0 0-1.25"})]}),(0,o.jsx)("defs",{children:(0,o.jsx)("clipPath",{id:"clip0_9055_13169",children:(0,o.jsx)("path",{d:"M0 0h20v20H0z"})})})]})},r=(0,n(340498).wt)("emojiFacePlus",i)},547162:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1,content:null}}}const i=new o},547392:(e,t,n)=>{n.d(t,{Il:()=>E,MB:()=>C,MS:()=>x,Mg:()=>P,Rp:()=>T,Zd:()=>M,vZ:()=>A});n(16280),n(898992),n(823215),n(581454);var o=()=>n(908006),i=()=>n(700500),r=()=>n(592269),a=()=>n(708830),s=()=>n(496603),l=()=>n(186445),c=()=>n(299545),d=()=>n(20313),u=()=>n(969197),p=()=>n(861841),m=()=>n(630116),g=()=>n(611371),f=()=>n(317001),v=()=>n(656432),h=()=>n(415651),_=()=>n(675074),b=()=>n(826810),y=()=>n(722101),S=()=>n(246826),w=()=>n(797265),k=()=>n(778417),I=()=>n(725614);function x(e){const{environment:t,droppedDirection:n,droppedStores:o,targetStore:a,targetParentStore:l,transaction:c,duplicate:d,duplicateActions:u}=e,g=o.every((e=>e.isExternalObjectInstancePageBlockStore()))||d;if(a&&n===p().bH.Onto){k().IU({environment:t});const e=!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction());let n=a;if(a.isType(i().xd.alias)){const e=a.getAliasTargetStore();if(!e)throw new Error("Alias has no target.");e instanceof m().Bv&&(n=e)}const s=h().MS({environment:t,droppedStores:o,duplicate:g,transaction:c,resolveTemplateVariables:e,duplicateActions:u}),l=n.getCollectionStore();if(n.isCollectionView()&&!n.isCollectionViewPageWithContent()){if(!l)throw new Error("CollectionStore is not defined.");const e=(0,v().K)({environment:t,stores:s,transaction:c,spaceId:l.getSpaceId()});for(const n of e)(0,f().j)({environment:t,store:n,collectionStore:l,shouldCoerce:!0,groupsPointer:[],transaction:c});return e}{const e=n.getAssociatedCollectionStore();if(null!=e&&e.isPageTreeCollection())for(const n of s){if("page"!==n.getType())continue;if(!n.isDefined())continue;const t=r().Yt({blockProperties:n.getProperties(),oldSchema:n.getSchema(),newSchema:e.getSchema(),typesMatch:!1,oldPropertyMapping:void 0,newPropertyMapping:void 0});t.propertyUpdate&&Object.keys(t.propertyUpdate).length>0&&S().zv({store:n.getPropertiesStore(),data:t.propertyUpdate,transaction:c})}const t=n.getContentStore();for(const n of s)y().BC({parentStore:t,appendStore:n,transaction:c});return s}}{const e=!!a&&!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction(!1));let i=h().MS({environment:t,droppedStores:o,duplicate:g,transaction:c,resolveTemplateVariables:e,duplicateActions:u});return n===p().bH.Above?(i=s().o8(i),a?i=i.map((e=>y().nc({parentStore:l,insertStore:e,beforeStore:a,transaction:c}).childStore)):(i.reverse(),i=i.map((e=>y().Hs({parentStore:l,prependStore:e,transaction:c}).childStore)))):n===p().bH.Below?(i=s().o8(i),a?(i.reverse(),i=i.map((e=>y().WH({parentStore:l,insertStore:e,afterStore:a,transaction:c}).childStore))):i=i.map((e=>y().BC({parentStore:l,appendStore:e,transaction:c}).childStore))):a&&n===p().bH.Left?i=b().dC({environment:t,parentStore:l,insertStores:i,leftStore:a,transaction:c}):a&&n===p().bH.Right&&(i=b()._p({environment:t,parentStore:l,insertStores:i,rightStore:a,transaction:c})),w().x5({environment:t,insertedStores:i}),k().td({environment:t,stores:i}),i}}function A(e){const{environment:t,files:n,droppedDirection:o,targetStore:i,targetParentStore:r,transaction:a,duplicateActions:s}=e,c=r.inMemoryRecordCache,d=l().y0(t);x({environment:t,targetParentStore:r,targetStore:i,droppedDirection:o,droppedStores:_().$C({environment:t,files:n,inMemoryRecordCache:c,pageWidth:d,transaction:a,spaceId:null==i?void 0:i.pointer.spaceId}),duplicate:!1,transaction:a,duplicateActions:s})}function C(e){const{environment:t,targetStore:n,isAtStartOfLine:o}=e;(function(e){const{environment:t,isClick:n,targetStore:o}=e;if(!n)return!1;const r=o.findRecordStoreUIAncestor((e=>e instanceof m().Bv&&e.isTransclusionType())).ancestor;if(r&&r instanceof m().Bv){const e=o.findRecordStoreUIAncestor((e=>e instanceof m().Bv&&e.getType()===i().xd.transclusionReference)).ancestor,n=(e&&e instanceof m().Bv?e:void 0)||r,a=n.getRecordStoreUIParent();if(!a||!(0,c().iU)(a))return;return k().td({environment:t,stores:[n]}),!0}return!1})(e)||E({environment:t,store:n,isAtStartOfLine:o})||function(e){const{environment:t,targetStore:n,isAtStartOfLine:o}=e,i=k().Xc(),r=i.indexOf(n);if(-1===r)return!1;if(o)for(let a=r;a>=0&&a>r-20;a--){if(E({environment:t,store:i[a],isAtStartOfLine:!1}))return!0}else for(let a=r;a<i.length&&a<r+20;a++){if(E({environment:t,store:i[a],isAtStartOfLine:!0}))return!0}}(e)}function T(e){const{environment:t,targetStore:n,isAtStartOfLine:o}=e;E({environment:t,store:n,isAtStartOfLine:o})||R({...e,placement:"after"})}function M(e){return B({...e,destination:"page"})}function P(e){return B({...e,destination:"sibling"})}function B(e){const{environment:t,container:n,store:o,transaction:r,destination:l}=e,u=function(e){var t;const{container:n,store:o}=e;let r=(0,d().Ag)({includeNonSelectableListContainer:!0,container:n});r&&o&&(r=s().HV((0,a().Qe)([r],(e=>e.value.store===o))));if(!r)return;let l=r;for(;l.children.length>0;){const e=s().HV(l.children);if(0===e.children.length)break;const t=e.value.store.getType();if(t&&i().V4[t])break;l=e}return{parentStore:l.value.store,siblingStore:null===(t=s().HV(l.children))||void 0===t?void 0:t.value.store}}({container:n,store:o});if(!u)return!1;const{parentStore:p,siblingStore:g}=u;if(g&&(0,c().P4)(g))return!1;const f={sibling:p,page:p.getRecordStoreUIRoot()}[l];return f instanceof m().Bv&&(!f.isNonEditableState()&&R({environment:t,targetParentStore:f.getContentStore(),placement:"after",transaction:r}))}function R(e){const{environment:t,targetStore:n,targetParentStore:r,placement:a,transaction:s}=e;if(r.getValue()&&(0,g().EF)(t)&&(0,g().EF)(t)){const e=S().Wv({environment:t,type:i().xd.text,inMemoryRecordCache:r.inMemoryRecordCache,transaction:s,spaceId:r.pointer.spaceId}),l="after"===a?y().WH({parentStore:r,afterStore:n,insertStore:e,transaction:s}):y().nc({parentStore:r,beforeStore:n,insertStore:e,transaction:s});return o().default.afterNextFlush((()=>{E({environment:t,store:l.childStore,isAtStartOfLine:!1})})),!0}return!1}function E(e){const{environment:t,store:n,isAtStartOfLine:o}=e,i=(0,u().aI)(n);return!!i&&(k().hc({environment:t,store:n}),o?I().setSelectionAtStart({store:i}):I().setSelectionAtEnd({store:i}),!0)}},548527:(e,t,n)=>{n.d(t,{P:()=>i});var o=n(296540);function i(e){const t=(0,o.useRef)(null),[n,i]=(0,o.useState)(!1),r=(0,o.useMemo)((()=>new IntersectionObserver((e=>{let[t]=e;return i(t.isIntersecting)}),{...void 0!==e?{threshold:e}:{}})),[e]),a=(0,o.useCallback)((()=>{const e=t.current;e&&r.observe(e)}),[r]),s=(0,o.useCallback)((e=>{e?(t.current=e,a()):t.current=null}),[a]);return(0,o.useEffect)((()=>()=>r.disconnect()),[r]),[s,n]}},548821:(e,t,n)=>{n.d(t,{Ay:()=>a,Rr:()=>o,m8:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);let o=function(e){return e[e.Frame=0]="Frame",e[e.PeekView=1]="PeekView",e[e.InAppTemplatePreview=2]="InAppTemplatePreview",e[e.InPageSnapShot=3]="InPageSnapShot",e[e.CollectionViewBlockFullScreen=4]="CollectionViewBlockFullScreen",e[e.CollectionPageViewFullScreen=5]="CollectionPageViewFullScreen",e[e.CollectionPageView=6]="CollectionPageView",e[e.SitePreview=7]="SitePreview",e[e.Form=8]="Form",e[e.DraftPostInInlineComposer=9]="DraftPostInInlineComposer",e[e.PostInFullPageOrPeek=10]="PostInFullPageOrPeek",e[e.DraftPostInFullPageComposer=11]="DraftPostInFullPageComposer",e[e.PostInFeed=12]="PostInFeed",e[e.Presentation=13]="Presentation",e}({});const i=new Set([o.DraftPostInInlineComposer,o.PostInFeed]);class r extends(()=>n(757695))().default{getInitialState(){return{forceDiscussionOpen:!1,isPageDescriptionExpanded:!0}}}const a=r},548901:(e,t,n)=>{n.d(t,{A:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(979004),l=()=>n(959013),c=()=>n(100622),d=()=>n(148024),u=()=>n(836251),p=()=>n(403409),m=()=>n(187485),g=()=>n(897119),f=()=>n(145192),v=n(474848);const h={mobilePreview:{padding:"4px 8px",height:80,display:"flex",alignItems:"center",justifyContent:"center"},mobilePreviewValue:{overflow:"auto"},submitButton:{alignSelf:"flex-start"},enterIcon:{height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2}},_=o.forwardRef((function(e,t){const s=(0,o.useRef)(null),l=(0,i().v3)(),{isOpen:c,onDismiss:d,origin:u,originRect:p,originGap:m,popupStyle:f}=e,h=(0,r().K8)((()=>w(l)),[l]),_=(0,a().IS)((e=>({inputWrapper:{display:"flex",alignItems:"center",padding:"8px 10px",width:"100%",background:e.inputBackground},popup:{width:400,display:"flex",flexDirection:"column"}})),[]);(0,o.useEffect)((()=>{l.KatexStore.loadIfNeeded((()=>[(0,n(919709).G0H)("")]))}),[l.KatexStore]),(0,o.useImperativeHandle)(t,(()=>({getSelection:()=>{if(!s)return;if(!s.current)return;const e=s.current.getSelection();return"contain"===(null==e?void 0:e.type)?e.selection:void 0}})),[]);const y=(0,v.jsxs)("div",{style:_.inputWrapper,children:[(0,v.jsx)(b,{ref:s,...e}),(0,v.jsx)(I,{error:e.error,disabled:e.disabled,isOpen:e.isOpen,onSubmit:e.onSubmit,onDismiss:e.onDismiss})]}),S=(0,r().K8)((()=>w(l)===g().nl.SlideUp),[l]);return(0,v.jsx)(g().Ay,{popupType:h,open:c,origin:u,originRect:p,originGap:m,keepFocus:h===g().nl.SlideUp,onDismiss:d,style:{..._.popup,...f},render:()=>(0,v.jsx)(n(297872).A,{capture:c,allowEsc:!0,render:()=>S?(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(A,{equationValue:e.equationValue,error:e.error,displayMode:e.displayMode,isOpen:e.isOpen}),y]}):(0,v.jsxs)(o.Fragment,{children:[y,(0,v.jsx)(x,{isOpen:e.isOpen,error:e.error})]})})})})),b=o.forwardRef((function(e,t){const{disabled:o,isOpen:l,equationValue:c,onLeft:d,onRight:u,onDismiss:m,displayMode:f}=e,h=(0,i().v3)(),_=(0,r().K8)((()=>w(h)===g().nl.SlideUp),[h]),b=!o&&!_,y=_?{type:p().e.Textarea}:{type:p().e.InlineWrap,onSubmit:t=>k(t,e.isOpen,e.disabled,e.error,e.onSubmit,e.onDismiss)},I=(0,a().IS)((e=>({base:{fontFamily:n(284371).vc(n(662303).locale).mono,fontSize:14,marginRight:8,flex:1,wordBreak:"break-word",maxHeight:"50vh",overflow:"auto",..."block"===f&&{minHeight:60},..._&&{height:100}},placeHolder:{color:e.text.tertiary}})),[f,_]);return(0,v.jsx)(p().A,{ref:t,...y,disabled:o,focus:l,selectAll:b,value:c||"",placeholder:S(e.displayMode),getHtml:t=>function(e,t){return t.highlight(n(496603).x4(e),t.languages[s().PrismLanguages.latex],s().PrismLanguages.latex)}(t,e.Prism),onChange:t=>function(e,t,o,i,r){if(!t)return;o(e,n(197194).vG({environment:r,equation:e,displayMode:i}))}(t,e.isOpen,e.onChange,e.displayMode,h),onCancel:m,onLeft:d,onRight:u,placeholderStyle:{...I.base,...I.placeHolder},style:I.base,autoCorrect:"off",autoCapitalize:"off"})})),y=_;function S(e){return"block"===e?"|x| = \\begin{cases}             \n  x, &\\quad x \\geq 0 \\\\           \n -x, &\\quad x < 0             \n\\end{cases}":"E = mc^2"}function w(e){const{device:t}=e,n=t.isPhone&&t.isIOS&&t.isMobileBrowser;return t.isPhone&&!n?g().nl.SlideUp:g().nl.Popup}function k(e,t,n,o,i,r){e.preventDefault&&e.preventDefault(),n||t&&(o||(i(),r()))}function I(e){let{error:t,disabled:o,isOpen:i,onSubmit:r,onDismiss:a}=e;return o?null:(0,v.jsxs)(n(204063).A,{onClick:e=>k(e,i,o,t,r,a),disabled:o||Boolean(t),style:h.submitButton,children:[(0,v.jsx)(l().sA,{defaultMessage:"Done",id:"equationInput.submitButton.label"}),(0,n(356596).K)(h.enterIcon)]})}function x(e){let{isOpen:t,error:n}=e;const o=(0,i().v3)(),s=(0,r().K8)((()=>w(o)===g().nl.Popup),[o]),p=(0,a().IS)((e=>({container:{color:c().Ay.redWithAlpha(.8),fontSize:12,padding:"8px 10px",...s&&{boxShadow:`0 -1px ${e.lightDividerColor}`}},label:{fontWeight:600},learnMoreLink:{display:"inline",textDecoration:"underline"}})),[s]);if(!t)return null;if(!n)return null;const f=n.message.replace("KaTeX parse error: ","");return(0,v.jsxs)("div",{role:"alert",style:p.container,children:[(0,v.jsx)("span",{style:p.label,children:(0,v.jsx)(l().sA,{defaultMessage:"Invalid equation:",id:"equationInput.inputError.label"})})," ",f,". ",(0,v.jsx)(m().A,{href:(0,u().xS)("guides.equations"),external:!0,onClick:()=>{d().FH(o,{from:"equation_input"})},style:p.learnMoreLink,children:(0,v.jsx)(l().sA,{defaultMessage:"Learn more",id:"equationInput.inputError.learnMore"})})]})}function A(e){let{equationValue:t,error:n,displayMode:o,isOpen:i}=e;const r=(0,a().DP)();return t?(0,v.jsx)("div",{style:h.mobilePreview,children:n?(0,v.jsx)(x,{isOpen:i,error:n}):"block"===o?(0,v.jsx)(f().A,{display:o,equation:t,style:h.mobilePreviewValue,theme:r}):(0,v.jsx)(f().A,{display:o,equation:t,style:h.mobilePreviewValue,theme:r,index:0,isTemporary:!1})}):null}},549500:(e,t,n)=>{n.d(t,{$O:()=>i,Bv:()=>d,EO:()=>l,IM:()=>s,a0:()=>r,hq:()=>c,i6:()=>a});var o=()=>n(645873);const i=new(o().O2)("dictation",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(45620),n.e(2681),n.e(48438),n.e(54518)]).then(n.bind(n,991526)))),r=(0,o()._h)(i,(e=>e.StopDictationButton)),a=(0,o()._h)(i,(e=>e.StopDictationListener)),s=(0,o()._h)(i,(e=>e.StopDictationButtonMobile)),l=(0,o()._h)(i,(e=>e.DictationBubble)),c=(0,o()._h)(i,(e=>e.DictationAvatar)),d=(0,o()._h)(i,(e=>e.TranscriptionSetupModal))},551625:(e,t,n)=>{n.d(t,{T:()=>g});n(581454);var o=()=>n(837788),i=()=>n(893820),r=()=>n(857639),a=()=>n(498212),s=()=>n(186445),l=()=>n(627506),c=()=>n(875856),d=()=>n(313462),u=()=>n(233996),p=()=>n(449918),m=()=>n(599824);async function g(e){const{environment:t,userId:n,traits:g}=e,f=c().default.shouldRefresh(n)?await(0,m().E)(t):c().default.state,v=function(e){const t=(0,p().e)();if(!t.user_id)return;const{user_id:n,email:o,name:i,...r}=e;return{...r,user_id:t.user_id,email:t.email,name:t.name}}(g);if(!v)return void r().rateLimitedLog({level:"warning",from:"analyticsHelpers",type:"noCleanAnalyticsUser"});const h=(0,a().ot)(v.user_id);if(null!=f&&f.isLoggingEnabled){const e=(0,s().UZ)().map(a().ot),n=await(0,l()._)(t),r=await(0,u().w)(t),{accept_language_raw:c,accept_language_preference:d}=r,p=(0,o().A)({accept_language_raw:c,accept_language_preference:d},"ignore-class-instances"),m={...r,space_has_paid_nonzero:!(!n||!("space_has_paid_nonzero"in n))&&n.space_has_paid_nonzero,integrations:{All:!0}},g={...v,user_email:v.email,...p,...m};i().gm({userId:h,traits:g,spaceIds:e})}(0,d().I)()&&console.log("identify:",JSON.stringify(g))}},551694:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,stage:"landing"}}open(){this.setState({open:!0,stage:"landing"})}close(){this.setState({open:!1,stage:"landing"})}}const i=new o},551864:(e,t,n)=>{n.d(t,{e:()=>M});var o=()=>n(91913),i=()=>n(426234),r=()=>n(933449),a=()=>n(179034),s=()=>n(919709),l=()=>n(439180),c=()=>n(534177),d=()=>n(319975),u=()=>n(751156),p=()=>n(969197),m=()=>n(630116),g=()=>n(808207),f=(n(18107),n(967357),()=>n(496603)),v=(n(944114),n(898992),n(672577),()=>n(220719)),h=()=>n(653609);function _(e,t,n,o){const i=o.getClosestPageAndTransclusionReferenceAncestorIds(t),r=o.getClosestPageAndTransclusionReferenceAncestorIds(n);if(0===i.length||0===r.length)return[];const a=[];for(const s of f().E$(i,r)){const i=(0,v().o9)(o.getPathToBlock(s)),r=(0,v().o9)(y(e,i));a.push(...b(r,t,n))}return a.sort(((e,t)=>e.length-t.length)),a}function b(e,t,n){const o=[];let i=[];for(const r of function*(e,t){let n=!1;for(const o of function*(e){function t(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){if(yield e,(!e.isNavigableBlock()||n)&&("transclusion_reference"!==e.getType()||o))for(const n of(0,h().W)(e))yield*t(n,!1,!1)}()}yield*t(e,!0,!0)}(e))o.id===t&&(n=!0),n&&(yield o)}(e,t))if(r.id!==t){if(i.length>0){if("transclusion_reference"===r.getType()){i=[];continue}i.push(r),r.id===n&&(o.push(i),i=[])}}else i=[r],t===n&&(o.push(i),i=[]);return o.sort(((e,t)=>e.length-t.length)),o}function y(e,t){(0,v().MX)(t.length>0,"Path must not be empty"),(0,v().MX)(e.id===t.shift(),"Path must start with root store id");let n=e;for(;t.length>0;){const e=(0,v().o9)(t.shift()),o=(0,h().W)(n).find((t=>t.id===e));if(!o)return;n=o}return n}var S=()=>n(495074),w=()=>n(301421);function k(e){const{store:t}=e;let n;const o=S().A.getPageStoreForBlockStore(t);if(n=o?I({...e,pageStore:o,allowNonRenderedSingleStoreSelection:!1}):x(e),n&&(n.start.store!==n.end.store||n.start.index<n.end.index))return n}function I(e){var t,n;const{store:i,startTextInstanceId:a,startId:s,endTextInstanceId:l,endId:d,pageStore:u,allowNonRenderedSingleStoreSelection:p}=e,m=(0,r().o9)(S().A.getPageTextInstanceTrackerForPage(u.pointer),o().kC),g=m.getBlockIdForTextInstanceItemId(a,s),v=m.getBlockIdForTextInstanceItemId(l,d);if(void 0===g||void 0===v)return;const h=_(u,g,v,(0,r().o9)(S().A.getPageBlockTrackerForPage(u.pointer),o().as));let b,y;const k=f().Ul(h,(e=>(0,r().o9)(e.at(0),o().NQ)===i?-1:1));for(const c of k){const e=(0,r().o9)(c.at(0),o().NQ),t=(0,r().o9)(c.at(-1),o().NQ);if(w().n.findEditableWithStore(e.getBlockTitleStore())&&w().n.findEditableWithStore(t.getBlockTitleStore())){b=e,y=t;break}}if((!b||!y)&&p&&k.length>0&&k[0].at(0)===k[0].at(-1)&&(b=(0,r().o9)(k[0].at(0),o().NQ),y=(0,r().o9)(k[0].at(-1),o().NQ)),!b||!y)return;const I=(0,r().o9)(null===(t=b.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getGraphemeIndexOfTextItem(a,s),o().Dp),x=(0,r().o9)(null===(n=y.getBlockTitleTextSliceTree())||void 0===n?void 0:n.getGraphemeIndexOfTextItem(l,d),o().Dp),A="visible"===I.type?I.index:"deleted"===I.type?I.nextVisibleIndex:(0,c().HB)(I),C="visible"===x.type?x.index+1:"deleted"===x.type?x.nextVisibleIndex:(0,c().HB)(x);return{start:{store:b.getBlockTitleStore(),index:A},end:{store:y.getBlockTitleStore(),index:C}}}function x(e){var t;const{store:n,startTextInstanceId:o,startId:i,endTextInstanceId:a,endId:s}=e;(0,r().MX)(n.useCrdt(),"Expected CRDT block");const l=null===(t=n.getBlockTitleTextSliceTree())||void 0===t?void 0:t.getTextInstanceIds();if(!l||!l.has(o)||!l.has(a))return;const d=n.getBlockTitleTextSliceTree(),u=null==d?void 0:d.getGraphemeIndexOfTextItem(e.startTextInstanceId,e.startId);if(!u)return;const p=a===o&&s===i?u:null==d?void 0:d.getGraphemeIndexOfTextItem(e.endTextInstanceId,e.endId);if(!p)return;const m="visible"===u.type?u.index:"deleted"===u.type?u.nextVisibleIndex:(0,c().HB)(u),g="visible"===p.type?p.index+1:"deleted"===p.type?p.nextVisibleIndex:(0,c().HB)(p);return{start:{store:n.getBlockTitleStore(),index:m},end:{store:n.getBlockTitleStore(),index:g}}}function A(e){const{store:t,textInstanceId:n,itemId:i,options:a}=e,s=S().A.getPageStoreForBlockStore(t);if(!s)return;const l=(0,r().o9)(S().A.getPageTextInstanceTrackerForPage(s.pointer),o().kC).getBlockIdForTextInstanceItemId(n,i,a);if(!l)return;const c=_(s,l,l,(0,r().o9)(S().A.getPageBlockTrackerForPage(s.pointer),o().as));if(c.length>0){const e=c[0];return(0,r().MX)(1===e.length,"Range must contain exactly one block store"),e[0]}}function C(e){const{environment:t,store:n,transaction:i,operation:a}=e,l=function(e){const{store:t,textInstanceId:n,id:o}=e,i=S().A.getPageStoreForBlockStore(t),r=i?I({store:t,startTextInstanceId:n,startId:o,endTextInstanceId:n,endId:o,pageStore:i,allowNonRenderedSingleStoreSelection:!0}):x({store:t,startTextInstanceId:n,startId:o,endTextInstanceId:n,endId:o});return null==r?void 0:r.end}({store:n,textInstanceId:a.args.textInstanceId,id:a.args.originId});if(!l)return n.useCrdt()?"err_no_store_position":(P({environment:t,store:n,invertedOperation:a,transaction:i}),"success_non_crdt");const d=(0,r().o9)((0,p().T)(l.store),"Inverted delete parent block store is required"),u=(0,r().o9)(d.getBlockTitleTextSliceTree(),o().cf),{operations:m,invertedOperations:f}=u.getOperationsForInsertTextValueAfterOriginId(a.args.textInstanceId,a.args.searchLabel,a.args.originId,a.args.deletedTextValue),v=(0,r().o9)(u.getGraphemeIndexOfTextItem(a.args.textInstanceId,a.args.originId),o().Dp),h="visible"===v.type?v.index+1:"deleted"===v.type?v.nextVisibleIndex:(0,c().HB)(v),_=s().__s(s().xym(u.getTextValue(),a.args.deletedTextValue,h));return g().d({transaction:i,store:d,crdtOperations:m,invertedOperations:f,fullTextValue:_}),"success"}function T(e){const{environment:t,store:n,transaction:c,operation:p}=e,{textInstanceId:g,textSliceStartItemId:f,targetTextInstanceId:v,targetTextSliceEndItemId:h}=p.args,_=A({store:n,textInstanceId:g,itemId:f,options:{type:"start"}}),b=A({store:n,textInstanceId:v,itemId:h,options:{type:"end"}});if(!_||!b){const e=n,o=new(m().Bv)(t,{table:a().ev,id:p.args.sourceBlockId,spaceId:n.pointer.spaceId});return e.isDefined()&&!e.useCrdt()||o.isDefined()&&!o.useCrdt()?(function(e){const{environment:t,sourceBlockStore:n,targetBlockStore:o,invertedOperation:i,transaction:a}=e;(0,r().MX)(n.isDefined(),"Source block store is expected to be defined"),(0,r().MX)(o.isDefined(),"Target block store is expected to be defined"),(0,r().MX)(!n.useCrdt()||!o.useCrdt(),"One or both of source and target blocks is expected to be a non-CRDT block");const s=n.getBlockTitleStore(),l=o.getBlockTitleStore();d().R9({environment:t,store:s,value:i.args.previousSourceTextValue,transaction:a}),d().R9({environment:t,store:l,value:i.args.previousTargetTextValue,transaction:a})}({environment:t,sourceBlockStore:o,targetBlockStore:e,invertedOperation:p,transaction:c}),"success_non_crdt"):_?"err_no_target_block_store":"err_no_source_block_store"}const{fullSourceTextValue:y,fullTargetTextValue:S}=function(e){const{source:t,target:n}=e,i=(0,r().o9)(t.blockStore.getBlockTitleTextSliceTree(),o().cf),a=i.getTextValue(),l=(0,r().o9)(i.findTextSliceTreeContainingItemWithId(t.textInstanceId,t.textSliceStartItemId),o().Dp),c=(0,r().o9)(i.getGraphemeIndicesOfSlice({boundary:"start",textInstanceId:t.textInstanceId,start:t.textSliceStartItemId}),o().Dp).startIndex,d=l.getLastTextSliceTreeInPreOrderTraversal(),u=(0,r().o9)(i.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:d.getTextSlice().textInstanceId,end:d.getTextSlice().getEndItem().id}),o().Dp).exclusiveEndIndex,{tokensBeforeRange:p=[],tokensInsideRange:m=[],tokensAfterRange:g=[]}=s().AI5(a,c,u),f=s().__s([...p,...g]);if(t.blockStore.pointer.id===n.blockStore.pointer.id){const e=(0,r().o9)(i.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:n.textInstanceId,end:n.textSliceEndItemId}),o().Dp).exclusiveEndIndex;if(e<=c){const t=s().__s(s().xym(f,m,e));return{fullSourceTextValue:t,fullTargetTextValue:t}}if(u<=e){const t=e-(u-c),n=s().__s(s().xym(f,m,t));return{fullSourceTextValue:n,fullTargetTextValue:n}}return{fullSourceTextValue:a,fullTargetTextValue:a}}const v=(0,r().o9)(n.blockStore.getBlockTitleTextSliceTree(),o().cf),h=v.getTextValue(),_=(0,r().o9)(v.getGraphemeIndicesOfSlice({boundary:"end",textInstanceId:n.textInstanceId,end:n.textSliceEndItemId}),o().Dp).exclusiveEndIndex,b=s().__s(s().xym(h,m,_));return{fullSourceTextValue:f,fullTargetTextValue:b}}({source:{blockStore:_,textInstanceId:g,textSliceStartItemId:f},target:{blockStore:b,textInstanceId:v,textSliceEndItemId:h}}),w=(0,r().o9)(_.getBlockTitleTextSliceTree(),o().cf),k=(0,r().o9)(w.findTextSliceTreeBeforeTextSliceStartingWithItemId(p.args.textInstanceId,p.args.textSliceStartItemId),o().Dp).getTextSlice(),I=i().DI,x=i().DI;return u().applyCrdtTextOperation({transaction:c,store:_,operation:{command:"moveTextSlice",path:[],pointer:_.pointer,opVersion:l().TU,args:{textInstanceId:g,sourceSearchLabel:I,textSliceStartItemId:f,targetBlockId:b.id,targetTextInstanceId:v,targetSearchLabel:x,targetTextSliceEndItemId:h,forDowngrade:{fullSourceTextValue:y,fullTargetTextValue:S}}},invertedOperation:{command:"invertedMoveTextSlice",path:[],pointer:_.pointer,args:{textInstanceId:g,textSliceStartItemId:f,targetTextInstanceId:k.textInstanceId,targetTextSliceEndItemId:k.getEndItem().id,sourceBlockId:b.id,previousSourceTextValue:b.getBlockTitleStore().getValue()??[],targetBlockId:_.id,previousTargetTextValue:_.getBlockTitleStore().getValue()??[]}}}),"success"}function M(e){const{environment:t,store:n,transaction:o,operation:i}=e;switch(i.command){case"invertedInsertText":return function(e){const{environment:t,store:n,transaction:o,operation:i}=e,r=k({store:n,startTextInstanceId:i.args.textInstanceId,startId:i.args.startId,endTextInstanceId:i.args.textInstanceId,endId:i.args.endId});return r?(d().f0({environment:t,multiSelection:r,transaction:o}),"success"):n.useCrdt()?"err_no_multiselection":(P({environment:t,store:n,invertedOperation:i,transaction:o}),"success_non_crdt")}({environment:t,store:n,transaction:o,operation:i});case"invertedDeleteText":return C({environment:t,store:n,transaction:o,operation:i});case"invertedMoveTextSlice":return T({environment:t,store:n,transaction:o,operation:i});case"invertedAddAnnotation":return function(e){const{environment:t,store:n,transaction:o,operation:i}=e,r=k({store:n,startTextInstanceId:i.args.startTextInstanceId,startId:i.args.startId,endTextInstanceId:i.args.endTextInstanceId,endId:i.args.endId});return r?(d().VO({environment:t,multiSelection:r,annotationKey:i.args.annotationKey,transaction:o}),"success"):n.useCrdt()?"err_no_multiselection":(P({environment:t,store:n,invertedOperation:i,transaction:o}),"success_non_crdt")}({environment:t,store:n,transaction:o,operation:i});case"invertedRemoveAnnotation":return function(e){const{environment:t,store:n,transaction:o,operation:i}=e,r=k({store:n,startTextInstanceId:i.args.startTextInstanceId,startId:i.args.startId,endTextInstanceId:i.args.endTextInstanceId,endId:i.args.endId});return r?(d().tc({environment:t,multiSelection:r,annotation:i.args.annotation,transaction:o}),"success"):n.useCrdt()?"err_no_multiselection":(P({environment:t,store:n,invertedOperation:i,transaction:o}),"success_non_crdt")}({environment:t,store:n,transaction:o,operation:i});default:(0,c().HB)(i)}}function P(e){const{environment:t,store:n,invertedOperation:o,transaction:i}=e;(0,r().MX)(!n.useCrdt(),"Expected non-CRDT block");const a=n.getBlockTitleStore();d().R9({environment:t,store:a,value:o.args.previousTextValue,transaction:i})}},552713:(e,t,n)=>{n.d(t,{B:()=>l});var o=n(296540),i=()=>n(401497),r=()=>n(705540),a=()=>n(38337),s=n(474848);function l(e){let{backgroundStyle:t,onDismiss:n}=e;(0,o.useLayoutEffect)((()=>{if("transparent"!==(null==t?void 0:t.background))return requestAnimationFrame((()=>{r().setOverlay(!0)})),()=>{r().setOverlay(!1)}}),[null==t?void 0:t.background]);const l=(0,i().IS)((e=>({underlay:c({theme:e,backgroundStyle:t})})),[t]);return(0,s.jsx)("div",{role:"presentation",style:l.underlay,onClick:e=>{n&&n(e)},className:a().mJp})}function c(e){const{theme:t,backgroundStyle:n}=e;return{position:"absolute",top:0,left:0,bottom:0,right:0,background:t.modalUnderlayBackground,...n}}},553034:(e,t,n)=>{n.d(t,{C:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m5.897 4.085-.122-.142a.625.625 0 0 0-.95.814l.797.929c-.796.89-1.349 2-1.556 3.228a3.856 3.856 0 0 0 1.056 7.56h9.748l1.356 1.583a.625.625 0 0 0 1.04-.67L5.99 4.228a.6.6 0 0 1-.093-.144m4.577 11.14H5.13a2.605 2.605 0 0 1-.405-5.178l.479-.075.047-.482a5.2 5.2 0 0 1 1.194-2.845l7.354 8.58zm6.963.44a3.492 3.492 0 0 0-.512-5.722 6.475 6.475 0 0 0-9.327-5.757l.847.988a5.225 5.225 0 0 1 7.222 5.12l-.024.443.41.17a2.245 2.245 0 0 1 .57 3.81z"})},i=(0,n(340498).wt)("cloudSlash",o)},553819:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{images:{}}}getMetadataByBlockId(e){if(!this.hasKey(e))return;return this.state.images[e].editMetadata}setStatusPending(e,t){const n={editMetadata:t,editStatus:"pending"};this.setState({images:{...this.state.images,[e]:n}})}getStatus(e){if(!this.hasKey(e))return"completed";return this.state.images[e].editStatus}setStatusDrawing(e){if(!this.hasKey(e))return;const t={...this.state.images[e],editStatus:"drawing"};this.setState({images:{...this.state.images,[e]:t}})}setStatusUploading(e,t){if(!this.hasKey(e))return;const n={...this.state.images[e],editStatus:"uploading",dataURL:t};this.setState({images:{...this.state.images,[e]:n}})}setStatusCompleted(e,t){if(!this.hasKey(e))return;const n=this.state.images[e];if("uploading"!==n.editStatus)return;const o={...n,editStatus:"completed",secureFileURL:t};this.setState({images:{...this.state.images,[e]:o}})}setStatusError(e){if(!this.hasKey(e))return!1;const t={...this.state.images[e],editStatus:"error"};this.setState({images:{...this.state.images,[e]:t}})}getDataURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"uploading"===t.editStatus||"completed"===t.editStatus?t.dataURL:void 0}getSecureFileURL(e){if(!this.hasKey(e))return;const t=this.state.images[e];return"completed"===t.editStatus?t.secureFileURL:void 0}hasKey(e){return this.state.images.hasOwnProperty(e)}}const i=new o},553965:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(803949);var o=()=>n(558842),i=()=>n(496603);function r(e,t){if(!t)return e;const n={...e};return Object.keys(t).forEach((r=>{const a=t[r],s=e[r];s&&r.startsWith("on")&&i().Tn(a)?n[r]=function(){s(...arguments),a(...arguments)}:s&&("ref"===r||r.endsWith("Ref"))&&a?n[r]=(0,o().Px)(s,a):s||(n[r]=a||s)})),n}},554060:(e,t,n)=>{n.d(t,{F:()=>p});var o=n(296540),i=()=>n(484714),r=()=>n(584262),a=()=>n(959013),s=()=>n(857783),l=()=>n(104012),c=()=>n(728611),d=()=>n(211716),u=n(474848);function p(e){const{hideUndoButton:t}=e,n=(0,i().WS)();return(0,u.jsxs)(u.Fragment,{children:[!n&&(0,u.jsx)(m,{...e}),!t&&(0,u.jsx)(l().q6,{})]})}function m(e){let{moveToLocation:t,movedItems:n}=e;const p=(0,i().v3)(),m=(0,o.useCallback)((e=>{var o;if(t&&"moveToBlock"===t.type)s().uK({environment:p,openInNew:c().Vr(e),store:t.blockStore,scrollToBlockId:null===(o=n[0])||void 0===o?void 0:o.id,visitType:d().ig.Link,pageVisitSource:r().y8.Move})}),[p,t,n]);return t&&"moveToBlock"===t.type?(0,u.jsx)(l().Ag,{onClick:m,children:(0,u.jsx)(a().sA,{defaultMessage:"Visit",id:"moveToHelpers.afterMoveToast.viewButton"})}):null}},554279:(e,t,n)=>{n.d(t,{Mj:()=>h,aq:()=>w,fq:()=>S,hR:()=>g,mS:()=>y,u4:()=>f,uK:()=>b,zD:()=>_});n(944114),n(898992),n(803949),n(581454);var o=()=>n(502800),i=()=>n(534177),r=()=>n(939768),a=()=>n(283699),s=()=>n(857639),l=()=>n(994310),c=()=>n(901801);let d,u,p=[],m="/";async function g(e){const{device:t,config:n,cookieService:o}=e;u=!["staging","production"].includes(n.env),await a().Eo({trackingType:"targeting",cookieService:o})&&(t.isNative||(m=function(e){if(e.isLocalhost)return"http://localhost:3000";return"https://aif.notion.so"}(n),function(e){if(!m)return;const t=document.createElement("iframe");t.setAttribute("sandbox","allow-scripts allow-same-origin"),t.setAttribute("style","position: absolute; opacity: 0; width: 1px; height: 1px; top: 0; left: 0; border: none; display: block; z-index: -1;"),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.setAttribute("referrerpolicy","no-referrer"),t.setAttribute("src",e.aif.url),document.body.appendChild(t),t.addEventListener("load",(()=>{d=t;for(const e of p)v(t,e);p=[]}))}(n)))}async function f(e){const{device:t,event:n,cookieService:i,source:r}=e;if((!i||await a().Eo({trackingType:"targeting",cookieService:i}))&&!(u&&n.google||t&&t.isNative))try{!function(e){const{event:t}=e,n=e.source??"client";if("front"===n){if(t.google&&"custom"===t.google.eventName){(window.dataLayer=window.dataLayer||[]).push({event:t.google.data.event,data:t.google.data.data})}}else d?d.contentWindow&&d.contentWindow.postMessage(t,m):p.push(t)}({event:n,source:r})}catch(l){s().log({level:"error",from:"adAnalyticsHelpers",type:"analyticsTrack",error:(0,o().convertErrorToLog)(l)})}}function v(e,t){(function(e){var t,n;return"CompleteRegistration"===(null===(t=e.facebook)||void 0===t?void 0:t.eventName)||"registration"===(null===(n=e.google)||void 0===n?void 0:n.eventName)})(t)&&s().log({level:"info",from:"adAnalyticsHelpers",type:"analyticsTrackSignupIFramePostCall"}),e.contentWindow&&e.contentWindow.postMessage(t,m)}function h(e){if("facebook"===e.type){const t=`fb.1.${Date.now()}.${e.id}`;c().A.set("adClick",{type:"facebook",id:t})}else"google"===e.type?c().A.set("adClick",{type:"google",id:e.id}):(0,i().HB)(e)}function _(){return c().A.get("adClick")}function b(){c().A.remove("adClick")}function y(){return c().A.get("fbp")}function S(){l().A.remove("fbp")}async function w(e){var t;const{device:n,email:o,cookieService:i}=e,a=(0,r().al)(null===(t=document.location)||void 0===t?void 0:t.href),s=null==a?void 0:a.get("cid"),l=null==a?void 0:a.get("metadata_cid");var c;if(l)return f({device:n,event:{metadataio:{eventName:"sign_up",data:{email:o,cid:s,mcid:l,url:null===(c=document.location)||void 0===c?void 0:c.href}}},cookieService:i})}},554283:(e,t,n)=>{n.d(t,{B:()=>i});var o=n(296540);function i(){const e=(0,o.useRef)(null),[t,n]=(0,o.useState)(!1),i=(0,o.useCallback)((()=>{const t=e.current;t&&n(t.matches(":hover"))}),[]);return[(0,o.useCallback)((t=>{t?(t.addEventListener("mouseenter",i),t.addEventListener("mouseleave",i),e.current=t,i()):e.current&&(e.current.removeEventListener("mouseenter",i),e.current.removeEventListener("mouseleave",i),e.current=null)}),[i]),t,e]}},554509:(e,t,n)=>{n.d(t,{D:()=>l});var o=n(296540),i=()=>n(401497),r=n(474848);const a={"Agate-10px/Medium":"tx-agate-10-medium","Agate-10px/Regular":"tx-agate-10-regular","Body-12px/Medium":"tx-body-12-med","Body-12px/Regular":"tx-body-12-reg","Body-13px/Medium":"tx-body-13-med","Body-13px/Regular":"tx-body-13-reg","Body-13px/Semibold":"tx-body-13-semi","Body-14px/Medium":"tx-body-14-med","Body-14px/Regular":"tx-body-14-reg","Body-14px/Semibold":"tx-body-14-semi","Caption-12px/Medium":"tx-caption-12-med","Caption-12px/Regular":"tx-caption-12-reg","Caption-12px/Semibold":"tx-caption-12-semi","Heading-17px/Medium":"tx-heading-17-med","Heading-17px/Regular":"tx-heading-17-reg","Heading-17px/Semibold":"tx-heading-17-semi","iOS/Callout-16px/Regular":"tx-ios-callout-16-reg","iOS/Footnote-13px/Regular":"tx-ios-footnote-13-reg","iOS/Caption-12px/Regular":"tx-ios-caption-12-reg","iOS/Subhead-15px/Regular":"tx-ios-subhead-15-reg","iOS/Subhead-15px/Medium-Compact":"tx-ios-subhead-15-med-c","iOS/Title-3/Semibold":"tx-ios-title-3-semibold","Micro-10px/Medium":"tx-micro-10-med","Micro-10px/Regular":"tx-micro-10-reg","Micro-10px/Semibold":"tx-micro-10-semi","Page-Content/H2":"tx-page-content-h2","Page-Content/H3":"tx-page-content-h3","Page-Content/Database":"tx-page-content-database","Page-Content/Text-Block":"tx-page-content-text-block","Title-22px/Bold":"tx-title-22-bold","Title-22px/Semibold":"tx-title-22-semi","Title-24px/Bold":"tx-title-24-bold","Title-24px/SemiBold":"tx-title-24-semi","Title-Large-26px/Bold":"tx-title-26-bold","UIHeading-17px/Regular":"tx-uiheading-17-reg","UIHeading-17px/Semibold":"tx-uiheading-17-semi","UIHeading-17px/Medium":"tx-uiheading-17-med","UIMini-10px/Semibold":"tx-uimini-10-semi","UIMini-10px/Regular":"tx-uimini-10-reg","UIMedium-13px/Regular":"tx-uimedium-13-reg","UIMedium-13px/Medium":"tx-uimedium-13-med","UIMedium-13px/Semibold":"tx-uimedium-13-semi","UIRegular-14px/Medium":"tx-uiregular-14-med","UIRegular-14px/Regular":"tx-uiregular-14-reg","UIRegular-14px/Semibold":"tx-uiregular-14-semi","UISmall-12px/Medium":"tx-uismall-12-med","UISmall-12px/Regular":"tx-uismall-12-reg","UISmall-12px/Semibold":"tx-uismall-12-semi","UITitle-Medium-20px/Semibold":"tx-uititle-medium-20-semibold","UITitle-22px/Semibold":"tx-uititle-22-semibold","UITitle-26px/Bold":"tx-uititle-26-bold","UITitle-30px/Semibold":"tx-uititle-30-semibold"};Object.keys(a);function s(e,t){const{as:n="div",children:o,colorName:s,id:l,styleName:c,customStyles:d,...u}=e,p=c?a[c]:void 0,m=function(e){return(0,i().IS)((t=>({text:{color:e?t.text[e]:void 0}})),[e])}(s);return(0,r.jsx)(n,{ref:t,id:l,style:{...m.text,...d},className:p,...u,children:o})}const l=o.forwardRef(s);l.displayName="StyledText"},554894:(e,t,n)=>{n.d(t,{C9:()=>D,Tt:()=>B,o_:()=>L});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(604341),s=()=>n(591779),l=()=>n(582676),c=()=>n(449412),d=()=>n(745875),u=()=>n(763824),p=()=>n(534177),m=()=>n(705540),g=()=>n(406792),f=()=>n(227440),v=()=>n(508496),h=()=>n(961581),_=()=>n(487532),b=()=>n(532338),y=()=>n(92400),S=()=>n(570241),w=()=>n(670631),k=()=>n(722038);const I=12e5,x=I/2,A=I/2*3,C=6e4,T=20,M=5;async function P(e){const{defaultRecordCache:{persistedRecordCache:t},currentUser:{id:n}}=e;if(!t||!n)return[];return(await t.getOfflineOriginPages({userId:n})).slice(0,T)}async function B(e){const{environment:t,pageId:n,lastSnapshotTime:o}=e;return E({environment:t,fetchTriggerType:"page_subscription_update",abortSignal:(new AbortController).signal,pageSubscriptionUpdate:{pageId:n,lastSnapshotTime:o}})}async function R(e){const{environment:t,fetchTriggerType:n,pageSubscriptionUpdate:o}=e;return"page_subscription_update"===n?o?async function(e){const{environment:t,pageSubscriptionUpdate:n}=e,{defaultRecordCache:{persistedRecordCache:o},currentUser:{id:i}}=t,{pageId:r,lastSnapshotTime:a}=n;if(!o||!i)return[];const s=await o.getOfflinePageMetadata({pageId:r,userId:i});if(!s)return[];if(void 0===s.lastDownloadedAt||s.lastDownloadedAt<a)return[[r,s]];return[]}({environment:t,pageSubscriptionUpdate:o}):[]:"fast_interval"===n?async function(e){const{defaultRecordCache:{persistedRecordCache:t},currentUser:{id:n}}=e;return t&&n?(await P(e)).filter((e=>{let[,t]=e;return!t.lastDownloadedAt})):[]}(t):P(t)}async function E(e){const{environment:t,fetchTriggerType:n,abortSignal:o,pageSubscriptionUpdate:i}=e,{defaultRecordCache:{persistedRecordCache:r},currentUser:{id:a}}=t,s=performance.now();if(!r||!a)return;const l=await R({environment:t,fetchTriggerType:n,pageSubscriptionUpdate:i}),f=await r.getOfflineOriginPages({userId:a}),v=f.length;if(o.aborted)return;if(U((()=>`Out of ${v} offline origin pages, fetching ${l.length} in batches of ${M}.`)),U((()=>`Fetching ids: ${l.map((e=>{let[t]=e;return t})).join(", ")}`)),U((()=>"--------------------------------")),0===l.length)return;const h={imageCount:0,loadCachedPageChunkV2ForOfflineCount:0,queryCollectionCount:0},_=new Set;if(await u().lX(l,M,(async e=>{var n;let[i,s]=e;const l=null===(n=w().A.state.offlinePages)||void 0===n||null===(n=n[i])||void 0===n?void 0:n.lastDownloadedVersion;U((()=>`Fetching page ${i}. Last downloaded version: ${l}.`));try{const e=(await r.getOfflineActions({impactedPageId:i,userId:a})).map((e=>e.autosyncType)).filter(p().O9),n=new Set;if((0,p().EI)(e)){const s=await(0,b().og)({from:"useRefetchOfflinePages",pageId:i,environment:t,originPageId:i,visitedBlockIds:{forThisOriginPage:new Set,forThisInterval:_},stats:h,autosyncTypes:e,downloadAbortSignal:o,skippedCollectionIds:n});if(o.throwIfAborted(),null!=s&&s.success){const e=(null==s?void 0:s.visitedBlockIds.forThisOriginPage)??new Set,t=await r.getPageIdsToGarbageCollect({originPageId:i,userId:a,visitedBlockIds:e,skippedCollectionIds:n});t.length>0&&(await r.deleteOfflineActionsAndCleanUp({userId:a,originPageId:i,impactedPageIds:t}),U((()=>`Garbage collected ${t.length} offline pages as they are not in the subtree of ${i} anymore.`)))}else U((()=>`Skipped garbage collection for ${i} because makePageAvailableOffline did not succeed.`));U((()=>`Fetched and saved page ${i}. Last downloaded version: ${l}. Version from server: ${null==s?void 0:s.downloadedVersion}.`))}else U((()=>`ERROR: No autosync types found for page ${i}.`)),c().O8(new Error(`No autosync types found for page ${i}`),{from:"useRefetchOfflinePages",type:"noAutosyncTypesFound",data:{pageId:i}})}catch(d){d instanceof y().f||(U((()=>`Fetch page ${i} failed.${d instanceof Error?` Error: ${d.message}`:""}`)),c().O8(d,{from:"useRefetchOfflinePages",type:"loadRemotePageAndImagesError",data:{pageId:i}}))}})),"force_debug"!==n&&"page_subscription_update"!==n){const e=await r.getOfflinePages({userId:a}),n=f.filter((e=>{let[,t]=e;return t.isExplicitlyOfflinedOrigin})).length,o=f.filter((e=>{let[,t]=e;return t.isAutosyncedOrigin})).length,i=(0,d().JZ)(e.map((e=>{let[,t]=e;return t.lastDownloadedAt})).filter((e=>void 0!==e))),c=await m().getSqliteDiskUsage();g().default.measure({metricName:"background_refetch_offline_pages",startTime:s,endTime:performance.now()},{environment:t,data:{fetch_interval_ms:I,number_of_offline_pages_fetched:l.length,total_number_of_offline_pages:Object.keys(w().A.state.offlinePages??{}).length,median_last_updated_at:i,number_of_images_fetched:h.imageCount,total_number_of_explicitly_marked_offline_pages:n,total_number_of_offline_origin_pages:v,total_number_of_favorites:0,total_number_of_recents:o,number_of_images_fetched_per_page:h.imageCount/l.length,...h.didUseBatchedApi?{number_of_sync_offline_pages:h.loadCachedPageChunkV2ForOfflineCount,number_of_sync_offline_pages_per_page:h.loadCachedPageChunkV2ForOfflineCount/l.length}:{number_of_load_page_chunk_v2_for_offline_per_page:h.loadCachedPageChunkV2ForOfflineCount/l.length},number_of_query_collection_per_page:h.queryCollectionCount/l.length,disk_usage:t.device.isElectron?c:void 0}})}}function D(){return v().default.checkGate({gateName:"refetch_offline_pages"})&&v().default.checkGate({gateName:"download_for_offline"})}async function N(e){const{fetchTriggerType:t,environment:n,abortSignal:o}=e,{defaultRecordCache:{persistedRecordCache:i},currentUser:{id:r}}=n;if(i&&r)if("fast_interval"===t)await navigator.locks.request(`toggle_offline_page_${n.currentUser.id}`,{ifAvailable:!0},(async e=>{e?await navigator.locks.request(`refetch_offline_pages_fast_${n.currentUser.id}`,{ifAvailable:!0},(async e=>{e?(U((()=>`Acquired lock for ${t}.`)),await E({environment:n,fetchTriggerType:t,abortSignal:o})):U((()=>"Skipping fast interval refetch because another fast interval refetch is already in progress"))})):U((()=>"Skipping fast interval refetch because a toggle download is already in progress"))}));else{if(await navigator.locks.request(`refetch_offline_pages_fast_${n.currentUser.id}`,(()=>{})),await navigator.locks.request(`toggle_offline_page_${n.currentUser.id}`,(()=>{})),await navigator.locks.request(`download_autosynced_pages_${n.currentUser.id}`,(()=>{})),o.aborted)return;await navigator.locks.request(`refetch_offline_pages_default_${n.currentUser.id}`,{ifAvailable:!0},(async e=>{if(!e)return void U((()=>"Skipping default interval refetch because another default interval refetch is already in progress"));U((()=>`Acquired lock for ${t}.`)),U((()=>"Checking when we last refetched."));const a=await i.getOfflineMetadataLastExecutedAt({userId:r,taskType:"refetch"});if(a&&"force_debug"!==t){const e=Date.now()-a;if(e<.95*I)return void U((()=>`Skipping refetch because we refetched ${e/1e3/60} minutes ago.`))}const s=Date.now();await E({environment:n,fetchTriggerType:t,abortSignal:o}),await i.updateOfflineMetadataLastExecutedAt({userId:r,taskType:"refetch",lastExecutedAt:s})}))}}function L(){const e=(0,i().v3)(),t=(0,k().y)(),n=(0,r().K8)((()=>{if(!h().A.state.initialRenderCompleted)return!1;if(!t)return!1;if(!D())return!1;if(!f().A.state.online)return!1;if(e.device.isMobileNative){if("wifi"!==f().A.state.mobileConnectivityType)return!1}else{const e=navigator.connection;if(e&&(e.saveData||["slow-2g","2g"].includes(e.effectiveType??"")))return!1}return!0}),[e.device,t]),a=(0,r().K8)((()=>S().Z.state.globalAbortController),[]),c=(0,r().K8)((()=>v().default.getConfigKey("offline_mode_settings","fast_refetch_interval_ms")),[]),d=(0,o.useRef)(!1),u=(0,s().ZC)(e.currentUser.id);Boolean(e.currentUser.id)&&e.currentUser.id!==u&&(d.current=!0),(0,o.useEffect)((()=>{if(d.current&&n){U((()=>"Attempt fetch due to app boot or user change"));const t=(0,l().HO)([0,C]),n=window.setTimeout((()=>{N({fetchTriggerType:"app_boot_or_user_change",environment:e,abortSignal:a.signal}),d.current=!1}),t);return()=>{window.clearTimeout(n)}}}),[a.signal,n,e]),(0,o.useEffect)((()=>{Boolean(e.currentUser.id)&&Boolean(u)&&e.currentUser.id!==u&&(0,_().Rq)()}),[e.currentUser.id,u]),(0,o.useEffect)((()=>{let t;const o=(0,l().HO)([x,A]),i=window.setTimeout((()=>{n&&(N({fetchTriggerType:"default_interval",environment:e,abortSignal:a.signal}),t=window.setInterval((()=>{n&&N({fetchTriggerType:"default_interval",environment:e,abortSignal:a.signal})}),I))}),o);let r;return c>0&&(r=window.setInterval((()=>{n&&N({fetchTriggerType:"fast_interval",environment:e,abortSignal:a.signal})}),c)),()=>{window.clearTimeout(i),t&&window.clearInterval(t),r&&window.clearInterval(r)}}),[a.signal,n,e,c])}let O=!1;function U(e){O&&console.log(`[useRefetchOfflinePages] ${e()}`)}(0,a().exposeDebugValue)("debugAttemptFetch",(function(e){if(!e)throw new Error("Pass in `__console.environment` as the first param.");N({fetchTriggerType:"force_debug",environment:e,abortSignal:(new AbortController).signal})})),(0,a().exposeDebugValue)("toggleOfflineRefetchDebugLogs",(function(){O=!O,console.log(O?"Offline refetch debug logs enabled.":"Offline refetch debug logs disabled.")}))},555776:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isHovered:!1,isActivelyComposing:!1}}setHoverWithSource(e){this.setState({...this.state,isHovered:!0,hoverEntryPoint:e})}setActiveWithSource(e){this.setState({...this.state,isActivelyComposing:!0,clickEntryPoint:e})}resetHoverSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.hoverEntryPoint)&&this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetActiveSource(e){var t;e===(null===(t=this.state)||void 0===t?void 0:t.clickEntryPoint)&&this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetAllHoverSources(){this.setState({...this.state,isHovered:!1,hoverEntryPoint:void 0})}resetAllActiveSources(){this.setState({...this.state,isActivelyComposing:!1,clickEntryPoint:void 0})}resetEditorActiveSources(){"comments_pane"!==this.state.clickEntryPoint&&this.resetAllActiveSources()}resetEditorHoverSources(){"comments_pane"!==this.state.hoverEntryPoint&&this.resetAllHoverSources()}}const i=new o},555822:(e,t,n)=>{n.d(t,{a:()=>i});var o=()=>n(534177);function i(e){const{partial:t,defaultLength:n=0}=e;switch(null==t?void 0:t.type){case"sides":return{type:"sides",left:t.left??n,right:t.right??n,top:t.top??n,bottom:t.bottom??n};case"axes":return{type:"sides",left:t.horizontal??n,right:t.horizontal??n,top:t.vertical??n,bottom:t.vertical??n};case"all":return{type:"sides",left:t.length??n,right:t.length??n,top:t.length??n,bottom:t.length??n};case void 0:return{type:"sides",left:n,right:n,top:n,bottom:n};default:(0,o().HB)(t)}}},556544:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(672577);class o extends(()=>n(965828))().O{isInlineAutocompleteOpen(){const e=this.find((e=>e.isOpen));return Boolean(e)}}const i=new o},558407:(e,t,n)=>{n.d(t,{A:()=>s});n(898992),n(354520),n(581454);const o=new class{constructor(){this.recentlyMentionedPagesStore=void 0,this.spaceId=void 0,this.userId=void 0}get(e){const{currentSpaceStore:t}=n(351360).default.state,o=t&&t.id;return void 0===o||void 0===e?(this.userId=void 0,this.spaceId=void 0,void(this.recentlyMentionedPagesStore=void 0)):(this.spaceId===o&&this.userId===e||(this.spaceId=o,this.userId=e,this.recentlyMentionedPagesStore=new i({maxPages:50,prefix:`RecentlyMentioned:${e}:${o}`,store:localStorage,version:r}),this.recentlyMentionedPagesStore.initialize()),this.recentlyMentionedPagesStore)}};class i{constructor(e){this.mentions=void 0;const{maxPages:t,prefix:o,store:i,version:r}=e;this.mentions=new(n(643534).A)({maxSize:t,prefix:o,store:i,version:r})}initialize(){this.mentions.updateVersionAndGC()}recordMention(e,t){this.mentions.set(e,t)}getMentionedIds(){const e=this.mentions.entries();if(e.error)return[];const t=Date.now()-864e5;return Array.from(e.value).filter((e=>{let[n,o]=e;return o>=t})).map((e=>{let[t,n]=e;return t}))}}const r=1,a={lazyRecentlyMentionedPagesStore:o,recordMention:function(e){const{id:t,timestamp:n,currentUserId:i}=e,r=o.get(i);if(r)return r.recordMention(t,n)},getMentionedIds:function(e){const t=o.get(e);return t?t.getMentionedIds():[]}};(0,n(604341).exposeDebugValue)("RecentlyMentionedPagesStore",a);const s=a},559102:(e,t,n)=>{n.d(t,{d:()=>q});n(944114),n(898992),n(354520),n(672577);var o=()=>n(244641),i=()=>n(908006),r=()=>n(584262),a=()=>n(90023),s=()=>n(252799),l=()=>n(289915),c=()=>n(737658),d=()=>n(604995),u=()=>n(857639),p=()=>n(206267),m=()=>n(763884),g=()=>n(799829),f=()=>n(496603),v=()=>n(745875),h=()=>n(534177),_=()=>n(720665),b=()=>n(191597),y=()=>n(686526),S=()=>n(5705),w=()=>n(253021),k=()=>n(269643),I=()=>n(186445),x=()=>n(10594),A=()=>n(522827),C=()=>n(609429),T=()=>n(493260),M=()=>n(406792),P=()=>n(311890),B=()=>n(351360),R=()=>n(508496),E=()=>n(589994);n(803949);function D(e){const t=e.collectionViewStore();if(!t)return 0;let n=0;const o=t.getFormatStore().getKeyStore("collection_groups").getValue(),i=t.getFormatStore().getKeyStore("board_columns").getValue();return null==o||o.forEach((e=>{!0===e.hidden&&n++})),null==i||i.forEach((e=>{!0===e.hidden&&n++})),n}var N=()=>n(436371),L=()=>n(928530),O=()=>n(540022),U=()=>n(764670),F=()=>n(75542),V=()=>n(518362),j=()=>n(834211);const z=10;function H(e,t){if(void 0===t)return;if(void 0===e)return"initial_load";if(!f().n4(e.collectionView,t.collectionView))return"change_view";if(!f().n4(e.loader.searchQuery,t.loader.searchQuery))return"change_search";if(!f().n4(e.loader.sort,t.loader.sort))return"change_sort";const n=W(e.loader.filter,t.loader.filter);if(n)return n;const o=e.loader.reducers??{},i=t.loader.reducers??{};if(Object.keys(i).find((e=>{const t=o[e],n=i[e];return n&&(!t||!f().n4(t,n))})))return"change_group";const r={reducers:void 0,filter:void 0,sort:void 0,reducerDependencies:void 0},a={...null==e?void 0:e.loader,...r},s={...null==t?void 0:t.loader,...r};return f().n4(a,s)?void 0:"change_loader"}function W(e,t){if(e||t){if(!e)return"add_filter";if(!t)return"remove_filter";if(!f().n4(e,t)){if((0,l().yX)(e)&&(0,l().yX)(t))return e.property!==t.property?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":f().n4(e.filter,t.filter)?void 0:"change_filter_value";if((0,l().LB)(e)&&(0,l().LB)(t))return e.timestamp!==t.timestamp?"change_filter":e.filter.operator!==t.filter.operator?"change_filter_operator":f().n4(e.filter,t.filter)?void 0:"change_filter_value";if(!(0,l().dU)(e)||!(0,l().dU)(t))return"change_filter";{if(e.operator!==t.operator)return"change_filter_operator";function n(e){return(0,l().yX)(e)?`property/${e.property}`:(0,l().LB)(e)?`property/${e.timestamp}`:(0,l().dU)(e)?`combinator/${e.operator}`:void(0,h().HB)(e)}const o=f().Ul(e.filters??[],n),i=f().Ul(t.filters??[],n),r=o.length,a=i.length;if(r<a)return"add_filter";if(a<r)return"remove_filter";for(let s=0;s<a;s++){const c=W(o[s],i[s]);if(c)return c}}}}}function q(e){const{environment:t,collectionViewBlockStore:n,collectionViewStore:W,collectionStore:q,collectionContextStore:K,isFullScreen:G,isRootChild:$,isInPeekRenderer:Y,productUseCase:Q,viewsModuleContext:Z}=e;(0,N().u)({collectionContextStore:K});const X=t.currentUser.id;G&&(S().KO(t),S().aD(t));const{remoteRequestStore:J,localResultStore:ee}=K;if(W){var te,ne,oe;const e=Boolean(!K.isViewSpecificClientModeEnabledStore.state&&K.isClientModeEnabledStore.state&&q&&q.id===(null===(te=K.collectionStore())||void 0===te?void 0:te.id)),S=o().c9.fromMillis((0,w().dI)({collectionViewId:W.id,currentUserId:t.currentUser.id}));let N,ie,re=0,ae=0,se=0;const le=()=>{i().default.afterNextFlush((()=>{const e=J.state;K.isViewSpecificClientModeEnabledStore.state&&ie&&e&&!f().n4(ie.loader.filter,e.loader.filter)&&(K.isClientModeEnabledStore.setState(!1),K.isViewSpecificClientModeEnabledStore.setState(!1));const o=H(ie,e);void 0===o||K.isClientModeEnabledStore.state&&!function(e,t,n,o){if(!n)return!1;if(null!=t&&t.loader.filter&&(0,l().CU)(null==t?void 0:t.loader.filter,(e=>(0,l().yX)(e)&&(0,g().EG)(e,n.getSchema()))))return!0;return(0,A().yW)(null==t?void 0:t.loader.reducers,n.getSchema(),o)}(0,e,q,n)||(Date.now()-ae<=1e3?se++:(ae=Date.now(),se=1),se>=25&&R().default.checkGate({gateName:"collection_client_log_looping_remote_request"})&&u().log({level:"warning",from:"queryCollectionRemoteRequest",type:"queryCollectionRemoteRequest",data:{miscDataToConvertToString:{data:{viewId:W.id,collectionId:null==q?void 0:q.id,clientModeEnabled:K.isClientModeEnabledStore.state,changedReason:o,lastRemoteRequest:ie,nextRemoteRequest:e}}}}),function(e){const{environment:t,collectionContextStore:n,lastRemoteRequestReason:o,lastRemoteRequestHiddenGroupsCount:i,lastRemoteRequest:r,nextRemoteRequest:a}=e,s=(null==r?void 0:r.loader.reducers)??{},l=(null==a?void 0:a.loader.reducers)??{},c=[],d=[];for(const u of Object.keys(l)){const e=s[u],t=l[u];t&&(e||c.push({type:t.type,lastReducer:e,nextReducer:t}),e&&!f().n4(e,t)&&d.push({type:t.type,lastReducer:e,nextReducer:t}))}if(c.length>0){const e=c.some((e=>{let{type:t}=e;return"results"===t||"aggregation"===t}));"initial_load"===o&&e&&(0,b().a)({environment:t,collectionContextStore:n,request_reason:"hydrate_client"})}d.length>0&&D(n)>i&&(0,b().a)({environment:t,collectionContextStore:n,request_reason:"hide_group"})}({environment:t,collectionContextStore:K,lastRemoteRequestReason:N,lastRemoteRequestHiddenGroupsCount:re,lastRemoteRequest:ie,nextRemoteRequest:e}),N=o,re=D(K),(0,L().M)(t,K,{src:o})),ie=e}))};J.addListener(le);const ce=()=>{if((0,v().rQ)(1)){const e=M().default.DO_NOT_USE_markLegacy("database_update_lag");M().default.DO_NOT_USE_measureAfterNextFlushLegacy(e,{environment:t})}};ee.addListener(ce);const de=function(e){const t=(0,O().N)(e.collectionViewId);return m().K.get({userId:e.userId,key:t})}({userId:X,collectionViewId:W.id}),ue=t.device.isPhone||de;K.remoteResultStore.setState(void 0),K.remoteCollectionIdsStore.setState([]),K.isLoadedStore.setState(!1),K.searchQueryStore.setState(""),K.searchOpenStore.setState(!1),K.isFullScreenStore.setState(G),void 0!==Q&&(K.productUseCase=Q),K.isRootChildStore.setState($),K.reducersStore.setState({}),K.groupsStore.reset(),K.groupsLimitStore.setState(x()._9),K.boardColumnsLimitStore.setState(x()._9),K.filtersBarOpenStore.setState(ue),K.isInPeekRendererStore.setState(Y),K.subitemExpandedStore.setState(new Map),K.chartErrorStore.setState(new Map),K.isClientModeEnabledStore.setState(e),K.wasServerResponseFromCache=void 0,K.requestBackend=void 0,K.isViewSpecificClientModeEnabledStore.setState(!1),K.throttleMsStore.setState(s().e),K.asyncAggregationStatusStore.reset(),K.viewsModuleContextStore.setState(Z),K.dateRangeStartStore.setState((0,d().mK)(S.startOf("month").valueOf(),I().XX.state).valueOf()),K.dateRangeEndStore.setState(G&&!t.device.isMobile?(0,d().to)(S.endOf("month").plus({month:1}).valueOf(),I().XX.state).valueOf():(0,d().to)(S.endOf("month").valueOf(),I().XX.state).valueOf());const pe=null==W?void 0:W.getFormat(),me=null==pe?void 0:pe.collection_view_source;if("typed"===(null==me?void 0:me.type))K.setContext({type:"collectionTypedView",collectionViewBlockStore:n,databaseType:me.databaseType,collectionViewStore:W,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:n.id})});else if((0,c().TR)(me)||(0,c().hJ)(me))q&&K.setContext({type:"collectionSystemView",collectionViewBlockStore:n,collectionViewStore:W,collectionStore:q,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:W.id})});else if(me&&"collection"!==me.type)(0,h().HB)(me);else{const e=n.getSpaceId(),o=q?(0,k().D)(t.idCreator,e,null==q?void 0:q.id):void 0;q&&W.id===o?K.setContext({type:"collectionSettings",collectionViewBlockStore:n,collectionStore:q,collectionViewStore:W}):K.setContext({type:"collectionView",collectionViewBlockStore:n,collectionStore:q,collectionViewStore:W,pageVisitSourceOverride:(0,P().O1)({blockOrCollectionId:n.id})})}K.remoteRequestStoreCallback=le,K.localResultStoreCallback=ce;const ge=(0,F().X)(W),fe=C().e.get(ge);if(fe){const e=0===fe.resultSet.blockIds.size,t=K.getPageVisitSourceOverride();(t===r().y8.PersonalHomeTileTasks||t===r().y8.PersonalHomePageTasks)&&(e||C().e.locallyMutatedTasksDatabase)?C().e.locallyMutatedTasksDatabase=!1:(K.resetLoadingState(),K.resultSetStore.setState(f().mg(fe.resultSet)),K.remoteCollectionIdsStore.setState(f().mg(fe.collectionIds)),K.remoteResultStore.setState(f().mg(fe.remoteResult)),K.isLoadedStore.setState(!0))}const ve=E().transactionQueue.isPendingTransactionForRecord(W.pointer);K.wasCreatedThisSessionStore.setState(ve);const he=function(e){let{currentUserId:t,collectionViewId:n,viewsModuleCurrentPageId:o}=e;const i=m().K.get({userId:t,key:(0,U().l)({collectionViewId:n,viewsModuleCurrentPageId:o})});if(i)return(0,_().$l)(i)}({currentUserId:t.currentUser.id,collectionViewId:W.id,viewsModuleCurrentPageId:K.viewsModuleContextStore.isInLayoutBuilder()||null===(ne=K.viewsModuleContextStore.currentPageStore())||void 0===ne?void 0:ne.id});K.temporaryStateStore.setState(he||{});const{currentSpaceStore:_e}=B().default.state,be=W.getType(),ye=!q||ve&&(null===(oe=(0,T().v)(W.id))||void 0===oe?void 0:oe.isPlaceholderCollection);if(G&&K.hasSingleCollection()&&!K.settingsStore.state.open&&ye&&"chat"!==be&&"custom"!==be&&(y().Ow({collectionContextStore:K,collectionSettingsStore:K.settingsStore}),y().R8({collectionSettingsStore:K.settingsStore,item:{type:"createViewSource",existingCollectionStore:q,createdCollectionRecordPointerMap:void 0}})),q&&_e&&q.getSpaceId()===_e.id&&q.isDefaultRecordCache()&&!(0,a().kR)(n.getSystemBlockTypeStore().getValue())&&!K.settingsStore.state.open){!function(e){let{currentUserId:t,spaceId:n,collectionId:o}=e;const i=(0,V().F)({currentUserId:t,spaceId:n}),r=f().sb([o,...i]).slice(0,z);m().K.set({userId:t,key:(0,j().Y)(n),value:JSON.stringify(r)})}({currentUserId:t.currentUser.id,spaceId:_e.id,collectionId:q.id})}K.frozoneStore.setState({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1}),K.visitSessionId=p().JW(),K.virtualizedModule.reset(),K.didFireLoadEventsStore.setState(!1),K.timingTracker.reset()}}},559378:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}isActiveDemo(){return this.state.isActive}decrementStep(){if(void 0===this.state.step||0===this.state.step)return;const e=this.state.step-1;this.setState({...this.state,step:e})}incrementStep(){const{step:e,tooltipTourOutline:t}=this.state;if(void 0===e||!t)return;const n=e+1;n>=t.length?this.endTour():this.setState({...this.state,step:n})}endTour(){this.setState({...this.state,isActive:!1})}getCurrentStepBlockId(){if(this.state.tooltipTourOutline&&void 0!==this.state.step)return this.state.tooltipTourOutline[this.state.step].blockId}getCurrentStepSubStep(){if(!this.state.tooltipTourOutline||void 0===this.state.step)return;const e=this.state.tooltipTourOutline[this.state.step];return"demo_collection"===e.step_type||"demo_share"===e.step_type?e.sub_step:void 0}}const i=new o},559926:(e,t,n)=>{n.d(t,{$u:()=>N,BW:()=>U,Er:()=>V,FO:()=>se,Gp:()=>M,KD:()=>D,Ki:()=>ne,LS:()=>v,Mi:()=>R,PR:()=>le,Pd:()=>k,QV:()=>C,Sy:()=>B,V:()=>b,VW:()=>S,Vk:()=>W,X2:()=>O,_$:()=>p,aS:()=>F,aq:()=>y,c6:()=>g,dm:()=>Z,eH:()=>d,eX:()=>f,fJ:()=>u,gc:()=>ae,gp:()=>$,hO:()=>L,hs:()=>K,hy:()=>te,iT:()=>x,j5:()=>H,kO:()=>I,kV:()=>X,kY:()=>h,ks:()=>Q,lR:()=>oe,mM:()=>m,mu:()=>_,oF:()=>P,pU:()=>re,pu:()=>A,q5:()=>w,ry:()=>Y,sn:()=>T,st:()=>E,u2:()=>j,uj:()=>G,xI:()=>ee,yQ:()=>z,z$:()=>q,zW:()=>J,zu:()=>ie});var o=()=>n(997769),i=()=>n(939768),r=()=>n(989423),a=()=>n(495249),s=()=>n(644914),l=()=>n(508496),c=()=>n(10984);function d(e,t){l().default.logEvent("import_complete",t.import_source,{from:t.from}),r().u4({environment:e,event:{eventName:"import_complete",eventProperties:{from:t.from,import_source:t.import_source}}})}function u(e,t){l().default.logEvent("import_button_click",t.import_source,{from:t.from,import_type:t.import_type}),r().vd(e,"import_button_click",t)}function p(e,t){r().vd(e,"import_source_auth",t)}function m(e,t){r().vd(e,"import_source_input",t)}function g(e,t){r().vd(e,"import_file_upload",t)}function f(e,t){r().vd(e,"uploaded_file_size",t)}function v(e,t){r().vd(e,"file_upload_latency",t)}function h(e,t){l().default.logEvent("open_import_modal",null==t?void 0:t.from),r().vd(e,"open_import_modal",{...t,...(0,s().hX)({environment:e})})}function _(e,t){r().vd(e,"auth_integration",t)}function b(e,t){r().vd(e,"integration_select_all",t)}function y(e,t){r().vd(e,"integration_deselect_all",t)}function S(e,t){r().vd(e,"integration_select_item",t)}function w(e,t){r().vd(e,"integration_deselect_item",t)}function k(e,t){r().vd(e,"import_integration",t)}function I(e,t){r().vd(e,"remove_integration",t)}function x(e,t){r().vd(e,"integration_prompt_auth",t)}function A(e){r().vd(e,"open_google_drive_file_picker")}function C(e,t){r().vd(e,"google_drive_pick_file",t)}function T(e,t){r().vd(e,"google_drive_embed_file",t)}function M(e,t){r().vd(e,"unfurl_menu_option",t)}function P(e,t){const{pastedText:n}=t;if(n.length>2048)return;let a;if(o().t(n,"url")){const e=i().qg(n);e.host&&(a=e.host)}if(a){const{pastedText:n,...o}={...t,url_domain:a};r().vd(e,"paste_url",o)}}function B(e,t){const n=t.file.lastIndexOf("."),o=n>0?t.file.substring(n+1):"",i=c().AI();o&&r().vd(e,"file_uploads",{source:t.source,extension:o,subscriptionTier:i})}function R(e,t){const n=t.url?(0,i().bk)(t.url):void 0;r().vd(e,"edit_link",{type:t.type,url_domain:null==n?void 0:n.hostname})}function E(e){r().vd(e,"edit_link_title")}function D(e){r().vd(e,"developer_integrations_list_visit")}function N(e){r().vd(e,"developer_integrations_new_click")}function L(e,t){r().vd(e,"developer_integrations_filter_click",t)}function O(e,t){const n=a().Nq[t.table];r().vd(e,"developer_integrations_view_visit",{type:n})}function U(e,t){const n=a().Nq[t.table];r().vd(e,"developer_integrations_create",{type:n})}function F(e,t){const n=a().Nq[t.table];r().vd(e,"developer_integrations_view_secret",{type:n})}function V(e,t){const n=a().Nq[t.table];r().vd(e,"developer_integrations_copy_secret",{type:n})}function j(e,t){const n=a().Nq[t.table],{table:o,...i}=t;r().vd(e,"developer_integrations_update",{type:n,...i})}function z(e,t){r().vd(e,"developer_integrations_my_integrations_click",t)}function H(e,t){r().vd(e,"developer_integrations_all_integrations_click",t)}function W(e,t){r().vd(e,"developer_integrations_visit_developer_website_click",t)}function q(e,t){r().vd(e,"developer_integrations_contact_developer_click",t)}function K(e,t){r().vd(e,"developer_integrations_disconnect_click",t)}function G(e,t){r().vd(e,"developer_integrations_delete_click",t)}function $(e,t){r().vd(e,"developer_integrations_confirm_delete_click",t)}function Y(e,t){r().vd(e,"install_public_integration_oauth",t)}function Q(e,t){r().vd(e,"security_and_compliance_integration_oauth_attempt",t)}function Z(e,t){r().vd(e,"security_and_compliance_integration_install",t)}function X(e,t){r().vd(e,"security_and_compliance_integration_uninstall",t)}function J(e,t){r().vd(e,"security_and_compliance_integration_update",t)}function ee(e,t){r().vd(e,"connect_external_integration",t),l().default.logEvent("connect_external_integration",void 0,t)}function te(e,t){r().vd(e,"disconnect_external_integration",t)}function ne(e,t){r().vd(e,"activate_link_preview_menu",t)}function oe(e,t){r().vd(e,"save_link_preview",t)}function ie(e,t){r().vd(e,"update_link_preview",t)}function re(e,t){r().vd(e,"open_link_preview_help_guide",t)}function ae(e,t){r().vd(e,"remove_link_preview_with_error",t)}function se(e,t){r().vd(e,"link_preview_url_miss",t)}function le(e,t){r().vd(e,"show_all_discoverable_connected_apps",t)}},560459:(e,t,n)=>{n.d(t,{Qk:()=>a,Sd:()=>s,VZ:()=>r,tH:()=>i});var o=()=>n(140283);const i=5*o().B,r=20*o().B,a=4.5*o().B,s=4.5*o().B},562031:(e,t,n)=>{n.d(t,{g:()=>r,n:()=>a});var o=()=>n(578872),i=()=>n(351360);function r(){const e=i().default.state.mainEditorCurrentBlockStore;var t;return e?null===(t=(0,o().GN)(e))||void 0===t||null===(t=t.getSiteStore())||void 0===t?void 0:t.id:""}function a(){var e;const t=i().default.state.mainEditorCurrentBlockStore;if(t&&null!==(e=(0,o().GN)(t))&&void 0!==e&&null!==(e=e.getSiteStore())&&void 0!==e&&null!==(e=e.getSettings())&&void 0!==e&&e.enableQna)return t.getSpaceStore()}},562800:(e,t,n)=>{n.d(t,{$o:()=>v,E2:()=>f,Ix:()=>p,MN:()=>d,NG:()=>S,Nq:()=>b,QN:()=>m,SN:()=>g,Ue:()=>h,kn:()=>_,l3:()=>u,u8:()=>y});n(898992),n(672577),n(581454);var o=()=>n(921940),i=()=>n(449418),r=()=>n(496603),a=()=>n(780054),s=()=>n(836251),l=()=>n(578872),c=()=>n(351360);function d(e){let{domainName:t,domainType:n="default"}=e;return"default"===n?`${t}${u()}`:t}function u(){return`.${a().A.publicDomainName}`}function p(e){const{spaceStore:t,domainId:n}=e;if(!t)return"";const o=h(t,n);return d(o?{domainName:o.getDomainName()||"",domainType:o.getDomainType()}:{domainName:(null==t?void 0:t.getPublicContentDomain())||"",domainType:"default"})}function m(e,t){const n=e.getSpaceStore(),i=l().LC(e);if(i)return(0,o().L)({config:a().A,domainName:i.domain_name,isCustomHostname:"custom"===i.domain_type});{const e=null==n?void 0:n.getPublicContentDomain();if(e)return(0,o().L)({config:a().A,domainName:e,isCustomHostname:!1})}}function g(e){return t=>{if((0,s().w6)(e)){const e=c().default.state.mainEditorCurrentBlockStore,n=null==e?void 0:e.getRecordStore(e,t);return n?m(n):void 0}}}function f(e,t){if((0,s().w6)(e))return m(t)}function v(e){if(!e)return[];return(0,r().oE)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:i()._6,spaceId:e.id})))).sort(((e,t)=>{const n=null==e?void 0:e.getCreatedTime(),o=null==t?void 0:t.getCreatedTime();return n&&o?n-o:n?1:o?-1:0}))}function h(e,t){var n;if(e)return null===(n=y(e))||void 0===n?void 0:n.find((e=>e.id===t))}function _(e,t){var n;if(e)return null===(n=y(e))||void 0===n?void 0:n.find((e=>e.getDomainName()===t))}function b(e){var t;if(e)return null===(t=y(e))||void 0===t?void 0:t.find((e=>e.isDefault()))}function y(e){return e?(0,r().oE)(e.getPublicDomainIds().map((t=>e.getRecordModel({id:t,table:i()._6,spaceId:e.id})))):[]}function S(e,t){var n;return null===(n=y(e))||void 0===n?void 0:n.find((e=>e.getPublicHomePage()===t))}},564262:(e,t,n)=>{n.d(t,{W:()=>r});n(16280);var o=()=>n(534177),i=()=>n(190674);function r(e){if((0,i().kX)(e)){if(!e.views_main_tab_modules)throw new Error("No views_main_tab_modules found in modulesByArea");return{area:"views_main_tab_modules",viewsMainTabId:(0,o().uv)(null==e?void 0:e.views_main_tab_modules)[0]}}return{area:"page_main",viewsMainTabId:void 0}}},565049:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(493823),l=()=>n(406699),c=()=>n(331542),d=()=>n(964447),u=()=>n(196539),p=()=>n(675811),m=()=>n(20039),g=n(474848);function f(e){const t=(0,i().v3)(),{device:n}=t,{store:f,showDivider:v,popupRenderer:h,iconSize:_,iconStyle:b,highlighter:y}=e,S=(0,a().IS)((()=>({button:{fontSize:"inherit",padding:2},loadingPopupBackground:{width:280,paddingTop:8,paddingBottom:8,display:"flex",justifyContent:"center"}})),[]),w=(0,r().K8)((()=>f.isDefined()),[f]),k=(0,o.useRef)(null);if(!w)return null;return(0,g.jsxs)(o.Fragment,{children:[(0,g.jsx)(l().Ay,{originGap:4,popupType:n.isMobile?l().z7.SlideUp:l().z7.Popup,render:h??(e=>(0,g.jsx)(u().dX,{renderLoading:e=>(0,g.jsx)("div",{style:S.loadingPopupBackground,children:e&&(0,g.jsx)(c().A,{})}),teamStore:f,parent:e})),renderOrigin:t=>(0,g.jsx)(s().p,{style:S.button,ref:k,size:"sm",shouldShrink:!0,mobileFeedback:n.isMobile,...t,children:(0,g.jsx)(m().A,{store:f,maxWidth:e.maxWidth,iconSize:_,titleStyle:e.titleStyle,iconStyle:b,highlighter:y})})}),(0,g.jsx)(d().tI,{origin:k}),v&&(0,g.jsx)(p().f,{})]},f.id)}},565304:(e,t,n)=>{n.d(t,{A:()=>d,h:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(959013),a=n(474848);const s=(0,r().YK)({embedButtonText:{defaultMessage:"Embed PDF",id:"pdfBlock.embeds.button.label"}});function l(e){const{type:t,environment:n}=e;return"pdf"===t&&n.device.isMobile}function c(e,t){const c=(0,n(484714).v3)(),d=(0,r().tz)(),u=(0,o.useRef)(null),p=(0,i().uB)(e.blockResizerStore,n(891279).A),m=(0,i().K8)((()=>{const t=e.store.getType();return t&&l({environment:c,type:t})}),[c,e.store])?(0,a.jsx)(n(489436).A,{store:e.store,disabled:e.disabled}):(0,a.jsx)(n(24611).Ay,{...e,blockResizerStore:p,ref:u,store:e.store,iconSvg:n(679596).G,mediaMenuCurrentTab:"file",mediaMenuTabs:[{type:"file",fileUpload:!0},{type:"embed"}],mediaMenuEmbedCaption:(0,a.jsx)(r().sA,{defaultMessage:"Embed a PDF file",id:"pdfBlock.embeds.caption"}),embedButtonText:d.formatMessage(s.embedButtonText),urlInputPlaceholder:"https://...",children:(0,a.jsx)(r().sA,{defaultMessage:"Embed a PDF",id:"pdfBlock.placeholder"})});return(0,n(891078).NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"pdf",getNode:()=>{const e=u.current;return e?e.getNode():null},getBlockStore:()=>e.store})),[e.store]),m)}const d=o.memo(o.forwardRef(c),n(821062).A)},566009:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},566908:(e,t,n)=>{n.d(t,{N:()=>p,S:()=>m});n(18107),n(967357);var o=()=>n(742852),i=(n(296540),n(474848));const r={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10.61 3.61a3.776 3.776 0 0 1 5.34 0l.367.368a3.776 3.776 0 0 1 0 5.34l-.715.715a4.6 4.6 0 0 0-1.67-.098l1.502-1.501a2.526 2.526 0 0 0 0-3.572l-.368-.367a2.526 2.526 0 0 0-3.572 0L9.641 6.347a.625.625 0 1 1-.883-.883zm-.675 10.323-1.5 1.5a2.525 2.525 0 0 1-3.573 0l-.367-.367a2.526 2.526 0 0 1 0-3.572l1.853-1.853a.625.625 0 1 0-.884-.884L3.61 10.61a3.776 3.776 0 0 0 0 5.34l.367.367a3.776 3.776 0 0 0 5.34 0l.715-.715a4.6 4.6 0 0 1-.098-1.67"}),(0,i.jsx)("path",{d:"M12.98 7.833a.625.625 0 1 0-.885-.884l-5.448 5.448a.625.625 0 0 0 .884.884zM14.5 18a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m1.969-4.094h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375a.625.625 0 0 0 0-1.25"})]})},a=(0,n(340498).wt)("linkBadgePlus",r);var s=()=>n(878377),l=()=>n(781286),c=()=>n(165162),d=()=>n(416726);const u=(0,n(959013).YK)({addImageHyperlink:{id:"action.addImageHyperlink",defaultMessage:"Add link"},addImageHyperlink6dotRedesign:{id:"action.addImageHyperlink.6dotredesign",defaultMessage:"Add link to image"},editImageHyperlink:{id:"action.editImageHyperlink",defaultMessage:"Edit link"},editImageHyperlink6dotRedesign:{id:"action.editImageHyperlink.6dotredesign",defaultMessage:"Edit link to image"}}),p=(0,d().Fw)({key:"link image",displayName:(0,c().Sx)({gateName:"updated_6dot_menu"})?u.addImageHyperlink6dotRedesign:u.addImageHyperlink,analyticsName:u.addImageHyperlink.defaultMessage,svg:(0,c().Sx)({gateName:"updated_6dot_menu"})?a:o().w,validators:[s().p2L,s().vXb,s().wu0,s().AU6(s().vEP),s().AU6(s().GPx)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,t,n)=>{let{blocks:o}=t;const i=o.at(0);i&&(l().hv({store:i}),e())}}),m=(0,d().Fw)({key:"link image",displayName:(0,c().Sx)({gateName:"updated_6dot_menu"})?u.editImageHyperlink6dotRedesign:u.editImageHyperlink,analyticsName:u.editImageHyperlink.defaultMessage,svg:o().w,validators:[s().p2L,s().vXb,s().wu0,s().AU6(s().vEP),s().GPx],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,track:{actionName:"init_edit_link"},action:(e,t,n)=>{let{blocks:o}=t;const i=o.at(0);i&&(l().hv({store:i}),e())}})},566953:(e,t,n)=>{n.d(t,{g9:()=>i});n(898992),n(737550);var o=()=>n(68263);function i(e){const t=e.getTeamPermissionsForId(e.getParentId()).some((e=>"explicit_team_permission"===e.type&&(0,o().Tt)(e.role)));return e.isRestricted()&&!t}},568625:(e,t,n)=>{n.d(t,{L:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("ellipsis",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M2.887 9.014c.273 0 .52-.064.738-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.41 1.41 0 00-1.04-.417c-.264 0-.505.066-.724.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.307.394.526.526.219.128.46.192.725.192zm5.113 0a1.412 1.412 0 001.244-.718c.132-.219.198-.46.198-.725 0-.405-.14-.747-.423-1.025A1.386 1.386 0 008 6.129c-.264 0-.506.066-.725.198a1.412 1.412 0 00-.718 1.244c0 .265.064.506.192.725.132.219.308.394.526.526.22.128.46.192.725.192zm5.106 0c.265 0 .506-.064.725-.192.219-.132.394-.307.526-.526.133-.219.199-.46.199-.725 0-.405-.142-.747-.424-1.025a1.394 1.394 0 00-1.026-.417 1.474 1.474 0 00-1.265.718c-.127.218-.19.46-.19.724 0 .265.063.506.19.725.133.219.308.394.527.526.223.128.47.192.738.192z"})})},569577:(e,t,n)=>{n.d(t,{H:()=>l,V:()=>c});var o=()=>n(695625),i=()=>n(351360),r=()=>n(630116),a=()=>n(315957),s=()=>n(778417);function l(e){const{mainEditorCurrentBlockStore:t}=i().default.state;if(t){const n=r().Bv.createChildStore(t,e.blockStore.pointer);a().A.setState({...a().A.state,originRect:e.originRect||o().T.getRectFromStore(e.blockStore),blockStore:n})}}function c(e){a().A.reset(),s().IU({environment:e})}},569777:(e,t,n)=>{n.d(t,{A:()=>a,q:()=>o});let o=function(e){return e.Forward="Forward",e.Backward="Backward",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1}}isOpen(){if(this.state.open){this.state;return!0}return!1}}const r=new i;n(604341).exposeDebugValue("EquationAnnotationStore",r);const a=r},569912:(e,t,n)=>{n.d(t,{A:()=>a,Z:()=>r});var o=()=>n(869562),i=()=>n(753199);function r(e){(0,i().SQ)({event:e,context:i().y$.SidebarMouseMove,callback:()=>{o().close()}})}const a=function(e){return e({onMouseMove:r})}},570241:(e,t,n)=>{n.d(t,{Z:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{abortControllersByPage:{},globalAbortController:new AbortController}}}const i=new o},570323:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},571062:(e,t,n)=>{n.d(t,{A2:()=>a,FW:()=>i,uW:()=>r});var o=()=>n(989423);function i(e){const{environment:t,...n}=e;(0,o().u4)({environment:t,event:{eventName:"suggesting_mode_session_start",eventProperties:n}})}function r(e){const{environment:t,...n}=e;(0,o().u4)({environment:t,event:{eventName:"suggesting_mode_session_end",eventProperties:n}})}function a(e){const{environment:t,...n}=e;(0,o().u4)({environment:t,event:{eventName:"suggest_edit",eventProperties:n}})}},571731:(e,t,n)=>{n.d(t,{J:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("tableBlock",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{fillRule:"evenodd",d:"M4.25 16.5a2.75 2.75 0 01-2.75-2.75v-7.5A2.75 2.75 0 014.25 3.5h11.5a2.75 2.75 0 012.75 2.75v7.5a2.75 2.75 0 01-2.75 2.75H4.25zM3 6.25C3 5.56 3.56 5 4.25 5h5v2.5H3V6.25zM3 9h6.25v2H3V9zm0 3.5v1.25c0 .69.56 1.25 1.25 1.25h5v-2.5H3zm7.75 0V15h5c.69 0 1.25-.56 1.25-1.25V12.5h-6.25zM17 11V9h-6.25v2H17zm-6.25-3.5H17V6.25C17 5.56 16.44 5 15.75 5h-5v2.5z",clipRule:"evenodd"})})},572080:(e,t,n)=>{n.d(t,{JV:()=>A,Sy:()=>k,ZB:()=>C,_V:()=>M,hY:()=>y,j0:()=>T,s4:()=>x});n(944114),n(581454);var o=()=>n(857639),i=()=>n(959044),r=()=>n(502800),a=()=>n(780054),s=()=>n(972435),l=()=>n(179534),c=()=>n(351360),d=()=>n(508496),u=()=>n(865241),p=()=>n(630116),m=()=>n(606846),g=()=>n(328523),f=()=>n(848259),v=()=>n(449506),h=()=>n(901389),_=()=>n(751156);const b=(0,n(959013).YK)({archiveError:{id:"notificationActions.archiveNotification.errorMessage",defaultMessage:"Failed to archive. Please try again."},setReadError:{id:"notificationActions.setRead.errorMessage",defaultMessage:"Failed to mark notification as read. Please try again."},setAllAsReadError:{id:"notificationActions.setAllAsRead.errorMessage",defaultMessage:"Failed to mark all notifications as read. Please try again."},setUnreadError:{id:"notificationActions.setUnread.errorMessage",defaultMessage:"Failed to mark notification as unread. Please try again."}});async function y(e){const t=m().Ay.state.currentTab,{currentSpaceStore:n}=c().default.state;if(n&&!a().A.isAdminMode&&(0,m().zp)(t)){try{await v().callApi({eventName:"setNotificationsAsRead",environment:e,data:{spaceId:n.id,timestamp:Date.now(),type:t}})}catch(i){return h().f1(s().A.formatMessage(b.setAllAsReadError)),void o().log({level:"error",from:"notificationActions",type:"setCurrentUpdatesTabAsRead",error:(0,r().convertErrorToLog)(i)})}w(t,n.id,S.decrementToZero)}}const S={incrementByOne:e=>e+1,decrementByOne:e=>Math.max(e-1,0),decrementToZero:e=>0};function w(e,t,n){const{results:o}=l().A.state,i=o.map((o=>{if(o.spaceId===t){const t=o.unread[e];return void 0===t?o:{...o,unread:{...o.unread,[e]:n(t)}}}return o}));l().A.setState({results:i})}async function k(e,t,n){const{currentSpaceStore:i}=c().default.state;if(i&&!a().A.isAdminMode){try{for(;;){if(!(await I({environment:e,currentSpaceStore:i,inbox:t,readFilter:n})).more)break}}catch(l){return h().f1(s().A.formatMessage(b.archiveError)),void o().log({level:"error",from:"notificationActions",type:"archiveAll",error:(0,r().convertErrorToLog)(l)})}"read"!==n&&w(t,i.id,S.decrementToZero)}}async function I(e){const{environment:t,currentSpaceStore:n,inbox:i,readFilter:a}=e,l=await v().callApi({eventName:"getUnvisitedNotificationIds",environment:t,data:{spaceId:n.id,timestamp:Date.now(),type:i,size:500,readFilter:a}});if("failed"===l.type)return h().f1(s().A.formatMessage(b.archiveError)),o().log({level:"error",from:"notificationActions",type:"archiveApiError",error:(0,r().convertErrorToLog)(l.error)}),{more:!1};const{notificationIds:c}=l.data;return await async function(e){const{environment:t,notificationIds:n,rootStore:o}=e,{serverCommitResult:i}=_().createAndCommit({userAction:"notificationActions.archiveNotificationIds",environment:t,canUndo:!0,undoCheckpoint:!0,perform:e=>{for(const t of n)A({transaction:e,rootStore:o,visited:!0,notificationId:t})}});await i}({environment:t,notificationIds:c,rootStore:n}),c.length>=500?{more:!0}:{more:!1}}function x(e){const{notification:t,rootStore:n,transaction:a}=e;if(!t.visited){try{A({notificationId:t.id,rootStore:n,transaction:a,visited:!0})}catch(l){return h().f1(s().A.formatMessage(b.archiveError)),void o().log({level:"error",from:"notificationActions",type:"archiveNotification",error:(0,r().convertErrorToLog)(l)})}if(!t.read){w(i().ZS[t.type],t.space_id,S.decrementByOne)}}}function A(e){const{transaction:t,notificationId:n,rootStore:o,visited:r}=e,a=(0,p().Oo)(o,{table:i()._p,id:n});_().applyOperation({transaction:t,store:a,operation:{command:"update",pointer:{table:i()._p,id:n,spaceId:o.pointer.spaceId},path:[],args:r?{visited:!0,read:!0,archived_at:Date.now()}:{visited:!1,archived_at:null}}})}function C(e){const{transaction:t,notification:n,rootStore:a,read:l}=e;if(n.read===l)return;const c=(0,p().Oo)(a,{table:i()._p,id:n.id});try{_().applyOperation({transaction:t,store:c,operation:{command:"update",pointer:{table:i()._p,id:n.id,spaceId:n.space_id},path:[],args:{read:l,...l?{}:{visited:!1}}}})}catch(d){return e.suppressErrorMessage||h().f1(s().A.formatMessage(l?b.setReadError:b.setUnreadError)),void o().log({level:"error",from:"notificationActions",type:"setRead",error:(0,r().convertErrorToLog)(d)})}w("mentions",n.space_id,l?S.decrementByOne:S.incrementByOne),"commented"===n.type?w("comments",n.space_id,l?S.decrementByOne:S.incrementByOne):w("activity",n.space_id,l?S.decrementByOne:S.incrementByOne)}function T(){return l().A.getUnreadCountForCurrentSpace().mentions}function M(e){let{environment:t,newTab:n,shouldTrack:o}=e;const i=m().Ay.state.currentTab;if(i!==n&&("mentions"===n?m().Ay.update((e=>({...e,currentTab:n,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}))):m().Ay.update((e=>({...e,currentTab:n})))),o){const e=t.device.isMobile;f().pQ({environment:t,forceRestartSession:!1,from:"updates-tab-click"}),e&&g().Mq(t,{itemName:"updates"})}"mentions"===i&&async function(e){const t=d().default.checkGate({gateName:"multi_cell_get_user_notifications"}),n="on"===d().default.getGroup("inbox_activity_split");let o=[];if(t){const t=v().callMultiCellApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:n,markNotificationsAsReceived:u().A.state.isVisible},headers:{}});for await(const e of t)"success"===e.type&&o.push(...e.data.results)}else{const t=await v().callApi({eventName:"getUserNotifications",environment:e,data:{size:1e3,isInboxV2:!0,splitInboxActivity:n,markNotificationsAsReceived:u().A.state.isVisible}});if("failed"===t.type)return;o=t.data.results}l().A.setState({results:o})}(t)}},572088:(e,t,n)=>{n.d(t,{LU:()=>p,fY:()=>m,jw:()=>s,o8:()=>g,yJ:()=>c});n(898992),n(354520);var o=()=>n(513416),i=()=>n(959013),r=()=>n(508496),a=()=>n(53137);function s(e){const t=a().A.state;return t.loaded?t.bots.filter((t=>t.integration_id===e)):[]}const l=(0,i().YK)({invalidRequest:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidRequest",defaultMessage:"The authentication request is invalid. Please contact support if issue persists."},unauthorizedClient:{id:"unfurlingHelpers.unauthorizedClient.",defaultMessage:"The client is not authorized to request an authorization code using this method. Please contact support if issue persists."},accessDenied:{id:"unfurlingHelpers.authenticatedErrorDescription.accessDenied",defaultMessage:"The resource owner or authorization server denied the request. Check with your organization or resource owner to ensure OAuth installation is enabled."},unsupportedResponseType:{id:"unfurlingHelpers.authenticatedErrorDescription.unsupportedResponseType",defaultMessage:"The authorization server does not support obtaining an authorization code using this method. Please contact support if issue persists."},invalidScope:{id:"unfurlingHelpers.authenticatedErrorDescription.invalidScope",defaultMessage:"The requested scope is invalid. Please contact support if issue persists."},serverError:{id:"unfurlingHelpers.authenticatedErrorDescription.serverError",defaultMessage:"The authorization server encountered an unexpected condition that prevented it from fulfilling the request. Please contact support if issue persists."},temporarilyUnavailable:{id:"unfurlingHelpers.authenticatedErrorDescription.temporarilyUnavailable",defaultMessage:"The authorization server is currently unable to handle the request due to a temporary overloading or maintenance of the server. Please contact support if issue persists."},githubAppRequestAccessUnsupported:{id:"unfurlingHelpers.authenticatedErrorDescription.githubAppRequestAccessUnsupported",defaultMessage:"Request Access is not supported. You must be both a GitHub Admin and Notion Workspace Admin to connect the two apps."},unknownError:{id:"unfurlingHelpers.authenticatedErrorDescription.unknownError",defaultMessage:"The authorization server responded with an unknown error (`{value}`). Please contact support if issue persists."}});function c(e){return"invalid_request"===e?l.invalidRequest:"unauthorized_client"===e?l.unauthorizedClient:"access_denied"===e?l.accessDenied:"unsupported_response_type"===e?l.unsupportedResponseType:"invalid_scope"===e?l.invalidScope:"server_error"===e?l.serverError:"temporarily_unavailable"===e?l.temporarilyUnavailable:"github_app_request_access_unsupported"===e?l.githubAppRequestAccessUnsupported:l.unknownError}const d=(0,i().YK)({unknownError:{id:"unfurlingHelpers.unfurlResponseError.unknownError",defaultMessage:"Can't load preview"},accessDenied:{id:"unfurlingHelpers.unfurlResponseError.accessDenied",defaultMessage:"Access denied"},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseError.reAuthenticate",defaultMessage:"Re-authentication necessary"},notFound:{id:"unfurlingHelpers.unfurlResponseError.notFound",defaultMessage:"Content not found"},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseError.unprocessableEntity",defaultMessage:"Unrecognized URL"},rateLimited:{id:"unfurlingHelpers.unfurlResponseError.rateLimited",defaultMessage:"Too many requests"},serverError:{id:"unfurlingHelpers.unfurlResponseError.serverError",defaultMessage:"Can't load preview"},invalidRequest:{id:"unfurlingHelpers.unfurlResponseError.invalidRequest",defaultMessage:"Can't load preview"},authRefresh:{id:"unfurlingHelpers.unfurlResponseError.authRefresh",defaultMessage:"Fetching Preview"},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.githubNotAcceptable",defaultMessage:"Need owner role"},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseError.jiraNotAcceptable",defaultMessage:"Synced in another workspace"},notAcceptable:{id:"unfurlingHelpers.unfurlResponseError.notAcceptable",defaultMessage:"Not Acceptable"},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseError.databaseSyncLimit",defaultMessage:"Synced Database limit reached"},selectFileToContinue:{id:"unfurlingHelpers.unfurlResponseError.selectFileToContinue",defaultMessage:"Select file to continue"}}),u=(0,i().YK)({unknownError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unknownError",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},accessDenied:{id:"unfurlingHelpers.unfurlResponseErrorDescription.accessDenied",defaultMessage:"You do not have appropriate permission to access this resource."},reAuthenticate:{id:"unfurlingHelpers.unfurlResponseErrorDescription.reAuthenticate",defaultMessage:"You need to re-authenticate your account to access this resource."},notFound:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notFound",defaultMessage:"The resource information for this link could not be found. It may no longer exist or you may not have appropriate permission to access it."},unprocessableEntity:{id:"unfurlingHelpers.unfurlResponseErrorDescription.unprocessableEntity",defaultMessage:"This url is not currently embedable by this integration."},rateLimited:{id:"unfurlingHelpers.unfurlResponseErrorDescription.rateLimited",defaultMessage:'"{integrationName}" received too many requests for you or your organization. Please wait a few minutes and try again.'},serverError:{id:"unfurlingHelpers.unfurlResponseErrorDescription.serverError",defaultMessage:'Oh no! Seems like there was a "{integrationName}" server error. Received error code "{statusCode}".'},invalidRequest:{id:"unfurlingHelpers.unfurlResponseErrorDescription.invalidRequest",defaultMessage:'There was an error trying to get information for this resource. Received error code "{statusCode}".'},authRefresh:{id:"unfurlingHelpers.unfurlResponseErrorDescription.authRefresh",defaultMessage:"Fetching Preview via Login Update, please wait."},githubNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.githubNotAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},jiraNotAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.jiraNotAcceptable",defaultMessage:"You have synced this resource in another workspace."},notAcceptable:{id:"unfurlingHelpers.unfurlResponseErrorDescription.notAcceptable",defaultMessage:"You do not have appropriate permission to sync this resource. You need to have an owner role."},databaseSyncLimit:{id:"unfurlingHelpers.unfurlResponseErrorDescription.databaseSyncLimit",defaultMessage:"Your workspace has hit the Synced Database limit."},selectFileToContinue:{id:"unfurlingHelpers.unfurlResponseErrorDescription.selectFileToContinue",defaultMessage:"Google now requires using Google Picker to select files"}});function p(e,t){return void 0===e?{message:d.unknownError,description:u.unknownError}:401===e?{message:d.reAuthenticate,description:u.reAuthenticate}:439===e?{message:d.authRefresh,description:u.authRefresh}:403===e?{message:d.accessDenied,description:u.accessDenied}:404===e?{message:d.notFound,description:u.notFound}:422===e?{message:d.unprocessableEntity,description:u.unprocessableEntity}:428===e?{message:d.selectFileToContinue,description:u.selectFileToContinue}:429===e?{message:d.rateLimited,description:u.rateLimited}:406===e?"jira"===t?{message:d.jiraNotAcceptable,description:u.jiraNotAcceptable}:"github"===t?{message:d.githubNotAcceptable,description:u.githubNotAcceptable}:{message:d.notAcceptable,description:u.notAcceptable}:417===e?{message:d.databaseSyncLimit,description:u.databaseSyncLimit}:(0,o().f1)(e)?{message:d.serverError,description:u.serverError}:{message:d.invalidRequest,description:u.invalidRequest}}function m(e){return!e.device.isMobileBrowser}function g(){return r().default.checkGate({gateName:"beta-developers-external"})}},574012:(e,t,n)=>{n.d(t,{A:()=>s,i:()=>r});var o=()=>n(496603),i=()=>n(155959);let r=function(e){return e[e.willHide=0]="willHide",e[e.hidden=1]="hidden",e[e.willShow=2]="willShow",e[e.shown=3]="shown",e}({});class a extends(()=>n(757695))().default{constructor(){super(...arguments),this.updateKeyboardPhaseDebounced300=o().sg(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),300),this.updateKeyboardPhaseDebounced150=o().sg(((e,t)=>{this.setState({...this.state,phase:e,estimatedKeyboardWebViewOverlap:t})}),150),this.updateKeyboardPhase=(e,t,o)=>{const{device:r,RouterStore:a}=e;if(!(0,i().T)("supportsAlwaysMultiTextSelectionBehavior")){const e="page"===a.state.route.name,i=r.isAndroid&&r.isMobileNative,s="editing"===n(24157).default.state.mode;if(e&&i&&!s)return void this.updateKeyboardPhaseDebounced300(t,o)}if((0,i().T)("supportsDebouncingKeyboardDuringOnboarding")){const e="onboarding"===a.state.route.name,n=r.isIOS&&r.isMobileNative;if(e&&n)return void this.updateKeyboardPhaseDebounced150(t,o)}this.setState({...this.state,phase:t,estimatedKeyboardWebViewOverlap:o})},this.updateKeyboardConfig=(e,t)=>{this.update((n=>({...n,packageName:e,activeLocale:t})))},this.keyboardHeight=()=>this.state.estimatedKeyboardWebViewOverlap,this.mobileNativeBottomPadding=e=>{const t=this.state.estimatedKeyboardWebViewOverlap;if(t>0)return t;const{WindowSizeStore:o,TabbedRouterStore:r}=e;let a=0;if((0,i().T)("supportsNativeBottomBarOverlappingWebView")){const t=(0,n(357307).Y)(e),o=r.state.modal.length>0;t&&!o&&(a=this.state.nativeBottomBarHeight??48)}return o.state.paddingBottom+a}}getInitialState(){return{phase:r.hidden,estimatedKeyboardWebViewOverlap:0,nativeBottomBarHeight:void 0,packageName:void 0,activeLocale:void 0}}async onShow(e){await this.waitUntil((()=>this.state.phase===r.shown)),e()}async onHide(e){await this.waitUntil((()=>this.state.phase===r.hidden)),e()}}const s=new a},574036:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){return(0,i.jsx)(n(760217).A,{role:"menuitemcheckbox",...e,ref:t,right:(0,i.jsx)(n(946548).A,{...e,disallowTabbing:!0}),dontShrinkRight:!0})}const a=o.forwardRef(r)},575143:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){const{isMobile:o}=(0,n(484714).Y0)(),r=(0,n(700251).y$)(),{svg:a,svgCustomFill:s,svgContainerStyle:l,tooltipText:c,svgStyle:d,isRed:u,shortcutStyle:p,...m}=e,g=!o&&m.shortcut,f=(0,n(401497).IS)((e=>({shortcut:{color:e.text.tertiary,fontSize:12,whiteSpace:"nowrap",...p},svg:{width:r,height:r,fill:s?s(e):u?"inherit":e.icon.primary,...d},svgContainer:{display:"flex",alignItems:"center",justifyContent:"center",color:e.icon.primary,...l}})),[u,r,s,d,l,p]);return(0,i.jsx)(n(112995).K,{from:"ActionMenuItem",fallback:e=>{let{error:t,errorId:o}=e;return(0,i.jsx)(n(794359).P,{error:t,errorId:o,additionalLabelMarginLeft:4})},children:(0,i.jsx)(n(859428).A,{placement:n(962730).W.Right,disableTooltip:!c,renderTooltip:()=>c,render:e=>(0,i.jsx)(n(760217).A,{...(0,n(553965).A)(m,e),icon:a?(0,i.jsx)("div",{style:f.svgContainer,children:a(f.svg)}):null,right:m.right||g&&(0,i.jsx)(n(35392).A,{name:g,style:f.shortcut,onlyShowFirst:!0}),isRedOnHover:u,ref:t})})})}const a=o.forwardRef(r)},575157:(e,t,n)=>{n.r(t),n.d(t,{docPlainTextIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.25 5.2a.55.55 0 0 0 0 1.1h5.5a.55.55 0 0 0 0-1.1zM6.7 8.25a.55.55 0 0 1 .55-.55h5.5a.55.55 0 0 1 0 1.1h-5.5a.55.55 0 0 1-.55-.55m.55 1.95a.55.55 0 0 0 0 1.1H10a.55.55 0 1 0 0-1.1z"}),(0,o.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-11a2.125 2.125 0 0 0-2.125-2.125zM5.375 4.5c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v11a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})]})},r=(0,n(340498).wt)("docPlainText",i)},575301:(e,t,n)=>{n.d(t,{T4:()=>h,o_:()=>f,qh:()=>v});var o=n(296540),i=()=>n(395361),r=()=>n(484714),a=()=>n(847249),s=()=>n(401497),l=()=>n(284371),c=()=>n(725614),d=()=>n(116008),u=()=>n(231722),p=()=>n(176106),m=()=>n(574012),g=()=>n(24157);function f(){const e=(0,r().v3)();return(0,a().K8)((()=>m().A.mobileNativeBottomPadding(e)),[e])}function v(){const e=(0,r().v3)(),{isMobileNative:t,isAndroid:n}=(0,r().Y0)(),{RouterStore:s,NativeMobileActionBarStore:l}=e,f=(0,a().K8)((()=>{var e;if(!t||!n)return!1;if("page"!==s.state.route.name)return!1;if(m().A.state.phase!==m().i.hidden)return!1;if(p().A.state.open)return!1;if(d().A.state.open)return!1;if(Boolean(null==l||null===(e=l.state)||void 0===e?void 0:e.menu))return!1;const o=g().default.state,i="editing"===o.mode?o.multiSelection:void 0;return!(i&&!(0,u().kM)(i))}),[s,n,t,l]),v=(0,i().Y)(((e,t)=>{t&&c().clear({environment:e})}),150);(0,o.useEffect)((()=>{v(e,f)}),[e,f,v])}function h(){const e=(0,r().Y0)();return(0,s().IS)((t=>({popup:{...e.isMobile&&{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden"}},menuScroller:e.isMobile?{background:t.surface.wash}:{},header:e.isMobile?{display:"flex",justifyContent:"center",alignItems:"center",fontSize:16,fontWeight:l().Wy.semibold,background:t.surface.wash,height:45}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Wy.semibold},subheader:e.isMobile?{display:"flex",justifyContent:"start",alignItems:"center",fontSize:15,fontWeight:l().Wy.medium,background:t.surface.wash,height:45,color:t.text.secondary,paddingLeft:16,paddingRight:16}:{paddingLeft:16,paddingRight:16,paddingTop:10,fontWeight:l().Wy.semibold},sectionMenuItem:e.isMobile?{overflow:"hidden",background:t.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:t.stroke.secondary,padding:void 0}:{},buttonMenuItem:e.isMobile?{backgroundColor:t.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:t.stroke.secondary}:{},buttonMenuItemPressed:{background:t.buttonPressedBackground},transparentButtonMenuItemBorder:{borderBottomColor:"transparent"},title:e.isMobile?{fontSize:16}:{},icon:{...e.isMobile?{height:24,width:24}:{height:20,width:20}},checkIcon:{...e.isMobile?{height:20,width:20}:{height:16,width:16}}})),[e])}},575650:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(545206),i=n(474848);const r=function(e){let{targetRecordId:t,style:r}=e;const a=(0,n(847249).K8)((()=>o().A.state[t]),[t]),s=(0,n(401497).IS)((()=>({warning:{maxWidth:200,margin:8}})),[]);if(!a)return null;const{taskStatus:l,completeBlocks:c,totalBlocks:d}=a,u=(d??0)>o().z,p=(0,i.jsx)(n(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,style:s.warning,children:(0,i.jsx)(n(959013).sA,{defaultMessage:"Looks like you're trying to move a lot of content ({blocks, plural, one {# block} other {# blocks}})! Please do not refresh your page or close the window until the process completes.",id:"moveOrDuplicateProgress.warning",values:{blocks:d}})}),m=(()=>{switch(l){case"not_started":case"failure":return;case"success":return 100;case"in_progress":if("number"!=typeof c||"number"!=typeof d)return;if(0===d)return;const e=c/d;return 1===e?99:Math.round(100*e)}})();return"number"!=typeof m?u?p:null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n(78901).z,{percentage:m,style:r}),u?p:void 0]})}},576250:(e,t,n)=>{n.d(t,{y:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("alias",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M13.1475 10.5869V3.72363C13.1475 3.25195 12.833 2.93066 12.3477 2.93066H5.48438C5.02637 2.93066 4.70508 3.27246 4.70508 3.67578C4.70508 4.07227 5.05371 4.40039 5.46387 4.40039H7.89746L10.8438 4.30469L9.59961 5.39844L3.08496 11.9199C2.92773 12.0771 2.8457 12.2686 2.8457 12.46C2.8457 12.8564 3.20801 13.2256 3.61816 13.2256C3.80957 13.2256 3.99414 13.1504 4.15137 12.9932L10.6729 6.47168L11.7803 5.22754L11.6641 8.05762V10.6074C11.6641 11.0176 11.9922 11.373 12.4023 11.373C12.8057 11.373 13.1475 11.0312 13.1475 10.5869Z"})})},577437:(e,t,n)=>{n.d(t,{C$:()=>R,zD:()=>N,Se:()=>E,Bw:()=>B,e2:()=>u().e2,N9:()=>u().N9,P9:()=>D,_X:()=>P,Mc:()=>L});var o=()=>n(484714),i=()=>n(847249),r=()=>n(784438),a=()=>n(821062),s=()=>n(346923),l=(n(944114),()=>n(496506)),c=()=>n(857639),d=()=>n(848538),u=()=>n(411387),p=()=>n(989423),m=()=>n(600871),g=()=>n(155959),f=()=>n(508496),v=()=>n(975971),h=()=>n(630116);function _(e,t,n){return function(e,t){const n=new(l().default)(t,{debugName:`awaitComputedStore:${e}`});return new Promise((e=>{const t=()=>{const o=n.state;"loading"!==o&&(e(o),n.removeListener(t))};n.addListener(t)}))}(n.name,(()=>b(e,t,n)))}function b(e,t,n){const{name:o,spaceId:i,userId:r}=n;if(!i)return;const a=v().A.getData(e,{spaceId:i}),s=null==a?void 0:a.billingData,l=null==a?void 0:a.overrides,u=t[o]({environment:e,spaceId:i,userId:r});if(!s||!a||"loading"===u)return"loading";const p=r?new(h().VF)(e,{table:d().aJ,spaceId:i,id:(0,d().yO)({spaceId:i,userId:r})}):void 0,m=y(e,s);return{...{name:o,scope:{id:i,type:"space",billingData:s,premiumFeatureOverrides:l??{}},actor:{isAdminActor:!1,isSpaceAdmin:(null==p?void 0:p.isWorkspaceOwner())??!1},data:u,supportedProducts:m,environment:{isMobileNative:e.device.isMobileNative,experimentService:f().default,trackFunction:S(e),logFunction:c().log.bind(c())}},..."amount"in n?{amount:n.amount}:{}}}function y(e,t){return"mixed"===t.provider?[]:"app_store"!==t.provider&&"play_store"!==t.provider||e.device.isMobileNative?"stripe"===t.provider&&e.device.isMobileNative?[]:function(e){if(!e.device.isMobileNative)return[...u().iI];const t=[];(0,m().mM)({environment:e})&&t.push("personal");(0,g().T)("supportsAiIAP")&&t.push("ai");return t}(e):[]}function S(e){return function(t){(0,p().u4)({environment:e,event:{eventName:"premium_feature_availability",eventProperties:t}})}}var w=()=>n(96689),k=()=>n(780054),I=()=>n(640653),x=()=>n(985405),A=()=>n(668721);const C={guests:e=>({current:(0,I().fD)({environment:e.environment,spaceId:e.spaceId})??0}),team_self_promotion:e=>{},internal_guests:e=>({current:(0,I().fD)({environment:e.environment,spaceId:e.spaceId})??0,hasLowGuestLimit:(0,n(807778).kh)()}),members:e=>({current:(0,I().Xz)({environment:e.environment,spaceId:e.spaceId})??0}),non_admin_members:e=>{},view_chart:e=>{},form_filesize:e=>{},form_customization:e=>{},unbranded_forms:e=>{},forms_conditional_logic:e=>{},premium_automations:e=>{},move_to:e=>{},claimable_spaces:e=>{},domain_settings:e=>{},managed_users:e=>{},invite_user_to_workspace_mentions:e=>{},saml:e=>{},scim:e=>{},legal_holds:e=>{},export_members:e=>{},hipaa_compliance:e=>{},sites_multiple_public_domains:e=>{},custom_image_upload_favicon:e=>{},custom_public_sites_layout:e=>{},seo_title_and_description:e=>{},admin_transfer_private_content:e=>{},configurable_mention_invites:e=>{},configurable_retention:e=>{},watermarkless_chart_export:e=>{},configurable_deletion_and_retention_settings:e=>{},sudo_mode:e=>{},slack_imports_invite:e=>{},google_imports_invite:e=>{},content_reprovisioning:e=>{},ai_connectors:e=>{},collection_property_autofill:e=>{const{spaceUsage:t,userUsage:n,memberCount:o,aiPromotionConfig:i,space:r}=T(e);return{spaceUsage:t,userUsage:n,memberCount:o,aiPromotionConfig:i,space:r}},ai_usage:e=>{const{spaceUsage:t,userUsage:n,memberCount:o,aiPromotionConfig:i,space:r}=T(e);return{current:t,userUsage:n,memberCount:o,aiPromotionConfig:i,space:r}},ai_research_mode:e=>{},ai_meeting_notes:e=>{},ai_app_builder:e=>{},block_read_and_write_role:e=>{},assistant_image_filesize_bytes:e=>{},assistant_json_filesize_bytes:e=>{},assistant_pdf_filesize_bytes:e=>{},custom_teamspace_permissions:e=>{},collection_connected_property_google_drive:e=>({space:M(e)}),collection_connected_property_figma:e=>({space:M(e)}),collection_connected_property_zendesk:e=>({space:M(e)}),collection_connected_property_github:e=>({space:M(e)}),collection_synced_database_github:e=>({space:M(e)}),collection_synced_database_asana:e=>({space:M(e)}),collection_synced_database_gitlab:e=>({space:M(e)}),collection_synced_database_jira:e=>({space:M(e)}),collection_synced_database_jira_workspace:e=>({space:M(e)}),collection_synced_database_jira_datacenter:e=>({space:M(e)})};function T(e){var t,o;let{environment:i,spaceId:r}=e;if(!r)return{spaceUsage:0,userUsage:0,memberCount:0,aiPromotionConfig:k().A.promotions.ai.writer,space:void 0};const a=M({environment:i,spaceId:r}),s=(0,n(928217).oR)(k().A.promotions.ai,a);return{spaceUsage:(null===(t=A().A.state)||void 0===t?void 0:t.spaceUsage)??0,userUsage:(null===(o=A().A.state)||void 0===o?void 0:o.userUsage)??0,memberCount:(0,I().Xz)({environment:i,spaceId:r})??1,aiPromotionConfig:s,space:a}}function M(e){let{environment:t,spaceId:n}=e;return new(x().S)(t,{table:w().NX,id:n}).getModel()}function P(e){const t=O(C,e);return(0,i().K8)((()=>{if(t)return(0,r().jx)(t)}),[t])}async function B(e,t){const n=await _(e,C,t);return(0,r().jx)(n)}function R(e,t){const n=b(e,C,t);if(n&&"loading"!==n)return(0,r().jx)(n)}async function E(e,t){const n=await B(e,t);return(0,r().e2)(n)}function D(e){const t=O(C,e);return(0,i().K8)((()=>{if(t)return(0,r()._d)(t)}),[t])}function N(e,t){const n=R(e,t);return!(!n||!r().e2)&&(0,r().e2)(n)}function L(e){const t=O(C,e);return(0,i().K8)((()=>{if(!t)return;const n=e.state;return(0,r().Dc)({...t,state:n})}),[t,e.state])}function O(e,t){const n=(0,o().v3)(),r=(0,s().l)(t,a().A);return(0,i().K8)((()=>{if(!e)return;const t=null==b?void 0:b(n,e,r);return"loading"===t?void 0:t}),[n,r,e],{debugName:`useFeatureData(${t.name})`,useDeepEqual:!0})}},578136:(e,t,n)=>{n.d(t,{D:()=>r,X:()=>a});var o=()=>n(155959),i=()=>n(508496);function r(e){const{isMobileNative:t}=e,n=e.disableExposureLogging??!1;return t?(0,o().T)("supportsPosts"):"on"===i().default.getEligibleGroup({experimentId:"posts_prototype",defaultGroup:"control",disableExposureLogging:n})}function a(e){const t=e.disableExposureLogging??!1;return"on"===i().default.getEligibleGroup({experimentId:"feed_collection_view",defaultGroup:"control",disableExposureLogging:t})}},578872:(e,t,n)=>{n.d(t,{GN:()=>d,LC:()=>p,Nt:()=>m,UP:()=>u,Vg:()=>h,ZV:()=>f,hn:()=>v,kx:()=>b,mg:()=>_,ue:()=>g});n(944114),n(898992),n(672577);var o=()=>n(433847),i=()=>n(68263),r=()=>n(179034),a=()=>n(108944),s=()=>n(562800),l=()=>n(792415),c=()=>n(630116);function d(e){const t=e.getSpaceStore();if(!t)return;const n=t.id,s=a().E(e);let l;const d=o().ch(s);for(const o of d){const{from:e,permissions:a}=o;if(e.table===r().ev){if(a.find((e=>(0,i().W8)(e)))){const o=e.blockId,i=c().sk.createChildStore(t,{id:o,table:r().ev,spaceId:n});l=i;if(i.getSiteStore())return i}}}return l}function u(e){var t;const n=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(n&&n.isDefined()){const t=null==n?void 0:n.getDomainId(),o=s().Ue(e.getSpaceStore(),t);return o?o.id:void 0}}function p(e){var t;const n=null===(t=d(e))||void 0===t?void 0:t.getSiteStore();if(n&&n.isDefined()){const t=null==n?void 0:n.getDomainId();return s().Ue(e.getSpaceStore(),t)}}function m(e){var t;const{publicPageData:n}=l().A.state;if(!n)return!1;if(n.spaceId!==e.getSpaceId())return!0;const o=null===(t=p(e))||void 0===t?void 0:t.domain_name;return!(!o||!n.publicDomainName||n.publicDomainName===o)}function g(e,t,n,o,r){const a=r?[...r]:[];return n||a.push("search"),t&&a.push("duplicate"),i().ok(e.role)&&a.push("comment"),i().p2(e.role)&&a.push("edit"),a.push("more"),o||a.push("signUpOrLogIn"),a}function f(e,t){const n=null==e?void 0:e.getSiteStore();if(!n)return t.allow_search_engine_indexing;return void 0!==n.isSearchEngineIndexingEnabled()?n.isSearchEngineIndexingEnabled():t.allow_search_engine_indexing}function v(e){var t;const n=d(e),o=null==n?void 0:n.getSiteStore();return!!o&&(!o.isDefined()||(null===(t=o.getHeader())||void 0===t?void 0:t.hideWatermark))}function h(e){var t;const n=d(e),o=null==n?void 0:n.getSiteStore();return!!o&&(!o.isDefined()||(null===(t=o.getHeader())||void 0===t?void 0:t.hideSearch))}function _(e,t){var n;const o=null===(n=e.getSpaceStore())||void 0===n?void 0:n.canAdmin(),i=b(e,t);return Boolean(!i||o)}function b(e,t){var n;const o=s().Ue(e.getSpaceStore(),null===(n=t.getSiteStore())||void 0===n?void 0:n.getDomainId());return o&&o.getPublicHomePage()===e.id}},579627:(e,t,n)=>{n.d(t,{YD:()=>ge,wy:()=>we,eP:()=>_e,sQ:()=>ye,P8:()=>me,zE:()=>fe,wW:()=>pe,J4:()=>Se,zP:()=>ae,Wi:()=>se,wd:()=>ce,dy:()=>re,bo:()=>le});n(944114),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550);var o=()=>n(908006),i=()=>n(857639),r=()=>n(416845),a=()=>n(206267),s=()=>n(402390),l=()=>n(433847),c=()=>n(68263),d=()=>n(728272),u=()=>n(824862),p=()=>n(426302),m=()=>n(161479),g=()=>n(96689),f=()=>n(296900),v=()=>n(848538),h=()=>n(854150),_=()=>n(798880),b=()=>n(456328),y=()=>n(319625),S=()=>n(496603),w=()=>n(534177),k=()=>n(37433),I=()=>n(680074),x=()=>n(898486),A=()=>n(594794),C=()=>n(972435),T=()=>n(108944),M=()=>n(731320),P=()=>n(743260),B=()=>n(299545),R=()=>n(640653),E=()=>n(646736),D=()=>n(406792),N=()=>n(590604),L=()=>n(437487),O=()=>n(351360),U=()=>n(57605),F=()=>n(508496),V=()=>n(151059),j=()=>n(630116),z=()=>n(486130),H=()=>n(224701),W=()=>n(10984),q=()=>n(749240),K=()=>n(952710),G=()=>n(848237),$=()=>n(134696),Y=()=>n(701763),Q=()=>n(966505),Z=()=>n(946141),X=()=>n(989423);function J(e,t){X().vd(e,"restore_permissions",t)}var ee=()=>n(449506),te=()=>n(901389),ne=()=>n(246826),oe=()=>n(751156);const ie=(0,n(959013).YK)({preventFullPageAccessDeletion:{id:"permissionsActions.preventRemovingAllFullAccess.message",defaultMessage:"Please give someone else Full Access before removing this permission."},preventUserOrGroupDeletion:{id:"permissionsActions.preventUserOrGroupDeletion.message",defaultMessage:"At least one person or group must have access."}});function re(e){const{environment:t,spaceStore:n,permissionItems:o,transaction:i,from:r,skipAnalytics:a,pagePermissionChangeLocation:s}=e;if(!n.isDefined())return!1;const l=o.filter(c().B2).map((e=>(0,v().BM)(e,n.id))),d=o.filter((e=>(0,c().P3)(e))).map((e=>(0,f().H5)(e,n.id)));a||(l.forEach((e=>{Y().sY({environment:t,spaceUser:e,from:r})})),d.forEach((e=>{Y().W7({environment:t,spaceBot:e,from:r})})));for(const c of l)oe().applyOperation({store:(0,E().dp)(n,c.user_id),operation:{pointer:{table:v().aJ,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:i});for(const c of d)oe().applyOperation({store:(0,E().Ts)(n,c.bot_id),operation:{pointer:{table:f().m3,id:c.id,spaceId:c.space_id},command:"update",path:[],args:c},transaction:i});return i.postSubmitCallbacks.push((async i=>{Y().Ah(t,{status:i?"fail":"success",location:s,permission_items:o}),i||await H().Ow(t,n.id),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function ae(e){return ce(e)}function se(e){return ce(e)}function le(e){return ce(e)}function ce(e){const{environment:t,store:n,permissionItems:r,transaction:a,skipAnalytics:s,pagePermissionChangeLocation:u,fromPermissionWrapper:p,skipGuestLimitValidation:f,flowId:h}=e;if(!f){if((0,M().YN)(e))return!1}if(!n.isDefined())return!1;const b=n.getPermissionItems();let y=[...b];const{id:I}=t.currentUser,x=n instanceof j().Bv&&n.getParentTable()===g().NX,A=n instanceof j().Bv&&(x||n.isRestricted()),P=y.some((e=>(c().B2(e)||c().Ds(e))&&"editor"===e.role));s||(n instanceof j().Bv?Y().e1({environment:t,store:n,newItems:r,location:u,inSudoMode:a.useSudoMode,fromPermissionWrapper:p,flowId:h}):n instanceof j().h4?r.forEach((e=>{Y().Zf(t,{item:e,teamStore:n})})):n instanceof j().md||(0,w().HB)(n)),y=y.filter((e=>!r.some((t=>l().nK(e,t)))));for(const o of r)y.push(o);y=y.filter((e=>"none"!==c().Lw(e)));const B=Boolean(r.find((e=>"user_permission"===e.type&&e.user_id===I&&!c().Km(e.role))));if(n instanceof j().Bv&&A&&I){const e=T().pp(n),t=T().Uo(n),o=null==t?void 0:t.isOwner(I),i=null==t?void 0:t.isNonGuestMember(I,z()._.getSpacePermissionGroupIds({userId:I,spaceId:n.getSpaceId()})),s=e?(0,v().i1)({userId:I,spaceId:e.id}):void 0,l=s?n.getRecordModel(s):void 0,u=Boolean(null==l?void 0:l.isMember()),p=r.find((e=>"space_permission"===e.type&&c().Tt(e.role))),m=r.find((e=>"space_permission"===e.type&&!c().Tt(e.role))),g=I?{table:_().oo,id:I}:void 0,{actorMemberships:f}=(0,N().uI)({actorPointers:new(d().d)(void 0===g?[]:[g]),recordPointers:new(d().d)([n.pointer]),getRecordModel:n.getRecordModel});if(e&&e.canEdit()&&0===(0,k().getActiveTeamCount)()){const t=e.getPagesStore();p?oe().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:n.id}}}):m&&oe().applyOperation({transaction:a,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:n.id}}})}if(!B){y.some((n=>{var r;return!("space_permission"!==n.type||!c().Km(n.role)||!u)||(!("user_permission"!==n.type||!c().Km(n.role)||n.user_id!==I)||(!("group_permission"!==n.type||!c().Km(n.role)||!Boolean(g&&e&&(null===(r=f.getActorMembership(g))||void 0===r?void 0:r.getGroupRole({groupId:n.group_id,spaceId:e.id}))))||(!!((0,c().gl)(n)&&c().Km(n.role)&&(null==t?void 0:t.id)===n.team_id&&i)||!!((0,c().nl)(n)&&c().Km(n.role)&&(null==t?void 0:t.id)===n.team_id&&o))))}))||a.useSudoMode||(y=y.filter((e=>!("user_permission"===e.type&&e.user_id===I))),y.push({type:"user_permission",user_id:I,role:"editor"}))}}if(!y.some((e=>{const t=c().Lw(e);return c().Km(t)}))&&A)return o().default.afterNextFlush((()=>{te().f1(C().A.formatMessage(ie.preventFullPageAccessDeletion))})),!1;const R=y.some((e=>(c().B2(e)||c().Ds(e))&&"editor"===e.role));if(x&&P&&!R)return o().default.afterNextFlush((()=>{te().f1(C().A.formatMessage(ie.preventUserOrGroupDeletion))})),!1;const E=(0,j().G_)(n,n.pointer,"permissions"),L=[];for(const o of b){!y.find((e=>l().nK(o,e)))&&c().hI(o)&&(L.push({...o,role:"none"}),"trusted_domain_permission"===o.type&&i().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"oldPermissionItem",data:{miscDataToConvertToString:{spaceId:(0,m().e)(n.pointer.spaceId),permission_item:o}}}))}for(const o of y){const e=b.find((e=>l().nK(o,e)));if(c().hI(o)&&(!e||!S().n4(e,o))&&(L.push(o),"trusted_domain_permission"===o.type)){const e=(0,m().e)(n.pointer.spaceId),t=F().default.getConfigKey("trusted_domains_space_ids","space_ids");e&&!t.includes(e)&&(o.source="non_alpha_set_permission_items",i().log({level:"warning",from:"permissionsActions.setPermissionItems",type:"newPermissionItem",data:{miscDataToConvertToString:{spaceId:e,permission_item:o}}}))}}let O=[];const U=T().KA(n);if(n instanceof j().Bv&&!n.isRestricted()&&U&&U instanceof j().Bv){const e=(0,M().i0)(U);O=L.map((t=>e.find((e=>S().n4(e.permissionItem,t)))?{...t,role:"none"}:t))}else O=L;for(const o of O)oe().applyOperation({store:E,operation:{pointer:E.pointer,command:"setPermissionItem",path:E.path,args:o},transaction:a});return a.postSubmitCallbacks.push((async o=>{Y().Ah(t,{status:o?"fail":"success",location:u,permission_items:O}),o||await H().Ow(t,n.pointer.spaceId),e.metric&&D().default.DO_NOT_USE_measureLegacy(e.metric,{environment:t})})),!0}function de(e){var t;const{environment:n,store:o,permissionItems:i,transaction:r,inviteFlowId:a,inviteMessage:s,inviteOrigin:l,disable_invite_email:c}=e,d=o.getSpaceId()||(null===(t=O().default.state.currentSpaceStore)||void 0===t?void 0:t.id),{id:u}=n.currentUser;for(const p of i)if(d&&"user_permission"===p.type&&p.invite_id){const{inviteeId:e,inviteeTable:t}=ue({item:p,spaceId:d}),n={id:p.invite_id,version:1,flow_id:a,space_id:d,target_id:o.id,target_table:o.table,inviter_id:u,inviter_table:_().oo,invitee_id:e,invitee_table_or_group:t,message:s,created_time:Date.now(),attributes:{permission:p,origin_type:l,disable_invite_email:c}};ne().zv({store:(0,j().Oo)(o,{table:"invite",id:n.id,spaceId:d}),data:n,transaction:r})}return r.postSubmitCallbacks.push((e=>{$().R2(n,{status:e?"fail":"success",origin:l})})),!0}function ue(e){const{item:t,spaceId:n}=e;return c().B2(t)?{inviteeId:t.user_id,inviteeTable:_().oo}:c().P3(t)?{inviteeId:t.bot_id,inviteeTable:u().GP}:c().Ds(t)?{inviteeId:t.group_id,inviteeTable:p().gp}:c().Lg(t)?{inviteeId:n,inviteeTable:g().NX}:c().gl(t)?{inviteeId:t.team_id,inviteeTable:h().yK}:{}}function pe(e){const{environment:t,store:n,permissionItem:o,transaction:r,shouldInherit:a,fromPermissionWrapper:s,trustedDomainsLoggingData:d}=e;if(!n.isDefined())return;const u=[];if(a){const e=(0,M().i0)(n).map((e=>e.permissionItem)).filter((e=>!o||!l().nK(e,o)));for(const t of e){let e=!1;if("trusted_domain_permission"===t.type){e=!0;const o=(0,m().e)(n.pointer.spaceId),r=F().default.getConfigKey("trusted_domains_space_ids","space_ids");o&&!r.includes(o)&&(t.source="non_alpha_inherited_permission_items",i().log({level:"warning",from:"permissionsActions.restrictPermission",type:"TrustedDomainPermissionChange",spaceId:o,data:{miscDataToConvertToString:{blockId:n.id,permissionItem:t,trustedDomainsLoggingData:d}}}))}c().hI(t)&&(n instanceof j().Bv&&!n.isCollectionView()&&!c().P3(t)&&"content_only_editor"===t.role?u.push({...t,role:"read_and_write"}):e||u.push(t))}}o&&(u.push(o),n instanceof j().Bv?Y().e1({environment:t,store:n,newItems:[o],fromPermissionWrapper:s}):n instanceof j().md||(0,w().HB)(n));const p=t.currentUser.id,g=S().hS([...u,...n.getPermissionItems()||[],{type:"restricted_permission"}],l().I$);!p||r.useSudoMode||(0,N().JF)({store:n,userId:p,updatedPermissionItems:g})||u.push({type:"user_permission",user_id:p,role:"editor"});const f=n.getPermissionItemsStore();for(const i of u)oe().applyOperation({store:f,operation:{pointer:f.pointer,command:"setPermissionItem",path:f.path,args:i},transaction:r});oe().applyOperation({store:f,operation:{pointer:f.pointer,command:"setSingletonPermissionItem",path:f.path,args:{singletonPermissionItem:{type:"restricted_permission"},set:!0}},transaction:r}),function(e,t){X().vd(e,"restrict_permissions",t)}(t,{type:"none"===(null==o?void 0:o.role)?"remove":"narrow"}),r.postSubmitCallbacks.push((e=>{e||H().Ow(t)}))}function me(e){const{environment:t,store:n,transaction:o,from:i,shareMenuSessionId:r}=e;if(!n.isDefined())return;const a=n.getPermissionItems(),s=T().KA(n),c=s?l().wD(T().E(s)):[],d=l().FV(n.getModel(),a,c),u=n.getPermissionItemsStore();for(const l of d)oe().applyOperation({store:u,operation:l,transaction:o});J(t,{using_admin_api:!1,from:i,share_menu_session_id:r}),o.postSubmitCallbacks.push((e=>{e||H().Ow(t)}))}async function ge(e){const{environment:t,store:n,from:o,shareMenuSessionId:i}=e,{currentSpaceStore:r}=O().default.state;if(r){const e=r.id,a=n.id,s=await ee().callApi({eventName:"spaceAdminRestoreAccess",environment:t,data:{spaceId:e,blockId:a}});J(t,{using_admin_api:!0,from:o,share_menu_session_id:i}),"failed"===s.type&&te().Qg(s)}}function fe(e){const{environment:t,store:n,transaction:o}=e,i=n.getPermissionItems();if(!n.isTopLevelTeamPage()||0===i.length)return;const r=i.filter((e=>c().P3(e)));ne().zv({store:n,transaction:o,data:{permissions:r}}),Z().h2(t,{store:T().Uo(n)})}function ve(e){const t=e.inviteTargets[0];return!(!t||"bot"!==t.type)}function he(e){return c().B2(e.permissionItem)&&(0,P().yi)(e.inviteTarget)}async function _e(e){const{environment:t,isOnboarding:n,invite:o}=e,i=e.store.getSpaceId();if(0===e.inviteTargets.length||!i)return{success:!0,invitedUsers:{},requestedUsers:{}};const r=q().subscriptionDataStoreInstance.state,a=await(0,R().Pu)({environment:t,spaceId:i})??1;let s;if(ve(e))if((0,B().Yu)(e.store)){const t=e.inviteRole;s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:t,bot_id:e.value.id}})))}else(0,B()._p)(e.store)?s=e.inviteTargets.map((e=>({inviteTarget:e,permissionItem:{type:"bot_permission",role:l().MD(e.value.capabilities),bot_id:e.value.id,parent_table:e.value.parent_table,parent_id:e.value.parent_id}}))):(0,w().HB)(e.store);else s=await async function(e){const{environment:t,inviteTargets:n,inviteRole:o}=e;return Promise.all(n.map((async n=>{if("newUser"===n.type){const e=await be(t,n),i={type:"user_permission",role:o,user_id:e};return{inviteTarget:{...n,value:{...n.value,id:e}},permissionItem:i}}if("existingUser"===n.type){return{inviteTarget:n,permissionItem:{type:"user_permission",role:e.inviteRole,user_id:n.value.id}}}if("group"===n.type){return{inviteTarget:n,permissionItem:{type:"group_permission",role:e.inviteRole,group_id:n.value.group_id}}}(0,w().HB)(n)})))}({environment:t,inviteTargets:e.inviteTargets,inviteRole:e.inviteRole,data:r});const{toInvite:d,toRequest:u}=function(e,t){if(!((0,R().hN)(O().default.state.currentSpaceStore)&&e instanceof j().Bv))return{toInvite:t,toRequest:[]};const n=[],o=[];for(const i of t)he(i)?n.push(i):o.push(i);return{toInvite:o,toRequest:n}}(e.store,s),m={};if(e.store instanceof j().Bv&&u.length>0){const n=await async function(e){const{environment:t,permissionItems:n,inviteMessage:o,store:i}=e,r=await Promise.allSettled(n.map((async e=>ee().callApi({eventName:"requestAccess",environment:t,data:{type:"guest-invite-request",block:{id:i.id,spaceId:i.getSpaceId()},forActorId:e.user_id,message:void 0,attributes:{role:e.role,inviteMessage:o}}}))));return!r.find((e=>"rejected"===e.status||"fulfilled"===e.status&&"failed"===e.value.type))}({environment:t,store:e.store,permissionItems:u.map((e=>e.permissionItem)),inviteMessage:o.inviteMessage});if(!n)return{success:!1};for(const e of u)m[e.inviteTarget.value.email]=e.permissionItem.user_id}if(0===d.length)return{success:!0,invitedUsers:{},requestedUsers:m};const g=d.map((e=>e.inviteTarget)),f=d.map((e=>e.permissionItem));let v,h;if(e.store instanceof j().Bv&&void 0!==(0,W().aV)(r))v=await async function(e){const{environment:t,store:n,permissionItems:o,invite:i}=e,r=n.getSpaceId();if(!r)return!1;const a=V().A.getData(t,{spaceId:r});if(!a)return!1;const s=(0,A().Gx)({environment:t,spaceId:r}),l=t.idCreator.getSpaceShortIdCreator(r,s),d=o.filter(c().B2).map((e=>({...e,invite_id:l.idInSavedSpace(p().Yx)}))),u=await ee().callApi({eventName:"inviteGuestsToSpace",environment:t,data:{block:{id:n.id,spaceId:r},permissionItems:d}});if("failed"===u.type)return!1;const{serverCommitResult:m}=oe().createAndCommit({userAction:"permissionsActions.saveInvites",environment:t,canUndo:!0,cellTarget:"main",perform:e=>{const{inviteFlowId:o,inviteMessage:r,inviteOrigin:a,disable_invite_email:s}=i;de({environment:t,store:n,permissionItems:d,transaction:e,inviteFlowId:o,inviteMessage:(0,b().Hb)(r),inviteOrigin:a,disable_invite_email:s})}});await m;const g=o.filter(c().P3);g.length>0&&await Se({environment:t,store:n,permissionItems:g,invite:i});return!0}({environment:t,store:e.store,permissionItems:f,invite:o});else try{await Se({environment:t,store:e.store,sudoModeStore:e.sudoModeStore,permissionItems:f,invite:o}),v=!0}catch(P){v=!1,h=(0,y().A)(P)}if(!ve(e)){var _;const n=e.store instanceof j().Bv?null===(_=e.store.getCollectionStore())||void 0===_?void 0:_.id:void 0,i=e.store instanceof j().Bv?e.store.getParentCollectionIdUpToTwoLevels():void 0;var S,k;if(v)$().Jg(t,{role:e.inviteRole,is_space:e.store instanceof j().SL,invite_targets:g,is_onboarding:e.isOnboarding,invite_origin:o.inviteOrigin,permission_items:f,invite_message_length:(null===(S=o.inviteMessage)||void 0===S?void 0:S.length)??0,invite_flow_id:o.inviteFlowId,isProfessionalTeamUser:(0,I().YD)(),domainType:(0,I().FX)(),share_menu_session_id:L().Ay.state.sessionId,collection_id:n,parent_collection_id:i});else $().J8(t,{error:h,role:e.inviteRole,is_space:e.store instanceof j().SL,invite_targets:g,is_onboarding:e.isOnboarding,invite_origin:o.inviteOrigin,permission_items:f,invite_message_length:(null===(k=o.inviteMessage)||void 0===k?void 0:k.length)??0,invite_flow_id:o.inviteFlowId,isProfessionalTeamUser:(0,I().YD)(),domainType:(0,I().FX)(),share_menu_session_id:L().Ay.state.sessionId,collection_id:n,parent_collection_id:i})}n||await H().Ow(t);const x={};g.forEach(((e,t)=>{var n;const o=f[t];"newUser"!==e.type&&"existingUser"!==e.type||null===(n=e.value)||void 0===n||!n.email||"user_permission"!==o.type||(x[e.value.email]=o.user_id)}));const C=await(0,R().Pu)({environment:t,spaceId:i})??1,T=1===a&&C>1,M=i?U().A.getData(t,{spaceId:i}):void 0;if(T&&(null==M||!M.subscription)&&i){const e=await K().dB.trialActions.load();await e.applyMultiplayerReverseTrialIfEligible({spaceId:i,environment:t})}return{success:v,error:h,invitedUsers:x,requestedUsers:m}}async function be(e,t){const n=(0,s().H)(C().A.getIntl()),o=t.value.email,i=await ee().callApi({eventName:"createEmailUser",environment:e,data:{email:o,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:n}});if("failed"===i.type){if((0,r().op4)(i.error)){const e=(0,x().DX)(C().A.getIntl(),i.error);e?te().f1(e):te().c1(i.error.message)}else te().c1(i.error.message);throw i.error}return i.data.userId}async function ye(e){let{environment:t,store:n,inviteTargets:o,inviteRole:i,createNewTeamFlowId:r}=e;const a=n.getSpaceId(),s=t.currentUser.id;if(0===o.length)return!0;if(!a||!s)return!1;const l=q().subscriptionDataStoreInstance.state,{teamMemberInfos:c,invitedMemberIds:d}=await async function(e){const{environment:t,inviteTargets:n,inviteRole:o}=e,i=[],r=[];for(const a of n){let e;if("newUser"===a.type){const n=await be(t,a);e={entity_type:"user",type:o,user_id:n},i.push(n)}else"existingUser"===a.type?(e={entity_type:"user",type:o,user_id:a.value.id},"none"!==a.spaceRole&&"not_in_space"!==a.spaceRole||i.push(a.value.id)):"group"===a.type?e={entity_type:"group",type:"owner"===o?"owner":"member",group_id:a.value.group_id}:(0,w().HB)(a);r.push(e)}return{teamMemberInfos:r,invitedMemberIds:i}}({environment:t,inviteTargets:o,inviteRole:i,data:l}),u=await G().Zd({environment:t,teamMemberInfos:c,teamStore:n,isSettingDefaultTeam:!1,createNewTeamFlowId:r});return u&&(Q().KX(t,{invite_origin:"team_invite_overlay",domainType:(0,I().FX)(),new_workspace_member_count:d.length,new_workspace_member_ids:d}),await H().Ow(t)),u}async function Se(e){var t;const{environment:n,store:o,sudoModeStore:i,permissionItems:r,invite:s,skipGuestLimitValidation:l}=e,c=o.getSpaceId()??(null===(t=O().default.state.currentSpaceStore)||void 0===t?void 0:t.id),d=(0,A().Gx)({environment:n,spaceId:c}),u=c?n.idCreator.getSpaceShortIdCreator(c,d):void 0,{serverCommitResult:m}=oe().createAndCommit({userAction:"permissionsActions.savePermissionItems",environment:n,canUndo:!0,useSudoMode:"block"===o.table&&(null==i?void 0:i.shouldSaveTransactionWithSudoMode(o)),cellTarget:"main",perform:e=>{const t=r.map((e=>"user_permission"!==e.type?e:{...e,invite_id:(null==u?void 0:u.idInSavedSpace(p().Yx))||a().JW()})),{inviteFlowId:i,inviteMessage:c,inviteOrigin:d,disable_invite_email:m}=s;de({environment:n,store:o,permissionItems:t,transaction:e,inviteFlowId:i,inviteMessage:(0,b().Hb)(c),inviteOrigin:d,disable_invite_email:m}),o instanceof j().SL?re({environment:n,spaceStore:o,permissionItems:t,transaction:e,from:d}):o instanceof j().h4?le({environment:n,store:o,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):o instanceof j().Bv?ae({environment:n,store:o,permissionItems:t,transaction:e,from:d,skipGuestLimitValidation:l}):(0,w().ub)(o)}});await m}function we(e){const{store:t,transaction:n}=e;ne().zv({store:t,data:{permissions:null},transaction:n})}},581495:(e,t,n)=>{n.d(t,{Bg:()=>o().B,Rz:()=>i().R,eh:()=>r().e});var o=()=>n(106261),i=()=>n(120303),r=()=>n(652617)},581857:(e,t,n)=>{n.d(t,{P:()=>a});n(898992),n(354520),n(430670);var o=()=>n(396301),i=()=>n(640653),r=()=>n(21899);function a(e){const{environment:t,currentUserRootStore:n,spaceIdsToInclude:a}=e;if(!n)return{allPageStores:[],visiblePageStores:[]};const s=(0,r().f)({currentUserRootStore:n}),l=(a?s.filter((e=>a.includes(e.getSpaceId()))):s).flatMap((e=>(0,i().cU)(t,e)));return{allPageStores:l,visiblePageStores:l.slice(0,(0,o().X5)())}}},582033:(e,t,n)=>{n.d(t,{p:()=>g});n(898992),n(581454),n(737550);var o,i=()=>n(857639),r=()=>n(449412),a=()=>n(496603),s=()=>n(502800),l=()=>n(763824),c=()=>n(720665),d=()=>n(141032),u=()=>n(118757),p=()=>n(227440),m=()=>n(620149);class g{constructor(e){this.debug=!1,this.shouldStopLooping=!1,this.attemptedToClaimSessions=!1,this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.events=new(n(752196).A),this.waiter=void 0,this.transactionBackoffController=new(n(706742).x)(n(419101).Vp),this.retryReasonCounters={_total:0},this.errorCounts={},this.startTime=Date.now(),this.disableStorageManagerEstimate=!1,this.dependencies=void 0,this.transactionStore=void 0,this.sessionId=void 0,this.debugLogger=void 0,this.enableHeartbeatTimeout=void 0;const{dependencies:t,transactionStore:o,sessionId:r,debugLogger:a,enableHeartbeatTimeout:s}=e;this.dependencies=t,this.transactionStore=o,this.sessionId=r,this.debugLogger=a,this.enableHeartbeatTimeout=s,i().clientLogglyEnvironmentData.idbSessionId=this.sessionId,this.disableStorageManagerEstimate=n(508496).default.checkGate({gateName:"disable_storage_manager_estimate",disableExposureLogging:!0}),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"createdIndexedDBTransactionQueue",data:{sessionId:this.sessionId}})}startLoop(){setTimeout((()=>{this.heartbeatLoop()}),1),setTimeout((()=>{this.txLoop()}),1),setTimeout((()=>{this.healthcheckLoop()}),1)}stopLoop(){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"stopLoop",data:{message:"Stopping loop."}}),this.shouldStopLooping=!0}hasAttemptedToClaimSessions(){return this.attemptedToClaimSessions}logEmptyTaskForDebugging(e){this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"logEmptyTaskForDebugging",data:{message:`Task created by ${e} was empty.`}})}async enqueueTask(e){const t=await this.transactionStore.saveTask(this.sessionId,e,this.getIndexedDBTimeoutMs());if(this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp),t.error)throw this.incrementErrors(t.error,"enqueueTask"),this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"enqueueTask",error:(0,s().convertErrorToLog)(t.error)}),t.error;this.clearErrors("enqueueTask"),this.getWaitable(!1).trigger()}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return!!this.transactionStore&&this.transactionStore.hasTasks()}async hasTasksForUser(e){const t=await this.transactionStore.hasTasksForUser(e,this.getIndexedDBTimeoutMs());return t.error?(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.hasTasksForUser",error:(0,s().convertErrorToLog)(t.error)}),!1):t.value}async anySessionHasTasks(){const e=await this.transactionStore.anySessionHasTasks(this.getIndexedDBTimeoutMs());return e.error?(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.anySessionHasTasks",error:(0,s().convertErrorToLog)(e.error)}),!1):e.value}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return this.hasTask((t=>t.operations.some((t=>(0,n(696706).Z2)(t.pointer,e)))))}async reset(){await this.transactionStore.reset()}async clearForUser(e){await this.transactionStore.clearTasksForUser(e)}async checkObjectStores(){return await this.transactionStore.checkObjectStores()}async getTotalNumberOfTasks(){const e=await this.transactionStore.getTotalNumberOfTasks(this.getIndexedDBTimeoutMs());return e.error?(i().log({level:"error",from:"IndexedDBTransactionQueue",type:"getTotalNumberOfTasks",error:(0,s().convertErrorToLog)(e.error)}),0):e.value}startSyncing(){p().A.setState({...p().A.state,syncing:!0})}updateDependencies(e){this.dependencies=e}DEV_ONLY_deadlockDb(e){return this.transactionStore.DEV_ONLY_deadlockDb(e)}debugLog(){if(this.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("IndexedDBTransactionQueue:",...t)}}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}async txLoop(){for(;!this.shouldStopLooping;)try{await this.txLoopIteration(),this.clearErrors("txLoop")}catch(e){this.incrementErrors(e,"txLoop"),(0,u().Bc)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"txLoopIteration",error:(0,s().convertErrorToLog)(e)}),r().Fg(e),await l().wR(15e3)}}async txLoopIteration(){const e=await this.getTasks();if(!e)return this.events.emit("drain"),void(await this.wait(...this.getMinMaxLoopDelay(!1)));const{tasks:t,sessionId:n}=e;if(0===t.length){const e=await this.transactionStore.deleteSession({currentSessionId:this.sessionId,sessionId:n});return void(e.error&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteSession",data:{sessionId:n},error:(0,s().convertErrorToLog)(e.error)})))}this.startSyncing(),this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSubmitTransactionAttempt",data:{message:`for session ${n}: attempt submitTransaction with ${t.length} tasks`,sessionId:n,taskIds:f(t)}}),await this.useSaveTransactionsApi(t,n);const o=this.hasTasks();o||(this.doneSyncing(),this.events.emit("drain")),await this.wait(...this.getMinMaxLoopDelay(o))}getMinMaxLoopDelay(e){return Boolean(e)?[u().qG,u().qG]:[u().qG,u().ke]}async useSaveTransactionsApi(e,t){const n=await this.dependencies.handleSaveTransactions(e);if(n.error){const{savedTasks:e,failedTasks:o,message:r,retryDelay:a,retryReason:l}=n.error;l?(0,u().Bc)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handlePartialSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:f(e),sessionId:t}}),await this.cleanupTasks(e,void 0)),o.length>0?(this.debugLogger.flush(),i().log({level:"warning",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsError",data:{message:`for session ${t}: ${r}`,taskIds:f(o),sessionId:t},error:(0,s().convertErrorToLog)(n.error)}),await this.cleanupTasks(o,n.error)):this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsRetryableError",data:{message:`for session ${t}: ${r}`,sessionId:t}}),a>0?await this.transactionBackoffController.backOffOnFailure(a-u().qG,n.error.retryReason):this.transactionBackoffController.reset()}else{const e=n.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:"IndexedDBTransactionQueue",type:"handleSaveTransactionsSuccess",data:{message:`for session ${t}: will delete ${e.length} saved tasks`,taskIds:f(e),sessionId:t}}),await this.cleanupTasks(e,void 0),this.transactionBackoffController.reset()}}incrementErrors(e,t){this.debugLog("incrementErrors",e,t),void 0===this.errorCounts[t]?this.errorCounts[t]=1:this.errorCounts[t]+=1;const n=a().T9(Object.values(this.errorCounts))||0;this.errorCounts[t]===g.maxErrors+1&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:`maxErrors.${t}`,error:(0,s().convertErrorToLog)(e)})),n>g.maxErrors&&m().A.setState({...m().A.state,transactionQueueError:e}),e.type===d().yE&&this.events.emit("timeout")}clearErrors(e){this.errorCounts[e]&&delete this.errorCounts[e];(a().T9(Object.values(this.errorCounts))||0)<=g.maxErrors&&void 0!==m().A.state.transactionQueueError&&m().A.setState({...m().A.state,transactionQueueError:void 0})}async heartbeatLoop(){for(;!this.shouldStopLooping;)try{await this.heartbeat(),await l().wR(g.heartbeatInterval)}catch(e){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"heartbeatLoopIteration",error:(0,s().convertErrorToLog)(e)}),await l().wR(g.heartbeatInterval)}}async heartbeat(){const e=this.enableHeartbeatTimeout?this.getIndexedDBTimeoutMs():void 0;{this.debugLog("heartbeat");const t=await this.transactionStore.heartbeat({currentSessionId:this.sessionId,isActive:!0,timeoutMs:e});if(t.error)return this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.heartbeat",error:(0,s().convertErrorToLog)(t.error)}),void this.incrementErrors(t.error,"heartbeat");this.clearErrors("heartbeat")}{const t=Date.now()-g.claimSessionDelay,n=await this.transactionStore.claimSessions({currentSessionId:this.sessionId,staleSessionTimeoutMs:t,transactionTimeoutMs:e});if(n.error)return this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.claimSessions",error:(0,s().convertErrorToLog)(n.error)}),void(n.error.type===d().yE&&this.incrementErrors(n.error,"claimSessions"));this.clearErrors("claimSessions"),this.attemptedToClaimSessions=!0}this.checkStorageQuota()}async checkStorageQuota(){if(this.disableStorageManagerEstimate)return;const e=await(0,n(161132).xs)();e&&(i().clientLogglyEnvironmentData.storageQuotaEstimate=e.quota,i().clientLogglyEnvironmentData.storageUsageEstimate=e.usage,(0,n(821062).A)(m().A.state.storageUsageEstimate,e)||m().A.setState({...m().A.state,storageUsageEstimate:e}))}doneSyncing(){p().A.setState({...p().A.state,syncing:!1})}hasTask(e){return this.transactionStore.hasTask(e)}async getTasks(){const e=await this.transactionStore.getTasks(this.sessionId,!0);if(e.error)throw e.error;return e.value}async cleanupTasks(e,t){for(const r of e)if(r.callback)try{r.callback(t,r.logCallStack)}catch(o){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"cleanupTask",data:{taskId:r.id},error:(0,s().convertErrorToLog)(o)})}const n=await this.transactionStore.deleteTasks(e);n.error&&(this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"IndexedDBTransactionStore.deleteTasks",error:(0,s().convertErrorToLog)(n.error)}))}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().e2)),this.waiter}async healthcheckLoop(){for(;!this.shouldStopLooping;){try{var e;const t=await this.transactionStore.getTotalNumberOfTasks(g.defaultIndexedDBTimeoutMs),n={queue_type:"IndexedDBTransactionQueue",uptime:Date.now()-this.startTime,queue_size:t.error?void 0:t.value,error_type:null===(e=t.error)||void 0===e?void 0:e.type,is_considered_online:p().A.state.online,retry_reasons:this.retryReasonCounters};(n.queue_size&&n.queue_size>g.transactionSizeHealthcheckThreshold||n.error_type)&&(this.debugLogger.flush(),i().log({level:"info",from:"IndexedDBTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:n}}),this.dependencies.handleHealthcheck(n))}catch(t){this.debugLogger.flush(),i().log({level:"error",from:"IndexedDBTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().convertErrorToLog)(t)}),r().Fg(t)}await l().wR(g.healthcheckInterval)}}getIndexedDBTimeoutMs(){return g.defaultIndexedDBTimeoutMs}}function f(e){return e.map((e=>{var t;return null!==(t=e.debug)&&void 0!==t&&t.userAction?`${e.id} (${e.debug.userAction})`:e.id}))}o=g,g.heartbeatInterval=2.5*c().TD,g.claimSessionDelay=5*o.heartbeatInterval,g.healthcheckInterval=15*c().Xb,g.transactionSizeHealthcheckThreshold=1e3,g.defaultIndexedDBTimeoutMs=180*c().TD,g.maxErrors=5},582676:(e,t,n)=>{function o(e){let[t,n]=e;return Math.floor(function(e){let[t,n]=e;return Math.random()*(n-t)+t}([t,n]))}function i(e){if(!e)return Math.random;let t=function(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return t}(e);return()=>{t|=0,t=t+1831565813|0;let e=Math.imul(t^t>>>15,1|t);return e=e+Math.imul(e^e>>>7,61|e)^e,((e^e>>>14)>>>0)/4294967296}}n.d(t,{HO:()=>o,Nx:()=>i})},583238:(e,t,n)=>{n.d(t,{AP:()=>m,JF:()=>d,QY:()=>g,mX:()=>u,pH:()=>c});n(898992),n(354520),n(672577);var o=()=>n(617871),i=()=>n(498212),r=()=>n(529543),a=()=>n(836251),s=()=>n(640653),l=()=>n(53137);function c(){return l().A.bots.state.filter((e=>e.integration_id===o().io))}function d(e){const{environment:t,collectionContextType:n,spaceStore:o}=e;return!!o&&(!(0,s().dT)({env:"production",spaceStore:o})&&(!t.device.isMobile&&(!(0,a().w6)(t)&&("collectionTypedView"!==n&&"collectionSystemView"!==n))))}function u(){const{bots:e,externalAuthentications:t}=l().A,n=e.state.find((e=>e.integration_id===o().io));if(!n)return!1;const i=t.state.find((e=>e.parent_id===n.id));return Boolean(i)}const p="notion_calendar_csrf";async function m(e){const{environment:t,csrf:n}=e;await(0,r().setCookie)(t,{name:p,value:n})}async function g(e){const{environment:t,csrf:n}=e,o=await(0,r().getCookie)(t,p),a=void 0!==o&&(0,i().iv)(o)&&o===n;return(0,r().removeCookie)(p),a}},583824:(e,t,n)=>{n.d(t,{i:()=>k});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(700500),i=()=>n(254947),r=()=>n(977345),a=()=>n(416504),s=()=>n(197959),l=()=>n(919709),c=()=>n(973647),d=()=>n(720665),u=()=>n(878523),p=()=>n(538527),m=()=>n(892632),g=()=>n(909470),f=()=>n(594794),v=()=>n(972435),h=()=>n(508496),_=()=>n(116008),b=()=>n(543225),y=()=>n(59320),S=()=>n(681634),w=()=>n(807060);function k(e){const{environment:t,type:n,blockStore:k,commentTextValue:I,transaction:x,files:A,property_id:C,formulasModule:T,fromOverride:M}=e,P=e.discussionId??(0,f().Z1)({environment:t,table:s().$Y,spaceId:k.pointer.spaceId}),{id:B}=t.currentUser;if(!B)return;const R=_().A.state;let E;const{property_type:D,collection_id:N,collection_view_id:L,view_type:O,collection_view_block_id:U}=(0,w().q)(C,k);if(C&&R.open&&"block"===R.type){const e=R.blockStore.getPropertyStore(C);if(E=e.getValue()||[],"status"===D&&0===E.length&&(E=[[v().A.formatMessage(i().M_.statusOptionNotStarted)]]),"formula"===D&&(E=function(e,t,n,o){var i;const s=t.getAssociatedCollectionStore(),l=null==s?void 0:s.getModel(),u=null==l?void 0:l.getNormalizedSchema()[n],p=null==u||null===(i=u.formula2)||void 0===i?void 0:i.code,m=t.getModel(),f=Number(d().Xb),_=h().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs")??f;if(m&&p&&o){const t=o.evaluateCollectionFormula2WithoutCache({block:m,property:n,formulaCode:p,getRecordModel:e.getRecordModel,intl:v().A.getIntl(),userTimeZone:(0,a().P)(),depth:0,visitedProperties:new Set,formulaTimeoutTimestampMs:Date.now()+_,resultCache:new Map,regExpCache:new Map,experimentService:h().default,collectionFeatureGates:(0,g().i)()});if(t&&c().Q.isSuccess(t))return(0,r().Ht)(t.value)}return[]}(e,k,C,T)),"text"===D){const n={startIndex:0,endIndex:(0,l().qAZ)(E).length};p().Mw({environment:t,store:e,selection:n,annotation:[l().Ifu.Discussion,P],transaction:x})}}let F;const V=k.getType(),j=k.getFormat();if((0,o().Db)(V,j)&&!(0,o().$I)(V)){const e=k.getTitleValue();F=l().DJ2(l().Uee(e,{removeSuggestionAnnotationsAndText:!0,removeSuggestionAnnotations:!0,removeDiscussions:!0}))}C&&E&&(F=E);const{discussionStore:z,commentStore:H}=(0,y().G)({createDiscussionArgs:"default"===n?{type:"default",context:F,property_id:C}:{type:"suggestion",modifiedBlockIds:[k.pointer.id]},blockStore:k,environment:t,transaction:x,commentTextValue:I,files:m().JC(A),discussionId:P});let W;return(0,b().B)({transaction:x,blockStore:k,discussionId:z.id}),_().A.state.open?"comment"===_().A.state.content&&(W=_().A.state.from):W=_().A.state.from,M&&(W=M),u().v3(t,{discussion_id:z.id,discussion_type:z.getType(),comment_id:H.id,parent_block_id:z.getParentId(),from:W,property_id:C,property_type:D,collection_view_id:L,view_type:O,collection_id:N,collection_view_block_id:U}),(0,S().c)(t),z}},584931:(e,t,n)=>{n.d(t,{w:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{asyncModals:[]}}}const i=new o},585533:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(354520),n(672577);class o extends(()=>n(959180))().A{constructor(){super(...arguments),this.isDropTargetForKey=(e,t)=>e.props.dropTargetKey===t}findDropTargetFromKey(e){return this.find((t=>this.isDropTargetForKey(t,e)))}findDropTargetsFromKey(e){return this.filter((t=>this.isDropTargetForKey(t,e)))}}const i=new o;(0,n(604341).exposeDebugValue)("GlobalDropTargetRegistry",i);const r=i},586481:(e,t,n)=>{n.d(t,{L:()=>r});var o=()=>n(246826),i=()=>n(319975);function r(e){const{environment:t,store:n,properties:r,transaction:a}=e;"title"in r&&i().R9({environment:t,store:n.getBlockTitleStore(),value:r.title??void 0,transaction:a});const{title:s,...l}=r;Object.keys(l).length>0&&o().zv({store:n.getPropertiesStore(),data:l,transaction:a})}},588836:(e,t,n)=>{n.d(t,{u:()=>u});n(898992),n(354520);var o=()=>n(197959),i=()=>n(397277),r=()=>n(919709),a=()=>n(220719),s=()=>n(319975),l=()=>n(751156),c=()=>n(299545),d=()=>n(630116);function u(e){const{discussionIds:t,blockStore:n,transaction:r}=e,s=t.filter((e=>{const t=d().sk.createChildStore(n,{table:o().$Y,id:e,spaceId:n.getSpaceId()}),r=(0,a().o9)(n.getModel());return"suggestion"!==t.getType()||!(0,i().xi)({blockModel:r,discussionId:e})}));!function(e){const{blockStore:t,discussionIds:n,transaction:o}=e,i=c().bN(t);for(const r of n)l().applyOperation({store:i,operation:{pointer:i.pointer,path:i.path,command:"listRemove",args:{id:r}},transaction:o})}({blockStore:n,discussionIds:s,transaction:r});for(const o of s)p({store:n,discussionId:o,transaction:r})}function p(e){const{store:t,transaction:n,discussionId:o}=e,i=["m",o],a=r().JIi(i);s().gw({environment:t.environment,store:t.getBlockTitleStore(),selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:n,updateSelection:!1});for(const r of Object.keys(t.getProperties())){if("title"===r)continue;const e=t.getPropertyStore(r);s().gw({environment:t.environment,store:e,selection:{startIndex:0,endIndex:1/0},annotationKey:a,transaction:n,updateSelection:!1})}}},589407:(e,t,n)=>{n.d(t,{L:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M4 11.375a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75m6 0a1.375 1.375 0 1 0 0-2.75 1.375 1.375 0 0 0 0 2.75"})},i=(0,n(340498).wt)("ellipsis",o)},589994:(e,t,n)=>{n.r(t),n.d(t,{TEST_ONLY__setTransactionQueue:()=>Y,isIndexedDbGracefulFallbackToInMemoryEnabled:()=>q,setupTransactionQueue:()=>$,transactionQueue:()=>G});n(16280),n(944114),n(898992),n(581454),n(737550);var o=()=>n(857639),i=()=>n(206267),r=()=>n(319625),a=()=>n(496603),s=()=>n(502800),l=()=>n(763824),c=()=>n(720665),d=(n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(803949),()=>n(534177)),u=()=>n(620149),p=()=>n(141032);const m="Transaction",g="bySessionId",f="byTimestamp",v="byId",h="byUserId",_="Session",b="bySessionId",y="byUpdatedAt",S="byOwnerSessionId";const w=45*c().TD;class k{constructor(e,t){this.db=void 0,this.debugLogger=void 0,this.runOptimizedScans=!0,this.activeTasks=new Map,this.ownedSessionIds=new Set,this.db=new(p().$E)(t,"TransactionStore",2,{upgrade(e,t,n,o){if(t<1&&function(e){const t=e.createObjectStore(_,{keyPath:d().$r("index"),autoIncrement:!0});t.createIndex(y,d().$r("updatedAt"),{unique:!1}),t.createIndex(S,d().$r("ownerSessionId"),{unique:!1}),t.createIndex(b,d().$r("sessionId"),{unique:!0});const n=e.createObjectStore(m,{keyPath:d().$r("index"),autoIncrement:!0});n.createIndex(f,d().$r("timestamp"),{unique:!1}),n.createIndex(g,[d().$r("sessionId"),d().$r("timestamp")],{unique:!1}),n.createIndex(v,d().$r("id"),{unique:!0})}(e),t<2){o.objectStore(m).createIndex(h,d().$r("userId"))}}}),this.debugLogger=e,this.runOptimizedScans=!t.device.isEdgeHTML}async DEV_ONLY_deadlockDb(e){throw new Error("This function is only available in development builds.")}async heartbeat(e){const{currentSessionId:t,isActive:n,timeoutMs:i}=e,r=n?[_,m]:[_],a=await this.db.startTransaction({storeNames:r,mode:"readwrite",name:"IndexedDBTransactionStore.heartbeat",timeoutMs:i},(async(e,i)=>{const r=new Set,a=e.objectStore(_);let l=await a.index(S).openCursor(t);i("Obtained session cursor.");let c=0;for(;l;){c+=1;const e=l.value;e.sessionId!==t&&r.add(e.sessionId);const n={...e,updatedAt:Date.now()};l.update(n),l=await l.continue()}if(i(`Finished processing ${c} sessions.`),n){const t=e.objectStore(m).index(v),n=Date.now()-w;i(`Processing ${this.activeTasks.size} active tasks.`),this.activeTasks.forEach((async e=>{if(e.timestamp>=n)return;if(!(await t.get(e.id))){if(e.callback)try{e.callback(void 0,e.logCallStack)}catch(i){this.debugLogger.flush(),o().log({level:"error",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollectCleanupError",error:(0,s().convertErrorToLog)(i)})}this.debugLogger.flush(),o().log({level:"warning",from:"IndexedDBTransactionStore",type:"activeTaskGarbageCollect",data:{miscDataToConvertToString:{task:e,expireTime:n}}}),this.activeTasks.delete(e.id)}}))}return{value:r}}));return a.error?a:(this.ownedSessionIds=a.value,{value:void 0})}async claimSessions(e){const{currentSessionId:t,staleSessionTimeoutMs:n,transactionTimeoutMs:o}=e,i=await this.db.startTransaction({storeNames:[_],mode:"readwrite",name:"IndexedDBTransactionStore.claimSessions",timeoutMs:o},(async(e,o)=>{const i=[],r=e.objectStore(_);let a=await r.index(y).openCursor(IDBKeyRange.upperBound(n));for(o("Obtained session cursor.");a;){const e=a.value,n={...e,ownerSessionId:t,updatedAt:Date.now()};i.push(e.sessionId),o(`Taking ownership of session ${e.sessionId}.`);const r=Date.now()-e.updatedAt;this.debugLogger.log({from:"IndexedDBTransactionStore",level:"debug",type:"claimSession",data:{message:`claimed ${e.sessionId} updated ${r}ms ago`,sessionId:e.sessionId,sinceLastUpdate:r}}),a.update(n),a=await a.continue()}return{value:i}}));if(i.error)return i;for(const r of i.value)this.ownedSessionIds.add(r);return{value:void 0}}getTasks(e,t){return this.db.startTransaction({storeNames:[_,m],mode:"readonly",name:"IndexedDBTransactionStore.getTasks",timeoutMs:void 0},(async(o,i)=>{let r;const a=[],s=o.objectStore(_);let l=await s.index(S).openCursor(e);for(i("Obtained session cursor.");l;){const e=l.value;a.push(e),l=await l.continue()}if(i(`Found ${a.length} owned sessions.`),0===a.length)return{value:void 0};a.sort(((e,t)=>e.index-t.index));const c=a[0].sessionId,d=[];let u=await this.createTransactionCursor(o,c);for(;u;){const e=u.value;(0,n(134025).qG)(e.operations);const t=this.activeTasks.get(e.id);e.sessionId===c&&d.push({...e,callback:t&&t.callback}),u=await u.continue()}return i(`Found ${d.length} tasks.`),r={sessionId:c,tasks:d},t?r.tasks.sort(((e,t)=>e.index&&t.index?e.index-t.index:e.timestamp-t.timestamp)):r.tasks.sort(((e,t)=>e.timestamp-t.timestamp)),{value:r}}))}saveTask(e,t,n){const o={id:t.id,userId:t.userId,spaceId:t.spaceId,sessionId:e,timestamp:t.timestamp,debug:t.debug,operations:t.operations,useSudoMode:t.useSudoMode,isUndoTransaction:t.isUndoTransaction,isTemplateInstantiationTransaction:t.isTemplateInstantiationTransaction};return u().A.setOrIncTotal(this.activeTasks.size+1),this.activeTasks.set(o.id,t),this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.saveTask",timeoutMs:n},(async(t,n)=>{const i=t.objectStore(_),a=await i.index(b).get(e);if(n("Obtained session cursor."),!a){const t={sessionId:e,updatedAt:Date.now(),ownerSessionId:e};n(`Adding session ${t.sessionId}.`);try{await i.add(t)}catch(s){throw(0,p().Ss)((0,r().A)(s),`session ${t.sessionId}`)}}try{await t.objectStore(m).add(o)}catch(s){throw(0,p().Ss)((0,r().A)(s),`task ${o.id}`)}return this.debugLogger.log({from:"IndexedDBTransactionStore",type:"saveTask",level:"debug",data:{message:`create task ${o.id} in ${a?"existing":"NEW"} session ${e}`,sessionId:e,taskId:o.id,isNewSession:!Boolean(a)}}),{value:void 0}}))}async deleteSession(e){const{currentSessionId:t,sessionId:n}=e,o=await this.db.startTransaction({storeNames:[_,m],mode:"readwrite",name:"IndexedDBTransactionStore.deleteSession",timeoutMs:void 0},(async(e,o)=>{let i=await this.createTransactionCursor(e,n);for(o("Obtained transaction cursor.");i;){if(i.value.sessionId===n)return{value:`Attempt to delete non-empty session: has task ${i.value.id}`,abort:!0};i=await i.continue()}const r=e.objectStore(_),a=await r.index(b).get(n);if(!a)return{value:"Session is missing",abort:!0};const s=a;return s.ownerSessionId!==t?{value:`Attempt to delete another tab's session: owned by ${s.ownerSessionId}`,abort:!0}:(r.delete(s.index),{value:void 0})}));return o.error?o:o.value?{error:{type:"LogicalError",message:o.value,userDetails:"Could not perform an operation due to a logical error."}}:{value:void 0}}hasTasks(){return this.activeTasks.size>0||this.ownedSessionIds.size>0}getTotalNumberOfTasks(e){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasks",timeoutMs:e},(async e=>{const t=e.objectStore(m);return{value:await t.count()}}))}getTotalNumberOfTasksForUser(e,t){return this.db.startTransaction({storeNames:[m],mode:"readonly",name:"IndexedDBTransactionStore.getTotalNumberOfTasksForUser",timeoutMs:t},(async t=>{const n=t.objectStore(m).index(h);return{value:await n.count(e)}}))}async anySessionHasTasks(e){const t=await this.getTotalNumberOfTasks(e);return t.error?t:{value:t.value>0}}async hasTasksForUser(e,t){const n=await this.getTotalNumberOfTasksForUser(e,t);return n.error?n:{value:n.value>0}}hasTask(e){for(const[,t]of this.activeTasks)if(e(t))return!0;return!1}async deleteTasks(e){const t=await this.db.startTransaction({storeNames:[m,_],mode:"readwrite",name:"IndexedDBTransactionStore.deleteTasks",timeoutMs:void 0},(async(t,n)=>{const i=[],r=[],a=new Set,s=t.objectStore(m),l=s.index(v),c=t.objectStore(_);await(0,p().yL)(e.map((0,p().Lc)((async e=>{i.push(e.id);const t=await l.openCursor(e.id);if(n(`Obtained transaction cursor for task ${e.id}.`),t){a.add(t.value.sessionId),await t.delete(),n(`Deleted task ${e.id}.`);const o=String(e.id);this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${e.id}`,taskId:o}})}else this.debugLogger.flush(),o().log({from:"IndexedDBTransactionStore",type:"deleteTasksTaskNotExist",level:"warning",data:{message:`could not delete task not stored in indexeddb ${e.id}`,taskId:e.id}})}))));const d=s.index(g);return a.forEach((async e=>{let n=0;if(this.runOptimizedScans)n=await d.count(this.getTransactionRange(e));else{let o=await this.createTransactionCursor(t,e);for(;o;){if(o.value.sessionId===e){n++;break}o=await o.continue()}}if(0===n){const t=await c.index(b).openCursor(e);t&&(r.push(t.value.sessionId),t.delete(),this.debugLogger.log({from:"IndexedDBTransactionStore",type:"deleteTasksDeleteSession",level:"debug",data:{message:`delete empty session ${e}`,sessionId:e}}))}})),{value:{deletedTaskIds:i,deletedSessionIds:r}}}));if(t.error)return t;const{deletedTaskIds:n,deletedSessionIds:i}=t.value;for(const o of n)this.activeTasks.delete(o);for(const o of i)this.ownedSessionIds.delete(o);return u().A.updateRemaining(this.activeTasks.size),{value:void 0}}async checkObjectStores(){const e="IndexedDBTransactionStore.checkObjectStores",t=this.db.startTransaction({storeNames:["Session"],mode:"readonly",name:`${e}: read from Session object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),n=this.db.startTransaction({storeNames:["Transaction"],mode:"readonly",name:`${e}: read from Transaction object store`,timeoutMs:void 0},(async()=>Promise.resolve({value:"created IndexedDB transaction"}))),[o,i]=await Promise.all([t,n]);return{session:o,transaction:i}}async reset(){await this.db.reset(),this.activeTasks.clear(),this.ownedSessionIds.clear(),u().A.updateRemaining(0)}async clearTasksForUser(e){const t=await this.db.startTransaction({storeNames:[m],mode:"readwrite",name:"IndexedDBTransactionStore.clearTasksForUser",timeoutMs:void 0},(async(t,n)=>{const o=[],i=t.objectStore(m);let r=await i.index(h).openCursor(IDBKeyRange.only(e));for(n("Obtained transaction cursor.");r;)o.push(r.value.id),await r.delete(),r=await r.continue();return{value:{deletedTaskIds:o}}}));if(t.error)return t;const{deletedTaskIds:n}=t.value;for(const o of n)this.activeTasks.delete(o);u().A.updateRemaining(this.activeTasks.size)}getTransactionRange(e){return IDBKeyRange.bound([e,0],[e,Number.MAX_VALUE],!0,!0)}createTransactionCursor(e,t){const n=e.objectStore("Transaction");return this.runOptimizedScans?n.index(g).openCursor(this.getTransactionRange(t),"next"):n.openCursor()}}var I=()=>n(161132),x=(n(354520),()=>n(752196)),A=()=>n(696706),C=()=>n(449412),T=()=>n(118757),M=()=>n(227440),P=()=>n(419101),B=()=>n(500472);const R="NativeBackedTransactionQueue";class E{constructor(e,t,n){this.lastTaskTimestamp=0,this.tasks=new Map,this.sessionId="00000000-0000-0000-0000-000000000000",this.events=new(x().A),this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(o().BatchedLogger)({from:R,type:"BulkDebug",level:"info",maxLength:250}),this.connection=e,this.dependencies=t,o().log({from:R,level:"debug",type:"NativeBackedTransactionQueueCreated"}),n.subscribeToUpdateTransactionState((e=>this.updateTransactionState(e)))}async enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;var n;(this.tasks.set(e.id,{...e,sessionId:this.sessionId}),this.hasTooManyOperations(e))&&o().log({from:R,type:"enqueueTask",level:"warning",data:{message:`enqueing task with operation count > ${E.operationCountWarningThreshold}`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(n=e.debug)||void 0===n?void 0:n.userAction,miscDataToConvertToString:{operationsCount:e.operations.length}}});const i=JSON.stringify(e.operations).length;var r;this.stringifiedOperationSizeIsTooLarge(i)&&o().log({from:R,type:"enqueueTask",level:"warning",data:{message:`enqueing task with stringified operation count > ${E.stringifiedOperationSizeByteThreshold} bytes`,sessionId:this.sessionId,taskId:e.id,isNewSession:t,userAction:null===(r=e.debug)||void 0===r?void 0:r.userAction,miscDataToConvertToString:{operationsCount:e.operations.length,stringifiedOperationsSize:i}}});await(0,B().KA)(this.connection,e),this.debugLogger.log({from:R,type:"enqueueTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}})}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}unpause(){}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){return await(0,B().n_)(this.connection,e)>0}async getTotalNumberOfTasks(){return await(0,B().Zw)(this.connection)}async anySessionHasTasks(){return await this.getTotalNumberOfTasks()>0}async reset(){await(0,B().m)(this.connection),this.tasks.clear()}async clearForUser(e){const t=await(0,B().Dp)(this.connection,e);for(const n of t)this.tasks.delete(n)}updateDependencies(e){this.dependencies=e}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,A().Z2)(t.pointer,e)))))}hasTooManyOperations(e){return e.operations.length>=E.operationCountWarningThreshold}stringifiedOperationSizeIsTooLarge(e){return e>=E.stringifiedOperationSizeByteThreshold}async drain(){return this.tasks.size>0?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();e>E.transactionSizeHealthcheckThreshold&&(this.debugLogger.flush(),o().log({level:"info",from:"NativeBackedSqliteTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck({queue_type:"NativeBackedSqliteTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:M().A.state.online,retry_reasons:this.retryReasonCounters}))}catch(e){this.debugLogger.flush(),o().log({level:"error",from:"NativeBackedSqliteTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().convertErrorToLog)(e)}),C().Fg(e)}await l().wR(E.healthcheckInterval,this.dependencies.timeSource)}}updateTransactionState(e){(e.syncing||this.hasTasks())&&M().A.setState({...M().A.state,syncing:!0});let t=[],n=[];if(e.saveTransactionResult)if(e.saveTransactionResult.error){const{retryReason:o}=e.saveTransactionResult.error;o?(0,T().Bc)(this.retryReasonCounters,o):this.retryReasonCounters={_total:0},t=e.saveTransactionResult.error.savedTasks.map((e=>this.tasks.get(e.id))).filter(d().O9),n=e.saveTransactionResult.error.failedTasks.map((e=>this.tasks.get(e.id))).filter(d().O9),(0,P().On)({backoffEstimate:void 0,retryReason:o})}else this.retryReasonCounters={_total:0},t=e.saveTransactionResult.value.map((e=>this.tasks.get(e.id))).filter(d().O9),n=[],(0,P().YL)();t.forEach((e=>{if(e.callback)try{e.callback(void 0)}catch(t){this.debugLogger.flush(),o().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateSavedTask",data:{taskId:e.id},error:(0,s().convertErrorToLog)(t)})}this.tasks.delete(e.id)})),n.forEach((e=>{if(e.callback)try{e.callback(new Error(`Failed to save transaction with id: ${e.id}`))}catch(t){this.debugLogger.flush(),o().log({level:"error",from:"NativeBackedTransactionQueue",type:"updateTransactionStateFailedTask",data:{taskId:e.id},error:(0,s().convertErrorToLog)(t)})}this.tasks.delete(e.id),this.dependencies.rollbackTask(e)})),e.syncing||this.hasTasks()||(M().A.setState({...M().A.state,syncing:!1}),this.events.emit("drain"))}}E.healthcheckInterval=5*c().Xb,E.transactionSizeHealthcheckThreshold=1e3,E.operationCountWarningThreshold=500,E.stringifiedOperationSizeByteThreshold=1e5;var D=()=>n(459887),N=()=>n(582033);class L{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.indexedDBDrainListener=void 0,this.debugLogger=void 0,this.activeQueue=e,this.inMemoryTransactionQueue=t,this.indexedDBDrainListener=()=>this.handleIndexedDBQueueDrain(),this.debugLogger=new(o().BatchedLogger)({from:"IndexedDBToInMemoryTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),setTimeout((()=>{this.activeQueue instanceof N().p&&(this.debugLogger.log({level:"error",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"IndexedDBTransactionQueue has not drained after 5 minutes."}}),this.debugLogger.flush())}),5*c().Xb)}startLoop(){if(this.activeQueue instanceof N().p){this.activeQueue.events.addListener("drain",this.indexedDBDrainListener)}this.activeQueue.startLoop()}handleIndexedDBQueueDrain(){const e=(0,n(220719).oC)(this.activeQueue,N().p,'Expected "IndexedDBTransactionQueue"');e.hasAttemptedToClaimSessions()&&(e.stopLoop(),e.events.removeListener("drain",this.indexedDBDrainListener),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,this.debugLogger.log({level:"info",from:"IndexedDBToInMemoryTransactionQueue",type:"constructor",data:{message:"Switching over from IndexedDBTransactionQueue to InMemoryTransactionQueue."}}))}logEmptyTaskForDebugging(e){var t,n;null===(t=(n=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(n,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}}var O=()=>n(999319);const U="InMemoryTransactionQueue";class F{constructor(e){this.isProcessingTask=!1,this.lastTaskTimestamp=0,this.tasks=new Map,this.events=new(x().A),this.waiter=void 0,this.transactionBackoffController=new(n(706742).x)(P().Vp),this.sessionId="00000000-0000-0000-0000-000000000000",this.retryReasonCounters={_total:0},this.startTime=Date.now(),this.debugLogger=new(o().BatchedLogger)({from:U,type:"BulkDebug",level:"info",maxLength:250}),this.dependencies=e}startLoop(){this.dependencies.timeSource.setTimeout((()=>this.txLoop()),1),this.dependencies.timeSource.setTimeout((()=>this.healthcheckLoop()),1)}enqueueTask(e){this.lastTaskTimestamp=Math.max(e.timestamp,this.lastTaskTimestamp);const t=0===this.tasks.size;return this.tasks.set(e.id,{...e,sessionId:this.sessionId}),u().A.setOrIncTotal(this.tasks.size),this.debugLogger.log({from:U,type:"saveTask",level:"debug",data:{message:`save task ${e.id} in memory (${this.tasks.size} total now)`,sessionId:this.sessionId,taskId:e.id,isNewSession:t}}),this.getWaitable(!1).trigger(),Promise.resolve(void 0)}unpause(){this.transactionBackoffController.reset(),this.getWaitable(!1).trigger()}pause(){}getLastTaskTimestamp(){return this.lastTaskTimestamp}hasTasks(){return this.tasks.size>0}async hasTasksForUser(e){return Promise.resolve(Array.from(this.tasks.values()).some((t=>t.userId===e)))}updateDependencies(e){this.dependencies=e}async getTotalNumberOfTasks(){return Promise.resolve(this.tasks.size)}async anySessionHasTasks(){return Promise.resolve(this.hasTasks())}async drain(){return this.hasTasks()||this.isProcessingTask?new Promise((e=>{this.events.addOnceListener("drain",e)})):void 0}async awaitRecordTransaction(e){this.isPendingTransactionForRecord(e)&&await this.drain()}isPendingTransactionForRecord(e){return Array.from(this.tasks.values()).some((t=>t.operations.some((t=>(0,A().Z2)(t.pointer,e)))))}async reset(){return this.tasks=new Map,u().A.updateRemaining(0),Promise.resolve(void 0)}async clearForUser(e){const t=Array.from(this.tasks.values()).filter((t=>t.userId===e));for(const n of t)this.tasks.delete(n.id);return u().A.updateRemaining(this.tasks.size),Promise.resolve(void 0)}async txLoop(){for(;;)try{await this.txLoopIteration()}catch(e){(0,T().Bc)(this.retryReasonCounters,"txLoopException"),this.debugLogger.flush(),o().log({level:"error",from:U,type:"txLoopIteration",error:(0,s().convertErrorToLog)(e)}),C().Fg(e),await l().wR(15e3,this.dependencies.timeSource)}}async txLoopIteration(){this.hasTasks()||(this.doneSyncing(),this.events.emit("drain")),await this.wait(T().qG,T().ke);const e=Array.from(this.tasks.values()),t=Array.from(e).sort(((e,t)=>e.timestamp-t.timestamp));if(0===t.length)return;const n=[];for(let o=0;o<t.length;o++)t[o]!==e[o]&&n.push(o);n.length>0&&o().log({from:U,level:"warning",type:"TasksNotOrdered",data:{miscDataToConvertToString:{unsortedTaskIds:e.map((e=>e.id)),mismatch:n},taskIds:t.map((e=>e.id))}}),this.startSyncing(),await this.useSaveTransactionsApi(t)}async useSaveTransactionsApi(e){const t=await this.dependencies.handleSaveTransactions(e);if(t.error){const{savedTasks:e,failedTasks:i,message:r,retryDelay:a,retryReason:l}=t.error;var n;if(l?(0,T().Bc)(this.retryReasonCounters,l):this.retryReasonCounters={_total:0},e.length>0&&(this.debugLogger.log({level:"debug",from:U,type:"handlePartialSaveTransactionsSuccess",data:{message:`will delete ${e.length} saved tasks`,taskIds:e.map((e=>e.id))}}),await this.cleanupTasks(e,void 0)),i.length>0?(this.debugLogger.flush(),o().log({level:"warning",from:U,type:"handleSaveTransactionsError",data:{message:r,taskIds:i.map((e=>e.id))},error:(0,s().convertErrorToLog)(t.error)}),await this.cleanupTasks(i,t.error)):this.debugLogger.log({level:"debug",from:U,type:"handleSaveTransactionsRetryableError",data:{message:r}}),a>0)await this.transactionBackoffController.backOffOnFailure(a-T().qG,null===(n=t.error)||void 0===n?void 0:n.retryReason);else this.transactionBackoffController.reset()}else{const e=t.value;this.retryReasonCounters={_total:0},this.debugLogger.log({level:"debug",from:U,type:"handleSaveTransactionsSuccess",data:{message:`will clean up ${e.length} submitted tasks`,taskIds:e.map((e=>e.id))}}),this.transactionBackoffController.reset(),await this.cleanupTasks(e,void 0)}}async cleanupTasks(e,t){for(const i of e)if(i.callback)try{i.callback(t)}catch(n){this.debugLogger.flush(),o().log({level:"error",from:"InMemoryTransactionQueue",type:"cleanupTask",data:{taskId:i.id},error:(0,s().convertErrorToLog)(n)})}for(const o of e)this.debugLogger.log({from:U,type:"deleteTasksDeleteTask",level:"debug",data:{message:`delete task ${o.id}`,taskId:o.id}}),this.tasks.delete(o.id);return u().A.updateRemaining(this.tasks.size),Promise.resolve()}getWaitable(e){return this.waiter&&!e||(this.waiter=new(l().e2)(this.dependencies.timeSource)),this.waiter}async wait(e,t){await this.getWaitable(!1).wait(e,t),this.getWaitable(!0)}startSyncing(){M().A.setState({...M().A.state,syncing:!0})}doneSyncing(){M().A.setState({...M().A.state,syncing:!1})}async healthcheckLoop(){for(;;){try{const e=await this.getTotalNumberOfTasks();if(e>F.transactionSizeHealthcheckThreshold){const t={queue_type:"InMemoryTransactionQueue",uptime:Date.now()-this.startTime,queue_size:e,error_type:void 0,is_considered_online:M().A.state.online,retry_reasons:this.retryReasonCounters};this.debugLogger.flush(),o().log({level:"info",from:"InMemoryTransactionQueue",type:"transactionSizeHealthcheck",data:{miscDataToConvertToString:{queueSize:e}}}),this.dependencies.handleHealthcheck(t)}}catch(e){this.debugLogger.flush(),o().log({level:"error",from:"InMemoryTransactionQueue",type:"healthcheckLoopIteration",error:(0,s().convertErrorToLog)(e)}),C().Fg(e)}await l().wR(F.healthcheckInterval,this.dependencies.timeSource)}}}F.healthcheckInterval=15*c().Xb,F.transactionSizeHealthcheckThreshold=1e3;const V=F;var j=()=>n(866184);const z="FeatureFlagTransactionQueue",H="00000000-0000-0000-0000-000000000000";async function W(e){if(!window.indexedDB)return{available:!1,message:"The IndexedDB API is missing or disabled on this platform."};if(e.device.isFirefox){const e="FirefoxFeatureCheck";if(!(await new Promise((t=>{const n=window.indexedDB.open(e);n.onerror=()=>t(!1),n.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}}))))return{available:!1,message:"IndexedDB is disabled in Firefox Private Browsing."}}if(e.device.isChrome&&parseInt(e.device.browserVersion,10)>=99){const e="Chrome99FeatureCheck";let n=!1;try{if(n=await new Promise((t=>{const n=window.indexedDB.open(e);n.onerror=()=>t(!1),n.onsuccess=()=>{t(!0),window.indexedDB.deleteDatabase(e)}})),!n)return{available:!1,message:"IndexedDB is unstable in Chrome 99."}}catch(t){return{available:!1,message:(0,r().A)(t).message}}}return q()&&D().r.hasOccurredRecently()?{available:!1,message:"A NotionTransactionTimeout has happened recently, avoiding use of IndexedDB.",previousTimeouts:D().r.getTotal()}:{available:!0}}const q=a().Bj((()=>"on"===(0,n(165162).gg)({experimentId:"indexeddb_graceful_fallback_to_in_memory_queue"})));async function K(e){const t=new(j().TransactionQueueDependenciesImpl)(e);async function n(){const n=await W(e);if(!n.available)return o().log({from:z,level:"warning",type:"preferIndexedDBUnavailable",data:{previousTimeouts:n.previousTimeouts,miscDataToConvertToString:{message:n.message,userAgent:navigator.userAgent}}}),r();o().log({from:z,type:"preferIndexedDB",level:"info"});const l=function(e,t){const n="react-native"===e.device.platform?H:i().JW(),r=new(o().BatchedLogger)({from:"IndexedDBTransactionQueue",type:"BulkDebug",level:"info",maxLength:250}),a=new k(r,e);return new(N().p)({dependencies:t,transactionStore:a,sessionId:n,debugLogger:r,enableHeartbeatTimeout:q()})}(e,t),c=await(0,I().xs)();if(c&&!(0,I().W0)(c)){let e=!1;try{e=await l.anySessionHasTasks(),o().log({from:z,type:"indexedDBStorageVeryFull",level:"warning",data:{storage:{hasTasks:e,...c}}})}catch(d){o().log({from:z,level:"error",type:"indexedDBStorageReadError",data:{storage:c},error:(0,s().convertErrorToLog)(d)})}if(!e)return new V(t)}if(e.device.isFirefox)try{const e=await l.checkObjectStores(),n=a().oE([e.transaction,e.session].map((e=>e.error)));if(n.length>0){const i=[];return e.transaction.error&&i.push("Transaction"),e.session.error&&i.push("Session"),o().log({from:z,level:"error",type:"FirefoxHealthCheckFailed",error:{miscErrorString:(0,s().WS)(n)},data:{message:`Can't read ${i}. Using InMemoryTransactionQueue instead.`}}),new V(t)}}catch(d){return o().log({from:z,level:"error",type:"indexedDBHealthCheckError",error:(0,s().convertErrorToLog)(d)}),new V(t)}return q()?(l.events.addListener("timeout",(()=>{D().r.trackPersistently()})),new(O().A)(l,new V(t))):l}function r(){return o().log({from:z,type:"preferInMemory",level:"info"}),new V(t)}const{device:d,mobileNative:u}=e;if(d.isBrowser&&d.isDesktop){if(d.isChrome||d.isFirefox)return n();if(d.isSafari){if(parseInt(d.browserVersion,10)<17)return n();const e=await n();if(e instanceof N().p){if((await l().nQ(15*c().TD,e.anySessionHasTasks())).result)return o().log({from:z,type:"Safari17.usingIndexedDBToInMemoryTransactionQueue",level:"info"}),new L(e,r())}return o().log({from:z,type:"Safari17.usingInMemoryTransactionQueue",level:"info"}),r()}return r()}return d.isBrowser&&d.isMobile?r():d.isElectron?n():d.isMobileNative&&u&&u.sqliteConnection?new E(u.sqliteConnection,t,u):r()}(0,n(466103).exposeDebugEnvironmentValue)("getIndexedDBAvailability",(e=>()=>W(e)));let G=new class{constructor(e,t){this.getActiveQueueName=void 0,this.queues=void 0,this.createQueues=void 0,this.getActiveQueueName=e,this.createQueues=t}getQueues(){const e=this.queues?this.queues:this.createQueues();return this.queues=e,e}applyToAllQueues(e){return Object.values(this.getQueues()).map(e)}applyToActiveQueue(e){return e(this.getQueues()[this.getActiveQueueName()])}startLoop(){this.applyToAllQueues((e=>e.startLoop()))}enqueueTask(e){return this.applyToActiveQueue((t=>t.enqueueTask(e)))}unpause(){this.applyToAllQueues((e=>e.unpause()))}pause(){this.applyToAllQueues((e=>e.pause()))}getLastTaskTimestamp(){return this.applyToActiveQueue((e=>e.getLastTaskTimestamp()))}hasTasks(){return this.applyToAllQueues((e=>e.hasTasks())).some(Boolean)}async hasTasksForUser(e){return(await Promise.all(this.applyToAllQueues((t=>t.hasTasksForUser(e))))).some((e=>e))}updateDependencies(e){this.applyToAllQueues((t=>t.updateDependencies(e)))}async anySessionHasTasks(){for(const e of this.applyToAllQueues((e=>e.anySessionHasTasks())))if(await e)return!0;return!1}async getTotalNumberOfTasks(){return a().cz(await Promise.all(this.applyToAllQueues((e=>e.getTotalNumberOfTasks()))))}async drain(){await Promise.all(this.applyToAllQueues((e=>e.drain())))}awaitRecordTransaction(e){return this.applyToActiveQueue((t=>t.awaitRecordTransaction(e)))}isPendingTransactionForRecord(e){return this.applyToAllQueues((t=>t.isPendingTransactionForRecord(e))).some(Boolean)}async reset(){await Promise.all(this.applyToAllQueues((e=>e.reset())))}async clearForUser(e){await Promise.all(this.applyToAllQueues((t=>t.clearForUser(e))))}}((()=>"error"),(()=>{throw new Error("Need to await setupTransactionQueue")}));async function $(e){return G=await K(e),G}function Y(e){G=e}},590027:(e,t,n)=>{n.d(t,{B:()=>i,M:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{debugSidebarWidth:450,reopenMainSidebarOnClose:!1,isDebugSidebarOpen:!1,isFullWidthMode:!1}}}const i=new(n(178624).R)({key:"chatSidebarWidth",namespace:n(419494).Bq,important:!0,trackingType:"preference"}),r=new o},590604:(e,t,n)=>{n.d(t,{Dk:()=>_,JF:()=>f,eV:()=>h,uI:()=>v});n(410838),n(898992),n(803949),n(737550);var o=()=>n(857639),i=()=>n(792071),r=()=>n(142748),a=()=>n(252651),s=()=>n(433847),l=()=>n(68263),c=()=>n(388821),d=()=>n(728272),u=()=>n(854150),p=()=>n(798880),m=()=>n(731320),g=()=>n(351360);function f(e){const{store:t,userId:n,updatedPermissionItems:o}=e,a=t.getModel();if(!a)return!1;const s=n?{table:p().oo,id:n}:void 0,u=c().RecordMap.create();u.setValue(t.pointer,{...a.__IM_SORRY__getValue(),permissions:o});const m=i().b4_.tryUntilFound(i().b4_.fromRecordMap(u),t.getRecordModel);return _({actorPointer:s,ancestors:(0,r().Yn)(t.pointer,m),permissionsContext:v({actorPointers:new(d().d)(void 0===s?[]:[s]),recordPointers:new(d().d)([t.pointer]),getRecordModel:m})}).some((e=>{const t=e.permissionItem.role;return t&&(0,l().Km)(t)}))}function v(e){const{actorPointers:t,getRecordModel:n,recordPointers:i}=e,s=c().RecordMap.create();for(const o of i)if(!s.has(o)){(0,r().Yn)(o,n).forEach((e=>{s.setModel(e.pointer,e)}))}const l=c().RecordMap.create(),p=(0,a().x6)({recordMapFromWhichToFindRelevantEntities:s});for(const o in p.relevantTeamIds){const e={table:u().yK,id:o};s.has(e)||l.setModel(e,n(e))}const g=(0,a().js)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:n,actorPointers:t,logErrorFn:e=>{const{from:t,type:n,error:i,data:r}=e;o().log({level:"error",from:t,type:n,error:{name:i.name,message:i.message,stack:i.stack},data:{miscDataToConvertToString:r}})}});return{actorPointersSet:new(d().d)(t),actorMemberships:g,ancestorsRecordMap:s,explicitTeamsRecordMap:l,spacesForSpaceMemberComputation:(0,m().bA)({ancestorsRecordMap:s,getRecordModel:n}),domainLinkSharingEnabledDomainsMap:void 0}}function h(e){const{actor:t,recordPointer:n,permissionsContext:o}=e,i=(0,r().Wy)(n,o.ancestorsRecordMap),a=g().default.state.currentSpaceStore,c=a&&a.isDefined()&&!i.findLast(s().vl)?[...i,a.getModel()]:i,d=_({actorPointer:null==t?void 0:t.pointer,ancestors:c,permissionsContext:o});if(1===d.length){const e=d[0];if((0,l().FP)(e.permissionItem)&&(0,l().Tt)(e.permissionItem.role))return e}}function _(e){const{actorPointer:t,ancestors:n,ignorePublicPermissions:o,permissionsContext:i}=e;return(0,s().WH)({actorPointer:t,userActorEmail:void 0,ancestors:n,ignorePublicPermissions:o,permissionsContext:i})}},592269:(e,t,n)=>{n.d(t,{H3:()=>M,Ic:()=>q,Iw:()=>T,K8:()=>R,Yt:()=>W,Yy:()=>P,_:()=>$,jV:()=>O,wj:()=>L,xw:()=>K});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(496603),i=()=>n(534177),r=()=>n(670913),a=()=>n(289915),s=()=>n(410486),l=()=>n(921598),c=()=>n(970013),d=()=>n(713998),u=()=>n(455348),p=()=>n(597777),m=()=>n(604995),g=()=>n(641007),f=()=>n(206267),v=()=>n(681873),h=()=>n(792071),_=()=>n(351028),b=()=>n(813690),y=()=>n(696706),S=()=>n(179034),w=()=>n(798880),k=()=>n(797809),I=()=>n(919709);function x(e){const t=[],n=[];for(const[o,i]of Object.entries(e))i&&((0,k().TV)(o)||("person"===i.type?t.push(o):"date"===i.type&&n.push(o)));return{date:n,person:t}}const A=I().Ey_(", ");function C(e,t){const n={command:"update",args:t,pointer:{table:S().ev,id:e.id},path:["properties"]};return h().Bj6.fromValue(e.table,(0,_().performPrimitiveOperation)(n,e.__IM_SORRY__getValue()))}function T(e){const{filter:t,userFilterContext:n,getRecordModel:o,experimentService:i,intl:r,collectionModel:a,currentPageInRelatedCollection:s,relativeVariableResult:l}=e,c=a.getNormalizedSchema(),d=a.spaceId;if(!d)return!1;const{model:u}=h().zgg.create({id:"fake-id",type:"page",properties:{},space_id:d,parentPointer:a.pointer,parentModel:a,createdBy:g().rb},{useCrdt:!1}),{coercionSucceeded:p}=M({block:u,schema:c,propertyMapping:a.getPropertyMapping(),groupBy:void 0,userFilterContext:n,intl:r,filter:t,getRecordModel:o,groupsPointer:[],relativeVariableResult:l,currentPageInRelatedCollection:s,resultCache:new Map,regExpCache:new Map,experimentService:i});return p}function M(e){const{block:t,schema:n,propertyMapping:i,filter:s,userFilterContext:l,groupBy:c,groupsPointer:d,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:g,resultCache:f,regExpCache:v,experimentService:_}=e,{userId:y,userTimeZone:k,userStartOfWeek:I}=l;let x=t;const A=h().b4_.tryUntilFound(h().b4_.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:n}=e;if(t===S().ev&&n===x.id)return x}),b().xb.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:n}=e;if(t===S().ev&&n===x.id)return x.__IM_SORRY__getValue()}))),m),T={};for(const o of d)Object.assign(T,U({block:x,getRecordModel:A,schema:n,propertyMapping:i,group:o,groupBy:c,intl:g,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:f,regExpCache:v,experimentService:_})),x=C(t,T);if(s){const e=j({block:x,schema:n,filter:s,propertyMapping:i,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,getRecordModel:m,intl:g,resultCache:f,regExpCache:v,experimentService:_}),o="failsFilter"===e.type||"coercedByFilter"===e.type?e.update??{}:{};Object.assign(T,o),x=C(t,T)}for(const o of d)Object.assign(T,U({block:x,getRecordModel:A,schema:n,propertyMapping:i,groupBy:c,group:o,intl:g,userFilterContext:l,relativeVariableResult:u,currentPageInRelatedCollection:p,resultCache:f,regExpCache:v,experimentService:_})),x=C(t,T);const M=C(x,T),B=o().Si(d.map((e=>{const o=P({group:e,groupBy:void 0,propertyMapping:i,schema:n,timeZone:k,experimentService:_}),s=o?(0,a().oR)({context:{schema:n,userId:y,userTimeZone:k,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:g,collectionFeatureGates:(0,r().v)({experimentService:_,actor:y?{table:w().oo,id:y}:void 0,spaceId:t.spaceId})},propertyMapping:i,filter:o}):void 0;return Boolean(s&&s({block:M,getRecordModel:m,propertyMapping:i,resultCache:f,regExpCache:v,experimentService:_,formulasModule:void 0}))}))),R=s?(0,a().oR)({filter:s,propertyMapping:i,context:{schema:n,userId:y,userTimeZone:k,userStartOfWeek:I,relativeVariableResult:u,currentPageInRelatedCollection:p,intl:g,collectionFeatureGates:(0,r().v)({experimentService:_,actor:y?{table:w().oo,id:y}:void 0,spaceId:t.spaceId})}}):void 0,E=!R||R({block:M,getRecordModel:m,propertyMapping:i,resultCache:f,regExpCache:v,experimentService:_,formulasModule:void 0});return{coercionSucceeded:B&&E,update:T}}function P(e){const t=R(e);return t?(0,a().dU)(t)?t:{operator:"and",filters:[t]}:void 0}function B(e,t){var n;return t?(null===(n=u().u9.fromViewPropertyIds([e.property],t))||void 0===n?void 0:n[0])??e.property:e.property}function R(e){const{schema:t,group:n,groupBy:o,propertyMapping:r,timeZone:a}=e,s=B(n,r),c=t[s];if(!c)return;const d=n.value;if((0,l().Eg)(c)&&d.type===c.type){if(void 0===d.value)return{property:s,filter:{operator:"is_empty"}};if("select"===c.type)return"string"==typeof d.value?{property:s,filter:{operator:"enum_is",value:{type:"exact",value:d.value}}}:void 0;if("status"===c.type)return void 0!==d.value&&"status"===d.type?{property:s,filter:{operator:"status_is",value:"by_group"===d.value.type?{type:"is_group",value:d.value.group}:{type:"is_option",value:d.value.option}}}:void 0;if((0,l().r4)(c.type))return"object"==typeof d.value&&d.type===c.type?{property:s,filter:{operator:"person_contains",value:{type:"exact",value:d.value}}}:void 0;if("relation"===c.type)return"object"==typeof d.value&&"relation"===d.type?function(e,t){if((0,l().WO)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"exact",value:t.value.id}}};if((0,l().zx)(t.value))return{property:e,filter:{operator:"relation_contains",value:{type:"relative",value:{type:"builtin",variable:t.value.value.variable}}}}}(s,d):void 0;if("location"===c.type)return"object"==typeof d.value&&"location"===d.type?{property:s,filter:{operator:"location_is",value:{type:"exact",value:d.value.id}}}:void 0;if("multi_select"===c.type)return"string"==typeof d.value?{property:s,filter:{operator:"enum_contains",value:{type:"exact",value:d.value}}}:void 0;if((0,l()._o)(c.type)){if(d.type!==c.type)return;return E(o&&"date"===o.type?o.groupBy:void 0,d.value,s,a)}if((0,l().Vs)(c.type)){if(d.type!==c.type)return;return D(d.value,s)}if("number"===c.type){if("number"!==d.type)return;return N(d.value,s)}if("checkbox"===c.type){if("checkbox"!==d.type)return;return{property:s,filter:{operator:"checkbox_is",value:{type:"exact",value:d.value}}}}if("formula"===c.type){if("formula"!==d.type)return;const e=d.value;if(void 0===e.value)return;if((0,l().kO)(e))return D(e.value,s);if("number"===e.type)return N(e.value,s);if("checkbox"===e.type)return{property:s,filter:{operator:"checkbox_is",value:{type:"exact",value:e.value}}};if((0,l().DH)(e))return E(o&&"date"===o.type?o.groupBy:void 0,e.value,s,a);if((0,l().GG)(e))return function(e,t){return{property:e,filter:{operator:"person_contains",value:{type:"exact",value:t.value}}}}(s,e);if((0,l().D1)(e))return(0,l().WO)(e.value)?{property:s,filter:{operator:"relation_contains",value:{type:"exact",value:e.value.id}}}:void 0;(0,i().HB)(e)}(0,i().HB)(c.type)}}function E(e,t,n,o){const i=(0,l().Kc)(t,o),r="relative"===e&&"month"===t.type?function(e){const{groupValueStart:t,groupValueEnd:n,timeZone:o}=e,i=(0,m().ah)(o),r=i.minus({days:30}),a=i.plus({days:30}),s=t.valueOf()>i.valueOf();return{start:s&&a.valueOf()>t.valueOf()?a.plus({days:1}):t,end:!s&&n.valueOf()>r.valueOf()?r.minus({days:1}):n}}({groupValueStart:i.start,groupValueEnd:i.end,timeZone:o}):i;return{property:n,filter:{operator:"date_is_within",value:{type:"exact",value:m().C6.toPersistedDateRange(r,o)}}}}function D(e,t){if("alphabet_prefix"===e.type){const n=e.value;return isNaN(parseInt(n))?{operator:"or",filters:[{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toUpperCase()}}},{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value.toLowerCase()}}}]}:{property:t,filter:{operator:"string_starts_with",value:{type:"exact",value:e.value}}}}return"other"===e.type?{property:t,filter:{operator:"string_has_no_alphabet_prefix"}}:"exact"===e.type?{property:t,filter:{operator:"string_is",value:{type:"exact",value:e.value}}}:void(0,i().HB)(e)}function N(e,t){if("range"===e.type){const{start:n,end:o}=e;return{operator:"and",filters:[{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:n}}},{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:o}}}]}}if("out_of_range"===e.type){const{start:n,end:o}=e;return{operator:"or",filters:[{property:t,filter:{operator:"number_less_than",value:{type:"exact",value:n}}},{property:t,filter:{operator:"number_greater_than_or_equal_to",value:{type:"exact",value:o}}}]}}if("unique"===e.type)return{property:t,filter:{operator:"number_equals",value:{type:"exact",value:e.value}}};(0,i().HB)(e)}function L(e,t){const n=e.property,o=null==t?void 0:t[n];if(null!=o&&o.derived_property_record_metadata)return!1;if(o&&d().sP(o))return!1;const r=e.value;return!r.value||("select"===r.type||"multi_select"===r.type||"status"===r.type||"person"===r.type||"checkbox"===r.type||"relation"===r.type||"date"===r.type||"number"===r.type||((0,l().kO)(r)?"exact"===r.value.type:"formula"!==r.type&&"created_by"!==r.type&&"last_edited_by"!==r.type&&"created_time"!==r.type&&"last_edited_time"!==r.type&&"location"!==r.type&&"last_visited_time"!==r.type&&void(0,i().HB)(r.type)))}function O(e){const{schema:t,propertyMapping:n,group:o,block:r,resultCache:a,regExpCache:s,experimentService:c}=e;if(!L(o,t))return{};const d=function(e){const{schema:t,group:n,propertyMapping:o}=e,r=B(n,o),a=t[r];if(!a)return;const s=n.value;return(0,l().Eg)(a)&&s.type===a.type&&void 0!==s.value?"person"===a.type?"object"==typeof s.value&&"person"===s.type?{property:r,filter:{operator:"person_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:"relation"===a.type?"relation"===s.type&&(0,l().WO)(s.value)?{property:r,filter:{operator:"relation_does_not_contain",value:{type:"exact",value:s.value.id}}}:"relation"===s.type&&(0,l().zx)(s.value)?{property:r,filter:{operator:"relation_does_not_contain",value:{type:"relative",value:{type:"builtin",variable:s.value.value.variable}}}}:void 0:"location"===a.type?"object"==typeof s.value&&"location"===s.type?{property:r,filter:{operator:"location_is_not",value:{type:"exact",value:s.value.id}}}:void 0:"multi_select"===a.type?"string"==typeof s.value?{property:r,filter:{operator:"enum_does_not_contain",value:{type:"exact",value:s.value}}}:void 0:void("select"!==a.type&&"status"!==a.type&&"checkbox"!==a.type&&"date"!==a.type&&"text"!==a.type&&"title"!==a.type&&"url"!==a.type&&"email"!==a.type&&"phone_number"!==a.type&&"number"!==a.type&&"formula"!==a.type&&"created_by"!==a.type&&"last_edited_by"!==a.type&&"created_time"!==a.type&&"last_edited_time"!==a.type&&"last_visited_time"!==a.type&&(0,i().HB)(a)):void 0}({schema:t,group:o,propertyMapping:n});if(!d)return{};const u=z({...e,property:d.property,filter:d.filter,schema:t,block:r,resultCache:a,regExpCache:s,experimentService:c});return("failsFilter"===u.type||"coercedByFilter"===u.type)&&u.update||{}}function U(e){const{schema:t,propertyMapping:n,group:o,groupBy:i,block:r,userFilterContext:s}=e,{userTimeZone:l}=s;if(!L(o,t))return{};const c=R({schema:t,group:o,groupBy:i,propertyMapping:n,timeZone:l});if(!c||!(0,a().yX)(c))return{};const d=z({...e,property:c.property,filter:c.filter,schema:t,block:r});return("failsFilter"===d.type||"coercedByFilter"===d.type)&&d.update||{}}function F(e){const{dateValue:t,timestamp:n,userTimeZone:o}=e;if("date"===t.type)return{...m().p6(n,o),reminder:t.reminder};if("datetime"===t.type)return{...m().KQ(n,o),reminder:t.reminder};if("daterange"===t.type){const e=m().HF(p().tq(t),o).valueOf(),i=m().HF(p().Wq(t),o).valueOf()-e;return{...m().Mk(n,n+i,o),reminder:t.reminder}}if("datetimerange"===t.type){const e=m().mF(p().S6(t)).valueOf(),i=m().mF(p().S6(t)).valueOf()-e;return{...m().NC(n,n+i,o),reminder:t.reminder}}(0,i().HB)(t)}const V={text:function(e){const{filter:t,value:n}=e;if("is_empty"===t.operator)return{type:"text",value:void 0};if("is_not_empty"===t.operator)return;if("string_has_no_alphabet_prefix"===t.operator)return;const o=(t.value.value||"").trim();return"string_is_not"===t.operator||"string_does_not_contain"===t.operator?{type:"text",value:void 0}:"string_is"===t.operator?{type:"text",value:o}:"string_contains"===t.operator||"string_ends_with"===t.operator?{type:"text",value:(n.value||"")+o}:"string_starts_with"===t.operator?{type:"text",value:o+(n.value||"")}:void(0,i().HB)(t.operator)},checkbox:function(e){const{filter:t}=e,n=t.value;return"checkbox_is"===t.operator?{type:"checkbox",value:Boolean(n.value)}:"checkbox_is_not"===t.operator?{type:"checkbox",value:!Boolean(n.value)}:void(0,i().HB)(t.operator)},select:function(e){var t;const{filter:n,propertySchema:o}=e;if("is_empty"===n.operator)return{type:"select",value:void 0};if("is_not_empty"===n.operator)return{type:"select",value:o.options&&o.options.length>0?o.options[0].value:void 0};const r=null===(t=(0,a().Zl)(n)[0])||void 0===t?void 0:t.value;return void 0!==r?"enum_is"===n.operator?{type:"select",value:r}:"enum_is_not"===n.operator?{type:"select",value:void 0}:void(0,i().HB)(n.operator):void 0},multi_select:function(e){var t;const{filter:n,propertySchema:o,value:r}=e;if("is_empty"===n.operator)return{type:"multi_select",value:void 0};if("is_not_empty"===n.operator)return{type:"multi_select",value:o.options&&o.options.length>0?[o.options[0].value]:void 0};const s=null===(t=(0,a().SM)(n)[0])||void 0===t?void 0:t.value;if(void 0===s)return;const l=r.value||[];if("enum_contains"===n.operator)return{type:"multi_select",value:[...l,s]};if("enum_does_not_contain"===n.operator)return{type:"multi_select",value:l.filter((e=>e!==s))};if("enum_contains_all"===n.operator)throw new Error("enum_contains_all not supported for block coercion");(0,i().HB)(n.operator)},status:function(e){const{filter:t,propertySchema:n}=e,o=n.groups??[],r=n.options??[];if("is_empty"===t.operator)return{type:"status",option:void 0,group:void 0};if("is_not_empty"===t.operator)return{type:"status",option:n.options&&n.options.length>0?n.options[0].value:void 0,group:n.groups&&n.groups.length>0?n.groups[0].name:void 0};const s=(0,a().V6)(t);if(0===s.length)return;const l=o.map((e=>{const t=r.filter((t=>{var n;return null===(n=e.optionIds)||void 0===n?void 0:n.includes(t.id)}));return{group:e,groupOptions:t}}));if("status_is"===t.operator){const{type:e,value:t}=s[0];if("is_group"===e){var c;const e=o.findIndex((e=>e.name.toLowerCase()===(null==t?void 0:t.toLowerCase()))),n=e>=0?l[e]:void 0;return{type:"status",group:null==n?void 0:n.group.name,option:null==n||null===(c=n.groupOptions[0])||void 0===c?void 0:c.value}}if("is_option"===e){const e=r.find((e=>e.value===t)),n=e&&o.find((t=>{var n;return null===(n=t.optionIds)||void 0===n?void 0:n.includes(e.id)}));return{type:"status",group:null==n?void 0:n.name,option:null==e?void 0:e.value}}(0,i().HB)(e)}if("status_is_not"===t.operator)return{type:"status",group:void 0,option:void 0};(0,i().HB)(t.operator)},relation:function(e){var t;const{filter:n,value:o,propertySchema:r,relativeVariableResult:s,currentPageInRelatedCollection:l}=e;if("is_empty"===n.operator)return{type:"relation",value:void 0};if("is_not_empty"===n.operator)return;const c=(0,a().Rh)(n),d=null===(t=c[0])||void 0===t?void 0:t.type;let u;var p;if("exact"===d)u=null===(p=c[0])||void 0===p?void 0:p.value;else if("relative"===d){var m,g,f;const e=null===(m=r.collection_pointer)||void 0===m?void 0:m.id;if(!e||!s)return;var v,h;if("builtin"===(null===(g=c[0])||void 0===g?void 0:g.value.type))u=null==s||null===(v=s[e])||void 0===v?void 0:v[null===(h=c[0])||void 0===h?void 0:h.value.variable];else"current_page_in_related_collection"===(null===(f=c[0])||void 0===f?void 0:f.value.type)&&(u=l)}if(void 0===u)return;const _=o.value||[];return"relation_contains"===n.operator?{type:"relation",value:[..._,{id:u,table:S().ev,spaceId:0!==_.length?_[0].spaceId:void 0}]}:"relation_does_not_contain"===n.operator?{type:"relation",value:_.filter((e=>e.id!==u))}:void(0,i().HB)(n.operator)},person:function(e){const{filter:t,userFilterContext:n,value:r}=e,{userId:s}=n;if("is_empty"===t.operator)return{type:"person",value:void 0};if("is_not_empty"===t.operator)return s?{type:"person",value:[{table:w().oo,id:s}]}:void 0;const l=(0,a().Wf)(t)[0];if(!l)return;const c=(0,a().Xz)({operatorValue:l,userId:s});if(void 0===c)return;const d=r.value||[];return"person_contains"===t.operator?{type:"person",value:[...d,c]}:"person_does_not_contain"===t.operator?{type:"person",value:d.filter((e=>!o().n4(e,c)))}:void(0,i().HB)(t.operator)},number:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"number",value:void 0};if("is_not_empty"===t.operator)return{type:"number",value:0};const n=t.value.value;return void 0===n||o().yr(n)?void 0:"number_equals"===t.operator||"number_greater_than_or_equal_to"===t.operator||"number_less_than_or_equal_to"===t.operator?{type:"number",value:n}:"number_less_than"===t.operator?{type:"number",value:n-1}:"number_greater_than"===t.operator?{type:"number",value:n+1}:"number_does_not_equal"===t.operator?{type:"number",value:void 0}:void(0,i().HB)(t.operator)},date:function(e){const{filter:t,userFilterContext:n,value:o}=e,{userTimeZone:r,userStartOfWeek:s}=n;if("is_empty"===t.operator)return{type:"date",value:void 0};if("is_not_empty"===t.operator)return{type:"date",value:m().Ec(r)};const l=o.value;if((0,a().Cw)(t)){const e=(0,a().At)({operatorValue:t.value,userTimeZone:r,userStartOfWeek:s});if(void 0===l){const t=m().Ec(r),n=m().AA(t,r).start.valueOf();return void 0!==e.start&&void 0!==e.end&&n>=e.start&&n<=e.end?{type:"date",value:t}:void 0!==e.start?{type:"date",value:m().p6(e.start,r)}:void 0!==e.end?{type:"date",value:m().p6(e.end,r)}:void 0}const n=m().AA(l,r).start.valueOf();return void 0!==e.end&&n>e.end?{type:"date",value:F({dateValue:l,timestamp:e.end,userTimeZone:r})}:void 0!==e.start&&n<e.start?{type:"date",value:F({dateValue:l,timestamp:e.start,userTimeZone:r})}:void 0}const c=t.value,d=(0,a().$Q)({operatorValue:c,userTimeZone:r});if(void 0!==d){if("date_is"===t.operator||"date_is_on_or_before"===t.operator||"date_is_on_or_after"===t.operator)return l?{type:"date",value:F({dateValue:l,timestamp:d,userTimeZone:r})}:{type:"date",value:m().p6(d,r)};if("date_is_before"===t.operator){const e=m().K1({date:d,daysToAdd:-1});return l?{type:"date",value:F({dateValue:l,timestamp:e,userTimeZone:r})}:{type:"date",value:m().p6(e,r)}}if("date_is_after"===t.operator){const e=m().K1({date:d,daysToAdd:1});return l?{type:"date",value:F({dateValue:l,timestamp:e,userTimeZone:r})}:{type:"date",value:m().p6(e,r)}}(0,i().HB)(t.operator)}},file:function(e){const{filter:t}=e;if("is_empty"===t.operator)return{type:"file",value:void 0};"is_not_empty"!==t.operator&&(0,i().HB)(t)},location:()=>{},verification:function(e){const{filter:t}=e;if("verification_is"===t.operator)return{type:"verification",value:void 0};"verification_is_not"!==t.operator&&(0,i().HB)(t.operator)},geo_point:()=>{}};function j(e){const{filter:t,block:n,schema:o,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,intl:p,resultCache:m,regExpCache:g,experimentService:f}=e,{userId:v,userTimeZone:_,userStartOfWeek:y}=l,k=t.filters||[];if(0===k.length)return{type:"passesFilter"};if((0,a().oR)({context:{schema:o,userId:v,userTimeZone:_,userStartOfWeek:y,relativeVariableResult:c,currentPageInRelatedCollection:d,intl:p,collectionFeatureGates:(0,r().v)({experimentService:f,actor:v?{table:w().oo,id:v}:void 0,spaceId:n.spaceId})},propertyMapping:s,filter:t})({block:n,getRecordModel:u,propertyMapping:s,resultCache:m,regExpCache:g,experimentService:f,formulasModule:void 0}))return{type:"passesFilter"};if("or"===t.operator){const e=k.map((e=>(0,a().yX)(e)?z({intl:p,block:n,schema:o,propertyMapping:s,property:e.property,filter:e.filter,userFilterContext:l,getRecordModel:u,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:g,experimentService:f}):(0,a().LB)(e)?{type:"failsFilter"}:(0,a().dU)(e)?j({filter:e,intl:p,block:n,schema:o,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:u,resultCache:m,regExpCache:g,experimentService:f}):void(0,i().HB)(e)));if(e.some((e=>"passesFilter"===e.type)))return{type:"passesFilter"};const t=e.find((e=>"coercedByFilter"===e.type));return t||(e.find((e=>"failsFilter"===e.type))||{type:"failsFilter"})}const I=[...k];I.reverse();let x="passesFilter";const A={};let T=n;const M=h().b4_.tryUntilFound(h().b4_.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:n}=e;if(t===S().ev&&n===T.id)return T}),b().xb.fromMonomorphicFunctionUnsafe((e=>{let{table:t,id:n}=e;if(t===S().ev&&n===T.id)return T.__IM_SORRY__getValue()}))),u);for(const i of I){if((0,a().LB)(i))continue;const e=(0,a().yX)(i)?z({intl:p,block:T,schema:o,propertyMapping:s,property:i.property,filter:i.filter,userFilterContext:l,getRecordModel:M,relativeVariableResult:c,currentPageInRelatedCollection:d,resultCache:m,regExpCache:g,experimentService:f}):j({filter:i,intl:p,block:T,schema:o,propertyMapping:s,userFilterContext:l,relativeVariableResult:c,currentPageInRelatedCollection:d,getRecordModel:M,resultCache:m,regExpCache:g,experimentService:f});"coercedByFilter"===e.type&&"passesFilter"===x&&(x="coercedByFilter"),"failsFilter"===e.type&&(x="failsFilter"),("coercedByFilter"===e.type||"failsFilter"===e.type&&e.update)&&(Object.assign(A,e.update),T=C(n,A))}return"passesFilter"===x?{type:x}:{type:x,update:A}}function z(e){const{filter:t,block:n,property:o,schema:i,propertyMapping:l,userFilterContext:c,getRecordModel:u,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:g,resultCache:f,regExpCache:v,experimentService:h}=e,{userId:_,userTimeZone:b,userStartOfWeek:y}=c;if((0,a().ts)({context:{schema:i,userId:_,userTimeZone:b,userStartOfWeek:y,relativeVariableResult:p,currentPageInRelatedCollection:m,intl:g,collectionFeatureGates:(0,r().v)({experimentService:h,actor:_?{table:w().oo,id:_}:void 0,spaceId:n.spaceId})},filter:t,property:o,propertyMapping:l,depth:0})({block:n,getRecordModel:u,propertyMapping:l,resultCache:f,regExpCache:v,experimentService:h,formulasModule:void 0}))return{type:"passesFilter"};if((0,a().s1)(t))return{type:"failsFilter"};const S=(null==l?void 0:l[o])??o,k=i[S];if(!k)return{type:"failsFilter"};if(!(0,s().tI)(k))return{type:"failsFilter"};const I=(0,s().IS)(k.type),x=(0,s().hz)({filterValueType:I,block:n,propertyValue:d().yQ(n,S,u),propertySchema:k,getRecordModel:u,collectionRequestContext:{userId:_,userTimeZone:b,intl:g,depth:0,visitedProperties:new Set,resultCache:f,regExpCache:v,experimentService:h,collectionFeatureGates:(0,r().v)({experimentService:h,actor:_?{table:w().oo,id:_}:void 0,spaceId:n.spaceId})},skipDefault:!0}),A=(0,V[I])({filter:t,value:x,propertySchema:k,userFilterContext:c,relativeVariableResult:p,currentPageInRelatedCollection:m});if(void 0===A)return{type:"failsFilter"};return{type:"coercedByFilter",update:{[S]:(0,s().bv)({propertyType:k.type,filterValue:A})}}}function H(e,t){const n=e.name.trim().toLowerCase(),i=t.name.trim().toLowerCase(),r=o().Nt(n),a=new RegExp(`^${r}( [0-9]*)?$`,"g"),s=o().Nt(i),l=i?new RegExp(`^${s}( [0-9]*)?$`,"g"):void 0;return Boolean(i.match(a)||l&&n.match(l))}function W(e){const{blockProperties:t,oldSchema:n,newSchema:o,typesMatch:i,oldPropertyMapping:r,newPropertyMapping:a}=e,s=Object.keys(n),l=Object.keys(o),c=function(e){const{blockProperties:t,oldSchema:n,newSchema:o}=e,i={},r=null==t?void 0:t.title,a=I().Fbh(r),[s]=I().Cok(r),{person:[l],date:[c]}=x(o),{person:[d],date:[u]}=x(n);if(l&&(null==t||!t[l])&&!d&&a.length>0){const e=Array.from(new Set(a));i[l]=(0,v().A)(e.map((e=>I().wmz(I().P4h(e)))),(()=>A))}return!c||null!=t&&t[c]||u||!s||(i[c]=[I().wmz(I().Ww9(s))]),i}({blockProperties:t,oldSchema:n,newSchema:o}),d={propertyUpdate:c,newSchema:o},p=["relation","auto_increment_id","verification"];for(const m of s){const e=n[m],s=null==t?void 0:t[m];if(e&&!p.includes(e.type)){if(i){const e=u().u9.derivePropertyUri(m,r),n=e?null==a?void 0:a[e]:void 0;if(n&&n!==m){d.propertyUpdate[n]=(null==t?void 0:t[m])||null,d.propertyUpdate[m]=null;continue}}if(s){const i=l.find((e=>m===e))||l.find((t=>{const n=o[t];if(void 0!==n&&e.type===n.type)return H(e,n)}));if(i&&d.propertyUpdate)i!==m&&(d.propertyUpdate[i]=t[m]||null,d.propertyUpdate[m]=null);else{const e=f().JW(),o=n[m];d.newSchema={...d.newSchema,[e]:o},d.propertyUpdate&&(d.propertyUpdate[e]=t[m]||null,d.propertyUpdate[m]=null)}}}}return d}function q(e){const{block:t,schema:n,property:r,oldValue:a,newValue:s}=e;if(void 0===a.value)return{};if(void 0===s.value)return{};const c=t.getProperties();if(!c)return{};const u=c[r];if(!u)return{};const p=n[r];if(!p)return{};if(!(0,l().Eg)(p))return{};if("status"===p.type||"select"===p.type||"multi_select"===p.type||"checkbox"===p.type)return function(e){const{propertySchema:t,property:n,oldValue:o,newValue:r,propertyValue:a}=e;if(void 0===o.value)return{};if(void 0===r.value)return{};if(!(0,l().Eg)(t))return{};if("select"===t.type){if("select"!==o.type||"select"!==r.type)return{};if(void 0===r.value)return{};const e=d().yH(a);return 0===e.length&&void 0===o.value||e.some((e=>(e||"").trim().toLowerCase()===(o.value||"").trim().toLowerCase()))?{[n]:d().U8(r.value)}:{}}if("multi_select"===t.type){if("multi_select"!==o.type||"multi_select"!==r.type)return{};if(void 0===r.value)return{};const e=d().yH(a);if(!e.some((e=>e.trim().toLowerCase()===(o.value||"").trim().toLowerCase())))return{};const t=r.value,i=e.map((e=>e.trim().toLowerCase()===(o.value||"").trim().toLowerCase()?t:e));return{[n]:d().rK(i)}}if("status"===t.type){const e=t.groups??[],i=t.options??[];if("checkbox"===o.type&&"status"===r.type){if(d().wu(a)!==o.value)return{};let t;if("by_group"===r.value.type){const n=r.value.group,o=e.find((e=>e.name===n)),a=i.find((e=>{var t;return e.id===(null==o||null===(t=o.optionIds)||void 0===t?void 0:t[0])}));t=null==a?void 0:a.value}else t=r.value.option;if(t)return{[n]:d().wb(t)}}var s;return"status"===o.type&&"status"===r.type?"by_option"!==o.value.type||"by_option"!==r.value.type||(null===(s=d().yH(a))||void 0===s?void 0:s[0])!==o.value.option?{}:{[n]:d().wb(r.value.option)}:{}}if("checkbox"===t.type)return"status"!==o.type||"checkbox"!==r.type||"by_option"!==o.value.type?{}:d().yH(a).includes(o.value.option)?{[n]:d().rN(r.value)}:{};(0,i().HB)(t)}({propertySchema:p,property:r,propertyValue:u,oldValue:a,newValue:s});if("person"===p.type){if("person"!==a.type||"person"!==s.type)return{};if(void 0===a.value)return{};if(void 0===s.value)return{};const e=s.value,n=a.value,i=h().Bj6.fromBlock(t),l=d().e5({textValue:u,propertySchema:p,blockCreatorPointer:i.getCreatedByPointer()});if(!l.some((e=>o().n4(e,n))))return{};const c=l.map((t=>o().n4(t,n)?e:t));return{[r]:d().AH(c)}}if("relation"===p.type){if("relation"!==a.type||"relation"!==s.type||void 0===a.value||void 0===s.value)return{};if((0,l().zx)(a.value)||(0,l().zx)(s.value))return{};const e=s.value,t=a.value,n=d().n(u);if(!n.some((e=>(0,y().Z2)(e,t))))return{};const o=n.map((n=>(0,y().Z2)(n,t)?e:n));return{[r]:d().Ap(o)}}if((0,l().Vs)(p.type)){if(a.type!==p.type||s.type!==p.type||void 0===a.value||void 0===s.value||"exact"!==a.value.type||"exact"!==s.value.type)return{};return I().q4_(u)!==a.value.value?{}:{[r]:(0,I().x9d)(s.value.value)}}if("date"===p.type||"number"===p.type||"formula"===p.type||"created_by"===p.type||"last_edited_by"===p.type||"created_time"===p.type||"last_edited_time"===p.type||"location"===p.type||"last_visited_time"===p.type)return{};(0,i().HB)(p.type)}function K(e){const{block:t,schema:n,property:o,groupBy:i,value:r,timeZone:s,intl:c,getRecordModel:d,resultCache:u,regExpCache:p,experimentService:g,collectionFeatureGates:f}=e,v=n[o];if(!v||!(0,l().Eg)(v)||t.is_template)return!1;const h=R({schema:n,propertyMapping:void 0,group:{property:o,value:r},groupBy:i,timeZone:s});if(!h)return!1;return(0,a().oR)({filter:{operator:"and",filters:[h]},propertyMapping:void 0,context:{schema:n,intl:c,userId:void 0,userTimeZone:"UTC",userStartOfWeek:(0,m().Lm)(),relativeVariableResult:void 0,currentPageInRelatedCollection:void 0,collectionFeatureGates:f}})({block:t,getRecordModel:d,propertyMapping:void 0,resultCache:u,regExpCache:p,experimentService:g,formulasModule:void 0})}const G={Todo:"To-do","To-do":"To-do","To do":"To-do","Not started":"To-do",Backlog:"To-do",Incomplete:"To-do",Waiting:"To-do","On hold":"To-do",Later:"To-do",Blocked:"To-do","In progress":"In progress",Building:"In progress",Designing:"In progress",Research:"In progress",Scoping:"In progress",Planning:"In progress","Needs review":"In progress",Reviewed:"In progress",Review:"In progress",Pending:"In progress",Recurring:"In progress","Review needed":"In progress","Edits needed":"In progress",Editing:"In progress",Complete:"Complete",Completed:"Complete",Done:"Complete",Finished:"Complete",Archive:"Complete",Archived:"Complete",Deleted:"Complete",Published:"Complete",Reverted:"Complete"};function $(e,t,n){var i;const r=(0,c().D)(e,n),a=r.groups??[],s=r.options??[],l=o().d4(G,((e,t)=>t.toLowerCase())),d=new Set,u=new Set;for(const o of t){const e=s.findIndex((e=>e.value.toLowerCase()===o.value.toLowerCase()));if(e>-1){const t=s[e];if(!d.has(t.id)){u.add(o.id),d.add(t.id),s[e]={...o,id:t.id};continue}}const t=l[o.value.toLowerCase()],n=a.find((e=>e.name===t));var p;if(n)null===(p=n.optionIds)||void 0===p||p.push(o.id),u.add(o.id)}for(const[o,c]of a.entries()){var m;const e=null===(m=c.optionIds)||void 0===m?void 0:m.some((e=>u.has(e)));c.optionIds=(c.optionIds??[]).filter((t=>!(!u.has(t)&&!d.has(t))||!e))}null==a||null===(i=a[0].optionIds)||void 0===i||i.push(...t.filter((e=>!u.has(e.id))).map((e=>e.id)));const g=[...s,...t],f=[];for(const o of a)for(const e of o.optionIds??[]){const t=g.find((t=>t.id===e));t&&f.push(t)}return{type:"status",name:e,groups:a,options:f}}},592678:(e,t,n)=>{n.d(t,{Mb:()=>s,Qn:()=>l,Vt:()=>d,Zm:()=>c,tC:()=>i});var o=()=>n(522945);const i={mouse:6,finger:0,stylus:6},r=3,a=4;function s(e){return e.button===r||e.button===a}function l(e){return e&&"stylus"===e.touchType?"stylus":"finger"}function c(){return o().$C.moved}function d(e){return!!e.isTrusted&&c()}},594013:(e,t,n)=>{n.d(t,{EZ:()=>s,Iw:()=>h,ZS:()=>l,o_:()=>d,tH:()=>g});n(898992),n(354520);var o=()=>n(708685),i=()=>n(921598),r=()=>n(713998),a=()=>n(499755);function s(e){let{collectionSchema:t,axisChartType:n}=e;const o=c({collectionSchema:t});if(!o)return;const i=d({property:o,collectionSchema:t,hideEmptyGroups:!1});if(!i)return;const r="formula"===i.type?i.groupBy.sort:i.sort;let s="column";switch(n){case"bar":s="bar";break;case"line":s="line";break;case"column":case void 0:s="column"}return{chartFormat:{axisHideEmptyGroups:i.hideEmptyGroups,mainSort:(0,a().gN)(r)},type:n??"column",dataConfig:{type:"groups_reducer",groupBy:i,aggregationConfig:{aggregation:{aggregator:"count"},seriesFormat:{displayType:s},stackOptions:void 0}}}}function l(e){let{collectionSchema:t}=e;const n=c({collectionSchema:t});if(!n)return;const o=d({property:n,collectionSchema:t,hideEmptyGroups:!0});if(!o)return;const i=(0,r()._g)({schema:t,property:n});if(!i)return;const s="formula"===o.type?o.groupBy.sort:o.sort;return{chartFormat:{axisHideEmptyGroups:o.hideEmptyGroups,mainSort:i&&(0,a().e0)(i)?a().S0.yDescending:(0,a().gN)(s)},type:"donut",dataConfig:{type:"groups_reducer",groupBy:o,aggregationConfig:{aggregation:{aggregator:"count"}}}}}function c(e){let{collectionSchema:t}=e;return Object.keys(t).filter((e=>{const n=(0,r()._g)({schema:t,property:e});return!!n&&(0,i().Eg)(n)})).sort(((e,n)=>function(e,t,n){const o=(0,r()._g)({schema:n,property:e}),a=(0,r()._g)({schema:n,property:t});if(!(o&&(0,i().rj)(o.type)&&a&&(0,i().rj)(a.type)))return 0;const s=u[o.type],l=u[a.type];return void 0===s||void 0===l?0:s-l}(e,n,t)))[0]}function d(e){let{property:t,collectionSchema:n,hideEmptyGroups:a}=e;const s=(0,r()._g)({schema:n,property:t});if(s&&(0,i().Eg)(s)){if((0,i()._o)(s.type))return{type:s.type,property:t,groupBy:"day",sort:{type:"ascending"}};if("number"===s.type)return{type:s.type,property:t,groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}};if("formula"===s.type){const e=(0,o().getFormulaPropertySchemaResultType)(s);if("number"===e)return{type:"formula",property:t,groupBy:{type:"number",groupBy:{type:"unique"},start:-1,end:-1,size:-1,sort:{type:"ascending"}}};if("date"===e)return{type:s.type,property:t,groupBy:{type:"date",groupBy:"day",sort:{type:"ascending"}}}}return(0,i().V0)({property:t,propertySchema:s,hideEmptyGroups:a})}}const u={select:0,multi_select:0,status:0,date:1,number:1,person:1,relation:2,checkbox:3,created_time:3,created_by:3,last_edited_by:3,last_edited_time:3,last_visited_time:3,text:3,title:3,url:4,email:4,phone_number:4,formula:5},p=["title","text"];function m(e){return p.includes(e)}function g(e){if("formula"===e.type){const t=(0,o().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&m(t)}return m(e.type)}const f=["number"];function v(e){return f.includes(e)}function h(e){if("formula"===e.type){const t=(0,o().getFormulaPropertySchemaResultType)(e);return"array"!==t&&"block"!==t&&"unknown"!==t&&v(t)}return v(e.type)}},594607:(e,t,n)=>{n.d(t,{B:()=>c,U:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(351360),a=()=>n(508496),s=n(474848);function l(e){const{calloutId:t,children:n,onShow:a,onHide:l}=e,c=(0,i().K8)((()=>r().default.state.inAppCalloutStore),[]);return(0,o.useEffect)((()=>(c.updateCalloutStatus({calloutId:t,visible:!0}),null==a||a(),()=>{c.updateCalloutStatus({calloutId:t,visible:!1}),null==l||l()})),[t,c,a,l]),(0,s.jsx)(s.Fragment,{children:n})}function c(e){const{calloutId:t,shouldShow:n,children:l,onShow:c,onHide:d}=e,u=(0,i().K8)((()=>r().default.state.inAppCalloutStore),[]),p=(0,i().K8)((()=>!u.getCalloutVisibility(t).canShow),[t,u]),m=(0,i().K8)((()=>a().default.isStatsigReady()),[]),g=(0,o.useMemo)((()=>n&&!p&&m),[p,n,m]);return(0,o.useEffect)((()=>{if(g)return u.updateCalloutStatus({calloutId:t,visible:!0,validateCanShow:!0}),()=>{u.updateCalloutStatus({calloutId:t,visible:!1})}}),[t,u,g]),(0,o.useEffect)((()=>{if(g)return null==c||c(),()=>{null==d||d()}}),[g]),g?(0,s.jsx)(s.Fragment,{children:l}):null}},594635:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue(!1)},594739:(e,t,n)=>{n.d(t,{A:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(790748),a=()=>n(401497),s=()=>n(959013),l=()=>n(100622),c=()=>n(284371),d=()=>n(575301),u=()=>n(494237),p=()=>n(521099),m=()=>n(704152),g=()=>n(177158),f=n(474848);function v(e){const{onDismiss:t,inputRef:n}=e,v=(0,i().Y0)(),h=(0,a().DP)(),_=(0,o.useRef)(null),b=v.isMobileNative&&v.isIOS,y=b&&e.show;(0,r().b)(u().A,(()=>({getNode:()=>_.current,isShown:()=>y})),[y]);const S=(0,d().o_)(),w=(0,o.useCallback)((()=>{var e;null==n||null===(e=n.current)||void 0===e||e.focus(),t&&t();const o=document.activeElement;o instanceof HTMLElement&&o.blur()}),[n,t]);if(!b)return null;const k=y?-(p().j+S):0;return(0,f.jsx)(g().A,{open:!0,children:(0,f.jsx)("div",{style:{position:"fixed",top:"100vh",width:"100%",height:p().j,display:y?"flex":"none",alignItems:"center",justifyContent:"flex-end",backgroundColor:h.keyboardDoneBarBackground,transform:`translateY(${k}px)`,transition:y?"ease-out":"ease-in",boxShadow:y?`\n\t\t\t\t\t\t\t\t0 -1px 0 ${h.darkDividerColor}\n\t\t\t\t\t\t\t`:void 0},ref:_,children:(0,f.jsx)(m().A,{mobileFeedback:!0,style:{display:"flex",alignItems:"center",marginRight:16,color:l().Ay.blue,fontWeight:c().Wy.semibold},onClick:w,children:(0,f.jsx)(s().sA,{defaultMessage:"Done",id:"mobile.dismissKeyboardBar.button.label"})})})})}},594794:(e,t,n)=>{n.d(t,{Gx:()=>g,JH:()=>m,Z1:()=>u,zP:()=>p});var o=()=>n(17022),i=()=>n(206267),r=()=>n(696706),a=()=>n(628536),s=()=>n(999202),l=()=>n(671887),c=()=>n(520348);function d(e,t){(0,s().W)(e,"idschema_client","idschema_client",3600,t)}function u(e){const{environment:t,table:n,spaceId:r}=e;return o().A.withListenerIgnored((()=>{if(!(0,a().ep)(n))return t.idCreator.idInMain(n);if(!r)return d(t,{has_short_id:!1,has_spaceid:!1}),i().JW();const e=l().D.getState();if(e&&r in e){const o=e[r];return d(t,{has_short_id:!0,has_spaceid:!0,debug_msg:"localStorage"}),t.idCreator.idWithSpaceShortId(Number(o),n)}const o=(0,c().Jn)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:r});return o&&o.short_id_str?(d(t,{has_short_id:!0,has_spaceid:!0}),t.idCreator.idWithSpaceShortId(Number(o.short_id_str),n)):(d(t,{has_short_id:!1,has_spaceid:!0}),i().JW())}))}function p(e){const{environment:t,table:n,spaceId:o}=e;return r().L3.fromPointerLike({table:n,id:u({table:n,spaceId:o,environment:t}),spaceId:o})}function m(e){const{environment:t,table:n,spaceId:o}=e;return{table:n,id:u({table:n,spaceId:o,environment:t}),spaceId:o}}function g(e){const{environment:t,spaceId:n}=e;if(void 0===n)return;const o=(0,c().Jn)({defaultRecordCache:t.defaultRecordCache,userId:t.currentUser.id,spaceId:n});return o&&o.short_id_str?Number(o.short_id_str):void 0}},595985:(e,t,n)=>{n.d(t,{A:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);var o=()=>n(756279);class i extends(()=>n(757695))().default{getInitialState(){return{capturingAreas:new Set}}getPreventScrollType(){let e=!1,t=!1,n=!1;return this.state.capturingAreas.forEach((i=>{i.preventType===o().A.All?e=!0:i.preventType===o().A.X?t=!0:i.preventType===o().A.Y&&(n=!0)})),e||t&&n?o().A.All:t?o().A.X:n?o().A.Y:o().A.None}}const r=new i},596513:(e,t,n)=>{n.d(t,{J:()=>r,t:()=>i});n(16280),n(581454);var o=()=>n(244641);const i=new(n(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:o}=t;if(o.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(n.bind(n,449506)),a=await i.callApi({eventName:"getBillingData",environment:e,data:{spaceId:o},headers:(0,n(386164).WS)({cellId:void 0,spaceId:o})});if("success"===a.type&&a.data.billingData)return r(a.data.billingData)}));function r(e){return"admin"===e.type?{type:e.type,externalId:e.externalId,email:e.email,address:e.address,provider:e.provider,clock:{now:o().c9.fromISO(e.clock.now),externalId:e.clock.externalId},paymentMethod:e.paymentMethod,invoices:e.invoices.map((e=>({externalId:e.externalId,status:e.status,paymentIntent:e.paymentIntent,overrides:e.overrides,externalSubscriptionId:e.externalSubscriptionId,dueDate:e.dueDate?o().c9.fromISO(e.dueDate):void 0,createdAt:o().c9.fromISO(e.createdAt)}))),trial:e.trial?{externalId:e.trial.externalId,items:e.trial.items,startDate:o().c9.fromISO(e.trial.startDate),endDate:o().c9.fromISO(e.trial.endDate)}:void 0,subscription:e.subscription?{externalId:e.subscription.externalId,status:e.subscription.status,items:e.subscription.items,unrepresentableReason:e.subscription.unrepresentableReason,startDate:o().c9.fromISO(e.subscription.startDate),trialEnd:e.subscription.trialEnd?o().c9.fromISO(e.subscription.trialEnd):void 0,currentPeriodEnd:o().c9.fromISO(e.subscription.currentPeriodEnd),pending:e.subscription.pending?{items:e.subscription.pending.items,startDate:o().c9.fromISO(e.subscription.pending.startDate)}:void 0}:void 0,lockedCurrencyCode:e.lockedCurrencyCode,taxIds:e.taxIds,accountBalances:e.accountBalances}:{type:e.type,provider:e.provider,subscription:e.subscription?{...e.subscription,trialEnd:e.subscription.trialEnd?o().c9.fromISO(e.subscription.trialEnd):void 0}:void 0,trial:e.trial?{...e.trial,endDate:o().c9.fromISO(e.trial.endDate)}:void 0}}n(604341).exposeDebugValue("TypedBillingDataStore",i)},596514:(e,t,n)=>{n.d(t,{A:()=>b});var o=n(296540),i=()=>n(847249),r=()=>n(799954),a=()=>n(700500),s=()=>n(959013),l=()=>n(100622),c=()=>n(246826),d=()=>n(751156),u=()=>n(753199),p=()=>n(891078),m=()=>n(24157),g=()=>n(219839),f=()=>n(614505),v=n(474848);const h=(0,s().YK)({inputPlaceholder:{defaultMessage:"Type something…",id:"calloutBlock.inputPlaceholder"},changeIconLabel:{defaultMessage:"Change callout icon",id:"calloutBlock.changeIconLabel"},disabledIconLabel:{defaultMessage:"Callout icon",id:"calloutBlock.disabledIconLabel"}});function _(e,t){const _=(0,n(484714).v3)(),b=(0,s().tz)(),y=(0,o.useRef)(null),S=(0,p().bx)(e.store,e.disabled),w=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),k=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),I=(0,i().K8)((()=>e.store.getFormat().block_color||"default"),[e.store]),x=(0,i().K8)((()=>e.store.getIcon()),[e.store]),A=(0,i().K8)((()=>e.store.isCalloutV2()),[e.store]),C=(0,o.useCallback)((async t=>{const o=e.store.getIconStore();if(!o)return;const{serverCommitResult:i}=d().createAndCommit({userAction:"CalloutBlock.handleEmojiChange",environment:_,canUndo:!0,perform:e=>{var i;c().KY({store:o,value:t,transaction:e}),"url"!==(null===(i=(0,n(651124).WO)(t))||void 0===i?void 0:i.type)&&n(763884).K.set({userId:_.currentUser.id,key:n(492696).c,value:t??""})}});await i}),[_,e.store]),T=(0,o.useCallback)((()=>{if(!n(508496).default.checkGate({gateName:"migrate_callout_to_v2_on_click"}))return;if(A)return;if(!S)return;let t,o,i,r;"editing"===m().default.state.mode&&(t=m().default.state.multiSelection.start.store,o=m().default.state.multiSelection.end.store,i=m().default.state.multiSelection.start.index,r=m().default.state.multiSelection.end.index);const s=t===e.store.getBlockTitleStore(),l=o===e.store.getBlockTitleStore();d().createAndCommit({userAction:"CalloutBlock.upgradeFromV1ToV2",environment:_,canUndo:!0,perform:t=>{const o=c().Wv({environment:_,type:a().xd.text,inMemoryRecordCache:_.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:e.store.pointer.spaceId,properties:{title:e.store.getBlockTitleStore().getValue()}});n(44729).Ti({parentStore:e.store,childStore:o,transaction:t}),n(896628).zA({stores:[e.store],transaction:t,update:{callout_version:2}}),n(319975).R9({environment:_,store:e.store.getBlockTitleStore(),value:[],transaction:t})}}),(s||l)&&void 0!==t&&void 0!==i&&void 0!==o&&void 0!==r&&n(908006).default.afterNextFlush((()=>{var a;const c=null===(a=e.store.getContentStores())||void 0===a?void 0:a[0].getBlockTitleStore();n(725614).setMultiSelection({multiSelection:{start:{store:s?c:t,index:i},end:{store:l?c:o,index:r}}})}))}),[S,_,A,e.store]),M=(0,n(401497).IS)((e=>({root:{display:"flex",width:"100%",borderRadius:4,border:(0,l().Cg)(I)&&"default_background"!==I?"1px solid transparent":`1px solid ${e.darkDividerColor}`,backgroundColor:"transparent",paddingLeft:x?12:20,paddingTop:A?12:16,paddingBottom:A?12:16,paddingRight:20,...(0,l().ed)(I,e)}})),[I,A,x]),{blockInsetRight:P}=(0,o.useContext)(g().n),B=(0,i().K8)((()=>{var t;return null===(t=(0,n(108944).fA)(e.store))||void 0===t?void 0:t.getFormat().page_small_text}),[e.store]),R=(0,i().K8)((()=>{var t;return null===(t=e.store.getContentStores())||void 0===t?void 0:t[0]}),[e.store]),E=(0,i().K8)((()=>null==R?void 0:R.getType()),[R]),D=(0,o.useMemo)((()=>{if(A)return E===a().xd.header?B?8:10:E===a().xd.subHeader?B?4:6:E===a().xd.subSubHeader?B?2:3:B?3:4}),[A,E,B]),N=(0,v.jsx)(n(852302).l,{children:(0,v.jsxs)("div",{role:"note",style:{display:"flex"},ref:y,onClick:t=>{T(),!e.store.hasContent()&&A&&(0,u().SQ)({event:t,context:u().y$.EditorClick,callback:()=>{S&&!(0,n(592678).Vt)(t)&&d().createAndCommit({userAction:"CalloutBlock.handleEmptyClick",environment:_,canUndo:!0,perform:t=>{n(324089)._N({environment:_,store:e.store,transaction:t})}})}})},children:[(0,v.jsxs)("div",{style:{...e.style,...M.root},children:[void 0!==x&&(0,v.jsx)("div",{style:{marginTop:D},children:(0,v.jsx)(n(155004).s,{allowSelectionWithin:!1,children:S?(0,v.jsx)(f().B,{bucket:"secure",store:e.store,isEmptyPage:!1,onChange:C,isCallout:!0,icon:x,size:24,disabled:!1,label:b.formatMessage(h.changeIconLabel)}):(0,v.jsx)(f().B,{icon:x,isEmptyPage:!1,size:24,disabled:!0,label:b.formatMessage(h.disabledIconLabel)})})}),(0,v.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,marginLeft:x?8:void 0,width:"100%",minHeight:A?32:void 0},children:[!A&&(0,v.jsx)(n(524702).A,{style:{paddingLeft:r().nE.paddingLeft,paddingRight:r().nE.paddingRight},disabled:e.disabled,store:w,placeholder:b.formatMessage(h.inputPlaceholder),pasteBehavior:"block",inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),!e.hideContent&&(0,v.jsx)(g().n.Provider,{value:{blockInsetRight:P+M.root.paddingRight},children:(0,v.jsx)(n(493733).A,{disabled:e.disabled,placeholder:e.placeholder,store:k,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableFirstItemHoverMenu:A,disableDrag:e.disableDrag})})]})]}),(0,v.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,hideIfSidebarOrMarginCommentsVisible:!0})]})});return(0,p().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"callout",getNode:()=>y.current,getBlockStore:()=>e.store})),[e.store]),N)}const b=o.memo(o.forwardRef(_),n(821062).A)},597368:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,items:[],showCancel:!0,keepFocus:!1}}}const i=new o},597755:(e,t,n)=>{n.d(t,{A:()=>a,P:()=>r});var o=()=>n(530199),i=()=>n(939768);function r(e){const t=(0,i().qg)(e);return t.query[o().xu]="true",(0,i().Gm)({url:(0,i().GP)(t),query:t.query,hash:t.hash||void 0})}function a(e){const t=(0,i().qg)((0,i().ZO)(e));return t.query[o().uu]="true",(0,i().Gm)({url:(0,i().GP)(t),query:t.query,hash:t.hash||void 0})}},599364:(e,t,n)=>{n.d(t,{LN:()=>c,ko:()=>l,oc:()=>s});var o=()=>n(857639),i=()=>n(742852),r=()=>n(878377),a=()=>n(416726);const s=(0,a().Ls)({key:"copy link to page",displayName:a().AY.copyLinkNavigableTypeName,analyticsName:a().AY.copyLinkNavigableTypeName.defaultMessage,svg:i().w,validators:[r().M3g,r().vXb,r()._fc,r().AU6(r().i6S),r().AU6(r().oy3)],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,n)=>{let{lazyDependencies:i,...r}=t;const{clipboardActions:a}=i;a?a.copyLinkToBlock({...r,event:n,callback:e}):o().log({data:{miscDataToConvertToString:{actionKey:"copy link to page"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),l=(0,a().Fw)({key:"copy link to block",displayName:a().AY.copyLinkName,analyticsName:a().AY.copyLinkName.defaultMessage,svg:i().w,shortcuts:["copyLinkToBlock"],validators:[r().M3g,r().vXb,r().AU6(r()._fc),r().AU6(r().i6S),r().AU6(r().bdp),r().AU6(r().IuJ)],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,n)=>{let{lazyDependencies:i,...r}=t;const{clipboardActions:a}=i;a?a.copyLinkToBlock({...r,event:n,callback:e}):o().log({data:{miscDataToConvertToString:{actionKey:"copy link to block"}},from:"copyActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),c=(0,a().Ls)({key:"convert to link mention",displayName:a().AY.convertToLinkMentionName,analyticsName:a().AY.convertToLinkMentionName.defaultMessage,svg:n(3284).arrowSquarePathUpDownIcon,validators:[r().M3g,r().vXb,r().bLC("bookmark")],closeParentMenu:!0,action:(e,t)=>{n(443120).uS({...e,event:t})}})},599824:(e,t,n)=>{n.d(t,{E:()=>l});var o=()=>n(857639),i=()=>n(875856),r=()=>n(351360);const a=new Map;async function s(e,t){t.loggedIn&&await r().default.waitUntilRendered();const{callApi:a}=await Promise.resolve().then(n.bind(n,449506)),s=await a({eventName:"getUserAnalyticsSettings",environment:e,data:{}});if("success"!==s.type)return void o().log({level:"warning",from:"analyticsHelpers",type:"fetchAnalyticsSettings",data:{miscDataToConvertToString:{response:s}}});const l=s.data;return i().default.setState(l),l}async function l(e){const t=e.currentUser.id;if(t){if(!a.has(t)){const n=s(e,{loggedIn:!0});a.set(t,n),n.then((()=>{a.delete(t)})).catch((e=>{throw a.delete(t),e}))}return a.get(t)}return s(e,{loggedIn:!1})}},599945:(e,t,n)=>{n.d(t,{c:()=>c});n(296540);var o=()=>n(484714),i=()=>n(792485),r=()=>n(847249),a=()=>n(559378),s=()=>n(99042),l=n(474848);function c(e){let{children:t,store:n,step:c}=e;const d=(0,i().S)(),u=(0,o().v3)();return(0,r().K8)((()=>{const e=a().A.getCurrentStepBlockId(),t=d&&d.publicEditModeStore.state.hasPublicPermission;return!!(a().A.isActiveDemo()&&t&&null!=n&&n.id)&&(!u.device.isMobile&&e===n.id)}),[d,null==n?void 0:n.id,u.device.isMobile])?(0,l.jsx)(s().F,{step:c,children:t}):t}},600871:(e,t,n)=>{n.d(t,{GN:()=>m,LX:()=>u,Xi:()=>p,Xt:()=>g,cV:()=>c,mM:()=>f,my:()=>d,nh:()=>l});var o=()=>n(484714),i=()=>n(711059),r=()=>n(963589),a=()=>n(155959),s=()=>n(508496);let l=function(e){return e[e.Bottom=0]="Bottom",e[e.Floating=1]="Floating",e}({});function c(e){const{device:t}=e;return(0,r().X)("mobile_page_simplification")&&t.isPhone}function d(e){const{device:t}=e;return(0,r().X)("mobile_page_simplification_next")&&t.isMobile}function u(e){const{device:t}=e;return s().default.checkGate({gateName:"mobile_page_simplification"})&&t.isMobile}function p(e){const{environment:t}=e;return!t.device.isIOS&&!t.device.isAndroid}function m(){const{isIOS:e,isIpad:t}=(0,o().Y0)(),n=(0,r().X)("ios_number_property_mab");return e&&!t&&n}function g(e){const{device:t}=e,{isIOS:n,isIpad:o}=t;return n&&!o&&s().default.checkGate({gateName:"ios_number_property_mab"})}function f(e){var t;const{environment:n}=e;if(null===(t=n.mobileNative)||void 0===t||!t.api.openUpgradeModal)return!1;if((0,a().T)("supportsPlusIAP"))return!0;if(!n.device.isIOS)return!1;{if(!n.device.mobileAppVersion)return!1;const e=i().parseVersion(n.device.mobileAppVersion),t=i().parseVersion("0.4.165");if(!e||!t)return!1;return!i().isLessThanVersion(e,t)}}},601734:(e,t,n)=>{n.d(t,{Aw:()=>i,EU:()=>r,Nv:()=>s,t:()=>a});var o=()=>n(645873);const i=new(o().O2)("AppTemplates",(async()=>{const[{AppInitializationOverlay:e},t,o,i,r,{appConfigs:a},{default:s},{HorizontalTemplatePicker:l}]=await Promise.all([Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,965072)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,83027)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,767435)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,937943)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,925496)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,617254)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(28271),n.e(17254),n.e(41870),n.e(42120),n.e(67435),n.e(1213),n.e(78846),n.e(43741),n.e(93282),n.e(67780),n.e(96933),n.e(49157),n.e(63996),n.e(31517)]).then(n.bind(n,316091)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(22900),n.e(49889),n.e(97727),n.e(85128),n.e(83700),n.e(95555),n.e(58823),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(87598),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(45620),n.e(58221),n.e(44763),n.e(8081),n.e(67183),n.e(64598),n.e(82720),n.e(4253),n.e(86787),n.e(77465),n.e(24593),n.e(80896),n.e(1440),n.e(67378),n.e(58504),n.e(97308),n.e(63996),n.e(20636),n.e(66268),n.e(55717),n.e(7005),n.e(40186),n.e(22585),n.e(73206),n.e(11037),n.e(33235),n.e(91957),n.e(84176),n.e(16357),n.e(75681)]).then(n.bind(n,466529))]);return{AppInitializationOverlay:e,templatePickerItems:t,appTemplatesSetupActions:o,untypedFeaturesSetupActions:i,appTemplatesSprintBoardActions:r,appConfigs:a,TemplatePickerTemplateList:s,HorizontalTemplatePicker:l}})),r=(0,o()._h)(i,(e=>e.AppInitializationOverlay)),a=(0,o()._h)(i,(e=>e.TemplatePickerTemplateList)),s=(0,o()._h)(i,(e=>e.HorizontalTemplatePicker))},601813:(e,t,n)=>{n.d(t,{Qe:()=>u,l8:()=>d});n(944114),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454),n(908872),n(737550);var o=()=>n(496603),i=()=>n(534177),r=()=>n(397277),a=()=>n(919709),s=()=>n(220719);const l=(0,n(959013).YK)({addLabel:{id:"suggestionContext.label.add",defaultMessage:"Add"},removeLabel:{id:"suggestionContext.label.remove",defaultMessage:"Delete"},labelForReplaceOldText:{id:"suggestionContext.label.replaceOld",defaultMessage:"Replace"},labelForReplaceNewText:{id:"suggestionContext.label.replaceNew",defaultMessage:"with"},boldLabel:{id:"suggestionContext.label.bold",defaultMessage:"Bold"},unboldLabel:{id:"suggestionContext.label.unbold",defaultMessage:"Unbold"},italicLabel:{id:"suggestionContext.label.italic",defaultMessage:"Italicize"},unitalicLabel:{id:"suggestionContext.label.unitalic",defaultMessage:"Unitalicize"},strikeLabel:{id:"suggestionContext.label.strike",defaultMessage:"Strike through"},unstrikeLabel:{id:"suggestionContext.label.unstrike",defaultMessage:"Remove strike through"},underlineLabel:{id:"suggestionContext.label.underline",defaultMessage:"Underline"},removeUnderlineLabel:{id:"suggestionContext.label.remove underline",defaultMessage:"Remove underline"},codeStyleLabel:{id:"suggestionContext.label.codeStyle",defaultMessage:"Mark as code"},removeCodeStyleLabel:{id:"suggestionContext.label.remove codeStyle",defaultMessage:"Remove code style"},addLinkLabel:{id:"suggestionContext.label.addLink",defaultMessage:"Add link"},removeLinkLabel:{id:"suggestionContext.label.removeLink",defaultMessage:"Remove link"},highlightLabel:{id:"suggestionContext.label.highlight",defaultMessage:"Highlight"},removeHighlightLabel:{id:"suggestionContext.label.removeHighlight",defaultMessage:"Remove highlight"},undefinedOpLabel:{id:"suggestionContext.label.undefinedOp",defaultMessage:"Undefined operation"},lineBreak:{id:"suggestionContext.text.linebreak",defaultMessage:"line break"},lineBreaks:{id:"suggestionContext.text.linebreaks",defaultMessage:"line breaks"},block:{id:"suggestionContext.text.block",defaultMessage:"block"},page:{id:"suggestionContext.text.page",defaultMessage:"page"},blocks:{id:"suggestionContext.text.blocks",defaultMessage:"blocks"}}),c={[a().Ifu.Bold]:[l.boldLabel,l.unboldLabel],[a().Ifu.Italic]:[l.italicLabel,l.unitalicLabel],[a().Ifu.Strike]:[l.strikeLabel,l.unstrikeLabel],[a().Ifu.Underline]:[l.underlineLabel,l.removeUnderlineLabel],[a().Ifu.Code]:[l.codeStyleLabel,l.removeCodeStyleLabel],[a().Ifu.Link]:[l.addLinkLabel,l.removeLinkLabel],[a().Ifu.Highlight]:[l.highlightLabel,l.removeHighlightLabel]};function d(e){const{discussionContextData:t,discussionId:n,discussionType:o,excludeLabel:l,intl:c}=e;if("default"===o){let e;const n=t[0];return"textValue"===n.type&&(e=n.value),(0,s().o9)(e)}if("suggestion"===o){return function(e){const{suggestionContextRenderLineItem:t,excludeLabel:n}=e;return t.flatMap(((e,o)=>{if(n)return e.value;const i=[];return e.shouldUseDeleteColor?i.push(a().Ey_(`${e.label}: `,[r().Tw])):i.push(a().Ey_(`${e.label}: `,[r().eD])),e.removeQuotationMarks||i.push(a().Ey_("“",[e.shouldUseDeleteColor?r().uZ:r().hp])),"insert_block"===e.type||"add_line_break"===e.type?e.value.forEach((e=>{i.push(a().Ey_(a().N8A(e),[r().hp]))})):"remove_line_break"===e.type||"delete_block"===e.type?e.value.forEach((e=>{i.push(a().Ey_(a().N8A(e),[r().uZ]))})):i.push(...e.value),e.removeQuotationMarks||i.push(a().Ey_("”",[e.shouldUseDeleteColor?r().uZ:r().hp])),o!==t.length-1&&i.push(a().Ey_("\n")),i}))}({suggestionContextRenderLineItem:p({discussionContextData:t,discussionId:n,intl:c}),intl:c,excludeLabel:l})}(0,i().HB)(o)}function u(e){const{discussionType:t,discussionId:n,discussionContextData:o,intl:i}=e;if("suggestion"===t)return p({discussionContextData:o,discussionId:n,intl:i})}function p(e){const{discussionContextData:t,intl:n,discussionId:r}=e,s=t.flatMap((e=>"textValue"===e.type?function(e){const{textValue:t,intl:n,discussionId:i}=e,r=o().hS(t.flatMap((e=>(0,a().uPN)(e))).filter((e=>a().I1e(e)&&a().vu(e)===i)),(e=>`[${e.join(",")}]`));if(0===r.length)return[];const s=2===r.length&&1===r.filter((e=>a().O3D(e))).length&&1===r.filter((e=>a().ZRT(e))).length,l=[];for(const o of r){const e=m({annotation:o,isReplace:s,intl:n}),i=a().ZRT(o);let r=t;if(a().MXn(o)||a().zIw(o)){const e=a().Dew(o);if(a().sh$(e)){r=[[a().cQR(e)]]}}s&&(a().O3D(o)?r=t.filter((e=>(0,a().uPN)(e).some((e=>a().O3D(e))))):a().ZRT(o)&&(r=t.filter((e=>(0,a().uPN)(e).some((e=>a().ZRT(e))))))),l.push({label:e,value:r,shouldUseDeleteColor:i})}return l}({textValue:e.value,discussionId:r,intl:n}):"blockSuggestion"===e.type?function(e){const{blockSuggestion:t,intl:n,blockType:o}=e;if("add_line_break"===t.type)return{label:n.formatMessage(l.addLabel),value:[a().Ey_(n.formatMessage(l.lineBreak))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"add_line_break"};if("remove_line_break"===t.type)return{label:n.formatMessage(l.removeLabel),value:[a().Ey_(n.formatMessage(l.lineBreak))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"remove_line_break"};if("insert"===t.type){const e="page"===o;return{label:n.formatMessage(l.addLabel),value:[a().Ey_(n.formatMessage(e?l.page:l.block))],shouldUseDeleteColor:!1,removeQuotationMarks:!0,type:"insert_block"}}if("remove"===t.type)return{label:n.formatMessage(l.removeLabel),value:[a().Ey_(n.formatMessage(l.block))],shouldUseDeleteColor:!0,removeQuotationMarks:!0,type:"delete_block"};(0,i().HB)(t.type)}({blockSuggestion:e.value,blockType:e.blockType,intl:n}):void(0,i().HB)(e))),c=[s].map((e=>function(e,t){const n=e.filter((e=>"insert_block"===e.type));if(1===n.length&&1===e.length)return e;if(n.length>1&&n.length===e.length)return[{label:t.formatMessage(l.addLabel),value:[a().Ey_(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e.filter((e=>"insert_block"!==e.type))}(e,n))).map((e=>function(e,t){const n=e.filter((e=>"delete_block"===e.type));if(1===n.length&&1===e.length)return e;if(n.length>1&&n.length===e.length)return[{label:t.formatMessage(l.removeLabel),value:[a().Ey_(t.formatMessage(l.blocks))],shouldUseDeleteColor:!1,removeQuotationMarks:!0}];return e}(e,n))).map((e=>g(e,n,"add_line_break"))).map((e=>g(e,n,"remove_line_break")));return c[0]}function m(e){const{annotation:t,isReplace:n,intl:o}=e,r=l.undefinedOpLabel;if(a().O3D(t)){const e=n?l.labelForReplaceNewText:l.addLabel;return o.formatMessage(e)}if(a().ZRT(t)){const e=n?l.labelForReplaceOldText:l.removeLabel;return o.formatMessage(e)}if(a().MXn(t)||a().zIw(t)){const e=a().Dew(t);if(a().MXn(t)){const t=c[a()._XS(e)][0]??r;return o.formatMessage(t)}{const t=c[a()._XS(e)][1]??r;return o.formatMessage(t)}}(0,i().HB)(t)}function g(e,t,n){let o,i;const r="add_line_break"===n?t.formatMessage(l.addLabel):t.formatMessage(l.removeLabel),s=e=>{i&&(e.push({label:r,value:[a().Ey_(t.formatMessage(l.lineBreaks))],shouldUseDeleteColor:"remove_line_break"===n,removeQuotationMarks:!0}),i=!1,o=!1),o&&(e.push({label:r,value:[a().Ey_(t.formatMessage(l.lineBreak))],shouldUseDeleteColor:"remove_line_break"===n,removeQuotationMarks:!0}),o=!1)},c=e.reduce(((e,t)=>(t.type===n?o?i=!0:o=!0:(s(e),e.push(t)),e)),[]);return s(c),c}},602098:(e,t,n)=>{n.d(t,{u:()=>i});var o=()=>n(630116);function i(e){return Boolean(e.findRecordStoreUIAncestor((e=>e instanceof o().bx&&e.isType("duplicate_blocks"))).ancestor)}},603820:(e,t,n)=>{n.d(t,{A:()=>g});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(496603),s=()=>n(831872),l=()=>n(753199),c=()=>n(281322),d=()=>n(592678),u=()=>n(353643),p=()=>n(24157),m=n(474848);const g=function(e){let{render:t,draggableStore:c,onDraggableDragStart:d,onDraggableDragMove:p,onDraggableDragEnd:g,onDraggableDragCancel:f,forceTouch:w,touchDragOnly:k,allowDragWhileTextEditing:I,disableVerticalEdgeScroll:x,disableHorizontalEdgeScroll:A,preventSidebar:C,disabled:T,enableAndroidContextMenu:M}=e;const P=(0,i().v3)(),B=(0,i().Y0)(),R=(0,r().uB)(c,n(771989).A),E=(0,o.useRef)(Math.random()),D=(0,o.useRef)(void 0),N=(0,o.useRef)(null),L=(0,o.useRef)([]),O=(0,o.useRef)(!1),U=(0,r().O$)(n(429825).A.isSwipingStore),F=(0,o.useRef)(),V=(0,o.useRef)(),j=(0,o.useRef)(),z=(0,o.useRef)();F.current=d,V.current=p,j.current=g,z.current=f;const H=(0,o.useMemo)((()=>{function e(){clearTimeout(D.current),R.reset(),u().A.reset(),o()}function t(){clearTimeout(D.current),R.reset(),o()}function o(){window.removeEventListener("mouseup",W),window.removeEventListener("mousemove",g),window.removeEventListener("mousemove",f,!0),window.removeEventListener("touchmove",g),window.removeEventListener("touchend",r),window.removeEventListener("touchcancel",c),window.removeEventListener("touchforcechange",H),s().pQ(P,E.current),document.removeEventListener("pause",i,!1)}function i(t){t.preventDefault(),R.state.dragging&&(z.current&&z.current(function(e,t){const n=y(e);return h({point:n,target:e.target,preventDefault:()=>e.preventDefault(),draggableState:t})}(t,R.state)),e())}function r(n){R.state.dragging?(j.current&&j.current(h({point:R.state.currentPoint,target:n.target,preventDefault:()=>n.preventDefault(),draggableState:R.state})),e()):R.state.waiting&&t()}function c(e){r(e)}function d(e){return N.current!==e.target&&(N.current=e.target,L.current=(0,n(953418).sl)(e.target)),L.current.map((e=>({x:e.scrollTop,y:e.scrollLeft})))}function p(e){if(!U)if(u().A.setState({isDragging:!0,initiator:e.initiator,disableHorizontalEdgeScroll:A||!1,disableVerticalEdgeScroll:x||!1}),R.state.waiting){const t=R.state.waitingPoint,n={dragging:!0,waiting:!1,startingPoint:t,currentPoint:t,scrollerPositions:d(e),initiator:e.initiator};R.setState(n);const o=b({point:t,target:e.target,preventDefault:e.preventDefault,draggableState:n,device:e.device});F.current&&F.current(o)}else if(R.state.dragging){const t=b({point:R.state.currentPoint,target:e.target,preventDefault:e.preventDefault,draggableState:R.state,device:e.device});F.current&&F.current(t)}}function m(n,o){e(),t(),function(e){e?(window.addEventListener("touchmove",g),window.addEventListener("touchend",r),window.addEventListener("touchcancel",c),window.addEventListener("touchforcechange",H)):(window.addEventListener("mouseup",W),window.addEventListener("mousemove",g),window.addEventListener("mousemove",f,!0)),s().sm({environment:P,stackItem:{listener:E.current,enable:!0,debugName:"Draggable",shortcuts:{esc:i},priority:0}}),document.addEventListener("pause",i,!1)}(o);const l=n.target,u=v(n),m=o?"touch":"mouse";o&&w?(R.setState({dragging:!1,waiting:!0,initiator:"none",scrollerPositions:d(n),waitingPoint:y(n)}),D.current=setTimeout((()=>p({target:l,preventDefault:a().D_,device:u,initiator:m})),500)):(R.setState({dragging:!0,waiting:!1,scrollerPositions:d(n),startingPoint:y(n),currentPoint:y(n),initiator:m}),p({target:l,preventDefault:()=>n.preventDefault(),device:u,initiator:m}))}const g=a().nF((function(e){R.state.waiting&&function(e){return(R.state.dragging||R.state.waiting)&&!a().n4(R.state.scrollerPositions,d(e))}(e)?t():R.state.dragging&&(R.setState({...R.state,currentPoint:y(e)}),V.current&&V.current(_(e,R.state,v(e))))}),15,{trailing:!0});function f(e){C&&R.state.dragging&&(0,n(569912).Z)(e)}function H(e){if(!w)return;const t=e.touches[0];t&&t.force>=.6&&R.state.waiting&&(e.preventDefault(),clearTimeout(D.current),p({target:e.target,preventDefault:()=>e.preventDefault(),device:v(e),initiator:"touch"}))}function W(n){R.state.dragging?(j.current&&j.current(_(n,R.state,v(n))),e()):R.state.waiting&&t()}function q(e){O.current=!0;!T&&(I||w&&!S())&&(0,l().SQ)({event:e,context:l().y$.EditorMouseDown,callback:()=>m(e,!0)})}function K(t){if(B.isAndroid&&!S()&&!M)return t.stopPropagation(),!1;R.state.dragging&&(z.current&&z.current(_(t,R.state,v(t))),e())}return k?{onTouchStart:q,onContextMenu:K}:{onMouseDown:function(e){if(!T)return O.current?(O.current=!1,void(0,l().SQ)({event:e,context:l().y$.EditorMouseDown,callback:a().D_})):void(1!==e.button&&(0,l().SQ)({event:e,context:l().y$.EditorMouseDown,callback:()=>m(e,!1)}))},onTouchStart:q,onContextMenu:K}}),[I,T,B.isAndroid,A,x,R,M,w,U,P,C,k]);return(0,r().K8)((()=>(0,m.jsx)(n(11048).A,{name:"Draggable",children:t(H)})),[H,t])};function f(e){return Boolean(e.touches)}function v(e){if(f(e)){const t=e.touches[0];return t?(0,d().Qn)(t):"finger"}return"mouse"}function h(e){const{point:t,draggableState:n}=e,o=c().r();return{startX:n.startingPoint.x,startY:n.startingPoint.y,currentX:t.x,currentY:t.y,diffX:t.x-n.startingPoint.x,diffY:t.y-n.startingPoint.y,shiftKey:o.shift,optionKey:o.option,commandKey:o.command||o.control,target:e.target,preventDefault:e.preventDefault}}function _(e,t,n){return b({point:y(e),target:e.target,preventDefault:()=>e.preventDefault(),draggableState:t,device:n})}function b(e){const{device:t,...n}=e;return{...h(n),device:t}}function y(e){const t=f(e)?e.touches[0]:e;return{x:t.clientX,y:t.clientY}}function S(){return"editing"===p().default.state.mode}},604643:(e,t,n)=>{n.r(t),n.d(t,{getInitialPage:()=>u,initialize:()=>d});var o=()=>n(948450),i=()=>n(183558),r=()=>n(571963),a=()=>n(836251),s=()=>n(155959),l=()=>n(5705),c=()=>n(151779);async function d(e){const t=window.history.state&&window.history.state.id||(0,i().Ay)();if(!window.history.state){const n=e.currentUser.id;window.history.replaceState({id:t,currentUserId:n},void 0,window.location.href),l().ke({historyId:t,historyIndex:0,currentUserId:n})}a().Al(e)&&e.TabbedRouterStore.setUp({nativeInboxEnabled:(0,s().T)("supportsNativeInbox")}),e.device.isElectron&&r().setDesktopLoadOrigin(),await c().Yw({environment:e,id:t,action:"pop",href:window.location.href,updateMobileTabbedRouterArgs:{forceUpdate:!0,silenceErrors:!0,clearNativeRootPageOverride:"/"!==window.location.pathname},enableDesktopAppRedirect:!0});const n=e.currentUser.id,d=u(n);if(!d||"undefined"===d){const e=window.location.pathname;e&&function(e){let{currentUserId:t,value:n}=e;o().A.set({userId:t,key:"sourceInitialPage",value:n})}({currentUserId:n,value:e})}}function u(e){return o().A.get({userId:e,key:"sourceInitialPage"})}},604917:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(296540),i=n(440961),r=()=>n(847249),a=()=>n(584262),s=()=>n(319975),l=()=>n(211716),c=()=>n(891078),d=n(474848);function u(e,t){const u=(0,n(484714).v3)(),p=(0,o.useContext)(n(484792).n),m=(0,o.useRef)(null),g=(0,o.useRef)(null),f=(0,c().bx)(e.store,e.disabled),v=(0,c().pW)(e.store),h=(0,o.useCallback)((()=>{n(41161).A.recordVisit({id:e.store.id,systemBlockType:e.store.getSystemBlockTypeStore().getValue(),type:l().ig.Link,currentUserId:u.currentUser.id}),n(296206).l8(u,{page_visit_id:n(990261).uk.getCurrentPageVisitId(),mentioned_page_id:e.store.id,source_type:"collection_view_page_block",hover_preview_enabled:!0,is_navigable_block:e.store.isNavigableBlock()})}),[u,e.store]),_=(0,o.useCallback)((()=>{if(!g||!g.current)return;const t=i.findDOMNode(g.current);return(0,n(921855).ng)(e.store,t)}),[e.store]),b=(0,o.useCallback)((t=>{const n=_(),o=e.store.getTitleStore();o&&n&&s().xE({environment:u,event:t,interactiveToken:n,store:o,canEdit:f})}),[f,u,_,e.store]),y=(0,o.useCallback)((t=>{const n=_(),o=e.store.getTitleStore();o&&n&&s().HH({environment:u,event:t,interactiveToken:n,store:o,canEdit:f})}),[f,u,_,e.store]),S=(0,o.useCallback)((()=>{if(p){const t=(0,n(492414).Ay)({store:e.store,pageVisitSource:a().y8.Create});p(t)}else n(857783).uK({environment:u,store:e.store,visitType:l().ig.Link,pageVisitSource:a().y8.Create})}),[u,p,e.store]);(0,o.useEffect)((()=>()=>{n(347469).OZ(e.store.getTitleStore())}),[e.store]);const w=(0,r().K8)((()=>{const t=e.store.getCollectionStoreIfSingleSource();return null==t?void 0:t.isSyncedCollection()}),[e.store]),k=(0,r().K8)((()=>e.store.isCollectionViewAlias()||e.store.recordStoreParentDiffersFromPersistedParent()),[e.store]);return(0,c().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"collection_view_page",getNode:()=>m.current,getBlockStore:()=>e.store,activate:S,handleCreated(){S(),n(732770).A.setKeyboardMode(!1)}})),[S,e.store]),(0,d.jsx)(n(155004).s,{allowSelectionWithin:!1,onMouseOver:b,onMouseOut:y,children:(0,d.jsx)(n(54432).A,{ref:g,store:e.store,style:{...v,...e.style},isAlias:k,disabled:Boolean(e.disabled||w),onClick:h})}))}const p=o.memo(o.forwardRef(u),n(821062).A)},605402:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{permissionGroupsAndMemberCounts:[],lastEmitData:{value:-1,spaceId:void 0}}}shouldRefetch(e){let{currentSpaceId:t,emitValue:n}=e;const{spaceId:o,value:i}=this.state.lastEmitData;return t!==o||n!==i}}const i=new o},606846:(e,t,n)=>{n.d(t,{Ay:()=>s,gJ:()=>l,zp:()=>r});var o=()=>n(757695),i=()=>n(534177);function r(e){return"mentions"===e||"allPages"!==e&&"archive"!==e&&void(0,i().HB)(e)}class a extends o().default{getInitialState(){return{currentTab:"mentions",isCurrentTabEmpty:!0,containsBothReadAndUnreadNotifications:!1,containsUnreadNotifications:!1,loadingId:void 0,sessionId:void 0,showOnlyUnreadNotifications:!1,unreadNotificationIds:[]}}startSession(){let{forceRestart:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(void 0===this.state.sessionId||e)&&this.setState({...this.state,sessionId:n(206267).JW()})}endSession(){this.setState({...this.state,sessionId:void 0})}startLoading(){const e=Math.random().toString();return this.setState({...this.state,loadingId:e}),e}endLoading(e){e===this.state.loadingId&&this.setState({...this.state,loadingId:void 0})}isFilteredToUnreadOnly(){if("mentions"===this.state.currentTab)return this.state.showOnlyUnreadNotifications}}const s=new a,l=o().default.createValue(!0,{name:"UpdatesScrolledToTopStore"})},606932:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(938090);function i(){var e;const t=null===(e=n(351360).default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getType();if(t)return"collection_view_page"===t||"collection_view"===t?"collection":"page"}function r(e){const t=null===(n=o().H6.CollectionViewBlock.getLoadingMetrics())||void 0===n?void 0:n.resolvedAt;var n;return!!t&&(e?e<t:void 0)}const a=new class{constructor(){this._timings=void 0,this._navigatingFrom=void 0,this._switchingView=void 0,this._nativeToWebRenderStart=void 0,this._nativeToWebRenderParams=void 0}popTimings(){const e=this._timings;return this._timings=void 0,e}markNavigationStartTime(e,t){this._timings={navigationStart:performance.now(),nativeToWebRenderStart:this._nativeToWebRenderStart,nativeToWebRenderParams:this._nativeToWebRenderParams},this._navigatingFrom=void 0,this._switchingView=void 0,this._nativeToWebRenderStart=void 0,this._nativeToWebRenderParams=void 0,"page"===e.name&&"page"===t.name&&e.blockId&&e.blockId&&(this._navigatingFrom=i(),this._switchingView=e.blockId===t.blockId&&e.collectionViewId!==t.collectionViewId)}markRequestFirstChunkStart(){this._timings&&(this._timings={...this._timings,requestFirstChunkStart:performance.now()})}markRequestFirstChunkEnd(e){const{chunkSource:t,chunkLocalSource:n}=e;this._timings&&(this._timings={...this._timings,requestFirstChunkEnd:performance.now(),requestFirstChunkSource:t,requestFirstChunkLocalSource:n})}markPageViewBlockRender(e){this._timings&&(this._timings={...this._timings,pageViewBlockRender:e})}markNativeToWebRenderStart(e,t){this._nativeToWebRenderStart=e,this._nativeToWebRenderParams=t}getDatabaseNavigationMetrics(e){return{cvb_bundle_loaded:r(e),navigating_from:this._navigatingFrom,navigating_to:i(),switching_view:this._switchingView}}}},606965:(e,t,n)=>{n.d(t,{W:()=>o});class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.value=e,this.textInstanceId=t;const n=o.overrides.get(t);n&&e>n&&this.updateOverride()}get(){return o.overrides.get(this.textInstanceId)??this.value}set(e){const t=this.get();(0,n(933449).MX)(e>=t,"Clock value must be non-decreasing"),this.value=e,this.updateOverride()}updateOverride(){o.overrides.set(this.textInstanceId,this.value)}static TEST_ONLY__clearOverrides(){this.overrides.clear()}}o.overrides=new Map},607624:(e,t,n)=>{n.d(t,{i:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("audio",{viewBox:"0 0 23.5 24",svg:(0,o.jsx)("path",{d:"M5.258 14.008a.661.661 0 01-.485-.203.702.702 0 01-.195-.492v-2.899c0-.187.065-.351.195-.492a.65.65 0 01.485-.211.67.67 0 01.5.21.694.694 0 01.203.493v2.899a.687.687 0 01-.203.492.68.68 0 01-.5.203zm2.695 3.148a.684.684 0 01-.688-.695V7.266c0-.193.066-.357.196-.493a.66.66 0 01.492-.21c.198 0 .362.07.492.21a.67.67 0 01.203.493v9.195a.67.67 0 01-.203.492.654.654 0 01-.492.203zm2.688 3.032a.645.645 0 01-.485-.204.667.667 0 01-.195-.492V4.234c0-.198.065-.364.195-.5a.645.645 0 01.485-.203.68.68 0 01.5.203.68.68 0 01.203.5v15.258a.654.654 0 01-.203.492.68.68 0 01-.5.203zm2.695-4.047a.684.684 0 01-.492-.196.684.684 0 01-.196-.492v-7.18a.684.684 0 01.688-.695.67.67 0 01.492.203.67.67 0 01.203.492v7.18a.684.684 0 01-.695.688zm2.695 2.328a.68.68 0 01-.695-.696V5.953c0-.193.065-.357.195-.492a.667.667 0 01.5-.211c.193 0 .354.07.485.21a.67.67 0 01.203.493v11.82a.67.67 0 01-.203.493.645.645 0 01-.485.203zm2.688-3.852a.654.654 0 01-.492-.203.675.675 0 01-.196-.484V9.797c0-.188.065-.35.196-.485.13-.14.294-.21.492-.21a.66.66 0 01.492.21.661.661 0 01.203.485v4.133a.661.661 0 01-.203.484.67.67 0 01-.492.203z"})})},607859:(e,t,n)=>{n.r(t),n.d(t,{default:()=>s,onboardingPreferenceKey:()=>r,onboardingStagesWithBack:()=>i});var o=()=>n(763884);const i=["workspace_plan_choose","workspace_collaborative_intent_choose","persona_survey","workspace_create","timed_trial_upsell","mobile_editor","mobile_sidebar","mobile_desktop","mobile_web_clipper","mobile_app_download"],r="lastOnboardingStateKeyV1";class a extends(()=>n(757695))().default{setState(e){super.setState(e),function(e){if(e.isOnboarding)if("profile"===e.stage){const{onboardingData:t,isLoading:n,password:i,passwordErrorData:a,currentUserId:s,...l}=e;o().K.set({userId:s,key:r,value:l})}else{const{onboardingData:t,isLoading:n,currentUserId:i,...a}=e;delete a.password,o().K.set({userId:i,key:r,value:a})}else{const{currentUserId:t,...n}=e;o().K.set({userId:t,key:r,value:n})}}(e)}constructor(){super();const e={isOnboarding:!1,isLoading:!1,currentUserId:void 0};super.setState(e)}}const s=new a},609044:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},609429:(e,t,n)=>{n.d(t,{e:()=>i});function o(e){return e.teamId?`${e.collectionViewId}-${e.teamId}`:e.collectionViewId}const i=new class{constructor(){this.cache=new Map,this._locallyMutatedTasksDatabase=!1}get locallyMutatedTasksDatabase(){return this._locallyMutatedTasksDatabase}set locallyMutatedTasksDatabase(e){this._locallyMutatedTasksDatabase=e}get(e){const t=o(e);return this.cache.get(t)}set(e,t){const n=o(e);for(this.cache.delete(n),this.cache.set(n,t);this.cache.size>25;){const e=this.cache.keys().next().value;e&&this.cache.delete(e)}}}},610640:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isHovered:!1}}}const i=new o},611191:(e,t,n)=>{n.d(t,{$J:()=>d,iE:()=>a,xf:()=>c});var o=()=>n(17022),i=()=>n(780054),r=()=>n(508496);function a(){return void 0===s&&o().A.withListenerIgnored((()=>{s=i().A.isAdminMode||"on"===r().default.getEligibleGroup({experimentId:"highlight_legacy_transclusions",defaultGroup:"control"})})),s}let s,l;function c(){return void 0===l&&o().A.withListenerIgnored((()=>{l=i().A.isAdminMode||r().default.checkGate({gateName:"highlight_quasi_alive_blocks_enabled"})})),l}function d(){return r().default.checkGate({gateName:"fix_legacy_transclusions_on_duplicate"})}},611371:(e,t,n)=>{n.d(t,{He:()=>T,QY:()=>A,EF:()=>C});n(296540);var o=()=>n(256754),i=()=>n(427704),r=()=>n(959013),a=()=>n(252105),s=()=>n(934839),l=()=>n(901389),c=()=>n(812182),d=()=>n(135552),u=()=>n(972435),p=()=>n(836251),m=()=>n(351360),g=()=>n(150193),f=()=>n(807778),v=()=>n(134217),h=()=>n(671812),_=()=>n(749240),b=()=>n(84390),y=()=>n(209660),S=()=>n(19575),w=n(474848);function k(e){const{message:t,actions:n}=function(e){var t;const n=(0,v().qc)(_().subscriptionDataStoreInstance.state),o=(0,v().e9)(e,null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id);let i,a;if(!n)return i=(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.member.toast.message",defaultMessage:"Contact a workspace owner to verify your payment method so you can continue using Notion."}),{message:i,actions:a};o?(i=(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.toast.admin.salesAssisted.message",defaultMessage:"Please contact your Notion account manager to remit payment to avoid losing access to Notion."}),a={primary:{title:(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.toast.contactSales",defaultMessage:"Contact sales"}),onAction:()=>{(0,S().cz)()}}}):(i=(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.toast.admin.message",defaultMessage:"Go to the Billing tab in Settings to verify your payment method."}),a={primary:{title:(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.toast.upgradeCta",defaultMessage:"Manage payment"}),onAction:()=>{y().Ow({currentTab:"billing"}),c().UW("unpaid_invoice_toast")}}});return{message:i,actions:a}}(e);return{id:"unpaid_invoice_toast",presentationType:"transient",iconGroup:b().Y,iconGroupVariant:"default",iconGroupColorName:"contrast",title:(0,w.jsx)(r().sA,{id:"subscriptionActions.unpaidInvoice.toast.title",defaultMessage:"Payment not processed"}),message:t,actions:n}}var I=()=>n(991249);const x=(0,r().YK)({overFreeBlockLimitMobileNativeDialog:{id:"subscriptionActions.overFreeBlockLimit.mobileNativeDialog",defaultMessage:"Your free blocks have been used up. Unfortunately, unlimited blocks cannot be purchased on mobile."}});function A(e){if((0,h().A)(e))return c().HK(k(e));c().HK(function(e){return{id:"out_of_blocks_toast",presentationType:"transient",iconGroup:o().I,iconGroupVariant:"default",iconGroupColorName:"uiBluePrimary",title:(0,w.jsx)(r().sA,{id:"subscriptionActions.overBlockLimit.toast.title",defaultMessage:"Upgrade to continue creating and collaborating on Notion"}),actions:{primary:{title:(0,w.jsx)(r().sA,{id:"subscriptionActions.overBlockLimit.toast.upgradeCta",defaultMessage:"Learn more"}),onAction:()=>{(0,I().K)(e,{from:"out_of_blocks_toast",upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),c().UW("out_of_blocks_toast")}}}}}(e))}function C(e){var t;const n=_().subscriptionDataStoreInstance.state,o=f().qp(),i=null===(t=m().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(n&&i){const t=f().Km(e);if(f().Mh(e))return T(e),!0;if(t&&null!==o&&o>3)return T(e),!1;if(v().V$(e,n,i))return a().xF(e),T(e),!1;v().jK(e,n,i)&&a()._M(e)}return!h().A(e)&&(s().zA({bannerStore:g().A,id:"SubscriptionEditingBlocker"}),!0)}function T(e){if(p().Al(e)&&"new"===e.RouterStore.state.route.name){async function t(){const{navigateToHomeTab:t}=await Promise.resolve().then(n.bind(n,537941)),{navigateOnBaseUrl:o}=await Promise.resolve().then(n.bind(n,435009));t(e),o({environment:e,url:i().JZ.root})}l().rG({message:u().A.formatMessage(x.overFreeBlockLimitMobileNativeDialog),onAccept:()=>{t()}})}else s().HQ({id:"SubscriptionEditingBlocker",bannerStore:g().A,styleKey:d().q.Red,contentKey:"over_free_block_limit"})}},612008:(e,t,n)=>{n.d(t,{H:()=>k,Q:()=>w});n(898992),n(672577);var o=()=>n(700500),i=()=>n(630053),r=()=>n(179034),a=()=>n(798880),s=()=>n(919709),l=()=>n(186445),c=()=>n(476492),d=()=>n(646736),u=()=>n(406792),p=()=>n(351360),m=()=>n(227440),g=()=>n(508496),f=()=>n(630116),v=()=>n(313209),h=()=>n(246826),_=()=>n(317001),b=()=>n(765370),y=()=>n(755673);function S(e,t,n){const o=l()._m(e),r=null==o?void 0:o.id;if(!r||!n)return;const s=(0,i().Sf)({experimentService:g().default,actor:{table:a().oo,id:r},spaceId:n})&&void 0!==t.getSharingEnabledRelationId();if(!s&&!g().default.checkGate({gateName:"full_access_for_created_collection_pages"}))return;if(s){const e=t.getSharingEnabledTargetCollectionStore();if(null!=e&&e.canAdmin())return}else if(t.canAdmin())return;const c=p().default.state.currentSpaceStore;return c&&(0,d().dp)(c,r).isMember()?[{role:"editor",type:"user_permission",user_id:r}]:void 0}function w(e){const{collectionContextStore:t,transaction:n}=e;return(0,b().w)({collectionContextStore:t,transaction:n}),k(e)}function k(e){var t,n,i;const{environment:a,collectionContextStore:l,groupsPointer:d,insertAtIndex:g,shouldCoerce:b,templateStore:w,transaction:k,from:I,tracker:x,inMemoryRecordCache:A,isKeyboard:C,title:T}=e,M=u().default.DO_NOT_USE_markLegacy("collections.add_item_lag");u().default.DO_NOT_USE_measureAfterNextFlushLegacy(M,{environment:a,getData:()=>({...c().kz(l),from:I.createBlock})});const P="collectionTypedView"===l.contextType,B=l.databaseType,R=l.collectionStoresStore.state,E=R.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||R[0],D=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id,N=p().default.state.currentUserSettingsStore,L=P&&B&&D&&N&&[...N.getAllPreferredCollections(D),...N.getPreferredCollectionsOfType(D,B)]||[];let O;const U=d[0];if("group_header"===I.createBlock&&"location"===U.value.type){const e=U.value.value;if(e){O=R.find((t=>t.id===e.id&&(t.canEdit()||t.canEditCollection()||t.canEditContentOnly())))}}else O=function(e,t){for(const n of e){const e=t.find((e=>e.id===n&&(e.canEdit()||e.canEditCollection()||e.canEditContentOnly())));if(e)return e}}(L,R);const F=O??E,V=null==F?void 0:F.getSpaceId(),j=l.collectionViewStore(),z=l.getViewType(),H=h().Wv({environment:a,type:o().xd.page,inMemoryRecordCache:A,transaction:k,spaceId:V,tracker:x,permissions:S(a,F,V),properties:{title:(0,s().x9d)(T)}});if(!F||!j||!z)return{coercionSucceeded:!0,newStore:H};const W=null===(n=l.groupsStore.getGroupState(d))||void 0===n?void 0:n.groupUiParentStore;if(!W)return{coercionSucceeded:!0,newStore:H};const q=f().Bv.createChildStore(W,{table:r().ev,id:H.id});w&&m().A.state.online&&v().n5({title:"template",environment:a,store:H,templateStore:w,isKeyboard:C??!1,isCreateIn:!1,transaction:k,from:I.initCollection??"collection_group_actions"});const K=(0,_().j)({environment:a,store:H,collectionStore:F,collectionContextStore:l,groupsPointer:d,shouldCoerce:b,transaction:k}),G=(null===(i=l.groupsStore.getGroupState(d))||void 0===i||null===(i=i.reducerResultStore.state)||void 0===i?void 0:i.blockIds)||[],$=void 0!==g?g:G.length;if(l.permissionScopesStore.state.canEditContent||P){const e=[...G.slice(0,$),q.id,...G.slice($)];(0,y().z)({resultIds:e,collectionViewStore:j,collectionContextStore:l,transaction:k})}return{coercionSucceeded:K,newStore:q}}},612587:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(370614).A)},613147:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(296540),i=()=>n(522419),r=()=>n(943846),a=()=>n(753199),s=()=>n(378765),l=()=>n(419974),c=()=>n(799954),d=n(474848);const u=function(e){const{signedUrl:t,dataSize:o,dataName:i,contentWrapStyle:r,disabled:s,viewOriginal:l}=e,u={paddingTop:c().nE.paddingTop,paddingBottom:c().nE.paddingBottom,paddingLeft:c().nE.paddingLeft};return(0,d.jsx)("div",{style:r,onClick:void 0,onMouseDown:a().tr,children:(0,d.jsx)("div",{style:{position:"relative"},children:t&&(0,d.jsx)(n(489436).n,{title:i,url:t,size:o,onClick:s?void 0:l,style:u})})})};var p=()=>n(839010),m=()=>n(657202);const g={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function f(e){const{render:t,style:n,errorStyle:o,...a}=e,c=i()._J(e.url)?void 0:(0,r().mI)(e.url);return(0,d.jsx)(m().A,{...a,render:(i,a,u)=>{let p=c;return i&&!p&&(p=(0,r().Vh)(i)??{type:"unknown",source:e.url}),(0,d.jsx)("div",{style:n,children:(0,d.jsx)(s().A,{innerStyle:{height:"100%",width:"100%"},loaded:u,style:g,spinnerSize:"relative",showSpinnerTimeout:500,children:p?(0,d.jsx)("div",{style:o,children:(0,d.jsx)(l().Ay,{family:"embed",error:p})}):t(a)})})}})}function v(e){const{height:t,source:n,contentStyle:i,dataName:r,dataSize:a,width:s}=e,[l,c]=(0,o.useState)(!1);return(0,d.jsx)(f,{url:n,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:{width:"100%",height:"100%"},errorStyle:{height:t,width:s},render:n=>l&&r&&a?(0,d.jsx)(u,{...e,dataName:r,dataSize:a,signedUrl:n}):n&&(0,d.jsx)(p().A,{source:n,isFullWidth:!0,isFullHeight:!0,height:t,style:i,background:!0,onContentLoadTimeout:()=>c(!0)})})}const h={render:function(e){const{disabled:t,contentStyle:i,contentWrapStyle:s,handleFullScreen:l,handleEmbedComp:c,height:m,preserveScale:g,isFullWidth:v,source:h,dataName:_,dataSize:b}=e,[y,S]=(0,o.useState)(!1),w=(0,r().rS)({height:m,isFullWidth:v,preserveScale:g});return(0,d.jsx)(f,{url:h,permissionRecord:e.store.pointer,useS3Url:e.useS3Url,style:w,errorStyle:{position:"relative",height:m},render:o=>y&&_&&b?(0,d.jsx)(u,{...e,dataName:_,dataSize:b,signedUrl:o}):(0,d.jsx)("div",{style:s,onClick:t?l:void 0,onMouseDown:a().tr,children:(0,d.jsx)("div",{style:{position:"relative"},children:o&&(0,d.jsx)(p().A,{ref:e=>c(e),source:o,height:m,style:i,preserveScale:g,isFullWidth:v,background:!0,renderPreview:()=>(0,d.jsx)(n(835779).h,{source:(0,r().Yl)(e)}),onContentLoadTimeout:()=>S(!0)})})})})},embedGhost:!0,renderFullScreen:e=>(0,d.jsx)(v,{...e}),resizable:!0}},613240:(e,t,n)=>{n.d(t,{A:()=>i});const o=new(n(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{var o;let{spaceId:i}=t;if(null===(o=n(351360).default.state.currentSpaceStore)||void 0===o||!o.canAdmin())return;const r=await Promise.resolve().then(n.bind(n,449506)),a=await r.callApi({eventName:"getCustomerOffersReceived",environment:e,data:{spaceId:i},headers:(0,n(386164).WS)({cellId:void 0,spaceId:i})});return"success"===a.type&&(0,n(534177).EI)(a.data)?a.data:void 0}));n(604341).exposeDebugValue("OffersReceivedStore",o);const i=o},614505:(e,t,n)=>{n.d(t,{B:()=>P});n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(612740),l=()=>n(278238),c=()=>n(340498),d=()=>n(837420),u=()=>n(959013),p=()=>n(534177),m=()=>n(901997),g=()=>n(901389),f=()=>n(383594),v=()=>n(892632),h=()=>n(106412),_=()=>n(38337),b=()=>n(682146),y=()=>n(87878),S=()=>n(486666),w=()=>n(663173),k=()=>n(630116),I=()=>n(704152),x=()=>n(756123),A=()=>n(854672),C=()=>n(802963),T=()=>n(619133),M=n(474848);function P(e){const{disabled:t,label:n,icon:p,openMenuOnMount:m,openMenuOnMountCallback:g,bucket:f,store:v,iconLoggingData:y,disableRemoveIcon:S,isCallout:x,onChange:A,size:C,emojiSize:T,style:P,emojiStyle:E,isEmptyPage:D,role:N,title:O,isLarge:V,pageIconStyle:j,disableShrinking:z,useInvertedColors:H,defaultIcon:W,progressContainerStyle:q,isRaw:K,iconBoxStyles:G,largeIcon:$,placeholderStyle:Y,disableAnimation:Q,mediaPickerTabs:Z,onClick:X,onFocus:J,onBlur:ee,onMouseEnter:te,onMouseLeave:ne,onMouseMove:oe,onMouseDown:ie,testId:re,hideCustomEmoji:ae,isInlinePostTitle:se}=e,le=(0,u().tz)(),ce=(0,i().v3)(),de=(0,h().Zp)(),ue=t||Boolean(null==de?void 0:de.disableAllPointerEvents),pe=(0,r().uB)(void 0,w().A),me=(0,o.useMemo)((()=>(0,s().dE)(p)),[p]),ge="unicode_emoji"===(null==me?void 0:me.icon.type),fe=(0,o.useRef)(null);(0,o.useEffect)((()=>{if(ue||!m)return;const e=fe.current;if(!(e&&e instanceof Element))return;const t="secure"===f?{bucket:f,store:v}:{bucket:f};U(e,R(y,p),t,ce,le,ue,pe,S,x,y,A,Z,ae),null==g||g()}),[fe,ce,le,ue,pe,S,x,y,A,f,p,m,g,v,Z,ae]);const ve=p&&ge&&void 0!==n?[p.icon,n].join(" "):n,{dataURL:he,isLoading:_e,progressPercent:be}=(0,r().O$)(pe),ye=(0,o.useMemo)((()=>function(e,t,n,o,i,r){const a=null==n?void 0:n.icon;return{display:"flex",alignItems:"center",justifyContent:"center",height:L(n,e,t,o),width:L(n,e,t,o),borderRadius:"0.25em",flexShrink:0,...i,...("unicode_emoji"===(null==a?void 0:a.type)||"notion_icon"===(null==a?void 0:a.type)||(null==n?void 0:n.pointer.table)===d().e)&&r}}(C,he,me,T,P,E)),[C,he,me,T,P,E]),Se=(0,o.useCallback)((e=>{if(ue)return;!function(e,t,n,o,i,r,a,s,l,c,d,u,p,m,g){if(o)return;s&&s(e);if(!(t.current&&t.current instanceof Element))return;const f=R(l,c);U(t.current,f,r,n,i,o,a,d,u,l,p,m,g)}(e,fe,ce,ue,le,"secure"===f?{bucket:f,store:v}:{bucket:f},pe,X,y,p,S,x,A,Z,ae)}),[f,v,fe,ce,ue,le,pe,X,y,p,S,x,A,Z,ae]),we=(0,a().IS)((e=>{const t=null==me?void 0:me.icon.icon;if(ue||!(B(y)&&t&&l().T8(t)))return{hoveredStyle:{},pressedStyle:{}};const n=l().eR(t,e.mode);return{hoveredStyle:{background:n},pressedStyle:{background:n}}}),[null==me?void 0:me.icon,y,ue]),ke=(0,a().DP)(),Ie=(0,r().K8)((()=>{var e;if(v instanceof k().Bv&&null!=v&&null!==(e=v.getModel())&&void 0!==e&&e.isCollectionView())return b().ZU.table({width:c().Ev.lg,height:c().Ev.lg,fill:ke.icon.secondary})}),[v,ke.icon.secondary]),xe=(0,o.useMemo)((()=>W||(Ie||void 0)),[W,Ie]);return ue?(0,M.jsx)("div",{ref:fe,style:ye,className:`${_().DxR} notranslate`,children:(0,M.jsx)(F,{icon:me,isEmptyPage:D,role:N,title:O,isLarge:V,pageIconStyle:j,disableShrinking:z,useInvertedColors:H,defaultIcon:xe,progressContainerStyle:q,isRaw:K,size:C,emojiSize:T,disabled:ue,label:n,iconBoxStyles:G,largeIcon:$,store:v,placeholderStyle:Y,dataURL:he,isLoading:_e,progressPercent:be??0,disableAnimation:Q||ce.device.prefersReducedMotion,testId:re})}):(0,M.jsx)(I().A,{ref:fe,style:ye,onClick:Se,disabled:ue,onFocus:J,onBlur:ee,onMouseEnter:te,onMouseLeave:ne,onMouseMove:oe,onMouseDown:ie,hoveredStyle:we.hoveredStyle,pressedStyle:we.pressedStyle,className:`${_().DxR} notranslate`,ariaLabel:ve,children:(0,M.jsx)(F,{isInlinePostTitle:se,icon:me,isEmptyPage:D,role:N,title:O,isLarge:V,pageIconStyle:j,disableShrinking:z,useInvertedColors:H,defaultIcon:xe,progressContainerStyle:q,isRaw:K,size:C,emojiSize:T,disabled:ue,label:n,iconBoxStyles:G,largeIcon:$,store:v,placeholderStyle:Y,dataURL:he,isLoading:_e,progressPercent:be??0,disableAnimation:Q||ce.device.prefersReducedMotion,testId:re})})}function B(e){return"team"===(null==e?void 0:e.recordTable)}function R(e,t){return B(e)||t&&l().T8(t.icon)?"icon":"emoji"}async function E(e,t,n,o){t||(f().I(),o&&await o(e),n.reset())}function D(e,t){const{file:n,name:o,size:i}=e;if(f().I(),t.setState({...t.state,isLoading:!0,file:n,name:o,size:i}),n.type.indexOf("image")>=0)if(n instanceof File){const e=new FileReader;e.onload=e=>{t.setState({...t.state,dataURL:e.target.result})},e.readAsDataURL(n)}else t.setState({...t.state,dataURL:n.dataURL})}function N(e,t){const{progressPercent:n,progressText:o}=e;t.setState({...t.state,progressPercent:n,progressText:o})}function L(e,t,n,o){return"unicode_emoji"!==(null==e?void 0:e.icon.type)&&"notion_icon"!==(null==e?void 0:e.icon.type)&&(null==e?void 0:e.pointer.table)!==d().e||n?t:o||t}function O(e,t,n,o,i,r){switch(e){case"emoji":return{type:"emoji",title:(0,M.jsx)(u().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:function(e){return function(e){let t=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;(arguments.length>2?arguments[2]:void 0)||((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).keepVisible||f().I(),t.reset(),n&&n(e))}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i,n,r)},uploadFileEventHandlers:{onStart:e=>D(e,n),onProgress:e=>N(e,n),onComplete:e=>E(e,i,n,r)},tabHeight:S().cx};case"icon":return{type:"icon",title:(0,M.jsx)("div",{style:{display:"flex",gap:4},children:(0,M.jsx)(u().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:function(e){return function(e){let t=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0;(arguments.length>2?arguments[2]:void 0)||((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).keepVisible||f().I(),t.reset(),null==n||n(e))}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i,n,r)},tabHeight:S().cx};case"custom":const a={onStart:e=>D(e,n),onProgress:e=>N(e,n),onComplete:e=>E(e,i,n,r)},s=e=>{var n;const{bucket:i,store:r}=t;v().QM({environment:o,..."secure"===i?{bucket:i,record:(null===(n=r.getIconStore())||void 0===n?void 0:n.pointer)??r.pointer,isFileBlock:!1}:{bucket:i},file:e[0],...a,onError:()=>{g().f1((0,M.jsx)(u().sA,{id:"recordIcon.uploadFileTab.uploadError.message",defaultMessage:"Something went wrong."}))}})};return{type:"customEmoji",title:(0,M.jsx)(u().sA,{defaultMessage:"Upload",id:"recordIcon.uploadTab.title"}),uploadFileEventHandlers:a,onUploadWithoutSaving:e=>{"file"===e.type?s([e.file]):"url"===e.type?function(e,t,n){t||(f().I(),n&&n(e))}(e.url,i,r):(0,p().HB)(e)}};default:(0,p().HB)(e)}}function U(e,t,n,o,i,r,a,s,l,c,d,u,p){const g=e.getBoundingClientRect(),v=(u??["emoji","icon","custom"]).map((e=>O(e,n,a,o,r,d)));f().W(o,{recordIconLoggingData:c,originGap:4,originRect:g,popupWidth:S().jv,isSmallWidth:!1,isCallout:l,title:i.formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:s?void 0:()=>function(e,t,n,o){e||(f().I(),n&&(n(void 0),o&&m().uZ(t,"remove_icon",o)))}(r,o,d,c),currentTab:t,tabs:v,hideCustomEmoji:p}),c&&m().uZ(o,"open_media_picker",c)}function F(e){let{icon:t,isEmptyPage:n,role:i,title:a,isLarge:s,pageIconStyle:l,disableShrinking:c,useInvertedColors:d,defaultIcon:u,progressContainerStyle:m,isRaw:g,size:f,emojiSize:v,disabled:h,label:_,iconBoxStyles:b,largeIcon:S,store:w,placeholderStyle:k,dataURL:I,isLoading:P,progressPercent:B,disableAnimation:R,testId:E,isInlinePostTitle:D}=e;const N=(0,o.useMemo)((()=>L(t,f,I,v)),[t,f,I,v]),O=null==t?void 0:t.icon,U=null==O?void 0:O.emoji,F=(0,r().K8)((()=>{if("custom"!==(null==U?void 0:U.type))return"";const e=w??(0,y().vZ)(),t=null==e?void 0:e.getRecordStore(e,U.pointer);return(null==t?void 0:t.getUrl())??""}),[w,U]);if(I&&P)return(0,M.jsx)(A().A,{type:"data_url",size:N,dataURL:I,isLoading:P,progressPercent:B??0,progressContainerStyle:m,isLarge:s,alt:h?_:void 0,style:b,testId:E});if(O)switch(O.type){case"unicode_emoji":return(0,M.jsx)(x().A,{size:N,emoji:O.icon,disableShrinking:c,isRaw:g,alt:h?_:void 0,testId:E});case"notion_icon":return(0,M.jsx)(A().A,{type:"notion_icon",size:N,icon:O.icon,isLoading:P,progressPercent:B??0,largeIcon:S,alt:h?_:void 0,useInvertedColors:d,testId:E});case"app_package_asset":return(0,M.jsx)(A().A,{type:"app_package_asset",size:N,icon:O.icon,isLoading:P,progressPercent:B??0,alt:h?_:void 0,style:b,testId:E});case"custom_emoji":return(0,M.jsx)(A().A,{type:"authenticated_image_url",size:N,permissionRecord:O.emoji.pointer,imageURL:F,isLoading:P,progressPercent:B??0,largeIcon:S,isLarge:s,alt:h?_:void 0,style:b,disableAnimation:R,testId:E});case"url":return(0,M.jsx)(A().A,{type:"authenticated_image_url",size:N,permissionRecord:t.pointer,imageURL:O.icon,isLoading:P,progressPercent:B??0,largeIcon:S,isLarge:s,alt:h?_:void 0,style:b,disableAnimation:R,testId:E});default:(0,p().HB)(O)}return u?(0,M.jsx)(M.Fragment,{children:u}):a?(0,M.jsx)(C().A,{size:N,title:a,isLarge:s,useInvertedColors:d,alt:h?_:void 0,style:b,placeholderStyle:k,testId:E}):(0,M.jsx)(T().A,{isInlinePostTitle:D,size:N,isEmptyPage:n,role:i,isLarge:s,pageIconStyle:l,alt:h?_:void 0,testId:E})}},616610:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>i});var o=()=>n(221844);const i="AssistantCaches",r=`${i}.updatesCache`,a=`${i}.diffCache`;class s{constructor(){this.updatesCache=void 0,this.diffCache=void 0,this.updatesCache=new(o().A)({name:r,isTemporaryData:!0}),this.diffCache=new(o().A)({name:a,isTemporaryData:!0})}getDiffCacheOnlyForTests(){return this.diffCache}ensureDefaultCacheOverride(e){const t=e.defaultRecordCache.inMemoryRecordCache;this.updatesCache.addCacheFallback(t),t.hasCacheOverride(this.diffCache)||t.addCacheOverride(this.diffCache)}removeDefaultCacheOverride(e){this.clear();const t=e.defaultRecordCache.inMemoryRecordCache;t.removeCacheOverride(this.diffCache),this.updatesCache.removeCacheFallback(t)}clear(){this.updatesCache.clearCache(),this.diffCache.clearCache()}commitTransaction(e){const{transactionActions:t,environment:n,perform:o,...i}=e,r=this;t.createAndCommit({environment:n,perform(e){o(e,r.updatesCache,!0),o(e,r.diffCache,!1)},canUndo:!0,...i})}commitDiffPreviewTransaction(e){const{transactionActions:t,environment:n,perform:o,...i}=e,{diffCache:r}=this;t.createAndCommit({environment:n,perform(e){o(e,r,!1)},canUndo:!0,...i})}makeGetRecordValueFnFromUpdatesCache(e){return this.updatesCache.makeGetRecordValueFn(e)}makeGetRecordValueFnFromDiffCache(e){return this.diffCache.makeGetRecordValueFn(e)}}},619133:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(401497),r=()=>n(546703),a=()=>n(987555),s=()=>n(926401),l=()=>n(47966),c=n(474848);function d(e){const t=(0,i().DP)(),n=(0,o.useMemo)((()=>{const n=e.size*(e.isLarge?1:.9),o={width:n,height:n,fill:e.isInlinePostTitle?t.icon.tertiary:t.icon.secondary,...e.pageIconStyle};return e.isInlinePostTitle?(0,r().r)(o):"none"===e.role?(0,a().T)(o):e.isEmptyPage?(0,l().Y)(o):(0,s().n)(o)}),[e.isEmptyPage,e.isLarge,e.pageIconStyle,e.role,e.size,t.icon.secondary,e.isInlinePostTitle,t.icon.tertiary]);return(0,c.jsx)("span",{role:"img","aria-label":e.alt,children:n})}},619400:(e,t,n)=>{n.d(t,{V:()=>u,openGoogleDriveFilePicker:()=>c});var o=()=>n(299917),i=()=>n(861017),r=()=>n(559926),a=()=>n(705540),s=()=>n(780054),l=()=>n(508496);async function c(e){const{environment:t,accessToken:n}=e;r().QV(t,{from:e.from});let c;if(l().default.checkGate({gateName:"gdrive_scope_migration_gate"})&&(c=l().default.getConfigKey("gdrive_app_id","app_id")),t.device.isElectron){const t=(0,i().S_)(s().A.domainBaseUrl,{token:n,viewType:e.viewType,appId:c,initialFileId:e.initialFileId}),o=await a().openGoogleDrivePickerPopup({url:t});if(!o)return;"integration"in e?e.callback(!1,o.url):e.callback(o.id)}else await(0,o().Ay)("https://apis.google.com/js/api.js"),"integration"in e?window.gapi.load("picker",(()=>d({environment:t,accessToken:n,callback:e.callback,integration:e.integration,viewType:e.viewType,initialFileId:e.initialFileId,appId:c}))):window.gapi.load("picker",(()=>d({environment:t,accessToken:n,callback:e.callback,viewType:e.viewType,initialFileId:e.initialFileId,appId:c})))}function d(e){const{environment:t,accessToken:n,initialFileId:o,appId:i}=e,a=`${window.location.protocol}//${window.location.host}`,s=new window.google.picker.DocsView(e.viewType);o&&(s.setIncludeFolders(!0),s.setSelectFolderEnabled(!0),s.setFileIds(o));(new window.google.picker.PickerBuilder).enableFeature(window.google.picker.Feature.SUPPORT_DRIVES).setOAuthToken(n).hideTitleBar().addView(s).setOrigin(a).setAppId(i||"").setCallback((n=>{if(n.action===window.google.picker.Action.PICKED&&n.docs&&n.docs.length>0){const o=n.docs[0];"integration"in e?e.callback(!1,o.url):e.callback(o.id),r().QV(t,{from:"link_preview_placeholder"})}})).build().setVisible(!0)}function u(){return l().default.checkGate({gateName:"google_doc_importer"})}},620149:(e,t,n)=>{n.d(t,{A:()=>a,l:()=>r});class o extends(()=>n(757695))().default{constructor(){super(...arguments),this.updateRemaining=e=>{this.state.remainingPending!==e&&(0===e?this.setState({...this.state,totalPending:0,remainingPending:0}):this.setState({...this.state,remainingPending:e}))}}getInitialState(){return{totalPending:0,remainingPending:0,transactionQueueError:void 0,storageUsageEstimate:void 0,connectionError:void 0}}percentComplete(e){if(this.state.totalPending>0){const t=1-this.state.remainingPending/this.state.totalPending;return e.formatNumber(t,{style:"percent",maximumFractionDigits:0})}return e.formatNumber(1,{style:"percent"})}setOrIncTotal(e){this.state.totalPending>e?this.setState({...this.state,totalPending:this.state.totalPending+1}):this.setState({...this.state,totalPending:e})}}const i=new o,r=new(n(496506).default)((()=>Boolean(i.state.transactionQueueError)),{debugName:"transactionQueueUnhealthyStore"}),a=i},620333:(e,t,n)=>{n.d(t,{U7:()=>c,YT:()=>s,fo:()=>l,l0:()=>d,lv:()=>a,mk:()=>r});n(898992),n(803949),n(581454);var o=()=>n(534177),i=()=>n(763884);function r(e){let{searchSessionId:t,searchSessionFlowNumber:n}=e;if((0,o().O9)(t)&&(0,o().O9)(n))return`1:${t}:${n}`}const a="SearchShowFilterBar";function s(e){return function(e){const{key:t,userId:n,defaultValue:o}=e,r=i().K.get({userId:n,key:t});if(void 0===r)return o;if("boolean"!=typeof r)return!1;return r}({key:a,userId:e,defaultValue:!1})}const l=/(?:\s|^)-("[^"]+"|[\w]+)(?=\s|$)/g,c=/(?:\s|^)"([^"]*)"(?=\s|$)/g;function d(e){var t;if(!e)return{quotedTerms:[],stringWithoutQuotedTerms:e};const n=e.replace(/\p{Quotation_Mark}/gu,'"');const o=null===(t=n.match(c))||void 0===t?void 0:t.map((e=>e.trim()));if(!o)return{quotedTerms:[],stringWithoutQuotedTerms:e};let i=n;return o.forEach((e=>{i=i.replace(e,"")})),i=i.replace(/\s+/g," ").trim(),{quotedTerms:o,stringWithoutQuotedTerms:i}}},620689:(e,t,n)=>{n.d(t,{u5:()=>Z,pS:()=>$,C6:()=>K,z_:()=>G,hT:()=>V,pb:()=>j,BL:()=>H,BM:()=>z,lJ:()=>N});n(898992),n(672577),n(581454);var o=()=>n(959180),i=()=>n(496603),r=()=>n(231722),a=()=>n(953418),s=()=>n(333665),l=()=>n(906537),c=()=>n(494237),d=()=>n(447438),u=()=>n(556544),p=()=>n(695625),m=()=>n(110955),g=()=>n(521099),f=()=>n(155959),v=()=>n(756279),h=()=>n(353643),_=()=>n(176106),b=()=>n(375447),y=()=>n(574012),S=()=>n(205682),w=()=>n(77238),k=()=>n(712505),I=()=>n(630116),x=()=>n(93658),A=()=>n(502438),C=()=>n(24157);function T(e,t){n(989423).vd(e,"drag_near_edge_scroll",t)}function M(e,t,n,o){const i=(n-t)/n,r=o/10/60,a=r+(3*o/60-r)*Math.min(i*i,1);return e.device.isIOS?Math.ceil(a):a}const P=1e3,B=i().nF((e=>{T(e,{direction:"top"})}),P),R=i().nF((e=>{T(e,{direction:"bottom"})}),P),E=i().nF((e=>{T(e,{direction:"left"})}),P),D=i().nF((e=>{T(e,{direction:"right"})}),P);function N(e){const{environment:t,scroller:n,currentMouseX:o,currentMouseY:i}=e,r=n.getStore();r.measureSize();const a=x().default.state,s=h().A.state.disableVerticalEdgeScroll||!!a.isActive&&!a.allowVerticalEdgeScroll,l=h().A.state.disableHorizontalEdgeScroll||!!a.isActive&&!a.allowHorizontalEdgeScroll,c=function(e,t){const{device:n}=e,{clientRect:o}=t.state;let i=o&&o.height?o.height:0;n.isMobile?i*=.2:i*=.1;return i=Math.max(i,20),i}(t,r),d=function(e,t){const{device:n}=e,{clientRect:o}=t.state;let i=o&&o.width?o.width:0;n.isMobile?i*=.2:i*=.08;return i=Math.max(i,20),i}(t,r),{clientRect:u,elementRef:p}=r.state;if(!u||!p.current)return;const m=p.current,g=m.scrollHeight,_=m.scrollWidth,b=m.scrollLeft,S=m.scrollTop;if(n.getOverflowType()!==v().A.X&&!s){const e=i-u.top;let n,o;y().A.state.phase!==y().i.shown?(n=c,o=(0,f().T)("supportsNativeBottomBarOverlappingWebView")?u.bottom-y().A.mobileNativeBottomPadding(t)-i:u.bottom-i):(n=.25*y().A.keyboardHeight(),o=u.bottom-y().A.mobileNativeBottomPadding(t)+n-i);const r=0===S,a=S+u.height===g;if(e<c&&!r){const n=M(t,e,c,u.height);m.scrollTo({top:S-n}),n>0&&B(t)}if(o<n&&!a){const e=M(t,o,n,u.height);m.scrollTo({top:S+e}),e>0&&R(t)}}if(n.getOverflowType()!==v().A.Y&&!l){const e=o-u.left,n=u.right-o,i=0===b,r=b+u.width===_;if(e<d&&!i){const n=M(t,e,d,u.width);m.scrollTo({left:b-n}),n>0&&E(t)}if(n<d&&!r){const e=M(t,n,d,u.width);m.scrollTo({left:b+e}),e>0&&D(t)}}}const L=64,O=64,U=64,F=64;function V(e){const{element:t,environment:n,scrollerContext:o,vertical:i,horizontal:r,animate:s,centerVertically:l}=e,c=t.getBoundingClientRect();if(i&&null!=o&&o.verticalScroller){const{reveal:e}=i,t=i.paddingToTopEdge||L,r=i.paddingToBottomEdge||O,d=o.verticalScroller,u=d&&d.getClientRect();if(d&&u){const o=u.bottom-r,i=l?u.height/2:0,p=u.top+t+i,m=c.top>p&&c.top<o,g=c.bottom>p&&c.bottom<o,f=c.top<p&&c.bottom>o,v=c.bottom-o,h=c.top-p;"top"===e?m||a().HN({element:d.getNode(),environment:n,options:{top:h,left:0,behavior:s?"smooth":"auto"}}):"bottom"===e?g||a().HN({element:d.getNode(),environment:n,options:{top:v,left:0,behavior:s?"smooth":"auto"}}):m||g||f||(Math.abs(v)<Math.abs(h)?a().HN({element:d.getNode(),environment:n,options:{top:v,left:0,behavior:s?"smooth":"auto"}}):a().HN({element:d.getNode(),environment:n,options:{top:h,left:0,behavior:s?"smooth":"auto"}}))}}if(r&&null!=o&&o.horizontalScroller){const{reveal:e}=r,t=r.paddingToLeftEdge||F,i=r.paddingToRightEdge||U,l=o.horizontalScroller,d=l&&l.getClientRect();if(l&&d){const o=d.left+t,r=d.right-i,u=c.left>o&&c.left<r,p=c.right>o&&c.right<r,m=c.left<o&&c.right>r,g=c.right-r,f=c.left-o;"left"===e?u||a().HN({element:l.getNode(),environment:n,options:{left:f,top:0,behavior:s?"smooth":"auto"}}):"right"===e?p||a().HN({element:l.getNode(),environment:n,options:{left:g,top:0,behavior:s?"smooth":"auto"}}):u||p||m||(Math.abs(g)<Math.abs(f)?a().HN({element:l.getNode(),environment:n,options:{left:g,top:0,behavior:s?"smooth":"auto"}}):a().HN({element:l.getNode(),environment:n,options:{left:f,top:0,behavior:s?"smooth":"auto"}}))}}}function j(e){const{handle:t,horizontal:n,vertical:i,animate:r,environment:a}=e;if(!t)return;const s=(0,o().g)(t);return s?V({vertical:i,animate:r,horizontal:n,element:s,environment:a,scrollerContext:t.getScrollerContext()}):void 0}function z(e){if(A().default.state.pivot)H([A().default.state.pivot.id],(null==e?void 0:e.animate)??!1,null==e?void 0:e.environment);else{H(A().default.state.stores.map((e=>e.id)),(null==e?void 0:e.animate)??!1,null==e?void 0:e.environment)}}function H(e,t,n){const o=p().T.findScrollToSelectablesFromIds(e)[0];if(o){const{disableScrollToRevealHorizontal:e}=o.props;j({environment:n,handle:o,vertical:{reveal:"closest"},horizontal:e?void 0:{reveal:"closest"},animate:t})}}let W=function(e){return e[e.top=0]="top",e[e.middle=1]="middle",e[e.bottom=2]="bottom",e[e.natural=3]="natural",e}({});function q(e){let{position:t}=e;const{paddingTop:n,environment:o}=e;if("editing"!==C().default.state.mode)return;let i=e.paddingBottom;c().A.find((e=>e.isShown()))&&(i+=g().j);const r=l().get();if(r){const e=a().gi(r.commonAncestorContainer);if(!e)return;const s=a().sl(e).find((e=>e.scrollHeight>e.clientHeight));if(!s)return;const c=l().getRect(r);if(!c||!s)return;const d=s.getBoundingClientRect();if(!(r.startContainer instanceof Text)){const e=c;e.top+=4,e.bottom-=5,e.height-=9}const u=c.top<d.top+n,p=c.bottom>d.bottom-i;if(r.startContainer instanceof Text&&r.startOffset!==r.endOffset)return;if(t===W.natural)if(p)t=W.bottom;else{if(!u)return;t=W.top}if(t===W.top){const e=s.scrollTop+c.top,t=d.top+n;a().VG({element:s,environment:o,options:{top:e-t,behavior:"smooth"}})}else if(t===W.bottom){const e=s.scrollTop+c.bottom,t=d.bottom-i;a().VG({element:s,environment:o,options:{top:e-t,behavior:"smooth"}})}else if(t===W.middle){const e=s.scrollTop+c.top,t=d.top+d.height/2-10;a().VG({element:s,environment:o,options:{top:e-t,behavior:"smooth"}})}}}function K(e){return y().A.mobileNativeBottomPadding(e)+20}function G(e){if(u().A.isInlineAutocompleteOpen())return!0;if(_().A.state.open||_().A.state.willOpen)return!0;if(m().A.state.open)return!0;if(e.device.isMobileNative&&e.device.isPhone){if(b().A.state.open){const e=b().A.state;if("+"!==e.insertionType)return!0;const t=(0,s().aX)(e.textStore,e.oldTextValue,e.isEmptyPageTitle?"":e.insertionType),n=(0,s().mX)(e.textStore,t);if(t&&""!==(null==n?void 0:n.trim()))return!0}if(function(){var e;const t="editing"===C().default.state.mode&&(null===(e=(0,r().H7)(C().default.state.multiSelection))||void 0===e?void 0:e.store);if(t){const e=t.getRecordStoreAtRootPath();if(e instanceof I().Bv){const t=e.getValue(),n=t&&t.type;return"link_to_page"===n||"link_to_collection"===n}}return!1}())return!0}return!1}function $(e){const t=d().A.shouldPreventMobileAutoScroll(e),n=K(e);G(e)?q({environment:e,position:W.top,paddingTop:20+Y(),paddingBottom:n+40}):t||S().A.state.isOpen&&!k().default.state.open||w().A.state.isOpen||q({environment:e,position:W.natural,paddingTop:20,paddingBottom:n+40})}function Y(){return _().A.state.willOpen||_().A.state.open?64:0}const Q=i().Oo((e=>{const{device:t}=e;return new(n(496506).default)((()=>t.isMobile&&h().A.state.isDragging||t.isMobile&&n(429825).A.state.swiping?v().A.All:n(595985).A.getPreventScrollType()),{debugName:"preventScrollTypeStore"})}));function Z(e){return Q(e).state}},621793:(e,t,n)=>{n.d(t,{Jl:()=>i,XI:()=>r,kR:()=>s,m7:()=>l});var o=()=>n(878377);const i=[function(e){return(0,n(68465).ZE)(e.publicEditMode)},o().p2L,o().AU6(o().J$q)],r=[...i,o().AU6(o().vEP),o().AU6(o().yAQ)];function a(e){return!n(430483).zD.isAssistantInWriterEnabled()}const s=[...r,a],l=[...r,e=>!a()]},621979:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(737550);var o=n.n(n(36545)),i=()=>n(496603);const r=function e(t,n,r){if(Array.isArray(r))return r.some((o=>e(t,n,o)));{const e=r.toLowerCase().split("+");if(t.device.isWindows||t.device.isLinux){if((i().mK(e,"command")||i().mK(e,"ctrl"))!==n.ctrlKey)return!1}else{if(i().mK(e,"command")!==n.metaKey)return!1;if(i().mK(e,"ctrl")!==n.ctrlKey)return!1}return i().mK(e,"shift")===n.shiftKey&&(i().mK(e,"alt")===n.altKey&&i().Si(e,(e=>{if("command"===e||"shift"===e||"ctrl"===e||"alt"===e)return!0;const t="code:";if(e.startsWith(t)&&n.code){const t=e.substr(5);return n.code.toLowerCase()===t}return o()(n.keyCode)===e})))}}},622232:(e,t,n)=>{n.d(t,{$:()=>y});var o=()=>n(584262),i=()=>n(197959),r=()=>n(161479),a=()=>n(496603),s=()=>n(928152),l=()=>n(300857),c=()=>n(347199),d=()=>n(712287),u=()=>n(517223),p=()=>n(455994),m=()=>n(644914),g=()=>n(351360),f=()=>n(783848),v=()=>n(630116),h=()=>n(427155),_=()=>n(112873),b=()=>n(797265);function y(e,t){var n;const{RouterStore:y}=e,S=y.state.route;if("page"!==S.name&&"chat"!==S.name)return;if(!g().default.state.currentLoadingContainerStore&&"page"===S.name)return;if((null===(n=g().default.state.currentLoadingContainerStore)||void 0===n||!n.state.ready)&&"page"===S.name)return;if(f().A.reset(),h().A.reset(),S.scrollToBlockId)return void b().Ls(e,{blockId:S.scrollToBlockId,animate:t.animateScrollToBlocks,shouldScroll:t.shouldScroll,onSelect:(0,s().W)(e)});if("page"===S.name&&S.discussionId&&g().default.state.mainEditorCurrentBlockStore){var w;const t=null===(w=v().sk.createChildStore(g().default.state.mainEditorCurrentBlockStore,{table:i().$Y,id:S.discussionId,spaceId:(0,r().e)(g().default.state.mainEditorCurrentBlockStore.pointer.spaceId)}))||void 0===w?void 0:w.getPropertyId();if(t){if(!(0,l().b)({discussionId:S.discussionId,blockId:g().default.state.mainEditorCurrentBlockStore.id,environment:e})){var k;const n=null===(k=g().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore())||void 0===k?void 0:k.getLayoutStore(),o=Boolean(n&&(0,u().Hc)({layoutStore:n,propertyId:t}).isPropertyInPageDetails);if(!(0,m().uX)(e)&&o)return(0,d().j)({environment:e,layoutStore:n,from:"discussion_url",panelLocation:"mainPage"}),void p().A.update((e=>({...e,propertyIdDiscussionToOpenOnPanelOpen:t})))}}const n=S.pageVisitSource?parseInt(S.pageVisitSource):void 0;return void _().B4({environment:e,blockStore:g().default.state.mainEditorCurrentBlockStore,discussionIds:[S.discussionId],analyticsFrom:n===o().y8.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1,property_id:t})}const{PageScroller:I}=c().A;if("pop"===y.state.action&&y.state.historyState){var x;if(I&&a().Et(y.state.historyState.scrollTop))null===(x=I.getNode())||void 0===x||x.scrollTo({top:y.state.historyState.scrollTop});y.state.historyState.blockIds&&b().dL(e,y.state.historyState.blockIds)}}},622237:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{editorWidth:void 0,peekViewEditorWidth:void 0}}setWidth(e,t){t?this.setPeekViewEditorWidth(e):this.setEditorWidth(e)}setEditorWidth(e){this.setState({...this.state,editorWidth:e})}setPeekViewEditorWidth(e){this.setState({...this.state,peekViewEditorWidth:e})}getWidth(e){return e?this.getPeekViewEditorWidth():this.getEditorWidth()}getEditorWidth(){return this.state.editorWidth}getPeekViewEditorWidth(){return this.state.peekViewEditorWidth}}const i=new o},622963:(e,t,n)=>{n.d(t,{As:()=>r,_y:()=>s,gG:()=>i,vK:()=>a});var o=()=>n(534177);const i=["free","plus","business","enterprise"],r=["team_monthly_10","team_yearly_96","plus_monthly_eur","plus_yearly_eur","plus_monthly_gbp","plus_yearly_gbp"];function a(e){switch(e){case"free":case"student":case"personal":case"plus":case"business":case"enterprise":case"ai":return"seats";case"sites_custom_hostnames":return"public_domain_custom_hostnames";default:(0,o().HB)(e)}}function s(e){switch(e){case"free":case"personal_free":case"team_free":return"free";case"student":case"personal":case"plus":case"business":case"enterprise":return e;default:(0,o().HB)(e)}}},623580:(e,t,n)=>{n.d(t,{A:()=>o().A,C:()=>o().C});var o=()=>n(903706)},624090:(e,t,n)=>{n.d(t,{BT:()=>p,I4:()=>c,NA:()=>g,XX:()=>m,mZ:()=>s,mu:()=>l,qI:()=>d,uZ:()=>u,vw:()=>f});var o=()=>n(720665),i=()=>n(142748),r=()=>n(179034),a=()=>n(979340);const s=1714158352e3,l=17240832e5,c=30*o().i5,d=30*o().i5;function u(e,t){const n=(0,i().nz)(e,t);if((null==n?void 0:n.table)===r().ev)return n.getDeletedFromTrashTime()}function p(e,t){const n=(0,i().O)({recordPointer:e,getRecordModel:t});if((null==n?void 0:n.table)===r().ev)return n.getMovedToTrashTime()}function m(e){if(!e||!(0,a().OX)(e.getSubscriptionTier()))return 1e3*c;return 1e3*(e.getSetting("delete_from_trash_delay_seconds")??c)}function g(e){if(!e||!(0,a().OX)(e.getSubscriptionTier()))return 1e3*d;return 1e3*(e.getSetting("purge_delay_seconds")??d)}function f(e){let{movedToTrashTime:t,deleteFromTrashDelayMs:n,cdrrDeletionEnabledTimestamp:o}=e;const i=t??s;return(i<o?o:i)+n}},624307:(e,t,n)=>{n.d(t,{A:()=>i,C:()=>o});let o=function(e){return e.Updates="updates",e.Home="home",e}({});const i=new(n(463830).A)},625830:(e,t,n)=>{n.d(t,{A:()=>_,K:()=>b});var o=n(296540),i=()=>n(401497),r=()=>n(831310),a=()=>n(968307),s=()=>n(834368),l=()=>n(168687),c=()=>n(953624),d=()=>n(753476),u=()=>n(100622),p=()=>n(720665),m=()=>n(963589),g=()=>n(700239),f=()=>n(73332),v=()=>n(859428),h=n(474848);function _(e){return(0,m().X)("new_checkbox_design_enabled")?(0,h.jsx)(f().T,{...(0,p().cJ)(e,["checkSize"])}):(0,h.jsx)(b,{...e})}function b(e){let{checked:t,disabled:n=!1,onClick:p,size:m,checkSize:f=12,fill:_,round:b=!1,thinOutline:y=!1,style:S,tooltipHeader:w,tapArea:k,checkedColor:I=u().Ay.blue,withComma:x,id:A,disallowTabbing:C,...T}=e;const M=k?k.size:m,P=(0,i().DP)(),B=(0,i().IS)((()=>({root:{width:m,height:m,display:"flex",alignItems:"center",justifyContent:"center",transition:"background 200ms ease-out",...!1!==t&&{background:I},...b&&{borderRadius:"50%"},...S},input:{width:M,height:M,top:-(M-m)/2,left:-(M-m)/2}})),[m,M,t,b,S,I]),R=(0,o.useMemo)((()=>!0===t||"partial"===t?("partial"===t?l().t:r().o)({fill:u().Ay.white,width:f,height:f}):b?y?"light"===P.mode?(0,c().k)({fill:_}):(0,d().e)({fill:_}):(0,a().Z)({fill:_}):(0,s().K)({fill:_})),[t,b,y,_,f,P.mode]),E=e=>(0,h.jsxs)(o.Fragment,{children:[(0,h.jsx)(g().A,{checked:t,disabled:n,onClick:p,style:B.root,inputStyle:B.input,id:A,disallowTabbing:C,...T,...e,children:(0,h.jsx)("div",{"aria-hidden":"true",children:R})}),x?", ":""]});return w?(0,h.jsx)(v().A,{renderTooltip:()=>w,render:e=>E(e)}):E()}},627506:(e,t,n)=>{n.d(t,{_:()=>v});var o=()=>n(945610),i=()=>n(301608),r=()=>n(496603),a=()=>n(763824),s=()=>n(498212),l=()=>n(792415),c=()=>n(351360),d=()=>n(151059),u=()=>n(134217),p=()=>n(10984),m=()=>n(749240),g=()=>n(186445),f=()=>n(640653);n(581454);async function v(e){var t;await(0,a().nQ)(2e3,Promise.all([m().subscriptionDataStoreInstance.waitUntilLoaded(),l().A.waitUntilLoaded()]));const n=m().subscriptionDataStoreInstance.state,{currentUserStore:v,currentSpaceStore:h}=c().default.state,{publicPageData:_}=l().A.state,b=(0,g().s0)(),y=b?(0,s().ot)(b):void 0,{mainEditorCurrentBlockStore:S}=c().default.state,w=null!=h&&h.isDefined()?{id:null==h?void 0:h.id,settings:null==h?void 0:h.getSettings(),email_domains:null==h?void 0:h.getEmailDomains(),plan_type:null==h?void 0:h.getPlanType(),initial_use_cases:null==h?void 0:h.getInitialUseCases(),invite_link_enabled:null==h?void 0:h.getInviteLinkEnabled(),created_by_id:null==h?void 0:h.getCreatedById(),created_time:h.getCreatedTime()}:void 0,k=(null==h?void 0:h.id)||(null==_?void 0:_.spaceId)||(null==S?void 0:S.getSpaceId()),I=Boolean(null==w||null===(t=w.settings)||void 0===t?void 0:t.is_teams_enabled),x=(A=c().default.state.currentUserRootStore)&&A.isReady()?r().sb(A.getSpaceViewStores().map((e=>e.getSpaceId()))).length:void 0;var A;if(k&&v&&h&&n){const t=d().A.getData(e,{spaceId:k}),a=u().Fq(n),l=u().Be(n).length||0,c=await(0,f().Pu)({environment:e,spaceId:k})??1,m=await(0,f().hx)({environment:e,spaceId:k})??0,g=n.hasPaidNonzero,v=t?t.domain:void 0,_=w&&w.email_domains?w.email_domains:void 0,b=u().Bl(e,n,k),S=(0,f().mQ)(t),A=(0,f().u_)(t),C=r().Et(b)&&!Number.isNaN(b)&&b!==1/0?b:0;return{space_analytics_data_type:o().$.SPACE_MEMBER_DATA,subscription_tier:(0,p().AI)(),page_id:y,space_id:(0,s().ot)(k),space_is_subscribed:a,space_visible_total:l,space_visible_members:c,space_visible_guests:m,space_visible_members_bucketized:(0,i()._v)(c),space_block_usage:u().hr(e,n,k),space_block_usage_over_limit:u().V$(e,n,k),space_role:h.getRole(),space_block_usage_percent:C,space_timeline_view_usage:0,space_created_time:S,available_credit:0,space_domain:v,space_email_domains:_,space_has_paid_nonzero:g,space_plan_type:A,space_initial_use_cases:w?w.initial_use_cases:void 0,space_invite_link_enabled:null==w?void 0:w.invite_link_enabled,space_created_by:null!=w&&w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:x}}if(_){const t=_.spaceId?d().A.getData(e,{spaceId:_.spaceId}):void 0,n=(0,f().mQ)(t),i=(0,f().u_)(t);return{space_analytics_data_type:o().$.SPACE_NONMEMBER_DATA,space_id:k?(0,s().ot)(k):void 0,space_domain:_.spaceDomain,page_id:y,subscription_tier:(0,p().AI)(),space_created_time:n,space_plan_type:i,space_invite_link_enabled:null==w?void 0:w.invite_link_enabled,space_created_by:null!=w&&w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:x}}return w?{space_analytics_data_type:o().$.BASE_SPACE_DATA,space_id:(0,s().ot)(w.id),space_created_time:w.created_time,space_plan_type:w.plan_type,space_invite_link_enabled:w.invite_link_enabled,space_created_by:w.created_by_id?(0,s().ot)(w.created_by_id):void 0,teams_is_enabled:I,current_space_view_count:x}:{space_analytics_data_type:o().$.SPACE_DATA_NOT_LOADED,space_id:null!=h&&h.id?(0,s().ot)(null==h?void 0:h.id):void 0,current_space_view_count:x}}},628149:(e,t,n)=>{n.d(t,{Z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("codeOnly",{viewBox:"0 0 24 20",svg:(0,o.jsx)("path",{d:"M8.093 13.62c.458.123.875-.123 1.011-.58l3.364-11.533c.13-.43-.082-.855-.54-.978-.451-.123-.848.075-.998.581L7.58 12.595c-.137.465.041.895.513 1.025zM.115 7.064c0 .233.103.472.301.643l4.423 3.992c.362.328.848.322 1.148-.02.308-.342.267-.834-.082-1.149L2.077 7.064l3.828-3.472c.349-.315.39-.8.082-1.142-.3-.342-.786-.348-1.148-.02L.416 6.415a.879.879 0 00-.3.65zm19.763 0a.878.878 0 00-.3-.649L15.153 2.43c-.362-.328-.847-.322-1.148.02-.308.342-.267.827.082 1.142l3.828 3.472-3.828 3.466c-.349.315-.39.807-.082 1.149.3.341.786.348 1.148.02l4.423-3.992c.198-.17.3-.41.3-.643z"})})},628315:(e,t,n)=>{n.d(t,{Wf:()=>P,OX:()=>T,a:()=>C,Ez:()=>A,UW:()=>x,TD:()=>V,HH:()=>O,wK:()=>U,X3:()=>N,bc:()=>M,nS:()=>D,rG:()=>k,r5:()=>F,$j:()=>I,Y1:()=>E,mg:()=>R});n(898992),n(354520),n(581454);var o=()=>n(244641),i=()=>n(722559),r=()=>n(690495),a=()=>n(917629),s=()=>n(449506),l=()=>n(72234),c=()=>n(751156),d=()=>n(755199),u=()=>n(780054),p=()=>n(351360);n(944114);class m{constructor(e){if(this.exposures=void 0,this.exposures=new Map,e)for(const t of e){const e=(0,i().$s)(t.placement);if(e&&t.timestamps){const n=this.exposures.get(e);n?n.push(...t.timestamps):this.exposures.set(e,[...t.timestamps])}}}get(e){return this.exposures.get(e)??[]}add(e,t){let n=this.get(e);n.push(t),n.sort(((e,t)=>e-t)),n.length>10&&(n=n.slice(n.length-10)),this.exposures.set(e,n)}exportUserSetting(){return Array.from(this.exposures.entries()).map((e=>{let[t,n]=e;return{placement:t,timestamps:n}}))}}var g=()=>n(720665);class f{constructor(e){this.name=void 0,this.name=e}}n(737550);class v extends f{constructor(e,t,n){super("FrequencyCapRule"),this.placement=void 0,this.cap=void 0,this.window=void 0,this.placement=e,this.cap=t,this.window=n}check(e,t){var n;const i=null===(n=p().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettings();if(!i)return!1;const r=new m(null==i?void 0:i.callout_placement_exposures);let a;a="all"===this.placement?Array.from(r.exposures.values()).flat():r.get(this.placement);const s=o().c9.now().toMillis()-this.window;return a.filter((e=>e>=s)).length<this.cap}}var h=()=>n(131448);class _ extends f{constructor(e){super("MaxConcurrentRule"),this.maxConcurrent=void 0,this.maxConcurrent=e}check(e,t){const n=(0,i().Q3)(t);return h().default.getMessagesForPlacement(n).length<this.maxConcurrent}}class b extends f{constructor(e){super("MinimumAccountAgeRule"),this.minimumAccountAge=void 0,this.minimumAccountAge=e}check(e,t){var n;const i=null===(n=p().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettings();if(!i||!i.signup_time)return!1;return o().c9.now().toMillis()-i.signup_time>this.minimumAccountAge}}const y=[new class extends f{constructor(){super("DismissalRule")}check(e,t){const n=(0,i().K0)(t);if("once_per_user"===n){var o,r;const e=null===(o=p().default.state.currentUserSettingsStore)||void 0===o?void 0:o.getSettings();return!!e&&!(null!==(r=e.callout_dismissal_timestamps)&&void 0!==r&&r.some((e=>e.name===t.key)))}if("once_per_space"===n){var a,s;const e=null===(a=p().default.state.currentSpaceViewStore)||void 0===a?void 0:a.getSettings();return!!e&&!(null!==(s=e.callout_dismissal_timestamps)&&void 0!==s&&s.some((e=>e.name===t.key)))}return!0}},new class extends f{constructor(){super("BlocklistRule")}check(e,t){const o=n(508496).default.getConfigKey("callout_config","callout_blocklist");return!o||!o.includes(t.key)}},new class extends f{constructor(){super("CorrectPlatformRule")}check(e,t){const n=(0,i().zL)(e.device);return(0,i().tr)(t).includes(n)}},new class extends f{constructor(){super("WithinStartEndRule")}check(e,t){const n="static"===t.type&&t.key in r().lU?r().lU[t.key]:void 0;if(n&&"campaign"===n.type){const e="start"in n?n.start:void 0,t=e?o().c9.fromMillis(e).plus({days:r().VT}).toMillis():void 0,i=n.end??t,a=o().c9.now().toMillis();return(!e||a>=e)&&(!i||a<=i)}return!0}}],S={Modal:[new b(4*g().nD),new v("Modal",1,g().lG),new _(1)],SidebarFooter:[new class extends f{constructor(e){super("SeenExpirationRule"),this.maxDaysSinceSeen=void 0,this.maxDaysSinceSeen=e}check(e,t){var n,i;const r=null===(n=p().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettings(),a=null==r||null===(i=r.callout_seen_timestamps)||void 0===i?void 0:i[t.key];if(a){if(o().c9.now().toMillis()-a>this.maxDaysSinceSeen)return!1}return!0}}(Number(g().nD)),new b(Number(g().nD)),new _(1)],Tooltip:[new v("Tooltip",1,g().nD)],None:[]};var w=()=>n(731741);function k(e,t,n){const{force:r,skipDefaultRules:a}=n??{};if(!r){const n=function(e,t,n){for(const i of y){var o;if(!(null!=n&&null!==(o=n.skipDefaultRules)&&void 0!==o&&o.includes(i.name)||i.check(e,t)))return{success:!1,error:i.name}}const r=(0,i().Q3)(t);for(const i of S[r]){var a;if(!(null!=n&&null!==(a=n.skipDefaultRules)&&void 0!==a&&a.includes(i.name)||i.check(e,t)))return{success:!1,error:i.name}}return{success:!0}}(e,t,{skipDefaultRules:a});if(!n.success)return n}if(!p().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!0,validateCanShow:!r}))return{success:!1,error:"InAppCalloutStore"};const s=(0,i().Q3)(t);if("Modal"===s||"SidebarFooter"===s)for(const[o,l]of h().default.state.messages)(0,i().Q3)(l)===s&&h().default.removeMessage(l.key);return h().default.addMessage(t,r),function(e,t){const n=p().default.state.currentUserSettingsStore,i=null==n?void 0:n.getSettings();if(!n||!i)return;const r={...i.callout_seen_timestamps??{}};r[t.key]||(r[t.key]=o().c9.now().toMillis());c().createAndCommit({environment:e,userAction:"messageActions.addMessageSeen",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{callout_seen_timestamps:r}})}})}(e,t),{success:!0}}function I(e,t,n){return k(e,{id:"",type:"static",key:t,props:{}},n)}function x(e,t){A(e,{id:"",type:"static",key:t,props:{}})}function A(e,t){k(e,t,{force:!0})}function C(e,t){T(e,{id:"",key:t,type:"static",props:{}})}function T(e,t){if(h().default.isVisible(t.key)&&(h().default.removeMessage(t.key),!u().A.isAdminMode)){!function(e,t){const n=p().default.state.currentUserSettingsStore,i=null==n?void 0:n.getSettings();if(!i||!n)return;const r=new m(i.callout_placement_exposures);for(const a of t)r.add(a,o().c9.now().toMillis());c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{callout_placement_exposures:r.exportUserSetting()}})}})}(e,[(0,i().Q3)(t)]),B(e,t),p().default.state.inAppCalloutStore.updateCalloutStatus({calloutId:t.key,visible:!1}),"static"!==t.type&&async function(e,t){const n=w().A.getConfig(t)||{};if(n.message){const t=n.message;await s().callApi({eventName:"updateInAppMessage",environment:e,data:{messageId:t.id,state:"done"}})}}(e,t.key)}}function M(e){const t=p().default.state.currentUserSettingsStore;if(!t)return;const n=new m;c().createAndCommit({environment:e,userAction:"messageActions.addPlacementExposures",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:t,transaction:e,data:{callout_placement_exposures:n.exportUserSetting()}})}})}function P(e,t){B(e,{id:"",key:t,type:"static",props:{}})}function B(e,t){const n=(0,i().K0)(t);"once_per_user"===n?function(e,t){const n=p().default.state.currentUserSettingsStore,i=null==n?void 0:n.getSettings();if(!n||!i)return;const r=i.callout_dismissal_timestamps??[],a=new Map(r.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:o().c9.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addUserSettingsDismissal",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{callout_dismissal_timestamps:Array.from(a.values())}})}})}(e,t):"once_per_space"===n&&function(e,t){const n=p().default.state.currentSpaceViewStore,i=null==n?void 0:n.getSettings();if(!n||!i)return;const r=i.callout_dismissal_timestamps??[],a=new Map(r.map((e=>[e.name,e])));a.has(t.key)||a.set(t.key,{name:t.key,timestamp:o().c9.now().toMillis()});c().createAndCommit({environment:e,userAction:"messageActions.addSpaceViewDismissal",canUndo:!0,perform:e=>{l().AG(n,e,{callout_dismissal_timestamps:Array.from(a.values())})}})}(e,t)}function R(e){const t=e.callout_dismissal_timestamps??[];for(const n of t){if(!n.name)continue;const e=(0,a().h2)(n.name);if(!e)continue;"once_per_user"===r().lU[e].dismissal_type&&(h().default.isVisible(e)&&!h().default.isForced(e)&&h().default.removeMessage(e))}}function E(e){const t=e.callout_dismissal_timestamps??[];for(const n of t){if(!n.name)continue;const e=(0,a().h2)(n.name);if(!e)continue;"once_per_space"===r().lU[e].dismissal_type&&(h().default.isVisible(e)&&!h().default.isForced(e)&&h().default.removeMessage(e))}}function D(e,t){const{currentUserSettingsStore:n}=p().default.state,o=null==n?void 0:n.getSettings();if(n&&null!=o&&o.callout_seen_timestamps){const i={...o.callout_seen_timestamps||{}};delete i[t],c().createAndCommit({environment:e,userAction:"messageActions.resetSeen",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{callout_seen_timestamps:i}})}})}}function N(e,t){const{currentUserSettingsStore:n,currentSpaceViewStore:o}=p().default.state,i=null==n?void 0:n.getSettings();if(n&&i&&i.callout_dismissal_timestamps){let o=i.callout_dismissal_timestamps;o=o.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{d().mJ({userSettingsStore:n,transaction:e,data:{callout_dismissal_timestamps:o}})}})}const r=null==o?void 0:o.getSettings();if(o&&r){let n=r.callout_dismissal_timestamps??[];n=n.filter((e=>e.name!==t)),c().createAndCommit({environment:e,userAction:"messageActions.resetDismissal",canUndo:!0,perform:e=>{l().AG(o,e,{callout_dismissal_timestamps:n})}})}}const L=new(n(645873).O2)("inAppMessages",(()=>n.e(74688).then(n.bind(n,832086))));async function O(e,t,n){const o=await L.load(),{shown:i}=await o.maybeShowMessagesImpl(e,[t],n);return i.length>0}async function U(e,t){const n=await L.load();await n.maybeShowMessagesImpl(e,t)}async function F(e){const t=await L.load();await t.showStartupMessagesImpl(e)}async function V(e,t){const n=await L.load(),{eligibleKeys:o}=await n.getEligibleStaticMessages(e,[t]);return o.length>0}},629928:(e,t,n)=>{n.d(t,{t:()=>o});const o=(0,n(340498).xh)("trash",{default:{loader:()=>n.e(84217).then(n.bind(n,236262))},small:{loader:()=>n.e(84217).then(n.bind(n,259476))},fill:{loader:()=>n.e(84217).then(n.bind(n,942292))},fillSmall:{loader:()=>n.e(84217).then(n.bind(n,483995))}},["trash","can","bin","delete","remove"])},630053:(e,t,n)=>{n.d(t,{Sf:()=>o});function o(e){const{experimentService:t,actor:n,spaceId:o}=e;return t.checkGate({actor:n,gateName:"db_permissions",customIDs:{spaceId:o}})}},631611:(e,t,n)=>{n.d(t,{Ui:()=>c,hP:()=>M,jw:()=>P,wy:()=>C});n(16280);var o,i=n(296540),r=n(474848);const a={fullPage:!0,mobileNative:!0,mobileWeb:!0,commandSearch:!0,mobileNativeTab:!0,mobileSearch:!1,writer:!1,corner:!1,searchPane:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},s={mobileNative:!0,mobileWeb:!0,mobileSearch:!0,mobileWriter:!0,mobileNativeTab:!0,fullPage:!1,writer:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,conflictingContentComment:!1},l={writer:!0,mobileWriter:!0,mobileWeb:!1,mobileNative:!1,mobileSearch:!1,fullPage:!1,corner:!1,searchPane:!1,commandSearch:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1};function c(e){return l[e]}const d={corner:!0,searchPane:!0,fullPage:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,commandSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},u={corner:!0,searchPane:!0,fullPage:!0,mobileNative:!0,mobileWeb:!0,mobileSearch:!0,commandSearch:!0,mobileNativeTab:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},p={corner:!0,searchPane:!1,fullPage:!0,mobileNative:!0,mobileNativeTab:!0,commandSearch:!0,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},m={corner:!0,searchPane:!0,fullPage:!0,commandSearch:!0,writer:!0,mobileWriter:!0,workflowEditor:!0,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,conflictingContentComment:!1,mobileNativeTab:!1},g={corner:!0,searchPane:!0,commandSearch:!0,mobileNative:!0,mobileSearch:!0,mobileWeb:!0,writer:!1,fullPage:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},f={corner:!0,writer:!0,mobileWriter:!0,fullPage:!1,searchPane:!1,commandSearch:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},v={corner:!0,fullPage:!0,searchPane:!0,mobileNative:!0,mobileNativeTab:!0,commandSearch:!0,mobileWeb:!0,mobileSearch:!0,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1},h={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},_={corner:!0,fullPage:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},b={fullPage:!0,writer:!0,corner:!0,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},y={corner:!0,fullPage:!1,writer:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},S={fullPage:!0,writer:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},w={writer:!0,fullPage:!1,corner:!1,commandSearch:!1,searchPane:!1,mobileNative:!1,mobileWeb:!1,mobileSearch:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},k={corner:!0,fullPage:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},I={corner:!0,fullPage:!0,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},x={fullPage:!0,corner:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1},A={fullPage:!0,corner:!1,searchPane:!1,mobileNative:!1,commandSearch:!1,mobileWeb:!1,mobileSearch:!1,writer:!1,mobileWriter:!1,workflowEditor:!1,conflictingContentComment:!1,mobileNativeTab:!1};class C{constructor(e){this.type=e}get renderAsFullPage(){return a[this.type]}get isQuickSearchMode(){return this.isType("commandSearch")}get isMobile(){return s[this.type]}get isWriter(){return l[this.type]}isType(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.includes(this.type)}get shouldShowExpandToFullPageChat(){return d[this.type]}get isValidSurfaceForAttachmentUploads(){return p[this.type]}get shouldShowChatHistory(){return u[this.type]}get canUseCurrentPageContext(){return m[this.type]}get showCloseButton(){return g[this.type]}get surfaceSupportsContextWithSelection(){return f[this.type]}get surfaceSupportsParameterization(){return v[this.type]}get surfaceSupportsTutorialAction(){return h[this.type]}get surfaceSupportsShareAnswerAction(){return _[this.type]}get canShowNewChonkifiedInput(){return b[this.type]}canShowSessionStarterInContext(e){return C[e.from].isWriter===this.isWriter}get canUseUpdatedSkillDisplayFormat(){return k[this.type]}get canUseGetAiConnectorScopeMenuFooter(){return I[this.type]}get canShowNewFullPageWelcomeState(){return S[this.type]}get canShowNewWriterDesign(){return w[this.type]}get canShowNewCornerChatWelcomeState(){return y[this.type]}get supportsStartingNewChatAsInferenceTranscript(){return x[this.type]}get supportsChatHistoryWithInferenceTranscripts(){return A[this.type]}}o=C,C.fullPage=new o("fullPage"),C.corner=new o("corner"),C.searchPane=new o("searchPane"),C.commandSearch=new o("commandSearch"),C.mobileNative=new o("mobileNative"),C.mobileNativeTab=new o("mobileNativeTab"),C.writer=new o("writer"),C.mobileWeb=new o("mobileWeb"),C.mobileSearch=new o("mobileSearch"),C.mobileWriter=new o("mobileWriter"),C.workflowEditor=new o("workflowEditor"),C.conflictingContentComment=new o("conflictingContentComment");const T=i.createContext(void 0);function M(e){return(0,r.jsx)(T.Provider,{value:e.surface,children:e.children})}function P(){const e=i.useContext(T);return e||C.corner}T.displayName="AssistantSurfaceContext"},632709:(e,t,n)=>{n.d(t,{A:()=>r,p:()=>o});let o=function(e){return e[e.General=0]="General",e[e.Members=1]="Members",e[e.Security=2]="Security",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}}getTeamStore(){return this.state.open?this.state.viewingUnjoinedPrivateTeamAsEnterpriseAdmin?this.state.unjoinedPrivateTeamStore:this.state.teamStore:void 0}}const r=new i},633457:(e,t,n)=>{n.d(t,{p6:()=>Fe,A1:()=>ze,VN:()=>Ve,Nl:()=>$e,bG:()=>Ne,pk:()=>Je,lK:()=>Ge,oX:()=>Ue,Oi:()=>je,z1:()=>rt,jW:()=>qe,pP:()=>We,PO:()=>nt,FQ:()=>ot,lf:()=>it});n(16280),n(944114),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454);var o=()=>n(221844),i=()=>n(908006),r=()=>n(700500),a=()=>n(443239),s=()=>n(970013),l=()=>n(304740),c=()=>n(617871),d=()=>n(19916),u=()=>n(857639),p=()=>n(513416),m=()=>n(792071),g=()=>n(386164),f=()=>n(388821),v=()=>n(179034),h=()=>n(824862),_=()=>n(519831),b=()=>n(869558),y=()=>n(402904),S=()=>n(329251),w=()=>n(332393),k=()=>n(161479),I=()=>n(322769),x=()=>n(919709),A=()=>n(506391),C=()=>n(220719),T=()=>n(496603),M=()=>n(763824),P=()=>n(534177),B=()=>n(939768),R=()=>n(720665),E=()=>n(675074),D=()=>n(722101),N=()=>n(246826),L=()=>n(778417),O=()=>n(319975),U=()=>n(725614),F=()=>n(751156),V=()=>n(97270),j=()=>n(989423),z=()=>n(186445),H=()=>n(299917);var W=()=>n(47373),q=()=>n(572088),K=()=>n(493208),G=()=>n(619400),$=()=>n(594794),Y=()=>n(972435),Q=()=>n(108944),Z=()=>n(299545),X=()=>n(969197),J=()=>n(906537),ee=()=>n(646736),te=()=>n(859004),ne=()=>n(508496);var oe=()=>n(406792),ie=()=>n(129522),re=()=>n(351360),ae=()=>n(53137),se=()=>n(83573),le=()=>n(397740),ce=()=>n(666803),de=()=>n(375447),ue=()=>n(630116),pe=()=>n(404141),me=()=>n(444768),ge=()=>n(398209),fe=()=>n(276282),ve=()=>n(611371),he=()=>n(559926),_e=()=>n(449506),be=()=>n(541258),ye=()=>n(884107),Se=()=>n(686526),we=()=>n(901389),ke=()=>n(510683),Ie=()=>n(664133),xe=()=>n(383594),Ae=()=>n(44729),Ce=()=>n(666144),Te=()=>n(436572);const Me=!1;const Pe=[c().MN];function Be(e,t){var n;const o=Boolean(e&&Pe.includes(e.id));return{hasServerDeterminedOptionTypes:o,canUnfurlAsCollection:Boolean(!o&&(null==t||null===(n=t.additional_types)||void 0===n?void 0:n.collection)),canUnfurlAsImport:Boolean(e&&Re(e,t))}}function Re(e,t){switch(e.id){case c().MN:return!0;case c().Hd:return t&&"google_docs"===t.name;case c().mn:return t&&"Report"===t.name;default:return!1}}const Ee=(0,n(959013).YK)({browse:{id:"externalBlock.mediaPicker.browseTab.title",defaultMessage:"Browse {appName}"},somethingWentWrong:{defaultMessage:"Something went wrong.",id:"externalActions.dialogError.openFilePicker.errorMessage"},copyDebuggingInformation:{id:"externalActions.dialogItem.openFilePicker.copyDebugData",defaultMessage:"Copy debugging information"},copiedDebuggingInfo:{id:"externalActions.dialogError.copiedDebuggingInfo",defaultMessage:"Copied to clipboard."},userReAuth:{id:"externalActions.dialogError.userReAuth",defaultMessage:"Authentication Expired. Please Re-Authenticate to continue."}});let De=!1;async function Ne(e){const{environment:t,spaceId:n,force:o}=e;await re().default.waitUntilRendered();const i=ae().A.state,r=t.currentUser.id;if(!i.loaded&&!i.loading||i.loaded&&n!==i.spaceId||i.loaded&&r!==i.userId||o){const e=!De;e&&(De=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_loading",{environment:t})),ae().A.setState({...ae().A.state,loading:!0});const[o,i]=await Promise.all([Le({environment:t,spaceId:n}),Oe({environment:t,spaceId:n})]);if("success"!==o.type||"success"!==i.type)throw new Error("Request failed.");const r=f().RecordMapWithRole.create(o.data.recordMap),a=f().RecordMapWithRole.create(i.data.recordMap);ae().A.setState({loaded:!0,loading:!1,spaceId:n,userId:t.currentUser.id,integrations:T().Ul(T().oE(o.data.integrationIds.map((e=>r.getValue({table:w().Li,id:e})))),(e=>{let{created_at:t}=e;return t})),externalAuthentications:T().Ul(T().oE(i.data.externalAuthenticationIds.map((e=>a.getValue({table:y().As,id:e})))),(e=>{let{created_at:t}=e;return t})),bots:T().My(T().oE(i.data.botIds.map((e=>a.getValue({table:h().GP,id:e})))),(e=>{let{last_edited_at:t,created_at:n}=e;return t||n}),"desc"),completeSlackAuthentications:T().Ul(T().oE(i.data.completeSlackAuthenticationIds.map((e=>a.getValue({table:y().As,id:e})))),(e=>{let{created_at:t}=e;return t})),twoWaySyncExternalEntities:T().Ul(T().oE(i.data.externalEntityIds.map((e=>a.getModel({table:S().$,id:e})))),(e=>{let{created_at:t}=e;return t}))}),e&&(De=!0,oe().default.DO_NOT_USE_measureFromPageOriginLegacy("external_integration_store.page_origin_to_ready",{environment:t}))}}async function Le(e){const{environment:t,spaceId:n}=e,o=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_external_integrations"),i=await _e().callApi({eventName:"getExternalIntegrations",environment:t,data:{spaceId:n},headers:(0,g().WS)({spaceId:n})});return"success"===i.type&&oe().default.DO_NOT_USE_measureLegacy(o,{environment:t}),i}async function Oe(e){const{environment:t,spaceId:n}=e;if(!t.currentUser.isLoggedIn())return{type:"success",status:200,headers:{},data:{botIds:[],externalAuthenticationIds:[],recordMap:{},completeSlackAuthenticationIds:[],externalEntityIds:[]}};const o=oe().default.DO_NOT_USE_markLegacy("external_integration_store.get_user_space_external_bots"),i=await _e().callApi({eventName:"getUserSpaceExternalBots",environment:t,data:{spaceId:n},headers:(0,g().WS)({spaceId:n})});return"success"===i.type&&oe().default.DO_NOT_USE_measureLegacy(o,{environment:t}),i}async function Ue(e){const{environment:t}=e,{currentSpaceStore:n}=re().default.state;n&&await Ne({environment:t,spaceId:n.id,force:!0})}function Fe(e){var t;const{environment:n,blockStore:a,textStore:s,url:d,textValueBeforePaste:p,urlSelection:m}=e,g=J().get();if(!a||V().A.state.open||de().A.state.open||ge().A.state.open||!g)return!1;const{currentSpaceStore:f}=re().default.state,h=(0,l().US)(d),y=(0,B().qg)(h);if(!y.host)return!1;const S=n.currentUser.id;if(null==f||!f.isDefined()||!S)return!1;const w=ae().A.integrations.state.filter((e=>e.id!==c().ob)),C=(0,A().$B)({url:h,integrations:w,currentSpaceId:f.id});if("partial"===C.type)return function(e){const{environment:t,parsedUrl:n,urlDomain:o,integrationId:i}=e;he().FO(t,{integrationId:i,urlDomain:o}),u().log({level:"debug",from:"activateFromLinkCreation",type:"linkPreviewUrlMiss",data:{miscDataToConvertToString:{integrationId:i,urlDomain:o,path:n.path}}})}({...C,integrationId:C.integration.id,environment:n}),!1;if("failure"===C.type)return!1;const{integration:M,pattern:P}=C;if(!(0,ee().dp)(f,S).isWorkspaceOwner()&&!(0,I().nH)({spaceBotSettings:f.getBotSettingsStore().getValue(),integrationId:M.id,env:"production"}))return!1;const R=(0,q().jw)(M.id),E=function(e){const{integration:t,pattern:n,blockStore:o,textValueBeforePaste:i}=e,a=o&&o.getType()===r().xd.text&&0===(0,x().q4_)(i).trim().length,{hasServerDeterminedOptionTypes:s,canUnfurlAsCollection:l,canUnfurlAsImport:c}=Be(t,n);if(t){if(a){const e=ne().default.getConfigKey("link_paste_order",(null==t?void 0:t.id)||"defaultOrder");return e?(l&&(e.order.includes("collection")||e.order.splice(e.order.length-1,0,"collection")),c&&(e.order.includes("import")||e.order.push("import")),T().oE(e.order)):T().oE(["preview","mention","link",(s||l)&&"collection",c&&"import"])}return T().oE(["mention","preview","link",(s||l)&&"collection",c&&"import"])}return a?T().oE(["preview","mention","link",(s||l)&&"collection",c&&"import"]):T().oE(["mention","preview","link",(s||l)&&"collection",c&&"import"])}({blockStore:a,integration:M,pattern:P,textValueBeforePaste:p}),D=J().getRect(g);if(!D)return!1;const N=a.getRecordStoreUIParent();if(!N||!(0,Z().iU)(N))return!1;const L=new(o().A)({name:"unfurlingActions.activateFromLinkCreation",isTemporaryData:!0});n.defaultRecordCache.inMemoryRecordCache.addCacheOverride(L);const O=N.clone(L),U=a.clone(L),j=s.table===v().ev&&s===(null===(t=(0,X().T)(s))||void 0===t?void 0:t.getBlockTitleStore())?U.getBlockTitleStore():s.clone(L),z=(0,k().e)(a.pointer.spaceId),H=(0,$().JH)({environment:n,table:v().ev,spaceId:z}),W=new(ue().Bv)(n,H),K=W.clone(L),G=T().y1(A().MV).map((()=>new(ue().Bv)(n,{table:v().ev,id:(0,$().Z1)({environment:n,table:v().ev,spaceId:z}),spaceId:z}))),Q=G.map((e=>e.clone(L))),te=new(ue().md)(n,(0,$().JH)({environment:n,table:_().Vl,spaceId:z})),oe=te.clone(L);let ie;ie=P.defaultViews?P.defaultViews.map((e=>new(ue().pS)(n,(0,$().JH)({environment:n,table:b().Gy,spaceId:z})))):[new(ue().pS)(n,(0,$().JH)({environment:n,table:b().Gy,spaceId:z}))];const se=ie.map((e=>e.clone(L))),le=T().y1(A().MV).map((()=>new(ue().md)(n,(0,$().JH)({environment:n,table:_().Vl,spaceId:z})))),ce=le.map((e=>e.clone(L))),pe=T().y1(A().MV).map((()=>new(ue().pS)(n,(0,$().JH)({environment:n,table:b().Gy,spaceId:z})))),me=pe.map((e=>e.clone(L)));let fe;return ge().A.setState({open:!0,url:h,textValueBeforePaste:p,textValueAfterPaste:s.getValue(),urlSelection:m,renderRect:D,integration:M,pattern:P,currentOption:{type:"link"},allOptionTypes:E,temporaryRecordCache:L,stores:{blockStore:a,blockParentStore:N,textStore:s,externalObjectInstanceBlockStore:W,subExternalObjectInstanceBlockStores:G,externalCollectionStore:te,externalCollectionViewStores:ie,subExternalCollectionStores:le,subExternalCollectionViewStores:pe},temporaryStores:{blockParentStore:O,blockStore:U,textStore:j,externalObjectInstanceBlockStore:K,subExternalObjectInstanceBlockStores:Q,externalCollectionStore:oe,externalCollectionViewStores:se,subExternalCollectionStores:ce,subExternalCollectionViewStores:me},unfurlResponse:void 0}),R.length>0&&He({environment:n,url:d,botIds:R.map((e=>{let{id:t}=e;return t})),integrationId:M.id,externalObjectInstanceBlockStore:W}),he().Ki(n,{integrationId:M.id,entity:P.name,domain:y.host,from:"link_paste"}),fe="import"===E[0]?"link":E[0],i().default.afterNextFlush((()=>{const e="drive"!==fe;F().createAndCommit({userAction:"unfurlingActions.activateFromLinkCreation",environment:n,canUndo:!e,perform:t=>{je({environment:n,type:fe,useTemporaryRecordCache:e,transaction:t,intl:Y().A.getIntl()})}})})),!0}function Ve(e){const{environment:t,setType:n,transaction:o}=e,{currentUserSettingsStore:i}=re().default.state,r=z().y0(t),a=ge().A.state;if(!a.open)return;t.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(a.temporaryRecordCache);const s=(0,q().jw)(a.integration.id).length>0;if(je({environment:t,type:n||a.currentOption.type,useTemporaryRecordCache:!1,transaction:o,intl:Y().A.getIntl()}),"preview"===a.currentOption.type)L().td({environment:t,stores:[a.currentOption.externalObjectInstanceBlockStore]});else if("drive"===a.currentOption.type){var c,d,u,p,m;const e=B().qg(a.url,{slashesDenoteHost:!0});let n=e.href;if(null!==(c=e.hostname)&&void 0!==c&&c.includes("docs.google.com")&&(null!==(d=e.pathname)&&void 0!==d&&d.includes("presentation")||null!==(u=e.pathname)&&void 0!==u&&u.includes("document")||null!==(p=e.pathname)&&void 0!==p&&p.includes("spreadsheets"))&&null!==(m=e.pathname)&&void 0!==m&&m.includes("/edit")){const t=e.pathname.replace("/edit","/preview");n=B().Gm({url:`https://${e.hostname}${t}`,query:{...e.query},hash:e.hash||void 0})}else n=(0,l().US)(n);E().Fy(t,{embeddedUrl:{originUrl:n},isDataURL:!1,store:a.stores.blockStore,pageWidth:r,preferredType:"drive"})}if(a.integration&&!s){(null==i?void 0:i.hasDismissedIntegrationPopup({integrationId:a.integration.id}))||me().A.setState({open:!0,integration:a.integration,externalObjectInstanceBlockId:a.stores.externalObjectInstanceBlockStore.id,unfurlUrl:a.url})}ge().A.setState({open:!1})}function je(e){const{environment:t,type:n,transaction:o,useTemporaryRecordCache:a}=e,s=ge().A.state;if(!s.open)return;const c=t.currentUser.id;if(!c)return;const u=a?s.temporaryStores:s.stores;if(a){s.temporaryRecordCache.clearCache();for(const e in s.temporaryStores){const n=s.temporaryStores[e],o=Array.isArray(n)?n:[n];for(const e of o){const n={userId:c,pointer:e.pointer},o=t.defaultRecordCache.inMemoryRecordCache.getRecord(n);o?Ce().PC({environment:t,inMemoryRecordCache:s.temporaryRecordCache,pointer:e.pointer,model:m().Bj6.fromValue(e.pointer.table,o.value),role:o.role,updatePaths:[[]],userId:c,force:!0,debugSource:"setUnfurlingOptionType"}):Ce().oX({environment:t,inMemoryRecordCache:s.temporaryRecordCache,persistedRecordCache:void 0,pointer:e.pointer,userId:c})}}}const p=(0,l().US)(s.url),{host:g}=(0,B().qg)(p);if(g){if("preview"===n||"mention"===n){const e={original_url:p,domain:g};let n;const{unfurlResponse:i}=s;if(i){const a=(0,R().MU)(T().oE(i.relations.map(((e,n)=>{if(e.external_schema)return;const i=u.subExternalObjectInstanceBlockStores[n];return i?((0,C().MX)(!i.isDefined(),"Sub external object instance store should not have a value before creation"),N().Wv({environment:t,id:i.id,type:r().xd.externalObjectInstance,spaceId:(0,k().e)(u.blockStore.pointer.spaceId),format:e,inMemoryRecordCache:i.inMemoryRecordCache,transaction:o}),N().zv({store:i,data:{parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0},transaction:o}),[e.uri,i.id]):void 0})))),{external_object_id:s,uri:l,bot_id:c}=i.root;if(s&&l&&c){let t,o;const r=(0,d().G)(i.root.attributes,(0,K().jj)());r&&(t=r.block_width,o=r.block_height),n={...e,...{...i.root,block_width:t,block_height:o,external_schema:void 0},related_external_object_uris_to_instance_ids:a,external_object_id:s,uri:l,bot_id:c}}else{var f;n={...e,attributes:i.root.attributes,error:i.root.error,auth_refresh_in_progress:439===(null===(f=i.root.error)||void 0===f?void 0:f.status_code)||null}}}else n=e;(0,W()._J)()||(0,C().MX)(!u.externalObjectInstanceBlockStore.isDefined(),"Preview/mention menu external object instance store should not have a value before creation"),N().Wv({environment:t,id:u.externalObjectInstanceBlockStore.id,type:r().xd.externalObjectInstance,format:n,inMemoryRecordCache:u.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:o})}else if("collection"===n){const{unfurlResponse:e}=s;let n=u.externalCollectionStore.pointer;const a=u.externalCollectionViewStores.map(((e,t)=>{var n,o,i;return{id:e.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),type:(null===(n=s.pattern.defaultViews)||void 0===n?void 0:n[t].type)||"table",format:null===(o=s.pattern.defaultViews)||void 0===o?void 0:o[t].format,query2:null===(i=s.pattern.defaultViews)||void 0===i?void 0:i[t].query2,parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0}}));let l;if(e){const{external_object_id:t,uri:i,bot_id:r}=e.root;if(t&&i&&r)if("collectionId"in e&&e.collectionId){l={id:e.collectionId,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,schema:{}},n={id:e.collectionId,table:_().Vl,spaceId:(0,k().e)(u.blockStore.pointer.spaceId)}}else{const t={};e.relations.forEach(((e,n)=>{const i=u.subExternalCollectionStores[n],r=e,a={id:i.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:_().Vl,parent_id:u.externalCollectionStore.id,alive:!0,format:r,schema:{}};t[e.uri]=i.id,N().zv({store:i,data:a,transaction:o})}));l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g,...e.root,related_external_object_uris_to_instance_ids:{...t}},schema:{}}}else{l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g,error:e.root.error},schema:{}}}}else{l={id:u.externalCollectionStore.id,version:0,space_id:(0,k().e)(u.blockStore.pointer.spaceId),parent_table:v().ev,parent_id:u.externalObjectInstanceBlockStore.id,alive:!0,format:{original_url:p,domain:g},schema:{}}}(0,C().MX)(!u.externalObjectInstanceBlockStore.isDefined(),"Collection menu external object instance store should not have a value before creation");const c=N().Wv({environment:t,id:u.externalObjectInstanceBlockStore.id,type:r().xd.collectionView,format:{collection_pointer:n},spaceId:(0,k().e)(u.blockStore.pointer.spaceId),inMemoryRecordCache:u.externalObjectInstanceBlockStore.inMemoryRecordCache,transaction:o});N().zv({store:c,data:{collection_id:n.id,parent_table:v().ev,parent_id:u.blockParentStore.id,alive:!0,view_ids:u.externalCollectionViewStores.map((e=>e.id))},transaction:o});const d=Xe();u.externalCollectionViewStores.forEach(((t,n)=>{e&&"collectionId"in e&&e.collectionId&&a[n].format&&(a[n].format={collection_pointer:{id:e.collectionId,table:_().Vl}}),d&&e&&"table"===a[n].type&&(a[n].format={...a[n].format,table_properties:tt(e.root.external_schema)}),N().zv({store:t,data:a[n],transaction:o})})),N().zv({store:u.externalCollectionStore,data:l,transaction:o});const m=s.integration;i().default.afterNextFlush((()=>{const e=ie().K.findCollectionViewBlockFromId(u.externalObjectInstanceBlockStore.id);if(e&&"collectionContextStore"in e){const t=e.collectionContextStore.settingsStore;Se().R8({collectionSettingsStore:t,item:{type:"shareSyncedView",integrationName:m.name,integrationIcon:m.info.icon}})}}))}if("preview"===n){O().R9({environment:t,store:u.textStore,value:s.textValueBeforePaste,transaction:o});const e=ue().Bv.createChildStore(u.blockParentStore,u.externalObjectInstanceBlockStore.pointer);if(D().WH({parentStore:u.blockParentStore,insertStore:e,afterStore:u.blockStore,transaction:o}),0===(0,x().q4_)(s.textValueBeforePaste).trim().length){const e=ue().Bv.createChildStore(u.blockParentStore,s.stores.blockStore.pointer);D().TF({parentStore:u.blockParentStore,childToRemoveStore:e,transaction:o})}const i=ue().Bv.createChildStore(s.stores.blockParentStore,s.stores.externalObjectInstanceBlockStore.pointer);L().IU({environment:t}),ge().A.setState({...s,currentOption:{type:n,externalObjectInstanceBlockStore:i}})}else if("mention"===n){const e=(0,x().bMp)(u.externalObjectInstanceBlockStore.id),n=(0,x().wmz)(e),i=(0,x().xym)(s.textValueBeforePaste,[n],s.urlSelection.startIndex),r={startIndex:s.urlSelection.startIndex+1,endIndex:s.urlSelection.startIndex+1};O().R9({environment:t,store:u.textStore,value:i,transaction:o}),N().zv({store:u.externalObjectInstanceBlockStore,data:{parent_id:u.textStore.id,parent_table:v().ev,alive:!0},transaction:o}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:r}),ge().A.setState({...s,currentOption:{type:"mention",mentionTokenSelection:r}})}else if("link"===n)ge().A.setState({...s,currentOption:{type:"link"}}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("drive"===n)ge().A.setState({...s,currentOption:{type:"drive"}}),L().hc({environment:t,store:s.stores.blockStore}),U().setSelection({store:s.stores.textStore,selection:{startIndex:s.urlSelection.endIndex,endIndex:s.urlSelection.endIndex}});else if("collection"===n){O().R9({environment:t,store:u.textStore,value:s.textValueBeforePaste,transaction:o});const e=ue().Bv.createChildStore(u.blockParentStore,u.externalObjectInstanceBlockStore.pointer);if(D().WH({parentStore:u.blockParentStore,insertStore:e,afterStore:u.blockStore,transaction:o}),0===(0,x().q4_)(s.textValueBeforePaste).trim().length){const e=ue().Bv.createChildStore(u.blockParentStore,s.stores.blockStore.pointer);D().TF({parentStore:u.blockParentStore,childToRemoveStore:e,transaction:o})}L().IU({environment:t}),ge().A.setState({...s,currentOption:{type:n}})}else(0,P().HB)(n);if(!a){const{unfurlResponse:e}=s;he().lR(t,{integrationId:s.integration.id,type:n,entity:s.pattern.name,domain:g,from:"unfurl_menu",...e&&{status:null!=e&&e.root.error?"failure":"success"},collection_id:"collection"===n?u.externalCollectionStore.pointer.id:void 0,collection_view_block_id:"collection"===n&&u.blockStore.isCollectionView()?u.blockStore.id:void 0})}}}async function ze(e){const{environment:t,notionState:n}=e,{externalObjectInstanceBlockId:o,spaceId:i}=n;if(o){const e=new(ue().Bv)(t,{table:v().ev,id:o,spaceId:i});let n;if(await Promise.all([e.load(),ae().A.waitUntil((()=>ae().A.state.loaded))]),e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())n=e.getFormat();else if(e.isCollectionView()){var r;n=null===(r=e.getCollectionViewSourceCollectionStore())||void 0===r?void 0:r.getFormat()}if(!n)throw new Error("External object instance has no value.");const a=n.original_url||n.uri;if(!a)throw new Error("External object instance has no original_url.");const s=(0,A().$B)({url:a,integrations:ae().A.integrations.state,currentSpaceId:i});if("success"!==s.type)throw new Error("Could not find integration.");const{integration:l}=s,c=(0,q().jw)(l.id);if(0===c.length)throw new Error("Could not find bot.");if(e.isExternalObjectInstanceBlockStore()||e.isExternalObjectInstancePageBlockStore())await He({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),integrationId:l.id,externalObjectInstanceBlockStore:e});else{if(!e.isCollectionView())throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${e.getType()}`);{const n=e.getCollectionViewSourceCollectionStore();if(!n)throw new Error("Could not find collection store.");await qe({environment:t,url:a,botIds:c.map((e=>{let{id:t}=e;return t})),externalCollectionViewBlockStore:e,externalCollectionStore:n})}}}}async function He(e){const{environment:t,url:n,botIds:o,integrationId:i,externalObjectInstanceBlockStore:a}=e;fe().A.add(n);const s=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:n,botIds:o,integrationId:i,spaceId:be().LU()}});fe().A.delete(n);const c=ge().A.state,u="success"===s.type?s.data:{root:{error:{status_code:s.status}},relations:[]};if(c.open&&c.stores.externalObjectInstanceBlockStore===a){ge().A.setState({...c,unfurlResponse:u});const e=function(e,t,n){if(Pe.includes(e)&&"collection"===n)return t.root.hasOwnProperty("external_schema")?"collection":"preview";if("import"===n)return"link";return n}(i,u,c.currentOption.type);F().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!1,perform:n=>{je({environment:t,type:e,useTemporaryRecordCache:!0,transaction:n,intl:Y().A.getIntl()})}})}else if(a.isExternalObjectInstanceBlockStore())!function(e){const{environment:t,unfurlResponse:n,url:o,externalObjectInstanceBlockStore:i}=e,a=i.pointer.spaceId,s=t.currentUser.id;if(!s)return;const c=(0,l().US)(o),{host:u}=(0,B().qg)(c);if(!u)return;if("collectionId"in n)return;const p=i.getFormat().related_external_object_uris_to_instance_ids,m=(0,R().MU)(Object.entries(p||{}).map((e=>{let[t,n]=e;return[t,ue().Bv.createChildStore(i,{id:n,table:v().ev,spaceId:i.getSpaceId()})]})));F().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstanceFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const s=(0,R().MU)(T().oE(n.relations.map((n=>{if(n.external_schema)return;let o=m[n.uri];return o?(N().zv({store:o,data:{type:r().xd.externalObjectInstance,parent_table:v().ev,parent_id:i.id,alive:!0},transaction:e}),N().zv({store:o.getFormatStore(),data:n,transaction:e})):(o=N().Wv({environment:t,type:r().xd.externalObjectInstance,spaceId:a,format:n,inMemoryRecordCache:i.inMemoryRecordCache,transaction:e}),N().zv({store:o,data:{parent_table:v().ev,parent_id:i.id,alive:!0},transaction:e})),[n.uri,o.id]})))),l=i.getFormatStore().getValue();let c,u;if(l&&(c=l.block_width,u=l.block_height),!c&&!u){const e=(0,d().G)(n.root.attributes,(0,K().jj)());e&&(c=e.block_width,u=e.block_height)}N().zv({store:i.getFormatStore(),data:{...{...n.root,block_width:c,block_height:u,external_schema:void 0,integration_id:null,original_url:o,is_placeholder:null,error:n.root.error??null},related_external_object_uris_to_instance_ids:s},transaction:e})}})}({environment:t,unfurlResponse:u,url:n,externalObjectInstanceBlockStore:a}),function(e){const{environment:t,url:n,spaceId:o,status:i}=e,r=(0,K().g8)(n,o),a=(0,l().US)(n),s=(0,B().qg)(a);r&&s.host&&he().lR(t,{integrationId:r.integration.id,type:"preview",entity:r.pattern.name,domain:s.host,from:"link_preview_placeholder",...i&&{status:i}})}({environment:t,url:n,spaceId:a.getSpaceId(),...u&&{status:u.root.error?"failure":"success"}});else{if(!a.isCollectionView()){if(a.isExternalObjectInstancePageBlockStore())return;throw new Error(`BlockStore is neither an ExternalObject nor a ExternalCollection. It has type: ${a.getType()}`)}{const e=a.getCollectionViewSourceCollectionStore();if(!e)throw new Error("Could not find collection store.");F().createAndCommit({userAction:"unfurlingActions.startUnfurlRequest",environment:t,canUndo:!0,perform:o=>{Ke({environment:t,unfurlResponse:u,url:n,externalCollectionStore:e,externalCollectionViewBlockStore:a,transaction:o})}})}}}async function We(e){const{environment:t,url:n,botIds:o,userDefinedExternalCollectionStore:i,relatedPageId:a}=e,s=i.getFormat();if(!s.uri||void 0!==s.external_object_id)return;fe().A.add(n);const c=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:n,botIds:o,spaceId:i.getSpaceId(),targetCollectionId:i.id,relatedPageId:a}});if("failed"===c.type)return void we().Qg(c);fe().A.delete(n);const d=c.data;return"pageId"in d&&d.pageId?new(ue().Bv)(t,{table:v().ev,id:d.pageId,spaceId:i.getSpaceId()}):function(e){const{environment:t,unfurlResponse:n,url:o,rootUserDefinedExternalCollectionStore:i}=e,a=i.pointer.spaceId,s=t.currentUser.id;if(!s)return;const c=(0,l().US)(o),{host:d}=(0,B().qg)(c);if(!d)return;if(!n.root.external_object_id)return;const u=n.root;return F().createAndCommit({userAction:"unfurlingActions.createExternalObjectInstancePageFromInitialUnfurl",environment:t,canUndo:!0,perform:e=>{const n=N().Wv({environment:t,type:r().xd.externalObjectInstancePage,spaceId:a,format:u,inMemoryRecordCache:i.inMemoryRecordCache,transaction:e});return Ae().X$({parentStore:i,childStore:n,transaction:e}),new(ue().Bv)(t,n.pointer)}}).performResult}({environment:t,unfurlResponse:d,url:n,rootUserDefinedExternalCollectionStore:i})}async function qe(e){const{environment:t,url:n,botIds:o,externalCollectionStore:i,externalCollectionViewBlockStore:r}=e;fe().A.add(n);const a=await _e().callApi({eventName:"unfurlUrl",environment:t,data:{url:n,botIds:o,spaceId:be().LU()}});fe().A.delete(n);const s="success"===a.type?a.data:{root:{error:{status_code:a.status}},relations:[]};F().createAndCommit({userAction:"unfurlingActions.startUnfurlRequestForCollection",environment:t,canUndo:!0,perform:e=>{Ke({environment:t,unfurlResponse:s,url:n,externalCollectionStore:i,externalCollectionViewBlockStore:r,transaction:e})}})}function Ke(e){const{environment:t,unfurlResponse:n,url:o,externalCollectionStore:i,externalCollectionViewBlockStore:r,transaction:c}=e,d=(0,l().US)(o),{host:u}=(0,B().qg)(d);if(!u)return;const{external_object_id:p,uri:m,bot_id:g}=n.root;if(!p||!m||!g)return;const f=T().y1(A().MV).map((()=>new(ue().md)(t,(0,$().JH)({environment:t,table:_().Vl,spaceId:(0,k().e)(r.pointer.spaceId)})))),h={};n.relations.forEach(((e,t)=>{const n=f[t],o=e,a={id:n.id,version:0,space_id:(0,k().e)(r.pointer.spaceId),parent_table:_().Vl,parent_id:i.id,alive:!0,format:o,schema:{}};h[e.uri]=n.id,N().zv({store:n,data:a,transaction:c})}));const y={id:i.id,version:0,space_id:(0,k().e)(r.pointer.spaceId),parent_table:v().ev,parent_id:r.id,alive:!0,format:{original_url:d,domain:u,...n.root,property_visibility:(S=n.root.external_schema,S&&Object.keys(S).flatMap((e=>(0,s().cC)(e)?[]:{property:`${a().U}${e}`,visibility:"hide_if_empty"}))),related_external_object_uris_to_instance_ids:{...h},is_placeholder:void 0,integration_id:void 0},schema:{}};var S;N().zv({store:i,data:y,transaction:c});if(Xe()&&n){const e=r.getCollectionViewIds();null==e||e.forEach((e=>{const t=ue().pS.createChildStore(r,{table:b().Gy,id:e,spaceId:r.getSpaceId()});if("table"===t.getType()){const e={...t.getFormat(),table_properties:tt(n.root.external_schema)};N().zv({store:t,data:{format:e},transaction:c})}}))}}async function Ge(e){const{environment:t}=e,{externalObjectInstanceBlockPointersMap:n,externalCollectionInstancePointersMap:o,externalSyncInstancePointersMap:i}=se().A.state,r=[...Object.values(n),...Object.values(o)],a=T().$z(r,(e=>e.spaceId));await(0,M().lX)(Object.entries(a),5,(e=>{let[n,o]=e;return _e().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:o},headers:void 0!==n?(0,g().WS)({spaceId:n}):void 0})}));const s=Object.values(i);s.length>0&&ne().default.checkGate({gateName:"salesforce_page_view_resync"})&&await _e().callApi({eventName:"resyncExternalSyncedCollection",environment:t,data:{recordPointers:s}}),se().A.reset()}async function $e(e){const{environment:t,externalAuthenticationValue:n}=e;let o=await _e().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:n.id,integrationId:n.integration_id,spaceId:n.space_id}});if("failed"===o.type){const e=ae().A.integrations.state.find((e=>e.id===n.integration_id));if(!e)return;Te().D6({label:Y().A.formatMessage(Ee.userReAuth)}),await ke().Jq({environment:t,integration:e,spaceId:n.space_id,from:"integration_file_picker"});const i=ae().A.bots.state.filter((e=>e.integration_id===n.integration_id))[0];if(!i)return;o=await _e().callApi({eventName:"getExternalIntegrationAccessToken",environment:t,data:{botId:i.id,integrationId:i.integration_id,spaceId:i.space_id}})}return o}function Ye(e){const{integrationType:t,integration:n}=e;return"box"===t?{type:t,title:Y().A.formatMessage(Ee.browse,{appName:n.name}),accounts:ae().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===n.id})),onSelect:Qe(e)}:"drive"===t?{type:t,title:Y().A.formatMessage(Ee.browse,{appName:n.name}),accounts:ae().A.externalAuthentications.state.filter((e=>{let{integration_id:t}=e;return t===n.id})),onSelect:Qe(e)}:void 0}function Qe(e){const{integration:t,environment:n,externalObjectTokenStore:o,externalObjectInstanceBlockStore:i}=e;return async e=>{let r=e?e.id:void 0;if(!e){const{currentSpaceStore:e}=re().default.state,o=ae().A.integrations.state.find((e=>{let{id:n}=e;return n===t.id}));if(o&&e){const i=ae().A.bots.state;await ke().Jq({environment:n,integration:o,spaceId:e.id,from:"integration_file_picker"});const a=function(e,t){const n=ae().A.bots.state;var o;if(e.length!==n.length)return null===(o=n.filter((e=>e.integration_id===t))[0])||void 0===o?void 0:o.id}(i,t.id);a&&(r=a)}}const a=ae().A.externalAuthentications.state.find((e=>e.id===r));if(a){const e=await async function(e,t,n,o,i){if(!ae().A.state.loaded)return;i.setState({error:!1,loading:!0});const r=await $e({environment:e,externalAuthenticationValue:o});if(i.setState({error:!r||"success"!==r.type,loading:!1}),r&&"failed"!==r.type)return r.data;we().ui({message:Y().A.formatMessage(Ee.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Y().A.formatMessage(Ee.copyDebuggingInformation),color:void 0,onAccept:async()=>{const t={statusCode:null==r?void 0:r.status,integrationId:n.id,botId:o.id};(await ye().R.clipboardActions.load()).copyString({environment:e,stringValue:JSON.stringify(t,null,2),copiedMessage:Ee.copiedDebuggingInfo})}}]})}(n,0,t,a,o);e&&(xe().I(),await function(e){const{integration:t,tokenDetails:n,environment:o,externalObjectInstanceBlockStore:i,botId:r}=e;if(t.id===c().d0)return async function(e,t){const{access_token:n}=e;try{await(0,H().Ay)("https://cdn01.boxcdn.net/polyfills/core-js/2.5.3/core.min.js",{resourceType:H().vt.Javascript});const e=[{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.js",resourcetype:H().vt.Javascript},{url:"https://cdn01.boxcdn.net/platform/elements/15.0.0/en-US/picker.css",resourcetype:H().vt.Stylesheet}];await Promise.all(e.map((e=>{let{url:t,resourcetype:n}=e;return(0,H().Ay)(t,{resourceType:n})})))}catch(a){return void t(!0,"")}const o=document.createElement("div");o.setAttribute("id","box-app-container"),document.body.appendChild(o);const i=new Box.FilePicker;i.show("0",n,{size:"small",container:"#box-app-container",maxSelectable:1,logoUrl:"box"});const r=()=>{i.hide(),o.remove()};i.addListener("choose",(function(e){var n;const o=null==e||null===(n=e[0])||void 0===n?void 0:n.id;o&&t(!1,`https://app.box.com/file/${o}`),r()})),i.addListener("cancel",r)}(n,Ze({environment:o,externalObjectInstanceBlockStore:i,botId:r}));if(t.id===c().Hd)return(0,G().openGoogleDriveFilePicker)({environment:o,accessToken:n.access_token,callback:Ze({environment:o,externalObjectInstanceBlockStore:i,botId:r}),integration:t,from:"link_preview_placeholder"});return void function(){if(Me){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("multiTextSelectionHelpers:",...t)}}(`no matching integration found for external file picker with integration ID ${t.id}}`)}({integration:t,environment:n,externalObjectInstanceBlockStore:i,externalObjectTokenStore:o,botId:a.id,tokenDetails:e}))}}}function Ze(e){const{environment:t,externalObjectInstanceBlockStore:n,botId:o}=e;return(e,i)=>{if(e)return we().ui({message:Y().A.formatMessage(Ee.somethingWentWrong),showCancel:!0,keepFocus:!0,items:[{label:Y().A.formatMessage(Ee.copyDebuggingInformation),color:void 0,onAccept:async()=>{const n={err:e,botId:o};(await ye().R.clipboardActions.load()).copyString({environment:t,stringValue:JSON.stringify(n,null,2),copiedMessage:Ee.copiedDebuggingInfo})}}]});et({environment:t,externalObjectInstanceBlockStore:n,url:i,botId:o})}}function Xe(){return ne().default.checkGate({gateName:"is_visibility_enabled_for_db_sync"})}function Je(e){const{environment:t,originRect:n,externalObjectInstanceBlockStore:o,integration:i}=e,r=[{type:"embed",onChange:n=>{et({environment:t,url:n.originUrl,externalObjectInstanceBlockStore:o,placeholderIntegrationId:e.placeholderIntegrationId}),xe().I()}}];if(ne().default.checkGate({gateName:"ai_source_picker"})&&((null==i?void 0:i.id)===c().bh||(null==i?void 0:i.id)===c().me)){const n=(null==i?void 0:i.id)===c().bh?"/images/external_integrations/github-icon.png":"/images/external_integrations/jira-icon.png";r.push({type:"aiSourcePicker",integration:null==i?void 0:i.id,defaultAvatar:n,onChange:n=>{et({environment:t,url:n,externalObjectInstanceBlockStore:o,placeholderIntegrationId:e.placeholderIntegrationId}),xe().I()},getResults:async(e,n)=>await async function(e){const{environment:t,query:n,integrationId:o,botId:i}=e,r=i?[i]:ae().A.bots.state.filter((e=>e.integration_id===o)).map((e=>{let{id:t}=e;return t}));if(0===r.length)return{root:{error:{status_code:500,messages:["No bot found for this integration"]}},relations:[]};return await async function(e){const{environment:t,query:n,botIds:o}=e,i=await _e().callApi({eventName:"aiSourcePicker",environment:t,data:{query:n,botIds:o,spaceId:be().LU()}}),r="success"===i.type?i.data:{root:{error:{status_code:i.status}},relations:[]};return"failed"===i.type&&we().Qg(i),r}({environment:t,query:n,botIds:r})}({environment:t,query:e,integrationId:n})})}if(i&&!t.device.isMobile){const n=function(e){const{integration:t}=e;return t.id===c().d0?Ye({integrationType:"box",...e}):t.id===c().Hd?Ye({integrationType:"drive",...e}):void 0}({integration:i,environment:t,externalObjectInstanceBlockStore:o,externalObjectTokenStore:e.externalObjectTokenStore});n&&r.push(n)}xe().W(t,{originGap:0,originRect:n,title:"Embed Link Preview",currentTab:"embed",tabs:r})}function et(e){const{environment:t,url:n,externalObjectInstanceBlockStore:o,placeholderIntegrationId:i,botId:a}=e,s=(0,A().$B)({url:n,integrations:ae().A.integrations.state,currentSpaceId:o.getSpaceId()});if("success"===s.type){const{integration:e,pattern:i}=s,c=a?[a]:ae().A.bots.state.filter((t=>t.integration_id===e.id)).map((e=>{let{id:t}=e;return t}));if(c.length>0){const a=o.getParentId(),s=(0,l().US)(n),{host:d}=(0,B().qg)(s);d&&a&&(F().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:o,data:{type:r().xd.externalObjectInstance},transaction:e}),N().zv({store:o.getFormatStore(),data:{original_url:n,domain:d},transaction:e})}}),he().Ki(t,{integrationId:e.id,entity:i.name,domain:d,from:"placeholder"})),He({environment:t,url:n,botIds:c,integrationId:e.id,externalObjectInstanceBlockStore:o})}else F().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:o.getFormatStore(),data:{integration_id:null,original_url:n,is_placeholder:null},transaction:e})}})}else if("partial"===s.type){const{integration:e}=s;F().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:t=>{N().zv({store:o.getFormatStore(),data:{is_placeholder:null,integration_id:e.id,original_url:n,error:{status_code:p().xB.UNPROCESSABLE_ENTITY}},transaction:t})}})}else"failure"===s.type?F().createAndCommit({userAction:"unfurlingActions.startUnfurlFromPlaceholder",environment:t,canUndo:!0,perform:e=>{N().zv({store:o.getFormatStore(),data:{is_placeholder:null,original_url:n,integration_id:i,error:{status_code:p().xB.UNPROCESSABLE_ENTITY}},transaction:e})}}):(0,P().HB)(s)}function tt(e){return e&&Object.entries(e).flatMap((e=>{let[t,n]=e;return(0,s().cC)(t)?[]:"hidden"===(null==n?void 0:n.visibility)?{property:`${a().U}${t}`,visible:!1}:{property:`${a().U}${t}`,visible:!0}}))}function nt(e){const{environment:t,block:n,transaction:o}=e;if(!n.isDefined()||!(0,ve().EF)(t)||!n.isType(r().xd.externalObjectInstance))return;const i=(0,$().Z1)({environment:t,table:v().ev,spaceId:n.getSpaceId()}),a=N().Wv({environment:t,id:i,type:r().xd.externalObjectInstance,spaceId:n.getSpaceId(),format:n.getFormat(),inMemoryRecordCache:n.inMemoryRecordCache,transaction:o});N().zv({store:a,data:{parent_id:n.id,parent_table:n.table,alive:!0},transaction:o});const s=n.getFormatStore().getKeyStore("related_external_object_uris_to_instance_ids").getValue();if(s)for(const r of Object.values(s)){const e={table:v().ev,id:r,spaceId:n.getSpaceId()};F().applyOperation({store:(0,ue().Oo)(n,e),operation:{pointer:e,path:[],command:"update",args:{parent_table:v().ev,parent_id:i}},transaction:o})}const l=[(0,x().wmz)((0,x().bMp)(i))];N().zv({store:n,data:{type:r().xd.text},transaction:o}),O().R9({environment:t,store:n.getBlockTitleStore(),value:l,transaction:o});const c=n.getFormat();N().zv({store:n.getFormatStore(),data:(0,R().LG)(c,(()=>null)),transaction:o})}function ot(e){var t;const{block:n,transaction:o,token:i,parentStore:r}=e,{tokenIndex:a}=i;if(!n.isDefined())return;const s=null===(t=r.getParentBlockStore())||void 0===t?void 0:t.getContentStore();if(!s)return;O().eF({block:r,editorMode:"default",transaction:o,tokenIndex:a})&&D().WH({parentStore:s,insertStore:n,afterStore:r,transaction:o})}function it(e){const{environment:t,spaceId:n,from:o,store:i,bypassCache:r}=e;let a=e.botIds;const s=ne().default.checkGate({gateName:"gdrive_scope_migration_gate"}),l=(0,K().gV)(i),d=(null==l?void 0:l.original_url)||(null==l?void 0:l.uri);if(!d)return;const u=(0,K().g8)(d,n),p=(0,K().au)(d,n);if(!u||0===p.length)return;const m=i.getCollectionStore(),{integration:f,pattern:v}=u;if(f.id===c().Hd&&s&&!a&&null!=l&&l.bot_id&&(a=[l.bot_id]),i.isCollectionView()&&m)_e().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:[{...m.pointer,spaceId:n}],bypassCache:r},headers:(0,g().WS)({spaceId:n})});else if(i.isExternalObjectInstancePageBlockStore()){c().tU.includes(f.id)?He({environment:t,url:d,botIds:a||p.map((e=>{let{id:t}=e;return t})),integrationId:f.id,externalObjectInstanceBlockStore:i}):_e().callApi({eventName:"refetchExternalObjectInstanceBlocks",environment:t,data:{recordPointers:[{...i.pointer,spaceId:n}],bypassCache:r},headers:(0,g().WS)({spaceId:n})})}else i.isExternalObjectInstanceBlockStore()&&He({environment:t,url:d,botIds:a||p.map((e=>{let{id:t}=e;return t})),integrationId:f.id,externalObjectInstanceBlockStore:i});he().zu(t,{integrationId:f.id,entity:v.name,from:o})}function rt(e){var t,n;let{environment:o,integration:i,url:r,blockStore:a}=e;switch(i.id){case c().MN:pe().A.setState({...pe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"asana",openedFrom:"link_paste"});break;case c().Hd:const e=(0,A().WS)({url:r,integration:i});if(e){const t=e.find((e=>"title"===e.id)),n=null==t?void 0:t.values[0];le().A.setState({...le().A.state,selectedFileId:n})}pe().A.setState({...pe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"gdocs",openedFrom:"link_paste"});break;case c().wK:pe().A.setState({...pe().A.state,open:!0,currentTab:"imports",highlightedSetting:void 0,defaultSubtab:"trello",openedFrom:"link_paste"});break;case c().me:const s=a&&(null===(t=(0,Q().Uo)(a))||void 0===t?void 0:t.id),l=/\/projects\/(\w+)\//,d=null===(n=r.match(l))||void 0===n?void 0:n[1];ce().Ay.setState({...ce().Ay.state,teamSpaceId:s,projectKeys:d?[d]:[]}),Ie().jh({environment:o,from:"external_object_instance_block",action:"show_teamspaces"});const u=ce().Ay.createNewFlowId();(0,j().u4)({environment:o,event:{eventName:"external_sync_entry_point",eventProperties:{integration:"jira",from:"link_paste_menu",flowId:u}}});break;case c().mn:te().M2({url:r,environment:o,from:"external_object_instance_block",integration:i,blockStore:a})}}},633892:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isHidden:!1}}}const i=o},634157:(e,t,n)=>{n.d(t,{A:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);class o extends(()=>n(757695))().default{getInitialState(){return{joinedTeamsStates:{},hasFetched:new Set}}getJoinedTeamStores(e){var t;let{userId:o,spaceStore:i}=e;return((null===(t=this.getUserJoinedTeamsState({userId:o,spaceId:i.id}))||void 0===t?void 0:t.joinedTeamsIds)??[]).map((e=>n(630116).h4.createChildStore(i,{id:e,table:n(854150).yK,spaceId:i.id})))}getUserJoinedTeamsState(e){let{userId:t,spaceId:n}=e;const o=i({userId:t,spaceId:n});return this.state.joinedTeamsStates[o]}setUserJoinedTeamsState(e){let{userId:t,spaceId:n,state:o}=e;const r=i({userId:t,spaceId:n});this.state.joinedTeamsStates[r]=o,this.emit()}getHasFetched(e){let{userId:t,spaceId:n}=e;const o=i({userId:t,spaceId:n});return this.state.hasFetched.has(o)}setHasFetched(e){let{userId:t,spaceId:n}=e;const o=i({userId:t,spaceId:n});this.state.hasFetched.add(o)}}function i(e){let{userId:t,spaceId:n}=e;return`${t}:${n}`}const r=new o},638146:(e,t,n)=>{n.d(t,{H6:()=>r,Ie:()=>i,cf:()=>a});var o=()=>n(763884);const i="CollectionView:";function r(e){return`${i}${e}`}function a(e){let{userId:t,viewBlockId:n}=e;if(t)return o().K.get({userId:t,key:r(n)})}},638458:(e,t,n)=>{n.d(t,{Q:()=>i});var o=()=>n(281994);function i(e){const{formulasModule:t,formulaValueTypes:n,...i}=e,r=e.automationModel.getSpaceId();return{...i,getFormulaContextValueDependencies:e=>(0,o().ZU)({...e,formulasModule:t,formulaValueTypes:n}),getFormulaContentsDependencies:e=>(0,o().dL)({formulasModule:t,typecheckContextValues:n,permission:{minimumRole:e.minimumRole,value:e.value},spaceId:r})}}},638616:(e,t,n)=>{n.d(t,{W:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M3.375 12A2.625 2.625 0 0 0 6 14.625h1.42a.625.625 0 1 1 0 1.25H6a3.875 3.875 0 0 1 0-7.75h9.741l-3.333-3.333a.625.625 0 0 1 .884-.884l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884l3.333-3.333H6A2.625 2.625 0 0 0 3.375 12"})},i=(0,n(340498).wt)("arrowUTurnUpRight",o)},640653:(e,t,n)=>{n.d(t,{Ar:()=>be,Bz:()=>ae,GK:()=>ue,Gb:()=>Pe,I0:()=>pe,IL:()=>_e,Mz:()=>Be,Pu:()=>De,Qx:()=>ye,RC:()=>te,RF:()=>we,X$:()=>me,XZ:()=>Ve,Xz:()=>Ee,Yi:()=>ve,_s:()=>He,aB:()=>Ae,au:()=>oe,bN:()=>Ce,c2:()=>de,cU:()=>le,dT:()=>ze,e3:()=>ge,ex:()=>ce,fD:()=>Ne,hN:()=>Ue,hT:()=>je,hx:()=>Le,jy:()=>Ie,km:()=>fe,mQ:()=>Me,oT:()=>xe,p3:()=>Fe,p4:()=>Se,r7:()=>Oe,rc:()=>ie,s7:()=>ke,u_:()=>Te,zd:()=>X});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(496506),i=()=>n(584262),r=()=>n(130382),a=()=>n(617871),s=()=>n(493720),l=()=>n(792071),c=()=>n(946065),d=()=>n(179034),u=()=>n(96689),p=()=>n(798880),m=()=>n(294712),g=()=>n(495989),f=()=>n(677338),v=()=>n(322769),h=()=>n(313127),_=()=>n(496603),b=()=>n(534177),y=()=>n(468602),S=()=>n(433052),w=()=>n(507785),k=()=>n(457395),I=()=>n(664713),x=()=>n(780054),A=()=>n(327300),C=()=>n(646736),T=()=>n(165162),M=()=>n(607859),P=()=>n(696746),B=()=>n(644914),R=()=>n(82648),E=()=>n(155959),D=()=>n(351360),N=()=>n(90873),L=()=>n(605402),O=()=>n(151059),U=()=>n(630116),F=()=>n(752885),V=()=>n(640812),j=()=>n(486130),z=()=>n(134217),H=()=>n(186445),W=()=>n(47373),q=()=>n(492414),K=()=>n(972435),G=()=>n(100875),$=()=>n(396301),Y=()=>n(108944),Q=()=>n(299545),Z=()=>n(37433);async function X(e,t){const n=await async function(e,t){var n;const o=e.currentUser.id,i=t.getSpaceStore();if(!i||!o)return;await t.load();const r=t.hasRemoteSharedPages();r||await I().Z({environment:e,spaceId:i.id,userId:o});const a=(0,H().rp)(e).state;if(!a)return;const s=(0,$().VR)(),l=(0,$().KP)({sidebarOrder:s,sidebarState:a,showLockedSidebar:!1});for(const d of l){let e;switch(d){case"favorites":e=ee(t.getBookmarkedPages());break;case"teamspaces":e=J(t);break;case"shared":return a.visibleSharedPagesStores[0];case"private":e=ee(a.visiblePrivatePagesStores);break;case"workspace":return ee(t.getWorkspacePages());default:(0,b().HB)(d)}if(e)return e}const c=J(t);if(c)return c;const u=N().A.getSharedPagesState({spaceId:i.id,userId:o}),p=null==u||null===(n=u.currentPageIds)||void 0===n?void 0:n[0];if(p)return U().Bv.createChildStore(i,{table:d().ev,id:p,spaceId:i.id})}(e,t);return n&&!n.isPlaceholderWorkflowTemplateBlock()?n:void 0}function J(e){const t=e.getTeamsStores();for(const n of t){const e=ee(n.getTeamPagesStores());if(e)return e}}function ee(e){return null==e?void 0:e.find((e=>!e.isPlaceholderWorkflowTemplateBlock()))}const te=7,ne={};function oe(e){const t=e.type,n=ne[t]??new(s().XQ);return ne[t]||(ne[t]=n),n.memo((()=>new(o().default)((()=>ie(e)),{debugName:"pageContextStore"})),[e.environment,e.spaceViewStore,e.userSettingsStore])}function ie(e){const{environment:t,spaceViewStore:n,userSettingsStore:o,type:i}=e,r=n.getSpaceId();let a="shared"===i?le(t,n):function(e,t){const n=t.getPrivatePages(e)??[],o=(0,$().XA)({spaceViewStore:t});if(o)return re(n);return n}(t,n);if(!a)return{allPagesStores:[],visiblePagesStores:[]};if(a=a.filter((e=>{const{isCopyIndicator:t,shouldShowAsLoadingSpinner:n}=(0,B().u8)(e);return!t||t&&n})),!r)return{allPagesStores:a,visiblePagesStores:a};if("private"===i||"shared"===i&&(0,W().rY)(t)){const e=(0,$().RQ)({spaceViewStore:n,type:i});return{allPagesStores:a,visiblePagesStores:e.truncationLimit===c().vw?a:a.slice(0,e.truncationLimit)}}if(!o.hasUserPinnedToOutliner({type:$().BP[i],spaceId:r}))return{allPagesStores:a,visiblePagesStores:a.slice(0,te)};const s=new Set(a.map((e=>{let{id:t}=e;return t})));return{allPagesStores:a,visiblePagesStores:n.getPinnedSharedPages().filter((e=>{let{id:t}=e;return s.has(t)}))}}function re(e){if(!e)return[];const t=e.map((e=>{if(!e.isDefined())return;const t=e.getLastEditedTime()||e.getCreatedTime();return t?{store:e,timestamp:t}:void 0})).filter(b().O9);return _().Ul(t,(e=>{let{timestamp:t}=e;return t})).reverse().map((e=>e.store))}function ae(e){let{store:t,spaceStore:n,userId:o}=e;const i=(0,C().dp)(n,o),r=(0,Y().Lf)(t);if(!r)return!1;let a=!1;return r&&(r instanceof U().Bv?a=!n.isTeamsEnabled()&&o&&n.isDefined()&&t.hasSpacePermission()?Boolean(i.isMember()):r.id!==t.id&&r.canRead():(0,Q().$R)(r)&&(a=Boolean(r.isMemberOrGuest(o,j()._.getSpacePermissionGroupIds({userId:o,spaceId:t.getSpaceId()})))&&r.canRead())),(0,Q()._C)(t)&&t.canRead()&&t.isNavigableBlock()&&t.isSharedPage()&&!(0,Y().ze)(t)&&!a}const se=new(s().XQ);function le(e,t){const n=e.currentUser.id,o=t.getSpaceStore();if(o&&n){const i=N().A.getSharedPagesState({spaceId:o.id,userId:n}),r=i&&i.currentPageIds?i.currentPageIds:[],a=se.memo((()=>function(e,t){return new(F().p)({debugName:"isValidSharedRemotePage",memoizeRecursion:!1,deepEquals:!1,compute:function(n){const o=e.currentUser.id;return!!o&&ae({store:n,spaceStore:t,userId:o})}})}(e,o)),[e,o]),s=_().oE(r.map((e=>{const t=U().Bv.createChildStore(o.getPagesStore(),{table:d().ev,id:e,spaceId:o.id});if(a.getStateFor(t))return t}))),l=new Set(s.map((e=>e.id)));let c;const u=t.getSharedPages()??[],p=0===u.length;if(p){c=pe(e,o).filter((e=>{l.has(e.id)}))}else c=u.filter((e=>!(0,Y().ze)(e)&&l.has(e.id)));(0,R().Hg)({use_legacy_shared_pages_ordering:p&&c.length>0});const m=[...c,...s],g=_().hS(m,(e=>e.id));if((0,W().rY)(e)){const{sortOption:e}=(0,$().RQ)({spaceViewStore:t,type:"shared"});if("lastEdited"===e)return re(g)}return g}return[]}async function ce(e){const{disableRedirectUrl:t,environment:n,blockNoAccessRedirect:o}=e;n.device.isMobileNative&&(0,T().Sx)({gateName:"mobile_app_launch_blank_page"})||await k().y();const{id:r}=n.currentUser,{url:a,spaceId:s,route:c}=await S().wA(n),d=y().M(r),v=w().Ch(r),h=f().pG();if(!r)throw new Error("User not logged in.");const I=new(U().LU)(n,{table:p().oo,id:r}),x=new(U().dZ)(n,{table:m().GD,id:r}),A=new(U().GG)(n,{table:g().xM,id:r}),[C,M]=await Promise.all([I.awaitNonNullValue(),x.awaitNonNullValue(),A.awaitNonNullValue()]),B=s?fe(s):void 0,R=function(e){const{environment:t,lastVisitedUrl:n}=e,o=t.RouterStore.state.initialRoute;if("page"===o.name)return{url:n,isPersonalHomeUrl:!1};if(t.device.isMobileNative&&t.device.isPhone&&(0,T().Sx)({gateName:"mobile_app_launch_blank_page"}))return{url:"/blank",isPersonalHomeUrl:!1};return function(e){const{environment:t,lastVisitedUrl:n,lastVisitedSpaceView:o,lastVisitedSpace:r}=e,a=ve(t,{space:null==r?void 0:r.getModel(),spaceView:null==o?void 0:o.getModel()});switch(a){case"last_visited_page":return n?{url:n,isPersonalHomeUrl:!1}:void 0;case"first_page":case"chat":return;case"personal_home":if(!o)return;const e=P().x$(o);if(!e)return;return{url:(0,q().Ay)({store:e,preferPublicLink:!1,pageVisitSource:i().y8.DefaultHome}),isPersonalHomeUrl:!0};default:(0,b().HB)(a)}}(e)}({environment:n,lastVisitedUrl:a,lastVisitedSpaceView:B,lastVisitedSpace:s?U().SL.createChildStore(x,{table:u().NX,id:s}):void 0}),D=null==R?void 0:R.url,N=!!C&&Boolean(C.onboarding_completed),L=function(e){const{userValue:t}=e;if(!t)return!1;if(Boolean(t.mobile_onboarding_completed))return!0;return(0,E().T)("isAutomatedQABuild")}({userValue:C}),O=function(e,t){const n=l().Bj6.fromValue(m().GD,e),o=n.getSpaceViewPointers();return o&&o.length>0?U().vH.createChildStore(t,o[0]):void 0}(M,x);O&&await O.load();const F=O?O.getSpaceStore():void 0;if(c&&!t){const e=await w().Li({environment:n,request:{type:"block-space",spaceId:s,...c}});if(e){const t="page"===c.name&&c.blockId?c.blockId:void 0;let i=!1;if(o&&"page"===c.name){const{blockId:e,spaceId:t}=c;if(e){const o=new(U().Bv)(n,{table:"block",id:e,spaceId:t});await o.load(),i="none"===o.getRole()}}const r=["read_and_write","comment_only","reader"].includes(e.publicAccessRole);if(!i&&e&&!_().Im(e)&&(e.canJoinSpace||e.userHasExplicitAccess||!r))return{userStore:I,userSettingsStore:A,userRootStore:x,firstSpace:F,firstSpaceView:O,lastVisitedSpaceView:B,redirectUrl:D,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectPageId:t,redirectBlockId:void 0,hasExplicitAccessToRedirectPage:e.userHasExplicitAccess,canRequestAccessToRedirectPage:e.canRequestAccess,redirectSpaceName:e.spaceName,redirectSpaceId:e.spaceId,canJoinRedirectSpace:e.canJoinSpace,onboardingCompleted:N,mobileOnboardingCompleted:L,isPersonalHomeRedirect:(null==R?void 0:R.isPersonalHomeUrl)??!1,lastVisitedUrl:a,inviteCode:void 0}}}return{userStore:I,userSettingsStore:A,userRootStore:x,firstSpace:F,firstSpaceView:O,lastVisitedSpaceView:B,forkPageBlockId:d,publicAccessPageId:v,oauthAuthorizationParams:h,redirectUrl:void 0,redirectBlockId:void 0,redirectPageId:void 0,hasExplicitAccessToRedirectPage:void 0,canRequestAccessToRedirectPage:void 0,redirectSpaceId:void 0,canJoinRedirectSpace:void 0,onboardingCompleted:N,mobileOnboardingCompleted:L,redirectSpaceName:void 0,isPersonalHomeRedirect:!1,lastVisitedUrl:void 0,inviteCode:void 0}}function de(e,t){return U().sk.fromV1(t).getIcon()}function ue(e,t){const n=t.getName(),o=K().A.getIntl().formatMessage({defaultMessage:"Untitled workspace",id:"spaceHelpers.getSpaceName.untitledWorkspace.name"});if(n)return n||o;{const n=O().A.getData(e,{spaceId:t.id});if(n)return n.name||o}return o}function pe(e,t){const n=t.getPagesStore();return function(e,t){const n=e.currentUser.id,o=t.getPagesStore().getValue();if(o&&n){const e=V().A.getSpaceInaccessiblePages(t.id,n);return e?o.filter((t=>!e.has(t))):o}return[]}(e,t).map((e=>U().Bv.createChildStore(n,{table:d().ev,id:e})))}function me(e,t,n){const o=O().A.getData(e,{spaceId:t}),i=!Boolean(null==o?void 0:o.domainIsAutogenerated),r=_().oE([i&&(null==o?void 0:o.domain),"invite",n]).join("/");return`${x().A.domainBaseUrl}/${r}`}function ge(e){let{environment:t,spaceStore:n,inviteLinkCode:o}=e;if(void 0===o)return;return me(t,n.id,o)}function fe(e){const{currentUserRootStore:t}=D().default.state;return null==t?void 0:t.getSpaceViewStores().find((t=>t.getSpaceId()===e))}function ve(e,t){let{space:n,spaceView:o}=t;const i=function(e){var t;let{environment:n,spaceView:o,space:i}=e;if(function(){const e=D().default.state.spaceTransitionStatus;let t;switch(e){case"joiningOrCreatingSpace":t=!0;break;case"switchingToOrLoadingSpace":case"notTransitioning":t=!1;break;default:(0,b().HB)(e)}return t||M().default.state.isOnboarding}())return he;let r=null==o||null===(t=o.getSettings())||void 0===t?void 0:t.on_app_start;"chat"===r&&(0,A().$$)().showAiChatModuleInHome&&(r="personal_home");const a=(0,Z().isPersonalHomeDefaultLandingPageEnabled)(i)?"personal_home":he,s=r??a;if("personal_home"!==s)return s;const{isPhone:l,isMobileNative:c}=n.device;return l&&c?he:"personal_home"}({environment:e,spaceView:o,space:n});return(0,G().cq)({spaceView:o,preference:i}),i}const he="last_visited_page";function _e(e){return!!e&&!e.canRead()}function be(e){return!!e&&e.getZeroRetentionEnabled()}function ye(e,t){const n=(0,z().Be)(t)||[],o=e.currentUser.id;for(const i of n)if(i.userId===o&&"none"===i.role&&i.isTeamGuest)return!0;return!1}function Se(e){return!!e&&e.canAdmin()}function we(e){var t;let{groupId:n}=e;return null===(t=L().A.state.permissionGroupsAndMemberCounts.find((e=>e.group.group_id===n)))||void 0===t?void 0:t.group}function ke(e){const t=D().default.state.currentSpaceStore,n=e.currentUser.id;return Boolean(t&&n&&(0,C().dp)(t,n).isWorkspaceOwner())}function Ie(){const e=D().default.state.currentSpaceStore;return!(null==e||!e.isDefined())&&"enterprise"===e.getSubscriptionTier()}function xe(e){const t=e.getSubscriptionTier();return"plus"===t||"business"===t||"enterprise"===t}function Ae(e){const t=null==e?void 0:e.getCreatedTime();return t?(0,r().Mn)(t):null}function Ce(e){const t=Ae(e);return null!==t&&t<=7}function Te(e){return(0,b().Vq)(e)&&"none"!==e.role?e.planType:void 0}function Me(e){return(0,b().Vq)(e)&&"none"!==e.role?e.createdTime:void 0}function Pe(e){return(0,b().Vq)(e)&&"none"!==e.role?e.subscriptionTier:void 0}function Be(e){return(0,b().Vq)(e)&&"none"!==e.role?e.memberCount:void 0}function Re(e){return(0,b().Vq)(e)&&"none"!==e.role?e.guestCount:void 0}function Ee(e){const{environment:t,spaceId:n}=e;return Be(O().A.getData(t,{spaceId:n}))}async function De(e){const{environment:t,spaceId:n}=e;return Be(await O().A.awaitData(t,{spaceId:n}))}function Ne(e){const{environment:t,spaceId:n}=e;return Re(O().A.getData(t,{spaceId:n}))}async function Le(e){const{environment:t,spaceId:n}=e;return Re(await O().A.awaitData(t,{spaceId:n}))}function Oe(e){return null==e?void 0:e.getEnableGuestInviteRequest()}function Ue(e){return Boolean(Oe(e))&&!Boolean(null==e?void 0:e.canAdmin())}function Fe(){var e,t,n,o,i,r,a,s,l,c,d,u,p,m;const{currentSpaceStore:g,currentSpaceViewStore:f}=D().default.state,v=null==g?void 0:g.getSpaceSurveyData(),_=null==f?void 0:f.getUserSurveyData();return{function:null!=_&&null!==(e=_.function)&&void 0!==e&&e.value?(0,h().Tj)(null==_||null===(t=_.function)||void 0===t?void 0:t.value):void 0,role:null!=_&&null!==(n=_.role)&&void 0!==n&&n.value?(0,h().t_)(null==_||null===(o=_.role)||void 0===o?void 0:o.value):void 0,educationRole:null==_||null===(i=_.education_role)||void 0===i?void 0:i.value,educationLevel:null==_||null===(r=_.education_level)||void 0===r?void 0:r.value,useCases:null!=v&&null!==(a=v.use_cases)&&void 0!==a&&a.value?(0,h().h0)(null==v||null===(s=v.use_cases)||void 0===s?void 0:s.value):void 0,companySize:null!=v&&null!==(l=v.company_size)&&void 0!==l&&l.value?(0,h().JE)(null==v||null===(c=v.company_size)||void 0===c?void 0:c.value):void 0,intent:null!=v&&null!==(d=v.intent)&&void 0!==d&&d.value?(0,h().j9)(null==v||null===(u=v.intent)||void 0===u?void 0:u.value):void 0,categories:null==_||null===(p=_.categories)||void 0===p?void 0:p.value,collaborativeIntent:null==v||null===(m=v.collaborative_intent)||void 0===m?void 0:m.value}}function Ve(e){return e.getSetting("disable_notion_calendar")}function je(e){return Boolean(e.getSetting("self_serve_enterprise_eligible"))}function ze(e){let{env:t,spaceStore:n}=e;return!(0,v().nH)({spaceBotSettings:n.getBotSettings(),integrationId:a().io,env:t})||_e(n)||Ve(n)}function He(e){return e.getSetting("upgrade_request_banner_data")}},640703:(e,t,n)=>{function o(e){return e.slice(0,8)}n.d(t,{g:()=>o})},640812:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{readyPromise:(0,n(763824).yX)(),localSpaceInaccessiblePages:void 0,remoteSpaceInaccessiblePages:void 0}}getSpaceInaccessiblePages(e,t){const n=this.state;return n.remoteSpaceInaccessiblePages&&n.remoteSpaceInaccessiblePages[t]?n.remoteSpaceInaccessiblePages[t][e]:n.localSpaceInaccessiblePages&&n.localSpaceInaccessiblePages[t]?n.localSpaceInaccessiblePages[t][e]:void 0}}const i=new o},640867:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1,fullscreenNodeAnimationComplete:!0,startScrollTop:0,skipAnimations:!1,isSaving:!1,zoomScale:1,panStartPosition:{x:0,y:0},panOffset:{x:0,y:0}}}}const i=new o;(0,n(604341).exposeDebugValue)("GlobalFullScreenStore",i);const r=i},641007:(e,t,n)=>{n.d(t,{TI:()=>c,px:()=>s,rb:()=>a,xY:()=>l});var o=()=>n(764880),i=()=>n(824862),r=()=>n(798880);const a=(0,o().A7)(r().BF),s=((0,o().A7)(r().mc),(0,o().A7)(r().zz)),l=((0,o().A7)(r().ai),(0,o().A7)(r().hR)),c=(0,o().qt)(i().eR);i().eR.space_id},642046:(e,t,n)=>{n.d(t,{t:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{overrides:{}}}setOverride(e,t){this.setState({overrides:{...this.state.overrides,[e]:t}})}clearOverride(e){this.setState({overrides:{...this.state.overrides,[e]:void 0}})}}const i=new o;(0,n(604341).exposeDebugValue)("coEditingOverridesStore",i)},642557:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,lockSmallIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8 8.1a1.125 1.125 0 0 0-.525 2.12v.93a.525.525 0 1 0 1.05 0v-.93A1.125 1.125 0 0 0 8 8.1"}),(0,o.jsx)("path",{d:"M8 1.6a3.25 3.25 0 0 0-3.25 3.25v1a2.026 2.026 0 0 0-1.575 1.975v4.2c0 1.118.907 2.025 2.025 2.025h5.6a2.025 2.025 0 0 0 2.025-2.025v-4.2c0-.964-.673-1.77-1.575-1.975v-1A3.25 3.25 0 0 0 8 1.6M6 4.85a2 2 0 1 1 4 0v.95H6zM4.425 7.825c0-.428.347-.775.775-.775h5.6c.428 0 .775.347.775.775v4.2a.775.775 0 0 1-.775.775H5.2a.775.775 0 0 1-.775-.775z"})]})},r=(0,n(340498).wt)("lockSmall",i)},643534:(e,t,n)=>{n.d(t,{A:()=>i});n(16280),n(944114);var o=()=>n(319625);const i=class{constructor(e){let{maxSize:t,prefix:n,store:o,version:i}=e;this.prefix=void 0,this.maxSize=void 0,this.store=void 0,this.version=void 0,this.serializedKeys=void 0,this.namespace=void 0,this.lastVersion=void 0,this.createInternalKey=e=>`${this.namespace}${e}`,this.maxSize=t,this.prefix=n,this.store=o,this.version=i.toString(),this.namespace=`${n}:${i}::`,this.serializedKeys=`${n}:${i}:keys`,this.lastVersion=`${n}:version`}set(e,t){try{this.setInternal(e,t),this.promote(e)}catch(n){return{error:(0,o().A)(n)}}return{value:void 0}}get(e){try{const t=this.getInternal(e);if(null!==t)return{value:t}}catch(t){return{error:(0,o().A)(t)}}return{value:void 0}}remove(e){try{this.getKeys().indexOf(e)>-1&&(this.removeInternal(e),this.evict(e))}catch(t){return{error:(0,o().A)(t)}}return{value:void 0}}clear(){try{const e=this.getKeys();for(const t of e)this.removeInternal(t);this.setKeys([])}catch(e){return{error:(0,o().A)(e)}}return{value:void 0}}scan(e){try{const t=this.getKeys();for(const n of t){const t=this.getInternal(n);if(null===t)throw new Error(`Item not found: ${n}`);e(n,t)}}catch(t){return{error:(0,o().A)(t)}}return{value:void 0}}entries(){const e=[],t=this.scan(((t,n)=>{e.push([t,n])}));return t.error?{error:t.error}:{value:e}}keys(){try{return{value:this.getKeys()}}catch(e){return{error:(0,o().A)(e)}}}slowGC(){const e=[],t=e=>e!==this.serializedKeys&&(!!e.endsWith("keys")&&this.isOldKey(e));for(let n=0;n<this.store.length;n+=1){const o=this.store.key(n);null!==o&&((this.isOldKey(o)||t(o))&&e.push(o))}for(const n of e)this.store.removeItem(n)}updateVersionAndGC(){const e=this.store.getItem(this.lastVersion);if(null!==e){const t=parseInt(e,10),n=parseInt(this.version,10),o=!Number.isNaN(t),i=!Number.isNaN(n);o&&i&&t<n&&this.slowGC()}this.store.setItem(this.lastVersion,this.version)}isOldKey(e){if(!e.startsWith(`${this.prefix}:`))return!1;const t=e.substring(`${this.prefix}:`.length),n=parseInt(t,10);if(Number.isNaN(n))return!1;return n<parseInt(this.version,10)}getKeys(){const e=this.store.getItem(this.serializedKeys);if(null===e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}setKeys(e){const t=JSON.stringify(e);this.store.setItem(this.serializedKeys,t)}promote(e){const t=this.getKeys(),n=t.indexOf(e);if(n>-1)t.splice(n,1),t.unshift(e);else if(t.unshift(e),t.length>this.maxSize){const e=t.splice(this.maxSize);for(const t of e)this.removeInternal(t)}this.setKeys(t)}evict(e){const t=this.getKeys(),n=t.indexOf(e);n>-1&&t.splice(n,1),this.setKeys(t)}setInternal(e,t){this.store.setItem(this.createInternalKey(e),JSON.stringify(t))}getInternal(e){const t=this.store.getItem(this.createInternalKey(e));return null===t?null:JSON.parse(t)}removeInternal(e){this.store.removeItem(this.createInternalKey(e))}}},643819:(e,t,n)=>{n.d(t,{W:()=>o});n(16280),n(898992),n(354520),n(908872),n(737550);class o{static fromValue(e){const{amount:t,currencyCode:n}=e;return new o(n,t)}static sum(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=t.filter((e=>void 0!==e));if(0===i.length)return;const{currencyCode:r}=i[0];if(i.some((e=>e.currencyCode!==r)))throw new Error("Cannot add money with different currencies");const a=i.reduce(((e,t)=>e+t.amount),0);return o.fromValue({amount:a,currencyCode:r})}static zero(e){return o.fromValue({amount:0,currencyCode:e})}constructor(e,t){this.currencyCode=void 0,this.amount=void 0,this.currencyCode=e,this.amount=t}toMoneyValue(){return{amount:this.amount,currencyCode:this.currencyCode}}withAmount(e){return new o(this.currencyCode,e)}withAddedAmount(e){return new o(this.currencyCode,this.amount+e)}plus(e){if(this.currencyCode!==e.currencyCode)throw new Error(`Cannot add money with currency code ${this.currencyCode} to money with currency code ${e.currencyCode}`);return new o(this.currencyCode,this.amount+e.amount)}minus(e){return this.plus(e.withMultipliedAmount(-1))}withMultipliedAmount(e){return new o(this.currencyCode,this.amount*e)}withDividedAmount(e){return new o(this.currencyCode,this.amount/e)}zeroIfNegative(){return new o(this.currencyCode,Math.max(0,this.amount))}zeroIfPositive(){return new o(this.currencyCode,Math.min(0,this.amount))}isPositive(){return this.amount>0}isNegative(){return this.amount<0}}},643893:(e,t,n)=>{n.d(t,{A:()=>i});n(16280);var o=()=>n(221844);const i=new class{constructor(){this.subscribedRecords=void 0,this.pendingUnsubscribeRecords=void 0,this.environmentProvider=void 0,this.environmentProvider=()=>{throw new Error("Environment not ready")},this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}getPendingUnsubscribeCount(){return this.pendingUnsubscribeRecords.size}updateEnvironment(e){this.environmentProvider=()=>e}getSubscriptionForRecord(e){return this.subscribedRecords.get((0,o().Z)(e))}isSubscribedToRecord(e){const t=this.subscribedRecords.get((0,o().Z)(e));return Boolean(t)}addToSubscribedRecords(e){const t=(0,o().Z)(e),n={...e};this.subscribedRecords.set(t,n)}removeFromSubscribedRecords(e){const t=(0,o().Z)(e);this.subscribedRecords.delete(t)}addToPendingUnsubscribeRecords(e,t){const n=(0,o().Z)(e),i={...e,timestamp:t};this.pendingUnsubscribeRecords.set(n,i)}removeFromPendingUnsubscribeRecords(e){this.pendingUnsubscribeRecords.delete((0,o().Z)(e))}forEachPendingUnsubscribeRecord(e){for(const{pointer:t,userId:n,timestamp:o}of this.pendingUnsubscribeRecords.values())e({userId:n,pointer:t,timestamp:o,environment:this.environmentProvider()})}reset(){this.subscribedRecords=new Map,this.pendingUnsubscribeRecords=new Map}safelyGetEnvironment(){try{return this.environmentProvider()}catch(e){return}}getSubscribedBlockDebuggingData(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.safelyGetEnvironment();if(!t)return;const o={loadedBlockTypes:{},loaded:0,notLoaded:0};for(const[i,r]of this.subscribedRecords.entries())if((e||!this.pendingUnsubscribeRecords.has(i))&&r.pointer.table===n(179034).ev){const e=t.defaultRecordCache.inMemoryRecordCache.getRecord(r);if(e&&e.value){const t=e.value.type;t in o.loadedBlockTypes||(o.loadedBlockTypes[t]=0),o.loadedBlockTypes[t]+=1,o.loaded+=1}else o.notLoaded+=1}return o}}},644837:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}open(e){this.setState({open:!0,...e})}}const i=new o},644914:(e,t,n)=>{n.d(t,{EN:()=>Z,KB:()=>L,KM:()=>U,LW:()=>ie,MJ:()=>Q,Nk:()=>j,Ql:()=>G,R8:()=>Y,Sj:()=>oe,UF:()=>te,UN:()=>J,Uh:()=>z,VG:()=>X,Vl:()=>ee,Zr:()=>B,aL:()=>T,ab:()=>D,bG:()=>R,hX:()=>ae,kf:()=>q,km:()=>W,me:()=>O,o1:()=>$,qe:()=>ne,r6:()=>H,rw:()=>V,ry:()=>P,sx:()=>E,tv:()=>N,u8:()=>le,uX:()=>F,v8:()=>se,vK:()=>ce,zo:()=>K});n(581454);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(763884),s=()=>n(175947),l=()=>n(284371),c=()=>n(890754),d=()=>n(590027),u=()=>n(186445),p=()=>n(159588),m=()=>n(836251),g=()=>n(154807),f=()=>n(900652),v=()=>n(441199),h=()=>n(311337),_=()=>n(326589),b=()=>n(351360),y=()=>n(508496),S=()=>n(545206),w=()=>n(589994),k=()=>n(712505),I=()=>n(749687),x=()=>n(737230),A=()=>n(265201);const C=320,T=800,M=20,P=22,B=30,R=8,E=4;function D(){const e=(0,o().Y0)().isMobile;return(0,r().IS)((t=>({topButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:M,height:M},bottomButtonIcon:{fill:e?t.mediumIconColor:t.sidebarSecondaryColor,width:M,height:M},baseSidebarItem:{...(0,p().sQ)({isMobile:e}),fontWeight:l().Wy.medium},currentSelectedSidebarItem:{background:t.sidebarItemSelectedBackground,color:t.text.primary,...e&&{boxShadow:`\n                            0 1px 0 ${t.buttonHoveredBackground}\n                        `}},currentSelectedSidebarIcon:{fill:t.sidebarSecondaryColor}})),[e])}function N(e){return!!e.device.isDesktop||!!e.device.isTablet&&!(0,h().y)(e)}function L(e){return((0,m().w6)(e)||(0,_().g)()||e.currentUser.isLoggedIn())&&I().sidebarExpandedStore.state}function O(e){return j(e)&&x().Ay.state.currentTab===x().tF.Comments}function U(e){return j(e)&&x().Ay.state.currentTab===x().tF.Updates}function F(e){return j(e)&&x().Ay.state.currentTab===x().tF.Info}function V(e){const{tab:t}=e,n=(0,o().v3)();return(0,i().K8)((()=>j(n)&&x().Ay.state.currentTab===t),[n,t])}function j(e){var t;if((null===(t=b().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)!==x().Ay.state.openedOnBlockId)return!1;const n=e.currentUser.isLoggedIn()||x().Ay.state.currentTab===x().tF.Info||(0,_().g)();return!e.device.isMobile&&n&&x().Ay.state.expanded||A().A.state.open}function z(e){return e.WindowSizeStore.state.width-q(e)-K(e,!1)}function H(e){const{isDesktop:t,isMobile:n,isTablet:o}=e.device,{WindowSizeStore:i}=e,r=i.isLandscape(),a=y().default.checkGate({gateName:"tablet_refresh_gate"}),s=n&&!o&&r;return t||o&&a?I().sidebarWidthStore.state:s||o&&!a?Math.min(C,.87*e.WindowSizeStore.state.width):.87*e.WindowSizeStore.state.width}function W(e){const{shouldShowSidebar:t}=(0,u().X4)(e),n=L(e);return t&&n&&N(e)?H(e):0}function q(e){const{shouldShowSidebar:t}=(0,u().X4)(e),n=L(e);return t&&n&&N(e)?H(e)+f().Z8():t&&!n&&v().default.isOpen()?f().Z8():0}function K(e,t){return t&&k().default.state.open?0:function(e){if(e.device.isMobile)return 0;if(G(e)>0){return(0,g().eO)({environment:e,isInPeek:!0})}return j(e)?x().Ay.state.width:0}(e)+G(e)+function(e){let t=0;(0,c().getIsChatSidebarOpen)(e)&&(t+=d().B.getState()??400,d().M.state.isDebugSidebarOpen&&(t+=d().M.state.debugSidebarWidth));return t}(e)}function G(e){if(!k().default.state.open||k().default.state.isClosing)return 0;const t=(0,g().eO)({environment:e,isInPeek:!0});return k().default.isSidePeekOpen()?k().default.getSidePeekWidth(e.WindowSizeStore.state.width)-t:0}function $(e){return e.device.isAndroid&&!e.device.isTablet||e.device.isTablet&&e.WindowSizeStore.isPortrait()}function Y(e){const t=q(e)+f().Z8()+G(e);return e.WindowSizeStore.state.width-t}function Q(e){return d().M.state.isFullWidthMode&&(0,c().getIsChatSidebarOpen)(e)}const Z=(0,n(959013).YK)({createOrJoinWorkspace:{defaultMessage:"Create or join workspace",id:"sidebarSwitcher.createOrJoinWorkspaceButton.prompt"},personalPlan:{defaultMessage:"Personal Plan",id:"sidebarSwitcher.personalPlan.label"},proPlan:{defaultMessage:"Personal Pro Plan",id:"sidebarSwitcher.proPlan.label"},educationPlan:{defaultMessage:"Personal Pro Plan (Education)",id:"educationPlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"sidebarSwitcher.educationPlusPlan.label"},freePlan:{defaultMessage:"Free Plan",id:"sidebarSwitcher.freePlan.label"},teamTrialPlan:{defaultMessage:"Team Plan (Trial)",id:"teamTrialPlan.title"},teamPlan:{defaultMessage:"Team Plan",id:"teamPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"sidebarSwitcher.enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"sidebarSwitcher.legacyPlan.label"},workspaceSubtitleWithMembers:{id:"sidebarSwitcher.workspaceSubtitleWithMembers.label",defaultMessage:"{planType} · {numberOfWorkspaceMembers, plural, one {{numberOfWorkspaceMembers} member} other {{numberOfWorkspaceMembers} members}}"},workspaceSubtitleWithoutMembers:{id:"sidebarSwitcher.workspaceSubtitleWithoutMembers.label",defaultMessage:"{planType}"}});function X(e){switch(e){case"team_free":case"personal_free":case"free":return Z.freePlan;case"personal":case"plus":return Z.plusPlan;case"student":return Z.educationPlusPlan;case"business":return Z.businessPlan;case"enterprise":return Z.enterprisePlan;default:return Z.legacyPlan}}function J(e){return e.canRead()&&"copy_indicator"!==e.getType()}function ee(e){let{isExpanded:t,isFullScreenDesktop:n,isShowingTabBar:o,isElectron:i}=e;return!o&&function(e){let{isExpanded:t,isFullScreenDesktop:n,isElectron:o}=e;return o&&t&&!n}({isExpanded:t,isFullScreenDesktop:n,isElectron:i})}function te(e){let{isExpanded:t,isFullScreenDesktop:n,isShowingTabBar:o,isElectron:i}=e;return t&&!o&&!ee({isExpanded:t,isFullScreenDesktop:n,isShowingTabBar:o,isElectron:i})}const ne=15;function oe(e){return s().ek(e.device.isElectronMac)+ne}function ie(e,t){return`${e.id}:${t}`}function re(e){let{environment:t,section:n,isSectionShown:o,spaceViewId:i}=e;if(!o)return null;return!0!==a().K.get({userId:t.currentUser.id,key:ie({id:i},n)})}function ae(e){var t;let{environment:n}=e;const o=null===(t=b().default.state.currentSpaceViewStore)||void 0===t?void 0:t.id,i=(0,u().rp)(n).state,r=I().sidebarExpandedStore.state;if(!o||!i)return{is_sidebar_open:r};const{showBookmarksSection:a,showSharedSection:s,showTeamSection:l,showPrivateSection:c}=i;return{is_sidebar_open:r,sidebar_state:{is_bookmark_expanded:re({environment:n,isSectionShown:a,section:"bookmarks",spaceViewId:o}),is_team_expanded:re({environment:n,isSectionShown:l,section:"teamSidebar",spaceViewId:o}),is_shared_expanded:re({environment:n,isSectionShown:s,section:"shared",spaceViewId:o}),is_private_expanded:re({environment:n,isSectionShown:c,section:"private",spaceViewId:o})}}}function se(e){return(0,i().K8)((()=>le(e)),[e])}function le(e){const t=e.isCopyIndicator();return{isCopyIndicator:t,shouldShowAsLoadingSpinner:t&&Boolean(w().transactionQueue.isPendingTransactionForRecord(e.pointer)||S().A.state[e.pointer.id])}}function ce(e){let{newVisibleOrder:t,previousFullOrder:n}=e,o=0;return n.map((e=>{if(t.includes(e)){const e=t[o];return o++,e}return e}))}},645200:(e,t,n)=>{n.d(t,{rW:()=>x,MR:()=>P,AJ:()=>M,lq:()=>y,Op:()=>I,u$:()=>k,i$:()=>w,J7:()=>C,rI:()=>B,cs:()=>T});n(898992),n(354520),n(814603),n(147566),n(198721);var o=()=>n(496603),i=()=>n(498212),r=()=>n(939768),a=()=>n(40970),s=()=>n(449506),l=()=>n(705540),c=()=>n(755636),d=()=>n(751156),u=()=>n(755199),p=()=>n(780054),m=()=>n(989423),g=()=>n(628315),f=()=>n(696746),v=()=>n(508496),h=()=>n(583238),_=()=>n(427704);class b{constructor(e){this.environment=void 0,this.from=void 0,this.baseUrl=void 0,this.userId=void 0,this.spaceId=void 0,this.collectionViewId=void 0,this.notionAnalyticsSessionId=void 0,this.notionDesktopRedirectPageId=void 0;const{environment:t,from:n,baseUrl:o,userId:i,spaceId:r,collectionViewId:a,notionAnalyticsSessionId:s,notionDesktopRedirectPageId:l}=e;this.environment=t,this.from=n,this.baseUrl=o,this.userId=i,this.spaceId=r,this.collectionViewId=a,this.notionAnalyticsSessionId=s,this.notionDesktopRedirectPageId=l}get centralizedAuthUrl(){return`${p().A.domainBaseUrl}${_().JZ.calendarAuth}`}async buildQueryParams(e){const t=await(0,m().TZ)(this.environment);return o().z7({env:"production",from:this.from,notionDeviceId:t,notionAnalyticsSessionId:this.notionAnalyticsSessionId,...e},o().b0)}async buildCsrfToken(){const e=n(206267).JW();return await(0,h().AP)({environment:this.environment,csrf:e}),e}async buildCentralizedAuthStateParams(){const e=new URLSearchParams,t=await(0,m().TZ)(this.environment);return e.set("provider","notion-centralized-auth"),e.set("from",this.from),t&&e.set("notionDeviceId",t),this.spaceId&&e.set("workspaceId",this.spaceId),this.collectionViewId&&e.set("collectionViewId",this.collectionViewId),e.toString()}async build(){if(this.baseUrl){const e=await this.buildQueryParams();return{url:r().Gm({url:this.baseUrl,query:e})}}const e=!this.environment.device.isElectron,t=(0,h().mX)();if(e){const[e,t]=await Promise.all([this.buildCsrfToken(),this.buildCentralizedAuthStateParams()]),n=await this.buildQueryParams({csrf:e,state:t});return{url:r().Gm({url:this.centralizedAuthUrl,query:n})}}if(!this.environment.device.isElectron){const e=t?this.collectionViewId?p().A.calendar.openNotionDatabaseUrl:p().A.calendar.domainBaseUrl:p().A.calendar.notionAuthUrl,o=t?void 0:await this.buildCsrfToken();o&&n(694498).A.setState({isConnectingCalendar:!0});const i=await this.buildQueryParams({csrf:o,user_id:this.userId,workspace_id:this.spaceId,collection_view_id:this.collectionViewId});return{url:r().Gm({url:e,query:i})}}const o="homeSignupClick"===this.from||"meetingNotesSignupClick"===this.from;if(!t&&o){const e=await this.buildCentralizedAuthStateParams(),t=await this.buildQueryParams({state:e,csrf:"",autolink:"false",notionDesktopRedirectPageId:this.notionDesktopRedirectPageId});return{url:r().Gm({url:this.centralizedAuthUrl,query:t}),openExternally:!0}}if(!t)return{url:r().Gm({url:`${p().A.domainBaseUrl}${_().JZ.signup}`,query:{showNotionCalendarModal:"true"}}),openExternally:!0};const i=this.collectionViewId?p().A.calendar.openNotionDatabaseUrl:p().A.calendar.domainBaseUrl,a=await this.buildQueryParams({user_id:this.userId,workspace_id:this.spaceId,collection_view_id:this.collectionViewId});return{url:r().Gm({url:i,query:a})}}}async function y(e){const t=new b(e),{url:n}=await t.build();return n}async function S(e){const t=new b(e),{url:n,openExternally:o}=await t.build();o?c().f({environment:e.environment,url:n}):await C({environment:e.environment,url:n,from:e.from})}async function w(e){const{environment:t,from:n,notionAnalyticsSessionId:o}=e;await S({environment:t,from:n,baseUrl:p().A.calendar.createEventUrl,notionAnalyticsSessionId:o})}async function k(e){const{environment:t,from:n}=e;await S({environment:t,from:n,baseUrl:p().A.calendar.calendarSettingsUrl})}async function I(e){const{environment:t,spaceStore:n,collectionViewStore:o,from:r}=e,a=f().XH("main");await S({environment:t,from:r,userId:null==n?void 0:n.userId,spaceId:null==n?void 0:n.id,collectionViewId:null==o?void 0:o.id,notionDesktopRedirectPageId:a?(0,i().Xw)(a.id):void 0})}async function x(e){const{environment:t,csrf:n,calendarCsrf:i,spaceId:r,integration:l,redirectUri:c,state:d}=e;if(!(await(0,h().QY)({environment:t,csrf:n})))return void A({environment:t,redirectUri:c,query:o().z7({state:d},o().b0)});const u=await s().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:l.id,spaceId:r,redirectUri:c,acceptedIntegrationCapabilities:l.capabilities}});if("failed"===u.type)return void A({environment:t,redirectUri:c,query:o().z7({state:d},o().b0)});await a().nQ(t);const p={code:u.data.code,calendarCsrf:i,state:d};A({environment:t,redirectUri:c,query:o().z7(p,o().b0)})}function A(e){const{environment:t,redirectUri:n,query:o}=e,i=r().Gm({url:n,query:o});c().f({environment:t,url:i,targetSelf:!0})}async function C(e){const{environment:t,url:n,targetSelf:o}=e;if((0,m().vd)(e.environment,"open_notion_calendar",{from:e.from}),!t.device.isElectron)return c().f({environment:t,url:n,targetSelf:o});const{desktopProtocol:i}=p().A.calendar;if(!(await l().isProtocolRegistered(i)))return c().f({environment:t,url:n,targetSelf:o});const r=n.replace(/^https?:/,`${i}:`);l().openExternalUrl(r)}async function T(e){let t,{environment:n,url:o}=e;if(!n.device.isElectron||!v().default.checkGate({gateName:"calendar_home_tile_open_in_zoom_app"}))return!1;try{t=new URL(o)}catch{return!1}const i=t.pathname.split("/").filter(Boolean).pop();if(!i||!i.match(/\d{9,11}/))return!1;const{desktopProtocol:r}=p().A.zoom,a=new URLSearchParams(t.search);a.set("confno",i);const s=`${r}://${t.host}/join?${a.toString()}`;return await l().openExternalUrl(s)}function M(e){g().UW(e,"notion_calendar_launch_promo")}function P(e){const{environment:t,userSettingsStore:n}=e;d().createAndCommit({environment:t,userAction:"NotionCalendarLaunchModal.clickCancel",canUndo:!0,perform:e=>{u().mJ({userSettingsStore:n,transaction:e,data:{notion_calendar_launch_modal_dismissed_at:Date.now(),notion_calendar_launch_modal_phase:"dismissed_modal"}})}})}function B(e,t){const{phase:n,transactionUserAction:o,userSettingsStore:i}=t;d().createAndCommit({environment:e,userAction:o,canUndo:!0,perform:e=>{u().mJ({userSettingsStore:i,transaction:e,data:{notion_calendar_launch_modal_phase:n}})}})}},645302:(e,t,n)=>{n.d(t,{EK:()=>r,Zh:()=>s,bn:()=>l,cf:()=>a,jE:()=>c,pU:()=>d,uO:()=>i,z9:()=>u});var o=()=>n(989423);function i(e,t){o().vd(e,"open_peek_as_page",t)}function r(e,t){o().vd(e,"peek_arrow_navigation",t)}function a(e,t){o().vd(e,"close_side_peek",t)}function s(e,t){o().vd(e,"close_peek",t)}function l(e,t){o().vd(e,"expand_block",t)}function c(e,t){o().vd(e,"open_peek_mode_picker",t)}function d(e,t){o().vd(e,"open_peek_mode_picker",t)}function u(e,t){o().vd(e,"update_peek_mode_format",t)}},646736:(e,t,n)=>{n.d(t,{HI:()=>c,Ts:()=>p,dp:()=>d,sE:()=>u});var o=()=>n(484714),i=()=>n(847249),r=()=>n(296900),a=()=>n(848538),s=()=>n(351360),l=()=>n(630116);function c(e){const t=(0,o().v3)();return(0,i().K8)((()=>{var n;const o=null===(n=t.currentUser)||void 0===n?void 0:n.id;return o?u(e??s().default.state.currentSpaceStore,o):void 0}),[t,e])}function d(e,t){return l().VF.createChildStore(e,a().i1({userId:t,spaceId:e.id}))}function u(e,t){return e?d(e,t):void 0}function p(e,t){return l().bY.createChildStore(e,r().gZ({botId:t,spaceId:e.id}))}},649642:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isDragging:!1}}}const i=new o},650012:(e,t,n)=>{n.d(t,{W:()=>o});n(16280);class o extends Error{constructor(){super("loadPageChunkV2ForOfflineSync failed."),this.name="OfflineSyncLoadPageChunkFailedError"}}},650225:(e,t,n)=>{n.d(t,{l:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("reaction",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.99414 14.0723C7.16602 14.0723 6.38672 13.9141 5.65625 13.5977C4.92578 13.2852 4.28125 12.8496 3.72266 12.291C3.16797 11.7324 2.73242 11.0879 2.41602 10.3574C2.09961 9.62695 1.94141 8.84766 1.94141 8.01953C1.94141 7.19141 2.09961 6.41211 2.41602 5.68164C2.73242 4.95117 3.16797 4.30859 3.72266 3.75391C4.28125 3.19531 4.92383 2.75781 5.65039 2.44141C6.38086 2.125 7.16016 1.9668 7.98828 1.9668C8.82031 1.9668 9.60156 2.125 10.332 2.44141C11.0625 2.75781 11.707 3.19531 12.2656 3.75391C12.8242 4.30859 13.2617 4.95117 13.5781 5.68164C13.8945 6.41211 14.0527 7.19141 14.0527 8.01953C14.0527 8.84766 13.8945 9.62695 13.5781 10.3574C13.2617 11.0879 12.8242 11.7324 12.2656 12.291C11.707 12.8496 11.0625 13.2852 10.332 13.5977C9.60156 13.9141 8.82227 14.0723 7.99414 14.0723ZM7.99414 12.877C8.66992 12.877 9.30078 12.752 9.88672 12.502C10.4727 12.252 10.9883 11.9043 11.4336 11.459C11.8789 11.0137 12.2266 10.498 12.4766 9.91211C12.7266 9.32617 12.8516 8.69531 12.8516 8.01953C12.8516 7.34766 12.7266 6.71875 12.4766 6.13281C12.2266 5.54297 11.8789 5.02539 11.4336 4.58008C10.9883 4.13477 10.4707 3.78711 9.88086 3.53711C9.29492 3.28711 8.66406 3.16211 7.98828 3.16211C7.31641 3.16211 6.68555 3.28711 6.0957 3.53711C5.50977 3.78711 4.99609 4.13477 4.55469 4.58008C4.11328 5.02539 3.76758 5.54297 3.51758 6.13281C3.26758 6.71875 3.14258 7.34766 3.14258 8.01953C3.14258 8.69531 3.26758 9.32617 3.51758 9.91211C3.76758 10.498 4.11328 11.0137 4.55469 11.459C5 11.9043 5.51562 12.252 6.10156 12.502C6.69141 12.752 7.32227 12.877 7.99414 12.877ZM7.98828 10.9023C7.58203 10.9023 7.22266 10.8301 6.91016 10.6855C6.60156 10.5371 6.36133 10.3672 6.18945 10.1758C6.02148 9.98438 5.9375 9.82422 5.9375 9.69531C5.9375 9.625 5.96484 9.57617 6.01953 9.54883C6.07812 9.51758 6.14062 9.51758 6.20703 9.54883C6.42188 9.66211 6.66602 9.77148 6.93945 9.87695C7.21289 9.98242 7.5625 10.0352 7.98828 10.0352C8.41406 10.0352 8.76367 9.98242 9.03711 9.87695C9.31445 9.77148 9.55859 9.66211 9.76953 9.54883C9.83594 9.51758 9.89844 9.51758 9.95703 9.54883C10.0156 9.57617 10.0449 9.625 10.0449 9.69531C10.0449 9.82422 9.95898 9.98438 9.78711 10.1758C9.61523 10.3672 9.375 10.5371 9.06641 10.6855C8.75781 10.8301 8.39844 10.9023 7.98828 10.9023ZM6.25977 7.49219C6.07617 7.49219 5.91602 7.41797 5.7793 7.26953C5.64648 7.12109 5.58008 6.92969 5.58008 6.69531C5.58008 6.46484 5.64648 6.27539 5.7793 6.12695C5.91602 5.97461 6.07617 5.89844 6.25977 5.89844C6.44336 5.89844 6.60547 5.97461 6.74609 6.12695C6.88672 6.27539 6.95703 6.46484 6.95703 6.69531C6.95703 6.92969 6.88672 7.12109 6.74609 7.26953C6.60547 7.41797 6.44336 7.49219 6.25977 7.49219ZM9.7168 7.49219C9.5332 7.49219 9.37305 7.41797 9.23633 7.26953C9.10352 7.12109 9.03711 6.92969 9.03711 6.69531C9.03711 6.46484 9.10352 6.27539 9.23633 6.12695C9.37305 5.97461 9.5332 5.89844 9.7168 5.89844C9.90039 5.89844 10.0625 5.97461 10.2031 6.12695C10.3438 6.27539 10.4141 6.46484 10.4141 6.69531C10.4141 6.92969 10.3438 7.12109 10.2031 7.26953C10.0625 7.41797 9.90039 7.49219 9.7168 7.49219Z"})})},650829:(e,t,n)=>{n.r(t),n.d(t,{LazyAssistantCollectionSearchInputButton:()=>f,LazyAssistantCollectionViewButton:()=>m,LazyAssistantFullPageChat:()=>r,LazyAssistantMenuPopup:()=>s,LazyAssistantOriginElement:()=>a,LazyAssistantScopedSearchMenuPopup:()=>d,LazyAssistantShareModal:()=>p,LazyAssistantUnfurlingMenuWithAiSection:()=>g,LazyJiraAIAnnouncementSidebarReminder:()=>v,LazyMobileAssistantPendingOperationsCollapsedElement:()=>c,LazyReportBadQnAForm:()=>u,LazySearchAssistantPane:()=>l,assistantDependency:()=>i});var o=()=>n(645873);const i=new(o().O2)("assistant",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(5053)]).then(n.bind(n,801569)))),r=(0,o()._h)(i,(e=>e.AssistantFullPageChat)),a=(0,o()._h)(i,(e=>e.AssistantOriginElement)),s=(0,o()._h)(i,(e=>e.AssistantMenuPopup)),l=(0,o()._h)(i,(e=>e.SearchAssistantPane)),c=(0,o()._h)(i,(e=>e.MobileAssistantPendingOperationsCollapsedElement)),d=(0,o()._h)(i,(e=>e.AssistantScopedSearchMenuPopup)),u=(0,o()._h)(i,(e=>e.ReportBadQnAForm)),p=(0,o()._h)(i,(e=>e.AssistantShareModal)),m=(0,o()._h)(i,(e=>e.AssistantCollectionViewButton)),g=(0,o()._h)(i,(e=>e.AssistantUnfurlingMenuWithAiSection)),f=(0,o()._h)(i,(e=>e.AssistantCollectionSearchInputButton)),v=(0,o()._h)(i,(e=>e.JiraAIAnnouncementSidebarReminder))},652617:(e,t,n)=>{n.d(t,{e:()=>o});const o=(0,n(296540).createContext)(void 0);o.displayName="DismissContext"},653609:(e,t,n)=>{n.d(t,{W:()=>i});var o=()=>n(534177);function i(e){const t=e.getType();if(!t)return[];const n=e.getRenderableContentStores();if(n.length>0)return n;switch(t){case"transclusion_reference":const n=e.getTransclusionReferenceTargetStore();return n?[n]:[];case"text":case"encrypted_text":case"page":case"personal_home_page":case"bulleted_list":case"numbered_list":case"toggle":case"quote":case"factory":case"button":case"to_do":case"column_list":case"column":case"embed":case"framer":case"tweet":case"gist":case"drive":case"audio":case"maps":case"invision":case"mixpanel":case"image":case"video":case"file":case"bookmark":case"equation":case"code":case"header":case"sub_header":case"sub_sub_header":case"collection_view":case"collection_view_page":case"breadcrumb":case"copy_indicator":case"divider":case"link_to_page":case"link_to_collection":case"figma":case"loom":case"typeform":case"codepen":case"pdf":case"callout":case"table_of_contents":case"whimsical":case"miro":case"abstract":case"sketch":case"excalidraw":case"replit":case"alias":case"transclusion_container":case"external_object_instance":case"table":case"table_row":case"tab":case"external_object_instance_page":case"hex":case"deepnote":case"ai_block":case"drawing":case"slide":case"form":case"post":case"workflow":case"transcription":case"person_profile":return[];default:(0,o().HB)(t)}}},654056:(e,t,n)=>{n.d(t,{As:()=>g,J8:()=>y,TR:()=>h,kl:()=>_,lb:()=>S,nK:()=>f,yj:()=>v});n(296540);var o=()=>n(764781),i=()=>n(394893),r=()=>n(89924),a=()=>n(855801),s=()=>n(878377),l=()=>n(972435),c=()=>n(351360),d=()=>n(227440),u=()=>n(611371),p=()=>n(416726),m=n(474848);const g=(0,p().Fw)({key:"duplicate",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:o().V,validators:[s().ecY,s().AU6(s().xqI),s().AU6(s().p9k),s().AU6(s().PfK),s().or([s().Cuf,s().AU6(s().vEP)]),s().or([s().AU6(s().an_),s().Afv]),s().AU6(s().r9z),...p().uo],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,n)=>{let{blocks:o,environment:i}=t;const r=await a().VI.selectableBlockActions.load();await r.duplicateBlocksWithMaybeConfirmation({environment:i,blocks:o,event:n,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),f=(0,p().uk)({key:"duplicateCollection",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:o().V,width:275,validators:[s().ecY,s().AU6(s().xqI),s().AU6(s().p9k),s().or([s().Cuf,s().AU6(s().vEP)]),s().Uo6([s().an_,s().AU6(s().Afv)]),s().AU6(s().Qp$),...p().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(r().A,{...e}),actions:v.actions}]}),v=(0,p().gy)({key:"duplicate collection actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(r().A,{...e}),actions:[(0,p().Fw)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().AU6(s().PfK),s().AU6(s().Pnk)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,n)=>{let{blocks:o,environment:i}=t;const r=await a().VI.selectableBlockActions.load();await r.duplicateBlocksWithMaybeConfirmation({environment:i,blocks:o,duplicateOnlyCollectionSchema:!1,event:n,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Fw)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().AU6(s().Pnk)],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:async(e,t,n)=>{let{blocks:o,environment:i}=t;const r=await a().VI.selectableBlockActions.load();await r.duplicateBlocksWithMaybeConfirmation({environment:i,blocks:o,duplicateOnlyCollectionSchema:!0,event:n,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]}),h=(0,p().Fw)({key:"duplicate",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:o().V,validators:[s().vXb,s().MIU,s().or([s().AU6(s().omD),s().UC4]),s().or([s().AU6(s().an_),s().Afv]),...p().uo,s().AU6(s().oy3)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,n)=>{let{blocks:o,environment:i}=t;k(o,i,{event:n,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),_=(0,p().uk)({key:"duplicateCollection",displayName:p().AY.duplicateName,analyticsName:p().AY.duplicateName.defaultMessage,svg:o().V,width:275,validators:[s().vXb,s().MIU,s().AU6(s().Qp$),s().Uo6([s().an_,s().AU6(s().Afv)]),...p().uo],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(r().A,{...e}),actions:b.actions}]}),b=(0,p().gy)({key:"duplicate collection actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(r().A,{...e}),actions:[(0,p().Fw)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[s().AU6(s().Pnk)],shortcuts:["duplicate"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,n)=>{let{blocks:o,environment:i}=t;k(o,i,{duplicateOnlyCollectionSchema:!1,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Fw)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[s().AU6(s().Pnk)],shortcuts:["duplicateSchema"],closeParentMenu:!0,track:{actionName:"duplicate"},action:(e,t,n)=>{let{blocks:o,environment:i}=t;k(o,i,{duplicateOnlyCollectionSchema:!0,callback:e})},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]}),y=(0,p().Ls)({key:"duplicate into private",displayName:p().AY.duplicateToPrivateName,analyticsName:p().AY.duplicateToPrivateName.defaultMessage,svg:o().V,validators:[s().AU6(s().xqI),s()._fc,s().p2L,s().AU6(s().PaP),s().or([s().p9k,s().AU6(s().MIU),s().Wj2]),s().or([s().AU6(s().an_),s().Afv]),s().AU6(s().oy3)],closeParentMenu:!0,action:async(e,t)=>{let{blocks:n,environment:o}=e;await I(n,o,void 0,t)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),S=(0,p().uk)({key:"duplicate collection to private",displayName:p().AY.duplicateToPrivateName,analyticsName:p().AY.duplicateToPrivateName.defaultMessage,svg:o().V,width:275,validators:[s().AU6(s().xqI),s()._fc,s().p2L,s().AU6(s().PaP),s().or([s().p9k,s().AU6(s().MIU),s().Wj2]),s().Uo6([s().an_,s().AU6(s().Afv)]),s().AU6(s().oy3)],subActions:()=>[{key:"collection duplication options",render:e=>(0,m.jsx)(r().A,{...e}),actions:w.actions}]}),w=(0,p().gy)({key:"duplicate collection to private actions",title:p().AY.duplicateName,render:e=>(0,m.jsx)(r().A,{...e}),actions:[(0,p().Ls)({key:"duplicate with data",displayName:p().AY.duplicateCollectionWithDataName,analyticsName:"duplicate_with_data",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;await I(t,n,!1)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online}),(0,p().Ls)({key:"duplicate schema only",displayName:p().AY.duplicateCollectionSchemaOnlyName,analyticsName:"duplicate_schema_only",validators:[],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;await I(t,n,!0)},disabled:()=>!d().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>d().A.state.online})]});function k(e,t,n){if(!(0,u().EF)(t))return;const o=e[0].getParentStore();if("block"!==(null==o?void 0:o.table)&&"team"!==(null==o?void 0:o.table)&&"space"!==(null==o?void 0:o.table))return;const{callback:r,duplicateOnlyCollectionSchema:a,event:s}=n??{};i().hh({environment:t,store:e[0],newParentStore:o,duplicateOnlyCollectionSchema:a,event:s,callback:r})}async function I(e,t,o,r){if(!(0,u().EF)(t))return;const a=e[0],s=c().default.state.currentSpaceStore,l=c().default.state.currentSpaceViewStore;s&&l&&await i().w7({environment:t,store:a,spaceStore:s,spaceViewStore:l,isPrivate:!0,context:"duplicate_to_private_space",duplicateOnlyCollectionSchema:o,useCrdt:(0,n(518736).D8)(s)})}},654062:(e,t,n)=>{n.d(t,{F:()=>i});var o=()=>n(246826);function i(e){const{collectionViewStore:t,update:n,transaction:i}=e;o().zv({store:t,data:n,transaction:i})}},654534:(e,t,n)=>{n.d(t,{Sj:()=>i,n0:()=>r,vY:()=>s,xc:()=>a});var o=()=>n(508496);const i=5;function r(e){return"on"===o().default.getEligibleGroup({experimentId:"parallel_confluence_importer_via_api",defaultGroup:"control"})}function a(e){return o().default.getEligibleGroup({experimentId:"special_case_confluence_file_size",defaultGroup:i.toString()})}function s(e){return"on"===o().default.getEligibleGroup({experimentId:"migrate_confluence_into_teamspace",defaultGroup:"control"})}},654601:(e,t,n)=>{n.d(t,{X:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("sparkles",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.2757 4.82358C7.57934 4.71847 7.57934 4.53161 7.2757 4.41483L5.62905 3.78419C5.33709 3.67908 4.99842 3.3404 4.88164 3.03676L4.25101 1.39009C4.1459 1.08644 3.95905 1.08644 3.84226 1.39009L3.21163 3.03676C3.10653 3.32872 2.76786 3.6674 2.46422 3.78419L0.817572 4.41483C0.513934 4.51994 0.513934 4.70679 0.817572 4.82358L2.46422 5.45422C2.75618 5.55933 3.09485 5.898 3.21163 6.20165L3.84226 7.84832C3.94737 8.15196 4.13422 8.15196 4.25101 7.84832L4.88164 6.20165C4.98674 5.90968 5.32541 5.571 5.62905 5.45422L7.2757 4.82358ZM15.2991 10.5929C16.2334 10.3593 16.2334 9.9739 15.2991 9.74032L13.2321 9.22647C12.2978 8.9929 11.3402 8.03526 11.1066 7.10097L10.5928 5.03387C10.3592 4.09959 9.97382 4.09959 9.74025 5.03387L9.2264 7.10097C8.99283 8.03526 8.03521 8.9929 7.10094 9.22647L5.03387 9.74032C4.09961 9.9739 4.09961 10.3593 5.03387 10.5929L7.10094 11.1067C8.03521 11.3403 8.99283 12.2979 9.2264 13.2322L9.74025 15.2993C9.97382 16.2336 10.3592 16.2336 10.5928 15.2993L11.1066 13.2322C11.3402 12.2979 12.2978 11.3403 13.2321 11.1067L15.2991 10.5929Z"})})},656219:(e,t,n)=>{n.d(t,{A:()=>a,u:()=>i});const o=new(n(178624).R)({key:"property_groups_module_state",namespace:n(419494).Bq,important:!0,trackingType:"necessary"});function i(){return{propertyGroupOpenOverridesMap:{},...o.getState()}}class r extends(()=>n(757695))().default{setState(e){super.setState(e),o.setState(e)}setPropertyGroupExpandedOverride(e){var t;const{groupId:n,override:o}=e;this.setState({...this.state,propertyGroupOpenOverridesMap:{...null==this||null===(t=this.state)||void 0===t?void 0:t.propertyGroupOpenOverridesMap,[n]:o}})}getPropertyGroupExpandedOverride(e){var t;const{groupId:n}=e;return null==this||null===(t=this.state)||void 0===t||null===(t=t.propertyGroupOpenOverridesMap)||void 0===t?void 0:t[n]}isPropertyGroupExpanded(e){const{groupId:t}=e,n=this.getPropertyGroupExpandedOverride({groupId:t});return void 0===n||"open"===n}togglePropertyGroupExpanded(e){const{groupId:t}=e,n=this.isPropertyGroupExpanded({groupId:t})?"closed":"open";this.setPropertyGroupExpandedOverride({groupId:t,override:n})}}const a=new r},656432:(e,t,n)=>{n.d(t,{K:()=>a});n(581454);var o=()=>n(700500),i=()=>n(44729),r=()=>n(246826);function a(e){const{environment:t,stores:n,spaceId:a,transaction:s}=e;return n.map((e=>{const n=e.getType();if(n&&(o().Ib[n]||n===o().xd.file||n===o().xd.externalObjectInstance)){const n=r().Wv({environment:t,type:"page",inMemoryRecordCache:e.inMemoryRecordCache,transaction:s,spaceId:a});return i().NI({parentStore:n,childStore:e,transaction:s}),n}return e}))}},657202:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(296540),i=()=>n(484714),r=()=>n(522419),a=()=>n(518646),s=()=>n(948914),l=()=>n(589994),c=()=>n(251126),d=n(474848);function u(e){const t=(0,i().v3)(),n=(0,o.useCallback)((async e=>r()._J(e.url)?(e.permissionRecord&&await l().transactionQueue.awaitRecordTransaction(e.permissionRecord),(0,a().k)(t,e,Boolean(s().A.state.isNotionProtocolBugFixed))):e.url),[t]);return(0,d.jsx)(c().A,{request:{url:e.url,permissionRecord:e.permissionRecord,useS3Url:e.useS3Url},performRequest:n,render:e.render})}},658883:(e,t,n)=>{function o(){return!1}function i(e){return"quickSearch"===e.RouterStore.state.route.name}n.d(t,{Y:()=>o,q:()=>i})},659026:(e,t,n)=>{n.d(t,{Nh:()=>o,bZ:()=>i,zg:()=>r});function o(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i(e,t){return{x:e.x+t.x,y:e.y+t.y}}function r(){return{x:0,y:0}}(0,n(604341).exposeDebugValue)("Point",{pointMinus:o,pointPlus:i,pointZero:r})},659602:(e,t,n)=>{n.d(t,{g:()=>o});const o=new(n(645873).O2)("markdown-linkify-it",(async()=>{const[e,t]=await Promise.all([n.e(37353).then(n.t.bind(n,542922,23)),n.e(37353).then(n.t.bind(n,42833,23))]);return{MarkdownIt:e.default,LinkifyIt:t.default}}))},661179:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue(0)},661491:(e,t,n)=>{n.d(t,{kv:()=>c,l2:()=>l,qO:()=>s});var o=()=>n(644914),i=()=>n(712505),r=()=>n(478726),a=()=>n(747100);function s(e){let t=e;for(;t&&(!t||!t.isNavigableBlock());){if("column"===t.getType())return!0;t=t.getParentBlockStore()}return!1}function l(e,t){const{device:n}=t;if(n.isPhone)return!1;if((0,a().cq)(e)){if((0,r().mb)(e))return(0,o().Ql)(t)>i().SIDEPEEK_NO_COLUMN_WIDTH;if(i().default.isCenterPeekOpen())return(0,a().rc)(t)>i().SIDEPEEK_NO_COLUMN_WIDTH}return!0}function c(e,t){var n;return!t.device.isMobile&&(e.isType("column_list")&&e.isChildOfRecordStoreUIRoot()&&l(e,t)&&!(null!==(n=e.getParentBlockStore())&&void 0!==n&&n.isFullWidth())&&!(0,a().cq)(e))}},661920:(e,t,n)=>{n.d(t,{Cx:()=>R,DN:()=>P,Ey:()=>L,VN:()=>D,YH:()=>N,ho:()=>M,nJ:()=>B});n(944114);var o=()=>n(584262),i=()=>n(172385),r=()=>n(868840),a=()=>n(120739),s=()=>n(427704),l=()=>n(421107),c=()=>n(193513),d=()=>n(186445),u=()=>n(492414),p=()=>n(770906),m=()=>n(441199),g=()=>n(869562),f=()=>n(749687),v=()=>n(351360),h=()=>n(732770),_=()=>n(712505),b=()=>n(871399),y=()=>n(502438),S=()=>n(24157),w=()=>n(645302),k=()=>n(741496),I=()=>n(722101),x=()=>n(5705),A=()=>n(435009),C=()=>n(751156),T=()=>n(345913);function M(e,t){const{mode:n}=t,o=e.WindowSizeStore.state.width,i=_().default.state.preferredSidePeekWidth||o/2;_().default.update((e=>({...e,open:!0,preferredSidePeekWidth:Math.min(i,o*(2/3)),isOpening:!e.open,isClosing:!1,...t}))),n===r().A&&g().toggleLeftSidebarByWindowSize(e),m().default.isVisible()&&p().VI({environment:e,autoClose:!0})}function P(e){const{resultsStore:t,collectionContextStore:n,pageVisitSource:o}=e;null==n||n.searchOpenStore.setState(!1),_().default.setState({..._().default.state,resultsStore:t,collectionContextStore:n,pageVisitSource:o})}function B(e){(_().default.isSidePeekOpen()||_().default.isCenterPeekOpen())&&E(e)}function R(e){_().default.isSidePeekOpen()&&E(e)}function E(e){d().RR.state&&!h().A.state.isKeyboardMode||b().default.state.isOpen&&b().default.state.menuIsOpen||y().default.isSelected()||S().default.hasSelection()||D({environment:e,from:"empty_space_click"})}function D(e){let{environment:t,from:n,preventAnimation:r=!1,pageSource:c}=e;const d=_().default.state;if(!d.open||d.isClosing)return;_().default.isSidePeekOpen()&&!r&&_().default.setState({...d,isClosing:!0});const{mode:p,targetStore:m,showMoveTo:g,collectionContextStore:h,savedSelectionStoreState:b,savedTableSelectionStoreState:S,savedSidebarExpandedStoreState:M}=d;let P;m.canEdit()&&(P=function(e){const{environment:t,blockStore:n,showMoveTo:o}=e,i=n.getContentStores(),r=1===i.length?i[0]:void 0,a=r&&r.isEmptyEditableBlock()&&"ai_block"!==r.getType(),s=o&&n.isEmptyTitle()&&(n.isEmptyPage()||a);return!(!s&&!a)&&(C().createAndCommit({userAction:"PeekRenderer.close",environment:t,canUndo:!0,perform:e=>{s?(T().oD({environment:t,blocks:[n],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,k().N)(t,{analyticsName:"delete",from:"peek_actions",block_id:n.id,block_type:"page"})}))):a&&I().TF({parentStore:n.getContentStore(),childToRemoveStore:r,transaction:e})}}),s||!1)}({environment:t,blockStore:m,showMoveTo:g})),n&&"side_peek"===p&&w().cf(t,{from:n}),w().Zh(t,{peek_mode:p,from:n,target_page_id:m.id,target_parent_id:m.getParentId(),page_source:c,should_delete:P}),x().If(t,p),x().b$(t),x().aD(t),y().default.setState({...y().default.state,...b}),S.isActive&&l().A.setState(S),M&&f().sidebarExpandedStore.setState(!0);const{mainEditorCurrentBlockStore:B}=v().default.state,R=t.RouterStore.state.route;if(null!=h&&h.searchQueryStore.state&&(null==h||h.searchOpenStore.setState(!0)),B&&"page"===R.name){const e=(0,u().Ay)({store:B,fullyQualified:!1,scrollToBlockId:R.scrollToBlockId,collectionViewId:R.collectionViewId,discussionId:R.discussionId,showMoveTo:R.showMoveTo,saveParent:R.saveParent,pageVisitSource:o().y8.PeekClose});A().oo({environment:t,url:e})}else if("chat"===R.name){const e=(0,i().X_)({...R,peekMode:void 0,peekViewBlockId:void 0});A().oo({environment:t,url:e})}else"team"===R.name?A().oo({environment:t,url:(0,a().a)({teamId:R.teamId})}):"marketplace"===R.name&&A().oo({environment:t,url:s().JZ.marketplace})}function N(){const e=_().default.state;e.open&&!e.isClosing&&_().default.setState({...e,open:!1,resultsStore:void 0,collectionContextStore:void 0,topHoverAreaEntered:!1})}function L(e){const{collectionContextStore:t,resultsStore:n}=e;(0,c().r)(t)||P({collectionContextStore:t,resultsStore:n,pageVisitSource:void 0})}},662453:(e,t,n)=>{n.d(t,{G0:()=>c,H7:()=>r,X9:()=>a,ZT:()=>s,aiDependency:()=>i,eE:()=>l});var o=()=>n(645873);const i=new(o().O2)("ai",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(5053)]).then(n.bind(n,954191)))),r=(0,o()._h)(i,(e=>e.CompletionPopup)),a=(0,o()._h)(i,(e=>e.PopupPositionerLocater)),s=(0,o()._h)(i,(e=>e.AiEligibilityUpdater)),l=(0,o()._h)(i,(e=>e.SpaceForAiOnboardingTooltip)),c=(0,o()._h)(i,(e=>e.GtmFavoriteButtons))},662971:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),i=()=>n(962730),r=()=>n(377586);const a=function(){const[e,t]=o.useState({x:0,y:0});return o.useEffect((()=>{const e=e=>{t({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}}),[]),e};var s=n(474848);function l(e){let{x:t,mouseX:n}=e;return n>t?void 0:-Math.max(t-n,10)+"px"}function c(e){let{x:t,width:n,mouseX:o}=e;return o>t?-Math.max(o-(t+n),10)+"px":void 0}function d(e){let{x:t,width:n,mouseX:o}=e;return o>t?`${Math.max(o-(t+n),10)}px`:`${Math.max(t-o,10)}px`}function u(e){let{x:t,y:n,height:o,mouseX:i,mouseY:r}=e;return i>t?`polygon(0% 0%, 0% 100%, 100% ${100*(r-n)/o}%)`:`polygon(100% 0%, 0% ${100*(r-n)/o}%, 100% 100%)`}function p(e){const{x:t=0,y:n=0,height:i=0,width:r=0}=e.el.getBoundingClientRect()||{},{x:p,y:m}=a(),g={x:t,y:n,height:i,width:r,mouseX:p,mouseY:m},f=(0,o.useRef)(null),v=o.useCallback((e=>{if(f.current){f.current.style.pointerEvents="none";const t=document.elementFromPoint(e.clientX,e.clientY);if(f.current.style.pointerEvents="auto",t){const n=new MouseEvent(e.nativeEvent.type,e.nativeEvent);t.dispatchEvent(n)}}}),[]),h={right:c(g),left:l(g),height:i,width:d(g),clipPath:u(g)};return(0,s.jsx)("div",{ref:f,onClick:v,style:{cursor:"pointer",position:"absolute",pointerEvents:"auto",top:0,...h}})}function m(e,t){let{onClick:a,renderOrigin:l,renderExtension:c,allowOptionalExtensionMenu:d,...u}=e;const{disableDefaultClick:m,onFocus:g,focused:f,openOnFocus:v,placementToOrigin:h,alignmentToOrigin:_,disableCloseOnEnter:b}=u,{isMobile:y}=(0,n(484714).Y0)(),S=(0,n(722872).Tf)(),[w,k]=(0,o.useState)(!1),I=(0,o.useRef)(null),x=(0,o.useRef)(null),A=(0,o.useRef)(null),C=(0,o.useRef)(null),T=(0,o.useCallback)((()=>{A.current&&window.clearTimeout(A.current),C.current&&window.clearTimeout(C.current),A.current=null,C.current=null}),[]),M=(0,o.useCallback)((()=>{T(),w||k(!0)}),[w,T]),P=(0,o.useCallback)((()=>{T(),w&&k(!1)}),[w,T]),B=(0,o.useCallback)((e=>{T(),w||(e&&e.preventDefault&&e.preventDefault(),A.current=window.setTimeout(M,120))}),[w,T,M]),R=(0,o.useCallback)((()=>{T(),w&&(C.current=window.setTimeout(P,100))}),[w,P,T]),E=(0,o.useCallback)((e=>{g(),M(),d&&(null==a||a(e),P())}),[g,M,d,a,P]),D=(0,o.useCallback)((()=>{B()}),[B]),N=(0,o.useCallback)((()=>{g(),B()}),[g,B]),L=(0,o.useCallback)((e=>{if(y)return;const t=I.current;w&&t&&!t.contains(e.target)&&P()}),[w,P,y]),O=(0,o.useCallback)((e=>{13===e.keyCode&&w&&!b&&P()}),[w,P,b]);(0,o.useEffect)((()=>{if(!Boolean(m))return window.addEventListener("click",L),()=>{window.removeEventListener("click",L)}}),[m,L]),(0,o.useEffect)((()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)})),[O]);const U=(0,o.useRef)(f);(0,o.useEffect)((()=>{v&&!U.current&&f?B():!f&&U.current&&R(),U.current=f}),[f,v,B,R]);const F=(0,n(401497).IS)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash}})),[]),V={...(0,n(553965).A)({onMouseEnter:D,onClick:E},u),showExtensionArrow:!0};return(0,s.jsx)(n(545805).A,{debugName:"ExtensionMenuItem",capture:f,onEnter:w?void 0:B,onRight:B,onLeft:w?R:void 0,onEsc:w?R:void 0,children:(0,s.jsx)(n(897119).Ay,{popupType:y?S?r().n.BottomSheet:r().n.SlideUp:r().n.Popup,open:w,origin:l(V,t),placementToOrigin:h??i().W.Right,alignmentToOrigin:_??i().C.Center,originGap:0,disableMouseCapture:!0,preventBlockRenderQueueOnEnter:!0,preventScaleTransition:!y,preventCaptureEsc:!0,ref:I,render:()=>(0,s.jsxs)(s.Fragment,{children:[!y&&x.current?(0,s.jsx)(p,{el:x.current}):null,(0,s.jsx)("div",{ref:x,style:{height:"100%"},children:c({onMouseEnter:N},{close:R})})]}),style:{overflow:"visible",...y&&F.mobilePopupStyle},trapFocus:!0,onDismiss:P})})}const g=o.forwardRef(m)},663038:(e,t,n)=>{function o(e){const{unicode:t,fallback:n}=e;try{return t()}catch(o){return n}}n.d(t,{D$:()=>a,F:()=>o,Yv:()=>s});const i=o({unicode:()=>/\p{L}/u,fallback:/[a-zA-Z]/}),r=o({unicode:()=>/\p{Z}/u,fallback:/\s/});function a(e){return i.test(e)}function s(e){return r.test(e)}},663173:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isLoading:!1,progressPercent:0}}}const i=o},663325:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(757695).default.createValue(void 0,{name:"TeamHighlightStore"})},663590:(e,t,n)=>{n.d(t,{FI:()=>r,hK:()=>a,sh:()=>i});var o=()=>n(508496);function i(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===o().default.getEligibleGroup({experimentId:"share_menu_searchable_toggle",defaultGroup:"control",disableExposureLogging:t})}function r(e){const t=(null==e?void 0:e.disableLogging)??!1;return"on"===o().default.getEligibleGroup({experimentId:"share_menu_cleanup_experiment_v2",defaultGroup:"control",disableExposureLogging:t})}function a(){return o().default.checkGate({gateName:"share_menu_cleanup_ga"})}},664133:(e,t,n)=>{n.d(t,{i5:()=>B,jh:()=>E,ol:()=>P,zo:()=>R});n(898992),n(672577),n(803949);var o=()=>n(66689),i=()=>n(148307),r=()=>n(651124),a=()=>n(857639),s=()=>n(919709),l=()=>n(959013),c=()=>n(496603),d=()=>n(559926),u=()=>n(901389),p=()=>n(313892),m=()=>n(601734),g=()=>n(989423),f=()=>n(974233),v=()=>n(866042),h=()=>n(972435),_=()=>n(640653),b=()=>n(37433),y=()=>n(351360),S=()=>n(666803),w=()=>n(630116),k=()=>n(404141),I=()=>n(449506),x=()=>n(496414),A=()=>n(246826),C=()=>n(751156),T=()=>n(633457);const M=(0,l().YK)({JiraAuthenticationInvalidDetails:{id:"jiraImport.invalidDetails",defaultMessage:"Invalid Details"},TasksCollectionName:{defaultMessage:"Issues",id:"appTemplates.tasks.issuesDatabaseName"}});async function P(e){const{environment:t,userEmail:n,spaceId:o,flowId:i,instance:r,authInfo:s}=e;(0,g().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_initiated",flowId:i}}});try{var d;const a=e.site.replace(/\/+$/,"");if(!t.currentUser.id)return u().rG({message:h().A.formatMessage(M.JiraAuthenticationInvalidDetails)}),void x().V();let m;if("Basic"===s.authType&&"instance"in s&&"DataCenter"===s.instance)m=await I().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:n,site:a,userId:t.currentUser.id,spaceId:o,instance:r,username:s.username,password:s.password,authType:s.authType}});else{if(!("apiKey"in s))return;m=await I().callApi({eventName:"authenticateJiraUser",environment:t,data:{userEmail:n,site:a,apiKey:s.apiKey,userId:t.currentUser.id,spaceId:o,instance:r}})}if(await T().oX({environment:t}),(0,g().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:i,status:"success"===m.type&&null!==(d=m)&&void 0!==d&&null!==(d=d.data)&&void 0!==d&&d.isAdmin?"success":"failed"}}}),"failed"===m.type){const e=(0,f().V)(m);console.error(m.error);const t=S().Ay.getInitialState();S().Ay.setState(t);const n=(0,l().YK)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});u().ui({message:e,showCancel:!1,keepFocus:!1,items:[{label:h().A.formatMessage(n.dismissButtonLabel),onAccept:c().D_}]})}else{var p;if(null!==(p=m)&&void 0!==p&&null!==(p=p.data)&&void 0!==p&&p.isAdmin){S().Ay.setState({...S().Ay.state,type:"teamspace-selection",open:!0,flowId:i,site:a,botId:m.data.botId}),(0,g().u4)({environment:t,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:i}}});const e=k().A.getInitialState();k().A.setState(e)}else S().Ay.setState({...S().Ay.state,type:"auth",open:!0,adminTokenError:!0,flowId:i,site:void 0}),(0,g().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:i}}})}x().V()}catch(m){(0,g().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_status",flowId:i,status:"failed"}}}),a().log({level:"error",from:"jiraActions",type:"authenticateWithJira",data:{message:"Failed to authenticate with Jira",miscDataToConvertToString:{err:m}}})}}async function B(e){let{environment:t,selectedTeamspaceId:n,siteUrl:l,botId:c,instanceType:u}=e;try{const{appTemplatesSetupActions:e,appConfigs:a}=await m().Aw.load(),{currentSpaceStore:g,currentSpaceViewStore:f,currentUserStore:v}=y().default.getState(),_=null==v?void 0:v.id;if(!_||!g)return;let S=g;if(n){const e=await(0,b().getTeamsWithAggregateData)({fromCache:!0,environment:t,spaceStore:g,currentUserId:_,includeArchived:!1});if(!e)return;const{teams:o}=e,i=o.find((e=>e.id===n));if(!i)return;S=i}if(!f||!S)return;const{serverCommitResult:k,performResult:I}=C().createAndCommit({environment:t,perform:n=>{var i;const r=o().tP,s=null===(i=(0,p().BL)(a(),r))||void 0===i?void 0:i.uri;if(!s)return;const l=a().find((e=>e.uri===s));if(null==l?void 0:l.presets.find((e=>e.uri===r))){return e.initializeApp({environment:t,spaceViewStore:f,appParentStore:S,appUri:s,presetUri:r,transaction:n,from:"jira_import"})}return[]},canUndo:!0,userAction:"importActions.importJira"}),x=t.defaultRecordCache.inMemoryRecordCache;await k,null==I||I.forEach((e=>{const n=e.getFormat(),a=null==n?void 0:n.collection_pointer;if(a){const e=x.getRecord({pointer:a,userId:t.currentUser.id});e&&e.value&&C().createAndCommit({userAction:"jiraActions.updateFormatForCollections",environment:t,canUndo:!0,perform:n=>{const d=e.value,p=null==d?void 0:d.format;if(p){p.external_collection_type=r().uO.Jira,p.synced_collection_external_url=l,p.synced_collection_instance_type=u,p.bot_id=c,d.icon=p.app_config_uri===o().dC?i().A.images.appPackages.jiraTaskIconSvg:i().A.images.appPackages.jiraProjectIconSvg;const e=new(w().md)(t,a);p.app_config_uri===o().dC&&(d.name=(0,s().x9d)(h().A.formatMessage(M.TasksCollectionName))),A().zv({store:e,data:d,transaction:n})}}})}}));const T=null==I?void 0:I.find((e=>{var t;return(null===(t=e.getFormat())||void 0===t?void 0:t.app_config_uri)===o().bq}));return d().eH(t,{import_source:"jira",from:"modal"}),T}catch(g){return void a().log({level:"error",from:"jiraActions",type:"projectPageNotCreated",data:{message:"Error while creating project page for Jira sync",miscDataToConvertToString:{error:g}}})}}function R(e){const t=S().Ay.state.spaceId;if(e.spaceId!==t){const t=S().Ay.getInitialState();t.spaceId=e.spaceId,S().Ay.setState(t)}}async function E(e){var t;const{environment:n,from:o,action:i}=e,{currentSpaceStore:r,currentUserSettingsStore:s}=y().default.state;if(!r)return;const l=S().Ay.getFlowId(),c=(0,_().p4)(r);if(!(void 0!==(null==s||null===(t=s.getSettings())||void 0===t?void 0:t.jira_sync_guide_dismissed_at))&&c)return void("collection_header"===o||"improve_jira_sync_popup"===o?(S().Ay.setState({...S().Ay.state,rootAction:i,type:"improve-jira-sync",open:!0}),(0,g().u4)({environment:n,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"improve_jira_sync_modal_render",flowId:l}}})):(S().Ay.setState({...S().Ay.state,rootAction:i,type:"sync-guide",open:!0}),(0,g().u4)({environment:n,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"sync_guide_render",flowId:l}}})));let d=(await(0,v().D1)(n,r.id)).account;d||(d=[],a().log({level:"debug",from:"jiraActions",type:"setupJiraSync",data:{miscDataToConvertToString:{spaceId:r.id}}}));const u=S().Ay.state.rootAction;!d.length||"add_account"===i||"sync_guide"===o&&"add_account"===u?c?(S().Ay.setState({...S().Ay.state,type:"auth",open:!0}),(0,g().u4)({environment:n,event:{eventName:"external_sync_auth",eventProperties:{integration:"jira",actionType:"admin_auth_render",flowId:l}}})):(S().Ay.setState({...S().Ay.state,type:"request-feature",open:!0}),(0,g().u4)({environment:n,event:{eventName:"external_sync_setup_action",eventProperties:{integration:"jira",actionType:"request_feature_render",flowId:l}}})):(S().Ay.setState({...S().Ay.state,type:"teamspace-selection",open:!0}),(0,g().u4)({environment:n,event:{eventName:"external_sync_teamspace_selection",eventProperties:{integration:"jira",actionType:"teamspace_modal_render",flowId:l}}}))}},664565:(e,t,n)=>{n.d(t,{j:()=>i});var o=n(296540);function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const[n,i]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{i(!1)}),[...t]),(0,o.useEffect)((()=>{const t=setTimeout((()=>{i(!0)}),e);return()=>{clearTimeout(t)}})),n}},664713:(e,t,n)=>{n.d(t,{Z:()=>m,y:()=>f});n(16280),n(581454);var o=()=>n(763884),i=()=>n(386164),r=()=>n(388821),a=()=>n(179034),s=()=>n(763824),l=()=>n(870618),c=()=>n(303626),d=()=>n(90873),u=()=>n(449506),p=()=>n(666144);async function m(e){const{environment:t,userId:n,spaceId:m}=e,f=d().A.getSharedPagesState(e);if(f&&f.loadingDone)return;const v=void 0!==e.emitValue?e.emitValue:null==f?void 0:f.emitValue,h=(0,s().yX)();d().A.setSharedPagesState({spaceId:m,userId:n,state:{currentPageIds:null==f?void 0:f.currentPageIds,loadingDone:h.promise,emitValue:v}});try{const e=async function*(e,t,n){try{const n=await c().N.measure("loadUserSharedPages","(current user)",(()=>async function(e,t){const{id:n}=e.currentUser;if(!n)throw new Error("Must be logged in.");if(!e.defaultRecordCache.persistedRecordCache)throw new Error("No local database found.");const i=o().K.get({userId:n,key:g({userId:n,spaceId:t.spaceId})})||void 0;if(!i)throw new Error("No local shared pages found.");const r=await l().ww({environment:e,recordPointers:i.map((e=>({table:a().ev,id:e}))),recurFn:()=>[],recordIsRequired:()=>!1});return{pages:i,recordMap:r.toJson()}}(e,{spaceId:t})));p()._O({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,recordMap:r().RecordMapWithRole.create(n.recordMap),debugSource:"loadUserSharedPagesInSpace"}),yield n}catch(d){}const s=await u().callApi({eventName:"getUserSharedPagesInSpace",environment:e,data:{spaceId:t},userId:n,headers:(0,i().WS)({cellId:void 0,recordId:void 0,spaceId:t})});"success"===s.type&&(e.defaultRecordCache.persistedRecordCache&&o().K.set({userId:e.currentUser.id,key:g({userId:n,spaceId:t}),value:s.data.pages}),yield s.data)}(t,m,n);for await(const t of e)d().A.setSharedPagesState({spaceId:m,userId:n,state:{currentPageIds:t.pages,loadingDone:h.promise,emitValue:v}})}catch(_){}finally{const t=d().A.getSharedPagesState(e);t&&t.loadingDone&&d().A.setSharedPagesState({spaceId:m,userId:n,state:{...t,loadingDone:void 0}})}}function g(e){return`UserSharedPagesInSpace:${e.userId}:${e.spaceId}`}async function f(e,t){const n=await u().callApi({eventName:"getUserSharedPagesInSpace",environment:e,data:t});if("failed"===n.type)throw n.error;return n.data}},665589:(e,t,n)=>{n.d(t,{l:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M5.393 6.022a.625.625 0 0 1 0 .884L2.925 9.375h5.66a.625.625 0 0 1 0 1.25h-5.66l2.468 2.469a.625.625 0 0 1-.884.883L.974 10.442a.625.625 0 0 1 0-.884l3.535-3.536a.625.625 0 0 1 .884 0m6.026 3.353a.625.625 0 0 0 0 1.25h5.648l-2.469 2.469a.625.625 0 1 0 .884.883l3.536-3.535a.625.625 0 0 0 0-.884l-3.536-3.536a.625.625 0 0 0-.884.884l2.469 2.469z"})},i=(0,n(340498).wt)("arrowExpandHorizontal",o)},666144:(e,t,n)=>{n.d(t,{BB:()=>C,IL:()=>M,PC:()=>I,_O:()=>x,b4:()=>B,oX:()=>T,sy:()=>A});n(581454);var o=()=>n(792071),i=()=>n(68263),r=()=>n(179034),a=()=>n(96689),s=()=>n(84520),l=()=>n(798880),c=()=>n(294712),d=()=>n(495989),u=()=>n(870723),p=()=>n(919709),m=()=>n(545285),g=()=>n(745875),f=()=>n(763824),v=()=>n(534177),h=()=>n(989423),_=()=>n(907828),b=()=>n(245865),y=()=>n(227440),S=()=>n(508496),w=()=>n(589994),k=()=>n(276470);function I(e){const{environment:t,pointer:n,userId:o,inMemoryRecordCache:u,model:f,role:v,force:y,maybeStaleRecordMap:w,updatePaths:k,debugSource:I}=e;"block"===n.table&&(0,_().setBlockIdDebugSource)(n.id,I);const x=o||t.currentUser.id,A=null==f?void 0:f.getVersion(),C={ignoreAllCaches:!0},T=u.getRole({pointer:n,userId:x},C),M=u.getVersion({pointer:n,userId:x},C),B="number"==typeof A&&A>M;if(!(y||B||void 0!==v&&T!==v))return;let R=f;if(!y&&!B&&function(e){const{oldRole:t,newRole:n}=e;if(!n||!i().Tt(n))return!1;if(t&&!i().p2(t))return!1;return!0}({oldRole:T,newRole:v})){const e=u.getRecordModel({pointer:n,userId:x},C);e&&(R=e)}u.setModelAndRole({pointer:n,userId:x},R,v);for(const i of k)u.emitRecord(n,i);S().default.checkGate({gateName:"in_memory_cache_logging"})&&(0,g().rQ)(1)&&(0,h().u4)({environment:t,event:{eventName:"in_memory_cache_update",eventProperties:{size:u.size}}});const E=t.defaultRecordCache.persistedRecordCache;if(!u.isTemporaryData&&!u.isSyntheticAssistantData&&E&&(0,m().u)(n)){const e=R?R.__IM_SORRY__getValue():void 0;if(n.table===r().ev&&e){const t=e;t.properties&&t.properties.title&&(t.properties.title=t.properties.title.map((e=>p().x9_(e))))}const o=function(e){const{environment:t,pointer:n,model:o,role:r}=e,{id:u}=t.currentUser,p=n.table===l().oo||n.table===c().GD||n.table===d().xM;if(p&&u===n.id)return P.LoggedInUser;if((null==o?void 0:o.table)===s().mu&&o.parent_id===u)return P.JoinedSpace;if(n.table===a().NX&&(0,i().DH)(r))return P.JoinedSpace;return}({environment:t,pointer:n,model:R,role:v}),u={value:e,role:v};E.set({pointer:n,value:u,importance:o,userId:x,maybeStaleRecordMap:w})}u===t.defaultRecordCache.inMemoryRecordCache&&b().unsubscribeAfterDelay({pointer:n,userId:x,environment:t})}async function x(e){const{environment:t,userId:n,recordMap:i,inMemoryRecordCache:r,force:a,maybeStaleRecordMap:s,debugSource:l}=e,c=t.defaultRecordCache.persistedRecordCache;await(0,f().lX)(i,100,(async e=>{let{pointer:i,model:d,role:u}=e,p=d,g=u;if(w().transactionQueue.isPendingTransactionForRecord(i)&&c&&(0,m().u)(i)){const e=await c.get({pointer:i,userId:n||t.currentUser.id});e&&(p=o().Bj6.fromValue(i.table,e.value),g=u)}I({environment:t,inMemoryRecordCache:r,pointer:i,userId:n,model:p,role:g,updatePaths:[[]],force:a,maybeStaleRecordMap:s,debugSource:l})}))}async function A(e){const{inMemoryRecordCache:t,pointer:n,userId:i,environment:r,minimumVersion:a}=e,s=S().default.checkGate({gateName:"record_cache_backfill_space_id"}),l=w().transactionQueue.isPendingTransactionForRecord(n),c=r.defaultRecordCache.persistedRecordCache;if(l&&c&&(0,m().u)(n))return await c.get({pointer:n,userId:i});let d;const p=c&&(0,m().u)(n)?c.get({pointer:n,userId:i}):void 0;if(p){const e=await(0,f().nQ)(function(e){switch(e.device.platform){case"browser":switch(e.device.os){case"mac":return 172;case"windows":return 250;case"android":return 0;case"ios":return 360;case"chrome":return 238;case"linux":return 220}return 200;case"electron":return 1/0;case"react-native":switch(e.device.os){case"android":return 270;case"ios":return 64}return 102}}(r),p);e.timeout||(d=e.result),e.timeout&&!y().A.state.online&&(d=await p),d&&I({environment:r,inMemoryRecordCache:t,pointer:n,userId:i,model:o().Bj6.fromValue(n.table,d.value),role:d.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (localResult)"})}if(!y().A.state.online)return d&&S().default.checkGate({gateName:"record_map_logging"})&&(0,h().u4)({environment:r,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}}),d;let g;try{const e=t.getEntryWithBackfilledSpaceId({pointer:n,userId:i},{ignoreAllCaches:!0}),l=e?e.value:void 0,c=e?e.pointer:void 0;if(a&&null!=l&&l.value&&(null==l?void 0:l.value.version)>=a)return S().default.checkGate({gateName:"record_map_logging"})&&(0,h().u4)({environment:r,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}}),l;const m=(0,v().O9)(c)?{...c}:{...n},f=null==l?void 0:l.value;s&&void 0===m.spaceId&&c&&((0,u().RP)(c)||(0,u().kW)(c.table))&&f&&"space_id"in f&&"string"==typeof f.space_id&&(m.spaceId=f.space_id);let b=!1;try{g=await(0,k().e)(r,{userId:i,version:l&&l.value&&l.value.version?l.value.version:-1,pointer:m,shouldThrowError:!0})}catch(_){b=!0}g&&I({environment:r,inMemoryRecordCache:t,pointer:n,userId:i,model:o().Bj6.fromValue(n.table,g.value),role:g.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (remoteResult)"}),b&&(d||(d=await p,d&&I({environment:r,inMemoryRecordCache:t,pointer:n,userId:i,model:o().Bj6.fromValue(n.table,d.value),role:d.role,updatePaths:[[]],debugSource:"refreshAndReturnRecord (localResult)"})))}catch(b){console.error(b)}return S().default.checkGate({gateName:"record_map_logging"})&&(g?(0,h().u4)({environment:r,event:{eventName:"refresh_and_return_record.use_remote",eventProperties:{}}}):d&&(0,h().u4)({environment:r,event:{eventName:"refresh_and_return_record.use_local",eventProperties:{}}})),g||d}async function C(e){const{inMemoryRecordCache:t,pointer:n,userId:i,environment:r}=e,{defaultRecordCache:a}=r,s=await(0,k().e)(r,{pointer:n,userId:i,version:-1});s&&(T({environment:r,inMemoryRecordCache:t,persistedRecordCache:a.persistedRecordCache,pointer:n,userId:i}),I({environment:r,inMemoryRecordCache:t,pointer:n,userId:i,model:o().Bj6.fromValue(n.table,s.value),role:s.role,updatePaths:[[]],debugSource:"forceFetchRemoteRecord"}))}function T(e){const{inMemoryRecordCache:t,persistedRecordCache:n,pointer:o,userId:i}=e;t.deleteRecord({pointer:o,userId:i}),t.emitRecord(o,[]),n&&(0,m().u)(o)&&n.deleteRecord(o,i)}function M(e){const t=e.defaultRecordCache.inMemoryRecordCache;for(const{pointer:n}of t.data)b().unsubscribeForAllUsers({pointer:n,environment:e});t.clearCache()}const P={LoggedInUser:100,JoinedSpace:50};function B(e,t){let n=0,o=0,i=0;for(const{pointer:r,model:a}of t){if(!a)continue;const t=e.defaultRecordCache.inMemoryRecordCache.hasRecordWithVersion({pointer:r,userId:e.currentUser.id},a.getVersion());!t&&e.defaultRecordCache.inMemoryRecordCache.hasRecord({pointer:r,userId:e.currentUser.id})?o++:t&&n++,i++}return{num_records:i,num_cached_records:n,num_stale_records:o}}},666429:(e,t,n)=>{n.d(t,{Ay:()=>a,LX:()=>i,ey:()=>o});const o=5e3,i=1e4;class r extends(()=>n(757695))().default{getInitialState(){return{currentItem:void 0,shouldReset:!0}}}const a=new r},666710:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{selectableRectMap:new Map,selectableContainerRectMap:new Map,selectableElementRectMap:new Map,lastUpdate:0}}hasBeenUpdatedSince(e){return this.state.lastUpdate>e}}const i=new o;(0,n(604341).exposeDebugValue)("SelectableRectStore",i);const r=i},666803:(e,t,n)=>{n.d(t,{Ay:()=>s,XT:()=>i,cK:()=>o});let o=function(e){return e.Cloud="Cloud",e.DataCenter="DataCenter",e}({}),i=function(e){return e.Basic="Basic",e.Bearer="Bearer",e}({});class r extends(()=>n(757695))().default{getInitialState(){return{open:!1,loading:!1,adminTokenError:!1,site:void 0,flowId:void 0,botId:void 0,defaultExternalCollectionSetting:void 0,spaceId:void 0,teamSpaceId:void 0,projectKeys:[],instanceValue:o.Cloud,isMemberAuthSuccessForDataCenter:!1,authenticationType:i.Bearer,notionState:void 0}}createNewFlowId(){const e=(0,n(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}}const a=new r,s=a;(0,n(604341).exposeDebugValue)("jiraImportStore",a)},667019:(e,t,n)=>{n.d(t,{W:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{hoveredEditId:void 0}}getHoveredEditId(){var e;return null===(e=this.state)||void 0===e?void 0:e.hoveredEditId}}const i=new o},668435:(e,t,n)=>{n.d(t,{h:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("unavailableOffline",{viewBox:"0 0 26 24",svg:(0,o.jsx)("g",{children:(0,o.jsx)("path",{d:"M6.574 19.645a6.3 6.3 0 0 1-2.314-.42 6.1 6.1 0 0 1-1.865-1.143 5.3 5.3 0 0 1-1.23-1.69 4.8 4.8 0 0 1-.44-2.03q0-1.192.43-2.198a4.44 4.44 0 0 1 1.24-1.67 3.94 3.94 0 0 1 1.914-.84q0-.36.068-.693a3.2 3.2 0 0 1 .215-.625L5.89 9.635q-.079.225-.118.478-.039.255-.039.547 0 .195-.185.195-1.036 0-1.768.47-.723.468-1.103 1.269a4 4 0 0 0-.381 1.767q0 .997.557 1.846.555.84 1.523 1.357.966.508 2.197.508h7.764l1.582 1.573zm14.61-.166-1.407-1.407h.244q1.035 0 1.866-.44a3.5 3.5 0 0 0 1.328-1.18 2.94 2.94 0 0 0 .488-1.651q0-1.329-.8-2.246-.791-.918-2.12-1.211-.176-.039-.156-.225.03-.341.039-.713a7 7 0 0 0 0-.722 5.9 5.9 0 0 0-.8-2.686 5.6 5.6 0 0 0-1.954-1.992q-1.23-.762-2.832-.762-1.26 0-2.197.42a4.9 4.9 0 0 0-1.592 1.113 8 8 0 0 0-1.143 1.543q-.078.146-.244.098a3 3 0 0 0-.459-.098 2.2 2.2 0 0 0-.459-.029L7.492 5.797q.469-.117.947-.117a3.3 3.3 0 0 1 .938.117 8 8 0 0 1 1.406-1.563 6.6 6.6 0 0 1 1.895-1.132q1.074-.43 2.402-.43 1.505 0 2.793.557a6.7 6.7 0 0 1 2.266 1.562 7.1 7.1 0 0 1 1.513 2.383q.537 1.366.537 2.998a5 5 0 0 1 2.715 2.705q.372.898.371 1.924 0 1.142-.517 2.119a4.8 4.8 0 0 1-1.445 1.65 5.4 5.4 0 0 1-2.13.909Zm-1.143 2.646L3.732 5.835a.75.75 0 0 1-.214-.526q0-.322.214-.538a.72.72 0 0 1 .528-.214.71.71 0 0 1 .547.214l16.298 16.29a.67.67 0 0 1 .215.527.75.75 0 0 1-.215.537.75.75 0 0 1-.537.215.74.74 0 0 1-.527-.215"})})})},668491:(e,t,n)=>{n.d(t,{ET:()=>E,NQ:()=>R,kf:()=>h,Sr:()=>x,YO:()=>B,Wq:()=>P,EC:()=>w});var o=()=>n(584262);n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm1.25 7.5c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875V7.5H3.625zm1.008-7.316a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25m2.625-.625a.625.625 0 1 0-1.25 0 .625.625 0 0 0 1.25 0m1.375.625a.625.625 0 1 0 0-1.25.625.625 0 0 0 0 1.25"})},r=(0,n(340498).wt)("browser",i);var a=()=>n(179034),s=()=>n(343666),l=()=>n(222299),c=()=>n(281948),d=()=>n(435009),u=()=>n(878377),p=()=>n(492414),m=()=>n(351360),g=()=>n(712505),f=()=>n(416726);const v=(0,n(959013).YK)({openInFullPage:{id:"action.navigation.openInFullPage",defaultMessage:"Open in full page"},openInSidePeek:{id:"action.navigation.openInSidePeek",defaultMessage:"Open in side peek"},openInNewTab:{id:"action.openInNewTab.name",defaultMessage:"Open in new tab"},openInNewWindow:{id:"action.openInNewWindow.name",defaultMessage:"Open in new window"},openInFullPageShort:{id:"action.navigation.openInFullPageShort",defaultMessage:"Full page"},openInSidePeekShort:{id:"action.navigation.openInSidePeekShort",defaultMessage:"Side peek"},openInNewTabShort:{id:"action.openInNewTab.nameShort",defaultMessage:"New tab"},openInNewWindowShort:{id:"action.openInNewWindow.nameShort",defaultMessage:"New window"}});function h(e){var t;const n=e.blocks[0];if(!n)return!1;if(null!==(t=n.getModel())&&void 0!==t&&t.isNavigableBlock())return!0;if(n.isType("alias")){var o;const e=null===(o=n.getAliasTargetStore())||void 0===o?void 0:o.getModel();if((null==e?void 0:e.table)===a().ev&&null!=e&&e.isNavigableBlock())return!0}return!1}function _(e){return g().default.isSidePeekOpen()}const b=S(!1),y=S(!0);function S(e){return(0,f().Ls)({key:"open in full page",displayName:e?v.openInFullPageShort:v.openInFullPage,analyticsName:e?v.openInFullPageShort.defaultMessage:v.openInFullPage.defaultMessage,svg:n(419942).o,validators:[u().vXb,h,_],closeParentMenu:!0,action:e=>{const t=e.blocks[0],n=t.getAliasTargetStore()??t;if(n.table===s().SN)return;const i=(0,p().Ay)({store:n,pageVisitSource:o().y8.LinkInPage,openInCenterPeek:!t.isPost()&&void 0});d().oo({environment:e.environment,url:i})}})}const w=I(!1),k=I(!0);function I(e){return(0,f().Fw)({key:"open side peek",displayName:e?v.openInSidePeekShort:v.openInSidePeek,analyticsName:e?v.openInSidePeekShort.defaultMessage:v.openInSidePeek.defaultMessage,svg:n(177256).A,shortcuts:["openInSidePeek"],validators:[u().vXb,h,u().AU6(u().FrL),u().lTV,u().AU6(u().dUO)],closeParentMenu:!0,action:e=>{var t;const{route:i}=e.environment.RouterStore.state,r="chat"===i.name;let a;"team"===i.name&&(a=i.teamId);if(!(null===(t=m().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id)&&!r&&void 0===a)return;const l=e.blocks[0],c=l.getAliasTargetStore()??l;if(c.table===s().SN)return;const u=r?(0,n(172385).EY)({currentRoute:i,pageId:l.id,pageVisitSource:o().y8.AIChat,scrollToBlockId:void 0,isMobile:e.environment.device.isMobile}):void 0!==a?(0,n(120739).a)({teamId:a,peekInfo:{peekViewBlockId:l.id,peekMode:"s"}}):(0,p().Ay)({store:c,openInSidePeek:!0,peekViewBlockId:c.id,peekMode:"s",pageVisitSource:o().y8.PeekOpen});d().oo({environment:e.environment,url:u})}})}const x=C(!1),A=C(!0);function C(e){return(0,f().Fw)({key:"navigate to page in new tab",analyticsName:"Navigate to page in new tab",displayName:e?v.openInNewTabShort:v.openInNewTab,svg:n(955363).arrowDiagonalUpRightIcon,validators:[u().vXb,h,u().AU6(u().FrL),u().AU6(u().IW)],shortcuts:["commandShiftEnter"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;if(t[0].isType("alias")){var i;const e=t[0];if(!(null===(i=m().default.state.mainEditorCurrentBlockStore)||void 0===i?void 0:i.id))return;const r=e.getAliasTargetStore()??e;if(r.table===s().SN)return;l().Yf({environment:n,blocks:[r],openInNew:"tab",pageVisitSource:o().y8.LinkInPage})}else l().Yf({environment:n,blocks:t,openInNew:"tab",pageVisitSource:o().y8.LinkInPage})}})}const T=M(!1);function M(e){return(0,f().Ls)({key:"navigate to page in new window",analyticsName:"Navigate to page in new window",displayName:e?v.openInNewWindowShort:v.openInNewWindow,svg:r,validators:[u().vXb,u()._fc,u().ibx,u().AU6(u().lOb),u().AU6(u().FrL),u().AU6(u().IW)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;l().Yf({environment:n,blocks:t,openInNew:"window",pageVisitSource:o().y8.LinkInPage})}})}const P=[A,M(!0),y,k],B=[x,T,b,w],R=(0,f().Fw)({key:"go up one page",analyticsName:"Go up one page",displayName:void 0,validators:[u().GbK],shortcuts:["peekUp"],closeParentMenu:!0,action:()=>c().NQ()}),E=(0,f().Fw)({key:"go down one page",analyticsName:"Go down one page",displayName:void 0,validators:[u().GbK],shortcuts:["peekDown"],closeParentMenu:!0,action:()=>c().ET()})},668721:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){}didRequest(){const e=this.state;return!(!e||e.isEligible)&&Boolean(e.requestedAccess)}}const i=new o},668725:(e,t,n)=>{n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronDown",{viewBox:"0 0 30 30",svg:(0,o.jsx)("polygon",{points:"15,17.4 4.8,7 2,9.8 15,23 28,9.8 25.2,7 "})})},670631:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{offlinePages:void 0,offlinePageListeners:void 0,isSlowWrite:!1,shouldPublishUpdate:!1}}}const i=new o;(0,n(604341).exposeDebugValue)("OfflinePagesStore",i);const r=i},670913:(e,t,n)=>{n.d(t,{v:()=>r});n(898992),n(908872);var o=()=>n(715256),i=()=>n(680141);function r(e){const{experimentService:t,actor:n,spaceId:r}=e;return i().Y.reduce(((e,i)=>(e[i]=t.checkGate({actor:n??o().S3,gateName:i,customIDs:{spaceId:r}}),e)),{})}},671263:(e,t,n)=>{n.d(t,{Sh:()=>r,Xm:()=>i,jK:()=>a});var o=()=>n(645873);const i=new(o().O2)("payments",(async()=>{const[{CheckoutUpgradeModal:e},{ClaimAndUpgradeModal:t},{PlansModalContent:o},{BillingModalContent:i},r,a]=await Promise.all([Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,591062)),Promise.all([n.e(58550),n.e(87598),n.e(20108)]).then(n.bind(n,368118)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,245094)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,487892)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,245094)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,487892)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.t.bind(n,624119,23)),Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11341),n.e(87598),n.e(58221),n.e(77465),n.e(83866),n.e(91062),n.e(59970)]).then(n.bind(n,112527))]);return{CheckoutUpgradeModal:e,ClaimAndUpgradeModal:t,PlansModalContent:o,BillingModalContent:i,plans:r,billing:a}})),r=(0,o()._h)(i,(e=>e.CheckoutUpgradeModal)),a=(0,o()._h)(i,(e=>e.ClaimAndUpgradeModal))},671363:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n(496603).o8(this.state)}}const i=new o},671812:(e,t,n)=>{n.d(t,{A:()=>s,a:()=>l});var o=()=>n(351360),i=()=>n(179580),r=()=>n(780262),a=()=>n(630116);function s(e){var t;if(r().A.state.editsBlocked)return!0;const n=o().default.state.currentSpaceStore;if(!n)return!1;const s=null===(t=i().A.getData(e,{spaceId:n.id}))||void 0===t||null===(t=t.bannerIds)||void 0===t?void 0:t[0];if(!s)return!1;const l=a().by.createChildStore(n,{id:s,table:"subscription_banner",spaceId:n.id});return"dunning"===l.getBannerKey()&&"alert"===l.getBannerType()||"uncollectible_unpaid"===l.getBannerKey()}function l(e){if(void 0!==e)return()=>{e&&window.open(e,"_blank")}}},673657:(e,t,n)=>{n.r(t),n.d(t,{useIsDictatingToPage:()=>r});var o=()=>n(847249),i=()=>n(964345);function r(e){return(0,o().K8)((()=>i().gZ.state&&(null==e?void 0:e.id)===i().Di.state),[e])}},673730:(e,t,n)=>{n.d(t,{Mo:()=>r,Q$:()=>o,fy:()=>i});const o={maxWidth:280,width:"max-content",overflowWrap:"break-word",textWrap:"wrap",whiteSpace:"pre-line"},i=280,r=(0,n(959013).YK)({addPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.addDescriptionTooltip",defaultMessage:"Add property description"},editPropertyDescriptionTooltip:{id:"database.viewSettings.propertyTab.description.editDescriptionTooltip",defaultMessage:"Edit property description"}})},673998:(e,t,n)=>{n.d(t,{GB:()=>C,N6:()=>M,gz:()=>N,wB:()=>L,kE:()=>O,$V:()=>U,Ef:()=>P,Vg:()=>R});n(296540);var o=()=>n(584262),i=()=>n(75756),r=()=>n(283699),a=()=>n(893820),s=()=>n(857639),l=()=>n(959013),c=()=>n(502800),d=()=>n(183558),u=()=>n(720665),p=()=>n(449506),m=()=>n(493823),g=n(474848);const f=function(){const e=(0,n(484714).v3)(),t=(0,n(401497).IS)((e=>({buttonContainer:{display:"flex"},buttonText:{color:e.text.contrastPrimary},plainButton:{paddingLeft:8,paddingRight:8},dots:{width:14,marginLeft:14,fill:e.text.contrastPrimary}})),[]);return(0,g.jsxs)("div",{style:t.buttonContainer,children:[(0,g.jsx)(m().p,{onClick:()=>N(e,{necessary:!0,performance:!0,preference:!0,targeting:!0}),children:(0,g.jsx)("b",{style:t.buttonText,children:(0,g.jsx)(l().sA,{...i().LS.acceptAllButtonLabel})})}),(0,g.jsx)(m().p,{onClick:()=>N(e,{necessary:!0,performance:!1,preference:!1,targeting:!1}),children:(0,g.jsx)("b",{style:t.buttonText,children:(0,g.jsx)(l().sA,{...i().LS.rejectAllButtonLabel})})}),(0,g.jsx)(n(455215).A,{hasDismissButton:!0,renderOrigin:e=>(0,g.jsx)(m().p,{style:t.plainButton,...e,children:(0,n(30626)._)(t.dots)})})]})};var v=()=>n(719147),h=()=>n(989423),_=()=>n(529543),b=()=>n(972435),y=()=>n(991385),S=()=>n(351360),w=()=>n(438754),k=()=>n(799089),I=()=>n(666429),x=()=>n(901389);const A=(0,l().YK)({cookieConsentSaveError:{id:"cookieConsent.saveError",defaultMessage:"Cannot record cookie consent, please try again later."}});async function C(e){const{environment:t,onboardingState:n}=e,{inAppCalloutStore:o}=S().default.state;if(await T(t)&&o.getCalloutVisibility("cookie_preference_popup").canShow)return(0,y().B)(t.currentUser.id)>=2?(D(),k().A.setState({open:!0}),V({environment:t,type:"modal",onboardingState:n}),o.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),void h().vd(t,"cookie_modal_shown")):void(I().Ay.state.currentItem||(o.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!0,validateCanShow:!0}),I().Ay.setState({...I().Ay.state,currentItem:{key:(0,d().Ay)(),label:(0,g.jsx)("div",{children:(0,i().Qq)(M,"snackbar")}),right:(0,g.jsx)(f,{})}}),V({environment:t,type:"snackbar",onboardingState:n})))}async function T(e){if(!(0,_().canSetCookie)(e))return!1;if(!(0,_().canShowCookieUi)(e))return!1;const t=await(0,_().getHasPermissionArgs)(e);return"true"===(null==t?void 0:t.notion_check_cookie_consent)&&(null==t||!t.notion_cookie_consent)}function M(e,t){return(0,g.jsx)(v().A,{href:e,children:t})}function P(e,t){if("necessary"===t)return;const n={...w().A.getState().permission};n[t]=!n[t],w().A.setPermission(n),B(e,n)}const B=n(496603).sg(((e,t)=>{R(e,t)}),2e3);async function R(e,t){const n=await p().callApi({eventName:"recordCookieConsent",environment:e,data:{id:w().A.getId(),permission:t,document_version:i().ti,userId:e.currentUser.id}}).catch((e=>{E({type:"recordCookieConsentError",error:(0,c().convertErrorToLog)(e)})}));if(!n)return void E({type:"recordCookieConsentEmptyResult"});if("success"!==n.type)return void E({type:"recordCookieConsentReturnsNonSuccess",data:{miscDataToConvertToString:{result:n}}});const s=n.data;await w().A.setCookieConsent(e,s),o().GD();const l=await h().TZ(e),d=o().b_(l);await a().U5(d);const{permission:u}=s;h().vd(e,"record_cookie_consent",{permission:u,consent_type:(0,r().TS)(u)})}function E(e){let{type:t,data:n,error:o}=e;x().f1(b().A.formatMessage(A.cookieConsentSaveError)),s().log({level:"error",from:"cookieActions",type:t,data:n,error:o})}function D(){const{inAppCalloutStore:e}=S().default.state;e.updateCalloutStatus({calloutId:"cookie_preference_popup",visible:!1}),I().Ay.setState({...I().Ay.state,currentItem:void 0})}function N(e,t){R(e,t),D(),L()}function L(){x().rG({message:b().A.formatMessage(i().LS.reloadAfterSaveMessage),onAccept:()=>{window.location.reload()}})}async function O(e){const{currentUserSettingsStore:t}=S().default.state;if(!t)return;await t.load();const n=t.getSettings();if(!n)return;const o=n.cookie_consent;o?(await w().A.setCookieConsent(e,o),D()):(w().A.clearCookieConsent(),await T(e)&&w().A.setPermission(i().Gq))}async function U(e){const t=await(0,_().getCookieConsentCookie)(e);if(!t)return;const n=(0,u().$l)(t);n&&w().A.setState(n)}const F={tracked:!1};function V(e){let{environment:t,type:n,onboardingState:o}=e;if(F.tracked)return;const i={type:n,onboardingStage:null==o?void 0:o.stage};h().vd(t,"cookie_banner_shown",i),F.tracked=!0}},674276:(e,t,n)=>{n.d(t,{b:()=>c});n(296540);var o=()=>n(959013),i=()=>n(640703),r=()=>n(645873);const a=new(r().O2)("ErrorInfoPopup",(()=>n.e(19227).then(n.bind(n,471319)))),s=(0,r()._h)(a,(e=>e.ErrorInfoPopup));var l=n(474848);function c(e){let{error:t,errorId:n,enablePopup:r}=e;return r?(0,l.jsx)(s,{error:t,errorId:n}):(0,l.jsx)("span",{children:(0,l.jsx)(o().sA,{defaultMessage:"Error ID: {errorId}",id:"errorLabel.errorMessage.errorId",values:{errorId:(0,i().g)(n)}})})}},675074:(e,t,n)=>{n.d(t,{ZO:()=>T,$C:()=>P,qI:()=>L,Fy:()=>R,Ox:()=>M,oD:()=>D,wA:()=>O,QM:()=>B});n(16280),n(944114),n(898992),n(354520),n(581454),n(814603),n(147566),n(198721);var o=()=>n(700500),i=()=>n(713998),r=()=>n(304740),a=()=>n(522419),s=()=>n(919709),l=()=>n(959013),c=()=>n(449506),d=()=>n(443120),u=()=>n(780054),p=()=>n(972435),m=()=>n(406792),g=()=>n(129522);const f=new(n(178624).R)({key:"urlTurnedBookmarkToastStatusSetting",namespace:n(419494).Bq,important:!0,trackingType:"preference"});var v=()=>n(437219),h=()=>n(799750),_=()=>n(235116),b=()=>n(220738),y=()=>n(896628),S=()=>n(383594),w=()=>n(246826),k=()=>n(436572),I=()=>n(319975),x=()=>n(751156),A=()=>n(892632);const C=(0,l().YK)({urlTurnedBookmark:{id:"action.urlTurnedBookmark.snackBarMessage",defaultMessage:"Pasted url is not embeddable, turned to bookmark instead!"}});let T=function(e){return e[e.Page=0]="Page",e[e.PageComment=1]="PageComment",e[e.SidebarComment=2]="SidebarComment",e}({});function M(e){return e===T.PageComment||e===T.SidebarComment}function P(e){const{environment:t,files:n,inMemoryRecordCache:o,transaction:i,pageWidth:r,ignoreOversizedFiles:a,spaceId:s}=e;return n.filter((e=>{if(a){if(!A().a1({environment:t,file:e,bypassFreeFileUploadLimitCheck:!1}))return A().j7(t),!1}return!0})).map((e=>{if(e.type&&(e.type.includes("image")||e.type.includes("video")||e.type.includes("audio"))&&!e.type.includes("photoshop")){const n=w().Wv({environment:t,type:"embed",inMemoryRecordCache:o,transaction:i,spaceId:s});return i.postSubmitCallbacks.push((o=>{o||B({environment:t,store:n,file:e,pageWidth:r,preferredType:void 0})})),n}{const n=w().Wv({environment:t,type:"file",inMemoryRecordCache:o,transaction:i,spaceId:s});return i.postSubmitCallbacks.push((o=>{o||b().Q({environment:t,store:n,file:e})})),n}}))}function B(e){const{environment:t,store:n,file:o,pageWidth:i,preferredType:a}=e;let s;S().I(),A().QM({environment:t,file:o,bucket:"secure",record:n.pointer,isFileBlock:!0,reportRichUploadMetrics:!0,onStart:e=>{s=m().default.DO_NOT_USE_markLegacy("image_upload");let l=!1;if(o.type.indexOf("image")>=0&&!(0,r().Ql)(e.name,"tiff")&&!(0,r().Ql)(e.name,"tif")){const e=o instanceof File?URL.createObjectURL(o):o.dataURL;if(e){const o=new Image;o.onload=function(){E(t,{store:n,width:o.naturalWidth,height:o.naturalHeight,scale:!0,type:"image",pageWidth:i}),URL.revokeObjectURL(e)},o.src=e,l=!0}}if(!l){const e=(0,r().WT)({url:o.name||"",baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,preferredType:a});E(t,{store:n,width:i,type:e,pageWidth:i})}},onComplete:async(e,r)=>{if(r){const l=Boolean(r.dataURL),c=r.name,d=r.size;await R(t,{embeddedUrl:{originUrl:e},store:n,isDataURL:l,pageWidth:i,preferredType:a,name:c,size:d}),o.type.indexOf("image")>=0&&(h().N(t,{blockId:n.id,fileIds:n.getFileIds(),fileSize:o.size,fileType:o.type}),m().default.DO_NOT_USE_measureLegacy(s,{environment:t,data:{success:!0,type:o.type}}))}},onError:e=>{m().default.DO_NOT_USE_measureLegacy(s,{environment:t,data:{success:!1,type:o.type}})},retryWhenOffline:!0,retryImmediatelyAfterFailure:!0})}async function R(e,t){const{store:n,isDataURL:i,pageWidth:l,preferredType:g,name:h,size:_,embeddedUrl:b}=t,{originUrl:S,pastedSecureFile:A}=b;let T=i?"image":(0,r().WT)({url:S,baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,preferredType:g});const M=A?(0,a().xm)(A):function(e,t){const n=/^https?:\/\//i,o=/^https:\/\/[^\/]+\.streamlit\.app/;return"maps"===e?n.test(t)?t.replace(/'/g,""):`https://maps.google.com/maps/search/${encodeURIComponent(t)}`:"embed"===e&&o.test(t)?`${t}?embed=true`:(0,r().US)(t)}(T,S),{properties:P,type:B,format:R}=await(0,r().pw)({source:M,type:T,isDataURL:i,pageWidth:l,isMobileDevice:e.device.isMobile,getEmbedData:async t=>{const n=await c().callApi({eventName:"getGenericEmbedBlockData",environment:e,data:t});return"failed"===n.type?void console.error(n.error):n.data},trackEmbedType:t=>v().vz(e,{embedType:t})});if(T=B,T===o().xd.bookmark){const o=n;return await d().Ht({environment:e,store:o,url:M,transformTimeout:0}),v().iZ(e,{embedType:B}),v().Hg(e),function(){if("do_not_prompt"===f.state)return;f.state?"displayed_once"===f.state?f.setState("displayed_twice"):"displayed_twice"===f.state&&f.setState("do_not_prompt"):f.setState("displayed_once");k().D6({label:p().A.formatMessage(C.urlTurnedBookmark)})}(),void(t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:T}}))}let E,D;v().$r(e,{embedType:B}),h&&_&&(E={size:s().x9d(_)},D=s().x9d(h));const{serverCommitResult:N}=x().createAndCommit({userAction:"embedBlockActions.initializeEmbedBlock",environment:e,canUndo:!0,perform:t=>{w().zv({store:n.getPropertiesStore(),data:{...P||{},...E},transaction:t}),D&&I().R9({environment:e,store:n.getBlockTitleStore(),value:D,transaction:t}),y().zA({stores:[n],update:R,transaction:t}),w().zv({store:n,data:{type:T},transaction:t}),A&&w().Bn({store:n,source:A.copiedSource,fileIds:[A.fileId],transaction:t})}});await N,v().iZ(e,{embedType:B}),t.metric&&m().default.measure(t.metric,{environment:e,data:{embedType:T}})}function E(e,t){let{store:n,...o}=t;x().createAndCommit({userAction:"embedBlockActions.initializeFormat",environment:e,canUndo:!0,perform:e=>{y().zA({stores:[n],update:(0,r().CN)(o),transaction:e})}})}async function D(e,t){const{store:n,from:r,callback:l}=t,c=n.getProperties(),d=n.getType(),u=d===o().xd.bookmark?c.link:c.source,p=i().MO(u),{display_source:m,original_url:g}=n.getFormat(),f=n.isExternalObjectInstanceBlockStore()?g:p||m;if(!f)return;const v=s().q4_(c.title),h=a().SB({title:v,source:f});let b="file";"image"!==d&&"video"!==d||(b=d),await _().OG(e,{url:f,downloadName:h,type:b,from:r,callback:l,permissionRecord:n.pointer,download:h.endsWith(".html")||h.endsWith(".htm")})}const N=(0,l().YK)({downloadingImage:{id:"embedBlockActions.downloading.label",defaultMessage:"Downloading…"}});async function L(e){const{store:t,environment:n,callback:o}=e,i=await async function(e){let{store:t,environment:n,calledFrom:o}=e;const i=t.getNavigableBlockStore();if(!i)return;const r=await c().callApi({eventName:"getBlockFileDownloadUrl",environment:n,data:{blockId:t.id,pageBlockId:i.id,meta:{name:o}}});if("success"!==r.type)return;const{url:a,fileName:s}=r.data;return{url:a,fileName:s}}({store:t,environment:n,calledFrom:"downloadSource"});if(null==i||!i.url)throw new Error("Failed to get block download URL");const{url:r,fileName:l}=i;v().uR(n,{url:r,from:"embedBlockActions"});const d=a()._J(r)?_().KE(n,{url:r,download:!0,downloadName:l,permissionRecord:t.pointer}):function(e){const{store:t,environment:n}=e;if(!n.currentUser.id)return Promise.resolve();const o=t.getProperties(),i=s().q4_(null==o?void 0:o.source),r=s().q4_(null==o?void 0:o.caption);return a().pJ(i,t.pointer,u().A.domainBaseUrl,n.currentUser.id,r)}(e);return k().D6({label:p().A.formatMessage(N.downloadingImage),durationMs:"keep"}),d.then(o).finally((()=>{k().N2()}))}function O(e){const{store:t}=e,n=g().K.findBlockFromStoreWithMethod(t,"replace");n&&n.replace()}},675811:(e,t,n)=>{n.d(t,{f:()=>r});n(296540);var o=()=>n(401497),i=n(474848);function r(){const e=(0,o().IS)((e=>({span:{marginLeft:2,marginRight:2,color:e.text.tertiary}})),[]);return(0,i.jsx)("span",{style:e.span,children:"/"})}},675925:(e,t,n)=>{n.d(t,{o:()=>s});var o=()=>n(534177),i=()=>n(989423);function r(e){return"init"===e?"action_init":"success"===e?"action_success":void(0,o().HB)(e)}function a(e,t){let{type:n,...o}=t;(0,i().u4)({environment:e,event:{eventName:r(n),eventProperties:o}})}function s(e,t,n){return a(e,{...t,type:"init"}),n((()=>{a(e,{...t,type:"success"})}))}},676007:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(847249),r=()=>n(100584);function a(e){r().A.state.openModals.has(e)&&(r().A.state.openModals.delete(e),r().A.emit())}var s=()=>n(497259),l=()=>n(145214),c=n(474848);const d=function(e){const{open:t,onOpen:d,transitionAppearance:u="modal"}=e,p=(0,o.useRef)();void 0===p.current&&(p.current=n(206267).JW());const m=p.current,f=(0,i().uB)(e.store,s().A),v=(0,i().K8)((()=>({open:f.state.open,openAnimationCompleted:f.state.openAnimationCompleted})),[f]),h=(0,o.useRef)(!1),_=(0,i().O$)(n(948914).b),b=function(e){let{disableAnimationFromProps:t,isShowingTabBar:n}=e;return!!n||t}({disableAnimationFromProps:"none"===u,isShowingTabBar:Boolean(_)}),y=(0,o.useCallback)((()=>{var e;!h.current&&t?(f.setState({open:!0,openAnimationCompleted:!1,closeAnimationCompleted:!0}),e=m,r().A.state.openModals.has(e)||(r().A.state.openModals.add(e),r().A.emit()),d&&d()):h.current&&!t&&(f.setState({open:!0,openAnimationCompleted:!0,closeAnimationCompleted:!1}),a(m)),h.current=t}),[m,f,d,t]);return(0,o.useEffect)((()=>{y()}),[y]),(0,n(118884).X)((()=>{a(m)})),(0,c.jsx)(n(177158).A,{open:v.open,zIndex:e.overlayZIndex,origin:e.origin,trapFocus:!0,children:(0,c.jsx)(n(545805).A,{debugName:"Modal",capture:e.open,onEsc:t=>{e.onDismiss&&e.onDismiss(t)},children:(0,c.jsx)(l().A,{tag:g,visible:e.open,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},forceCompositeLayer:!0,config:{duration:b?0:void 0},onAnimationEnd:()=>{return n=t,o=f,i=e.onClosed,void(n?o.setState({open:!0,openAnimationCompleted:!0,closeAnimationCompleted:!0}):(o.setState({open:!1,openAnimationCompleted:!0,closeAnimationCompleted:!0}),null==i||i()));var n,o,i},open:e.open,keepFocus:e.keepFocus,disableAnimation:b,showCloseIcon:e.showCloseIcon,onDismiss:e.onDismiss,isWaxPaper:e.isWaxPaper,ariaLabel:e.ariaLabel,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,innerStyle:e.innerStyle,render:e.render,preventHideChildrenWhileOpening:e.preventHideChildrenWhileOpening,style:e.style,className:e.className,backgroundStyle:e.backgroundStyle,store:f,isWash:e.isWash,transitionAppearance:u})})})};function u(e,t){return{width:"100vw",height:"100vh",position:"fixed",top:0,left:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:e?"auto":"none",...t}}function p(e){let{render:t,disableAnimation:n,preventHideChildrenWhileOpening:o,store:r}=e;const a=(0,i().uB)(r,s().A),l=(0,i().K8)((()=>a.state.openAnimationCompleted),[a]),d=(0,i().K8)((()=>t()),[t]);return n||l||o?(0,c.jsx)(c.Fragment,{children:d}):null}const m=o.forwardRef((function(e,t){let{showCloseIcon:o,onDismiss:r,isWaxPaper:a,isWash:l,ariaLabel:d,ariaLabelledBy:u,ariaDescribedBy:m,style:g,render:f,disableAnimation:v,preventHideChildrenWhileOpening:h,store:_}=e;const b=(0,i().uB)(_,s().A),y=(0,n(575301).o_)(),S=(0,n(401497).IS)((e=>({dialog:{position:"relative",zIndex:1,boxShadow:e.shadowLG,borderRadius:12,overflow:"hidden",marginBottom:y,...g,background:a?e.popoverWaxPaperBackground:l?e.surface.wash:e.surface.elevated,backdropFilter:a?"blur(40px)":"none",WebkitBackdropFilter:a?"blur(40px)":"none"}})),[y,g,a,l]);return(0,c.jsxs)("div",{"aria-modal":!0,role:"dialog",className:"notion-dialog",tabIndex:-1,"aria-label":d,"aria-labelledby":u,"aria-describedby":m,style:S.dialog,ref:t,children:[o&&(0,c.jsx)(n(581495).Rz,{onClick:r}),(0,c.jsx)(p,{render:f,disableAnimation:v,preventHideChildrenWhileOpening:h,store:b})]})})),g=o.forwardRef((function(e,t){let{open:o,keepFocus:i=!1,disableAnimation:r,showCloseIcon:a,onDismiss:s,isWaxPaper:d,isWash:p,ariaLabel:g,ariaLabelledBy:f,ariaDescribedBy:v,innerStyle:h,render:_,preventHideChildrenWhileOpening:b,style:y,className:S,backgroundStyle:w,transitionAppearance:k,store:I}=e;const x=(0,n(140862).A)(i),A=function(e){switch(e){case"none":return{animate:{},initial:{},exit:{}};case"modal":return{animate:{scale:1},initial:{scale:.97},exit:{scale:.97}};case"full-screen":return{initial:{translateY:5,opacity:0},animate:{translateY:0,opacity:1},exit:{opacity:0},config:{duration:650,timingFunction:"ease-in-out"}};default:(0,n(534177).HB)(e)}}(k),C=r?(0,c.jsx)(m,{showCloseIcon:a,onDismiss:s,isWaxPaper:d,isWash:p,ariaLabel:g,ariaLabelledBy:f,ariaDescribedBy:v,style:h,render:_,disableAnimation:r,preventHideChildrenWhileOpening:b,store:I}):(0,c.jsx)(l().A,{tag:m,visible:o,...A,forceCompositeLayer:!0,showCloseIcon:a,onDismiss:s,isWaxPaper:d,isWash:p,ariaLabel:g,ariaLabelledBy:f,ariaDescribedBy:v,style:h,render:_,disableAnimation:r,preventHideChildrenWhileOpening:b,store:I});return(0,c.jsxs)("div",{style:u(o,y),...x,className:S,ref:t,children:[(0,c.jsx)(n(552713).B,{backgroundStyle:w,onDismiss:s}),C]})}))},678553:(e,t,n)=>{n.d(t,{Ay:()=>v,CU:()=>A,nd:()=>b,pg:()=>y,w4:()=>M});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(955825),s=()=>n(906380),l=()=>n(29037),c=()=>n(349679),d=()=>n(496603),u=()=>n(284371),p=()=>n(722872),m=()=>n(8980),g=n(474848);function f(e,t){const a=(0,i().v3)(),s=P(),l=(0,r().DP)(),c=(0,o.useContext)(p().xu),d=(0,p().Tf)(),{inline:u}=e,m=Boolean(e.icon||e.left),f=Boolean(e.right),v={marginLeft:h({defaultValue:d&&m?0:e.itemMarginLeft,isDesktopLayout:s,hasSideItem:m}),marginRight:h({defaultValue:d&&f?0:e.itemMarginRight,isDesktopLayout:s,hasSideItem:f}),minWidth:0,flex:"auto",...e.dontShrinkTitle&&{flex:"none"},...e.disabled&&{opacity:.3},...s&&e.desktopTitleStyle,...u&&{display:"inline-flex",alignItems:"center"},...e.textWrapperStyle},b=(0,n(847249).K8)((()=>(0,n(805025).Iz)({environment:a,theme:l,caption:e.caption,title:e.title,inline:e.inline,allowTextSelection:e.allowTextSelection,loading:e.loading,style:e.style,menuContext:c,isDesktopLayout:s,shouldRenderMobileRefresh:d})),[a,c,e.allowTextSelection,e.caption,e.inline,e.loading,e.style,e.title,l,s,d]),y=()=>e.title&&(0,g.jsx)(_,{title:e.title,shouldWrapTitle:e.shouldWrapTitle,inlineCaptionMinWidthPercentage:e.inlineCaptionMinWidthPercentage,isTokenTitle:e.isTokenTitle,inline:e.inline,titleStyle:e.titleStyle});return(0,g.jsxs)("div",{ref:t,style:b,onClick:e.onClick,onMouseMove:e.onMouseMove,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onMouseDown:e.onMouseDown,onContextMenu:e.onContextMenu,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd,onTouchCancel:e.onTouchCancel,onAuxClick:e.onAuxClick,children:[e.showDragHandle&&(0,g.jsx)(n(57232).A,{iconSize:s?12:14,disabled:e.dragHandleDisabled}),e.left&&(0,g.jsx)(w,{left:e.left,style:e.leftStyle,body:e.body,caption:e.caption,shouldRenderMobileRefresh:d}),e.icon&&(0,g.jsx)(S,{icon:e.icon,caption:e.caption,body:e.body,shouldWrapTitle:e.shouldWrapTitle,alignIconTop:e.alignIconTop,inline:e.inline,dontShrinkIcon:e.dontShrinkIcon,disabled:e.disabled,desktopIconStyle:e.desktopIconStyle,mobileIconStyle:e.mobileIconStyle,shouldRenderMobileRefresh:d}),e.loading?(0,g.jsx)(n(331542).A,{}):(0,g.jsxs)("div",{style:v,children:[e.badge?(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[y(),e.badge]}):y(),e.caption&&(0,g.jsx)(A,{caption:e.caption,inline:e.inline,shouldWrapCaption:e.shouldWrapCaption,spacerStyle:e.spacerStyle,captionStyle:e.captionStyle}),e.body&&(0,g.jsx)(T,{body:e.body,bodyStyle:e.bodyStyle})]}),e.right||e.isChecked?(0,g.jsx)(k,{right:e.isChecked?(0,g.jsx)(M,{disabled:e.disabled,visible:e.isChecked}):e.right,dontShrinkRight:e.dontShrinkRight,rightStyle:e.rightStyle,body:e.body}):void 0,e.showExtensionArrow&&(0,g.jsx)(C,{extensionArrowStyle:e.extensionArrowStyle})]})}const v=o.forwardRef(f);function h(e){return void 0!==e.defaultValue?e.defaultValue:e.isDesktopLayout?0:e.hasSideItem?10:16}function _(e){let{title:t,shouldWrapTitle:n,inlineCaptionMinWidthPercentage:o,isTokenTitle:i,inline:r,titleStyle:s}=e;const l=n?void 0:u().RC,c=d().qE(o??0,0,100),p=(0,a().AH)(i?{display:"flex"}:l,r&&{flexShrink:0,maxWidth:`${Math.floor(100-c)}%`},{...s});return(0,g.jsx)("div",{...p,children:t},"title")}const b=28,y=20;function S(e){let{icon:t,caption:n,body:o,shouldWrapTitle:i,alignIconTop:r,inline:a,dontShrinkIcon:s,disabled:l,desktopIconStyle:c,mobileIconStyle:d,shouldRenderMobileRefresh:u}=e;const p={display:"flex",alignItems:"center",justifyContent:"center",marginLeft:u?12:20,marginRight:u?10:4,...u&&{minHeight:24,minWidth:24},...d},m={...P()?{display:"flex",alignItems:"center",justifyContent:"center",minWidth:20,minHeight:20}:p,...(r||(n||o||i))&&{marginTop:u?9:1,alignSelf:a?"center":"flex-start"},...s&&{flex:"none"},...l&&{opacity:.3},...c};return(0,g.jsx)("div",{style:m,children:t},"icon")}function w(e){let{left:t,style:n,body:o,caption:i,shouldRenderMobileRefresh:r}=e;const a={marginLeft:P()?0:20,marginRight:"auto",minWidth:0,flexShrink:0};return(0,g.jsx)("div",{style:{...a,...n,...(o||i)&&{alignSelf:"flex-start",marginTop:r?12:3}},children:t},"left")}function k(e){let{right:t,dontShrinkRight:n,rightStyle:o,body:i}=e;const r=P();return(0,g.jsx)("div",{style:{...r?x:I,...n&&{flex:"none"},...o||{},...i&&{alignSelf:"flex-start",marginTop:3}},children:t},"right")}const I={marginLeft:"auto",marginRight:16,minWidth:0,flexShrink:0},x={marginLeft:"auto",minWidth:0,flexShrink:0};function A(e){let{caption:t,inline:n,shouldWrapCaption:o,spacerStyle:i,captionStyle:a}=e;const s=P(),l=(0,r().IS)((e=>({captionStyle:{...u().RC,color:e.text.secondary,marginTop:2,fontSize:s?12:14},inlineSpacerStyle:{fontSize:s?12:14,...i,...u().RC,color:e.text.quaternary,marginTop:0,marginLeft:"0.5em",marginRight:"0.5em"}})),[s,i]);return(0,g.jsxs)("div",{style:{...l.captionStyle,whiteSpace:o?"normal":"nowrap",...n&&{display:"inline-flex",marginTop:0},...a},children:[n&&t&&(0,g.jsx)("span",{style:l.inlineSpacerStyle,children:"—"}),t]},"caption")}function C(e){let{extensionArrowStyle:t}=e;const n=P(),o=(0,r().IS)((e=>({desktop:{flexShrink:0,...t},mobile:{marginRight:16,flexShrink:0,...t}})),[t]);return(0,g.jsx)("div",{style:n?o.desktop:o.mobile,children:(0,g.jsx)(m().I,{icon:s().x,size:"sm",color:"secondary"})},"extension")}function T(e){let{body:t,bodyStyle:n}=e;const o=P(),i=(0,r().IS)((e=>({body:{marginTop:4,fontSize:o?u().J.UISmall.desktop:u().J.UISmall.mobile,color:e.text.secondary,overflowWrap:"break-word",...n}})),[n,o]);return(0,g.jsx)("div",{style:i.body,children:t},"body")}function M(e){let{disabled:t,visible:n}=e;const o=P(),i=(0,r().IS)((e=>({icon:{opacity:n?1:0}})),[n]);return(0,g.jsx)(m().I,{icon:o?c().checkmarkSmallIcon:l().checkmarkIcon,size:o?"sm":"default",color:t?"tertiary":void 0,style:i.icon})}function P(){const{isPhone:e}=(0,i().Y0)();return!(0,p().Tf)()&&!e}},679156:(e,t,n)=>{n.d(t,{$9:()=>u,Ip:()=>h,JV:()=>d,JW:()=>l,KY:()=>_,NX:()=>c,Ug:()=>f,Y:()=>p,Yr:()=>i,hQ:()=>s,hi:()=>r,mm:()=>a,nq:()=>v,pn:()=>m,ty:()=>g});var o=()=>n(989423);function i(e,t){o().vd(e,"legacy_transclusion_autofix",t)}function r(e,t){o().vd(e,"legacy_transclusion_duplication_fix",t)}function a(e,t){o().vd(e,"transaction_timestamp_collision",t)}function s(e,t){o().vd(e,"transaction_timestamp_regression",t)}function l(e,t){o().vd(e,"transaction_race_hazard",t)}function c(e,t){o().vd(e,"transaction_async_data_loss",t)}function d(e,t){o().vd(e,"transaction_deadlock_warning",t)}function u(e,t){o().vd(e,"transaction_too_large",t)}function p(e,t){o().vd(e,"transaction_queue_error_show",t)}function m(e){o().vd(e,"connection_error_show",{})}function g(e,t){o().vd(e,"connection_error_indicator_details_show",t)}function f(e,t){o().vd(e,"low_storage_error_show",t)}function v(e,t){o().vd(e,"transaction_queue_healthcheck",t)}function h(e,t){o().vd(e,"save_edits_error_modal_show",t)}function _(e,t){o().vd(e,"unsaved_transaction_error",t)}},679596:(e,t,n)=>{n.d(t,{G:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("pdf",{viewBox:"0 0 23.5 23.5",svg:(0,o.jsx)("path",{d:"M8.61 10.922a.44.44 0 01-.313-.11.422.422 0 01-.117-.312.9.9 0 01.054-.273l1.07-2.985c.12-.354.342-.531.665-.531.338 0 .568.177.687.531l1.07 2.985c.032.114.047.205.047.273a.44.44 0 01-.109.313c-.073.072-.18.109-.32.109-.219 0-.365-.133-.438-.399l-.242-.68H9.281l-.226.68c-.068.266-.216.399-.446.399zm.85-1.75h1.032L10 7.609h-.047l-.492 1.563zm3.657-1.11a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.257.14-.351a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.359a.487.487 0 01-.36.14h-2.195zm0 2.618a.514.514 0 01-.367-.14.503.503 0 01-.14-.36c0-.14.046-.258.14-.352a.514.514 0 01.367-.14h2.195a.477.477 0 01.5.492c0 .14-.046.26-.14.36a.487.487 0 01-.36.14h-2.195zm-4.953 6.234V13.25c0-.333.089-.583.266-.75.182-.172.435-.258.758-.258h5.632c.677 0 1.016.336 1.016 1.008v3.586h-.547l-1.492-1.719a.58.58 0 00-.242-.172.84.84 0 00-.282-.047c-.177 0-.348.073-.515.22l-1.547 1.366-.617-.562a.68.68 0 00-.461-.188.617.617 0 00-.438.188l-.984.992h-.547zm2.492-1.797a.78.78 0 00.57-.242.78.78 0 00.243-.57c0-.23-.081-.42-.242-.57a.823.823 0 00-.57-.243.737.737 0 00-.579.227.812.812 0 00-.234.586c0 .218.078.409.234.57a.79.79 0 00.578.242zm-5.36 2.64V5.97c0-.839.214-1.474.641-1.907.428-.437 1.06-.656 1.899-.656h8.32c.839 0 1.472.219 1.899.656.427.433.64 1.068.64 1.907v11.789c0 .844-.213 1.482-.64 1.914-.427.432-1.06.648-1.899.648h-8.32c-.839 0-1.471-.216-1.899-.648-.427-.432-.64-1.07-.64-1.914zm1.54-.093c0 .36.094.635.281.828.188.193.472.29.852.29h8.062c.38 0 .664-.097.852-.29.187-.193.281-.469.281-.828V6.07c0-.364-.094-.643-.281-.836-.188-.198-.471-.296-.852-.296H7.97c-.38 0-.664.098-.852.296-.187.193-.281.472-.281.836v11.594z"})})},679616:(e,t,n)=>{n.d(t,{B1:()=>a,Ln:()=>i,bd:()=>s,dA:()=>r,uI:()=>l});const o={selfServeBusinessTrialsActions:new(n(645873).O2)("selfServeBusinessTrialsActions",(()=>Promise.all([n.e(58550),n.e(11341),n.e(7520)]).then(n.bind(n,922442))))},i=d(c("openSelfServeBusinessTrialStartModal")),r=(d(c("closeSelfServeBusinessTrialStartModal")),d(c("openSelfServeBusinessTrialExplorePlanModal"))),a=(d(c("closeSelfServeBusinessTrialExplorePlanModal")),d(c("openSelfServeBusinessTrialLossAversionModal"))),s=d(c("closeSelfServeBusinessTrialLossAversionModal")),l=d(c("openSelfServeBusinessTrialEndingModal"));d(c("closeSelfServeBusinessTrialEndingModal")),d(c("createSelfServeBusinessTrial"));async function c(e){return await o.selfServeBusinessTrialsActions.load().then((t=>t[e]))}function d(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.then((e=>e(...n)))}}},679924:(e,t,n)=>{n.d(t,{v:()=>te});n(898992),n(803949);var o=()=>n(837788);function i(e){return n=["user_id","device_id"],(t=e)?(n.forEach((e=>{e in t&&(t[e]=t[e]?t[e].replace(/-/g,""):void 0)})),(0,o().A)(t,"ignore-class-instances")):t;var t,n}var r=()=>n(893820),a=()=>n(857639),s=()=>n(206267),l=()=>n(496603),c=()=>n(227440),d=()=>n(508496),u=()=>n(313462),p=()=>n(506671),m=(n(944114),n(354520),n(672577),n(581454),n(737550),()=>n(885443)),g=()=>n(945610),f=()=>n(68263),v=()=>n(677338),h=()=>n(498212),_=()=>n(534177),b=()=>n(196286),y=()=>n(22102),S=()=>n(186445),w=()=>n(529543),k=()=>n(250182),I=()=>n(475133),x=()=>n(79059),A=()=>n(108944),C=()=>n(747100),T=()=>n(731320),M=()=>n(627506),P=()=>n(875856),B=()=>n(792415),R=()=>n(351360),E=()=>n(712505),D=()=>n(630116),N=()=>n(543491),L=()=>n(749240),O=()=>n(271584),U=()=>n(329418),F=()=>n(233996),V=()=>n(455968),j=()=>n(449918),z=()=>n(42772),H=()=>n(599824);async function W(e,t,n){const o=await(0,F().w)(e),{preboot:i,dontWait:r}=n||{},a="currentUser"in e;r||i||!a||await async function(e){e.currentUser.isLoggedIn()&&R().default.state.mainEditorCurrentBlockStore&&(await R().default.waitUntil((()=>Boolean(R().default.state.mainEditorCurrentBlockStore&&R().default.state.mainEditorCurrentBlockStore.isReady))),R().default.state.currentSpaceStore&&await L().subscriptionDataStoreInstance.waitUntilLoaded());P().default.shouldRefresh(e.currentUser.id)&&await(0,H().E)(e)}(e);const s=!r&&a?await(0,M()._)(e):void 0,c=(0,j().e)(),{currentUserStore:d,currentSpaceStore:u}=R().default.state,p=(0,I().getMobileNativeDeviceInfo)(),v=(0,x().getMobileNativeSessionInfo)(),b=await(0,k().getDesktopDeviceInfo)(),N=await async function(e,t){const n=await(0,w().hasPermissionForThirdPartyService)("amplitude",e),o=(0,m().B6)(t);return{is_user_consent_to_track:n,tid:o}}(e,t),U=await async function(){const e=E().default.state,t=C().m3(),n=S().ao();if(n){const o=T().i0(n).map((e=>{let{permissionItem:t}=e;return t})),i=o.find((e=>"public_permission"===e.type)),r=o.find((e=>"space_permission"===e.type)),a=o.filter((e=>J(e)&&(0,f().h9)(e.role))),s=o.filter((e=>J(e)&&(0,f().p2)(e.role))),c=await async function(e){const t=await y().k.load(),n=A().fU(e),o=[],i=l().Bq(n.map((e=>{if(e instanceof D().h4)return;const n=e.getCopiedFromPointer();return n&&t.isTemplate(n)&&o.push(n.id),o})).filter(_().O9));return i}(n),d=Boolean(c)&&c.length>0,u=e.open?void 0:R().default.state.currentCollectionViewStore,{publicPageData:p}=B().A.state,m=await y().k.load(),v=n.getCopiedFromPointer();let b;return b=o.some(f().Ny)?"deleted_from_trash":n.pathIsDead()?"in_trash":"live",{page_id:n.id,page_public_role:i?i.role:g().v,page_space_role:r?r.role:g().v,page_all_collaborator_count:s.length+a.length,page_editor_collaborator_count:s.length,page_read_only_collaborator_count:a.length,page_content_count:n.getContentLength(),page_current_user_role:n.getRole(),page_is_peek:t,page_copied_from:v?(0,h().ot)(v.id):void 0,page_is_notion_template:!!v&&m.isTemplate(v),page_is_public_share_link:i?i.is_public_share_link:void 0,page_is_site:i?i.is_site:void 0,page_is_template:n.isTemplate(),page_is_prepopulated:d,page_prepopulated_template_ids:c,page_is_database:n.isCollectionView(),page_view_type:u?u.getType():void 0,page_user_has_explicit_access:p?p.userHasExplicitAccess:g().v,page_deletion_status:b}}}(),W=(null==s?void 0:s.space_id)||void 0;return{data:{...G(),...o,...s,...U,...(0,V().U)(),...$(),...K(),client_initialization_id:O().d,...q({userId:null==d?void 0:d.id,spaceId:null==u?void 0:u.id}),...b,...p,...v,...c,...N,...Z(),...(Y={spaceId:W,userId:(0,z().m)(),deviceId:o.device_id,eventName:t},{unique_event_marker:Q(Y)}),...X(),hardware_concurrency:navigator.hardwareConcurrency,hardware_memory:navigator.deviceMemory},spaceId:null==s?void 0:s.space_id};var Y}function q(e){const{userId:t,spaceId:n}=e;if(!t||!n)return;const o=(0,U().g)({userId:t,spaceId:n});return o?{notion_session_id:o.id,notion_session_start_ts:o.sessionStartTime,tab_id:(0,v().x0)(),tab_count:(0,b().D)()}:void 0}function K(){const e=N().A.state;if(e)return{queryId:e.queryId}}function G(){const{currentSpaceViewStore:e}=R().default.state;return e&&e.isDefined()?{notify_desktop:e.getNotifyDesktop(),notify_email:e.getNotifyEmail(),notify_mobile:e.getNotifyMobile(),notify_email_digest:e.getNotifyEmailDigest()}:{}}function $(){const{mainEditorCurrentBlockStore:e}=R().default.state;if(e){const t=A().Uo(e);if(t)return{team_id:(0,h().Xw)(t.id)}}return{}}const Y={};function Q(e){const{spaceId:t,userId:n,deviceId:o,eventName:i}=e,r=(0,h().gB)(`${t}:${n}:${o}:${i}`),a=Y[r],s=Date.now();if(!a)return Y[r]=s,!0;const l=new Date(a),c=new Date(s);return l.getUTCDate()!==c.getUTCDate()?(Y[r]=s,!0):void 0}function Z(){let e;return d().default.state.isLoaded&&(e=d().default.getStatsigExperimentsMap()),{experiments:e,experimentStoreLoaded:d().default.state.isLoaded}}function X(){if(navigator.connection)return{net_downlink:navigator.connection.downlink,net_effective_type:navigator.connection.effectiveType,net_rtt:navigator.connection.rtt,net_save_data:navigator.connection.saveData}}function J(e){return"user_permission"===e.type}n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const ee=new Set(["page_visit","add_comment","add_reaction","create_block_discussion","create_inline_discussion","edit_comment","edit_existing_suggestion","resolve_discussion","create_view","edit_block_property_60","drag","edit_block_text_60","insert_mention_from_mention_menu","rich_text_menu_click","todo_block_check","create_block","block_action","initial_page_render","navigation_page_render","initial_database_items_visible","webview_termination","app_open","app_close","navigation","offline_access_failure","sidebar.initial_render","offline_image_load_failure"]);async function te(e,t,n,m){try{if(!c().A.state.online&&!ee.has(t)&&d().default.checkGate({gateName:"offline_log_allowlist"}))return;const a=(null==m?void 0:m.sampling)||{behavior:"statsig",fallbackBehavior:"custom",fallbackSampleRate:1},f=await(0,p().d)({eventName:t,eventProperties:n,sampling:a});if(!f)return;0;const{data:v,spaceId:h}=await W(e,t,m),_={eventName:t,eventData:{...i((0,o().A)(l().mg({...n,...v,...null==m?void 0:m.forceOverrideAutomaticEventData,sample_decision:f}),"ignore-class-instances")),__context:{locale:v.preferred_locale,page:{referrer:window.document.referrer,search:window.location.search}},sharedUUID:s().JW()},spaceId:h};r().nY(_);var g;if((0,u().I)()&&console.log(`trackAnalytics:%c ${t}`,"font-weight: bold;",n),e.device.isMobileNative&&d().default.checkGate({gateName:"debug_analytics"}))null===(g=e.mobileNative)||void 0===g||g.debugLog(`🦁 analytic event: ${t} | ${JSON.stringify(n)}`)}catch(f){a().log({level:"error",from:"analyticsHelpers",type:"trackAnalytics",data:{eventName:t,miscDataToConvertToString:{e:f}}})}}},680026:(e,t,n)=>{n.d(t,{$L:()=>u,EV:()=>s,PZ:()=>d,dp:()=>l,xm:()=>c});n(944114);var o=()=>n(798880),i=()=>n(100622),r=()=>n(496603),a=()=>n(720665);function s(e){if(null!=e&&e.blockId)return e.blockId}function l(e,t){const n=e.currentUser.id;return t.userId===n||t.present}function c(e){var t;return(null===(t=e.state.rootStore)||void 0===t?void 0:t.canEdit())??!1}function d(e){const{pageVisitStore:t,presenceStore:n}=e,{remotePresenceData:o}=n.state;let i=[];o&&r().uk(o,(e=>{null!=e&&e.userId&&i.push(e)}));const{pageId:s,lastViewTime:l,lastExitTime:c,totalCount:d,hasMore:u,...p}=t.state;return r().uk(p,(e=>{e.isDefined()&&i.push({userId:e.getUserId(),activityTimestampNearestMinuteMs:(0,a().WY)(e.getVisitedAt()),present:!1})})),i=r().hS(i,(e=>e.userId)),r().Ul(i,(e=>{let{activityTimestampNearestMinuteMs:t}=e;return t?-t:0}))}function u(e){const{userId:t,theme:n}=e;return(0,o().MF)(t)?n.icon.secondary:(0,i().Nq)(t,n)}},680074:(e,t,n)=>{n.d(t,{FX:()=>a,R$:()=>l,YD:()=>r,iZ:()=>s});var o=()=>n(130382),i=()=>n(351360);function r(){const{currentUserSettingsStore:e,currentSpaceStore:t}=i().default.state,n=(null==e?void 0:e.getSettings())||{},o=null==t?void 0:t.getPlanType();return"professional"===n.domain_type&&"team"===o}function a(){const{currentUserSettingsStore:e}=i().default.state;return((null==e?void 0:e.getSettings())||{}).domain_type}function s(e){const t=e.getSettings(),n=null==t?void 0:t.signup_time;return n?(0,o().Mn)(n):null}function l(e){const{currentUserSettingsStore:t}=i().default.state;if(t&&t.id===e.currentUser.id)return t}},680141:(e,t,n)=>{n.d(t,{Y:()=>o});const o=["collections_xws","formulas_batch_generator_changes"]},681445:(e,t,n)=>{n.d(t,{S:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}open(e){const{collectionViewBlockId:t,collectionViewId:n}=e;this.setState({isOpen:!0,type:"ai_ephemeral_view",collectionViewBlockId:t,collectionViewId:n})}openCollectionDrilldownView(e){const{collectionViewBlockStore:t,collectionViewValue:n,viewsModuleContext:o,title:i}=e;this.setState({isOpen:!0,type:"chart_drilldown",collectionViewBlockStore:t,collectionViewValue:n,viewsModuleContext:o,title:i})}close(){this.setState({isOpen:!1})}}const i=new o},681634:(e,t,n)=>{n.d(t,{c:()=>r});var o=()=>n(555776),i=()=>n(116008);function r(e){const t=i().A.state;t.open?(i().A.setState({open:!1,rect:t.rect}),o().A.reset()):i().A.setState({...t,from:void 0})}},682146:(e,t,n)=>{n.d(t,{ZU:()=>D,ag:()=>C,E5:()=>G,g2:()=>K,dD:()=>O,Jx:()=>N,wm:()=>L,gP:()=>U,to:()=>E,zY:()=>$,lO:()=>H,xm:()=>W,hn:()=>Y,Wp:()=>V,Kc:()=>X,yT:()=>F,qI:()=>j,i5:()=>Q,L6:()=>q,q7:()=>J,hU:()=>B,fE:()=>Z,dC:()=>M});n(16280),n(898992),n(823215),n(354520),n(672577),n(737550);var o=()=>n(700500),i=()=>n(443239),r=()=>n(970013),a=()=>n(713998),s=()=>n(601813),l=()=>n(202017),c=()=>n(575157),d=(n(296540),n(474848));const u={viewBox:"0 0 20 20",svg:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("path",{d:"M5.5 6.975a.55.55 0 1 0 0 1.1h5.85a.55.55 0 0 0 0-1.1zM6.525 10a.55.55 0 0 1 .55-.55h5.85a.55.55 0 1 1 0 1.1h-5.85a.55.55 0 0 1-.55-.55m1.9 1.925a.55.55 0 1 0 0 1.1h5.85a.55.55 0 0 0 0-1.1z"}),(0,d.jsx)("path",{d:"M4.5 4.125A2.125 2.125 0 0 0 2.375 6.25v7.5c0 1.174.951 2.125 2.125 2.125h11a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 15.5 4.125zM3.625 6.25c0-.483.392-.875.875-.875h11c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-11a.875.875 0 0 1-.875-.875z"})]})},p=(0,n(340498).wt)("viewTimeline",u);var m=()=>n(798880),g=()=>n(919709),f=()=>n(931075),v=()=>n(959013),h=()=>n(972435),_=()=>n(263711),b=()=>n(351360),y=()=>n(508496),S=()=>n(411671),w=()=>n(577437),k=()=>n(68465),I=()=>n(71304),x=()=>n(37433),A=()=>n(470928);const C=32,T=(0,v().YK)({title:{defaultMessage:"Title",id:"database.propertyTypeName.title"},text:{defaultMessage:"Text",id:"database.propertyTypeName.text"},number:{defaultMessage:"Number",id:"database.propertyTypeName.numberTypeLabel"},url:{defaultMessage:"URL",id:"database.propertyTypeName.url"},select:{defaultMessage:"Select",id:"database.propertyTypeName.selectTypeLabel"},multi_select:{defaultMessage:"Multi-select",id:"database.propertyTypeName.multi_select"},status:{defaultMessage:"Status",id:"database.propertyTypeName.status"},person:{defaultMessage:"Person",id:"database.propertyTypeName.person"},email:{defaultMessage:"Email",id:"database.propertyTypeName.email"},phone_number:{defaultMessage:"Phone",id:"database.propertyTypeName.phone_number"},date:{defaultMessage:"Date",id:"database.propertyTypeName.dateTypeLabel"},file:{defaultMessage:"Files & media",id:"database.propertyTypeName.file"},checkbox:{defaultMessage:"Checkbox",id:"database.propertyTypeName.checkbox"},formula:{defaultMessage:"Formula",id:"database.propertyTypeName.formula"},relation:{defaultMessage:"Relation",id:"database.propertyTypeName.relation"},rollup:{defaultMessage:"Rollup",id:"database.propertyTypeName.rollup"},created_time:{defaultMessage:"Created time",id:"database.propertyTypeName.created_time"},created_by:{defaultMessage:"Created by",id:"database.propertyTypeName.created_by"},last_edited_time:{defaultMessage:"Last edited time",id:"database.propertyTypeName.last_edited_time"},last_edited_by:{defaultMessage:"Last edited by",id:"database.propertyTypeName.last_edited_by"},last_visited_time:{defaultMessage:"Last visited time",id:"database.propertyTypeName.last_visited_time"},button:{defaultMessage:"Button",id:"database.propertyTypeName.button"},auto_increment_id:{defaultMessage:"ID",id:"database.propertyTypeName.auto_increment_id"},location:{defaultMessage:"Location",id:"database.propertyTypeName.location"},verification:{defaultMessage:"Verification",id:"database.propertyTypeName.verification"},ai_summary:{defaultMessage:"AI summary",id:"database.propertyTypeName.text.summarizeWithAi"},ai_custom_prompt:{defaultMessage:"AI custom autofill",id:"database.propertyTypeName.text.customPromptWithAI"},ai_extract:{defaultMessage:"AI key info",id:"database.propertyTypeName.text.extractInfoWithAI"},ai_translate:{defaultMessage:"AI translation",id:"database.propertyTypeName.text.translateWithAI"},ai_keywords:{defaultMessage:"AI keywords",id:"database.propertyTypeName.text.keywordsWithAI"},geo_point:{defaultMessage:"Geopoint",id:"database.propertyTypeName.geo_point"}}),M={title:h().A.formatMessage(T.title),text:h().A.formatMessage(T.text),number:h().A.formatMessage(T.number),url:h().A.formatMessage(T.url),select:h().A.formatMessage(T.select),multi_select:h().A.formatMessage(T.multi_select),status:h().A.formatMessage(T.status),person:h().A.formatMessage(T.person),email:h().A.formatMessage(T.email),phone_number:h().A.formatMessage(T.phone_number),date:h().A.formatMessage(T.date),file:h().A.formatMessage(T.file),checkbox:h().A.formatMessage(T.checkbox),formula:h().A.formatMessage(T.formula),relation:h().A.formatMessage(T.relation),rollup:h().A.formatMessage(T.rollup),created_time:h().A.formatMessage(T.created_time),created_by:h().A.formatMessage(T.created_by),last_edited_time:h().A.formatMessage(T.last_edited_time),last_edited_by:h().A.formatMessage(T.last_edited_by),last_visited_time:h().A.formatMessage(T.last_visited_time),button:h().A.formatMessage(T.button),auto_increment_id:h().A.formatMessage(T.auto_increment_id),location:h().A.formatMessage(T.location),verification:h().A.formatMessage(T.verification),ai_summary:h().A.formatMessage(T.ai_summary),ai_custom_prompt:h().A.formatMessage(T.ai_custom_prompt),ai_extract:h().A.formatMessage(T.ai_extract),ai_translate:h().A.formatMessage(T.ai_translate),ai_keywords:h().A.formatMessage(T.ai_keywords),geo_point:h().A.formatMessage(T.geo_point)};(0,v().YK)({text:{defaultMessage:"A single line of text.",id:"database.propertyTypeDescription.text"},number:{defaultMessage:"A number, with options to format as currency, percent, and more.",id:"database.propertyTypeDescription.numberTypeDescription"},url:{defaultMessage:"A link to a page on the web.",id:"database.propertyTypeDescription.url"},select:{defaultMessage:"Select from a list of options.",id:"database.propertyTypeDescription.selectDescription"},multi_select:{defaultMessage:"Tag with values from a list of options.",id:"database.propertyTypeDescription.multi_select"},status:{defaultMessage:"Tag with a list of custom options with groups",id:"database.propertyTypeDescription.status"},person:{defaultMessage:"Reference a person on your team.",id:"database.propertyTypeDescription.person"},email:{defaultMessage:"Reference an email address.",id:"database.propertyTypeDescription.email"},phone_number:{defaultMessage:"Reference a phone number.",id:"database.propertyTypeDescription.phone_number"},date:{defaultMessage:"A date, with options to format and include time.",id:"database.propertyTypeDescription.dateTypeDescription"},file:{defaultMessage:"Upload files and images.",id:"database.propertyTypeDescription.file"},checkbox:{defaultMessage:"Track status with a single checkbox.",id:"database.propertyTypeDescription.checkbox"},formula:{defaultMessage:"Compute a formula using other properties of a page.",id:"database.propertyTypeDescription.formula"},relation:{defaultMessage:"Allow pages in this database to reference pages in another.",id:"database.propertyTypeDescription.relation"},rollup:{defaultMessage:"Display and summarize data from a relation.",id:"database.propertyTypeDescription.rollup"},created_time:{defaultMessage:"Reference the date and time a page was created.",id:"database.propertyTypeDescription.created_time"},created_by:{defaultMessage:"Reference the person that created a page.",id:"database.propertyTypeDescription.created_by"},last_edited_time:{defaultMessage:"Reference the date and time a page was last edited.",id:"database.propertyTypeDescription.last_edited_time"},last_edited_by:{defaultMessage:"Reference the person that last edited a page.",id:"database.propertyTypeDescription.last_edited_by"},last_visited_time:{defaultMessage:"Reference the date and time a page was last visited by you.",id:"database.propertyTypeDescription.last_visited_time"},button:{defaultMessage:"A clickable button that can be configured to perform any action.",id:"database.propertyTypeDescription.button"},auto_increment_id:{defaultMessage:"An auto-increment ID.",id:"database.propertyTypeDescription.auto_increment_id"},location:{defaultMessage:"A location.",id:"database.propertyTypeDescription.location"},verification:{defaultMessage:"Verified status.",id:"database.propertyTypeDescription.verification"},geo_point:{defaultMessage:"A location on the map.",id:"database.propertyTypeDescription.geo_point"}});const P=["select","multi_select","status","person","date","created_time","created_by","last_edited_time","last_edited_by"];function B(e){return P.includes(e.type)}const R=(0,v().YK)({tableDisplayName:{defaultMessage:"Table",id:"collectionHelpers.table.displayName"},boardDisplayName:{defaultMessage:"Board",id:"collectionHelpers.board.displayName"},calendarDisplayName:{defaultMessage:"Calendar",id:"collectionHelpers.calendar.displayName"},listDisplayName:{defaultMessage:"List",id:"collectionHelpers.list.displayName"},galleryDisplayName:{defaultMessage:"Gallery",id:"collectionHelpers.gallery.displayName"},timelineDisplayName:{defaultMessage:"Timeline",id:"collectionHelpers.timline.displayName"},pageDisplayName:{defaultMessage:"Page",id:"collectionHelpers.page.displayName"},chartDisplayName:{defaultMessage:"Chart",id:"collectionHelpers.chart.displayName"},formEditorDisplayName:{defaultMessage:"Form",id:"collectionHelpers.formEditor.displayName"},chatDisplayName:{defaultMessage:"Chat",id:"collectionHelpers.chat.displayName"},customDisplayName:{defaultMessage:"Custom",id:"collectionHelpers.custom.displayName"},mapDisplayName:{defaultMessage:"Map",id:"collectionHelpers.map.displayName"}}),E={table:h().A.formatMessage(R.tableDisplayName),board:h().A.formatMessage(R.boardDisplayName),calendar:h().A.formatMessage(R.calendarDisplayName),list:h().A.formatMessage(R.listDisplayName),gallery:h().A.formatMessage(R.galleryDisplayName),timeline:h().A.formatMessage(R.timelineDisplayName),page:h().A.formatMessage(R.pageDisplayName),chart:h().A.formatMessage(R.chartDisplayName),form_editor:h().A.formatMessage(R.formEditorDisplayName),feed:"Feed",map:h().A.formatMessage(R.mapDisplayName),chat:h().A.formatMessage(R.chatDisplayName),custom:h().A.formatMessage(R.customDisplayName)},D={table:n(421559).T,board:n(969523).q,calendar:n(42583).D,list:l().n,gallery:n(858141).p,timeline:p,page:l().n,chart:n(979251).j,form_editor:c().docPlainTextIcon,feed:c().docPlainTextIcon,map:c().docPlainTextIcon,chat:n(859002).chatIcon,custom:c().docPlainTextIcon},N={table:void 0,board:"board_cover",calendar:void 0,list:void 0,gallery:"gallery_cover",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},L={table:void 0,board:"board_cover_size",calendar:void 0,list:void 0,gallery:"gallery_cover_size",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},O={table:void 0,board:"board_cover_aspect",calendar:void 0,list:void 0,gallery:"gallery_cover_aspect",timeline:void 0,page:void 0,chart:void 0,form_editor:void 0,feed:void 0,map:void 0,chat:void 0,custom:void 0},U={table:!0,board:!1,calendar:!1,list:!0,gallery:!0,timeline:!0,page:!1,chart:!0,form_editor:!1,feed:!1,map:!1,chat:!1,custom:!1};function F(e){const t=e.getType(),n=e.getTitleStore();return t&&(0,o().Ef)(t)&&n?n:e.getBlockTitleStore()}function V(e){let t=[];switch(e.viewType){case"table":t=e.format.table_properties??[];break;case"gallery":t=e.format.gallery_properties??[];break;case"board":t=e.format.board_properties??[];break;case"calendar":t=e.format.calendar_properties??[];break;case"list":t=e.format.list_properties??[];break;case"timeline":t=e.format.timeline_properties??[];break;case"page":t=e.format.collection_page_properties??[]}return t.filter((t=>t.visible===e.visible))}function j(e,t){let n=[];switch(t){case"gallery":e.gallery_properties&&(n=e.gallery_properties??[]);break;case"board":e.board_properties&&(n=e.board_properties??[])}const o=n.find((e=>{let{property:t}=e;return"title"===t}));return!!o&&Boolean(o.visible)}const z=["text","number","select","multi_select","status","date","person","file","checkbox","url","email","phone_number","formula","relation","rollup","created_time","created_by","last_edited_time","last_edited_by","button","auto_increment_id","location","verification","geo_point"];function H(e){let{collectionContextStore:t,environment:n}=e;const o=t.collectionStore();if(!o)return[];const i=S().A.getMode(n,o);return(0,k().jq)(n,i,o)?["ai_summary","ai_custom_prompt","ai_translate","ai_keywords"]:[]}function W(e){let{collectionContextStore:t,environment:n}=e;return z.filter((e=>{if("location"===e&&(!(0,x().isPersonalHomeEnabledForUser)()||"collectionTypedView"!==t.contextType))return!1;if("geo_point"===e)return y().default.checkGate({gateName:"geo_point_property"});if("verification"===e){var n,o;const e=Boolean(null===(n=t.collectionViewBlockStore())||void 0===n?void 0:n.isCollectionViewPageWithContent());if((0,A().Io)()&&!e)return!1;if(!e)return!1;const i=null===(o=t.collectionStore())||void 0===o?void 0:o.getSchema();if(!i||q(i,"verification"))return!1}return"auto_increment_id"!==e||!_().g.state.isOpen}))}function q(e,t){for(const o in e){var n;if((null===(n=e[o])||void 0===n?void 0:n.type)===t)return!0}return!1}function K(e){let{propertySchema:t,property:n,blockStores:o,collectionSchema:s,collectionStore:l,spaceStore:c}=e;if(0===o.length||!(0,a().Hz)(t))return!1;if((0,r().M1)(t)){if(l&&c){const e=l.isPageTreeCollection(),t=c.getModel(),n=t&&(0,f().Xi)(t);if(!e&&!n)return!1}return o.every((e=>G(t,e,s)))}return!(0,r().F_)(t.type)&&!(0,i().u)(n)}function G(e,t,n){const o=e.verifier_property;if(!o)return!1;const i=t.getPropertyValue(o),r=(0,a().e5)({textValue:i,propertySchema:n[o],blockCreatorPointer:t.getCreatedByPointer()}),s=b().default.state.currentUserRootStore;return!!s&&r.some((e=>e.id===s.id&&e.table===m().oo))}function $(e){const{collectionStore:t,environment:n,intl:o,queryForFilter:i}=e;if(""===i)return!0;return(0,I().tS)({environment:n,intl:o,store:t}).toUpperCase().includes(i.toUpperCase())}function Y(e){let{environment:t,spaceId:n,userId:o}=e;return(0,w().zD)(t,{name:"collection_property_autofill",spaceId:n,userId:o,amount:"unknown"})??!1}function Q(e){return"status"===e.type&&void 0!==e.defaultOption||"person"===e.type&&void 0!==e.default}function Z(e){const{collectionContextStore:t,newValue:n,property:o}=e,i=X(t),r=Object.keys(i).find((e=>{var t;return e!==o&&(null===(t=i[e])||void 0===t?void 0:t.name)===n}));return Boolean(r)}function X(e){const t=e.collectionStore();return t?t.getSchema():e.normalizedSchemaStore.state||{}}function J(e,t,n,o){var i;const r=n.getAssociatedCollectionStore();if(!r||"collection"!==r.table||!r.getSchema())return!1;if("text"!==(null===(i=(0,a()._g)({schema:r.getSchema(),property:o}))||void 0===i?void 0:i.type))return!0;return(0,g().qAZ)((0,s().l8)({discussionContextData:e.getContext()??[],discussionType:e.getType()??"default",discussionId:e.id,intl:t})).length===(0,g().qAZ)(n.getPropertyStore(o).getValue()).length}},682372:(e,t,n)=>{n.d(t,{F:()=>B});n(898992),n(672577);var o=n(296540),i=()=>n(908006),r=()=>n(847249),a=()=>n(919709),s=()=>n(534177),l=()=>n(921385),c=()=>n(415651),d=()=>n(495262),u=()=>n(778417),p=()=>n(725614),m=()=>n(753199),g=()=>n(962845),f=()=>n(969197),v=()=>n(906537),h=()=>n(792002),_=()=>n(963589),b=()=>n(301421),y=()=>n(393255),S=()=>n(397248),w=()=>n(861841),k=()=>n(77246),I=()=>n(732770),x=()=>n(712505),A=()=>n(502438),C=()=>n(24157);function T(){const e=(0,o.useRef)(void 0);return{xPosition:e,setArrowedPosition:()=>{e.current=function(){var e;const t=null===(e=v().get())||void 0===e?void 0:e.getClientRects();if(t){const e=t[t.length-1];if(e)return e.x}}()},setClick:t=>{e.current=t}}}var M=n(474848);function P(e){var t;const{canSelectAllBlocks:a,canSelectionDrag:s,disabled:f,disableDrag:y,disableEnter:k,disableHorizontalEdgeScroll:I,disableUpDownArrows:P,isDiscussionInput:B,onBlur:L,onClick:O,onContextMenu:U,topBottomPadding:F,store:V,disableTryCloseSidePeek:j=!1}=e,z=(0,n(484714).v3)(),H=(0,_().X)("editor_basic_rtl"),W=(0,_().X)("mobile_fix_ai_message_click"),q=(0,_().X)("improved_cursor_navigation_p2"),K=(0,o.useRef)(!0),G=(0,o.useRef)(!1),$=(0,o.useRef)(null),Y=(0,o.useRef)(null),{xPosition:Q,setArrowedPosition:Z,setClick:X}=T(),J=(0,n(872994).y)(),{closestSelectable:ee}=(0,o.useContext)(n(501020).z),te=null==ee||null===(t=ee.props)||void 0===t?void 0:t.store,ne=(0,o.useCallback)((()=>$.current?$.current:Y.current?Y.current.getNode():null),[]),oe=(0,r().K8)((()=>(0,h().j_)(V)),[V],{debugName:"isEditing"}),ie=(0,r().K8)((()=>(0,h().Jd)(V)),[V],{debugName:"isPartOfSelection"}),re=(0,o.useRef)(!1);(0,o.useEffect)((()=>{re.current&&!oe?null==L||L():oe&&(re.current=!0)}),[oe,L]),(0,o.useEffect)((()=>()=>{if("editing"!==C().default.state.mode)return;C().default.state.multiSelection.start.store.id!==V.id||b().n.findEditableWithStore(V)||p().clear({environment:z})}),[z,V]);const ae=(0,o.useCallback)((e=>{if(f)return;e.preventDefault();const t="empty"!==C().default.state.mode&&C().default.state.multiSelection;if(!t)return;const n=(0,g().ZS)({multiSelection:t,filterCommonAncestors:!0,focus:void 0});n?u().td({environment:z,...n}):null!=ee&&ee.props.canSelect&&u().td({environment:z,stores:[ee.props.store]})}),[z,f,ee]),se=(0,o.useCallback)((e=>{!f&&(0,l().kx)(e)&&p().arrowUpMultiText({event:e,environment:z,topBottomPadding:F,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,enableImprovedCursorNavigation:q})}),[z,f,F,null==J?void 0:J.contentEditableLeafRegistry,q]),le=(0,o.useCallback)((e=>{!f&&(0,l().kx)(e)&&p().arrowDownMultiText({event:e,environment:z,topBottomPadding:F,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,enableImprovedCursorNavigation:q})}),[z,f,F,null==J?void 0:J.contentEditableLeafRegistry,q]),ce=(0,o.useCallback)((e=>{if(f||!(0,l().kx)(e))return;const t=ne();H&&t&&"rtl"===getComputedStyle(t).direction?p().arrowRightMultiText({event:e,environment:z,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,editorMode:N(V,B),enableImprovedCursorNavigation:q}):p().arrowLeftMultiText({event:e,environment:z,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,enableImprovedCursorNavigation:q}),Z()}),[z,H,f,B,V,null==J?void 0:J.contentEditableLeafRegistry,ne,q,Z]),de=(0,o.useCallback)((e=>{if(f||!(0,l().kx)(e))return;const t=ne();H&&t&&"rtl"===getComputedStyle(t).direction?p().arrowLeftMultiText({event:e,environment:z,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,enableImprovedCursorNavigation:q}):p().arrowRightMultiText({event:e,environment:z,contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,editorMode:N(V,B),enableImprovedCursorNavigation:q}),Z()}),[z,H,f,B,V,null==J?void 0:J.contentEditableLeafRegistry,ne,q,Z]),ue=(0,o.useCallback)((e=>{f||(e.preventDefault(),p().selectAllTextMulti({environment:z,store:V,canSelectAllBlocks:a,contentEditableContextId:null==J?void 0:J.id}))}),[z,f,a,V,null==J?void 0:J.id]),pe=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),d().tN({environment:z})}),[z]),me=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),d().ZS({environment:z})}),[z]),ge=(0,o.useCallback)((e=>{D("start",e.shiftKey)}),[]),fe=(0,o.useCallback)((e=>{D("end",e.shiftKey)}),[]),ve=(0,o.useCallback)((e=>{e.shiftKey&&!oe&&te?(e.preventDefault(),u().Lt({environment:z,store:te,selectMode:u().tY(z)}),K.current=!1):K.current=!0}),[z,oe,te]),he=(0,o.useCallback)((e=>{if(w().Ay.state.isDragging)c().GB(z,{currentX:e.currentX,currentY:e.currentY});else if(e.shiftKey)n(592678).Zm()&&c().v7(z,{startX:e.startX,startY:e.startY,stores:A().default.state.stores,isNativeDrag:!1,getGhostElement:void 0});else{if(n(93658).default.state.isActive)return;if(!s||"mouse"!==e.device)return}const t=ne();if(!t)return;const o=S().fT(t.getBoundingClientRect(),20);S().ux(o,e.currentX,e.currentY)||null!=J&&J.tryEnableMultiSelection()&&(G.current=!0)}),[z,s,ne,J]),_e=(0,o.useCallback)((e=>{G.current&&(null==J||J.tryDisableMultiSelection(),G.current=!1),w().Ay.state.isDragging?c().eW({environment:z,analyticsFrom:"page_content",...n(496603).Up(e,["shiftKey","optionKey","commandKey"])}):p().clearForceExtendAnnotations()}),[z,J]),be=(0,o.useCallback)((()=>{w().Ay.state.isDragging&&(c().Pt(z),u().IU({environment:z}))}),[z]),ye=(0,o.useCallback)((()=>{const e=v().get(),t=(0,g().GI)({contentEditableLeafRegistry:null==J?void 0:J.contentEditableLeafRegistry,range:e,allowInvisibleEndSelection:(0,n(281322).r)().shift});t&&p().selectAndEditMultiSelection({...t,environment:z,readOnly:"infer",focus:void 0,xOverride:null==Q?void 0:Q.current,enableImprovedCursorNavigation:q})}),[z,null==J?void 0:J.contentEditableLeafRegistry,q,Q]),Se=(0,o.useCallback)((()=>{i().default.afterNextFlush(ye)}),[ye]),we=(0,o.useCallback)((e=>{(0,m().SQ)({event:e,context:m().y$.EditorClick,callback:()=>{if(null==O||O(e),!e.defaultPrevented)if(function(e){var t;if(!x().default.isSidePeekOpen())return!1;return null===(t=A().default.getDefaultContainerFromTarget(e))||void 0===t?void 0:t.isPeekRenderer()}(e.target)||j||n(661920).Cx(z),K.current){te?u().hc({environment:z,store:te}):(u().DN({stores:[]}),u().A({environment:z,phase:A().SelectionPhase.Selected,preventClearEditingText:!0})),q&&!z.device.isMobile&&X(e.clientX);try{var t;if(!z.device.isMobile)return;if(oe||ie)return;const o=ne();if(!o)return;let i;if((0,n(477450).v)(J,(()=>{o.classList.add("editor-force-select"),i=v().rangeFromPoint(e.clientX,e.clientY),o.classList.remove("editor-force-select")})),!i)return;const r=(0,n(921855)._S)(z,i);if(!r)return;p().setSelection({store:V,selection:r.selection,readOnly:W?f||(null===(t=Y.current)||void 0===t?void 0:t.isDisabled()):void 0}),r.forceEmitSelectionStore&&C().default.emit()}finally{Se()}}else K.current=!0}})}),[z,W,f,O,V,oe,ie,te,J,ne,Se,j,q,X]),ke=(0,o.useCallback)((e=>{if(!f)if(z.device.isMobile){if(!v().get())return;oe||u().hc({environment:z,store:te}),ye(),i().default.flush()}else(oe||"contain"!==e.endpoint)&&ye()}),[z,f,oe,te,ye]),Ie=(0,o.useCallback)((e=>{U&&(0,m().SQ)({event:e,context:m().y$.EditorContextMenu,callback:()=>{if(U(e),!e.defaultPrevented)return"unhandled"}}),(0,m().SQ)({event:e,context:m().y$.EditorContextMenu,callback:Se})}),[U,Se]);return(0,n(790748).b)(b().n,(()=>({props:e,contentEditableContext:J,getContentEditableLeaf:()=>Y.current||void 0,getNode:ne,getContextClosestSelectable:()=>ee,getContextClosestSelectableStore:()=>{var e;return null==ee||null===(e=ee.props)||void 0===e?void 0:e.store},handleClick:we})),[J,ee,ne,we]),(0,M.jsx)(n(11048).A,{name:"Editable",children:(0,M.jsx)(n(545805).A,{debugName:"Editable",capture:oe&&!f,onDelete:e.onDelete,onDeleteToEndOfLine:e.onDeleteToEndOfLine,onDeleteNextWord:e.onDeleteNextWord,onBackspace:e.onBackspace,onEnter:k?void 0:e.onEnter,onShiftEnter:e.onShiftEnter,onCommandEnter:e.onCommandEnter,onCommandShiftEnter:e.onCommandShiftEnter,onUp:P?void 0:e.onUp||se,onDown:P?void 0:e.onDown||le,onLeft:e.onLeft||ce,onRight:e.onRight||de,onCommandLeft:e.onCommandLeft,onCommandRight:e.onCommandRight,onTab:e.onTab,onUntab:e.onUntab,onSelectAll:e.onSelectAll||ue,onToggleUnderline:e.onToggleUnderline,onToggleHighlight:e.onToggleHighlight,onToggleBold:e.onToggleBold,onToggleItalics:e.onToggleItalics,onToggleStrike:e.onToggleStrike,onToggleCode:e.onToggleCode,onUndo:e.onUndo||pe,onRedo:e.onRedo||me,onEsc:e.onEsc||ae,onCut:e.onCut,onCopy:e.onCopy,onPaste:e.onPaste,onKeypress:e.onKeypress,onMoveUp:e.onMoveUp,onMoveDown:e.onMoveDown,onHome:Se,onEnd:Se,onGoToBeginningOfLine:e.onGoToBeginningOfLine||ge,onGoToEndOfLine:e.onGoToEndOfLine||fe,onGoForwardOneChar:Se,onGoBackwardOneChar:Se,children:(0,M.jsx)(n(603820).A,{cursor:"text",disabled:y,disableHorizontalEdgeScroll:I,enableAndroidContextMenu:f,onDraggableDragStart:ve,onDraggableDragMove:he,onDraggableDragEnd:_e,onDraggableDragCancel:be,render:t=>e.render((0,n(553965).A)(t,{leafRef:Y,wrapperRef:$,onClick:we,onContextMenu:Ie,onKeyDown:R,onDoubleClick:E}),ke,Boolean(oe))})})})}const B=o.memo(P,n(821062).A);function R(e){e.metaKey||e.ctrlKey||e.altKey||(0,y().BJ)(e.key)||I().A.setKeyboardMode(!0)}function E(e){(0,m().SQ)({event:e,context:m().y$.EditorDoubleClick,callback:()=>{}})}function D(e,t){const n=C().default.state;"empty"!==n.mode&&i().default.afterNextFlush((()=>{const{start:o,end:i}=n.multiSelection,r=o.store.getValue();if(r)switch(e){case"start":{const e=a().JWU({textValue:r,substring:"\n",ignoreCase:!1}).reverse().find((e=>{let{endIndex:t}=e;return t<=o.index})),n=(null==e?void 0:e.endIndex)??0,s={store:o.store,index:n};p().setMultiSelection({multiSelection:{start:s,end:t?i:s}});break}case"end":{const e=(0,h().s6)(i.store);if(!e)return;const n=a().JWU({textValue:r,substring:"\n",ignoreCase:!1}).find((e=>{let{startIndex:t}=e;return t>=i.index})),s=(null==n?void 0:n.startIndex)??e.endIndex,l={store:i.store,index:s};p().setMultiSelection({multiSelection:{start:t?o:l,end:l}});break}default:(0,s().HB)(e)}}))}function N(e,t){if(t)return"default";const n=(0,f().T)(e);return n?k().Uv.getMode(n):"default"}},683259:(e,t,n)=>{n.d(t,{D8:()=>D,Dh:()=>C,Pf:()=>R,Xt:()=>U,_z:()=>O,dX:()=>T,g8:()=>S,if:()=>x,in:()=>N,ki:()=>M,nZ:()=>E,q4:()=>I,sL:()=>k,tw:()=>B,vy:()=>A,wL:()=>w});n(944114),n(898992),n(354520),n(803949),n(581454);var o=()=>n(496603),i=()=>n(534177),r=()=>n(700500),a=()=>n(713998),s=()=>n(244149),l=()=>n(407730),c=()=>n(651124),d=()=>n(236162),u=()=>n(390066),p=()=>n(792071),m=()=>n(142748),g=()=>n(450648),f=()=>n(179034),v=()=>n(869558),h=()=>n(437607),_=()=>n(854150),b=()=>n(914462),y=()=>n(919709);function S(e){const{exportArgs:t,renderers:n}=e,{blockId:o,getRecordValue:i}=t,r=i({table:f().ev,id:o});if(!r)return;const a=r.type,s=e.renderers.blockRenderers[a];return s?s({block:r,exportArgs:t,renderers:n}):void 0}function w(e){const{exportArgs:t,renderers:n,ticker:o}=e,{blockId:i,getRecordValue:r,exportEmptyProperties:a}=t,s=r({table:f().ev,id:i});if(!s)return Promise.resolve(void 0);if(a){const e=(0,d().zN)({getRecordValue:r,block:s});if(e&&null!=e&&e.schema){s.properties=s.properties||{};for(const[t,n]of Object.entries(e.schema))t in s.properties||(s.properties[t]=[[" "]])}}const l=s.type,c=e.renderers.asyncBlockRenderers[l];return c?c({block:s,exportArgs:t,renderers:n,ticker:o}):Promise.resolve(void 0)}function k(e){const{schema:t,property:n,block:o,renderers:i,exportArgs:r}=e,s=t[n];if(!s)return;const l=(0,a().yQ)(o,n),c=e.renderers.propertyRenderers[s.type];return c?c({textValue:l,propertySchema:s,property:n,schema:t,block:o,renderers:i,exportArgs:r}):void 0}function I(e){const{annotation:t,children:n,exportArgs:o,renderers:i}=e,r=y()._XS(t),a=i.annotationRenderers[r];if(a)return a({annotation:t,children:n,exportArgs:o,renderers:i})}function x(e){return e.children}function A(e){const{textValue:t,exportArgs:n,renderers:i,fromString:r}=e,a=t?y().RQ(t):[];if(0===a.length)return[];const s=a.map((e=>{let t=r(y().N8A(e));const o=y().uPN(e),a=o.filter(y().iGj),s=o.filter((e=>!y().iGj(e)));for(const r of a)if(t=I({exportArgs:n,renderers:i,annotation:r,children:t}),t)break;for(const r of s)t=I({exportArgs:n,renderers:i,annotation:r,children:t});return t}));return o().oE(s)}function C(e){var t;const{blockModel:n,exportArgs:o}=e,{preferredViewMap:i,getRecordValue:r}=o,a=p().b4_.fromGetRecordValueFn(r),s=(null==i?void 0:i[n.id])??(null===(t=n.getCollectionViewIds())||void 0===t?void 0:t[0]);if(!s)return;const l=a({table:v().Gy,id:s,spaceId:n.getSpaceId()});if(!l)return;const c=l.getCollectionPointer(n);if(!c)return;const d=a(c);return d?{collectionViewModel:l,collectionModel:d}:void 0}function T(e){var t;const{blockModel:n,exportArgs:i,includeEmptyCollection:r}=e,{root:a,userTimeZone:d,intl:m,exportFilteredCollectionView:v,getRecordValue:h,getRecordsWithParent:_,experimentService:b,formulasModule:S}=i,w=p().b4_.fromGetRecordValueFn(h),k=C(e);if(!k)return;const{collectionViewModel:I,collectionModel:x}=k;let A=[];if(v){var T;const e=null===(T=i.collectionViewExportDataMap)||void 0===T||null===(T=T.get(n.id))||void 0===T?void 0:T.filteredIds;if(null==e||!e.length)return;for(const t of e){const e=h({table:f().ev,id:t,spaceId:n.getSpaceId()});e&&(e.alive||a.table===f().ev&&a.id===e.id)&&!e.is_template&&A.push(e)}}else A=_(f().ev,x.id).filter((e=>(e.alive||a.table===f().ev&&a.id===e.id)&&!e.is_template));if(!x||!r&&0===A.length)return;const M=x.getNormalizedSchema(),P=(0,u().L)(I.getFormat()||{},M,I.getRawQuery(),c().jf.Table),B=(P.table_properties||[]).filter((e=>!v||e.visible)).map((e=>e.property));B.includes("title")||B.unshift("title");const R={},E=null===(t=I.getRawQuery())||void 0===t?void 0:t.sort;if(E){const t=s().kX({userTimeZone:d,userId:void 0,intl:m,userSorts:E,apiSorts:[],schema:M,formulasModule:S}),n=A.map((e=>e.id)),o=new(s().z8)([...t,...s().e$([])]),i=new Map,r=new Map;A.forEach((t=>{o.updateBlock({block:p().Bj6.fromBlock(t),schema:M,propertyMapping:void 0,getRecordModel:p().b4_.fromGetRecordValueFn(h),resultCache:i,regExpCache:r,experimentService:b,collectionFeatureGates:e.exportArgs.collectionFeatureGates})}));s().bC(n,o).forEach(((e,t)=>{R[e]=t}))}else{(I.getPageSort()||[]).forEach(((e,t)=>{R[e]=t}))}const D=o().Ul(A,(e=>R.hasOwnProperty(e.id)?R[e.id]:e.created_time?e.created_time:1/0)),N={},O=B.map((e=>{const t=M[e],n=(null==t?void 0:t.name)||m.formatMessage(L.defaultNewProperty),o=Object.values(N);let i;return i=o.includes(n)?(0,l().A)(n,(e=>!o.includes(e))):n,N[e]=i,i}));return{schema:M,sortedBlocks:D,columnIdToName:N,columnIds:B,columnNames:O,collectionTitle:(0,g().r4)({intl:m,textValue:x.getName(),getRecordModel:w,userTimeZone:d,deterministic:!0}),collectionDescription:y().q4_(x.getDescription()),collectionViewName:I.getName(),sortingInfo:E,filteringInfo:P.property_filters,collectionId:x.id,collectionSpaceId:x.getSpaceId(),collectionViewId:I.id,collectionViewSpaceId:I.getSpaceId()}}function M(e){const{blockModel:t,exportArgs:n}=e,{getRecordValue:o}=n,r=p().b4_.fromGetRecordValueFn(o),a=t.getCollectionViewIds()||[];if(!a.length)return;return a.map((o=>{const i=r({table:v().Gy,id:o,spaceId:t.getSpaceId()});if(!i)return;const a=i.getCollectionPointer(t);if(!a)return;if(!r(a))return;return T({...e,exportArgs:{...n,preferredViewMap:{[t.id]:o}}})})).filter(i().O9)}function P(e){switch(e){case"letters":return"a";case"roman":return"i";default:return"1"}}function B(e){var t;const{block:n,exportArgs:o}=e,{getRecordValue:a}=o;let s,l=!0;const c=function(e,t){const n=null==t?void 0:t.content;if(n&&n.length>0){const o=n.findIndex((t=>t===e.id));if(-1!==o){if(0!==o)return{id:n[o-1],isParent:!1,index:-1};if((null==t?void 0:t.type)===r().xd.numberedList)return{id:e.parent_id,isParent:!0,index:0}}}return{id:void 0,isParent:!1,index:-1}}(n,a({table:f().ev,id:n.parent_id}));let d=c.index;var u;if(null!==(t=n.format)&&void 0!==t&&t.list_format&&(s=n.format.list_format,l=!1),!s)if(c.id&&null!==(u=o.numberedListCache[c.id])&&void 0!==u&&u.format){const e=o.numberedListCache[c.id];s=c.isParent&&e.inDefaultFormat?function(e){switch(e){case"numbers":return"letters";case"letters":return"roman";default:return"numbers"}}(e.format):e.format,e.inDefaultFormat||(l=!1)}else s="numbers";return-1===d&&(d=c.id&&o.numberedListCache[c.id]&&!c.isParent?o.numberedListCache[c.id].index+1:0),n.format&&(0,i().O9)(n.format.list_start_index)&&(d=n.format.list_start_index-1),o.numberedListCache[n.id]={index:d,format:s,inDefaultFormat:l},{index:d,format:P(s)}}function R(e){const{annotation:t,exportArgs:n}=e,o=y().FHi(t);if(!o)return;const{groupId:i,spaceId:r}=o,a=p().b4_.fromGetRecordValueFn(n.getRecordValue)({table:h().n,id:(0,h().T1)({spacePermissionGroupId:i,spaceId:r}),spaceId:r});return`@${(0,b().n)({intl:n.intl,permissionGroupModel:a})}`}function E(e){const{annotation:t,exportArgs:n}=e,o=y().FLg(t);if(!o)return;const{teamId:i,spaceId:r}=o,a=p().b4_.fromGetRecordValueFn(n.getRecordValue)({table:_().yK,id:i,spaceId:r});return`@${null==a?void 0:a.name}`}function D(e){const{block:t,exportArgs:n}=e,{getRecordValue:o,bulletedListCache:i}=n,r=t.format?t.format.bullet_list_format:void 0;if(t.parent_id in i)return{depth:i[t.parent_id].depth+1,list_format:r||i[t.parent_id].list_format};const a=o({table:f().ev,id:t.parent_id});if("bulleted_list"!==(null==a?void 0:a.type))return i[t.id]={depth:0,list_format:r},i[t.id];{const e=D({block:a,exportArgs:n});return{depth:e.depth+1,list_format:r||e.list_format}}}function N(e){return e.blockId===e.navigableBlockId&&!e.renderParentBlockId}const L=(0,n(959013).YK)({untitledTitle:{id:"exportRenderer.titleOfBlock.untitled",defaultMessage:"Untitled"},defaultNewProperty:{defaultMessage:"Property",id:"exportRenderer.titleOfNewProperty.property"}});function O(e){const{blockId:t,getRecordValue:n,userTimeZone:o,intl:i}=e,r=p().b4_.fromGetRecordValueFn(n),a=r({table:f().ev,id:t});return(null==a?void 0:a.getRenderTitle({getRecordModel:r,userTimeZone:o,intl:i}))||i.formatMessage(L.untitledTitle)}function U(e){const{blockId:t,root:n,getRecordValue:o,skipSelf:i}=e;for(const r of(0,m()._N)({table:f().ev,id:t},o)){if(r.table===f().ev&&p().Bj6.fromBlock(r.value).isNavigableBlock()&&(!i||r.value.id!==t))return r.value;if(r.table===n.table&&r.value.id===n.id)break}}},685781:(e,t,n)=>{n.d(t,{a:()=>d,j:()=>c});var o=()=>n(484714),i=()=>n(847249),r=()=>n(945382),a=()=>n(646736),s=()=>n(351360),l=()=>n(848237);function c(e){var t;let{entrypoint:n,userId:o,spaceStore:i}=e;const s=null==i?void 0:i.getModel();if(!o||!s)return!1;const c=null===(t=(0,a().sE)(i,o))||void 0===t?void 0:t.getModel();if(!c)return!1;return(0,r().fK)({space:s,spaceUser:c})&&l().Fj(n)}function d(e){const t=(0,o().v3)().currentUser.id;return(0,i().K8)((()=>{const{currentSpaceStore:n}=s().default.state;return c({entrypoint:e,spaceStore:n,userId:t})}),[t,e])}},685889:(e,t,n)=>{n.d(t,{$H:()=>T,AX:()=>S,B7:()=>P,D3:()=>N,D5:()=>y,Jq:()=>b,LQ:()=>D,OV:()=>A,TA:()=>M,WK:()=>O,d0:()=>_,m3:()=>L,me:()=>w,pg:()=>I,qw:()=>E,s2:()=>k,uf:()=>x,uu:()=>R,zF:()=>C});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454);var o=()=>n(970013),i=()=>n(407730),r=()=>n(617871),a=()=>n(651124),s=()=>n(416504),l=()=>n(390066),c=()=>n(945778),d=()=>n(792071),u=()=>n(527328),p=()=>n(534177),m=()=>n(895876),g=()=>n(33791),f=()=>n(878423),v=()=>n(630116),h=()=>n(342);const _=32;function b(e,t){return e.normalizedSchemaStore.state[t]}function y(e,t,n){const i=b(e,t);if(!i||"relation"!==i.type||!i.property)return!1;const r=e.collectionStore(),a=i.property===t&&(0,o().zO)(i)===(null==r?void 0:r.id);if(!n.isDefined())return!a;const s=n.getSchema();return o().rd({propertySchema:i,sourceCollectionId:null==r?void 0:r.id,property:t,targetCollectionSchema:s})}function S(e){const t=(0,p().WP)(e).find((e=>{let[t,n]=e;if(n&&(0,o().UU)(n))return n.connectedRelation.integration_id===r().ob}));if(t&&t[1]&&(0,o().UU)(t[1]))return t[1]}function w(e){return Boolean(S(e))}function k(e,t){if(!e)return!1;const n=e[t];return Boolean(n&&(0,o().UU)(n)&&n.connectedRelation.integration_id===r().ob)}function I(e,t){var n;if("relation"!==(null==t?void 0:t.type))return;const o=null===(n=f().A.state.caches[h().oB])||void 0===n?void 0:n.inMemoryRecordCache,i=null==t?void 0:t.collection_pointer,r=e.collectionViewBlockStore(),a=i&&r?v().md.createChildStore(r,i):void 0;return o?null==a?void 0:a.clone(o):a}function x(e){return(0,g().v)({collectionStore:e,collectionViewBlockStore:e.getParentBlockStore(),checkNavigableAncestorLocked:!1})}function A(e){const{inverseName:t,collectionStore:n,propertySchema:o,intl:i,targetCollectionStore:r,from:a}=e;return t||(n.isDefined()&&o?C(i,{sourceCollection:n.getModel(),isSelfRelation:n.id===r.id,targetCollectionStore:r,createUnique:!0,from:a}):"")}function C(e,t){var n;const{sourceCollection:o,isSelfRelation:r,targetCollectionStore:a,createUnique:l,from:u}=t,p=d().Bj6.fromCollection(o),g=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),f=null===(n=p.getRenderIcon({getRecordModel:d().b4_.constant(void 0)}))||void 0===n?void 0:n.icon,v=p.getRenderTitle({getRecordModel:a.getRecordModel,userTimeZone:(0,s().P)(),intl:e})||g,h=p.getDatabaseType();let _;if(r)if("subitem"===u){const t=(0,m().$O)(h,!0);_=e.formatMessage({defaultMessage:"Parent {item}",id:"relationHelpers.autoSelfRelationInverseToggle.typedName"},{item:t})}else _="timeline_arrows_by"===u?e.formatMessage({defaultMessage:"Blocked by",id:"relationHelpers.autoSelfRelationInverseArrow.name"},{sourceCollectionName:v}):e.formatMessage({defaultMessage:"Related back to {sourceCollectionName}",id:"relationHelpers.autoSelfRelationInverse.name"},{sourceCollectionName:v});else _=f&&(0,c().A)(f)?e.formatMessage({defaultMessage:"{sourceCollectionIcon} {sourceCollectionName}",id:"relationHelpers.autoInverseRelationWithIcon.name"},{sourceCollectionIcon:f,sourceCollectionName:v}):e.formatMessage({defaultMessage:"{sourceCollectionName}",id:"relationHelpers.autoInverseRelationSimple.name"},{sourceCollectionName:v});const b=a.getSchema();return b&&l?(0,i().A)(_,(e=>!Object.values(b).find((t=>Boolean(t&&t.name===e))))):_}function T(e,t){var n,o;const{targetCollectionStore:r,isSelfRelation:a,sourceSchema:l,createUnique:u,from:p}=t,g=null===(n=r.getModel())||void 0===n||null===(n=n.getRenderIcon({getRecordModel:d().b4_.constant(void 0)}))||void 0===n?void 0:n.icon,f=e.formatMessage({id:"relationHelpers.autoInverseRelation.untitledDatabase",defaultMessage:"Untitled Database"}),v=(null===(o=r.getModel())||void 0===o?void 0:o.getRenderTitle({getRecordModel:r.getRecordModel,userTimeZone:(0,s().P)(),intl:e}))||f,h=r.getDatabaseType();let _;if(a)if("subitem"===p){const t=(0,m().$O)(h,!0);_=e.formatMessage({defaultMessage:"Sub-{item}",id:"relationHelpers.autoSelfRelationNest.typedName"},{item:t})}else _="timeline_arrows_by"===p?e.formatMessage({defaultMessage:"Blocking",id:"relationHelpers.autoSelfRelationTimelineArrow.name"},{targetCollectionName:v}):e.formatMessage({defaultMessage:"Related {targetCollectionName}",id:"relationHelpers.autoSelfRelation.name"},{targetCollectionName:v});else _=g&&(0,c().A)(g)?e.formatMessage({defaultMessage:"{targetCollectionIcon} {targetCollectionName}",id:"relationHelpers.autoRelationWithIcon.name"},{targetCollectionIcon:g,targetCollectionName:v}):e.formatMessage({defaultMessage:"{targetCollectionName}",id:"relationHelpers.autoRelation.name"},{targetCollectionName:v});const b=Object.values(l);return u?(0,i().A)(_,(e=>!b.find((t=>Boolean(t&&t.name===e))))):_}function M(e){const t=(0,l().L)(e.getFormat(),e.getSchema(),void 0,a().jf.Relation);return t?t.collection_relation_options??{}:{}}function P(e){var t;const{collectionStore:n,property:o}=e;return(null===(t=M(n)[o])||void 0===t?void 0:t.related_properties)??[]}function B(e,t){return Object.entries(t).map((n=>{let[i,r]=n;if(!r||!(0,o().nC)(r))return;const a=(0,o().Nv)(r),s=e.collectionStore();if(!a||a.id!==(null==s?void 0:s.pointer.id)||!s||!y(e,i,s))return;const l=r.property;if(!l)return;const c=t[l];if(!c||"relation"!==c.type)return;const d=(0,o().Nv)(c);return d&&d.id===(null==s?void 0:s.pointer.id)?{propertyID:i,inversePropertyID:l}:void 0})).filter(p().O9)}function R(e,t){return B(e,t).map((e=>e.propertyID))}function E(e,t){const n=B(e,t),o=new Set,i=[];for(const{propertyID:r,inversePropertyID:a}of n)o.has(r)||o.has(a)||(i.push([r,a]),o.add(r),o.add(a));return i}function D(e,t){const n=(0,o().Nv)(e);if(!n)return;const i=v().md.createChildStore(t,n);return i?null==i?void 0:i.getFormat().app_config_uri:void 0}function N(e,t){const n=(0,o().Nv)(e);if(!n)return;const i=new(v().md)(t,n);return i?null==i?void 0:i.getSchema():void 0}function L(e,t){const n=(0,o().Nv)(e);if(!n)return;const i=new(v().md)(t,n);return i||void 0}function O(e){var t;if(e.patternName){if(e.integration.id===r().mn){const t=(0,u().fh)(e.patternName);if(new RegExp(t).test(e.url))return(0,u().WD)(e.patternName)}return null===(t=e.integration.info)||void 0===t||null===(t=t.original_url_patterns)||void 0===t?void 0:t.filter((t=>{var n;return t.name===e.patternName&&(null===(n=t.additional_types)||void 0===n?void 0:n.connectedRelation)})).find((t=>{let{regex:n}=t;return new RegExp(n).test(e.url)}))}}},686526:(e,t,n)=>{n.d(t,{os:()=>z,ut:()=>J,GH:()=>X,nl:()=>Q,vr:()=>Z,cJ:()=>ee,d9:()=>oe,a2:()=>W,R8:()=>K,js:()=>H,eM:()=>j,Ho:()=>V,Ow:()=>F,yl:()=>G,dP:()=>q,JX:()=>ne,Ub:()=>ie,IW:()=>Y,n1:()=>$});n(16280),n(296540);var o=()=>n(908006),i=()=>n(584262),r=()=>n(416845),a=()=>n(763884),s=()=>n(959013),l=()=>n(763824),c=()=>n(284371),d=()=>n(720665),u=()=>n(837570),p=()=>n(272600),m=()=>n(423938),g=()=>n(414360),f=()=>n(467676),v=()=>n(180762),h=()=>n(780054),_=()=>n(476492),b=()=>n(10594),y=()=>n(492414),S=()=>n(972435),w=()=>n(907514),k=()=>n(666803),I=()=>n(208459),x=()=>n(436696),A=()=>n(989423);var C=()=>n(449506),T=()=>n(885110),M=()=>n(884107),P=()=>n(901389),B=()=>n(896628),R=()=>n(750660),E=()=>n(797265),D=()=>n(436572),N=()=>n(751156),L=()=>n(345913),O=n(474848);const U=(0,s().YK)({copySuccessMessage:{defaultMessage:"Link to view copied to clipboard",id:"database.viewSettings.copyLinkSnackBarItem.title"}});function F(e){const{collectionContextStore:t,selectViewNameInitial:n,collectionSettingsStore:o,hideSettingsPopup:i,hideSettingsHeader:r,hideDuplicatePropertyOption:a,fromBlockStore:s,ref:l,initialStack:c,closeOnEscape:d=!0}=e;let u;t.viewsModuleContextStore.selectViewsModule(),u="collectionSettings"===t.contextType?{type:"databaseSettings"}:{type:"main",selectViewNameInitial:n},o.setState({open:!0,hideSettingsPopup:i,hideSettingsHeader:r,stack:c??[u],fromBlockStore:s,ref:l,hideDuplicatePropertyOption:a,closeOnEscape:d})}function V(e){const{collectionSettingsStore:t}=e;K({collectionSettingsStore:t,item:{type:"createSyncedViewSource"}})}function j(e){const{collectionSettingsStore:t,source:n}=e;K({collectionSettingsStore:t,item:{type:"externalProjectsSyncSettings",source:n}})}function z(e){const{collectionSettingsStore:t}=e;t.setState({...t.state,open:!1,hideSettingsPopup:void 0,hideSettingsHeader:void 0,stack:[],ref:void 0,hideDuplicatePropertyOption:void 0,closeOnEscape:void 0}),k().Ay.setState({...k().Ay.state,flowId:void 0})}function H(e){const{environment:t,collectionSettingsStore:n,collectionContextStore:o}=e,i=I().H(n);u().h({environment:t,mode:"create_automation",collectionSettingsStore:n,collectionContextStore:o,from:i})}function W(e){const{collectionSettingsStore:t,item:n,hideSettingsPopup:o}=e,i=t.state;t.setState({...i,open:!0,stack:[...i.stack,n],...void 0!==o?{hideSettingsPopup:o}:{}})}function q(e){const{collectionSettingsStore:t,item:n,ref:o}=e,i=t.state;t.setState({open:!0,stack:[...i.stack.slice(0,i.stack.length-1),n],closeOnEscape:i.closeOnEscape,...void 0!==o?{ref:o}:{}})}function K(e){const{collectionSettingsStore:t,item:n}=e;t.setState({open:!0,stack:[n]})}function G(e){const{collectionSettingsStore:t,keepPreviousRef:n}=e,o=t.state,i=o.stack.slice(0,o.stack.length-1);0===i.length?z({collectionSettingsStore:t}):t.setState({open:!0,stack:i,...void 0!==o.ref&&n?{ref:o.ref}:{}})}function $(e){const{collectionSettingsStore:t,property:n,formatKey:o,selectNameInitial:i}=e,r=t.state,a=r.stack.findIndex((e=>"property"===e.type));t.setState({open:!0,stack:[...a>=0?r.stack.slice(0,a):r.stack,{type:"property",property:n,formatKey:o,selectNameInitial:i}]})}function Y(e){const{collectionSettingsStore:t,showAddItemButton:n}=e,o=t.state;t.setState({...o,showAddItemButton:n})}function Q(e){const{environment:t,collectionContextStore:n,collectionViewStore:o,collectionSettingsStore:i,additionalBlocksToDelete:r,from:a}=e,d=o.getType(),u="form_editor"===d,f=(0,l().yX)(),h=()=>{const e=n.collectionViewStore(),s=null==e?void 0:e.getCollectionStore(),l=n.collectionViewBlockStore(),c=n.isFullScreenStore.state;e&&l&&d&&(N().createAndCommit({userAction:"collectionSettingsActions.handleDeleteCollectionView",environment:t,canUndo:!0,perform:u=>{if((0,g().T)({collectionViewBlockStore:l,collectionViewStore:o,transaction:u}),z({collectionSettingsStore:i}),e.id===o.id){const e=l.getCollectionViewStores()[0];if(e)(0,v().t)({environment:t,collectionContextStore:n,collectionViewId:e.id,isFullScreen:n.isFullScreenStore.state,isRootChild:n.isRootChildStore.state,isInPeekRenderer:n.isInPeekRendererStore.state});else{if(!n.isEditableHomeCollectionStore.state)throw new Error("Cannot delete last view. Delete database instead.");(0,m().Z)({environment:t,collectionContextStore:n,newViewType:"table",transaction:u,skipOpenSettings:n.isInHomeWidgetStore.state}),c||E().ZL({environment:t,blocks:[l],transaction:u})}}r&&L().oD({environment:t,blocks:r,transaction:u}),(0,p().u)({collectionViewBlockStore:l,collectionStore:s,transaction:u,environment:t});const f=(0,_().sl)(n)||{};!function(e,t){A().vd(e,"delete_view",t)}(t,{from:a,...f,view_type:d})}}),f.resolve(!0))};return u?P().ui({showCancel:!0,keepFocus:!1,message:(0,O.jsx)("div",{style:{fontWeight:c().Wy.semibold,fontSize:18},children:(0,O.jsx)(s().sA,{id:"database.formEditSettings.deleteFormModal. essage",defaultMessage:"Permanently delete {viewName}?",values:{viewName:o.getName()}})}),description:(0,O.jsx)(s().sA,{defaultMessage:"Users will no longer be able to submit data through this form. Any data already submitted will remain unaffected",id:"database.formEditSettings.deleteFormModal.text"}),items:[{label:(0,O.jsx)(s().sA,{defaultMessage:"Delete form",id:"database.viewSettings.formDeleteButton.text"}),color:"red",onAccept:()=>{h()}}],innerStyle:{textAlign:"center"},handleCancel:()=>f.resolve(!1)}):void 0===n.collectionStore()?h():P().ui({showCancel:!0,keepFocus:!1,message:(0,O.jsx)(s().sA,{defaultMessage:"Are you sure you want to delete this view?",id:"database.viewSettings.mainTab.deleteViewConfirm.text"}),items:[{label:(0,O.jsx)(s().sA,{defaultMessage:"Delete view",id:"database.viewSettings.deleteButton.text"}),color:"red",onAccept:()=>{h()}}],handleCancel:()=>f.resolve(!1)}),f.promise}function Z(e){const{environment:t,collectionContextStore:n,collectionViewStore:i,collectionSettingsStore:r,intl:a,from:s}=e,l=n.isFullScreenStore.state,c=n.isRootChildStore.state,d=n.isInPeekRendererStore.state,u=n.collectionViewBlockStore(),{performResult:p}=N().createAndCommit({userAction:"collectionSettingsActions.newView",environment:t,canUndo:!0,perform:e=>(0,f().t)({environment:t,collectionViewBlockStore:u,collectionViewStore:i,intl:a,transaction:e})});p&&("chart"===p.getType()&&T().Z({environment:t,collectionContextStore:n,collectionViewId:p.id,from:s}),(0,v().t)({environment:t,collectionContextStore:n,collectionViewId:p.id,isFullScreen:l,isRootChild:c,isInPeekRenderer:d}),o().default.afterNextFlush((()=>{F({collectionContextStore:n,collectionSettingsStore:r,selectViewNameInitial:!0})})))}async function X(e){const{environment:t,collectionContextStore:n,collectionViewStore:o}=e,r=n.collectionViewBlockStore();if(!o||!r)return;const a=(0,y().Ay)({store:r,collectionViewId:o.id,fullyQualified:!0,pageVisitSource:i().y8.CopyLink,embedded:!1}),s=await M().R.clipboardActions.load();await s.copyString({environment:t,stringValue:a,copiedMessage:s.clipboardMessages.copiedLinkToClipboard}),D().D6({label:S().A.formatMessage(U.copySuccessMessage)})}function J(e){const{environment:t,collectionContextStore:n}=e,o=n.normalizedFormatStore.state,i=o.board_columns_by,r=n.collectionViewStore();if(!i||!r)return;const a=!(0,b().FS)(o);N().createAndCommit({userAction:"collectionSettingsActions.handleBoardGroupColorColumnsClick",environment:t,canUndo:!0,perform:e=>{B().zA({stores:[r],update:{board_columns_by:{...i,disableBoardColorColumns:a}},transaction:e})}}),(0,x().X)({environment:t,collectionContextStore:n,action:"toggle_group_color_columns"})}async function ee(e){const{environment:t,uri:n,botId:o,collectionId:i,isStale:l,nextSync:c,setNextSync:u}=e;if(!c||Date.now()>c){var p;let e=Date.now()+d().pT;const c=await C().callApi({eventName:"resubscribeExternalCollection",environment:t,data:{botId:o,uri:n,isStale:l,collectionId:i}});if("failed"===c.type&&(0,r().G4X)(c.body)&&"rate_limited"===(null===(p=c.body.clientData)||void 0===p?void 0:p.type)){const t=c.body.clientData.retryAfter;t&&(e=Date.now()+t*d().TD),D().D6({label:(0,O.jsx)(s().sA,{id:"database.viewSettings.syncedSourceTab.update.rateLimitError",defaultMessage:"This database was synced recently. You may try again in {time}.",values:{time:(0,w().OH)(Date.now(),e)}})})}if(h().A.isAdminMode)return;a().K.set({userId:t.currentUser.id,key:`${o}:${n}`,value:e}),u(e)}}function te(e){return`collectionActionsMinimizedState:${e}`}function ne(e){const{environment:t,collectionContextStore:n,collectionActionsMinimizedStore:o,newValue:i}=e,r=n.collectionViewStore();r&&(o.setState(i),a().K.set({userId:t.currentUser.id,key:te(r.id),value:i}))}function oe(e){const{environment:t,collectionContextStore:n}=e,o=n.collectionViewStore();if(!o)return;const i=n.collectionActionsMinimizedStore,r=a().K.get({userId:t.currentUser.id,key:te(o.id)});i.setState(r??!1)}function ie(e){var t;const{environment:n,handleAddItemClick:o,buttonRef:i,event:r}=e,a=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect();a&&R().qL({environment:n,originRect:a,moveToContext:"aggregated_type",overrideDatabaseType:"notion://tasks_collection",onAccept:()=>{o(r)}})}},686594:(e,t,n)=>{n.d(t,{A:()=>a,K:()=>i});n(16280);var o=()=>n(165162);const i="group";class r extends(()=>n(757695))().default{constructor(){super(...arguments),this.environment=void 0}getInitialState(){return{currentUserId:void 0,currentSpaceId:void 0,ready:!0}}isInitialized(){return o().StatsigInitializer.isComplete}getStatsigClient(){if(!this.isInitialized())return;const e=o().statsigClientLoader.getClientSync();return e||void 0}isReadyWithUserAndSpaceId(){return!0}getGroup(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const r=Date.now(),a=this.getStatsigClient();if(!a)return;let s;try{return s=t?a.getExperiment(e,{disableExposureLog:!0}):a.getExperiment(e),this.trackMetric("statsig_client_get_group_success",{experiment_id:e}),(0,n(715256).Gn)(s,o)}catch(l){this.trackMetric("statsig_client_get_group_error",{experiment_id:e}),this.logError("getGroup",l,{experimentId:e,expConfig:JSON.stringify(s)})}finally{this.trackMetric("statsig_client_get_group_duration",{time:Date.now()-r})}}manuallyLogExperimentExposure(e){const t=this.getStatsigClient();t&&t.getExperiment(e)}checkGate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Date.now(),o=this.getStatsigClient();if(!o)return!1;let i;try{return i=t?o.checkGate(e,{disableExposureLog:!0}):o.checkGate(e),this.trackMetric("statsig_client_check_gate_success",{gate_name:e}),i}catch(r){const t=r instanceof Error?r.message:void 0;return this.logError("checkGate",r,{gateName:e,...t&&{errorMessage:t}}),this.trackMetric("statsig_client_check_gate_error",{gate_name:e}),!1}finally{this.trackMetric("statsig_client_check_gate_duration",{time:Date.now()-n})}}getConfig(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Date.now(),o=this.getStatsigClient();if(!o)return;let i;try{return i=t?o.getDynamicConfig(e):o.getDynamicConfig(e,{disableExposureLog:!0}),this.trackMetric("statsig_client_get_config_success",{config_name:e}),i}catch(r){const t=r instanceof Error?r.message:void 0;return this.logError("getConfig",r,{dynamicConfigName:e,...t&&{errorMessage:t}}),void this.trackMetric("statsig_client_get_config_error",{config_name:e})}finally{this.trackMetric("statsig_client_get_config_duration",{time:Date.now()-n})}}logEvent(e,t,n){const o=Date.now(),i=this.getStatsigClient();if(!i)return!1;try{return i.logEvent(e,t,n),this.trackMetric("statsig_client_log_event_success",{event_name:e}),!0}catch(r){const o=r instanceof Error?r.message:void 0;return this.logError("logEvent",r,{eventName:e,value:String(t),...n,...o&&{errorMessage:o}}),this.trackMetric("statsig_client_log_event_error",{event_name:e}),!1}finally{this.trackMetric("statsig_client_log_event_duration",{time:Date.now()-o})}}getLocalOverride(e){var t;const n=null===(t=this.getOverrideAdapter())||void 0===t||null===(t=t.getAllOverrides())||void 0===t?void 0:t.experiment[e];return null==n?void 0:n[i]}getAllLocalOverrides(){var e;return null===(e=this.getOverrideAdapter())||void 0===e?void 0:e.getAllOverrides()}updateLocalOverrideConfig(e,t){var n;null===(n=this.getOverrideAdapter())||void 0===n||n.overrideExperiment(e,{[i]:t})}updateLocalOverrideGate(e,t){var n;null===(n=this.getOverrideAdapter())||void 0===n||n.overrideGate(e,"true"===t)}getIsExperimentActive(e){var t;const n=this.getStatsigClient();return!!n&&!(null===(t=n.getExperiment(e).__evaluation)||void 0===t||!t.is_experiment_active)}removeAllLocalOverrides(){var e;null===(e=this.getOverrideAdapter())||void 0===e||e.removeAllOverrides()}getOverrideAdapter(){var e;const t=null===(e=this.getStatsigClient())||void 0===e?void 0:e.overrideAdapter;return t&&t.setPreSaveFunction((()=>{this.emit()})),t}logError(e,t,o){n(857639).log({level:"error",from:"statsig",type:e,error:(0,n(502800).convertErrorToLog)(t),data:{miscDataToConvertToString:{...o,...this.state}}})}trackMetric(e,t){this.environment&&e.endsWith("_error")&&n(989423).vd(this.environment,e,{...t,statsig_init_method:"classic"})}}const a=new r},687519:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(799954),s=()=>n(908521),l=()=>n(959013),c=()=>n(494043),d=()=>n(891078),u=n(474848);const p=(0,l().YK)({placeholder:{defaultMessage:"Heading 3",id:"subsubheaderBlock.placeholder"}});function m(e,t){const m=(0,l().tz)(),g=(0,i().v3)(),f=(0,i().Y0)(),v=(0,o.useRef)(null),h=(0,d().pW)(e.store,!0),_=(0,d().qu)(e.store),b=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,n(857076).W)({device:f,overrideHeaderFontSizes:e.overrideHeaderFontSizes}),w=(0,n(401497).IS)((e=>{const t=S.subSubHeader*s().Df;return{root:{display:"flex",width:"100%",...h},toggle:{height:`${t}em`,marginTop:f.isMobile?1:a().nE.paddingTop,marginBottom:a().nE.paddingBottom},headerText:{...a().nE,...(0,s().aZ)({fontSizes:S,fontFamily:_})},headerTextPlaceholder:{...y?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:e.headerBlockPlaceholderTextColor}}}}),[S,f.isMobile,h,_,y]),k=(0,r().K8)((()=>c().PQ(e.store)),[e.store]),I=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n(524702).A,{tagName:"h4",disabled:e.disabled,store:b,placeholder:e.placeholder??m.formatMessage(p.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"sub_sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().qj(g,e.store,e.hideContent)}})),[g,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...w.root,...e.style},children:k?(0,u.jsx)(n(60676).A,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const g=o.memo(o.forwardRef(m),n(821062).A)},687532:(e,t,n)=>{n.d(t,{P:()=>a});var o=()=>n(857639),i=()=>n(939768),r=()=>n(219187);async function a(e){var t;const n=null===(t=r().electronApi??r().electronCalendarApi??r().electronMailApi)||void 0===t?void 0:t.openExternalUrl;if(!n)return!1;const a=i().q7(e);return void 0===a?(o().log({level:"warning",from:"electronSharedActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await n(a)}},688149:(e,t,n)=>{n.d(t,{A:()=>u});n(296540);var o=()=>n(847249),i=()=>n(857639),r=()=>n(502800),a=()=>n(763824),s=()=>n(227440);class l extends(()=>n(757695))().default{getInitialState(){return{loaded:!1}}}const c=l;var d=n(474848);const u=function(e){let{fetch:t,willRender:l,render:u,loading:p}=e;const m=(0,o().uB)(void 0,c),g=(0,o().O$)(m);(0,n(852507).l)((()=>{!async function(e,t){let n=1e3;for(;;)try{const n=await e();t.setState({loaded:!0,result:n});break}catch(o){i().log({level:"warning",from:"LazyLoader",type:"fetchError",error:(0,r().convertErrorToLog)(o),data:{miscDataToConvertToString:{waitMs:n}}}),await a().wR(n),await s().A.waitUntil((()=>s().A.state.online)),n=Math.min(2*n,3e4)}}(t,m)}));const f=(0,n(62856).A)(!g.loaded,300,0);return g.loaded?(l&&l(),u(g.result)):p?p(f):f?(0,d.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,d.jsx)(n(331542).A,{})}):null}},689094:(e,t,n)=>{n.d(t,{W:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("plus",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.977 14.963c.407 0 .747-.324.747-.723V8.72h5.362c.399 0 .74-.34.74-.747a.746.746 0 00-.74-.738H8.724V1.706c0-.398-.34-.722-.747-.722a.732.732 0 00-.739.722v5.529h-5.37a.746.746 0 00-.74.738c0 .407.341.747.74.747h5.37v5.52c0 .399.332.723.739.723z"})})},689309:(e,t,n)=>{n.d(t,{s:()=>y});var o=n(296540),i=()=>n(484714),r=()=>n(534177);function a(e){const{render:t,isOpen:n,onClosed:i,onDismiss:a,startClosingOnDismiss:s=!0}=e,[l,c]=(0,o.useState)("none");(0,o.useEffect)((()=>{c((e=>n?"open":"open"===e?"closing":e))}),[n]),(0,o.useEffect)((()=>{"closed"===l&&(null==i||i())}),[l,i]);const d=(0,o.useCallback)((()=>{c((e=>"closing"===e?"closed":e))}),[]),u=(0,o.useCallback)((()=>{s&&c((e=>"open"===e?"closing":e)),null==a||a()}),[a,s]);switch(l){case"none":case"closed":return null;case"closing":return t({isOpen:!1,onClosed:d,onDismiss:u});case"open":return t({isOpen:!0,onClosed:d,onDismiss:u});default:(0,r().HB)(l)}}var s=()=>n(401497),l=()=>n(604341),c=()=>n(58283),d=()=>n(951710),u=()=>n(555822),p=()=>n(581495),m=()=>n(297872),g=()=>n(676007),f=n(474848);function v(e){const{allowDismissByEscape:t=!0,anchor:n="center",animateSizeTransition:i=!0,ariaLabel:a,ariaLabelledBy:v,ariaDescribedBy:h,keyboardAreaPriority:_,render:b,transitionOut:y,showCloseIcon:S,borderRadius:w,backgroundAppearance:k,transitionAppearance:I}=e,[x,A]=(0,o.useState)(!1);(0,l().exposeDebugValue)("screenshotMode",(()=>{A((e=>!e))}));const C=(0,u().a)({partial:e.minimumOutsideSpacing,defaultLength:40}),T=(0,c().FT)({minimumOutsideSpacing:C});let M;e.areaConstraint&&(M="function"==typeof e.areaConstraint?e.areaConstraint({displayMode:"desktop"}):e.areaConstraint);const P=(0,d().e)([T,M]),B=function(e){const{screenshotMode:t,anchor:n,minimumOutsideSpacing:o,borderRadius:i}=e;return(0,s().IS)((e=>{let a,s,l;switch(n){case"top":a="flex-start",s=o.top;break;case"bottom":a="flex-end",l=o.bottom;break;case"center":case void 0:a="center";break;default:(0,r().HB)(n)}return{innerStyle:{borderRadius:i??12,display:"flex",overflow:"hidden",position:"relative"},outerStyle:{alignItems:a,paddingTop:s,paddingBottom:l},overlay:t?{background:e.surface.page,transition:"0.2s ease background"}:{},fullScreenOverlay:{background:e.surface.page}}}),[n,t,o.bottom,o.top,i])}({screenshotMode:x,anchor:n,minimumOutsideSpacing:C,borderRadius:w}),R=(0,o.useCallback)((()=>(0,f.jsx)(m().A,{capture:!0,keyboardAreaPriority:_,allowEsc:!0,render:()=>(0,f.jsx)(c().LE,{areaConstraint:P,isSizeTransitionAnimated:i,children:(0,f.jsx)(c().wC.Consumer,{children:e=>{let{constrainedSize:t,actualSize:n}=e;return t?b({displayMode:"desktop",size:n,sizeRange:t}):null}})})})),[i,P,b,_]);return(0,f.jsx)(p().eh.Provider,{value:y.onDismiss,children:(0,f.jsx)(g().A,{ariaDescribedBy:h,ariaLabel:a,ariaLabelledBy:v,backgroundStyle:"full-screen"===I?B.fullScreenOverlay:B.overlay,innerStyle:B.innerStyle,isWaxPaper:"waxPaper"===k,isWash:"wash"===k,transitionAppearance:I,onClosed:y.onClosed,onDismiss:t?y.onDismiss:void 0,open:y.isOpen,preventHideChildrenWhileOpening:!0,render:R,showCloseIcon:S,style:B.outerStyle,className:e.className})})}var h=()=>n(377586),_=()=>n(897119);function b(e){var t,n,r;const{allowDismissByEscape:a=!0,animateSizeTransition:l=!0,ariaLabel:u,ariaLabelledBy:g,ariaDescribedBy:v,render:b,transitionOut:y}=e,S=(0,c().FT)({minimumOutsideSpacing:{type:"sides",top:0,bottom:0,right:0,left:0}}),{isTablet:w}=(0,i().Y0)();let k,I;null!==(t=e.deprecatedCompatibilityOverrides)&&void 0!==t&&t.tabletsUsePhoneDisplayMode&&w&&(k={width:{type:"fixed",length:_().bJ}}),e.areaConstraint&&(I="function"==typeof e.areaConstraint?e.areaConstraint({displayMode:"phone"}):e.areaConstraint);const x={width:{type:"fill",scroll:null===(n=I)||void 0===n||null===(n=n.width)||void 0===n?void 0:n.scroll},height:null===(r=I)||void 0===r?void 0:r.height},A=(0,d().e)([S,k,x]),C=(0,s().IS)((()=>({popup:{display:"flex",flexDirection:"column",overflowY:"auto"},slideUpWrapStyle:{height:"var(--full-viewport-height)"}})),[]),T=(0,o.useCallback)((()=>(0,f.jsx)(m().A,{capture:!0,allowEsc:!0,render:()=>(0,f.jsx)(c().LE,{areaConstraint:A,isSizeTransitionAnimated:l,children:(0,f.jsx)(c().wC.Consumer,{children:e=>{let{constrainedSize:t,actualSize:n}=e;return t?b({displayMode:"phone",size:n,sizeRange:t}):null}})})})),[A,l,b]);return(0,f.jsx)(p().eh.Provider,{value:y.onDismiss,children:(0,f.jsx)(_().Ay,{ariaLabel:u,ariaLabelledBy:g,ariaDescribedBy:v,open:y.isOpen,popupType:h().n.SlideUp,onDismiss:a?y.onDismiss:void 0,onClosed:y.onClosed,slideUpWrapStyle:C.slideUpWrapStyle,style:C.popup,render:T,className:e.className})})}function y(e){const{isOpen:t,onClosed:n,onDismiss:o,deprecatedCompatibilityOverrides:s,startClosingOnDismiss:l}=e,c=function(e){const{isPhone:t,isMobile:n}=(0,i().Y0)();return null!=e&&e.tabletsUsePhoneDisplayMode?n?"phone":"desktop":t?"phone":"desktop"}(s);return(0,f.jsx)(a,{isOpen:t,onClosed:n,onDismiss:o,startClosingOnDismiss:l,render:t=>{switch(c){case"phone":return(0,f.jsx)(b,{...e,transitionOut:t});case"desktop":return(0,f.jsx)(v,{...e,transitionOut:t});default:(0,r().HB)(c)}}})}},690197:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(133033),r=()=>n(284371),a=n(474848);function s(e){let{title:t,href:s,analyticsFrom:l,shouldShrink:c,style:d,buttonStyle:u,iconStyle:p,isBlue:m,onClick:g,onFocus:f,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b,textSize:y,isMobile:S}=e;const w=(0,n(484714).v3)(),k={onFocus:f,onBlur:v,onMouseDown:h,onMouseEnter:_,onMouseLeave:b},I=(0,o.useCallback)((()=>{void 0!==g&&g(),n(148024).FH(w,{from:l})}),[l,w,g]),x=S?"small"!==y?r().J.UIRegular.mobile:r().J.UISmall.mobile:"small"!==y?r().J.UIRegular.desktop:r().J.UISmall.desktop;let A="1.2";void 0!==y&&(A=S?"small"!==y?r().K_.UIRegular.mobile:r().K_.UISmall.mobile:"small"!==y?r().K_.UIRegular.desktop:r().K_.UISmall.desktop);const C=(0,n(401497).IS)((()=>({link:{display:"flex",marginLeft:-6,...d}})),[d]);return(0,a.jsx)(n(187485).A,{style:C.link,className:"notion-print-ignore",href:s,external:!0,onClick:I,...k,children:t?(0,a.jsx)(n(493823).p,{icon:i().$,iconStyle:p,size:"sm",isBlue:m,isLightGray:!m,shouldShrink:c,style:{...u,fontSize:x,lineHeight:A},children:t}):(0,a.jsx)(n(285790).A,{icon:i().$,iconStyle:p,isBlue:m,style:u,...k})})}const l=o.memo(s)},690471:(e,t,n)=>{n.d(t,{BD:()=>ke,C1:()=>L,DG:()=>Z,DY:()=>K,E6:()=>C,EZ:()=>w,GM:()=>U,GW:()=>be,HV:()=>he,Ho:()=>ee,IW:()=>te,Kx:()=>oe,LH:()=>O,MB:()=>A,MR:()=>me,NB:()=>G,Od:()=>J,UA:()=>j,VC:()=>E,Vz:()=>$,XK:()=>T,Zk:()=>_e,_D:()=>ie,_r:()=>q,cC:()=>I,eM:()=>P,g_:()=>x,iH:()=>pe,iw:()=>X,jI:()=>ve,ji:()=>re,lH:()=>fe,nS:()=>le,o$:()=>z,o8:()=>D,oJ:()=>Y,s0:()=>ye,tH:()=>R,tX:()=>ae,tp:()=>ge,u7:()=>ne,u9:()=>F,uW:()=>H,w0:()=>N,w7:()=>k,yG:()=>de,yl:()=>V,zZ:()=>ce,zb:()=>W,zj:()=>se});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577),n(908872);var o=()=>n(244641),i=()=>n(662303),r=()=>n(757695),a=()=>n(787626),s=()=>n(410486),l=()=>n(970013),c=()=>n(713998),d=()=>n(597777),u=()=>n(869190),p=()=>n(604995),m=()=>n(651124),g=()=>n(416504),f=()=>n(763884),v=()=>n(534177),h=()=>n(909470),_=()=>n(405417),b=()=>n(661179),y=()=>n(508496),S=()=>n(472090);const w=5,k=3,I=2,x=21;let A=function(e){return e[e.LeftResizer=0]="LeftResizer",e[e.RightResizer=1]="RightResizer",e[e.ItemDrag=2]="ItemDrag",e}({});const C=4e3,T=C/4,M=864e5,P={hours:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"fifteen_minutes",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:M/7e3,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"fifteen_minutes",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:9,getDateRangePlaceholderDuration:e=>e.plus({hour:1})},day:{snapUnit:"fifteen_minutes",primaryDisplayUnit:"hour",secondaryDisplayUnit:"day",activeRangeType:void 0,msPerPixel:69120,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"hour",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:2,getDateRangePlaceholderDuration:e=>e.plus({hour:3})},week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:48e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:"day",showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:1})},bi_week:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:108e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:3})},month:{snapUnit:"day",primaryDisplayUnit:"day",secondaryDisplayUnit:"month",activeRangeType:"highlight_days",msPerPixel:216e4,primaryDisplayUnitAlignment:"range_middle",verticalDividerUnit:void 0,showWeekendIndicators:!0,hidePrimaryIndicatorIntersectionOffset:void 0,getDateRangePlaceholderDuration:e=>e.plus({day:5})},quarter:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:72e5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:35,getDateRangePlaceholderDuration:e=>e.plus({week:2})},year:{snapUnit:"day",primaryDisplayUnit:"week",secondaryDisplayUnit:"month",activeRangeType:"display_range",msPerPixel:1728e4,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:6,getDateRangePlaceholderDuration:e=>e.plus({week:4})},"5_years":{snapUnit:"day",primaryDisplayUnit:"month",secondaryDisplayUnit:"year",activeRangeType:"display_range",msPerPixel:864e5,primaryDisplayUnitAlignment:"range_start",verticalDividerUnit:"month",showWeekendIndicators:!1,hidePrimaryIndicatorIntersectionOffset:6,getDateRangePlaceholderDuration:e=>e.plus({week:20})}},B="month";function R(e){var t;return null===(t=E(e))||void 0===t?void 0:t.property}function E(e){const t=e.normalizedFormatStore.state.timeline_arrows_by;if(null==t||!t.property)return;const n=e.normalizedSchemaStore.state[t.property],o=e.collectionStore();return n&&"relation"===n.type&&n.property&&o&&(0,l().zO)(n)===o.id?{property:t.property,inverse:n.property}:void 0}function D(e){return{zoomLevelStore:r().default.createValue(B,{name:"zoomLevel"}),currentRangeStore:r().default.createValue({startTimestamp:0,endTimestamp:0},{name:"currentRange"}),dragStateStore:r().default.createValue(void 0,{name:"dragState"}),drawStateStore:r().default.createValue(void 0,{name:"drawState"}),hoveredItemStore:r().default.createValue(void 0,{name:"hoveredItem"}),dateRangePlaceholderStore:r().default.createValue({active:!1},{name:"dateRangePlaceholder"}),scrollLeftStore:r().default.createValue(void 0,{name:"scrollLeft"}),outerSizeObserver:new(S().E),timelineSizeObserver:new(S().E),horizontalScroller:void 0,savePreference:void 0,isFullScreen:e.isFullScreen,isRootChild:e.isRootChild,destroyed:!1}}function N(e,t){return t/P[e].msPerPixel}function L(e,t){return t*P[e].msPerPixel}function O(e){return"fifteen_minutes"===e||"hour"===e}function U(e){const{store:t,query:n,schema:o,userId:i,intl:r,formulasModule:a}=e,c=t.getModel();if(!c)return;const d=t.getAssociatedCollectionStore(),{timeline_by:u,timeline_by_end:m}=n;if(!u)return;const f=o[u];if(!f||!(0,l().$L)(f))return;const v=new Map,_=new Map,b=(0,s().d2)({property:u,schema:o,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:i,userTimeZone:(0,g().P)(),depth:0,intl:r,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:y().default,collectionFeatureGates:(0,h().i)()},formulasModule:a}).next().value;if("date"!==(null==b?void 0:b.type))return;const S=b.value;if(!m||u===m)return S;{const e=o[m];if(!e||!(0,l().$L)(e))return;const n=(0,s().d2)({property:m,schema:o,block:c,getRecordModel:t.getRecordModel,propertyMapping:null==d?void 0:d.getPropertyMapping(),collectionRequestContext:{userId:i,userTimeZone:(0,g().P)(),depth:0,intl:r,visitedProperties:new Set,resultCache:v,regExpCache:_,experimentService:y().default,collectionFeatureGates:(0,h().i)()},formulasModule:a}).next().value;if(n&&"date"===n.type){const e=n.value,t=p().jY(S,e);if(t)return p().rL(t)}}}function F(e){const{store:t,dateValue:n,query:o}=e,{timeline_by:i,timeline_by_end:r}=o;if(!i)return;const s=t.getAssociatedCollectionStore(),u=(null==s?void 0:s.getSchema())??e.schema,p=(null==s?void 0:s.getMappedProperty(i))??i,m=r?(null==s?void 0:s.getMappedProperty(r))??r:void 0,g=u[p];if(g&&(0,l().$L)(g)){if(!m||p===m)return{[p]:(0,c().m5)(n)};{const e=u[p];if(!e||!(0,l().$L)(e))return;const o=(0,a().b)(t.getPropertyValue(p)),i=(0,a().b)(t.getPropertyValue(m));if("date"===n.type)return{[p]:(0,c().m5)({type:"date",start_date:n.start_date,reminder:d().vv(o)}),[m]:(0,c().m5)({type:"date",start_date:n.start_date,reminder:d().vv(i)})};if("daterange"===n.type)return{[p]:(0,c().m5)({type:"date",start_date:n.start_date,reminder:d().vv(o)}),[m]:(0,c().m5)({type:"date",start_date:n.end_date,reminder:d().vv(i)})};if("datetime"===n.type)return{[p]:(0,c().m5)({type:"datetime",start_date:n.start_date,start_time:n.start_time,time_zone:n.time_zone,reminder:d().ED(o)}),[m]:(0,c().m5)({type:"datetime",start_date:n.start_date,start_time:n.start_time,time_zone:n.time_zone,reminder:d().ED(i)})};if("datetimerange"===n.type)return{[p]:(0,c().m5)({type:"datetime",start_date:n.start_date,start_time:n.start_time,time_zone:n.time_zone,reminder:d().ED(o)}),[m]:(0,c().m5)({type:"datetime",start_date:n.end_date,start_time:n.end_time,time_zone:n.time_zone,reminder:d().ED(i)})};(0,v().HB)(n)}}}function V(e,t){const n=O(t),o=p().AA(n?e:d().qL(e),(0,g().P)()),i=K(o.start,t),r=n&&"date"===e.type?o.start.plus({days:1}).startOf("day"):o.end||i;return{start:i,end:n?K(r,t):$(r,t)}}function j(e){return`timeline:${e}`}function z(e){const{horizontalScroller:t,outerSizeObserver:n}=e,o=e.zoomLevelStore.state,{startTimestamp:i}=e.currentRangeStore.state;return i+L(o,(t?t.scrollLeft:0)+n.rect.state.width/2)}function H(e){const{environment:t,timestamp:n,timelineState:o,paddingLeft:i,format:r}=e;return n-L(o.zoomLevelStore.state,ee({environment:t,paddingLeft:i,format:r,isFullScreen:o.isFullScreen,isRootChild:o.isRootChild})/2)}function W(e){const{environment:t,timestamp:n,timelineState:o,paddingLeft:i,format:r}=e;return n-L(o.zoomLevelStore.state,ee({environment:t,paddingLeft:i,format:r,isFullScreen:o.isFullScreen,isRootChild:o.isRootChild})-o.outerSizeObserver.rect.state.width/2)}function q(e){const{timestamp:t,timelineState:n}=e;return t+L(n.zoomLevelStore.state,-n.outerSizeObserver.rect.state.width/2)}function K(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15);return e.set({minute:t}).startOf("minute")}return e.startOf(t)}function G(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)-15;return e.set({minute:t}).startOf("minute")}return e.startOf(t).minus({[t]:1}).startOf(t)}function $(e,t){if("fifteen_minutes"===t){const t=15*Math.floor(e.minute/15)+15;return e.set({minute:t}).startOf("minute")}return e.plus({[t]:1}).startOf(t)}function Y(e){const{startValue:t,snapUnit:n,desiredStart:o,desiredEnd:i}=e;let r=t;const a=d().O(t)||(0,g().P)();if(o){const e=Q(o,n,"start",a);if("datetime"===e.type)if("date"===r.type){const e={type:"daterange",start_date:r.start_date,end_date:r.start_date};r=p().d9(e,(0,g().P)())}else"daterange"===r.type&&(r=p().d9(r,(0,g().P)()));"date"===r.type?r={...r,type:"daterange",start_date:e.start_date,end_date:r.start_date}:"daterange"===r.type?r={...r,type:"daterange",start_date:e.start_date,end_date:r.end_date}:"datetime"===r.type?r={...r,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:r.start_time,end_date:r.start_date,end_time:r.start_time}:"datetimerange"===r.type&&(r={...r,type:"datetimerange",start_date:e.start_date,start_time:"datetime"===e.type?e.start_time:r.start_time})}if(i){const e=Q(i,n,"end",a);if("datetime"===e.type)if("date"===r.type){const e={type:"daterange",start_date:r.start_date,end_date:r.start_date};r=p().d9(e,(0,g().P)())}else"daterange"===r.type&&(r=p().d9(r,(0,g().P)()));"date"===r.type||"daterange"===r.type?r={...r,type:"daterange",end_date:e.start_date}:"datetime"!==r.type&&"datetimerange"!==r.type||(r={...r,type:"datetimerange",end_date:e.start_date,end_time:"datetime"===e.type?e.start_time:"datetimerange"===r.type?r.end_time:r.start_time})}return d().b7(r)}function Q(e,t,n,o){const i=G(e,t),r=K(e,t),a=$(e,t),s=O(t);let l;return l="start"===n?e.valueOf()>=r.valueOf()+(r.valueOf()-i.valueOf())/2?a:r:e.valueOf()>=r.valueOf()+(r.valueOf()-i.valueOf())/2?s?a:r:s?r:i,function(e,t,n){return O(t)?p().KQ(e.valueOf(),n):p().p6(e.valueOf(),n)}(l,t,o)}function Z(e){const{environment:t,isFullScreen:n,isRootChild:o}=e;return(t.device.isDesktop||t.device.isTablet)&&(n||o)}function X(e){const{environment:t,format:n,isFullScreen:o,isRootChild:i}=e;return Z({environment:t,isFullScreen:o,isRootChild:i})&&Boolean(n.timeline_show_table)}function J(e){const{isFullScreen:t,isRootChild:n}=e;return!t&&n&&X(e)}function ee(e){const{environment:t,paddingLeft:n,format:o,isFullScreen:i,isRootChild:r}=e;if(!X({environment:t,format:o,isFullScreen:i,isRootChild:r}))return 0;return n+(o.timeline_table_properties||[]).reduce(((e,t)=>(t.width&&t.visible?t.width:0)+e),0)}function te(){const e=o().c9.now().setLocale(i().locale);return e.toLocaleString(o().c9.TIME_SIMPLE)===e.toLocaleString(o().c9.TIME_24_SIMPLE)}function ne(e,t,n){return"day"===n?(0,u().W_)(t,"month_day_long",e):"month"===n?(0,u().W_)(t,"month_long",e):"year"===n?(0,u().W_)(t,"year",e):void(0,v().HB)(n)}function oe(e,t){return"day"===t?(0,u().W_)(e,"long",i().locale):"month"===t?(0,u().W_)(e,"month_year_long",i().locale):"year"===t?(0,u().W_)(e,"year",i().locale):void(0,v().HB)(t)}function ie(e,t){const n=p().AA(e,d().O(e)||(0,g().P)(),i().locale),{primaryDisplayUnit:o}=P[t],r="fifteen_minutes"===o||"hour"===o?"month_day_time":"month_day";return(0,u().W_)(n.start.valueOf(),r,i().locale)}function re(e,t){const n=p().AA(e,d().O(e)||(0,g().P)(),i().locale),{primaryDisplayUnit:o}=P[t],r=(n.end||n.start).valueOf(),a="fifteen_minutes"===o||"hour"===o?"month_day_time":"month_day";return(0,u().W_)(r,a,i().locale)}function ae(e,t){const n=p().AA(e,d().O(e)||(0,g().P)(),i().locale),{primaryDisplayUnit:o}=P[t],r="fifteen_minutes"===o||"hour"===o?"medium_with_time":"medium",a=(0,u().W_)(n.start.valueOf(),r,i().locale);return n.end?`${a} → ${(0,u().W_)(n.end.valueOf(),r,i().locale)}`:a}function se(e,t){return K(e,t)<e?$(e,t):e}function le(e){return b().A.state>0||e.device.isFirefox||e.device.isPhone}function ce(e){return!(e.device.isFirefox||e.device.isMobile)}function de(e,t){const n=t.currentUser.id,o=e.getFormat().timeline_preference,i=j(e.id),r=f().K.get({userId:n,key:i}),a={zoomLevel:B,centerTimestamp:Date.now()};return{zoomLevel:(ue(r)||ue(o)||a).zoomLevel,centerTimestamp:(ue(r)||a).centerTimestamp}}function ue(e){if(e&&"number"==typeof e.centerTimestamp&&m().Ui.includes(e.zoomLevel))return e}function pe(e,t){let n=e.timeline_table_properties||[];if(t){n.find((e=>{let{visible:t}=e;return Boolean(t)}))||(n=(0,m().Cn)(n,"title",!0))}return{timeline_show_table:t,timeline_table_properties:n}}const me=32,ge=32,fe=4,ve=me+ge+fe,he=96;function _e(e){return e?me:ve}function be(e,t,n){if(!t)return[];const o=R(e);if(!o)return[];const i=t.getPropertyValue(o),r=n[o];return i&&r&&"relation"===r.type?(0,c().bG)({relationValue:(0,c().n)(i),propertySchema:r,getRecordModel:t.getRecordModel,includeNoAccess:!0}):[]}function ye(e,t,n){var o;if(!t)return[];const i=null===(o=(0,_().r6)(e))||void 0===o?void 0:o.property;if(!i)return[];const r=t.getPropertyValue(i),a=n[i];return r&&a&&"relation"===a.type?(0,c().bG)({relationValue:(0,c().n)(r),propertySchema:a,getRecordModel:t.getRecordModel,includeNoAccess:!0}):[]}const Se=2,we=40;function ke(e){const{timelineState:t,placeholderDate:n,subitemPlaceholderDate:o}=e,i=o??e.dateValue;if(!i)return;const r=t.zoomLevelStore.state,{snapUnit:a}=P[r],{startTimestamp:s,endTimestamp:l}=t.currentRangeStore.state,{start:c,end:d}=V(i,a),u=d.valueOf()>s&&c.valueOf()<l,p=N(r,c.valueOf()-s)+Se,m=o?Math.max(p+we,0):Math.max(p,0),g=N(r,d.valueOf()-s)-Se,f=N(r,l-s),v=Math.min(g,f),h=v/N(r,l-s);return{visible:u,isPlaceholder:Boolean(n),isExistingSubitemPlaceholder:Boolean(o),left:m,right:v,maskPercent:h}}},690495:(e,t,n)=>{n.d(t,{VT:()=>i,lU:()=>r});function o(e,t,o){return n(244641).c9.utc(e,t,o).toMillis()}o(1970,1,1),o(2038,1,17);const i=90,r={...{dummy_modal:{type:"campaign",end:o(2125,3,25),placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},dummy_modal_2:{type:"evergreen",placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_announcement:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2024,9,5),end:o(2025,3,25),show_on_startup:!0,dismissal_type:"once_per_user"},ai_github_ai_connector_announcement:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2024,11,11),end:o(2025,2,11),show_on_startup:!0,dismissal_type:"once_per_space"},ai_google_drive_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2024,8,14),end:o(2024,11,14),dismissal_type:"once_per_space",show_on_startup:!0},ai_microsoft_teams_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2025,11,28),end:o(2025,12,28),show_on_startup:!0,dismissal_type:"once_per_space"},ai_jira_universal_qna_announcement:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2025,1,28),end:o(2025,5,28),show_on_startup:!0,dismissal_type:"once_per_space"},mwn_feature_modal:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2024,10,14),end:o(2024,12,9),show_on_startup:!0,dismissal_type:"custom"},omnimodal:{type:"evergreen",placement:"Modal",platforms:["desktop"],dismissal_type:"custom"},notion_calendar_launch_promo:{type:"campaign",end:o(2025,4,14),placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},posts_onboarding_modal:{placement:"Modal",platforms:["desktop"],type:"evergreen",show_on_startup:!0,dismissal_type:"once_per_user"},notion_mail_launch_modal:{type:"evergreen",placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},notion_mail_launch_modal_2:{type:"evergreen",placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},organization_onboarding_modal:{type:"evergreen",placement:"Modal",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_space"},ai_for_work_announcement_modal:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2025,5,13),show_on_startup:!0,dismissal_type:"once_per_user"},ai_for_work_announcement_pro_modal:{placement:"Modal",platforms:["desktop"],type:"campaign",start:o(2025,5,13),show_on_startup:!0,dismissal_type:"once_per_user"},passkey_nudge_modal:{placement:"Modal",platforms:["mobile-web","mobile-ios","mobile-android"],type:"evergreen",show_on_startup:!0,dismissal_type:"once_per_user"}},...{integration_webhooks:{placement:"SidebarFooter",platforms:["desktop"],type:"campaign",show_on_startup:!0,dismissal_type:"once_per_user",start:o(2025,3,25),end:o(2025,6,23)},desktop_download_sidebar:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},import_data_prompt:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},configure_retention_sidebar:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_org_prompt:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},onboarding_reverse_trial_sidebar:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},block_limit_nudge:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},post_reverse_trial_sidebar:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},self_serve_business_trial_nudge:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"custom"},self_serve_business_trial_ending_soon:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_space"},lic_offer_sidebar:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},new_year_2025_offer_sidebar:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},resurrection_offer_sidebar:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_limit_nudge:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},sidebar_upgrade_nudge:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},startup_sidebar_footer:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},calendar_launch_prompt:{type:"campaign",end:o(2025,4,15),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},contact_sales_promo_sidebar_v2:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},faces_xsell_sidebar:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},student_offer_jan_2025_sidebar:{type:"campaign",end:o(2025,3,25),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},jira_ai_sidebar_reminder:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_space"},icloud_calendar_sidebar:{type:"campaign",start:o(2025,3,20),end:o(2025,4,15),placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},transcription_block_alpha_announcement:{type:"campaign",start:o(2025,3,26),placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"once_per_user",show_on_startup:!0},collaboration_callout:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],dismissal_type:"once_per_user"},notion_mail_launch_2_callout:{type:"evergreen",placement:"SidebarFooter",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"}},open_in_calendar_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},ai_google_drive_qna_notification_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_notification_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_sales_assisted_notification_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_assistant_origin_element_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},ai_slack_qna_embed_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},language_switch_prompt:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom",show_on_startup:!0},asana_post_import_tour:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],show_on_startup:!0,dismissal_type:"once_per_user"},forms_share_form_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},forms_add_conditional_logic_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},customize_slug_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},collection_add_item_button_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},workflow_template_installation:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"custom"},public_share_link_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user"},home_db_tiles_moved_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user",show_on_startup:!0},set_default_landing_page_tooltip:{type:"evergreen",placement:"Tooltip",platforms:["desktop"],dismissal_type:"once_per_user",show_on_startup:!0}}},691648:(e,t,n)=>{n.d(t,{h:()=>i,p:()=>r});var o=()=>n(645873);const i=new(o().O2)("imageEdit",(()=>n.e(81074).then(n.bind(n,667008)))),r=(0,o()._h)(i,(e=>e.ImageEditModal))},691678:(e,t,n)=>{n.d(t,{KO:()=>c,_V:()=>d,Pe:()=>u});n(898992),n(354520),n(581454);var o=()=>n(534177),i=()=>n(144081);const r={cover:!0,titleWithIcon:!0,inlinePageSections:!0,expandedBacklinks:!0,discussions:!0,bottomControls:!0,editor:!0,transcript:!0,properties:!0,formTitle:!0,formSubmit:!0,formQuestion:!0,placeholder:!0,property:!0,views:!0,viewsMain:!0,relationsGroup:!0,collectionView:!1,collectionViewV2:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function a(e){return r[e.type]}var s=()=>n(120997),l=()=>n(862387);function c(e,t){const n={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]};return(0,l().eE)(e,((e,o)=>{if("views_main_tab_modules"===o.area)n.views_main_tab_modules||(n.views_main_tab_modules={}),n.views_main_tab_modules[o.viewId]=e.filter(t);else if("form_conditional_modules"===o.area){const o=e.filter(t).filter((e=>"formQuestion"===e.type||"placeholder"===e.type));for(const e of o)n.form_conditional_modules||(n.form_conditional_modules={}),n.form_conditional_modules[e.id]=e}else n[o.area]=e.filter(t)})),n}function d(e){const t={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]};for(const n of i().E4)if("views_main_tab_modules"===n){if(!e.views_main_tab_modules)continue;for(const n of Object.keys(e.views_main_tab_modules)){if(!(0,o().zR)(n,"view_tab_"))continue;const i=e.views_main_tab_modules[n];i&&(t.views_main_tab_modules||(t.views_main_tab_modules={}),t.views_main_tab_modules[n]=i.filter((e=>void 0!==e)))}}else if("form_conditional_modules"===n){if(!e.form_conditional_modules)continue;const n=Object.values(e.form_conditional_modules).filter((e=>void 0!==e&&(0,s().p)(e,"form_conditional_modules")));t.form_conditional_modules=Object.assign({},...n.map((e=>({[e.id]:e}))))}else{const o=e[n];t[n]=o.filter((e=>null!=e))}return t}function u(e){return function(e,t){const n={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0};return(0,l().Ub)(e,((e,o)=>{if("views_main_tab_modules"===o.area)n.views_main_tab_modules||(n.views_main_tab_modules={}),n.views_main_tab_modules[o.viewId]=e.filter(t);else if("form_conditional_modules"===o.area){const o=e.filter(t).filter((e=>(0,s().V)(e,"form_conditional_modules")));for(const e of o)n.form_conditional_modules||(n.form_conditional_modules={}),n.form_conditional_modules[e.id]=e}else n[o.area]=e.filter(t)})),n}(e,a)}},694498:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o},695625:(e,t,n)=>{n.d(t,{T:()=>a});n(898992),n(354520),n(672577),n(581454);var o=()=>n(496603),i=()=>n(502438);class r extends(()=>n(959180))().A{getMembersByDOMOrder(e){let{filter:t}=e;return super.getMembersByDOMOrder({filter:e=>!e.props.isHoverMenu&&t(e)})}findSelectableFromStore(e){return this.find((t=>t.props.store===e))}findScrollToSelectableFromStore(e){return this.find((t=>t.props.store===e&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===i().default.getCurrentDefaultContainer()))}findScrollToSelectablesFromIds(e){return this.filter((t=>e.includes(t.props.store.id)&&t.props.canSelect&&!t.props.disableScrollToReveal&&t.getContextSelectableContainer()===i().default.getCurrentDefaultContainer()))}findSelectablesFromStore(e){return this.filter((t=>t.props.store===e))}findNodeFromStore(e){const t=this.findSelectableFromStore(e);if(t)return t.getNode()}getRectFromStore(e){const t=this.findNodeFromStore(e);if(t&&t instanceof Element)return t.getBoundingClientRect()}findEditableStoreWithin(e){const t=this.findSelectableFromStore(e);if(t){const e=n(301421).n.findEditableWithinSelectable(t);if(e)return e.props.store}}findSelectablesFromIds(e){const t=i().default.getCurrentDefaultContainer(),n=this.getMembersByDOMOrder({filter:()=>!0});return o().oE(e.map((e=>n.find((n=>{const o=n.props.store,i=n.getContextSelectableContainer();return Boolean(o&&o.id===e&&i===t)})))))}findAllSelectablesFromIds(e){const t=i().default.getCurrentDefaultContainer(),n=this.getMembersByDOMOrder({filter:()=>!0});return o().Bq(e.map((e=>n.filter((n=>{const o=n.props.store,i=n.getContextSelectableContainer();return Boolean(o&&o.id===e&&i===t)})))))}findNodeFromBlockId(e){var t;const n=this.findSelectablesFromIds([e]);return null==n||null===(t=n[0])||void 0===t?void 0:t.getNode()}findSelectableFromChildNode(e){const t=this.getMembersByDOMOrder({filter:t=>{var n;return null===(n=t.getNode())||void 0===n?void 0:n.contains(e)}});return t[t.length-1]}findClosestVisibleParent(e){let t=e.getParentBlockStore();for(;t;){const e=t.getParentBlockStore();if(!e)return{};const n=this.findNodeFromBlockId(t.id);if(n)return{node:n,blockStore:t};t=e}return{}}}const a=new r;(0,n(604341).exposeDebugValue)("GlobalSelectableRegistry",a)},695631:(e,t,n)=>{n.d(t,{h:()=>r,l:()=>a});n(16280),n(944114);var o=()=>n(534177),i=()=>n(358547);const r={applyMutable:function(e,t){const i=(0,n(708830).Qe)(e.children,(e=>e===t.target));if(void 0===i)return!1;if(0===i.length)throw new Error("findPathInTree: empty path");const r=1===i.length?e.children:i[i.length-2].children,a=r.indexOf(t.target);if(-1===a)throw new Error("findPathInTree: cannot find node");switch(t.operation){case"indentSelf":return function(e,t){if(0===t)return!1;const n=e[t],o=e[t-1];return e.splice(t,1),o.children.push(n,...n.children),n.children=[],!0}(r,a);case"indentSelfAndSubtree":return function(e,t){if(0===t)return!1;const n=e[t],o=e[t-1];return e.splice(t,1),o.children.push(n),!0}(r,a);case"unindentSelf":{if(1===i.length)return!1;const t=2===i.length?e.children:i[i.length-3].children,n=i[i.length-2],o=t.indexOf(n);if(-1===o)throw new Error("findPathInTree: cannot find node");return function(e,t,n){const o=e[t],i=o.children[n];return o.children.splice(n,1),e.splice(t+1,0,i),!0}(t,o,a)}case"unindentSelfAndUpdateSiblings":{if(1===i.length)return!1;const t=2===i.length?e.children:i[i.length-3].children,n=i[i.length-2],o=t.indexOf(n);if(-1===o)throw new Error("findPathInTree: cannot find node");return function(e,t,n){const o=e[t],i=o.children[n],r=o.children.splice(n+1,o.children.length-n-1);return i.children.push(...r),o.children.splice(n,1),e.splice(t+1,0,i),!0}(t,o,a)}default:(0,o().HB)(t.operation)}}};const a={getIndentOperationsFromTreeRange:(e,t)=>"indent"===t?function(e){const t=[];for(const n of(0,i().Lu)(e))t.push({operation:"indentSelf",target:n});return t}(e):"indentSelfAndSubtree"===t?function(e){const t=[];for(const n of(0,i().Lu)(e))t.push({operation:"indentSelfAndSubtree",target:n});return t}(e):"unindent"===t?function(e){const t=[];for(const n of(0,i().Lu)(e))t.push({operation:"unindentSelfAndUpdateSiblings",target:n});return t.reverse()}(e):"unindentSelf"===t?function(e){const t=[];for(const n of(0,i().Lu)(e))t.push({operation:"unindentSelf",target:n});return t.reverse()}(e):void(0,o().HB)(t)}},695905:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isConnected:!1,numConnectionAttempts:1}}}const i=new o},696152:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(959180))().A{}const i=new o},696575:(e,t,n)=>{n.d(t,{X:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm14 2.625H8.292v2.25h8.083zm0 3.5H8.292v2.25H15.5a.875.875 0 0 0 .875-.875zm0-4.75V6.25a.875.875 0 0 0-.875-.875H8.292v2.25z"})},i=(0,n(340498).wt)("tableHeaderColumn",o)},696746:(e,t,n)=>{n.d(t,{IA:()=>m,NY:()=>h,Nh:()=>g,XH:()=>_,hI:()=>y,lU:()=>f,m6:()=>b,x$:()=>v});n(898992),n(672577);var o=()=>n(868840),i=()=>n(179034),r=()=>n(519831),a=()=>n(869558),s=()=>n(496603),l=()=>n(534177),c=()=>n(351360),d=()=>n(630116);const u=(0,s().Bj)(((e,t)=>n(90634).hj({userId:e,spaceId:t})),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)})),p=(0,s().Bj)(((e,t,n)=>{if(!e||!t||!n)return;const[o]=(0,l().WP)(u(t,n)).find((t=>{let[n,o]=t;return o===e}))??[];return o}),(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)}));function m(e){var t,n;let{blockOrCollectionId:o}=e;const i=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,r=null===(n=c().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(i&&r&&o)return p(o,i,r)}function g(e){return(0,l().O9)(m({blockOrCollectionId:e}))}function f(e){return!!e&&"main"===m({blockOrCollectionId:e.id})}function v(e){const t=null==e?void 0:e.getParentId(),n=null==e?void 0:e.getSpaceId();if(!t||!n||!e)return;const o=u(t,n).main,r=e.getSpaceStore();return o&&r?d().Bv.createChildStore(r,{table:i().ev,id:o,spaceId:r.id}):void 0}function h(e){var t,n;const o=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id,i=null===(n=c().default.state.currentSpaceStore)||void 0===n?void 0:n.id;if(o&&i)return u(o,i)[e]}function _(e){const t=c().default.state.currentSpaceStore;if(!t)return;const n=t.id;switch(e){case"main":case"myTasks":case"customDb":case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":case"posts":const o=h(e);return o?d().Bv.createChildStore(t,{table:i().ev,id:o,spaceId:n}):void 0;case"myTasksAssignedToMeCollectionView":case"customDbCollectionView":case"similarUsersCollectionView":case"trendingCollectionView":case"mostVisitedCollectionView":case"lastEditedCollectionView":case"favoritesCollectionView":case"postsCollectionView":case"postsFollowingCollectionView":case"postsDiscoverCollectionView":const s=h(e);return s?d().pS.createChildStore(t,{table:a().Gy,id:s,spaceId:n}):void 0;case"trendingCollection":case"similarUsersCollection":case"mostVisitedCollection":case"lastEditedCollection":case"favoritesCollection":const c=h(e);return c?d().md.createChildStore(t,{table:r().Vl,id:c,spaceId:n}):void 0;default:(0,l().HB)(e)}}function b(){return{hide_linked_collection_name:!0,collection_peek_mode:o().O,inline_collection_first_load_limit:{type:"load_limit",limit:20}}}const y=(0,n(836251).xS)("guides.taskDatabases")},697868:(e,t,n)=>{n.d(t,{Ay:()=>v,Cu:()=>h,MG:()=>_});var o=n(296540),i=()=>n(847249),r=()=>n(799954),a=()=>n(959013),s=()=>n(989423);var l=()=>n(324089),c=()=>n(891078),d=()=>n(502438),u=()=>n(493733),p=()=>n(42425),m=n(474848);const g=(0,a().YK)({placeholder:{defaultMessage:"Toggle",id:"toggleBlock.placeholder"}});function f(e,t){const f=(0,n(484714).v3)(),v=(0,a().tz)(),h=(0,o.useRef)(!0);(0,o.useLayoutEffect)((()=>{h.current&&(h.current=!1,l().MB({blockId:e.store.id,currentUserId:f.currentUser.id}),l()._z(f,e.store))}));const _=(0,o.useRef)(null),b=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),S=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),w=(0,i().K8)((()=>n(468484).A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),k=(0,i().K8)((()=>!e.store.hasContent()),[e.store]),I=(0,o.useId)(),x=(0,o.useId)(),A=(0,i().K8)((()=>n(744705).X(e.store)||!e.store.isDefaultRecordCache()),[e.store]),C=(0,i().K8)((()=>e.store.getType()),[e.store]);(0,n(176663)._)({loaded:A,blockType:C,isOpen:w});const T=(0,o.useCallback)((()=>{let t;t=n(496603).mK(d().default.state.stores,e.store)?d().default.state.stores:[e.store];const o=!w;for(const e of t)l().xT({blockId:e.id,state:o,currentUserId:f.currentUser.id});!function(e,t){s().vd(e,"toggle_block_toggle")}(f)}),[f,w,e.store]),M=(0,o.useCallback)((()=>{n(751156).createAndCommit({userAction:"ToggleBlock.handlePlaceholderClick",environment:f,canUndo:!0,perform:t=>{l()._N({environment:f,store:e.store,transaction:t})}})}),[f,e.store]),P=(0,o.useCallback)((e=>{if(e.shiftKey){const e=n(186445).ao();e&&l().In({environment:f,blockStore:e})}else T()}),[f,T]),B=(0,c().pW)(e.store,!0),R=(0,n(401497).IS)((t=>({root:{paddingLeft:r().nE.paddingLeft,...B,...e.style},placeholderButton:{fontSize:"inherit",width:"100%",borderRadius:4,caretColor:t.text.tertiary,...r().nE,marginTop:2},placeholderText:{color:t.text.tertiary},title:{...p().FC},titlePlaceHolder:{...S?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},leftStyle:{paddingRight:2}})),[B,S,e.style]),E=(0,m.jsx)(n(704152).A,{style:R.placeholderButton,onClick:M,disabled:e.disabled,children:(0,m.jsx)("span",{style:R.placeholderText,children:(0,m.jsx)(a().sA,{defaultMessage:"Empty toggle. Click or drop blocks inside.",id:"toggleBlock.emptyBlock.placeholderText"})})}),D=(0,m.jsxs)(p().Ay,{style:R.root,left:(0,m.jsx)(n(702796).A,{"aria-describedby":I,"aria-controls":x,isSidebar:!1,open:w,fill:!k,onClick:P}),leftStyle:R.leftStyle,ref:_,children:[(0,m.jsxs)("div",{style:{display:"flex"},children:[(0,m.jsx)(n(524702).A,{id:I,style:R.title,disabled:e.disabled,store:b,placeholder:e.placeholder??v.formatMessage(g.placeholder),placeholderStyle:R.titlePlaceHolder,pasteBehavior:"block",inPageFind:n(792540).Os.block_match,legacyTransclusionParentStore:e.legacyTransclusionParentStore,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,m.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!w})]}),w?(0,m.jsx)(n(378765).A,{id:x,loaded:A,spinnerSize:"relative",showSpinnerTimeout:500,innerStyle:{display:"flex",flexDirection:"column",width:"100%"},style:{display:"flex"},children:(0,m.jsx)(u().A,{store:y,emptyPlaceholder:E,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag})}):(0,m.jsx)(u().A,{store:y,disabled:e.disabled,disableContent:!0})]});return(0,c().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"toggle",getNode:()=>_.current,getBlockStore:()=>e.store,activate(){T()}})),[e.store,T]),D)}const v=o.memo(o.forwardRef(f),n(821062).A);function h(){return{display:"flex"}}function _(){return{display:"flex",flexDirection:"column",width:"100%"}}},698449:(e,t,n)=>{n.d(t,{Pf:()=>d,cp:()=>m,gA:()=>p,xQ:()=>u});n(898992),n(354520),n(672577),n(581454);var o=()=>n(68263),i=()=>n(798880),r=()=>n(496603),a=()=>n(646736),s=()=>n(605402),l=()=>n(870092);const c=(0,n(959013).YK)({untitledGroupName:{defaultMessage:"Untitled",id:"spaceBasicSettings.spacePermissionsSettings.groupsTab.defaultNewGroupName"}});function d(e){const{intl:t,groupName:n}=e;return n||t.formatMessage(c.untitledGroupName)}function u(e){var t;return(null===(t=s().A.state.permissionGroupsAndMemberCounts.find((t=>t.group.group_id===e.groupId)))||void 0===t?void 0:t.memberCount)??0}function p(e){const{userIds:t,limit:n,spaceStore:o}=e;if(!o)return{countRemainingUsers:0,limitedUserStores:[]};const a=n?t.slice(0,n):t;return{limitedUserStores:r().oE(a.map((e=>l().L.createChildStore(o,{table:i().oo,id:e})))),countRemainingUsers:t.length-a.length}}function m(e){let{userStores:t,spaceStore:n,intl:i}=e;return r().Ul(t,(e=>e.getSearchName(i))).sort(((e,t)=>{if(!n)return 0;const i=(0,a().dp)(n,e.id).getMembershipTypeAsRoleOrNone(),r=(0,a().dp)(n,t.id).getMembershipTypeAsRoleOrNone();return i&&r?o().hV.indexOf(r)-o().hV.indexOf(i):0}))}},699744:(e,t,n)=>{n.d(t,{XJ:()=>v,rq:()=>h,sr:()=>f});n(944114),n(898992),n(823215),n(672577),n(803949),n(581454),n(737550);var o=()=>n(919709),i=()=>n(681373),r=()=>n(496603),a=()=>n(534177),s=()=>n(413962),l=()=>n(423804),c=()=>n(962845),d=()=>n(792002),u=()=>n(77246),p=()=>n(910302),m=()=>n(538527),g=()=>n(789200);function f(e){const{environment:t,multiSelection:n,annotation:f,transaction:v}=e,h=(0,i().Au)(f),_=(0,c().$W)(n),b=s().Rq(n),y=b?u().Uv.getMode(b):"default",S=(0,d().x7)([h],n,{}),w=o().YuY(f)&&r().n4(f,S[h]),k=!o().iQL(f)&&!o().I1e(f)&&!o().YuY(f)&&Boolean(S[h])||w;if("default"!==y&&o().czo(f)&&"translate_unlocked"!==y)if("suggest"===y){const e=s().RR(t,v,n),i=e.id,r=k?[o().Ifu.SuggestionUnannotate,i,f]:[o().Ifu.SuggestionAnnotate,i,f],a=[];_.forEach((e=>{let{store:n,selection:i}=e;const s=n.getValue(),c=o().xbM(s,i),d=o().gsT({textValue:s,startIndex:c.startIndex,endIndex:c.endIndex}).find((e=>{let{annotation:i}=e;if(o().MXn(i)||o().zIw(i)){const e=o().Dew(i);if(1===e.length&&e[0]===h){const e=o().vu(i),r=l().o9({store:n,discussionId:e});if(r)return l().Ih(r,t.currentUser)}}}));d&&d.startIndex<=c.startIndex&&d.endIndex>=c.endIndex||(m().Mw({environment:t,store:n,annotation:r,selection:c,transaction:v}),a.push(n.id))})),a.length>0&&s().c3({environment:t,transaction:v,discussionStore:e,addModifiedBlockIdsAfter:a})}else"translate_locked"===y?p()._4():(0,a().HB)(y);else _.forEach((e=>{let{store:n,selection:i}=e;k?g().g({environment:t,store:n,annotationKey:o().JIi(f),selection:i,transaction:v,updateSelection:!1}):m().Mw({environment:t,store:n,annotation:f,selection:i,transaction:v})}))}function v(e){const{environment:t,blocks:n,annotation:i,transaction:a}=e,s=o()._XS(i),l=r().oE(n.map((e=>{const t=e.getTitleStore();if(!t)return;const n=t.getValue();return n?{block:e,titleStore:t,titleValue:n}:void 0}))),c=l.every((e=>{let{titleValue:t}=e;return t.every((e=>o().uPN(e).some((e=>o()._XS(e)===s))))}));for(const{titleStore:o}of l)h({environment:t,annotation:i,textStore:o,action:c?"removeAnnotationType":"annotate",transaction:a})}function h(e){const{environment:t,annotation:n,transaction:i,textStore:r,action:a}=e;"annotate"===a?m().Mw({environment:t,store:r,annotation:n,selection:{startIndex:0,endIndex:1/0},transaction:i}):g().g({environment:t,store:r,annotationKey:o().JIi(n),selection:{startIndex:0,endIndex:1/0},transaction:i,updateSelection:!1})}},700180:(e,t,n)=>{n.d(t,{A:()=>i});var o=()=>n(388487);function i(e){let{children:t,...n}=e;return(0,o().A)(n),t}},700239:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(296540),i=()=>n(401497),r=()=>n(753199),a=n(474848);function s(){}function l(e,t){let{checked:l,disabled:c,onClick:d,onMouseDown:u,onMouseEnter:p,onMouseLeave:m,inputStyle:g,style:f,children:v,withComma:h,id:_,disallowTabbing:b,...y}=e;const S=(0,o.useRef)(null),[w,k]=(0,n(819121).A)(),I=(0,n(93583).A)(S,w,t),x=(0,i().IS)((e=>({root:{position:"relative",flexShrink:0,flexGrow:0,...k&&{boxShadow:e.outlineBlueInputBoxShadow}},input:{position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,...g,...c?{pointerEvents:"none"}:{cursor:"pointer"}}})),[c,k,g]);(0,o.useEffect)((()=>{null!==S.current&&(S.current.indeterminate="partial"===l)}),[l]);const A=(0,o.useCallback)((e=>{(0,r().SQ)({event:e,context:r().y$.EditorClick,callback:()=>{void 0!==d&&d(e)}})}),[d]),C=(0,i().DP)();return(0,a.jsxs)("div",{...(0,n(955825).AH)(x.root,f,c?{}:{pseudoHover:{background:C.buttonHoveredBackground},pseudoActive:{background:C.buttonPressedBackground}}),children:[v,(0,a.jsx)("input",{...y,disabled:c,checked:!0===l||"partial"===l,onClick:A,onChange:s,onMouseDown:u,onMouseEnter:p,onMouseLeave:m,type:"checkbox",ref:I,style:x.input,id:_,tabIndex:b?-1:void 0})]})}const c=o.forwardRef(l)},700250:(e,t,n)=>{n.d(t,{Ay:()=>m,MY:()=>d,UV:()=>c,W0:()=>u});var o=()=>n(962730);const{Top:i,Bottom:r,Left:a,Right:s,Center:l}=o().W,c=o().W,d=o().C;function u(e){switch(e){case i:return r;case r:return i;case a:return s;case s:return a;case l:return l}}class p extends(()=>n(757695))().default{getInitialState(){return{open:!1,offsetX:0,offsetY:0,originRect:n(397248).v_}}}const m=p},700251:(e,t,n)=>{n.d(t,{kq:()=>c,xI:()=>s,y$:()=>l});n(296540);var o=()=>n(484714),i=()=>n(340498),r=()=>n(645873),a=n(474848);function s(){let{size:e="default",type:t="system",isMobile:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o="custom"===t?2:0;return(n?i().lD[e]:i().Ev[e])-o}function l(){let{size:e="default",type:t="system"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{isMobile:n}=(0,o().Y0)();return s({size:e,type:t,isMobile:n})}function c(e,t){const n=new(r().O2)(e,t);return Object.assign(((e,t)=>(0,a.jsx)(r().u2,{dependency:n,children:n=>n(e,t)})),{__dependency:n})}},701685:(e,t,n)=>{n.d(t,{X:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("twitter",{viewBox:"0 0 2400 2452",svg:(0,o.jsx)("path",{d:"M5.3 7.7c4.6 6.6 920.6 1339.9 928.8 1351.9l2.9 4.2-463.2 538.3C219.1 2198.2 8.2 2443.3 5.2 2446.7l-5.4 6.3h211.8l409.5-476c225.2-261.8 409.6-476 409.9-476 .3 0 147.7 214.2 327.5 476l327 476h714.6l-2.9-4.3c-1.6-2.3-220-320.1-485.2-706.2-265.3-386.1-482.4-702.7-482.4-703.6-.1-.8 200.4-234.6 445.4-519.4C2120 234.7 2320.7 1.3 2320.8.8c.2-.4-47.1-.8-105.1-.8h-105.5l-387.4 450.2c-213 247.6-387.7 450.3-388.3 450.4-.5.2-140.2-202.4-310.4-450.1L714.7 0H-.1l5.4 7.7zm669 239c283.8 405.9 1434.5 2052.1 1435.1 2053 .6 1-32 1.3-161.7 1.3h-162.5l-341-487.7C1256.7 1545 920 1063.4 696.1 743.1 472.2 422.8 289 160.4 289 159.9s68.3-.9 162-.9h161.9l61.4 87.7z"})})},701763:(e,t,n)=>{n.d(t,{$N:()=>U,Ah:()=>x,CW:()=>w,FR:()=>J,FX:()=>Q,Fn:()=>j,Fs:()=>Y,G8:()=>O,Is:()=>b,K4:()=>E,KI:()=>R,MR:()=>q,Nn:()=>N,Sd:()=>$,Sp:()=>Z,T_:()=>K,UY:()=>F,Uo:()=>T,VJ:()=>C,W2:()=>v,W7:()=>M,Y1:()=>y,Z9:()=>_,Zf:()=>B,cK:()=>X,e1:()=>V,jR:()=>S,lD:()=>A,pf:()=>h,qI:()=>G,s$:()=>L,sY:()=>P,yg:()=>D});n(898992),n(354520),n(672577),n(803949),n(581454),n(737550);var o=()=>n(433847),i=()=>n(68263),r=()=>n(464192),a=()=>n(962277),s=()=>n(116225),l=()=>n(496603),c=()=>n(498212),d=()=>n(534177),u=()=>n(989423),p=()=>n(731320),m=()=>n(437487),g=()=>n(508496),f=()=>n(946141);function v(e,t){u().vd(e,"permissions_settings_security_banner_show",t)}function h(e,t){u().vd(e,"permissions_settings_security_banner_click",t)}function _(e,t){u().vd(e,"permissions_settings_search_click",t),g().default.logEvent("permissions_settings_search_click",t.current_tab)}function b(e,t){u().vd(e,"permissions_settings_export_guests_button_click",t),g().default.logEvent("permissions_settings_export_guests_button_click",1,t)}function y(e,t){u().vd(e,"permissions_settings_table_multiselect_click",t)}function S(e,t){u().vd(e,"permissions_settings_table_button_click",t),g().default.logEvent("permissions_settings_table_button_click",t.button_name,t)}function w(e,t){u().vd(e,"permissions_settings_invite_button_click",t),g().default.logEvent("permissions_settings_invite_button_click",t.type)}function k(e){const{user_id:t,page_id:n,...o}=e;return o}function I(e,t){u().vd(e,"update_page_permission","user_id"in t||"page_id"in t?k(t):t)}function x(e,t){u().vd(e,"set_permission_item",t)}function A(e,t){if("team"===t.type){const{team_id:n,...o}=t;u().vd(e,"expand_permission",{...o},{forceOverrideAutomaticEventData:{team_id:n}})}else u().vd(e,"expand_permission",t)}function C(e,t){u().vd(e,"page_share_user_access_role",t)}function T(e){const{newRole:t,availableRoles:n}=e;if("none"===t||"content_only_editor"===t)return;n.some((e=>"content_only_editor"===e.role))&&s().u4({name:"save_non_content_editor_role"})}function M(e){const{environment:t,spaceBot:n,from:o}=e;u().u4({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_bot_id:(0,c().Xw)(n.bot_id),from:o,membership_type:n.membership_type,parent_table:n.bot_parent_table,parent_id:n.bot_parent_id}}}),g().default.logEvent("update_space_permission",o,{membership_type:n.membership_type})}function P(e){const{environment:t,spaceUser:n,from:o}=e;u().u4({environment:t,event:{eventName:"update_space_permission",eventProperties:{updated_user_id:(0,c().Xw)(n.user_id),membership_type:n.membership_type,invite_id:n.invite_id,from:o}}}),g().default.logEvent("update_space_permission",o,{membership_type:n.membership_type})}function B(e,t){var n;let{item:o,teamStore:i}=t;const r=null===(n=i.getPermissionItems())||void 0===n?void 0:n.find((e=>e.type===o.type));(null==r?void 0:r.role)!==o.role&&f().rP(e,"update_team_permission",{store:i,..."user_id"in o||"page_id"in o?k(o):o,..."user_id"in o&&{permission_user_id:(0,c().Xw)(o.user_id)},old_role:null==r?void 0:r.role,is_team_role_change:!1,is_permission_change:!0})}function R(e,t){let{memberInfo:n,store:o,team_role:i}=t;f().rP(e,"update_team_permission",{store:o,team_role:i,is_team_role_change:!0,is_permission_change:!1,..."user"===n.entity_type?{permission_user_id:n.user_id}:{permission_group_id:n.group_id}})}function E(e,t){u().vd(e,"permissions_settings_tab_click",t),g().default.logEvent("permissions_settings_tab_click",t.tab,t)}function D(e){u().vd(e,"permission_group_rename")}function N(e,t){u().vd(e,"permission_group_set_icon",t)}function L(e,t){u().vd(e,"permission_group_add_members",t)}function O(e){u().vd(e,"permission_group_remove_member")}function U(e){u().vd(e,"permission_group_delete")}function F(e){u().vd(e,"permission_group_create")}function V(e){var t;let{environment:n,location:o,inSudoMode:i,store:r,newItems:a,fromPermissionWrapper:s,flowId:l}=e;const c=null===(t=r.getCollectionStore())||void 0===t?void 0:t.id,d=r.getParentCollectionIdUpToTwoLevels();z({store:r,newItems:a}).forEach((e=>{let{role_old_inherited_or_most_permissive:t,role_old_on_page:r,privacy_level:a,old_privacy_level:u,newItem:p}=e;I(n,a||u?{...p,location:o,in_sudo_mode:i||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:r,privacy_level:a,old_privacy_level:u,share_menu_session_id:m().Ay.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l}:{...p,location:o,in_sudo_mode:i||void 0,role_old_inherited_or_most_permissive:t,role_old_on_page:r,share_menu_session_id:m().Ay.state.sessionId,from_permission_wrapper:s,collection_id:c,parent_collection_id:d,invite_flow_id:l})}))}function j(e){const{environment:t,calculatedPermissions:n}=e;u().vd(t,"page_share_permissions_summary",{share_menu_session_id:m().Ay.state.sessionId,page_permission_summary:W(n)})}function z(e){let{store:t,newItems:n}=e;const r=e=>`${e.type}:${o().zr(e)}`,a=t.getPermissionItems(),s=l().pY(a,r),c=p().i0(t).map((e=>e.permissionItem)),d=l().pY(c,r);return n.map((e=>{var t;const n=r(e),o=d[n],a=null===(t=s[n])||void 0===t?void 0:t.role,l=null==o?void 0:o.role;return(0,i().Lg)(e)?{newItem:e,role_old_inherited_or_most_permissive:l,role_old_on_page:a,privacy_level:H(e),old_privacy_level:o&&(0,i().Lg)(o)?H(o):"private"}:{newItem:e,role_old_inherited_or_most_permissive:l,role_old_on_page:a}}))}function H(e){return"none"===e.role?"private":e.unlisted_timestamp?"unlisted":"open"}function W(e){const{mostPermissiveSpaceItem:t,mostPermissiveAncestorTeamOwnerItem:n,mostPermissiveAncestorTeamMemberItem:o,pagePermissionUIModel:s,mostPermissivePublicItem:l}=e,{mostPermissiveGroupPermissions:c,mostPermissiveUserPermissions:d}=s;return{public:{role:l.permissionItem.role,is_public_share_link:(0,r().v)(l.permissionItem),is_site:(0,a().W)(l.permissionItem)},space:t.permissionItem.role,team_owner:null==n?void 0:n.permissionItem.role,team_member:null==o?void 0:o.permissionItem.role,groups:{full_access:c.filter((e=>{let{permissionItem:{role:t}}=e;return i().Km(t)})).length,can_edit:c.filter((e=>{let{permissionItem:{role:t}}=e;return i().BP(t)})).length,can_edit_content:c.filter((e=>{let{permissionItem:{role:t}}=e;return i().uQ(t)})).length,can_comment:c.filter((e=>{let{permissionItem:{role:t}}=e;return i().MZ(t)})).length,can_view:c.filter((e=>{let{permissionItem:{role:t}}=e;return i().h9(t)})).length},users:{full_access:d.filter((e=>{let{permissionItem:{role:t}}=e;return i().Km(t)})).length,can_edit:d.filter((e=>{let{permissionItem:{role:t}}=e;return i().BP(t)})).length,can_edit_content:d.filter((e=>{let{permissionItem:{role:t}}=e;return i().uQ(t)})).length,can_comment:d.filter((e=>{let{permissionItem:{role:t}}=e;return i().MZ(t)})).length,can_view:d.filter((e=>{let{permissionItem:{role:t}}=e;return i().h9(t)})).length},privacy_level:H(t.permissionItem)}}function q(e){u().vd(e,"widen_permissions")}function K(e,t){let n;u().vd(e,"request_access",t),"page"===t.request_access_type||"collection"===t.request_access_type?n=t.requested_access_level:"team"===t.request_access_type?n="team_access_request":"space"===t.request_access_type?n="space_access_request":(0,d().HB)(t),g().default.logEvent("request_access",n,t)}function G(e,t){u().vd(e,"grant_access",t),g().default.logEvent("grant_access",t.newAccessLevel,t)}function $(e,t){u().vd(e,"grant_access_update_access_level",t)}function Y(e,t){u().vd(e,"ignore_access_request",t)}function Q(e,t){u().vd(e,"toggle_request_access_security_setting",t)}function Z(e,t){u().vd(e,"view_all_requests_from_membership_request_notification",t),g().default.logEvent("view_all_requests_from_membership_request_notification","notification",t)}function X(e){u().vd(e,"open_guest_membership_request_modal"),g().default.logEvent("open_guest_membership_request_modal")}function J(e){u().vd(e,"render_guest_membership_request_entry_point"),g().default.logEvent("render_guest_membership_request_entry_point")}},702796:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(296540),i=n(474848);const r={viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M2.835 3.25a.8.8 0 0 0-.69 1.203l5.164 8.854a.8.8 0 0 0 1.382 0l5.165-8.854a.8.8 0 0 0-.691-1.203z"})},a=(0,n(340498).wt)("arrowCaretDownFillSmall",r);var s=()=>n(959013);const l=(0,s().YK)({open:{defaultMessage:"Open",id:"toggleButton.open"},close:{defaultMessage:"Close",id:"toggleButton.close"}}),c=o.memo((function(e){const t=(0,n(484714).Y0)(),r=(0,s().tz)(),c=(0,n(600871).cV)({device:t}),d=(0,o.useMemo)((()=>function(e){let{isSidebar:t,isMobile:n,useLargerMobileSize:o}=e;return t&&!n?20:o?32:24}({isSidebar:e.isSidebar,isMobile:t.isMobile,useLargerMobileSize:c})),[t.isMobile,e.isSidebar,c]),u=t.isMobile?d:void 0,p=(0,n(401497).IS)((()=>{const n=e.color||"inherit",o=`rotateZ(${e.open?0:-90}deg)`,i="chevron"===e.icon&&!t.isMobile;return{button:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",width:d,height:d,borderRadius:4,...e.style},arrow:{width:i?12:"0.8em",height:i?12:"0.8em",transition:"transform 200ms ease-out",transform:o,fill:n,opacity:e.fill?1:.5}}}),[t.isMobile,e.color,e.fill,e.icon,e.open,e.style,d]),m=(0,o.useMemo)((()=>"chevron"===e.icon?(0,n(346615).p)(p.arrow):a(p.arrow)),[e.icon,p.arrow]);return(0,i.jsxs)(n(704152).A,{ariaLabel:e.open?r.formatMessage(l.close):r.formatMessage(l.open),"aria-describedby":e["aria-describedby"],"aria-expanded":e.open,"aria-controls":e.open?e["aria-controls"]:void 0,style:p.button,onClick:e.onClick,onMouseDown:e.onMouseDown,disabled:e.disabled,allowShiftClick:!0,children:[u&&(0,i.jsx)("div",{style:{position:"absolute",opacity:0,width:u,height:u,top:-(u-d)/2,left:-(u-n(42425).pU)/2}}),m]})}))},704152:(e,t,n)=>{n.d(t,{A:()=>o().A});var o=()=>n(197190)},705540:(e,t,n)=>{n.r(t),n.d(t,{addSetEmulationListener:()=>lt,appUpdateAvailable:()=>$,appUpdateChecking:()=>G,appUpdateError:()=>K,appUpdateFinished:()=>Z,appUpdateInstall:()=>X,appUpdateNotAvailable:()=>Y,appUpdateProgress:()=>Q,appUpdateReady:()=>q,checkForUpdates:()=>V,clearBrowserHistory:()=>P,clearCookies:()=>we,clearGoogleAuthCookies:()=>ke,closeGlobalSearchModal:()=>je,closeQuickSearch:()=>We,closeTab:()=>A,downloadUrl:()=>Ie,electronApi:()=>v,electronAppFeatures:()=>Re,electronCurrentTab:()=>k,electronTabs:()=>w,electronUpdateAvailable:()=>z,electronUpdateChecking:()=>j,electronUpdateError:()=>F,electronUpdateNotAvailable:()=>H,electronUpdateProgress:()=>W,electronUpdateReady:()=>U,fullscreen:()=>te,getCurrentZoom:()=>re,getDesktopVersion:()=>h,getDeviceName:()=>mt,getMediaAccessStatus:()=>dt,getRunningInputAudioProcesses:()=>gt,getSqliteDiskUsage:()=>ct,getSubstitutions:()=>ge,handleBackMetaClick:()=>B,handleBackPinnedClick:()=>E,handleForwardMetaClick:()=>R,handleForwardPinnedClick:()=>D,handleTabClicked:()=>S,handleTabHistoryMenu:()=>N,initializeElectron:()=>Pe,initializeRunningInputAudioProcessDetection:()=>_t,installElectronUpdate:()=>J,isActiveTab:()=>Oe,isMainTabOrWindow:()=>fe,isProtocolRegistered:()=>Ce,isRunningUnderArm64Translation:()=>ee,isVersionVulnerableWhenUniversalLinksIsOff:()=>wt,isWindowVisible:()=>Ue,logErrorForOffline:()=>ft,navigateToBlock:()=>ht,navigateToBlockInTab:()=>vt,navigationReady:()=>Te,newTab:()=>y,onNewWindow:()=>_e,openAppMenu:()=>de,openDevTools:()=>ue,openExternalUrl:()=>T,openGoogleDrivePickerPopup:()=>ye,openInNewTab:()=>_,openInNewTabAfterFlush:()=>b,openInNewWindow:()=>x,openNotificationUrl:()=>M,openNotionAiFromQuickSearch:()=>et,openNotionUrl:()=>C,openOauthPopup:()=>be,openPageFromGlobalSearch:()=>ze,openQuickSearchResult:()=>qe,openQuickSearchShortcutSetting:()=>Ze,openSearchModalForNewTab:()=>tt,openSearchModalFromQuickSearch:()=>Je,openSystemSettings:()=>ut,openTabFromQuickSearch:()=>He,performShortcut:()=>rt,pushToast:()=>St,pushToastInMainTab:()=>yt,quickSearchNotReady:()=>Ge,quickSearchReady:()=>Ke,quickSearchRefresh:()=>Qe,quickSearchRenderCompleted:()=>$e,quickSearchSetSearchAssistantMode:()=>Ye,quickSearchVisibilityState:()=>Xe,refreshAll:()=>Be,relaunch:()=>pt,runningInputAudioProcessesChanged:()=>bt,setActiveBlocks:()=>ot,setAppStoreState:()=>Le,setBadge:()=>L,setCloseConfirmationDialogReason:()=>at,setGlobalShortcutsEnabled:()=>it,setIsRecording:()=>nt,setLogglyData:()=>Se,setNetworkEmulation:()=>st,setOverlay:()=>O,setTabBreadcrumbs:()=>me,setTabColors:()=>he,setTheme:()=>ve,setUnauthorizedIframeUrls:()=>I,setWindowTitle:()=>pe,sidebarState:()=>Ee,snackbarReady:()=>Me,subscribeToProtocolUrl:()=>xe,subscribeToSettingsMenuItem:()=>Ae,tabSpacesState:()=>De,toggleMaximized:()=>ce,track:()=>Fe,trackBatched:()=>Ve,windowSidebarState:()=>Ne,zoomIn:()=>ae,zoomOut:()=>se,zoomReset:()=>le});n(811558),n(898992),n(354520),n(581454);var o=()=>n(418135),i=()=>n(857639),r=()=>n(651170),a=()=>n(711059),s=()=>n(496603),l=()=>n(502800),c=()=>n(763824),d=()=>n(973647),u=()=>n(939768),p=()=>n(435009);function m(){const e=function(e){const t=e.match(/Mac OS X (\d+_\d+)/);if(t)return t[1].split("_").map((e=>parseInt(e,10)));return}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.userAgent);return!!e&&(10===e[0]&&e[1]<15)}var g=()=>n(219187);let f="lastProtocolUrlDeduplicationId";const v=g().electronApi,h=g().getDesktopVersion;function _(e){const t=u().ZO(e.url);v&&(v.openInNewTab?v.openInNewTab(t,Boolean(e.makeTabActive),e.position||"after-children",e.isNewPage,e.initialTitle,e.initialFavicon):v.openInNewWindow(t))}function b(e,t){t.isNewPage&&e.defaultRecordCache.persistedRecordCache?e.defaultRecordCache.persistedRecordCache.flushPendingWrites().then((()=>{_(t)})).catch((()=>{_(t)})):_(t)}function y(e){v&&null!=v&&v.newTab?v.newTab():_({url:"",makeTabActive:!0,position:e?"end":"start"})}function S(e){var t;null==v||null===(t=v.handleTabClicked)||void 0===t||t.call(v,e)}const w={addListener(e){var t,n;return null==v||null===(t=v.electronTabs)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},k={addListener(e){var t,n;return null==v||null===(t=v.electronCurrentTab)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},I={addListener(e){var t,n;return null==v||null===(t=v.setUnauthorizedIframeUrls)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function x(e){const t=u().ZO(e);null==v||v.openInNewWindow(t)}function A(){var e;null==v||null===(e=v.closeTab)||void 0===e||e.call(v)}function C(e){let{openInNew:t,url:n,makeTabActive:o,position:i,isNewPage:r,environment:a}=e;"tab"!==t?"window"!==t||x(n):b(a,{url:n,position:i,makeTabActive:o,isNewPage:r})}async function T(e){if(!v)return!1;return void 0===u().q7(e)?(i().log({level:"warning",from:"electronActions",type:"badUrlInOpenExternalUrlDetected",data:{miscDataToConvertToString:{url:e}}}),!1):await v.openExternalUrl(e)}function M(e,t){null!=v&&v.openNotificationUrl?v.openNotificationUrl(e):p().oo({environment:t,url:e})}function P(){null==v||v.clearBrowserHistory()}function B(){var e,t;null==v||null===(e=v.navigationHistory)||void 0===e||null===(t=e.handleBackMetaClick)||void 0===t||t.call(e)}function R(){var e,t;null==v||null===(e=v.navigationHistory)||void 0===e||null===(t=e.handleForwardMetaClick)||void 0===t||t.call(e)}function E(){var e,t;null==v||null===(e=v.navigationHistory)||void 0===e||null===(t=e.handleBackPinnedClick)||void 0===t||t.call(e)}function D(){var e,t;null==v||null===(e=v.navigationHistory)||void 0===e||null===(t=e.handleForwardPinnedClick)||void 0===t||t.call(e)}function N(e,t,n){var o,i;null==v||null===(o=v.navigationHistory)||void 0===o||null===(i=o.handleTabHistoryMenu)||void 0===i||i.call(o,e,t,n)}function L(e){return null==v?void 0:v.setBadge(e)}function O(e){var t;return null==v||null===(t=v.setOverlay)||void 0===t?void 0:t.call(v,e)}const U={addListener:e=>null==v?void 0:v.updateReady.addListener(e)},F={addListener(e){var t,n;return null==v||null===(t=v.updateError)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function V(){var e;null==v||null===(e=v.checkForUpdates)||void 0===e||e.call(v)}const j={addListener(e){var t,n;return null==v||null===(t=v.updateChecking)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},z={addListener(e){var t,n;return null==v||null===(t=v.updateAvailable)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},H={addListener(e){var t,n;return null==v||null===(t=v.updateNotAvailable)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},W={addListener(e){var t,n;return null==v||null===(t=v.updateProgress)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},q={addListener(e){var t,n;return null==v||null===(t=v.appUpdateReady)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},K={addListener(e){var t,n;return null==v||null===(t=v.appUpdateError)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},G={addListener(e){var t,n;return null==v||null===(t=v.appUpdateChecking)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},$={addListener(e){var t,n;return null==v||null===(t=v.appUpdateAvailable)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Y={addListener(e){var t,n;return null==v||null===(t=v.appUpdateNotAvailable)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Q={addListener(e){var t,n;return null==v||null===(t=v.appUpdateProgress)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Z={addListener(e){var t,n;return null==v||null===(t=v.appUpdateFinished)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},X={addListener(e){var t,n;return null==v||null===(t=v.appUpdateInstall)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function J(){null==v||v.installUpdate()}function ee(){var e;return null==v||null===(e=v.isRunningUnderArm64Translation)||void 0===e?void 0:e.call(v)}const te={get:()=>null==v?void 0:v.fullscreen.get(),addListener:e=>null==v?void 0:v.fullscreen.addListener(e)};function ne(e,t,n){return Math.min(Math.max(e,n),t)}let oe,ie=1;function re(){return ie}function ae(){var e;null!=v&&null!==(e=v.zoom)&&void 0!==e&&e.set&&(ie+=o().vN,v.zoom.set(ne(o().yU,o().y$,ie)))}function se(){var e;null!=v&&null!==(e=v.zoom)&&void 0!==e&&e.set&&(ie-=o().vN,v.zoom.set(ne(o().yU,o().y$,ie)))}function le(){var e;null!=v&&null!==(e=v.zoom)&&void 0!==e&&e.set&&(ie=o().rx,v.zoom.set(ie))}function ce(){var e;null==v||null===(e=v.toggleMaximized)||void 0===e||e.call(v)}function de(){var e;null==v||null===(e=v.openAppMenu)||void 0===e||e.call(v)}function ue(){var e;null==v||null===(e=v.openDevTools)||void 0===e||e.call(v)}function pe(e){var t;null==v||null===(t=v.setWindowTitle)||void 0===t||t.call(v,e)}function me(e){var t;null==v||null===(t=v.setTabBreadcrumbs)||void 0===t||t.call(v,e)}function ge(){return oe||[]}async function fe(){return v&&v.isMainTab?v.isMainTab():!v||!v.isMainWindow||v.isMainWindow()}function ve(e){var t;null==v||null===(t=v.setTheme)||void 0===t||t.call(v,e)}function he(e){var t;null==v||null===(t=v.setTabColors)||void 0===t||t.call(v,e)}function _e(e){var t,n;null==v||null===(t=v.newWindow)||void 0===t||null===(n=t.addListener)||void 0===n||n.call(t,e)}async function be(e){var t;return null==v||null===(t=v.openOauthPopup)||void 0===t?void 0:t.call(v,e)}async function ye(e){var t;return null==v||null===(t=v.openGoogleDrivePickerPopup)||void 0===t?void 0:t.call(v,e)}function Se(e){v&&(v.setLoggerData?v.setLoggerData(e):v.setLogglyData&&v.setLogglyData(e))}function we(){var e;null==v||null===(e=v.clearCookies)||void 0===e||e.call(v)}function ke(){var e;null==v||null===(e=v.clearAllCookies)||void 0===e||e.call(v)}function Ie(e){var t;null==v||null===(t=v.downloadUrl)||void 0===t||t.call(v,e)}function xe(e){var t,n;null==v||null===(t=v.onNavigate)||void 0===t||null===(n=t.addListener)||void 0===n||n.call(t,((t,n)=>{if("string"!=typeof n&&n.deduplicationID){const e=n.deduplicationID;if(f===e)return void i().log({level:"warning",from:"electronActions",type:"duplicateOnNavigateObjectDetected"});f=e}e(n)}))}function Ae(e){var t,n;null==v||null===(t=v.onOpenSettings)||void 0===t||null===(n=t.addListener)||void 0===n||n.call(t,((t,n)=>e(n)))}async function Ce(e){return!(!v||!v.isProtocolRegistered)&&v.isProtocolRegistered(e)}function Te(e){v&&v.navigationReady&&v.navigationReady(e)}function Me(e){v&&v.snackbarReady&&v.snackbarReady(e)}async function Pe(e){var t;const{device:n,electronSqlite:o,routerStore:d}=e;if(!v)return;await g().getAndCacheDesktopVersionAsync();const u=await fe();var p;/WantsServiceWorker/i.test(navigator.userAgent)&&"serviceWorker"in navigator&&(u&&navigator.serviceWorker.register(`${window.location.origin}/sw.js`,{type:"classic",scope:"/"}).catch((async e=>{await c().nQ(2e3,d.waitUntil((()=>{var e;return void 0!==(null==d||null===(e=d.state)||void 0===e||null===(e=e.route)||void 0===e?void 0:e.name)&&"root"!==d.state.route.name})));if(!("login"===d.state.route.name))if(null!=v&&v.logErrorForOffline){var t;const n="blank"===d.state.route.name?"prewarmedTab":"quickSearch"===d.state.route.name?"quickSearchWindow":"page";null==v||null===(t=v.logErrorForOffline)||void 0===t||t.call(v,{level:"error",from:"electronActions",type:`${n}ServiceWorkerRegistrationError`,error:(0,l().convertErrorToLog)(e)})}else i().log({level:"error",from:"electronActions",type:"serviceWorkerRegistrationError",error:(0,l().convertErrorToLog)(e)})})),navigator.serviceWorker.addEventListener("controllerchange",(()=>{window.location.reload()})),null!=v&&null!==(p=v.relayMessageToServiceWorker)&&void 0!==p&&p.addListener&&v.relayMessageToServiceWorker.addListener(((e,t)=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((e=>{var n;null===(n=e.active)||void 0===n||n.postMessage(t)}))})),v.relayMessageFromServiceWorker&&navigator.serviceWorker.addEventListener("message",(e=>{v&&v.relayMessageFromServiceWorker&&v.relayMessageFromServiceWorker(e.data)})));if(null!==(t=v.zoom)&&void 0!==t&&t.get&&(ie=await v.zoom.get()),o&&o.sqliteConnection){try{await o.sqliteConnection.ensureMigrated()}catch(f){i().log({level:"error",from:"electronActions",type:"sqliteConnectionEnsureMigratedError",error:(0,l().convertErrorToLog)(f),data:(0,r().CS)(f,{isBrowser:!1})})}o.sqliteConnection.optimize().catch((e=>{i().log({level:"error",from:"electronActions",type:"sqliteConnectionOptimizeError",error:(0,l().convertErrorToLog)(e),data:(0,r().CS)(e,{isBrowser:!1})})}))}if(v.getSubstitutions&&n.isElectronMac){const e=await v.getSubstitutions();oe=e.filter((e=>e.replace!==e.with)).map((e=>({length:e.replace.length,replace:new RegExp(`\\b${s().Nt(e.replace)} $`),with:`${e.with} `})))}n.isElectronMac&&(m()&&Re.setPreference("isAutoUpdaterDisabled",!0),await async function(e){const t=e.device.desktopAppVersion;if(!t)return;const n=(0,a().parseVersion)(t);if(!n)return;const o=await Re.get(),i=null==o?void 0:o.preferences;if(!i)return;wt(n)?!1===i.isUniversalLinksEnabled&&(Re.setPreference("isUniversalLinksEnabled",!0),Re.setPreference("isUniversalLinksEnabledBackup",!1)):!1===i.isUniversalLinksEnabledBackup&&(Re.setPreference("isUniversalLinksEnabledBackup",void 0),Re.setPreference("isUniversalLinksEnabled",!1))}(e))}function Be(e){v&&v.refreshAll&&v.refreshAll(e.includeFocusedWindow)}const Re={get(){var e,t;return null==v||null===(e=v.electronAppFeatures)||void 0===e||null===(t=e.get)||void 0===t?void 0:t.call(e)},setPreference(e,t){var n,o;null==v||null===(n=v.electronAppFeatures)||void 0===n||null===(o=n.setPreference)||void 0===o||o.call(n,e,t)},addListener(e){var t,n;return null==v||null===(t=v.electronAppFeatures)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Ee={set(e){var t,n;null==v||null===(t=v.sidebarState)||void 0===t||null===(n=t.set)||void 0===n||n.call(t,e)},addSetSidebarOpenListener(e){var t,n;return null==v||null===(t=v.sidebarState)||void 0===t||null===(n=t.addSetSidebarOpenListener)||void 0===n?void 0:n.call(t,e)},addToggleListener(e){var t,n;return null==v||null===(t=v.sidebarState)||void 0===t||null===(n=t.addToggleListener)||void 0===n?void 0:n.call(t,e)}},De={addListener(e){var t,n;return null==v||null===(t=v.tabSpaces)||void 0===t||null===(t=t.tabSpacesState)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)},addSnackBarMessageListener(e){var t,n;return null==v||null===(t=v.tabSpaces)||void 0===t||null===(t=t.showSnackBarMessage)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)},addToggleMenuListener(e){var t,n;return null==v||null===(t=v.tabSpaces)||void 0===t||null===(n=t.addToggleMenuOpenListener)||void 0===n?void 0:n.call(t,e)},toggleTabSpacesMenuOpen(){var e,t;null==v||null===(e=v.tabSpaces)||void 0===e||null===(t=e.toggleTabSpacesMenuOpen)||void 0===t||t.call(e)},setActiveTabSection(e){var t,n;null==v||null===(t=v.tabSpaces)||void 0===t||null===(n=t.setActiveTabSection)||void 0===n||n.call(t,e)},createTabSpace(e){var t,n;null==v||null===(t=v.tabSpaces)||void 0===t||null===(n=t.createTabSpace)||void 0===n||n.call(t,e)},updateTabSpaceMetadata(e,t){var n,o;null==v||null===(n=v.tabSpaces)||void 0===n||null===(o=n.updateTabSpaceMetadata)||void 0===o||o.call(n,e,t)},reorderTabSpaces(e){var t,n;null==v||null===(t=v.tabSpaces)||void 0===t||null===(n=t.reorderTabSpaces)||void 0===n||n.call(t,e)},deleteTabSpace(e){var t,n;null==v||null===(t=v.tabSpaces)||void 0===t||null===(n=t.deleteTabSpace)||void 0===n||n.call(t,e)},setIsTabSpacesBetaEnabled(e){Re.setPreference("isTabSpacesBetaEnabled",e)}},Ne={get:()=>v&&v.windowSidebarState&&v.windowSidebarState.get?v.windowSidebarState.get():Promise.resolve(void 0),set(e){var t,n;null==v||null===(t=v.windowSidebarState)||void 0===t||null===(n=t.set)||void 0===n||n.call(t,e)},addListener(e){var t,n;return null==v||null===(t=v.windowSidebarState)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function Le(e){var t;null==v||null===(t=v.setAppStoreState)||void 0===t||t.call(v,e)}const Oe={get(){var e;return null!=v&&null!==(e=v.isActiveTab)&&void 0!==e&&e.get?v.isActiveTab.get():Promise.resolve(!1)},addListener(e){var t,n;return null==v||null===(t=v.isActiveTab)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};async function Ue(){return v&&v.windowIsVisible?v.windowIsVisible():"visible"===document.visibilityState}const Fe={addListener(e){var t,n;return null==v||null===(t=v.track)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Ve={addListener(e){var t,n;return null==v||null===(t=v.trackBatched)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function je(){var e;null==v||null===(e=v.closeGlobalSearchModal)||void 0===e||e.call(v)}function ze(e){var t;null==v||null===(t=v.openPageFromGlobalSearch)||void 0===t||t.call(v,e)}function He(){var e;null==v||null===(e=v.openTabFromQuickSearch)||void 0===e||e.call(v)}function We(){var e;null==v||null===(e=v.closeQuickSearch)||void 0===e||e.call(v)}function qe(e){var t;null==v||null===(t=v.openQuickSearchResult)||void 0===t||t.call(v,e)}function Ke(){var e;null==v||null===(e=v.quickSearchReady)||void 0===e||e.call(v)}function Ge(){var e;null==v||null===(e=v.quickSearchNotReady)||void 0===e||e.call(v)}function $e(){var e;null==v||null===(e=v.quickSearchRenderCompleted)||void 0===e||e.call(v)}function Ye(e){var t;null==v||null===(t=v.quickSearchSetSearchAssistantMode)||void 0===t||t.call(v,e)}function Qe(){var e;null==v||null===(e=v.quickSearchRefresh)||void 0===e||e.call(v)}function Ze(){var e;null==v||null===(e=v.openQuickSearchShortcutSetting)||void 0===e||e.call(v)}const Xe={isVisible(){var e;return null!=v&&null!==(e=v.quickSearchVisibilityState)&&void 0!==e&&e.isVisible?v.quickSearchVisibilityState.isVisible():Promise.resolve(!1)},addListener(e){var t,n;return null==v||null===(t=v.quickSearchVisibilityState)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},Je={addListener(e){var t,n;return null==v||null===(t=v.openSearchModalFromQuickSearch)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},et={addListener(e){var t,n;return null==v||null===(t=v.openNotionAiFromQuickSearch)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}},tt={addListener(e){var t,n;return null==v||null===(t=v.openSearchModalForNewTab)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function nt(e){var t;null!=v&&v.setIsRecording?v.setIsRecording(e):null==v||null===(t=v.setIsMediaActive)||void 0===t||t.call(v,e)}function ot(e){var t;null==v||null===(t=v.setActiveBlocks)||void 0===t||t.call(v,e)}function it(e){var t;null==v||null===(t=v.setGlobalShortcutsEnabled)||void 0===t||t.call(v,e)}const rt={addListener(e){var t,n;return null==v||null===(t=v.performShortcut)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function at(e){var t;null==v||null===(t=v.setCloseConfirmationDialogReason)||void 0===t||t.call(v,e)}async function st(e){var t,n;await(null==v||null===(t=v.networkEmulation)||void 0===t||null===(n=t.setEmulation)||void 0===n?void 0:n.call(t,e))}function lt(e){var t,n;return null==v||null===(t=v.networkEmulation)||void 0===t||null===(t=t.onSetEmulation)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}async function ct(){var e;return null==v||null===(e=v.getSqliteDiskUsage)||void 0===e?void 0:e.call(v)}async function dt(e){var t;return null==v||null===(t=v.getMediaAccessStatus)||void 0===t?void 0:t.call(v,e)}function ut(e){var t;null==v||null===(t=v.openSystemSettings)||void 0===t||t.call(v,e)}function pt(){var e;null==v||null===(e=v.relaunch)||void 0===e||e.call(v)}async function mt(){var e;return null==v||null===(e=v.getDeviceName)||void 0===e?void 0:e.call(v)}async function gt(){if(!v||!v.getRunningInputAudioProcesses)return d().Q.fail({message:"API not available"});try{return await v.getRunningInputAudioProcesses()}catch(e){return d().Q.fail({message:"Failed to get audio processes",error:e})}}function ft(e){var t;null==v||null===(t=v.logErrorForOffline)||void 0===t||t.call(v,{...e,data:e.data?(0,l().iX)(e.data):void 0})}function vt(e){var t;null==v||null===(t=v.navigateToBlockInTab)||void 0===t||t.call(v,e)}const ht={addListener(e){var t,n;return null==v||null===(t=v.navigateToBlock)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function _t(e){var t;null==v||null===(t=v.initializeRunningInputAudioProcessDetection)||void 0===t||t.call(v,e)}const bt={addListener(e){var t,n;return null==v||null===(t=v.runningInputAudioProcessesChanged)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)},removeListener(e){var t,n;null==v||null===(t=v.runningInputAudioProcessesChanged)||void 0===t||null===(n=t.removeListener)||void 0===n||n.call(t,e)}};function yt(e){var t;null==v||null===(t=v.pushToastInMainTab)||void 0===t||t.call(v,e)}const St={addListener(e){var t,n;return null==v||null===(t=v.pushToast)||void 0===t||null===(n=t.addListener)||void 0===n?void 0:n.call(t,e)}};function wt(e){const t=[4,9,0];return(0,a().isLessThanVersion)(e,t)}},706024:(e,t,n)=>{n.d(t,{V:()=>m,X:()=>g});n(944114);var o=()=>n(496603),i=()=>n(534177),r=()=>n(972435),a=()=>n(966505),s=()=>n(449506),l=()=>n(901389),c=()=>n(246826),d=()=>n(426116),u=()=>n(751156);const p=(0,n(959013).YK)({saveFieldError:{id:"securitySAMLSettings.saveSettingsError.message",defaultMessage:"Something went wrong."}});function m(e,t){const{securitySettingsState:n,spaceStore:o}=t,{disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableExternalMembershipRequests:g,disableGuestMembershipRequests:f,disableMemberUpgradeRequests:v,disableTeamGuests:h,enableGuestInviteRequests:_,enableAiTraining:b,zeroRetentionEnabled:y}=n;return u().createAndCommit({userAction:"securitySettingsActions.saveSecuritySettings",environment:e,canUndo:!0,perform:t=>{d().l3({environment:e,transaction:t,spaceStore:o,disablePublicAccess:i,disableGuests:r,disableMoveToSpace:a,disableExport:s,disableSpacePageEdits:l,disablePublicAccessRequests:c,disableTeamCreation:p,disableMembershipRequests:m,disableMemberUpgradeRequests:v,disableExternalMembershipRequests:g,disableGuestMembershipRequests:f,disableTeamGuests:h,enableGuestInviteRequests:_,enableAiTraining:Boolean(b),zeroRetentionEnabled:Boolean(y)})}})}function g(e,t){const{securitySettingsStore:n,spaceStore:d,fields:m}=t,g={...n.state},f={...n.state,...m};n.setState(f),void 0!==m.disableGuests&&(s().callApi({eventName:"updateDisableGuestsOnSpace",environment:e,data:{spaceId:d.id,newDisableGuestsValue:m.disableGuests,keepExistingGuests:Boolean(m.keepExistingGuests)}}).then((e=>{if("failed"===e.type)return l().f1(r().A.formatMessage(p.saveFieldError)),void n.setState(g)})),a().DO(e,{new_value:m.disableGuests,keep_existing_guests_if_disabled:Boolean(m.keepExistingGuests)})),u().createAndCommit({userAction:"SecuritySettings.saveToggle",environment:e,canUndo:!0,perform:e=>{e.postSubmitCallbacks.push((e=>{if(e)return l().f1(r().A.formatMessage(p.saveFieldError)),void n.setState(g)}));const t=o().z7({disable_public_access:m.disablePublicAccess,disable_move_to_space:m.disableMoveToSpace,disable_export:m.disableExport,disable_space_page_edits:m.disableSpacePageEdits,disable_public_access_requests:m.disablePublicAccessRequests},(e=>o().gD(e)));c().zv({store:d,data:t,transaction:e});const a=o().z7({enable_guest_invite_requests:m.enableGuestInviteRequests,disable_membership_requests:m.disableMembershipRequests,disable_member_upgrade_requests:m.disableMemberUpgradeRequests,disable_external_membership_requests:m.disableExternalMembershipRequests,disable_guest_membership_requests:m.disableGuestMembershipRequests},(e=>!(0,i().O9)(e)));Object.keys(a).length>0&&u().applyOperation({store:d,operation:{pointer:d.pointer,path:["settings"],command:"update",args:a},transaction:e})}}),(0,i().O9)(m.enableGuestInviteRequests)&&a().uz(e,{new_value:m.enableGuestInviteRequests})}},706742:(e,t,n)=>{n.d(t,{x:()=>i});var o=()=>n(763824);class i{constructor(e){this.SCALE=1.5,this.MAX=15,this.waitable=new(o().e2),this.failures=0,this.observer=e}getDelay(e){return Math.min(this.MAX,Math.pow(this.SCALE,e))}reset(){var e;this.waitable.trigger(),this.waitable=new(o().e2),this.failures=0,null===(e=this.observer)||void 0===e||e.onReset()}async backOffOnFailure(e,t){var n;const i=this.failures;this.failures++;const r=e*this.getDelay(i)-e;null===(n=this.observer)||void 0===n||n.onBackoff(r,t),await this.waitable.wait(e,r),this.waitable=new(o().e2)}getFailures(){return this.failures}}},708830:(e,t,n)=>{n.d(t,{C2:()=>i,Cu:()=>l,Eq:()=>u,MY:()=>d,NU:()=>f,PH:()=>r,Qe:()=>c,_r:()=>h,dC:()=>v,hi:()=>g,uU:()=>a,v:()=>s,wI:()=>m,zJ:()=>p});n(944114),n(898992),n(354520),n(430670),n(581454),n(737550);var o=()=>n(534177);class i{constructor(e){this.children=e}map(e){const t=this.children.map((t=>t.map(e)));return new i(t)}toString(){return`DetachedTreeRoots([${this.children}])`}}class r{constructor(e,t){this.value=e,this.children=t}map(e){return s(this,(t=>({value:e(t.value),children:t.children})))}toString(){return`Tree(${this.value}, [${this.children}])`}}function a(e,t){return t(e.value)||e.children.some((e=>a(e,t)))}function s(e,t){const n=t(e);if(!n)return;const{value:i,children:a}=n,l=a?a.map((e=>s(e,t))).filter(o().O9):[];return new r(i,l)}function l(e){const{values:t,isAncestor:n,compareOrder:o}=e;if(0===t.length)return;const a=(e,t)=>{for(const o of e)if(n(o.value,t))return void a(o.children,t);e.push(new r(t,[]))},s=t.slice().sort(o),l=[];for(const i of s)a(l,i);return new i(l)}function c(e,t){for(const n of e){if(t(n))return[n];{const e=c(n.children,t);if(e)return[n,...e]}}}function d(e,t){if(t&&t.length>0){const n=t[t.length-1],o=t[t.length-2]||e,i=o.children.findIndex((e=>e===n));if(i>0)return{prev:o.children[i-1]};if(o!==e)return{parent:o}}return{}}function u(e,t){if(t&&t.length>0){const n=t[t.length-1],o=t[t.length-2]||e,i=o.children.findIndex((e=>e===n));return i<o.children.length-1?{next:o.children[i+1]}:u(e,t.slice(0,t.length-1))}return{}}function p(e,t){if(t&&t.length>0){const n=t[t.length-1],o=t[t.length-2]||e,i=o.children.findIndex((e=>e===n));if(i>0){return{prev:m(o.children[i-1])}}if(o!==e)return{parent:o}}return{}}function m(e){for(;e.children.length>0;)e=e.children[e.children.length-1];return e}function g(e,t){if(t&&t.length>0){const n=t[t.length-1];if(n.children.length>0){return{next:n.children[0]}}const{next:o}=u(e,t);return{next:o}}return{}}function f(e){if(e&&e.length>0){const t=e[e.length-1];if(t.children.length>0)return t.children[0]}}function v(e){if(e&&e.length>1)return e[e.length-2]}function h(e,t){if(0===e.length||0===t.length)return-1;for(let n=Math.min(e.length,t.length)-1;n>-1;n--){if(e[n]===t[n])return n}return-1}},709219:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n(496603).o8(this.state)}}const i=new o},710149:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(401497),i=()=>n(959013),r=()=>n(38337),a=n(474848);function s(e){let{emphasized:t=!1,style:n}=e;const s=(0,i().tz)(),l=(0,o().IS)((e=>({root:{background:t?"dark"===e.mode?e.accentColors.gray[300]:e.cardHoveredBackground:"dark"===e.mode?e.accentColors.translucentGray[200]:e.cardPressedBackground,...n}})),[t,n]);return(0,a.jsx)("div",{"aria-valuetext":s.formatMessage({id:"loadingShimmer.label",defaultMessage:"Loading..."}),role:"progressbar",className:r().iM5,style:l.root})}},711319:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,type:"text"}}}const i=new o},711771:(e,t,n)=>{n.d(t,{f:()=>o});const o=new(n(645873).O2)("minisearch",(async()=>await n.e(68070).then(n.bind(n,910513))))},712030:(e,t,n)=>{n.d(t,{FN:()=>s,Ol:()=>l,bb:()=>c,t4:()=>d});var o=()=>n(484714),i=()=>n(847249),r=()=>n(634201),a=()=>n(351360);function s(e){const{device:t}=e;return t.isAndroid&&t.browserVersion.startsWith("73.")&&t.browserName.startsWith("Chrome")||t.isAndroid?"google":t.isWindows||t.isLinux?"twitter":"raw"}function l(){const e=(0,o().v3)();return(0,i().K8)((()=>s(e)),[e])}function c(){var e;return null===(e=a().default.state)||void 0===e||null===(e=e.currentUserSettingsStore)||void 0===e||null===(e=e.getSettings())||void 0===e?void 0:e.emoji_picker_skin_tone}function d(e){return void 0===c()?e:(0,r().Fk)(e)}},712287:(e,t,n)=>{n.d(t,{F:()=>p,j:()=>u});var o=()=>n(519831),i=()=>n(534177),r=()=>n(869562),a=()=>n(737230),s=()=>n(566009),l=()=>n(154807),c=()=>n(455994),d=()=>n(204521);function u(e){m({...e,state:"open"})}function p(e){m({...e,state:"closed"})}function m(e){const{environment:t,layoutStore:n,from:u,state:p,panelLocation:m,preventPeekWidthResize:g}=e,f=null==n?void 0:n.getParentStore();let v;if((null==f?void 0:f.table)===o().Vl&&(v=f.id),"open"===p?(0,d().t0)({environment:t,collectionId:v,layoutId:null==n?void 0:n.id}):"closed"===p?(0,d().G)({environment:t,collectionId:v,layoutId:null==n?void 0:n.id}):(0,i().HB)(p),"sidebar"!==c().A.getPanelState(m).displayStyle)if("popup"!==c().A.getPanelState(m).displayStyle)if("static_sidebar"!==c().A.getPanelState(m).displayStyle);else if("open"===p){const{clampedWidth:e,hadEffect:n}=(0,l().mQ)("openDetailsSidebar",g);c().A.setSidebarIncreasedSizeOfPeekView(n),n?(r().setPeekWidth({width:e,environment:t,preventPersistWidth:!0}),window.requestAnimationFrame((()=>{c().A.setOpen(m)}))):c().A.setOpen(m)}else{if(c().A.setClosed(m),c().A.state.detailsSidebarIncreasedSizeOfPeekView){const{clampedWidth:e}=(0,l().mQ)("closeDetailsSidebar");r().setPeekWidth({width:e,environment:t})}c().A.setSidebarIncreasedSizeOfPeekView(!1)}else"open"===p?(s().A.setState({open:!0}),c().A.setOpen(m)):(s().A.setState({open:!1}),c().A.setClosed(m));else"open"===p?(r().setUpdateSidebarTab(a().tF.Info),c().A.setOpen(m),r().setUpdateExpand({environment:t,isExpanded:!0,from:u,saveDetailsSidebarPreference:!1})):(c().A.setClosed(m),r().setUpdateExpand({environment:t,isExpanded:!1,from:u,saveDetailsSidebarPreference:!1}))}},712505:(e,t,n)=>{n.r(t),n.d(t,{CenterPeekModeOuterWidth:()=>s,PeekModeOuterPadding:()=>a,PeekModePadding:()=>r,SIDEPEEK_INITIAL_MAX_WIDTH:()=>u,SIDEPEEK_MIN_WIDTH:()=>m,SIDEPEEK_NO_COLUMN_WIDTH:()=>p,default:()=>f,getPeekModeFromCollectionPeekModeFormat:()=>c,getPeekModeFromUrlParam:()=>l,getUrlParamFromPeekMode:()=>d});var o=()=>n(496506),i=()=>n(868840);const r={horizontal:{center_peek:126,side_peek:76}},a=72,s=708+2*r.horizontal[i().O];function l(e){switch(e){case"s":return i().A;case"c":return i().O}}function c(e){switch(e){case"side_peek":return i().A;case"center_peek":return i().O}}function d(e){switch(e){case i().A:return"s";case i().O:return"c"}}const u=980,p=640,m=564;class g extends(()=>n(757695))().default{constructor(){super(...arguments),this.isSidePeekOpeningStore=new(o().default)((()=>this.state.open&&this.isSidePeekOpen()&&this.state.isOpening),{debugName:"isSidePeekOpening"}),this.isSidePeekClosingStore=new(o().default)((()=>this.state.open&&this.state.isClosing),{debugName:"isSidePeekClosing"}),this.peekTargetStore=new(o().default)((()=>this.state.open?this.state.targetStore:void 0),{debugName:"peekTarget"})}getInitialState(){return{open:!1,mode:i().O,preferredSidePeekWidth:0,savedSidebarExpandedStoreState:!1,topHoverAreaEntered:!1}}getCollectionModeFormat(){switch(this.state.mode){case i().A:return"side_peek";case i().O:return"center_peek"}}getPeekMode(){return this.state.open?this.state.mode:i().A}getPeekModeWidth(e){return this.isCenterPeekOpen()?s:this.getSidePeekWidth(e)}getSidePeekWidth(e){const t=Math.min(e/2,u),n=this.state.preferredSidePeekWidth||t,o=Math.max(n,m);return Math.min(o,e)}setSidePeekWidth(e,t){const n=Math.min(Math.max(e,m),t);this.setState({...this.state,preferredSidePeekWidth:n})}isCenterPeekOpen(){return this.state.open&&this.state.mode===i().O}isSidePeekOpen(){return this.state.open&&this.state.mode===i().A&&!this.state.isClosing}setSidebarExpandedStoreState(e){this.setState({...this.state,savedSidebarExpandedStoreState:e})}setTopHoverAreaEntered(e){this.setState({...this.state,topHoverAreaEntered:e})}}const f=new g},713205:(e,t,n)=>{n.d(t,{A:()=>c,b:()=>s});var o=()=>n(757695),i=()=>n(351360);class r extends o().default{getInitialState(){return{stores:{}}}getStore(e){let{spaceId:t,userId:o,version:i}=e;const r=function(e){let{spaceId:t,userId:n,version:o}=e;return`searchFrecency:${t}:${n}:${o??0}`}({spaceId:t,userId:o,version:i});return this.instanceState.stores[t]||(s()?this.instanceState.stores[t]=new(n(178624).R)({key:r,namespace:n(419494).Bq,important:!0,trackingType:"necessary"}):this.instanceState.stores[t]=new a),this.instanceState.stores[t]}eraseStore_TEST_ONLY(e){let{spaceId:t,userId:n,version:o}=e;this.getStore({spaceId:t,userId:n,version:o}).setState(void 0),delete this.instanceState.stores[t]}}class a extends o().default{getInitialState(){}}function s(){var e;const t=l.state.shouldPersist;return void 0!==t?t:Boolean(null===(e=i().default.getState().currentSpaceStore)||void 0===e?void 0:e.environment.defaultRecordCache.persistedRecordCache)}const l=new r;(0,n(604341).exposeDebugValue)("globalSearchFrecencyStore",l);const c=l},713972:(e,t,n)=>{n.d(t,{EV:()=>l,KH:()=>a,Ll:()=>r,MI:()=>p,Xs:()=>v,a2:()=>f,gR:()=>_,nx:()=>g,vq:()=>s,vr:()=>h,z:()=>d,zn:()=>m});n(944114);var o=()=>n(634201),i=()=>n(496603);function r(e){try{return Boolean(e&&void 0!==e.nodeType)}catch(t){return!1}}function a(e){return r(e)&&e.nodeType===Node.TEXT_NODE}function s(e){return r(e)&&e.nodeType===Node.ELEMENT_NODE}function l(e,t){for(;r(e)&&!t(e);)e=e.parentNode;return e}function c(e,t){var n;return a(e)?t>=((null===(n=e.textContent)||void 0===n?void 0:n.length)??0):t>=e.childNodes.length}function d(e,t){let n=e,o=t;if(!c(e,t)&&a(e))return{node:n,offset:o+1};for(;n&&o>=0;){if(!c(n,o)&&a(n))return{node:n,offset:o};if(s(n)&&0===n.childNodes.length&&"IMG"===n.nodeName)return{node:n,offset:o};if(s(n)&&n.childNodes.length>0)n=n.childNodes[o],o=0;else if(Boolean(n.nextSibling))n=n.nextSibling,o=0;else{var i;n=null===(i=n.parentNode)||void 0===i?void 0:i.nextSibling,o=0}}return{node:e,offset:t}}function u(e){var t;return e?a(e)?(null===(t=e.textContent)||void 0===t?void 0:t.length)??0:e.childNodes&&e.childNodes.length>0?e.childNodes.length:1:-1}function p(e,t){let n=e,o=t;if(t>0&&a(e))return{node:n,offset:o-1};let i=!0;for(;n&&o>=0;){if(!i&&o>=0&&a(n))return{node:n,offset:o};if(s(n)&&0===n.childNodes.length&&"IMG"===n.nodeName)return{node:n,offset:o};if(i=!1,s(n)&&n.childNodes.length>0&&o>0)n=n.childNodes[o-1],o=u(n);else if(n.previousSibling)n=n.previousSibling,o=u(n);else{var r;n=null===(r=n.parentNode)||void 0===r?void 0:r.previousSibling,o=n?u(n):-1}}return{node:e,offset:t}}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(e)){for(const n of o().PE(e.childNodes))a(n)?t.push(n):n.childNodes&&m(n,t);return t}return[]}function g(e,t){return r(e)&&r(t)?i().SL(e.childNodes,(e=>e===t)):-1}const f=function(){if("undefined"==typeof window)return!0;if(window.InputEvent&&"function"==typeof window.InputEvent.prototype.getTargetRanges)return!0;const e=window.document.createElement("div");return e.contentEditable="true","onbeforeinput"in e}();function v(e){!f&&e.preventDefault&&e.preventDefault()}function h(e){return"inputType"in e}function _(e,t){return e!==t&&e.contains(t)}},714818:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},715256:(e,t,n)=>{n.d(t,{A2:()=>v,CJ:()=>j,Dx:()=>d,GI:()=>N,Gn:()=>H,Hb:()=>O,Nh:()=>h,P7:()=>f,S3:()=>z,TQ:()=>s,T_:()=>A,XK:()=>I,XZ:()=>V,bl:()=>x,hH:()=>l,jy:()=>a,ky:()=>y,lm:()=>L,nw:()=>S,o2:()=>m,o7:()=>F,pF:()=>p,sE:()=>C,uS:()=>P});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577);var o=()=>n(534177),i=()=>n(720665);const r={indexeddb_graceful_fallback_to_in_memory_queue:["on"]},a=[...(0,o().uv)(r)],s=["ios_enable_prefetching","multi_cell_aware_apis","mobile_app_launch_blank_page","download_for_offline","refetch_offline_pages","simulate_offline","offline_autosync","wasm_sqlite_alternate_library","opfs_recordmap_cache","db_ux_chrome","updated_6dot_menu"],l={"search-vectors":["log-norm","min-max-norm","cohere-snippets"],"search-no-local-blending":["on"],"search-debug-only-no-recent-boosting":["on"],"search-shorten-inactive-timer":["0","10","30","60","90"],"search-debug-only-force-random-sample":["on"],"search-debug-force-log-signals":["on"],"search-more-recent-pages-in-local":["lazy-100","lazy-200","lazy-500","lazy-1000"],"search-new-local-recall-v2":["v1","v2","v3","v4"],"search-query-expansion":["prefix-completion","word-splitting","spell-correction","all"],"search-debug-force-no-rerank":["on","always-rerank"],"vector-naive-ranker":["on"],"search-mention-model-feature-logging":["on"],"search-mentions-models":["v1","v2","dev"],"search-no-neg-boost-relation-search":["on"],"search-negative-boost-only-quickfind":["on"],"search-negative-boost-tuning":["0.01","0.1","0.25","0.5"],"search-no-bot-downrank":["on"],"search-use-local-reranker-layered":["on"],"search-include-all-local-sources":["on"],"search-local-edited-pages-max":["3","8","15"],"search-local-sim-users-edited-pages-max":["3","8","15"],search_local_ranking_new_frecency_and_score:["search_frecency_store","search_frecency_store_new_recency_score"],search_downrank_sync_bots:["jira-10","jira-100"],search_refresh_user_signals:["on"],search_quickfind_prefetch:["on"],search_title_only_retrieval_mini_find:["locale","locale_and_slop_2_add_operator_and","locale_and_slop_2_add_operator_and_mm","locale_and_slop_2_only_operator_and"],search_mm_retrieval_mini_find:["on"],search_pathtext_retrieval_mini_find:["on"],search_mini_find_use_second_pass_ranker:["control","on","on_with_lower_recall_size"],search_modal_overfetch_comparison:["control","25","75","100"],search_hydrate_ancestors_onestep:["on"],search_embedding_replay_eval:["on"]},c={simplified_email_subject_line:["on"],mobile_push_notification_reply_action:["on"],inbox_2_0:["internal_prototype_time_grouping"],access_request_email_reminder:["on"],posts_prototype:["on"],feed_collection_view:["on"],inbox_activity_split:["on"],notification_ia:["actor","page"],collaboration_reaction_notifications:["on"]},d={adoption_hide_features_v2:["hide_all_except_essential","hide_all_except_home","hide_all_except_ai","hide_all_except_invite","hide_all_except_templates"]},u={...d,adoption_import_contextual_entry_points:["nudge_on_drag","database_menu","slash_menu","paste_link"],adoption_import_push:["on"],adoption_import_entry_point:["db_create_empty_state","nudge_on_large_paste","nudge_on_block_create"],adoption_import_modal_v2:["on"],adoption_use_case__space_remove_slash:["on"],adoption_personal_create_gs_embed_simple:["simplified_getting_started","simplified_getting_started_with_embed","simplified_getting_started_with_embed_and_visual"],adoption_team_join_gs_embed_simple:["simplified_getting_started","simplified_getting_started_with_embed","simplified_getting_started_with_embed_and_visual"],ai_builder_onboarding_flow:["on"],ai_first_onboarding_phase_two:["on"],ai_first_onboarding_phase_two_point_five:["ai_step_in_onboarding","ai_step_in_onboarding_with_skip"]},p=["deep_find_on_inference_transcript","unified_home","separate_home_and_ai_with_home_module"],m=["cards_no_animation","cards_with_animation","small_cards"],g={database_ai_summary_suggestion:["on"],qna_chunk_size:["small","180","240","360","480"],"025m_ai_launch_entrypoints":["corner","writer"],ai_collection_view_entrypoint:["none","button","search_input"],ai_signup_redirect_to_writer:["writer"],deep_find_append_keywords:["control","on"],deep_find_skip_query_gen_heuristic:["control","on"],ai_sidebar_v2:p,ai_chat_suggestion_cards:m},f=["assistant_0.25_with_marketing","assistant_0.3","development","exploratory"];function v(e){const{mode:t,currentMode:n}=e,o=["control",...f];return o.indexOf(t)<=o.indexOf(n)}const h="assistant_0.25_with_marketing",_={assistant_variant:f,ai_search_query_expansion:["single_stack","double_stack"],ai_actions_on_paste_experiment:["on"]},b={ai_qna_alternative_embeddings:["cohere"],qna_abandoned_search_reminders:["on"],qna_show_assistant_origin_input:["on"],qna_show_large_reminders:["on"],qna_show_page_suggested_questions:["on"],qna_vectorless_enabled:["last_edited_200_pages","es_query_n_last_edited_200_pages","es_query_n_last_edited_k_pages"],assistant_show_summarize_this_page_reminder:["on"]},y=["end_to_end","search_modal_with_new_deep_find","search_modal_with_new_deep_find_and_answer","search_modal_with_new_deep_find_and_answer_and_tabs"];function S(e){const{mode:t,currentMode:n}=e,o=["control",...y];return o.indexOf(t)<=o.indexOf(n)}const w={unified_find_variant:y,deepfind_querygen_noquestion:["on"]},k={...r,...l,grant_access_via_mentions:["on"],share_menu_searchable_toggle:["on"],share_menu_cleanup_experiment_v2:["on"],extended_user_profiles:["hover_only","hover_and_full"],...c,import_google_contacts:["on"],workflow_template_customization_onboarding:["replace_app_templates_with_workflow_templates","onboarding_customize_workflow_templates","onboarding_land_and_customize_workflow_templates"],contextualized_onboarding_education_flow:["on"],mobile_friendly_onboarding_templates_personal_non_en:["on"],cro_remove_google_onetap_from_signup_page:["on"],onboarding_create_workflow_templates:["generic_workflow_templates","persona_specific_workflow_templates"],improve_onboarding_profile_step:["on"],improve_desktop_workspace_create_step:["auto_name_workspace","workspace_preview","prefilled_workspace_preview"],onboarding_split_team_survey:["on"],remove_onboarding_invite_step:["on"],signup_visit_aa_test:["on"],personal_student_usecase_preview:["on"],defer_onboarding_template_creation:["with_async","with_timeout"],defer_onboarding_templates_timeout:["2seconds","3seconds","4seconds"],skip_onboarding_size_and_role_stages:["on"],create_new_workspace_cta_on_account_switcher:["on"],skip_mobile_workspace_create_step:["on"],sites_cta_content:["try_notion_sites","get_notion_free","build_a_notion_site","make_a_notion_site","make_a_free_notion_site","logo_make_a_free_site","black_background"],public_site_topbar_share_button:["on"],mab_refresh_personalization:["v1","v2"],mab_personalized_section:["v1","v2"],mobile_lightweight_editor_prompt:["on"],mobile_getting_started:["v1","v2","v3"],mobile_onboarding_educational_refresh:["v1","v2","v3"],mobile_native_file_upload_exp:["on"],in_app_contact_sales_cta_billing:["on"],beam:["on"],block_management:["on"],contact_sales_promo_v2:["on"],formula_assistant:["on"],guest_limit_policy:["on"],krw_prices:["on"],jpy_prices:["on"],lairt:["on"],largesse:["on"],lic:["lic_25","lic_50"],mobile_web_subscriptions:["on"],mp_lairt:["on"],new_year_2025:["on"],prices_test_country:["US","DE","GB","JP","KR","CH"],quick_workspace_creation:["on"],settings_refresh_2025:["on"],subscription_elements:["payment_and_address","payment"],workspace_invite_cio_migration:["on"],workspace_invite_variant:["on"],marketplace_3p_link_treatment:["on"],marketplace_checkout_move_tc_checkbox:["on"],marketplace_refund_improvements:["on"],inapp_marketplace_home_page_remove_editorials:["remove_spotlight_editorials","remove_evergreen_editorials","remove_both_editorials"],inapp_marketplace_home_module_comparison_wave_1:["featured_categories_vs_spotlight_editorials","featured_categories_vs_featured_templates","featured_categories_vs_featured_collections","featured_categories_vs_evergreen_editorials","featured_categories_vs_surfaced_collection","featured_categories_vs_featured_creators","spotlight_editorials_vs_featured_templates"],inapp_marketplace_home_module_comparison_wave_2:["spotlight_editorials_vs_featured_collections","spotlight_editorials_vs_evergreen_editorials","spotlight_editorials_vs_surfaced_collection","spotlight_editorials_vs_featured_creators","featured_templates_vs_featured_collections","featured_templates_vs_evergreen_editorials","featured_templates_vs_surfaced_collection"],inapp_marketplace_home_module_comparison_wave_3:["featured_templates_vs_featured_creators","featured_collections_vs_evergreen_editorials","featured_collections_vs_surfaced_collection","featured_collections_vs_featured_creators","evergreen_editorials_vs_surfaced_collection","evergreen_editorials_vs_featured_creators","surfaced_collection_vs_featured_creators"],inapp_marketplace_home_page_layout:["grid_feed","hybrid"],inapp_marketplace_category_dropdown:["on"],...u,asana_to_single_team_space:["on"],asana_import_by_batch:["on"],csv_adaptiveschema:["on"],feature_settings_experiment:["on"],packaging_m2_entry_point:["generic","personalized"],packaging_open_modal_private_section_plus_button:["on"],workflows_builder_entry_point:["on"],initial_relations_search_result_ranking:["rank_by_recently_selected","rank_by_recently_visited"],...g,public_api_cache_collection_experiments:["on"],...w,ai_co_editing_mode:["crdt"],empty_sharing_sidebar_dismissal:["forever"],sharing_logged_out_view_awtl:["banner","sidebar"],sharing_collaboration_sidebar_guest_aggregation:["external_pages_sidebar"],awtl_sidebar_logged_in_view_no_workspace:["control","workspace","template","page","private"],awtl_sidebar_logged_in_with_small_workspace:["page_small","join_small","private_small"],awtl_sidebar_logged_in_with_large_workspace:["join_large","private_large","teamspaces_large"],sharing_public_share_link_tooltip:["on"],contact_import_notion_account:["on"],sharing_import_contacts_share_menu:["replace_sharing","empty_state"],unified_digest_send_combined:["on"],zendesk:["on"],highlight_legacy_transclusions:["on"],iframely_switch:["on"],request_membership:["on"],parallel_confluence_importer:["on"],parallel_confluence_importer_via_api:["on"],special_case_confluence_file_size:["on"],special_case_pdf_file_size:["on"],confluence_dynamic_batch_size_temp:["on"],confluence_server_allow_requests:["on"],confluence_logs:["on"],confluence_api_v2:["on"],confluence_search_api:["on"],link_preview_resizing_api:["on"],enable_google_drive_external_integration:["on"],show_instruction_on_auth_popup_blocked:["on"],teamspace_guests:["on"],monday_importer:["on"],pdf_importer:["on"],migrate_confluence_into_teamspace:["on"],generic_importer:["on"],slash_command_import:["on"],special_case_generic_file_size:["on"],android_3rd_party_login_with_external_browser:["on"],ios_3rd_party_login_with_external_browser:["on"],block_limit_delay:["on"],prioritize_slash_menu_block_placeholder:["on"],slash_menu_tooltip:["on"],wiki_education_convert_modal:["bottom_right"],remove_updates_topbar_button_v2:["on"],avoid_empty_eoip_creation_unfurl_collection:["on"],jira_import_and_sync:["on"],jira_sync_data_center_integration:["on"],..._,...b,indexeddb_graceful_fallback_to_in_memory_queue:["on"],notion_mail_launch_modal_2_variant:["on"],notion_mail_launch_modal_experiment:["on"],allow_auth_with_app_browser_for_mobile:["on"],property_creation_tooltips_exp:["on"],marketing_mwn_api_kill_switch:["on"],dynamic_social_preview_image:["on"],dictation_experiment_v2:["on"],export_attachments_with_page:["on"],search_surfaces_relation_search:["on"],search_surfaces_collection_search:["on"],marketing_cookie_sync_experiment_signup_login:["treatment","check_query_param"],sites_server_side_page_chunk_reverse:["on"],members_tab_remove_users_in_role_dropdown:["on"],preload_prewarm_tab_v2:["on"],domain_link_sharing_redesign:["on"],prefetch_on_navigation:["on"]};function I(e){return Boolean(k[e])}const x=new Set([]),A=[...(0,o().uv)(k)],C=[...A].sort(),T=["allow_mobile_home_redirect","sidebar_hover_expansion_v3","sidebar_pages_hide_toggles","home_welcome_animation","home_recents_caching","update_user_space_access_kill_switch","page_verification","page_verification_server","page_verification_transaction_validation","page_verification_upsell","page_verification_new_badge","geo_point_property","debug_user_info_quick_copy","sidebar_add_new_pages_to_bottom","horizon_1_sidebar_panel_rollout","persisted_secondary_sidebar_state","share_menu_cleanup","share_menu_cleanup_ga"],M=["enable_notifications_processor","track_collaborative_page_view","updates_ai","self_queuing_reminder_tasks","comment_sidebar_for_you","inbox_page_grouping","inbox_page_grouping_notification_style","delete_follows_on_permanent_user_deletion","reaction_notification","animated_emoji_badge","suggested_reactions","margin_comments_stepper","posts_show_all_button_flag","team_home_about_proto","enable_total_visitor_count","posts_generic_db_publishing","slack_notif_post_as_user","ken_new_home_design"],P=["db_ux_empty_states","db_ux_mobile","db_ux_chrome","db_ux_properties","db_ux_mobile_filter_sheet","db_ux_chrome_next","db_ux_customize_views"],B=["collection_client_log_looping_remote_request","collection_service_high_priority_space","disable_rectangular_selection_for_database_horizontal_scroll","charts_drilldown","collections_property_type_change_rename_group","collection_view_update_counter","collections_xws_linked_view_fix","collections_xws","collections_system_db","experimental_computed_store_defer_debounce","collection_group_reducer_visible","drain_collection_queue","forms_conditional_logic","query_collection_schema_change","expand_sub_items_hotkey","improved_progress_bar","full_access_for_created_collection_pages","collections_formula_load_record_model_permission_changes","drag_respects_relation_limits","improved_drag_and_fill","duplicate_existing_view_store","collection_store_deep_equal_schema","collections_virtualize_grouped_tables","deny_syncing_collections_from_collection_service","collections_status_missing_options_fix",...P,"collection_property_permissions","collection_property_permissions_search_indexing","collection_page_view_content_editable_root","forward_to_collection_service_tcp_timeout","collection_settings_reorganization"],R=["ai_template_filling_use_new_ai_blocks","ai_full_page_welcome_state","attachment_show_ask_ai_in_images","assistant-labeler-mode","qna-reranker-skipped","experimental-cohere-only-for-personal-workspace","assistant-teacher-mode","rerank_slack_only_by_cohere","slack_qna_notification_tooltip_enabled","assistant_chat_with_pdf_use_images","claude-sonnet-rollout","claude-sonnet-3.7-rollout","load-web-page-rollout","find_related_content","compute_related_content","assistant_0point25_ux_rollout","zero_retention_routing_enabled","enable_slackbot_qna","enable_slackbot_qna_by_space","ai_assistant_helpdocs_scoped_search","assistant_enable_attachment_upload","collection_view_ai_button","should_always_trace_run_assistant","assistant_basic_writer_mode","qna_enable_team_archive_filter","marketing_025_rollout","use_sonnet_for_run_assistant_routing","run_assistant_allow_dev_only_args","use-repos-filter-for-github-search","skip-pr-comment-hydration","merge-lexical-and-semantic-results","full_page_translate","skip_verified_feature_from_qna_reranker","ai_feedback_logging_deny_list","assistant_should_use_fake_page_to_render_blocks","ai_unstable_message","ai_connectors_turbopuffer_dark_reads","ai_workflows_monaco_code_editor","ai_workflows_function_monaco_code_editor","jira_vector_search_fallback_query","ai_disable_writer_auto_follow","ai_slack_connector_option_on_paste","warm_vector_db_cache_user_member_count","ai_display_leap_settings_for_sales_assisted_workspace","ai_research_mode_unified_find","ai_research_mode_minisearch","ai_research_mode_web_search","ai_research_mode_multiturn","ai_research_mode_reading_agent","ai_research_mode_welcome_page_ai","ai_research_mode_dbq","ai_research_mode_skip_claims","ai_research_mode_filter_uncited_artifacts","ai_research_mode_clarifying_questions","ai_research_mode_reformat_thinking_outputs","should_approximate_token_counts","rerank_use_cohere_v3_5","enable_unified_reranker","use_gte_for_shorten_page_text","jira_ai_connector_announcement_modal","ai_logging_use_all_regions","shorten_page_text_use_approximate","disable_slack_message_features_from_s3","slack_channel_features_cache","ai_corner_chat_welcome_state","ai_yassified_writer","app_builder_notifications_module","ai_connectors_ai_plan_upsell_intro_modal","notion_ai_workspace_settings","gmail_ai_connector","autofill_all_pages_use_new_endpoint","log_all_inference_transcripts_even_with_private_info","search_fast_auto_streaming","linear_ai_connector","ai_connectors_github_hybrid_search"],E=["show_limited_qna_label","enable_limited_qna","limited_qna_dark_read"],D=["embeddings-enabled-for-spaceid","ai_connector_warm_up_vector_db_cache"],N=["sharing_contacts_tab_refresh","adoption_opt_templates_out_of_block_limit","template_creator_blocklist","marketplace_customer_blocklist","public_api_deep_copy_transclusion_containers","use_initialize_page_template_api_onboarding","adoption_track_cross_domain_submitted_prompts","use_local_duplication_for_onboarding","use_duplicate_block_sync","write_public_share_links_to_space_view",...s,"nds_datepicker_refresh","nds_default_property_noticon","should_scan_files_for_csam","replace_local_overrides_with_statsig","retry_permanently_delete_tree_kill_switch","tablet_refresh_gate","tablet_refresh_template_pills_gate","disable_backfill_transclusions_and_aliases","state_management_in_new_monday_importer","email_confirm_tid_redirect","desktop_native_redirect_tid","populate_monday_comments_as_notion_comments","route_to_canary_audio_processor_enabled","allow_cut_copy_comment","redirect_dot_so_to_dot_com","add_tid_on_dot_com_redirect","new_checkbox_design_enabled","dot_com_cookie_sync","notionscript","spreadsheet_prototype","validate_quasi_alive_block_enabled","should_create_teamspace_in_zip_importer","polyglot","allow_dead_space_views_when_joining_space","throw_on_changing_unmanaged_scim_user","log_all_headers_for_unknown_scim_idp","client_deprecate_chunk_number_enabled","log_saml_response_on_error","highlight_quasi_alive_blocks_enabled","enable_transcription_on_browser_for_debug_enabled","organization_console_ga_enabled","organization_console_new_data_compliance_view_enabled","legal_holds_enabled","legal_holds_exports_enabled","organization_console_group_single_view_modal","organization_onboarding_enabled_for_space","use_email_domain_record_on_read","organization_console_hover_card_enabled","debug_analytics","never_select_title_on_select_all","connected_relation","log_traces_to_splunk","block_menu_shortcut_fix","scim_log_postgres_in_place_updates","remove_user_invited_group_notifications","public_api_dev_mode","enabled_bev_default_audience_filter","sprig","ai_multi_level_undo","uploads_retry_all_immediately","prevent_saml_guest_login","fix_legacy_transclusions_on_duplicate","client-performance-profiler","react_18_concurrent_rendering",...T,"should_use_unified_dynamodb",...M,"allow_public_page_access_request","external_access_request_rate_limiting","onboarding_templates_from_dynamic_configs","contextualized_onboarding_debug_label","onboarding_split_intent_question","enable_add_notion_face_in_setting","sites_use_homepage_url_without_slugs","onboarding_show_progress_bar","onboarding_profile_enable_notion_faces","contextualized_onboarding_full_cutover","callouts_omnimodal","mwn_feature_modal","return_zero_in_app_messages","faces_xsell_sidebar","student_offer_jan_2025_sidebar","enable_reorder_login_options","enable_write_survey_data_optimization","transcend_inapp_privcenter","workflow_templates_prototype","workflow_templates_settings_dev","workflow_templates_builder","packaging_include_next_templates","collection_view_module","packaging_page_linking","packaging_page_linking_mobile","side_peek_transition_improvements","relation_two_way_limit_of_1_add_relation_confirmation_dialog","workflows_database_config_modal","setup_gen_extended_pages","relation_enable_clientside_metrics","rollup_enable_clientside_metrics","layouts_views_module_strip_child_cvb_of_simple_layouts","intelligent_collections_sort_modal",...B,"webhooks_beta","e_discovery","install_dlp_integrations","webhooks_enable_nightfall","public_api_bot_token_to_space","public_api_clearer_integration_access","advanced_security_in_enterprise","apply_offer_migration","apply_reverse_trial_key","deny_multiplayer_personal_plan_upgrade","guest_limit_debug_ui","native_invoice_payment","nip_demo_code","sepa_debit","test_clocks","pshwm_use_effective_time_to_get_spaces_with_smus","churnkey-update-billing-contacts","upgrade_requests_banner_for_ai_removal","packaging_changes_05_13_2025","notion_mail_ga","timed_trial_task_runner_enabled","people_tab_date_added_column","kr_card_payment_method","russian_sanctions_banner_enabled","russian_sanctions_sales_assisted_banner_enabled","resurrection_offer","uncollectible_experience_enabled","post_upgrade_modal","in_app_request_upgrades","billing_data_backfill_migration_is_active","handle_stripe_subscription_updates_enabled","business_trials_2025","add_today_button_to_db_calendar","are_upgrade_request_ai_entrypoints_enabled","version_history_request_upgrade","ai_checkout_terms_checkbox","enable_localized_templates","self_serve_localization_backend","self_serve_localization_frontend","self_serve_localization_flowdash","marketplace_payouts","track_dropped_installation_imprints","enable_queue_based_invoice_cleanup","marketplace_review_creator_response","marketplace_review_creator_response_creator_profile","template_listing_translation_use_phrase","template_listing_translate","template_algolia_sync_job","template_contentful_sync_job","template_approved_from_customerio","template_custom_email_snippet","marketplace_analytics_filters","marketplace_refund_webhook","marketplace_analytics_templates_chart","duplicate_block_await_post_submit_transaction","disable_template_screenshot_generation","duplicate_block_skip_free_chart_post_submit_transaction","enable_server_backed_local_duplicate_for_collection_template_picker","enable_local_duplication_for_non_marketplace_templates","enable_aggressive_screenshot_tool_awaiting","marketplace_buyer_profile_download_invoice","marketplace_balance_log_writes","marketplace_balance_log_assertions","marketplace_payouts_from_balance_log","marketplace_sales_csv_v2","marketplace_webhooks_tax_reporting","csv_schema_typed_merge","csv_validation_errors_fix","csv_relation_support","csv_twoway_relation_support","card_details_unified","zip_importer_enabled","csvimport_force_datadog_trace_enabled","asana-new-post-import","monday_v2_enabled","monday_v2_page_mapping_enabled","monday_v2_error_table_enabled","show_crdt_warnings","display_crdt_block_client","desktop_close_confirmation_dialog","tab_groups_beta_launch","automation_button_send_gmail_notification","automation_updated_error_states","automation_load_collection_view_with_environment","automation_new_last_edited_by_transaction_validations","automation_slack_fast_processor","formulas_batch_generator_changes","automation_relative_date_trigger","formulas_enable_clientside_metrics","formulas_enable_forward_property_cache_server","formulas_use_forwarded_property_cache_gate","sites_custom_hostnames_skip_validation","sites_split_publish_actions","sites_custom_hostnames_no_require_subdomain","sites_apex_domain_aware_validation_info","enable_public_qna","enable_public_qna_sites","enable_embeddable_sites","enable_new_public_domain_delete_flow","enable_embeddable_sites_for_space","sites_deprecate_edit_and_comment","sites_deprecate_edit_and_comment_top_bar","cron_connected_relation","notion_calendar_launch_modal","calendar_home_tile_open_in_zoom_app","calendar_home_tile_caching","calendar_auth_mmvp","prevent_edits_trash_server","prevent_edits_trash_public_api","enable_logging_for_prevent_trash_edits_validation","cdrr_deleted_from_trash_view","cdrr_ignore_additional_parent_check_for_restore_block",...R,"typed_move_to_improved_search","search_index_collection_ranking_features","search_quickfind_only_show_title_matches","quick_find_highlights_enabled","record_mention_indexing_enabled","record_mention_backfill",...D,...E,"ios_editor_prevent_focus_loss","mobile_clear_selection_on_date_mention_menu_change_kill_switch","delete_database_from_view_settings","mobile_assistant_prevent_clear_selection","mobile_lightbox_v2","mobile_open_links_in_external_browser","mobile_show_page_shimmer","mobile_skip_onboarding_timeout","mobile_keep_template_gallery_open","mab_debugging","new_page_navigation_fix","trash_dont_need_current_page","mobile_user_activation_template_gallery_refresh_gate","transaction-space-id-override","no_new_page_placeholder_text_gate","mobile_topbar_redesign","mobile_icon_picker_bottom_sheet","mobile_page_simplification","mobile_page_simplification_next","mobile_backlinks_bottom_sheet","mobile_topbar_more_menu_search","mobile_discovery_modal_restore_selection_killswitch","mobile_template_gallery_restore_selection_killswitch","ios_number_property_mab","ui_guest_disable_changes","space_encoded_bot_token","allow_space_member_to_export_analytics","space_audit_log_s3_region_map","allow_customize_integration_headers","force_capture_public_api_datadog_trace","use_bot_token_checksum","enable_notion_mail_settings_toggle","bypass_webhook_url_validation","use_space_user_recovery_for_recently_left","compare_recoverable_space_user_content_implementations","allow_transfer_content_for_extended_user_left_time","audit_log_space_permission_groups_enable","kill_retry_scheduled_deletion_tasks","change_cdrr_handling","settings_console_edge_cache","admin_content_search_no_hydrate_x_space","delete_pages_for_deleted_spaces","workspace_analytics_no_x_space","e_discovery_no_hydrate_x_space","audit_log_export_error_invalid_action_name","enable_record_page_visit_dls_viewer","create_signed_url_multi_retry","audit_log_no_hydrate_x_space","webhook_processor_no_hydrate_x_space","collection_feature_expiry_08_13_2025","multi_cell_aware_apis","fetch_backlinks_after_page_load","search_filter_by_space_id","validate_block_content_cross_space","load_cached_page_chunk_trust_pointer_space_id","enable_public_content_scanning","ai_public_sites_scanning","cove_send_manual_content_reports","cove_send_automated_content_reports","cove_allow_admin_actions","public_api_fulltext_search_enabled","file_upload_public_api","selectable_word_count","ai_co_editing","imagerenderer_disable_loading_lazy","enable_selectable_fc","simple_table_buffer","enable_error_boundary_debugger","scroll_to_block","functional_text_component","caret_based_dmp_experiment","personal_sharing_contacts_tab","disconnect_contact_import","personal_sharing_distinguish_guest_type","personal_sharing_hide_workspace_permission","personal_sharing_simplified_settings","sharing_anyone_with_the_link","sharing_dark_write_is_site","first_time_sharing_sidebar_section","sharing_login_modal","sharing_sidebar_empty_shared_section","sharing_imports_callout","public_pages_settings_tab","sharing_full_sidebar_awtl_in_member_workspace","block_attribution","desktop_app_login_with_email_redirect","desktop_app_signup_hide_passcode","ios_app_signup_hide_passcode","user_data_consent_admin_bypass","enable_deleted_page_indicator","forethought","download_for_offline","simulate_offline","offline_sync_traverse_toggle_blocks","offline_clear_cache","offline_sync_fallback_to_db_on_page_cache_miss","offline_batched_sync","offline_batched_sync_traverse_toggle_blocks_on_server","offline_push_updates","defer_remote_version_update_for_pending_tx","survey_data_writes","adding_extra_logs_in_eoi_retry_fg","allow_duplicate_scim_groups","update_formatted_name_on_scim_patch_user","saml_throw_on_temporary_password_use_case_mismatch","saml_enforced_disallow_send_temporary_password","audit_log_aes_event_read","audit_log_permanently_deleted_filter_enable","deprecate_chunk_number_enabled","drawing_block","slide_block","log_identify_cross_domain_device_ids","disable_ai_big_red_button","ai_data_sharing","convert_cut_paste_to_move","page_title_in_reranker","enable_giphy_feature_gate","admin_content_search_only_search_titles","legacy_slack_notifications","mobile_fix_ai_message_click","slack_connected_relation","zendesk_ai_enabled","use_iframely_cards","enable_link_mentions","enable_link_mention_hover","new_bookmark","new_hover_designs_lp","transcript_feedback_button","use_new_import_notification","scim_patch_race_condition_resistant_operations","scim_use_postgres_in_place_queries","message_store_client_send_request_metric_enabled","audio_processor_client_send_request_metric_enabled","enable_organization_domain_claim","support_synced_database_automations","mobile_bridge_performance_logging","ai_source_picker","client_http_gzip","is_visibility_enabled_for_db_sync","disable_poll_jobs_for_collection_entities","export_new_structure","embed_block_fallback","marketing_mwn_api_kill_switch","marketo_form_kill_switch","submit_marketo_form_upgrade","enable_guest_export","collections_view_specific_client_mode_enabled","enable_vector_search_in_autotag","dark_fetch_autotag","enable_ai_suggested_properties","typed_move_to_improved_default_results","hide_orphan_blocks","wiki_perf_improvement_local_enabled","show_keep_existing_guests_modal","export_puppeteer_upgrade_v24","meeting_notes_transcript_consumer_setup","meeting_notes_transcript_new_consumer","meeting_notes_formatting_fix",...R,...E,"search_use_local_search_cache","deep_find_enable_query_gen","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_universal_blending","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_append_keywords_to_notion_search","deep_find_should_show_streaming_ux","unified_find_debug_tools","deep_find_all_connectors","deep_find_results_skip_autocollapse_heuristic","use-gpt-4.1-for-deep-find",...D,"transcription_use_dynamic_models","people_profile_popup","send_student_form_error_messages","disable_storage_manager_estimate","toc_nested_headings","mention_menu_page_headings","derived_property_sync_processor","enable_transcript_tab","mobile_native_external_link_fix","localized_parse_number","fix_quasi_alive_block_on_read_enabled","sync_session_cookie_verification","settings_console_analytics","settings_console_content_search","use_hierarchy_in_zip_importer","selectable_or_drop_target_listener_functional_component","audit_log_guest_membership_request","is_evernote_authpopup_closing_fix_enabled","webclipper_multicell","enable_oauth_from_desktop_ux_v2","should_extract_media_from_html","csv_export_in_user_timezone","slack_token_specification","enable_server_integrations_proxy","enable_custom_siem_integration","social_media_preview_image_render_page_metadata","enable_list_users_by_email_addresses","low_guest_limit","notion_ai_assistant_continuous_eval_sample_rate","partitioned_universal_importer","input_padding","block_reactions","article_extractor_enable","google_doc_importer","quip_importer","deterministic_ids_in_quip_importer","enforce_database_tables_quip_importer","page_permissions_api","ai_indexing_allowlist","image_cropping","image_cropping_aspect_ratios","preload_cutaway","comic_sans","is_third_party_qna_enabled","qna-default-lookback-all-time","slack_grid_ai_connector","code_block_preserve_indent","google_drive_qna_ingestion","google_drive_qna_initial_sync_disabled","ai_connector_discoverability","jira_qna_ingestion","install_from_jira_marketplace","github_qna","sharepoint_qna","ingest_google_drive_non_native_files","universal_qna_gdrive_skip_hydration","qna_extra_long_recall","include_academy_content_and_guides_in_ai_help_center_search","slack_multi_team_ingestion_enabled","ingestion_mapped_parent_spaces","ingestion_mapped_child_spaces","docs_clipboard_imagedata","prefer_high_level_operations","mobile_quick_capture_icons_redesign","search_notion_calendar_ltr_reranking_model","enable_github_aisummary_linkback","github_activity_comments","github_magic_words","show_github_connected_property_settings","enable_notion_activity_notifications_in_slack","slack_db_notification_default_props_untyped_dbs","slack_db_notification_default_properties","slack_bot_enable_slack_oauth_v2","markdown_support_for_slack","enable_extra_slack_bot_logs","salesforce_connected_relation","salesforce_page_view_resync","salesforce_connected_relation_database_actions_enabled","enable_sfdc_report_grouping","enforce_sfdc_double_auth","filter_orphaned_external_instance_pointers","bypass_space_user_check_for_external_object_update","is_force_update_external_object_for_sync","connected_relations_database_actions_enabled","enforce_eap_route_blocking","use_eap_secureexternalpreview","enable_jira_timeline_sync","pause_jira_resync","pause_jira_webhooks","skip_outdated_eo_updates_for_jira_sync","show_collection_pill_at_page_level_for_jira","gmail_action_formula_recipients","disable_jira_sync_source_for_members","jira_onboarding_tour","jira_dc_streaming_projects","jira_2_way_sync","jira_dc_members_flow_enabled","jira_dc_basic_auth_enabled","jira_sync_aggregate_jira_issue_events","validation_backlink_for_jira_connected_relation","custom_jira_sync_flow_for_jira_members","jira_sync_avoid_cross_space_file_check","monitor_jira_traffic","jira_dc_site","skip_identity_mapping_for_related_external_objects_for_jira_sync","salesforce_caching","disable_import_jira_projects_queue_task","should_mark_jira_sync_bot_as_dead_if_token_is_expired","jira_sync_revamp_parent_child_linking","jira_sync_enable_user_creation_from_space_cell","in_app_startups_application","ai_assistant_universal_qna_web_search","ai_assistant_markdown","ai_assistant_router_v2_search_in_database","ai_assistant_router_v2_search","ai_assistant_router_v2_search_leap","ai_assistant_router_v2_action","ai_assistant_router_v2_action_leap","ai_assistant_router_v2_search_use_fireworks_ft_router_102","ai_assistant_router_v2_search_use_fireworks_llama3_1_70b","ai_assistant_router_v2_action_use_fireworks_llama3_1_70b","ai_assistant_router_v2_querygen_use_cerebras_llama3p3_70b","ai_assistant_router_v2_querygen_use_llama3p3_70b_dedicated","ai_research_mode_querygen_use_llama3p3_70b_dedicated","ai_research_mode_postprocess_plan_step_use_4o_mini","ai_research_mode_postprocess_plan_step_use_llama3p3_70b","ai_research_mode_filtering_use_llama3p3_70b_dedicated","ai_assistant_router_v2_querygen_add_dark_traffic","ai_assistant_should_approximate_token_count","ai_inference_cell_routing","ai_team","show_session_expiration_error_message","mab_consider_navigation_top_page","space_skip_messagestore_publish","space_bypass_log_sampling","use_new_file_token_format","dls_use_admin_settings","public_space_data_store_local_cache_disabled","id_schema","id_schema_v1","force_update_celeaf_oncompositionend","dictation_new_page_nux","organization_is_source_of_truth_for_saml","search-custom-action-results","synctest","capi_v1","capi_v2","performance_debugging_toolbar","serve_experimental_client_build_dev","load_page_chunk_omit_existing_record_versions","load_page_chunk_omit_ancestor_dependencies","send_request_ack_metric_enabled","token_v2_clientside_refresh","workspace_member_access_notif_polish","state_management_in_monday_importer","preserve_text_around_links_confluence","add_headers_to_collection","preserve_line_breaks_table_cells","preprocess_markdown_for_list_indentation","cf_importer_attachment_timeout","report_unconverted_links_to_page_mentions_confluence","preserve_spans_in_columns_confluence","dev_search_team_feature_gate","csvimport_faster_navigate_to_page_enabled","slack_ingestion_use_new_handler","should_use_confluence_attachment_map","rules_engine_query_dynamo","docs_list_actions_remove_no_clone","update_roles_via_scim","create_v2_callouts","save_transactions_upgrade_callouts_to_v2","migrate_callout_to_v2_on_click","github_student_pack","log_messagestore_attempts","respect_error_retryable_enabled","enable_page_previews","enable_slack_embed_tooltips_actual","content_export_email_render","load_page_flush","animated_list_item_block","animated_popup","emoji_frecency","beacon_pre_ipr_assets","lazier_dependencies","page_mention_react","offline_log_allowlist","assistant_replace_selection","new_bot_token_hash_writes","enable_token_store_caching","new_token_helpers","use_server_token_helpers","github_ai_connector_consumer_setup","serve_desktop_service_worker_gate","mobile_mab_mrr","mobile_mab_emoji_picker","mab_refresh_personalization_gate","mobile_discovery_modal_gate","new_bot_token_encrypt_secret_writes","dot_com_help_embeds","omit_space_from_page_cache","loadcachedpagechunk_cursor_space_id","use_lrwa_in_getspaces","lucy-in-the-sky-with-tab-blocks","beta-developers-external","db_permissions","db_permissions_user_gate","share_menu_inheritance_banner","rules_engine_query_qwak_by_default","unfurl_disable_store_verify","record_cache_backfill_space_id","use_new_admin_api_request","editor_basic_rtl","multi_cell_savetransactions","image_sizing_v2","editor_prevent_quasi_alive_block","duplicate_snapshot_navigable_blocks_by_reference","mobile_embed_menu_cursor_fix","enable_workspaceId_updates_to_external_entity","z_indexes_relative","multi_cell_get_user_notifications","updated_color_picker","forms_ga","enhanced_slash_menu_logic","enqueue_update_user_badge","github_ai_connector_paused","record_map_logging","dont_load_users","in_memory_cache_logging","ios_native_drag_handler_delay","gmail_action_redirect_improvements","disable_tasks_resync_on_view_event","scheduled_event","migrate_to_scheduled_event","google_drive_qna_enable_disconnect_for_sync_failures","google_drive_ingestion_use_instantiated_google_sdk","google_drive_use_new_sync","mail_aes_message_processor","universal_qna_delete_downgraded_space_ai_connector_data","automations_dev_tools","ks_dev_settings","record_title_rich_text","encrypted_text_block","export_skip_merge_final_zip","load_cached_page_chunk_button_children","selectable_top_margin","use_new_request_component","use_new_import_options","replace_zerobounce_with_mailgun","easy_ai_dismiss","resizable_code_block","similar_user_page_presence_store","split_google_creds","export_empty_properties","export_skip_external_collections","log_show_error_page","microsoft_teams_qna","plus_button_between_blocks","login_delay_app_reset","publish_site_automation_action","domain_wide_saml_enabled","domain_link_sharing_redesign_override","domain_link_sharing_validation_override","use_email_delay_jitter","send_gmail_retry","delay_banned_user_auto_space_deletion","enable_allowed_workspaces_header","roll_out_client_restriction_network_controls","restrict_workspace_access_to_desktop_browser","block_google_login_for_gid_mismatch","ban_dormant_custom_domain_account","sync_verification_state","microsoft_teams_ai_connector_consumer_setup","users_edge_cache","edge_cache_settings","edge_cache_plus_settings","edge_cache_mentions","edge_cache_share_menu","edge_cache_team_invite","edge_cache_person_property","ai_connectors_double_writes","new_verification_property_id","backfill_verification_when_move_into_wiki","meeting_notes","meeting_notes_override","meeting_notes_invisible_block_popup","meeting_notes_audio_process_detection","meeting_notes_audio_process_notification","meeting_notes_skip_redundant_writes","transcription_consent","translate_template_top_bar","chrono_node_date_mentions","figma_oauth_migration_gate","translate_template_backend","aes_non_enterprise_page_visit","dont_check_fileid_imports","microsoft_teams_ai_connector_enable_meta_poller","translate_template_async_tasks","dont_check_fileid_api_imports","csv_import_v2_screens","gdrive_scope_migration_gate","jira_sync_import_filters","jira_existing_sync_filters","slack_ai_connector_enable_bot_messages_processing","use_spaceid_in_get_upload_file_url","ai_connectors_google_drive_pause_live_ingestion","confluence_base_url_override","use_temp_bucket_for_export_state_file","automations_disable_for_duplication_children","paste_links_as_mentions","sharepoint_ai_connector","search_batch_load_users","opfs_recordmap_cache","opfs_save_page_strategy_revision_tracking","opfs_save_page_strategy_sync_tracking","opfs_save_page_strategy_background","opfs_save_page_strategy_navigation","route_export_task_high_memory_queue","notion_installer_download","hide_microsoft_button_to_test_mobile_statsig","reaction_notifications","calendar_agenda_preview","presence_messagestore_permissions_enforce","presence_messagestore_permissions_use","presence_messagestore_permissions_log","automations_skip_noop_update_pages","ai_attachment_search","missing_name_banner","unified_find_input_at_mentions","messagestore_client_simplify_reconnect_on_offline","route_export_task_high_memory_queue_override","notion_mail_ga","icloud_calendar_callout","notion_mail_launch_modal","notion_mail_launch_modal_2","recover_from_sqlite_corruption","recover_from_sqlite_corruption_log_integrity_check_results","workflows","workflows_ui","workflows_debug_tools","workflows_simple_mode","workflows_advanced_mode","workflows_app_container","workflows_custom_view_type","workflows_mail_module_available","workflows_zendesk_module_available","workflows_web_module_available","workflows_config_module_available","workflows_active_development_modules_available","workflows_page_module_available","workflows_github_module_available","workflows_mcp_server_module_available","workflow_container","workflow_collection_sqlite","workflows_web_search","workflows_inference_replay","workflows_use_agent","workflows_unsatisfactory_feedback","public_perms_restrict_orphaned_block","prevent_add_users_to_space_revoke_other_spaces","improved_cursor_navigation","improved_cursor_navigation_p2","passkey_nudges","auto_manage_people_collection","verify_short_space_id_getpublicpagedata","updated_6dot_menu","use_import_migration_service","hide_passkey_setting_for_old_android"],L=[...N].sort();const O={search_contacts_timeout:{timeoutMs:4500},setup_sessions_redirect:{group:"off",url:n(427704).JZ.root},marketplace_webhook:{enabled:!1,creator_to_webhook_url:{}},marketplace_creator_intervention:{creators:[],delay_days:5},marketplace_refund_email_target:{sendToEmail:"team@makenotion.com"},marketplace_acquisition_refund_processing_disallow_list:{acquisition_ids:{}},event_trail_events:{},page_tree_query_strategy:{strategy:"js_recursion_property_filter_sql"},event_trail_routing:{},collection_request_settings:{clientFormulaTimeoutMs:30*i().TD},sentry:{errorsSampleRate:0,"tracesSampleRate-v0":0,"replaysSessionSampleRate-v0":0,"replaysOnErrorSampleRate-v0":0,profilesSessionSampleRate:0,profilesSampleRate:0},gtm_ai_favorites:{space_id:void 0,collection_id:void 0},migration_task_supervisor_configs:{is_not_default:!1,universal_kill_switch:!1,cron_job_revive_supervisor_queue_task_enabled:!0,project_supervisor_config:{default:{project_kill_switch:!1,is_dry_run:!0,max_worker_per_db_shard:1,supervisor_check_worker_interval_ms:5*i().Xb,process_chunks_interval_ms:10,csv_migration_process_chunk_size:1e3,csv_migration_s3_bucket_name:void 0,csv_migration_s3_index_file_prefix:void 0,csv_migration_split_csv_file_in_chunk_size_bytes:void 0}}},permanently_delete_tree_queue_task_override:{queue_task_kill_switch_on:!1,task_delay_override_seconds:void 0,elastic_search_request_batch_size:200,s3_request_batch_size:200,redis_read_batch_size:1e4,tree_iteration_batch_size:1e4,tree_iteration_max_buffer_size:5e4,postgres_query_batch_size:1e5},message_store_client_config:{min_reconnect_delay_secs:4,max_reconnect_delay_secs:8},unsync_transclusion_block_configs:{duplication_task_check_status_interval_seconds:.5,duplication_task_check_status_max_interval_seconds:60,duplication_task_check_status_exponential_after_seconds:30,duplication_task_check_status_timeout_minutes:30,duplication_task_check_status_wait_for_no_task_data_times:10},load_test_simulator_configs:{commenter_interval_ms:1e3,page_viewer_interval_ms:100,editor_interval_ms:1e3,editor_typing_interval_ms:100,presence_interval_ms:1e3},audio_processor_configs:{audio_stream_processor_sampling_rate:1,audio_stream_processor_sampling_interval_ms:6e4},confluence_server_groups:{default:{read:[],create:[]}},notion_people_block_id:{data:{}},mwn_refund_policy_link:{link:""},marketplace_redirect_url_after_purchase_config:{},marketplace_transactional_email_config:{listingIds:[]},page_template_duplication_verbose_logging_config:{userIds:[]},load_test_bypass_rate_limit_page_ids:{pages:[]},load_test_ids:{spaceIds:[]},csv_limits:{maxRelationPages:1e3,maxRows:1e5,maxColumns:500},xlsx_limits:{maxRows:1e5,maxColumns:1e3},jira_resync_frequencies:{importResyncFrequencyMS:24*i().pT,timelineSyncFrequencyMS:6*i().pT},jira_import_batch_config:{processIssueBatchSize:10,attachmentBatchSize:1},jira_importer_records_fetch_limit:{records_limit:10},jira_resync_records_fetch_limit:{records_limit:25,process_records_limit:1},jira_sync_fields_api_concurrency:{maxConcurrency:100},jira_attachments_config:{attachmentSize:1e6,numberOfAttachments:5},jira_properties_options_limit:{optionsLimit:400},jira_notion_version_to_force_update_external_object:{notionVersion:1},jira_recent_issues_limit:{updatedInLastNDays:0},jira_fields_that_require_dynamic_options_config:{fieldIds:[]},jira_sync_data_validation_spaceids:{spaceIds:[]},jira_sync_data_validation_config:{minTimeBetweenValidationsMS:Number(i().nD),jiraFetchLimit:25,validationOnLastNumberOfDays:30,maxIssuesToValidate:1e4},salesforce_bulk_unfurl_task_config:{job_overall_block_limit:2e4,batch_size:1e3},deep_find_config:{notionSourceNumResults:100,maxPagesToDecorate:20,maxResultsPerSourceToBlendedRanking:20,maxFinalResults:40,maxResultsPerSourceToBoost:0},model_overrides:{},slack_contacts_limit:{maxLimit:100,defaultLimit:100},automation_update_pages:{},active_token_counter_config:{},workflow_templates_builder_config:{},dev_ai_context:{suggestOnPageNavigationProbability:0},qna_ai_reminders:{abandonedSearchReminderProbability:0},mobile_inbox_2_0_feedback:{},article_extractor_enable_urls:{urls:[]},ai_qna_silent_retry_mode:{},ingestion:{slack:{similarityThreshold:.8,gridAppId:"",clientId:"",prefix:"",channelIds:[],ingestionTopic:"",adminScopes:[],userScopes:[],userMappingScopes:[],gridScopes:[],ingestionCompleteDelay:3600,cleanUpDelay:3600,ingestionNextTaskDelay:300,maxChannelsPerPartition:0,enablePermissionsFilter:!1,sendToKafka:!1,showRemoveWorkspaceIntegration:!1,ingestionKafkaMaxSize:1992294,learnMoreUrl:"https://notion.so",runPoller:!0,pollerBatchSize:10,maxProcessingTime:30,allowPollerToDelete:!1,deprecateLegacy:!1,stopProcessingOnLegacy:!1,logSkippedEvents:!1,sampleRate:0},googleDrive:{mainPollTime:600,ingestionTopic:"",sendToKafka:!1,batchSizeForFileSync:10,mainPollEnabled:!0,learnMoreUrl:"https://notion.so",ingestionKafkaMaxSize:2097152,pageSize:2e3,initialSyncUserBatch:30,initialSyncFileBatch:100,googlePageSize:100,googleTokenAPIConcurrentRequestLimit:10,timeDeltaForActivityInMS:6e5,googleApiRetryConfig:{retryAttemptsMS:[500,1e3,2e3],retryAttemptRandomOffsetMS:500},initialSyncDelayInCompletion:3600,googleAuthUrl:"https://workspace.google.com/marketplace/app/notion_ai/988713442660",troubleShootingUrl:"https://notion.so",initialSyncStartDelayInSec:3600,deleteQueueTaskSecondRunDelay:3600,liveSyncSegmentTimeSec:300,googleApiTimeoutMS:6e4,googleApiTimeoutForRecallMS:1e4,marketplaceAppConfigureUrl:"https://admin.google.com/ac/apps/gmail/marketplace/appdetails/988713442660",marketplaceAppName:"Notion AI for Drive",concurrentRequestLimitForFetchingViewedOrModifiedFiles:10,maxAcceptableSyncFailureCountForDisconnect:1/0,timeThresholdForFailingLiveSyncAlertMS:864e5,useSynchronousAPICallsInInit:!1,maxFileToSyncPerUser:1e4,googleDriveFileSizeLimit:10485760},gmail:{googleAuthUrl:"",learnMoreUrl:"",troubleShootingUrl:"",marketplaceAppConfigureUrl:"",marketplaceAppName:"Notion AI for Gmail"},bucket:"",kafka:{topic:"",partitionCount:0},batchSizeForS3FileDeletes:10,downgradeSpaceAIConnectorsAfterTimeMS:2592e6},create_snapshot_configs:{load_subtree_batchSize:500,load_subtree_query_limit:10},universal_qna:{defaultExternalSources:[],blendedRecall:{strategy:"cohere"},minCosScoreGoogleDrive:-1,s3Parallelism:100,cohereRerankParallelCalls:1,hydrationParallism:20,maxSpreadsheetsToHydrate:5,asyncLabelingRatio:{notion:0,slack:0,googleDrive:0,github:0,jira:0,microsoftTeams:0,sharepoint:0},notion:{loadAncestorsEagerlyLimit:50},github:{shortenPageTextParallelism:3,maxAdditionalSpans:3},jira:{shortenPageTextParallelism:3,maxAdditionalSpans:3},microsoftTeams:{maxAdditionalSpans:3},sharepoint:{skipHydration:!1},gmail:{workspaceDeletedCacheExpireHours:120,workspaceIntegrationCredentialsCacheExpireHours:120,recallResultsPerQuery:{keyword:30,ngram:15},recallResultsPerQueryWithIntl:{keyword:15,ngram:8},shouldUseKeywordsInQueryGen:!0,shouldUseNgramsInQueryGen:!0,maxQueries:50,maxResultsToHydrate:100,hydrateParallelism:15,hydrateTimeoutMs:2e3,recallParallelism:20,fullPipelineTimeoutMs:4e3,fullPipelineRetry:!1},helpdocsCachingExpireMs:36e5,shortenPageTextModel:"cohere"},qna_embedding:{embeddingMethod:void 0},collection_virtualized_load_limits:{table:{initial_limit:50,increment_limit:50}},slack_pause_ingestion:{liveIngestion:{allWorkspaces:{events:[{type:"user_change"}]},specificWorkspaces:[]},bulkIngestion:[]},link_paste_order:{defaultOrder:{name:"Default",order:["preview","mention","link"]}},collection_service_concurrency_cost_limit:{},query_collection_rate_limit:{},query_collection_slow_mode:{windowSeconds:10,requestThresholdPerWindow:1e3,clientThrottleMs:1e3},query_collection_size_based_slow_mode:{config:[]},query_collection_chart_refetch_settings:{clientThrottleMs:3e3},offline_query_collection_settings:{limit:100,skip_if_downloaded_within_ms:36e5},offline_mode_settings:{max_blocks_per_origin_page:2e4,fast_refetch_interval_ms:0,autosynced_pages_limit:0,autosync_interval_ms:12e5,download_batch_size:10},collection_reducer_request_settings:{chart:{debounce_wait_ms:1e3},general_debounce_wait_ms:void 0},charts_query_collection_limits:{},mc_config:{},id_schema_dynamic_config_v2:{percent:0},id_schema_dynamic_config_v3:{percent:0,real_id:!1},sites_settings:{custom_hostname_validation:{retry_delay:1e3,max_retries:5,inject_failure_percent:0}},mobile_dictation_visualizer:{lowshelf_filter_frequency:1500,lowshelf_filter_gain:-30,fft_size:256,min_hz:void 0,max_hz:void 0},load_test_trace_config:{queue_page_viewer_simulator_sample_rate:0,load_test_inner_sample_rate:0},activity_type_aes_config:{default:"iae"},assume_comment_read:{},jira_sync_events_aggregation_time_window_length_ms:{time_window_length_ms:5*i().TD},gdrive_app_id:{app_id:""},capi_v2_event_names:{StartTrial:!1,InitiateCheckout:!1,CompleteRegistration:!1,Purchase:!1,PurchaseWorkType:!1,PurchaseWorkTypeProfessionalDomain:!1,Subscribe:!1,SubscribeAI:!1},imports_queue_config:{asana:{saveTransactionsBatchSize:100,fetchTaskBatchSize:100,globalUseCrdt:!0}},always_force_refetch_for_specific_tables:{tables:[]},callout_config:{callout_blocklist:[]},integration_standards_url:{url:""},integration_tech_partners:{tech_partner_ids:[]},template_feed_ranking_config:{formula_parameters:[]},multicell_api_config:{default_max_depth:10,api_overrides:{}},onboarding_templates:{joiner:{}},monday_v2_config:{unsupportedProperties:[],boardItemsLimit:100,batchSize:100,itemSaveIntervalInQueueState:1e3,itemSaveBatchDelay:100,fetchBoardsInParallel:3},github_ai_connector_configuration:{appName:"",clientId:"",timeFrame:365,shouldIndexData:!0,codeUploadBatchSize:50,knownUsersToIgnore:["doug-engelbot"],ingestPrReviews:!1,maxIssuesToIngestPerPartition:500,itemsPerPage:100,learnMoreUrl:"",maxDiffContentLength:3e3,enablePeriodicMetaSync:!1,processingTimeThreshold:12e4,maxKafkaMessageSize:2097152,disableRecallAfterInHrs:3,githubDocsUrl:"https://docs.github.com",githubDocsPath:"account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-your-personal-account/converting-a-user-into-an-organization"},jira_ai_ingestion_config:{learnMoreUrl:"https://notion.so",jiraMarketPlaceAppUrl:"https://notion.so",permissionPollerEnabled:!1,permissionPollerPollTimeInSeconds:1800,enqueueNextTaskDelayInSeconds:60,enqueueFinishTaskDelayInSeconds:3600,enqueueNextDeleteTaskDelayInSeconds:3600,promiseBatchSize:10,bulkIngestionDelaySeconds:3600,chunkLength:1e3,maxNumberOfCustomFields:100,pollerNotRunningThresholdInHours:5,disableRecallAfterInHrs:24,promiseBatchForPoller:5,enableInternalComments:!0,searchJiraFilterEntities:!1},trello_import_batch_config:{cardBatchSize:20},onboarding_config:{templatesDuplicationTimeoutInSeconds:5},multi_cell_savetransactions_metrics:{batch_sample_percent:0},automation_settings:{action_execution_max_event_loop_block_time_ms:void 0,action_execution_timeout_ms:5*i().Xb,client_formula_timeout_ms:30*i().TD,server_formula_timeout_ms:30*i().TD,web_request_timeout_ms:15*i().TD},site_sitemap_known_spam_workspaces:{space_ids:[]},activity_digest_config:{enabled:!0,v2UnifiedDigestTaskMode:"enabled",timeBufferMinutes:5,variant:"default",maxActivityGroups:10,maxActivityGroupSize:5,maxActivityGroupsWhenCombined:5,onlyTargetEnglishUsers:!1,newEmailEnablementDate:"2025-03-20T21:00:00.00Z",shouldTruncateEdits:!0,numEditsPerActivity:3},unified_digest_scheduling_config:{enabled:!0,earliestScheduleHour:6,latestScheduleHour:9,dryRunEarliestScheduleHour:3,dryRunLatestScheduleHour:6,shouldPruneScheduledDigestMessage:!0,maxMessageAgeInDays:30},home_digest_email_config:{enabled:!1,unifiedDigestTaskMode:"enabled",variant:"default",runOnDayOfWeek:5,unifiedDigestSendOnDayOfWeek:1,bucketSampleRate:1,bucketDelaySeconds:.6,minDaysBetweenEmails:5,utcStartHour:21,numUserBuckets:3e4,numDataReadyTests:10,numPreviousDaysToCheck:3,maxTasksPerEnqueue:1e3,disabledEmailDomains:[],disabledSpaceIds:[],queryCollectionTimeoutMs:10*i().TD},demo_tooltip_tour_config:{tour:{}},trusted_domains_space_ids:{space_ids:[]},marketplace_fee_overrides:{data:{}},throttle_notification_sent_analytics:{},mc_auth:{group:"dual_version_on_new_token"},marketplace_payout_delay_days:{},gmail_action_email_delay:{email_delivery_delay:120},jira_ai_connector:{prefix:"jira"},custom_emojis_config:{limit:5e3},creator_profile_allowlist:{usernames:[],names:[]},integration_webhooks_config:{},marketplace_public_purchase_url_optout:{usernames:["thomas"],contentful_ids:["17bVrJyVTyegxdnESZOVPs"]},conflicting_content_model:{model:"openai-gpt-4o-mini"},marketplace_localized_minimum_payouts:{},automation_http_request_action_denylist:{list:[]},enabled_installation_sources_for_duplicate_template_block:{in_app:!0,public_page:!0,web_gallery:!0,mobile_app:!0,onboarding:!0,team_home:!0},help_center_search_config:{maxTotalSearchResults:50,maxTemplateSearchResults:10,maxHelpCenterSearchResults:40},microsoft_teams_ai_connector:{kafkaMessageMaxSize:2097152,notificationUrl:"https://integrations-api.notion.com/microsoft/events",maxChannelsPerPartition:10,maxChannelSyncLookbackTimeMS:2592e6,syncArchivedTeams:!1,syncArchivedChannels:!1,enablePoller:!0,pageFetchThresholdForCheckpointing:10,skipIngestionForConversationsWithGuestMembers:!1,s3ReadWritesParallelism:50,bulkIngestionDelaySeconds:3600,webhookEventSamplingRate:0,maxWebhookEventProcessingTimeMS:3e4,pollerRunIntervalHrs:1,enableChatSearch:!1},template_limits:{maxNumBlocks:1e5},sharepoint_ingestion:{sendToKafka:!1,ingestionCompleteDelay:3600,ingestionNextTaskDelay:300,prefix:"sharepoint-v1",ingestionKafkaMaxSize:4718592,liveIngestionPollerEnabled:!1,liveIngestionPollerInterval:3600,userActivityLookbackDays:180,maxDriveItemSizeInBytes:10485760,rowsPerSheet:500,blockSizeInChars:1e3,enableUserRecentFilesInRecall:!1,staleRecallThresholdInHours:24,staleSyncAlertThresholdInHours:6},adoption_entry_point_time_delta:{import_nudge_on_large_paste:{view_delta:432e6},import_nudge_on_block_create__collection_view:{view_delta:432e6},import_nudge_on_block_create__collection_view_page:{view_delta:432e6},import_nudge_on_block_create__page:{view_delta:432e6},import_nudge_on_block_create__table:{view_delta:432e6},import_nudge_on_drag:{view_delta:432e6}},jira_get_api_request_limit:{expireSeconds:3600,apiLimit:5e3},adoption_stack_ranking_experiment_start:{adoption_hide_features_v2:0},automations_update_pages_jitter_config:{mode:"off",amount_ms:0},sharing_nudge_keywords:{keywords:[]},linear_ingestion:{prefix:"linear",sendToKafka:!1,nextQueueTaskDelayInSeconds:36e5,finishQueueTaskDelayInSeconds:36e5},template_creator_derank_multiplier_config:{config:{}},workflows_unsatisfactory_feedback_config:{sampleRate:.1}};const U=new Set(A);function F(e){return U.has(e)}new Set(N);function V(e){return k[e]}const j="_unassigned_";const z="NoExperimentActor";function H(e,t){const n=Object.keys(e.value).find((e=>e.toLowerCase()===t.toLowerCase())),o="__no_such_experiment__",i=n?e.get(n,o):e.get(t,o);return i===o?null:i}},715862:(e,t,n)=>{n.d(t,{e:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("expand",{viewBox:"-1 -1 9 11",svg:(0,o.jsx)("path",{id:"path0_stroke",d:"M 3.5 0L 3.98809 -0.569442L 3.5 -0.987808L 3.01191 -0.569442L 3.5 0ZM 3.5 9L 3.01191 9.56944L 3.5 9.98781L 3.98809 9.56944L 3.5 9ZM 0.488094 3.56944L 3.98809 0.569442L 3.01191 -0.569442L -0.488094 2.43056L 0.488094 3.56944ZM 3.01191 0.569442L 6.51191 3.56944L 7.48809 2.43056L 3.98809 -0.569442L 3.01191 0.569442ZM -0.488094 6.56944L 3.01191 9.56944L 3.98809 8.43056L 0.488094 5.43056L -0.488094 6.56944ZM 3.98809 9.56944L 7.48809 6.56944L 6.51191 5.43056L 3.01191 8.43056L 3.98809 9.56944Z"})})},716108:(e,t,n)=>{n.d(t,{Jn:()=>M,rS:()=>T});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var o=()=>n(604341),i=()=>n(857639),r=()=>n(416845),a=()=>n(206267),s=()=>n(386164),l=()=>n(496603),c=()=>n(502800),d=()=>n(763824),u=()=>n(534177),p=()=>n(679156),m=()=>n(449506),g=()=>n(901389),f=()=>n(508496),v=()=>n(951177),h=()=>n(898486),_=()=>n(974233),b=()=>n(972435),y=()=>n(907828),S=()=>n(818619),w=()=>n(886564),k=()=>n(847463);let I=0;const x=(0,n(959013).YK)({requestTooLarge:{id:"transactionHelpers.requestTooLargeError.message",defaultMessage:"Sorry, that request was too large."},requestTooLargeTryImportInstead:{id:"transactionHelpers.requestTooLargeError.message.tryImportInstead",defaultMessage:"Sorry, that request was too large. Try import instead?"}});let A=!1;(0,o().exposeDebugValue)("toggleTransactionQueue",(()=>{A=!A,console.info(A?"Transactions paused":"Transactions resumed")}));let C=0;(0,o().exposeDebugValue)("setTransactionQueueApiLatencyMs",(e=>{C=e,0===e?console.info("Disabling saveTransactions API latency simulation."):console.info(`Simulating saveTransactions API latency of ${e} ms.`)}));class T extends Error{constructor(e){super(e.message),this.retryDelay=void 0,this.retryReason=void 0,this.savedTasks=void 0,this.failedTasks=void 0,this.clientData=void 0,this.name="HandleSaveTransactionsError",this.retryDelay=e.retryDelay,this.retryReason=e.retryReason,this.savedTasks=e.savedTasks,this.failedTasks=e.failedTasks,this.clientData=e.clientData}}async function M(e){var t;if(A)return{value:[]};const{environment:n,tasks:o}=e,S=function(e,t){const n=new Set(t.map((e=>e.timestamp))),o=t.length-n.size;return o>0&&p().mm(e,{collision_count:o}),o}(n,o),{userId:M,tasks:D}=k().lz(o),N=D.map((e=>({id:e.id,spaceId:e.spaceId,debug:e.debug,operations:e.operations,inSudoMode:e.useSudoMode,isUndoTransaction:e.isUndoTransaction,isTemplateInstantiationTransaction:e.isTemplateInstantiationTransaction}))),L=a().JW(),O=f().default.checkGate({gateName:"client_http_gzip"})?"gzip":void 0,U=null===(t=w().A.provider)||void 0===t?void 0:t.onSaveTransactions(o,N);let F;"currentSpace"===e.cellType?F=await m().callApi({eventName:"saveTransactionsFanout",environment:n,data:{requestId:L,transactions:N},userId:M,encoding:O,headers:{}}):"space"===e.cellType?F=await m().callApi({eventName:"saveTransactionsFanout",environment:n,data:{requestId:L,transactions:N},userId:M,encoding:O,headers:(0,s().WS)({spaceId:e.spaceId})}):"main"===e.cellType?F=await m().callApi({eventName:"saveTransactionsMain",environment:n,data:{requestId:L,transactions:N},userId:M,encoding:O,headers:{}}):"legacy"===e.cellType?F=await m().callApi({eventName:"saveTransactions",environment:n,data:{requestId:L,transactions:N},userId:M,encoding:O}):(0,u().HB)(e.cellType);const V=("success"===F.type||"failed"===F.type&&!F.offline)&&"true"===F.headers["X-Notion-Client-Log-Call-Stack"];if(D.forEach((e=>{e.logCallStack=V})),C>0&&(console.info(`saveTransactions returned; simulating ${C}ms extra latency.`),await(0,d().wR)(C)),null==U||U(F),"success"===F.type)return I=0,{value:D};const j="Notion is unavailable, please try again later."===F.error.message;if(!j&&!F.error.data.offline||Math.random()<.01){const e=[...new Set(N.map((e=>e.spaceId??"NO_SPACE_ID")))];i().log({level:"error",from:"transactionActions",type:"ClientTransactionError",error:{miscErrorString:(0,c().WS)(F)},data:{requestId:L,miscDataToConvertToString:{transactions:N},userId:n.currentUser.id,spaceIds:e}})}if(413===F.status){let e,t;const o=D.length;D.forEach((n=>{var o,i;null!==(o=n.debug)&&void 0!==o&&o.userAction&&(e=n.debug.userAction),null!==(i=n.debug)&&void 0!==i&&i.userFlow&&(t=n.debug.userFlow)})),i().log({level:"error",from:"transactionActions",type:"ClientTransaction413Error",data:{totalTaskCount:o,userId:n.currentUser.id,requestId:L,userAction:e,userFlow:t}});const r=JSON.stringify(N);p().$9(n,{totalTaskCount:o,payloadLength:r.length,userAction:e});const a=Math.ceil(r.length/k().vs);for(let s=0;s<a;s++)i().log({level:"error",from:"transactionActions",type:"ClientTransaction413ErrorRecovery",data:{userId:n.currentUser.id,totalTaskCount:o,requestId:L,miscDataToConvertToString:{chunkTotal:a,chunkIndex:s,operationChunk:r.slice(s*k().vs,(s+1)*k().vs)}}});g().f1(b().A.formatMessage(e===v().Vz?x.requestTooLargeTryImportInstead:x.requestTooLarge))}const z=e=>{const t=I;if(e.failedTasks.length>0&&(I+=1),!j&&!F.error.data.offline){var o,r,a;const s=e.failedTasks.length>0?e.failedTasks[0]:void 0;s&&"space_not_found_in_record_path"===(null===(o=e.clientData)||void 0===o?void 0:o.type)&&i().log({level:"error",from:"transactionActions",type:"ClientTransactionSpaceNotFoundError",error:(0,c().convertErrorToLog)(e),data:{userId:n.currentUser.id,requestId:L,miscDataToConvertToString:(0,y().getDebugSourcesForIdsInOperations)(n,s.operations)}}),p().KY(n,{status:F.status,message:(0,_().V)(F),previous_consecutive_rollbacks:t,saved_tasks:e.savedTasks.length,failed_tasks:e.failedTasks.length,first_failed_task_user_action:null==s||null===(r=s.debug)||void 0===r?void 0:r.userAction,first_failed_task_debug_tags:null==s||null===(a=s.debug)||void 0===a?void 0:a.tags,will_retry:e.retryDelay>0,retry_reason:e.retryReason,timestamp_collision_count:S})}return{error:e}};if((0,r().OwV)(F.body)){if((0,r().mdR)(F.body.clientData)){const{errors:e}=F.body.clientData,t=e[0],o=D.findIndex((e=>e.id===t.id));if(o<0)return B(n,L,t),z(new T({message:t.name,clientData:t.clientData,retryDelay:0,retryReason:void 0,savedTasks:[],failedTasks:[]}));const i=D.slice(0,o),r=[],a=[],s=[];let l=o,c=0,d=0;for(const u of e){const e=D[l];u.id===e.id?(u.retryable?(a.push({error:u,task:e}),d+=1):(c+=1,await P(n,e,L),r.push(e),s.push({error:u,task:e})),l++):B(n,L,u)}const p=[`${i.length} successful`,c>0?`${c} failed unretryable (data loss)`:void 0,d>0?`${d} retryable`:void 0].filter(u().O9).join(", "),m=[`API error for ${D.length} transactions: ${p}.`,R(s,"unretryable"),R(a,"retryable"),F.body.debugMessage?`Debug message: "${F.body.debugMessage}"`:void 0].filter(u().O9).join(" ");let g,f=0;return a.length>0&&(f=2e3,g=a[0].error.name),z(new T({savedTasks:i,failedTasks:r,message:m,retryDelay:f,retryReason:g,clientData:t.clientData}))}if(l().mK(E,F.status))return await Promise.all(D.map((e=>P(n,e,L)))),z(new T({savedTasks:[],failedTasks:D,message:(0,h().Hu)(b().A.getIntl(),F),retryDelay:0,retryReason:void 0}))}let H=`http${F.status}`;return F.error.data.offline?H="offline":j&&(H="notionUnavailable"),z(new T({savedTasks:[],failedTasks:[],message:(0,h().Hu)(b().A.getIntl(),F),retryDelay:5e3,retryReason:H}))}async function P(e,t,n){try{await(0,S().X)(e,t)}catch(o){i().log({level:"error",from:"transactionActions",type:"ClientTransactionCleanupError",error:(0,c().convertErrorToLog)(o),data:{userId:e.currentUser.id,requestId:n}})}}function B(e,t,n){i().log({level:"error",from:"transactionActions",type:"ClientTransactionNotFoundError",error:(0,c().convertErrorToLog)(n),data:{userId:e.currentUser.id,requestId:t}})}function R(e,t){if(e.length>0){var n;const{error:o,task:i}=e[0];return`First ${t} error: ${o.name} for transaction ${i.id} created by ${null===(n=i.debug)||void 0===n?void 0:n.userAction}.`}}const E=[400,413]},716934:(e,t,n)=>{n.d(t,{W:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("todoList",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M8.064 4.494a.75.75 0 00-1.128-.988L4.024 6.833l-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zm0 8a.75.75 0 00-1.128-.988l-2.912 3.327-.94-1.17a.75.75 0 00-1.169.94l1.5 1.867a.75.75 0 001.15.024l3.5-4zM8.75 6a.75.75 0 01.75-.75H17a.75.75 0 010 1.5H9.5A.75.75 0 018.75 6zm.75 7.25a.75.75 0 000 1.5H17a.75.75 0 000-1.5H9.5z"})})},718725:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(891078),a=n(474848);function s(e,t){let{disabled:s,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u,placeholder:p,hideContent:m,legacyTransclusionParentStore:g,store:f,style:v,disableSuggestEdit:h}=e;const _=(0,i().K8)((()=>f.getBlockTitleStore()),[f]),b=(0,i().K8)((()=>f.getContentStore()),[f]),y=(0,o.useRef)(null),S=(0,i().K8)((()=>b.getValue()||[]),[b]),w=(0,r().pW)(f),k=(0,n(484714).Y0)(),I=(0,n(600871).cV)({device:k}),x=(0,o.useMemo)((()=>I?{fontSize:"1.0625em"}:void 0),[I]),A=(0,i().K8)((()=>{if(n(508496).default.checkGate({gateName:"display_crdt_block_client"})&&f.useCrdt())return{border:"1px dashed green"}}),[f]),C=(0,i().K8)((()=>{if("encrypted_text"===f.getType())return{border:"1px dashed purple"}}),[f]),T=(0,n(401497).IS)((()=>({root:{...w,...A,...C,...x,...v},title:{...n(799954).nE}})),[w,A,C,v,x]),M=!m&&S.length>0?(0,a.jsx)("div",{style:c,children:(0,a.jsx)(n(493733).A,{disabled:s,store:b,disableCommentMenu:l,disableHoverMenu:d,disableDrag:u})}):null,P=(0,a.jsxs)("div",{style:T.root,ref:y,children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)(n(524702).A,{style:T.title,disabled:s,placeholder:p,store:_,disableSuggestEdit:h,pasteBehavior:"block",legacyTransclusionParentStore:g,trackEditsToUserFlow:"user_flow_edit_block",inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,a.jsx)(n(739283).A,{disableCommentMenu:l,hideContent:m,store:f})]}),!m&&M]}),B=(0,i().K8)((()=>"encrypted_text"===f.getType()?"encrypted_text":"text"),[f]);return(0,r().NW)(f,t,(0,o.useMemo)((()=>({renderedType:B,getBlockStore:()=>f,getNode:()=>y.current})),[f,B]),P)}const l=o.memo(o.forwardRef(s),n(821062).A),c={paddingLeft:"1.5em",display:"flex",flexDirection:"column"}},718807:(e,t,n)=>{n.d(t,{Ay:()=>a,Jv:()=>o,yg:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const o=["all_pages","in_current_page","last_edited_by_me"];class i extends(()=>n(757695))().default{constructor(){super(...arguments),this.loadMoreOffset=200,this.startLimit=20,this.limitIncrement=20}getInitialState(){return{filter:"",teamspaceIds:[],lastEditedByIds:[],inPageIds:[],currentTab:"all_pages",loading:!0,limit:this.startLimit,excludePages:new Set,isInitialLastEditedByState:!0,isTrashEmpty:!0}}}function r(e,t){return"last_edited_by_me"===e.currentTab?t?[t]:[]:e.isInitialLastEditedByState&&t?[t]:e.lastEditedByIds}const a=new i},719061:(e,t,n)=>{n.d(t,{d:()=>s,o:()=>a});var o=()=>n(645873);const i=new(o().O2)("InlineRenderError",(()=>n.e(90518).then(n.bind(n,964226)))),r=new(o().O2)("LargeSurfaceRenderError",(()=>n.e(70593).then(n.bind(n,650843)))),a=(0,o()._h)(i,(e=>e.InlineRenderError)),s=(0,o()._h)(r,(e=>e.LargeSurfaceRenderError))},719147:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const i={red:"notion-link",purple:"notion-link-ai-version",blue:"notion-link-blue"};const r=function(e){let{href:t,external:r,disableHover:a,onClick:s,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,disableUnderline:u,style:p,hoverColor:m="red",children:g,color:f}=e;const v={display:"inline",textDecoration:"underline",color:f??n(100622).Ay.inherit},h=m?i[m]:i.red;return(0,o.jsx)(n(187485).A,{href:t,external:r,style:{...v,...p,...u&&{textDecoration:"none"}},onClick:s,className:a?void 0:h,onMouseDown:l,onMouseEnter:c,onMouseLeave:d,children:g})}},719431:(e,t,n)=>{n.r(t),n.d(t,{actuallyLogoutAndDeleteMostLocalData:()=>Ve,clearCurrentUser:()=>Fe,clearMostUserStorageAndState:()=>Ie,handleLoginFailureIfMicrosoftVerificationRequired:()=>Ze,handleLoginFailureIfSamlRequired:()=>Qe,handleLoginSuccess:()=>je,handleLoginWithMfa:()=>He,handleLoginWithTemporaryPasscodeSuccess:()=>Te,initialize:()=>Ke,loginPasswordReset:()=>De,loginSamlUser:()=>Ne,loginSamlUserWithToken:()=>Ee,loginUserWithPasskeyVerifyChallenge:()=>Le,loginWithAppleAuth:()=>Me,loginWithGoogleAuth:()=>Pe,loginWithMicrosoftAuth:()=>Be,loginWithTemporaryPasscode:()=>Ce,logout:()=>Ue,logoutSingleAccount:()=>Oe,openBrowserInMobileNative:()=>Ae,redirectToSaml:()=>Re,requestLoginWithGoogleOneTap:()=>xe,setLocalStorageUserId:()=>qe,shouldCreatePassword:()=>$e,showSamlRedirectMessage:()=>Xe});n(16280),n(944114),n(898992),n(354520),n(581454);var o=()=>n(590966),i=()=>n(554279),r=()=>n(584262),a=()=>n(837788),s=()=>n(857639),l=()=>n(416845),c=()=>n(861017),d=()=>n(427704),u=()=>n(798880),p=()=>n(677338),m=()=>n(994310),g=()=>n(762433),f=()=>n(445120),v=()=>n(359391),h=()=>n(496603),_=()=>n(502800),b=()=>n(763824),y=()=>n(498212),S=()=>n(534177),w=()=>n(939768),k=()=>n(449506),I=()=>n(541258),x=()=>n(901389),A=()=>n(705540),C=()=>n(687532),T=()=>n(824772),M=()=>n(468602),P=()=>n(433052),B=()=>n(496414),R=()=>n(324234),E=()=>n(666144),D=()=>n(464510),N=()=>n(435009),L=()=>n(604643),O=()=>n(426116),U=()=>n(840153),F=()=>n(893820),V=()=>n(313462);var j=()=>n(551625);var z=()=>n(780054),H=()=>n(326406),W=()=>n(235921),q=()=>n(989423),K=()=>n(725951),G=()=>n(529543),$=()=>n(898486),Y=()=>n(479954),Q=()=>n(972435),Z=()=>n(475133),X=()=>n(965378),J=()=>n(836251),ee=()=>n(161132),te=()=>n(133234),ne=()=>n(14307),oe=()=>n(645200),ie=()=>n(838824),re=()=>n(607859),ae=()=>n(12145),se=()=>n(406792),le=()=>n(179534),ce=()=>n(214006),de=()=>n(875856),ue=()=>n(351360),pe=()=>n(57605),me=()=>n(508496),ge=()=>n(589994),fe=()=>n(630116),ve=()=>n(502438),he=()=>n(24157),_e=()=>n(151168),be=()=>n(338907),ye=()=>n(905654),Se=()=>n(215152),we=()=>n(893702);const ke=(0,n(959013).YK)({unsavedChanges:{id:"loginActions.dialogError.logoutUnsavedChanges.message",defaultMessage:"You have unsaved changes. If you log out now, you could lose them."},logoutWithoutSaving:{defaultMessage:"Discard edits and log out",id:"loginActions.dialogError.logoutUnsavedChanges.confirmButton.label"},loginPendingMessage:{defaultMessage:"Logging in to Notion…",id:"loginActions.login.pending.message"},redirectSamlMessage:{defaultMessage:"SAML SSO required. Redirecting to the configured login page.",id:"loginActions.login.redirect.saml.message"}});async function Ie(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const o=[];if(t){const e=(0,p().pG)();sessionStorage.clear(),(0,p().NI)(e)}else sessionStorage.clear();ee().sw({isMobileNative:e.device.isMobileNative}),n&&o.push(Fe(e)),o.push(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,V().I)();await F().Pd(),e&&console.log("deidentify user")}()),e.mobileNative&&(o.push(e.mobileNative.logoutOfGoogle()),o.push(e.mobileNative.cancelUserBackgroundTasks())),e.device.isElectron&&(A().clearBrowserHistory(),t||A().clearCookies()),ue().default.reset(),ve().default.reset(),he().default.reset(),E().IL(e),ne().resetRecordSubscriptions(),le().A.reset(),de().default.reset(),re().default.reset(),W().A.reset(),Se().B.reset(),o.push(ge().transactionQueue.reset()),me().default.reset(),await Promise.all(o)}async function xe(e){const{environment:t,idToken:n,store:o,frontPathName:i}=e,r=await(0,Y().loadCurrentUserId)(t);we().Ps(t);const a=await k().callApi({eventName:"loginWithGoogleJwt",environment:t,data:{idToken:n,source:p().dY()}});if("success"===a.type){const{isNewSignup:e,userId:n}=a.data;return await je({environment:t,isNewSignup:e,userId:n,previousPersistedUserId:r,loginMethod:"login-with-google-onetap",frontPathName:i}),{status:"success"}}{await Qe(t,a);const e=(0,$().Hu)(Q().A.getIntl(),a);return o.setState({...o.state,alert:e}),{status:"fail"}}}function Ae(e,t){e.mobileNative&&((0,K().jd)(e)?e.mobileNative.openAuthSessionBrowser(t):e.mobileNative.openInAppBrowser(t))}async function Ce(e){const{environment:t,state:n,password:o,redirectURL:i,webBrowserDeviceId:r,passcodeEnterMethod:a,showInvitationVersion:s,isMicrosoft:l}=e,c=await(0,Y().loadCurrentUserId)(t),u=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:n,password:o,source:p().dY()}});if("success"===u.type){const{isNewSignup:e,userId:n}=u.data;if(function(e){let{environment:t,isNewSignup:n,webBrowserDeviceId:o}=e;const i=t.device.isElectronAny,r=i&&n&&!o;if(!r)return!1;return me().default.checkGate({gateName:"desktop_app_login_with_email_redirect"})}({environment:t,isNewSignup:e,webBrowserDeviceId:r})){let e=!1;const n=w().he(w().Gm({url:`${z().A.domainBaseUrl}${d().JZ.loginSuccess}`}));return t.device.isElectronAny&&(e=!0,C().P(n)),{status:"success",redirectedToWebToRelogin:e,redirectURL:n}}return await Te({environment:t,isNewSignup:e,userId:n,redirectURL:i,previousPersistedUserId:c,loginMethod:l?"login-with-microsoft":"temporary-passcode",webBrowserDeviceId:r,passcodeEnterMethod:a,showInvitationVersion:s}),{status:"success",redirectedToWebToRelogin:!1}}await Qe(t,u);return{status:"fail",errorMessage:(0,$().Hu)(Q().A.getIntl(),u)}}async function Te(e){const{environment:t}=e;await je(e);const[n,o,i]=await Promise.all([$e(t),Ye(t),Ge()]);(n&&o||n&&i)&&X().r({environment:t})}async function Me(e){const{environment:t,code:n,encryptedToken:o,encryptedNonce:i,encryptedUserObject:r,webBrowserDeviceId:a}=e,s=await(0,Y().loadCurrentUserId)(t),l=await k().callApi({eventName:"loginWithAppleAuth",environment:t,data:{code:n,encryptedToken:o,encryptedNonce:i,encryptedUserObject:r,source:p().dY()}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{isNewSignup:e,userId:n}=l.data;await je({environment:t,isNewSignup:e,userId:n,previousPersistedUserId:s,loginMethod:"login-with-apple",webBrowserDeviceId:a})}}async function Pe(e){const{environment:t,encryptedToken:n,code:o,callbackType:i,webBrowserDeviceId:r,requestId:a}=e,s=await(0,Y().loadCurrentUserId)(t),l=await k().callApi({eventName:"loginWithGoogleAuth",environment:t,data:{code:o,encryptedToken:n,callbackType:i,source:p().dY(),requestId:a}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{isNewSignup:e,userId:n}=l.data;await je({environment:t,isNewSignup:e,userId:n,previousPersistedUserId:s,loginMethod:"login-with-google",webBrowserDeviceId:r})}}async function Be(e){const{environment:t,encryptedToken:n,encryptedNonce:o,code:i,callbackType:r,state:a,webBrowserDeviceId:s}=e,l=await(0,Y().loadCurrentUserId)(t),c=await k().callApi({eventName:"loginWithMicrosoftAuth",environment:t,data:{code:i,encryptedToken:n,encryptedNonce:o,callbackType:r,state:a,source:p().dY()}});if("success"===c.type){const{isNewSignup:e,userId:n}=c.data;await je({environment:t,isNewSignup:e,userId:n,previousPersistedUserId:l,loginMethod:"login-with-microsoft",webBrowserDeviceId:s})}else{await Qe(t,c);if(!Ze(t,c)){return(0,$().Hu)(Q().A.getIntl(),c)}}}function Re(e,t){we().Wq(e),e.mobileNative?Ae(e,t):e.device.isElectronAny?(s().log({level:"info",from:"loginActions",type:"redirectToSamlOnDesktop",data:{miscDataToConvertToString:{redirectUrl:t}}}),C().P(t)):window.location.href=t}async function Ee(e){const{environment:t,csrfState:n,token:o,isNewSignup:i}=e,r=await(0,Y().loadCurrentUserId)(t),a=await G().getBrowserId(t);n||o||s().log({level:"error",type:"loginSamlUserWithToken",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:a,isNewSignup:i}}});const l=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:n,password:o,source:p().dY()}});if("success"!==l.type)return await Qe(t,l),(0,$().Hu)(Q().A.getIntl(),l);{const{userId:e}=l.data;await je({environment:t,isNewSignup:i,userId:e,previousPersistedUserId:r,loginMethod:"saml"})}}async function De(e){const{environment:t,csrfState:n,password:o,loginStore:i}=e,r=await(0,Y().loadCurrentUserId)(t);if(!n){const e=await G().getCookie(t,"notion_browser_id");s().log({level:"error",type:"loginPasswordReset",from:"loginActions",error:{stack:(new Error).stack},data:{miscDataToConvertToString:{deviceId:e,previousPersistedUserId:r}}})}const a=await k().callApi({eventName:"loginWithEmail",environment:t,data:{state:n,password:o,passwordReset:!0}});if("success"!==a.type)return await Qe(t,a),(0,$().Hu)(Q().A.getIntl(),a);{const{userId:e,enabledMfaSettings:n}=a.data;n&&n.length>0?(He({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:r,loginMethod:"password-reset",loginStore:i,mfaSettings:n}),N().navigateOnBaseUrl({environment:t,url:d().JZ.login}),X().r({environment:t})):(await je({environment:t,isNewSignup:!1,userId:e,previousPersistedUserId:r,loginMethod:"password-reset"}),X().r({environment:t}))}}async function Ne(e){const{environment:t,userId:n,previousUserId:o,isNewSignup:i}=e;await je({environment:t,isNewSignup:i,userId:n,previousPersistedUserId:o,loginMethod:"saml"})}async function Le(e){var t;const{environment:n,attestation:o,attemptId:i,showInvitationVersion:r}=e,a=await(0,Y().loadCurrentUserId)(n),s=await k().callApi({eventName:"loginWithPasskeyVerifyChallenge",environment:n,data:{attemptId:i,attestation:o,source:p().dY()}});if("failed"===s.type&&"CantAccessWorkspaceFromNetworkError"===(null===(t=s.body)||void 0===t?void 0:t.name))throw new(l().Cdc)({type:"cant_access_workspace_from_network"});return"success"===s.type&&(!(!s.data.verified||!s.data.userId)&&void(await je({environment:n,isNewSignup:!1,userId:s.data.userId,loginMethod:"passkey",previousPersistedUserId:a,showInvitationVersion:r})))}async function Oe(e){const{environment:t,userId:n,logoutOrigin:o,fcmToken:i}=e,{nextUserId:a,nextSpaceViewStore:s}=function(e){const{environment:t,userId:n}=e,o=t.currentUser.id;if(n===o){const e=ce().A.getAllSpaceViewStores(t).filter((e=>{const t=e.getUserRootParentId();return t&&t!==n}))[0];return{nextUserId:e&&e.getUserRootParentId(),nextSpaceViewStore:e}}{const{currentSpaceViewStore:e}=ue().default.state;return{nextUserId:o,nextSpaceViewStore:e}}}(e);if(a&&s){if(await ge().transactionQueue.hasTasksForUser(n)){const{accept:e}=await x().Gh({message:Q().A.formatMessage(ke.unsavedChanges),acceptLabel:Q().A.formatMessage(ke.logoutWithoutSaving)});if(!e)return}i&&R().invalidateToken({environment:t,userId:n,token:i}),await k().callApi({eventName:"logout",environment:t,data:{userId:n,logoutOrigin:o}}),await ge().transactionQueue.clearForUser(n),ee().sw({isMobileNative:t.device.isMobileNative,userId:n});const e=await U().T({environment:t,newCurrentUserId:a,loggedOutUserId:n}),{currentUserRootStore:l,currentUserSettingsStore:c}=ue().default.state;if(l&&c){t.currentUser.id===n&&O().tR({environment:e,spaceViewStore:s,userSettingsStore:c,userRootStore:l,pageVisitSource:r().y8.Login,navigationType:"switchingToOrLoadingSpace"})}A().refreshAll({includeFocusedWindow:!1})}else await Ue(t),A().refreshAll({includeFocusedWindow:!1})}async function Ue(e){if(await ge().transactionQueue.anySessionHasTasks()){const{accept:e}=await x().Gh({message:Q().A.formatMessage(ke.unsavedChanges),acceptLabel:Q().A.formatMessage(ke.logoutWithoutSaving)});if(!e)return}if((0,J().w6)(e))return void(window.location.href=`${z().A.domainBaseUrl}/logout`);if(!me().default.checkGate({gateName:"dot_com_cookie_sync"})||e.device.isElectron||e.device.isNative)N().oo({environment:e,url:d().JZ.logout});else{const n=`${z().A.front.domainBaseUrl}/front-api/status`;let o;try{o=await fetch(n)}catch(t){return void N().oo({environment:e,url:d().JZ.logout})}if(!o||200!==o.status)return void N().oo({environment:e,url:d().JZ.logout});const i=`${z().A.front.domainBaseUrl}/front-api/cookie-sync?logout=true&original_url=/logout`;N().oo({environment:e,url:i})}}async function Fe(e){if(e.mobileNative&&await e.mobileNative.unregisterPushNotifications(),e.updateCurrentUserId){const t={environment:e,currentUserId:void 0,userIds:[]};e.updateCurrentUserId(t)}return{...e,currentUser:new(o().CurrentUser)}}async function Ve(e){const{environment:t,nextLocation:n,userId:o,doNotRedirect:i,logoutOrigin:r}=e;o?await k().callApi({eventName:"logout",environment:t,data:{userId:o,logoutOrigin:r}}):await k().callApi({eventName:"logout",environment:t,data:{logoutOrigin:r}}),await Ie(t),A().clearGoogleAuthCookies(),A().refreshAll({includeFocusedWindow:!1}),i||(window.location.href=n||d().JZ.root)}async function je(e){const{environment:t,isNewSignup:n,userId:o,redirectURL:r,previousPersistedUserId:l,frontPathName:u,webBrowserDeviceId:m,passcodeEnterMethod:g,showInvitationVersion:f}=e;n||((0,_e().Os)()&&ae().A.setState({open:!0,isExistingUser:!0}),B().m({message:ke.loginPendingMessage}));try{var v,h,_;const I=ye().T_(t);E().IL(t),t.device.isElectron&&(A().clearBrowserHistory(),A().refreshAll({includeFocusedWindow:!1}));const x=me().default.checkGate({gateName:"enable_oauth_from_desktop_ux_v2"}),C=(0,p().KB)({config:x?z().A:void 0,fileHostProtocol:z().A.secureFileConfig.protocol,fileHostName:z().A.secureFileConfig.hostname}),B="mail"===p().dY();if(l&&l!==o){const e=await ge().transactionQueue.getTotalNumberOfTasks();e>5&&s().log({level:"warning",from:"loginActions",type:"setLoggedInUserId",data:{userId:o,currentUserId:l,clearedTransactionCount:e}}),await Ie(t,I,!t.currentUser.loggedInUserIds.includes(l)),B&&p().Ht("mail")}if(!l){const e=M().M(void 0);M().Y({currentUserId:o,blockId:e}),M().Y({currentUserId:void 0,blockId:void 0})}const R=await We(t,o);if(n){!function(e,t){(0,j().T)({environment:e,userId:(0,y().ot)(t.user_id),traits:{...t,...t.tags?{original_tags:t.tags}:void 0,user_id:(0,y().ot)(t.user_id)}})}(R,{user_id:o,tags:(0,p().sY)(),origin_initial_page:L().getInitialPage(o)});const t=await(0,q().PZ)(R),i=(0,H().A)();await(0,b().nQ)(200,k().callApi({eventName:"initializeUserAnalyticsEmptySync",environment:R,data:{isNewSignup:n,analyticsProperties:(0,a().A)({...(0,q().LU)(),...(0,q().V4)(),...(0,Z().getMobileNativeDeviceInfo)(),...t,experiments:me().default.getExperimentsMap(),login_method:e.loginMethod,signup_from:t.route_name,front_pathname:u,web_browser_device_id:m,passcode_enter_method:g,is_form_signup:i},"ignore-class-instances")}}))}else p().SQ();let O=r;O||"other"!==(null==C?void 0:C.type)||(O=C.result,(0,p().HP)());const U=p().$m();let F;if(U&&!n&&(D().V(U.formResponseId,U.formSecretKey,U.formSpaceId),p().ip()),O&&(F=c().parseRoute({url:O,isMobile:R.device.isMobile,baseUrl:z().A.domainBaseUrl,publicDomainName:z().A.publicDomainName,protocol:z().A.protocol,currentUrl:window.location.href})),F)if("space"===F.name||"page"===F.name&&!F.shouldDuplicate)P().fm({route:F,userId:o,spaceId:F.spaceId});else if(F&&"oauthAuthorization"===F.name){const{responseType:e,redirectUri:t,integrationId:n,state:o,owner:i,userId:r,spaceId:a}=F;(0,p().NI)({responseType:e,redirectUri:t,integrationId:n,state:o,owner:i,userId:r,spaceId:a})}if(T().cL(),await T().fD(R),await(0,b().nQ)(2e3,T().DM(R)),we().c3(R,{is_new_signup:n,login_method:e.loginMethod,logged_in_user_ids:R.currentUser.loggedInUserIds.map((e=>(0,y().ot)(e))),most_recent_user_id:(0,y().ot)(o),web_browser_device_id:m,passcode_enter_method:g,userId:o}),function(e,t){switch(se().default.measure("login_time",{environment:t,data:{loginMethod:e}}),e){case"login-with-google-onetap":case"login-with-google":se().default.measure("login_time.google",{environment:t});break;case"login-with-microsoft":se().default.measure("login_time.microsoft.verified",{environment:t});break;case"login-with-apple":se().default.measure("login_time.apple",{environment:t});break;case"password-mfa":case"password":se().default.measure("login_time.password",{environment:t,data:{loginMethod:e}});break;case"temporary-passcode":se().default.measure("login_time.passcode",{environment:t});break;case"passkey":se().default.measure("login_time.passkey",{environment:t})}}(e.loginMethod,R),i().u4({device:R.device,event:{facebook:{eventName:"ViewContent"},google:{eventName:"loggedIn"}},cookieService:t.cookieService}),z().A.isAdminMode){if(!(await G().getGhostAdminUserId(t)))return void N().oo({environment:t,url:"/__admin"})}const V=Boolean(null===(v=O)||void 0===v?void 0:v.startsWith(`${z().A.mail.domainBaseUrl}/`)),W=t.device.isElectronMail,K=Boolean(null===(h=O)||void 0===h?void 0:h.startsWith(`${z().A.calendar.domainBaseUrl}/`))||Boolean(null===(_=O)||void 0===_?void 0:_.startsWith(`${z().A.domainBaseUrl}/calendarAuth/`)),$=O===d().JZ.startupsApplication;if("oauth"===(null==C?void 0:C.type)||"file"===(null==C?void 0:C.type)||"global_oauth"===(null==C?void 0:C.type))(0,p().HP)(),null!=C&&C.result&&(await ge().transactionQueue.drain(),ze({environment:R,reload:!0,url:null==C?void 0:C.result}));else if(!I&&l&&l!==o)ze({environment:R,reload:!0,url:d().JZ.root});else if(n)ze(f?{environment:R,url:d().JZ.onboarding}:O&&V||O&&$?{environment:R,url:d().JZ.root}:O?{environment:R,url:O}:{environment:R,url:d().JZ.root});else if(!O||!F||V||K||W||!(0,S().O)(d().GJ,F.name)&&"page"!==F.name&&"samlAuthCallback"!==t.RouterStore.state.initialRoute.name&&"passkeyAuthCallback"!==t.RouterStore.state.initialRoute.name)if(O&&V)ze({environment:R,url:`${O}#activeUserID=${o}`}),p().$A();else if(O&&K||"calendar"===p().dY()&&!n)await ge().transactionQueue.drain(),await(0,oe().J7)({environment:R,url:`${z().A.domainBaseUrl}/calendarAuth/`,from:"handleLoginSuccessRedirect",targetSelf:!0}),p().$A();else if(O&&W&&("googleAuthCallback"===t.RouterStore.state.route.name||"appleAuthCallback"===t.RouterStore.state.route.name||"samlAuthCallback"===t.RouterStore.state.route.name||"passkeyAuthCallback"===t.RouterStore.state.route.name))ze({environment:R,url:`${O}#activeUserID=${o}`}),p().$A();else if("mail"!==p().dY()||n){const e=p().r9()??void 0,n=e&&(0,be().u)(t)?w().O$(d().JZ.workflowTemplates,{t:"aiBuilder",prompt:e,origin:"marketing_magic_box"}):d().JZ.root;e&&p().IV(),ze({environment:R,url:(0,p().f3)()??n}),(0,p().zt)()}else await ge().transactionQueue.drain(),await(0,ie().Z)({environment:R,from:"handleLoginSuccessRedirect",targetSelf:!0}),p().$A();else ze({environment:R,url:O})}finally{B().V()}}function ze(e){const{environment:t,url:n,reload:o}=e;o?window.location.href=n:(I().cL(t),N().oo({environment:t,url:n}))}function He(e){const{loginStore:t,userId:n}=e,o=new(fe().LU)(e.environment,{table:u().oo,id:n},{userId:n});t.setState({...t.state,settings:e.mfaSettings,loginType:"mfa",redirectURL:e.redirectURL,previousPersistedUserId:e.previousPersistedUserId,userStore:o})}async function We(e,t){await async function(e,t){await qe(e,t)}(e,t);let n=[t];const i=await(0,Y().G)(e);i&&(i.push(t),n=h().sb(i));const r=await G().getGhostAdminUserId(e),a={...e,currentUser:new(o().CurrentUser)({id:t,loggedInUserIds:n,adminUserId:r})};if(e.updateCurrentUserId){const o={environment:e,currentUserId:t,userIds:n};await e.updateCurrentUserId(o)}return a.device.isFirefox||ee().Ce(),a}async function qe(e,t){const n=await(0,Y().G)(e);n&&!n.includes(t)||m().A.set(Y().l,t)}async function Ke(e){const t=await(0,Y().loadCurrentUserId)(e),{mobileNative:n}=e;if(n&&n.sqliteConnection)try{await v().Jm(n.sqliteConnection,t||f().m)}catch(o){s().log({level:"error",from:"loginAction.ts",type:"backfillRecordsWithUserId",error:(0,_().convertErrorToLog)(o),data:{}})}return t?await We(e,t):e}async function Ge(){var e;const{currentUserStore:t}=ue().default.state;if(!t)return!1;if(!t.getEmail())return!1;const{currentUserSettingsStore:n}=ue().default.state;return!!n&&(await n.load(),Boolean(null===(e=n.getSettings())||void 0===e?void 0:e.should_set_password_on_login))}async function $e(e){const{currentUserStore:t}=ue().default.state;if(!t)return!1;const n=t.getEmail();if(!n)return!1;const o=await X().V({environment:e,userEmail:n});if(o.error)throw o.error;return!o.value.isSamlEnforced&&!o.value.hasPassword&&!o.value.didLogInWithSaml}async function Ye(e){var t;const n=null===(t=ue().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!n)return!1;const o=await pe().A.awaitData(e,{spaceId:n});return"student"===(0,g().AI)(o)}async function Qe(e,t){var n,o;if("saml_sso_required"===(null===(n=t.body.clientData)||void 0===n?void 0:n.type)&&null!==(o=t.body.clientData)&&void 0!==o&&o.redirectUrl){await Xe(2e3);Re(e,t.body.clientData.redirectUrl)}}function Ze(e,t){if((0,l().op4)(t.body)&&"email_verification_required"===t.body.clientData.type){const{email:n,thirdPartyToken:o}=t.body.clientData;return te().A.setState({...te().A.state,loginType:"microsoft_login",email:n,thirdPartyToken:o,needsSendTemporaryPasswordReason:"microsoft_login_verification"}),N().navigateOnBaseUrl({environment:e,url:d().JZ.login}),!0}return!1}async function Xe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;B().m({message:ke.redirectSamlMessage}),await(0,b().wR)(e),B().V()}},720128:(e,t,n)=>{n.d(t,{A:()=>s});n(581454);var o=n(296540),i=()=>n(751380),r=()=>n(288722),a=n(474848);const s=function(e){const{text:t,highlighter:n}=e;if(!n)return(0,a.jsx)(r().A,{children:t});const s=n.tokenize(t).map(((e,t)=>(0,i().dJ)(e)?(0,a.jsx)("span",{style:n.style,children:(0,a.jsx)(r().A,{children:(0,i().tK)(e)})},t):(0,a.jsx)(r().A,{children:(0,i().tK)(e)},t)));return(0,a.jsx)(o.Fragment,{children:s})}},721265:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("lockedKeyhole",{viewBox:"0 0 64 64",svg:(0,o.jsx)("path",{d:"m44,26v-6c0-7.4-4.6-12-12-12s-12,4.6-12,12v6h-8v30h40v-30h-8Zm-18-6c0-4.09,1.91-6,6-6s6,1.91,6,6v6h-12v-6Zm11,28v2h-10v-2l2.51-6.69c-1.49-.86-2.51-2.46-2.51-4.31,0-2.76,2.24-5,5-5s5,2.24,5,5c0,1.85-1.02,3.45-2.51,4.31l2.51,6.69Z"})})},722038:(e,t,n)=>{n.d(t,{y:()=>r});var o=()=>n(484714),i=()=>n(963589);function r(){const{device:e}=(0,o().v3)(),t=e.isElectron||e.isMobileNative;return(0,i().X)("download_for_offline")&&t}},722101:(e,t,n)=>{n.d(t,{B8:()=>p,BC:()=>m,Br:()=>l,Hs:()=>g,TF:()=>u,WH:()=>c,Yb:()=>f,nc:()=>d});n(944114);var o=()=>n(508496),i=()=>n(826810),r=()=>n(44729),a=()=>n(257216),s=()=>n(751156);function l(e){const{parentStore:t,oldChildStore:n,newChildStore:o,transaction:i}=e,r=n.id,l=o.id,c=(t.getValue()||[]).indexOf(r);a().Zd({parentStore:t,childStore:o,transaction:i}),a().Bu({parentStore:t,childStore:n,transaction:i}),c>=0&&(s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:l,after:r}}}),s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:r}}}));return{parentStore:t,childStore:o.cloneWithNewUIParent(t)}}function c(e){const{parentStore:t,insertStore:n,afterStore:i,transaction:l,preferHighLevelOperations:c}=e;let d;i&&(d=i.id),c&&o().default.checkGate({gateName:"prefer_high_level_operations"})?(l.annotateWithDebugTag("tx_tag.prefer_high_level_operations"),r().NI({childStore:n,parentStore:t,transaction:l,after:d})):(a().Zd({parentStore:t,childStore:n,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{after:d,id:n.id}}}));return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function d(e){const{parentStore:t,insertStore:n,beforeStore:o,transaction:i}=e;let r;o&&(r=o.id),a().Zd({parentStore:t,childStore:n,transaction:i}),s().applyOperation({transaction:i,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{before:r,id:n.id}}});return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function u(e){void 0===e.shouldGarbageCollect&&(e.shouldGarbageCollect=!0);const{parentStore:t,childToRemoveStore:n,shouldGarbageCollect:r,transaction:l}=e;if(a().Bu({parentStore:t,childStore:n,transaction:l}),s().applyOperation({transaction:l,store:t,operation:{pointer:t.pointer,path:t.path,command:"listRemove",args:{id:n.id}}}),r&&l.preEnqueueActions.push((()=>{i().Si({parentStore:t,transaction:l})})),o().default.checkGate({gateName:"docs_list_actions_remove_no_clone"}))return{parentStore:t,childStore:n};const c=n.cloneWithNewUIParent(t);return{parentStore:t,childStore:c}}function p(e){const{parentStore:t,appendStore:n,transaction:o}=e;a().Zd({parentStore:t,childStore:n,transaction:o}),s().applyOperation({transaction:o,store:t,operation:{pointer:t.pointer,path:t.path,command:"keyedObjectListAfter",args:{value:n.pointer,after:void 0}}});return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function m(e){const{parentStore:t,appendStore:n,transaction:o,after:i}=e;a().Zd({parentStore:t,childStore:n,transaction:o}),s().applyOperation({transaction:o,store:t,operation:{pointer:t.pointer,path:t.path,command:"listAfter",args:{id:n.id,after:i}}});return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function g(e){const{parentStore:t,prependStore:n,transaction:o,before:i}=e;a().Zd({parentStore:t,childStore:n,transaction:o}),s().applyOperation({transaction:o,store:t,operation:{pointer:t.pointer,path:t.path,command:"listBefore",args:{id:n.id,before:i}}});return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}function f(e){const{parentStore:t,currentStore:n,afterStore:o,transaction:i}=e;o?c({parentStore:t,insertStore:n,afterStore:o,transaction:i}):g({parentStore:t,prependStore:n,transaction:i});return{parentStore:t,childStore:n.cloneWithNewUIParent(t)}}},722559:(e,t,n)=>{n.d(t,{$s:()=>c,K0:()=>m,zL:()=>d,Q3:()=>u,tr:()=>p});n(16280);var o=()=>n(690495),i=()=>n(917629);const r=["Modal","SidebarFooter","Tooltip","None"],a={modal:"Modal",sidebar:"SidebarFooter",static:void 0,empty:"None"},s={modal:["desktop"],sidebar:["desktop"],static:[],empty:["desktop"]};function l(e){const t=(0,i().h2)(e);if(!t)throw new Error(`Invalid static message key: ${e}`);return t}function c(e){if(!e)return;const t=e;return r.includes(t)?t:void 0}function d(e){if(e.isDesktop)return"desktop";if(e.isMobileBrowser)return"mobile-web";if(e.isMobileNative){if(e.isApple)return"mobile-ios";if(e.isAndroid)return"mobile-android"}throw new Error(`Unsupported device: ${e}`)}function u(e){if("static"===e.type){const t=l(e.key);return(0,i().t9)(t)}const t=a[e.type];if(!t)throw new Error(`No placement for type: ${e.type}`);return t}function p(e){if("static"===e.type){const t=l(e.key);return o().lU[t].platforms}return s[e.type]}function m(e){if("static"===e.type){const t=l(e.key);return o().lU[t].dismissal_type}return"once_per_user"}},722872:(e,t,n)=>{n.d(t,{Tf:()=>a,gu:()=>i,xu:()=>r});var o=n(296540);let i=function(e){return e[e.Modal=0]="Modal",e[e.ActionSheet=1]="ActionSheet",e[e.Popup=2]="Popup",e}({});const r=(0,o.createContext)({menuType:void 0,enableMobileRefresh:void 0});function a(){return(0,o.useContext)(r).enableMobileRefresh??!1}r.displayName="MenuContext"},723545:(e,t,n)=>{n.d(t,{K:()=>r});var o=()=>n(896628),i=()=>n(751156);function r(e){const{environment:t,blockStore:n,state:r,transaction:a}=e,s=e=>{o().zA({stores:[n],update:{transcription_state:r},transaction:e})};a?s(a):i().createAndCommit({userAction:"transcriptionBlockActions.setTranscriptionState",environment:t,canUndo:!0,perform:s})}},724456:(e,t,n)=>{n.d(t,{H:()=>S});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454);var o=()=>n(592269),i=()=>n(970013),r=()=>n(206267),a=()=>n(912720),s=()=>n(161479),l=()=>n(496603),c=()=>n(183558),d=()=>n(449506),u=()=>n(751086),p=()=>n(246826),m=()=>n(751156),g=()=>n(342),f=()=>n(594794),v=()=>n(972435),h=()=>n(398391),_=()=>n(508496),b=()=>n(878423);function y(e){const{environment:t,collectionStore:n,property:o,transaction:s}=e,l=n.getSchema()[o];if(!l||!i().nu(l))return;const c=(0,f().Z1)({environment:t,table:a().yB,spaceId:n.getSpaceId()});p().eC({environment:t,table:a().yB,inMemoryRecordCache:n.inMemoryRecordCache,value:{id:c,parent_id:n.id,parent_table:n.table,alive:!0,space_id:n.getSpaceId(),status:"active",trigger:{id:r().JW(),type:"button"}},transaction:s}),p().zv({store:n.getSchemaStore(),data:{[o]:{...l,automation_id:c}},transaction:s})}function S(e){const{environment:t,collectionStore:n,oldSchema:r,newSchema:a,transaction:f}=e,S=i().q(r),w=i().q(a),k=Object.keys(w),I=_().default.checkGate({gateName:"collections_property_type_change_rename_group"});for(const s of k){const e=S[s],r=w[s];if(r){if("status"===r.type&&"status"!==(null==e?void 0:e.type)){let a;a="select"===(null==e?void 0:e.type)||"multi_select"===(null==e?void 0:e.type)?(0,o()._)(r.name,e.options??[],v().A.getIntl()):r.groups&&r.options&&r.defaultOption?r:i().D(r.name,v().A.getIntl());const l={...w,[s]:a};if(p().zv({store:n,data:{schema:l},transaction:f}),"checkbox"===(null==e?void 0:e.type)&&"status"===r.type){const e=a.groups??[],o=e[e.length-1];o&&(0,u().a)({environment:t,collectionStore:n,property:s,oldValue:{type:"checkbox",value:!0},newValue:{type:"status",value:{type:"by_group",group:o.name}},transaction:f,preventPublishAppEventsForBlockUpdates:I})}}if("status"===(null==e?void 0:e.type)&&"checkbox"===r.type){const o=e.groups??[],i=e.options??[],r=o[o.length-1],a=i.filter((e=>{var t;return null==r||null===(t=r.optionIds)||void 0===t?void 0:t.includes(e.id)}));for(const e of a)(0,u().a)({environment:t,collectionStore:n,property:s,newValue:{type:"checkbox",value:!0},oldValue:{type:"status",value:{type:"by_option",option:e.value}},transaction:f,preventPublishAppEventsForBlockUpdates:I})}}}for(const o of k){var x;const e=S[o],r=w[o],a=r&&!(e&&i().lx(e))&&i().lx(r),u=null===(x=b().A.state.caches[g().o8])||void 0===x?void 0:x.inMemoryRecordCache;if(a&&u===n.inMemoryRecordCache){const e=h().f.state;if(e.open&&e.csvHeaders&&e.csvSampleRows&&r){const t=e.csvHeaders.findIndex((e=>e===r.name));if(-1!==t){const a=e.csvSampleRows.map((e=>e[t])).filter((e=>"string"==typeof e&&""!==e));let s;s="multi_select"===r.type?Array.from(new Set(a.flatMap((e=>e.split(","))).map((e=>e.trim())).filter((e=>""!==e)))):Array.from(new Set(a.map((e=>e.trim())).filter((e=>""!==e))));const l=[];s.forEach((e=>{const t={id:(0,c().Ay)(),value:e,color:(0,i().Zd)(l)};l.push(t)}));const d={...r,options:l};p().zv({store:n.getSchemaStore(),data:{[o]:d},transaction:f})}}}else a&&d().callApi({eventName:"getSelectPropertyValues",environment:t,data:{collection:{id:n.id,spaceId:(0,s().e)(n.pointer.spaceId)},property:o}}).then((e=>{if("failed"===e.type)throw e.error;const{results:a}=e.data,s=r.options||[],d=i().q(n.getSchema()),u=l().hS([...s,...a.map((e=>({id:(0,c().Ay)(),value:e})))],(e=>e.value));for(const t of u)t.color||(t.color=i().Zd(u));const g={...r,options:u},f={...d,[o]:g};m().createAndCommit({userAction:"collectionViewActions.handleCollectionSchemaUpdated",environment:t,canUndo:!0,perform:e=>{p().zv({store:n,data:{schema:f},transaction:e})}})})).catch((()=>{}))}const A=l().sb([...Object.keys(S),...Object.keys(w)]);for(const o of A){const e=S[o],r=w[o],a=e&&i().lx(e)||"status"===(null==e?void 0:e.type),s=r&&i().lx(r)||"status"===(null==r?void 0:r.type);if(a&&s&&e.type===r.type){const i=r,a=e.options||[],s=i.options||[],c=l().sb([...a.map((e=>e.id)),...s.map((e=>e.id))]);for(const l of c){const i=a.find((e=>e.id===l)),c=s.find((e=>e.id===l));if(i&&c&&i.value!==c.value){const a="status"===e.type?{type:"status",value:{type:"by_option",option:i.value}}:{type:e.type,value:i.value},s="status"===r.type?{type:"status",value:{type:"by_option",option:c.value}}:{type:r.type,value:c.value};(0,u().a)({environment:t,collectionStore:n,property:o,oldValue:a,newValue:s,transaction:f,preventPublishAppEventsForBlockUpdates:!1})}}}}for(const o of A){const e=w[o];"button"!==(null==e?void 0:e.type)||e.automation_id||y({environment:t,collectionStore:n,property:o,transaction:f})}}},725332:(e,t,n)=>{n.d(t,{U:()=>i});var o=()=>n(751156);function i(e){const{transaction:t,discussionStore:n}=e,i=n.userId;if(!i)return;const r=n.getUserSeenRecordStore(i);return o().applyOperation({store:r,operation:{pointer:r.pointer,path:[],command:"update",args:{user_id:i,space_id:r.pointer.spaceId,parent_id:n.id,parent_table:n.table,last_seen_at:(new Date).getTime()}},transaction:t}),n}},725614:(e,t,n)=>{n.r(t),n.d(t,{arrowDownMultiText:()=>Z,arrowLeftMultiText:()=>X,arrowRightMultiText:()=>J,arrowUpMultiText:()=>Q,blurActiveElement:()=>q,clear:()=>K,clearForceExtendAnnotations:()=>N,clearSavedSelectionXPosition:()=>j,editNearestBlock:()=>ee,editNearestBlockOrInsertIfAtBottomOfPage:()=>te,insertIfAtBottomOfColumn:()=>ne,maybeHandleExpectedBrowserSelectionUpdate:()=>H,saveSelectionXPosition:()=>V,selectAllText:()=>F,selectAllTextMulti:()=>U,selectAndEditMultiSelection:()=>oe,setExtendAnnotation:()=>D,setMultiSelection:()=>P,setSelection:()=>R,setSelectionAtEnd:()=>O,setSelectionAtStart:()=>L,setSelectionComposing:()=>B,syncTextSelection:()=>re,toggleExtendAnnotation:()=>E,updateFromBrowserSelectionAfterTick:()=>W});n(944114),n(898992),n(672577),n(737550);var o=()=>n(908006),i=()=>n(919709),r=()=>n(496603),a=()=>n(177158),s=()=>n(295740),l=()=>n(713972),c=()=>n(281322),d=()=>n(231722),u=()=>n(962845),p=()=>n(969197),m=()=>n(906537),g=()=>n(792002),f=()=>n(301421),v=()=>n(695625),h=()=>n(919878),_=()=>n(980914),b=()=>n(397248),y=()=>n(508496),S=()=>n(502438),w=()=>n(24157),k=()=>n(448619),I=()=>n(501666),x=()=>n(547392),A=()=>n(778417),C=()=>n(319975),T=()=>n(751156);const M=!1;function P(e){const{multiSelection:t,readOnly:n,forceEmit:o,enableImprovedCursorNavigation:i}=e,r=w().default.state,a=i?e.xOverride:void 0,s=a??("empty"!==r.mode&&r.savedSelectionXPosition||void 0),l="editing"===r.mode&&(0,d().cL)(r.multiSelection,t)?r.forceExtendAnnotations:{},c=n?{mode:"readOnly",multiSelection:t,savedSelectionXPosition:s}:{mode:"editing",multiSelection:t,savedSelectionXPosition:s,forceExtendAnnotations:l};if(c.mode!==r.mode||!(0,d().OH)(r.multiSelection,t)||a)return w().default.setState(c),void h().RC();o&&w().default.emit()}function B(e,t){if(!("always"===(0,u().fF)(e)))return;const{TextSelectionCompositionStore:n}=e;n.setState({isComposing:t})}function R(e){const{store:t,selection:n,readOnly:o}=e;if(n){return void P({multiSelection:(0,d().$U)({store:t,selection:n}),readOnly:o})}const i={store:t,index:0},r={start:i,end:i};o?w().default.setState({mode:"readOnly",multiSelection:r,savedSelectionXPosition:0}):w().default.setState({mode:"editing",multiSelection:r,forceExtendAnnotations:{},savedSelectionXPosition:0})}function E(e){const{annotation:t}=e;if(i().EKZ[i()._XS(t)])return;const n=i().Aux(t),o=(0,g().I6)("default").findFirstOfGroupingKey(n);D(o?{annotation:o,extend:!1}:{annotation:t,extend:!0})}function D(e){const{annotation:t,extend:n}=e,o=w().default.state,r=i()._XS(t);"editing"===o.mode&&w().default.setState({...o,forceExtendAnnotations:{...o.forceExtendAnnotations,[r]:{annotation:t,extend:n}}})}function N(){const e=w().default.state;"editing"===e.mode&&w().default.setState({...e,forceExtendAnnotations:{}})}function L(e){const{store:t}=e;R({store:t,selection:{startIndex:0,endIndex:0}})}function O(e){const{store:t}=e;R({store:t,selection:(0,g().s6)(t)})}function U(e){var t;N();const{environment:n,store:o,canSelectAllBlocks:i,contentEditableContextId:r}=e,a=w().default.state,s="empty"===a.mode?{start:{store:o,index:0},end:{store:o,index:0}}:a.multiSelection,l={start:{store:s.start.store,index:0},end:{store:s.end.store,index:(null===(t=(0,g().s6)(s.end.store))||void 0===t?void 0:t.endIndex)||0}};if(!(0,d().OH)(l,s))return void P({multiSelection:l});const c=y().default.checkGate({gateName:"never_select_title_on_select_all"})&&(0,p().xK)(n.device);if(r&&!c){const e=(0,g().lr)(),t=e=>{var t;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===r},n=e.find(t),o=e.reverse().find(t);if(n&&o){const e=n.props.store,t=o.props.store;if(e&&t){var u;return void P({multiSelection:{start:{store:e,index:0},end:{store:t,index:(null===(u=(0,g().s6)(t))||void 0===u?void 0:u.endIndex)||0}}})}}}i&&(0,p().xK)(n.device)&&A().Ub(n)}function F(e){var t;N();const{environment:n,store:o,canSelectAllBlocks:i}=e,r=(0,g().s6)(o),a={startIndex:0,endIndex:r?r.endIndex:0};i&&"empty"!==w().default.state.mode&&(0,g().GZ)(null===(t=(0,u().cR)("textSelectionActions",w().default.state.multiSelection))||void 0===t?void 0:t.selection,a)?A().Ub(n):R({store:o,selection:a})}function V(e){const{savedSelectionXPosition:t,enableImprovedCursorNavigation:n}=e,o=w().default.state;"empty"===o.mode||!n&&o.savedSelectionXPosition||w().default.setState({...o,savedSelectionXPosition:t})}function j(){"empty"!==w().default.state.mode&&w().default.setState({...w().default.state,savedSelectionXPosition:void 0})}let z=[];function H(e){if(0===z.length)return!1;M&&console.log("maybeHandleExpectedBrowserSelectionUpdate",e);const t=z;z=[];for(const n of t)n();return!0}function W(e){const{store:t,contentEditableLeafRegistry:n,avoidEdgesOfContentEditableRoot:i,selection:r}=e;z.push((()=>{const e=m().get(),o=(0,u().GI)({contentEditableLeafRegistry:n,range:e,allowInvisibleEndSelection:(0,c().r)().shift,avoidEdgesOfContentEditableRoot:i});o?P(o):R({store:t,selection:r})})),o().default.afterNextFlush((()=>H("renderQueueFlush")))}function q(){const e=document.activeElement;e instanceof HTMLElement&&e.blur()}function K(e){let{environment:t,preventDismissMobileKeyboard:n}=e;m().clear(t),"empty"!==w().default.state.mode&&w().default.setState({mode:"empty"}),t.device.isIOS&&y().default.checkGate({gateName:"ios_editor_prevent_focus_loss"})?o().default.afterNextFlush((()=>{"empty"===w().default.state.mode&&q()})):!n&&t.device.isIOS&&q()}function G(e){const{currentEditableTopBottomPadding:t,targetEdge:n,targetEditable:o,selectionXPosition:i}=e,s=o.getNode();if(!(s&&s instanceof Element))return;const l=s.getBoundingClientRect(),c=Math.min(Math.max(i,l.left),l.right),d=Math.min(t,o.props.topBottomPadding),u="top"===n?l.top:l.bottom;return function(e,t,n){const o=new Map,i={visibility:"hidden"},s=Object.keys(i);let l;try{for(;l=m().rangeFromPoint(e,t);){if(n.contains(l.commonAncestorContainer))return l;const e=(0,a().B)(l.commonAncestorContainer);if(!e)return;if(o.has(e))return;const t=r().Up(e.style,s);o.set(e,t),Object.assign(e.style,i)}}finally{for(const[e,t]of o)Object.assign(e.style,t)}}(c,"top"===n?u+d:u-d,s)}function $(e){const{firstRect:t,secondRect:n,savedSelectionXPosition:o}=e;return Math.abs(o-t.x)<Math.abs(n.x-o)?t:n}function Y(e){const{environment:t,focusContainerOffset:n,focusStore:o,edge:i,topBottomPadding:r,savedSelectionXPosition:a,enableImprovedCursorNavigation:s}=e,c=f().n.findNodeFromStore(o);if(!(c&&c instanceof Element))return;const d=c.getBoundingClientRect();if(!d)return;const u=(()=>{const e=m().rangeFromContainerOffsets({start:n,end:n});if(!e)return;const o=m().getRect(e);return o?s?function(e){const{environment:t,focusContainerOffset:n,renderedNodeRect:o,originalRange:i,originalSelectionRect:r,savedSelectionXPosition:a}=e,s=i.getClientRects();if(2===s.length)return $({firstRect:s[0],secondRect:s[1],savedSelectionXPosition:a||0});const c=t.device.isSafari,d=c?(0,l().MI)(n.container,n.offset):(0,l().z)(n.container,n.offset),u={container:d.node,offset:d.offset},p=m().getRect(m().rangeFromContainerOffsets({start:u,end:u}));if(!p||p.y===r.y)return r;const g=$({firstRect:c?p:r,secondRect:c?r:p,savedSelectionXPosition:a||0}).y;return new(b().z8)(r.y===g?r.x:c?o.right:o.left,g,r.width,r.height)}({environment:t,focusContainerOffset:n,renderedNode:c,renderedNodeRect:d,originalRange:e,originalSelectionRect:o,savedSelectionXPosition:a}):o:void 0})();if(!u)return;const[p,g]="top"===i?[u.top,d.top]:[u.bottom,d.bottom];return{focusIsAtEdge:Math.abs(p-g)<=r,focusSelectionRect:u,renderedNode:c,renderedNodeRect:d}}function Q(e){const{environment:t,event:n,topBottomPadding:o,contentEditableLeafRegistry:i,enableImprovedCursorNavigation:r}=e,a=m().get();if(!a)return;N();const l=w().default.state;if("empty"===l.mode)return;const{multiSelection:c,savedSelectionXPosition:p}=l,{focus:v,anchor:b}=(0,u().w_)(c),y=Y({environment:t,focusContainerOffset:m().rangeToContainerOffsets(a).focus,focusStore:v.store,edge:"top",topBottomPadding:o,enableImprovedCursorNavigation:r,savedSelectionXPosition:p});if(!y)return;const{focusIsAtEdge:S,focusSelectionRect:k}=y,I=_().wg(),x=I?_().eE(I):(0,g().H4)(v.store),C=x&&f().n.findEditableWithStore(x);if(r){V({savedSelectionXPosition:Math.max(l.savedSelectionXPosition||0,k.left),enableImprovedCursorNavigation:r})}if(S&&C){var T;const e=Math.max(l.savedSelectionXPosition||0,k.left),i=G({targetEditable:C,targetEdge:"bottom",currentEditableTopBottomPadding:o,selectionXPosition:e}),c=(null===(T=(0,u().GI)({range:i,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===T?void 0:T.multiSelection)||(0,d().$U)({store:C.props.store,selection:(0,g().s6)(C.props.store)});if(n.shiftKey&&!n.altKey&&c&&(0,s().Id)(C.getNode(),a.commonAncestorContainer))return n.preventDefault(),V({savedSelectionXPosition:e,enableImprovedCursorNavigation:r}),void oe({environment:t,multiSelection:(0,u().hn)(c.start,b),focus:c.start,forceEmit:!1});if(!n.shiftKey&&!n.altKey&&c)return n.preventDefault(),V({savedSelectionXPosition:e,enableImprovedCursorNavigation:r}),void oe({environment:t,forceEmit:!1,multiSelection:c,focus:"start"})}if(n.shiftKey&&!n.altKey&&(0,g().LG)(v,c.start.store)){if(ie(t))return void h().b9({environment:t,direction:"up",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,u().ZS)({multiSelection:c,focus:v,filterCommonAncestors:!0});if(e)return n.preventDefault(),void A().td({environment:t,...e})}W({store:v.store,contentEditableLeafRegistry:i,avoidEdgesOfContentEditableRoot:!0})}function Z(e){const{environment:t,event:n,topBottomPadding:o,contentEditableLeafRegistry:i,enableImprovedCursorNavigation:r}=e,a=m().get();if(!a)return;N();const l=w().default.state;if("empty"===l.mode)return;const{multiSelection:c,savedSelectionXPosition:v}=l,{focus:b,anchor:y}=(0,u().w_)(c),S=Y({environment:t,focusContainerOffset:m().rangeToContainerOffsets(a).focus,focusStore:b.store,edge:"bottom",topBottomPadding:o,enableImprovedCursorNavigation:r,savedSelectionXPosition:v});if(!S)return;const{focusIsAtEdge:k,focusSelectionRect:I}=S;if(r){V({savedSelectionXPosition:Math.max(l.savedSelectionXPosition||0,I.left),enableImprovedCursorNavigation:r})}const x=_().wg(),C=x?_().qg(x):(0,g().J3)(b.store),T=C&&f().n.findEditableWithStore(C);if(k&&T){var M;const e=Math.max(l.savedSelectionXPosition||0,I.left),i=G({targetEditable:T,targetEdge:"top",currentEditableTopBottomPadding:o,selectionXPosition:e}),c=(null===(M=(0,u().GI)({range:i,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===M?void 0:M.multiSelection)||(0,d().$U)({store:T.props.store,selection:{startIndex:0,endIndex:0}});if(n.shiftKey&&!n.altKey&&c&&(0,s().Id)(T.getNode(),a.commonAncestorContainer))return n.preventDefault(),V({savedSelectionXPosition:e,enableImprovedCursorNavigation:r}),void oe({environment:t,multiSelection:(0,u().hn)(c.start,y),focus:c.start,forceEmit:!1});if(!n.shiftKey&&!n.altKey&&c)return n.preventDefault(),V({savedSelectionXPosition:e,enableImprovedCursorNavigation:r}),void oe({environment:t,forceEmit:!1,multiSelection:c,focus:"end"})}else if(k&&!T&&(0,g().aO)(b,c.end.store))return void n.preventDefault();const P=(0,p().T)(c.start.store);if(n.shiftKey&&!n.altKey&&(0,g().aO)(b,c.end.store)&&P){if(ie(t))return void h().b9({environment:t,direction:"down",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,u().ZS)({multiSelection:c,focus:b,filterCommonAncestors:!0});if(e)return n.preventDefault(),void A().td({environment:t,...e})}W({store:b.store,contentEditableLeafRegistry:i,avoidEdgesOfContentEditableRoot:!0,selection:(0,g().s6)(b.store)})}function X(e){o().default.afterNextFlush((()=>{e.enableImprovedCursorNavigation||j()})),N();const{environment:t,event:n,contentEditableLeafRegistry:r}=e,a=m().get(),l=w().default.state;if("empty"===l.mode)return;const{multiSelection:c}=l,{focus:p,anchor:v}=(0,u().w_)(c),_=p.store&&f().n.findEditableWithStore(p.store),b=(0,g().H4)(p.store),y=b&&f().n.findEditableWithStore(b);if((0,g().LG)(p,p.store)&&y&&_&&y.props.isDiscussionInput===_.props.isDiscussionInput){const e=(0,d().$U)({store:y.props.store,selection:(0,g().s6)(y.props.store)});if(n.shiftKey&&!n.altKey&&e&&(0,s().Id)(y.getNode(),null==a?void 0:a.commonAncestorContainer))return n.preventDefault(),void oe({environment:t,multiSelection:(0,u().hn)(e.start,v),focus:e.start,forceEmit:!1});if(!n.shiftKey&&!n.altKey&&e&&(0,d().kM)(c))return n.preventDefault(),void oe({environment:t,forceEmit:!1,multiSelection:e,focus:"start"})}if(n.shiftKey&&!n.altKey&&(0,g().LG)(p,c.start.store)){if(ie(t))return void h().$G({environment:t,direction:"left",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,u().ZS)({multiSelection:c,focus:p,filterCommonAncestors:!0});if(e)return n.preventDefault(),void A().td({environment:t,...e})}if(n.altKey||n.shiftKey||n.ctrlKey||n.metaKey||!a||!a.collapsed)if(!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey)W({store:p.store,contentEditableLeafRegistry:r});else{n.preventDefault();const e={...p,index:Math.max(0,p.index-1)};P({multiSelection:(0,u().hn)(e,v)})}else{const e=p.index-1,r=i().ANx(c.start.store.getValue(),e);if(r&&i().Qt6(r)){n.preventDefault(),P({multiSelection:{start:{...p,index:e},end:p}});const a={startIndex:e,endIndex:p.index};i().GiG(r)&&o().default.afterNextFlush((()=>{k().Wx({environment:t,selectedToken:{token:r,position:a},analyticsFrom:"arrow_keys"})}))}const a=i().aLI(p.store.getValue(),e,((e,t)=>{const n=i().So_(e);return t?Boolean(n&&i().So_(t)===n):Boolean(n)}));a&&I().fi({type:"selectionFocus",store:p.store,focus:!1,selection:a})}}function J(e){o().default.afterNextFlush((()=>{e.enableImprovedCursorNavigation||j()})),N();const{environment:t,event:n,contentEditableLeafRegistry:r,editorMode:a}=e,l=m().get(),c=w().default.state;if("empty"===c.mode)return;const{multiSelection:p}=c,{focus:v,anchor:_}=(0,u().w_)(p),b=v.store&&f().n.findEditableWithStore(v.store),y=(0,g().J3)(v.store),S=y&&f().n.findEditableWithStore(y);if((0,g().oT)(c.multiSelection.start.store.getValue(),c.multiSelection.start.index-1,i().Ifu.Code)&&(0,g().aO)(v,v.store)&&(0,d().kM)(p))return n.preventDefault(),void T().createAndCommit({userAction:"textSelectionActions.arrowRightInCodeBlockAtEOL",environment:t,canUndo:!0,perform:e=>{C().$D({environment:t,editorMode:a,store:v.store,multiSelection:p,string:" ",transaction:e,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,disableFilters:!0})}});if((0,g().aO)(v,v.store)&&S&&b&&S.props.isDiscussionInput===b.props.isDiscussionInput){const e=(0,d().$U)({store:S.props.store,selection:{startIndex:0,endIndex:0}});if(n.shiftKey&&!n.altKey&&e&&(0,s().Id)(S.getNode(),null==l?void 0:l.commonAncestorContainer))return n.preventDefault(),void oe({environment:t,multiSelection:(0,u().hn)(e.start,_),focus:e.start,forceEmit:!1});if(!n.shiftKey&&!n.altKey&&e&&(0,d().kM)(p))return n.preventDefault(),void oe({environment:t,forceEmit:!1,multiSelection:e,focus:"end"})}if(n.shiftKey&&!n.altKey&&(0,g().aO)(v,p.end.store)){if(ie(t))return void h().$G({environment:t,direction:"right",bypassExistingTextSelection:!1,expandSelection:!0});const e=(0,u().ZS)({multiSelection:p,focus:v,filterCommonAncestors:!0});if(e)return n.preventDefault(),void A().td({environment:t,...e})}if(n.altKey||n.shiftKey||n.ctrlKey||n.metaKey||!l||!l.collapsed)if(!n.shiftKey||n.ctrlKey||n.altKey||n.metaKey)W({store:v.store,contentEditableLeafRegistry:r});else{n.preventDefault();const e={...v,index:v.index+1};P({multiSelection:(0,u().hn)(e,_)})}else{const e=v.index,r=v.index+1,a=i().ANx(p.start.store.getValue(),e);if(a&&i().Qt6(a)){n.preventDefault(),P({multiSelection:{start:v,end:{...v,index:r}}});const s={startIndex:e,endIndex:r};i().GiG(a)&&o().default.afterNextFlush((()=>{k().Wx({environment:t,selectedToken:{token:a,position:s},analyticsFrom:"arrow_keys"})}))}const s=i().aLI(v.store.getValue(),e,((e,t)=>{const n=i().So_(e);return t?Boolean(n&&i().So_(t)===n):Boolean(n)}));s&&I().fi({type:"selectionFocus",store:v.store,focus:!1,selection:s})}}function ee(e,t){const{x:n,y:o,target:i}=t,r=(0,g().EH)(n,o,i);r&&r.selectable.props.onEditText&&T().createAndCommit({userAction:"textSelectionActions.editNearestBlock",environment:e,canUndo:!0,perform:e=>{r.selectable.props.onEditText&&r.selectable.props.onEditText({isAtStartOfLine:n<=r.rect.left,isClick:!0,transaction:e})}})}function te(e,t,n){const{x:o,y:i,target:r}=t,a=r?S().default.getDefaultContainerFromTarget(r):void 0;if(a&&(0,g().iY)(i,a)&&x().Zd({environment:e,container:a,transaction:n}))return;const s=(0,g().EH)(o,i,r);if(s&&s.selectable.props.onEditText){const e=i<=s.rect.top;s.selectable.props.onEditText({isAtStartOfLine:o<=s.rect.left,isAtStartOfContainer:e,isClick:!0,transaction:n})}}function ne(e,t,n,o){const{y:i,target:r}=t,a=r?S().default.getDefaultContainerFromTarget(r):void 0,s=v().T.findSelectableFromStore(n);a&&s&&(0,g().lS)(i,s)&&x().Mg({environment:e,container:a,store:n,transaction:o})}function oe(e){const{environment:t,multiSelection:n,forceEmit:o,readOnly:i,focus:r,xOverride:a,enableImprovedCursorNavigation:s}=e;P({multiSelection:n,forceEmit:o,readOnly:"infer"===i?(0,u().$W)(n).some((e=>{let{editable:t}=e;return!t.props.store.canComment()&&!t.props.store.canEdit()})):i,xOverride:a,enableImprovedCursorNavigation:s});const l=(0,u().ZS)({multiSelection:n,filterCommonAncestors:!1,focus:r});l&&A().td({environment:t,phase:S().SelectionPhase.Editing,...l})}function ie(e){const t=_().wg();if(t){const{rowIndex:n,columnIndex:o,simpleTableStore:i}=t.getProps();return h().VC({environment:e,rowIndex:n,columnIndex:o,simpleTableStore:i}),K({environment:e}),!0}return!1}function re(){var e;const t=m().get(),n=null===(e=(0,u().GI)({range:t,contentEditableLeafRegistry:void 0,allowInvisibleEndSelection:!0}))||void 0===e?void 0:e.multiSelection;if(n){P({readOnly:(0,u().$W)(n).some((e=>{let{editable:t}=e;return t.props.disabled})),multiSelection:n})}}},725951:(e,t,n)=>{n.d(t,{LX:()=>d,Le:()=>c,YN:()=>u,jd:()=>l,sZ:()=>p});var o=()=>n(219058),i=()=>n(502492),r=()=>n(780054),a=()=>n(508496),s=()=>n(836251);function l(e){return!!e.device.isMobileNative&&(e.device.isIOS&&"on"===a().default.getEligibleGroup({experimentId:"ios_3rd_party_login_with_external_browser",defaultGroup:"control"})||e.device.isAndroid&&"on"===a().default.getEligibleGroup({experimentId:"android_3rd_party_login_with_external_browser",defaultGroup:"control"}))}function c(e){const{device:t}=e,n=l(e);if(t.isMobileNativeCalendar){return{redirectToAuth:!1,callbackType:"nativecalendarredirect"}}if(t.isMobileNative){return{redirectToAuth:!1,callbackType:n?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}return{redirectToAuth:!0,callbackType:"redirect"}}function d(e){const{device:t}=e,n=l(e);if(t.isMobileNativeCalendar){return{redirectToAuth:!1,callbackType:"nativecalendarredirect"}}if(t.isMobileNative){return{redirectToAuth:!1,callbackType:n?"nativeredirect":"native"}}if(t.isElectronAny){return{redirectToAuth:!1,callbackType:t.isElectronMail?"nativemailredirect":t.isElectronCalendar?"nativecalendarredirect":"nativeredirect"}}if(t.isMobileBrowser||(0,s().w6)(e)){return{redirectToAuth:!0,callbackType:"redirect"}}return{redirectToAuth:!0,callbackType:"popup"}}async function u(e,t,n){if(e.device.isHttpApp){const e=await fetch(t);return(await e.json()).url}{const e=await fetch(i().$J({httpUrl:t,protocol:r().A.protocol,includePort:n}));return(await e.json()).url}}function p(e){return i().PW({url:o().fR[e],isLocalHost:"local"===e})}},725976:(e,t,n)=>{n.d(t,{m:()=>r,q:()=>a});var o=n(296540),i=n(474848);const r=(0,o.createContext)({ceiling:null,floor:null,stickyHorizontally:!1});r.displayName="StickyPortalSingleTargetContext";const a=o.memo((function(e){let{name:t,children:a,stickyHorizontally:s=!1,horizontalWidthLimiter:l}=e;const{allPortals:c,requestPortal:d}=(0,o.useContext)(n(150866).QP);o.useEffect((()=>d(t)),[t,d]);const u=c.ceiling[t],p=c.floor[t],m=(0,o.useMemo)((()=>({ceiling:u,floor:p,stickyHorizontally:s,horizontalWidthLimiter:l})),[u,p,s,l]);return(0,i.jsx)(r.Provider,{value:m,children:(0,i.jsx)(n(970560).e.Provider,{value:null,children:a})})}))},726275:(e,t,n)=>{n.d(t,{OY:()=>m,_v:()=>f});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(244641),i=()=>n(973647),r=()=>n(534177),a=()=>n(787626),s=()=>n(713998),l=()=>n(597777),c=()=>n(604995),d=()=>n(992437),u=()=>n(134025),p=()=>n(68263);const m=["consume_gap","preserve_gap"];class g{constructor(){this.operations=[],this.numDependenciesUpdated=0,this.numCouldNotUpdateDueToPermissions=0}push(e){this.operations.push(...e.operations),this.numDependenciesUpdated+=e.numDependenciesUpdated,this.numCouldNotUpdateDueToPermissions+=e.numCouldNotUpdateDueToPermissions}pushUpdatedBlockDates(e,t){for(const[o,i]of e)this.operations.push(...t.toOperations(i,{id:o,table:n(179034).ev}));this.numDependenciesUpdated+=e.size}}function f(e){const{block:t,options:n,blockingPropertyId:s,blockedByPropertyId:l,timeZone:c,locale:d,collectionSchema:u,getRecordRole:p,getRecordValue:m,dateProperty:f,endDateProperty:b}=e,y=function(e){return t=>{let{oldDateValue:n,newDateValue:i,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getStart(),d=i.getStart(),u=i.getEnd();let p;if("consume_gap"===l){if(u.valueOf()>=c.valueOf()){if(s)return k({dateShiftMode:l,newDateData:o().IX.fromDateTimes(d,u),dependencyDateValue:a});p=u.plus(a.nudgeForDate("start"))}}else if("preserve_gap"===l)if(n){const e=n.getStart(),t=n.getEnd();if(s)return k({dateShiftMode:l,oldDateData:o().IX.fromDateTimes(e,t),newDateData:o().IX.fromDateTimes(d,u),dependencyDateValue:a});const i=u.diff(t);p=c.plus(i)}else u.valueOf()>=c.valueOf()&&(p=u.plus(a.nudgeForDate("start")));else(0,r().HB)(l);return p&&a.changeBoundary({type:"start",newValue:p})}}(n),S=function(e){return t=>{let{oldDateValue:n,newDateValue:i,dependencyDateValue:a}=t;const s=Boolean(e.avoid_weekends),l=e.mode;if(!l)return;const c=a.getEnd(),d=i.getStart(),u=i.getEnd();let p;if("consume_gap"===l){if(d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")),s))return w({dateShiftMode:l,newDateData:o().IX.fromDateTimes(d,u),dependencyDateValue:a})}else if("preserve_gap"===l)if(n){const e=n.getStart(),t=n.getEnd();if(s)return w({dateShiftMode:l,oldDateData:o().IX.fromDateTimes(e,t),newDateData:o().IX.fromDateTimes(d,u),dependencyDateValue:a});const i=e.diff(d);p=c.minus(i)}else d.valueOf()<=c.valueOf()&&(p=d.minus(a.nudgeForDate("end")));else(0,r().HB)(l);return p&&a.changeBoundary({type:"end",newValue:p})}}(n),I={timeZone:c,locale:d};let x,T;if((0,r().O9)(b)){const e=new C({convertArgs:I,startPropertyId:f.id,endPropertyId:b.id});x=e;const n=e.getFromBlock(t),o=(0,a().b)(f.newValue)??(null==n?void 0:n.startValue),i=(0,a().b)(b.newValue)??(null==n?void 0:n.endValue);if(!(0,r().O9)(o))return new g;T=new P({convertArgs:I,startValue:o,endValue:i})}else{x=new A({convertArgs:I,propertyId:f.id});const e=(0,a().b)(f.newValue);if(!(0,r().O9)(e))return new g;T=new M({convertArgs:I,value:e})}const B={startingBlock:t,startingNewDateValue:T,context:{collectionSchema:u,getRecordRole:p,getRecordValue:m,accessor:x}};if("consume_gap"===n.mode){const e=new g,t=_({...B,dependencyPropertyId:s,dateAdjuster:y,dateRangeIsFurtherThan:(e,t)=>e.getStart().valueOf()>t.getStart().valueOf()});if(i().Q.isFail(t))return new g;e.push(t.value);const n=_({...B,dependencyPropertyId:l,dateAdjuster:S,dateRangeIsFurtherThan:(e,t)=>e.getEnd().valueOf()<t.getEnd().valueOf()});return i().Q.isFail(n)?new g:(e.push(n.value),e)}if("preserve_gap"===n.mode)return function(e){const{startingBlock:t,startingNewDateValue:n,forwardConfig:o,backwardConfig:i,context:r}=e,{accessor:a}=r,s=new Set,l=[{block:t,newDateValue:n}],c=new Map,d=new g;for(;;){const e=l.shift();if(!e)break;const{block:n,newDateValue:u}=e;if(s.has(n.id))continue;s.add(n.id);const p=a.getFromBlock(n);for(const{dependencyPropertyId:a,dateAdjuster:s}of[o,i]){const e=h(r,n,a);for(const n of e)n.id!==t.id&&v({context:r,adjust:e=>s({oldDateValue:p,newDateValue:u,dependencyDateValue:e}),result:d,dependencyPointer:n,onDateUpdated:(e,t)=>{c.has(n.id)||c.set(n.id,t),l.push({block:e,newDateValue:t})}})}}return d.pushUpdatedBlockDates(c,a),d}({...B,forwardConfig:{dependencyPropertyId:s,dateAdjuster:y},backwardConfig:{dependencyPropertyId:l,dateAdjuster:S}});(0,r().HB)(n.mode)}function v(e){const{result:t,dependencyPointer:n,context:o,adjust:i,onDateUpdated:r}=e,{accessor:a,getRecordValue:s,getRecordRole:l}=o,c=l(n);if(c&&!(0,p().p2)(c))return void t.numCouldNotUpdateDueToPermissions++;const d=s(n);if(!d)return;const u=a.getFromBlock(d);if(!u)return;const m=i(u);m&&!m.equals(u)&&r(d,m)}function h(e,t,n){var o;const i=e.collectionSchema[n];return i&&"relation"===i.type?(0,s().bG)({propertySchema:i,getRecordModel:d().b.fromGetRecordValueFn(e.getRecordValue),relationValue:(0,s().n)(null===(o=t.properties)||void 0===o?void 0:o[n]),includeNoAccess:!0}):[]}function _(e){const{startingBlock:t,startingNewDateValue:n,context:o,dateAdjuster:i,dateRangeIsFurtherThan:r,dependencyPropertyId:a}=e,{accessor:s}=o,l=new Set,c=[{block:t,newDateValue:n,path:[]}],d=new Map,u=new g;for(;;){const e=c.shift();if(!e)break;const{block:t,newDateValue:n,path:p}=e;if(p.includes(t.id))return{error:"cycle_detected"};if(l.has(t.id))continue;l.add(t.id);const m=s.getFromBlock(t),g=[...p,t.id],f=h(o,t,a);for(const a of f)v({context:o,adjust:e=>i({oldDateValue:m,newDateValue:n,dependencyDateValue:e}),result:u,dependencyPointer:a,onDateUpdated:(e,t)=>{const n=d.get(a.id);n&&!r(t,n)||d.set(a.id,t),c.push({block:e,newDateValue:t,path:g})}})}return u.pushUpdatedBlockDates(d,s),{value:u}}function b(e){const{inputDate:t,dateShiftDirection:n}=e;return 6===t.weekday?t.plus({days:"right"===n?2:-1}):7===t.weekday?t.plus({days:"right"===n?1:-2}):t}function y(e,t){let n,o,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;if(e.valueOf()>t.valueOf())n=t,o=e;else{if(!(e.valueOf()<t.valueOf()))return 0;n=e,o=t}for(i&&(n=n.plus({days:1}),o=o.minus({days:1}));n.valueOf()<=o.valueOf();)S(n)||r++,n=n.plus({days:1});return r}function S(e){return 6===e.weekday||7===e.weekday}function w(e){const{newDateData:t,dependencyDateValue:n,dateShiftMode:o}=e,i=n.getStart(),r=n.getEnd(),a=y(i,r);let s=b({inputDate:t.start.minus({days:1}),dateShiftDirection:"left"});if("preserve_gap"===o){const n=y(e.oldDateData.start,r,!0);for(let e=y(t.start,s,!0);e<n;e++)s=s.minus({days:1}),S(s)&&(s=b({inputDate:s,dateShiftDirection:"left"}))}let l=s,c=1;for(;c<a;)l=l.minus({days:1}),S(l)||c++;return n.changeBoundaries({newStart:l,newEnd:s})}function k(e){const{dependencyDateValue:t,newDateData:n,dateShiftMode:o}=e,i=t.getStart(),r=y(i,t.getEnd());let a=b({inputDate:n.end.plus({days:1}),dateShiftDirection:"right"});if("preserve_gap"===o){const t=y(e.oldDateData.end,i,!0);for(let e=y(n.end,a,!0);e<t;e++)a=a.plus({days:1}),S(a)&&(a=b({inputDate:a,dateShiftDirection:"right"}))}let s=a,l=1;for(;l<r;)s=s.plus({days:1}),S(s)||l++;return t.changeBoundaries({newStart:a,newEnd:s})}function I(e,t){if(!(e instanceof t))throw new Error(`Expected ShiftableDate to be of type ${t}`)}class x{constructor(e){this.convertArgs=e}}class A extends x{constructor(e){super(e.convertArgs),this.propertyId=void 0,this.propertyId=e.propertyId}getFromBlock(e){var t;const n=(0,a().b)(null===(t=e.properties)||void 0===t?void 0:t[this.propertyId]);return n?new M({value:n,convertArgs:this.convertArgs}):void 0}toOperations(e,t){return I(e,M),[u().op.update({pointer:t,path:["properties"],args:{[this.propertyId]:(0,s().m5)(e.value)}})]}}class C extends x{constructor(e){super(e.convertArgs),this.startPropertyId=void 0,this.endPropertyId=void 0,this.startPropertyId=e.startPropertyId,this.endPropertyId=e.endPropertyId}getFromBlock(e){var t;const n=(0,a().b)(null===(t=e.properties)||void 0===t?void 0:t[this.startPropertyId]);if((0,r().O9)(n)){var o;const t=(0,a().b)(null===(o=e.properties)||void 0===o?void 0:o[this.endPropertyId]);return new P({startValue:n,endValue:t,convertArgs:this.convertArgs})}}toOperations(e,t){return I(e,P),[u().op.update({pointer:t,path:["properties"],args:{[this.startPropertyId]:(0,s().m5)(e.startValue),...e.endValue?{[this.endPropertyId]:(0,s().m5)(e.endValue)}:{}}})]}}class T{constructor(e){this.convertArgs=e}toLuxon(e){return c().C6.notionDateOrDateTimeToLuxon(e,this.convertArgs)}}class M extends T{constructor(e){super(e.convertArgs),this.value=void 0,this.value=e.value}getStart(){return this.toLuxon(l().j1(this.value))}getEnd(){return this.toLuxon(l().mO(this.value))}nudgeForDate(e){return"date"===this.value.type||"daterange"===this.value.type?{days:1}:"datetime"===this.value.type?{minutes:1}:"datetimerange"===this.value.type?{}:void(0,r().HB)(this.value)}equals(e){return I(e,M),l().Zo(this.value,e.value)}changeBoundary(e){let t;if("daterange"===this.value.type||"datetimerange"===this.value.type){const n=c().AA(this.value,this.convertArgs.timeZone,this.convertArgs.locale),o=n.end.diff(n.start);t=("daterange"===this.value.type?c().C6.toPersistedDateRange:c().C6.toPersistedDateTimeRange)("start"===e.type?{start:e.newValue,end:e.newValue.plus(o)}:{start:e.newValue.minus(o),end:e.newValue},this.convertArgs.timeZone)}else if("date"===this.value.type||"datetime"===this.value.type){t=("date"===this.value.type?c().C6.toPersistedDate:c().C6.toPersistedDateTime)(e.newValue.valueOf(),this.convertArgs.timeZone)}else(0,r().HB)(this.value);return new M({value:t,convertArgs:this.convertArgs})}changeBoundaries(e){const{newStart:t,newEnd:n}=e;return new M({value:c().C6.toPersistedDateWithType({start:t,end:n},this.value.type,this.convertArgs.timeZone),convertArgs:this.convertArgs})}}class P extends T{getMergedValue(){if(this._mergedValue===P.MergedValueNotCalculated){const e=c().jY(this.startValue,this.endValue);this._mergedValue=e?c().rL(e):void 0}return this._mergedValue}constructor(e){super(e.convertArgs),this.startValue=void 0,this.endValue=void 0,this._mergedValue=void 0,this.startValue=e.startValue,this.endValue=e.endValue}getStart(){return this.toLuxon(l().j1(this.getMergedValue()??this.startValue))}getEnd(){return this.toLuxon(l().mO(this.getMergedValue()??this.endValue??this.startValue))}equals(e){return I(e,P),l().Zo(this.startValue,e.startValue)&&((0,r().O9)(this.endValue)?(0,r().O9)(e.endValue)&&l().Zo(this.endValue,e.endValue):!(0,r().O9)(e.endValue))}nudgeForDate(e){const t="start"===e?this.startValue:this.endValue??this.startValue;return"date"===t.type?{days:1}:"datetime"===t.type||"datetimerange"===t.type||"daterange"===t.type?{}:void(0,r().HB)(t)}toPersistedDateDiscardingRange(e,t){return void 0===t||"date"===t||"daterange"===t?c().C6.toPersistedDate(e.valueOf(),this.convertArgs.timeZone):"datetime"===t||"datetimerange"===t?c().C6.toPersistedDateTime(e.valueOf(),this.convertArgs.timeZone):void(0,r().HB)(t)}changeBoundary(e){var t,n;const o=this.getEnd().diff(this.getStart());return new P({convertArgs:this.convertArgs,..."start"===e.type?{startValue:this.toPersistedDateDiscardingRange(e.newValue,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue.plus(o),null===(t=this.endValue)||void 0===t?void 0:t.type)}:{startValue:this.toPersistedDateDiscardingRange(e.newValue.minus(o),this.startValue.type),endValue:this.toPersistedDateDiscardingRange(e.newValue,null===(n=this.endValue)||void 0===n?void 0:n.type)}})}changeBoundaries(e){var t;const{newStart:n,newEnd:o}=e;return new P({startValue:this.toPersistedDateDiscardingRange(n,this.startValue.type),endValue:this.toPersistedDateDiscardingRange(o,null===(t=this.endValue)||void 0===t?void 0:t.type),convertArgs:this.convertArgs})}}P.MergedValueNotCalculated=Symbol("Merged value not calculated yet")},728611:(e,t,n)=>{n.d(t,{Ol:()=>r,P4:()=>i,Vr:()=>a});let o=!1;try{const e=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",(()=>{}),e)}catch(s){}function i(e,t,n,i){o?e.addEventListener(t,n,{passive:!0,capture:Boolean(i)}):e.addEventListener(t,n,Boolean(i))}function r(e,t,n,o){e.removeEventListener(t,n,Boolean(o))}function a(e){if(void 0!==e)return"shiftKey"in e&&"altKey"in e&&e.shiftKey&&e.altKey?"window":"button"in e&&1===e.button||"metaKey"in e&&e.metaKey||"ctrlKey"in e&&e.ctrlKey?"tab":void 0}},729283:(e,t,n)=>{n.d(t,{Mh:()=>c,VE:()=>l,_q:()=>u});n(964979);var o=()=>n(498212),i=()=>n(989423),r=()=>n(529543),a=()=>n(351360),s=()=>n(435009);async function l(e,t){const{utmContent:n,nextRoute:o,openInNewTab:i}=t,[r,a]=await Promise.all([c(e),d(e,{utmContent:n,utmSource:"public_page"})]);s().navigateOnBaseUrl({environment:e,url:o,extraSearchParams:{...r,...a},openInNewTab:i})}async function c(e){const t=await r().getPartnerStackCookie(e);if(t){return{gspk:window.btoa(t)}}const n=await r().getS2STrackingCookie(e);if(n&&n.partnerKey){return{ps_partner_key:window.btoa(n.partnerKey),ps_xid:n.clickId}}return{}}async function d(e,t){const{utmContent:n,utmSource:r}=t,s={utm_source:r,utm_content:n,tid:await(0,i().TZ)(e)},{mainEditorCurrentBlockStore:l}=a().default.state;return null!=l&&l.id&&(s.utm_campaign=(0,o().ot)(null==l?void 0:l.id)),s}async function u(e,t){const{utmContent:n,nextRoute:o,formId:i,spaceId:r,openInNewTab:a}=t,[l,u]=await Promise.all([c(e),d(e,{utmContent:n,utmSource:"form"})]);var p;s().navigateOnBaseUrl({environment:e,url:o,extraSearchParams:{...l,...u,...(p={formId:i,spaceId:r},{from:"forms",form_id:p.formId,space_id:p.spaceId})},openInNewTab:a})}},730307:(e,t,n)=>{n.d(t,{l:()=>m});var o=()=>n(161479),i=()=>n(878523),r=()=>n(347199),a=()=>n(953418),s=()=>n(129522),l=()=>n(404783),c=()=>n(555776),d=()=>n(116008),u=()=>n(36088),p=()=>n(405981);async function m(e){var t;const{environment:n,blockStore:m,rect:g,property_id:f,from:v}=e;if(d().A.hasContent())return void(0,p()._y)({environment:n,reason:"starting_new"});const h=s().K.getRect(m);if(!h)return;const _=new(l().A)(n,(0,o().e)(m.pointer.spaceId)),b=h.width,y=h.height,S=h.right-b;d().A.setState({open:!0,rect:g||new DOMRect(S,h.top,b,y),type:"block",content:"comment",blockStore:m,blockId:m.id,discussionInputStore:_,property_id:f,lastKnownBlockStore:m,from:v}),a().VG({element:null===(t=r().A.UpdateSidebarCommentScroller)||void 0===t?void 0:t.getNode(),environment:n,options:{top:0,behavior:"smooth"}}),c().A.setActiveWithSource("text_annotation"),await(0,u().M)({discussionInputStore:_,environment:n}),i().j4(n,{from:v})}},730570:(e,t,n)=>{n.d(t,{I:()=>C,J:()=>A});n(581454);var o=()=>n(17022),i=()=>n(857639),r=()=>n(317965),a=()=>n(921997),s=()=>n(365233),l=()=>n(496603),c=()=>n(502800),d=()=>n(720665),u=()=>n(671593),p=()=>n(421107),m=()=>n(780054),g=()=>n(941541),f=()=>n(865241),v=()=>n(630116),h=()=>n(899677),_=()=>n(502438),b=()=>n(24157),y=()=>n(452939),S=()=>n(449506),w=()=>n(507785);const k=1e3,I=d().pT,x="presenceActions";function A(e,t,n,o){!function(e,t){const{persistAutoListener:n,rootStore:o,isActive:r,listenerReference:s,userId:l}=e.state;if(r){if(n&&n.destroy(),s&&g().Ay.removeListener(s,t),l&&o&&P({rootStore:o})){const e=(0,a().Dn)(o.id);g().Ay.updateField(e,l,{present:!1},I,t,{presenceOnDisconnectFlag:"clear",subscriptionId:x,pageVisitId:void 0,spaceId:o.getSpaceId(),pageId:o.id}),g().Ay.clearOnDisconnect(e,x,t).catch((e=>{i().log({level:"error",from:"destroyPresence",type:"SystemError",error:(0,c().convertErrorToLog)(e)})}))}e.reset()}}(e,t),o&&function(e,t,n){y().vO(t,{page_id:e.id,searchSessionId:h().default.state.sessionId,spaceId:e.getSpaceId(),pageVisitId:n.getCurrentPageVisitId(),pageVisitDuration:n.getCurrentPageVisitDuration()}),S().callApi({eventName:"recordPageExit",environment:t,data:{block:{id:e.id,spaceId:e.getSpaceId()},timestamp:Date.now()},headers:{recordId:e.id,spaceId:e.getSpaceId()}})}(o,t,n)}async function C(e){const{userId:t,rootStore:n,presenceStore:s,environment:d,pageVisitIdStore:p,authorizationToken:m}=e;if(await n.load(),t&&M({rootStore:n})){s.setState({...s.state,isActive:!0,rootStore:n,userId:t});const e=l().nF((()=>{s.state.isActive&&s.state.rootStore===n&&T(s,d,p)}),k),v=async e=>{let{key:t,value:o,error:a}=e;a?"invalid_authorization"===a&&(s.state.listenerReference&&(g().Ay.removeListener(s.state.listenerReference,d,!1),s.setState({...s.state,listenerReference:void 0,remotePresenceData:{}})),n&&s.state.isActive&&await async function(e){const{key:t,rootStore:n,presenceStore:o,listener:r,environment:a}=e,s=await w().Ty({environment:a,request:{type:"block-space",blockId:n.id,spaceId:n.getSpaceId()}});if("success"===s.type){const e=g().Ay.addListener(t,s.data.presenceAuthorizationToken,r,void 0,a);o.setState({...o.state,listenerReference:e})}else i().log({level:"error",from:"refreshPresenceAuthorization",type:"SystemError",error:(0,c().convertErrorToLog)(s.error)})}({key:t,rootStore:n,presenceStore:s,environment:d,listener:v})):s.state.isActive&&s.state.rootStore===n&&function(e,t){const{remotePresenceData:n}=t.state,o=e||{};l().n4(n,o)||t.setState({...t.state,remotePresenceData:o})}(function(e){const t={};if(l().Gv(e)){const n=Object.keys(e);for(const o of n){const n=e[o];n&&!(0,u().tf)(r().ol,n)&&(t[o]=n)}}return t}(o),s)},h=(0,a().Dn)(n.id);let _;n.canEdit()&&(_=g().Ay.addListener(h,m,v,void 0,d)),s.setState({...s.state,listenerReference:_,persistAutoListener:new(o().A)({onChange:e})}),f().A.addListener(e),t&&P({rootStore:n})&&await g().Ay.onDisconnect(h,[{operation:"updateField",key:h,field:t,updates:{present:!1},ttl:I},{operation:"logPageExit",userId:t,blockId:n.id,spaceId:n.getSpaceId(),pageVisitId:p.getCurrentPageVisitId()}],x,d),T(s,d,p)}}function T(e,t,n){var o,i;const{persistAutoListener:r,rootStore:s,userId:l}=e.state;if(null==r||r.startListener({incrementCycle:!0}),!s||!l||!P({rootStore:s}))return;const c=(0,a().Dn)(s.id),u=d().WY(Date.now());if(!s.canEdit())return void g().Ay.updateField(c,l,{userId:l,present:f().A.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:s.id,blockPath:null},I,t,{presenceOnDisconnectFlag:"register",subscriptionId:x,pageVisitId:n.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id});let m;const h=p().A.state;h.isActive&&h.currentRowStore&&(m=h.currentRowStore);const y=_().default.state;y.stores.length&&(m=y.stores[0]);const S=b().default.state,w="editing"===S.mode&&S.multiSelection;w&&s.uiContains(w.start.store)&&"block"===w.start.store.table&&(m=w.start.store);const k=null===(o=m)||void 0===o?void 0:o.findRecordStoreUIAncestors((e=>e instanceof v().Bv)).map((e=>e.id));null==r||r.stopListener({isEndOfCycle:!0}),g().Ay.updateField(c,l,{userId:l,present:f().A.state.isVisible,activityTimestampNearestMinuteMs:u,blockId:(null===(i=m)||void 0===i?void 0:i.id)||null,blockPath:k||null},I,t,{presenceOnDisconnectFlag:"register",subscriptionId:x,pageVisitId:n.getCurrentPageVisitId(),spaceId:s.getSpaceId(),pageId:s.id})}function M(e){const{rootStore:t}=e;return Boolean(t)&&(0,s().A)(t.id)&&t.canRead()}function P(e){const{rootStore:t}=e;return M({rootStore:t})&&!m().A.isAdminMode}},730688:(e,t,n)=>{n.d(t,{SG:()=>r,WK:()=>a,e7:()=>i,i2:()=>s});n(898992),n(581454),n(908872);var o=()=>n(496603);function i(e,t){let n=0;for(let o=0;o<t.length;o+=1){const i=t[o];if(e>n+i.items.length-1){n+=i.items.length;continue}const r=e-n,a=i.items[r];if(!a)return;return{item:a,index:{section:o,indexLocal:r}}}}function r(e,t){const n=t[e.section];if(!n)return;const o=n.items[e.indexLocal];return o||void 0}function a(e,t){return o().cz(t.slice(0,e.section).map((e=>e.items.length)))+e.indexLocal}function s(e){return e.reduce(((e,t)=>e+t.items.length),0)}},731320:(e,t,n)=>{n.d(t,{A$:()=>oe,FC:()=>q,Jh:()=>z,K1:()=>V,LS:()=>K,MI:()=>Q,QT:()=>Y,Qo:()=>ce,Qu:()=>Z,Ws:()=>ae,X6:()=>le,X9:()=>W,YN:()=>G,bA:()=>ne,ex:()=>ie,hb:()=>X,i0:()=>L,om:()=>J,qZ:()=>$,qb:()=>O,qe:()=>se,qw:()=>j,zQ:()=>H,zt:()=>ee});n(410838),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550);var o=n.n(n(169749)),i=()=>n(496506),r=()=>n(857639),a=()=>n(792071),s=()=>n(142748),l=()=>n(252651),c=()=>n(433847),d=()=>n(68263),u=()=>n(388821),p=()=>n(728272),m=()=>n(179034),g=()=>n(96689),f=()=>n(296900),v=()=>n(848538),h=()=>n(854150),_=()=>n(798880),b=()=>n(496603),y=()=>n(498212),S=()=>n(534177),w=()=>n(646736),k=()=>n(590604),I=()=>n(351360),x=()=>n(605402),A=()=>n(529183),C=()=>n(411671),T=()=>n(630116),M=()=>n(134217),P=()=>n(10984),B=()=>n(749240),R=()=>n(186445),E=()=>n(108944),D=()=>n(299545),N=()=>n(640653);function L(e){const t=E().E(e),n=c().ch(t);return c().i0(n)}function O(e,t){if(e.defaultRecordCache.inMemoryRecordCache!==t.inMemoryRecordCache)return F(e,t);const n=`${e.currentUser.id}:${t.table}:${t.id}`,o=U.get(n);if(o)return o.state;const r=new(i().default)((()=>F(e,t)),{debugName:`userHasPermissionViaPublicAccess:${t.id}`});return U.set(n,r),r.state}const U=new(o())({max:30,maxAge:n(720665).Xb,updateAgeOnGet:!0});function F(e,t){const{id:n}=e.currentUser;if((0,N().jy)()&&(0,N().s7)(e))return;let o;n&&(o={table:_().oo,id:n});const i=(0,E().IL)(t)||t,r=(0,k().uI)({recordPointers:new(p().d)([t.pointer]),actorPointers:new(p().d)(void 0===o?[]:[o]),getRecordModel:i.getRecordModel}),{currentUserStore:a}=I().default.state;return(0,k().eV)({actor:null==a?void 0:a.getModel(),recordPointer:t.pointer,permissionsContext:r})}function V(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().W8(e)&&d().Tt(e.role)&&(void 0===e.allow_duplicate||!0===e.allow_duplicate)))}function j(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().W8(e)))}function z(e){return L(e).map((e=>{let{permissionItem:t}=e;return t})).some((e=>d().Lg(e)))}async function H(e){const{currentUserRootStore:t}=I().default.state;if(!t)return!1;if(!(0,y().uj)(e))return!1;const n=T().Bv.createChildStore(t,{table:m().ev,id:e});return await n.load(),j(n)}function W(e,t){const n=L(t);if(1===n.length){const t=n[0].permissionItem;return"user_permission"===t.type&&d().Km(t.role)&&t.user_id===e.currentUser.id}return!1}function q(e){const{subscriptionData:t,newGuestIds:n}=e;if(!t)return!1;const o=(0,P().aV)(t);if(void 0===o)return!1;const i=M().oe(t).map((e=>e.userId)),r=M().Ye(t).map((e=>e.userId)),a=new Set([...i,...n]);for(const l of r)a.delete(l);const s=Math.max(o,i.length);return a.size>s}function K(e,t){if(!e)return!1;const n=(0,P().aV)(e);return void 0===n||t<n}function G(e){const{store:t,permissionItems:n}=e;if(t instanceof T().SL)return!1;const o=B().subscriptionDataStoreInstance.state;if(!o)return!1;return q({subscriptionData:o,newGuestIds:n.filter(d().B2).filter((e=>"none"!==e.role)).map((e=>e.user_id))})}function $(e){return{editor:"Full access",read_and_write:"Can edit",comment_only:"Can comment",reader:"Can read",none:"No access"}[e]}function Y(e){return!!e&&(e.hasPublicPermission&&"edit"!==e.permission)}function Q(e){let{environment:t,blockStore:n}=e;const o=n.getParentStore();if(!o)return!1;return!Y(E().Wo(o)&&C().A.getMode(t,o))&&o.canEdit()}function Z(){const{currentSpaceStore:e}=I().default.state;return"enterprise"===(null==e?void 0:e.getSubscriptionTier())}async function X(e,t){const n=new Set;var o;if((0,D().$R)(e))null===(o=e.getPermissionItems())||void 0===o||o.forEach((e=>{d().B2(e)&&n.add(e.user_id)}));else if(e instanceof T().Bv)e.getPermissionItems().forEach((e=>{d().B2(e)&&n.add(e.user_id)}));else if(e instanceof T().SL){const o=t.filter(A().ju).map((t=>(0,w().dp)(e,t.value.id)));for(const e of o)await e.load(),e.isDefined()&&e.isMember()&&n.add(e.getUserId())}else(0,S().HB)(e);return t.filter((e=>"existingUser"!==e.type||!n.has(e.value.id)))}function J(e){const t=(0,R().ao)();if(!t||!e)return;const n=ee({userId:e,store:t}).role;return n&&!c().II(n)?n:void 0}function ee(e){let{userId:t,store:n}=e;return oe({userId:t,store:n})[0]}function te(e){const{explicitTeamsRecordMap:t,actorPointers:n,getRecordModelFnFallback:o,logErrorFn:i}=e,s=e.ancestorsRecordMap?e.ancestorsRecordMap:u().RecordMap.create(),c=a().b4_.fromRecordMap(s),d=a().b4_.fromRecordMap(t),m=a().b4_.tryUntilFound(c,d,o),g=new(p().d)(n),f=(0,l().js)({recordMap:s,getRecordModelFnWithMaybeMissingRecords:m,actorPointers:g,logErrorFn:i??(e=>{const{from:t,type:n,error:o,data:i}=e;r().log({level:"error",from:t,type:n,error:{name:o.name,message:o.message,stack:o.stack},data:{miscDataToConvertToString:i}})})});return{ancestorsRecordMap:s,explicitTeamsRecordMap:t,actorPointersSet:g,actorMemberships:f,spacesForSpaceMemberComputation:ne({ancestorsRecordMap:s,getRecordModel:m}),domainLinkSharingEnabledDomainsMap:void 0}}function ne(e){const{ancestorsRecordMap:t,getRecordModel:n}=e,o=new Set;for(const{pointer:a}of t)if(a.table===v().aJ){const{spaceId:e}=(0,v().SM)(a.id);o.add(e)}else if(a.table===f().m3){const{spaceId:e}=(0,f().bx)(a.id);o.add(e)}for(const a of o){const e={table:g().NX,id:a};t.has(e)&&o.delete(a)}if(o.size<=0)return;const i=Array.from(o),r=u().RecordMap.create();return i.forEach((e=>{const t={table:g().NX,id:e},o=n(t);o&&r.addModel(o)})),r}function oe(e){let{userId:t,store:n}=e;const o=s().Yn(n.pointer,n.getRecordModel),i=E().pp(n)||I().default.state.currentSpaceStore,r=i&&i.isDefined()&&!o.findLast(c().vl)?[...o,i.getModel()]:o,a=u().RecordMap.create();r.forEach((e=>{a.setModel(e.pointer,e)}));const l=L(n),p=E().Uo(n),m=l.filter((e=>{let{permissionItem:t}=e;return(d().gl(t)||d().nl(t))&&t.team_id!==(null==p?void 0:p.id)})).map((e=>e.permissionItem)),g=E().IS({store:n,teamPermissionItems:m}),f={table:_().oo,id:t},v=te({actorPointers:[f],explicitTeamsRecordMap:g,ancestorsRecordMap:a,getRecordModelFnFallback:n.getRecordModel}),h=(0,k().Dk)({actorPointer:f,ancestors:r,permissionsContext:v}).map((e=>e.permissionItem));if(0===h.length)return[{type:"user_permission",role:"none",user_id:t}];const y=b().oE(h.map((e=>e.role))),S=c().$q(...y);return h.filter((e=>e.role===S)).sort(re)}function ie(e){let{userId:t,store:n,userPermissionGroupIds:o}=e;const i=s().Yn(n.pointer,n.getRecordModel),r=E().pp(n)||I().default.state.currentSpaceStore,a=r&&r.isDefined()&&!i.findLast(c().vl)?[...i,r.getModel()]:i,l=u().RecordMap.create();a.forEach((e=>{l.setModel(e.pointer,e)}));const p=L(n),g=E().Uo(n),f=p.filter((e=>{let{permissionItem:t}=e;return(d().gl(t)||d().nl(t))&&t.team_id!==(null==g?void 0:g.id)})).map((e=>e.permissionItem)),v=E().IS({store:n,teamPermissionItems:f}),b={table:_().oo,id:t},y=te({actorPointers:[b],explicitTeamsRecordMap:v,ancestorsRecordMap:l,getRecordModelFnFallback:n.getRecordModel}),S=(0,k().Dk)({actorPointer:b,ancestors:a,permissionsContext:y}),w=[...S];S.find((e=>"user_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"user_permission",role:"none",user_id:t},from:d().M3(n.pointer)});const x=B().subscriptionDataStoreInstance.state,A=new Set(x?M().oe(x).map((e=>e.userId)):[]);if(null!=A&&A.has(t))return w.sort(((e,t)=>re(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().TE[t.permissionItem.role??"none"]-d().TE[e.permissionItem.role??"none"]));!S.find((e=>"explicit_team_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==g?void 0:g.id)))&&g&&g.isNonGuestMember(t,o)&&w.push({permissionItem:{type:"explicit_team_permission",role:"none",team_id:g.id},from:{table:h().yK,teamId:g.id}});!S.find((e=>"explicit_team_owner_permission"===e.permissionItem.type&&e.permissionItem.team_id===(null==g?void 0:g.id)))&&g&&g.isOwner(t)&&w.push({permissionItem:{type:"explicit_team_owner_permission",role:"none",team_id:g.id},from:{table:h().yK,teamId:g.id}});return S.find((e=>"space_permission"===e.permissionItem.type))||w.push({permissionItem:{type:"space_permission",role:"none"},from:{table:m().ev,blockId:n.id}}),w.sort(((e,t)=>re(e.permissionItem,t.permissionItem))).reverse().sort(((e,t)=>d().TE[t.permissionItem.role??"none"]-d().TE[e.permissionItem.role??"none"]))}function re(e,t){const n=d().B2(e),o=d().B2(t);if(n||o)return n&&o?0:n?-1:1;const i=d().Ds(e),r=d().Ds(t);if(i||r)return i&&r?0:i?-1:1;const a=d().nL(e),s=d().nL(t);return a||s?a&&s?0:a?-1:1:0}function ae(e){const{botStore:t,addPermission:n}=e,o=n?c().MD(t.getCapabilities()):"none",i=t.getParentId(),r=t.getParentTable();let a={type:"bot_permission",bot_id:t.id,role:o};return i&&r&&(a={type:"bot_permission",bot_id:t.id,role:o,parent_id:i,parent_table:r}),a}function se(e){const t=e.getParentBlockStore();return!t||t.pathIsDead()}function le(e){const t=e.getParentBlockStore();return(null==t?void 0:t.isLocked())??!0}function ce(){return x().A.state.permissionGroupsAndMemberCounts.length}},731741:(e,t,n)=>{n.d(t,{A:()=>i});var o=()=>n(757695);const i=new class{constructor(){this.configStores=void 0,this.configStores=new Map}getConfig(e){var t;if(!this.configStores.has(e)){const t=new(o().default);this.configStores.set(e,t)}return null===(t=this.configStores.get(e))||void 0===t?void 0:t.getState()}setConfig(e,t){var n;if(!this.configStores.has(e)){const t=new(o().default);this.configStores.set(e,t)}null===(n=this.configStores.get(e))||void 0===n||n.setState(t)}}},732770:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isEnabled:!0,isKeyboardMode:!1}}setEnabled(e){this.setState({...this.state,isEnabled:e})}setKeyboardMode(e){this.state.isEnabled&&this.setState({isEnabled:!0,isKeyboardMode:e})}}const i=new o},732797:(e,t,n)=>{n.d(t,{A:()=>o});const o=n(463830).A.createValue({open:!1},{})},733166:(e,t,n)=>{n.d(t,{v:()=>l});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=()=>n(449412),i=()=>n(227440),r=()=>n(508496),a=()=>n(670631),s=()=>n(532338);async function l(e){const{environment:t,store:n}=e;try{var l;const e=n.getType();"page"!==e&&"collection_view_page"!==e&&"collection_view"!==e||i().A.state.online||null!==(l=a().A.state.offlinePages)&&void 0!==l&&null!==(l=l[n.id])&&void 0!==l&&l.isExplicitlyOfflinedOrigin||!r().default.checkGate({gateName:"download_for_offline"})||await(0,s().og)({from:"onBlockCreated",pageId:n.id,environment:t,originPageId:n.id,visitedBlockIds:{forThisOriginPage:new Set},autosyncTypes:["not_autosynced"],skippedCollectionIds:new Set})}catch(c){o().O8(c,{from:"onBlockCreated",type:"error"})}}},733539:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l,groupIntervalMs:()=>a});var o=()=>n(933449),i=()=>n(534177);class r{constructor(){this.idMap=new(n(795727).A)({getKey:e=>{let{textInstanceId:t,opId:n}=e;return`${t},${n[0]},${n[1]}`}})}remapIdsForReinsertedText(e,t){(0,o().MX)(t.args.textInstanceId===e.args.textInstanceId,"Inverted operation text instance ID does not match"),(0,o().MX)(n(496603).n4(t.args.originId,e.args.originId),"Inverted operation origin ID does not match"),(0,o().MX)(t.args.content.length===e.args.deletedIds.length,"Inverted operation deleted IDs must be equal to inserted text length");const i=t.args.id,r=t.args.content;for(let n=0;n<r.length;n++)this.addMapping({textInstanceId:e.args.textInstanceId,opId:e.args.deletedIds[n]},{textInstanceId:t.args.textInstanceId,opId:[i[0],i[1]+n]})}addMapping(e,t){(0,o().MX)(!this.idMap.has(e),"Old text instance ID already exists in inverted text operation mapper"),(0,o().MX)(!this.idMap.has(t),"New text instance ID already exists in inverted text operation mapper"),(0,o().MX)(e.textInstanceId===t.textInstanceId,"IDs can only be remapped within the same text instance"),this.idMap.set(e,t)}getMappedId(e){let t,n=e;for(;n=this.idMap.get(n);)t=n;return t}getInvertedTextOperationWithMaybeRemappedIds(e){switch(e.command){case"invertedInsertText":{var t,n;const o=null===(t=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.startId}))||void 0===t?void 0:t.opId,i=null===(n=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.endId}))||void 0===n?void 0:n.opId;return o||i?{...e,args:{...e.args,startId:o??e.args.startId,endId:i??e.args.endId}}:e}case"invertedAddAnnotation":case"invertedRemoveAnnotation":{var o,r;const t=null===(o=this.getMappedId({textInstanceId:e.args.startTextInstanceId,opId:e.args.startId}))||void 0===o?void 0:o.opId,n=null===(r=this.getMappedId({textInstanceId:e.args.endTextInstanceId,opId:e.args.endId}))||void 0===r?void 0:r.opId;if("invertedAddAnnotation"===e.command)return t||n?{...e,args:{...e.args,startId:t??e.args.startId,endId:n??e.args.endId}}:e;if("invertedRemoveAnnotation"===e.command)return t||n?{...e,args:{...e.args,startId:t??e.args.startId,endId:n??e.args.endId}}:e;(0,i().HB)(e);break}case"invertedDeleteText":{var a;const t=null===(a=this.getMappedId({textInstanceId:e.args.textInstanceId,opId:e.args.originId}))||void 0===a?void 0:a.opId;return t?{...e,args:{...e.args,originId:t??e.args.originId}}:e}case"invertedMoveTextSlice":return e;default:(0,i().HB)(e)}}}const a=700;class s extends(()=>n(757695))().default{getInitialState(){return{undoStack:[],redoStack:[],invertedTextOperationIdMapper:new r}}}const l=new s},733848:(e,t,n)=>{n.d(t,{Cb:()=>s,oM:()=>l});n(16280),n(898992),n(672577);var o=()=>n(534177),i=()=>n(562031),r=()=>n(351360),a=()=>n(836251);function s(e){return"assistantChat"===e.type?1===e.operations.length&&"createBlock"===e.operations[0].command&&"text"===e.operations[0].blockNode.tagName&&0===e.operations[0].blockNode.text.length:"assistantChatText"===e.type?0===e.text.length:void(0,o().HB)(e)}function l(e){return(0,a().w6)(e)?(0,i().n)():r().default.state.currentSpaceStore}},734410:(e,t,n)=>{n.d(t,{q:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("infoFilled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.99634 15.5659C6.96118 15.5659 5.98706 15.3682 5.07397 14.9727C4.16089 14.582 3.35522 14.0376 2.65698 13.3394C1.96362 12.6411 1.41919 11.8354 1.02368 10.9224C0.628174 10.0093 0.43042 9.03516 0.43042 8C0.43042 6.96484 0.628174 5.99072 1.02368 5.07764C1.41919 4.16455 1.96362 3.36133 2.65698 2.66797C3.35522 1.96973 4.15845 1.42285 5.06665 1.02734C5.97974 0.631836 6.95386 0.434082 7.98901 0.434082C9.02905 0.434082 10.0056 0.631836 10.9187 1.02734C11.8318 1.42285 12.6375 1.96973 13.3357 2.66797C14.0339 3.36133 14.5808 4.16455 14.9763 5.07764C15.3718 5.99072 15.5696 6.96484 15.5696 8C15.5696 9.03516 15.3718 10.0093 14.9763 10.9224C14.5808 11.8354 14.0339 12.6411 13.3357 13.3394C12.6375 14.0376 11.8318 14.582 10.9187 14.9727C10.0056 15.3682 9.03149 15.5659 7.99634 15.5659ZM6.65601 12.2114H9.7395C9.91528 12.2114 10.0618 12.1577 10.179 12.0503C10.2961 11.938 10.3547 11.7939 10.3547 11.6182C10.3547 11.4521 10.2961 11.313 10.179 11.2007C10.0618 11.0835 9.91528 11.0249 9.7395 11.0249H8.89722V7.43604C8.89722 7.20654 8.84106 7.021 8.72876 6.87939C8.61646 6.73779 8.45288 6.66699 8.23804 6.66699H6.78784C6.61694 6.66699 6.4729 6.72559 6.35571 6.84277C6.23853 6.95996 6.17993 7.09912 6.17993 7.26025C6.17993 7.43604 6.23853 7.58008 6.35571 7.69238C6.4729 7.7998 6.61694 7.85352 6.78784 7.85352H7.55688V11.0249H6.65601C6.48511 11.0249 6.33862 11.0835 6.21655 11.2007C6.09937 11.313 6.04077 11.4521 6.04077 11.6182C6.04077 11.7939 6.09937 11.938 6.21655 12.0503C6.33862 12.1577 6.48511 12.2114 6.65601 12.2114ZM7.95239 5.48779C8.24536 5.48779 8.49194 5.38525 8.69214 5.18018C8.89233 4.9751 8.99243 4.73096 8.99243 4.44775C8.99243 4.1499 8.89233 3.90088 8.69214 3.70068C8.49194 3.49561 8.24536 3.39307 7.95239 3.39307C7.66431 3.39307 7.41772 3.49561 7.21265 3.70068C7.00757 3.90088 6.90503 4.1499 6.90503 4.44775C6.90503 4.73096 7.00757 4.9751 7.21265 5.18018C7.41772 5.38525 7.66431 5.48779 7.95239 5.48779Z"})})},735372:(e,t,n)=>{n.d(t,{Ay:()=>a,qu:()=>s,wb:()=>c});var o=()=>n(757695);class i extends o().default{getInitialState(){return{open:!1,findQuery:"",focused:!1,showReplaceInput:!1,textSelectionOnOpen:void 0}}isOpen(){return this.state.open}hasFindQuery(){return this.state.findQuery.length>0}isFocused(){return this.state.focused}}const r=new i,a=r,s=new(n(496506).default)((()=>{const e=r.state;return e.open&&e.findQuery.length>0?e.findQuery:void 0}),{debugName:"FindAndReplaceOpenQueryStore"});class l extends o().default{getInitialState(){}}const c=new l},735577:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(e){return e&&n(997769).t(e,"url")}},735824:(e,t,n)=>{n.d(t,{r:()=>a});var o=n(296540);const i=!1;let r=0;function a(e){const{getElement:t,onRequestAnimationFrameForDebugging:n}=e,[a,s]=(0,o.useState)(),l=Boolean(t);(0,o.useEffect)((()=>{l||s(void 0)}),[l]);const c=(0,o.useCallback)((()=>{if(!t)return;null==n||n();const e=t();if(e){const t=e.getBoundingClientRect();let n=!0;if(a){a.x===t.x&&a.y===t.y&&a.width===t.width&&a.height===t.height&&(n=!1)}n&&s(t)}else s(void 0)}),[t,n,a]);var d;return d=t?c:void 0,(0,o.useEffect)((()=>{if(!d)return;const e=++r;let t,n=!1;const o=()=>{d(),n?i&&console.log(`#${e} (raf=${t}): raf loop cancelled, returning early`):t=window.requestAnimationFrame(o)};return t=window.requestAnimationFrame(o),i&&console.log(`#${e} (raf=${t}): starting raf loop`),()=>{i&&console.log(`#${e} (raf=${t}): ending raf loop`),n=!0,window.cancelAnimationFrame(t)}}),[d]),a}},737230:(e,t,n)=>{n.d(t,{Ay:()=>g,Iz:()=>u,J:()=>a,UL:()=>d,VE:()=>l,aP:()=>s,tF:()=>r,zX:()=>i});var o=()=>n(534177);const i={comments:"default",suggestions:"suggestion"};let r=function(e){return e[e.Comments=0]="Comments",e[e.Updates=1]="Updates",e[e.Info=2]="Info",e}({});function a(e){switch(e){case r.Comments:return"comments";case r.Updates:return"updates";case r.Info:return"info";default:return(0,o().ub)(e),"comments"}}function s(e){switch(e){case l.Updates:return"updates";case l.Analytics:return"analytics";default:return(0,o().ub)(e),"updates"}}let l=function(e){return e[e.Updates=0]="Updates",e[e.Analytics=1]="Analytics",e}({}),c=function(e){return e[e.ForYou=0]="ForYou",e[e.Comments=1]="Comments",e}({}),d=function(e){return e[e.ForYou=0]="ForYou",e[e.Comments=1]="Comments",e[e.Updates=2]="Updates",e[e.Analytics=3]="Analytics",e[e.Info=4]="Info",e}({});const u=385;class p extends(()=>n(757695))().default{getInitialState(){return{width:u,expanded:!1,isResizerHovered:!1,isResizing:!1,mouseEntered:!1,currentTab:r.Comments,updatesSubTab:l.Updates,commentsSubTab:c.ForYou,commentsMode:"unresolved",commentsTypeMode:"commentsAndSuggestions",isAnimating:!1,canRender:!0}}getTabForNewCommentsSidebar(){switch(this.state.currentTab){case r.Comments:switch(this.state.commentsSubTab){case c.ForYou:return d.ForYou;case c.Comments:return d.Comments;default:return(0,o().ub)(this.state.commentsSubTab),d.Comments}case r.Updates:switch(this.state.updatesSubTab){case l.Updates:return d.Updates;case l.Analytics:return d.Analytics;default:return(0,o().ub)(this.state.updatesSubTab),d.Updates}case r.Info:return d.Info;default:return(0,o().ub)(this.state.currentTab),d.Comments}}createUpdateForNewCommentsSidebar(e){switch(e){case d.ForYou:return{currentTab:r.Comments,commentsSubTab:c.ForYou};case d.Comments:return{currentTab:r.Comments,commentsSubTab:c.Comments};case d.Updates:return{currentTab:r.Updates,updatesSubTab:l.Updates};case d.Analytics:return{currentTab:r.Updates,updatesSubTab:l.Analytics};case d.Info:return{currentTab:r.Info};default:return(0,o().ub)(e),{currentTab:r.Updates,commentsSubTab:c.Comments,updatesSubTab:l.Updates}}}}const m=new p;(0,n(604341).exposeDebugValue)("UpdateSidebarStore",m);const g=m},738418:(e,t,n)=>{n.d(t,{G:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("info",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.97266 14.9453C11.7871 14.9453 14.9453 11.7803 14.9453 7.97266C14.9453 4.1582 11.7803 1 7.96582 1C4.1582 1 1 4.1582 1 7.97266C1 11.7803 4.16504 14.9453 7.97266 14.9453ZM7.97266 13.7832C4.74609 13.7832 2.16895 11.1992 2.16895 7.97266C2.16895 4.74609 4.73926 2.16211 7.96582 2.16211C11.1924 2.16211 13.7764 4.74609 13.7832 7.97266C13.79 11.1992 11.1992 13.7832 7.97266 13.7832ZM7.91113 5.53906C8.41016 5.53906 8.7998 5.14258 8.7998 4.64355C8.7998 4.14453 8.41016 3.74805 7.91113 3.74805C7.41895 3.74805 7.02246 4.14453 7.02246 4.64355C7.02246 5.14258 7.41895 5.53906 7.91113 5.53906ZM6.77637 11.7324H9.55859C9.83887 11.7324 10.0576 11.5273 10.0576 11.2471C10.0576 10.9805 9.83887 10.7686 9.55859 10.7686H8.71094V7.28906C8.71094 6.91992 8.52637 6.67383 8.17773 6.67383H6.89258C6.6123 6.67383 6.39355 6.88574 6.39355 7.15234C6.39355 7.43262 6.6123 7.6377 6.89258 7.6377H7.62402V10.7686H6.77637C6.49609 10.7686 6.27734 10.9805 6.27734 11.2471C6.27734 11.5273 6.49609 11.7324 6.77637 11.7324Z"})})},739283:(e,t,n)=>{n.d(t,{A:()=>b});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(700500),l=()=>n(774733),c=()=>n(886901),d=()=>n(835066),u=()=>n(116008),p=()=>n(661491),m=()=>n(108944),g=()=>n(644914),f=()=>n(630116),v=()=>n(219839),h=()=>n(11048),_=n(474848);function b(e){let{disableCommentMenu:t,hideContent:n,hideIfSidebarOrMarginCommentsVisible:b,recursivelyLoadAllDiscussions:y,store:S,property_id:w}=e;const k=(0,i().v3)(),I=(0,i().Y0)(),x=(0,r().K8)((()=>{const e=S.getModel();return Boolean(null==e?void 0:e.isType(s().uP))}),[S]),A=(0,r().K8)((()=>{const e=(0,m().g7)(S);let t,n,o,i;for(const r of e){if(r instanceof f().Bv&&t){const e=r.getType();if(e&&(0,s().$I)(e)&&r.id!==S.id)break;if("column_list"===e){const e=r.getContentStore().getValue()||[];n=e.indexOf(t.id),o=e.length,i=(0,p().kv)(r,k)}}t=r}return{columnListIndex:n,columnListColumnCount:o,columnListResizable:i}}),[k,S]),C=(0,o.useCallback)((()=>{if(!I.isMobile){if(void 0===A.columnListIndex)return c().vn.FloatRight;if(!A.columnListResizable&&A.columnListColumnCount&&A.columnListIndex===A.columnListColumnCount-1)return c().vn.FloatRight}return c().vn.PushContent}),[A.columnListColumnCount,A.columnListIndex,A.columnListResizable,I.isMobile]),T=(0,r().K8)((()=>(0,g().me)(k)),[k]),M=(0,r().K8)((()=>(0,d().dC)(k,S)),[k,S]),{blockInsetRight:P}=(0,o.useContext)(v().n),B=(0,a().IS)((e=>({wrapper:C()===c().vn.FloatRight?{position:"relative",left:P}:{}})),[C,P]),R=(0,r().K8)((()=>u().A.getPropertyId()===w),[w]),E=t||n||(x||b)&&(T||M)||R&&T;return(0,_.jsx)(h().A,{name:"BlockDiscussionIndicator",children:!E&&(0,_.jsx)("div",{style:B.wrapper,children:(0,_.jsx)(l().Gu,{store:S,getFormat:C,recursivelyLoadAllDiscussions:Boolean(y),onlyCountBlockLevelDiscussions:T,property_id:w},"DiscussionIndicator")})})}},741237:(e,t,n)=>{n.d(t,{E:()=>i,O:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520);var o=()=>n(534177);function i(e){return[{operation:"delete",deleteFromParent:e.moveFromParent,deletingChildren:e.movingChildren,debug:e.debug},{operation:"insert",insertIntoParent:e.moveToParent,insertChildren:e.movingChildren,adjacentSibling:e.moveToAdjacentSibling,direction:e.moveToDirection,debug:e.debug}]}const r={applyMutable:function(e){switch(e.operation){case"delete":return a(e);case"insert":return s(e);case"move":const[t,n]=i(e),r=a(t),l=s(n);return r||l;default:(0,o().HB)(e)}}};function a(e){const{deleteFromParent:t,deletingChildren:n}=e;if(0===n.length)return!1;const o=new Set(n),i=t.children.filter((e=>!o.has(e)));return i.length!==t.children.length&&(t.children=i,!0)}function s(e){const{direction:t,insertChildren:n,insertIntoParent:i,adjacentSibling:r}=e;if(0===n.length)return!1;const a=r?i.children.indexOf(r):-1,s=(()=>{switch(t){case"listBefore":return Math.max(0,a);case"listAfter":return-1===a?i.children.length:a+1;default:(0,o().HB)(t)}})();return i.children.splice(s,0,...n),!0}},741496:(e,t,n)=>{n.d(t,{N:()=>a});var o=()=>n(908006),i=()=>n(502438),r=()=>n(946141);function a(e,t){o().default.afterNextFlush((()=>{let n;const o=i().default.state.stores[0];o&&(n=o.getType());const{parentTeamStore:a,...s}=t;r().tw(e,"block_action",`block_action-${t.analyticsName}-${t.from}-${t.block_id}`,60,{store:a,...s,final_block_type:n})}))}},741817:(e,t,n)=>{n.d(t,{v:()=>a});var o=()=>n(186445),i=()=>n(299545),r=()=>n(588836);function a(e){const{discussionStore:t,transaction:n}=e,a=i().No(t);a&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:a});const s=o().ZO();if(s){const e=i().zo({blockStore:s,transclusionReferences:"recurseInto",childPages:"omit"});for(const o of e){if(a&&o.table===a.table&&o.id===a.id)continue;const e=i().bN(o).getValue();null!=e&&e.includes(t.id)&&(0,r().u)({discussionIds:[t.id],transaction:n,blockStore:o})}}}},742852:(e,t,n)=>{n.d(t,{w:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.61 3.61a3.776 3.776 0 0 1 5.34 0l.367.368a3.776 3.776 0 0 1 0 5.34l-1.852 1.853a.625.625 0 1 1-.884-.884l1.853-1.853a2.526 2.526 0 0 0 0-3.572l-.368-.367a2.526 2.526 0 0 0-3.572 0L9.641 6.347a.625.625 0 1 1-.883-.883z"}),(0,o.jsx)("path",{d:"M12.98 6.949a.625.625 0 0 1 0 .884L7.53 13.28a.625.625 0 0 1-.884-.884l5.448-5.448a.625.625 0 0 1 .884 0"}),(0,o.jsx)("path",{d:"M6.348 8.757a.625.625 0 0 1 0 .884l-1.853 1.853a2.526 2.526 0 0 0 0 3.572l.367.367a2.525 2.525 0 0 0 3.572 0l1.853-1.852a.625.625 0 1 1 .884.883l-1.853 1.853a3.776 3.776 0 0 1-5.34 0l-.367-.367a3.776 3.776 0 0 1 0-5.34l1.853-1.853a.625.625 0 0 1 .884 0"})]})},r=(0,n(340498).wt)("link",i)},743260:(e,t,n)=>{n.d(t,{$D:()=>H,Es:()=>P,GZ:()=>B,LC:()=>N,LH:()=>D,S6:()=>V,Sk:()=>R,VF:()=>M,_c:()=>F,c3:()=>z,iQ:()=>C,mQ:()=>T,oX:()=>L,qv:()=>j,wF:()=>E,yi:()=>O});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(581454),n(737550),n(296540);var o=()=>n(799288),i=()=>n(206267),r=()=>n(68263),a=()=>n(179034),s=()=>n(96689),l=()=>n(695608),c=()=>n(959013),d=()=>n(100622),u=()=>n(534177),p=()=>n(284371),m=()=>n(134696),g=()=>n(901389),f=()=>n(646736),v=()=>n(351360),h=()=>n(406999),_=()=>n(630116),b=()=>n(134217),y=()=>n(10984),S=()=>n(749240),w=()=>n(186445),k=()=>n(972435),I=()=>n(299545),x=()=>n(698449),A=n(474848);async function C(e){let{environment:t,permissionsInviteStoreState:n,from:o}=e;const i=(0,A.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.confirmationMessage",defaultMessage:"Your changes have not been saved. Discard changes?"}),r=(0,A.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.confirmationButton.label",defaultMessage:"Yes"}),a=(0,A.jsx)(c().sA,{id:"permissionsInvite.closeInviteDialog.cancelButton.label",defaultMessage:"Cancel"});if(n.inviteTargets.length>0){const{accept:e}=await g().Gh({message:i,acceptLabel:r,cancelLabel:a});return m().iv(t,{...L(t,n),from:o,discard_changes:e}),!e}return!1}function T(e){const{target:t,permissionsInviteStore:n}=e;return n.state.inviteTargets.find((e=>"newUser"===t.type?"newUser"===e.type&&t.value.email===e.value.email:"group"===t.type?e.type===t.type&&e.value.group_id===t.value.group_id:e.type===t.type&&e.value.id===t.value.id))}function M(e){const{targetStore:t,permissionsInviteStore:n,userTarget:o}=e;return!!T({permissionsInviteStore:n,target:o})||"existingUser"===o.type&&E({target:o,store:t})}function P(e){const{targetStore:t,permissionsInviteStore:n,currentInviteActors:i}=e;if(!i)return{inviteUsers:[],inviteGroups:[],inviteBots:[]};if((0,I().nw)(t))return i;const r=i.inviteUsers.filter((e=>!M({targetStore:t,permissionsInviteStore:n,userTarget:e})));return{inviteBots:i.inviteBots.filter((e=>!(!e.value.alive||T({permissionsInviteStore:n,target:e})||!(0,o().VH)(e.value)&&!(0,o().WG)(e.value))&&!E({target:e,store:t}))),inviteGroups:i.inviteGroups.filter((e=>!T({permissionsInviteStore:n,target:e})&&!E({target:e,store:t}))),inviteUsers:r,importedContacts:i.importedContacts}}function B(e,t){if(!e||!t||0===e.length||0===t.length)return t;const n=new Set(e.map((e=>e.value.email.toLowerCase())));return t.filter((e=>!n.has(e.value.email.toLowerCase())))}function R(e){const{intl:t,target:n}=e;switch(n.type){case"newUser":return n.value.email;case"existingUser":return(0,l().c6)(t,n.value);case"bot":return(0,o().Hg)(n.value);case"group":return(0,x().Pf)({intl:t,groupName:n.value.name});default:(0,u().HB)(n)}}function E(e){const{target:t,store:n}=e;if(!n.isDefined())return!1;if((0,I().$R)(n)){const e=t.type;if("existingUser"===e){const e=n.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===t.value.id));return Boolean(e&&"none"!==e.type)}return"group"===e?n.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.value.group_id)):("bot"===e||"newUser"===e||(0,u().ub)(e),!1)}return n instanceof _().Bv||n instanceof _().md?n.getPermissionItems().some((e=>{switch(t.type){case"existingUser":return(0,r().B2)(e)&&e.user_id===t.value.id;case"bot":return(0,r().P3)(e)&&e.bot_id===t.value.id;case"group":return(0,r().Ds)(e)&&e.group_id===t.value.group_id;case"newUser":return!1;default:return(0,u().HB)(t)}})):n instanceof _().SL?"existingUser"===t.type?Boolean((0,f().dp)(n,t.value.id).isMember()):"bot"===t.type&&Boolean((0,f().Ts)(n,t.value.id).isMember()):!(0,I().nw)(n)&&void(0,u().HB)(n)}function D(e){const{environment:t,permissionsInviteStore:n,store:o,renderInShareModal:r}=e;n.setState({modalOpen:!r,tokenQuery:"",inviteTargets:[],inviteRole:N(e),isInviteTargetsEmpty:!0,table:(0,I().Yu)(o)?s().NX:a().ev,flowId:i().JW(),inputFocus:"invitee",emailMessage:""}),(0,I().Yu)(o)?m().VV(t):m().F1(t,{...L(t,e.permissionsInviteStore.state)})}function N(e){const{store:t,isSubscribed:n}=e;return(0,I().Yu)(t)?n?"read_and_write":"editor":(0,y().El)()?"editor":"read_and_write"}function L(e,t){var n;const{isInviteTargetsEmpty:o,inviteRole:i,flowId:r}=t,a=(0,w().ao)(),s=null==a?void 0:a.getRole(),l=null===(n=v().default.state.currentSpaceStore)||void 0===n?void 0:n.getRole(),{inviteTargets:c,emailMessage:d}=t,u=(0,y().AI)(),p={invite_flow_id:r,user_count:0,is_bot:!1,invite_message_length:(null==d?void 0:d.length)??0,...s&&{page_current_user_role:s},...l&&{space_role:l},...u&&{subscription_tier:u}};if(o)return p;if(0===c.length)return p;if(function(e){return e.length>0&&"bot"===e[0].type}(c))return{...p,is_bot:!0};const m=c.filter(h().Gz).length,g=c.filter(h().ju).length+m;return{...p,role:i,user_count:g,new_user_count:m}}function O(e){return"newUser"===e.type||"existingUser"===e.type&&("none"===e.spaceRole||"not_in_space"===e.spaceRole)}const U=(0,c().YK)({workspaceOwnerTooltip:{id:"inviteUserModal.userRole.workspaceOwnerBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a workspace owner in this workspace"},workspaceOwnerBadge:{id:"inviteUserModal.userRole.workspaceOwnerBadge.label",defaultMessage:"Workspace Owner"},membershipAdminTooltip:{id:"inviteUserModal.userRole.membershipAdminBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a membership admin in this workspace"},membershipAdminBadge:{id:"inviteUserModal.userRole.membershipAdminBadge.label",defaultMessage:"Membership admin"},memberTooltip:{id:"inviteUserModal.userRole.memberBadge.tooltip",defaultMessage:"{ userNameAndEmail} is a member in this workspace"},memberBadge:{id:"inviteUserModal.userRole.memberBadge.label",defaultMessage:"Member"},guestTooltip:{id:"inviteUserModal.userRole.guest.tooltip",defaultMessage:"{ userNameAndEmail} is a guest in this workspace"},guestBadge:{id:"inviteUserModal.userRole.guestBadge.label",defaultMessage:"Guest"}});function F(e){const{environment:t,customStyle:n}=e,{device:o}=t;return{display:"inline-flex",height:18,textTransform:"uppercase",fontSize:10,marginBottom:2,fontWeight:p().Wy.medium,letterSpacing:1,color:d().Ay.uiLightGray,border:`1px solid ${d().Ay.uiLightGray}`,minWidth:70,alignItems:"center",justifyContent:"center",paddingTop:o.isAndroid?2:1,paddingBottom:1,paddingLeft:3,paddingRight:3,borderRadius:4,...n}}function V(e){const{role:t,intl:n,nameOrEmail:o}=e,i=o||n.formatMessage({id:"userTypeTooltip.generalPerson",defaultMessage:"This person"});switch(t){case"editor":return{tooltip:n.formatMessage(U.workspaceOwnerTooltip,{userNameAndEmail:i}),userRoleBadge:n.formatMessage(U.workspaceOwnerBadge)};case"membership_admin":return{tooltip:n.formatMessage(U.membershipAdminTooltip,{userNameAndEmail:i}),userRoleBadge:n.formatMessage(U.membershipAdminBadge)};case"read_and_write":return{tooltip:n.formatMessage(U.memberTooltip,{userNameAndEmail:i}),userRoleBadge:n.formatMessage(U.memberBadge)};case"none":return{tooltip:n.formatMessage(U.guestTooltip,{userNameAndEmail:i}),userRoleBadge:n.formatMessage(U.guestBadge)};default:(0,u().HB)(t)}}function j(e){return O(e)?"rgba(246, 192, 80, 0.26)":void 0}function z(e){var t;const{inviteTargets:n,recordStore:o,canEditSpaceMembership:i}=e;if(0===n.length)return null;if(!o)return null;const{inviteTargetGuests:r,inviteTargetMembers:a}=function(e){const t=[],n=[];return e.forEach((e=>{O(e)?t.push(e):n.push(e)})),{inviteTargetGuests:t,inviteTargetMembers:n}}(n),s=i?[...a,...r]:a,l=i?[]:r,d=k().A.getIntl(),u=(0,I()._p)(o)?null===(t=o.getBlockTitleStore())||void 0===t?void 0:t.getValue():o.getName();return i||0===l.length?(0,A.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.usersAddedMessage",defaultMessage:"{numberOfTargets, plural, one {Added {targetName} to {recordName}} other {Added {numberOfTargets} people to {recordName}}}",values:{numberOfTargets:s.length,targetName:R({intl:d,target:s[0]}),recordName:u}}):0===s.length?(0,A.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.inviteRequestedMessage",defaultMessage:"{numberOfTargets, plural, one {Requested {targetName} for approval} other {Requested {numberOfTargets} invites for approval}}",values:{numberOfTargets:l.length,targetName:R({intl:d,target:l[0]})}}):(0,A.jsx)(c().sA,{id:"permissionsInvite.inviteConfirmationToast.userAddedAndRequestedText",defaultMessage:"{numberOfAddedTargets, plural, one {Added {addedTargetName}} other {Added {numberOfAddedTargets} people}} & {numberOfRequestedTargets, plural, one {requested {requestedTargetName} for approval} other {requested {numberOfRequestedTargets} people for approval}}",values:{numberOfAddedTargets:s.length,addedTargetName:R({intl:d,target:s[0]}),numberOfRequestedTargets:l.length,requestedTargetName:R({intl:d,target:l[0]})}})}function H(e){if("existingUser"!==e.type)return;const t=S().subscriptionDataStoreInstance.state,n=(t?b().Be(t):[]).find((t=>t.userId===e.value.id));return n?n.role:"not_in_space"}},743336:(e,t,n)=>{n.d(t,{V:()=>s,h:()=>a});var o=()=>n(536131),i=()=>n(778417),r=()=>n(725614);function a(e,t){i().IU({environment:e}),r().clear({environment:e}),o().A.setState({open:!0,...t})}function s(){o().A.setState({open:!1,originRect:o().A.state.originRect})}},744705:(e,t,n)=>{n.d(t,{X:()=>o,o:()=>i});n(581454);function o(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.isReady())return!1;if(n[e.id])return!0;if(n[e.id]=!0,r(e,t))return!0;const i=e.getContentStores();let a=!0;for(const r of i)o(r,!1,n)||(a=!1);return a}async function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(await e.load(),n[e.id])return;if(n[e.id]=!0,r(e,t))return;const o=e.getContentStores();await Promise.all(o.map((e=>i(e,!1,n))))}function r(e,t){return!(!e.isPageBlock()||t)||!!e.isCollectionView()}},745266:(e,t,n)=>{n.d(t,{h:()=>d});n(296540);var o=()=>n(484714),i=()=>n(401497),r=()=>n(632625),a=()=>n(278238),s=()=>n(340498),l=()=>n(682146),c=n(474848);function d(e){const{device:t}=(0,o().v3)(),n=(0,i().DP)(),{color:d,viewIcon:u,viewType:p,size:m,style:g}=e,f=function(e){return{regular:e.text.primary,light:e.text.secondary,gray:a().l8[e.mode].gray,lightGray:a().l8[e.mode].lightgray,blue:e.blueColor}}(n)[d];if(!p)return null;if(u)return(0,c.jsx)(r().p,{style:{fill:f,backfaceVisibility:void 0,...g},size:m??(t.isMobile?18:16),theme:n,icon:u});return l().ZU[p]({width:m??s().Ev.default,height:m??s().Ev.default,backfaceVisibility:void 0,fill:f,...g})}},745766:(e,t,n)=>{function o(e){return"drag"in e&&e.drag?{WebkitAppRegion:"drag"}:"noDrag"in e&&e.noDrag?{WebkitAppRegion:"no-drag"}:{}}n.d(t,{g:()=>o})},747100:(e,t,n)=>{n.d(t,{Gb:()=>s,QX:()=>d,RX:()=>p,cq:()=>c,ln:()=>a,m3:()=>l,rc:()=>u});var o=()=>n(661179),i=()=>n(712505),r=()=>n(502438);const a=120;function s(){return i().default.isCenterPeekOpen()||r().default.isInPeekRenderer()}function l(){const e=i().default.state;return e.open&&(s()||e.isOpening)}function c(e){return Boolean(e.findRecordStoreUIAncestor((e=>e===i().default.peekTargetStore.state)).ancestor)}function d(){const e=window.innerWidth;return e>2*i().SIDEPEEK_MIN_WIDTH?e*(2/3):e}function u(e){const t=o().A.state;return Math.min(e.WindowSizeStore.state.width-2*i().PeekModeOuterPadding,i().CenterPeekModeOuterWidth+t)}function p(e){return i().default.isSidePeekOpen()&&!c(e)&&!e.isImmediateColumnChild()&&(e.isRootOrDirectChild()||"page"===e.getType())}},748197:(e,t,n)=>{n.d(t,{c:()=>i});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{transcriptionSetupModalOpen:!1,tabState:{},settingsOpenForBlockId:void 0,summarizationState:{},visibleBlocksIds:new Set,loadingBlockIds:new Set}}createSummarizationAbortController(e){const t=new AbortController;return this.setState({...this.state,summarizationState:{...this.state.summarizationState,[e]:{abortController:t}}}),t}getSummarizationAbortController(e){var t;return null===(t=this.state.summarizationState[e])||void 0===t?void 0:t.abortController}clearSummarizationAbortController(e){this.setState({...this.state,summarizationState:{...this.state.summarizationState,[e]:{abortController:void 0}}})}getVisibilityStatus(e){return this.state.visibleBlocksIds.has(e)}setVisibility(e,t){const n=this.state.visibleBlocksIds;t?n.add(e):n.delete(e),this.emit()}setTabState(e,t){this.setState({...this.state,tabState:{...this.state.tabState,[e]:t}})}getTabState(e){return this.state.tabState[e]}setSettingsOpenForBlockId(e){this.setState({...this.state,settingsOpenForBlockId:e})}isSettingsOpenForBlockId(e){return this.state.settingsOpenForBlockId===e}openTranscriptionSetupModal(){this.setState({...this.state,transcriptionSetupModalOpen:!0})}closeTranscriptionSetupModal(){this.setState({...this.state,transcriptionSetupModalOpen:!1})}getIsLoading(e){return this.state.loadingBlockIds.has(e)}setLoadingState(e,t){t?this.state.loadingBlockIds.add(e):this.state.loadingBlockIds.delete(e),this.emit()}}const i=new o},749240:(e,t,n)=>{n.r(t),n.d(t,{SubscriptionDataStore:()=>o,subscriptionDataStoreInstance:()=>i});class o extends(()=>n(757695))().default{constructor(){super(...arguments),this.spaceId=void 0}getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}}const i=new o;(0,n(604341).exposeDebugValue)("subscriptionDataStoreInstance",i)},749687:(e,t,n)=>{n.r(t),n.d(t,{SIDEBAR_MIN_WIDTH:()=>i,sidebarElectronMousePeekStore:()=>g,sidebarExpandedStore:()=>c,sidebarMouseEnterYStore:()=>l,sidebarMouseEnteredStore:()=>d,sidebarMousePeekXStore:()=>s,sidebarOpenStore:()=>a,sidebarResizingStore:()=>u,sidebarShouldLogInitialRenderStore:()=>m,sidebarSizeObserver:()=>p,sidebarWidthStore:()=>r});var o=()=>n(757695);const i=248,r=o().default.createValue(240,{name:"sidebarWidthStore"}),a=o().default.createValue(!1,{name:"sidebarOpenStore"}),s=o().default.createValue(0,{name:"sidebarMousePeekXStore"}),l=o().default.createValue(0,{name:"sidebarMouseEnterYStore"}),c=o().default.createValue(!0,{name:"sidebarExpandedStore"}),d=o().default.createValue(!1,{name:"sidebarMouseEnteredStore"}),u=o().default.createValue({isResizing:!1,isResizerHovered:!1},{name:"sidebarResizingStore"}),p=new(n(472090).E),m=o().default.createValue(!0,{name:"sidebarShouldLogInitialRenderStore"}),g=o().default.createValue(!1,{name:"sidebarElectronMousePeekStore"})},750559:(e,t,n)=>{n.d(t,{f:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("genericError",{viewBox:"0 0 32 32",svg:(0,o.jsx)("path",{d:"M16.0242 29.0485c7.1251 0 13.0243-5.8992 13.0243-13.0243C29.0485 8.91198 23.1365 3 16.0115 3 8.89922 3 3 8.91198 3 16.0242c0 7.1251 5.91198 13.0243 13.0242 13.0243zm-.0127-11.1089c-.6768 0-1.0471-.3959-1.0726-1.0726l-.1788-6.3078c-.0255-.70232.5108-1.20031 1.2386-1.20031.7151 0 1.2769.51076 1.2514 1.21301l-.1916 6.2951c-.0255.6895-.3958 1.0726-1.047 1.0726zm0 4.6989c-.7406 0-1.4301-.5874-1.4301-1.379 0-.7917.6767-1.3791 1.4301-1.3791.7533 0 1.4301.5746 1.4301 1.3791 0 .8044-.6895 1.379-1.4301 1.379z"})})},750660:(e,t,n)=>{n.d(t,{BS:()=>ne,HY:()=>re,Ju:()=>oe,LC:()=>ae,LP:()=>ee,VN:()=>ie,YX:()=>se,ho:()=>X,qL:()=>J,zs:()=>te});n(16280),n(18107),n(967357),n(898992),n(672577),n(581454),n(737550);var o=()=>n(584262),i=()=>n(66689),r=()=>n(700500),a=()=>n(970013),s=()=>n(857639),l=()=>n(206267),c=()=>n(179034),d=()=>n(519831),u=()=>n(96689),p=()=>n(496603),m=()=>n(534177),g=()=>n(466614),f=()=>n(799832),v=()=>n(989423),h=()=>n(405417),_=()=>n(972435),b=()=>n(776894),y=()=>n(108944),S=()=>n(640653),w=()=>n(274511),k=()=>n(155959),I=()=>n(351360),x=()=>n(889097),A=()=>n(188669),C=()=>n(609044),T=()=>n(630116),M=()=>n(795179),P=()=>n(292167),B=()=>n(95313),R=()=>n(901265),E=()=>n(317001),D=()=>n(656432),N=()=>n(60867),L=()=>n(901389),O=()=>n(824772),U=()=>n(496414),F=()=>n(524539),V=()=>n(222299),j=()=>n(44729),z=()=>n(246826),H=()=>n(537941),W=()=>n(778417),q=()=>n(436572),K=()=>n(426116),G=()=>n(955930),$=()=>n(751156),Y=()=>n(755199),Q=()=>n(664713);const Z=(0,n(959013).YK)({duplicatingContent:{id:"moveToMenuActions.duplicatingContent.loadingMessage",defaultMessage:"Duplicating content…"},duplicatedToSpace:{id:"moveToMenuActions.duplicatedToSpace.toast",defaultMessage:"Duplicated {name} to {spaceName}"}});function X(e){const{environment:t,blocks:n,originRect:o,moveToContext:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,disableSuccessToast:d,dontCommitActions:u,forceUntyped:p,forceShowPrivatePageOption:m}=e,g=Date.now(),f=(0,A().jU)(n),v=function(e){const{hasDatabaseType:t,forceUntyped:n}=e;if(n)return"untyped";if(t)return"typed";return"untyped"}({forceUntyped:p,hasDatabaseType:Boolean(f)}),h=l().JW();n.length&&(M().A.reset(),C().A.reset(),R().VN(),A().Ay.setState({variant:v,isOpen:!0,rect:o,targets:n,autocompleteQuery:"",moveToContext:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:A().Ay.state.lastPageId,disableSuccessToast:d,dontCommitActions:u,openedTimeMs:g,flowId:h,forceShowPrivatePageOption:m,queryLimit:b().p1,canLoadMore:!0}),B().dP(t,{from:i,render_type:"web",target_block_ids:n.map((e=>e.id)),targets_database_type:f,flowId:h}))}function J(e){const{environment:t,originRect:n,moveToContext:o,overrideDatabaseType:i,onAccept:r,onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,forceShowPrivatePageOption:d}=e;if(A().Ay.state.isOpen)return;const u=n.left+n.width/2-165;n.x=u;const p=Date.now(),m=l().JW();M().A.reset(),C().A.reset(),R().VN(),A().Ay.setState({variant:"typed",overrideDatabaseType:i,isOpen:!0,rect:n,targets:[],autocompleteQuery:"",moveToContext:o,onAccept:e=>{const{value:n}=e;"collection"===n.type&&($().createAndCommit({userAction:"moveToMenuActions.openForTaskDatabaseSelection.setPreferredDatabase",environment:t,canUndo:!0,perform:e=>{Y().ee({transaction:e,databaseType:"notion://tasks_collection",collectionId:n.id})}}),r(e))},onCanceled:a,isAddTo:s,isDefaultPrivateLocation:c,lastPageId:A().Ay.state.lastPageId,disableSuccessToast:!0,dontCommitActions:!0,openedTimeMs:p,flowId:m,forceShowPrivatePageOption:d,queryLimit:b().p1,canLoadMore:!0}),B().dP(t,{from:o,render_type:"web",target_block_ids:[],targets_database_type:void 0,flowId:m})}async function ee(e){const t=await async function(e){var t;const{environment:n,blocks:o,originRect:r,moveToContext:a,disableSuccessToast:s,onAccept:c,onCanceled:d,isAddTo:u}=e,{currentSpaceStore:p}=I().default.state,m=Date.now(),g=A().Ay.state.isOpen?A().Ay.state.flowId:l().JW(),f=(0,A().jU)(o);if(!u&&f&&f!==i().pW)return!1;if(!(0,k().T)("supportsNativeMoveTo")||null===(t=n.mobileNative)||void 0===t||!t.api.moveTo||0===o.length||!p)return!1;const v=o.map((e=>e.id)),h=await n.mobileNative.moveTo({targets:v,spaceId:p.id,isAddTo:u||!1,moveToContext:a,flowId:g});if(!h)return!1;if(!h.supported||!h.destination)return h.supported&&d&&d(),h.supported;M().A.reset(),C().A.reset(),R().VN(),A().Ay.setState({variant:"untyped",isOpen:!0,rect:r,targets:o,autocompleteQuery:"",moveToContext:a,dontCommitActions:e.dontCommitActions,disableSuccessToast:s,onAccept:c,isAddTo:u,lastPageId:A().Ay.state.lastPageId,renderType:"mobileNative",openedTimeMs:m,flowId:g,queryLimit:b().p1,canLoadMore:!0});const _=A().Ay.state.isOpen&&A().Ay.state.useSudoMode;return await ne({environment:n,value:h.destination,useSudoMode:_,renderType:"native",isSearchResult:h.isSearchResult}),ie({environment:n,clearSelection:!1}),!0}(e);t||X(e)}function te(e,t,n){if("page"!==n.type)return!1;const o=new(T().Bv)(e,{table:c().ev,id:n.id}),i=(0,y().g7)(o);for(const r of i)if(t.includes(r.id))return!0;return!1}async function ne(e){const{environment:t,value:n,useSudoMode:o,renderType:i,shouldClearPagePermissions:r,isSearchResult:a}=e,s=A().Ay.state;if(!s.isOpen)return;const{targets:l,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,flowId:p,autocompleteQuery:m}=s,g={targets:l,value:n,environment:t,shouldClearPagePermissions:r,disableSuccessToast:c,moveToContext:d,isDefaultPrivateLocation:u,renderType:i,timeToSelectMs:Date.now()-s.openedTimeMs,flowId:p,isSearchResult:Boolean(m)||a};if(s.dontCommitActions)return ie({environment:t,clearSelection:!0}),void(s.onAccept&&s.onAccept(g));await $().createAndCommitAsync({environment:t,userAction:"MoveToMenuRenderer.completeMoveTransaction",waitForServerCommit:!1,useSudoMode:o,perform:async e=>{await oe({...g,transaction:e}),s.onAccept&&s.onAccept(g)}})}async function oe(e){let{targets:t}=e;const{value:n,transaction:o,environment:i,shouldClearPagePermissions:s,disableSuccessToast:l,moveToContext:u,isDefaultPrivateLocation:g,renderType:_,timeToSelectMs:S,flowId:w,isSearchResult:k}=e,{currentSpaceStore:x}=I().default.state;if(!x)return;const C=await async function(e,t,n,o){let i=[];const r=p().$1(e);if(!r)return[];const s=(0,f().U)(r)??(0,h().Ib)(r,n);if(!s)return[];if(!s.collectionStore())return[];const l=s.currentSubitemFormatStoreForCollectionStore.state,c=s.normalizedSchemaStore.state,d=(null==l?void 0:l.inverse)&&c[l.inverse];if(!d||!(0,a().nC)(d))return[];if(!e.some((e=>(0,h().rt)({store:e,subitemFormat:l,propertySchema:d}).length>0)))return[];const u=(0,b().sZ)(t);if(u instanceof T().md||u instanceof T().Bv){if(await ce(u)instanceof T().md){const t=await N().zM({environment:n,blocks:e,options:{canEdit:!0},collectionContextStore:s});return i=t.result,"failed"===t.status?[]:i}}return[]}(t,n,i);t=[...t,...C],ie({environment:i,clearSelection:!0});const M=x.id,P=function(e){const{type:t}=e;switch(t){case"page":case"collection":case"space-private-pages":case"team":return e.spaceId;case"space":return e.id;default:(0,m().HB)(t)}}(n);if(P&&M!==P){if(!(await(0,b().P7)()))return}const R=t.find((e=>{const t=e.getType();return Boolean(t&&(0,r().$I)(t))})),E=R&&(0,y().Uo)(R),D=(0,A().jU)(t),L=Object.fromEntries(t.map((e=>[e.id,e.getParentPointer()]))),O=await ae({environment:i,value:n,targets:t,transaction:o,shouldClearPagePermissions:s});if(!O)return;const U=(0,b().nn)(n,i);F().Ce({environment:i,previousParentPointers:L,movedItems:t,moveToLocation:U,disableSuccessToast:l,numSubitems:C.length});const V=R&&(0,y().Uo)(R);B().Oy(i,{table:O.table,from:u,type:null==U?void 0:U.type,team_before:E&&(0,v()._d)(E),team_after:V&&(0,v()._d)(V),targets_database_type:D,destination_database_type:O.table===d().Vl?O.getDatabaseType():void 0,isDefaultPrivateLocation:g,render_type:_,time_to_select_ms:S,flowId:w,isSearchResult:k,subitemTreeSize:C.length>0?C.length:void 0}),O.table===c().ev&&await F().Ym(x,x.id,O.id)}function ie(e){const{environment:t,clearSelection:n}=e,o=A().Ay.state;A().Ay.setState({isOpen:!1,lastPageId:o.lastPageId}),n&&W().IU({environment:t}),o.isOpen&&"home_tab"===o.moveToContext&&H().navigateToHomeTab(t)}async function re(e){return le({...e,action:"add"})}async function ae(e){return le({...e,action:"move"})}async function se(e){return le({...e,action:"retain-alias"})}async function le(e){const{value:t,transaction:i,targets:r,shouldClearPagePermissions:a}=e,l=(0,b().sZ)(t),d=await G().$K({moveStores:r,moveTargetStore:l});if("user_cancelled_move"===d)return;let p;const f=r.at(0);f&&(p=(0,h().oC)(f)||(0,h().aR)(f,e.environment));const v=await async function(e){const{transaction:t,targets:i,value:r,environment:a,action:l}=e,{mainEditorCurrentBlockStore:d,currentSpaceStore:u,currentSpaceViewStore:p}=I().default.state,{id:f}=a.currentUser;if(!f||!p)return;const v=(0,b().sZ)(r);if(!v)return;let h;const{table:y}=v;switch(y){case"collection":case"block":h=await async function(e){const{environment:t,blockOrCollectionStore:n,targets:o,transaction:i,retainAliasInCurrentParent:r}=e,a=await ce(n);if(!a)throw new Error("Move to store invalid.");for(const s of o){const e=s.getParentStore();if(e instanceof T().Bv&&r){const n=P().s({environment:t,parentBlockStore:e,targetStore:s,transaction:i});j().NI({parentStore:e.getContentStore(),after:s.id,childStore:n,transaction:i})}if(a instanceof T().Bv)j().NI({parentStore:a,childStore:s,transaction:i});else if(a instanceof T().md){const e=(0,D().K)({environment:t,stores:[s],spaceId:a.getSpaceId(),transaction:i})[0];(0,E().j)({environment:t,store:e,collectionStore:a,shouldCoerce:!0,groupsPointer:[],transaction:i}),j().X$({parentStore:a,childStore:e,transaction:i})}}return a}({environment:a,blockOrCollectionStore:v,targets:i,transaction:t,retainAliasInCurrentParent:"retain-alias"===l});break;case"space":if("space-private-pages"===r.type&&v.id===(null==u?void 0:u.id))h=de({environment:a,spaceStore:v,spaceViewStore:p,targets:i,transaction:t,currentUserId:f,retainAliasToBlock:"retain-alias"===l});else{if(!d)return;h=await async function(e){const{environment:t,transaction:i,currentSpaceViewStore:r,currentBlockStore:a,currentUserId:l,spaceStore:d,targets:u,action:p,value:m}=e;if("space"!==m.type&&m.spaceId&&m.spaceId!==d.id)throw new Error("Wrong value to move to another space");(await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(5834)]).then(n.bind(n,375078))).maybeTurnCollectionViewIntoCollectionViewPage({environment:t,blocks:u,transaction:i});const f=a.getSpaceId()||d.id;let v;if("move"===p&&("space"!==m.type&&m.spaceId&&m.spaceId!==f||"space"===m.type&&m.id!==f||"space-private-pages"!==m.type)){U().m({message:Z.duplicatingContent,targetRecordId:d.id});const e=await K().rr({environment:t,blockStores:u,spaceId:d.id,targetParent:ue(m)});if(U().V(),void 0!==e.error)return void(e.error.data&&g().Rk(e.error.data)?g().yj({product:e.error.data.clientData.metadata.product}):L().f1(e.error.message));v=e.value}else"space-private-pages"===m.type&&de({environment:t,spaceStore:d,spaceViewStore:r,targets:u,transaction:i,currentUserId:l,retainAliasToBlock:"retain-alias"===p});await async function(e){const{environment:t,currentBlockStore:n,currentUserId:i,spaceStore:r,targets:a,crossSpaceTargetBlockId:l}=e,d=Boolean(a.find((e=>e.id===n.id))),u=(0,S().km)(r.id);if(!d||!u)return;const p=l?T().Bv.createChildStore(n,{table:c().ev,id:l}):n;await Q().Z({environment:t,spaceId:r.id,userId:i}),await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,blockStore:i}=e;n&&o&&(t.device.isMobileNative&&s().log({level:"info",from:"moveToMenuActions",type:"SpaceSwitchingDebug",data:{message:"moveToMenuActions.switchToSpace"}}),I().default.setState({...I().default.state,currentSpaceStore:n,currentSpaceViewStore:o,mainEditorCurrentBlockStore:i}),await O().fD(t))}({environment:t,spaceStore:r,spaceViewStore:u,blockStore:p}),V().Yf({environment:t,blocks:[p],pageVisitSource:o().y8.Move})}({environment:t,currentBlockStore:a,currentUserId:l,targets:u,spaceStore:d,crossSpaceTargetBlockId:v}),v&&q().D6({label:_().A.formatMessage(Z.duplicatedToSpace,{name:(0,b().T)({movedItems:u}),spaceName:d.getName()})});return d}({environment:a,transaction:t,currentSpaceViewStore:p,currentBlockStore:d,currentUserId:f,spaceStore:v,targets:i,value:r,action:l})}break;case"team":h=(await(0,w().U)())({environment:a,transaction:t,currentSpaceViewStore:p,teamStore:v,targets:i,value:r,action:l,location:{type:"append"}});break;default:(0,m().HB)(y)}"move"===l&&F().kl({environment:a,transaction:t,moveToStore:v,targetBlocks:i,from:"move_to"});return h}({...e});if(!v)return;if("space-private-pages"!==t.type)for(const{blockStore:n,permissions:o}of d)z().zv({store:n,data:{permissions:o},transaction:i});if(!a||l.table===u().NX&&"space-private-pages"===t.type||K().iz({blocks:r,transaction:i}),p&&v instanceof T().md&&f){let t=(0,h().vd)(v);if(!t){const n=new(x().A)(e.environment);if(n.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:v}),n){N().VI({transaction:i,collectionContextStore:n,environment:e.environment})&&(t=(0,h().vd)(v))}}p&&t&&N().fA({blocks:r,transaction:i,from:p.subitemFormat,to:{property:t.property,inverse:t.inverse},environment:e.environment})}return v}async function ce(e){let t;return await e.load(),t=e instanceof T().md?e:e.isLinkedCollectionView()?e.getCollectionViewSourceOrLinkCollectionStores()[0]:e.isCollectionView()?e.getCollectionStore():e,t}function de(e){let{environment:t,spaceStore:n,spaceViewStore:o,targets:i,currentUserId:r,transaction:a,retainAliasToBlock:s}=e;for(const l of i){const e=l.getParentStore();if($().applyOperation({store:l,operation:{command:"moveToPrivate",path:[],pointer:l.getSpaceShardedPointer(),args:{spaceViewPointer:o.getSpaceShardedPointer(),userId:r,removeFromParent:null==e?void 0:e.pointer}},transaction:a}),e instanceof T().Bv&&s){const n=P().s({environment:t,parentBlockStore:e,targetStore:l,transaction:a});j().NI({parentStore:e.getContentStore(),after:l.id,childStore:n,transaction:a})}}return n}function ue(e){const{type:t}=e;switch(t){case"space":case"space-private-pages":return;case"page":return e.spaceId?{id:e.id,table:"block",spaceId:e.spaceId}:void 0;case"collection":case"team":return e.spaceId?{id:e.id,table:t,spaceId:e.spaceId}:void 0;default:(0,m().HB)(t)}}},751086:(e,t,n)=>{n.d(t,{a:()=>p});n(944114),n(898992),n(354520);var o=()=>n(592269),i=()=>n(31503),r=()=>n(179034),a=()=>n(161479);const s=(0,n(583835).Dv)("renameGroup");var l=()=>n(751156),c=()=>n(630116),d=()=>n(357625),u=()=>n(394653);function p(e){const{environment:t,collectionStore:n,property:p,oldValue:m,newValue:g,preventPublishAppEventsForBlockUpdates:f,transaction:v}=e,h=n.getSchema(),_=t.currentUser.id;f||n.inMemoryRecordCache.forEachRecord(_,(e=>{var i;let{model:a}=e;if(a.table!==r().ev)return;const s=c().Bv.createChildStore(n,{table:r().ev,id:a.id});if(s.canEdit()&&(null===(i=s.getAssociatedCollectionStore())||void 0===i?void 0:i.id)===n.id){const e=o().Ic({block:a,schema:h,property:p,oldValue:m,newValue:g});(0,u().l)({environment:t,blockStore:s,properties:e,transaction:v})}})),function(e){const{collectionStore:t,property:n,oldValue:o,newValue:r,transaction:a}=e;if("select"!==r.type&&"multi_select"!==r.type||"select"!==o.type&&"multi_select"!==o.type)return;const s=t.getParentBlockStore();if(!s)return;const d=s.getCollectionViewStores();for(const m of d){var u,p;const e=[];if("form_editor"!==m.getType())continue;const t=m.getFormBlockStore();if(!t)continue;const s=t.getLayoutPointer();if(!s)continue;const d=c().K_.createChildStore(t,s),g=((null===(u=d.getRawModules())||void 0===u?void 0:u.form_layout_schema)||[]).filter((e=>"formQuestion"===e.type)),f=Object.values((null===(p=d.getRawModules())||void 0===p?void 0:p.form_conditional_modules)||{}).filter((e=>"formQuestion"===e.type));(0,i().Dk)({modules:g,area:"form_layout_schema",property:n,oldValue:o,newValue:r,formLayoutPointer:s,submitOperations:e}),(0,i().Dk)({modules:f,area:"form_conditional_modules",property:n,oldValue:o,newValue:r,formLayoutPointer:s,submitOperations:e});for(const n of e)l().applyOperation({store:d,operation:n,transaction:a})}}({collectionStore:n,property:p,oldValue:m,newValue:g,transaction:v}),n.isDefaultRecordCache()&&v.postSubmitCallbacks.push((async e=>{const o=n.pointer,{value:i}=await d().UT(t,s,{collection:{id:o.id,spaceId:(0,a().e)(o.spaceId)},property:p,oldValue:m,newValue:g}).next();if(i.error)throw i.error}))}},751156:(e,t,n)=>{n.r(t),n.d(t,{DEADLOCK_WARNING_TIMEOUT_MS:()=>_e,MetadataUpdateManager:()=>ye,applyCrdtTextOperation:()=>ke,applyCrdtTextOperations:()=>Ie,applyOperation:()=>we,createAndCommit:()=>Ee,createAndCommitAsync:()=>Ne,createAndCommitOrAppend:()=>Re,updateConnectionState:()=>be});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(803949),n(581454),n(737550);var o=()=>n(17022),i=()=>n(624919),r=()=>n(413468),a=()=>n(857639),s=()=>n(236162),l=()=>n(152565),c=()=>n(416845),d=()=>n(792071),u=()=>n(134025),p=()=>n(351028),m=()=>n(696706),g=()=>n(548632),f=()=>n(912720),v=()=>n(199378),h=()=>n(179034),_=()=>n(519831),b=()=>n(869558),y=()=>n(343666),S=()=>n(144081),w=()=>n(96689),k=()=>n(798880),I=()=>n(439180),x=()=>n(449412);var A=()=>n(220719),C=()=>n(496603),T=()=>n(502800),M=()=>n(534177),P=()=>n(720665),B=()=>n(780054),R=()=>n(701218),E=()=>n(901389),D=()=>n(886564),N=()=>n(508496);var L=()=>n(504836),O=()=>n(972435),U=()=>n(108944),F=()=>n(841696),V=()=>n(847463),j=()=>n(227440),z=()=>n(38789),H=()=>n(589994),W=()=>n(630116),q=()=>n(502438),K=()=>n(24157),G=()=>n(224701),$=()=>n(91913),Y=()=>n(426234),Q=()=>n(933449),Z=()=>n(41273),X=()=>n(495074);function J(e){const{transaction:t,inMemoryRecordCache:n,store:o,operation:i}=e,r=i.command;switch(r){case"insertText":case"deleteText":case"addAnnotation":case"removeAnnotation":case"splitText":const e=(0,Q().o9)(o.getBlockTitleTextSliceTree(),$().cf);return a=o,s=new oe(t,i),X().A.getPageStoreForBlockStore(a)||ie("source",a,s),function(e){const{inMemoryRecordCache:t,store:n,operation:o,textSliceTreeToMutate:i}=e,r=i.getTextValue(),a=o.command;switch(a){case"insertText":i.applyInsertTextOperation({type:a,...o.args});break;case"deleteText":i.applyDeleteOperation({type:a,...o.args});break;case"addAnnotation":case"removeAnnotation":i.applyAnnotationOperation({type:a,...o.args});break;case"splitText":i.applySplitOperation({type:a,...o.args});break;default:(0,M().HB)(a)}const s=ee({blockValueOrStore:n,role:ne(t,n),textSliceTree:i,originalTextValue:r});return[s]}({inMemoryRecordCache:n,textSliceTreeToMutate:e,store:o,operation:i});case"moveTextSlice":return te({transaction:t,inMemoryRecordCache:n,sourceStore:o,operation:i});case"moveTextSliceIntoBlock":return function(e){const{transaction:t,inMemoryRecordCache:n,sourceStore:o,operation:i}=e;(0,Q().MX)(i.args.targetBlockId!==i.pointer.id,"Target block should be different from source block.");const r=i.args.targetBlockId===o.id?o:new(W().Bv)(o.environment,{table:h().ev,id:i.args.targetBlockId}),a=(0,Q().o9)(r.getBlockTitleTextSliceTree(),$().cf).getTextSlice().textInstanceId;return te({transaction:t,inMemoryRecordCache:n,sourceStore:o,operation:{...i,command:"moveTextSlice",args:{...i.args,targetTextInstanceId:a,targetSearchLabel:Y().DI,targetTextSliceEndItemId:"end"}},debugInfo:new oe(t,i)})}({transaction:t,inMemoryRecordCache:n,sourceStore:o,operation:i});case"replaceTextInBlock":throw new Error("replaceTextInBlock operation should not be applied on the client");default:(0,M().HB)(r)}var a,s}function ee(e){const{blockValueOrStore:t,textSliceTree:n,role:o,originalTextValue:i}=e,r=t instanceof W().Bv?(0,Q().o9)(t.getValue(),$().v6):t,a=C().mg(r);return Z().B4({blockValue:a,textSliceTree:n,originalTextValue:i}),{pointer:{table:h().ev,id:a.id,spaceId:a.space_id},newValue:a,role:o,updatePaths:[["crdt_data","title"],["properties","title"],["crdt_format_version"],["discussions"]]}}function te(e){const{transaction:t,inMemoryRecordCache:n,sourceStore:o,operation:i,debugInfo:r}=e,a=(0,Q().o9)(o.getValue(),$().v6),s=ne(n,o),l=(0,Q().o9)(o.getBlockTitleTextSliceTree(),$().cf),c=i.args.targetBlockId===o.id?o:new(W().Bv)(o.environment,{table:h().ev,id:i.args.targetBlockId});return function(e,t,n){const o=X().A.getPageStoreForBlockStore(e);if(!o)return void ie("source",e,n);const i=X().A.getPageBlockTrackerForPage(o.pointer),r=null==i?void 0:i.getPathToBlock(t.pointer.id);r||ie("target",t,n)}(o,c,r??new oe(t,i)),function(e){const{transaction:t,inMemoryRecordCache:n,sourceRole:o,sourceValue:i,sourceRootTextSliceTree:r,targetStore:a,operation:s}=e,l=(0,Q().o9)(r.findTextSliceTreeContainingItemWithId(s.args.textInstanceId,s.args.textSliceStartItemId),$().Dp);(0,Q().MX)(l!==r,"Can not move root node of text slice tree.");const c=r.getTextValue();!function(e,t){const n=t.getRecordStoreAtRootPath().getValue(),o=t.getRecordStoreAtRootPath().getRole(),i=e.initialRecordMap.getRole(t.pointer);i||(o?e.initialRecordMap.setValueAndRole(t.pointer,n,o):e.initialRecordMap.delete(t.pointer))}(t,a);const d=s.args.targetBlockId===i.id,u=d?r:(0,Q().o9)(a.getBlockTitleTextSliceTree(),$().cf),p=(0,Q().o9)(u.findTextSliceTreeContainingItemWithId(s.args.targetTextInstanceId,s.args.targetTextSliceEndItemId,{type:"end"}),$().Dp),m=d?c:u.getTextValue();l.detachFromParent(),p.appendChild(l);const g=ee({blockValueOrStore:i,role:o,textSliceTree:r,originalTextValue:c}),f=[g];if(!d){const e=ee({blockValueOrStore:a,role:ne(n,a),textSliceTree:u,originalTextValue:m});f.push(e)}return f}({transaction:t,inMemoryRecordCache:n,sourceValue:a,sourceRole:s,sourceRootTextSliceTree:l,targetStore:c,operation:i})}function ne(e,t){return e.getRole({pointer:t.pointer,userId:t.userId})??"editor"}class oe{constructor(e,t){this.transaction=e,this.operation=t}get(){return{transactionName:this.transaction.getUserActionForAnalyticsPurposesOnly(),operationName:this.operation.command}}}function ie(e,t,n){const{transactionName:o,operationName:r}=n.get();(0,i().NK)(`The ${e} block store for CRDT text operation "${r}" in transaction "${o}" is not on the page. Undoing the transaction may not work!`,[["block id =",t.id]])}var re=()=>n(679156),ae=()=>n(541258),se=()=>n(323316),le=()=>n(813690),ce=()=>n(388821),de=()=>n(56125);var ue=()=>n(666144),pe=()=>n(495262);const me={updateSyncedCollectionActions:new(n(645873).O2)("updateSyncedCollectionActions",(async()=>n.e(70522).then(n.bind(n,748768))))};let ge;const fe=new Set;let ve=0;const he=(0,n(959013).YK)({invalidBlockOperation:{defaultMessage:"Hey there! Blocks cannot be moved inside of themselves.",id:"saveChanges.errorDialog.blocksCannotBeMovedInsideSelf.message"},saveEditsError:{id:"saveEditsError.message",defaultMessage:"There was an issue persisting your edits. Please message us for help."}}),_e=25*P().TD;function be(e){j().A.state.online&&e.currentUser.id&&H().transactionQueue.unpause()}class ye{constructor(e){this.transaction=void 0,this.timeMs=void 0,this.userId=void 0,this.skipUpdatingEditedMetadata=void 0,this.seenStoreIds=void 0,this.operations=void 0,this.transaction=e.transaction,this.timeMs=e.timeMs,this.userId=e.userId,this.skipUpdatingEditedMetadata=e.skipUpdatingEditedMetadata,this.seenStoreIds=new Set,this.operations=new Map}addStoreWithLargeSubtree(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!0})}addStore(e){this.addStoreInternal(e,{shouldDebounceEditedTime:!1})}getAllOperations(){return Array.from(this.operations.entries())}addStoreInternal(e,t){if(e.inMemoryRecordCache.recordHasOverride({pointer:e.pointer,userId:this.transaction.userId}))return;if(this.seenStoreIds.has(e.id))return;this.seenStoreIds.add(e.id);const n={};C().h1(n,this.collectCreationMetadata(e),this.skipUpdatingEditedMetadata?{}:this.collectEditionMetadata(e,t.shouldDebounceEditedTime)),Object.keys(n).length>0&&this.operations.set(e,{pointer:e.pointer,path:[],command:"update",args:n})}collectCreationMetadata(e){const t={};(e.isDefined()?e.getCreatedById():void 0)||(t.created_by_id=this.userId,t.created_by_table=k().oo);return(e.isDefined()?e.getCreatedTime():void 0)||(t.created_time=this.timeMs),t}collectEditionMetadata(e,t){const n={},o=e.isDefined()?e.getLastEditedTime():-1,i=t?this.hasDebounceEnded(o,this.timeMs):o!==this.timeMs;if(i&&(n.last_edited_time=this.timeMs),e instanceof W().Bv||e instanceof W().SL||e instanceof W().dn||e instanceof W().K_||e instanceof W().nH){const t=n;((e.isDefined()?e.getLastEditedById():void 0)!==this.userId||i)&&(t.last_edited_by_id=this.userId,t.last_edited_by_table=k().oo)}return n}hasDebounceEnded(e,t){return P().WY(e)!==P().WY(t)}}function Se(e){var t,n;const{environment:o,userId:r,userAction:s,cellTarget:l,isUndoTransaction:c,isTemplateInstantiationTransaction:d}=e,u=l&&N().default.checkGate({gateName:"transaction-space-id-override"})?"main"===l||null==l?void 0:l.spaceWithId:ae().LU(),p=new Error("Potential transaction deadlock"),m=new(F().Z)({spaceId:u,userId:r||o.currentUser.id,deadlockTimeoutMs:_e,onDeadlockWarning:()=>{fe.delete(m);const e=m.getUserActionForAnalyticsPurposesOnly();(0,i().NK)(`A ${e} transaction hasn't been committed in ${_e} ms.`,[["stack =",p.stack]]),x().Fg(p,{extra:{operations_count:m.operations.length},tags:{userAction:e}}),re().JV(o,{operations_count:m.operations.length,user_action:e});const t=m.operations.map((e=>({command:e.command,stringifiedArgs:(0,T().WS)({path:e.path,pointer:e.pointer})})));a().log({level:"warning",from:"transactionActions",type:"transactionDeadlockWarning",data:{userAction:e,operations:t}})},debugLogging:{logToConsole:D().A.isDebuggingEnabled(),collect:!1},isUndoTransaction:c,isTemplateInstantiationTransaction:d});return null!==(t=m.debugLogging)&&void 0!==t&&t.collect&&m.postEnqueueActions.push((()=>{const e=m.getDebugLog();0===e.length||m.isLocal||a().log({level:"info",from:"transactionActions",type:"transactionDebugLog",data:{transactionId:m.id,userAction:m.getUserActionForAnalyticsPurposesOnly(),userFlow:m.getUserFlowForAnalyticsPurposesOnly(),miscDataToConvertToString:e}})})),m.beforeSelection=q().default.cloneState(),m.beforeTextSelection=K().default.cloneState(),m.annotateWithUserAction(s),fe.add(m),null===(n=D().A.provider)||void 0===n||n.onTransactionEvent("create",m),m}function we(e){const{store:t,operation:n,transaction:o}=e,{inMemoryRecordCache:i}=t;if((0,u().mP)(n)){const r=(0,l().cQ)(n,i.makeGetRecordValueFn(o.userId)),a=(0,l().d4)(n,i.makeGetRecordValueFn(o.userId),i.makeGetRecordModelFn(o.userId));for(const o of a)n.additionalUpdatedPointers||(n.additionalUpdatedPointers=[]),n.additionalUpdatedPointers.push(o.pointer),Ae({...e,operation:o,isInvertible:!1,store:(0,W().Oo)(t,o.pointer)});return o.operations.push(n),void o.invertedOperations.push(...r)}(0,u().$Y)(n)?Ae({store:t,operation:n,transaction:o,isInvertible:!0}):(0,M().HB)(n)}function ke(e){const{store:t,operation:n,invertedOperation:o,transaction:i}=e;Ie({store:t,operations:[n],invertedOperations:o?[o]:[],transaction:i})}function Ie(e){var t;const{store:n,operations:o,transaction:i}=e;i.invertedOperations.push(...e.invertedOperations),null===(t=D().A.provider)||void 0===t||t.rememberStackTrace(e.invertedOperations);for(const r of o)Ae({store:n,operation:r,transaction:i,isInvertible:!0})}const xe="editor";function Ae(e){var t;const{store:n,operation:o,transaction:i}=e,{inMemoryRecordCache:r,environment:a,pointer:l,userId:c}=n;if(r.assertUnexpired(),i.annotateWithOperation(o.command),null===(t=D().A.provider)||void 0===t||t.onApplyOperation(e),i.committed)throw new Error("Transaction has already been committed.");const u=n.getRecordStoreAtRootPath().getValue(),m=n.getRecordStoreAtRootPath().getRole(),g=(0,I().ph)(o)?[]:e.isInvertible?[p().invertOperation(o,u)].filter(M().O9):[];let f;if(i.initialRecordMap.getRole(l)||(m?i.initialRecordMap.setValueAndRole(l,u,m):i.initialRecordMap.delete(l)),(0,I().ph)(o))f=J({transaction:i,inMemoryRecordCache:r,store:(0,A().oC)(n,W().Bv,`Expected "${W().Bv.keyName}", got "${n.table}"`),operation:o});else{!function(e,t){if(!R().mZ||e.pointer.table!==h().ev)return;const n=t.getUserActionForAnalyticsPurposesOnly();if(null==n||!n.startsWith("revisionActions"))switch(e.command){case"set":if(0===e.path.length)o({operation:e,message:"a new block was not created in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.createBlock().",successMessage:"Block created in a CRDT-aware way (this is good)."});else if(C().n4(e.path,["properties","title"]))o({operation:e,message:"a title update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as textActions.setValue().",successMessage:"Title update performed in a CRDT-aware way (this is good)."});else if(C().n4(e.path,["properties"])||C().n4(e.path,["format"])){const[t]=e.path;o({operation:e,message:`a ${t} update was not performed in a CRDT-aware way!`,advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}break;case"update":0===e.path.length&&C().Gv(e.args)&&"properties"in e.args||C().n4(e.path,["properties"])&&C().Gv(e.args)&&"title"in e.args?o({operation:e,message:"a properties update was not performed in a CRDT-aware way!",advice:"Please use textActions.setValue() to set the title separately from the rest of the properties."}):(0===e.path.length&&C().Gv(e.args)&&"format"in e.args||C().n4(e.path,["format"])&&C().Gv(e.args)&&("use_crdt"in e.args||"text_slice_tree"in e.args||"text_clocks"in e.args))&&o({operation:e,message:"a format update was not performed in a CRDT-aware way!",advice:"Please use a CRDT-aware function instead, such as recordActions.updateValue()."})}function o(e){const{operation:t,message:o,advice:i,successMessage:r}=e;if((0,R().vO)(t.args))D().A.isDebuggingEnabled()&&"string"==typeof r&&console.log(r);else{N().default.checkGate({gateName:"show_crdt_warnings"});const e={command:t.command,pointer:t.pointer,path:t.path};x().Fg(new Error(o),{tags:{userAction:n,warningType:"possiblyCrdtUnawareOperation"},extra:{operation:e}})}}}(o,i);const e=p().performPrimitiveOperation(o,u),t=r.getRole({pointer:l,userId:c});!u&&(0,M().Xk)(F().T,l.table)&&n instanceof W().WE[l.table]&&i.newlyCreatedStoresForPermissionInference.set(l,{store:n,inferredPermissionFromParent:void 0});const a="update"===o.command?Object.keys(o.args).map((e=>o.path.concat([e]))):[o.path];f=[{pointer:l,newValue:e,role:t??xe,updatePaths:a}]}for(const p of f){const{pointer:e,newValue:t,role:o,updatePaths:l}=p;if(ue().PC({environment:a,inMemoryRecordCache:r,pointer:e,userId:c,force:!0,model:d().Bj6.fromValue(n.pointer.table,t),role:o,updatePaths:l,debugSource:i.getUserActionForAnalyticsPurposesOnly()??"applyOperation"}),"block"===n.table){const e=t;if(e){const t=(0,s().zN)({block:e,getRecordValue:r.makeGetRecordValueFn(i.userId)});t&&z().A.setEditedBlock(t.id,e.id)}0}}i.isLocal=!n.shouldCacheSaveTransactions(),i.isLocal&&r.onOperationCallback&&r.onOperationCallback({operation:o,store:n}),e.isInvertible&&(i.operations.push(o),i.invertedOperations.push(...g)),i.stores.push(n),i.annotateWithOperation(void 0),r.appliedTransaction=!0}const Ce=[{type:"userAction",allowedUserAction:"revisionActions.undoRevision"},{type:"userAction",allowedUserAction:"revisionActions.redoRevision"}];function Te(e){var t;null===(t=D().A.provider)||void 0===t||t.onTransactionEvent("cancel",e),e.cancelDeadlockWarning(),fe.delete(e);const n=C().hS(e.stores,(e=>e.id));for(const o of n){ue().oX({inMemoryRecordCache:o.inMemoryRecordCache,persistedRecordCache:o.environment.defaultRecordCache.persistedRecordCache,pointer:o.pointer,userId:o.userId,environment:o.environment});const t=e.initialRecordMap.getValue(o.pointer),n=e.initialRecordMap.getRole(o.pointer);n&&ue().PC({environment:o.environment,inMemoryRecordCache:o.inMemoryRecordCache,pointer:o.pointer,userId:o.userId,updatePaths:[[]],model:d().Bj6.fromValue(o.pointer.table,t),role:n,debugSource:"cancelTransaction"})}for(const o of e.postCancelCallbacks)o()}const Me=C().nF(((e,t)=>{re().Ip(e,{errorType:t.type||t.name}),t.type===n(141032).yE?E().tW(t.message):E().tW(O().A.formatMessage(he.saveEditsError))}),3e4);function Pe(e){const t="paste"===e.transaction.getUserActionForAnalyticsPurposesOnly()?new Error("SaveTransactionCallStack"):void 0;return new Promise((async(n,o)=>{var i,s;fe.delete(e.transaction);const l=Array.from(fe).filter((e=>e.operations.length>0));var c,u;if(l.length>0&&re().JW(e.environment,{committed_transaction_user_action:e.transaction.getUserActionForAnalyticsPurposesOnly(),first_uncommitted_transaction_user_action:l[0].getUserActionForAnalyticsPurposesOnly(),uncommitted_transaction_count:l.length}),0===e.transaction.operations.length)return null===(c=H().transactionQueue.logEmptyTaskForDebugging)||void 0===c||c.call(H().transactionQueue,e.transaction.getUserActionForAnalyticsPurposesOnly()),e.transaction.committed=!0,e.transaction.done(),null===(u=D().A.provider)||void 0===u||u.onTransactionEvent("commitEmpty",e.transaction),n(void 0);void 0===e.canUndo&&(e.canUndo=!0);const{transaction:p,canUndo:I}=e,A=function(e){for(const t of e.stores)if("block"===t.table){const e=U().KA(t);if(e&&U().g7(e).find((e=>e.table===t.table&&e.id===t.id)))return O().A.formatMessage(he.invalidBlockOperation)}}(p);if(A)return Te(p),E().f1(A),void n(void 0);null===(i=ge)||void 0===i||i(e.environment,p),p.cancelDeadlockWarning();for(const e of p.preEnqueueActions)e();if(function(e){const{environment:t,transaction:n,skipUpdatingEditedMetadata:o}=e,i=t.currentUser.adminUserId?k().mc.id:t.currentUser.id,a=new ye({transaction:n,userId:i,skipUpdatingEditedMetadata:o,timeMs:Date.now()}),s=C().hS(n.stores,(e=>e.id));for(const l of s)if(l.table===h().ev){const e=W().Bv.createChildStore(l,l.pointer);if(e.canEdit()&&a.addStore(e),!e.isNavigableBlock()){const t=U().Nq(e);t&&t.canEdit()&&a.addStoreWithLargeSubtree(t)}}else if(l.table===y().SN){if(l.path.length)continue;const e=l.pointer,t=n.initialRecordMap.getValue(e),o=l.getValue();(void 0===t||r().k(d().Bj6.fromValue(y().SN,t),d().Bj6.fromValue(y().SN,o)))&&a.addStore(W().jg.createChildStore(l,l.pointer))}else if(l.table===w().NX)a.addStoreWithLargeSubtree(W().SL.createChildStore(l,l.pointer));else if(l.table===_().Vl){const e=W().md.createChildStore(l,l.pointer).getParentBlockStore();e&&e.canEdit()&&a.addStore(e)}else if(l.table===b().Gy){const e=W().pS.createChildStore(l,l.pointer);e.canAdmin()&&a.addStore(e);const t=e.getParentBlockStore();t&&t.canEdit()&&a.addStoreWithLargeSubtree(t)}else if(l.table===f().yB){if(l.canEdit()){const e=W().dn.createChildStore(l,l.pointer);a.addStore(e);const t=e.getParentBlockStore();t&&t.canEdit()&&a.addStore(t)}}else if(l.table===v().SC){if(l.canEdit()){const e=W().bx.createChildStore(l,l.pointer).getParentStore();e&&e.canEdit()&&a.addStore(e)}}else if(l.table===S().zx){if(l.canEdit()){const e=W().K_.createChildStore(l,l.pointer);a.addStore(e)}}else if(l.table===g().YV&&l.canEdit()){const e=W().nH.createChildStore(l,l.pointer);a.addStore(e)}a.getAllOperations().forEach((e=>{let[t,o]=e;return we({transaction:n,store:t,operation:o})}))}({environment:e.environment,transaction:p,skipUpdatingEditedMetadata:e.skipUpdatingEditedMetadata}),function(e,t){const n=t.operations.filter((e=>e.pointer.table===b().Gy));n.length>0&&m().L3.uniq(n.map((e=>e.pointer))).map((e=>t.initialRecordMap.getRole(e))).includes(void 0)&&t.postSubmitCallbacks.push((()=>{G().Ow(e)}))}(e.environment,p),p.afterSelection=q().default.cloneState(),p.afterTextSelection=K().default.cloneState(),I&&pe().Fn({transaction:p,undoCheckpoint:e.undoCheckpoint}),null===(s=D().A.provider)||void 0===s||s.onTransactionEvent("commit",p),(0,L().CS)())try{const t=await me.updateSyncedCollectionActions.load();await t.updateSyncedData({transaction:p,environment:e.environment})}catch{return void Te(p)}if(p.isLocal){for(const e of p.postEnqueueActions)e();p.done(),n(void 0)}else{const i=(e,i)=>{p.done(e),i&&x().Om(t,{tags:{transactionId:p.id}}),e?o(e):n(void 0)},{LocalBacklinkStore:r,currentUser:s}=e.environment;r&&async function(e,t){const{LocalBacklinkStore:n,currentUser:o}=e;if(0===t.stores.length)return;const i=t.stores[0].inMemoryRecordCache,r=[],a=ce().RecordMap.create(),s=new Set;for(const d of t.stores)s.has(d.id)||(s.add(d.id),r.push(d.pointer),a.setValue(d.pointer,d.getRecordStoreAtRootPath().getValue()));const l=de().En(t.initialRecordMap),{createdBacklinks:c,deletedBacklinks:u}=await(0,se().JT)({loadRecordValue:le().ho.fromGetRecordValueFn(i.makeGetRecordValueFn(o.id)),operationPointers:r,getInitialRecordModel:d().b4_.fromRecordMap(l),getFinalRecordModel:d().b4_.fromRecordMap(a)}),p=n.updateBacklinks({createdBacklinks:c,deletedBacklinks:u,currentUserId:o.id});t.postSubmitCallbacks.push((e=>{e&&n.resetBacklinkState({blockIds:p,currentUserId:o.id})}))}({LocalBacklinkStore:r,currentUser:s},p);const l=Date.now();l<ve&&re().hQ(e.environment,{regression_amount:ve-l}),ve=l,H().transactionQueue.enqueueTask((0,V().Sk)({transaction:p,timestamp:l,callback:i})).catch((t=>{a().log({level:"error",from:"transactionActions",type:"enqueueTask",error:(0,T().convertErrorToLog)(t)}),e.environment.device.isMobileNative&&"SqliteOutOfSpace"===t.name||Me(e.environment,t),Te(p),i(t)}));for(const e of p.postEnqueueActions)e()}const M=p.userId;for(const[e,t]of p.newlyCreatedStoresForPermissionInference.entries()){const{store:n}=t,o=n.inMemoryRecordCache.getRole({pointer:e,userId:p.userId}),i=Be({transaction:p,store:n});i!==o&&n.inMemoryRecordCache.setModelAndRole({pointer:e,userId:M},n.getModel(),i)}p.committed=!0}))}function Be(e){const{transaction:t,store:n}=e,{pointer:o}=n,i=n.inMemoryRecordCache.getRole({pointer:o,userId:t.userId});if(i&&i!==xe)return i;const r=t.newlyCreatedStoresForPermissionInference.get(o);if(!r)return xe;if(r.inferredPermissionFromParent)return r.inferredPermissionFromParent;const a=n.getParentStore();if(!a||a.table!==h().ev||!a.isReady())return xe;const s=Be({store:a,transaction:t});return r.inferredPermissionFromParent=s,s}function Re(e){const{transaction:t,...n}=e;return t?n.perform(t):Ee(n).performResult}function Ee(e){const{userAction:t,environment:n,userId:i,perform:r,canUndo:a,undoCheckpoint:s,transactionTooBigFallback:l,skipUpdatingEditedMetadata:d,skipDefaultPostPerformValidationChecks:u,useSudoMode:p,cellTarget:m,isUndoTransaction:g,isTemplateInstantiationTransaction:f}=e;return o().A.withListenerIgnored((()=>{const o=Se({environment:n,userId:i,userAction:t,cellTarget:m,isUndoTransaction:g,isTemplateInstantiationTransaction:f});let v;p&&(o.useSudoMode=!0);try{v=r(o),u||function(e){if(e.isLocal)return;for(const t of e.stores){const n=t.inMemoryRecordCache.checkRecordForTemporaryData(t);if(n)throw new(c().yI4)(`Server-bound transaction "${e.getUserActionForAnalyticsPurposesOnly()}" is manipulating a store with temporary local changes from an in-memory record cache named "${n.name}"!`)}}(o);for(const e of o.postPerformAssertions)e()}catch(h){throw Te(o),De({transaction:o,type:"createAndCommit",error:h}),h}finally{0}if(l&&(0,V().vY)(o))return Te(o),Ee({...e,perform:l,transactionTooBigFallback:void 0,userAction:`${t} transactionTooBigFallback`});return{performResult:v,serverCommitResult:Pe({environment:n,transaction:o,canUndo:a,undoCheckpoint:s,skipUpdatingEditedMetadata:d,isUndoTransaction:g,isTemplateInstantiationTransaction:f}).catch((e=>{throw De({transaction:o,type:"commit",error:e}),e}))}}))}function De(e){const{transaction:t,type:n,error:o}=e,i=t.getUserActionForAnalyticsPurposesOnly(),r=t.getUserFlowForAnalyticsPurposesOnly(),s=t.getOperationForAnalyticsPurposesOnly(),l=t.getDebugTagsForAnalyticsPurposesOnly(),c=l&&function(e){const t={};return e.forEach((e=>t[e]=!0)),t}(l),d=x().Fg(o,{tags:{userAction:i,userFlow:r,operation:s,...c}});a().log({level:"error",from:"transactionActions",type:n,error:(0,T().convertErrorToLog)(o),data:{userAction:i,userFlow:r,debugTags:l,spaceId:t.spaceId,transactionId:t.id,miscDataToConvertToString:{transactionDebugLog:t.getDebugLog()}},sentryEventId:d});const u=`A ${i} transaction with id ${t.id} threw an exception!`;B().A.isLocalhost?(console.group(u),console.error(o),console.log(t),D().A.provider||console.log("Consider using __console.toggleTransactionDebugging() and re-running this transaction for better logging."),console.groupEnd()):console.log(u)}async function Ne(e){const{environment:t,perform:n,waitForServerCommit:o,userAction:i,userId:r,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c,useSudoMode:d,isUndoTransaction:u,isTemplateInstantiationTransaction:p}=e,m=Se({environment:t,userId:r,userAction:i,isUndoTransaction:u,isTemplateInstantiationTransaction:p});let g;d&&(m.useSudoMode=!0);try{g=await n(m);for(const e of m.postPerformAssertions)e()}catch(v){m.cancelDeadlockWarning();const t=m.getUserActionForAnalyticsPurposesOnly(),n=m.getOperationForAnalyticsPurposesOnly();fe.delete(m);const o=m.operations.length>0;throw o&&re().NX(e.environment,{user_action:t,operation_count:m.operations.length}),x().Fg(v,{tags:{userAction:t,operation:n,transactionOperationCount:m.operations.length}}),a().log({level:"error",from:"transactionActions",type:"createAndCommitAsync",error:(0,T().convertErrorToLog)(v),data:{message:o?`POSSIBLE DATA LOSS: asynchronous transaction had ${m.operations.length} operations`:void 0,userAction:t}}),v}const f=Pe({environment:t,transaction:m,canUndo:s,undoCheckpoint:l,skipUpdatingEditedMetadata:c});return o&&await f,{performResult:g,serverCommitResult:f}}},751380:(e,t,n)=>{n.d(t,{Ay:()=>_,PO:()=>h,dJ:()=>u,ip:()=>v,nB:()=>m,oQ:()=>g,tK:()=>p});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454),n(908872),n(737550);var o=n(296540),i=()=>n(401497),r=()=>n(245241),a=()=>n(496603),s=()=>n(284371),l=()=>n(720665);function c(e){const t=[];let n=!1,o=e;for(;""!==o;){const e=n?r()._x:r().$8,i=o.indexOf(e);if(-1===i)return t.push(d(o,!1)),t;const a=o.substring(0,i),s=o.slice(i+e.length);""!==a&&t.push(d(a,n)),o=s,n=!n}return t}function d(e,t){return t?[e,"highlight"]:[e]}function u(e){return 2===e.length&&"highlight"===e[1]}function p(e){return e[0]}function m(e){return e.reduce(((e,t)=>{if(0===e.length)return[t];const n=e[e.length-1];return u(n)===u(t)?[...e.slice(0,e.length-1),d(p(n)+p(t),u(t))]:[...e,t]}),[])}function g(e){if(!e)return[];let t=c(e);t.some((e=>u(e)&&1===p(e).length))&&(t=m(t));const n=t.filter(u).map(p);return a().sb(n)}function f(e){const{text:t,patterns:n,uniqueTokenHighlighterContext:o}=e,i=a().sb(n.filter((e=>e.length>0)));if(0===i.length)return[d(t,!1)];const r=a().Ul(i,(e=>-e.length)).map(a().Nt);return function(e,t,n){const o=(0,l().w$)(t,e);if(0===o.length)return[d(e,!1)];let i=0;const r=[];for(let a=0;a<o.length;a++){const t=o[a];if(!t)continue;let s;void 0===n||!n.has(t[0].toLowerCase())?(void 0!==n&&n.add(t[0].toLowerCase()),i!==t.index&&r.push(d(e.slice(i,t.index),!1)),r.push(d(t[0],!0)),s=t.index+t[0].length):s=i;o[a+1]||s===e.length||r.push(d(e.slice(s),!1)),i=s}return r}(t,new RegExp(r.join("|"),"ig"),o)}function v(e){let{text:t,shouldHighlight:n,styleOverride:r}=e;const a=c(t),l=(0,i().IS)((e=>({highlight:{fontWeight:s().Wy.medium,color:e.text.primary,...r}})),[r]);return(0,o.useMemo)((()=>{if(0===t.length)return;return{tokenize:e=>m(a),style:n?l.highlight:{}}}),[t,a,l.highlight,n])}function h(e){let{words:t,removeDuplicate:n,styleOverride:r}=e;const a=(0,i().IS)((e=>({highlight:{fontWeight:s().Wy.medium,color:e.text.primary,...r}})),[r]);return(0,o.useMemo)((()=>{if(0===t.length)return;const e=n?new Set:void 0;return{tokenize:n=>f({text:n,patterns:t,uniqueTokenHighlighterContext:e}),style:a.highlight}}),[t,n,a.highlight])}const _=c},752196:(e,t,n)=>{n.d(t,{A:()=>o});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);const o=class{constructor(){this.listeners={}}addListener(e,t){let n=this.listeners[e];n||(n=new Set,this.listeners[e]=n),n.add(t)}addOnceListener(e,t){var n=this;const o=function(){n.removeListener(e,o),t(...arguments)};this.addListener(e,o)}removeListener(e,t){const n=this.listeners[e];n&&(n.delete(t),0===n.size&&delete this.listeners[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const i=this.listeners[e];i&&i.forEach((e=>e(...n)))}listenerCount(e){const t=this.listeners[e];return t?t.size:0}}},752885:(e,t,n)=>{n.d(t,{p:()=>o});class o{constructor(e){this.memo=new WeakMap,this.debugName=void 0,this.hits=0,this.misses=0,this.getStateFor=e=>this.computeMemo(e),this.computeMemo=e=>{let t=this.memo.get(e);return t?this.hits++:(this.misses++,t=new(n(496506).default)((()=>this.options.compute(e,this.options.memoizeRecursion?this.computeMemo:this.computeNonMemo)),{debugName:this.debugName}),this.memo.set(e,t)),t.getState()},this.computeNonMemo=e=>this.options.compute(e,this.computeNonMemo),this.options=e,this.debugName=`RecursiveComputedStore.${e.debugName}`,(0,n(604341).exposeDebugInstance)(this.debugName,this)}}},753004:(e,t,n)=>{n.d(t,{q:()=>o});const o=n(296540).createContext(!1);o.displayName="AnimatingOutContext"},753035:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},753199:(e,t,n)=>{n.d(t,{SQ:()=>r,kV:()=>l,s7:()=>a,tr:()=>s,y$:()=>o});let o=function(e){return e[e.ButtonMouseDown=0]="ButtonMouseDown",e[e.EditorMouseDown=1]="EditorMouseDown",e[e.EditorMouseUp=2]="EditorMouseUp",e[e.EditorClick=3]="EditorClick",e[e.MenuListClick=4]="MenuListClick",e[e.EditorContextMenu=5]="EditorContextMenu",e[e.EditorMouseOver=6]="EditorMouseOver",e[e.EditorHoverMouseMove=7]="EditorHoverMouseMove",e[e.EditorDropMouseMove=8]="EditorDropMouseMove",e[e.EditorDoubleClick=9]="EditorDoubleClick",e[e.SidebarMouseMove=10]="SidebarMouseMove",e[e.ManageTeamsRowClick=11]="ManageTeamsRowClick",e[e.MobileTap=12]="MobileTap",e[e.CollectionSettingsClick=13]="CollectionSettingsClick",e[e.BaseTableRowClick=14]="BaseTableRowClick",e[e.NotificationClick=15]="NotificationClick",e[e.CollectionAutomationSettingsClick=16]="CollectionAutomationSettingsClick",e[e.PageTitleClick=17]="PageTitleClick",e[e.AssistantGroupedEditClick=18]="AssistantGroupedEditClick",e[e.PermissionItemClick=19]="PermissionItemClick",e[e.ToggleTrustedDomainPermission=20]="ToggleTrustedDomainPermission",e[e.PerformanceToolbarMouseMove=21]="PerformanceToolbarMouseMove",e[e.CopyToClipboard=22]="CopyToClipboard",e[e.EditorEsc=23]="EditorEsc",e}({});const i={};function r(e){const t=i[e.context],n=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==n){var o;i[e.context]=new WeakRef(n);"unhandled"===(null===(o=e.callback)||void 0===o?void 0:o.call(e))&&(i[e.context]=t)}}async function a(e){const t=i[e.context],n=e.event.nativeEvent||e.event;if((null==t?void 0:t.deref())!==n){var o;i[e.context]=new WeakRef(n);"unhandled"===await(null===(o=e.callback)||void 0===o?void 0:o.call(e))&&(i[e.context]=t)}}function s(e){r({event:e,context:o.EditorMouseDown,callback:()=>{}})}function l(e){r({event:e,context:o.EditorClick,callback:()=>{}})}},753476:(e,t,n)=>{n.d(t,{e:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("thinCheckboxCircleDark",{viewBox:"0 0 22 23",svg:(0,o.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#5A5A5A",strokeWidth:"1"})})},753514:(e,t,n)=>{n.d(t,{HZ:()=>Ne,Hw:()=>De,aH:()=>Ee,lc:()=>O});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(803949),n(581454),n(737550),n(814603),n(147566),n(198721);var o=()=>n(188835),i=n.n(n(43371)),r=()=>n(244641),a=()=>n(319625),s=()=>n(496603),l=()=>n(498212),c=()=>n(700500),d=()=>n(970013),u=()=>n(713998),p=()=>n(258035),m=()=>n(604995),g=()=>n(304740),f=()=>n(634201),v=()=>n(617871),h=()=>n(522419),_=()=>n(857639),b=()=>n(513416),y=()=>n(792071),S=()=>n(134025),w=()=>n(335098),k=()=>n(179034),I=()=>n(519831),x=()=>n(343666),A=()=>n(197959),C=()=>n(798880),T=()=>n(919709);const M={CommentAuthor:"cma",CommentDiscussionId:"cmm"},P={a:!0,strong:!0,em:!0,code:!0,del:!0,s:!0,span:!0,time:!0},B={meta:!0,style:!0,script:!0,head:!0,title:!0},R="sourceCode",E=700,D=400,N=1e5;function L(e){if(!e)return;const t=parseInt(e);return isNaN(t)?void 0:t}const O={[T().Ifu.Page]:"data-notion-page-id",spaceId:"data-notion-space-id",[T().Ifu.Highlight]:"data-notion-highlight",[T().Ifu.User]:"data-notion-user-id",[T().Ifu.Discussion]:"data-notion-block-discussion-id",[T().Ifu.Equation]:"data-notion-inline-equation",[T().Ifu.Comment]:"data-notion-block-comment-id",[M.CommentAuthor]:"data-notion-block-comment-author-id",[M.CommentDiscussionId]:"data-notion-block-comment-discussion-id",[c().xd.code]:"data-notion-code-syntax",[c().xd.callout]:"data-notion-callout",calloutIcon:"data-notion-callout-icon",calloutBackground:"data-notion-callout-background",[c().xd.tableOfContents]:"data-notion-toc",[c().xd.file]:"data-notion-file",fileAlias:"data-notion-file-alias",[c().xd.columnList]:"data-notion-column-list",[c().xd.column]:"data-notion-column-ratio",[c().xd.video]:"data-notion-video",[c().xd.audio]:"data-notion-audio",[c().xd.pdf]:"data-notion-pdf",[c().xd.equation]:"data-notion-equation",dateFormat:"data-notion-date-format",[c().xd.externalObjectInstance]:"data-notion-link-preview",[c().xd.embed]:"data-notion-embed"},U="Lucidchart",F="Jira",V="JiraDC";v().me,v().Fv,v().me,v().Fv,v().me,v().Fv;function j(e,t){return t&&t.nodeType===e.Node.ELEMENT_NODE}function z(e,t){return e.nodeType===t.Node.TEXT_NODE||e instanceof t.Element&&P[e.tagName.toLowerCase()]}function H(e,t,n){var o;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(t&&1===e.nodeType&&e.hasAttribute(O[T().Ifu.Comment]))return i;if(n&&"pre"===(null===(o=e.tagName)||void 0===o?void 0:o.toLowerCase()))return i;i.push(e);for(const r of f().PE(e.childNodes))H(r,t,n,i);return i}function W(e){const t=[];if(!e.parentNode)return t;let n=e.parentNode;for(;n;)t.push(n),n=n.parentNode||void 0;return t}function q(e,t){const n=W(e).filter((e=>e instanceof t.Element&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase()))).length;return n}const K=["•","◦","▪"],G=["h1","h2","h3","h4","h5","h6"].map((e=>`${e}:not(:first-child)`)).join(", ");function $(e){const{node:t,window:n,stripText:o,stripSurroundingWhitespace:i,timeZone:a,ignoreComments:s,deps:d,ignoreCodeBlock:u,preserveLineBreaksInTableCellsEnabled:p}=e;if(!o){for(const e of Array.from(t.querySelectorAll("p:not(:first-child)")))e.prepend("\n");for(const e of Array.from(t.querySelectorAll(G)))e.prepend("\n");for(const e of Array.from(t.querySelectorAll("ul > li"))){const t=q(e,n)-1,o=t%K.length,i=K[o],r="    ".repeat(t);e.prepend(`\n${r}${i} `)}for(const e of Array.from(t.querySelectorAll("ol"))){const t=q(e,n),o="    ".repeat(t);for(let n=0;n<e.children.length;n+=1){e.children[n].prepend(`\n${o}${n+1}. `)}}for(const e of Array.from(t.querySelectorAll("pre")))e.parentNode&&e.parentNode.insertBefore(n.document.createTextNode("\n\n"),e)}const g=[],f=[],v=H(t,s,u);let h=!1;const _=v.filter((e=>e.nodeType!==n.Node.TEXT_NODE?!!(p&&e instanceof n.Element&&"br"===e.tagName.toLowerCase())&&(e.data="\n",h=!0,!0):!o||!/^( |\t)*(\n)+( |\t)*$/.test(e.data)));let b=!0;_.forEach(((e,s)=>{let u=e.data;o&&(u=u.replace(/\[ \] /g,""),u=u.replace(/\[x\] /g,""),u=u.replace(/^[\-\*\•]\s?/g,""),u=u.replace(/(\s)+/g,"$1")),!t.hasAttribute("confluenceTabSpaces")&&0===s&&i&&(u=u.trimStart()),u=T().xV3(u),s===_.length-1&&b&&i&&(u=u.trimEnd());const p=[],v=W(e);let h;!o&&v.some((e=>e instanceof n.Element&&("h1"===e.tagName.toLowerCase()||"h2"===e.tagName.toLowerCase()||"h3"===e.tagName.toLowerCase()||"h4"===e.tagName.toLowerCase()||"h5"===e.tagName.toLowerCase()||"h6"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Bold]),v.some((e=>e instanceof n.Element&&"strong"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Bold]),v.some((e=>e instanceof n.Element&&"em"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Italic]),v.some((e=>e instanceof n.Element&&"u"===e.tagName.toLowerCase()))&&p.push([T().Ifu.Underline]),v.some((e=>e instanceof n.Element&&("code"===e.tagName.toLowerCase()||"pre"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Code]),v.some((e=>e instanceof n.Element&&("del"===e.tagName.toLowerCase()||"strike"===e.tagName.toLowerCase()||"s"===e.tagName.toLowerCase())))&&p.push([T().Ifu.Strike]);const y=v.find((e=>{var t;return e instanceof n.Element&&(e.hasAttribute(O[T().Ifu.Highlight])||(null===(t=e.parentElement)||void 0===t?void 0:t.hasAttribute(O[T().Ifu.Highlight])))}));if(y&&y instanceof n.Element){var S;const e=y.getAttribute(O[T().Ifu.Highlight]),t=null===(S=y.parentElement)||void 0===S?void 0:S.getAttribute(O[T().Ifu.Highlight]),n=Ue(e&&"undefined"!==e?e||"":t||"");n&&p.push([T().Ifu.Highlight,n])}const w=v.find((e=>e instanceof n.Element&&"a"===e.tagName.toLowerCase()));if(w){const e=w.getAttribute(O[T().Ifu.Page]),t=w.getAttribute("notionUserId")||w.getAttribute(O[T().Ifu.User]),n=w.getAttribute(O.spaceId),o=w.getAttribute(O[T().Ifu.Comment]);"string"==typeof e&&(0,l().uj)(e)&&"string"==typeof n&&(0,l().uj)(n)?h=T().ld4(e,n):w.href?p.push(T().Sez(w.href)):"string"==typeof t&&(0,l().uj)(t)?(h=T().P4h(t),w.getAttribute("notionUserId")&&s===_.length-2&&(b=!1)):o&&n&&(0,l().uj)(o)&&(0,l().uj)(n)&&(h=T().hiQ(o,n))}const I=v.find((e=>!!(e instanceof n.Element&&e.getAttribute(O[T().Ifu.Discussion])))),x=t.classList.contains("page-comment");if(I&&!x){const e=I.getAttribute(O[T().Ifu.Discussion]);if(e){e.split(",").forEach((e=>p.push(T().aQj(e))))}}const A=v.find((e=>e instanceof n.Element&&"sub"===e.tagName.toLowerCase()));let C;"true"===(null==A?void 0:A.getAttribute("confluenceProcessableEquation"))&&(C=`_{${A.textContent}}`);const M=v.find((e=>e instanceof n.Element&&"sup"===e.tagName.toLowerCase()));let P;"true"===(null==M?void 0:M.getAttribute("confluenceProcessableEquation"))&&(P=`^{${M.textContent}}`);const B=v.find((e=>e instanceof n.Element&&e.hasAttribute(O[T().Ifu.Equation])));let R;null!=B&&B.textContent&&(R=B.textContent);const E=v.find((e=>e instanceof n.Element&&"time"===e.tagName.toLowerCase()));if(E){const e=E.getAttribute("datetime");if(e){const t=function(e,t){const n=r().c9.fromISO(e),o=n.toMillis();return o===n.startOf("day").toMillis()?m().C6.toPersistedDate(o,t):m().C6.toPersistedDateTime(o,t)}(e,a),n={...t};"relative"===E.getAttribute(O.dateFormat)&&(n.date_format="relative"),h=T().Ww9(n)}}const D=v.find((e=>!!(e instanceof n.Element&&e instanceof n.HTMLSpanElement&&e.getAttribute(O[c().xd.externalObjectInstance]))));if(h)g.push(T().wmz(h,p));else if(C)g.push(T().G0H(C,p));else if(P)g.push(T().G0H(P,p));else if(R)g.push(T().G0H(R,p));else if(D&&null!=d&&d.randomID){var N;const e=(null==d||null===(N=d.spaceIdCreator)||void 0===N?void 0:N.idInSavedSpace(k().ev))??d.randomID();g.push(T().wmz(T().bMp(e),p)),f.push(e)}else g.push(T().Ey_(u,p))}));const y=T().JG8(g,N),S=T().__s(y);if(h){const e=T().Ey_("",[[T().Ifu.Link,""]]);S.push(e)}return{titleTokens:S,linkMentionBlockIds:f}}function Y(e,t){const n=["img[src]","a[download]",`a[${O[c().xd.file]}]`,`audio[${O[c().xd.audio]}]`,`video[${O[c().xd.video]}]`,"li"];t&&n.push("pre");const o=e.querySelectorAll(n.join(","));return f().PE(o)}function Q(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m,considerCodeBlockAsNonTextItem:g}}=e;return Se({actor:t,parent:n,nodes:Y(o,g),allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:c,randomShortID:d,isPhoneNumber:u},options:{useCrdt:p,ignoreBlockCount:m}})}function Z(e){const{actor:t,parent:n,node:o,type:i,allOperations:r,options:{useCrdt:a,ignoreBlockCount:s,stripText:l,stripSurroundingWhitespace:d,ignoreCodeBlock:u},deps:{window:p,randomID:m,spaceIdCreator:g}}=e,f=(null==g?void 0:g.idInSavedSpace(k().ev))??m(),{titleTokens:v,linkMentionBlockIds:h}=$({node:o,window:p,stripText:l,stripSurroundingWhitespace:d,ignoreComments:!0,ignoreCodeBlock:u,deps:{randomID:m,spaceIdCreator:g}}),{operations:_}=y().zgg.createWithoutParentCheck_DoNotUse({id:f,type:i,properties:{title:v},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});if(r.push(..._),h.length){const e=o.querySelectorAll(`span[${O[c().xd.externalObjectInstance]}]`);for(const[o,i]of Array.from(e).entries())h[o]&&re({actor:t,parent:n,node:i,allOperations:r,deps:{randomID:m,spaceIdCreator:g},options:{useCrdt:a,ignoreBlockCount:s},blockId:h[o]})}return be({node:o,spaceId:n.spaceId,window:p,blockId:f,actor:t,allOperations:r}),f}function X(e){const{actor:t,parent:n,allOperations:o,deps:{randomID:i,spaceIdCreator:r},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==r?void 0:r.idInSavedSpace(k().ev))??i(),{operations:d}=y().zgg.createWithoutParentCheck_DoNotUse({id:l,type:c().xd.divider,parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return o.push(...d),l}function J(e){const{actor:t,parent:n,source:o,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l,fallbackWidth:d}}=e;let u;"image"===o.type&&o.width?u=Math.min(o.width,E):d&&(u=Math.min(d,E));const p=(null==a?void 0:a.idInSavedSpace(k().ev))??r(),{model:m,operations:g}=y().zgg.createWithoutParentCheck_DoNotUse({id:p,type:c().xd.image,properties:{source:T().x9d(o.secureS3UrlOrAlias)},format:{block_width:u},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...g,m.DEPRECATED_DONT_CALL_WILL_BE_REMOVED_IN_Q2_2025___getSecureFilesUpdate("","")),p}function ee(e){const{actor:t,parent:n,node:o,sourceUrl:i,allOperations:r,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:c}}=e,d=L(o.getAttribute("height")),u=L(o.getAttribute("width")),p=(null==s?void 0:s.idInSavedSpace(k().ev))??a();let m;try{m=new URL(i)}catch(h){m=i}const f=g().WT({url:i,baseUrl:m instanceof URL?m.origin:m,publicDomainName:""}),{operations:v}=y().zgg.createWithoutParentCheck_DoNotUse({id:p,type:f,properties:{source:T().x9d(i)},format:{block_width:u,block_height:d,block_full_width:!1,block_page_width:!(u||d),block_preserve_scale:!0},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!c||void 0},{useCrdt:l});return r.push(...v),p}function te(e){const{actor:t,parent:n,source:o,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,c=(null==a?void 0:a.idInSavedSpace(k().ev))??r(),d=g().WT({url:o.secureS3UrlOrAlias,baseUrl:o.secureS3UrlOrAlias,publicDomainName:""}),u="embed"===d?"file":d,{model:p,operations:m}=y().zgg.createWithoutParentCheck_DoNotUse({id:c,type:u,properties:{title:T().x9d((0,h().Jt)(o.secureS3UrlOrAlias)),source:[T().Ey_(o.secureS3UrlOrAlias,[T().Sez(o.secureS3UrlOrAlias)])]},format:{block_width:"image"===o.type&&o.width?Math.min(o.width,E):void 0,block_height:o.height?Math.min(o.height,D):void 0},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...m,p.DEPRECATED_DONT_CALL_WILL_BE_REMOVED_IN_Q2_2025___getSecureFilesUpdate("","")),c}function ne(e){return"#text"===e.nodeName?e.textContent?e.textContent:"":Array.from(e.childNodes).map((e=>{const t=e.nodeName.toLowerCase();return"br"===t?"\n":"div"===t?`${ne(e)}\n`:ne(e)})).map((e=>e.split("\n").map((e=>e.trimRight())).join("\n"))).join("")}function oe(e){const{actor:t,parent:n,node:o,allOperations:r,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}=e,h=(null==u?void 0:u.idInSavedSpace(k().ev))??d(),_=o.getAttribute(O.calloutBackground),b=_?Ue(_):void 0,S=o.getAttribute(O.calloutIcon),w=S&&S.match(i()())?S:void 0,{title:I,children:x}=function(e){const{node:t,window:n}=e,o=f().PE(t.childNodes),[i,...r]=o;if(!i)return{title:[]};if(function(e){return t=>!!(j(e,t)&&t instanceof e.HTMLParagraphElement)}(n)(i)){const{titleTokens:e}=$({node:i,window:n,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:r}}if(z(i,n)){const{titleTokens:e}=$({node:t,window:n,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0});return{title:e,children:void 0}}return{title:[],children:o}}({node:o,window:s}),A=Array.isArray(x)?Se({actor:t,parent:{table:k().ev,id:h,spaceId:n.spaceId},nodes:x,allOperations:r,deps:{importFileMap:a,window:s,intl:l,randomID:d,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}):[],{operations:C}=y().zgg.createWithoutParentCheck_DoNotUse({id:h,type:c().xd.callout,content:A,properties:{title:I},format:{block_color:b,page_icon:w},parentPointer:{id:n.id,table:n.table,spaceId:n.spaceId},space_id:n.spaceId,createdBy:t,ignore_block_count:!!v||void 0},{useCrdt:g});return r.push(...C),be({node:o,spaceId:n.spaceId,window:s,blockId:h,actor:t,allOperations:r}),h}function ie(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=o.getAttribute(O[c().xd.file])||"",p=r[u]?r[u].secureS3UrlOrAlias:u;let m=o.getAttribute(O.fileAlias)||"";!m&&p.lastIndexOf("/")>=0&&(m=p.substring(p.lastIndexOf("/")+1));const g=(null==s?void 0:s.idInSavedSpace(k().ev))??a(),{model:f,operations:v}=y().zgg.createWithoutParentCheck_DoNotUse({createdBy:t,id:g,parentPointer:{id:n.id,table:n.table,spaceId:n.spaceId},space_id:n.spaceId,properties:{source:T().x9d(p),title:T().x9d(m)},type:c().xd.file,ignore_block_count:!!d||void 0},{useCrdt:l});return i.push(...v,f.DEPRECATED_DONT_CALL_WILL_BE_REMOVED_IN_Q2_2025___getSecureFilesUpdate("","")),g}function re(e){const{actor:t,parent:n,node:i,allOperations:r,deps:{randomID:a,spaceIdCreator:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=e.blockId?e.blockId:(null==s?void 0:s.idInSavedSpace(k().ev))??a();let p;const m="true"===i.getAttribute("bot-connected"),g=i.getAttribute("href"),f=i.getAttribute(O[c().xd.externalObjectInstance]);if(_().log({level:"info",from:"htmlHelpers",type:"linkPreviewStatus",data:{miscDataToConvertToString:{linkPreviewUrl:g,linkPreviewIntegration:f,isBotConnected:m,unfurlMetadataStr:i.getAttribute("metadata"),domainName:g?o().parse(g).hostname:void 0}}}),!g||!f)return;const v=o().parse(g).hostname;if(!v)return;if(m){const e=i.getAttribute("metadata");if(e){let t;try{t=JSON.parse(e)}catch(S){}p=t&&t.uri&&t.external_object_id&&t.bot_id&&t.attributes?{original_url:t.uri,domain:v,external_object_id:t.external_object_id,bot_id:t.bot_id,uri:t.uri,attributes:t.attributes}:{original_url:g,domain:v,error:{status_code:b().xB.BAD_REQUEST}}}else p={original_url:g,domain:v,error:{status_code:b().xB.BAD_REQUEST}}}else p={original_url:g,domain:v};if(!p)return;const{operations:h}=y().zgg.create({createdBy:t,id:u,parentPointer:{id:n.id,table:"block",spaceId:n.spaceId},type:c().xd.externalObjectInstance,space_id:n.spaceId,format:p,ignore_block_count:!!d||void 0},{useCrdt:l});return r.push(...h),u}const ae=/language-(\w+)/;function se(e){let t=null;return null==e||e.forEach(((e,n,o)=>{if(t)return;if(w().q.hasOwnProperty(e))return void(t=e);const i=e.match(ae);i&&i.length>1&&w().q.hasOwnProperty(i[1])&&(t=i[1])})),t}function le(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{randomID:r,spaceIdCreator:a,window:s},options:{useCrdt:l,ignoreBlockCount:d}}=e,u=(null==a?void 0:a.idInSavedSpace(k().ev))??r();let p=o.getAttribute(O[c().xd.code]);if(!p){var m;p=se(null===(m=o.querySelector("code"))||void 0===m||null===(m=m.parentElement)||void 0===m?void 0:m.classList)}if(!p){var g;p=se(null===(g=o.querySelector("code"))||void 0===g?void 0:g.classList)}const f=p&&w().q[p]?w().q[p]:"Plain Text",{operations:v}=y().zgg.createWithoutParentCheck_DoNotUse({id:u,type:c().xd.code,properties:{title:T().x9d(ne(o)),language:T().x9d(f)},format:{code_wrap:!0},parentPointer:{id:n.id,table:n.table,spaceId:n.spaceId},space_id:n.spaceId,createdBy:t,ignore_block_count:!!d||void 0},{useCrdt:l});return i.push(...v),be({node:o,spaceId:n.spaceId,window:s,blockId:u,actor:t,allOperations:i}),u}function ce(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{randomID:r,spaceIdCreator:a},options:{useCrdt:s,ignoreBlockCount:l}}=e,d=(null==a?void 0:a.idInSavedSpace(k().ev))??r(),{operations:u}=y().zgg.createWithoutParentCheck_DoNotUse({id:d,type:c().xd.equation,properties:{title:T().x9d(ne(o))},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!l||void 0},{useCrdt:s});return i.push(...u),d}function de(e){const{actor:t,parent:n,allOperations:o,deps:{randomID:i,spaceIdCreator:r},options:{useCrdt:a,ignoreBlockCount:s}}=e,l=(null==r?void 0:r.idInSavedSpace(k().ev))??i(),{operations:d}=y().zgg.createWithoutParentCheck_DoNotUse({id:l,type:c().xd.tableOfContents,format:{block_color:"gray"},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!s||void 0},{useCrdt:a});return o.push(...d),l}function ue(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),[h,..._]=f().PE(o.childNodes),b=Se({actor:t,parent:{id:v,table:k().ev,spaceId:n.spaceId},nodes:_,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:S}=y().zgg.createWithoutParentCheck_DoNotUse({id:v,type:c().xd.quote,properties:{title:T().x9d(null!=h&&h.textContent?h.textContent.trim():"")},content:b,parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return i.push(...S),be({node:o,spaceId:n.spaceId,blockId:v,actor:t,allOperations:i,window:a}),v}function pe(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=o.querySelector("summary"),_=f().PE(o.childNodes).filter((e=>e!==h)),b=h&&h.textContent&&(()=>{const{titleTokens:e}=$({node:h,window:a,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:d}});return e})(),S=Se({actor:t,parent:{id:v,table:k().ev,spaceId:n.spaceId},nodes:_,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:w}=y().zgg.createWithoutParentCheck_DoNotUse({id:v,type:c().xd.toggle,content:S,properties:{title:b||T().x9d("")},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return i.push(...w),v}function me(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=f().PE(o.children).filter((e=>e.hasAttribute(O[c().xd.column]))).slice(0,8).map((e=>function(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}=e,v=(null==d?void 0:d.idInSavedSpace(k().ev))??l(),h=o.getAttribute(O[c().xd.column]);let _;if(null!==h){const e=parseFloat(h);!Number.isNaN(e)&&e>0&&e<=1&&(_=e)}const b=Se({actor:t,parent:{id:v,table:k().ev,spaceId:n.spaceId},nodes:f().PE(o.children),allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}),{operations:S}=y().zgg.createWithoutParentCheck_DoNotUse({id:v,type:c().xd.column,format:{column_ratio:_},content:b,parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return i.push(...S),v}({actor:t,parent:{id:v,table:k().ev,spaceId:n.spaceId},node:e,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:d,randomShortID:u,isPhoneNumber:p},options:{useCrdt:m,ignoreBlockCount:g}}))),{operations:_}=y().zgg.createWithoutParentCheck_DoNotUse({id:v,type:c().xd.columnList,content:h,parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!g||void 0},{useCrdt:m});return i.push(..._),v}const ge=/^\[x\].*/,fe=/^\[ \].*/,ve=/^[-\*\•].*/;function he(e){const{actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}=e,h=(null==u?void 0:u.idInSavedSpace(k().ev))??l(),_=a.document.createElement("span"),b=[];f().PE(o.childNodes).forEach(((e,t)=>{(function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute("data-confluence-web-image")})(e,a)||0===t&&function(e,t){return e instanceof t.Element&&"a"===e.tagName.toLowerCase()&&e.hasAttribute(O[c().xd.file])}(e,a)?b.push(e):0===t&&!(function(e,t){return e instanceof t.Element&&"img"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"video"===e.tagName.toLowerCase()}(e,a)||function(e,t){return e instanceof t.Element&&"audio"===e.tagName.toLowerCase()}(e,a))||z(e,a)?(_.appendChild(e),e instanceof a.Element&&Y(e).forEach((e=>b.push(e)))):b.push(e)}));const S=Se({actor:t,parent:{id:h,table:k().ev,spaceId:n.spaceId},nodes:b,allOperations:i,deps:{importFileMap:r,window:a,intl:s,randomID:l,spaceIdCreator:u,randomShortID:p,isPhoneNumber:m},options:{useCrdt:g,ignoreBlockCount:v}}),w=ge.test(_.textContent||""),I=fe.test(_.textContent||"");let x;x=w||I?c().xd.toDo:o.parentNode instanceof a.Element&&"ol"===o.parentNode.tagName.toLowerCase()?c().xd.numberedList:c().xd.bulletedList;let A=!1;x===c().xd.toDo&&w&&(A=!0);const{titleTokens:C}=$({node:_,window:a,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!0,deps:{randomID:l,spaceIdCreator:u}}),{operations:M}=y().zgg.createWithoutParentCheck_DoNotUse({id:h,type:x,content:S,properties:{title:C,checked:A?T().x9d(d().I1):void 0},parentPointer:n,space_id:n.spaceId,createdBy:t,ignore_block_count:!!v||void 0},{useCrdt:g});return i.push(...M),be({node:_,spaceId:n.spaceId,blockId:h,actor:t,allOperations:i,window:a}),h}function _e(e){const{node:t,spaceId:n,window:o,actor:i,discussionId:r,allOperations:a,deps:s,options:l}=e,c=Array.from(t.querySelectorAll(`span[${O[M.CommentDiscussionId]}="${r}"]`)),d=Date.now(),u=[];for(const p of c){if(null===p.textContent||0===p.textContent.trim().length)continue;const e=p.getAttribute(O[T().Ifu.Comment]);if(!e)continue;const{titleTokens:c}=$({node:p,window:o,stripText:!0,stripSurroundingWhitespace:!0,ignoreComments:!1}),m=p.getAttribute(O[M.CommentAuthor]);u.push(e);const g=s&&l&&Q({actor:i,parent:{table:x().SN,id:e,spaceId:n},node:t,allOperations:a,deps:s,options:l}),f={id:e,parent_id:r,parent_table:A().$Y,space_id:n,version:1,created_time:d,last_edited_time:d,text:c,created_by_table:C().oo,created_by_id:m||i.id,alive:!0,...g&&{content:g}};a.push(S().op.set({pointer:{table:x().SN,id:e,spaceId:n},path:[],args:f}))}return u}function be(e){const{node:t,spaceId:n,blockId:o,actor:i,allOperations:r,window:a}=e,s=Array.from(t.querySelectorAll(`span[${O[T().Ifu.Discussion]}]`)),l=new Map;for(const c of s){const e=c.getAttribute(O[T().Ifu.Discussion]);if(!e)continue;e.split(",").forEach((e=>{if(l.has(e)){var t;null===(t=l.get(e))||void 0===t||null===(t=t.context)||void 0===t||t.push([c.textContent??"",[[T().Ifu.Discussion,e]]])}else{const t={id:e,type:"default",parent_id:o,parent_table:k().ev,resolved:!1,context:[[c.textContent??"",[[T().Ifu.Discussion,e]]]],space_id:n,version:0};l.set(e,t)}}))}ye({node:t,spaceId:n,window:a,blockId:o,actor:i,discussionToTextMap:l,allOperations:r})}function ye(e){const{node:t,spaceId:n,window:o,blockId:i,actor:r,discussionToTextMap:a,allOperations:s,deps:l,options:c}=e;for(const[d,u]of a.entries()){const e=_e({node:t,spaceId:n,window:o,discussionId:d,actor:r,allOperations:s,deps:l,options:c});u.comments=e,s.push(S().op.set({pointer:{table:A().$Y,id:d,spaceId:n},path:[],args:u}),{pointer:{table:k().ev,id:i,spaceId:n},command:"listAfter",path:["discussions"],args:{id:d}})}}function Se(e){const{actor:t,parent:n,nodes:o,allOperations:i,deps:r,htmlParserErrors:a,options:l}=e;return s().KC(...o.map((e=>we({actor:t,parent:n,node:e,allOperations:i,deps:r,htmlParserErrors:a,options:l}))))}function we(e){const{actor:t,parent:n,node:o,allOperations:i,deps:r,htmlParserErrors:l,options:d}=e,{importFileMap:m,window:v,intl:h,randomID:_,spaceIdCreator:b,blockContentMaxSize:y}=r,{useCrdt:S,ignoreBlockCount:w,treatNestedCodeAsCodeBlocks:C,skipTableToCollectionConversion:M,preserveLineBreaksInTableCellsEnabled:P,addHeadersToCollectionEnabled:B}=d;if(o&&o instanceof v.Element){const e=o.tagName.toLowerCase();if("div"===e&&"page-comments"===o.getAttribute("class")){const e=function(e){var t;const{node:n,parent:o,actor:i,window:r,allOperations:a,deps:s,options:l}=e,c=n.getAttribute(O[T().Ifu.Discussion])||((null===(t=s.spaceIdCreator)||void 0===t?void 0:t.idInSavedSpace(A().$Y))??s.randomID()),d=new Map;return d.set(c,{type:"default",id:c,parent_id:o.id,parent_table:k().ev,resolved:!1,space_id:o.spaceId,version:1}),ye({node:n,spaceId:o.spaceId,window:r,blockId:o.id,discussionToTextMap:d,allOperations:a,actor:i,deps:s,options:l}),c}({node:o,window:v,actor:t,allOperations:i,parent:n,deps:r,options:d});return[e]}if("h1"===e)return[Z({actor:t,parent:n,node:o,type:c().xd.header,allOperations:i,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("h2"===e)return[Z({actor:t,parent:n,node:o,type:c().xd.subHeader,allOperations:i,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("hr"===e)return[X({actor:t,parent:n,allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})];if("h"===e[0])return[Z({actor:t,parent:n,node:o,type:c().xd.subSubHeader,allOperations:i,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}}),...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("pre"===e||"code"===e||"div"===e&&o.className===R)return o.innerHTML.length&&y&&y>0&&o.innerHTML.length>y?[]:[le({actor:t,parent:n,node:o,allOperations:i,deps:{randomID:_,spaceIdCreator:b,window:v},options:{useCrdt:S,ignoreBlockCount:w}}),...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if(o.hasAttribute(O[c().xd.callout]))return[oe({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("blockquote"===e)return[ue({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("details"===e)return[pe({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("table"===e){const{tableData:d,tableFiles:g}=function(e){const{node:t,window:n,importFileMap:o,intl:i,preserveLineBreaksInTableCellsEnabled:r}=e,a=[],l=[],d=Array.from(t.querySelectorAll("tr")).filter((e=>e.closest("table")===t));for(const p of d){const e=[],t=[],d=Array.from(p.querySelectorAll("td, th")).filter((e=>e.closest("tr")===p));for(const i of d){const a=(i.textContent||"").trim(),l=ke(i.getAttribute("rowspan"),1),{titleTokens:d}=$({node:i,window:n,stripText:!1,stripSurroundingWhitespace:!0,ignoreComments:!0,preserveLineBreaksInTableCellsEnabled:r});e.push({text:a,textValue:d,rowSpan:l});const u=ke(i.getAttribute("colspan"),1);for(let t=1;t<u;t++)e.push({text:"",rowSpan:l});const p=Y(i);if(p.length){const e=s().oE(p.flatMap((e=>{var t;const n=e.getAttribute("src")||e.getAttribute(O[c().xd.file])||e.getAttribute(O[c().xd.audio])||e.getAttribute(O[c().xd.video]),i=e.getAttribute(O.fileAlias);return n?{name:i||n,url:(null===(t=o[n])||void 0===t?void 0:t.secureS3UrlOrAlias)||n}:void 0})));t.push(...e)}}e.length&&l.push(e);const m=u().eQ(t);a.push({text:i.formatMessage({id:"htmlHelpers.table.fileColumnName",defaultMessage:"Files"}),textValue:m})}for(let s=0;s<l.length;s++){const e=l[s];for(let t=0;t<e.length;t++){const n=e[t].rowSpan;if(n>1)for(let e=1;e<n&&!(s+e>=l.length);e++){l[s+e].splice(t,0,{text:"",rowSpan:1})}}}return{tableData:l,tableFiles:a}}({node:o,window:v,importFileMap:m,intl:h,preserveLineBreaksInTableCellsEnabled:P});if(!M&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))for(let e=0;e<d.length;e++)d[e].push({text:g[e].text,textValue:g[e].textValue,columnType:{schema:{type:"file"},validate:s().vF,coerce:s().D_}});let f="table";if((o.hasAttribute("data-import-as-database")||!M&&g.some((e=>{var t;return null===(t=e.textValue)||void 0===t?void 0:t.length})))&&(f="collection"),0===s().rG(d).length)return[];if(n.table===I().Vl||n.table===x().SN)return[];const _={...n,table:n.table};try{const e=function(e){const{actor:t,parent:n,node:o,tableData:i,allOperations:r,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:c,window:d,isPhoneNumber:u,addFileIdsToBlock:m},options:{useCrdt:g,ignoreBlockCount:f,tableType:v,addHeadersToCollectionEnabled:h}}=e,_=(null==l?void 0:l.idInSavedSpace(k().ev))??s();if("table"===v){const{operations:e}=(0,p().L5)({actor:t,tableId:_,parent:n,table:i,deps:{randomID:s,spaceIdCreator:l,randomShortID:c},options:{useCrdt:g,ignoreBlockCount:f}});r.push(...e),be({node:o,spaceId:n.spaceId,window:d,blockId:_,actor:t,allOperations:r})}else if("collection"===v){const e=o.getAttribute("data-database-title")??"",{operations:d}=(0,p().ph)({actor:t,blockType:"collection_view",root:{existing:!1,id:_},parent:n,name:e,format:{table_wrap:!0},table:i,deps:{intl:a,randomID:s,spaceIdCreator:l,randomShortID:c,isPhoneNumber:u,addFileIdsToBlock:m??!1},options:{useCrdt:g,ignoreBlockCount:f,useCsvAdaptiveSchema:!0,addHeadersToCollectionEnabled:h}});r.push(...d)}return _}({actor:t,parent:_,node:o,tableData:d,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w,tableType:f,addHeadersToCollectionEnabled:B}});return[e]}catch(E){const t=(0,a().A)(E);if(!l||"CsvImportError"!==t.message)throw E;const n=l.get(e)||0;return l.set(e,n+1),[]}}if("div"===e&&o.hasAttribute(O[c().xd.columnList]))return[me({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("nav"===e&&o.hasAttribute(O[c().xd.tableOfContents]))return[de({actor:t,parent:n,allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}}),...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("ul"===e||"ol"===e)return s().KC(...Array.from(o.children).map((e=>we({actor:t,parent:n,node:e,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}}))));if("li"===e||ge.test(o.textContent||"")||fe.test(o.textContent||"")||ve.test(o.textContent||""))return[he({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w}})];if("img"===e){const e=o.getAttribute("src");if(e)return[J({actor:t,parent:n,source:m[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,fallbackWidth:o instanceof v.HTMLImageElement?o.width:void 0}})]}if("a"===e&&o.getAttribute(O[c().xd.externalObjectInstance])){const e=re({actor:t,parent:n,node:o,allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}});return e?[e]:[]}if("a"===e&&o.getAttribute(O[c().xd.embed])){const e=o.getAttribute("href");if(e)return[te({actor:t,parent:n,source:{type:"unknown",secureS3UrlOrAlias:e,height:400},allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}if("a"===e&&o.getAttribute(O[c().xd.file]))return[ie({actor:t,parent:n,node:o,allOperations:i,deps:{importFileMap:m,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})];if("a"===e&&0===f().PE(o.childNodes).length){const e=o.getAttribute("href");if(o.hasAttribute("download")&&e)return[te({actor:t,parent:n,source:m[e]||{type:"unknown",secureS3UrlOrAlias:e},allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}if("video"===e){const e=o.querySelector("source");if(e){const o=e.getAttribute("src");if(o&&g().L_({url:o}))return[te({actor:t,parent:n,source:{type:"unknown",secureS3UrlOrAlias:o},allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}}if("audio"===e){const e=o.querySelector("source");if(e){const o=e.getAttribute("src");if(o&&g().ck({url:o}))return[te({actor:t,parent:n,source:{type:"unknown",secureS3UrlOrAlias:o},allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}}if("iframe"===e){const e=o.getAttribute("src");if(e)return[ee({actor:t,parent:n,node:o,sourceUrl:e,allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]}return"p"===e&&o.getAttribute("confluenceNewLine")?[Z({actor:t,parent:n,node:o,type:c().xd.text,allOperations:i,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!0,stripSurroundingWhitespace:!0}})]:o.hasAttribute(O[c().xd.equation])?[ce({actor:t,parent:n,node:o,allOperations:i,deps:{randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w}})]:[.../^\s*$/g.test(o.textContent||"")?[]:[Z({actor:t,parent:n,node:o,type:c().xd.text,allOperations:i,deps:{window:v,randomID:_,spaceIdCreator:b},options:{useCrdt:S,ignoreBlockCount:w,stripText:!1,stripSurroundingWhitespace:!0,ignoreCodeBlock:C}})],...Q({actor:t,parent:n,node:o,allOperations:i,deps:r,options:{useCrdt:S,ignoreBlockCount:w,considerCodeBlockAsNonTextItem:C}})]}return[]}function ke(e,t){const n=null!==e?parseInt(e,10):t;return isFinite(n)?n:t}function Ie(e){if(e&&-1!==e.indexOf("em"))return parseInt(e)}function xe(e,t,n){const o=n.document.createElement(t);for(;e.firstChild;)o.appendChild(e.firstChild);for(let i=e.attributes.length-1;i>=0;--i){const t=e.attributes[i];o.setAttribute(t.name,t.value)}return e.parentNode&&e.parentNode.replaceChild(o,e),o}function Ae(e,t,n){const o=n.document.createElement(t);for(;e.firstChild;)o.appendChild(e.firstChild);e.appendChild(o)}function Ce(e){const t=[];let n=e;for(;e.firstChild;){const o=e.firstChild;t.push(o),e.parentNode&&e.parentNode.insertBefore(o,n.nextSibling),n=o}const o=e.parentNode;return o&&(o.removeChild(e),o.normalize()),t}const Te=1e4;function Me(e,t){!function(e,t){const n=Array.from(e.querySelectorAll("p"));for(const o of n){let e=o.firstChild,n=0;for(;e&&n<Te;){let i=!1;if(e instanceof t.Element&&null!==e.textContent&&!e.textContent.trim()){const t=Array.from(e.querySelectorAll("br"));if(t.length>0){for(const n of t)o.insertBefore(n,e);i=!0}}const r=e.nextSibling;i&&o.removeChild(e),e=r,n+=1}}}(e,t);const n=Array.from(e.querySelectorAll("p"));for(let o=0;o<Te;o++){const e=n.shift();if(!e||!e.parentNode)return;const o=e.querySelector("br");if(!o)continue;if(o.parentElement!==e)continue;const i=t.document.createElement("p");e.parentNode.insertBefore(i,e.nextSibling);let r=o.nextSibling;for(;r;){const e=r.nextSibling;i.appendChild(r),r=e}e.removeChild(o),n.unshift(i)}}function Pe(e){const t=e.match(/^([0-9]+)px$/i);if(t)return parseInt(t[1])}function Be(e){const{rootNode:t,window:n,isInlineContent:o,emojiData:i}=e;!function(e){const{rootNode:t,window:n,emojiData:{emojiByName:o}}=e,i=Array.from(t.querySelectorAll("img[data-stringify-emoji]"));for(const r of i){const e=r.getAttribute("data-stringify-emoji")||"",t=e.match(/^:(.+):$/);if(!t||!r.parentNode)continue;const i=o[t[1]]||e;r.parentNode.replaceChild(n.document.createTextNode(i),r)}}({rootNode:t,window:n,emojiData:i}),t.normalize(),Me(t,n);const r=f().PE(t.childNodes);for(;r.length>0;){let e=r.shift();if(e instanceof n.Element&&e.parentNode&&"google-sheets-html-origin"===e.tagName.toLowerCase()){const t=f().PE(e.childNodes);for(const n of t)e.parentNode.insertBefore(n,e);r.unshift(...t),e.remove()}else if(e&&e.parentNode&&3===e.nodeType&&/^( |\t)*(\n)+( |\t)*$/.test(e.data))e.parentNode.removeChild(e);else if(e&&e instanceof n.Element&&e.parentNode&&B[e.tagName.toLowerCase()])e.parentNode.removeChild(e);else{if(e instanceof n.HTMLElement){const t=(l=e.style.fontSize||void 0)&&-1!==l.indexOf("px")||l&&-1!==l.indexOf("pt")?parseInt(l):void 0,o=Ie(e.style.fontSize||void 0);(t&&t>=24||o&&o>2)&&(e=xe(e,"h1",n))}if(e instanceof n.HTMLElement&&("line-through"===e.style.textDecoration&&Ae(e,"del",n),"italic"===e.style.fontStyle&&Ae(e,"em",n),("bold"===e.style.fontWeight||e.style.fontWeight&&parseInt(e.style.fontWeight)>=500)&&Ae(e,"strong",n)),e instanceof n.HTMLImageElement){const t=Pe(e.style.width);!e.width&&t&&(e.width=t)}if(e instanceof n.HTMLElement&&("b"===e.tagName.toLowerCase()?e=xe(e,"strong",n):"i"===e.tagName.toLowerCase()&&(e=xe(e,"em",n))),e instanceof n.HTMLElement&&"strong"===e.tagName.toLowerCase()&&"normal"===e.style.fontWeight&&(e=xe(e,"span",n)),e instanceof n.HTMLElement&&("section"===e.tagName.toLowerCase()||"article"===e.tagName.toLowerCase())&&(e=xe(e,"div",n)),e instanceof n.HTMLElement&&"div"===e.tagName.toLowerCase()&&"inline"===e.style.display&&(e=xe(e,"span",n)),e instanceof n.HTMLElement&&"input"===e.tagName.toLowerCase()&&"checkbox"===e.type){const t=e.checked,o=e.parentNode,i=n.document.createElement("span");i.textContent=`[${t?"x":" "}] `,o&&(o.insertBefore(i,e),o.removeChild(e)),r.push(i)}else{if(e instanceof n.HTMLElement&&"table"===e.tagName.toLowerCase()){const t=Array.from(e.querySelectorAll("tr")).map((e=>e.querySelectorAll("td, th")));if(t.every((e=>1===e.length))){const o=n.document.createDocumentFragment();for(const e of t){const t=e[0],i=t.childNodes.length;for(let e=0;e<i;e+=1){const n=t.childNodes[e];n&&(o.appendChild(n.cloneNode(!0)),r.push(n))}o.appendChild(n.document.createElement("hr"))}e.parentNode&&e.parentNode.replaceChild(o,e)}}if(e instanceof n.HTMLElement&&("ul"===e.tagName.toLowerCase()||"ol"===e.tagName.toLowerCase())&&e.parentNode instanceof n.HTMLElement&&("ul"===e.parentNode.tagName.toLowerCase()||"ol"===e.parentNode.tagName.toLowerCase())&&e.previousSibling instanceof n.HTMLElement&&"li"===e.previousSibling.tagName.toLowerCase()&&e.previousSibling.appendChild(e),e instanceof n.Element&&(e.removeAttribute("style"),e.removeAttribute("dir")),e instanceof n.Element&&"span"===e.tagName.toLowerCase()){var a;if("page-comment"===e.getAttribute("class")||null!==(a=e.getAttribute("class"))&&void 0!==a&&a.split(" ").includes("retain-span"))continue;(e.hasAttribute(O[T().Ifu.Highlight])||e.hasAttribute(O[T().Ifu.Discussion])||e.hasAttribute(O[T().Ifu.Comment])||e.hasAttribute(O[T().Ifu.Equation])?Array.from(e.children):Ce(e)).forEach((e=>r.push(e)))}else if(e){f().PE(e.childNodes).forEach((e=>r.push(e)))}}}}var l;for(f().PE(t.childNodes).forEach((e=>r.push(e)));r.length>0;){const e=r.shift();if(e)if(Re(e,n)&&s().Si(e.childNodes,(e=>e instanceof n.Element&&"h1"===e.tagName.toLowerCase()))){const t=n.document.createElement("h1");s().__(e.childNodes,(e=>{s().__(e.childNodes,(e=>{const n=e.cloneNode(!0);n&&t.appendChild(n)}))}));const o=e.parentNode;if(o){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const i=n.document.createElement(e.tagName.toLowerCase());i.appendChild(t),o.insertBefore(i,e)}else o.insertBefore(t,e);o.removeChild(e)}r.push(t)}else if(Re(e,n)&&s().Si(e.childNodes,(e=>e instanceof n.Element&&"h2"===e.tagName.toLowerCase()))){const t=n.document.createElement("h2");s().__(e.childNodes,(e=>{s().__(e.childNodes,(e=>{const n=e.cloneNode(!0);n&&t.appendChild(n)}))}));const o=e.parentNode;if(o){if("td"===e.tagName.toLowerCase()||"th"===e.tagName.toLowerCase()){const i=n.document.createElement(e.tagName.toLowerCase());i.appendChild(t),o.insertBefore(i,e)}else o.insertBefore(t,e);o.removeChild(e)}r.push(t)}else if(e instanceof n.HTMLElement&&("div"===e.tagName.toLowerCase()||"span"===e.tagName.toLowerCase())&&e.parentNode&&0===e.childNodes.length)e.parentNode.removeChild(e);else if(!Re(e,n)||"p"!==e.tagName.toLowerCase()&&"div"!==e.tagName.toLowerCase()&&"figure"!==e.tagName.toLowerCase()||!f().PE(e.childNodes).some((e=>e instanceof n.Element&&("p"===e.tagName.toLowerCase()||"div"===e.tagName.toLowerCase()||"img"===e.tagName.toLowerCase()||"ul"===e.tagName.toLowerCase()||"table"===e.tagName.toLowerCase()||"hr"===e.tagName.toLowerCase()||"video"===e.tagName.toLowerCase()||"iframe"===e.tagName.toLowerCase())))){if(e&&e.childNodes){f().PE(e.childNodes).forEach((e=>r.push(e)))}}else{Ce(e).forEach((e=>r.push(e)))}}t.normalize(),o||f().PE(t.childNodes).forEach((e=>{if(3===e.nodeType){const o=n.document.createElement("p");t.insertBefore(o,e),o.appendChild(e)}}))}function Re(e,t){return e instanceof t.Element&&(0!==e.childNodes.length&&!(e.hasAttribute(O[c().xd.columnList])||e.hasAttribute(O[c().xd.column])||e.hasAttribute(O[c().xd.callout])))}function Ee(e){const{actor:t,parent:n,rootNode:o,deps:i,htmlParserErrors:r,options:a}=e;Be({rootNode:o,window:i.window,isInlineContent:!1,emojiData:i.emojiData});const s=[];return{allOperations:s,rootContentIds:Se({actor:t,parent:n,nodes:f().PE(o.children),allOperations:s,deps:i,htmlParserErrors:r,options:a})}}function De(e){const{node:t,window:n,stripText:o,stripSurroundingWhitespace:i,emojiData:r}=e;Be({rootNode:t,window:n,isInlineContent:!0,emojiData:r});const{titleTokens:a}=$({node:t,window:n,stripText:o,stripSurroundingWhitespace:i,ignoreComments:!0});return a}function Ne(e){const{node:t,window:n,emojiData:o}=e;return Be({rootNode:t,window:n,isInlineContent:!1,emojiData:o}),Oe(t,n)}const Le=new Set(["span","div","p"]);function Oe(e,t){const n=e.tagName.toLowerCase();if(!Le.has(n))return!0;if("div"===n&&(e.className===R||e.hasAttribute(O[c().xd.columnList])))return!0;for(const o of Array.from(e.childNodes))if(j(t,o)&&Oe(o,t))return!0;return!1}function Ue(e){if("default"===e||"gray"===e||"brown"===e||"orange"===e||"yellow"===e||"teal"===e||"blue"===e||"purple"===e||"pink"===e||"red"===e||"gray_background"===e||"brown_background"===e||"orange_background"===e||"yellow_background"===e||"teal_background"===e||"blue_background"===e||"purple_background"===e||"pink_background"===e||"red_background"===e)return e}},753735:(e,t,n)=>{n.d(t,{Ao:()=>u,Hj:()=>c,nS:()=>d,uq:()=>l});var o=()=>n(244641),i=()=>n(662303),r=()=>n(869190),a=()=>n(762433),s=()=>n(780054);function l(e){const t=(0,a().i5)(e);return!!t&&o().c9.now()<t}function c(e,t){var n;return void 0!==(null===(n=e.subscription)||void 0===n?void 0:n.trialEnd)&&"reset_and_invoice"===t.subscription.type}function d(e,t){return e?(0,r().W_)(e.toMillis(),t??"long",i().locale):void 0}function u(e){return e?s().A.trials[e.id].duration:s().A.trials.default.duration}},754735:(e,t,n)=>{n.d(t,{lW:()=>l,xJ:()=>s});var o=n(296540),i=()=>n(484714),r=()=>n(847249);const a=(0,o.createContext)(void 0);function s(e){const t=(0,r().K8)((()=>e.state.height),[e]),n=(0,o.useContext)(a)||window;return n!==window?n.innerHeight:t}function l(){const{WindowSizeStore:e}=(0,i().v3)();return(0,r().K8)((()=>{const{width:t,height:n}=e.state;return{width:t,height:n}}),[e])}a.displayName="ModalWindowContext"},755022:(e,t,n)=>{n.d(t,{D:()=>i});var o=()=>n(989423);function i(e,t){o().vd(e,"configure_view",t)}},755199:(e,t,n)=>{n.d(t,{Cw:()=>b,DH:()=>P,Hg:()=>h,Hw:()=>I,IP:()=>C,Mg:()=>L,OQ:()=>v,Sz:()=>y,Tu:()=>T,W2:()=>E,Wq:()=>f,Z1:()=>N,_I:()=>R,dD:()=>x,eO:()=>S,ee:()=>_,gV:()=>w,h9:()=>D,hT:()=>B,mJ:()=>g,p$:()=>A,pr:()=>M,sM:()=>m,wG:()=>k});n(944114),n(898992),n(354520);var o=()=>n(244641),i=()=>n(554279),r=()=>n(416504),a=()=>n(780054),s=()=>n(680074),l=()=>n(351360),c=()=>n(630116),d=()=>n(246826),u=()=>n(72234),p=()=>n(751156);async function m(e){if(a().A.isAdminMode)return;const{currentUserSettingsStore:t}=l().default.state;if(!t)return;await t.load();const n=t.getSettings();if(!n)return;const{device:o}=e,i={};!n.disable_auto_set_timezone&&(0,r().P)()!==n.time_zone&&(i.time_zone=(0,r().P)()),o.isDesktopBrowser&&!n.used_desktop_web_app&&(i.used_desktop_web_app=!0),o.isMobileBrowser&&!n.used_mobile_web_app&&(i.used_mobile_web_app=!0),o.isElectron&&o.isMac&&!n.used_mac_app&&(i.used_mac_app=!0),o.isElectron&&o.isWindows&&!n.used_windows_app&&(i.used_windows_app=!0),o.isMobileNative&&o.isIOS&&!n.used_ios_app&&(i.used_ios_app=!0),o.isMobileNative&&o.isAndroid&&!n.used_android_app&&(i.used_android_app=!0),Object.keys(i).length>0&&p().createAndCommit({userAction:"userSettingsActions.updateUserSettingsOnReset",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:t,data:i,transaction:e})}})}function g(e){const{userSettingsStore:t,data:n,transaction:o}=e;d().zv({store:t.getSettingsStore(),data:n,transaction:o})}function f(e){p().createAndCommit({userAction:"userSettingsActions.setStartWeekToMonday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&g({userSettingsStore:t,data:{start_day_of_week:1},transaction:e})}})}function v(e){p().createAndCommit({userAction:"userSettingsActions.setStartWeekToSunday",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{const{currentUserSettingsStore:t}=l().default.state;t&&g({userSettingsStore:t,data:{start_day_of_week:0},transaction:e})}})}function h(e){const{transaction:t,userSettingsStore:n,spaceId:o,type:i}=e;d().KY({store:(0,c()._y)(n,n.pointer,["settings","sidebar_outliner_settings",o,i,"has_pinned"]),value:!0,transaction:t})}function _(e){var t;const{collectionId:n,databaseType:o,transaction:i}=e,r=null===(t=l().default.state.currentSpaceStore)||void 0===t?void 0:t.id,a=l().default.state.currentUserSettingsStore;if(r&&a){var s,c;const e=(null===(s=a.getSettings())||void 0===s?void 0:s.lastUsedTypedCollections)||{},t=(null===(c=a.getSettings())||void 0===c?void 0:c.lastUsedDatabases)||{},l=e[r]||{},d=t[r]||[],u=o?l[o]??[]:[],p=[n,...u.filter((e=>e!==n))].slice(0,2),m=[n,...d.filter((e=>e!==n))].slice(0,5);g({userSettingsStore:a,transaction:i,data:{lastUsedDatabases:{...t,[r]:m},...o?{lastUsedTypedCollections:{...e,[r]:{...l,[o]:p}}}:{}}})}}function b(e){const{transaction:t,userSettingsStore:n,integrationId:o}=e;d().KY({store:(0,c()._y)(n,n.pointer,["settings","dismissed_link_preview_integration_popup",o]),value:!0,transaction:t})}function y(e,t){const n=(0,i().zD)(),o=(0,i().mS)();if(!n||!o)return;const r={};o&&(r.fbp=o),n&&(r.click_ids=n),p().createAndCommit({userAction:"userSettingsActions.persistAdClick",environment:e,canUndo:!0,cellTarget:"main",perform:e=>{e.postSubmitCallbacks.push((e=>{e||((0,i().uK)(),(0,i().fq)())})),g({userSettingsStore:t,data:r,transaction:e})}})}function S(e){const{currentUserSettingsStore:t}=l().default.state;if(!t)return;const{environment:n,dismissed:o}=e;p().createAndCommit({environment:n,userAction:"userSettingsActions.setDismissedSuggestModeTooltip",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:t,transaction:e,data:{dismissed_suggest_mode_tooltip:o}})}})}function w(e){const t=(0,s().R$)(e);t&&p().createAndCommit({environment:e,userAction:"userSettingsActions.setDismissStudentOrgPrompt",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:t,transaction:e,data:{dismissed_sidebar_student_org_prompt:!0}})}})}function k(e){const{environment:t,userSettingsStore:n,dismissed:o}=e;p().createAndCommit({environment:t,userAction:"userSettingsActions.setDismissDictationNewPageNux",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:n,transaction:e,data:{dismissed_dictation_new_page_nux:o}})}})}function I(e){const{environment:t}=e,{currentUserSettingsStore:n}=l().default.state;if(n){void 0===n.getSettingsStore().getKeyStore("seen_asana_post_import_tour").getValue()&&p().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenAsanaPostImportTutorial",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:n,transaction:e,data:{seen_asana_post_import_tour:!0}})}})}}function x(e){const{environment:t}=e,{currentUserSettingsStore:n}=l().default.state;if(n){void 0===n.getSettingsStore().getKeyStore("seen_forms_share_form_tooltip").getValue()&&p().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenFormsShareFormTooltip",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:n,transaction:e,data:{seen_forms_share_form_tooltip:!0}})}})}}function A(e){const{environment:t}=e,{currentUserSettingsStore:n}=l().default.state;if(n){void 0===n.getSettingsStore().getKeyStore("seen_forms_add_conditional_logic_tooltip").getValue()&&p().createAndCommit({environment:t,userAction:"userSettingsActions.setSeenFormsAddConditionalLogicTooltip",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:n,transaction:e,data:{seen_forms_add_conditional_logic_tooltip:!0}})}})}}function C(e){var t;const n=(0,s().R$)(e);n&&(null!==(t=n.getSettings())&&void 0!==t&&t.inapp_gallery_first_visited_at||p().createAndCommit({environment:e,userAction:"userSettingsActions.setFirstMarketplaceVisitTime",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:n,transaction:e,data:{inapp_gallery_first_visited_at:o().c9.now().toMillis()}})}}))}function T(e,t){var n;const{listingId:o}=t,i=(0,s().R$)(e);if(!i)return;let r=null==i||null===(n=i.getSettings())||void 0===n?void 0:n.marketplace_review_nudge;r||(r={});let a=r[o];a||(a=[]),a.push(Date.now()),r[o]=a,p().createAndCommit({environment:e,userAction:"userSettingsActions.markMarketplaceReviewNudgeAsShown",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:i,data:{marketplace_review_nudge:r},transaction:e})}})}function M(e,t){var n;const{entryPoint:o}=t,i=(0,s().R$)(e);if(!i)return;const r=(null==i||null===(n=i.getSettings())||void 0===n?void 0:n.adoption_entry_points)||{};r[o]=[...r[o]||[],Date.now()],p().createAndCommit({environment:e,userAction:"userSettingsActions.markAdoptionEntryPointShown",canUndo:!1,cellTarget:"main",perform:e=>{g({userSettingsStore:i,transaction:e,data:{adoption_entry_points:r}})}})}function P(e){const t=(0,s().R$)(e);t&&p().createAndCommit({environment:e,userAction:"userSettingsActions.markAdoptionInboxShown",canUndo:!1,cellTarget:"main",perform:e=>{g({userSettingsStore:t,transaction:e,data:{adoption_sidebar_inbox:!0}})}})}function B(e){const t=(0,s().R$)(e);t&&p().createAndCommit({environment:e,userAction:"userSettingsActions.markAdoptionTrashShown",canUndo:!1,cellTarget:"main",perform:e=>{g({userSettingsStore:t,transaction:e,data:{adoption_sidebar_trash:!0}})}})}function R(e){const{environment:t,skillType:n}=e,o=(0,s().R$)(t);if(!o)return;const i=o.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(n),r=i.getKeyStore("interacted_with_timestamps").getValue()??[];p().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsUsed",canUndo:!0,cellTarget:"main",perform:e=>{d().zv({transaction:e,store:i,data:{interacted_with_timestamps:[...r,Date.now()]}})}})}function E(e){const{environment:t,skillType:n}=e,o=(0,s().R$)(t);if(!o)return;const i=o.getSettingsStore().getKeyStore("ai_suggested_skill_exposure_tracker").getKeyStore(n),r=i.getKeyStore("suggested_timestamps").getValue()??[];p().createAndCommit({environment:t,userAction:"userSettingsActions.markSkillAsSuggested",canUndo:!0,cellTarget:"main",perform:e=>{d().zv({transaction:e,store:i,data:{suggested_timestamps:[...r,Date.now()]}})}})}function D(e){const t=(0,s().R$)(e);t&&p().createAndCommit({environment:e,userAction:"userSettingsActions.dismissAiPageTranslationPassiveSuggestions",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:t,transaction:e,data:{ai_page_translation_dismissed_at:Date.now()}})}})}function N(e){const{currentSpaceViewStore:t}=l().default.state;t&&p().createAndCommit({environment:e,userAction:"userSettingsActions.markCollaborationNudgeAsSeen",canUndo:!0,cellTarget:"main",perform:e=>{u().AG(t,e,{business_trial_ending_modal_last_shown_at:Date.now()})}})}function L(e){var t;let{environment:n,experimentId:o}=e;const i=(0,s().R$)(n);if(!i)return;const r=null===(t=i.getSettings())||void 0===t?void 0:t.exposed_to_adoption_user_journey_experiment,a=null==r?void 0:r[o];Boolean(a)||p().createAndCommit({environment:n,userAction:"userSettingsActions.setAdoptionUserJourneyExperimentExposure",canUndo:!0,cellTarget:"main",perform:e=>{g({userSettingsStore:i,transaction:e,data:{exposed_to_adoption_user_journey_experiment:{...r,[o]:!0}}})}})}},755362:(e,t,n)=>{n.d(t,{e:()=>r});var o=()=>n(989423),i=()=>n(508496);function r(e,t){(0,o().u4)({environment:e,event:{eventName:"click_sharing_panel",eventProperties:{panel_type:t.panel_type}}}),i().default.logEvent("click_sharing_panel",void 0,{panel_type:t.panel_type})}},755636:(e,t,n)=>{n.d(t,{f:()=>s});var o=()=>n(939768),i=()=>n(780054),r=()=>n(508496),a=()=>n(705540);function s(e){const{environment:t,targetSelf:n}=e;let s=e.url;"/"===s[0]&&(s=i().A.domainBaseUrl+s);const l=o().q7(s);if(l)if(t.device.isElectron)a().openExternalUrl(l);else if(t.mobileNative)l.startsWith("http:")||l.startsWith("https:")?r().default.checkGate({gateName:"mobile_open_links_in_external_browser"})?t.mobileNative.openLink(l):t.mobileNative.openInAppBrowser(l):window.location.href=l;else{const t=document.createElement("a");t.href=e.url,t.classList.add("notion-link"),n||t.setAttribute("target","_blank"),t.setAttribute("rel","noopener noreferrer"),document.body.appendChild(t),t.click(),t.remove()}}},755673:(e,t,n)=>{n.d(t,{z:()=>d});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(430670),n(581454);var o=()=>n(970013),i=()=>n(448801),r=()=>n(179034),a=()=>n(630116),s=()=>n(722101),l=(n(354520),()=>n(496603));function c(e){const{collectionContextStore:t,collectionViewStore:n,transaction:i}=e,c=n.getPageSortStore(),d=c.getValue(),u=t.groupsStore.getAllGroupStates(),p=function(e){const{pageSort:t,currentResults:n}=e;if(!t||t.length<=o().WF)return[];const i=t.filter((e=>!n.has(e)));return l().sb([...i.reverse(),...l().o8(t).reverse()]).slice(0,t.length-o().WF)}({pageSort:d,currentResults:new Set(u.flatMap((e=>e.resultsStore.state.map((e=>e.id)))))});for(const o of p)s().TF({parentStore:c,childToRemoveStore:(0,a().Oo)(c,{table:r().ev,id:o}),transaction:i})}function d(e){const{resultIds:t,collectionViewStore:n,collectionContextStore:l,transaction:d}=e,u=n.getPageSortStore(),p=u.getValue()||[],{beforeOps:m}=(0,i().i)(p,t.slice(0,o().WF));for(const[o,i]of Object.entries(m))if(i){const e=(0,a().Oo)(n,{table:r().ev,id:i});s().nc({parentStore:u,insertStore:(0,a().Oo)(n,{table:r().ev,id:o}),beforeStore:e,transaction:d})}else{const e=t.findIndex((e=>e===o)),i=t[e-1],l=i?(0,a().Oo)(n,{table:r().ev,id:i}):void 0;s().WH({parentStore:u,insertStore:(0,a().Oo)(n,{table:r().ev,id:o}),afterStore:l,transaction:d})}c({collectionContextStore:l,collectionViewStore:n,transaction:d})}},756123:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(712030),s=n(474848);const l=o.memo((function(e){let{char:t,size:l,testId:c,alt:d}=e;const[u,p]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1);(0,o.useEffect)((()=>{const e=window.setTimeout((()=>{m||p(!0)}),300);return()=>{window.clearTimeout(e)}}),[m]);const f=(0,i().v3)(),v=(0,r().K8)((()=>(0,a().FN)(f)),[f]),h=(0,n(267419)._)(),_=(0,n(669729).$)(t,h);if("raw"===v||!_)return(0,s.jsx)(n(141507).A,{char:t,alt:d});const b="apple"===v?`img-apple-160/${_.codepoints}.png`:"google"===v?`img-google-136/${_.codepoints}.png`:"twitter"===v?`svg-twitter/${_.codepoints}.svg`:(0,n(534177).HB)(v);return(0,s.jsxs)("div",{style:{position:"relative",width:l,height:l},children:[(0,s.jsx)(n(169386).A,{char:t,type:v,size:l,style:{opacity:u&&!m?1:0,transition:"opacity ease-out 100ms"},emojiData:h,alt:d}),(0,s.jsx)("img",{alt:void 0!==d?[t,d].join(" "):t,style:{position:"absolute",top:0,left:0,opacity:m?1:0,transition:m&&u?"opacity ease-in 100ms":void 0,width:l,height:l},onLoad:()=>g(!0),src:"https://notion-emojis.s3-us-west-2.amazonaws.com/prod/"+b})]})}));const c=function(e){let{emoji:t,isRaw:o=!0,size:c,disableShrinking:d,alt:u,testId:p}=e;const m=(0,i().v3)(),g=(0,i().Y0)(),f=(0,r().K8)((()=>(0,a().FN)(m)),[m]),v=(0,n(401497).IS)((e=>{let t=c,n=0;if(c<28&&!d){t=g.isRetina&&g.isChrome?.9*t:.7*t}return o&&"raw"===f&&(g.isSafari||g.isIOS)&&(n=-5),{container:{display:"flex",alignItems:"center",justifyContent:"center",height:c,width:c},emoji:{height:t,width:t,fontSize:t,lineHeight:1,marginLeft:n,color:e.regularEmojiColor}}}),[c,o,f,g,d]);return(0,s.jsx)("div",{style:v.container,children:(0,s.jsx)("div",{style:v.emoji,children:t&&(c>32?(0,s.jsx)(l,{char:t,size:c,testId:p,alt:u}):(0,s.jsx)(n(56086).A,{char:t,testId:p,alt:u}))})})}},756279:(e,t,n)=>{n.d(t,{A:()=>i});var o=function(e){return e[e.All=0]="All",e[e.X=1]="X",e[e.Y=2]="Y",e[e.None=3]="None",e}(o||{});const i=o},756315:(e,t,n)=>{n.d(t,{d:()=>a,s:()=>i});var o=()=>n(206267);function i(){return{currentScreen:"none",availableSyncControlOptions:[],syncControlSelection:void 0,initialSyncState:"none",isDisconnecting:!1,isEditing:!1,sessionId:o().JW(),analyticsFrom:"unknown",syncProgress:"not_started",syncCurrent:0,syncTotal:0,ingestionProgress:void 0,connectedSpaceId:"",isLoaded:!1}}class r extends(()=>n(757695))().default{getInitialState(){return i()}}const a=new r;(0,n(604341).exposeDebugValue)("googleDriveConnectionStore",a)},758740:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(484714),r=()=>n(939768),a=n(474848);function s(e,t){let{disabled:s,onClick:l,onDoubleClick:c,href:d,external:u,forceAltHref:p,doubleClickPreventsSingleClick:m,altHref:g,metaHref:f,style:v,replaceHistoryState:h,preNavigationAction:_,...b}=e;const y=(0,i().v3)(),S=(0,i().Y0)(),w=(0,o.useContext)(n(484792).n),[k,I]=(0,o.useState)(void 0),x=(0,o.useCallback)((e=>{if(l&&l(e),e.defaultPrevented||""===d)return;const t=e.metaKey||e.ctrlKey;if(!S.isElectron&&t)return;const o=n(728611).Vr(e);function i(t){const i=r().Jf({str:d,allowNoProtocol:!0});if(!i)return;const a=r().Jf({str:f,allowNoProtocol:!0});if(u)n(755636).f({environment:t??y,url:a||i});else if(w)w(a||i);else{let s;if(e.altKey||p){const e="function"==typeof g?g():g;s=r().Jf({str:e,allowNoProtocol:!0})||i}else s=Boolean(o)?i:a||i;n(435009).oo({environment:t??y,url:s,openInNew:o,redirect:h})}}(S.isElectron||!o||u)&&(e.preventDefault(),(!e.shiftKey||S.isElectron&&e.altKey)&&(_?_(i):i()))}),[g,S.isElectron,y,u,p,d,f,l,w,_,h]),A=(0,o.useMemo)((()=>{let e=r().Jf({str:d,allowNoProtocol:!0});if("string"==typeof e&&u&&r().cW(e)&&(e=r().pf({relativeUrl:e,baseUrl:n(780054).A.domainBaseUrl})),"string"==typeof e)try{return decodeURIComponent(e)}catch(t){n(857639).log({level:"info",from:"LinkBox",type:"renderComponent",error:{message:`Encountered error in decodeURIComponent ${e}`}})}return e}),[u,d]),C=(0,n(401497).IS)((()=>({root:{display:"block",color:"inherit",textDecoration:"none"}})),[]);return(0,a.jsx)("a",{"aria-disabled":s,ref:t,href:m?void 0:A,role:m?"link":void 0,tabIndex:m?0:void 0,onClick:((e,t)=>n=>{clearTimeout(k),m?1===n.detail?I(setTimeout((()=>{null==e||e(n)}),200)):2===n.detail&&(null==t||t(n)):null==e||e(n)})(x,c),style:{...C.root,...v},target:u?"_blank":void 0,rel:"noopener noreferrer",...b,children:b.children})}const l=o.forwardRef(s)},760217:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(100622),r=n(474848);const a={color:i().Ay.red,fill:i().Ay.red};function s(e,t){let{id:i,role:s,focused:l,disabled:c,onClick:d,allowTextSelection:u,disableTransition:p,disallowTabbing:m,className:g,ignoreLocalHoverState:f,pressed:v,hoveredStyle:h,pressedStyle:_,buttonStyle:b,isRedOnHover:y,href:S,external:w,onFocus:k,onKeyDown:I,...x}=e;const A=(0,n(484714).Y0)(),{isMenuListFocusVisible:C}=o.useContext(n(939740).VU),T=(0,n(401497).IS)((e=>({buttonStyle:{width:"100%",...!A.isMobile&&{display:"flex",borderRadius:6},...!c&&l&&C&&{boxShadow:e.outlineBlueInputBoxShadow},...b},hoveredButtonStyle:y?{...a,...h}:{...h}})),[b,A.isMobile,h,y,l,C,c]);return(0,r.jsx)(n(112995).K,{from:"ButtonMenuItem",fallback:e=>{let{error:t,errorId:o}=e;return(0,r.jsx)(n(794359).P,{error:t,errorId:o})},children:(0,r.jsx)(n(704152).A,{id:i,role:s,className:g,onClick:d,onFocus:k,onKeyDown:I,focused:!c&&l,disabled:c,disabledFeedback:x.disabledFeedback,disallowTabbing:m,disableTransition:p,mobileFeedback:A.isMobile,allowTextSelection:u,ignoreLocalHoverState:f,pressed:v,ref:t,style:T.buttonStyle,hoveredStyle:T.hoveredButtonStyle,pressedStyle:_,href:S,external:w,children:(0,r.jsx)(n(678553).Ay,{allowTextSelection:u,...x})})})}const l=o.forwardRef(s)},760578:(e,t,n)=>{n.d(t,{nV:()=>I,mo:()=>g,Zt:()=>f,qC:()=>k,I_:()=>b,mv:()=>_,WI:()=>x,Ew:()=>y,uX:()=>S,qS:()=>w,Jh:()=>A,Pf:()=>h,vP:()=>v,Ic:()=>m});var o=()=>n(481235),i=(n(296540),()=>n(340498)),r=n(474848);const a=(0,i().wt)("hand",{viewBox:"0 0 28 28",svg:(0,r.jsx)("path",{d:"M13.6572 23.1553C16.918 23.1553 19.1943 21.415 20.416 17.9873L21.9893 13.584C22.1035 13.2588 22.1562 12.9512 22.1562 12.6611C22.1562 11.6592 21.4092 10.9209 20.416 10.9209C19.7832 10.9209 19.2119 11.2812 18.9131 11.9668L18.4385 13.1182C18.4209 13.1533 18.4033 13.1709 18.3682 13.1709C18.3242 13.1709 18.3066 13.1445 18.3066 13.1006V6.35059C18.3066 5.23438 17.5771 4.51367 16.4961 4.51367C16.1621 4.51367 15.8545 4.61914 15.6172 4.82129C15.4414 3.93359 14.8174 3.38867 13.9121 3.38867C13.0332 3.38867 12.3916 3.94238 12.207 4.80371C11.9873 4.61035 11.7061 4.51367 11.4072 4.51367C10.3965 4.51367 9.70215 5.2168 9.70215 6.2627V7.08008C9.48242 6.86914 9.16602 6.75488 8.83203 6.75488C7.82129 6.75488 7.10938 7.51074 7.10938 8.58301V16.2822C7.10938 20.5361 9.72852 23.1553 13.6572 23.1553ZM13.6133 21.6523C10.4668 21.6523 8.54199 19.6484 8.54199 16.124V8.75C8.54199 8.41602 8.75293 8.1875 9.06934 8.1875C9.39453 8.1875 9.62305 8.41602 9.62305 8.75V13.2764C9.62305 13.6543 9.93066 13.918 10.2822 13.918C10.6426 13.918 10.9502 13.6543 10.9502 13.2764V6.48242C10.9502 6.14844 11.1611 5.91992 11.4863 5.91992C11.8027 5.91992 12.04 6.14844 12.04 6.48242V12.8105C12.04 13.1885 12.3389 13.4609 12.6904 13.4609C13.0508 13.4609 13.3584 13.1885 13.3584 12.8105V5.36621C13.3584 5.04102 13.5869 4.79492 13.9033 4.79492C14.2197 4.79492 14.4482 5.04102 14.4482 5.36621V12.7051C14.4482 13.0654 14.7383 13.3467 15.0986 13.3467C15.4678 13.3467 15.7666 13.0654 15.7666 12.7051V6.48242C15.7666 6.14844 15.9863 5.91992 16.3115 5.91992C16.6279 5.91992 16.8564 6.14844 16.8564 6.48242V15.2451C16.8564 15.7549 17.1816 16.0449 17.6035 16.0361C17.9551 16.0361 18.2715 15.8779 18.4824 15.4121L19.748 12.5732C19.8975 12.2305 20.1963 12.125 20.4688 12.2217C20.7676 12.3359 20.8643 12.626 20.7236 13.0039L19.0889 17.5127C17.999 20.501 16.1621 21.6523 13.6133 21.6523Z"})}),s=(0,i().wt)("overlap",{viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M4.917 14.496h1.729v-1.1H4.93c-.342 0-.604-.091-.786-.274-.182-.182-.273-.45-.273-.806V5.52c0-.356.09-.625.273-.807.182-.182.444-.273.786-.273h6.83c.336 0 .596.09.779.273.186.182.28.451.28.807v1.497h1.1V5.459c0-.702-.18-1.23-.54-1.586-.355-.355-.888-.533-1.6-.533H4.918c-.716 0-1.254.178-1.614.533-.355.351-.533.88-.533 1.586v6.918c0 .707.178 1.237.533 1.593.36.35.898.526 1.614.526zm3.315 3.165h6.863c.711 0 1.244-.177 1.6-.533.36-.355.54-.884.54-1.586V8.624c0-.702-.18-1.23-.54-1.586-.356-.355-.889-.533-1.6-.533H8.232c-.716 0-1.253.178-1.613.533-.356.351-.534.88-.534 1.586v6.918c0 .707.178 1.235.534 1.586.36.356.897.533 1.613.533zm.014-1.1c-.342 0-.604-.091-.787-.274-.182-.182-.273-.45-.273-.806V8.686c0-.356.091-.625.273-.807.183-.182.445-.273.787-.273h6.829c.337 0 .597.09.779.273.187.182.28.451.28.807v6.795c0 .355-.093.624-.28.806-.182.183-.442.274-.78.274H8.247z"}),(0,r.jsx)("path",{d:"M13.976 12.448l-1.832 1.36c-.192.147-.379.183-.561.11-.182-.073-.273-.225-.273-.458v-.848H9.7a.533.533 0 01-.383-.15.521.521 0 01-.157-.383c0-.145.053-.27.157-.376s.233-.157.383-.157h1.61v-.827c0-.246.093-.401.28-.465.187-.068.371-.034.554.103l1.832 1.374a.43.43 0 01.184.362.423.423 0 01-.184.356z"})]})});var l=()=>n(959013),c=()=>n(534177),d=()=>n(895876);const u=(0,l().YK)({dependenciesPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.dependencies.propertySelectPopup.default.caption",defaultMessage:"This property will be used for dependencies in new views, and will set date shifting behavior across all views."},deleteDependenciesAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteDependenciesAcceptModal.title",defaultMessage:"Turn off dependencies?"},dependenciesMenuTitle:{id:"database.viewSettings.dependenciesTab.title",defaultMessage:"Dependencies"},dateShiftingSectionCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.caption",defaultMessage:"Automatic date shifting"},datePropertyPickerTitle:{id:"database.viewSettings.relationFeatures.datePropertyPicker.title",defaultMessage:"Shift using"},startDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.startDate",defaultMessage:"Start date"},endDate:{id:"database.viewSettings.relationFeatures.datePropertyPicker.endDate",defaultMessage:"End date"},advancedSettings:{id:"database.viewSettings.dependenciesAdvancedSettingsTab.title",defaultMessage:"Advanced settings"},newDateProperty:{id:"collectionSettings.dependenciesFeature.newDateProperty.name",defaultMessage:"Date"},doNotShiftButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.doNotShift.label",defaultMessage:"Do not automatically shift"},consumeGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.consumeGap.label",defaultMessage:"Shift only when dates overlap"},avoidWeekendsSwitcherTitle:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.title",defaultMessage:"Avoid weekends"},hideDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.hideDependenciesInView",defaultMessage:"Hide dependencies in view"},showDependenciesInView:{id:"CollectionSettingsViewRelationFeatures.showDependenciesInView",defaultMessage:"Show dependencies in view"},turnOnDependenciesButton:{id:"collectionSettings.dependenciesView.turnOnDependenciesButton.label",defaultMessage:"Turn on dependencies"},turnOffDependenciesButton:{id:"database.viewSettings.relationsPropertyTab.removeDependenciesButton.title",defaultMessage:"Turn off dependencies"},dateShiftSuccess:{id:"collectionDateActions.dateShiftSuccess",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}"},dateShiftSomeNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftSomeNotUpdatedDueToPermissions",defaultMessage:"Shifted the dates of {numDependenciesUpdated, plural, one {1 dependent {item}} other {{numDependenciesUpdated} dependent {items}}}. Others could not be shifted because you do not have permission"},dateShiftAllNotUpdatedDueToPermissions:{id:"collectionDateActions.dateShiftAllNotUpdatedDueToPermissions",defaultMessage:"The dates of dependent {items} could not be shifted because you do not have permission"},shiftingNotApplicableNoShiftingMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableNoShiftingMessage",defaultMessage:"The dates of dependent {items} in this view will not automatically shift. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicableConsumeGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicableConsumeGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift when {item} dates overlap. To change the date shifting behavior, update the default relation property in Advanced settings."},shiftingNotApplicablePreserveGapMessage:{id:"CollectionSettingsViewRelationFeatures.shiftingNotApplicablePreserveGapMessage",defaultMessage:"The dates of dependent {items} in this view will shift maintaining the time between {items}. To change the date shifting behavior, update the default relation property in Advanced settings."},preserveGapButton:{id:"collectionSettings.dependenciesView.dateShiftingButton.preserveGap.label",defaultMessage:"Shift & maintain time between {items}"},avoidWeekendsSwitcherCaption:{id:"collectionSettings.dependenciesView.dateShiftingSection.avoidWeekends.switcher.description",defaultMessage:"Prevent shifted {items} from starting or ending on weekends"},dependenciesMenuDescription:{id:"database.viewSettings.relationsPropertyTab.dependencies.description",defaultMessage:"Use dependencies to show {items} that are blocking — or blocked by — other {items}."},dependenciesPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.dependencies.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the {items} that are blocked. We use “Blocking” as our default."}}),p=(0,l().YK)({hideSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.hideSubitemsInView",defaultMessage:"Hide sub-{items} in view"},showSubitemsInView:{id:"CollectionSettingsViewRelationFeatures.showSubitemsInView",defaultMessage:"Show sub-{items} in view"},turnOnSubItemsButton:{id:"collectionSettings.subitemsView.turnOnSubitemsButton.label",defaultMessage:"Turn on sub-{items}"},turnOffSubItemsButton:{id:"database.viewSettings.relationsPropertyTab.removeSubItemsButton.title",defaultMessage:"Turn off sub-{items}"},subItemsMenuTitle:{id:"database.viewSettings.subItemsTab.title",defaultMessage:"Sub-{items}"},subItemsMenuDescription:{id:"database.viewSettings.relationsPropertyTab.subitems.description",defaultMessage:"Break down {items} in toggles"},deleteSubItemsAcceptModalTitle:{id:"collectionSettings.relationFeatures.deleteSubItemsAcceptModal.title",defaultMessage:"Remove related properties when turning off sub-{items}?"},subItemsPropertyPickerCaption:{id:"database.viewSettings.relationsPropertyTab.subitems.relationPropertyPicker.caption",defaultMessage:"Choose the relation property that represents the sub-{items}. We use “Sub-{item}” as our default."},subItemsPropertySelectDefaultOptionCaption:{id:"database.viewSettings.relationFeatures.subitems.propertySelectPopup.default.caption",defaultMessage:"This property will be used for sub-{items} in new views."},toggleNestingOnTitleMenuItemTooltip:{id:"database.viewSettings.relationFeatures.subitems.toggleNestingOnTitleMenuItemTooltip.default.caption",defaultMessage:"Whether nesting and the toggle button should always be on the title column or the left-most column. Only relevant for table views"}}),m=(0,l().YK)({relationFeatureShownMessage:{id:"database.viewSettings.mainTab.feature.shown",defaultMessage:"Shown"},relationFeatureOnMessage:{id:"database.viewSettings.mainTab.feature.on",defaultMessage:"On"},relationFeatureOffMessage:{id:"database.viewSettings.mainTab.feature.off",defaultMessage:"Off"},relationFeatureHiddenMessage:{id:"database.viewSettings.mainTab.relationFeatureHidden",defaultMessage:"Hidden"},removePropertiesTitle:{id:"collectionSettings.relationFeatures.removePropertiesTitle",defaultMessage:"Remove properties"},keepPropertiesTitle:{id:"collectionSettings.relationFeatures.keepPropertiesTitle",defaultMessage:"Keep properties"},removePropertiesDescription:{id:"collectionSettings.relationFeatures.removePropertiesDescription",defaultMessage:"Delete {property} and {inverseProperty}."},turnOff:{id:"collectionSettings.relationFeatures.turnOffFeatureAllViewsButton.label",defaultMessage:"Turn off"},...u,...p});function g(e){return"consume_gap"===e?s:"preserve_gap"===e?o().H:a}function f(e){let t;return t="consume_gap"===e.dateShiftingMode?m.consumeGapButton:"preserve_gap"===e.dateShiftingMode?m.preserveGapButton:m.doNotShiftButton,{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function v(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOnDependenciesButton:"subitem"===e.feature?t=m.turnOnSubItemsButton:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function h(e){let t;return"timeline_arrows_by"===e.feature?t=m.turnOffDependenciesButton:"subitem"===e.feature?t=m.turnOffSubItemsButton:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function _(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuTitle:"subitem"===e.feature?t=m.subItemsMenuTitle:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function b(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesMenuDescription:"subitem"===e.feature?t=m.subItemsMenuDescription:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function y(e){let t;return"timeline_arrows_by"===e.feature?t=m.deleteDependenciesAcceptModalTitle:"subitem"===e.feature?t=m.deleteSubItemsAcceptModalTitle:(0,c().HB)(e.feature),{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function S(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertyPickerCaption:"subitem"===e.feature?t=m.subItemsPropertyPickerCaption:(0,c().HB)(e.feature),{...t,values:{item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)}}}function w(e){let t;return"timeline_arrows_by"===e.feature?t=m.dependenciesPropertySelectDefaultOptionCaption:"subitem"===e.feature?t=m.subItemsPropertySelectDefaultOptionCaption:(0,c().HB)(e.feature),{...t,values:{item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)}}}function k(e){let t;return(0,c().O9)(e.currentDateShiftConfig)?"preserve_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicablePreserveGapMessage:"consume_gap"===e.currentDateShiftConfig.mode?t=m.shiftingNotApplicableConsumeGapMessage:(0,c().HB)(e.currentDateShiftConfig.mode):t=m.shiftingNotApplicableNoShiftingMessage,{...t,values:{items:(0,d().oj)(e.databaseType,!0)}}}function I(e){return{...m.avoidWeekendsSwitcherCaption,values:{items:(0,d().oj)(e,!0)}}}function x(e){const{feature:t,isOn:n,databaseType:o}=e;let i;return"timeline_arrows_by"===t?i=n?m.hideDependenciesInView:m.showDependenciesInView:"subitem"===t?i=n?m.showSubitemsInView:m.hideSubitemsInView:(0,c().HB)(t),{...i,values:{items:(0,d().oj)(o,!0)}}}function A(e){const t={numDependenciesUpdated:e.result.numDependenciesUpdated,item:(0,d().$O)(e.databaseType,!0),items:(0,d().oj)(e.databaseType,!0)};return e.result.numCouldNotUpdateDueToPermissions>0?e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSomeNotUpdatedDueToPermissions,values:t},canUndo:!0}:{message:{...m.dateShiftAllNotUpdatedDueToPermissions,values:{}},canUndo:!1}:e.result.numDependenciesUpdated>0?{message:{...m.dateShiftSuccess,values:t},canUndo:!0}:void 0}},761652:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(630116),a=n(474848);function s(e){const{store:t,useInvertedColors:o,style:s,iconStyle:l,maxLength:c,shouldWrap:d}=e,u=(0,i().K8)((()=>t.getIcon()),[t]),p=(0,i().K8)((()=>t instanceof r().Bv&&t.isEmptyPage()),[t]),m=(0,n(401497).IS)((()=>({container:{whiteSpace:d?"normal":"nowrap",fontWeight:n(284371).Wy.bold,...s},recordIcon:{marginRight:4,display:"inline-block",verticalAlign:"middle",...l},recordTitle:{display:"inline"}})),[d,l,s]),g=Boolean(u)||t instanceof r().Bv;return(0,a.jsxs)("span",{style:m.container,children:[g&&(0,a.jsx)(n(614505).B,{disabled:!0,icon:u,isEmptyPage:p,size:12,style:m.recordIcon,useInvertedColors:o}),(0,a.jsx)(n(16006).A,{store:t,style:m.recordTitle,maxLength:c,shouldWrap:d})]})}const l=o.memo(s)},762433:(e,t,n)=>{n.d(t,{ek:()=>M,Xu:()=>U,$d:()=>Q,ji:()=>Z,kQ:()=>z,AW:()=>q,DS:()=>ce,qd:()=>ie,V9:()=>G,KH:()=>j,d$:()=>$,Rz:()=>re,q8:()=>O,Ry:()=>E,yB:()=>N,AI:()=>W,t_:()=>de,i5:()=>B,YF:()=>ae,et:()=>se,Gm:()=>H,eh:()=>K,Fv:()=>oe,bO:()=>ue,N8:()=>P,Fq:()=>D,TB:()=>R,Qx:()=>F,IE:()=>J,xp:()=>X,HO:()=>ne,OK:()=>Y,Mr:()=>ee,q5:()=>te,PP:()=>T,lQ:()=>C});n(16280),n(898992),n(823215),n(354520),n(672577),n(581454),n(737550);var o=()=>n(244641),i=()=>n(496603),r=()=>n(534177),a=()=>n(720665),s=()=>n(326215),l=()=>n(441738);const c={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:o().c9.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:499}}]},d={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:o().c9.utc(2024,10,14),original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:4799}}]},u={revenueCatProductIds:["notion.id.personal_pro_monthly","notion.local.id.personal_pro_monthly","notion.dev.id.personal_pro_monthly","notion.stg.id.personal_pro_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:o().c9.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},p={revenueCatProductIds:["notion.id.ai_monthly","notion.local.id.ai_monthly","notion.dev.id.ai_monthly","notion.stg.id.ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},m={revenueCatProductIds:["notion.id.personal_pro_yearly","notion.local.id.personal_pro_yearly","notion.dev.id.personal_pro_yearly","notion.stg.id.personal_pro_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:o().c9.utc(2024,10,14),prices:[{externalId:"notion.id.personal_pro_yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},g={revenueCatProductIds:["notion.id.ai_yearly","notion.local.id.ai_yearly","notion.dev.id.ai_yearly","notion.stg.id.ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai_yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9599}}]},f={revenueCatProductIds:["notion.id.personal_plus:monthly","notion.local.id.personal_plus:monthly","notion.dev.id.personal_plus:monthly","notion.stg.id.personal_plus:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:monthly",billingInterval:"month",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:1199}}]},v={revenueCatProductIds:["notion.id.ai:monthly","notion.local.id.ai:monthly","notion.dev.id.ai:monthly","notion.stg.id.ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:monthly",billingInterval:"month",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:999}}]},h={revenueCatProductIds:["notion.id.personal_plus:yearly","notion.id.personal_plus:yearly-2","notion.local.id.personal_plus:yearly","notion.dev.id.personal_plus:yearly","notion.stg.id.personal_plus:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.personal_plus:yearly",billingInterval:"year",product:"personal",state:"current",unitAmount:{currencyCode:"USD",amount:11999}}]},_={revenueCatProductIds:["notion.id.ai:yearly","notion.local.id.ai:yearly","notion.dev.id.ai:yearly","notion.stg.id.ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:[{externalId:"notion.id.ai:yearly",billingInterval:"year",product:"ai",state:"current",unitAmount:{currencyCode:"USD",amount:9499}}]},b={revenueCatProductIds:["notion.id.plus_ai_monthly","notion.local.id.plus_ai_monthly","notion.dev.id.plus_ai_monthly","notion.stg.id.plus_ai_monthly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:u.prices.concat(p.prices)},y={revenueCatProductIds:["notion.id.plus_ai_yearly","notion.local.id.plus_ai_yearly","notion.dev.id.plus_ai_yearly","notion.stg.id.plus_ai_yearly"],store:"app_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:m.prices.concat(g.prices)},S={revenueCatProductIds:["notion.id.plus_ai:monthly","notion.local.id.plus_ai:monthly","notion.dev.id.plus_ai:monthly","notion.stg.id.plus_ai:monthly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:f.prices.concat(v.prices)},w={revenueCatProductIds:["notion.id.plus_ai:yearly","notion.local.id.plus_ai:yearly","notion.dev.id.plus_ai:yearly","notion.stg.id.plus_ai:yearly"],store:"play_store",original_purchase_date_before:void 0,original_purchase_date_after:void 0,prices:h.prices.concat(_.prices)},k=[p,g,v,_,c,d,u,m,f,h,b,y,S,w];var I=()=>n(984380),x=()=>n(622963),A=()=>n(979340);function C(e){return e.subscription?e.subscription.pending?{...e.subscription.pending,trialEnd:void 0}:e.subscription:{items:[],trialEnd:void 0}}function T(e){return e.subscription??{trialEnd:void 0,items:[]}}function M(e){let t;return t="free"===e||"personal_free"===e||"team_free"===e?void 0:{quantity:0,price:{externalId:"DANGEROUS__toFakeSubscriptionStateFromSubscriptionTier externalId",product:e,billingInterval:"month",unitAmount:{amount:0,currencyCode:"USD"},state:"current"}},{trialEnd:void 0,items:(0,i().oE)([t])}}function P(e){return((null==e?void 0:e.items)??[]).some((e=>s().xB.includes(e.price.externalId)))}function B(e){var t,n;if(!e)return;const o=null===(t=e.subscription)||void 0===t?void 0:t.trialEnd,i=null===(n=e.trial)||void 0===n?void 0:n.endDate;return o||i?o?i?o>i?o:i:o:i:void 0}function R(e){const t=B(e);return Boolean(t&&t.diffNow().milliseconds>0)}function E(e){const t=V(e);if(0===t.length)return;const[n,o]=(0,i().jB)(t,(e=>le(e.price.externalId))),r=(0,a().Z$)(n.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.");return(0,a().Z$)(o.map((e=>e.price.unitAmount.currencyCode)),"All subscription items should have the same currency code.")??r}function D(e){return!(null==e||!e.subscription)&&e.subscription.items.length>0}function N(e){const{logFunction:t,spaceId:n,billingData:o}=e,r=L(o),a=(0,i().sb)(Object.values(r));if(a.length>1)throw t({level:"error",from:"billingSeatHelpers",type:"InaccurateSeatQuantity",data:{miscDataToConvertToString:{spaceId:n,subscriptionState:JSON.stringify(null==o?void 0:o.subscription,null,2)}}}),new Error("With the exception of the sites_custom_hostnames add-on, all subscription items should have the same quantity.");return a[0]}function L(e){const t=V(e);return 0===t.length?{}:Object.fromEntries(t.filter((e=>"seats"===(0,x().vK)(e.price.product))).map((e=>[e.price.externalId,e.quantity])))}function O(e){const t=null==e?void 0:e.subscription;if(!t)return;const[n,o]=(0,i().jB)(t.items,(e=>le(e.price.externalId))),r=(0,a().Z$)(n.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.");return(0,a().Z$)(o.map((e=>e.price.billingInterval)),"All subscription items should have the same billing interval.")??r}function U(e,t){if(!e.subscription)return t;const n=O(e);if(!n)return t;let i=e.subscription.currentPeriodEnd;const r="month"===n?o().dw.fromObject({month:1}):o().dw.fromObject({year:1}),a=o().dw.fromObject({hour:2});for(;t>i.plus(a);)i=i.plus(r);return i}function F(e){return!!e&&e.items.every((e=>0===e.price.unitAmount.amount))}function V(e){var t;const n=[...R(e)&&null!=e&&e.trial?e.trial.items:[],...(null==e||null===(t=e.subscription)||void 0===t?void 0:t.items)??[]],[o,r]=(0,i().jB)(n,(e=>"plan"===J(e))),a=(0,i().Sk)(o,(e=>{const t=X(e)||"free";return A().o3[t]}));return a?[a,...r]:r}function j(e,t){return V(e).find((e=>J(e)===t))}function z(e,t){return V({subscription:null==e?void 0:e.subscription,trial:void 0}).find((e=>J(e)===t))}function H(e){return"free"!==W(e)}function W(e){const t=j(e,"plan");return(null==t?void 0:t.price.product)??"free"}function q(e){return e&&!e.trial&&R(e)?"free":W({subscription:null==e?void 0:e.subscription,trial:void 0})}function K(e,t){return V(e).some((e=>e.price.product===t))}function G(e){var t;const n=null===(t=j(e,"plan"))||void 0===t?void 0:t.price.externalId;if(n&&(0,s().DS)(n))return n}function $(e){return V(e).map((e=>e.price.product))}function Y(e){return V(e).some((e=>"seats"===(0,x().vK)(e.price.product)))}function Q(e){const t=V(e);return(0,i().oE)(t.map((e=>(0,r().Xk)(l().Of,e.price.product)?{...e,price:{...e.price,product:e.price.product}}:void 0)))}function Z(e){return Q(e).map((e=>e.price.product))}function X(e){if(e)return l().hq(e.price.product)?void 0:e.price.product}function J(e){return ee(e.price.product)}function ee(e){return l().hq(e)?e:"plan"}function te(e){return new(I().gm)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.unitAmount.currencyCode,unit_amount:e.unitAmount.amount,state:"current"})}function ne(e,t){return(0,a().Z4)(e,(e=>J(e)),t,(e=>J(e)))}function oe(e){return"stripe"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function ie(e){let{billingData:t,canUpdateBilling:n}=e;return n&&"stripe"===(null==t?void 0:t.provider)}function re(e){if(e)return"stripe"===e.provider||"mixed"===e.provider?e.externalId:void 0}function ae(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}function se(e){return Boolean("app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider))}function le(e){return k.some((t=>t.prices.some((t=>t.externalId===e))))}function ce(e){var t;return null!=e&&null!==(t=e.clock)&&void 0!==t&&t.externalId?e.clock.now:o().c9.now()}function de(e,t){var n;return null===(n=e.taxIds.find((e=>e.type===t)))||void 0===n?void 0:n.value}function ue(e){var t;return"verifying"===(null==e||null===(t=e.paymentMethod)||void 0===t?void 0:t.trustLevel)}},763071:(e,t,n)=>{n.d(t,{o:()=>o});function o(e){return!1}},764061:(e,t,n)=>{n.d(t,{l:()=>o});const o={legacyTransclusionActions:new(n(645873).O2)("legacyTran",(async()=>await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(99314)]).then(n.bind(n,456116))))}},764218:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}}const i=o},764670:(e,t,n)=>{function o(e){const{collectionViewId:t,viewsModuleCurrentPageId:n}=e;return n?`collectionViewTemporaryState:${t}:${n}`:`collectionViewTemporaryState2:${t}`}n.d(t,{l:()=>o})},764781:(e,t,n)=>{n.d(t,{V:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M4.5 2.375A2.125 2.125 0 0 0 2.375 4.5V12c0 1.174.951 2.125 2.125 2.125h1.625v1.625c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125v-7.5a2.125 2.125 0 0 0-2.125-2.125h-1.625V4.5A2.125 2.125 0 0 0 12 2.375zm8.375 3.75H8.25A2.125 2.125 0 0 0 6.125 8.25v4.625H4.5A.875.875 0 0 1 3.625 12V4.5c0-.483.392-.875.875-.875H12c.483 0 .875.392.875.875zm-5.5 2.125c0-.483.392-.875.875-.875h7.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875z"})},i=(0,n(340498).wt)("duplicate",o)},765370:(e,t,n)=>{n.d(t,{w:()=>i});n(898992),n(672577);var o=()=>n(755199);function i(e){let{collectionContextStore:t,transaction:n}=e;const i="collectionTypedView"===t.contextType,r=t.databaseType,a=t.collectionStoresStore.state,s=a.find((e=>e.canEdit()||e.canEditCollection()||e.canEditContentOnly()))||a[0];!i&&s&&o().ee({transaction:n,databaseType:r,collectionId:s.id})}},766637:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{numServerRequests:0,numLocalRequests:0}}}const i=new o},767525:(e,t,n)=>{n.d(t,{m0:()=>d,mn:()=>c,s1:()=>l});var o=()=>n(244641),i=()=>n(847249),r=()=>n(416504);function a(){const e=(0,r().o)(),t=o().oh.create(e);return Object.freeze({timeZone:e,zone:t})}const s=n(757695).default.createValue(a(),{name:"currentTimeZoneStore"});function l(){return s.state}function c(){return(0,i().K8)((()=>l()),[])}function d(){const e=a();s.state.timeZone!==e.timeZone&&s.setState(e)}},770906:(e,t,n)=>{n.d(t,{VI:()=>b,J$:()=>_,oe:()=>S,ZT:()=>y,gO:()=>w});var o=()=>n(206267),i=()=>n(534177),r=()=>n(848259),a=()=>n(661920),s=()=>n(47373),l=()=>n(869562),c=()=>n(644914),d=()=>n(749687),u=()=>n(712505),p=()=>n(941463),m=()=>n(441199),g=()=>n(899963),f=()=>n(946141);function v(e){const{environment:t,contentType:n,autoLoaded:o}=e,s=d().sidebarExpandedStore.state;d().sidebarOpenStore.state&&!s&&l().close(),c().Nk(t)&&l().setUpdateExpand({environment:t,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:!1}),u().default.isSidePeekOpen()&&a().VN({environment:t,from:"secondary_sidebar_expand"}),function(e){const{environment:t,contentType:n,autoLoaded:o}=e;switch(n){case"inbox":r().WP({environment:t,auto_loaded:o});break;case"activity":case"none":break;case"private_pages":g().r9(t,{outliner_type:"private",auto_loaded:o});break;case"shared_pages":g().r9(t,{outliner_type:"shared",auto_loaded:o});break;case"assistant":g().wG(t,{auto_loaded:o});break;case"teams":f().Zl(t,{from:"sidebar_browse_team_item",auto_loaded:o});break;default:(0,i().HB)(n)}}({environment:t,contentType:n,autoLoaded:o})}function h(e){const{environment:t,contentType:n}=e;switch(n){case"inbox":r()._P({environment:t});break;case"activity":case"private_pages":case"shared_pages":case"assistant":case"teams":case"none":break;default:(0,i().HB)(n)}}function _(e){const{environment:t,contentType:n,skipAnimation:i,autoLoaded:r}=e;m().default.isVisible()&&h({environment:t,contentType:m().default.state.contentType}),v({environment:t,contentType:n,autoLoaded:Boolean(r)});const{modeByContentType:a}=p().Ay.state,l=a[n],c="assistant"===n&&"panel"===l,d=(0,s().hg)(t)||c?l:"peek";m().default.setState({...m().default.state,contentType:n,openState:i?"open":"opening",mode:d,flowId:o().JW()}),p().Ay.setState({...p().Ay.state,openState:"open",contentType:n,mode:d})}function b(e){const{environment:t,skipAnimation:n,autoClose:o}=e;m().default.isVisible()&&(m().default.setState({...m().default.state,openState:n?"closed":"closing",autoClosed:Boolean(o)}),p().Ay.setState({...p().Ay.state,openState:"closed"}),h({environment:t,contentType:m().default.state.contentType}))}function y(e){const{environment:t,contentType:n}=e,o=m().default.isOpen(),i=m().default.state.contentType;o&&i===n?b({environment:t}):_({environment:t,contentType:n})}function S(){const{mode:e,contentType:t}=m().default.state;let n;switch(e){case"peek":n="panel";break;case"panel":n="peek";break;default:(0,i().HB)(e)}const{modeByContentType:o}=p().Ay.state;return m().default.setState({...m().default.state,mode:n,modeByContentType:{...o,[t]:n}}),p().Ay.setState({...p().Ay.state,mode:n,modeByContentType:{...o,[t]:n}}),n}function w(e){const{environment:t}=e;m().default.isOpen()&&"peek"===m().default.state.mode&&b({environment:t})}},771467:(e,t,n)=>{n.d(t,{V:()=>i});var o=()=>n(299917);const i=new(n(645873).O2)("katex",(async()=>{const[e]=await Promise.all([Promise.all([n.e(22130),n.e(29366)]).then(n.bind(n,522130)),(0,o().Ay)(n(148307).A.katex.katexMinCss,{resourceType:o().vt.Stylesheet})]);return await Promise.all([n.e(22130),n.e(29366)]).then(n.bind(n,153477)),e.default}))},771989:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{initiator:"none",dragging:!1,waiting:!1}}hasDragged(){return this.state.dragging&&!n(496603).n4(this.state.startingPoint,this.state.currentPoint)}}const i=o},773382:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(296540),i=n(474848);const r=function(e){const t=(0,n(959013).tz)(),r=(0,o.useRef)(null),{isMobileNative:a}=(0,n(484714).Y0)(),s=(0,o.useRef)(e.percentage),[l,c]=(0,o.useState)(e.percentage);return(0,o.useEffect)((()=>{s.current=l}),[l]),(0,o.useEffect)((()=>{if(a)return void c(e.percentage);const t=()=>{Math.abs(s.current-e.percentage)<.5?r.current=null:(c((t=>.98*t+e.percentage*(1-.98))),r.current=requestAnimationFrame(t))};return r.current||(r.current=requestAnimationFrame(t)),()=>{r.current&&cancelAnimationFrame(r.current)}}),[e.percentage,a]),(0,i.jsx)("span",{style:e.style,children:t.formatNumber(Math.min(Math.round(l),99)/100,{style:"percent"})})}},774733:(e,t,n)=>{n.d(t,{Gc:()=>d,Gu:()=>s,L_:()=>v,MC:()=>u,PH:()=>m,PW:()=>a,UY:()=>c,bd:()=>l,c4:()=>f,commentsDependency:()=>i,eo:()=>r,fj:()=>p,vY:()=>g});var o=()=>n(645873);const i=new(o().O2)("comments",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(24593),n.e(85314),n.e(23844),n.e(71115),n.e(4390),n.e(37125)]).then(n.bind(n,213806)))),r=(0,o()._h)(i,(e=>e.Comment)),a=(0,o()._h)(i,(e=>e.Discussion)),s=(0,o()._h)(i,(e=>e.DiscussionIndicator)),l=(0,o()._h)(i,(e=>e.DiscussionInput)),c=(0,o()._h)(i,(e=>e.MarginCommentsSection)),d=(0,o()._h)(i,(e=>e.NewDiscussionMenu)),u=(0,o()._h)(i,(e=>e.ReplyDiscussionMenu)),p=(0,o()._h)(i,(e=>e.ReactionBar)),m=(0,o()._h)(i,(e=>e.DiscussionReactionBar)),g=(0,o()._h)(i,(e=>e.CommentFileBlock)),f=(0,o()._h)(i,(e=>e.SuggestionContext)),v=(0,o()._h)(i,(e=>e.PropertyDiscussionIndicator))},775191:(e,t,n)=>{n.d(t,{C3:()=>u,Go:()=>p,Yw:()=>d,d6:()=>m});var o=()=>n(427704),i=()=>n(939768),r=()=>n(780054),a=()=>n(725951),s=()=>n(449506),l=()=>n(705540),c=()=>n(435009);async function d(e){const t=(0,a().LX)(e),n=await s().callApi({eventName:"generatePasskeyRegistrationOptions",environment:e,data:{}});if("success"!==n.type)return;const{attemptId:c,options:d}=n.data,u={callbackType:t.callbackType,attemptId:c,options:JSON.stringify(d)},p=(0,i().Gm)({url:`${r().A.domainBaseUrl}${o().JZ.passkeyRegistrationRedirect}`,query:u}),m=await(0,a().YN)(e,p,!1);await l().openExternalUrl(m)}async function u(e,t,n,r,a){const s=await p({options:a});if(!s)return;const l=(0,i().O$)(o().JZ.passkeyRegistrationCallback,{csrfToken:n,attemptId:r,response:JSON.stringify(s)}),d="nativemailredirect"===t?"/nativemail":"nativecalendarredirect"===t?"/nativecalendar":"/native";c().oo({environment:e,url:`${d}${l}`})}async function p(e){const{options:t}=e;try{const{startRegistration:e}=await n.e(70216).then(n.bind(n,412681));return await e(t)}catch(o){return}}async function m(e){const{environment:t,attemptId:n,attestation:o,shouldValidateCsrfToken:i,csrfToken:r}=e;try{const e=await s().callApi({eventName:"verifyPasskeyRegistration",environment:t,data:{attemptId:n,attestation:o,shouldValidateCsrfToken:i??!1,csrfToken:r}});return"success"===e.type&&!0===e.data.isVerified?{created:!0}:{created:!1}}catch(a){return{created:!1}}}},775916:(e,t,n)=>{n.d(t,{p:()=>a});var o=()=>n(166386),i=()=>n(47170),r=()=>n(985315);function a(){const e=(0,i().O)(),t=(0,r().g)({spaceId:e});if(t)return(0,o().e8)(t,"trial")}},776894:(e,t,n)=>{n.d(t,{p1:()=>P,w8:()=>F,sw:()=>U,P7:()=>j,nn:()=>N,sZ:()=>V,T:()=>R,lD:()=>E,g7:()=>O,qy:()=>z,OY:()=>H,Dh:()=>B});n(16280),n(898992),n(823215),n(354520),n(672577),n(737550),n(296540);var o=()=>n(700500),i=()=>n(604995),r=()=>n(946065),a=()=>n(68263),s=()=>n(179034),l=()=>n(519831),c=()=>n(96689),d=()=>n(854150),u=()=>n(959013),p=()=>n(534177),m=()=>n(901389),g=()=>n(690197),f=()=>n(351360),v=()=>n(861841),h=()=>n(630116),_=()=>n(620149),b=()=>n(989423),y=()=>n(972435),S=()=>n(396301),w=()=>n(108944),k=()=>n(731320),I=()=>n(836251),x=()=>n(640653),A=()=>n(483461),C=()=>n(284371),T=n(474848);async function M(){return m().Gh({message:(0,T.jsx)("span",{children:(0,T.jsx)(u().sA,{defaultMessage:"Make this page private?",id:"confirmDialog.movePageToPrivate.message",values:{boldtext:e=>(0,T.jsx)("span",{style:{fontWeight:C().Wy.semibold},children:e})}})}),description:(0,T.jsx)(u().sA,{defaultMessage:"Only you will be able to access this page.",id:"confirmDialog.movePageToPrivate.description"}),acceptLabel:(0,T.jsx)(u().sA,{defaultMessage:"Move to private",id:"confirmDialog.movePageToPrivate.confirmButton.label"})})}const P=20,B=(0,u().YK)({privateDestinationName:{id:"moveToHelpers.destinationName.private",defaultMessage:"Private"},numPagesDescriptorString:{id:"moveToHelpers.movePageDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}}"},numPagesWithSubitemsDescriptorString:{id:"moveToHelpers.movePagesWithSubitemsDescriptorString",defaultMessage:"{numPagesMoved, plural, one {# page} other {# pages}} and {numSubitemsMoved, plural, one {# sub-item} other {# sub-items}}"},numBlocksDescriptorString:{id:"moveToHelpers.moveBlocksDescriptorString",defaultMessage:"{numBlocksMoved, plural, one {# block} other {# blocks}}"},bookmarksDestinationName:{id:"moveToHelpers.destinationName.favorites",defaultMessage:"Favorites"},movedMessagesWithDestinationToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessageWithDestination",defaultMessage:"Moved {pageDescriptor} to {destinationName}"},movedToDestinationShortToast:{id:"moveToHelpers.afterMoveCompleteOnMobileToastMessageWithDestination",defaultMessage:"Moved to {destinationName}"},movedMessagesToast:{id:"moveToHelpers.afterBulkMoveCompleteToastMessage",defaultMessage:"Moved {pageDescriptor}"}});function R(e){const{movedItems:t,numSubitems:n}=e;if(!(t.filter((e=>e.isNavigableBlock())).length===t.length))return y().A.formatMessage(B.numBlocksDescriptorString,{numBlocksMoved:t.length});if(1===t.length){const e=D(t[0]);if(e)return e}return n?y().A.formatMessage(B.numPagesWithSubitemsDescriptorString,{numPagesMoved:t.length-n,numSubitemsMoved:n}):y().A.formatMessage(B.numPagesDescriptorString,{numPagesMoved:t.length})}function E(e){const{environment:t,movedItems:n,moveToLocation:o,numSubitems:i}=e,r=R({movedItems:n,numSubitems:i}),a=function(e){const{environment:t,moveToLocation:n}=e,{currentSpaceStore:o}=f().default.getState();if(void 0===n||void 0===o)return;switch(n.type){case"moveToBlock":return D(n.blockStore);case"moveToCollection":return D(n.collectionStore);case"moveToCurrentWorkspace":return(0,x().GK)(t,o);case"moveToPrivatePages":return y().A.formatMessage(B.privateDestinationName);case"moveToTeam":return D(n.teamStore);case"moveToOtherWorkspace":return(0,x().GK)(t,n.spaceStore);case"moveToBookmarks":case"moveToShared":return;default:(0,p().HB)(n)}}({environment:t,moveToLocation:o});return a?t.device.isPhone?y().A.formatMessage(B.movedToDestinationShortToast,{destinationName:a}):y().A.formatMessage(B.movedMessagesWithDestinationToast,{pageDescriptor:r,destinationName:a}):y().A.formatMessage(B.movedMessagesToast,{pageDescriptor:r})}function D(e){var t;const n=y().A.getIntl();if(e)return null===(t=e.getModel())||void 0===t?void 0:t.getRenderTitle({getRecordModel:e.getRecordModel,userTimeZone:i().Zq,intl:n})}function N(e,t){const{currentSpaceStore:n}=f().default.getState(),o=("space"===e.type?e.id:e.spaceId)??(null==n?void 0:n.id);if(void 0===n||void 0===o)return;const i=function(e){var t;const{currentUserRootStore:n,currentSpaceStore:o}=f().default.state;return(null==o?void 0:o.id)===e?o:null==n||null===(t=n.getSpaceViewStores())||void 0===t||null===(t=t.find((t=>{var n;return(null===(n=t.getSpaceStore())||void 0===n?void 0:n.id)===e})))||void 0===t?void 0:t.getSpaceStore()}(o);if(i){if(i.id!==n.id)return{type:"moveToOtherWorkspace",spaceStore:i,targetParentId:"space-private-pages"!==e.type?e.id:i.id};switch(e.type){case"page":{const t=f().default.state.mainEditorCurrentBlockStore;if(!t)return;return{type:"moveToBlock",blockStore:h().Bv.createChildStore(t,{table:s().ev,id:e.id})}}case"collection":return{type:"moveToCollection",collectionStore:h().md.createChildStore(i,{table:l().Vl,id:e.id})};case"space":return{type:"moveToCurrentWorkspace"};case"space-private-pages":return{type:"moveToPrivatePages"};case"team":return{type:"moveToTeam",teamStore:h().h4.createChildStore(i,{table:d().yK,id:e.id})};default:(0,p().HB)(e)}}}function L(e){switch(e){case"workspace":return{type:"moveToCurrentWorkspace"};case"bookmarks":return{type:"moveToBookmarks"};case"private":return{type:"moveToPrivatePages"};case"shared":return{type:"moveToShared"};case"team":case r().st:case r().zt:case r().AX:case r().GU:case r().yy:return;default:(0,p().HB)(e)}}function O(e){const{droppedDirection:t,targetStore:n,outlinerSectionType:o}=e,{currentSpaceStore:i}=f().default.getState();if(!i||!o)return;let r=n;if("block"===(null==n?void 0:n.table)&&t!==v().bH.Onto){if("bookmarks"===o)return{type:"moveToBookmarks"};if("shared"===o)return{type:"moveToShared"};r=null==n?void 0:n.getParentStore()}if(void 0===r)return;if(i.id===r.id)return L(o);switch(r.table){case"block":return{type:"moveToBlock",blockStore:r};case"team":return{type:"moveToTeam",teamStore:r};case"space":return L(o)}}function U(e){let{environment:t,blocks:n}=e;if(_().l.state)return{canMoveBlocks:!1,reason:{key:"unknown"}};for(const o of n){if(o.getParentTable()===d().yK){const e=(0,w().Uo)(o);if(!e||!(0,S().dp)({teamStore:e,environment:t}))return{canMoveBlocks:!1,reason:{key:"lockedTopLevelTeamPage"}}}if(!o.canAdmin())return{canMoveBlocks:!1,reason:{key:"needsFullAccess"}};if(!k().MI({environment:t,blockStore:o})){const e=o.getParentStore();return{canMoveBlocks:!1,reason:{key:"needsEditAccessOnParent",parentStore:e instanceof h().Bv?e:void 0}}}}return{canMoveBlocks:!0}}function F(e){let{environment:t,blocks:n}=e;return U({environment:t,blocks:n}).canMoveBlocks}function V(e){const{type:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:o}=f().default.state;if(!o)throw new Error("currentSpaceStore not found");const i=n||o;if("space"!==t&&e.spaceId&&e.spaceId!==o.id)return h().SL.createChildStore(i,{table:c().NX,id:e.spaceId});switch(t){case"space-private-pages":return h().SL.createChildStore(i,{table:c().NX,id:o.id});case"space":return h().SL.createChildStore(i,{table:c().NX,id:e.id});case"page":return h().Bv.createChildStore(i,{table:s().ev,id:e.id});case"collection":return h().md.createChildStore(i,{table:l().Vl,id:e.id});case"team":return h().h4.createChildStore(o,{table:d().yK,id:e.id,spaceId:o.id});default:(0,p().HB)(t)}}async function j(){const{accept:e}=await m().Gh({mode:"wide",message:(0,T.jsx)("b",{children:(0,T.jsx)(u().sA,{id:"moveToHelpers.duplicateToSpaceConfirmTitle",defaultMessage:"Some content and settings may be broken on the duplicated page"})}),description:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginBottom:8},children:(0,T.jsx)(u().sA,{id:"moveToHelpers.duplicateToSpaceConfirmDescription1",defaultMessage:"This may include: links, relations, permissions, page history, and more."})}),(0,T.jsx)(u().sA,{id:"moveToHelpers.duplicateToSpaceConfirmDescription2",defaultMessage:"This page will remain unchanged in the current workspace, and a duplicate version will be created in the workspace you have chosen."}),(0,T.jsx)(g().A,{title:(0,T.jsx)("div",{children:(0,T.jsx)(u().sA,{id:"moveToHelpers.duplicateToSpaceConfirmHelpLink",defaultMessage:"Learn more"})}),href:(0,I().xS)("guides.duplicateToSpace"),analyticsFrom:"move_to_confirm_duplicate_to_space",style:{marginTop:12}})]}),acceptLabel:(0,T.jsx)(u().sA,{id:"moveToHelpers.duplicateToSpaceConfirmAcceptLabel",defaultMessage:"I understand, duplicate"})});return e}function z(e){let{targets:t,destination:n,direction:i,draggingOutlinerType:r}=e;if(i===v().bH.Onto&&t.some((e=>e.id===n.id)))return!0;const a=void 0!==(0,w().me)(n);return!(!t.some((e=>(0,A().E)(e)))||!a)||(!("bookmarks"===r||!function(e){let{targets:t,destination:n,direction:i}=e;const r=t.some((e=>e.isCollectionView()||!e.isType(o().Si)));if(!r)return!1;if(n.isCollectionView()&&!(0,A().E)(n)){if(i===v().bH.Onto)return!0;if(!n.getRecordStoreUIParent())return!0}const a=n.getAssociatedCollectionStore();if(i!==v().bH.Onto&&a&&!a.isPageTreeCollection())return!0;return!1}({targets:t,destination:n,direction:i}))||!(!n.isLocked()||!n.isPageBlock()))}async function H(e){const t=function(e){const{from:t,environment:n}=e;if("moveTo"===t){const{moveToValue:t}=e.moveToArgs;return N(t)}if("dragAndDrop"===t){const{destination:t,direction:o,destinationOutlinerType:i}=e.dropArgs;return O({targetStore:t,droppedDirection:o,outlinerSectionType:i,environment:n})}}(e),n=await async function(e){const{blocks:t,environment:n,moveToLocation:o,from:i}=e;if(!o||"moveToOtherWorkspace"===o.type||"moveToBookmarks"===o.type)return{confirmed:!0,shouldClearPagePermissions:!1};const r="moveToPrivatePages"===o.type,l="moveTo"===i?e.moveToArgs.destination:e.dropArgs.destination,c=l&&W({stores:[l]});if(!r&&!c)return{confirmed:!0,shouldClearPagePermissions:!1};if(!W({stores:t})){if((l&&l.table===s().ev?k().i0(l):[]).some((e=>(0,a().Lg)(e.permissionItem))))return{confirmed:!0,shouldClearPagePermissions:!1};const{accept:e}=await M();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}if(t.every((e=>e.isTopLevel())))return{confirmed:!0,shouldClearPagePermissions:!1};if(!r)return{confirmed:!0,shouldClearPagePermissions:!1};const d=n.currentUser.id;if(t.some((e=>{const t=e.getPermissionItems();return 0!==t.length&&(1!==t.length||"user_permission"!==t[0].type||t[0].user_id!==d)}))){const{accept:e}=await M();return e?{confirmed:!0,shouldClearPagePermissions:!0}:{confirmed:!1}}return{confirmed:!0,shouldClearPagePermissions:!1}}({...e,moveToLocation:t});if(!n.confirmed)return{confirmed:!1};const o=await async function(e){const{environment:t,moveToLocation:n,from:o,blocks:i}=e;if(!n)return{confirmed:!0,shouldUpdateToManualSort:!1};if("moveTo"===o)return{confirmed:!0,shouldUpdateToManualSort:!1};const r="moveToPrivatePages"===n.type||"moveToShared"===n.type;if(!r)return{confirmed:!0,shouldUpdateToManualSort:!1};if(e.dropArgs.isDroppingOnFullSection)return{confirmed:!0,shouldUpdateToManualSort:!1};const a="moveToPrivatePages"===n.type?"private":"shared";if("private"===a){if(!W({stores:i}))return{confirmed:!0,shouldUpdateToManualSort:!1}}const{currentSpaceViewStore:s}=f().default.state;if(!s||"lastEdited"!==(0,S().RQ)({spaceViewStore:s,type:a}).sortOption)return{confirmed:!0,shouldUpdateToManualSort:!1};(0,b().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_open",eventProperties:{outliner_type:a}}});const{accept:l}=await async function(e){return m().Gh({message:(0,T.jsx)(u().sA,{defaultMessage:"Would you like to switch to manual sort?",id:"confirmDialog.manualSortForSidebarSection.message"}),description:"private"===e?(0,T.jsx)(u().sA,{defaultMessage:"This will discard your previous manual sort in Private.",id:"confirmDialog.manualSortForPrivate.description"}):(0,T.jsx)(u().sA,{defaultMessage:"This will discard your previous manual sort in Shared.",id:"confirmDialog.manualSortForShared.description"}),acceptLabel:(0,T.jsx)(u().sA,{defaultMessage:"Switch to manual",id:"confirmDialog.manualSortForSidebarSection.confirmButton.label"})})}(a);if(!l)return(0,b().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_cancel",eventProperties:{outliner_type:a}}}),{confirmed:!1};return(0,b().u4)({environment:t,event:{eventName:"sidebar_manual_sort_modal_confirm",eventProperties:{outliner_type:a}}}),{confirmed:!0,shouldUpdateToManualSort:!0}}({...e,moveToLocation:t});if(!o.confirmed)return{confirmed:!1};const{shouldClearPagePermissions:i}=n,{shouldUpdateToManualSort:r}=o;return{confirmed:!0,shouldClearPagePermissions:i,shouldUpdateToManualSort:r}}function W(e){const{stores:t}=e,{currentSpaceStore:n}=f().default.state;if(!n)return!1;for(const o of t){const e=(0,w().Lf)(o);if(!((null==e?void 0:e.table)===s().ev&&e.isTopLevelPrivatePage()))return!1}return!0}},777447:(e,t,n)=>{n.d(t,{GS:()=>p,lX:()=>c,wv:()=>l});n(944114),n(898992),n(354520),n(581454);var o=()=>n(496603),i=()=>n(584262),r=()=>n(921940),a=()=>n(179034),s=()=>n(919709);function l(e){const{pageId:t,scrollToBlockId:n,peekViewBlockId:o,peekMode:a,collectionViewId:s,discussionId:l}=e;return(0,r().A)({pageId:t,scrollToBlockId:n,peekViewBlockId:o,peekMode:a,collectionViewId:s,discussionId:l,pageVisitSource:i().y8.LinkInPage})}const c=s().lXo;function d(e){return(t,n,o)=>{const i=e({table:a().ev,id:t});return!!i&&(i.parent_table===n&&i.parent_id===o)}}function u(e,t){if(!e)return[];const n=s().N5L(e),o=s().CY8(e);for(const i of o){const e=c({...t,url:i.url});e&&n.push(e)}return n}function p(e){const{parentBlock:t,oldTextValue:n,newTextValue:i,getRecordValue:r,baseUrl:s,publicDomainName:l}=e,c=u(n,{baseUrl:s,publicDomainName:l}),p=u(i,{baseUrl:s,publicDomainName:l});return function(e){const{parentBlock:t,mentionedPageIds:n,blockHasParent:i}=e,r=t.content||[];return o().FF(n,...r).filter((e=>i(e,a().ev,t.id)))}({parentBlock:t,mentionedPageIds:o().FF(c,...p),blockHasParent:d(r)})}},777932:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isDuplicating:!1}}}const i=new o},778417:(e,t,n)=>{n.d(t,{A:()=>U,AP:()=>re,DN:()=>F,IU:()=>$,JK:()=>ne,Ko:()=>O,Lt:()=>W,PF:()=>oe,SB:()=>H,Ub:()=>te,Uz:()=>ee,Xc:()=>R,Zm:()=>K,bG:()=>G,bi:()=>Y,gj:()=>N,hc:()=>q,jG:()=>Z,mL:()=>X,rN:()=>V,sf:()=>ie,tY:()=>D,td:()=>z});n(944114),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(507707),i=()=>n(908006),r=()=>n(921598),a=()=>n(708830),s=()=>n(496603),l=()=>n(404779),c=()=>n(989423),d=()=>n(405417),u=()=>n(281322),p=()=>n(20313),m=()=>n(494043),g=()=>n(585533),f=()=>n(696152),v=()=>n(695625),h=()=>n(919878),_=()=>n(980914),b=()=>n(393255),y=()=>n(110955),S=()=>n(854502),w=()=>n(666710),k=()=>n(502438),I=()=>n(468484),x=()=>n(60867),A=()=>n(131581),C=()=>n(829300),T=()=>n(620689),M=()=>n(725614),P=()=>n(324089),B=()=>n(751156);function R(){const e=k().default.getCurrentDefaultContainer();if(e){return v().T.getMembersByDOMOrder({filter:t=>t.getContextSelectableContainer()===e&&t.props.canSelect}).map((e=>e.props.store))}return[]}function E(e){const t=k().default.state.stores,n=k().default.state.pivot,o=s().oE(s().FF(t,n));let i;i=n===s().HV(t)?t[t.length-2]:t[1],z({environment:e,stores:o,pivot:i})}function D(e){return function(e){const t=u().r();return e.device.isMac?t.shift&&t.command:t.shift&&t.option}(e)?H.TOGGLE:N()?H.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:H.SELECT}function N(){return u().r().shift}function L(e){e.sort(((e,t)=>(0,o().A)(v().T.findNodeFromStore(e),v().T.findNodeFromStore(t))))}function O(e){const t=new Array(e.length);return v().T.forEach((n=>{if(n.props.canSelect){const o=e.indexOf(n.props.store);if(o>=0){const e=n.getNode();e&&(t[o]=e)}}})),e.filter(((n,o)=>{const i=t[o];return n&&!e.some(((e,n)=>{const o=t[n];return Boolean(o&&o!==i&&i&&o.contains(i))}))}))}function U(e){k().default.setState({...k().default.state,phase:e.phase}),e.phase===k().SelectionPhase.Editing||e.preventClearEditingText||M().clear({preventDismissMobileKeyboard:e.preventDismissMobileKeyboard,environment:e.environment})}function F(e){const{stores:t}=e,n=k().default.state.stores,o=s().KC(t,n);o.length===t.length&&o.length===n.length||k().default.setState({...k().default.state,stores:e.stores}),t.length>0&&((0,l().y)(),_().bS(t)||h().wr())}function V(e){k().default.setState({...k().default.state,pivot:e.pivot})}function j(e){k().default.setState({...k().default.state,multiSelectBoundaryStore:e.multiSelectBoundaryStore})}function z(e){const{environment:t}=e,n=O(e.stores);F({stores:n}),U({environment:e.environment,phase:e.phase||k().SelectionPhase.Selected}),1===n.length&&function(e){var t;const n=e.anchor,o=null===(t=v().T.findSelectableFromStore(n))||void 0===t?void 0:t.getNode();let i;o&&(i=k().default.getDefaultContainerFromTarget(o)),k().default.setState({...k().default.state,anchor:n,anchorContainer:i})}({anchor:n[0]});const o=e.pivot||n[0];V({pivot:o});if(j({multiSelectBoundaryStore:e.multiSelectBoundaryStore}),i().default.afterNextFlush((()=>{L(n)})),e.phase===k().SelectionPhase.Editing&&o)if(t.device.isMobile)T().pS(t);else if(!t.device.isMobileBrowser){const e=v().T.findScrollToSelectableFromStore(o);e&&T().pb({environment:t,handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}let H=function(e){return e[e.SELECT=0]="SELECT",e[e.TOGGLE=1]="TOGGLE",e[e.MULTI_SELECT_FROM_FIRST_SELECTED_STORE=2]="MULTI_SELECT_FROM_FIRST_SELECTED_STORE",e[e.MULTI_SELECT_FROM_BOUNDARY=3]="MULTI_SELECT_FROM_BOUNDARY",e}({});function W(e){void 0===e.selectMode&&(e.selectMode=H.SELECT);const{multiSelectBoundaryStore:t,stores:n}=k().default.state,o=function(e,t){const{multiSelectBoundaryStore:n}=k().default.state;if(n&&e===H.MULTI_SELECT_FROM_BOUNDARY){var o,i;const e=null===(o=v().T.findSelectableFromStore(n))||void 0===o?void 0:o.props.groupsPointer,a=null===(i=v().T.findSelectableFromStore(t))||void 0===i?void 0:i.props.groupsPointer;if((e||a)&&(!e||!a||(0,r().Hm)(e)!==(0,r().Hm)(a)))return H.TOGGLE}return e!==H.MULTI_SELECT_FROM_BOUNDARY||n?e:H.TOGGLE}(e.selectMode,e.store);switch(o){case H.TOGGLE:s().mK(n,e.store)?z({environment:e.environment,stores:s().FF(n,e.store)}):z({environment:e.environment,stores:s().KC(n,[e.store]),multiSelectBoundaryStore:e.store});break;case H.MULTI_SELECT_FROM_BOUNDARY:{let o=s().o8(n);const i=R(),r=i.indexOf(e.store);s().mK(o,e.store)||o.push(e.store);const a=i.indexOf(t),l=Math.min(r,a),c=Math.max(r,a),d=s().di(i,l,c);o=s().KC(o,d),z({environment:e.environment,stores:o,multiSelectBoundaryStore:e.store});break}case H.MULTI_SELECT_FROM_FIRST_SELECTED_STORE:{let t=s().o8(n);const o=R(),i=o.indexOf(e.store);s().mK(t,e.store)||t.push(e.store);const r=n[0];if(r){const e=o.indexOf(r);if(e>=0){const n=s().di(o,i,e);t=s().KC(t,n)}}const a=s().HV(n);if(a){const e=o.indexOf(a);if(e>=0){const n=s().di(o,e,i);t=s().KC(t,n)}}z({environment:e.environment,stores:t,multiSelectBoundaryStore:e.store});break}case H.SELECT:default:s().mK(n,e.store)||z({environment:e.environment,stores:[e.store],multiSelectBoundaryStore:e.store})}U({environment:e.environment,phase:k().SelectionPhase.Selected})}function q(e){const{environment:t,store:n}=e;if(n)if(F({stores:[n]}),V({pivot:void 0}),U({environment:t,phase:k().SelectionPhase.Editing}),j({multiSelectBoundaryStore:void 0}),t.device.isMobile)T().pS(t);else if(!t.device.isMobileBrowser){const e=v().T.findScrollToSelectableFromStore(n);e&&T().pb({environment:t,handle:e,vertical:{reveal:"closest"},horizontal:e.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function K(e){const{stores:t}=k().default.state,n=t[0];if(!n)return;const o=v().T.findSelectableFromStore(n);if(o&&o.props.onEditText){const t=o.props.onEditText;B().createAndCommit({userAction:"selectionActions.editSelection",environment:e,canUndo:!0,perform:e=>{t({isAtStartOfLine:!1,isClick:!1,transaction:e})}})}}function G(e){const{environment:t,stores:n}=e,o=s().HV(n);if(!o)return;const i=v().T.findSelectableFromStore(o);if(i&&i.props.onEditText){const e=i.props.onEditText;B().createAndCommit({userAction:"selectionActions.editStoresAtEnd",environment:t,canUndo:!0,perform:t=>{e({isAtStartOfLine:!1,isClick:!1,transaction:t})}})}}function $(e){let{environment:t,preventDismissMobileKeyboard:n}=e;F({stores:[]}),U({environment:t,phase:k().SelectionPhase.Selected,preventDismissMobileKeyboard:n}),j({multiSelectBoundaryStore:void 0}),C().VN(),y().A.state.open&&((0,c().u4)({environment:t,event:{eventName:"close_slash_menu",eventProperties:{id:y().A.state.id,source:"click_outside"}}}),b().VN({environment:t,dismissed:!0})),A().VN()}function Y(e){const{environment:t}=e,n=k().default.state.stores;L(n);const o=k().default.state.pivot,i=n[0];if(i)if(e.shiftKey)if(o===i){const o=(0,p().OL)({includeNonSelectableListContainer:!1}),r=(0,p().Xs)(i,o.children),{prev:l,parent:c}=e.altKey?(0,a().MY)(o,r):(0,a().zJ)(o,r);if(l){const e=l.value.store;z({environment:t,stores:s().KC(n,[e]),pivot:e,multiSelectBoundaryStore:e})}else if(c){const e=c.value.store;z({environment:t,stores:s().KC(n.filter((e=>!(0,a().uU)(c,(t=>t.store===e)))),[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(e.environment);else{const n=(0,p().OL)({includeNonSelectableListContainer:!1}),o=(0,p().Xs)(i,n.children),{prev:r,parent:s}=e.altKey?(0,a().MY)(n,o):(0,a().zJ)(n,o);if(r){const e=r.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else if(s){const e=s.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else z({environment:t,stores:[i],pivot:i,multiSelectBoundaryStore:i})}else if(o)z({environment:t,stores:[o],multiSelectBoundaryStore:o});else{const e=R(),n=s().HV(e);n&&z({environment:t,stores:[n],pivot:n,multiSelectBoundaryStore:n})}Q(t)}function Q(e){const t=k().default.state.pivot||k().default.state.stores[0],n=v().T.findScrollToSelectableFromStore(t);n&&T().pb({environment:e,handle:n,vertical:{reveal:"top"},horizontal:n.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}function Z(e){const t=k().default.state.stores;L(t);const n=k().default.state.pivot;if(0!==t.length&&n)if((0,m().BN)(n)&&I().A.isOpen(n.id))z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n}),P().xT({blockId:n.id,state:!1,currentUserId:e.currentUser.id});else if((0,d().qr)(n))x().jG(n);else{const t=(0,p().OL)({includeNonSelectableListContainer:!1}),o=(0,p().Xs)(n,t.children),i=(0,a().dC)(o);if(i){const t=i.value.store;z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n})}else if(n)z({environment:e,stores:[n],multiSelectBoundaryStore:n});else{const t=R(),n=s().HV(t);n&&z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n})}Q(e)}function X(e){const{environment:t}=e,n=k().default.state.stores;L(n);const o=k().default.state.pivot,i=s().HV(n);if(i)if(e.shiftKey)if(o===i){const e=(0,p().OL)({includeNonSelectableListContainer:!1}),o=(0,p().Xs)(i,e.children),{next:r}=(0,a().Eq)(e,o);if(r){const e=r.value.store;z({environment:t,stores:s().KC(n,[e]),pivot:e,multiSelectBoundaryStore:e})}}else E(t);else{const n=(0,p().OL)({includeNonSelectableListContainer:!1}),o=(0,p().Xs)(i,n.children),{next:r}=e.altKey?(0,a().Eq)(n,o):(0,a().hi)(n,o);if(r){const e=r.value.store;z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}else z({environment:t,stores:[i],pivot:i,multiSelectBoundaryStore:i})}else if(o)z({environment:t,stores:[o],multiSelectBoundaryStore:o});else{const e=R()[0];e&&z({environment:t,stores:[e],pivot:e,multiSelectBoundaryStore:e})}J(t)}function J(e){const t=k().default.state.pivot||s().HV(k().default.state.stores);if(t){const n=v().T.findScrollToSelectableFromStore(t);n&&T().pb({environment:e,handle:n,vertical:{reveal:"bottom"},horizontal:n.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function ee(e){const t=k().default.state.stores;L(t);const n=k().default.state.pivot;if(0!==t.length&&n)if((0,m().BN)(n)&&!I().A.isOpen(n.id))z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n}),P().xT({blockId:n.id,state:!0,currentUserId:e.currentUser.id});else if((0,d().qr)(n))x().Uz(n);else{const t=(0,p().OL)({includeNonSelectableListContainer:!1}),o=(0,p().Xs)(n,t.children),i=(0,a().NU)(o);if(i){const t=i.value.store;z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}else z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n})}else if(n)z({environment:e,stores:[n],multiSelectBoundaryStore:n});else{const t=R()[0];t&&z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t})}J(e)}function te(e){const t=R();z({environment:e,stores:t,pivot:t[0]})}function ne(e){const t=R()[0];if(t){z({environment:e,stores:[t],pivot:t,multiSelectBoundaryStore:t});const n=v().T.findScrollToSelectableFromStore(t);n&&T().pb({environment:e,handle:n,vertical:{reveal:"top"},horizontal:n.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function oe(e){const t=R(),n=t[t.length-1];if(n){z({environment:e,stores:[n],pivot:n,multiSelectBoundaryStore:n});const t=v().T.findScrollToSelectableFromStore(n);t&&T().pb({environment:e,handle:t,vertical:{reveal:"bottom"},horizontal:t.props.disableScrollToRevealHorizontal?void 0:{reveal:"closest"}})}}function ie(){const e=performance.now(),t=new Map,n=new Map;v().T.forEach((e=>{const o=e.getNode();if(o&&o instanceof Element){const i=o.getBoundingClientRect();t.set(e,i),n.set(o,i)}}));const o=new Map;f().A.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&o.set(e,t.getBoundingClientRect())}));const i=new Map;g().A.forEach((e=>{const t=e.getNode();t&&t instanceof Element&&i.set(e,t.getBoundingClientRect())})),w().default.setState({...w().default.state,selectableRectMap:t,selectableContainerRectMap:o,selectableElementRectMap:n,lastUpdate:e}),S().A.setState({...S().A.state,dropTargetRectMap:i})}const re=s().nF(ie,200)},779795:(e,t,n)=>{n.d(t,{$W:()=>s,cP:()=>l,p_:()=>c});n(16280),n(581454);var o=()=>n(984380),i=()=>n(449412),r=()=>n(449506),a=()=>n(981046);async function s(e){const{environment:t,spaceId:n}=e;if("init"!==a().A.state.status)return;a().A.didStartLoading();const s=await r().callApi({eventName:"listPrices",environment:t,data:{spaceId:n,countryCode:undefined}});if("success"!==s.type)return void a().A.resetExceptSelectedCurrencyCode();const l=s.data.prices;l&&0!==l.length||i().Fg(new Error("Received empty price list")),a().A.setPrices(l.map((e=>new(o().gm)(e))),s.data.preferredDefaultCurrency)}function l(e){a().A.availableCurrencyCodes.includes(e)&&a().A.update((t=>({...t,selectedCurrencyCode:e})))}async function c(e){let{environment:t,spaceId:n}=e;return await s({environment:t,spaceId:n}),a().A.state.prices}},780262:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{}const i=new o},780865:(e,t,n)=>{n.d(t,{Er:()=>W,Fj:()=>U,HA:()=>z,J3:()=>A,RH:()=>j,SC:()=>C,Uc:()=>D,Yq:()=>T,Zd:()=>L,a9:()=>R,eV:()=>E,fz:()=>K,kZ:()=>H,lO:()=>V,mj:()=>O,pV:()=>G,rp:()=>q,tX:()=>B,ug:()=>x,yu:()=>F,z7:()=>I});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),a=()=>n(416504),s=()=>n(179034),l=()=>n(245241),c=()=>n(496603),d=()=>n(449506),u=()=>n(351360),p=()=>n(508496),m=()=>n(41161),g=()=>n(38337),f=()=>n(211716),v=()=>n(108944),h=()=>n(731320),_=()=>n(825972),b=()=>n(836251),y=()=>n(355012);function S(e){return Boolean(e&&e.length>0)}function w(e){return Boolean(e.starting||e.ending)}function k(e){return Boolean(e)}const I={requireEditPermissions:k,isDeletedOnly:k,excludeTemplates:k,navigableBlockContentOnly:k,ancestors:S,parentId:function(e){return void 0!==e},createdBy:S,editedBy:S,verificationOwners:S,lastEditedTime:w,createdTime:w,isAdminModeDeletedPageSearch:k,blockTypes:function(e){return Boolean(e&&e.length>0)},inTeams:function(e){return S(l().fg(e))},includePublicPagesWithoutExplicitAccess:k,audience:function(e){return Boolean(e)},dev_excludedPages:S,dev_excludedTeams:S,databaseType:S,adminContentSearchDeletionStatus:S,isOfflineOnly:k};function x(e){return e?{requireEditPermissions:I.requireEditPermissions(e.requireEditPermissions),isDeletedOnly:I.isDeletedOnly(e.isDeletedOnly),excludeTemplates:I.excludeTemplates(e.excludeTemplates),navigableBlockContentOnly:I.navigableBlockContentOnly(e.navigableBlockContentOnly),ancestors:I.ancestors(e.ancestors),parentId:I.parentId(e.parentId),createdBy:I.createdBy(e.createdBy),editedBy:I.editedBy(e.editedBy),createdTime:I.createdTime(e.createdTime),lastEditedTime:I.lastEditedTime(e.lastEditedTime),blockTypes:I.blockTypes(e.blockTypes),inTeams:I.inTeams(e.inTeams),dev_excludedPages:I.dev_excludedPages(e.dev_excludedPages),dev_excludedTeams:I.dev_excludedTeams(e.dev_excludedTeams),verificationOwners:I.verificationOwners(e.verificationOwners),isOfflineOnly:I.isOfflineOnly(e.isOfflineOnly)}:{requireEditPermissions:!1,isDeletedOnly:!1,excludeTemplates:!1,navigableBlockContentOnly:!1,ancestors:!1,parentId:!1,createdBy:!1,editedBy:!1,createdTime:!1,lastEditedTime:!1,blockTypes:!1,inTeams:!1,dev_excludedPages:!1,dev_excludedTeams:!1,verificationOwners:!1,isOfflineOnly:!1}}function A(e){const t=x(e);return Object.values(t).some((e=>Boolean(e)))}function C(e){const t=x(e),{navigableBlockContentOnly:n,...o}=t;return Object.values(o).some((e=>Boolean(e)))}function T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o().vz;const a=r().C6.notionDateToLuxon(e,{locale:t.locale});return(0,i().vP)(a,n)}function M(e,t){const n=r().C6.notionDateTimeToLuxon(e,t.locale);return(0,i().eV)({value:n,preset:"medium_with_time"})}const P=(0,n(959013).YK)({startAndEnd:{defaultMessage:"{startDate} - {endDate}",id:"searchHelpers.betweenStartAndEndDates"},afterStart:{defaultMessage:"After {startDate}",id:"searchHelpers.afterStartDate"},beforeEnd:{defaultMessage:"Before {endDate}",id:"searchHelpers.beforeEndDate"}});function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o().vz,i="",r="";return e.starting&&(i="date"===e.starting.type?T(e.starting,t,n):M(e.starting,t)),e.ending&&(r="date"===e.ending.type?T(e.ending,t,n):M(e.ending,t)),i&&r?t.formatMessage(P.startAndEnd,{startDate:i,endDate:r}):i?t.formatMessage(P.afterStart,{startDate:i}):t.formatMessage(P.beforeEnd,{endDate:r})}function R(e){return Boolean(e.target&&e.target instanceof HTMLElement&&e.target.classList.contains("rdp-day"))}function E(e){const{environment:t,input:n,spaceId:o,publicAccessPermissionAncestorBlockId:i,searchSessionId:r,searchSessionFlowNumber:a,source:s,forcedClusterPattern:c,searchExperimentOverrides:d,recentPagesForBoosting:u,forcedBlockIds:p,excludedBlockIds:m}=e,{query:g,limit:f,debug:v}=n;return(0,b().w6)(t)||!o?i?{type:l().Vz.BlocksInAncestor,query:g.text.trim(),ancestorId:i,filters:g.filters,sort:g.sort,limit:f,source:s||"quick_find_public",debug:v,searchExperimentOverrides:d,searchSessionId:r,searchSessionFlowNumber:a,forcedClusterPattern:c,forcedBlockIds:p,excludedBlockIds:m}:void 0:{type:l().Vz.BlocksInSpace,query:g.text.trim(),spaceId:o,limit:f,filters:g.filters,sort:g.sort,source:s||"quick_find",debug:v,searchExperimentOverrides:d,searchSessionId:r,searchSessionFlowNumber:a,forcedClusterPattern:c,recentPagesForBoosting:(0,_().cs)(u),forcedBlockIds:p,excludedBlockIds:m}}function D(e){const{environment:t}=e,n=E(e);return!!n&&d().callApi({eventName:"search",environment:t,data:n})}class N{constructor(e){this.startingTimestamp=void 0,this.endingTimestamp=void 0,this.startingTimestamp=e.starting&&r().ln(e.starting,(0,a().P)()),this.endingTimestamp=e.ending&&r().ln(e.ending,(0,a().P)())}matches(e){return void 0!==e&&(!(void 0!==this.startingTimestamp&&e<this.startingTimestamp)&&!(void 0!==this.endingTimestamp&&e>this.endingTimestamp))}}class L{constructor(e){this.filters=void 0,this.activeFilters=void 0,this.ancestorFilterIds=void 0,this.parentFilterId=void 0,this.createdTimeMatcher=void 0,this.lastEditedTimeMatcher=void 0,this.teamFilterIds=void 0,this.dev_notInTeamFilterIds=void 0,this.dev_notInPagesFilterIds=void 0,this.filters=e,this.activeFilters=x(e),this.ancestorFilterIds=new Set(e.ancestors),this.parentFilterId=e.parentId,this.createdTimeMatcher=new N(e.createdTime),this.lastEditedTimeMatcher=new N(e.lastEditedTime),this.teamFilterIds=new Set(l().fg(e.inTeams)??[]),this.dev_notInTeamFilterIds=new Set(e.dev_excludedTeams),this.dev_notInPagesFilterIds=new Set(e.dev_excludedPages)}matches(e){let{blockModel:t,blockStore:o,path:i,source:r}=e;if(!Boolean(this.activeFilters.isDeletedOnly)!==t.alive)return!1;if(this.activeFilters.excludeTemplates&&t.is_template)return!1;if(this.activeFilters.isOfflineOnly){if(!(0,n(540758).Bd)(t.id))return!1}else if(1===r.size&&r.has("offlinePage"))return!1;if(this.activeFilters.editedBy){const e=t.last_edited_by_id||t.last_edited_by;if(!e||!this.filters.editedBy.includes(e))return!1}if(this.activeFilters.createdBy){const e=t.created_by_id||t.created_by;if(!e||!this.filters.createdBy.includes(e))return!1}if(this.activeFilters.ancestors&&!i.some((e=>{let{value:t}=e;return this.ancestorFilterIds.has(t.id)})))return!1;if(this.activeFilters.parentId){if(i.length<2)return!1;const[e,{value:{id:t}}]=i;return this.parentFilterId===t}if(this.activeFilters.lastEditedTime&&!this.lastEditedTimeMatcher.matches(t.last_edited_time))return!1;if(this.activeFilters.createdTime&&!this.createdTimeMatcher.matches(t.created_time))return!1;if(this.activeFilters.inTeams){var a;const e=v().um(i),t=null==e||null===(a=e.value)||void 0===a?void 0:a.id;if(!t||!this.teamFilterIds.has(t))return!1}if(this.activeFilters.blockTypes){const e=this.filters.blockTypes;if(!e)return!0;if(!e.includes(t.type))return!1}if(this.activeFilters.verificationOwners){if(!o)return!1;const{verificationOwners:e}=(0,n(470928).h4)({blockStore:o});if(!e.some((e=>(this.filters.verificationOwners||[]).includes(e.id))))return!1}return!0}}function O(e){if(e&&!e.error)return e.value}function U(e){let{sort:t,unsorted:n,batchSize:o,currentUserId:i}=e;const r=Date.now();if("relevance"!==t.field)return n;const{currentSpaceStore:a}=u().default.state,s=a&&a.id;if(i&&s&&"search_frecency_store"===p().default.getGroup("search_local_ranking_new_frecency_and_score")){const e=e=>{const t="number"==typeof e.score?e.score:1,n=(0,y().Wt)({spaceId:s,userId:i,pageId:e.id,now:r,weightForVisit:f().fp})??1;e.frecencyScore=n;const o=e.personalizationBoost??1;return-1*t*Math.max(n,o)};return c().Ul(n,e)}const l=c().iv(n,o).map((e=>m().A.sortFrecencyHighToLow({items:e,now:r,currentUserId:i,recordFrecency:!0})));return c().Bq(l)}function F(e){const{localResults:t,serverResults:n}=e;if(t||n){if(t&&n){const e=new Set(t.map((e=>e.id)));return t.map((e=>{const t=(o=e.id,null==n?void 0:n.find((e=>e.id===o)));var o;const i=(null==(r=t)?void 0:r.originalPosition)??e.originalPosition;var r;const a=[...new Set([...e.badges??[],...(null==t?void 0:t.badges)??[]])];return{...e,originalPosition:i,serverEventProperties:(null==t?void 0:t.serverEventProperties)??e.serverEventProperties,sources:[...e.sources,...(s=t,(null==s?void 0:s.sources)??[])],badges:a};var s})).concat(n.filter((t=>!e.has(t.id))))}return t??n}}function V(e){var t,n;const{searchResultStore:o}=e,i=F({localResults:null===(t=o.state.localResults)||void 0===t?void 0:t.results,serverResults:null===(n=o.state.serverResults)||void 0===n?void 0:n.results}),r=o.state.focusedIndex,a=null==r?void 0:r.global,s=null==r?void 0:r.local;if(void 0===a||void 0===s)return;const l=[...o.state.fixedActionResults??[],...o.state.queryBasedActionResults??[]],c=a<l.length?l[a]:void 0;if(c)return c;const d=a-l.length;if(!i||i.length<=0||d<0)return;const u=i[d];return u?{type:"page_result",value:{index:{global:a,local:s},selectedResult:u}}:void 0}function j(e){const{existingResults:t,newPageResults:n}=e;if(void 0!==t||void 0!==n){if(t&&n){const e=[...t.results],o=new Set(t.results.map((e=>e.id)));return e.push(...n.results.filter((e=>!(e.sources.includes(l().Ni.ElasticsearchRandom)&&e.originalPosition<t.results.length)&&!o.has(e.id)))),{...n,results:e,total:n.total}}return t??n}}function z(e){const{intentBasedGrouping:t,localResults:n,serverResults:o}=e,i=F({localResults:n,serverResults:o})??[],r=i.filter((e=>e.sources.includes(l().Ni.ElasticsearchUniqueID))),a=i.filter((e=>!e.sources.includes(l().Ni.ElasticsearchUniqueID)));return t?{type:"intent-based-grouping",sections:{uniqueIdSearchResults:r,jumpBackInSearchResults:a.filter((e=>e.sources.includes(l().Ni.Local))),serverOnlySearchResults:a.filter((e=>!e.sources.includes(l().Ni.Local)))},allSearchResults:i}:r.length>0?{type:"unique-id",sections:{uniqueIdSearchResults:r,nonUniqueIdSearchResults:a},allSearchResults:i}:{type:"all",sections:{allSearchResults:i},allSearchResults:i}}function H(e,t){const n=e.device.isMobile?2:5;return t.slice(0,n)}function W(e){const{mainEditorCurrentBlockStore:t}=u().default.state,n=t&&h().qb(e,t);return{hasPublicAccessPermission:Boolean(n),publicAccessPermissionAncestorBlockId:(null==n?void 0:n.from.table)===s().ev?null==n?void 0:n.from.blockId:void 0}}function q(e){let{environment:t,searchResultsSection:n,modalBodyMenu:o,searchFilterMenu:i,actionItemCount:r}=e;if(!n)return 0;let a=0;if(t.device.isMobile){if(o instanceof Element&&null!==i){const e=o.getElementsByClassName(g().Smt)[0];e instanceof Element&&(a=e.clientHeight-i.getClientHeight()+e.scrollTop)}}else a=n.getBoundingClientRect().height+n.scrollTop;let s=0,l=0;const c=n.getElementsByClassName(g().J5z);for(let u=0;u<c.length;u++){l+=c[u].clientHeight}const d=n.getElementsByClassName(g().LF7);for(let u=0;u<d.length;u++){const e=d[u];if(!(a-l>e.clientHeight/2))break;s+=1,l+=e.clientHeight}return s-r}function K(e){if(void 0===e)return[];return e.map((e=>({id:e.id,score:e.score,localSource:e.localSource,sources:e.sources,spaceId:e.spaceId})))}function G(e){var t;if(void 0!==(null==e?void 0:e.highlightBlockId)&&void 0===(null===(t=e.highlight)||void 0===t?void 0:t.title))return e.highlightBlockId}},780942:(e,t,n)=>{n.d(t,{T:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{suggestions:{}}}}const i=new o;(0,n(604341).exposeDebugValue)("CoEditingSuggestionsStore",i)},781286:(e,t,n)=>{n.d(t,{J6:()=>c,PA:()=>u,Uc:()=>d,hv:()=>l});var o=()=>n(896628),i=()=>n(319975),r=()=>n(751156),a=()=>n(129522),s=()=>n(958163);function l(e){const{store:t}=e,n=t.getImageHyperlink()||"",o="placeholder"!==n?n:void 0,i=a().K.getRect(t);s().A.setState({open:!0,url:"",type:"image",selectionRect:i,store:t,imageHyperlink:o,focusLinkInput:!0,trapFocus:!0})}function c(){s().A.setState({open:!1,type:"image"})}function d(e){const{url:t,transaction:n}=e,r=s().A.state;if(!r.open)return;const a=i().bS(t);o().zA({stores:[r.store],update:{image_hyperlink:a},transaction:n}),s().A.setState({...r,imageHyperlink:a,url:""})}function u(e){const t=s().A.state;t.open&&(r().createAndCommit({userAction:"imageHyperlink.unlinkImage",environment:e,canUndo:!0,perform:e=>{o().zA({stores:[t.store],update:{image_hyperlink:null},transaction:e})}}),s().A.reset())}},783793:(e,t,n)=>{n.d(t,{U:()=>u,o:()=>d});n(296540);var o=()=>n(401497),i=()=>n(366295),r=()=>n(959013),a=()=>n(100622),s=()=>n(278589),l=()=>n(200424),c=n(474848);function d(e){const{variant:t,imgSource:n,style:i,shadowVariant:r="strong",wrapStyle:a}=e,d=e.wrapWithPadding??!0,u=(0,o().IS)((e=>{const n=(0,s().N)(t);return{faceImgWrap:{width:n,height:n,borderRadius:"100%",background:e.assistantCornerButtonBackground,..."strong"===r&&{boxShadow:e.shadowMD},..."light"===r&&{borderRadius:"50%",boxShadow:e.shadowSM},overflow:"hidden",...a},faceImg:{height:n,width:n,...d&&{pointerEvents:"none"},...i}}}),[t,r,a,d,i]),p=(0,c.jsx)("img",{style:u.faceImg,src:n??l(),alt:"Notion AI face"});return d?(0,c.jsx)("div",{style:{cursor:"pointer"},children:(0,c.jsx)("div",{style:u.faceImgWrap,children:p})}):p}function u(){const e=(0,o().IS)((e=>({faceIcon:{height:16,width:16,fill:a().Ay.white},spacer:{marginLeft:4},wrapper:{display:"flex",alignItems:"center",cursor:"pointer"}})),[]);return(0,c.jsxs)("div",{style:e.wrapper,children:[(0,i().L)(e.faceIcon),(0,c.jsx)("div",{style:e.spacer,children:(0,c.jsx)(r().sA,{defaultMessage:"Ask AI",id:"EmbedBlockActions.AskAI"})})]})}},783848:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},784438:(e,t,n)=>{n.d(t,{rE:()=>h,R0:()=>v,vQ:()=>A,jx:()=>S,Dc:()=>w,Xq:()=>C,_d:()=>y,e2:()=>c().e2,N9:()=>c().N9});n(898992),n(354520),n(908872);var o=()=>n(244641),i=()=>n(715256),r=()=>n(792071),a=()=>n(762433),s=()=>n(928217),l=()=>n(871392),c=()=>n(411387);function d(e){return{spaceLimit:u(e),userLimit:p(e)}}function u(e){let{billingData:t,space:n,config:o,numMembers:i}=e;const{baseGrant:r,studentGrant:l,grant032023:c,maxAllowance:d,studentGitHubGrant:u}=o;if(a().N8(t.subscription))return 0;if(a().eh(t,"student")){let e=s().ji(o,l,1);return s().Yg({space:n,grantId:s().Rs})&&(e+=s().ji(o,u,1)),e}const p=s().ji(o,r,i);let m=d.paid;["free","personal"].includes(a().AI(t))&&(m=d.free);let g=Math.min(p,m);return s().Yg({space:n,grantId:s().jM})&&(g+=s().ji(o,c,i)),g}function p(e){let{billingData:t,config:n,numMembers:o}=e;if(a().N8(t.subscription))return 0;const i=n.userGrant;return 1===o?i.singlePlayerAmount:i.multiplayerAmount}function m(e){let{isMobileNative:t,experimentService:n,billingData:o}=e;const r=n.checkGate({gateName:"packaging_changes_05_13_2025",actor:i().S3}),s=t&&!a().Fq(o)||a().eh(o,"student")||a().et(o);return r&&!s?"business":"ai"}var g=()=>n(560459),f=()=>n(979340);const v={guests:{type:"cumulative",data:(0,c().RN)({current:c().t.number()})},internal_guests:{type:"cumulative",data:(0,c().RN)({current:c().t.number(),hasLowGuestLimit:c().t.boolean()})},members:{type:"cumulative",data:(0,c().RN)({current:c().t.number()})},non_admin_members:{type:"check",data:c().t.isUndefined()},view_chart:{type:"per_use",data:c().t.isUndefined()},form_filesize:{type:"per_use",data:c().t.isUndefined()},form_customization:{type:"check",data:c().t.isUndefined()},unbranded_forms:{type:"check",data:c().t.isUndefined()},forms_conditional_logic:{type:"check",data:c().t.isUndefined()},premium_automations:{type:"check",data:c().t.isUndefined()},move_to:{type:"check",data:c().t.isUndefined()},claimable_spaces:{type:"check",data:c().t.isUndefined()},domain_settings:{type:"check",data:c().t.isUndefined()},managed_users:{type:"check",data:c().t.isUndefined()},saml:{type:"check",data:c().t.isUndefined()},scim:{type:"check",data:c().t.isUndefined()},legal_holds:{type:"check",data:c().t.isUndefined()},export_members:{type:"check",data:c().t.isUndefined()},hipaa_compliance:{type:"check",data:c().t.isUndefined()},sites_multiple_public_domains:{type:"check",data:c().t.isUndefined()},custom_image_upload_favicon:{type:"check",data:c().t.isUndefined()},custom_public_sites_layout:{type:"check",data:c().t.isUndefined()},seo_title_and_description:{type:"check",data:c().t.isUndefined()},admin_transfer_private_content:{type:"check",data:c().t.isUndefined()},configurable_mention_invites:{type:"check",data:c().t.isUndefined()},configurable_retention:{type:"check",data:c().t.isUndefined()},team_self_promotion:{type:"check",data:c().t.isUndefined()},watermarkless_chart_export:{type:"check",data:c().t.isUndefined()},configurable_deletion_and_retention_settings:{type:"check",data:c().t.isUndefined()},sudo_mode:{type:"check",data:c().t.isUndefined()},slack_imports_invite:{type:"check",data:c().t.isUndefined()},google_imports_invite:{type:"check",data:c().t.isUndefined()},content_reprovisioning:{type:"check",data:c().t.isUndefined()},ai_connectors:{type:"check",data:c().t.isUndefined()},collection_property_autofill:{type:"per_use",data:c().t.object({required:{spaceUsage:c().t.number(),userUsage:c().t.number(),memberCount:c().t.number(),aiPromotionConfig:s().Pv,space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},ai_usage:{type:"cumulative",data:c().t.object({required:{current:c().t.number(),userUsage:c().t.number(),memberCount:c().t.number(),aiPromotionConfig:s().Pv,space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},ai_research_mode:{type:"check",data:c().t.isUndefined()},ai_meeting_notes:{type:"check",data:c().t.isUndefined()},ai_app_builder:{type:"check",data:c().t.isUndefined()},block_read_and_write_role:{type:"check",data:c().t.isUndefined()},invite_user_to_workspace_mentions:{type:"check",data:c().t.isUndefined()},assistant_image_filesize_bytes:{type:"per_use",data:c().t.isUndefined()},assistant_json_filesize_bytes:{type:"per_use",data:c().t.isUndefined()},assistant_pdf_filesize_bytes:{type:"per_use",data:c().t.isUndefined()},custom_teamspace_permissions:{type:"check",data:c().t.isUndefined()},collection_connected_property_google_drive:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_connected_property_figma:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_connected_property_zendesk:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_connected_property_github:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_github:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_asana:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_gitlab:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_jira:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_jira_workspace:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})},collection_synced_database_jira_datacenter:{type:"check",data:c().t.object({required:{space:c().t.undefinable(c().t.instanceOf(r().ckR))},optional:{}})}},h=(0,n(534177).uv)(v),_=o().c9.fromISO("2025-08-13"),b={guests:e=>{let{amount:t,billingData:n,data:{current:o}}=e;return k({billingData:n,amount:t,current:o,limits:{free:10,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},internal_guests:e=>{let{amount:t,billingData:n,data:{current:o,hasLowGuestLimit:i}}=e;return k({billingData:n,amount:t,current:o,limits:(0,f().m9)({hasLowGuestLimit:i}),upsellMap:{free:"personal",student:"business",personal:"business",plus:"business"}})},members:e=>{let{amount:t,data:{current:n},billingData:o}=e;return k({billingData:o,amount:t,current:n,limits:{free:a().YF(o)?1:"unlimited",personal:1,student:1,plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{student:"plus",personal:"plus"}})},non_admin_members:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"plus"})},view_chart:e=>{let{amount:t,billingData:n}=e;return I({billingData:n,amount:t,limits:{free:1,personal:"unlimited",student:"unlimited",plus:"unlimited",business:"unlimited",enterprise:"unlimited"},upsellMap:{free:"personal"}})},form_filesize:e=>{let{amount:t,billingData:n}=e;return I({billingData:n,amount:t,limits:{free:5,personal:100,student:100,plus:100,business:100,enterprise:100},upsellMap:{free:"personal"}})},form_customization:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},unbranded_forms:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},forms_conditional_logic:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"business"})},premium_automations:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},move_to:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},claimable_spaces:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},domain_settings:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},managed_users:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},invite_user_to_workspace_mentions:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},saml:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"business"})},scim:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},legal_holds:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},slack_imports_invite:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},google_imports_invite:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},export_members:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"business"})},hipaa_compliance:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},sites_multiple_public_domains:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},custom_image_upload_favicon:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},custom_public_sites_layout:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},seo_title_and_description:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},admin_transfer_private_content:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},configurable_mention_invites:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},configurable_retention:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},watermarkless_chart_export:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},team_self_promotion:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},configurable_deletion_and_retention_settings:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},sudo_mode:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},content_reprovisioning:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"enterprise"})},ai_connectors:e=>{let{billingData:t,environment:n}=e;const r=(0,a().AI)(t),s=(0,a().eh)(t,"personal"),l=(0,f().rV)(r,"plus"),c=(0,a().eh)(t,"plus"),d=(0,a().eh)(t,"ai"),u={type:"none"},p={type:"product",limit:u,product:"ai",trialability:"none"},m={type:"product",limit:u,product:"personal",trialability:"none"},g={type:"product",limit:u,product:"business",trialability:"none"};if(!n.experimentService.checkGate({gateName:"packaging_changes_05_13_2025",actor:i().S3}))return l&&d?{type:"available",limit:u,expiry:void 0}:l?{type:"unavailable",limit:u,upsell:p}:{type:"unavailable",limit:u,upsell:m};if((0,a().N8)(null==t?void 0:t.subscription))return c&&d||(0,f().rV)(r,"business")&&d?{type:"available",limit:u,expiry:void 0}:(0,f().rV)(r,"business")?{type:"unavailable",limit:u,upsell:p}:x({billingData:t,minimumTier:"business"});if((0,a().YF)(t))return s&&d?{type:"available",limit:u,expiry:void 0}:s?{type:"unavailable",limit:u,upsell:p}:{type:"unavailable",limit:u,upsell:m};if(c&&d){if(o().c9.now()<_){return{type:"available",limit:u,expiry:{type:"sunset",endDate:_,upsell:g}}}return{type:"unavailable",limit:u,upsell:g}}return x({billingData:t,minimumTier:"business"})},collection_property_autofill:e=>{let{billingData:t,data:{spaceUsage:n,userUsage:o,memberCount:i,aiPromotionConfig:r,space:a},amount:s,environment:c}=e;const u={type:"per_use",amount:"unlimited"},p={type:"per_use",amount:5};if((0,l().a)({billingData:t,environment:c,spaceId:null==a?void 0:a.getSpaceId()}))return{type:"available",limit:u,expiry:void 0};const g={type:"product",product:m({isMobileNative:c.isMobileNative,experimentService:c.experimentService,billingData:t}),limit:u,trialability:"none"},{spaceLimit:f,userLimit:v}=d({billingData:t,space:a,config:r,numMembers:i});return"unknown"===s||s>5?{type:"unavailable",limit:p,upsell:g}:n+1<=f||o+1<=v?{type:"available",limit:p,upsell:g,expiry:void 0}:{type:"unavailable",limit:{type:"per_use",amount:0},upsell:g}},ai_usage:e=>{let{billingData:t,data:{current:n,userUsage:o,memberCount:i,aiPromotionConfig:r,space:a},amount:s,actor:c,environment:u}=e;const p={type:"cumulative",current:n,total:"unlimited"};if(c.isAdminActor)return{type:"available",limit:p,expiry:void 0};if((0,l().a)({billingData:t,environment:u,spaceId:null==a?void 0:a.getSpaceId()}))return{type:"available",limit:p,expiry:void 0};const{spaceLimit:g,userLimit:f}=d({billingData:t,config:r,numMembers:i}),v={type:"product",product:m({isMobileNative:u.isMobileNative,experimentService:u.experimentService,billingData:t}),limit:p,trialability:"none"};return"unknown"===s?{type:"unavailable",limit:{type:"cumulative",current:n,total:g},upsell:v}:n+s<=g?{type:"available",limit:{type:"cumulative",current:n,total:g},upsell:v,expiry:void 0}:o+s<=f?{type:"available",limit:{type:"cumulative",current:n+o,total:g+f},upsell:v,expiry:void 0}:{type:"unavailable",limit:{type:"cumulative",current:n,total:g},upsell:v}},ai_research_mode:e=>{let{billingData:t,environment:n}=e;const o=(0,a().AI)(t),i=(0,a().eh)(t,"personal"),r=(0,a().eh)(t,"ai"),s={type:"none"},l={type:"product",limit:s,product:"ai",trialability:"none"},c={type:"product",limit:s,product:"personal",trialability:"none"},d={type:"available",limit:{type:"none"},expiry:void 0};return(0,a().N8)(null==t?void 0:t.subscription)?(0,f().rV)(o,"business")&&r?d:(0,f().rV)(o,"business")?{type:"unavailable",limit:s,upsell:l}:x({billingData:t,minimumTier:"business"}):(0,a().YF)(t)?i&&r?{type:"available",limit:s,expiry:void 0}:i?{type:"unavailable",limit:s,upsell:l}:{type:"unavailable",limit:s,upsell:c}:x({billingData:t,minimumTier:"business"})},ai_meeting_notes:e=>{let{billingData:t,environment:n}=e;const o=(0,a().AI)(t),i=(0,a().eh)(t,"personal"),r=(0,a().eh)(t,"ai"),s={type:"none"},l={type:"product",limit:s,product:"ai",trialability:"none"},c={type:"product",limit:s,product:"personal",trialability:"none"},d={type:"available",limit:{type:"none"},expiry:void 0};return(0,a().N8)(null==t?void 0:t.subscription)?(0,f().rV)(o,"business")&&r?d:(0,f().rV)(o,"business")?{type:"unavailable",limit:s,upsell:l}:x({billingData:t,minimumTier:"business"}):(0,a().YF)(t)?i&&r?{type:"available",limit:s,expiry:void 0}:i?{type:"unavailable",limit:s,upsell:l}:{type:"unavailable",limit:s,upsell:c}:x({billingData:t,minimumTier:"business"})},ai_app_builder:e=>{let{billingData:t,environment:n}=e;const o=(0,a().AI)(t),i=(0,a().eh)(t,"personal"),r=(0,a().eh)(t,"ai"),s={type:"none"},l={type:"product",limit:s,product:"ai",trialability:"none"},c={type:"product",limit:s,product:"personal",trialability:"none"},d={type:"available",limit:{type:"none"},expiry:void 0};return(0,a().N8)(null==t?void 0:t.subscription)?(0,f().rV)(o,"business")&&r?d:(0,f().rV)(o,"business")?{type:"unavailable",limit:s,upsell:l}:x({billingData:t,minimumTier:"business"}):(0,a().YF)(t)?i&&r?{type:"available",limit:s,expiry:void 0}:i?{type:"unavailable",limit:s,upsell:l}:{type:"unavailable",limit:s,upsell:c}:x({billingData:t,minimumTier:"business"})},block_read_and_write_role:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"personal"})},assistant_image_filesize_bytes:e=>{let{amount:t,billingData:n}=e;const o=a().eh(n,"ai"),i=g().Sd,r=g().Qk;return I({billingData:n,amount:t,limits:{free:o?i:r,personal:i,student:i,plus:i,business:i,enterprise:i},upsellMap:{free:"personal"}})},assistant_json_filesize_bytes:e=>{let{amount:t,billingData:n}=e;return I({billingData:n,amount:t,limits:{free:g().VZ,personal:g().VZ,student:g().VZ,plus:g().VZ,business:g().VZ,enterprise:g().VZ},upsellMap:{}})},assistant_pdf_filesize_bytes:e=>{let{amount:t,billingData:n}=e;const o=a().eh(n,"ai"),i=g().VZ,r=g().tH;return I({billingData:n,amount:t,limits:{free:o?i:r,personal:i,student:i,plus:i,business:i,enterprise:i},upsellMap:{free:"personal"}})},custom_teamspace_permissions:e=>{let{billingData:t}=e;return x({billingData:t,minimumTier:"business"})},collection_connected_property_figma:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_connected_property_zendesk:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_connected_property_github:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_connected_property_google_drive:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"plus",cutoffDate:T,expiryDate:M})},collection_synced_database_github:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_synced_database_asana:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_synced_database_gitlab:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_synced_database_jira:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_synced_database_jira_workspace:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"business",cutoffDate:T,expiryDate:M})},collection_synced_database_jira_datacenter:e=>{let{environment:t,billingData:n,data:{space:o}}=e;return B({environment:t,billingData:n,space:o,minimumTier:"enterprise",cutoffDate:T,expiryDate:M})}};function y(e){return(0,c()._d)(v,b,e)}function S(e){return(0,c().jx)(v,b,e)}function w(e){return(0,c().jx)(v,b,{...e,state:e.state,scope:{...e.scope,billingData:{...e.scope.billingData,subscription:{trialEnd:e.state.trialEnd,items:e.state.items}}}})}function k(e){let{billingData:t,amount:n,current:o,limits:i,upsellMap:r}=e;const s=a().AI(t),l=i[s],c={current:o,total:l,type:"cumulative"},d=r[s],u=d?{type:"product",product:d,limit:{type:"cumulative",current:o,total:i[d]},trialability:"none"}:{type:"contact_sales"};return l&&("unlimited"===l||"unknown"!==n&&n+o<=l)?{type:"available",limit:c,upsell:u,expiry:void 0}:{type:"unavailable",limit:c,upsell:u}}function I(e){let{billingData:t,amount:n,limits:o,upsellMap:i}=e;const r=a().AI(t),s=o[r],l={amount:s,type:"per_use"},c=i[r],d=c?{type:"product",product:c,limit:{type:"per_use",amount:o[c]},trialability:"none"}:{type:"contact_sales"};return s&&("unlimited"===s||"unknown"!==n&&n<=s)?{type:"available",limit:l,upsell:d,expiry:void 0}:{type:"unavailable",limit:l,upsell:d}}function x(e){let{billingData:t,minimumTier:n}=e;const o=a().AI(t),i={type:"none"};return(0,f().rV)(o,n)?{type:"available",limit:i,expiry:void 0}:{type:"unavailable",limit:i,upsell:{type:"product",product:n,limit:i,trialability:"none"}}}function A(e){return((null==e?void 0:e.items)??[]).filter((e=>"sites_custom_hostnames"===a().IE(e))).reduce(((e,t)=>e+t.quantity),0)}function C(e){if(e)return(0,c().e2)(e)?e.expiry?e.expiry.upsell:void 0:e.upsell}const T=o().c9.fromISO("2025-05-13"),M=o().c9.fromISO("2025-08-13");function P(e,t){return Boolean(e&&e.created_time&&e.created_time>t.toMillis())}function B(e){let{environment:t,billingData:n,space:o,minimumTier:r,cutoffDate:s,expiryDate:l}=e;if(!t.experimentService.checkGate({gateName:"packaging_changes_05_13_2025",actor:i().S3}))return{type:"available",limit:{type:"none"},expiry:void 0};const c=a().AI(n),d={type:"none"},u={type:"product",product:r,limit:d,trialability:"none"};return(0,f().rV)(c,r)?{type:"available",limit:d,expiry:void 0}:P(o,s)||P(o,s)||t.experimentService.checkGate({gateName:"collection_feature_expiry_08_13_2025",actor:i().S3,customIDs:{spaceId:null==o?void 0:o.id}})?{type:"unavailable",limit:d,upsell:u}:{type:"available",limit:d,expiry:{type:"sunset",endDate:l,upsell:u}}}},785082:(e,t,n)=>{n.d(t,{PX:()=>i,eR:()=>r,i4:()=>o});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const o="etClient",i="render_duration",r=(new Set(["destinations","emergencyThrottlePercentage","amplitudeOptions","datadogOptions","snowflakeOptions","statsigOptions","customerIoOptions"]),n(638681).literals("connected_apps_settings","compliance_connected_apps_settings","external_object_instance_block","external_object_instance_inline_popup","external_object_instance_block_error_dropdown","placeholder_root_external_collection_view_block","connected_relation_property_menu","source_picker_connect_another_account","integration_gallery","collection_settings_property_type","integration_file_picker","send_to_notion","unfurl","messages_tab","install_redirect","all_updates","notifications_and_settings","collection_view_settings","share_menu","space_settings","workspace_connections_redirect","import_settings"),["reply_menu_mentions_comments","reply_menu_archive","reply_menu_all_updates","updates_menu_mentions_comments","updates_menu_archive","updates_menu_all_updates"]),a=["platform","deviceType","device_os","is_mobile_beta","desktopArch"],s=["app_version","mobile_app_version","desktop_app_version","desktopOsVersion","desktopElectronVersion","mobileNativeSystemVersion","mobileNativeAppVersion","is_experimental_build"]},786074:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{edits:[],hoveredEditId:void 0}}getHoveredEdit(){if(this.state.hoveredEditId)return n(947983).A.getEditById(this.state.hoveredEditId)}}const i=new o,r=i;(0,n(604341).exposeDebugValue)("AssistantHoverStore",i)},786222:(e,t,n)=>{n.d(t,{V:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.125 5.05a2.875 2.875 0 1 1 5.75 0v3.6a2.875 2.875 0 1 1-5.75 0z"}),(0,o.jsx)("path",{d:"M5.604 10.891a.625.625 0 1 0-1.028.71 6.58 6.58 0 0 0 4.799 2.82v1.929H5.95a.625.625 0 1 0 0 1.25h8.1a.625.625 0 0 0 0-1.25h-3.425v-1.93a6.58 6.58 0 0 0 4.799-2.818.625.625 0 1 0-1.029-.71A5.33 5.33 0 0 1 10 13.2a5.33 5.33 0 0 1-4.396-2.309"})]})},r=(0,n(340498).wt)("microphoneFill",i)},786508:(e,t,n)=>{n.d(t,{Pq:()=>i,RS:()=>r});n(898992),n(354520),n(581454);var o=()=>n(534177);function i(e){switch(e){case"ai_fifty_percent":return"ai_fifty_percent_upgrade";case"resurrection_offer":case"team_three_months":case"team_annual":case"business_annual":case"business_three_months":case"enterprise_three_months":case"enterprise_annual":case"lic_50":case"lic_25":case"new_year_2025":return e;default:(0,o().HB)(e)}}function r(e){const t=null==e?void 0:e.campaign;switch(t){case"team_three_months":case"team_annual":case"business_three_months":case"business_annual":case"enterprise_three_months":case"enterprise_annual":case"resurrection_offer":case"lic_25":case"lic_50":case"new_year_2025":return t;case"ai_fifty_percent_upgrade":case"ai_fifty_percent_downgrade":return"ai_fifty_percent";case"default":return}}},786601:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{position:"sidebar",query:void 0,isOpen:!1,isNewElectronTab:!1,openedTimeMs:void 0,sessionId:void 0,previousTextSelection:void 0}}closeAndResetMetricsState(){this.update((e=>({...e,isOpen:!1,openedTimeMs:void 0,sessionId:void 0})))}}const i=new o},787172:(e,t,n)=>{n.d(t,{s:()=>s});var o=()=>n(388821),i=()=>n(989423),r=()=>n(508496),a=()=>n(666144);function s(e){const{environment:t,eventName:n,response:s,userId:l,inMemoryRecordCache:c}=e;if(s&&s.recordMap){const e=o().RecordMapWithRole.create(s.recordMap);if(r().default.checkGate({gateName:"record_map_logging"})){const{num_records:o,num_cached_records:r,num_stale_records:s}=a().b4(t,e);i().u4({environment:t,event:{eventName:"client_record_map_stats",eventProperties:{api_name:n,num_records:o,num_cached_records:r,num_stale_records:s}}})}"syncRecordValues"!==n&&"syncRecordValuesSpace"!==n&&"syncRecordValuesMain"!==n&&"syncRecordValuesSpaceInitial"!==n&&"syncRecordValuesSpaceFanout"!==n&&a()._O({environment:t,userId:l,inMemoryRecordCache:c||t.defaultRecordCache.inMemoryRecordCache,recordMap:e,maybeStaleRecordMap:"loadCachedPageChunk"===n||"loadCachedPageChunks"===n||"loadCachedPageChunkV2"===n||"loadPageChunkV2ForOfflineSync"===n||"syncOfflinePages"===n,debugSource:"handleRecordMapForResponse"})}}},787812:(e,t,n)=>{n.d(t,{i:()=>i});var o=()=>n(921598);function i(e,t){return`group-${e}-${(0,o().Ix)(t)}`}},789200:(e,t,n)=>{n.d(t,{V:()=>f,g:()=>v});n(898992),n(803949);var o=()=>n(634201),i=()=>n(179034),r=()=>n(919709),a=()=>n(220719),s=()=>n(518736),l=()=>n(962845),c=()=>n(969197),d=()=>n(792002),u=()=>n(630116),p=()=>n(808207),m=()=>n(725614),g=()=>n(66788);function f(e){const{environment:t,multiSelection:n,annotationKey:o,transaction:i}=e;(0,l().$W)(n).forEach((e=>{let{store:n,selection:r}=e;v({environment:t,store:n,annotationKey:o,selection:r,transaction:i,updateSelection:!1})}))}function v(e){const{environment:t,store:n,selection:l,annotationKey:f,transaction:v,updateSelection:h}=e,_=n.getValue();if(!_)return;const b=r().gwU({textValue:_,selection:l,annotationKey:f}),y=n.isTable(i().ev)&&(0,c().T)(n)||n.getRecordStoreAtRootPath();y instanceof u().Bv&&s().Le({store:n,blockStore:y})?function(e){const{blockStore:t,selection:n,annotationKey:i,transaction:s,fullTextValue:l}=e;(0,a().MX)(t.useCrdt(),"Expected CRDT block");const c=t.getBlockTitleStore().getValue(),u=r().xbM(c,n);if((0,d().gE)(u))return;const m=(0,a().o9)(t.getBlockTitleTextSliceTree()),g=new(o().Z4)(r().qAZ(c)),{startIndex:f,endIndex:v}=g.getInclusiveStringRangeForSelection(u),{operations:h,invertedOperations:_}=m.getOperationsForRemoveAnnotation(f,v,i);p().d({transaction:s,store:t,crdtOperations:h,invertedOperations:_,fullTextValue:l})}({blockStore:y,selection:l,annotationKey:f,transaction:v,fullTextValue:b}):(g().Tm({environment:t,store:n,value:b,transaction:v}),g().Xt({environment:t,store:n,oldTextValue:_,newTextValue:b,transaction:v,rootStore:y,removeInlineRecords:!0})),h&&m().setSelection({store:n,selection:l})}},789550:(e,t,n)=>{n.d(t,{R:()=>r,t:()=>i});const o=(0,n(446943).C)({displayName:"ScrollerContext",legacyContextKey:"scrollerContext",modernContextDefaultValue:void 0}),i=o.Provider,r=o.context},792002:(e,t,n)=>{n.d(t,{B1:()=>M,Bv:()=>ae,D9:()=>ne,DX:()=>R,Do:()=>oe,EH:()=>Y,GZ:()=>V,H4:()=>K,I6:()=>E,IX:()=>N,J3:()=>G,Jd:()=>ee,LG:()=>F,NG:()=>j,O7:()=>J,SL:()=>x,X4:()=>re,Yl:()=>I,aO:()=>z,aR:()=>L,gE:()=>A,hH:()=>T,iY:()=>Q,iu:()=>X,j_:()=>te,lS:()=>Z,lr:()=>H,mk:()=>O,oT:()=>D,s6:()=>U,ts:()=>ie,x7:()=>P,y1:()=>W,y_:()=>B});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(581454),n(737550);var o=()=>n(507707),i=()=>n(319954),r=()=>n(700500),a=()=>n(634201),s=()=>n(179034),l=()=>n(919709),c=()=>n(708830),d=()=>n(220719),u=()=>n(496603),p=()=>n(534177),m=()=>n(301421),g=()=>n(695625),f=()=>n(397248),v=()=>n(77246),h=()=>n(666710),_=()=>n(502438),b=()=>n(24157),y=()=>n(231722),S=()=>n(962845),w=()=>n(20313);const k="data-text-edit-side";function I(e){return{[k]:e}}function x(e){if(e instanceof HTMLElement){const t=e.closest(`[${k}]`),n=null==t?void 0:t.getAttribute(k);if("start"===n||"end"===n)return n}}function A(e){return e.startIndex===e.endIndex}function C(e){const{startIndex:t}=e;let n;return n=A(e)?[t-1]:function(e){return u().y1(e.startIndex,e.endIndex)}(e),n}function T(e,t){const n=l().RQ(t);if(1===e.length&&-1===e[0]){const e=n[0];return e?[l().uPN(e).filter(l().gqr)]:[]}const o=n.map((e=>a().PE(l().N8A(e))));return e.map((e=>{let t=0;const i=o.findIndex((n=>(t+=n.length,t>e))),r=n[i];return r?l().uPN(r):[]}))}function M(e){if("editing"===b().default.state.mode)return function(e,t,n){const o=l().kJl(e),i=P(o,t,n);for(const r of o){const e=i[r];if(e)return e}}(e,b().default.state.multiSelection,b().default.state.forceExtendAnnotations)}function P(e,t,n){const o={};if(0===e.length)return o;if((0,y().kM)(t)){for(const t of e){const e=n[(0,l().RNO)(t)];if(null!=e&&e.extend){const n=e.annotation;o[t]=n}}return o}const i=new Set(e);let r=!0;const a=(0,S().$W)(t);for(const{store:s,selection:c}of a){const e=s.getValue(),t=l().xbM(e,c),{tokensInsideRange:n}=l().AI5(e,t.startIndex,t.endIndex);for(const a of n){const e=l().uPN(a);for(const t of i){const n=e.find((e=>l().Aux(e)===t));if(r&&n)(0,d().MX)(void 0===o[t],"Duplicate annotation type"),o[t]=n;else if(n);else if(delete o[t],i.delete(t),0===i.size)return o}r=!1}}return o}function B(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{multiSelection:n}=t;if((0,y().kM)(n))return!1;const o=(0,S().$W)(n);for(const{store:i,selection:r}of o){const t=i.getValue();if(!t)continue;const n=l().RQ(t);let o=0;for(const i of n){const t=a().PE(l().N8A(i));if(o>=r.startIndex&&o<r.endIndex||o<r.startIndex&&o+t.length>r.startIndex){if(l().uPN(i).some((t=>l()._XS(t)===e)))return!0}o+=t.length}}return!1}function R(e,t,n){const o=C(e),r=t.getValue()||[];return function(e,t,n,o){const r=new(i().r),a=e[0]||[];for(const i of a)if(!l().iGj(i))if("suggest"===o)if(l().SZO(i)){const e=D(t,n.endIndex,l()._XS(i));l().ZRT(i)&&!e?r.add([l().Ifu.SuggestionInsertText,l().vu(i)]):r.add(i)}else l().UZu(i)||l().i8$(i)?D(t,n.startIndex,l()._XS(i))&&r.add(i):(0,p().HB)(i);else if(!o||"default"===o||(0,v().Or)(o))if(l().gqr(i))r.add(i);else if(l().VS2(i)||l().rPg(i)){const e=l()._XS(i);!l().oxd(e)&&D(t,n.startIndex,e)&&r.add(i)}else(0,p().HB)(i);else(0,p().HB)(o);return r}(T(o,r),r,e,n)}function E(e){const t=b().default.state;if("editing"!==t.mode)return new(i().r);const{multiSelection:n,forceExtendAnnotations:o}=t,r=(0,S().$W)(n);if(0===r.length)return new(i().r);const{store:a,selection:s}=r[0],c=a.getValue(),d=c?l().AhH(c):0,p=R(s.endIndex===1/0?{startIndex:s.startIndex,endIndex:d}:s,a,e);return u().uk(o,((e,t)=>{e&&(e.extend?p.add(e.annotation):p.remove(e.annotation))})),p}function D(e,t,n){return Boolean(N(e,t,n))}function N(e,t,n){return L(e,t).find((e=>l()._XS(e)===n))}function L(e,t){const n=l().ANx(e,t);return l().uPN(n)??[]}function O(e){const t=U(e);if(t)return{startIndex:0,endIndex:t.endIndex}}function U(e){const t=m().n.findEditableWithStore(e);var n,o;if(t)return null===(n=(o=t.props).getEndSelection)||void 0===n?void 0:n.call(o);const i=l().qAZ(e.getValue());return{startIndex:i.length,endIndex:i.length}}function F(e,t){return e.store===t&&0===e.index}function V(e,t){return!e&&!t||e&&t&&(e.startIndex===t.startIndex||!e.startIndex&&!t.startIndex)&&(e.endIndex===t.endIndex||!e.endIndex&&!t.endIndex)}function j(e,t){return V(t,U(e))}function z(e,t){var n;return e.store===t&&e.index===(null===(n=U(t))||void 0===n?void 0:n.endIndex)}function H(){const e=_().default.getCurrentDefaultContainer();return m().n.getMembersByDOMOrder({filter:t=>{const n=t.getContextClosestSelectable();if(!n)return!1;const o=n.getContextSelectableContainer();return o&&o===e}})}function W(e){const t=e.getNode(),n=t?_().default.getDefaultContainerFromTarget(t):_().default.getCurrentDefaultContainer();return m().n.getMembersByDOMOrder({filter:e=>{const t=e.getContextClosestSelectable();if(!t)return!1;const o=t.getContextSelectableContainer();return o&&o===n}})}function q(e){return H().filter((e=>!e.props.disabled)).map((e=>e.props.store))}function K(e){const t=q(),n=t.indexOf(e);return-1===n?null:t[n-1]}function G(e){const t=q(),n=t.indexOf(e);return-1===n?null:t[n+1]}function $(e){const t=[];for(const n of e){const e=u().SL(t,(e=>{const t=e[0];return f().Wi(n.rect,t.rect)}));e>=0?t[e].push(n):t.push([n])}return t}function Y(e,t,n){const{selectableRectMap:i}=h().default.state,r=n?_().default.getDefaultContainerFromTarget(n):void 0,a=_().default.getCurrentDefaultContainer(),s=r||a,l=g().T.getMembersByDOMOrder({filter:e=>e.props.canSelect&&e.props.canEditText&&e.getContextSelectableContainer()===s}),c=[];for(const o of l){const e=i.get(o);e&&c.push({selectable:o,rect:e})}const d=c.filter((e=>{let{rect:n}=e;return n.top<=t}));d.reverse();const p=$(d).map((e=>e.sort(((e,t)=>-1*(0,o().A)(e.selectable.getNode(),t.selectable.getNode())))[0])),m=u().wq(p,(t=>{let{rect:n}=t;return Math.min(Math.abs(n.left-e),Math.abs(n.right-e))}));if(m)return m;const f=$(c.filter((e=>e.rect.bottom>=t&&d.indexOf(e)<0))).map((e=>e.sort(((e,t)=>(0,o().A)(e.selectable.getNode(),t.selectable.getNode())))[0])),v=u().wq(f,(t=>{let{rect:n}=t;return Math.min(Math.abs(n.left-e),Math.abs(n.right-e))}));return v||void 0}function Q(e,t){const{selectableRectMap:n}=h().default.state,o=g().T.getMembersByDOMOrder({filter:e=>e.getContextSelectableContainer()===t});for(let i=o.length-1;i>=0;i--){const t=n.get(o[i]);if(t&&t.bottom>e)return!1}return!0}function Z(e,t){const n=(0,w().Ag)({includeNonSelectableListContainer:!0,container:t.getContextSelectableContainer()});if(!n)return!1;const o=u().HV((0,c().Qe)([n],(e=>e.value.component===t)));if(!o)return!1;const{selectableRectMap:i}=h().default.state;return!(0,c().uU)(o,(n=>{const o=n.component&&i.get(n.component);return!!(o&&e<=o.bottom&&n.component!==t)}))}function X(e,t,n){const o=e.getValue(),i=[],r=n?l().k4p(o):l().q4_(o),{startIndex:s,endIndex:c}=t,d=a().PE(r),p=u().di(d,0,s),m=u().Kl(p,(e=>"\n"===e));m>=0?i.push(m):i.push(0);for(let a=s;a<c;a++){"\n"===d[a]&&i.push(a)}return i}function J(e){const{multiSelection:t}=e;return(0,S().$W)(t).map((e=>{let{store:t,selection:n}=e;const o=l().RQ(t.getValue()),i=l().xbM(o,n),{tokensInsideRange:r}=l().AI5(o,i.startIndex,i.endIndex);return l().q4_(r)})).join("\n\n")}function ee(e){const t=b().default.state;return"empty"!==t.mode&&Boolean((0,S().xk)(t.multiSelection,e))}function te(e){const t=b().default.state;return"editing"===t.mode&&(t.multiSelection.start.store===e&&(t.multiSelection.end.store===e?"contains-selection":"contains-selection-start"))}function ne(e){const t=b().default.state;if("editing"!==t.mode)return!1;const{start:n,end:o}=t.multiSelection;return n.store===e||o.store===e}function oe(e){const t=b().default.state;if("empty"===t.mode)return;const n=(0,y().H7)(t.multiSelection);if(n)return n.store===e?{type:"contain",selection:l().xbM(e.getValue(),n.selection)}:void 0;const{start:o,end:i}=t.multiSelection;if(o.store===e){const t=l().qAZ(e.getValue()).length;return{type:"start",index:Math.min(o.index,t)}}if(i.store===e){const t=l().qAZ(e.getValue()).length;return{type:"end",index:Math.min(i.index,t)}}}function ie(e){if(!(0,y().kM)(e))return!1;const{store:t,index:n}=e.start;return 0===n||"\n"===l().qAZ(t.getValue())[n-1]}function re(){if("editing"!==b().default.state.mode)return!1;const e=(0,y().H7)(b().default.state.multiSelection);if(!e)return!1;if(!e.store.isTable(s().ev))return!1;if(0===_().default.state.stores.length)return!1;return e.store.getRecordStoreAtRootPath().getType()===r().xd.code&&(b().default.isEditingCaption()?"caption":"body")}function ae(e,t){const n=l().RQ(e);if(t<0||t>=n.length)return;let o=0;for(let i=0;i<n.length;i++){if(i===t)return{startIndex:o,endIndex:o+l().WWE(n[i])};o+=l().WWE(n[i])}}},792415:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state.publicPageData)))}}const i=new o},792540:(e,t,n)=>{n.d(t,{Jw:()=>S,M5:()=>I,OM:()=>A,Os:()=>y,wc:()=>x});n(944114),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454);var o=()=>n(700500),i=()=>n(329199),r=()=>n(634201),a=()=>n(390066),s=()=>n(919709),l=()=>n(146054),c=()=>n(496603),d=()=>n(534177),u=()=>n(799832),p=()=>n(517223),m=()=>n(980914),g=()=>n(351360),f=()=>n(411671),v=()=>n(148832),h=()=>n(258836),_=()=>n(870092),b=()=>n(299545);const y={none:{type:"none"},block_match:{type:"block_match"}};function S(e){const{find:t,textValue:n,intl:o}=e,i=function(e){const{textValue:t,substring:n}=e;let o=0,i=0;const a=[];if(!t)return a;const l=(0,r().PE)(n.toLowerCase()),d=(0,s().DJ2)(t);return(0,s().RQ)(d).forEach((e=>{i=o+(0,s().WWE)(e);if(!((0,s().bHQ)(e)||(0,s().BEe)(e)))return void(o=i);const t=(0,s().N8A)(e).toString(),n=function(e){const{subsetArray:t,fullArray:n,offset:o=0}=e,i=[];for(let r=0;r<n.length&&!(t.length+r>n.length);r++){c().n4(c().di(n,r,r+t.length),t)&&i.push({startIndex:r+o,endIndex:r+t.length+o})}return i}({fullArray:(0,r().PE)(t.toLowerCase()),subsetArray:l,offset:o});a.push(...n),o=i})),a}({textValue:n,substring:t}).map((e=>({selection:e,allowReplace:!0}))),a=function(e){const{textValue:t,find:n,intl:o}=e,i=(0,s().$6U)(t),r=g().default.state.currentUserStore;if(0===i.length||!r)return[];const a=i.map((e=>{let t,{pointer:i,selection:a}=e;if("notion_user"===i.table)t=_().L.createChildStore(r,i);else{if("bot"!==i.table)return void i.table;t=h().v.createChildStore(r,i)}if(t.getDisplayName(o).toLowerCase().includes(n.toLowerCase()))return a}));return c().oE(a)}({textValue:n,intl:o,find:t}).map((e=>({selection:e,allowReplace:!1}))),u=(0,s().MbB)({textValue:n,find:t,intl:o}).map((e=>({selection:e,allowReplace:!1}))),p=function(e){const{find:t,textValue:n}=e,o=(0,s().JzQ)(n),i=g().default.state.currentSpaceStore;if(!i)return[];const r=o.map((e=>{let{pointer:n,selection:o}=e;const r=v().B.createChildStore(i,n);if((0,s().q4_)(r.getTitleValue()).substring(0,l().h).toLowerCase().includes(t.toLowerCase()))return o}));return c().oE(r)}({textValue:n,find:t}).map((e=>({selection:e,allowReplace:!1}))),m=function(e){const{find:t,textValue:n}=e,o=(0,s().b$b)(n);if(!g().default.state.currentSpaceStore||0===o.length||0===t.length)return[];const i=o.map((e=>{let{metadata:n,selection:o}=e;const i=Object.values(n).filter(d().O9);if(Boolean(i.find((e=>e.toLowerCase().includes(t.toLowerCase())))))return o}));return c().oE(i)}({textValue:n,find:t}).map((e=>({selection:e,allowReplace:!1})));return[...i,...a,...p,...u,...m].sort(((e,t)=>e.selection.startIndex-t.selection.startIndex))}function w(e){const{block:t,find:n,intl:o}=e;if("table_row"!==t.getType())return[];const i=t.getParentBlockStore(),r=[],a=t.getProperties(),s=i?(0,m().$O)(i):Object.keys(a);return null==s||s.forEach((e=>{const i=a[e];if(!i)return;const s=S({find:n,intl:o,textValue:i}).map((n=>({allowReplace:n.allowReplace,selection:n.selection,blockStore:t,type:"simple_table_cell",propertyId:e})));s.length>0&&r.push(...s)})),r}function k(e){const{find:t,childBlocks:n,intl:r}=e;if(!n||0===t.length)return[];const a=[];for(const l of n){const e=l.getType(),n=l.getFormat();if(!e)continue;const p=(0,o().Db)(e,n)||(0,o().z9)(e);if(!(p||"table_row"===e||"collection_view"===e))continue;const m=l.getProperties(),{title:g,caption:f,description:v}=m;if("table_row"===e){const e=c().oE(w({block:l,find:t,intl:r}));e&&a.push(...e)}else if(p){const e={title:g,caption:f,description:v};(0,d().WP)(e).forEach((e=>{let[n,o]=e;if(!o)return;const i={type:"block",blockId:l.id,propertyType:n,blockStore:l},s=S({textValue:o,find:t,intl:r}).map((e=>({...e,...i,allowReplace:!l.isNavigableBlock()&&e.allowReplace})));a.push(...s)}))}else if("collection_view"===e){var s;const e=(0,u().U)(l);if(!e)continue;const n=e.collectionViewStore();if(!n)continue;const o=n.getType();if(!o)continue;const d=n.getFormat(),p=e.normalizedSchemaStore.state,g=Object.keys(p).filter((e=>{var t,n;return"text"===(null===(t=p[e])||void 0===t?void 0:t.type)||"title"===(null===(n=p[e])||void 0===n?void 0:n.type)})),f=c().sb((0,i().Fg)(d,o,p));if(!f)continue;const v=f.filter((e=>g.includes(e))),h={};((null===(s=n.getCollectionStore())||void 0===s?void 0:s.getFormat().property_visibility)??[]).forEach((e=>{const t=e.property;if(!v.includes(t))return;const n="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==m?void 0:m[t]);h[t]=n}));e.groupsStore.state.forEach((e=>{const o=e.resultsStore.state.flatMap((e=>{const o=e.getPropertiesStore().getValue();if(!o)return[];return v.flatMap((i=>{const a=o[i];if(!a)return[];return S({textValue:a,intl:r,find:t}).map((t=>({propertyId:i,selection:t.selection,allowReplace:!1,type:"page_property_value",inlineCollectionId:l.id,inlineCollectionViewId:n.id,blockStore:e,visible:Boolean(h[i]),isMatchInLayoutPageDetails:!1,isPropertyInGroup:!1})))}))}));a.push(...c().sb(o))}))}}return a}function I(e){const{match:t,pageStore:n,environment:o}=e;if(!t.allowReplace||!n)return!1;const{blockStore:i}=t,r=i.canEdit(),a=n.isLocked(),s=f().A.getMode(o,n),l=!s.hasPublicPermission||s.hasPublicPermission&&"edit"===s.permission;return!(!r||a||!l)}function x(e){return!!e&&("block"===e.type||"comment"===e.type||"simple_table_cell"===e.type||"page_property_value"===e.type)}function A(e){var t;const{find:n,pageDetails:o,intl:i}=e,r=o.store,s=r.getAssociatedCollectionStore(),l=null==s?void 0:s.getLayoutStore(),c=null==l?void 0:l.getViewsModuleCollectionViewBlockStore(),d=(0,u().U)(c),m=Boolean(c),g=m&&Boolean("page"===(null==d||null===(t=d.collectionViewStore())||void 0===t?void 0:t.getType())),f=k({find:n,childBlocks:[r],intl:i}),v=function(e){var t;const{find:n,pageStore:o,intl:i,skipModuleContent:r}=e,s=o.getAssociatedCollectionStore();if(0===n.length||!s)return[];const l=o.getProperties(),c=(null===(t=o.getAssociatedCollectionStore())||void 0===t?void 0:t.getFormat().property_visibility)??[],d=o.getSchema(),u=(0,a().I)({schema:d,propertyFormats:c,titleProperty:"disallow"}),m={};c.forEach((e=>{const t=e.property,n="show"===e.visibility||"hide_if_empty"===e.visibility&&Boolean(null==l?void 0:l[t]);m[t]=n}));const g=[],f=null==s?void 0:s.getLayoutStore();return u.forEach(((e,t)=>{var a,s;let{property:c}=e;const u=null===(a=d[c])||void 0===a?void 0:a.name.toLowerCase(),v=null==u?void 0:u.includes(n.toLowerCase()),{isPropertyInPageDetails:h,isPropertyInGroup:_,isPropertyInMainPage:b}=f?(0,p().Hc)({layoutStore:f,propertyId:c}):{isPropertyInPageDetails:!1,isPropertyInGroup:!1,isPropertyInMainPage:!1};if(r&&!b&&!h)return;v&&g.push({type:"page_property_name",allowReplace:!1,propertyId:c,visible:m[c]??!0,isMatchInLayoutPageDetails:h,isPropertyInGroup:_});const y="text"===(null===(s=d[c])||void 0===s?void 0:s.type)?null==l?void 0:l[c]:void 0;if(!y)return;const w=S({textValue:y,find:n,intl:i}),k=o.getAssociatedCollectionId();k&&w.forEach((e=>{g.push({type:"page_property_value",inlineCollectionId:k,selection:e.selection,visible:m[c]??!0,propertyId:c,blockStore:o,allowReplace:!1,isMatchInLayoutPageDetails:h,isPropertyInGroup:_})}))})),g}({find:n,pageStore:r,intl:i,skipModuleContent:m&&!g}),h=!m||g?k({find:n,childBlocks:(0,b().zo)({blockStore:r,transclusionReferences:"recurseInto",childPages:"includeWithoutRecursion"}),intl:i}):[],_=function(e){const{pageStore:t,find:n,intl:o,includeContentComments:i,includePageComments:r}=e,a=[],s=[];if(0===n.length)return[];const l=(0,b().Bw)(t,{recursivelyLoadAllDiscussions:i,excludeSelf:!r});return(0,b().uy)(l).unresolved.forEach((e=>{a.push(...e.getCommentStores())})),a.forEach((e=>{const t=e.getText(),i=e.getParentBlockStore(),r=e.getParentId();t&&i&&r&&S({find:n,textValue:t,intl:o}).forEach((t=>s.push({type:"comment",selection:t.selection,commentId:e.id,allowReplace:!1,blockStore:i,discussionId:r})))})),s}({pageStore:r,find:n,intl:i,includePageComments:!m||g,includeContentComments:!m||g});return[...f,...v,..._,...h,...c?k({find:n,childBlocks:[c],intl:i}):[]].map((e=>({...e,view:o.view})))}},792609:(e,t,n)=>{n.d(t,{Y:()=>o});n(18107),n(967357),n(898992),n(823215);function o(e){let{blocks:t}=e;const n=t.at(0),o=null==n?void 0:n.getRecordStoreUIRoot();return!!o&&t.every((e=>o.uiContains(e)&&o.id!==e.id))}},793531:(e,t,n)=>{n.d(t,{IZ:()=>a,Tm:()=>r});var o=()=>n(645873);const i=new(o().O2)("slashMenu",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(10252),n.e(35832),n.e(92903)]).then(n.bind(n,311517)))),r=(0,o()._h)(i,(e=>e.SlashMenu)),a="suggested"},793765:(e,t,n)=>{n.d(t,{Ay:()=>g,E:()=>u,I5:()=>m,nS:()=>p});var o=()=>n(763884),i=()=>n(211134),r=()=>n(496603),a=()=>n(780054);const s="SearchDebugStorePersistenceKey";class l extends(()=>n(757695))().default{setState(e){super.setState(e),function(e){let{newState:t,key:n}=e;o().K.set({userId:"global",key:n,value:t})}({newState:e,key:this.getPersistenceKey()})}setStateWithoutPersisting(e){super.setState(e)}reloadFromDisk(){const e=o().K.get({userId:"global",key:this.getPersistenceKey()});super.setState({...this.getInitialState(),...e})}}class c extends l{constructor(e){super(),this.column=void 0,this.getPersistenceKey=()=>`${s}:${this.column}`,this.updateForcedClusterPattern=e=>{this.setState({...this.state,forcedClusterPattern:e})},this.updateForcedBlockIds=e=>{this.setState({...this.state,forcedBlockIds:e})},this.column=e}getInitialState(){return{forcedClusterPattern:void 0,forcedBlockIds:void 0,searchExperimentOverrides:{},visible:!0}}hasDebugOverrides(){return!r().Im(this.state.forcedClusterPattern)||!r().Im(this.state.searchExperimentOverrides)||!r().Im(this.state.forcedBlockIds)}}const d=new class extends l{constructor(){super(...arguments),this.getPersistenceKey=()=>s}getInitialState(){return{showDebugInfo:!1,debug:void 0}}getDebugLevel(){return this.state.debug??(this.state.showDebugInfo?"explain":void 0)}},u=new c("left"),p=new c("right");function m(e){let{device:t}=e;return(0,i().PF)(a().A)&&!t.isMobile&&(u.hasDebugOverrides()||p.hasDebugOverrides()||u.state.forcedClusterPattern||p.state.forcedClusterPattern)&&p.state.visible}const g=d},794359:(e,t,n)=>{n.d(t,{P:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(401497),a=()=>n(167355),s=()=>n(959013),l=()=>n(434663),c=()=>n(113414),d=()=>n(763071),u=()=>n(722872),p=()=>n(805025),m=()=>n(962730),g=()=>n(859428),f=n(474848);function v(e){const{additionalLabelMarginLeft:t,...n}=e,v=(0,i().v3)(),h=(0,o.useContext)(u().xu),_=(0,u().Tf)(),b=!v.device.isMobile&&!_,y=(0,r().IS)((e=>({layout:(0,p().Iz)({environment:v,theme:e,menuContext:h,isDesktopLayout:b,shouldRenderMobileRefresh:_})})),[h,b,_,v]);return(0,f.jsx)(g().A,{placement:m().W.Left,textWrap:!0,renderTooltip:()=>(0,f.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:(0,f.jsx)(c().g,{})}),render:e=>(0,f.jsx)("div",{style:y.layout,...e,children:(0,f.jsx)(l().r,{...n,style:{marginLeft:10+(t??0)},iconGroup:a().F,direction:"horizontal",children:!(0,d().o)(n.errorId)&&(0,f.jsx)(s().sA,{id:"menuItem.error",defaultMessage:"Error"})})})})}},794959:(e,t,n)=>{n.d(t,{F:()=>T});n(898992),n(908872),n(296540);var o=()=>n(847249),i=()=>n(401497),r=()=>n(148307),a=()=>n(919709),s=()=>n(534177),l=()=>n(604917),c=()=>n(849839),d=()=>n(441265),u=()=>n(870571),p=()=>n(596514),m=()=>n(854672),g=()=>n(807683),f=()=>n(710149),v=()=>n(895007),h=()=>n(405789),_=()=>n(269429),b=()=>n(196310),y=()=>n(993553),S=()=>n(687519),w=()=>n(718725),k=()=>n(178298),I=()=>n(697868),x=()=>n(289068),A=n(474848);let C;function T(e){const{store:t,restrictedBlockIds:n,tableRenderMode:o}=e,i=t.getType();if(i){if(!C||n){const e={text:w().A,encrypted_text:w().A,page:_().A,collection_view_page:l().A,bulleted_list:u().A,numbered_list:h().A,toggle:I().Ay,quote:b().A,to_do:k().A,header:v().A,sub_header:y().A,sub_sub_header:S().A,callout:p().A,transclusion_container:x().SM,transclusion_reference:x().CF,alias:d().oA},t=(0,s().uv)({abstract:!0,audio:!0,code:!0,codepen:!0,deepnote:!0,drive:!0,equation:!0,excalidraw:!0,figma:!0,file:!0,framer:!0,gist:!0,hex:!0,invision:!0,loom:!0,maps:!0,miro:!0,mixpanel:!0,pdf:!0,replit:!0,sketch:!0,tweet:!0,typeform:!0,video:!0,whimsical:!0}),i=Object.keys(t).reduce(((e,t)=>(e[t]=M,e)),{}),r={collection_view:B,table:"image"===o?B:P(n)};C={...e,...i,...r,copy_indicator:void 0,personal_home_page:void 0,button:void 0,image:void 0,link_to_page:void 0,link_to_collection:void 0,table_row:void 0,external_object_instance_page:void 0,external_object_instance:void 0,bookmark:void 0,table_of_contents:void 0,tab:void 0,column_list:void 0,column:void 0,embed:void 0,drawing:void 0,slide:void 0,divider:void 0,breadcrumb:void 0,factory:void 0,ai_block:void 0,form:void 0,post:void 0,workflow:void 0,transcription:void 0,person_profile:void 0}}return C[i]}}function M(e){let{store:t}=e;const[n,s]=(0,o().K8)((()=>{var e;const n=t.getType(),o=null===(e=t.getTitleStore())||void 0===e?void 0:e.getValue();return[n,a().q4_(o)]}),[t]),l=(0,i().IS)((e=>({card:{display:"flex",padding:10,borderRadius:6,boxShadow:e.inputBoxShadow,marginBottom:6,gap:10},shimmer:{backgroundColor:e.largeShimmerColor,width:150,borderRadius:6}})),[]),c=function(e){const t=e&&R[e];if("string"==typeof t)return t;return r().A.images.icons.unknownTypePng}(n);return(0,A.jsxs)("div",{style:l.card,children:[(0,A.jsx)(m().A,{type:"image_url",imageURL:c,size:25,imageStyle:{marginLeft:4,marginRight:4}}),s.length>0?(0,A.jsx)("span",{children:s}):(0,A.jsx)(f().A,{emphasized:!0,style:l.shimmer})]})}function P(e){return t=>{let{store:n,...i}=t;const{tableStore:r,isPartialTable:a}=(0,o().K8)((()=>{if(n.isType("table"))return{tableStore:n,isPartialTable:!1};const e=n.getParentBlockStore();return e&&e.isType("table")?{tableStore:e,isPartialTable:!0}:{tableStore:void 0,isPartialTable:!1}}),[n]);return r?(0,A.jsx)(c().K,{...i,store:r,showRowIds:a?e:void 0}):null}}function B(e){let{store:t}=e;const n="collection_view"===(0,o().K8)((()=>t.getType()),[t]),a=(0,i().IS)((e=>({image:{width:"100%",borderRadius:4,border:`1px solid ${e.lightDividerColor}`},container:{marginBottom:6}})),[]),s="dark"===(0,i().eP)(),l=s?r().A.images.blockRendererCovers.collectionTableDarkPng:r().A.images.blockRendererCovers.collectionTableLightPng,c=s?r().A.images.blockRendererCovers.plainTableDarkPng:r().A.images.blockRendererCovers.plainTableLightPng;return(0,A.jsx)("div",{style:a.container,children:(0,A.jsx)(g().Ay,{src:n?l:c,style:a.image})})}const R={equation:r().A.images.blocks.texPng,audio:r().A.images.blocks.audioPng,file:r().A.images.blocks.filePng,pdf:r().A.images.blocks.pdfPng,code:r().A.images.blocks.codePng,video:r().A.images.blocks.videoPng,abstract:r().A.images.blocks.abstractPng,codepen:r().A.images.blocks.codepenPng,deepnote:r().A.images.blocks.deepnotePng,drive:r().A.images.blocks.drivePng,excalidraw:r().A.images.blocks.excalidrawPng,figma:r().A.images.externalIntegrations.figmaIconPng,framer:r().A.images.blocks.framerPng,gist:r().A.images.blocks.githubPng,hex:r().A.images.blocks.hexPng,invision:r().A.images.blocks.invisionPng,loom:r().A.images.blocks.loomPng,maps:r().A.images.blocks.mapsPng,miro:r().A.images.blocks.miroPng,mixpanel:r().A.images.blocks.mixpanelPng,replit:r().A.images.blocks.replitPng,sketch:r().A.images.blocks.sketchPng,typeform:r().A.images.blocks.typeformPng,tweet:r().A.images.blocks.twitterPng,whimsical:r().A.images.blocks.whimsicalPng}},795179:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},796073:(e,t,n)=>{n.d(t,{$:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("sync",{viewBox:"0 0 30 30",svg:(0,o.jsx)("path",{d:"M27.93 13.81h-1.54c-.606-5.717-5.536-10.265-11.387-10.265-3.425 0-6.514 1.55-8.625 3.987-.427.483-.37 1.078.079 1.392.438.315.965.214 1.336-.202a9.57 9.57 0 017.21-3.268 9.503 9.503 0 019.456 8.356h-1.673c-.798 0-1 .539-.573 1.156l2.516 3.583c.359.516.898.528 1.269 0l2.504-3.572c.45-.628.236-1.167-.573-1.167zM2.064 16.202h1.55c.607 5.716 5.526 10.253 11.388 10.253 3.425 0 6.525-1.561 8.636-3.987.416-.483.36-1.09-.078-1.404-.438-.314-.977-.202-1.337.214-1.74 2.01-4.324 3.268-7.221 3.268a9.496 9.496 0 01-9.467-8.344H7.22c.798 0 1-.55.573-1.157l-2.516-3.583c-.359-.516-.898-.527-1.269 0l-2.515 3.572c-.438.617-.236 1.168.572 1.168z"})})},796249:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}}const i=new o},796621:(e,t,n)=>{n.d(t,{o:()=>o});const o=new(n(221844).A)({name:"DisabledInMemoryRecordCache"});o.freeze()},796756:(e,t,n)=>{n.d(t,{CM:()=>g,F5:()=>b,Fv:()=>k,Gk:()=>m,H$:()=>u,H1:()=>S,IA:()=>L,IY:()=>v,JE:()=>R,Lf:()=>x,N3:()=>P,PU:()=>p,Pz:()=>y,RZ:()=>A,_A:()=>I,bn:()=>d,eN:()=>h,gA:()=>_,jS:()=>D,rG:()=>f,rn:()=>T,tu:()=>B,u$:()=>N,ut:()=>M,vc:()=>w,xe:()=>E,xs:()=>C});n(898992),n(803949);var o=()=>n(116225),i=()=>n(989423),r=()=>n(680074),a=()=>n(875856),s=()=>n(351360),l=()=>n(508496),c=()=>n(337240);function d(e,t){i().vd(e,"onboarding_dialog_error",t)}function u(e,t){i().vd(e,"onboarding_error",t)}function p(e){const{hashed_user_id:t}=a().default.state;i().u4({environment:e,event:{eventName:"debug_meta_event_complete_registration",eventProperties:{hashed_user_id:t}}}),c().PU(e,t)}function m(e,t){if(i().vd(e,"onboarding_show",t),l().default.logEvent("onboarding_show",1,{...t}),t.is_new_onboarding){var n;const{currentUserSettingsStore:e}=s().default.getState();l().default.logEvent("sign_up_by_domain_type",null==e||null===(n=e.getSettings())||void 0===n?void 0:n.domain_type,{})}}function g(e,t){i().vd(e,"onboarding_share_link",t)}function f(e,t){i().vd(e,"onboarding_close",t)}function v(e,t){i().vd(e,"onboarding_skip",t)}function h(e,t){i().vd(e,"onboarding_back",t)}function _(e,t){i().vd(e,"onboarding_invite_send",t)}function b(e,t){i().vd(e,"onboarding_space_icon_upload",t)}function y(e,t){i().vd(e,"onboarding_stage",t),l().default.logEvent("onboarding_stage",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType})}function S(e,t,n){i().vd(e,"onboarding_stage_exit",{...t,back:n}),l().default.logEvent("onboarding_stage_exit",1,{stage:t.stage,workspace_type:t.initial_workspace_type,is_new_onboarding:t.is_new_onboarding,device_type:e.device.deviceType,back:n})}function w(e,t){i().vd(e,"onboarding_join_space_click",t),l().default.logEvent("onboarding_join_space_click",t.joined_space_index,{...t})}function k(e,t){i().vd(e,"onboarding_create_space_click",t),l().default.logEvent("onboarding_create_space_click")}function I(e,t){i().vd(e,"onboarding_invite_click",t);const{invited_emails:n,...o}=t;l().default.logEvent("onboarding_invite_click",n.length,{...o})}function x(e,t){i().vd(e,"onboarding_invite_attempt",t)}function A(e,t){i().vd(e,"onboarding_upload_profile_photo",t)}function C(e,t){i().vd(e,"onboarding_join_space",t)}function T(e,t){const n="space_name"in t?(e=>{let{space_name:t,...n}=e;return n})(t):t;i().u4({environment:e,event:{eventName:"onboarding_create_space",eventProperties:n}})}function M(e,t){i().vd(e,"onboarding_plan_type_select",t),l().default.logEvent("onboarding_plan_type_select",t.planType,{...t})}function P(e,t){i().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","persona",{...t})}function B(e,t){i().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","role",{...t})}function R(e,t){i().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","categories",{...t})}function E(e,t){i().vd(e,"onboarding_persona_select",t),l().default.logEvent("onboarding_persona_select","companySize",{...t})}function D(e,t){i().vd(e,"onboarding_persona_survey_action",{...t,action:t.action}),l().default.logEvent("onboarding_persona_survey_action",t.action,{}),l().default.logEvent(`onboarding_persona_survey_action_${t.action}`,t.plan_selection,{})}function N(e,t){i().vd(e,"onboarding_mobile_app_download_click",t),l().default.logEvent("onboarding_mobile_app_download_click")}function L(e,t){var n,a;const{currentUserSettingsStore:d,currentUserRootStore:u}=s().default.state;i().mt(e,{onboarding_complete:!0}),i().u4({environment:e,event:{eventName:"onboarding_complete",eventProperties:t}}),c().IA(e),l().default.logEvent("onboarding_complete",1,{domain_type:null==d||null===(n=d.getSettings())||void 0===n?void 0:n.domain_type,device_type:e.device.deviceType,is_new_onboarding:t.is_new_onboarding,is_professional_team_user:r().YD(),user_persona:t.user_persona,plan_type:t.plan_type,create_or_join:t.initial_workspace_type}),o().u4({name:"onboarding_complete"}),l().default.logEvent("onboarding_complete_by_plan_type",t.plan_type,{}),l().default.logEvent("onboarding_complete_by_device_type",e.device.deviceType,{}),l().default.logEvent("onboarding_complete_by_user_persona",t.user_persona,{}),l().default.logEvent("onboarding_complete_by_user_team_role",t.user_team_role,{}),t.user_use_cases&&t.user_use_cases.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_use_case",e,{})})),t.user_categories&&t.user_categories.forEach((e=>{l().default.logEvent("onboarding_complete_by_user_category",e,{})})),l().default.logEvent("onboarding_complete_by_domain_type",null==d||null===(a=d.getSettings())||void 0===a?void 0:a.domain_type,{}),l().default.logEvent("onboarding_complete_by_create_or_join_space",t.initial_workspace_type,{}),l().default.logEvent("onboarding_complete_by_is_new_user_onboarding",t.is_new_onboarding.toString(),{}),l().default.logEvent("onboarding_complete_by_workspaces_count",(null==u?void 0:u.getSpaceViewStores().length)||0,{}),r().YD()&&l().default.logEvent("pro_team_onboarding_complete",1,{})}},797162:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}dismiss(){this.setState({...this.state,open:!1})}}const i=new o},797265:(e,t,n)=>{n.d(t,{Yf:()=>be,pG:()=>Se,x5:()=>Ce,iy:()=>_e,x7:()=>he,q3:()=>pe,t1:()=>ve,LE:()=>fe,mP:()=>Ae,AP:()=>ye,TF:()=>ce,ZL:()=>ge,Af:()=>me,um:()=>de,Ls:()=>xe,gm:()=>Ie,dL:()=>we,rW:()=>ue});n(16280),n(18107),n(944114),n(967357),n(898992),n(354520),n(672577),n(430670),n(803949),n(581454),n(737550);var o=()=>n(908006),i=()=>n(584262),r=()=>n(700500),a=()=>n(861017),s=()=>n(179034),l=()=>n(161479),c=()=>n(220719),d=()=>n(959013),u=()=>n(496603),p=()=>n(720665),m=()=>n(857783),g=()=>n(521358),f=()=>n(799832),v=()=>n(413962),h=()=>n(862292),_=()=>n(878377),b=()=>n(186445),y=()=>n(423804),S=()=>n(405417),w=()=>n(211716),k=()=>n(972435),I=()=>n(299545),x=()=>n(129522),A=()=>n(695625),C=()=>n(718807),T=()=>n(351360),M=()=>n(337567),P=()=>n(77246),B=()=>n(508496),R=()=>n(712505),E=()=>n(630116),D=()=>n(611371),N=(n(296540),()=>n(484714)),L=()=>n(629928),O=()=>n(751156),U=()=>n(7674),F=()=>n(554509),V=()=>n(107683),j=()=>n(49210),z=()=>n(991249),H=n(474848);function W(e){const{sizeRange:t,asyncModal:n}=e,o=(0,N().v3)(),i=(0,H.jsx)(U().YA,{iconAndTitle:(0,H.jsx)(U().ZQ,{iconGroup:L().t,title:(0,H.jsx)(d().sA,{id:"deleteBlocksModal.title",defaultMessage:"Delete content?"})}),description:(0,H.jsx)(d().sA,{id:"deleteBlocksModal.description",defaultMessage:"You can delete existing blocks but you won’t be able to add new content until you upgrade"})}),r=(0,H.jsx)(U().aO,{layout:"vertical",primaryButtons:[{buttonType:"destructive",label:(0,H.jsx)(d().sA,{id:"deleteBlocksModal.delete",defaultMessage:"Delete"}),onClick:()=>n.resolve("delete")}],secondaryButtons:[{buttonType:"secondary",label:(0,H.jsx)(F().D,{colorName:"primary",children:(0,H.jsx)(d().sA,{id:"deleteBlocksModal.upgrade",defaultMessage:"Upgrade plan"})}),onClick:()=>{z().K(o,{from:"delete_blocks_modal",upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),n.resolve("upgrade")}}]});return(0,H.jsx)(U().tf,{header:i,footer:r,sizeRange:t})}var q=()=>n(807778),K=()=>n(160568),G=()=>n(449506),$=()=>n(317001),Y=()=>n(60867),Q=()=>n(35622),Z=()=>n(722101),X=()=>n(44729),J=()=>n(661920),ee=()=>n(435009),te=()=>n(620689),ne=()=>n(778417),oe=()=>n(436572),ie=()=>n(90302),re=()=>n(725614),ae=()=>n(345913),se=()=>n(838256);const le=(0,d().YK)({deletePages:{id:"action.deletePages.snackBarMessage",defaultMessage:"Moved to Trash"}});function ce(e){var t,n;const{store:o,transaction:i}=e,r=A().T.findSelectablesFromStore(o).find((e=>Boolean(e.props.onRemove)));null==r||null===(t=(n=r.props).onRemove)||void 0===t||t.call(n,{transaction:i})}function de(e){const{blocks:t,transaction:n}=e;if(1===t.length){const e=t[0];e&&I().wm(e)&&ce({store:e,transaction:n})}}function ue(e){const t=A().T.findAllSelectablesFromIds(e.map((e=>e.id)));for(const n of t)n.getSelectableStore().setState({...n.getSelectableStore().state,showActionIsInFlight:!0})}function pe(e){const t=A().T.findAllSelectablesFromIds(e.map((e=>e.id)));for(const n of t)n.getSelectableStore().setState({...n.getSelectableStore().state,showActionIsInFlight:!1})}async function me(e){var t;const{environment:n,blocks:o,shouldCheckSuggestEdit:i,overrideRemoveBlockFunc:a,callback:l}=e,d=T().default.state.currentSpaceViewStore,p=Boolean(null==d||null===(t=d.getSettings())||void 0===t?void 0:t.seen_delete_blocks_modal),m=(0,D().EF)(n);if((0,q().Km)(n)&&!m&&!p){const e=await async function(e){const t=T().default.state.currentSpaceViewStore;return await j().T.showAsyncModal((n=>(0,H.jsx)(V().s,{isOpen:n.isOpen,onDismiss:()=>{n.resolve("dismiss")},onClosed:()=>{t&&O().createAndCommit({userAction:"DeleteBlocksModal.showDeleteBlocksModal",environment:e,canUndo:!0,perform:e=>{O().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),seen_delete_blocks_modal:!0}},transaction:e})}})},areaConstraint:{width:{type:"fixed",length:300}},render:e=>{let{sizeRange:t}=e;return(0,H.jsx)(W,{sizeRange:t,asyncModal:n})}})))}(n);if("delete"!==e)return void(null==l||l())}let _=o;if(o.length>0&&i){if("suggest"===P().Uv.getMode(o[0])){const e=o.filter((e=>(0,y()._1)({blockStore:e,currentUser:n.currentUser}))),t=await h().T.formulas.load();O().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation.suggestRemoveBlocks",environment:n,canUndo:!0,perform:i=>{v().d9({environment:n,transaction:i,blockStores:o.filter((t=>!e.includes(t)&&!(0,M().dL)(t)&&!(0,r().$I)((0,c().o9)(t.getType())))),formulasModule:t})}}),_=e}}let b=!0;const w=[];for(const r of _){const e=x().K.findBlockFromStore(r);if(e&&u().Tn(e.handleRemoveBlockFromComment)){if(await e.handleRemoveBlockFromComment())continue}else if(e&&u().Tn(e.canRemoveBlock)){const t=await e.canRemoveBlock();if(!t.canRemove)return void(null==l||l());b=t.canUndo}const t=await g().rW({environment:n,block:r,action:"delete"});if("user_canceled"===t)return void(null==l||l());t.length>1?w.push(...t):w.push(r)}if(0===w.length)return void(null==l||l());const I=w[0],A=(0,f().U)(I)??(0,S().Ib)(I,n);if(A&&(0,S().QV)({collectionContextStore:A,blockStore:I})){if(!(await Y().vX({environment:n,blocks:w,canUndo:b})))return}else{const{serverCommitResult:e}=O().createAndCommit({userAction:"selectableBlockActions.removeBlocksWithMaybeConfirmation",environment:n,canUndo:b,perform:e=>{ge({environment:n,blocks:w.filter((e=>!(0,M().dL)(e))),transaction:e,overrideRemoveBlockFunc:a})}});await e}null==l||l(),C().Ay.state.isTrashEmpty&&C().Ay.setState({...C().Ay.state,isTrashEmpty:!1});const{currentSpaceStore:E}=T().default.state,N=w.some((e=>e.isPageBlock()));if(E&&N){oe().rL({item:{label:k().A.formatMessage(le.deletePages)},undoFunc:()=>{for(const e of w)G().callApi({eventName:"restoreBlock",environment:n,data:{pointer:{table:s().ev,id:e.id,spaceId:e.pointer.spaceId||E.id}}})}});const e=T().default.state.currentUserSettingsStore;e&&ae().aR({experimentStore:B().default,currentSpaceStore:E,currentUserSettingsStore:e,intl:k().A.getIntl(),environment:n})}w.some((e=>{var t;return e.id===(null===(t=R().default.peekTargetStore.state)||void 0===t?void 0:t.id)}))&&J().VN({environment:n,from:void 0})}function ge(e){const{environment:t,blocks:n,transaction:o,preventClearSelection:i,overrideRemoveBlockFunc:a}=e,s=n[0],c=function(e){const t=A().T.getMembersByDOMOrder({filter:()=>!0}),n=u().SL(t,(t=>t.props.store===e)),o=t[n];if(!o)return;const i=o.getContextSelectableContainer(),r=u().di(t,0,n),a=u().Uk(r,(e=>e.props.canSelect&&e.getContextSelectableContainer()===i));if(a)return a.props.store;const s=u().di(t,n+1).find((e=>Boolean(e.props.canSelect&&e.getContextSelectableContainer()===i)));if(s)return s.props.store}(s);!function(e){const{environment:t,blockStore:n,entryPointName:o}=e,i=new(se().IK)({environment:t,userFlow:"user_flow_delete_block",entryPointName:o,timeoutMs:90*p().TD});if(i.isDisabled())return;const r=()=>{n.pathIsDead()&&i.succeed()};i.postFinishCallbacks.push((()=>{n.removeListener(r)})),n.addListener(r)}({environment:t,blockStore:s,entryPointName:o.getUserActionForAnalyticsPurposesOnly()||"selectableBlockActions.removeBlocks"});for(const r of n)a?a(r,o):ce({store:r,transaction:o});if(i||(ne().IU({environment:t}),ne().rN({pivot:c})),_().TeF({environment:t,blocks:n,publicEditMode:void 0})||_()._Ti({environment:t,blocks:n,publicEditMode:void 0})||_().P$I({environment:t,blocks:n,publicEditMode:void 0})||n.some((e=>{var t;return e.getType()===r().xd.transclusionContainer||(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.isPageTreeCollection())}))){o.postSubmitCallbacks.push((e=>{e||G().callApi({eventName:"deleteBlocks",environment:t,data:{blocks:n.map((e=>({id:e.id,spaceId:(0,l().e)(e.pointer.spaceId)}))),permanentlyDelete:!1}})}));for(const e of n){const{app_id:n,app_config_uri:i}=e.getFormat();n&&i&&K().KC(t,{block_id:e.id,app_id:n,app_config_uri:i}),X().s8({blockStore:e,transaction:o})}ee().VP({environment:t,blocks:n})}i||re().clear({environment:t})}function fe(e){const{environment:t,blocksToInsert:n,target:o,transaction:i,replaceEmptyTextBlock:r,preventSetSelection:s}=e;let l=b().ZO();if(!l){const{route:e}=t.RouterStore.state;(0,a().Dk)(e)&&(l=o.at(0))}const c=l;if(!c)throw new Error("No root store.");let d;if(o.length>0){const e=o.at(-1);let a=e;if(Boolean(n.find((e=>e.isType("column_list"))))){const t=null==e?void 0:e.findRecordStoreUIAncestor((e=>e&&e instanceof E().Bv&&e.isType("column_list"))).ancestor;t&&t instanceof E().Bv&&(a=t)}const s=A().T.find((e=>e.props.store===a&&e.props.canInsertBelow&&e.props.onInsertBelow));if(s&&s.props.onInsertBelow)d=u().oE(s.props.onInsertBelow({insertStores:n,transaction:i})),r&&e&&e.isEmptyTextBlock()&&ge({environment:t,blocks:[e],transaction:i});else{d=u().o8(n).reverse().map((e=>Z().Hs({parentStore:c.getContentStore(),prependStore:e,transaction:i}).childStore))}}else if(c.isCollectionView()){const e=x().K.findCollectionViewBlockFromStore(c);if(!e)throw new Error("No collection view found.");{const o=e.collectionContextStore,r=o.collectionStore();if(r)for(const e of n)(0,$().j)({environment:t,store:e,collectionStore:r,collectionContextStore:o,shouldCoerce:!0,groupsPointer:[],transaction:i});d=[]}}else{const e=c.getContentStore();d=n.map((t=>Z().BC({parentStore:e,appendStore:t,transaction:i}).childStore))}return Boolean(s)||(d=d.flatMap((e=>e.isType("column_list")?e.getContentStores().flatMap((e=>e.getContentStores())):[e])),ne().td({environment:t,stores:d})),d}function ve(e){const{environment:t,selection:n,transaction:o,preventSetSelection:i}=e,{blocks:r}=e,a=b().ZO();if(!a)throw new Error("No root store.");if(n.length>0){const e=n[0],a=A().T.find((t=>t.props.store===e&&t.props.canInsertAbove&&t.props.onInsertAbove));if(!a||!a.props.onInsertAbove)throw new Error("No Selectable found.");const s=a.props.onInsertAbove({insertStores:r,transaction:o});return Boolean(i)||ne().td({environment:t,stores:s}),s}{const e=a.getContentStore(),n=r.map((t=>Z().BC({parentStore:e,appendStore:t,transaction:o}).childStore));return Boolean(i)||ne().td({environment:t,stores:n}),n}}function he(e){const{blocks:t}=e,n=t[0];if(n){const t=A().T.findSelectableFromStore(n);t&&t.props.onEnter&&t.props.onEnter(e)}}function _e(e){const{blockStore:t,blockLocationOfTargetBlock:n,environment:o}=e,i=x().K.find((e=>"embed"===e.renderedType&&e.getBlockStore().id===t.id&&(!n||e.getBlockLocation()===n)));if(null!=i&&i.canRenderFullScreen()){const n=i.getFullScreenNodeRect();if(n){var r;const a=n.width/n.height;Q().o9({environment:o,renderFullScreenNode:i.renderFullScreenNode,fullScreenNodeRect:n,contentAspectRatio:a,blockStore:t}),null===(r=e.callback)||void 0===r||r.call(e)}}}function be(e){let t;e.blocks.find((e=>{const n=x().K.findBlockFromStoreWithMethod(e,"activate");return!!n&&(t=n,!0)})),t&&t.activate&&t.activate()}function ye(e){e.blocks.forEach((t=>{const n=t.getParentStore();n&&n.table===s().ev&&n.getType()===r().xd.tab&&ie().cN({store:n,id:t.id,currentUserId:e.environment.currentUser.id})}))}function Se(e){const t=x().K.findBlockFromStoreWithMethod(e,"caption");if(!t)throw new Error(`Block ${e.id} with caption not found in registry`);t.caption()}function we(e,t){const n=u().oE(A().T.findSelectablesFromIds(t)).map((e=>e.props.store));ne().td({environment:e,stores:n})}function ke(e){const t=A().T.findScrollToSelectablesFromIds([e])[0];if(t)return t;const n=T().default.state.currentSpaceStore;if(!n)return;const o=E().Bv.createChildStore(n,{id:e,table:s().ev}).getParentId();if(!o)return;const i=A().T.findSelectablesFromIds([o])[0];return i&&!i.props.store.isPageBlock()?i:void 0}function Ie(e,t){const{selectable:n,animate:o,onSelect:i}=t;te().pb({environment:e,handle:n,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:o});const r=n.props.store;ne().td({environment:e,stores:[r]}),null==i||i(r)}function xe(e,t){const{blockId:n,onSelect:o,animate:i,shouldScroll:r}=t,a=B().default.checkGate({gateName:"scroll_to_block"});if(B().default.checkGate({gateName:"enable_selectable_fc"})&&a){if(r){const t=ke(n);t&&Ie(e,{selectable:t,animate:i,onSelect:o})}return}let s,l=!1;let c=50;s=setInterval((()=>{if(c<=0)return void clearInterval(s);c--;const t=ke(n);t&&function(t){l||(l=!0,clearInterval(s),Ie(e,{selectable:t,animate:i,onSelect:o}))}(t)}),100)}function Ae(e){const{environment:t,blocks:n}=e,o=n[0].findRecordStoreUIAncestor((e=>e instanceof E().Bv&&e.isCollectionView())).ancestor;o&&m().uK({environment:t,store:o,visitType:w().ig.Link,pageVisitSource:i().y8.Expand})}function Ce(e){const{environment:t,insertedStores:n,isCreated:i}=e;i?o().default.afterNextFlush((()=>{const e=n[0];if(!e)return;const o=x().K.findBlockFromStoreWithMethod(e,"handleCreated");var i;o?null===(i=o.handleCreated)||void 0===i||i.call(o):(ne().Lt({environment:t,store:e}),ne().Zm(t))})):ne().td({environment:t,stores:n})}},797535:(e,t,n)=>{n.d(t,{I:()=>l});var o=()=>n(970013),i=()=>n(455348),r=()=>n(857639),a=()=>n(246826),s=()=>n(724456);function l(e){const{environment:t,collectionStore:n,update:l,transaction:c}=e,d=n.getSchema();l.schema&&(l.schema=o().q(l.schema)),l.deleted_schema&&(l.deleted_schema=o().q(l.deleted_schema));const u={...l};if(l.deleted_schema){const e=n.getDeletedSchema(),t=(0,i().dW)({schemas:[e,l.deleted_schema],prioritizeLooserLimitRule:!0});t.error?r().log({level:"error",from:"collectionViewActions",type:"updateCollection",error:t.error}):u.deleted_schema=t.value}a().zv({store:n,data:u,transaction:c}),l.schema&&(0,s().H)({environment:t,collectionStore:n,oldSchema:d,newSchema:l.schema,transaction:c})}},797573:(e,t,n)=>{n.d(t,{B:()=>r,o:()=>i});n(581454);var o=()=>n(402390);function i(e,t){return e.map((e=>r(e,t)))}function r(e,t){const{nameMessage:n,descriptionMessage:i,...r}=e,{rootId:a,previewRootId:s,spaceId:l}=function(e,t){const n=(0,o().H)(t);return e.sources[n]||e.sources[o().q]}(e,t);return{...r,id:n.id,rootId:a,spaceId:l,previewRootId:s,name:t.formatMessage(n),description:i?t.formatMessage(i):void 0}}},797583:(e,t,n)=>{n.d(t,{DI:()=>f,qp:()=>h,Fs:()=>v});n(296540);var o=()=>n(959013),i=()=>n(301948),r=()=>n(549500),a=()=>n(964345),s=()=>n(878377),l=()=>n(972435),c=()=>n(227440);const d=[function(){return(0,n(862835).h)()},s().p2L],u=[...d,s().opL,s().gxn,s().AU6(s().vEP)];var p=()=>n(416726),m=n(474848);const g=(0,o().YK)({dictateName:{id:"action.dictate.name",defaultMessage:"Dictate"}}),f=(0,p().Fw)({key:"dictate",displayName:g.dictateName,analyticsName:g.dictateName.defaultMessage,validators:[...u,s().AU6(s().wHP)],shortcuts:["dictate"],closeParentMenu:!0,render:(e,t)=>{const r=a().gZ.state&&a().Di.state===t.blocks[0].id,s=(0,n(100622).O4)({theme:t.environment.ThemeModeStore.state}),d=!c().A.state.online;return(0,m.jsx)(n(575143).A,{...e,title:(0,m.jsx)(o().sA,{...g.dictateName}),badge:(0,m.jsx)(i().A,{}),svg:n(786222).V,right:(0,p().cz)(s,r),tooltipText:d?l().A.formatMessage(p().AY.unavailableOfflineTooltip):void 0,disabled:d,disabledFeedback:d})},action:async(e,t)=>{const{environment:n}=e,o=t instanceof KeyboardEvent&&"Enter"!==t.key,{dictationActions:i}=await r().$O.load();i.smartToggleDictation({environment:n,from:o?"shortcut":"topbar_menu",includeSystemAudio:!1})}}),v=(0,p().Fw)({key:"newPageAndDictate",analyticsName:"New page and dictate",displayName:void 0,validators:[s().IT$,s().M3g,...d,s().AU6(s().wHP)],shortcuts:["newPageAndDictate"],closeParentMenu:!0,action:async(e,t)=>{const{environment:o}=e,i=t instanceof KeyboardEvent&&"Enter"!==t.key?"new_page_and_dictate_shortcut":"new_page_and_dictate_action",a=await(0,n(869562).quickAddPage)({environment:o,from:i});if(a){const{dictationActions:e}=await r().$O.load();e.startDictation({environment:o,from:i,blockStore:a,includeSystemAudio:!1})}}}),h=(0,p().Fw)({key:"dictate",displayName:g.dictateName,analyticsName:g.dictateName.defaultMessage,svg:n(90932).E,validators:[...u,s().nvZ,s().AU6(s().wHP),s().AU6(s().xIn)],shortcuts:["dictate"],closeParentMenu:!0,badge:(0,m.jsx)(i().A,{}),action:async(e,t)=>{const{environment:n}=e,{dictationActions:o}=await r().$O.load();o.startDictation({environment:n,from:"block_action",includeSystemAudio:!1})},disabled:()=>!c().A.state.online,renderTooltip:()=>l().A.formatMessage(p().AY.unavailableOfflineTooltip),disableTooltip:()=>c().A.state.online})},799089:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},799750:(e,t,n)=>{n.d(t,{N:()=>r,h:()=>a});var o=()=>n(989423),i=()=>n(406792);function r(e,t){o().vd(e,"image_uploaded",t)}function a(e,t){i().default.DO_NOT_USE_markLegacy("image_edit_load"),o().vd(e,"image_edit_open",t)}},799829:(e,t,n)=>{n.d(t,{EG:()=>d,GN:()=>m,cE:()=>v,e0:()=>u,n$:()=>c,qk:()=>f,wy:()=>g});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(737550);var o=()=>n(128443),i=()=>n(636090),r=()=>n(289915),a=()=>n(970013);class s{constructor(e,t){this.variable=void 0,this.property=void 0,this.variable=e,this.property=t}getProperty(){return this.property}get(e){const t=this.getCombinatorFilter(e);if(t)return{type:"results",limit:1,filter:t}}getCombinatorFilter(e){const t=this.getPropertyFilter(e,this.variable);if(t)return{operator:"and",filters:[{property:this.property,filter:t}]}}getPropertyFilter(e,t){var n;const o=e[this.property];if(!o)return;return{operator:"status_is",value:{type:"is_option",value:null===(n=o.options)||void 0===n||null===(n=n.find((e=>e.id===t)))||void 0===n?void 0:n.value}}}}const l=(0,n(959013).YK)({current:{id:"database.filterValue.relationType.relativeSprintVariable.current",defaultMessage:"Current"},next:{id:"database.filterValue.relationType.relativeSprintVariable.next",defaultMessage:"Next"},last:{id:"database.filterValue.relationType.relativeSprintVariable.last",defaultMessage:"Last"}}),c={[i().av]:{current:{messageDescriptor:l.current,reducer:new s(o().Xk,o().Hx.StatusV2)},next:{messageDescriptor:l.next,reducer:new s(o().tO,o().Hx.StatusV2)},last:{messageDescriptor:l.last,reducer:new s(o().el,o().Hx.StatusV2)}}};function d(e,t){const{filter:n,property:o}=e;if(!(0,r().Pq)(n)||!(0,r().gc)(n))return!1;const i=t[o];if(!i||!(0,a().nC)(i))return!1;return(0,r().Rh)(n).some((e=>"relative"===e.type))}function u(e,t,n){if(!e)return!1;const o=t[n];return!!o&&p(e,n,o)}function p(e,t,n){return e===i().av&&t===o().Hx.StatusV2&&(0,a().DD)(n)}function m(e,t){return!!e&&u(t,e,o().Hx.StatusV2)}function g(e){const{appUri:t,collectionSchema:n}=e;return Boolean(t&&c[t]&&m(n,t))}function f(e,t){const n=e[o().Hx.StatusV2];if(!n||!p(t,o().Hx.StatusV2,n))return[];return Object.keys(c[t]).filter((e=>{var t;return null===(t=n.options)||void 0===t?void 0:t.find((t=>t.id===e))}))}function v(e,t){const n=Object.entries(t).find((t=>{let[n,o]=t;return e===o}));return n?n[0]:void 0}},799832:(e,t,n)=>{n.d(t,{U:()=>i});var o=()=>n(98302);function i(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,o().S)(e,t);if(n&&"collectionContextStore"in n)return n.collectionContextStore}},799954:(e,t,n)=>{n.d(t,{nE:()=>a,xH:()=>r});var o=()=>n(100622),i=()=>n(284371);function r(e){return{color:o().Ay.defaultText,fill:"currentColor",lineHeight:1.5,fontFamily:i().vc(e).sans}}const a={paddingTop:3,paddingBottom:3,paddingLeft:2,paddingRight:2}},802790:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(296540),i=n(474848);function r(e,t){const{className:o,onClick:r,size:a,style:s,vertical:l,innerStyle:c,isHidden:d}=e,u=(0,n(401497).IS)((t=>{const n=e.dividerColor??t.darkDividerColor;return{root:{display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",width:l?a:"100%",height:l?"100%":a,flexGrow:0,flexShrink:0,flexBasis:"auto",...s},divider:{width:l?1:"100%",height:l?"100%":1,visibility:d?"hidden":"visible",borderBottom:l?void 0:`1px solid ${n}`,borderRight:l?`1px solid ${n}`:void 0,...c}}}),[c,d,a,s,l,e.dividerColor]);return(0,i.jsx)("div",{style:u.root,className:o,onClick:r,ref:t,children:(0,i.jsx)("div",{style:u.divider,role:"separator"})})}const a=o.forwardRef(r)},802963:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(401497),i=n(474848);function r(e){const t=(0,o().DP)(),n=e.title?[...e.title][0]:"",r=e.size*(e.isLarge?1:.888),{background:a,color:s,boxShadow:l}=e.useInvertedColors?{background:t.whiteButtonBackground,color:t.mediumIconColor,boxShadow:`0 0 0 1px ${t.darkDividerColor}`}:{background:t.regularDividerColor,color:t.text.secondary,boxShadow:void 0};return(0,i.jsx)("div",{role:"img","aria-label":[n,e.alt].join(" "),style:{borderRadius:"0.25em",width:Math.round(r),height:Math.round(r),background:a,color:s,textTransform:"uppercase",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:l,...e.style},children:(0,i.jsx)("div",{style:{lineHeight:1,fontSize:.6875*r,height:.6875*r,...e.placeholderStyle},children:n})})}},803074:(e,t,n)=>{n.d(t,{C4:()=>_,Nf:()=>y,qM:()=>b});n(16280),n(944114),n(898992),n(672577),n(430670),n(581454);var o=()=>n(617871),i=()=>n(519831),r=()=>n(161479),a=()=>n(534177),s=()=>n(572088),l=()=>n(594794),c=()=>n(972435),d=()=>n(252833),u=()=>n(53137),p=()=>n(630116),m=()=>n(449506),g=()=>n(901389),f=()=>n(510683),v=()=>n(246826);const h=(0,n(959013).YK)({authError:{defaultMessage:"Auth failed. Please try again or contact Notion support.",id:"database.viewSettings.propertyTypeSection.connected.authFail"},mobileAdminError:{defaultMessage:"Ask your workspace admin to configure the GitHub (Workspace) app in settings to use this feature.",id:"database.viewSettings.propertyTypeSection.connected.mobileAdminError"},mobileError:{defaultMessage:"Please authorize this integration on the desktop app or a browser.",id:"database.viewSettings.propertyTypeSection.connected.mobileError"}});async function _(e,t,n,o){const i=e.device.isMobile,r=null==t?void 0:t.getSpaceStore();if(!r)return;const a=(0,s().jw)(n.id).length;if(i&&o&&!a){const e=c().A.formatMessage(h.mobileAdminError);throw g().f1(e),new Error(e)}if(i&&!o&&!a){const e=c().A.formatMessage(h.mobileError);throw g().f1(e),new Error(e)}if(!a&&o&&r.canAdmin()||!a&&!o)try{await f().Jq({environment:e,integration:n,spaceId:r.id,from:"collection_settings_property_type"})}catch(l){const e=c().A.formatMessage(h.authError);throw g().f1(e),new Error(e)}if(!(0,s().jw)(n.id).length){const e=c().A.formatMessage(h.authError);throw g().f1(e),new Error(e)}}function b(e){const{environment:t,pattern:n,integration:o,parentCollectionStore:s,transaction:c}=e;if(!n.connected_relation_properties)throw new Error("Cannot create a connected relation collection without properties");const u=new(p().md)(t,(0,l().zP)({environment:t,table:i().Vl,spaceId:s.pointer.spaceId})),m={};n.connected_relation_sub_schemas&&(0,a().WP)(n.connected_relation_sub_schemas).map((e=>{let[n,o]=e;const a=new(p().md)(t,(0,l().zP)({environment:t,table:i().Vl,spaceId:s.pointer.spaceId})),d={bot_id:void 0,external_object_id:void 0,uri:n,integration_id:void 0,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:o,sync_state:void 0,pattern_name:void 0},g={id:a.id,version:0,space_id:(0,r().e)(s.pointer.spaceId),parent_table:i().Vl,parent_id:u.id,alive:!0,format:d,schema:{}};m[n]=a.id,v().zv({store:a,data:g,transaction:c})}));const g={id:u.id,version:0,space_id:(0,r().e)(s.pointer.spaceId),parent_table:i().Vl,parent_id:s.id,alive:!0,format:{attributes:[{id:"title",name:"title",type:"inline",format:{type:"title",section:"title"},values:[(0,d().Fe)({pattern:n,integration:o})]}],bot_id:void 0,external_object_id:void 0,uri:`notion://user-defined-collection/${o.id}/${n.name}`,integration_id:o.id,is_placeholder:void 0,original_url:void 0,domain:void 0,external_schema:n.connected_relation_properties,sync_state:void 0,pattern_name:n.name,related_external_object_uris_to_instance_ids:m},schema:{}};return v().zv({store:u,data:g,transaction:c}),u}async function y(e){const{environment:t,integrationId:n,connectedRelationPatternName:i,spaceId:r}=e,a=u().A.state;if(!a.loaded)return{error:"Integration state not loaded"};const s=a.integrations.find((e=>e.id===n));if(!s)return{error:"Integration not found"};const l=s.name,c=i.replace(l??"","").trim().split(" ")[0];if(n===o().mn){var d;const e=u().A.bots.state.find((e=>e.integration_id===n));if(!e)return{error:"Bot not found"};const o=e.id,i=await m().callApi({eventName:"describeSalesforceObject",environment:t,data:{spaceId:r,objectName:c,botId:o}});if("success"!==(null==i?void 0:i.type))return{error:i.error.message};const a=null==i||null===(d=i.data)||void 0===d?void 0:d.properties;if(a){return{value:a.flatMap((e=>{const t=e.custom?e.label:e.relationshipName||e.label;return"User"===e.referenceTo||"Group"===e.referenceTo?[{id:e.name,name:t,isSelected:!1,type:e.type,metadata:e},{id:`mapped_${e.name}`,name:`${t} (Notion User)`,isSelected:!1,type:"person",metadata:e}]:[{id:"Name"===e.name?"title":e.name,name:"relation"===e.type?t:e.label,isSelected:!1,type:e.type,metadata:e}]}))}}return{error:"No properties found"}}{var p;if(!s.info.original_url_patterns)return{error:"No original url patterns found"};const e=s.info.original_url_patterns.find((e=>e.name===c));if(!e||null===(p=e.additional_types)||void 0===p||!p.connectedRelation)return{error:"No connected relation pattern found"};const t=[],n=null==e?void 0:e.connected_relation_properties;for(const o in n){const e=n[o];null!=e&&e.name&&null!=e&&e.type&&t.push({id:o,name:e.name,isSelected:!1,type:e.type,metadata:{name:e.name,label:e.name,type:e.type,custom:!1}})}return{value:t}}}},805025:(e,t,n)=>{n.d(t,{Iz:()=>c,Lh:()=>r,Qm:()=>a,T3:()=>i,X1:()=>s});var o=()=>n(722872);const i=12,r=4,a=8,s=12;function l(e,t,n){return e?t?65:45:t?n?51:45:28}function c(e){const{environment:t,caption:n,inline:s,title:c,theme:d,style:u,loading:p,isDesktopLayout:m,menuContext:g,allowTextSelection:f,shouldRenderMobileRefresh:v}=e,{WindowSizeStore:h}=t,_=n&&!s,b=c&&_,y=!m&&(null==g?void 0:g.menuType)!==o().gu.Popup,S=(null==g?void 0:g.menuType)===o().gu.ActionSheet,w=y?i:r,k=p?{justifyContent:"center",paddingTop:"11px",paddingBottom:"11px"}:void 0;return{display:"flex",alignItems:"center",gap:m?8:0,lineHeight:"120%",width:"100%",userSelect:f?"auto":"none",minHeight:l(y,Boolean(b),Boolean(v)),fontSize:y?v?17:16:14,..._&&{paddingTop:v?0:w,paddingBottom:v?0:w},...y&&{background:d.popoverBackground,marginTop:1,borderBottom:`1px solid ${v?d.stroke.secondary:d.regularDividerColor}`,marginBottom:-1},...S&&{background:d.popoverBackground,boxShadow:`inset 0 -1px 0 ${d.regularDividerColor}`,marginBottom:0},paddingLeft:m?a:h.state.paddingLeftCSS,paddingRight:m?a:h.state.paddingRightCSS,...k,...u}}},805751:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(296540),i=()=>n(496603),r=n(474848);function a(e){const t={children:e.children,capture:e.capture,innerKey:e.innerKey,onEnter:e.allowMenuList||e.allowEnter?void 0:i().D_,onShiftEnter:i().D_,onCommandEnter:i().D_,onCommandShiftEnter:i().D_,onCommandSlash:i().D_,onCommandJ:i().D_,onEsc:e.allowMenuList||e.allowEsc?void 0:i().D_,onUp:e.allowMenuList?void 0:i().D_,onDown:e.allowMenuList?void 0:i().D_,onDelete:i().D_,onDeleteToEndOfLine:i().D_,onDeleteNextWord:i().D_,onSpace:i().D_,onBackspace:e.allowBackspace?void 0:i().D_,onLeft:e.allowLeft?void 0:i().D_,onRight:i().D_,onUntab:e.allowTabUntab?void 0:i().D_,onTab:e.allowTabUntab?void 0:i().D_,onGroup:i().D_,onUngroup:i().D_,onSelectAll:i().D_,onRedo:e.allowUndo?void 0:i().D_,onUndo:e.allowUndo?void 0:i().D_,onToggleUnderline:i().D_,onToggleHighlight:i().D_,onToggleBold:i().D_,onToggleItalics:i().D_,onToggleStrike:i().D_,onToggleCode:i().D_,onCut:e.allowCopyPaste?void 0:i().D_,onCopy:e.allowCopyPaste?void 0:i().D_,onPaste:e.allowCopyPaste?void 0:i().D_,onKeypress:i().D_,onHome:i().D_,onEnd:i().D_,onDuplicate:i().D_,onDuplicateSchema:i().D_,onOpenLinkMenuOrOpenSearch:e.allowOpenLinkMenu?void 0:i().D_,onToggleInPageFindReplace:i().D_,onOpenEquationMenu:i().D_,onSearch:e.allowSearch?void 0:i().D_,onGoToBeginningOfLine:i().D_,onGoToEndOfLine:i().D_,onGoForwardOneChar:i().D_,onGoBackwardOneChar:i().D_,onMoveUp:i().D_,onMoveDown:i().D_,onPeekUp:i().D_,onPeekDown:i().D_,onComment:i().D_,onSuggest:i().D_,onCaption:i().D_,onReact:i().D_,onRename:i().D_,onTurnIntoType:i().D_,onOpenFile:i().D_,onMoveTo:i().D_,onToggleAllToggles:i().D_,onTogglePropertyVisibility:i().D_,onCommandLeft:i().D_,onCommandRight:i().D_,onToggleRecordingInputLatency:i().D_,onGoBack:void 0,onGoForward:void 0,onNewTab:void 0,onGoUp:void 0,onSwitchSpaces:void 0,onQuickFind:void 0,onToggleSidebar:void 0,onToggleUpdateSidebar:void 0,onToggleBothSidebars:void 0,onOpenCommentsTabInUpdateSidebar:void 0,onOpenUpdatesTabInUpdateSidebar:void 0,onZoomIn:void 0,onZoomOut:void 0,onZoomReset:void 0,onNewPage:void 0,onNewPageAndDictate:void 0,onBackButton:void 0,onSettings:void 0,onCopyLinkToCurrentPage:void 0,onCopyLinkToBlock:void 0,copyCurrentPageLinkifiedBlockTitle:void 0,onToggleDarkMode:void 0,onDictate:void 0,onToggleFavorite:void 0,onToggleAllUpdates:void 0,onToggleAllTeams:void 0,onOpenShareMenu:void 0,onOpenHome:void 0,onCommandS:void 0,priority:e.priority??0,onCopyLinkToPageInCommandSearch:void 0,debugName:e.debugName,onOpenExperimentSettings:void 0,notionAiCommandSearchDefault:void 0,onTranscription:void 0};return(0,r.jsx)(n(545805).A,{...t})}const s=o.memo(a)},807060:(e,t,n)=>{n.d(t,{q:()=>r});var o=()=>n(713998),i=()=>n(799832);function r(e,t){if(!t)return{property_type:void 0,collection_id:void 0,collection_view_id:void 0,view_type:void 0,collection_view_block_id:void 0};let n,r,a,s,l;const c=t.getAssociatedCollectionStore();if(c){var d,u;if(e){const t=(0,o()._g)({schema:c.getSchema(),property:e});n=null==t?void 0:t.type}r=c.id,l=null===(d=c.getParentBlockStore())||void 0===d?void 0:d.id;const p=null===(u=(0,i().U)(t))||void 0===u?void 0:u.collectionViewStore();p?(a=null==p?void 0:p.id,s=null==p?void 0:p.getType()):s="page"}return{property_type:n,collection_id:r,collection_view_id:a,view_type:s,collection_view_block_id:l}}},807487:(e,t,n)=>{n.d(t,{VV:()=>s,_6:()=>r,_q:()=>a,ex:()=>i});n(16280),n(944114),n(898992),n(672577);var o=()=>n(326215);function i(e,t){return t?t.percent_off?{amount:e*t.percent_off/100,monthsRemaining:t.duration_in_months}:t.amount_off?{amount:t.amount_off}:{amount:0}:{amount:0}}function r(e){return"personal"!==e&&o().tX.find((t=>t===e))}const a=["kr_card","kakao_pay"];function s(e){const{currency:t,isKrCardFeatureGateEnabled:n}=e,o=["card","link"];return"USD"===t&&o.push("cashapp"),"EUR"===t&&o.push("sepa_debit"),"KRW"===t&&n&&o.push(...a),o}},807683:(e,t,n)=>{n.d(t,{fd:()=>f,Ay:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(425946),a=()=>n(100622),s=()=>n(989423),l=(n(814603),n(147566),n(198721),()=>n(825237)),c=()=>n(227440),d=()=>n(670631),u=()=>n(554894);async function p(e,t){var o;if(!e)return;if(!c().A.state.online)return;if(!(0,u().C9)())return;const i=null===(o=n(351360).default.state.mainEditorCurrentBlockStore)||void 0===o||null===(o=o.getNavigableBlockStore())||void 0===o?void 0:o.id;if(!i)return;if(!(i in(d().A.state.offlinePages??{})))return;const r=(0,l().MU)(e);if(r)try{if((await fetch(r,{mode:"same-origin",cache:"only-if-cached"})).ok)return}catch(a){try{await fetch(r)}catch(a){return}}}function m(e,t){const[o]=(0,n(187174).Yb)((async()=>{if(!e)return;if(c().A.state.online||!(0,u().C9)())return;const t=(0,l().MU)(e);if(t)try{const e=await fetch(t,{cache:"force-cache"});if(!e.ok)return;const n=await e.blob(),o=URL.createObjectURL(n);if(o)return o}catch(n){return}}),[e],{});if("resolved"===o.status)return o.value}var g=n(474848);const f={position:"absolute",bottom:4,right:4,borderRadius:6,padding:4,color:a().Ay.whiteWithAlpha(.8),background:a().Ay.blackWithAlpha(.6),fontFamily:n(284371).vc(n(662303).locale).sans,fontSize:13,lineHeight:1,pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},v=(0,o.forwardRef)((function(e,t){const{src:a,placeholderStyle:l,onClick:u,placeholderLoadedStyle:f,isFullScreen:v,enableLoadingShimmer:h}=e,_=(0,i().v3)(),[b,y]=(0,o.useState)({loaded:!1,error:!1}),S=(0,o.useRef)(null),w=(0,o.useRef)(e.src),{device:k}=(0,i().v3)(),I=(0,n(401497).IS)((t=>{let n={display:"block",objectFit:"cover",borderRadius:2};return e.height?n.height=e.height:e.capMaxHeight&&(n.maxHeight="60vh"),b.error&&(n.background=t.contentBackground),e.style&&(n={...n,...e.style}),{imageStyle:n}}),[e.height,e.capMaxHeight,e.style,b]);(0,o.useImperativeHandle)(t,(()=>({getImageDimensions(){if(S.current)return{clientRect:S.current.getBoundingClientRect(),naturalHeight:S.current.naturalHeight,naturalWidth:S.current.naturalWidth}},elementRef:S}))),(0,o.useLayoutEffect)((()=>{w.current!==e.src&&y({...b,error:!1,loaded:!1}),w.current=e.src}),[b,e.src]);const x=a?(0,n(478184).L)(a):void 0,A=m(x),C=(0,n(847249).O$)(c().e),T=(0,n(591779).ZC)(C);(0,o.useEffect)((()=>{A&&y((e=>({...e,error:!1})))}),[A,b.error]),(0,o.useEffect)((()=>{!1===T&&!0===C&&b.error&&y((e=>({...e,error:!1})))}),[b.error,C,T]);const M=b.error?r().M:A??x??r().M,P={width:"100%",height:"100%",...f};k.isMobile&&(P.WebkitUserSelect="none",P.WebkitTouchCallout=!0===v?"default":"none");const B=!!e.href&&((0,n(939768).AY)(e.href)||e.href.includes("mailto:")),R=(0,o.useMemo)((()=>e.immediatelyDiscardImageWhenSourceChanges?function(e){const t="amazonaws.com";if(!e)return;if(!e.includes(t))return e;const n=e.split(t);if(n.length<2)return;return n[1].split("?")[0]}(M):void 0),[M,e.immediatelyDiscardImageWhenSourceChanges]),E=(0,g.jsx)("img",{loading:e.loading,alt:e.alt??"",ref:S,className:e.className,onDoubleClick:e.onDoubleClick,onMouseDown:e.onMouseDown,onContextMenu:e.onContextMenu,onClick:e.href?void 0:u,src:M,style:I.imageStyle,onError:t=>{if(y({...b,error:!0}),e.onError&&e.onError(t,e.src),!C){var o;const e=(0,n(186445).s0)();if(!e)return;const t=null===(o=d().A.state.offlinePages)||void 0===o?void 0:o[e];if(!t)return;(0,s().u4)({environment:_,event:{eventName:"offline_image_load_failure",eventProperties:{offline_page_is_autosynced_origin:t.isAutosyncedOrigin,offline_page_is_explicitly_offlined_origin:t.isExplicitlyOfflinedOrigin,offline_page_last_download_time:t.lastDownloadedAt??0}}})}},onLoad:t=>{var n;null===(n=e.onLoad)||void 0===n||n.call(e,b.error),y({...b,loaded:!0}),p(M)},crossOrigin:e.crossOrigin,referrerPolicy:"same-origin"},R);return(0,g.jsxs)("div",{style:!b.loaded&&l?l:P,className:!b.loaded&&h?n(38337).iM5:"",onClick:e.href?e=>e.stopPropagation():void 0,children:[e.href&&(0,g.jsx)(n(187485).A,{href:e.href,external:B,onClick:e=>{e.stopPropagation(),(0,s().u4)({environment:_,event:{eventName:"image_hyperlink_click",eventProperties:{location:"image",url_type:B?"external":"notion"}}})},onDoubleClick:e.onDoubleClick,doubleClickPreventsSingleClick:!0,children:E}),!e.href&&E]})}))},807778:(e,t,n)=>{n.d(t,{AK:()=>M,Bh:()=>l,D$:()=>V,GC:()=>b,Gy:()=>E,Ir:()=>I,JM:()=>f,Jq:()=>R,Km:()=>g,Le:()=>L,Mh:()=>p,NV:()=>N,OP:()=>F,PK:()=>m,Pe:()=>P,S$:()=>h,S7:()=>y,Ug:()=>_,Y3:()=>O,cB:()=>A,dn:()=>U,hG:()=>T,i4:()=>C,kh:()=>v,qp:()=>u,s:()=>x,tW:()=>S,u1:()=>B,up:()=>D,vv:()=>w,xu:()=>k});var o=()=>n(130382),i=()=>n(640653),r=()=>n(351360),a=()=>n(508496),s=()=>n(10984);function l(){return Boolean("on"===a().default.getEligibleGroup({experimentId:"beam",defaultGroup:"control"}))}const c=3,d=-1;function u(){const{currentSpaceStore:e}=r().default.state,t=null==e?void 0:e.getSettings().reach_block_limit_time;return t?(0,o().Mn)(t):null}function p(e){const t=u();return null!==t&&(g(e)&&t<c)}function m(){const e=u();return null!==e&&c-e>0?c-e:d}function g(e){var t;const n=null===(t=r().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!n)return!1;return 1!==((0,i().Xz)({environment:e,spaceId:n})??1)&&(!!(0,s().dL)()&&"on"===a().default.getEligibleGroup({experimentId:"block_management",defaultGroup:"control"}))}function f(){return Boolean(a().default.checkGate({gateName:"public_space_data_store_local_cache_disabled"}))}function v(){return Boolean(a().default.checkGate({gateName:"low_guest_limit"}))}function h(){return Boolean("on"===a().default.getGroup("mobile_web_subscriptions"))}function _(){return Boolean(a().default.checkGate({gateName:"native_invoice_payment"}))}function b(){return a().default.getEligibleGroup({experimentId:"lic",defaultGroup:"control"})}function y(){return Boolean(a().default.checkGate({gateName:"apply_offer_migration"}))}function S(){return Boolean("on"===a().default.getEligibleGroup({experimentId:"new_year_2025",defaultGroup:"control"}))}function w(){return Boolean(a().default.checkGate({gateName:"resurrection_offer"}))}function k(e){return!e.device.isMobile&&Boolean("on"===a().default.getEligibleGroup({experimentId:"settings_refresh_2025",defaultGroup:"control"}))}function I(){return Boolean(a().default.checkGate({gateName:"test_clocks"}))}function x(e){return!e.device.isMobile&&Boolean("on"===a().default.getEligibleGroup({experimentId:"mp_lairt",defaultGroup:"control"}))}function A(e,t){switch(e){case"perfmark":return function(e){return!e.mobileNative}(t);case"upwork":case"plus":case"business":return!0}}function C(e){return!e.device.isMobile&&Boolean("on"===a().default.getGroup("lairt"))}function T(){return Boolean(a().default.checkGate({gateName:"advanced_security_in_enterprise"}))}function M(){return Boolean(a().default.checkGate({gateName:"people_tab_date_added_column"}))}function P(){return Boolean(a().default.checkGate({gateName:"post_upgrade_modal"}))}function B(){return Boolean(a().default.checkGate({gateName:"ai_checkout_terms_checkbox"}))}function R(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"uncollectible_experience_enabled"}))}function E(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"in_app_request_upgrades"}))}function D(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"are_upgrade_request_ai_entrypoints_enabled"}))}function N(){return Boolean(a().default.checkGate({gateName:"version_history_request_upgrade"}))}function L(){return Boolean(a().default.checkGate({gateName:"packaging_changes_05_13_2025"}))}function O(){return Boolean(a().default.checkGate({gateName:"upgrade_requests_banner_for_ai_removal"}))}function U(){return Boolean(a().default.checkGate({gateName:"notion_mail_ga"}))}function F(){return Boolean(a().default.checkGate({gateName:"business_trials_2025"}))}function V(e){return!e.device.isMobile&&Boolean(a().default.checkGate({gateName:"add_today_button_to_db_calendar"}))}},808207:(e,t,n)=>{n.d(t,{d:()=>a});n(581454);var o=()=>n(439180),i=()=>n(751156),r=()=>n(496879);function a(e){const{transaction:t,store:n,crdtOperations:a,invertedOperations:s,fullTextValue:l}=e;i().applyCrdtTextOperations({transaction:t,store:n,operations:a.map((e=>(0,o().qA)({pointer:n.pointer,crdtOperation:e,fullTextValue:l}))),invertedOperations:s.map((e=>(0,r().c)({pointer:n.pointer,invertedCrdtOperation:e,previousTextValue:n.getBlockTitleStore().getValue()??[]})))})}},808237:(e,t,n)=>{n.d(t,{E:()=>r});var o=()=>n(700500),i=()=>n(630116);function r(e){return e.findRecordStoreUIAncestor((e=>e instanceof i().Bv&&e.getType()===o().xd.factory)).ancestor}},809363:(e,t,n)=>{n.d(t,{H:()=>o});const o=new(n(178624).R)({key:"emptySharePreference",namespace:n(419494).Bq,important:!0,trackingType:"necessary"})},810519:(e,t,n)=>{n.d(t,{u:()=>r});var o=()=>n(989423),i=()=>n(186445);function r(e,t,n){if(!0===n)o().vd(e,"edit_block_property_60",t);else{const n=(0,i().s0)(),{property_type:r,collection_id:a,collection_view_id:s}=t;o().WU(e,"edit_block_property_60",`edit_block_property_60-${n||""}-${r||""}-${a||""}-${s||""}`,60,t)}}},810703:(e,t,n)=>{n.d(t,{lQ:()=>s,pw:()=>a,tj:()=>c});var o=()=>n(763884),i=()=>n(179034),r=()=>n(96689);async function a(e){let{currentUserId:t,spaceStore:n}=e;const i=o().K.get({userId:t,key:l(n.id)});return u(n,n.loadRecordModel,i)}function s(e){let{currentUserId:t,spaceId:n,value:i}=e;o().K.set({userId:t,key:l(n),value:i})}function l(e){return`quickAddParent3:${e}`}function c(e){let{currentUserId:t,spaceId:n,parent:i,databaseType:r}=e;o().K.set({userId:t,key:d(n,r),value:i})}function d(e,t){return`quickAddTypedParent:${e}:${t||"default"}`}async function u(e,t,n){let o;if(n)if("page"===n.type){await t({table:i().ev,id:n.id})&&(o=n)}else if("space"===n.type){await t({table:r().NX,id:n.id})&&(o=n)}return o||{type:"space-private-pages",spaceId:e.id}}},812072:(e,t,n)=>{n.d(t,{Hi:()=>I,J9:()=>b,ez:()=>h,ge:()=>k});n(944114);var o=n.n(n(845732)),i=()=>n(700500),r=()=>n(753514),a=()=>n(945778),s=()=>n(128713),l=()=>n(798880),c=()=>n(919709),d=()=>n(695608),u=()=>n(972435),p=()=>n(663038);const m=!1;function g(){if(m){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("completionMarkdownHelpers:",...t)}}function f(e,t){return(0,d().c6)(e,t).replace(/ /g,"")}function v(e,t){const{getRecordValue:n,intl:o}=t;let i;if(c().rie(e)){const t=c().NcG(e);i=`@${f(o,n({table:l().oo,id:t}))}`}else if(c().qsB(e)){i=c().K7D(e).start_date}return i&&g(`Transforming annotation for completion: ${i}`),i}function h(){let e=0,t=0;function n(n){e+=1,e>t&&(t=e);try{return s().N8(n)}finally{e-=1}}function o(){return":".repeat(t-e+2)}return{transformAnnotation:v,transformBlockMapping:{callout(e){var t;const{block:i,exportArgs:r}=e,l=s().Qw({block:i,exportArgs:r}),c=null===(t=i.format)||void 0===t?void 0:t.page_icon,d=(0,a().A)(c)?c:"",u=n(e),p=o();return{text:`${p} aside ${d}\n\n${l}`.trim(),breakLines:!0,children:u,suffix:p}},toggle(e){const{block:t,exportArgs:i}=e,r=s().Qw({block:t,exportArgs:i}),a=n(e),l=o();return{text:`${l} ▶ ${r}\n\n`.trim(),breakLines:!0,children:a,suffix:l}}}}}const _=(0,p().F)({unicode:()=>/@\p{Letter}+/gu,fallback:/@[A-Za-z]+/g});async function b(e,t,n){const o=e.matchAll(_),i=[];for(const r of o){const e=r[0].slice(1);if(void 0===n.get(e)){const o=async()=>{const o=await y(t,e);o?(g(`Found user result for mention "${e}": ${o.email}`),n.set(e,o)):(g(`Found no user result for mention "${e}".`),n.set(e,null))};i.push(o())}}await Promise.all(i)}async function y(e,t){const n=await e(t),o=u().A.getIntl();let i;for(const r of n){if(f(o,r)===t){if(i)return;i=r}}return i}function S(e){const{md:t,name:n,regex:o,createTokens:i}=e,{arrayReplaceAt:r}=t.utils;function a(e,t,r){let a=0;const s=[];if(e.replace(o,(function(o){const l=Array.from(arguments);let c=l.length-1;"string"!=typeof l[c]&&(c-=1);const d=l[c],u=l[c-1];if(u>0&&(0,p().D$)(d[u-1]))return"";if(u+o.length<d.length&&(0,p().D$)(d[u+o.length]))return"";const m=i(o,t);if(!m)return"";if(u>a){const t=new r("text","",0);t.content=e.slice(a,u),s.push(t)}for(const{type:e,attrs:t,tag:i,level:a,content:p}of m){const o=new r(e,"",0);if(t)for(const[e,n]of Object.entries(t))o.attrPush([e,n]);i&&(o.tag=i,o.markup=n),void 0!==a&&(o.level=a),p&&(o.content=p),s.push(o)}return a=u+o.length,""})),a<e.length){const t=new r("text","",0);t.content=e.slice(a),s.push(t)}return s}t.core.ruler.after("linkify",n,(e=>{let t=0;const n=e.tokens;for(let i=0;i<n.length;i++){const s=n[i].children;if("inline"===n[i].type&&s)for(let l=s.length-1;l>=0;l--){const c=s[l];"link_open"!==c.type&&"link_close"!==c.type||"auto"===c.info&&(t-=c.nesting),"text"===c.type&&0===t&&o.test(c.content)&&(n[i].children=r(s,l,a(c.content,c.level,e.Token)))}}return!0}))}function w(e){return t=>{!function(e){S({md:e,name:"date_mentions",regex:/20\d\d-\d\d-\d\d/g,createTokens:(e,t)=>[{type:"date_mention_open",tag:"time",attrs:{datetime:e,[r().lc.dateFormat]:"relative"},level:t+1},{type:"text",content:e},{type:"date_mention_close",tag:"/time",level:t}]})}(t),function(e,t){S({md:e,name:"user_mentions",regex:_,createTokens(e,n){const o=e.slice(1),i=t.get(o);if(i)return[{type:"user_mention_open",tag:"a",level:n+1,attrs:{[r().lc[c().Ifu.User]]:i.id}},{type:"text",content:e},{type:"user_mention_close",tag:"/a",level:n}]}})}(t,e),function(e){const t=/^aside\s+(.*)$/,n={validate:e=>Boolean(e.trim().match(t)),render(n,o){if(1===n[o].nesting){const s=n[o].info.trim().match(t);let l=(null==s?void 0:s[1])??"";(0,a().A)(l)||(l="");const c="gray_background",d=function(e,t){const n=[];for(const[o,i]of t)n.push(`${o}="${e.utils.escapeHtml(i)}"`);return n.join(" ")}(e,[[r().lc[i().xd.callout],""],[r().lc.calloutBackground,c],[r().lc.calloutIcon,l]]);return`<div ${d}>`}return"</div>"}};e.use(o(),"callout_block",n)}(t),function(e){const t=/^▶\s+(.*)$/,n={validate:e=>Boolean(e.trim().match(t)),render(n,o){if(1===n[o].nesting){const i=n[o].info.trim().match(t),r=(null==i?void 0:i[1])??"";return`<details><summary>${e.utils.escapeHtml(r)}</summary>`}return"</details>"}};e.use(o(),"toggle_block",n)}(t)}}function k(e){return{plugin:w(e)}}function I(e){return/\[.+\]\([^)]*$/.test(e)}},812182:(e,t,n)=>{n.d(t,{HK:()=>l,Iz:()=>s,UW:()=>c});var o=()=>n(244641),i=()=>n(206267),r=()=>n(496603),a=()=>n(399561);function s(e){const t=e.id??i().JW(),n=e.createdAt??o().c9.now().toMillis(),r={...e,id:t,createdAt:n,presentationType:e.presentationType??"transient"};return a().A.setState({...a().A.state,toasts:{...a().A.state.toasts,[t]:r}}),r}function l(e){const t=e.id;return t&&a().A.state.toasts[t]?function(e,t){const n=a().A.state.toasts[e];if(!n)return s(t);const i={...n,...t,updatedAt:o().c9.now().toMillis()};return a().A.setState({toasts:{...a().A.state.toasts,[e]:i}}),i}(t,e):s(e)}function c(e,t,n){const o=a().A.state.toasts[e];if(o){var i,s;if(!t)if(null===(i=o.onDismiss)||void 0===i||i.call(o),n)null===(s=o.onUserDismiss)||void 0===s||s.call(o);a().A.setState({...a().A.state,toasts:r().cJ({...a().A.state.toasts},[e])})}}},812318:(e,t,n)=>{n.d(t,{k:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("download",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M8.215 15.126c3.862 0 7.061-3.192 7.061-7.062 0-3.862-3.199-7.061-7.068-7.061-3.862 0-7.055 3.2-7.055 7.061 0 3.87 3.2 7.062 7.062 7.062zm0-1.388a5.654 5.654 0 01-5.667-5.674 5.642 5.642 0 015.66-5.667 5.66 5.66 0 015.68 5.667 5.66 5.66 0 01-5.673 5.674zm0-9.174c-.342 0-.602.247-.602.588v3.234l.062 1.401-.622-.766-.766-.8a.557.557 0 00-.41-.177.54.54 0 00-.56.547c0 .164.054.3.163.41l2.256 2.283c.15.157.294.226.479.226.191 0 .335-.075.485-.226l2.256-2.283a.557.557 0 00.164-.41.539.539 0 00-.56-.547.523.523 0 00-.41.178l-.766.793-.622.779.054-1.408V5.152c0-.341-.253-.588-.601-.588z"})})},812412:(e,t,n)=>{n.d(t,{dV:()=>a,ok:()=>o});n(898992),n(672577);const o=900,i={xSmall:o,small:1040,medium:1200,large:1500,xLarge:1/0},r=(0,n(534177).WP)(i).sort(((e,t)=>e[1]-t[1]));function a(e){var t;const n=e.WindowSizeStore.state.width;return(null===(t=r.find((e=>{let[,t]=e;return n<=t})))||void 0===t?void 0:t[0])??"large"}},813297:(e,t,n)=>{n.d(t,{Od:()=>l,QV:()=>i,U3:()=>a,Vp:()=>s,oY:()=>r});var o=()=>n(645873);const i={automations:new(o().O2)("automations",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(62475),n.e(3151),n.e(98629),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(74562),n.e(7114),n.e(4422),n.e(28721),n.e(28866),n.e(6463),n.e(1213),n.e(59794),n.e(26483),n.e(81768),n.e(94387),n.e(82850),n.e(82136),n.e(61151),n.e(63996),n.e(22585),n.e(79665)]).then(n.bind(n,48278)))),automationActionRegistry:new(o().O2)("automationActionRegistry",(()=>Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(81768),n.e(97101)]).then(n.bind(n,81768)))),automationTypecheck:new(o().O2)("automationTypecheck",(()=>Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(81768),n.e(44158)]).then(n.bind(n,310109))))},r=(0,o()._h)(i.automations,(e=>e.PlacedButtonBlockEditor)),a=(0,o()._h)(i.automations,(e=>e.AutomationWorkflowEditor)),s=((0,o()._h)(i.automations,(e=>e.AutomationWorkflowEditorActionSection)),(0,o()._h)(i.automations,(e=>e.ButtonBlockUrlPreviewPopup))),l=(0,o()._h)(i.automations,(e=>e.automationErrorHelpers.TooltipWithSubtitle))},816074:(e,t,n)=>{n.d(t,{D:()=>h,t:()=>v});n(898992),n(354520);var o=()=>n(617871),i=()=>n(388693),r=()=>n(59326),a=()=>n(406018),s=()=>n(427704),l=()=>n(677338),c=()=>n(939768),d=()=>n(720665),u=()=>n(40970),p=()=>n(449506),m=()=>n(901389),g=()=>n(755636),f=()=>n(435009);function v(e){const{environment:t,responseType:n,integrationId:o,redirectUri:i,state:r,owner:a,userId:l,spaceId:u}=e,p=c().Gm({url:s().JZ.oauthAuthorization,query:(0,d().MU)(Object.entries({response_type:n,client_id:o,redirect_uri:i,state:r,owner:a,user_id:l,space_id:u}).filter((e=>{let[,t]=e;return t})))});f().oo({environment:t,url:p,redirect:!0})}async function h(e){const{environment:t,params:n,integration:d}=e;l().NI(void 0);const v=d&&r().H(d,n.redirectUri);if(!v)return void f().oo({environment:t,url:s().JZ.root,redirect:!0});let _;if("errorType"in e)_={error:e.errorType,state:n.state};else{const{integration:o,spaceId:r,blockIdsForBot:s,acceptedIntegrationCapabilities:l}=e;let c;if(c=(0,i().v_)(o)?await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:o.id,spaceId:r,redirectUri:n.redirectUri,acceptedIntegrationCapabilities:l}}):await p().callApi({eventName:"createOauthAuthorizationCode",environment:t,data:{integrationId:o.id,spaceId:r,redirectUri:n.redirectUri,blockIdsForBot:s,templatePageId:e.templatePageId,acceptedIntegrationCapabilities:l}}),"failed"===c.type){m().Qg(c);return h({environment:t,params:n,integration:o,errorType:503===c.status?a().l.temporarily_unavailable:a().l.server_error})}_={code:c.data.code,state:n.state}}d.id===o().io&&await u().nQ(t);const b=c().Gm({url:v,query:{..._}});g().f({environment:t,url:b,targetSelf:!0})}},816360:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isModalOpen:!1,openedTimestamp:void 0}}setAcquisitionRefund(e,t){const n=this.state,o=n.acquisitionRefundMap?{...n.acquisitionRefundMap}:{};o[e]=t,this.setState({...n,acquisitionRefundMap:o})}}const i=new o},818619:(e,t,n)=>{n.d(t,{X:()=>a});n(898992),n(430670),n(581454);var o=()=>n(134025),i=()=>n(496603),r=()=>n(666144);async function a(e,t){const n=i().hS(t.operations.flatMap((e=>[e.pointer,...(0,o().mP)(e)?e.additionalUpdatedPointers??[]:[]])),(e=>e.id));await Promise.all(n.map((n=>r().BB({environment:e,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,pointer:n,userId:t.userId}))))}},824188:(e,t,n)=>{n.r(t),n.d(t,{loadAndUpdateCrossDeviceRecentlyVisitedPages:()=>_,loadMoreRecentPages:()=>b,reinitializeGlobalRecentPagesStoreState:()=>h});n(898992),n(354520),n(581454);var o=()=>n(921997),i=()=>n(386164),r=()=>n(496603),a=()=>n(720665),s=()=>n(449506),l=()=>n(825972),c=()=>n(355012),d=()=>n(941541),u=()=>n(968172),p=()=>n(713205),m=()=>n(250484),g=()=>n(187778);let f,v;async function h(e,t,n){t===f&&n===v||(f=t,v=n,u().A.cleanup(e),await _({environment:e,userId:t,spaceId:n,initializing:!0}),u().A.update((e=>({...e,initialized:!0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}))))}async function _(e){let{environment:t,userId:n,spaceId:m,initializing:f}=e;const v=(0,p().b)(),h=v?20:1,b=Date.now(),y=(0,l().zW)()??100,S=!v||(0,c().fB)({spaceId:m,userId:n}),w=(0,c().oG)({spaceId:m,userId:n}),k=f&&S&&w;k&&(u().A.update((e=>{const t=e.recentPages.get(m)??[],o=(0,c().Kn)({spaceId:m,userId:n})??[];return e.recentPages.set(m,(0,l().yw)(t,o,m)),{...e}})),g().G(t,"recentPageInitialization"));const I=S&&w?w+1:b-y*a().nD;if(await async function e(o,a){const d={spaceId:m,userId:n,limit:50,beforeTimestamp:o,sinceTimestamp:I},p=await s().callApi({eventName:"getRecentPageVisits",environment:t,userId:n,data:d,headers:(0,i().WS)({cellId:void 0,recordId:void 0,spaceId:m})});if("success"===p.type){const i=p.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),s=r().wq(i.filter((e=>e.visitedAt<o)),(e=>e.visitedAt));u().A.update((e=>{const t=e.recentPages.get(m)??[],o=i.concat((0,c().Kn)({spaceId:m,userId:n})??[]);return e.recentPages.set(m,(0,l().yw)(t,o,m)),e.initialized=!0,{...e}})),l().wI.recompute(),s&&i.length>5&&a<h&&await e(s.visitedAt,a+1),S&&i&&(0,c().K2)({spaceId:m,userId:n,visits:i,isFromRecentPageVisits:!0}),g().G(t,f&&!k?"recentPageInitialization":"recentPageReload")}l().wI.recompute()}(b,1),f){if(!S){const e=u().A.get(m);e&&(0,c().K2)({spaceId:m,userId:n,visits:e,isFromRecentPageVisits:!0,isBackfill:!0})}u().A.update((e=>(e.userPageVisitListenerReference&&d().Ay.removeListener(e.userPageVisitListenerReference,t),{...e,userPageVisitListenerReference:d().Ay.addListener((0,o().N0)(n),void 0,r().nF((()=>{_({environment:t,userId:n,spaceId:m,initializing:!1})}),5*a().Xb,{leading:!1,trailing:!0}),void 0,t)})))}}async function b(e,t){var n,o;let{environment:r,userId:a,spaceId:c}=t;if(u().A.getWithoutSubscribing(c).length>l()._v)return!1;const d=await s().callApi({eventName:"getRecentPageVisits",environment:r,userId:a,data:{userId:a,spaceId:c,beforeTimestamp:e,limit:m().ZK},headers:(0,i().WS)({cellId:void 0,recordId:void 0,spaceId:c})});if("success"!==d.type||d.data.pages.length<=0)return!1;const p=d.data.pages.map((e=>({pageId:e.id,visitedAt:e.visitedAt}))),g=null===(n=u().A.get(c))||void 0===n?void 0:n.length;u().A.set(c,(0,l().yw)(u().A.get(c)??[],p,c));const f=null===(o=u().A.get(c))||void 0===o?void 0:o.length;return l().wI.recompute(),g!==f}},824375:(e,t,n)=>{n.d(t,{X:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M13.217 7.07a.63.63 0 0 0-1.26 0c0 1.115-.524 2.228-1.367 3.07-.843.843-1.956 1.367-3.07 1.367a.63.63 0 0 0 0 1.26c1.114 0 2.227.525 3.07 1.367.843.843 1.367 1.956 1.367 3.07a.63.63 0 1 0 1.26 0c0-1.114.524-2.227 1.367-3.07.842-.842 1.956-1.367 3.07-1.367a.63.63 0 1 0 0-1.26c-1.114 0-2.228-.524-3.07-1.366-.843-.843-1.367-1.956-1.367-3.07m-1.736 3.961a6.2 6.2 0 0 0 1.106-1.496c.29.552.668 1.059 1.106 1.496s.944.816 1.497 1.106a6.2 6.2 0 0 0-1.497 1.106 6.2 6.2 0 0 0-1.106 1.497 6.2 6.2 0 0 0-1.106-1.497 6.2 6.2 0 0 0-1.497-1.106 6.2 6.2 0 0 0 1.497-1.106M6.35 2.796a.63.63 0 1 0-1.26 0c0 .54-.34 1.233-.926 1.819s-1.279.926-1.82.926a.63.63 0 1 0 0 1.26c.541 0 1.234.34 1.82.925.586.586.926 1.279.926 1.82a.63.63 0 0 0 1.26 0c0-.541.34-1.234.926-1.82.585-.585 1.278-.925 1.819-.925a.63.63 0 1 0 0-1.26c-.54 0-1.234-.34-1.82-.926-.585-.586-.925-1.279-.925-1.82m-1.295 2.71c.243-.244.47-.52.665-.816A5.2 5.2 0 0 0 7.2 6.17a5.15 5.15 0 0 0-1.48 1.48 5.15 5.15 0 0 0-1.48-1.48c.296-.194.572-.421.815-.664"})},i=(0,n(340498).wt)("sparkles",o)},824622:(e,t,n)=>{n.d(t,{$j:()=>d,Ap:()=>h,As:()=>s,E7:()=>l,QA:()=>f,Ry:()=>m,iq:()=>c,pX:()=>g,q_:()=>u,rs:()=>p});var o=()=>n(645873);const i=new(o().O2)("mobileActionBar",(async()=>{const[{default:e},{MobileActionBar:t},{NativeMobileActionBar:o}]=await Promise.all([Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(49889),n.e(97727),n.e(83700),n.e(85889),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(45620),n.e(4253),n.e(60499),n.e(24593),n.e(2681),n.e(58504),n.e(97308),n.e(13402),n.e(27991),n.e(48438),n.e(89686),n.e(73206),n.e(72597),n.e(63292),n.e(84176),n.e(35832),n.e(49222)]).then(n.bind(n,643747)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(49889),n.e(97727),n.e(83700),n.e(85889),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(45620),n.e(4253),n.e(60499),n.e(24593),n.e(2681),n.e(58504),n.e(97308),n.e(13402),n.e(27991),n.e(48438),n.e(89686),n.e(73206),n.e(72597),n.e(63292),n.e(84176),n.e(35832),n.e(49222)]).then(n.bind(n,43492)),Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(49889),n.e(97727),n.e(83700),n.e(85889),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(45620),n.e(4253),n.e(60499),n.e(24593),n.e(2681),n.e(58504),n.e(97308),n.e(13402),n.e(27991),n.e(48438),n.e(89686),n.e(73206),n.e(72597),n.e(63292),n.e(84176),n.e(35832),n.e(49222)]).then(n.bind(n,114816))]);return{MobileActionBarWrapper:e,MobileActionBar:t,NativeMobileActionBar:o}})),r=new(o().O2)("mobile",(async()=>{const[{TopLevelMobileComponents:e},{TopbarMobile:t}]=await Promise.all([Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(16471),n.e(58550),n.e(90825),n.e(49889),n.e(97727),n.e(85128),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(41870),n.e(42120),n.e(4422),n.e(28866),n.e(21194),n.e(1213),n.e(59794),n.e(78846),n.e(43741),n.e(52393),n.e(75601),n.e(11341),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(72226),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(44763),n.e(8081),n.e(67183),n.e(82720),n.e(60499),n.e(24593),n.e(13402),n.e(38119),n.e(89686),n.e(63292),n.e(15910),n.e(45816),n.e(75648),n.e(74085)]).then(n.bind(n,909088)),Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(16471),n.e(58550),n.e(90825),n.e(49889),n.e(97727),n.e(85128),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(41870),n.e(42120),n.e(4422),n.e(28866),n.e(21194),n.e(1213),n.e(59794),n.e(78846),n.e(43741),n.e(52393),n.e(75601),n.e(11341),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(72226),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(44763),n.e(8081),n.e(67183),n.e(82720),n.e(60499),n.e(24593),n.e(13402),n.e(38119),n.e(89686),n.e(63292),n.e(15910),n.e(45816),n.e(75648),n.e(74085)]).then(n.bind(n,32791))]);return{TopLevelMobileComponents:e,TopbarMobile:t}})),a=new(o().O2)("mobileModal",(async()=>await Promise.resolve().then(n.bind(n,480095)))),s=(0,o()._h)(new(o().O2)("topLevelMobileComponents",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(16471),n.e(58550),n.e(90825),n.e(49889),n.e(97727),n.e(85128),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(41870),n.e(42120),n.e(4422),n.e(28866),n.e(21194),n.e(1213),n.e(59794),n.e(78846),n.e(43741),n.e(52393),n.e(75601),n.e(11341),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(72226),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(44763),n.e(8081),n.e(67183),n.e(82720),n.e(38119),n.e(15910),n.e(45816),n.e(75648),n.e(83728)]).then(n.bind(n,909088)))),(e=>e.TopLevelMobileComponents)),l=(0,o()._h)(new(o().O2)("mobileNativeFullPageComponents",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85128),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(23063),n.e(80533),n.e(8081),n.e(4253),n.e(97308),n.e(27991),n.e(72597),n.e(66042)]).then(n.bind(n,50747)))),(e=>e.MobileNativeFullPageComponents)),c=(0,o()._h)(new(o().O2)("mobileCalendarDayMenu",(async()=>{const{MobileCalendarDayMenu:e}=await Promise.all([n.e(75134),n.e(43380),n.e(85515),n.e(1213),n.e(78846),n.e(43741),n.e(22882),n.e(53638)]).then(n.bind(n,381451));return{MobileCalendarDayMenu:e}})),(e=>e.MobileCalendarDayMenu)),d=(0,o()._h)(r,(e=>e.TopbarMobile)),u=(0,o()._h)(i,(e=>e.MobileActionBar)),p=(0,o()._h)(i,(e=>e.MobileActionBarWrapper)),m=(0,o()._h)(i,(e=>e.NativeMobileActionBar)),g=(0,o()._h)(new(o().O2)("mobileBottomBar",(async()=>{const{default:e}=await n.e(12039).then(n.bind(n,364259));return{MobileBottomBar:e}})),(e=>e.MobileBottomBar)),f=(0,o().jQ)(a,(e=>e.MobileModal)),v=new(o().O2)("mobileRedesigned",(async()=>{const{TopbarMobileElevatedButtons:e}=await Promise.all([n.e(75134),n.e(43380),n.e(16471),n.e(49889),n.e(97727),n.e(4422),n.e(28866),n.e(21194),n.e(72226),n.e(60499),n.e(24593),n.e(13402),n.e(89686),n.e(63292),n.e(63539)]).then(n.bind(n,784350));return{TopbarMobileElevatedButtons:e}})),h=(0,o()._h)(v,(e=>e.TopbarMobileElevatedButtons))},824772:(e,t,n)=>{n.d(t,{DM:()=>c,cL:()=>l,fD:()=>s});var o=()=>n(529543),i=()=>n(546369),r=()=>n(165162),a=()=>n(508496);async function s(e){const t=await(0,o().getExperimentDeviceId)(e),n=e.currentUser.id;a().default.updateState({experimentsBySpace:{},experimentsWithoutSpace:[],isLoaded:!0,userId:n,deviceId:t,test:!1},e)}function l(){a().default.reset()}async function c(e){const t=await(0,o().getExperimentDeviceId)(e),n=await(0,o().getBrowserId)(e),a=await r().statsigClientLoader.getClient();await(null==a?void 0:a.updateUserAsync((0,r().tX)(i().getDataForStatsigUser({environment:e,deviceId:t,browserId:n}))))}},825726:(e,t,n)=>{n.d(t,{l:()=>D,w:()=>E});var o=()=>n(416845),i=()=>n(449412),r=()=>n(319625),a=n(296540),s=()=>n(484714),l=()=>n(847249),c=()=>n(959013),d=()=>n(534177),u=()=>n(436572),p=()=>n(994877),m=()=>n(843014),g=()=>n(104012),f=()=>n(989423),v=()=>n(860921),h=()=>n(47170),_=()=>n(875856),b=()=>n(430483),y=()=>n(1346),S=()=>n(807778),w=()=>n(577437),k=()=>n(668721),I=n(474848);function x(){const e=(0,v().z)(),t=(0,l().K8)((()=>k().A.didRequest()),[]),n=(0,l().K8)((()=>(0,S().Le)()),[]);return"unavailable"===e?n?(0,I.jsx)(c().sA,{id:"translation.snackbar.paymentRequired.messageV2",defaultMessage:"Reach out to your account representative to upgrade Notion AI."}):(0,I.jsx)(c().sA,{id:"translation.snackbar.paymentRequired.message",defaultMessage:"Reach out to your account representative to purchase the Notion AI add-on."}):"upsell"===e?(0,I.jsx)(c().sA,{id:"translate.snackbar.upsell.message",defaultMessage:"You’ve run out of free AI actions."}):"requestAccess"===e||"requestAccessNoFreeCredits"===e?t?n?(0,I.jsx)(c().sA,{id:"translate.snackbar.requestAccess.didRequestV2",defaultMessage:"You’ve run out of free AI actions. We’ve sent your request to the workspace owner to upgrade Notion AI."}):(0,I.jsx)(c().sA,{id:"translate.snackbar.requestAccess.didRequest",defaultMessage:"You’ve run out of free AI actions. We’ve sent your request to the workspace owner for the Notion AI add-on."}):(0,I.jsx)(c().sA,{id:"translate.snackbar.requestAccess.message",defaultMessage:"You’ve run out of free AI actions."}):void(0,d().HB)(e)}function A(){const e=(0,s().v3)(),t=(0,v().z)(),n=(0,h().O)(),o=(0,l().K8)((()=>k().A.didRequest()),[]),i=(0,l().K8)((()=>b().zD.isXMLAssistantEnabled()),[]),r=(0,w()._X)({name:"ai_usage",spaceId:n,userId:e.currentUser.id,amount:"unknown"}),u=(0,a.useCallback)((t=>{(0,y().RV)({upsellType:t,environment:e,isAssistantEnabled:i,from:"ai_page_translation",aiUpsell:null==r?void 0:r.upsell})}),[e,i,null==r?void 0:r.upsell]);return"unavailable"===t?null:"requestAccess"===t||"requestAccessNoFreeCredits"===t?o?null:(0,I.jsx)(g().Ag,{onClick:()=>u("requestAccess"),children:(0,I.jsx)(c().sA,{id:"translate.snackbar.requestAccess.button",defaultMessage:"Request access"})}):"upsell"===t?(0,I.jsx)(g().Ag,{onClick:()=>u("upsell"),children:(0,I.jsx)(c().sA,{...m().D.getUnlimitedAI})}):void(0,d().HB)(t)}function C(){u().D6({label:(0,I.jsx)(T,{})})}function T(){return(0,I.jsx)(c().sA,{id:"translation.snackbar.retryable.error",defaultMessage:"There was an issue translating the page, please try again."})}function M(){return(0,I.jsx)(c().sA,{id:"translation.snackbar.payloadTooLarge.error",defaultMessage:"Sorry, the page is too large to translate at this time."})}function P(){u().D6({label:(0,I.jsx)(B,{}),right:(0,I.jsx)(R,{})})}function B(){return(0,I.jsx)(c().sA,{defaultMessage:"Sorry, there was an unexpected issue. If the issue persists, contact support.",id:"translation.snackbar.error"})}function R(){const e=(0,s().v3)(),t=(0,l().K8)((()=>(0,f().kb)()&&_().default.state.isZendeskEnabled),[]),n=(0,a.useCallback)((()=>{p().SI({environment:e,from:"ai_page_translation_error_snackbar"})}),[e]);return t?(0,I.jsx)(g().Ag,{onClick:n,children:(0,I.jsx)(c().sA,{id:"translate.snackbar.getHelp",defaultMessage:"Get help"})}):null}function E(e){const t=(0,r().A)(e);(0,o().Sdl)(t)?u().D6({label:(0,I.jsx)(x,{}),right:(0,I.jsx)(A,{})}):(0,o().Ah6)(t)&&"Quota exceeded"===t.message?C():(0,o().Ah6)(t)&&"Payload too large"===t.message?u().D6({label:(0,I.jsx)(M,{})}):(0,o().TXj)(t)?C():P(),i().O8(t,{from:"fullPageTranslationActions.generateAndApplyTranslationMapToPage",type:"error"})}function D(e){const t=(0,r().A)(e);P(),i().O8(t,{from:"fullPageTranslationActions.duplicateTranslatedPage",type:"error"})}},825972:(e,t,n)=>{n.d(t,{B8:()=>g,Dd:()=>_,NK:()=>p,Rj:()=>f,_v:()=>d,cs:()=>h,ht:()=>v,wI:()=>u,yw:()=>m,zW:()=>b});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454),n(737550);var o=()=>n(496506),i=()=>n(179034),r=()=>n(448433),a=()=>n(351360),s=()=>n(968172),l=()=>n(20199),c=()=>n(148832);const d=1e3,u=new(o().default)((()=>{if(!s().A.getIsInitialized())return;const{currentSpaceStore:e}=a().default.state;if(!e)return;return s().A.getWithoutSubscribing(e.id).slice(0,d).filter((e=>e.store&&!e.store.pathIsDead()))}),{debugName:"recentAlivePagesStore"}),p=new(o().default)((()=>u.state||[]),{debugName:"UNSAFE_recentAlivePagesStore"});function m(e,t,n){const o=a().default.state.currentSpaceStore,r=new Map(e.map((e=>[e.pageId,e])));return t.forEach((e=>{const{pageId:t,visitedAt:a}=e,s=r.get(t);s?(s.visitedAt<a&&(s.visitedAt=a),r.set(t,s)):o&&r.set(t,{pageId:t,visitedAt:a,store:c().B.createChildStore(o.getPagesStore(),{table:i().ev,id:t,spaceId:n})})})),Array.from(r.values()).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,d)}function g(e){let{spaceId:t,pageId:n,visitedAt:o}=e;const i=s().A.getWithoutSubscribing(t),c=i.some((e=>e.pageId===n)),d=function(e){let{newRecentPage:t,currentRecentPages:n}=e;const o=n.filter((e=>e.pageId!==t.pageId)),i=o;let r=0;for(;r<o.length;r++)if(t.visitedAt>=o[r].visitedAt){i.splice(r,0,t);break}r===o.length&&i.push(t);return i}({newRecentPage:{pageId:n,visitedAt:o},currentRecentPages:i});s().A.set(t,d),u.setShouldRecompute(),!c&&_()&&async function(e){var t;let{pageId:n}=e;const{currentSpaceStore:o}=a().default.state;if(!o)return;const i=await(0,r().ey)({currentSpaceStore:o,id:n,source:new Set(["recentVisit"])}),s=null===(t=l().A.getState().localSearchableBlocksCache)||void 0===t?void 0:t.blocks;if(!s||!i)return;s.has(i.id)||s.add(i)}({pageId:n})}const f=["today","yesterday","past_week","past_30_days","older"];function v(e){const t=Date.now(),n=864e5,o=t-e,i=new Date(e).getDay(),r=new Date(t).getDay(),a=new Date(t);a.setDate(a.getDate()-1);const s=a.getDay();return i===r&&o<=n?"today":i===s&&o<=1728e5?"yesterday":o<=6048e5?"past_week":o<=2592e6?"past_30_days":"older"}function h(e){return null==e?void 0:e.map((e=>({visitedAt:e.visitedAt,pageId:e.pageId}))).sort(((e,t)=>t.visitedAt-e.visitedAt)).slice(0,50)}function _(){return!0}function b(){return 100}},826810:(e,t,n)=>{n.d(t,{Si:()=>S,dC:()=>h,_p:()=>_});var o=()=>n(700500),i=()=>n(179034),r=()=>n(220719),a=()=>n(630116),s=()=>n(65269),l=()=>n(989423);function c(e,t){l().vd(e,"insert_column",t)}var d=()=>n(896628),u=()=>n(722101),p=()=>n(246826);function m(e){const t=e.getRecordStoreUIAncestor(2);if(t&&t instanceof a().Bv&&t.isType(o().xd.columnList))return t}function g(e){return e&&e instanceof a().Bv&&e.isType(o().xd.column)}function f(e){const{environment:t,targets:n,inMemoryRecordCache:i,transaction:a}=e;(0,r().MX)(n.length>0,"At least one target block is required.");const s=p().Wv({environment:t,type:o().xd.columnList,properties:{},inMemoryRecordCache:i,transaction:a,spaceId:n[0].pointer.spaceId}),c=s.getContentStore();for(const o of n)u().BC({parentStore:c,appendStore:o,transaction:a});return function(e){l().vd(e,"create_column_list")}(t),s}function v(e){const{environment:t,targets:n,inMemoryRecordCache:i,transaction:a}=e;(0,r().MX)(n.length>0,"At least one target block is required.");const s=p().Wv({environment:t,type:o().xd.column,format:{column_ratio:1},inMemoryRecordCache:i,transaction:a,spaceId:n[0].pointer.spaceId}),l=s.getContentStore();for(const o of n)u().BC({parentStore:l,appendStore:o,transaction:a});return s}function h(e){const{environment:t,parentStore:n,insertStores:o,leftStore:r,transaction:s}=e;if(0===o.length)return[];let l,d;if(c(t,{side:"left"}),g(r))l=r,d=m(r);else{l=v({environment:t,targets:[r],inMemoryRecordCache:n.inMemoryRecordCache,transaction:s});const o=f({environment:t,targets:[l],inMemoryRecordCache:n.inMemoryRecordCache,transaction:e.transaction});d=u().Br({parentStore:n,oldChildStore:r,newChildStore:o,transaction:s}).childStore}const p=v({environment:t,targets:o,inMemoryRecordCache:n.inMemoryRecordCache,transaction:s});if(d){const t=d.getContentStore();u().nc({parentStore:t,insertStore:p,beforeStore:l,transaction:e.transaction}),b({columnListStore:d,addedColumnStore:p,transaction:s});return a().Bv.createChildStore(t,{table:i().ev,id:p.id}).getContentStores()}return[]}function _(e){const{environment:t,parentStore:n,insertStores:o,rightStore:r,transaction:s}=e;if(0===o.length)return[];let l,d;if(c(t,{side:"right"}),g(r))l=r,d=m(r);else{l=v({environment:t,targets:[r],inMemoryRecordCache:n.inMemoryRecordCache,transaction:s});const o=f({environment:t,targets:[l],inMemoryRecordCache:n.inMemoryRecordCache,transaction:e.transaction});d=u().Br({parentStore:n,oldChildStore:r,newChildStore:o,transaction:s}).childStore}const p=v({environment:t,targets:o,inMemoryRecordCache:n.inMemoryRecordCache,transaction:s});if(d){const t=d.getContentStore();u().WH({parentStore:t,insertStore:p,afterStore:l,transaction:e.transaction}),b({columnListStore:d,addedColumnStore:p,transaction:s});return a().Bv.createChildStore(t,{table:i().ev,id:p.id}).getContentStores()}return[]}function b(e){const{columnListStore:t,addedColumnStore:n,transaction:o}=e,i=t.getContentStores(),r=1/i.length;d().zA({stores:[n],update:{column_ratio:r},transaction:o});for(const a of i)if(a.id!==n.id){const e=a.getColumnRatio();d().zA({stores:[a],update:{column_ratio:(1-r)*e},transaction:o})}}function y(e){const{columnListStore:t,removedColumnStore:n,transaction:o}=e,i=t.getContentStores(),r=n.getColumnRatio();for(const a of i){const e=a.getColumnRatio();d().zA({stores:[a],update:{column_ratio:e/(1-r)},transaction:o})}}function S(e){const{parentStore:t,transaction:n}=e,o=t.getRecordStoreUIParent();let i;if(g(o)&&(i=m(o)),i){const e=i.getContentStore(),t=i.getContentStores();for(const r of t){0===r.getContentStores().length&&(u().TF({parentStore:e,childToRemoveStore:r,shouldGarbageCollect:!1,transaction:n}),y({columnListStore:i,removedColumnStore:r,transaction:n}))}const o=i.getContentStores();if(0===o.length){const e=i.getRecordStoreUIParent();null!=e&&e.valueIs(s()._)&&u().TF({parentStore:e,childToRemoveStore:i,transaction:n,shouldGarbageCollect:!1})}else if(1===o.length){const e=i.getRecordStoreUIParent(),t=o[0],r=t.getContentStore(),a=t.getContentStores();if(a.reverse(),null!=e&&e.valueIs(s()._)){for(const t of a)u().TF({parentStore:r,childToRemoveStore:t,shouldGarbageCollect:!1,transaction:n}),u().WH({parentStore:e,insertStore:t,afterStore:i,transaction:n});u().TF({parentStore:e,childToRemoveStore:i,transaction:n,shouldGarbageCollect:!1})}}}}},828634:(e,t,n)=>{n.d(t,{EE:()=>r,wY:()=>i().wY,tK:()=>i().tK});n(16280);var o=n(296540),i=()=>n(188709);function r(e){const{children:t,onSizeChange:n}=e,r=(0,o.useRef)(null),a=(0,i().wY)(r);(0,o.useEffect)((()=>{n&&a&&n(a)}),[a,n]);const s=o.Children.only(t);return o.cloneElement(s,{ref:r})}},829300:(e,t,n)=>{n.d(t,{Gf:()=>N,Ju:()=>L,VN:()=>O,dw:()=>D,eh:()=>U});n(898992),n(803949);var o=()=>n(757695),i=()=>n(206267),r=()=>n(756005),a=()=>n(919709),s=()=>n(496603),l=()=>n(602098),c=()=>n(97270),d=()=>n(186445),u=()=>n(47373),p=()=>n(808237),m=()=>n(231722),g=()=>n(108944),f=()=>n(906537),v=()=>n(928074),h=()=>n(110955),_=()=>n(351360),b=()=>n(176106),y=()=>n(375447),S=()=>n(766637),w=()=>n(411671),k=()=>n(558407),I=()=>n(40851),x=()=>n(24157),A=()=>n(611371),C=()=>n(577437),T=()=>n(296206),M=()=>n(264879),P=()=>n(187778),B=()=>n(319975),R=()=>n(751156);function E(e){const{textStore:t,environment:n}=e,o=(0,g().Wo)(t)&&w().A.getMode(n,t).hasPublicPermission,i=t.isDefaultRecordCache(),a=!o,c=a&&function(e){const t=(0,d().ao)(),n=_().default.state.currentSpaceStore;if(!t||!n)return!1;const o=(0,C().C$)(e,{name:"configurable_mention_invites",spaceId:n.id,userId:n.userId}),i="available"===(null==o?void 0:o.type);return t.canEditMembership()&&n.canEditMembership()&&!i&&!e.device.isMobile}(n),m=a&&function(e){const t=(0,d().ao)();if(!t)return!1;return(0,v().Aj)({store:t})&&t.canEditMembership()&&(0,u().RL)()}(),f=a,h=!o,b=!o,y=function(e){const t=(0,d().ZO)();if(!t||"block"!==e.table)return!1;if(t.isInsideTemplate())return!0;const n=p().E(e);if(n||t.isInsideFactoryOrDuplicateBlocksAction()){const t=null==n?void 0:n.getTitleStore();return!(n&&t&&t.id===e.id&&s().n4(t.path,e.path))}if((0,l().u)(e))return!0;return!1}(t),S=function(e){if("block"!==e.table)return!1;return!0}(t);return(0,r().wu)({page:true,createPage:i,user:a,inviteUserToWorkspace:c,inviteUserToPage:m,bot:f,date:!0,reminder:!0,templateVariable:y,group:h,team:b,heading:!0,formulaContextVariable:S})}function D(e){const{environment:t,textStore:n,oldSelection:s,oldTextValue:l,disabledMentionTypes:d,usePopupOnMobile:u,mentionSectionOrdering:p}=e,m=function(e){const{textStore:t,oldSelection:n}=e;if(h().A.state.open||c().A.state.open||b().A.state.open)return;const o=a().qAZ(t.getValue()||[]),i=n.startIndex,r=(o[i]||"").normalize("NFKD"),s=(o[i-1]||"").normalize("NFKD"),l=y().A.state;if(l.open)return"[["===l.insertionType&&"]"===r&&"]"===s?"]]":void 0;if("@"===r){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"@"}if("+"===r){if(s&&!/[\s\(\)\[\]]/g.test(s))return;return"+"}if("[["===o.slice(i-1,i+1).join("")){const e=o[i-1];if(e&&!/[\s\(\)\[\]]/g.test(e))return;return"[["}}(e);if(!m)return;const g=y().A.state;if("]]"===m){if(g.open){const e=g.temporaryInputData.state;e&&g.temporaryInputData.setState({...e,suffix:"]]"}),y().A.setState({...g,showCreateIn:!0})}return}const v=f().get();if(!v)return;const _=f().getRect(v);if(!_)return;const S=E({textStore:n,environment:t}),w=S.page&&!d.page,k=S.heading&&!d.heading,x=S.createPage&&!d.createPage,A=S.user&&"@"===m&&!d.user,C=S.inviteUserToWorkspace&&"@"===m&&!d.inviteUserToWorkspace,M=S.inviteUserToPage&&"@"===m&&!d.inviteUserToPage,B=S.bot&&"@"===m&&!d.bot,R=S.date&&"@"===m&&!d.date,D=S.reminder&&"@"===m&&!d.reminder,N=S.templateVariable&&"@"===m&&!d.date&&!d.templateVariable,L=S.group&&"@"===m&&!d.group,O=S.team&&"@"===m&&!d.team,U=S.formulaContextVariable&&"@"===m&&!d.formulaContextVariable;if(!(A||L||O||w||x||R||D||N||U))return;if("+"===m&&!x)return;const F=i().JW(),V=i().JW();P().G(t,"mention"),y().A.setState({open:!0,flowId:F,sessionId:V,openTime:Date.now(),insertionType:m,textStore:n,oldTextValue:l,oldSelection:s,selectionRect:_,emptyQueryUserRequestStore:y().A.state.emptyQueryUserRequestStore,botRequestStore:new(I().A),temporaryInputData:o().default.createValue(void 0,{name:"temporaryInputData"}),mentionTypes:(0,r().wu)({page:w,createPage:x,user:A,inviteUserToWorkspace:C,inviteUserToPage:M,bot:B,date:R,reminder:D,templateVariable:N,formulaContextVariable:U,group:L,team:O,heading:k}),expandSection:void 0,showCreateIn:!1,showInvite:!1,showMentionAndShare:!1,showFormulaProperty:!1,createInQuery:"",isEmptyPageTitle:!1,usePopupOnMobile:u,sectionOrder:p}),T().bp(t,{analyticsFrom:y().A.getMentionMenuContext(),flowId:F,searchSessionId:V})}function N(e){const{environment:t,mentionTypes:n,usePopupOnMobile:o,mentionSectionOrdering:i}=e;B().DN({direction:"end"});const s=x().default.state;if("editing"!==s.mode)return;const l=(0,m().H7)(s.multiSelection);return l?function(e){const{selection:t,textValueStore:n,environment:o,mentionTypes:i,usePopupOnMobile:s,mentionSectionOrdering:l}=e;let c=!1;if(t.startIndex>0){const e=n.getValue()||[],o=a().qAZ(e)[t.startIndex-1];/[\s]/g.test(o)||(c=!0)}R().createAndCommit({userAction:"mentionMenuActions.insertMention",environment:o,canUndo:!0,perform:e=>{c?(B().$D({environment:o,store:n,editorMode:"default",string:" ",selection:t,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l}),B().$D({environment:o,store:n,editorMode:"default",string:"@",selection:{startIndex:t.startIndex+1,endIndex:t.endIndex+1},disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})):B().$D({environment:o,store:n,editorMode:"default",string:"@",selection:t,disableMentions:!1,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:e,mentionSectionOrdering:l})}});const d=y().A.state;if(!d.open)return;const u=E({environment:o,textStore:n});y().A.setState({...d,usePopupOnMobile:s,mentionTypes:(0,r().wu)({page:u.page&&i.page,createPage:u.createPage&&i.createPage,user:u.user&&i.user,inviteUserToWorkspace:u.inviteUserToWorkspace&&i.inviteUserToWorkspace,inviteUserToPage:u.inviteUserToPage&&i.inviteUserToPage,bot:u.bot&&i.bot,date:u.date&&i.date,reminder:u.reminder&&i.reminder,templateVariable:u.templateVariable&&i.templateVariable,group:u.group&&i.group,team:u.team&&i.team,heading:u.heading&&i.heading,formulaContextVariable:u.formulaContextVariable&&i.formulaContextVariable})})}({environment:t,mentionTypes:n,textValueStore:l.store,selection:l.selection,usePopupOnMobile:o,mentionSectionOrdering:i}):void 0}function L(e){const t=y().A.state,{environment:n,editorMode:o,annotations:i=[],transaction:r,menuListItemAction:s,query:l,serverEventProperties:c,mentionType:d,resultId:u,shareMenuSelection:p}=e;if(t.open){let e=t.oldTextValue,m=t.oldSelection;const g=t.insertionType.length-1;g>0&&(e=a().lzV(e,t.oldSelection.startIndex-g,t.oldSelection.startIndex),m={startIndex:m.startIndex-g,endIndex:m.endIndex-g}),B().R9({environment:n,store:t.textStore,value:e,transaction:r});const f=y().A.getMentionMenuContext();i.forEach((e=>{B().Gf({environment:n,editorMode:o,store:t.textStore,selection:m,annotation:e,analyticsFrom:f,transaction:r,shareMenuSelection:p})}));const v=Date.now();if("page"===d&&u&&k().A.recordMention({id:u,timestamp:v,currentUserId:n.currentUser.id}),d){const{numServerRequests:e}=S().A.state;T().o2(n,{clickIndexGlobal:null==s?void 0:s.index,clickIndexLocal:null==s?void 0:s.indexLocal.indexLocal,sectionIndex:null==s?void 0:s.indexLocal.section,analyticsFrom:f,timeToClickInMs:v-t.openTime,queryLength:l.length,serverEventProperties:c,mentionType:d,resultId:u,flowId:t.flowId,searchSessionId:t.sessionId,searchSessionFlowNumber:e})}O()}}function O(){y().A.update((e=>({...e,open:!1,sessionId:void 0}))),S().A.reset()}async function U(e){const{environment:t,titleText:n,createInValue:o,onPageCreated:i,menuListItemAction:r,clearSavedSelection:a}=e,s=y().A.state;if(!s.open)return;if(!(0,A().EF)(t))return;a();const{performResult:l}=await R().createAndCommitAsync({environment:t,userAction:"mentionMenuActions.acceptCreateIn",waitForServerCommit:!0,perform:async e=>{const a=M().oj({environment:t,transaction:e,titleText:n,createInValue:o,recordStoreParentStore:s.textStore}),l=a.createdPages[0];if(l)return i&&i(l),L({environment:t,editorMode:"default",annotations:[["p",l.id]],transaction:e,menuListItemAction:r,query:n,mentionType:"createPage"}),await a.moveToStorePromise,{createInState:a}}});if(l){const{createInState:e}=l;return await M().nT({analyticsFrom:"mention_menu",createInState:e}),e}}},830140:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},831310:(e,t,n)=>{n.d(t,{o:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("check",{viewBox:"0 0 14 14",svg:(0,o.jsx)("polygon",{points:"5.5 11.9993304 14 3.49933039 12.5 2 5.5 8.99933039 1.5 4.9968652 0 6.49933039"})})},831872:(e,t,n)=>{n.d(t,{N6:()=>l,pQ:()=>s,sm:()=>a,uj:()=>r});n(944114),n(898992),n(354520),n(581454),n(737550);var o=()=>n(496603);function i(e,t){return e.KeyboardShortcutStackStore.state.stack.some((e=>t===e.listener))}function r(e,t,n){const{stack:o}=e.KeyboardShortcutStackStore.state;for(let i=o.length-1;i>=0;i--){const r=o[i],a=r.shortcuts[n];if(e.KeyboardShortcutStackStore.debugPropagation){const[t,o]=e.KeyboardShortcutStackStore.getDebugInfoForStackItem(i),s=r.enable&&a?`propagating ${n} to ${t}`:`not propagating ${n} to ${t}`;console.info(`keyboardShortcutStackActions: ${s}`,o)}if(r.enable&&a)return void a(t)}}function a(e){const{environment:t,stackItem:n}=e,r=t.KeyboardShortcutStackStore;if(i(t,n.listener)){const e=r.state.stack.map((e=>e.listener===n.listener?n:e));r.setState({...r.state,stack:e})}else r.state.stack.push(n),r.setState({stack:o().Ul(r.state.stack,(e=>e.priority))})}function s(e,t){if(i(e,t)){const n=e.KeyboardShortcutStackStore,o=n.state.stack.filter((e=>t!==e.listener));n.setState({...n.state,stack:o})}}function l(e,t){r(e,t,t.type)}},832410:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(672577),n(737550);class o extends(()=>n(965828))().O{findFromTextStore(e){return this.find((t=>{var n;return null===(n=t.textStores)||void 0===n?void 0:n.some((t=>t.includes(e)))}))}}const i=new o},834211:(e,t,n)=>{function o(e){return`getRecentlyNavigatedCollections:${e}`}n.d(t,{Y:()=>o})},834368:(e,t,n)=>{n.d(t,{K:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("checkboxSquare",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.5,1.5 L1.5,14.5 L14.5,14.5 L14.5,1.5 L1.5,1.5 Z M0,0 L16,0 L16,16 L0,16 L0,0 Z"})})},835066:(e,t,n)=>{n.d(t,{$N:()=>q,JC:()=>U,JR:()=>L,Ob:()=>W,Qb:()=>E,Zy:()=>j,cY:()=>$,dC:()=>K,gg:()=>H,kH:()=>A,t_:()=>P,xK:()=>z});n(944114),n(898992),n(354520),n(803949),n(581454);var o=()=>n(17022),i=()=>n(700500),r=()=>n(955825),a=()=>n(179034),s=()=>n(343666),l=()=>n(534177),c=()=>n(186445),d=()=>n(38337),u=()=>n(846662),p=()=>n(449195),m=()=>n(747100),g=()=>n(299545),f=()=>n(129522),v=()=>n(695625),h=()=>n(900652),_=()=>n(644914),b=()=>n(397248),y=()=>n(351360),S=()=>n(195613),w=()=>n(570323),k=()=>n(712505),I=()=>n(630116),x=()=>n(116008);const A=10,C=10,T="temp-margin-comment-discussion",M="temp-margin-comment-discussion-in-toggle",P=50,B=`.${d().ohG} .notion-collection_view-block`,R=`.${d().d0I}`,E=372,D=10,N=14,L=16,O=1150,U=E-4*L,F=1500,V=1600;function j(e,t,n){const o=z(e,t);return o>=F||n&&!k().default.isSidePeekClosingStore.state||t?0:(F-o)/2}function z(e,t){return t&&k().default.isSidePeekOpen()?(0,_().Ql)(e):e.WindowSizeStore.state.width-(0,_().kf)(e)-(0,_().zo)(e,!1)-h().Z8()}function H(e,t,n){return(z(e,t)-V)/2+2*L+j(e,t,n)}const W=new(n(496506).default)((()=>{var e;let t=y().default.state.mainEditorCurrentBlockStore;return null!==(e=t)&&void 0!==e&&e.isCollectionView()&&(t=(0,n(519839).MW)(t)||t),t?(0,g().O3)(t,{recursivelyLoadAllDiscussions:!0,includePropertyDiscussions:!0}).filter((e=>{var n;return e.getParentId()!==(null===(n=t)||void 0===n?void 0:n.id)||void 0!==e.getPropertyId()})):[]}),{debugName:"mainEditorBlockUnresolvedDiscussionStore"});function q(e,t){return(!t.getAssociatedCollectionStore()||!t.getRecordStoreUIParent()||t.id===(0,c().s0)())&&(!e.device.isMobile&&(!(z(e,(0,m().cq)(t))<O)&&(!(0,_().me)(e)&&(!k().default.isSidePeekOpen()&&(!w().A.state.open&&Boolean(t.getRecordStoreUIRoot()===y().default.state.mainEditorCurrentBlockStore&&"inline"===(0,p().LN)()))))))}function K(e,t){const n=W.state.length>0,o=x().A.state.open&&x().A.state.rect;return Boolean((n||o)&&q(e,t))}function G(e,t){return e.offsetTop!==t.offsetTop?e.offsetTop<t.offsetTop?-1:1:e.createdTimeMs&&t.createdTimeMs&&e.createdTimeMs!==t.createdTimeMs?e.createdTimeMs<t.createdTimeMs?-1:1:e.id<t.id?-1:1}const $=(0,n(496603).sg)((function(e){let{discussionStores:t,pageContentStores:s,marginDiscussionItemRefs:p,selectedDiscussionId:m,newMarginDiscussionArgs:g,marginContainerElement:h,pageViewBlockElement:_,onComputeComplete:y,computedOnce:w,prevSelectedDiscussionId:k,isFullWidth:A,topbarHeight:M,windowHeight:P,previousDiscussionElements:E}=e;const L=new Map;let O=0,U=0;if(!h||!_)return;if(0===t.length&&!g)return;const F=o().A.withListenerIgnored((()=>{var e;return(null===(e=S().A.state.elementRef.current)||void 0===e?void 0:e.scrollTop)??0})),V=h.getBoundingClientRect(),j=Y({currentScrollTop:F,rect:V}),z=t.map((e=>function(e){let{discussionStore:t,currentScrollTop:n,topbarHeight:o,windowHeight:i,pageViewBlockElement:s,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}=e;const p=t.id,m=function(e){const{topbarHeight:t,windowHeight:n,pageViewBlockElement:o,discussionId:i,previousDiscussionElements:a,currentDiscussionElements:s,selectedDiscussionId:l}=e,c=o.getElementsByClassName((0,r().wV)({discussionId:i})),d=e=>(s.set(i,e),e);if(c.length>0){if(l===i){let e;for(let o=0;o<c.length;o++){const i=c[o];if(i instanceof HTMLElement){const o=i.getBoundingClientRect();if(o.bottom<t||o.top>n){if(e)return d(e)}else{if(o.top>t)return d(i);e=i}}}}const e=a.get(i);return e&&Array.from(c).includes(e)?d(e):d(c[0])}}({topbarHeight:o,windowHeight:i,pageViewBlockElement:s,discussionId:p,previousDiscussionElements:l,currentDiscussionElements:d,selectedDiscussionId:u}),g=t.recordStoreUIParentStore;if(!(g&&g.id&&g.table===a().ev&&g instanceof I().Bv))return;if(!g.isReady())return;const f={offsetTop:0,discussionStore:t,parentBlockStore:g,type:"existing",id:t.id,createdTimeMs:Z(t)};if(m instanceof HTMLElement)return f.offsetTop=Y({rect:m.getBoundingClientRect(),currentScrollTop:n}),f;const h=v().T.findNodeFromStore(g);if(h instanceof HTMLElement&&g.id!==(0,c().s0)())return f.offsetTop=Y({rect:h.getBoundingClientRect(),currentScrollTop:n}),f;const{node:_,blockStore:b}=v().T.findClosestVisibleParent(g);if(_ instanceof HTMLElement&&b)return f.offsetTop=Y({rect:_.getBoundingClientRect(),currentScrollTop:n})+D,f.parentBlockStore=b,f.shouldGroup=!0,f.closestVisibleParentId=b.id,f}({discussionStore:e,currentScrollTop:F,topbarHeight:M,windowHeight:P,pageViewBlockElement:_,previousDiscussionElements:E,currentDiscussionElements:L,selectedDiscussionId:m}))).filter(l().O9),H=g&&function(e){var t;let n,{blockStore:o,discussionInputStore:i,currentScrollTop:r,pageViewBlockElement:a}=e;const s=null===(t=a.getElementsByClassName(d().Mdy))||void 0===t?void 0:t[0];let l=!1,c=o;if(s instanceof HTMLElement)n=s.getBoundingClientRect();else{const e=x().A.getBlockStore();if(e)n=f().K.getRect(e);else{const e=x().A.getClosestBlockStore();if(e){const{node:t,parentBlockStore:o}=e;t instanceof HTMLElement&&o&&(n=t.getBoundingClientRect(),l=!0,c=o)}}}if(!n)return;return{offsetTop:Y({rect:n,currentScrollTop:r})+N,parentBlockStore:c,discussionInputStore:i,type:"new",id:T,createdTimeMs:Date.now(),shouldGroup:l}}({...g,currentScrollTop:F,pageViewBlockElement:_});let W=null!=H&&H.shouldGroup?Q(z,H):Q(z);null!=H&&H.shouldGroup||H&&W.push(H);const q=H&&n(555776).A.state.isActivelyComposing?H.id:m;let K;const $=q||k?void 0:function(e){let{pageContentStores:t,currentScrollTop:n,marginContainerRect:o,isFullWidth:r}=e;return t.map((e=>{const t=e.getType();if(!t)return;let n;var a;if((0,l().O)(i().Ib,t)||"column_list"===t||(0,u().gV)(e))n=null===(a=v().T.findSelectableFromStore(e))||void 0===a||null===(a=a.getNode())||void 0===a?void 0:a.getBoundingClientRect();else if(t===i().xd.table){var s,c;const t=null===(s=v().T.findSelectableFromStore(e))||void 0===s?void 0:s.getNode(),o=null==t?void 0:t.getBoundingClientRect(),i=null==t||null===(c=t.querySelector(R))||void 0===c?void 0:c.getBoundingClientRect();n=r?o:o&&i?o.width<i.width?o:i:o||i}else if(e.isInlineCollectionView()){var d,p;const t=null===(d=v().T.findSelectableFromStore(e))||void 0===d?void 0:d.getNode();n=r?null==t?void 0:t.getBoundingClientRect():null==t||null===(p=t.querySelector(B))||void 0===p?void 0:p.getBoundingClientRect()}return n&&n.right>o.left?n:void 0})).filter(l().O9).map((e=>{const t=Y({rect:e,currentScrollTop:n});return new DOMRect(e.left,t,e.width,e.height)}))}({pageContentStores:s,currentScrollTop:F,marginContainerRect:V,isFullWidth:A}).sort((e=>-e.top));W=W.sort(G).map(((e,t)=>{e.offsetTop-j>=18&&(e.offsetTop-=18);const n=e.id,o=p.get(e.id);if(!o)return"new"===e.type||w||(e.offsetTop=-9999,e.hide=!0),e;const i=o.getBoundingClientRect(),r=i.height;let a=e.offsetTop;return a<=O&&(a=O),$&&(a=function(e,t){const n={x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,left:e.left,bottom:e.bottom,right:e.right};let o=t[t.length-1];for(;o;)if((0,b().IA)(n,o))n.top=o.bottom+C,n.bottom=n.top+n.height,t.pop(),o=t[t.length-1];else{if(n.bottom<o.top)return n.top;t.pop(),o=t[t.length-1]}return n.top}(new DOMRect(i.left,a,i.width,i.height),$)),n===q&&0===U&&(U+=a-e.offsetTop,e.selected=!0,K=t),e.offsetTop=a,e.height=r,O=e.offsetTop+r,e}));const X=W.map((e=>(e.offsetTop=e.offsetTop-j,e)));let J;if(U>0&&void 0!==K){for(let e=K;e>=0;e--){const t=X[e];if(t.height){if(t.id===q)t.offsetTop-=U;else{if(!(J&&J.offsetTop<=t.offsetTop+t.height))break;t.offsetTop-=U}J=t}}for(let e=K+1;e<X.length;e++){const t=X[e];t.offsetTop-=U,J=t}}y({data:X,hasNewDiscussion:Boolean(H),selectedDiscussion:m},L)}),100);function Y(e){let{rect:t,currentScrollTop:n}=e;return t.top+n}function Q(e,t){const n=new Map,o=[];e.forEach((e=>{if(e.shouldGroup){const t=n.get(e.parentBlockStore.id)||[];t.push(e),n.set(e.parentBlockStore.id,t)}else o.push(e)}));const i=null==t?void 0:t.parentBlockStore.id,r=i&&n.get(i)||[];return n.forEach((e=>{o.push({offsetTop:e[0].offsetTop,groupedDiscussionsData:e,parentBlockStore:e[0].parentBlockStore,type:"grouped",id:e[0].id,createdTimeMs:e[0].createdTimeMs,newDiscussionData:t})})),t&&0===r.length&&o.push({offsetTop:t.offsetTop,groupedDiscussionsData:[],parentBlockStore:t.parentBlockStore,type:"grouped",id:M,createdTimeMs:t.createdTimeMs,newDiscussionData:t}),o}function Z(e){const t=g().uB(e),n=t.getValue()||[];if(0===n.length)return;const o=n[0];return I().sk.createChildStore(t,{table:s().SN,id:o,spaceId:t.pointer.spaceId}).getCreatedTime()}},835779:(e,t,n)=>{n.d(t,{h:()=>g});n(296540);var o=()=>n(484714),i=()=>n(943846),r=()=>n(251126),a=()=>n(401497),s=()=>n(138856),l=()=>n(959013),c=()=>n(284371),d=n(474848);function u(e){let{url:t,metadata:n}=e;const o=(0,a().IS)((e=>({previewWrapper:{display:"flex",flexDirection:"column",border:`1px solid ${e.darkDividerColor}`,borderRadius:"3px",height:"100%"},previewImageArea:{flex:1,backgroundColor:e.embedPlaceholderBackground},previewInfoArea:{padding:"0.75em 1em",backgroundColor:e.text.contrastPrimary,display:"flex",flexDirection:"column",gap:"0.25em"},previewTitle:{fontWeight:c().Wy.medium,color:e.darkTextColor},previewUrl:{display:"flex",alignItems:"center",gap:"0.75em"},previewUrlText:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:e.text.tertiary},previewUrlFavicon:{width:"1.25em",height:"1.25em"}})),[]),i=null!=n&&n.images&&n.images.length>0?n.images[0].url:void 0;return(0,d.jsxs)("div",{style:o.previewWrapper,children:[(0,d.jsx)("div",{style:o.previewImageArea,children:i?(0,d.jsx)(p,{imageUrl:i}):(0,d.jsx)(m,{})}),(0,d.jsxs)("div",{style:o.previewInfoArea,children:[(null==n?void 0:n.title)&&(0,d.jsx)("div",{style:o.previewTitle,children:n.title}),(0,d.jsxs)("div",{style:o.previewUrl,children:[(null==n?void 0:n.favicon_url)&&(0,d.jsx)("img",{style:o.previewUrlFavicon,src:n.favicon_url}),(0,d.jsx)("div",{style:o.previewUrlText,children:t})]})]})]})}function p(e){let{imageUrl:t}=e;const n=(0,a().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-start",height:"100%",backgroundSize:"cover",backgroundImage:`url(${t})`},pill:{backgroundColor:e.accentColors.gray[800],color:e.accentColors.gray[75],borderRadius:"99em",padding:"0.5em 1em",margin:"1em",display:"flex",alignItems:"center",gap:"0.75em",fontWeight:c().Wy.medium},playButton:{width:"1em",height:"1em",fill:e.accentColors.gray[75]}})),[t]);return(0,d.jsx)("div",{style:n.wrapper,children:(0,d.jsxs)("div",{style:n.pill,children:[(0,s().u)(n.playButton),(0,d.jsx)("span",{children:(0,d.jsx)(l().sA,{defaultMessage:"Load embed",id:"iFramePreview.pillLabel"})})]})})}function m(){const e=(0,a().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:e.text.secondary,height:"100%"},message:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"0.75em",fontWeight:c().Wy.medium},playButtonWrapper:{backgroundColor:e.text.secondary,borderRadius:"2em",width:"2.5em",height:"2.5em",display:"flex",justifyContent:"center",alignItems:"center"},playButton:{marginLeft:"0.1em",width:"1em",height:"1em",fill:e.embedPlaceholderBackground}})),[]);return(0,d.jsx)("div",{style:e.wrapper,children:(0,d.jsxs)("div",{style:e.message,children:[(0,d.jsx)("div",{style:e.playButtonWrapper,children:(0,s().u)(e.playButton)}),(0,d.jsx)("span",{children:(0,d.jsx)(l().sA,{defaultMessage:"Tap to load embed",id:"iFramePreview.imagelessAreaLabel"})})]})})}function g(e){let{source:t}=e;const n=(0,o().v3)(),a={request:t,performRequest:e=>async function(e,t){return(0,i().DB)(t,e)}(e,n),render:(e,n,o)=>(0,d.jsx)(f,{error:e,result:n,ready:o,source:t})};return(0,d.jsx)(r().A,{...a})}function f(e){let{error:t,result:n,ready:o,source:i}=e;return o?(0,d.jsx)(u,{url:i,metadata:n}):null}},836285:(e,t,n)=>{n.d(t,{I:()=>r,s:()=>a});var o=()=>n(763884);const i="queryParamsRedirect";function r(e){let{currentUserId:t,params:n}=e;o().K.set({userId:t,key:i,value:n})}function a(e){return o().K.get({userId:e,key:i})}},837570:(e,t,n)=>{n.d(t,{V:()=>s,h:()=>a});var o=()=>n(534177),i=()=>n(686526),r=()=>n(216424);function a(e){const{environment:t}=e;t.device.isMobile?function(e){const{collectionSettingsStore:t}=e;"create_automation"===e.mode?i().a2({collectionSettingsStore:t,item:{type:"mobileCreateAutomation",from:e.from,source:e.source}}):"edit_automation"===e.mode?i().a2({collectionSettingsStore:t,item:{type:"mobileEditAutomation",source:e.source,automationId:e.automationId}}):"edit_button_property"===e.mode?i().a2({collectionSettingsStore:t,item:{type:"mobileEditButtonAutomation",propertyId:e.propertyId,propertySchema:e.propertySchema}}):(0,o().HB)(e)}(e):function(e){const{collectionSettingsStore:t,collectionContextStore:n}=e;"create_automation"===e.mode?r().L.setState({type:"open_automation",props:{mode:"create",collectionContextStore:n,collectionSettingsStore:t,from:e.from,source:e.source}}):"edit_automation"===e.mode?r().L.setState({type:"open_automation",props:{mode:"update",collectionContextStore:n,collectionSettingsStore:t,automationId:e.automationId,source:e.source}}):"edit_button_property"===e.mode?r().L.setState({type:"open_button",props:{collectionContextStore:n,collectionSettingsStore:e.collectionSettingsStore,propertyId:e.propertyId,propertySchema:e.propertySchema}}):(0,o().HB)(e)}(e)}function s(e){const{environment:t,collectionSettingsStore:n}=e;t.device.isMobile?i().yl({collectionSettingsStore:n}):r().L.setState({type:"closed"})}},838256:(e,t,n)=>{n.d(t,{IK:()=>d,UF:()=>u,VS:()=>g,aD:()=>p});n(944114);var o=()=>n(745875),i=()=>n(508496),r=()=>n(24157);const a=!1,s=15*n(720665).TD,l={user_flow_edit_block:.005,user_flow_edit_page_title:.01,user_flow_create_block:.01,user_flow_delete_block:.01};function c(e){if(a)return!0;const t=l[e];if(void 0!==t)return(0,o().ox)(t);const n=i().default.getConfigKey("event_trail_events",e);if("object"==typeof n&&"number"==typeof n.sampleRate)return(0,o().ox)(n.sampleRate);const r=i().default.getConfigKey("event_trail_events","defaultSampleRateUserFlows");return"number"==typeof r&&(0,o().ox)(r)}class d{constructor(e){this.stage=void 0,this.timeout=void 0,this.error=void 0,this.logDataInCaseOfFailure=void 0,this.postFinishCallbacks=[],this.environment=void 0,this.userFlow=void 0,this.entryPointName=void 0,this.handleTimeout=()=>{this.fail("timeout")};const{environment:t,userFlow:n,entryPointName:o,timeoutMs:i}=e;this.environment=t,this.userFlow=n,this.entryPointName=o;e.isEnabled??c(n)?(this.stage="inProgress",this.timeout=window.setTimeout(this.handleTimeout,i??s),this.debugLog("constructed")):this.stage="disable"}isDisabled(){return"disable"===this.stage}updateLogDataInCaseOfFailure(e){this.logDataInCaseOfFailure={...this.logDataInCaseOfFailure,...e}}succeed(){"inProgress"===this.stage&&this.finish("success")}fail(e){"inProgress"===this.stage&&(this.error=e,this.finish("fail"))}finish(e){this.stage=e,this.debugLog("finish"),"number"==typeof this.timeout&&window.clearTimeout(this.timeout),this.timeout=void 0,n(937075).lz(this.environment,this.userFlow,{status:e,error:this.error,entryPointName:this.entryPointName}),"fail"===e&&n(857639).log({level:"error",from:"userFlowActions",type:"userFlowFailed",data:{userFlow:this.userFlow,userFlowEntrypointName:this.entryPointName,userFlowError:this.error,...this.logDataInCaseOfFailure}});for(const t of this.postFinishCallbacks)t()}debugLog(){if(a){const o=this.entryPointName?`${this.userFlow}.${this.entryPointName}`:this.userFlow;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.groupCollapsed(`${this.constructor.name} ${o} stage=${this.stage}`,...t),console.trace(),console.groupEnd()}}}class u extends d{constructor(e){super(e),this.pointer=void 0,this.succeedOnEnqueue=void 0,this.trackCallbacks=[];const{succeedOnEnqueue:t}=e;this.succeedOnEnqueue=t}track(e,t){if("inProgress"===this.stage&&void 0===this.pointer){this.pointer=e,m({tracker:this,transaction:t,succeedOnEnqueue:this.succeedOnEnqueue});for(const e of this.trackCallbacks)e();this.debugLog("track",e.id)}}}class p extends u{constructor(e,t){super({environment:e,userFlow:"user_flow_create_page",entryPointName:t,succeedOnEnqueue:!1}),this.handleTextSelectionChange=e=>{"inProgress"===this.stage&&this.pointer&&"editing"===e.state.mode&&(0,n(231722).KP)(e.state.multiSelection)&&e.state.multiSelection.start.store.pointer.id===this.pointer.id&&this.succeed()},"inProgress"===this.stage&&this.trackCallbacks.push((()=>{r().default.addListener(this.handleTextSelectionChange),this.postFinishCallbacks.push((()=>{r().default.removeListener(this.handleTextSelectionChange)}))}))}}function m(e){const{tracker:t,transaction:n,succeedOnEnqueue:o}=e;"inProgress"===t.stage&&(t.updateLogDataInCaseOfFailure({transactionId:n.id,transactionUserAction:n.getUserActionForAnalyticsPurposesOnly()}),n.annotateWithUserFlow(t.userFlow),n.postCancelCallbacks.push((()=>{t.fail("cancelled_transaction")})),n.postEnqueueActions.push((()=>{n.isEmpty()?t.fail("empty_transaction"):o&&t.succeed()})))}function g(e,t,n,o){if(!c(t))return;m({tracker:new d({environment:e,userFlow:t,isEnabled:!0,entryPointName:o}),transaction:n,succeedOnEnqueue:!0})}},838824:(e,t,n)=>{n.d(t,{Z:()=>a});var o=()=>n(705540),i=()=>n(755636),r=()=>n(780054);async function a(e){const{environment:t,from:n,targetSelf:a}=e,s=`${r().A.mail.domainBaseUrl}/inbox?from=${n}#activeUserID=${t.currentUser.id}`;if(t.device.isElectron){const{protocol:e}=r().A.mail;if(await o().isProtocolRegistered(e)){const t=s.replace(/^https?:/,`${e}:`);if(await o().openExternalUrl(t))return}}!function(e){const{environment:t,url:n,targetSelf:o}=e;i().f({environment:t,url:n,targetSelf:o})}({environment:t,url:s,targetSelf:a})}},838924:(e,t,n)=>{n.d(t,{ri:()=>d,s5:()=>c,x1:()=>l});var o=()=>n(847249),i=()=>n(757695),r=()=>n(604995),a=()=>n(767525);const s=new Map;function l(e){if(!s.has(e)){const t=i().default.createValue((()=>(0,r().ah)(e)),{name:"store"});s.set(e,t)}return s.get(e).state}function c(){return(0,o().K8)((()=>{const{zone:e}=(0,a().s1)();return l(e)}),[])}function d(){for(const[e,t]of s){const n=(0,r().ah)(e);t.state.equals(n)||t.setState(n)}}},839010:(e,t,n)=>{n.d(t,{A:()=>u});n(964979);var o=n(296540),i=()=>n(943846),r=()=>n(753199),a=n(474848);const s={position:"absolute",left:0,top:0,width:"100%",height:"100%",borderRadius:1};function l(e,t){const r=(0,o.useRef)(null),[s,l]=(0,o.useState)(!1),d=(0,o.useCallback)((()=>{document.activeElement&&document.activeElement===r.current&&document.activeElement.blur()}),[]);(0,o.useEffect)((()=>{d()}));const u=(0,o.useCallback)((()=>{const e=n(861841).Ay.state.isDragging,t=n(353643).A.state.isDragging,o=n(93658).default.state.isActive;l(e||t||o)}),[]);return(0,a.jsx)("div",{ref:t,style:e.style,onMouseMove:u,onMouseEnter:u,onMouseLeave:d,children:(0,a.jsx)("div",{style:(0,i().rS)(e),children:(0,a.jsx)(c,{ref:r,...e,disabled:s})})})}const c=o.forwardRef((function(e,t){const{background:l,disabled:c,onContentLoadTimeout:u,renderPreview:p,allow:m,source:g}=e,[f,v]=(0,o.useState)(!1),[h,_]=(0,o.useState)(!1),b=(0,o.useCallback)((e=>{e.preventDefault(),(0,r().SQ)({event:e,context:r().y$.EditorClick,callback:()=>{_(!0)}})}),[]),y=(0,o.useCallback)((()=>{v(!0)}),[]),S=(0,n(401497).IS)((e=>({iframe:{...s,pointerEvents:c?"none":"auto",backgroundColor:l?e.contentBackground:"none"}})),[l,c]);if(function(e,t){if(!window.__webViewTerminatedWhileAppActive)return!1;return!e&&Boolean(t)}(h,p))return(0,a.jsx)("div",{style:{...S.iframe,backgroundColor:"none"},onMouseDown:b,children:null==p?void 0:p()});const w=(0,i().NA)(g);return(0,a.jsx)(n(378765).A,{innerStyle:{height:"100%",width:"100%"},loaded:f,style:s,spinnerSize:"relative",showSpinnerTimeout:500,children:w&&(0,a.jsx)(d,{ref:t,sourceUrl:w,wrapperStyle:{...S.iframe,backgroundColor:"none"},style:S.iframe,allow:m,onLoad:y,onContentLoadTimeout:u})})})),d=o.forwardRef((function(e,t){const{sourceUrl:i,style:r,allow:s,onLoad:l,onContentLoadTimeout:c,wrapperStyle:d}=e,u=(0,n(484714).v3)(),[p,m]=(0,n(106959).jn)(),g=(0,o.useRef)(void 0),f=(0,n(93583).A)(t,g),v=(0,o.useRef)(void 0),h=u.device.isElectron?"allow-scripts allow-popups allow-forms allow-same-origin":"allow-scripts allow-popups allow-top-navigation-by-user-activation allow-forms allow-same-origin allow-storage-access-by-user-activation allow-popups-to-escape-sandbox",_=(0,o.useCallback)((()=>{if(n(508496).default.checkGate({gateName:"embed_block_fallback"})){let t;try{t=Boolean(g.current&&g.current.contentWindow&&"about:blank"!==g.current.contentWindow.location.href)}catch(e){if(e instanceof DOMException)return;throw e}t||null==c||c()}}),[c]),b=(0,o.useCallback)((()=>{l(),_()}),[_,l]);return(0,o.useEffect)((()=>(v.current=setTimeout(_,7e3),()=>{clearTimeout(v.current)})),[_]),(0,a.jsx)("div",{ref:p,style:d,children:m&&(0,a.jsx)("iframe",{ref:f,style:r,src:i,frameBorder:"0",onLoad:()=>{clearTimeout(v.current),b()},sandbox:h,allowFullScreen:!0,allow:s})})})),u=o.forwardRef(l)},840094:(e,t,n)=>{n.d(t,{OW:()=>f,Qj:()=>v,cN:()=>h});var o=()=>n(484714),i=()=>n(847249),r=()=>n(352271),a=()=>n(973647),s=()=>n(534177),l=()=>n(813297),c=()=>n(862292),d=()=>n(157857),u=()=>n(972435),p=()=>n(645873),m=()=>n(630116),g=()=>n(76190);function f(e){const{store:t,automationStore:n}=e,r=(0,o().v3)(),{value:a}=(0,p().fJ)(c().T.formulas),{value:s}=(0,p().fJ)(l().QV.automationTypecheck),{value:f}=(0,p().fJ)(l().QV.automationActionRegistry),v=r.currentUser.id,h=(0,g().n)(n);return(0,i().K8)((()=>{const e=t.getRecordStoreUIRoot();if(a&&s&&f&&n&&e instanceof m().Bv)return(0,d().lp)({environment:r,automationActionRegistryModule:f,automationStore:n,automationTypecheckModule:s,blockStore:t,currentUserId:v,isLoggedIn:r.currentUser.isLoggedIn(),formulasModule:a,intl:u().A.getIntl(),isSubscribed:h,pageStore:e,parentRecordStore:n,type:"button_block"})}),[r,t,a,s,f,n,v,h])}function v(e){const{automationStore:t,propertyId:n,propertySchema:r,collectionContextStore:a}=e,s=(0,o().v3)(),m=s.currentUser.id,{value:f}=(0,p().fJ)(c().T.formulas),{value:v}=(0,p().fJ)(l().QV.automationTypecheck),{value:h}=(0,p().fJ)(l().QV.automationActionRegistry),_=(0,g().n)(t);return(0,i().K8)((()=>{if(f&&t&&v&&h)return(0,d().lp)({environment:s,automationActionRegistryModule:h,automationStore:t,automationTypecheckModule:v,collectionContextStore:a,currentUserId:m,formulasModule:f,intl:u().A.getIntl(),isLoggedIn:s.currentUser.isLoggedIn(),isSubscribed:_,parentRecordStore:t,propertyId:n,propertySchema:r,type:"button_property"})}),[s,f,t,a,m,n,r,h,v,_])}function h(e){const t=v(e);return(0,i().K8)((()=>{const e=null==t?void 0:t.state;return!!(0,s().O9)(null==e?void 0:e.typecheckResult)&&(!a().Q.isFail(e.typecheckResult)&&(0,r().x4)(e.typecheckResult.value))}),[t])}},840153:(e,t,n)=>{n.d(t,{T:()=>_,V:()=>b});n(898992),n(354520);var o=()=>n(590966),i=()=>n(584262),r=()=>n(677338),a=()=>n(994310),s=()=>n(857783),l=()=>n(235921),c=()=>n(529543),d=()=>n(479954),u=()=>n(719431),p=()=>n(14307),m=()=>n(1130),g=()=>n(607859),f=()=>n(351360),v=()=>n(630116),h=()=>n(541258);async function _(e){const{newCurrentUserId:t,loggedOutUserId:n,environment:i}=e;await u().setLocalStorageUserId(i,t),(0,r().hn)(t),await c().setCookie(i,{name:"notion_user_id",value:t});const s=i.currentUser.loggedInUserIds.filter((e=>e!==n)),f=await c().getGhostAdminUserId(i),v={...i,currentUser:new(o().CurrentUser)({id:t,loggedInUserIds:s,adminUserId:f})};if(i.updateCurrentUserId){const e={environment:i,currentUserId:t,userIds:s};i.updateCurrentUserId(e)}a().A.set(d().l,t),p().resetRecordSubscriptions(),g().default.reset(),l().A.reset();return await m().Wj(i)&&m().ZS(v),await h().gB(v,t),v}async function b(e){const{newCurrentUserId:t,environment:n,store:o}=e,{mainEditorCurrentBlockStore:r}=f().default.state,a=await _({environment:n,newCurrentUserId:t});if(r){const e=new(v().Bv)(a,o.pointer);f().default.setState({...f().default.state,mainEditorCurrentBlockStore:void 0}),s().uK({environment:a,store:e,pageVisitSource:i().y8.SwitchSpace})}}},840790:(e,t,n)=>{n.d(t,{A:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class o extends(()=>n(757695))().default{getInitialState(){return{unsyncingBlockIds:new Set}}addUnsyncingBlockId(e){this.getState().unsyncingBlockIds.add(e),this.emit()}removeUnsyncingBlockId(e){this.getState().unsyncingBlockIds.has(e)&&(this.getState().unsyncingBlockIds.delete(e),this.emit())}}const i=new o;(0,n(604341).exposeDebugValue)("TransclusionBlockStore",i);const r=i},841696:(e,t,n)=>{n.d(t,{T:()=>o,Z:()=>i});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const o=[n(179034).ev];class i{constructor(e){this.id=n(206267).JW(),this.spaceId=void 0,this.userId=void 0,this.committed=!1,this.isLocal=!1,this.useSudoMode=void 0,this.isUndoTransaction=void 0,this.isTemplateInstantiationTransaction=void 0,this.deadlockWarningTimeout=void 0,this.operations=[],this.stores=[],this.initialRecordMap=n(388821).RecordMapWithRole.create(),this.debugLogging=void 0,this.debugLog=[],this.invertedOperations=[],this.postPerformAssertions=[],this.preEnqueueActions=[],this.postEnqueueActions=[],this.postSubmitCallbacks=[],this.postCancelCallbacks=[],this.undoStartCallbacks=[],this.newlyCreatedStoresForPermissionInference=new(n(795727).A)({getKey:e=>(0,n(452540).jV)(e)}),this.userAction=void 0,this.userFlow=void 0,this.operation=void 0,this.tags=void 0,this.suggestionDiscussionStore=void 0;const{spaceId:t,userId:o,deadlockTimeoutMs:i,onDeadlockWarning:r,debugLogging:a,isUndoTransaction:s,isTemplateInstantiationTransaction:l}=e;t&&o&&(this.spaceId=t,this.userId=o),r&&(this.deadlockWarningTimeout=window.setTimeout(r,i)),this.debugLogging=a,this.isUndoTransaction=s,this.isTemplateInstantiationTransaction=l}getDebugLog(){return this.debugLog}logDebugMessage(e){var t,n;if(null!==(t=this.debugLogging)&&void 0!==t&&t.collect&&this.debugLog.push({operationsIndex:this.operations.length,message:e}),null!==(n=this.debugLogging)&&void 0!==n&&n.logToConsole){for(var o=arguments.length,i=new Array(o>1?o-1:0),r=1;r<o;r++)i[r-1]=arguments[r];console.log(e,...i)}}isEmpty(){return 0===this.operations.length}annotateWithUserAction(e){this.userAction=e}annotateWithUserFlow(e){this.userFlow=e}annotateWithOperation(e){this.operation=e}annotationWithSuggestionDiscussionStore(e){if(this.suggestionDiscussionStore)throw new(n(416845).yI4)("Already annotated with DiscussionStore");this.suggestionDiscussionStore=e}getSuggestionDiscussionStore(){return this.suggestionDiscussionStore}getUserActionForAnalyticsPurposesOnly(){return this.userAction}getUserFlowForAnalyticsPurposesOnly(){return this.userFlow}getOperationForAnalyticsPurposesOnly(){return this.operation}annotateWithDebugTag(e){this.tags||(this.tags=new Set),this.tags.add(e)}copyDebugTagsFrom(e){if(e.tags)for(const t of e.tags)this.annotateWithDebugTag(t)}getDebugTagsForAnalyticsPurposesOnly(){if(this.tags)return Array.from(this.tags)}cancelDeadlockWarning(){void 0!==this.deadlockWarningTimeout&&(window.clearTimeout(this.deadlockWarningTimeout),this.deadlockWarningTimeout=void 0)}done(e){this.cancelDeadlockWarning();for(const t of this.postSubmitCallbacks)t(e)}}},842989:(e,t,n)=>{n.d(t,{W:()=>o});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(672577);class o{constructor(e,t,n){if(this.maxDepth=void 0,this.start=void 0,this.end=void 0,this.startPathSet=void 0,this.endPathSet=void 0,this.isInStartPath=e=>this.startPathSet.has(e),this.isInEndPath=e=>this.endPathSet.has(e),this.commonAncestor=e,this.startPath=t,this.endPath=n,0===this.startPath.length||0===this.endPath.length)throw new Error(`Cannot create TreeRange with empty path: ${this.startPath} ${this.endPath}`);this.start=this.startPath[this.startPath.length-1],this.end=this.endPath[this.endPath.length-1],this.startPathSet=new Set(t),this.endPathSet=new Set(n),this.maxDepth=Math.max(this.startPath.length,this.endPath.length)}static fromNearestCommonAncestor(e,t){const o=(0,n(708830)._r)(e,t);if(!(o<0))return new this(e[o],e.slice(o),t.slice(o))}getStartBoundary(e){if(e>=this.startPath.length||e<0)return;const t=this.startPath[e];if(0===e&&this.startPath.length<=1&&this.endPath.length<=1)return{parentType:"commonAncestor",parent:t,childrenBeforeRange:[],childrenInsideRange:[],childrenAfterRange:t.children.slice()};const n=t.children.findIndex(this.isInStartPath)+1,o=t.children.findIndex(this.isInEndPath),i=t.children.slice(0,n),r=t.children.slice(n,-1===o?void 0:o+1),a=-1===o?[]:t.children.slice(o+1);return 0===e?{parentType:"commonAncestor",parent:t,childrenBeforeRange:i,childrenInsideRange:r,childrenAfterRange:a}:{parentType:"startPath",parent:t,childrenBeforeRange:i,childrenInsideRange:r}}getEndBoundary(e){if(e>=this.endPath.length||e<0)return;if(0===e)return this.getStartBoundary(0);const t=this.endPath[e],n=t.children.findIndex(this.isInStartPath)+1,o=t.children.findIndex(this.isInEndPath)+1,i=t.children.slice(n,o),r=t.children.slice(o);return{parentType:"endPath",parent:t,childrenInsideRange:i,childrenAfterRange:r}}getAnalagousNodesAtOffset(e){const t=this.startPath.length-1-e,n=this.endPath.length-1-e;return{start:this.getStartBoundary(t),end:this.getEndBoundary(n)}}*iterateAnalogousNodes(){for(let e=0;e<this.maxDepth;e++)yield this.getAnalagousNodesAtOffset(e)}getDeletionAtOffset(e){const{start:t,end:n}=this.getAnalagousNodesAtOffset(e),o=[];t&&t.childrenInsideRange.length>0&&o.push({operation:"delete",deleteFromParent:t.parent,deletingChildren:t.childrenInsideRange});const i=(null==t?void 0:t.parent)||this.commonAncestor;if(i&&n&&n.parent!==this.commonAncestor&&n.parent!==i&&n.childrenAfterRange.length>0){const e=i.children.find(this.isInStartPath);o.push({operation:"move",moveFromParent:n.parent,movingChildren:n.childrenAfterRange,moveToParent:i,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"})}return o}*iterateDeletion(){for(let e=0;e<this.maxDepth;e++)yield*this.getDeletionAtOffset(e)}getInsertionAtOffset(e,t,n){const o=Math.max(0,e.length-1-t),i=e[o],r=e[o+1],{start:a,end:s}=this.getAnalagousNodesAtOffset(t),l=[];if(a&&a.childrenInsideRange.length>0){const e=n.get(i)||r;l.push({operation:"move",moveFromParent:a.parent,movingChildren:a.childrenInsideRange,moveToParent:i,moveToAdjacentSibling:e,moveToDirection:e?"listAfter":"listBefore"});const t=a.childrenInsideRange[a.childrenInsideRange.length-1];n.set(i,t)}const c=this.startPath.length-1-t,d=Math.min(c,this.endPath.length-1),u=this.getEndBoundary(d);if(u&&u.parent!==this.commonAncestor&&i!==e[0]){const e=i.children.indexOf(r)+1,t=i.children.slice(e);if(t.length){const e=0===u.childrenInsideRange.length&&u.childrenAfterRange.length>0,n=e?u.childrenAfterRange[0]:u.childrenInsideRange[u.childrenInsideRange.length-1];l.push({operation:"move",moveFromParent:i,movingChildren:t,moveToParent:u.parent,moveToAdjacentSibling:n,moveToDirection:e?"listBefore":"listAfter"})}}return s&&s.parent!==this.commonAncestor&&s.childrenAfterRange.length>0&&l.push({operation:"delete",deleteFromParent:s.parent,deletingChildren:s.childrenAfterRange}),l}*iterateInsertionAt(e){const t=new Map,n=[];for(let o=0;o<this.maxDepth;o++)n.push(...this.getInsertionAtOffset(e,o,t));yield*n}}},843005:(e,t,n)=>{n.d(t,{c5:()=>T,PE:()=>M,kR:()=>k,sp:()=>C,DZ:()=>y,t3:()=>I});n(18107),n(967357),n(581454),n(296540);var o=()=>n(700500),i=()=>n(496603),r=()=>n(534177),a=()=>n(751156),s=()=>n(938346),l=()=>n(89924),c=()=>n(645873);const d=new(c().O2)("NewPageInMenu",(async()=>Promise.all([n.e(75134),n.e(43380),n.e(58795),n.e(99223),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(92860),n.e(86894),n.e(22900),n.e(49889),n.e(97727),n.e(85128),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(14310),n.e(55927),n.e(7379),n.e(61151),n.e(72226),n.e(48199),n.e(87598),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(58221),n.e(44763),n.e(8081),n.e(67183),n.e(82720),n.e(77465),n.e(1440),n.e(67378),n.e(33194),n.e(29875),n.e(38119),n.e(66268),n.e(95733),n.e(91957),n.e(10252),n.e(45816),n.e(89689),n.e(31061)]).then(n.bind(n,141486)))),u=(0,c().jQ)(d,(e=>e.default));var p=()=>n(855801),m=()=>n(878377),g=()=>n(328732),f=()=>n(792609),v=()=>n(202786),h=()=>n(416726),_=n(474848);const b={column_list:!0,transclusion_container:!0},y=(0,n(959013).YK)({turnIntoSection:{id:"action.section.turnInto",defaultMessage:"Turn into"},newPageInName:{id:"action.pageIn.name",defaultMessage:"Page in"},turnIntoMention:{id:"action.turnIntoMention",defaultMessage:"Turn into mention"}}),S=(0,h().Ls)({key:"new page in section",displayName:y.newPageInName,analyticsName:y.newPageInName.defaultMessage,closeParentMenu:!0,svg:n(47966).Y,hideFromSlashActionMenu:!0,validators:[m().p2L,m().AU6(m().vEP),m().AU6(m().Xjv("page")),m().AU6(m().wHP),f().Y,m().pLL],render:(e,t,n)=>{const{onFocus:o,onAccept:i,extendItemTitle:r,sectionTitle:a}=n;return(0,_.jsx)(u,{...e,title:y.newPageInName,sectionTitle:a??"",showSectionTitle:Boolean(r),blocksToTransform:t.blocks,onFocus:o,onAccept:i?()=>i(S,t,void 0):void 0})},action:e=>{}});function w(e){const{showNewMABIcons:t}=e,n=(0,r().uv)(o().Si),i=n.findIndex((e=>"page"===e)),a=n.map((e=>x(e,t))),s=Object.values(o().sh).map((e=>x(e,t)));return[...a.slice(0,i+1),S,...a.slice(i+1),...s]}function k(e){const{showNewMABIcons:t}=e??{};return(0,h().gy)({key:"turn into actions",title:y.turnIntoSection,render:e=>(0,_.jsx)(l().A,{...e}),actions:w({showNewMABIcons:t})})}const I=k();function x(e,t){const n=g().ry[e],r=b[e];return{key:`turn into ${e}`,displayName:n.displayName,analyticsName:n.analyticsName,analyticsActionType:"turn_block_into",searchName:n.searchName,validators:i().oE([m().p2L,r?void 0:m().pLL,f().Y,"transclusion_container"===e?m().Uo6([m().AU6(m().uAU),A]):void 0,"slide"===e?m().QTI:void 0,(0,o().ZK)(e)?e=>1===e.blocks.length:void 0,(0,o().nH)(e)?e=>!1:void 0,"column_list"===e?e=>{if(!e.blocks)return!1;const t=e.blocks.length;if(t<2||t>5)return!1;const n=e.blocks[0].getParentBlockStore();if(!n)return!1;const o=e.blocks.map((e=>{const t=e.getParentBlockStore();return(null==t?void 0:t.id)!==n.id?-1:n.getRenderableContentIds().indexOf(e.id)}));for(let i=0;i<o.length;i++)if(i>0&&o[i-1]+1!==o[i])return!1;return!0}:void 0,(0,o().D)(e)?()=>!0:void 0,"mermaid_code_block"===e?()=>!1:void 0,"encrypted_text"===e?m().Y4D:void 0]),shortcuts:"transclusion_container"===e?["group"]:void 0,closeParentMenu:!0,action:(0,h().G9)("turn_into",(async(t,n)=>{let{environment:o,blocks:i}=n;const r=await(0,p().zQ)(),{serverCommitResult:s}=a().createAndCommit({userAction:`actionRegistry.turnIntoAction.${e}`,environment:o,canUndo:!0,perform:t=>{r({environment:o,blocks:i,blockType:e,transaction:t})}});s.then(t)})),render:(e,t,o)=>{const{extendItemTitle:i,sectionTitle:r,styles:a}=o,l=C(t,n);return(0,_.jsx)(s().Ay,{...e,...n,title:n.displayName,format:s().og.TurnInto,selected:l,showSectionTitle:Boolean(i),sectionTitle:r??"",desktopTitleStyle:null==a?void 0:a.desktopTitleStyle})},nativeImageReference:()=>(0,h().eW)({thumbnail:!0===t&&n.mobileNativeThumbnail?n.mobileNativeThumbnail():n.thumbnail})}}function A(e){return!(0,v().T)()||m().c5w()&&m().FEq(e)}function C(e,t){const n=e.blocks[0];if(!n)return!1;const o=n.getType()===t.blockType;if(o&&("header"===t.blockType||"sub_header"===t.blockType||"sub_sub_header"===t.blockType)){const e=n.getFormat().toggleable;return!(e&&!t.key.includes("toggle"))&&!(!e&&t.key.includes("toggle"))}return o}const T=(0,h().Ls)({key:"turn to mention",displayName:y.turnIntoMention,analyticsName:y.turnIntoMention.defaultMessage,validators:[m().p2L,m().bdp],closeParentMenu:!0,svg:n(3284).arrowSquarePathUpDownIcon,action:e=>{let{blocks:t,environment:i}=e;const r=t.at(0);null!=r&&r.isType(o().xd.alias)&&n(62287).Ff(i,r)}}),M={key:"convert link",render:e=>(0,_.jsx)(l().A,{...e}),actions:[T]}},843014:(e,t,n)=>{n.d(t,{D:()=>o});const o=(0,n(959013).YK)({notionAI:{id:"ai.sharedMessages.notionAI",defaultMessage:"Notion AI"},getUnlimitedAI:{id:"ai.sharedMessages.getUnlimitedAI",defaultMessage:"Get unlimited AI"},upsellMessage:{id:"ai.sharedMessages.upsell.message",defaultMessage:"You’ve run out of free AI responses. Get the <bold>Notion AI add-on</bold> so that I can answer an unlimited number of questions for you."},upsellMessageV2:{id:"ai.sharedMessages.upsell.messageV2",defaultMessage:"You’ve run out of free AI responses. Upgrade <bold>Notion AI</bold> so that I can answer an unlimited number of questions for you."}})},845489:(e,t,n)=>{n.d(t,{J:()=>a,b:()=>r});n(898992),n(672577);var o=()=>n(496603),i=()=>n(301421);function r(e){const t=i().n.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),n=o().SL(t,(t=>t.props.store===e)),r=t.find(((e,t)=>t>n&&e.props.canInsertText));return null==r?void 0:r.props.store}function a(e){const t=i().n.getMembersByDOMOrder({filter:e=>!e.props.store.inMemoryRecordCache.isMockTextStore}),n=o().SL(t,(t=>t.props.store===e)),r=o().Uk(t,((e,t)=>t<n&&e.props.canInsertText));return null==r?void 0:r.props.store}},845715:(e,t,n)=>{n.d(t,{K:()=>r});var o=()=>n(847249),i=()=>n(322931);function r(e,t){return(0,o().K8)((()=>!(!e||!t)&&(0,i().z)(e,t)),[t,e])}},845955:(e,t,n)=>{n.d(t,{hS:()=>h,o2:()=>_,js:()=>f,Le:()=>v,F6:()=>b});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(581454);var o=()=>n(778078),i=()=>n(496603),r=(n(296540),()=>n(589407)),a=()=>n(89924),s=()=>n(416726),l=n(474848);const c=(0,n(959013).YK)({moreOptions:{id:"action.moreOptions",defaultMessage:"More options"}});var d=()=>n(431404),u=()=>n(508496),p=()=>n(972435);const m=25,g=5;function f(e){const t=p().A.getIntl(),{sections:n,context:f,query:v,shouldShowBlockTypeTitle:h}=e;let y=v.trim().toLowerCase();const S=u().default.checkGate({gateName:"updated_6dot_menu"});y.startsWith("/")&&(y=y.slice(1));const w=_(n,f),k=w.map(((e,n)=>{let{actions:o,title:i}=e;if(e.shouldShowMoreOptions&&o.length>g){const e=function(e){return(0,s().uk)({key:"more options",displayName:c.moreOptions,analyticsName:c.moreOptions.defaultMessage,svg:r().L,validators:[],subActions:()=>[{key:0,title:void 0,render:e=>(0,l.jsx)(a().A,{...e}),actions:e}]})}(o.slice(g));o=[...o.slice(0,g),e]}const u=f.blocks[0];if(u){const e=u.getType();if(h&&e&&0===n){const n=(0,d().Z)(e);n&&(i=t.formatMessage(n))}}return{...e,actions:o,title:i}}));if(!y)return S?k:w;const I=function(e){return e.map((e=>({...e,actions:e.actions.map((t=>{const n=t.searchName||t.displayName||"",o=[n,e.searchTitle||e.title||"",n].join(" ");return{...t,searchName:o}}))})))}(function(e,t){const n=[];for(const o of e){const e={...o,actions:[]};for(const i of o.actions)if(b(i,t))if(i.subActions){const r=_(i.subActions(t),t);if(i.hideSubActions){e.actions.push(i);continue}if(i.collapseSubActionsIntoParent){for(const t of r)for(const n of t.actions)e.actions.push(n);continue}const a=r.map((e=>({...e,key:`${o.key} ${i.key} ${e.key}`,title:e.title||i.displayName,searchTitle:[i.searchName||i.displayName,e.searchTitle||e.title].filter(Boolean).join(" ")})));for(const e of a)n.push(e)}else e.actions.push(i);e.actions.length&&n.push(e)}return n}(n,f)),x=[],A=new Map;for(const o of I)for(const e of o.actions)A.set(e,o),x.push(e);const C=(0,o().Ay)(y,x,(e=>e.searchName||""),{minThreshold:m,getSortScore:e=>-e.score*(e.original.sortScoreMultiplier??1)}),T=new Set(C),M=x.filter((e=>Boolean(e.alwaysShowInSearch)&&!T.has(e))),P=M.filter((e=>"start"===e.alwaysShowInSearch)),B=M.filter((e=>"end"===e.alwaysShowInSearch)),R=i().$z([...P,...C,...B],(e=>{const t=A.get(e);if(t)return t.title})),E=[];for(const o of Object.keys(R)){const e=R[o],t=A.get(e[0]);t&&E.push({...t,actions:e})}return E}function v(e,t){if(!t)return e;let n=0;const o=[];for(const i of e){if(n>=t)break;const e=i.actions.slice(0,t-n);e.length>0&&(n+=e.length,o.push({...i,actions:e}))}return o}function h(e,t){const n=[];for(const o of e){const e=o.actions.filter(t);e.length>0&&n.push({...o,actions:e})}return n}function _(e,t){return h(e,(e=>b(e,t)))}function b(e,t){if(e.validators){return e.validators.every((e=>e(t)))}return!0}},846662:(e,t,n)=>{n.d(t,{X$:()=>u,Z0:()=>d,gV:()=>c});var o=()=>n(700500),i=()=>n(15440),r=()=>n(713998),a=()=>n(797809),s=()=>n(178687),l=()=>n(508496);function c(e){if(!e.isType(o().xd.code))return!1;const t=d(e),n=(0,i().OG)(t),r=u(e);return n&&("preview"===r||"split_view"===r)&&l().default.checkGate({gateName:"resizable_code_block"})}function d(e){const t=e.getProperties()||{},n=r().L3(t.language,a().h5);return n&&(0,i().aN)(n)?n:s().j.defaultLanguage}function u(e){const t=d(e);return(0,i().OG)(t)?e.getFormat().code_preview_format??"split_view":s().j.defaultCodePreviewFormat}},846899:(e,t,n)=>{n.d(t,{B:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("settings",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.30957 15.4814H8.69043C9.25781 15.4814 9.70215 15.1328 9.83203 14.5928L10.1123 13.3828L10.29 13.3145L11.3428 13.9639C11.8213 14.2646 12.3818 14.1895 12.7783 13.7861L13.7354 12.8291C14.1455 12.4258 14.2139 11.8652 13.9131 11.3936L13.2637 10.3477L13.3252 10.1768L14.5352 9.89648C15.0684 9.75977 15.4238 9.31543 15.4238 8.75488V7.4082C15.4238 6.84766 15.0752 6.40332 14.5352 6.2666L13.3389 5.97949L13.2705 5.80176L13.9199 4.75586C14.2207 4.28418 14.1455 3.73047 13.7422 3.31348L12.7852 2.35645C12.3887 1.95996 11.8281 1.88477 11.3564 2.17871L10.3037 2.82129L10.1123 2.74609L9.83203 1.53613C9.70215 0.996094 9.25781 0.647461 8.69043 0.647461H7.30957C6.73535 0.647461 6.29785 0.996094 6.16797 1.53613L5.8877 2.74609L5.69629 2.82129L4.64355 2.17871C4.16504 1.88477 3.60449 1.95996 3.20801 2.35645L2.25098 3.31348C1.84766 3.73047 1.77246 4.28418 2.07324 4.75586L2.72949 5.80176L2.6543 5.97949L1.46484 6.2666C0.917969 6.40332 0.576172 6.84766 0.576172 7.4082V8.75488C0.576172 9.31543 0.924805 9.75977 1.46484 9.89648L2.66797 10.1768L2.73633 10.3477L2.08008 11.3936C1.7793 11.8652 1.85449 12.4258 2.25781 12.8291L3.21484 13.7861C3.61816 14.1895 4.17871 14.2646 4.65039 13.9639L5.70312 13.3145L5.8877 13.3828L6.16797 14.5928C6.29785 15.1328 6.73535 15.4814 7.30957 15.4814ZM7.47363 14.2441C7.35742 14.2441 7.30273 14.1895 7.28223 14.0869L6.87891 12.4053C6.44141 12.3027 6.03125 12.1318 5.69629 11.9199L4.21973 12.8291C4.1377 12.8838 4.05566 12.877 3.9668 12.7949L3.24219 12.0703C3.16699 11.9951 3.16016 11.9131 3.22168 11.8242L4.13086 10.3477C3.93945 10.0264 3.75488 9.61621 3.65234 9.18555L1.96387 8.78223C1.86133 8.76172 1.81348 8.70703 1.81348 8.59082V7.56543C1.81348 7.44238 1.86133 7.39453 1.96387 7.36719L3.65234 6.9707C3.75488 6.5127 3.95312 6.08887 4.11719 5.79492L3.21484 4.3252C3.15332 4.22949 3.15332 4.14746 3.23535 4.06543L3.95996 3.34766C4.04883 3.27246 4.11719 3.25879 4.21973 3.31348L5.68945 4.20898C5.99707 4.02441 6.44824 3.83301 6.87891 3.72363L7.28223 2.04199C7.30273 1.93945 7.35742 1.88477 7.47363 1.88477H8.52637C8.64258 1.88477 8.69727 1.93262 8.71094 2.04199L9.12109 3.7373C9.56543 3.83984 9.96875 4.02441 10.3037 4.21582L11.7734 3.32031C11.876 3.26562 11.9443 3.27246 12.0264 3.35449L12.7578 4.07227C12.8398 4.14746 12.8398 4.22949 12.7783 4.3252L11.876 5.79492C12.04 6.08887 12.2451 6.5127 12.3477 6.9707L14.0293 7.36719C14.1387 7.39453 14.1865 7.44238 14.1865 7.56543V8.59082C14.1865 8.70703 14.1318 8.76172 14.0293 8.78223L12.3408 9.18555C12.2383 9.61621 12.0537 10.0264 11.8691 10.3477L12.7715 11.8242C12.8262 11.9131 12.8262 11.9951 12.751 12.0635L12.0264 12.7949C11.9375 12.877 11.8555 12.8838 11.7734 12.8291L10.2969 11.9199C9.96191 12.1318 9.57227 12.3027 9.12109 12.4053L8.71094 14.0869C8.69727 14.1963 8.64258 14.2441 8.52637 14.2441H7.47363ZM8 10.6621C9.42188 10.6621 10.5908 9.49316 10.5908 8.06445C10.5908 6.64941 9.42188 5.48047 8 5.48047C6.57812 5.48047 5.40234 6.64941 5.40234 8.06445C5.40234 9.49316 6.57129 10.6621 8 10.6621ZM8 9.49316C7.2207 9.49316 6.57812 8.85059 6.57812 8.06445C6.57812 7.29199 7.2207 6.65625 8 6.65625C8.76562 6.65625 9.40137 7.29199 9.40137 8.06445C9.40137 8.84375 8.76562 9.49316 8 9.49316Z"})})},846955:(e,t,n)=>{n.r(t),n.d(t,{adoptionPushAiTourSteps:()=>y,adoptionPushHomeTourSteps:()=>b,adoptionPushInviteTourSteps:()=>_,adoptionPushTemplatesTourSteps:()=>h,default:()=>x,orderedChatWithAiHomeChecklistTourSteps:()=>a,orderedCollaborateTourSteps:()=>s,orderedCreatePageHomeChecklistTourSteps:()=>r,orderedExploreCommunityTemplatesInAppTourSteps:()=>p,orderedExploreCommunityTemplatesTourSteps:()=>u,orderedExploreDocsTemplateTourSteps:()=>l,orderedExploreGettingStartedTemplateTourSteps:()=>m,orderedExplorePersonalTemplateTourSteps:()=>d,orderedExplorePrivateTemplateTourSteps:()=>c,orderedHomeChecklistWorkspaceTourSteps:()=>i,orderedHomeTopbarActionButtonTourSteps:()=>g,orderedTeamSidebarTourSteps:()=>o,orderedTeamWorkflowTemplatesTourSteps:()=>f,orderedVerifyPageTourSteps:()=>v,tourIsActive:()=>w,tourIsActiveInSidebarStep:()=>k});const o=["welcome","actions","teamspaces","prebuilt_templates","private","ai_assistant"],i=["actions","teamspaces","private"],r=["create_page_sidebar","create_page_start_with_title","create_page_type_slash","create_page_beyond_text"],a=["chat_with_ai"],s=["collaborate","collaborate_copy_link","collaborate_add_member"],l=["explore_team_template"],c=["explore_private_template"],d=["explore_personal_template"],u=["explore_templates","browse_templates"],p=["explore_templates"],m=["explore_getting_started_template"],g=["home_topbar_action_button"],f=["teamspaces"],v=["verify_page"],h=["explore_templates"],_=["invite_members"],b=["home"],y=["chat_with_ai"],S=["welcome","actions","teamspaces","prebuilt_templates","private","explore_templates","home","create_page_sidebar","chat_with_ai","explore_team_template"];function w(e){return"inactive"!==e.type}function k(e){return"inactive"!==e.type&&S.includes(e.step)}class I extends(()=>n(757695))().default{getInitialState(){return{type:"inactive"}}dismissTourTutorial(){this.setState({...this.state,type:"inactive"})}isTutorialStepActive(e){return"inactive"!==this.state.type&&this.state.step===e}}const x=new I},847307:(e,t,n)=>{n.d(t,{v:()=>S,C:()=>w});n(898992),n(354520),n(803949),n(581454);var o=()=>n(386164);const i=["2021-05-11","2021-05-13","2021-08-16","2022-02-22","2022-06-28"],r=i[i.length-1];n(377315).CA.literals(...i);var a=()=>n(824862),s=()=>n(798880),l=()=>n(606219),c=()=>n(496603),d=()=>n(559926),u=()=>n(594794),p=()=>n(972435),m=()=>n(351360),g=()=>n(508496),f=()=>n(630116),v=()=>n(449506),h=()=>n(901389),_=()=>n(246826),b=()=>n(751156);const y=(0,n(959013).YK)({webhookUrlError:{id:"webhookActions.webhookUrlError",defaultMessage:"Connection failed. Please wait and try again or try another URL."}});async function S(e){const{environment:t,integration:n,webhookUrl:o,webhookSecret:i,webhookHeaders:g,webhookSubscriptionId:S,onError:w,onSuccess:k=(()=>{})}=e,{currentUserRootStore:I,currentSpaceStore:x}=m().default.state;if(!I||!x)return{error:{success:!1}};const A={};g.map((e=>{const{key:t,value:n}=e;return{key:t.trim(),value:String(n).trim()}})).filter((e=>{let{key:t,value:n}=e;return t&&n})).forEach((e=>{let{key:t,value:n}=e;A[t]=n}));const C={headers:A};if("failed"===(await v().callApi({eventName:"testWebhookConnection",environment:t,data:{integrationId:n.id,webhookUrl:o,webhookSecret:i||void 0,webhookCustomization:C}})).type)return h().f1(p().A.formatMessage(y.webhookUrlError)),{error:{success:!1}};const{serverCommitResult:T}=b().createAndCommit({userAction:"webhookActions.createWebhookSubscription",environment:t,canUndo:!0,perform:p=>{p.postSubmitCallbacks=[w];const g=x.id;if(e.webhookSubscriptionId){const e=m().default.state.currentSpaceStore,r=S&&e?f().Pr.createChildStore(e,{id:S,table:l().TF,spaceId:e.id}):void 0;if(r){const e=r.getWebhookUrl()!==o,a=r.getWebhookSecret()!==i,s=!c().n4(r.getWebhookCustomization(),C);(e||a||s)&&(d().zW(t,{integration_id:n.id,has_updated_webhook_url:e||void 0,has_updated_webhook_secret:a||void 0}),_().zv({transaction:p,data:{webhook_url:o,webhook_secret:i,webhook_customization:C,health:{status:"active"}},store:r}))}}else{const e=(0,u().Z1)({environment:t,table:a().GP,spaceId:g});_().vt({environment:t,table:a().GP,args:{id:e,space_id:g,parent:{table:"space",id:x.id},type:"external",name:n.getName(),icon:n.getInfo().icon,integration_id:n.id,capabilities:n.getCapabilities(),createdBy:{table:s().oo,id:I.id}},inMemoryRecordCache:x.inMemoryRecordCache,transaction:p}),_().vt({environment:t,table:l().TF,args:{id:(0,u().Z1)({environment:t,spaceId:g,table:l().TF}),bot_id:e,space_id:g,parentPointer:{table:"space",id:x.id},createdByPointer:{table:s().oo,id:I.id},api_version:r,webhook_url:o,webhook_secret:i,webhook_customization:C,health:{status:"active"}},inMemoryRecordCache:x.inMemoryRecordCache,transaction:p}),d().dm(t,{integration_id:n.id,configuration_type:"manual",bot_id:e})}}});return await T,k(),{value:{success:!0}}}async function w(e){const t=g().default.checkGate({gateName:"webhooks_beta"}),{environment:n,spaceId:i}=e;if(!n.currentUser.isLoggedIn()||!t)return{webhookSubscriptionIds:[],recordMap:{__version__:3}};const r=await v().callApi({eventName:"getWebhookSubscriptions",environment:n,data:{spaceId:i},headers:(0,o().WS)({cellId:void 0,spaceId:i})});if("failed"===r.type)throw r.error;return r.data}},847463:(e,t,n)=>{n.d(t,{Sk:()=>r,lz:()=>i,vY:()=>a,vs:()=>s});n(944114);var o=()=>n(496603);function i(e){if(0===e.length)return{tasks:[]};const t={tasks:[],userId:e[0].userId};for(const n of e){if(t.userId!==n.userId)return t;const e=JSON.stringify(o().qI(t.tasks,(e=>e.operations))).length;if(e>=s)return 0===t.tasks.length&&t.tasks.push(n),t;t.tasks.push(n)}return t}function r(e){const{transaction:t,timestamp:n,callback:o}=e;return{id:t.id,userId:t.userId,spaceId:t.spaceId,debug:{userAction:t.getUserActionForAnalyticsPurposesOnly(),userFlow:t.getUserFlowForAnalyticsPurposesOnly(),tags:t.getDebugTagsForAnalyticsPurposesOnly()},timestamp:n,operations:t.operations,callback:o,useSudoMode:t.useSudoMode,isUndoTransaction:t.isUndoTransaction,isTemplateInstantiationTransaction:t.isTemplateInstantiationTransaction}}function a(e){const t=r({transaction:e,timestamp:Date.now(),callback:void 0});return JSON.stringify(t).length>s}const s=1e5},847743:(e,t,n)=>{n.d(t,{AI:()=>f,Pe:()=>v});n(814603),n(147566),n(198721);var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(206267),s=()=>n(792071),l=()=>n(179034),c=()=>n(798880),d=()=>n(496603),u=()=>n(498212),p=()=>n(47170),m=()=>n(246125),g=()=>n(630116);function f(e){const{initialValue:t,onChange:n,source:f="title",properties:v}=e,h=(0,p().O)(),_=(0,i().v3)(),b=(0,m().l)("formulaPrototypeHelpers.useMockTextStore",{isMockTextStore:!0,overrideDefaultRecordCache:!0}),y=function(e){const{initialValue:t,inMemoryRecordCache:n,source:r,properties:d,spaceId:p}=e,m=(0,i().v3)(),f=(0,o.useMemo)((()=>t),[]);return(0,o.useMemo)((()=>{const e=m.currentUser.id??u().rN,t={id:a().JW(),table:l().ev},{model:o}=s().zgg.create({createdBy:{id:e,table:c().oo},id:t.id,parentPointer:{id:u().rN,table:l().ev},properties:{[r]:f,...d},space_id:p??u().rN,type:"page"},{useCrdt:!1});n.setModelAndRole({pointer:o.pointer,userId:e},o,"editor");const i=new(g().pm)({environment:m,path:["properties",r],pointer:t,recordStoreOptions:{inMemoryRecordCache:n,userId:e}});return n.emitRecord(t,[]),i}),[d,m,n,f,r,p])}({initialValue:t,inMemoryRecordCache:b,source:f,spaceId:h,properties:v}),S=(0,o.useRef)(t),w=(0,o.useCallback)((e=>{const t=_.currentUser.id,n=y.getRecordStoreAtRootPath();if(n instanceof g().Bv){const o=n.getValue();o&&(b.setRecord({pointer:y.pointer,userId:t},{role:"editor",value:{...o,properties:{...null==o?void 0:o.properties,[f]:e}}}),b.emitRecord(y.pointer,[]))}}),[_.currentUser.id,y,b,f]);return(0,r().K8)((()=>{const e=y.getValue();d().n4(S.current,e)||(S.current=e,null==n||n(e))}),[y,n]),{store:y,setValue:w}}const v=(()=>{try{return"true"===new URLSearchParams(window.location.search).get("disableFormulas")}catch(e){return!1}})()},848237:(e,t,n)=>{n.d(t,{z9:()=>me,mm:()=>Ce,lJ:()=>Ee,qS:()=>ie,Fj:()=>be,pW:()=>Pe,O:()=>De,rU:()=>he,Zd:()=>_e,e2:()=>fe,JC:()=>we,M8:()=>Se,vn:()=>pe,L0:()=>Re,BQ:()=>Ie,fy:()=>ke,P8:()=>ce,Q8:()=>Te,Mh:()=>Be,qH:()=>de,HU:()=>oe,b4:()=>ue,xp:()=>ne,FE:()=>ee,n7:()=>X,WC:()=>J,_B:()=>Me,D6:()=>ae,Nd:()=>re,F2:()=>ye});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(581454),n(737550);var o=()=>n(584262),i=()=>n(945382),r=()=>n(857639),a=()=>n(433847),s=()=>n(68263),l=()=>n(120739),c=()=>n(96689),d=()=>n(854150),u=()=>n(798880),p=()=>n(468006),m=()=>n(502800),g=()=>n(534177),f=()=>n(720665),v=()=>n(701763),h=()=>n(946141),_=()=>n(449506),b=()=>n(901389),y=()=>n(579627),S=()=>n(246826),w=()=>n(857783),k=()=>n(435009),I=()=>n(426116),x=()=>n(955930),A=()=>n(751156),C=()=>n(664713),T=()=>n(186445),M=()=>n(972435),P=()=>n(347199),B=()=>n(953418),R=()=>n(640653),E=()=>n(213525),D=()=>n(45359),N=()=>n(37433),L=()=>n(646736),O=()=>n(578136),U=()=>n(585533),F=()=>n(456663),V=()=>n(632709),j=()=>n(351360),z=()=>n(210737),H=()=>n(630116),W=()=>n(663325),q=()=>n(486130),K=()=>n(224701),G=()=>n(10984),$=()=>n(846955),Y=()=>n(685781),Q=()=>n(134206);var Z=()=>n(947688);function X(e){const{store:t,update:n,transaction:o}=e;S().zv({store:t,data:(0,f().g_)(n),transaction:o})}function J(e){let{environment:t,store:n,update:o,transaction:i}=e;const r=function(e){let{store:t,update:n}=e;const o=t.getSettingsStore().getValue();if(!o)return{};const i={};for(const r in n)i[r]=o[r];return i}({store:n,update:o});S().zv({store:n.getSettingsStore(),data:(0,f().g_)(o),transaction:i}),h().By(t,{store:n,old_settings:r,updated_settings:o})}async function ee(e){let{environment:t,spaceStore:n,addedStores:o,removedStores:i,createNewTeamFlowId:r,from:a}=e;const s=t.currentUser.id;if(!s||o.some((e=>!e.isDefined())))return!1;const l=(0,L().dp)(n,s);if(await l.load(),!l.isWorkspaceOwner())throw new Error("Only admins can update default teams");const{performResult:{results:c},serverCommitResult:d}=A().createAndCommit({environment:t,userAction:"teamActions.updateDefaultTeams",canUndo:!0,perform:e=>{const n=[];for(const i of o){const o=te({environment:t,transaction:e,teamStore:i,isDefault:!0,from:a,createNewTeamFlowId:r});n.push(o)}for(const o of i){const i=te({environment:t,transaction:e,teamStore:o,isDefault:!1,from:a,createNewTeamFlowId:r});n.push(i)}return{results:n}}});return await d,await K().Ow(t),c.every((e=>e))}function te(e){let{environment:t,transaction:n,teamStore:o,isDefault:i,from:r,createNewTeamFlowId:a}=e;if(o.isArchived()&&i)throw new Error("Archived team cannot be set as default team.");return o.isDefault()===i||(S().zv({store:o,data:{is_default:i},transaction:n}),n.postSubmitCallbacks.push((e=>{e||h().ug(t,{store:o,is_default_team:i,create_new_team_flow_id:a,from:r})}))),!0}function ne(e){var t;const{environment:n,teamStore:o,newRole:i,transaction:r,permissionsToClear:a}=e,l=a.map((e=>({...e,role:"none"}))),c=(null===(t=o.getTeamPermission())||void 0===t?void 0:t.role)??"none",d={type:"explicit_team_permission",team_id:o.id,role:i};l.push(d),y().bo({environment:n,store:o,permissionItems:l,transaction:r}),o.isDefault()&&y().bo({environment:n,store:o,permissionItems:[{type:"space_permission",role:i}],transaction:r}),(0,s().p2)(c)||!(0,s().p2)(i)||o.getDisableTeamPageEdits()||J({environment:n,store:o,update:{disable_team_page_edits:!0},transaction:r})}function oe(e){const{environment:t,teamStore:n,newRole:o,transaction:i,permissionsToClear:r}=e,a=r.map((e=>({...e,role:"none"}))),s={type:"explicit_team_guest_permission",team_id:n.id,role:o};a.push(s),y().bo({environment:t,store:n,permissionItems:a,transaction:i})}function ie(e){let{memberInfo:t,teamStore:n,transaction:o,environment:i,permissionRole:r}=e;const s=n.getMembershipDefinedOnTeam();if("member"===t.type)return!1;if(!n.isDefined())return!1;const l=n.getPermissionItems(),c=n.id;if(r&&(0,a().or)({teamValue:{id:c,permissions:l},permissionRole:r}))throw new Error("Cannot set member's permission to be lower than default team permission.");const{userIds:d,groupIds:u}=(0,p().Vv)({membership:s});if("user"===t.entity_type){if(!d.includes(t.user_id))throw new Error("Specified user is not an owner of the team")}else if("group"===t.entity_type&&!u.includes(t.group_id))throw new Error("Specified group is not an owner of the team");let m=!1;if(s.length>0){const e=n.getMembershipDefinedOnTeam().filter((e=>!se(e,t)));m=s.length!==e.length;const r=[{...t,type:"member"},...e];A().applyOperation({store:n,operation:{pointer:n.pointer,path:["membership"],command:"set",args:r},transaction:o}),v().KI(i,{store:n,memberInfo:t,team_role:"member"})}let g=r||"none";const f=(0,p().ST)({id:c,permissions:l});return f&&r===f&&(g="none"),y().bo({environment:i,store:n,permissionItems:[le({memberInfo:t,newRole:g})],transaction:o,skipAnalytics:m})}function re(e){let{environment:t,userId:n,teamStore:o,spaceStore:i,transaction:r,newTeamRole:a}=e;if(!o.isDefined())return!1;const s=o.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===n));return void 0!==s&&(s.type!==a&&(A().applyOperation({store:o,operation:{pointer:o.pointer,path:["membership"],command:"setTeamMembershipItem",args:{entity_type:"user",type:a,user_id:n}},transaction:r}),y().dy({environment:t,spaceStore:i,permissionItems:[{type:"user_permission",role:"read_and_write",user_id:n}],transaction:r}),ce({environment:t,memberInfo:s,teamStore:o,transaction:r}),!0))}function ae(e){let{environment:t,memberInfo:n,teamStore:o,transaction:i}=e;if("owner"===n.type)return!1;if(!o.isDefined())return!1;const r=o.getMembershipDefinedOnTeam().filter((e=>!se(e,n))),a=[{...n,type:"owner"},...r];return A().applyOperation({store:o,operation:{pointer:o.pointer,path:["membership"],command:"set",args:a},transaction:i}),v().KI(t,{store:o,memberInfo:n,team_role:"owner"}),ce({environment:t,memberInfo:n,teamStore:o,transaction:i}),!0}function se(e,t){return"user"===e.entity_type&&"user"===t.entity_type?e.user_id===t.user_id:"group"===e.entity_type&&"group"===t.entity_type&&e.group_id===t.group_id}function le(e){let{memberInfo:t,newRole:n}=e;return"user"===t.entity_type?{type:"user_permission",user_id:t.user_id,role:n}:{type:"group_permission",group_id:t.group_id,role:n}}function ce(e){let{environment:t,memberInfo:n,teamStore:o,transaction:i}=e;return!!o.getPermissionItems()&&(y().bo({environment:t,store:o,permissionItems:[le({memberInfo:n,newRole:"none"})],transaction:i}),!0)}async function de(e){let{store:t,environment:n,accessLevel:o,teamName:i,from:r,isDefault:a}=e;const{currentSpaceStore:s}=j().default.getState();if(!s)throw new Error("currentSpaceStore does not exist");const l=t.isDefault()??!1,c=t.getTeamAccessLevel(),d=(0,p().gm)({membership:t.getRawMembership()}).length;if(o===c&&a===l)return!1;if(!(await E().oP({teamName:i,accessLevel:o,currentIsDefault:l,isDefault:a,numberOfTeamGuests:d})))return!1;const u=t.getPermissionItems(),m=t.getSettingsStore().getValue();if(!m||!u)return!1;const g=(0,p().gP)({teamValue:{id:t.id,permissions:u,settings:m},accessLevel:o,isDefault:a}),{performResult:{result:f}}=A().createAndCommit({userAction:"teamActions.setTeamAccessLevel",environment:n,canUndo:!0,perform:e=>{te({environment:n,transaction:e,teamStore:t,isDefault:"invite_only"!==g.settings.space_member_join_access&&a,from:r,createNewTeamFlowId:void 0});const o=y().bo({environment:n,store:t,permissionItems:g.permissions,transaction:e});return S().zv({store:t.getSettingsStore(),data:g.settings,transaction:e}),{result:o}}});return f&&h().xZ(n,{store:t,old_access_level:c,new_access_level:o,from:r}),f}function ue(e){let{memberInfo:t,teamStore:n,transaction:o,environment:i,permissionRole:r}=e;if("owner"===t.type)return ie({memberInfo:t,teamStore:n,transaction:o,environment:i,permissionRole:r});if(!n.isDefined())return!1;const s=n.id,l=n.getPermissionItems();if(r&&(0,a().or)({teamValue:{id:s,permissions:l},permissionRole:r}))throw new Error("Cannot set member's permission to be lower than default team permission.");const c="user"===t.entity_type&&n.isMemberOrGuest(t.user_id,new Set),d="group"===t.entity_type&&n.getRawMembership().some((e=>"group"===e.entity_type&&e.group_id===t.group_id));if(!c&&!d)throw new Error("Specified memberInfo not found on team");let u=r||"none";const m=(0,p().ST)({id:s,permissions:l});return m&&r===m&&(u="none"),y().bo({environment:i,store:n,permissionItems:[le({memberInfo:t,newRole:u})],transaction:o})}function pe(e,t){F().A.setState({...F().A.state,open:!0,from:e}),F().A.state.onClose=null==t?void 0:t.onClose}async function me(e){let{environment:t,currentSpaceStore:n,teamStore:o,from:i,action:r}=e;const a=t.currentUser.id;if(!a||!n||!(0,Y().j)({userId:a,spaceStore:n,entrypoint:i}))return!1;if(!(await async function(e){return!Z().A.state.open&&await new Promise((t=>{Z().A.setState({open:!0,type:e,onAccept:()=>t(!0),onCancel:()=>t(!1)})}))}(r)))return!1;const s=await _().callApi({eventName:"setAdminPrivilegedTeamMembership",environment:t,data:{spaceId:n.id,teamId:o.id,teamRole:ge(r)}});if("failed"===s.type)return De(s),!1;switch(r){case"joinTeamAsOwner":case"joinClosedOrPrivateTeamAsMember":ve({environment:t,teamStore:o,from:i,newRole:"joinTeamAsOwner"===r?"owner":"member",usingAdminPrivileges:!0,andNavigateToTeamHome:!1});break;case"upgradeToOwner":v().KI(t,{memberInfo:{entity_type:"user",user_id:a,type:"member"},team_role:"owner",store:o});const e=o.getName();e&&(0,D().vH)(e);break;default:(0,g().HB)(r)}return!0}function ge(e){switch(e){case"joinTeamAsOwner":case"upgradeToOwner":return"owner";case"joinClosedOrPrivateTeamAsMember":return"member";default:(0,g().HB)(e)}}async function fe(e){let{environment:t,currentSpaceStore:n,teamStore:o,from:i,andNavigateToTeamHome:r}=e;const a=t.currentUser.id;if(!a)return!1;const s=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:n.id,teamId:o.id,newMembersOrGuestsToAdd:[{type:"member",entity_type:"user",user_id:a}]}});return"failed"===s.type?(De(s),!1):(ve({environment:t,teamStore:o,from:i,newRole:"member",usingAdminPrivileges:!1,andNavigateToTeamHome:r}),!0)}function ve(e){let{environment:t,teamStore:n,from:o,newRole:i,usingAdminPrivileges:r,andNavigateToTeamHome:a}=e;const s=t.currentUser.id,l=j().default.state.currentSpaceStore,c=j().default.state.currentSpaceViewStore;if(!s||!l||!c)return!1;!function(e){var t;let{environment:n,currentSpaceViewStore:o,teamId:i}=e;const r=null===(t=(0,T().rp)(n).state)||void 0===t?void 0:t.userJoinedTeamsStores;if(!r||!o)return!1;const a=[...r.map((e=>{let{id:t}=e;return t})).filter((e=>e!==i)),i];x().br({environment:n,currentSpaceViewStore:o,orderedTeamIds:a,userAction:"TeamBrowserOutliner",isExplicitUserAction:!1})}({environment:t,currentSpaceViewStore:c,teamId:n.id}),h().vo(t,{store:n,joined_role:i,from:o}),C().Z({environment:t,userId:s,spaceId:l.id});const d=n.getName();a?(Re({environment:t,teamStore:n,shouldScroll:!1}),d&&new Promise((e=>setTimeout(e,500))).then((()=>{(0,D().VV)({teamName:d,usingAdminPrivileges:r})}))):d&&(0,D().VV)({teamName:d,usingAdminPrivileges:r})}async function he(e){let{environment:t,teamId:n,spaceId:o,teamUserInfo:i,isSettingDefaultTeam:r,inviterId:a}=e;const s=t.currentUser.id;if(!o||!s)return!1;return"failed"!==(await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:o,teamId:n,newMembersOrGuestsToAdd:[i],isSettingDefaultTeam:r,addNewMembersToSpace:!1},userId:a})).type}async function _e(e){let{environment:t,teamStore:n,teamMemberInfos:o,isSettingDefaultTeam:i,createNewTeamFlowId:r}=e;const a=n.getSpaceId();if(!a)return!1;const s=t.currentUser.id;if(!a||!s)return!1;if("failed"===(await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:a,teamId:n.id,newMembersOrGuestsToAdd:o,isSettingDefaultTeam:i,addNewMembersToSpace:(0,G().El)()},userId:s})).type)return!1;if(!i){const e=o.flatMap((e=>"user"!==e.entity_type?[]:e.user_id)),i=e.length,a=o.filter((e=>"group"===e.entity_type)).length;i>0&&h().PA(t,{store:n,num_members_invited:i,create_new_team_flow_id:r,members_invited:e}),a>0&&h().En(t,{store:n,num_groups_invited:a,create_new_team_flow_id:r})}return!0}function be(e){switch(e){case"team_browser":case"duplicate_team":case"create_team_from_page":case"permission_item":case"teams_dropdown_for_team_guest":case"teams_dropdown_for_team_member":case"teams_dropdown_for_group":case"teamSidebar":case"teamBrowserSearch":case"teamBrowserUnjoinedTeams":case"teamBrowserJoinedTeams":case"team_breadcrumb_popup":case"team_menu_header":case"sidebar_team_modal":case"team_invite_link":case"teams_dropdown_space_settings_people":case"share_menu":case"team_home":case"team_home_more_menu":case"team_home_topbar":return!1;case"manage_teams_table":case"team_settings_members":return!0;default:(0,g().HB)(e)}}function ye(e){let{environment:t,teamId:n,tab:o,from:i,buttonPopupStore:r}=e;const a=j().default.state.currentSpaceStore;if(!a)return;const s=H().h4.createChildStore(a,{table:d().yK,id:n});if(s.canRead())V().A.update((e=>({...e,open:!0,tab:o,teamStore:s,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!1})));else{const e=Se({environment:t,spaceStore:a,teamId:n,from:i});if(!e)return;V().A.update((t=>({...t,open:!0,tab:o,unjoinedPrivateTeamStore:e,viewingUnjoinedPrivateTeamAsEnterpriseAdmin:!0})))}r&&(z().A.removeNamedPopup("team_more_actions"),r.setState({...r.state,open:!1}))}function Se(e){var t;let{environment:n,spaceStore:o,teamId:r,from:a}=e;if(!be(a))return;const s=o.getModel(),l=null===(t=j().default.state.currentUserStore)||void 0===t?void 0:t.id;if(!l)return;const c=(0,L().dp)(o,l).getModel();if(!(0,i().fK)({space:s,spaceUser:c}))return;const d=Q().A.createTeamStoreFromCache({environment:n,teamId:r,spaceId:o.id,userId:l}),u=null==d?void 0:d.getModel(),m=q()._.getSpacePermissionGroupIds({userId:l,spaceId:o.id});return null!=d&&d.canRead()&&u&&(0,p().tr)({spaceUserModel:c,teamModel:u,spaceModel:s,userPermissionGroups:m,userId:l})?d:void 0}async function we(e){let{environment:t,teamStore:n,from:o,userGroupsInTeam:i}=e;const r=t.currentUser.id;return!!r&&await ke({environment:t,teamStore:n,userId:r,from:o,userGroupsInTeam:i})}async function ke(e){let{environment:t,teamStore:n,userId:o,from:i,userGroupsInTeam:r}=e;const a=n.getSpaceId();if(!n.isDefined()||!t.currentUser.id||!a)return!1;const{ownerUserIds:s,ownerGroupIds:l}=n.getAllOwnerIds(),c=s.length+l.length===1,d=s[0]===o;if(d&&c)return E().$y(),!1;if(void 0===n.getRawMembership().find((e=>"user"===e.entity_type&&e.user_id===o)))return E().yu(r),!1;const p=H().sk.createChildStore(n,{table:u().oo,id:o}),m=o===t.currentUser.id,g=n.getName()??"",f=p.getDisplayName(M().A.getIntl());if(!(await E().Lc({isCurrentUser:m,teamName:g,memberName:f})))return!1;const v=[{entity_type:"user",type:d?"owner":"member",user_id:o}],b=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:a,teamId:n.id,existingMembersOrGuestsToRemove:v}});return"failed"===b.type?(De(b),!1):(h().o$(t,{store:n,is_leaving_team:m,num_members_removed:v.length,from:i}),r.length>0?m?(0,D().hX)(g,r):(0,D().WE)(f,g,r):m&&(0,D().fE)(g),C().Z({environment:t,userId:o,spaceId:a}),!0)}function Ie(e){let{environment:t,teamStore:n,group:o}=e;const i=n.getSpaceId();if(!i)return;const r=n.getRawMembership().find((e=>"group"===e.entity_type&&e.group_id===o.group_id));if(!r)return;const{ownerUserIds:a,ownerGroupIds:s}=n.getAllOwnerIds(),l=a.length+s.length===1;if(1===s.length&&s[0]===o.group_id&&l)return(0,E().SM)(),!1;E().g8({group:o,onAccept:async()=>{const e=[r],o=await _().callApi({eventName:"updateTeamMembers",environment:t,data:{spaceId:i,teamId:n.id,existingMembersOrGuestsToRemove:e}});"failed"!==o.type?h().fx(t,{store:n,num_groups_removed:e.length}):De(o)}})}function xe(e){return{archived_by:e,archived_at:Date.now(),is_default:!1}}function Ae(e){const t=(0,p().ZF)({numDefaultActiveTeams:(0,N().getDefaultActiveTeamCount)(),teamAccessLevel:e.getTeamAccessLevel()});return(0,p().nT)({isDefault:t})}async function Ce(e){const{currentSpaceStore:t,currentSpaceViewStore:n}=j().default.getState();if(!t)throw new Error("currentSpaceStore does not exist");if(!n)throw new Error("currentSpaceViewStore does not exist");const{environment:o,teamStore:i,from:r}=e,l=o.currentUser.id,d=i.getName()||"",u=t.getSettingsStore();if(!l)return;const p=await(0,R().Pu)({environment:o,spaceId:t.id})??1,m=(0,a().z8)({userId:l,teamsThatUserIsANonGuestMemberOf:n.getNonGuestTeamsStores().map((e=>e.getModel())).filter(g().O9),spaceMembersCount:p});if(await E().kq(d,m)){if(m){const e=await E().f1(d);A().createAndCommit({userAction:"teamsHelpers.archiveLastTeam",environment:o,canUndo:!0,perform:n=>{if(X({store:i,update:xe(l),transaction:n}),S().zv({store:u,data:{is_teams_enabled:!1},transaction:n}),I().uK({planType:"personal",spaceStore:t,transaction:n}),e){const e=i.getTeamPagesStores()??[];for(const o of e){const e=o.getRole();if(!e)continue;const i={type:"user_permission",user_id:l,role:e},r=[...o.getPermissionItems().filter((e=>!s().eu(e)&&!s().T6(e)&&!s().Lg(e))),i];S().zv({store:o,data:{parent_id:t.id,parent_table:c().NX,permissions:r},transaction:n})}S().zv({store:i,data:{team_pages:[]},transaction:n})}}}),h().yB(o,{store:i,from:r})}else A().createAndCommit({userAction:"teamsHelpers.archiveTeam",environment:o,canUndo:!0,perform:e=>{X({store:i,update:xe(l),transaction:e})}});h().NB(o,{store:i,from:r}),(0,$().tourIsActiveInSidebarStep)($().default.state)&&$().default.setState({type:"inactive"}),V().A.setState({open:!1,limitMembers:!0,memberFilterQuery:"",tab:void 0}),(0,D().eh)(d)}}async function Te(e){let{environment:t,teamStore:n,teamName:o,from:i}=e;const{currentSpaceStore:r}=j().default.getState();if(!r)throw new Error("currentSpaceStore does not exist");if(!(0,N().getCanRestoreTeam)(n))throw new Error("Cannot restore archived, non-open team with no active default team");if(r.isTeamsEnabled())A().createAndCommit({userAction:"teamsHelpers.restoreArchivedTeam",environment:t,canUndo:!0,perform:e=>{X({store:n,update:Ae(n),transaction:e})}});else{const e=await async function(e){let{environment:t,existingTeamStore:n}=e;const{currentSpaceStore:o}=j().default.getState();if(!o)throw new Error("currentSpaceStore does not exist");const i=o.id,r=await _().callApi({eventName:"enableTeams",environment:t,data:{spaceId:i,existingTeamId:n.id}});return"failed"===r.type?(De(r),!1):(h().b0(t,{spaceId:i,store:n,flowId:""}),!0)}({environment:t,existingTeamStore:n});if(!e)return}h().Rt(t,{store:n,from:i}),(0,D().cO)(o)}async function Me(e){let{settingName:t,newTeamSettingValue:n,spaceSettingValue:o,environment:i,store:r}=e;let a=!0;return"disable"===o&&"allow"===n?a=await E().CE(t):"disable"===n&&(a=await E().Kb(t)),!!a&&(A().createAndCommit({userAction:"teamsHelpers.changeTeamSetting",environment:i,canUndo:!0,perform:e=>{J({environment:i,store:r,update:{[t]:"disable"===n},transaction:e})}}),!0)}function Pe(e){return`TeamToggle_${e.id}`}function Be(e){let{teamStore:t,environment:n}=e;if(n.device.isMobile)return;const o=Pe(t),i=U().A.findDropTargetFromKey(o);if(i){const e=i.getNode();if(!(e instanceof HTMLElement))return;if(P().A.SidebarScroller){var r;const o=(null===(r=P().A.SidebarScroller.getNode())||void 0===r?void 0:r.offsetTop)||0,i=P().A.SidebarScroller.getNode();B().VG({element:i,environment:n,options:{top:e.offsetTop-o,left:0,behavior:"smooth"}}),W().A.setState(t.id),setTimeout((()=>{W().A.state===t.id&&W().A.setState(void 0)}),1500)}}}function Re(e){const{environment:t,teamStore:n,shouldScroll:i}=e;if(i&&Be({teamStore:n,environment:t}),(0,O().D)({isMobileNative:t.device.isMobileNative}))k().oo({environment:t,url:(0,l().a)({teamId:n.id,pageVisitSource:o().y8.JoinTeam})});else{const e=n.getTeamPagesStores();if(!e||e.length<1)return;w().uK({environment:t,store:e[0],pageVisitSource:o().y8.JoinTeam})}h()._L(t,{store:n})}function Ee(e){let{environment:t,from:n,teamStore:o}=e;const{state:i}=F().A;var r,a;(h().w_(t,{screen:i.screen,team_id:i.teamId,team_has_icon:Boolean(i.icon),team_has_name:Boolean(i.name),team_has_description:Boolean(i.description),team_access_level:i.accessLevel,flow_id:i.flowId,from:n,store:o}),i.teamId)&&(null===(r=(a=F().A.state).onClose)||void 0===r||r.call(a,i.teamId));F().A.reset()}function De(e){b().Qg(e),r().log({level:"error",from:"teamActions",type:"TeamApiError",error:(0,m().convertErrorToLog)(e.error),data:{miscDataToConvertToString:{body:e.body,status:e.status}}})}},848259:(e,t,n)=>{n.d(t,{DK:()=>L,DN:()=>j,EV:()=>q,Gj:()=>P,Hd:()=>h,K4:()=>y,KN:()=>H,L_:()=>I,R0:()=>m,WP:()=>E,Xl:()=>T,ZP:()=>_,_P:()=>D,bl:()=>v,cZ:()=>R,e0:()=>N,fP:()=>U,gI:()=>A,iE:()=>z,jD:()=>M,mF:()=>b,nR:()=>V,nW:()=>F,o1:()=>O,oy:()=>f,pQ:()=>C,s$:()=>x,sL:()=>g,tm:()=>W,uK:()=>w,xd:()=>B,zP:()=>S});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949);var o=()=>n(110750),i=()=>n(244309),r=()=>n(534177),a=()=>n(212326),s=()=>n(441199),l=()=>n(644914),c=()=>n(508496),d=()=>n(606846),u=()=>n(572080),p=()=>n(989423);function m(e){k({...e,target:"archive"})}function g(e){k({...e,target:"unarchive"})}function f(e){k({...e,target:"mark_as_read"})}function v(e){k({...e,target:"mark_as_unread"})}function h(e){k({...e,target:"frame"})}function _(e){k({...e,target:"open_reply_menu"})}function b(e){k({...e,target:"open_automation_view_all_notifications_menu"})}function y(e){k({...e,target:"open_automation_view_error_raised_notification"})}function S(e){let{environment:t,pageId:n,isCurrentlyFollowing:o,from:i,notificationId:r}=e;p().vd(t,"click_page_updates_notifications_button",{pageId:n,isCurrentlyFollowing:o,from:i,notificationId:r})}function w(e){let{environment:t,backlinkPageId:n,notificationId:o,alreadyRead:i,activity:r,tab:a}=e;k({environment:t,target:"title",notificationId:o,alreadyRead:i,activity:r,tab:a,otherArgs:{backlinkPageId:n}})}function k(e){let{environment:t,target:n,notificationId:o,alreadyRead:r,activity:a,tab:s,otherArgs:l}=e;x({environment:t,target:n});const c=d().Ay.state.sessionId;V(t,{target:n,notification_id:o,activity_id:a.id,tab:s,sessionId:c,is_filtered:d().Ay.isFilteredToUnreadOnly(),...l}),o&&i().v(p().ik(t),{alreadyRead:r,notificationId:o,activityId:a.id,from:n,sessionId:c})}function I(e){const t=d().Ay.state.sessionId;t&&(p().vd(e,"close_sidebar_updates",{sessionId:t,tab:M()}),d().Ay.endSession())}function x(e){let{environment:t,target:n}=e,o=!1;switch(n){case"title":case"body":o=!0;break;case"archive":case"unarchive":case"mark_as_read":case"mark_as_unread":case"add_reaction":case"remove_reaction":case"open_reply_menu":case"open_automation_view_all_notifications_menu":case"open_automation_view_error_raised_notification":case"frame":case"main":case"approve_request_access":case"deny_request_access":o=!1;break;default:(0,r().HB)(n)}o&&I(t)}function A(e){let{environment:t,from:n}=e;const i=(0,o().Xz)(t.TabbedRouterStore.state);var r;"web"===(r=i).type&&"nativeTab"===r.route.name&&"updates"===r.route.tab&&C({environment:t,from:n})}function C(e){let{environment:t,forceRestartSession:n,from:o}=e;d().Ay.startSession({forceRestart:n??!1}),function(e,t){c().default.logEvent("open_sidebar_updates",t.tab,t),p().vd(e,"open_sidebar_updates",{...t,...(0,l().hX)({environment:e})})}(t,{tab:M(),unread_notifications_count:u().j0(),sessionId:d().Ay.state.sessionId,from:o})}function T(e){let{environment:t,activityUpdatesSource:n,filters:o,prevFilters:i}=e;p().vd(t,"update_notification_filters",{source:n,prev_date_range_filter_start:i.dateRange.start,prev_date_range_filter_end:i.dateRange.end,prev_activity_types:i.activityTypes,date_range_filter_start:o.dateRange.start,date_range_filter_end:o.dateRange.end,activity_types:o.activityTypes})}function M(){const e=d().Ay.state.currentTab;switch(e){case"mentions":return"mentions_comments";case"archive":return"archive";case"allPages":return"all_updates";default:(0,r().HB)(e)}}function P(e){let{environment:t,action:n,args:o}=e;p().vd(t,"push_notification_desktop",{...o,action:n})}function B(e,t){const n={...t,onlyRead:"read"===t.readFilter,sessionId:d().Ay.state.sessionId};c().default.logEvent("archive_all_notifications",t.readFilter,n),p().vd(e,"archive_all_notifications",n)}function R(e){c().default.logEvent("mark_all_notifications_as_read"),p().vd(e,"mark_all_notifications_as_read",{sessionId:d().Ay.state.sessionId})}function E(e){let{environment:t,auto_loaded:n}=e;d().Ay.startSession({forceRestart:!0});const o={tab:a().dl(),unread_notifications_count:u().j0(),sessionId:d().Ay.state.sessionId,from:"inbox",auto_loaded:n,...(0,l().hX)({environment:t})};c().default.logEvent("open_sidebar_updates",a().dl(),o),p().vd(t,"open_sidebar_updates",o)}function D(e){let{environment:t}=e;const n=d().Ay.state.sessionId;n&&(p().vd(t,"close_sidebar_updates",{tab:a().dl(),sessionId:n}),d().Ay.endSession())}function N(e){k({...e,target:"main"})}function L(e,t){p().vd(e,"toggle_inbox_tab",{...t,sessionId:d().Ay.state.sessionId})}function O(e,t){p().vd(e,"click_expand_replies",{...t,sessionId:d().Ay.state.sessionId})}function U(e){p().vd(e,"open_notification_settings_from_all_updates")}function F(e){p().vd(e,"open_page_updates")}function V(e,t){p().vd(e,"click_update",{...t,tab:"homeTile"===t.tab?"homeTile":a().dl(),view_type:s().default.state.mode})}function j(e,t){const{target:n,...o}=t;let i;"notify_mobile"===n?i="set_mobile_notification":"notify_desktop"===n?i="set_desktop_notification":"notify_email"===n?i="set_email_notification":"notify_email_always"===n?i="set_email_always_notification":"notify_email_digest"===n?i="set_email_digest_notification":"notify_home_digest_email"===n?i="set_home_digest_email_notification":"notify_slack_mention"===n?i="set_slack_mention_notification":"notify_slack_all_activity"===n?i="set_slack_all_activity_notification":(0,r().HB)(n),p().vd(e,i,o)}function z(e){p().vd(e,"set_marketing_emails_preferences")}function H(e,t){p().vd(e,"follow_page",t)}function W(e,t){p().vd(e,"unfollow_page",t)}function q(e,t){p().vd(e,"update_page_follow_settings",t)}},848776:(e,t,n)=>{n.d(t,{U:()=>r,y:()=>a});var o=()=>n(757695),i=()=>n(763884);class r{constructor(e,t){this.nextVersion=1,this.keyFn=void 0,this.promiseMap=void 0,this.versionMap=void 0,this.storeMap=void 0,this.fetchFn=void 0,this.fetch=async(e,t,n)=>{const o=this.keyFn(t),i=this.nextVersion++;this.versionMap[o]=i;const r=await this.fetchFn(e,t,n);return this.versionMap[o]!==i?this.promiseMap[o]:(this.storeMap[o].setState(r),r)},this.storeMap={},this.promiseMap={},this.versionMap={},this.fetchFn=t,this.keyFn=e}getData(e,t){var n;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=this.keyFn(t);return i&&(this.promiseMap[r]=void 0),this.storeMap[r]??=o().default.createValue(void 0),this.promiseMap[r]??=this.fetch(e,t,i),null===(n=this.storeMap[r])||void 0===n?void 0:n.state}awaitData(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=this.keyFn(t);return n&&(this.promiseMap[i]=void 0),this.storeMap[i]??=o().default.createValue(void 0),this.promiseMap[i]??=this.fetch(e,t,n),this.promiseMap[i]}resetData(e,t){const n=this.keyFn(t),o=this.storeMap[n];if(o&&o.listenerCount()>0){const o=this.fetch(e,t,!0);return this.promiseMap[n]=o,o.then((()=>{}))}return this.promiseMap[n]=void 0,Promise.resolve(void 0)}TEST_ONLY__setData(e,t){const n=this.keyFn(e);this.promiseMap[n]=Promise.resolve(t),this.storeMap[n]??=o().default.createValue(void 0),this.storeMap[n].setState(t)}TEST_ONLY__getData(e){var t;const n=this.keyFn(e);return null===(t=this.storeMap[n])||void 0===t?void 0:t.state}TEST_ONLY__hasData(e){const t=this.keyFn(e);return void 0!==this.storeMap[t]}TEST_ONLY__addListener(e,t){const n=this.keyFn(e);this.storeMap[n]??=o().default.createValue(void 0),this.storeMap[n].addListener(t)}}async function a(e){let{environment:t,namespace:n,key:o,getValue:r,forceRefetch:a}=e;const s=t.currentUser.id,l=`{${n}}:${o}`;a&&i().K.set({userId:t.currentUser.id,key:l,value:null});const c=i().K.get({userId:s,key:l});if(c)return c;const d=await r();return i().K.set({userId:t.currentUser.id,key:l,value:d}),d??void 0}},849839:(e,t,n)=>{n.d(t,{K:()=>qe,W:()=>be});n(898992),n(354520),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(790748),a=()=>n(847249),s=()=>n(40845),l=()=>n(100622),c=()=>n(821062),d=()=>n(534177),u=()=>n(645873);const p=new(u().O2)("SpreadsheetPrototype",(()=>n.e(87543).then(n.bind(n,185608))));(0,u()._h)(p,(e=>e.SpreadsheetPrototypeNotInProd));var m=()=>n(199896),g=()=>n(38337),f=()=>n(753199),v=()=>n(891078),h=()=>n(472090),_=()=>n(980914);const b=18;class y extends(()=>n(757695))().default{getInitialState(){return{}}setTemporaryFormat(e){this.update((t=>({...t,temporaryFormat:e})))}updateColumnOrder(e){this.update((t=>({...t,temporaryFormat:{...t.temporaryFormat,table_block_column_order:e}})))}}const S=y;var w=()=>n(671363),k=()=>n(3020),I=()=>n(709219),x=()=>n(401497),A=()=>n(959013),C=()=>n(284371),T=()=>n(751156),M=()=>n(704152),P=()=>n(760217),B=()=>n(406699),R=()=>n(939740),E=()=>n(8980),D=()=>n(946548),N=()=>n(859428),L=()=>n(962730),O=()=>n(732770),U=()=>n(502438),F=()=>n(919878),V=()=>n(450519),j=n(474848);const z=o.forwardRef((function(e,t){var o;const{simpleTableStore:r,rootSizeObserver:s,offset:l,hoverSizeObserver:c}=e,d=(0,i().v3)(),u=(0,x().DP)(),p=(0,a().K8)((()=>n(695625).T.findScrollToSelectableFromStore(r)),[r]),m=null==p||null===(o=p.getNode())||void 0===o?void 0:o.getBoundingClientRect(),g=(0,a().K8)((()=>s.rect.state.width),[s]),v=(0,a().K8)((()=>c.rect.state.width),[c]),h=(0,a().K8)((()=>Math.min((null==m?void 0:m.width)||0,g,v)+l),[m,g,v,l]);return m?(0,j.jsx)("div",{style:{width:0,position:"absolute",insetInlineStart:h,zIndex:85,...e.style},onMouseDown:f().tr,ref:t,children:(0,j.jsx)("div",{style:W(u),children:(0,j.jsxs)("div",{style:{display:"flex"},dir:"ltr",children:[(0,j.jsx)(N().A,{placement:L().W.Top,render:e=>(0,j.jsx)(M().A,{...e,style:q(u),onClick:()=>{T().createAndCommit({userAction:"SimpleTableActionBar.ActionBarContent",environment:d,canUndo:!0,perform:e=>{F().uT({simpleTableStore:r,parentWidth:c.rect.state.width,transaction:e})}})},children:(0,j.jsx)(E().I,{icon:n(665589).l})}),renderTooltip:()=>(0,j.jsx)(A().sA,{defaultMessage:"Fit table to page width",id:"simpleTable.actionBar.fitToPage"})}),(0,j.jsx)(B().Ay,{popupType:B().z7.Popup,originGap:4,renderOrigin:e=>(0,j.jsxs)(M().A,{style:q(u),...e,children:[(0,j.jsx)(A().sA,{id:"simpleTable.actionBar.options",defaultMessage:"Options"}),(0,n(668725).b)({width:10,fill:u.mediumIconColor,marginLeft:4})]}),render:()=>(0,j.jsx)(H,{simpleTableStore:r})}),(0,j.jsx)(n(496889).A,{store:r,fadeIn:!1,style:{display:"flex",justifyContent:"center",alignSelf:"center",width:30,height:void 0,padding:"9px 8px"},iconStyle:{fill:u.text.primary}})]})})}):null}));function H(e){const{simpleTableStore:t}=e,o=(0,i().v3)(),r=[{key:"header row",action:()=>{T().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:o,canUndo:!0,perform:e=>{F().uC({simpleTableStore:t,transaction:e})}})},render:e=>(0,j.jsx)(P().A,{...e,icon:(0,j.jsx)(E().I,{icon:n(464291).p}),title:(0,j.jsx)(A().sA,{id:"action.columnHeader.title",defaultMessage:"Header row"}),right:(0,j.jsx)(D().A,{on:_().uq(t).headerRow||!1,onClick:e.onClick})})},{key:"header column",action:()=>{T().createAndCommit({userAction:"SimpleTableActionBar.menuItems",environment:o,canUndo:!0,perform:e=>{F().Qg({simpleTableStore:t,transaction:e})}})},render:e=>(0,j.jsx)(P().A,{...e,icon:(0,j.jsx)(E().I,{icon:n(696575).X}),title:(0,j.jsx)(A().sA,{id:"SimpleTableActionBar.action.rowHeader.title",defaultMessage:"Header column"}),right:(0,j.jsx)(D().A,{on:_().uq(t).headerColumn||!1,onClick:e.onClick})})}];return(0,j.jsx)(n(928600).A,{menuType:n(722872).gu.Popup,width:240,maxHeight:o.device.isMobile?70:void 0,children:(0,j.jsx)(R().Ay,{type:R().Oh.Vertical,sections:[{key:"appearance section",render:e=>(0,j.jsx)(n(89924).A,{...e}),items:r}],initialFocus:void 0})})}function W(e){return{position:"absolute",top:-40,insetInlineEnd:0,borderRadius:4,height:32,fontSize:14,lineHeight:1.2,whiteSpace:"nowrap",fontFamily:C().vc(n(662303).locale).sans,background:e.popoverBackground,boxShadow:e.shadowMD,overflow:"hidden"}}function q(e){return{display:"flex",alignItems:"center",padding:"0 8px",borderRight:`1px solid ${l().Ay.whiteWithAlpha(.2)}`,boxShadow:`1px 0 0 ${e.regularDividerColor}`}}const K=function(e){const{disabled:t,canEdit:o,simpleTableStore:i}=e,r=(0,a().K8)((()=>{const e=I().A.state,t=w().A.state,n=V().A.state,o=O().A.state,r=U().default.state,a=e.isActive&&e.simpleTableStore===i,s=1===r.stores.length&&r.stores[0]===i,l=t.isActive&&t.simpleTableStore===i&&"cell"===t.hover.type&&t.hover.resizing,c=n.isActive&&n.simpleTableStore===i;return(a||s)&&!l&&!c&&!o.isKeyboardMode}),[i]);return t||!o?null:(0,j.jsx)(n(145214).A,{tag:z,visible:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},...e})};var G=()=>n(884107),$=()=>n(4319),Y=()=>n(319975),Q=()=>n(725614);const Z=new(u().O2)("exportJsxRenderer",(async()=>await n.e(46933).then(n.bind(n,759880))));var X=()=>n(659602),J=()=>n(862292),ee=()=>n(231722),te=()=>n(24157),ne=()=>n(439270),oe=(n(803949),()=>n(603820)),ie=()=>n(906537);function re(e){const t=(0,o.useRef)(),r=(0,i().v3)(),s=(0,a().K8)((()=>Boolean(_().gc(e.simpleTableStore))),[e.simpleTableStore]),{columnIndex:c,simpleTableStore:d,columnID:u,getWidth:p,onTemporaryResize:m,onAccept:f,onCancel:v}=e,h=(0,a().K8)((()=>{const e=w().A.state;return!!e.isActive&&(e.simpleTableStore===d&&("cell"===e.hover.type&&(!s&&(e.hover.x===c&&(e.hover.showResizer||e.hover.resizing)))))}),[c,s,d]),b=(0,x().IS)((e=>({wrapper:{position:"absolute",right:0,width:0,top:0,flexGrow:0,height:"100%",zIndex:1},innerStyle:{position:"absolute",width:3,marginLeft:-1,marginTop:-1,height:"calc(100% + 2px)",transition:"background 150ms ease 50ms",cursor:s?void 0:"col-resize",background:h?e.simpleTableSelectionBorder:l().Ay.blueWithAlpha(0)}})),[s,h]),y=(0,o.useCallback)((e=>{e.preventDefault();const n=_().o0(d);t.current=n&&u in n?n[u]:{},t.current.width=p(),F().yY(!0)}),[u,p,d]),S=(0,o.useCallback)((e=>{var o;if(null!==(o=t.current)&&void 0!==o&&o.width){const o=Math.max(t.current.width+e.diffX,n(651124).bg);return{...t.current,width:o}}}),[]),k=(0,o.useCallback)((e=>{const t=S(e);t&&m(t)}),[S,m]),I=(0,o.useCallback)((e=>{const t=S(e);t&&f(t),F().yY(!1)}),[S,f]),A=(0,o.useCallback)((()=>{v(),t.current=void 0,F().yY(!1)}),[v]),C=(0,o.useCallback)((()=>{const t=ne().A.findCellsInColumnFromStore(e.simpleTableStore,e.columnId),o=n(496603).oE(t.map((e=>{var t;const n=null===(t=e.getNode())||void 0===t?void 0:t.querySelector(`.${g().NER}`);if(n)return function(e){const t=window.getComputedStyle(e),n=e.cloneNode(!0),o=n;o.id="notion-table-cell-shadow",Array.from(t).forEach((e=>o.style.setProperty(e,t.getPropertyValue(e),t.getPropertyPriority(e)))),o.style.opacity="0",o.style.width="100%",o.style.pointerEvents="none",document.body.appendChild(n);const i=o.querySelector(`.${g().UqD}`);if(!i)return void o.remove();i.style.width="",i.style.display="inline-block";const r=window.document.createRange();r.selectNode(i);const a=ie().getRect(r);return o.remove(),null!=a&&a.width?a.width+ve:void 0}(n)})));T().createAndCommit({userAction:"SimpleTableColumnResizer.handleDoubleClick",environment:r,canUndo:!0,perform:t=>{F().Fd({tableBlockColumnFormat:{...se(e.format,e.formatStore).table_block_column_format,[e.columnId]:{width:Math.max(...o)}},simpleTableStore:e.simpleTableStore,transaction:t})}})}),[r,e.columnId,e.format,e.formatStore,e.simpleTableStore]),M=(0,o.useCallback)((()=>F().Vg(!0)),[]),P=(0,o.useCallback)((()=>F().Vg(!1)),[]),B=(0,o.useCallback)((e=>(0,j.jsx)("div",{style:b.innerStyle,onDoubleClick:C,...e})),[C,b.innerStyle]);return(0,j.jsx)("div",{style:b.wrapper,onMouseMove:M,onMouseLeave:P,children:(0,j.jsx)(oe().A,{onDraggableDragStart:y,onDraggableDragMove:k,onDraggableDragEnd:I,onDraggableDragCancel:A,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:B})})}const ae=o.memo(re);function se(e,t){const{temporaryFormat:n}=t;return n||e}function le(e){const{rowIndex:t,columnIndex:n,simpleTableStore:o}=e,i=(0,a().K8)((()=>{const e=k().A.state;if(e.isActive&&e.simpleTableStore===o&&e.moved&&e.source.index!==e.destIndex)return{destIndex:e.destIndex,sourceIndex:e.source.index,type:e.source.type}}),[o],{useDeepEqual:!0}),{destIndex:r,sourceIndex:s,type:l}=i||{destIndex:0,sourceIndex:0},c=(0,x().IS)((e=>({sharedStyle:{position:"absolute",flexGrow:0,zIndex:2,background:e.simpleTableSelectionBorder},rowStyle:{top:s>r?0:void 0,bottom:s<r?0:void 0,left:-1,width:"calc(100% + 2px)",height:3},columnStyle:{top:-1,left:s>r?0:void 0,right:s<r?0:void 0,width:3,height:"calc(100% + 2px)"}})),[s,r]);return i?"row"===l&&r===t?(0,j.jsx)("div",{style:{...c.sharedStyle,...c.rowStyle}}):"column"===l&&r===n?(0,j.jsx)("div",{style:{...c.sharedStyle,...c.columnStyle}}):null:null}const ce=o.memo(le);var de=()=>n(901265);class ue extends(()=>n(959180))().A{findSelectorsOfTypeFromStore(e,t){return this.filter((n=>{const o=n.getProps();return o.simpleTableStore===t&&o.type===e}))}}const pe=new ue;const me=function(e){const t=(0,i().v3)(),s=(0,o.useRef)(),l=(0,o.useRef)(null),c=(0,x().DP)();(0,r().b)(pe,(()=>({getProps:()=>e,getNode:()=>l.current??null})),[e]);const u=()=>{s.current=void 0,F().Mi()},p=n=>{de().it({environment:t,stores:["column"===e.type?e.simpleTableStore:e.rowStore],left:n.startX,top:n.startY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"})},{simpleTableStore:m,type:g,index:f}=e,v=(0,a().K8)((()=>{const{isMobile:e}=t.device;if(e)return function(e,t,n){const o=I().A.state;if(!o.isActive)return!1;if(o.simpleTableStore!==e)return!1;const{selection:i}=o;if(_().kP(i)){if("column"===t)return i.start.col===n;if("row"===t)return i.start.row===n}return!1}(m,g,f);const{isKeyboardMode:n}=O().A.state;if(n)return!1;if(k().A.state.isActive)return!1;const o=w().A.state;if(!o.isActive)return!1;if(o.simpleTableStore!==m)return!1;if(_().gc(m))return!1;const i=U().default.state;if(i.stores[0]===m&&i.phase===U().SelectionPhase.Selected)return!1;const r=o.hover;return"cell"!==r.type?r.type===g&&r.index===f:"column"===g?r.x===f:"row"===g&&r.y===f}),[t.device,f,m,g],{useDeepEqual:!0}),h=e.isSelected||v;return(0,j.jsx)(oe().A,{allowDragWhileTextEditing:!0,onDraggableDragStart:h?n=>{var o;const{type:i}=e;n.preventDefault();const r=null===(o=l.current)||void 0===o?void 0:o.parentNode;if(!(r&&r instanceof Element))return;const a=r.getBoundingClientRect();s.current="column"===i?a.x:a.y;const d="column"===i?n.startX-a.x:n.startY-a.y;F().go({...e,environment:t,theme:c,selectorStartPx:s.current,mouseOffsetPx:d})}:void 0,onDraggableDragMove:h?t=>{const{type:n}=e;if(!s.current)return;const o=k().A.state;if(!o.isActive)return;const i="column"===n?t.diffX:t.diffY;if(0!==i){const t=s.current+i,n=function(e,t,n){const{delta:o,selectorDragPx:i}=e,r=pe.findSelectorsOfTypeFromStore(n,t);if(o>0){const e=r.map((e=>{var t;const o=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(o&&o instanceof Element))return;const i=o.getBoundingClientRect();return"column"===n?null==i?void 0:i.x:null==i?void 0:i.y})).filter(d().O9);e.sort(((e,t)=>e-t));for(let t=e.length-1;t>=0;t--)if(i>e[t])return t;return 0}const a=r.map((e=>{var t;const o=null===(t=e.getNode())||void 0===t?void 0:t.parentNode;if(!(o&&o instanceof Element))return;const i=o.getBoundingClientRect();return"column"===n?i.x+i.width:i.y+i.height})).filter(d().O9);return a.sort(((e,t)=>e-t)),a.filter(d().O9).findIndex((e=>i<e))}({delta:i,selectorDragPx:t+o.source.mouseOffsetPx},e.simpleTableStore,e.type);F().Tu({destIndex:n,selectorDragPx:t})}}:void 0,onDraggableDragEnd:h?o=>{const{isMobile:i}=t.device,{simpleTableStore:r,type:a,format:s}=e;if(!k().A.state.isActive)return;const{source:l,destIndex:c}=k().A.state;l.index===c?i||p(o):(T().createAndCommit({userAction:"SimpleTableRowColumnSelector.handleDragEnd",environment:t,canUndo:!0,perform:e=>{F().FM({environment:t,simpleTableStore:r,transaction:e,format:s,type:a})}}),"row"===a&&(0,n(134060).t)(t,{from:"selection_menu",draggedTypes:["table_row"],asCopy:!1})),u()}:void 0,onDraggableDragCancel:h?()=>{u()}:void 0,disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,j.jsx)(ge,{ref:l,enabled:h,isSelected:e.isSelected,draggableEvents:t,type:e.type,index:e.index,simpleTableStore:e.simpleTableStore,rowStore:e.rowStore})})},ge=(0,o.forwardRef)((function(e,t){const o=(0,A().tz)(),{type:r,enabled:s,isSelected:c,draggableEvents:d}=e,u=(0,i().v3)(),p=(0,a().O$)(k().J),m=()=>{const{simpleTableStore:t,type:n,index:o}=e;F().Lb({type:n,simpleTableStore:t,index:o})},f=()=>{F().IN()},v=(0,x().IS)((t=>({base:{opacity:s?1:0,pointerEvents:s?void 0:"none",transition:"opacity 150ms ease",fill:t.lightIconColor,position:"absolute",display:"flex",alignItems:"center",cursor:p?"grab":"pointer",justifyContent:"center",borderRadius:4,background:t.whiteButtonBackground,boxShadow:e.isSelected?void 0:t.shadowSM,zIndex:4},column:{...fe(e.isSelected,t),top:-8,left:"calc(50% - 13px)",height:16,width:26,padding:"2px 4px"},row:{...fe(e.isSelected,t),top:"calc(50% - 13px)",left:-8,width:16,height:26,padding:"4px 2px"},hovered:{background:t.whiteButtonHoveredBackground,...fe(e.isSelected,t)},pressed:{...fe(e.isSelected,t,!0)}})),[s,p,e.isSelected]);return(0,j.jsx)(M().A,{"aria-label":"column"===r?o.formatMessage({id:"simpleTable.rowColumnSelector.moveColumn",defaultMessage:"Move column"}):o.formatMessage({id:"simpleTable.rowColumnSelector.moveRow",defaultMessage:"Move row"}),ref:t,className:"column"===r?g().yHP:g().A8d,style:{...v.base,...v[r]},hoveredStyle:v.hovered,pressedStyle:v.pressed,onClick:t=>function(e,t,o,i,r,a){const{isMobile:s}=a.device;n(407054).A.state.isActive||de().it({environment:a,stores:[r],left:e.clientX,top:e.clientY,showInput:!0,actionSectionGroupKey:"simple_table",analyticsFrom:"simple_table_menu"});if(s){const{pn:e,tb:n}=F();("column"===t?e:n)({environment:a,index:o,simpleTableStore:i})}}(t,e.type,e.index,e.simpleTableStore,"column"===e.type?e.simpleTableStore:e.rowStore,u),onTouchStart:m,onTouchEnd:f,onMouseEnter:m,onMouseLeave:f,...d,disallowTabbing:!0,children:(0,n(887146).i)({fill:c?l().Ay.white:void 0,width:14,height:14,transform:"column"===r?"rotate(90deg)":void 0})})}));function fe(e,t){return e||arguments.length>2&&void 0!==arguments[2]&&arguments[2]?{background:t.simpleTableSelectionBorder}:void 0}const ve=1,he=o.memo((function(e){const t=(0,o.useRef)(null),s=(0,o.useRef)(null),{value:c}=(0,u().fJ)(Z),{value:d}=(0,u().fJ)(X().g),{columnID:p,columnIndex:m,columnFormatWidth:v,formatStore:h,simpleTableStore:b,rowIndex:y,store:S,format:w,disabled:A,canEdit:M,legacyTransclusionParentStore:P,isColumnSelected:B,isRowSelected:R,isHeaderColumnEnabled:E,isHeaderRowEnabled:D}=e,N=(0,i().Y0)(),L=(0,i().v3)(),O=!A&&M,U=(0,a().K8)((()=>null==S?void 0:S.getPropertyStore(p)),[p,S]);(0,r().b)(ne().A,(()=>({getProps:()=>e,getNode:()=>t.current,getTextStore:()=>U})),[e,U]);const V=(0,o.useCallback)((e=>{A||(0,f().SQ)({event:e,context:f().y$.EditorClick,callback:()=>{M&&e.shiftKey?F().hk({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:b}):M?F().as({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:b}):F().VC({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:b})}})}),[M,m,A,L,y,b]),z=(0,o.useCallback)((e=>{A||(0,f().SQ)({event:e,context:f().y$.EditorContextMenu,callback:()=>{F().VC({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:b})}})}),[m,A,L,y,b]),H=(0,o.useCallback)((e=>{A||M&&e.shiftKey&&F().hk({environment:L,rowIndex:y,columnIndex:m,simpleTableStore:b})}),[M,m,A,L,y,b]),W=(0,o.useCallback)((()=>{A||F().tM({x:m,y,simpleTableStore:b})}),[m,A,y,b]),q=(0,o.useCallback)((()=>{A||F().IN()}),[A]),K=(0,o.useCallback)((e=>{h.setTemporaryFormat({...h.state.temporaryFormat||w,table_block_column_format:{...(h.state.temporaryFormat||w).table_block_column_format,[p]:e}})}),[p,h,w]),oe=(0,o.useCallback)((()=>{var e;return(null===(e=t.current)||void 0===e?void 0:e.getBoundingClientRect().width)||0}),[]),ie=(0,o.useCallback)((()=>{var e;const t=null===(e=h.state.temporaryFormat)||void 0===e?void 0:e.table_block_column_format;T().createAndCommit({userAction:"SimpleTableCell.handleColumnResizeAccept",environment:L,canUndo:!0,perform:e=>{F().Fd({tableBlockColumnFormat:t||{},simpleTableStore:b,transaction:e})}}),h.setTemporaryFormat(void 0)}),[L,h,b]),re=(0,o.useCallback)((()=>{h.setTemporaryFormat(void 0)}),[h]),se=(0,o.useCallback)((e=>{var t;if(e.preventDefault(),null===(t=s.current)||void 0===t||!t.isComposing())if(N.isMobile){if(A||!M)return;const e=te().default.state;if("editing"===e.mode){const t="default";T().createAndCommit({userAction:"SimpleTableCell.mobileEnter",environment:L,canUndo:!0,perform:n=>{Y().$D({environment:L,editorMode:t,string:"\n",multiSelection:e.multiSelection,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:n})}})}}else{"editing"===te().default.state.mode&&F().b9({environment:L,direction:"down",bypassExistingTextSelection:!0})}}),[M,N.isMobile,A,L]),le=(0,o.useCallback)((e=>{e.preventDefault(),F().$G({environment:L,direction:"right",bypassExistingTextSelection:!0})}),[L]),de=(0,o.useCallback)((e=>{e.preventDefault(),F().$G({environment:L,direction:"left",bypassExistingTextSelection:!0})}),[L]),ue=(0,o.useCallback)((e=>{A||(e.preventDefault(),Q().clear({environment:L}))}),[L,A]),pe=(0,o.useCallback)((async e=>{const t=I().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=_().$O(o);if(!i)return;(await G().R.clipboardActions.load()).copy({environment:L,event:e,markdownLinkifyIt:d});const r="editing"===te().default.state.mode&&te().default.state.multiSelection;if(!r||(0,ee().kM)(r)){const t=await J().T.formulas.load();$().A_({environment:L,simpleTableStore:o,selection:n,currentRows:o.getContentStores(),columnOrder:i,event:e,exportJsxRenderer:c,formulasModule:t})}}),[L,c,d]),ge=(0,o.useCallback)((async e=>{if(A||!M)return;await pe(e);const t="editing"===te().default.state.mode&&te().default.state.multiSelection;t&&!(0,ee().kM)(t)?T().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:L,canUndo:!0,perform:e=>{Y().f0({environment:L,multiSelection:t,transaction:e})}}):T().createAndCommit({userAction:"SimpleTableCell.handleCut",environment:L,canUndo:!0,perform:e=>{F().xD({environment:L,transaction:e})}})}),[M,A,L,pe]),fe=(0,a().K8)((()=>{if(!S)return!1;const e=k().A.state;if(!e.isActive||e.simpleTableStore!==b||!e.moved)return!1;const{type:t,id:n}=e.source;return"column"===t?n===p:n===S.id}),[p,b,S]),{blockColor:he,columnFormat:_e}=(0,a().K8)((()=>({blockColor:null==S?void 0:S.getFormat().block_color,columnFormat:_().o0(b)})),[S,b]),be=(0,o.useMemo)((()=>({type:"simple_table_cell_match",propertyId:p})),[p]),ye=(0,x().IS)((e=>{const t=function(e){const{columnFormat:t,rowIndex:n,columnIndex:o,columnID:i,theme:r,isHeaderColumnEnabled:a,isHeaderRowEnabled:s,blockColor:c}=e;let d=c||"default";if(t&&i in t){var u;const e=null===(u=t[i])||void 0===u?void 0:u.color;e&&(d=e)}if(0===n&&s||0===o&&a)return"default"!==d?{...(0,l().k5)(d,r),fontWeight:C().Wy.medium}:{background:r.tableHeaderRowColumnBackground,fontWeight:C().Wy.medium};return(0,l().k5)(d,r)}({columnFormat:_e,rowIndex:y,columnIndex:m,isHeaderColumnEnabled:E,isHeaderRowEnabled:D,columnID:p,blockColor:he,theme:e});return{cell:{...t,border:`${ve}px solid ${e.tableDividerColor}`,isolation:"auto",position:"relative",verticalAlign:"top",textAlign:"start",minWidth:v??120,maxWidth:v??240,minHeight:32},contents:{width:"100%",height:"100%",...t},text:{padding:"7px 9px",backgroundColor:"transparent",fontSize:14,lineHeight:"20px"}}}),[he,_e,v,p,m,E,D,y]),Se=(0,j.jsxs)(j.Fragment,{children:[fe&&(0,j.jsx)("div",{style:ye.contents}),(0,j.jsxs)("div",{className:g().NER,style:{isolation:"auto",visibility:fe?"hidden":void 0},children:[S&&0===y&&O&&(0,j.jsx)(me,{index:m,type:"column",simpleTableStore:b,isSelected:B,id:p,format:w,rowStore:S}),S&&0===m&&O&&(0,j.jsx)(me,{index:y,type:"row",simpleTableStore:b,isSelected:R,id:S.id,format:w,rowStore:S}),U?(0,j.jsx)(n(524702).A,{ref:s,disabled:A,store:U,disableSlashCommands:!0,onClick:H,onEnter:se,onTab:le,onUntab:de,onEsc:ue,onCut:ge,onCopy:pe,style:ye.text,pasteBehavior:"inline",className:g().UqD,disableDrag:!0,legacyTransclusionParentStore:P,inPageFind:be}):(0,j.jsx)("div",{style:ye.text,children:" "}),!N.isMobile&&O&&(0,j.jsx)(ae,{format:e.format,formatStore:e.formatStore,columnId:e.columnID,columnIndex:m,columnID:p,simpleTableStore:b,getWidth:oe,onTemporaryResize:K,onAccept:ie,onCancel:re}),!N.isMobile&&O&&(0,j.jsx)(ce,{simpleTableStore:b,rowIndex:y,columnIndex:m})]})]}),we={style:ye.cell,onClick:V,onContextMenu:z,onMouseEnter:W,onMouseLeave:q};return D&&0===y?(0,j.jsx)("th",{ref:t,scope:"col",...we,children:Se}):E&&0===m?(0,j.jsx)("th",{ref:t,scope:"row",...we,children:Se}):(0,j.jsx)("td",{ref:t,...we,children:Se})}));function _e(e,t){let{columnOrder:i,store:r,rowIndex:s,rowStore:l,selection:c,formatStore:d,disabled:u,rowCount:p,columnCount:m,isHeaderColumnEnabled:f,isHeaderRowEnabled:h,canEdit:b,format:y}=e;const S=(0,o.useRef)(null),w=(0,a().K8)((()=>Boolean(l)&&l.getParentId()!==r.id),[l,r.id]),k={isolation:"auto",border:(0,n(611191).iE)()&&w?"3px dashed deeppink":void 0},I=void 0!==c&&(0,_().qD)({selection:c,rowIndex:s,columnCount:m}),x=(0,a().K8)((()=>{var e;return(null==d||null===(e=d.state)||void 0===e?void 0:e.temporaryFormat)||y}),[y,d]);return(0,v().NW)(r,t,(0,o.useMemo)((()=>({renderedType:"table",getNode:()=>S.current,getBlockStore:()=>r})),[r]),i?(0,j.jsx)("tr",{className:g().nGK,style:k,ref:S,children:i.map(((e,t)=>{var n;return(0,j.jsx)(he,{disabled:u,canEdit:b,columnID:e,columnIndex:t,columnFormatWidth:(null===(n=x.table_block_column_format)||void 0===n||null===(n=n[e])||void 0===n?void 0:n.width)??null,rowIndex:s,store:l,simpleTableStore:r,isColumnSelected:void 0!==c&&(0,_().Gl)({selection:c,columnIndex:t,rowCount:p}),isRowSelected:I,formatStore:d,format:y,legacyTransclusionParentStore:w?r:void 0,isHeaderColumnEnabled:f,isHeaderRowEnabled:h},e)}))}):null)}const be=o.memo(o.forwardRef(_e),c().A);n(672577);var ye=()=>n(269380),Se=()=>n(778417),we=()=>n(545805),ke=()=>n(335722),Ie=()=>n(855801),xe=()=>n(77272);function Ae(e){const{store:t,children:n,selection:r,disabled:a,canEdit:s}=e,l=(0,i().v3)(),{value:c}=(0,u().fJ)(J().T.formulas),d=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),F().$G({environment:l,direction:"left",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),p=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),F().$G({environment:l,direction:"right",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),m=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),F().b9({environment:l,direction:"up",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),g=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault(),F().b9({environment:l,direction:"down",bypassExistingTextSelection:!1,expandSelection:e.shiftKey})}),[l]),f=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault();const t=I().A.state;if(t.isActive){const{selection:e,simpleTableStore:n}=t;_().kP(e)&&F().as({environment:l,rowIndex:e.start.row,columnIndex:e.start.col,simpleTableStore:n})}}),[l]),v=(0,o.useCallback)((e=>{var t;null===(t=e.preventDefault)||void 0===t||t.call(e);const n=I().A.state;if(!n.isActive)return;const{selection:o,simpleTableStore:i}=n;_().kP(o)&&o.end.row===_().yv(i)-1&&T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleShiftEnter",environment:l,canUndo:!0,perform:e=>{const t=o.end.row+1;F().Il({environment:l,transaction:e,index:t,simpleTableStore:i}),F().as({environment:l,rowIndex:t,columnIndex:o.start.col,simpleTableStore:i})}})}),[l]),h=(0,o.useCallback)((e=>{e.preventDefault&&e.preventDefault();const n=I().A.state;if(!n.isActive)return;const{selection:o,simpleTableStore:i}=n;_().wg()?Q().clear({environment:l}):_().kP(o)?F().tb({environment:l,index:o.start.row,simpleTableStore:i}):(F().wr(),Se().td({environment:l,stores:[t]}))}),[l,t]),b=(0,o.useCallback)((e=>{T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDelete",environment:l,canUndo:!0,perform:e=>{F()._Y({environment:l,transaction:e})}})}),[l]),y=(0,o.useCallback)((e=>{!e.key||e.metaKey||e.ctrlKey||(O().A.setKeyboardMode(!0),T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleKeypress",environment:l,canUndo:!0,perform:t=>{F().jJ({environment:l,editorMode:"default",transaction:t,key:e.key})}}))}),[l]),{value:S}=(0,u().fJ)(Z),w=(0,o.useCallback)((e=>{const t=I().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=_().$O(o);i&&$().A_({environment:l,simpleTableStore:o,selection:n,currentRows:o.getContentStores(),columnOrder:i,event:e,exportJsxRenderer:S,formulasModule:c})}),[l,S,c]),k=(0,o.useCallback)((e=>{!a&&s&&(w(e),T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleCut",environment:l,canUndo:!0,perform:e=>{F()._D({environment:l,transaction:e})}}))}),[l,a,s,w]),{value:x}=(0,u().fJ)(X().g),{value:A}=(0,u().fJ)(ke().S),{value:C}=(0,u().fJ)(G().R.clipboardActions),{value:M}=(0,u().fJ)(Ie().VI.duplicateActions),P=(0,o.useCallback)((e=>{if(a||!s||!C)return;const t=I().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=_().$O(o);i&&T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handlePaste",environment:l,canUndo:!0,perform:t=>{$().GZ({environment:l,simpleTableStore:o,selection:n,currentRows:o.getContentStores(),columnOrder:i,event:e,transaction:t,markdownLinkifyIt:x,tinyMceMicrosoftWordPasteFilter:A,clipboardActions:C})}})}),[l,a,s,x,A,C]),B=(0,o.useCallback)((e=>{e.preventDefault(),T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleDuplicate",environment:l,canUndo:!0,perform:e=>{F().kZ({environment:l,transaction:e,duplicateActions:M})}})}),[M,l]),R=(0,o.useCallback)(((e,n)=>{!a&&s&&(n.preventDefault(),T().createAndCommit({userAction:"SimpleTableSelectionOverlay.handleAnnotation",environment:l,canUndo:!0,perform:n=>{F().F8({environment:l,editorMode:"default",simpleTableStore:t,annotation:e,transaction:n})}}))}),[l,a,s,t]),E=(0,o.useCallback)((e=>R(["h",xe().A.getMostRecentlyUsedColor()],e)),[R]),D=(0,o.useCallback)((e=>R(["b"],e)),[R]),N=(0,o.useCallback)((e=>R(["i"],e)),[R]),L=(0,o.useCallback)((e=>R(["s"],e)),[R]),U=(0,o.useCallback)((e=>R(["_"],e)),[R]),V=(0,o.useCallback)((e=>R(["c"],e)),[R]);return(0,j.jsx)(we().A,{debugName:"SimpleTableKeyboardArea",capture:Boolean(r)&&!a&&s,onLeft:d,onRight:p,onUntab:d,onTab:p,onUp:m,onDown:g,onEnter:f,onShiftEnter:v,onEsc:h,onDelete:b,onBackspace:b,onKeypress:y,onCut:k,onCopy:w,onPaste:P,onDuplicate:B,onToggleHighlight:E,onToggleBold:D,onToggleItalics:N,onToggleStrike:L,onToggleUnderline:U,onToggleCode:V,children:n})}const Ce=(0,A().YK)({tooltipContent:{id:"simpleTable.resizer.dimensions",defaultMessage:"{num_columns} × {num_rows}"}});const Te=function(e){const t=(0,o.useRef)(null),r=(0,i().v3)(),{store:s,type:c,formatStore:d}=e,[u,p]=(0,o.useState)(!1),m=()=>{T().createAndCommit({userAction:"SimpleTableResizer.handleResizeClick",environment:r,canUndo:!0,perform:e=>{"row"!==c&&F().eI({count:1,simpleTableStore:s,transaction:e}),"column"!==c&&F().S0({environment:r,count:1,simpleTableStore:s,transaction:e,analyticsFrom:"resize_click"})}})},g=(0,a().K8)((()=>Boolean(_().gc(s,c))),[s,c]),f=(0,a().K8)((()=>{const e=_().gc(s,c);return null==e?void 0:e.tooltipOriginRect}),[s,c]),v=(0,a().K8)((()=>{const e=s.getFormat(),{temporaryFormat:t}=d.state;return(t||e).table_block_column_order}),[d,s]),h=(0,a().K8)((()=>{const t=_().gc(e.store);return t?t.rowsDelta:0}),[e.store]),b=(0,a().K8)((()=>{const t=w().A.state,n=_().gc(e.store,e.type);return!O().A.state.isKeyboardMode&&(function(e,t,n){if(!e.isActive||e.simpleTableStore!==n)return!1;const{hover:o}=e;if("cell"===o.type){const e=o.y===_().yv(n)-1,i=o.x===_().MW(n)-1;return"row"===t?e:("column"===t||e)&&i}return"resizer"===o.type&&o.resizer===t}(t,e.type,e.store)||Boolean(n))||u}),[u,e.store,e.type]),y=(0,x().IS)((e=>({button:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:g?e.simpleTableSelectionBorder:e.lightDividerColor},plusIcon:{width:12,height:12,fill:g?l().Ay.white:e.mediumIconColor,padding:"auto"},inner:{display:"flex",flexDirection:"row"===c?"row":void 0,width:"100%",height:"100%",opacity:b?1:0,pointerEvents:b?void 0:"none",transition:"opacity 150ms ease 50ms"}})),[g,b,c]);return(0,j.jsx)("div",{style:Be(e.type),onFocus:e=>{const t=e.target;t instanceof HTMLElement&&(0,n(819121).p)(t)&&p(!0)},onBlur:()=>{p(!1)},onMouseEnter:()=>{const{store:t,type:n}=e;F().xs({simpleTableStore:t,resizer:n})},onMouseLeave:()=>{F().IN()},ref:t,children:(0,j.jsx)(oe().A,{onDraggableDragStart:e=>{var n;e.preventDefault();const o=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect();V().A.setState({isActive:!0,simpleTableStore:s,resize:c,rowsDelta:0,columnsDelta:0,tooltipOriginRect:o}),d.setTemporaryFormat(s.getFormat())},onDraggableDragMove:o=>{var i;const r=_().gc(s,c);if(!r)return;const a=null===(i=t.current)||void 0===i?void 0:i.getBoundingClientRect();if("row"!==c){const t=o.diffX>0?Math.ceil((o.diffX-30)/120):Math.floor((o.diffX+30)/120);if(t<0&&_().oC({simpleTableStore:s,lastN:Math.abs(t)}))return;V().A.setState({...r,columnsDelta:t,tooltipOriginRect:a});const i=function(t){const{store:o}=e,i=v||[],r=_().$O(o)||[];if(t>0){const e=t-(i.length-r.length);if(e>0){const t=[...Array(e).keys()].map((e=>(0,n(183558).Ay)()));return[...i,...t]}return i.slice(0,i.length+e)}return r.slice(0,Math.max(1,r.length-Math.abs(t)))}(t);d.updateColumnOrder(i),F().VD(i.length-1)}if("column"!==c){const e=o.diffY>0?Math.ceil((o.diffY-8)/32):Math.max(-(_().yv(s)-1),Math.floor((o.diffY+8)/32));if(e<0&&_().S9({simpleTableStore:s,lastN:Math.abs(e)}))return;V().A.setState({...r,rowsDelta:e,tooltipOriginRect:a}),F().zb(_().yv(s)+e-1)}},onDraggableDragEnd:t=>{const n=_().MW(s);T().createAndCommit({userAction:"SimpleTableResizer.handleDragEnd",environment:r,canUndo:!0,perform:e=>{"row"!==c&&v&&(v.length>n?F().eI({count:v.length-n,simpleTableStore:s,transaction:e}):v.length<n&&F().gU({simpleTableStore:s,columnOrder:v,transaction:e})),"column"!==c&&(h>0?F().S0({environment:r,count:h,simpleTableStore:s,transaction:e,analyticsFrom:"resize_drag"}):h<0&&F().Sv({numRowsToDelete:Math.abs(h),simpleTableStore:s,transaction:e}))}}),Pe(e.formatStore)},onDraggableDragCancel:()=>{Pe(e.formatStore)},disableVerticalEdgeScroll:!0,disableHorizontalEdgeScroll:!0,render:t=>(0,j.jsx)("div",{style:y.inner,...t,children:(0,j.jsx)(N().A,{renderTooltip:()=>(0,j.jsx)(Me,{type:c,isResizing:g,columnOrder:v||[],rowCount:_().yv(s)+h}),placement:L().W.Bottom,delayThreshold:0,originRect:f,forceVisibleState:!0===g||void 0,render:t=>(0,j.jsx)(M().A,{onClick:m,style:Re(!0,e.type),hoveredStyle:Re(!0,e.type),...t,children:(0,j.jsx)("div",{style:y.button,children:(0,n(689094).W)(y.plusIcon)})})})})})})};function Me(e){const t=(0,A().tz)(),{type:n,isResizing:o,columnOrder:i,rowCount:r}=e,a=(0,x().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center",color:e.text.contrastSecondary},boldText:{color:e.text.contrastPrimary}})),[]);if(!o){const e=e=>(0,j.jsx)("b",{style:a.boldText,children:e});return(0,j.jsxs)("div",{style:a.wrapper,children:[(0,j.jsxs)("div",{children:["row"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipRow",defaultMessage:"<b>Click</b> to add a new row",values:{b:e}}),"column"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipColumn",defaultMessage:"<b>Click</b> to add a new column",values:{b:e}}),"corner"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipCorner",defaultMessage:"<b>Click</b> to add a new row and column",values:{b:e}})]}),(0,j.jsxs)("div",{children:["row"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipSubtitleRow",defaultMessage:"<b>Drag</b> to quickly add or remove rows",values:{b:e}}),"column"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipSubtitleColumn",defaultMessage:"<b>Drag</b> to quickly add or remove columns",values:{b:e}}),"corner"===n&&(0,j.jsx)(A().sA,{id:"simpleTable.resizer.tooltipSubtitleCorner",defaultMessage:"<b>Drag</b> to quickly add or remove rows and columns",values:{b:e}})]})]})}const s=i||[],l=t.formatMessage(Ce.tooltipContent,{num_columns:s.length,num_rows:r});return(0,j.jsx)("div",{children:l})}function Pe(e){e.reset(),V().A.reset()}function Be(e){const t={position:"absolute",display:"flex"};return"row"===e?{...t,flexDirection:"row",bottom:-b,left:0,right:0}:"column"===e?{...t,insetInlineEnd:-b,top:0,bottom:0}:{...t,bottom:-b,insetInlineEnd:-b}}function Re(e,t){const n=e?16:20,o="100%";return"column"===t?{flex:1,width:n,height:o,cursor:"col-resize",borderRadius:4,overflow:"hidden"}:"row"===t?{flex:1,width:o,height:n,cursor:"row-resize",borderRadius:4,overflow:"hidden"}:{flex:1,width:n,height:n,cursor:"nwse-resize",borderRadius:"50%",overflow:"hidden"}}const Ee=9,De=26;function Ne(e){const{position:t,onDraggableDragStart:n,onDraggableDragMove:o,onDraggableDragEnd:r,onDraggableDragCancel:a}=e,s=(0,i().Y0)().isMobile?De:Ee,c=(0,x().IS)((e=>({tapArea:{position:"absolute",top:"top-left"===t?-s/2:void 0,left:"top-left"===t?-s/2:void 0,bottom:"bottom-right"===t?-s/2:void 0,right:"bottom-right"===t?-s/2:void 0,width:s,height:s,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",pointerEvents:"auto",cursor:"nwse-resize",zIndex:10},dragHandle:{width:Ee,height:Ee,border:`2px solid ${l().Ay.blueWithAlpha(.57)}`,background:e.contentBackground,borderRadius:"50%"}})),[t,s]);return(0,j.jsx)(oe().A,{allowDragWhileTextEditing:!0,onDraggableDragStart:n,onDraggableDragMove:o,onDraggableDragEnd:r,onDraggableDragCancel:a,render:e=>(0,j.jsx)("div",{...e,style:c.tapArea,children:(0,j.jsx)("div",{style:c.dragHandle})})})}const Le=function(e){const t=(0,i().v3)(),r=(0,o.useRef)(null),l=(0,o.useRef)(void 0),{children:c,store:d,selection:u,formatStore:p,disabled:m,canEdit:g,columnOrder:f}=e,v=(0,a().K8)((()=>{const{device:e}=t;return!(m||!g||e.isMobile)&&!(n(861841).Ay.state.isDragging||function(e){const t=w().A.state;if(!t.isActive)return!1;if(t.simpleTableStore!==e)return!1;if("cell"!==t.hover.type)return!1;return t.hover.resizing}(d)||function(e){const t=k().A.state;return t.isActive&&t.simpleTableStore===e}(d))}),[g,m,t,d]),h=(0,a().r6)((()=>{if(u&&r.current&&f)return Oe({cell:u.start,tableElement:r.current,store:d,columnOrder:f})}),[f,u,d],{useDeepEqual:!0}),_=(0,a().r6)((()=>{if(u&&r.current&&f)return Oe({cell:u.end,tableElement:r.current,store:d,columnOrder:f})}),[f,u,d],{useDeepEqual:!0}),b=(0,a().O$)(h),y=(0,a().O$)(_);(0,o.useEffect)((()=>{const e=()=>{h.enqueueRecompute(),_.enqueueRecompute()};if(r.current){const t=new MutationObserver(e);return t.observe(r.current,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),()=>t.disconnect()}}),[_,h]);const S=(0,a().K8)((()=>{const t=k().A.state;if(!t.isActive)return;if(t.simpleTableStore!==e.store)return;if(!r.current)return;const{source:n,selectorDragPx:o,moved:i}=t;if(n.selectorStartPx===o&&!i)return;if(!n.draggedCells[0])return;const a=n.draggedCells[0].rect,l=r.current.getBoundingClientRect(),c="column"===n.type?0:(0,s().A)(o-l.top,-8,l.height-32);return{left:"column"===n.type?(0,s().A)(o-l.left,-a.width/3,l.width-2/3*a.width):0,top:c,draggedCells:n.draggedCells,type:n.type}}),[e.store]),I=(0,a().K8)((()=>!e.disabled&&(b&&y||S)),[S,e.disabled,y,b]);return(0,j.jsx)(Ae,{store:d,selection:u,disabled:m,canEdit:g,children:(0,j.jsx)(oe().A,{onDraggableDragStart:t=>{e.canEdit&&(t.shiftKey&&e.selection?l.current=e.selection.start:l.current=ze(t.startX,t.startY,e.store))},onDraggableDragMove:o=>{if(!e.canEdit||!l.current)return;const i=l.current,r=ze(o.currentX,o.currentY,e.store);(0,n(450510).fU)(i,r)?F().VC({environment:t,rowIndex:i.row,columnIndex:i.col,simpleTableStore:e.store}):F().ep({environment:t,start:i,end:r,simpleTableStore:e.store})},render:e=>(0,j.jsxs)("div",{ref:r,style:{position:u||v?"relative":void 0},...e,children:[c,I&&(0,j.jsxs)("div",{style:{position:"absolute",top:0,left:0,pointerEvents:"none"},children:[(0,j.jsx)(Ue,{store:d,dragState:S,tableElement:r.current}),b&&y&&(0,j.jsx)(Fe,{startRect:b,endRect:y,dragState:S,canEdit:g,selection:u,store:d})]}),v&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(Te,{store:d,type:"column",formatStore:p},"column"),(0,j.jsx)(Te,{store:d,type:"row",formatStore:p},"row"),(0,j.jsx)(Te,{store:d,type:"corner",formatStore:p},"corner")]})]})})})};function Oe(e){const{cell:t,tableElement:n,store:o,columnOrder:i}=e,r=o.getContentStores()[t.row],a=ne().A.findCellsInRowFromStore(r,o,t.row),s=(l=a,c=i[t.col],null===(d=l.find((e=>e.getProps().columnID===c)))||void 0===d||null===(d=d.getNode())||void 0===d?void 0:d.getBoundingClientRect());var l,c,d;if(!s)return;const u=n.getBoundingClientRect(),p=s.top-u.top,m=s.left-u.left,g=s.width,f=function(e){return Math.max(...e.map((e=>{var t;return(null===(t=e.getNode())||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height)||0})))}(a);return new DOMRect(m-2,p-2,g+4,f+4)}function Ue(e){const{tableElement:t,dragState:n}=e,i=(0,o.useMemo)((()=>{const e=null==t?void 0:t.getBoundingClientRect();if(!n||!e)return null;const{draggedCells:o,type:i}=n;return o.map((t=>"column"===i?{cloned:t.cloned,rect:new DOMRect(0,t.rect.top-e.top,t.rect.width,t.rect.height)}:{cloned:t.cloned,rect:new DOMRect(t.rect.left-e.left,0,t.rect.width,t.rect.height)}))}),[n,t]);return i&&n&&t?(0,j.jsx)("div",{"data-drag-overlay":!0,style:{position:"absolute",left:n.left,top:n.top,zIndex:5},children:i.map(((e,t)=>(0,j.jsx)(ye().A,{element:e,opacity:.9},t)))}):null}function Fe(e){const{startRect:t,endRect:n,dragState:r,selection:a,store:s}=e,l=(0,i().v3)(),c=(0,i().Y0)(),d=Math.min(t.left,n.left),u=Math.min(t.top,n.top),p=Math.max(t.right,n.right),m=Math.max(t.top+t.height,n.top+n.height),f=(0,o.useRef)(void 0);function v(e){if(!a)return;const{start:t,end:n}=a;f.current={col:"top-left"===e?Math.max(t.col,n.col):Math.min(t.col,n.col),row:"top-left"===e?Math.max(t.row,n.row):Math.min(t.row,n.row)}}const h=t=>{if(!f.current)return;const n=ze(t.currentX,t.currentY,s);F().ep({environment:l,start:f.current,end:n,simpleTableStore:e.store})},_=(0,x().IS)((e=>({base:{position:"absolute",left:r&&"column"===r.type?r.left:d+1.5,top:r&&"row"===r.type?r.top:u+1.5,width:p-d-3,height:m-u-3},wrapper:{zIndex:r?4:2,backgroundColor:r?e.contentBackground:void 0,opacity:r?.9:void 0,boxShadow:r?e.shadowMD:void 0,borderRadius:2},inner:{border:`solid ${e.simpleTableSelectionBorder}`,borderWidth:2,borderRadius:2,zIndex:r?5:3}})),[3,r,m,p,d,u]);return t&&n?(0,j.jsxs)("div",{className:g().fep,children:[(0,j.jsx)("div",{style:{..._.base,..._.wrapper}}),(0,j.jsx)("div",{style:{..._.base,..._.inner},children:e.canEdit&&(0,j.jsxs)(j.Fragment,{children:[!c.isMobile&&(0,j.jsx)(Ne,{position:"top-left",onDraggableDragStart:()=>v("top-left"),onDraggableDragMove:h}),(0,j.jsx)(Ne,{position:"bottom-right",onDraggableDragStart:()=>v("bottom-right"),onDraggableDragMove:h})]})})]}):null}function Ve(e,t){const n=ne().A.findCellsInRowFromStore(void 0,t,0).sort(((e,t)=>e.getProps().columnIndex-t.getProps().columnIndex));for(let o=0;o<n.length;o++){if(e<=n[o].getNode().getBoundingClientRect().right)return o}return n.length-1}function je(e,t){const n=ne().A.findCellsInColumnFromStore(t,0).sort(((e,t)=>e.getProps().rowIndex-t.getProps().rowIndex));for(let o=0;o<n.length;o++){if(e<=n[o].getNode().getBoundingClientRect().bottom)return o}return n.length-1}function ze(e,t,n){return{col:Ve(e,n),row:je(t,n)}}const He=b,We={isolation:"auto"},qe=(0,o.memo)((0,o.forwardRef)((function(e,t){const{store:c,disabled:u,disableHoverMenu:p,showRowIds:b,style:y,disableCommentMenu:x,hideContent:A,isLastItem:C}=e,T=(0,i().v3)(),{currentUser:M}=T,P=(0,i().Y0)(),B=(0,v().bx)(c,u),R=(0,n(792485).S)(),E=(0,o.useContext)(n(27654).c),D=(0,a().uB)(void 0,S),N=(0,v().VE)(c),L=(0,o.useRef)(null),O=(0,o.useRef)(null),U=(0,o.useMemo)((()=>new(h().E)),[]),F=(0,o.useMemo)((()=>new(h().E)),[]);(0,o.useEffect)((()=>()=>{U.destroy(),F.destroy()}),[U,F]);const V=(0,a().K8)((()=>_().Xe({simpleTableStore:c,environment:T,includeInline:!0})),[c,T],{useDeepEqual:!0}),z=(0,a().K8)((()=>{const e={width:"100%",position:"relative",alignSelf:"center"};return(P.isMobile||E||!c.isRootOrDirectChild())&&(e.maxWidth=V?"calc(100% - 40px)":"100%"),e}),[P,V,c,E]),H=(0,a().K8)((()=>c.getFormat()),[c]),W=H.block_color||"default",q=(0,a().K8)((()=>({...(0,l().k5)(W,(0,l().O4)({theme:"light"})),...y,position:"relative",display:"flex",...(0,n(747100).RX)(c)&&{width:(0,n(644914).Uh)(T),position:"sticky",left:0}})),[c,T,y,W]),G=(0,a().K8)((()=>(D.state.temporaryFormat||H).table_block_column_order),[H,D]),$=(0,a().K8)((()=>{const e=_().gc(c);return e?e.rowsDelta:0}),[c]),Y=(0,a().K8)((()=>_().yv(c)),[c]),Q=(0,a().K8)((()=>_().MW(c)),[c]),Z=(0,a().K8)((()=>{const e=I().A.state;if(e.isActive&&e.simpleTableStore===c){const t=(null==G?void 0:G.length)||Q,n=Y+$,{selection:{start:o,end:i,type:r}}=e;return{start:{col:(0,s().A)(o.col,0,t-1),row:(0,s().A)(o.row,0,n-1)},end:{col:(0,s().A)(i.col,0,t-1),row:(0,s().A)(i.row,0,n-1)},type:r}}}),[c,null==G?void 0:G.length,Q,Y,$],{useDeepEqual:!0}),X=(0,a().K8)((()=>{const e=w().A.state;if(e.isActive&&e.simpleTableStore===c){const{hover:t}=e;if("cell"===t.type&&t.resizing)return"col-resize"}const t=_().gc(c);if(t){if("column"===t.resize)return"col-resize";if("row"===t.resize)return"row-resize";if("corner"===t.resize)return"nwse-resize"}const n=k().A.state;if(n.isActive&&n.simpleTableStore===c)return"grab"}),[c]),J=(0,a().K8)((()=>(0,n(519839).l0)({environment:T,store:c,isFullScreen:!1,sizeObserver:U,collectionContextStore:void 0})),[T,c,U]),ee=(null==J?void 0:J.paddingLeft)||0,te=(0,a().K8)((()=>(0,n(640653).s7)(T)),[T]),ne=(0,a().K8)((()=>!u&&("comment_only"===c.getRole()||"comment"===(null==R?void 0:R.publicEditModeStore.state.permission))&&M.isLoggedIn()),[c,u,R,M]),oe=(0,a().K8)((()=>{const e=c.getContentStores(),t=$<0?e.length+$:e.length,n=(0,d().O9)(b)?e.filter((e=>null==b?void 0:b.includes(e.id))):e;return n.slice(0,t)}),[c,$,b]),ie=(0,a().K8)((()=>n(620689).u5(T)),[T]),re=(0,a().K8)((()=>null==G?void 0:G.map((e=>oe.map((t=>t.getPropertyStore(e)))))),[oe,G]),{headerColumn:ae,headerRow:se}=(0,a().K8)((()=>(0,_().uq)(c)),[c]);(0,r().b)(n(832410).A,(()=>({selection:Z,textStores:re})),[]);const le=(0,o.useCallback)((e=>{P.isMobile||(0,f().SQ)({event:e,context:f().y$.EditorMouseDown,callback:()=>{e.preventDefault(),n(257615).jD({environment:T,target:e.target,startX:e.clientX,startY:e.clientY,showSelectionRect:!0,preventSelectStores:[],allowVerticalEdgeScroll:!0,allowHorizontalEdgeScroll:!0})}})}),[T,P.isMobile]),ce=(0,o.useCallback)((e=>{e&&U.observe(e)}),[U]),de=(0,o.useCallback)((e=>{const t=null==e?void 0:e.getNode();t&&F.observe(t)}),[F]),ue=(0,a().uB)(void 0,n(17090).A);const pe=(0,j.jsx)(n(739283).A,{disableCommentMenu:x,hideContent:A,store:c,recursivelyLoadAllDiscussions:!N,hideIfSidebarOrMarginCommentsVisible:!0}),me=Boolean(pe)&&V>0||E,ge=(0,n(963589).X)("simple_table_buffer")?20:0,fe=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n(2143).H,{type:n(756279).A.X,preventType:ie,style:{flexGrow:1,paddingLeft:ge,marginLeft:-ge},store:ue,children:function(e){if(!G)return;const t=!P.isPhone,n=(0,j.jsx)("div",{style:{display:"flex"},children:(0,j.jsx)("div",{style:{paddingTop:8,paddingBottom:He,paddingInlineEnd:He},children:(0,j.jsx)(m().A,{store:c,shouldShowHalo:!0,canSelect:!0,canDropLeft:t,canDropRight:t,canDropAbove:!1,canDropBelow:!1,aboveDropZoneMargin:4,belowDropZoneMargin:4,analyticsName:"page_content",shouldShowDropZone:!0,style:{position:"relative"},inheritDir:!0,className:g().d0I,shouldShowCommentMenu:ne,nodeRef:O,children:(0,j.jsx)(Le,{store:c,selection:Z,columnOrder:G,formatStore:D,disabled:u,canEdit:B,children:(0,j.jsx)("table",{style:We,children:(0,j.jsxs)("tbody",{ref:O,style:We,children:[oe.map(((e,t)=>(0,j.jsx)(be,{rowIndex:t,rowStore:e,store:c,disabled:u,columnOrder:G,selection:"cell"!==(null==Z?void 0:Z.type)?Z:void 0,formatStore:D,rowCount:Y,columnCount:Q,isHeaderColumnEnabled:ae,isHeaderRowEnabled:se,canEdit:B,format:H},e.id))),$>0&&void 0===b&&[...Array($).keys()].map(((e,t)=>(0,j.jsx)(be,{rowIndex:Y+t,store:c,rowStore:void 0,disabled:u,columnOrder:G,selection:"cell"!==(null==Z?void 0:Z.type)?Z:void 0,formatStore:D,rowCount:Y,columnCount:Q,isHeaderColumnEnabled:ae,isHeaderRowEnabled:se,canEdit:B,format:H},t)))]})})})})})});return(0,j.jsx)("div",{className:g().EUI,style:{cursor:X,...e?{paddingRight:20}:J},children:e?n:(0,j.jsx)(m().A,{store:c,inheritDir:!0,shouldShowCommentMenu:ne,shouldShowHoverMenu:!p&&(B||te),style:z,analyticsName:"page_content",ref:de,isLastItem:C,children:n})})}(me)}),(0,j.jsx)(n(59822).A,{store:ue,leftOverlayStyle:{left:(me?0:-ee)-ge,top:8,bottom:He},rightOverlayStyle:{top:8,bottom:He}})]}),ve=(0,j.jsx)("div",{ref:L,children:(0,j.jsxs)(n(155004).s,{allowSelectionWithin:!0,style:q,ref:ce,onMouseDown:le,children:[me?(0,j.jsx)(m().A,{store:c,shouldShowHoverMenu:!p&&(B||te),shouldShowCommentMenu:ne,style:z,analyticsName:"page_content",ref:de,ignoreForTocSelectionIntersection:!0,children:fe}):fe,pe,(0,j.jsx)(K,{disabled:u,canEdit:B,simpleTableStore:c,rootSizeObserver:U,offset:me?0:ee,hoverSizeObserver:F})]})});(0,a().K8)((()=>(n(522200).A.getState()??{})[c.id]),[c]);return(0,v().NW)(c,t,(0,o.useMemo)((()=>({renderedType:"table",getNode:()=>L.current,getBlockStore:()=>c})),[c]),ve)})),c().A)},850213:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(178624).R)({key:"recentlyUsedHighlightColors",namespace:n(419494).Bq,important:!0,trackingType:"necessary"})},851650:(e,t,n)=>{n.d(t,{lv:()=>v,C5:()=>g,u7:()=>m,uh:()=>f});var o=()=>n(560198),i=()=>n(100622);const r="theme";var a=()=>n(534177),s=()=>n(20822),l=()=>n(661179),c=()=>n(705540);const d=15;function u(e,t){const{ThemeStore:n}=e,{mode:a,usingSystemTheme:s}=t;if(o()._u)return;const l={mode:a};n.setState(l),e.mobileNative&&e.mobileNative.setTheme(a,s),c().setTheme(function(e,t){const n=(0,i().O4)({theme:e});return{mode:e,usingSystemTheme:t,colors:{white:i().Ay.white,blue:i().Ay.blue},borderRadius:4,textColor:n.text.primary,popoverBackgroundColor:n.popoverBackground,popoverBoxShadow:n.shadowMD,inputBoxShadow:n.inputBoxShadow,inputBackgroundColor:n.inputBackground,dividerColor:n.darkDividerColor,shadowOpacity:n.shadowOpacity}}(a,s)),localStorage.setItem(r,JSON.stringify(l)),m(a),"dark"===a?document.body.classList.add("dark"):document.body.classList.remove("dark")}const p={scrollbarTrack:{light:"rgba(0, 0, 0, 0)",dark:"rgba(0, 0, 0, 0)"},scrollbarThumb:{light:"#D3D1CB",dark:"rgba(255, 255, 255, 0.2)"}};function m(e){if(0===l().A.state)return;const t=document.getElementById("scroll-properties");t&&(t.innerHTML=`\n\t\t* {\n\t\t\tscrollbar-width: ${d}px;\n\t\t\tscrollbar-color: ${p.scrollbarThumb[e]}  ${p.scrollbarTrack[e]};\n\t\t}\n\t`)}function g(e){s().A.setState(e)}function f(e){const t=v(e);switch(t){case"dark":case"light":u(e,{mode:t,usingSystemTheme:!1});break;case"system":!async function(e){const{mobileNative:t}=e;let n="light";n=t&&t.api.getTheme?await t.api.getTheme():(0,o().VD)(e),u(e,{mode:n,usingSystemTheme:!0})}(e);break;default:(0,a().HB)(t)}}function v(e){const t=s().A.state||"system";return"dark"===(n=t)||"light"===n||"system"===n?n:"system";var n}},851802:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o},852302:(e,t,n)=>{n.d(t,{g:()=>s,l:()=>l});var o=n(296540),i=n(440961),r=()=>n(970560),a=n(474848);const s=o.memo((function(e){let{stickyAttachPoint:t}=e;const{absoluteHeight:s,stickyStyle:l,transitionStickyStyle:c,nodeRef:d,noPlaceholder:u}=e,{ceilingIsSticky:p,ceilingIsTransitioning:m,ceilingTransitionRef:g,floorIsSticky:f,floorIsTransitioning:v,floorTransitionRef:h,provideHeight:_,registerPortal:b}=(0,o.useContext)(r().e),{ceiling:y,floor:S,horizontalWidthLimiter:w,stickyHorizontally:k}=(0,o.useContext)(n(725976).m);(0,o.useContext)(r().Q)&&(t="no-stick");const[I,x]=(0,o.useState)(0);(0,o.useEffect)((()=>{if(!d.current)return;const e=Math.ceil(d.current.getBoundingClientRect().height);return x(e),"no-stick"!==t&&_(t,e),()=>{"no-stick"!==t&&_(t,-e)}}),[_,d,t]);const A="no-stick"===t?null:"ceiling"===t?y:S,C=("ceiling"===t&&p||"floor"===t&&f)&&null!==A,T="ceiling"===t&&m||"floor"===t&&v,M="ceiling"===t&&g.current||"floor"===t&&h.current||null,P=(0,o.useContext)(n(150866).w),B=(0,o.useMemo)((()=>{const{paddingRight:e,paddingLeft:t,...n}=l||{};return{height:s,transition:"padding-left, padding-right 100ms ease-out",paddingLeft:(t||0)+P,paddingRight:k?void 0:e,...n}}),[s,P,k,l]),R=(0,o.useMemo)((()=>{const{paddingLeft:e,paddingRight:t,...n}=B||{};return{height:s,transition:"padding-left, padding-right 100ms ease-out",...c||n}}),[s,B,c]),E=(0,o.useRef)(null);E.current||(E.current=document.createElement("div"),E.current.style.overflowX="hidden"),o.useLayoutEffect((()=>{E.current&&(E.current.style.width=w&&C?`${w}px`:"100%")}),[w,C]);const D=(0,o.useRef)(null);o.useLayoutEffect((()=>{if(E.current)if(T&&M)M.appendChild(E.current),E.current.style.overflowX="initial";else if(C)A.appendChild(E.current),E.current.style.overflowX="clip";else{var e;null===(e=D.current)||void 0===e||e.appendChild(E.current),E.current.style.overflowX="initial"}}),[C,T,M,A,t]);const N=(0,o.useRef)();(0,o.useEffect)((()=>()=>{var e,t;null===(e=E.current)||void 0===e||e.remove(),E.current=null,null===(t=N.current)||void 0===t||t.call(N),N.current=void 0}),[]);const L=(0,o.useCallback)((e=>{var n;null===(n=N.current)||void 0===n||n.call(N),N.current=void 0,"no-stick"!==t&&e&&(N.current=b(t,e))}),[b,t]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{height:u?0:I},ref:D}),i.createPortal((0,a.jsx)("div",{children:(0,a.jsx)("div",{ref:L,style:C?B:T&&M?R:void 0,children:(0,a.jsx)("div",{style:{position:"relative"},children:e.children})})}),E.current)]})}));function l(e){let{children:t}=e;return(0,a.jsx)(r().Q.Provider,{value:!0,children:t})}l.displayName="StickyPortalNoStick"},852477:(e,t,n)=>{n.d(t,{A:()=>s,c:()=>r});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);var o=n(296540),i=()=>n(484714);const r=new Set;function a(){for(const e of r)e()}function s(){const e=(0,i().Y0)();(0,o.useEffect)((()=>{if(e.isMobile)return document.addEventListener("scroll",a,!0),()=>{document.removeEventListener("scroll",a,!0)}}),[e.isMobile])}},852678:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(463830).A)},854502:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{dropTargetRectMap:new Map}}}const i=new o;(0,n(604341).exposeDebugValue)("GlobalDropTargetRectStore",i);const r=i},854672:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(807683),r=()=>n(360083),a=n(474848);function s(e){const t=(0,n(401497).DP)(),o="notion_icon"!==e.type&&"app_package_asset"!==e.type&&"data_url"!==e.type&&"svg"===n(522419).QC(e.imageURL),s="authenticated_image_url"===e.type&&e.permissionRecord.table===n(837420).e;let l;l="notion_icon"===e.type||s?e.size*(e.largeIcon?1:.96):e.size*(e.isLarge?1:.888);const c={width:l,height:l,objectFit:o?"fill":s?"contain":"cover",borderRadius:4,transition:"opacity 100ms ease-out",...o&&{padding:.05*e.size},...e.imageStyle};let d;(e.isLoading||"data_url"===e.type)&&(c.opacity=.3);const{type:u}=e;if("data_url"===u)d=(0,a.jsx)(i().Ay,{alt:e.alt,src:e.dataURL,style:c,testId:e.testId});else if("image_url"===u)d=(0,a.jsx)(r().A,{isAuthenticated:!1,url:e.imageURL,width:l,render:(t,n)=>(0,a.jsx)(i().Ay,{alt:e.alt,src:n,style:c,testId:e.testId})});else if("notion_icon"===u){const n=e.useInvertedColors?t.invertedMode:t.mode;d=(0,a.jsx)(i().Ay,{alt:e.alt,src:`${e.icon}?mode=${n}`,style:{...c,background:void 0},onContextMenu:e=>e.preventDefault(),testId:e.testId})}else"app_package_asset"===u?d=(0,a.jsx)(i().Ay,{alt:e.alt,src:e.icon,style:c,onContextMenu:e=>e.preventDefault(),testId:e.testId}):"authenticated_image_url"===u?d=(0,a.jsx)(r().A,{isAuthenticated:!0,url:e.imageURL,permissionRecord:e.permissionRecord,width:l,render:(t,n)=>(0,a.jsx)(i().Ay,{alt:e.alt,src:n,style:c,testId:e.testId}),disableAnimation:e.disableAnimation}):(0,n(534177).HB)(u);return(0,a.jsxs)("div",{style:{position:e.isLoading?"relative":void 0,...e.style},children:[d,e.isLoading&&(0,a.jsxs)("div",{style:{...i().fd,...e.progressContainerStyle},children:[(0,a.jsx)(n(331542).A,{size:"md",style:{marginRight:4}}),(0,a.jsx)("div",{style:{width:30,textAlign:"right"},children:(0,a.jsx)(n(773382).A,{percentage:e.progressPercent||0})})]})]})}const l=o.memo(s)},855801:(e,t,n)=>{n.d(t,{D6:()=>s,VI:()=>i,nd:()=>l,z:()=>a,zQ:()=>r});var o=()=>n(645873);const i={duplicateActions:new(o().O2)("duplicateActions",(async()=>await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(90871)]).then(n.bind(n,183324))),{waitForInitialPageRender:!0}),selectableBlockActions:new(o().O2)("selectableBlockActions",(async()=>await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(99171)]).then(n.bind(n,87017)))),loadLocalSubtree:new(o().O2)("loadLocalSubtree",(async()=>await n.e(48486).then(n.bind(n,59110))))};async function r(){return(await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(5834)]).then(n.bind(n,375078))).transformBlocks}async function a(){return(await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(5834)]).then(n.bind(n,375078))).maybeTurnCollectionViewIntoCollectionViewPage}async function s(){const e=await i.duplicateActions.load(),t=await i.loadLocalSubtree.load();return{duplicateBlock:e.duplicateBlock,localDuplicate:e.localDuplicate,loadLocalSubtree:t.loadLocalSubtree,shouldUseDuplicateTemplateBlock:e.shouldUseDuplicateTemplateBlock}}async function l(){const e=await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(37045)]).then(n.bind(n,533705));return{createAndDuplicatePageInSpace:e.createAndDuplicatePageInSpace,messages:e.messages}}},855821:(e,t,n)=>{n.d(t,{t:()=>s});n(898992),n(803949);var o=()=>n(675074),i=()=>n(722101),r=()=>n(186445),a=()=>n(299545);function s(e){const{environment:t,files:n,commentStore:s,transaction:l}=e,c=r().y0(t),d=a().eP(s);o().$C({files:n,environment:t,inMemoryRecordCache:s.inMemoryRecordCache,transaction:l,pageWidth:c,ignoreOversizedFiles:!0,spaceId:d.pointer.spaceId}).forEach((e=>{i().BC({parentStore:d,appendStore:e,transaction:l})}))}},857076:(e,t,n)=>{n.d(t,{W:()=>a});var o=()=>n(847249),i=()=>n(908521),r=()=>n(600871);function a(e){const{device:t,overrideHeaderFontSizes:n}=e,a=(0,r().cV)({device:t});return(0,o().K8)((()=>t.isPhone?a?i().BV:i().qd:n||i().Qk),[n,t,a])}},857437:(e,t,n)=>{n.d(t,{$:()=>i});var o=n(296540);function i(){const[e,t]=(0,o.useState)({inputElementAttributes:void 0,suppressFocusRing:!1}),[n,i]=(0,o.useState)(!1),[r,a]=(0,o.useState)(!1);(0,o.useEffect)((()=>{if(n){function e(){a(!1)}function t(e){"ArrowDown"!==e.key&&"ArrowUp"!==e.key||a(!0)}return window.addEventListener("pointerdown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("keydown",t)}}}),[n]);return[(0,o.useMemo)((()=>({inputElementAttributes:e.inputElementAttributes,suppressFocusRing:e.suppressFocusRing&&r,onFocus:()=>{i(!0)},onBlur:()=>{i(!1)}})),[e,r]),(0,o.useMemo)((()=>({setComboboxState:t,isFocusVisible:r,isComboboxFocused:n,onItemHover:()=>{a(!1)}})),[r,n])]}},857783:(e,t,n)=>{n.d(t,{_U:()=>h,u3:()=>f,uK:()=>g});n(944114);var o=()=>n(584262),i=()=>n(179034),r=()=>n(939768),a=()=>n(211716),s=()=>n(492414),l=()=>n(41161),c=()=>n(630116),d=()=>n(741496),u=()=>n(751156),p=()=>n(345913),m=()=>n(435009);function g(e){const{environment:t,store:n,redirect:i,openInNew:c,visitType:d,pageVisitSource:u,queryId:p,callback:g}=e,f=(0,s().J8)({fullyQualified:!1,...e});n.isNavigableBlock()&&l().A.recordVisit({id:n.id,systemBlockType:n.getSystemBlockTypeStore().getValue(),type:void 0!==d?d:a().ig.Default,currentUserId:t.currentUser.id}),m().oo({environment:t,url:u?r().O$(f,{[o().k3]:u,[o().CW]:c?p:void 0}):f,redirect:i,openInNew:c,queryId:p,callback:g})}function f(e){const{environment:t,targetId:n}=e;if(t.device.isMobile)return;const o=v.state;if(void 0===o)return;if(n!==o)return;const r=new(c().Bv)(t,{id:n,table:i().ev});if("page"!==r.getType())return;const a=r.getContentStores(),s=1===a.length?a[0]:void 0,l=s&&s.isEmptyEditableBlock();r.isEmptyTitle()&&(r.isEmptyPage()||l)&&u().createAndCommit({userAction:"blockNavigationActions.maybeGarbageCollectEmptyPage",environment:t,canUndo:!0,perform:e=>{p().oD({environment:t,blocks:[r],transaction:e}),e.postSubmitCallbacks.push((e=>{e||(0,d().N)(t,{analyticsName:"delete",from:"navigation_actions",block_id:r.id,block_type:"page"})}))}})}const v=n(757695).default.createValue(void 0,{name:"NewPageEmptyAutoDeleteStore"});function h(e){v.setState(e.id)}},858141:(e,t,n)=>{n.d(t,{p:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M4 3.375c-.897 0-1.625.728-1.625 1.625v2.5c0 .897.728 1.625 1.625 1.625h3.5c.897 0 1.625-.728 1.625-1.625V5c0-.897-.728-1.625-1.625-1.625zM3.625 5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375v2.5a.375.375 0 0 1-.375.375H4a.375.375 0 0 1-.375-.375zM4 10.875c-.897 0-1.625.727-1.625 1.625V15c0 .898.728 1.625 1.625 1.625h3.5c.897 0 1.625-.727 1.625-1.625v-2.5c0-.898-.728-1.625-1.625-1.625zM3.625 12.5c0-.207.168-.375.375-.375h3.5c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375H4A.375.375 0 0 1 3.625 15zm7.25-7.5c0-.897.727-1.625 1.625-1.625H16c.898 0 1.625.728 1.625 1.625v2.5c0 .897-.727 1.625-1.625 1.625h-3.5A1.625 1.625 0 0 1 10.875 7.5zm1.625-.375a.375.375 0 0 0-.375.375v2.5c0 .207.168.375.375.375H16a.375.375 0 0 0 .375-.375V5A.375.375 0 0 0 16 4.625zm0 6.25c-.898 0-1.625.727-1.625 1.625V15c0 .898.727 1.625 1.625 1.625H16c.898 0 1.625-.727 1.625-1.625v-2.5c0-.898-.727-1.625-1.625-1.625zm-.375 1.625c0-.207.168-.375.375-.375H16c.207 0 .375.168.375.375V15a.375.375 0 0 1-.375.375h-3.5a.375.375 0 0 1-.375-.375z"})},i=(0,n(340498).wt)("squareGrid2X2",o)},859002:(e,t,n)=>{n.r(t),n.d(t,{chatIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M15.625 7.492V5.188A2.125 2.125 0 0 0 13.5 3.063h-10a2.125 2.125 0 0 0-2.125 2.125v6.5c0 1.173.951 2.124 2.125 2.124h.188v2.045a.625.625 0 0 0 1.006.496l3.231-2.486v.325c0 .905.733 1.638 1.638 1.638h3.262l2.558 1.968a.625.625 0 0 0 1.006-.496V15.83h.599c.904 0 1.637-.733 1.637-1.638V9.13c0-.905-.733-1.638-1.637-1.638zm-1.25-2.304v2.304H9.563c-.905 0-1.638.733-1.638 1.638v3.432h-.142a.63.63 0 0 0-.38.13l-2.465 1.896v-1.4a.625.625 0 0 0-.625-.626H3.5a.875.875 0 0 1-.875-.874v-6.5c0-.484.392-.875.875-.875h10c.483 0 .875.391.875.875M9.563 8.742h7.425c.214 0 .387.174.387.388v5.062a.387.387 0 0 1-.387.388h-1.224a.625.625 0 0 0-.625.625v.828l-1.72-1.324a.63.63 0 0 0-.382-.13H9.563a.39.39 0 0 1-.388-.387V9.13c0-.214.174-.388.388-.388"})},i=(0,n(340498).wt)("chat",o)},859004:(e,t,n)=>{n.d(t,{jI:()=>O,Tp:()=>L,rT:()=>U,M2:()=>V,X9:()=>F});n(898992),n(672577),n(803949),n(581454);var o=()=>n(148307),i=()=>n(617871),r=()=>n(651124),a=()=>n(857639),s=()=>n(206267),l=()=>n(323086),c=()=>n(179034),d=()=>n(824862),u=()=>n(519831),p=()=>n(869558),m=()=>n(919709),g=()=>n(506391),f=()=>n(973647),v=()=>n(615234);const h=(0,n(583835).Dv)("importSalesforceReport");var _=()=>n(686526),b=()=>n(901389),y=()=>n(357625),S=()=>n(510683),w=()=>n(496414),k=()=>n(246826),I=()=>n(751156),x=()=>n(519839),A=()=>n(989423),C=()=>n(572088),T=()=>n(594794),M=()=>n(972435),P=()=>n(351360),B=()=>n(53137),R=()=>n(994641),E=()=>n(630116),D=()=>n(254526);const N=(0,n(959013).YK)({SalesforceReportSyncFailed:{id:"salesforce.reportSyncFailed",defaultMessage:"Failed to sync Salesforce report: {reportId}. Error: {error}"},SalesforceInvalidReportUrl:{id:"salesforce.invalidReportUrl",defaultMessage:"Invalid Salesforce report URL"},SalesforceAuthorizationError:{id:"salesforce.unauthorizedAccess",defaultMessage:"Unauthorized Error: Invalid Salesforce credentials."},SalesforceAuthenticationInvalidDetails:{id:"salesforce.invalidDetails",defaultMessage:"Invalid Details"}});async function L(e){const{environment:t,from:n,spaceId:o,flowId:i,authType:r}=e;"admin"===r?U({environment:t,from:n,action:"add_account"}):await O({environment:t,from:n,spaceId:o,flowId:i,authType:r})}async function O(e){const{environment:t,from:n,spaceId:o,flowId:r,authType:s}=e;(0,A().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin"===s?"admin_auth_initiated":"member_auth_initiated",flowId:r}}});try{if(!t.currentUser.id)return b().rG({message:M().A.formatMessage(N.SalesforceAuthenticationInvalidDetails)}),void w().V();const e=B().A.integrations.state.find((e=>e.id===i().mn));if(!e)return;const a=B().A.integrations.state.find((e=>e.id===i().Iy));let l;if("user"===s){if(!a)return;l=a}else l=e;const c=await S().En({environment:t,integration:l,spaceId:o,from:n});(0,A().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin"===s?"admin_auth_status":"member_auth_status",flowId:r,status:f().Q.isSuccess(c)?"success":"failed"}}}),f().Q.isFail(c)?(R().A.reset(),b().rG({message:M().A.formatMessage(N.SalesforceAuthorizationError)})):R().A.setState({...R().A.state,open:!1}),w().V()}catch(l){(0,A().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_status",flowId:r,status:"failed"}}}),a().log({level:"error",from:"salesforceActions",type:"authenticateWithSalesforce",data:{message:"Failed to authenticate with Salesforce",miscDataToConvertToString:{from:n,err:l}}})}}function U(e){const{environment:t,from:n,action:o}=e,{currentSpaceStore:i}=P().default.state;if(!i)return;const r=(0,s().JW)();R().A.setState({type:"auth",action:o,from:n,flowId:r,open:!0,selectedAccess:"double_auth"}),(0,A().u4)({environment:t,event:{eventName:"external_sync_auth",eventProperties:{integration:"salesforce",actionType:"admin_auth_render",flowId:r}}})}async function F(e){const{environment:t,collectionStore:n,from:o}=e,r=n.getFormat();if("Salesforce"!==r.external_collection_type||!r.synced_collection_external_url)return;const s=B().A.integrations.state.find((e=>e.id===i().mn));if(!s)return;const{instanceUrl:l,reportId:c}=z(r.synced_collection_external_url,s);c&&l?(a().log({level:"debug",from:"salesforceActions",type:"startReportImport",data:{miscDataToConvertToString:{flowId:R().A.getFlowId(),from:o,spaceId:n.getSpaceId(),parentBlockId:n.getParentId(),reportId:c,instanceUrl:l}}}),await j({environment:t,collectionStore:n,integration:s,bots:[],resync:!0,report:{instanceUrl:l,reportId:c,reportUrl:r.synced_collection_external_url}})):b().f1(M().A.formatMessage(N.SalesforceInvalidReportUrl))}async function V(e){const{url:t,environment:n,integration:s,blockStore:g}=e,f=(0,C().jw)(i().mn),{currentSpaceViewStore:v,currentSpaceStore:h}=P().default.state;if(!v||!h)return;if(0===f.length)return;const{instanceUrl:y,reportId:S}=z(t,s);if(!S||!y)return void b().f1(M().A.formatMessage(N.SalesforceInvalidReportUrl));a().log({level:"debug",from:"salesforceActions",type:"startReportImport",data:{miscDataToConvertToString:{spaceId:g.getSpaceId(),parentBlockId:g.id,reportId:S,instanceUrl:y}}});const{serverCommitResult:w,performResult:A}=I().createAndCommit({environment:n,perform:t=>function(e){const{environment:t,blockStore:n,transaction:i}=e,a=(0,T().Z1)({environment:t,table:p().Gy,spaceId:n.getSpaceId()}),s=(0,T().Z1)({environment:t,table:u().Vl,spaceId:n.getSpaceId()}),d=E().md.createChildStore(n,{table:u().Vl,id:s,spaceId:n.getSpaceId()}),{model:g,operations:f}=l().WB.create({id:s,parent:n.pointer,space_id:n.getSpaceId(),name:m().lux(m().x9d("Salesforce Report"),e.url),format:{sync_state:{syncing:!1},synced_collection_external_url:e.url,external_collection_type:r().uO.Salesforce,collection_page_properties:[],bot_id:e.botId},icon:o().A.images.externalIntegrations.salesforceReportsPng,schema:{}});return k().eC({inMemoryRecordCache:n.inMemoryRecordCache,environment:t,table:p().Gy,value:{id:a,type:"table",parent_id:n.id,parent_table:c().ev,space_id:n.getSpaceId(),alive:!0,format:{collection_pointer:{table:u().Vl,id:s,spaceId:n.getSpaceId()}},query2:{aggregations:[],sort:[{property:"title",direction:"ascending"}]}},transaction:i}),k().zv({store:n,data:{type:"collection_view",collection_id:s,parent_table:c().ev,parent_id:n.getParentId(),alive:!0,view_ids:[a]},transaction:i}),f.forEach((e=>{I().applyOperation({store:d,operation:e,transaction:i})})),{collectionModel:g,collectionStore:d}}({...e,botId:f[0].id,spaceViewStore:v,transaction:t}),canUndo:!0,userAction:"external_sync_actions.createSalesforceReportSync"});await w;const B=A.collectionStore,L=await(0,x().VZ)({environment:n,collectionStore:B});if(R().A.setState({type:"report",status:"started",flowId:R().A.getFlowId(),collectionId:B.id,url:t}),(0,D().Ow)()){if(L.settingsStore.state.open)return;const e=E().vK.createChildStore(h,{table:d().GP,id:f[0].id,spaceId:h.id});if("connected"!==(0,D().i_)(e).status)return void _().eM({collectionSettingsStore:L.settingsStore,source:"external_source"})}await j({environment:n,collectionStore:B,integration:s,bots:f.map((e=>e.id)),resync:!1,report:{instanceUrl:y.toString(),reportId:S.toString(),reportUrl:t}})}async function j(e){const{environment:t,collectionStore:n,bots:o,resync:i=!1}=e;R().A.setState({type:"report",status:"in_progress",flowId:R().A.getFlowId(),collectionId:n.id,url:e.report.reportUrl});const r=(0,y().UT)(t,h,{spaceId:n.getSpaceId(),botIds:o,collectionId:n.id,taskType:i?"resync":"import",report:e.report});for await(const u of r){var s;if("in_progress"!==u.taskStatus)if("success"===u.taskStatus&&a().log({level:"info",from:"salesforceActions",type:"reportImportCompleted",data:{miscDataToConvertToString:{spaceId:n.getSpaceId(),...e.report}}}),"failure"===u.taskStatus||"dead"===u.taskStatus||"timeout_before_execution"===u.taskStatus||"retryable_failure"===u.taskStatus)if(u.error)b().f1(M().A.formatMessage(N.SalesforceReportSyncFailed,{reportId:e.report.reportId,error:null===(s=u.error)||void 0===s?void 0:s.message}))}const l=n.getParentBlockStore();if(!l)return;const c=function(e){const{blockStore:t,collectionId:n}=e;return E().md.createChildStore(t,{table:u().Vl,id:n,spaceId:t.getSpaceId()})}({blockStore:l,collectionId:n.id}),d=c.getFormat().sync_state;null!=d&&d.syncing&&void 0!==(null==d?void 0:d.last_synced_at)&&d.last_synced_at<Date.now()-10*v().Xb&&(a().log({level:"error",from:"salesforceActions",type:"salesforceReportSyncStuck",data:{miscDataToConvertToString:{collectionId:n.id,syncState:d}}}),I().createAndCommit({environment:t,perform:e=>{var t;k().zv({store:n,data:{format:{sync_state:{syncing:!1,last_synced_at:(null===(t=n.getFormat().sync_state)||void 0===t?void 0:t.last_synced_at)||Date.now()}}},transaction:e})},canUndo:!1,userAction:"external_sync_actions.updateSalesforceReportSyncState"})),R().A.setState({type:"report",status:"completed",flowId:R().A.getFlowId(),collectionId:n.id,url:e.report.reportUrl})}function z(e,t){var n,o;const i=(0,g().WS)({url:e,integration:t}),r=null===(n=i.find((e=>"Id"===e.id)))||void 0===n||null===(n=n.values[0])||void 0===n?void 0:n.toString();return{instanceUrl:null===(o=i.find((e=>"instanceUrl"===e.id)))||void 0===o||null===(o=o.values[0])||void 0===o?void 0:o.toString(),reportId:r}}},859384:(e,t,n)=>{n.d(t,{M:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m16.774 4.341-.59.589-1.109-1.11.596-.594a.784.784 0 0 1 1.103 0c.302.302.302.8 0 1.102zM8.65 12.462l6.816-6.813-1.11-1.11-6.822 6.808a1.1 1.1 0 0 0-.236.393l-.289.932c-.052.196.131.38.315.314l.932-.288a.9.9 0 0 0 .394-.236"}),(0,o.jsx)("path",{d:"M4.375 6.25c0-1.036.84-1.875 1.875-1.875H11a.625.625 0 1 0 0-1.25H6.25A3.125 3.125 0 0 0 3.125 6.25v7.5c0 1.726 1.4 3.125 3.125 3.125h7.5c1.726 0 3.125-1.4 3.125-3.125V9a.625.625 0 1 0-1.25 0v4.75c0 1.036-.84 1.875-1.875 1.875h-7.5a1.875 1.875 0 0 1-1.875-1.875z"})]})},r=(0,n(340498).wt)("compose",i)},859428:(e,t,n)=>{n.d(t,{A:()=>w,n:()=>h});var o=n(296540),i=()=>n(484714),r=()=>n(819121),a=()=>n(847249),s=()=>n(401497),l=()=>n(284371),c=()=>n(720665),d=()=>n(962730),u=()=>n(377586),p=()=>n(230062),m=()=>n(732770),g=()=>n(487941),f=()=>n(897119),v=n(474848);function h(e,t){return{background:t?e.contentBackground:e.tooltipBackground,color:t?e.text.primary:e.text.contrastPrimary,borderRadius:6,padding:"4px 8px",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontSize:12,lineHeight:1.4,fontWeight:l().Wy.medium}}const _=200,b=500;function y(e){let{allowHover:t,alignment:n,closeDelay:l,delayThreshold:p,disableTooltip:m,forceVisibleState:h,isLightBackground:b,noStyle:y,originRect:S,originGap:w,overlayContainerStore:M,overlayContainerZIndex:P,placement:B,render:R,renderTooltip:E,store:D,style:N,textWrap:L,tooltipClassName:O}=e;const U=(0,s().DP)(),F=(0,a().uB)(D,g().A),V=(0,i().WS)(),j=(0,o.useRef)(),z=(0,o.useRef)();(0,o.useEffect)((()=>{m&&(F.state.hovered||F.state.focused)&&C(j,z,F)}),[m,F]);const H=(0,o.useRef)(p);(0,o.useEffect)((()=>{j.current&&(H.current??_)>0&&0===p&&T(j,z,F,p),H.current=p}),[p,F]),(0,o.useEffect)((()=>()=>{C(j,z,F)}),[F]);const W=(0,o.useMemo)((()=>({onMouseEnter:()=>function(e,t,n){A(e,t),x(n)}(j,z,F),onMouseLeave:()=>function(e,t,n,o){A(e,t),t.current=window.setTimeout((()=>{C(e,t,n)}),k(o))}(j,z,F,l),onMouseOver:()=>{!function(e,t,n){A(e,t),x(n)}(j,z,F)}})),[l,F]),q=(0,a().K8)((()=>function(e,t){return(0,c().pN)(t)?e.state.hovered||e.state.focused:t}(F,h)),[h,F]),K=(0,a().K8)((()=>R({onFocus:e=>function(e,t){(0,r().p)(e.target)&&t.setState({...t.state,focused:!0})}(e,F),onBlur:()=>function(e){e.setState({...e.state,focused:!1})}(F),onMouseEnter:()=>T(j,z,F,p),onMouseLeave:()=>function(e,t,n,o,i){o?(A(e,t),t.current=window.setTimeout((()=>{C(e,t,n)}),k(i))):C(e,t,n)}(j,z,F,t,l),onMouseDown:()=>function(e,t,n){C(e,t,n)}(j,z,F)},q)),[t,l,p,q,R,F]);return(0,v.jsx)(f().Ay,{popupType:V?u().n.SlideUp:u().n.Popup,open:q,origin:K,popupClassName:O,originRect:S,originGap:w||6,placementToOrigin:B??d().W.Top,alignmentToOrigin:n??d().C.Center,preventScaleTransition:!0,preventOpacityTransition:!0,style:I(U,y,b,L,N),viewportPadding:4,preventCaptureEsc:!0,preventPointerEvents:!t,disableMouseCapture:!0,render:()=>E(W),trapFocus:!1,overlayContainerStore:M,overlayContainerZIndex:P,suppressOriginContext:!0})}function S(e){let{render:t}=e;return(0,a().K8)((()=>t({},!1)),[t])}function w(e){return(0,i().WS)()||e.disableTooltip&&!e.forceRenderTooltipPopupComponent?(0,v.jsx)(S,{...e}):(0,v.jsx)(y,{...e})}function k(e){return void 0===e?b:e}function I(e,t,n,o,i){const r=t?{}:h(e,Boolean(n));return o||(r.whiteSpace="nowrap"),{...r,...i}}function x(e){e.setState({...e.state,hovered:!0})}function A(e,t){e.current&&(window.clearTimeout(e.current),e.current=void 0),t.current&&(window.clearTimeout(t.current),t.current=void 0)}function C(e,t,n){A(e,t),n.setState({...n.state,hovered:!1})}function T(e,t,n,o){if(!p().A.state&&!m().A.state.isKeyboardMode){A(e,t);const i=void 0===o?_:o;e.current=window.setTimeout((()=>{x(n)}),i)}}},860921:(e,t,n)=>{n.d(t,{z:()=>r});var o=()=>n(365002),i=()=>n(176983);function r(){const e=(0,i().J)();return(0,o()._)()?e?"unavailable":"requestAccessNoFreeCredits":e?"upsell":"requestAccess"}},861841:(e,t,n)=>{n.d(t,{Ay:()=>s,Hf:()=>l,OX:()=>i,bH:()=>o});let o=function(e){return e[e.Above=0]="Above",e[e.Below=1]="Below",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Onto=4]="Onto",e}({}),i=function(e){return e[e.Selectable=0]="Selectable",e[e.DropTarget=1]="DropTarget",e}({});class r extends(()=>n(757695))().default{getInitialState(){return{isDragging:!1}}}const a=new r,s=a,l=new(n(496506).default)((()=>a.state.isDragging),{debugName:"DragBlockStoreIsDraggingStore"})},862292:(e,t,n)=>{n.d(t,{T:()=>i});var o=()=>n(645873);const i={formulas:new(o().O2)("formulas",(async()=>await Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(22542)]).then(n.bind(n,80979)))),formulaAnalytics:new(o().O2)("formulas",(async()=>await n.e(76793).then(n.bind(n,867187)))),simpleFormulas:new(o().O2)("simpleFormulas",(async()=>await Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(54220)]).then(n.bind(n,791089)))),formulaConstants:new(o().O2)("formulaConstants",(async()=>await Promise.resolve().then(n.bind(n,247331)))),formulaEditor:new(o().O2)("formulaEditor",(async()=>await Promise.all([n.e(62475),n.e(3151),n.e(98629),n.e(28721),n.e(55776)]).then(n.bind(n,66529)))),formulaPermissions:new(o().O2)("formulaPermissions",(async()=>await Promise.all([n.e(62475),n.e(3151),n.e(35537)]).then(n.bind(n,871202)))),collectionFormulaHelpers:new(o().O2)("collectionFormulaHelpers",(async()=>await Promise.resolve().then(n.bind(n,708685))))}},862835:(e,t,n)=>{n.d(t,{h:()=>r});var o=()=>n(351360),i=()=>n(508496);function r(){const{currentSpaceStore:e}=o().default.state;return Boolean(window.isSecureContext&&(null==e?void 0:e.canRead())&&e.isAiEnabledOnSpace()&&"on"===i().default.getEligibleGroup({experimentId:"dictation_experiment_v2",defaultGroup:"control"}))}},863188:(e,t,n)=>{n.d(t,{Pl:()=>ee,Ul:()=>Z,_D:()=>X});n(944114),n(898992),n(581454),n(908872),n(737550);var o=()=>n(700500),i=()=>n(634201),r=()=>n(72135),a=()=>n(179034),s=()=>n(919709),l=()=>n(220719),c=()=>n(711059),d=()=>n(496603),u=()=>n(534177),p=()=>n(855801),m=()=>n(328732),g=()=>n(197194);function f(e,t){return i().PE(e.substring(0,t)).length}var v=()=>n(231722),h=()=>n(544303),_=()=>n(969197),b=()=>n(494043),y=()=>n(110955),S=()=>n(630116),w=()=>n(502438),k=()=>n(24157),I=()=>n(989423);function x(e,t){I().vd(e,"annotation_filter",t)}var A=()=>n(896628),C=()=>n(778417),T=()=>n(538527),M=()=>n(319975),P=()=>n(261374),B=()=>n(725614),R=()=>n(751156),E=()=>n(62287);function D(e){var t;const{environment:n,store:r,toBlockType:a,matchRegex:c,insertTextAfter:d,transaction:u,postTransformAction:p,selectableBlockActions:g}=e,f="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!f)return;const h=y().A.state.open?1:0,x=i().PE(s().q4_(r.getValue())).slice(h,f.endIndex).join(""),A=c.exec(x);if(!A)return;const T=r.getRecordStoreUIParent();if(!(T&&T instanceof S().Bv))return;const R=T.getType();if(!R)return;if(R!==o().xd.text&&!o().bl[R])return;const D=a(A);if(void 0===D||D===R)return;let N,L=D;T instanceof S().Bv&&("toggle"===D&&(0,o().CN)(T.getType())?(L=b().x_(R),N=L):"toggle"===R&&b().O3(D)&&(L=b().x_(D),N=L),E().pd({environment:n,block:T,blockType:L,transaction:u}));const O={startIndex:0,endIndex:A&&i().PE(A[0]).length||0};if(M().jQ({environment:n,store:r,selection:O,transaction:u}),d&&g){const e=g.insertBlockBelow({environment:n,selection:w().default.state.stores,createBlockItem:m().ry[o().xd.text],analyticsFrom:"divider"===D?"divider_block_transform":"text_filter_actions",transaction:u});e&&(P().Ad({environment:n,blockStore:(0,l().o9)((0,_().T)(r)),store:r,targetBlockStore:e,splitAtIndex:0,transaction:u}),C().hc({environment:n,store:e}),B().setSelectionAtStart({store:e.getBlockTitleStore()}))}p&&p(A),function(e,t){I().vd(e,"transform_text_block_filter",t)}(n,{type:D,format_block_type:N,shortcut:x})}function N(e){var t,n;const{environment:o,editorMode:r,store:a,transaction:l,regex:c,length:d,analyticsType:u,replace:p}=e,m="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!m)return;const g=a.getValue()||[],h=s().q4_(g),_=i().PE(h).slice(0,m.endIndex).join(""),b=c.exec(_);if(!b)return;const y=f(h,b.index),S={startIndex:y,endIndex:y+d},w=a.getValue()||[];if(s().wuy(w,S.startIndex,S.endIndex,"c"))return;const x="function"==typeof p?p({match:b,matchIndex:y,textValue:g}):p;if(void 0===x)return;if(M().jQ({environment:o,store:a,selection:S,transaction:l}),"editing"!==k().default.state.mode)return;const A=null===(n=(0,v().H7)(k().default.state.multiSelection))||void 0===n?void 0:n.selection;A&&(M().$D({environment:o,editorMode:r,store:a,selection:A,string:x,disableMentions:!0,disableSlashCommands:!0,disableEmojiCommands:!0,transaction:l}),function(e,t){I().vd(e,"unicode_filter",t)}(o,{type:u}))}function L(e){var t;const{environment:n,store:o,delimiter:r,annotation:a,transaction:l}=e,c="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!c)return;const d=o.getValue(),u=O({delimiter:r,storeValue:d,selectionEndIndex:c.endIndex});if(!u)return;if(!U({delimiter:r,storeValue:d,...u}))return;if(s().Uft(d,u.startIndex,u.endIndex,s().Ifu.Code))return;const{textValue:p,startIndex:m,endIndex:g}=u,h=f(p,m),_=p.slice(m,g),b=i().PE(_).length,y={startIndex:h,endIndex:h+r.length};M().jQ({environment:n,store:o,selection:y,transaction:l});const S={startIndex:h+b-r.length-r.length,endIndex:h+b-r.length};M().jQ({environment:n,store:o,selection:S,transaction:l});const w={startIndex:y.startIndex,endIndex:S.startIndex};T().Mw({environment:n,store:o,selection:w,annotation:a,transaction:l});const I=w.endIndex;B().setSelection({store:o,selection:{startIndex:I,endIndex:I}}),B().setExtendAnnotation({annotation:a,extend:!1}),x(n,{type:s()._XS(a)})}function O(e){const{delimiter:t,storeValue:n,selectionEndIndex:o}=e,r=i().PE(s().q4_(n)).slice(0,o).join("");if(0===r.length||!r.endsWith(t))return;const a=r.split(t);if(a.length<=2)return;a.reverse();const[l,...c]=a.slice(1),u=d().cz(c.map((e=>e.length+t.length)))-t.length;return{textValue:r,matchString:l,startIndex:u,endIndex:u+l.length+2*t.length}}function U(e){const{delimiter:t,matchString:n,startIndex:o,endIndex:i,textValue:r}=e;return n.length>0&&!/\s/g.test(n[0])&&!/\s/g.test(n[n.length-1])&&!n.startsWith(t)&&!n.endsWith(t)&&(!r[o-1]||/[\s(]/g.test(r[o-1]))&&(!r[i]||/[\s)]/g.test(r[i]))}function F(e){var t;const{environment:n,delimiter:o,store:r,transaction:a}=e,l="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!l)return;const c=r.getValue(),d=O({delimiter:o,storeValue:c,selectionEndIndex:l.endIndex});if(!d)return;if(!function(e){const{storeValue:t,startIndex:n,endIndex:o,delimiter:i}=e;if(!U(e))return!1;const r={[s().Ifu.User]:s().Ifu.User,[s().Ifu.Page]:s().Ifu.Page,[s().Ifu.CustomEmoji]:s().Ifu.CustomEmoji,[s().Ifu.Comment]:s().Ifu.Comment,[s().Ifu.Bot]:s().Ifu.Bot,[s().Ifu.ExternalObjectInstance]:s().Ifu.ExternalObjectInstance,[s().Ifu.Date]:s().Ifu.Date,[s().Ifu.TemporaryPage]:s().Ifu.TemporaryPage,[s().Ifu.TemplateVariable]:s().Ifu.TemplateVariable,[s().Ifu.FormulaPageProperty]:s().Ifu.FormulaPageProperty,[s().Ifu.FormulaContextValue]:s().Ifu.FormulaContextValue,[s().Ifu.Group]:s().Ifu.Group,[s().Ifu.Team]:s().Ifu.Team,[s().Ifu.Citation]:s().Ifu.Citation,[s().Ifu.LinkMention]:s().Ifu.LinkMention,[s().Ifu.AssistantInstructionsCollection]:s().Ifu.AssistantInstructionsCollection,[s().Ifu.GeoPoint]:s().Ifu.GeoPoint,[s().Ifu.SlackSpecialMention]:s().Ifu.SlackSpecialMention};for(const a of Object.values(r))if(s().wuy(t,n,o,a))return!1;if(s().wuy(t,n,n+i.length,s().Ifu.Code)&&s().wuy(t,o-i.length,o,s().Ifu.Code))return!1;return!0}({delimiter:o,storeValue:c,...d}))return;const{textValue:u,matchString:p,startIndex:m,endIndex:h}=d,_=f(u,m),b=u.slice(m,h);M().jQ({environment:n,store:r,selection:{startIndex:_,endIndex:_+i().PE(b).length},transaction:a});const y=s().G0H(p);M().yr({environment:n,store:r,tokens:[y],index:_,transaction:a});const S=_+i().PE(s().N8A(y)).length;B().setSelection({store:r,selection:{startIndex:S,endIndex:S}}),x(n,{type:s().Ifu.Equation}),g().vK({environment:n,equation:p,from:{type:"create",source:"text_filter",selection:!0}})}function V(e){var t;const{environment:n,store:o,transaction:r}=e,a="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!a)return;const l=o.getValue(),c=i().PE(s().q4_(l)).slice(0,a.endIndex).join("");if(s().wuy(l,a.startIndex,a.endIndex,"c"))return;const d=/([^ ]+) $/.exec(c);if(!d)return;const u=d[1],p=s().ctx(u);if(!p)return;const{value:m,href:g}=p,h=f(c,c.indexOf(m)),_=h+i().PE(m).length,b={startIndex:h,endIndex:_};s().wuy(l,h,_,"a")||(T().Mw({environment:n,store:o,annotation:["a",g],selection:b,transaction:r}),B().setSelection({store:o,selection:a}),function(e,t){I().vd(e,"link_filter",t)}(n,{href:g}))}const j=["\\.",",",";","\\?","!","\\)","\\]"," "].join("|"),z=new RegExp(` (${j})$`);function H(e){const t=s().AI5(e.textValue,e.matchIndex-1,e.matchIndex),n=d().HV(t.tokensInsideRange);if(n&&s().qXl(n))return e.match[1]}const W=[{delimiter:"**",type:s().Ifu.Bold},{delimiter:"＊＊",type:s().Ifu.Bold},{delimiter:"*",type:s().Ifu.Italic},{delimiter:"＊",type:s().Ifu.Italic},{delimiter:"__",type:s().Ifu.Bold},{delimiter:"＿＿",type:s().Ifu.Bold},{delimiter:"_",type:s().Ifu.Italic},{delimiter:"＿",type:s().Ifu.Italic},{delimiter:"~",type:s().Ifu.Strike},{delimiter:"〜",type:s().Ifu.Strike},{delimiter:"～",type:s().Ifu.Strike}],q=[{toBlockType:()=>o().xd.toDo,matchRegex:/^(\[\] |\[ \] |\「\」　)$/,insertTextAfter:!1,expectedBlockType:o().xd.toDo,getExampleShortcut:()=>"[] "},{toBlockType:()=>o().xd.subSubHeader,matchRegex:/^(### |＃＃＃)$/,insertTextAfter:!1,expectedBlockType:o().xd.subSubHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===o().sh.toggleFormatSubSubHeaderBlock?"### > ":"### "}},{toBlockType:()=>o().xd.subHeader,matchRegex:/^(## |＃＃)$/,insertTextAfter:!1,expectedBlockType:o().xd.subHeader,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===o().sh.toggleFormatSubHeaderBlock?"## > ":"## "}},{toBlockType:()=>o().xd.header,matchRegex:/^(# |＃)$/,insertTextAfter:!1,expectedBlockType:o().xd.header,getExampleShortcut:e=>{let{formatBlockType:t}=e;return t===o().sh.toggleFormatHeaderBlock?"# > ":"# "}},{toBlockType:()=>o().xd.toggle,matchRegex:/^(> |＞)$/,insertTextAfter:!1,expectedBlockType:o().xd.toggle,getExampleShortcut:()=>"> "},{toBlockType:()=>o().xd.quote,matchRegex:/^(\| |\" |\“ |\”)$/,insertTextAfter:!1,expectedBlockType:o().xd.quote,getExampleShortcut:()=>'" '},{toBlockType:()=>o().xd.bulletedList,matchRegex:/^(\* |\- |\+ |\＊|\ー|\＋|\・)$/,insertTextAfter:!1,expectedBlockType:o().xd.bulletedList,getExampleShortcut:e=>{let{locale:t}=e;return"ja-JP"===t?"・":"- "}},{toBlockType:()=>o().xd.divider,matchRegex:/^—-|---$/,insertTextAfter:!0,expectedBlockType:o().xd.divider,getExampleShortcut:()=>"---"}],K={numeric:/^(\d+|[\uff10-\uff19]+)(\. |\。|\．|\) )$/,roman_numeral:/^([a-z]+)(\. |\。|\．|\) )$/,alphabet:/^([a-z]+)(\. |\。|\．|\) )$/},G=[{annotationDelimiter:"`",blockMatchRegex:/^```$/},{annotationDelimiter:"´",blockMatchRegex:/^´´´$/},{annotationDelimiter:"｀",blockMatchRegex:/^｀｀｀$/}],$={...q.reduce(((e,t)=>{const{expectedBlockType:n,matchRegex:o,getExampleShortcut:i}=t;return e[n]={matchRegexes:[o],getExampleShortcut:i},e}),{}),[o().xd.numberedList]:{matchRegexes:Object.values(K),getExampleShortcut:()=>"1. "},[o().xd.code]:{matchRegexes:G.map((e=>{let{blockMatchRegex:t}=e;return t})),getExampleShortcut:e=>{let{formatBlockType:t}=e;return t?"":"```"}}},Y=[{regex:/^'$/,length:1,replace:"‘",analyticsType:"sentence_start_single_quote"},{regex:/ '$/,length:2,replace:" ‘",analyticsType:"start_single_quote"},{regex:/'$/,length:1,replace:"’",analyticsType:"middle_single_quote"}],Q=[{regex:/^"$/,length:1,replace:"“",analyticsType:"sentence_start_double_quote"},{regex:/ "$/,length:2,replace:" “",analyticsType:"start_double_quote"},{regex:/"$/,length:1,replace:"”",analyticsType:"end_double_quote"},{regex:/--$/,length:2,replace:"—",analyticsType:"em_dash"},{regex:/->$/,length:2,replace:"→",analyticsType:"right_arrow"},{regex:/<->$/,length:3,replace:"↔",analyticsType:"right_left_arrow"},{regex:/←>$/,length:2,replace:"↔",analyticsType:"right_left_arrow"},{regex:/=>$/,length:2,replace:"⇒",analyticsType:"right_arrow_double"},{regex:/<-$/,length:2,replace:"←",analyticsType:"left_arrow"},{regex:/>=$/,length:2,replace:"≥",analyticsType:"greater_than_or_equal_to"},{regex:/<=$/,length:2,replace:"≤",analyticsType:"less_than_or_equal_to"},{regex:/!=$/,length:2,replace:"≠",analyticsType:"not_equal"},{regex:/\.\.\.$/,length:3,replace:"…",analyticsType:"ellipsis"}];function Z(e){const{environment:t,editorMode:n,store:i,transaction:l,selectableBlockActions:p}=e;if("suggest"===n)return;const m=i.getRecordStoreAtRootPath(),g=m instanceof S().Bv?m.getType():void 0;if("code"!==g||k().default.isEditingCaption()){if("callout"!==g){for(const e of q)D({environment:t,editorMode:n,store:i,toBlockType:e.toBlockType,matchRegex:e.matchRegex,insertTextAfter:e.insertTextAfter,transaction:l,selectableBlockActions:p});D({environment:t,editorMode:n,store:i,matchRegex:K.numeric,insertTextAfter:!1,transaction:l,selectableBlockActions:p,toBlockType:t=>{var n;const o=t[1],i=(0,r().an)(o);return null===(n=J(e,parseInt(i)))||void 0===n?void 0:n.type},postTransformAction:t=>{var n;const o=t[1],s=(0,r().an)(o),c=null===(n=J(e,parseInt(s)))||void 0===n?void 0:n.number;if(i.table!==a().ev)return;const d=i.getRecordStoreAtRootPath();if(!(d instanceof S().Bv))return;const p=(0,u().O9)(c)&&c>-1?c:void 0;A().zA({stores:[d],update:{list_start_index:p},transaction:l})}}),D({environment:t,editorMode:n,store:i,matchRegex:K.roman_numeral,insertTextAfter:!1,transaction:l,selectableBlockActions:p,toBlockType:t=>{const n=(0,h().cJ)(t[1]),o=J(e,n);if(1===n||void 0===(null==o?void 0:o.number))return null==o?void 0:o.type},postTransformAction:()=>{m instanceof S().Bv&&A().zA({stores:[m],update:{list_format:"roman"},transaction:l})}}),D({environment:t,editorMode:n,store:i,matchRegex:K.alphabet,insertTextAfter:!1,transaction:l,selectableBlockActions:p,toBlockType:t=>{const n=(0,h().sK)(t[1]),o=J(e,n);if(1===n||void 0===(null==o?void 0:o.number))return null==o?void 0:o.type},postTransformAction:()=>{m instanceof S().Bv&&A().zA({stores:[m],update:{list_format:"letters"},transaction:l})}});for(const{blockMatchRegex:e}of G)D({environment:t,editorMode:n,store:i,toBlockType:()=>o().xd.code,matchRegex:e,insertTextAfter:!1,transaction:l,selectableBlockActions:p})}if(!function(e){var t;const n="editing"===k().default.state.mode&&(null===(t=(0,v().H7)(k().default.state.multiSelection))||void 0===t?void 0:t.selection);if(!n)return!1;const o=e.getValue()||[],i=s().AI5(o,0,n.endIndex),r=d().Kl(i.tokensInsideRange,(e=>s().uPN(e).some((e=>s().rlz(e))))),a=i.tokensInsideRange.slice(-1===r?0:r,i.tokensInsideRange.length),l=s().q4_(a);return Boolean(l.match(/(^| )`[^ ]/))}(i)){for(const o of Q)N({environment:t,editorMode:n,store:i,transaction:l,regex:o.regex,length:o.length,replace:o.replace,analyticsType:o.analyticsType});const e=t.device.browserVersion.split(".").map((e=>parseInt(e,10)));if(!t.device.isSafari||(0,c().isGreaterThanOrEqualToVersion)(e,[16,4]))for(const o of Y)N({environment:t,editorMode:n,store:i,transaction:l,regex:o.regex,length:o.length,replace:o.replace,analyticsType:o.analyticsType});!function(e){N({environment:e.environment,editorMode:e.editorMode,store:e.store,transaction:e.transaction,regex:z,length:2,replace:H,analyticsType:"mention_punctuation"})}({environment:t,editorMode:n,store:i,transaction:l})}for(const{annotationDelimiter:e}of G)L({environment:t,editorMode:n,delimiter:e,annotation:[s().Ifu.Code],store:i,transaction:l});for(const{delimiter:e,type:o}of W)L({environment:t,editorMode:n,delimiter:e,annotation:[o],store:i,transaction:l});F({environment:t,editorMode:n,delimiter:"$$",store:i,transaction:l}),F({environment:t,editorMode:n,delimiter:"＄＄",store:i,transaction:l}),V({environment:t,store:i,transaction:l})}}function X(e){const{store:t,editorMode:n,transaction:o,environment:i}=e,r=p().VI.selectableBlockActions.load();o.postEnqueueActions.push((async()=>{const e=await r;R().createAndCommit({userAction:"textFilterActions.runAllFiltersAfterTransaction",environment:i,canUndo:!0,undoCheckpoint:!0,perform:o=>{Z({environment:i,editorMode:n,store:t,transaction:o,selectableBlockActions:e})}})}))}function J(e,t){const{store:n}=e;if(n.table!==a().ev)return;const i=n.getRecordStoreAtRootPath();if(!(i instanceof S().Bv))return;const r=i.getType();if(r===o().xd.header||r===o().xd.subHeader||r===o().xd.subSubHeader)return;const s=i.getParentBlockStore();if(!s)return;const l=s.getContentStores(),c=l.findIndex((e=>e.id===i.id));if(-1===c)return;const d=l.slice(0,c);let p=-1,m=1;for(let a=0;a<d.length;a++){const e=d[a];if(e.getType()!==o().xd.numberedList)m=1,p=a;else{var g;const t=null===(g=e.getFormat())||void 0===g?void 0:g.list_start_index;(0,u().O9)(t)?m=t+1:m++}}return m===t?{type:o().xd.numberedList,number:void 0}:c===p+1?{type:o().xd.numberedList,number:t}:void 0}function ee(e){var t;const{hasTransformShortcut:n,blockType:o,formatBlockType:i,locale:r}=e;return n&&o?(null===(t=$[o])||void 0===t?void 0:t.getExampleShortcut({locale:r,formatBlockType:i}))??"":""}},863567:(e,t,n)=>{n.d(t,{D:()=>o});class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.lastTickTimeMs=void 0,this.tickIntervalMs=void 0,this.lastTickTimeMs=Date.now(),this.tickIntervalMs=e}async maybeYield(){const e=Date.now();e-this.lastTickTimeMs>this.tickIntervalMs&&(await(0,n(763824).bT)(),this.lastTickTimeMs=e)}}},864145:(e,t,n)=>{n.d(t,{B:()=>l,l:()=>s});n(898992),n(823215);var o=()=>n(861841),i=()=>n(732770),r=()=>n(871399),a=()=>n(502438);let s=function(e){return e[e.Default=0]="Default",e[e.Hovered=1]="Hovered",e[e.Selected=2]="Selected",e[e.SelectedDescendant=3]="SelectedDescendant",e}({});function l(e,t){var n;const l=a().default.state.stores,c=r().default.state;if(1===l.length&&l.includes(e))return s.Selected;if(l.length>0&&l.every((t=>e.uiContains(t))))return s.SelectedDescendant;const d=o().Ay.state;return d&&d.isDragging&&d.currentParentStore&&e.uiContains(d.currentParentStore)||d&&d.isDragging&&d.currentDropZone&&d.currentDropZone.type===o().OX.Selectable&&null!==(n=d.currentDropZone)&&void 0!==n&&n.store&&e.uiContains(d.currentDropZone.store)||c.isOpen&&c.currentStore===e||t&&!i().A.state.isKeyboardMode?s.Hovered:s.Default}},864943:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(100622),r=()=>n(960715),a=n(474848);function s(e,t){let{buttonStyle:s,backgroundColor:l,hoveredBackgroundColor:c,pressedBackgroundColor:d,disabled:u,focused:p,hovered:m,className:g,onClick:f,onFocus:v,onBlur:h,onMouseDown:_,onMouseEnter:b,onMouseLeave:y,disabledFeedback:S,icon:w,iconStyle:k,isLoading:I,hoveredStyle:x,pressedStyle:A,children:C,style:T,ariaLabel:M,testId:P,id:B,shape:R="default",size:E="md",color:D}=e;const N=(0,n(401497).IS)((e=>{let t,o,a;t=c||(l?(0,i().Qr)([e.outlineButtonHoveredBackground,l]):e.outlineButtonHoveredBackground),o=d||(l?(0,i().Qr)([e.outlineButtonPressedBackground,l]):e.buttonPressedBackground),a=l?{border:`1px solid ${e.outlineButtonBorder}`,background:l}:s?{...s}:{border:`1px solid ${e.outlineButtonBorder}`};const p=D?`${D}Primary`:"primary",m=D?`${D}Secondary`:"primary",g=D?`${D}Hover`:"primaryHover",f=D?`${D}Pressed`:"primaryPressed";return{button:{...(0,r().qq)({shape:R,size:E,hasIconOnly:Boolean(w)&&!C}),justifyContent:"center",whiteSpace:"nowrap",fontWeight:n(284371).Wy.medium,lineHeight:1.2,...a,...D?{color:e.text[p],border:`1px solid ${e.stroke[m]}`}:{},...u?{opacity:.4}:{},...T},hovered:{background:t,...D?{background:e.tint[g]}:{},...x},icon:{...(0,r().D3)({size:E,hasIconOnly:!C}),...k},pressed:{background:o,...D?{background:e.tint[f]}:{},...A}}}),[l,s,C,D,c,x,w,k,d,A,R,E,T,u]),L=(0,o.useRef)(null),O=(0,n(93583).A)(L,t),U=(0,o.useRef)(!1);return(0,o.useEffect)((()=>{if(!U.current){const e=L.current;e&&p&&e.focus(),U.current=!0}}),[p]),(0,a.jsxs)(n(704152).A,{id:B,ariaLabel:M,style:N.button,hoveredStyle:N.hovered,pressedStyle:N.pressed,disabled:u,focused:p,hovered:m,className:g,onClick:f,onFocus:v,onBlur:h,onMouseDown:_,onMouseEnter:b,onMouseLeave:y,disabledFeedback:S,isLoading:I,ref:O,testId:P,children:[w?w(N.icon):null,C]})}const l=o.forwardRef(s)},865241:(e,t,n)=>{n.d(t,{A:()=>s,P:()=>a});var o=()=>n(757695);class i extends o().default{getInitialState(){return{isVisible:!0}}}class r extends o().default{getInitialState(){return!1}}const a=new r,s=new i},865688:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{ready:!1,initialRequestCompleted:!1,loading:!1,endOfResultsReached:!1,error:void 0}}}const i=o},866042:(e,t,n)=>{n.d(t,{$d:()=>m,D1:()=>g,L:()=>d,PV:()=>u,fG:()=>p,p1:()=>l,wc:()=>c});var o=()=>n(449506),i=()=>n(92513),r=()=>n(397740),a=()=>n(479199),s=()=>n(619400);async function l(e){const t=await o().callApi({eventName:"getTrelloAccount",environment:e,data:{}});return"success"===t.type?t.data:(console.error(t.error),{})}async function c(){return Promise.resolve({areAccountsFetched:r().A.state.areAccountsFetched,accountsResponse:r().A.state.accountsResponse,isGoogleDocImporterEnabled:(0,s().V)(),selectedFileId:r().A.state.selectedFileId})}async function d(e){i().A.setState({...i().A.state,isFetchingAsanaAccount:!0});const t=await o().callApi({eventName:"getAsanaAccount",environment:e,data:{}});if("success"===t.type){const{account:e}=t.data;return i().A.setState({...i().A.state,account:e,isFetchingAsanaAccount:!1}),e?t.data:{}}return console.error(t.error),i().A.setState({...i().A.state,isFetchingAsanaAccount:!1}),{}}async function u(e){try{const t=await o().callApi({eventName:"getEvernoteAccount",environment:e,data:{}});if("success"===t.type){const{userInfo:e}=t.data;return{userInfo:e}}return console.error(t.error),{userInfo:void 0}}catch(t){return console.error(t),{userInfo:void 0}}}async function p(e,t){const n=await o().callApi({eventName:"getConfluenceAccount",environment:e,data:{spaceId:t}});return"success"===n.type?n.data:(console.error(n.error),{})}async function m(e,t){a().A.setState({...a().A.state,isFetchingMondayAccount:!0});const n=await o().callApi({eventName:"getMondayUser",environment:e,data:{spaceId:t}});var i,r;return"success"===n.type?null!==(i=n.data.user)&&void 0!==i&&i.email?(a().A.setState({...a().A.state,isFetchingMondayAccount:!1,account:null===(r=n.data.user)||void 0===r?void 0:r.email}),n.data):{user:void 0}:(a().A.setState({...a().A.state,isFetchingMondayAccount:!1}),console.error(n.error),{user:void 0})}async function g(e,t){const n=await o().callApi({eventName:"getJiraAccount",environment:e,data:{spaceId:t}});return"success"===n.type?n.data:(console.error(n.error),{})}},866184:(e,t,n)=>{n.r(t),n.d(t,{TransactionQueueDependenciesImpl:()=>p,splitSaveTransactionsRequest:()=>v});n(944114),n(581454);var o=()=>n(857639),i=()=>n(179034),r=()=>n(426302),a=()=>n(96689),s=()=>n(870723),l=()=>n(496603),c=()=>n(716108);n(898992),n(354520);function d(e){const{environment:t,multiCellBatches:o}=e,i=o.length,r=o.filter((e=>"main"===e.type)).length,a=o.filter((e=>"currentSpace"===e.type)).length,s=(0,l().sb)(o.filter((e=>"space"===e.type)).map((e=>e.spaceId))).length,c=0===s?"zero":s>1?"multi":"match",d=r>0?"main":"zero";n(989423).u4({environment:t,event:{eventName:"saveTransactions.multi_cell.num_batches",eventProperties:{num_batches:i,main_cardinality:d,space_cardinality:c,is_missing_space_id:a>0}}})}var u=()=>n(508496);class p{constructor(e){this.timeSource=n(882362).u,this.environment=e}getExperimentGroup(e){return u().default.getGroup(e)}async handleSaveTransactions(e){const t=u().default.checkGate({gateName:"multi_cell_savetransactions"}),o=(0,n(165162).Pr)("multi_cell_savetransactions_metrics"),i=(null==o?void 0:o.get("batch_sample_percent",0))??0,r=(0,n(745875).rQ)(i);if(t||r){const n=v(e);if(r&&d({environment:this.environment,multiCellBatches:n}),t){const e=[];for(const[t,o]of n.entries()){const i=o.transactions,r=await(0,c().Jn)({environment:this.environment,cellType:o.type,spaceId:"space"===o.type?o.spaceId:void 0,tasks:i});if(r.error){const o=n.slice(t+1);let i=r.error.retryReason,a=r.error.retryDelay;return o.length>0&&!i&&(i="UntriedTransactionError",a=2e3),{error:new(c().rS)({message:r.error.message,clientData:r.error.clientData,retryDelay:a,retryReason:i,savedTasks:[...e,...r.error.savedTasks],failedTasks:[...r.error.failedTasks]})}}e.push(...r.value)}return{value:e}}}return(0,c().Jn)({environment:this.environment,tasks:e,cellType:"legacy"})}handleHealthcheck(e){n(679156).nq(this.environment,e)}async rollbackTask(e){try{await(0,n(818619).X)(this.environment,e)}catch(t){o().log({level:"error",from:"TransactionQueueDependencies",type:"ClientTransactionCleanupError",error:(0,n(502800).convertErrorToLog)(t),data:{userId:this.environment.currentUser.id}})}}}const m="curSpaceId",g="mainCellId",f="multiCellRoutedToMainCellId";function v(e){const t=[];let n=m,i=[];for(const r of e){let e;r.spaceId&&(e=r.spaceId);for(const t of r.operations){if(!(0,s().$t)(t.pointer.table)||_(t)||b(t)){e=g;break}if(t.pointer.spaceId){if(void 0!==e&&e!==t.pointer.spaceId){e=f;break}e=t.pointer.spaceId}}e!==g&&e!==r.spaceId&&o().log({level:"warning",from:"TransactionQueueDependencies",type:"MultiSpaceTransactionWarning",data:{message:`Top level space id does not match final space id. Transaction pointers: ${JSON.stringify(r.operations.map((e=>e.pointer)))}`,miscDataToConvertToString:{spaceIdForTransaction:e,transactionSpaceId:r.spaceId,debug:r.debug}}}),e||(e=m),n!==e?(i.length>0&&t.push(h({transactions:i,spaceIdForBatch:n})),i=[r],n=e):(n=e,i.push(r))}return i.length>0&&t.push(h({transactions:i,spaceIdForBatch:n})),0===t.length&&t.push({transactions:e,type:"currentSpace"}),t}function h(e){const{transactions:t,spaceIdForBatch:n}=e;return n===g||n===f?{transactions:t,type:"main"}:n===m?{transactions:t,type:"currentSpace"}:{transactions:t,spaceId:n,type:"space"}}function _(e){return e.pointer.table===r().Yx&&"update"===e.command&&e.args.target_table===a().NX&&1===e.args.version}function b(e){if(e.pointer.table===i().ev&&("update"===e.command||"set"===e.command)){var t;if((0,l().n4)(e.path,["format"])&&e.args.alias_pointer)return e.args.alias_pointer.spaceId!==e.pointer.spaceId;if((0,l().n4)(e.path,[])&&null!==(t=e.args.format)&&void 0!==t&&t.alias_pointer)return e.args.format.alias_pointer.spaceId!==e.pointer.spaceId}return!1}},867201:(e,t,n)=>{n.d(t,{Y:()=>u});var o=()=>n(763884),i=()=>n(496603),r=()=>n(720665),a=()=>n(211716),s=()=>n(108944),l=()=>n(351360),c=()=>n(857783);const d=10;function u(e){const{store:t,openInNew:n,environment:u,pageVisitSource:m,openInSidePeek:g,openInCenterPeek:f,peekMode:v}=e,{currentSpaceStore:h}=l().default.state;if(!t.isDefined())return;const _=t.isNavigableBlock(),{page:b,block:y}=_?{page:t,block:void 0}:{page:s().Nq(t),block:t};b&&(!y&&h&&function(e){let{currentUserId:t,spaceId:n,blockId:a}=e;const s=function(e){let{currentUserId:t,spaceId:n}=e;const i=o().K.get({userId:t,key:p(n)});if(i){const e=(0,r().$l)(i);return Array.isArray(e)?e:[]}return[]}({currentUserId:t,spaceId:n}),l=i().sb([a,...s]).slice(0,d);o().K.set({userId:t,key:p(n),value:JSON.stringify(l)})}({currentUserId:u.currentUser.id,spaceId:h.id,blockId:b.id}),c().uK({environment:u,store:b,scrollToBlockId:y&&y.id,openInNew:n,visitType:a().ig.Search,pageVisitSource:m,queryId:e.queryId,openInSidePeek:g,openInCenterPeek:f,peekMode:v}))}function p(e){return`recentQuickJumps:${e}`}},867899:(e,t,n)=>{n.d(t,{F:()=>i});var o=()=>n(645873);const i={contextualizedOnboardingHelpers:new(o().O2)("contextualizedOnboardingHelpers",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,59424)))),contextualizedOnboardingFlowHelpers:new(o().O2)("contextualizedOnboardingFlowHelpers",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,322920)))),contextualizedOnboardingStageHelpers:new(o().O2)("contextualizedOnboardingStageHelpers",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(87598),n.e(86787),n.e(98942)]).then(n.bind(n,812978)))),contextualizedOnboardingActions:new(o().O2)("contextualizedOnboardingActions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,26388)))),contextualizedOnboardingStateActions:new(o().O2)("contextualizedOnboardingStateActions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(87598),n.e(86787),n.e(98942)]).then(n.bind(n,480599)))),contextualizedOnboardingFlowDefinitions:new(o().O2)("contextualizedOnboardingFlowDefinitions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(11097)]).then(n.bind(n,71666)))),contextualizedOnboardingStageDefinitions:new(o().O2)("contextualizedOnboardingStageDefinitions",(async()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(58550),n.e(22900),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(87598),n.e(86787),n.e(98942)]).then(n.bind(n,186787))))}},868840:(e,t,n)=>{n.d(t,{A:()=>i,O:()=>o});const o="center_peek",i="side_peek"},869562:(e,t,n)=>{n.r(t),n.d(t,{AssistantChatHistoryWidthThreshold:()=>me,OnlyOneSidebarVisibleWidthThreshold:()=>ue,SidePeekCloseLeftSidebarFrameWidthThreshold:()=>pe,bookmarkPage:()=>Ie,cancelSidebarInitialRenderLog:()=>je,close:()=>fe,closeAssistantChatHistoryIfTooNarrow:()=>He,closeSidebarFromTopbarUnexpandButton:()=>qe,handleSidebarButtonClick:()=>he,handleSidebarSectionDrop:()=>We,initialize:()=>Le,leaveBlocks:()=>ke,newPageMessages:()=>Pe,open:()=>ge,openAssistantChatHistoryIfWideEnough:()=>ze,pinSharedPage:()=>Ae,quickAddPage:()=>Me,requestWorkspaceAccess:()=>Ke,setExpand:()=>ve,setPeekWidth:()=>we,setUpdateExpand:()=>_e,setUpdateSidebarCommentsMode:()=>Ue,setUpdateSidebarCommentsTypeMode:()=>Fe,setUpdateSidebarTab:()=>Oe,setUpdateWidth:()=>Se,setWidth:()=>ye,toggleBothSidebars:()=>Ve,toggleLeftSidebarByWindowSize:()=>be,unbookmarkPage:()=>xe,unpinSharedPage:()=>Ce});n(898992),n(354520),n(581454);var o=()=>n(908006),i=()=>n(584262),r=()=>n(179034),a=()=>n(161479),s=()=>n(994310),l=()=>n(970330),c=()=>n(755362),d=()=>n(899963),u=()=>n(449506),p=()=>n(112873),m=()=>n(313209),g=()=>n(901389),f=()=>n(722101),v=()=>n(750660),h=()=>n(872539),_=()=>n(661920),b=()=>n(246826),y=()=>n(857783),S=()=>n(435009),w=()=>n(185544),k=()=>n(751156),I=()=>n(838256),x=()=>n(755199),A=()=>n(186445),C=()=>n(47373),T=()=>n(776894),M=()=>n(810703),P=()=>n(836251),B=()=>n(953418),R=()=>n(640653),E=()=>n(455994),D=()=>n(656219),N=()=>n(406792),L=()=>n(696746),O=()=>n(585533),U=()=>n(770906),F=()=>n(900652),V=()=>n(941463),j=()=>n(441199),z=()=>n(155959),H=()=>n(351360),W=()=>n(407054),q=()=>n(569777),K=()=>n(508496),G=()=>n(210737),$=()=>n(732797),Y=()=>n(188669),Q=()=>n(852678),Z=()=>n(331435),X=()=>n(712505),J=()=>n(975533),ee=()=>n(630116),te=()=>n(93658),ne=()=>n(270710),oe=()=>n(466872),ie=()=>n(611371),re=()=>n(846955),ae=()=>n(644914),se=()=>n(749687),le=()=>n(320460),ce=()=>n(496067),de=()=>n(737230);const ue=1024,pe=430,me=600;function ge(e){let{fromElectron:t}=e;se().sidebarOpenStore.state||te().default.state.isActive||q().A.isOpen()||j().default.isOpen()||(se().sidebarOpenStore.setState(!0),t&&se().sidebarElectronMousePeekStore.setState(!0))}function fe(){!se().sidebarOpenStore.state||$().A.state.open||oe().A.state.open||ce().A.state.open||le().A.state.open||W().A.state.isActive||ne().A.state.clonedBlockStore||se().sidebarResizingStore.state.isResizing||Q().A.state.open||!(0,Z().e)()||G().A.state.namedOpenPopups.has("team_more_actions")||G().A.state.namedOpenPopups.has("outliner_add_page")||(se().sidebarMousePeekXStore.setState(0),se().sidebarOpenStore.setState(!1),se().sidebarElectronMousePeekStore.setState(!1))}function ve(e){if((0,z().T)("supportsNativeHome"))return;(0,re().tourIsActiveInSidebarStep)(re().default.state)&&!e.isExpanded&&re().default.setState({type:"inactive"});const t=N().default.DO_NOT_USE_markLegacy("sidebar.toggle_expanded_lag");se().sidebarExpandedStore.setState(e.isExpanded),De(),X().default.setSidebarExpandedStoreState(e.isExpanded);const n=K().default.checkGate({gateName:"tablet_refresh_gate"});!e.isExpanded&&n&&e.environment.device.isMobile&&se().sidebarOpenStore.setState(!1),e.isExpanded&&e.environment.WindowSizeStore.state.width<ue&&(0,ae().Nk)(e.environment)&&_e({environment:e.environment,isExpanded:!1,from:"close_for_space",saveDetailsSidebarPreference:e.saveDetailsSidebarPreference}),e.isExpanded&&(0,ae().Uh)(e.environment)<pe&&_().VN({environment:e.environment,from:"sidebar_expand"}),e.isExpanded?d().q(e.environment):d().fE(e.environment),N().default.DO_NOT_USE_measureAfterNextFlushLegacy(t,{environment:e.environment,getData:()=>({is_expanded:e.isExpanded,from:e.from})})}function he(e,t,n,o){const r=X().default.state.open,{currentTab:a}=de().Ay.state,s=a!==n||a===n&&!(0,ae().Nk)(e),l=n===de().tF.Comments&&(a!==n||!(0,ae().Nk)(e));Oe(n),l&&de().Ay.update((e=>({...e,timeOpenedComments:Date.now()}))),r?(y().uK({environment:e,store:t,pageVisitSource:i().y8.Expand}),_e({environment:e,isExpanded:!0,from:o,saveDetailsSidebarPreference:!0})):_e({environment:e,isExpanded:s,from:o,saveDetailsSidebarPreference:!0})}function _e(e){var t;const{isExpanded:n,environment:o,from:i}=e,a=(0,A().ao)();if(!a||(0,L().lU)(a)||a.isPersonProfile())return;n||p().xl();let s=de().Ay.state.currentTab;if(n){o.WindowSizeStore.state.width<ue&&(0,ae().KB)(o)&&ve({environment:o,isExpanded:!1,from:`set_update_expand_${e.from}`,saveDetailsSidebarPreference:!1}),j().default.isOpen()&&U().VI({environment:o});const t={origin:X().default.state.open?"peek_view":"page",from:i};s===de().tF.Comments?d()._R(o,t):s===de().tF.Updates&&d().oU(o,t)}const l=X().default.state.open&&X().default.state.targetStore.id||(null===(t=H().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id),c=function(e){const t=H().default.state.mainEditorCurrentBlockStore;if(t&&e){const n=ee().Bv.createChildStore(t,{id:e,table:r().ev});if(!n)return;const o=n.getAssociatedCollectionStore();if(!o)return;return o.getLayoutStore()}}(l);c||s!==de().tF.Info||(s=de().tF.Comments),n?s===de().tF.Info&&E().A.setOpen("mainPage"):E().A.setClosed("mainPage"),de().Ay.setState({...de().Ay.state,expanded:n,mouseEntered:!!n||de().Ay.state.mouseEntered,openedOnBlockId:l,canRender:!0,currentTab:s}),Ne()}function be(e){X().default.state.savedSidebarExpandedStoreState&&!se().sidebarExpandedStore.state&&function(e){if(se().sidebarExpandedStore.state||!X().default.state.savedSidebarExpandedStoreState)return;X().default.isSidePeekOpen()&&(0,ae().Uh)(e)-(0,ae().r6)(e)>=pe&&se().sidebarExpandedStore.setState(!0)}(e),se().sidebarExpandedStore.state&&function(e){const t=se().sidebarExpandedStore.state&&0===(0,ae().kf)(e),n=t?e.WindowSizeStore.state.width-se().sidebarWidthStore.state-(0,ae().zo)(e,!1):(0,ae().Uh)(e);X().default.isSidePeekOpen()&&X().default.state.savedSidebarExpandedStoreState&&se().sidebarExpandedStore.state&&n<pe&&(se().sidebarExpandedStore.setState(!1),X().default.setSidebarExpandedStoreState(!0))}(e)}function ye(e){se().sidebarWidthStore.setState(e.width),(0,ae().Uh)(e.environment)<pe&&_().VN({environment:e.environment,from:"sidebar_expand"}),De()}function Se(e){de().Ay.setState({...de().Ay.state,width:e.width}),Ne()}function we(e){if(X().default.state.open&&X().default.isSidePeekOpen()){const t=e.environment.WindowSizeStore.state.width;X().default.setSidePeekWidth(e.width,t),e.preventPersistWidth||function(){const{preferredSidePeekWidth:e}=X().default.state,t={width:e};s().A.set(Ee,t)}(),be(e.environment)}}async function ke(e){const{blocks:t,transaction:n,environment:o}=e,{currentSpaceViewStore:i}=H().default.state;if(i)for(const r of t)f().TF({parentStore:i.getSharedPagesStore(),childToRemoveStore:r,transaction:n});S().VP({environment:o,blocks:t}),await Promise.all(t.map((e=>u().callApi({eventName:"leaveBlock",environment:o,data:{block:{id:e.id,spaceId:(0,a().e)(e.pointer.spaceId)}}}))))}function Ie(e){const{store:t,spaceViewStore:n,transaction:o}=e,i=n.getBookmarkedPagesStore(),r=ee().Bv.createChildStore(i,t.pointer);f().Hs({parentStore:i,prependStore:r,transaction:o})}function xe(e){const{store:t,spaceViewStore:n,transaction:o}=e,i=n.getBookmarkedPagesStore(),r=ee().Bv.createChildStore(i,t.pointer);f().TF({parentStore:i,childToRemoveStore:r,transaction:o})}function Ae(e){const{store:t,spaceViewStore:n,transaction:o}=e;Te(e);const i=n.getSharedPagesStore(),r=ee().Bv.createChildStore(i,t.pointer);f().Hs({parentStore:i,prependStore:r,transaction:o})}function Ce(e){const{store:t,spaceViewStore:n,transaction:o}=e;Te(e);const i=n.getSharedPagesStore(),r=ee().Bv.createChildStore(i,t.pointer);f().TF({parentStore:i,childToRemoveStore:r,transaction:o})}function Te(e){const{environment:t,spaceViewStore:n,userSettingsStore:o,transaction:i}=e,r=n.getSpaceId();if(!r||o.hasUserPinnedToOutliner({spaceId:r,type:"shared"}))return;const{visiblePagesStores:a}=(0,R().rc)({environment:t,spaceViewStore:n,userSettingsStore:o,type:"shared"}),s=a.map((e=>{let{id:t}=e;return t}));b().zv({store:n,data:{shared_pages:s},transaction:i}),x().Hg({userSettingsStore:o,spaceId:r,type:"shared",transaction:i})}async function Me(e){const{from:t,environment:n,redirect:r,event:a,callback:s,pageVisitSource:c,navigateOnCreate:d=!0}=e,{currentSpaceStore:u,currentSpaceViewStore:p}=H().default.state,g=new(I().aD)(n,"quickAddPage");if(!((0,ie().EF)(n)&&u&&u.canEdit()&&p))return(0,ie().EF)(n)||(0,ie().QY)(n),void g.fail("invalid_state");Y().Ay.setState({...Y().Ay.state,lastPageId:H().default.state.mainEditorCurrentBlockStore?H().default.state.mainEditorCurrentBlockStore.id:void 0});const f=await async function(e){const{newPageTracker:t,quickAddParentOverride:n,environment:o,prependPrivatePage:i}=e,{currentSpaceStore:r,currentSpaceViewStore:a}=H().default.state;if(!r)return void t.fail("invalid_state");const s=n||await(0,M().pw)({spaceStore:r,currentUserId:o.currentUser.id}),l=T().sZ(s);if("space-private-pages"===s.type||l.canAdmin()){const e=await k().createAndCommitAsync({environment:o,userAction:"sidebarActions.quickAddPage.directMoveToAdd",waitForServerCommit:!1,perform:async e=>{if("space-private-pages"===s.type&&i&&a){return{createdPage:w().IT({environment:o,spaceStore:r,spaceViewStore:a,isPrivate:!0,prepend:!0,transaction:e,tracker:t})}}const n=b().Wv({environment:o,type:"page",inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:r.id,tracker:t}),l=await v().HY({environment:o,targets:[n],value:s,transaction:e});if(l&&"collection"===l.table){const t=l.getDefaultTemplatePageStore();t&&m().n5({title:"template",environment:o,store:n,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:e,from:"sidebar_actions"})}return{createdPage:n}}});return e.performResult.createdPage}if(!l.canAdmin()&&l.canEdit()){const{performResult:{createdPage:e}}=await k().createAndCommitAsync({environment:o,userAction:"sidebarActions.quickAddPage.moveToAdd",waitForServerCommit:!1,perform:async e=>{const n=b().Wv({environment:o,type:"page",inMemoryRecordCache:o.defaultRecordCache.inMemoryRecordCache,transaction:e,spaceId:r.id});return t.track(n.pointer,e),await v().HY({environment:o,targets:[n],value:{type:"space-private-pages",spaceId:r.id},transaction:e}),{createdPage:n}}});return await k().createAndCommitAsync({environment:o,userAction:"sidebarActions.quickAddPage.moveToMove",waitForServerCommit:!1,perform:async t=>{const n=await v().LC({environment:o,targets:[e],value:s,transaction:t});if(n&&"collection"===n.table){const i=n.getDefaultTemplatePageStore();i&&m().n5({title:"template",environment:o,store:e,templateStore:i,isKeyboard:!1,isCreateIn:!1,transaction:t,from:"sidebar_actions"})}}}),e}t.fail("invalid_state")}({...e,newPageTracker:g,event:a});return f?(n.device.isMobile?(y().uK({environment:n,store:f,showMoveTo:!0,saveParent:!0,redirect:r,pageVisitSource:c||i().y8.SidebarQuickAdd}),fe()):d&&(y()._U(f),y().uK({environment:n,store:f,showMoveTo:!0,saveParent:!0,redirect:r,pageVisitSource:c||i().y8.SidebarQuickAdd,callback:s}),fe()),h().Wx({environment:n,spaceViewStore:p,type:"private",newIsHidden:!1,outlinerToggleButtonStore:J().A,shouldPersistToggleState:!0}),l().v(n,{from:t,type:"page",new_page_id:f.id,creating_block_id:f.id}),o().default.afterNextFlush((()=>{const e=O().A.findDropTargetFromKey("Outliner-private"),t=null==e?void 0:e.getNode();t&&t instanceof HTMLElement&&B().Rt({element:t,environment:n,options:{behavior:"smooth",block:"nearest"}})})),f):void 0}const Pe=(0,n(959013).YK)({label:{id:"sidebar.newPage.button",defaultMessage:"New page"},tooltip:{id:"sidebar.newPage.tooltip",defaultMessage:"Create a new page"}}),Be="sidebar",Re="updateSidebar",Ee="sidePeek";function De(){const e={expanded:se().sidebarExpandedStore.state,width:se().sidebarWidthStore.state};s().A.set(Be,e)}function Ne(){const{expanded:e,width:t,openedOnBlockId:n,currentTab:o,updatesSubTab:i,commentsSubTab:r}=de().Ay.state,a={expanded:e,width:t,openedOnBlockId:n,currentTab:o,updatesSubTab:i,commentsSubTab:r};s().A.set(Re,a)}function Le(e){const t=s().A.get(Be),n=(0,D().u)(),o=function(){const e=s().A.get(Re);if(e&&"currentSubTab"in e){const t={...e,updatesSubTab:e.currentSubTab};return delete t.currentSubTab,t}return e}(),i=s().A.get(Ee),r=V().Ay.state;if(n&&D().A.setState(n),(0,z().T)("supportsNativeHome")?(se().sidebarExpandedStore.setState(!1),se().sidebarWidthStore.setState(0)):t?(void 0!==t.expanded&&se().sidebarExpandedStore.setState(t.expanded),void 0!==t.width&&t.width>=se().SIDEBAR_MIN_WIDTH&&se().sidebarWidthStore.setState(t.width)):(0,P().ok)()||se().sidebarExpandedStore.setState(!1),o){const e=o.width&&o.width>=de().Iz?o.width:de().Iz;de().Ay.setState({...de().Ay.state,...o,width:e,...o.currentTab===de().tF.Info?{expanded:!1}:void 0}),window.innerWidth<ue&&se().sidebarExpandedStore.setState(!1)}if(i&&X().default.setSidePeekWidth(i.width,window.innerWidth),(0,C().hg)(e)){const{openState:t,mode:n,contentType:o}=r;"open"===t&&"panel"===n&&(0,U().J$)({environment:e,contentType:o,skipAnimation:!0,autoLoaded:!0})}}function Oe(e){const{currentTab:t}=de().Ay.state;de().Ay.setState({...de().Ay.state,currentTab:e}),e!==de().tF.Info&&E().A.setClosed("mainPage"),t===de().tF.Comments&&e!==t&&p().xl()}function Ue(e){de().Ay.setState({...de().Ay.state,commentsMode:e})}function Fe(e){de().Ay.setState({...de().Ay.state,commentsTypeMode:e})}function Ve(e){(0,ae().Nk)(e)||se().sidebarExpandedStore.state?(ve({environment:e,isExpanded:!1,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}),_e({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!0})):(_e({environment:e,isExpanded:!0,from:"keyboard_default",saveDetailsSidebarPreference:!0}),ve({environment:e,isExpanded:!0,from:"toggle_both_sidebars",saveDetailsSidebarPreference:!0}))}function je(){se().sidebarShouldLogInitialRenderStore.setState(!1)}function ze(e){const{environment:t,isResizing:n}=e;if((0,F().du)()||Boolean(n)&&!j().default.state.autoClosed)return;(0,ae().R8)(t)-(0,F().n5)()>=me&&((0,U().J$)({environment:t,contentType:"assistant",skipAnimation:!0}),j().default.isPanelPinnedState()||(0,U().oe)())}function He(e){if(!(0,F().du)())return;(0,ae().R8)(e)<me&&((0,ae().KB)(e)?se().sidebarExpandedStore.setState(!1):U().VI({environment:e,autoClose:!0}))}function We(e){let{environment:t,newSidebarOrder:n,previousSidebarOrder:o,dropArgs:i,spaceViewStore:r,sidebarState:a}=e;const s=a.showWorkspaceSection?n:n.filter((e=>"workspace"!==e));k().createAndCommit({userAction:"SidebarOutliner.reorderSection",environment:t,canUndo:!0,perform:e=>{b().zv({store:r,data:{sidebar_order:s},transaction:e}),d().ub(t,{section:i.key,previous_order:o,new_order:s,from:"drag"})}})}function qe(e){ve({environment:e,isExpanded:!1,from:"sidebar_unexpand_button",saveDetailsSidebarPreference:!0}),j().default.isVisible()&&fe()}async function Ke(e){const{environment:t,intl:n,spaceId:o,message:i,panelType:r}=e;(0,c().e)(t,{panel_type:r});const a=t.currentUser.id;if(a&&o)try{"success"===(await u().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",spaceId:o,forActorId:a,message:i,attributes:{add_permissions_on_approval:!1,origin_type:"sidebar_guest_request"}}})).type&&g().rG({message:n.formatMessage({id:"sidebar.joinMembersPanel.requestSent.message",defaultMessage:"Your request to join this workspace has been sent to the workspace owner."})})}catch(s){g().rG({message:n.formatMessage({id:"sidebar.joinMembersPanel.error.message",defaultMessage:"There was an error sending your request to join this workspace."})})}}},870571:(e,t,n)=>{n.d(t,{A:()=>u});var o=n(296540),i=()=>n(847249),r=()=>n(959013),a=()=>n(891078),s=()=>n(42425),l=n(474848);const c=(0,r().YK)({listPlaceholder:{defaultMessage:"List",id:"bulletedListBlock.placeholder.label"}});function d(e,t){const d=(0,r().tz)(),u=(0,o.useRef)(null),p=(0,i().K8)((()=>{var t;const n=null===(t=e.bulletedListFormatStore)||void 0===t?void 0:t.getState();return function(e,t){switch(e){case"disc":return'"•"';case"circle":return'"◦"';case"square":return'"▪"';default:return t%3==0?'"•"':t%3==1?'"◦"':'"▪"'}}(null==n?void 0:n.blockIdFormats.get(e.store.id),(null==n?void 0:n.depth)||0)}),[e.bulletedListFormatStore,e.store.id]),m=(0,i().K8)((()=>e.store.getBlockTitleStore()),[e.store]),g=(0,i().K8)((()=>e.store.getContentStore()),[e.store]),f=(0,a().pW)(e.store,!0),v=(0,i().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),h=(0,n(401497).IS)((t=>({root:{...{paddingLeft:n(799954).nE.paddingLeft},...f,...e.style},titlePlaceHolder:{...v?{color:t.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{}},title:{...s().FC}})),[f,v,e.style]),_=(0,l.jsxs)(s().Ay,{style:h.root,left:(0,l.jsx)("div",{...(0,n(955825).AH)({fontSize:"1.5em",lineHeight:1,marginBottom:0,pseudoBefore:{fontFamily:"Arial",content:p}})}),childrenStyle:{display:"flex",flexDirection:"column"},ref:u,children:[(0,l.jsxs)("div",{style:{display:"flex"},children:[(0,l.jsx)(n(524702).A,{style:h.title,disabled:e.disabled,store:m,placeholder:e.placeholder??d.formatMessage(c.listPlaceholder),placeholderStyle:h.titlePlaceHolder,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,l.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]}),!e.hideContent&&(0,l.jsx)(n(493733).A,{disabled:e.disabled,store:g,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,bulletedListFormatStore:e.bulletedListFormatStore})]});return(0,a().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"bulleted_list",getNode:()=>u.current,getBlockStore:()=>e.store})),[e.store]),_)}const u=o.memo(o.forwardRef(d),n(821062).A)},870618:(e,t,n)=>{n.d(t,{TH:()=>g,h7:()=>p,wB:()=>m,ww:()=>u});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=()=>n(792071),i=()=>n(388821),r=()=>n(56125),a=()=>n(179034),s=()=>n(545285),l=()=>n(496603),c=()=>n(406792),d=()=>n(508496);async function u(e){const{environment:t,recordPointers:n,recurFn:a,recordIsRequired:l}=e,c=i().RecordMapWithRole.create();return await r().d3({recordPointers:n,recordMap:c,recurFn:(e,t)=>a(e,t),loadRecordModel:async e=>{const n=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e,userId:t.currentUser.id});if(n)return n;const i=t.defaultRecordCache.persistedRecordCache;if(i&&(0,s().u)(e)){const n=await i.get({pointer:e,userId:t.currentUser.id});if(n)return{model:o().Bj6.fromValue(e.table,n.value),role:n.role}}if(l(e))throw new Error(`Failed to load a required record: ${e.table}, ${e.id}, ${e.spaceId}.`)}}),c}async function p(e){const{environment:t,abortSignal:n,skipAccessWrites:i}=e,r=e.environment.currentUser.id;if(e.inMemoryRecordCache)return e.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:r});const a=t.defaultRecordCache.inMemoryRecordCache.getModelAndRole({pointer:e.pointer,userId:r});if(void 0!==a)return a;if(e.useInMemoryCacheOnly)return;const{persistedRecordCache:l}=e.environment.defaultRecordCache;if(l&&(0,s().u)(e.pointer)){const t=await l.get({pointer:e.pointer,userId:r,skipAccessWrites:i});if(null!=n&&n.aborted)throw new Error("Abort signal received");if(t)return{model:o().Bj6.fromValue(e.pointer.table,t.value),role:t.role}}}async function m(e){const{parent:t,inMemoryRecordCache:n,environment:i}=e,r=[],s=e.environment.currentUser.id,l=e.environment.defaultRecordCache.persistedRecordCache;if(l&&n===i.defaultRecordCache.inMemoryRecordCache){return(await l.getBlocksWithParent({parent:t,userId:s})).map((e=>({model:o().Bj6.fromValue(a().ev,e.value),role:e.role})))}{const e=new Set,o=[n];for(const n of o)if(n.forEachRecord(s,(n=>{let{model:o,role:i}=n;o.table!==a().ev||o.parent_table!==t.table||o.parent_id!==t.id||e.has(o)||(r.push({model:o,role:i}),e.add(o))})),n.cacheFallbacks.size>0)for(const e of n.cacheFallbacks)o.includes(e)||o.push(e)}return r}async function g(e){const{environment:t,inMemoryRecordCache:n}=e,i=o().Bj6.fromCollection(e.collection);if(!i)return[];const r=i.pointer;if(!i.isPageTreeCollection()){const e=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection"),o=m({environment:t,parent:r,inMemoryRecordCache:n});return c().default.DO_NOT_USE_measureLegacy(e,{environment:t}),o}const s=i.getRootPagePointer(),p=d().default.checkGate({gateName:"wiki_perf_improvement_local_enabled"}),g=c().default.DO_NOT_USE_markLegacy("collections.get_local_pages_in_collection_wiki"),f=p?await async function(e){const{rootPagePointer:t,environment:n}=e,o=[],i=(e,n)=>e.table!==a().ev?[]:(e.pointer.id===t.id||"page"!==e.type&&"collection_view_page"!==e.type||o.push({model:e,role:n}),e.getContentIds().map((t=>({table:a().ev,id:t,spaceId:e.spaceId}))));return await u({environment:n,recordPointers:[t],recurFn:i,recordIsRequired:()=>!1}),o}({environment:t,rootPagePointer:s}):await async function(e){const{rootPagePointer:t,environment:n,inMemoryRecordCache:o}=e;let i=[t];const r=[];for(;i.length>0;){const e=i.map((e=>m({environment:n,parent:e,inMemoryRecordCache:o}))),t=(await Promise.all(e)).flat();for(const n of t){var a;const e=null==n||null===(a=n.model)||void 0===a?void 0:a.type;"page"!==e&&"collection_view_page"!==e||r.push(n)}i=l().oE(t.map((e=>{var t;return null===(t=e.model)||void 0===t?void 0:t.pointer})))}return r}({environment:t,rootPagePointer:s,inMemoryRecordCache:n});return c().default.DO_NOT_USE_measureLegacy(g,{environment:t,data:{status:p?"v2":"v1"}}),f}},871392:(e,t,n)=>{n.d(t,{a:()=>a});var o=()=>n(715256),i=()=>n(762433),r=()=>n(979340);function a(e){const{billingData:t,environment:{experimentService:n},spaceId:a}=e;return!!(0,i().eh)(t,"ai")||!(0,i().N8)(null==t?void 0:t.subscription)&&(!!n.checkGate({gateName:"packaging_changes_05_13_2025",actor:o().S3,customIDs:{spaceId:a}})&&(0,r().rV)((0,i().AI)(t),"business"))}},871399:(e,t,n)=>{n.r(t),n.d(t,{HOVER_REGIONS:()=>r,default:()=>h,getExactSelectableRect:()=>f,getExpandedSelectableRect:()=>g,getHoverRegionOfRect:()=>m});n(898992),n(908872);var o=()=>n(534177),i=()=>n(397248);const r=["top-left-corner","bottom-left-corner","above-content","below-content"],a=.7,s=150,l=150,c=12,d=4,u=16,p=8;function m(e,t,n,i,r){const l=e.left+(i??0);switch(t){case"top-left-corner":return new DOMRect(Math.max(0,l-s),e.top-Math.max(c,r??0),l-Math.max(0,l-s),Math.max(u,r??0));case"bottom-left-corner":return new DOMRect(Math.max(0,l-s),e.bottom-d,l-Math.max(0,l-s),u);case"above-content":return new DOMRect(l,e.top-Math.max(p,r??0),(n??e.width)*a,Math.max(p,r??0));case"below-content":return new DOMRect(l,e.bottom,(n??e.width)*a,p);default:(0,o().HB)(t)}}function g(e,t,n,o,a){return[...r.map((t=>m(e,t,n,o,a))),f(e,t)].reduce(((e,t)=>i().l6(e,t)),e)}function f(e,t){return i().$E(e,{top:0,bottom:0,left:s,right:t?l:0})}class v extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}isRightMarginCommentHovered(){const e=this.state,t=e.isOpen&&e.selectableBoundingRect;if(t){var n;if(null!==(n=e.currentStore)&&void 0!==n&&n.isImmediateColumnChild())return!1;const o=t.width*a+t.x;return e.mouseX>o}return!1}}const h=new v},872539:(e,t,n)=>{n.d(t,{A5:()=>Q,Hu:()=>Z,Nr:()=>ne,RM:()=>J,SE:()=>Y,Wx:()=>te,o8:()=>ee,y6:()=>oe});n(16280),n(944114),n(898992),n(823215),n(354520),n(581454),n(737550),n(296540);var o=()=>n(584262),i=()=>n(700500),r=()=>n(763884),a=()=>n(68263),s=()=>n(854150),l=()=>n(116225),c=()=>n(959013),d=()=>n(496603),u=()=>n(211716),p=()=>n(857783),m=()=>n(521358),g=()=>n(855801),f=()=>n(47373),v=()=>n(776894),h=()=>n(396301),_=()=>n(640653),b=()=>n(182106),y=()=>n(362749),S=()=>n(869562),w=()=>n(644914),k=()=>n(351360),I=()=>n(861841),x=()=>n(188669),A=()=>n(630116),C=()=>n(611371),T=()=>n(134217),M=()=>n(749240),P=()=>n(929450),B=()=>n(846955),R=()=>n(970330),E=()=>n(899963),D=()=>n(313209),N=()=>n(901389),L=()=>n(722101),O=()=>n(547392),U=()=>n(524539),F=()=>n(44729),V=()=>n(246826),j=()=>n(281948),z=()=>n(426116),H=()=>n(185544),W=()=>n(955930),q=()=>n(751156),K=()=>n(838256),G=n(474848);const $={secondary_sidebar:{outliner_location:"pane",from:"sidebar_private_pane"},main_sidebar:{outliner_location:"sidebar",from:"sidebar_private_section"},workflow_templates_onboarding_modal:{outliner_location:"workflow_templates_onboarding_modal",from:"private_workflow_templates_onboarding_modal"}};async function Y(e){const{environment:t,spaceStore:n,spaceViewStore:i,type:r,prepend:a,outlinerToggleButtonStore:s,outlinerItemFrom:l,shouldPersistToggleState:d,title:m}=e,g=new(K().aD)(t,"createPageInSection");if((0,C().EF)(t)){if("workspace"===r){const e=await(0,_().Pu)({environment:t,spaceId:n.id})??1;if(e>=10){const{accept:t}=await N().Gh({message:(0,G.jsx)("span",{children:(0,G.jsx)(c().sA,{defaultMessage:"Create a new top-level page?",id:"sidebarActions.confirmDialog.newWorkspacePage.message",values:{strongtext:e=>(0,G.jsx)("strong",{children:e}),memberCount:e}})}),description:(0,G.jsx)(c().sA,{defaultMessage:"This page will be visible in the sidebar to all {memberCount} members of your workspace.",id:"sidebarActions.confirmDialog.newWorkspacePage.description",values:{memberCount:e}}),acceptLabel:(0,G.jsx)(c().sA,{defaultMessage:"Create top-level page",id:"sidebarActions.confirmDialog.newWorkspacePage.confirmButton.label"})});if(!t)return null}}const{serverCommitResult:e,performResult:{createdPage:f}}=q().createAndCommit({userAction:"outlinerActions.createPageInSection",environment:t,canUndo:!0,perform:e=>{const o=H().IT({environment:t,spaceStore:n,spaceViewStore:i,isPrivate:"private"===r,prepend:a,transaction:e,title:m,tracker:g});return s&&te({environment:t,spaceViewStore:i,type:r,outlinerToggleButtonStore:s,newIsHidden:!1,shouldPersistToggleState:Boolean(d)}),t.device.isMobile&&S().close(),{createdPage:o}}});if("private"===r){const{outliner_location:e,from:n}=$[l||"main_sidebar"];R().v(t,{from:n,outliner_location:e,type:"page",new_page_id:f.id,creating_block_id:f.id})}else"workspace"===r&&R().v(t,{from:"sidebar_workspace_section",type:"page",new_page_id:f.id,creating_block_id:f.id});const v=n.getDisableSpacePageEdits();return"workspace"===r&&v&&await e,p().uK({environment:t,store:f,visitType:u().ig.Link,pageVisitSource:o().y8.Create}),f}}async function Q(e){const{environment:t,spaceStore:n,spaceViewStore:i,teamStore:r,andNavigate:a,from:s,outlinerToggleButtonStore:l,shouldPersistToggleState:c,title:d,loading:m,appendOrPrepend:g,event:f}=e;if(!(0,C().EF)(t))return;const v=await(0,y().Pl)(),{serverCommitResult:h,performResult:{createdPage:_}}=q().createAndCommit({userAction:"outlinerActions.createPageInTeam",environment:t,canUndo:!0,perform:e=>({createdPage:v({environment:t,spaceStore:n,spaceViewStore:i,teamStore:r,from:s,title:d,event:f,loading:m,appendOrPrepend:g,transaction:e})})});return await h,a&&p().uK({environment:t,store:_,visitType:u().ig.Link,pageVisitSource:o().y8.Create}),l&&P().Of({environment:t,spaceViewStore:i,teamStore:r,outlinerToggleButtonStore:l,newIsHidden:!1,shouldPersistToggleState:Boolean(c),isExplicitUserAction:!1}),_}async function Z(e){var t,n;const{environment:o,droppedStores:r,droppedDirection:s,type:l,targetStore:d,targetParentStore:u,isDroppingOnFullSection:p}=e,h=await(0,v().OY)({environment:e.environment,blocks:r,from:"dragAndDrop",dropArgs:{direction:s,destination:d??X({targetStore:d,targetParentStore:u}),destinationOutlinerType:l,isDroppingOnFullSection:p}});if(!h.confirmed)return;const{shouldClearPagePermissions:y,shouldUpdateToManualSort:S}=h;if(1===r.length&&(null===(t=u.getValue())||void 0===t||null===(n=t.includes)||void 0===n||!n.call(t,r[0].id))){let e=[];for(const n of r)if(e=await m().rW({environment:o,block:n,action:"move"}),"user_canceled"===e)return;const t=r[0].id;for(const n of e)n.id!==t&&r.push(n)}const w=Object.fromEntries(r.map((e=>[e.id,e.getParentPointer()]))),{performResult:{moved:x}}=await q().createAndCommitAsync({environment:o,userAction:"outlinerActions.confirmAndHandleDrop",waitForServerCommit:!0,perform:async t=>{const n=await async function(e){const{environment:t,type:n,droppedDirection:o,targetStore:r,targetParentStore:s,droppedStores:l,transaction:d,isTopLevelItem:u,shouldClearPagePermissions:p,shouldUpdateToManualSort:m}=e,v=function(e){for(const t of e){const e=b().A.findOutlinerItemFromStore(t);if(e)return e.type}}(l),{currentSpaceStore:h,currentUserStore:y}=k().default.state,S=null==h?void 0:h.id,w=M().subscriptionDataStoreInstance.state,x="bookmarks"===v&&"bookmarks"===n,A=ie(e),C=S&&l.some((e=>e.isTopLevelWorkspacePage(S))),P=r&&S&&r.isTopLevelWorkspacePage(S),B=null==h?void 0:h.getDisableSpacePageEdits();if(S&&B&&(C||P)&&!x&&o!==I().bH.Onto&&null!=y&&y.isDefined()&&w){const e=(0,T().Ye)(w).filter((e=>e.userId===y.id))[0];if(e&&!a().Km(e.role))return N().f1((0,G.jsx)(c().sA,{defaultMessage:"This workspace has locked top-level workspace page operations.",id:"sidebarActions.confirmDialog.lockedWorkspaceTopLevel.message"})),!1}const R=X({targetStore:r,targetParentStore:s});if(!x&&!A){if("user_cancelled_move"===await W().nD({transaction:d,moveStores:l,moveTargetStore:R}))return!1}U().kl({environment:t,transaction:d,moveToStore:R,targetBlocks:l,from:"drag_and_drop"}),!m||"private"!==n&&"shared"!==n||function(e){let{environment:t,transaction:n,type:o}=e;const{currentSpaceViewStore:i,currentUserSettingsStore:r}=k().default.state;if(!i||!r)return{moved:!1};const{allPagesStores:a}=(0,_().rc)({environment:t,spaceViewStore:i,userSettingsStore:r,type:o}),s="private"===o?i.getPrivatePagesStore():i.getSharedPagesStore();V().KY({transaction:n,store:s,value:a.map((e=>e.id))});const l=i.getSettingsStore().getKeyStore("sidebar_section_menu").getKeyStore("sortOption").getKeyStore(o);l&&V().KY({transaction:n,store:l,value:"manual"})}({environment:t,transaction:d,type:n});const E=function(e){const{environment:t,type:n,targetStore:o,targetParentStore:r,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c,duplicateActions:d}=e,{currentSpaceViewStore:u,currentSpaceStore:p,currentUserSettingsStore:m}=k().default.state;let g;const v=null==o?void 0:o.getModel();if(a===I().bH.Onto&&o&&r&&null!=v&&v.isType(i().wK))g=O().MS({environment:t,targetParentStore:r,targetStore:o,droppedDirection:I().bH.Below,droppedStores:s,duplicate:l,transaction:c,duplicateActions:d});else if(ie(e)&&o){if(!u||!m)throw new Error("currentSpaceViewStore or currentUserSettingsStore not found");const e=(0,f().rY)(t),{visiblePagesStores:n,allPagesStores:i}=(0,_().au)({environment:t,spaceViewStore:u,userSettingsStore:m,type:"shared"}).state,r=e?i.map((e=>e.id)):n.map((e=>e.id)),l=s.map((e=>e.id)),d=r.filter((e=>l.indexOf(e)<0)),p=d.findIndex((e=>e===o.id));let v=[];v=a===I().bH.Above?[...d.slice(0,p),...l,...d.slice(p)]:[...d.slice(0,p+1),...l,...d.slice(p+1)],e?V().zv({store:u,data:{shared_pages_manual_sort:v},transaction:c}):V().zv({store:u,data:{shared_pages:v},transaction:c}),g=s}else"private"===n&&p&&u&&H().X$({environment:t,spaceStore:p,spaceViewStore:u,transaction:c}),g=O().MS({environment:t,targetParentStore:r,targetStore:o,droppedDirection:a,droppedStores:s,duplicate:l,transaction:c,duplicateActions:d});return g}(e),D=E.filter((e=>e.isTopLevel()));p&&z().iz({blocks:E,transaction:d});if("workspace"===n)z().Od({environment:t,blocks:D,transaction:d});else if("private"===n){(null==r?void 0:r.getSpaceStore())&&l.every((e=>e.isTopLevelPrivatePage()))&&"private"===v||z().Mr({environment:t,blocks:D,transaction:d})}const L=u&&o!==I().bH.Onto;if(L){(await(0,g().z)())({environment:t,blocks:l,transaction:d})}return!0}({...e,transaction:t,shouldClearPagePermissions:y,shouldUpdateToManualSort:S});return{moved:n}}});x&&U().Ce({environment:o,movedItems:r,previousParentPointers:w,moveToLocation:(0,v().g7)({targetStore:d,droppedDirection:s,outlinerSectionType:l,environment:o})})}function X(e){let{targetStore:t,targetParentStore:n}=e;if(t)return t;const{id:o,table:i}=n;let r;switch(i){case"space":case"space_view":r={type:"space",id:o};break;case"block":r={type:"page",id:o};break;case"team":r={type:"team",id:o};break;default:throw new Error("Unexpected table type")}return(0,v().sZ)(r)}async function J(e){const{droppedStores:t,duplicate:n}=e.dropArgs,{environment:o,type:i,parentStore:r,isDroppingOnFullSection:a,duplicateActions:s}=e,l=I().bH.Below;return!!r&&(await Z({environment:o,type:i,targetParentStore:r,isTopLevelItem:!0,droppedDirection:l,droppedStores:t,duplicate:n,isDroppingOnFullSection:a,duplicateActions:s}),!0)}function ee(e){const{environment:t,store:n,parentStore:o,insertStores:i,transaction:r,before:a,type:s}=e,{currentSpaceViewStore:l,currentSpaceStore:c}=k().default.state,u=d().o8(i).reverse();"private"===s&&c&&l&&H().X$({environment:t,spaceStore:c,spaceViewStore:l,transaction:r});const p=a?i.map((e=>L().nc({parentStore:o,insertStore:e,beforeStore:n,transaction:r}).childStore)):u.map((e=>L().WH({parentStore:o,insertStore:e,afterStore:n,transaction:r}).childStore)),m=p.filter((e=>e.isTopLevel()));return"workspace"===s?z().Od({environment:t,blocks:m,transaction:r}):"private"===s&&z().Mr({environment:t,blocks:m,transaction:r}),p}function te(e){const{environment:t,spaceViewStore:n,type:o,outlinerToggleButtonStore:i,newIsHidden:a,shouldPersistToggleState:s}=e;i.setState({...i.state,isHidden:a}),E().V3(t,{is_toggled:!a,outliner_type:o}),s&&r().K.set({userId:n.environment.currentUser.id,key:(0,w().LW)(n,o),value:a}),(0,B().tourIsActiveInSidebarStep)(B().default.state)&&a&&B().default.setState({type:"inactive"})}function ne(e){const{type:t,targetStore:n,targetParentStore:o,transaction:i,isTopLevelItem:r}=e,a="team"===t&&o.table===s().yK&&r;if(L().TF({childToRemoveStore:n,parentStore:o,transaction:i}),a&&n.getParentId()===o.id){const t=A().h4.createChildStore(e.targetParentStore,{...e.targetParentStore.pointer,table:s().yK});W().Ex({teamStore:t,store:n,transaction:i})}}function oe(e){let{environment:t,blockStore:n,event:r,shouldNavigateToSource:a,analytics:s,toggleOptions:c}=e;(0,C().EF)(t)?(t.device.isMobile&&S().close(),q().createAndCommit({userAction:"OutlinerItem.createdPage",environment:t,canUndo:!0,perform:e=>function(e){var t;const{environment:n,store:r,transaction:a,navigateToParent:s,from:l}=e,c=V().Wv({environment:n,type:i().xd.page,inMemoryRecordCache:r.inMemoryRecordCache,transaction:a,spaceId:r.isCollectionView()?null===(t=r.getCollectionStore())||void 0===t?void 0:t.pointer.spaceId:r.pointer.spaceId}),d=r.getAssociatedCollectionStore();if(r.isCollectionView()){const e=r.getCollectionStore()||d;if(!e)throw new Error("getCollectionStore() returned undefined");if(!F().X$({parentStore:e,childStore:c,transaction:a}))throw new Error("parentChildActions.moveToCollection() returned false");const t=e.getDefaultTemplatePageStore();t&&D().n5({title:"template",environment:n,store:c,templateStore:t,isKeyboard:!1,isCreateIn:!1,transaction:a,from:"outliner_actions"})}r.isCollectionView()||F().NI({parentStore:r.getContentStore(),childStore:c,transaction:a}),x().Ay.setState({...x().Ay.state,lastPageId:k().default.state.mainEditorCurrentBlockStore?k().default.state.mainEditorCurrentBlockStore.id:void 0}),n.device.isMobile?p().uK({environment:n,store:c,showMoveTo:!1,saveParent:!1,visitType:u().ig.Link,pageVisitSource:o().y8.Create}):j().VU({environment:n,store:c,showMoveTo:!0,saveParent:!1,currentBlockStore:s?r:void 0,peekMode:void 0,resultsStore:void 0,collectionContextStore:void 0,pageVisitSource:o().y8.Create}),R().v(n,{from:"sidebar_outliner_item",outliner_location:"secondary_sidebar"===l?"pane":"sidebar",type:"page",new_page_id:c.id,creating_block_id:c.id,parent_collection_id:c.getParentCollectionIdUpToTwoLevels()})}({environment:t,event:r,store:n,transaction:e,navigateToParent:a,from:s.from})}),l().u4({name:"page_created",args:{type:s.type,from:s.from}}),c&&!n.isCollectionView()&&(c.onToggle(!0),(0,h().s4)({store:n,toOpen:!0,environment:t,isTopLevelItem:c.isTopLevelItem}))):(0,C().QY)(t)}function ie(e){let{type:t,droppedDirection:n,isTopLevelItem:o}=e;return"shared"===t&&n!==I().bH.Onto&&o}},873050:(e,t,n)=>{n.d(t,{$4:()=>P,AU:()=>E,Ay:()=>N,I6:()=>A,IW:()=>w,LQ:()=>y,MI:()=>T,Ml:()=>I,N1:()=>k,Oe:()=>b,Pi:()=>M,S2:()=>U,SO:()=>S,YF:()=>D,Ze:()=>R,fe:()=>B,gv:()=>C,tG:()=>O,vu:()=>L,y_:()=>x});n(944114),n(898992),n(823215),n(354520),n(672577),n(581454),n(737550);var o=()=>n(289915),i=()=>n(970013),r=()=>n(713998),a=()=>n(329199),s=()=>n(455348),l=()=>n(837788),c=()=>n(448801),d=()=>n(416504),u=()=>n(496603),p=()=>n(534177),m=()=>n(313892),g=()=>n(186445),f=()=>n(205098),v=()=>n(909470),h=()=>n(405417),_=()=>n(972435);const b="notion://database/hide_subitems_filter";function y(e){const{schema:t,filters:n,getRecordModel:i}=e,r=[];for(const o of Object.keys(t)){const e=S({property:o,schema:t,getRecordModel:i});e&&r.push(e)}const a=r.filter((e=>!n.find((t=>(0,o().yX)(t.filter)&&t.filter.property===e.property))));return u().Ul(a,(e=>{const n=t[e.property];return(null==n?void 0:n.name)||""}))}function S(e){const{property:t,schema:n,getRecordModel:o}=e,i=n[t];if(i&&!(0,r().ah)(i))return;return{property:t,filter:(0,f().SN)({property:t,schema:n,getRecordModel:o})}}function w(){return(e,t)=>{const n=!(0,o().t_)(e.filter),i=!(0,o().t_)(t.filter);return n&&i?0:n?-1:1}}function k(e){var t;const{collectionContextStore:n,applySubitemFilter:r,filterOutHideSubitemsQuickFilter:a}=e;let s=n.currentPropertyFiltersStore.state;const l=n.currentCombinatorFilterStore.state,c=r&&n.currentSubitemFormatStoreForUiDisplayStore.state,d=n.normalizedSchemaStore.state,p=c&&d[c.property],m=p&&"relation"===p.type&&(0,i().zO)(p)===(null===(t=n.collectionStore())||void 0===t?void 0:t.id)&&p.property,g=m?{property:m,filter:{operator:"is_empty"}}:void 0;a&&(s=s.filter((e=>e.id!==b)));const f=(0,o().rg)({propertyFilters:s,combinatorFilter:l,schema:d});return u().oE([g,...f])}function I(e,t){var n,i,r;const s=e.collectionViewStore();if(!s)return{combinatorFilter:void 0,filters:{moveOps:[],removed:[],updated:[],moved:[],added:[]},sorts:void 0};const d="persisted"===t?s.getQueryStore().getKeyStore("sort").getValue()||[]:(null===(n=e.normalizedQueryStore.state)||void 0===n?void 0:n.sort)||[],p=e.currentSortsStore.state,m="persisted"===t?s.getQueryStore().getKeyStore("filter").getValue():null===(i=e.normalizedQueryStore.state)||void 0===i?void 0:i.filter,g=e.currentCombinatorFilterStore.state,f="persisted"===t?(null===(r=s.getPropertyFiltersStore().getValue())||void 0===r?void 0:r.sort(w()))||[]:function(e){const t=e.normalizedSchemaStore.state,n=e.normalizedFormatStore.state.property_filters||[];return u().oE(n.filter((n=>{const i=(0,a().hs)(n.filter,t),r=e.collectionViewBlockStore();if(t[n.filter.property]&&i&&(0,o().tn)(t,n.filter.property,i.filter,null==r?void 0:r.getRecordModel))return i&&{id:n.id,filter:i}})).sort(w()))}(e),v=e.currentPropertyFiltersStore.state,h=f.map((e=>e.id)),_=v.map((e=>e.id)),{beforeOps:b,removeOps:y}=(0,c().i)(h,_),S=Array.from(y).filter((e=>!_.includes(e))),k=Object.keys(b).map((e=>({id:e,beforeId:b[e]}))),I=k.filter((e=>{let{id:t}=e;return h.includes(t)})).map((e=>{let{id:t}=e;return t})),x=k.filter((e=>{let{id:t}=e;return!h.includes(t)})).map((e=>{let{id:t}=e;return t})),A=v.filter((e=>f.find((t=>{if(e.id!==t.id)return!1;const n=u().mg(t),o=u().mg(e);return!u().n4((0,l().A)(o,"ignore-class-instances"),(0,l().A)(n,"ignore-class-instances"))})))).map((e=>e.id));return{combinatorFilter:u().n4(m,g)?void 0:{value:g},filters:{moveOps:k,removed:S,updated:A,moved:I,added:x},sorts:u().n4(d,p)?void 0:{value:p}}}function x(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter||void 0!==t.sorts)}function A(e){const t=e.localStateDiffStore.state;return Boolean(t.filters.moved.length>0||t.filters.added.length>0||t.filters.removed.length>0||t.filters.updated.length>0||void 0!==t.combinatorFilter)}function C(e){const t=e.localStateDiffStore.state;return Boolean(void 0!==t.sorts)}function T(e){return{property:(0,i().ol)(e),filter:{operator:"string_contains",value:{type:"exact",value:void 0}}}}function M(e){const t=e.currentCombinatorFilterStore.state,n=e.currentPropertyFiltersStore.state.filter((e=>!L(e.id))).map((e=>e.filter)),o=[...(null==t?void 0:t.filters)||[],...n];return{...t,filters:o,operator:"and"}}function P(e,t){const n=e.currentCombinatorFilterStore.state,o=e.currentPropertyFiltersStore.state.filter((e=>e.id!==t.id)),i=[...(null==n?void 0:n.filters)||[],t.filter];return{combinatorFilter:{operator:"and",...n,filters:i},propertyFilters:o}}function B(e,t,n,o){let i=n.filter((e=>"is_group"===e.type)).map((t=>e.find((e=>e.name===t.value)))).filter(p().O9),r=n.filter((e=>"is_option"===e.type)).map((e=>t.find((t=>t.value===e.value)))).filter(p().O9);for(const a of e){const e=a.optionIds??[];if(i.some((e=>e.id===a.id)))r=r.filter((t=>!e.includes(t.id)));else if(e.length>0){const t=r.filter((t=>!e.includes(t.id)));t.length+e.length===r.length&&(r=t,i=[...i,a])}}if("is_option"===o.type){const n=t.find((e=>e.value===o.value));if(!n)return;const a=r.filter((e=>e.id!==n.id));if(a.length<r.length)r=a;else{const o=e.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(n.id)})),a=i.find((e=>e.id===(null==o?void 0:o.id)));if(a){const e=t.filter((e=>{var t;return(null===(t=a.optionIds)||void 0===t?void 0:t.includes(e.id))&&e.id!==n.id}));i=i.filter((e=>e.id!==a.id)),r=[...r,...e]}else{r=[...r,n];const e=(null==o?void 0:o.optionIds)??[];if(o&&e.length>0){const t=r.filter((t=>!e.includes(t.id)));t.length+e.length===r.length&&(r=t,i=[...i,o])}}}}else if("is_group"===o.type){const t=e.find((e=>e.name===o.value));if(!t)return;const n=i.filter((e=>e.id!==t.id));if(n.length<i.length)i=n;else{const e=t.optionIds??[];i=[...i,t],r=r.filter((t=>!e.includes(t.id)))}}else(0,p().HB)(o.type);return[...i.map((e=>({type:"is_group",value:e.name}))),...r.map((e=>({type:"is_option",value:e.value})))]}function R(e){const{group:t,options:n,filterValues:o}=e,i=o.some((e=>"is_group"===e.type&&e.value===t.name)),r=n.filter((e=>{var n;return null===(n=t.optionIds)||void 0===n?void 0:n.includes(e.id)})),a=new Map;for(const d of r){const e=o.some((e=>"is_option"===e.type&&e.value===d.value))||i;a.set(d.id,e)}const s=Array.from(a.values()),l=s.some((e=>e)),c=s.every((e=>e))&&s.length>0;return{groupCheckState:!(!i&&!c)||!!l&&"partial",optionCheckedInfo:a}}function E(e){var t,n;const{collectionStore:i,collectionContextStore:r,environment:a}=e,l=r.relativeVariableStore.state,c=r.currentPropertyFiltersStore.state,u=r.currentCombinatorFilterStore.state,p=c.filter((e=>!(0,o().t_)(e.filter))).map((e=>e.filter));if(0===p.length&&!u)return;const m=null==i?void 0:i.getModel(),f=null===(t=r.collectionViewStore())||void 0===t?void 0:t.getCollectionSource(),h=r.normalizedSchemaStore.state,b=null===(n=r.viewsModuleContextStore.currentPageStore())||void 0===n?void 0:n.id,y={schema:m&&f?(0,s().zC)(f.type,h,m):h,userId:a.currentUser.id,userTimeZone:(0,d().P)(),userStartOfWeek:g().XX.state,intl:_().A.getIntl(),relativeVariableResult:l,currentPageInRelatedCollection:b,collectionFeatureGates:(0,v().i)()};return{filter:{filters:u?[...p,u]:p,operator:"and"},propertyMapping:void 0,context:y}}function D(e,t,n){const{property:o}=t,r=e[o];if(!(r&&"rollup"===r.type&&r.relation_property&&r.target_property))return r;{const t=e[r.relation_property];if(t&&(0,i().nC)(t)){const e=(0,i().Nv)(t);if(e){const t=n.getRecordModel(e);if(!t)return;const o=t.getNormalizedSchema();if(o){const e=o[r.target_property];if(e&&"rollup"!==e.type)return e}}}}}function N(e,t){const n=e.collectionViewStore(),i=e.currentSubitemFormatStoreForUiDisplayStore.state,r=null==n?void 0:n.getType(),a=k({collectionContextStore:e,applySubitemFilter:t&&Boolean(i)&&!(r&&(0,h().qS)(r)),filterOutHideSubitemsQuickFilter:!t});return(0,o().GV)(a)}function L(e){return(0,m().BI)(e)||e===b}function O(e){return e.currentPropertyFiltersStore.state.filter((e=>!(0,o().t_)(e.filter))).length+(e.currentCombinatorFilterStore.state&&e.permissionScopesStore.state.canConfigureBlock?1:0)}function U(e){var t;const n=e.currentCombinatorFilterStore.state;return(null==n||null===(t=n.filters)||void 0===t?void 0:t.length)||0}},874096:(e,t,n)=>{n.d(t,{s:()=>i});var o=()=>n(508496);function i(){return"on"===o().default.getEligibleGroup({experimentId:"pdf_importer",defaultGroup:"control"})}},874753:(e,t,n)=>{n.d(t,{P:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,currentView:"chat",from:void 0,isAssistantInputEmpty:!0}}}const i=new o;(0,n(604341).exposeDebugValue)("AssistantMenuStore",i)},875464:(e,t,n)=>{n.d(t,{DI:()=>m,Jg:()=>g,sX:()=>u});n(898992),n(354520),n(581454),n(737550);var o=n(296540),i=()=>n(847249),r=()=>n(534177),a=()=>n(351360),s=()=>n(846955);const l={prebuilt_templates:e=>Boolean(e.initialTeamStoreId)&&e.teamStoreIds.some((t=>t===e.initialTeamStoreId))};function c(e,t){const n=l[e];return!n||n(t)}function d(e,t){return e.filter((e=>c(e,t)))}function u(e,t,n){const o=e.indexOf(t);if(o<=-1||o>=e.length-1)return null;const i=e[o+1];return c(i,n)?i:u(e,i,n)}function p(e,t,n){const o=e.indexOf(t);if(o<=0)return null;const i=e[o-1];return c(i,n)?i:p(e,i,n)}function m(e){let t;switch(e){case"team_creator":t=s().orderedTeamSidebarTourSteps;break;case"home_checklist_workspace_tour":t=s().orderedHomeChecklistWorkspaceTourSteps;break;case"home_available":t=["home"];break;case"create_page":t=s().orderedCreatePageHomeChecklistTourSteps;break;case"chat_with_ai":t=s().orderedChatWithAiHomeChecklistTourSteps;break;case"collaborate":t=s().orderedCollaborateTourSteps;break;case"explore_community_templates":t=s().orderedExploreCommunityTemplatesTourSteps;break;case"explore_template_marketplace":t=s().orderedExploreCommunityTemplatesInAppTourSteps;break;case"explore_team_template":t=s().orderedExploreDocsTemplateTourSteps;break;case"explore_private_template":t=s().orderedExplorePrivateTemplateTourSteps;break;case"explore_personal_template":t=s().orderedExplorePersonalTemplateTourSteps;break;case"explore_getting_started_template":t=s().orderedExploreGettingStartedTemplateTourSteps;break;case"home_topbar_action_button":t=s().orderedHomeTopbarActionButtonTourSteps;break;case"team_workflow_templates":t=s().orderedTeamWorkflowTemplatesTourSteps;break;case"verify_page":t=s().orderedVerifyPageTourSteps;break;case"adoption_push_templates":t=s().adoptionPushTemplatesTourSteps;break;case"adoption_push_home":t=s().adoptionPushHomeTourSteps;break;case"adoption_push_ai":t=s().adoptionPushAiTourSteps;break;case"adoption_push_invite":t=s().adoptionPushInviteTourSteps;break;default:(0,r().HB)(e)}return t}function g(e,t){const n=(0,i().K8)((()=>{var e;return((null===(e=a().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getTeamsStores())||[]).map((e=>e.id))}),[]),r=(0,i().K8)((()=>s().default.state.initialTeamStoreId),[]);return o.useMemo((()=>{const o=m(e),i={teamStoreIds:n,initialTeamStoreId:r};return[d(o,i),p(o,t,i),u(o,t,i)]}),[n,r,t,e])}},875856:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=()=>n(498212);class i extends(()=>n(757695))().default{getInitialState(){return{isLoaded:!1,isLoggingEnabled:!1,isAmplitudeEnabled:!1,isSegmentEnabled:!1,isZendeskEnabled:!1,isIntercomEnabled:!1,intercomAppId:void 0,intercomUserHash:void 0,noIntercomUserId:!1,isSprigEnabled:!1,zendeskToken:void 0,endpoint:""}}shouldRefresh(e){return!this.state.isLoaded||Boolean(e)!==Boolean(this.state.user_id)||Boolean(e&&this.state.user_id&&(0,o().Xw)(this.state.user_id)!==(0,o().Xw)(e))}}const r=new i},878060:(e,t,n)=>{n.d(t,{O:()=>k,n:()=>I});n(296540);var o=()=>n(726275),i=()=>n(416504),r=(n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(430670),n(581454),()=>n(496603)),a=()=>n(713998),s=()=>n(388821);const l=500;function*c(e){const{startingBlock:t,relationPropertyIdGroups:n,receiver:o}=e;let i,s=n.map((e=>function*(e){const{startingBlock:t,relationPropertyIds:n,receiver:o}=e,i=new Set,s=[{block:t}];let c=0;for(;;){const e=s.shift();if(!e)break;const{block:t}=e;if(i.has(t.id))continue;i.add(t.id);const d=n.flatMap((e=>{var n;return(0,a().n)(null===(n=t.properties)||void 0===n?void 0:n[e])}));if(!o.receive(d))return;if(d.length>0){const{recordMap:e}=yield{recordPointers:d};s.push(...r().oE(d.map((t=>{const n=e.getValue(t);if(n&&n.alive)return{block:n}}))))}if(c++,c>l)throw new Error("Reached maximum number of iterations")}}({relationPropertyIds:e,startingBlock:t,receiver:o})));for(;s.length>0;){const e=[];s=s.filter((t=>{const n=i?t.next(i):t.next();return!n.done&&(e.push(n.value),!0)})),e.length>0&&(i=yield{recordPointers:e.flatMap((e=>e.recordPointers))})}}class d{constructor(e){this.blockPointerSet=new(n(400017).A),this.limit=e}getBlockPointers(){return this.blockPointerSet.valuesArray()}receive(e){return this.blockPointerSet.add(...e),this.blockPointerSet.size<this.limit}}function u(e){return function(e){const{startingBlock:t,relationPropertyIdGroups:n,getRecordValue:o,limit:i}=e,r=new d(i),a=c({startingBlock:t,relationPropertyIdGroups:n,receiver:r});let l=a.next();for(;!l.done;){const e=s().RecordMap.create();for(const t of l.value.recordPointers)e.setValue(t,o(t));l=a.next({recordMap:e})}return r.getBlockPointers()}(e).every((t=>Boolean(e.getRecordValue(t))))}var p=()=>n(959013),m=()=>n(534177),g=()=>n(104012),f=()=>n(760578),v=()=>n(351360),h=()=>n(630116),_=()=>n(449506),b=()=>n(436572),y=()=>n(751156),S=n(474848);const w=100;function k(e){const{environment:t,store:n}=e;A({environment:t,store:n,change:{type:"date",...e}})}function I(e){const{environment:t,store:n}=e;A({environment:t,store:n,change:{type:"relation",...e}})}const x=new(n(999752).O)(1);function A(e){const{environment:t,store:n,change:a}=e,s=n.getAssociatedCollectionStore();if(!s)return;const l=s.getDatabaseType(),c=s.getSchema(),d=s.getNormalizedDependencyDateShiftingConfig();if(!d)return;const k=s.getFormatStore().getKeyStore("collection_default_arrows_by").getValue();if(!k)return;const I=c[k];if("relation"!==(null==I?void 0:I.type))return;const A=I.property;A&&x.enqueue((()=>async function(e){var t,n;const{environment:a,store:s,dateShiftConfig:l,databaseType:c,blockedByPropertyId:d,blockingPropertyId:k,change:I,collectionSchema:x}=e,A={id:s.id,properties:s.getProperties()},C=null===(t=v().default.state.currentUserSettingsStore)||void 0===t||null===(t=t.getSettings())||void 0===t?void 0:t.locale,T=(0,i().P)();let M,P,B;if("date"===I.type){var R;if(0===r().E$(r().oE([l.date_property,l.end_date_property]),r().oE([I.dateProperty.id,null===(R=I.otherDateProperty)||void 0===R?void 0:R.id])).length)return;const e=new Map;e.set(I.dateProperty.id,I.dateProperty),I.otherDateProperty&&e.set(I.otherDateProperty.id,I.otherDateProperty);const t=t=>{const n=e.get(t);if((0,m().O9)(n))return n;{var o;const e=null===(o=A.properties)||void 0===o?void 0:o[t];return{id:t,oldValue:e,newValue:e}}};M=t(l.date_property),(0,m().O9)(l.end_date_property)&&(P=t(l.end_date_property))}else if("relation"===I.type){if(I.relationPropertyId!==k&&I.relationPropertyId!==d)return;if("preserve_gap"===l.mode)return;M={id:l.date_property,oldValue:void 0,newValue:A.properties[l.date_property]},l.end_date_property&&(P={id:l.end_date_property,oldValue:void 0,newValue:A.properties[l.end_date_property]})}else(0,m().HB)(I);"preserve_gap"===l.mode?B=[[d,k]]:"consume_gap"===l.mode?B=[[d],[k]]:(0,m().HB)(l.mode);u({startingBlock:A,relationPropertyIdGroups:B,limit:w,getRecordValue:s.getRecordValue})?await Promise.resolve():await _().callApi({eventName:"getTransitivePageRelations",environment:a,data:{blockId:A.id,limit:w,relationPropertyIdGroups:B}}).then((()=>{}));const E=(0,o()._v)({block:{id:A.id,properties:{...A.properties,...M.oldValue?{[M.id]:M.oldValue}:{},...null!==(n=P)&&void 0!==n&&n.oldValue?{[P.id]:P.oldValue}:{}}},blockingPropertyId:k,blockedByPropertyId:d,dateProperty:M,endDateProperty:P,getRecordValue:s.getRecordValue,timeZone:T,locale:C,options:l,collectionSchema:x,getRecordRole:s.getRecordRole}),{operations:D}=E;y().createAndCommit({userAction:"collectionDateActions.handleDependencyDateShifting",environment:a,canUndo:!0,perform:e=>{for(const t of D){const n=(0,h().Oo)(s,t.pointer);y().applyOperation({store:n,operation:t,transaction:e})}}});const N=(0,f().Jh)({result:E,databaseType:c});N&&b().D6({label:(0,S.jsx)(p().sA,{...N.message}),right:N.canUndo?(0,S.jsx)(g().q6,{}):void 0})}({environment:t,store:n,dateShiftConfig:d,databaseType:l,blockedByPropertyId:A,blockingPropertyId:k,change:a,collectionSchema:c}))).catch((e=>{console.error(e)}))}},878079:(e,t,n)=>{n.d(t,{Qi:()=>m,Z5:()=>f,fb:()=>g,x2:()=>d,yP:()=>p});n(944114);var o=()=>n(617871),i=()=>n(865377),r=()=>n(322769),a=()=>n(351360),s=()=>n(508496),l=()=>n(630116),c=()=>n(108944);function d(e){const t=c().g7(e),n=[];for(const o of t)"block"===o.table&&n.push({blockStore:o,slackIntegrationStore:(0,l().Oo)(e,{table:i().VY,id:o.id})});for(const{blockStore:o,slackIntegrationStore:i}of n)if(i.isReady()){if(i.getKeyStore("enabled").getValue())return{blockStore:o,slackIntegrationStore:i}}return{blockStore:e,slackIntegrationStore:(0,l().Oo)(e,{table:i().VY,id:e.id})}}function u(){var e;const t=null===(e=a().default.state.currentSpaceStore)||void 0===e?void 0:e.getBotSettingsStore().getValue();return(0,r().nH)({spaceBotSettings:t,integrationId:o().zG,env:"production"})}function p(){return s().default.checkGate({gateName:"legacy_slack_notifications"})}function m(){return u()||!1}function g(){return u()||!1}function f(){return!!u()&&s().default.checkGate({gateName:"enable_notion_activity_notifications_in_slack"})}},878377:(e,t,n)=>{n.d(t,{K1R:()=>Fn,Uo6:()=>Re,$Mx:()=>Zn,Bb5:()=>eo,ctY:()=>Lt,RdQ:()=>Jn,pLL:()=>At,bLC:()=>Tt,lTV:()=>Yn,xqI:()=>Tn,Cuf:()=>Cn,p9k:()=>Mn,mUX:()=>ot,Km9:()=>nt,_37:()=>kn,JZE:()=>Jo,VNy:()=>Ke,SvZ:()=>Qe,x7S:()=>so,p2L:()=>qe,Xmj:()=>Ge,wTm:()=>Xo,MIU:()=>Fe,ecY:()=>Ue,UL_:()=>vn,MNy:()=>hn,Wci:()=>ro,fHN:()=>Ye,Wir:()=>Ot,O1v:()=>gt,My5:()=>Nt,$9:()=>He,AVO:()=>We,P_F:()=>fn,BBM:()=>$e,ed0:()=>mn,pw4:()=>zo,gxn:()=>ni,omD:()=>st,opL:()=>at,y9r:()=>oo,aAU:()=>io,JPf:()=>_n,wx:()=>bn,FFM:()=>Go,ZCq:()=>qo,V40:()=>Ko,y2w:()=>pi,Jt9:()=>To,ZLr:()=>Bo,z5D:()=>Po,nRE:()=>Eo,GPx:()=>ti,dj5:()=>gi,i5y:()=>kt,Rde:()=>bt,SDU:()=>gn,Pqm:()=>Mo,Hcy:()=>Ro,xCr:()=>Ao,iv4:()=>Xn,Env:()=>Un,hfc:()=>Zt,VjU:()=>vt,wFE:()=>ht,m01:()=>Ht,WoS:()=>fo,bmm:()=>et,dKT:()=>Pn,Pnk:()=>pt,WWi:()=>Ln,z9l:()=>wt,ITL:()=>No,CeV:()=>rn,Kq2:()=>cn,Afv:()=>an,Efw:()=>pn,tpG:()=>jo,vP$:()=>Qn,P$I:()=>On,jfA:()=>ft,cV4:()=>fi,oy3:()=>Kn,Zmr:()=>Yt,d0C:()=>Bt,bIL:()=>St,g$R:()=>Fo,fAV:()=>xt,Lzj:()=>It,c5w:()=>wn,IT$:()=>no,b8R:()=>Ut,DNw:()=>Ft,ld1:()=>Ho,ZVI:()=>Zo,Y4D:()=>vo,SQN:()=>Rt,IW:()=>Ze,hLE:()=>Xe,Qp$:()=>tt,ka$:()=>_t,h1w:()=>$o,ctQ:()=>Dt,kD4:()=>ko,$68:()=>Io,mEr:()=>ci,bdp:()=>li,yI5:()=>di,BAy:()=>un,PaP:()=>An,Ozi:()=>Pt,un6:()=>zt,wu0:()=>ei,Y8P:()=>Co,HOV:()=>Et,P5O:()=>ln,nOz:()=>Jt,I2X:()=>en,afo:()=>Hn,lOb:()=>dn,yAQ:()=>Wo,BUc:()=>mt,vEP:()=>dt,UC4:()=>sn,uAU:()=>uo,Wfp:()=>Mt,VxA:()=>Oe,SoP:()=>Vo,ln6:()=>lt,Wj2:()=>Rn,M3g:()=>tn,cX8:()=>jt,ISA:()=>yt,TMT:()=>to,FrL:()=>qt,rr0:()=>$t,wHP:()=>Wt,lj$:()=>ct,FEq:()=>Le,i6S:()=>$n,ibx:()=>Gt,pe1:()=>Bn,_fc:()=>qn,W_Y:()=>In,mDl:()=>Ne,zrb:()=>En,IRu:()=>Qt,Kwf:()=>wo,bct:()=>on,L8k:()=>Vn,gII:()=>Do,sc7:()=>nn,_Ti:()=>zn,pxM:()=>ui,PfK:()=>Je,dUO:()=>Xt,tpB:()=>Kt,IuJ:()=>mi,ULX:()=>jn,b8z:()=>Yo,stn:()=>Qo,Ezz:()=>it,zVC:()=>xo,vXb:()=>De,nvZ:()=>oi,QTI:()=>mo,an_:()=>Lo,_mr:()=>rt,t7S:()=>ii,J$q:()=>Ve,r9z:()=>ze,gU$:()=>po,TeF:()=>xn,xIn:()=>go,Po5:()=>je,Xjv:()=>Ct,qsB:()=>ut,uFH:()=>Vt,lG8:()=>bo,D4X:()=>_o,geu:()=>yo,qFS:()=>So,LO$:()=>ho,M7S:()=>yn,AU6:()=>Ee,or:()=>Be,GbK:()=>Wn,V5t:()=>ao,qKm:()=>lo,nGR:()=>co,Kg6:()=>ai,IrU:()=>ri,JYi:()=>Gn,w2Y:()=>Uo,d2I:()=>Oo,jc4:()=>Sn,zq3:()=>Nn});n(18107),n(967357),n(898992),n(823215),n(354520),n(672577),n(581454),n(737550);var o=()=>n(700500),i=()=>n(90023),r=()=>n(713998),a=()=>n(107041),s=()=>n(522419),l=()=>n(388693),c=()=>n(433847),d=()=>n(68263);const u=["TypeScript","JavaScript","GraphQL","HTML","CSS","Scss","JSON","XML","Rust"];var p=()=>n(861017),m=()=>n(179034),g=()=>n(519831),f=()=>n(343666),v=()=>n(96689),h=()=>n(854150),_=()=>n(322769),b=()=>n(762433),y=()=>n(468006),S=()=>n(919709),w=()=>n(496603),k=()=>n(720665),I=()=>n(602098),x=()=>n(519839),A=()=>n(799832),C=()=>n(780054),T=()=>n(540144),M=()=>n(97270),P=()=>n(186445),B=()=>n(611191),R=()=>n(776894),E=()=>n(747100),D=()=>n(731320),N=()=>n(836251),L=()=>n(37433),O=()=>n(646736),U=()=>n(444796),F=()=>n(400851),V=()=>n(263711),j=()=>n(696746),z=()=>n(129522),H=()=>n(182106),W=()=>n(247450),q=()=>n(311337),K=()=>n(980914),G=()=>n(709219),$=()=>n(578872),Y=()=>n(110955),Q=()=>n(792415),Z=()=>n(351360),X=()=>n(430483),J=()=>n(337567),ee=()=>n(525569),te=()=>n(227440),ne=()=>n(77246),oe=()=>n(948914),ie=()=>n(176106),re=()=>n(508496),ae=()=>n(975971),se=()=>n(735372),le=()=>n(375447),ce=()=>n(712505),de=()=>n(411671),ue=()=>n(151059),pe=()=>n(630116),me=()=>n(733539),ge=()=>n(899677),fe=()=>n(502438),ve=()=>n(620149),he=()=>n(24157),_e=()=>n(47373),be=()=>n(405417),ye=()=>n(449195),Se=()=>n(289117),we=()=>n(245128),ke=()=>n(504836),Ie=()=>n(396301),xe=()=>n(478726),Ae=()=>n(108944),Ce=()=>n(878079),Te=()=>n(640653),Me=()=>n(792002),Pe=()=>n(483461);function Be(e){return t=>e.some((e=>e(t)))}function Re(e){return t=>e.every((e=>e(t)))}function Ee(e){return t=>!e(t)}function De(e){return e.blocks&&1===e.blocks.length}function Ne(e){if(!De(e))return!1;const{publicPageData:t}=Q().A.state;return Boolean(null==t?void 0:t.isDLSViewer)}function Le(e){return e.blocks&&e.blocks.length>1}function Oe(e){return!!(0,B().iE)()&&e.blocks.every((e=>{const t=e.getParentId(),n=e.recordStoreUIParentStore,o=null==n?void 0:n.id;return t&&o&&t!==o}))}function Ue(e){return e.blocks.every((t=>{const n=t.recordStoreUIParentStore;if(!n)return!1;const o=e.publicEditMode?e.publicEditMode:(0,Ae().Wo)(n)&&de().A.getMode(e.environment,n);return!D().QT(o)&&n.canEdit()}))}function Fe(e){const{environment:t}=e;return e.blocks.every((e=>D().MI({environment:t,blockStore:e})))}function Ve(e){return void 0!==e.blocks.find((e=>"suggest"===ne().Uv.getMode(e)))}function je(e){return void 0!==e.blocks.find((e=>(0,ne().Or)(ne().Uv.getMode(e))))}function ze(e){return e.blocks.some((e=>e.isSystemBlock()))}function He(e){if(ve().l.state)return!1;if(si())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return!je(e)&&e.blocks.every((e=>!e.pathIsDead()&&(!(0,J().dL)(e)&&e.canComment())))}function We(e){if(ve().l.state)return!1;if(si())return!1;if(e.publicEditMode){const t=e.publicEditMode.permission;return"edit"===t||"comment"===t}return e.blocks.every((e=>"suggest"===ne().Uv.getMode(e)&&(!e.pathIsDead()&&(!(0,J().dL)(e)&&e.canComment()))))}function qe(e){return!ve().l.state&&(!si()&&(!je(e)&&e.blocks.every((t=>"suggest"!==ne().Uv.getMode(t)&&(!D().QT(e.publicEditMode)&&(!t.pathIsDead()&&(!(0,J().dL)(t)&&(!(0,xe().yU)(t)&&t.canEdit()))))))))}function Ke(e){return!ve().l.state&&e.blocks.every((t=>{if(D().QT(e.publicEditMode))return!1;const n=ye().SE();return n?n.canEditCollection():t.canEdit()}))}function Ge(e){return!ve().l.state&&(!si()&&e.blocks.every((t=>!D().QT(e.publicEditMode)&&(!t.pathIsDead()&&(!t.isPlaceholderWorkflowTemplateBlock()&&(t.isCollectionView()?t.canEditCollection():t.canEdit()))))))}function $e(){return Boolean(me().default.state.undoStack.at(-1))}function Ye(){return Boolean(me().default.state.redoStack.at(-1))}function Qe(e){let{environment:t,publicEditMode:n,blocks:o}=e;if(ve().l.state)return!1;const{id:i}=t.currentUser;return!!i&&(!D().QT(n)&&o.every((e=>{const n=(0,D().A$)({userId:i,store:e}).filter((t=>{let{type:n,role:o}=t;if(!o)return!1;const i=e.isCollectionView()||e.isTemplate()?d().lg(o):d().p2(o);return"public_permission"!==n&&i}));return n.length>0&&D().MI({environment:t,blockStore:e})})))}function Ze(e){if(e.blocks&&1===e.blocks.length){const[n]=e.blocks;if(n.isCollectionView()){var t;const e=null===(t=n.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().ek)(e)||(0,a().SJ)(e)||(0,a().Qu)(e)}}return!1}function Xe(e){if(e.blocks&&1===e.blocks.length){const[n]=e.blocks;if(n.isCollectionView()){var t;const e=null===(t=n.getCollectionStore())||void 0===t?void 0:t.getValue();if(e)return(0,a().SJ)(e)}}return!1}function Je(e){return e.blocks.every((e=>(0,xe().fc)(e)))}function et(e){return e.blocks.every((e=>(0,xe().yU)(e)))}function tt(e){return!!(0,ke().pB)()&&e.blocks.every((e=>{if(!e.isCollectionView())return!1;const t=e.getCollectionStore();return!!t&&t.isExternallyImportedAndSyncedCollection()}))}function nt(e){return!ve().l.state&&e.blocks.every((e=>e.canAdmin()))}function ot(e){return e.blocks.some((e=>Boolean(z().K.findBlockFromStoreWithMethod(e,"activate"))))}function it(e){return e.blocks.every((e=>e.isRestricted()))}function rt(e){var t;const{currentSpaceStore:n}=Z().default.state,{currentUser:o}=e.environment;return void 0!==o.id&&Boolean(null===(t=(0,O().sE)(n,o.id))||void 0===t?void 0:t.isWorkspaceOwner())}function at(){const e=P().ao();return!e||!e.isLocked()}function st(){const e=P().ao();return Boolean(null==e?void 0:e.getAssociatedCollectionStore())}function lt(e){return e.blocks.length>0&&e.blocks.some((e=>e.isLocked()))}function ct(e){return e.blocks.length>0}function dt(e){return e.blocks.some((e=>{const t=P().ao();return!(!t||!(0,xe().fc)(t))||!!(t&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function ut(e){return(0,q().y)(e.environment)}function pt(e){return!!si()||e.blocks.some((e=>e.pathIsDead()))}function mt(e){return e.blocks.some((e=>{const{mainEditorCurrentBlockStore:t}=Z().default.state,n=z().K.findCollectionViewBlockFromStore(e),o=n&&"collectionContextStore"in n?n.collectionContextStore:void 0,i=null==o?void 0:o.collectionStore();return!(!o||!i||o.permissionScopesStore.state.canEditContent)||Boolean(t&&t.isCollectionView()&&t.isNonEditableState()&&t.uiContains(e)&&t!==e)}))}function gt(e){return e.blocks.every((e=>{const t=e.getType(),n=e.getFormat();return Boolean((0,o().Db)(t,n)&&!(0,o().$I)(t))}))}function ft(e){var t;const n=null===(t=Z().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.id,i=e.blocks.at(0);if(i){const e=i.getType(),t=i.getFormat(),r=i.id;return Boolean(r===n&&(0,o().Db)(e,t))}return!1}function vt(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&e.isDefined()&&e.getParentId()!==t.id)}))}function ht(e){return e.blocks.every((e=>{const t=e.getRecordStoreUIParent();return Boolean(t&&t.canEdit()&&e.isDefined()&&e.getParentId()!==t.id)}))}function _t(e){if(e.blocks){const t=e.blocks.at(0);return Boolean(t&&t.isDefined()&&t.getType()===o().xd.file&&t.getProperties().source)}return!1}function bt(e){if(!e.blocks)return!1;const t=e.blocks.at(0),n=t&&t.getProperties().source;if(!n)return!1;const o=r().MO(n);return!!o&&s()._J(o)}function yt(e){if(e.blocks){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType(o().Ib))&&t.getProperties())}return!1}function St(e){if(e.blocks){const t=e.blocks.at(0),n=null==t?void 0:t.getType();return Boolean(n&&(0,o().bI)(n))}return!1}function wt(e){if(e.blocks){var t;const n=e.blocks.at(0);return Boolean(null==n||null===(t=n.getModel())||void 0===t?void 0:t.isType(o().IA))}return!1}function kt(e){return t=>{if(t.blocks){const n=t.blocks.at(0);return Boolean(null==n?void 0:n.getProperties()[e])}return!1}}kt("source");function It(e){if(e.blocks){const t=e.blocks.at(0);if(!t)return!1;if(t.pathIsDead())return!1;if((0,J().dL)(t))return!1;if(t.getType()===o().xd.transclusionReference){const e=t.getTransclusionReferenceTargetStore();return Boolean(e&&e.canEdit())}return!1}return!1}function xt(e){if(e.blocks){const t=e.blocks.at(0);return!!t&&(!t.pathIsDead()&&(!(0,J().dL)(t)&&t.getType()===o().xd.transclusionContainer))}return!1}function At(e){return e.blocks.every((e=>{const t=e.getModel(),n=e.getRecordStoreUIParent();return Boolean(t&&t.isType(o().Si)&&t.getType()!==o().xd.transclusionContainer&&e.getParentTable()!==g().Vl&&n&&n.id===e.getParentId())}))}function Ct(e){return t=>{if(!t.blocks)return!1;const n=t.blocks.at(0);return Boolean(n&&w().Tn(n.getType)&&n.getType()===e)}}function Tt(e){return t=>w().Si(t.blocks,(t=>t&&w().Tn(t.getType)&&t.getType()===e))}function Mt(e){const t=e.blocks.at(0);if(!t)return!1;const{language:n}=t.getProperties(),o=(0,S().q4_)(n);return u.includes(o)}function Pt(e){const t=e.blocks.at(0);if(!t)return!1;const{language:n}=t.getProperties();return"HTML"===(0,S().q4_)(n)}function Bt(e){return!1}function Rt(e){return()=>re().default.checkGate({gateName:e})}function Et(){return()=>"db_create_empty_state"===re().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})}function Dt(e){return t=>{if(1!==t.blocks.length)return!1;const n=t.blocks.at(0);if(!n)return!1;const o=n.getParentBlockStore(),i=null==o?void 0:o.getContentStores(),r=null==i?void 0:i.map((t=>t.getType()===e));if(!r||0===(null==r?void 0:r.length))return!1;const a=null==i?void 0:i.map((e=>e.id)).indexOf(n.id);return void 0!==a&&(0===a||!r[a-1])}}function Nt(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean((null==t?void 0:t.isType(o().hc))&&e.getParentTable()!==g().Vl)}))}function Lt(e){const t=P().ZO();return!!t&&e.blocks.every((e=>t.uiContains(e)&&t.id!==e.id))}function Ot(e){return e.blocks.every((e=>{const t=z().K.findBlockFromStoreWithMethod(e,"canRenderFullScreen");return Boolean(t&&t.canRenderFullScreen())}))}function Ut(e){let{environment:{device:t}}=e;return t.isElectron}function Ft(){return Boolean(oe().A.state.isElectronHandlingZoom)}function Vt(e){let{environment:{device:t}}=e;return t.isWindows}function jt(e){let{environment:{device:t}}=e;return t.isMac}function zt(e){let{environment:{device:t}}=e;return t.isIOS}function Ht(e){let{environment:{device:t}}=e;return t.isAndroid}function Wt(e){let{environment:{device:t}}=e;return t.isMobileNative}function qt(e){let{environment:{device:t}}=e;return t.isMobile}function Kt(e){let{environment:{device:t}}=e;return t.isPhone}function Gt(e){let{environment:{device:t}}=e;return t.isNative}function $t(e){let{environment:{device:t}}=e;return t.isMobileBrowser}function Yt(e){let{environment:{device:t}}=e;return t.isDesktopBrowser}function Qt(e){let{environment:{device:t}}=e;return!t.isMobile}function Zt(){return C().A.isAdminMode}function Xt(){const e=P().ao();return(0,j().lU)(e)}function Jt(){return V().g.state.isOpen}function en(){return Boolean(se().Ay.state.open)}function tn(e){let{environment:t}=e;return Boolean(t.currentUser.isLoggedIn()||t.publicDomainUserId)}function nn(){return te().A.state.online}function on(e){return!e.blocks.every((t=>{const n=t.inMemoryRecordCache===e.environment.defaultRecordCache.inMemoryRecordCache,o=t.inMemoryRecordCache.cacheFallbacks.has(e.environment.defaultRecordCache.inMemoryRecordCache);return n||o}))}function rn(e){return e.blocks.some((e=>e.isTemplate()))}function an(e){return e.blocks.some((e=>e.isCollectionViewPageWithContent()))}function sn(e){return e.blocks.some((e=>e.isAssociatedCollectionAPageTree()))}function ln(e){return e.blocks.every((()=>!function(){const e=P().ao();return null==e?void 0:e.isCollectionViewPageWithContent()}()||eo("page",!1)(e)))}function cn(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isCollectionView()}return!1}function dn(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(o().xd.collectionView)}return!1}function un(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.isType(o().xd.collectionViewPage)}return!1}function pn(e){return t=>{if(t.blocks&&1===t.blocks.length){const[n]=t.blocks,o=z().K.findCollectionViewBlockFromStore(n);if(o&&"collectionContextStore"in o)return o.collectionContextStore.getViewType()===e}return!1}}function mn(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return 1===t.getCollectionViewStores().length}return!1}function gn(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks;return t.hasSingleSourceAndNoLinkedCollections()}return!1}function fn(e){if(e.blocks&&1===e.blocks.length){const[t]=e.blocks,n=t.getCollectionStore();if(!n)return!1;const o=n.getSchema();return Object.values(o).map((e=>null==e?void 0:e.type)).every((e=>e&&K().gx[e]))}return!0}function vn(e){return N().UL(e.environment)}function hn(e){return N().MN(e.environment)}function _n(){return ie().A.state.open}function bn(){return M().A.state.open}function yn(){return le().A.state.open}function Sn(){return Y().A.state.open}function wn(){return"editing"===he().default.state.mode}function kn(){return!((0,Me().y_)(S().Ifu.User)||(0,Me().y_)(S().Ifu.Bot)||(0,Me().y_)(S().Ifu.Date)||(0,Me().y_)(S().Ifu.Page))}function In(){return fe().default.state.stores.length>0}function xn(e){return e.blocks.every((e=>e.isTopLevel()))}function An(e){const t=Z().default.state.currentSpaceStore;return(0,Te().IL)(t)}function Cn(e){return e.blocks.every((e=>Boolean(H().A.findOutlinerItemFromStore(e))))}function Tn(e){return e.blocks.every((e=>{const t=H().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"bookmarks"===t.type)}))}function Mn(e){return e.blocks.every((e=>{const t=H().A.findOutlinerItemFromStore(e);return Boolean(t&&t.isTopLevelItem&&"shared"===t.type)}))}function Pn(e){const t=e.blocks.at(0);if(!t)return!1;const n=t.getParentBlockStore();return!!n&&n.isNonEditableState()}function Bn(e){return e.blocks.some((e=>e.isNavigableBlockLocked()))}function Rn(e){return!En(e)}function En(e){if(!pi())return!0;const t=e.blocks.at(0);if(t){if(t.getParentTable()===h().yK){const n=(0,Ae().Uo)(t);if(!n||!(0,Ie().dp)({teamStore:n,environment:e.environment}))return!1}}return!0}function Dn(e){if(!e)return;const t=e.getParentPointer(),n=e.getRecordStoreUIParent();return(null==t?void 0:t.table)===h().yK&&n?pe().h4.createChildStore(n,t):Dn(e.getParentBlockStore())}function Nn(e){const{id:t}=e.environment.currentUser;return!!t&&e.blocks.every((e=>{const n=e.getPermissionItems();return(0,c().lI)(n,t)}))}function Ln(e){const{currentSpaceViewStore:t}=Z().default.state,n=e.blocks.at(0);return Boolean(t&&n&&(0,we().A)({spaceViewStore:t,pageId:n.id}))}function On(e){const t=P().ao(),n=e.blocks.at(0);return Boolean((null==n?void 0:n.id)===(null==t?void 0:t.id))}function Un(e){return e.blocks.every((t=>Boolean(D().qb(e.environment,t))))}function Fn(e){return e.blocks.every((e=>D().K1(e)))}function Vn(e){return Boolean(Z().default.state.mainEditorCurrentBlockStore)}function jn(){var e,t;const n=P().ao(),o=null==n||null===(e=n.getSiteStore())||void 0===e?void 0:e.getModel();return!!o&&Boolean(null===(t=o.getHeader())||void 0===t?void 0:t.hideSearch)}function zn(e){var t;const n=e.blocks.at(0);return Boolean((null==n?void 0:n.id)===(null===(t=ce().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Hn(e){var t;const n=e.blocks.at(0);return Boolean(E().Gb()&&(null==n?void 0:n.id)===(null===(t=ce().default.peekTargetStore.state)||void 0===t?void 0:t.id))}function Wn(e){return E().Gb()}function qn(e){return e.blocks.every((e=>e.isNavigableBlock()))}function Kn(e){return e.blocks.some((e=>e.pathIsDead()))}function Gn(e){const t=e.blocks.at(0);return!!t&&(!!C().A.isAdminMode||!!t.canEdit()&&!e.environment.device.isMobile)}function $n(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);return!!t&&(0,P().sj)(t.id)}function Yn(e){return!e.blocks.some((e=>{const t=null==e?void 0:e.getSystemBlockTypeStore().getValue();return(0,i().mi)(t)}))}function Qn(e){return e.blocks.some((e=>{e.useCrdt()}))}function Zn(e){return e.blocks.every((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof pe().pS||e instanceof pe().Bv&&e.isCollectionView())).ancestor)))}function Xn(e){let{blocks:t}=e;const n=null==t?void 0:t.at(0);return Boolean(n&&(0,be().qr)(n))}function Jn(e){let{blocks:t}=e;return x().Rd(t)}function eo(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n=>n.blocks.every((n=>{const o=(0,A().U)(n,t),i=null==o?void 0:o.collectionViewStore();return(null==i?void 0:i.getType())===e}))}function to(){const{currentSpaceStore:e}=Z().default.state;return Boolean(e&&e.canRead())}function no(){const{currentSpaceStore:e}=Z().default.state;return Boolean(e&&e.canEdit())}function oo(e){if(C().A.isAdminMode)return!0;if(e.blocks.some((e=>{const t=(0,W().h)({blockId:e.id,setting:"disableExport"});return Boolean(null==t?void 0:t.disabled)})))return!1;if(An()&&!nt(e))return!1;const t=function(e){let{environment:t}=e;const{currentSpaceStore:n}=Z().default.state;if(!n)return!1;const o=ue().A.getData(t,{spaceId:n.id});return n.isDefined()?!n.getDisableExport():o?!o.disableExport:Zt()}(e),{environment:n,blocks:o}=e;return o.every((e=>{const o=(0,Ae().Uo)(e),i=null==o?void 0:o.getModel();return o&&i?(!n.currentUser.id||!(0,y().CG)({team:i,userId:n.currentUser.id}))&&!o.getDisableExport():t}))}function io(){const{currentSpaceStore:e}=Z().default.state;return!!e&&!e.getDisableMoveToSpace()}function ro(e){return!ve().l.state&&(!!e.blocks.every((e=>e.canEdit()))&&!!Un(e))}function ao(e){return e.blocks.every((t=>{var n;return"edit"===(null===(n=de().A.getMode(e.environment,t))||void 0===n?void 0:n.permission)}))}function so(e){if(!Ue(e))return!1;const t=e.blocks.filter((e=>{const t=e.recordStoreUIParentStore,n=e.getParentStore();return t&&n&&t.id===n.id}));return 0===t.length||qe({...e,blocks:t})}function lo(e){let{environment:t}=e;const n=(0,P().rp)(t).state;return Boolean(n&&n.showSharedOverflowButton)}function co(){return(0,_e().Ck)()}function uo(e){let{blocks:t}=e;return t.some((e=>Boolean(e.findRecordStoreUIAncestor((e=>e instanceof pe().Bv&&e.isTransclusionType())).ancestor)))}function po(e){let{environment:t}=e;return re().default.checkGate({gateName:"lucy-in-the-sky-with-tab-blocks"})}function mo(e){let{environment:t}=e;return re().default.checkGate({gateName:"slide_block"})}function go(){return(0,T().M5)()}function fo(e){let{blocks:t}=e;const n=t.at(0);if(!n)return!1;const i=n.getType(),r=n.getFormat();return Boolean(r.block_width)&&!Boolean(r.block_page_width)&&!Boolean(r.block_full_width)&&Boolean(i&&(0,o().E8)(i))}function vo(e){let{environment:t}=e;return(0,Se().Y)()}function ho(e){var t;let{blocks:n}=e;const o=n.at(0);return!!o&&Boolean(null===(t=(0,Ce().x2)(o))||void 0===t||null===(t=t.slackIntegrationStore)||void 0===t?void 0:t.isReady())}function _o(){var e;const{currentSpaceStore:t}=Z().default.state,n=null==t||null===(e=t.getBotSettingsStore())||void 0===e?void 0:e.getValue();return!(0,_().az)(n)||Boolean((null==n?void 0:n.integration_approval_statuses)&&n.integration_approval_statuses[l().Jc])}function bo(e){var t;let{blocks:n}=e;const o=n.at(0);if(!o)return!1;const{slackIntegrationStore:i}=(0,Ce().x2)(o);return Boolean(i.isReady()&&!(null!=i&&null!==(t=i.getKeyStore("enabled"))&&void 0!==t&&t.getValue()))}function yo(e){var t;let{blocks:n}=e;const o=n.at(0);if(!o)return!1;const{blockStore:i,slackIntegrationStore:r}=(0,Ce().x2)(o);return Boolean(r.isReady()&&(null==r||null===(t=r.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&i.id!==o.id)}function So(e){var t;let{blocks:n}=e;const o=n.at(0);if(!o)return!1;const{blockStore:i,slackIntegrationStore:r}=(0,Ce().x2)(o);return Boolean(r.isReady()&&(null==r||null===(t=r.getKeyStore("enabled"))||void 0===t?void 0:t.getValue())&&i.id===o.id)}function wo(e){var t;let{blocks:n}=e;return(null===(t=n.at(0))||void 0===t?void 0:t.getSpaceId())!==v().Zz}function ko(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===o().xd.form}function Io(e){var t;const{environment:n}=e,o=e.blocks.at(0);return!(!o||!o.isFormBlock())&&(n.currentUser.id===o.getCreatedById()&&Boolean(null===(t=o.getFormBlockParentBlockStore())||void 0===t?void 0:t.canEditCollection()))}function xo(e){var t;return 1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getType())===o().xd.table}function Ao(e){const t=G().A.state;return t.isActive&&1===e.blocks.length&&e.blocks.at(0)===t.simpleTableStore}function Co(e){let{blocks:t}=e;return t.some((e=>Boolean(e.isImmediateColumnChild())))}function To(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n}=t;return K().MW(n)>1}function Mo(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n,selection:o}=t,i=0===o.start.row&&o.end.row===K().yv(n)-1,r=0<=o.start.col&&o.start.col<=o.end.col&&o.start.col<=K().MW(n)-1;return"column"===o.type&&r&&i}function Po(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n,selection:o}=t,i=0===o.start.row&&o.end.row===K().yv(n)-1,r=0===o.start.col&&0===o.end.col;return"column"===o.type&&r&&i}function Bo(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n}=t;return K().yv(n)>1}function Ro(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n,selection:o}=t,i=0===o.start.col&&o.end.col===K().MW(n)-1,r=0<=o.start.row&&o.start.row<=o.end.row&&o.start.row<=K().yv(n)-1;return"row"===o.type&&r&&i}function Eo(e){const t=G().A.state;if(!t.isActive)return!1;const{simpleTableStore:n,selection:o}=t,i=0===o.start.col&&o.end.col===K().MW(n)-1,r=0===o.start.row&&0===o.end.row;return"row"===o.type&&r&&i}function Do(e){var t;let{environment:n}=e;const{currentSpaceStore:o}=Z().default.state;if(null==o||!o.id)return!1;const i=null===(t=ae().A.getData(n,{spaceId:null==o?void 0:o.id}))||void 0===t?void 0:t.billingData;return"free"===(0,b().AI)(i)}function No(e){if(1!==e.blocks.length)return!1;const t=e.blocks.at(0);if(!t)return!1;const n=t.getParentStore();return!(!n||n.table!==m().ev)&&n.isType(o().xd.tab)}function Lo(e){const t=e.blocks.at(0);return Boolean(t&&t.isCollectionView()&&t.getCollectionViewSourceCollectionStore())}function Oo(e){if(!De(e))return!1;const t=e.blocks.at(0);return!!t&&(0,Pe().S)(t)}function Uo(e){return function(e){let{environment:t,blocks:n}=e;if(!pi())return!1;if(!R().w8({environment:t,blocks:n}))return!1;const o=t.currentUser.id,{currentSpaceStore:i}=Z().default.state;if(!o||null==i||!i.isDefined())return!1;if(!(0,L().canCreateTeam)({environment:t,spaceStore:i}))return!1;for(const a of n){var r;if(!a.isPageBlock())return!1;if("team"!==(null===(r=H().A.findOutlinerItemFromStore(a))||void 0===r?void 0:r.type))return!1;const e=Dn(a);if(null==e||!e.isOwner(o))return!1}return!0}(e)&&Qt(e)}function Fo(){const{currentSpaceStore:e}=Z().default.state,t=null==e?void 0:e.getBotSettingsStore().getValue();return!(0,_().az)(t)||Boolean((null==t?void 0:t.integration_approval_statuses)&&t.integration_approval_statuses[l().IQ])}function Vo(e){var t;return Boolean(null===(t=e.blocks.at(0))||void 0===t?void 0:t.getFormat().is_placeholder)}function jo(e){var t;return Boolean((null===(t=e.blocks.at(0))||void 0===t||null===(t=t.getFormat().alias_pointer)||void 0===t?void 0:t.table)===f().SN)}function zo(){const e=P().ao();if(!e||!e.hasContent())return!1;if(1===e.getContentLength()){const t=e.getContentStores()[0].getTitleStore();if(Y().A.state.open&&Y().A.state.textStore===t)return!1;if(ee().default.isEditingEmptyBlock())return!1}return!0}function Ho(){return Boolean(oe().A.state.isElectronUsingCommandNumber)}function Wo(e){return e.blocks.some(I().u)}function qo(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(o().XC))}))}function Ko(e){return e.blocks.every((e=>!(null!=e&&e.getIcon())))}function Go(e){return e.blocks.every((e=>{const t=null==e?void 0:e.getModel();return Boolean(null==t?void 0:t.isType(o().Gz))}))}function $o(e){return e.blocks[0].isFirstBlockInCalloutV2Block()}function Yo(){return ge().default.state.open}function Qo(e){const{environment:t}=e,{device:n}=t,o="quickSearch"===t.RouterStore.state.route.name;return n.isElectron&&o}function Zo(e){const{environment:t}=e,n=t.RouterStore.state.route;return(0,p().bh)(n)}function Xo(e){const{environment:t}=e;return e.blocks.some((e=>(0,F().Y)({environment:t,blockStore:e,from:"pageActionsMenu"})))}function Jo(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("image"))&&(0,U().AS)(t.getOriginalImageSource()))}function ei(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.isType("image"))}function ti(e){const t=e.blocks.at(0);return Boolean(null==t?void 0:t.getFormat().image_hyperlink)}function ni(){const e=P().ao();return"page"===(null==e?void 0:e.getType())}function oi(e){var t;return Boolean(1===e.blocks.length&&(null===(t=e.blocks.at(0))||void 0===t?void 0:t.isDictatableBlock()))}function ii(e){const t=e.blocks.at(0);return Boolean((null==t?void 0:t.isType("copy_indicator"))&&Date.now()-t.getCreatedTime()>k().nD)}function ri(e){const t=e.blocks.at(0);return!!t&&!$().hn(t)}function ai(e){const t=e.blocks.at(0);return!!t&&!$().Vg(t)}function si(){const e=P().ao();return Boolean(null==e?void 0:e.pathIsDead())}function li(e){return ci(e.blocks.at(0))}function ci(e){if(!e)return!1;if(!e.isType(o().xd.alias))return!1;const t=e.getAliasTargetStore();return Boolean((null==t?void 0:t.isTable(m().ev))&&t instanceof pe().Bv&&t.isType(o().xd.form))}function di(){return Boolean(X().zD.isFullPageTranslateEnabled())}function ui(e){const t=e.blocks.at(0);return void 0!==t&&t.isPageBlock()}function pi(){return(0,L().getActiveTeamCount)()>0}function mi(e){const t=e.blocks.at(0);return!!t&&t.isPlaceholderWorkflowTemplateBlock()}function gi(e){if(!e)return!1;const t=e.getFormat();if(!t)return!1;const n=t.marketplace_listing_id;return!!n&&n.length>0}function fi(){return"database_menu"===re().default.getEligibleGroup({experimentId:"adoption_import_contextual_entry_points",defaultGroup:"control"})}},878423:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(737550);class o extends(()=>n(757695))().default{getInitialState(){return{caches:{}}}initializeCache(e,t){this.setState({caches:{...this.state.caches,[e]:{hasUnsavedChanges:!1,inMemoryRecordCache:t}}})}updateUnsavedCacheState(e,t){var n;(null===(n=this.state.caches[e])||void 0===n?void 0:n.hasUnsavedChanges)!==t&&this.setState({caches:{...this.state.caches,[e]:{...this.state.caches[e],hasUnsavedChanges:t}}})}clearCache(e){var t;const n={...this.state.caches};null===(t=n[e])||void 0===t||t.inMemoryRecordCache.clearCache(),n[e].hasUnsavedChanges=!1,this.setState({caches:n})}expire(e){var t;const n={...this.state.caches};null===(t=n[e])||void 0===t||t.inMemoryRecordCache.expire(),delete n[e],this.setState({caches:n})}doesAnyCacheHaveUnsavedChanges(){return(0,n(534177).WP)(this.state.caches).some((e=>{let[t,n]=e;return n.hasUnsavedChanges}))}}const i=new o},878523:(e,t,n)=>{n.d(t,{Bi:()=>a,E9:()=>w,Ie:()=>g,Jg:()=>S,MP:()=>k,MR:()=>y,QP:()=>m,Sd:()=>x,Xy:()=>c,ZM:()=>b,bJ:()=>v,fq:()=>I,gN:()=>_,j4:()=>d,mw:()=>h,nq:()=>l,o2:()=>s,v3:()=>f,yO:()=>p,z0:()=>u});var o=()=>n(116225),i=()=>n(989423),r=()=>n(508496);function a(e,t){i().u4({environment:e,event:{eventName:"click_updates_sidebar_empty_comments_cta",eventProperties:t}})}function s(e,t){i().vd(e,"open_block_discussion_menu",t)}function l(e){let{environment:t,from:n,notificationId:o,activityId:r}=e;i().vd(t,"open_reply_discussion_menu",{from:n,notificationId:o,activityId:r})}function c(e){let{environment:t,from:n,notificationId:o,activityId:r}=e;i().vd(t,"close_reply_discussion_menu",{from:n,notificationId:o,activityId:r})}function d(e,t){i().vd(e,"open_new_block_discussion",t)}function u(e,t){i().vd(e,"open_new_inline_discussion",t)}function p(e){i().vd(e,"discard_new_discussion_dialog_show")}function m(e){i().vd(e,"discard_new_discussion_dialog_confirm")}function g(e){i().vd(e,"discard_new_discussion_dialog_cancel")}function f(e,t){i().vd(e,"create_block_discussion",t),r().default.logEvent("create_block_discussion"),o().u4({name:"create_block_discussion"})}function v(e,t){i().vd(e,"create_inline_discussion",t),r().default.logEvent("create_inline_discussion"),o().u4({name:"create_inline_discussion"})}function h(e,t){i().u4({environment:e,event:{eventName:"add_comment",eventProperties:t}}),r().default.logEvent("add_comment",t.from),o().u4({name:"add_comment"})}function _(e,t){i().vd(e,"delete_comment",t)}function b(e,t){i().u4({environment:e,event:{eventName:"edit_comment",eventProperties:t}})}function y(e,t){i().vd(e,"resolve_discussion",t),r().default.logEvent("resolve_discussion",t.from)}function S(e,t){i().vd(e,"reopen_discussion",t)}function w(e,t){i().vd(e,"click_discussion",t)}function k(e){const{environment:t,...n}=e;i().u4({environment:t,event:{eventName:"add_reaction",eventProperties:n}}),r().default.logEvent("add_reaction",n.reaction_value),o().u4({name:"add_reaction"})}function I(e){const{environment:t,...n}=e;i().vd(t,"remove_reaction",n)}function x(e,t){i().vd(e,"comment_upload_attachments",t)}},878855:(e,t,n)=>{n.d(t,{A:()=>o});const o=new class{constructor(){this.lruKeyStore=new(n(178624).R)({key:"frequentlyUsedSlashMenuActions",namespace:"SlashMenu",important:!1,trackingType:"necessary"})}load(){const e=this.lruKeyStore.state;let t={};try{t=e&&JSON.parse(e)||{}}catch(n){}return t}get(){return this.load()}track(e){const t=this.load(),n=t[e.key];void 0!==(null==n?void 0:n.frequency)&&void 0!==(null==n?void 0:n.lastAccessed)?(n.frequency+=1,n.lastAccessed=Date.now()):t[e.key]={frequency:1,lastAccessed:Date.now()},this.lruKeyStore.setState(JSON.stringify(t))}}},880922:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("suggestion",{viewBox:"0 0 16 16",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M8.651 8.465l-1.397.54c-.088.035-.17.018-.244-.053-.07-.07-.086-.15-.046-.237l.567-1.378 5.945-5.939 1.127 1.12-5.952 5.947zm6.447-6.427L13.97.91l.567-.567a.702.702 0 01.474-.217.615.615 0 01.468.165l.198.184c.136.14.2.306.191.495a.718.718 0 01-.217.494l-.554.574z"}),(0,o.jsx)("path",{d:"M14.084 5.065V9.65c0 .611-.152 1.072-.455 1.384-.299.308-.76.462-1.384.462h-4.1a1.37 1.37 0 00-.488.072 1.147 1.147 0 00-.389.277l-2.09 2.07v-1.879c0-.197-.043-.336-.131-.415-.084-.083-.218-.125-.402-.125H3.74c-.62 0-1.08-.154-1.384-.462-.299-.312-.448-.773-.448-1.384V4.62c0-.606.15-1.063.448-1.37.303-.313.765-.469 1.384-.469h6.36l1.3-1.298H3.71c-.664 0-1.227.123-1.688.369-.457.246-.806.6-1.048 1.061C.73 3.37.61 3.926.61 4.581v5.115c0 .655.121 1.213.363 1.675.246.457.595.808 1.048 1.054.457.246 1.004.37 1.641.37h.356v1.621c0 .294.073.527.218.699.15.171.356.257.62.257.184 0 .358-.049.52-.145a3.65 3.65 0 00.58-.435l2.255-1.998h4.073c.66 0 1.22-.123 1.681-.369a2.492 2.492 0 001.055-1.054c.242-.462.363-1.02.363-1.675V4.581c0-.267-.02-.518-.06-.752l-.208.215-1.031 1.021z"})]})})},881690:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(296540),i=()=>n(401497),r=()=>n(784892),a=()=>n(959013),s=()=>n(284371),l=()=>n(962730),c=n(474848);const d=function(e){let{backgroundColor:t,color:a,description:s,disabled:d,disabledFeedback:u,showColoredDot:p,format:m,isRound:f,isSingle:v,isStrikedThrough:h,onClickRemove:_,shouldShrink:b,shouldWrap:y,showRemoveButton:S,showTooltip:w="never",style:k,tooltip:I,tooltipPlacement:x,tooltipOriginGap:A,tooltipClassName:C,value:T}=e;const M=(0,i().IS)((e=>{const{height:o,fontSize:i,paddingLeft:s,margin:l}=(0,r().hA)(m),c=f?s+1:s;return{token:{display:v?"inline-flex":"flex",alignItems:"center",flexShrink:v||b?1:0,minWidth:0,maxWidth:"100%",height:o,margin:v?0:l,borderRadius:f?o/2:3,paddingLeft:c,paddingRight:S?0:f?c+2:c,lineHeight:"120%",opacity:d&&u?.4:void 0,fontSize:i,color:a||("light"===e.mode?e.text.primary:n(100622).Ay.whiteWithAlpha(.7)),background:t||e.legacyDefaultSelectColor,...y&&{height:void 0,paddingTop:4,paddingBottom:4},...k},tooltipDescription:{color:e.text.contrastSecondary}}}),[t,a,d,u,m,f,v,b,y,S,k]),P=(0,o.useRef)(null),B={disabled:d,format:m,isStrikedThrough:h,onClickRemove:_,shouldWrap:y,showColoredDot:p,showRemoveButton:S,value:T};return"always"===w||"overflow"===w&&function(e){return Boolean(e.current&&e.current.offsetWidth<e.current.scrollWidth)}(P)||void 0!==I?(0,c.jsx)(n(859428).A,{placement:x??l().W.Right,renderTooltip:e=>(0,c.jsx)("div",{...e,style:n(673730).Q$,className:C,children:I||(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:T}),s&&(0,c.jsx)("div",{style:M.tooltipDescription,children:s})]})}),originGap:void 0!==A?A:x===l().W.Top?0:20,textWrap:!0,render:e=>(0,c.jsx)("div",{style:M.token,...e,onMouseEnter:t=>{var n;null===(n=e.onMouseEnter)||void 0===n||n.call(e,t)},children:(0,c.jsx)(g,{ref:P,...B})})}):(0,c.jsx)("div",{style:M.token,children:(0,c.jsx)(g,{...B})})},u=(0,a().YK)({removeToken:{id:"token.removeToken",defaultMessage:"Remove token"}});function p(e){let{format:t,showRemoveButton:o,onClickRemove:s,disabled:l}=e;const{height:d}=(0,r().hA)(t),p=(0,a().tz)(),m=(0,i().IS)((e=>({removeButton:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:0,flexShrink:0,marginLeft:2,marginRight:2,width:d,height:d}})),[d]);return o?(0,c.jsx)(n(285790).A,{className:"notion-token-remove-button",mobileFeedback:!0,style:m.removeButton,icon:e=>(0,c.jsx)(n(460292).Q,{iconGroup:n(949306).Q,variantName:"default",colorName:"grayPrimary",style:e}),onClick:s,ariaLabel:p.formatMessage(u.removeToken),disabled:l,disabledFeedback:!1}):null}function m(e){let{color:t,format:n}=e;const o=(0,i().IS)((e=>{const o=(0,r().Ls)(n),i="default"===t?"gray":t;return{dot:{marginRight:n===r().NY.ExtremeSmall?2:5,borderRadius:99,height:o,width:o,backgroundColor:"light"===e.mode?e.accentColors[i][400]:e.accentColors[i][700],display:"inline-flex",flexShrink:0}}}),[n,t]);return(0,c.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,c.jsx)("div",{style:o.dot})})}const g=o.forwardRef((function(e,t){let{format:n,shouldWrap:o,isStrikedThrough:i,showColoredDot:a,value:l,showRemoveButton:d,onClickRemove:u,disabled:g}=e;const{height:f}=(0,r().hA)(n);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{style:{...o?{overflowWrap:"anywhere"}:s().RC,textDecoration:i?"line-through":void 0,display:"inline-flex",alignItems:"center",height:f,lineHeight:`${f}px`},children:[a?(0,c.jsx)(m,{color:a,format:n}):null,(0,c.jsx)("span",{style:{...s().RC},ref:t,children:l})]}),(0,c.jsx)(p,{format:n,showRemoveButton:d,onClickRemove:u,disabled:g})]})}))},881839:(e,t,n)=>{n.d(t,{L:()=>l});var o=n(296540),i=()=>n(847249),r=()=>n(140862),a=()=>n(545805),s=n(474848);function l(e){let{children:t,keepFocus:n=!1,onDismiss:l,preventCaptureEsc:c}=e;const d=(0,o.useCallback)((e=>{l&&l(e)}),[l]),u=(0,r().A)(n),p=(0,i().K8)((()=>t(u)),[u,t]);return(0,s.jsx)(a().A,{debugName:"Popup",capture:!c,onEsc:d,onBackButton:d,children:p})}},884107:(e,t,n)=>{n.d(t,{R:()=>o});const o={clipboardActions:new(n(645873).O2)("clipboardActions",(async()=>await Promise.all([n.e(96346),n.e(62475),n.e(3151),n.e(98629),n.e(42838),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(28721),n.e(69184)]).then(n.bind(n,552484))))}},885110:(e,t,n)=>{n.d(t,{Z:()=>s});var o=()=>n(989423),i=()=>n(186445),r=()=>n(351360),a=()=>n(449506);async function s(e){let{environment:t,collectionContextStore:n,collectionViewId:s,from:l}=e;const c=r().default.state.currentSpaceStore;if(!c||!s)return;const d=new Map(n.updateFreeChartsResultStore.state);d.set(s,{isPending:!0,value:void 0}),n.updateFreeChartsResultStore.setState(d);const u=(0,i().s0)(),p=await(0,o().TZ)(t),m={spaceId:c.id,collectionViewId:s,from:l,pageId:u,deviceId:p},g=await a().callApi({eventName:"updateFreeCharts",environment:t,data:m});if("success"===g.type){const e=new Map(n.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:g.data.can_view_chart}),n.updateFreeChartsResultStore.setState(e)}else{const e=new Map(n.updateFreeChartsResultStore.state);e.set(s,{isPending:!1,value:void 0}),n.updateFreeChartsResultStore.setState(e)}return g}},886564:(e,t,n)=>{n.d(t,{A:()=>o});const o={provider:void 0,logInvertedTextOperationError(e){const{invertedOperation:t,maybeRemappedInvertedOperation:o,transaction:i,errorCode:r}=e;if(this.provider)return this.provider.logInvertedTextOperationError(e);const a=i.getUserActionForAnalyticsPurposesOnly(),{command:s}=t,l=`Applying inverted text operation "${s}" from transaction "${a}" failed with error "${r}".`;n(857639).log({level:"error",from:"transactionDebugHelpers",type:"crdt:logInvertedTextOperationError",error:{message:l},data:{userAction:a,operation:s,errorName:r}})},isDebuggingEnabled(){return Boolean(this.provider&&!0)}}},886901:(e,t,n)=>{n.d(t,{Ay:()=>v,vn:()=>g});n(296540);var o=()=>n(401497),i=()=>n(650225),r=()=>n(959013),a=()=>n(284371),s=()=>n(11048),l=()=>n(155004),c=()=>n(285790),d=()=>n(257120),u=()=>n(359848),p=n(474848);const m=3;let g=function(e){return e[e.PushContent=0]="PushContent",e[e.FloatRight=1]="FloatRight",e}({});const f=(0,r().YK)({commentsAriaLabel:{defaultMessage:"{count, plural, one {1 comment} other {{count} comments}}",id:"comments.components.discussionindicator.commentAriaLabel"},suggestionsAriaLabel:{defaultMessage:"{count, plural, one {1 suggestion} other {{count} suggestions}}",id:"comments.components.discussionindicator.suggestionAriaLabel"},reactionsAriaLabel:{defaultMessage:"{count, plural, one {1 reaction} other {{count} reactions}}",id:"comments.components.discussionindicator.reactionsAriaLabel"}});function v(e){const t=(0,r().tz)(),{store:n,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:g,property_id:v}=e,{showIndicator:_,formattedReactionCount:b,onlySuggestions:y,icon:S,showReactionsIcon:w,onlyHasDraftIndicator:k,formattedCommentCount:I,handleClick:x,discussionIsSelected:A,commentsCount:C,shouldShowDraftIndicator:T}=(0,d().A)({store:n,recursivelyLoadAllDiscussions:l,onlyCountBlockLevelDiscussions:g,propertyId:v}),M=(0,o().IS)((e=>({iconButton:{position:"relative",alignSelf:"flex-start",marginLeft:4,marginTop:m,background:A?e.selectLightGray[100]:void 0},icon:{height:14,width:14,color:e.text.tertiary},commentCount:{marginLeft:2,color:e.text.tertiary,fontWeight:a().Wy.semibold},draftCommentCount:{marginLeft:2,color:e.icon.tertiary,fontWeight:a().Wy.semibold},reactIcon:{width:16,height:16,marginLeft:"-2px"},relativeDiv:{position:"relative"}})),[A]);return(0,p.jsx)(s().A,{name:"DiscussionIndicatorInner",children:_&&(0,p.jsxs)(h,{format:e.getFormat(),children:[(C>0||k)&&(0,p.jsxs)("div",{style:M.relativeDiv,children:[(0,p.jsx)(c().A,{ariaLabel:y?t.formatMessage(f.suggestionsAriaLabel,{count:I}):t.formatMessage(f.commentsAriaLabel,{count:I}),icon:S,style:M.iconButton,iconStyle:M.icon,onClick:x,caption:(0,p.jsx)("span",{style:T?M.draftCommentCount:M.commentCount,children:I})}),T&&(0,p.jsx)(u().h,{onlyShowDraftDot:!0})]}),w&&(0,p.jsx)(c().A,{ariaLabel:t.formatMessage(f.reactionsAriaLabel,{count:b}),icon:i().l,style:M.iconButton,iconStyle:M.reactIcon,onClick:x,caption:(0,p.jsx)("span",{style:M.commentCount,children:b})})]})})}function h(e){return e.format===g.FloatRight?(0,p.jsx)(l().s,{allowSelectionWithin:!1,style:{width:0,height:0},children:e.children}):(0,p.jsx)(p.Fragment,{children:e.children})}},887146:(e,t,n)=>{n.d(t,{i:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("dragHandle",{viewBox:"0 0 10 10",svg:(0,o.jsx)("path",{d:"M3,2 C2.44771525,2 2,1.55228475 2,1 C2,0.44771525 2.44771525,0 3,0 C3.55228475,0 4,0.44771525 4,1 C4,1.55228475 3.55228475,2 3,2 Z M3,6 C2.44771525,6 2,5.55228475 2,5 C2,4.44771525 2.44771525,4 3,4 C3.55228475,4 4,4.44771525 4,5 C4,5.55228475 3.55228475,6 3,6 Z M3,10 C2.44771525,10 2,9.55228475 2,9 C2,8.44771525 2.44771525,8 3,8 C3.55228475,8 4,8.44771525 4,9 C4,9.55228475 3.55228475,10 3,10 Z M7,2 C6.44771525,2 6,1.55228475 6,1 C6,0.44771525 6.44771525,0 7,0 C7.55228475,0 8,0.44771525 8,1 C8,1.55228475 7.55228475,2 7,2 Z M7,6 C6.44771525,6 6,5.55228475 6,5 C6,4.44771525 6.44771525,4 7,4 C7.55228475,4 8,4.44771525 8,5 C8,5.55228475 7.55228475,6 7,6 Z M7,10 C6.44771525,10 6,9.55228475 6,9 C6,8.44771525 6.44771525,8 7,8 C7.55228475,8 8,8.44771525 8,9 C8,9.55228475 7.55228475,10 7,10 Z"})})},888789:(e,t,n)=>{n.d(t,{$e:()=>r,KP:()=>a,kl:()=>i});var o=n(296540);const i=(0,o.createContext)(void 0);function r(){const e=(0,o.useContext)(i);return(0,o.useMemo)((()=>void 0!==e),[e])}i.displayName="PopupBottomSheetContext";const a=n(757695).default.createValue(!1)},889097:(e,t,n)=>{n.d(t,{A:()=>Q});n(944114),n(898992),n(823215),n(354520),n(672577),n(581454),n(908872),n(737550);var o=()=>n(496506),i=()=>n(757695),r=()=>n(66689),a=()=>n(289915),s=()=>n(921598),l=()=>n(970013),c=()=>n(329199),d=()=>n(455348),u=()=>n(737658),p=()=>n(799829),m=()=>n(179034),g=()=>n(519831),f=()=>n(797809),v=()=>n(496603),h=()=>n(534177),_=()=>n(873050),b=()=>n(405417);function y(e,t,o){var i;const r=t.collectionViewStore(),a=t.searchQueryStore.state;if(!r)return;const s=t.currentSubitemFormatStoreForUiDisplayStore.state,c=null==r?void 0:r.getType(),d=(0,_().Ay)(t,!0),u=t.currentSortsStore.state,p=function(e){const t=e.reducersStore.state,n={};return v().jJ(t,((e,t)=>{e&&(n[t]=e.reducer)})),n}(t);if(v().Im(p))return;let m;if(t.reducerDependencies.size>0){m={};for(const[e,n]of t.reducerDependencies)m[e]=[...n]}const g=(0,n(161479).e)(r.pointer.spaceId),f=r.getCollectionSource();if(!f)return;const h=t.normalizedSchemaStore.state,y=(null==s?void 0:s.property)&&h[s.property],S=null===(i=t.viewsModuleContextStore.currentPageStore())||void 0===i?void 0:i.id;return{source:f,collectionView:{id:r.id,spaceId:g},loader:{reducers:p,filter:d,sort:u,searchQuery:a,userId:e.currentUser.id,userTimeZone:o,...y&&(0,l().nC)(y)&&c&&(0,b().qS)(c)&&{upwardTraversalRelation:y},reducerDependencies:m,currentPageInRelatedCollection:S}}}n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);function S(e){switch(e){case"trending":case"similarUsers":case"mostVisited":case"lastEdited":case"favorites":return{title:{name:"Name",type:"title"}};case"myTasks":case"customDb":case"posts":return{};default:(0,h().HB)(e)}}function w(e){let{source:t,collectionId:n}=e;const{type:o}=t;return{id:n,parent_table:m().ev,parent_id:o,version:1,alive:!0,space_id:t.spaceId,format:{},schema:S(o)}}var k=()=>n(792071),I=()=>n(186445),x=()=>n(476492),A=()=>n(972435),C=()=>n(406792),T=()=>n(696746),M=()=>n(508496),P=()=>n(38789),B=()=>n(630116);n(16280);var R=()=>n(449412);function E(e,t,n){R().lE("collections"),R().O8(new Error("Callback waited over time limit for item to be rendered"),{from:"CollectionItemMountedCallbacks",type:e,data:{miscDataToConvertToString:{blockPointer:t,delayMs:n}}})}class D{constructor(){this.callbackMap=void 0,this.storeTimeoutMap=void 0,this.callbackMap=new WeakMap,this.storeTimeoutMap=new WeakMap}registerCallback(e,t){var n;this.callbackMap.has(e)||this.callbackMap.set(e,[]),null===(n=this.callbackMap.get(e))||void 0===n||n.push(t);const o=this.storeTimeoutMap.get(e);o&&clearTimeout(o.timeoutId);const i=window.setTimeout((()=>{this.callbackMap.has(e)&&E("TimeoutError",e.pointer,15e3)}),15e3);this.storeTimeoutMap.set(e,{timeoutId:i,registeredAt:performance.now()})}executeCallbacks(e){const t=this.callbackMap.get(e)??[],n=performance.now();for(const i of t)i();this.callbackMap.delete(e);const o=this.storeTimeoutMap.get(e);if(o){clearTimeout(o.timeoutId);const t=n-o.registeredAt;t>5e3&&E("SlowExecutionError",e.pointer,t),this.storeTimeoutMap.delete(e)}}}class N{constructor(){this.timings=void 0,this.trackTimings=void 0,this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}startRequestTracking(){if(this.trackTimings)return{start:performance.now()}}finishRequestTracking(e,t){if(!this.trackTimings||!e)return;const n=performance.now(),o=n-e.start;this.timings.queryCollectionRequests.push({start:e.start,end:n,duration_ms:o,status:t})}mountCollectionReducerRequest(e,t){this.trackTimings&&!this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e]={id:e,reducer_type:t,mounted_at:performance.now()})}unmountCollectionReducerRequest(e){this.trackTimings&&this.timings.collectionReducerRequests[e]&&(this.timings.collectionReducerRequests[e].unmounted_at=performance.now())}getMetrics(e){return this.trackTimings=!1,{render_started_at:e.cvbBlockRenderStart,mounted_at:e.cvbBlockRenderMount,items_started_at:e.itemsStart,items_visible:e.itemsVisible,query_request_count:this.timings.queryCollectionRequests.length,query_request_times:this.timings.queryCollectionRequests,collection_reducer_request_count:Object.keys(this.timings.collectionReducerRequests).length,collection_reducer_request_times:Object.values(this.timings.collectionReducerRequests),collection_prefetch_processing_time:n(680091).X.getProcessingTime(),page_origin_time:(0,n(410690).getPageOriginTime)()}}reset(){this.timings={queryCollectionRequests:[],collectionReducerRequests:{}},this.trackTimings=!0}}class L extends i().default{getInitialState(){return 0}}class O{constructor(){this._cache=Object.create(null)}get cache(){return this._cache}reset(){this._cache={}}getBlockHeightStore(e){return this.getBlockEntry(e).heightStore}getPropertyHeightStore(e,t){return this.getPropertyEntry(e,t).heightStore}getBlockHeightCache(e){return this.cache[e]}propertyCanExpandStore(e,t){return this.getPropertyEntry(e,t).canExpandStore}cachePropertyHeight(e,t,n){this.getPropertyEntry(e,t).heightStore.setState(n)}expandHeightToTallestCached(e){if(!this.cache[e])return;const t=this.getBlockEntry(e),{height:n}=this.findTallestProperty(t);t.heightStore.setState(n)}propertyCanExpand(e,t){if(!e||!t||!this.cache[e])return!1;const n=this.getBlockEntry(e);return(this.getPropertyEntry(e,t).heightStore.state??0)>n.heightStore.state}findTallestProperty(e){let t="",n=0;for(const[o,{heightStore:i}]of Object.entries(e.propertyHeights))i.state>n&&(n=i.state,t=o);return{height:n,property:t}}getBlockEntry(e){return this.cache[e]||(this.cache[e]={heightStore:new L,propertyHeights:Object.create(null)}),this.cache[e]}getPropertyEntry(e,t){const n=this.getBlockEntry(e);return n.propertyHeights[t]||(n.propertyHeights[t]={heightStore:new L,canExpandStore:new(o().default)((()=>this.propertyCanExpand(e,t)),{debugName:"PropertyCanExpandStore"})}),n.propertyHeights[t]}}class U{constructor(e){this.rowVirtualizerMap=new Map,this.collectionContextStore=void 0,this.blockHeightsCache=void 0,this.virtualizedColumnsEnabled=void 0,this.collectionContextStore=e,this.blockHeightsCache=new O}reset(){this.rowVirtualizerMap.clear(),this.blockHeightsCache.reset()}setRowVirtualizer(e){let{virtualizer:t,groupsPointer:n}=e;this.rowVirtualizerMap.set(n,t)}getBlockHeightsCache(){return this.blockHeightsCache}setVirtualizedColumnsEnabled(e){this.virtualizedColumnsEnabled=e}getVirtualizedColumnsEnabled(){return this.virtualizedColumnsEnabled}async waitToScrollToBlock(e,t){const n=this.rowVirtualizerMap.get(e);if(!n)return;const o=this.collectionContextStore.groupsStore.getGroupState(e);if(!o)return;const i=o.resultsStore.state.findIndex((e=>e===t));if(!(i>=0))return new Promise((e=>{const i=r=>{if(!n)return o.resultsStore.removeListener(i),void e();const a=r.state.findIndex((e=>e===t));a>=0&&(n.scrollToIndex(a,{behavior:"smooth"}),o.resultsStore.removeListener(i),e())};o.resultsStore.addListener(i)}));n.scrollToIndex(i,{behavior:"smooth"})}}var F=()=>n(989423),V=()=>n(10594),j=()=>n(522827);class z{constructor(e){this.supportsLongTask=void 0,this.entriesObserved=void 0,this.observer=void 0,this.observing=!1,this.supportsLongTask=PerformanceObserver.supportedEntryTypes.includes("longtask"),this.entriesObserved=[],this.observer=new PerformanceObserver((t=>{this.entriesObserved.push(...t.getEntries()),e&&e(t,this.observer)}))}observe(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.supportsLongTask&&(this.observer.observe({type:"longtask",buffered:e}),this.observing=!0)}get isObserving(){return this.observing}disconnect(){this.observer.disconnect(),this.observing=!1}takeRecords(){const e=this.entriesObserved;return this.entriesObserved=[],e}}var H=()=>n(351360),W=()=>n(519839);class q extends i().default{constructor(e,t){super(),this.collectionContextStore=e,this.environment=t}getInitialState(){return new Map}getGroupState(e){const t=Array.isArray(e)?e:void 0!==e?[e]:[],n=(0,s().Hm)(t),r=this.state.get(n);if(r)return r;const a=function(e,t,n){const r=i().default.createValue(void 0,{name:"reducerResultStore"}),a=e.collectionViewBlockStore();if(!a)return;let s;n.length>0?(s=a.clone(),s.setRecordStoreUIParent(a)):s=a;const l=W().CG(e,t.device.isMobile),c=new(o().default)((()=>{const e=r.state;return(e?e.blockIds:[]).map((e=>B().Bv.createChildStore(s,{id:e,table:m().ev})))}),{debugName:"resultsStore"});return{groupsPointer:n,groupUiParentStore:s,reducerResultStore:r,resultsStore:c,currentLimit:i().default.createValue(l,{name:"currentLimit"}),toggleStateStore:i().default.createValue(!1,{name:"toggleStateStore"})}}(this.collectionContextStore,this.environment,t);return a?(this.state.set(n,a),this.emit(),a):void 0}setGroupBlockResults(e,t){if(!t.blockResults)return;const n=t.results,o=t.subGroupResults;for(const i of n){const n=i.value,r=(0,s().AC)(n),a={property:e.groupBy.property,value:n};if(e.subGroup){if(e.subGroup&&o)for(const i of o){const n=i.value,o=(0,s().AC)(n),l={property:e.subGroup.groupBy.property,value:n},c=(0,s().A)([o,r]),d=this.getGroupState([l,a]),u=null==d?void 0:d.reducerResultStore;if(t.blockResults&&u){const e=t.blockResults[c],n=(null==e?void 0:e.blockIds)??[],o=(null==e?void 0:e.hasMore)??!1;u.setState({type:"results",blockIds:n,hasMore:o})}}}else{const e=this.getGroupState([a]),n=null==e?void 0:e.reducerResultStore;if(t.blockResults&&n){const e=t.blockResults[r],o=(null==e?void 0:e.blockIds)??[],i=(null==e?void 0:e.hasMore)??!1;n.setState({type:"results",blockIds:o,hasMore:i})}}}}getAllGroupStates(){return[...this.state.values()]}anyGroupHasResults(){for(const e of this.state.values())if(e.reducerResultStore.state)return!0;return!1}anyGroupHasNonEmptyResults(){for(const t of this.state.values()){var e;if(null!==(e=t.reducerResultStore.state)&&void 0!==e&&null!==(e=e.blockIds)&&void 0!==e&&e.length)return!0}return!1}anySpecifiedGroupHasResults(e){for(const t of e){const e=this.getGroupState(t);if(null!=e&&e.reducerResultStore.state)return!0}return!1}resetAllLimits(){const e=W().CG(this.collectionContextStore,this.environment.device.isMobile);for(const t of this.state.values())t.currentLimit.setState(e)}setLimitIfGreater(e,t){const n=this.getGroupState(e),o=null==n?void 0:n.currentLimit;o&&t>o.state&&o.setState(t)}incrementLimit(e){const{isFullScreen:t,currentResultCount:n,groupsPointer:o,incrementLimitsInRelatedGroups:i}=e,r=this.collectionContextStore.collectionViewStore();if(!r)return;const a=this.getGroupState(o);if(!a)return;const l=i?[...this.state.values()].filter((e=>1===o.length?1===e.groupsPointer.length:2===o.length&&(0,s().Mn)(o[0],e.groupsPointer[0]))):[a];for(const s of l){const e=s.currentLimit,o=e.state+W().zE({collectionViewStore:r,isFullScreen:t,currentResultCount:n,isMobile:this.environment.device.isMobile});e.setState(o)}}}n(430670);class K extends i().default{getInitialState(){return{hasLocalUpdates:!1,blockIds:new Set,propertyResultCache:new Map}}addLocalChange(e){for(const t of e)this.state.blockIds.add(t);this.state.hasLocalUpdates=!0,this.emit()}resetWithRemote(e){const{blockIds:t,propertyResultCacheJson:n}=e,o=this.getInitialState();o.blockIds=new Set(t),n&&(o.propertyResultCache=function(e){const t=new Map;for(const[n,o]of Object.entries(e)){const e=new Map;for(const[t,n]of(0,h().WP)(o))e.set(t,n);t.set(n,e)}return t}(n)),this.setState(o)}}var G=()=>n(53137);class $ extends i().default{getInitialState(){}getViewsModule(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule}isInLayoutBuilder(){var e;return"layoutBuilder"===(null===(e=this.state)||void 0===e?void 0:e.location)}getViewModuleType(){var e;return null===(e=this.state)||void 0===e?void 0:e.viewsModule.type}currentPageStore(){var e;return null===(e=this.state)||void 0===e?void 0:e.currentPageStore}getCurrentPageCollectionStore(){var e;return null===(e=this.state)||void 0===e||null===(e=e.currentPageStore)||void 0===e?void 0:e.getAssociatedCollectionStore()}selectViewsModule(){var e;"layoutBuilder"===(null===(e=this.state)||void 0===e?void 0:e.location)&&this.state.selectViewsModule()}}class Y{constructor(e){this.contextStore=i().default.createValue(void 0,{name:"contextStore"}),this.reducersStore=i().default.createValue({},{name:"reducersStore"}),this.reducerDependencies=new Map,this.shouldDelayRenderStore=i().default.createValue(!1,{name:"shouldDelayRenderStore"}),this.resultSetStore=new K,this.remoteResultStore=i().default.createValue(void 0,{name:"remoteResultStore"}),this.remoteErrorStore=i().default.createValue(void 0,{name:"remoteErrorStore"}),this.remoteCollectionIdsStore=i().default.createValue([],{name:"remoteCollectionIdsStore"}),this.lastRemoteRequestStore=i().default.createValue(void 0,{name:"lastRemoteRequestStore"}),this.searchOpenStore=i().default.createValue(!1,{name:"searchOpenStore"}),this.searchQueryStore=i().default.createValue("",{name:"searchQueryStore"}),this.isLoadingStore=i().default.createValue(!1,{name:"isLoadingStore"}),this.isLoadedStore=i().default.createValue(!1,{name:"isLoadedStore"}),this.didFireLoadEventsStore=i().default.createValue(!1,{name:"didFireLoadEvents"}),this.isCreatingNewChartCollectionStore=i().default.createValue(!1,{name:"isCreatingNewChartCollectionStore"}),this.loadingDetailsStore=i().default.createValue({type:"load_general"},{name:"loadingDetailsStore"}),this.wasCreatedThisSessionStore=i().default.createValue(!1,{name:"wasCreatedThisSessionStore"}),this.isFullScreenStore=i().default.createValue(!1,{name:"isFullScreenStore"}),this.isRootChildStore=i().default.createValue(!1,{name:"isRootChildStore"}),this.isInPeekRendererStore=i().default.createValue(!1,{name:"isInPeekRendererStore"}),this.relationResultsCacheStore=i().default.createValue(new Map,{name:"relationResultsCacheStore"}),this.privateRelativeVariableStore=i().default.createValue({},{name:"privateRelativeVariableStore"}),this.groupsStore=void 0,this.groupsLimitStore=i().default.createValue(V()._9,{name:"groupsLimitStore"}),this.boardColumnsLimitStore=i().default.createValue(V()._9,{name:"boardColumnsLimitStore"}),this.settingsStore=i().default.createValue({open:!1,stack:[]},{name:"settingsStore"}),this.collectionSettingsDuplicateExistingViewLimitStore=i().default.createValue(!0,{name:"collectionSettingsDuplicateExistingViewLimitStore"}),this.filtersBarOpenStore=i().default.createValue(void 0,{name:"filtersBarOpenStore"}),this.collectionActionsMinimizedStore=i().default.createValue(!1,{name:"collectionActionsMinimizedStore"}),this.temporaryStateStore=i().default.createValue({},{name:"temporaryStateStore"}),this.filterBarItemSettingsStoreMap=new Map,this.frozoneStore=i().default.createValue({isScrolled:!1,scrollerWidth:void 0,scrollerLeftOffset:void 0,scrollerLeftPadding:void 0,frozenIndex:void 0,tryShowHiddenFrozenColumn:!1},{name:"frozoneStore"}),this.filterBarSortSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterBarSortSettingsStore"}),this.filterBarCombinatorFilterSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterBarCombinatorFilterSettingsStore"}),this.filterOptionsItemSettingsStoreMap=new Map,this.filterOptionsCombinatorFilterSettingsStore=i().default.createValue({open:!1,stack:[]},{name:"filterOptionsCombinatorFilterSettingsStore"}),this.dateRangeStartStore=i().default.createValue(Date.now(),{name:"dateRangeStartStore"}),this.dateRangeEndStore=i().default.createValue(Date.now(),{name:"dateRangeEndStore"}),this.subitemExpandedStore=i().default.createValue(new Map,{name:"subitemExpandedStore"}),this.chartErrorStore=i().default.createValue(new Map,{name:"chartErrorStore"}),this.updateFreeChartsResultStore=i().default.createValue(new Map,{name:"updateFreeChartsResultStore"}),this.numberChildrenReceivedStore=i().default.createValue(0,{name:"numberChildrenReceivedStore"}),this.numberChildrenUnfurledStore=i().default.createValue(0,{name:"numberChildrenUnfurledStore"}),this.previewContextStore=i().default.createValue(void 0,{name:"previewContextStore"}),this.formsBaseLayoutEditorContextValueStore=i().default.createValue(void 0,{name:"formsBaseLayoutEditorContextValueStore"}),this.formsSpecificLayoutEditorContextValueStore=i().default.createValue(void 0,{name:"formsSpecificLayoutEditorContextValueStore"}),this.formShareMenuButtonPopupStore=new(n(463830).A),this.renderEmitter=new(n(592328).A),this.remoteRequestStoreCallback=void 0,this.localResultStoreCallback=void 0,this.updateCounter={latestRequestUpdateCounter:0,setRemoteResultCounter:void 0},this.isClientModeEnabledStore=i().default.createValue(!1,{name:"isClientModeEnabledStore"}),this.wasServerResponseFromCache=void 0,this.relationQueryingGroup=void 0,this.requestBackend=void 0,this.isViewSpecificClientModeEnabledStore=i().default.createValue(!1,{name:"isViewSpecificClientModeEnabledStore"}),this.throttleMsStore=i().default.createValue(n(252799).e,{name:"throttleMsStore"}),this.timedOutRequestCounter=0,this.asyncAggregationStatusStore=i().default.createValue({calculating:!1,aggregation:void 0,changingType:!1},{name:"asyncAggregationStatusStore"}),this.infiniteScrollLongTaskObserver=new z,this.visitSessionId=n(206267).JW(),this.viewsModuleContextStore=new $,this.forceLocalQueryCollection=!1,this.collectionStoresStore=new(o().default)((()=>{const e=this.collectionViewBlockStore();if(!e)return[];const t=this.collectionStore();return t?[t]:this.remoteCollectionIdsStore.state.map((t=>B().md.createChildStore(e,{table:g().Vl,id:t})))}),{debugName:"collectionStoresStore"}),this.localResultStore=new(o().default)((()=>function(e,t){var o,i,a;const{blockIds:s,hasLocalUpdates:l}=t.resultSetStore.state,p=t.collectionViewStore(),f=e.currentUser.id,_=t.remoteRequestStore.state,y=t.remoteResultStore.state;if(!p||!p.isDefined()||!_)return;const S=Date.now(),R=A().A.getIntl(),E=p.getRecordModel,D=p.getRecordRole,N=p.getFormat(),L=p.getType(),O=p.getCollectionSource();if(!O)return;const U=t.collectionStoresStore.state,F=[];for(const n of U){const e=E(n);e&&F.push(e)}if(0===F.length)return;if(t.isLoadedStore.setState(!1),!F.some((e=>P().A.getEditedBlocksForCollection(e.id).size>0))&&y&&!l&&(0,v().n4)(null===(o=t.lastRemoteRequestStore.state)||void 0===o?void 0:o.remoteRequest,_)&&(null===(i=t.hasSchemaChangedForQueryStore)||void 0===i||!i.state))return t.isLoadedStore.setState(!0),y;const V=C().default.DO_NOT_USE_markLegacy("collections.compute_local_result_latency");let j={};switch(t.contextType){case"collectionTypedView":const e=t.databaseType,n=e?(0,r().G2)(e,R):{},o=(0,d().dW)({schemas:[...F.map((e=>{var t;const n=null==e||null===(t=e.getFormat())||void 0===t?void 0:t.app_uri_map,o=e.getNormalizedSchema();return d().u9.toViewSchema(o,n)})),n],onlyPropertyIds:Object.keys(n),prioritizeLooserLimitRule:!0});if(o.error)throw o.error;j=o.value;break;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:j=F[0].getNormalizedSchema();break;default:(0,h().HB)(t.contextType)}const z=c().Fg(N,L,j),H=t.relativeVariableStore.state,{groupsReducerIds:W,reducerIdsWithNoGroupDependencies:q}=c().M(_.loader.reducers,_.loader.reducerDependencies),K=M().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),G=t.formulasCodeStore.state,$={pageSort:p.getPageSort(),schema:j,loader:_.loader,userId:f,userStartOfWeek:I().XX.state,currentTime:S,getRecordModel:E,getRecordRole:D,intl:A().A.getIntl(),isSorted:!1,visibleProperties:z,relativeVariableResult:H,currentPageInRelatedCollection:null===(a=t.viewsModuleContextStore.currentPageStore())||void 0===a?void 0:a.id,isSprintPlanningView:N.app_config_uri===r().JS,collectionSourceType:O.type,groupsReducerIds:W,reducerIdsWithNoGroupDependencies:q,formulaTimeoutMs:K,resultCache:new Map,regExpCache:new Map,experimentService:M().default,collectionFeatureGates:(0,n(909470).i)(),formulasModule:G},Y={...$,loader:{..._.loader,filter:void 0}},Q=y?new Set(c().uX({result:y,excludeRelativeIds:!0})):new Set,Z=c().zl($),X=e.idCreator.getSpaceIdCreatorSync(O.spaceId);for(const r of s){const e=B().Bv.createChildStore(p,{table:m().ev,id:r}),o=e.getAssociatedCollectionStore();if(u().Yd.hasCollections(O)&&(!o||!U.find((e=>{let{id:t}=e;return o.id===t}))))continue;const i=E(e);let a;switch(t.contextType){case"collectionSystemView":if((0,u().TR)(O)){const e=(0,n(415246).XC)(O.type,X);a=E({table:g().Vl,id:e,spaceId:O.spaceId})}else if((0,u().hJ)(O)){const e=(0,T().NY)((0,n(90634).L)(O));a=e&&k().Bj6.fromCollection(w({source:O,collectionId:e}))}else O.type;break;case"collectionTypedView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:a=o&&E(o);break;default:(0,h().HB)(t.contextType)}if(!a||!i)continue;const s={..._.loader.upwardTraversalRelation&&Q.has(r)&&(0,b().ay)({block:k().Bj6.fromBlock(i),collectionContextStore:t})&&!t.isClientModeEnabledStore.state?Y:$,schema:(0,d().zC)(O.type,j,a)};c().UC(i,a,s,Z)}for(const n of F){const e=P().A.getEditedBlocksForCollection(n.id),t=(0,d().zC)(O.type,j,n);for(const o of e){if(s.has(o))continue;const e=E(B().Bv.createChildStore(p,{table:m().ev,id:o}));e&&c().UC(e,n,{...$,schema:t},Z)}}const{result:J}=c().Mo($,Z);if(t.isLoadedStore.setState(!0),"reducer"!==J.type)return;const ee=x().kz(t);return C().default.DO_NOT_USE_measureLegacy(V,{environment:e,data:ee}),J}(this.environment,this)),{useDeepEqual:!0,debugName:"localResultStore"}),this.isEmptyStore=new(o().default)((()=>{var e;if(this.isLoadingStore.state||this.shouldShowSpinnerStore.state||v().Im(this.reducersStore.state))return!1;const t=this.localResultStore.state,n=this.remoteResultStore.state,o=this.wasCreatedThisSessionStore.state;if(!t&&n&&0===this.collectionStoresStore.state.length)return!0;const i=null===(e=this.collectionViewStore())||void 0===e?void 0:e.getCollectionSource();if(((0,u().TR)(i)||(0,u().hJ)(i))&&n){if(Object.values(n.reducerResults).every((e=>"results"===e.type&&0===e.blockIds.length)))return!0}if(!t||"reducer"!==t.type||!n||"reducer"!==n.type)return!1;const r=Object.values(t.reducerResults).filter((e=>"results"===e.type)),a=Object.values(n.reducerResults).filter((e=>"results"===e.type));return!(!o&&0===a.length)&&(0!==r.length&&r.every((e=>"results"===e.type&&0===e.blockIds.length)))}),{debugName:"isEmptyStore"}),this.remoteRequestStore=new(o().default)((()=>{var e;const t=(null===(e=H().default.state.currentUserSettingsStore)||void 0===e?void 0:e.getSettingsStore().getKeyStore("time_zone").getValue())||(0,n(416504).P)();return y(this.environment,this,t)}),{debugName:"remoteRequestStore"}),this.normalizedFormatStore=new(o().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),n=null==t?void 0:t.getType(),o=this.normalizedQueryStore.state,i=this.normalizedSchemaStore.state,r=null==t?void 0:t.getNormalizedFormat(i);return e&&t&&n&&o&&r?this.isInHomeWidgetStore.state?{...r,...(0,T().m6)()}:r:{}}),{useDeepEqual:!0,debugName:"normalizedFormatStore"}),this.normalizedSchemaStore=new(o().default)((()=>{const e=this.contextStore.state;switch(null==e?void 0:e.type){case"collectionTypedView":const t=(0,r().X)(e.databaseType,A().A.getIntl())??{};if(!this.collectionViewBlockStore())return t;const o=this.collectionStoresStore.state;if(0===o.length)return t;const i=(0,d().dW)({schemas:[...o.map(n(271372).D2),t],onlyPropertyIds:Object.keys(t),prioritizeLooserLimitRule:!0});return i.error?t:i.value;case"collectionSystemView":case"collectionView":case"collectionPage":case"collectionSettings":case void 0:const a=this.collectionStore();return a?a.getSchema():(0,f().RX)(A().A.getIntl());default:(0,h().HB)(e)}}),{useDeepEqual:!0,debugName:"normalizedSchemaStore"}),this.normalizedDeletedSchemaStore=new(o().default)((()=>{if("collectionTypedView"===this.contextType)return{};const e=this.collectionStore();return e?e.getDeletedSchema():(0,f().RX)(A().A.getIntl())}),{useDeepEqual:!0,debugName:"normalizedDeletedSchemaStore"}),this.hasSchemaChangedForQueryStore=void 0,this.normalizedQueryStore=new(o().default)((()=>{const e=this.collectionViewStore();if(e){const t=e.getType();if(t){const n=this.normalizedSchemaStore.state;return(0,c().cu)({type:t,query2:e.getQueryStore().getValue()},n)}}}),{useDeepEqual:!0,debugName:"normalizedQueryStore"}),this.subitemTreeStore=new(o().default)((()=>(0,b().jF)(this,this.environment.currentUser.id)),{debugName:"subitemTreeStore"}),this.shouldShowSpinnerStore=new(o().default)((()=>{var e,t,n,o;if(!this.isLoadingStore.state)return!1;const i=null===(e=this.lastRemoteRequestStore.state)||void 0===e?void 0:e.remoteRequest.loader,r=null===(t=this.remoteRequestStore.state)||void 0===t?void 0:t.loader;if(!v().n4(null==i?void 0:i.filter,null==r?void 0:r.filter))return!0;if(!v().n4(null==i?void 0:i.sort,null==r?void 0:r.sort))return!0;if(!v().n4(null==i?void 0:i.searchQuery,null==r?void 0:r.searchQuery))return!0;if(!v().n4(null===(n=this.lastRemoteRequestStore.state)||void 0===n?void 0:n.remoteRequest.source,null===(o=this.remoteRequestStore.state)||void 0===o?void 0:o.source))return!0;const a=(null==i?void 0:i.reducers)||{},s=(null==r?void 0:r.reducers)||{};for(const l in s){const e=s[l],t=a[l];if(!v().n4(e,t))return!0}return!1}),{debugName:"shouldShowSpinner"}),this.shouldShowSourceStore=new(o().default)((()=>{const e=this.collectionViewBlockStore(),t=this.collectionViewStore(),n=this.collectionStore();if(!e||!t||!n)return!1;const o=M().default.checkGate({gateName:"db_ux_chrome"}),i=e.hasSingleSourceAndNoLinkedCollections();if(o){let t=e.getFormatStore().getKeyValue("hide_inline_collection_name");return void 0===t&&(t=e.getCollectionViewStores().some((e=>e.getFormatStore().getKeyValue("hide_linked_collection_name")))),!(this.isFullScreenStore.state&&i||t)}return"form_editor"!==t.getType()&&!(this.isFullScreenStore.state&&i||this.normalizedFormatStore.state.hide_linked_collection_name)}),{debugName:"shouldShowSource"}),this.isInlineViewStore=new(o().default)((()=>!this.isFullScreenStore.state),{debugName:"isInlineView"}),this.isUnlistedViewStore=new(o().default)((()=>{var e;return(null===(e=this.collectionViewStore())||void 0===e||null===(e=e.getUnlistedStatus())||void 0===e?void 0:e.isUnlisted)??!1}),{debugName:"isUnlistedView"}),this.isInHomeWidgetStore=new(o().default)((()=>{const e=this.collectionViewBlockStore(),t=null==e?void 0:e.getParentBlockStore();if(!e)return!1;const o=t&&(0,T().lU)(H().default.state.mainEditorCurrentBlockStore)&&(0,T().lU)(t),i=(0,n(836251).J9)(this.environment)&&e.isPostCollectionBlock();return(o||i)&&!this.isInPeekRendererStore.state&&!this.isUnlistedViewStore.state&&!n(489348).A.isBlockInTemplate(e)}),{debugName:"isInHomeWidget"}),this.isEditableHomeCollectionStore=new(o().default)((()=>{var e;const t=null===(e=this.collectionViewBlockStore())||void 0===e?void 0:e.id;return!!t&&((0,I().sj)(t)||(0,I().Wu)(t))}),{debugName:"isEditableHomeCollection"}),this.isInTrashStore=new(o().default)((()=>{const e=this.collectionStore(),t=null==e?void 0:e.getParentBlockStore(),n=Boolean(null==t?void 0:t.pathIsDead()),o=this.collectionViewBlockStore(),i=Boolean(null==o?void 0:o.pathIsDead());return n||i}),{debugName:"isInTrash"}),this.permissionScopesStore=new(o().default)((()=>{var e;const t=this.collectionStore(),o=this.collectionViewStore(),i=this.collectionViewBlockStore(),r=this.isFullScreenStore.state,a=null==t?void 0:t.getParentBlockStore(),s=Boolean(null==a?void 0:a.pathIsDead()),l=Boolean(null==i?void 0:i.pathIsDead()),c=this.viewsModuleContextStore.isInLayoutBuilder(),d=s||l,u=!d&&((0,n(33791).v)({collectionStore:t,collectionViewBlockStore:i,checkNavigableAncestorLocked:!r})||"collectionTypedView"===this.contextType),p=Boolean(null==i?void 0:i.isLocked()),m=Boolean(null==t?void 0:t.isSyncedCollection()),g=Boolean(null==t?void 0:t.isExternallyImportedAndSyncedCollection())&&"on"===M().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"});if(null!==(e=this.previewContextStore.state)&&void 0!==e&&e.disableAllPointerEvents)return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(!o||!i)return{canConfigureCollection:u,canConfigureBlock:Boolean((null==i?void 0:i.canEditCollection())&&!i.isNonEditableState()),canEditContent:Boolean((null==i?void 0:i.canEditCollection())||(null==i?void 0:i.canEditContentOnly()))&&!d&&!c,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};if("collectionSettings"===this.contextType)return{canConfigureCollection:!0,canConfigureBlock:!0,canEditContent:!1,isLocked:!1,isSyncedCollection:!1,isExternallyImportedAndSyncedCollection:!1};if(this.viewsModuleContextStore.state&&!this.viewsModuleContextStore.isInLayoutBuilder())return{canConfigureCollection:!1,canConfigureBlock:!1,canEditContent:Boolean((null==i?void 0:i.canEditCollection())||(null==i?void 0:i.canEditContentOnly()))&&!d&&!c,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};const f=!r&&i.isNavigableAncestorNonEditableState(),v=Boolean(i.inMemoryRecordCache.snapshotData),h=n(411671).A.getMode(this.environment,i);if(f||v||"comment"===(null==h?void 0:h.permission)||"view"===(null==h?void 0:h.permission))return{canConfigureCollection:u,canConfigureBlock:!1,canEditContent:!1,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g};const _=i.canEditCollection()&&!(p||l);let b=!d&&!c&&("collectionTypedView"===this.contextType||Boolean(t&&t.canEdit()));if(Boolean(t&&(null==t?void 0:t.getParentId())!==i.id)&&!c){const e=null==i?void 0:i.getRole(),t=o.getFormatStore().getKeyStore("collection_pointer").getValue();if(t){const o=new(B().md)(this.environment,t).getParentBlockStore(),i=null==o?void 0:o.getRole();e&&i&&(0,n(433847).sO)(i,e)&&(b=(0,n(68263).p2)(e))}}return this.isUnlistedViewStore.state&&(b=!1),{canConfigureCollection:u,canConfigureBlock:_,canEditContent:b,isLocked:p,isSyncedCollection:m,isExternallyImportedAndSyncedCollection:g}}),{debugName:"permissionScopes"}),this.localStateDiffStore=new(o().default)((()=>(0,_().Ml)(this,"normalized")),{useDeepEqual:!0,debugName:"localStateDiffStore"}),this.currentCombinatorFilterStore=new(o().default)((()=>{var e;const t=this.temporaryStateStore.state.combinatorFilter;return t?t.value:null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.filter}),{useDeepEqual:!0,debugName:"currentCombinatorFilterStore"}),this.currentSubitemFormatStoreForUiDisplayStore=new(o().default)((()=>{var e,t;const n=(null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormat().subitem_display_mode)??"show";if("disabled"===n||"hidden"===n||"flattened"===n)return;const o=(0,b().r6)(this),i=null===(t=this.collectionViewStore())||void 0===t?void 0:t.getType(),r=(0,_().N1)({collectionContextStore:this,applySubitemFilter:!1,filterOutHideSubitemsQuickFilter:!1}),s=(0,a().GV)(r);return s&&(0,a().CU)(s,(e=>!!(0,a().yX)(e)&&(e.property===(null==o?void 0:o.property)||e.property===(null==o?void 0:o.inverse))))&&i&&!(0,b().qS)(i)?void 0:o}),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForUiDisplay"}),this.currentSubitemFormatStoreForCollectionStore=new(o().default)((()=>(0,b().r6)(this)),{useDeepEqual:!0,debugName:"currentSubitemFormatStoreForCollection"}),this.currentArrowsByFormatStore=new(o().default)((()=>(0,n(690471).tH)(this)),{useDeepEqual:!0,debugName:"currentArrowsByFormatStore"}),this.currentPropertyFiltersStore=new(o().default)((()=>{const e=this.normalizedSchemaStore.state,t=this.temporaryStateStore.state.propertyFilters;return(t?t.value||[]:this.normalizedFormatStore.state.property_filters||[]).map((t=>{const n=(0,c().hs)(t.filter,e),o=this.collectionViewBlockStore();if(e[t.filter.property]&&n&&(0,a().tn)(e,t.filter.property,n.filter,null==o?void 0:o.getRecordModel))return n&&{id:t.id,filter:n}})).filter(h().O9).sort((0,_().IW)())}),{useDeepEqual:!0,debugName:"currentPropertyFiltersStore"}),this.currentSortsStore=new(o().default)((()=>{var e;const t=this.temporaryStateStore.state.sorts;return t?t.value||[]:(null===(e=this.normalizedQueryStore.state)||void 0===e?void 0:e.sort)||[]}),{useDeepEqual:!0,debugName:"currentSortsStore"}),this.defaultPageTemplateStore=new(o().default)((()=>{var e,t;const n=this.collectionStore(),o=this.collectionViewStore(),i=v().oE([null==o||null===(e=o.getFormat())||void 0===e?void 0:e.collection_view_default_template,null==n||null===(t=n.getFormat())||void 0===t?void 0:t.collection_default_template]),r=null==n?void 0:n.getTemplatePageStores();for(const a of i){if("empty"===a)return;const e=null==r?void 0:r.find((e=>e.id===a.template_page_id));if(null!=e&&e.getAlive())return e}}),{debugName:"defaultPageTemplateStore"}),this.relativeVariableStore=new(o().default)((()=>{const e=this.contextStore.state;if(!e)return;const t=e.collectionViewBlockStore;if(!t)return;const n={},o=this.privateRelativeVariableStore.state;for(const[i,r]of(0,h().WP)(o)){const e=B().md.createChildStore(t,{id:i,table:g().Vl}),o=e.getSchema(),a=null==e?void 0:e.getFormat().app_config_uri;if(a&&(0,p().GN)(o,a)){n[i]={};for(const[t,s]of(0,h().WP)(r)){const r=B().Bv.createChildStore(e,{id:s,table:m().ev});r.isDefined()&&((0,j().QZ)({blockStore:r,collectionId:i,appConfigUri:a,variable:t,schema:o})&&(n[i][t]=s))}}}return n}),{useDeepEqual:!0,debugName:"relativeVariableStore"}),this.relativeVariablesAreStaleStore=new(o().default)((()=>{const e=this.contextStore.state;if(!e)return!1;const t=e.collectionViewBlockStore;if(!t)return!1;const n=this.privateRelativeVariableStore.state;for(const[o,i]of(0,h().WP)(n)){const e=B().md.createChildStore(t,{id:o,table:g().Vl}),n=e.getSchema(),r=null==e?void 0:e.getFormat().app_config_uri;if(r&&(0,p().GN)(n,r))for(const[t,a]of(0,h().WP)(i)){const i=B().Bv.createChildStore(e,{id:a,table:m().ev});if(i.isDefined()&&!(0,j().QZ)({blockStore:i,collectionId:o,appConfigUri:r,variable:t,schema:n}))return!0}}return!1}),{debugName:"relativeVariablesAreStale"}),this.aliveAutomationCountStore=new(o().default)((()=>{const e=this.collectionStore();if(!e)return 0;const t=e.getAutomationStores();let n=0;for(const o of t)o.isDisplayableInCollectionSettings()&&o.getAlive()&&(n+=1);return n}),{debugName:"aliceAutomationCount"}),this.completeSprintButtonContextStore=new(o().default)((()=>{var e,t;if((null===(e=this.collectionViewStore())||void 0===e?void 0:e.getFormatStore().getKeyStore("app_config_uri").getValue())!==r().Lu)return;const n=this.sprintSettingsContextStore.state;if(!n||!n.sprintCollectionStore)return;if(!n.automationContext)return;const{sprintCollectionStore:o,taskCollectionStore:i,automationContext:a}=n,s=this.getAutomationCollectionValue(i),l=this.getAutomationCollectionValue(o),c=null==l||null===(t=l.format)||void 0===t?void 0:t.app_config_uri,d=o.getSchema();return(0,p().wy)({appUri:c,collectionSchema:d})&&s&&l?{...n,sprintCollectionStore:o,taskCollectionValue:s,sprintCollectionValue:l,sprintCollectionSchema:d,automationContext:a}:void 0}),{useDeepEqual:!0,debugName:"getCompleteSprintButtonContext"}),this.sprintSettingsContextStore=new(o().default)((()=>{const e=(()=>{var e;const t=this.collectionStore(),n=this.collectionViewBlockStore();if(!n||!t)return;const o=t.getParentBlockStore();if(!o||!Boolean(o.pathIsAccessibleAndAlive()))return;const i=t.getDatabaseType();if(i!==r().av&&i!==r().dC)return;let a,s,c,d;if(i===r().dC){var u;a=t,s=o;const e=null===(u=a.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===u?void 0:u[r().yx.TaskToSprintRelation];if(!e)return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const i=a.getSchemaStore().getKeyStore(e).getValue();if(!i||!l().nC(i))return;const p=l().Nv(i);if(!p)return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c=B().md.createChildStore(n,p),d=c.getParentBlockStore(),!d)return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};if(c.getDatabaseType()!==r().av)return}else if(i===r().av){var p;c=t,d=o;const e=null===(p=c.getFormatStore().getKeyStore("app_uri_map").getValue())||void 0===p?void 0:p[r().Hx.SprintToTaskRelation];if(!e)return;const i=c.getSchemaStore().getKeyStore(e).getValue();if(!i||!l().nC(i))return;const u=l().Nv(i);if(!u)return;if(a=B().md.createChildStore(n,u),s=a.getParentBlockStore(),a.getDatabaseType()!==r().dC||!s)return}else(0,h().HB)(i);if(!Boolean(a.getAlive())||!s.pathIsAccessibleAndAlive())return;if(!Boolean(c.getAlive())||!d.pathIsAccessibleAndAlive())return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};const m=null===(e=c)||void 0===e?void 0:e.getAutomationStores();if(null!=m&&m.some((e=>!e.isDefined())))return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:void 0,sprintCollectionViewBlockStore:void 0,automationContext:void 0,automationContextLoaded:!0};let g;for(const r of m)if(Boolean(r.getAlive())&&r.isCompleteSprintAutomation()){const e=r.getActionStores();if(1===e.length&&Boolean(e[0].getAlive())&&e[0].isType("complete_sprint")){g={automationStore:r,automationActionStore:e[0]};break}}const f=c.isDefined()&&m.every((e=>e.isDefined()&&e.getActionStores().every((e=>e.isDefined()))));return{currentCollectionViewBlockStore:n,taskCollectionStore:a,taskCollectionViewBlockStore:s,sprintCollectionStore:c,sprintCollectionViewBlockStore:d,automationContext:g,automationContextLoaded:f}})(),t=(e=>{var t;if(!e)return;if(!e.taskCollectionViewBlockStore.canEditCollection())return{canEdit:!1};const n=e.sprintCollectionViewBlockStore,o=Boolean(null===(t=e.sprintCollectionViewBlockStore)||void 0===t?void 0:t.canEditCollection());return n&&!o?{canEdit:!1}:!e.sprintCollectionViewBlockStore||o&&!e.automationContext?{canEdit:!0,sprintsEnabled:!1}:o&&e.automationContext?{canEdit:!0,sprintsEnabled:!0}:void 0})(e);return e&&t?{...e,permissionsContext:t}:void 0}),{useDeepEqual:!0,debugName:"sprintSettingsContextStore"}),this.formulasCodeStore=i().default.createValue(void 0,{name:"formulasCodeStore"}),this.itemMountedCallbacks=new D,this.databaseItemsVisibleTracker=void 0,this.propertyResultDurationTracker=void 0,this.onItemMount=e=>{var t;null===(t=this.databaseItemsVisibleTracker)||void 0===t||t.handleItemMount(),this.trackInfiniteScrollLongTasksDebounced(),e&&this.itemMountedCallbacks.executeCallbacks(e)},this.trackInfiniteScrollLongTasksDebounced=v().sg(this.trackInfiniteScrollLongTasks,1e3),this.groupsForTypedDatabasesStore=new(o().default)((()=>{const e=H().default.state.currentSpaceStore;if(e&&"collectionTypedView"===this.contextType)return(0,n(895876).uK)({environment:this.environment,typedCollections:this.collectionStoresStore.state,spaceStore:e})}),{debugName:"groupsForTypedDatabasesStore"}),this._virtualizedModule=new U(this),this.timingTracker=new N,this.productUseCase=void 0,this.externalSyncStore=new(o().default)((()=>{const e=this.collectionStore();if(!e)return;if(!e||!e.isExternallyImportedAndSyncedCollection())return;const t=M().default.checkGate({gateName:"jira_2_way_sync"}),o=e.getFormat().synced_collection_instance_type,{synced_collection_external_url:i}=e.getFormatStore().getValue()||{},r=G().A.twoWaySyncExternalEntitiesStore.state.filter((e=>{var t;if(e.external_integration_id!==n(617871).me)return!1;const o=Object.keys((null===(t=e.getMetainfo())||void 0===t?void 0:t.supportedSites)||{});return!!o.length&&(i&&o.includes(i))}));return{shouldAllowUserToEditSyncedCollection:()=>{var n;if(!t)return!1;if(r.length>0&&"DataCenter"!==o)return!0;const i=null===(n=e.getFormat())||void 0===n?void 0:n.bot_id;return!!i&&!!G().A.externalAuthentications.getState().find((e=>e.parent_id===i))}}}),{debugName:"externalSyncStore"}),this.environment=e,this.groupsStore=new q(this,e)}setContext(e){this.contextStore.setState(e)}get contextType(){var e;return null===(e=this.contextStore.state)||void 0===e?void 0:e.type}get isMultiSourceView(){return"collectionTypedView"===this.contextType}get databaseType(){const e=this.contextStore.state;if(e){if("collectionTypedView"===e.type)return e.databaseType;if("collectionView"===e.type){const t=e.collectionStore;return null==t?void 0:t.getDatabaseType()}}}getPreviewContextAnalytics(){const e=this.previewContextStore.state;if(e)return{location:e.location,flowId:e.flowId}}collectionViewStore(){const e=this.contextStore.state,t=null==e?void 0:e.type;if(t)switch(t){case"collectionTypedView":case"collectionView":case"collectionSystemView":case"collectionSettings":return e.collectionViewStore;case"collectionPage":return;default:(0,h().HB)(t)}}collectionStore(){const e=this.contextStore.state;if(e&&"collectionTypedView"!==e.type)return"collectionSystemView"===e.type||"collectionView"===(null==e?void 0:e.type)||"collectionPage"===(null==e?void 0:e.type)||"collectionSettings"===(null==e?void 0:e.type)?e.collectionStore:void(0,h().HB)(e)}hasSingleCollection(){switch(this.contextType){case"collectionTypedView":case"collectionSystemView":return!1;case"collectionSettings":case"collectionPage":case"collectionView":case void 0:return!0;default:(0,h().HB)(this.contextType)}}isInViewTabLayout(){var e;return(null===(e=this.collectionViewBlockStore())||void 0===e?void 0:e.getParentTable())===n(144081).zx}isEphemeralView(){return this.isUnlistedViewStore.state&&this.isInlineViewStore.state}collectionViewBlockStore(){const e=this.contextStore.state;return null==e?void 0:e.collectionViewBlockStore}formatStore(){const e=this.contextStore.state;if(e)return"collectionPage"===e.type?e.collectionStore:"collectionView"===e.type||"collectionTypedView"===e.type||"collectionSystemView"===e.type?e.collectionViewStore:void("collectionSettings"!==e.type&&(0,h().HB)(e))}getPropertyFormatKey(){const e=this.contextStore.state;if("collectionPage"===(null==e?void 0:e.type))return"collection_page_properties";if("collectionView"===(null==e?void 0:e.type)||"collectionTypedView"===(null==e?void 0:e.type)){const t=e.collectionViewStore,o=null==t?void 0:t.getType();if(!o)return;return n(651124).u9(o)}}getPropertyFormat(e){var t;const n=null===(t=this.formatStore())||void 0===t?void 0:t.getFormat(),o=null==this?void 0:this.getPropertyFormatKey();if(!n||!o)return;return(n[o]??[]).find((t=>t.property===e))}createUpdateCounter(){return this.updateCounter.latestRequestUpdateCounter++,this.updateCounter}shouldUpdate(e){return M().default.checkGate({gateName:"collection_view_update_counter"})?!this.updateCounter.setRemoteResultCounter||this.updateCounter.setRemoteResultCounter<=e:this.updateCounter.latestRequestUpdateCounter===e}setUpdateCounterWithResponseCounter(e){this.updateCounter.setRemoteResultCounter=Math.max(e,this.updateCounter.setRemoteResultCounter??0)}getCurrentUserId(){return this.environment.currentUser.id}getViewType(){const e=this.collectionViewStore();if(null!=e&&e.isDefined())return e.getType();const t=this.contextStore.state;return"collectionPage"===(null==t?void 0:t.type)?"page":void 0}currentViewHasSort(){const e=this.normalizedQueryStore.state;return Boolean(e&&e.sort&&e.sort.length>0)}resetLoadingState(){this.isLoadingStore.setState(!1),this.loadingDetailsStore.reset()}getCollectionViewBlockSourceState(){const e=this.collectionViewBlockStore();if(!e)return"uninitialized";if(e.getCollectionStoreIfSingleSource())return"singleSource";return e.getCollectionViewStores().some((e=>Boolean(e.getCollectionStore())))||this.isEditableHomeCollectionStore.state?"linked":"uninitialized"}getFilterBarItemSettingsStore(e){let t=this.filterBarItemSettingsStoreMap.get(e.id);return t||(t=i().default.createValue({open:!1,stack:[]}),this.filterBarItemSettingsStoreMap.set(e.id,t)),t}getFilterOptionsItemSettingsStore(e){let t=this.filterOptionsItemSettingsStoreMap.get(e.id);return t||(t=i().default.createValue({open:!1,stack:[]}),this.filterOptionsItemSettingsStoreMap.set(e.id,t)),t}allowScrollingWhenCollectionSettingsSidebarOpen(){return"form_editor"===this.getViewType()}viewIsFlushToTopbar(){if(!this.collectionStore())return!1;if(this.shouldShowSourceStore.state)return!1;if(this.filtersBarOpenStore.state)return!1;return void 0===this.completeSprintButtonContextStore.state}shouldAllowNewItemCreation(e){var t,n;const o=this.permissionScopesStore.state,i="collectionTypedView"===this.contextType;return(null===(t=this.collectionStore())||void 0===t||!t.isExternallyImportedAndSyncedCollection()||"on"!==M().default.getEligibleGroup({experimentId:"jira_import_and_sync",defaultGroup:"control"}))&&((null===(n=this.collectionStore())||void 0===n||null===(n=n.getParentBlockStore())||void 0===n||!n.isSystemBlock())&&(!o.isSyncedCollection&&(o.canEditContent||i&&(null==e?void 0:e.overrideAllowForTypedViews))))}shouldShowPageIcon(){var e;return(null===(e=this.collectionViewStore())||void 0===e?void 0:e.shouldShowPageIcon())??!0}getAutomationCollectionValue(e){if(e.isDefined())return{id:e.id,space_id:e.getSpaceId(),schema:e.getSchema(),format:e.getFormat()}}registerCallbackForItemMounted(e,t){this.itemMountedCallbacks.registerCallback(e,t)}async trackInfiniteScrollLongTasks(){if(!this.infiniteScrollLongTaskObserver.isObserving)return;this.infiniteScrollLongTaskObserver.disconnect();const e=this.infiniteScrollLongTaskObserver.takeRecords(),t=x().kz(this),n=await F().LM({eventName:"collections.infinite_scroll_long_tasks.max_duration",eventProperties:t,sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}});if(!n)return;const o=e.reduce(((e,t)=>(e.entryCount++,e.maxDuration=Math.max(e.maxDuration,t.duration),e)),{maxDuration:0,entryCount:0});F().vd(this.environment,"collections.infinite_scroll_long_tasks.count",{count:o.entryCount,...t,sample_decision:n},{sampling:{behavior:"decided",sampleDecision:n}}),o.entryCount>0&&F().vd(this.environment,"collections.infinite_scroll_long_tasks.max_duration",{time:o.maxDuration,...t,sample_decision:n},{sampling:{behavior:"decided",sampleDecision:n}})}getPageVisitSourceOverride(){var e;switch(null===(e=this.contextStore.state)||void 0===e?void 0:e.type){case"collectionTypedView":case"collectionSystemView":case"collectionView":return this.contextStore.state.pageVisitSourceOverride;case"collectionPage":case"collectionSettings":case void 0:return;default:(0,h().HB)(this.contextStore.state)}}getGroupByAndGroupFormats(){const e=this.getViewType(),t=this.normalizedFormatStore.state,n="board"===e?{groupByKey:"board_columns_by",groupsFormatKey:"board_columns"}:{groupByKey:"collection_group_by",groupsFormatKey:"collection_groups"};return{groupBy:t[n.groupByKey],groupFormats:t[n.groupsFormatKey]??[]}}resultsInViewOrder(e){var t;const n=this.collectionViewBlockStore(),o=this.collectionViewStore(),i=this.collectionStoresStore.state;if(!n||!o||!i.length)return[];const{groupBy:r,groupFormats:a}=this.getGroupByAndGroupFormats(),l=this.normalizedSchemaStore.state,c=(0,h().O9)(r)?(0,s().oH)({schema:l,groupBy:r}):[],d=Object.values((null===(t=this.localResultStore.state)||void 0===t?void 0:t.reducerResults)??{}).find((e=>"groups"===e.type)),u="v2"===(null==d?void 0:d.version)?a:(0,V().ck)({getRecordModel:n.getRecordModel,getRecordRole:n.getRecordRole,schema:l,groupBy:r,formatGroups:a,schemaGroups:c,reducerResults:(null==d?void 0:d.results)??[],relativeVariableResult:this.relativeVariableStore.state,viewAppConfigUri:o.getFormat().app_config_uri,allowedCollectionStores:i});let p,m;if(0===u.length){const e=this.localResultStore.state;if(e){const t=Object.values(e.reducerResults).find((e=>"results"===e.type));p=((null==t?void 0:t.blockIds)??[]).map((e=>B().Bv.createChildStore(o,{table:"block",id:e})))}else p=[]}else{p=[];for(const e of u){const t=this.groupsStore.getGroupState(e),n=null==t?void 0:t.resultsStore.state;p.push(...n??[])}}if(p=v().hS(p,(e=>e.id)),this.currentSubitemFormatStoreForUiDisplayStore.state){m=[];const t=this.subitemTreeStore.state;for(const n of p){if(void 0!==e&&m.length>=e)break;const o=t.children.find((e=>e.value.store.id===n.id));if(o){const e=[];(0,b().yS)({results:e,tree:o}),m.push(...e)}}}else m=p;return void 0!==e?m.slice(0,e):m}collectionStoreResultsInViewOrder(){if("collectionTypedView"!==this.contextType){const e=this.collectionStore();return e?[e]:[]}const e=this.resultsInViewOrder(void 0);return v().oE(v().hS(e.map((e=>e.getAssociatedCollectionStore())),"id"))}get virtualizedModule(){return this._virtualizedModule}}Y.incrementScrollOffset=600;const Q=Y},890754:(e,t,n)=>{n.r(t),n.d(t,{CLOSED_CHAT_SIDEBAR_STATE:()=>p,DEFAULT_OPEN_CHAT_SIDEBAR_STATE:()=>u,NEW_CHAT_THREAD_ID:()=>d,getChatSidebarState:()=>g,getCurrentThreadStore:()=>v,getIsChatSidebarOpen:()=>b,getMergedChatSidebarState:()=>y,routeArgsGivenChatSidebarState:()=>m,useChatSidebarState:()=>f,useCurrentThreadStore:()=>h,useIsChatSidebarOpen:()=>_});var o=()=>n(484714),i=()=>n(847249),r=()=>n(234459),a=()=>n(498212),s=()=>n(58293),l=()=>n(630116),c=()=>n(46986);const d="new",u={isOpen:!0,isNewThread:!0},p={isOpen:!1};function m(e){return e.isOpen?e.isNewThread?{chatThreadId:d}:{chatThreadId:e.threadId}:{chatThreadId:void 0}}function g(e){const{RouterStore:t}=e,{route:n}=t.state;if(!(0,c().sx)())return{isOpen:!1};if(e.device.isMobile)return{isOpen:!1};if("page"!==n.name)return{isOpen:!1};if(n.chatThreadId){if(n.chatThreadId===d)return{isOpen:!0,isNewThread:!0};{const e=(0,a().ZA)(n.chatThreadId);return e?{isOpen:!0,threadId:e}:void 0}}}function f(){const e=(0,o().v3)();return(0,i().K8)((()=>g(e)??p),[e])}function v(e){const{spaceStore:t,chatSidebarState:n}=e;if(n.isOpen&&!n.isNewThread)return l().Ei.createChildStore(t,{table:r().To,id:n.threadId,spaceId:t.id})}function h(){const e=(0,s().r)(),t=f();return(0,i().K8)((()=>{if(e&&t)return v({spaceStore:e,chatSidebarState:t})}),[e,t])}function _(){const e=(0,o().v3)();return(0,i().K8)((()=>b(e)),[e])}function b(e){var t;return(null===(t=g(e))||void 0===t?void 0:t.isOpen)??!1}function y(e){const{environment:t,update:n}=e,o=g(t),i=!0===(null==o?void 0:o.isOpen)?o:void 0,r=u;if(!n)return i??r;let a;if(a=n&&Object.prototype.hasOwnProperty.call(n,"isNewThread")?Boolean(n.isNewThread):(!n||!Object.prototype.hasOwnProperty.call(n,"threadId"))&&((null==i?void 0:i.isNewThread)??r.isNewThread??!0),a)return{isOpen:!0,isNewThread:!0};{let e;return n&&Object.prototype.hasOwnProperty.call(n,"threadId")&&"threadId"in n?e=n.threadId:i&&!i.isNewThread&&(e=i.threadId),void 0===e?u:{isOpen:!0,threadId:e,isNewThread:!1}}}},891078:(e,t,n)=>{n.d(t,{HX:()=>x,ME:()=>M,NW:()=>w,VE:()=>I,bx:()=>k,i0:()=>T,pW:()=>A,qu:()=>C,ty:()=>P});var o=n(296540),i=()=>n(662303),r=()=>n(484714),a=()=>n(792485),s=()=>n(790748),l=()=>n(847249),c=()=>n(401497),d=()=>n(191772),u=()=>n(100622),p=()=>n(284371),m=()=>n(835066),g=()=>n(11048),f=()=>n(731320),v=()=>n(299545),h=()=>n(129522),_=()=>n(337567),b=()=>n(630116),y=()=>n(620149),S=n(474848);function w(e,t,n,i){(0,o.useImperativeHandle)(t,(()=>n),[n]),(0,s().b)(h().K,(()=>n),[n]);const r=e&&!(0,v().Md)(e);return(0,S.jsx)(g().A,{name:n.renderedType,children:r?i:null})}function k(e,t){const n=(0,a().S)();return(0,l().K8)((()=>{if(!e)return!1;if(t)return!1;if(y().l.state)return!1;const o=n&&n.publicEditModeStore.state;return!(0,f().QT)(o)&&e.canEdit()}),[t,n,e])}function I(e){const t=(0,r().v3)();return(0,l().K8)((()=>(0,m().dC)(t,e)),[t,e])}function x(e,t){const n=(0,a().S)();return(0,l().K8)((()=>{if(t)return!1;if(y().l.state)return!1;const o=n&&n.publicEditModeStore.state;return!(0,f().QT)(o)&&e.canEditCollection()}),[t,n,e])}function A(e,t){const n=(0,c().DP)();return(0,l().K8)((()=>{if(t&&e.getInsertSuggestion())return{color:(0,d().B0)(n).color};const o=e.getFormat().block_color||"default";return(0,u().k5)(o,n)}),[t,e,n])}function C(e){return(0,l().K8)((()=>{const t=e.getRecordStoreUIRoot();if(!(t instanceof b().Bv))return;const n=t.getFormatStore().getKeyStore("page_font").getValue();return p().xf({pageFont:n,locale:i().locale})}),[e])}function T(e){return(0,l().K8)((()=>Boolean(e&&e.pathIsDead())),[e])}function M(e){return(0,l().K8)((()=>e&&e.getClosestNonAliveAncestor()),[e])}function P(e){return(0,l().K8)((()=>Boolean(e&&(0,_().dL)(e))),[e])}},891279:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{dragging:!1}}}const i=o},892632:(e,t,n)=>{n.d(t,{a1:()=>V,r0:()=>j,j7:()=>J,x9:()=>O,xh:()=>L,JC:()=>ae,u1:()=>te,dA:()=>X,Bz:()=>Q,po:()=>ee,qL:()=>W,QM:()=>H,Zn:()=>F,cA:()=>Z});n(16280),n(944114),n(898992),n(354520),n(803949),n(581454),n(814603),n(147566),n(198721);var o=()=>n(634201),i=()=>n(522419),r=()=>n(308145),a=()=>n(857639),s=()=>n(206267),l=()=>n(386164),c=()=>n(161479),d=()=>n(979340),u=()=>n(919709),p=()=>n(220719),m=()=>n(319625),g=()=>n(496603),f=()=>n(763824),v=()=>n(973647),h=()=>n(532313),_=()=>n(720665),b=()=>n(989423),y=()=>n(135552),S=()=>n(898486),w=()=>n(972435),k=()=>n(706742),I=()=>n(508496),x=()=>n(150193),A=()=>n(518888),C=()=>n(589994),T=()=>n(612587),M=()=>n(712505),P=()=>n(749240);class B{constructor(e){this.environment=void 0,this.startTime=void 0,this.partialTime=void 0,this.bytesSuccessfullySent=void 0,this.curatedFileType=void 0,this.fileSize=void 0,this.shouldReportMetrics=void 0,this.gateName=void 0,this.environment=e.environment,this.startTime=e.startTime,this.partialTime=e.startTime,this.fileSize=e.fileSize,this.bytesSuccessfullySent=0,this.curatedFileType=this.getCuratedFileType(e.fileType),this.gateName=e.silentRetryEnabled?"silent_retry_on":"silent_retry_control";this.shouldReportMetrics=(0,n(745875).rQ)(1);const t=B.getCuratedFileSize(e.fileSize);(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.file_stats",eventProperties:{size:t,type:this.curatedFileType}}}),this.shouldReportMetrics&&(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_start",eventProperties:{gate_name:this.gateName,type:this.curatedFileType}}}),this.environment.device.isMobileNative&&I().default.logEvent("upload_session_start")}getCuratedFileType(e){return e?e.includes("image")?"image":"other":"unknown"}reportPermissionCheckCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_permission_check",eventProperties:{latency:t,type:this.curatedFileType}}}),this.partialTime=e.timeNow}reportGetSignedUrlCompleted(e){if(!this.shouldReportMetrics)return;const t=e.timeNow-this.partialTime;(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_get_signed_url",eventProperties:{latency:t,success:e.success,type:this.curatedFileType}}}),this.partialTime=e.timeNow}updateProgress(e){this.bytesSuccessfullySent=e.bytesSuccessfullySent}startNewAttempt(e){this.partialTime=e.timeNow,this.bytesSuccessfullySent=0}reportAttemptFinished(e){this.shouldReportMetrics&&(e.success||(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.failed_attempt_progress",eventProperties:{progress:this.bytesSuccessfullySent,type:this.curatedFileType}}}),this.partialTime=e.timeNow)}reportUploadSessionEnd(e){let{timeNow:t,status:n,errorCode:o=-1}=e;const i=t-this.startTime,r=this.fileSize,a=Math.round(r/i);this.environment.device.isMobileNative&&I().default.logEvent("upload_session_end",a,{status:n,latency:i,size:r,speed:a,type:this.curatedFileType}),this.shouldReportMetrics&&((0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.upload_session_end",eventProperties:{status_code:o,status:n,gate_name:this.gateName,type:this.curatedFileType}}}),I().default.logEvent("client.file_upload.upload_session_end",this.curatedFileType),(0,b().u4)({environment:this.environment,event:{eventName:"client.file_upload.latency_e2e",eventProperties:{latency:i,status:n,gate_name:this.gateName,size:r,speed:a,type:this.curatedFileType}}}))}static getCuratedFileSize(e){return e<0?-1:Math.pow(2,Math.ceil(Math.log2(e)))}}var R=()=>n(559926),E=()=>n(449506),D=()=>n(934839);const N=(0,n(959013).YK)({uploadFileFailed:{defaultMessage:"Upload failed.",id:"uploadActions.uploadFailedError.message"},uploading:{defaultMessage:"Uploading",id:"uploadActions.uploading"},preparing:{id:"action.uploadFile.progressText.preparing",defaultMessage:"Preparing"}});function L(e){return e.filter((e=>e.getAlive())).map((e=>{const{source:t,title:n,size:o}=e.getProperties()||{};return{type:"remote",id:e.id,source:u().q4_(t),name:u().q4_(n),size:u().q4_(o),store:e}}))}function O(e){return{...U(e),id:s().JW(),dataURL:e instanceof File?URL.createObjectURL(e):e.dataURL,type:"local"}}function U(e){return{file:e,name:e.name,size:`${(e.size/1024).toFixed(1)}KB`}}function F(e){var t;const n=e.files.map(U);null===(t=e.onBatchStart)||void 0===t||t.call(e,n);const o=new Map;let i=0;f().vA(e.files,oe,(t=>Promise.all(t.map((t=>{const n=s().JW();return new Promise(((r,a)=>{const s={environment:e.environment,..."secure"===e.bucket?{bucket:e.bucket,record:e.record,isFileBlock:e.isFileBlock}:{bucket:e.bucket},file:t,onStart:(t,o)=>{var i;null===(i=e.onSingleFileStart)||void 0===i||i.call(e,t,n,o)},onProgress:t=>{var o,r;let{progressPercent:a,progressText:s,uploadedFiles:l}=t;null===(o=e.onBatchProgress)||void 0===o||o.call(e,{progressPercent:a,progressText:s,uploadedFiles:i}),null===(r=e.onSingleFileProgress)||void 0===r||r.call(e,{progressPercent:a,progressText:s,uploadedFiles:l},n)},onComplete:(a,s,l,c)=>{var d;i++,o.set(t.name,{fileUrl:a,signedToken:c??""}),null===(d=e.onSingleFileComplete)||void 0===d||d.call(e,a,n),r()},onError:t=>{var o;const i=new Error(t.message);null===(o=e.onSingleFileError)||void 0===o||o.call(e,i,n),a(i)},bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck,importFileUploadType:e.uploadType,formMetadata:e.formMetadata,spaceId:e.spaceId};"confluence"===e.uploadType||"genericImporter"===e.uploadType?"secure"!==s.bucket&&async function(e){const{environment:t,file:n,bypassFreeFileUploadLimitCheck:o,spaceId:i,uploadKey:r}=e;if(!(n instanceof File))return;const a=n.type||"text/plain; charset=utf-8";if(V({bypassFreeFileUploadLimitCheck:o,environment:t,file:n})){var s;if(!i)return void(null===(s=e.onError)||void 0===s||s.call(e,{message:"Space information is missing.",offline:void 0}));{var c;const o=K(n,r);null===(c=e.onStart)||void 0===c||c.call(e,o);const s=Math.floor(n.size/z)+1,_={bucket:e.bucket,name:n.name,contentType:a,supportExtraHeaders:!0,contentLength:n.size,numberOfFileChunks:s,spaceId:i},b=await E().callApi({eventName:"initiateMultipartUpload",environment:t,data:_,headers:(0,l().WS)({cellId:void 0,spaceId:i})});var d;if("failed"===b.type)return void(null===(d=e.onError)||void 0===d||d.call(e,{message:b.error.message,offline:b.offline}));const y=await async function(e){const{file:t,signedUrlsForChunks:n}=e,o=[];let i,r,a,s=[];const l=[];for(let p=0;p<n.length;p++){i=p*z,r=(p+1)*z,a=p+1<n.length?t.slice(i,r):t.slice(i);const e=n[p],s=fetch(e,{method:"PUT",body:new Blob([a],{type:t.type})});o.push(s)}const c=g().iv(o,3);for(const[p,g]of c.entries()){var d;try{const e=await(0,h().v8)((()=>Promise.all(g)),[100,1e3,3e3]);s=[...s,...e]}catch(u){return{error:(0,m().A)(u)}}const t=Math.floor(p/c.length*100);if(null===(d=e.onProgress)||void 0===d||d.call(e,{progressPercent:t,uploadedFiles:0}),e.uploadKey){const n=A().default.getKeyState(e.uploadKey);n&&A().default.setKeyState(e.uploadKey,{...n,progressPercent:t})}}return s.forEach(((e,t)=>{const n=e.headers.get("etag");n&&l.push({ETag:n,PartNumber:t+1})})),{value:l}}({file:n,signedUrlsForChunks:b.data.signedUrlsForChunks,onProgress:e.onProgress,uploadKey:r});var u;if(v().Q.isFail(y))return void(null===(u=e.onError)||void 0===u||u.call(e,{message:y.error.message,offline:void 0}));const S={..._,multipartUploadEtags:y.value,fileKey:b.data.key,uploadId:b.data.uploadId},w=await E().callApi({eventName:"completeMultipartUpload",environment:t,data:S,headers:(0,l().WS)({cellId:void 0,spaceId:i})});var p,f;if("success"===w.type)null===(p=e.onComplete)||void 0===p||p.call(e,b.data.url,void 0,b.data.signedToken);else null===(f=e.onError)||void 0===f||f.call(e,{message:w.error.message,offline:w.offline});r&&A().default.setKeyState(r,void 0)}}else J(e.environment)}({...s,uploadKey:n}):e.formMetadata&&"temporary"===s.bucket?async function(e){var t;const{environment:n,file:o,formMetadata:i,uploadKey:r}=e;if(!i)return;const a=o.type||"text/plain; charset=utf-8",s=await E().callApi({eventName:"getFormUploadFileUrl",environment:n,data:{name:o.name,contentType:a,contentLength:o.size,spaceId:i.spaceId,formId:i.formId}});if("success"!==s.type){var l;return void(null===(l=e.onError)||void 0===l||l.call(e,{message:(0,S().Hu)(w().A.getIntl(),s),offline:s.offline}))}const c=K(o,r);null===(t=e.onStart)||void 0===t||t.call(e,c,{fileName:o.name,token:s.data.token});try{const t=await Y({environment:n,uploadKey:r,getUploadFileUrlResponse:{...s,data:{...s.data,signedUploadPostUrl:s.data.signedPostUrl,signedGetUrl:"",type:"POST"}},file:o,fileType:a,onProgress:e.onProgress,retryCount:0,isFileBlock:!1});if(t.error){var d;null===(d=e.onError)||void 0===d||d.call(e,t.error)}else{var u;const t=r?A().default.getKeyState(r):void 0;null===(u=e.onComplete)||void 0===u||u.call(e,s.data.url,t)}}catch(m){var p;null===(p=e.onError)||void 0===p||p.call(e,{message:"File transmission failed",offline:!1})}e.uploadKey&&A().default.setKeyState(e.uploadKey,void 0)}(s):q({uploadKey:n,...s,retryImmediatelyAfterFailure:!1})}))}))))).then((()=>{var t,n;const i=e.files.map((e=>o.get(e.name))).filter((e=>void 0!==e));null===(t=e.onBatchComplete)||void 0===t||t.call(e,i.map((e=>e.fileUrl))),null===(n=e.onBatchCompleteWithToken)||void 0===n||n.call(e,i)})).catch((t=>{var n;"confluence"===e.uploadType&&R()._$(e.environment,{import_source:"confluence",data:{import_type:"file",status:"failure",error:t,fileSize:e.files[0].size},flowId:e.flowId}),null===(n=e.onBatchError)||void 0===n||n.call(e,t)}))}function V(e){const{bypassFreeFileUploadLimitCheck:t,file:n}=e,o=P().subscriptionDataStoreInstance.state;return t||!o||!(0,d().dL)(o.subscriptionTier)||n.size<=ne}function j(e,t){const n=(0,i().QC)(e.name);return n&&(0,r().al)(n)?e.size<=0?{canUpload:!1,reason:"fileSizeIsZero"}:e.size>t*_().Bu?{canUpload:!1,reason:"fileSizeTooLarge"}:{canUpload:!0}:{canUpload:!1,reason:"fileExtensionNotAllowed"}}const z=20971520;function H(e){const{retryWhenOffline:t,backoffController:n=new(k().x)(void 0)}=e,o=n.getFailures()>0,i=e.uploadKey??("secure"===e.bucket?A().default.getBlockKey(e.record.id):void 0);q({...e,uploadKey:i,isOfflineBackoffRetry:o,onComplete:t=>{var r;o&&I().default.logEvent("upload_offline_success_after_retries",n.getFailures());const a=i?A().default.getKeyState(i):void 0;null===(r=e.onComplete)||void 0===r||r.call(e,t,a)},onError:o=>{var i;t&&o.offline?n.backOffOnFailure(10*_().TD).then((()=>{H({...e,backoffController:n})})):null===(i=e.onError)||void 0===i||i.call(e,o)}})}function W(e){const{retryWhenOffline:t,environment:n,backoffController:o=new(k().x)(void 0)}=e;!async function(e){const{environment:t,file:n,bypassFreeFileUploadLimitCheck:o,uploadKey:i}=e,r=performance.now();e.importFileUploadType&&R().eX(t,{type:e.importFileUploadType,uploadFileSizeBytes:n.size,fromAssistantUpload:!0});const a=n.type||"text/plain; charset=utf-8";if(V({bypassFreeFileUploadLimitCheck:o,environment:t,file:n})){const o=K(n,i);e.onStart&&e.onStart(o);const s=await E().callApi({eventName:"getUploadFileUrlForAssistantChatTranscriptUpload",environment:t,data:{name:n.name,contentType:a,assistantChatTranscriptSessionPointer:e.assistantChatTranscriptSessionPointer,contentLength:n.size}});if("failed"===s.type){if(e.onError){const t=(0,S().Hu)(w().A.getIntl(),s);e.onError({message:t,offline:s.offline})}return}return G({...e,getUploadFileUrlResponse:{...s,data:{...s.data,type:"POST"}},fileType:a,performanceStartTime:r,isFromAssistant:!0,retryImmediatelyAfterFailure:!1,bucket:"temporary"})}J(e.environment)}({...e,onComplete:(t,n)=>{var o;null===(o=e.onComplete)||void 0===o||o.call(e,t,n)},onStart:(t,o)=>{var i;null===(i=e.onStart)||void 0===i||i.call(e,t,o),(0,b().u4)({environment:n,event:{eventName:"assistant_attachment_upload_started",eventProperties:{}}})},onError:i=>{var r;if(t&&i.offline)return(0,b().u4)({environment:n,event:{eventName:"assistant_attachment_upload_retry",eventProperties:{}}}),void o.backOffOnFailure(10*_().TD).then((()=>{W({...e,backoffController:o})}));null===(r=e.onError)||void 0===r||r.call(e,i),(0,b().u4)({environment:n,event:{eventName:"assistant_attachment_upload_failed",eventProperties:{message:i.message,offline:i.offline??!1}}})}})}async function q(e){var t;const{environment:n,file:o,bypassFreeFileUploadLimitCheck:i}=e,r=performance.now(),a=!e.isOfflineBackoffRetry&&e.reportRichUploadMetrics?new B({environment:n,fileType:o.type,fileSize:o.size,startTime:r,silentRetryEnabled:$(e)}):void 0;e.importFileUploadType&&R().eX(n,{type:e.importFileUploadType,uploadFileSizeBytes:o.size});const s=o.type||"text/plain; charset=utf-8",l=V({bypassFreeFileUploadLimitCheck:i,environment:n,file:o}),d=performance.now();if(null==a||a.reportPermissionCheckCompleted({timeNow:d}),!l)return null==a||a.reportUploadSessionEnd({timeNow:d,status:"no_permission"}),void J(e.environment);const u=K(o,e.uploadKey);null===(t=e.onStart)||void 0===t||t.call(e,u);const p="secure"===e.bucket?{bucket:e.bucket,name:o.name,contentType:s,record:{table:e.record.table,id:e.record.id,spaceId:(0,c().e)(e.record.spaceId)},supportExtraHeaders:!0,contentLength:o.size}:{bucket:e.bucket,name:o.name,contentType:s,supportExtraHeaders:!0,contentLength:o.size,...e.spaceId&&{spaceId:e.spaceId}};"secure"===e.bucket&&await C().transactionQueue.awaitRecordTransaction(e.record);const m=await E().callApi({eventName:"getUploadFileUrl",environment:n,data:p});null==a||a.reportGetSignedUrlCompleted({timeNow:performance.now(),success:"success"!==m.type});return G({...e,getUploadFileUrlResponse:m,fileType:s,performanceStartTime:r,fileUploadsAnalyticReporter:a})}function K(e,t){const n=U(e);return t&&A().default.setKeyState(t,{progressPercent:void 0,progressText:w().A.formatMessage(N.preparing),file:e,name:n.name,size:n.size}),n}async function G(e){const{getUploadFileUrlResponse:t,isFromAssistant:n,file:o,performanceStartTime:i,environment:r,fileUploadsAnalyticReporter:s,uploadKey:l}=e,c="secure"===e.bucket?e.record:void 0,d="secure"===e.bucket&&e.isFileBlock;var u;if("success"!==t.type)return null===(u=e.onError)||void 0===u||u.call(e,{message:(0,S().Hu)(w().A.getIntl(),t),offline:t.offline}),void(l&&A().default.setKeyState(l,void 0));const{url:p,signedGetUrl:m,signedToken:g}=t.data,f=$(e);try{f?await(0,h().L5)({fn:(n,o)=>Y({environment:r,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:o,fileUploadsAnalyticReporter:s,recordPointer:c,isFileBlock:d,uploadKey:l}),handleError:()=>({status:"retry"}),retryAttemptsMS:[1e3,2e3,4e3],retryAttemptRandomOffsetMS:200,initialInput:void 0}):await Y({environment:r,getUploadFileUrlResponse:t,file:e.file,fileType:e.fileType,onProgress:e.onProgress,retryCount:0,fileUploadsAnalyticReporter:s,recordPointer:c,isFileBlock:d,uploadKey:l})}catch(b){if((0,_().Et)(b)){var v;null==s||s.reportUploadSessionEnd({timeNow:performance.now(),errorCode:b,status:"error"});const t={message:w().A.formatMessage(N.uploadFileFailed),offline:0===b};null===(v=e.onError)||void 0===v||v.call(e,t)}else null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"error"}),console.log("failed to upload file ",b);return void(e.uploadKey&&A().default.setKeyState(e.uploadKey,void 0))}if(null==s||s.reportUploadSessionEnd({timeNow:performance.now(),status:"success"}),e.onComplete){const t=e.uploadKey?A().default.getKeyState(e.uploadKey):void 0;if(e.onComplete(p,t,m,g),a().log({level:"info",from:"uploadActions",type:"ClientUploadSuccess",data:{miscDataToConvertToString:{url:p}}}),e.importFileUploadType){const t=performance.now()-i;R().c6(r,{type:e.importFileUploadType,totalTimeMs:t});const a=t/1e3,s=o.size/a,l=o.size/1048576,c=l<=10?"lt10MB":l>10&&l<=100?"lt100MB":"gt100MB";R().LS(r,{type:e.importFileUploadType,size:c,file_upload_latency:s,from_assistant_upload:Boolean(n)})}}e.uploadKey&&A().default.setKeyState(e.uploadKey,void 0)}function $(e){if(e.isOfflineBackoffRetry)return!1;return!!I().default.checkGate({gateName:"uploads_retry_all_immediately"})||e.retryImmediatelyAfterFailure}async function Y(e){const{environment:t,getUploadFileUrlResponse:n,file:o,fileType:i,onProgress:r,retryCount:s,uploadKey:l,fileUploadsAnalyticReporter:c,recordPointer:d,isFileBlock:u}=e;null==c||c.startNewAttempt({timeNow:performance.now()});const{type:m,url:g}=n.data;(0,p().MX)("success"===n.type,"File upload failed");const v=f().yX();if(!(o instanceof File)){var h;const e=w().A.formatMessage(N.uploading);if(null==r||r({progressText:e,uploadedFiles:0}),l){const t=A().default.getKeyState(l);t&&A().default.setKeyState(l,{...t,progressText:e})}return await(null===(h=t.mobileNative)||void 0===h?void 0:h.uploadFile({file:o,recordPointer:d,isFileBlock:u,uploadKey:l,getUploadFileUrlPutResponse:"PUT"===n.data.type?n.data:void 0,getUploadFileUrlPostResponse:"POST"===n.data.type?n.data:void 0}))??{error:{message:"Mobile native upload not supported.",offline:!1}}}const _=new XMLHttpRequest;if(_.upload.addEventListener("progress",(e=>{if(!e.lengthComputable)return;null==c||c.updateProgress({bytesSuccessfullySent:e.loaded});const t=Math.round(100*e.loaded/e.total);if(null==r||r({progressPercent:t,uploadedFiles:0,isNetworkUnreliable:Boolean(s)&&s>0}),l){const e=A().default.getKeyState(l);e&&A().default.setKeyState(l,{...e,progressPercent:t})}})),_.onabort=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:m,status:_.status,statusText:_.statusText,responseText:_.responseText,source:"onabort"}}})},_.onerror=function(){a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:m,status:_.status,statusText:_.statusText,responseText:_.responseText,source:"onerror"}}})},_.onreadystatechange=function(){if(_.readyState!==XMLHttpRequest.DONE)return;const e=200===_.status||204===_.status;null==c||c.reportAttemptFinished({timeNow:performance.now(),retryCount:s,success:e}),e?v.resolve({value:g}):(a().log({level:"error",from:"uploadActions",type:"ClientUploadError",data:{miscDataToConvertToString:{type:m,status:_.status,statusText:_.statusText,responseText:_.responseText,source:"onreadystatechange"}}}),v.reject(_.status))},"POST"===m){const e=n.data.postHeaders,t=n.data.signedUploadPostUrl;_.open(m,t);for(const n of e)_.setRequestHeader(n.name,n.value);const i=new FormData;for(const o in n.data.fields)i.append(o,n.data.fields[o]);i.append("file",o),_.send(i)}else{const e=n.data.putHeaders,t=n.data.signedPutUrl;_.open(m,t);for(const n of e)_.setRequestHeader(n.name,n.value);_.setRequestHeader("Content-Type",i),_.send(o)}return v.promise}function Q(e){re({...e,onChange:t=>{if(!t.files||0===t.files.length)return;const n=Array.from(t.files);F({environment:e.environment,files:n,..."secure"===e.bucket?{bucket:e.bucket,record:e.record,isFileBlock:!1}:{bucket:e.bucket},onBatchStart:e.onStart,onBatchProgress:e.onProgress,onBatchComplete:e.onComplete,onBatchCompleteWithToken:e.onCompleteWithToken,onBatchError:e.onError,bypassFreeFileUploadLimitCheck:e.bypassFreeFileUploadLimitCheck})}})}function Z(e,t,n,o){F({environment:t,files:[e],bucket:n,onBatchComplete:o})}async function X(e){var t;if(e.environment.mobileNative&&e.supportsMobileNativeFileUpload&&"on"===I().default.getEligibleGroup({experimentId:"mobile_native_file_upload_exp",defaultGroup:"control"}))return(null===(t=await e.environment.mobileNative.openFilePicker({htmlAccept:e.accept,limit:e.multiple?void 0:1}))||void 0===t?void 0:t.files)??[];const n=f().yX();return re({...e,onChange:e=>{const t=o().PE(e.files);n.resolve(t)}}),n.promise}function J(e){D().HQ({bannerStore:M().default.state.open?T().A:x().A,id:"SubscriptionEditingBlocker",styleKey:y().q.Red,contentKey:"upload_limit_exceeded"})}function ee(){D().zA({bannerStore:x().A,id:"SubscriptionEditingBlocker"}),D().zA({bannerStore:T().A,id:"SubscriptionEditingBlocker"})}const te=5,ne=1e6*te,oe=5;let ie;function re(e){ie&&ie.remove(),ie=document.createElement("input"),ie.type="file",ie.style.opacity="0",ie.style.pointerEvents="none",ie.style.position="fixed",ie.style.left="-1000px",ie.style.top="-1000px",ie.ariaHidden="true",document.body.appendChild(ie),e.multiple?ie.setAttribute("multiple",""):ie.removeAttribute("multiple"),e.accept&&ie.setAttribute("accept",e.accept),ie.addEventListener("change",(()=>{e.onChange&&e.onChange(ie)})),ie.addEventListener("blur",(()=>{e.onBlur&&e.onBlur(ie)})),ie.addEventListener("click",(e=>{e.stopPropagation()})),ie.click(),ie.focus({preventScroll:!0})}function ae(e){return e.filter(se).map((e=>e.file))}function se(e){return"local"===e.type}},893702:(e,t,n)=>{n.d(t,{NW:()=>v,P6:()=>c,Ps:()=>d,QR:()=>u,S_:()=>h,Wq:()=>p,c3:()=>g,lt:()=>s,s:()=>l,zi:()=>f});var o=()=>n(337240),i=()=>n(989423),r=()=>n(508496);function a(e,t){i().vd(e,t)}function s(e){a(e,"request_login_with_apple"),m(e,"login-with-apple")}function l(e){a(e,"request_login_with_google"),m(e,"login-with-google")}function c(e){a(e,"request_login_with_microsoft"),m(e,"login-with-microsoft")}function d(e){a(e,"request_login_with_google_onetap"),m(e,"login-with-google-onetap")}function u(e){a(e,"send_temporary_password"),m(e,"temporary-passcode")}function p(e){a(e,"redirect_to_saml_login"),m(e,"saml")}function m(e,t){i().u4({environment:e,event:{eventName:"login_attempt",eventProperties:{login_method:t}}}),r().default.logEvent("login_attempt",t,{})}function g(e,t){i().vd(e,"login_success",t,{dontWait:!0}),o().c3(e),r().default.logEvent("login_success",t.login_method,{...t,device_type:e.device.deviceType})}function f(e,t){const{isSignup:n}=t;n&&o().i_(e)}function v(e,t){const{actionType:n,isSignup:o}=t;i().vd(e,"google_one_tap_login_button_click",{is_signup:Boolean(o),action_type:n},{dontWait:!0})}function h(e,t){i().WU(e,"login_email_input_updates","login_email_input_updates",1)}},893820:(e,t,n)=>{n.d(t,{nY:()=>D,Pd:()=>B,J1:()=>P,gm:()=>M,uX:()=>R,n_:()=>A,U5:()=>E});n(16280),n(944114),n(898992),n(354520),n(803949),n(908872),n(814603),n(147566),n(198721);var o=()=>n(496603),i=()=>n(502800),r=()=>n(498212),a=()=>n(249386),s=()=>n(584262);n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);const l=1e3,c="eventTrailBufferAvailabilityTest";class d{constructor(){this.storage=Object.create(null),this.pendingUpdates=new Set,this.nextFlush=null;const e=globalThis.window;e&&e.addEventListener("beforeunload",(()=>{this.flush()}))}isEnabled(){try{const e=`${Math.random()}`;return localStorage.setItem(c,e),Promise.resolve(localStorage.getItem(c)===e)}catch{return Promise.resolve(!1)}finally{try{localStorage.removeItem(c)}catch{}}}async get(e){let t=this.storage[e];if(void 0===t)try{const n=localStorage.getItem(e);if(null!==n){let o=JSON.parse(n);o.length>l&&(o=o.slice(0,l)),t=this.storage[e]=o}else t=this.storage[e]=null}catch{}return Promise.resolve(t??void 0)}getRaw(e){try{const t=this.get(e);return Promise.resolve(void 0===t?void 0:JSON.stringify(t))}catch{return Promise.resolve(void 0)}}set(e,t){let n=t;return t.length>l&&(n=t.slice(0,l)),this.storage[e]=n,this.pendingUpdates.add(e),this.scheduleFlush(),Promise.resolve()}remove(e){return delete this.storage[e],this.pendingUpdates.add(e),this.scheduleFlush(),Promise.resolve()}reset(){for(const e of Object.keys(this.storage))this.pendingUpdates.add(e);return this.storage=Object.create(null),this.scheduleFlush(),Promise.resolve()}scheduleFlush(){null===this.nextFlush&&(this.nextFlush=setTimeout((()=>{this.nextFlush=null,this.flush()}),1e4))}flush(){const e=new Set;for(const t of this.pendingUpdates){const n=this.storage[t];try{void 0!==n?localStorage.setItem(t,JSON.stringify(n)):localStorage.removeItem(t)}catch{e.add(t)}}this.pendingUpdates=e}}var u=()=>n(857639);var p=()=>n(449412);let m,g;const f=60,v=10,h=300,_=1e3,b=new Array,y=new Array;let S=0;const w=[{threshold:500,level:"warning",message:"Event trail client volume is high",lastUpdateTimestamp:0},{threshold:_,level:"error",message:"Event trail is flooded on the client",lastUpdateTimestamp:0}];function k(e){const t=Date.now(),n=Math.floor(t/1e3/v)*v;if((b.length>0?b[b.length-1]:0)===n)++S,++y[y.length-1];else{b.push(n),y.push(1);const e=n-f,t=b.findIndex((t=>t>=e));-1!==t?(b.splice(0,t),y.splice(0,t)):b.length>0&&(b.splice(0,b.length),y.splice(0,y.length)),S=y.reduce(((e,t)=>e+t),0)}for(const o of w){const{threshold:n,level:i,message:r,lastUpdateTimestamp:a}=o;S>=n&&t-a>1e3*h&&(p().Fg(new Error(r),{level:i,extra:{count:S,windowSeconds:Math.floor(t/1e3)-b[0],lastEvent:e}}),o.lastUpdateTimestamp=t)}return S>=_}const I=new(s().qK)((async e=>{const{config:t,endpoint:o,deviceId:i}=e,l=await n.e(89920).then(n.bind(n,939302));return await new Promise((e=>{const c=`${new URL(t.domainBaseUrl).origin}${t.api.http}/${o||n(785082).i4}`;let u;i&&(u=i.startsWith("w_")||i.startsWith("a_")?i.replaceAll("-",""):(0,r().S2)(i));const p=u;l.init("notion","",{serverUrl:c,deviceId:p,autocapture:!1,identityStorage:"localStorage",storageProvider:new d,flushQueueSize:50}),t.env,g="2023092001",e(l),function(){const e=(0,n(939768).bk)(m||"");if(!e)return;const t={utm_campaign:e.searchParams.get("utm_campaign")||a().HM,utm_content:e.searchParams.get("utm_content")||a().HM,utm_medium:e.searchParams.get("utm_medium")||a().HM,utm_source:e.searchParams.get("utm_source")||a().HM,utm_term:e.searchParams.get("utm_term")||a().HM};P({traits:(0,s().B5)({...t})})}()}))}));function x(e){const{eventName:t,eventProperties:n,groupProperties:r,statusCode:a,message:s}=e,l={data:{eventName:t,eventProperties:o().cJ(n,"experiments"),groupProperties:r},statusCode:a,message:s};u().rateLimitedLog({level:"error",from:"eventTrailApiHelpers",type:"trackFailure",error:(0,i().convertErrorToLog)(l)})}async function A(e){m=window.location.href;const{config:t,isEnabled:n,endpoint:o,deviceId:r}=e;try{await I.load({config:t,isEnabled:n,endpoint:o,deviceId:r})}catch(a){u().log({level:"error",from:"eventTrailApiHelpers",type:"initialize",error:(0,i().convertErrorToLog)(a)})}}async function C(e){const{traits:t,traitsWithOperations:o}=e,i=new(await async function(){const{Identify:e}=await n.e(89920).then(n.bind(n,939302));return e}());if(t)for(const n of Object.keys(t)){const e=t[n];void 0!==e&&(Array.isArray(e)?i.append(n,e):i.set(n,e))}if(o)for(const n of o)"set"===n.operation?i.set(n.name,n.value):"setOnce"===n.operation&&i.setOnce(n.name,n.value);return i}async function T(e,t,n){if(k(e))return;const o=t.getUserProperties(),i=await n.track({event_type:e,event_properties:o,version_name:g}).promise;200!==i.code&&x({eventName:e,eventProperties:o,groupProperties:void 0,statusCode:i.code,message:i.message})}async function M(e){const{userId:t,traits:n,spaceIds:i}=e,a=await I.getInstance();if(!a)return;a.setUserId((0,r().S2)(t));const s=await C({traits:n});return i&&s.set("workspace",o().sb(i)),T("$identify_user",s,a)}async function P(e){const{traits:t}=e,n=await I.getInstance();if(!n)return;return T("$identify_device",await C({traitsWithOperations:t}),n)}async function B(){const e=await I.getInstance();null==e||e.setUserId(void 0)}async function R(e){if(k("$group_identify"))return;const{spaceId:t,spaceData:n}=e;if(!t)return;const i=await I.getInstance();if(!i)return;const r=o().o8(n),a=Object.entries(r).filter((e=>{let[t,n]=e;return Array.isArray(n)}));a.forEach((e=>{let[t,n]=e;return delete r[t]}));let s=await C({traits:r});a.forEach((e=>{let[t,n]=e;return s=s.set(t,n)})),i.groupIdentify("workspace",t,s)}async function E(e){const t=await I.getInstance();t&&t.setDeviceId((0,r().S2)(e))}async function D(e){if(k(e.eventName))return;const{eventName:t,eventData:n,spaceId:o}=e,i=await I.getInstance();if(!i)return;const r=o?{workspace:o}:void 0,a=await i.track({event_type:t,event_properties:n,groups:r,version_name:g}).promise;200!==a.code&&x({eventName:t,eventProperties:n,groupProperties:r,statusCode:a.code,message:a.message})}},895007:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(908521),s=()=>n(959013),l=()=>n(494043),c=()=>n(891078),d=n(474848);const u=(0,s().YK)({placeholder:{defaultMessage:"Heading 1",id:"header1Block.placeholder"}});function p(e,t){const p=(0,s().tz)(),m=(0,i().v3)(),g=(0,i().Y0)(),f=(0,o.useRef)(null),v=(0,c().pW)(e.store,!0),h=(0,c().qu)(e.store),_=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),b=(0,r().K8)((()=>n(468484).A.isOpen(e.store.id)&&!e.hideContent),[e.hideContent,e.store.id]),y=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,n(857076).W)({device:g,overrideHeaderFontSizes:e.overrideHeaderFontSizes}),w=(0,n(401497).IS)((e=>{const t=S.header*a().Df;return{root:{display:"flex",width:"100%",...v},toggle:{height:`${t}em`,marginTop:3},headerText:{...n(799954).nE,...(0,a().k)({fontSizes:S,fontFamily:h})},headerTextPlaceholder:{...y?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:e.headerBlockPlaceholderTextColor}}}}),[S,v,h,y]),k=(0,r().K8)((()=>l().PQ(e.store)),[e.store]),I=(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n(524702).A,{tagName:"h2",disabled:e.disabled,store:_,placeholder:e.placeholder??p.formatMessage(u.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,d.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store,recursivelyLoadAllDiscussions:!b})]});return(0,c().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"header",getNode:()=>f.current,getBlockStore:()=>e.store,activate(){l().qj(m,e.store,e.hideContent)}})),[m,e.hideContent,e.store]),(0,d.jsx)("div",{ref:f,style:{...w.root,...e.style},children:k?(0,d.jsx)(n(60676).A,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const m=o.memo(o.forwardRef(p),n(821062).A)},895876:(e,t,n)=>{n.d(t,{$O:()=>g,X0:()=>h,_V:()=>m,eF:()=>_,oj:()=>f,uK:()=>v});n(296540);var o=()=>n(128914),i=()=>n(959013),r=()=>n(534177),a=()=>n(972435),s=()=>n(108944),l=()=>n(731320),c=()=>n(351360),d=()=>n(630116),u=n(474848);n(47966).Y,n(704654).E,n(112710).a;const p=(0,i().YK)({page:{defaultMessage:"Page",id:"dbTypesHelpers.singlePage.displayName"},tasks:{defaultMessage:"Task",id:"dbTypesHelpers.singleTask.displayName"},projects:{defaultMessage:"Project",id:"dbTypesHelpers.singleProject.displayName"}});p.page,p.tasks,p.projects;function m(e){return a().A.formatMessage((0,o().k6)(e))}function g(e,t){return a().A.formatMessage((0,o().PX)(e,t))}function f(e,t){return a().A.formatMessage((0,o().Kg)(e,t))}function v(e){var t;let{typedCollections:n,spaceStore:o,environment:i}=e;const a={},u={},p={},m={},g={},f=null===(t=c().default.state.currentUserStore)||void 0===t?void 0:t.id;for(const c of n){if(f){if("none"===(0,l().zt)({userId:f,store:c}).role){u[c.id]=c;continue}}const e=(0,s().Lf)(c);if(!e)continue;const t=h({collectionStore:c});switch(t){case"team":m[e.id]=[...m[e.id]||[],c],e instanceof d().h4&&(g[e.id]=e);break;case"private":a[c.id]=c;break;case"shared":p[c.id]=c;break;default:(0,r().HB)(t)}}return{privateDatabases:a,restrictedDatabases:u,sharedDatabases:p,teamDatabases:m,teamStores:g}}function h(e){let{collectionStore:t}=e;const n=(0,s().Lf)(t);return n&&n.canRead()?n instanceof d().h4?"team":n.isTopLevelPrivatePage()?"private":"shared":"shared"}function _(e,t){return(0,u.jsx)(i().sA,{...t,defaultMessage:"This property is required for {databaseType}.",id:"database.requiredPropertyExplanation",description:"Educate the users on why this property cannot be deleted.",values:{databaseType:m(e)}})}},896461:(e,t,n)=>{n.d(t,{W:()=>_});n(944114),n(898992),n(672577);var o=()=>n(594013),i=()=>n(921598),r=()=>n(970013),a=()=>n(651124),s=()=>n(183558),l=()=>n(534177),c=()=>n(896628),d=()=>n(246826),u=()=>n(682146),p=()=>n(405417),m=()=>n(972435),g=()=>n(519839),f=()=>n(312296);function v(e){var t;const{environment:n,collectionContextStore:o,collectionViewStore:i,collectionStore:a,newViewType:l,schema:c,transaction:d}=e,u=o.permissionScopesStore.state;switch(l){case"board":let e=(null===(t=i.getFormat().collection_group_by)||void 0===t?void 0:t.property)??g().In(c);if(a&&!e){e=(0,s().Ay)();const t=(0,r().D)("Status",m().A.getIntl());u.canConfigureCollection&&(0,f().F)({environment:n,collectionStore:a,update:{[e]:t},transaction:d})}return e;case"calendar":let o=g().zv(c);if(a&&!o){o=(0,s().Ay)();const e={name:m().A.formatMessage(h.dateName),type:"date"};u.canConfigureCollection&&(0,f().F)({environment:n,collectionStore:a,update:{[o]:e},transaction:d})}return o;case"timeline":let l=g().HG(c);if(a&&!l){l=(0,s().Ay)();const e={name:m().A.formatMessage(h.dateName),type:"date"};u.canConfigureCollection&&(0,f().F)({environment:n,collectionStore:a,update:{[l]:e},transaction:d})}return l;case"map":let p=g().oy(c);if(a&&!p){p=(0,s().Ay)();const e={name:"Location",type:"geo_point"};u.canConfigureCollection&&(0,f().F)({environment:n,collectionStore:a,update:{[p]:e},transaction:d})}return p}}const h=(0,n(959013).YK)({dateName:{defaultMessage:"Date",id:"database.collectionEditViewButtonPopup.dateNameProperty"}});function _(e){const{environment:t,collectionContextStore:n,collectionViewStore:s,collectionStore:m,oldViewType:g,newViewType:f="table",transaction:h}=e,_=n.normalizedSchemaStore.state,b=n.normalizedFormatStore.state,y=null==m?void 0:m.isSyncedCollection();switch(f){case"table":case"feed":d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"board":const e=s.getFormat().board_columns_by,a=v({environment:t,collectionContextStore:n,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h}),p=n.normalizedSchemaStore.state,g=a&&p[a];if(!a||!g||!(0,i().Eg)(g))break;c().zA({stores:[s],update:{board_columns_by:{...(0,i().V0)({property:a,propertySchema:g,isCollectionTypedView:"collectionTypedView"===n.contextType,hideEmptyGroups:!1}),disableBoardColorColumns:null==e?void 0:e.disableBoardColorColumns},collection_group_by:void 0},transaction:h}),d().zv({store:s.getQueryStore(),data:{aggregations:[{aggregator:"count",enforceMaxAggregationLimit:!0}]},transaction:h});break;case"calendar":const S=v({environment:t,collectionContextStore:n,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],calendar_by:S},transaction:h});break;case"gallery":c().zA({stores:[s],update:{gallery_cover:{type:"page_content"}},transaction:h}),d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"timeline":const w=v({environment:t,collectionContextStore:n,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],timeline_by:w},transaction:h});break;case"chart":if(!s.getFormat().chart_config){const e=(0,o().EZ)({collectionSchema:n.normalizedSchemaStore.state});c().zA({stores:[s],update:{chart_config:e,subitem_display_mode:"flattened"},transaction:h})}break;case"list":if(void 0===b.list_properties){const e=[{property:y?r().Ho:r().rn,visible:!0}],t=Object.keys(_).find((e=>{const t=_[e];return Boolean(t&&(0,u().hU)(t))}));void 0!==t&&e.push({property:t,visible:!0}),c().zA({stores:[s],update:{list_properties:e},transaction:h})}if(b.list_properties&&y){const e=b.list_properties.findIndex((e=>e.property===r().rn));if(-1!==e){const t=b.list_properties[e];b.list_properties[e]={...t,property:r().Ho},c().zA({stores:[s],update:{list_properties:b.list_properties},transaction:h})}}d().zv({store:s.getQueryStore(),data:{aggregations:[]},transaction:h});break;case"map":const k=v({environment:t,collectionContextStore:n,collectionViewStore:s,collectionStore:m,newViewType:f,schema:_,transaction:h});d().zv({store:s.getQueryStore(),data:{aggregations:[],map_by:k},transaction:h});break;case"chat":case"custom":break;default:(0,l().HB)(f)}const S=null==m?void 0:m.getFormat().subitem_property;if(S&&!(0,p().qS)(f)){const e=g&&!(0,p().qS)(f)?(0,a().u9)(g):void 0,t=(e?s.getFormat()[e]??[]:[]).find((e=>e.property===S))??{property:S,visible:!0},n=(0,a().u9)(f);if(n){const e=s.getFormat()[n]??[];c().zA({stores:[s],update:{[n]:[...e,t]},transaction:h})}}}},896628:(e,t,n)=>{n.d(t,{G8:()=>w,Jo:()=>k,PT:()=>y,TP:()=>f,_l:()=>g,aB:()=>_,fg:()=>v,lm:()=>h,vc:()=>b,yY:()=>S,zA:()=>m});var o=()=>n(700500),i=()=>n(522419),r=()=>n(763884),a=()=>n(496603),s=()=>n(720665),l=()=>n(492696),c=()=>n(267419),d=()=>n(351360),u=()=>n(630116),p=()=>n(246826);function m(e){const{stores:t,update:n,transaction:i}=e;for(const a of t){switch(a.table){case"block":case"collection":case"collection_view":case"layout":p().zv({store:a.getFormatStore(),data:(0,s().g_)(n),transaction:i})}a instanceof u().Bv&&a.getType()===o().xd.callout&&n.block_color&&r().K.set({userId:a.environment.currentUser.id,key:l().E,value:n.block_color})}}function g(e){const{environment:t,store:n,isLocked:o,transaction:i}=e,{id:r}=t.currentUser;if(!r)return;const a={block_locked:o,block_locked_by:r};p().zv({store:n.getFormatStore(),data:a,transaction:i})}function f(e){const{environment:t,store:n,alignment:o,transaction:i}=e,{id:r}=t.currentUser;if(!r)return;const a={block_alignment:o};p().zv({store:n.getFormatStore(),data:a,transaction:i})}function v(e){const{store:t,url:{originUrl:n,pastedSecureFile:o},position:r,transaction:a}=e,s=o?(0,i().xm)(o):n;m({stores:[t],update:{page_cover_position:r},transaction:a});const l=t.getCoverStore();l&&(p().KY({store:l,value:s,transaction:a}),o&&p().Bn({store:t,source:o.copiedSource,fileIds:[o.fileId],transaction:a}))}function h(e){const{store:t,url:n,transaction:o}=e;m({stores:[t],update:{social_media_image_preview_url:n},transaction:o})}function _(){const e=a().XM(["Activities","Objects","Travel & Places"]),t=c().A.state.emojiByCategory[e];return a().XM(t)}function b(e){const{store:t,transaction:n}=e,o=t.getIconStore();if(o){const e=_();p().KY({store:o,value:e,transaction:n})}}function y(e){const{store:t,transaction:n}=e,o=t.getCoverStore();o&&p().KY({store:o,value:null,transaction:n})}function S(e){const{store:t,coverPosition:n,transaction:o}=e;if(t.isCollectionView()){const e=t.getCollectionStore();if(e)return void p().zv({store:e.getFormatStore(),data:{collection_cover_position:n},transaction:o})}m({stores:[t],update:{page_cover_position:n},transaction:o})}function w(e){const{store:t,coverPosition:n,transaction:o}=e;m({stores:[t],update:{card_cover_position:n},transaction:o})}function k(e,t){var n;const o=(null===(n=d().default.state.currentUserSettingsStore)||void 0===n?void 0:n.getSettingsStore().getKeyStore("start_day_of_week").getValue())??0,i=null==e?void 0:e.getFormatStore().getKeyStore("start_week_on").getValue();let r=i;void 0===i&&(r=o),m({stores:[e],update:{start_week_on:r},transaction:t})}},897119:(e,t,n)=>{n.d(t,{bJ:()=>j,nl:()=>I().n,Ay:()=>q});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(628182),l=()=>n(751735),c=()=>n(100622),d=()=>n(496603),u=()=>n(720665),p=()=>n(962730),m=()=>n(397248),g=()=>n(700250);const{Top:f,Bottom:v,Left:h,Right:_}=p().W,{Start:b,Center:y}=p().C;function S(e){const{viewportAdditionalBottomPadding:t,originGap:o,viewportPadding:i}=e,r=(0,n(59728).A)();let a=i??12;o&&o>a&&(a=o+12);let s=m().fT(r,-a);0!==t&&(s=new(m().z8)(s.x,s.y,s.width,s.height-t)),w({...e,viewportRect:s})}function w(e){const{store:t,placementToOrigin:n,alignmentToOrigin:o,popupRect:i,originRect:r,viewportRect:a,repositionedPlacement:s,disableFlippingPlacement:l,popupRectBottomPadding:c}=e,d=k(i,r,n,o,c),u=Math.max(a.left-d.left,0)+Math.min(a.right-d.right,0),p=Math.max(a.top-d.top,0)+Math.min(a.bottom-d.bottom,0),b={offsetX:0,offsetY:0};if(!l)if(void 0!==s)b.repositionedPlacement=s;else{const t=n===h&&Math.abs(u)>0,s=n===_&&Math.abs(u)>0,l=n===f&&Math.abs(p)>0,c=n===v&&Math.abs(p)>0;if(t||s||l||c){const l=t||s,c=l?m().X6:m().JK,d=(0,g().W0)(n);if(c(a,k(i,r,d,o)))b.repositionedPlacement=d;else if(l){if(m().JK(a,k(i,r,v,o)))return w({...e,placementToOrigin:v,repositionedPlacement:v})}}}const y=void 0!==b.repositionedPlacement;if((!y||n!==h&&n!==_)&&(b.offsetX=Math.round(u)),(!y||n!==f&&n!==v)&&(b.offsetY=Math.round(p)),y)if(n===v){const e=r.top-i.height;a.y>e&&(b.offsetY=Math.round(a.y-e))}else if(n===f){const e=r.bottom+i.height;a.bottom<e&&(b.offsetY=Math.round(a.bottom-e))}t.setState({...t.state,...b})}function k(e,t,n,o,i){if(n===f||n===v){let r,a;return r=o===b?t.left:o===y?t.left+t.width/2-e.width/2:t.right-e.width,a=n===f?t.top-e.height:t.bottom,new DOMRect(r,a,e.width,e.height+(i??0))}let r,a;return r=o===b?t.top:o===y?t.top+t.height/2-e.height/2:t.bottom-e.height,a=n===h?t.left-e.width:t.right,new DOMRect(a,r,e.width,e.height+(i??0))}var I=()=>n(377586),x=()=>n(210737),A=()=>n(574012),C=n(474848);const T={[p().C.Start]:"flex-start",[p().C.Center]:"center",[p().C.End]:"flex-end"};const M=function(e){let{style:t,origin:n,placement:o,alignment:i,childrenWrapStyle:r,children:a}=e;return(0,C.jsxs)("div",{style:P(t),children:[n,(0,C.jsx)("div",{style:R(o,i),children:(0,C.jsx)("div",{style:E(o,i,r),children:a})})]})};function P(e){return{position:"relative",...e}}function B(e,t){let n,o,i,r,a,s;const l=u().pN(e)?p().W.Bottom:e,c=u().pN(t)?p().C.Center:t;return l===p().W.Top?(s="flex-end",o="100%",a=T[c]):l===p().W.Bottom?(s="flex-start",n="100%",a=T[c]):l===p().W.Left?(s=T[c],r="100%",a="flex-end"):l===p().W.Right?(s=T[c],i="100%",a="flex-start"):l===p().W.Center&&(s="center",a=T[c]),{alignItems:a,justifyContent:s,top:n,left:i,right:r,bottom:o}}function R(e,t){const{alignItems:n,justifyContent:o}=B(e,t);return{position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:o,alignItems:n}}function E(e,t,n){const{top:o,left:i,right:r,bottom:a}=B(e,t),s={position:"relative"};return o&&(s.top=o),a&&(s.bottom=a),i&&(s.left=i),r&&(s.right=r),{...s,...n}}var D=()=>n(145214),N=()=>n(645873);const L=(0,N()._h)(new(N().O2)("PopupBottomSheet",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(22900),n.e(49889),n.e(97727),n.e(85128),n.e(83700),n.e(95555),n.e(58823),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(87598),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(45620),n.e(58221),n.e(44763),n.e(8081),n.e(67183),n.e(64598),n.e(82720),n.e(4253),n.e(86787),n.e(77465),n.e(24593),n.e(80896),n.e(1440),n.e(67378),n.e(58504),n.e(97308),n.e(63996),n.e(20636),n.e(66268),n.e(55717),n.e(7005),n.e(40186),n.e(22585),n.e(73206),n.e(11037),n.e(33235),n.e(91957),n.e(84176),n.e(16357),n.e(75681)]).then(n.bind(n,501402)))),(e=>e.PopupBottomSheet));var O=()=>n(881839);const U=o.forwardRef((function(e,t){const a=(0,i().v3)(),s=(0,o.useRef)(!0),l=(0,r().uB)(e.store,g().Ay),c=(0,o.useRef)(null),u=(0,o.useRef)(null),p=(0,o.useRef)(null),m=(0,o.useRef)(void 0),f=(0,o.useRef)(!1),v=(0,o.useRef)(!1),h=(0,o.useRef)(e.open),_=(0,o.useRef)({hidesMobileNativeBottomBar:e.hidesMobileNativeBottomBar,popupType:e.popupType,preventSlideUpTransition:e.preventSlideUpTransition,disableMouseCapture:e.disableMouseCapture,onDismiss:e.onDismiss}),[b,y,w]=(0,r().K8)((()=>{const t=l.state;return[t.repositionedPlacement,t.open,oe(t,e.placementToOrigin)]}),[l,e.placementToOrigin]),k=(0,n(396182).I)(),I=(0,o.useCallback)((()=>{if(e.originRect)l.setState({...l.state,originRect:e.originRect});else if(v.current){const e=K(p.current);if(e&&e instanceof Element){const t=e.getBoundingClientRect();l.setState({...l.state,originRect:t})}}}),[l,e.originRect]),T=(0,o.useCallback)((()=>{if(!c.current)return;const{originRect:t}=l.state,n=new DOMRect(c.current.offsetLeft,c.current.offsetTop,c.current.offsetWidth,c.current.offsetHeight);e.open&&t&&(e.forceInitialInbound||n.height>0)&&S({store:l,placementToOrigin:$(e.placementToOrigin),alignmentToOrigin:Y(e.alignmentToOrigin),originRect:t,popupRect:n,repositionedPlacement:l.state.repositionedPlacement,disableFlippingPlacement:e.disableFlippingPlacement??!1,popupRectBottomPadding:e.popupRectBottomPadding,viewportAdditionalBottomPadding:A().A.keyboardHeight(),originGap:e.originGap,viewportPadding:e.viewportPadding})}),[l,e.open,e.forceInitialInbound,e.placementToOrigin,e.alignmentToOrigin,e.disableFlippingPlacement,e.popupRectBottomPadding,e.originGap,e.viewportPadding]),P=(0,o.useCallback)((()=>{f.current||T()}),[T]),B=(0,o.useMemo)((()=>d().nF(P,10)),[P]),R=(0,o.useCallback)((t=>{c.current=t,t?(m.current||e.disableMutationObserver||(m.current=new MutationObserver(B),m.current.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),T()):m.current&&(m.current.disconnect(),m.current=void 0)}),[B,T,e.disableMutationObserver]),E=(0,o.useCallback)((()=>{f.current=!0}),[]),{onClosed:N,onAnimationEnd:U}=e,V=(0,o.useCallback)((()=>{f.current=!1,e.open||(G(l),null==N||N()),U&&U(),T(),te(a,e.open)}),[e.open,N,U,T,a,l]),[j,z]=(0,o.useMemo)((()=>{const t=()=>{e.open&&(I(),T())};return[()=>{setTimeout(t,10)},d().sg(t,10)]}),[T,I,e.open]),H=(0,o.useMemo)((()=>d().sg((()=>k("Popup","Popup/handleEstimatedKeyboardWebViewOverlapChangeDebounced")),10)),[k]);(0,o.useImperativeHandle)(t,(()=>K(p.current))),(0,o.useEffect)((()=>{_.current={hidesMobileNativeBottomBar:e.hidesMobileNativeBottomBar,popupType:e.popupType,preventSlideUpTransition:e.preventSlideUpTransition,disableMouseCapture:e.disableMouseCapture,onDismiss:e.onDismiss}}),[e.hidesMobileNativeBottomBar,e.popupType,e.preventSlideUpTransition,e.disableMouseCapture,e.onDismiss]),(0,o.useEffect)((()=>{const t=!h.current&&e.open,n=h.current&&!e.open;t&&!Q(e.popupType)&&I(),e.preventPointerEvents||(t&&(x().A.state.openPopups.add(_),x().A.emit()),n&&(x().A.state.openPopups.delete(_),x().A.emit()))}),[I,e.disableMouseCapture,e.hidesMobileNativeBottomBar,e.onDismiss,e.open,e.popupType,e.preventPointerEvents,e.preventSlideUpTransition]),(0,o.useEffect)((()=>{e.open&&!l.state.open&&l.setState({...l.state,open:!0})}),[e.open,l]),(0,n(852507).l)((()=>{v.current=!0})),(0,o.useEffect)((()=>{s.current&&e.open&&(Q(e.popupType)||I(),l.setState({...l.state,open:!0}),x().A.state.openPopups.add(_),x().A.emit()),s.current=!1})),(0,o.useEffect)((()=>{var t,n,o,i;t=e.popupType,n=e.preventScaleTransition,o=e.preventOpacityTransition,i=e.preventSlideUpTransition,(!Q(t)&&n&&o||Q(t)&&i)&&(!e.open&&l.state.open&&G(l),h.current&&te(a,e.open))}),[a,e.open,e.popupType,e.preventScaleTransition,e.preventOpacityTransition,e.preventSlideUpTransition,l]);const{forceRemeasureStore:W,enableOutsideClickDismiss:q,onDismiss:se}=e;return(0,o.useEffect)((()=>{if(!e.open)return;a.device.isMobile?A().A.addListener(H):window.addEventListener("resize",z);const t=t=>{if(!e.open||!q)return;const n=u.current,o=t.target;n&&o&&(n===o||n.contains(o)||null==se||se(t))};return window.addEventListener("click",t),window.addEventListener("contextmenu",t),null==W||W.addListener(j),()=>{A().A.removeListener(H),window.removeEventListener("resize",z),window.removeEventListener("click",t),window.removeEventListener("contextmenu",t),null==W||W.removeListener(j)}}),[a.device.isMobile,q,se,e.open,W,b,j,H,z]),(0,n(118884).X)((()=>{e.preventPointerEvents||(x().A.state.openPopups.delete(_),x().A.emit())})),(0,o.useEffect)((()=>{e.originRect&&l.setState({...l.state,originRect:e.originRect})}),[e.originRect,l]),(0,o.useEffect)((()=>{h.current=e.open}),[e.open]),(0,C.jsx)(n(700180).A,{capture:Boolean(e.open&&e.disableContentScroll),preventType:n(756279).A.All,children:(0,C.jsx)(n(177158).A,{open:y,trapFocus:e.trapFocus,origin:function(){if(e.origin)return(0,C.jsx)("div",{ref:p,style:{display:"contents"},"data-popup-origin":"true",className:a.device.isIOS?n(38337).GpG:void 0,children:e.suppressOriginContext?e.origin:(0,C.jsx)(n(240260).k.Provider,{value:{open:e.open},children:e.origin})})}(),useCompositeLayer:a.device.isMobile,overlayContainerStore:e.overlayContainerStore,zIndex:e.overlayContainerZIndex,children:(0,C.jsx)(n(888789).kl.Provider,{value:Z(e.popupType)?{}:void 0,children:Q(e.popupType)?(0,C.jsx)(ae,{...e,handleAnimatedAnimationStart:E,handleAnimatedAnimationEnd:V}):Z(e.popupType)?(0,C.jsx)(L,{...e,initialState:e.bottomSheetInitialState??"full"}):function(){if(e.hideInsteadOfFlip&&void 0!==l.state.repositionedPlacement)return null;const t=Y(e.alignmentToOrigin);return(0,C.jsx)(O().L,{keepFocus:e.keepFocus,preventCaptureEsc:e.preventCaptureEsc,onDismiss:e.onDismiss,children:n=>(0,C.jsxs)("div",{...n,ref:u,children:[e.open&&!e.disableMouseCapture&&(0,C.jsx)("div",{className:e.className,style:ie(a,e.popupType,e.disableDarkOverlayBackground),onClick:t=>ne(t,e.onDismiss),onContextMenu:e.onDismiss,"aria-hidden":!0,tabIndex:-1}),(0,C.jsx)(M,{style:X(l,e.enableRounding,e.alignBoxStyle),origin:(0,C.jsx)("div",{style:J(l)}),placement:w,alignment:t,childrenWrapStyle:{pointerEvents:e.open&&!e.preventPointerEvents?"auto":"none"},children:(0,C.jsx)(D().A,{tag:F,visible:e.open,animate:ee(!0,e.preventScaleTransition,e.preventOpacityTransition),initial:re(e.popupType,e.preventOpacityTransition,e.preventScaleTransition),exit:re(e.popupType,e.preventOpacityTransition,e.preventScaleTransition),onAnimationStart:E,onAnimationEnd:V,...e,popupStore:l,handlePopupMount:R,style:void 0,popupStyle:e.style})})]})})}()})})})})),F=o.forwardRef((function(e,t){const n=(0,i().v3)(),o=(0,a().DP)(),s=(0,r().K8)((()=>function(e,t,n,o,i){const{offsetX:r,offsetY:a}=e.state,s=oe(e.state,t),l=Y(n),c=V[l],d=V[l];let u={display:"flex",alignItems:"center",position:"relative"};const m=o||0;s===p().W.Top?(u.flexDirection="column",u.transformOrigin=`${c} bottom`,u.left=r,u.bottom=m-a):s===p().W.Bottom?(u.flexDirection="column-reverse",u.transformOrigin=`${c} top`,u.left=r,u.top=m+a):s===p().W.Left?(u.flexDirection="row",u.transformOrigin=`right ${d}`,u.right=m-r,u.top=a):s===p().W.Right&&(u.flexDirection="row-reverse",u.transformOrigin=`left ${d}`,u.left=m+r,u.top=a);i&&(u={...u,...i});return u}(e.popupStore,e.placementToOrigin,e.alignmentToOrigin,e.originGap,e.style)),[e.popupStore,e.placementToOrigin,e.alignmentToOrigin,e.originGap,e.style]),l=(0,r().K8)((()=>function(e,t,n,o,i,r,a,s,l){const{device:c}=e,d={borderRadius:o||10,background:i?t.popoverWaxPaperBackground:t.popoverBackground,backdropFilter:i?"blur(20px)":"none",WebkitBackdropFilter:i?"blur(20px)":"none",position:"relative",maxWidth:"calc(100vw - 24px)",boxShadow:r?t.shadowSM:t.shadowMD,overflow:"hidden"},{originRect:u}=n.state;a&&u&&(d.width=Math.round(u.width));s&&c.isMobile&&(d.minWidth=d.maxWidth);return{...d,...l}}(n,o,e.popupStore,e.borderRadius,e.isWaxPaper,e.useLightBoxShadow,e.sameWidthAsOrigin,e.isFullWidthOnMobile,e.popupStyle)),[n,o,e.popupStore,e.borderRadius,e.isWaxPaper,e.useLightBoxShadow,e.sameWidthAsOrigin,e.isFullWidthOnMobile,e.popupStyle]),{render:c}=e,d=(0,r().K8)((()=>c()),[c]);return(0,C.jsx)("div",{style:s,ref:t,children:(0,C.jsx)("div",{role:"dialog",className:e.popupClassName,"aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,"aria-modal":!!e.trapFocus||void 0,style:{...l,...e.popupWrapStyle},ref:e.handlePopupMount,children:d})})})),V={[p().C.Start]:"0%",[p().C.Center]:"50%",[p().C.End]:"100%"},j=414,z=.96,H=60,W=20,q=U;function K(e){const t=null==e?void 0:e.firstElementChild;return null!=t&&t.getAttribute("data-popup-origin")?K(t):t??null}function G(e){e.setState({...e.state,open:!1,repositionedPlacement:void 0})}function $(e){return u().pN(e)?p().W.Bottom:e}function Y(e){return u().pN(e)?p().C.Start:e}function Q(e){return e===I().n.SlideUp}function Z(e){return e===I().n.BottomSheet}function X(e,t,n){const{originRect:o}=e.state;return o&&m().Lq(o)?{position:"fixed",left:t?Math.round(o.left):o.left,top:t?Math.round(o.top):o.top,pointerEvents:"none",...n??{}}:{}}function J(e){const t={},{originRect:n}=e.state;return n&&(t.width=Math.round(n.width),t.height=Math.round(n.height)),t}function ee(e,t,n){const o={};return t||(o.scaleX=e?1:z,o.scaleY=e?1:z),n||(o.opacity=e?1:0),o}function te(e,t){var n;t&&(null===(n=e.mobileNative)||void 0===n||n.markTransitionReady({type:"modal"}))}function ne(e,t){t&&t(e)}function oe(e,t){return void 0!==e.repositionedPlacement?e.repositionedPlacement:$(t)}function ie(e,t,n){const{ThemeStore:o}=e,i=o.state.mode;let r;return Q(t)?(r={position:"absolute",top:0,left:0,bottom:0,right:0},n||(r.background=(0,l().X4)(c().CM[i].black,.6))):r={position:"fixed",top:0,left:0,width:"100vw",height:"100vh"},r}function re(e,t,n){const o={};return t||(o.opacity=0),n||Q(e)||(o.scaleX=z,o.scaleY=z),o}function ae(e){const t=(0,i().v3)(),n=(0,a().DP)(),{open:l,className:c,render:d}=e,{animationStyle:u,enterAnimationStyle:p,exitAnimationStyle:m}={animationStyle:{translateY:"0vh"},enterAnimationStyle:{translateY:"100vh"},exitAnimationStyle:{translateY:"100vh"}},g=(0,r().K8)((()=>ie(t,e.popupType,e.disableDarkOverlayBackground)),[t,e.popupType,e.disableDarkOverlayBackground]),f=(0,o.useMemo)((()=>({position:"absolute",top:0,left:0,width:"100vw",height:"var(--full-viewport-height)",overflow:"hidden",pointerEvents:void 0!==l?"auto":"none",...e.slideUpWrapStyle})),[l,e.slideUpWrapStyle]),v=(0,r().K8)((()=>function(e,t,n,o,i,r){const{WindowSizeStore:a,device:l}=e,{isTablet:c}=l,d=a.isPortrait(),u=A().A.keyboardHeight(),p=u+W;return{position:"absolute",bottom:u,left:0,right:0,background:t.popoverBackground,boxShadow:t.shadowMD,...i,width:"100%",maxHeight:`calc(var(--full-viewport-height) - ${u}px)`,...c&&!n&&{maxWidth:j,overflow:"hidden",marginLeft:"auto",marginRight:"auto",borderRadius:r||12,WebkitMaskImage:"-webkit-radial-gradient(white, black)",...!d&&{top:a.getSafePaddingTopCSS(s().s1),bottom:p,...o&&{maxWidth:"60vw"}},...d&&{top:0,bottom:p,maxHeight:`${H}vh`,marginTop:"auto",marginBottom:"auto",...o&&{maxWidth:"calc(100vw - 192px)"}}},...n&&{height:"100%"}}}(t,n,e.forceFullScreenSlideUp,e.isWideTabletWidth,e.style,e.borderRadius)),[t,n,e.forceFullScreenSlideUp,e.isWideTabletWidth,e.style,e.borderRadius]),h=(0,o.useCallback)((t=>ne(t,e.onDismiss)),[e.onDismiss]);return(0,C.jsx)(O().L,{keepFocus:e.keepFocus,preventCaptureEsc:e.preventCaptureEsc,onDismiss:e.onDismiss,children:t=>(0,C.jsxs)("div",{...t,style:f,children:[(0,C.jsx)(D().A,{visible:l,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},onAnimationStart:e.handleAnimatedAnimationStart,onAnimationEnd:e.handleAnimatedAnimationEnd,forceCompositeLayer:!0,style:g,onClick:h,"aria-hidden":!0,tabIndex:-1}),(0,C.jsx)(D().A,{visible:l,animate:u,initial:e.preventSlideUpTransition?u:p,exit:e.preventSlideUpTransition?u:m,forceCompositeLayer:!0,className:c,role:"dialog","aria-label":e.ariaLabel,"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy,"aria-modal":!!e.trapFocus||void 0,style:v,children:d()})]})})}},898286:(e,t,n)=>{n.d(t,{U:()=>l,V:()=>c});var o=()=>n(695625),i=()=>n(351360),r=()=>n(630116),a=()=>n(270710),s=()=>n(778417);function l(e){const{currentSpaceViewStore:t}=i().default.state;if(t){const n=r().Bv.createChildStore(t,e.blockStore.pointer);a().A.setState({...a().A.state,originRect:e.originRect||o().T.getRectFromStore(e.blockStore),clonedBlockStore:n,originalBlockStore:e.blockStore,renderDelete:e.renderDelete})}}function c(e){a().A.reset(),s().IU({environment:e})}},898486:(e,t,n)=>{n.d(t,{$c:()=>te,A:()=>ae,DX:()=>ne,Ep:()=>u,Hu:()=>oe,K$:()=>g,Ou:()=>T,YT:()=>v,Yu:()=>ie,_j:()=>c,k1:()=>w,mW:()=>d,qh:()=>a,t4:()=>re,yC:()=>m});var o=()=>n(416845),i=()=>n(959013),r=()=>n(534177);const a=(0,i().YK)({public_access_not_allowed:{id:"transactionErrors.publicAccessNotAllowed.message",defaultMessage:"This workspace does not allow pages with public access."},public_access_not_allowed_in_team:{id:"transactionErrors.publicAccessNotAllowedInTeam.message",defaultMessage:"This teamspace does not allow pages with public access."},public_permission_item_invalid_role:{id:"transactionErrors.publicPermissionItemInvalidRole.message",defaultMessage:"Invalid role for public permission item."},block_permissions_max_size:{id:"transactionErrors.blockPermissionsMaxSize.message",defaultMessage:"You have exceeded the maximum permissions per page."},guests_over_limit:{id:"transactionErrors.guestsoverLimit.message",defaultMessage:"This workspace has reached the maximum number of guests (5)."},guests_not_allowed:{id:"transactionErrors.guestsNotAllowed.message",defaultMessage:"This workspace doesn't allow guests."},team_level_guests_not_allowed:{id:"transactionErrors.teamLevelGuestsNotAllowed.message",defaultMessage:"This teamspace does not allow guests."},guest_invite_request_required:{id:"transactionError.guestInviteRequestRequired.message",defaultMessage:"Guests can only be invited by request"},workspace_top_level_operation_not_allowed:{id:"transactionErrors.workspaceTopLevelOperationNotAllowed.message",defaultMessage:"This workspace has locked modifying the workspace section of the sidebar."},team_page_edit_operation_not_allowed:{id:"transactionErrors.teamPageEditOperationNotAllowed.message",defaultMessage:"Sorry, you cannot add or remove pages to this teamspace."},team_top_level_page_mismatch:{id:"transactionErrors.teamTopLevelPageMismatch.message",defaultMessage:"This page has fallen out of sync with its teamspace."},blocks_inside_themselves_not_allowed:{id:"transactionErrors.blocksInsideThemselvesNotAllowed.message",defaultMessage:"Oops! Blocks cannot be moved inside of themselves."},moving_pages_to_other_workspaces_not_allowed:{id:"transactionErrors.movingPagesToOtherWorkspacesNotAllowed.message",defaultMessage:"This workspace has disabled moving pages to other workspaces."},space_domain_not_available:{id:"transactionErrors.spaceDomainNotAvailable.message",defaultMessage:"Sorry, this domain is not available."},space_education_email_domain_not_allowed:{id:"transactionErrors.spaceEducationalEmailDomainNotAllowed.message",defaultMessage:"Sorry, education domains are not allowed: {domain}"},space_email_domain_not_allowed:{id:"transactionErrors.spaceEmailDomainNotAllowed.message",defaultMessage:"Sorry, this domain is not allowed: {domain}"},space_allowed_email_domain_matches_no_members:{id:"transactionErrors.spaceAllowedEmailDomainMatchesNoMembers.message",defaultMessage:"Allowed email domain must match at least one member."},comment_only_access_cant_move_page:{id:"transactionErrors.commentOnlyAccessCantMovePage.message",defaultMessage:"Sorry, you cannot move this page because you only have Comment-Only access."},search_engine_indexing_not_allowed:{id:"transactionErrors.searchEngineIndexingNotAllowed.message",defaultMessage:"This workspace does not allow public pages to be search indexed."},block_content_max_size:{id:"transactionErrors.blockContentMaxSize.message",defaultMessage:"You have exceeded the maximum contents per page."},block_properties_max_size:{id:"transactionErrors.blockPropertiesMaxSize.message",defaultMessage:"You have exceeded the maximum properties size per page."},activity_edits_max_size:{id:"transactionErrors.activityEditsMaxSize.message",defaultMessage:"You have exceeded the maximum edits per page."},cannot_archive_only_default_team:{id:"transactionErrors.cannotArchiveOnlyDefaultTeam.message",defaultMessage:"Can’t archive this teamspace because it is the only default teamspace in this workspace."},cannot_join_closed_team:{id:"transactionErrors.cannotJoinClosedTeam.message",defaultMessage:"Can’t join a closed teamspace. Contact the teamspace’s owner to be invited."},cannot_join_private_team:{id:"transactionErrors.cannotJoinPrivateTeam.message",defaultMessage:"Can’t join a private teamspace. Contact the teamspace’s owner to be invited."},cannot_join_as_team_guest_if_space_member:{id:"transactionErrors.cannotJoinAsTeamGuestIfSpaceMember.message",defaultMessage:"Can’t join a team as a teamspace guest if you are a member of the space."},team_name_empty:{id:"transactionErrors.teamNameEmpty.message",defaultMessage:"Teamspace name can’t be empty."},team_name_too_long:{id:"transactionErrors.teamNameTooLong.message",defaultMessage:"Teamspace name must be under {maxTeamNameLength} characters."},team_description_too_long:{id:"transactionErrors.teamDescriptionTooLong.message",defaultMessage:"Teamspace description must be under {maxTeamDescriptionLength} characters."},at_least_one_default_team:{id:"transactionErrors.atLeastOneDefaultTeam.message",defaultMessage:"There needs to be at least one default teamspace in your workspace."},at_least_one_admin_in_workspace:{id:"transactionErrors.atLeastOneAdminInWorkspace.message",defaultMessage:"There needs to be at least one admin in your workspace."},cant_add_new_members_from_this_jurisdiction:{id:"transactionErrors.cantAddNewMembersFromThisJurisdiction",defaultMessage:"We are currently not allowing customers to add new members from this jurisdiction."},cannot_invite_space_guests_as_team_owners_or_members:{id:"transactionErrors.cannotInviteGuestsToTeam",defaultMessage:"Can’t invite people who are not members of this workspace to this teamspace."},cannot_invite_guests_by_non_admin_and_non_team_owner:{id:"transactionErrors.cannotInviteGuestsByNonAdminAndNonTeamOwner",defaultMessage:"Only teamspace owners who are also workspace (membership) admin can invite people as teamspace guests."},non_owners_cannot_set_is_default:{id:"transactionErrors.nonOwnersCannotSetIsDefault",defaultMessage:"Only teamspace owners can set the default status on a teamspace."},database_syncs_over_limit:{id:"transactionErrors.databaseSyncsOverLimit",defaultMessage:"You have hit your Synced Database limit."},no_permission_to_move:{id:"transactionErrors.noPermissionToMove",defaultMessage:"You don‘t have access to move this page to the desired location."},duplicate_guest_membership_request:{id:"transactionErrors.duplicateGuestMembershipRequest",defaultMessage:"You have already submitted a membership request."},guest_membership_request_setting_off:{id:"transactionErrors.guestMembershipRequestOff",defaultMessage:"Guest membership requests have been turned off for this workspace."},external_membership_request_setting_off:{id:"transactionErrors.externalMembershipRequestOff",defaultMessage:"External membership requests have been turned off for this workspace."},corrupt_collection_property:{id:"transactionErrors.corruptCollectionProperty",defaultMessage:"Your property change can not be saved because it causes corruption to the metadata."},duplicate_auto_increment_id_property:{id:"transactionErrors.duplicateAutoIncrementIdProperty",defaultMessage:"A database can only have one ID property"},convert_to_auto_increment_id_property:{id:"transactionErrors.convertToAutoIncrementIdProperty",defaultMessage:"Other properties can not be converted to an ID property"},convert_from_auto_increment_id_property:{id:"transactionErrors.convertFromAutoIncrementIdProperty",defaultMessage:"The ID property can not be converted to any other property"},wiki_forbidden_auto_increment_id_property:{id:"transactionErrors.wikiForbiddenAutoIncrementIdProperty",defaultMessage:"A wiki cannot have an ID property"},synced_database_forbidden_auto_increment_id_property:{id:"transactionErrors.syncedDatabaseForbiddenAutoIncrementIdProperty",defaultMessage:"A synced database cannot have an ID property"},cannot_invite_space_members_as_team_guests:{id:"transactionErrors.cannotInviteSpaceMembersAsTeamGuests",defaultMessage:"Can't invite workspace members as teamspace guests."},cannot_invite_team_guests_if_space_disable_team_guests:{id:"transactionErrors.cannotInviteTeamGuestsIfSpaceDisableTeamGuests",defaultMessage:"Can’t invite teamspace guests if the space setting is disabled."},cannot_invite_team_guests_with_matching_email_domains:{id:"transactionErrors.cannotInviteTeamGuestsWithMatchingEmailDomains",defaultMessage:"Can't invite teamspace guests whose emails match space allowed domain."},cannot_delete_wiki_owner_property:{id:"transactionErrors.cannotDeleteWikiOwnerProperty",defaultMessage:"Owner property can not be deleted from wiki."},missing_wiki_owner_property:{id:"transactionErrors.missingWikiOwnerProperty",defaultMessage:"Wiki is missing owner property."},cannot_delete_sprints_status_property_schema:{id:"transactionErrors.cannotDeleteSprintsStatusPropertySchema",defaultMessage:"Status property cannot be deleted from Sprints schema."},cannot_mutate_sprints_status_property_schema:{id:"transactionErrors.cannotMutateSprintsStatusPropertySchema",defaultMessage:"Sprint status property schema cannot be modified."},formula_property_invalid:{id:"transactionErrors.formulaPropertyInvalid",defaultMessage:"Formula property is invalid."},cannot_delete_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be deleted."},cannot_delete_typed_collection_required_property:{id:"transactionErrors.cannotDeleteTypedCollectionRequiredProperty",defaultMessage:"This property can not be deleted from a typed collection."},cannot_edit_typed_property_type:{id:"transactionErrors.cannotEditTypedPropertyType",defaultMessage:"This property cannot change its type."},cannot_edit_typed_property_relation:{id:"transactionErrors.cannotEditTypedPropertyRelation",defaultMessage:"This property cannot change its relation."},cannot_edit_typed_property_rollup:{id:"transactionErrors.cannotEditTypedPropertyRollup",defaultMessage:"This property cannot change its rollup."},cannot_mutate_tasks_current_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksCurrentSprintPropertyFilter",defaultMessage:"Tasks current sprint view has a current sprint status property filter that cannot be modified."},ai_inference_prompt_exceeds_max_length:{id:"transactionErrors.aiInferencePromptExceedsMaxLength",defaultMessage:"AI property prompt is too long."},ai_inference_schema_invalid:{id:"transactionErrors.aiInference.invalid",defaultMessage:"AI property is invalid."},cannot_delete_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotDeleteTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be deleted."},cannot_mutate_tasks_backlog_empty_sprint_property_filter:{id:"transactionErrors.cannotMutateTasksBacklogEmptySprintPropertyFilter",defaultMessage:"Tasks backlog sprint view has an empty sprint status property filter that cannot be mutated."},cannot_edit_pages_in_trash:{id:"transactionErrors.cannotEditPagesInTrash",defaultMessage:"Pages in trash cannot be edited."},cannot_create_empty_page_layout:{id:"transactionErrors.cannot_create_empty_page_layout",defaultMessage:"Cannot create an empty layout for a page."},empty_person_profile_page_main_layout:{id:"transactionErrors.empty_person_profile_page_main_layout",defaultMessage:"Cannot remove all modules from the person profile page main layout."},cannot_remove_undeletable_module:{id:"transactionErrors.cannot_remove_undeletable_module",defaultMessage:"Cannot remove an undeletable module."},discontinued_module:{id:"transactionErrors.discontinued_module",defaultMessage:"Cannot use discontinued modules"},duplicate_module:{id:"transactionErrors.duplicate_module",defaultMessage:"Cannot create additional title modules."},cannot_move_unmoveable_module:{id:"transactionErrors.cannot_move_unmoveable_module",defaultMessage:"Cannot move an unmoveable object."},unallowed_module_in_area:{id:"transactionErrors.unallowed_module_in_area",defaultMessage:"Module not allowed in area."},cannot_delete_page_layout:{id:"transactionErrors.cannot_delete_page_layout",defaultMessage:"Cannot delete page layout."},cannot_have_multiple_views_main_modules:{id:"transactionErrors.cannot_have_multiple_views_main_modules",defaultMessage:"Cannot have multiple tab module structures"},invalid_nested_forms_module:{id:"transactionErrors.invalid_nested_forms_module",defaultMessage:"Invalid conditional group or module"},views_main_module_not_last:{id:"transactionErrors.views_main_module_not_last",defaultMessage:"Tabs must be at the bottom of the page layout"},missing_views_main_content_tab:{id:"transactionErrors.missing_views_main_content_tab",defaultMessage:"Tabbed layout must include a content tab"},multiple_views_main_content_tabs:{id:"transactionErrors.multiple_views_main_content_tabs",defaultMessage:"Tabbed layout may not have multiple content tabs"},editor_and_views_main_module_in_same_area:{id:"transactionErrors.editor_and_views_main_module_in_same_area",defaultMessage:"Editor and tabs structure module cannot be in the same area"},tabs_structure_must_contain_editor:{id:"transactionErrors.tabs_structure_must_contain_editor",defaultMessage:"Tabs structure must contain an editor"},space_allowed_email_domain_cannot_be_trusted_domain:{id:"transactionErrors.space_allowed_email_domain_cannot_be_trusted_domain",defaultMessage:"Allowed email domain cannot be a shared email domain."},collection_sharing_enabled_relation_exceeds_count:{id:"transactionErrors.collection_sharing_enabled_relation_exceeds_count",defaultMessage:"Databases can have, at most, one sharing enabled relation."},collection_sharing_enabled_relation_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_wiki_collection",defaultMessage:"Cannot create a sharing enabled relation in a wiki database."},collection_sharing_enabled_relation_invalid_target_collection:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection",defaultMessage:"Sharing enabled relation points to an invalid database."},collection_sharing_enabled_relation_invalid_space:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_space",defaultMessage:"Cannot create a sharing enabled relation that points to a database in a different space"},collection_sharing_enabled_relation_two_way_unsupported:{id:"transactionErrors.collection_sharing_enabled_relation_two_way_unsupported",defaultMessage:"A sharing enabled relation's target database cannot have a relation back to this database."},collection_sharing_enabled_relation_invalid_limit:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_limit",defaultMessage:"A sharing enabled relation must have a limit of 1."},collection_sharing_enabled_relation_invalid_target_collection_subitems:{id:"transactionErrors.collection_sharing_enabled_relation_invalid_target_collection_subitems",defaultMessage:"A sharing enabled relation's target database cannot have subitems"},collection_sharing_enabled_relation_cycle:{id:"transactionErrors.collection_sharing_enabled_relation_cycle",defaultMessage:"A sharing enabled relation cannot form a cycle"},collection_schema_too_large:{id:"transactionErrors.collection_schema_too_large",defaultMessage:"You have exceeded the maximum schema size. Please delete some properties and try again."},collection_sharing_enabled_relation_target_invalid_wiki_collection:{id:"transactionErrors.collection_sharing_enabled_relation_target_invalid_wiki_collection",defaultMessage:"A database cannot be a wiki if it is the target of a sharing enabled relation"},collection_invalid_property_deletion:{id:"transactionErrors.collection_invalid_property_deletion",defaultMessage:"A property cannot be deleted without being moved to the deleted schema."},collection_invalid_title_property_deletion:{id:"transactionErrors.collection_invalid_title_property_deletion",defaultMessage:"Title property cannot be deleted from a database."},form_embed_alias_mismatched_space:{id:"transactionErrors.form_embed_alias_mismatched_space",defaultMessage:"Form embed target must be in the same space as embed block"}}),s=(0,i().YK)({email_domain_already_configured:{id:"samlErrors.emailDomainAlreadyConfigured.message",defaultMessage:"Email domain is already configured for SAML on existing workspace."},email_domain_workspace_creation_is_education_domain:{id:"samlErrors.emailDomainWorkspaceCreationIsEducationDomain.message",defaultMessage:"Cannot prevent creation of workspaces based on an education email domain."},could_not_parse_idp_metadata_xml:{id:"samlErrors.couldNotParseIdentityProviderMetadataXML.message",defaultMessage:"Could not parse IDP metadata XML."},invalid_idp_url:{id:"samlErrors.invalidIDPURL.message",defaultMessage:"The IDP metadata URL is an invalid URL."},saml_sso_required:{id:"samlErrors.samlRequired.message",defaultMessage:"You must use SAML SSO to log in to Notion"},could_not_parse_idp_metadata:{id:"samlErrors.couldNotParseIdpMetadata.message",defaultMessage:"Could not parse SAML IDP metadata. Please check that your IDP metadata is correct."},could_not_download_idp_metadata:{id:"samlErrors.couldNotDownloadIdpMetadata.message",defaultMessage:"SAML IDP metadata could not be downloaded. Please check that your IDP Metadata URL is correct."},saml_url_incorrect:{id:"samlErrors.incorrectURL.message",defaultMessage:"Audience in SAML assertion needs to be {correctUrl}"},incorrectly_configured_saml:{id:"samlErrors.incorrectlyConfiguredSaml.message",defaultMessage:"Incorrectly configured SAML SSO. Please contact your administrator."},saml_name_id_email_required:{id:"samlErrors.samlNameIdEmailRequired.message",defaultMessage:"The SAML Name ID attribute must be an email address. Please contact your administrator."},email_not_configured_for_saml_sso:{id:"samlErrors.emailNotConfiguredForSamlSso.message",defaultMessage:"This email is not configured for SAML SSO to this workspace. Please contact your administrator."},invalid_saml_configuration:{id:"samlErrors.invalidSamlConfiguration.message",defaultMessage:"Invalid SAML Configuration. Please contact your administrator."},domain_verification_dns_failed:{id:"samlErrors.domainVerificationDnsFailed.message",defaultMessage:"DNS record does not contain the correct notion-verification-code TXT record. DNS may take up to 72 hours to propagate, please try again later."},domain_verification_invalid_code:{id:"samlErrors.domainVerificationInvalidCode.message",defaultMessage:"The requested domain verification code is invalid or used."},domain_verification_invalid_domain:{id:"samlErrors.domainVerificationInvalidDomain.message",defaultMessage:"Invalid value for domain. Please correctly format and ensure the domain is not reserved: {domain}"},domain_verification_config_has_domain:{id:"samlErrors.domainVerificationConfigHasDomain.message",defaultMessage:"SAML configuration already has the attempted domain."},domain_verification_has_pending_verifications:{id:"samlErrors.domainVerificationhasPending.message",defaultMessage:"There is already a pending domain verification for this domain."},disable_toggling_page_access_requests_for_non_members:{id:"samlErrors.disableTogglingPageAccessRequestsForNonMembers",defaultMessage:"Page access requests for non-members of a workspace is currently disabled."},signed_request:{id:"samlErrors.signedRequest.message",defaultMessage:"IDP metadata cannot accept signed requests."},user_not_added_to_space:{id:"samlErrors.userNotAddedToSpace.message",defaultMessage:"Cannot use SAML to log in. Please try again later."},cannot_use_saml_to_log_in:{id:"samlErrors.cannotUseSamlToLogIn.message",defaultMessage:"Cannot use SAML to log in. Please try logging in without SAML."}}),l=(0,i().YK)({invalid_email_address:{id:"emailErrors.invalidEmailAddress.message",defaultMessage:"Invalid email address"},destination_email_address_not_verified:{id:"emailErrors.destinationEmailAddressNotVerified.message",defaultMessage:"You must change a user's email to another verified email domain."},invalid_email_entered:{id:"emailErrors.invalidEmailEntered.message",defaultMessage:"Please enter a valid email."},user_with_email_already_exists:{id:"emailErrors.userAlreadyExists.message",defaultMessage:"A user with this email already exists."},invalid_or_expired_password:{id:"emailErrors.invalidOrExpiredPassword.message",defaultMessage:"Your login code was incorrect. Please try again."},email_does_not_have_existing_account:{id:"emailErrors.noExistingAccountForEmailAddress.message",defaultMessage:"This email does not have an existing account."},email_unreachable:{id:"emailErrors.emailUnreachable.message",defaultMessage:"We could not reach the email address you provided. Please try again with a different email."},incorrect_password:{id:"emailErrors.incorrectPassword.message",defaultMessage:"Incorrect password."},invalid_email_domain:{id:"emailErrors.invalidEmailDomain.message",defaultMessage:"Invalid email domain"}}),c=(0,i().YK)({enex_import_not_supported:{id:"importErrors.enexFileNotSupported.message",defaultMessage:"Evernote .enex import not supported."},only_docx_extension_supported:{id:"importErrors.onlyDocxExtensionSupported.message",defaultMessage:"Import failed: file type not supported."},corrupt_file:{id:"importErrors.corruptFile.message",defaultMessage:"Import failed: unable to open file."},pdf_to_docx_timeout:{id:"importErrors.pdfToDocxTimeout.message",defaultMessage:"Import failed: pdf2docx conversion timed out."},incorrect_file_format:{id:"importErrors.incorrectFileFormat.message",defaultMessage:"Import failed: incorrect file format."},upload_file_size_exceeded:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"We couldn’t process your file. Ensure the file size is under {maxSize}."}}),d=(0,i().YK)({csv_import_inconsistent_columns:{id:"csvImportErrors.inconsistentColumns.message",defaultMessage:"Inconsistent number of columns in CSV file, {numBadRows} rows had problems. Header row had {numTitleColumns} columns. Row {firstBadRowIndex} was first inconsistent row with {firstBadRowLength} columns. Parsed row {firstBadRowIndex}: {firstBadRow}"}}),u=(0,i().YK)({upload_file_size_exceeded:{id:"confluenceImportErrors.uploadFileSizeExceeded.message",defaultMessage:"Import file cannot exceed {maxSize}."},failed_to_extract_zip:{id:"confluenceImportErrors.failedToExtractZip.message",defaultMessage:"Failed to extract ZIP file."},no_index_html_file:{id:"confluenceImportErrors.noIndexHtmlFile.message",defaultMessage:"Could not find index file in ZIP."},index_html_missing_available_pages:{id:"confluenceImportErrors.indexHtmlMissingAvailablePages.message",defaultMessage:"Invalid index file: could not find available pages."},no_confluence_id_in_page_link:{id:"confluenceImportErrors.noConfluenceIdInPageLink.message",defaultMessage:"Could not extract page ID from file name."},failed_to_find_element:{id:"confluenceImportErrors.failedToFindElement.message",defaultMessage:"Failed to parse upload."},found_element_is_incorrect_type:{id:"confluenceImportErrors.foundElementIsIncorrectType.message",defaultMessage:"Failed to parse upload."},buffer_upload_failed:{id:"confluenceImportErrors.bufferUploadFailed.message",defaultMessage:"Failed to upload attachment from buffer."},attachment_not_found:{id:"confluenceImportErrors.attachmentNotFound.message",defaultMessage:"Failed to find attachment in ZIP file."},attachment_upload_failed:{id:"confluenceImportErrors.attachmentUploadFailed.message",defaultMessage:"Failed to upload attachment from file."},failed_to_build_page:{id:"confluenceImportErrors.failedToBuildPage.message",defaultMessage:"Failed to import page."},api_error:{id:"confluenceImportErrors.apiError.message",defaultMessage:"Failed to fetch data from api."},invalid_site_url_format:{id:"confluenceImportErrors.invalidSiteUrlFormat.message",defaultMessage:"Please enter a valid site URL. Example: https://example.com"}}),p=(0,i().YK)({file_upload_generic_error:{id:"fileUploadErrors.generic.message",defaultMessage:"File upload is not allowed."}}),m=(0,i().YK)({file_size_exceeded:{id:"importActions.fileImportFailedError.customSizeTooLarge.message",defaultMessage:"We couldn’t process your file. Ensure the file size is under {maxSize}."},row_limit_exceeded:{id:"row_limit_exceeded",defaultMessage:"Row limit cannot exceed {maxRows}"},column_limit_exceeded:{id:"column_limit_exceeded",defaultMessage:"Column limit cannot exceed {maxColumns}"}}),g=(0,i().YK)({password_too_short:{id:"passwordSettings.passwordTooShortError.message",defaultMessage:"Please make your password longer."},password_missing_letter:{id:"passwordSettings.passwordMissingLetter.message",defaultMessage:"Please include a letter, or use a longer password."},password_missing_number:{id:"passwordSettings.passwordMissingNumber.message",defaultMessage:"Please include a number, or use a longer password."},password_missing_letter_and_number:{id:"passwordSettings.passwordMissingLetterAndNumber.message",defaultMessage:"Please include a letter and a number, or use a longer password."},password_too_consistent:{id:"passwordSettings.passwordTooConsistent.message",defaultMessage:"Please include additional unique characters."},password_not_entered:{id:"passwordSettings.passwordNotEntered.message",defaultMessage:"Please enter your password."},password_not_set:{id:"passwordSettings.passwordNotSet.message",defaultMessage:"No password set."}}),f=(0,i().YK)({rate_limited:{id:"rateLimitError.message",defaultMessage:"Please try again later."},duplicate_rate_limited:{id:"duplicateRateLimitError.message",defaultMessage:"Rate limit reached, please try again later."},export_audit_log_rate_limited:{id:"export_audit_log_rate_limited.message",defaultMessage:"Rate limit reached for exporting audit logs, please try after your current exports are finished."},export_user_analytics_rate_limited:{id:"exportUserAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting member analytics, please try after your current exports are finished."},export_content_analytics_rate_limited:{id:"exportContentAnalytics.rateLimited.message",defaultMessage:"Rate limit reached for exporting content analytics, please try after your current exports are finished."},export_admin_content_search_rate_limited:{id:"exportAdminContentSearch.rateLimited.message",defaultMessage:"Rate limit reached for exporting content search, please try after your current exports are finished."},export_legal_hold_content_summary_rate_limited:{id:"exportLegalHoldContentSummary.rateLimited.message",defaultMessage:"Rate limit reached for exporting legal hold content summary, please try after your current exports are finished."}}),v=(0,i().YK)({login_generic_error:{id:"loginErrors.generic.message",defaultMessage:"There was a problem logging in."},login_try_again:{id:"loginErrors.tryAgain.message",defaultMessage:"Please log in again."},login_csrf_error:{id:"loginErrors.csrf.message",defaultMessage:"If you’re logging in via a link, please open the link in the same browser that you requested the link from."},login_admin_mode_unsupported:{id:"loginErrors.adminModeUnsupported.message",defaultMessage:"Unsupported in Admin Mode"},login_invalid_email:{id:"loginErrors.invalidEmail.message",defaultMessage:"Invalid email."},login_options_invalid:{id:"loginErrors.invalidOptions.message",defaultMessage:"Unable to login, please try again."},login_from_restricted_region:{id:"loginErrors.restrictedRegion.message",defaultMessage:"You are attempting to access our service from a restricted jurisdiction."},login_banned_user:{id:"loginErrors.bannedUser.message",defaultMessage:"This account has been banned from accessing Notion."},login_inactivity_user:{id:"loginErrors.inactivityUser.message",defaultMessage:"Your account has been locked for inactivity. Please contact inactiveaccount@makenotion.com to get access restored."},login_suspended_user:{id:"loginErrors.suspendedUser.message",defaultMessage:"Your account has been suspended by your Notion administrator."},login_custom_session_expired:{id:"loginErrors.customSessionExpired.message",defaultMessage:"You've been logged out due to a session duration set by your Workspace Owner."},login_generic_session_expired:{id:"loginErrors.genericSessionExpired.message",defaultMessage:"Your session has expired. Please login again."}}),h=(0,i().YK)({generic_mfa_error:{id:"authErrors.genericMfaError.message",defaultMessage:"Something went wrong, please try again"},reused_mfa_code:{id:"authErrors.reusedMfaCode.message",defaultMessage:"Provided code has already been used. Please try again."},invalid_mfa_code:{id:"authErrors.invalidMfaCode.message",defaultMessage:"The code didn’t work, try typing it again or resend code"},mfa_duplicate_friendly_name:{id:"authErrors.duplicateFriendlyName",defaultMessage:"Authenticator name is already in use"},mfa_empty_friendly_name:{id:"authErrors.emptyFriendlyName",defaultMessage:"Authenticator name cannot be empty"},mfa_bad_friendly_name:{id:"authErrors.badFriendlyName",defaultMessage:"Authenticator name cannot be used"},mfa_sms_unsupported_country_code_for_enrollment:{id:"authErrors.unsupportedCountryCode",defaultMessage:"SMS authentication is currently not supported for this country. You may consider using an authenticator app as an alternative authentication method."},email_code_login_required:{id:"authErrors.emailCodeLoginRequired",defaultMessage:"You must login with an email login code"},dev_invalid_domain:{id:"authErrors.devInvalidDomain",defaultMessage:"This is a development version of Notion. Please download the latest Notion desktop app at https://www.notion.com/desktop"},invalid_phone_number:{id:"authErrors.invalidPhoneNumber.message",defaultMessage:"The phone number is not valid"},invalid_country_code:{id:"authErrors.invalidCountryCode.message",defaultMessage:"The country code is not valid"},already_verified_phone_number:{id:"authErrors.alreadyVerifiedPhoneNumber.message",defaultMessage:"This phone number has already been verified"},max_num_of_mfa_methods_reached:{id:"authErrors.maxMethods.message",defaultMessage:"You've reached the maximum number of MFA methods for the given type."},admin_tool_insufficient_permissions:{id:"authErrors.adminToolInsufficientPermissions.message",defaultMessage:"You don't have the right role to access this Admin Mode tool."},phone_number_setup_limit_reached:{id:"authErrors.phoneNumberLimitReached.message",defaultMessage:"This phone number can no longer be used to setup new 2-step verification methods."},no_temporary_verification:{id:"authErrors.noTemporaryVerification.message",defaultMessage:"Notion must verify your password or MFA to continue, exit this modal and try again"},twilio_generic_error:{id:"authErrors.twilioGenericError.message",defaultMessage:"Something went wrong, please reach out to customer support"},twilio_cannot_verify_phone_number:{id:"authErrors.twilioCannotVerifyPhoneNumber.message",defaultMessage:"We cannot verify your phone number, please check the number and try again"},twilio_cannot_fetch_phone_number:{id:"authErrors.twilioCannotFetchPhoneNumber.message",defaultMessage:"There is no record of this phone number, please check the number and try again"}}),_=(0,i().YK)({apple_api_status_error:{id:"appleErrors.api.statusError",defaultMessage:"There was a problem with the Apple service."},apple_api_token_error:{id:"appleErrors.api.tokenError",defaultMessage:"There was a problem verifying your identity with Apple."},apple_api_missing_id_error:{id:"appleErrors.api.missingIdError",defaultMessage:"There was a problem getting user information from Apple."},apple_api_missing_access_token_error:{id:"appleErrors.api.missingAccessTokenError",defaultMessage:"Apple failed to authorize the login."},apple_api_missing_beta_app_review_submission:{id:"appleErrors.api.missingBetaAppReviewSubmission",defaultMessage:"Cannot find betaAppReviewSubmission entry."},apple_api_missing_pre_release_version:{id:"appleErrors.api.missingPreReleaseVersion",defaultMessage:"Cannot find preReleaseVersion entry."}}),b=((0,i().YK)({google_drive_token_error:{id:"googleErrors.googleDriveTokenError",defaultMessage:"Error from Google Drive: {errorMessage}"}}),(0,i().YK)({student_github_grant_error:{id:"grantErrors.studentGithubGrantError",defaultMessage:"Error applying the grant to your workspace. Please try again."},student_github_existing_workspace:{id:"grantErrors.studentGithubGrant.existingWorkspace",defaultMessage:"You have already redeemed the GitHub Student Developer Pack on a different workspace."},student_github_not_eligible:{id:"grantErrors.studentGithubGrant.notEligible",defaultMessage:"We cannot verify your GitHub student account."},student_github_already_received_grant:{id:"grantErrors.studentGithubGrant.alreadyReceivedGrant",defaultMessage:"Each GitHub account can only redeem the grant once."}}),(0,i().YK)({non_stripe_subscription:{id:"subscriptionErrors.nonStripeSubscriptionError",defaultMessage:"You have an existing mobile subscription. Please go to the app to manage your subscription."},missing_address:{id:"subscriptionErrors.missingAddressError",defaultMessage:"Address line 1 must exist."},subscription_personal_plan_more_than_one_member:{defaultMessage:"In order to use the Personal plan, your workspace can have only one member.",id:"subscriptionErrors.personalPlanMoreThanOneMember"},invalid_vat:{id:"subscriptionErrors.invalidVatError",defaultMessage:"VAT/GST number is invalid."},coupon_already_applied:{id:"subscriptionErrors.couponAlreadyApplied",defaultMessage:"This coupon has already been applied"},subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.genericErrorMessage",defaultMessage:"We are currently not allowing customers to upgrade their subscription from this jurisdiction."},new_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.newSubscriptionErrorMessage",defaultMessage:"We are currently not accepting new customers from this jurisdiction."},billing_address_change_to_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.billingAddressErrorMessage",defaultMessage:"We are currently not allowing customers to update their billing address to this jurisdiction."},payment_method_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.paymentMethodErrorMessage",defaultMessage:"We are currently not accepting payment methods from this jurisdiction."},new_subscription_attempt_using_legacy_plus_price:{id:"subscriptionErrors.createWithLegacyPlusPrice",defaultMessage:"Something went wrong. Please reload Notion and try again. No charges have been made."},add_on_subscription_attempt_from_restricted_region:{id:"updatingSubscriptionDetails.restrictedRegion.addOnSubscriptionErrorMessage",defaultMessage:"We are currently not allowing customers to purchase add-ons from this jurisdiction."},non_admin_insufficient_permissions:{id:"subscriptionErrors.insufficientPermissions",defaultMessage:"You have a subscription that was added on your behalf by Notion. Please reach out to team@makenotion.com to make any changes to this subscription."},invalid_product_combination:{id:"subscriptionErrors.invalidProductCombination",defaultMessage:"You cannot combine the selected plan with the selected add-ons."},invalid_plan:{id:"subscriptionErrors.invalidPlan",defaultMessage:"The plan you have selected is not available."},collection_method_not_allowed:{id:"subscriptionErrors.collectionMethodNotAllowed",defaultMessage:"You cannot select this payment collection method in the app. Please reach out to support."},payment_failed:{id:"subscriptionErrors.paymentFailed",defaultMessage:"Your payment failed. Please try again, try a different payment method, or contact support."},payment_failed_with_invoice_url:{id:"subscriptionErrors.paymentFailedWithInvoiceUrl",defaultMessage:"There was a problem with your payment."},native_invoice_payment_failed:{id:"subscriptionErrors.nativeInvoicePaymentFailed",defaultMessage:"There was a problem with your payment. Please try again."},missing_plan_and_add_ons:{id:"subscriptionErrors.missingPlanAndAddOns",defaultMessage:"A new subscription requires either a plan or add-ons."},cancel_add_ons_without_subscription:{id:"subscriptionErrors.cancelAddOnsWithoutSubscription",defaultMessage:"Can't request add-on cancellation without an active subscription."},cancel_non_existent_add_on:{id:"subscriptionErrors.cancelNonExistentAddOn",defaultMessage:"You can't cancel a non-existent add-on {addOnId}."},inconsistent_billing_intervals:{id:"subscriptionErrors.inconsistentAddOnBillingIntervals",defaultMessage:"All subscription items must have the same billing interval."},subscription_unpaid:{id:"subscriptionErrors.subscriptionUnpaid",defaultMessage:"Your subscription has unpaid invoices. Please pay them before making any changes."},payment_processing:{id:"subscriptionErrors.paymentProcessing",defaultMessage:"Your payment is still processing. Please wait until your payment has completed before making any changes."},missing_mandate_data:{id:"subscriptionErrors.missingMandateData",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},setup_intent_failed:{id:"subscriptionErrors.setupIntentFailed",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},payment_method_declined:{id:"subscriptionErrors.paymentMethodDeclined",defaultMessage:"Your payment method was declined. Please check that the information you entered is correct, or contact your provider."},ai_add_on_not_allowed_for_hipaa:{id:"subscriptionErrors.aiAddOnNotAllowedForHipaa",defaultMessage:"Unable to add AI add-on for HIPAA compliant workspaces."},timed_trials_invalid_plan:{id:"subscriptionErrors.invalidPlan.enterprise.message",defaultMessage:"Please contact Sales for a trial of the Enterprise plan."},timed_trials_not_eligible:{id:"subscriptionErrors.notEligible.message",defaultMessage:"This space is not eligible for a free trial."},no_subscription:{id:"subscriptionErrors.noSubscription",defaultMessage:"This space does not have an active subscription."},invalid_payment_method:{id:"subscriptionErrors.setDefaultPaymentMethod.invalidPaymentMethod",defaultMessage:"The payment method you provided is invalid. Please try another payment method on your account."},set_default_payment_method_failed:{id:"subscriptionErrors.setDefaultPaymentMethod.apiError",defaultMessage:"Your payment method could not be updated. Please try again or contact support."},subscription_not_updatable:{id:"subscriptionErrors.subscriptionNotUpdatable",defaultMessage:"Your subscription requires additional attention. Please contact Notion to make changes."}})),y=(0,i().YK)({referral_user_already_signed_up:{defaultMessage:"User has already signed up.",id:"activateReferral.dialogError.userAlreadySignedUp.errorMessage"},referral_already_activated:{defaultMessage:"Referral has already been activated.",id:"activateReferral.dialogError.referralAlreadyActivated.errorMessage"},referral_no_valid_referral_found:{defaultMessage:"No valid referral found.",id:"activateReferral.dialogError.noValidReferral.errorMessage"},referral_referring_user_not_found:{defaultMessage:"Referring user not found.",id:"activateReferral.dialogError.referringUserNotFound.errorMessage"},referral_cannot_invite_yourself:{defaultMessage:"You cannot invite yourself",id:"activateReferral.dialogError.cannotInviteSelf.errorMessage"},referral_email_not_eligible:{defaultMessage:"This email is not eligible for the referral program. If you think this is a mistake please contact support.",id:"activateReferral.dialogError.emailNotEligible.errorMessage"},referral_already_applied_credit:{defaultMessage:"You have already applied an invitation credit.",id:"activateReferral.dialogError.invitationCreditAlreadyApplied.errorMessage"}}),S=(0,i().YK)({slack_block_not_found:{defaultMessage:"Block not found.",id:"slackAuthorizationErrors.blockNotFound.errorMessage"},slack_user_missing_edit_permission:{defaultMessage:"User cannot edit block.",id:"slackAuthorizationErrors.missingEditPermission.errorMessage"},slack_webhook_not_found:{defaultMessage:"Slack webhook not found.",id:"slackAuthorizationErrors.webhookNotFound.errorMessage"}}),w=(0,i().YK)({generic_error:{defaultMessage:"Something went wrong.",id:"genericErrors.genericErrorMessage"},generic_insufficient_permissions:{defaultMessage:"You do not have permissions to this feature in the requested space.",id:"genericErrors.insufficientPermissions.errorMessage"},generic_insufficient_plan_type:{defaultMessage:"The feature is not available on your current plan type.",id:"genericErrors.insufficientPlanType.errorMessage"}}),k=((0,i().YK)({apply_offer:{defaultMessage:"Error applying the offer to your account. Please try again.",id:"offerErrors.applyOfferError"},get_offer:{defaultMessage:"Error getting the offers you qualify for. Please try again.",id:"offerErrors.getOfferError"}}),(0,i().YK)({offline:{defaultMessage:"Offline.",id:"offlineErrors.offlineErrorMessage"}})),I=(0,i().YK)({invalid_name_error:{defaultMessage:"Invalid name.",id:"invalidNameErrors.errorMessage"}}),x=(0,i().YK)({domain_verification_integration_already_verified:{id:"integrationErrors.domainAlreadyVerified.errorMessage",defaultMessage:"The integration has already verified this domain."}}),A=(0,i().YK)({datadog_token_exists:{id:"externalAuthErrors.datadog.tokenAlreadyExists",defaultMessage:"Another workspace is already connected to your Datadog organization. Please revoke the API key from the Organization settings in Datadog and try again."},datadog_not_an_admin:{id:"externalAuthErrors.error.installDatadogNotAnAdmin",defaultMessage:"You are trying to install this integration to your Datadog organization, but you are not an admin. Please contact your Datadog organization admin to install this integration."},access_token_retrieval_failed:{id:"externalAuthErrors.accessTokenRetrievalFailed",defaultMessage:"Failed to connect to third party service."}}),C=(0,i().YK)({workspace_transfer_reattempt_wrong_user:{id:"workspaceTransferErrors.reattemptWrongUser.errorMessages",defaultMessage:"Not allowed to reattempted transfers to a different user account."},workspace_transfer_invalid_corporate_email:{id:"workspaceTransferErrors.invalidCorporateEmail.errorMessages",defaultMessage:"Cannot transfer workspace to a corporate user account."},workspace_transfer_transfering_state_failed:{id:"workspaceTransferErrors.failedTransfer.errorMessages",defaultMessage:"Transferring workspace failed. Please re-attempt the transfer."},workspace_transfer_no_user_found:{id:"workspaceTransferErrors.noUserFound.errorMessages",defaultMessage:"Cannot transfer workspace to an email without an associated Notion account. Please create a new account with this email, or try another email."},workspace_transfer_change_email_pending_transfer:{id:"workspaceTransferErrors.changeEmail.errorMessages",defaultMessage:"You need to complete the workspace transfer for {workspaceName} before being able change emails."}}),T=(0,i().YK)({workspace_analytics_insufficient_permissions:{id:"workspaceAnalytics",defaultMessage:"You do not have permissions to analytics for the requested space."},audit_log_disabled:{id:"auditLogDisabled",defaultMessage:"Audit log is currently disabled."},managed_user_account_deletion_disabled:{id:"enterpriseErrors.managedUserDeletionDisabled",defaultMessage:"You can't delete your account because it is being managed by your organization."},last_organization_owner_deletion_disabled:{id:"enterpriseErrors.lastOrganizationOwnerDeletionDisabled",defaultMessage:"You can't delete your account because you are the only owner of an organization."},enterprise_only_feature:{id:"enterpriseErrors.enterpriseOnlyFeature",defaultMessage:"This feature is available on Enterprise plans only"},guest_invite_request_requestor_insufficient_permissions:{id:"enterpriseErrors.guestInviteRequestRequestorInsufficientPermissions",defaultMessage:"Requesting user does not have valid permissions to invite a guest to this page."},guest_invite_request_guest_invalid:{id:"enterpriseErrors.guestInviteRequestGuestInvalid",defaultMessage:"User is not valid to be invited as a guest."},guest_invite_request_disabled:{id:"enterpriseErrors.guestInviteRequestDisabled",defaultMessage:"Guest invite requests are currently disabled."},user_cannot_delete_account:{id:"enterpriseErrors.userCannotDeleteAccount",defaultMessage:"This account cannot be deleted."},cant_access_workspace_from_network:{id:"enterpriseErrors.cantAccessWorkspaceFromNetwork",defaultMessage:"You do not have access to this workspace on your current network. Please change networks or contact your network administrator."}}),M=(0,i().YK)({active_space_content_duplication:{id:"spaceContentDuplication.activeRequest",defaultMessage:"Cannot edit content while this workspace's contents are being duplicated."},completed_space_content_duplication:{id:"spaceContentDuplication.completed",defaultMessage:"Cannot edit content for a workspace that has been migrated to another workspace."}}),P=(0,i().YK)({domain_settings_prevent_space_join:{id:"managedUsersDisallowedOperationErrorMessages.domainSettingsPreventSpaceJoin",defaultMessage:"Users from {disallowedEmailDomains} cannot join or be invited to external workspaces due to administrative restrictions. For more information, they should contact their organization's administrator."}}),B=(0,i().YK)({template_not_exists:{id:"templateSubmissionErrorMessages.templateNotExists",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_valid_block_id:{id:"templateSubmissionErrorMessages.templateNotValidBlockId",defaultMessage:"This does not seem to be a valid template. Try a different link?"},template_not_owned_by_user:{id:"templateSubmissionErrorMessages.templateNotOwnedByUser",defaultMessage:"You can only publish a template created by yourself."},template_not_page:{id:"templateSubmissionErrorMessages.templateNotPage",defaultMessage:"This template is not a page. Try a different link?"},template_creation_failed:{id:"templateSubmissionErrorMessages.templateCreateFailed",defaultMessage:"Could not submit the template. Please contact templates@makenotion.com or try it later."},template_over_rate_limit:{id:"templateSubmissionErrorMessages.templateOverRateLimit",defaultMessage:"Please try again after 1 minute."},template_not_published:{id:"templateSubmissionErrorMessages.templateNotPublished",defaultMessage:"The template has not been published to web."},template_not_allowed_for_duplicate:{id:"templateSubmissionErrorMessages.templateNotAllowedForDuplicate",defaultMessage:"The template has not been allowed for duplication."},user_is_not_template_creator:{id:"templateSubmissionErrorMessages.userIsNotTemplateCreator",defaultMessage:"We cannot locate your template creator profile. Please create a profile first."},template_not_on_public_domain:{id:"templateSubmissionErrorMessages.templateNotOnPublicDomain",defaultMessage:"The template link is not on a public domain. Please use your notion.site link in publish tab."},template_missing_name:{id:"templateSubmissionErrorMessages.templateMissingName",defaultMessage:"Please enter a name for your template."},template_name_too_long:{id:"templateSubmissionErrorMessages.templateNameTooLong",defaultMessage:"Your template name is too long. Please limit it to 50 characters."},template_name_invalid_words:{id:"templateSubmissionErrorMessages.templateNameInvalidWords",defaultMessage:'Please remove "{word}" from your template name.'},template_invalid_price:{id:"templateSubmissionErrorMessages.templateInvalidPrice",defaultMessage:"Please enter a valid price for your template."},template_below_minimum_price:{id:"templateSubmissionErrorMessages.templatePriceTooHigh",defaultMessage:"Paid templates must be at least $0.99."},template_above_maximum_price:{id:"templateSubmissionErrorMessages.templatePriceTooLow",defaultMessage:"Paid templates must be less than $5000.00."},template_missing_description:{id:"templateSubmissionErrorMessages.templateMissingDescription",defaultMessage:"Please add a description for your template."},template_description_too_long:{id:"templateSubmissionErrorMessages.templateDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_missing_categories:{id:"templateSubmissionErrorMessages.templateMissingCategories",defaultMessage:"Please select at least one category for your template"},template_categories_too_long:{id:"templateSubmissionErrorMessages.templateCategoriesTooLong",defaultMessage:"Please select no more than 3 categories for your template."},template_insecure_url:{id:"templateSubmissionErrorMessages.templateInsecureUrl",defaultMessage:"Please enter a secure URL to purchase your template."},template_limit_too_large:{id:"templateSubmissionErrorMessages.templateLimitTooLarge",defaultMessage:"Limit is too large"},template_offset_too_large:{id:"templateSubmissionErrorMessages.templateOffsetTooLarge",defaultMessage:"Offset is too large"},template_invalid_purchase_url:{id:"templateSubmissionErrorMessages.templateInvalidPurchaseUrl",defaultMessage:"Please enter a valid URL. Example: https://www.example.com/"},template_notion_domain_as_purchase_url:{id:"templateSubmissionErrorMessages.templateNotionDomainAsPurchaseUrl",defaultMessage:"Please provide a link to a third-party payment platform."},template_invalid_payment_destination:{id:"templateSubmissionErrorMessages.templateInvalidPaymentProcessor",defaultMessage:"This payment platform is not supported. Please use another."},template_url_too_long:{id:"templateSubmissionErrorMessages.templatePurchaseUrlTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_missing_purchase_url:{id:"templateSubmissionErrorMessages.templateMissingPurchaseUrl",defaultMessage:"Please enter a purchase URL for your template."},template_missing_long_description:{id:"templateSubmissionErrorMessages.templateMissingLongDescription",defaultMessage:"Please add a detailed description for your template."},template_long_description_too_long:{id:"templateSubmissionErrorMessages.templateLongDescriptionTooLong",defaultMessage:"You description is too long. Please limit it to 5000 characters"},template_long_description_contains_html:{id:"templateSubmissionErrorMessages.templateLongDescriptionContainsHtml",defaultMessage:"Long description contains HTML"},check_template_exists_failed:{id:"templateSubmissionErrorMessages.checkTemplateExistsFailed",defaultMessage:"We could not verify if the template has been published. Please try again later."},template_already_exists:{id:"templateSubmissionErrorMessages.templateAlreadyExists",defaultMessage:"This template has already been published or in review. Please try another one."},template_draft_edit_not_allowed:{id:"templateDraftSubmissionErrorMessages.editNotAllowed",defaultMessage:"Users cannot edit template drafts in review."},template_draft_not_found:{id:"templateDraftSubmissionErrorMessages.templateDraftNotExists",defaultMessage:"The template draft to submit does not exist!"},template_slug_too_long:{id:"templateSubmissionErrorMessages.templateSlugTooLong",defaultMessage:"Your template slug is too long. Please limit it to 60 characters."},template_slug_invalid:{id:"templateSubmissionErrorMessages.templateSlugInvalid",defaultMessage:"Your template slug can only contain lowercase letters, numbers, and hyphens(-)."},template_slug_invalid_hyphens:{id:"templateSubmissionErrorMessages.templateSlugInvalidHyphens",defaultMessage:"Your template slug cannot start or end with a hyphen(-). Also, it cannot have two consecutive hyphens(-)."},template_slug_invalid_words:{id:"templateSubmissionErrorMessages.templateSlugInvalidWords",defaultMessage:"Please don't use 'templates' or 'notion' in your template slug."},template_slug_already_exists:{id:"templateSubmissionErrorMessages.templateSlugAlreadyExists",defaultMessage:"This template slug has already been used. Please try another one."},template_draft_status_invalid_for_user:{id:"templateDraftSubmissionErrorMessages.statusInvalid",defaultMessage:"Users can only modify template draft status to draft or in review."},template_screenshots_limit:{id:"templateDraftSubmissionErrorMessage.screenshotsLimit",defaultMessage:"Template can only have a max of 5 screenshots."},template_slug_empty:{id:"templateSubmissionErrorMessages.templateSlugEmpty",defaultMessage:"Template slug cannot be empty."},template_locale_change_not_allowed:{id:"templateSubmissionErrorMessage.localeChangeNotAllowed",defaultMessage:"Locale cannot be changed after the template has been published."},template_draft_id_invalid:{id:"templateDraftSubmissionErrorMessages.templateDraftIdInvalid",defaultMessage:"Template draft id is not a valid UUID."},template_draft_not_owned_by_user:{id:"templateDraftSubmissionErrorMessages.templateDraftNotOwnedByUser",defaultMessage:"You can only modify a template draft created by yourself."},template_invalid_image_url:{id:"templateSubmissionErrorMessages.templateInvalidImageUrl",defaultMessage:"Submitted images must be hosted by Notion."},template_invalid_custom_email_snippet:{id:"templateSubmissionErrorMessages.templateInvalidCustomEmailSnippet",defaultMessage:"Invalid custom email snippet."}}),R=(0,i().YK)({template_missing_url:{id:"templateImageUploaderErrorMessages.templateMissingUrl",defaultMessage:"Template URL cannot be empty."},template_not_child_of_parent:{id:"templateImageUploaderErrorMessages.templateNotChildOfParent",defaultMessage:"This link doesn’t seem to belong to the same template. Please try again."}}),E=(0,i().YK)({template_video_link_invalid:{id:"templateVideoUploaderErrorMessages.templateVideoLinkInvalid",defaultMessage:"This doesn’t look like a YouTube or Vimeo link. Please try again."}}),D=(0,i().YK)({template_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateToDeleteNotExists",defaultMessage:"The template to delete does not exist. Please try another one."},template_draft_to_delete_not_exists:{id:"templateDeletionErrorMessages.templateDeletionFailed",defaultMessage:"Could not delete the template draft. Please contact templates@makenotion.com for help."},template_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateNotOwnedByRequestingUser",defaultMessage:"You can only delete a template created by yourself. Please try another one."},template_draft_to_delete_in_review:{id:"templateDeletionErrorMessages.templateDraftInReview",defaultMessage:"The template draft is in review. Please try to delete after it is published or rejected."},template_draft_to_delete_not_owned_by_requesting_user:{id:"templateDeletionErrorMessages.templateDraftNotOwnedByRequestingUser",defaultMessage:"You can only delete a template draft created by yourself. Please try another one."},template_draft_to_delete_cannot_roll_back:{id:"templateDeletionErrorMessages.templateDraftCannotRollBack",defaultMessage:"The template draft cannot be rolled back."}}),N=(0,i().YK)({email_verification_required:{id:"microsoftErrorMessages.emailVerificationRequired",defaultMessage:"You must do a one-time verification of your Microsoft-associated email to login to Notion."}}),L=(0,i().YK)({marketplace_seller_test_webhook_rate_limit:{id:"templateCreatorProfileFormErrorMessages.templateCreatorTestWebhookRateLimit",defaultMessage:"Please wait before testing your webhook again."},template_creator_missing_name:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingName",defaultMessage:"Please enter a display name for your profile."},template_creator_name_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameTooLong",defaultMessage:"Your display name is too long. Please limit it to 50 characters."},template_creator_missing_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingHandle",defaultMessage:"Please enter a handle for your profile. It will be used in your profile URL."},template_creator_invalid_handle:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidHandle",defaultMessage:"Your handle can only contain lowercase letters, numbers, underscores, and dashes."},template_creator_handle_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorHandleTooLong",defaultMessage:"Your handle is too long. Please limit it to 50 characters."},template_creator_missing_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingEmail",defaultMessage:"Please enter a contact email address for your profile."},template_creator_invalid_email:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidEmail",defaultMessage:"Please enter a valid contact email address."},template_creator_missing_description:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorMissingDescription",defaultMessage:"Please add a description for your profile."},template_creator_webhook_url_invalid:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorWebhookUrlInvalid",defaultMessage:"Invalid URL"},template_creator_description_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorDescriptionTooLong",defaultMessage:"Your description is too long. Please limit it to 280 characters."},template_creator_invalid_link:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidLink",defaultMessage:"Please enter a valid link. Links must start with https://."},template_creator_link_too_long:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorLinkTooLong",defaultMessage:"This link is too long. Please use a shorter one."},template_creator_name_not_allowed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameNotAllowed",defaultMessage:"This name is not allowed. Please try another one."},template_creator_name_reserved:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorNameReserved",defaultMessage:'Names containing reserved brand names or "notion" cannot be used. Please contact templates@makenotion.com.'},template_creator_creation_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorCreationFailed",defaultMessage:"Could not create the creator. Please contact templates@makenotion.com or try it later."},template_creator_update_failed:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUpdateFailed",defaultMessage:"Could not update the creator. Please contact templates@makenotion.com or try it later."},check_handle_exists_failed:{id:"templateCreatorSubmissionValidationErrorMessages.checkHandleExistsFailed",defaultMessage:"We could not verify if the submitted handle exists. Please try later."},handle_already_exists:{id:"templateCreatorSubmissionValidationErrorMessages.handleAlreadyExists",defaultMessage:'The creator handle "{handle}" already exists. Please try another one.'},template_creator_user_id_not_match:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorUserIdNotMatch",defaultMessage:"User id does not match the creator's user id."},template_creator_invalid_image_url:{id:"templateCreatorSubmissionValidationErrorMessages.templateCreatorInvalidImageUrl",defaultMessage:"Please upload a valid image through the /profile page."}}),O=(0,i().YK)({duplicated_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.duplicatedPinnedTemplates",defaultMessage:"There are duplicated pinned templates. Please remove duplication and try again."},too_many_pinned_templates:{id:"templateUpdatePinnedTemplatesErrorMessages.tooManyPinnedTemplates",defaultMessage:"You can only pin up to 4 templates. Please remove some and try again."},pinned_templates_not_exist:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotExist",defaultMessage:"Some pinned templates do not exist. Please remove them and try again."},pinned_templates_not_owned_by_requesting_user:{id:"templateUpdatePinnedTemplatesErrorMessages.pinnedTemplatesNotOwnedByRequestingUser",defaultMessage:"You can only pin templates created by yourself."}}),U=(0,i().YK)({airtable_unexpected_response:{id:"airtableError.unexpectedResponse",defaultMessage:"Failed to submit application. Please try again later."}}),F=(0,i().YK)({startup_input_empty:{id:"startupApplicationError.inputMissing",defaultMessage:"This field is required."},startup_unselected:{id:"startupApplicationError.unselected",defaultMessage:"A selection is required."},startup_invalid_email:{id:"startupApplicationError.invalidEmail",defaultMessage:"The email address is invalid."},startup_personal_email:{id:"startupApplicationError.personalEmail",defaultMessage:"A work email is required."},startup_invalid_url:{id:"startupApplicationError.invalidUrl",defaultMessage:"The provided URL is invalid."},startup_invalid_country:{id:"startupApplicationError.invalidCountry",defaultMessage:"The provided country is not supported."},startup_missing_field_server_side:{id:"startupApplicationError.missingField",defaultMessage:"A required field is missing."},startup_invalid_partner:{id:"startupApplicationError.invalidPartner",defaultMessage:"The provided referral partner is not valid."},startup_not_admin_of_space:{id:"startupApplicationError.notAdmin",defaultMessage:"User is not an admin of the space."},startup_not_member_of_space:{id:"startupApplicationError.notMember",defaultMessage:"User is not a member of the space."}}),V=(0,i().YK)({student_group_url_invalid:{id:"studentGroupSignupError.urlInvalid",defaultMessage:"This url is invalid."},student_group_response_missing:{id:"studentGroupSignupError.responseMissing",defaultMessage:"This field is required."},student_group_response_too_long:{id:"studentGroupSignupError.responseTooLong",defaultMessage:"Your response is too long. Please limit your answers to 2000 characters."},student_institution_domain_mismatch:{id:"studentGroupSignupError.institutionDomainMismatch",defaultMessage:"This institution does not match your email domain. Please make sure you're logged in to a Notion account registered with your student email."},student_institution_not_in_allowlist:{id:"studentGroupSignupError.institutionNotInAllowlist",defaultMessage:"Institution not found in list."},student_group_user_not_found:{id:"studentGroupSignupError.userNotFound",defaultMessage:"User not found."},student_group_space_not_found:{id:"studentGroupSignupError.spaceNotFound",defaultMessage:"Space not found."},student_email_not_admin_of_space:{id:"studentGroupSignupError.notAdminOfSpace",defaultMessage:"User is not an admin of the space."},education_group_application_over_rate_limit:{id:"studentGroupSignupError.overRateLimit",defaultMessage:"You have submitted too many times, please try again later."},student_group_link_to_organization_domain_mismatch:{id:"studentGroupSignupError.linkToOrganizationDomainMismatch",defaultMessage:"Please enter a link that is on your institution's official domain."}}),j=(0,i().YK)({marketplace_refund_custom_reason_body_required:{id:"marketplaceRefundError.customReasonBodyRequired",defaultMessage:"Please enter a description"},marketplace_refund_custom_reason_too_long:{id:"marketplaceRefundError.customReasonTooLong",defaultMessage:"Description should be less than 1000 characters"},marketplace_refund_custom_reason_too_short:{id:"marketplaceRefundError.customReasonTooShort",defaultMessage:"Description should be at least 10 characters"},marketplace_refund_requires_valid_acquisition:{id:"marketplaceRefundError.requiresValidAcquisition",defaultMessage:"Acquisition must be valid"},marketplace_refund_acquisition_too_old:{id:"marketplaceRefundError.acquisitionTooOld",defaultMessage:"Acquisition is too old, refunds must be requested within 14 days of purchase"},marketplace_refund_acquisition_free:{id:"marketplaceRefundError.acquisitionFree",defaultMessage:"Unable to refund free acquisitions"},marketplace_refund_acquisition_already_has_active_refund:{id:"marketplaceRefundError.acquisitionAlreadyHasActiveRefund",defaultMessage:"This purchase already has an active refund"},marketplace_refund_only_acquirer_can_request:{id:"marketplaceRefundError.onlyAcquirerCanRequest",defaultMessage:"Only the acquirer can request a refund"},marketplace_refund_acquisition_missing_succeeded_time:{id:"marketplaceRefundError.acquisitionMissingSucceededTime",defaultMessage:"Acquisition does not have a succeeded time"}}),z=(0,i().YK)({marketplace_coupon_not_found:{id:"marketplaceCouponError.notFound",defaultMessage:"This is an invalid coupon code."},marketplace_coupon_expired:{id:"marketplaceCouponError.expired",defaultMessage:"The coupon code has expired."},marketplace_coupon_max_uses_reached:{id:"marketplaceCouponError.maxUsesReached",defaultMessage:"The coupon code has reached its maximum usage."}}),H=(0,i().YK)({marketplace_coupon_submission_invalid_code:{id:"marketplaceCouponSubmissionError.invalidCode",defaultMessage:"Invalid coupon code."},marketplace_coupon_submission_invalid_discount:{id:"marketplaceCouponSubmissionError.invalidDiscount",defaultMessage:"Invalid discount."},marketplace_coupon_submission_invalid_date:{id:"marketplaceCouponSubmissionError.invalidDate",defaultMessage:"Date is invalid."},marketplace_coupon_submission_invalid_date_in_past:{id:"marketplaceCouponSubmissionError.invalidDateInPast",defaultMessage:"Date cannot be in the past."},marketplace_coupon_submission_start_date_end_date_out_of_order:{id:"marketplaceCouponSubmissionError.startDateEndDateOutOfOrder",defaultMessage:"Start date cannot be after end date."},marketplace_coupon_submission_invalid_usage_limit:{id:"marketplaceCouponSubmissionError.invalidUsageLimit",defaultMessage:"Invalid usage limit."},marketplace_coupon_submission_invalid_usage_limit_already_surpassed:{id:"marketplaceCouponSubmissionError.invalidUsageLimitAlreadySurpassed",defaultMessage:"Invalid usage limit, coupon has already been used more than this limit allows."},marketplace_coupon_submission_code_already_in_use:{id:"marketplaceCouponSubmissionError.codeAlreadyInUse",defaultMessage:"Coupon code already in use."},marketplace_coupon_submission_invalid_eligible_listing_ids:{id:"marketplaceCouponSubmissionError.invalidEligibleListingIds",defaultMessage:"You must select at least one template to proceed."}}),W=(0,i().YK)({marketplace_listing_review_invalid_rating:{id:"marketplaceReviewError.noRatingError",defaultMessage:"Please give this template a rating"},marketplace_listing_review_existing_review:{id:"marketplaceReviewError.existingReviewError",defaultMessage:"A review already exists"},marketplace_listing_review_title_too_short:{id:"marketplaceReviewError.titleTooShort",defaultMessage:"Your title is too short. Please enter at least 3 characters."},marketplace_listing_review_title_too_long:{id:"marketplaceErrors.marketplaceListingReviewTitleTooLong",defaultMessage:"Your review title is too long. Please limit it to 100 characters."},marketplace_listing_review_description_too_short:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooShort",defaultMessage:"Your review is too short. Please enter at least 50 characters."},marketplace_listing_review_description_too_long:{id:"marketplaceErrors.marketplaceListingReviewDescriptionTooLong",defaultMessage:"Your review is too long. Please limit it to 1,500 characters."},marketplace_listing_review_name_too_short:{id:"marketplaceErrors.marketplaceListingReviewNameTooShort",defaultMessage:"Please enter a name to display on your review."},marketplace_listing_review_name_too_long:{id:"marketplaceErrors.marketplaceListingReviewNameTooLong",defaultMessage:"Your name is too long. Please limit it to 40 characters."},marketplace_listing_review_creator_response_too_short:{id:"marketplaceReviewError.creatorResponseTooShort",defaultMessage:"Your response is too short. Please enter at least 5 characters."},marketplace_listing_review_creator_response_too_long:{id:"marketplaceReviewError.creatorResponseTooLong",defaultMessage:"Your response is too long. Please limit it to 1,500 characters."}}),q=(0,i().YK)({user_not_a_creator:{defaultMessage:"Onboarding is not available as you are not a template creator.",id:"marketplaceErrors.userNotACreator.message"},marketplace_metrics_no_access:{defaultMessage:"No access to this creator or listing",id:"marketplaceErrors.metricsNoAccess.message"},onboarding_disabled:{defaultMessage:"Onboarding is disabled for your account. Please contact support if you believe this is an error.",id:"marketplaceErrors.onboardingDisabled.message"},marketplace_default_error:{defaultMessage:"Something went wrong. Please try again later.",id:"marketplaceErrors.defaultError.message"},marketplace_product_not_available:{defaultMessage:"Product not available on Notion Marketplace.",id:"marketplaceErrors.productNotAvailable.message"},marketplace_invalid_tax_id:{defaultMessage:"Invalid tax ID.",id:"marketplaceErrors.invalidTaxId.message"},marketplace_already_refunded:{defaultMessage:"You have already refunded this product",id:"marketplaceErrors.alreadyRefunded.message"},marketplace_purchasing_disabled:{defaultMessage:"This content does not exist",id:"marketplaceErrors.purchasingDisabled.message"},marketplace_metrics_creator_or_listing_not_found:{defaultMessage:"Creator or listing not found",id:"marketplaceErrors.metricsCreatorOrListingNotFound.message"},marketplace_sanctioned_country:{defaultMessage:"You cannot make Marketplace purchases from this country.",id:"marketplaceErrors.billingAddressRestricted.message"},marketplace_guest_user_error:{defaultMessage:"Guest users are not allowed to purchase products.",id:"marketplaceErrors.guestUserError.message"}}),K=(0,i().YK)({space_does_not_exist:{defaultMessage:"Workspace must exist",id:"publicDomainError.invalidSpace.message"},public_domain_does_not_exist:{defaultMessage:"Domain must exist",id:"publicDomainError.invalidDomain.message"},public_domain_disallowed:{defaultMessage:"Domain not allowed",id:"publicDomainError.disallowedDomain.message"},public_domain_unavailable:{defaultMessage:"Domain not available",id:"publicDomainError.unavailableDomain.message"},public_domain_name_invalid:{defaultMessage:"Domain name is not valid",id:"publicDomainError.invalidDomainName.message"},incorrect_custom_public_domain_format:{defaultMessage:"Include a subdomain (e.g., www.example.org) ",id:"publicDomainError.missingSubdomainForCustomDomain.message"},public_domain_cannot_rename_custom:{defaultMessage:"Cannot rename a custom domain",id:"publicDomainError.cannotRenameDomain.message"},public_domain_non_custom_validation:{defaultMessage:"Cannot validate domain",id:"publicDomainError.cannotValidateDomain.message"},default_public_domain_exists:{defaultMessage:"Default domain exists",id:"publicDomainError.existingDefaultDomain.message"},maximum_public_domains_reached:{defaultMessage:"Maximum domains created",id:"publicDomainError.maxDomainsCreated.message"},payment_required:{defaultMessage:"Payment required",id:"publicDomainError.paymentRequired.message"},default_public_domain_deletion:{defaultMessage:"Default domain cannot be deleted",id:"publicDomainError.defaultDomainDeletion.message"}}),G=(0,i().YK)({setting_overridden_by_organization:{id:"organizationErrors.settingOverriddenByOrganization",defaultMessage:"You can't update this setting because it's being overridden by your organization."}}),$=(0,i().YK)({default:{id:"fallbackHttpErrorMessages.default",defaultMessage:"Oops, something went wrong. ({errorCode})"},defaultTryAgainLater:{id:"fallbackHttpErrorMessages.defaultTryAgainLater",defaultMessage:"Oops, something went wrong. Please try again in a few minutes. ({errorCode})"}}),Y=(0,i().YK)({sanctioned_entity:{defaultMessage:"You may not access Notion from a prohibited jurisdiction.",id:"sanctionErrors.sanctionedEntityProhibited.errorMessage"}}),Q=(0,i().YK)({block_purged:{defaultMessage:"This page has passed the retention period and has been permanently deleted.",id:"blockRestorationErrors.blockPurged.errorMessage"}}),Z=(0,i().YK)({marketplace_export_purchases_csv_over_rate_limit:{defaultMessage:"You can only export purchases CSV once every hour.",id:"marketplaceExportPurchasesCSVError.overRateLimit"}}),X=(0,i().YK)({slug_unavailable:{defaultMessage:"Sorry, slug is taken by {pageName}",id:"updateSlug.unavailableSlug"},slug_invalid:{defaultMessage:"Sorry, slug is not valid",id:"updateSlug.invalidSlug"}}),J=(0,i().YK)({cross_space_chart_view:{defaultMessage:"Charts are not available on cross workspace views",id:"crossSpaceError.crossSpaceChartView"}}),ee=(0,i().YK)({cant_access_workspace_from_network:{defaultMessage:"Unfortunately, we can’t access this workspace from your network. Please try again from a different network.",id:"cantAccessWorkspaceFromNetworkError.cantAccessWorkspaceFromNetwork"},cant_access_workspace_from_client:{defaultMessage:"Unfortunately, we can’t access this workspace from your current client. Please use a client approved by your organization to access this workspace.",id:"cantAccessWorkspaceFromNetworkError.cantAccessWorkspaceFromClient"}});function te(e){const{type:t}=e;return(0,r().O)(a,t)&&a[t]||(0,r().O)(s,t)&&s[t]||(0,r().O)(l,t)&&l[t]||(0,r().O)(c,t)&&c[t]||(0,r().O)(p,t)&&p[t]||(0,r().O)(g,t)&&g[t]||(0,r().O)(f,t)&&f[t]||(0,r().O)(b,t)&&b[t]||(0,r().O)(y,t)&&y[t]||(0,r().O)(S,t)&&S[t]||(0,r().O)(w,t)&&w[t]||(0,r().O)(v,t)&&v[t]||(0,r().O)(_,t)&&_[t]||(0,r().O)(k,t)&&k[t]||(0,r().O)(I,t)&&I[t]||(0,r().O)(x,t)&&x[t]||(0,r().O)(A,t)&&A[t]||(0,r().O)(C,t)&&C[t]||(0,r().O)(T,t)&&T[t]||(0,r().O)(M,t)&&M[t]||(0,r().O)(P,t)&&P[t]||(0,r().O)(h,t)&&h[t]||(0,r().O)(B,t)&&B[t]||(0,r().O)(L,t)&&L[t]||(0,r().O)(N,t)&&N[t]||(0,r().O)(D,t)&&D[t]||(0,r().O)(R,t)&&R[t]||(0,r().O)(E,t)&&E[t]||(0,r().O)(Y,t)&&Y[t]||(0,r().O)(V,t)&&V[t]||(0,r().O)(U,t)&&U[t]||(0,r().O)(F,t)&&F[t]||(0,r().O)(W,t)&&W[t]||(0,r().O)(q,t)&&q[t]||(0,r().O)(O,t)&&O[t]||(0,r().O)(K,t)&&K[t]||(0,r().O)(G,t)&&G[t]||(0,r().O)(O,t)&&O[t]||(0,r().O)(Q,t)&&Q[t]||(0,r().O)(Z,t)&&Z[t]||(0,r().O)(j,t)&&j[t]||(0,r().O)(X,t)&&X[t]||(0,r().O)(z,t)&&z[t]||(0,r().O)(H,t)&&H[t]||(0,r().O)(J,t)&&J[t]||(0,r().O)(ee,t)&&ee[t]||void 0}function ne(e,t){const n=re(e,ie(t.clientData));if(n)return n}function oe(e,t){const n=t.body;if((0,o().op4)(n)){const t=ne(e,n);if(t)return t}if(t.offline)return e.formatMessage(k.offline);switch(t.status){case 429:case 502:case 503:case 504:return e.formatMessage($.defaultTryAgainLater,{errorCode:t.status});default:return e.formatMessage($.default,{errorCode:t.status})}}function ie(e){return(0,o().mdR)(e)&&e.errors[0].clientData?e.errors[0].clientData:e}function re(e,t){const n=te(t);if(n)return"messageValues"in t?e.formatMessage(n,t.messageValues):e.formatMessage(n)}function ae(e,t){if((0,o().pA8)(t)){const n=te(t.clientData);if(n)return"messageValues"in t.clientData?e.formatMessage(n,t.clientData.messageValues):e.formatMessage(n)}return e.formatMessage(w.generic_error)}},898808:(e,t,n)=>{n.d(t,{x:()=>m});n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(278238),s=()=>n(945778),l=()=>n(614505),c=()=>n(640653),d=()=>n(351360),u=()=>n(630116),p=n(474848);function m(e){const{store:t,size:n=16,innerInitialSize:m,innerEmojiOrFlatIconSize:g,style:f,iconContainerStyles:v,iconBoxStyles:h,disabled:_=!1,onChange:b=(()=>{})}=e,y=(0,o().v3)(),{name:S,icon:w}=(0,i().K8)((()=>{const n=e.parentSpaceStore??d().default.state.currentSpaceStore;return t?t instanceof u().h4?{name:t.getName(),icon:e.icon??t.getIcon()}:{name:(0,c().GK)(y,t),icon:e.icon??(0,c().c2)(y,t)}:{name:n&&`team-icon-${n.id}`,icon:e.icon}}),[t,y,e.icon,e.parentSpaceStore],{useDeepEqual:!0}),k=!(null!=w&&w.icon)||(0,a().T8)(w.icon)||(0,s().A)(w.icon),I=!(null!=w&&w.icon),x=(0,r().IS)((e=>({backgroundContainer:{...k?{background:w&&(0,a().T8)(w.icon)?(0,a().ez)({icon:w.icon,mode:e.mode,useLightGrayColor:!1}):e.regularDividerColor,width:n,height:n,...v}:{},...f},iconBox:{background:"unset",...h}})),[w,h,v,k,n,f]),A=e.iconLoggingData||t&&{recordTable:t.table,source:"team_settings"},C=k&&(!I||m);return(0,p.jsx)(l().B,{title:S,icon:w,size:C?m??.9*n:n,emojiSize:k?g??.78*n:n,isEmptyPage:!1,style:x.backgroundContainer,iconBoxStyles:x.iconBox,isLarge:!0,largeIcon:!0,iconLoggingData:A,..._?{disabled:!0}:{disabled:!1,onChange:b,bucket:"public"},mediaPickerTabs:["icon","emoji","custom"]})}},899038:(e,t,n)=>{n.d(t,{P_:()=>u,aZ:()=>p,s9:()=>d,IA:()=>c});const o={TypeScript:async()=>({plugins:[(await n.e(46030).then(n.t.bind(n,546030,23))).default],parser:"babel"}),JavaScript:async()=>({plugins:[(await n.e(46030).then(n.t.bind(n,546030,23))).default],parser:"babel"}),GraphQL:async()=>({plugins:[(await n.e(53491).then(n.t.bind(n,853491,23))).default],parser:"graphql"}),HTML:async()=>({plugins:[(await n.e(25409).then(n.t.bind(n,325409,23))).default],parser:"html"}),CSS:async()=>({plugins:[(await n.e(64583).then(n.t.bind(n,564583,23))).default],parser:"css"}),Scss:async()=>({plugins:[(await n.e(64583).then(n.t.bind(n,564583,23))).default],parser:"scss"}),JSON:async()=>({plugins:[(await n.e(46030).then(n.t.bind(n,546030,23))).default],parser:"json"}),XML:async()=>({plugins:[await Promise.all([n.e(62475),n.e(32212),n.e(20148)]).then(n.t.bind(n,520148,23))],parser:"xml",prettierOptionsOverride:{xmlWhitespaceSensitivity:"ignore"}}),Rust:async()=>({plugins:[await Promise.all([n.e(32212),n.e(76537)]).then(n.bind(n,776537))],parser:"jinx-rust"})};var i=()=>n(919709),r=()=>n(896628),a=()=>n(246826),s=()=>n(319975),l=()=>n(751156);function c(e){const{blocks:t,language:n,transaction:o}=e,r=i().x9d(n);for(const i of t)a().zv({store:i.getPropertiesStore(),data:{language:r},transaction:o})}function d(e){const{environment:t,blocks:n,previewFormat:o}=e;l().createAndCommit({userAction:"codeBlockActions.setPersistedCodePreviewFormat",environment:t,canUndo:!0,perform:e=>{r().zA({stores:n,update:{code_preview_format:o},transaction:e})}})}async function u(e){const{codeSnippet:t,language:i}=e,r=o[i];if(!r)return;const{parser:a,plugins:s,prettierOptionsOverride:l}=await r();let c="";try{c=(await n.e(73891).then(n.t.bind(n,873891,23))).format(t,{parser:a,plugins:s,...l})}finally{if(!c||c===t)return}return c=function(e){const t=e.split("\n");t.length>0&&""===t[t.length-1].trim()&&t.pop();return t.join("\n")}(c),c}async function p(e){const{codeBlockStore:t,environment:n}=e,{title:o,language:r}=t.getProperties(),a=i().q4_(o);if(!a||0===a.length)return;const c=i().q4_(r),d=await u({codeSnippet:a,language:c});if(!d)return;const p=i().x9d(d);l().createAndCommit({userAction:"codeBlockActions.formatCode",environment:n,canUndo:!0,perform:e=>{s().R9({environment:t.environment,store:t.getBlockTitleStore(),value:p,transaction:e})}})}},899193:(e,t,n)=>{n.d(t,{DW:()=>a,L7:()=>s,n_:()=>r});var o=()=>n(973647),i=()=>n(545206);function r(e){i().A.update((t=>({...t,[e]:{taskStatus:"in_progress",completeBlocks:0,totalBlocks:0}})))}function a(e,t){const n={taskStatus:e.taskStatus,...o().Q.isSuccess(e)?{completeBlocks:e.value.completeBlocks,totalBlocks:e.value.totalBlocks}:{}};i().A.update((e=>({...e,[t]:n})))}function s(e){i().A.update((t=>({...t,[e]:void 0})))}},899453:(e,t,n)=>{n.d(t,{K6:()=>r,c3:()=>l,j$:()=>s,zB:()=>a});var o=()=>n(878060),i=()=>n(751156);function r(e){const{environment:t,store:n,propertyId:r,id:a,position:s,transaction:l}=e;let c;c="before"===s.type?{pointer:n.pointer,path:["properties",r],command:"addRelationBefore",args:{id:a,spaceId:n.getSpaceId(),before:s.before}}:{pointer:n.pointer,path:["properties",r],command:"addRelationAfter",args:{id:a,spaceId:n.getSpaceId(),after:s.after}},i().applyOperation({store:n,operation:c,transaction:l}),o().n({environment:t,store:n,relationPropertyId:r})}function a(e){const{environment:t,store:n,propertyId:r,id:a,transaction:s}=e;i().applyOperation({store:n,operation:{pointer:n.pointer,path:["properties",r],command:"removeRelation",args:{id:a,spaceId:n.getSpaceId()}},transaction:s}),o().n({environment:t,store:n,relationPropertyId:r})}function s(e){const{environment:t,sourceStore:n,destStore:o,propertyWithInverse:i,position:a,transaction:s}=e;r({environment:t,store:n,propertyId:i.property,id:o.id,position:a,transaction:s}),r({environment:t,store:o,propertyId:i.inverse,id:n.id,transaction:s,position:{type:"after"}})}function l(e){const{environment:t,sourceStore:n,destStore:o,propertyWithInverse:i,transaction:r}=e;a({environment:t,store:n,propertyId:i.property,id:o.id,transaction:r}),a({environment:t,store:o,propertyId:i.inverse,id:n.id,transaction:r})}},899677:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0,isPublicPageSearch:!1,searchMode:"default"}}closeAndResetMetricsState(){this.update((e=>({...e,open:!1,openAsPage:!1,openedTimeMs:void 0,sessionId:void 0})))}isOpen(){return this.state.open||this.state.openAsPage}}const i=new o},899963:(e,t,n)=>{n.d(t,{Bw:()=>S,Hr:()=>m,I:()=>R,KO:()=>_,Lt:()=>b,Nj:()=>I,PL:()=>y,Pz:()=>w,Qq:()=>g,Rf:()=>C,V3:()=>h,XI:()=>p,_R:()=>d,fE:()=>c,k0:()=>k,nT:()=>T,oU:()=>u,q:()=>l,r7:()=>v,r9:()=>M,tD:()=>f,ub:()=>s,wG:()=>P,x7:()=>B,ye:()=>A,zg:()=>x});var o=()=>n(946065),i=()=>n(989423),r=()=>n(644914),a=()=>n(946141);function s(e,t){i().vd(e,"reorder_outliner_section",t)}function l(e){i().vd(e,"sidebar_expand")}function c(e){i().vd(e,"sidebar_unexpand")}function d(e,t){i().vd(e,"open_comments_sidebar",t)}function u(e,t){i().vd(e,"open_updates_sidebar",t)}function p(e,t){i().vd(e,"updates_sidebar_tab_click",t)}function m(e,t){i().vd(e,"open_view_all_popover",t)}function g(e,t){i().vd(e,"select_page_from_view_all_popover",t)}function f(e,t){const{teamStore:n,...o}=t;a().rP(e,"outliner_item_toggle",{store:n,...o})}function v(e,t){a().rP(e,"outliner_team_toggle",t)}function h(e,t){i().vd(e,"outliner_section_toggle",t)}function _(e){i().vd(e,"click_nested_child_page")}function b(e,t){i().vd(e,"click_desktop_navigator",t)}function y(e){i().vd(e,"open_space_switcher")}function S(e){i().vd(e,"space_switcher_select_space")}function w(e){i().vd(e,"space_switcher_logout_click")}function k(e,t){i().vd(e,"pin_page",t)}function I(e,t){i().vd(e,"unpin_page",t)}function x(e,t){const{teamStore:n,...o}=t;a().rP(e,"click_outliner_item",{store:n,...(0,r().hX)({environment:e}),...o})}function A(e,t){const{outliner_type:n}=t;i().u4({environment:e,event:{eventName:"open_outliner_section_menu",eventProperties:{outliner_type:n,...(0,r().hX)({environment:e})}}})}function C(e,t){i().u4({environment:e,event:{eventName:"sort_outliner_section",eventProperties:{...t,...(0,r().hX)({environment:e})}}})}function T(e,t){const{outliner_type:n,option:a}=t;i().u4({environment:e,event:{eventName:"truncate_outliner_section",eventProperties:{outliner_type:n,option:a===o().vw?"None":a,...(0,r().hX)({environment:e})}}})}function M(e,t){const{outliner_type:n,auto_loaded:o}=t;i().u4({environment:e,event:{eventName:"open_outliner_section_overflow",eventProperties:{outliner_type:n,auto_loaded:o,...(0,r().hX)({environment:e})}}})}function P(e,t){const{auto_loaded:n}=t;i().u4({environment:e,event:{eventName:"open_assistant_pane",eventProperties:{auto_loaded:n,...(0,r().hX)({environment:e})}}})}function B(e,t){i().u4({environment:e,event:{eventName:"toggle_sidebar_section_panel",eventProperties:t}})}function R(e,t){const{sidebar_section_type:n,search_query:o,flow_id:r}=t;i().u4({environment:e,event:{eventName:"sidebar_pane_query_change",eventProperties:{sidebar_section:n,search_query:o,flow_id:r}}})}},900652:(e,t,n)=>{n.d(t,{Z8:()=>l,du:()=>d,n5:()=>s,zg:()=>c});var o=()=>n(401497),i=()=>n(340498),r=()=>n(941463),a=()=>n(441199);function s(){return r().Ay.getWidth()}function l(){const e=a().default.state.openState,t=a().default.state.mode;return"closed"===e||"closing"===e||"peek"===t?0:s()}function c(){return(0,o().IS)((e=>({button:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:28,width:28},icon:{fill:e.icon.secondary,width:i().Ev.default,height:i().Ev.default}})),[])}function d(){return a().default.isOpen()&&"assistant"===a().default.state.contentType}},900967:(e,t,n)=>{n.d(t,{J:()=>_,c:()=>h});n(581454);var o=()=>n(764880),i=()=>n(323316),r=(n(898992),n(803949),()=>n(728272));function a(e){const t=new(r().d);return e&&e.forEach((e=>{e&&t.add(e.pointer)})),t}var s=()=>n(179034),l=()=>n(343666),c=()=>n(161479),d=()=>n(798880),u=()=>n(496603),p=()=>n(534177),m=()=>n(590604),g=()=>n(630116);function f(e,t){const n=u().oE(e.map((e=>function(e,t){if("comment_mention"===e.mentioned_from.type){const n=g().sk.createChildStore(t,{table:l().SN,id:e.mentioned_from.comment_id,spaceId:(0,c().e)(void 0)});if(!n.isDefined())return;const o=g().sk.createChildStore(t,n.getParentPointer());if(!o.isDefined())return;const i=g().Bv.createChildStore(t,{table:s().ev,id:o.getParentId()}),r=i.getNavigableBlockStore();if(!r)return;return i.id===r.id?{backlinkStore:r,timestamp:n.getLastEditedTime()}:{backlinkStore:r,scrollToBlockId:i.id,discussionId:o.id,timestamp:n.getLastEditedTime()}}if("reference"===e.mentioned_from.type){const n=g().Bv.createChildStore(t,{table:s().ev,id:e.mentioned_from.parent_block_id}).getNavigableBlockStore();if(!n)return;const o=n.getLastEditedTime();return{backlinkStore:n,scrollToBlockId:e.block_id,timestamp:o||0}}if("property_mention"===e.mentioned_from.type){const{block_id:n}=e.mentioned_from,o=g().Bv.createChildStore(t,{table:s().ev,id:n});if(!o.isDefined())return;const i=o.getNavigableBlockStore();if(!i)return;return i.id===o.id?{backlinkStore:i,timestamp:o.getLastEditedTime()}:{backlinkStore:i,scrollToBlockId:o.id,timestamp:o.getLastEditedTime()}}if("collection_reference"===e.mentioned_from.type){const{block_id:n}=e.mentioned_from,o=g().Bv.createChildStore(t,{table:s().ev,id:n});if(!o.isDefined())return;const i=o.getNavigableBlockStore();if(!i)return;return i.id===o.id?{backlinkStore:i,timestamp:o.getLastEditedTime()}:{backlinkStore:i,scrollToBlockId:o.id,timestamp:o.getLastEditedTime()}}if("alias"===e.mentioned_from.type||"transclusion_reference"===e.mentioned_from.type){const n=g().Bv.createChildStore(t,{table:s().ev,id:e.mentioned_from.pointer.id}),o=n.getNavigableBlockStore();if(!o)return;return{backlinkStore:o,scrollToBlockId:n.id,timestamp:o.getLastEditedTime()}}(0,p().HB)(e.mentioned_from)}(e,t)))),o=u().$z(n,(e=>{let{backlinkStore:t}=e;return t.id})),i=Object.values(o).map((e=>u().Ul(e,(e=>e.discussionId?2:e.scrollToBlockId?1:0))[0]));return i.sort(((e,t)=>t.timestamp-e.timestamp)),i}function v(e,t,n){const o=e.pointer,s=t.backlinks.map(i().xP).concat([o]),l=(0,m().uI)({actorPointers:a([n]),recordPointers:new(r().d)(s),getRecordModel:e.getRecordModel});return(0,i().Dm)({actor:n,backlinks:t.backlinks,getRecordModel:e.getRecordModel,actorHasPermissionViaPublicAccessOnlyFn:e=>{const{actor:t,recordPointer:n}=e;return(0,m().eV)({actor:t,recordPointer:n,permissionsContext:l})},sourceBlockRecordPointer:o})}function h(e,t){const{id:n}=t.currentUser;let i;if(n){const t=e.getRecordModel({table:d().oo,id:n});t&&(i=(0,o().A7)(t))}const r=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:n});if(0===r.backlinks.length)return{backlinks:[],inaccessibleBacklinkCount:0};const a=v(e,r,i);return 0===a.length?{backlinks:[],inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}:{backlinks:f(a,e),inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}}function _(e,t){const{id:n}=t.currentUser;let i;if(n){const t=e.getRecordModel({table:d().oo,id:n});t&&(i=(0,o().A7)(t))}const r=t.LocalBacklinkStore.getBacklinkState({blockId:e.id,currentUserId:n});return 0===r.backlinks.length?{backlinksCount:0,inaccessibleBacklinkCount:0}:{backlinksCount:v(e,r,i).length,inaccessibleBacklinkCount:r.inaccessibleBacklinkCount}}},901265:(e,t,n)=>{n.d(t,{VN:()=>m,WU:()=>p,it:()=>u});var o=()=>n(476492),i=()=>n(695625),r=()=>n(644914),a=()=>n(407054),s=()=>n(195613),l=()=>n(411671),c=()=>n(666710),d=()=>n(946141);function u(e){var t;const{environment:n,left:o,top:i,actionSectionGroupKey:r,showInput:c,stores:d,analyticsFrom:u,optionalAnalyticsProperties:p,pageAnnotationToken:m}=e,f=new DOMRect(o,i,1,1);a().A.setState({isActive:!0,inputValue:"",actionSectionGroupKey:r,stores:d,frameScrollTop:(null===(t=s().A.state.elementRef.current)||void 0===t?void 0:t.scrollTop)??0,originBlockRect:f,showInput:c,analyticsFrom:u,publicEditMode:d[0]?l().A.getMode(n,d[0]):void 0,collectionContextStore:null==p?void 0:p.collectionContextStore,clickedPageAnnotation:m}),g(n,{from:u,block_type:d[0]&&d[0].getType(),optionalAnalyticsProperties:p})}function p(e){const{environment:t,analyticsFrom:n,actionSectionGroupKey:o,stores:r,showInput:d}=e,u=i().T.findSelectableFromStore(r[0]);if(!u)return;const p=c().default.state.selectableRectMap.get(u);var m;p&&a().A.setState({isActive:!0,inputValue:"",actionSectionGroupKey:o,stores:r,frameScrollTop:(null===(m=s().A.state.elementRef.current)||void 0===m?void 0:m.scrollTop)??0,originBlockRect:p,showInput:void 0===d||d,analyticsFrom:n,publicEditMode:r[0]?l().A.getMode(t,r[0]):void 0});t&&g(t,{from:n,block_type:r[0]&&r[0].getType()})}function m(){a().A.setState({isActive:!1})}function g(e,t){const{optionalAnalyticsProperties:n,...i}=t,{teamStore:a,collectionContextStore:s,...l}=t.optionalAnalyticsProperties||{},c=(0,o().sl)(s)||{};d().rP(e,"open_block_menu",{store:a,...(0,r().hX)({environment:e}),...c,...i,...l})}},901389:(e,t,n)=>{n.d(t,{Gh:()=>_,Qg:()=>v,_0:()=>l,c1:()=>g,f1:()=>u,k5:()=>p,rG:()=>h,tW:()=>f,ui:()=>d,xh:()=>c,y$:()=>m,zw:()=>b});var o=()=>n(416845),i=()=>n(496603),r=()=>n(898486),a=()=>n(972435),s=()=>n(597368);const l=(0,n(959013).YK)({dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"},acceptButtonLabel:{defaultMessage:"Confirm",id:"dialog.acceptButton.label"},cancelButtonLabel:{defaultMessage:"Cancel",id:"dialog.cancelButton.label"},genericErrorMessage:{id:"dialog.genericErrorMessage",defaultMessage:"An unexpected error occurred"},logoutButtonLabel:{id:"dialog.logoutButtonLabel",defaultMessage:"Log out"},tryAgainButtonLabel:{id:"dialog.tryAgainButtonLabel",defaultMessage:"Try again"}}),c={title:{fontSize:16,fontWeight:n(284371).Wy.medium}};function d(e){s().A.reset(),s().A.setState({...e,open:!0})}function u(e){return g(e)}function p(e,t){return g(e)}function m(e,t){return g(e)}function g(e){e||(e=a().A.formatMessage(l.genericErrorMessage)),d({message:e,showCancel:!1,keepFocus:!1,items:[{label:a().A.formatMessage(l.dismissButtonLabel),onAccept:i().D_}],allowCopy:"string"==typeof e||void 0})}(0,n(604341).exposeDebugValue)("showErrorDialog",p);const f=i().nF(g,3e4);function v(e,t,n){if(e.offline)return;const s=(0,r().Hu)(a().A.getIntl(),e),c=e.body;d({message:s,debugInfo:(0,o().OwV)(c)&&c.debugMessage?{message:c.debugMessage,messagePrefix:t}:void 0,showCancel:!1,keepFocus:!1,items:n||[{label:a().A.formatMessage(l.dismissButtonLabel),onAccept:i().D_}]})}function h(e){const{message:t,onAccept:n,acceptLabel:o,innerStyle:r}=e;d({message:t,showCancel:!1,keepFocus:!1,items:[{label:o||a().A.formatMessage(l.dismissButtonLabel),onAccept:n||i().D_}],innerStyle:r})}function _(e){return new Promise((t=>{d({showCancel:!1,keepFocus:!1,message:e.message,description:e.description,selectionItems:e.selectionItems,onDismiss(){t({accept:!1})},items:[{label:e.acceptLabel||a().A.formatMessage(l.acceptButtonLabel),color:"acceptColor"in e?e.acceptColor:"red",className:"notion-dialog-renderer-accept-item",onAccept:e=>{t({accept:!0,selectionResult:e})},buttonType:"acceptButtonType"in e?e.acceptButtonType:"solid"},{label:e.cancelLabel||a().A.formatMessage(l.cancelButtonLabel),onAccept:e=>{t({accept:!1})},color:"cancelColor"in e?e.cancelColor:void 0,buttonType:"cancelButtonType"in e?e.cancelButtonType:"outline"}],innerStyle:{textAlign:e.textAlign||"center"},icon:e.icon,mode:e.mode})}))}function b(){var e,t;null===(e=(t=s().A.state).onDismiss)||void 0===e||e.call(t),s().A.setState({...s().A.state,open:s().A.state.fatal||!1,onDismiss:void 0})}},901497:(e,t,n)=>{n.d(t,{J:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("magnifyingGlass",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.321 6.28c0 .751.142 1.458.424 2.118a5.52 5.52 0 001.176 1.737 5.51 5.51 0 001.736 1.175 5.326 5.326 0 002.12.424c.592 0 1.157-.09 1.695-.273a5.639 5.639 0 001.476-.752l3.364 3.37a.8.8 0 00.266.171c.1.041.205.062.315.062a.766.766 0 00.683-.397.83.83 0 00.041-.718.715.715 0 00-.164-.253L11.11 9.581c.351-.456.625-.964.82-1.524.201-.56.301-1.153.301-1.778 0-.752-.14-1.456-.423-2.112a5.497 5.497 0 00-2.92-2.919A5.284 5.284 0 006.777.824c-.752 0-1.458.141-2.119.424a5.52 5.52 0 00-2.912 2.919 5.284 5.284 0 00-.424 2.112zm1.17 0A4.204 4.204 0 013.74 3.25a4.286 4.286 0 011.367-.923 4.179 4.179 0 011.668-.335 4.13 4.13 0 011.662.335 4.19 4.19 0 011.367.923c.392.392.7.848.922 1.367a4.13 4.13 0 01.335 1.661c0 .593-.111 1.149-.335 1.668a4.357 4.357 0 01-2.29 2.283 4.13 4.13 0 01-1.66.335 4.179 4.179 0 01-1.669-.335 4.357 4.357 0 01-2.29-2.283A4.254 4.254 0 012.49 6.28zM6.79 9.15c.114 0 .187-.066.219-.198.068-.369.137-.683.205-.943.068-.26.153-.474.253-.643.1-.173.23-.314.39-.424a2.01 2.01 0 01.628-.26 8.31 8.31 0 01.964-.184c.137-.018.205-.091.205-.219 0-.127-.068-.205-.205-.232a8.214 8.214 0 01-.97-.178 2.217 2.217 0 01-.643-.266 1.355 1.355 0 01-.403-.417 2.49 2.49 0 01-.246-.643 10.063 10.063 0 01-.178-.93c-.023-.136-.096-.205-.219-.205s-.2.066-.232.198c-.073.374-.144.69-.212.95A2.49 2.49 0 016.1 5.2c-.1.169-.233.308-.397.417a2.14 2.14 0 01-.622.26c-.255.064-.574.12-.957.17-.141.028-.212.106-.212.233 0 .123.07.196.212.22.479.05.864.12 1.155.211.292.087.518.216.677.39.164.173.287.41.37.71.086.297.163.675.232 1.135.009.06.034.11.075.15a.228.228 0 00.157.055z"})})},901801:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(419494);const i=["adClick","fbp"];const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(o().Ay)({namespace:e,important:t,trackingType:"targeting"})}get(e){return this.localStorageStore.get(e)}set(e,t){return this.localStorageStore.set(e,t)}remove(e){return this.localStorageStore.remove(e)}removeAllIfNoPermission(){this.localStorageStore.hasPermissionForTrackingType||i.forEach((e=>this.remove(e)))}}(o().Bq,!1)},901952:(e,t,n)=>{n.d(t,{V:()=>a});var o=()=>n(476492),i=()=>n(193722),r=()=>n(504066);function a(e){const{environment:t,collectionContextStore:n,property:a,from:s,action:l,new_property_type:c,...d}=e,u=n.normalizedSchemaStore.state[a],p=(0,o().sl)(n)||{};(0,i().L)(t,{property_type:null==u?void 0:u.type,new_property_type:c,property:a,from:s,action:l,...d,...p}),(0,r().f)({action:l,from:"property_settings",property_type:null==u?void 0:u.type,new_property_type:c,collectionContextStore:n})}},901997:(e,t,n)=>{n.d(t,{Jg:()=>r,P$:()=>a,aU:()=>l,uZ:()=>s});var o=()=>n(989423),i=()=>n(508496);function r(e){o().vd(e,"open_emoji_menu")}function a(e,t){const{searchQuery:n,...i}=t;o().vd(e,"emoji_no_results",i)}function s(e,t,n){o().vd(e,t,n)}function l(e,t,n){o().vd(e,t,n),i().default.logEvent(t,n.icon)}},902731:(e,t,n)=>{n.d(t,{IX:()=>u,jS:()=>m,oU:()=>p});var o=()=>n(908006),i=()=>n(161479),r=()=>n(763824),a=()=>n(878523),s=()=>n(778417),l=()=>n(725614),c=()=>n(404783),d=()=>n(21510);async function u(e){const{environment:t,discussionStore:n,rect:u,blockStore:p,discussionLocation:m,activityId:g,notificationId:f}=e,v=new(c().A)(t,(0,i().e)(p.pointer.spaceId));d().A.setState({open:!0,rect:u,discussionStore:n,discussionInputStore:v,blockStore:p,discussionLocation:m,activityId:g,notificationId:f}),s().IU({preventDismissMobileKeyboard:!0,environment:t}),await o().default.afterNextFlush(),"post_top_level_discussion"!==m&&(await(0,r().wR)(10),l().setSelectionAtEnd({store:v.state.textStore})),a().nq({environment:t,from:m,activityId:g,notificationId:f})}function p(e){const t=d().A.state;if(t.open){const{discussionLocation:n,activityId:o,notificationId:i}=t;d().A.setState({open:!1,rect:t.rect,prevDiscussionLocation:n}),s().IU({environment:e}),a().Xy({environment:e,from:n,activityId:o,notificationId:i})}}function m(e){const t=d().A.state;if(t.open){0===t.discussionStore.getComments().length&&p(e)}}},903706:(e,t,n)=>{n.d(t,{C:()=>v,A:()=>_});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(959013),l=()=>n(621979),c=()=>n(962730),d=()=>n(574012),u=()=>n(888789),p=n(474848);const m=o.forwardRef((function(e,t){const{autosize:n,autosizeMaxHeight:i,autosizeMinHeight:r,style:a,textareaElementAttributes:s,value:l,...c}=e,d=(0,o.useRef)(null),[u,m]=(0,o.useState)(r??"auto");(0,o.useEffect)((()=>{var e;if(!n)return;const t=null===(e=d.current)||void 0===e?void 0:e.scrollHeight;"number"==typeof t&&m(Math.min(Math.max(t,r||20),i||1/0))}),[n,r,i,l]);const g=n?{rows:1,style:{outliner:"none",overflow:i?"auto":"hidden",height:u,border:"1px solid black",...a}}:{rows:void 0===(null==s?void 0:s.rows)?3:null==s?void 0:s.rows,style:a};return(0,p.jsxs)("div",{style:{display:"block",position:"relative",width:"100%"},children:[(0,p.jsx)("div",{"aria-hidden":!0,style:{position:"absolute",padding:"inherit",width:"100%",top:-1e4,left:-1e4,overflowWrap:"break-word",whiteSpace:"pre-wrap"},children:(0,p.jsxs)("div",{style:a,ref:d,children:[l,null!=l&&l.endsWith("\n")?(0,p.jsx)("br",{}):null]})}),(0,p.jsx)("textarea",{ref:t,...c,...s,...g})]})})),g=o.forwardRef((function(e,t){const{autosize:n,value:i,style:r,inputElementAttributes:a,customElementAttributes:s,...l}=e,c=(0,o.useRef)(null),[d,u]=(0,o.useState)("auto");return(0,o.useEffect)((()=>{var e;if(!n)return;const t=null===(e=c.current)||void 0===e?void 0:e.offsetWidth;"number"==typeof t&&u(Math.max(t,20))}),[n,i]),(0,p.jsxs)(p.Fragment,{children:[n&&(0,p.jsx)("div",{"aria-hidden":!0,style:{position:"absolute",top:-1e4,left:-1e4},children:(0,p.jsx)("span",{style:r,ref:c,children:i})}),(0,p.jsx)("input",{ref:t,...l,style:{...r,...n?{width:d}:{}},...a,...s})]})})),f=(0,s().YK)({clearInputLabel:{id:"input.clearInputLabel",defaultMessage:"Clear Input"}});let v=function(e){return e[e.Default=0]="Default",e[e.Transparent=1]="Transparent",e[e.Small=2]="Small",e[e.Large=3]="Large",e[e.ExtraLarge=4]="ExtraLarge",e}({});const h=o.forwardRef((function(e,t){const{value:l,forceShowClearButton:u,showClearButton:m,icon:g,onIconClick:h,onClearButtonClick:_,onChange:w,format:k,style:I,left:x,maxlength:A,isRightLastElementOfInput:C,right:T,rightStyle:M,clearButtonStyle:P,textarea:B,autosize:R,focusAfterAnimation:E,focusInitial:D,focus:N,selectAll:L,preventScrollOnFocus:O,errorOutline:U,suppressFocusRing:F=!1,...V}=e,j=(0,s().tz)(),z=(0,a().DP)(),H=(0,i().v3)(),{isMobile:W}=(0,i().Y0)(),q=u||m&&l&&l.length>0,K=(0,o.useRef)(!0),G=(0,o.useRef)(null),[$,Y]=(0,n(819121).A)(),Q=(0,n(93583).A)(t,G,$);(0,o.useLayoutEffect)((()=>{const e=G.current,t=l??"";e&&t!==e.value&&(e.value=t)}),[l]),(0,o.useEffect)((()=>{if(K.current&&(K.current=!1,D)){const e=G.current;y(H,e,E,L,O)}})),(0,o.useEffect)((()=>{function e(){var e;const{device:t}=H;if(!t.isMobileNative)return;const o=G.current;if(!o)return;if(null===(e=window)||void 0===e||!e.document.hasFocus())return;const i=window.document.activeElement;i&&i===o&&(0,n(953418).uf)({environment:H,el:o,windowHeight:H.WindowSizeStore.state.height,minEdgeDist:64})}return e(),d().A.addListener(e),()=>{d().A.removeListener(e)}}),[H,G]),(0,o.useEffect)((()=>{const e=G.current;if(void 0!==N)if(N)y(H,e,E,L,O);else{var t;(null===(t=window)||void 0===t?void 0:t.document.activeElement)===e&&(null==e||e.blur())}}),[R,N,E,L,H,O]);const Z=(0,o.useCallback)((e=>{if(_)_();else{const t=G.current;if(t&&(t.value=""),w){const t=e;t.target.value="",w(t)}null==t||t.focus()}}),[G,_,w]),X=(0,r().K8)((()=>b()),[]),J=(0,a().IS)((e=>{const t={display:"flex",alignItems:"center",width:"100%",fontSize:14,lineHeight:"20px",position:"relative",borderRadius:6,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",...!X&&{paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10}};return{default:t,small:{...t,fontSize:12,lineHeight:"16px"},large:{...t,fontSize:15,lineHeight:"26px"},extraLarge:{...t,fontSize:17,lineHeight:"32px"},transparent:{display:"flex",alignItems:"center",border:"none",padding:0,width:"100%",background:n(100622).Ay.transparent,fontSize:"inherit",lineHeight:"inherit"},focusRing:{boxShadow:e.outlineBlueInputBoxShadow},errorOutline:{boxShadow:e.outlineRedInputBoxShadow}}}),[X]);return(0,p.jsxs)("div",{style:{...(k===v.Default||!k)&&J.default,...k===v.Small&&J.small,...k===v.Large&&J.large,...k===v.ExtraLarge&&J.extraLarge,...k===v.Transparent&&J.transparent,...I,...Y&&k!==v.Transparent&&k!==v.ExtraLarge&&!F&&J.focusRing,...Y&&U&&J.errorOutline},children:[x&&(0,p.jsx)("div",{style:{marginRight:6},children:x}),(0,p.jsx)(S,{ref:Q,...V,autosize:R,textarea:B,value:l,onChange:w,maxLength:A}),!C&&T&&(0,p.jsx)("div",{style:{marginLeft:4,...M},children:T}),g&&(0,p.jsx)(n(704152).A,{onClick:h,style:{flexShrink:0,flexGrow:0,borderRadius:W?24:20},children:g},"icon"),q&&(0,p.jsx)(n(859428).A,{renderTooltip:()=>(0,p.jsx)(s().sA,{...f.clearInputLabel}),placement:c().W.Bottom,alignment:c().C.Start,disableTooltip:H.device.isMobile,delayThreshold:400,render:e=>(0,p.jsx)(n(285790).A,{...e,ariaLabel:j.formatMessage(f.clearInputLabel),icon:n(931121).J,onClick:Z,iconStyle:{width:16,height:16,fill:z.lightIconColor},style:{flexShrink:0,flexGrow:0,borderRadius:W?24:20,marginRight:-4,...P,...B&&{alignSelf:"baseline",marginTop:4}}})}),C&&T&&(0,p.jsx)("div",{style:{marginLeft:4,...M},children:T})]})})),_=o.memo(h,(()=>!1));function b(){return Boolean(n(508496).default.checkGate({gateName:"input_padding"}))}function y(e,t,o,i,r){var a;const{device:s}=e;if((null===(a=window)||void 0===a?void 0:a.document.activeElement)===t)return;const l=async()=>{s.isMobileNative&&await u().KP.waitUntil((()=>!u().KP.state)),i&&t?(0,n(375555).G)(e,t):null==t||t.focus({preventScroll:r})};s.isMobile&&o?setTimeout((()=>{n(908006).default.afterNextFlush((async()=>await l()))}),10):window.requestAnimationFrame((async()=>await l()))}const S=o.forwardRef((function(e,t){const{onKeyDown:s,textarea:c,textareaSubmitOnEnter:d,onSubmit:u,onCancel:f,ignoreKeyboardMode:v,inputStyle:h,readOnly:_,overrideDefaultWidth:y,type:S,inputClassName:w,name:k,preventSafariAutofill:I,value:x,autosize:A,autosizeMinHeight:C,autosizeMaxHeight:T,textareaElementAttributes:M,suggestedText:P,inputElementAttributes:B,customElementAttributes:R,suggestedTextStyle:E,...D}=e,N=(0,a().DP)(),L=(0,i().v3)(),O=(0,r().K8)((()=>b()),[]),U=(0,o.useCallback)((e=>{v||n(732770).A.setKeyboardMode(!0),null==s||s(e),(0,l().A)(L,e,"esc")&&f&&f(e),c&&d&&(0,l().A)(L,e,"enter")&&e.preventDefault();(c&&!d?(0,l().A)(L,e,["command+enter","ctrl+enter"]):(0,l().A)(L,e,"enter"))&&u&&u(e)}),[L,s,c,d,u,f,v]),F=(0,a().IS)((()=>({input:{fontSize:"inherit",lineHeight:"inherit",border:"none",background:"none",width:y?void 0:"100%",display:"block",resize:"none",padding:0,..._?{opacity:.5}:{},...O?{padding:"4px 10px"}:{},...h??{}}})),[y,h,_,O]),V={...D,readOnly:_,style:F.input,onKeyDown:U,type:S||"text",className:w,name:k||(I?"search":void 0)};return c?(0,p.jsx)(m,{ref:t,value:x,autosize:A,autosizeMinHeight:C,autosizeMaxHeight:T,textareaElementAttributes:M,...V},"textarea"):void 0!==P?(0,p.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,p.jsx)("input",{ref:t,...V,...B,...R}),(0,p.jsx)("div",{style:{color:N.text.tertiary,position:"absolute",top:0,pointerEvents:"none",width:"100%",...n(284371).RC,...E},children:P})]}):(0,p.jsx)(g,{ref:t,value:x,autosize:A,inputElementAttributes:B,customElementAttributes:R,...V})}))},903972:(e,t,n)=>{n.d(t,{w:()=>o});const o=new(n(645873).O2)("emojiData",(async()=>(await n.e(65015).then(n.bind(n,208294))).default))},905654:(e,t,n)=>{n.d(t,{EB:()=>u,EU:()=>m,Nz:()=>d,Sw:()=>c,T_:()=>l,kD:()=>p});var o=()=>n(662303),i=()=>n(427704),r=()=>n(677338),a=()=>n(529543),s=()=>n(508496);function l(e){const{mobileNative:t}=e;if(t){const n=Boolean(t.sqliteConnection),o=a().canSetCookie(e);return n&&o}return!0}function c(e){return"en-US"===o().locale&&(e.device.isElectron&&s().default.checkGate({gateName:"desktop_app_signup_hide_passcode"})||e.device.isMobileNative&&e.device.isIOS&&s().default.checkGate({gateName:"ios_app_signup_hide_passcode"}))}function d(){const e=m();return e===i().JZ.signupMail||e===i().JZ.loginMail}function u(){const e=m();return e===i().JZ.signupCalendar||e===i().JZ.loginCalendar}function p(){d()?r().Ht("mail"):u()&&r().Ht("calendar")}function m(){return window.location.pathname.endsWith("/")?window.location.pathname.slice(0,window.location.pathname.length-1):window.location.pathname}},906380:(e,t,n)=>{n.d(t,{x:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M6.722 3.238a.625.625 0 1 0-.884.884L9.716 8l-3.878 3.878a.625.625 0 0 0 .884.884l4.32-4.32a.625.625 0 0 0 0-.884z"})},i=(0,n(340498).wt)("arrowChevronSingleRightSmall",o)},906537:(e,t,n)=>{n.r(t),n.d(t,{areRangesEqual:()=>E,clear:()=>S,containerOffsetIsBetweenNodes:()=>B,get:()=>v,getIncompleteDOMEndpoint:()=>b,getRect:()=>w,getSelectionRect:()=>k,isExpanded:()=>A,isMouseRightClicking:()=>j,isMouseSelecting:()=>V,rangeFromContainerOffsets:()=>C,rangeFromPoint:()=>I,rangeToContainerOffsets:()=>P,resetMouseRightClicking:()=>z,selectionIsBackwards:()=>O,set:()=>h,setDOMEndpoint:()=>y,setOnNode:()=>x,snapContainerOffsetToNode:()=>R,startListeners:()=>L,toRange:()=>M,toStaticRange:()=>T});n(16280);var o=()=>n(507707),i=()=>n(624919),r=()=>n(908006),a=()=>n(604341),s=()=>n(857639),l=()=>n(319625),c=()=>n(397248);const d=!1;new WeakMap;let u;const p=n(496603).Bj((()=>window.__isElectron?m:()=>window))();function m(){return!u||window.document.hasFocus()?(g("getWindow(): Returning main window because it has focus."),window):u?(g("getWindow(): Returning focused child window."),u):(g("getWindow(): Returning main window because nothing has focus"),window)}function g(){d&&console.log(...arguments)}var f=()=>n(728611);function v(){const e=p().getSelection();if(e&&e.rangeCount>0){return e.getRangeAt(0)}}function h(e,t){_.reset();const n=window.getSelection();if(n){if(t.isAndroid){const t=v();if(t&&E(t,e))return}if(!(t.isFirefox&&parseFloat(t.browserVersion)<92))try{return function(e,t){const{focus:n,anchor:o}=P(t);e.collapse(o.container,o.offset),e.extend(n.container,n.offset)}(n,e)}catch(o){s().log({from:"textSelection",type:"textSelectionSet",level:"error",error:(0,l().A)(o)})}return function(e,t){const n=document.createRange();n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset),e.removeAllRanges(),e.addRange(n)}(n,e)}}const _=new class{constructor(e){this.state=void 0,this.debugName=e,(0,a().exposeDebugInstance)("endpointLatch",this)}complete(e){if(this.state&&this.state.endpoint!==e.endpoint&&this.state.onlyIfEqual===e.onlyIfEqual){const t="start"===this.state.endpoint?this.state:e,n="end"===this.state.endpoint?this.state:e;return this.state=void 0,{start:t,end:n}}if(this.state){let t=`${this.debugName}: cannot complete latch:`;const n=this.state.endpoint===e.endpoint,o=this.state.onlyIfEqual!==e.onlyIfEqual;n&&(t+=` same endpoint ${e.endpoint}`),o&&(t+=" different tokens"),s().log({level:"warning",from:"EndpointLatch",type:"cannotCompleteLatch",data:{name:this.debugName,message:t,miscDataToConvertToString:{sameEndpoint:n,differentTokens:o}}})}this.state=e}reset(){this.state&&(s().log({level:"warning",from:"EndpointLatch",type:"resetPartialLatch",data:{name:this.debugName,message:`reset latch with endpoint ${this.state.endpoint}`}}),this.state=void 0)}}("domSelection");function b(){return _.state}function y(e,t){const n=_.complete(e);if(!n)return;const{start:o,end:i}=n;h(C({start:o.position,end:i.position}),t)}function S(e){_.reset();const t=window.getSelection();t&&(e.device.isMobile&&e.device.isAndroid?t.collapse(null,void 0):t.removeAllRanges())}function w(e){if(e){if(e.collapsed&&e.getClientRects){const t=e.getClientRects()[0];if(t)return new(c().z8)(t.left,t.top,t.width,t.height)}else if(e.getBoundingClientRect){const t=e.getBoundingClientRect();if(t)return new(c().z8)(t.left,t.top,t.width,t.height)}if(e.startContainer.nodeType===Node.ELEMENT_NODE){if(0===e.startOffset){const t=e.startContainer.getBoundingClientRect();return new(c().z8)(t.left,t.top,0,t.height)}const t=e.startContainer.childNodes[e.startOffset-1];if(t&&t.nodeType===Node.ELEMENT_NODE){const e=t.getBoundingClientRect();return new(c().z8)(e.left,e.top,0,e.height)}const n=e.startContainer.childNodes[e.startOffset];if(n&&n.nodeType===Node.ELEMENT_NODE){const e=n.getBoundingClientRect();return new(c().z8)(e.left,e.top,0,e.height)}}}}function k(){const e=v();if(e)return w(e)}function I(e,t){if(document.caretRangeFromPoint){return document.caretRangeFromPoint(e,t)??void 0}if(document.caretPositionFromPoint){const n=document.caretPositionFromPoint(e,t);if(null===n)return;const o=document.createRange();return o.setStart(n.offsetNode,n.offset),o.setEnd(n.offsetNode,n.offset),o}throw new Error("Browser does not support method caretRangeFromPoint or caretPositionFromPoint")}function x(e,t){const n=document.createRange();n.selectNode(e),h(n,t)}function A(e){return Boolean(e&&!e.collapsed)}function C(e){const{start:t,end:n}=e,o=document.createRange();if(t.container)try{o.setStart(t.container,t.offset)}catch(i){console.info(i)}if(n.container)try{o.setEnd(n.container,n.offset)}catch(i){console.info(i)}return o}function T(e){if(!e)return;const{startContainer:t,startOffset:n,endContainer:o,endOffset:i,collapsed:r}=e;return{startContainer:t,startOffset:n,endContainer:o,endOffset:i,collapsed:r}}function M(e){if(!e)return;const t=document.createRange();return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),t}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O();const n={container:e.startContainer,offset:e.startOffset},o={container:e.endContainer,offset:e.endOffset},[i,r]=t?[n,o]:[o,n];return{start:n,end:o,focus:i,anchor:r}}function B(e,t,n){if(!t&&!n)return!1;if(!t&&n){const t=document.createRange();return t.selectNode(n),-1===t.comparePoint(e.container,e.offset)}if(t&&!n){const n=document.createRange();return n.selectNode(t),1===n.comparePoint(e.container,e.offset)}if(t&&n){const o=document.createRange();return o.setStartAfter(t),o.setEndBefore(n),0===o.comparePoint(e.container,e.offset)}return!1}function R(e){const{nodesInDomOrder:t,containerOffset:n,snapTowards:o}=e;for(let i=0;i<=t.length;i++){const e=t[i-1],r=t[i];if(B(n,null==e?void 0:e.node,null==r?void 0:r.node))return"start"===o?e:r}}function E(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset&&e.collapsed===t.collapsed}const D=new class{constructor(){this.currentHasNonEmptySelection=!1,this.currentIsBackwards=void 0,this.mouseDownSelection=void 0}selectionIsBackwards(){return Boolean(this.currentHasNonEmptySelection&&this.currentIsBackwards)}updateSelectionDirection(e,t){if(!e||!t||t.collapsed)return this.currentHasNonEmptySelection=!1,void(this.currentIsBackwards=void 0);if(this.currentHasNonEmptySelection=!0,void 0===this.currentIsBackwards){const n=1===t.startContainer.childNodes.length&&t.startContainer.childNodes[0].TEXT_NODE&&t.startContainer.childNodes[0]===e.startContainer;if(e.startContainer===t.startContainer||n)this.currentIsBackwards=t.startOffset<e.startOffset;else{const n=(0,o().A)(t.startContainer,e.startContainer);this.currentIsBackwards=-1===n}}}startListeners(){window.addEventListener("mousedown",(()=>{r().default.afterNextFlush((()=>{this.mouseDownSelection=v()}))})),window.addEventListener("mouseup",(()=>{r().default.afterNextFlush((()=>{const e=v();this.updateSelectionDirection(this.mouseDownSelection,e)}))})),window.addEventListener("keydown",(()=>{const e=v();r().default.afterNextFlush((()=>{const t=v();this.updateSelectionDirection(e,t)}))}))}},N=new class{constructor(){this.mouseDown=!1,this.keysDown=0,this.wasBackwards=!1,this.device=void 0,this.debugDrawRects=()=>{const e=v();if(A(e)){const{focus:t,anchor:n}=P(e,this.wasBackwards),o=w(C({start:t,end:t}));o&&(0,i().Iz)(o,"FOCUS","red");const r=w(C({start:n,end:n}));r&&(0,i().Iz)(r,"ANCHOR","blue")}},this.handleSelectionChange=()=>{var e;(this.mouseDown||this.keysDown||null!==(e=this.device)&&void 0!==e&&e.isAndroid)&&(this.wasBackwards=function(){const e=window.getSelection();if(!e)return!1;const{focusNode:t,focusOffset:n,anchorNode:i,anchorOffset:r}=e;if(t===i)return n<r;return-1===(0,o().A)(t,i)}())},this.handleKeyDown=()=>{this.keysDown++},this.handleKeyUp=()=>{this.keysDown--},this.handleMouseDown=()=>{this.mouseDown=!0},this.handleMouseUp=()=>{this.mouseDown=!1}}startListeners(e){return this.device=e,document.addEventListener("selectionchange",this.handleSelectionChange),window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mousedown",this.handleMouseDown),window.addEventListener("mouseup",this.handleMouseUp),()=>{document.removeEventListener("selectionchange",this.handleSelectionChange),window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("mousedown",this.handleMouseDown),window.removeEventListener("mouseup",this.handleMouseUp)}}};function L(e){D.startListeners(),N.startListeners(e)}function O(){return D.currentIsBackwards||N.wasBackwards}(0,a().exposeDebugGetter)("selectionIsBackwards",O);let U=!1,F=!1;function V(){return U}function j(){return F}function z(){return F=!1}(0,f().P4)(window,"mousedown",(e=>{0===e.button?U=!0:2===e.button&&(F=!0)}),!0),(0,f().P4)(window,"mouseup",(e=>{0===e.button?U=!1:2===e.button&&(F=!1)}),!0)},906590:(e,t,n)=>{n.d(t,{Q:()=>r});n(898992),n(354520);var o=()=>n(77272),i=()=>n(850213);function r(e,t){if(t)return i().A.setState([e]),void o().A.setState({recentlyUsedColors:[e]});const n=o().A.state.recentlyUsedColors.filter((t=>t!==e));n.unshift(e),n.length>5&&n.pop(),o().A.state.recentlyUsedColors=n,i().A.setState([...n])}},906719:(e,t,n)=>{n.d(t,{A:()=>b});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(584262),l=()=>n(547392),c=()=>n(751156),d=()=>n(493823),u=()=>n(406699),p=()=>n(199896),m=()=>n(855801),g=()=>n(492414),f=()=>n(645873),v=()=>n(675811),h=()=>n(20039),_=n(474848);function b(e){const t=(0,i().v3)(),{device:n}=t,{store:b,showDivider:y,maxWidth:S,popupRenderer:w,iconSize:k,emojiSize:I,titleStyle:x,iconStyle:A,highlighter:C,onClick:T}=e,M=(0,a().IS)((()=>({selectable:{display:"flex",alignItems:"center",minWidth:0},button:{display:"flex",minWidth:0,fontSize:"inherit",paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}})),[]),{url:P,canEdit:B}=(0,r().K8)((()=>({url:(0,g().Ay)({store:b,fullyQualified:!1,pageVisitSource:s().y8.Breadcrumb}),canEdit:b.canEdit()})),[b]),{value:R}=(0,f().fJ)(m().VI.duplicateActions),E=(0,o.useCallback)((e=>{const{droppedDirection:n,droppedStores:o,duplicate:i}=e;c().createAndCommit({userAction:"SearchPathBreadcrumb.onDrop",environment:t,canUndo:!0,perform:e=>l().MS({environment:t,targetParentStore:b.getContentStore(),targetStore:b,droppedDirection:n,droppedStores:o,duplicate:i,transaction:e,duplicateActions:R})})}),[R,t,b]),D=(0,_.jsx)(h().A,{store:b,maxWidth:S,iconSize:k,emojiSize:I,titleStyle:x,iconStyle:A,highlighter:C});return(0,_.jsxs)(o.Fragment,{children:[(0,_.jsx)(p().A,{store:b,canDropOnto:B,onSelectableDrop:E,style:M.selectable,analyticsName:"breadcrumb",shouldShowDropZone:!0,children:w?(0,_.jsx)(u().Ay,{originGap:4,popupType:n.isMobile?u().z7.SlideUp:u().z7.Popup,render:w,renderOrigin:e=>(0,_.jsx)(d().p,{...e,style:M.button,size:"sm",shouldShrink:!0,mobileFeedback:n.isMobile,children:D})}):(0,_.jsx)(d().p,{href:P,external:!1,style:M.button,size:"sm",shouldShrink:!0,mobileFeedback:n.isMobile,onClick:T,children:D})}),y&&(0,_.jsx)(v().f,{})]},b.id)}},907514:(e,t,n)=>{n.d(t,{DG:()=>m,OH:()=>u,nl:()=>d,x$:()=>p});var o=()=>n(130382),i=()=>n(959013),r=()=>n(720665),a=()=>n(972435);const s=(0,i().YK)({year:{id:"timeUtils.durationDescriptor.year",defaultMessage:"{numYears, plural, one {{numYears} year ago} other {{numYears} years ago}}"},day:{id:"timeUtils.durationDescriptor.day",defaultMessage:"{numDays, plural, one {{numDays} day ago} other {{numDays} days ago}}"},week:{id:"timeUtils.durationDescriptor.week",defaultMessage:"{numWeeks, plural, one {{numWeeks} week ago} other {{numWeeks} weeks ago}}"},hour:{id:"timeUtils.durationDescriptor.hour",defaultMessage:"{numHours, plural, one {{numHours} hour ago} other {{numHours} hours ago}}"},minute:{id:"timeUtils.durationDescriptor.minute",defaultMessage:"{numMinutes, plural, one {{numMinutes} minute ago} other {{numMinutes} minutes ago}}"},second:{id:"timeUtils.durationDescriptor.second",defaultMessage:"Just now"}}),l=(0,i().YK)({year:{id:"timeUtils.durationDescriptor.ultraCompactYear",defaultMessage:"{numYears}y"},day:{id:"timeUtils.durationDescriptor.ultraCompactDay",defaultMessage:"{numDays}d"},week:{id:"timeUtils.durationDescriptor.ultraCompactWeek",defaultMessage:"{numWeeks}w"},hour:{id:"timeUtils.durationDescriptor.ultraCompactHour",defaultMessage:"{numHours}h"},minute:{id:"timeUtils.durationDescriptor.ultraCompactMinute",defaultMessage:"{numMinutes}m"},second:{id:"timeUtils.durationDescriptor.ultraCompactSeconds",defaultMessage:"Just now"}}),c=(0,i().YK)({year:{id:"timeUtils.durationDescriptor.compactYear",defaultMessage:"{numYears}y ago"},day:{id:"timeUtils.durationDescriptor.compactDay",defaultMessage:"{numDays}d ago"},week:{id:"timeUtils.durationDescriptor.compactWeek",defaultMessage:"{numWeeks}w ago"},hour:{id:"timeUtils.durationDescriptor.compactHour",defaultMessage:"{numHours}h ago"},minute:{id:"timeUtils.durationDescriptor.compactMinute",defaultMessage:"{numMinutes}m ago"},second:{id:"timeUtils.durationDescriptor.compactSecond",defaultMessage:"Just now"}});function d(e){let{useCompactFormat:t,useUltraCompactFormat:n,useLowercase:o,roundDownYears:i,useWeeks:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=n?l:t?c:s,p=new Date(e),m=a().A.getIntl().locale,g=new Date,f=Number(g)-e;if(f>=r().Gq&&i){const e=Math.floor(f/r().Gq);return a().A.formatMessage(u.year,{numYears:e})}if(p.getFullYear()!==g.getFullYear()){const e={year:"numeric",month:"short",day:"numeric"},t={year:"numeric",month:"2-digit",day:"2-digit"};return p.toLocaleDateString(m,n?t:e)}const v=Math.floor(f/r().nD);if(v<28&&v>7&&d){const e=Math.floor(v/7);return a().A.formatMessage(u.week,{numWeeks:e})}if(v>=3)return p.toLocaleDateString(m,{month:"short",day:"numeric"});if(v>=1)return a().A.formatMessage(u.day,{numDays:v});const h=Math.floor(f/r().pT);if(h>=1)return a().A.formatMessage(u.hour,{numHours:h});const _=Math.floor(f/r().Xb);return _>=1?a().A.formatMessage(u.minute,{numMinutes:_}):o?a().A.formatMessage(u.second).toLocaleLowerCase():a().A.formatMessage(u.second)}function u(e,t){const n=t-e,i=Math.floor(n/r().Gq),s=Math.floor(n/r().nD),l=Math.floor(n/r().pT),c=Math.floor(n/r().Xb),d=Math.floor(n/r().TD);return i>=1?a().A.formatMessage(o().jX.year,{numYears:i}):s>=1?a().A.formatMessage(o().jX.day,{numDays:s}):l>=1?a().A.formatMessage(o().jX.hour,{numHours:l}):c>=1?a().A.formatMessage(o().jX.minute,{numMinutes:c}):a().A.formatMessage(o().jX.second,{numSeconds:d})}function p(e,t){return new Date(e).toLocaleDateString(a().A.getIntl().locale,{month:"long",year:"numeric",day:"2-digit",hour:"numeric",minute:"2-digit",second:t?void 0:"2-digit"})}function m(e){return new Date(e).toLocaleDateString(a().A.getIntl().locale,{month:"short",year:"numeric",day:"numeric"})}},907828:(e,t,n)=>{n.r(t),n.d(t,{getDebugSourcesForIdsInOperations:()=>c,setBlockIdDebugSource:()=>s,setupRecordCacheDebugging:()=>a});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(581454);var o=n.n(n(169749));let i=!1;const r=new(o())({max:1e4});function a(e){e.isMobile||(i=!0)}function s(e,t){i&&(r.has(e)||r.set(e,t))}const l=/[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}/g;function c(e,t){const n={blocks:{},isIdSourceCacheFull:r.itemCount===r.max},o=JSON.stringify(t),i=new Set(Array.from(o.matchAll(l)).map((e=>e[0])));for(const s of i){var a;let t=!1;const o={},i=r.get(s);i&&(t=!0,o.debugSource=i);const l=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:{table:"block",id:s},userId:e.currentUser.id});null!=l&&null!==(a=l.value)&&void 0!==a&&a.type&&(t=!0,o.blockType=l.value.type),t&&(n.blocks[s]=o)}return n}},908447:(e,t,n)=>{n.d(t,{Z:()=>s});var o=()=>n(476492),i=()=>n(989423),r=()=>n(508496);var a=()=>n(504066);function s(e){const{environment:t,collectionContextStore:n,...s}=e;!function(e,t){i().vd(e,"create_property",t),r().default.logEvent("create_property",String(Boolean(t.is_suggested_property)),t)}(t,{...(0,o().sl)(n)||{},...s}),(0,a().f)({action:"create_property",from:e.from,property_type:e.property_type,collectionContextStore:n})}},908521:(e,t,n)=>{n.d(t,{BV:()=>s,Df:()=>i,On:()=>d,Qk:()=>r,T$:()=>l,aZ:()=>u,k:()=>c,qd:()=>a});var o=()=>n(284371);const i=1.3,r={header:1.875,subHeader:1.5,subSubHeader:1.25},a={header:1.5,subHeader:1.25,subSubHeader:1.17},s={header:1.75,subHeader:1.375,subSubHeader:1.25},l={header:1.5,subHeader:1.25,subSubHeader:1.17};function c(e){var t;return p((null===(t=e.fontSizes)||void 0===t?void 0:t.header)||r.header,e.fontFamily)}function d(e){var t;return p((null===(t=e.fontSizes)||void 0===t?void 0:t.subHeader)||r.subHeader,e.fontFamily)}function u(e){var t;return p((null===(t=e.fontSizes)||void 0===t?void 0:t.subSubHeader)||r.subSubHeader,e.fontFamily)}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.header;return{fontFamily:arguments.length>1?arguments[1]:void 0,fontWeight:o().Wy.semibold,fontSize:`${e}em`,lineHeight:i,margin:0}}},909470:(e,t,n)=>{n.d(t,{i:()=>s});n(898992),n(908872);var o=()=>n(496506),i=()=>n(680141),r=()=>n(508496);let a=null;function s(){return a||(a=new(o().default)((()=>i().Y.reduce(((e,t)=>(e[t]=r().default.checkGate({gateName:t}),e)),{})),{debugName:"getClientCollectionFeatureGates"})),a.state}},910302:(e,t,n)=>{n.d(t,{r5:()=>T,XA:()=>M,bY:()=>x,Ww:()=>R,WO:()=>A,Z9:()=>E,Js:()=>L,as:()=>B,A0:()=>O,DL:()=>C,_4:()=>N});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949);var o=()=>n(221844),i=()=>n(416845),r=()=>n(179034),a=()=>n(449412),s=()=>n(209199),l=()=>n(534177),c=()=>n(720665);const d=new Map;class u extends(()=>n(757695))().default{getInitialState(){const e=new AbortController;return e.abort(),{language:void 0,lengthOfTextForLanguageDetection:void 0,lastRequestedAt:void 0,pageStoreLastEditedTime:void 0,requestController:e}}}var p=()=>n(989423),m=()=>n(731320),g=()=>n(640653),f=()=>n(351360),v=()=>n(430483),h=()=>n(77246),_=()=>n(630116),b=()=>n(825726),y=()=>n(449506),S=()=>n(473227),w=()=>n(319975),k=()=>n(751156);const I=100;function x(e){const{pageStore:t,environment:n,enabled:o,forceUpdate:i=!1}=e;if(!o)return{detectedLanguage:void 0,canSuggestInConfidence:!1};if(!t.isPageBlock()||t.isEmptyPage())return{detectedLanguage:void 0,canSuggestInConfidence:!1};const r=t.getLastEditedTime(),a=function(e){const t=d.get(e);if(t)return t;const n=new u;return d.set(e,n),n}(t.id);(i||a.state.requestController.signal.aborted||void 0===a.state.lastRequestedAt||r!==a.state.pageStoreLastEditedTime&&Date.now()-a.state.lastRequestedAt>c().Xb)&&(async()=>{a.state.requestController.abort();const e=Date.now(),o=new AbortController;a.setState({...a.state,lastRequestedAt:e,pageStoreLastEditedTime:r,requestController:o});const i=o.signal,s=await y().callApi({eventName:"detectPageLanguage",environment:n,data:{pagePointer:t.getSpaceShardedPointer()},headers:{},abortSignal:i});if(!i.aborted)if("success"===s.type){const{detectedLanguage:t}=s.data;if(t){const n=void 0!==s.data.lengthOfTextForLanguageDetection?s.data.lengthOfTextForLanguageDetection:I;a.setState({language:t,lengthOfTextForLanguageDetection:n,lastRequestedAt:e,pageStoreLastEditedTime:r,requestController:o})}else a.setState({language:void 0,lengthOfTextForLanguageDetection:void 0,lastRequestedAt:e,pageStoreLastEditedTime:r,requestController:o})}else a.state.requestController.abort()})();const s=a.state.language;let l=!1;return void 0!==a.state.lengthOfTextForLanguageDetection&&(l=a.state.lengthOfTextForLanguageDetection>=I),{detectedLanguage:s,canSuggestInConfidence:l}}function A(e,t,n){var o;const{detectedLanguage:i}=x({pageStore:e,environment:t,enabled:n}),r=(null===(o=f().default.state.currentUserSettingsStore)||void 0===o||null===(o=o.getSettings())||void 0===o?void 0:o.preferred_locale)??s().q;return i??(0,s().o_)(r)}function C(e){const{pageStore:t,environment:n,triggeredFrom:o}=e;if(!v().zD.isFullPageTranslateEnabled())return;const i=h().Uv.getStateForBlock(t.id);if((0,h().qu)(i)){if("translate_locked"===i.mode){n.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.inMemoryRecordCache)}"loading"===i.status&&i.cancel(),S().CR({navigableBlockStore:t}),(0,p().u4)({environment:n,event:{eventName:"stop_translating_page",eventProperties:{triggered_from:o,page_id:t.id}}})}}function T(e){const{pageStore:t,environment:n}=e,o=t.getParentStore();return("block"===(null==o?void 0:o.table)||"team"===(null==o?void 0:o.table)||"space"===(null==o?void 0:o.table)||"collection"===(null==o?void 0:o.table))&&(!("collection"===o.table&&!o.canEditCollection())&&(0,m().MI)({environment:n,blockStore:t}))}function M(){return!(0,g().IL)(f().default.state.currentSpaceStore)}function P(e){const{blockStore:t,environment:n,transaction:o,inMemoryRecordCache:i,currentUserStore:r}=e,a=e.seenBlockIds??new Set;if(!a.has(t.id)){if(t.isType("transclusion_reference")){const e=t.getTransclusionReferenceTargetStore();if(!e)throw new Error("Expected transclusion reference target on transclusion_reference block.");P({blockStore:e,transaction:o,inMemoryRecordCache:i,environment:n,currentUserStore:r,seenBlockIds:a})}i.setModelAndRole({pointer:t.getSpaceShardedPointer(),userId:r.id},t.getModel(),"reader"),a.add(t.id);for(const e of t.getContentPointers()){P({blockStore:_().Bv.createChildStore(t,e),transaction:o,inMemoryRecordCache:i,environment:n,currentUserStore:r,seenBlockIds:a})}}}function B(e){const{environment:t,pageStore:n,sourceLanguage:o,triggeredFrom:i}=e,r=h().Uv.getTranslateModeForBlock(n.id);if(!v().zD.isFullPageTranslateEnabled()||!r)return;const a={...r,sourceLanguage:o};return h().Uv.setStateForBlock(n.id,a),"select_language"!==a.status?(R({environment:t,pageStore:n,targetLanguage:a.targetLanguage,sourceLanguage:a.sourceLanguage,triggeredFrom:i}),!0):void 0}function R(e){const{environment:t,pageStore:n,targetLanguage:o,sourceLanguage:i,triggeredFrom:a}=e,s=h().Uv.getTranslateModeForBlock(n.id);if(!v().zD.isFullPageTranslateEnabled()||!s)return;if(!n.isType("page"))throw new Error("Not a page");let c;c="translate_unlocked"===s.mode?D({pageStore:n,environment:t}):s.inMemoryRecordCache;const d=new AbortController;(0,p().u4)({environment:t,event:{eventName:"translate_page",eventProperties:{source_language:i,target_language:o,triggered_from:a,page_id:n.id}}}),y().callApi({eventName:"translatePage",environment:t,data:{pagePointer:n.getSpaceShardedPointer(),targetLanguage:o,sourceLanguage:i},headers:{},abortSignal:d.signal}).then((e=>{try{if("failed"===e.type)throw{name:e.error.data.responseBody.name??e.error.name,statusCode:e.status,message:e.error.data.responseBody.debugMessage??e.error.data.responseBody.message};const{translatedBlockMap:o}=e.data;!function(e){const{pageStore:t,valueMap:n,environment:o}=e,{currentUserStore:i,currentSpaceStore:a}=f().default.state;if(!i||!a)return;if(!v().zD.isFullPageTranslateEnabled())return;const s=h().Uv.getTranslateModeForBlock(t.id);if(!s)return;if("loading"!==s.status)throw new Error("Expected translation state to be loading");const c=t.clone(s.inMemoryRecordCache);k().createAndCommit({environment:o,perform(e){for(const[t,i]of Object.entries(n)){const n=_().Bv.createChildStore(c,{table:r().ev,id:t,spaceId:a.id});let s;if("title"===i.mapping)s=n.getBlockTitleStore();else if("caption"===i.mapping)s=n.getPropertyStore("caption");else{if("properties"===i.mapping){Object.entries(i.properties??{}).forEach((t=>{let[i,r]=t;const a=n.getPropertyStore(i);w().R9({environment:o,store:a,value:r.value,transaction:e})}));continue}if("unmapped"===i.mapping)continue;(0,l().HB)(i.mapping)}w().R9({environment:o,store:s,value:i.value,transaction:e})}s.inMemoryRecordCache.emitAll()},canUndo:!0,userAction:"fullPageTranslationHelpers.applyTranslationMapToPage"}),S().v8({navigableBlockStore:t,editorModeConfig:{...s,status:"active",translationMap:n}})}({valueMap:o,pageStore:n,environment:t})}catch(o){(0,b().w)(o),C({pageStore:n,environment:t,triggeredFrom:"error"})}})),S().v8({navigableBlockStore:n,editorModeConfig:{mode:"translate_locked",status:"loading",sourceLanguage:i,targetLanguage:o,cancel:()=>d.abort(),inMemoryRecordCache:c}})}function E(e){const{pageStore:t,environment:n,status:o="select_language",sourceLanguage:i,targetLanguage:r}=e;if(!t.isType("page"))throw new Error("Not a page");if(h().Uv.isBlockModeInTranslation(t.id))return;const a=v().zD.isFullPageTranslateEnabled();if(a)if("suggest_translation"===o&&i&&r)S().v8({navigableBlockStore:t,editorModeConfig:{mode:"translate_unlocked",status:"suggest_translation",sourceLanguage:i,targetLanguage:r}});else{const e=D({pageStore:t,environment:n});if(e){const{detectedLanguage:o}=x({pageStore:t,environment:n,enabled:a});S().v8({navigableBlockStore:t,editorModeConfig:{mode:"translate_locked",status:"select_language",sourceLanguage:o,inMemoryRecordCache:e}})}}}function D(e){const{pageStore:t,environment:n}=e,{currentUserStore:i}=f().default.state;if(!i)throw new Error("No current user");const r=new(o().A)({name:`TranslationInMemoryRecordCache-${t.id}`,isTemporaryData:!0});n.defaultRecordCache.inMemoryRecordCache.addCacheOverride(r);const a=t.clone(r);return k().createAndCommit({environment:n,perform(e){P({blockStore:a,transaction:e,inMemoryRecordCache:r,environment:n,currentUserStore:i})},canUndo:!0,userAction:"fullPageTranslationActions.openTranslateBanner.lockPage"}),r.emitAll(),r}function N(e){const t=new(i().yI4)("Editor handler called in translate mode.");throw a().O8(t,{from:"fullPageTranslationActions",type:"editorHandlerInTranslateModeWarning",data:{sessionId:e}}),t}function L(e){const{translationMap:t,recordIdMap:n}=e,o={};for(const[i,a]of Object.entries(t)){const e=n.get({table:r().ev,id:i});e&&(o[e]=a)}return o}function O(e){const{pageStore:t}=e,n=h().Uv.getTranslateModeForBlock(t.id);n&&"suggest_translation"===n.status&&S().v8({navigableBlockStore:t,editorModeConfig:{...n,status:"dismiss_forever"}})}},911964:(e,t,n)=>{n.d(t,{F:()=>P});var o=()=>n(441738),i=()=>n(762433),r=()=>n(640653),a=()=>n(19575),s=()=>n(128265),l=()=>n(679616),c=()=>n(224701),d=()=>n(72256),u=()=>n(753735),p=(n(296540),()=>n(107683)),m=()=>n(49210),g=()=>n(847249),f=()=>n(401497);const v=(0,n(340498).xh)("arrowUpCircleBadgeClock",{default:{loader:()=>n.e(42951).then(n.bind(n,942951))},small:{loader:()=>n.e(19801).then(n.bind(n,819801))},fill:{loader:()=>n.e(42951).then(n.bind(n,942951))},fillSmall:{loader:()=>n.e(19801).then(n.bind(n,819801))}});var h=()=>n(366295),_=()=>n(166386),b=()=>n(979340),y=()=>n(959013),S=()=>n(84817),w=()=>n(7674),k=()=>n(554509),I=()=>n(581495),x=()=>n(775916),A=()=>n(668721),C=n(474848);function T(e){let{onDismiss:t}=e;const n=(0,y().tz)(),o=(0,x().p)(),i=(0,f().IS)((e=>({icon:{width:32,height:32,color:e.icon.secondary}})),[]),r=(0,g().K8)((()=>{const e=A().A.state;return e?e.spaceLimit-e.spaceUsage:void 0}),[]);if(void 0===r||!o)return null;const a=(0,b().u2)({product:(0,_().i)(o),intl:n});return(0,C.jsxs)(S().Y1,{gap:24,padding:"24px 24px 20px 24px",children:[(0,C.jsx)(w().YA,{iconAndTitle:r>0?(0,C.jsxs)(S().Y1,{align:"top-center",gap:12,children:[(0,h().L)(i.icon),(0,C.jsx)(k().D,{styleName:"Heading-17px/Semibold",colorName:"primary",style:{textAlign:"center"},children:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.title",defaultMessage:"You still have {responsesLeft, plural, one {{responsesLeft} free AI response} other {{responsesLeft} free AI responses}}",values:{responsesLeft:r}})})]}):(0,C.jsx)(w().ZQ,{iconGroup:v,iconColorName:"secondary",title:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.title.outOfResponses",defaultMessage:"You’ll be able to purchase AI in {daysLeft, plural, one {{daysLeft} day} other {{daysLeft} days}}",values:{daysLeft:(0,_().ER)(o)}})}),description:(0,C.jsx)(k().D,{styleName:"UIMedium-13px/Regular",colorName:"primary",children:r>0?(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.description.responsesLeft",defaultMessage:"You’ll be able to purchase unlimited Notion AI after finishing your free {planName} plan trial",values:{planName:a}}):(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.description",defaultMessage:"Since you’re on a free {planName} plan trial, you can only purchase unlimited AI after the trial ends",values:{planName:a}})})}),(0,C.jsx)(w().aO,{layout:"vertical",primaryButtons:[{buttonType:"outline",label:(0,C.jsx)(y().sA,{id:"ineligibleForAiPurchaseModal.primaryAction",defaultMessage:"Got it"}),onClick:t}]}),(0,C.jsx)(I().Rz,{})]})}const M=354;async function P(e){const{environment:t,spaceStore:n,billingData:g,product:f,from:v,pageSection:h,isTrial:_,dismissMobilePlansModal:b,coupon:y}=e;if(n)if((0,i().N8)(null==g?void 0:g.subscription))(0,a().cz)();else if("ai"===f&&(0,u().uq)(g))!async function(e){await m().T.showAsyncModal((t=>(0,C.jsx)(p().s,{isOpen:t.isOpen,onDismiss:t.onDismiss,onClosed:t.onClosed,areaConstraint:{width:{type:"min",length:M},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,C.jsx)(T,{onDismiss:t.onDismiss,...e}),animateSizeTransition:!1})))}({environment:t});else{if("enterprise"===f){if(await(0,s().G)(t)&&!(0,r().hT)(n))return void(0,a().lK)({initialQuestion:"interest_in_enterprise",openedFrom:e.from})}if(e.isTrial)l().Ln({openedFrom:e.from});else if(null!=g&&g.subscription&&null!=g&&g.paymentMethod)(0,d().o)(t,{desiredProducts:[f],from:v,analyticsArgs:{from:v,pageSection:h}});else{const{subscriptionTier:e,addOnFeature:n}=o().hq(f)?{subscriptionTier:(0,i().AI)(g),addOnFeature:f}:{subscriptionTier:f,addOnFeature:void 0};await(0,c().qI)(t,{subscriptionTier:e,addOnFeature:n,from:v,coupon:y,isTrial:_,dismissMobilePlansModal:b})}}}},912979:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{loadingState:"uninitialized"}}}const i=new o},914649:(e,t,n)=>{n.d(t,{Dn:()=>l,JC:()=>a,JS:()=>i,WQ:()=>s,h5:()=>o,rP:()=>r});const o=n(206267).JW(),i="denied",r="no_devices",a="unknown_error",s="https://notion.notion.site/Transcription-Overview-1c0efdeead058089b791d4c1ecc96544",l="https://notion.pages.dev.notion.co/1d0b35e6e67f803a83b4cd3ed13c7129"},915440:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isResizing:!1}}}const i=new o},915457:(e,t,n)=>{n.d(t,{EF:()=>R,eY:()=>P,s4:()=>B});var o=()=>n(700500),i=()=>n(713998),r=()=>n(651124),a=()=>n(763884),s=()=>n(335098),l=()=>n(919709),c=()=>n(492696),d=()=>n(723545),u=()=>n(470333);var p=()=>n(733166),m=()=>n(178687),g=()=>n(615234),f=()=>n(559926),v=()=>n(209660),h=()=>n(812182),_=()=>n(755199),b=()=>n(680074),y=()=>n(972435),S=()=>n(508496),w=()=>n(160475);const k=["collection_view","collection_view_page","page","table"];function I(e){var t;const{environment:n,blockType:o}=e,i=Date.now(),r=(0,b().R$)(n),a=null==r||null===(t=r.getSettings())||void 0===t?void 0:t.adoption_entry_points,s=`import_nudge_on_block_create__${o}`;if(i-x({adoptionEntryPoints:a})<g().nD)return;const l=S().default.getConfigKey("adoption_entry_point_time_delta",`import_nudge_on_block_create__${o}`).view_delta;if(i-x({blockType:o,adoptionEntryPoints:a})<l)return;if(!("nudge_on_block_create"===S().default.getEligibleGroup({experimentId:"adoption_import_entry_point",defaultGroup:"control"})))return;const c="page"===o?A.triggerNudgeOnPasteTitlePage:"table"===o?A.triggerNudgeOnPasteTable:A.triggerNudgeOnPasteTitleCollection;(0,w().t)({environment:n,action:"view",from:`import_nudge_on_block_create__${o}`}),h().HK({message:y().A.formatMessage(A.triggerNudgeOnPasteDescription),presentationType:"persistent",id:"nudge-on-create",title:y().A.formatMessage(c),onUserDismiss:()=>{(0,w().t)({environment:n,action:"dismiss",from:s})},onDismiss:()=>{_().pr(n,{entryPoint:s})},actions:{primary:{title:y().A.formatMessage(A.triggerNudgeOnPastePrimaryAction),onAction:()=>{(0,w().t)({environment:n,action:"click",from:s}),f().kY(n,{from:s}),h().UW("nudge-on-create"),v().Ow({currentTab:"imports",openedFrom:s})}}}})}function x(e){const{blockType:t,adoptionEntryPoints:n}=e;if(!n)return 0;let o=0;if(t){const e=n[`import_nudge_on_block_create__${t}`];if(e){const t=e[e.length-1];t>o&&(o=t)}return o}for(const i of k){const e=n?n[`import_nudge_on_block_create__${i}`]:void 0;if(e){const t=e[e.length-1];t>o&&(o=t)}}return o}const A=(0,n(959013).YK)({triggerNudgeOnPasteTitlePage:{id:"adoption.nudgeOnCreate.title.page",defaultMessage:"Import your content directly"},triggerNudgeOnPasteTitleCollection:{id:"adoption.nudgeOnCreate.title.collection",defaultMessage:"Import your database’s content directly"},triggerNudgeOnPasteTable:{id:"adoption.nudgeOnCreate.title.table",defaultMessage:"Import your table’s content directly"},triggerNudgeOnPasteDescription:{id:"adoption.nudgeOnCreate.description",defaultMessage:"Get all your content into Notion with a click"},triggerNudgeOnPastePrimaryAction:{id:"adoption.nudgeOnCreate.primaryAction",defaultMessage:"Import now"}});var C=()=>n(896628),T=()=>n(246826),M=()=>n(319975);function P(e){const{environment:t,store:n,transaction:r}=e;n.isType(o().xd.code)?function(e){const{store:t,transaction:n}=e,o=t.getProperties(),r=t.getFormat(),c=t.environment.currentUser.id,d=a().K.get({userId:c,key:m().j.localLanguagePreferenceKey}),u=d&&s().y[d]?d:m().j.defaultLanguage,p=a().K.get({userId:c,key:m().j.localCodeWrapPreferenceKey}),g=t.getBlockTitleStore(),f=g.getValue(),v=l().Cc8(f);v&&M().R9({environment:t.environment,store:g,value:v,transaction:n});void 0===o.language&&T().zv({store:t.getPropertiesStore(),data:{language:i().U8(u)},transaction:n});void 0===r.code_wrap&&T().zv({store:t.getFormatStore(),data:{code_wrap:p},transaction:n})}({store:n,transaction:r}):n.isType(o().xd.tableOfContents)?function(e){const{store:t,transaction:n}=e,o=t.getFormat();void 0===o.block_color&&C().zA({stores:[t],update:{block_color:"gray"},transaction:n})}({store:n,transaction:r}):n.isType(o().xd.callout)?B({store:n,transaction:r}):n.isType(o().xd.quote)?function(e){const{store:t,transaction:n}=e,o=t.environment.currentUser.id,i=a().K.get({userId:o,key:m().w.localSizePreferenceKey});void 0!==i&&T().zv({store:t.getFormatStore(),data:{quote_size:i},transaction:n})}({store:n,transaction:r}):n.isType(o().xd.aiBlock)?function(e){const{store:t}=e;R.setState(t.pointer.id)}({store:n}):n.isType(o().xd.transcription)?function(e){const{environment:t,store:n,transaction:o}=e,i=n.isInsideTemplate()||n.isInsideFactoryOrDuplicateBlocksAction();!function(e){const{shouldUpdateTitle:t,...n}=e;t&&(0,u().A)(n),(0,d().K)({...n,state:{state:"initial"}})}({environment:t,blockStore:n,shouldUpdateTitle:!i,transaction:o})}({environment:t,store:n,transaction:r}):n.isType(o().xd.collectionView)?function(e){const{environment:t,store:n}=e;I({environment:t,blockType:"collection_view"}),(0,p().v)({environment:t,store:n})}({environment:t,store:n,transaction:r}):n.isType(o().xd.collectionViewPage)?function(e){const{environment:t}=e;I({environment:t,blockType:"collection_view_page"})}({environment:t,store:n,transaction:r}):n.isType(o().xd.page)?function(e){const{environment:t,store:n}=e;I({environment:t,blockType:"page"}),(0,p().v)({environment:t,store:n})}({environment:t,store:n,transaction:r}):n.isType(o().xd.table)&&function(e){const{environment:t}=e;I({environment:t,blockType:"table"})}({environment:t,store:n,transaction:r})}function B(e){const{store:t,transaction:n}=e,o=t.environment.currentUser.id,i=t.getFormat();if(void 0===i.page_icon){let e=a().K.get({userId:o,key:c().c});""===e?e=void 0:void 0!==e&&"url"!==(0,r().WO)(e).type||(e="💡"),C().zA({stores:[t],update:{page_icon:e},transaction:n})}if(void 0===i.block_color){const e=a().K.get({userId:o,key:c().E})||"gray_background";C().zA({stores:[t],update:{block_color:e},transaction:n})}}const R=n(757695).default.createValue(void 0,{name:"FocusedAiBlockConfigurationMenuId"})},917629:(e,t,n)=>{n.d(t,{C:()=>a,h2:()=>l,qd:()=>i,t9:()=>r});var o=()=>n(690495);const i=(0,n(534177).uv)(o().lU);function r(e){return o().lU[e].placement}function a(e){return e.sort(((e,t)=>s(e)-s(t)))}function s(e){const t=i.indexOf(e);return-1===t?Number.POSITIVE_INFINITY:t}function l(e){if(!e)return;const t=e;return i.includes(t)?t:void 0}},917992:(e,t,n)=>{n.d(t,{b:()=>i,oU:()=>o});const o={"1:1":{width:1,height:1},"5:4":{width:5,height:4},"4:3":{width:4,height:3},"7:5":{width:7,height:5},"3:2":{width:3,height:2},"5:3":{width:5,height:3},"16:9":{width:16,height:9}},i={crop:{unit:"%",x:0,y:0,width:100,height:100},mask:"None"}},919878:(e,t,n)=>{n.d(t,{$G:()=>$,D:()=>me,F8:()=>ee,FM:()=>Ae,Fd:()=>ye,GD:()=>Ue,IN:()=>ie,Il:()=>pe,LL:()=>Ce,Lb:()=>ne,Mi:()=>xe,Qg:()=>Ve,RC:()=>K,S0:()=>ue,Sv:()=>Be,T4:()=>re,Tu:()=>Ie,V0:()=>ge,VC:()=>z,VD:()=>Se,Vg:()=>he,_D:()=>Ne,_Y:()=>Z,as:()=>q,b9:()=>Q,cP:()=>Oe,eI:()=>ae,ep:()=>H,gU:()=>Te,go:()=>ke,hk:()=>W,jJ:()=>X,kZ:()=>J,n2:()=>fe,pW:()=>ce,pc:()=>de,pf:()=>Pe,pn:()=>j,sf:()=>se,tM:()=>te,tb:()=>V,uC:()=>Fe,uT:()=>ze,wW:()=>je,wr:()=>G,xD:()=>De,xs:()=>oe,yY:()=>_e,zb:()=>we});n(16280),n(944114),n(898992),n(823215),n(354520),n(672577),n(581454),n(908872),n(737550);var o=()=>n(908006),i=()=>n(700500),r=()=>n(716016),a=()=>n(970013),s=()=>n(713998),l=()=>n(179034),c=()=>n(519831),d=()=>n(869558),u=()=>n(161479),p=()=>n(919709),m=()=>n(496603),g=()=>n(183558),f=()=>n(720665),v=()=>n(970330),h=()=>n(896628),_=()=>n(722101),b=()=>n(44729),y=()=>n(246826),S=()=>n(778417),w=()=>n(319975),k=()=>n(725614),I=()=>n(751156),x=()=>n(586481),A=()=>n(921855),C=()=>n(594794),T=()=>n(972435),M=()=>n(299545),P=()=>n(732770),B=()=>n(630116),R=()=>n(502438),E=()=>n(24157),D=()=>n(980914),N=()=>n(439270),L=()=>n(671363),O=()=>n(3020),U=()=>n(709219);const F=(0,n(959013).YK)({turnIntoCollectionTitle:{defaultMessage:"Title",id:"simpleTableActions.collectionTitle"},turnIntoCollectionColumnTitle:{defaultMessage:"Column {columnIndex}",id:"simpleTableActions.collectionColumnTitle"}});function V(e){const{environment:t,index:n,simpleTableStore:o}=e,i=D().yv(o);if(0===i)return G(),void k().clear({environment:t});const r=(0,f().qE)(n,0,i-1);U().A.setState({isActive:!0,simpleTableStore:o,selection:{start:{col:0,row:r},end:{col:D().MW(o)-1,row:r},type:"row"}}),S().td({environment:t,stores:[o],phase:R().SelectionPhase.Editing}),k().clear({environment:t})}function j(e){const{environment:t,index:n,simpleTableStore:o}=e,i=D().MW(o);if(0===i)return G(),void k().clear({environment:t});const r=(0,f().qE)(n,0,i-1);U().A.setState({isActive:!0,simpleTableStore:o,selection:{start:{col:r,row:0},end:{col:r,row:D().yv(o)-1},type:"column"}}),S().td({environment:t,stores:[o],phase:R().SelectionPhase.Editing}),k().clear({environment:t})}function z(e){const{environment:t,rowIndex:n,columnIndex:o,simpleTableStore:i}=e;U().A.setState({isActive:!0,simpleTableStore:i,selection:{start:{col:o,row:n},end:{col:o,row:n},type:"cell"}}),S().td({environment:t,stores:[i],phase:R().SelectionPhase.Editing})}function H(e){const{environment:t,start:n,end:o,simpleTableStore:i}=e;U().A.setState({isActive:!0,simpleTableStore:i,selection:{start:n,end:o,type:"cell"}}),S().td({environment:t,stores:[i],phase:R().SelectionPhase.Editing}),k().clear({environment:t})}function W(e){const{environment:t,rowIndex:n,columnIndex:o,simpleTableStore:i}=e;H({environment:t,start:U().A.state.isActive?U().A.state.selection.start:{col:o,row:n},end:{col:o,row:n},simpleTableStore:i})}function q(e){z(e);const t=D().Jo(e);t&&k().setSelectionAtEnd({store:t})}function K(){if("editing"!==E().default.state.mode)return;const e=D().wg();if(!e)return void G();const{columnIndex:t,rowIndex:n,simpleTableStore:o}=e.getProps(),i=U().A.state;if(i.isActive){const{start:e,end:r}=i.selection;!(e.col===r.col&&e.row===r.row)||e.col===t&&e.row===n&&i.simpleTableStore===o||z({environment:o.environment,rowIndex:n,columnIndex:t,simpleTableStore:o})}else z({environment:o.environment,rowIndex:n,columnIndex:t,simpleTableStore:o})}function G(){U().A.setState({isActive:!1})}function $(e){const{environment:t,direction:n,bypassExistingTextSelection:o,expandSelection:i}=e;if(!o&&D().wg())return;const r=U().A.state;if(r.isActive){const{selection:e,simpleTableStore:a}=r;if(i){const{rowIndex:o,columnIndex:i}=Y({selection:e,simpleTableStore:a,direction:n,wrapRow:!1});return void W({environment:t,rowIndex:o,columnIndex:i,simpleTableStore:a})}if(D().Gl({selection:e,columnIndex:e.start.col,rowCount:(0,D().yv)(a)})){const{columnIndex:o}=Y({selection:e,simpleTableStore:a,direction:n,wrapRow:!1});j({environment:t,index:o,simpleTableStore:a})}else{const i="editing"===E().default.state.mode;o&&k().clear({environment:t});const{rowIndex:r,columnIndex:s}=Y({selection:e,simpleTableStore:a,direction:n,wrapRow:!0});if(i)return void q({environment:t,rowIndex:r,columnIndex:s,simpleTableStore:a});z({environment:t,rowIndex:r,columnIndex:s,simpleTableStore:a})}}P().A.setKeyboardMode(!0)}function Y(e){const{selection:t,simpleTableStore:n,direction:o,wrapRow:i}=e,r=D().MW(n)-1,a=D().yv(n)-1,{col:s,row:l}=t.end;return"right"===o?s===r&&l===a?{columnIndex:r,rowIndex:a}:s===r?i?{columnIndex:0,rowIndex:l+1}:{columnIndex:s,rowIndex:l}:{columnIndex:s+1,rowIndex:l}:0===s&&0===l?{columnIndex:0,rowIndex:0}:0===s?i?{columnIndex:r,rowIndex:l-1}:{columnIndex:s,rowIndex:l}:{columnIndex:s-1,rowIndex:l}}function Q(e){const{environment:t,direction:n,bypassExistingTextSelection:o,expandSelection:i}=e;if(!o&&D().wg())return;const r=U().A.state;if(r.isActive){const{selection:e,simpleTableStore:a}=r,{rowIndex:s,columnIndex:l}=function(e){const{selection:t,simpleTableStore:n,direction:o}=e,i=D().yv(n)-1,{col:r,row:a}=t.end,s="down"===o?Math.min(i,a+1):Math.max(0,a-1);return{columnIndex:r,rowIndex:s}}({selection:e,simpleTableStore:a,direction:n});if(i)return void W({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a});D().qD({selection:e,rowIndex:e.start.row,columnCount:(0,D().MW)(a)})?V({environment:t,index:s,simpleTableStore:a}):(o&&k().clear({environment:t}),z({environment:t,rowIndex:s,columnIndex:l,simpleTableStore:a}))}P().A.setKeyboardMode(!0)}function Z(e){if(D().wg())return;const t=U().A.state;if(!t.isActive)return;const{environment:n,transaction:o}=e,{selection:i,simpleTableStore:r}=t;if(D().Gl({selection:i,columnIndex:i.start.col,rowCount:(0,D().yv)(r)}))Ne(e),Me({index:i.start.col,simpleTableStore:r,transaction:o}),j({environment:n,index:i.start.col,simpleTableStore:r});else if(D().qD({selection:i,rowIndex:i.start.row,columnCount:(0,D().MW)(r)})){Re({rowID:r.getRenderableContentIds()[i.start.row],simpleTableStore:r,transaction:o}),V({environment:n,index:i.start.row,simpleTableStore:r})}else D().kP(i)?De({environment:n,transaction:o}):Ne({environment:n,transaction:o})}function X(e){if(D().wg())return;const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=o.getContentStores()[n.end.row],r=D().$O(o);if(!r)return;const{environment:a,transaction:s,key:l}=e,c=i.getPropertyStore(r[n.end.col]);if(l&&1===l.length){const e=c.getValue(),t=p().x9d(l);w().R9({environment:a,store:c,value:e?e.concat(t):t,transaction:s}),k().setSelectionAtEnd({store:c})}}function J(e){if(D().wg())return;const t=U().A.state;if(!t.isActive)return;const{environment:n,transaction:o,duplicateActions:i}=e,{selection:r,simpleTableStore:a}=t;D().Gl({selection:r,columnIndex:r.start.col,rowCount:(0,D().yv)(a)})?ge({transaction:o}):D().qD({selection:r,rowIndex:r.start.row,columnCount:(0,D().MW)(a)})&&i&&fe({environment:n,transaction:o,duplicateActions:i})}function ee(e){const{simpleTableStore:t,annotation:n}=e,o=U().A.state;if(!o.isActive||o.simpleTableStore!==t)return;const{selection:i}=o,r=[],a=Math.min(i.start.row,i.end.row),s=Math.max(i.start.row,i.end.row),l=Math.min(i.start.col,i.end.col),c=Math.max(i.start.col,i.end.col);for(let p=a;p<=s;p++)for(let e=l;e<=c;e++){const n=D().Jo({simpleTableStore:t,rowIndex:p,columnIndex:e}),o=null==n?void 0:n.getValue();n&&o&&r.push({textStore:n,textValue:o})}const d=p()._XS(n),u=r.every((e=>{let{textValue:t}=e;return t.every((e=>p().uPN(e).some((e=>p()._XS(e)===d))))}));for(const{textStore:p}of r)w().rq({...e,textStore:p,action:u?"removeAnnotationType":"annotate"})}function te(e){if(be())return;const{x:t,y:n,simpleTableStore:o}=e;L().A.setState({isActive:!0,simpleTableStore:o,hover:{x:t,y:n,showResizer:!1,resizing:!1,type:"cell"}})}function ne(e){if(be())return;const{type:t,simpleTableStore:n,index:o}=e;L().A.setState({isActive:!0,simpleTableStore:n,hover:{type:t,index:o}})}function oe(e){const{simpleTableStore:t,resizer:n}=e;L().A.setState({isActive:!0,simpleTableStore:t,hover:{type:"resizer",resizer:n}})}function ie(){be()||L().A.setState({isActive:!1})}function re(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,{environment:i,transaction:r}=e;le({index:n.start.col,simpleTableStore:o,transaction:r}),q({environment:i,rowIndex:0,columnIndex:n.start.col,simpleTableStore:o})}function ae(e){const{count:t,simpleTableStore:n,transaction:o}=e;if(t<1)return;const i=D().MW(n);for(let r=0;r<t;r++)le({index:i+r,simpleTableStore:n,transaction:o})}function se(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,{environment:i,transaction:r}=e;le({index:n.end.col+1,simpleTableStore:o,transaction:r}),q({environment:i,rowIndex:0,columnIndex:n.end.col+1,simpleTableStore:o})}function le(e){const{index:t,simpleTableStore:n,transaction:o,columnID:i,format:r}=e,a=D().$O(n)||[],s=D().o0(n),l=i||(0,g().Ay)(),c=[...a.slice(0,t),l,...a.slice(t)],d=r?{...s,[l]:r}:s;h().zA({stores:[n],update:{table_block_column_order:c,table_block_column_format:d},transaction:o})}function ce(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,{environment:i,transaction:r}=e;pe({environment:i,index:n.start.row,simpleTableStore:o,transaction:r}),q({environment:i,rowIndex:n.start.row,columnIndex:0,simpleTableStore:o})}function de(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,{environment:i,transaction:r}=e;pe({environment:i,index:n.end.row+1,simpleTableStore:o,transaction:r}),q({environment:i,rowIndex:n.end.row+1,columnIndex:0,simpleTableStore:o})}function ue(e){const{environment:t,count:n,simpleTableStore:o,transaction:i,analyticsFrom:r}=e;if(n<1)return;const a=D().yv(o);for(let s=0;s<n;s++)pe({environment:t,index:a+s,simpleTableStore:o,transaction:i,analyticsFrom:r})}function pe(e){const{environment:t,index:n,simpleTableStore:o,transaction:i,analyticsFrom:r}=e,a=o.getContentStore();if(!(0,M().iU)(a))throw new Error("Block has an invalid parent.");const s=y().Wv({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:i,spaceId:o.pointer.spaceId}),l=B().Bv.createChildStore(a,s.pointer);if(r&&v().v(t,{from:r,type:"table_row",creating_block_id:s.id}),n<=0)b().Ti({parentStore:a,childStore:l,transaction:i});else{const e=o.getContentStores();b().NI({parentStore:a,childStore:l,transaction:i,after:e[n-1].id})}return l}function me(e){const{environment:t,simpleTableStore:n,transaction:o}=e,i=n.getContentStore();if(!(0,M().iU)(i))throw new Error("Block has an invalid parent.");const r=y().Wv({environment:t,type:"table_row",properties:{},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:o,spaceId:n.pointer.spaceId}),a=B().Bv.createChildStore(i,r.pointer);return b().NI({parentStore:i,childStore:a,transaction:o}),a}function ge(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=D().$O(o),r=D().o0(o);if(!i)return;const a=i.slice(n.start.col,n.end.col+1);if(!a)return;const s=[],{transaction:l}=e;for(let c=n.start.col;c<=n.end.col;c++){const e=a[c-n.start.col],t=(0,g().Ay)();s.push(t),le({index:n.end.col+1,simpleTableStore:o,transaction:l,columnID:t,format:r?r[e]:void 0})}for(const c of o.getContentStores())ve({rowStore:c,columnIDs:a,newColumnIDs:s,transaction:l})}function fe(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=o.getRenderableContentIds(),{environment:r,transaction:a,duplicateActions:s}=e;for(let c=n.start.row;c<=n.end.row;c++){const e=B().Bv.createChildStore(o,{table:l().ev,id:i[c]}),{blockStores:t}=s.duplicateBlock({environment:r,stores:[e],transaction:a,targetSpaceId:(0,u().e)(e.pointer.spaceId),preferDuplicateLocation:"local",options:{addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!1}}),n=t[0];_().WH({parentStore:o.getContentStore(),insertStore:n,afterStore:e,transaction:a})}}function ve(e){const{rowStore:t,columnIDs:n,newColumnIDs:o,transaction:i}=e,r={...t.getPropertiesStore().getValue(),...(0,f().MU)(o.map(((e,o)=>[e,t.getPropertyValue(n[o])])))};x().L({environment:t.environment,store:t,properties:r,transaction:i})}function he(e){const t=L().A.state;if(!t.isActive)return;const{hover:n}=t;"cell"===n.type&&L().A.setState({...t,hover:{...n,showResizer:e}})}function _e(e){const t=L().A.state;if(!t.isActive)return;const{hover:n}=t;"cell"===n.type&&L().A.setState({...t,hover:{...n,resizing:e}})}function be(){const e=L().A.state;return e.isActive&&"resizing"in e.hover&&e.hover.resizing}function ye(e){const{tableBlockColumnFormat:t,simpleTableStore:n,transaction:o}=e;h().zA({stores:[n],update:{table_block_column_format:t},transaction:o})}function Se(e){const t=U().A.state;if(!t.isActive||"row"!==t.selection.type)return;const{selection:n}=t;U().A.setState({...t,selection:{...n,end:{col:e,row:n.end.row}}})}function we(e){const t=U().A.state;if(!t.isActive||"column"!==t.selection.type)return;const{selection:n}=t;U().A.setState({...t,selection:{...n,end:{col:n.end.col,row:e}}})}function ke(e){const{environment:t,simpleTableStore:n,id:o,index:i,type:r,rowStore:a,theme:s,selectorStartPx:l,mouseOffsetPx:c}=e;let d=[];"column"===r?(j({environment:t,index:i,simpleTableStore:n}),d=N().A.findCellsInColumnFromStore(n,o)):(V({environment:t,index:i,simpleTableStore:n}),d=N().A.findCellsInRowFromStore(a));const u=D().QP({cells:d,type:r,theme:s});O().A.setState({isActive:!0,simpleTableStore:n,source:{id:o,type:r,index:i,draggedCells:u,selectorStartPx:l,mouseOffsetPx:c},destIndex:i,selectorDragPx:l,moved:!1})}function Ie(e){const{destIndex:t,selectorDragPx:n}=e,o=O().A.state;o.isActive&&O().A.setState({...o,destIndex:t,selectorDragPx:n,moved:!0})}function xe(){O().A.reset()}function Ae(e){const{environment:t,format:n,simpleTableStore:i,transaction:r,type:a}=e,s=O().A.state;if(!s.isActive)return;const{source:l,destIndex:c}=s;if(s.source.type!==a||s.simpleTableStore!==i)return;const d={environment:t,simpleTableStore:i,source:l,destIndex:c,transaction:r};"column"===a?function(e){const{environment:t,columnOrder:n,source:i,destIndex:r,simpleTableStore:a,transaction:s}=e;if(!n)return;G();const l=[...n.slice(0,i.index),...n.slice(i.index+1)],c=[...l.slice(0,r),i.id,...l.slice(r)];h().zA({stores:[a],update:{table_block_column_order:c},transaction:s}),o().default.afterNextFlush((()=>{j({environment:t,index:r,simpleTableStore:a})}))}({...d,columnOrder:n.table_block_column_order}):function(e){const{environment:t,source:n,destIndex:i,simpleTableStore:r,transaction:a}=e,s=r.getRenderableContentIds(),l=i>n.index?i:i-1;let c=i>0?s[l]:void 0;c===n.id&&(c=s[l+1]);G();const d=r.getContentStores().find((e=>e.id===n.id)),u=r.getContentStores().find((e=>e.id===c));if(d){const e=r;u?b().NI({parentStore:e,after:u.id,childStore:d,transaction:a}):b().Ti({parentStore:e,childStore:d,transaction:a}),o().default.afterNextFlush((()=>{V({environment:t,index:i,simpleTableStore:r})}))}}(d)}function Ce(e){const t=U().A.state;if(!t.isActive)return;Ne(e);const{selection:n,simpleTableStore:o}=t,{environment:i,transaction:r}=e;for(let a=n.start.col;a<=n.end.col;a++)Me({index:a,simpleTableStore:o,transaction:r});j({environment:i,index:n.start.col,simpleTableStore:o})}function Te(e){const{simpleTableStore:t,columnOrder:n,transaction:o}=e;h().zA({stores:[t],update:{table_block_column_order:n},transaction:o})}function Me(e){const{index:t,simpleTableStore:n,transaction:o}=e,i=D().$O(n);if(!i||1===i.length)return;const r=[...i.slice(0,t),...i.slice(t+1)];h().zA({stores:[n],update:{table_block_column_order:r},transaction:o})}function Pe(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=o.getRenderableContentIds(),{environment:r,transaction:a}=e;for(let s=n.start.row;s<=n.end.row;s++)Re({rowID:i[s],simpleTableStore:o,transaction:a});V({environment:r,index:n.start.row,simpleTableStore:o})}function Be(e){const{simpleTableStore:t,numRowsToDelete:n,transaction:o}=e,i=t.getRenderableContentIds();for(let r=i.length-n;r<i.length;r++)Re({rowID:i[r],simpleTableStore:t,transaction:o})}function Re(e){const{rowID:t,simpleTableStore:n,transaction:o}=e,i=n.getContentStore();if(!(0,M().iU)(i))throw new Error("Block has an invalid parent.");if(D().yv(n)<=1)return;const r={table:l().ev,id:t};Ee({rowStore:B().Bv.createChildStore(i,r),simpleTableStore:n,transaction:o})}function Ee(e){const{rowStore:t,simpleTableStore:n,transaction:o}=e,i=n.getContentStore();b().zz({parentStore:i,childStore:t,transaction:o})}function De(e){const t=U().A.state;if(!t.isActive)return;const{selection:n}=t;if(!D().kP(n))return;const{environment:o,transaction:i}=e;Ne({environment:o,transaction:i})}function Ne(e){const t=U().A.state;if(!t.isActive)return;const{selection:n,simpleTableStore:o}=t,i=D().$O(o);if(!i)return;const r=o.getContentStores(),{environment:a,transaction:s}=e,l=Math.min(n.start.row,n.end.row),c=Math.max(n.start.row,n.end.row),d=Math.min(n.start.col,n.end.col),u=Math.max(n.start.col,n.end.col);for(let p=l;p<=c;p++)Le({rowStore:r[p],startIndex:d,endIndex:u,columnOrder:i,transaction:s});k().clear({environment:a})}function Le(e){const{rowStore:t,startIndex:n,endIndex:o,columnOrder:i,transaction:r}=e,a=i.slice(n,o+1);if(!a)return;const s=(0,f().MU)(a.map((e=>[e,null])));x().L({environment:t.environment,store:t,properties:s,transaction:r})}function Oe(e){const{environment:t,simpleTableStore:n,transaction:o}=e,r=D().$O(n)||[],s=D().o0(n)||{},{headerRow:u}=D().uq(n),p=n.getContentStores();if(!r.length)return;const m=r[0],g=n.getSpaceId(),v=(0,C().Z1)({environment:t,table:c().Vl,spaceId:g}),h=(0,C().Z1)({environment:t,table:d().Gy,spaceId:g}),_=u?p[0]:void 0,S=(0,f().MU)(r.map(((e,t)=>function(e){const{columnID:t,columnIndex:n,titleColumnID:o,headerRowStore:i}=e;let r=t,a="text",s=F.turnIntoCollectionColumnTitle;t===o&&(r="title",a="title",s=F.turnIntoCollectionTitle);const l=T().A.getIntl();return[r,{name:i?A().r4(i.getPropertyValue(t),i):l.formatMessage(s,{columnIndex:n}),type:a}]}({columnID:e,columnIndex:t,titleColumnID:m,headerRowStore:_})))),k={id:v,version:0,parent_table:l().ev,parent_id:n.id,space_id:g,name:void 0,schema:S,alive:!0},x=y().eC({environment:t,table:"collection",value:k,inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache,transaction:o});y().zv({store:n,data:{type:i().xd.collectionView,view_ids:[h],collection_id:v},transaction:o}),y().zv({store:n.getFormatStore(),data:{collection_pointer:{table:c().Vl,id:v,spaceId:g}},transaction:o}),p.map(((e,r)=>{if(u&&0===r)return void Ee({rowStore:e,simpleTableStore:n,transaction:o});const a=e.getProperties();y().zv({store:e,data:{type:i().xd.page},transaction:o}),w().R9({environment:t,store:e.getBlockTitleStore(),value:a[m],transaction:o}),y().zv({store:e.getPropertiesStore(),data:{[m]:void 0},transaction:o}),b().X$({childStore:e,parentStore:x,transaction:o})}));const M={id:h,version:0,type:"table",name:void 0,parent_id:n.id,parent_table:"block",space_id:g,format:{table_properties:r.map((e=>({visible:!0,property:e===m?"title":e,width:s&&e in s?s[e].width:void 0})))},page_sort:p.map((e=>e.id)).slice(0,a().WF),alive:!0},P={table:d().Gy,id:h,spaceId:g};I().applyOperation({store:(0,B().Oo)(n,P),operation:{pointer:P,command:"set",path:[],args:M},transaction:o})}function Ue(e){var t;const{environment:n,collectionViewBlockStore:o,pageStores:a,transaction:l}=e,c=o.getCollectionStoreIfSingleSource();if(!c)return;if(a.length>D().b6||a.some((e=>e.hasContent())))return;const[d]=o.getCollectionViewStores(),u=c.getSchema(),p=(d.getFormat().table_properties||[]).filter((e=>e.visible&&e.property in u));if(!p)return;const m=o.getContentStore(),v=(0,g().Ay)();y().zv({store:o,data:{type:i().xd.table,collection_id:null},transaction:l}),y().zv({store:o.getFormatStore(),data:{table_block_column_order:p.map((e=>"title"===e.property?v:e.property)),table_block_column_format:(0,f().MU)(p.map((e=>["title"===e.property?v:e.property,{width:e.width}]))),table_block_column_header:!0,collection_pointer:null},transaction:l});const h=y().Wv({environment:n,type:"table_row",properties:(0,f().MU)(p.map((e=>{const t=e.property,n=t in u?u[t]:void 0;return["title"===t?v:t,n?[[n.name]]:[]]}))),inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:l,spaceId:o.pointer.spaceId}),_=B().Bv.createChildStore(m,h.pointer);b().Ti({parentStore:m,childStore:_,transaction:l});const S=(0,r().yP)(u),k=S.length>0?null===(t=c.getRecordKeyStore())||void 0===t?void 0:t.getRecordKey():void 0;a.map(((e,t)=>{const o=B().Bv.createChildStore(m,e.pointer),a=e.getProperties(),c=S.reduce((function(e,t){const n=(0,r().H4)(k,s().On(a[t]));return e[t]=[[n]],e}),{});y().zv({store:o,data:{type:i().xd.tableRow},transaction:l}),y().zv({store:o.getPropertiesStore(),data:{...c,[v]:o.getBlockTitleStore().getValue()},transaction:l}),w().R9({environment:n,store:o.getBlockTitleStore(),value:void 0,transaction:l}),b().NI({parentStore:m,childStore:o,transaction:l})})),y().zv({store:c,data:{alive:!1},transaction:l}),y().zv({store:d,data:{alive:!1},transaction:l})}function Fe(e){const{simpleTableStore:t,transaction:n}=e,o=t.getFormat(),i=!Boolean(o.table_block_column_header);h().zA({stores:[t],update:{table_block_column_header:i},transaction:n})}function Ve(e){const{simpleTableStore:t,transaction:n}=e,o=t.getFormat(),i=!Boolean(o.table_block_row_header);h().zA({stores:[t],update:{table_block_row_header:i},transaction:n})}function je(e,t,n){const o=U().A.state;if(!o.isActive)return;const i="default"===t?void 0:t,{selection:r,simpleTableStore:a}=o;if("row"===r.type){const e=a.getContentStores()[r.start.row];h().zA({stores:[e],update:{block_color:i},transaction:n})}if("column"===r.type){const e=D().$O(a),t=(0,m().mg)(D().o0(a)||{});if(!e)return;const o=e[r.start.col];o in t?t[o].color=i:t[o]={color:i},h().zA({stores:[a],update:{table_block_column_format:t},transaction:n})}R().default.state.phase!==R().SelectionPhase.Selected||e.device.isMobile||S().IU({environment:e})}function ze(e){const{simpleTableStore:t,parentWidth:n,transaction:o}=e,i=D().$O(t);if(!i)return;const r=D().o0(t),a=(n-18)/i.length,s=(0,f().MU)(i.map((e=>[e,{width:a,color:r&&r[e]?r[e].color:void 0}])));h().zA({stores:[t],update:{table_block_column_format:s},transaction:o})}},920093:(e,t,n)=>{n.d(t,{V:()=>a,h:()=>r});var o=()=>n(763824),i=()=>n(350188);function r(e){const t=o().yX();return i().A.setState({...e,open:!0,onComplete:t.resolve}),t.promise}function a(e){const t=i().A.state;t.open&&(t.onComplete(e.didConfirm),i().A.reset())}},920773:(e,t,n)=>{n.d(t,{p:()=>d});var o=n(296540),i=n(774963),r=()=>n(100622),a=()=>n(960715),s=n(474848);function l(e){let{isBlue:t,isRed:n,isOrange:o,isGray:i,isLightGray:a,theme:s}=e;return t?s.blueColor:n?r().Ay.red:o?"dark"===s.mode?s.accentColors.orange[600]:s.accentColors.orange[400]:i?s.text.secondary:a?s.text.tertiary:s.text.primary}function c(e,t){let{children:o,hoveredStyle:i,icon:r,isGray:c,isBlue:d,isRed:u,isLightGray:p,isOrange:m,size:g="md",shape:f="default",pressedStyle:v,shouldShrink:h,style:_,iconStyle:b,showUnderline:y,"aria-label":S,...w}=e;const k=(0,n(401497).IS)((e=>({buttonStyle:{...(0,a().qq)({shape:f,size:g,hasIconOnly:Boolean(r)&&!o}),flexShrink:h?1:0,lineHeight:1.2,minWidth:0,color:l({isBlue:d,isRed:u,isOrange:m,isGray:c,isLightGray:p,theme:e}),...y&&{textDecoration:"underline"},..._},hoveredStyle:{...d&&{background:e.outlineBlueButtonHoveredBackground},...u&&{background:e.outlinefrontSecondaryButtonHoveredBackground},...m&&{background:"dark"===e.mode?e.accentColors.orange[100]:e.accentColors.orange[50]},...i},pressedStyle:{...d&&{background:e.outlineBlueButtonPressedBackground},...u&&{background:e.outlinefrontSecondaryButtonPressedBackground},...m&&{background:"dark"===e.mode?e.accentColors.orange[300]:e.accentColors.orange[200]},...v},iconStyle:{...(0,a().D3)({size:g,hasIconOnly:!o}),...b}})),[o,i,r,b,d,c,p,m,u,v,h,y,f,g,_]);return(0,s.jsxs)(n(704152).A,{ref:t,style:k.buttonStyle,hoveredStyle:k.hoveredStyle,pressedStyle:k.pressedStyle,ariaLabel:S,...w,children:[r?r(k.iconStyle):null,o]})}const d=o.memo(o.forwardRef(c),i.bN)},921385:(e,t,n)=>{n.d(t,{Fg:()=>Ie,p6:()=>xe,dr:()=>ke,D0:()=>Ze,kx:()=>X,tN:()=>ie});n(898992),n(823215),n(354520),n(581454);var o=n.n(n(36545)),i=()=>n(584262),r=()=>n(700500),a=()=>n(742852),s=()=>n(959013),l=()=>n(908006),c=()=>n(502438),d=()=>n(132867),u=()=>n(620689),p=()=>n(778417);var m=()=>n(884107),g=()=>n(60867),f=()=>n(705540),v=()=>n(495262),h=()=>n(857783),_=()=>n(435009),b=()=>n(797265),y=()=>n(751156),S=()=>n(878377),w=()=>n(836251),k=()=>n(202786),I=()=>n(712287),x=()=>n(656219),A=()=>n(416726);const C=(0,A().Fw)({key:"open home",displayName:void 0,analyticsName:"openHome",validators:[S().M3g],shortcuts:["openHome"],closeParentMenu:!0,action:async e=>{const t=e.environment,o=n(696746).XH("main");o&&(await o.load(),o.canRead()&&((0,n(162674).ZL)({environment:t,from:"keyboard_shortcut"}),h().uK({environment:t,store:o,pageVisitSource:i().y8.SidebarHome})))}});var T=()=>n(869562),M=()=>n(351360),P=()=>n(171018),B=()=>n(712505),R=()=>n(250484),E=()=>n(63759),D=()=>n(316221),N=()=>n(797583),L=()=>n(654056),O=()=>n(566908),U=()=>n(137743),F=()=>n(668491),V=()=>n(260488);const j=(0,s().YK)({quickFindName:{id:"action.quickFind.name",defaultMessage:"Quick find"}}),z=(0,A().Fw)({key:"quick find",displayName:j.quickFindName,analyticsName:j.quickFindName.defaultMessage,validators:[S().or([S().L8k,W]),S().AU6(S().ULX)],shortcuts:["quickFind"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return V().su({environment:t,analyticsFrom:"keyboard-shortcut"})}}),H=(0,A().Fw)({key:"quick find (alternative)",displayName:j.quickFindName,analyticsName:j.quickFindName.defaultMessage,validators:[S().or([S().L8k,W]),S().AU6(S().or([S().Uo6([S().c5w,k().T]),S().Uo6([S().p2L,S().vXb,S().wu0])])),S().AU6(S().ULX)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return V().su({environment:t,analyticsFrom:"keyboard-shortcut-command-k"})}});function W(e){const t=e.environment.RouterStore.state.route.name;switch(t){case"chat":case"gallery":case"marketplace":case"home":case"page":case"team":return!0;case"space":case"admin":case"adminListData":case"adminSingleRecord":case"aiGtmFavoriteImport":case"appleAuthCallback":case"asanaAuthCallback":case"communityRedirect":case"contentPolicyRedirect":case"creatorProfile":case"creatorProfileAnalytics":case"creatorProfileTemplates":case"creatorProfileCoupons":case"localizedTemplates":case"datadogAuthCallback":case"desktopEmailConfirm":case"exportPreview":case"external":case"externalAuthCallback":case"externalIntegrationAuthCallback":case"externalIntegrationPopupRedirect":case"front":case"googleAuthCallback":case"googleDriveAuthCallback":case"googleOneTapRedirect":case"guideRedirect":case"inAppTemplateCreatorSubmission":case"inAppTemplateSubmission":case"initiateExternalAuthentication":case"initiateExternalAuthenticationFromDesktop":case"invoiceById":case"invoiceRedirect":case"login":case"login/calendar":case"login/mail":case"loginSuccessCallback":case"loginWithEmailCallback":case"addAnotherAccount":case"logout":case"make":case"microsoftAuthCallback":case"modal":case"myIntegrations":case"nativeRedirect":case"nativeMailRedirect":case"nativeCalendarRedirect":case"nativeTab":case"posts":case"new":case"notFound":case"notionCalendarAuthorization":case"oauthAuthorization":case"onboarding":case"passwordChangeRedirect":case"passwordResetCallback":case"quickSearch":case"root":case"samlAuthCallback":case"passkeyAuthVerify":case"passkeyAuthCallback":case"passkeyRegistrationCallback":case"passkeyRegistrationVerification":case"settingsConsoleDefault":case"settingsConsoleOrganization":case"signup":case"signup/calendar":case"signup/mail":case"signupWithTrial":case"slackAuthCallback":case"studentGroupSignup":case"teamInvite":case"teamsInvite":case"templatesRedirect":case"termsRedirect":case"trelloAuthCallback":case"uiDoc":case"uniqueId":case"unknown":case"unsubscribe":case"upcomingInvoice":case"globalOauthPostLogin":case"startupsApplication":case"smbsApplication":case"lennyApplication":case"creatorProgramApplication":case"blank":case"creatorProfileIntegrations":case"githubStudentPackHome":case"githubStudentPackAuthCallback":case"formResponse":case"externalAuthNativeCallback":case"privacyCenterRedirect":case"workflowTemplates":return!1;default:return(0,n(534177).ub)(t),!1}}var q=()=>n(22913),K=()=>n(24157);const G=(0,s().YK)({searchName:{id:"action.search.name",defaultMessage:"Search"}}),$=(0,A().Fw)({key:"search",displayName:G.searchName,analyticsName:G.searchName.defaultMessage,validators:[S().M3g,S().or([S().afo,S().L8k]),S().AU6(S().dUO),S().AU6(S().nOz),S().AU6(S().I2X)],shortcuts:["search"],closeParentMenu:!0,action:e=>{var t,o;const i=(0,n(186445).ao)();if(!i)return;const r=i.isCollectionView(),a=(0,n(799832).U)(i),s="page"===(null==a||null===(t=a.collectionViewStore())||void 0===t?void 0:t.getType());if(r&&!s){const e=n(129522).K.findCollectionViewBlockFromStore(i);return void(e&&"collectionContextStore"in e&&(null==e||e.collectionContextStore.searchOpenStore.setState(!0)))}const l=null===(o=window.getSelection())||void 0===o?void 0:o.toString(),c="editing"===K().default.state.mode?K().default.state:void 0;n(476380).ho({environment:e.environment,selectedString:l,textSelectionOnOpen:c})}});var Y=()=>n(287133);function Q(e){return void 0!==e.shortcuts}const Z=(0,s().YK)({enterName:{id:"action.enter.name",defaultMessage:"Enter"},zoomInName:{id:"action.zoomIn.name",defaultMessage:"Zoom in"},zoomOutName:{id:"action.zoomOut.name",defaultMessage:"Zoom out"},resetZoomName:{id:"action.resetZoom.name",defaultMessage:"Reset zoom"},copyFormattedLinkNavigableTypeName:{id:"action.copyFormattedLinkNavigableType.name",defaultMessage:"Copy linked title"},pasteName:{id:"action.paste.name",defaultMessage:"Paste"},moveUpName:{id:"action.moveUp.name",defaultMessage:"Move up"},moveDownName:{id:"action.moveDown.name",defaultMessage:"Move down"},propertyVisibilityLabel:{id:"action.propertyVisibility.label",defaultMessage:"Toggle property visibility"},createLinkName:{id:"action.createLink.name",defaultMessage:"Add link"},boldName:{id:"action.bold.name",defaultMessage:"Bold"},italicName:{id:"action.italic.name",defaultMessage:"Italic"},strikeThroughName:{id:"action.strikeThrough.name",defaultMessage:"Strike-through"},underlineName:{id:"action.underline.name",defaultMessage:"Underline"},darkModeName:{id:"action.darkMode.name",defaultMessage:"Dark mode"},openAsPageName:{id:"action.openAsPage.name",defaultMessage:"Open as page"},toggleQnAMessage:{defaultMessage:"Toggle QnA",id:"action.toggleQnA.name"}});function X(e){return"key"in e}function J(e){return"clipboardData"in e}const ee=[S().p2L,S().AU6(S().vEP),S().O1v];function te(e){return(0,A().Fw)({...e,validators:ee,closeParentMenu:!0,action:t=>{let{environment:o,blocks:i}=t;y().createAndCommit({userAction:"actionRegistry.createAnnotationAction",environment:o,canUndo:!0,perform:t=>{n(699744).XJ({environment:o,blocks:i,annotation:e.annotation,transaction:t})}})}})}const ne=(0,A().Fw)({key:"toggle all updates",displayName:void 0,analyticsName:"toggleAllUpdates",validators:[S().M3g],shortcuts:["toggleAllUpdates"],closeParentMenu:!0,action:e=>{n(770906).ZT({environment:e.environment,contentType:"inbox"})}}),oe=(0,A().Fw)({key:"open share menu",displayName:void 0,analyticsName:"openShareMenu",validators:[S().M3g],shortcuts:["openShareMenu"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return n(321172).Tk(t)}}),ie=(0,A().Fw)({key:"undo",displayName:A().AY.undoName,analyticsName:A().AY.undoName.defaultMessage,svg:n(454503).arrowUTurnUpLeftIcon,validators:[S().M3g,S().p2L,S().BBM,S().AU6(S().FrL),S().AU6(S().Xjv(r().xd.externalObjectInstancePage)),S().or([S().AU6(S().lj$),S().AU6(S().PfK)]),S().AU6(S().oy3)],shortcuts:["undo"],closeParentMenu:!0,track:{actionName:"undo"},action:(e,t,n)=>{let{environment:o}=t;return v().tN({environment:o,callback:e})}}),re=(0,A().Fw)({key:"redo",displayName:A().AY.redoName,analyticsName:A().AY.redoName.defaultMessage,svg:n(638616).W,validators:[S().fHN],shortcuts:["redo"],closeParentMenu:!0,track:{actionName:"redo"},action:(e,t,n)=>{let{environment:o}=t;return v().ZS({environment:o,callback:e})}}),ae=(0,A().Fw)({key:"up",analyticsName:"Up",displayName:void 0,validators:[],shortcuts:["up"],closeParentMenu:!0,action:(e,t)=>{let{environment:n}=e;if(t&&X(t))return t.metaKey||t.ctrlKey?p().JK(n):void p().bi({environment:n,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),se=(0,A().Fw)({key:"left",analyticsName:"Left",displayName:void 0,validators:[],shortcuts:["left"],closeParentMenu:!0,action:(e,t)=>{let{environment:n}=e;t&&X(t)&&p().jG(n)}}),le=(0,A().Fw)({key:"down",analyticsName:"Down",displayName:void 0,validators:[],shortcuts:["down"],closeParentMenu:!0,action:(e,t)=>{let{environment:n}=e;if(t&&X(t))return t.metaKey||t.ctrlKey?p().PF(n):void p().mL({environment:n,shiftKey:Boolean(t&&t.shiftKey),altKey:Boolean(t&&t.altKey)})}}),ce=(0,A().Fw)({key:"right",analyticsName:"Right",displayName:void 0,validators:[],shortcuts:["right"],closeParentMenu:!0,action:e=>{let{environment:t}=e;p().Uz(t)}}),de=(0,A().Fw)({key:"context menu",analyticsName:"Context menu",displayName:void 0,validators:[S().W_Y,S().AU6(S().vEP)],shortcuts:["commandSlash"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const{stores:o}=c().default.state;n(901265).WU({environment:t,stores:o,actionSectionGroupKey:"default",analyticsFrom:"command_slash_menu"})}}),ue=(0,A().Fw)({key:"indent",analyticsName:"Indent",displayName:void 0,validators:[S().p2L,S().AU6(S().vEP),S().ctY,S().AU6(S().$Mx)],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;y().createAndCommit({userAction:"actionRegistry.indent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=c().default.state.stores;if(t.length>0){const n=d().pZ({environment:e.environment,blocks:t,transaction:e.transaction});n&&p().td({environment:e.environment,stores:n})}}({environment:t,transaction:e})}})}}),pe=(0,A().Fw)({key:"subitemIndent",analyticsName:"Toggle By Indent",displayName:void 0,validators:[S().p2L,S().AU6(S().vEP),S().ctY,S().$Mx,S().iv4,S().RdQ],shortcuts:["tab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;y().createAndCommit({userAction:"actionRegistry.subitemIndent",environment:n,canUndo:!0,perform:e=>{g().RJ({environment:n,transaction:e,blocks:t,action:"indentSelfAndSubtree"})}})}}),me=(0,A().Fw)({key:"unindent",analyticsName:"Unindent",displayName:void 0,validators:[S().p2L,S().AU6(S().vEP),S().ctY,S().AU6(S().$Mx)],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{environment:t}=e;y().createAndCommit({userAction:"actionRegistry.unindent",environment:t,canUndo:!0,perform:e=>{!function(e){const t=c().default.state.stores;if(t.length>0){const n=d().Y1({environment:e.environment,blocks:t,transaction:e.transaction});n&&p().td({environment:e.environment,stores:n})}}({environment:t,transaction:e})}})}}),ge=(0,A().Fw)({key:"subitemUnindent",analyticsName:"Toggle By Unindent",displayName:void 0,validators:[S().p2L,S().AU6(S().vEP),S().ctY,S().$Mx,S().iv4,S().RdQ],shortcuts:["untab"],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;y().createAndCommit({userAction:"actionRegistry.subitemUnindent",environment:n,canUndo:!0,perform:e=>{g().RJ({environment:n,transaction:e,blocks:t,action:"unindentSelf"})}})}}),fe=(0,A().Fw)({key:"escape",analyticsName:"Escape",displayName:void 0,validators:[S().AU6(S().stn)],shortcuts:["esc"],closeParentMenu:!0,action:e=>{let{environment:t}=e;n(415651).Pt(t),p().IU({environment:t}),n(661920).nJ(t),n(846955).default.dismissTourTutorial()}}),ve=(0,A().Fw)({key:"escape",analyticsName:"Quick Search Escape",displayName:void 0,validators:[S().stn],shortcuts:["esc"],closeParentMenu:!0,action:()=>{R().Ay.state.query.text.length>0?R().Ay.updateQueryText(""):f().closeQuickSearch()}}),he=(0,A().Fw)({key:"select all",analyticsName:"Select all",displayName:void 0,validators:[],shortcuts:["selectAll"],closeParentMenu:!0,action:e=>{let{environment:t}=e;p().Ub(t)}}),_e=(0,A().Fw)({key:"cut",analyticsName:"Cut",displayName:void 0,validators:[S().p2L,S().AU6(S().vEP),S().opL],shortcuts:["cut"],closeParentMenu:!0,action:(e,t)=>{let{environment:n,lazyDependencies:o}=e;const{clipboardActions:i,markdownLinkifyIt:r}=o;i&&t&&J(t)&&i&&i.cutWithMaybeConfirmation({environment:n,event:t,markdownLinkifyIt:r})}}),be=(0,A().Fw)({key:"copy",analyticsName:"Copy",displayName:void 0,validators:[],shortcuts:["copy"],closeParentMenu:!0,action:(e,t)=>{let{environment:n,lazyDependencies:o}=e;const{clipboardActions:i,markdownLinkifyIt:r}=o;t&&J(t)&&i&&i.copy({environment:n,event:t,markdownLinkifyIt:r})}}),ye=(0,A().Fw)({key:"zoom in",displayName:Z.zoomInName,analyticsName:Z.zoomInName.defaultMessage,validators:[S().b8R,S().AU6(S().DNw)],shortcuts:["zoomIn"],closeParentMenu:!0,action:()=>{f().zoomIn()}}),Se=(0,A().Fw)({key:"zoom out",displayName:Z.zoomOutName,analyticsName:Z.zoomOutName.defaultMessage,validators:[S().b8R,S().AU6(S().DNw)],shortcuts:["zoomOut"],closeParentMenu:!0,action:()=>{f().zoomOut()}}),we=(0,A().Fw)({key:"zoom reset",displayName:Z.resetZoomName,analyticsName:Z.resetZoomName.defaultMessage,validators:[S().b8R,S().AU6(S().DNw)],shortcuts:["zoomReset"],closeParentMenu:!0,action:()=>{f().zoomReset()}});function ke(){const{mainEditorCurrentBlockStore:e}=M().default.state;return B().default.state.open&&B().default.state.targetStore||e}async function Ie(e,t,n,o){const i=await m().R.clipboardActions.load(),r=ke();if(r)return void e(i)({environment:t,blocks:[r],callback:o,event:n});const a=(0,w().hK)(t);if(a){const{copyString:e,clipboardMessages:n}=i;e({environment:t,stringValue:a,copiedMessage:n.copiedLinkToClipboard}).then(o)}}const xe=(0,A().Fw)({key:"copy link to current page",displayName:A().AY.copyLinkNavigableTypeName,analyticsName:A().AY.copyLinkNavigableTypeName.defaultMessage,svg:a().w,validators:[S().b8R,S().AU6(S().oy3)],shortcuts:["copyLinkToCurrentPage"],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,n)=>{let{environment:o}=t;return Ie((e=>e.copyLinkToBlock),o,n,e)}}),Ae=(0,A().Fw)({key:"copy linkified page title to current page",displayName:Z.copyFormattedLinkNavigableTypeName,analyticsName:Z.copyFormattedLinkNavigableTypeName.defaultMessage,svg:a().w,validators:[],shortcuts:["copyCurrentPageLinkifiedBlockTitle"],closeParentMenu:!0,track:{actionName:"copy_block_link"},action:(e,t,n)=>{let{environment:o}=t;return Ie((e=>e.copyFormattedLinkToBlock),o,n,e)}}),Ce=(0,A().Fw)({key:"paste",displayName:Z.pasteName,analyticsName:Z.pasteName.defaultMessage,validators:[S().p2L,S().AU6(S().vEP),S().opL,S().M3g],shortcuts:["paste"],closeParentMenu:!0,action:(e,t)=>{let{environment:n,lazyDependencies:{clipboardActions:o,formulasModule:i,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a}}=e;t&&J(t)&&o&&y().createAndCommit({userAction:"actionRegistry.paste",environment:n,canUndo:!0,perform:e=>{o.paste({environment:n,event:t,disableEmbedMenu:!0,transaction:e,onPasteFiles:o.pasteFilesForBlocks,formulasModule:i,markdownLinkifyIt:r,tinyMceMicrosoftWordPasteFilter:a})}})}}),Te=(0,A().Fw)({key:"move up",displayName:Z.moveUpName,analyticsName:Z.moveUpName.defaultMessage,validators:[S().p2L,S().ctY,S().AU6(S().$Mx)],shortcuts:["moveUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;y().createAndCommit({userAction:"actionRegistry.moveUp",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=d().BO({transaction:e.transaction,blocks:c().default.state.stores});t&&(p().td({environment:e.environment,stores:t}),await l().default.afterNextFlush(),u().BM({environment:e.environment}))}({environment:t,transaction:e})}})}}),Me=(0,A().Fw)({key:"move down",displayName:Z.moveDownName,analyticsName:Z.moveDownName.defaultMessage,validators:[S().p2L,S().ctY,S().AU6(S().$Mx)],shortcuts:["moveDown"],closeParentMenu:!0,action:e=>{let{environment:t}=e;y().createAndCommit({userAction:"actionRegistry.moveDown",environment:t,canUndo:!0,perform:e=>{!async function(e){const t=d().oJ({transaction:e.transaction,blocks:c().default.state.stores});t&&(p().td({environment:e.environment,stores:t}),await l().default.afterNextFlush(),u().BM({environment:e.environment}))}({environment:t,transaction:e})}})}}),Pe=(0,A().Fw)({key:"property visibility",displayName:Z.propertyVisibilityLabel,analyticsName:Z.propertyVisibilityLabel.defaultMessage,shortcuts:["togglePropertyVisibility"],validators:[S().p2L,S().AU6(S().Kq2)],closeParentMenu:!0,action:e=>{const t=Object.values(B().default.state.open?P().A6.state.pagePropertiesStoreMap:P().Ep.state.pagePropertiesStoreMap),n=B().default.state.open?B().default.state.targetStore:M().default.state.mainEditorCurrentBlockStore;if(!n)return;const o=n.getAssociatedCollectionStore();if(!o)return;const i=t.every((e=>e.state.forceShowProperties)),r=(null==o?void 0:o.getNormalizedPropertyGroups())??[],a=r.every((e=>x().A.isPropertyGroupExpanded({groupId:e.id}))),s=!i||!a;for(const l of t)l.setState({...l.state,forceShowProperties:s});for(const l of r)x().A.setPropertyGroupExpandedOverride({groupId:l.id,override:s?"open":"closed"})}}),Be=(0,A().Fw)({key:"enter",displayName:Z.enterName,analyticsName:Z.enterName.defaultMessage,validators:[S().p2L,S().AU6(S().vEP)],shortcuts:["enter"],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;y().createAndCommit({userAction:"actionRegistry.enter",environment:t,canUndo:!0,perform:e=>{b().x7({blocks:n,transaction:e})}})}}),Re=(0,A().Fw)({key:"activate",analyticsName:"Activate",displayName:void 0,validators:[S().p2L,S().mUX],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>b().Yf(e)}),Ee=(0,A().Fw)({key:"open tab",analyticsName:"open tab",displayName:void 0,validators:[S().ITL],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>b().AP(e)}),De=(0,A().Fw)({key:"toggle sidebar",analyticsName:"Toggle sidebar",displayName:void 0,validators:[S().AU6(S().b8z)],shortcuts:["toggleSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return T().setExpand({environment:t,isExpanded:!n(749687).sidebarExpandedStore.state,from:"action_registry",saveDetailsSidebarPreference:!0})}}),Ne=(0,A().Fw)({key:"toggle update sidebar",analyticsName:"Toggle update sidebar",displayName:void 0,validators:[],shortcuts:["toggleUpdateSidebar"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(B().default.state.open){const e=n(455994).A.getPanelState("peek"),o=B().default.state.targetStore,i=null==o?void 0:o.getAssociatedCollectionStore();if(!i)return;const r=i.getLayoutStore();if(!r)return;e.isOpen?(0,I().F)({environment:t,layoutStore:r,from:"keyboard_default",panelLocation:"peek"}):(0,I().j)({environment:t,layoutStore:r,from:"keyboard_default",panelLocation:"peek"})}else T().setUpdateExpand({environment:t,isExpanded:!(0,n(644914).Nk)(t),from:"keyboard_default",saveDetailsSidebarPreference:!0})}}),Le=(0,A().Fw)({key:"open link annotation menu",displayName:Z.createLinkName,analyticsName:Z.createLinkName.defaultMessage,validators:[S().c5w,k().T,S()._37,S().opL,S().AU6(S().Pnk)],shortcuts:["openLinkMenuOrOpenSearch"],closeParentMenu:!0,action:()=>n(501666).fi({type:"focusOnly",focus:!0})}),Oe=(0,A().Fw)({key:"exit app",analyticsName:"Exit app",displayName:void 0,validators:[S().AU6(S().UL_),S().m01],shortcuts:["backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;if(t.mobileNative)if((0,w().Al)(t)){const{TabbedRouterStore:e}=t;"home"!==e.state.activeTab?n(537941).s({environment:t,tab:"home",navigationAction:"pop",navigationSource:"mobile-back-navigation"}):t.mobileNative.exitApp()}else t.mobileNative.exitApp()}}),Ue=(0,A().Fw)({key:"command left",analyticsName:"Go back",displayName:void 0,validators:[S().UL_,S().AU6(S().c5w)],shortcuts:["commandLeft"],closeParentMenu:!0,action:(e,t)=>_().aX(e.environment)}),Fe=(0,A().Fw)({key:"command right",analyticsName:"Go forward",displayName:void 0,validators:[S().MNy,S().AU6(S().c5w)],shortcuts:["commandRight"],closeParentMenu:!0,action:()=>_().sY()}),Ve=(0,A().Fw)({key:"go back",analyticsName:"Go back",displayName:void 0,validators:[S().UL_],shortcuts:["goBack","backbutton"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return _().aX(t)}}),je=(0,A().Fw)({key:"go forward",analyticsName:"Go forward",displayName:void 0,validators:[S().MNy],shortcuts:["goForward"],closeParentMenu:!0,action:()=>_().sY()}),ze=(0,A().Fw)({key:"go up",analyticsName:"Go up",displayName:void 0,validators:[()=>_()._r()],shortcuts:["goUp"],closeParentMenu:!0,action:e=>{let{environment:t}=e;return _().up(t)}}),He=(0,A().Fw)({key:"open settings",analyticsName:"Open settings",displayName:void 0,validators:[S().b8R,S().uFH],shortcuts:["settings"],closeParentMenu:!0,action:e=>{n(209660).Ow()}}),We=(0,A().Fw)({key:"new page",analyticsName:"New page",displayName:void 0,validators:[S().IT$,S().M3g,S().or([S().b8R,S().wHP])],shortcuts:["newPage"],closeParentMenu:!0,action:e=>{let{environment:t}=e;T().quickAddPage({environment:t,from:"cmd_n"})}}),qe=(0,A().Fw)({key:"turn into type",displayName:A().AY.turnIntoName,analyticsName:A().AY.turnIntoName.defaultMessage,validators:[S().p2L,S().AU6(S().vEP),n(792609).Y,S().pLL],shortcuts:["turnIntoType"],closeParentMenu:!0,track:{actionName:"turn_into"},action:async(e,t,i)=>{let{blocks:a,environment:s}=t;const l=await(0,n(855801).zQ)();if(!i||!X(i))return;i.preventDefault();const c=parseInt(o()(i.keyCode)),d=r().zx[c],{serverCommitResult:u}=y().createAndCommit({userAction:"actionRegistry.turnIntoTypeViaKeyboard",environment:s,canUndo:!0,perform:e=>{l({environment:s,blocks:a,blockType:d,transaction:e})}});u.then(e)}}),Ke=[te({key:"toggle bold",displayName:Z.boldName,analyticsName:Z.boldName.defaultMessage,shortcuts:["toggleBold"],annotation:["b"]}),te({key:"toggle italics",displayName:Z.italicName,analyticsName:Z.italicName.defaultMessage,shortcuts:["toggleItalics"],annotation:["i"]}),te({key:"toggle strike",displayName:Z.strikeThroughName,analyticsName:Z.strikeThroughName.defaultMessage,shortcuts:["toggleStrike"],annotation:["s"]}),te({key:"toggle underline",displayName:Z.underlineName,analyticsName:Z.underlineName.defaultMessage,shortcuts:["toggleUnderline"],annotation:[n(919709).Ifu.Underline]})],Ge=(0,A().Fw)({key:"toggle dark mode",displayName:Z.darkModeName,analyticsName:Z.darkModeName.defaultMessage,validators:[],shortcuts:["toggleDarkMode"],closeParentMenu:!0,action:e=>{let{environment:t}=e;const o="light"===t.ThemeStore.state.mode?"dark":"light";n(851650).C5(o)}}),$e=(0,A().Fw)({key:"open peek view as page",displayName:Z.openAsPageName,analyticsName:Z.openAsPageName.defaultMessage,validators:[S().GbK],shortcuts:["commandEnter"],closeParentMenu:!0,action:e=>{let{environment:t}=e;B().default.peekTargetStore.state&&h().uK({environment:t,store:B().default.peekTargetStore.state,pageVisitSource:i().y8.Expand})}});function Ye(e){return e.actions.filter(Q).map((t=>({...t,searchName:[e.title,t.displayName].filter(Boolean).join(" ")})))}const Qe=(0,A().Fw)({key:"toggle qna in corner",displayName:Z.toggleQnAMessage,analyticsName:"toggleQnAPane",validators:[S().L8k,S().AU6(S().c5w),S().AU6(S().W_Y),...n(621793).Jl],shortcuts:["commandJ"],closeParentMenu:!0,action:async e=>{let{environment:t}=e;const{assistantDependency:o}=await Promise.resolve().then(n.bind(n,650829)),{assistantMenuStore:i,assistantOriginElementStore:r,assistantAnalyticsActions:a,assistantMenuActions:s}=await o.load();if(n(430483).zD.shouldShowAssistantInCorner(t.device))if(i.state.open){await s.closeAssistantRightHandSideMenu({environment:t}),r.setAssistantLastViewedTime();const e=n(295169).default.getActiveSession();e&&a.trackAssistantClosed(t,{sessionContext:e,from:"button"})}else s.openAssistantRightHandSideMenu({environment:t,from:"shortcut"})}}),Ze=[z,H,n(254452).z,...L().yj.actions,L().As,n(288502).i,Be,Re,O().N,O().S,Ee,F().Sr,F().EC,Y().Zm,Y().Lc,q().U,q().H,E().Im,E().pG,(0,n(363019).F)("keyboard_shortcut"),ie,re,$,ue,pe,ge,me,he,fe,ve,Te,Me,_e,be,Ce,ae,se,le,ce,Qe,de,D().gS,n(599364).ko,D().KV,Le,Oe,Ve,je,Ue,Fe,ye,Se,we,ze,U().t,U().Y,xe,Ae,qe,F().NQ,F().ET,De,Ne,He,We,N().Fs,Ge,$e,Pe,ne,oe,C,N().DI,...Ke,...Ye(n(843005).t3),...Ye(n(443616).kl)]},921855:(e,t,n)=>{n.d(t,{A6:()=>ke,Fm:()=>ye,HP:()=>fe,K8:()=>xe,PB:()=>we,PP:()=>ve,Rq:()=>ge,S5:()=>ee,V_:()=>de,Vg:()=>ne,Vr:()=>Te,W5:()=>_e,Xu:()=>Me,Z6:()=>le,_S:()=>ue,a8:()=>ce,k5:()=>Ae,kw:()=>Ie,ng:()=>Re,nu:()=>Se,oB:()=>Be,r4:()=>te,rM:()=>pe,sQ:()=>Ee,sp:()=>he,vA:()=>J,xh:()=>Ce});n(944114),n(898992),n(354520),n(672577),n(803949),n(581454);var o=()=>n(450125),i=()=>n(634201),r=()=>n(857639),a=()=>n(416504),s=()=>n(450648),l=()=>n(179034),c=()=>n(919709),d=()=>n(191772),u=()=>n(931075),p=()=>n(100622),m=()=>n(496603),g=()=>n(720665),f=()=>n(319975),v=()=>n(347469),h=()=>n(410282),_=()=>n(116008),b=()=>n(780054),y=()=>n(914649),S=()=>n(267419),w=()=>n(972435),k=()=>n(231722),I=()=>n(562800),x=()=>n(110955),A=()=>n(351360),C=()=>n(508496),T=()=>n(53137),M=()=>n(630116),P=()=>n(24157),B=()=>n(47373),R=()=>n(295740),E=()=>n(838924),D=()=>n(713972),N=()=>n(197194),L=()=>n(792540),O=()=>n(962845),U=()=>n(299545),F=()=>n(333665),V=()=>n(906537),j=()=>n(470928);function z(e){return D().vq(e)&&e.classList.contains(d().te)}function H(e){return D().vq(e)&&e.classList.contains(d().gy)}function W(e){return D().vq(e)&&e.classList.contains(d().kz)}function q(e){return function(e){const t=D().EV(e,(e=>(0,N().am)(e)||(0,R().qb)(e)));if(t&&z(t))return t}(e)||G(e)||function(e){const t=D().EV(e,(e=>W(e)||(0,R().qb)(e)));if(t&&W(t))return t}(e)}function K(e){return D().vq(e)&&e.classList.contains(o().s)}function G(e){const t=D().EV(e,(e=>(0,N().am)(e)||(0,R().qb)(e)));if(t&&(0,N().am)(t))return t}function $(e){return D().vq(e)&&e.classList.contains(d().Mo)}function Y(e){if($(e))return!0;try{return $(e.parentNode)}catch(t){return!1}}function Q(e){try{const t=D().EV(e,(e=>Boolean(e.getAttribute&&e.getAttribute("contenteditable"))||(0,R().qb)(e)));return t&&t.isContentEditable}catch(t){return!1}}function Z(e,t){if(e===t.container){if(D().KH(e)){const n=e.textContent||"";return(0,i().PE)(n.substring(0,t.offset)).length}{const n=Array.from(e.childNodes).slice(0,t.offset).map((e=>re(oe(e)))).join("");return(0,i().PE)(n).length}}let n=0;for(const o of Array.from(e.childNodes)){if(o.contains(t.container))return n+Z(o,t);n+=(0,i().PE)(re(oe(o))).length}return n}function X(e,t){const n=(0,R().sT)(e);if(!n)return 0;const o=function(e,t){const n=q(e);if(n){const e=n.parentNode,o=Array.from(e.childNodes).indexOf(n);return{container:e,offset:0===t?o:o+1}}if($(e)||$(e.parentNode))return{container:e,offset:(e.textContent||" ").length-1};return{container:e,offset:t}}(e,t);return Z(n,o)}function J(e,t){if(0===t)return!(e.childNodes.length>0)||z(e.childNodes[0])||K(e.childNodes[0])||(0,N().am)(e.childNodes[0])||W(e.childNodes[0])||H(e.childNodes[0])?{container:e,offset:0}:{container:e.childNodes[0],offset:0};const n=m().SL(e.childNodes,H),o=n>=0?n-1:e.childNodes.length-1;let r=t;for(let a=0;a<=o;a++){const t=e.childNodes[a],n=re(oe(t)),s=(0,i().PE)(n).length;if(a===o?r-s<=0:r-s<0){if(z(t)||(0,N().am)(t)||K(t)||$(t)||W(t)){const e=D().nx(t.parentNode,t);return{container:t.parentNode,offset:e}}if(t.nodeType===Node.TEXT_NODE){return{container:t,offset:m().di((0,i().PE)(n),0,r).join("").length}}return J(t,r)}r-=s}return{container:e,offset:0}}function ee(e){var t;const{environment:n,textValue:o,parentStore:i,disableHover:r,disableStyleAnnotations:s,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:c,disableSuggestionAnnotations:m,disableCommentAnnotations:g,disabled:f,emojiType:v,highlightDiscussionId:_,renderedPageBlockId:k,parentBlockId:P,theme:R,katex:D,disableLinks:N,disableFormulaVariableStyles:L,formulaValueTypes:O,stopLinkPropagation:U,linkTargetBlank:F}=e,{device:V,currentUser:z}=n,H=C().default.checkGate({gateName:"enable_deleted_page_indicator"}),W=x().A.state.open&&x().A.state.isAddMenu,q=null===(t=A().default.state.currentSpaceStore)||void 0===t?void 0:t.getModel(),K=(0,j().Io)()&&q&&(0,u().Xi)(q),{blockColor:G,isBlockStore:$}=(()=>{if(i.isTable("block")){var e;const t=i.getRecordStoreUIParent(),n=t?M().Bv.createChildStore(t,i.pointer):void 0;return{blockColor:(null==n||null===(e=n.getFormat())||void 0===e?void 0:e.block_color)||"default",isBlockStore:t instanceof M().Bv}}return{blockColor:"default",isBlockStore:!1}})(),Y=(0,p().Cg)(G)?"default":G,Q=(0,p().Cg)(G)?G:(0,h().j)(i.getRecordStoreUIAncestor(1));return d().S5({textValue:o,getRecordModel:i.getRecordModel,getRecordRole:i.getRecordRole,disableHover:r,disableStyleAnnotations:s,disableInsertedDeletedAnnotations:l,disableDateStyleAnnotations:c,disableSuggestionAnnotations:m,disableCommentAnnotations:g,disableLinks:N||!1,userTimeZone:(0,a().P)(),disabled:f,isAndroid:V.isAndroid,isSafariOrIOS:V.isSafari||V.isIOS,isWindows:V.isWindows,showEmojiInline:V.isWindows,emojiType:v,highlightDiscussionId:_,theme:R,intl:w().A.getIntl(),renderedPageBlockId:k,parentBlockId:P,katex:D,isClient:!0,baseUrl:b().A.domainBaseUrl,publicDomainName:b().A.publicDomainName,currentUserId:z.id,getPublicBaseUrlForPage:I().SN(n),externalIntegrations:T().A.integrations.state,disableFormulaVariableStyles:L,formulaValueTypes:O,enableDeletedPageIndicator:H,stopLinkPropagation:U,linkTargetBlank:F,emojiData:S().A.state,getToday:E().x1,isMobileNative:V.isMobileNative,isMobileNativeExternalLinkFixEnabled:C().default.checkGate({gateName:"mobile_native_external_link_fix"}),displayInUserTimezone:!0,dictationId:y().h5,isAddMenu:W,blockTextColor:Y,blockBackgroundColor:Q,isBlockStore:$,disableAnimation:V.prefersReducedMotion,isPageVerificationEnabled:K,arePeopleProfilesEnabled:(0,B().F0)(),isPageMentionReactEnabled:C().default.checkGate({gateName:"page_mention_react"})})}function te(e,t){return(0,s().r4)({textValue:e,getRecordModel:t.getRecordModel,userTimeZone:(0,a().P)(),intl:w().A.getIntl()})}function ne(e,t,n,o,i){const{device:r,currentUser:l}=e,u=c().RQ(n),p=[];for(const[m,g]of u.entries()){const e=c().uPN(g),n=c().G6d(e);n?p.push(d().EK({customEmojiAnnotation:n,tokenAnnotations:e,index:m,getRecordModel:o.getRecordModel,getRecordRole:o.getRecordRole,disableHover:!0,isAndroid:r.isAndroid,isSafariOrIOS:r.isSafari||r.isIOS,theme:t,baseUrl:b().A.domainBaseUrl,currentUserId:l.id,disableAnimation:r.prefersReducedMotion})):p.push((0,s().r4)({textValue:[g],getRecordModel:o.getRecordModel,userTimeZone:(0,a().P)(),intl:w().A.getIntl(),disableInsertedAnnotations:i}))}return p}function oe(e){let t="";if(z(e))t+=c().Sj;else if((0,N().am)(e))t=c().Yl$;else if(K(e))t+=e.alt;else if(function(e){return D().vq(e)&&"br"===e.tagName.toLowerCase()}(e))t+="\n";else if(D().KH(e))t+=e.textContent;else if(W(e));else for(const n of Array.from(e.childNodes))t+=oe(n);return H(e)&&(t=t.replace(se,"")),t}const ie=new RegExp(d().NO,"g");function re(e){return e.replace(ie,"")}const ae={[c().Sj]:{deleteEndToken:new RegExp(`${c().Sj}$`,"g"),deleteToken:new RegExp(`(${c().Sj})([^${d().NO}])`,"g"),existingToken:new RegExp(`${c().Sj}${d().NO}`,"g")},[c().Yl$]:{deleteEndToken:new RegExp(`${c().Yl$}$`,"g"),deleteToken:new RegExp(`(${c().Yl$})([^${d().NO}])`,"g"),existingToken:new RegExp(`${c().Yl$}${d().NO}`,"g")}},se=new RegExp(`${c().nfR}$`,"g");function le(e,t){if(!t)return"";let n=oe(t);if(e.device.isAndroid)for(const[o,i]of Object.entries(ae))n=n.replace(i.deleteEndToken,"").replace(i.deleteToken,"$2").replace(i.existingToken,o);return"\n"===n[n.length-1]&&(n=n.substring(0,n.length-1)),n}function ce(e,t,n){if(!e)return!1;let o=t;for(;o!==e&&!H(o);){const{parentNode:e}=o;if(!e)break;o=e}if(H(o))return n>0;const i=m().SL(e.childNodes,H);return!(i<0)&&(t===e&&n>i)}function de(e,t){const n=(0,R().sT)(e);if(!n)return;const o=X(e,t),i=q(e);return{index:o,forceEmit:Boolean(i),afterEndOfLine:ce(n,e,t)}}function ue(e,t){if(t||(t=V().get()),t){const e=X(t.startContainer,t.startOffset),n=X(t.endContainer,t.endOffset),o=q(t.startContainer)||q(t.endContainer);return{selection:{startIndex:e,endIndex:n},forceEmitSelectionStore:Boolean(o)}}}function pe(e,t,n){const o=J(e,t),i=J(e,n);return V().rangeFromContainerOffsets({start:o,end:i})}function me(e,t,n,o){if(e===n&&t===o)return!0;if(Y(e)!==Y(n))return!1;if(G(e)!==G(n))return!1;const i=(0,R().sT)(e),r=(0,R().sT)(n);if(i!==r)return!1;if(X(e,t)!==X(n,o))return!1;return ce(i,e,t)===ce(r,n,o)}function ge(e,t){return!e&&!t||!(!e||!t)&&(e.startOffset===t.startOffset&&e.endOffset===t.endOffset&&e.startContainer===t.startContainer&&e.endContainer===t.endContainer||Q(e.startContainer)&&Q(t.startContainer)&&me(e.startContainer,e.startOffset,t.startContainer,t.startOffset)&&me(e.endContainer,e.endOffset,t.endContainer,t.endOffset))}function fe(e){const{environment:t,event:n,textValue:o,editorNode:i,store:r,canEdit:a,disableEquationInteraction:s}=e,l=be({event:n,textValue:o,editorNode:i});(t.device.isFirefox||"editing"!==P().default.state.mode||P().default.isEmptySelection()||l&&(0,N().am)(l.node))&&l&&(s&&(0,N().am)(l.node)||f().Tv({environment:t,event:n,interactiveToken:l,store:r,canEdit:a}))}function ve(e){const{environment:t,event:n,textValue:o,editorNode:i,store:r,parentStore:a,canEdit:s}=e,l=be({event:n,textValue:o,editorNode:i});l&&f().Ip({environment:t,event:n,interactiveToken:l,store:r,parentStore:a,canEdit:s})}function he(e){const{environment:t,event:n,textValue:o,editorNode:i,store:r,canEdit:a}=e,s=be({event:n,textValue:o,editorNode:i});s&&f().xE({environment:t,event:n,interactiveToken:s,store:r,canEdit:a})}function _e(e){const{environment:t,event:n,textValue:o,editorNode:i,store:r,canEdit:a}=e;if(n.target===i)return void v().co({relatedNode:i});const s=be({event:n,textValue:o,editorNode:i});s&&f().HH({environment:t,event:n,interactiveToken:s,store:r,canEdit:a})}function be(e){const{event:t,textValue:n,editorNode:o}=e,i=D().EV(t.target,(e=>Boolean(e.getAttribute&&e.getAttribute("data-token-index"))));if(i&&null!=o&&o.contains(i)){const e=i.getAttribute("data-token-index");if(e){const t=Number.parseInt(e,10);if(n){const e=n[t];if(e)return{textValue:n,tokenIndex:t,textToken:e,node:i}}}}}function ye(e){return we({store:e.store,temporaryAnnotation:c().Ifu.TemporaryComment,multiSelection:_().A.getMultiSelection()})}function Se(e){const{blockId:t,textProps:n,find:o,currentFocusedResult:i}=e;let{textValue:r}=e;if(!r||"none"===n.type||0===o.length)return r;return(0,L().Jw)({textValue:r,find:o,intl:w().A.getIntl()}).forEach(((e,o)=>{let{selection:a}=e,s=!1;if("block_match"===n.type&&"block"===(null==i?void 0:i.type)){s=t===i.id&&m().n4(a,i.selection)}else if("comment_match"===n.type&&"comment"===(null==i?void 0:i.type)){s=n.commentId===i.id&&m().n4(a,i.selection)}else if("page_property_value_match"===n.type&&"page_property_value"===(null==i?void 0:i.type)){s=i.propertyId===n.propertyId&&m().n4(a,i.selection)&&i.id===t}else if("simple_table_cell_match"===n.type&&"simple_table_cell"===(null==i?void 0:i.type)){const e=n.propertyId===i.propertyId&&i.id===t;m().n4(a,i.selection),s=e}const l=s?c().Ifu.TemporarySelectedFindHighlight:c().Ifu.TemporaryFindHighlight;r=c().Mwp({textValue:r,selection:a,annotation:[l]})})),r}function we(e){const{store:t,temporaryAnnotation:n,multiSelection:o}=e,i=t.getValue();if(o){const e=(0,O().$W)(o).find((e=>{let{store:n}=e;return n===t}));if(e){const{selection:t}=e;return c().Mwp({textValue:i,selection:t,annotation:[n]})}}return i}function ke(e){const{store:t,multiSelection:n}=e,o=t.getValue();if(n){const e=(0,O().$W)(n).find((e=>{let{store:n}=e;return n===t}));if(e){const{selection:t}=e;return c().Mwp({textValue:o,selection:t,annotation:[c().Ifu.TemporaryCommentHighlight]})}}return o}function Ie(e){const{store:t,equationStore:n}=e;if(!n.isOpen())return;const o=(0,k().H7)(n.state.savedTextSelectionState.multiSelection);if(!o)return;const{store:i,selection:r}=o;if(t!==i)return;const a=i.getValue(),s=r.startIndex===r.endIndex?a:c().lzV(a,r.startIndex,r.endIndex),l=N().G0({equationState:n.state,isTemporary:!0});return l?c().xym(s,[l],r.startIndex):void 0}function xe(e){const{store:t,selection:n}=e,o=t.getValue();if(n.startIndex+1!==n.endIndex)return{textValue:o,modified:!1};const i=c().ANx(o,n.startIndex);if(!i||!c().rjO(i))return{textValue:o,modified:!1};const r=n.startIndex===n.endIndex?o:c().lzV(o,n.startIndex,n.endIndex),a=(0,g().h_)(i[1],c().EQ8),s=[i[0],[...a,c().CXp()]];return{textValue:c().xym(r,[s],n.startIndex),modified:!0}}function Ae(e){const{store:t,stateType:n}=e,{state:o,type:i}=n,r=t.getValue();if(o.textStore!==t)return r;const a="mentionMenu"===i?o.temporaryInputData.state:o.temporaryInputDataStore.state;if(!a)return r;if("slashMenu"===n.type&&n.state.isAddMenu&&""===a.prefix)return[c().Ey_(`${c().q4_(r)}`,[c().lkI(a)])];const s=(0,F().aX)(t,o.oldTextValue,a.prefix);if(s&&s.prefix){const{tokensBeforeRange:e,tokensInsideRange:t,tokensAfterRange:n}=c().AI5(r,s.prefix.startIndex,s.filter.endIndex),o=c().q4_(t);return[...e,c().Ey_(o,[c().lkI(a)]),...n]}return r}function Ce(e){const{textValue:t,discussionId:n}=e;return c().Mwp({textValue:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY},annotation:[c().Ifu.SuggestionRemoveText,n]})}function Te(e){const{store:t,selection:n}=e,o=t.getValue(),{tokensBeforeRange:i,tokensInsideRange:r,tokensAfterRange:a}=c().AI5(o,n.startIndex,n.endIndex),s=c().q4_(r);return[...i,c().Ey_(s,[[c().Ifu.TemporarySelection]]),...a]}function Me(e){let{store:t,textValue:n}=e;if(!n)return n;if(t.table!==l().ev)return n;const o=M().Bv.createChildStore(t,{table:t.table,id:t.id});if(o.isInsideCollection()||o.isType("callout")||o.isType("code"))return n;let i=n;return(0,U().uy)((0,U().c7)(o)).unresolved.forEach((e=>{const t=["m",e.id];i=c().Mwp({textValue:i,annotation:t,selection:{startIndex:0,endIndex:Number.POSITIVE_INFINITY}})})),i}function Pe(e){if(e.nodeType===Node.TEXT_NODE)return e;if(D().vq(e)&&"false"===e.getAttribute("contentEditable"))return e;let t;const n=D().zn(e);return n.forEach((e=>{null!==e.textContent&&e.textContent.indexOf("\n")>=0&&(t=e)})),t||(n.length>0?n[n.length-1]:e)}function Be(e){const t=V().get();if(!t)return;const n=t.startContainer,o=(0,R().sT)(n),i=null==o?void 0:o.childNodes;if(!i||0===i.length)return;const a=(0,R().b2)(n,o),s=m().SL(i,(e=>e===a));var l;if(-1===s)return void r().log({level:"warning",from:"clientTextRenderHelpers",type:"setSelectionToParagraph",data:{message:"Selection ancestor not found from node's siblings",miscDataToConvertToString:{currentSelectionNodeName:n.nodeName,currentSelectionContentEditableLeafNodeName:a.nodeName,currentSelectionContentEditableIsSameNode:a.isSameNode(n),currentSelectionContentEditableLeafParentIsSameNode:null===(l=a.parentNode)||void 0===l?void 0:l.isSameNode(o)}}});let c,d,u=!0,p=n,g=t.startOffset;if(0===g)for(let r=s-1;u&&r>=0;r--){const e=Pe(i[r]);if(e.nodeType===Node.TEXT_NODE){var f;const t=null===(f=e.textContent)||void 0===f?void 0:f.lastIndexOf("\n");var v,h;if(void 0!==t&&t>=0)null!==(v=e.textContent)&&void 0!==v&&v.length&&t+1<(null===(h=e.textContent)||void 0===h?void 0:h.length)&&(p=e,g=t+1),u=!1;else p=e,g=0}else p=e,g=0}u=!0;for(let r=s;u&&r<i.length;r++){const e=Pe(i[r]);if(e.nodeType===Node.TEXT_NODE){let t;var _,b,y,S;if(p===e)t=null===(_=e.textContent)||void 0===_?void 0:_.indexOf("\n",g);else t=null===(b=e.textContent)||void 0===b?void 0:b.indexOf("\n");if(void 0!==t&&t>=0)c=e,d=t+1===(null===(y=e.textContent)||void 0===y?void 0:y.length)?t:t+1,u=!1;else c=e,d=(null===(S=e.textContent)||void 0===S?void 0:S.length)||0}else{var w;c=e,d=(null===(w=e.textContent)||void 0===w?void 0:w.length)||0}}if(p&&c){const t=V().rangeFromContainerOffsets({start:{container:p,offset:g},end:{container:c,offset:d||0}});V().set(t,e)}}function Re(e,t){const n=c().ld4(e.id,e.getSpaceId()),o=c().wmz(n);return{textValue:[o],tokenIndex:0,textToken:o,node:t}}function Ee(e){var t;return(null===(t=e.match(/\S+/g))||void 0===t?void 0:t.length)??0}},921997:(e,t,n)=>{n.d(t,{Bp:()=>_,DZ:()=>b,Dh:()=>g,Dn:()=>A,G8:()=>h,GM:()=>I,Ii:()=>p,L0:()=>k,Li:()=>C,N0:()=>f,N8:()=>a,O$:()=>d,On:()=>E,Rs:()=>w,U:()=>y,VF:()=>M,VW:()=>R,Ws:()=>S,Xq:()=>v,Zg:()=>s,_i:()=>N,aW:()=>c,dp:()=>m,eG:()=>l,vB:()=>B,yp:()=>D,z9:()=>L,zB:()=>u});var o=()=>n(498212),i=()=>n(696706);const r={[n(96689).NX]:!0,[n(179034).ev]:!0,[n(869558).Gy]:!0,[n(519831).Vl]:!0,[n(84520).mu]:!0,[n(854150).yK]:!0,[n(204384).ez]:!0};function a(e){return(0,i().w1)(e.table)&&!(e.table in r)?`versions/${e.id}:${e.table}:${e.spaceId}`:`versions/${e.id}:${e.table}`}function s(e){const t=e.indexOf("/");if(-1===t)return;const n=e.substring(t+1).split(":");return 2===n.length?i().L3.fromPointerLike({table:n[1],id:n[0]}):3===n.length?i().L3.fromPointerLike({table:n[1],id:n[0],spaceId:n[2]}):void 0}function l(e){return`collection/${e}`}function c(e){return`typedDatabasesListChanged/${e.spaceId}-${e.databaseType}`}function d(e){return`activity/${e}`}function u(e){return`activity/${e}`}function p(e){return`activity/author/${e}`}function m(e){return`notification/${e}`}function g(e){return`teams_in_space/${e}`}function f(e){return`user_page_visit/${e}`}function v(e){let{botId:t,accountId:n,calendarId:i}=e;return`cron/events_updated/${t}/${n}/${(0,o().gB)(i)}`}function h(e){let{botId:t}=e;return`cron/calendar_updated/${t}`}function _(e){let{botId:t,accountId:n,calendarId:i}=e;return`cron/calendar_selection_toggled/${t}/${n}/${(0,o().gB)(i)}`}function b(e){let{notionUserId:t,spaceId:n}=e;return`connections/updated/${t}/${n}`}function y(e){return`backlinks/${e}`}function S(e){return`page_visit/${e}`}function w(e){return`user_shared_pages_in_space/${e.spaceId}-${e.userId}`}function k(e){return`subscription_banner/${e.spaceId}`}function I(e){return`billing_subscription_banner/${e.spaceId}`}const x="presence";function A(e){return`${x}/${e}`}function C(e){return`user_joined_teams_in_space/${e.userId}:${e.spaceId}`}const T="diagnosticPing";function M(e){return`${T}/${e}`}const P="presence/drawing";function B(e){return`${P}/${e}`}function R(e){return`custom_emoji/${e}`}function E(e){return`current_space_permission_groups/${e}`}function D(e){return`current_space_group_membership/${e.spaceId}-${e.userId}`}function N(e){return`trusted_domains/${e.spaceId}`}function L(e){return`page_updates/${e.pageId}`}},922952:(e,t,n)=>{n.d(t,{u:()=>i});var o=()=>n(630116);function i(e){return e instanceof o().h4||e instanceof o().SL||e instanceof o().Bv}},924329:(e,t,n)=>{function o(e){const t=e.propertyIds??[];return{id:e.id,type:"titleWithIcon",propertyIds:0===(null==t?void 0:t.length)?void 0:t,propertyLabels:e.propertyLabels}}function i(e){return{id:e.id,type:"normalizedTitleWithIcon",propertyIds:e.propertyIds??[],propertyLabels:e.propertyLabels}}n.d(t,{I:()=>o,X:()=>i})},925193:(e,t,n)=>{n.d(t,{$F:()=>s,Qr:()=>a,W7:()=>u,dx:()=>c,gC:()=>l,pg:()=>d});var o=()=>n(671593),i=()=>n(638681),r=()=>n(206267);function a(){return r().Dt()}const s=(0,o().rv)((e=>i().uuid().validator(e)),i().uuid().toString);function l(){return r().Dt()}const c=(0,o().rv)((e=>i().uuid().validator(e)),i().uuid().toString);function d(e){return e}function u(e){return r().Dt()}},925907:(e,t,n)=>{n.d(t,{n:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("copy",{viewBox:"0 0 14 16",svg:(0,o.jsx)("path",{d:"M2.404 15.322h5.701c1.26 0 1.887-.662 1.887-1.927V12.38h1.154c1.254 0 1.91-.662 1.91-1.928V5.555c0-.774-.158-1.266-.626-1.74L9.512.837C9.066.387 8.545.21 7.865.21H5.463c-1.254 0-1.91.662-1.91 1.928v1.084H2.404c-1.254 0-1.91.668-1.91 1.933v8.239c0 1.265.656 1.927 1.91 1.927zm7.588-6.62c0-.792-.1-1.161-.592-1.665L6.225 3.814c-.452-.462-.844-.58-1.5-.591V2.215c0-.533.28-.832.843-.832h2.38v2.883c0 .726.386 1.113 1.107 1.113h2.83v4.998c0 .539-.276.832-.844.832H9.992V8.701zm-.79-4.29c-.206 0-.288-.088-.288-.287V1.594l2.771 2.818H9.201zM2.503 14.15c-.563 0-.844-.293-.844-.832V5.232c0-.539.281-.837.85-.837h1.91v3.187c0 .85.416 1.26 1.26 1.26h3.14v4.476c0 .54-.28.832-.843.832H2.504zM5.79 7.816c-.24 0-.346-.105-.346-.345V4.547l3.223 3.27H5.791z"})})},927080:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(178624).R)({key:"openInDesktopApp",namespace:n(419494).Bq,important:!0,trackingType:"necessary"})},928074:(e,t,n)=>{n.d(t,{$d:()=>M,Aj:()=>I,Hb:()=>y,NV:()=>E,QJ:()=>S,WG:()=>T,Xh:()=>x,dR:()=>P,iG:()=>k,kT:()=>B,le:()=>w,pQ:()=>C,u:()=>R});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(672577),n(803949),n(737550);var o=()=>n(433847),i=()=>n(68263),r=()=>n(179034),a=()=>n(96689),s=()=>n(854150),l=()=>n(468006),c=()=>n(496603),d=()=>n(534177),u=()=>n(108944),p=()=>n(731320),m=()=>n(326589),g=()=>n(792415),f=()=>n(351360),v=()=>n(605402),h=()=>n(508496),_=()=>n(630116),b=()=>n(663590);function y(e){const{store:t,showRestrictedPermissionBanner:n}=e,{canAccessParent:o}=k({store:t});return o&&(n||w({store:t}))}function S(e){const{store:t}=e;if(t.getParentTable()===a().NX)return;const n=(0,u().KA)(t);if(!n)return;const r=(0,o().wD)((0,u().E)(n));for(const o of r)if((0,i().Lg)(o))return o}function w(e){const{store:t}=e;if(t.getParentTable()===a().NX)return!1;const n=(0,u().KA)(t),r=n?(0,o().wD)((0,u().E)(n)):[],s=t.getPermissionItems(),l={};for(const i of r)l[(0,o().I$)(i)]=i;for(const a of s){const e=a.role,t=l[(0,o().I$)(a)];if(t){if((0,i().PW)(e)&&(0,i().PW)(t.role)&&(0,o().dI)(e,t.role))return!0;if(i().Ni(t)&&!i().Ni(a))return!0}else if((0,i().Lg)(a)||(0,i()._d)(a)||(0,i().T$)(a)||(0,i().sk)(a))return!0}return!1}function k(e){const{store:t}=e,n=(0,u().fU)(t)[1];return{parentStore:n,canAccessParent:n&&n.canRead()}}function I(e){const{store:t}=e,n=(0,u().fU)(t),o=n.find((e=>e instanceof _().Bv&&e.isRestricted())),i=n[n.length-1];return o||i&&i.getParentTable()===a().NX&&i.canRead()}function x(e){const{store:t}=e,n=(0,u().Uo)(t),o=f().default.state.currentSpaceStore;return Boolean((null==o?void 0:o.getDisableGuests())||(null==n?void 0:n.getDisableGuests()))}function A(e){const{mostPermissivePermissions:t,store:n,ancestorTeamId:o,type:a}=e;if(!o)return;const s=t.find((e=>{let{permissionItem:t}=e;return t.type===a&&t.team_id===o}));if(s)return s;const l=t.find((e=>{let{permissionItem:t}=e;return i().T6(t)}));return"explicit_team_guest_permission"!==a||l?{permissionItem:{type:a,role:"none",team_id:o},from:(null==l?void 0:l.from)??{table:r().ev,blockId:n.id}}:void 0}function C(e){let{trustedDomainsStore:t}=e;if(t){var n;const e=f().default.state.currentSpaceStore;return((null===(n=t.getForSpace(e))||void 0===n?void 0:n.enabledTrustedEmailDomains)??[]).length>0}return!1}function T(){return(0,b().FI)()&&(h().default.checkGate({gateName:"domain_link_sharing_redesign_override",disableExposureLogging:!0})||"on"===h().default.getEligibleGroup({experimentId:"domain_link_sharing_redesign",defaultGroup:"control"}))}function M(e){const{permissionItem:t,store:n}=e,o=t.from,r=i().Yi(o);return!(o.table===n.table&&r===n.id)}function P(e){var t;const{store:n,environment:o,trustedDomainsStore:a}=e,l=(0,p().i0)(n),d=u().Uo(n),f=function(e){let{mostPermissivePermissions:t,store:n}=e;const o=t.find((e=>{let{permissionItem:t}=e;return i().FP(t)}));return o||{permissionItem:{type:"public_permission",role:"none"},from:{table:r().ev,blockId:n.id}}}({mostPermissivePermissions:l,store:n}),_=function(e){let{mostPermissivePermissions:t,store:n}=e;const o=t.find((e=>{let{permissionItem:t}=e;return i().sk(t)}));return o||{permissionItem:{type:"trusted_domain_permission",role:"none"},from:{table:r().ev,blockId:n.id}}}({mostPermissivePermissions:l,store:n}),y=function(e){let{mostPermissivePermissions:t,mostPermissiveTrustedDomainItem:n,store:o,teamStore:a,trustedDomainsStore:l}=e;const c=t.find((e=>{let{permissionItem:t}=e;return i().Lg(t)}));if("none"===(null==c?void 0:c.permissionItem.role)&&C({trustedDomainsStore:l})&&"none"!==n.permissionItem.role)return{permissionItem:{type:"space_permission",role:"reader",unlisted_timestamp:Date.now()},from:{...n.from}};if(c)return c;const d=t.find((e=>i().T6(e.permissionItem)));return{permissionItem:{type:"space_permission",role:"none"},from:null!=d&&d.from||!a||"none"!==a.getSpacePermissionRole()?(null==d?void 0:d.from)??{table:r().ev,blockId:o.id}:{table:s().yK,teamId:a.id}}}({mostPermissivePermissions:l,mostPermissiveTrustedDomainItem:_,store:n,teamStore:d,trustedDomainsStore:a}),S=A({mostPermissivePermissions:l,store:n,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_guest_permission"}),w=A({mostPermissivePermissions:l,store:n,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_permission"}),k=A({mostPermissivePermissions:l,store:n,ancestorTeamId:null==d?void 0:d.id,type:"explicit_team_owner_permission"});let x=l.filter((e=>{let{permissionItem:t}=e;return i().Ds(t)}));x=c().Ul(x,(e=>{const t=v().A.state.permissionGroupsAndMemberCounts.findIndex((t=>t.group.getGroupId()===e.permissionItem.group_id));return t>=0?t:e.permissionItem.group_id}));let T=l.filter((e=>{let{permissionItem:t}=e;return(i().gl(t)||i().nl(t))&&t.team_id!==(null==d?void 0:d.id)}));const M=new Map;T.forEach(((e,t)=>{let{permissionItem:n}=e;M.has(n.team_id)||M.set(n.team_id,t)})),T=c().Ul(T,[e=>{let{permissionItem:t}=e;return M.get(t.team_id)||0},e=>{let{permissionItem:t}=e;return"explicit_team_owner_permission"===t.type?0:1}]);const P=function(e){var t;let{store:n,currentUserId:o,mostPermissivePermissions:a}=e;const s=a.filter((e=>{let{permissionItem:t}=e;return i().B2(t)})),l=s.find((e=>{let{permissionItem:t}=e;return t.user_id===o}));if(!(0,b().FI)()||l||!o)return s;const d=(0,p().zt)({userId:o,store:n}),u=null===(t=a.find((e=>{let{permissionItem:t}=e;return c().n4(t,d)})))||void 0===t?void 0:t.from,m={from:u??{table:r().ev,blockId:n.id},permissionItem:{type:"user_permission",role:d.role,user_id:o}};return[...s,m]}({store:n,currentUserId:o.currentUser.id,mostPermissivePermissions:l}),B=Boolean(null==d?void 0:d.isDefined()),E="none"!==y.permissionItem.role,D=C({trustedDomainsStore:a})&&(E||"none"!==_.permissionItem.role),N=E||(0,b().FI)(),L=h().default.checkGate({gateName:"sharing_anyone_with_the_link"})||(0,m().g)(),O=R()&&"none"!==f.permissionItem.role&&Boolean(!L||(null===(t=g().A.state.publicPageData)||void 0===t?void 0:t.isEditableOrCommentableSite)),U=(0,b().FI)()||N||B||O||P.length>1||P.length&&!i().Km(P[0].permissionItem.role)||x.length||i().Tt(y.permissionItem.role)||!I({store:n});return{showRestrictedPermissionBanner:l.some((e=>i().T6(e.permissionItem)&&e.from.table===r().ev&&e.from.blockId===n.id)),showTeamPermission:B,showSitePublicPermission:O,showPublicShareLinkPermission:L,showSpacePermission:N,showTrustedDomainPermission:D,mostPermissivePublicItem:f,mostPermissiveTrustedDomainItem:_,mostPermissiveAncestorTeamOwnerItem:k,mostPermissiveAncestorTeamMemberItem:w,mostPermissiveAncestorTeamGuestItem:S,mostPermissiveSpaceItem:y,pagePermissionUIModel:{showUserPermissions:U,mostPermissiveGroupPermissions:x,mostPermissiveTeamPermissions:T,mostPermissiveUserPermissions:P},permissionItemsCount:(U?P.length:0)+T.length+x.length+(N?1:0)+(B?1:0)}}function B(e){let{store:t,pagePermissionUIModel:n,currentUserId:o}=e;const{mostPermissiveGroupPermissions:i,mostPermissiveTeamPermissions:r,mostPermissiveUserPermissions:a}=n,[s,l]=c().jB(i,(e=>M({permissionItem:e,store:t}))),[d,u]=c().jB(a,(e=>M({permissionItem:e,store:t})&&e.permissionItem.user_id!==o));return{inheritedPermissions:{...n,mostPermissiveGroupPermissions:s,mostPermissiveTeamPermissions:[],mostPermissiveUserPermissions:d},pagePermissions:{...n,mostPermissiveGroupPermissions:l,mostPermissiveTeamPermissions:r,mostPermissiveUserPermissions:u}}}function R(){return!h().default.checkGate({gateName:"sites_deprecate_edit_and_comment"})}function E(e){const{inviteTarget:t,store:n,calculatedPermissions:o,isRedesignEnabled:r,userToGroupMap:a}=e,s=t.type,c=o.mostPermissiveSpaceItem,m=o.mostPermissiveAncestorTeamMemberItem,g=o.pagePermissionUIModel,f="group"===t.type?g.mostPermissiveGroupPermissions.find((e=>e.permissionItem.group_id===t.value.group_id)):void 0,v="existingUser"===t.type?new Set((null==a?void 0:a[t.value.id])??[]):void 0;if("newUser"===s)return{permissionItem:{role:"none",type:"user_permission",user_id:t.value.email},mostPermissivePermissions:[]};if("existingUser"===s){const e=(0,p().ex)({userId:t.value.id,store:n,userPermissionGroupIds:v??new Set});var h;if(!r)return{permissionItem:null===(h=e[0])||void 0===h?void 0:h.permissionItem,mostPermissivePermissions:e};const o=e.find((e=>"user_permission"===e.permissionItem.type));return o?{permissionItem:o.permissionItem,mostPermissivePermissions:e}:void 0}if("group"===s){const e={role:"none",type:"group_permission",group_id:t.value.group_id},o=(0,u().Uo)(n),a=null==o?void 0:o.getRawMembership().find((e=>(0,l().KF)({groupId:t.value.group_id,teamMember:e}))),s=[c,...o&&m&&a?[m]:[],f??{permissionItem:e,from:i().M3(n.pointer)}].sort(((e,t)=>i().TE[t.permissionItem.role]-i().TE[e.permissionItem.role]));var _;if(!r)return{permissionItem:null===(_=s[0])||void 0===_?void 0:_.permissionItem,mostPermissivePermissions:s};const d=s.find((e=>"group_permission"===e.permissionItem.type));return d?{permissionItem:d.permissionItem,mostPermissivePermissions:s}:void 0}(0,d().HB)(s)}},928152:(e,t,n)=>{n.d(t,{W:()=>r});var o=()=>n(584262),i=()=>n(112873);function r(e){return t=>{const n=e.RouterStore.state.route;if("page"!==n.name||!n.discussionId)return;const r=n.pageVisitSource?parseInt(n.pageVisitSource):void 0;i().B4({environment:e,blockStore:t,discussionIds:[n.discussionId],analyticsFrom:r===o().y8.Notification?"notification":"page_load",shouldFocusDiscussion:!0,recursivelyLoadAllDiscussions:!1})}}},928530:(e,t,n)=>{n.d(t,{M:()=>K});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(908872),n(737550);var o=()=>n(329199),i=()=>n(737658),r=()=>n(386164),a=()=>n(388821),s=()=>n(994310),l=()=>n(496603),c=()=>n(763824),d=()=>n(449506),u=()=>n(666144),p=()=>n(633457),m=()=>n(989423),g=()=>n(476492),f=()=>n(609429),v=()=>n(347320),h=()=>n(406792),_=()=>n(227440),b=()=>n(508496),y=()=>n(83573),S=()=>n(589994);const w=["clientType","aggregationStatus","requestBackend","isLoadTest","backendOptions","returnPropertyResultCache"],k=["sort","reducerDependencies","upwardTraversalRelation","searchQuery","filter","currentPageInRelatedCollection","reducers","userId","filterToComputeDependencies","maxPreloadedRecords"],I=["filter","searchQuery","loadContentCover"],x=["aggregation","subGroup","hideEmptyAggregationGroups","version"],A=["subGroup","aggregation","blockResults","omitZeroAggregationGroups","returnHiddenGroups","returnPinnedGroups"],C=["filter"],T=["property","enforceMaxAggregationLimit"];function M(e,t){for(const n of t)void 0===e[n]&&delete e[n]}var P=()=>n(75542),B=(n(16280),n(581454),()=>n(66689)),R=()=>n(502856),E=()=>n(792071),D=()=>n(813690),N=()=>n(179034),L=()=>n(519831),O=()=>n(869558),U=()=>n(534177),F=()=>n(862292),V=()=>n(186445),j=()=>n(909470),z=()=>n(972435),H=()=>n(870618);function W(e){const{environment:t,remoteRequest:n,collectionContextStore:i,response:r,updateCounterForRequest:a,keepAggregationResults:s}=e,c=i.collectionViewStore();if(!i.shouldUpdate(a))return;const d=i.remoteResultStore.state;if(!d||!l().n4(d,r.result)){var u;const e=r.result;if("reducer"===r.result.type){if(s){const t=Object.entries((null==d?void 0:d.reducerResults)||{}).filter((e=>{let[t,n]=e;return"aggregation"===n.type})).reduce(((e,t)=>{let[n,o]=t;return e[n]=o,e}),{});e.reducerResults={...t,...e.reducerResults}}i.remoteResultStore.setState(e)}if(void 0===i.wasServerResponseFromCache){var m,g;let e="NA";!0===(null===(m=r.tags)||void 0===m?void 0:m.isLoaded)?e="CACHED":!1===(null===(g=r.tags)||void 0===g?void 0:g.isLoaded)&&(e="UNCACHED"),i.wasServerResponseFromCache=e}var v,h;if(void 0===i.requestBackend)i.requestBackend=null===(v=r.tags)||void 0===v?void 0:v.backendUsed;if(void 0===i.relationQueryingGroup)i.relationQueryingGroup=null===(h=r.tags)||void 0===h?void 0:h.rqg;const t=null===(u=r.clientSettings)||void 0===u?void 0:u.throttleMs;if(t&&t>i.throttleMsStore.state&&i.throttleMsStore.setState(t),r.shouldUseClientMode)i.isClientModeEnabledStore.setState(!0),i.isViewSpecificClientModeEnabledStore.setState(Boolean(r.isViewSpecificClientMode)),i.resultSetStore.resetWithRemote({blockIds:r.allBlockIds,propertyResultCacheJson:r.propertyResultCache});else{i.isClientModeEnabledStore.setState(!1),i.isViewSpecificClientModeEnabledStore.setState(Boolean(r.isViewSpecificClientMode));const e=new Set(o().uX({result:r.result,excludeRelativeIds:!0}));i.resultSetStore.resetWithRemote({blockIds:e})}}i.setUpdateCounterWithResponseCounter(a);const _=i.remoteCollectionIdsStore.state,b=r.collectionIds||[];l().n4(_,b)||i.remoteCollectionIdsStore.setState(b),y().A.addFromRecordMapWithRoleJson(r.recordMap),y().A.isEmpty()||p().lK({environment:t}),i.privateRelativeVariableStore.setState({...i.privateRelativeVariableStore.state,...r.relativeVariableResult});if(i.remoteResultStore.state&&(i.resetLoadingState(),i.isLoadedStore.setState(!0),n&&i.lastRemoteRequestStore.setState({remoteRequest:n,schema:i.normalizedSchemaStore.state}),c)){const e=(0,P().X)(c);f().e.set(e,{remoteResult:i.remoteResultStore.state,resultSet:i.resultSetStore.state,collectionIds:i.remoteCollectionIdsStore.state})}}function q(e){if(e.timedOutRequestCounter++,e.timedOutRequestCounter>=3){const t=b().default.getConfigKey("query_collection_slow_mode","clientThrottleMs");t>e.throttleMsStore.state&&e.throttleMsStore.setState(t)}}async function K(e,t,n){const p=t.collectionViewStore(),{remoteRequestStore:f}=t;if(!f||!p)return;const y=f.state;if(!y)return;if(b().default.checkGate({gateName:"drain_collection_queue"})){const e=t.collectionStore();e&&await S().transactionQueue.awaitRecordTransaction(e.pointer)}const P=t.createUpdateCounter().latestRequestUpdateCounter,K=t.remoteResultStore.state;_().A.state.online&&K&&await S().transactionQueue.drain();const G=p.inMemoryRecordCache;if(!t.shouldUpdate(P))return;t.isLoadingStore.setState(!0),t.remoteErrorStore.setState(void 0);const $=h().default.DO_NOT_USE_markLegacy("collections.remote_query_collection_latency");let Y;if(!t.forceLocalQueryCollection&&_().A.state.online){const o=t.timingTracker.startRequestTracking();let a="initial_load"===n.src?function(e){const t=(0,l().mg)(e);M(t,w);const{loader:n}=t;if(M(n,k),n.reducers)for(const o of Object.values(n.reducers))switch(o.type){case"results":M(o,I);break;case"groups":"v2"===o.version?M(o,A):M(o,x);break;case"aggregation":M(o,C),M(o.aggregation,T)}return t}(y):y;b().default.checkGate({gateName:"formulas_use_forwarded_property_cache_gate"})&&(a={...a,returnPropertyResultCache:!0});const u=b().default.checkGate({gateName:"collections_xws"})?(0,r().WS)({spaceId:y.source.spaceId}):void 0,f="initial_load"===n.src&&"chart"!==p.getType()&&!Object.values(a.loader.reducers||{}).some((e=>"groups"===e.type)),_=null==p?void 0:p.id,S=(0,v().A)(_),B=[];if(f){let r=!1;const l={};Object.entries(a.loader.reducers||{}).forEach((e=>{let[t,n]=e;"aggregation"!==n.type?l[t]=n:r=!0}));const c={...a,loader:{...a.loader,reducers:l},aggregationStatus:r?"stripped":void 0};if(Y=d().callApi({eventName:"queryCollection",environment:e,data:c,tracking:n,prefetchCacheKey:S,headers:u}).then((a=>{const l=g().kz(t,n.src);if(h().default.DO_NOT_USE_measureLegacy($,{environment:e,data:l}),"success"===a.type)return"initial_load"===n.src&&s().A.set((0,v().A)(y.collectionView.id),c),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(o,"success"),W({environment:e,remoteRequest:y,collectionContextStore:t,response:a.data,updateCounterForRequest:P,keepAggregationResults:r});"failed"===a.type&&(t.remoteErrorStore.setState({requestSrc:n.src,errorBody:a.body}),t.timingTracker.finishRequestTracking(o,"failed"),"feed"===p.getType()&&(0,m().u4)({environment:e,event:{eventName:"feed_render_failure",eventProperties:{collection_view_id:p.id,collection_id:i().Yd.getCollectionId(y.source),request_src:n.src,error_body:a.body,cause:"collection_fetch_remote_result_error"}}}),a.status>=500&&a.status<600&&q(t))})),B.push(Y),r){t.asyncAggregationStatusStore.setState({...t.asyncAggregationStatusStore.state,calculating:!0});const o=Y.then((()=>{const o=t.timingTracker.startRequestTracking();return d().callApi({eventName:"queryCollection",environment:e,data:{...y,aggregationStatus:"full"},tracking:n,prefetchCacheKey:S,headers:u}).then((i=>{if("success"===i.type)return t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(o,"success"),W({environment:e,remoteRequest:y,collectionContextStore:t,response:i.data,updateCounterForRequest:P});"failed"===i.type&&(t.remoteErrorStore.setState({requestSrc:n.src,errorBody:i.body}),t.timingTracker.finishRequestTracking(o,"failed"),i.status>=500&&i.status<600&&q(t))})).finally((()=>{t.asyncAggregationStatusStore.setState({calculating:!1})}))}));B.push(o)}}else Y=d().callApi({eventName:"queryCollection",environment:e,data:a,tracking:n,prefetchCacheKey:S,headers:u}).then((i=>{const r=g().kz(t,n.src),l="success"===i.type||"failed"===i.type&&!i.offline?i.headers["X-Notion-Request-Id"]:void 0;if(h().default.DO_NOT_USE_measureLegacy($,{environment:e,data:{...r,request_ids:l?[l]:void 0}}),"success"===i.type)return"initial_load"===n.src&&s().A.set((0,v().A)(y.collectionView.id),a),t.asyncAggregationStatusStore.setState({calculating:!1}),t.timedOutRequestCounter=0,t.timingTracker.finishRequestTracking(o,"success"),W({environment:e,remoteRequest:y,collectionContextStore:t,response:i.data,updateCounterForRequest:P});"failed"===i.type&&(t.remoteErrorStore.setState({requestSrc:n.src,errorBody:i.body}),t.timingTracker.finishRequestTracking(o,"failed"),i.status>=500&&i.status<600&&q(t))})),B.push(Y);if(!(await(0,c().nQ)(1e4,B)).timeout)return}else try{const n=await async function(e,t,n){const{source:i,collectionView:r,loader:s}=t,d=e.currentUser.id;let u;if("collection"!==i.type)throw new Error("TODO: support typed source");u={table:L().Vl,id:i.id};const p=Date.now(),m=await H().h7({environment:e,pointer:u,inMemoryRecordCache:n});if(null==m||!m.model)throw new Error("Collection not found.");const g=m.model,f=await H().h7({environment:e,pointer:{table:O().Gy,id:r.id},inMemoryRecordCache:n});if(null==f||!f.model)throw new Error("Collection view not found.");const v=E().h0Y.fromMonomorphicFunctionUnsafe((async t=>{const n=await H().h7({environment:e,pointer:t});return null==n?void 0:n.model})),h=f.model,_=a().RecordMap.create(),y=a().RecordMapWithRole.create(),S=E().b4_.fromRecordMap(_),w=D().Oj.fromRecordMapWithRole(y),k=g.getNormalizedSchema(),{groupsReducerIds:I,reducerIdsWithNoGroupDependencies:x}=o().M(s.reducers,s.reducerDependencies),A=b().default.getConfigKey("collection_request_settings","clientFormulaTimeoutMs"),C=await F().T.formulas.load(),T={schema:k,pageSort:(null==h?void 0:h.getPageSort())||[],collectionViewId:r.id,loader:s,userId:d,userStartOfWeek:V().XX.state,currentTime:p,getRecordModel:S,getRecordRole:w,intl:z().A.getIntl(),isSorted:!1,relativeVariableResult:void 0,currentPageInRelatedCollection:s.currentPageInRelatedCollection,isSprintPlanningView:(null==h?void 0:h.getAppConfigUri())===B().JS,collectionSourceType:i.type,groupsReducerIds:I,reducerIdsWithNoGroupDependencies:x,formulaTimeoutMs:A,resultCache:new Map,regExpCache:new Map,experimentService:b().default,collectionFeatureGates:(0,j().i)(),formulasModule:C},M=g.__IM_SORRY__getValue(),P={},W=(await H().TH({environment:e,collection:g,inMemoryRecordCache:n})).filter((e=>{let{model:t}=e;return null==t?void 0:t.alive})),q=l().oE(W.map((e=>{let{model:t}=e;return null==t?void 0:t.__IM_SORRY__getValue()})));q.forEach((e=>P[e.id]=g));const K=h.getFormat(),G=h.getType(),$=K&&G&&o().Fg(K,G,k),Y=new Map,Q=await(0,R().SN)({collectionValueOrModel:M,loader:s,loadAllProperties:!1,recordMap:_,loadRecordModel:v,dependencyCache:Y,searchProperties:$});await(0,R().D0)({blocks:q,dependencies:Q,blockIdToAssociatedCollectionModelCache:P,recordMap:_,loadRecordModel:v,loadRecordModelForFormulas:v,dependencyCache:Y,resultCache:T.resultCache,regExpCache:T.regExpCache,experimentService:b().default,collectionFeatureGates:(0,j().i)(),userId:s.userId});const Z=_.getByTable(N().ev).filter((e=>{let{value:t}=e;return!Boolean(t)})).map((e=>{let{pointer:t}=e;return t})).filter(U().O9);await c().lX(Z,50,(async t=>{const n=await H().h7({environment:e,pointer:t});n&&y.setModelAndRole({table:N().ev,id:t.id},n.model,n.role)}));const X=o().zl(T);(s.reducers?Object.values(s.reducers):[]).some((e=>{var t;const n="results"===e.type&&e.loadContentCover,o="groups"===e.type&&"v2"===e.version&&(null===(t=e.blockResults)||void 0===t?void 0:t.loadContentCover);return n||o}))&&await o().pu({blocks:q,loadRecordModel:v,recordMap:_});for(const a of q)o().UC(a,M,T,X);const{result:J}=o().Mo(T,X),ee=o().uX({result:J});return await Promise.all(ee.map((async t=>{const o=await H().h7({environment:e,pointer:{table:N().ev,id:t},inMemoryRecordCache:n});o&&y.setModelAndRole({table:N().ev,id:t},o.model,o.role)}))),y.setModelAndRole(u,m.model,m.role),y.setModelAndRole({table:O().Gy,id:r.id},f.model,f.role),{result:J,recordMap:y.toJson(),relativeVariableResult:void 0,collectionIds:void 0,shouldUseClientMode:!1,isViewSpecificClientMode:!1,allBlockIds:void 0,propertyResultCache:void 0}}(e,y,G),i=a().RecordMapWithRole.create(n.recordMap);u()._O({environment:e,inMemoryRecordCache:G,recordMap:i,debugSource:"collectionViewActions.fetchRemoteResult (localResponse)"}),W({environment:e,collectionContextStore:t,remoteRequest:void 0,response:n,updateCounterForRequest:P})}catch(Q){}finally{t.resetLoadingState()}Y&&Y.catch((e=>{}))}},928600:(e,t,n)=>{n.d(t,{A:()=>p});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(722872),l=()=>n(347199),c=()=>n(756279),d=()=>n(2143),u=n(474848);const p=o.forwardRef((function(e,t){return e.menuType===s().gu.Modal?(0,u.jsx)(n(824622).QA,{...e,ref:t,children:(0,u.jsx)(m,{...e})}):(0,u.jsx)(m,{...e,ref:t})})),m=o.forwardRef((function(e,t){const l=(0,a().DP)(),c=(0,i().v3)(),{isIOS:d,isMobile:p}=(0,i().Y0)(),m=(0,o.useRef)(null),v=(0,o.useRef)(!1),h=(0,n(888789).$e)(),_=p&&e.menuType===s().gu.Modal&&e.shouldRenderMobileRefresh||h,b=(0,o.useMemo)((()=>({menuType:e.menuType,enableMobileRefresh:_})),[e.menuType,_]),y=(0,r().K8)((()=>function(e,t,o,i,r){const{WindowSizeStore:a}=t;if(e.menuType===s().gu.Popup){const t={minWidth:180,maxWidth:"calc(100vw - 24px)",height:"100%",maxHeight:"70vh"};return{display:"flex",flexDirection:"column",justifyContent:r?"center":void 0,width:e.width,minWidth:e.minWidth||t.minWidth,maxWidth:e.maxWidth||t.maxWidth,height:e.height||t.height,maxHeight:e.maxHeight||t.maxHeight,minHeight:e.minHeight,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom}}if(e.menuType===s().gu.ActionSheet)return{display:"flex",flexDirection:"column",width:"100%",height:e.height||"100%",maxHeight:e.maxHeight||"70vh",background:o.contentBackground,paddingBottom:e.footer&&!e.disableBottomPadding?a.state.paddingBottomCSS:0};{const r=Boolean(e.footer)?n(574012).A.mobileNativeBottomPadding(t):0;return{display:"flex",flexDirection:"column",width:"100%",...i?{}:{height:"100%"},maxHeight:"100%",minHeight:0,minWidth:e.minWidth||void 0,background:e.whiteBackground?o.contentBackground:o.surface.wash,paddingBottom:r}}}(e,c,l,h,v.current)),[e,c,l,h]),S=e.menuType===s().gu.Popup?e.onClickOutside:void 0;(0,o.useEffect)((()=>{if(e.menuType===s().gu.Popup&&S){function t(t){if(e.menuType!==s().gu.Popup)return;if(!S)return;const o=m.current;if(!o)return;if(!t.target)return;const i=t.target;(0,n(253579).oM)({clickedElement:i,menuElement:o})&&S(t)}return window.addEventListener("click",t),()=>{window.removeEventListener("click",t)}}}),[S,e.menuType]);const w=(0,n(93583).A)(m,e.innerRef,t);return(0,u.jsx)(s().xu.Provider,{value:b,children:(0,u.jsx)("div",{className:e.className,onMouseEnter:e.onMouseEnter,onMouseDown:e.onMouseDown,onClick:e.onClick,onDoubleClick:e.onDoubleClick,onContextMenu:e.onContextMenu,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd,onTouchCancel:e.onTouchCancel,style:y,ref:w,children:(0,u.jsxs)(n(112995).K,{from:"Menu",fallback:e=>{let{error:t,errorId:o}=e;return v.current=!0,(0,u.jsx)(n(719061).d,{error:t,errorId:o})},children:[(0,u.jsx)(f,{header:e.header,tokenInputHeader:e.tokenInputHeader,disableHeaderBorder:e.disableHeaderBorder}),(0,u.jsx)(g,{children:e.children,disableScroller:e.disableScroller,onScroll:e.onScroll,bodyScrollerClassName:e.bodyScrollerClassName,renderAsPage:e.renderAsPage,menuType:e.menuType,environment:c,footer:e.footer,disableBottomPadding:e.disableBottomPadding,scrollerStyleOverrides:{...e.scrollerStyle,overscrollBehavior:h&&d?"none":void 0}}),(0,u.jsx)("footer",{style:{flexShrink:0},children:e.footer})]})})})}));function g(e){let{children:t,disableScroller:n,onScroll:o,bodyScrollerClassName:i,renderAsPage:a,menuType:p,environment:m,footer:g,disableBottomPadding:f,scrollerStyleOverrides:v}=e;const h=(0,r().K8)((()=>function(e,t,n,o,i){const{WindowSizeStore:r,device:a}=t;if(e===s().gu.Popup)return{flexGrow:1,minHeight:0,transform:"translateZ(0)",paddingBottom:a.isTablet?0:void 0,...i};return e===s().gu.ActionSheet?{flexGrow:1,minHeight:0,paddingBottom:n||o?0:r.state.paddingBottomCSS,...i}:{flexGrow:1,minHeight:0,paddingBottom:void 0,...i}}(p,m,g,f,v)),[p,m,g,f,v]);return t?n?(0,u.jsx)("div",{style:h,children:t}):(0,u.jsx)(d().H,{type:c().A.Y,style:h,onScroll:o,className:i,ref:e=>{a?l().A.MenuPageScroller=e:l().A.MenuScroller=e},children:t}):null}function f(e){let{header:t,tokenInputHeader:n,disableHeaderBorder:o}=e;const i=(0,a().DP)();return t?n?(0,u.jsx)(d().H,{type:c().A.Y,style:{flexShrink:0,maxHeight:240,boxShadow:o?void 0:`inset 0 -1px ${i.darkDividerColor}`},children:t}):(0,u.jsx)("div",{style:{flexShrink:0},children:t}):null}},929450:(e,t,n)=>{n.d(t,{Of:()=>s,YB:()=>l,s:()=>c});n(898992),n(908872);var o=()=>n(763884),i=()=>n(899963),r=()=>n(633892),a=()=>n(846955);function s(e){const{environment:t,spaceViewStore:n,teamStore:r,outlinerToggleButtonStore:s,newIsHidden:c,shouldPersistToggleState:d,isExplicitUserAction:u}=e;s.setState({...s.state,isHidden:c}),u&&i().r7(t,{store:r,is_toggled:!c,outliner_type:e.teamOutlinerType}),d&&o().K.set({userId:n.environment.currentUser.id,key:l(n,r.id),value:c}),c&&a().default.setState({type:"inactive"})}function l(e,t){return`Team_Outliner_Item_${e.id}:${t}`}function c(e){let{oldState:t,teamIds:n,spaceId:i,userId:a}=e;return n.reduce(((e,n)=>{if(n in e)return e;if(n in t)return e[n]=t[n],e;const s=l({id:i},n),c=o().K.get({userId:a,key:s});return e[n]=new(r().A),e[n].setState({isHidden:c??!1}),e}),{})}},930545:(e,t,n)=>{n.d(t,{SD:()=>g,_h:()=>v,bn:()=>h,tm:()=>f,zp:()=>m});n(898992),n(823215),n(737550);var o=()=>n(700500),i=()=>n(90023),r=()=>n(602098),a=()=>n(186445),s=()=>n(478726),l=()=>n(299545),c=()=>n(792609),d=()=>n(202786),u=()=>n(337567),p=()=>n(620149);function m(e){let{blocks:t}=e;return!!f({blocks:t})&&(!function(e){let{blocks:t}=e;return t.some((e=>{const t=a().ao();return!(!t||!(0,s().fc)(t))||!!(t&&((0,u().dL)(t)||null!=t&&t.pathIsDead())&&t.uiContains(e)&&t!==e)}))}({blocks:t})&&(!!(0,c().Y)({blocks:t})&&(!!v({blocks:t})&&(!!h({blocks:t})&&(!!function(e){let{blocks:t}=e;if(t.some((e=>e.getAssociatedCollectionStore())))return!0;return t.length>1||!function(e){if(!e)return!1;const t=e.getType(),n=e.getFormat();return Boolean((0,o().Db)(t,n)&&e.isEmptyTitle())}(t[0])}({blocks:t})&&(!(1!==t.length&&!(0,d().T)())&&(!t.some(r().u)&&!t.some((e=>!(0,i().SF)(e.getSystemBlockTypeStore().getValue()))))))))))}function g(e){let{blocks:t}=e;return t.some((e=>l().oC(e,{recursivelyLoadAllDiscussions:!1})>0))}function f(e){let{blocks:t}=e;return!p().l.state&&t.every((e=>e.canComment()))}function v(e){let{blocks:t}=e;return!!t.some((e=>e.getAssociatedCollectionStore()))||t.every((e=>!e.isNavigableBlock()))}function h(e){let{blocks:t}=e;return t.every((e=>{const t=e.getType(),n=e.getFormat();return Boolean(!t||!(0,o().pD)(t,n))}))}},931121:(e,t,n)=>{n.d(t,{J:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("clearInput",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M7.993 15.528a7.273 7.273 0 01-2.923-.593A7.633 7.633 0 012.653 13.3a7.797 7.797 0 01-1.633-2.417 7.273 7.273 0 01-.593-2.922c0-1.035.198-2.01.593-2.922A7.758 7.758 0 015.063.99 7.273 7.273 0 017.985.395a7.29 7.29 0 012.93.593 7.733 7.733 0 012.417 1.64 7.647 7.647 0 011.64 2.41c.396.914.594 1.888.594 2.923 0 1.035-.198 2.01-.593 2.922a7.735 7.735 0 01-4.058 4.05 7.272 7.272 0 01-2.922.594zM5.59 11.06c.2 0 .371-.066.513-.198L8 8.951l1.904 1.911a.675.675 0 00.498.198.667.667 0 00.491-.198.67.67 0 00.205-.49.64.64 0 00-.205-.491L8.981 7.969l1.92-1.911a.686.686 0 00.204-.491.646.646 0 00-.205-.484.646.646 0 00-.483-.205.67.67 0 00-.49.205L8 6.995 6.081 5.083a.696.696 0 00-.49-.19.682.682 0 00-.491.198.651.651 0 00-.198.49c0 .181.068.342.205.484l1.912 1.904-1.912 1.92a.646.646 0 00-.205.483c0 .19.066.354.198.49.136.132.3.198.49.198z"})})},931432:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},933152:(e,t,n)=>{n.d(t,{M:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M5.606 2.669a1.55 1.55 0 0 0-1.55 1.55v.379l-.068-.004h-.694a.55.55 0 1 0 0 1.1h.694l.068-.004v.379c0 .856.694 1.55 1.55 1.55h8.788a1.55 1.55 0 0 0 1.55-1.55v-.375h.3c.207 0 .375.168.375.375v2.023a.375.375 0 0 1-.375.375h-5.319c-.815 0-1.475.66-1.475 1.475v.592a1.55 1.55 0 0 0-1.462 1.547v3.7c0 .856.694 1.55 1.55 1.55h.925a1.55 1.55 0 0 0 1.55-1.55v-3.7a1.55 1.55 0 0 0-1.463-1.547v-.592c0-.207.168-.375.375-.375h5.319c.814 0 1.475-.66 1.475-1.475V6.069c0-.815-.66-1.475-1.475-1.475h-.3v-.375a1.55 1.55 0 0 0-1.55-1.55zm-.3 1.55a.3.3 0 0 1 .3-.3h8.788a.3.3 0 0 1 .3.3v1.85a.3.3 0 0 1-.3.3H5.606a.3.3 0 0 1-.3-.3zm3.932 7.862a.3.3 0 0 1 .3-.3h.925a.3.3 0 0 1 .3.3v3.7a.3.3 0 0 1-.3.3h-.925a.3.3 0 0 1-.3-.3z"})},i=(0,n(340498).wt)("blockColor",o)},934839:(e,t,n)=>{n.d(t,{HQ:()=>r,Re:()=>s,zA:()=>a});n(898992),n(354520),n(672577);var o=()=>n(534177),i=()=>n(732770);function r(e){const{id:t,styleKey:n,contentKey:r,removeTimeout:s,bannerStore:l,blockStore:c,context:d,disabled:u}=e,{banners:p}=l.state;if(!p.find((e=>e.id===t))){let m;switch(r){case"template_in_page":case"template_in_button":m={id:t,contentKey:r,styleKey:n,blockStore:c,context:d,disabled:u};break;case"space_content_duplication":case"deleted_or_moved_page":case"importing_evernote":case"asana_importer_banner":case"site":case"draft_post_in_expanded_feed_composer":case"translate":m={id:t,contentKey:r,styleKey:n,blockStore:c};break;case"over_free_block_limit":case"editing_page":case"subscription_trial_add_payment_method":case"upload_limit_exceeded":case"admin_mode":case"arbitrary_subscription_banner":case"billing_subscription_status":case"minor_app_update":case"mobile_platform_unsupported":case"page_in_archived_team":case"test_clock":case"dictation_connection":case"trusted_domain_page":case"russian_sanctions":case"space_freeze":case"logged_out_app_banner":case"public_share_link_edit_disclosure_banner":case"missing_name":m={id:t,contentKey:r,styleKey:n};break;default:(0,o().HB)(r)}const g=e.prepend?[m,...p]:[...p,m];l.setState({banners:g}),i().A.setKeyboardMode(!1),s&&setTimeout((()=>{a({bannerStore:l,id:t})}),s)}}function a(e){const{id:t,bannerStore:n}=e,{banners:o}=n.state,i=o.filter((e=>e.id!==t));i.length!==o.length&&n.setState({banners:i})}function s(e){e.bannerStore.state.banners.length>0&&e.bannerStore.setState({banners:[]})}},935370:(e,t,n)=>{n.d(t,{onboardingActionsDependency:()=>o});const o=new(n(645873).O2)("onboardingActions",(()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(81929)]).then(n.bind(n,585894))))},936916:(e,t,n)=>{n.d(t,{FF:()=>p,SJ:()=>u,gM:()=>m,yc:()=>g});n(296540);var o=()=>n(792485),i=()=>n(847249),r=()=>n(401497),a=()=>n(921855),s=()=>n(68465),l=()=>n(864145),c=()=>n(145214),d=n(474848);function u(e){const{store:t}=e,n=(0,i().K8)((()=>{const e=t.getBlockTitleStore().getValue();if(e)return(0,a().r4)(e,t)}),[t]);return(0,i().K8)((()=>{const e=(0,s().I_)(),o=e.summarize,i=t.getFormat().ai_prompt_key;if(!i)return{prompt:o,additionalContext:n};const r=e[i];return r?{prompt:r,additionalContext:n}:{prompt:o,additionalContext:n}}),[n,t])}function p(e){const{store:t,isGenerating:n}=e,{prompt:r,additionalContext:a}=u({store:t}),l=(0,o().S)();return(0,i().K8)((()=>{const e=l&&l.publicEditModeStore.state;return!(0,s().ZE)(e)||(!!n||(!(t.canEdit()&&!t.isNonEditableState())||"helpMeWrite"===r.key&&!a))}),[n,t,r.key,a,l])}function m(e){const{hoveredOrSelectionState:t,setHaloShouldBeVisible:n,colorVariant:o="purple",configurationPopupStore:a}=e,s=(0,r().IS)((e=>({haloContent:{position:"absolute",left:-6,right:-6,top:-3,bottom:-3,pointerEvents:"none",borderRadius:8,border:`2px solid ${"purple"===o?e.aiBlockBorderColor:e.stroke.uiBlueSecondary}`}})),[o]),u=(0,i().K8)((()=>(null==a?void 0:a.state.open)??!1),[a]),p=t!==l().l.Default||u;return(0,d.jsx)(c().A,{visible:p,initial:{opacity:0,scale:.995},animate:{opacity:t===l().l.Hovered?.45:1,scale:1},exit:{opacity:0,scale:.995},onAnimationStart:()=>{n(!0)},onAnimationEnd:()=>{p||n(!1)},style:s.haloContent})}const g=(0,n(959013).YK)({summarize:{id:"aiBlock.summarize",defaultMessage:"Summarize this page with AI"},findActionItems:{id:"aiBlock.findActionItems",defaultMessage:"Find action items on this page with AI"},helpMeWrite:{id:"aiBlock.helpMeWrite",defaultMessage:"Tell the AI what to write…"},summarizeMeetingTranscript:{id:"aiBlock.summarizeMeetingTranscript",defaultMessage:"Summarize this meeting with any action items and decisions taken"}})},937075:(e,t,n)=>{n.d(t,{Af:()=>S,DZ:()=>d,G1:()=>_,I5:()=>s,Ky:()=>w,Nj:()=>p,Uk:()=>h,Ut:()=>f,aN:()=>g,c7:()=>c,ed:()=>k,g0:()=>m,lz:()=>l,nE:()=>b,oe:()=>u,wJ:()=>v,xs:()=>y});var o=()=>n(140022),i=()=>n(989423),r=()=>n(430483),a=()=>n(508496);function s(e,t){const{user_comment:n,...o}=t;i().vd(e,"ai_action",o)}function l(e,t,n){const o={site:"client",...n};i().vd(e,t,o)}function c(e,t){i().vd(e,"ai_favorite_action",t)}function d(e,t){i().vd(e,"ai_block_action",t)}function u(e,t){i().vd(e,"ai_autofill_action",t),a().default.logEvent("ai_autofill_action",1,{action_type:t.type})}function p(e,t){i().vd(e,"ai_autofill_settings_action",t)}function m(e,t){if(r().zD.isXMLAssistantEnabled()){var n;const i=(null===(n=t.sessionContext)||void 0===n?void 0:n.evaluator.getTranscript())??[];(0,o().trackAssistantOpened)(e,{from:t.from,sessionId:t.session_id,isReminder:!1,reminderType:void 0,startTimestamp:Date.now(),transcript:i,hasQuery:!1,searchSessionId:void 0})}else i().vd(e,"ai_completion_popup_open",{session_id:t.session_id,prompt_key:t.prompt_key,from:t.from})}function g(e,t){i().vd(e,"ai_completion_popup_close",t),a().default.logEvent("ai_completion_popup_close",1,{exit_type:t.exit_type})}function f(e,t){i().vd(e,"ai_completion_popup_retry",t)}function v(e,t){i().vd(e,"ai_completion_popup_history_navigation",t)}function h(e,t){i().vd(e,"ai_completion_popup_preview_start",t),a().default.logEvent("ai_completion_popup_preview_start",1,{from:t.from,prompt_key:t.prompt_key})}function _(e,t){i().vd(e,"ai_completion_popup_update_prompt_text",t)}function b(e,t){i().vd(e,"ai_completion_popup_preview_end",t),a().default.logEvent("ai_completion_popup_preview_end",1,{preview_time:t.preview_time})}function y(e,t){i().vd(e,"ai_completion_popup_preview_stopped_by_user",t)}function S(e,t){i().vd(e,"ai_user_data_sharing_opt_in_submit",t)}function w(e,t){i().vd(e,"getCompletion.emptyResponse",t),a().default.logEvent("getCompletion.emptyResponse",1,{promptKey:t.promptKey})}function k(e,t){i().vd(e,"ai_assistant_error",t)}},937182:(e,t,n)=>{n.d(t,{B7:()=>l,Dn:()=>r,Rt:()=>a,cM:()=>i,hy:()=>s});var o=()=>n(534177);const i="fileTypeAnyFiles",r="fileTypeImages",a="fileTypeVideos",s="fileTypeNone";function l(e){let{fileMimeType:t,allowedType:n}=e;switch(n){case i:return!0;case r:return function(e){return e.startsWith("image")&&!e.includes("photoshop")}(t);case a:return function(e){return e.startsWith("video")}(t);case s:return!1;default:(0,o().HB)(n)}}},938045:(e,t,n)=>{n.d(t,{w:()=>f,x:()=>v});n(898992),n(354520);var o=()=>n(908006),i=()=>n(620689),r=()=>n(255460),a=()=>n(38337),s=()=>n(953418),l=()=>n(480289),c=()=>n(695625),d=()=>n(644914),u=()=>n(835066),p=()=>n(555776),m=()=>n(116008),g=()=>n(36088);function f(e){let{animate:t}=e;const n=l().A.filter((()=>!0));if(n&&n.length>0){const e=n[0].getNode();if(e&&e.parentElement){const n=Array.from(e.parentElement.children).indexOf(e);s().vq(e,{edgeDist:0===n?0:-1,animate:t??!1})}}}async function v(e){let{currentBlockStore:t,discussionInputStore:n,environment:s,dontAffectCursor:l,animateScroll:f}=e;if(!n||!t)return;function v(e){const t=function(e){var t;let n,{blockId:o}=e;const i=null===(t=document.getElementsByClassName(a().Mdy))||void 0===t?void 0:t[0];i&&(n=c().T.findSelectableFromChildNode(i)),n||(n=c().T.findScrollToSelectablesFromIds([o])[0]);return n}({blockId:e});if(!t)return;const n=document.getElementsByClassName(a().Mdy)[0];return n?i().hT({element:n,environment:s,scrollerContext:t.getScrollerContext(),vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:f??!1,centerVertically:!0}):i().pb({environment:s,handle:t,vertical:{reveal:"top"},horizontal:{reveal:"closest"},animate:f??!1}),t.displaySelectionHalo(750),t}const h=m().A.state.open?m().A.state.blockId:null;if(!h)return;v(h)||(await r().NH(t,[h]),await o().default.afterNextFlush(),v(h));const _=m().A.getBlockStore();_&&(0,u().$N)(s,_)?p().A.setActiveWithSource("margin_comments"):(0,d().me)(s)?p().A.setActiveWithSource("comments_pane"):p().A.setActiveWithSource("popover_comments"),l||(0,g().M)({discussionInputStore:n,environment:s})}},938346:(e,t,n)=>{n.d(t,{Ay:()=>v,og:()=>m});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(425946),l=()=>n(100622),c=()=>n(478184),d=()=>n(502438),u=()=>n(807683),p=n(474848);let m=function(e){return e[e.Insert=0]="Insert",e[e.TurnInto=1]="TurnInto",e}({});function g(e){const{thumbnail:t,iconSize:n}=e,o=(0,a().IS)((e=>({simplifiedThumbnail:{display:"block",width:n,height:n,flexGrow:0,flexShrink:0,background:l().Ay.white}})),[n]),i=(0,c().L)(t)||s().M;return(0,p.jsx)(u().Ay,{src:i,style:o.simplifiedThumbnail})}function f(e,t){const s=(0,i().Y0)(),l=(0,i().v3)(),u="dark"===(0,a().DP)().mode,{description:f,format:v,selected:h,title:_,sectionTitle:b,showSectionTitle:y,thumbnail:S,tooltipPhoto:w,thumbnailPadding:k,isDisabled:I,disabledTooltipMessage:x,shortcut:A,icon:C,desktopTitleStyle:T,blockType:M}=e,P=v===m.Insert,B=(0,r().K8)((()=>!!I&&I({environment:l,blocks:d().default.state.stores,publicEditMode:void 0})),[l,I]),R=(0,r().K8)((()=>{if(x)return x({environment:l,blocks:d().default.state.stores,publicEditMode:void 0})}),[l,x]),E=(0,a().IS)((e=>({titleDiv:{display:"flex",alignItems:"center"},shortcut:{color:e.text.tertiary,fontSize:12,whiteSpace:"nowrap",paddingRight:2},iconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:20,height:20,fill:e.mediumIconColor},title:{marginRight:6},sectionTitle:{color:e.text.tertiary,marginRight:6,...n(284371).RC}})),[20,6]),D=(0,o.useCallback)((()=>(0,p.jsx)(g,{isInsertFormat:P,iconSize:20,thumbnailPadding:k,thumbnail:S})),[S,k,P,20]),{badge:N,...L}=e,O=P&&Boolean(A),U=void 0!==C,F=h&&!P,V=(0,r().K8)((()=>"ai_block"===M?n(508496).default.checkGate({gateName:"ai_template_filling_use_new_ai_blocks"})?"new":"ai":N),[M,N]),j=(0,o.useCallback)((e=>(0,p.jsx)(n(760217).A,{...(0,n(553965).A)(e||{},L),desktopTitleStyle:T,ref:t,isChecked:F,right:O?(0,p.jsx)("span",{style:E.shortcut,children:A}):void 0,title:(0,p.jsxs)("div",{style:E.titleDiv,children:[y?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{style:E.title,children:_}),(0,p.jsx)("span",{style:E.sectionTitle,children:"·"}),(0,p.jsx)("span",{style:E.sectionTitle,children:b})]}):(0,p.jsx)("span",{style:E.title,children:_}),!F&&"new"===V&&(0,p.jsx)(n(515918).A,{style:{marginLeft:0}}),!F&&"beta"===V&&(0,p.jsx)(n(13898).A,{}),!F&&"alpha"===V&&(0,p.jsx)(n(301948).A,{})]}),icon:U?(0,p.jsx)("div",{style:E.iconContainer,children:C(u)(E.icon)}):D(),disabled:B,disabledFeedback:B})),[L,t,F,E.titleDiv,E.iconContainer,E.icon,_,E.title,V,D,B,U,C,E.shortcut,A,O,y,b,E.sectionTitle,u,T]),z=(0,o.useCallback)((()=>{if(B&&R)return(0,p.jsx)("div",{children:R});const e=w?(0,c().L)(w):void 0;return(0,p.jsx)(n(103448).A,{imageURL:e,imageWidth:140,imageHeight:100,caption:f})}),[B,w,f,R]);return s.isMobile?j():(0,p.jsx)(n(859428).A,{renderTooltip:z,placement:n(962730).W.Right,delayThreshold:0,render:e=>j(e)})}const v=o.forwardRef(f)},939740:(e,t,n)=>{n.d(t,{Ay:()=>S,Oh:()=>_,VU:()=>b});n(16280),n(18107),n(967357),n(898992),n(823215),n(581454);var o=n(296540),i=n(440961),r=()=>n(484714),a=()=>n(819121),s=()=>n(847249),l=()=>n(401497),c=()=>n(591779),d=()=>n(959013),u=()=>n(496603),p=()=>n(534177),m=()=>n(176072),g=()=>n(730688),f=()=>n(953418),v=n(474848);function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,s().K8)(e,t,{...n,debugName:(null==n?void 0:n.debugName)||"MenuList"})}let _=function(e){return e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.Grid=2]="Grid",e}({});const b=o.createContext({isMenuListFocusVisible:!1});function y(e,t){const{disableInitialScroll:i,scrollElIntoView:l,initialFocus:d,sections:y,resetInitialFocusOnSectionChangeAlways:S,resetInitialFocusOnSectionChange:A,disableKeyboard:C=!1,disableCommandEnter:T,disallowBackspace:M,priority:P,style:B,performHandleEnterOnTab:R,captureKeyboardOnlyWhenFocused:E,comboboxProps:D,suppressFocusRing_PLEASE_USE_SPARINGLY:N=!1}=e,L=(0,r().v3)(),O=(0,s().uB)(e.store,n(970585).A),[U,F]=function(e){const t=h((()=>e.getState().focus),[e]);return[t,(0,o.useCallback)((t=>{m().Z6({store:e,...t})}),[e])]}(O),V=(0,c().ZC)(e.initialFocus),j=(0,c().ZC)(e.sections);(0,o.useEffect)((()=>{var e,t;(V!==d||S&&(t=j??[],(e=y).length!==t.length||!e.every(((e,n)=>{const o=t.at(n);return r=o,(i=e).key===(null==r?void 0:r.key)&&i.items.length===r.items.length&&i.items.every(((e,t)=>{const n=r.items[t];return e.key===n.key}));var i,r})))||A&&U.indexGlobal===d&&y!==j)&&F({indexGlobal:d,sections:y})}),[F,d,V,y,U.indexGlobal,j,S,A]);const{itemRefs:z,itemInstanceRef:H}=function(){const e=(0,o.useRef)({});return{itemRefs:e,itemInstanceRef:(0,o.useCallback)(((t,n)=>{u().hZ(e.current,[t.section,t.indexLocal],n||void 0)}),[])}}(),[W,q]=(0,o.useState)(void 0),K=(0,o.useId)();(0,o.useLayoutEffect)((()=>{if(void 0!==U.indexLocal&&z.current){var t,n;const o=null===(t=z.current[U.section])||void 0===t?void 0:t[U.indexLocal],i=o instanceof Element?o.getAttribute("id")??void 0:void 0;q(i),null==D||null===(n=D.setComboboxState)||void 0===n||n.call(D,{inputElementAttributes:{"aria-activedescendant":i,"aria-autocomplete":"list","aria-controls":K,"aria-expanded":!0,"aria-haspopup":e.type===_.Grid?"grid":"listbox","aria-orientation":e.type===_.Horizontal?"horizontal":void 0,role:"combobox"},suppressFocusRing:void 0!==U.indexGlobal})}}),[U,z,q,D,K,e.type]);const G=(0,o.useRef)(!1),$=(0,o.useCallback)((()=>{G.current=!0,null==D||D.onItemHover()}),[D]),Y=(0,o.useCallback)((()=>{G.current=!1}),[]),Q=(0,o.useCallback)((()=>{F({indexGlobal:void 0,sections:y})}),[F,y]),{handleScroll:Z,onForceScroll:X}=function(e,t){const n=(0,o.useRef)(!1);return{handleScroll:(0,o.useCallback)((()=>{n.current?n.current=!1:e.unfocusOnScroll&&t({sections:e.sections,indexGlobal:void 0})}),[e.unfocusOnScroll,e.sections,t]),onForceScroll:(0,o.useCallback)((()=>{n.current=!0}),[])}}(e,F),{WindowSizeStore:J}=(0,r().v3)(),ee=(0,n(754735).xJ)(J);!function(e,t,n,i,a,s,l){const d=(0,r().v3)(),u=(0,c().ZC)(n);(0,o.useEffect)((()=>{n!==u&&!i.current&&(!0===(null==u?void 0:u.isInitialized)||!0!==e)&&w(d,n,a,t,s,l)}),[d,n,u,i,e,a,t,l,s])}(i,l,U,G,z,ee,X),function(e,t,n,i,a,s){const l=(0,r().v3)(),d=(0,c().ZC)(e),u=(0,o.useRef)(!0);(0,o.useEffect)((()=>{e!==d&&!u.current&&w(l,n.getState().focus,i,t,a,s),u.current&&(u.current=!1)}),[l,e,d,u,n,i,t,s,a])}(d,l,O,z,ee,X);const[te,ne]=(0,o.useState)(!1),[oe,ie]=(0,a().A)(),re=function(e,t,n,i){const{sections:r,disableKeyboardArrowWrap:a,onKeyboardArrow:s,type:l}=e,c=e.type===_.Vertical&&Boolean(e.onFooterEnter),d=(0,o.useCallback)((e=>{if("altKey"in e&&e.altKey||"shiftKey"in e&&e.shiftKey)return;const o=g().i2(r);if(0===o&&!c)return;e.preventDefault&&e.preventDefault(),i();const l=n.getState().focus,d=l.indexGlobal;0===o?m().rd({store:n}):l.footerFocused?t({indexGlobal:o-1,sections:r}):0===d||void 0===d?a||(c?m().rd({store:n}):t({indexGlobal:o-1,sections:r})):t({indexGlobal:d-1,sections:r}),null==s||s(n.getState().focus)}),[n,t,r,i,a,s,c]),u=(0,o.useCallback)((e=>{if("altKey"in e&&e.altKey||"shiftKey"in e&&e.shiftKey)return;const o=n.getState().focus,l=g().i2(r);if(0===l)return void(c&&!o.footerFocused&&m().rd({store:n}));e.preventDefault&&e.preventDefault(),i();const d=o.indexGlobal;void 0===d?(!o.footerFocused||o.footerFocused&&!a)&&t({indexGlobal:0,sections:r}):c&&d+1===l?m().rd({store:n}):(d+1<l||!a)&&t({indexGlobal:(d+1)%l,sections:r}),null==s||s(n.getState().focus)}),[a,r,n,t,i,s,c]),f=l===_.Grid?e.getItemsPerRowForSection:void 0,v=(0,o.useCallback)((e=>{l===_.Grid&&void 0!==f&&0!==g().i2(r)&&(e.preventDefault&&e.preventDefault(),i(),m().D8({store:n,getItemsPerRowForSection:f,sections:r,disableKeyboardArrowWrap:Boolean(a)}))}),[l,r,i,f,a,n]),h=(0,o.useCallback)((e=>{l===_.Grid&&void 0!==f&&0!==g().i2(r)&&(e.preventDefault&&e.preventDefault(),i(),m().EC({store:n,getItemsPerRowForSection:f,sections:r,disableKeyboardArrowWrap:Boolean(a)}))}),[l,r,i,n,f,a]);if(l===_.Vertical)return{onUp:d,onDown:u};if(l===_.Horizontal)return{onLeft:d,onRight:u};if(l===_.Grid)return{onLeft:d,onRight:u,onUp:v,onDown:h};(0,p().HB)(l)}(e,F,O,Y),ae=function(e,t,n){const i=(0,r().v3)(),{sections:a,onAccept:s,onEmptyEnter:l,isEnterOnHoverEmpty:c,type:d}=e,u=d===_.Vertical?e.onFooterEnter:void 0;return(0,o.useCallback)((e=>{const{device:o}=i;if(o.isPhone)return;e.preventDefault&&e.preventDefault();const r=t.getState().focus,d=c&&n.current?void 0:r.indexGlobal;if(r.footerFocused)u&&u();else if(void 0===d)l&&l();else{const t=g().e7(d,a);t&&k(s,t.item,{index:d,event:e,indexLocal:t.index},!0)}}),[i,t,a,s,l,n,c,u])}(e,O,G),se=R?ae:void 0,le=(0,o.useRef)(),ce=(0,n(93583).A)(t,le,oe);!function(e,t){const n=(0,o.useRef)(void 0);(0,o.useEffect)((()=>(e.current&&(n.current=(0,f().NM)(e.current)),n.current&&n.current.addEventListener("scroll",t),()=>{n.current&&n.current.removeEventListener("scroll",t)})),[e,n,t])}(le,Z),I({sections:y});const de=(0,o.useCallback)((e=>{ne(!0);const t=e.target;if(t instanceof HTMLElement&&t===le.current&&(0,a().p)(t)){void 0===O.getState().focus.indexGlobal&&F({indexGlobal:0,sections:y})}}),[O,y,F]),ue=(0,o.useCallback)((e=>{ne(!1);const t=e.target;t instanceof HTMLElement&&t===le.current&&E&&F({indexGlobal:void 0,sections:y})}),[E,F,y]),pe=(0,o.useMemo)((()=>({isMenuListFocusVisible:!L.device.isMobile&&!N&&(D?D.isFocusVisible&&D.isComboboxFocused:ie)})),[ie,D,N,L.device.isMobile]);let me=!0;return C?me=!1:D?me=D.isComboboxFocused:E&&(me=te),(0,v.jsx)(n(545805).A,{debugName:"MenuList",capture:me,...re,onEnter:ae,onTab:se,onCommandEnter:T?void 0:ae,onCommandSlash:u().D_,onBackspace:M?u().D_:void 0,priority:P,children:(0,v.jsx)("div",{className:void 0!==U.indexGlobal||void 0!==U.indexLocal||N?void 0:n(38337).RrJ,style:{borderRadius:10,...B},ref:ce,id:K,onMouseLeave:e.resetFocusOnMouseOut?Q:void 0,onBlur:ue,onFocus:de,...D?{role:e.type===_.Grid?"grid":"listbox"}:{"aria-activedescendant":W,"aria-orientation":e.type===_.Horizontal?"horizontal":void 0,tabIndex:0,role:e.type===_.Grid?"grid":"menu"},children:(0,v.jsx)(b.Provider,{value:pe,children:y.map(((t,n)=>(0,v.jsx)(x,{section:t,sectionIndex:n,focus:U,setFocus:F,itemInstanceRef:H,onHover:$,store:O,menuListProps:e},t.key)))})})})}b.displayName="MenuListContext";const S=o.forwardRef(y);function w(e,t,n,o,r,a){var s;if(void 0===t.indexLocal)return;const l=i.findDOMNode(null===(s=n.current[t.section])||void 0===s?void 0:s[t.indexLocal]);l&&(a(),o?o(l):(0,f().uf)({environment:e,el:l,windowHeight:r}))}function k(e,t,n,o){e&&e(t,n,o),t.action(n)}function I(e){let{sections:t,items:n}=e;const i=(0,o.useMemo)((()=>[]),[n,t]),r=(0,o.useMemo)((()=>u().sb(u().oE(i.map(((e,t)=>{if([...i.slice(0,t),...i.slice(t+1)].includes(e))return e}))))),[i]);(0,o.useEffect)((()=>{0}),[i,r,n,t])}function x(e){let{section:t,sectionIndex:n,focus:o,setFocus:i,itemInstanceRef:r,onHover:a,menuListProps:s}=e;const{sections:c,type:p,toggleableSections:m,onToggleableSectionClick:g}=s,f=t.items.length-1,b=o.section===n?o.indexLocal:void 0;I({items:t.items,sections:c});const y=t.items.map(((e,t)=>{const o=t===b,l=t+1===b,c=t===f;return(0,v.jsx)(A,{item:e,sectionIndex:n,indexLocal:t,itemInstanceRef:r,onHover:a,menuListProps:s,setFocus:i,focused:o,isBeforeFocused:l,isLastInSection:c},e.key)}));let S;if(p===_.Grid){const e=s.getItemsPerRowForSection(t.key);S=u().iv(y,e).map(s.renderRow)}else S=y;const w=(0,l().IS)((e=>({noResult:{color:e.text.secondary,fontSize:14,paddingLeft:14,paddingRight:14,lineHeight:1.2,minHeight:28,alignItems:"center",display:"flex"}})),[]);0===y.length&&t.showNoResultMessage&&(S=[(0,v.jsx)("div",{style:w.noResult,children:(0,v.jsx)(d().sA,{id:"menuList.menuListSection.noResult",defaultMessage:"No results"})},"no-result-message")]);const{render:k,key:x}=t;return(0,v.jsx)(v.Fragment,{children:h((()=>k({key:x,index:n,children:S,focusedIndex:b,toggleable:m??!1,onToggleableSectionClick:e=>{let{newToggleState:t}=e;return null==g?void 0:g({sectionKey:x,newToggleState:t})}})),[k,x,n,S,b,m,g])})}const A=o.memo((function(e){let{item:t,sectionIndex:i,indexLocal:r,itemInstanceRef:a,onHover:s,menuListProps:l,setFocus:c,focused:d,isBeforeFocused:u,isLastInSection:p}=e;const{sections:m,onAccept:f}=l,b=(0,o.useMemo)((()=>({section:i,indexLocal:r})),[i,r]),y=(0,o.useCallback)((e=>{const t=g().WK(b,m),n=g().SG(b,m);n&&k(f,n,{event:e,index:t,indexLocal:b},!1)}),[b,m,f]),S=(0,o.useCallback)((e=>{const t=g().WK(b,m),n=g().SG(b,m);n&&k(f,n,{event:e,index:t,indexLocal:b},!1)}),[b,m,f]),w=(0,o.useId)(),I=(0,o.useCallback)((()=>{n(732770).A.state.isKeyboardMode||n(353643).A.state.isDragging||n(861841).Ay.state.isDragging||(s(),c({indexLocal:b,sections:m}))}),[b,m,c,s]),x=(0,o.useCallback)((()=>{c({indexLocal:b,sections:m})}),[b,m,c]);let A="menuitem";l.type===_.Grid?A="gridcell":l.comboboxProps&&(A="option");const{render:C,key:T}=t;return(0,v.jsx)(v.Fragment,{children:h((()=>C({id:w,role:A,focused:d,isBeforeFocused:u,isLastInSection:p,key:T,ref:e=>{a(b,e)},onClick:y,onAuxClick:S,onMouseEnter:I,ignoreLocalHoverState:!0,disallowTabbing:!0},{onAccept:f,onFocus:x})),[C,w,A,d,u,p,T,y,S,I,f,x,a,b])})}))},940371:(e,t,n)=>{n.d(t,{S:()=>o});n(18107),n(967357);function o(e){return e.state.stack.at(-1)}},941463:(e,t,n)=>{n.d(t,{Ay:()=>g,WR:()=>a,y8:()=>s});var o=()=>n(994310),i=()=>n(496603),r=()=>n(441199);const a=320,s=470,l="secondary_sidebar",c={openState:"closed",contentType:"none",mode:"peek",modeByContentType:{none:"peek",inbox:"peek",activity:"peek",private_pages:"peek",shared_pages:"peek",assistant:"peek",teams:"peek"},widths:{none:320,inbox:390,activity:320,private_pages:320,shared_pages:320,assistant:320,teams:320}};function d(e){o().A.set(l,e)}function u(){const e=o().A.get(l),t=void 0===i().Jt(e,["widths","inbox"]),r=i().h1(i().mg(c),e);if(t){const e=o().A.get(n(424039).CV),t=i().Jt(e,["width"]);if(void 0!==t){r.widths.inbox=t;try{d(r)}catch{}}}return r}class p extends(()=>n(757695))().default{getInitialState(){return u()}getWidth(){const e=r().default.state.contentType,t=this.state.widths[e];return t<=a?a:t>=s?s:t}setWidth(e){const t=r().default.state.contentType;this.setState({...this.state,widths:{...this.state.widths,[t]:e}})}}const m=new p;m.addListener((e=>{try{d(e.state)}catch{}}));const g=m},941541:(e,t,n)=>{n.d(t,{AY:()=>l,Ay:()=>s});n(898992),n(354520),n(803949);var o=()=>n(365233),i=()=>n(343473);class r{constructor(){this.uniqueIdCounter=0}addListener(e,t,n,r,a){if((0,o().A)(e))return r||(r=this.computeNewSubscriptionId()),i().B1(e,t,n,r,a),{key:e,subscriptionId:r}}removeListener(e,t){let{key:n,subscriptionId:r}=e,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,o().A)(n)&&i().al(n,r,t,a)}async updateField(e,t,n,o,r,a){await i().cP({key:e,field:t,updates:n,ttl:o,environment:r,onDisconnectFields:a})}async setField(e,t,n,o,r){await i().x({key:e,field:t,value:n,ttl:o,environment:r})}async onDisconnect(e,t,n,o){const r=`${n}/${e}`;await i().zg(r,t,o)}async clearOnDisconnect(e,t,n){const o=`${t}/${e}`;await i().uQ(o,n)}computeNewSubscriptionId(){return this.uniqueIdCounter+=1,`subscription:${this.uniqueIdCounter}`}}class a{constructor(){this.isQueuingListeners=!0,this.queuedListeners=[],this.defaultMessageDispatcher=new r}addListener(e,t,n,o,i){return this.isQueuingListeners?(o||(o=this.defaultMessageDispatcher.computeNewSubscriptionId()),this.queuedListeners=[...this.queuedListeners.filter((t=>t.key!==e||t.subscriptionId!==o)),{key:e,authorizationToken:t,listener:n,subscriptionId:o}],{key:e,subscriptionId:o}):this.defaultMessageDispatcher.addListener(e,t,n,o,i)}removeListener(e,t){let{key:n,subscriptionId:o}=e;this.isQueuingListeners?this.queuedListeners=this.queuedListeners.filter((e=>e.key!==n&&e.subscriptionId!==o)):this.defaultMessageDispatcher.removeListener({key:n,subscriptionId:o},t)}updateField(e,t,n,o,i){return Promise.resolve()}setField(e,t,n,o,i){return Promise.resolve()}onDisconnect(e,t,n,o){return Promise.resolve()}clearOnDisconnect(e,t,n){return Promise.resolve()}stopQueueingSubscriptions(e){this.isQueuingListeners&&(this.queuedListeners.forEach((t=>{this.defaultMessageDispatcher.addListener(t.key,t.authorizationToken,t.listener,t.subscriptionId,e)})),this.queuedListeners=[],this.isQueuingListeners=!1)}}const s=window.location.pathname===n(427704).GJ.quickSearch?new a:new r;function l(e){let t=!1;return function(){if(t)return e(...arguments);t=!0}}},943387:(e,t,n)=>{n.d(t,{tr:()=>r,rQ:()=>a,XS:()=>s,XY:()=>l,Pj:()=>o,eB:()=>i});n(898992),n(354520),n(430670),n(581454),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(803949);function o(e){return!!e&&("agent-tool-result"===e.type||"workflow-operation"===e.type)}function i(e){const{operations:t,serverPersisted:n}=e;return(t??[]).map((e=>({operation:e,timestamp:Date.now(),serverPersisted:n??!1,userAction:void 0})))}function r(e){return(e??[]).map((e=>e.operation))}function a(e){return s(e).map((e=>e.operation))}function s(e){return o(e)?e.threadOperations??[]:[]}function l(e){return e.flatMap(s)}},943846:(e,t,n)=>{n.d(t,{Ld:()=>I,Pq:()=>v,rS:()=>A,mI:()=>k,Vh:()=>w,DB:()=>f,Or:()=>_,Yl:()=>b,NA:()=>x,hg:()=>C,xy:()=>S});n(16280),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(737550),n(814603),n(147566),n(198721);var o=()=>n(700500),i=()=>n(713998),r=()=>n(522419),a=()=>n(857639),s=(n(944114),n(803949),()=>n(939768));var l=()=>n(763824),c=()=>n(780054),d=()=>n(508496),u=()=>n(974233);const p=3,m=1e4;async function g(e){const{environment:t,sourceURL:n}=e;let o;o=`https://embed.notion.co/api/iframely?key=${c().A.iframely_prod.key}&url=${n}`;const i={environment:t,method:"GET",url:o,format:"json"},{result:r}=await l().xz(p,m,(()=>(0,u().default)(i)));if(r&&"success"===r.type)return function(e,t){const n=e;return Object.keys(e).forEach((o=>{if("meta"===o&&(e[o].title&&(n.title=e[o].title),e[o].description&&(n.description=e[o].description),e[o].site&&(n.provider_name=e[o].site),e[o].author&&(n.author_name=e[o].author)),"html"===o){const i=/<iframe[^>]+src="([^"]+)/,r=e[o].match(i);if(r){const e=r[1];n.iframe=e}const a=/height:\s*([^px;]+)/,s=e[o].match(a),l=s?parseInt(s[1].trim()):null,c=/padding-bottom:\s*([^%;]+)/,d=e[o].match(c),u=d?parseInt(d[1].trim()):null,p=/padding-top:\s*([^px;]+)/,m=e[o].match(p),g=m?parseInt(m[1].trim()):null;l&&t&&(n.height=l),u&&t&&(n.padding=u),g&&t&&(n.padding_top=g)}if("url"===o&&(n.url=e[o]),"links"===o){if(e[o].thumbnail&&e[o].thumbnail.length>0){n.images=[];const t={width:Number,height:Number,url:String};t.width=e[o].thumbnail[0].media&&e[o].thumbnail[0].media.width?e[o].thumbnail[0].media.width:480,t.height=e[o].thumbnail[0].media&&e[o].thumbnail[0].media.height?e[o].thumbnail[0].media.height:1080,t.url=e[o].thumbnail[0]&&e[o].thumbnail[0].href?e[o].thumbnail[0].href:"",n.images.push(t)}e[o].icon&&e[o].icon.length>0&&(n.favicon_url=e[o].icon[0].href)}})),t||(n.title||(n.title=s().qg(n.url).hostname),delete n.author_name,delete n.provider_name,delete n.iframe),n}(r.data);a().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==r?void 0:r.error,data:{miscDataToConvertToString:{provider:"iframely"}}})}async function f(e,t){const n=encodeURIComponent(t.trim());return"on"===d().default.getEligibleGroup({experimentId:"iframely_switch",defaultGroup:"control"})?await g({environment:e,sourceURL:n}):await async function(e,t){const n={environment:e,method:"GET",url:`https://api.embed.ly/1/extract?key=${c().A.embedly.key}&url=${t}`,format:"json"},{result:o}=await l().xz(p,m,(()=>(0,u().default)(n)));if(o&&"success"===o.type)return o.data;a().log({level:"error",from:"embedHelpers",type:"getExtractedData",error:null==o?void 0:o.error,data:{miscDataToConvertToString:{provider:"embedly"}}})}(e,n)}function v(e){let{source:t,unauthorizedIframeUrls:n}=e;return!!t&&n.some((e=>s().mJ(t,e)&&s().t7(t,e)))}const h=/(\/d\/|id=)([-\w]{25,})/;function _(e){const t=e.match(h);if(t&&!(t.length<3))return t[2]}function b(e){return i().MO(e.store.getProperties().source)||e.source}const y=new Set(["http:","https:","blob:","data:"]);function S(e){const t=new URL(e,c().A.domainBaseUrl).protocol;return y.has(t)}function w(e){if(e&&e instanceof I)return{type:"invalid_protocol",protocol:e.protocol}}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.protocol;const n=x(e);if(!n)return{type:"invalid_url",source:e};const o=new URL(n).protocol;return"https:"===t&&"http:"===o?{type:"invalid_protocol",protocol:o}:void 0}class I extends Error{constructor(e){const t=new URL(e,c().A.domainBaseUrl).protocol;super(`Invalid URL protocol: "${t}"`),this.name=void 0,this.protocol=void 0,this.protocol=t,this.name="InvalidUrlProtocolError"}}function x(e){let t=r()._J(e)?e:s().q7(e);if(t||e.includes(":")||(t=s().q7(`https:${e}`)),t&&new URL(t).origin!==window.location.origin)return t}function A(e){const{aspectRatio:t,isFullWidth:n,isFullHeight:o,preserveScale:i,height:r,paddingTop:a}=e,s={position:"relative",display:"flex",justifyContent:"center",width:"100%",minHeight:100};return o?(s.height="100%",s.position=void 0):n||!i?s.height=r:(s.height=0,s.paddingBottom=100*(t||.75)+"%",s.paddingTop=a),s}function C(e){const t=e.getType();return!!t&&(0,o().ie)(t)}},945382:(e,t,n)=>{n.d(t,{fK:()=>r});var o=()=>n(416845),i=()=>n(979340);function r(e){const t=function(e){const{space:t,spaceUser:n}=e;if(void 0===t||null==n||!n.isWorkspaceOwner())return new(o().rTV)("You do not have permissions to this feature in the requested space.",{type:"generic_insufficient_permissions"});return a(t)}(e);return void 0===t}function a(e){if(!(0,i().OX)(e.getSubscriptionTier()))return new(o().rTV)("The feature is not available on your current plan type.",{type:"generic_insufficient_plan_type"})}},945610:(e,t,n)=>{n.d(t,{$:()=>i,v:()=>o});const o="not_defined";let i=function(e){return e.BASE_SPACE_DATA="base_space_data",e.SPACE_MEMBER_DATA="space_member_data",e.SPACE_NONMEMBER_DATA="space_nonmember_data",e.SPACE_DATA_NOT_LOADED="space_data_not_loaded",e}({})},945895:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}cloneState(){return n(496603).o8(this.state)}}const i=new o},946065:(e,t,n)=>{n.d(t,{AQ:()=>c,AX:()=>r,GU:()=>i,Pt:()=>d,st:()=>o,vw:()=>l,yy:()=>s,zt:()=>a});const o="teamSidebar",i="teamBrowserSearch",r="teamBrowserUnjoinedTeams",a="teamBrowserJoinedTeams",s="publicPageTemplateIncludes",l=-1,c=[5,10,15,20,l];function d(e){const{block:t,query:n,getRecordModel:o,userTimeZone:i,intl:r}=e;if(!n)return!0;const a=null==t?void 0:t.getRenderTitle({getRecordModel:o,userTimeZone:i,intl:r});return!!a&&a.toLowerCase().indexOf(n.trim().toLowerCase())>=0}},946141:(e,t,n)=>{n.d(t,{By:()=>B,ED:()=>g,En:()=>S,GW:()=>q,H8:()=>v,JG:()=>f,KK:()=>p,NB:()=>I,PA:()=>y,Rt:()=>A,US:()=>M,Vg:()=>F,WO:()=>H,XQ:()=>W,Zl:()=>m,_L:()=>O,_P:()=>h,b0:()=>_,fx:()=>T,h2:()=>V,hj:()=>d,ks:()=>E,lR:()=>R,lY:()=>z,o$:()=>C,pi:()=>j,rP:()=>N,tw:()=>L,ug:()=>w,vo:()=>k,w_:()=>b,xZ:()=>P,xl:()=>u,yB:()=>x});var o=()=>n(496603),i=()=>n(534177),r=()=>n(989423),a=()=>n(644914),s=()=>n(456663),l=()=>n(632709),c=()=>n(508496);async function d(e,t){await r().vd(e,"manage_teams_filter_click",t)}function u(e,t){r().vd(e,"manage_teams_sort",t)}function p(e,t){N(e,"duplicate_team",t)}function m(e,t){r().vd(e,"open_team_browser",{...t,...(0,a().hX)({environment:e})})}function g(e,t){r().vd(e,"team_browser_search_cleared",t)}function f(e,t){const{teamStore:n,outliner_type:o}=t;N(e,"team_browser_member_list_hover",{store:n,outliner_type:o})}function v(e,t){r().vd(e,"create_team_start",{from:t.from,flow_id:t.flowId}),c().default.logEvent("create_team_start",1,{...t,...(0,a().hX)({environment:e})})}async function h(e,t){const{store:n}=t;await n.load(),N(e,"create_team_complete",t),D("create_team_complete",t)}async function _(e,t){const{store:n}=t;await n.load(),N(e,"enable_teams",t)}function b(e,t){const{screen:n,...o}=t;if(n===s().o.Team){const t={screen:"team",...o};return N(e,"close_create_team_modal",t),void D("close_create_team_modal",t)}const i={screen:"members",flow_id:t.flow_id,from:t.from,team_id:t.team_id,store:t.store};N(e,"close_create_team_modal",i),D("close_create_team_modal",i)}function y(e,t){N(e,"invite_team_members",t),D("invite_team_members",t)}function S(e,t){N(e,"invite_team_groups",t),D("invite_team_groups",t)}function w(e,t){N(e,"set_default_team",t)}function k(e,t){N(e,"join_team",t),D("join_team",t)}function I(e,t){N(e,"archive_team",t)}function x(e,t){N(e,"transition_to_zero_teams",t)}function A(e,t){N(e,"restore_team",t)}function C(e,t){N(e,"remove_team_members",t)}function T(e,t){N(e,"remove_team_groups",t)}function M(e,t){N(e,"change_teams_order",t)}function P(e,t){N(e,"change_team_access_level",t)}function B(e,t){N(e,"update_team_settings",t)}function R(e,t){N(e,"open_outliner_team_overflow",{...t,...(0,a().hX)({environment:e})})}function E(e,t){N(e,"click_outliner_team_overflow_option",t),D("click_outliner_team_overflow_option",t)}function D(e,t){const{store:n,...o}=t;n?c().default.logEvent(e,1,{...r()._d(n),...o}):c().default.logEvent(e,1,t)}async function N(e,t,n){const{store:i,...a}=n;if(!i)return void(await r().vd(e,t,{...a}));const s=r()._d(i),l=o().cJ(s,"team_id");await r().vd(e,t,{...l,...a},{forceOverrideAutomaticEventData:{team_id:s.team_id}})}function L(e,t,n,i,a){const{store:s,...l}=a;if(!s)return void r().WU(e,t,n,i,{...l});const c=r()._d(s),d=o().cJ(c,"team_id");r().WU(e,t,n,i,{...d,...l},{forceOverrideAutomaticEventData:{team_id:c.team_id}})}function O(e,t){N(e,"open_team_home",t)}function U(e){switch(e){case l().p.General:return"general";case l().p.Members:return"members";case l().p.Security:return"security";default:(0,i().HB)(e)}}function F(e,t){N(e,"click_team_settings_tab",{store:t.store,tab_old_value:U(t.tab_old_value),tab_new_value:U(t.tab_new_value)})}function V(e,t){N(e,"restore_team_permissions",t)}function j(e,t){N(e,"team_invite_link_confirmation_selection",t)}function z(e,t){N(e,"copy_team_invite_link",t),D("copy_team_invite_link",t)}function H(e,t){N(e,"click_team_invite_link",t)}function W(e,t){N(e,"request_access_to_team",t)}function q(e,t){N(e,"resolve_team_access_request",t)}},946548:(e,t,n)=>{n.d(t,{A:()=>h});var o=n(296540),i=()=>n(484714),r=()=>n(819121),a=()=>n(401497),s=()=>n(955825),l=()=>n(449552),c=()=>n(751735),d=()=>n(100622),u=()=>n(753199),p=()=>n(722872),m=()=>n(962730),g=()=>n(859428),f=n(474848);function v(){}function h(e){return(0,p().Tf)()?(0,f.jsx)(b,{...e}):(0,f.jsx)(_,{...e})}function _(e){let{on:t,disabled:n,isLocked:p=!1,lockedTooltip:h,onClick:_,noColor:b=!1,isMobile:y=!1,disallowTabbing:S,inputId:w,"aria-label":k,"aria-labelledby":I,"aria-describedby":x}=e;const[A,C]=(0,r().A)(),T=(0,i().Y0)(),M=void 0===y?T.isMobile:y,P=T.isAndroid,B=n||p,R=(0,a().IS)((e=>{const n="dark"===e.mode,o=e.shadowColor,i=e.shadowOpacity,r=P?0:2,a=P?14:M?26:18,s=P?38:M?44:30;return{root:{position:"relative",borderRadius:44,...C&&{boxShadow:e.outlineBlueInputBoxShadow}},track:{display:"flex",flexShrink:0,height:a-2*r,width:s-2*r,borderRadius:44,padding:r,boxSizing:"content-box",background:t?P?d().Ay.blueWithAlpha(.28):b?(0,c().X4)(d().CM[e.mode].gray,.3):d().Ay.blue:P?(0,c().X4)(d().CM[e.mode].gray,.4):M?d().Ay.transparent:n?(0,c().X4)(d().CM[e.mode].lightgray,.3):(0,c().X4)(d().CM[e.mode].gray,.3),boxShadow:t||P||!M?"":`inset 0 0 0 1px ${e.darkDividerColor}`,transition:"background 200ms, box-shadow 200ms",...B&&{cursor:"default"}},circle:{width:(P?22:M?26:18)-2*r,height:(P?22:M?26:18)-2*r,borderRadius:44,background:P&&t?d().Ay.blue:d().Ay.white,transition:"transform 200ms ease-out, background 200ms ease-out",transform:`\n\t\t\t\ttranslateX(${t?(P?18:M?22:16)-2*r:0}px)\n\t\t\t\ttranslateY(-${P?4:0}px)\n\t\t\t`,boxShadow:P?`\n\t\t\t\t\t0 1px 3px ${(0,c().X4)(o,2*i)},\n\t\t\t\t\t0 6px 20px ${(0,c().X4)(o,3*i)}`:M?`\n\t\t\t\t\t\t0 0 0 0.5px ${(0,c().X4)(o,i)},\n\t\t\t\t\t\t0 3px 8px 0 ${(0,c().X4)(o,i)},\n\t\t\t\t\t\t0 1px 1px 0 ${(0,c().X4)(o,i)},\n\t\t\t\t\t\t0 3px 1px 0 ${(0,c().X4)(o,i)},\n\t\t\t\t\t`:void 0},input:{position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,...B?{pointerEvents:"none"}:{cursor:"pointer"}},lockedContainer:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},lockedIcon:{height:16,width:16,color:e.grayButtonBackground}}}),[M,B,P,C,b,t]),E=(0,o.useCallback)((e=>{(0,u().SQ)({event:e,context:u().y$.EditorClick,callback:()=>{void 0!==_&&_(e)}})}),[_]),D=(0,a().DP)(),N=(0,f.jsxs)("div",{...(0,s().AH)(R.root,B?{opacity:.4}:{pseudoHover:{background:D.buttonHoveredBackground},pseudoActive:{background:D.buttonPressedBackground}}),children:[(0,f.jsx)("div",{style:R.track,children:(0,f.jsx)("div",{style:R.circle})}),(0,f.jsx)("input",{id:w,disabled:B,checked:t,onClick:E,onChange:v,type:"checkbox",ref:A,role:"switch",tabIndex:S||B?-1:void 0,style:R.input,"aria-label":k,"aria-labelledby":I,"aria-describedby":x})]});return p?(0,f.jsx)(g().A,{placement:m().W.Left,alignment:m().C.Start,disableTooltip:!h,renderTooltip:()=>h,render:e=>(0,f.jsxs)("div",{style:R.lockedContainer,...e,children:[(0,l().g)(R.lockedIcon),N]})}):N}function b(e){let{on:t,disabled:n,isLocked:i=!1,lockedTooltip:p,onClick:h,noColor:_=!1,disallowTabbing:b,inputId:y,"aria-label":S,"aria-labelledby":w,"aria-describedby":k}=e;const[I,x]=(0,r().A)(),A=n||i,C=(0,a().IS)((e=>{const n=e.shadowColor,o=e.shadowOpacity;return{root:{position:"relative",borderRadius:51,...x&&{boxShadow:e.outlineBlueInputBoxShadow}},track:{display:"flex",flexShrink:0,height:27,width:47,borderRadius:51,padding:2,boxSizing:"content-box",background:t?_?(0,c().X4)(d().CM[e.mode].gray,.3):e.fill.uiBlue:e.fill.lightGraySecondary,transition:"background 200ms, box-shadow 200ms",...A&&{cursor:"default"}},circle:{width:27,height:27,borderRadius:51,background:d().Ay.white,transition:"transform 200ms ease-out, background 200ms ease-out",transform:`\n\t\t\t\t\t\ttranslateX(${t?20:0}px)\n\t\t\t\t\t`,boxShadow:`\n\t\t\t\t\t\t0 3px 1px 0 ${(0,c().X4)(n,o)},\n\t\t\t\t\t\t0 3px 8px 0 ${(0,c().X4)(n,o)}\n\t\t\t\t\t`},input:{position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,...A?{pointerEvents:"none"}:{cursor:"pointer"}},lockedContainer:{display:"flex",alignItems:"center",justifyContent:"center",gap:4},lockedIcon:{height:16,width:16,color:e.grayButtonBackground}}}),[A,x,_,t]),T=(0,o.useCallback)((e=>{(0,u().SQ)({event:e,context:u().y$.EditorClick,callback:()=>{void 0!==h&&h(e)}})}),[h]),M=(0,a().DP)(),P=(0,f.jsxs)("div",{...(0,s().AH)(C.root,A?{opacity:.4}:{pseudoHover:{background:M.buttonHoveredBackground},pseudoActive:{background:M.buttonPressedBackground}}),children:[(0,f.jsx)("div",{style:C.track,children:(0,f.jsx)("div",{style:C.circle})}),(0,f.jsx)("input",{id:y,"aria-label":S,"aria-labelledby":w,"aria-describedby":k,disabled:A,checked:t,onClick:T,onChange:v,type:"checkbox",ref:I,role:"switch",tabIndex:b||A?-1:void 0,style:C.input})]});return i?(0,f.jsx)(g().A,{placement:m().W.Left,alignment:m().C.Start,disableTooltip:!p,renderTooltip:()=>p,render:e=>(0,f.jsxs)("div",{style:C.lockedContainer,...e,children:[(0,l().g)(C.lockedIcon),P]})}):P}},947688:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},947983:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(672577);class o extends(()=>n(959180))().A{containedByAssistantEditCard(e){return Boolean(this.find((t=>{const o=t.getNode();return o instanceof HTMLElement&&(0,n(713972).gR)(o,e)})))}getEditById(e){for(const t of this.members)for(const o of t.getGroups())if("updatedPage"===o.type){if(!o.didCreatePage)for(const t of o.groupedEdits)if(t.editId===e)return t}else"removedPage"===o.type||(0,n(534177).HB)(o)}}const i=new o},948450:(e,t,n)=>{n.d(t,{A:()=>r});n(898992),n(354520),n(803949);var o=()=>n(419494);const i=["sourceInitialPage"];const r=new class{constructor(e,t){this.localStorageStore=void 0,this.localStorageStore=new(o().Ay)({namespace:e,important:t,trackingType:"performance"})}get(e){let{userId:t,key:n}=e;return this.localStorageStore.get((0,o().HW)(t,n))}set(e){let{userId:t,key:n,value:i}=e;return this.localStorageStore.set((0,o().HW)(t,n),i)}remove(e){let{userId:t,key:n}=e;return this.localStorageStore.remove((0,o().HW)(t,n))}removeAllIfNoPermission(){const{namespace:e,hasPermissionForTrackingType:t}=this.localStorageStore;if(t)return;const n=`${o().lD}${e}:`;Object.keys(localStorage).filter((e=>e.startsWith(n))).filter((e=>{const[t,n,o,r]=e.split(":");return r&&i.includes(r)})).forEach((e=>localStorage.removeItem(e)))}}(o().cd,!1)},948914:(e,t,n)=>{n.d(t,{A:()=>r,b:()=>a});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o,r=i,a=new(n(496506).default)((()=>Boolean(i.state.isShowingTabBar)),{debugName:"isShowingTabBarStore"})},949306:(e,t,n)=>{n.d(t,{Q:()=>o});const o=(0,n(340498).xh)("xmark",{default:{loader:()=>n.e(86149).then(n.bind(n,686149))},small:{loader:()=>n.e(66375).then(n.bind(n,566375))},mini:{loader:()=>n.e(14329).then(n.bind(n,514329))},large:{loader:()=>n.e(30079).then(n.bind(n,730079))}})},951177:(e,t,n)=>{n.d(t,{Df:()=>x,Ij:()=>C,Lj:()=>w,M9:()=>A,Qr:()=>T,Vz:()=>f,ZI:()=>k,a0:()=>S,dk:()=>h,hB:()=>_,n8:()=>y,uE:()=>b,x4:()=>v});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454),n(908872);var o=()=>n(584262),i=()=>n(921940),r=()=>n(416504),a=()=>n(128713),s=()=>n(134025),l=()=>n(813690),c=()=>n(179034),d=()=>n(534177),u=()=>n(780054),p=()=>n(508496),m=()=>n(909470),g=()=>n(972435);const f="paste";function v(e){let t,n;const o=new Set,i=new Set;for(const r of e){const e=r.getParentBlockStore();if(e&&"column"===e.getType()){o.add(e.id),i.add(r.id);const a=e.getParentBlockStore();if(a&&"column_list"===a.getType()){n=a.getSpaceId();const e=a.id;if(void 0===t&&(t=e),t!==e)return}}}if(t&&o.size>1&&n)return{columnListId:t,columnIds:o,blockIds:i,spaceId:n}}function h(e,t){if(!e.clipboardData)return;const n=e.clipboardData.getData("text/html");e.clipboardData.setData("text/html",`${n}${b(t)}`)}function _(e){if(!e.clipboardData)return;return y(e.clipboardData.getData("text/html"))}function b(e){return`\x3c!-- notionvc: ${e} --\x3e`}function y(e){const t=e.match(/\<\!-- notionvc\: ([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}) --\>$/i);return t?t[1]:void 0}function S(e){return`\x3c!-- notionblock: ${e.spaceId}/${e.id} --\x3e`}function w(e){const t=e.match(/\<\!-- notionblock\: ([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12})\/([0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}) --\>\<\/body\>\<\/html\>$/i);return t?{spaceId:t[1],id:t[2]}:void 0}function k(e){const{blockValues:t,rootBlock:n,getRecordValue:o,isWindows:i,markdownSerializationOptions:r,markdownLinkifyIt:s,formulasModule:l}=e;let c=a().V$(t,{...A({rootBlock:n,getRecordValue:o,formulasModule:l}),transformAnnotation:null==r?void 0:r.transformAnnotation,transformBlockMapping:null==r?void 0:r.transformBlockMapping});const d={markdown:void 0,html:void 0};if(c){c=c.replaceAll(I,"$1"),d.markdown=x(i,c);const e=s&&a().uY({...s,markdown:c});e&&(d.html=x(i,e))}return d}const I=/\[(https?:\/\/[^\])]+)\]\(\1\)/g;function x(e,t){return e?t.split("\r\n").reduce(((e,t)=>[...e,...t.split("\n")]),[]).join("\r\n"):t}function A(e){const{rootBlock:t,getRecordValue:n,formulasModule:a}=e;return{root:t,navigableBlockId:t.id,renderParentBlockId:void 0,blockId:t.id,userTimeZone:(0,r().P)(),intl:g().A.getIntl(),getRecordValue:n,numberedListCache:{},bulletedListCache:{},getRecordsWithParent:()=>[],getExportedPathToFile:e=>{let{toFileURI:t}=e;return t},getExportedRenderAsset:e=>{let{toFileURI:t}=e;return t},getExportedPathToPage:e=>{let{toPageId:t}=e;return(0,i().A)({pageId:t,pageValue:n({table:c().ev,id:t}),baseUrl:u().A.domainBaseUrl,pageVisitSource:o().y8.Export})},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName,resultCache:new Map,regExpCache:new Map,experimentService:p().default,collectionFeatureGates:(0,m().i)(),formulasModule:a}}function C(e){const{rootBlock:t,clipboardData:n,isWindows:o,fallbackGetRecordValue:i,markdownSerializationOptions:r,markdownLinkifyIt:a,formulasModule:s}=e,{tree:c,blockSelection:u}=n,p=l().xb.tryUntilFound(...u.blocks.map((e=>e.blockSubtree&&l().xb.fromRecordMap(e.blockSubtree))).filter(d().O9),i),m=c.value,g=u.blocks.map((e=>p({...m,id:e.blockId}))).filter(d().O9);return k({rootBlock:t,getRecordValue:p,blockValues:g,isWindows:o,markdownSerializationOptions:r,markdownLinkifyIt:a,formulasModule:s})}function T(e){const t=e.pointerPath[e.pointerPath.length-1];return[s().op.set({pointer:t,path:e.attributePath,args:e.copiedText})]}},951710:(e,t,n)=>{n.d(t,{e:()=>s});n(898992),n(354520),n(581454);var o=()=>n(496603),i=()=>n(534177),r=()=>n(530267);function a(e){let t=0,n=Number.MAX_SAFE_INTEGER;for(const i of e){if(!i)continue;const e=(0,r().Vo)(i),a=(0,o().qE)(e.max,0,Number.MAX_SAFE_INTEGER),s=(0,o().qE)(e.min,0,a);t=Math.max(t,s),n=Math.min(n,a)}const a=function(e){let t;for(const n of e){const e=null==n?void 0:n.scroll;switch(e){case"disallow":return"disallow";case"allow":t="allow";break;case void 0:break;default:(0,i().HB)(e)}}return t}(e);return{type:"range",min:(0,o().qE)(t,0,n),max:n,scroll:a}}function s(e){const t=e.filter(Boolean);return{width:a(t.map((e=>null==e?void 0:e.width))),height:a(t.map((e=>null==e?void 0:e.height)))}}},952412:(e,t,n)=>{n.d(t,{u:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{selectedTeamStore:void 0,subscribedUserTeamStores:void 0,collectionContextStore:void 0,isPostsCollectionLoaded:!1,setComposerStyle:void 0,teamTargetMobilePopupOpen:!1}}openTeamTargetMobilePopup(){this.setState({...this.state,teamTargetMobilePopupOpen:!0})}closeTeamTargetMobilePopup(){this.setState({...this.state,teamTargetMobilePopupOpen:!1})}reset(){this.setState({selectedTeamStore:void 0,subscribedUserTeamStores:void 0,collectionContextStore:void 0,isPostsCollectionLoaded:!1,setComposerStyle:void 0,teamTargetMobilePopupOpen:!1})}}const i=new o},952710:(e,t,n)=>{n.d(t,{dB:()=>i,sq:()=>r,t1:()=>a});var o=()=>n(645873);const i={trialActions:new(o().O2)("trialActions",(()=>n.e(77970).then(n.bind(n,655765)))),TrialInfoModal:new(o().O2)("TrialInfoModal",(()=>n.e(40432).then(n.bind(n,735751)))),TrialEndModal:new(o().O2)("TrialEndModal",(()=>Promise.all([n.e(48779),n.e(24077),n.e(87771)]).then(n.bind(n,6286))))},r=(0,o()._h)(i.TrialInfoModal,(e=>e.TrialInfoModal)),a=(0,o()._h)(i.TrialEndModal,(e=>e.TrialEndModal))},953006:(e,t,n)=>{n.d(t,{k:()=>b});n(581454);var o=n(296540),i=()=>n(401497),r=()=>n(212050),a=()=>n(358373),s=()=>n(959013),l=()=>n(100622),c=()=>n(534177),d=()=>n(972435),u=()=>n(735824),p=()=>n(962730),m=()=>n(377586),g=()=>n(704152),f=()=>n(285790),v=()=>n(897119),h=()=>n(859428),_=n(474848);function b(e){const{origin:t,onCloseClick:n,header:b,headerStyle:C,content:T,contentStyle:M,finalButtonContent:P,placementToOrigin:B,alignmentToOrigin:R=p().C.Start,pointerDotSize:E=6,pointerPosition:D="22.5%",pointerLength:N=18,pointerOffset:L=0,showPointer:O=!0,enableMouseCapture:U=!1,shouldDismissUponOutsideClick:F,numSteps:V,currStepIndex:j,onPrimaryButtonClick:z,onBackButtonClick:H,onSkipButtonClick:W,skipButtonContent:q,nextButtonContent:K,style:G,hideActions:$,hideCloseButton:Y,onRequestAnimationFrameForDebugging:Q,hideInsteadOfFlip:Z}=e,X=(0,o.useMemo)((()=>"function"==typeof t?t:t?()=>t.current:void 0),[t]),J=(0,u().r)({getElement:X,onRequestAnimationFrameForDebugging:Q}),ee=V&&V>1,te=!1===ee||ee&&j===V-1,ne=!1===ee||ee&&0===j,oe=(0,i().IS)((e=>{const t=(0,h().n)(e,!1),n="dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[900],o=O?N-8+L:L;return{tooltip:{...t,background:n,padding:"10px 10px 12px 12px",overflow:"visible",[S[B]]:o,maxWidth:280,borderRadius:12,...G},hoveredStyle:{background:l().XA.dark.translucentGray[200]},newBadge:{marginLeft:0,color:e.text.contrastPrimary,fontWeight:500,background:void 0,padding:"2px 0px",marginBottom:3},headerAndClose:{display:"flex",justifyContent:"space-between",...null===T?{}:{marginBottom:4}},header:{fontWeight:500,color:e.text.contrastPrimary,display:"flex",alignItems:"center",paddingRight:2,...C},content:{color:e.text.contrastPrimary,lineHeight:1.4,opacity:.8,fontWeight:400,paddingRight:2,...M},circle:{position:"absolute",[w[B]]:-N,[x[B]]:`calc(${D} - ${E/2}px)`,background:n,width:E,height:E,borderRadius:E},verticalLine:{position:"absolute",[w[B]]:-N,[x[B]]:`calc(${D} - 1px)`,background:n,[I[B]]:2,[k[B]]:N},closeButton:{opacity:.8,pointerEvents:"auto",height:20,width:20,background:l().XA.dark.translucentGray[300],borderRadius:"100%"},closeButtonIcon:{width:12,fill:e.text.contrastSecondary},closeButtonHoveredStyle:{background:l().XA.dark.translucentGray[400]},footer:$?{}:{marginTop:ee?12:8,display:"flex",alignItems:"center",justifyContent:ee?"space-between":"flex-end"},inactiveDot:{fill:l().XA.dark.gray[600]},dot:{width:5,marginRight:6,fill:l().XA.dark.gray[800]},backButton:{color:e.text.contrastPrimary,opacity:.8,padding:"4px 6px",borderRadius:6},nextButton:{padding:"4px 6px",borderRadius:6}}}),[O,N,L,B,G,T,C,M,D,E,$,ee]),ie=(0,o.useCallback)((()=>$?null:ne&&W?(0,_.jsx)(g().A,{onClick:W,style:oe.backButton,hoveredStyle:oe.hoveredStyle,children:(0,c().O9)(q)?q:(0,_.jsx)(s().sA,{id:"TutorialTooltip.skipButton",defaultMessage:"Skip"})}):!ne&&H?(0,_.jsx)(g().A,{onClick:H,style:oe.backButton,hoveredStyle:oe.hoveredStyle,children:(0,_.jsx)(s().sA,{id:"TutorialTooltip.backButton",defaultMessage:"Back"})}):void 0),[ne,H,W,q,$,oe]);return(0,_.jsx)(v().Ay,{popupType:m().n.Popup,originRect:J,open:Boolean(J),placementToOrigin:y[B],alignmentToOrigin:R,preventCaptureEsc:!0,preventPointerEvents:!1,disableMouseCapture:!U,hideInsteadOfFlip:Z,render:()=>(0,_.jsxs)("div",{style:{position:"relative"},children:[O&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{style:oe.circle}),(0,_.jsx)("div",{style:oe.verticalLine})]}),(0,_.jsxs)("div",{style:oe.headerAndClose,children:[b&&(0,_.jsx)("div",{style:oe.header,children:b}),!Boolean(Y)&&(0,_.jsx)(f().A,{icon:r().u,style:oe.closeButton,iconStyle:oe.closeButtonIcon,onClick:n,hoveredStyle:oe.closeButtonHoveredStyle,ariaLabel:d().A.formatMessage(A.closeButtonAriaLabel)})]}),(0,_.jsx)("div",{style:oe.content,children:T}),(ee||z)&&(0,_.jsxs)("div",{style:oe.footer,children:[ee&&(0,_.jsx)("div",{style:{display:"flex",alignItems:"center"},children:[...Array(V)].map(((e,t)=>{let n=oe.dot;return n=t===j?{...n}:{...n,...oe.inactiveDot},t===V-1&&(n={...n,marginRight:0}),(0,_.jsx)(o.Fragment,{children:(0,a().v)(n)},t)}))}),(0,_.jsxs)("div",{style:{pointerEvents:"auto",display:"flex"},children:[ie(),z&&!$&&(0,_.jsx)(g().A,{onClick:z,style:oe.nextButton,hoveredStyle:oe.hoveredStyle,children:te?(0,c().O9)(P)?P:(0,_.jsx)(s().sA,{id:"TutorialTooltip.doneButton",defaultMessage:"Done"}):(0,c().O9)(K)?K:(0,_.jsx)(s().sA,{id:"TutorialTooltip.nextButton",defaultMessage:"Next"})})]})]})]}),enableOutsideClickDismiss:F,onDismiss:F?n:void 0,style:oe.tooltip})}const y={top:p().W.Top,bottom:p().W.Bottom,right:p().W.Right,left:p().W.Left},S={top:"marginBottom",bottom:"marginTop",right:"marginLeft",left:"marginRight"},w={top:"bottom",bottom:"top",right:"left",left:"right"},k={top:"height",bottom:"height",right:"width",left:"width"},I={top:"width",bottom:"width",right:"height",left:"height"},x={top:"left",bottom:"left",right:"top",left:"top"},A=(0,s().YK)({closeButtonAriaLabel:{id:"TutorialTooltip.closeButton.ariaLabel",defaultMessage:"Close tooltip"}})},953418:(e,t,n)=>{n.d(t,{$v:()=>y,HN:()=>_,NM:()=>c,Np:()=>I,Rt:()=>b,T8:()=>d,VG:()=>h,WZ:()=>w,gT:()=>A,gi:()=>l,sl:()=>u,uf:()=>p,vB:()=>x,vq:()=>m,wU:()=>k,z4:()=>v});n(944114);var o=()=>n(534177),i=()=>n(574012),r=()=>n(38337);const a=8,s={auto:!0,scroll:!0};function l(e){return e&&e instanceof HTMLElement?e:e&&e.parentElement?e.parentElement:void 0}function c(e){const t=l(e);if(t)return f(t,r().RYy)}function d(e){const t=l(e);if(t)return f(t,r().Dkd)}function u(e){let t=e;const n=[];do{const e=window.getComputedStyle(t);e&&(e.overflow&&s[e.overflow]||e.overflowY&&s[e.overflowY]||e.overflowX&&s[e.overflowX])&&n.push(t),t=t.parentElement}while(t);return n}function p(e){const{environment:t,el:n,windowHeight:o,minEdgeDist:r=a}=e,s=c(n);if(!s||!s.getBoundingClientRect)return;const l=n.getBoundingClientRect(),d=s.getBoundingClientRect(),u=o-i().A.mobileNativeBottomPadding(t),p=Math.min(d.bottom,u);l.top<d.top?s.scrollTop=s.scrollTop-(d.top-l.top)-r:l.bottom>p&&(s.scrollTop=s.scrollTop+(l.bottom-p)+r)}function m(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{edgeDist:0,animate:!1};const n=c(e),{animate:o,edgeDist:i}=t;if(!n||!n.getBoundingClientRect)return;const r=e.getBoundingClientRect(),a=n.getBoundingClientRect();if(o){const e=500,t=n.scrollTop-(a.top-r.top)-i,o=n.scrollTop,s=t-o,l=16;let c=0;const d=()=>{var t,i,r;c+=l,n.scrollTop=(t=c,i=o,r=s,(t/=e/2)<1?r/2*t*t+i:-r/2*(--t*(t-2)-1)+i),c<e&&requestAnimationFrame(d)};d()}else n.scrollTop=n.scrollTop-(a.top-r.top)-i}function g(e){return e&&e.overflowY&&s[e.overflowY]}function f(e,t){if(!e)return;let n=e;if(n)do{const e=window.getComputedStyle(n);if((n.classList&&n.classList.contains(r().XGs)&&n.classList.contains(t)||g(e))&&(!n.classList||!n.classList.contains(r().Vac)))return n;n=n.parentElement||void 0}while(n);return document.body}function v(e){return e.device.isDesktop&&!e.device.isSafari}function h(e){let{element:t,environment:n,options:o}=e;null==t||t.scrollTo({...o,behavior:!n||n.device.isMobile||n.device.isSafari?"auto":o.behavior})}function _(e){let{element:t,environment:n,options:o}=e;if(null!=n&&n.device.isIOS)return h({element:t,environment:n,options:{...o,top:o.top?((null==t?void 0:t.scrollTop)??0)+o.top:void 0,left:o.left?((null==t?void 0:t.scrollLeft)??0)+o.left:void 0}});null==t||t.scrollBy({...o,behavior:!n||n.device.isMobile||n.device.isSafari?"auto":o.behavior})}function b(e){let{element:t,environment:n,options:o}=e;o&&"boolean"!=typeof o?null==t||t.scrollIntoView({...o,behavior:!n||n.device.isMobile||n.device.isSafari?"auto":o.behavior}):null==t||t.scrollIntoView(o)}function y(e){const{element:t,environment:n,additionalPadding:o={},blockAlignment:i,inlineAlignment:r,behavior:a="smooth",verticalVisibilityRequirement:s="topAndBottomVisible",horizontalVisibilityRequirement:l="leftAndRightVisible"}=e,{top:c=0,bottom:d=0,left:p=0,right:m=0}=o,g=u(t)[0],f=t.getBoundingClientRect(),v=f.top-c,_=f.bottom+d,b=f.left-p,y=f.right+m;if(!g)return;const w=g.getBoundingClientRect(),k=v>=w.top,I=_<=w.bottom,x=b>=w.left,A=y<=w.right,C=k&&I,T=x&&A;if(("topAndBottomVisible"===s?C:"topVisible"===s?k:"bottomVisible"!==s||I)&&("leftAndRightVisible"===l?T:"leftVisible"===l?x:"rightVisible"!==l||A))return;const M=g.scrollTop,P=g.scrollTop+g.clientHeight,B=g.scrollLeft,R=g.scrollLeft+g.clientWidth;h({element:g,environment:n,options:{top:S({start:C?M:M+(v-w.top),end:C?P:P+(_-w.bottom),scrollStart:M,scrollEnd:P,containerSize:g.clientHeight,alignment:i??"nearest"}),left:S({start:T?B:B+(b-w.left),end:T?R:R+(y-w.right),scrollStart:B,scrollEnd:R,containerSize:g.clientWidth,alignment:r??"nearest"}),behavior:a}})}function S(e){let{start:t,end:n,scrollStart:i,scrollEnd:r,containerSize:a,alignment:s}=e;switch(s){case"start":return t;case"end":return n-a;case"center":return t+(n-t)/2-a/2;case"nearest":const e=n-t>a,l=Math.abs(t-i)<Math.abs(n-r);return e||l?t:n-a;default:(0,o().HB)(s)}}function w(e){return e.scrollHeight-(e.scrollTop+e.clientHeight)}function k(e){return Math.abs(w(e))<10}function I(e){return Math.abs(e.scrollTop)<10}function x(e){return e.scrollTop<=0}function A(e,t){let n=null;const o=e.scrollTop,i=e.scrollLeft;let r=o,a=i;const s=setTimeout((()=>{n&&(cancelAnimationFrame(n),n=null,t())}),500),l=()=>{n=null,e.scrollTop===r&&e.scrollTop!==o&&e.scrollLeft===a&&e.scrollLeft!==i?(clearTimeout(s),t()):n=requestAnimationFrame(l),r=e.scrollTop,a=e.scrollLeft};n=requestAnimationFrame(l)}},953448:(e,t,n)=>{n.d(t,{J:()=>d});var o=n(296540),i=()=>n(884107),r=()=>n(659602),a=()=>n(335722),s=()=>n(855801),l=()=>n(862292),c=()=>n(645873);function d(){const{value:e}=(0,c().fJ)(i().R.clipboardActions),{value:t}=(0,c().fJ)(s().VI.duplicateActions),{value:n}=(0,c().fJ)(l().T.formulas),{value:d}=(0,c().fJ)(r().g),{value:u}=(0,c().fJ)(a().S);return(0,o.useMemo)((()=>({clipboardActions:e,duplicateActions:t,formulasModule:n,markdownLinkifyIt:d,tinyMceMicrosoftWordPasteFilter:u})),[e,t,n,d,u])}},953624:(e,t,n)=>{n.d(t,{k:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("thinCheckboxCircle",{viewBox:"0 0 22 23",svg:(0,o.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"1"})})},955363:(e,t,n)=>{n.r(t),n.d(t,{arrowDiagonalUpRightIcon:()=>i,iconDefinition:()=>o});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M15.575 5.05a.625.625 0 0 0-.625-.625H7.313a.625.625 0 1 0 0 1.25h6.128L4.596 14.52a.617.617 0 0 0 .012.872c.244.244.635.25.872.012l8.845-8.845v6.128a.625.625 0 1 0 1.25 0z"})},i=(0,n(340498).wt)("arrowDiagonalUpRight",o)},955930:(e,t,n)=>{n.d(t,{$K:()=>h,Ex:()=>y,br:()=>f,nD:()=>v,sP:()=>b});n(944114),n(898992),n(354520),n(908872),n(737550),n(296540);var o=()=>n(68263),i=()=>n(854150),r=()=>n(468006),a=()=>n(959013),s=()=>n(108944),l=()=>n(630116),c=()=>n(946141),d=()=>n(901389),u=()=>n(722101),p=()=>n(246826),m=()=>n(751156),g=n(474848);function f(e){const{environment:t,currentSpaceViewStore:n,orderedTeamIds:o,userAction:r}=e;if(m().createAndCommit({userAction:r,environment:t,canUndo:!0,perform:e=>{p().zv({store:n,data:{joined_teams:o},transaction:e})}}),e.isExplicitUserAction){const{key:o,startPosition:r,endPosition:a}=e.dropArgs,s=l().h4.createChildStore(n,{table:i().yK,id:o});c().US(t,{store:s,start_position:r,end_position:a})}}async function v(e){let{transaction:t,...n}=e;const o=await h(n);if("user_cancelled_move"===o)return"user_cancelled_move";if(0===o.length)return"not_cleared";for(const{blockStore:i,permissions:r}of o)p().zv({store:i,data:{permissions:r},transaction:t});return"cleared"}async function h(e){const{moveToTeam:t,permissionsUpdateItems:n}=function(e){let{moveStores:t,moveTargetStore:n}=e;const o=t.reduce(((e,t)=>(e[t.id]=(0,s().Uo)(t),e)),{}),i=(0,s().Uo)(n),r=[];for(const a of t){const e=_({blockStore:a,moveFromTeam:o[a.id],moveToTeam:i});e&&r.push(e)}return{moveToTeam:i,permissionsUpdateItems:r}}(e);if(0===n.length)return[];const o=await async function(e){let{numPagesMoved:t,moveToTeam:n,permissionsUpdateItems:o}=e;if(0===o.length)return!0;if(!n)return!0;const i=n.getName(),r=o.some((e=>{let{isRemovingRestricted:t}=e;return!0===t})),s=r&&(0,g.jsx)(a().sA,{id:"teamActions.confirmMoveToTeam.removeRestrictedDescription",defaultMessage:" {numPagesMoved, plural, one {This page} other {These pages}} will no longer have restricted access.",values:{numPagesMoved:t}});return(await d().Gh({mode:"wide",message:(0,g.jsx)(a().sA,{defaultMessage:"Move {numPagesMoved, plural, one {this page} other {these pages}} to {moveToTeamName}?",id:"teamActions.confirmMoveToTeam.title",values:{moveToTeamName:i,numPagesMoved:t}}),description:(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(a().sA,{id:"teamActions.confirmMoveFromTeam.description",defaultMessage:"This will transfer the permissions on {numPagesMoved, plural, one {this page} other {these pages}} to members of {moveToTeamName}. ",values:{moveToTeamName:i,numPagesMoved:t}}),s]})})).accept}({numPagesMoved:e.moveStores.length,moveToTeam:t,permissionsUpdateItems:n});return o?n:"user_cancelled_move"}function _(e){let{blockStore:t,moveFromTeam:n,moveToTeam:i}=e;if(void 0===n&&void 0===i)return;if((null==n?void 0:n.id)===(null==i?void 0:i.id))return;const a=t.getPermissionItems();let s=!1;const l=a.filter((e=>(0,o().T6)(e)?(s=!0,!1):!(0,o().Lg)(e)&&(!n||!(0,r().O1)(e,n.id)&&!(0,r().Jt)(e,n.id))));return a.length!==l.length?{blockStore:t,permissions:l,moveFromTeam:n,isRemovingRestricted:s}:void 0}function b(e){const{store:t,teamStore:n,transaction:o,location:i}=e,r=n.getTeamPagesStore(),a=l().Bv.createChildStore(r,t.pointer);"append"===i.type?u().BC({parentStore:r,appendStore:a,transaction:o,after:i.after}):"prepend"===i.type&&u().Hs({parentStore:r,prependStore:a,transaction:o,before:i.before})}function y(e){const{store:t,teamStore:n,transaction:o}=e,i=n.getTeamPagesStore(),r=l().Bv.createChildStore(i,t.pointer);u().TF({childToRemoveStore:r,parentStore:i,transaction:o})}},956152:(e,t,n)=>{n.d(t,{C:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("linkToPage",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{fillRule:"evenodd",d:"M6.25 3C5.56 3 5 3.56 5 4.25v11.5c0 .69.56 1.25 1.25 1.25H7a.75.75 0 010 1.5h-.75a2.75 2.75 0 01-2.75-2.75V4.25A2.75 2.75 0 016.25 1.5h4.086c.464 0 .909.184 1.237.513l4.414 4.414c.329.328.513.773.513 1.237V9A.75.75 0 0115 9v-.5h-2.75A2.75 2.75 0 019.5 5.75V3H6.25zM11 5.75V3.56L14.44 7h-2.19C11.56 7 11 6.44 11 5.75z",clipRule:"evenodd"}),(0,o.jsx)("path",{d:"M16.5 16.036a.75.75 0 01-1.5 0V13.56l-4.72 4.72a.75.75 0 11-1.06-1.061l4.72-4.72h-2.476a.75.75 0 010-1.5h4.286a.75.75 0 01.75.75v4.286z"})]})})},957416:(e,t,n)=>{n.d(t,{P:()=>p});var o=()=>n(427704),i=()=>n(763824),r=()=>n(939768),a=()=>n(780054),s=()=>n(972435),l=()=>n(508496),c=()=>n(901389),d=()=>n(705540);const u=(0,n(959013).YK)({allowPopup:{id:"authAction.authorize.popupBlocked",defaultMessage:"It looks like your browser is currently blocking popups. Please allow pop-ups to continue"},dismissButtonLabel:{defaultMessage:"OK",id:"dialog.dismissButton.label"}});async function p(e,t){const{width:n,height:p,url:g,titleMessage:f}=t,v=s().A.formatMessage(f);if(e.device.isElectron)return d().openOauthPopup({width:n,height:p,url:g,title:v});const h=e.device.isMobile,_=void 0!==window.screenX?window.screenX:window.screenLeft,b=void 0!==window.screenY?window.screenY:window.screenTop,y=void 0!==window.outerWidth?window.outerWidth:document.documentElement.clientWidth,S=void 0!==window.outerHeight?window.outerHeight:document.documentElement.clientHeight-22,w=h?0:n,k=h?0:p;let I="toolbar=0,menubar=0,location=0";0!==w&&(I+=`,width=${w}`),0!==k&&(I+=`,height=${k}`),I+=`,left=${(_<0?window.screen.width+_:_)+(y-w)/2}`,I+=`,top=${b+(S-k)/2.5}`,I+=",scrollbars=1";const x=m()?(0,r().Gm)({url:`${a().A.domainBaseUrl}${o().JZ.verifyNoPopupBlockerHtmlAndRedirect}`,query:{redirectUri:g}}):g,A=window.open(x,v,I);if(A)A.focus();else if(m())return void c().ui({showCancel:!1,keepFocus:!1,message:s().A.formatMessage(u.allowPopup),items:[{label:s().A.formatMessage(u.dismissButtonLabel),onAccept:()=>{}}]});const C=i().yX();if(x.includes("evernotepopupredirect")&&l().default.checkGate({gateName:"is_evernote_authpopup_closing_fix_enabled"})){const e=performance.now()+6e4,t=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;C.resolve(t)}},n=setInterval((()=>{const t=performance.now(),n=localStorage.getItem("externalAuthCallback");n?C.resolve(n):A&&A.closed&&e<t&&C.resolve(void 0)}),300);window.addEventListener("message",t,!1);const o=await C.promise;return window.removeEventListener("message",t,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(n),A&&A.close(),window.focus(),o}{const e=e=>{if(e&&e.data&&"popup-callback"===e.data.type){const t=e.data.url;C.resolve(t)}},t=setInterval((()=>{const e=localStorage.getItem("externalAuthCallback");e?C.resolve(e):A&&A.closed&&C.resolve(void 0)}),300);window.addEventListener("message",e,!1);const n=await C.promise;return window.removeEventListener("message",e,!1),localStorage.removeItem("externalAuthCallback"),clearInterval(t),A&&A.close(),window.focus(),n}}function m(){return"on"===l().default.getEligibleGroup({experimentId:"show_instruction_on_auth_popup_blocked",defaultGroup:"control"})}},958163:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1,type:"image"}}}const i=new o},958378:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(296540),i=()=>n(847249),r=()=>n(401497),a=n(474848);const s=(0,n(340498).wt)("sub",{viewBox:"0 0 30 30",svg:(0,a.jsx)("path",{d:"M5 3V20H23.187L19.594 16.406L21 15L27 21L21 27L19.594 25.594L23.187 22H3V3H5Z"})});var l=()=>n(96689),c=()=>n(854150),d=()=>n(640653),u=()=>n(630116),p=()=>n(614505),m=()=>n(128295),g=()=>n(16006);const f=o.forwardRef((function(e,t){const{store:o,placeholder:s,hidePath:l,caption:c,titlePrefix:d,isSubpage:p,showVerifiedPageBadge:f}=e,h=(0,i().K8)((()=>c||!l&&!(o instanceof u().h4)&&(0,m().a6)(o)&&(0,a.jsx)(m().Ay,{store:o,showFullPathInTooltip:!0})),[c,l,o]),_=(0,i().K8)((()=>{if(!f)return!1;return o instanceof u().Bv&&(0,n(931075).sN)(o.getModel())}),[f,o]),b=(0,r().IS)((e=>({verifiedPageIcon:{height:12,width:12,fill:e.text.uiBluePrimary,marginLeft:4}})),[]);return(0,a.jsx)(n(760217).A,{...e,ref:t,title:d?(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsxs)("div",{style:{marginRight:"4px"},children:[d,":"]}),(0,a.jsx)(g().A,{store:o,placeholder:s})]}):(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,a.jsx)(g().A,{store:o,placeholder:s}),_&&(0,n(372160).E)(b.verifiedPageIcon)]}),icon:(0,a.jsx)(v,{store:o,isSubpage:p}),mobileIconStyle:{flex:"0 0 auto"},caption:h,className:"notranslate"})}));function v(e){let{store:t,isSubpage:m}=e;const g=(0,r().DP)(),f=(0,n(484714).v3)(),{isMobile:v}=f.device,h=(0,i().K8)((()=>t instanceof u().SL?(0,d().c2)(f,t):t.getIcon()),[f,t]),_=(0,i().K8)((()=>t instanceof u().Bv&&t.isEmptyPage()),[t]),b=(0,i().K8)((()=>function(e,t){switch(e.table){case l().NX:return(0,d().GK)(t,e);case c().yK:return e.getName();default:return}}(t,f)),[f,t]);return m?(0,a.jsxs)(o.Fragment,{children:[s({width:v?17:14,fill:g.lightIconColor,marginLeft:4,marginRight:v?12:8}),(0,a.jsx)(p().B,{disabled:!0,icon:h,isEmptyPage:_,title:b,size:f.device.isMobile?24:20})]}):(0,a.jsx)(p().B,{disabled:!0,icon:h,isEmptyPage:_,title:b,size:f.device.isMobile?24:20})}},958637:(e,t,n)=>{n.d(t,{k:()=>l,p:()=>s});var o=n(296540),i=()=>n(847249),r=()=>n(508496),a=n(474848);const s=(0,o.createContext)(void 0);function l(e){const t=(0,i().K8)((()=>{const e=r().default.getFeatureGateContextDataStores();return{withExposureLogging:e.withExposureLoggingStore.state,withoutExposureLogging:e.withoutExposureLoggingStore.state}}),[]);return(0,a.jsx)(s.Provider,{value:t,children:e.children})}s.displayName="FeatureGateContext"},960701:(e,t,n)=>{n.d(t,{d:()=>d});n(581454);var o=n(296540),i=()=>n(792485),r=()=>n(847249),a=()=>n(179034),s=()=>n(125958),l=()=>n(963589),c=()=>n(630116);function d(e){const{parentStore:t}=e,n=(0,i().S)(),d=e.pageStore??(null==n?void 0:n.pageStore),u=t.getRecordModel,p=(0,l().X)("toc_nested_headings"),m=(0,r().K8)((()=>d?s().T(d.id,u,p):[]),[d,u,p]),g=(0,o.useMemo)((()=>m.map((e=>c().Bv.createChildStore(t,{table:a().ev,id:e})))),[t,m]);return{navigableAncestorStore:d,headerStores:g}}},960715:(e,t,n)=>{n.d(t,{D3:()=>c,RO:()=>r,mw:()=>s,qq:()=>l});const o=9999,i={xxs:4,xs:4,sm:6,md:6,lg:6,xl:8},r={xxs:16,xs:20,sm:24,md:28,lg:32,xl:36},a={xxs:12,xs:12,sm:14,md:14,lg:14,xl:14},s={xxs:4,xs:6,sm:6,md:8,lg:12,xl:12};function l(e){let{size:t="md",shape:n="default",hasIconOnly:l}=e;const c="lg"===t||"xl"===t?2:4,d="pill"===n?s[t]+c:s[t],u={display:"inline-flex",alignItems:"center",height:r[t],paddingRight:d,paddingLeft:d,borderRadius:"pill"===n?o:i[t],whiteSpace:"nowrap",fontSize:a[t]};return l&&(u.width=r[t],u.justifyContent="center",u.paddingRight=0,u.paddingLeft=0),u}function c(e){let{size:t="md",hasIconOnly:n}=e;return{width:14,height:14,marginRight:n?0:"xxs"===t||"xs"===t?2:"sm"===t?4:6,fill:"currentColor"}}},962036:(e,t,n)=>{n.d(t,{A:()=>d});n(296540);var o=()=>n(484714),i=()=>n(401497),r=()=>n(133033),a=()=>n(148024),s=()=>n(187485),l=()=>n(678553),c=n(474848);function d(e){const t=(0,o().v3)();return(0,c.jsx)(s().A,{href:e.href,external:!0,onClick:()=>a().FH(t,{from:e.analyticsFrom}),children:(0,c.jsx)(l().Ay,{icon:!e.left&&(0,c.jsx)(p,{left:e.left}),title:(0,c.jsx)(u,{title:e.title,left:e.left})})})}function u(e){const t=(0,o().WS)(),n=(0,i().IS)((e=>({title:{fontSize:t?14:12,verticalAlign:1,color:e.text.tertiary}})),[t]);return e.left?(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("span",{style:{...n.title,marginRight:"auto"},children:e.left}),(0,c.jsx)(p,{left:e.left}),(0,c.jsx)("span",{style:n.title,children:e.title})]}):(0,c.jsx)("span",{style:n.title,children:e.title})}function p(e){let{left:t}=e;const n=(0,i().DP)(),a=(0,o().WS)();return(0,r().$)({width:a?16:14,fill:n.lightIconColor,marginRight:t?6:0})}},962730:(e,t,n)=>{n.d(t,{C:()=>i,W:()=>o});let o=function(e){return e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Left=2]="Left",e[e.Right=3]="Right",e[e.Center=4]="Center",e}({}),i=function(e){return e[e.Start=0]="Start",e[e.Center=1]="Center",e[e.End=2]="End",e}({})},962845:(e,t,n)=>{n.d(t,{$W:()=>x,BO:()=>P,GI:()=>D,Tp:()=>R,ZS:()=>B,_V:()=>F,cR:()=>w,fF:()=>U,hn:()=>L,n3:()=>C,w_:()=>O,xk:()=>I});n(16280),n(898992),n(354520),n(672577),n(581454);var o=()=>n(507707),i=()=>n(624919),r=()=>n(700500),a=()=>n(857639),s=()=>n(358547),l=()=>n(842989),c=()=>n(301421),d=()=>n(695625),u=()=>n(155959),p=()=>n(148832),m=()=>n(921855),g=()=>n(295740),f=()=>n(231722),v=()=>n(20313),h=()=>n(969197),_=()=>n(906537),b=()=>n(792002);const y=!1;function S(){if(y){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.warn("multiTextSelectionHelpers:",...t)}}function w(e,t){const n=(0,f().H7)(t);return n||a().rateLimitedLog({from:"multiTextSelectionHelpers",type:"TODO",level:"warning",data:{name:e,message:e}}),n}const k={startIndex:0,endIndex:1/0};function I(e,t){const{start:n,end:i}=e;if((0,f().KP)(e))return n.store===t?"contained-within":void 0;if(n.store===t)return"starts-at";if(i.store===t)return"ends-at";const r=c().n.findNodeFromStore(n.store),a=c().n.findNodeFromStore(i.store),s=c().n.findNodeFromStore(t);return r&&a&&s&&1===(0,o().A)(s,r)&&-1===(0,o().A)(s,a)?"covers":void 0}function x(e){const{start:t,end:n}=e,o=(0,f().H7)(e);if(o){const e=c().n.findEditableWithStore(o.store);if(e){return[{editable:e,...o}]}return[]}const i=A(t),r=A(n);if(!i||!r){const e=i||r;if(!e)return[];return[{editable:e.editable,store:e.position.store,selection:{startIndex:e.position.index,endIndex:e.position.index}}]}const a=(0,b().y1)(i.editable).filter((e=>{var t,n,o;return(null===(t=e.contentEditableContext)||void 0===t?void 0:t.id)===(null===(n=i.editable.contentEditableContext)||void 0===n?void 0:n.id)&&(null===(o=e.getNode())||void 0===o?void 0:o.isConnected)})),s=a.findIndex((e=>e.props.store.id===i.editable.props.store.id)),l=a.findIndex((e=>e.props.store.id===r.editable.props.store.id));if(-1===s){throw Object.assign(new Error("Start editable not found in DOM order array"),i)}if(-1===l){throw Object.assign(new Error("End editable not found in DOM order array"),r)}if(!(s<=l))throw new Error(`Start (index ${s}) must be before end (index ${l}) in DOM`);const d=a.slice(s,l+1);return d.map(((e,t)=>{if(0===t){const{position:t}=i;return{editable:e,store:e.props.store,selection:{startIndex:t.index,endIndex:1/0}}}if(t===d.length-1){const{position:t}=r;return{editable:e,store:e.props.store,selection:{startIndex:0,endIndex:t.index}}}return{editable:e,store:e.props.store,selection:k}}))}function A(e){const t=c().n.findEditableWithStore(e.store);if(t)return{editable:t,position:e}}function C(e){var t;const{range:n,contentEditableLeafRegistry:o,allowInvisibleEndSelection:i,constraintToContentEditableRootNode:r,avoidEdgesOfContentEditableRoot:a}=e;if(!n)return;if(r&&r!==(0,g().sr)(n.commonAncestorContainer))return;if(a&&(0,g().Hz)(n.commonAncestorContainer))return void S("not snapping - range is at edge of content editable root");let s,l=!1,c=o.getParentContentEditableLeaf(n.startContainer);c||(s??=o.getByDOMOrder(),c=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:s,containerOffset:{container:n.startContainer,offset:n.startOffset},snapTowards:"end"}),l=!0,S("snapped start",n.startContainer,n.startOffset,"to",c));let d=o.getParentContentEditableLeaf(n.endContainer);if(!d||!i&&d&&0===n.endOffset&&n.endContainer===d.node&&d.node!==(null===(t=c)||void 0===t?void 0:t.node)){s??=o.getByDOMOrder();const e=s.findIndex((e=>{var t;let{node:n}=e;return n===(null===(t=c)||void 0===t?void 0:t.node)})),t=-1!==e?s.slice(e):s,r=d&&!i?t.filter((e=>{var t;let{node:n}=e;return n!==(null===(t=d)||void 0===t?void 0:t.node)})):t;d=(0,_().snapContainerOffsetToNode)({nodesInDomOrder:r,containerOffset:{container:n.endContainer,offset:n.endOffset},snapTowards:"start"}),l=!0,S("snapped end",n.endContainer,n.endOffset,"inside",t,"to",d)}if(!c||!d){const e=c??d;if(!e)return;return{start:e,end:e,forceEmit:!0}}return{start:c,end:d,forceEmit:l}}function T(e){const t=e.getTitleStore();if(t){if(c().n.findNodeFromStore(t))return t}}function M(e){for(const t of e){const e=T(t);if(e&&t.getType()!==r().xd.code)return{blockStore:t,titleStore:e}}}function P(e){const t=M(e);if(!t)return;const n=function(e){return M([...e].reverse())}(e);if(!n)return;const o=(0,v().Ag)({includeNonSelectableListContainer:!1,rootStore:t.blockStore.getHighestContentBlockUIAncestor()});if(!o)return;const i=(0,v().mP)(n.blockStore,o);if(!i)return;let r;for(const a of(0,s().Y_)(i)){const e=a.value.store.getTitleStore();if(e){const t=(0,b().s6)(e);t&&(r={store:e,index:t.endIndex})}}if(!r)return;return{start:{store:t.titleStore,index:0},end:r}}function B(e){var t;const{multiSelection:n,filterCommonAncestors:o,focus:i}=e;if((0,f().KP)(n)){var a;let e=(0,h().T)(n.start.store);if((null===(a=e)||void 0===a?void 0:a.getType())===r().xd.tableRow){var l;const t=null===(l=e.getRecordStoreUIParent())||void 0===l?void 0:l.recordStoreUIParentStore;t&&t instanceof p().B&&(e=t)}if(!e)return;return{stores:[e]}}const c=R({multiSelection:n,includeNonSelectable:!1});if(!c)return;const d=o?(0,s().Xi)(c.treeRange):(0,s().Lu)(c.treeRange),u=Array.from(d),m=u[0],g=null==m||null===(t=m.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id,v=u.filter((e=>{var t;return(null===(t=e.value.component)||void 0===t||null===(t=t.getContentEditableContext())||void 0===t?void 0:t.id)===g||e.value.store.getType()===r().xd.table})).map((e=>e.value.store));return{stores:v,pivot:"end"===i||i===n.end||void 0===i&&!(0,_().selectionIsBackwards)()?v[v.length-1]:v[0]}}function R(e){const{multiSelection:t,includeNonSelectable:n}=e,o=(0,h().T)(t.start.store),i=(0,h().T)(t.end.store);if(!o||!i)return;const r=o.getHighestContentBlockUIAncestor(),a=d().T.findSelectableFromStore(o),s=(0,v().Ag)({includeNonSelectableListContainer:n,rootStore:r,container:null==a?void 0:a.getContextSelectableContainer()});if(!s)return;const c=(0,v().Xs)(o,[s]),u=(0,v().Xs)(i,[s]);if(!c||!u)return;const p=l().W.fromNearestCommonAncestor(c,u);return p?{tree:s,treeRange:p}:void 0}function E(e){const{leafNode:t,rangeContainer:n,defaultEndIndex:i}=e;S("Range outside of leaf, attempting to recover",t,n);const r=(0,o().A)(t,n);let a=0;if(-1===r)a=i;else{if(1!==r)throw new Error("Invalid relativeStartPosition. index should not be inside leaf");a=0}return{index:a,forceEmit:!0,afterEndOfLine:!1}}function D(e){var t,n,o,i;const{range:r,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,avoidEdgesOfContentEditableRoot:l}=e;if(!r)return;let d,u,p=!1;if(a&&a.hasMembers()){const e=C({range:r,contentEditableLeafRegistry:a,allowInvisibleEndSelection:s,constraintToContentEditableRootNode:void 0,avoidEdgesOfContentEditableRoot:l});e&&(d=e.start.node,u=e.end.node,p||=e.forceEmit),S("getMultiTextSelectionFromRange: snapped to leafs",e,r)}else d=(0,g().sT)(r.startContainer),u=(0,g().sT)(r.endContainer),S("getMultiTextSelectionFromRange: found parent leafs",d,u,r);const f=d?c().n.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===d})):void 0,v=u?c().n.find((e=>{var t;return(null===(t=e.getContentEditableLeaf())||void 0===t?void 0:t.getNode())===u})):void 0;if(!f||!v)return void S("getMultiTextSelectionFromRange: missing editable",{startMissing:!f,endMissing:!v});const h=!r.collapsed,_=f.props.store;let y=v.props.store;const{startContainer:w,endContainer:k}=r,I=(null===(t=(n=v.props).getEndSelection)||void 0===t?void 0:t.call(n).endIndex)??0,x=(null===(o=d)||void 0===o?void 0:o.contains(r.startContainer))&&(0,m().V_)(r.startContainer,r.startOffset)||E({leafNode:d,rangeContainer:w,defaultEndIndex:I});let A=(null===(i=u)||void 0===i?void 0:i.contains(r.endContainer))&&(0,m().V_)(r.endContainer,r.endOffset)||E({leafNode:u,rangeContainer:k,defaultEndIndex:I});if(h&&A.afterEndOfLine){const e=(0,b().J3)(y);e&&(S("end after EOL",r.endContainer,r.endOffset),y=e,A={index:0,forceEmit:!0,afterEndOfLine:!1})}return{multiSelection:{start:{store:_,index:x.index},end:{store:y,index:A.index}},forceEmit:p||x.forceEmit||A.forceEmit}}function N(e,t){if(!e&&!t)return 0;if(!t)return-1;if(!e)return 1;if(e.store===t.store)return e.index-t.index;const n=c().n.findNodeFromStore(e.store),i=c().n.findNodeFromStore(t.store);return(0,o().A)(n,i)}function L(e,t){const[n,o]=[e,t].sort(N);return{start:n,end:o}}function O(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,_().selectionIsBackwards)())?{focus:e.start,anchor:e.end}:{focus:e.end,anchor:e.start}}function U(e){return e.device.isAndroid?(0,u().T)("supportsAlwaysMultiTextSelectionBehavior")?"always":"gesture":"always"}function F(e){return e.isChrome&&96===parseInt(e.browserVersion,10)}(0,n(604341).exposeDebugValue)("multiTextSelectionToBlockSelection",B),(0,i().EX)({canFormat:e=>(0,f().Zq)(e),header(e){const{table:t,tr:n,td:o,object:r,CONTAINER_STYLE:a}=i().iY,s=c().n.findNodeFromStore(e.start.store),l=c().n.findNodeFromStore(e.end.store);return t(a,n({},o({},"start:"),o({},r(e.start.index)," in"),o({},r(e.start.store)),o({},r(s))),n({},o({},"end:"),o({},r(e.end.index)," in"),o({},r(e.end.store)),o({},r(l))))},hasBody:e=>!1,body:e=>null})},963575:(e,t,n)=>{n.d(t,{A:()=>o});const o={unit:8,borderRadius:4,card:{desktop:{small:{width:180,height:100},medium:{width:260,height:148},large:{width:320,height:180}},mobile:{width:"100%"}},vertical:{micro:2,tiny:4,small:8,medium:12,large:24},horizontal:{micro:2,tiny:4,small:8,medium:12,large:24}}},963589:(e,t,n)=>{n.d(t,{X:()=>r});n(16280);var o=n(296540),i=()=>n(958637);function r(e){const t=(0,o.useContext)(i().p);if(!t)throw new Error("useFeatureGate must be used within a FeatureGateContextProvider");return t.withExposureLogging(e)}},964345:(e,t,n)=>{n.d(t,{Ay:()=>g,Di:()=>l,Gq:()=>m,I1:()=>p,Y$:()=>u,b:()=>c,ei:()=>s,gZ:()=>a,kj:()=>d});var o=()=>n(496506);class i extends(()=>n(757695))().default{getInitialState(){return{audioRecorder:void 0,audioSessionBlockWriters:new Map,rootBlock:void 0,block:void 0,latestSessionId:void 0,enabled:!1,talking:!1,environment:void 0,transcribedTexts:[],blockRenderedInPage:!1,blockRenderedInPeekView:!1,loading:!1,passiveBlockMap:{},lastReceivedTranscriptionAt:void 0}}}const r=new i;(0,n(604341).exposeDebugGetter)("DictationStore",(()=>r.state));new(o().default)((()=>r.state.loading),{debugName:"DictationLoadingStore"}),new(o().default)((()=>r.state.audioRecorder),{debugName:"DictationAudioRecorderStore"});const a=new(o().default)((()=>r.state.enabled),{debugName:"DictationEnabledStore"}),s=new(o().default)((()=>r.state.rootBlock),{debugName:"DictationRootBlockStore"}),l=new(o().default)((()=>{var e;return null===(e=r.state.rootBlock)||void 0===e?void 0:e.id}),{debugName:"DictationRootBlockIdStore"}),c=new(o().default)((()=>{var e;return null===(e=r.state.block)||void 0===e?void 0:e.id}),{debugName:"DictationBlockIdStore"}),d=new(o().default)((()=>r.state.block),{debugName:"DictationBlockStore"}),u=new(o().default)((()=>r.state.blockRenderedInPage||r.state.blockRenderedInPeekView),{debugName:"DictationBlockVisibleStore"}),p=new(o().default)((()=>r.state.blockRenderedInPage),{debugName:"DictationBlockInPageStore"}),m=(new(o().default)((()=>r.state.talking),{debugName:"IsTalkingStore"}),new(o().default)((()=>r.state.blockRenderedInPeekView),{debugName:"DictationBlockInPeekViewStore"}),new(o().default)((()=>r.state.audioSessionBlockWriters.size>0),{debugName:"IsInferencingStore"})),g=((0,n(827380).A)(),r)},964447:(e,t,n)=>{n.d(t,{OI:()=>r,U$:()=>l,dT:()=>c,gO:()=>d,tI:()=>u,vE:()=>s});var o=()=>n(645873);const i={PostImportIntroPopup:new(o().O2)("PostImportInfoPopup",(async()=>await Promise.all([n.e(75134),n.e(37062)]).then(n.bind(n,745364))))},r=(0,o()._h)(i.PostImportIntroPopup,(e=>e.PostImportIntroPopup)),a={AllProjectsTooltip:new(o().O2)("AllProjectsTooltip",(async()=>await Promise.all([n.e(75134),n.e(88895)]).then(n.bind(n,843653)))),ProjectCustomizationTooltip:new(o().O2)("ProjectCustomizationTooltip",(async()=>await Promise.all([n.e(75134),n.e(88895)]).then(n.bind(n,843653)))),NavigateToProjectTasksTooltip:new(o().O2)("NavigateToProjectTasksTooltip",(async()=>await Promise.all([n.e(75134),n.e(88895)]).then(n.bind(n,843653)))),TasksDatabaseViewsTooltip:new(o().O2)("TasksDatabaseViewsTooltip",(async()=>await Promise.all([n.e(75134),n.e(88895)]).then(n.bind(n,843653)))),YourCurrentTeamspaceTooltip:new(o().O2)("YourCurrentTeamspaceTooltip",(async()=>await Promise.all([n.e(75134),n.e(88895)]).then(n.bind(n,843653))))},s=(0,o()._h)(a.AllProjectsTooltip,(e=>e.AllProjectsTooltip)),l=(0,o()._h)(a.ProjectCustomizationTooltip,(e=>e.ProjectCustomizationTooltip)),c=(0,o()._h)(a.NavigateToProjectTasksTooltip,(e=>e.NavigateToProjectTasksTooltip)),d=(0,o()._h)(a.TasksDatabaseViewsTooltip,(e=>e.TasksDatabaseViewsTooltip)),u=(0,o()._h)(a.YourCurrentTeamspaceTooltip,(e=>e.YourCurrentTeamspaceTooltip))},965378:(e,t,n)=>{n.d(t,{V:()=>l,r:()=>s});var o=()=>n(449506),i=()=>n(624307),r=()=>n(398194),a=()=>n(404141);function s(e){const{environment:t,onSubmit:n,onCancel:o}=e;t.device.isMobile?i().A.setState({open:!0}):a().A.setState({open:!0,openedFrom:"login",currentTab:"profile",defaultSubtab:void 0,highlightedSetting:void 0}),r().A.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:"",isSet:!1,onSubmit:n,onCancel:o})}async function l(e){const{environment:t,userEmail:n}=e,i=await o().callApi({eventName:"getLoginOptions",environment:t,data:{email:n}});if("failed"===i.type)return{error:i.error};const r=i.data;return{value:{isSamlEnforced:"required"===r.samlSignIn,didLogInWithSaml:"available"===r.samlSignIn&&"saml"===r.lastLoginMethod,hasPassword:"required"!==r.samlSignIn&&r.passwordSignIn}}}},965998:(e,t,n)=>{n.d(t,{M:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("speechBubbleFilled",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M4.32 15.424c.39 0 .677-.192 1.149-.609l2.344-2.064h4.116c2.057 0 3.213-1.19 3.213-3.22V4.22c0-2.03-1.156-3.22-3.213-3.22H3.213C1.163 1 0 2.19 0 4.22V9.53c0 2.037 1.196 3.22 3.165 3.22h.28v1.675c0 .608.322.998.875.998zm.342-1.531v-1.949c0-.403-.178-.56-.56-.56H3.26c-1.285 0-1.9-.65-1.9-1.894V4.26c0-1.243.615-1.893 1.9-1.893h8.627c1.278 0 1.893.65 1.893 1.894v5.23c0 1.243-.615 1.893-1.893 1.893h-4.15c-.417 0-.622.068-.909.369l-2.167 2.14zm-.567-8.668h6.884a.433.433 0 00.423-.438.425.425 0 00-.423-.417H4.095a.419.419 0 00-.417.417c0 .24.184.438.417.438zm0 2.167h6.884a.427.427 0 000-.855H4.095a.425.425 0 00-.417.424c0 .24.184.43.417.43zm0 2.173h4.484c.24 0 .424-.191.424-.423 0-.24-.185-.431-.424-.431H4.095a.422.422 0 00-.417.43.42.42 0 00.417.424z"})})},966505:(e,t,n)=>{n.d(t,{$W:()=>F,AE:()=>de,Az:()=>W,CF:()=>H,DO:()=>me,F$:()=>re,F2:()=>x,Gq:()=>ce,HD:()=>E,HJ:()=>Q,IT:()=>ie,JN:()=>T,Jm:()=>K,KB:()=>M,KX:()=>$,MZ:()=>C,Mh:()=>V,N_:()=>ne,P4:()=>k,PG:()=>R,R_:()=>I,Si:()=>U,TS:()=>Y,V6:()=>N,Y1:()=>A,ZZ:()=>se,cI:()=>oe,d6:()=>te,db:()=>b,dp:()=>_,eR:()=>v,ej:()=>w,et:()=>ae,fv:()=>B,gc:()=>y,gy:()=>h,j$:()=>X,ke:()=>ee,m4:()=>O,m6:()=>L,oU:()=>J,qF:()=>f,qQ:()=>pe,st:()=>z,th:()=>D,u$:()=>Z,uL:()=>j,ud:()=>G,uz:()=>le,vn:()=>ue,wE:()=>q,wF:()=>P,wX:()=>S,xO:()=>ge});n(898992),n(354520),n(581454);var o=()=>n(554279),i=()=>n(449506),r=()=>n(989423),a=()=>n(680074),s=()=>n(640653),l=()=>n(351360),c=()=>n(508496),d=()=>n(406999),u=()=>n(134217),p=()=>n(10984),m=()=>n(749240),g=()=>n(337240);function f(e,t){r().u4({environment:e,event:{eventName:"create_space",eventProperties:t}});const n=(0,p().AI)();if("professional"===t.domain_type&&(r().vd(e,"professional_workspace_created",t),g().qq(e,{subscriptionTier:n,planType:t.planType})),"team"===t.planType&&(r().vd(e,"team_workspace_created",t),g().M8(e,{subscriptionTier:n,planType:t.planType})),g().qF(e,{subscriptionTier:n,domainType:t.domain_type}),"team"===t.planType){const t=o().mS(),n=o().zD();i().callApi({eventName:"trackConversionEvent",environment:e,data:{eventName:"create_team_space",fbp:t,clickIds:n}})}}function v(e,t){r().vd(e,"join_space",t)}function h(e,t){r().vd(e,"set_notifications_as_read",t)}function _(e){r().vd(e,"leave_space"),$(e,{invite_origin:"workspace_leave",domainType:(0,a().FX)(),new_workspace_member_count:-1,new_workspace_member_ids:[e.currentUser.id??""]})}function b(e){r().vd(e,"delete_space"),c().default.logEvent("delete_space")}function y(e,t){r().vd(e,"convert_guest_to_member",t),c().default.logEvent("convert_guest_to_member",t.convert_to,{origin:t.origin})}function S(e){r().vd(e,"remove_guest")}function w(e,t){c().default.logEvent("remove_member",t.member_user_id,t),$(e,{invite_origin:"workspace_remove_member",domainType:t.domainType,new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:[t.member_user_id]}),r().vd(e,"remove_member",{member_user_id:t.member_user_id,member_role:t.member_role,contraction_survey_id:t.contraction_survey_id})}function k(e){r().vd(e,"managed_user_reactivate_button_clicked")}function I(e,t){r().vd(e,"managed_user_support_access_toggled",t)}function x(e,t){r().vd(e,"managed_users_dashboard_search",t)}function A(e,t){r().vd(e,"managed_users_external_space_access_set",t)}function C(e,t){r().vd(e,"managed_users_prevent_support_access_toggled",t)}function T(e,t){r().vd(e,"managed_users_session_duration_modal_confirmed",t)}function M(e,t){r().vd(e,"managed_user_delete_button_clicked",t)}function P(e,t){r().vd(e,"managed_user_edit_modal_submitted",t)}function B(e){r().vd(e,"managed_user_log_out_button_clicked")}function R(e,t){r().vd(e,"managed_user_remove_from_external_workspace_button_clicked",t)}function E(e){r().vd(e,"managed_user_reset_password_button_clicked")}function D(e){r().vd(e,"managed_user_suspend_button_clicked")}function N(e,t){r().vd(e,"managed_users_log_out_all_button_clicked",t)}function L(e,t){r().vd(e,"managed_users_reset_passwords_all_button_clicked",t)}function O(e,t){r().vd(e,"managed_users_session_duration_selected",t)}function U(e,t){r().vd(e,"managed_user_edit_profile_modal_open",t)}function F(e,t){r().vd(e,"managed_user_delete_modal_confirmed",t)}function V(e,t){r().vd(e,"managed_user_edit_modal_confirmed",t)}function j(e){r().vd(e,"managed_user_log_out_modal_confirmed")}function z(e,t){r().vd(e,"managed_user_remove_from_external_workspace_modal_confirmed",t)}function H(e){r().vd(e,"managed_user_reset_password_modal_confirmed")}function W(e,t){r().vd(e,"managed_user_suspend_modal_confirmed",t)}function q(e,t){r().vd(e,"managed_users_log_out_all_modal_confirmed",t)}function K(e,t){r().vd(e,"managed_users_reset_passwords_all_modal_confirmed",t)}function G(e){r().vd(e,"managed_users_dashboard_button_clicked")}function $(e,t){const n=(0,p().AI)();r().vd(e,"workspace_member_number_update",{new_workspace_member_count:t.new_workspace_member_count,new_workspace_member_ids:t.new_workspace_member_ids,origin:t.invite_origin,subscription_tier:n,domain_type:t.domainType,allow_domain_auto_invite:t.allow_domain_auto_invite}),c().default.logEvent("workspace_member_number_update",t.new_workspace_member_count,{origin:t.allow_domain_auto_invite?`${t.invite_origin}_allow_domain`:t.invite_origin,subscription_tier:n,domain_type:t.domainType})}function Y(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_click_menu_item",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id})}function Q(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_render_menu_item",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id})}function Z(e,t){const n=(0,p().AI)(),o=(0,a().FX)(),i="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";r().vd(e,"person_property_invite_click_invite_button",{subscription_tier:n,domain_type:o,invited_type:i,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function X(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_click_upgrade_button",{subscription_tier:n,domain_type:o,origin:t.origin,invited_user_count:t.invited_user_count,invite_flow_id:t.invite_flow_id})}function J(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_guest_invited",{subscription_tier:n,domain_type:o,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ee(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_member_invited",{subscription_tier:n,domain_type:o,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function te(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_member_requested",{subscription_tier:n,domain_type:o,invited_user_count:t.invited_user_count,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ne(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_error",{subscription_tier:n,domain_type:o,invite_stage:t.invite_stage,invite_flow_id:t.invite_flow_id,error:t.error})}function oe(e,t){const n=(0,p().AI)(),o=(0,a().FX)(),i="member"===t.invite_option?t.can_add_member?"member":"request_member":"guest";r().vd(e,"person_property_invite_completed",{subscription_tier:n,domain_type:o,invited_type:i,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ie(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_message_typed",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id})}function re(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_dismiss_popup",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id})}function ae(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_change_permission",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_role:t.invited_role})}function se(e,t){const n=(0,p().AI)(),o=(0,a().FX)();r().vd(e,"person_property_invite_click_invite_option",{subscription_tier:n,domain_type:o,origin:t.origin,invite_flow_id:t.invite_flow_id,invite_option:t.invite_option})}function le(e,t){r().vd(e,"guest_invite_request_setting_toggled",t)}function ce(e,t){r().vd(e,"settings_deeplink_clicked",t)}function de(e,t){r().vd(e,"guest_invite_request_resolved",t)}function ue(e,t){r().vd(e,"resolve_membership_request",t),c().default.logEvent("resolve_membership_request",t.status,t)}function pe(e,t){r().vd(e,"request_access_review_button_clicked",t),c().default.logEvent("request_access_review_button_clicked",t.status,{from:t.from,user_count:t.user_count,request_type:t.request_type})}function me(e,t){if(r().vd(e,"disable_guest_toggle",t),!0===t.new_value&&!t.keep_existing_guests_if_disabled){const t=m().subscriptionDataStoreInstance.state,n=l().default.state.currentSpaceStore;if(!t||!n)return;const o=(0,s().fD)({environment:e,spaceId:n.id})??0;o>0&&ge(e,{origin:"space_setting_disable_guest",changedNumber:-o})}}function ge(e,t){let{inviteTargets:n,origin:o,changedNumber:i}=t;const s=(0,a().FX)(),l=(0,p().AI)();if(i)return r().vd(e,"workspace_guest_number_update",{new_workspace_guest_count:i,origin:o,subscription_tier:l,domain_type:s}),void c().default.logEvent("workspace_guest_number_update",i,{origin:o,subscription_tier:l,domain_type:s});const g=m().subscriptionDataStoreInstance.state;if(!g||!n)return;const f=u().Be(g).map((e=>e.userId)),v=n.filter((e=>!!(0,d().Gz)(e)||"existingUser"===e.type&&!f.includes(e.value.id)));0!==v.length&&(r().vd(e,"workspace_guest_number_update",{new_workspace_guest_count:v.length,origin:o,subscription_tier:l,domain_type:s}),c().default.logEvent("workspace_guest_number_update",v.length,{origin:o,subscription_tier:l,domain_type:s}))}},967786:(e,t,n)=>{n.d(t,{R9:()=>r,rP:()=>a});var o=()=>n(763884);const i="promoCode";function r(e){let{currentUserId:t,promoCode:n}=e;n?o().K.set({userId:t,key:i,value:n}):o().K.remove({userId:t,key:i})}function a(e){o().K.remove({userId:e,key:i})}},968172:(e,t,n)=>{n.d(t,{A:()=>r});n(581454);class o extends(()=>n(757695))().default{getInitialState(){return{recentPages:new Map,initialized:!1,numDaysForLazyLoading:void 0,recentPageRefreshTimer:void 0,recentPageRefreshIntervalTimer:void 0,userPageVisitListenerReference:void 0}}getIsInitialized(){return this.state.initialized}cleanup(e){this.update((t=>(t.userPageVisitListenerReference&&(n(941541).Ay.removeListener(t.userPageVisitListenerReference,e),t.userPageVisitListenerReference=void 0),t.recentPageRefreshTimer&&(clearTimeout(this.state.recentPageRefreshTimer),t.recentPageRefreshTimer=void 0),t.recentPageRefreshIntervalTimer&&(clearInterval(this.state.recentPageRefreshIntervalTimer),t.recentPageRefreshIntervalTimer=void 0),t)))}getRecentPagesWithStores(e,t){const o=n(351360).default.state.currentSpaceStore;return o?t.map((t=>({...t,store:n(630116).Bv.createChildStore(o.getPagesStore(),{table:n(179034).ev,id:t.pageId,spaceId:e})}))):[]}set(e,t){const n=this.getRecentPagesWithStores(e,t);this.update((t=>(t.recentPages.set(e,n),t.initialized=!0,t))),this.emit()}get(e){return this.state.recentPages.get(e)}getWithoutSubscribing(e){return n(17022).A.withListenerIgnored((()=>this.get(e)))||[]}}const i=new o;(0,n(604341).exposeDebugValue)("globalRecentPagesStore",i);const r=i},968307:(e,t,n)=>{n.d(t,{Z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("checkboxCircle",{viewBox:"0 0 22 23",svg:(0,o.jsx)("circle",{cx:"11",cy:"11.5",r:"10",stroke:"#E2E1DE",strokeWidth:"2"})})},969141:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isActive:!1}}}const i=new o},969197:(e,t,n)=>{n.d(t,{Le:()=>h,OW:()=>_,Rg:()=>y,T:()=>g,TL:()=>f,aI:()=>v,d1:()=>b,xK:()=>m});n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(581454),n(737550);var o=()=>n(700500),i=()=>n(980914),r=()=>n(351360),a=()=>n(861841),s=()=>n(712505),l=()=>n(630116),c=()=>n(502438),d=()=>n(962845),u=()=>n(108944),p=()=>n(792002);function m(e){return!e.isPhone}function g(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&e instanceof l().Bv)return e;let t=e;for(;;){if(t=t.getRecordStoreUIParent(),!t)return;if(t&&t instanceof l().Bv&&t!==e)return t}}function f(e){const t=g(e);if(t)return u().Nq(t)}function v(e){const t=e.getType(),n=e.getFormat(),r=e.getModel(),a=e.getProperties();if(t&&r)return t&&(0,o().Db)(t,n)&&"factory"!==t&&!(0,o().$I)(t)?e.getBlockTitleStore():r.isInlineCollectionView()?e.getTitleStore():r.isType(o().IA)&&a&&a.caption?e.getCaptionStore():t===o().xd.table?i().Jo({simpleTableStore:e,rowIndex:0,columnIndex:0}):void 0}function h(e){const t=g(e);if(t)return t&&(t===r().default.state.mainEditorCurrentBlockStore||s().default.state.open&&t===s().default.state.targetStore||t.isPost())}function _(e){const{stores:t,phase:n}=c().default.state;return 1===t.length&&t[0]===e&&n===c().SelectionPhase.Editing}function b(e){const{stores:t,phase:n}=c().default.state,o=new Set(t.map((e=>e.id))),i=u().g7(e),r=o.has(e.id),s=i.some((e=>o.has(e.id))),l=r||s;return!(n!==c().SelectionPhase.Selected||!l||a().Ay.state.isDragging)}function y(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){const t=(0,d().BO)(e);if(t){const e={multiSelection:t,mode:"editing",forceExtendAnnotations:{}};return(0,p().O7)(e)}}return e.map((e=>e.getTitleValue())).join("\n")}},969523:(e,t,n)=>{n.d(t,{q:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zm10.584 8.375H15.5a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875h-2.541zm-1.25-9.25H8.292v9.25h3.417zm-7.209 0a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h2.542v-9.25z"})},i=(0,n(340498).wt)("viewBoard",o)},970330:(e,t,n)=>{n.d(t,{X:()=>c,v:()=>l});var o=()=>n(700500),i=()=>n(644914),r=()=>n(946141),a=()=>n(504066);const s=n(496603).nF((e=>{n(989423).mt(e,{created_page:!0})}),864e5,{trailing:!1});function l(e,t){const{teamStore:n,new_page_id:l,...c}=t;let d=60;"chart"===t.view_type&&(d=1),r().tw(e,"create_block",`create_block-${t.type}-${t.from}`,d,{store:n,...c}),o().mf.has(t.from)&&(0,a().f)({action:"create_page",from:t.from,view_type:t.view_type,property_type:void 0}),"page"===t.type&&(r().rP(e,"create_page",{store:n,...c,new_page_id:l,...(0,i().hX)({environment:e})}),s(e))}function c(e,t){"onboarding"===t.from?function(e,t){const{teamStore:n,...o}=t;r().rP(e,"create_onboarding_page",{store:n,...o})}(e,{from:t.from,teamStore:t.teamStore,forkedTemplateId:t.pageId}):l(e,{type:"page",from:t.from,teamStore:t.teamStore,new_page_id:t.pageId,creating_block_id:t.pageId})}},970560:(e,t,n)=>{n.d(t,{Q:()=>r,e:()=>i});var o=n(296540);const i=(0,o.createContext)(null);i.displayName="StickyPortalContainerContext";const r=(0,o.createContext)(!1);r.displayName="StickyPortalNoStickContext"},970585:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1,isInitialized:!1}}}setState(e){super.setState({...e,focus:{...e.focus,isInitialized:!0}})}update(e){this.setState(e({...this.state}))}unsetFocus(){this.setState({...this.state,focus:{section:void 0,indexLocal:void 0,indexGlobal:void 0,footerFocused:!1}})}}const i=o},972435:(e,t,n)=>{n.d(t,{A:()=>r});var o=()=>n(662303),i=()=>n(959013);const r=new class{constructor(){this.intl=void 0;const e=(0,i().MT)();this.intl=(0,i().EY)({locale:o().locale,defaultLocale:"en-US",messages:o().D},e)}formatMessage(e,t){return this.intl.formatMessage(e,t)}formatNumber(e,t){return this.intl.formatNumber(e,t)}getIntl(){return this.intl}isEnglish(){return o().locale.toLowerCase().startsWith("en")}}},973189:(e,t,n)=>{n.d(t,{A:()=>r,d:()=>o});let o=function(e){return e.Members="members",e.Groups="groups",e.Guests="guests",e.Reprovisioning="reprovisioning",e.Requests="requests",e.Contacts="contacts",e}({});class i extends(()=>n(757695))().default{getInitialState(){return{currentTab:o.Members,limitMembers:!0,limitGuests:!0,limitTeamGuests:!0,membersFilter:"",guestsFilter:"",teamGuestsFilter:"",groupsFilter:"",groupNameInputValue:"",upsellModalOpen:!1,sorts:{members:{group:"members",by:"role",asc:!1},guests:void 0,team_guests:void 0}}}}const r=i},973618:(e,t,n)=>{n.d(t,{E:()=>o});const o=n(757695).default.createValue(!1,{name:"OpenPageUpdatesTabFromEmailStore"})},973891:(e,t,n)=>{n.d(t,{Gy:()=>c,Qn:()=>u,T_:()=>l,yQ:()=>s,zN:()=>d});var o=()=>n(661920),i=()=>n(246826),r=()=>n(751156),a=()=>n(184701);function s(e){let{examplePageStores:t,collectionViewBlockStore:n,eventProperties:o}=e;a().b.setState({visible:!0,examplePageStores:t,eventProperties:o,collectionViewBlockStore:n})}function l(){a().b.setState({visible:!1})}function c(){if(a().b.state.visible)return a().b.state.collectionViewBlockStore.id}function d(){return a().b.state.visible}function u(e){const t=a().b.state.examplePageStores;t&&0!==t.length&&(o().VN({environment:e,from:"empty_space_click",preventAnimation:!0}),r().createAndCommit({environment:e,perform:e=>{for(const n of t)i().zv({store:n,data:{alive:!1},transaction:e})},userAction:"workflowTemplates.postInstallPills.deleteSamplePages",canUndo:!0}),a().b.setState({...a().b.state,examplePageStores:t}))}},975533:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(633892).A)},975971:(e,t,n)=>{n.d(t,{A:()=>i});n(16280);const o=new(n(848776).U)((e=>{let{spaceId:t}=e;return t}),(async(e,t)=>{let{spaceId:o}=t;if(o.includes("|"))throw new Error("Invalid spaceId, you're likely passing a spaceUserId instead");const i=await Promise.resolve().then(n.bind(n,449506)),r=await i.callApi({eventName:"getFeatureBillingData",environment:e,data:{spaceId:o},headers:(0,n(386164).WS)({cellId:void 0,spaceId:o})});if("success"!==r.type)return;return{billingData:(0,n(596513).J)(r.data.billingData),overrides:r.data.overrides}}));n(604341).exposeDebugValue("FeatureBillingDataStore",o);const i=o},976618:(e,t,n)=>{n.d(t,{E:()=>i});n(581454);var o=()=>n(862387);function i(e,t){const n={page_layout_schema:void 0,page_info_layout_schema:void 0,form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0};return(0,o().Ub)(e,((e,o)=>{const i=o.area;if("views_main_tab_modules"===i)n.views_main_tab_modules||(n.views_main_tab_modules={}),n.views_main_tab_modules[o.viewId]||(n.views_main_tab_modules[o.viewId]=[]),n.views_main_tab_modules[o.viewId]=e.map(((e,n)=>t(e,{...o,index:n})));else if("form_conditional_modules"===i){n.form_conditional_modules||(n.form_conditional_modules={});for(let i=0;i<e.length;i++){const r=e[i];n.form_conditional_modules[r.id]=t(r,{...o,moduleId:r.id})}}else n[i]||(n[i]=[]),n[i]=e.map(((e,n)=>t(e,{...o,index:n})))})),n}},977390:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isMeasuring:!1}}}const i=new o},979004:(e,t,n)=>{async function o(){const e=await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,128848,23));return await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,690318,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,777099,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,675624,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,450271,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,872415,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,415026,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,557022,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,487336,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,322248,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,670478,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,725723,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,944511,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,987123,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,805651,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,691113,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,525365,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,360869,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,45293,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,447839,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,570568,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,200763,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,84051,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,776110,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,37099,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,213028,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,932048,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,747782,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,812420,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,973980,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,86378,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,734619,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,375538,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,700554,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,355025,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,564312,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,837723,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,896976,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,172514,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,465903,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,560463,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,869913,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,525294,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,918713,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,10116,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,786545,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,103801,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,980064,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,30260,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,275545,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,865882,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,265961,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,604201,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,655877,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,35177,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.bind(n,23737)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,20596,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,539814,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,697376,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,132821,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,419700,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,143554,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,230905,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,916167,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,39535,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,229405,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,152342,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,27768,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,14183,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,247702,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,701396,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,841648,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,75342,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,599562,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,864252,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,194604,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,218619,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,43537,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,696966,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,654793,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,770132,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,359587,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,182769,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,247501,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,71260,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,217822,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,88835,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,328176,23)),await Promise.all([n.e(78205),n.e(85250),n.e(92214)]).then(n.t.bind(n,60083,23)),e}n.r(t),n.d(t,{PrismLanguages:()=>i,importPrism:()=>o});let i=function(e){return e.abap="abap",e.agda="agda",e.arduino="arduino",e.bash="bash",e.basic="basic",e.bnf="bnf",e.c="c",e.clike="clike",e.clojure="clojure",e.coffeescript="coffeescript",e.coq="coq",e.cpp="cpp",e.csharp="csharp",e.css="css",e.cssExtras="css-extras",e.dart="dart",e.dhall="dhall",e.diff="diff",e.docker="docker",e.ebnf="ebnf",e.elixir="elixir",e.elm="elm",e.erlang="erlang",e.flow="flow",e.fortran="fortran",e.fsharp="fsharp",e.gherkin="gherkin",e.glsl="glsl",e.go="go",e.graphql="graphql",e.groovy="groovy",e.haskell="haskell",e.hcl="hcl",e.html="html",e.idris="idris",e.java="java",e.javascript="javascript",e.json="json",e.jsx="jsx",e.julia="julia",e.kotlin="kotlin",e.latex="latex",e.less="less",e.lisp="lisp",e.livescript="livescript",e.llvm="llvm",e.lua="lua",e.makefile="makefile",e.markdown="markdown",e.markup="markup",e.mathematica="mathematica",e.matlab="matlab",e.mermaid="mermaid",e.nasm="nasm",e.nix="nix",e.notion="notion",e.objectivec="objectivec",e.ocaml="ocaml",e.pascal="pascal",e.perl="perl",e.php="php",e.powershell="powershell",e.prolog="prolog",e.protobuf="protobuf",e.purescript="purescript",e.python="python",e.r="r",e.racket="racket",e.reason="reason",e.ruby="ruby",e.rust="rust",e.sass="sass",e.scala="scala",e.scheme="scheme",e.scss="scss",e.smalltalk="smalltalk",e.solidity="solidity",e.sql="sql",e.swift="swift",e.toml="toml",e.tsx="tsx",e.typescript="typescript",e.vbnet="vbnet",e.verilog="verilog",e.vhdl="vhdl",e.visualBasic="visual-basic",e.wasm="wasm",e.xml="xml",e.yaml="yaml",e}({})},979251:(e,t,n)=>{n.d(t,{j:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0m1.25 0a6.375 6.375 0 0 0 11.208 4.157L9.65 10.632a.63.63 0 0 1-.274-.517v-6.46A6.376 6.376 0 0 0 3.625 10m12.75 0c0-.935-.201-1.823-.563-2.623l-4.65 2.772 4.39 2.986A6.35 6.35 0 0 0 16.375 10m-1.187-3.706a6.37 6.37 0 0 0-4.563-2.639v5.36z"})},i=(0,n(340498).wt)("viewChart",o)},980585:(e,t,n)=>{n.d(t,{n:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("roundedCheck",{viewBox:"0 0 14 14",svg:(0,o.jsx)("path",{d:"M6.00879 11.4033C5.70605 11.4033 5.45378 11.2829 5.25195 11.042L2.73242 7.99023C2.64453 7.88932 2.58268 7.79167 2.54688 7.69727C2.51107 7.60286 2.49316 7.50521 2.49316 7.4043C2.49316 7.17318 2.56966 6.98275 2.72266 6.83301C2.87891 6.68001 3.07422 6.60352 3.30859 6.60352C3.56901 6.60352 3.78548 6.70931 3.95801 6.9209L5.98926 9.43555L9.97852 3.13184C10.0794 2.97884 10.1836 2.87142 10.291 2.80957C10.4017 2.74447 10.5368 2.71191 10.6963 2.71191C10.9307 2.71191 11.1243 2.78678 11.2773 2.93652C11.4303 3.08626 11.5068 3.27507 11.5068 3.50293C11.5068 3.58757 11.4922 3.67546 11.4629 3.7666C11.4336 3.85775 11.388 3.95215 11.3262 4.0498L6.78027 11.0078C6.60124 11.2715 6.34408 11.4033 6.00879 11.4033Z"})})},980914:(e,t,n)=>{n.d(t,{$O:()=>w,Bp:()=>z,Gl:()=>T,Jo:()=>E,KR:()=>R,MW:()=>k,QP:()=>D,S9:()=>U,Xe:()=>O,b6:()=>j,bS:()=>C,eE:()=>H,gc:()=>N,gx:()=>V,kP:()=>P,o0:()=>x,oC:()=>F,qD:()=>M,qO:()=>L,qg:()=>W,uq:()=>A,wg:()=>B,yv:()=>I});n(898992),n(354520),n(581454),n(737550);var o=()=>n(416504),i=()=>n(179034),r=()=>n(161479),a=()=>n(100622),s=()=>n(763824),l=()=>n(534177),c=()=>n(449506),d=()=>n(415651),u=()=>n(712030),p=()=>n(38337),m=()=>n(921855),g=()=>n(299545),f=()=>n(792002),v=()=>n(644914),h=()=>n(630116),_=()=>n(24157),b=()=>n(439270),y=()=>n(832410),S=()=>n(450519);function w(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_order}function k(e){var t;return(null===(t=w(e))||void 0===t?void 0:t.length)||0}function I(e){return e.getContentLength()}function x(e){var t;return null===(t=e.getFormat())||void 0===t?void 0:t.table_block_column_format}function A(e){var t,n;return{headerColumn:null==e||null===(t=e.getFormat())||void 0===t?void 0:t.table_block_row_header,headerRow:null==e||null===(n=e.getFormat())||void 0===n?void 0:n.table_block_column_header}}function C(e){const t=["table","table_row"];return e.map((e=>e.getType())).some((e=>e&&t.includes(e)))}function T(e){const{selection:t,columnIndex:n,rowCount:o}=e,i=t.start.col<=n&&n<=t.end.col;return"column"===t.type&&i&&0===t.start.row&&t.end.row===o-1}function M(e){const{selection:t,rowIndex:n,columnCount:o}=e,i=t.start.row<=n&&n<=t.end.row;return"row"===t.type&&i&&0===t.start.col&&t.end.col===o-1}function P(e){return e.start.col===e.end.col&&e.start.row===e.end.row}function B(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return b().A.findCellFromTextStore(e.start.store)}function R(){const e="editing"===_().default.state.mode&&_().default.state.multiSelection;if(e)return y().A.findFromTextStore(e.start.store)}function E(e){const{simpleTableStore:t,rowIndex:n,columnIndex:o}=e,i=t.getContentStores()[n];if(!i)return;const r=w(t);if(!r)return;const a=r[o];return a?i.getPropertyStore(a):void 0}function D(e){const{cells:t,type:n,theme:o}=e;return t.map((e=>function(e){const{cell:t,type:n,theme:o}=e,i=t.getNode();if(!i)return;const r=d().up(t.getNode()),s=r.cloned.querySelector(`.${p().yHP}`),l=r.cloned.querySelector(`.${p().A8d}`);"column"===n?(s&&(s.style.left="calc(50% - 15px)",s.style.fill=a().Ay.white,s.style.background=o.simpleTableSelectionBorder),l&&(l.style.visibility="hidden")):(l&&(l.style.top="calc(50% - 15px)",l.style.left="-7px",l.style.fill=a().Ay.white,l.style.background=o.simpleTableSelectionBorder),s&&(s.style.visibility="hidden"));return{cloned:r.cloned,rect:DOMRect.fromRect(r.rect)}}({cell:e,type:n,theme:o}))).filter(l().O9)}function N(e,t){const n=S().A.state;if(n.isActive&&n.simpleTableStore===e&&(!t||n.resize===t))return n}function L(e){const{environment:t,cellValue:n,spaceId:o,parentStore:i,theme:r,disableStyleAnnotations:a,disableSuggestionAnnotations:s}=e;return m().S5({environment:t,textValue:n?{value:n,spaceId:o}:void 0,parentStore:i,disableStyleAnnotations:a??!0,disableInsertedDeletedAnnotations:!0,disableDateStyleAnnotations:!0,disableSuggestionAnnotations:s??!1,disableHover:!0,disabled:!0,theme:r,emojiType:(0,u().FN)(t),katex:t.KatexStore.getKatex(),formulaValueTypes:[]})}function O(e){const{simpleTableStore:t,environment:n,includeInline:o}=e;return g().oC(t,{recursivelyLoadAllDiscussions:o,onlyIncludeBlockLevelDiscussions:(0,v().Nk)(n)})}function U(e){const{simpleTableStore:t,lastN:n}=e,o=t.getContentStores(),i=w(t);if(!o||!i)return!1;for(let r=o.length-1;r>Math.max(o.length-1-n,0);r--){const e=o[r].getProperties();if(e&&i.some((t=>t in e&&e[t])))return!0}return!1}function F(e){const{simpleTableStore:t,lastN:n}=e,o=t.getContentStores(),i=w(t);if(!o||!i)return!1;const r=i.slice(-n);return o.some((e=>{const t=e.getProperties();return t&&r.some((e=>e in t&&t[e]))}))}const V={title:!0,text:!0,url:!0,email:!0,person:!0,number:!0,date:!0,phone_number:!0,select:!0,multi_select:!0,status:!0,auto_increment_id:!0,file:!1,checkbox:!1,relation:!1,rollup:!1,formula:!1,created_by:!1,created_time:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,button:!1,location:!1,verification:!1,geo_point:!1},j=200;async function z(e){const{environment:t,collectionViewBlockStore:n}=e,a=n.getCollectionStoreIfSingleSource();if(!a)return[];const[l]=n.getCollectionViewStores(),d={source:{type:"collection",id:a.id,spaceId:(0,r().e)(a.pointer.spaceId)},collectionView:{id:l.id,spaceId:(0,r().e)(l.pointer.spaceId)},loader:{reducers:{results:{type:"results",limit:j+1,loadContentCover:!1}},searchQuery:void 0,userId:t.currentUser.id,userTimeZone:(0,o().P)()}},u=c().callApi({eventName:"queryCollection",environment:t,data:d,tracking:{src:"simple_tbl_transform"}}),p=await(0,s().nQ)(1e4,u);if(!p.timeout){const{result:e}=p;if("success"===e.type){const t=e.data.result.reducerResults.results;return(t&&"results"===t.type?t.blockIds:[]).map((e=>h().Bv.createChildStore(a,{id:e,table:i().ev})))}}return[]}function H(e){let t;if(0===e.getProps().rowIndex){const n=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:0,columnIndex:0});n&&(t=(0,f().H4)(n))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex-1,columnIndex:e.getProps().columnIndex});return t}function W(e){let t;const n=I(e.getProps().simpleTableStore);if(e.getProps().rowIndex===n-1){const o=k(e.getProps().simpleTableStore),i=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:n-1,columnIndex:o-1});i&&(t=(0,f().J3)(i))}else t=E({simpleTableStore:e.getProps().simpleTableStore,rowIndex:e.getProps().rowIndex+1,columnIndex:e.getProps().columnIndex});return t}},981046:(e,t,n)=>{n.d(t,{A:()=>i});n(898992),n(354520),n(672577),n(581454);class o extends(()=>n(757695))().default{constructor(){var e;let t,o;super(),e=this;const i=()=>{if("ready"!==this.state.status)return;const e=this.state.prices.map((e=>{const t=Math.floor(100*Math.random()),o=Math.floor(e.unitAmount.amount/100);return new(n(984380).gm)({external_id:e.externalId,product:e.product,billing_interval:e.billingInterval,currency:e.getCurrencyCode(),state:e.state,unit_amount:100*o+t})}));this.setPrices(e,this.state.selectedCurrencyCode)};(0,n(604341).exposeDebugValue)("randomizePrices",(function(){let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if("ready"!==e.state.status)return;n!==Boolean(o)&&(o&&(clearInterval(o),o=void 0),n?(t=e.state.prices,o=setInterval(i,1e3),i()):t&&e.setPrices(t,e.state.selectedCurrencyCode))}))}getInitialState(){return{status:"init",prices:[],availableCurrencyCodes:["USD"],selectedCurrencyCode:void 0}}resetExceptSelectedCurrencyCode(){this.update((e=>({...this.getInitialState(),selectedCurrencyCode:e.selectedCurrencyCode})))}waitUntilReady(){return this.waitUntil((()=>"ready"===this.state.status))}setPrices(e,t){this.update((o=>({...o,status:"ready",prices:e,availableCurrencyCodes:(0,n(720665).sb)(e.map((e=>e.getCurrencyCode()))),selectedCurrencyCode:this.state.selectedCurrencyCode||t})))}didStartLoading(){this.update((e=>({...e,status:"loading"})))}getPrice(e,t){const{status:o,selectedCurrencyCode:i}=this.state;if("init"===o){var r;const t=null===(r=n(351360).default.state.currentSpaceStore)||void 0===r?void 0:r.id;t&&n(779795).$W({environment:e,spaceId:t})}if("ready"!==o)return{isLoaded:!1,result:void 0};const a=this.state.prices.filter((e=>e.getCurrencyCode()===i));return{isLoaded:!0,result:a.find(t)}}get selectedCurrencyCode(){return this.state.selectedCurrencyCode??"USD"}get availableCurrencyCodes(){return this.state.availableCurrencyCodes}get prices(){return this.state.prices}}const i=new o},982254:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{tabs:[],currentTab:{isPinned:!1},unauthorizedIframeUrls:[]}}}const i=new o;(0,n(604341).exposeDebugValue)("ElectronAppStateStore",i);const r=i},984380:(e,t,n)=>{n.d(t,{Kq:()=>i,gm:()=>r});var o=()=>n(166386);const i=["student","personal","plus","business","enterprise"];class r{constructor(e){this.lastVersion=void 0,this.externalId=void 0,this.product=void 0,this.billingInterval=void 0,this.unitAmount=void 0,this.state=void 0,this.externalId=e.external_id,this.product=e.product,this.billingInterval=e.billing_interval,this.unitAmount=n(643819).W.fromValue({amount:e.unit_amount,currencyCode:e.currency}),this.state=e.state}getCurrencyCode(){return this.unitAmount.currencyCode}getMonthlyUnitCost(e){const t=this.getAdjustedUnitAmount(e);return"year"===this.billingInterval?t.withDividedAmount(12):t}getMonthlyCost(e){const{quantity:t,offer:n}=e;return this.getMonthlyUnitCost(n).withMultipliedAmount(t)}getCostPerBillingInterval(e){const{quantity:t,offer:n}=e;return this.getAdjustedUnitAmount(n).withMultipliedAmount(t)}getDiscountPerBillingInterval(e){var t;const{quantity:i,coupon:r,promo:a}=e,s=this.unitAmount.withMultipliedAmount(i),l=r?(0,o().Pz)((0,n(786508).Pq)(r)):void 0;if(r&&this.doesOfferApply(l))return s.withMultipliedAmount((0,o().iJ)(r));let c=0;return null!=a&&a.percent_off&&null!==(t=a.applies_to)&&void 0!==t&&t.includes(this.externalId)&&(c=a.percent_off/100),s.withMultipliedAmount(c)}getAdjustedUnitAmount(e){let t=1;return e&&this.doesOfferApply(e)&&(t=1-(0,o().vk)(e,"decimal_number")),this.unitAmount.withMultipliedAmount(t)}doesOfferApply(e){if(!e)return!1;const t=e.campaign;switch(this.product){case"ai":return"ai_fifty_percent_upgrade"===t||"new_year_2025"===t;case"free":case"student":case"personal":case"sites_custom_hostnames":return!1;case"plus":return"month"===this.billingInterval?["team_three_months","resurrection_offer","lic_25","lic_50"].includes(t):["lic_25","lic_50","team_annual"].includes(t);case"business":return"month"===this.billingInterval?["lic_25","lic_50","business_three_months"].includes(t):["lic_25","lic_50"].includes(t);case"enterprise":return["business_three_months","business_annual"].includes(t);default:(0,n(534177).HB)(this.product)}}}},985315:(e,t,n)=>{n.d(t,{g:()=>s});var o=()=>n(484714),i=()=>n(847249),r=()=>n(351360),a=()=>n(613240);function s(e){let{spaceId:t}=e;const n=(0,o().v3)(),s=(0,i().K8)((()=>{var e;return null===(e=r().default.state.currentSpaceStore)||void 0===e?void 0:e.canEdit()}),[]);return(0,i().K8)((()=>{if(t&&s)return a().A.getData(n,{spaceId:t})}),[n,t,s])}},986260:(e,t,n)=>{n.d(t,{nC:()=>ye,xr:()=>Se,oG:()=>Ge,hW:()=>Te,aI:()=>Ne,v5:()=>Oe,_Y:()=>Ae,EZ:()=>We,Rk:()=>Ve,FM:()=>Le,zc:()=>je,lS:()=>we,TK:()=>De,FN:()=>Ce,al:()=>ze,cM:()=>xe,FP:()=>Ie,xT:()=>Re,i3:()=>Pe,Qu:()=>Be,rZ:()=>He,XR:()=>Fe,og:()=>Ue,vD:()=>Me,RA:()=>Ee,u7:()=>ke,zN:()=>ve,rV:()=>fe,jk:()=>be,ou:()=>he,BT:()=>_e,Km:()=>qe,tu:()=>ge});n(18107),n(967357),n(898992),n(737550);var o=()=>n(908006),i=()=>n(110750),r=()=>n(713998),a=()=>n(857639),s=()=>n(416504),l=()=>n(797573),c=()=>n(919709),d=()=>n(328523),u=()=>n(160568),p=()=>n(901265),m=()=>n(448619),g=()=>n(501666),f=()=>n(829300),v=()=>n(186445),h=()=>n(299545),_=()=>n(508496),b=()=>n(502438),y=()=>n(24157),S=()=>n(675074),w=()=>n(98244),k=()=>n(797265),I=()=>n(778417),x=()=>n(751156),A=()=>n(892632);const C={pageTemplateModalActions:new(n(645873).O2)("pageTemplateModalActions",(async()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(85515),n.e(34208)]).then(n.bind(n,413677))))};var T=()=>n(44729),M=()=>n(246826),P=()=>n(495262),B=()=>n(319975),R=()=>n(482287),E=()=>n(725614),D=()=>n(662453),N=()=>n(286088),L=()=>n(441467),O=()=>n(730307),U=()=>n(964345),F=()=>n(962845),V=()=>n(952412),j=()=>n(644914),z=()=>n(749687),H=()=>n(919878),W=()=>n(980914),q=()=>n(393255),K=()=>n(155959),G=()=>n(351360),$=()=>n(295169),Y=()=>n(525569),Q=()=>n(210737),Z=()=>n(375447),X=()=>n(75368),J=()=>n(205682),ee=()=>n(714818),te=()=>n(899677),ne=()=>n(777932),oe=()=>n(922952),ie=()=>n(373444),re=()=>n(878377),ae=()=>n(972435),se=()=>n(600871),le=()=>n(231722),ce=()=>n(731320),de=()=>n(836251),ue=()=>n(969197),pe=()=>n(792002);let me=!1;function ge(e){me=e}function fe(e,t,n){var o,r;const{NativeMobileActionBarStore:a}=e,s=me||Boolean(null==a?void 0:a.state.enableShouldShowDebugging);if(!function(e,t,n){var o;const{device:r,NativeMobileActionBarStore:a,TabbedRouterStore:s}=e,l=me||Boolean(null==a?void 0:a.state.enableShouldShowDebugging);if(!r.isMobile)return Ke(l,"canShowMobileActionBar = false (reason: !device.isMobile)"),!1;if((0,de().Al)(e)&&_().default.checkGate({gateName:"mab_consider_navigation_top_page"})){const e=(0,i().Xz)(s.state);if("web"!==e.type||"page"!==(0,i().AE)(e).route.name)return Ke(l,"canShowMobileActionBar = false (reason: top page is not a web page)"),!1}if(te().default.state.open)return Ke(l,"canShowMobileActionBar = false (reason: quickFindOpen)"),!1;if(!r.isMobileNative&&Z().A.state.open)return Ke(l,"canShowMobileActionBar = false (reason: !device.isMobileNative && MentionMenuStore.state.open)"),!1;if(r.isMobileNative&&U().Ay.state.enabled)return Ke(l,"canShowMobileActionBar = false (reason: !device.isMobileNative && DictationStore.state.open)"),!1;if(y().default.isEditingComment())return Ke(l,"canShowMobileActionBar = false (reason: TextSelectionStore.isEditingComment())"),!1;const c=(0,N().SB)(Y().default.state),d=null===(o=$().default.getActiveSession())||void 0===o?void 0:o.hasPendingOperations();if(c||d)return Ke(l,"canShowMobileActionBar = false (reason: isCompletionsPopupActive || hasPendingEdits)"),!1;if(!J().A.state.isOpen&&e.device.isMobileNative&&Q().A.hasOpenPopups())return Ke(l,"canShowMobileActionBar = false (reason: !PageTemplateModalStore.state.open && environment.device.isMobileNative && GlobalPopupStore.hasOpenPopups() > 0)"),!1;if(J().A.state.isOpen){const t=Ge(J().A.state);if(!t)return Ke(l,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema === undefined)"),!1;switch(t.type){case"text":if(t.ai_inference)return Ke(l,"canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.ai_inference !== undefined)"),!1;break;case"number":if(!(0,se().Xt)({device:e.device}))return Ke(l,'canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type == "number")'),!1;break;default:return Ke(l,`canShowMobileActionBar = false (reason: PageBlockPropertyValueOverlayStore.state.isOpen && propertySchema.type == "${t.type}`),!1}}return(!(0,v().Te)()||!_().default.checkGate({gateName:"db_ux_mobile"}))&&(!t.isFormBlock()&&(j().KB(e)&&z().sidebarOpenStore.state?(Ke(l,"canShowMobileActionBar = false (reason: sidebarHelpers.sidebarIsExpanded(environment) && sidebarOpenStore.get()"),!1):(0,re().opL)()?!!(0,re().p2L)({environment:e,blocks:[t],publicEditMode:n})||(Ke(l,"canShowMobileActionBar = false (reason: !_canEdit)"),!1):(Ke(l,"canShowMobileActionBar = false (reason: !currentPageIsNotLocked())"),!1)))}(e,t,n))return Ke(s,"shouldShowMobileActionBar = false (reason: !canShowMobileActionBar)"),{canShow:!1,canShowNativeBar:!1,shouldShow:!1};const l=e.device.isMobileNative;if(a&&null!==(o=a.state.menu)&&void 0!==o&&o.type&&!(0,v().fI)())return Ke(s,"shouldShowMobileActionBar = true (reason: NativeMobileActionBarStore && NativeMobileActionBarStore.state.menu?.type"),{canShow:!0,canShowNativeBar:l,shouldShow:!0};const c=y().default.state;if("editing"!==c.mode)return Ke(s,"shouldShowMobileActionBar = false (reason: TextSelectionStore.state.mode !== editing"),{canShow:!0,canShowNativeBar:l,shouldShow:!1};const d=c.multiSelection,u=(0,F().$W)(d),p=u.some((e=>e.editable.props.disableStyleAnnotations)),m=u.some((e=>e.editable.props.disableMobileActionBar)),g=u.some((e=>e.editable.props.disableComment));return u&&m?(Ke(s,"shouldShowMobileActionBar = false (reason: !renderedBlocks || !disableMobileActionBar)"),{canShow:!0,canShowNativeBar:l,shouldShow:!1}):(Ke(s,"shouldShowMobileActionBar = true"),{shouldShow:!0,canShowNativeBar:l,disableStyleAnnotations:p,disableComment:g,isEmpty:(0,le().kM)(d)&&0===d.end.index&&0===(null===(r=(0,pe().s6)(d.end.store))||void 0===r?void 0:r.endIndex)})}function ve(){var e;const t=J().A.state;if(!t.isOpen)return!1;const n=null===(e=t.collectionContextStore)||void 0===e?void 0:e.normalizedSchemaStore.state;if(!n)return!1;const o=(0,r()._g)({schema:n,property:t.property});return"text"===(null==o?void 0:o.type)}function he(e){const{environment:t,store:n}=e,{isPhone:o}=t.device,i=t.currentUser.isLoggedIn(),r=n.isCollectionView(),a=n.getAssociatedCollectionStore(),s=ee().A.state.open,l=G().default.state.currentLoadingContainerStore,c=t.RouterStore.state.route,d="page"===c.name&&c.showMoveTo,u=n.getContentStores()[0],p=u&&!u.isEmptyTextBlock();return Boolean(o&&n.isDefined()&&n.canEdit()&&i&&!a&&!r&&!s&&d&&!p&&l&&l.state.ready)}function _e(e,t,n,o){const i=n?n.getType():void 0,r=y().default.state;if("editing"===r.mode)return!t.state.isComposing&&!(0,le().kM)(r.multiSelection)||W().wg()||o&&("quote"===i||"table"===i);const a=e.state.savedTextSelectionStoreState;return!(!a||"editing"!==a.mode)&&!(0,le().kM)(a.multiSelection)}function be(e){var t;const{NativeMobileActionBarStore:n,device:o}=e;return Boolean(n&&(null===(t=n.state.menu)||void 0===t?void 0:t.type)&&!o.isTablet&&!o.isAndroid&&!(0,K().T)("supportsMobileActionBarNativeActionMenuWithoutIgnoreSelectionArea"))}function ye(e){if((0,ce().QT)(e))return!1;const{stores:t}=b().default.state;return t.length>0&&t[0].canEdit()&&!t[0].isNavigableBlock()&&!Boolean(W().wg())}function Se(e,t){return!(0,ce().QT)(e)&&t.canEdit()}function we(e){"editing"===y().default.state.mode&&(x().createAndCommit({userAction:"mobileActionBarHelpers.handleIndent",environment:e,canUndo:!0,perform:t=>{B().Mf({environment:e,transaction:t,shiftKey:!1})}}),qe(e,"indent"))}function ke(e){"editing"===y().default.state.mode&&(x().createAndCommit({userAction:"mobileActionBarHelpers.handleUnindent",environment:e,canUndo:!0,perform:t=>{B().Mf({environment:e,transaction:t,shiftKey:!0})}}),qe(e,"unindent"))}function Ie(e){x().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveUp",environment:e,canUndo:!0,perform:t=>{B().$P({environment:e,transaction:t,direction:"up"})}}),qe(e,"move-up")}function xe(e){x().createAndCommit({userAction:"mobileActionBarHelpers.handleMoveDown",environment:e,canUndo:!0,perform:t=>{B().$P({environment:e,transaction:t,direction:"down"})}}),qe(e,"move-down")}function Ae(e){const t=b().default.state.stores[0],n=y().default.state;if(t&&"editing"===n.mode){const{multiSelection:o}=n,i=(0,pe().J3)(o.end.store)||(0,pe().H4)(o.start.store),r=t.getParentBlockStore(),a=r&&r.isCalloutV2()&&1===r.getContentLength();x().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:e=>{if(a){const t=r.getParentBlockStore();t&&T().zz({childStore:r,parentStore:t,transaction:e})}else k().TF({store:t,transaction:e})}});if(W().wg())x().createAndCommit({userAction:"mobileActionBarHelpers.handleDelete",environment:e,canUndo:!0,perform:t=>{H().xD({environment:e,transaction:t})}});else if(i){const t=(0,ue().T)(i);I().hc({environment:e,store:t}),I().Zm(e)}else I().IU({environment:e});qe(e,"remove")}}function Ce(e){f().Gf({environment:e,mentionTypes:{page:!0,heading:!0,createPage:!0,user:!0,inviteUserToWorkspace:!1,inviteUserToPage:!0,bot:!0,date:!0,reminder:!0,templateVariable:!0,group:!0,team:!0,formulaContextVariable:!0,slackSpecialMention:!1}}),qe(e,"mention")}function Te(e){const t=y().default.state;if("editing"===t.mode&&(0,le().kM)(t.multiSelection)){const t=b().default.state.stores.at(0),n=null==t?void 0:t.getTitleStore();t&&n&&!t.isEmptyTextBlock()&&E().selectAllText({environment:e,store:n,canSelectAllBlocks:!0})}!async function(e){const{completionInitialPromptActions:t}=await D().aiDependency.load();await t.toggleInitialPrompt(e)}({from:"mobile_action_bar",environment:e}),qe(e,"ai")}function Me(e,t){R().po({environment:e,annotation:t}),qe(e,t[0])}function Pe(e,t,n){const{NativeMobileActionBarStore:o}=e;null==o||o.update((e=>({...e,menu:t,shouldRestoreSelectionForMenu:n})))}function Be(e,t,n){const{NativeMobileActionBarStore:o}=e;null==o||o.update((e=>({...e,isSubMenuOverridden:n,subMenu:t}))),void 0===t?q().VN({environment:e,dismissed:!0}):qe(e,t.type)}function Re(e){P().ZS({environment:e}),qe(e,"redo")}function Ee(e){P().tN({environment:e}),qe(e,"undo")}function De(e){g().fi({type:"focusOnly",focus:!0}),qe(e,c().Ifu.Link)}function Ne(e,t,n){const o=b().default.state.stores[0];if(!o)return;const i=y().default.state,r="empty"!==i.mode&&i.multiSelection;r&&!(0,le().kM)(r)?(L().hN({environment:e,blockStore:o,multiSelection:r,formulasModule:n}),qe(e,"comment",t)):((0,O().l)({environment:e,blockStore:o}),qe(e,"discuss",t))}function Le(e){m().Wx({environment:e,analyticsFrom:"rich_text_menu"}),qe(e,"equation")}async function Oe(e,t){_().default.checkGate({gateName:"mobile_discovery_modal_restore_selection_killswitch"})&&(I().IU({environment:e}),E().blurActiveElement());const n=t.getParentStore();if(n&&(0,oe().u)(n)){const{openTemplateOnboardingModal:o,getTemplateOnboardingVersion:i}=await ie().O.load();o({parentStore:n,template:void 0,version:i({template:void 0}),origin:"new_page_pills",navigateToOnFinish:"created_collection",onClose:n=>{"accepted_template"!==n.type&&"accepted_empty_collection"!==n.type||x().createAndCommit({environment:e,canUndo:!1,perform:e=>{M().zv({store:t,transaction:e,data:{alive:!1}})},userAction:"clean_up_empty_new_page"})}})}else qe(e,"databaseDiscoveryModal")}function Ue(e){_().default.checkGate({gateName:"mobile_template_gallery_restore_selection_killswitch"})&&(I().IU({environment:e}),E().blurActiveElement()),X().A.setState({open:!0}),qe(e,"templates")}async function Fe(e,t){var n;const{currentSpaceViewStore:o,currentSpaceStore:i,mainEditorCurrentBlockStore:r}=G().default.state;if(!o||!i||!r)return;const a=ae().A.getIntl(),c=(0,s().P)(),d=(0,l().B)(t,a),p=((null===(n=r.getModel())||void 0===n||null===(n=n.getRenderTitle({getRecordModel:r.getRecordModel,userTimeZone:c,intl:a}))||void 0===n?void 0:n.length)??0)>0;let m=!1;const g=Date.now();try{ne().A.setState({isDuplicating:!0});const t=await C.pageTemplateModalActions.load();await t.loadAndDuplicatePageTemplate({environment:e,isPrivate:!1,item:d,spaceStore:i,spaceViewStore:o,useMinimalTemplates:!1,initializeStore:r}),m=!0}finally{ne().A.setState({isDuplicating:!1});const t=Date.now()-g;u().hB(e,{from:"mobileApp",success:m,context:"template_pill",template_block_id:d.rootId,target_space_id:i.id,template_duplication_duration_ms:t,public_template_name:d.name,has_existing_title:p})}}function Ve(e){!async function(e){var t;if(!e.mobileNative)return;const n=y().default.state;if("editing"!==n.mode)return;const o=null===(t=await e.mobileNative.openEmojiPicker())||void 0===t?void 0:t.emoji;o&&x().createAndCommit({userAction:"mobileActions.pickEmoji",environment:e,canUndo:!0,perform:t=>{w().Yf({environment:e,multiSelection:n.multiSelection,isFromInsertion:!1}),w().Ju({environment:e,emoji:o,transaction:t}),w().VN()}})}(e),qe(e,"pick_emoji")}function je(e){!async function(e){const t=b().default.state.stores,n="on"===_().default.getEligibleGroup({experimentId:"mobile_native_file_upload_exp",defaultGroup:"control"}),o=e.device.isIOS,i=await A().dA({environment:e,supportsMobileNativeFileUpload:!0,multiple:!0,accept:n&&o?"*/*":n||o?"image/*, video/*":"image/*"}),r=b().default.getCurrentRecordCache(),a=v().y0(e);i&&0!==i.length&&r&&x().createAndCommit({userAction:"mobileActions.takePicture",environment:e,canUndo:!0,perform:o=>{var s;const l=S().$C({environment:e,files:i,inMemoryRecordCache:r,pageWidth:a,transaction:o,spaceId:0!==t.length?t[0].pointer.spaceId:null===(s=(0,v().ZO)())||void 0===s?void 0:s.pointer.spaceId});n&&1===t.length&&t[0]&&(0,h().wm)(t[0])?k().t1({environment:e,blocks:l,selection:t,transaction:o,preventSetSelection:!0}):(k().LE({environment:e,blocksToInsert:l,target:t,transaction:o,replaceEmptyTextBlock:!0}),I().IU({environment:e}))}})}(e),qe(e,"take_picture")}function ze(e){const{device:t}=e,n=t.isMobileNative&&t.isIOS&&t.isPhone;n||I().td({environment:e,stores:b().default.state.stores}),p().WU({environment:e,stores:b().default.state.stores,actionSectionGroupKey:"default",showInput:!1,analyticsFrom:"mobile_more_menu"}),qe(e,"more"),o().default.afterNextFlush((()=>{n&&E().blurActiveElement()}))}function He(e){const{device:t}=e,n=t.isMobileNative&&t.isIOS&&t.isPhone;n||I().td({environment:e,stores:b().default.state.stores}),V().u.openTeamTargetMobilePopup(),qe(e,"teamspaceSelector"),o().default.afterNextFlush((()=>{n&&E().blurActiveElement()}))}function We(e,t){I().IU({environment:t}),e.store.setState({...e.store.state,isInsertOpen:!1}),qe(t,"hide_keyboard"),E().blurActiveElement()}function qe(e,t,n){d().np(e,{itemName:t,from:n})}function Ke(e,t){e&&(console.log(t),a().log({level:"info",from:"mobileActionBarHelpers.ts",type:"logShouldShowReason",data:{message:t}}))}function Ge(e){var t;if(!e.isOpen)return;const n=null===(t=e.collectionContextStore)||void 0===t?void 0:t.normalizedSchemaStore.state;return n?(0,r()._g)({schema:n,property:e.property}):void 0}},987201:(e,t,n)=>{n.d(t,{A:()=>i,x:()=>r});var o=n(296540);function i(){(0,o.useEffect)((()=>{r()}),[])}const r=n(496603).Oo((async function(){const e=await n(903972).w.load();n(267419).A.setState((0,n(634201).Se)(e))}))},988499:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{teams:[],teamAggregateData:{},lastEmitData:{value:void 0,spaceId:void 0,userId:void 0}}}}const i=new o},989423:(e,t,n)=>{n.d(t,{vd:()=>o().v,ik:()=>y,PZ:()=>S().w,LU:()=>w().U,V4:()=>k().e,TZ:()=>T().T,LM:()=>b().d,_d:()=>C,J1:()=>p,uX:()=>f,ET:()=>c().E,kb:()=>P,u4:()=>i().u,pM:()=>l,cX:()=>r,WU:()=>a().W,mt:()=>_});var o=()=>n(679924),i=()=>n(2220);function r(e){const{environment:t,eventName:n,eventProperties:i,opts:r}=e;(0,o().v)(t,n,i,{...r,sampling:(null==r?void 0:r.sampling)||{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}})}var a=()=>n(999202);const s={};function l(e,t,n,i,r,a){const l=s[n];l&&(clearTimeout(l),delete s[n]),s[n]=setTimeout((()=>{delete s[n],(0,o().v)(e,t,r,a)}),1e3*i)}var c=()=>n(599824),d=()=>n(893820),u=()=>n(313462);async function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=(0,u().I)();if(await d().J1({traits:e}),t)for(const n of e)console.log("trackAnalytics:%c identify","font-weight: bold;",n)}var m=()=>n(627506),g=()=>n(875856);async function f(e){const t=await(0,m()._)(e);t&&g().default.state.isLoggingEnabled&&d().uX({spaceId:t.space_id,spaceData:t})}var v=()=>n(498212),h=()=>n(551625);function _(e,t){if(!e.currentUser.id)return Promise.resolve(void 0);const n=(0,v().ot)(e.currentUser.id);return(0,h().T)({environment:e,userId:n,traits:{...t,user_id:n}})}var b=()=>n(506671);function y(e){return{DO_NOT_USE_commonTrackEvent:t=>{(0,o().v)(e,t.eventName,t.properties)}}}var S=()=>n(233996),w=()=>n(455968),k=()=>n(449918),I=(n(898992),n(354520),()=>n(468006)),x=()=>n(134217),A=()=>n(749240);function C(e){var t;const n=e.id,o=e.getSettingsStore().getValue(),i=A().subscriptionDataStoreInstance.state;if(!e.isDefined()||void 0===o||!i)return{team_id:(0,v().Xw)(n),no_team_value:!0};const r=e.getMemberInfoUsingSpaceMembers((0,x().Ye)(i))??[];return{team_id:(0,v().Xw)(n),team_current_size:r.length,team_current_num_users:r.filter((e=>"user"===e.entity_type)).length,team_current_num_groups:r.filter((e=>"group"===e.entity_type)).length,team_access_level:(0,I().MA)(o),team_is_default:e.isDefault(),team_has_description:Boolean(e.getDescription()),team_has_icon:Boolean(e.getIcon()),team_top_pages:(null===(t=e.getTeamPagesStore().getValue())||void 0===t?void 0:t.length)??0}}var T=()=>n(268405),M=()=>n(508496);function P(){return"on"===M().default.getEligibleGroup({experimentId:"zendesk",defaultGroup:"unassigned"})}},990261:(e,t,n)=>{n.d(t,{o:()=>r,uk:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{visitId:void 0,startMilliseconds:void 0}}initializeNewPageVisitId(){this.setState({visitId:n(206267).JW(),startMilliseconds:Date.now()})}getCurrentPageVisitId(){return this.getState().visitId}getCurrentPageVisitDuration(){const e=this.getState().startMilliseconds;return void 0===e?void 0:Date.now()-e}}const i=new o,r=new o},991249:(e,t,n)=>{n.d(t,{K:()=>w});n(296540);var o=()=>n(441738),i=()=>n(762433),r=()=>n(959013),a=()=>n(534177),s=()=>n(252105),l=()=>n(901389),c=()=>n(209660),d=()=>n(671263),u=()=>n(600871),p=()=>n(640653),m=()=>n(155959),g=()=>n(351360),f=()=>n(57605),v=()=>n(807778),h=()=>n(911964),_=()=>n(749240),b=()=>n(19575),y=()=>n(224701),S=n(474848);async function w(e,t){if("contact_sales"===t.upsell.type)return void(0,b().lK)({openedFrom:t.from});if("contact_account_manager"===t.upsell.type)return void(0,b().cz)();const n=t.upsell.product,w=g().default.state.currentSpaceStore;if(!w)return;const k=await f().A.awaitData(e,{spaceId:w.id}),{addOnFeature:I,for_subscription_tier:x}=function(e){let{billingData:t,product:n}=e;return(0,a().Xk)(o().Of,n)?{addOnFeature:n,for_subscription_tier:(0,i().AI)(t)}:{for_subscription_tier:n}}({billingData:k,product:n});s().QP(e,{from:t.from,for_subscription_tier:x,addOnFeature:I});if(!(0,i().Gm)(k)&&["block_limit_sidebar","block_limit_settings","block_limit_banner","database_chart_paywall","delete_blocks_modal","slash_menu","out_of_blocks_toast","forms_increase_file_limit","forms_notion_branding","forms_customize_settings","lic_offer_sidebar"].includes(t.from)&&!I){if(e.device.isMobileBrowser){const n=await d().Xm.load();return void(await n.plans.showPlans({environment:e,from:t.from}))}return void c().Ow({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}const A=(0,v().Le)();const C=(0,u().mM)({environment:e})&&("personal"===n||"ai"===n);if(e.device.isMobileNative){if("ai"===n&&!(0,m().T)("supportsAiIAP")){const t=(0,u().Xi)({environment:e})?A?(0,S.jsx)(r().sA,{id:"upsellActions.noIAPForAIWithExternalUpgradeOption",defaultMessage:"Your workspace does not have unlimited AI. Visit on desktop to upgrade Notion AI and go unlimited."}):(0,S.jsx)(r().sA,{id:"upsellActions.noIAPForAIWithExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Visit on desktop to purchase Notion AI and go unlimited."}):(0,S.jsx)(r().sA,{id:"upsellActions.noIAPForAIWithoutExternalPurchaseOption",defaultMessage:"Your workspace does not have unlimited AI. Unfortunately, unlimited AI cannot be purchased on mobile."});return void l().f1(t)}if(!C)return}if(!w.canAdmin())return;await y().Ow(e);const T=_().subscriptionDataStoreInstance.state;if(T)if("unsubscribed_admin"===T.type||"subscribed_admin"===T.type)if((0,i().bO)(k))l().f1((0,S.jsx)(r().sA,{id:"subscriptions.paymentMethodUnverified",defaultMessage:"Your payment is being processed. Please try again when your payment has completed."}));else if((0,i().N8)(null==k?void 0:k.subscription))(0,b().cz)();else if(C){if(!e.mobileNative)return;if((await(0,p().Pu)({environment:e,spaceId:w.id})??1)>1){const e=(0,S.jsx)(r().sA,{id:"upsellActions.cannotPurchaseOnMobile",defaultMessage:"Unfortunately, your workspace has multiple members and cannot be upgraded on mobile"});return void l().f1(e)}if("stripe"===(null==k?void 0:k.provider)||"mixed"===(null==k?void 0:k.provider))return;e.mobileNative.openUpgradeModal({spaceId:w.id,from:t.from})}else if("app_store"!==(null==k?void 0:k.provider)&&"play_store"!==(null==k?void 0:k.provider))await(0,h().F)({environment:e,spaceStore:w,billingData:k,product:n,from:t.from,pageSection:t.pageSection,coupon:t.coupon,isTrial:t.isTrial,dismissMobilePlansModal:t.dismissMobilePlansModal});else{const e=(0,S.jsx)(r().sA,{id:"upsellActions.switchPlanFromInAppPurchase",defaultMessage:"You're currently subscribed through an in-app purchase. To switch plans, cancel your subscription on your mobile device."});l().f1(e)}else t.dontOpenPlansOnCancel||c().Ow({openedFrom:"upsell",upsellType:t.from,currentTab:"plans"})}},991385:(e,t,n)=>{n.d(t,{B:()=>s,S:()=>a});var o=()=>n(869190),i=()=>n(763884);const r="userSessionCount";function a(e){const t=c(e);if(!t)return void l({userId:e,count:1});const{count:n,updatedAt:i}=t;(0,o().aD)(i,!0)!==(0,o().aD)(Date.now(),!0)&&l({userId:e,count:n+1})}function s(e){if(!e)return 0;const t=c(e);return(null==t?void 0:t.count)||0}function l(e){let{userId:t,count:n}=e;const o={count:n,updatedAt:Date.now()};i().K.set({userId:t,key:r,value:o})}function c(e){return i().K.get({userId:e,key:r})}},991699:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const i=new o},992237:(e,t,n)=>{n.d(t,{A:()=>a});var o=()=>n(496506);class i extends(()=>n(757695))().default{constructor(){super(...arguments),this.integrations=new(o().default)((()=>{const e=this.state;return e.loaded?e.integrations:[]}),{debugName:"ComplianceIntegrationStore.integrations"}),this.webhookSubscriptions=new(o().default)((()=>{const e=this.state;return e.loaded?e.webhookSubscriptions:[]}),{debugName:"ComplianceIntegrationStore.webhookSubscriptions"})}getInitialState(){return{loaded:!1,loading:!1}}}const r=new i;(0,n(604341).exposeDebugValue)("ComplianceIntegrationStore",r);const a=r},993553:(e,t,n)=>{n.d(t,{A:()=>g});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(799954),s=()=>n(908521),l=()=>n(959013),c=()=>n(494043),d=()=>n(891078),u=n(474848);const p=(0,l().YK)({placeholder:{defaultMessage:"Heading 2",id:"subheaderBlock.placeholder"}});function m(e,t){const m=(0,l().tz)(),g=(0,i().v3)(),f=(0,i().Y0)(),v=(0,o.useRef)(null),h=(0,d().pW)(e.store,!0),_=(0,d().qu)(e.store),b=(0,r().K8)((()=>e.store.getBlockTitleStore()),[e.store]),y=(0,r().K8)((()=>Boolean(e.store.getInsertSuggestion())),[e.store]),S=(0,n(857076).W)({device:f,overrideHeaderFontSizes:e.overrideHeaderFontSizes}),w=(0,n(401497).IS)((e=>{const t=S.subHeader*s().Df;return{root:{display:"flex",width:"100%",...h},toggle:{height:`${t}em`,marginTop:f.isMobile?1:a().nE.paddingTop,marginBottom:a().nE.paddingBottom},headerText:{...a().nE,...(0,s().On)({fontSizes:S,fontFamily:_})},headerTextPlaceholder:{...y?{color:e.text.uiBlueTertiary,WebkitTextFillColor:"initial"}:{WebkitTextFillColor:e.headerBlockPlaceholderTextColor}}}}),[f.isMobile,S,h,_,y]),k=(0,r().K8)((()=>c().PQ(e.store)),[e.store]),I=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(n(524702).A,{tagName:"h3",disabled:e.disabled,store:b,placeholder:e.placeholder??m.formatMessage(p.placeholder),placeholderStyle:w.headerTextPlaceholder,style:w.headerText,pasteBehavior:"block",legacyTransclusionParentStore:e.legacyTransclusionParentStore,inPageFind:n(792540).Os.block_match,renderWhiteSpaceWhenEmptyOnAndroid:!0}),(0,u.jsx)(n(739283).A,{disableCommentMenu:e.disableCommentMenu,hideContent:e.hideContent,store:e.store})]});return(0,d().NW)(e.store,t,(0,o.useMemo)((()=>({renderedType:"sub_header",getNode:()=>v.current,getBlockStore:()=>e.store,activate(){c().qj(g,e.store,e.hideContent)}})),[g,e.hideContent,e.store]),(0,u.jsx)("div",{ref:v,style:{...w.root,...e.style},children:k?(0,u.jsx)(n(60676).A,{store:e.store,toggleStyle:w.toggle,childrenStyleWhenToggleable:{display:"flex"},hideContent:e.hideContent,disabled:e.disabled,disableCommentMenu:e.disableCommentMenu,disableHoverMenu:e.disableHoverMenu,disableDrag:e.disableDrag,children:I}):I}))}const g=o.memo(o.forwardRef(m),n(821062).A)},994006:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(296540),i=n(474848);const r=function(e){const t={marginRight:e.avatarMarginRight??6,alignSelf:"center"},r={display:"flex",alignItems:"center",minWidth:0,...e.style},a=e.inline?{...t,width:"none",minHeight:"none"}:t,{userValue:s,userStore:l,avatarShouldShowShadow:c,avatarSize:d,hasTooltip:u,tooltipHeader:p}=e,m=(0,n(959013).tz)(),g=(0,o.useMemo)((()=>l??(s?n(792071).Bj6.fromValue(n(798880).oo,s):void 0)),[s,l]),f=(0,n(847249).K8)((()=>null==g?void 0:g.getDisplayName(m)),[g,m]);return(0,i.jsxs)("div",{style:r,children:[(0,i.jsx)("div",{style:a,children:(0,i.jsx)(n(453697).A,{...s?{userValue:s}:{userStore:l},avatarShouldShowShadow:c,size:d,hasTooltip:u,tooltipHeader:p})}),(0,i.jsx)("div",{className:"notranslate",style:{...n(284371).RC},children:f})]})}},994641:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{flowId:void 0,open:!1,type:"auth"}}createNewFlowId(){const e=(0,n(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}}const i=new o,r=i;(0,n(604341).exposeDebugValue)("SalesforceStore",i)},994877:(e,t,n)=>{n.d(t,{SI:()=>S,be:()=>w});n(16280),n(898992),n(803949),n(908872);var o=()=>n(662303),i=()=>n(857639),r=()=>n(402390),a=()=>n(762433),s=()=>n(235280),l=()=>n(763824),c=()=>n(449506),d=()=>n(780054),u=()=>n(989423),p=()=>n(186445),m=()=>n(95286),g=()=>n(972435),f=()=>n(646736),v=()=>n(875856),h=()=>n(351360),_=()=>n(57605),b=()=>n(148024),y=()=>n(755636);async function S(e){const{environment:t,from:n}=e;b().$Z(t,{from:n});const r=v().default.state;if(t.device.isMobileNative){const e=(0,p()._m)(t),n=`${t.device.os} v${t.device.mobileAppVersion}(${t.device.version})`,o="team@makenotion.com",i=`Help with my account ${null==e?void 0:e.getEmail()} on ${n}`,r=()=>{const e=encodeURIComponent(i);y().f({environment:t,url:`mailto:${o}?subject=${e}`})},a=t.mobileNative;a&&a.api.submitUserFeedback?a.submitUserFeedback({sendToEmailAddress:o,subject:i},r):r()}else if(r.isZendeskEnabled&&(0,u().kb)()){const{userHighestPlanType:n,isSalesAssistedPlan:a}=(0,m().N1)(t),l=await w({environment:t,isSalesAssistedPlan:a});(0,s().q)({type:"decagon",locale:o().locale,analyticsSettings:r,decagonInitializeArgs:l,onError:e=>{i().log({level:"error",from:"decagonHelpers",type:"initializeDecagon",error:{message:e.message}})},userHighestPlanType:n,isSalesAssistedPlan:a,cookieService:t.cookieService,initialQuery:e.prepopulatedContent}),b().DQ(t)}}async function w(e){var t,n,o,s,u;const p=e.environment,m=g().A.getIntl(),v=null===(t=h().default.state.currentUserStore)||void 0===t?void 0:t.getModel(),b=(null===(n=h().default.state.currentSpaceViewStore)||void 0===n||null===(n=n.getModel())||void 0===n?void 0:n.getSpaceId().toString())??"",y=b?await _().A.awaitData(p,{spaceId:b}):void 0,S=(null===(o=h().default.state.currentSpaceStore)||void 0===o||null===(o=o.getModel())||void 0===o?void 0:o.getName())??"",w=(0,a().eh)(y,"ai"),I=p.currentUser.id??"",x=(null==v?void 0:v.getFullName(m))??"",A=(null==v?void 0:v.getEmail())??"",C=null===(s=h().default.state.currentSpaceStore)||void 0===s?void 0:s.getRole(),T=(0,f().sE)(h().default.state.currentSpaceStore,I),M=null==T?void 0:T.getMembershipType(),P=(0,a().AI)(y),B=(null===(u=h().default.state.currentUserSettingsStore)||void 0===u||null===(u=u.getSettings())||void 0===u?void 0:u.preferred_locale)||r().q,R=B.split("-")[0],E=await async function(e){const{environment:t,workspaceId:n}=e,o=[{keys:["countryCode"],getterFn:async()=>({countryCode:await k(t)??"US"})},{keys:["stripeCustomerId","activeSubscriptionPlatform","subscriptionPlanId"],getterFn:async()=>{var e;const o=await c().callApi({eventName:"getBillingData",environment:t,data:{spaceId:n}});if("success"!==o.type)return null;const i=o.data.billingData;return i?{stripeCustomerId:"admin"===i.type?i.externalId??"":"",activeSubscriptionPlatform:i.provider??null,subscriptionPlanId:(null===(e=i.subscription)||void 0===e?void 0:e.items[0].price.externalId)??""}:null}}],r=await(0,l().lX)(o,o.length,(async e=>{let{getterFn:t}=e;try{return await t()}catch(n){return void i().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:n instanceof Error?n.message:"unknown error instance type"}})}}));return o.reduce(((e,t,n)=>{let{keys:o}=t;return void 0===r[n]?(i().log({level:"error",from:"decagonHelpers",type:"fetchAsyncDecagonInitializeArgs",error:{message:`Failed to fetch ${o.join(", ")}`}}),e):(o.forEach((t=>{e={...e,[t]:r[n]&&t in r[n]?r[n][t]:void 0}})),e)}),{})}({environment:p,workspaceId:b});return{countryCode:"US",...E,planType:P,membershipType:M,workspaceId:b,workspaceName:S,userId:I,userName:x,email:A,userAccessLevel:C,locale:B,language:R,appVersion:`Notion v${d().A.version}${p.device.desktopAppVersion?` desktop v${p.device.desktopAppVersion}`:""}${p.device.mobileAppVersion?` mobile v${p.device.mobileAppVersion}`:""}`,platform:p.device.deviceType,salesAssistedPlan:e.isSalesAssistedPlan,hasAiAddOn:w}}async function k(e){var t;const n=await c().callApi({eventName:"getGeoIpLocation",environment:e,data:{}});if("success"!==n.type)return;return null===(t=n.data)||void 0===t?void 0:t.countryCodeFromIp}},995444:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{focused:!1}}}const i=o},997583:(e,t,n)=>{n.d(t,{z:()=>a});var o=n(296540),i=()=>n(847249),r=()=>n(472090);function a(){const[e,t]=(0,o.useState)(0),[n]=(0,o.useState)((()=>new(r().E))),a=(0,o.createRef)();return(0,o.useEffect)((()=>{if(a.current)return n.observe(a.current),()=>{n.destroy()}}),[a,n]),(0,i().K8)((()=>{e!==n.rect.state.width&&t(n.rect.state.width)}),[e,n.rect]),[a,e]}},998109:(e,t,n)=>{n.d(t,{n:()=>m});var o=n(296540),i=()=>n(847249),r=()=>n(401497),a=()=>n(100622),s=()=>n(645873);const l=new(s().O2)("tourTutorial",(()=>Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(287)]).then(n.bind(n,225603)))),c=(0,s()._h)(l,(e=>e.TourTutorialContent));var d=()=>n(594607),u=()=>n(846955),p=n(474848);function m(e){let{children:t,step:n,wrapperStyle:s={},highlightStyle:l={},isFullWidth:m=!0,showSidebarOverlays:f=!0,showContentOverlays:v=!0,onBackButtonClick:h,onNextButtonClick:_,tutorialMetadata:b}=e;const y=(0,i().K8)((()=>u().default.state),[]),S=o.useRef(null),w=(0,r().IS)((e=>({highlight:{background:"dark"===e.mode?a().Ay.whiteWithAlpha(.05):a().Ay.blackWithAlpha(.05),boxShadow:e.outlineBlueInputBoxShadow,borderRadius:4,position:"relative",zIndex:1e3,...l},opacityLayer:{position:"absolute",top:0,left:0,height:"100%",width:"100%",zIndex:999,background:e.surface.wash,opacity:.6}})),[l]);return"inactive"===y.type||y.step!==n?t:(0,p.jsxs)(p.Fragment,{children:[m?(0,p.jsx)(g,{ref:S,style:s,children:t}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{style:w.highlight,children:(0,p.jsx)(g,{ref:S,style:s,children:t})}),v&&(0,p.jsx)("div",{style:w.opacityLayer})]}),(0,p.jsx)(d().B,{calloutId:"sidebar_tour",shouldShow:!0,children:(0,p.jsx)(c,{step:y.step,contentRef:S,showSidebarOverlays:!!m&&f,onNextButtonClick:_,onBackButtonClick:h,tutorialMetadata:b})})]})}const g=o.forwardRef((function(e,t){let{children:n,style:o}=e;return(0,p.jsx)("div",{ref:t,style:o,children:n})}))},999202:(e,t,n)=>{n.d(t,{W:()=>r});var o=()=>n(679924);const i={};function r(e,t,n,r,a,s){const l=i[n],c=Date.now();return(!l||c-l>1e3*r)&&(i[n]=c,(0,o().v)(e,t,a,s),!0)}},999319:(e,t,n)=>{n.d(t,{A:()=>i});var o=()=>n(582033);class i{constructor(e,t){this.activeQueue=void 0,this.inMemoryTransactionQueue=void 0,this.handleIndexedDbTimeout=()=>{const e=(0,n(220719).oC)(this.activeQueue,o().p,'Expected "IndexedDBTransactionQueue"');e.hasTasks()||(e.stopLoop(),e.events.removeListener("timeout",this.handleIndexedDbTimeout),n(620149).A.reset(),this.inMemoryTransactionQueue.startLoop(),this.activeQueue=this.inMemoryTransactionQueue,n(857639).log({level:"warning",from:"IndexedDBWithInMemoryFallbackTransactionQueue",type:"handleIndexedDbTimeout",data:{message:"IndexedDB timeout occurred while the transaction queue is empty. Switching over to InMemoryTransactionQueue."}}))},this.activeQueue=e,this.inMemoryTransactionQueue=t,e.events.addListener("timeout",this.handleIndexedDbTimeout)}startLoop(){this.activeQueue.startLoop()}logEmptyTaskForDebugging(e){var t,n;null===(t=(n=this.activeQueue).logEmptyTaskForDebugging)||void 0===t||t.call(n,e)}enqueueTask(e){return this.activeQueue.enqueueTask(e)}unpause(){this.activeQueue.unpause()}pause(){this.activeQueue.pause()}getLastTaskTimestamp(){return this.activeQueue.getLastTaskTimestamp()}hasTasks(){return this.activeQueue.hasTasks()}anySessionHasTasks(){return this.activeQueue.anySessionHasTasks()}getTotalNumberOfTasks(){return this.activeQueue.getTotalNumberOfTasks()}hasTasksForUser(e){return this.activeQueue.hasTasksForUser(e)}drain(){return this.activeQueue.drain()}awaitRecordTransaction(e){return this.activeQueue.awaitRecordTransaction(e)}isPendingTransactionForRecord(e){return this.activeQueue.isPendingTransactionForRecord(e)}reset(){return this.activeQueue.reset()}clearForUser(e){return this.activeQueue.clearForUser(e)}updateDependencies(e){this.activeQueue.updateDependencies(e),this.inMemoryTransactionQueue!==this.activeQueue&&this.inMemoryTransactionQueue.updateDependencies(e)}getIndexedDBTransactionQueue(){if(this.activeQueue instanceof o().p)return this.activeQueue}}},999752:(e,t,n)=>{n.d(t,{O:()=>i,c:()=>r});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(803949),n(581454),n(737550);var o=()=>n(763824);class i{static map(e,t,n){return o().lX(t,e,n)}constructor(e){this.queue=[],this.waitingList=[],this.running=[],this.afterFlushes=[],this.afterClogs=[],this.waiting=!1,this.parallel=e}getStats(){return{running:this.running.length,queue:this.queue.length,waitingList:this.waitingList.length}}isEmpty(){return 0===this.running.length&&0===this.waitingList.length&&0===this.queue.length}isWaiting(){return this.waiting}setParallelism(e){this.parallel=e,this.flush()}getParallelism(){return this.parallel}enqueue(e){a("===== ENQUEUE ======");const t=o().yX(),n=()=>e().then(t.resolve).catch((e=>{t.reject(e)}));this.waiting?this.waitingList.push({deferred:t,action:n}):this.queue.push({deferred:t,action:n}),this.flush();return r({promise:t.promise,canCancel:()=>this.queue.some((e=>e.deferred===t))||this.waitingList.some((e=>e.deferred===t)),cancel:e=>{const n=this.queue.findIndex((e=>e.deferred===t));if(n>=0)return this.queue.splice(n,1),void t.reject(e);const o=this.waitingList.findIndex((e=>e.deferred===t));return o>=0?(this.waitingList.splice(o,1),void t.reject(e)):void 0}})}wait(){this.waiting=!0;for(let e=0;e<this.queue.length;e++)this.waitingList.push(this.queue[e]);this.queue.length=0}resume(){this.waiting=!1;for(let e=0;e<this.waitingList.length;e++)this.queue.push(this.waitingList[e]);this.waitingList.length=0,this.flush()}async*mapAsyncIterable(e,t){const n=new Set,o=new Set;e.map((e=>{const i=this.enqueue((()=>t(e)));n.add(i);const r=i.finally((()=>{n.delete(i),o.delete(r)}));return o.add(r),r}));try{for(;o.size>0;)yield await Promise.race(o)}catch(i){throw n.forEach((e=>e.cancel(i))),i}finally{n.forEach((e=>e.cancel(new Error("CanceledTask."))))}}wrap(e){var t=this;return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t.enqueue((()=>e(...o)))}}enqueueImmediate(e){const t=e(),n=o().yX();return t.then(n.resolve).catch(n.reject),this.queue.push({action:()=>t,deferred:n}),this.flush(),t}flush(){if(a(`queue size ${this.queue.length}`),0===this.queue.length){if(0===this.running.length&&0===this.waitingList.length){for(const e of this.afterFlushes)e.resolve(null);this.afterFlushes=[]}if(this.running.length<this.parallel){for(const e of this.afterClogs)e.resolve(null);this.afterClogs=[]}return}if(this.running.length>=this.parallel)return;const e=this.queue.splice(0,this.parallel-this.running.length);a(`DEQUEUE ${e.length} tasks`);for(const t of e)this.running.push(t);for(const t of e)t.action().then((()=>{this.running.splice(this.running.indexOf(t),1),this.flush()}))}afterFlush(){const e=o().yX();return this.afterFlushes.push(e),this.flush(),e.promise}afterClog(){const e=o().yX();return this.afterClogs.push(e),this.flush(),e.promise}cancel(){const e=this.running,t=this.queue,n=this.waitingList;this.running=[],this.queue=[],this.waitingList=[];for(const o of e)o.deferred.reject(new Error("CanceledTask."));for(const o of t)o.deferred.reject(new Error("CanceledTask."));for(const o of n)o.deferred.reject(new Error("CanceledTask."))}}function r(e){const{promise:t,canCancel:n,cancel:o}=e,i=t;return i.canCancel=n,i.cancel=o,i}function a(e){false}}}]);