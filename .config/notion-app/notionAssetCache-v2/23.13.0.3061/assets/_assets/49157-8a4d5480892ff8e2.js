"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49157],{21735:(e,t,o)=>{o.d(t,{A:()=>a});class n extends(()=>o(757695))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const i=new n;o(604341).exposeDebugValue("EdgeCacheStore",i);const a=i},63467:(e,t,o)=>{o.d(t,{y:()=>c});var n=()=>o(637997),i=()=>o(267419);const a={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222))};let s=!1,r=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function d(){if(s)return;const[e]=o(662303).locale.split("-");e in a&&(await l(await a[e]()),s=!0)}const c=(0,o(279900).A)((async()=>{await async function(){r||(await l(await o.e(51872).then(o.bind(o,443716))),r=!0)}(),await d()}))},271084:(e,t,o)=>{o.d(t,{k:()=>i});o(581454);class n extends(()=>o(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,a]=t;return a-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",i)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t?(n=a,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...a),t)}}o.d(t,{A:()=>n})},352759:(e,t,o)=>{o.d(t,{p:()=>b,t:()=>y});o(581454),o(296540);var n=()=>o(484714),i=()=>o(847249),a=()=>o(584262),s=()=>o(959013),r=()=>o(857783),l=()=>o(255018),d=()=>o(939740),c=()=>o(958378),g=()=>o(89924),p=()=>o(900967),u=()=>o(728611),h=()=>o(211716),m=()=>o(592968),v=()=>o(551619),f=o(474848);function b(e){let{store:t}=e;return(0,f.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:v().NV,onClick:v().sx,children:(0,f.jsx)(l().A,{type:"page",store:t,headerText:(0,f.jsx)(s().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y(e){let{store:t}=e;const o=(0,n().v3)(),s=(0,i().K8)((()=>(0,p().c)(t,o)),[t,o]),l=(0,i().K8)((()=>s.backlinks.map((e=>e.backlinkStore))),[s]).map(((e,t)=>({key:e.id,render:t=>(0,f.jsx)(c().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:n}=t;m().F.setState({isOpen:!1});const i=u().Vr(n);r().uK({environment:o,store:e,openInNew:i,visitType:h().ig.Link,pageVisitSource:a().y8.Backlinks})}})));return(0,f.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:l,render:e=>(0,f.jsx)(g().A,{...e})}]})}},413267:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>u});var n=()=>o(972435),i=()=>o(867772),a=()=>o(681810),s=()=>o(901389),r=()=>o(896628),l=()=>o(383594),d=()=>o(751156),c=()=>o(892632);const g=1500,p=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function u(e){let{environment:t,intl:o,store:n,rect:i}=e;l().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;l().I(),d().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{r().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;m({environment:t,store:n,url:{originUrl:o},position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(p.fileTypeCaption,{idealImageWidth:g}),onUpload:e=>{var i;l().I(),c().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=n.getCoverStore())||void 0===i?void 0:i.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:v,onProgress:f,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},h({...o,position:.5})},onError:()=>{s().f1(o.formatMessage(p.uploadFailed))}})}},{type:"embed",title:o.formatMessage(p.embedTitle),inputPlaceholder:o.formatMessage(p.embedPlaceholder),caption:o.formatMessage(p.embedCaption),buttonText:o.formatMessage(p.embedSubmit),onChange:e=>{var o;o={environment:t,store:n,url:e},h({...o,position:.5}),l().I()}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;m({environment:t,store:n,url:{originUrl:o},position:i})}}]})}async function h(e){const{environment:t,store:o,url:s,position:l}=e,{serverCommitResult:c}=d().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{r().fg({store:o,url:s,position:l||.5,transaction:e})}});await c,a().A.state.loadingMode===i().vS&&a().A.setState({loadingMode:i().Gi,dataURL:a().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:n().A.formatMessage(p.downloading)})}function m(e){h(e),e.environment.device.isMobile&&l().I()}function v(e){const{file:t,name:o,size:s}=e;if(l().I(),a().A.setState({loadingMode:i().Wc,file:t,name:o,size:s}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:n().A.formatMessage(p.preparing)});else a().A.state.loadingMode===i().Wc&&a().A.setState({...a().A.state,loadingMode:i().vS,progressText:n().A.formatMessage(p.preparing)})}function f(e){const{progressPercent:t,progressText:o}=e;a().A.state.loadingMode===i().vS&&a().A.setState({...a().A.state,uploadProgress:t,progressText:o})}},544862:(e,t,o)=>{o.d(t,{A:()=>w});var n=o(296540),i=()=>o(484714),a=()=>o(847249),s=()=>o(959013),r=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(600871),g=()=>o(478726),p=()=>o(227440),u=()=>o(867772),h=()=>o(681810),m=()=>o(608581),v=()=>o(145214),f=()=>o(704152),b=()=>o(807683),y=()=>o(401497),x=()=>o(534177),C=o(474848);function A(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:a,containerStyle:s,onLoadComplete:r,testId:l}=e;const[d,c]=(0,n.useState)(!0);let g;switch(i){case"force-show-placeholder":g=!0;break;case"force-show-src":g=!1;break;case"show-placeholder-if-loading-src":g=!!o&&(d||void 0===t);break;default:(0,x().HB)(i)}const p=(0,y().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...s},srcWrapper:{...g&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[s,g]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const u=(0,n.useCallback)((e=>{c(!1),null==r||r()}),[r]);return(0,C.jsxs)("div",{style:p.container,children:[(0,C.jsx)(b().Ay,{src:t,onLoad:u,style:a,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,C.jsx)(b().Ay,{src:o,style:a,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var k=()=>o(24611);const w=function(e){let{store:t,disabled:s,paddingRight:l,paddingLeft:c,height:g,proxyWidth:p}=e;const m=(0,i().v3)(),v=(0,a().uB)(void 0,o(454305).A),f=(0,a().K8)((()=>s||"suggest"===o(77246).Uv.getMode(t)),[s,t]),y=(0,a().K8)((()=>t.getCover()),[t]),x=(0,a().O$)(h().A),[k,w]=(0,n.useState)(void 0);if(!y)return null;const j=x.loadingMode!==u().pF&&x.loadingMode!==u().Wc;return(0,C.jsx)(o(801678).A,{mouseStore:v,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{r().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,m),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:a,isRepositioning:s}=e;return(0,C.jsx)(M,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:a,isRepositioning:s,lastProxiedUrl:k,store:t,disabled:f,paddingRight:l,paddingLeft:c,mouseStore:v})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:g,maxHeight:280,cursor:"default"},render:e=>(0,C.jsxs)(n.Fragment,{children:[(0,C.jsx)(o(360083).A,{url:y.cover,isAuthenticated:!0,permissionRecord:y.pointer,width:p,onFinishedLoadingProxyUrl:w,render:(t,o)=>{const n={width:"100%",height:g,maxHeight:280,objectFit:"cover",opacity:j?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:g,maxHeight:280};return(0,C.jsx)(A,{src:o,placeholderSrc:j?x.dataURL:void 0,placeholderBehavior:j?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:S,testId:"pageCover"})}}),j&&(0,C.jsxs)("div",{style:b().fd,children:[(0,C.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,C.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==x.uploadProgress?(0,C.jsx)(o(773382).A,{percentage:x.uploadProgress}):x.progressText?(0,C.jsx)("span",{children:x.progressText}):null})]})]})})};function S(){h().A.reset()}function M(e){let{isVisible:t,isRepositioning:o,handleCancelClick:r,handleRepositionClick:d,handleSavePositionClick:b,lastProxiedUrl:y,store:x,disabled:A,paddingRight:w,paddingLeft:S,mouseStore:M}=e;const j=(0,i().v3)(),R=(0,s().tz)(),P=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const a=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:a})}(e,j,R,x,M)),[j,R,x,M]),L=(0,a().K8)((()=>h().A.state.loadingMode),[]),T=(0,a().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":g().x6,t}(x)),[x]),{device:I}=j,B=(0,a().K8)((()=>!o&&!(0,c().LX)({device:I})),[o,I]),U=(0,a().O$)(p().e);if(A||L!==u().pF||!U)return null;const{isMobile:W}=I;return(0,C.jsx)(v().A,{animate:{width:T,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,C.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:w,marginLeft:S},children:[B&&(0,C.jsx)(f().A,{style:{borderRight:W?"none":void 0,...k().k},onClick:P,children:(0,C.jsx)(s().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!W&&(0,C.jsx)(f().A,{style:{...k().k,borderRight:"none"},onClick:e=>d(e,y),children:(0,C.jsx)(s().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!W&&(0,C.jsx)(f().A,{style:k().k,onClick:b,children:(0,C.jsx)(s().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!W&&(0,C.jsx)(f().A,{style:{...k().k,borderRight:"none"},onClick:r,children:(0,C.jsx)(s().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},592968:(e,t,o)=>{o.d(t,{F:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const i=new n},608581:(e,t,o)=>{o.d(t,{A:()=>c});o(898992),o(354520),o(581454),o(941795);var n=o(296540),i=()=>o(401497),a=()=>o(955825),s=()=>o(284371),r=()=>o(963575),l=o(474848);function d(e){const{button:t,isLast:o}=e,r=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:s().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,a().AH)(t.props.style,r.button,o&&r.buttonLast),hoveredStyle:(0,a().AH)(r.buttonHovered,o&&r.buttonLast).style,pressedStyle:r.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:g,style:p}=e;const u=(0,o(484714).v3)(),h=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:r().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:u.device.isMobile?"auto":"none",opacity:u.device.isMobile?1:0,fontFamily:s().vc(o(662303).locale).sans,position:"absolute",right:r().A.horizontal.small,bottom:r().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:r().A.vertical.small,bottom:void 0}})),[u]),m=n.Children.toArray(t).filter(o(534177).O9),v=m.length;return(0,l.jsx)(o(145214).A,{animate:{opacity:c?1:0},...(0,a().AH)(h.container,p,c&&h.containerHover,"top"===g&&h.containerTop),children:m.map(((e,t)=>{const i=t===v-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,l.jsx)(d,{isLast:i,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,l.jsx)(d,{isLast:i,button:e},e.key)}}))})}},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},801678:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),i=()=>o(662303),a=()=>o(484714),s=()=>o(847249),r=()=>o(955825),l=()=>o(959013),d=()=>o(100622),c=()=>o(496603),g=()=>o(284371),p=()=>o(720665),u=()=>o(145214),h=o(474848);const m={isRepositioning:!1};const v=function(e){const t=(0,n.useRef)(null),i=(0,a().v3)(),{isMobile:l}=(0,a().Y0)(),[d,g]=(0,n.useState)(m),u=(0,n.useCallback)((()=>{g(m)}),[]),{renderControl:v,onFlushTemporaryPosition:b,style:y,source:x,store:C}=e,{isRepositioning:A,image:k,startDragRenderedPosition:w,startDragImageScreenHeight:S}=d,M=(0,s().K8)((()=>0===o(502438).default.state.stores.length),[]),[j,R]=(0,n.useState)(!1),P=(0,s().uB)(e.mouseStore,o(454305).A),L=(0,s().K8)((()=>P.state.mouseEntered),[P]),T=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:A?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[A]),I=(0,s().K8)((()=>function(e,t,o){return(0,c().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,c().Et)(i))return i;return o}(e,t)}(x,C,d.temporaryPosition)),[d.temporaryPosition,x,C]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&A&&b({imagePosition:I,reset:()=>{P.reset(),u()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[I,A,P,b,u]),A&&!M&&u();const B=(0,n.useMemo)((()=>(0,c().nF)((e=>{P.setState({...P.state,mouseEntered:!0})}),100)),[P]),U=(0,n.useMemo)((()=>(0,c().sg)((e=>{P.setState({...P.state,mouseEntered:!1})}),100)),[P]),W=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:i});const n=new Image;n.onload=()=>{g((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),E=(0,n.useCallback)((e=>{b({imagePosition:I,reset:()=>{u()}})}),[I,b,u]),F=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&R(!0)}),[]),D=(0,n.useCallback)((()=>{R(!0)}),[]),H=(0,n.useCallback)((e=>{if(k&&A){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;g((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:I})))}}}),[k,I,A]),V=(0,n.useCallback)((e=>{if(A){const t=e.diffY/(S||0)+(w||0);g((e=>({...e,temporaryPosition:(0,c().LI)((0,o(40845).A)(t,0,1),4)})))}}),[A,S,w]),K=(0,n.useCallback)((()=>{g((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),z=(0,s().K8)((()=>v({handleRepositionClick:W,handleSavePositionClick:E,handleCancelClick:u,isVisible:l||L||j||A,isRepositioning:A})),[W,E,j,l,A,L,v,u]);return(0,h.jsxs)("div",{ref:t,onFocus:F,onBlur:D,onMouseEnter:B,onMouseMove:B,onMouseLeave:U,...(0,r().AH)(T.container,y),children:[(0,h.jsx)(o(603820).A,{onDraggableDragStart:H,onDraggableDragMove:V,onDraggableDragEnd:K,onDraggableDragCancel:K,disabled:!A,render:t=>(0,h.jsx)("div",{...(0,r().AH)(T.dragContainer),...t,children:e.render({imagePosition:I,isRepositioning:A})})}),(0,h.jsx)(f,{small:e.small,isRepositioning:A}),z]})};function f(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:g().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,h.jsx)(u().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,h.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>a,Wc:()=>n,pF:()=>s,vS:()=>i});const n="loadingLocalImage",i="uploading",a="downloading",s="loaded";class r extends(()=>o(757695))().default{getInitialState(){return{loadingMode:s}}}const l=r}}]);