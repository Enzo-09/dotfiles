"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75601],{112698:(e,t,n)=>{n.d(t,{B:()=>g});n(296540);var s=()=>n(484714),i=()=>n(847249),o=()=>n(401497),r=()=>n(959013),a=()=>n(100622),l=()=>n(534177),d=()=>n(284371),c=()=>n(824160),u=()=>n(859428),p=()=>n(962730),m=()=>n(351360),b=()=>n(991249),f=n(474848);function g(e){let{upsell:t,mobileStyle:n,desktopStyle:g,analyticsName:h,onClick:y,disableTooltip:v}=e;const _=(0,o().DP)(),C=(0,s().v3)(),{device:A}=C,M=(0,i().K8)((()=>{const{currentSpaceStore:e}=m().default.state;return null==e?void 0:e.canAdmin()}),[]),x=(0,i().K8)((()=>function(e,t){if("product"!==e.type)return{};switch(e.product){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:d().Wy.medium};default:return{}}}(t,_)),[t,_]);if("product"!==t.type)return null;if(A.isMobileNative)return null;const w=(()=>{switch(t.product){case"personal":return(0,f.jsx)(r().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"});case"plus":return(0,f.jsx)(r().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"});case"business":return(0,f.jsx)(r().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"});case"enterprise":return(0,f.jsx)(r().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"});case"ai":return(0,f.jsx)(r().sA,{defaultMessage:"AI ↗",id:"upgradeButton.ai.textWithArrow"});case"sites_custom_hostnames":return(0,f.jsx)(r().sA,{defaultMessage:"Custom Hostnames ↗",id:"upgradeButton.sites_custom_hostnames.textWithArrow"});default:(0,l().HB)(t.product)}})();return A.isMobile||!M?(0,f.jsx)(c().A,{mobileStyle:n,children:w}):(0,f.jsx)(u().A,{delayThreshold:120,disableTooltip:v,placement:p().W.Bottom,renderTooltip:()=>(0,f.jsx)("div",{style:{maxWidth:500},children:(0,f.jsx)(r().sA,{defaultMessage:"Upgrade to use this feature.",id:"premiumFeatureUpgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,f.jsx)(c().A,{desktopStyle:g,innerStyle:x,onClick:e=>function(e,t,n,s,i){b().K(s,{from:t,upsell:n}),i&&i(e)}(e,h,t,C,y),...e,children:w})})}},192421:(e,t,n)=>{n.d(t,{F:()=>d});n(296540);var s=()=>n(484714),i=()=>n(433847),o=()=>n(959013),r=()=>n(583690),a=()=>n(678553),l=n(474848);function d(e){const{role:t}=e,n=(0,o().tz)(),{device:d}=(0,s().v3)(),c=(0,r().I2)(t);return(0,l.jsx)(a().Ay,{...e,title:n.formatMessage((0,i().sK)(t,void 0).label),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:c})})}},328347:(e,t,n)=>{n.d(t,{h:()=>i});n(296540);var s=n(474848);const i=(0,n(340498).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,s.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>T,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>M,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>A,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>y,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>w,areRecurrenceSchedulesEqual:()=>L,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>E,getFormattedEndCondition:()=>I,getFormattedNextRecurrenceTime:()=>R,getNewEndTimestamp:()=>P,getNextDateUtc:()=>j,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>S,isValidRecurrenceInterval:()=>v,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>C,templateAncestorsViolateRecurrenceNesting:()=>x});n(898992),n(354520),n(581454);var s=()=>n(244641);n(944114);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(0===n.length)return e.map((e=>[e]));const o=[];for(const r of e)o.push(...i(n[0],...n.slice(1)).map((e=>[r,...e])));return o}var o=()=>n(496603),r=()=>n(534177),a=()=>n(720665),l=()=>n(597777),d=()=>n(869190),c=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const b=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},g={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},h=99,y=999;function v(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function _(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=y}function C(e){const{start_date:t,frequency:n,interval:s,weekdays:o,timezone:a,hour:d,minute:c}=e,u="week"===n&&o?o.map((e=>g[e])):void 0,m={};return(0,r().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,r().HB)(e.end_condition)),"month"===e.frequency&&(0,r().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,r().HB)(e.monthly_restriction)),new p({freq:f[n],dtstart:(0,l().eU)(t),interval:s,byweekday:u,tzid:a,byhour:d??0,byminute:c??0,bysecond:0,...m})}const A=1,M=1;function x(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),s=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,o=s>A,r=n.length>=M;return{violatesConstraint:o||r,templateNestingExceedsMaxDepth:o,ancestorHasDailyTemplate:r,nestedDepthOfAutomationAncestors:s,immediateAncestorRecurrenceType:i}}function w(e){var t;const{recurrence:n,afterDate:i}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=i)return n;let o=s().c9.fromMillis(n.start_date,{zone:"utc"});const r=s().c9.fromMillis(i,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(r.diff(o,"years").years/n.interval);o=o.plus({years:e*n.interval});break}case"month":{const e=Math.floor(r.diff(o,"months").months/n.interval);o=o.plus({months:e*n.interval});break}case"week":{const e=Math.floor(r.diff(o,"weeks").weeks/n.interval);o=o.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(r.diff(o,"days").days/n.interval);o=o.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(o.toMillis())}}function k(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=C(w({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function S(e){return 0===e.hour||1===e.hour||2===e.hour}function j(e){return C(e).after((0,l().eU)((0,l().Rz)()))||void 0}function R(e){const{recurrence:t,intl:n}=e,i=j(B(t));if(!i)return;const o=S(t),r=s().c9.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),a=(0,d().Yq)({date:r,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(o)return n.formatMessage(b.dateBetweenMidnightAnd3AM,{date:a});{let e=r.toLocaleString(s().c9.TIME_SIMPLE);return t.timezone!==(0,c().P)()&&(e+=` ${r.toFormat("ZZZZ")}`),n.formatMessage(b.dateAtTime,{date:a,time:e})}}function I(e,t){return(0,r().O9)(e)?"number"===e.type?t.formatMessage(b.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:s().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,r().HB)(e):t.formatMessage(b.noEndCondition)}const T=100;function E(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,r().HB)(e.end_condition):void 0}}function P(e,t,n){return e.plus(n-t)}function U(e,t){const n=s().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function B(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?U(e,e.end_condition):(0,r().HB)(e.end_condition):void 0}}function L(e,t){const n=o().fN(e,(e=>void 0!==e)),s=o().fN(t,(e=>void 0!==e));return o().n4(n,s)}},583690:(e,t,n)=>{n.d(t,{AC:()=>u,I2:()=>d,YC:()=>c});n(296540);var s=()=>n(401497),i=()=>n(212050),o=()=>n(413267),r=()=>n(959013),a=n(474848);function l(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:i}=e,o=(0,s().IS)((e=>({container:{color:t?e.text.secondary:e.text.tertiary}})),[t]);return(0,a.jsxs)("div",{style:o.container,children:[p(t)," ",t?n:i]})}function d(e){const t="none"!==e;return[(0,a.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,a.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,a.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,a.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,a.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,a.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,a.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,a.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,a.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,a.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function p(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,o().b)(t):(0,i().u)(t)}},725649:(e,t,n)=>{function s(e){return!(!e||"askUserToPick"in e)}function i(e){if(!e||!("askUserToPick"in e))return e}function o(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>i,K$:()=>s,j6:()=>o})},747788:(e,t,n)=>{n.d(t,{R:()=>_,Y:()=>v});n(296540);var s=()=>n(484714),i=()=>n(847249),o=()=>n(401497),r=()=>n(883234),a=()=>n(568625),l=()=>n(236262),d=()=>n(433847),c=()=>n(946064),u=()=>n(96689),p=()=>n(959013),m=()=>n(100622),b=()=>n(534177),f=()=>n(963589),g=()=>n(663590),h=()=>n(493823),y=n(474848);function v(e){let{type:t,role:n,events:l,disabled:d,buttonStyle:c,buttonContents:u,icon:m,table:b,isCurrentUser:v,from:C}=e;const{isMobile:A}=(0,s().Y0)(),M=(0,o().IS)((e=>({button:{...c},icon:{width:10,marginLeft:4,fill:e.lightIconColor},label:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},iconContainer:{fill:e.icon.secondary,padding:2}})),[c]),x=m||!d&&r()._,w=(0,i().K8)((()=>"shareMenu"===C&&(0,g().FI)()),[C]),k=(0,f().X)("sharing_anyone_with_the_link");return A&&"shareMenu"===C&&w?d?null:(0,y.jsx)(h().p,{...l,disabled:d,style:M.iconContainer,children:(0,a().L)({height:24,width:24})}):(0,y.jsxs)(h().p,{id:void 0,...l,disabled:d,style:M.button,children:[u||(0,y.jsx)("span",{className:"notranslate",style:M.label,children:(0,y.jsx)(p().sA,{..._({type:t,role:n,table:b,isRemovable:!1,isCurrentUser:v,isRedesignEnabled:w,isPublicShareLink:k}).label})}),x&&x(M.icon)]})}function _(e){let{type:t,role:n,table:s,isRemovable:i,isCurrentUser:o,isRedesignEnabled:r,isPublicShareLink:a}=e;if("access"===n)return{label:d().Sf.variousAccessLabel};if("limited"===n)return{label:d().Sf.limitedAccessLabel};if((0,d().II)(n))return(0,d().sK)(n,s);switch(n){case"editor":return s===u().NX||s===c().y7?{label:d().Sf.workspaceOwnerLabel,caption:d().Sf.workspaceOwnerCaption}:{label:d().Sf.fullAccessLabel,caption:r?d().Sf.fullAccessCaptionV2:d().Sf.fullAccessCaption};case"membership_admin":return s===u().NX||s===c().y7?{label:d().Sf.membershipAdminLabel,caption:d().Sf.membershipAdminCaption}:{label:d().Sf.canEditLabel,caption:r?d().Sf.canEditCaptionV2:d().Sf.canEditCaption};case"read_and_write":return s===u().NX||s===c().y7?{label:d().Sf.memberLabel,caption:d().Sf.memberCaption}:{label:d().Sf.canEditLabel,caption:r?d().Sf.canEditCaptionV2:d().Sf.canEditCaption};case"content_only_editor":return{label:d().Sf.canEditContentLabel,caption:d().Sf.canEditContentCaption};case"reader":return{label:d().Sf.canReadLabel,caption:r?void 0:d().Sf.canReadCaption};case"comment_only":return{label:d().Sf.canCommentLabel,caption:r?d().Sf.canCommentCaptionV2:d().Sf.canCommentCaption};case"none":if("public_permission"===t)return a?{label:i?d().Sf.publicShareLinkRemoveLabel:d().Sf.publicShareLinkNoAccessLabel,hideSelectionCheckIcon:i}:{label:r?d().Sf.unpublishPageLabelV2:d().Sf.unpublishPageLabel,caption:d().Sf.unpublishPageCaption};if(i){if(s===u().NX||s===c().y7)return o?{label:d().Sf.leaveWorkspaceLabel,style:{color:m().Ay.red}}:{label:d().Sf.removeFromWorkspaceLabel,style:{color:m().Ay.red}};{const e="collection_property_permission"===t;return{label:e?d().Sf.removePermissionRuleLabel:d().Sf.removeWorkspaceLabel,style:{color:m().Ay.red},icon:e?(0,l().trashIcon)({height:20,width:20,marginRight:4}):void 0}}}return{label:d().Sf.noAccessLabel,style:{color:m().Ay.red}};default:(0,b().HB)(n)}}},912913:(e,t,n)=>{n.d(t,{Ay:()=>Y});n(944114),n(898992),n(354520),n(672577),n(430670),n(581454),n(296540);var s=()=>n(484714),i=()=>n(847249),o=()=>n(401497),r=()=>n(148307),a=()=>n(433847),l=()=>n(68263),d=()=>n(519831),c=()=>n(946064),u=()=>n(96689),p=()=>n(959013),m=()=>n(534177),b=()=>n(701763),f=()=>n(901389),g=()=>n(780054),h=()=>n(38337),y=()=>n(972435),v=()=>n(722872),_=()=>n(553965),C=()=>n(731320),A=()=>n(836251),M=()=>n(47170),x=()=>n(928074),w=()=>n(962730),k=()=>n(351360),S=()=>n(991249),j=()=>n(859428),R=()=>n(112698),I=n(474848);function T(e){const t=(0,s().v3)(),{render:n,upsell:i,analyticsName:o,renderUpgradeTooltip:r,onUpgradeClick:a,alwaysAllowClick:l,tooltipPlacement:d,upgradeButtonDesktopStyle:c,upgradeButtonMobileStyle:u}=e;let p,{onClick:m,renderTooltip:b}=e;return i&&"product"===i.type&&(p=(0,I.jsx)(R().B,{upsell:i,analyticsName:o,desktopStyle:{display:"inline-block",pointerEvents:"none",...c},mobileStyle:{display:"inline-block",pointerEvents:"none",...u}}),l||(m=e=>{S().K(t,{from:o,upsell:i}),a&&a(e)},b=r)),(0,I.jsx)(j().A,{renderTooltip:b||(()=>null),render:e=>n((0,_().A)(e,{onClick:m}),p),disableTooltip:!b,placement:d})}var E=()=>n(807778),P=()=>n(134217),U=()=>n(10984),B=()=>n(577437),L=()=>n(760217),D=()=>n(406699),N=()=>n(928600),W=()=>n(939740),O=()=>n(824160),H=()=>n(89924),F=()=>n(125565),K=()=>n(719147),Z=()=>n(747788),V=()=>n(103448);const X=(0,p().YK)({fullAccessTeamGuestsDisabledMessage:{id:"permissionRoleSelect.teamGuestPermissionItem.disabledPermissionitem.tooltip",defaultMessage:"Teamspace guests can't have full access."}});const Y=function(e){let{isUserPermission:t,type:r,table:b,role:f,isInvite:g,availableRoleItems:_,roleItemOverrides:A,blockType:M,onClick:x,onClose:w,origin:k,isMenuItem:S,isRemovableOverride:j,disabled:R,buttonContents:T,buttonPopupStore:E,buttonStyle:P,placementToOrigin:U,alignmentToOrigin:B,upgradeButtonName:O,onUpgradeButtonClick:K,onChange:V,onRemoveMemberClick:Y,onRemoveSelfClick:z,header:q,footer:Q,showPermissionOverrideWarning:ee,from:te}=e;const ne=(0,s().v3)(),se=(0,i().uB)(E,n(463830).A),{device:ie}=ne,oe=Boolean(t),re=(0,n(963589).X)("sharing_anyone_with_the_link"),ae=(0,i().K8)((()=>function(e){let{type:t,table:n,role:s,isInvite:i,availableRoleItems:o,roleItemOverrides:r,blockType:a,isPublicShareLink:p}=e;if(o&&o.length>0)return o;if("trusted_domain_permission"===t)return[{role:"reader"},{role:"none"}];if(n===d().Vl)return[{role:"editor"},{role:"read_and_write"},{role:"content_only_editor"},{role:"comment_only"},{role:"reader"},{role:"none"}];if(n===c().y7){let e=l().Gb.map((e=>({role:e})));return i&&(e=e.filter((e=>"none"!==e.role))),e}const m=[];"explicit_team_guest_permission"===t?m.push({role:"editor",disabledInfo:{isDisabled:!0,disabledMessage:y().A.formatMessage(X.fullAccessTeamGuestsDisabledMessage)}}):"bot_permission"!==t&&"public_permission"!==t&&m.push({role:"editor"});"space"===n&&(0,C().Qu)()&&m.push({role:"membership_admin"});m.push({role:"read_and_write"}),"collection_view"!==a&&"collection_view_page"!==a||"bot_permission"===t&&"content_only_editor"!==s||"public_permission"===t||m.push({role:"content_only_editor"});n!==u().NX&&("bot_permission"!==t&&m.push({role:"comment_only"}),"bot_permission"===t&&"reader"!==s||m.push({role:"reader"}));i||m.push({role:"none"});if(!r)return m;return m.map((e=>{const t=r.find((t=>t.role===e.role));return t||e}))}({type:r,table:b,role:f,isInvite:g,availableRoleItems:_,roleItemOverrides:A,blockType:M,isPublicShareLink:re})),[r,b,f,g,_,A,M,re]),le=(0,i().K8)((()=>"shareMenu"===te&&(0,n(663590).FI)()),[te]),de=(0,i().K8)((()=>ie.isMobile&&le),[ie,le]),ce=(0,i().K8)((()=>se.state.open),[se]),ue=(0,o().IS)((e=>({buttonPopupSheet:{borderTopLeftRadius:12,borderTopRightRadius:12,overflow:"hidden",paddingBottom:10,background:e.surface.wash},menuList:{width:"100%",margin:"0 auto"},sectionMenuItem:{overflow:"hidden",background:e.buttonBackground,borderRadius:12,marginLeft:16,marginRight:16,marginBottom:16,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,padding:void 0},scrollerStyle:{background:e.surface.wash},header:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:e.surface.wash,paddingTop:12,paddingBottom:20},headerLabel:{fontSize:16,fontWeight:n(284371).Wy.semibold,marginBottom:12},headerContent:{width:"100%"}})),[]);return(0,I.jsx)(D().Ay,{style:de?ue.buttonPopupSheet:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation(),x&&x()},onClose:w,popupType:ie.isMobile?D().z7.SlideUp:D().z7.Popup,buttonPopupStore:se,open:ce,renderOrigin:e=>k||(S?(0,I.jsx)(L().A,{...e,title:(0,I.jsx)(p().sA,{...(0,Z().R)({type:r,role:f,table:b,isRemovable:!1,isCurrentUser:oe,isRedesignEnabled:le,isPublicShareLink:re}).label}),focused:!1,showExtensionArrow:!0}):(0,I.jsx)(Z().Y,{type:r,role:f,events:e,disabled:R,buttonContents:T,buttonStyle:P,table:b,isCurrentUser:oe,from:te})),placementToOrigin:U||n(700250).UV.Bottom,alignmentToOrigin:B,render:e=>{let s,i;if((0,a().II)(f))s=[{key:"mixed_role_section",render:e=>(0,I.jsx)(H().A,{...e,topBorder:!1}),items:[{key:"mixed_role_description",render:()=>(0,I.jsx)(n(192421).F,{role:f}),action:()=>{}}]},{key:"bot_capabilities_warning",render:e=>(0,I.jsx)(H().A,{...e,topBorder:!0}),items:[{key:"warning_details",render:e=>(0,I.jsx)(n(678553).Ay,{...e,shouldWrapCaption:!0,caption:"Integration permissions cannot be changed on a page. You can manage integrations in settings."}),action:()=>{}}]},{key:"remove_bot",render:e=>(0,I.jsx)(H().A,{...e,topBorder:!0}),items:[{key:"none",render:e=>(0,I.jsx)(G,{from:te,role:f,upgradeButtonName:O,onUpgradeButtonClick:K,focused:e.focused,props:e,availableRole:{role:"none"},isCurrentUser:Boolean(t),isRemovableOverride:j,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{$("none",b,f,r,O,ne,ae,re,V,K,t,Y,z),e.close()}}]}];else if(s=[{key:"roles",render:e=>(0,I.jsx)(H().A,{...e,topBorder:0!==e.index,style:de?ue.sectionMenuItem:void 0}),items:ae.flatMap((n=>{const s={key:n.role,render:e=>(0,I.jsx)(G,{from:te,role:f,upgradeButtonName:O,onUpgradeButtonClick:K,focused:e.focused,props:e,availableRole:n,isCurrentUser:Boolean(t),isRemovableOverride:j,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{$(n.role,b,f,r,O,ne,ae,re,V,K,t,Y,z),e.close()}};return le&&"none"===n.role?[]:[n.prefixItem,s].filter(m().O9)}))}],le){const n=ae.find((e=>"none"===e.role));(null==n?void 0:n.prefixItem)&&!ie.isMobile&&s.push({key:"prefix-item",render:e=>(0,I.jsx)(H().A,{...e,topBorder:!0,style:de?ue.sectionMenuItem:void 0}),items:[null==n?void 0:n.prefixItem].filter(m().O9)});const i=ae.filter((e=>"none"===e.role));i.length>0&&s.push({key:"none-role",render:e=>(0,I.jsx)(H().A,{...e,topBorder:!(ie.isMobile&&le),style:de?ue.sectionMenuItem:void 0}),items:i.flatMap((n=>{const s={key:n.role,render:e=>(0,I.jsx)(G,{from:te,role:f,upgradeButtonName:O,onUpgradeButtonClick:K,focused:e.focused,props:e,availableRole:n,isCurrentUser:Boolean(t),isRemovableOverride:j,table:b,type:r,isRedesignEnabled:le,isPublicShareLinkEnabled:re}),action:()=>{$(n.role,b,f,r,O,ne,ae,re,V,K,t,Y,z),e.close()}};return ie.isMobile?[n.prefixItem,s].filter(m().O9):[s].filter(m().O9)}))})}return i=ie.isMobile?{menuType:v().gu.Modal,title:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.mobile.title",defaultMessage:"Select role"}),right:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.mobile.doneButton.label",defaultMessage:"Done"}),onClickRight:e.close}:{menuType:v().gu.Popup,width:264},de?(0,I.jsx)(N().A,{scrollerStyle:ue.scrollerStyle,menuType:v().gu.Popup,height:"50vh",maxWidth:"100%",className:h().yw8,header:(0,I.jsxs)("div",{style:ue.header,children:[(0,I.jsx)(F().A,{style:ue.headerLabel,children:(0,I.jsx)(p().sA,{defaultMessage:"Change access",id:"PermissionRoleSelect.Header.ChangeAccess"})}),(0,I.jsx)("div",{style:ue.headerContent,children:q})]}),footer:(0,I.jsx)(I.Fragment,{children:Q}),children:(0,I.jsx)(W().Ay,{type:W().Oh.Vertical,initialFocus:void 0,sections:s,style:ue.menuList})}):(0,I.jsx)(N().A,{className:h().yw8,header:q,footer:(0,I.jsxs)(I.Fragment,{children:[Q,ee&&(0,I.jsx)(J,{})]}),...i,children:(0,I.jsx)(W().Ay,{type:W().Oh.Vertical,initialFocus:void 0,sections:s})})}})};function z(e,t,n,s){if(!s&&t!==c().y7){if((t===u().NX?l().NB(e):l().p2(e)&&!l().Km(e))&&"public_permission"!==n&&"bot_permission"!==n)return t===u().NX?(0,I.jsx)(V().A,{imageURL:r().A.images.tooltips.upsells.spaceReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,I.jsx)(p().sA,{defaultMessage:"Members cannot change workspace settings or invite new members.",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.caption"}),title:(0,I.jsx)(p().sA,{defaultMessage:"Upgrade to add non-admin members",id:"permissionRoleSelect.spaceReadAndWriteUpgradeTooltip.title"})}):(0,I.jsx)(V().A,{imageURL:r().A.images.tooltips.upsells.userReadAndWritePng,imageWidth:240,imageHeight:100,caption:(0,I.jsx)(p().sA,{defaultMessage:"Users with edit access can edit a page but not share it with others.",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.caption"}),title:(0,I.jsx)(p().sA,{defaultMessage:"Upgrade to add editors",id:"permissionRoleSelect.userReadAndWriteUpgradeTooltip.title"})})}return!1}function q(e,t){if(void 0!==t)return t;switch(e){case"user_permission":case"bot_permission":case"group_permission":case"collection_property_permission":return!0;case"space_permission":case"space_owner_permission":case"explicit_team_permission":case"team_permission":case"team_owner_permission":case"explicit_team_owner_permission":case"explicit_team_guest_permission":case"public_permission":case"trusted_domain_permission":case"exclusive_user_permission":return!1;default:(0,m().HB)(e)}}async function $(e,t,n,s,i,o,r,l,d,m,h,y,v){var _,C;const M=(0,x().u)();if(n===e)return;const w=()=>{d&&d(e)};b().Uo({newRole:e,availableRoles:r});const j=await(0,B().Se)(o,{name:"block_read_and_write_role",spaceId:null===(_=k().default.state.currentSpaceStore)||void 0===_?void 0:_.id,userId:null===(C=k().default.state.currentUserStore)||void 0===C?void 0:C.id});if(z(e,t,s,j)&&!g().A.isAdminMode)S().K(o,{from:i,upsell:{type:"product",product:P().Si(o)||"plus",limit:{type:"none"},trialability:"none"}}),m&&m();else if(function(e,t,n){return n&&(0,a().$q)(t,e)===t&&"none"===e}(e,n,h))v?v():f().ui({showCancel:!0,keepFocus:!1,message:t===u().NX||t===c().y7?(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access? You will lose access to the workspace, and any private pages will be lost."}):(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove your own access?"}),items:[{label:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeSelfButton.label",defaultMessage:"Remove"}),color:"red",onAccept:w}]});else if(function(e,t,n){return n&&(0,a().$q)(t,e)===t}(e,n,h))f().ui({showCancel:!0,keepFocus:!1,message:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfFromWorkspaceOrPage.confirmationMessage",defaultMessage:"Are you sure you want to downgrade your own access?"}),items:[{label:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.downgradePermissionsModal.downgradeSelfButton.label",defaultMessage:"Downgrade"}),color:"red",onAccept:w}]});else if(function(e,t){return(t===u().NX||t===c().y7)&&"none"===e}(e,t))if(y)y();else{await async function(e){const{message:t}=e;return new Promise((e=>{f().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),message:t,items:[{label:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserButton.label",defaultMessage:"Remove"}),color:"red",onAccept:()=>e(!0)}]})}))}({message:(R=!0,R&&(0,U().OX)()?(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.enterprise.confirmationMessage",defaultMessage:"If you remove this member, they will lose workspace access. After their removal, you may transfer their private pages to another member. <transferpagelink>Learn more</transferpagelink>.",values:{transferpagelink:e=>(0,I.jsx)(K().A,{href:(0,A().xS)("guides.transferContent"),external:!0,children:e})}}):R?(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromWorkspace.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to the workspace, and any private pages will be lost."}):(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.removeUserFromPage.confirmationMessage",defaultMessage:"Are you sure you want to remove this person?"}))})&&w()}else if(function(e,t){return"public_permission"===e&&"none"===t}(s,e)&&M&&!l){await async function(){return new Promise((e=>{f().ui({showCancel:!0,keepFocus:!1,handleCancel:()=>e(!1),description:(0,I.jsx)(p().sA,{id:"permissionRoleSelect.unpublishConfirmation.description",defaultMessage:"Removing access will unpublish this page from the web."}),message:(0,I.jsx)(p().sA,{id:"permissionRoleSelect.unpublishConfirmation.message",defaultMessage:"Are you sure you want to remove access?"}),items:[{label:(0,I.jsx)(p().sA,{id:"userPermissionsMenu.removePermissionsModal.unpublishAction.label",defaultMessage:"Remove access"}),color:"red",onAccept:()=>e(!0)}]})}))}()&&w()}else w();var R}function G(e){const{availableRole:t,isCurrentUser:n,role:r,table:a,type:l,isRemovableOverride:d,upgradeButtonName:c,onUpgradeButtonClick:u,isRedesignEnabled:m,isPublicShareLinkEnabled:b,from:f}=e,{label:g,caption:h,hideSelectionCheckIcon:y,icon:v}=(0,Z().R)({type:l,role:t.role,table:a,isRemovable:q(l,d),isCurrentUser:n,isRedesignEnabled:m,isPublicShareLink:b}),C=(0,o().DP)(),A=(0,s().v3)(),x=(0,M().O)(),S=(0,i().K8)((()=>{var e;return null===(e=A.currentUser)||void 0===e?void 0:e.id}),[A]),{device:R}=A,{onClick:P,key:U,...D}=e.props,N=t.disabledInfo,W=R.isMobile&&m,H=(0,B()._X)({name:"block_read_and_write_role",spaceId:x,userId:S}),F=(0,i().K8)((()=>z(t.role,a,l,"available"===(null==H?void 0:H.type))),[t,a,l,H]),K=(0,i().K8)((()=>A.device.isMobile&&!E().S$()),[A]),V=Boolean(F),X=(0,i().K8)((()=>{var e;return null===(e=k().default.getState().currentSpaceStore)||void 0===e?void 0:e.canAdmin()}),[]),Y=V&&(!X||K),$=(0,o().IS)((e=>{const t={backgroundColor:e.surface.elevated,paddingTop:12,paddingBottom:12,borderBottomWidth:1,borderBottomStyle:"solid",borderBottomColor:e.stroke.secondary};return{buttonMenuItem:{...t},redButtonMenuItem:{...t,color:e.text.uiRedPrimary},disabledButtonMenuItem:{...t,color:e.text.tertiary}}}),[]);return R.isMobileNative&&V?null:N&&N.isDisabled?(0,I.jsx)(j().A,{delayThreshold:0,renderTooltip:e=>(0,I.jsx)("div",{...e,children:N.disabledMessage}),placement:w().W.Right,textWrap:!0,render:n=>(0,I.jsx)(L().A,{style:W?$.disabledButtonMenuItem:void 0,...n,focused:e.focused,disabled:!0,disabledFeedback:!0,isChecked:r===t.role&&!y,title:(0,I.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,I.jsx)("div",{style:{...e.style,marginRight:F?6:0},children:(0,I.jsx)(p().sA,{...g})})}),caption:h&&(0,I.jsx)("span",{style:{color:C.text.secondary},children:(0,I.jsx)(p().sA,{...h})}),shouldWrapCaption:!0})}):(0,I.jsx)(T,{upsell:V&&("unavailable"===(null==H?void 0:H.type)?H.upsell:void 0),analyticsName:c,renderUpgradeTooltip:()=>F,tooltipPlacement:w().W.Left,onClick:P,onUpgradeClick:u,render:(n,s)=>{const{focused:i,...o}=(0,_().A)(D,n);return(0,I.jsx)(L().A,{...o,style:W?"none"===t.role?$.redButtonMenuItem:$.buttonMenuItem:void 0,focused:i||e.focused,isChecked:r===t.role&&!y,title:(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsxs)("div",{style:{...e.style,marginRight:F?6:0,display:"flex",alignItems:"center"},children:[v,(0,I.jsx)(p().sA,{...g})]}),s,e.availableRole.tag&&(0,I.jsx)(O().A,{desktopStyle:{marginLeft:7},children:e.availableRole.tag})]}),caption:h&&(0,I.jsx)("span",{style:{color:C.text.secondary},children:(0,I.jsx)(p().sA,{...h})}),shouldWrapCaption:!0,disabled:Y,isRedOnHover:(m||"spaceSettings"===f)&&!Y&&"none"===t.role})}})}function J(){const e=(0,o().DP)(),t=(0,s().v3)(),{device:n}=t;return(0,I.jsx)(F().A,{style:{padding:12,backgroundColor:e.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${e.regularDividerColor}`,marginTop:n.isMobile?28:1},isMultiline:!0,isSmall:!0,children:(0,I.jsx)(p().sA,{id:"permissionRoleSelect.overrideMessage.caption",defaultMessage:"You’ll override permissions from the parent page if you change this role."})})}}}]);