"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[90625],{47218:(e,t,a)=>{a.r(t),a.d(t,{arrowExpandDiagonalBottomLeftToTopRightIcon:()=>o,iconDefinition:()=>n});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M11.14 4.485h3.491l-4.073 4.073a.625.625 0 0 0 .884.884l4.073-4.073v3.49a.625.625 0 1 0 1.25 0v-5a.625.625 0 0 0-.625-.624h-5a.625.625 0 1 0 0 1.25M4.485 14.631l4.07-4.07a.625.625 0 0 1 .884.884l-4.07 4.07h3.49a.625.625 0 1 1 0 1.25h-5a.625.625 0 0 1-.624-.625v-5a.625.625 0 1 1 1.25 0z"})},o=(0,a(340498).wt)("arrowExpandDiagonalBottomLeftToTopRight",n)},87017:(e,t,a)=>{a.r(t),a.d(t,{duplicateBlocks:()=>L,duplicateBlocksWithMaybeConfirmation:()=>N,insertBlockAbove:()=>x,insertBlockAndEdit:()=>P,insertBlockBelow:()=>I,insertTextAbove:()=>j,insertTextBelow:()=>T});a(18107),a(944114),a(967357);var n=()=>a(908006),o=()=>a(206267),i=()=>a(161479),r=()=>a(496603),s=()=>a(855801),c=()=>a(466614),l=()=>a(60867),d=()=>a(171718),u=()=>a(901389),m=()=>a(620689),g=()=>a(797265),p=()=>a(751156),f=()=>a(838256),v=()=>a(521358),b=()=>a(799832),y=()=>a(413962),M=()=>a(405417),k=()=>a(328732),S=()=>a(53664),A=()=>a(393255),h=()=>a(77246),C=()=>a(502438),w=()=>a(611371);async function N(e){const{environment:t,blocks:a,duplicateOnlyCollectionSchema:o,callback:i}=e;if(!(0,w().EF)(t))return;const r=await s().VI.duplicateActions.load();let c=a;if(1===a.length){const e=await v().rW({environment:t,block:a[0],action:"duplicate"});if("user_canceled"===e)return void(null==i||i());c=e}const d=c.at(0);if(!d)return;const u=(0,b().U)(d);if(u&&(0,M().ls)(d,u))await l().un({blocks:c,environment:t,analyticsFrom:"subitem_duplication",callback:i,collectionContextStore:u});else{const{serverCommitResult:e}=p().createAndCommit({userAction:"actionRegistry.duplicateToSelection",environment:t,canUndo:!0,perform:e=>{L({environment:t,blocks:c,transaction:e,preferDuplicateLocation:"local",duplicateOnlyCollectionSchema:o,duplicateActions:r})},transactionTooBigFallback:e=>{L({environment:t,blocks:c,transaction:e,preferDuplicateLocation:"server",duplicateOnlyCollectionSchema:o,duplicateActions:r})}});e.then(i)}n().default.afterNextFlush((()=>{m().BM({environment:t})}))}function L(e){const{environment:t,blocks:a,transaction:n,preferDuplicateLocation:o,lastTopLevelBlockStore:s,preventSetSelection:l,duplicateOnlyCollectionSchema:d,duplicateActions:m}=e,p=r().$z(a,(e=>e.getFormat().app_id??e.id)),f=[];return r().jJ(p,(e=>{const a=e[0],r=!a.isTransclusionType(),{blockStores:s,onComplete:l}=m.duplicateBlock({environment:t,stores:e,transaction:n,targetSpaceId:(0,i().e)(a.pointer.spaceId),preferDuplicateLocation:o,options:{addCopyName:(0,S().A)(a),deepCopyTransclusionContainers:r,resolveTemplateVariables:!(a.isInsideTemplate()||a.isInsideFactoryOrDuplicateBlocksAction()),duplicateOnlyCollectionSchema:d}});f.push(...s),l.then((e=>{if("error"===e.status){const a=e.error;c().Rk(a)?c().UK(t,{product:a.clientData.metadata.product}):u().f1(e.errorMessage)}}))})),g().LE({blocksToInsert:f,target:s?[s]:a,environment:t,transaction:n,replaceEmptyTextBlock:!1,preventSetSelection:l}),f}function I(e){const{environment:t,createBlockItem:a,selection:n,transaction:o,analyticsFrom:i,preventSetSelection:r}=e,s=C().default.getCurrentRecordCache(),c=new(f().UF)({environment:t,userFlow:"page"===(null==a?void 0:a.blockType)?"user_flow_create_page":"user_flow_create_block",succeedOnEnqueue:!0});let l;if((0,w().EF)(t)&&a&&s){const e=d().w({environment:t,createBlockItem:a,transaction:o,inMemoryRecordCache:s,from:i,selection:n});c.track(e.pointer,o),l=g().LE({environment:t,blocksToInsert:[e],target:n,transaction:o,replaceEmptyTextBlock:!1,preventSetSelection:r})[0]}else c.fail("invalid_state");return l}function x(e){const{environment:t,createBlockItem:a,selection:n,transaction:o,analyticsFrom:i,preventSetSelection:r}=e,s=C().default.getCurrentRecordCache();let c;if((0,w().EF)(t)&&a&&s){const e=d().w({environment:t,createBlockItem:a,transaction:o,inMemoryRecordCache:s,from:i,selection:n});c=g().t1({environment:t,blocks:[e],selection:n,transaction:o,preventSetSelection:r})[0]}return c}function P(e){const{environment:t,selection:a,transaction:n}=e,i=I({...e,preventSetSelection:!0});if(i){var r;g().x5({environment:t,insertedStores:[i],isCreated:!0});const e=h().Uv.getMode(i);if("suggest"===e){const e=y().RR(t,n,i);y().tM(n,i,{id:o().JW(),type:"insert",discussionId:e.id}),y().c3({environment:t,transaction:n,discussionStore:e,addModifiedBlockIdsAfter:[i.id]})}"suggest"===e&&null!==(r=i.getNavigableBlockStore({skipCurrent:!0}))&&void 0!==r&&r.isCommentOnly()||g().um({transaction:n,blocks:a})}return i}function T(e){const{blocks:t,transaction:a,environment:o,skipAnalytics:i}=e,r=i?void 0:"text_insert_below",s=I({environment:o,selection:t,createBlockItem:k().ry.text,analyticsFrom:r,transaction:a});return s&&n().default.afterNextFlush((()=>{A().zz({environment:o,blockStore:s,insertedTextBlockLocation:"below"})})),s}function j(e){const{blocks:t,transaction:a,environment:o,skipAnalytics:i}=e,r=i?void 0:"text_insert_below",s=x({environment:o,selection:t,createBlockItem:k().ry.text,analyticsFrom:r,transaction:a});return s&&n().default.afterNextFlush((()=>{A().zz({environment:o,blockStore:s,insertedTextBlockLocation:"above"})})),s}},124524:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(296540),o=()=>a(484714),i=()=>a(401497),r=()=>a(340498),s=a(474848);const c="M19 6V4C19 2.34315 17.6569 1 16 1V1C14.3431 1 13 2.34315 13 4V8",l="M7 7.5V5.5C7 3.84315 8.34315 2.5 10 2.5V2.5C11.6569 2.5 13 3.84315 13 5.5V7.5";function d(e){let{isLocked:t,color:a="primary",size:d="default",style:u}=e;const{isMobile:m}=(0,o().Y0)(),g="number"==typeof d?d:m?r().lD[d]:r().Ev[d],p=(0,n.useRef)(!0),[f,v]=(0,n.useState)(""),b=(0,i().IS)((e=>({icon:{width:g,height:g,stroke:"inherit"===a?"inherit":e.icon[a],...u,fill:"none"}})),[a,g,u]);return(0,n.useEffect)((()=>{p.current?p.current=!1:v(t?"unlocked-to-locked":"locked-to-unlocked")}),[t]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{children:`\n\t\t\t\t.unlocked-to-locked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: unlocked-to-locked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t.locked-to-unlocked {\n\t\t\t\t\tanimation-duration: 0.75s;\n\t\t\t\t\tanimation-name: locked-to-unlocked;\n\t\t\t\t\tanimation-fill-mode: forwards;\n\t\t\t\t}\n\n\t\t\t\t@keyframes unlocked-to-locked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.11, 0, 0.5, 0);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.34, 1.56, 0.64, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes locked-to-unlocked {\n\t\t\t\t\t0% {\n\t\t\t\t\t\td: path("${l}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.36, 0, 0.66, -0.56);\n\t\t\t\t\t}\n\t\t\t\t\t50% {\n\t\t\t\t\t\td: path("M7 6V4C7 2.34315 8.34315 1 10 1V1C11.6569 1 13 2.34315 13 4V8");\n\t\t\t\t\t\ttransition-timing-function: linear;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\td: path("${c}");\n\t\t\t\t\t\ttransition-timing-function: cubic-bezier(0.5, 1, 0.89, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t`}),(0,s.jsxs)("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:b.icon,children:[(0,s.jsx)("rect",{x:"4.5",y:"8",width:"11",height:"9",rx:"2",strokeWidth:"1.25"}),(0,s.jsx)("circle",{cx:"10",cy:"11.5",r:"0.5",strokeWidth:"1.25"}),(0,s.jsx)("path",{d:"M10 14V11.5",strokeWidth:"1.25",strokeLinecap:"round"}),(0,s.jsx)("path",{className:f,d:t?l:c,strokeWidth:"1.25",strokeLinecap:"round"})]})]})}},163580:(e,t,a)=>{a.d(t,{VT:()=>s,b0:()=>c,gz:()=>l});a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var n=()=>a(799288),o=()=>a(332393),i=()=>a(351360),r=()=>a(630116);function s(e,t){const a=t.getAlive(),o=(0,n().hu)(t),i=!c(t),r=c(t),s=Boolean(e.currentUser.id===t.getParentId());return a&&o&&(r&&s||i)}function c(e){if(!e.getAlive||!(0,n().hu)(e))return!1;const{currentUserRootStore:t}=i().default.state,a=e.getIntegrationId();if(!t||!a)return!1;const s=(0,r().Oo)(t,{id:a,table:o().Li}).getKeyStore("type").getValue();return!e.isInternalBot(s?{type:s}:void 0)}function l(e){const{externalIntegrationStoreState:t,integrationId:a}=e;if(!t.loaded)return;const o=t.externalAuthentications.map((e=>{let{parent_id:t}=e;return t})),i=new Set(o),r=t.bots.filter((e=>e.alive&&i.has(e.id)&&(0,n().Sd)(e)&&e.integration_id===a));return r.length?r[0]:void 0}},173614:(e,t,a)=>{a.d(t,{c:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M7.663 5.794a2.77 2.77 0 1 1-5.539 0 2.77 2.77 0 0 1 5.539 0m-1.25 0a1.52 1.52 0 1 0-3.039 0 1.52 1.52 0 0 0 3.039 0m2.497-.55a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.054 0a.55.55 0 1 0 0 1.1h.098a.55.55 0 0 0 0-1.1zm2.602 4.329a.55.55 0 0 0-.952-.552l-.049.085a.55.55 0 0 0 .952.55zm-6.208-.552a.55.55 0 0 0-.952.552l.049.084a.55.55 0 0 0 .952-.551zm5.182 2.324a.55.55 0 0 0-.952-.552l-.05.085a.55.55 0 1 0 .953.551zm-4.156-.551a.55.55 0 0 0-.951.55l.048.085a.55.55 0 1 0 .952-.551zm6.722-2.231a2.77 2.77 0 1 0 0-5.538 2.77 2.77 0 0 0 0 5.538m0-1.25a1.52 1.52 0 1 1 0-3.038 1.52 1.52 0 0 1 0 3.038m-2.336 7.343a2.77 2.77 0 1 1-5.54 0 2.77 2.77 0 0 1 5.54 0m-1.25 0a1.52 1.52 0 1 0-3.04 0 1.52 1.52 0 0 0 3.04 0"})},o=(0,a(340498).wt)("integration",n)},290625:(e,t,a)=>{a.d(t,{Xv:()=>mt,_J:()=>st,qQ:()=>rt,JS:()=>ra,SH:()=>va,bH:()=>ba,tA:()=>_e,O5:()=>Be,qI:()=>De,EX:()=>Ze,fg:()=>Qe,Fh:()=>Je,cy:()=>et,TD:()=>$e,wy:()=>dt,Zk:()=>lt,oq:()=>ot,b2:()=>Ve});a(18107),a(967357),a(898992),a(823215),a(354520),a(430670),a(803949),a(581454),a(737550),a(296540);var n=()=>a(700500),o=()=>a(651124),i=()=>a(857639),r=()=>a(340498),s=a(474848);const c={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM5.125 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125h-5.5A2.125 2.125 0 0 1 5.125 12.5zm2.125-.875a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},l=(0,r().wt)("alignCenter",c),d={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM2.375 7.5c0-1.174.951-2.125 2.125-2.125H10c1.174 0 2.125.951 2.125 2.125v5A2.125 2.125 0 0 1 10 14.625H4.5A2.125 2.125 0 0 1 2.375 12.5zM4.5 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875H10a.875.875 0 0 0 .875-.875v-5A.875.875 0 0 0 10 6.625zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},u=(0,r().wt)("alignLeft",d),m={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M3 2.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zM7.875 7.5c0-1.174.951-2.125 2.125-2.125h5.5c1.174 0 2.125.951 2.125 2.125v5a2.125 2.125 0 0 1-2.125 2.125H10A2.125 2.125 0 0 1 7.875 12.5zM10 6.625a.875.875 0 0 0-.875.875v5c0 .483.392.875.875.875h5.5a.875.875 0 0 0 .875-.875v-5a.875.875 0 0 0-.875-.875zM2.375 16.5c0-.345.28-.625.625-.625h14a.625.625 0 1 1 0 1.25H3a.625.625 0 0 1-.625-.625"})},g=(0,r().wt)("alignRight",m);var p=()=>a(519143),f=()=>a(955363),v=()=>a(613850),b=()=>a(3284);const y={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M10 17.625a7.625 7.625 0 1 1 0-15.25 7.625 7.625 0 0 1 0 15.25m-1.046-4.769 3.834-2.236a.718.718 0 0 0 0-1.24L8.954 7.144a.718.718 0 0 0-1.079.62v4.472c0 .554.6.9 1.08.62"})},M=(0,r().wt)("arrowTriangleRightCircleFill",y),k={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M15.63 4.75a.625.625 0 1 1 1.25 0v5a2.125 2.125 0 0 1-2.125 2.125H4.264l3.333 3.333a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884.884l-3.333 3.333h10.49a.875.875 0 0 0 .876-.875z"})},S=(0,r().wt)("arrowTurnDownLeft",k);var A=()=>a(202017);const h={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"M5.625 2a.625.625 0 1 0-1.25 0v2.375H2a.625.625 0 1 0 0 1.25h2.375V13.5c0 1.174.951 2.125 2.125 2.125h7.875V18a.625.625 0 1 0 1.25 0v-2.375H18a.625.625 0 1 0 0-1.25h-2.375V6.5A2.125 2.125 0 0 0 13.5 4.375H5.625zm0 3.625H13.5c.483 0 .875.392.875.875v7.875H6.5a.875.875 0 0 1-.875-.875z"})},C=(0,r().wt)("crop",h);var w=()=>a(424139),N=()=>a(742852),L=()=>a(90907);const I={viewBox:"0 0 20 20",svg:(0,s.jsx)("path",{d:"m4.897 3.085-.122-.142a.625.625 0 0 0-.95.814l3.18 3.71h-3.98a.625.625 0 0 0-.367 1.13L6.6 11.462l-1.506 4.636a.625.625 0 0 0 .962.699L10 13.932l3.943 2.865a.625.625 0 0 0 .903-.183l1.215 1.418a.625.625 0 1 0 .95-.814l-.495-.576a.6.6 0 0 1-.127-.113l-11.4-13.3a.6.6 0 0 1-.093-.144m.051 5.632h3.129l5.018 5.853.027.085-2.755-2.001a.625.625 0 0 0-.734 0l-2.755 2 1.052-3.237a.625.625 0 0 0-.227-.7zm8.633 2.613 3.762-2.733a.625.625 0 0 0-.367-1.13H12.1L10.594 2.83a.625.625 0 0 0-1.188 0L8.55 5.463l.953 1.112L10 5.046l1.052 3.239a.625.625 0 0 0 .595.432h3.404l-2.287 1.662z"})},x=(0,r().wt)("starSlash",I),P=(0,r().wt)("timeBy",{viewBox:"0 0 30 30",svg:(0,s.jsx)("path",{d:"M14 25H16V15H14C13.919 15.164 13.209 15.698 12 15.909V17.94C12.743 17.85 13.416 17.652 14 17.388V25ZM25 4C25 2.343 23.657 1 22 1C20.343 1 19 2.343 19 4H11C11 2.343 9.657 1 8 1C6.343 1 5 2.343 5 4H1V29H29V4H25ZM21 4C21 3.449 21.448 3 22 3C22.552 3 23 3.449 23 4V6C23 6.551 22.552 7 22 7C21.448 7 21 6.551 21 6V4ZM7 4C7 3.449 7.448 3 8 3C8.552 3 9 3.449 9 4V6C9 6.551 8.552 7 8 7C7.448 7 7 6.551 7 6V4ZM27 27H3V13H27V27ZM27 11H3V6H5C5 7.657 6.343 9 8 9C9.657 9 11 7.657 11 6H19C19 7.657 20.343 9 22 9C23.657 9 25 7.657 25 6H27V11Z"})});var T=()=>a(763884),j=()=>a(919709),U=()=>a(959013),_=()=>a(496603),R=()=>a(522986),B=()=>a(899038),V=()=>a(675074),F=()=>a(896628),D=()=>a(383594),z=()=>a(246826),E=()=>a(778417),O=()=>a(751156),q=()=>a(633457),H=()=>a(727722),W=()=>a(799832),K=()=>a(575143),G=()=>a(124524),X=()=>a(89924),Y=()=>a(250202),$=()=>a(546692),Z=()=>a(375078),Q=()=>a(878377),J=()=>a(943846),ee=()=>a(972435),te=()=>a(792609),ae=()=>a(486666),ne=()=>a(165162),oe=()=>a(869562),ie=()=>a(919878),re=()=>a(178687),se=()=>a(351360),ce=()=>a(227440),le=()=>a(522200),de=()=>a(443616),ue=()=>a(63759),me=()=>a(316221),ge=()=>a(599364),pe=()=>a(254452),fe=()=>a(797583),ve=()=>a(654056),be=()=>a(416726),ye=()=>a(566908),Me=()=>a(288502),ke=()=>a(354406),Se=()=>a(137743),Ae=()=>a(668491),he=()=>a(22913),Ce=()=>a(363019),we=()=>a(287133),Ne=()=>a(843005);const Le="block menu navigation",Ie=(0,U().YK)({fixLegacyTransclusion:{id:"action.fixLegacyTransclusion.name",defaultMessage:"Fix legacy transclusion"},insertBelowName:{id:"action.insertBelow.name",defaultMessage:"Insert below"},startPresentationName:{id:"action.startPresentation.name",defaultMessage:"Start presentation"},copyDirectLinkName:{id:"action.copyDirectLink.name",defaultMessage:"Copy link to original"},openasPageName:{id:"action.openasPage.name",defaultMessage:"Open as page"},copyLinksName:{id:"action.copyLinks.name",defaultMessage:"Copy links to all"},viewOriginalName:{id:"action.viewOriginal.name",defaultMessage:"View original"},openInBrowserName:{id:"action.openInBrowser.name",defaultMessage:"Open in browser"},downloadName:{id:"action.download.name",defaultMessage:"Download"},downloadName6dotRedesign:{id:"action.download.name.6dotredesign",defaultMessage:"Download image"},replaceName:{id:"action.replace.name",defaultMessage:"Replace"},turnSimpleTableIntoCollection:{id:"action.turnIntoCollection.title",defaultMessage:"Turn into database"},viewAsSpreadsheetPrototype:{id:"action.viewAsSpreadsheetPrototype.title",defaultMessage:"View as spreadsheet"},editPropertyName:{id:"action.editProperty.name",defaultMessage:"Edit property"},clearDateName:{id:"action.clearDate.name",defaultMessage:"Clear date"},turnintoInlineName:{id:"action.turnintoInline.name",defaultMessage:"Turn into inline database"},turnintoPageName:{id:"action.turnintoPage.name",defaultMessage:"Turn into database page"},turnintoPageName6dotRedesign:{id:"action.turnintoPage.name.6dotredesign",defaultMessage:"Turn into page"},turnCollectionIntoSimpleTable:{id:"action.turnintoSimpleTable.name",defaultMessage:"Turn into simple table"},mergewithCSVName:{id:"action.mergewithCSV.name",defaultMessage:"Merge with CSV"},importCSVName:{id:"action.importCSV.name",defaultMessage:"Import CSV"},mergewithCSVCaption:{id:"action.mergewithCSV.caption",defaultMessage:"Header row required"},openIn:{id:"action.openIn.name",defaultMessage:"Open in"},lockDatabaseName:{id:"action.lockDatabaseName.name",defaultMessage:"Lock database"},lockDatabaseViewsName:{id:"action.lockDatabaseViewsName.name",defaultMessage:"Lock views"},lockWikiName:{id:"action.lockWikiName.name",defaultMessage:"Lock wiki"},reloadPreview:{id:"action.reloadPreview",defaultMessage:"Reload preview"},unlockWikiName:{id:"action.unlockWikiName.name",defaultMessage:"Unlock wiki"},turnPreviewIntoMention:{id:"action.turnPreviewIntoMention",defaultMessage:"Turn into mention"},reloadSyncedPage:{id:"action.reloadSyncedPage",defaultMessage:"Sync page"},addtoFavoritesName:{id:"action.addtoFavorites.name",defaultMessage:"Add to Favorites"},removefromFavoritesName:{id:"action.removefromFavorites.name",defaultMessage:"Remove from Favorites"},editIconName:{id:"action.editIcon.name",defaultMessage:"Icon"},editIconName6dotRedesign:{id:"action.editIcon.name.6dotredesign",defaultMessage:"Edit icon"},addIcon:{id:"action.addIcon.name",defaultMessage:"Add icon"},wrapCodeKeywords:{id:"action.wrapCode.fuzzySearchKeywords",defaultMessage:"Wrap Code"},wrapCodeLabel:{id:"action.wrapCode.label",defaultMessage:"Wrap code"},languageModeName:{id:"action.languageMode.name",defaultMessage:"Set language"},languageModeName6dotRedesign:{id:"action.languageMode.name.6dotredesign",defaultMessage:"Language"},formatCodeLabel:{id:"action.formatCode.label",defaultMessage:"Format code"},openInBrowserLabel:{id:"action.openInBrowser.label",defaultMessage:"Open in browser"},workAtNotion:{id:"action.workAtNotion.name",defaultMessage:"Work at Notion"},quoteSizeSection:{id:"action.section.quoteSize",defaultMessage:"Quote size"},quoteSizeDefault:{id:"action.quoteSize.default",defaultMessage:"Default"},quoteSize:{id:"action.quoteSize.name",defaultMessage:"Quote size"},quoteSizeLarge:{id:"action.quoteSize.large",defaultMessage:"Large"},listFormatDefault:{id:"action.listFormat.letters.default",defaultMessage:"Default"},listFormatSection:{id:"action.listFormat.sectionName",defaultMessage:"List format"},listFormat:{id:"action.listFormat.name",defaultMessage:"List format"},listFormatNumbers:{id:"action.listFormat.numbers.name",defaultMessage:"Numbers"},listFormatLetters:{id:"action.listFormat.letters.name",defaultMessage:"Letters"},listFormatRoman:{id:"action.listFormat.letters.roman",defaultMessage:"Roman numerals"},listFormatDisc:{id:"action.listFormat.disc.name",defaultMessage:"Disc"},listFormatCircle:{id:"action.listFormat.circle.name",defaultMessage:"Circle"},listFormatSquare:{id:"action.listFormat.square.name",defaultMessage:"Square"},alignmentName:{id:"action.alignment.name",defaultMessage:"Align"},cropImage:{id:"action.cropImage",defaultMessage:"Crop image"},turnTableIntoDatabaseWarning:{id:"action.turnTableIntoDatabaseWarning",defaultMessage:"All suggestions in the table must be resolved before the table can be turned into a database."},linkToImportModal:{id:"action.linkToImportModal",defaultMessage:"Import data"}}),xe=[Q().ecY,Q().AU6(Q().xqI),Q().AU6(Q().p9k),Q().or([Q().Cuf,Q().AU6(Q().vEP)]),...be().uo],Pe=(0,be().Ls)({key:"fixLegacyTransclusion",displayName:Ie.fixLegacyTransclusion,analyticsName:Ie.fixLegacyTransclusion.defaultMessage,svg:p().D,validators:[Q().VxA,Q().vXb,...xe],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;(await a(764061).l.legacyTransclusionActions.load()).fixLegacyTransclusion({environment:n,store:t[0]})}}),Te=(0,be().uk)({key:"turn into section",displayName:be().AY.turnIntoName,analyticsName:be().AY.turnIntoName.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:[Q().p2L,Q().AU6(Q().vEP),Q().pLL,te().Y,Q().P5O],subActions:()=>[{key:0,title:void 0,render:e=>(0,s.jsx)(X().A,{...e}),actions:Ne().t3.actions}]}),je=(0,be().Ls)({key:"insert below",displayName:Ie.insertBelowName,analyticsName:Ie.insertBelowName.defaultMessage,svg:a(655923).v,validators:[Q().p2L,Q().AU6(Q().vEP),Q().AU6(Q().pe1),Q().ctY,Q().FrL],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;O().createAndCommit({userAction:"actionRegistry.insertBelow",environment:n,canUndo:!0,perform:e=>{a(87017).insertTextBelow({environment:n,blocks:t,transaction:e})}})}}),Ue=(0,be().Ls)({key:"start presentation",displayName:Ie.startPresentationName,analyticsName:Ie.startPresentationName.defaultMessage,validators:[Q().vXb,Q().Xjv(n().xd.slide)],closeParentMenu:!0,svg:M,action:e=>{let{blocks:t}=e;a(447934).V_({slideBlockStore:t[0]})}}),_e=(0,be().Ls)({key:"copy direct link to content housed within block",displayName:Ie.copyDirectLinkName,analyticsName:Ie.copyDirectLinkName.defaultMessage,svg:N().w,validators:[Q().M3g,Q().vXb,Q().AU6(Q().Rde),Q().AU6(Q().wHP),Q().or([Q().ISA,Q().ka$,Q().Xjv(n().xd.bookmark),Q().Xjv(n().xd.externalObjectInstance),Q().Xjv(n().xd.externalObjectInstancePage),Q().IW,Q().tpG]),Q().AU6(Q().IuJ)],closeParentMenu:!0,track:{actionName:"copy_original_link"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:r}=n;r?r.copyDirectLinkToContent({...o,event:a,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy direct link to content housed within block"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Re=(0,be().Ls)({key:"open collection as page",displayName:Ie.openasPageName,analyticsName:Ie.openasPageName.defaultMessage,svg:a(47218).arrowExpandDiagonalBottomLeftToTopRightIcon,validators:[Q().lOb,Q().AU6(Q().Cuf),Q().AU6(Q().hLE)],closeParentMenu:!0,action:e=>a(797265).mP(e)}),Be=(0,be().Ls)({key:"copy links to blocks",displayName:Ie.copyLinksName,analyticsName:Ie.copyLinksName.defaultMessage,svg:N().w,validators:[Q().M3g,Q().FEq,Q().AU6(Q().oy3)],closeParentMenu:!0,track:{actionName:"copy_multiple_block_links"},action:(e,t,a)=>{let{lazyDependencies:n,...o}=t;const{clipboardActions:r}=n;r?r.copyLinksToBlocks({...o,event:a,callback:e}):i().log({data:{miscDataToConvertToString:{actionKey:"copy links to blocks"}},from:"blockActionRegistry",level:"info",type:"lazyDependencies:missingClipboardActions"})}}),Ve=(0,be().Ls)({key:"view original",displayName:Ie.viewOriginalName,analyticsName:Ie.viewOriginalName.defaultMessage,svg:f().arrowDiagonalUpRightIcon,validators:[Q().AU6(Q().b8R),Q().vXb,Q().or([Q().ISA,Q().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,J().hg)(i)&&V().oD(o,{store:i,from:"view_original",callback:e})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),Fe=(0,be().Ls)({key:"view in browser",displayName:Ie.openInBrowserName,analyticsName:Ie.openInBrowserName.defaultMessage,svg:f().arrowDiagonalUpRightIcon,validators:[Q().b8R,Q().vXb,Q().or([Q().ISA,Q().ka$])],closeParentMenu:!0,track:{actionName:"view_original"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n.at(0);i&&(0,J().hg)(i)&&V().oD(o,{store:i,from:"view_original",callback:e})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),De=(0,be().Ls)({key:"download source",displayName:(0,ne().Sx)({gateName:"updated_6dot_menu"})?Ie.downloadName6dotRedesign:Ie.downloadName,analyticsName:Ie.downloadName.defaultMessage,svg:a(973238).arrowInCircleDownIcon,validators:[Q().vXb,Q().or([Q().ka$,Q().ISA]),Q().or([Q().bIL,Q().Rde]),Q().AU6(Q().wHP)],closeParentMenu:!0,track:{actionName:"download"},action:(e,t,a)=>{let{blocks:n,environment:o}=t;const i=n[0];i&&(0,J().hg)(i)&&V().qI({environment:o,store:i,callback:e})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),ze=(0,be().Ls)({key:"replace source",displayName:Ie.replaceName,analyticsName:Ie.replaceName.defaultMessage,svg:p().D,validators:[Q().p2L,Q().AU6(Q().vEP),Q().vXb,Q().or([Q().ka$,Q().ISA])],closeParentMenu:!0,action:e=>{let{blocks:t}=e;V().wA({store:t[0]})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),Ee=(0,be().Ls)({key:"view as spreadsheet prototype",displayName:Ie.viewAsSpreadsheetPrototype,analyticsName:Ie.viewAsSpreadsheetPrototype.defaultMessage,svg:a(421559).T,validators:[()=>!1,Q().SQN("spreadsheet_prototype"),Q().p2L,Q().AU6(Q().wFE),Q().zVC,te().Y,Q().AU6(Q().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t}=e;const a=t[0];le().A.setState({...le().A.getState(),[a.id]:!0})}}),Oe=(0,be().Ls)({key:"link to import modal",displayName:Ie.linkToImportModal,analyticsName:Ie.linkToImportModal.defaultMessage,svg:a(820579).f,validators:[Q().p2L,Q().AU6(Q().wFE),Q().zVC,Q().HOV()],closeParentMenu:!0,action:e=>{let{environment:t}=e;a(209660).Ow({currentTab:"imports",openedFrom:"block_action_import"}),(0,a(160475).t)({environment:t,action:"click",from:"block_action_import"}),a(559926).kY(t,{from:"block_action_import"})}}),qe=(0,be().Ls)({key:"turn into collection",displayName:Ie.turnSimpleTableIntoCollection,analyticsName:Ie.turnSimpleTableIntoCollection.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:[Q().p2L,Q().AU6(Q().wFE),Q().zVC,te().Y,Q().AU6(Q().Y8P)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;return O().createAndCommit({userAction:"actionRegistry.turnSimpleTableIntoCollection",environment:n,canUndo:!0,perform:e=>{const o=t[0];o.getContentStores().flatMap((e=>{const t=Object.values(e.getProperties()).flat().filter(a(534177).O9);return(0,j().vSn)(t)})).length>0?a(901389).rG({message:(0,s.jsx)(U().sA,{...Ie.turnTableIntoDatabaseWarning})}):(ie().cP({environment:n,simpleTableStore:o,transaction:e}),E().IU({environment:n}),ie().wr())}})}}),He=[Q().p2L,Q().AU6(Q().ln6),Q().$Mx,Q().AU6(Q().PfK),Q().AU6(Q().Kq2),function(e){return e.blocks.some((e=>e.getAssociatedCollectionStore()))}];const We=(0,be().uk)({key:"edit property",displayName:Ie.editPropertyName,analyticsName:Ie.editPropertyName.defaultMessage,svg:A().n,validators:He,subActions:e=>{let{blocks:t}=e;const n=t.at(0);if(!n)return[];const i=(0,W().U)(n),r=n.getAssociatedCollectionStore();if(!r)return[];const c=(null==i?void 0:i.normalizedSchemaStore.state)??r.getSchema(),l=r.getFormat(),d=(0,a(390066).L)(l,c,void 0,o().jf.Collection);if(!d.collection_page_properties)return[];d.collection_page_properties.unshift({property:"title"});const u=_().oE(d.collection_page_properties.map((e=>{const n=c[e.property];if(n&&(0,a(682146).g2)({propertySchema:n,property:e.property,blockStores:t,collectionSchema:c,collectionStore:r,spaceStore:se().default.state.currentSpaceStore}))return function(e){const{property:t,propertySchema:n}=e,o=n.name;return{key:`Edit Property ${o} ${t}`,displayName:o,analyticsName:"Edit property",searchName:o,validators:He,closeParentMenu:!0,action:e=>{let{blocks:o,originRect:i,environment:r}=e;"checkbox"===n.type?O().createAndCommit({userAction:"actionRegistry.createEditPropertyAction",environment:r,canUndo:!0,perform:e=>{R().qS({stores:o,property:t,transaction:e})}}):i&&R().ho({environment:r,store:o[0],additionalStores:o.slice(1),property:t,format:a(41459).j.Page,rect:{..._().VP(i),width:200},preventClearSelection:!0,blockPropertyValueOverlayStore:a(186445).jQ(),collectionContextStore:(0,W().U)(o[0])})},render:e=>(0,s.jsx)(Y().G,{...e,propertySchema:n,format:Y().e.Name})}}({property:e.property,propertySchema:n})})));return[{key:0,title:void 0,render:e=>(0,s.jsx)(X().A,{...e}),actions:u}]}}),Ke=(0,be().Ls)({key:"clear date",displayName:Ie.clearDateName,analyticsName:Ie.clearDateName.defaultMessage,svg:P,validators:[Q().p2L,Q().AU6(Q().vEP),Q().or([Q().Bb5("timeline"),Q().Bb5("calendar")])],closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;const o=(0,W().U)(n[0]);if(!o)return;const i=null==o?void 0:o.collectionViewStore();if(!i)return;const r=o.normalizedSchemaStore.state;O().createAndCommit({userAction:"actionRegistry.clearDate",environment:t,canUndo:!0,perform:e=>{a(717989).MQ({stores:n,collectionViewStore:i,schema:r,transaction:e})}})}}),Ge=(0,be().Ls)({key:"view collection view inline",displayName:Ie.turnintoInlineName,analyticsName:Ie.turnintoInlineName.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:[Q().BAy,Q().AU6(Q().Cuf),Q().Xmj,Q().AU6(Q().wFE),Q().AU6(Q().Afv),Q().P5O],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return O().createAndCommit({userAction:"actionRegistry.viewCollectionViewInline",environment:a,canUndo:!0,perform:e=>{Z().transformBlocks({environment:a,blocks:t,blockType:"collection_view",transaction:e}),E().IU({environment:a})}})}}),Xe=(0,be().Ls)({key:"view collection view as page",displayName:(0,ne().Sx)({gateName:"updated_6dot_menu"})?Ie.turnintoPageName6dotRedesign:Ie.turnintoPageName,analyticsName:Ie.turnintoPageName.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:[Q().lOb,Q().AU6(Q().Cuf),Q().Xmj,Q().AU6(Q().wFE),Q().AU6(Q().vEP),Q().AU6(Q().IW)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;return O().createAndCommit({userAction:"actionRegistry.turnCollectionViewIntoCollectionViewPage",environment:a,canUndo:!0,perform:e=>{Z().transformBlocks({environment:a,blocks:t,blockType:"collection_view_page",transaction:e})}})}}),Ye=(0,be().Ls)({key:"turn into simple table",displayName:Ie.turnCollectionIntoSimpleTable,analyticsName:Ie.turnCollectionIntoSimpleTable.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:[Q().lOb,Q().Efw("table"),Q().SDU,Q().AU6(Q().Cuf),Q().Xmj,Q().AU6(Q().wFE),Q().ed0,Q().P_F,Q().AU6(Q().IW)],closeParentMenu:!0,action:async e=>{let{blocks:t,environment:n}=e;const o=t[0],r=o.useCrdt(),s=await a(980914).Bp({environment:n,collectionViewBlockStore:o});if(s.some((e=>e.useCrdt()!==r)))return a(436572).D6({label:r?"Cannot turn database with non-CRDT pages into simple table on CRDT page":"Cannot turn database with CRDT pages into simple table on non-CRDT page"}),void i().log({level:"info",from:"blockActionRegistry",type:"crdt:turnCollectionIntoSimpleTableUseCrdtMismatch",data:{miscDataToConvertToString:{collectionViewBlockUseCrdt:r}}});O().createAndCommit({userAction:"actionRegistry.turnCollectionIntoSimpleTable",environment:n,canUndo:!0,perform:e=>{ie().GD({environment:n,collectionViewBlockStore:o,pageStores:s,transaction:e}),E().IU({environment:n}),ie().wr()}})}}),$e=(0,be().Ls)({key:"merge with csv",displayName:Ie.mergewithCSVName,analyticsName:Ie.mergewithCSVName.defaultMessage,validators:[Q().AU6(Q().cV4),Q().Kq2,Q().Xmj,Q().sc7,Q().IRu,Q().AU6(Q().vEP),Q().AU6(Q().BUc),Q().AU6(Q().Qp$),Q().AU6(Q().IW),Q().AU6(Q().oy3)],closeParentMenu:!0,render:e=>(0,s.jsx)(K().A,{...e,svg:v().G,title:(0,s.jsx)(U().sA,{...Ie.mergewithCSVName}),tooltipText:(0,s.jsx)(U().sA,{...Ie.mergewithCSVCaption})}),action:e=>{let{blocks:[t],environment:a}=e;(0,H().mergeWithCSV)({environment:a,store:t,from:"topbar_more_menu"})}}),Ze=(0,be().Ls)({key:"import csv",displayName:Ie.importCSVName,analyticsName:Ie.mergewithCSVName.defaultMessage,validators:[Q().cV4,Q().Kq2,Q().Xmj,Q().sc7,Q().IRu,Q().AU6(Q().vEP),Q().AU6(Q().BUc),Q().AU6(Q().Qp$),Q().AU6(Q().IW),Q().AU6(Q().oy3)],closeParentMenu:!0,render:e=>(0,s.jsx)(K().A,{...e,svg:v().G,title:(0,s.jsx)(U().sA,{...Ie.importCSVName}),tooltipText:(0,s.jsx)(U().sA,{...Ie.mergewithCSVCaption}),badge:(0,s.jsx)(a(464708).A,{content:"New",color:"blue"})}),action:e=>{let{blocks:[t],environment:a}=e;(0,H().mergeWithCSV)({environment:a,store:t,from:"topbar_more_menu"})}}),Qe=(0,be().fi)({key:"database lock",displayName:Ie.lockDatabaseName,label:ee().A.formatMessage(Ie.lockDatabaseName),svg:e=>(0,s.jsx)(G().I,{isLocked:!1,style:e}),svgWhenEnabled:e=>(0,s.jsx)(G().I,{isLocked:!0,style:e}),isEnabled:e=>e.isLockedForAllUsers(),validators:[Q().Kq2,Q().an_,Q().AU6(Q().Afv),Q().Xmj,Q().AU6(Q().oy3)],action:(e,t,a)=>z().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),Je=(0,be().fi)({key:"database views lock",displayName:Ie.lockDatabaseViewsName,label:ee().A.formatMessage(Ie.lockDatabaseViewsName),svg:e=>(0,L().lockIcon)(e),isEnabled:e=>e.isLockedForAllUsers(),validators:[Q().Kq2,Q().AU6(Q().an_),Q().Xmj,Q().AU6(Q().oy3)],action:(e,t,a)=>z().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),et=(0,be().fi)({key:"wiki lock",displayName:Ie.lockWikiName,label:ee().A.formatMessage(Ie.lockWikiName),svg:e=>(0,L().lockIcon)(e),isEnabled:e=>e.isLockedForAllUsers(),validators:[Q().Kq2,Q().an_,Q().Afv,Q().Xmj,Q().AU6(Q().oy3)],action:(e,t,a)=>z().zv({store:t.getFormatStore(),data:{block_locked:!t.isLockedForAllUsers(),block_locked_by:e.currentUser.id},transaction:a}),afterAction:()=>null}),tt=(0,be().Ls)({key:"wiki unlock",displayName:Ie.unlockWikiName,analyticsName:Ie.unlockWikiName.defaultMessage,svg:a(701751).p,validators:[Q().Kq2,Q().an_,Q().Afv,Q().Xmj,Q().ln6],closeParentMenu:!1,action:e=>{let{blocks:t,environment:n}=e;const o=t[0];a(222299).X6({environment:n,store:o,lock:!1})}});function at(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return[Q().p2L,Q().AU6(Q().vEP),Q().AU6(Q().PaP),Q().vXb,e?Q().or([Q().bLC("external_object_instance"),Q().tpG]):Q().bLC("external_object_instance"),Q().AU6(Q().SoP)]}const nt=(0,be().Ls)({key:"reload link preview",displayName:Ie.reloadPreview,analyticsName:Ie.reloadPreview.defaultMessage,svg:p().D,validators:at(!1),closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstanceBlockStore()&&q().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId()})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),ot=(0,be().Ls)({key:"turn preview into mention",displayName:Ie.turnPreviewIntoMention,analyticsName:Ie.turnPreviewIntoMention.defaultMessage,svg:b().arrowSquarePathUpDownIcon,validators:at(!0),closeParentMenu:!0,action:e=>{let{environment:t,blocks:n}=e;0!==n.length&&O().createAndCommit({userAction:"actionRegistry.turnPreviewIntoMention",environment:t,canUndo:!0,perform:e=>{n[0].isType("alias")?a(813743).O8({blockStore:n[0],transaction:e}):q().PO({environment:t,block:n[0],transaction:e})}})}});function it(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,be().Ls)({key:"add to favorites",displayName:Ie.addtoFavoritesName,analyticsName:Ie.addtoFavoritesName.defaultMessage,svg:a(877788).w,validators:[...e,Q().M3g,Q()._fc,Q().vXb,Q().AU6(Q().WWi),Q().AU6(Q().Pnk),Q().AU6(Q().mDl),Q().AU6(Q().qsB)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=se().default.state;if(n){const e=t[0];O().createAndCommit({userAction:"actionRegistry.addToFavorites",environment:a,canUndo:!0,perform:t=>{oe().bookmarkPage({spaceViewStore:n,store:e,transaction:t})}})}}})}const rt=it([Q().FrL]),st=it();function ct(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,be().Ls)({key:"remove from favorites",displayName:Ie.removefromFavoritesName,analyticsName:Ie.removefromFavoritesName.defaultMessage,svg:x,validators:[...e,Q().WWi,Q().vXb],closeParentMenu:!0,action:e=>{let{blocks:t,environment:a}=e;const{currentSpaceViewStore:n}=se().default.state;n&&O().createAndCommit({userAction:"actionRegistry.removeFromFavorites",environment:a,canUndo:!0,perform:e=>{oe().unbookmarkPage({spaceViewStore:n,store:t[0],transaction:e})}})}})}const lt=ct([Q().FrL]),dt=ct(),ut=(0,be().Ls)({key:"reload synced page",displayName:Ie.reloadSyncedPage,analyticsName:Ie.reloadSyncedPage.defaultMessage,svg:p().D,validators:[Q().p2L,Q().AU6(Q().vEP),Q().AU6(Q().PaP),Q().vXb,Q().bLC("external_object_instance_page")],closeParentMenu:!0,action:e=>{let{environment:t,blocks:a}=e;if(0===a.length)return;const n=a[0];n.isExternalObjectInstancePageBlockStore()&&q().lf({environment:t,from:"page_more_menu",store:n,spaceId:n.getSpaceId(),bypassCache:!0})},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),mt=(0,be().Ls)({key:"add page icon",displayName:Ie.addIcon,svg:w().emojiFaceIcon,analyticsName:Ie.addIcon.defaultMessage,validators:[Q().p2L,Q().AU6(Q().vEP),Q().AU6(Q().oy3),Q().ZCq,Q().V40],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,a)=>{pt(e,t,a)}}),gt=(0,be().Ls)({key:"edit icon",displayName:(0,ne().Sx)({gateName:"updated_6dot_menu"})?Ie.editIconName6dotRedesign:Ie.editIconName,analyticsName:Ie.editIconName.defaultMessage,svg:w().emojiFaceIcon,validators:[Q().p2L,Q().AU6(Q().vEP),Q().or([Q().ZCq,Q().Uo6([Q().ibx,Q().h1w])])],closeParentMenu:!0,track:{actionName:"init_edit_icon"},action:(e,t,a)=>{pt(e,t,a)}});function pt(e,t,n){const{environment:i,originRect:r}=t;let c=t.blocks;if(Q().ibx(t)&&Q().h1w(t)){const e=c[0].getParentStore();e instanceof a(630116).Bv&&(c=[e])}const l=e=>{var t;return e.isType("button")?null===(t=e.getAutomationStore())||void 0===t?void 0:t.getIconStore():e.getIconStore()},d=(e,t)=>{var n;c.forEach((t=>{const a=l(t);a&&O().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:t=>{z().KY({store:a,value:e,transaction:t})}})})),"url"!==(null===(n=(0,o().WO)(e))||void 0===n?void 0:n.type)&&c.some((e=>e.isType("callout")))&&T().K.set({userId:i.currentUser.id,key:a(492696).c,value:e??""}),t&&t.keepVisible||D().I()},u=c.some((e=>{var t;return e.isType("button")?null===(t=l(e))||void 0===t?void 0:t.getValue():Boolean(e.getIcon())})),m=c.every((e=>e.isType("callout"))),g=[{type:"emoji",title:(0,s.jsx)(U().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),onChange:d},{type:"icon",title:(0,s.jsx)("div",{style:{display:"flex",gap:4},children:(0,s.jsx)(U().sA,{defaultMessage:"Icons",id:"recordIcon.iconTab.title"})}),onChange:d}];D().W(i,{recordIconLoggingData:{source:"bulk_block_selection"},originGap:4,originRect:r,popupWidth:ae().jv,popupHeight:ae().GF,isSmallWidth:!1,title:ee().A.getIntl().formatMessage({defaultMessage:"Page icon",id:"recordIcon.emojiModalMenu.title"}),onDelete:u?()=>{c.forEach((e=>{const t=l(e);t&&O().createAndCommit({userAction:"actionRegistry.editIcon",environment:i,canUndo:!0,perform:e=>{z().KY({store:t,value:void 0,transaction:e})}})})),D().I()}:void 0,currentTab:"emoji",isCallout:m,tabs:g,disableClearSelection:!0}),e()}const ft=(0,be().fi)({key:"code wrap",displayName:Ie.wrapCodeKeywords,label:ee().A.formatMessage(Ie.wrapCodeLabel),isEnabled:e=>Boolean(e.getFormat().code_wrap),svg:(0,ne().Sx)({gateName:"updated_6dot_menu"})?S:void 0,validators:[Q().vXb,Q().Xjv("code")],track:{actionName:"set_text_wrap"},action:(e,t,a)=>F().zA({stores:[t],update:{code_wrap:!t.getFormat().code_wrap},transaction:a}),afterAction:(e,t)=>{T().K.set({userId:t.currentUser.id,key:re().j.localCodeWrapPreferenceKey,value:e})}}),vt=(0,U().YK)({ABAP:{id:"action.languageMode.abap",defaultMessage:"ABAP"},Agda:{id:"action.languageMode.agda",defaultMessage:"Agda"},Arduino:{id:"action.languageMode.arduino",defaultMessage:"Arduino"},"ASCII Art":{id:"action.languageMode.asciiart",defaultMessage:"ASCII Art"},Assembly:{id:"action.languageMode.nasm",defaultMessage:"Assembly"},Bash:{id:"action.languageMode.bash",defaultMessage:"Bash"},BASIC:{id:"action.languageMode.basic",defaultMessage:"Basic"},BNF:{id:"action.languageMode.bnf",defaultMessage:"BNF"},C:{id:"action.languageMode.c",defaultMessage:"C"},"C#":{id:"action.languageMode.csharp",defaultMessage:"C#"},"C++":{id:"action.languageMode.cplusplus",defaultMessage:"C++"},Clojure:{id:"action.languageMode.clojure",defaultMessage:"Clojure"},CoffeeScript:{id:"action.languageMode.coffeescript",defaultMessage:"CoffeeScript"},Coq:{id:"action.languageMode.coq",defaultMessage:"Coq"},CSS:{id:"action.languageMode.css",defaultMessage:"CSS"},Dart:{id:"action.languageMode.dart",defaultMessage:"Dart"},Dhall:{id:"action.languageMode.dhall",defaultMessage:"Dhall"},Diff:{id:"action.languageMode.diff",defaultMessage:"Diff"},Docker:{id:"action.languageMode.docker",defaultMessage:"Docker"},EBNF:{id:"action.languageMode.ebnf",defaultMessage:"EBNF"},Elixir:{id:"action.languageMode.elixir",defaultMessage:"Elixir"},Elm:{id:"action.languageMode.elm",defaultMessage:"Elm"},Erlang:{id:"action.languageMode.erlang",defaultMessage:"Erlang"},"F#":{id:"action.languageMode.fsharp",defaultMessage:"F#"},Flow:{id:"action.languageMode.flow",defaultMessage:"Flow"},Fortran:{id:"action.languageMode.fortran",defaultMessage:"Fortran"},Gherkin:{id:"action.languageMode.gherkin",defaultMessage:"Gherkin"},GLSL:{id:"action.languageMode.glsl",defaultMessage:"GLSL"},Go:{id:"action.languageMode.go",defaultMessage:"Go"},GraphQL:{id:"action.languageMode.graphql",defaultMessage:"Graphql"},Groovy:{id:"action.languageMode.groovy",defaultMessage:"Groovy"},Haskell:{id:"action.languageMode.haskell",defaultMessage:"Haskell"},HCL:{id:"action.languageMode.hcl",defaultMessage:"HCL"},HTML:{id:"action.languageMode.html",defaultMessage:"HTML"},Idris:{id:"action.languageMode.idris",defaultMessage:"Idris"},Java:{id:"action.languageMode.java",defaultMessage:"Java"},JavaScript:{id:"action.languageMode.javascript",defaultMessage:"JavaScript"},JSON:{id:"action.languageMode.json",defaultMessage:"JSON"},Julia:{id:"action.languageMode.julia",defaultMessage:"Julia"},Kotlin:{id:"action.languageMode.kotlin",defaultMessage:"Kotlin"},LaTeX:{id:"action.languageMode.latex",defaultMessage:"LaTeX"},Less:{id:"action.languageMode.less",defaultMessage:"LESS"},Lisp:{id:"action.languageMode.lisp",defaultMessage:"Lisp"},LiveScript:{id:"action.languageMode.livescript",defaultMessage:"LiveScript"},"LLVM IR":{id:"action.languageMode.llvm",defaultMessage:"LLVM IR"},Lua:{id:"action.languageMode.lua",defaultMessage:"Lua"},Makefile:{id:"action.languageMode.makefile",defaultMessage:"Makefile"},Markdown:{id:"action.languageMode.markdown",defaultMessage:"Markdown"},Markup:{id:"action.languageMode.markup",defaultMessage:"Markup"},MATLAB:{id:"action.languageMode.matlab",defaultMessage:"MATLAB"},Mathematica:{id:"action.languageMode.mathematica",defaultMessage:"Mathematica"},Mermaid:{id:"action.languageMode.mermaid",defaultMessage:"Mermaid"},Nix:{id:"action.languageMode.nix",defaultMessage:"Nix"},"Notion Formula":{id:"action.languageMode.notionFormula",defaultMessage:"Notion Formula"},NotionScript:{id:"action.languageMode.notionScript",defaultMessage:"NotionScript"},"Objective-C":{id:"action.languageMode.objectiveC",defaultMessage:"Objective-C"},OCaml:{id:"action.languageMode.ocaml",defaultMessage:"OCaml"},Pascal:{id:"action.languageMode.pascal",defaultMessage:"Pascal"},Perl:{id:"action.languageMode.perl",defaultMessage:"Perl"},PHP:{id:"action.languageMode.php",defaultMessage:"PHP"},"Plain Text":{id:"action.languageMode.plaintext",defaultMessage:"Plain Text"},PowerShell:{id:"action.languageMode.powershell",defaultMessage:"Powershell"},Prolog:{id:"action.languageMode.prolog",defaultMessage:"Prolog"},Protobuf:{id:"action.languageMode.protobuf",defaultMessage:"Protobuf"},PureScript:{id:"action.languageMode.purescript",defaultMessage:"PureScript"},Python:{id:"action.languageMode.python",defaultMessage:"Python"},R:{id:"action.languageMode.r",defaultMessage:"R"},Racket:{id:"action.languageMode.racket",defaultMessage:"Racket"},Reason:{id:"action.languageMode.reason",defaultMessage:"Reason"},Ruby:{id:"action.languageMode.ruby",defaultMessage:"Ruby"},Rust:{id:"action.languageMode.rust",defaultMessage:"Rust"},Sass:{id:"action.languageMode.sass",defaultMessage:"Sass"},Scala:{id:"action.languageMode.scala",defaultMessage:"Scala"},Scheme:{id:"action.languageMode.scheme",defaultMessage:"Scheme"},Scss:{id:"action.languageMode.scss",defaultMessage:"SCSS"},Shell:{id:"action.languageMode.shell",defaultMessage:"Shell"},Smalltalk:{id:"action.languageMode.smalltalk",defaultMessage:"Smalltalk"},Solidity:{id:"action.languageMode.solidity",defaultMessage:"Solidity"},SQL:{id:"action.languageMode.sql",defaultMessage:"SQL"},Swift:{id:"action.languageMode.swift",defaultMessage:"Swift"},TOML:{id:"action.languageMode.toml",defaultMessage:"TOML"},TypeScript:{id:"action.languageMode.typescript",defaultMessage:"TypeScript"},"VB.Net":{id:"action.languageMode.vbdotnet",defaultMessage:"VB.Net"},Verilog:{id:"action.languageMode.verilog",defaultMessage:"Verilog"},VHDL:{id:"action.languageMode.vhdl",defaultMessage:"VHDL"},"Visual Basic":{id:"action.languageMode.visualbasic",defaultMessage:"Visual Basic"},WebAssembly:{id:"action.languageMode.webassembly",defaultMessage:"WebAssembly"},XML:{id:"action.languageMode.xml",defaultMessage:"XML"},YAML:{id:"action.languageMode.yaml",defaultMessage:"YAML"},"Java/C/C++/C#":{id:"action.languageMode.cstyle",defaultMessage:"Java/C/C++/C#"}}),bt=[Q().p2L,Q().AU6(Q().vEP),Q().ctY,Q().bLC("code"),Q().AU6(Q().Cuf)],yt=(0,be().gy)({key:"code block languageMode actions",title:(0,ne().Sx)({gateName:"updated_6dot_menu"})?Ie.languageModeName6dotRedesign:Ie.languageModeName,render:e=>(0,s.jsx)(X().A,{...e}),actions:a(15440).Dm.map((e=>(0,be().Ls)({key:`set language ${e} action`,displayName:vt[e],analyticsName:`set language ${e}`,validators:bt,closeParentMenu:!0,track:{actionName:"set_language"},action:(t,a,n)=>{let{environment:o,blocks:i}=a;T().K.set({userId:o.currentUser.id,key:re().j.localLanguagePreferenceKey,value:e});const{serverCommitResult:r}=O().createAndCommit({userAction:"actionRegistry.languageModeActions",environment:o,canUndo:!0,perform:t=>{B().IA({language:e,blocks:i,transaction:t})}});r.then(t)},render:t=>(0,s.jsx)(a(760217).A,{...t,title:e})})))}),Mt=(0,be().uk)({key:"languageMode section",displayName:Ie.languageModeName,analyticsName:Ie.languageModeName.defaultMessage,svg:(0,ne().Sx)({gateName:"updated_6dot_menu"})?a(300985).Z:void 0,validators:bt,subActions:()=>[yt]}),kt=(0,be().Ls)({key:"format code",displayName:Ie.formatCodeLabel,closeParentMenu:!0,analyticsName:Ie.formatCodeLabel.defaultMessage,svg:(0,ne().Sx)({gateName:"updated_6dot_menu"})?a(200582).m:void 0,validators:[Q().vXb,Q().Xjv("code"),Q().Wfp],action:async e=>{let{blocks:t,environment:a}=e;const n=t[0];await B().aZ({codeBlockStore:n,environment:a})}}),St=(0,be().Ls)({key:"open html in browser",displayName:Ie.openInBrowserLabel,closeParentMenu:!0,analyticsName:Ie.openInBrowserLabel.defaultMessage,validators:[Q().vXb,Q().Xjv("code"),Q().Ozi,Q().d0C],action:e=>{let{blocks:t,environment:a}=e;const n=t[0].getTitleValue(),o=(0,j().q4_)(n),i=window.open();i&&i.document.write(o)}}),At=(0,be().Ls)({key:"work at notion",analyticsName:Ie.workAtNotion.defaultMessage,closeParentMenu:!0,displayName:Ie.workAtNotion,svg:(0,ne().Sx)({gateName:"updated_6dot_menu"})?a(481721).codeIcon:void 0,validators:[Q().Xjv("code"),Q().gII],action:()=>{window&&window.open(a(427704).JZ.careers)}}),ht=[Q().p2L,Q().AU6(Q().vEP),Q().bLC("quote")];function Ct(e){return(t,a)=>{T().K.set({userId:a.environment.currentUser.id,key:re().w.localSizePreferenceKey,value:e});const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createQuoteSizeAction",environment:a.environment,canUndo:!0,perform:t=>{F().zA({stores:a.blocks,update:{quote_size:e},transaction:t})}});n.then(t)}}const wt=(0,be().gy)({key:"quote size actions",title:Ie.quoteSizeSection,render:e=>(0,s.jsx)(X().A,{...e}),actions:[(0,be().Ls)({key:"quote size default",displayName:Ie.quoteSizeDefault,analyticsName:Ie.quoteSizeDefault.defaultMessage,validators:ht,closeParentMenu:!0,track:{actionName:"set_size"},action:Ct(void 0)}),(0,be().Ls)({key:"quote size large",displayName:Ie.quoteSizeLarge,analyticsName:Ie.quoteSizeLarge.defaultMessage,validators:ht,closeParentMenu:!0,track:{actionName:"set_size"},action:Ct("large")})]}),Nt=(0,be().uk)({key:"quote size",displayName:Ie.quoteSize,analyticsName:Ie.quoteSize.defaultMessage,svg:a(37719).quoteTextIcon,validators:ht,subActions:()=>[wt]}),Lt=[Q().p2L,Q().AU6(Q().vEP),Q().bLC("numbered_list"),Q().ctQ("numbered_list")],It=[Q().p2L,Q().AU6(Q().vEP),Q().bLC("bulleted_list"),Q().ctQ("bulleted_list")],xt=(0,be().uk)({key:"number format",displayName:Ie.listFormat,analyticsName:Ie.listFormat.defaultMessage,svg:A().n,validators:Lt,subActions:()=>[Tt]});function Pt(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{F().zA({stores:a.blocks,update:{list_format:e},transaction:t})}});n.then(t)}}const Tt=(0,be().gy)({key:"text color actions",title:Ie.listFormatSection,render:e=>(0,s.jsx)(X().A,{...e}),actions:[(0,be().Ls)({key:"list format default",displayName:Ie.listFormatDefault,analyticsName:Ie.listFormatDefault.defaultMessage,validators:Lt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt(void 0)}),(0,be().Ls)({key:"list format numbers",displayName:Ie.listFormatNumbers,analyticsName:Ie.listFormatNumbers.defaultMessage,validators:Lt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("numbers")}),(0,be().Ls)({key:"list format letters",displayName:Ie.listFormatLetters,analyticsName:Ie.listFormatLetters.defaultMessage,validators:Lt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("letters")}),(0,be().Ls)({key:"list format roman numerals",displayName:Ie.listFormatRoman,analyticsName:Ie.listFormatRoman.defaultMessage,validators:Lt,closeParentMenu:!0,track:{actionName:"set_list_format"},action:Pt("roman")})]});function jt(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createBulletListFormatAction",environment:a.environment,canUndo:!0,perform:t=>{F().zA({stores:a.blocks,update:{bullet_list_format:e},transaction:t})}});n.then(t)}}const Ut=(0,be().gy)({key:"bullet list format actions",title:Ie.listFormatSection,render:e=>(0,s.jsx)(X().A,{...e}),actions:[(0,be().Ls)({key:"list format default",displayName:Ie.listFormatDefault,analyticsName:Ie.listFormatDefault.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:jt(void 0)}),(0,be().Ls)({key:"list format disc",displayName:Ie.listFormatDisc,analyticsName:Ie.listFormatDisc.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:jt("disc")}),(0,be().Ls)({key:"list format circle",displayName:Ie.listFormatCircle,analyticsName:Ie.listFormatCircle.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:jt("circle")}),(0,be().Ls)({key:"list format square",displayName:Ie.listFormatSquare,analyticsName:Ie.listFormatSquare.defaultMessage,validators:It,closeParentMenu:!0,track:{actionName:"set_list_format"},action:jt("square")})]}),_t=(0,be().uk)({key:"bulleted format",displayName:Ie.listFormat,analyticsName:Ie.listFormat.defaultMessage,svg:A().n,validators:It,subActions:()=>[Ut]}),Rt=[Q().M3g,Q().p2L,Q().AU6(Q().vEP),Q().Uo6([Q().vXb,Q().ISA,Q().WoS])],Bt=(0,be().uk)({key:"alignment",displayName:Ie.alignmentName,analyticsName:Ie.alignmentName.defaultMessage,svg:u,validators:Rt,subActions:()=>[Dt]});function Vt(e){return(t,a)=>{const{serverCommitResult:n}=O().createAndCommit({userAction:"actionRegistry.createAlignmentFormatAction",environment:a.environment,canUndo:!0,perform:t=>{if(a.blocks&&a.blocks.length>0)for(const n of a.blocks)F().TP({environment:a.environment,store:n,alignment:e,transaction:t})}});n.then(t)}}const Ft=(0,U().YK)({leftAlign:{id:"action.alignment.left.name",defaultMessage:"Left"},centerAlign:{id:"action.alignment.center.name",defaultMessage:"Center"},rightAlign:{id:"action.alignment.right.name",defaultMessage:"Right"}}),Dt=(0,be().gy)({key:"alignment format actions",title:Ie.alignmentName,render:e=>(0,s.jsx)(X().A,{...e}),actions:[(0,be().Ls)({key:"alignment format left",displayName:Ft.leftAlign,analyticsName:"Align left",validators:Rt,closeParentMenu:!0,svg:u,track:{actionName:"set_alignment"},action:Vt("left")}),(0,be().Ls)({key:"alignment format center",displayName:Ft.centerAlign,analyticsName:"Align center",validators:Rt,closeParentMenu:!0,svg:l,track:{actionName:"set_alignment"},action:Vt("center")}),(0,be().Ls)({key:"alignment format right",displayName:Ft.rightAlign,analyticsName:"Align right",validators:Rt,closeParentMenu:!0,svg:g,track:{actionName:"set_alignment"},action:Vt("right")})]}),zt=(0,be().Ls)({key:"edit image",displayName:Ie.cropImage,analyticsName:Ie.cropImage.defaultMessage,svg:C,validators:[Q().p2L,Q().JZE,Q().IRu,Q().SQN("image_cropping"),Q().AU6(Q().vEP)],closeParentMenu:!0,action:e=>{let{blocks:t,environment:n}=e;const o=t[0],i=o.getOriginalImageSource();i&&(a(471266).A.openModal({blockStore:o,originalSource:i}),a(799750).h(n,{from:"blockmenu"}))},disabled:()=>!ce().A.state.online,renderTooltip:()=>ee().A.formatMessage(be().AY.unavailableOfflineTooltip),disableTooltip:()=>ce().A.state.online}),Et={key:"block menu primary",render:e=>(0,s.jsx)(X().A,{...e}),shouldShowMoreOptions:!0,actions:[...[Te,de().Rw,gt,Pe,je],...[ze,De,ue().pG,zt,Bt,ye().N,ye().S,ue().R5,Me().i,Ve],...[qe],...[Nt],...[_t],...[xt],...[Xe,Ye,st,Qe,he().U,$e],...[ft,Mt,kt,At,St],...[we().Zm,we().Lc],...[ot,nt],...[Ue],...[Ne().c5],...[Je,et,tt,Fe,Oe,Ee,he().H,We,Ke,Ge,ge().LN,ut]]},Ot={key:Le,render:e=>(0,s.jsx)(X().A,{...e}),actions:[Re,...Ae().YO]},qt={key:"block menu manage",render:e=>(0,s.jsx)(X().A,{...e}),actions:[_e,ge().ko,ge().oc,Be,ve().As,ve().nK,Se().t,pe().z,$().$]},Ht={key:"block menu comment",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ue().Im,(0,Ce().F)("block_action_menu"),me().KV,fe().qp]},Wt={key:"block menu primary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[me().KV,pe().z,ve().As,ve().nK,Pe,Te,je,$().$]},Kt={key:Le,render:e=>(0,s.jsx)(X().A,{...e}),actions:[_e,Re,...Ae().YO,ge().ko,ge().oc,Be]},Gt={key:"block menu presentation",render:e=>(0,s.jsx)(X().A,{...e}),actions:[Ue]},Xt={key:"block menu secondary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[Qe,Je,et,tt,Me().i,Fe,Ve,De,ze,we().Zm,we().Lc,qe,Oe,Ee,he().U,he().H,We,Ke,Ge,Xe,Ye,$e,nt,ot,ge().LN,ut,Se().t,st]},Yt={key:"block menu dictate",render:e=>(0,s.jsx)(X().A,{...e}),actions:[fe().qp]},$t={key:"block menu comment",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ue().Im,ue().pG,ue().R5,(0,Ce().F)("block_action_menu")]},Zt={key:"block menu color",render:e=>(0,s.jsx)(X().A,{...e,topBorder:!0}),actions:[gt,de().Rw]},Qt={key:"code block menu style",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ft,Mt,kt,At,St]},Jt={key:"block menu quote",render:e=>(0,s.jsx)(X().A,{...e}),actions:[Nt]},ea={key:"block menu number",render:e=>(0,s.jsx)(X().A,{...e}),actions:[xt]},ta={key:"block menu bullet",render:e=>(0,s.jsx)(X().A,{...e}),actions:[_t]},aa={key:"block alignment",render:e=>(0,s.jsx)(X().A,{...e}),actions:[Bt,zt,ye().N,ye().S]},na=[ke().LQ,$t,aa,Ne().PE,Wt,Yt,Kt,Xt,Gt,Zt,Qt,Jt,ea,ta],oa=[ke().LQ,Et,Ot,qt,Ht],ia=(0,be().uk)({key:"open in (group)",svg:f().arrowDiagonalUpRightIcon,displayName:Ie.openIn,analyticsName:Ie.openIn.defaultMessage,validators:[Q().vXb,Q().AU6(Q().FrL),Ae().kf],subActions:()=>[{key:0,title:void 0,render:e=>(0,s.jsx)(X().A,{...e}),actions:Ae().Wq}]}),ra=(0,ne().Sx)({gateName:"updated_6dot_menu"})?oa:na,sa={key:"collection menu primary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[st,dt,gt,We]},ca={key:"collection menu navigation",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ia]},la={key:"collection menu manage",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ge().oc,Be,ve().As,Se().t,pe().z]},da={key:"collection menu comment",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ue().Im]},ua={key:"collection menu tertiary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ue().Im,ia]},ma={key:"collection menu secondary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[gt,We]},ga={key:"collection menu primary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[st,dt,ge().oc,Be,ve().As,Se().t,pe().z]},pa=[ga,ma,ua],fa=[sa,ca,la,da],va=(0,ne().Sx)({gateName:"updated_6dot_menu"})?fa:pa,ba=[ga,ma,{key:"collection menu tertiary",render:e=>(0,s.jsx)(X().A,{...e}),actions:[ia]}]},300985:(e,t,a)=>{a.d(t,{Z:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M7.154 3.625h1.23a.625.625 0 1 0 0-1.25h-1.23A2.625 2.625 0 0 0 4.529 5v2.069c0 .9-.508 1.722-1.313 2.124l-.317.159a.725.725 0 0 0 0 1.297l.317.158a2.38 2.38 0 0 1 1.313 2.124V15a2.625 2.625 0 0 0 2.625 2.625h1.23a.625.625 0 1 0 0-1.25h-1.23c-.76 0-1.375-.616-1.375-1.375v-2.069c0-1.17-.564-2.256-1.492-2.931a3.63 3.63 0 0 0 1.492-2.931V5c0-.76.615-1.375 1.375-1.375m5.692 12.75h-1.23a.625.625 0 1 0 0 1.25h1.23A2.625 2.625 0 0 0 15.471 15v-2.069c0-.9.508-1.722 1.313-2.124l.317-.159a.725.725 0 0 0 0-1.296l-.317-.159a2.38 2.38 0 0 1-1.313-2.124V5a2.625 2.625 0 0 0-2.625-2.625h-1.23a.625.625 0 1 0 0 1.25h1.23c.76 0 1.375.616 1.375 1.375v2.069c0 1.17.564 2.256 1.492 2.931a3.63 3.63 0 0 0-1.492 2.931V15c0 .76-.615 1.375-1.375 1.375"})},o=(0,a(340498).wt)("curlyBraces",n)},354406:(e,t,a)=>{a.d(t,{LQ:()=>l});a(296540);var n=()=>a(495262),o=()=>a(878377),i=()=>a(416726),r=a(474848);const s=(0,i().Ls)({key:"mobile undo",displayName:i().AY.undoName,analyticsName:i().AY.undoName.defaultMessage,svg:a(454503).arrowUTurnUpLeftIcon,validators:[o().M3g,o().tpB,o().BBM,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"undo"},action:(e,t,a)=>{let{environment:o}=t;return n().tN({environment:o,callback:e})}}),c=(0,i().Ls)({key:"mobile redo",displayName:i().AY.redoName,analyticsName:i().AY.redoName.defaultMessage,svg:a(638616).W,validators:[o().tpB,o().fHN,o().AU6(o().ctY),o().AU6(o().Pnk)],closeParentMenu:!0,track:{actionName:"redo"},action:(e,t,a)=>{let{environment:o}=t;return n().ZS({environment:o,callback:e})}}),l=(0,i().gy)({key:"mobile revision actions",render:e=>(0,r.jsx)(a(89924).A,{...e}),actions:[s,c]})},375078:(e,t,a)=>{a.r(t),a.d(t,{maybeTurnCollectionViewIntoCollectionViewPage:()=>h,transformBlocks:()=>A,transformIntoColumnList:()=>C});a(581454);var n=()=>a(908006),o=()=>a(700500),i=()=>a(179034),r=()=>a(496603),s=()=>a(722101),c=()=>a(44729),l=()=>a(915457),d=()=>a(246826),u=()=>a(797265),m=()=>a(778417),g=()=>a(725614),p=()=>a(751156),f=()=>a(62287),v=()=>a(87017),b=()=>a(594794),y=()=>a(299545),M=()=>a(508496),k=()=>a(630116),S=()=>a(65269);function A(e){const{environment:t,blocks:a,blockType:S,transaction:A}=e;if(S!==o().xd.transclusionContainer)if(S===o().xd.callout&&M().default.checkGate({gateName:"create_v2_callouts"}))!function(e){const{environment:t,blocks:a,transaction:n}=e,r=a[0];if(!r)return;const s=r.getRecordStoreUIParent();if(!s||!(0,y().iU)(s))return;const u=s.getRecordStoreUIParent();if(!(u&&u instanceof k().Bv))return;const p=(0,b().Z1)({environment:t,table:i().ev,spaceId:u.getSpaceId()}),f=d().Wv({environment:t,id:p,type:o().xd.callout,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:u.getSpaceId(),format:{callout_version:2}});c().NI({parentStore:s,childStore:f,after:r.id,transaction:n});w({newParentStore:f.getContentStore(),blocks:a,transaction:n}),l().s4({store:f,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[f]})}({environment:t,blocks:a,transaction:A});else if(S!==o().xd.columnList)if(S!==o().xd.slide)if((0,o().ZK)(S)){const e=parseInt(S.replace("column","").replace("block","")),o=r().oE(r().Hn(e-1,(()=>v().insertTextBelow({environment:t,blocks:a,transaction:A})))),i=[...a,...o],s=C({environment:t,blocks:i,transaction:A});n().default.afterNextFlush((()=>{g().setSelectionAtStart({store:s[0].getBlockTitleStore()})}))}else for(const o of a)if(o.isCalloutV2()){const e=o.getParentBlockStore();if(e){const i=o.getContentStores();p().applyOperation({store:e,operation:{pointer:e.pointer,path:["content"],command:"insertChildrenAfter",args:{ids:i.map((e=>e.id)),after:o.id}},transaction:A}),c().zz({parentStore:e.getContentStore(),childStore:o,transaction:A});for(const e of i)f().pd({environment:t,block:e,blockType:S,transaction:A,isMultiBlockTransformation:a.length>1});n().default.afterNextFlush((()=>{u().dL(t,i.map((e=>e.id)))}))}}else f().pd({environment:t,block:o,blockType:S,transaction:A,isMultiBlockTransformation:a.length>1});else!function(e){const{environment:t,blocks:a,transaction:n}=e,r=a[0];if(!r)return;const s=r.getRecordStoreUIParent();if(!s||!(0,y().iU)(s))return;const l=s.getRecordStoreUIParent();if(!(l&&l instanceof k().Bv))return;const u=(0,b().Z1)({environment:t,table:i().ev,spaceId:l.getSpaceId()}),p=d().Wv({environment:t,id:u,type:o().xd.slide,inMemoryRecordCache:s.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});c().NI({parentStore:s,childStore:p,after:r.id,transaction:n});w({newParentStore:p.getContentStore(),blocks:a,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[p]})}({environment:t,blocks:a,transaction:A});else C({environment:t,blocks:a,transaction:A});else!function(e){const{environment:t,blocks:a,transaction:n}=e,r=a[0];if(!r)return;const c=r.getRecordStoreUIParent();if(!c||!(0,y().iU)(c))return;const l=c.getRecordStoreUIParent();if(!l||!(0,y()._p)(l))return;if(!l.isDefined())return;const u=(0,b().Z1)({environment:t,table:i().ev,spaceId:l.getSpaceId()}),p=d().Wv({environment:t,id:u,type:o().xd.transclusionContainer,inMemoryRecordCache:c.inMemoryRecordCache,transaction:n,spaceId:l.getSpaceId()});s().WH({parentStore:c,insertStore:p,afterStore:r,transaction:n});w({newParentStore:p.getContentStore(),blocks:a,transaction:n}),g().clear({environment:t}),m().IU({environment:t}),m().td({environment:t,stores:[p]})}({environment:t,blocks:a,transaction:A})}function h(e){let{environment:t,blocks:a,transaction:n}=e;(function(e){return 1===e.length&&"collection_view"===e[0].getType()})(a)&&A({environment:t,blocks:a,blockType:"collection_view_page",transaction:n})}function C(e){const{environment:t,blocks:a,transaction:n}=e,r=a[0];if(!r)return[];const c=r.recordStoreUIParentStore;if(null==c||!c.valueIs(S()._))return[];const l=(0,b().Z1)({environment:t,table:i().ev,spaceId:r.getSpaceId()}),u=d().Wv({environment:t,id:l,type:o().xd.columnList,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:r.getSpaceId()}),{childStore:m}=s().nc({parentStore:c,insertStore:u,beforeStore:r,transaction:n});return a.map((e=>{const a=(0,b().Z1)({environment:t,table:i().ev,spaceId:r.getSpaceId()}),l=d().Wv({environment:t,id:a,type:o().xd.column,inMemoryRecordCache:r.inMemoryRecordCache,transaction:n,spaceId:r.getSpaceId()}),{childStore:u}=s().TF({parentStore:c,childToRemoveStore:e,transaction:n}),{childStore:g}=s().WH({parentStore:m.getContentStore(),insertStore:l,transaction:n}),{childStore:p}=s().WH({parentStore:g.getContentStore(),insertStore:u,transaction:n});return p}))}function w(e){const{newParentStore:t,blocks:a,transaction:n}=e;for(const o of a){const e=o.getRecordStoreUIParent();null!=e&&e.valueIs(S()._)&&(s().TF({parentStore:e,childToRemoveStore:o,transaction:n}),s().BC({parentStore:t,appendStore:o,transaction:n}))}}},481721:(e,t,a)=>{a.r(t),a.d(t,{codeIcon:()=>o,iconDefinition:()=>n});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M12.6 3.172a.625.625 0 0 0-1.201-.344l-4 14a.625.625 0 0 0 1.202.344zM5.842 5.158a.625.625 0 0 1 0 .884L1.884 10l3.958 3.958a.625.625 0 0 1-.884.884l-4.4-4.4a.625.625 0 0 1 0-.884l4.4-4.4a.625.625 0 0 1 .884 0m8.316 0a.625.625 0 0 1 .884 0l4.4 4.4a.625.625 0 0 1 0 .884l-4.4 4.4a.625.625 0 0 1-.884-.884L18.116 10l-3.958-3.958a.625.625 0 0 1 0-.884"})},o=(0,a(340498).wt)("code",n)},487494:(e,t,a)=>{a.d(t,{A:()=>o});var n=function(e){return e[e.Preview=0]="Preview",e[e.Mention=1]="Mention",e[e.Link=2]="Link",e}(n||{});const o=n},546692:(e,t,a)=>{a.d(t,{A:()=>nt,$:()=>at});var n=a(296540),o=()=>a(959013),i=()=>a(484714),r=()=>a(847249),s=()=>a(401497),c=()=>a(584262),l=a(474848);const d=(0,a(340498).wt)("disconnect",{viewBox:"0 0 16 16",svg:(0,l.jsx)("path",{d:"M6.45508 4.50977L7.28906 5.34375L8.7041 3.4707L7.67871 5.7334L9.45605 7.51074H11.083L10.3857 8.43359L11.2539 9.30859L12.7852 7.36035C12.9082 7.20996 12.9697 7.06641 12.9697 6.90234C12.9697 6.61523 12.751 6.41016 12.4502 6.41016H8.54688L10.5703 1.05078C10.8506 0.298828 10.0645 -0.0976562 9.58594 0.517578L6.45508 4.50977ZM12.874 13.6631C13.0859 13.875 13.4346 13.875 13.6396 13.6631C13.8516 13.458 13.8584 13.1025 13.6396 12.8906L3.10547 2.35645C2.90039 2.15137 2.53809 2.14453 2.33301 2.35645C2.12793 2.56152 2.12793 2.92383 2.33301 3.12891L12.874 13.6631ZM3.0166 9.12402C3.0166 9.4043 3.23535 9.61621 3.53613 9.61621H7.44629L5.41602 14.9688C5.13574 15.7207 5.92188 16.1172 6.40039 15.5088L9.52441 11.5166L8.69043 10.6895L7.28223 12.5488L8.30078 10.293L6.5166 8.51562H4.89648L5.60059 7.59277L4.72559 6.71777L3.20801 8.65918C3.08496 8.81641 3.0166 8.95996 3.0166 9.12402Z"})});var u=()=>a(212727),m=()=>a(498212),g=()=>a(939768),p=()=>a(427704);function f(e,t){const a=t.trim().toLowerCase(),n=(0,g().d9)(a).replace(/\./g,"-");return n?`${n}-${e}`:e}var v=()=>a(388693),b=()=>a(179034),y=()=>a(857783),M=()=>a(351360),k=()=>a(760217),S=()=>a(256863);function A(e,t){const{bot:n}=e,o=(0,r().K8)((()=>M().default.state.currentUserRootStore),[]);return n&&o?(0,l.jsx)(k().A,{...e,icon:(0,l.jsx)(S().A,{botValue:n}),title:(0,a(799288).Hg)(n),ref:t}):null}const h=n.forwardRef(A);var C=()=>a(575143),w=()=>a(419357),N=()=>a(331542),L=()=>a(678553),I=()=>a(64e3),x=()=>a(614505),P=()=>a(16006),T=()=>a(859428),j=()=>a(192421),U=()=>a(148307),_=()=>a(751109),R=()=>a(553965),B=()=>a(878079),V=()=>a(962730),F=()=>a(103448);function D(e){return(0,r().K8)((()=>{var t;return{isDefined:e.isDefined(),channel:null===(t=e.getKeyStore("channel").getValue())||void 0===t?void 0:t.replace(/^#/,"")}}),[e])}function z(){return(0,l.jsx)(F().A,{imageURL:U().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,l.jsx)(o().sA,{defaultMessage:"Connect a Slack channel to get updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.tooltip"})})}function E(){return(0,l.jsx)(F().A,{imageURL:U().A.images.tooltips.pageUpdates.slackPng,imageHeight:100,caption:(0,l.jsx)(o().sA,{defaultMessage:"Disconnect a Slack channel to stop getting updates about this page and pages within it.",id:"topbar.updatesButton.slackIntegrationButton.disconnectTooltip"})})}const O=(0,n.forwardRef)((function(e,t){const{blockStore:n,...i}=e,{blockStore:s,slackIntegrationStore:d}=(0,B().x2)(n),{isDefined:u,channel:m}=D(d),g=(0,r().K8)((()=>(0,a(492414).Ay)({store:s,pageVisitSource:c().y8.LinkInPage})),[s]);return u?(0,l.jsx)(T().A,{placement:V().W.Left,render:e=>(0,l.jsx)(C().A,{...(0,R().A)(e,i),svg:_().z,title:m,caption:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o().sA,{defaultMessage:"Based on",id:"topbar.updatesButton.slackIntegrationButton.activeTitle"})," ",(0,l.jsx)(a(719147).A,{href:g,children:(0,l.jsx)(P().A,{store:s,style:{display:"inline"}})})]}),ref:t}),renderTooltip:E}):null})),q=(0,n.forwardRef)((function(e,t){const{blockStore:a,...n}=e,{slackIntegrationStore:i}=(0,r().K8)((()=>(0,B().x2)(a)),[a]),{isDefined:s,channel:c}=D(i);return s?(0,l.jsx)(T().A,{placement:V().W.Left,render:e=>(0,l.jsx)(C().A,{ref:t,svg:_().z,title:c,caption:(0,l.jsx)(o().sA,{defaultMessage:"Connected to Slack channel",id:"topbar.updatesButton.slackIntegrationButton.connectedCaption"}),...(0,R().A)(e,n)}),renderTooltip:E}):null}));var H=()=>a(722872),W=()=>a(452558),K=()=>a(928600),G=()=>a(480095),X=()=>a(89924),Y=()=>a(662971);const $=(0,n.forwardRef)((function(e,t){const{context:a,parent:o,isSharedDirectly:s,botStore:c,botPermissionSourcePage:d,originConnectionLabel:u,...m}=e,g=(0,i().v3)(),p=(0,r().O$)(M().AppStoreCurrentSpaceStore),f=a.blocks[0],v=(0,r().K8)((()=>f.canAdmin()&&(null==p?void 0:p.canRead())),[f,p]),{botCapabilities:b,botName:y}=(0,r().K8)((()=>({botCapabilities:c.getCapabilities(),botName:c.getName()})),[c]);return(0,n.createElement)(Y().A,{...m,key:c.id,renderOrigin:e=>(0,l.jsx)(k().A,{...e,title:u,icon:(0,l.jsx)(S().A,{botStore:c,showActiveDot:!0,style:{position:"relative"}})}),renderExtension:(e,t)=>{let n;return n=g.device.isPhone?{menuType:H().gu.Modal,right:(0,l.jsx)(G().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:H().gu.Popup,width:220,...e},(0,l.jsx)(K().A,{...n,children:(0,l.jsx)(W().A,{context:a,initialFocus:0,onAccept:o.onAccept,sections:[Z({isSharedDirectly:s,botCapabilities:b,botPermissionSourcePage:d}),...v?[Q({isSharedDirectly:s,botId:c.id,botName:y})]:[]]})})},onFocus:o.onFocus,focused:m.focused,openOnFocus:!1,ref:t,placementToOrigin:V().W.Left})}));function Z(e){const{botCapabilities:t,isSharedDirectly:n,botPermissionSourcePage:o}=e,i=(0,a(433847).MD)(t);return{key:"active connection capabilities section",render:e=>(0,l.jsx)(X().A,{...e,topBorder:!1}),actions:[...n?[]:[qe(o)],He(i)]}}function Q(e){const{isSharedDirectly:t,botId:a,botName:n}=e;return{key:"active connection disconnect section",render:e=>(0,l.jsx)(X().A,{...e}),actions:t?[We(a,n)]:[Ke(a)]}}a(16280),a(944114),a(517642),a(658004),a(733853),a(845876),a(432475),a(515024),a(731698),a(898992),a(354520),a(581454);var J=()=>a(792071),ee=()=>a(824862),te=()=>a(332393),ae=()=>a(534177);function ne(e){a(989423).vd(e,"open_more_connections_menu")}var oe=()=>a(163580),ie=()=>a(972435),re=()=>a(640653),se=()=>a(106628),ce=()=>a(630116);const le=(0,o().YK)({noConnectionsLabel:{defaultMessage:"None",id:"topbarMenu.subActions.addConnections.none"},activeConnectionsLabel:{defaultMessage:"Active connections",id:"topbarMenu.subActions.addConnections.activeConnections"}}),de=(0,n.forwardRef)((function(e,t){const{context:o,parent:c,alreadyConnectedIntegrationIds:d,alreadyConnectedBotIds:u,originButtonLabel:m,connectedActionsToShow:g,...p}=e,f=o.blocks[0],b=(0,i().v3)(),y=(0,r().O$)(M().AppStoreCurrentSpaceStore),k=(0,r().K8)((()=>null==y?void 0:y.getBotSettingsStore().getValue()),[y]),S=(0,r().K8)((()=>null!=k&&k.integration_restrictions&&null!=k&&k.integration_approval_statuses?Object.keys(k.integration_approval_statuses):[]),[k]),[A,h]=(0,n.useState)(""),[w,N]=(0,n.useState)({status:"loading"}),L=(0,a(645873).fJ)(se().T.searchActions);(0,n.useEffect)((()=>{if("resolved"!==L.status)return;const e=L.value;const{currentUserRootStore:t}=M().default.state;Promise.all([async function(t){return await e.searchSpaceBots({environment:b,query:t})}(A),async function(e){const t=await se().T.searchActions.load();return await t.searchInstallableIntegrations({query:e,environment:b,spaceId:null==y?void 0:y.id,botSettings:k})}(A)]).then((e=>{let[a,n]=e;const o=new Set,i=function(e){const{alreadyConnectedBotIds:t,alreadyConnectedIntegrationIds:a,botValues:n,environment:o}=e,i=[],{currentUserRootStore:r}=M().default.state;if(!r)throw new Error("currentUserStore not defined");for(const s of n){const e=s.id;let n=!Boolean(s.integration_id);if(s.integration_id){const e=(0,ce().Oo)(r,{id:s.integration_id,table:te().Li}).getKeyStore("type").getValue();(0,te().SF)(e?{type:e}:void 0)&&(n=!0)}const c=t.has(e)||s.integration_id&&!n&&a.has(s.integration_id),l=J().Bj6.fromValue(ee().GP,s),d=(0,oe().VT)(o,l)||(0,re().s7)(o)&&(0,oe().b0)(l);!c&&d&&i.push(s)}return i}({alreadyConnectedBotIds:u,alreadyConnectedIntegrationIds:d,botValues:a,environment:b}).map((e=>{if(e.integration_id&&t){const a=(0,ce().Oo)(t,{id:e.integration_id,table:te().Li}).getKeyStore("type").getValue();J().Bj6.fromValue(ee().GP,e).isInternalBot(a?{type:a}:void 0)&&o.add(e.integration_id)}return{table:ee().GP,value:e}}));let r=n.map((e=>{if(y){const t=ce().sk.createChildStore(y,{id:e,table:te().Li}),a=t.computeWithRecordValues((e=>{let{getRecordValueAndSubscribe:a}=e;return a(t)}));if(a&&!(0,v().v_)(a)){return{table:te().Li,value:a}}}})).filter(ae().O9).filter((e=>!(o.has(e.value.id)||d.has(e.value.id))));if(v().Gk.name.toLowerCase().includes(A.toLowerCase())){const e={table:"legacy_integration",value:v().Gk};r=[...r,e]}const s=[...i,...r].sort(((e,t)=>{var a,n;const o=null===(a=e.value.name)||void 0===a?void 0:a.toLowerCase(),i=null===(n=t.value.name)||void 0===n?void 0:n.toLowerCase();return o&&i?o<i?-1:o>i?1:0:0}));N({results:s,status:"ready"})})).catch((e=>N({status:"error"})))}),[A,y,u,k,S,b,d,f,L.status,L.value]);const I=(0,s().IS)((e=>({rightStyle:{color:e.text.tertiary,marginRight:5}})),[]),[x,P]=(0,a(857437).$)();return(0,l.jsx)(Y().A,{...p,renderOrigin:(e,t)=>(0,l.jsx)(C().A,{...e,ref:t,title:m,svg:a(173614).c}),renderExtension:(e,t)=>{const a=b.device.isMobile?{menuType:H().gu.Modal,right:(0,l.jsx)(G().DoneMenuText,{}),onClickRight:t.close,...e}:{menuType:H().gu.Popup,width:220,...e},n=b.device.isMobile?{menuType:H().gu.Modal,topbarStyle:{height:0}}:{menuType:H().gu.Popup,width:220,maxHeight:"16vh",...e},i=Boolean(f.canAdmin()&&(null==y?void 0:y.canRead()));return(0,l.jsx)(K().A,{...a,onClick:e=>{e.stopPropagation()},children:(0,l.jsx)(W().A,{initialFocus:0,context:o,onAccept:()=>{ne(b)},comboboxProps:i?P:void 0,sections:[...i?[ue(A,h,x),""===A?me({searchResults:w,resultsMenuProps:n}):pe({searchResults:w,resultsMenuProps:n})]:[],fe(i,v().Gk),(r=g||[],{key:"existing connections section",title:ie().A.formatMessage(le.activeConnectionsLabel),render:e=>(0,l.jsx)(X().A,{...e}),actions:r})]})});var r},onFocus:c.onFocus,focused:p.focused,openOnFocus:!0,ref:t,right:(0,l.jsx)(l.Fragment,{children:d.size+u.size||ie().A.formatMessage(le.noConnectionsLabel)}),rightStyle:I.rightStyle})}));function ue(e,t,a){return{key:"search connections section",render:e=>(0,l.jsx)(X().A,{...e,isInput:!0}),actions:[Be(e,t,a)]}}function me(e){const{searchResults:t,resultsMenuProps:a}=e,n=new Set;return{key:"search initial connections section",render:e=>(0,l.jsx)(ge,{...e,resultsMenuProps:a}),actions:[..."ready"===t.status?t.results.map((e=>"bot"===e.table?(e.value.integration_id&&n.add(e.value.integration_id),Fe(e.value)):$e(e)?(0,B().Qi)()&&!(0,B().yP)()?void 0:ze(e.value):De(e.value))).filter(ae().O9):"loading"===t.status?[Re()]:[Ve()]]}}function ge(e){const{resultsMenuProps:t,...a}=e,o=(0,n.useRef)(null),i=(0,n.useCallback)((()=>{var e;const t=null===(e=o.current)||void 0===e||null===(e=e.querySelector('[role="menuitem"]'))||void 0===e?void 0:e.clientHeight,a=window.innerHeight<600?3:7;o.current&&t&&(o.current.style.maxHeight=a*t+.5*t+"px")}),[]);return(0,n.useEffect)((()=>(i(),window.addEventListener("resize",i),()=>{window.removeEventListener("resize",i)})),[i]),(0,l.jsx)(K().A,{...t,innerRef:o,children:(0,l.jsx)(X().A,{...a,isInput:!0,topBorder:!1,style:{margin:0,paddingTop:0,paddingBottom:0}})})}function pe(e){const{searchResults:t,resultsMenuProps:a}=e;let n=[];return n="error"===t.status?[Ve()]:"loading"===t.status?[Re()]:"ready"===t.status&&t.results.length>0?t.results.map((e=>e.table===ee().GP?Fe(e.value):$e(e)?(0,B().Qi)()&&!(0,B().yP)()?void 0:ze(e.value):De(e.value))).filter(ae().O9):[{key:"connections search error",displayName:ie().A.formatMessage(Ue.connectionNoSearchResultsLabel),analyticsName:Ue.connectionNoSearchResultsLabel.defaultMessage,searchName:Ue.connectionNoSearchResultsLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(I().A,{title:ie().A.formatMessage(Ue.connectionNoSearchResultsLabel)}),action:()=>{}}],{key:"connections search results",render:e=>(0,l.jsx)(ge,{...e,resultsMenuProps:a}),actions:n}}function fe(e,t){const a=e,n=!(0,B().Qi)()||(0,B().yP)();return{key:"manage connections section",render:t=>(0,l.jsx)(X().A,{...t,style:{marginTop:e?6:0}}),actions:[...!a&&n?[ze(t)]:[],{key:"manage connections",displayName:ie().A.formatMessage(Ue.manageConnectionsLabel),analyticsName:Ue.manageConnectionsLabel.defaultMessage,searchName:Ue.manageConnectionsLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,ve().AU6(ve().FrL)],render:e=>(0,l.jsx)(C().A,{...e,title:ie().A.formatMessage(Ue.manageConnectionsLabel),svg:u().gearIcon}),action:()=>{Me().Ow({currentTab:"connected_apps",openedFrom:"topbar"})}}]}}var ve=()=>a(878377),be=()=>a(908928),ye=()=>a(901389),Me=()=>a(209660),ke=()=>a(579627),Se=()=>a(755636),Ae=()=>a(861017),he=()=>a(780054),Ce=()=>a(725951),we=()=>a(898563),Ne=()=>a(705540),Le=()=>a(957416),Ie=()=>a(246826),xe=()=>a(464510),Pe=()=>a(751156);const Te=(0,o().YK)({somethingWentWrong:{defaultMessage:"Something went wrong.",id:"slackActions.dialogError.loginWithSlack.errorMessage"},titleMessage:{defaultMessage:"Slack login",id:"slackActions.loginPopupModal.title"},removeIntegrationMessage:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.prompt",defaultMessage:"Are you sure you want to remove Slack integration?"},removeIntegrationConfirmationLabel:{id:"slackIntegrationButton.removeIntegrationConfirmationDialog.removeButton.label",defaultMessage:"Remove"}});async function je(e){let{environment:t,blockId:a,intl:n}=e;we().FY(t),await async function(e){const{environment:t,blockId:a,intl:n}=e,o=(0,Ce().LX)(t);let i=(0,Ae().Hs)(he().A.domainBaseUrl,{blockId:a,authType:o,userId:t.currentUser.id});if(i=o.redirectToAuth?i:await(0,Ce().YN)(t,i),t.device.isElectron)return void Ne().openExternalUrl(i);const r=await Le().P(t,{width:530,height:530,url:i,titleMessage:Te.titleMessage});if(!r)return void ye().f1(n.formatMessage(Te.somethingWentWrong));const s=(0,Ae().parseRoute)({url:r,isMobile:t.device.isMobile,baseUrl:he().A.domainBaseUrl,publicDomainName:he().A.publicDomainName,protocol:he().A.protocol,currentUrl:window.location.href});"slackAuthCallback"===s.name&&xe().KY({route:s,environment:t})}({environment:t,blockId:a,intl:n})}const Ue=(0,o().YK)({connectionLoadingLabel:{id:"topbar.connectionsSection.connectionLoading.label",defaultMessage:"Connections loading"},connectionSearchPlaceholderLabel:{id:"topbar.connectionsSection.topbarMoreConnectionsSubMenu.label",defaultMessage:"Search for connections..."},connectionSearchErrorLabel:{id:"topbar.connectionsSection.connectionSearchError.label",defaultMessage:"Something went wrong"},connectionNoSearchResultsLabel:{id:"topbar.connectionsSection.noSearchResults.label",defaultMessage:"No results"},connectionSearchResultLabel:{id:"topbar.connectionsSection.connectionSearchResult.label",defaultMessage:"{name}"},slackEmptyLabel:{id:"topbar.connectionSection.slackEmpty.label",defaultMessage:"Slack"},slackConnectedLabel:{id:"topbar.connectionSection.slackConnected.label",defaultMessage:"Connected to Slack channel"},manageConnectionsLabel:{id:"topbar.connectionsSection.manageConnections.label",defaultMessage:"Manage connections"},connectionsLabel:{id:"topbar.connectionsSection.connections.label",defaultMessage:"Connections"},fromParentPageLabel:{id:"topbar.connectionsSection.fromParenPage.label",defaultMessage:"From"},capabilitiesLabel:{id:"topbar.connectionsSection.capabilities.label",defaultMessage:"Capabilities"},disconnectLabel:{id:"topbar.connectionSection.disconnectIntegration.label",defaultMessage:"Disconnect"},disconnectConfirmationLabel:{id:"topbar.connectionSection.disconnectIntegrationConfirmation.label",defaultMessage:"{botName} will be removed from this page and all child pages. Continue?"},restrictionLabel:{id:"topbar.connectionSection.restrictIntegration.label",defaultMessage:"Restrict"},restrictionConfirmationLabel:{id:"topbar.connectionSection.restrictIntegrationConfirmation.label",defaultMessage:"Are you sure you want to remove this permission and restrict access? This page will no longer share settings from the parent page."},restrictionAcceptLabel:{id:"topbar.connectionSection.restrictAccept.label",defaultMessage:"Restrict access"},connectionLabel:{id:"topbar.connectionSection.connectionIntegration.label",defaultMessage:"{connectionName}"},connectionBotConfirmlabel:{id:"topbar.connectionSection.connectBotConfirmation.label",defaultMessage:"{botName} will have access to this and all child pages. Continue?"},connectionIntegrationConfirmlabel:{id:"topbar.connectionSection.connectIntegrationConfirmation.label",defaultMessage:"{integrationName} is developed by a third party partner and you will be redirected outside of Notion to authorize this connection. Continue?"}}),_e=ve().AU6(ve().Uo6([ve().FrL,ve().AU6(ve().Uo6([ve().Km9,ve().p2L]))]));function Re(){return{key:"connections loading",displayName:ie().A.formatMessage(Ue.connectionLoadingLabel),analyticsName:Ue.connectionLoadingLabel.defaultMessage,searchName:Ue.connectionLoadingLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(L().Ay,{...e,icon:(0,l.jsx)(N().A,{}),title:ie().A.formatMessage(Ue.connectionLoadingLabel)}),action:()=>{}}}function Be(e,t,a){return{key:"search connections input",analyticsName:Ue.connectionSearchPlaceholderLabel.defaultMessage,displayName:ie().A.formatMessage(Ue.connectionSearchPlaceholderLabel),searchName:Ue.connectionSearchPlaceholderLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:()=>(0,l.jsx)(w().Ay,{value:e,onChange:e=>t(e.target.value),placeholder:ie().A.formatMessage(Ue.connectionSearchPlaceholderLabel),focus:!0,...a}),action:()=>{}}}function Ve(){return{key:"connections search error",displayName:ie().A.formatMessage(Ue.connectionSearchErrorLabel),analyticsName:Ue.connectionSearchErrorLabel.defaultMessage,searchName:Ue.connectionSearchErrorLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:e=>(0,l.jsx)(I().A,{title:ie().A.formatMessage(Ue.connectionSearchErrorLabel)}),action:()=>{}}}function Fe(e){const{id:t,name:a}=e,n=ie().A.formatMessage(Ue.connectionSearchResultLabel,{name:a});return{key:`${t}`,displayName:n,analyticsName:n,searchName:a,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e],render:(t,a)=>(0,l.jsx)(h,{...t,bot:e,focused:t.focused,onClick:async()=>{await Xe(a.blocks[0],a.environment,e)},ref:t.ref}),action:async t=>{await Xe(t.blocks[0],t.environment,e)}}}function De(e){const{id:t,name:a,info:n}=e,o=ie().A.formatMessage(Ue.connectionLabel,{connectionName:a});return{key:`${t}`,displayName:o,analyticsName:o,searchName:a,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e,ve().AU6(ve().FrL)],render:e=>(0,l.jsx)(k().A,{...e,title:o,icon:(0,l.jsx)("img",{src:n.icon,style:{width:18,height:"auto"},ref:e.ref})}),action:async t=>{let{environment:a}=t;e.id!==v().Jc&&await async function(e,t){const{id:a,name:n}=e,{accept:o}=await ye().Gh({message:ie().A.formatMessage(Ue.connectionIntegrationConfirmlabel,{integrationName:n})}),i=function(e,t){if(!(0,m().uj)(e))return`${p().JZ.integrations}/${e}`;const a=f(e,void 0===t?"":t);return`${p().JZ.integrations}/${a}`}(a,n);o&&Se().f({environment:t,url:i,targetSelf:!1})}(e,a)}}}function ze(e){const t=ie().A.formatMessage(Ue.slackEmptyLabel);return{key:"slack empty",displayName:t,analyticsName:Ue.slackEmptyLabel.defaultMessage,searchName:t,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().D4X,ve().LO$,ve().lG8,ve().AU6(ve().wHP)],render:a=>(0,l.jsx)(T().A,{placement:V().W.Left,render:n=>(0,l.jsx)(k().A,{...(0,R().A)(n,a),title:t,icon:(0,l.jsx)("img",{src:e.info.icon,style:{height:18}})}),renderTooltip:z}),action:e=>{var t;je({environment:e.environment,blockId:null===(t=e.blocks)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.id,intl:ie().A.getIntl()})}}}function Ee(){const e=ie().A.formatMessage(Ue.slackConnectedLabel);return{key:"slack connected inherited",displayName:e,analyticsName:Ue.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().geu,ve().AU6(ve().wHP)],render:(e,t,a)=>(0,l.jsx)(O,{blockStore:t.blocks[0],...e}),action:e=>{}}}function Oe(){const e=ie().A.formatMessage(Ue.slackConnectedLabel);return{key:"slack connected on block",displayName:e,analyticsName:Ue.slackConnectedLabel.defaultMessage,searchName:e,closeParentMenu:!0,validators:[ve().sc7,ve().p2L,ve().qFS,ve().AU6(ve().wHP)],render:(e,t,a)=>(0,l.jsx)(q,{blockStore:t.blocks[0],...e}),action:e=>{const{slackIntegrationStore:t}=(0,B().x2)(e.blocks[0]);!function(e,t,a){ye().ui({message:a.formatMessage(Te.removeIntegrationMessage),showCancel:!0,keepFocus:!0,items:[{label:a.formatMessage(Te.removeIntegrationConfirmationLabel),color:"red",onAccept:()=>{we().oI(e),Pe().createAndCommit({userAction:"slackActions.handleRemoveSlackIntegration",environment:e,canUndo:!0,perform:e=>{Ie().zv({store:t,data:{enabled:!1},transaction:e})}})}}]})}(e.environment,t,ie().A.getIntl())}}}function qe(e){const t=ie().A.formatMessage(Ue.fromParentPageLabel);return{key:"from parent page",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:()=>{},render:(t,a)=>{let{blocks:n}=a;const o=n[0],i=ce().Bv.createChildStore(o,{table:b().ev,id:e.blockId});return(0,l.jsx)(Ye,{parentBlockStore:i})}}}function He(e){const t=ie().A.formatMessage(Ue.capabilitiesLabel);return{key:"capabilities",displayName:t,analyticsName:t,searchName:t,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:()=>{},render:()=>(0,l.jsx)(j().F,{role:e})}}function We(e,t){const a=ie().A.formatMessage(Ue.disconnectLabel);return{key:"disconnect integration",displayName:a,analyticsName:a,searchName:Ue.disconnectLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:async a=>{let{blocks:n,environment:o}=a;const i=n[0];await async function(e,t,a,n){const{accept:o}=await ye().Gh({message:ie().A.formatMessage(Ue.disconnectConfirmationLabel,{botName:n})});o&&be().oG({botId:a,store:e,environment:t})}(i,o,e,t)},render:e=>(0,l.jsx)(C().A,{...e,svg:d,title:a,focused:!0})}}function Ke(e){const t=ie().A.formatMessage(Ue.disconnectLabel),a=ie().A.formatMessage(Ue.restrictionLabel);return{key:"restrict page from permission model",displayName:a,analyticsName:a,searchName:Ue.restrictionLabel.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L],action:async t=>{let{blocks:a,environment:n}=t;const o=a[0];await async function(e,t,a){const{accept:n}=await ye().Gh({message:ie().A.formatMessage(Ue.restrictionConfirmationLabel),acceptLabel:ie().A.formatMessage(Ue.restrictionAcceptLabel)});if(n){const n={type:"bot_permission",role:"none",bot_id:e};Pe().createAndCommit({userAction:"TopbarMoreConnections.restrictPagePermissions",environment:a,canUndo:!0,perform:e=>{ke().wW({environment:a,store:t,permissionItem:n,shouldInherit:!0,transaction:e})}})}}(e,o,n)},render:e=>(0,l.jsx)(C().A,{...e,svg:d,title:t,focused:!0})}}function Ge(e){const{botStore:t,botPermissionSourcePage:a}=e,{id:n}=t,o=t.getName(),i=ie().A.formatMessage(Ue.connectionLabel,{connectionName:o});return{key:`${n}`,displayName:i,analyticsName:i,searchName:i,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,ve().AU6(ve().oy3)],action:()=>{},render:(e,n,o)=>{const r=n.blocks[0].id===a.blockId;return(0,l.jsx)($,{...e,context:n,parent:o,isSharedDirectly:r,botStore:t,botPermissionSourcePage:a,originConnectionLabel:i})}}}async function Xe(e,t,a){const{accept:n}=await ye().Gh({message:ie().A.formatMessage(Ue.connectionBotConfirmlabel,{botName:a.name})});n&&be().sK({botValue:a,store:e,environment:t})}function Ye(e){const{parentBlockStore:t}=e,a=(0,r().K8)((()=>t.getIcon()),[t]),d=(0,r().K8)((()=>t.isEmptyPage()),[t]),u=(0,i().v3)(),m=(0,s().DP)(),[g,p]=(0,n.useState)("transparent"),f=u.device.isMobile?{fontSize:14,paddingLeft:4}:{fontSize:12,paddingLeft:4};return(0,l.jsx)(I().A,{...e,title:(0,l.jsxs)("span",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start"},children:[(0,l.jsx)(o().sA,{id:"topbar.connectionSection.parentPage.label",defaultMessage:"From"}),(0,l.jsxs)("span",{style:{display:"flex",alignItems:"center",padding:2,borderRadius:2,marginLeft:2,cursor:"pointer",backgroundColor:g,color:m.text.primary,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},onClick:()=>{y().uK({environment:u,store:t,pageVisitSource:c().y8.LinkInPage})},onMouseEnter:()=>{p(m.selectLightGray[100])},onMouseLeave:()=>{p("transparent")},onMouseDown:()=>{p(m.selectLightGray[200])},onMouseUp:()=>{p(m.selectLightGray[100])},children:[(0,l.jsx)(x().B,{disabled:!0,icon:a,isEmptyPage:d,size:12,style:{margin:"0px 2px"}}),(0,l.jsx)(P().A,{store:t})]})]}),textWrapperStyle:f})}function $e(e){return"legacy_integration"===e.table&&e.value.id===v().Gk.id}a(823215);var Ze=()=>a(68263),Qe=()=>a(310001),Je=()=>a(731320);function et(e){const t=function(e){var t;const a=e.blocks[0],n=(0,Je().i0)(a).filter((0,ae().u0)((e=>(0,Ze().P3)(e.permissionItem)?{true:{...e,permissionItem:e.permissionItem}}:{false:e})));if(0===n.length)return{status:"no bots"};const o=new Map,i=null===(t=M().default.state.currentSpaceStore)||void 0===t?void 0:t.id,r=n.map((e=>{let{from:t,permissionItem:n}=e;const r=ce().sk.createChildStore(a,{table:ee().GP,id:n.bot_id,spaceId:i});if("block"===t.table)return o.set(n.bot_id,t),r})).filter(ae().O9);if(!r.every((e=>e.isReady())))return{status:"loading"};const s=r.filter((t=>t.isDefined()&&Boolean((0,oe().VT)(e.environment,t.getModel()))));if((0,re().s7)(e.environment)){const e=s.map((e=>e.getIntegrationId())),t=new Set(e),a=r.filter((e=>!(!e.isDefined()||t.has(e.getIntegrationId())||!Boolean((0,oe().b0)(e.getModel()))||(t.add(e.getIntegrationId()),0))));s.push(...a)}return{status:"ready",botStores:s,botIdToSharedPageIds:o}}(e),{alreadyConnectedBotIds:a,alreadyConnectedIntegrationIds:n,botActionsState:o}=function(e){const{status:t}=e;if("no bots"===t||"loading"===t)return{botActionsState:e,alreadyConnectedIntegrationIds:new Set,alreadyConnectedBotIds:new Set};const{botStores:a,botIdToSharedPageIds:n}=e,o=(0,Qe().R7)(a),i=new Set,r=new Array;for(const s of a.filter(ae().O9)){const e=n.get(s.id);if(!e)continue;const t=Ge({botStore:s,botPermissionSourcePage:e});r.push(t);const a=s.getIntegrationId();a&&o.has(a)||i.add(s.id)}return{alreadyConnectedIntegrationIds:o,alreadyConnectedBotIds:i,botActionsState:{status:"ready",botActions:r}}}(t),i=function(e,t,a){const n=Ue.connectionsLabel,o=ie().A.formatMessage(n),i="ready"===(null==a?void 0:a.status)?a.botActions:[];return{key:"add connections action",displayName:o,analyticsName:n.defaultMessage,searchName:n.defaultMessage,closeParentMenu:!1,validators:[ve().sc7,ve().p2L,_e,ve().AU6(ve().oy3)],action:()=>{},render:(a,n,r)=>(0,l.jsx)(de,{...a,context:n,parent:r,alreadyConnectedIntegrationIds:e,alreadyConnectedBotIds:t,originButtonLabel:o,connectedActionsToShow:i})}}(n,a,o);return"loading"===o.status?{loadingAction:[Re()],connectedActions:[],searchSubMenu:i}:{loadingAction:[],connectedActions:[],searchSubMenu:i}}const tt=(0,o().YK)({copyPublicApiObject:{id:"action.copyPublicApiObject",defaultMessage:"Copy API object (Dev)"}}),at=(0,a(416726).Ls)({key:"copy public API object",displayName:tt.copyPublicApiObject,analyticsName:tt.copyPublicApiObject.defaultMessage,validators:[ve().vXb,ve().SQN("public_api_dev_mode")],closeParentMenu:!1,svg:a(536583).d,action:async e=>{let{environment:t,blocks:n}=e;const o=await a(449506).callApi({eventName:"getPublicApiObject",environment:t,data:{id:n[0].id}});let i;i="success"===o.type?JSON.stringify(o.data,void 0,2):JSON.stringify(o.error,void 0,2);const r=await a(884107).R.clipboardActions.load();r.copyString({environment:t,stringValue:i,copiedMessage:r.clipboardMessages.copiedApiObjectToClipboard})}});function nt(e){const{loadingAction:t,connectedActions:a,searchSubMenu:n}=et(e);return{key:"topbar connections",render:e=>(0,l.jsx)(X().A,{...e,style:{marginTop:1},topBorder:!0}),actions:[...t,...[Ee(),Oe()],...a,n,at]}}},613850:(e,t,a)=>{a.d(t,{G:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M4.665 17.22a.625.625 0 0 0 .805.365 7.96 7.96 0 0 0 4.528-4.353 7.94 7.94 0 0 0 4.532 4.353.625.625 0 0 0 .44-1.17 6.69 6.69 0 0 1-4.345-6.268V4.509l2.683 2.683a.625.625 0 0 0 .884-.884l-3.75-3.75a.625.625 0 0 0-.884 0l-3.75 3.75a.625.625 0 1 0 .884.884l2.683-2.683v5.625a6.71 6.71 0 0 1-4.345 6.281.625.625 0 0 0-.365.805"})},o=(0,a(340498).wt)("arrowMergeUp",n)},655923:(e,t,a)=>{a.d(t,{v:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10.625 3a.625.625 0 1 0-1.25 0v12.491l-4.333-4.333a.625.625 0 1 0-.884.884l5.4 5.4a.62.62 0 0 0 .884 0l5.4-5.4a.625.625 0 0 0-.884-.884l-4.333 4.333z"})},o=(0,a(340498).wt)("arrowStraightDown",n)},727722:(e,t,a)=>{a.r(t),a.d(t,{createNewCollectionAndMergeCSV:()=>x,mergeWithCSV:()=>P});var n=()=>a(700500),o=()=>a(857639),i=()=>a(416504),r=()=>a(388821),s=()=>a(179034),c=()=>a(869558),l=()=>a(161479),d=()=>a(919709),u=()=>a(609316),m=()=>a(559926),g=()=>a(686526),p=()=>a(171718),f=()=>a(901389),v=()=>a(357625),b=()=>a(496414),y=()=>a(246826),M=()=>a(751156),k=()=>a(892632),S=()=>a(989423),A=()=>a(389658),h=()=>a(682146),C=()=>a(972435),w=()=>a(129522),N=()=>a(351360),L=()=>a(508496);const I=(0,a(959013).YK)({importingCSV:{id:"databaseViewActions.importingCSV.loadingMessage",defaultMessage:"Importing"},uploadingCSV:{id:"databaseViewActions.uploadingCSV.loadingMessage",defaultMessage:"Uploading"},importFailed:{id:"databaseViewActions.importFailedError.message",defaultMessage:"Import failed."}});async function x(e){var t,o;const{environment:i,collectionContextStore:l,collectionSettingsStore:u,baseViewType:m,input:f,from:v,collectionViewBlockStore:b}=e,k=l.collectionViewStore();if(!k||!b||!m)return;if(g().os({collectionSettingsStore:u}),"chart"===m)return;const S=(0,A().qP)({isInline:b.getType()===n().xd.collectionView,viewType:m,chartType:k.getChartPlaceholderType()}),C=b.getSpaceId()??k.getSpaceId()??(null===(t=N().default.state.currentSpaceStore)||void 0===t?void 0:t.id)??(null===(o=N().default.state.mainEditorCurrentBlockStore)||void 0===o?void 0:o.getSpaceId()),w=C?i.idCreator.getSpaceIdCreatorSync(C):void 0,L=r().RecordMapPolymorphic.create();if(L.set({id:"block",table:s().ev},b.pointer),L.set({id:"view",table:c().Gy},k.pointer),M().createAndCommit({userAction:"useNewButtonMenuItem.handleNewButtonForViewType",environment:i,canUndo:!0,perform:e=>{p().j({environment:i,sourceBlockId:"root",targetBlockPointer:b.pointer,sourceBlockSubtree:(0,r().partialRecordMapToRecordMap)(S),targetRecordCache:b.inMemoryRecordCache,transaction:e,recordPointerMap:L,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0,spaceIdCreator:w})}}),!k||!b)return;const I=(0,d().x9d)(f),x=k,T=b,{addCollectionViewSourceToNewCollection:j}=await a.e(12071).then(a.bind(a,711996));M().createAndCommit({userAction:"CollectionSettingsCreateViewSourceNew.handleCreateDB",environment:i,canUndo:!0,perform:e=>{y().zv({store:x,data:{name:m?h().to[m]:void 0,query2:void 0,type:m??"table"},transaction:e}),j({environment:i,collectionViewStore:x,collectionViewBlockStore:T,name:I,transaction:e,targetCollectionRecordPointerMap:void 0});const t=T.getCollectionViewSourceCollectionStore();l.setContext({type:"collectionView",collectionViewBlockStore:T,collectionStore:t,collectionViewStore:x,pageVisitSourceOverride:void 0})}}),P({environment:i,store:T,from:v})}function P(e){const{store:t,environment:a,from:n}=e;let r;const s={},c=performance.now();k().Bz({environment:a,accept:".csv",bucket:"temporary",onStart:e=>{r=e,b().m({message:I.uploadingCSV})},onCompleteWithToken:e=>{m().eH(a,{from:n,import_source:"csv"}),s.uploadTimeTaken=performance.now()-c,s.firstTimeNavigateToCollection=s.uploadTimeTaken,(async(e,n,o)=>{b().m({message:I.importingCSV});const r=t.getCollectionStore();if(!r)return;if(!w().K.findCollectionViewBlockFromStore(t))return;const s=(0,i().P)(),c=v().UT(a,u().V,{importType:"MergeIntoCollection",fileURL:e,fileName:n,collection:{id:r.id,spaceId:(0,l().e)(r.pointer.spaceId)},spaceId:(0,l().e)(r.pointer.spaceId),userTimeZone:s,signedToken:o}),d=L().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"});let m=!1;for await(const t of c){if(t.error)throw f().f1(C().A.formatMessage(I.importFailed)),b().V(),t.error;!m&&d&&"status"in t.value&&"updated_collection"===t.value.status.message&&(m=!0,b().V())}b().V()})(e[0].fileUrl,r[0].name,e[0].signedToken),s.overallTimeTaken=performance.now()-c;for(const[t,n]of Object.entries(s))(0,S().u4)({environment:a,event:{eventName:"import_file_finished",eventProperties:{importUploadType:"csv",importType:"MergeIntoCollection",importLatency:n,importSource:"file",importLatencyType:t,importFileCount:1}}});o().log({level:"info",from:"mergeWithCSV",type:"mergeWithCSVFinished",data:{miscDataToConvertToString:{data:{uploadType:"csv",importType:"MergeIntoCollection",importLatencies:s,importSource:"file",fileNames:[r[0].name]}}}})},onError:e=>{b().V(),f().f1(C().A.formatMessage(I.importFailed))}})}},813743:(e,t,a)=>{a.d(t,{O8:()=>_,Yf:()=>j,fS:()=>U});var n=()=>a(221844),o=()=>a(496506),i=()=>a(700500),r=()=>a(792071),s=()=>a(861017),c=()=>a(179034),l=()=>a(197959),d=()=>a(161479),u=()=>a(919709),m=()=>a(534177),g=()=>a(246826),p=()=>a(778417),f=()=>a(725614),v=()=>a(780054),b=()=>a(97270),y=()=>a(299545),M=()=>a(906537),k=()=>a(110955),S=()=>a(487494),A=()=>a(176106),h=()=>a(525112),C=()=>a(375447),w=()=>a(630116),N=()=>a(292167),L=()=>a(437219),I=()=>a(722101),x=()=>a(666144),P=()=>a(319975),T=()=>a(751156);function j(e){const{environment:t,textStore:a,blockStore:i,url:r,oldTextValue:u,urlSelection:m}=e;if(k().A.state.open||b().A.state.open||C().A.state.open||A().A.state.open)return!1;const g=M().get();if(!g)return!1;const p=M().getRect(g);if(!p)return!1;const f=(0,s().parseRoute)({url:r,baseUrl:v().A.domainBaseUrl,publicDomainName:v().A.publicDomainName,isMobile:t.device.isMobile,protocol:v().A.protocol,currentUrl:window.location.href});if("page"===f.name&&Boolean(f.discussionId)&&f.discussionId){const e=f.discussionId,s=f.blockId;if(!s)return!1;const g=i.getParentBlockStore();if(!g)return!1;const v=(0,w().Oo)(g,{table:c().ev,id:s,spaceId:(0,d().e)(g.pointer.spaceId)}),b=(0,w().Oo)(v,{table:l().$Y,id:e,spaceId:(0,d().e)(i.pointer.spaceId)});if("none"===b.getRole())return!1;const M=new(o().default)((()=>y().wc(b)[0]),{debugName:"firstCommentStore"}),k=new(n().A)({name:"internalUnfurlingMenuActions.activate",isTemporaryData:!0});t.defaultRecordCache.inMemoryRecordCache.addCacheOverride(k);const A=i.clone(k),C=a.clone(k),N=g.clone(k);return h().A.setState({args:{commentStore:M},stores:{blockStore:i,textStore:a,parentStore:g},temporaryStores:{blockStore:A,textStore:C,parentStore:N},temporaryRecordCache:k,focusedIndex:S().A.Preview,selectionRect:p,oldTextValue:u,open:!0,url:r,urlSelection:m}),L().wQ(t,{url:r}),!0}return!1}function U(e){const{actionType:t,environment:a,commentStore:n,useTempStores:o}=e,i=h().A.state;if(!i.open)return;const{oldTextValue:s}=i,c=o?i.temporaryStores:i.stores,{textStore:l,blockStore:g,parentStore:v}=c,b=a.currentUser.id;if(b){if(o){i.temporaryRecordCache.clearCache();for(const e in i.temporaryStores){const t=i.temporaryStores[e],n={userId:b,pointer:t.pointer},o=a.defaultRecordCache.inMemoryRecordCache.getRecord(n);o?x().PC({environment:a,inMemoryRecordCache:i.temporaryRecordCache,pointer:t.pointer,model:r().Bj6.fromValue(t.pointer.table,o.value),role:o.role,updatePaths:[[]],userId:b,force:!0,debugSource:"setUnfurlType"}):x().oX({environment:a,inMemoryRecordCache:i.temporaryRecordCache,persistedRecordCache:void 0,pointer:t.pointer,userId:b})}}else a.defaultRecordCache.inMemoryRecordCache.removeCacheOverride(i.temporaryRecordCache);switch(t){case S().A.Link:p().hc({environment:a,store:i.stores.blockStore}),f().setSelection({store:i.stores.textStore,selection:{startIndex:i.urlSelection.endIndex,endIndex:i.urlSelection.endIndex}}),h().A.setState({...i,focusedIndex:S().A.Link});break;case S().A.Mention:if(!n)return;const e=(0,d().e)(l.pointer.spaceId);if(!e)return;const o=n.id;T().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.mention",canUndo:!0,perform:t=>{P().R9({environment:a,store:l,value:s,transaction:t}),P().Gf({environment:a,editorMode:"default",store:l,selection:{startIndex:i.urlSelection.startIndex,endIndex:i.urlSelection.startIndex},annotation:u().hiQ(o,e),transaction:t,analyticsFrom:"block"})}}),h().A.setState({...i,focusedIndex:S().A.Mention});break;case S().A.Preview:if(!n)return;T().createAndCommit({environment:a,userAction:"internalUnfurlingMenuActions.preview",canUndo:!0,perform:e=>{P().R9({environment:a,store:l,value:s,transaction:e});const t=y().eK(n);if(!t)return;if(!y().No(t)||!v||!t.getParentId())return;const o=N().s({environment:a,parentBlockStore:v,targetStore:n,transaction:e});if(I().WH({parentStore:v.getContentStore(),insertStore:o,afterStore:g,transaction:e}),0===u().q4_(i.oldTextValue).trim().length){const t=w().Bv.createChildStore(v.getContentStore(),i.stores.blockStore.pointer);I().TF({parentStore:v.getContentStore(),childToRemoveStore:t,transaction:e})}}}),h().A.setState({...i,focusedIndex:S().A.Preview});break;default:throw(0,m().HB)(t)}o||h().A.setState({open:!1})}}function _(e){var t,a;const{blockStore:n,transaction:o}=e,r=n.getType(),s=n.getFormat(),c=n.getSpaceId();if(!n.isDefined()||r!==i().xd.alias||null==s||null===(t=s.alias_pointer)||void 0===t||!t.id)return;const l=[u().wmz(u().hiQ(null==s||null===(a=s.alias_pointer)||void 0===a?void 0:a.id,c))];g().zv({store:n,data:{type:i().xd.text},transaction:o}),g().zv({store:n.getFormatStore(),data:{alias_pointer:null},transaction:o}),P().R9({environment:n.environment,store:n.getBlockTitleStore(),value:l,transaction:o})}},877788:(e,t,a)=>{a.d(t,{w:()=>o});a(296540);const n={viewBox:"0 0 20 20",svg:(0,a(474848).jsx)("path",{d:"M10 2.399c.27 0 .51.174.594.432l1.507 4.636h4.874a.625.625 0 0 1 .367 1.13L13.4 11.462l1.506 4.636a.625.625 0 0 1-.962.699L10 13.932l-3.943 2.865a.625.625 0 0 1-.962-.699L6.6 11.462 2.658 8.597a.625.625 0 0 1 .367-1.13h4.874L9.406 2.83A.625.625 0 0 1 10 2.399m0 2.647L8.948 8.285a.625.625 0 0 1-.595.432H4.95l2.754 2c.22.16.31.442.227.7l-1.052 3.238 2.755-2.001a.625.625 0 0 1 .734 0l2.755 2-1.052-3.237a.625.625 0 0 1 .227-.7l2.754-2h-3.405a.625.625 0 0 1-.594-.432z"})},o=(0,a(340498).wt)("star",n)}}]);