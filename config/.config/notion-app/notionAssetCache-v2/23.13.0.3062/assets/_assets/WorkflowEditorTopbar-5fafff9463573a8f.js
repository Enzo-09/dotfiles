"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[11097,90871,92143],{11356:(e,t,o)=>{o.d(t,{G:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M7.3 1.995a.55.55 0 1 0 0 1.1h5.4a.55.55 0 0 0 0-1.1zm-2.35 2.8a.55.55 0 0 1 .55-.55h9a.55.55 0 0 1 0 1.1h-9a.55.55 0 0 1-.55-.55m-1.987 3.75c0-1.174.951-2.125 2.125-2.125h9.825c1.174 0 2.125.951 2.125 2.125v6.45a2.125 2.125 0 0 1-2.125 2.125H5.088a2.125 2.125 0 0 1-2.125-2.125zm2.125-.875a.875.875 0 0 0-.875.875v6.45c0 .483.392.875.875.875h9.825a.875.875 0 0 0 .875-.875v-6.45a.875.875 0 0 0-.875-.875z"})},n=(0,o(340498).wt)("stack",r)},33218:(e,t,o)=>{o.d(t,{UQ:()=>m,gL:()=>f});o(16280),o(898992),o(672577),o(803949);var r=()=>o(651124),n=()=>o(792071),i=()=>o(688728),a=()=>o(369186),s=()=>o(475140),l=()=>o(235692),c=()=>o(778781),d=()=>o(696706),p=()=>o(896628),u=()=>o(751156);function m(e){let{environment:t,transaction:o,layoutStore:r,position:l,updatedModule:c,sessionId:d}=e;const p=i().Zm[l.area],m=r.getRawModules();if("form_conditional_modules"===p){const e=null==m?void 0:m[p];if(!(null==e?void 0:e[l.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,area:p,module:(0,a().Lv)(c)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const y=(0,s().LC)(m,(e=>e.id===l.moduleId));if(!y||y.area!==p)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,module:(0,a().Lv)(c),..."views_main_tab_modules"===y.area?{area:y.area,viewId:y.viewId}:{area:y.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function y(e){var t,o,r;let{collectionStore:n,layoutStore:i}=e;const a=new Map,s=n.getFormat(),l=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],d=new Map;null===(r=s.property_visibility)||void 0===r||r.forEach((e=>{d.set(e.property,e)})),l.forEach((e=>{if(!(0,c()._Q)(e))return(0,c().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void d.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),d.set(e,{property:e,visibility:"show"})}))}));const p=n.getNormalizedPropertyGroups();var u;p?p.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=s.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(d.values())}}function f(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:s,propertyVisibility:m}=y({collectionStore:i,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),y=a.firstModuleOfType("viewsMain");y&&(0,c().y6)(y)&&t.find((e=>d().L3.isEqual(e,y.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,y.collection_view_block_pointer.id)});const f=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,g=f&&t.find((e=>d().L3.isEqual(e,f)));g&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,g.id)}),u().applyOperation({transaction:e,store:a,operation:n().N4X.setModulesByAreas(a.pointer,(0,l().K5)())}),u().applyOperation({transaction:e,store:a,operation:n().N4X.deleteFormat(a.pointer)});const v=i.getFormat(),{page_section_visibility:h}=v;p().zA({stores:[i],update:{property_groups:void 0,collection_page_properties:s,property_visibility:m,...h?{page_section_visibility:r().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},n=(0,o(340498).wt)("pencilLine",r)},155185:(e,t,o)=>{o.d(t,{I:()=>a,_:()=>i});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}},200562:(e,t,o)=>{o.d(t,{z:()=>i});var r=()=>o(645873);const n=new(r().O2)("topbarSidebarButton",(async()=>await o.e(62033).then(o.bind(o,81292)))),i=(0,r()._h)(n,(e=>e.TopbarSidebarButton))},224011:(e,t,o)=>{o.d(t,{A:()=>i});var r=()=>o(705540);class n extends(()=>o(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await r().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},r().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const i=new n},235692:(e,t,o)=>{o.d(t,{K5:()=>u,Vp:()=>d,_u:()=>c,oP:()=>m,wC:()=>l,xN:()=>p});o(898992),o(354520),o(581454);var r=()=>o(183558),n=()=>o(155185),i=()=>o(778781),a=()=>o(369186);const s={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},l={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},d={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"recent_activity",type:"recentActivity"}],person_profile_page_details:[{id:"collaborators",type:"collaborators"},{id:"teamspaces",type:"teamspaces"}]};function p(e){return(0,a().jr)({modulesByArea:s,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function u(){return{page_layout_schema:(0,a().ke)(s.page_main).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(s.page_details).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0}}function m(e,t){const o=void 0===t?[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0,form_layout_schema:[{id:(0,r().Ay)(),type:"cover"},{id:(0,r().Ay)(),type:"formTitle"},...o,{id:(0,r().Ay)(),type:"formSubmit"}]}}},281401:(e,t,o)=>{o.d(t,{Cy:()=>w,JK:()=>b,K6:()=>_,PD:()=>M,c8:()=>x,i_:()=>h,lE:()=>k,lY:()=>S,mz:()=>C});var r=()=>o(819121),n=()=>o(427704),i=()=>o(798880),a=()=>o(452939),s=()=>o(705540),l=()=>o(729283),c=()=>o(780054),d=()=>o(753199),p=()=>o(731320),u=()=>o(299545),m=()=>o(351360),y=()=>o(948914),f=()=>o(508496),g=()=>o(630116),v=()=>o(172079);function h(e){const{store:t,environment:o}=e,r=m().default.state.currentSpaceStore,n=!t||(0,u()._C)(t),{id:a}=o.currentUser,s=a&&r?g().LU.createChildStore(r,{table:i().oo,id:a}):void 0,l=!s||s.isReady();return n&&l}function _(e,t){return!c().A.isAdminMode&&(0,p().qb)(t,e)}function b(){return f().default.checkGate({gateName:"sites_deprecate_edit_and_comment_top_bar"})}n().JZ.signup,n().JZ.product;async function w(e){const{environment:t,route:o,openInNewTab:r}=e;a().LT(t,{variant:"made_with_notion"}),await l().VE(t,{utmContent:"topbar_cta",nextRoute:o,openInNewTab:r})}async function S(e){const{environment:t,route:o,formId:r,spaceId:n,openInNewTab:i}=e;a().LT(t,{variant:"made_with_notion"}),await l()._q(t,{utmContent:"topbar_cta",nextRoute:o,formId:r,spaceId:n,openInNewTab:i})}function C(e){e.target!==e.currentTarget||y().A.state.isShowingTabBar||(0,d().SQ)({event:e,context:d().y$.EditorDoubleClick,callback:s().toggleMaximized})}function k(e){const t=e.target;t instanceof HTMLElement&&(0,r().p)(t)&&v().A.setState(!0)}function x(){v().A.setState(!1)}function M(e){let{device:t,shouldShowAddTo:o,isMobileTopbarRedesignEnabled:r}=e;return!o&&(!(!t.isMobileNative||t.isMobileBrowser||t.isTablet)&&r)}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(757695))().default{getInitialState(){return{}}}const n=new r;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},324577:(e,t,o)=>{o.d(t,{Y:()=>n});var r=()=>o(847249);function n(e){return(0,r().K8)((()=>null==e?void 0:e.getWorkflowStore()),[e])}},363186:(e,t,o)=>{o.d(t,{$O:()=>c,HH:()=>d,J5:()=>l,X9:()=>p,_o:()=>s});o(16280),o(944114),o(898992),o(823215);var r=o(296540),n=()=>o(847249),i=()=>o(847),a=o(474848);const s=(0,r.createContext)(null);s.displayName="WorkflowEditorContext";const l=(0,r.createContext)(!1);function c(){const e=(0,r.useContext)(s);(0,r.useContext)(l);if(!e)throw new Error("useWorkflowEditorContext must be used inside WorkflowEditorContextProvider");return e}function d(){return(0,r.useContext)(s)??void 0}l.displayName="DisallowWorkflowEditorContext";const p=r.memo((function(e){let{children:t,store:l}=e;const c=(0,o(484714).v3)(),d=o(166442).Kd,p=(0,o(324577).Y)(l),[u,m]=(0,r.useState)(!1),y=(0,n().K8)((()=>(0,o(46986).sx)()),[]);p||u||!y||(m(!0),o(751156).createAndCommit({userAction:"WorkflowActions.createWorkflowForCollectionViewBlock",environment:c,canUndo:!0,perform:e=>{i().createWorkflowForCollectionViewBlock({environment:c,transaction:e,store:l}),e.postSubmitCallbacks.push((e=>{e||m(!1)}))}}));const f=(0,o(890754).useCurrentThreadStore)(),g=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot save trigger without a workflow store");i().saveTrigger({workflowStore:p,trigger:e,environment:c,threadStore:f})}),[c,f,p]),v=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot save trigger without a workflow store");i().saveTriggers({workflowStore:p,triggers:e,environment:c,threadStore:f})}),[c,f,p]),h=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot save module without a workflow store");i().saveModule({workflowStore:p,module:e,environment:c,threadStore:f})}),[c,f,p]),_=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot remove module without a workflow store");i().removeModule({environment:c,module:e,threadStore:f,workflowStore:p})}),[c,f,p]),b=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot add module without a workflow store");i().addModule({workflowStore:p,module:e,environment:c,threadStore:f})}),[c,f,p]),w=(0,r.useCallback)((e=>{if(!p)throw new Error("Cannot save config variable without a workflow store");i().saveConfigVariable({workflowStore:p,value:e,environment:c,threadStore:f})}),[c,f,p]),S=(0,r.useCallback)((e=>{const{functionStore:t,fn:o}=e;if(!p)throw new Error("Cannot save function without a workflow store");i().saveFunction({functionStore:t,fn:o,environment:c,threadStore:f,workflowStore:p})}),[c,f,p]),C=(0,r.useCallback)((e=>{const{functionStore:t,test:o}=e;if(!p)throw new Error("Cannot save test without a workflow store");i().saveTest({functionStore:t,environment:c,test:o,threadStore:f,workflowStore:p})}),[c,f,p]),k=(0,r.useMemo)((()=>({store:l,workflowStore:p,threadStore:f,clientStore:d,removeModule:_,saveTrigger:g,saveTriggers:v,saveModule:h,addModule:b,saveConfigVariable:w,saveFunction:S,saveTest:C,config:o(780054).A})),[d,_,g,v,h,b,w,S,C,l,f,p]),x=(0,n().K8)((()=>[l,...(null==l?void 0:l.getCollectionStores())??[],...(null==l?void 0:l.getCollectionViewStores())??[]].every((e=>e.isReady()))),[l]);return x?(0,a.jsx)(s.Provider,{value:k,children:t}):null}))},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>P,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>C,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>S,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>x,areRecurrenceSchedulesEqual:()=>W,convertFromUnpersistedRecurrenceConfig:()=>O,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>E,getFormattedNextRecurrenceTime:()=>I,getNewEndTimestamp:()=>B,getNextDateUtc:()=>A,getRecurrenceAfter:()=>M,isRunningBetweenMidnightAnd3AM:()=>T,isValidRecurrenceInterval:()=>_,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>k});o(898992),o(354520),o(581454);var r=()=>o(244641);o(944114);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...n(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),s=()=>o(720665),l=()=>o(597777),c=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const y=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},v=99,h=999;function _(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function w(e){const{start_date:t,frequency:o,interval:r,weekdays:i,timezone:s,hour:c,minute:d}=e,p="week"===o&&i?i.map((e=>g[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,l().eU)(t),interval:r,byweekday:p,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const S=1,C=1;function k(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>S,a=o.length>=C;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:n}}function x(e){var t;const{recurrence:o,afterDate:n}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=n)return o;let i=r().c9.fromMillis(o.start_date,{zone:"utc"});const a=r().c9.fromMillis(n,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,l().DH)(i.toMillis())}}function M(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,l().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(x({recurrence:t,afterDate:o})).after((0,l().eU)(o));if(!e)return;return(0,l().h1)(e)}}function T(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return w(e).after((0,l().eU)((0,l().Rz)()))||void 0}function I(e){const{recurrence:t,intl:o}=e,n=A(O(t));if(!n)return;const i=T(t),a=r().c9.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(y.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(y.dateAtTime,{date:s,time:e})}}function E(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(y.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(y.noEndCondition)}const P=100;function R(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function B(e,t,o){return e.plus(o-t)}function D(e,t){const o=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(o.toJSDate())}}function O(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function W(e,t){const o=i().fN(e,(e=>void 0!==e)),r=i().fN(t,(e=>void 0!==e));return i().n4(o,r)}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,questionMarkCircleIcon:()=>i});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(340498).wt)("questionMarkCircle",n)},422540:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>C,Ge:()=>m,I3:()=>p,Kj:()=>w,PP:()=>k,TK:()=>x,Yy:()=>d,aE:()=>M,cQ:()=>S,kH:()=>y,m7:()=>u,nq:()=>_,nv:()=>v,tj:()=>f});o(898992),o(354520),o(737550);var r=()=>o(496603),n=()=>o(534177),i=()=>o(970013),a=()=>o(651124),s=()=>o(349835),l=()=>o(390066);(0,n().u0)((e=>(0,n().O9)(e)&&(0,n().O9)(e.target)&&(0,n().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function u(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c,sourcePropertyIds:d}=e,u=(d??(0,n().uv)(o)).filter(((t,r,n)=>{const a=o[t];return!(!a||!p(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!s||s([t,a],r,o)))}));if(0===u.length)return[];if(!t||!1===c)return u;const m=(0,l().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:s}=e,c=(0,n().uv)(o).filter(((e,t,r)=>{const n=o[e];return!(!n||!(0,i().JY)(n))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(c,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:s,sort:c}=e,d=(0,n().uv)(o).filter(((e,t,r)=>{var n;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().$M)(a)||null===(n=(0,i().om)(a))||void 0===n||!n.auto_update_on_edit)&&(!s||s([e,a],t,o)))}));if(0===d.length)return[];if(!t||!1===c)return d;const p=(0,l().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(d,(e=>p.findIndex((t=>t.property===e))))}const h={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function _(e){return h[e.type]}const b={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function w(e){return b[e.type]}function S(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function k(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function x(e){const{collectionSchema:t,property:o,type:r}=e,n=null==t?void 0:t[o];return!n||("action"===r?!p(n):!f[n.type])}function M(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const s="some"===r.type&&r.some,l="all"===r.type&&r.all;if((s||l||[]).some((e=>k({collectionSchema:o,property:e.property})||x({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const c="some"===r.type&&(!(0,n().O9)(r.some)||0===r.some.length),d="all"===r.type&&(!(0,n().O9)(r.all)||0===r.all.length);if(!e&&("none"===r.type||c||d)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},447934:(e,t,o)=>{o.d(t,{$L:()=>M,Fv:()=>D,HD:()=>O,V_:()=>P,bV:()=>R,jP:()=>E,nh:()=>I,w8:()=>B});o(16280),o(18107),o(967357),o(898992),o(354520);var r=()=>o(206267),n=()=>o(792071),i=()=>o(688728),a=()=>o(475140),s=()=>o(235692),l=()=>o(924329),c=()=>o(778781),d=()=>o(144081),p=()=>o(334261),u=()=>o(661920),m=()=>o(435009),y=()=>o(751156),f=()=>o(799832),g=()=>o(492414),v=()=>o(594794),h=()=>o(869562),_=()=>o(351360),b=()=>o(712505),w=()=>o(630116),S=()=>o(263711),C=()=>o(640868),k=()=>o(204521),x=()=>o(33218);function M(e){let{environment:t,transaction:o,collectionStore:r,userId:i,modules:a}=e;const l=(0,v().zP)({environment:t,spaceId:r.getSpaceId(),table:d().zx}),c=w().sk.createChildStore(r,l),{model:p,operations:[u]}=n().wfN.create({pointer:l,parent:r.pointer,createdByUserId:i,modules:a??(0,s().K5)()});y().applyOperation({transaction:o,store:c,operation:u});const m=n().BnK.setLayout(r.pointer,l);return y().applyOperation({transaction:o,store:r,operation:m}),{model:p,store:c}}function T(e){let t;return e?t=e:b().default.state.open&&b().default.state.targetStore?t=b().default.state.targetStore:_().default.state.mainEditorCurrentBlockStore&&(t=_().default.state.mainEditorCurrentBlockStore),t}function A(e){h().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function I(e){var t,o;let{environment:n,blockStore:i,collectionStore:a,collectionViewStore:s,from:l,initialSelectedModuleType:c}=e;const d=function(e){var t;let o=T(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,f().U)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),p=window.location.href;A(n);const u=r().JW();S().g.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:d,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==d||null===(t=d.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(c??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:p}),(0,k().Ko)({environment:n,from:l,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==s?void 0:s.id})}function E(e){let{environment:t,store:o,siteRootBlockStore:n,from:i}=e;const a=T(o);A(t);const s=r().JW();S().g.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:n,sessionId:s}),(0,k().Ko)({environment:t,context:"site",from:i,sessionId:s,collectionId:void 0,existingLayoutId:void 0})}function P(e){let{slideBlockStore:t}=e;const o=t.getNavigableBlockStore(),n=r().JW();S().g.setState({isOpen:!0,mode:"presentation",pageStore:o,currentSlideStore:t,sessionId:n}),window.document.documentElement.requestFullscreen()}function R(e){let{environment:t,pageStore:o,slideBlockStore:r}=e;S().g.setState({isOpen:!1});const n=(0,g().Ay)({store:o,scrollToBlockId:r.id,pageVisitSource:void 0});m().oo({environment:t,url:n}),window.document.fullscreenElement&&window.document.exitFullscreen()}function B(e){S().g.getState().isOpen&&D(e)}function D(e){let{environment:t}=e;const o=S().g.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().aX(t),S().g.setState({isOpen:!1})}function O(e){var t;let{environment:o,transaction:r,property:n,layoutStore:s}=e;const d=S().g.getSessionId(),u=null===(t=s.getModel())||void 0===t?void 0:t.getRawModules(),m=s.getCollectionModel();if(!u||!m)return;const y=w().md.createChildStore(s,m.pointer),f=(0,a().yn)(u,(e=>"titleWithIcon"===e.type));if(f&&(0,c().Mj)(f.module)){var g;const{module:e,position:t}=f,a={...e,type:"titleWithIcon",propertyIds:null===(g=e.propertyIds)||void 0===g?void 0:g.filter((e=>e!==n))};(0,x().UQ)({environment:o,sessionId:d,transaction:r,layoutStore:s,position:{area:(0,i().Fw)(t.area),moduleId:e.id},updatedModule:(0,l().X)(a)})}const v=(0,a().LP)(u,(e=>"property"===e.type&&e.propertyId===n));for(const{module:a,position:l}of v){const e=a.id,t=(0,i().Fw)(l.area);(0,C().U)({environment:o,sessionId:d,transaction:r,layoutStore:s,position:{area:t,moduleId:e}})}const h=m.getFormat().collection_page_sections;if(h){const e=h.filter((e=>e.section!==n));p().LK({store:y,pageSectionFormats:e,transaction:r,environment:o})}}},465364:(e,t,o)=>{o.d(t,{$N:()=>I,D5:()=>E,GB:()=>M,M9:()=>k,Pt:()=>A,eW:()=>T,jo:()=>P,v7:()=>x});o(944114),o(898992),o(803949),o(581454);var r=()=>o(244641),n=()=>o(787626),i=()=>o(713998),a=()=>o(597777),s=()=>o(604995),l=()=>o(416504),c=()=>o(519831),d=()=>o(496603),p=()=>o(534177),u=()=>o(299709),m=()=>o(317001),y=()=>o(520861),f=()=>o(878060),g=()=>o(44729),v=()=>o(246826),h=()=>o(319975),_=()=>o(519839),b=()=>o(695625),w=()=>o(397248),S=()=>o(630116),C=()=>o(747671);function k(e){const{environment:t,droppedStores:o,duplicate:i,calendarBy:d,transaction:p,collectionContextStore:f,duplicateActions:v}=e,h=r().c9.fromMillis(e.startOfDay);let b=!0;for(const r of o){const t=e.collectionStore?e.collectionStore:(0,_().Dj)({store:r,collectionContextStore:f});if(r.getParentTable()===c().Vl||!t){b=!1;break}g().X$({childStore:r,parentStore:t,transaction:p})||(b=!1)}const w=(0,y().T)({environment:t,droppedStores:o,duplicate:i,transaction:p,collectionStore:e.collectionStore,duplicateActions:v});for(const r of w){const o=e.collectionStore?e.collectionStore:(0,_().Dj)({store:r,collectionContextStore:f});if(!o)continue;const i=o.getMappedProperty(d),c=r.getPropertyStore(i),y=(0,n().b)(c.getValue())||s().Ec((0,l().P)()),g=s().kW(y,(0,l().P)()),v=h.toFormat(s().tr);let w;if("date"===g.type||"datetime"===g.type)w={...g,start_date:v};else{const e=s().AA(g,(0,l().P)());if(!e.end)return;const t={...g,start_date:v},o=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),r=e.end.plus(o).toFormat(s().tr);w={...g,start_date:v,end_date:r}}const S=s().kW(w,a().$K(y)||(0,l().P)());(0,m().j)({environment:t,store:r,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:b}),E({environment:t,type:"dateValue",propertyId:i,store:r,transaction:p,dateValue:S}),(0,u().E)({environment:t,collectionContextStore:f,block_id:r.id,property:i,property_type:"date",from:"calendar"})}}function x(e){const{calendarStore:t,direction:o,targetStore:r}=e;t.setState({...t.state,isDragging:!0,targetStore:r,direction:o,temporaryValue:void 0})}function M(e){const{calendarStore:t,x:o,y:i,calendarBy:c}=e,p=t.state;if(p.isDragging){const e=(0,n().b)(p.targetStore.getPropertyStore(c).getValue());if(!e)return;const u=s().kW(e,(0,l().P)()),m=p.temporaryValue||e,y=s().kW(m,(0,l().P)()),f=[];p.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const g=f.find((e=>{let{store:t}=e;const r=b().T.getRectFromStore(t);return Boolean(r&&w().ux(r,o,i))}));let v;if(g){const e=r().c9.fromMillis(g.timestamp),t=e.endOf("day"),o=e.toFormat(s().tr);if(u){const n=s().AA(u,(0,l().P)());if(p.direction===C().Q.Left)if(r().IX.fromDateTimes(e,t).contains(n.start))v=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=s().AA(e,(0,l().P)());v=!n.end&&t.start>n.start||n.end&&t.start>n.end?y:e}else if(n.end?r().IX.fromDateTimes(e,t).contains(n.end):r().IX.fromDateTimes(e,t).contains(n.start))v=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?y:e}}}if(v&&!d().n4(y,v)){const e=s().kW(v,a().$K(m)||(0,l().P)());t.setState({...p,temporaryValue:e})}}}function T(e){const{environment:t,calendarStore:o,calendarBy:r,transaction:n}=e,i=o.state;i.isDragging&&i.temporaryValue&&(E({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:r,store:i.targetStore,transaction:n}),o.setState({...o.state,isDragging:!1}))}function A(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function I(e){const{environment:t,store:o,collectionStore:n,collectionContextStore:a,startDayOfWeek:c,transaction:d}=e,p=a.dateRangeStartStore.state,u=(0,l().P)(),y=a.normalizedQueryStore.state;if(!y||!y.calendar_by)return;const f=(null==n?void 0:n.getMappedProperty(y.calendar_by))??y.calendar_by,g=s().hp(p,c,u),h=g.startOf("month"),_=g.endOf("month"),b=r().c9.now().startOf("day");let w;return w=r().IX.fromDateTimes(h,_).contains(b)?s().p6(b.valueOf(),u):s().p6(s().iB(p,c,u).valueOf(),u),v().zv({store:o.getPropertiesStore(),data:{[f]:i().m5(w)},transaction:d}),(0,m().j)({environment:t,store:o,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function E(e){const{environment:t,store:o,propertyId:r,transaction:n}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,p().HB)(e);const c=o.getPropertyValue(r),d=i().m5(a);v().zv({store:o.getPropertiesStore(),data:{[r]:d},transaction:n}),f().O({environment:t,store:o,dateProperty:{id:r,oldValue:c,newValue:d}})}function P(e){const{environment:t,collectionStore:o,calendarBy:r,store:n,insertStores:i,collectionContextStore:a,transaction:s}=e,l=n.getPropertyStore(r).getValue();for(const c of i)(0,m().j)({environment:t,store:c,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),h().R9({environment:t,store:c.getPropertyStore(r),value:l,transaction:s});return i.map((e=>S().Bv.createChildStore(o,e.pointer)))}},484654:(e,t,o)=>{o.r(t),o.d(t,{WorkflowEditorTabs:()=>P,WorkflowEditorTopbar:()=>I});o(898992),o(354520),o(581454);var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(205127),l=()=>o(590027),c=()=>o(145214),d=()=>o(84817),p=()=>o(704152),u=()=>o(554509),m=()=>o(13679),y=()=>o(682944),f=()=>o(976582),g=()=>o(281401),v=()=>o(126126),h=()=>o(573792),_=()=>o(863059),b=()=>o(200562),w=()=>o(963589),S=()=>o(644914),C=()=>o(351360),k=()=>o(691093),x=()=>o(564037),M=()=>o(671446),T=()=>o(363186),A=o(474848);function I(e){const{store:t,shouldRenderTemplateGalleryTopbar:o,showSidebarButton:r,handleClickTopbar:a,handleMouseDown:s}=e,d=(0,n().v3)(),p=(0,i().K8)((()=>(0,S().Uh)(d)),[d]),u=(0,_().Kh)({shouldRenderTemplateGalleryTopbar:o}),v=(0,i().K8)((()=>l().M.state.isFullWidthMode),[]),h=(0,f().m)({location:"WorkflowEditor"});return t?(0,A.jsx)(m().A,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>(0,A.jsxs)(c().A,{animate:{opacity:v?0:1},role:"menubar",tabIndex:0,style:{...u,width:p},onClick:a,onMouseDown:s,onDoubleClick:g().mz,children:[r&&(0,A.jsx)(b().z,{}),(0,A.jsx)(y()._,{topbarFeatureController:h}),(0,A.jsx)(T().X9,{store:t,children:(0,A.jsx)(E,{})})]})}):null}function E(){const{store:e}=(0,T().$O)(),t=(0,x().useWorkflowNavigationState)(),{pageVisitStore:o,presenceStore:r}=(0,i().O$)(C().default);return t?(0,A.jsxs)(d().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,A.jsx)(d().Y1,{direction:"horizontal",align:"center-left",children:(0,A.jsx)(u().D,{styleName:"UIRegular-14px/Regular",children:(0,A.jsx)(s().oK,{store:e,style:(0,h().lx)(),maxAncestorCount:2,ancestorMaxWidth:160,currentPageMaxWidth:240,showCurrentPageControls:!0,isMobile:!1})})}),(0,A.jsx)(d().Y1,{direction:"horizontal",align:"center-right",gap:6,children:(0,A.jsx)(v().Ay,{rootStore:e,pageVisitStore:o,presenceStore:r})})]}):null}function P(e){const{navigationState:t}=e,o=(0,n().v3)(),s=(0,a().IS)((e=>({container:{backgroundColor:e.accentColors.translucentGray[100]},tab:{padding:"0 24px",borderRadius:8,height:"100%",gap:6,display:"flex",alignItems:"center",justifyContent:"center"},selectedTab:{background:e.buttonBackground}})),[]),{store:l,workflowStore:c,threadStore:m}=(0,T().$O)(),y=(0,M().J)(),f=(0,i().K8)((()=>void 0!==(null==y?void 0:y.databaseViews)&&y.databaseViews.length>0||l.getCollectionViewStores().length>0),[y,l]),g=void 0!==(null==y?void 0:y.functionPointers)&&y.functionPointers.length>0,v=(0,w().X)("workflows_debug_tools"),h=(0,r.useMemo)((()=>{const e={isOpen:!0};return[{label:"Preview",navigationState:{...e,type:"preview"},isVisible:f??!1,isSelected:e=>"preview"===e.type},{label:"Settings",navigationState:{...e,type:"configure"},isVisible:!0,isSelected:e=>"preview"!==e.type&&"runs"!==e.type&&"debug"!==e.type},{label:"Activity",navigationState:{...e,type:"runs"},isVisible:g,isSelected:e=>"runs"===e.type},{label:"Debug",navigationState:{...e,type:"debug"},isVisible:v,isSelected:e=>"debug"===e.type}].filter((e=>e.isVisible))}),[f,g,v]),_=(0,r.useCallback)((e=>{(0,k().showWorkflowEditor)({environment:o,parentStore:l,navigationState:e.navigationState})}),[o,l]),b=(0,i().K8)((()=>!(c&&!c.isReady())&&(!(m&&!m.isReady())&&!!l.isReady())),[c,m,l]);return(0,r.useEffect)((()=>{b&&!f&&t.isOpen&&"preview"===t.type&&(0,k().showWorkflowEditor)({environment:o,parentStore:l,navigationState:{isOpen:!0,type:"configure"}})}),[f,t,o,b,l]),h.length<2?null:t.isOpen?(0,A.jsx)(d().Y1,{direction:"horizontal",width:"hug",align:"top-center",height:32,borderRadius:10,padding:2,style:s.container,children:h.map((e=>{const o=e.isSelected(t);return(0,A.jsx)(d().Y1,{direction:"horizontal",width:"hug",height:"fill",align:"center",gap:6,children:(0,A.jsx)(p().A,{style:{...s.tab,...o?s.selectedTab:{}},onClick:()=>_(e),"aria-selected":o,children:(0,A.jsx)(u().D,{styleName:"UIMedium-13px/Medium",colorName:o?"primary":"secondary",children:e.label})})},e.label)}))}):null}},520861:(e,t,o)=>{o.d(t,{T:()=>n});o(944114),o(898992),o(908872);var r=()=>o(415651);function n(e){const{environment:t,collectionStore:o,duplicate:n,droppedStores:i,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:c}=i.reduce(((e,t)=>(n||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...r().MS({environment:t,droppedStores:c,duplicate:n,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},526278:(e,t,o)=>{o.d(t,{w:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},n=(0,o(340498).wt)("arrowStraightLeft",r)},546461:(e,t,o)=>{o.d(t,{EC:()=>S,To:()=>w,YC:()=>C,or:()=>b,u:()=>_});o(16280);var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(496506),s=()=>o(322867),l=()=>o(959013),c=()=>o(534177),d=()=>o(813297),p=()=>o(862292),u=()=>o(698331),m=()=>o(645873),y=()=>o(190019),f=()=>o(76190),g=o(474848);const v=new WeakMap,h=(0,r.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});h.displayName="AutomationContext";function _(e){const{automationStore:t,children:o,contextType:r}=e,_=(0,n().v3)(),b=(0,l().tz)(),{value:w}=(0,m().fJ)(p().T.formulas),{value:S}=(0,m().fJ)(d().QV.automationTypecheck),C=(0,f().n)(t),k=(0,i().K8)((()=>{if(!w)return{error:new(s().N9)("Missing formulas dependency")};if(!S)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:r,contextType:n,formulasModule:i,intl:s,isSubscribed:l}=e,d=v.get(o);if(d)return d;{const e=new(a().default)((()=>{const e=o.getTriggerType();let a=n;return(0,c().O9)(e)&&(0,u().x2)(e)&&(a=(0,u().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:r,contextType:a,formulasModule:i,intl:s,isSubscribed:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:_,automationStore:t,automationTypecheckModule:S,contextType:r,formulasModule:w,intl:b,isSubscribed:C});return e.state}),[_,t,S,r,w,b,C]);return(0,g.jsx)(h.Provider,{value:{automationStore:t,typecheckResult:k,contextType:r,defined:!0},children:o})}function b(e){const{automationStore:t,children:o}=e,r=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(_,{automationStore:t,contextType:(0,u().H8)(r??"event"),children:o})}function w(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function S(){const e=r.useContext(h);if(!1===e.defined)throw new Error("No automation context found!");return e}function C(){return r.useContext(h)}},573792:(e,t,o)=>{o.d(t,{DW:()=>a,R1:()=>s,aD:()=>l,lx:()=>i,qB:()=>c});var r=()=>o(418135),n=()=>o(175947);function i(){return{height:"100%",flexGrow:0,marginRight:8,fontSize:14,minWidth:0}}function a(e){let{environment:t,isShowingTabBar:o,shouldShowSidebar:i,isSidebarExpanded:a,isSecondarySidebarVisible:s,isBrowserFullScreen:l,shouldRenderTemplateGalleryTopbar:c,allowOverflow:d,zoom:p}=e;const{device:u}=t,m=u.isElectronMac&&(!i||!a&&!s)&&!l&&!o,y=u.isElectronWindows&&!o,f=y&&(!i||!a&&!s);let g=n().ek(u.isElectronMac);return c&&(g=n().Hi),{display:"flex",justifyContent:"space-between",alignItems:"center",overflow:d?"visible":"hidden",height:g,paddingLeft:m?(0,r().JT)(p):f?46:u.isMobile?4:12,paddingRight:y?(0,r().WS)(p)+4:u.isMobile?4:10}}function s(e){return{flex:"none",width:1,height:16,marginLeft:8,marginRight:8,background:e.darkDividerColor}}function l(e){return{iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginRight:14,color:e.icon.secondary,width:26},iconContainerSecondary:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginRight:14},iconStyle:{height:26,width:26,fill:e.icon.primary}}}function c(e){return{iconContainer:{background:e.surface.page,color:e.icon.primary,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:12,borderRadius:16,width:32,height:32},iconContainerSecondary:{background:e.surface.page,color:e.icon.secondary,display:"inline-flex",justifyContent:"center",alignItems:"center",marginRight:12,borderRadius:16,width:32,height:32},iconStyle:{height:20,width:20,fill:e.icon.primary}}}},603815:(e,t,o)=>{o.d(t,{A$:()=>x,JQ:()=>M,Vn:()=>C,s4:()=>k});o(16280),o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(803949),o(581454);var r=()=>o(857639),n=()=>o(585515),i=()=>o(577449),a=()=>o(388821),s=()=>o(179034),l=()=>o(545285),c=()=>o(534177),d=()=>o(449506),p=()=>o(780054),u=()=>o(989423),m=()=>o(870618),y=()=>o(303626),f=()=>o(14307),g=()=>o(245865),v=()=>o(540758),h=()=>o(670631),_=()=>o(508496),b=()=>o(571963),w=()=>o(603815),S=()=>o(108944);async function C(e){const{environment:t,request:o,abortSignal:r,prefetchCacheKey:n,headers:i}=e;return(0,b().updateLoadCachedPageChunkCalledAt)(),f().isConnected()||f().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:o,abortSignal:r,prefetchCacheKey:n,headers:i}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:o,abortSignal:r,prefetchCacheKey:n,headers:i})}async function k(e){const{mode:t,environment:o,request:c,isFirstChunk:d,abortSignal:f}=e,g={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:p().A.domainBaseUrl,publicDomainName:p().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await w().A$(o,{id:c.page.id,table:s().ev}),null!=f&&f.aborted))throw new Error("Abort signal received");const _=a().RecordMapWithRole.create(),b=[];let S=!1;const C=new Set,k=await n().T(g,i().h.fromMonomorphicFunctionUnsafe((async e=>{const r=await m().h7({environment:o,pointer:e,abortSignal:f,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=f&&f.aborted)throw new Error("Abort signal received");if(r)return _.setModelAndRole(e,r.model,r.role),r.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!C.has(e.id)&&d){if(void 0===h().A.state.offlinePages)return b.push(e),void(S=!0);if(void 0===h().A.state.offlinePages||!v().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);b.push(e)}})),((e,t,o,r)=>{y().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${o})`),null!=r&&r.suppressErrorOnClient&&C.add(t.id)}));if(S&&(await h().A.waitUntil((()=>void 0!==h().A.state.offlinePages)),!v().Bd(c.page.id))){const[e]=b;throw new Error(`Record not found: ${e.table},${e.id}`)}if(b.length>0&&(0,u().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,u().u4)({environment:o,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&r().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:b}})})),null!=f&&f.aborted)throw new Error("Abort signal received");return{recordMap:_.toJson(),cursor:k.cursorValue}}async function x(e,t){const o=e.currentUser.id;if(!o||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:o})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),g().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function M(e){if(!_().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let o=0;const r=()=>o>=50,n=e=>{"space"!==(null==e?void 0:e.table)&&(r()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),o++))};if(e.isReady())for(const a of(0,S().E)(e))n(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);n(t.getModel({table:"notion_user",id:e.userId}));let o=0;for(const e of t.getPointersByTable("notion_user")){if(r()||o>=10)break;o++,n(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:o}=e;if(void 0!==o)return{pointer:t,version:o}})).filter(c().O9);return i.length?i:void 0}},617668:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,plusIcon:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},n=(0,o(340498).wt)("plus",r)},640868:(e,t,o)=>{o.d(t,{U:()=>u});o(16280);var r=()=>o(31503),n=()=>o(454984),i=()=>o(688728),a=()=>o(475140),s=()=>o(789280),l=()=>o(778781),c=()=>o(751156),d=()=>o(204521),p=()=>o(658616);function u(e){let{environment:t,transaction:o,layoutStore:u,position:m,sessionId:y,beforePerformDeleteModule:f}=e;const g=u.getModules();if(!g)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const v=(0,a().EX)(g,(e=>e.id===m.moduleId)),h=(0,r().Cg)({moduleId:null==v?void 0:v.module.id,modulesByArea:u.getModules()}).length;if(!v)return;const{module:_,position:b}=v;if(!(0,s().Fe)(_))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var w;(c().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:r,moduleToDelete:a,beforePerformDeleteModule:s}=e;s&&s(t);(0,l().V6)(a)&&(0,p().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===r.area){const e=n().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const r of e)c().applyOperation({transaction:t,store:o,operation:r})}else{const e="views_main_tab_modules"===r.area?{area:r.area,viewId:r.viewId}:{area:i().Zm[r.area]};c().applyOperation({transaction:t,store:o,operation:n().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:u,moduleLocation:b,moduleToDelete:_,beforePerformDeleteModule:f})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),y)&&d().PS({environment:t,module:_,sessionId:y,collectionId:null===(w=u.getCollectionModel())||void 0===w?void 0:w.id,layoutId:u.id,context:(0,i().We)(m.area),area:m.area,depth:h})}},658616:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var r=()=>o(220719),n=()=>o(44729),i=()=>o(630116);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,s=(0,r().o9)(i().Bv.createChildStore(t,o.collection_view_block_pointer));n().zz({childStore:s,parentStore:t,transaction:a})}},671446:(e,t,o)=>{o.d(t,{J:()=>l});var r=()=>o(484714),n=()=>o(847249),i=()=>o(346923),a=()=>o(363186),s=()=>o(94522);function l(){const{workflowStore:e,clientStore:t,threadStore:o,store:l}=(0,a().$O)(),c=(0,r().v3)(),d=(0,n().K8)((()=>(0,s().n2)({workflowStore:e,clientStore:t,environment:c,threadStore:o,store:l})),[e,t,c,o,l]);return(0,i().l)(d)}},682944:(e,t,o)=>{o.d(t,{_:()=>W});var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(526278),l=()=>o(940563),c=()=>o(617668),d=()=>o(340498),p=()=>o(959013),u=()=>o(899963),m=()=>o(705540),y=()=>o(435009),f=()=>o(109488),g=()=>o(836251),v=()=>o(962730),h=()=>o(377586),_=()=>o(948914),b=()=>o(982254),w=()=>o(712505),S=()=>o(11356),C=()=>o(285790),k=()=>o(859428),x=()=>o(730591),M=o(474848);const T=(0,p().YK)({tabSpacesButton:{id:"desktopTopbarBrowserHistoryButton.tabSpacesButton.label",defaultMessage:"Tab Spaces"}});function A(){var e;const t=(0,p().tz)(),{tabSpacesState:o}=(0,i().O$)(x().A),{activeTabSectionId:r,tabSpaces:n}=o,a=null===(e=n[r])||void 0===e?void 0:e.icon,s=()=>{m().tabSpacesState.toggleTabSpacesMenuOpen()};return(0,M.jsx)(k().A,{renderTooltip:()=>(0,M.jsx)("div",{style:{display:"flex"},children:t.formatMessage(T.tabSpacesButton)}),placement:v().W.Bottom,alignment:v().C.Center,originGap:6,render:e=>(0,M.jsx)(C().A,{ariaLabel:t.formatMessage(T.tabSpacesButton),icon:e=>a?(0,M.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px"},children:a}):(0,S().G)({...e,width:d().Ev.lg,height:d().Ev.lg}),isDarkIconColor:!0,style:{position:"relative",width:24,height:24},onClick:s,...e})})}var I=()=>o(35392),E=()=>o(897119);const P=(0,p().YK)({newTabButton:{id:"desktopTopbarBrowserHistoryButton.newTabButton.label",defaultMessage:"New tab"},goBackButton:{id:"desktopTopbarBrowserHistoryButtons.goBackButton.label",defaultMessage:"Go back"},goForwardButton:{id:"desktopTopbarBrowserHistoryButton.goForwardButton.label",defaultMessage:"Go forward"}});function R(){const e=(0,p().tz)(),t=(0,i().K8)((()=>_().A.state.isTabPositionSupported),[]);return(0,M.jsx)(k().A,{renderTooltip:()=>(0,M.jsxs)("div",{style:{display:"flex"},children:[e.formatMessage(P.newTabButton),(0,M.jsx)(I().A,{name:"newTab",style:{opacity:.5,marginLeft:4}})]}),placement:v().W.Bottom,alignment:v().C.Center,originGap:6,render:o=>(0,M.jsx)(C().A,{ariaLabel:e.formatMessage(P.newTabButton),icon:e=>(0,c().plusIcon)({...e,width:d().Ev.lg,height:d().Ev.lg}),isDarkIconColor:!0,className:"notion-new-tab-button",style:{position:"relative"},onClick:()=>m().newTab(t),...o})})}function B(e){let{isNavigationHistorySupported:t}=e;const o=(0,p().tz)(),i=(0,n().v3)(),a=(0,r.useCallback)((e=>(0,s().w)({...e,width:d().Ev.lg,height:d().Ev.lg})),[]),l=!(0,g().MX)("back");return(0,M.jsx)(k().A,{renderTooltip:()=>(0,M.jsxs)("div",{style:{display:"flex"},children:[o.formatMessage(P.goBackButton),(0,M.jsx)(I().A,{name:"goBack",style:{opacity:.5,marginLeft:4}})]}),placement:v().W.Bottom,alignment:v().C.Center,originGap:6,render:e=>(0,M.jsx)(C().A,{ariaLabel:o.formatMessage(P.goBackButton),icon:a,isDarkIconColor:!0,className:"notion-history-back-button",disabled:l,style:{position:"relative",width:24,height:24},onClick:e=>function(e,t,o){var r;u().Lt(t,{type:"back"});const n=e.metaKey||e.ctrlKey,i=null===(r=_().A.state.preferences)||void 0===r?void 0:r.isPinnedTabNewTabEnabled,a=b().A.state.currentTab.isPinned;o&&n?m().handleBackMetaClick():i&&a?m().handleBackPinnedClick():y().aX(t)}(e,i,t),onContextMenu:e=>{!l&&t&&m().handleTabHistoryMenu("back",e.clientX,e.clientY)},...e})})}function D(e){let{isNavigationHistorySupported:t}=e;const o=(0,p().tz)(),i=(0,n().v3)(),a=(0,r.useCallback)((e=>(0,l().arrowStraightRightIcon)({...e,width:d().Ev.lg,height:d().Ev.lg})),[]),s=!(0,g().MX)("forward");return(0,M.jsx)(k().A,{renderTooltip:()=>(0,M.jsxs)("div",{style:{display:"flex"},children:[o.formatMessage(P.goForwardButton),(0,M.jsx)(I().A,{name:"goForward",style:{opacity:.5,marginLeft:4}})]}),placement:v().W.Bottom,alignment:v().C.Center,originGap:6,render:e=>(0,M.jsx)(C().A,{ariaLabel:o.formatMessage(P.goForwardButton),icon:a,isDarkIconColor:!0,className:"notion-history-forward-button",disabled:s,style:{position:"relative",width:24,height:24},onClick:e=>function(e,t,o){var r;u().Lt(t,{type:"forward"});const n=e.metaKey||e.ctrlKey,i=null===(r=_().A.state.preferences)||void 0===r?void 0:r.isPinnedTabNewTabEnabled,a=b().A.state.currentTab.isPinned;o&&n?m().handleForwardMetaClick():i&&a?m().handleForwardPinnedClick():y().sY()}(e,i,t),onContextMenu:e=>{!s&&t&&m().handleTabHistoryMenu("forward",e.clientX,e.clientY)},...e})})}function O(e){const{topbarFeatureController:t}=e,o=(0,i().K8)((()=>{var e;return(null===(e=_().A.state.preferences)||void 0===e?void 0:e.isNavigationHistoryEnabled)&&_().A.state.isNavigationHistorySupported}),[]),r=(0,i().K8)((()=>{var e;return null===(e=_().A.state.preferences)||void 0===e?void 0:e.isTabSpacesEnabled}),[]),n=(0,a().IS)((e=>({container:{position:"relative",display:"flex",flexShrink:0,gap:4}})),[]);return(0,M.jsx)(f().A,{capture:!0,render:e=>(0,M.jsxs)("div",{style:n.container,...e,children:[r&&(0,M.jsx)(A,{}),(0,M.jsx)(B,{isNavigationHistorySupported:o}),(0,M.jsx)(D,{isNavigationHistorySupported:o}),t.showNewTabButton?(0,M.jsx)(R,{}):null]})})}function W(e){const{topbarFeatureController:t}=e,{isElectron:o}=(0,n().Y0)(),{isShowingTabBar:r}=(0,i().O$)(_().A),a=(0,i().K8)((()=>w().default.isCenterPeekOpen()),[]);return!o||r?null:(0,M.jsx)(E().Ay,{trapFocus:!1,style:{background:"transparent",borderRadius:0,boxShadow:"none"},origin:(0,M.jsx)(O,{topbarFeatureController:t}),render:()=>(0,M.jsx)(O,{topbarFeatureController:t}),placementToOrigin:v().W.Center,alignmentToOrigin:v().C.Center,open:a,disableMouseCapture:!0,preventCaptureEsc:!0,preventScaleTransition:!0,preventOpacityTransition:!0,popupType:h().n.Popup})}},698331:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>n});var r=()=>o(534177);function n(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,r().O9)(t)&&n(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,r().HB)(e)}},725649:(e,t,o)=>{function r(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>n,K$:()=>r,j6:()=>i})},730591:(e,t,o)=>{o.d(t,{A:()=>i});const r=[];class n extends(()=>o(757695))().default{getInitialState(){return{open:!1,tabSpacesState:{tabSpaces:{},orderedTabSpaceIds:r,ungroupedTabCount:0,activeTabSectionId:"ungrouped"}}}}const i=new n},747671:(e,t,o)=>{o.d(t,{Q:()=>r,a:()=>n});let r=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class n extends(()=>o(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},789280:(e,t,o)=>{o.d(t,{Fe:()=>i,wm:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}},863059:(e,t,o)=>{o.d(t,{Hh:()=>x,Kh:()=>w,L1:()=>_,Nq:()=>b,U:()=>S,gQ:()=>M,nh:()=>k,u7:()=>C});var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(418135),l=()=>o(340498),c=()=>o(175947),d=()=>o(186445),p=()=>o(696746),u=()=>o(900652),m=()=>o(441199),y=()=>o(644914),f=()=>o(224011),g=()=>o(948914),v=()=>o(150193);const h=10,_=700;function b(){const{isMobile:e,isElectronWindows:t}=(0,n().Y0)(),{isShowingTabBar:o,zoomFactor:a}=(0,i().K8)((()=>({isShowingTabBar:Boolean(g().A.state.isShowingTabBar),zoomFactor:g().A.state.zoomFactor||s().rx})),[]),l=t&&!o;return(0,r.useMemo)((()=>l?(0,s().WS)(a)+4:e?4:h),[e,l,a])}function w(e){let{shouldRenderTemplateGalleryTopbar:t}=e;const o=(0,n().v3)(),{isShowingTabBar:a,zoomFactor:l}=(0,i().O$)(g().A),p=(0,i().K8)((()=>d().X4(o).shouldShowSidebar),[o]),u=(0,i().K8)((()=>(0,y().KB)(o)),[o]),v=(0,i().K8)((()=>m().default.isPanelPinnedState()),[]),h=(0,i().K8)((()=>f().A.state.isFullScreen),[]),{device:_}=o,b=l||s().rx,w=_.isElectronMac&&(!p||!u&&!v)&&!h&&!a,S=_.isElectronWindows&&!a,C=S&&(!p||!u&&!v);let k=c().ek(_.isElectronMac);t&&(k=c().Hi);return(0,r.useMemo)((()=>({display:"flex",justifyContent:"space-between",alignItems:"center",overflow:"hidden",height:k,paddingLeft:w?(0,s().JT)(b):C?46:_.isMobile?4:12,paddingRight:S?(0,s().WS)(b)+4:_.isMobile?4:10})),[k,w,b,C,_.isMobile,S])}function S(e){let{store:t,shouldRenderTemplateGalleryTopbar:o,isBrowserFullScreen:r}=e;const l=(0,n().v3)(),m=(0,n().Y0)(),f=(0,n().WS)(),h=(0,i().K8)((()=>(0,p().lU)(t)&&0===v().A.state.banners.length),[t]);let b=c().ek(m.isElectronMac);o&&(b=2*c().Hi);const w=(0,i().K8)((()=>u().Z8()),[]),S=(0,i().O$)(d().$o),{zoomFactor:C}=(0,i().O$)(g().A),k=(0,y().Sj)(l),x=c().pz(m.isElectronMac,r,C||s().rx);return(0,a().IS)((e=>({header:{background:h&&!f?"transparent":e.contentBackground,maxWidth:"100vw",zIndex:100,WebkitUserSelect:"none",userSelect:"none"},container:{width:`calc(100% - ${w}px)`,maxWidth:"100vw",height:b,opacity:S?0:1,transition:`\n\t\t\t\t\t\topacity ${_}ms,\n\t\t\t\t\t\tcolor ${_}ms\n\t\t\t\t\t`,position:"relative",left:w},electronTopbarSidebarMousePeekArea:{position:"absolute",top:0,width:`${x}px`,height:`${k}px`}})),[h,f,w,S,b,x,k])}const C=34,k=28;function x(e){return{iconButton:{width:C,height:k,marginRight:2},icon:{height:l().Ev.lg,width:l().Ev.lg,fill:e.icon.primary},tabletIcon:{height:l().lD.lg,width:l().lD.lg,fill:e.icon.primary}}}function M(){return(0,a().IS)(x,[])}},888325:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},940563:(e,t,o)=>{o.r(t),o.d(t,{arrowStraightRightIcon:()=>n,iconDefinition:()=>r});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m17.442 9.558-5.4-5.4a.625.625 0 0 0-.884.884l4.333 4.333H3a.625.625 0 1 0 0 1.25h12.491l-4.333 4.333a.625.625 0 1 0 .884.884l5.4-5.4a.62.62 0 0 0 0-.884"})},n=(0,o(340498).wt)("arrowStraightRight",r)},976582:(e,t,o)=>{o.d(t,{m:()=>i});var r=()=>o(847249);class n{constructor(e){this.topbarRenderLocation=void 0;const{topbarRenderLocation:t}=e;this.topbarRenderLocation=t}get showNewTabButton(){return{AIChat:!0,DefaultTopbar:!0,Marketplace:!0,PersonProfile:!0,PersonalHome:!0,PersonalHomeScrolled:!0,PublicPage:!0,PublicSharing:!0,TeamHome:!0,TrustedDomainPage:!0,WorkflowEditor:!0,AssistantMenuHeader:!1}[this.topbarRenderLocation]}get topbarActionsDisplayStyle(){return{PersonalHome:"transparent",PersonalHomeScrolled:"bordered",AIChat:"solid",AssistantMenuHeader:"solid",DefaultTopbar:"solid",Marketplace:"solid",PersonProfile:"solid",PublicPage:"solid",PublicSharing:"solid",TeamHome:"solid",TrustedDomainPage:"solid",WorkflowEditor:"solid"}[this.topbarRenderLocation]}}function i(e){const{location:t}=e;return(0,r().K8)((()=>new n({topbarRenderLocation:t})),[t])}}}]);