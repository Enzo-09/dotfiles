"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[73502],{181804:(t,e,i)=>{i.r(e),i.d(e,{StudentAiOfferPopup:()=>C});var n=()=>i(244641),o=i(296540),s=()=>i(484714),a=()=>i(847249),r=()=>i(543906),u=()=>i(964996),l=()=>i(909306),p=()=>i(959013),d=()=>i(252105),f=()=>i(812182),c=()=>i(751156),_=()=>i(755199),g=()=>i(47170),m=()=>i(94476),S=()=>i(351360),v=()=>i(508496),A=()=>i(911964),b=()=>i(749356),h=()=>i(324561),x=()=>i(527059),y=()=>i(450930),D=i(474848);function C(){const t=(0,s().v3)(),e=(0,p().tz)(),{isMobile:i}=(0,s().Y0)(),C=(0,x().UL)("sidebar"),M=(0,g().O)(),I=(0,h()._3)({spaceId:M}),O=(0,a().K8)((()=>(0,l().ze)({billingData:I,experimentService:v().default,spaceId:M})),[I,M]),{inAppCalloutStore:w,currentUserSettingsStore:U}=(0,a().K8)((()=>({inAppCalloutStore:S().default.state.inAppCalloutStore,currentUserSettingsStore:S().default.state.currentUserSettingsStore})),[]),P=null==I?void 0:I.subscription,T=!(null==P||!P.startDate)&&n().c9.now()>P.startDate.plus({days:1}),j=(0,a().K8)((()=>w.getCalloutVisibility("student_ai_offer_popup").canShow&&C&&O&&T),[w,C,O,T]),k=(0,a().K8)((()=>{var t;return null==U||null===(t=U.getSettings())||void 0===t?void 0:t.dismissed_student_ai_popup}),[U]),K=(0,o.useMemo)((()=>{if(void 0!==I)return function(t){const{intl:e,environment:i,billingData:n,onDismiss:o}=t;return{presentationType:"persistent",id:"student_ai_offer_toast",title:e.formatMessage({id:"studentAiOfferPopup.title",defaultMessage:"Students get half off unlimited AI"}),icon:u().e,jsxMessage:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(p().sA,{id:"studentAiOfferPopup.description",defaultMessage:"Unlock unlimited use of AI for Q&A, Autofill, Writer, and more"}),(0,D.jsx)(y().B,{tooltipMessage:(0,D.jsx)(p().sA,{id:"studentAiOfferPopup.tooltip",defaultMessage:"You can access this offer again by visiting our plans page in settings"}),tooltipWidth:"216px",overlayContainerZIndex:m().TOASTER_ZINDEX+1})]}),actions:{primary:{title:e.formatMessage({id:"studentAiOfferPopup.buttonLabel",defaultMessage:"Redeem now"}),onAction:()=>{(0,A().F)({environment:i,spaceStore:S().default.state.currentSpaceStore,billingData:n,product:"ai",from:"student_ai_popup",pageSection:"grid",coupon:"ai_fifty_percent"}),f().UW("student_ai_offer_toast")}}},onDismiss:o}}({intl:e,environment:t,billingData:I,onDismiss:()=>{d().yF(t),w.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!1}),U&&c().createAndCommit({userAction:"StudentAiOfferPopup.handleDismiss",environment:t,canUndo:!0,perform:t=>{_().mJ({transaction:t,userSettingsStore:U,data:{dismissed_student_ai_popup:!0}})}})}})}),[U,t,I,w,e]),F=Boolean(!k&&j&&!i&&void 0!==K);return(0,r().A)((async()=>{void 0!==K&&(d().hq(t,{from:"student_ai_offer_popup"}),w.updateCalloutStatus({calloutId:"student_ai_offer_popup",visible:!0}),f().HK(K),await(0,b().x3)({environment:t,hasReceived:!1,offerType:"add_on_upgrade_flow",coupon:"ai_fifty_percent"}))}),F),null}}}]);