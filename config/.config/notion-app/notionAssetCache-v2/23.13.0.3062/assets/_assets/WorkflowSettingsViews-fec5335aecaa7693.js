"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[24708,92579],{3486:(e,t,o)=>{o.d(t,{d:()=>i});var r=()=>o(278238);const n={light:{gray:{stroke:{secondary:"rgba(84, 72, 49, 0.15)"},fill:{primary:"rgba(84, 72, 49, 0.15)",secondary:"rgba(84, 72, 49, 0.08)",tertiary:"rgba(84, 72, 49, 0.04)"},text:{primary:"#1D1B16"}},red:{stroke:{secondary:"rgba(244, 171, 159, 0.40)"},fill:{primary:"rgba(244, 171, 159, 0.40)",secondary:"rgba(244, 171, 159, 0.40)",tertiary:"rgba(243, 136, 118, 0.07)"},text:{primary:"#5D1715"}},brown:{stroke:{secondary:"rgba(210, 162, 141, 0.35)"},fill:{primary:"rgba(210, 162, 141, 0.35)",secondary:"rgba(210, 162, 141, 0.17)",tertiary:"rgba(210, 162, 141, 0.07)"},text:{primary:"#442A1E"}},orange:{stroke:{secondary:"rgba(224, 124, 57, 0.27)"},fill:{primary:"rgba(224, 124, 57, 0.27)",secondary:"rgba(224, 124, 57, 0.15)",tertiary:"rgba(224, 124, 57, 0.07)"},text:{primary:"#49290E"}},yellow:{stroke:{secondary:"rgba(236, 191, 66, 0.39)"},fill:{primary:"rgba(236, 191, 66, 0.39)",secondary:"rgba(215, 177, 24, 0.15)",tertiary:"rgba(215, 177, 24, 0.07)"},text:{primary:"#402C1B"}},green:{stroke:{secondary:"rgba(123, 183, 129, 0.27)"},fill:{primary:"rgba(123, 183, 129, 0.27)",secondary:"rgba(123, 183, 129, 0.15)",tertiary:"rgba(123, 183, 129, 0.07)"},text:{primary:"#1C3829"}},blue:{stroke:{secondary:"rgba(93, 165, 206, 0.27)"},fill:{primary:"rgba(93, 165, 206, 0.27)",secondary:"rgba(95, 167, 208, 0.15)",tertiary:"rgba(91, 166, 209, 0.07)"},text:{primary:"#183347"}},purple:{stroke:{secondary:"rgba(168, 129, 197, 0.27)"},fill:{primary:"rgba(168, 129, 197, 0.27)",secondary:"rgba(204, 170, 229, 0.15)",tertiary:"rgba(206, 175, 229, 0.07)"},text:{primary:"#412454"}},pink:{stroke:{secondary:"rgba(225, 136, 179, 0.27)"},fill:{primary:"rgba(225, 136, 179, 0.27)",secondary:"rgba(235, 159, 196, 0.15)",tertiary:"rgba(231, 147, 188, 0.07)"},text:{primary:"#4C2337"}}},dark:{gray:{stroke:{secondary:"rgba(255, 255, 255, 0.09)"},fill:{primary:"rgba(255, 255, 255, 0.13)",secondary:"rgba(255, 255, 255, 0.09)",tertiary:"rgba(255, 255, 255, 0.03)"},text:{primary:"rgba(255, 255, 255, 0.81)"}},red:{stroke:{secondary:"rgba(222, 85, 85, 0.25)"},fill:{primary:"rgba(222, 85, 84, 0.30)",secondary:"rgba(222, 85, 84, 0.30)",tertiary:"rgba(222, 85, 88, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},brown:{stroke:{secondary:"rgba(184, 101, 69, 0.25)"},fill:{primary:"rgba(184, 101, 68, 0.30)",secondary:"rgba(184, 101, 68, 0.30)",tertiary:"rgba(184, 101, 72, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},orange:{stroke:{secondary:"rgba(233, 126, 37, 0.20)"},fill:{primary:"rgba(233, 126, 36, 0.30)",secondary:"rgba(233, 126, 36, 0.30)",tertiary:"rgba(233, 126, 40, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},yellow:{stroke:{secondary:"rgba(179, 129, 61, 0.20)"},fill:{primary:"rgba(231, 161, 55, 0.30)",secondary:"rgba(231, 161, 55, 0.30)",tertiary:"rgba(162, 105, 50, 0.10)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},green:{stroke:{secondary:"rgba(45, 153, 100, 0.20)"},fill:{primary:"rgba(45, 153, 100, 0.30)",secondary:"rgba(45, 153, 100, 0.30)",tertiary:"rgba(45, 153, 100, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},blue:{stroke:{secondary:"rgba(51, 126, 169, 0.20)"},fill:{primary:"rgba(51, 126, 169, 0.33)",secondary:"rgba(51, 126, 169, 0.33)",tertiary:"rgba(51, 126, 169, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},purple:{stroke:{secondary:"rgba(155, 97, 211, 0.18)"},fill:{primary:"rgba(155, 97, 211, 0.28)",secondary:"rgba(155, 97, 211, 0.28)",tertiary:"rgba(155, 97, 211, 0.08)"},text:{primary:"rgba(255, 255, 255, 0.87)"}},pink:{stroke:{secondary:"rgba(220, 76, 145, 0.22)"},fill:{primary:"rgba(220, 76, 145, 0.30)",secondary:"rgba(220, 76, 145, 0.30)",tertiary:"rgba(220, 76, 145, 0.06)"},text:{primary:"rgba(255, 255, 255, 0.87)"}}}};function i(e,t){const o=(0,r().VA)(e),i="lightgray"===o?"gray":o;return{...n[t.mode][i],icon:{primary:r().l8[t.mode][i]}}}},31902:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var r=()=>o(959013),n=o(474848);const i=function(e){let{collectionViewName:t,collectionViewType:i}=e;return t?(0,n.jsx)(o(288722).A,{children:t}):"page"===i?(0,n.jsx)(r().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,n.jsx)(r().sA,{...o(403905).X[i]})}},33218:(e,t,o)=>{o.d(t,{UQ:()=>m,gL:()=>f});o(16280),o(898992),o(672577),o(803949);var r=()=>o(651124),n=()=>o(792071),i=()=>o(688728),a=()=>o(369186),l=()=>o(475140),c=()=>o(235692),s=()=>o(778781),d=()=>o(696706),p=()=>o(896628),u=()=>o(751156);function m(e){let{environment:t,transaction:o,layoutStore:r,position:c,updatedModule:s,sessionId:d}=e;const p=i().Zm[c.area],m=r.getRawModules();if("form_conditional_modules"===p){const e=null==m?void 0:m[p];if(!(null==e?void 0:e[c.moduleId]))throw new Error("Unable to find module being updated.");return void u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,area:p,module:(0,a().Lv)(s)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const y=(0,l().LC)(m,(e=>e.id===c.moduleId));if(!y||y.area!==p)throw new Error("Unable to find module being updated.");u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){u().applyOperation({transaction:e,store:r,operation:n().N4X.updateModuleInArea({pointer:r.pointer,module:(0,a().Lv)(s),..."views_main_tab_modules"===y.area?{area:y.area,viewId:y.viewId}:{area:y.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function y(e){var t,o,r;let{collectionStore:n,layoutStore:i}=e;const a=new Map,l=n.getFormat(),c=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(o=i.getModules())||void 0===o?void 0:o.page_details],d=new Map;null===(r=l.property_visibility)||void 0===r||r.forEach((e=>{d.set(e.property,e)})),c.forEach((e=>{if(!(0,s()._Q)(e))return(0,s().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void d.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),d.set(e,{property:e,visibility:"show"})}))}));const p=n.getNormalizedPropertyGroups();var u;p?p.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(u=l.collection_page_properties)||void 0===u||u.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(d.values())}}function f(e){let{environment:t,transaction:o,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:l,propertyVisibility:m}=y({collectionStore:i,layoutStore:a});u().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),o=a.getFormat(),y=a.firstModuleOfType("viewsMain");y&&(0,s().y6)(y)&&t.find((e=>d().L3.isEqual(e,y.collection_view_block_pointer)))&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,y.collection_view_block_pointer.id)});const f=null==o?void 0:o.previousViewsMainCollectionViewBlockPointer,g=f&&t.find((e=>d().L3.isEqual(e,f)));g&&u().applyOperation({transaction:e,store:a,operation:n().N4X.removeBlockChild(a.pointer,g.id)}),u().applyOperation({transaction:e,store:a,operation:n().N4X.setModulesByAreas(a.pointer,(0,c().K5)())}),u().applyOperation({transaction:e,store:a,operation:n().N4X.deleteFormat(a.pointer)});const v=i.getFormat(),{page_section_visibility:_}=v;p().zA({stores:[i],update:{property_groups:void 0,collection_page_properties:l,property_visibility:m,..._?{page_section_visibility:r().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},44750:(e,t,o)=>{o.d(t,{Z:()=>M,p:()=>T});o(16280),o(581454),o(296540);var r=()=>o(484714),n=()=>o(847249),i=()=>o(401497),a=()=>o(663077),l=()=>o(970013),c=()=>o(534177),s=()=>o(686526),d=()=>o(751156),p=()=>o(736982),u=()=>o(403905),m=()=>o(989423),y=()=>o(972435),f=()=>o(317053),g=()=>o(101926),v=()=>o(513349),_=()=>o(922952),h=()=>o(913454),S=()=>o(204067),b=()=>o(272752),w=()=>o(362941),x=()=>o(960127),C=()=>o(342288),k=()=>o(902842),I=o(474848);function M(e){let{environment:t,template:o,isInSuggestedSection:r,collectionContextStore:n}=e;return{key:o.templateId,action:()=>{if(r)T({environment:t,template:o,collectionContextStore:n,suggestedFeatureAnalytics:void 0});else{const{collectionStore:e,collectionViewStore:r,collectionSettingsStore:i}=(0,b().i)(n);(0,v().UD)({template:o,environment:t,collectionStore:e,collectionViewStore:r,collectionSettingsStore:i,collectionContextStore:n})}},render:e=>(0,I.jsx)(A,{buttonMenuItemProps:e,template:o,isInSuggestedSection:r})}}function T(e){let{environment:t,collectionContextStore:o,template:r,suggestedFeatureAnalytics:n}=e;const i=o.collectionStore();if(!i)throw new Error("collectionStore not found");const l=i.getWorkflowTemplateId();n&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_clicked",eventProperties:{origin:n.origin,selected_index:n.selectedIndex,template_ids_shown:n.shownTemplateIds,template_id_clicked:r.templateId,collection_template_id:l}}});const c=o.settingsStore;if((0,x().isWorkflowTemplateWithConfirmStep)(r))s().a2({collectionSettingsStore:c,item:{type:"confirmAddTemplate",template:r}});else if((0,a().Sz)(r)){const{relatedCollectionTemplateId:e}=r;!function(e){var t;let{environment:o,template:r,collectionStore:n,relatedCollectionTemplateId:i}=e;const a=null===(t=n.getParentBlockStore())||void 0===t?void 0:t.getParentStore();if(!a)throw new Error(`parentStore not found for ${n.id}`);if(!(0,_().u)(a))throw new Error(`Incorrect parent store: ${a.table} ${a.id}`);const l=h().globalWorkflowTemplates.fromIdOfType({templateId:i,type:"collection"});(0,f().openSelectedTemplateOnboardingModalForInAppFlows)({environment:o,template:l,origin:"suggested_feature_template",parentStore:a,navigateToOnFinish:"skip",relationInfos:[{type:"source",collectionStore:n,relationPropertyTemplate:r}],aiPrompt:void 0})}({environment:t,template:r,collectionStore:i,relatedCollectionTemplateId:e})}else d().createAndCommit({userAction:"FeatureTemplateMenuItem.addFeatureTemplateToTarget",environment:t,canUndo:!0,perform:e=>{g().ai({environment:t,transaction:e,collectionStore:i,template:r,logger:new(h().WorkflowTemplateLogger),origin:"suggested_feature"}),n&&(0,m().u4)({environment:t,event:{eventName:"suggested_feature_template_added",eventProperties:{origin:n.origin,template_id_added:r.templateId,collection_template_id:l}}});const a=o.collectionViewStore();a&&v().UD({template:r,environment:t,collectionStore:i,collectionViewStore:a,collectionSettingsStore:c,collectionContextStore:o})}})}function A(e){let{buttonMenuItemProps:t,template:o,isInSuggestedSection:a}=e;const s=(0,i().IS)((e=>({iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{fill:e.regularIconColor}})),[]),{collectionStore:d}=(0,b().V)(),m=(0,r().v3)(),f=(0,n().K8)((()=>(0,S().NU)({environment:m,collectionStore:d,templateId:o.templateId})),[m,d,o.templateId]),g=(0,n().K8)((()=>function(e){let{template:t,collectionStore:o}=e;const{type:r}=t;switch(r){case"property":const{value:e}=t;if((0,l().DQ)(e)){const r=function(e){let{templateId:t,propertyTemplateSchema:o,collectionStore:r}=e;const n=(0,S().S1)({collectionStore:r,templateId:t,instancePointerType:"property"});if(!n)return o.options??[];const i=r.getSchema()[n.id];if(!i||!(0,l().DQ)(i))return[];return i.options??[]}({templateId:t.templateId,propertyTemplateSchema:e,collectionStore:o}).map((e=>e.value));return(0,h().getWorkflowTemplateItemsCaption)(r)}return;case"collection_view":return`${y().A.formatMessage(u().X[t.value.type])} view`;case"compound":return;default:(0,c().HB)(r)}}({template:o,collectionStore:d})),[o,d]),v=(0,h().getWorkflowTemplateName)(o);return a?(0,I.jsx)(p().I,{buttonMenuItemProps:t,title:v,icon:(0,I.jsx)(k().n,{template:o}),right:(0,I.jsx)(C().z,{isAdded:f})}):(0,I.jsx)(p().I,{buttonMenuItemProps:t,title:v,caption:g,icon:(0,I.jsx)("div",{style:s.iconContainer,children:(0,I.jsx)(k().z,{template:o,iconStyle:s.icon})}),right:(0,I.jsx)(w()._,{})})}},101209:(e,t,o)=>{o.d(t,{v:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("boltFilled",{svg:(0,r.jsx)("path",{d:"M0 12.117c0 .38.293.664.703.664h5.518l-2.91 7.91c-.381 1.006.664 1.543 1.318.723l8.877-11.094c.166-.205.254-.4.254-.625 0-.371-.293-.664-.703-.664H7.539l2.91-7.91C10.83.115 9.785-.422 9.131.408L.254 11.492c-.166.215-.254.41-.254.625z"}),viewBox:"0 0 14 22"})},105819:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>n});o(296540);const r={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},n=(0,o(340498).wt)("pencilLine",r)},149375:(e,t,o)=>{o.d(t,{v:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("arrowLeftThick",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M1.54004 8.05762C1.54004 8.2627 1.62891 8.46094 1.78613 8.61133L6.29102 13.1162C6.45508 13.2734 6.63965 13.3486 6.82422 13.3486C7.25488 13.3486 7.5625 13.041 7.5625 12.6309C7.5625 12.4189 7.48047 12.2344 7.34375 12.1045L5.8125 10.5527L3.78906 8.70703L5.38867 8.80273H13.7012C14.1455 8.80273 14.46 8.49512 14.46 8.05762C14.46 7.61328 14.1455 7.3125 13.7012 7.3125H5.38867L3.7959 7.4082L5.8125 5.5625L7.34375 4.01074C7.48047 3.87402 7.5625 3.68945 7.5625 3.47754C7.5625 3.06738 7.25488 2.7666 6.82422 2.7666C6.63965 2.7666 6.45508 2.83496 6.27734 3.00586L1.78613 7.50391C1.62891 7.64746 1.54004 7.85254 1.54004 8.05762Z"})})},154017:(e,t,o)=>{o.d(t,{b:()=>a});var r=()=>o(476492),n=()=>o(989423);var i=()=>o(504066);function a(e){const{environment:t,collectionContextStore:o,view_type:a,view_config_uri:l,from:c,...s}=e;!function(e,t){n().vd(e,"create_view",t)}(t,{...(0,r().sl)(o)||{},...s,view_type:a,view_config_uri:l,from:c}),(0,i().f)({collectionContextStore:o,action:"create_view",from:c,property_type:void 0})}},155185:(e,t,o)=>{o.d(t,{I:()=>a,_:()=>i});const r={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},n={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}},175116:(e,t,o)=>{o.d(t,{ET:()=>c,Ks:()=>s,RI:()=>l,p2:()=>a});o(16280);var r=o(296540);const n="collectionContextStore",i=(0,o(446943).C)({displayName:n,legacyContextKey:n,modernContextDefaultValue:void 0}),a=i.context,l=i.Provider;function c(){const e=r.useContext(a);if(void 0===e)throw new Error(`No context provided: ${n}`);return e}function s(){return r.useContext(a)}},200277:(e,t,o)=>{o.d(t,{$:()=>u,N:()=>d});o(944114),o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(898992),o(354520),o(430670),o(581454);var r=()=>o(428045),n=()=>o(663077),i=()=>o(496603),a=()=>o(534177),l=()=>o(299545),c=()=>o(913454),s=()=>o(204067);function d(e,t){const o=(0,s().Xg)(e,t),r=new Set(function(e){const t=e.getParentBlockStore();if(null==t||!t.isDefined())return[];return(null==t?void 0:t.getCollectionViewStores().map((e=>e.getName())).filter(a().O9))??[]}(t));return function(e){const t=new Set(e.map((e=>e.templateId))),o=[];for(const r of e)o.push(...p(r).filter((e=>!t.has(e))).map((e=>c().globalWorkflowTemplates.fromId(e))).filter(n().bz).filter((e=>!(0,n().Sz)(e))));return o}(o).filter((e=>"collection_view"!==e.type||!r.has(e.value.name??"")))}function p(e){return"compound"===e.type||"collection"===e.type?e.value.templateItems.filter((e=>"optionalDefaultOn"===e.optionality||"optionalDefaultOff"===e.optionality)).map((e=>e.pointer)):[]}function u(e){let{persona:t,parentStore:o}=e;const n=t?(0,r().Qf)({persona:t}):[],a=c().globalWorkflowTemplates.allOfType({templateIds:n??[],type:"collection"}),s=i().hS(function(e){let{collectionTemplates:t,parentStore:o}=e;if(!o)return t;if((0,l().Yu)(o))return t;const r=(0,l().$R)(o)?o.getTeamPageStores():o.getContentStores(),n=new Set((0,i().oE)(r.flatMap((e=>{var t;return(null===(t=e.getCollectionStores())||void 0===t?void 0:t.map((e=>e.getWorkflowTemplateId())))??[]})))),a=[],c=[];for(const i of t)n.has(i.templateId)?a.push(i):c.push(i);return[...c,...a]}({collectionTemplates:[...a,...c().globalWorkflowTemplates.allOfType({templateIds:(0,r().dj)(),type:"collection"})],parentStore:o}),(e=>e.templateId));return s}},216304:(e,t,o)=>{o.r(t),o.d(t,{WorkflowSettingsViews:()=>M});o(16280),o(898992),o(354520),o(581454),o(296540);var r=()=>o(484714),n=()=>o(847249),i=()=>o(401497),a=()=>o(689094),l=()=>o(959013),c=()=>o(534177),s=()=>o(154017),d=()=>o(686526),p=()=>o(751156),u=()=>o(735695),m=()=>o(736982),y=()=>o(423938),f=()=>o(745266),g=()=>o(31902),v=()=>o(231314),_=()=>o(939740),h=()=>o(89924),S=()=>o(513349),b=()=>o(200277),w=()=>o(376415),x=()=>o(272752),C=()=>o(362941),k=()=>o(342288),I=o(474848);function M(e){let{collectionSettingsStore:t,collectionContextStore:o}=e;const r=(0,l().tz)(),n=[T(),P(o)].filter(c().Vq);return(0,I.jsx)(u().Ay,{collectionSettingsStore:t,title:r.formatMessage({id:"workflowSettingsViews.title",defaultMessage:"Views"}),children:(0,I.jsx)(_().Ay,{disableInitialScroll:!0,type:_().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:n})})}function T(){const{collectionContextStore:e}=(0,x().V)(),t=(0,n().K8)((()=>{var t;return(null===(t=e.collectionViewBlockStore())||void 0===t?void 0:t.getCollectionViewStores())||[]}),[e]).map((t=>({key:t.id,action:()=>{},render:o=>(0,I.jsx)(A,{buttonMenuItemProps:o,collectionViewStore:t,collectionContextStore:e})})));return{key:"added_views",render:e=>(0,I.jsx)(h().A,{...e,title:`${t.length} views`}),items:t}}function A(e){let{buttonMenuItemProps:t,collectionViewStore:o,collectionContextStore:i}=e;const a=(0,r().v3)(),{viewName:l,viewType:c,viewIcon:s}=(0,n().K8)((()=>({viewName:o.getName(),viewType:o.getType(),viewIcon:o.getFormat().collection_view_icon})),[o]);if(!c)throw new Error("View type not found for ${collectionViewStore.id}");return(0,I.jsx)(m().I,{buttonMenuItemProps:t,title:(0,I.jsx)(g().A,{collectionViewType:c,collectionViewName:l}),icon:(0,I.jsx)(f().h,{color:"regular",viewType:c,viewIcon:s}),right:(0,I.jsx)(C()._,{}),onClick:()=>{(0,S().Sj)({environment:a,collectionContextStore:i,collectionViewId:o.id})}})}function P(e){const t=(0,l().tz)(),o=(0,r().v3)(),c=(0,n().K8)((()=>{const t=e.collectionStore();if(t)return(0,b().N)(o,t).filter((e=>"collection_view"===e.type))}),[e,o]),u=function(){const{collectionContextStore:e}=(0,x().V)(),t=(0,r().v3)(),o=(0,i().IS)((e=>({iconWithBackground:{backgroundColor:e.surface.wash},icon:{width:16,fill:e.regularIconColor}})),[]);return{key:"add_new_view",action:()=>{},render:r=>(0,I.jsx)(m().I,{buttonMenuItemProps:r,title:(0,I.jsx)(l().sA,{id:"workflowTemplates.settings.views.addNewView.title",defaultMessage:"Empty view"}),icon:(0,I.jsx)(v().y,{backgroundColor:o.iconWithBackground.backgroundColor,icon:(0,a().W)(o.icon)}),right:(0,I.jsx)(k().z,{isAdded:!1}),onClick:()=>{const o="table";p().createAndCommit({userAction:"CollectionViewTabBar.createGenericViewType",environment:t,canUndo:!0,perform:r=>{(0,y().Z)({environment:t,collectionContextStore:e,newViewType:o,transaction:r,skipOpenSettings:!0})}}),d().a2({collectionSettingsStore:e.settingsStore,item:{type:"createView"}}),(0,s().b)({environment:t,collectionContextStore:e,view_type:o,from:"addButton"})}})}}();return(0,w().i)({title:t.formatMessage({id:"workflowTemplates.settings.views.suggestedViews.title",defaultMessage:"New view"}),templates:c??[],isSuggestedSection:!0,legacyUnpackagedFeatureTemplates:[],additionalItems:[u]})}},231314:(e,t,o)=>{o.d(t,{y:()=>i});o(296540);var r=()=>o(401497),n=o(474848);function i(e){let{icon:t,backgroundColor:o,backgroundSize:i}=e;const a=(0,r().IS)((e=>({iconContainer:{height:i??28,width:i??28,borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",background:o??e.tint.regular}})),[o,i]);return(0,n.jsx)("div",{style:a.iconContainer,children:t})}},235692:(e,t,o)=>{o.d(t,{K5:()=>u,Vp:()=>d,_u:()=>s,oP:()=>m,wC:()=>c,xN:()=>p});o(898992),o(354520),o(581454);var r=()=>o(183558),n=()=>o(155185),i=()=>o(778781),a=()=>o(369186);const l={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},c={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},s={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},d={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"recent_activity",type:"recentActivity"}],person_profile_page_details:[{id:"collaborators",type:"collaborators"},{id:"teamspaces",type:"teamspaces"}]};function p(e){return(0,a().jr)({modulesByArea:l,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function u(){return{page_layout_schema:(0,a().ke)(l.page_main).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(l.page_details).map((e=>{if(!(0,i().cn)(e))return(0,n().I)(e)?{...e,id:(0,r().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0}}function m(e,t){const o=void 0===t?[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,r().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0,form_layout_schema:[{id:(0,r().Ay)(),type:"cover"},{id:(0,r().Ay)(),type:"formTitle"},...o,{id:(0,r().Ay)(),type:"formSubmit"}]}}},255824:(e,t,o)=>{o.d(t,{a:()=>i});var r=()=>o(847249);const n=new(o(496506).default)((()=>o(263711).g.state.isOpen),{debugName:"IsInPageViewModeStore"});function i(){return(0,r().O$)(n)}},272752:(e,t,o)=>{o.d(t,{V:()=>a,i:()=>l});var r=()=>o(847249),n=()=>o(220719),i=()=>o(175116);function a(){const e=(0,i().ET)(),{collectionStore:t,collectionViewStore:o,collectionSettingsStore:n}=(0,r().K8)((()=>l(e)),[e]);return{collectionStore:t,collectionViewStore:o,collectionSettingsStore:n,collectionContextStore:e}}function l(e){return{collectionStore:(0,n().o9)(e.collectionStore(),"collectionStore not found"),collectionViewStore:(0,n().o9)(e.collectionViewStore(),"collectionViewStore not found"),collectionSettingsStore:e.settingsStore}}},299177:(e,t,o)=>{o.d(t,{A:()=>i});class r extends(()=>o(757695))().default{getInitialState(){return{}}}const n=new r;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",n);const i=n},342288:(e,t,o)=>{o.d(t,{z:()=>l});o(296540);var r=()=>o(401497),n=()=>o(831310),i=()=>o(464699),a=o(474848);function l(e){let{isAdded:t}=e;const o=(0,r().IS)((e=>({circle:{height:24,width:24,borderRadius:50,display:"flex",alignItems:"center",justifyContent:"center",background:t?"dark"===e.mode?e.accentColors.blue[100]:e.accentColors.blue[50]:e.lightGrayButtonBackground},plusIcon:{height:15,width:15,fill:e.mediumIconColor},checkIcon:{height:12,width:12,fill:e.blueColor}})),[t]);return(0,a.jsx)("div",{style:o.circle,children:t?(0,n().o)(o.checkIcon):(0,i().b)(o.plusIcon)})}},362941:(e,t,o)=>{o.d(t,{_:()=>a});o(296540);var r=()=>o(401497),n=()=>o(742117),i=o(474848);function a(){const e=(0,r().IS)((e=>({icon:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out"}})),[]);return(0,i.jsx)(i.Fragment,{children:(0,n().V)(e.icon)})}},376415:(e,t,o)=>{o.d(t,{i:()=>g});o(581454);var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(401497),l=()=>o(30626),c=()=>o(959013),s=()=>o(736982),d=()=>o(89924),p=()=>o(175116),u=()=>o(44750),m=()=>o(666990),y=o(474848);const f=3;function g(e){let{title:t,templates:o,legacyUnpackagedFeatureTemplates:g,isSuggestedSection:v,additionalItems:_=[]}=e;const h=(0,a().IS)((e=>({title:{color:e.text.secondary},iconContainer:{height:28,width:28,display:"flex",alignItems:"center",justifyContent:"center"},icon:{width:18,height:18,fill:e.text.secondary}})),[]),S=(0,p().ET)(),b=(0,n().v3)(),[w,x]=(0,r.useState)(!1),C=[...(0,i().K8)((()=>o.map((e=>(0,u().Z)({template:e,isInSuggestedSection:v,collectionContextStore:S,environment:b})))),[S,b,v,o]),...g.map((e=>(0,m().d)({legacyUnpackagedFeatureTemplate:e,collectionContextStore:S}))),..._];if(0===C.length)return;const k={key:`${t}-toggle-truncation`,action:()=>{x(!w)},render:e=>(0,y.jsx)(s().I,{buttonMenuItemProps:e,title:(0,y.jsx)("div",{style:h.title,children:w?(0,y.jsx)(c().sA,{id:"useFeatureTemplatesSection.showLess",defaultMessage:"Show less"}):(0,y.jsx)(c().sA,{id:"useFeatureTemplatesSection.showMore",defaultMessage:"More"})}),icon:(0,y.jsx)("div",{style:h.iconContainer,children:(0,l()._)(h.icon)})})},I=w?C:C.slice(0,f);return{key:t,render:e=>(0,y.jsx)(d().A,{...e,title:t}),items:[...I,...C.length>f?[k]:[]]}}},390527:(e,t,o)=>{o.r(t),o.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>V,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>_,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>k,areRecurrenceSchedulesEqual:()=>R,convertFromUnpersistedRecurrenceConfig:()=>E,convertToUnpersistedRecurrenceConfig:()=>j,getFormattedEndCondition:()=>P,getFormattedNextRecurrenceTime:()=>A,getNewEndTimestamp:()=>D,getNextDateUtc:()=>T,getRecurrenceAfter:()=>I,isRunningBetweenMidnightAnd3AM:()=>M,isValidRecurrenceInterval:()=>h,isValidRecurrenceNumberOfRuns:()=>S,rruleFromRecurrence:()=>b,templateAncestorsViolateRecurrenceNesting:()=>C});o(898992),o(354520),o(581454);var r=()=>o(244641);o(944114);function n(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];if(0===o.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...n(o[0],...o.slice(1)).map((e=>[a,...e])));return i}var i=()=>o(496603),a=()=>o(534177),l=()=>o(720665),c=()=>o(597777),s=()=>o(869190),d=()=>o(416504),p=()=>o(402390);class u extends(()=>o(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>o(912720);const y=(0,o(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),f={day:u.DAILY,week:u.WEEKLY,month:u.MONTHLY,year:u.YEARLY},g={MO:u.MO,TU:u.TU,WE:u.WE,TH:u.TH,FR:u.FR,SA:u.SA,SU:u.SU},v=99,_=999;function h(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function S(e){return(0,l().Et)(e)&&Number.isInteger(e)&&e>0&&e<=_}function b(e){const{start_date:t,frequency:o,interval:r,weekdays:i,timezone:l,hour:s,minute:d}=e,p="week"===o&&i?i.map((e=>g[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=n(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,o]=e;return g[t].nth(o)})):(0,a().HB)(e.monthly_restriction)),new u({freq:f[o],dtstart:(0,c().eU)(t),interval:r,byweekday:p,tzid:l,byhour:s??0,byminute:d??0,bysecond:0,...m})}const w=1,x=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const o=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,n=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>w,a=o.length>=x;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:n}}function k(e){var t;const{recurrence:o,afterDate:n}=e;if("number"===(null===(t=o.end_condition)||void 0===t?void 0:t.type)||o.start_date>=n)return o;let i=r().c9.fromMillis(o.start_date,{zone:"utc"});const a=r().c9.fromMillis(n,{zone:"utc"});switch(o.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/o.interval);i=i.plus({years:e*o.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/o.interval);i=i.plus({months:e*o.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/o.interval);i=i.plus({weeks:e*o.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/o.interval);i=i.plus({days:e*o.interval});break}}return{...o,start_date:(0,c().DH)(i.toMillis())}}function I(e){const{recurrence:t,afterDate:o}=e;if((0,m().wt)(t)){const e=(0,c().l1)(o);return t.start_date>=e?new Date(t.start_date):void 0}{const e=b(k({recurrence:t,afterDate:o})).after((0,c().eU)(o));if(!e)return;return(0,c().h1)(e)}}function M(e){return 0===e.hour||1===e.hour||2===e.hour}function T(e){return b(e).after((0,c().eU)((0,c().Rz)()))||void 0}function A(e){const{recurrence:t,intl:o}=e,n=T(E(t));if(!n)return;const i=M(t),a=r().c9.fromJSDate(n).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,p().H)(o)).setZone(t.timezone),l=(0,s().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:o,shortenDate:!0});if(i)return o.formatMessage(y.dateBetweenMidnightAnd3AM,{date:l});{let e=a.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),o.formatMessage(y.dateAtTime,{date:l,time:e})}}function P(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(y.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(y.noEndCondition)}const V=100;function j(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function D(e,t,o){return e.plus(o-t)}function B(e,t){const o=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(o.toJSDate())}}function E(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?B(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function R(e,t){const o=i().fN(e,(e=>void 0!==e)),r=i().fN(t,(e=>void 0!==e));return i().n4(o,r)}},399762:(e,t,o)=>{o.d(t,{O:()=>s,q:()=>d});o(296540);var r=()=>o(401497),n=()=>o(100622),i=()=>o(284371),a=()=>o(288722),l=()=>o(881690),c=o(474848);function s(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:p,showRemoveButton:u,isSingle:m,shouldShrink:y,hideTooltip:f,description:g,tooltipPlacement:v,..._}=e,h=(0,r().DP)(),S=(0,r().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:b,backgroundColor:w}=(0,n().LD)(h,o);return t?(0,c.jsx)(l().A,{format:s,value:(0,c.jsx)(a().A,{children:t}),description:g,onClickRemove:p,showRemoveButton:u,isSingle:m,color:b,backgroundColor:w,shouldShrink:y,tooltipPlacement:v,showTooltip:f?"never":"overflow",style:S.token,..._}):null}function d(e){const{value:t,color:o,format:s,showEllipsis:d,onClickRemove:p,showRemoveButton:u,isSingle:m,shouldShrink:y,groupColor:f,tooltipPlacement:g,description:v,hideTooltip:_,...h}=e,S=(0,r().DP)(),b=(0,r().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:w,backgroundColor:x}=(0,n().LD)(S,o??f??"gray");let C;return C=o||(f||"gray"),(0,c.jsx)(l().A,{format:s,value:(0,c.jsx)(a().A,{children:t}),description:v,onClickRemove:p,showRemoveButton:u,isSingle:m,color:w,backgroundColor:x,shouldShrink:y,showTooltip:_?"never":"overflow",style:b.token,isRound:!0,showColoredDot:C,tooltipPlacement:g,...h})}},406533:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,questionMarkCircleIcon:()=>i});o(296540);var r=o(474848);const n={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,o(340498).wt)("questionMarkCircle",n)},422540:(e,t,o)=>{o.d(t,{$0:()=>g,Fx:()=>x,Ge:()=>m,I3:()=>p,Kj:()=>b,PP:()=>C,TK:()=>k,Yy:()=>d,aE:()=>I,cQ:()=>w,kH:()=>y,m7:()=>u,nq:()=>h,nv:()=>v,tj:()=>f});o(898992),o(354520),o(737550);var r=()=>o(496603),n=()=>o(534177),i=()=>o(970013),a=()=>o(651124),l=()=>o(349835),c=()=>o(390066);(0,n().u0)((e=>(0,n().O9)(e)&&(0,n().O9)(e.target)&&(0,n().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const s={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function p(e){return Boolean(s[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function u(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s,sourcePropertyIds:d}=e,u=(d??(0,n().uv)(o)).filter(((t,r,n)=>{const a=o[t];return!(!a||!p(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!l||l([t,a],r,o)))}));if(0===u.length)return[];if(!t||!1===s)return u;const m=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(u,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:o,sort:l}=e,s=(0,n().uv)(o).filter(((e,t,r)=>{const n=o[e];return!(!n||!(0,i().JY)(n))}));if(0===s.length)return[];if(!t||!1===l)return s;const d=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(s,(e=>d.findIndex((t=>t.property===e))))}function y(e){return e.type===l().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===l().M9.TokenExpected?{type:e.type,token:e.token}:e.type===l().uW.MissingSchemaPropertyOnThisRow||e.type===l().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===l().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===l().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===l().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===l().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===l().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===l().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===l().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===l().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===l().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===l().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===l().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const f={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(f[e.type])}function v(e){const{collectionFormat:t,collectionSchema:o,filter:l,sort:s}=e,d=(0,n().uv)(o).filter(((e,t,r)=>{var n;const a=o[e];return!(!a||!f[a.type])&&((!(0,i().$M)(a)||null===(n=(0,i().om)(a))||void 0===n||!n.auto_update_on_edit)&&(!l||l([e,a],t,o)))}));if(0===d.length)return[];if(!t||!1===s)return d;const p=(0,c().L)(t,o,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(d,(e=>p.findIndex((t=>t.property===e))))}const _={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function h(e){return _[e.type]}const S={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return S[e.type]}function w(e){return 0===e}function x(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function C(e){const{property:t,collectionSchema:o}=e;return!!o&&!o[t]}function k(e){const{collectionSchema:t,property:o,type:r}=e,n=null==t?void 0:t[o];return!n||("action"===r?!p(n):!f[n.type])}function I(e){let{automationTrigger:t,collectionSchema:o}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const l="some"===r.type&&r.some,c="all"===r.type&&r.all;if((l||c||[]).some((e=>C({collectionSchema:o,property:e.property})||k({collectionSchema:o,property:e.property,type:"trigger"}))))return!1;const s="some"===r.type&&(!(0,n().O9)(r.some)||0===r.some.length),d="all"===r.type&&(!(0,n().O9)(r.all)||0===r.all.length);if(!e&&("none"===r.type||s||d)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},447934:(e,t,o)=>{o.d(t,{$L:()=>I,Fv:()=>B,HD:()=>E,V_:()=>V,bV:()=>j,jP:()=>P,nh:()=>A,w8:()=>D});o(16280),o(18107),o(967357),o(898992),o(354520);var r=()=>o(206267),n=()=>o(792071),i=()=>o(688728),a=()=>o(475140),l=()=>o(235692),c=()=>o(924329),s=()=>o(778781),d=()=>o(144081),p=()=>o(334261),u=()=>o(661920),m=()=>o(435009),y=()=>o(751156),f=()=>o(799832),g=()=>o(492414),v=()=>o(594794),_=()=>o(869562),h=()=>o(351360),S=()=>o(712505),b=()=>o(630116),w=()=>o(263711),x=()=>o(640868),C=()=>o(204521),k=()=>o(33218);function I(e){let{environment:t,transaction:o,collectionStore:r,userId:i,modules:a}=e;const c=(0,v().zP)({environment:t,spaceId:r.getSpaceId(),table:d().zx}),s=b().sk.createChildStore(r,c),{model:p,operations:[u]}=n().wfN.create({pointer:c,parent:r.pointer,createdByUserId:i,modules:a??(0,l().K5)()});y().applyOperation({transaction:o,store:s,operation:u});const m=n().BnK.setLayout(r.pointer,c);return y().applyOperation({transaction:o,store:r,operation:m}),{model:p,store:s}}function M(e){let t;return e?t=e:S().default.state.open&&S().default.state.targetStore?t=S().default.state.targetStore:h().default.state.mainEditorCurrentBlockStore&&(t=h().default.state.mainEditorCurrentBlockStore),t}function T(e){_().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),u().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function A(e){var t,o;let{environment:n,blockStore:i,collectionStore:a,collectionViewStore:l,from:c,initialSelectedModuleType:s}=e;const d=function(e){var t;let o=M(e);if(null!==(t=o)&&void 0!==t&&t.isCollectionView()){const e=(0,f().U)(o);o=e?e.resultsInViewOrder(1).at(0):void 0}return o}(i),p=window.location.href;T(n);const u=r().JW();w().g.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:d,siteRootBlockStore:void 0,sessionId:u,initialSelectedModuleId:null==d||null===(t=d.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(s??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:p}),(0,C().Ko)({environment:n,from:c,context:"layout",sessionId:u,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(o=a.getLayoutStore())||void 0===o?void 0:o.id,collectionViewId:null==l?void 0:l.id})}function P(e){let{environment:t,store:o,siteRootBlockStore:n,from:i}=e;const a=M(o);T(t);const l=r().JW();w().g.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:n,sessionId:l}),(0,C().Ko)({environment:t,context:"site",from:i,sessionId:l,collectionId:void 0,existingLayoutId:void 0})}function V(e){let{slideBlockStore:t}=e;const o=t.getNavigableBlockStore(),n=r().JW();w().g.setState({isOpen:!0,mode:"presentation",pageStore:o,currentSlideStore:t,sessionId:n}),window.document.documentElement.requestFullscreen()}function j(e){let{environment:t,pageStore:o,slideBlockStore:r}=e;w().g.setState({isOpen:!1});const n=(0,g().Ay)({store:o,scrollToBlockId:r.id,pageVisitSource:void 0});m().oo({environment:t,url:n}),window.document.fullscreenElement&&window.document.exitFullscreen()}function D(e){w().g.getState().isOpen&&B(e)}function B(e){let{environment:t}=e;const o=w().g.getState();if(!o.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===o.mode&&o.urlOnOpen&&window.location.href!==o.urlOnOpen&&m().aX(t),w().g.setState({isOpen:!1})}function E(e){var t;let{environment:o,transaction:r,property:n,layoutStore:l}=e;const d=w().g.getSessionId(),u=null===(t=l.getModel())||void 0===t?void 0:t.getRawModules(),m=l.getCollectionModel();if(!u||!m)return;const y=b().md.createChildStore(l,m.pointer),f=(0,a().yn)(u,(e=>"titleWithIcon"===e.type));if(f&&(0,s().Mj)(f.module)){var g;const{module:e,position:t}=f,a={...e,type:"titleWithIcon",propertyIds:null===(g=e.propertyIds)||void 0===g?void 0:g.filter((e=>e!==n))};(0,k().UQ)({environment:o,sessionId:d,transaction:r,layoutStore:l,position:{area:(0,i().Fw)(t.area),moduleId:e.id},updatedModule:(0,c().X)(a)})}const v=(0,a().LP)(u,(e=>"property"===e.type&&e.propertyId===n));for(const{module:a,position:c}of v){const e=a.id,t=(0,i().Fw)(c.area);(0,x().U)({environment:o,sessionId:d,transaction:r,layoutStore:l,position:{area:t,moduleId:e}})}const _=m.getFormat().collection_page_sections;if(_){const e=_.filter((e=>e.section!==n));p().LK({store:y,pageSectionFormats:e,transaction:r,environment:o})}}},462892:(e,t,o)=>{o.d(t,{_:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("layout",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.39999 2.19999C2.28953 2.19999 2.19999 2.28953 2.19999 2.39998V11.5999C2.19999 11.7103 2.28953 11.7999 2.39999 11.7999H4.99997C5.11042 11.7999 5.19997 11.7103 5.19997 11.5999V2.39998C5.19997 2.28953 5.11042 2.19999 4.99997 2.19999H2.39999ZM1 2.39998C1 1.6268 1.62679 1 2.39999 1H4.99997C5.77316 1 6.39995 1.6268 6.39995 2.39998V11.5999C6.39995 12.3731 5.77316 12.9999 4.99997 12.9999H2.39999C1.62679 12.9999 1 12.3731 1 11.5999V2.39998ZM9 8.80036C8.88954 8.80036 8.8 8.88991 8.8 9.00036V11.6003C8.8 11.7108 8.88954 11.8003 9 11.8003H11.6C11.7105 11.8003 11.8 11.7108 11.8 11.6003V9.00036C11.8 8.88991 11.7105 8.80036 11.6 8.80036H9ZM7.60001 9.00036C7.60001 8.22717 8.2268 7.60037 9 7.60037H11.6C12.3731 7.60037 13 8.22717 13 9.00036V11.6003C13 12.3736 12.3731 13.0003 11.6 13.0003H9C8.2268 13.0003 7.60001 12.3736 7.60001 11.6003V9.00036ZM8.79994 2.39998C8.79994 2.28953 8.88949 2.19999 8.99994 2.19999H11.5999C11.7104 2.19999 11.7999 2.28953 11.7999 2.39998V4.99997C11.7999 5.11043 11.7104 5.19996 11.5999 5.19996H8.99994C8.88949 5.19996 8.79994 5.11043 8.79994 4.99997V2.39998ZM8.99994 1C8.22675 1 7.59995 1.6268 7.59995 2.39998V4.99997C7.59995 5.77316 8.22675 6.39995 8.99994 6.39995H11.5999C12.3731 6.39995 12.9999 5.77316 12.9999 4.99997V2.39998C12.9999 1.6268 12.3731 1 11.5999 1H8.99994Z"})})},464699:(e,t,o)=>{o.d(t,{b:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},465364:(e,t,o)=>{o.d(t,{$N:()=>A,D5:()=>P,GB:()=>I,M9:()=>C,Pt:()=>T,eW:()=>M,jo:()=>V,v7:()=>k});o(944114),o(898992),o(803949),o(581454);var r=()=>o(244641),n=()=>o(787626),i=()=>o(713998),a=()=>o(597777),l=()=>o(604995),c=()=>o(416504),s=()=>o(519831),d=()=>o(496603),p=()=>o(534177),u=()=>o(299709),m=()=>o(317001),y=()=>o(520861),f=()=>o(878060),g=()=>o(44729),v=()=>o(246826),_=()=>o(319975),h=()=>o(519839),S=()=>o(695625),b=()=>o(397248),w=()=>o(630116),x=()=>o(747671);function C(e){const{environment:t,droppedStores:o,duplicate:i,calendarBy:d,transaction:p,collectionContextStore:f,duplicateActions:v}=e,_=r().c9.fromMillis(e.startOfDay);let S=!0;for(const r of o){const t=e.collectionStore?e.collectionStore:(0,h().Dj)({store:r,collectionContextStore:f});if(r.getParentTable()===s().Vl||!t){S=!1;break}g().X$({childStore:r,parentStore:t,transaction:p})||(S=!1)}const b=(0,y().T)({environment:t,droppedStores:o,duplicate:i,transaction:p,collectionStore:e.collectionStore,duplicateActions:v});for(const r of b){const o=e.collectionStore?e.collectionStore:(0,h().Dj)({store:r,collectionContextStore:f});if(!o)continue;const i=o.getMappedProperty(d),s=r.getPropertyStore(i),y=(0,n().b)(s.getValue())||l().Ec((0,c().P)()),g=l().kW(y,(0,c().P)()),v=_.toFormat(l().tr);let b;if("date"===g.type||"datetime"===g.type)b={...g,start_date:v};else{const e=l().AA(g,(0,c().P)());if(!e.end)return;const t={...g,start_date:v},o=l().AA(t,(0,c().P)()).start.diff(e.start,"days"),r=e.end.plus(o).toFormat(l().tr);b={...g,start_date:v,end_date:r}}const w=l().kW(b,a().$K(y)||(0,c().P)());(0,m().j)({environment:t,store:r,collectionStore:o,collectionContextStore:f,shouldCoerce:!0,groupsPointer:[],transaction:p,alreadyMovedToCollection:S}),P({environment:t,type:"dateValue",propertyId:i,store:r,transaction:p,dateValue:w}),(0,u().E)({environment:t,collectionContextStore:f,block_id:r.id,property:i,property_type:"date",from:"calendar"})}}function k(e){const{calendarStore:t,direction:o,targetStore:r}=e;t.setState({...t.state,isDragging:!0,targetStore:r,direction:o,temporaryValue:void 0})}function I(e){const{calendarStore:t,x:o,y:i,calendarBy:s}=e,p=t.state;if(p.isDragging){const e=(0,n().b)(p.targetStore.getPropertyStore(s).getValue());if(!e)return;const u=l().kW(e,(0,c().P)()),m=p.temporaryValue||e,y=l().kW(m,(0,c().P)()),f=[];p.dayStoreMap.forEach(((e,t)=>{f.push({store:e,timestamp:t})}));const g=f.find((e=>{let{store:t}=e;const r=S().T.getRectFromStore(t);return Boolean(r&&b().ux(r,o,i))}));let v;if(g){const e=r().c9.fromMillis(g.timestamp),t=e.endOf("day"),o=e.toFormat(l().tr);if(u){const n=l().AA(u,(0,c().P)());if(p.direction===x().Q.Left)if(r().IX.fromDateTimes(e,t).contains(n.start))v=u;else{let e;e="datetimerange"===u.type||"daterange"===u.type?{...u,start_date:o,end_date:u.end_date}:"datetime"===u.type?{type:"datetimerange",start_date:o,start_time:u.start_time,end_date:u.start_date,end_time:u.start_time,time_zone:u.time_zone,reminder:u.reminder}:{type:"daterange",start_date:o,end_date:u.start_date,reminder:u.reminder};const t=l().AA(e,(0,c().P)());v=!n.end&&t.start>n.start||n.end&&t.start>n.end?y:e}else if(n.end?r().IX.fromDateTimes(e,t).contains(n.end):r().IX.fromDateTimes(e,t).contains(n.start))v=u;else{let e;e="date"===u.type?{...u,type:"daterange",end_date:o}:"datetime"===u.type?{...u,type:"datetimerange",end_date:o,end_time:"00:00"}:{...u,end_date:o};const t=l().AA(e,(0,c().P)());v=t.end&&t.end<t.start?y:e}}}if(v&&!d().n4(y,v)){const e=l().kW(v,a().$K(m)||(0,c().P)());t.setState({...p,temporaryValue:e})}}}function M(e){const{environment:t,calendarStore:o,calendarBy:r,transaction:n}=e,i=o.state;i.isDragging&&i.temporaryValue&&(P({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:r,store:i.targetStore,transaction:n}),o.setState({...o.state,isDragging:!1}))}function T(e){const{calendarStore:t}=e,o=t.state;o.isDragging&&t.setState({...o,isDragging:!1})}function A(e){const{environment:t,store:o,collectionStore:n,collectionContextStore:a,startDayOfWeek:s,transaction:d}=e,p=a.dateRangeStartStore.state,u=(0,c().P)(),y=a.normalizedQueryStore.state;if(!y||!y.calendar_by)return;const f=(null==n?void 0:n.getMappedProperty(y.calendar_by))??y.calendar_by,g=l().hp(p,s,u),_=g.startOf("month"),h=g.endOf("month"),S=r().c9.now().startOf("day");let b;return b=r().IX.fromDateTimes(_,h).contains(S)?l().p6(S.valueOf(),u):l().p6(l().iB(p,s,u).valueOf(),u),v().zv({store:o.getPropertiesStore(),data:{[f]:i().m5(b)},transaction:d}),(0,m().j)({environment:t,store:o,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:d}),o}function P(e){const{environment:t,store:o,propertyId:r,transaction:n}=e;let a;"timestamp"===e.type?a=l().p6(e.timestampMs.valueOf(),(0,c().P)()):"dateValue"===e.type?a=e.dateValue:(0,p().HB)(e);const s=o.getPropertyValue(r),d=i().m5(a);v().zv({store:o.getPropertiesStore(),data:{[r]:d},transaction:n}),f().O({environment:t,store:o,dateProperty:{id:r,oldValue:s,newValue:d}})}function V(e){const{environment:t,collectionStore:o,calendarBy:r,store:n,insertStores:i,collectionContextStore:a,transaction:l}=e,c=n.getPropertyStore(r).getValue();for(const s of i)(0,m().j)({environment:t,store:s,collectionStore:o,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:l}),_().R9({environment:t,store:s.getPropertyStore(r),value:c,transaction:l});return i.map((e=>w().Bv.createChildStore(o,e.pointer)))}},497222:(e,t,o)=>{o.d(t,{A:()=>p});o(296540);var r=()=>o(804773),n=()=>o(401497),i=()=>o(742117),a=()=>o(30626),l=()=>o(284371),c=()=>o(760217),s=()=>o(700251),d=o(474848);function p(e){const{icon:t,iconStyle:o,title:p,caption:u,right:m,rightStyle:y,isRed:f,isGray:g,isOrange:v,onClick:_,onMouseDown:h,onMouseEnter:S,onMouseLeave:b,disabled:w,showChevron:x,chevronStyle:C,rotateChevron:k,showDragHandle:I,focused:M,textWrapperStyle:T,shouldWrapCaption:A,desktopIconStyle:P,buttonStyle:V,desktopTitleStyle:j}=e,D=(0,s().y$)(),B=(0,n().IS)((e=>({style:{color:g?e.text.secondary:v?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:g?e.mediumIconColor:v?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:w?.4:void 0,...V},leftIconStyle:{width:D,height:D,...t===a()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:w?e.text.primary:e.text.tertiary,fill:w?e.regularIconColor:e.lightIconColor,flexShrink:0,...y},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...C},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[g,v,w,o,t,C,y,V,D]),{itemRef:E,isTabbable:R,onKeyDown:O,onFocus:L}=(0,r().e)();return(0,d.jsx)(c().A,{ref:E,icon:null==t?void 0:t(B.leftIconStyle),focused:M||!1,disabled:w,title:p,caption:u,shouldWrapCaption:A,desktopTitleStyle:{flexGrow:1,flexShrink:1,...j},onKeyDown:O,onFocus:L,disallowTabbing:!R,showDragHandle:I,buttonStyle:B.style,rightStyle:B.rightStyle,isRedOnHover:f,ignoreLocalHoverState:!!w||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...l().RC,display:"flex"},children:m}),!w&&x&&(0,i().V)({...B.rightIconStyle,...k&&B.rightIconRotatedStyle})]}),onClick:_,onMouseDown:h,onMouseEnter:S,onMouseLeave:b,textWrapperStyle:T,desktopIconStyle:P})}},520861:(e,t,o)=>{o.d(t,{T:()=>n});o(944114),o(898992),o(908872);var r=()=>o(415651);function n(e){const{environment:t,collectionStore:o,duplicate:n,droppedStores:i,transaction:a,duplicateActions:l}=e,{movedStores:c,reparentedStores:s}=i.reduce(((e,t)=>(n||t.getAssociatedCollectionId()!==(null==o?void 0:o.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...c,...r().MS({environment:t,droppedStores:s,duplicate:n,transaction:a,resolveTemplateVariables:!1,duplicateActions:l})]}},546461:(e,t,o)=>{o.d(t,{EC:()=>w,To:()=>b,YC:()=>x,or:()=>S,u:()=>h});o(16280);var r=o(296540),n=()=>o(484714),i=()=>o(847249),a=()=>o(496506),l=()=>o(322867),c=()=>o(959013),s=()=>o(534177),d=()=>o(813297),p=()=>o(862292),u=()=>o(698331),m=()=>o(645873),y=()=>o(190019),f=()=>o(76190),g=o(474848);const v=new WeakMap,_=(0,r.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});_.displayName="AutomationContext";function h(e){const{automationStore:t,children:o,contextType:r}=e,h=(0,n().v3)(),S=(0,c().tz)(),{value:b}=(0,m().fJ)(p().T.formulas),{value:w}=(0,m().fJ)(d().QV.automationTypecheck),x=(0,f().n)(t),C=(0,i().K8)((()=>{if(!b)return{error:new(l().N9)("Missing formulas dependency")};if(!w)return{error:new(l().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:o,automationTypecheckModule:r,contextType:n,formulasModule:i,intl:l,isSubscribed:c}=e,d=v.get(o);if(d)return d;{const e=new(a().default)((()=>{const e=o.getTriggerType();let a=n;return(0,s().O9)(e)&&(0,u().x2)(e)&&(a=(0,u().H8)(e)),(0,y().Z)({environment:t,automationStore:o,automationTypecheckModule:r,contextType:a,formulasModule:i,intl:l,isSubscribed:c})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(o,e),e}}({environment:h,automationStore:t,automationTypecheckModule:w,contextType:r,formulasModule:b,intl:S,isSubscribed:x});return e.state}),[h,t,w,r,b,S,x]);return(0,g.jsx)(_.Provider,{value:{automationStore:t,typecheckResult:C,contextType:r,defined:!0},children:o})}function S(e){const{automationStore:t,children:o}=e,r=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(h,{automationStore:t,contextType:(0,u().H8)(r??"event"),children:o})}function b(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function w(){const e=r.useContext(_);if(!1===e.defined)throw new Error("No automation context found!");return e}function x(){return r.useContext(_)}},640868:(e,t,o)=>{o.d(t,{U:()=>u});o(16280);var r=()=>o(31503),n=()=>o(454984),i=()=>o(688728),a=()=>o(475140),l=()=>o(789280),c=()=>o(778781),s=()=>o(751156),d=()=>o(204521),p=()=>o(658616);function u(e){let{environment:t,transaction:o,layoutStore:u,position:m,sessionId:y,beforePerformDeleteModule:f}=e;const g=u.getModules();if(!g)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const v=(0,a().EX)(g,(e=>e.id===m.moduleId)),_=(0,r().Cg)({moduleId:null==v?void 0:v.module.id,modulesByArea:u.getModules()}).length;if(!v)return;const{module:h,position:S}=v;if(!(0,l().Fe)(h))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var b;(s().createAndCommitOrAppend({environment:t,transaction:o,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:o,moduleLocation:r,moduleToDelete:a,beforePerformDeleteModule:l}=e;l&&l(t);(0,c().V6)(a)&&(0,p().deleteViewsModuleDependencies)({layoutStore:o,viewsModule:a,transaction:t});if("form_conditional_modules"===r.area){const e=n().N4.removeChildModule({pointer:o.pointer,modulesByArea:o.getModules(),module:a});for(const r of e)s().applyOperation({transaction:t,store:o,operation:r})}else{const e="views_main_tab_modules"===r.area?{area:r.area,viewId:r.viewId}:{area:i().Zm[r.area]};s().applyOperation({transaction:t,store:o,operation:n().N4.deleteModuleInArea({...e,pointer:o.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:u,moduleLocation:S,moduleToDelete:h,beforePerformDeleteModule:f})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),y)&&d().PS({environment:t,module:h,sessionId:y,collectionId:null===(b=u.getCollectionModel())||void 0===b?void 0:b.id,layoutId:u.id,context:(0,i().We)(m.area),area:m.area,depth:_})}},658616:(e,t,o)=>{o.r(t),o.d(t,{deleteViewsModuleDependencies:()=>a});var r=()=>o(220719),n=()=>o(44729),i=()=>o(630116);function a(e){const{layoutStore:t,viewsModule:o,transaction:a}=e,l=(0,r().o9)(i().Bv.createChildStore(t,o.collection_view_block_pointer));n().zz({childStore:l,parentStore:t,transaction:a})}},666990:(e,t,o)=>{o.d(t,{d:()=>y});o(296540);var r=()=>o(401497),n=()=>o(148307),i=()=>o(632625),a=()=>o(959013),l=()=>o(534177),c=()=>o(686526),s=()=>o(736982),d=()=>o(760578),p=()=>o(362941),u=()=>o(342288),m=o(474848);function y(e){let{legacyUnpackagedFeatureTemplate:t,collectionContextStore:o}=e;return{key:t.type,action:()=>{const e=o.settingsStore;switch(t.type){case"subitems":c().a2({collectionSettingsStore:e,item:{type:"subitemV2",from:"customize_menu"}});break;case"dependencies":c().a2({collectionSettingsStore:e,item:{type:"dependencies",from:"customize_menu"}});break;default:(0,l().HB)(t.type)}},render:e=>(0,m.jsx)(g,{legacyFeature:t,buttonMenuItemProps:e})}}function f(e,t,o){const r=t=>{const o={items:"items"};return{title:(0,m.jsx)(a().sA,{...(0,d().mv)({feature:t,databaseType:void 0}),values:o}),caption:e.formatMessage((0,d().I_)({feature:t,databaseType:void 0}),o)}},c=t.accentColors.brown,s=e=>(0,m.jsx)("div",{style:{height:28,width:28,borderRadius:4,display:"flex",alignItems:"center",justifyContent:"center",background:o.isInstalled?void 0:c[30]},children:(0,m.jsx)(i().p,{icon:e,theme:t,size:16,style:{fill:o.isInstalled?t.regularIconColor:c[400]}})});switch(o.type){case"subitems":return{...r("subitem"),icon:s(n().A.images.appPackages.featureSubtasksSvg)};case"dependencies":return{...r("timeline_arrows_by"),icon:s(n().A.images.appPackages.featureDependenciesSvg)};default:(0,l().HB)(o.type)}}function g(e){const{legacyFeature:t,buttonMenuItemProps:o}=e,n=(0,a().tz)(),i=(0,r().DP)();return(0,m.jsx)(s().I,{buttonMenuItemProps:o,...f(n,i,t),right:t.isInstalled?(0,m.jsx)(p()._,{}):(0,m.jsx)(u().z,{isAdded:!1})})}},698331:(e,t,o)=>{o.d(t,{$X:()=>i,H8:()=>a,x2:()=>n});var r=()=>o(534177);function n(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,r().O9)(t)&&n(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,r().HB)(e)}},725649:(e,t,o)=>{function r(e){return!(!e||"askUserToPick"in e)}function n(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}o.d(t,{DK:()=>n,K$:()=>r,j6:()=>i})},735695:(e,t,o)=>{o.d(t,{Ay:()=>I,iZ:()=>x,vE:()=>w});var r=o(296540),n=()=>o(804773),i=()=>o(401497),a=()=>o(149375),l=()=>o(66913),c=()=>o(959013),s=()=>o(284371),d=()=>o(686526),p=()=>o(704152),u=()=>o(285790),m=()=>o(928600),y=()=>o(480095),f=()=>o(554509),g=()=>o(753199),v=()=>o(722872),_=()=>o(253579),h=()=>o(255824),S=o(474848);const b=(0,c().YK)({back:{defaultMessage:"Back",id:"collectionsSettingsMenu.back"}}),w=290,x=400;function C(e){let{children:t,title:o,titleType:r,settingsStackLength:n,handleClose:d,handleBackArrowClick:m,hideDesktopHeader:y,hasBackStack:g}=e;const v=(0,h().a)(),_=(0,c().tz)(),w=(0,i().IS)((e=>({hiddenDesktopHeaderDiv:{height:0},nonHiddenDesktopHeaderDiv:{display:"flex",alignItems:v?"top":"center",padding:v?"0px 14px 6px 14px":"14px 16px 6px 16px",height:v?void 0:42},arrowButton:{marginRight:8,marginLeft:-2,height:22},arrowIcon:{width:16,height:16},title:{flexGrow:1,fontWeight:v?s().Wy.medium:s().Wy.semibold,fontSize:v?16:14,lineHeight:v?"24px":void 0,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},closeButton:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%",background:e.buttonHoveredBackground,width:18,height:18,flexShrink:0},closeButtonHover:{background:e.buttonPressedBackground},closeIcon:{width:14,fill:e.text.secondary}})),[v]),x=!v;return(0,S.jsxs)(S.Fragment,{children:[y?(0,S.jsx)("div",{style:w.hiddenDesktopHeaderDiv}):(0,S.jsxs)("div",{style:w.nonHiddenDesktopHeaderDiv,children:[(n>1||g)&&(0,S.jsx)(u().A,{icon:a().v,style:w.arrowButton,iconStyle:w.arrowIcon,onClick:m,ariaLabel:_.formatMessage(b.back)}),"sectionHeader"===r?(0,S.jsx)(f().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",customStyles:{flexGrow:1},children:o}):(0,S.jsx)("span",{style:w.title,children:o}),x&&(0,S.jsx)(p().A,{onClick:d,style:w.closeButton,hoveredStyle:w.closeButtonHover,children:(0,l().V)(w.closeIcon)})]}),t]})}function k(e,t){let{children:i,footer:a,header:l,unconstrainedWidth:c,desktopWidth:s,title:p,titleType:u,collectionSettingsStore:f,fullHeight:b,hideDesktopHeader:x,menuScrollerStyle:k,innerContentWrapperStyle:I,disableScroller:M,handleBackArrowClick:T,hasBackStack:A,handleClose:P}=e;const V=(0,o(484714).Y0)(),j=(0,o(175116).Ks)(),D=(0,v().Tf)(),B=(0,h().a)(),{currentTab:E,settingsStackLength:R,hideHeader:O}=(0,o(847249).K8)((()=>{const e=f.state;return{currentTab:(0,o(940371).S)(f),settingsStackLength:e.stack.length,hideHeader:e.hideSettingsHeader}}),[f]),L=(0,r.useCallback)((()=>{var e;T?T():d().yl({collectionSettingsStore:f,keepPreviousRef:"form_editor"===(null==j||null===(e=j.collectionViewStore())||void 0===e?void 0:e.getType())})}),[T,f,j]),F=(0,r.useCallback)((e=>{P?P(e):(0,g().SQ)({event:e,context:g().y$.CollectionSettingsClick,callback:()=>{d().os({collectionSettingsStore:f})}})}),[P,f]),H=(0,r.useCallback)((e=>{(0,_().rW)(e.target)||(0,_().iX)(e.target)||(0,_().u2)(e.target)||o(263711).g.state.isOpen||F(e)}),[F]);if(!E)return null;let W;if(V.isMobile)W={disableScroller:M,menuType:v().gu.Modal,title:p,left:R>1?(0,S.jsx)(y().MobileModalBackButton,{}):void 0,onClickLeft:R>1?L:void 0,scrollerStyle:k,innerRef:t,right:D?void 0:(0,S.jsx)(y().DoneMenuText,{}),onClickRight:D?void 0:F};else{const e=c||s?void 0:B?280:w;W={disableScroller:M,menuType:v().gu.Popup,minWidth:B?280:w,width:s,maxHeight:b?"100%":"80vh",...e&&{maxWidth:e},onClickOutside:H,scrollerStyle:{flexGrow:0,...k},header:!O&&(0,S.jsx)(C,{settingsStackLength:R,handleClose:F,handleBackArrowClick:L,hasBackStack:A,hideDesktopHeader:x,title:p,titleType:u,children:l}),paddingTop:O?6:0,footer:a,innerRef:t}}const N=(0,S.jsxs)(S.Fragment,{children:[V.isMobile&&l,i,V.isMobile&&a]});return b?(0,S.jsx)(n().Y,{direction:"vertical",children:(0,S.jsx)(m().A,{...W,children:N})}):(0,S.jsx)(o(297872).A,{capture:!0,allowMobileAutoScroll:!0,allowEsc:!0,render:e=>(0,S.jsx)(n().Y,{direction:"vertical",children:(0,S.jsx)(m().A,{...W,...e,children:(0,S.jsx)("div",{style:I,children:N})})})})}const I=(0,r.forwardRef)(k)},736982:(e,t,o)=>{o.d(t,{I:()=>d,h:()=>s});o(296540);var r=()=>o(484714),n=()=>o(401497),i=()=>o(284371),a=()=>o(760217),l=()=>o(115512),c=o(474848);function s(e){let{environment:t}=e;return{padding:t.device.isMobile?"12px 2px":"6px",alignItems:"center"}}function d(e){let{buttonMenuItemProps:t,title:o,caption:d,icon:p,onClick:u,right:m,isDisabled:y}=e;const f=(0,r().v3)(),g=(0,n().IS)((e=>({menuItem:{display:"flex",...s({environment:f}),opacity:y?.4:void 0},title:{fontSize:(0,l().ny)(f,"UIRegular"),...i().RC},caption:{fontSize:(0,l().ny)(f,"UISmall"),overflow:"hidden",color:e.text.secondary,whiteSpace:"nowrap",textOverflow:"ellipsis"}})),[f,y]),v={};return u&&(v.onClick=u),(0,c.jsx)(a().A,{...t,style:g.menuItem,disabled:y,title:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:g.title,children:o}),d&&(0,c.jsx)("div",{style:g.caption,children:d})]}),icon:p,right:m,...v})}},742117:(e,t,o)=>{o.d(t,{V:()=>n});o(296540);var r=o(474848);const n=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},747671:(e,t,o)=>{o.d(t,{Q:()=>r,a:()=>n});let r=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class n extends(()=>o(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},789280:(e,t,o)=>{o.d(t,{Fe:()=>i,wm:()=>a});const r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},n={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return r[e.type]}function a(e){return n[e.type]}},888325:(e,t,o)=>{function r(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>r})},902842:(e,t,o)=>{o.d(t,{n:()=>C,z:()=>w});o(16280),o(296540);var r=()=>o(847249),n=()=>o(401497),i=()=>o(663077),a=()=>o(632625),l=()=>o(743176),c=()=>o(278238),s=()=>o(101209),d=()=>o(366295),p=()=>o(462892),u=()=>o(926329),m=()=>o(534177),y=()=>o(745266),f=()=>o(231314),g=()=>o(963589),v=()=>o(3486),_=()=>o(913454),h=o(474848);const S=16;function b(e){let{icon:t,theme:o,size:r,style:i}=e;const l=(0,n().IS)((e=>({icon:{fill:(0,v().d)(t,e).icon.primary,...i}})),[t,i]);return(0,h.jsx)(a().p,{icon:t,theme:o,size:r,style:l.icon})}function w(e){var t;let{template:o,size:r,iconStyle:a}=e;const l=r??S,f=(0,n().IS)((()=>({icon:{width:l,height:l,...a}})),[l,a]),g=(0,n().DP)();if((0,i().cB)(o.templateId))return(0,d().L)(f.icon);const{type:v}=o;switch(v){case"property":return(0,h.jsx)(x,{template:o,iconSize:l,styles:f});case"collection_view":return(0,h.jsx)(y().h,{viewIcon:null===(t=o.value.format)||void 0===t?void 0:t.collection_view_icon,viewType:o.value.type,color:"lightGray",style:f.icon});case"layout":return(0,h.jsx)(h.Fragment,{children:(0,p()._)(f.icon)});case"block":return(0,h.jsx)(h.Fragment,{children:(0,u().b)(f.icon)});case"collection":case"compound":const e="collection"===o.type?o.value.targetCollection.icon:o.icon;if(!(0,c().T8)(e))throw new Error("Only Notion static icons are allowed for template icons");return(0,h.jsx)(b,{icon:e,theme:g,size:l,style:f.icon});case"automation":return(0,h.jsx)(h.Fragment,{children:(0,s().v)(f.icon)});default:(0,m().HB)(v)}}function x(e){let{template:t,iconSize:o,styles:i}=e;const a=(0,n().DP)(),c=(0,g().X)("nds_default_property_noticon"),s=(0,r().K8)((()=>{const{relatedCollectionTemplateId:e}=t;if("relation"===t.value.type&&e){return _().globalWorkflowTemplates.fromIdOfType({templateId:e,type:"collection"}).value.targetCollection.icon}return t.value.icon}),[t]);return(0,h.jsx)(l().zB,{type:t.value.type,icon:s,size:o,style:i.icon,theme:a,isDefaultNoticonEnabled:c})}function C(e){let{template:t,backgroundSize:o}=e;const r=(0,n().IS)((e=>({iconContainer:{background:k({theme:e,template:t})[30]},icon:{fill:k({theme:e,template:t})[400]}})),[t]);return(0,h.jsx)(f().y,{backgroundColor:r.iconContainer.background,backgroundSize:o,icon:(0,h.jsx)(w,{template:t,iconStyle:r.icon})})}function k(e){let{theme:t,template:o}=e;const{type:r}=o;switch(r){case"collection_view":case"automation":return t.accentColors.blue;case"property":return"relation"===o.value.type?t.accentColors.yellow:t.accentColors.red;case"layout":return t.accentColors.orange;case"block":return t.accentColors.purple;case"compound":return t.accentColors.green;case"collection":return t.accentColors.pink;default:(0,m().HB)(r)}}}}]);