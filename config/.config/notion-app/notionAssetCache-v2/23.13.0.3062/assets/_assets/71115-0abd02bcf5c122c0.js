"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[71115],{61548:(e,t,i)=>{i.d(t,{S7:()=>X,eQ:()=>P,my:()=>q});var o=i(296540),n=()=>i(484714),a=()=>i(847249),r=()=>i(401497),s=()=>i(563884),d=()=>i(310442),l=()=>i(824862),c=()=>i(798880),u=()=>i(959013),h=()=>i(496603),p=()=>i(534177),v=()=>i(284371),f=()=>i(572080),g=()=>i(751156),m=()=>i(38337),x=()=>i(728611),y=()=>i(753199),b=()=>i(553965),k=()=>i(907514),S=()=>i(577009),C=()=>i(965351),j=()=>i(962730),A=()=>i(630116),M=()=>i(406699),T=()=>i(614505),w=()=>i(16006),B=()=>i(859428),L=()=>i(256863),R=()=>i(453697),z=()=>i(473594),I=()=>i(659799),N=()=>i(709438),U=i(474848);const D=o.createContext((()=>{}));function W(e){const{disabled:t=!1,children:i}=e,n=(0,o.useContext)(D),a=(0,o.useCallback)((()=>{t||n(!0)}),[n,t]),r=(0,o.useCallback)((()=>{t||n(!1)}),[n,t]);return(0,U.jsx)("div",{style:{display:"contents"},onMouseEnter:a,onMouseLeave:r,children:i})}D.displayName="NestedNotificationButtonContext";const K=0,H=8,P=24,E=16+P+12;function O(e){const{notification:t,children:s,header:d,subheader:l,body:c,rootStore:u,count:h,onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b,onNotificationBodyClicked:k,url:S,isFirst:j,isLast:T,disableLineClamp:w}=e,B=(0,n().v3)(),L=(0,n().Y0)(),R=parseInt(t.end_time),z=(0,a().K8)((()=>{const e=t.navigable_block_id;if(e)return A().sk.createChildStore(u,{table:i(179034).ev,id:e,spaceId:u.id})}),[u,t.navigable_block_id]),I=(0,a().K8)((()=>z||e.notificationTitleStore),[z,e.notificationTitleStore]),N=(0,a().K8)((()=>i(441199).default.isPeekDismissableState()),[]),[W,H]=(0,o.useState)(!1),[P,O]=(0,o.useState)(!1),F=(0,o.useRef)(null),$=(0,i(683097).A)({onLongPress:()=>{var e;return null===(e=F.current)||void 0===e?void 0:e.setOpen(!0)}}),[_,V]=(0,o.useState)(!1),Y=W&&!P&&!_,Z=(0,a().K8)((()=>"mentions"===i(606846).Ay.state.currentTab),[]),J=!t||t.read,X=L.isMobile,q=(0,a().K8)((()=>{const e=B.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[B.WindowSizeStore]),ee=(0,r().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:0,paddingTop:14-K,paddingBottom:14-K,paddingLeft:X?q.left:0,paddingRight:X?q.right:0,marginTop:j?0:K,marginBottom:T?0:K,marginLeft:K,marginRight:K,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-K,paddingRight:16-K,maxWidth:"100%"},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:E-K,paddingRight:16-K,fontSize:14,fontWeight:v().Wy.regular,color:e.text.primary,...v().RC},body:{paddingLeft:E-K,paddingRight:16-K,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:w?void 0:2,overflow:"hidden"},children:{paddingTop:4,paddingLeft:E-K,paddingRight:16-K},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:W&&P?e.buttonBackground:e.state.pressed}})),[X,q.left,q.right,j,T,W,P,w]),te=(0,o.useCallback)((e=>{t&&(_||(!S&&t.read||k(),(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{!N||e.metaKey||e.ctrlKey||i(770906).VI({environment:B}),t.read||g().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!0})}})}})))}),[B,_,t,k,N,u,S]),ie=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{t.read?b():x(),g().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:B,canUndo:!0,perform:e=>{f().ZB({notification:t,rootStore:u,transaction:e,read:!t.read})}})}})}),[B,t,x,b,u]),oe=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{p(),g().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:B,canUndo:!0,perform:e=>{f().s4({notification:t,rootStore:u,transaction:e})}})}})}),[B,t,p,u]),ne=(0,o.useCallback)((e=>{t&&(0,y().SQ)({event:e,context:y().y$.NotificationClick,callback:()=>{m(),g().createAndCommit({userAction:"Activity.handleUnarchive",environment:B,canUndo:!0,perform:e=>{f().JV({notificationId:t.id,visited:!1,rootStore:u,transaction:e})}})}})}),[B,t,m,u]),ae=(0,o.useCallback)((()=>H(!0)),[]),re=(0,o.useCallback)((()=>H(!1)),[]),se=(0,o.useId)(),de=(0,i(575301).T4)();return(0,U.jsx)(M().Ay,{ref:F,disabled:!L.isMobile,style:de.popup,popupType:L.isTablet?M().z7.Popup:M().z7.BottomSheet,render:e=>(0,U.jsx)(C().Lk,{blockStore:z,notification:t,handlers:{handleUnarchive:ne,handleArchive:oe,toggleNotificationReadStatus:ie},closePopup:()=>e.close()}),renderOrigin:()=>(0,U.jsx)("div",{...L.isMobile&&$,children:(0,U.jsx)("article",{style:ee.article,onMouseOver:ae,onMouseLeave:re,children:(0,U.jsxs)(D.Provider,{value:O,children:[(0,U.jsx)(Q,{notification:t,rootStore:u,isMobile:X,isHovered:W,isFirst:j,onMouseEnter:()=>V(!0),onMouseLeave:()=>V(!1),onArchiveClicked:p,onUnarchiveClicked:m,onMarkAsReadClicked:x,onMarkAsUnreadClicked:b}),(0,U.jsxs)(i(197190).A,{href:S,hovered:Y,ignoreLocalHoverState:!0,style:ee.mainClickTargetButton,onClick:te,hoveredStyle:ee.mainClickTargetButtonHovered,disabled:!Boolean(S),pressedStyle:ee.buttonPressed,"aria-labelledby":se,children:[(0,U.jsx)("div",{style:ee.header,children:d?(0,U.jsx)(G,{icon:d.icon,header:d.title,timestamp:R,titleAriaId:se,showBlueDot:Z&&!J,count:h}):(0,U.jsx)(G,{notificationTitleStore:I,timestamp:R,titleAriaId:se,showBlueDot:Z&&!J,count:h})}),(0,U.jsxs)("div",{style:ee.subheaderAndBody,children:[l&&(0,U.jsx)("div",{style:ee.subheader,children:l}),c&&(0,U.jsx)("div",{style:ee.body,children:c}),s&&(0,U.jsx)("div",{style:ee.children,children:s})]})]}),!T&&(0,U.jsx)("div",{style:ee.divider})]})})})},t.id)}const F=12-K,$=12-K,_="100ms ease-out";function Q(e){const{notification:t,rootStore:i,isMobile:o,isHovered:n,isFirst:a,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:h}=e,p=(0,r().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${_}`,opacity:o||n?1:0,position:"absolute",right:F,top:$+(o?-3:0)+(a?0:K)}})),[o,n,a]);return t?(0,U.jsx)("div",{style:p.container,onMouseEnter:u,onMouseLeave:h,children:(0,U.jsx)("div",{style:p.body,children:(0,U.jsx)(S().hR,{notification:t,rootStore:i,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c})})}):null}const V=14,Y=12,Z=12;function G(e){const{notificationTitleStore:t,icon:i,header:d,timestamp:l,showBlueDot:c,count:p=0}=e,f=(0,n().Y0)(),g=(0,u().tz)(),y=f.isMobile,[S,M]=(0,o.useState)(!1),[L,R]=(0,o.useState)(!1),D=(0,k().nl)(l,{useUltraCompactFormat:!0}),K=(0,k().x$)(l),P=(0,a().K8)((()=>{if(t instanceof A().Bv)return t}),[t]),{actorStore:E,actorName:O}=(0,a().K8)((()=>{if(t instanceof A().LU||t instanceof A().vK||t instanceof A().pH){return t?{actorStore:t,actorName:t.getDisplayName(g)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,g]),$=(0,a().K8)((()=>{if(!(t instanceof A().pS||t instanceof A().LU||t instanceof A().vK||t instanceof A().pH))return t}),[t]),_=(0,a().K8)((()=>{var e;if($)return null===(e=$.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:$.getRecordModel})}),[$]),Q=(0,a().K8)((()=>!!P&&P.isEmptyPage()),[P]),G=(0,a().K8)((()=>null==P?void 0:P.isDefined()),[P]),X=(0,o.useCallback)((()=>{M(!0),R(!1)}),[]),q=h().nF((()=>{R(!0)}),200,{leading:!0}),ee=(0,o.useCallback)((()=>{M(!1),R(!1),x().Ol(window,"scroll",q,!0)}),[q]),te=(0,o.useCallback)((e=>(0,U.jsx)(z().yf,{store:P,events:e})),[P]);(0,o.useEffect)((()=>(x().P4(window,"scroll",q,!0),()=>x().Ol(window,"scroll",q,!0))),[q]);const ie=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:Z,alignItems:"center",minWidth:0},headerMobile:{fontSize:V,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",alignItems:"center",justifyContent:"space-between",fontSize:V,gap:12,minWidth:0},time:{display:"flex",gap:8,fontSize:Y,color:e.text.tertiary,whiteSpace:"nowrap",...y&&{display:"inline"},marginTop:V-Y},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:Z,minWidth:0},pageTitleMockedButton:{minWidth:0,display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:S&&(G||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:v().Wy.medium},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:H,flexShrink:0},count:{lineHeight:"21px",fontSize:12,color:e.text.secondary,paddingTop:.5}})),[y,S,t,G]),oe=!0!==L&&void 0;return(0,U.jsxs)("div",{style:ie.container,children:[(0,U.jsx)("div",{style:ie.pageTitleAndTimestamp,children:(0,U.jsxs)("div",{style:y?ie.headerMobile:ie.header,children:[i&&d&&(0,U.jsxs)("div",{style:ie.iconHeaderOverride,children:[i,(0,U.jsx)("div",{style:{...ie.recordTitle,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:d}),p>1?(0,U.jsx)("div",{style:ie.count,children:p}):null]}),(P||t)&&!i&&!d&&(0,U.jsx)(W,{disabled:!G&&!t,children:(0,U.jsx)(B().A,{originGap:3,disableTooltip:!G,alignment:j().C.Start,placement:j().W.Bottom,renderTooltip:te,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:oe,render:e=>(0,U.jsxs)("div",{style:ie.pageTitleMockedButton,...(0,b().A)(e,{onMouseEnter:X,onMouseLeave:ee}),children:[E&&O?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(J,{actorStore:E,avatar:void 0,size:16}),(0,U.jsx)("div",{style:ie.recordTitle,children:O})]}):$?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)(T().B,{disabled:!0,icon:_,isEmptyPage:Q,size:16}),(0,U.jsx)(w().A,{store:$,style:ie.recordTitle,underline:!0})]}):null,p?(0,U.jsx)("div",{style:ie.count,children:p}):null]})})}),(0,U.jsxs)("div",{style:ie.time,className:m().Cxn,children:[(0,U.jsx)(I().A,{text:D,tooltipText:K,icon:s().k}),c?(0,U.jsx)("div",{style:ie.statusDotContainer,children:(0,U.jsx)(N().m,{size:H})}):(0,U.jsx)("div",{style:ie.statusDotSpacer})]})]})}),y&&(0,U.jsx)("div",{style:{width:C().UM-F,flexShrink:0}})]})}function J(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===l().GP?(0,U.jsx)(L().A,{botStore:t,size:o}):t.table===c().oo?(0,U.jsx)(R().A,{userStore:t,size:o}):t.table===d().yj?(0,U.jsx)(R().A,{userStore:void 0,size:o}):void(0,p().HB)(t):i?(0,U.jsx)(R().A,{avatar:i,size:o}):(0,U.jsx)(R().A,{userStore:void 0,size:o})}function X(e){let{icon:t}=e;const i=(0,r().IS)((e=>({wrapper:{display:"flex",alignItems:"center",justifyContent:"center",height:24,width:24},icon:{height:20,width:20,fill:e.icon.secondary}})),[]);return(0,U.jsx)("div",{style:i.wrapper,children:t(i.icon)})}const q=o.memo(O)},126158:(e,t,i)=>{i.d(t,{m:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,o.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},260414:(e,t,i)=>{i.d(t,{Nx:()=>xe,jd:()=>se});var o=i(296540),n=()=>i(484714),a=()=>i(847249),r=()=>i(401497),s=()=>i(563884),d=()=>i(310442),l=()=>i(179034),c=()=>i(824862),u=()=>i(798880),h=()=>i(959013),p=()=>i(496603),v=()=>i(534177),f=()=>i(284371),g=()=>i(572080),m=()=>i(751156),x=()=>i(38337),y=()=>i(728611),b=()=>i(753199),k=()=>i(553965),S=()=>i(907514),C=()=>i(683097),j=()=>i(575301),A=()=>i(577009),M=()=>i(965351),T=()=>i(770906),w=()=>i(441199),B=()=>i(962730),L=()=>i(630116),R=()=>i(606846),z=()=>i(197190),I=()=>i(406699),N=()=>i(614505),U=()=>i(16006),D=()=>i(859428),W=()=>i(256863),K=()=>i(453697),H=()=>i(473594),P=()=>i(659799),E=()=>i(709438),O=i(474848);const F=o.createContext((()=>{}));function $(e){const{disabled:t=!1,children:i}=e,n=(0,o.useContext)(F),a=(0,o.useCallback)((()=>{t||n(!0)}),[n,t]),r=(0,o.useCallback)((()=>{t||n(!1)}),[n,t]);return(0,O.jsx)("div",{style:{display:"contents"},onMouseEnter:a,onMouseLeave:r,children:i})}F.displayName="NestedNotificationButtonContext";const _=0,Q=8;function V(e){const{notification:t,children:i,header:s,subheader:d,body:c,rootStore:u,count:h,onArchiveClicked:p,onUnarchiveClicked:v,onMarkAsReadClicked:x,onMarkAsUnreadClicked:y,onNotificationBodyClicked:k,url:S,isFirst:A,isLast:B,disableLineClamp:N}=e,U=(0,n().v3)(),D=(0,n().Y0)(),W=parseInt(t.end_time),K=(0,a().K8)((()=>{const e=t.navigable_block_id;if(e)return L().sk.createChildStore(u,{table:l().ev,id:e,spaceId:u.id})}),[u,t.navigable_block_id]),H=(0,a().K8)((()=>K||e.notificationTitleStore),[K,e.notificationTitleStore]),P=(0,a().K8)((()=>w().default.isPeekDismissableState()),[]),[E,$]=(0,o.useState)(!1),[Q,V]=(0,o.useState)(!1),Y=(0,o.useRef)(null),Z=(0,C().A)({onLongPress:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.setOpen(!0)}}),[G,X]=(0,o.useState)(!1),q=E&&!Q&&!G,ee=(0,a().K8)((()=>"mentions"===R().Ay.state.currentTab),[]),ie=!t||t.read,oe=D.isMobile,ne=(0,a().K8)((()=>{const e=U.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[U.WindowSizeStore]),ae=(0,r().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:4,paddingTop:14-_,paddingBottom:14-_,paddingLeft:oe?ne.left:0,paddingRight:oe?ne.right:0,marginTop:A?0:_,marginBottom:B?0:_,marginLeft:_,marginRight:_,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-_,paddingRight:16-_,maxWidth:"100%"},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:52-_,paddingRight:16-_,fontSize:14,fontWeight:f().Wy.regular,color:e.text.primary,...f().RC},body:{paddingLeft:52-_,paddingRight:16-_,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:N?void 0:2,overflow:"hidden"},children:{paddingTop:4,paddingLeft:52-_,paddingRight:16-_},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:E&&Q?e.buttonBackground:e.state.pressed}})),[oe,ne.left,ne.right,A,B,E,Q,N]),re=(0,o.useCallback)((e=>{t&&(G||(!S&&t.read||k(),(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{!P||e.metaKey||e.ctrlKey||T().VI({environment:U}),t.read||m().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:U,canUndo:!0,perform:e=>{g().ZB({notification:t,rootStore:u,transaction:e,read:!0})}})}})))}),[U,G,t,k,P,u,S]),se=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{t.read?y():x(),m().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:U,canUndo:!0,perform:e=>{g().ZB({notification:t,rootStore:u,transaction:e,read:!t.read})}})}})}),[U,t,x,y,u]),de=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{p(),m().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:U,canUndo:!0,perform:e=>{g().s4({notification:t,rootStore:u,transaction:e})}})}})}),[U,t,p,u]),le=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{v(),m().createAndCommit({userAction:"Activity.handleUnarchive",environment:U,canUndo:!0,perform:e=>{g().JV({notificationId:t.id,visited:!1,rootStore:u,transaction:e})}})}})}),[U,t,v,u]),ce=(0,o.useCallback)((()=>$(!0)),[]),ue=(0,o.useCallback)((()=>$(!1)),[]),he=(0,o.useId)(),pe=(0,j().T4)();return(0,O.jsx)(I().Ay,{ref:Y,disabled:!D.isMobile,style:pe.popup,popupType:D.isTablet?I().z7.Popup:I().z7.BottomSheet,render:e=>(0,O.jsx)(M().Lk,{blockStore:K,notification:t,handlers:{handleUnarchive:le,handleArchive:de,toggleNotificationReadStatus:se},closePopup:()=>e.close()}),renderOrigin:()=>(0,O.jsx)("div",{...D.isMobile&&Z,children:(0,O.jsx)("article",{style:ae.article,onMouseOver:ce,onMouseLeave:ue,children:(0,O.jsxs)(F.Provider,{value:V,children:[(0,O.jsx)(J,{notification:t,rootStore:u,isMobile:oe,isHovered:E,isFirst:A,onMouseEnter:()=>X(!0),onMouseLeave:()=>X(!1),onArchiveClicked:p,onUnarchiveClicked:v,onMarkAsReadClicked:x,onMarkAsUnreadClicked:y}),(0,O.jsxs)(z().A,{href:S,hovered:q,ignoreLocalHoverState:!0,style:ae.mainClickTargetButton,onClick:re,hoveredStyle:ae.mainClickTargetButtonHovered,disabled:!Boolean(S),pressedStyle:ae.buttonPressed,"aria-labelledby":he,children:[(0,O.jsx)("div",{style:ae.header,children:s?(0,O.jsx)(te,{icon:s.icon,header:s.title,timestamp:W,titleAriaId:he,showBlueDot:ee&&!ie,count:h}):(0,O.jsx)(te,{notificationTitleStore:H,timestamp:W,titleAriaId:he,showBlueDot:ee&&!ie,count:h})}),(0,O.jsxs)("div",{style:ae.subheaderAndBody,children:[d&&(0,O.jsx)("div",{style:ae.subheader,children:d}),c&&(0,O.jsx)("div",{style:ae.body,children:c}),i&&(0,O.jsx)("div",{style:ae.children,children:i})]})]}),!B&&(0,O.jsx)("div",{style:ae.divider})]})})})},t.id)}const Y=12-_,Z=12-_,G="100ms ease-out";function J(e){const{notification:t,rootStore:i,isMobile:o,isHovered:n,isFirst:a,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:h}=e,p=(0,r().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${G}`,opacity:o||n?1:0,position:"absolute",right:Y,top:Z+(o?-3:0)+(a?0:_)}})),[o,n,a]);return t?(0,O.jsx)("div",{style:p.container,onMouseEnter:u,onMouseLeave:h,children:(0,O.jsx)("div",{style:p.body,children:(0,O.jsx)(A().hR,{notification:t,rootStore:i,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c})})}):null}const X=14,q=12,ee=12;function te(e){const{notificationTitleStore:t,icon:i,header:d,timestamp:l,showBlueDot:c,count:u}=e,v=(0,n().Y0)(),g=(0,h().tz)(),m=v.isMobile,[b,C]=(0,o.useState)(!1),[j,A]=(0,o.useState)(!1),T=(0,S().nl)(l,{useUltraCompactFormat:!0}),w=(0,S().x$)(l),R=(0,a().K8)((()=>{if(t instanceof L().Bv)return t}),[t]),{actorStore:z,actorName:I}=(0,a().K8)((()=>{if(t instanceof L().LU||t instanceof L().vK||t instanceof L().pH){return t?{actorStore:t,actorName:t.getDisplayName(g)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,g]),W=(0,a().K8)((()=>{if(!(t instanceof L().pS||t instanceof L().LU||t instanceof L().vK||t instanceof L().pH))return t}),[t]),K=(0,a().K8)((()=>{var e;if(W)return null===(e=W.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:W.getRecordModel})}),[W]),F=(0,a().K8)((()=>!!R&&R.isEmptyPage()),[R]),_=(0,a().K8)((()=>null==R?void 0:R.isDefined()),[R]),V=(0,o.useCallback)((()=>{C(!0),A(!1)}),[]),Z=p().nF((()=>{A(!0)}),200,{leading:!0}),G=(0,o.useCallback)((()=>{C(!1),A(!1),y().Ol(window,"scroll",Z,!0)}),[Z]),J=(0,o.useCallback)((e=>(0,O.jsx)(H().yf,{store:R,events:e})),[R]);(0,o.useEffect)((()=>(y().P4(window,"scroll",Z,!0),()=>y().Ol(window,"scroll",Z,!0))),[Z]);const te=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:ee,alignItems:"center",minWidth:0},headerMobile:{fontSize:X,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:X,gap:12,minWidth:0,alignItems:"center"},time:{display:"flex",gap:8,fontSize:q,color:e.text.tertiary,whiteSpace:"nowrap",...m&&{display:"inline"},marginTop:X-q},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:ee,minWidth:0},pageTitleMockedButton:{minWidth:0,display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:b&&(_||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:f().Wy.medium},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:Q,flexShrink:0},count:{lineHeight:"21px",fontSize:12,color:e.text.secondary,paddingTop:.5}})),[m,b,t,_]),oe=!0!==j&&void 0;return(0,O.jsxs)("div",{style:te.container,children:[(0,O.jsx)("div",{style:te.pageTitleAndTimestamp,children:(0,O.jsxs)("div",{style:m?te.headerMobile:te.header,children:[i&&d&&(0,O.jsxs)("div",{style:te.iconHeaderOverride,children:[i,(0,O.jsx)("div",{style:te.recordTitle,children:d})]}),(R||t)&&!i&&!d&&(0,O.jsxs)("div",{style:te.iconHeaderOverride,children:[(0,O.jsx)(N().B,{disabled:!0,icon:K,isEmptyPage:F,size:24}),(0,O.jsx)($,{disabled:!_&&!t,children:(0,O.jsx)(D().A,{originGap:3,disableTooltip:!_,alignment:B().C.Start,placement:B().W.Bottom,renderTooltip:J,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:oe,render:e=>(0,O.jsxs)("div",{style:te.pageTitleMockedButton,...(0,k().A)(e,{onMouseEnter:V,onMouseLeave:G}),children:[z&&I?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(ie,{actorStore:z,avatar:void 0,size:16}),(0,O.jsx)("div",{style:te.recordTitle,children:I})]}):W?(0,O.jsx)(U().A,{store:W,style:te.recordTitle,underline:!0}):null,u?(0,O.jsx)("div",{style:te.count,children:u}):null]})})})]}),(0,O.jsxs)("div",{style:te.time,className:x().Cxn,children:[(0,O.jsx)(P().A,{text:T,tooltipText:w,icon:s().k}),c?(0,O.jsx)("div",{style:te.statusDotContainer,children:(0,O.jsx)(E().m,{size:Q})}):(0,O.jsx)("div",{style:te.statusDotSpacer})]})]})}),m&&(0,O.jsx)("div",{style:{width:M().UM-Y,flexShrink:0}})]})}function ie(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===c().GP?(0,O.jsx)(W().A,{botStore:t,size:o}):t.table===u().oo?(0,O.jsx)(K().A,{userStore:t,size:o}):t.table===d().yj?(0,O.jsx)(K().A,{userStore:void 0,size:o}):void(0,v().HB)(t):i?(0,O.jsx)(K().A,{avatar:i,size:o}):(0,O.jsx)(K().A,{userStore:void 0,size:o})}const oe=o.memo(V),ne=o.createContext((()=>{}));function ae(e){const{disabled:t=!1,children:i}=e,n=(0,o.useContext)(ne),a=(0,o.useCallback)((()=>{t||n(!0)}),[n,t]),r=(0,o.useCallback)((()=>{t||n(!1)}),[n,t]);return(0,O.jsx)("div",{style:{display:"contents"},onMouseEnter:a,onMouseLeave:r,children:i})}ne.displayName="NestedNotificationButtonContext";const re=0,se=8;function de(e){const{notification:t,children:s,header:d,subheader:c,body:u,rootStore:h,count:p,onArchiveClicked:v,onUnarchiveClicked:x,onMarkAsReadClicked:y,onMarkAsUnreadClicked:k,onNotificationBodyClicked:S,url:A,isFirst:B,isLast:N,disableLineClamp:U}=e,D=(0,n().v3)(),W=(0,n().Y0)(),K=parseInt(t.end_time),H=(0,a().K8)((()=>{const e=t.navigable_block_id;if(e)return L().sk.createChildStore(h,{table:l().ev,id:e,spaceId:h.id})}),[h,t.navigable_block_id]),P=(0,a().K8)((()=>H||e.notificationTitleStore),[H,e.notificationTitleStore]),E=(0,a().K8)((()=>w().default.isPeekDismissableState()),[]),[F,$]=(0,o.useState)(!1),[_,Q]=(0,o.useState)(!1),V=(0,o.useRef)(null),Y=(0,C().A)({onLongPress:()=>{var e;return null===(e=V.current)||void 0===e?void 0:e.setOpen(!0)}}),[Z,G]=(0,o.useState)(!1),J=F&&!_&&!Z,X=(0,a().K8)((()=>"mentions"===R().Ay.state.currentTab),[]),q=!t||t.read,ee=W.isMobile,te=(0,a().K8)((()=>{const e=D.WindowSizeStore.state;return{left:e.paddingLeftCSS,right:e.paddingRightCSS}}),[D.WindowSizeStore]),ie=(0,r().IS)((e=>({article:{display:"flex",flexDirection:"column"},mainClickTargetButton:{display:"flex",flexDirection:"column",gap:4,paddingTop:14-re,paddingBottom:14-re,paddingLeft:ee?te.left:0,paddingRight:ee?te.right:0,marginTop:B?0:re,marginBottom:N?0:re,marginLeft:re,marginRight:re,transition:"background 150ms ease"},mainClickTargetButtonHovered:{background:e.state.hover},header:{display:"flex",paddingLeft:16-re,paddingRight:16-re,maxWidth:"100%"},subheaderAndBody:{display:"flex",flexDirection:"column"},subheader:{paddingLeft:40-re,paddingRight:16-re,fontSize:14,fontWeight:f().Wy.regular,color:e.text.primary,...f().RC},body:{paddingLeft:40-re,paddingRight:16-re,fontSize:14,color:e.text.secondary,display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:U?void 0:2,overflow:"hidden"},children:{paddingTop:4,paddingLeft:40-re,paddingRight:16-re},divider:{height:1,backgroundColor:e.stroke.secondary},buttonPressed:{backgroundColor:F&&_?e.buttonBackground:e.state.pressed}})),[ee,te.left,te.right,B,N,F,_,U]),ae=(0,o.useCallback)((e=>{t&&(Z||(!A&&t.read||S(),(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{!E||e.metaKey||e.ctrlKey||T().VI({environment:D}),t.read||m().createAndCommit({userAction:"ActivityNotificationSection.handleMarkAsRead",environment:D,canUndo:!0,perform:e=>{g().ZB({notification:t,rootStore:h,transaction:e,read:!0})}})}})))}),[D,Z,t,S,E,h,A]),se=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{t.read?k():y(),m().createAndCommit({userAction:"InboxActionsMenu.toggleNotificationReadStatus",environment:D,canUndo:!0,perform:e=>{g().ZB({notification:t,rootStore:h,transaction:e,read:!t.read})}})}})}),[D,t,y,k,h]),de=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{v(),m().createAndCommit({userAction:"InboxActionsMenu.handleArchive",environment:D,canUndo:!0,perform:e=>{g().s4({notification:t,rootStore:h,transaction:e})}})}})}),[D,t,v,h]),le=(0,o.useCallback)((e=>{t&&(0,b().SQ)({event:e,context:b().y$.NotificationClick,callback:()=>{x(),m().createAndCommit({userAction:"Activity.handleUnarchive",environment:D,canUndo:!0,perform:e=>{g().JV({notificationId:t.id,visited:!1,rootStore:h,transaction:e})}})}})}),[D,t,x,h]),ce=(0,o.useCallback)((()=>$(!0)),[]),ue=(0,o.useCallback)((()=>$(!1)),[]),pe=(0,o.useId)(),ve=(0,j().T4)(),fe=(0,i(477293).r)("notification_ia"),me="page"===fe;return"actor"===fe?(0,O.jsx)(i(61548).my,{...e}):me?(0,O.jsx)(oe,{...e}):(0,O.jsx)(I().Ay,{ref:V,disabled:!W.isMobile,style:ve.popup,popupType:W.isTablet?I().z7.Popup:I().z7.BottomSheet,render:e=>(0,O.jsx)(M().Lk,{blockStore:H,notification:t,handlers:{handleUnarchive:le,handleArchive:de,toggleNotificationReadStatus:se},closePopup:()=>e.close()}),renderOrigin:()=>(0,O.jsx)("div",{...W.isMobile&&Y,children:(0,O.jsx)("article",{style:ie.article,onMouseOver:ce,onMouseLeave:ue,children:(0,O.jsxs)(ne.Provider,{value:Q,children:[(0,O.jsx)(he,{notification:t,rootStore:h,isMobile:ee,isHovered:F,isFirst:B,onMouseEnter:()=>G(!0),onMouseLeave:()=>G(!1),onArchiveClicked:v,onUnarchiveClicked:x,onMarkAsReadClicked:y,onMarkAsUnreadClicked:k}),(0,O.jsxs)(z().A,{href:A,hovered:J,ignoreLocalHoverState:!0,style:ie.mainClickTargetButton,onClick:ae,hoveredStyle:ie.mainClickTargetButtonHovered,disabled:!Boolean(A),pressedStyle:ie.buttonPressed,"aria-labelledby":pe,children:[(0,O.jsx)("div",{style:ie.header,children:d?(0,O.jsx)(ge,{icon:d.icon,header:d.title,timestamp:K,titleAriaId:pe,showBlueDot:X&&!q,count:p}):(0,O.jsx)(ge,{notificationTitleStore:P,timestamp:K,titleAriaId:pe,showBlueDot:X&&!q,count:p})}),(0,O.jsxs)("div",{style:ie.subheaderAndBody,children:[c&&(0,O.jsx)("div",{style:ie.subheader,children:c}),u&&(0,O.jsx)("div",{style:ie.body,children:u}),s&&(0,O.jsx)("div",{style:ie.children,children:s})]})]}),!N&&(0,O.jsx)("div",{style:ie.divider})]})})})},t.id)}const le=12-re,ce=12-re,ue="100ms ease-out";function he(e){const{notification:t,rootStore:i,isMobile:o,isHovered:n,isFirst:a,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c,onMouseEnter:u,onMouseLeave:h}=e,p=(0,r().IS)((()=>({container:{display:"flex",alignItems:"flex-start",position:"relative",zIndex:1},body:{transition:`opacity ${ue}`,opacity:o||n?1:0,position:"absolute",right:le,top:ce+(o?-3:0)+(a?0:re)}})),[o,n,a]);return t?(0,O.jsx)("div",{style:p.container,onMouseEnter:u,onMouseLeave:h,children:(0,O.jsx)("div",{style:p.body,children:(0,O.jsx)(A().hR,{notification:t,rootStore:i,onArchiveClicked:s,onUnarchiveClicked:d,onMarkAsReadClicked:l,onMarkAsUnreadClicked:c})})}):null}const pe=14,ve=12,fe=8;function ge(e){const{notificationTitleStore:t,icon:i,header:d,timestamp:l,showBlueDot:c,count:u}=e,v=(0,n().Y0)(),g=(0,h().tz)(),m=v.isMobile,[b,C]=(0,o.useState)(!1),[j,A]=(0,o.useState)(!1),T=(0,S().nl)(l,{useUltraCompactFormat:!0}),w=(0,S().x$)(l),R=(0,a().K8)((()=>{if(t instanceof L().Bv)return t}),[t]),{actorStore:z,actorName:I}=(0,a().K8)((()=>{if(t instanceof L().LU||t instanceof L().vK||t instanceof L().pH){return t?{actorStore:t,actorName:t.getDisplayName(g)}:{actorStore:void 0,actorName:void 0}}return{actorStore:void 0,actorName:void 0}}),[t,g]),W=(0,a().K8)((()=>{if(!(t instanceof L().pS||t instanceof L().LU||t instanceof L().vK||t instanceof L().pH))return t}),[t]),K=(0,a().K8)((()=>{var e;if(W)return null===(e=W.getModel())||void 0===e?void 0:e.getRenderIcon({getRecordModel:W.getRecordModel})}),[W]),F=(0,a().K8)((()=>!!R&&R.isEmptyPage()),[R]),$=(0,a().K8)((()=>null==R?void 0:R.isDefined()),[R]),_=(0,o.useCallback)((()=>{C(!0),A(!1)}),[]),Q=p().nF((()=>{A(!0)}),200,{leading:!0}),V=(0,o.useCallback)((()=>{C(!1),A(!1),y().Ol(window,"scroll",Q,!0)}),[Q]),Y=(0,o.useCallback)((e=>(0,O.jsx)(H().yf,{store:R,events:e})),[R]);(0,o.useEffect)((()=>(y().P4(window,"scroll",Q,!0),()=>y().Ol(window,"scroll",Q,!0))),[Q]);const Z=(0,r().IS)((e=>({container:{display:"flex",flexDirection:"row",minWidth:0,width:"100%",marginTop:2},iconHeaderOverride:{display:"flex",flexDirection:"row",gap:8,alignItems:"center"},headerMobile:{fontSize:pe,minWidth:0},header:{display:"inline-grid",gridAutoFlow:"column",justifyContent:"space-between",fontSize:pe,gap:12,minWidth:0},time:{display:"flex",gap:8,fontSize:ve,color:e.text.tertiary,whiteSpace:"nowrap",...m&&{display:"inline"},marginTop:pe-ve},pageTitleAndTimestamp:{display:"flex",flex:1,flexDirection:"column",gap:fe,minWidth:0},pageTitleMockedButton:{minWidth:0,display:"flex",alignItems:"center",gap:8,borderRadius:3,paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:5,marginTop:-2,marginBottom:-2,marginLeft:-3,marginRight:-5,background:b&&($||t)?e.state.hover:void 0},recordTitle:{fontSize:14,fontWeight:f().Wy.medium},statusDotContainer:{display:"flex",alignItems:"center"},statusDotSpacer:{width:se,flexShrink:0},count:{lineHeight:"21px",fontSize:12,color:e.text.secondary,paddingTop:.5}})),[m,b,t,$]),G=!0!==j&&void 0;return(0,O.jsxs)("div",{style:Z.container,children:[(0,O.jsx)("div",{style:Z.pageTitleAndTimestamp,children:(0,O.jsxs)("div",{style:m?Z.headerMobile:Z.header,children:[i&&d&&(0,O.jsxs)("div",{style:Z.iconHeaderOverride,children:[i,(0,O.jsx)("div",{style:Z.recordTitle,children:d})]}),(R||t)&&!i&&!d&&(0,O.jsx)(ae,{disabled:!$&&!t,children:(0,O.jsx)(D().A,{originGap:3,disableTooltip:!$,alignment:B().C.Start,placement:B().W.Bottom,renderTooltip:Y,closeDelay:0,noStyle:!0,textWrap:!0,forceVisibleState:G,render:e=>(0,O.jsxs)("div",{style:Z.pageTitleMockedButton,...(0,k().A)(e,{onMouseEnter:_,onMouseLeave:V}),children:[z&&I?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(me,{actorStore:z,avatar:void 0,size:16}),(0,O.jsx)("div",{style:Z.recordTitle,children:I})]}):W?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(N().B,{disabled:!0,icon:K,isEmptyPage:F,size:16}),(0,O.jsx)(U().A,{store:W,style:Z.recordTitle,underline:!0})]}):null,u?(0,O.jsx)("div",{style:Z.count,children:u}):null]})})}),(0,O.jsxs)("div",{style:Z.time,className:x().Cxn,children:[(0,O.jsx)(P().A,{text:T,tooltipText:w,icon:s().k}),c?(0,O.jsx)("div",{style:Z.statusDotContainer,children:(0,O.jsx)(E().m,{size:se})}):(0,O.jsx)("div",{style:Z.statusDotSpacer})]})]})}),m&&(0,O.jsx)("div",{style:{width:M().UM-le,flexShrink:0}})]})}function me(e){const{actorStore:t,avatar:i}=e,o=e.size??28;return t?t.table===c().GP?(0,O.jsx)(W().A,{botStore:t,size:o}):t.table===u().oo?(0,O.jsx)(K().A,{userStore:t,size:o}):t.table===d().yj?(0,O.jsx)(K().A,{userStore:void 0,size:o}):void(0,v().HB)(t):i?(0,O.jsx)(K().A,{avatar:i,size:o}):(0,O.jsx)(K().A,{userStore:void 0,size:o})}const xe=o.memo(de)},683097:(e,t,i)=>{i.d(t,{A:()=>a});var o=i(296540),n=()=>i(484714);function a(e){const t=(0,n().v3)(),{onLongPress:i,hapticsEnabled:a=!0,timeout:r=300}=e,s=(0,o.useCallback)((()=>{var e,o,n;a&&(null!==(e=t.mobileNative)&&void 0!==e&&e.buzz?t.mobileNative.buzz():null===(o=(n=window.navigator).vibrate)||void 0===o||o.call(n,20));i()}),[t.mobileNative,a,i]),d=(0,o.useRef)(),l=(0,o.useRef)(0),c=(0,o.useRef)(0),u=(0,o.useCallback)((()=>clearTimeout(d.current)),[]);(0,o.useEffect)((()=>u),[u]);return{onTouchStart:(0,o.useCallback)((()=>{clearTimeout(d.current),d.current=setTimeout(s,r)}),[r,s]),onTouchMove:(0,o.useCallback)((e=>{const t=e.touches[0].clientX,i=e.touches[0].clientY;(Math.abs(t-l.current)>50||Math.abs(i-c.current)>50)&&clearTimeout(d.current)}),[]),onTouchEnd:u,onTouchCancel:u}}}}]);