"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[5287,90871],{346:(e,t,n)=>{n.d(t,{MG:()=>f,T1:()=>m,a1:()=>x,dt:()=>h,kg:()=>y,lC:()=>v,n_:()=>g});var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(187174),s=()=>n(645873),l=()=>n(941463),c=()=>n(441199),d=()=>n(749687),u=()=>n(737230),p=()=>n(756114);const m=new(s().O2)("PerformanceToolbar",(()=>Promise.all([n.e(96346),n.e(16471),n.e(85864),n.e(92845),n.e(71718),n.e(21194),n.e(17989),n.e(90625),n.e(37580),n.e(45624)]).then(n.bind(n,140401)))),f=(0,s()._h)(m,(e=>e.PerformanceToolbar)),h=(0,s()._h)(m,(e=>e.PerformanceToolbarSettings));function y(){const e=(0,o().v3)();return(0,i().K8)((()=>(0,p().D)(e,e.RouterStore.state)),[e])}function g(){const e=(0,o().v3)(),t=b("PerformanceToolbarStore"),n=b("isPerformanceToolbarVisible");return(0,i().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function v(){const e=b("PerformanceToolbarStore");return(0,i().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function x(){const e=(0,o().v3)(),t=b("createPerformanceToolbarMouseListeners"),n=b("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:p,secondarySidebarWidth:m,updateSidebarExpanded:f,updateSidebarWidth:h}=(0,i().K8)((()=>({sidebarExpanded:d().sidebarExpandedStore.state,sidebarWidth:d().sidebarWidthStore.state,secondarySidebarExpanded:c().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,r.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,p,m,f,h)}),[t,e,n,a,s,p,m,f,h])}function b(e){const t=y(),[{value:n}]=(0,a().Yb)((()=>t?m.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},51194:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(296540),o=()=>n(525128);function i(){const e=(0,r.useRef)(!1);return(0,o().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},63467:(e,t,n)=>{n.d(t,{y:()=>d});var r=()=>n(637997),o=()=>n(267419);const i={ko:()=>n.e(2268).then(n.bind(n,224434)),es:()=>n.e(95264).then(n.bind(n,196425)),de:()=>n.e(35390).then(n.bind(n,653703)),fr:()=>n.e(3272).then(n.bind(n,94677)),pt:()=>n.e(27315).then(n.bind(n,766869)),zh:()=>n.e(69945).then(n.bind(n,516814)),ja:()=>n.e(77757).then(n.bind(n,824432)),da:()=>n.e(9423).then(n.bind(n,440761)),fi:()=>n.e(59337).then(n.bind(n,462135)),nb:()=>n.e(2040).then(n.bind(n,937314)),nl:()=>n.e(51106).then(n.bind(n,530897)),sv:()=>n.e(53631).then(n.bind(n,895222))};let a=!1,s=!1;async function l(e){for(const[n,o]of Object.entries(e.emojiLocaleKeywords)){var t;r().fB[n]={...r().fB[n],keywords:[...o,...(null===(t=r().fB[n])||void 0===t?void 0:t.keywords)||[]]}}await o().A.waitUntilLoaded(),o().A.update((t=>{let{emojiByName:n,...r}=t;return{...r,emojiByName:{...n,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=n(662303).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,n(279900).A)((async()=>{await async function(){s||(await l(await n.e(51872).then(n.bind(n,443716))),s=!0)}(),await c()}))},105819:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>o});n(296540);const r={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},o=(0,n(340498).wt)("pencilLine",r)},198048:(e,t,n)=>{n.d(t,{C:()=>a});var r=n(296540),o=()=>n(51194),i=()=>n(610104);function a(){const e=(0,o().a)(),[t,n]=(0,r.useState)(0),a=(0,r.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,r.useCallback)((()=>i().Gt.postRender(a)),[a]),t]}},203066:(e,t,n)=>{n.d(t,{N:()=>c});var r=n(296540);class o extends r.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function i({children:e,isPresent:t}){const n=(0,r.useId)(),i=(0,r.useRef)(null),a=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:e,height:r,top:o,left:s}=a.current;if(t||!i.current||!e||!r)return;i.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${r}px !important;\n            top: ${o}px !important;\n            left: ${s}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),r.createElement(o,{isPresent:t,childRef:i,sizeRef:a},r.cloneElement(e,{ref:i}))}const a=({children:e,initial:t,isPresent:o,onExitComplete:a,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,n(328601).M)(s),p=(0,r.useId)(),m=(0,r.useMemo)((()=>({id:p,initial:t,isPresent:o,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[o]);return(0,r.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[o]),r.useEffect((()=>{!o&&!u.size&&a&&a()}),[o]),"popLayout"===d&&(e=r.createElement(i,{isPresent:o},e)),r.createElement(n(786719).t.Provider,{value:m},e)};function s(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:o=!0,onExitComplete:i,exitBeforeEnter:s,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,n(285238).V)(!s,"Replace exitBeforeEnter with mode='wait'");const u=(0,r.useContext)(n(29473).L).forceRender||(0,n(198048).C)()[0],p=(0,n(51194).a)(),m=function(e){const t=[];return r.Children.forEach(e,(e=>{(0,r.isValidElement)(e)&&t.push(e)})),t}(e);let f=m;const h=(0,r.useRef)(new Map).current,y=(0,r.useRef)(f),g=(0,r.useRef)(new Map).current,v=(0,r.useRef)(!0);if((0,n(525128).E)((()=>{v.current=!1,function(e,t){e.forEach((e=>{const n=l(e);t.set(n,e)}))}(m,g),y.current=f})),(0,n(757491).l)((()=>{v.current=!0,g.clear(),h.clear()})),v.current)return r.createElement(r.Fragment,null,f.map((e=>r.createElement(a,{key:l(e),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:c,mode:d},e))));f=[...f];const x=y.current.map(l),b=m.map(l),_=x.length;for(let n=0;n<_;n++){const e=x[n];-1!==b.indexOf(e)||h.has(e)||h.set(e,void 0)}return"wait"===d&&h.size&&(f=[]),h.forEach(((e,n)=>{if(-1!==b.indexOf(n))return;const o=g.get(n);if(!o)return;const s=x.indexOf(n);let v=e;if(!v){const e=()=>{h.delete(n);const e=Array.from(g.keys()).filter((e=>!b.includes(e)));if(e.forEach((e=>g.delete(e))),y.current=m.filter((t=>{const r=l(t);return r===n||e.includes(r)})),!h.size){if(!1===p.current)return;u(),i&&i()}};v=r.createElement(a,{key:l(o),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},o),h.set(n,v)}f.splice(s,0,v)})),f=f.map((e=>{const t=e.key;return h.has(t)?e:r.createElement(a,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),r.createElement(r.Fragment,null,h.size?f:f.map((e=>(0,r.cloneElement)(e))))}},279900:(e,t,n)=>{function r(e){let t,n,r;return async function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t?(r=i,n||(n=t.then((()=>(n=void 0,t=e(...r),t))),n)):(t=e(...i),t)}}n.d(t,{A:()=>r})},299177:(e,t,n)=>{n.d(t,{A:()=>i});class r extends(()=>n(757695))().default{getInitialState(){return{}}}const o=new r;n(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",o);const i=o},344482:(e,t,n)=>{n.d(t,{A:()=>o});n(898992),n(672577);class r extends(()=>n(959180))().A{findTableHeaderCell(e,t){return this.find((n=>n.collectionContextStore===e&&n.property===t))}}const o=new r},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>I,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>C,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>w,MAX_RECURRENCE_INTERVAL:()=>g,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>v,RRULE_WEEKDAYS_MAP:()=>y,adjustedStartDateIfPossible:()=>M,areRecurrenceSchedulesEqual:()=>W,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>E,getNewEndTimestamp:()=>j,getNextDateUtc:()=>A,getRecurrenceAfter:()=>k,isRunningBetweenMidnightAnd3AM:()=>R,isValidRecurrenceInterval:()=>x,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>_,templateAncestorsViolateRecurrenceNesting:()=>S});n(898992),n(354520),n(581454);var r=()=>n(244641);n(944114);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...o(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(496603),a=()=>n(534177),s=()=>n(720665),l=()=>n(597777),c=()=>n(869190),d=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),h={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},y={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},g=99,v=999;function x(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=g}function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function _(e){const{start_date:t,frequency:n,interval:r,weekdays:i,timezone:s,hour:c,minute:d}=e,u="week"===n&&i?i.map((e=>y[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=o(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return y[t].nth(n)})):(0,a().HB)(e.monthly_restriction)),new p({freq:h[n],dtstart:(0,l().eU)(t),interval:r,byweekday:u,tzid:s,byhour:c??0,byminute:d??0,bysecond:0,...m})}const w=1,C=1;function S(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,o=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>w,a=n.length>=C;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:o}}function M(e){var t;const{recurrence:n,afterDate:o}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=o)return n;let i=r().c9.fromMillis(n.start_date,{zone:"utc"});const a=r().c9.fromMillis(o,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/n.interval);i=i.plus({years:e*n.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/n.interval);i=i.plus({months:e*n.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/n.interval);i=i.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/n.interval);i=i.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(i.toMillis())}}function k(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=_(M({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function R(e){return 0===e.hour||1===e.hour||2===e.hour}function A(e){return _(e).after((0,l().eU)((0,l().Rz)()))||void 0}function E(e){const{recurrence:t,intl:n}=e,o=A(B(t));if(!o)return;const i=R(t),a=r().c9.fromJSDate(o).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,c().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:s,time:e})}}function T(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,c().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const I=100;function P(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function j(e,t,n){return e.plus(n-t)}function L(e,t){const n=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function B(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?L(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function W(e,t){const n=i().fN(e,(e=>void 0!==e)),r=i().fN(t,(e=>void 0!==e));return i().n4(n,r)}},406533:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,questionMarkCircleIcon:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,n(340498).wt)("questionMarkCircle",o)},412532:(e,t,n)=>{n.d(t,{l:()=>o});n(296540);const r={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M13.165 12.75a.8.8 0 0 0 .69-1.203L8.692 2.693a.8.8 0 0 0-1.382 0l-5.165 8.854a.8.8 0 0 0 .691 1.203z"})},o=(0,n(340498).wt)("arrowCaretUpFillSmall",r)},422540:(e,t,n)=>{n.d(t,{$0:()=>y,Fx:()=>C,Ge:()=>m,I3:()=>u,Kj:()=>_,PP:()=>S,TK:()=>M,Yy:()=>d,aE:()=>k,cQ:()=>w,kH:()=>f,m7:()=>p,nq:()=>x,nv:()=>g,tj:()=>h});n(898992),n(354520),n(737550);var r=()=>n(496603),o=()=>n(534177),i=()=>n(970013),a=()=>n(651124),s=()=>n(349835),l=()=>n(390066);(0,o().u0)((e=>(0,o().O9)(e)&&(0,o().O9)(e.target)&&(0,o().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const c={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},d={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(c[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c,sourcePropertyIds:d}=e,p=(d??(0,o().uv)(n)).filter(((t,r,o)=>{const a=n[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!s||s([t,a],r,n)))}));if(0===p.length)return[];if(!t||!1===c)return p;const m=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:s}=e,c=(0,o().uv)(n).filter(((e,t,r)=>{const o=n[e];return!(!o||!(0,i().JY)(o))}));if(0===c.length)return[];if(!t||!1===s)return c;const d=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(c,(e=>d.findIndex((t=>t.property===e))))}function f(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const h={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function y(e){return Boolean(h[e.type])}function g(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:c}=e,d=(0,o().uv)(n).filter(((e,t,r)=>{var o;const a=n[e];return!(!a||!h[a.type])&&((!(0,i().$M)(a)||null===(o=(0,i().om)(a))||void 0===o||!o.auto_update_on_edit)&&(!s||s([e,a],t,n)))}));if(0===d.length)return[];if(!t||!1===c)return d;const u=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return r().Ul(d,(e=>u.findIndex((t=>t.property===e))))}const v={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function x(e){return v[e.type]}const b={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function _(e){return b[e.type]}function w(e){return 0===e}function C(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function S(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function M(e){const{collectionSchema:t,property:n,type:r}=e,o=null==t?void 0:t[n];return!o||("action"===r?!u(o):!h[o.type])}function k(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:r,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const s="some"===r.type&&r.some,l="all"===r.type&&r.all;if((s||l||[]).some((e=>S({collectionSchema:n,property:e.property})||M({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const c="some"===r.type&&(!(0,o().O9)(r.some)||0===r.some.length),d="all"===r.type&&(!(0,o().O9)(r.all)||0===r.all.length);if(!e&&("none"===r.type||c||d)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},442277:(e,t,n)=>{n.d(t,{B:()=>o});n(296540);var r=n(474848);const o=(0,n(340498).wt)("arrowRightSmaller",{viewBox:"0 0 16 16",svg:(0,r.jsx)("path",{d:"M15.383 8.352a.877.877 0 01-.274.64l-5.156 5.14a.864.864 0 01-.617.266.831.831 0 01-.602-.234.795.795 0 01-.234-.586c0-.12.02-.232.063-.336a.912.912 0 01.187-.273l1.75-1.766 2.914-2.656.274.5-2.711.156H1.484c-.26 0-.471-.078-.632-.234a.851.851 0 01-.235-.617c0-.256.078-.461.235-.618a.856.856 0 01.632-.242h9.493l2.71.164-.273.508L10.5 5.5 8.75 3.727a.946.946 0 01-.188-.266.917.917 0 01-.062-.344c0-.234.078-.43.234-.586a.831.831 0 01.602-.234.79.79 0 01.328.07c.104.047.203.117.297.211l5.148 5.133a.877.877 0 01.274.64z"})})},464699:(e,t,n)=>{n.d(t,{b:()=>o});n(296540);var r=n(474848);const o=(0,n(340498).wt)("plusThick",{viewBox:"0 0 14 14",svg:(0,r.jsx)("path",{d:"M2 7.16357C2 7.59692 2.36011 7.95093 2.78735 7.95093H6.37622V11.5398C6.37622 11.9731 6.73022 12.3271 7.16357 12.3271C7.59692 12.3271 7.95093 11.9731 7.95093 11.5398V7.95093H11.5398C11.9731 7.95093 12.3271 7.59692 12.3271 7.16357C12.3271 6.73022 11.9731 6.37622 11.5398 6.37622H7.95093V2.78735C7.95093 2.36011 7.59692 2 7.16357 2C6.73022 2 6.37622 2.36011 6.37622 2.78735V6.37622H2.78735C2.36011 6.37622 2 6.73022 2 7.16357Z"})})},490044:(e,t,n)=>{n.d(t,{A:()=>p});n(296540);var r=()=>n(484714),o=()=>n(847249),i=()=>n(401497),a=()=>n(500066),s=()=>n(159588),l=()=>n(963589),c=()=>n(644914),d=n(474848);function u(){const e=(0,i().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,a().G)(e.icon)})}function p(e){var t;const n=(0,r().v3)(),a=n.device.isMobile,{isTablet:p}=(0,r().Y0)(),m=(0,l().X)("tablet_refresh_gate"),f=(0,o().K8)((()=>{var t,r;if(a)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(r=e.style)||void 0===r?void 0:r.paddingLeft:10)}),[n.WindowSizeStore,a,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),h=(0,i().IS)((t=>({wrapper:{...a?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:p&&m?4:8,paddingBottom:p&&m?4:8,paddingLeft:f,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:c().Zr,paddingTop:4,paddingBottom:4,...(0,s().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:a?28:22,height:a?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:a?24:c().ry,height:a?24:c().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!a?"clip":"ellipsis",...e.childrenStyle}})),[a,p,m,f,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,d.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:h.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:h.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:h.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(u,{})]}),(0,d.jsx)("div",{style:h.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:h.right,children:e.right})]})}},526278:(e,t,n)=>{n.d(t,{w:()=>o});n(296540);const r={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M2.411 9.79a.6.6 0 0 1 .147-.232l5.4-5.4a.625.625 0 1 1 .884.884L4.509 9.375H17a.625.625 0 1 1 0 1.25H4.509l4.333 4.333a.625.625 0 1 1-.884.884l-5.4-5.4a.62.62 0 0 1-.147-.651"})},o=(0,n(340498).wt)("arrowStraightLeft",r)},546461:(e,t,n)=>{n.d(t,{EC:()=>w,To:()=>_,YC:()=>C,or:()=>b,u:()=>x});n(16280);var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(496506),s=()=>n(322867),l=()=>n(959013),c=()=>n(534177),d=()=>n(813297),u=()=>n(862292),p=()=>n(698331),m=()=>n(645873),f=()=>n(190019),h=()=>n(76190),y=n(474848);const g=new WeakMap,v=(0,r.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});v.displayName="AutomationContext";function x(e){const{automationStore:t,children:n,contextType:r}=e,x=(0,o().v3)(),b=(0,l().tz)(),{value:_}=(0,m().fJ)(u().T.formulas),{value:w}=(0,m().fJ)(d().QV.automationTypecheck),C=(0,h().n)(t),S=(0,i().K8)((()=>{if(!_)return{error:new(s().N9)("Missing formulas dependency")};if(!w)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:n,automationTypecheckModule:r,contextType:o,formulasModule:i,intl:s,isSubscribed:l}=e,d=g.get(n);if(d)return d;{const e=new(a().default)((()=>{const e=n.getTriggerType();let a=o;return(0,c().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,f().Z)({environment:t,automationStore:n,automationTypecheckModule:r,contextType:a,formulasModule:i,intl:s,isSubscribed:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return g.set(n,e),e}}({environment:x,automationStore:t,automationTypecheckModule:w,contextType:r,formulasModule:_,intl:b,isSubscribed:C});return e.state}),[x,t,w,r,_,b,C]);return(0,y.jsx)(v.Provider,{value:{automationStore:t,typecheckResult:S,contextType:r,defined:!0},children:n})}function b(e){const{automationStore:t,children:n}=e,r=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,y.jsx)(x,{automationStore:t,contextType:(0,p().H8)(r??"event"),children:n})}function _(e){var t;return null===(t=g.get(e))||void 0===t?void 0:t.state}function w(){const e=r.useContext(v);if(!1===e.defined)throw new Error("No automation context found!");return e}function C(){return r.useContext(v)}},555267:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(296540),o=()=>n(401497),i=()=>n(62856),a=()=>n(331542),s=n(474848);function l(e){let{loadingMessage:t}=e;const n=(0,o().DP)(),l=(0,i().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(r.Fragment,{children:[(0,s.jsx)(a().A,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},566910:(e,t,n)=>{n.d(t,{e:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"m4.897 3.086-.122-.143a.625.625 0 0 0-.95.814l1.347 1.57c-1.762.91-3.195 2.304-4.083 3.997a1.47 1.47 0 0 0 0 1.362c1.61 3.07 5.011 5.155 8.911 5.155 1.282 0 2.51-.225 3.637-.637l1.588 1.853a.625.625 0 0 0 1.042-.67L4.989 3.229a.6.6 0 0 1-.093-.143M2.194 9.905c.807-1.538 2.15-2.807 3.816-3.599L7.4 7.928a3.326 3.326 0 0 0 4.252 4.961l1.107 1.292a9.4 9.4 0 0 1-2.76.41c-3.459 0-6.42-1.848-7.805-4.486a.22.22 0 0 1 0-.2m6.696.097q0-.151.039-.29l1.194 1.393q-.06.007-.124.007a1.11 1.11 0 0 1-1.109-1.11m7.012 4.038a9.4 9.4 0 0 0 3.01-3.354 1.47 1.47 0 0 0 0-1.362C17.302 6.254 13.9 4.169 10 4.169c-.805 0-1.588.089-2.339.257l.94 1.096a9.5 9.5 0 0 1 1.4-.103c3.458 0 6.42 1.848 7.804 4.486a.22.22 0 0 1 0 .2 8.14 8.14 0 0 1-2.722 2.98z"}),(0,r.jsx)("path",{d:"M13.205 10.893a3.33 3.33 0 0 0-3.596-4.194z"})]})},i=(0,n(340498).wt)("eyeSlash",o)},578194:(e,t,n)=>{n.d(t,{r:()=>r});const r=(0,n(583835).Dv)("importEvernote")},603815:(e,t,n)=>{n.d(t,{A$:()=>M,JQ:()=>k,Vn:()=>C,s4:()=>S});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var r=()=>n(857639),o=()=>n(585515),i=()=>n(577449),a=()=>n(388821),s=()=>n(179034),l=()=>n(545285),c=()=>n(534177),d=()=>n(449506),u=()=>n(780054),p=()=>n(989423),m=()=>n(870618),f=()=>n(303626),h=()=>n(14307),y=()=>n(245865),g=()=>n(540758),v=()=>n(670631),x=()=>n(508496),b=()=>n(571963),_=()=>n(603815),w=()=>n(108944);async function C(e){const{environment:t,request:n,abortSignal:r,prefetchCacheKey:o,headers:i}=e;return(0,b().updateLoadCachedPageChunkCalledAt)(),h().isConnected()||h().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:n,abortSignal:r,prefetchCacheKey:o,headers:i}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:n,abortSignal:r,prefetchCacheKey:o,headers:i})}async function S(e){const{mode:t,environment:n,request:c,isFirstChunk:d,abortSignal:h}=e,y={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await _().A$(n,{id:c.page.id,table:s().ev}),null!=h&&h.aborted))throw new Error("Abort signal received");const x=a().RecordMapWithRole.create(),b=[];let w=!1;const C=new Set,S=await o().T(y,i().h.fromMonomorphicFunctionUnsafe((async e=>{const r=await m().h7({environment:n,pointer:e,abortSignal:h,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=h&&h.aborted)throw new Error("Abort signal received");if(r)return x.setModelAndRole(e,r.model,r.role),r.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!C.has(e.id)&&d){if(void 0===v().A.state.offlinePages)return b.push(e),void(w=!0);if(void 0===v().A.state.offlinePages||!g().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);b.push(e)}})),((e,t,n,r)=>{f().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${n})`),null!=r&&r.suppressErrorOnClient&&C.add(t.id)}));if(w&&(await v().A.waitUntil((()=>void 0!==v().A.state.offlinePages)),!g().Bd(c.page.id))){const[e]=b;throw new Error(`Record not found: ${e.table},${e.id}`)}if(b.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:n,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&r().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:b}})})),null!=h&&h.aborted)throw new Error("Abort signal received");return{recordMap:x.toJson(),cursor:S.cursorValue}}async function M(e,t){const n=e.currentUser.id;if(!n||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:n})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),y().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function k(e){if(!x().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let n=0;const r=()=>n>=50,o=e=>{"space"!==(null==e?void 0:e.table)&&(r()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),n++))};if(e.isReady())for(const a of(0,w().E)(e))o(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);o(t.getModel({table:"notion_user",id:e.userId}));let n=0;for(const e of t.getPointersByTable("notion_user")){if(r()||n>=10)break;n++,o(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:n}=e;if(void 0!==n)return{pointer:t,version:n}})).filter(c().O9);return i.length?i:void 0}},698331:(e,t,n)=>{n.d(t,{$X:()=>i,H8:()=>a,x2:()=>o});var r=()=>n(534177);function o(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,r().O9)(t)&&o(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,r().HB)(e)}},725649:(e,t,n)=>{function r(e){return!(!e||"askUserToPick"in e)}function o(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>o,K$:()=>r,j6:()=>i})},736767:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(296540),o=n(474848);function i(e,t){return(0,o.jsx)(n(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const a=(0,r.forwardRef)(i)},748539:(e,t,n)=>{n.d(t,{f:()=>r});const r=new(n(645873).O2)("pageCovers",(async()=>{const{pageCovers:e}=await n.e(40198).then(n.bind(n,519737));return e}))},756114:(e,t,n)=>{n.d(t,{D:()=>r});function r(e,t){t.route.name;return!1}},757491:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(296540);function o(e){return(0,r.useEffect)((()=>()=>e()),[])}},824160:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var r=()=>n(484714),o=()=>n(401497),i=()=>n(704152),a=n(474848);function s(e){const t=(0,r().Y0)(),n=(0,o().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(i().A,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(i().A,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},843189:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(296540),o=()=>n(960715),i=n(474848);const a=r.forwardRef(((e,t)=>{let{children:r,color:a,disabled:s,icon:l,iconStyle:c,isLoading:d,shape:u="default",size:p="md",style:m,...f}=e;const h=(0,n(401497).IS)((e=>{const t=a?`${a}Primary`:"primary",i=a||"regular",f=a?`${a}Hover`:"primaryHover",h=a?`${a}Pressed`:"primaryPressed";return{button:{...(0,o().qq)({shape:u,size:p,hasIconOnly:Boolean(l)&&!r}),justifyContent:"center",color:e.text[t],background:e.tint[i],opacity:s||d?.3:1,fontWeight:n(284371).Wy.medium,...m},hovered:{background:s?e.tint[i]:e.tint[f]},pressed:{background:s?e.tint[i]:e.tint[h]},icon:{...(0,o().D3)({size:p,hasIconOnly:!r}),...c}}}),[r,a,s,l,c,d,u,p,m]);return(0,i.jsxs)(n(197190).A,{ref:t,style:h.button,hoveredStyle:h.hovered,pressedStyle:h.pressed,disabled:s,isLoading:d,...f,children:[l?l(h.icon):null,r]})}));a.displayName="TintButton"},888325:(e,t,n)=>{function r(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>r})},901226:(e,t,n)=>{n.r(t),n.d(t,{CollectionLinkExistingModal:()=>N});n(898992),n(354520),n(581454);var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(670913),l=()=>n(592269),c=()=>n(289915),d=()=>n(416504),u=()=>n(689094),p=()=>n(798880),m=()=>n(245241),f=()=>n(959013),h=()=>n(284371),y=()=>n(612008),g=()=>n(751156),v=()=>n(704152),x=()=>n(760217),b=()=>n(364280),_=()=>n(285790),w=()=>n(297872),C=()=>n(623580),S=()=>n(710149),M=()=>n(928600),k=()=>n(939740),R=()=>n(614505),A=()=>n(16006),E=()=>n(89924),T=()=>n(586481),I=()=>n(862292),P=()=>n(186445),j=()=>n(873050),L=()=>n(722872),B=()=>n(135599),W=()=>n(645873),U=()=>n(508496),D=n(474848);function N(e){let{collectionContextStore:t,groupFormat:n,onClose:l,onAddOrLink:u}=e;const h=(0,f().tz)(),y=(0,o().v3)(),g=(0,i().K8)((()=>t.collectionStore()),[t]),[v,x]=r.useState(""),b=(0,r.useMemo)((()=>n?[n]:[]),[n]),_=(0,i().K8)((()=>{var e;const n=(0,j().Ay)(t,!1);if(!n)return;const r=t.collectionStore();if(!r)return;const o=y.currentUser.id;return(0,c().oR)({context:{schema:r.getSchema(),userId:o,userTimeZone:(0,d().P)(),userStartOfWeek:P().XX.state,relativeVariableResult:t.relativeVariableStore.state,currentPageInRelatedCollection:null===(e=t.viewsModuleContextStore.currentPageStore())||void 0===e?void 0:e.id,intl:h,collectionFeatureGates:(0,s().v)({experimentService:U().default,actor:o?{table:p().oo,id:o}:void 0,spaceId:r.getSpaceId()})},propertyMapping:r.getPropertyMapping(),filter:n})}),[t,y.currentUser.id,h]),{results:C,isResultsLoading:S}=(0,B().W)({type:m().Vz.BlocksInCollection,collectionId:(null==g?void 0:g.id)??"",query:v,limit:50,source:"link_existing_menu",filters:{requireEditPermissions:!0,excludeTemplates:!0,navigableBlockContentOnly:!0},options:{disable:!Boolean(null==g?void 0:g.id)}}),{value:k}=(0,W().fJ)(I().T.formulas),R=(0,i().K8)((()=>{const e=new Map,t=new Map;return C.filter((n=>{let{store:r}=n;const o=r.getModel();return!_||!o||!_({block:o,getRecordModel:r.getRecordModel,propertyMapping:null==g?void 0:g.getPropertyMapping(),resultCache:e,regExpCache:t,experimentService:U().default,formulasModule:k})})).slice(0,10)}),[g,_,C,k]),A=(0,a().IS)((()=>({menuContent:y.device.isMobile?{maxHeight:180,width:400}:{}})),[y.device]);return(0,D.jsx)(w().A,{capture:!0,allowMenuList:!0,allowEsc:!0,allowUndo:!0,allowTabUntab:!0,render:()=>(0,D.jsx)(M().A,{menuType:L().gu.Popup,header:(0,D.jsx)(z,{searchQuery:v,onSearchQueryChange:x}),footer:v&&(0,D.jsx)(F,{searchQuery:v,collectionContextStore:t,groupsPointer:b,onClose:l,onAddOrLink:u}),children:(0,D.jsx)("div",{style:A.menuContent,children:S?(0,D.jsx)(V,{}):(0,D.jsx)(H,{searchResults:R,collectionContextStore:t,groupsPointer:b,onClose:l,onAddOrLink:u})})})})}function H(e){let{searchResults:t,collectionContextStore:n,groupsPointer:r,onClose:s,onAddOrLink:c}=e;const u=(0,o().v3)(),p=(0,f().tz)(),{collectionStore:m,icon:h}=(0,i().K8)((()=>{const e=n.collectionStore();return{collectionStore:e,icon:null==e?void 0:e.getIcon()}}),[n]),y=(0,a().IS)((e=>({sectionTitleWrapper:{display:"flex",alignItems:"center",gap:4},collectionTitleWrapper:{display:"flex",alignItems:"center",color:e.text.primary,gap:2}})),[]),v=(0,D.jsx)("div",{style:y.sectionTitleWrapper,children:(0,D.jsx)(f().sA,{id:"CollectionLinkExistingModal.resultsSection",defaultMessage:"Link a page from {relationName}",values:{relationName:(0,D.jsxs)("div",{style:y.collectionTitleWrapper,children:[(0,D.jsx)(R().B,{icon:h,disabled:!0,isEmptyPage:!0,size:12}),m&&(0,D.jsx)(A().A,{store:m})]})}})});return(0,D.jsx)(k().Ay,{type:k().Oh.Vertical,initialFocus:0,sections:[{key:"results",showNoResultMessage:!0,items:t.map((e=>{let{store:t}=e;return function(e){let{blockStore:t,collectionContextStore:n,groupsPointer:r,onClose:o,onAddOrLink:i,environment:a,intl:s}=e;return{key:t.id,action:()=>{const e=n.collectionStore();if(!e)return;const o=t.getModel();o&&g().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:a,canUndo:!0,perform:c=>{var u;const{update:p}=l().H3({block:o,schema:e.getSchema(),propertyMapping:e.getPropertyMapping(),userFilterContext:{userId:a.currentUser.id,userTimeZone:(0,d().P)(),userStartOfWeek:P().XX.state},filter:(0,j().Ay)(n,!1),groupBy:n.getGroupByAndGroupFormats().groupBy,groupsPointer:r,relativeVariableResult:n.relativeVariableStore.state,currentPageInRelatedCollection:null===(u=n.viewsModuleContextStore.currentPageStore())||void 0===u?void 0:u.id,getRecordModel:e.getRecordModel,intl:s,resultCache:new Map,regExpCache:new Map,experimentService:U().default});T().L({environment:a,store:t,properties:p,transaction:c}),i&&i(c,t,p)}}).performResult},render:e=>{let{ref:n,...r}=e;return(0,D.jsx)(O,{blockStore:t,...r})}}}({blockStore:t,collectionContextStore:n,groupsPointer:r,onClose:s,onAddOrLink:c,environment:u,intl:p})})),render:e=>(0,D.jsx)(E().A,{title:v,children:e.children})}]})}function O(e){let{blockStore:t,...n}=e;const{focused:r,onClick:o}=n,s=(0,f().tz)(),l=(0,i().K8)((()=>t.getIcon()),[t]),c=(0,a().IS)((e=>({item:{height:32},itemRight:{marginRight:4},pageTitleWrapper:{display:"flex",alignItems:"center"},icon:{marginRight:4},title:{...h().RC,maxWidth:"100%",fontWeight:500},iconButton:{right:6,background:e.popoverBackground,boxShadow:e.shadowSM,padding:2},iconButtonHover:{borderRadius:4}})),[]);return(0,D.jsx)(x().A,{...n,textWrapperStyle:{marginLeft:6},title:(0,D.jsxs)("div",{style:c.pageTitleWrapper,children:[(0,D.jsx)(R().B,{icon:l,style:c.icon,disabled:!0,isEmptyPage:!0,size:20}),(0,D.jsx)(A().A,{underline:!0,enableHover:!0,store:t,style:c.title})]}),right:r?(0,D.jsx)(_().A,{hasBackground:!1,ariaLabel:s.formatMessage({id:"CollectionLinkExistingModal.linkButton.ariaLabel",defaultMessage:"Link page"}),icon:u().W,onClick:o,hoveredStyle:c.iconButtonHover,style:c.iconButton}):void 0,style:c.item,rightStyle:c.itemRight})}function z(e){let{searchQuery:t,onSearchQueryChange:n}=e;const{device:r}=(0,o().v3)(),i=(0,f().tz)(),s=(0,a().IS)((e=>({headerWrap:{display:"flex",width:"100%",position:"relative",padding:"6px 10px",fontSize:r.isMobile?h().J.UIRegular.mobile:h().J.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 1px 0 ${e.darkDividerColor}\n\t\t\t\t`},input:{flexGrow:1}})),[r]);return(0,D.jsx)("div",{style:s.headerWrap,children:(0,D.jsx)(C().A,{style:s.input,value:t,placeholder:i.formatMessage({id:"CollectionLinkExistingModal.searchPlaceholder",defaultMessage:"Link a page…"}),forceShowClearButton:Boolean(t),focus:!0,onChange:e=>n(e.target.value),onClearButtonClick:()=>{n("")},format:C().C.Transparent})})}function F(e){let{searchQuery:t,collectionContextStore:n,groupsPointer:i,onClose:s,onAddOrLink:l}=e;const c=(0,o().v3)(),d=(0,a().IS)((e=>({button:{display:"flex",alignItems:"center",gap:6,width:"100%",paddingInline:12,paddingBlock:8,fontSize:c.device.isMobile?h().J.UIRegular.mobile:h().J.UIRegular.desktop,boxShadow:`\n\t\t\t\t\t0 -1px 0 ${e.darkDividerColor}\n\t\t\t\t`,color:e.text.secondary},pageTitle:{color:e.text.primary}})),[c.device]),p=(0,r.useCallback)((()=>{g().createAndCommit({userAction:"CollectionLinkExistingModal.onLinkExisting",environment:c,canUndo:!0,perform:e=>{const{newStore:r}=(0,y().Q)({environment:c,collectionContextStore:n,groupsPointer:i,shouldCoerce:!0,from:{createBlock:"relation_link_existing"},transaction:e,inMemoryRecordCache:c.defaultRecordCache.inMemoryRecordCache,title:t});l&&l(e,r)}}).performResult,s()}),[n,c,i,l,s,t]);return(0,D.jsxs)(v().A,{style:d.button,onClick:p,children:[(0,u().W)({width:14}),(0,D.jsx)("div",{children:(0,D.jsx)(f().sA,{id:"CollectionLinkExistingModal.addPageButton",defaultMessage:"Create {pageTitle}",values:{pageTitle:(0,D.jsx)("span",{style:d.pageTitle,children:t})}})})]})}const V=(0,r.memo)((function(){const e=(0,a().IS)((e=>({wrapper:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},resultsWrapper:{marginRight:8,marginLeft:12},icon:{height:16,width:16,borderRadius:4},pageName:{height:15,borderRadius:4,marginLeft:-1},sectionName:{height:12,borderRadius:4,width:"20%",marginTop:15,marginLeft:13,marginBottom:6}})),[]);return(0,D.jsxs)("div",{style:e.wrapper,children:[(0,D.jsx)(S().A,{style:e.sectionName}),(0,D.jsx)("div",{style:e.resultsWrapper,children:(0,D.jsx)(b().VP,{gap:12,children:Array.from({length:3},((t,r)=>(0,D.jsx)("div",{children:(0,D.jsxs)(b().fI,{gap:8,alignItems:"center",children:[(0,D.jsx)(S().A,{style:e.icon}),(0,D.jsx)(S().A,{style:{...e.pageName,width:n(496603).XM(["30%","40%","43%","45%","48%","50%","54%","55%","60%"])}})]})},`relation-result-shimmer-${r}`)))})})]})}))},920495:(e,t,n)=>{n.d(t,{n:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M13.3 14.25a.55.55 0 0 1-.55.55h-5.5a.55.55 0 1 1 0-1.1h5.5a.55.55 0 0 1 .55.55m-.55-1.95a.55.55 0 1 0 0-1.1h-5.5a.55.55 0 0 0 0 1.1z"}),(0,r.jsx)("path",{d:"M6.25 2.375A2.125 2.125 0 0 0 4.125 4.5v11c0 1.174.951 2.125 2.125 2.125h7.5a2.125 2.125 0 0 0 2.125-2.125V8.121c0-.563-.224-1.104-.622-1.502L11.63 2.997a2.13 2.13 0 0 0-1.502-.622zM5.375 4.5c0-.483.392-.875.875-.875h3.7V6.25A2.05 2.05 0 0 0 12 8.3h2.625v7.2a.875.875 0 0 1-.875.875h-7.5a.875.875 0 0 1-.875-.875zm8.691 2.7H12a.95.95 0 0 1-.95-.95V4.184z"})]})},i=(0,n(340498).wt)("page",o)},926329:(e,t,n)=>{n.d(t,{b:()=>o});n(296540);var r=n(474848);const o=(0,n(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,r.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,r.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},940563:(e,t,n)=>{n.r(t),n.d(t,{arrowStraightRightIcon:()=>o,iconDefinition:()=>r});n(296540);const r={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m17.442 9.558-5.4-5.4a.625.625 0 0 0-.884.884l4.333 4.333H3a.625.625 0 1 0 0 1.25h12.491l-4.333 4.333a.625.625 0 1 0 .884.884l5.4-5.4a.62.62 0 0 0 0-.884"})},o=(0,n(340498).wt)("arrowStraightRight",r)}}]);