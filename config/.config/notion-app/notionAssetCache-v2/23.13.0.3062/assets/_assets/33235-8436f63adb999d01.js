"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[33235],{9151:(e,t,o)=>{o.d(t,{m:()=>c,p:()=>s});o(18107),o(967357),o(898992),o(581454),o(908872);var n=()=>o(921598),r=()=>o(452706),i=()=>o(519839),l=()=>o(508496),a=()=>o(10594);function s(e){const{groupBy:t,schema:o,format:i,groupsFormatKey:s,limit:c,subGroupArgs:u}=e,p=o[t.property];if(!p||!(0,n().Eg)(p))return;const d=i[s]||[],g=(0,a().w9)(t,i);if(l().default.checkGate({gateName:"collection_group_reducer_visible"})){const t=u&&i[u.groupsFormatKey]||[];return{type:"groups",version:"v2",returnHiddenGroups:e.returnHiddenGroups,returnPinnedGroups:e.returnPinnedGroups,groupBy:g,groupSortPreference:d,limit:Math.min(c,r().O3),subGroup:u?{groupBy:u.groupBy,groupSortPreference:t,limit:u.limit}:void 0,aggregation:e.aggregation?{type:"independent",groupAggregation:e.aggregation,subGroupAggregation:null==u?void 0:u.subGroupAggregation}:void 0,blockResults:e.blockResults}}const m=d.reduce(((e,t)=>(0,n().tx)(t)?e+1:e),0);return{type:"groups",version:void 0,groupBy:g,groupSortPreference:d.map((e=>e.value)),limit:c+m}}function c(e){const{isMobile:t,collectionContextStore:o,groupBy:r,subGroupBy:l}=e,a=o.groupsStore,s=(0,i().CG)(o,t),c=a.getAllGroupStates(),u=l?"intersection":"independent",p=o.getViewType(),d=o.normalizedFormatStore.state,g="board"===p?null==d?void 0:d.board_cover:"gallery"===p?null==d?void 0:d.gallery_cover:void 0,m={type:u,defaultLimit:s,loadContentCover:Boolean(g&&"page_content"===g.type),groupOverrides:{}};for(const i of c){const e=i.currentLimit.state;if(e===s)continue;const t=i.groupsPointer;if("independent"!==u||1!==t.length){if("intersection"===u&&2===t.length&&l){const o=t.at(1),i=t.at(0);if(!o||o.value.type!==r.type)continue;if(!i||i.value.type!==l.type)continue;const a=(0,n().AC)(o.value),s=(0,n().AC)(i.value);m.groupOverrides[(0,n().A)([s,a])]={limit:e}}}else{const o=t.at(0);if(!o||o.value.type!==r.type)continue;const i=(0,n().AC)(o.value);m.groupOverrides[i]={limit:e}}}return m}},23815:(e,t,o)=>{o.d(t,{$6:()=>s,Vu:()=>a,zX:()=>l});var n=()=>o(66689),r=()=>o(799829),i=()=>o(685889);const l=(0,o(959013).YK)({sprintUncategorizedGroup:{defaultMessage:"Backlog (No {name})",id:"database.sprintDatabaseView.uncategorizedGroupLabel"}});function a(e){const{collectionStore:t,property:o,propertySchema:r,parentStore:l}=e;let a=!1;if(null!=t&&t.isDefined()){const e=t.getPropertyMapping();a=(null==e?void 0:e[n().yx.TaskToSprintRelation])===o}return(0,i().LQ)(r,l)===n().av||a}function s(e){return(0,r().wy)({appUri:e.getFormatStore().getKeyStore("app_config_uri").getValue(),collectionSchema:e.getSchema()})}},68207:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6.328 3c0-.18.145-.325.325-.325h6.694c.18 0 .325.146.325.325v.474c0 .948-.404 1.85-1.112 2.481l-.402.36.19 1.944.039.013a4.325 4.325 0 0 1 2.938 4.097V13c0 .18-.145.325-.325.325h-4.17v3.38a1.1 1.1 0 0 1-.1.46l-.44.956-.063.087a.35.35 0 0 1-.564-.103l-.432-.94a1.1 1.1 0 0 1-.1-.46v-3.38H5A.325.325 0 0 1 4.675 13v-.63a4.325 4.325 0 0 1 2.938-4.098l.039-.013.19-1.945-.402-.359a3.33 3.33 0 0 1-1.112-2.481z"})},r=(0,o(340498).wt)("pinFill",n)},154017:(e,t,o)=>{o.d(t,{b:()=>l});var n=()=>o(476492),r=()=>o(989423);var i=()=>o(504066);function l(e){const{environment:t,collectionContextStore:o,view_type:l,view_config_uri:a,from:s,...c}=e;!function(e,t){r().vd(e,"create_view",t)}(t,{...(0,n().sl)(o)||{},...c,view_type:l,view_config_uri:a,from:s}),(0,i().f)({collectionContextStore:o,action:"create_view",from:s,property_type:void 0})}},195071:(e,t,o)=>{o.d(t,{A:()=>C});o(944114),o(898992),o(803949),o(581454),o(296540);var n=()=>o(67657),r=()=>o(959013),i=()=>o(496603),l=()=>o(478184),a=()=>o(722372),s=()=>o(722872),c=()=>o(553965),u=()=>o(962730),p=()=>o(509060),d=()=>o(760217),g=()=>o(928600),m=()=>o(939740),y=()=>o(480095),v=()=>o(89924),f=()=>o(859428),h=()=>o(662971),x=o(474848);const S=(0,r().YK)({noneText:{defaultMessage:"None",id:"database.propertyAggregationMenu.noneText"}});const C=(0,r().j4)((function(e){let{onClose:t,property:i,schema:l,currentAggregation:c,source:u,noneText:p,intl:f,onChange:C}=e;const b=(0,o(484714).v3)(),{device:_}=b;let w;w=_.isMobile?{menuType:s().gu.Modal,title:(0,x.jsx)(r().sA,{defaultMessage:"Table aggregation",id:"database.mobilePropertyAggregationMenu.title"}),right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:t}:{menuType:s().gu.Popup,width:200};const[M,V]=function(e){let{property:t,schema:o,source:r,intl:i,onChange:l,environment:c,currentAggregation:u,noneText:p}=e;const f=[];let C=0,b=0;const{device:_}=c,w=function(e,t,o,r,i){const l={},a=null==i?void 0:i.enforceMaxAggregationLimit,s=null==i?void 0:i.aggregator,c=t[e];if(!c)return{};const u=e=>o(e,a);for(const p of n().VD)l[p]=A(p===s,p,u);if((0,n().wG)(c))for(const p of n().CG)l[p]=A(p===s,p,u);if((0,n().OC)(c))for(const p of n().Sn)l[p]=A(p===s,p,u);if((0,n().fo)(c))for(const p of n().zE)l[p]=A(p===s,p,u);if((0,n().s_)(c))for(const p of n().QO)l[p]=A(p===s,p,u);if((0,n().q0)(c))for(const p of n().nJ)l[p]=j(e,p,i,t,o,r);if((0,n().pe)(c))for(const p of n().A3)l[p]=A(p===s,p,u);return l}(t,o,l,c,u);f.push({key:"none",render:e=>(0,x.jsx)(d().A,{...e,isChecked:!u,title:p||i.formatMessage(S.noneText)}),action:()=>l(void 0)});let M="tableAggregation"===r?1:2;return Object.entries(n().Kn).forEach((e=>{let[t,o]=e;const i=[];for(const l of o)if(w[l]){if("show_unique"===l)switch(r){case"tableAggregation":continue;case"rollupPropertyMenu":f.splice(1,0,w[l]),(null==u?void 0:u.aggregator)===l&&(C=1);continue}i.push(w[l]),(u&&(0,n().ET)(null==u?void 0:u.aggregator)&&u.aggregator.operator===l||(null==u?void 0:u.aggregator)===l)&&(C=M,b=i.length-1)}const c=[];if("count_aggregations"===t&&"tableAggregation"===r&&c.push({key:"limitToggleSection",render:e=>(0,x.jsx)(v().A,{...e}),items:[k(u,l)]}),c.push({key:"aggregations",render:e=>(0,x.jsx)(v().A,{topBorder:!0,...e}),items:i}),i.length>0){M++;const e=a().jA[t],o={key:e,render:(t,o)=>(0,x.jsx)(h().A,{...t,disableDefaultClick:!0,onFocus:o.onFocus,renderOrigin:(t,o)=>(0,x.jsx)(d().A,{...t,ref:o,title:e}),renderExtension:(t,n)=>{let r;return r=_.isMobile?{menuType:s().gu.Modal,title:e,right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:n.close,...t}:{menuType:s().gu.Popup,width:250,...t},(0,x.jsx)(g().A,{...r,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:b,sections:c,onAccept:(e,t,r)=>{n.close(),o.onAccept&&o.onAccept(e,t,r)}})})}}),action:()=>null};f.push(o)}})),[f,C]}({property:i,schema:l,source:u,intl:f,onChange:C,environment:b,currentAggregation:c,noneText:p});return(0,x.jsx)(g().A,{...w,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:V??0,sections:[{key:0,render:e=>(0,x.jsx)(v().A,{...e}),items:M}],onAccept:t})})}));function b(e){let{isSelected:t,aggregationType:o,label:n,props:r}=e;const i=a().cx[o];return(0,x.jsx)(f().A,{placement:u().W.Right,delayThreshold:0,render:e=>(0,x.jsx)(d().A,{title:n,isChecked:t,...(0,c().A)(e,r)}),renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[i&&(0,x.jsx)("img",{src:(0,l().L)(i),style:{borderRadius:4,width:140,marginTop:4}}),a().fp[o]]})},r.key)}function A(e,t,o){const n=a().zY[t],r=a().cx[t];return{key:n,render:o=>(0,x.jsx)(f().A,{placement:u().W.Right,delayThreshold:0,render:t=>(0,x.jsx)(d().A,{title:n,isChecked:e,...(0,c().A)(t,o)}),renderTooltip:()=>(0,x.jsxs)("div",{style:{width:140,whiteSpace:"normal"},children:[r&&(0,x.jsx)("img",{src:(0,l().L)(r),style:{borderRadius:4,width:140,marginTop:4}}),a().fp[t]]})},o.key),action:()=>{o(t)}}}function j(e,t,o,r,l,c){const{device:u}=c,p=a().zY[t],f=i().oE(function(e,t,o,r,i){const l=r[t];if(!l||"status"!==l.type)return;const a=l.groups;return a?a.map((t=>{const r=(e&&(0,n().ET)(e.aggregator)&&e.aggregator.operator===o&&e.aggregator.groupName===t.name)??!1;return{key:`${o}${t.name}`,render:e=>(0,x.jsx)(b,{isSelected:r,aggregationType:o,label:t.name,props:e}),action:()=>{i({operator:o,groupName:t.name})}}})):void 0}(o,e,t,r,l));let S=0;if(o&&(0,n().ET)(null==o?void 0:o.aggregator)&&o.aggregator.operator===t){const e=o.aggregator.groupName,n=f.findIndex((o=>o.key===`${t}${e}`));-1!==n&&(S=n)}return{key:t,render:(e,t)=>(0,x.jsx)(h().A,{...e,onFocus:t.onFocus,renderOrigin:e=>(0,x.jsx)(d().A,{...e,title:p}),renderExtension:(e,o)=>{let n;return n=u.isMobile?{menuType:s().gu.Modal,title:p,right:(0,x.jsx)(y().DoneMenuText,{}),onClickRight:o.close,...e}:{menuType:s().gu.Popup,width:200,...e},(0,x.jsx)(g().A,{...n,children:(0,x.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:S,sections:[{key:"groups",render:e=>(0,x.jsx)(v().A,{...e}),items:f}],onAccept:t.onAccept})})}}),action:()=>null}}function k(e,t){const o=Boolean(null==e?void 0:e.enforceMaxAggregationLimit);return{key:"aggregationLimitToggle",render:e=>(0,x.jsx)(p().A,{on:o,menuListItemProps:e}),action:()=>{t(e?e.aggregator:"count",!o)}}}},230979:(e,t,o)=>{o.d(t,{N:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M6.653 2.375A.625.625 0 0 0 6.028 3v.474A3.62 3.62 0 0 0 7.24 6.179l.289.258-.157 1.603a4.625 4.625 0 0 0-2.997 4.33V13c0 .345.28.625.625.625h4.13v3.08c0 .158.035.317.1.46l.433.94a.35.35 0 0 0 .565.103l.063-.087.44-.956c.065-.142.1-.3.1-.46v-3.08H15c.345 0 .625-.28.625-.625v-.63a4.625 4.625 0 0 0-2.997-4.33l-.157-1.603.289-.258a3.63 3.63 0 0 0 1.212-2.705V3a.625.625 0 0 0-.625-.625zm1.42 2.871c-.468-.417-.75-1-.79-1.621h5.434a2.38 2.38 0 0 1-.79 1.621l-.525.47a.63.63 0 0 0-.206.527l.227 2.318a.63.63 0 0 0 .422.531l.237.08a3.375 3.375 0 0 1 2.293 3.197v.006h-8.75v-.006c0-1.447.922-2.733 2.293-3.197l.237-.08a.63.63 0 0 0 .422-.531l.227-2.318a.63.63 0 0 0-.206-.528z"})},r=(0,o(340498).wt)("pin",n)},259464:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var n=()=>o(690471);o(944114),o(898992),o(908872);var r=o(474848);const i=16;function l(e){const{startPoint:t,endPoint:o,style:i,showArrowHead:l,useRightAngles:c,cornerRadiusOverride:u,handleMouseMove:p,handleMouseLeave:d}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s,{startPoint:t,startCurvePoint:c?void 0:{x:t.x+n().g_,y:t.y},endPoint:l?{x:o.x-1.5,y:o.y}:o,endCurvePoint:c?void 0:{x:o.x-n().g_,y:o.y},cornerRadiusOverride:u,style:i,handleMouseMove:p,handleMouseLeave:d,children:e.children}),l&&(0,r.jsx)(a,{endPoint:o,style:i})]})}function a(e){const{endPoint:t,style:o}=e;return(0,r.jsx)("polyline",{points:`${t.x-5},${t.y-6} ${t.x},${t.y} ${t.x-5},${t.y+6}`,style:o,fill:"transparent"})}function s(e){const{startPoint:t,startCurvePoint:o,endPoint:n,endCurvePoint:l,style:a,cornerRadiusOverride:s,handleMouseMove:c,handleMouseLeave:u}=e;let p="";p=o&&l?`M ${t.x} ${t.y} L ${o.x} ${o.y} L ${l.x} ${l.y} L ${n.x} ${n.y}`:`M ${t.x} ${t.y} L ${t.x} ${n.y} L ${n.x} ${n.y}`;const d=function(e,t){function o(e,t,o){const r=t.x-e.x,i=t.y-e.y,l=Math.sqrt(r*r+i*i);return n(e,t,Math.min(1,o/l))}function n(e,t,o){return{x:e.x+(t.x-e.x)*o,y:e.y+(t.y-e.y)*o}}function r(e,t){e.length>2&&(e[e.length-2]=t.x.toString(),e[e.length-1]=t.y.toString())}function i(e){return{x:parseFloat(e[e.length-2]),y:parseFloat(e[e.length-1])}}const l=e.split(/[,\s]/).reduce(((e,t)=>{const o=t.match("([a-zA-Z])(.+)");return o?(e.push(o[1]),e.push(o[2])):e.push(t),e}),[]).reduce((function(e,t){return!isNaN(parseFloat(t))&&e.length?e[e.length-1].push(t):e.push([t]),e}),[]);let a=[];if(l.length>1){const e=i(l[0]);let s=null;"Z"===l[l.length-1][0]&&l[0].length>2&&(s=["L",e.x.toString(),e.y.toString()],l[l.length-1]=s),a.push(l[0]);for(let c=1;c<l.length;c++){const e=a[a.length-1],u=l[c],p=u===s?l[1]:l[c+1];if(p&&e&&e.length>2&&"L"===u[0]&&p.length>2&&"L"===p[0]){const l=i(e),s=i(u),c=i(p),d=o(s,l,t),g=o(s,c,t);r(u,d),a.push(u);const m=n(d,s,.5),y=n(s,g,.5),v=["C",m.x.toString(),m.y.toString(),y.x.toString(),y.y.toString(),g.x.toString(),g.y.toString()];a.push(v)}else a.push(u)}if(s){const e=i(a[a.length-1]);a.push(["Z"]),r(a[0],e)}}else a=l;return a.reduce((function(e,t){return`${e}${t.join(" ")} `}),"")}(p,s||i);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d,style:a,fill:"transparent"}),(c||u)&&(0,r.jsxs)("g",{onMouseMove:c,onMouseLeave:u,children:[(0,r.jsx)("path",{d,style:{strokeOpacity:0,strokeWidth:16,pointerEvents:"stroke",cursor:"default"},fill:"transparent"}),e.children]})]})}},265793:(e,t,o)=>{o.d(t,{b:()=>v,w:()=>f});var n=()=>o(484714),r=()=>o(847249),i=()=>o(888325),l=()=>o(187174),a=()=>o(96689),s=()=>o(541801),c=()=>o(449506),u=()=>o(645873),p=()=>o(351360),d=()=>o(889097),g=()=>o(961581),m=()=>o(299177);const y=!1;function v(e){var t;const o=null===(t=(0,u().fJ)(s().xl).value)||void 0===t?void 0:t.loadWorkflowTemplateInstances;(0,r().K8)((()=>{if(!o)return;const t=e instanceof d().A?e.collectionStore():e;t&&o(t)}),[o,e])}function f(){const e=(0,n().v3)(),t=(0,r().K8)((()=>{var e;if(function(){const e=g().A.state.initialRenderCompleted;y&&!e&&console.log("Initial page render is not yet completed, delaying refresh of workflow template instances.");return e}())return null===(e=p().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId()}),[]);(0,l().Yb)((async()=>{if(!t)return;(m().A.debug||y)&&console.log("Refreshing workflow template instance map for space",t);const o={table:a().NX,id:t,spaceId:t},n=await c().callApi({eventName:"getWorkflowTemplateInstances",environment:e,data:{spaceId:o.spaceId,scopeTable:o.table,scopeId:o.id,enableInstanceRobustness:!0}});if("success"===n.type){const e=(0,i()._)(o);m().A.setState({...m().A.state,[e]:n.data.instanceMap[e]})}}),[e,t])}},287531:(e,t,o)=>{o.d(t,{A:()=>l});var n=o(296540),r=o(474848);function i(e){const{pageName:t,targetCollectionStore:n,...i}=e,l=(0,o(484714).Y0)(),a=(0,o(847249).K8)((()=>n.getIcon()),[n]),s=(0,o(401497).IS)((e=>({medium:{color:e.text.secondary},dbName:{display:"flex",alignItems:"center",marginLeft:4},title:{marginLeft:o(246219).g1*(l.isRetina?.5:1)},icon:{width:16,fill:e.mediumIconColor}})),[l.isRetina]),c=(0,r.jsxs)("div",{style:s.dbName,children:[(0,r.jsx)(o(614505).B,{disabled:!0,icon:a,isEmptyPage:!1,size:l.isMobile?24:20}),(0,r.jsx)(o(16006).A,{store:n,style:s.title})]});return(0,r.jsx)(o(760217).A,{title:(0,r.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,r.jsx)(o(959013).sA,{id:"database.searchRelation.createNewPageFooter",defaultMessage:"<medium>New</medium> {pageName} <medium> in</medium> {databaseNameWithIcon}",values:{medium:e=>(0,r.jsx)("span",{style:s.medium,children:e}),pageName:(0,r.jsx)("span",{style:{marginLeft:4,marginRight:4},children:t}),databaseNameWithIcon:c}})}),icon:(0,o(689094).W)(s.icon),...i})}const l=n.memo(i)},299177:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{}}}const r=new n;o(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},330557:(e,t,o)=>{o.d(t,{p:()=>E});o(898992),o(581454),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),a=()=>o(764880),s=()=>o(921598),c=()=>o(970013),u=()=>o(356596),p=()=>o(799829),d=()=>o(179034),g=()=>o(519831),m=()=>o(959013),y=()=>o(496603),v=()=>o(534177),f=()=>o(284371),h=()=>o(901389),x=()=>o(175116),S=()=>o(594794),C=()=>o(722872),b=()=>o(106628),A=()=>o(361330),j=()=>o(970585),k=()=>o(630116),_=()=>o(251126),w=()=>o(297872),M=()=>o(623580),V=()=>o(419357),B=()=>o(928600),G=()=>o(939740),I=()=>o(64e3),T=()=>o(204063),F=()=>o(958378),P=()=>o(89924),R=()=>o(287531),L=()=>o(457688),K=o(474848);function E(e){const{onChange:t,currentGroups:o,groupBy:l,groupFormat:a,onClose:c,schema:u,parentStore:p}=e,[d,g]=(0,n.useState)(""),y=(0,i().uB)(void 0,j().A),v=(0,r().Y0)(),f=(0,n.useCallback)((()=>{N({onChange:t,currentGroups:o,groupBy:l,groupFormat:a,inputValue:d,onClose:c})}),[o,l,a,d,t,c]);let h;return(0,n.useEffect)((()=>{var e;a&&("select"===a.value.type||"multi_select"===a.value.type)&&a.value.value?g(a.value.value):a&&(0,s().kO)(a.value)&&"exact"===(null===(e=a.value.value)||void 0===e?void 0:e.type)&&g(a.value.value.value)}),[a]),h=v.isMobile?{menuType:C().gu.Modal,title:a?(0,K.jsx)(m().sA,{defaultMessage:"Rename group",id:"codeBlock.databaseEditGroupMenu.renameGroupTitle"}):(0,K.jsx)(m().sA,{defaultMessage:"Add a group",id:"codeBlock.databaseEditGroupMenu.addGroupTitle"}),left:(0,K.jsx)(m().sA,{defaultMessage:"Cancel",id:"codeBlock.databaseEditGroupMenu.cancelButton.label"}),right:(0,K.jsx)(m().sA,{defaultMessage:"Done",id:"codeBlock.databaseEditGroupMenu.doneButton.label"}),onClickRight:f,onClickLeft:c}:{menuType:C().gu.Popup,width:O(l)?300:240,maxHeight:"50vh"},(0,K.jsx)(w().A,{capture:!0,render:e=>(0,K.jsx)(B().A,{...h,...e,children:(0,K.jsx)(Z,{groupBy:l,schema:u,onChange:t,currentGroups:o,groupFormat:a,onClose:c,parentStore:p,inputValue:d,setInputValue:g,menuListStore:y})})})}function z(){return(0,K.jsx)(m().sA,{defaultMessage:"Group already exists.",id:"database.groupExistsAlreadyError.message"})}function O(e){return"select"===e.type||"multi_select"===e.type||(0,s().Vs)(e.type)}function D(e){let{currentGroups:t,onChange:o,groupFormat:l,onClose:c,inputValue:u,menuListStore:p}=e;const d=(0,r().v3)(),g=(0,m().tz)(),v=(0,i().uB)(p,j().A),[f,x]=(0,n.useState)(u);return(0,K.jsx)(_().A,{request:f,performRequest:e=>async function(e,t){const o=await b().T.searchActions.load();return(await o.searchVisibleSpaceUsers({environment:t,query:e,membersOnly:!1})).slice(0,20)}(e,d),debounce:A().tu,render:(e,n,r)=>{n||(n=[]);const i=y().oE(n.map((e=>({key:e.id,render:t=>(0,K.jsx)(L().A,{actor:(0,a().A7)(e),...t}),action:()=>{const n={type:"person",value:{table:"notion_user",id:e.id}};return l&&y().n4(n,l.value)?(null==c||c(),null):t.some((e=>(0,s().OF)(n,e.value)))?(h().f1((0,K.jsx)(z,{})),null):void o({newGroupValue:n})}}))));let u;return u=r&&n&&0===i.length?(0,K.jsx)(P().A,{children:(0,K.jsx)(I().A,{title:(0,K.jsx)(m().sA,{defaultMessage:"No results",id:"database.noPersonSearchResults.message"})})}):(0,K.jsx)(G().Ay,{type:G().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,K.jsx)(P().A,{...e}),items:i}],store:v}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(P().A,{children:(0,K.jsx)(V().Ay,{value:f,focus:!0,placeholder:g.formatMessage({defaultMessage:"Search for a person…",id:"database.searchPerson.placeholder"}),onChange:e=>{x(e.target.value),v.setState({...v.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),u]})}})}function H(e,t,o,n,r,i){const l=o[n.property];if(!l||"relation"!==l.type)return null;const a=c().Nv(l);if(!a)return null;const s=k().md.createChildStore(t,a);return s.isDefined()&&i.length>0?{key:"new-page",render:e=>(0,K.jsx)(R().A,{targetCollectionStore:s,pageName:i,...e}),action:()=>{const t=(0,S().Z1)({environment:e,table:d().ev,spaceId:s.getSpaceId()}),o={table:d().ev,id:t,spaceId:s.getSpaceId()};r({newGroupValue:{type:"relation",value:o},newPage:{id:o.id,spaceId:o.spaceId,name:i}})}}:null}function N(e){let{onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:l}=e;const a=i.trim().replace(/,/g,"");let c;"select"===n.type||"multi_select"===n.type?c={type:n.type,value:a}:(0,s().Vh)(n)&&(c={type:n.type,value:{type:"exact",value:a}}),c&&a?r&&y().n4(c,r.value)?null==l||l():o.some((e=>c&&(0,s().OF)(c,e.value)))?h().f1((0,K.jsx)(z,{})):t({newGroupValue:c}):null==l||l()}function $(e,t,o,n,r,i,l,a,c){const u=null==c?void 0:c.relativeVariableStore.state,d=u&&u[t.id],g=(e,o)=>{const r=k().md.createChildStore(n,t);if(!r.isDefined())return;const i=r.getFormat().app_config_uri;return i&&o?e.formatMessage(p().n$[i][o].messageDescriptor):void 0};return e.map((e=>{const t=k().Bv.createChildStore(n,e);if(t.isTemplate())return;const c=d?(0,p().cE)(t.id,d):void 0;return{key:t.id,render:e=>(0,K.jsx)(F().A,{store:t,titlePrefix:g(r,c),...e}),action:()=>{let t={type:"relation",value:e};c&&(t={type:"relation",value:{type:"relative",value:{type:"builtin",variable:c}}}),l&&y().n4(t,l.value)?null==a||a():o.some((e=>(0,s().OF)(t,e.value)))?h().f1((0,K.jsx)(z,{})):i({newGroupValue:t})}}}))}function W(e){let{onChange:t,currentGroups:o,groupBy:i,groupFormat:a,onClose:s,inputValue:c,setInputValue:p,menuListStore:d}=e;const g=(0,m().tz)(),y=(0,l().DP)(),v=(0,n.useCallback)((()=>N({onChange:t,currentGroups:o,groupBy:i,groupFormat:a,inputValue:c,onClose:s})),[t,o,i,a,c,s]),h=(0,n.useCallback)((e=>function(e,t,o,n,r,i,l){13===e.keyCode?N({onChange:t,currentGroups:o,groupBy:n,groupFormat:r,inputValue:i,onClose:l}):27===e.keyCode&&(null==l||l())}(e,t,o,i,a,c,s)),[t,o,i,a,c,s]),x=(0,n.useCallback)((e=>function(e,t,o){t(e.target.value),o.setState({...o.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}(e,p,d)),[d,p]),S=(0,r().WS)(),C=a?g.formatMessage({id:"database.collectionEditGroupMenu.renameGroupLabel.placeholder",defaultMessage:"Rename group"}):g.formatMessage({id:"database.collectionEditGroupMenu.newGroupLabel.placeholder",defaultMessage:"New group"});return S?(0,K.jsx)(P().A,{children:(0,K.jsx)(V().Ay,{value:c,focus:!0,selectAll:!0,showClearButton:!1,focusInitial:!0,placeholder:C,onChange:x,onKeyDown:h})}):(0,K.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:6,width:"100%",background:y.inputBackground},children:[(0,K.jsx)(M().A,{value:c,focus:!0,selectAll:!0,focusInitial:!0,placeholder:C,onChange:x,onKeyDown:h,format:M().C.Transparent,style:{fontSize:f().J.UIRegular.desktop}}),(0,K.jsxs)(T().A,{onClick:v,children:[(0,K.jsx)(m().sA,{defaultMessage:"Done",id:"database.collectionEditGroupMenu.submitButton.label"}),(0,u().K)({height:14,width:14,fill:"currentColor",marginLeft:6,marginTop:2})]})]})}function U(e){let{parentStore:t,schema:o,groupBy:l,currentGroups:a,onChange:s,groupFormat:u,onClose:p,inputValue:m,setInputValue:y,menuListStore:v}=e;const f=(0,r().v3)(),h=(0,n.useMemo)((()=>{const e=o[l.property];return!(!e||"relation"!==e.type)&&c().Nv(e)}),[l.property,o]);return(0,i().K8)((()=>{if(!h)return!1;return k().md.createChildStore(t,h).isDefined()}),[h,t])&&h?(0,K.jsx)(_().A,{request:m,performRequest:e=>async function(e,t,o,n,r){const i=o[t.property];if(!i||!(0,c().nC)(i))return;const l=i.collection_pointer;if(!l)return;const a=k().md.createChildStore(n,{table:g().Vl,id:l.id});if(await a.load(),!a.isDefined())return;const s=a.getSpaceId(),u=await b().T.searchActions.load();return(await u.searchPagesInCollection({environment:r,query:e,collectionId:l.id,spaceId:s,excludeTemplates:!0,source:"collection_group_value",limit:20,includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1})).results.map((e=>({table:d().ev,id:e,spaceId:s})))}(e,l,o,t,f),debounce:A().tu,render:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return(0,K.jsx)(q,{ready:r,results:n,parentStore:t,schema:o,groupBy:l,currentGroups:a,onChange:s,groupFormat:u,onClose:p,inputValue:m,setInputValue:y,menuListStore:v,collectionPointer:h,environment:f})}}):null}function q(e){let{parentStore:t,schema:o,groupBy:r,currentGroups:l,onChange:a,groupFormat:s,onClose:c,inputValue:u,setInputValue:p,menuListStore:d,results:g,ready:v,collectionPointer:f,environment:h}=e;const S=(0,m().tz)(),C=(0,n.useContext)(x().p2),b=(0,i().K8)((()=>y().oE([...$(g,f,l,t,S,a,s,c,C),H(h,t,o,r,a,u)])),[h,C,f,l,r,s,u,S,a,c,t,g,o]);let A;return A=v&&g&&0===b.length?(0,K.jsx)(P().A,{children:(0,K.jsx)(I().A,{title:(0,K.jsx)(m().sA,{defaultMessage:"No results",id:"database.noRelationSearchResults.message"})})}):(0,K.jsx)(G().Ay,{type:G().Oh.Vertical,initialFocus:0,sections:[{key:0,render:e=>(0,K.jsx)(P().A,{...e}),items:b}],store:d}),(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(P().A,{children:(0,K.jsx)(V().Ay,{value:u,focus:!0,placeholder:S.formatMessage({defaultMessage:"Type to search...",id:"database.searchRelation.placeholder"}),onChange:e=>{p(e.target.value),d.setState({...d.state,focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}})}),A]})}function Z(e){let{groupBy:t,schema:o,onChange:n,currentGroups:r,groupFormat:i,onClose:l,parentStore:a,inputValue:c,setInputValue:u,menuListStore:p}=e;return o[t.property]?"select"===t.type||"multi_select"===t.type?(0,K.jsx)(W,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:l,inputValue:c,setInputValue:u,menuListStore:p}):"person"===t.type?(0,K.jsx)(D,{currentGroups:r,onChange:n,groupFormat:i,onClose:l,inputValue:c,menuListStore:p}):"relation"===t.type?(0,K.jsx)(U,{parentStore:a,schema:o,groupBy:t,currentGroups:r,onChange:n,groupFormat:i,onClose:l,inputValue:c,setInputValue:u,menuListStore:p}):(0,s().Vs)(t.type)?(0,K.jsx)(W,{onChange:n,currentGroups:r,groupBy:t,groupFormat:i,onClose:l,inputValue:c,setInputValue:u,menuListStore:p}):"number"===t.type||"status"===t.type||"date"===t.type||"formula"===t.type||"checkbox"===t.type||"created_time"===t.type||"last_edited_time"===t.type||"created_by"===t.type||"last_edited_by"===t.type||"last_visited_time"===t.type||"location"===t.type?null:void(0,v().HB)(t.type):null}},359454:(e,t,o)=>{o.d(t,{P:()=>l});var n=()=>o(725614),r=()=>o(351360),i=()=>o(630116);function l(e){const{environment:t,collectionContextStore:o}=e;let l=o.collectionStore();const a=o.collectionViewBlockStore();if(!l||!a)return;const{mainEditorCurrentBlockStore:s}=r().default.state;s&&o.isFullScreenStore.state&&(l=i().md.createChildStore(s,l.pointer)),n().selectAllText({environment:t,store:l.getNameStore(),canSelectAllBlocks:!1})}},370873:(e,t,o)=>{o.d(t,{p:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("myTasksLarge",{viewBox:"0 0 48 48",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M21.693 39.17a9.05 9.05 0 0 1-.73 1.238H39.52c1.65 0 2.892-.413 3.727-1.238.835-.824 1.253-2.05 1.253-3.68V19.203c0-1.628-.418-2.855-1.253-3.68-.835-.824-2.078-1.236-3.727-1.236H16.253c-1.66 0-2.908.412-3.744 1.237-.824.814-1.237 2.04-1.237 3.68v5.28c.212-.02.423-.036.635-.047a6.387 6.387 0 0 1 1.269 0c.222.01.438.027.65.048v-5.14c0-.824.211-1.448.634-1.87.423-.424 1.031-.635 1.824-.635h23.188c.783 0 1.39.212 1.824.634.434.423.65 1.047.65 1.872v16.003c0 .825-.216 1.449-.65 1.872-.433.423-1.041.634-1.824.634H22.248a8.47 8.47 0 0 1-.555 1.316ZM15.364 10.082c-.38.381-.629.93-.745 1.65h26.55c-.127-.72-.38-1.269-.761-1.65-.37-.39-.952-.586-1.745-.586H17.125c-.793 0-1.38.195-1.76.586ZM18.52 5.816c-.38.338-.591.846-.634 1.523h20.016c-.053-.677-.275-1.185-.666-1.523-.38-.349-.936-.523-1.665-.523H20.2c-.729 0-1.29.174-1.68.523Z"}),(0,n.jsx)("path",{d:"M9.448 42.073a7.71 7.71 0 0 0 3.11.634c1.088 0 2.12-.211 3.092-.634a8.253 8.253 0 0 0 2.57-1.745 8.123 8.123 0 0 0 1.76-2.57 7.712 7.712 0 0 0 .634-3.108 7.75 7.75 0 0 0-.634-3.124 8.032 8.032 0 0 0-1.729-2.57 8.03 8.03 0 0 0-2.57-1.728 7.75 7.75 0 0 0-3.124-.635 7.71 7.71 0 0 0-3.109.635 7.907 7.907 0 0 0-2.569 1.744 8.253 8.253 0 0 0-1.745 2.57A7.639 7.639 0 0 0 4.5 34.65c0 1.11.211 2.152.634 3.125a8.254 8.254 0 0 0 1.745 2.57 8.03 8.03 0 0 0 2.57 1.728Zm3.807-2.649c-.17.18-.402.27-.698.27-.296 0-.534-.09-.714-.27-.169-.18-.253-.412-.253-.698v-3.108H8.48c-.286 0-.518-.09-.698-.27-.18-.17-.27-.402-.27-.698 0-.296.09-.528.27-.698.18-.18.412-.27.698-.27h3.109v-3.108c0-.285.084-.518.253-.698.18-.18.418-.27.714-.27s.529.09.698.27c.18.18.27.413.27.698v3.109h3.108c.286 0 .518.09.698.27.18.169.27.401.27.697 0 .296-.09.529-.27.698-.18.18-.412.27-.698.27h-3.108v3.108c0 .286-.09.519-.27.698ZM27.229 32.326c.292.341.664.512 1.116.512.514 0 .903-.198 1.166-.592l5.693-8.58c.095-.14.164-.277.21-.413a1.3 1.3 0 0 0 .068-.401c0-.354-.124-.646-.37-.876a1.246 1.246 0 0 0-.901-.352c-.247 0-.456.05-.63.149-.168.094-.328.259-.48.493l-4.78 7.506-2.394-2.868c-.259-.3-.584-.45-.974-.45-.366 0-.668.117-.907.351a1.186 1.186 0 0 0-.357.883c0 .16.024.312.073.456.054.14.15.286.29.438l3.177 3.744Z"})]})})},396671:(e,t,o)=>{o.d(t,{d:()=>a});o(944114),o(898992),o(354520),o(672577),o(803949),o(581454);var n=()=>o(847249),r=()=>o(921598),i=()=>o(10594),l=()=>o(963589);function a(e){let{collectionContextStore:t,reducerResult:o,groupBy:a,subGroupBy:s,groupsLimit:c,groupsFormatKey:u,renderGroupsFromAggregationArgs:p,removeUncategorized:d}=e;const g=(0,l().X)("collection_group_reducer_visible");return(0,n().Fy)((()=>{var e;const n=t.normalizedFormatStore.state,l=t.normalizedSchemaStore.state,m=t.collectionViewBlockStore();if(g&&"v2"===(null==o?void 0:o.version)){const e=[],t=[];if(a){var y,v;o.results.forEach((n=>{var i;const l=null===(i=o.pinnedResults)||void 0===i?void 0:i.groupResults.find((e=>(0,r().AC)(e.value)===(0,r().AC)(n.value)));n.visible?e.push({property:a.property,value:n.value,pinned:Boolean(l)}):t.push({property:a.property,value:n.value,hidden:!0,pinned:Boolean(l)})}));const n=(null===(y=o.pinnedResults)||void 0===y?void 0:y.groupResults.map((e=>({property:a.property,value:e.value,pinned:!0,hidden:!e.visible}))))??[];return{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,pinnedGroups:{groups:n,aggregations:(null===(v=o.pinnedResults)||void 0===v?void 0:v.aggregationResults)??{}},hasMore:o.hasMore}}var f;return s?(null===(f=o.subGroupResults)||void 0===f||f.forEach((o=>{o.visible?e.push({property:s.property,value:o.value}):t.push({property:s.property,value:o.value,hidden:!0})})),{version:"v2",currentGroups:[...e,...t],visibleGroups:e,hiddenGroups:t,pinnedGroups:{groups:[],aggregations:{}},hasMore:Boolean(o.hasMoreSubGroups)}):{version:"v2",currentGroups:[],visibleGroups:[],hiddenGroups:[],pinnedGroups:{groups:[],aggregations:{}},hasMore:!1}}if(!a||!m||"v2"===(null==o?void 0:o.version))return{version:"v1",currentGroups:[],visibleGroups:[],hiddenGroups:[],total:0};const h=(0,r().oH)({schema:l,groupBy:a}),x="chart_subgroups"===u&&null!=o&&o.subGroupResults?o.subGroupResults:null==o?void 0:o.results,S=(0,i().ck)({groupBy:a,schema:l,formatGroups:n[u]||[],schemaGroups:h,reducerResults:x,getRecordModel:m.getRecordModel,getRecordRole:m.getRecordRole,relativeVariableResult:t.relativeVariableStore.state,viewAppConfigUri:null===(e=t.collectionViewStore())||void 0===e?void 0:e.getFormat().app_config_uri,allowedCollectionStores:t.collectionStoresStore.state,renderGroupsFromAggregationArgs:p,removeUncategorized:d}),C=S.filter((e=>!(0,r().tx)(e))).slice(0,c),b=S.filter((e=>(0,r().tx)(e))),A=o?o.total:0;return{version:"v1",currentGroups:[...C,...b],visibleGroups:C,hiddenGroups:b,total:A}}),[t,g,o,a,u,p,d,c,s])}},412236:(e,t,o)=>{o.d(t,{V:()=>a});o(296540);var n=()=>o(401497),r=()=>o(959013),i=o(474848);const l="https://www.notion.com/blog/notion-ai-for-work";function a(){const e=(0,n().IS)((e=>({default:{cursor:"pointer",textDecoration:"none",color:e.text.uiBluePrimary}})),[]);return(0,i.jsx)("a",{href:l,target:"_blank",style:{...e.default},children:(0,i.jsx)(r().sA,{id:"PackingChangeLearnMore.learnMore",defaultMessage:"Learn more"})})}},424599:(e,t,o)=>{o.d(t,{M:()=>p});o(581454);var n=()=>o(594013),r=()=>o(901610),i=()=>o(686526),l=()=>o(246826),a=()=>o(751156),s=()=>o(519839),c=()=>o(493260),u=()=>o(46986);async function p(e){var t;const{environment:o,collectionStore:p,collectionContextStore:d,collectionSettingsStore:g,shouldSkipViewSelection:m}=e,y=d.collectionViewBlockStore(),v=d.collectionViewStore(),f=p.getParentBlockStore();if(!y||!f||!v)return;const h=null===(t=p.getModel())||void 0===t?void 0:t.getNormalizedSchema();if("chart"===v.getType()&&h){const e=v.getFormat(),t=e.chart_config;if(!t)return;const i="placeholder"===t.type?t.placeHolderType:t.type;let s;return(0,r().I)(i)?s=(0,n().EZ)({collectionSchema:h,axisChartType:i}):"donut"===i&&(s=(0,n().ZS)({collectionSchema:h})),a().createAndCommit({userAction:"slashMenu.create.chartViewExistingSource",environment:o,canUndo:!0,perform:t=>{l().zv({store:v.getFormatStore(),transaction:t,data:{...e,hide_linked_collection_name:!0,subitem_display_mode:"flattened",chart_config:s||null}})}}),void g.setState({open:!0,stack:[{type:"main"}]})}if(m)i().a2({collectionSettingsStore:g,item:{type:"main"}});else{await Promise.all([...f.getCollectionViewStores().map((e=>e.load())),...y.getCollectionViewStores().map((e=>e.load()))]);const e=(0,s().Mf)({collectionStore:p,sourceCollectionViewBlockStore:f,currentCollectionViewBlockStore:y,currentCollectionViewStore:v,constraints:(0,c().v)(v.id)});(0,u().ei)(o)?i().R8({collectionSettingsStore:g,item:{type:"createView"}}):e.length>0?i().a2({collectionSettingsStore:g,item:{type:"duplicateExistingView"}}):i().a2({collectionSettingsStore:g,item:{type:"createView"}})}}},462853:(e,t,o)=>{o.d(t,{l:()=>i});var n=()=>o(617871);const r={[n().e1]:"collection_connected_property_figma",[n().Hd]:"collection_connected_property_google_drive",[n().ob]:"collection_connected_property_github",[n().k0]:"collection_connected_property_zendesk",[n().bh]:"collection_synced_database_github",[n().MN]:"collection_synced_database_asana",[n().Fo]:"collection_synced_database_gitlab",[n().me]:"collection_synced_database_jira",[n().F6]:"collection_synced_database_jira_workspace",[n().Fv]:"collection_synced_database_jira_datacenter"};function i(e){if(e)return r[e]}},472765:(e,t,o)=>{o.d(t,{m:()=>p});var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(686526),a=()=>o(313209),s=()=>o(175116),c=()=>o(406699),u=o(474848);const p=n.memo((function(e){const{store:t,popupType:l,dismissTooltip:a,renderOrigin:p,placementToOrigin:g}=e,m=(0,r().v3)(),y=(0,s().ET)(),v=(0,i().uB)(void 0,o(463830).A),f=(0,n.useCallback)((()=>{(0,o(436696).X)({environment:m,collectionContextStore:y,action:"click_topbar_templates_dropdown"}),a&&a()}),[y,m,a]);return(0,u.jsx)(c().Ay,{popupType:l,placementToOrigin:g,alignmentToOrigin:c().yP.Start,render:()=>(0,u.jsx)(d,{store:t,templateButtonPopupStore:v}),originGap:4,onClick:f,renderOrigin:p,buttonPopupStore:v})}));function d(e){const{store:t,templateButtonPopupStore:c}=e,p=(0,r().v3)(),d=(0,s().ET)(),g=(0,i().K8)((()=>d.collectionStore()),[d]),m=(0,i().K8)((()=>d.settingsStore),[d]),y=(0,i().O$)(o(227440).e),v=(0,i().O$)(d.permissionScopesStore),f=(0,i().K8)((()=>t.isNonEditableState()),[t]),h=(0,o(401497).IS)((e=>({offlineMessage:{fontSize:14,color:e.text.secondary,width:280,padding:8}})),[]),x=(0,n.useCallback)((e=>{a().Ur({userAction:"CollectionViewBlock.handleTemplateEmptyPageClick",collectionViewBlockStore:t,collectionContextStore:d,environment:p,shouldCoerce:!1,from:{createBlock:"cvb_template_empty_page"},templateStore:void 0,useCrdt:!0}),c.reset(),l().os({collectionSettingsStore:m})}),[d,p,t,c,m]),S=(0,n.useCallback)((e=>{a().Ur({environment:p,collectionContextStore:d,collectionViewBlockStore:t,templateStore:e.templateStore,useCrdt:e.useCrdt,isKeyboard:e.isKeyboard,from:{createBlock:"cvb_template",initCollection:"collection_view_block"},shouldCoerce:!0}),c.reset(),l().os({collectionSettingsStore:m})}),[d,p,t,c,m]),C=(0,n.useCallback)((()=>{c.reset()}),[c]);return g?y?(0,u.jsx)(o(975318).D,{isOverlay:!0,collectionStore:g,canConfigureCollection:v.canConfigureCollection,onEmptyPageClick:x,onEmptyEnter:x,onTemplateClick:S,onCancelClick:C,locked:f}):(0,u.jsx)("div",{style:h.offlineMessage,children:(0,u.jsx)(o(959013).sA,{defaultMessage:"Please go online to use a template.",id:"collectionViewBlock.actionBar.offlineTemplatePicker.message"})}):null}},500733:(e,t,o)=>{o.d(t,{I:()=>l});o(581454);var n=()=>o(496603),r=()=>o(751156),i=()=>o(654062);function l(e){const{collectionContextStore:t,environment:o,query:l,property:a,newAggregation:s}=e,c=t.collectionViewStore();if(!c)return;let u=l.aggregations?[...l.aggregations]:[];const p=(l.aggregations||[]).findIndex((e=>e.property===a));u=p<0?n().oE([...u,s]):n().oE(u.map(((e,t)=>p===t?s:e)));const d={...l,aggregations:u};!t.isClientModeEnabledStore.state&&s&&t.asyncAggregationStatusStore.setState({calculating:!0,aggregation:s,changingType:!0}),r().createAndCommit({userAction:"TableAggregationRow.handleTableAggregationChange",environment:o,canUndo:!0,perform:e=>{(0,i().F)({collectionViewStore:c,update:{query2:d},transaction:e})}})}},509060:(e,t,o)=>{o.d(t,{A:()=>i});o(296540);var n=()=>o(959013),r=o(474848);const i=function(e){let{on:t,menuListItemProps:i}=e;return(0,r.jsx)(o(574036).A,{...i,on:t,style:{alignItems:"flex-start",paddingTop:8,paddingBottom:8},title:(0,r.jsx)(n().sA,{defaultMessage:"Show large counts as 99+",id:"BoardAggregations.aggregationLimitToggle.title"}),captionStyle:{marginTop:6},shouldWrapCaption:!0,caption:(0,r.jsx)(n().sA,{defaultMessage:"This improves performance for large databases.",id:"BoardAggregations.aggregationLimitToggle.description"})})}},532564:(e,t,o)=>{o.d(t,{V:()=>a,Z:()=>l});o(16280);var n=o(296540),r=o(474848);const i=n.createContext(void 0);function l(e){return(0,r.jsx)(i.Provider,{value:e.value,children:e.children})}function a(){const e=n.useContext(i);if(!e)throw new Error("useChartStore must be used within a ChartContextProvider");return e}i.displayName="ChartContext"},541235:(e,t,o)=>{o.d(t,{YD:()=>i,c$:()=>n,q_:()=>r});const n={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},r="completed",i="dismissed"},607517:(e,t,o)=>{o.d(t,{V:()=>m,r:()=>g});o(898992),o(354520),o(672577),o(581454);var n=()=>o(921598),r=()=>o(496603),i=()=>o(10594),l=()=>o(972435),a=()=>o(436696),s=()=>o(901389),c=()=>o(751156),u=()=>o(786452),p=()=>o(878781),d=()=>o(916260);function g(e){const{environment:t,collectionContextStore:o,isHidden:g,groupByKey:m,groupsFormatKey:y,currentGroups:v,newGroupIds:f}=e,h=(0,n().H2)(o.normalizedFormatStore.state,m,y),x=h?(0,n().Kq)(h):void 0,S=v.filter((e=>f.indexOf((0,n().Ix)(e))<0)),C=v.filter((e=>f.indexOf((0,n().Ix)(e))>=0)),b=r().Ul(C,(e=>{const t=f.indexOf((0,n().Ix)(e));return t>=0?t:1/0})),A=g?[...S,...b]:[...b,...S];c().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${y}`,environment:t,canUndo:!0,perform:e=>{(0,u().y)({sortType:"manual",environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,transaction:e}),(0,d().o)({collectionContextStore:o,newGroups:A,groupsFormatKey:y,transaction:e})}});const j="board_columns"===y?g?"board_reorder_hidden_groups":"board_reorder_groups":g?"reorder_hidden_groups":"reorder_groups";(0,a().X)({environment:t,collectionContextStore:o,action:j}),h&&x&&function(e){const{environment:t,collectionContextStore:o,groupByKey:n,groupsFormatKey:r,previousGroupBy:a,previousSortType:d}=e;"manual"!==d&&s().ui({message:l().A.formatMessage(p().D.removeGroupSortingConfirmation,{sortType:l().A.formatMessage((0,i().rA)(a,d))}),items:[{label:l().A.formatMessage(p().D.removeGroupSortingButton),color:"red",onAccept:()=>{}},{label:l().A.formatMessage(p().D.removeGroupSortingCancel),onAccept:()=>{c().createAndCommit({userAction:"collectionGroupActions.offerToRemoveGroupSort",environment:t,canUndo:!0,perform:e=>{(0,u().y)({environment:t,collectionContextStore:o,transaction:e,groupByKey:n,groupsFormatKey:r,sortType:d})}})}}],showCancel:!1,keepFocus:!0})}({environment:t,collectionContextStore:o,groupByKey:m,groupsFormatKey:y,previousGroupBy:h,previousSortType:x.type})}function m(e){var t;const{environment:o,collectionContextStore:i,groupByKey:l,groupsFormatKey:s,currentGroups:p,newGroupIds:g,containsAllGroups:m}=e;let y=(null===(t=i.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore(s).getValue())??[];y=y.map((e=>{const t={...e};return delete t.emptyHidden,t}));let v=p||y;m||(v=0===y.length?p:y);let f=r().Ul(v,(e=>{const t=g.indexOf((0,n().Ix)(e));return t>=0?t:1/0}));f=f.map((e=>y.find((t=>(0,n().Mn)(e,t)))??e));const[h,x]=r().jB(f,(e=>!e.hidden)),S=[...h,...x];c().createAndCommit({userAction:`collectionGroupActions.handleGroupReorder#${s}`,environment:o,canUndo:!0,perform:e=>{(0,u().y)({sortType:"manual",environment:o,collectionContextStore:i,groupByKey:l,groupsFormatKey:s,transaction:e}),(0,d().o)({collectionContextStore:i,newGroups:S,groupsFormatKey:s,transaction:e})}});let C="reorder_groups";"board_columns"===s?C="board_reorder_groups":"chart_subgroups"===s&&(C="chart_reorder_groups"),(0,a().X)({environment:o,collectionContextStore:i,action:C})}},610101:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return!1}}const r=new n},632537:(e,t,o)=>{o.d(t,{A:()=>D});o(898992),o(672577);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),a=()=>o(764880),s=()=>o(584262),c=()=>o(921598),u=()=>o(970013),p=()=>o(713998),d=()=>o(784892),g=()=>o(729650),m=()=>o(72135),y=()=>o(799829),v=()=>o(959013),f=()=>o(534177),h=()=>o(284371),x=()=>o(686526),S=()=>o(374562),C=()=>o(519839),b=()=>o(186445),A=()=>o(10594),j=()=>o(522827),k=()=>o(23815),_=()=>o(492414),w=()=>o(351360),M=()=>o(630116),V=()=>o(330557),B=()=>o(831194),G=()=>o(704152),I=()=>o(406699),T=()=>o(625830),F=()=>o(296798),P=()=>o(614505),R=()=>o(16006),L=()=>o(859428),K=()=>o(448693),E=()=>o(566081),z=()=>o(399762),O=o(474848);const D=function(e){let{schema:t,groupFormat:n,collectionContextStore:r,isHiddenGroup:l,style:a,uncategorizedIconStyle:s,currentGroups:c,groupBy:p,onChange:d,onClose:g,disabled:m}=e;const y=(0,i().uB)(void 0,o(463830).A),v=(0,i().K8)((()=>{const e=r.groupsStore.getGroupState(n);return null==e?void 0:e.groupUiParentStore}),[r,n]),f=(0,i().K8)((()=>{const e=t[n.property];if(e&&(0,u().nC)(e)&&v)return(0,o(685889).LQ)(e,v)}),[t,n,v]),h=n.value,x=void 0===h.value,S=t[n.property];if(!S)return null;if(x)return(0,O.jsx)(ee,{groupFormat:n,schema:t,isHiddenGroup:l,collectionContextStore:r,style:a,uncategorizedIconStyle:s,parentStore:v});if("formula"===h.type){if("formula"!==h.type)return null;const e=h.value;return e?(0,O.jsx)(ce,{schema:t,currentGroups:c,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:a,isHiddenGroup:l,collectionContextStore:r,buttonPopupStore:y,parentStore:v,relatedCollectionAppConfigUri:f,groupValue:e,propertySchema:S}):null}return(0,O.jsx)(ce,{schema:t,currentGroups:c,groupBy:p,groupFormat:n,onChange:d,onClose:g,disabled:m,style:a,isHiddenGroup:l,collectionContextStore:r,buttonPopupStore:y,parentStore:v,relatedCollectionAppConfigUri:f,groupValue:h,propertySchema:S})},H={overflow:"hidden",padding:3,borderRadius:4,fontWeight:h().Wy.medium};function N(e){const{isHiddenGroup:t}=e;return t?(0,O.jsx)($,{...e,tooltipEvents:void 0}):(0,O.jsx)(L().A,{renderTooltip:()=>(0,O.jsx)(v().sA,{defaultMessage:"Any items with an empty <b>{name}</b> property will go here. This group cannot be removed.",values:{name:null,b:e=>(0,O.jsx)("span",{style:{fontWeight:h().Wy.semibold},children:e})},id:"database.boardView.uncategorizedColumnTooltip"}),style:{width:240},textWrap:!0,render:t=>(0,O.jsx)($,{...e,tooltipEvents:t})})}function $(e){const t={display:"flex",alignItems:"center",lineHeight:1.2,paddingLeft:2,paddingRight:4,whiteSpace:"nowrap",overflow:"hidden",fontWeight:h().Wy.medium},{style:o,uncategorizedIconStyle:n,tooltipEvents:r,formattedLabelMessage:i}=e;return(0,O.jsxs)("div",{style:{...t,paddingLeft:0,...o},...r,children:[(0,g().M)({width:14,marginLeft:6,marginRight:6,...n}),(0,O.jsx)("span",{style:{marginLeft:4,...h().RC},children:i})]})}function W(e){let{value:t}=e;return"other"===t.type?(0,O.jsx)(v().sA,{defaultMessage:"Other",id:"database.collectionGroupValue.textGroup.otherValue"}):"alphabet_prefix"===t.type||"exact"===t.type?(0,O.jsx)(O.Fragment,{children:t.value}):void(0,f().HB)(t)}function U(e){let{groupFormat:t,schema:o}=e;const n=o[t.property];if(!n||"status"!==n.type)return null;const r=t.value;if(r.type!==n.type)return null;const{value:i}=r;if(!i)return null;const l=n.options??[],a=n.groups??[];if("by_group"===i.type){const e=a.find((e=>e.name===i.group));return e?(0,O.jsx)(B().RS,{group:e,style:{fontWeight:500},showIcon:!0,showColor:!0}):null}if("by_option"===i.type){const e=(0,p().jy)(l,i.option),t=e&&a.find((t=>{var o;return null===(o=t.optionIds)||void 0===o?void 0:o.includes(e.id)}));return e?(0,O.jsx)("span",{style:{fontWeight:500,lineHeight:"normal",overflow:"hidden",paddingRight:6},children:(0,O.jsx)(z().q,{format:d().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1,groupColor:null==t?void 0:t.color})}):null}(0,f().HB)(i)}function q(e){let{value:t}=e;const o=(0,v().tz)();return(0,O.jsx)(O.Fragment,{children:(0,A().nc)({intl:o,value:t})})}function Z(e){let{value:t,format:o}=e;const n=(0,v().tz)();return(0,O.jsx)(O.Fragment,{children:(0,A()._T)({intl:n,value:t,format:o})})}function Y(e){let{groupValue:t,propertySchema:o,style:n}=e;const r=(0,l().IS)((()=>({checkboxStyle:{display:"inline-flex",marginRight:6},wrapperStyle:{fontWeight:h().Wy.medium,marginRight:3,display:"flex",alignItems:"center"}})),[]);return"checkbox"!==t.type?null:(0,O.jsxs)("div",{style:{...h().RC,...r.wrapperStyle,...n},children:[(0,O.jsx)(T().A,{checked:t.value,checkSize:10,size:14,disabled:!0,style:r.checkboxStyle}),(0,O.jsx)("span",{children:null==o?void 0:o.name})]})}function X(e){let{groupValue:t,style:o}=e;return(0,c().DH)(t)&&t.value?(0,O.jsx)("div",{style:{...J,...h().RC,...o},children:(0,O.jsx)(q,{value:t.value})}):null}function Q(e){let{groupValue:t,propertySchema:o,style:n}=e;if("number"!==t.type||!t.value)return null;const r=(null==o?void 0:o.number_format)||m().C4;return(0,O.jsx)("div",{style:{...J,...n},children:(0,O.jsx)(Z,{value:t.value,format:r})})}const J={overflow:"hidden",padding:3,paddingRight:6,borderRadius:4,fontWeight:h().Wy.medium};function ee(e){let{groupFormat:t,schema:o,isHiddenGroup:n,collectionContextStore:r,style:l,uncategorizedIconStyle:a,parentStore:s}=e;const c=o[t.property],p=(0,i().K8)((()=>r.collectionStore()),[r]),d=(0,i().K8)((()=>{let e=!1;return null!=p&&p.isDefined()&&c&&(0,u().nC)(c)&&s&&(e=(0,k().Vu)({collectionStore:p,property:t.property,propertySchema:c,parentStore:s})),e}),[p,t,c,s]);if(!c)return null;const{name:g}=c;return d?(0,O.jsx)(N,{style:l,uncategorizedIconStyle:a,isHiddenGroup:n,formattedLabelMessage:(0,O.jsx)(v().sA,{...k().zX.sprintUncategorizedGroup,values:{name:g}})}):(0,O.jsx)(N,{style:l,uncategorizedIconStyle:a,isHiddenGroup:n,formattedLabelMessage:(0,O.jsx)(v().sA,{...A().K0.emptyGroupLabel,values:{name:g}})})}function te(e){let{style:t,collectionContextStore:o,groupValue:n,parentStore:r}=e;const l=(0,i().K8)((()=>{var e;return null===(e=o.collectionViewBlockStore())||void 0===e?void 0:e.id}),[o]),a=r&&"location"===n.type&&n.value?M().md.createChildStore(r,n.value):void 0,c=(0,i().K8)((()=>null==a?void 0:a.getParentBlockStore()),[a]),u=(0,i().K8)((()=>{let e=s().y8.LocationProperty;return l?((0,b().sj)(l)&&(e=o.isInHomeWidgetStore.state?s().y8.PersonalHomeTileTasks:s().y8.PersonalHomePageTasks),e):e}),[l,o]),p=(0,i().K8)((()=>c?(0,_().Ay)({store:c,fullyQualified:!1,pageVisitSource:u}):void 0),[c,u]),d=(0,i().K8)((()=>null==a?void 0:a.getIcon()),[a]);return"location"===n.type&&n.value&&r&&a?(0,O.jsxs)(F().A,{href:p,style:{...t,display:"flex"},ignoreLocalHoverState:!0,children:[(0,O.jsx)(P().B,{disabled:!0,icon:d,size:20,isEmptyPage:!1,style:{marginTop:2,marginRight:6}}),(0,O.jsx)(R().A,{store:a,underline:!0,style:{fontWeight:h().Wy.medium}})]}):null}function oe(e){let{groupValue:t,schema:o,groupFormat:n,collectionContextStore:r,style:l,parentStore:a,relatedCollectionAppConfigUri:s}=e;const p=o[n.property],d=p&&"relation"===p.type?u().Nv(p):void 0,g=a&&d?M().md.createChildStore(a,d):void 0,m=(0,i().K8)((()=>null==g?void 0:g.isDefined()),[g]);return a&&"relation"===t.type&&p&&"relation"===p.type&&d&&g&&t.value?(0,c().zx)(t.value)?s&&m?(0,O.jsx)(ne,{relatedCollectionAppUri:s,groupValueInner:t.value,collectionContextStore:r,collectionPointer:d,targetCollectionStore:g,parentStore:a,style:l,relationPropertySchema:p}):null:(0,c().WO)(t.value)?(0,O.jsx)(re,{parentStore:a,groupValueInner:t.value,collectionContextStore:r,propertySchema:p}):null:null}function ne(e){var t;let{relatedCollectionAppUri:o,groupValueInner:n,collectionContextStore:l,collectionPointer:a,targetCollectionStore:c,relationPropertySchema:u,parentStore:p,style:d}=e;const g=(0,v().tz)(),m=(0,r().v3)(),b=n.value.variable,A=(0,i().K8)((()=>c.isDefined()),[c]),k=(0,i().K8)((()=>(0,j().ax)(l,b,a,c)),[l,b,a,c]),M=(0,i().O$)(w().AppStoreMainEditorCurrentBlockStore),V=(0,i().K8)((()=>k?C().wy({environment:m,store:k,mainEditorCurrentBlockStore:M,collectionContextStore:l})??(0,_().Ay)({store:k,pageVisitSource:s().y8.LinkInPage}):void 0),[m,k,M,l]);let B;"current"===b?B=g.formatMessage(S().DZ.tasksCurrentSprintV2ViewNamePrefix):"next"===b?B=g.formatMessage(S().DZ.tasksNextSprintV2ViewNamePrefix):"last"===b?B=g.formatMessage(S().DZ.tasksLastSprintV2ViewNamePrefix):(0,f().HB)(b);const G=null===(t=y().n$[o])||void 0===t?void 0:t[b];if(A){if(!k)return(0,O.jsx)("div",{style:{fontWeight:h().Wy.medium},children:(0,O.jsx)(v().sA,{...null==G?void 0:G.messageDescriptor})});if(k)return(0,O.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,O.jsxs)("div",{style:{fontWeight:h().Wy.medium,marginBottom:.25},children:[B,":"]}),(0,O.jsx)(F().A,{style:{...d,marginLeft:1},innerStyle:{...J},href:V,onClick:()=>{x().os({collectionSettingsStore:l.settingsStore})},children:(0,O.jsx)(E().A,{format:K().Ay.Format.Medium,blockId:k.id,isSingle:!0,shouldShrink:!0,parentStore:p})})]})}return(0,O.jsx)("div",{style:{fontWeight:h().Wy.medium,marginBottom:.25},children:(0,O.jsx)(v().sA,{...null==G?void 0:G.messageDescriptor})})}function re(e){let{parentStore:t,groupValueInner:o,collectionContextStore:n,propertySchema:l,style:a}=e;const c=(0,r().v3)(),u=M().Bv.createChildStore(t,o),p=(0,i().O$)(w().AppStoreMainEditorCurrentBlockStore),d=(0,i().K8)((()=>C().wy({environment:c,store:u,mainEditorCurrentBlockStore:p,collectionContextStore:n})??(0,_().Ay)({store:u,pageVisitSource:s().y8.LinkInPage})),[c,u,p,n]);return(0,O.jsx)(F().A,{style:a,innerStyle:{...J},href:d,onClick:()=>{x().os({collectionSettingsStore:n.settingsStore})},children:(0,O.jsx)(E().A,{format:K().Ay.Format.Medium,blockId:o.id,isSingle:!0,shouldShrink:!0,parentStore:t})})}function ie(e){let{schema:t,currentGroups:o,groupBy:n,groupFormat:r,onChange:i,onClose:l,buttonPopupStore:a,parentStore:s}=e;return s?(0,O.jsx)(V().p,{groupFormat:r,groupBy:n,currentGroups:o,schema:t,onChange:e=>{a.reset(),null==i||i(e)},onClose:()=>{a.reset(),null==l||l()},parentStore:s}):null}function le(e){var t;let{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:c,disabled:g,style:m,buttonPopupStore:y,parentStore:v}=e;const f=(0,r().v3)(),h=(0,n.useCallback)((()=>(0,O.jsx)(ie,{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:c,buttonPopupStore:y,parentStore:v})),[o,i,l,a,s,c,y,v]),x=o[a.property];if(!x||!u().lx(x))return null;const S=a.value;if(null===(t=x.options)||void 0===t||!t.length||void 0===S.value||S.type!==x.type)return null;const C=(0,p().jy)(x.options,S.value);return C?(0,O.jsx)(I().Ay,{render:h,disabled:g,buttonPopupStore:y,popupType:f.device.isMobile?I().z7.SlideUp:I().z7.Popup,originGap:4,renderOrigin:e=>(0,O.jsx)(G().A,{style:{...J,...m},disabled:g,...e,children:(0,O.jsx)(z().O,{format:d().NY.Medium,isSingle:!0,value:C.value,color:C.color,showRemoveButton:!1})})}):null}function ae(e){let{groupValue:t,schema:o,currentGroups:l,groupBy:s,groupFormat:u,onChange:p,onClose:d,disabled:g,style:m,isHiddenGroup:y,buttonPopupStore:v,parentStore:f}=e;const h=(0,r().v3)(),x=(0,n.useCallback)((()=>(0,O.jsx)(ie,{schema:o,currentGroups:l,groupBy:s,groupFormat:u,onChange:p,onClose:d,buttonPopupStore:v,parentStore:f})),[o,l,s,u,p,d,v,f]),{value:S}=t,C=(0,i().K8)((()=>t.value&&(0,c().GG)(t)&&f?(0,a().xC)({pointer:t.value,getRecordValue:f.getRecordValue}):void 0),[t,f]);return(0,c().GG)(t)&&S&&f&&null!=C&&C.asActor?(0,O.jsx)(I().Ay,{render:x,disabled:g,buttonPopupStore:v,popupType:h.device.isMobile?I().z7.SlideUp:I().z7.Popup,originGap:4,renderOrigin:e=>(0,O.jsx)(G().A,{style:{...J,...m},disabled:g,...e,children:(0,O.jsx)(K().Ay,{format:K().Ay.Format.Medium,actor:C,showRemoveButton:!1,isSingle:!0,disableAvatarTooltip:y,shouldShrink:!0})})}):null}function se(e){let{groupValue:t,schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:u,disabled:p,style:d,buttonPopupStore:g,parentStore:m}=e;const y=(0,r().v3)(),v=(0,n.useCallback)((()=>(0,O.jsx)(ie,{schema:o,currentGroups:i,groupBy:l,groupFormat:a,onChange:s,onClose:u,buttonPopupStore:g,parentStore:m})),[o,i,l,a,s,u,g,m]);if(!(0,c().kO)(t))return null;if(void 0!==t.value){const e=(0,O.jsx)(W,{value:t.value});return"exact"===t.value.type?(0,O.jsx)(I().Ay,{render:v,disabled:p,buttonPopupStore:g,popupType:y.device.isMobile?I().z7.SlideUp:I().z7.Popup,originGap:4,renderOrigin:t=>(0,O.jsx)(G().A,{style:{...H,...h().RC,...d},disabled:p,...t,children:e})}):(0,O.jsx)("div",{style:H,children:e})}return null}function ce(e){let{groupValue:t,propertySchema:o,schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:u,style:p,isHiddenGroup:d,collectionContextStore:g,buttonPopupStore:m,parentStore:y,relatedCollectionAppConfigUri:v}=e;return"select"===t.type||"multi_select"===t.type?(0,O.jsx)(le,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:u,style:p,buttonPopupStore:m,parentStore:y}):"status"===t.type?(0,O.jsx)(U,{groupFormat:l,schema:n}):(0,c().r4)(t.type)?(0,O.jsx)(ae,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:u,style:p,isHiddenGroup:d,buttonPopupStore:m,parentStore:y,groupValue:t}):"relation"===t.type?(0,O.jsx)(oe,{schema:n,groupFormat:l,collectionContextStore:g,style:p,parentStore:y,relatedCollectionAppConfigUri:v,groupValue:t}):"location"===t.type?(0,O.jsx)(te,{style:p,collectionContextStore:g,parentStore:y,groupValue:t}):(0,c()._o)(t.type)?(0,O.jsx)(X,{style:p,groupValue:t}):(0,c().Vs)(t.type)?(0,O.jsx)(se,{schema:n,currentGroups:r,groupBy:i,groupFormat:l,onChange:a,onClose:s,disabled:u,style:p,buttonPopupStore:m,parentStore:y,groupValue:t}):"number"===t.type?(0,O.jsx)(Q,{style:p,groupValue:t,propertySchema:"number"===o.type?o:void 0}):"checkbox"===t.type?(0,O.jsx)(Y,{style:p,propertySchema:o,groupValue:t}):void(0,f().HB)(t.type)}},636740:(e,t,o)=>{function n(e){const{dateRangeStart:t,dateRangeEnd:o,collectionContextStore:n}=e;n.dateRangeStartStore.setState(t),n.dateRangeEndStore.setState(o)}o.d(t,{r:()=>n})},739135:(e,t,o)=>{o.d(t,{KD:()=>c,gt:()=>u,i9:()=>s,ll:()=>l,tb:()=>a,x$:()=>i});var n=()=>o(541235),r=()=>o(496603);function i(e,t){return l(u(e,t))}function l(e){return void 0!==e&&(e===n().q_||e===n().YD)}function a(e,t){if(l(t))return;const o=n().c$[e],r=o.steps.findIndex((e=>e.id===t));return-1===r?o.steps[0].id:r===o.steps.length-1?n().q_:o.steps[r+1].id}function s(e,t){const o=u(e,t);if(o&&!l(o))return a(t,o)}function c(e,t){const o=u(e,t);if(o)return function(e,t){const o=n().c$[e];var i;if(l(t))return null===(i=(0,r().HV)(o.steps))||void 0===i?void 0:i.id;const a=o.steps.findIndex((e=>e.id===t));return-1!==a&&0!==a?o.steps[a-1].id:void 0}(t,o)}function u(e,t){var o;if(!e)return;const r=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===r?n().c$[t].steps[0].id:r}},760077:(e,t,o)=>{o.d(t,{U:()=>l});var n=()=>o(246826),r=()=>o(751156),i=()=>o(407031);function l(e){const{viewToDuplicateStore:t,collectionContextStore:o,collectionViewStore:l,environment:a,temporaryStore:s}=e,c=o.collectionStore(),u=t.getType();if(!u||!c)return;const p=t.getName(),d=t.getPageSort(),g=t.getFormat(),m=t.getKeyStore("query2").getValue();r().createAndCommit({userAction:"CollectionSettingsDuplicateExistingView.duplicateViewSettings",environment:a,canUndo:!0,perform:e=>{n().zv({store:s??l,data:{name:p,type:u,page_sort:d,format:{...g,collection_pointer:c.pointer},query2:m},transaction:e})}}),(0,i().S)({collectionContextStore:o})}},786452:(e,t,o)=>{o.d(t,{y:()=>l});var n=()=>o(921598),r=()=>o(436696),i=()=>o(896628);function l(e){const{environment:t,collectionContextStore:o,transaction:l,groupByKey:a,groupsFormatKey:s,sortType:c}=e;if("chart_config"===a)return;const u=(0,n().H2)(o.normalizedFormatStore.state,a,s),p=o.collectionViewStore();if(!u||!p)return;if((0,n().Nf)(u).includes(c)){if("formula"===u.type){const e={...u,groupBy:{...u.groupBy,sort:{type:c}}};i().zA({stores:[p],update:{[a]:e},transaction:l})}else i().zA({stores:[p],update:{[a]:{...u,sort:{type:c}}},transaction:l});(0,r().X)({environment:t,collectionContextStore:o,action:"update_group_sort"})}}},817126:(e,t,o)=>{o.d(t,{G9:()=>p,Ld:()=>c,kg:()=>u});var n=()=>o(847249),r=()=>o(970013),i=()=>o(617871),l=()=>o(462853),a=()=>o(351360),s=()=>o(577437);function c(e){let{spaceId:t,userId:o}=e;const n=(0,s()._X)({name:"collection_connected_property_figma",spaceId:t,userId:o}),r=(0,s()._X)({name:"collection_connected_property_github",spaceId:t,userId:o}),l=(0,s()._X)({name:"collection_connected_property_google_drive",spaceId:t,userId:o}),a=(0,s()._X)({name:"collection_connected_property_zendesk",spaceId:t,userId:o});return{[i().e1]:n,[i().ob]:r,[i().Hd]:l,[i().k0]:a}}function u(e){if(!e)return;const t=e&&(0,r().UU)(e)?e.connectedRelation.integration_id:void 0;return(0,l().l)(t)}function p(e){const t=e.featureName,o=(0,n().K8)((()=>{var t;return e.spaceId??(null===(t=a().default.state.currentSpaceStore)||void 0===t?void 0:t.id)}),[e.spaceId]),r=(0,n().K8)((()=>{var t;return e.userId??(null===(t=a().default.state.currentUserStore)||void 0===t?void 0:t.id)}),[e.userId]);return(0,s()._X)({name:t,spaceId:o,userId:r})}},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},r=(0,o(340498).wt)("plusSmall",n)},883388:(e,t,o)=>{o.d(t,{Z:()=>n});const n={mergeWithCSV:new(o(645873).O2)("mergeWithCSV",(async()=>Promise.all([o.e(85864),o.e(92845),o.e(71718),o.e(55019)]).then(o.bind(o,727722))))}},888325:(e,t,o)=>{function n(e){return`${e.table}:${e.id}`}o.d(t,{_:()=>n})},893952:(e,t,o)=>{o.d(t,{A:()=>a});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(100622),l=o(474848);const a=function(e){const{color:t}=e;return(0,l.jsx)(o(760217).A,{...e,icon:(0,l.jsx)(s,{color:t}),title:(0,o(27178).mN)(t)})};function s(e){let{color:t}=e;const o=(0,r().DP)(),a=(0,n().v3)(),s=(0,i().LD)(o,t);return(0,l.jsx)("div",{style:{width:a.device.isMobile?24:18,height:a.device.isMobile?24:18,background:s.menuBackgroundColor,color:s.textColor,boxShadow:o.innerBorderBoxShadow,borderRadius:4}})}},916260:(e,t,o)=>{o.d(t,{o:()=>r});var n=()=>o(896628);function r(e){const{collectionContextStore:t,newGroups:o,groupsFormatKey:r,transaction:i}=e,l=t.collectionViewStore();l&&n().zA({stores:[l],update:{[r]:o},transaction:i})}},939466:(e,t,o)=>{o.d(t,{m:()=>s});o(898992),o(354520),o(581454);var n=()=>o(921598),r=()=>o(534177),i=()=>o(436696),l=()=>o(751156),a=()=>o(916260);function s(e){var t;const{environment:o,collectionContextStore:s,currentGroups:c,groupsFormatKey:u,groupFormat:p,action:d}=e,g="toggle_group_pin"===d&&"board_columns"!==u,m=(null===(t=s.collectionViewStore())||void 0===t?void 0:t.getFormatStore().getKeyStore(u).getValue())??[],y=new Map;for(const r of m)y.set((0,n().Ix)(r),r);const v=new Map;for(const r of c)v.set((0,n().Ix)(r),r);const f=c.filter((e=>!y.has((0,n().Ix)(e)))),h=f.length>0?[...m,...f]:m;if(!s.permissionScopesStore.state.canConfigureBlock||g)return h;const x=y.get((0,n().Ix)(p))??v.get((0,n().Ix)(p))??(0,n().QF)(p.property,p.value),S=h.map((e=>(0,n().Mn)(e,x)?"toggle_group_pin"===d?{...x,pinned:!x.pinned||void 0}:"toggle_group_visibility"===d?{...x,hidden:!x.hidden}:((0,r().ub)(d),x):e));return l().createAndCommit({userAction:"CollectionSettingsViewGroup.handleToggleGroupFormat",environment:o,canUndo:!0,perform:e=>{(0,a().o)({collectionContextStore:s,newGroups:S,groupsFormatKey:u,transaction:e})}}),(0,i().X)({environment:o,collectionContextStore:s,action:"toggle_group_pin"}),S}},975318:(e,t,o)=>{o.d(t,{D:()=>A});o(898992),o(823215),o(354520),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),a=()=>o(584262),s=()=>o(959013),c=()=>o(160568),u=()=>o(313209),p=()=>o(751156),d=()=>o(284371),g=o(474848);const m=n.memo((function(e){const{prefix:t,collectionName:o}=e,n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",fontWeight:d().Wy.medium,color:e.text.secondary,paddingLeft:8,paddingRight:8},databaseTitle:{...d().RC}})),[]);return(0,g.jsxs)("div",{style:n.container,children:[t,(0,g.jsxs)("span",{style:n.databaseTitle,children:[" ",o]})]})}));var y=()=>o(492414),v=()=>o(722872);const f=n.memo((function(e){const t=(0,r().v3)(),i=(0,s().tz)(),a=(0,l().IS)((e=>({link:{borderRadius:6,height:24,width:24,display:"flex"},button:{height:24,width:24,fill:e.icon.tertiary},icon:{width:20,height:20}})),[]),c=(0,n.useCallback)((()=>{o(148024).FH(t,{from:e.helpButtonContext})}),[t,e.helpButtonContext]);return(0,g.jsx)(o(187485).A,{href:e.href,external:!0,style:a.link,onClick:c,children:(0,g.jsx)(o(285790).A,{icon:o(406533).questionMarkCircleIcon,style:a.button,iconStyle:a.icon,ariaLabel:i.formatMessage({id:"helpButton.ariaLabel",defaultMessage:"Help"})})})}));var h=()=>o(763996),x=()=>o(419357),S=()=>o(939740),C=()=>o(89924);const b=(0,s().YK)({filterPlaceholder:{id:"collectionPicker.searchBarFilter.text",defaultMessage:"Filter…"}}),A=n.memo((function(e){const{collectionStore:t,isOverlay:a,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:p,canConfigureCollection:d,locked:m,onTemplateClick:y}=e,f=(0,r().Y0)(),[h,x]=(0,n.useState)(""),S=(0,i().uB)(void 0,o(970585).A),b=(0,i().K8)((()=>t.getTemplatePageStores().filter((e=>e.getAlive()))),[t]),A=(0,i().K8)((()=>b.every((e=>e.isReady()))),[b]),w=(0,i().K8)((()=>a&&null!=h&&h.length?(0,o(778078).Ay)(h,b,(e=>String(e.getProperties().title)??"")):b),[b,h,a]),M=(0,l().IS)((e=>({container:{fontSize:14,padding:f.isMobile?"12px 16px":"0 12px 4px 12px",color:e.text.tertiary,wordBreak:"keep-all",...f.isMobile&&{background:e.contentBackground,boxShadow:`0 1px 0 ${e.regularDividerColor}`,marginBottom:1}}})),[f.isMobile]);if(!A)return null;if(a){const e=b.length>6,n=f.isMobile?{menuType:v().gu.Modal,title:(0,g.jsx)(s().sA,{defaultMessage:"Database templates",id:"database.mobileTemplatesMenu.title"}),left:(0,g.jsx)(o(480095).CancelMenuText,{}),onClickLeft:p}:{menuType:v().gu.Popup,width:360};return(0,g.jsxs)(o(928600).A,{...n,header:(0,g.jsx)(j,{collectionStore:t}),children:[0===b.length&&(0,g.jsx)(C().A,{children:(0,g.jsx)("div",{style:M.container,children:(0,g.jsx)(s().sA,{defaultMessage:"Replicate page formats inside this database with templates.",id:"database.emptyTemplatesList.info"})})}),e?(0,g.jsx)(k,{templateInputValue:h,setTemplateInputValue:x}):null,(0,g.jsx)(_,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:p,canConfigureCollection:d,isOverlay:a,locked:m,onTemplateClick:y,menuListStore:S,templateInputValue:h,filteredTemplatePageStores:w,draggable:!(e&&h)})]})}return(0,g.jsx)(_,{collectionStore:t,onEmptyEnter:c,onEmptyPageClick:u,onCancelClick:p,canConfigureCollection:d,isOverlay:a,locked:m,onTemplateClick:y,menuListStore:S,templateInputValue:h,filteredTemplatePageStores:w,draggable:!0})})),j=n.memo((function(e){const{collectionStore:t}=e,{isMobile:n}=(0,r().Y0)(),a=(0,s().tz)(),c=(0,i().K8)((()=>(0,o(697650).Qo)({intl:a,collectionStore:t})),[t,a]),u=(0,l().IS)((()=>({container:{marginTop:6}})),[]);return n?null:(0,g.jsx)(o(678553).Ay,{style:u.container,title:(0,g.jsx)(m,{prefix:(0,g.jsx)(s().sA,{id:"database.templatesList.templatesFor",defaultMessage:"Templates for"}),collectionName:c}),right:(0,g.jsx)(f,{helpButtonContext:"collection_templates_menu",href:(0,o(836251).xS)("guides.databaseTemplates")})})})),k=n.memo((function(e){const{templateInputValue:t,setTemplateInputValue:i}=e,{isMobile:a,isAndroid:c}=(0,r().Y0)(),u=(0,s().tz)(),p=(0,n.useCallback)((e=>i(e.currentTarget.value)),[i]),d=(0,l().IS)((()=>({container:{margin:a?0:"10px 0"},input:{...c&&{borderBottom:"none"}}})),[c,a]);return(0,g.jsx)("div",{style:d.container,children:(0,g.jsx)(x().Ay,{value:t,focusInitial:!a||void 0,placeholder:u.formatMessage(b.filterPlaceholder),showClearButton:!0,inputLeft:(0,g.jsx)(x().Zf,{icon:o(207207).J}),onChange:p,style:d.input})})})),_=n.memo((function(e){const{filteredTemplatePageStores:t,draggable:l,collectionStore:s,onEmptyEnter:d,onEmptyPageClick:m,onCancelClick:v,canConfigureCollection:f,isOverlay:x,locked:b,onTemplateClick:A,menuListStore:j,templateInputValue:k}=e,_=(0,r().v3)(),{isMobile:M}=(0,r().Y0)(),V=(0,n.useContext)(o(175116).p2),B=(0,n.useContext)(o(484792).n),G=(0,i().K8)((()=>(0,o(611371).EF)(_)),[_]),I=(0,n.useCallback)((e=>{j.unsetFocus(),p().createAndCommit({userAction:"CollectionTemplatePicker.handleCollectionTemplatesReorder",environment:_,canUndo:!0,perform:t=>u().lU({collectionStore:s,newTemplateIds:e,transaction:t})})}),[_,s,j]),T=(0,n.useCallback)((()=>{var e;G&&(d(),c().ki(_,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:!0,collection_id:s.id,collection_view_id:null==V||null===(e=V.collectionViewStore())||void 0===e?void 0:e.id}))}),[_,s,d,V,G]),F=(0,n.useCallback)((e=>{G&&(m(e.event),c().ki(_,{template_type:"empty_page",from:"collections_template_picker",is_keyboard:"keydown"===e.event.type,...V&&(0,o(476492).sl)(V)}))}),[G,V,_,m]),P=(0,n.useCallback)((()=>{var e;if(!G)return;const{performResult:t}=p().createAndCommit({userAction:"CollectionTemplatePicker.newPage",environment:_,canUndo:!0,perform:e=>u().bI({environment:_,collectionStore:s,transaction:e,title:k})});if(t){const{mainEditorCurrentBlockStore:e}=o(351360).default.state,n=e?(0,y().Ay)({store:e,peekViewBlockId:t.id,fullyQualified:!1,pageVisitSource:a().y8.Create}):(0,y().Ay)({store:t,fullyQualified:!1,pageVisitSource:a().y8.Create});B?B(n):o(435009).oo({environment:_,url:n})}c().er(_,{collection_id:s.id,collection_view_id:null==V||null===(e=V.collectionViewStore())||void 0===e?void 0:e.id}),null==v||v()}),[G,_,s,V,k,v,B]),R=(0,n.useMemo)((()=>({key:"create-template",render:e=>(0,g.jsx)(w,{isOverlay:x,locked:b,menuListItemProps:e}),action:P})),[P,x,b]),L=(0,i().K8)((()=>null==V?void 0:V.defaultPageTemplateStore.state),[V]),K=(0,i().K8)((()=>({key:"empty",render:e=>0===t.length||""!==k?null:(0,g.jsx)(h().K,{collectionStore:s,canConfigureCollection:f,isOverlay:x,templateStore:void 0,isMobile:M,locked:b||!f,draggable:!0,isDefault:void 0===(null==L?void 0:L.id),onCancelClick:v,...e}),action:F})),[f,s,null==L?void 0:L.id,M,F,x,b,v,k,t.length]),E=(0,n.useCallback)((e=>{const t=e.getAutomationStore(),r=null!=t&&t.isActive()?t.getRecurrence():void 0,i=t&&!t.canEdit(),a="disabled_duplication"===(null==t?void 0:t.getStatus())||"disabled_inactive_space"===(null==t?void 0:t.getStatus()),c={key:e.id,render:t=>(0,n.createElement)(h().K,{...t,key:e.id,isOverlay:x,collectionStore:s,canConfigureCollection:f,templateStore:e,isMobile:M,locked:b,onCancelClick:v,draggable:l,isDefault:(null==L?void 0:L.id)===e.id,recurrence:r,recurrenceDisabled:a,recurrenceButtonDisabled:i}),action:t=>{G&&A({templateStore:e,isKeyboard:"keydown"===t.event.type,useCrdt:(0,o(518736).D8)(s.getSpaceStore())})}};return c}),[f,G,s,null==L?void 0:L.id,l,M,x,b,v,A]),z=(0,i().K8)((()=>{const e=t.map((e=>e.id)),n=[0!==t.length?{key:"templates",render:t=>{if(0===t.children.length)return null;const n=t.children.slice(0,t.children.length-1),r=t.children[t.children.length-1];return(0,g.jsx)(C().A,{...t,disableDesktopPadding:!x,disableMobileBorders:!0,children:(0,g.jsxs)(g.Fragment,{children:[M||b||!f?n.map(((e,t)=>n[t])):(0,g.jsx)(o(439264).Ay,{direction:"vertical",keys:e,disabled:!l,renderKey:t=>n[e.indexOf(t)],onDrop:I}),r]})})},items:[...t.map(E),K]}:null,f?{key:"create-template",render:e=>(0,g.jsx)(C().A,{topBorder:x,disableDesktopPadding:!x,disableMobileBorders:!0,...e}),items:[R]}:null];return n.filter((e=>null!==e))}),[t,E,K,f,R,x,M,b,l,I]);return(0,g.jsx)(S().Ay,{type:S().Oh.Vertical,store:j,sections:z,onEmptyEnter:T,initialFocus:void 0,disableInitialScroll:!0,disableCommandEnter:!0,resetFocusOnMouseOut:!0})})),w=n.forwardRef((function(e,t){const{menuListItemProps:n,isOverlay:r,locked:i}=e,l=(0,g.jsx)(s().sA,{defaultMessage:"New template",id:"database.templateView.newTemplateButton"});return r?(0,g.jsx)(o(274652).A,{title:l,...n}):(0,g.jsx)(o(286611).J,{title:l,icon:(0,o(617668).plusIcon)(),type:"new_template",format:r?"collection-overlay":"page-menu-item",locked:i,...n})}))}}]);