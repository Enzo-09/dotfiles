"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[68224],{43972:(e,t,s)=>{s.d(t,{w:()=>l});s(296540);var o=()=>s(764880),r=()=>s(534177),n=()=>s(256863),i=()=>s(453697),a=s(474848);function l(e){const{actor:t}=e,s={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,a.jsx)(n().A,{botValue:t.asActor,...s}):(0,o().ps)(t)?(0,a.jsx)(i().A,{userValue:t.asActor,...s}):(0,o().h2)(t)?(0,a.jsx)(i().A,{userValue:void 0,...s}):void(0,r().HB)(t)}},67696:(e,t,s)=>{s.d(t,{y:()=>g});var o=s(296540),r=()=>s(847249),n=()=>s(401497),i=()=>s(959013),a=()=>s(745766),l=()=>s(907514),d=()=>s(962730),c=()=>s(706965),u=()=>s(859428),m=s(474848);function g(e){const{store:t,isExpanded:s,isWindowSmall:g,isElectron:p,isShowingTabBar:b,style:f}=e,h=(0,n().DP)(),x=(0,r().K8)((()=>t.getLastEditedTime()),[t]),[v,y]=(0,o.useState)("flex"),[S,I]=(0,o.useState)(0);(0,o.useEffect)((()=>{let e;return s||g?s?(I(0),y("none")):(I(0),e=setTimeout((()=>y("none")),150)):(y("flex"),e=setTimeout((()=>I(1)),150)),()=>clearTimeout(e)}),[s,g]);const A=x?(0,l().nl)(x,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):"";return A?(0,m.jsx)("span",{style:{opacity:S,transition:"opacity 150ms linear",display:v,alignItems:"center",fontSize:14,color:h.text.tertiary,height:28,whiteSpace:"nowrap",lineHeight:1.2,...f},children:(0,m.jsx)("div",{style:{display:"flex",flexFlow:"wrap"},children:(0,m.jsx)(u().A,{placement:d().W.Bottom,alignment:d().C.Start,renderTooltip:()=>(0,m.jsx)(c().A,{store:t,compactFormat:!0}),render:e=>{return(0,m.jsx)("div",{...e,style:{...(0,a().g)({noDrag:p&&!b})},children:(t=A,(0,m.jsx)(i().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:t}}))});var t}})})}):null}},419123:(e,t,s)=>{s.d(t,{P:()=>c,k:()=>d});s(898992),s(354520);var o=()=>s(847249),r=()=>s(774733),n=()=>s(645873),i=()=>s(508496),a=()=>s(486130),l=()=>s(756214);function d(e){const{navigableBlockStore:t}=e,{value:s}=(0,n().fJ)(r().commentsDependency),i=(0,o().K8)((()=>t&&s?s.discussionHelpers.getDiscussionsForSidebar({blockStore:t,currentUserId:t.userId,ignoreAfterTime:0}):[]),[s,t]);return(0,o().K8)((()=>t&&t.userId?(0,l().R)({userId:t.userId,blockStore:t,discussionStores:i,groupIdsUserIsIn:a()._.getSpacePermissionGroupIds({userId:t.userId,spaceId:t.getSpaceId()})}):[]),[t,i])}function c(e){const{navigableBlockStore:t,forceIncludeDiscussionIds:s}=e,r=d({navigableBlockStore:t});return(0,o().K8)((()=>{const e=i().default.getConfigKey("assume_comment_read","last_seen_at");return r.filter((t=>(null==s?void 0:s.has(t.id))||t.isUnread(e)))}),[r,s])}},441712:(e,t,s)=>{s.r(t),s.d(t,{PublicSharingTopbar:()=>j});s(296540);var o=()=>s(484714),r=()=>s(847249),n=()=>s(835066),i=()=>s(67696),a=()=>s(746084),l=()=>s(13679),d=()=>s(682944),c=()=>s(764172),u=()=>s(976582),m=()=>s(281401),g=()=>s(70191),p=()=>s(863059),b=()=>s(813401),f=()=>s(200562),h=()=>s(783423),x=()=>s(644914),v=()=>s(77246),y=()=>s(948914),S=()=>s(795179),I=()=>s(538233),A=s(474848);function j(e){const{store:t,showSidebarButton:s,isInvalidPage:j,isElectron:C}=e,B=(0,o().v3)(),{isMobile:k}=B.device,w=(0,r().K8)((()=>(0,x().Nk)(B)),[B]),P=(0,r().K8)((()=>{var e;return null===(e=B.currentUser)||void 0===e?void 0:e.isLoggedIn()}),[B]),T=(0,r().K8)((()=>(0,n().xK)(B,!1)<1150),[B]),F=(0,r().K8)((()=>t.isFormBlock()),[t]),{isShowingTabBar:K}=(0,r().O$)(y().A),_=(0,r().K8)((()=>{var e;return"suggest"===(null===(e=v().Uv.getStateForBlock(t.id))||void 0===e?void 0:e.mode)}),[t.id]),D=(0,p().Kh)({shouldRenderTemplateGalleryTopbar:!1}),U=(0,u().m)({location:"PublicSharing"});return(0,A.jsx)(l().A,{store:t,disableRectangularSelection:!0,disableEditNearestBlock:!0,render:()=>(0,A.jsxs)("div",{style:D,onDoubleClick:m().mz,children:[s&&(0,A.jsx)(f().z,{}),(0,A.jsx)(d()._,{topbarFeatureController:U}),!F&&g().s({store:t,isInvalidPage:j}),(0,A.jsx)("div",{style:{flexGrow:1,flexShrink:1}}),!F&&P&&(0,A.jsx)(i().y,{store:t,isExpanded:w,isWindowSmall:T,isElectron:C,style:{marginRight:12},isShowingTabBar:K??!1}),!k&&(0,A.jsxs)(A.Fragment,{children:[_&&(0,A.jsx)(h().M,{store:t,isVisible:!0}),(0,A.jsx)(c().Ay,{blockStore:t}),(0,A.jsx)(b().E,{store:t,buttonPopupStore:I().A}),(0,A.jsx)(a().A,{store:t,buttonPopupStore:S().A,useEllipsisIcon:!0,isPublicShareLink:!0})]})]})})}},706965:(e,t,s)=>{s.d(t,{A:()=>h});s(296540);var o=()=>s(847249),r=()=>s(401497),n=()=>s(764880),i=()=>s(310442),a=()=>s(824862),l=()=>s(798880),d=()=>s(959013),c=()=>s(534177),u=()=>s(284371),m=()=>s(43972),g=()=>s(972435),p=()=>s(907514),b=()=>s(646736),f=s(474848);function h(e){const{store:t}=e,s=(0,r().DP)(),h=(0,o().K8)((()=>t.getCreatedTime()),[t]),x=(0,o().K8)((()=>t.getLastEditedTime()),[t]),v=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,n().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),y=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,n().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),S=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const s=null==v?void 0:v.asActor;if(!s)return!1;const o=s.table;switch(o){case l().oo:return(0,b().dp)(e,s.id).isMember();case a().GP:return(0,b().Ts)(e,s.id).isMember();case i().yj:return!1;default:(0,c().HB)(o)}}),[t,v]),I=h?(0,p().nl)(h,{useCompactFormat:!0,useLowercase:!0}):"",A=x?(0,p().nl)(x,{useLowercase:!0,useCompactFormat:!0}):"";if(!(x?(0,p().nl)(x,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const j={display:"flex",gap:4,color:s.text.contrastSecondary,height:16,fontSize:12},C={size:14,style:{marginRight:2}},B=g().A.getIntl();return(0,f.jsxs)(f.Fragment,{children:[(e=>{let t;if(null!=y&&y.asActor)t=(0,f.jsx)(d().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,f.jsx)("span",{style:{fontWeight:u().Wy.medium,color:s.text.contrastPrimary},children:(0,f.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:y,...C}),(0,n().lR)(B,y)]})}),timestamp:A}});else{if(!A)return;o=A,t=(0,f.jsx)(d().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,f.jsx)("div",{style:{...j,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=v&&v.asActor&&S)t=(0,f.jsx)(d().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,f.jsx)("span",{style:{fontWeight:u().Wy.medium,color:s.text.contrastPrimary},children:(0,f.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:v,...C}),(0,n().lR)(B,v)]})}),timestamp:I}});else{if(!I)return;t=(0,f.jsx)(d().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:I}})}return(0,f.jsx)("div",{style:{...j,marginBottom:4},children:t})})(e.compactFormat)]})}},756214:(e,t,s)=>{s.d(t,{R:()=>i});s(898992),s(354520),s(581454),s(737550);var o=()=>s(919709);function r(e){const{userId:t,isFollowingPage:s,discussions:r,discussionToComments:n,groupIdsUserIsIn:i,includeDiscussionsWhereUserOnlyAuthor:a}=e,l=s?r:r.filter((e=>function(e){const{userId:t,comments:s,groupIdsUserIsIn:r}=e;return Boolean(s.some((e=>e.getCreatedById()===t||function(e){const{userId:t,comment:s,groupIdsUserIsIn:r}=e,n=o().Fbh(s.getText());if(n.includes(t))return!0;const i=o().FAS(s.getText());if(i.some((e=>r.has(e.groupId))))return!0;return!1}({userId:t,comment:e,groupIdsUserIsIn:r}))))}({userId:t,comments:n(e),groupIdsUserIsIn:i})));return a?l:l.filter((e=>function(e){const{userId:t,comments:s}=e;return Boolean(s.some((e=>e.getCreatedById()&&e.getCreatedById()!==t)))}({userId:t,comments:n(e)})))}var n=()=>s(534177);function i(e){var t;const{userId:s,blockStore:o,discussionStores:i,groupIdsUserIsIn:a}=e;return r({userId:s,isFollowingPage:Boolean(null===(t=o.getFollowStore())||void 0===t||null===(t=t.getModel())||void 0===t?void 0:t.isFollowingAllComments()),discussions:i,discussionToComments:e=>e.getCommentStores().map((e=>e.getModel())).filter(n().O9),groupIdsUserIsIn:a,includeDiscussionsWhereUserOnlyAuthor:!0})}},764172:(e,t,s)=>{s.d(t,{Ay:()=>D,tS:()=>_,xG:()=>U});s(898992),s(737550);var o=s(296540),r=()=>s(484714),n=()=>s(847249),i=()=>s(401497),a=()=>s(90023),l=()=>s(49621),d=()=>s(959013),c=()=>s(100622),u=()=>s(774733),m=()=>s(555776),g=()=>s(116008),p=()=>s(989423),b=()=>s(38337),f=()=>s(645873),h=()=>s(963589),x=()=>s(419123),v=()=>s(455994),y=()=>s(869562),S=()=>s(644914),I=()=>s(737230),A=()=>s(962730),j=()=>s(712505),C=()=>s(285790),B=()=>s(859428),k=()=>s(863059),w=s(474848);const P=(0,d().YK)({updates:{id:"topbar.commentsButton.title",defaultMessage:"Comments"}});function T(e){const{blockStore:t}=e,s=(0,x().P)({navigableBlockStore:t});return(0,w.jsx)(K,{blockStore:t,hasUnreadComments:Boolean(s.length)})}function F(e){const{blockStore:t}=e,{value:s}=(0,f().fJ)(u().commentsDependency),o=(0,n().K8)((()=>{if(!s)return!1;const{discussionViewActions:e,discussionHelpers:{getDiscussionsForSidebar:o,getAndSortCommentStoresByTime:r}}=s;return o({blockStore:t,ignoreAfterTime:Date.now()}).some((t=>!t.getResolved()&&r(t).some((s=>e.isCommentUnread({discussionStore:t,commentStore:s})))))}),[s,t]);return(0,w.jsx)(K,{blockStore:t,hasUnreadComments:o})}function K(e){const{blockStore:t,hasUnreadComments:s}=e,i=(0,d().tz)(),a=(0,r().v3)(),{value:c}=(0,f().fJ)(u().commentsDependency),x=(0,h().X)("comment_sidebar_for_you"),T=(0,n().K8)((()=>x?S().Nk(a):S().me(a)),[a,x]),F=(0,n().K8)((()=>{const e=j().default.state.open;return v().A.getPanelState(e?"peek":"mainPage").isOpen}),[]),K=T?(0,w.jsx)("div",{style:{textAlign:"center"},children:(0,w.jsx)(d().sA,{defaultMessage:"Close all comments",id:"topbar.commentsButton.closeSidebartTooltip"})}):(0,w.jsx)("div",{style:{textAlign:"center"},children:(0,w.jsx)(d().sA,{defaultMessage:"View all comments",id:"topbar.commentsButton.openSidebartTooltip"})}),D=(0,n().K8)((()=>(m().A.state.isActivelyComposing||g().A.hasContent())&&g().A.isDraftCommentOnValidSelection()&&g().A.ifPropertyCommentShouldDisplay()),[]),U=(0,k().gQ)(),E=(0,o.useCallback)((()=>{var e;const o=null==c||null===(e=c.discussionHelpers)||void 0===e?void 0:e.getDiscussions,r=!!o&&o(t).length>0,n=g().A.state.open;(0,p().u4)({environment:a,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:r,has_unread_indicator:s||n}}}),y().handleSidebarButtonClick(a,t,I().tF.Comments,"topbar")}),[a,t,s,c]);return(0,w.jsx)(B().A,{placement:A().W.Bottom,renderTooltip:()=>K,render:e=>(0,w.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,w.jsx)(C().A,{...e,icon:l().h,iconStyle:U.icon,onClick:E,style:U.iconButton,ariaLabel:i.formatMessage(P.updates),hovered:T&&!F&&!j().default.state.open,className:b().rm}),(s||D)&&(0,w.jsx)(_,{})]})})}function _(){const e=(0,r().v3)(),{isMobile:t}=e.device,{dot:s}=(0,i().IS)((e=>({dot:{position:"absolute",top:t?6:1.8,right:t?10:5.5,height:11,width:11,border:`2px solid ${e.whiteButtonBackground}`,borderRadius:12,background:c().Ay.red,pointerEvents:"none"}})),[t]);return(0,w.jsx)("div",{style:s})}const D=function(e){const{blockStore:t}=e;return(0,h().X)("comment_sidebar_for_you")?(0,w.jsx)(T,{blockStore:t}):(0,w.jsx)(F,{blockStore:t})};function U(e){const{device:t,isPersonalHomePage:s,isFormBlock:o,store:r}=e,n=r.isPost()&&!r.isPublishedPost();return!t.isMobile&&!s&&!o&&(!r.isCollectionView()||r.isCollectionViewPageWithContent())&&!n&&(0,a().SF)(r.getSystemBlockTypeStore().getValue())}},813401:(e,t,s)=>{s.d(t,{E:()=>n});var o=()=>s(645873);const r=new(o().O2)("topbarShareButton",(async()=>await Promise.all([s.e(75134),s.e(43380),s.e(9304),s.e(96346),s.e(55373),s.e(36192),s.e(44711),s.e(62475),s.e(3151),s.e(16471),s.e(53321),s.e(58550),s.e(98629),s.e(90825),s.e(37353),s.e(29151),s.e(31895),s.e(83647),s.e(22900),s.e(49889),s.e(97727),s.e(85128),s.e(83700),s.e(95555),s.e(58823),s.e(85864),s.e(92845),s.e(71718),s.e(83324),s.e(74562),s.e(38744),s.e(63077),s.e(28271),s.e(17254),s.e(41870),s.e(90966),s.e(42120),s.e(7114),s.e(67435),s.e(92012),s.e(22462),s.e(8184),s.e(4422),s.e(28721),s.e(28866),s.e(21194),s.e(6463),s.e(71993),s.e(1213),s.e(17989),s.e(90625),s.e(59794),s.e(78846),s.e(26483),s.e(43741),s.e(81768),s.e(94387),s.e(82850),s.e(52393),s.e(77692),s.e(75601),s.e(11341),s.e(7060),s.e(82136),s.e(12739),s.e(26090),s.e(73594),s.e(93282),s.e(12341),s.e(50984),s.e(66984),s.e(40828),s.e(26199),s.e(18057),s.e(90978),s.e(56264),s.e(5023),s.e(55927),s.e(61151),s.e(72226),s.e(48199),s.e(67780),s.e(96933),s.e(87598),s.e(23063),s.e(3965),s.e(84341),s.e(80533),s.e(45620),s.e(58221),s.e(44763),s.e(8081),s.e(67183),s.e(64598),s.e(82720),s.e(4253),s.e(86787),s.e(77465),s.e(24593),s.e(80896),s.e(1440),s.e(67378),s.e(58504),s.e(97308),s.e(63996),s.e(20636),s.e(66268),s.e(55717),s.e(7005),s.e(40186),s.e(22585),s.e(73206),s.e(43020),s.e(33235),s.e(91957),s.e(84176),s.e(16357),s.e(75681)]).then(s.bind(s,136805)))),n=(0,o()._h)(r,(e=>e.TopbarShareButton))}}]);