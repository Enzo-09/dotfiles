"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[34208,90871],{174723:(e,t,n)=>{n.d(t,{$Y:()=>p,AF:()=>d,Px:()=>m,Up:()=>l,dY:()=>u});n(898992),n(354520);var o=()=>n(662303),a=()=>n(427704),r=()=>n(939768),i=()=>n(780054),c=()=>n(22102),s=()=>n(630116);async function d(e,t){const n=await c().k.load();return e.filter((e=>{const o=e.getCopiedFromPointer();return Boolean(o&&n.isTemplate(o)&&Boolean(t&&t(o.id)))}))}function l(e){const t=window.location.href;return r().O$(t,{tg:e.templateGalleryItem})}function u(e){let t;return e instanceof s().$x?t=e.getBlockId():"type"in e?(e.type,t=e.template.rootId):t=e.rootId,t}function m(e){const t=o().locale&&"en-us"!==o().locale.toLocaleLowerCase()?`/${o().locale.toLowerCase()}`:"",n=void 0!==e?`${t}${a().JZ.templates}/${encodeURIComponent(e)}`:`${t}${a().JZ.templates}`;return`${i().A.domainBaseUrl}${n}`}function p(e){if(!e)return"";try{const n=JSON.parse(e);if("text"===n.content[0].content[0].nodeType){var t;const e=(null==n||null===(t=n.content)||void 0===t||null===(t=t[0])||void 0===t||null===(t=t.content)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.value)||"";return e.replace(/^(#{2,6})\s+/gm,"# ")}}catch(n){return""}}},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>P,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>w,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>M,MAX_RECURRENCE_INTERVAL:()=>_,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>S,areRecurrenceSchedulesEqual:()=>O,convertFromUnpersistedRecurrenceConfig:()=>B,convertToUnpersistedRecurrenceConfig:()=>D,getFormattedEndCondition:()=>E,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>U,getNextDateUtc:()=>k,getRecurrenceAfter:()=>R,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>b,rruleFromRecurrence:()=>A,templateAncestorsViolateRecurrenceNesting:()=>C});n(898992),n(354520),n(581454);var o=()=>n(244641);n(944114);function a(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const r=[];for(const i of e)r.push(...a(n[0],...n.slice(1)).map((e=>[i,...e])));return r}var r=()=>n(496603),i=()=>n(534177),c=()=>n(720665),s=()=>n(597777),d=()=>n(869190),l=()=>n(416504),u=()=>n(402390);class m extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),v={day:m.DAILY,week:m.WEEKLY,month:m.MONTHLY,year:m.YEARLY},g={MO:m.MO,TU:m.TU,WE:m.WE,TH:m.TH,FR:m.FR,SA:m.SA,SU:m.SU},_=99,h=999;function y(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=_}function b(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function A(e){const{start_date:t,frequency:n,interval:o,weekdays:r,timezone:c,hour:d,minute:l}=e,u="week"===n&&r?r.map((e=>g[e])):void 0,p={};return(0,i().O9)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,s().eU)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,i().HB)(e.end_condition)),"month"===e.frequency&&(0,i().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=a(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,i().HB)(e.monthly_restriction)),new m({freq:v[n],dtstart:(0,s().eU)(t),interval:o,byweekday:u,tzid:c,byhour:d??0,byminute:l??0,bysecond:0,...p})}const M=1,w=1;function C(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,a=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>M,i=n.length>=w;return{violatesConstraint:r||i,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:a}}function S(e){var t;const{recurrence:n,afterDate:a}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=a)return n;let r=o().c9.fromMillis(n.start_date,{zone:"utc"});const i=o().c9.fromMillis(a,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(i.diff(r,"years").years/n.interval);r=r.plus({years:e*n.interval});break}case"month":{const e=Math.floor(i.diff(r,"months").months/n.interval);r=r.plus({months:e*n.interval});break}case"week":{const e=Math.floor(i.diff(r,"weeks").weeks/n.interval);r=r.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(i.diff(r,"days").days/n.interval);r=r.plus({days:e*n.interval});break}}return{...n,start_date:(0,s().DH)(r.toMillis())}}function R(e){const{recurrence:t,afterDate:n}=e;if((0,p().wt)(t)){const e=(0,s().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=A(S({recurrence:t,afterDate:n})).after((0,s().eU)(n));if(!e)return;return(0,s().h1)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function k(e){return A(e).after((0,s().eU)((0,s().Rz)()))||void 0}function T(e){const{recurrence:t,intl:n}=e,a=k(B(t));if(!a)return;const r=I(t),i=o().c9.fromJSDate(a).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),c=(0,d().Yq)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:c});{let e=i.toLocaleString(o().c9.TIME_SIMPLE);return t.timezone!==(0,l().P)()&&(e+=` ${i.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:c,time:e})}}function E(e,t){return(0,i().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:o().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().HB)(e):t.formatMessage(f.noEndCondition)}const P=100;function D(e){return{...e,start_date:(0,s().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,s().l1)(e.end_condition.end_at)}:(0,i().HB)(e.end_condition):void 0}}function U(e,t,n){return e.plus(n-t)}function N(e,t){const n=o().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,s().Rz)(n.toJSDate())}}function B(e){return{...e,start_date:(0,s().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?N(e,e.end_condition):(0,i().HB)(e.end_condition):void 0}}function O(e,t){const n=r().fN(e,(e=>void 0!==e)),o=r().fN(t,(e=>void 0!==e));return r().n4(n,o)}},413677:(e,t,n)=>{n.r(t),n.d(t,{accept:()=>F,close:()=>V,createTemplateInstance:()=>Y,loadAndDuplicatePageTemplate:()=>H,openWithItem:()=>z,previewItem:()=>x,setTemplateVisited:()=>K});n(16280);var o=()=>n(584262),a=()=>n(857639),r=()=>n(763884),i=()=>n(386164),c=()=>n(388821),s=()=>n(179034),d=()=>n(665344),l=()=>n(94830),u=()=>n(973647),m=()=>n(449506),p=()=>n(857783),f=()=>n(183324),v=()=>n(59110),g=()=>n(34542),_=()=>n(989423),h=()=>n(972435),y=()=>n(108944),b=()=>n(443002),A=()=>n(174723),M=()=>n(362749),w=()=>n(869562),C=()=>n(351360),S=()=>n(508496),R=()=>n(75368),I=()=>n(714818),k=()=>n(630116),T=()=>n(160568),E=()=>n(394893),P=()=>n(246826),D=()=>n(666144),U=()=>n(778417),N=()=>n(185544),B=()=>n(751156),O=()=>n(345913);const L="LastViewedTemplateId",$=(0,n(959013).YK)({clientCopyError:{defaultMessage:"Client copy could not be created.",id:"spaceActions.createGettingStartedPage.copyNotCreated.error"}});function z(e){const{environment:t,item:n,createNewPage:o,isPrivate:a,disablePointerEvents:i,isCheckout:c=!1}=e;U().IU({environment:t}),I().A.setState({open:!0,item:n,createNewPage:o,isPrivate:a,isLoading:!1,disablePointerEvents:i,isCheckout:c}),r().K.set({userId:t.currentUser.id,key:L,value:n.rootId}),T().oO(t,{template_id:(0,A().dY)(n),from:o?"sidebar":"newPage"})}function x(e){let{templateItem:t,currentUserId:n}=e;const o=I().A.state.item;I().A.setState({...I().A.state,item:t}),o!==t&&r().K.set({userId:n,key:L,value:t.rootId})}function V(e){I().A.setState({item:I().A.state.item,open:!1}),U().IU({environment:e})}async function F(e){const{acceptFrom:t,item:n,environment:a,spaceStore:r,initializeStore:i,...c}=e;I().A.state.open&&I().A.setState({...I().A.state,isLoading:!0}),S().default.checkGate({gateName:"mobile_keep_template_gallery_open"})&&R().A.state.open&&R().A.setState({open:!1});const s=i?{...{...c,item:n,environment:a,spaceStore:r},initializeStore:i,type:"inExistingStore",useMinimalTemplates:!1}:{...{...c,item:n,environment:a,spaceStore:r},type:"inSpace",useMinimalTemplates:!1,isOnboarding:!1};let d=!1;const l=Date.now();let u;try{var m;u=await Y(s),d=!0;const e=null===(m=C().default.state.mainEditorCurrentBlockStore)||void 0===m?void 0:m.id;!u||e&&e===u.id||p().uK({environment:a,store:u,pageVisitSource:o().y8.Create,showMoveTo:!0}),V(a),a.device.isMobile&&(w().close(),R().A.setState({open:!1}))}finally{var f;const o=Date.now()-l,i=e.initializeStore?y().Uo(e.initializeStore):void 0,c=e.initializeStore?!i:e.isPrivate;T().BX(a,{destination:c?"private":"team",template_block_id:n.rootId,template_duplication_duration_ms:o,team_id:null==i?void 0:i.id,created_page_id:null===(f=u)||void 0===f?void 0:f.id}),T().hB(a,{from:"mobileApp",success:d,context:t,template_block_id:n.rootId,target_space_id:r.id,template_duplication_duration_ms:o,public_template_name:n.name,template_id:n.id})}}async function H(e){const{environment:t,initializeStore:n,item:o,isPrivate:a,useMinimalTemplates:r,spaceStore:s,spaceViewStore:d}=e,l=r?o.rootId:o.previewRootId,u=await m().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:l,spaceId:o.spaceId},shallow:!1},headers:(0,i().WS)({spaceId:o.spaceId})});let p;"success"===u.type&&(p=c().RecordMapWithRole.create(u.data.subtreeRecordMap));const g="pageTemplateModalActions.loadAndDuplicatePageTemplate",{performResult:y}=B().createAndCommit({userAction:g,environment:t,canUndo:!0,perform:e=>{const o=n||N().IT({environment:t,spaceStore:s,spaceViewStore:d,isPrivate:a,loading:!0,transaction:e});D()._O({environment:t,inMemoryRecordCache:o.inMemoryRecordCache,recordMap:p,debugSource:g});const r=(0,v().loadLocalSubtree)(t,{blockId:l,inMemoryRecordCache:o.inMemoryRecordCache,allowCopyCollections:!0,requireFullSubtree:!1,skipTransclusionContainerChildren:!1,allowCopyExternalObjectInstances:!0}).recordMap;if(!r)throw new Error(h().A.getIntl().formatMessage($.clientCopyError));return f().localDuplicate({environment:t,sourceBlockId:l,targetBlockPointer:o.pointer,sourceBlockSubtree:r,targetInMemoryRecordCache:o.inMemoryRecordCache,transaction:e,options:{deepCopyTransclusionContainers:!0,resolveTemplateVariables:!0}}),o}}),b=y.getCollectionPointer();return(0,_().u4)({environment:t,event:{eventName:"create_app_templates",eventProperties:{target_page_ids:[y.id],template_label:o.name,collection_ids:b?[b.id]:[]}}}),y}async function Y(e){var t;const{environment:n,item:o,useRecordCache:r,useMinimalTemplates:i,spaceStore:c,isOnboarding:p,from:f,type:v,initializeStore:_,teamStore:h,onSuccess:y,onError:A,isEmailShared:w}=e,R=r&&!i?o.previewRootId:o.rootId,I={id:R,table:s().ev,spaceId:o.spaceId},T=p?"onboarding":null!==(t=o.marketplaceTemplateMetadata)&&void 0!==t&&t.isMobileMarketplaceTemplate?"mobile_app":"homepage_team"===f?"team_home":void 0,P=await(0,g().oC)(n,R),D=T?{context:"",source:T,isListedTemplate:Boolean(P),isFirstPartyPaidTemplate:void 0!==P&&(0,l().Z1)(P),isEmailShared:w}:void 0;let U=!1,L=c;const $=new(k().Bv)(n,{table:s().ev,id:I.id,spaceId:I.spaceId});if("inExistingStore"===v&&_){if(L=_,_.isEmptyPage()){const e=_.getParentStore();e&&e.canEdit()&&("block"===e.table||"space"===e.table||"team"===e.table)&&(U=!0,L=e)}}else"inTeam"===v&&h&&(L=h);const z=S().default.checkGate({gateName:"use_initialize_page_template_api_onboarding"}),x=S().default.checkGate({gateName:"use_local_duplication_for_onboarding"}),V=S().default.checkGate({gateName:"use_duplicate_block_sync"});if("onboarding"===T&&z){const e=await async function(e){const{environment:t,item:n,spaceStore:o,teamStore:a,type:r,from:i,sourceBlock:c,onSuccess:s,onError:d}=e,l=C().default.state.currentUserRootStore,u=await(0,M().Pl)();if(!l)return;const p=(0,b().H)({spaceStore:o,userId:l.id,environment:t});if(!p)return;const{serverCommitResult:f,performResult:{pageStore:v}}=B().createAndCommit({userAction:"pageTemplateModalActions.createTemplateInstance",environment:t,canUndo:!0,perform:e=>{let c;return c="inTeam"===r&&a&&i?u({environment:t,spaceStore:o,spaceViewStore:p,teamStore:a,from:i,loading:!0,appendOrPrepend:"append",transaction:e}):N().IT({environment:t,spaceStore:o,spaceViewStore:p,isPrivate:!0,loading:!0,transaction:e}),K({item:n,spaceViewStore:p,transaction:e}),{pageStore:c}}});await f;const g=await m().callApi({eventName:"initializePageTemplate",environment:t,data:{sourceBlock:c,targetBlock:{id:v.id,table:"block",spaceId:o.id},isOnboarding:!0}});"failed"===g.type?null==d||d(v):null==s||s(v);return v}({environment:n,item:o,spaceStore:c,teamStore:h,type:"inTeam"===v?"inTeam":"inSpace",from:f,sourceBlock:I,onSuccess:y,onError:A});return e}D||a().log({level:"warning",from:"pageTemplateModalActions.createTemplateInstance",type:"templateInstallationMetadataNotSet",data:{miscDataToConvertToString:{template_id:o.id,template_block_id:o.rootId,target_space_id:c.id,public_template_name:o.name,isOnboarding:p,from:f,type:v}}});const F=S().default.checkGate({gateName:"enable_local_duplication_for_non_marketplace_templates"}),H=!(0,d().Fe)(null==D?void 0:D.source)&&F||x&&"onboarding"===T,Y="onboarding"===T&&V,q=await E().Jx({environment:n,store:$,newParentStore:L,addCopyName:!1,duplicateOnlyCollectionSchema:!1,unlockPage:!0,templateInstallationMetadata:D,shouldAttemptServerBackedLocalDuplication:H,shouldUseSynchronousDuplicationAPI:Y,from:f??(p?"onboarding":void 0)});if(q){if(u().Q.isSuccess(q)&&q.value.length>0){const e=q.value[0];if(U&&_){const t=_;try{await t.waitUntil((()=>t.isDefined()));const{serverCommitResult:o}=B().createAndCommit({userAction:"pageTemplateModalActions.initializePageTemplateInPlace",environment:n,canUndo:!0,perform:e=>{O().oD({environment:n,blocks:[t],transaction:e,permanentlyDelete:!0})}});return await o,e}catch(W){a().log({level:"error",from:"pageTemplateModalActions.initializePageTemplateInPlace",type:"transactionError",data:{miscDataToConvertToString:{error:W}}})}}return null==y||y(e),e}return null==A||A(),void a().log({level:"error",from:"pageTemplateModalActions.initializePageTemplate",type:"duplicateTemplateError",data:{miscDataToConvertToString:{error:q.error,template_id:o.id,template_block_id:o.rootId,target_space_id:c.id,public_template_name:o.name}}})}}function K(e){const{item:t,transaction:n,spaceViewStore:o}=e;if(o){const e=o.getVisitedTemplateIds();if(e.indexOf(t.rootId)<0){const a=e.concat([t.rootId]);P().zv({store:o,data:{visited_templates:a},transaction:n})}}}},603815:(e,t,n)=>{n.d(t,{A$:()=>S,JQ:()=>R,Vn:()=>w,s4:()=>C});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var o=()=>n(857639),a=()=>n(585515),r=()=>n(577449),i=()=>n(388821),c=()=>n(179034),s=()=>n(545285),d=()=>n(534177),l=()=>n(449506),u=()=>n(780054),m=()=>n(989423),p=()=>n(870618),f=()=>n(303626),v=()=>n(14307),g=()=>n(245865),_=()=>n(540758),h=()=>n(670631),y=()=>n(508496),b=()=>n(571963),A=()=>n(603815),M=()=>n(108944);async function w(e){const{environment:t,request:n,abortSignal:o,prefetchCacheKey:a,headers:r}=e;return(0,b().updateLoadCachedPageChunkCalledAt)(),v().isConnected()||v().isConnecting()?l().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:n,abortSignal:o,prefetchCacheKey:a,headers:r}):l().callApi({eventName:"loadPageChunkV2",environment:t,data:n,abortSignal:o,prefetchCacheKey:a,headers:r})}async function C(e){const{mode:t,environment:n,request:d,isFirstChunk:l,abortSignal:v}=e,g={...d,limit:30,cursor:d.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await A().A$(n,{id:d.page.id,table:c().ev}),null!=v&&v.aborted))throw new Error("Abort signal received");const y=i().RecordMapWithRole.create(),b=[];let M=!1;const w=new Set,C=await a().T(g,r().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await p().h7({environment:n,pointer:e,abortSignal:v,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=v&&v.aborted)throw new Error("Abort signal received");if(o)return y.setModelAndRole(e,o.model,o.role),o.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,s().u)(e)&&!w.has(e.id)&&l){if(void 0===h().A.state.offlinePages)return b.push(e),void(M=!0);if(void 0===h().A.state.offlinePages||!_().Bd(d.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);b.push(e)}})),((e,t,n,o)=>{f().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${n})`),null!=o&&o.suppressErrorOnClient&&w.add(t.id)}));if(M&&(await h().A.waitUntil((()=>void 0!==h().A.state.offlinePages)),!_().Bd(d.page.id))){const[e]=b;throw new Error(`Record not found: ${e.table},${e.id}`)}if(b.length>0&&(0,m().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,m().u4)({environment:n,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&o().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:d.page.id,missingRecords:b}})})),null!=v&&v.aborted)throw new Error("Abort signal received");return{recordMap:y.toJson(),cursor:C.cursorValue}}async function S(e,t){const n=e.currentUser.id;if(!n||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:n})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),g().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function R(e){if(!y().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=i().RecordMapPolymorphic.create();let n=0;const o=()=>n>=50,a=e=>{"space"!==(null==e?void 0:e.table)&&(o()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),n++))};if(e.isReady())for(const i of(0,M().E)(e))a(i);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);a(t.getModel({table:"notion_user",id:e.userId}));let n=0;for(const e of t.getPointersByTable("notion_user")){if(o()||n>=10)break;n++,a(t.getModel(e))}}const r=Array.from(t).map((e=>{let{pointer:t,value:n}=e;if(void 0!==n)return{pointer:t,version:n}})).filter(d().O9);return r.length?r:void 0}},725649:(e,t,n)=>{function o(e){return!(!e||"askUserToPick"in e)}function a(e){if(!e||!("askUserToPick"in e))return e}function r(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>a,K$:()=>o,j6:()=>r})}}]);