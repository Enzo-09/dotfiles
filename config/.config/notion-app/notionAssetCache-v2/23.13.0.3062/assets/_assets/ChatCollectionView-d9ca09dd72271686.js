"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[45666],{227519:(e,t,n)=>{n.r(t),n.d(t,{ChatCollectionView:()=>f});var r=n(296540),o=()=>n(847249),i=()=>n(401497),a=()=>n(277942),c=()=>n(683821),d=()=>n(166442),s=()=>n(58293),u=()=>n(94522),l=()=>n(46986),h=()=>n(324577),m=n(474848);function f(e){const{collectionViewStore:t,paddingLeft:n,paddingRight:f,collectionContextStore:p}=e,g=(0,i().IS)((e=>({container:{paddingLeft:n??0,paddingRight:f??0}})),[n,f]),_=(0,o().K8)((()=>(0,l().sx)()),[]),[b,A]=(0,r.useState)(void 0),y=(0,r.useCallback)((e=>{A(null==e?void 0:e.id)}),[]),w=(0,o().K8)((()=>p.collectionViewBlockStore()),[p]),v=(0,h().Y)(w),C=(0,s().r)(),M=(0,o().K8)((()=>{if(!v||!w)return;const e=v.getData();if(!e)return;const n=(0,u().FY)({collectionViewId:t.id,workflow:e});if(!n)return;return{type:"workflow",agentKey:n,workflowBlockId:w.id}}),[v,t,w]),k=(0,c().l)({threadId:b});return M&&_&&w&&C?(0,m.jsx)("div",{style:g.container,children:(0,m.jsx)(a().NV,{aiChatFeature:"app_builder",threadStore:k,config:M,onThreadChange:y,clientStore:d().Kd,parentStore:C})}):null}},277942:(e,t,n)=>{n.d(t,{J1:()=>i,M4:()=>s,NV:()=>u,_:()=>a,ev:()=>l,j5:()=>d,rm:()=>c});var r=()=>n(645873);const o={FullPageAI:new(r().O2)("FullPageAI",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(95699)]).then(n.bind(n,130145)))),AIModePicker:new(r().O2)("AIModePicker",(()=>n.e(82926).then(n.bind(n,546716)))),AgentModelPicker:new(r().O2)("AgentModelPicker",(()=>n.e(8243).then(n.bind(n,843970)))),AIChatInput:new(r().O2)("AIChatInput",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(16716),n.e(67333)]).then(n.bind(n,397693)))),AIChatView:new(r().O2)("AIChatView",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(31611),n.e(91078),n.e(47108)]).then(n.bind(n,475685)))),AgentChatView:new(r().O2)("AgentChatView",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(31611),n.e(91078),n.e(46283)]).then(n.bind(n,126382)))),AgentChatInput:new(r().O2)("AgentChatInput",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(16716),n.e(90068)]).then(n.bind(n,333470))))},i=(0,r()._h)(o.FullPageAI,(e=>e.FullPageAI)),a=(0,r()._h)(o.AIModePicker,(e=>e.AIModePicker)),c=(0,r()._h)(o.AgentModelPicker,(e=>e.AgentModelPicker)),d=(0,r()._h)(o.AIChatInput,(e=>e.AIChatInput)),s=(0,r()._h)(o.AIChatView,(e=>e.AIChatView)),u=(0,r()._h)(o.AgentChatView,(e=>e.AgentChatView)),l=(0,r()._h)(o.AgentChatInput,(e=>e.AgentChatInput))},324577:(e,t,n)=>{n.d(t,{Y:()=>o});var r=()=>n(847249);function o(e){return(0,r().K8)((()=>null==e?void 0:e.getWorkflowStore()),[e])}},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>D,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>C,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>v,MAX_RECURRENCE_INTERVAL:()=>_,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>b,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>k,areRecurrenceSchedulesEqual:()=>L,convertFromUnpersistedRecurrenceConfig:()=>x,convertToUnpersistedRecurrenceConfig:()=>P,getFormattedEndCondition:()=>T,getFormattedNextRecurrenceTime:()=>N,getNewEndTimestamp:()=>S,getNextDateUtc:()=>R,getRecurrenceAfter:()=>E,isRunningBetweenMidnightAnd3AM:()=>I,isValidRecurrenceInterval:()=>A,isValidRecurrenceNumberOfRuns:()=>y,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>M});n(898992),n(354520),n(581454);var r=()=>n(244641);n(944114);function o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...o(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(496603),a=()=>n(534177),c=()=>n(720665),d=()=>n(597777),s=()=>n(869190),u=()=>n(416504),l=()=>n(402390);class h extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),p={day:h.DAILY,week:h.WEEKLY,month:h.MONTHLY,year:h.YEARLY},g={MO:h.MO,TU:h.TU,WE:h.WE,TH:h.TH,FR:h.FR,SA:h.SA,SU:h.SU},_=99,b=999;function A(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=_}function y(e){return(0,c().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function w(e){const{start_date:t,frequency:n,interval:r,weekdays:i,timezone:c,hour:s,minute:u}=e,l="week"===n&&i?i.map((e=>g[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,d().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=o(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,a().HB)(e.monthly_restriction)),new h({freq:p[n],dtstart:(0,d().eU)(t),interval:r,byweekday:l,tzid:c,byhour:s??0,byminute:u??0,bysecond:0,...m})}const v=1,C=1;function M(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),r=e.length,o=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=r>v,a=n.length>=C;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:r,immediateAncestorRecurrenceType:o}}function k(e){var t;const{recurrence:n,afterDate:o}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=o)return n;let i=r().c9.fromMillis(n.start_date,{zone:"utc"});const a=r().c9.fromMillis(o,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/n.interval);i=i.plus({years:e*n.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/n.interval);i=i.plus({months:e*n.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/n.interval);i=i.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/n.interval);i=i.plus({days:e*n.interval});break}}return{...n,start_date:(0,d().DH)(i.toMillis())}}function E(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,d().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(k({recurrence:t,afterDate:n})).after((0,d().eU)(n));if(!e)return;return(0,d().h1)(e)}}function I(e){return 0===e.hour||1===e.hour||2===e.hour}function R(e){return w(e).after((0,d().eU)((0,d().Rz)()))||void 0}function N(e){const{recurrence:t,intl:n}=e,o=R(x(t));if(!o)return;const i=I(t),a=r().c9.fromJSDate(o).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,l().H)(n)).setZone(t.timezone),c=(0,s().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:c});{let e=a.toLocaleString(r().c9.TIME_SIMPLE);return t.timezone!==(0,u().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:c,time:e})}}function T(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,s().Yq)({date:r().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const D=100;function P(e){return{...e,start_date:(0,d().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,d().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function S(e,t,n){return e.plus(n-t)}function U(e,t){const n=r().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,d().Rz)(n.toJSDate())}}function x(e){return{...e,start_date:(0,d().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?U(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function L(e,t){const n=i().fN(e,(e=>void 0!==e)),r=i().fN(t,(e=>void 0!==e));return i().n4(n,r)}},683821:(e,t,n)=>{n.d(t,{l:()=>d});var r=()=>n(847249),o=()=>n(234459),i=()=>n(890754),a=()=>n(351360),c=()=>n(630116);function d(e){const{threadId:t}=e,n=(0,r().O$)(a().AppStoreCurrentSpaceStore);if(n&&t&&t!==i().NEW_CHAT_THREAD_ID)return c().Ei.createChildStore(n,{table:o().To,id:t,spaceId:n.id})}},725649:(e,t,n)=>{function r(e){return!(!e||"askUserToPick"in e)}function o(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>o,K$:()=>r,j6:()=>i})},972261:(e,t,n)=>{n.d(t,{Fl:()=>c,KI:()=>u,PI:()=>o,S:()=>d,Tq:()=>m,_u:()=>i,e5:()=>a,fK:()=>l,fl:()=>r,lF:()=>s});n(898992),n(672577);const r=["slack","google_drive","github","jira","sharepoint","microsoftTeams","gmail","linear"],o=["slack","googleDrive","github","jira","microsoftTeams","sharepoint","gmail","linear","web","githubCode"],i="7c57d10c-00cc-48bc-a552-fb3911dd7745",a="1031cb6c-4935-4cc1-9c08-c9a4ecaae323",c="65683ef9-c923-4a14-8c5b-bfcf591cf5a1",d="c1f230b1-6635-4ab0-a3f5-f7eb105a87c3",s="c91548d4-25d0-44a2-ab2e-19f6f0b11d96",u="1724f2a1-f543-43a7-82af-8a0f85bda112",l="07351274-83bb-4118-9f5b-9d75f0453999",h=[{regex:/https:\/\/(?<workspace>[\w-]+)\.slack\.com\/archives\/(?<channel>[^\/]+)\/p(?<timestamp>\d+)(\?thread_ts=(?<thread_ts>\d+\.\d+)&cid=(?<cid>[^\/]+))?/,type:"slack"},{regex:/https:\/\/docs\.google\.com\/(?<fileType>document|spreadsheets|presentation)\/d\/(?<fileId>[a-zA-Z0-9_-]+)(?:\/\S*)?/,type:"googleDrive"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?:blob|tree|blame)\/(?<branchName>[^\/]+)\/(?<codePath>[^#]+)(#(?<lineNumber>L\d+(?:C\d+)?(?:-L\d+)?))?/,type:"githubCode"},{regex:/https:\/\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/pull\/(?<prNumber>\d+)(\/(files|commits|checks)?)?/,type:"github"},{regex:/https:\/\/app\.graphite\.dev\/github\/pr\/(?<orgName>[^\/]+)\/(?<repoName>[^\/]+)\/(?<prNumber>\d+)(?:\/\S*)?/,type:"github"},{regex:/https:\/\/(?:[^\.]+)\.sourcegraphcloud\.com\/github\.com\/(?<orgName>[^\/]+)\/(?<repoName>[^\/@]+)(?:@(?<branchName>[a-f0-9]+))?\/-\/blob\/(?<codePath>[^?]+)\?(?<lineNumbers>L\d+|l\d+)?/,type:"githubCode"},{regex:/https:\/\/(?<site>[^/]+\.atlassian\.net).*?(?:browse\/|[?&]selectedIssue=)(?<issueKey>[A-Z0-9]+-\d+).*?/,type:"jira"}];function m(e){const t=h.find((t=>t.regex.test(e)));return(null==t?void 0:t.type)??"web"}}}]);