"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[63292],{32791:(e,t,o)=>{o.r(t),o.d(t,{CancelQuickAddComponent:()=>Wt,QuickAddDoneComponent:()=>Nt,TopbarMobile:()=>bt,getShouldShowCancelQuickAdd:()=>xt,getShouldShowFilingInHeader:()=>yt,handleCancelQuickAdd:()=>Bt,messages:()=>mt,shouldRenderBackButton:()=>Ct,shouldShowSidebarButton:()=>At});o(944114),o(898992),o(737550);var i=o(296540),n=()=>o(908006),r=()=>o(484714),s=()=>o(847249),a=()=>o(401497),l=()=>o(110750),d=()=>o(628182),c=()=>o(584262),u=()=>o(212050),p=()=>o(49621),g=()=>o(589407),h=()=>o(124858),m=()=>o(440854),S=()=>o(371513),b=()=>o(864896),f=()=>o(340498),v=()=>o(427704),x=()=>o(179034),y=()=>o(959013),j=()=>o(284371),w=()=>o(328523),C=()=>o(848259),k=()=>o(741496),T=()=>o(750660),P=()=>o(857783),A=()=>o(435009),M=()=>o(537941),I=()=>o(778417),B=()=>o(426116),_=()=>o(725614),K=()=>o(751156),R=()=>o(345913),W=()=>o(205127),N=()=>o(462113),F=()=>o(774733),L=()=>o(493319),D=()=>o(116008),E=()=>o(885962),z=()=>o(109488),O=()=>o(112995),H=()=>o(138156),V=()=>o(989423),U=()=>o(186445),Y=()=>o(38337),Q=()=>o(47373),G=()=>o(722872),$=()=>o(731320),X=()=>o(71304),q=()=>o(836251),J=()=>o(640653),Z=()=>o(470928),ee=()=>o(891078),te=()=>o(645873),oe=()=>o(963589),ie=()=>o(577009),ne=()=>o(988330),re=()=>o(204263),se=()=>o(696746),ae=(o(803949),o(581454),()=>o(436572)),le=()=>o(760217),de=()=>o(928600),ce=()=>o(939740),ue=()=>o(897119),pe=()=>o(89924),ge=()=>o(691298),he=()=>o(962730),me=()=>o(377586),Se=()=>o(351360),be=()=>o(898808),fe=()=>o(906571),ve=()=>o(952412),xe=o(474848);function ye(e){let{menuProps:t,menuItems:o}=e;return(0,xe.jsx)(de().A,{...t,children:(0,xe.jsx)(ce().Ay,{type:ce().Oh.Vertical,initialFocus:0,sections:[{key:"teamspaces",render:e=>(0,xe.jsx)(pe().A,{...e}),items:o,showNoResultMessage:!0}]})})}function je(e){let{postStore:t}=e;const o=(0,y().tz)(),n=(0,r().v3)(),{currentSpaceViewStore:a,currentSpaceStore:l}=(0,s().K8)((()=>{const{currentSpaceViewStore:e,currentSpaceStore:t}=Se().default.state;return{currentSpaceViewStore:e,currentSpaceStore:t}}),[]),{selectedTeamStore:d,subscribedUserTeamStores:c,collectionContextStore:u}=(0,s().K8)((()=>ve().u.state),[]),p=(0,s().K8)((()=>ve().u.state.teamTargetMobilePopupOpen),[]);(0,ge().A)({shouldPreserveTextSelection:p??!1,shouldPreserveBlockSelection:!1,shouldRestoreSelection:!0});const g=(0,i.useCallback)((e=>{const i=e.getName();(0,fe().z)({environment:n,currentSpaceViewStore:a,selectedStore:e,collectionContextStore:u,postStore:t}),ve().u.setState({...ve().u.state,selectedTeamStore:e}),ve().u.closeTeamTargetMobilePopup(),ae().D6({label:o.formatMessage({id:"teamTargetSelector.moved.toast.mobile.message",defaultMessage:"Moved to {teamspaceName}"},{teamspaceName:i}),position:"bottom"})}),[n,u,a,t,o]),h=(0,s().K8)((()=>{if(!l)return{};const e={};return e[l.id]=null==l?void 0:l.getName(),null==c||c.forEach((t=>{e[t.id]=t.getName()})),e}),[l,c]);if(!(a&&l&&d&&c&&u))return null;const m=c.map((e=>({key:e.id,render:t=>(0,xe.jsx)(le().A,{...t,title:h[e.id],icon:(0,xe.jsx)(be().x,{store:e,size:16,disabled:!0}),isChecked:e.id===(null==d?void 0:d.id)}),action:()=>{g(e)}}))),S={menuType:G().gu.Modal,title:(0,xe.jsx)(y().sA,{defaultMessage:"Select teamspace",id:"teamTargetSelector.title"})};return(0,xe.jsx)(ue().Ay,{popupType:me().n.BottomSheet,open:p??!1,onDismiss:()=>{ve().u.closeTeamTargetMobilePopup()},placementToOrigin:he().W.Bottom,alignmentToOrigin:he().C.Start,originGap:0,preventScaleTransition:!0,render:()=>(0,xe.jsx)(ye,{menuProps:S,menuItems:m}),preventBlockRenderQueueOnEnter:!0,trapFocus:!0})}var we=()=>o(321172),Ce=()=>o(663590),ke=()=>o(311337),Te=()=>o(869562),Pe=()=>o(644914),Ae=()=>o(749687),Me=()=>o(155959),Ie=()=>o(574012),Be=()=>o(188669),_e=()=>o(338429),Ke=()=>o(630116),Re=()=>o(24157),We=()=>o(795179),Ne=()=>o(699527),Fe=()=>o(704152),Le=()=>o(406699),De=()=>o(285790),Ee=()=>o(480095),ze=()=>o(179030),Oe=()=>o(614505),He=()=>o(16006),Ve=()=>o(132389),Ue=()=>o(21140),Ye=()=>o(171347),Qe=()=>o(187959),Ge=()=>o(60499),$e=()=>o(569866);function Xe(){const e=(0,i.useCallback)((()=>(0,xe.jsx)($e().A,{message:(0,xe.jsx)(y().sA,{defaultMessage:"Any changes to this page will show up here.",id:"updatesModal.currentPageTab.emptyPrompt"}),title:(0,xe.jsx)(y().sA,{defaultMessage:"No page updates",id:"updatesModal.currentPageTab.emptyPromptTitle"})})),[]),t=(0,s().O$)(Se().AppStoreCurrentSpaceStore),o=(0,s().O$)(Se().AppStoreMainEditorCurrentBlockStore),n=(0,s().K8)((()=>{var e;const t=null==o||null===(e=o.getCollectionPointer())||void 0===e?void 0:e.id,i=null==o?void 0:o.isCollectionView();return null!=o&&o.isDefined()?{id:o.id,isCollection:i,collectionId:t}:void 0}),[o]),r=(0,a().IS)((()=>({getNotifiedFor:{padding:18}})),[]);return t&&n&&o?(0,xe.jsxs)("div",{children:[(0,xe.jsx)(ie().QB,{navigableBlockStore:o,from:"page_updates",buttonPopupStore:Qe().A,style:r.getNotifiedFor}),(0,xe.jsx)(Ge().A,{navigableBlockStore:o,collectionId:n.collectionId,spaceId:t.id,empty:e,source:"updates_sidebar"},"current-page")]}):null}var qe=()=>o(99600),Je=()=>o(527580),Ze=()=>o(746084),et=()=>o(186270),tt=()=>o(839003),ot=()=>o(813402),it=()=>o(533788),nt=()=>o(618968),rt=()=>o(281401),st=()=>o(45972),at=()=>o(784350),lt=()=>o(705630),dt=()=>o(126126),ct=()=>o(373156),ut=()=>o(136805),pt=()=>o(573792),gt=()=>o(568394),ht=()=>o(551780);const mt=(0,y().YK)({comments:{id:"topbarMobile.commentsButton.label",defaultMessage:"Comments"}});function St(e,t){(0,V().vd)(e,"page_creation_topbar_click",t)}function bt(e){const t=(0,r().v3)(),{store:o,banners:i,shouldShowAddTo:n}=e,{device:a}=t,l=(0,s().K8)((()=>o&&(0,$().qb)(t,o)),[t,o]),d=(0,s().K8)((()=>{if(!o)return!1;const e=o.isLockedForAllUsers()&&o.canEdit();return(!l||o.canEditCollection())&&a.isPhone&&(o.isRestricted()&&!(0,Ce().hK)()||e)}),[o,l,a]),c=(0,s().K8)((()=>(0,Ce().hK)()),[]),u=(0,oe().X)("mobile_page_simplification_next"),p=(0,s().K8)((()=>(0,rt().PD)({device:a,shouldShowAddTo:n,isMobileTopbarRedesignEnabled:u})),[a,n,u]);return(0,xe.jsx)(z().A,{capture:!0,render:r=>(0,xe.jsxs)("header",{...r,style:{width:"100%",maxWidth:"100vw",zIndex:100},children:[l&&o?(0,xe.jsx)(Kt,{store:o,shouldShowAddTo:n,showTopPadding:!0}):p&&o?(0,xe.jsx)(at().S,{store:o,routerState:e.routerState,isInvalidPage:e.isInvalidPage,shouldShowAddTo:n,showTopPadding:!0}):(0,xe.jsx)(Lt,{...e,showTopPadding:!0}),d&&o&&(0,xe.jsx)(ze().l,{label:(0,xe.jsx)("div",{children:(0,xe.jsx)(qe().A,{store:o},o.id)}),tint:"gray",display:"full-width",actions:o.isRestricted()&&!c?[{label:(0,xe.jsx)(ct().A,{onClick:()=>we().Tk(t)}),onClick:()=>{}}]:void 0}),i.length>0&&(0,xe.jsx)(E().x,{banners:i,isMobile:!0,isInPeekRenderer:!1})]})})}function ft(){const e={menuType:G().gu.Modal,title:(0,xe.jsx)(y().sA,{defaultMessage:"Page Updates",id:"pageUpdatesModal.mobileMenu.title"}),right:(0,xe.jsx)(Ee().DoneMenuText,{}),onClickRight:()=>_e().A.setState({open:!1}),whiteBackground:!0},t=(0,s().K8)((()=>_e().A.state.open),[]);return(0,xe.jsx)(ue().Ay,{open:t,popupType:Le().z7.SlideUp,alignmentToOrigin:he().C.Start,placementToOrigin:he().W.Right,onDismiss:()=>_e().A.setState({open:!1}),originGap:0,isWideTabletWidth:!0,render:()=>(0,xe.jsx)(de().A,{...e,children:(0,xe.jsx)(Xe,{})}),isFullWidthOnMobile:!0,preventScaleTransition:!0})}function vt(e){const t=e.getParentStore(),{currentSpaceStore:o}=Se().default.state;return t instanceof Ke().SL&&o&&t.id===o.id}function xt(e,t){return e&&function(e){return e.isEmptyTitle()&&e.isEmptyPage()}(t)}function yt(e,t){return e&&t.device.isMobileNative&&!t.device.isTablet}function jt(e){let{store:t,spaceViewStore:o,isInvalidPage:i}=e;const n=(0,ee().i0)(t);return i||!o?null:(0,xe.jsxs)(xe.Fragment,{children:[!n&&(0,xe.jsx)(nt().TopbarFavoriteButton,{store:t,spaceViewStore:o}),(0,xe.jsx)(re().A,{})]})}function wt(e){return(0,Me().T)("supportsNativeHome")&&e.device.isTablet}function Ct(e){const{shouldShowAddTo:t,environment:o}=e,{TabbedRouterStore:i}=o;if(t)return!1;const n=(0,q().UL)(o)||"native"===(0,l().Xz)(i.state).type;return!(0,q().Al)(o)||n}function kt(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;const{mobileNative:i}=e;return{flexGrow:0,marginLeft:null!=i&&i.supportsNativeHomeOnPhone()?t?0:20:2,overflow:"auto",WebkitOverflowScrolling:"touch",marginRight:o?16:8,height:"100%"}}function Tt(){const e=(0,r().v3)(),t=(0,s().K8)((()=>(0,Pe().tv)(e)&&Ae().sidebarExpandedStore.state),[e]);return(0,xe.jsxs)(Fe().A,{mobileFeedback:!0,style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,height:"100%",width:36,marginLeft:4},onClick:()=>{var t;if(wt(e))null===(t=e.mobileNative)||void 0===t||t.toggleNativeHome();else if((0,Pe().tv)(e))Te().setExpand({environment:e,isExpanded:!Ae().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var o;const{NativeMobileActionBarStore:t}=e,i=t?null===(o=t.state.menu)||void 0===o?void 0:o.type:void 0;"editing"===Re().default.state.mode||void 0!==i?(_().clear({environment:e}),null==t||t.clear(!1),Ie().A.onHide((()=>{n().default.afterNextFlush((()=>Te().open({fromElectron:!1})))}))):Te().open({fromElectron:!1})}w().gS(e)},children:[(0,m().a)({width:18,height:18}),t?(0,xe.jsx)(Ye().A,{color:Ye().g.Red,style:{position:"absolute",top:9,right:1},count:0}):(0,xe.jsx)(ie().Wt,{type:e.device.isMobileBrowser?"allSpaces":"otherSpaces",color:Ye().g.Red,style:{position:"absolute",top:9,right:1}})]})}function Pt(e){let{defaultMobileButtonStyle:t}=e;const o=(0,r().v3)(),i={...t,fill:(0,a().IS)((e=>({iconStyle:(0,pt().aD)(e).iconStyle})),[]).iconStyle.fill};return(0,xe.jsx)(Fe().A,{mobileFeedback:!0,style:i,onClick:()=>{var e;if(wt(o))null===(e=o.mobileNative)||void 0===e||e.toggleNativeHome();else if((0,Pe().tv)(o))Te().setExpand({environment:o,isExpanded:!Ae().sidebarExpandedStore.state,from:"topbar_mobile",saveDetailsSidebarPreference:!0});else{var t;const{NativeMobileActionBarStore:e}=o,i=e?null===(t=e.state.menu)||void 0===t?void 0:t.type:void 0;"editing"===Re().default.state.mode||void 0!==i?(_().clear({environment:o}),null==e||e.clear(!1),Ie().A.onHide((()=>{n().default.afterNextFlush((()=>Te().open({fromElectron:!1})))}))):Te().open({fromElectron:!1})}w().gS(o)},children:(0,S().b)()})}function At(e){return wt(e)||!(0,Me().T)("supportsNativeHome")}function Mt(e,t,o,i){const{WindowSizeStore:n}=t;let r=`0 ${1/(window.devicePixelRatio||1)}px 0 ${o.regularDividerColor}`;return((0,Q().Id)(t)||e)&&(r=void 0),{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:d().s1,marginTop:i?n.state.paddingTopCSS:0,paddingLeft:n.getSafePaddingLeftCSS(0),paddingRight:e?n.getSafePaddingRightCSS(0):n.getSafePaddingRightCSS(7),boxShadow:r,background:o.contentBackground,transition:"box-shadow 300ms",WebkitUserSelect:"none",cursor:"pointer"}}function It(e){I().IU({environment:e})}function Bt(e,t){const o=Se().default.state.mainEditorCurrentBlockStore,i=Be().Ay.state.lastPageId;if(o){var n;const r=null===(n=e.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();r?M().navigateToHomeTab(e):i?P().uK({environment:e,store:Ke().Bv.createChildStore(o,{table:x().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:r,pageVisitSource:c().y8.BackForward}):A().oo({environment:e,url:v().JZ.root,redirect:!0}),t.isMobileHorizon1QuickCapture&&St(e,{action:"cancel"}),K().createAndCommit({userAction:"TopbarMobile.handleCancelQuickAdd",environment:e,canUndo:!0,perform:t=>{R().oD({environment:e,blocks:[o],transaction:t}),t.postSubmitCallbacks.push((t=>{t||(0,k().N)(e,{analyticsName:"delete",from:"mobile_topbar",block_id:o.id,block_type:"page"})}))}})}}async function _t(e,t){await T().LP({environment:t,blocks:[e],moveToContext:"quick_add",onAccept:e=>function(e){w().l7(e)}(t),isAddTo:!0,isDefaultPrivateLocation:vt(e)})}function Kt(e){let{store:t,shouldShowAddTo:o,showTopPadding:n}=e;const l=(0,a().DP)(),d=(0,r().v3)(),u=(0,r().Y0)(),p=Boolean(d.currentUser.isLoggedIn()||d.publicDomainUserId),g=(0,s().K8)((()=>!(0,ke().y)(d)&&d.currentUser.isLoggedIn()),[d]),h=u.isTablet,m=(0,s().K8)((()=>Mt(o,d,l,n)),[d,o,l,n]),S=(0,s().K8)((()=>kt(d,!0,h)),[d,h]);return(0,xe.jsxs)("div",{onClick:()=>It(d),style:m,className:Y().byw,children:[g&&(0,xe.jsxs)(i.Fragment,{children:[(0,xe.jsx)(Fe().A,{style:{display:"flex",alignItems:"center",height:"100%",paddingLeft:14,paddingRight:14,fontWeight:j().Wy.medium,color:l.text.primary,whiteSpace:"nowrap"},mobileFeedback:!0,onClick:()=>function(e){const{currentUserRootStore:t,currentUserSettingsStore:o}=Se().default.state;t&&o&&B().t9({environment:e,userRootStore:t,userSettingsStore:o,pageVisitSource:c().y8.SwitchSpace})}(d),children:(0,xe.jsx)(y().sA,{defaultMessage:"Back",id:"topbarMobile.backButton.label"})}),(0,xe.jsx)("div",{style:{height:18,width:1,flexShrink:0,marginRight:6,background:l.darkDividerColor}})]}),(0,xe.jsx)(W().oK,{store:t,style:S,maxAncestorCount:1,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,xe.jsxs)(Ue().Ye,{alignItems:"center",children:[!p&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(tt().S,{store:t}),(0,xe.jsx)(Ve().A,{size:8})]}),(0,xe.jsx)(Ze().A,{store:t,buttonPopupStore:We().A,useEllipsisIcon:!p})]})]})}function Rt(e){let{store:t}=e;const o=(0,r().v3)(),i=(0,s().K8)((()=>t.getParentStore()),[t]),n=(0,s().K8)((()=>vt(t)),[t]),l=(0,s().K8)((()=>(null==i?void 0:i.table)===x().ev&&i.isEmptyPage()),[i]),d=(0,s().K8)((()=>!i||!(0,X().D_)(i)||i instanceof Ke().pS?void 0:i.getIcon()),[i]),c=(0,s().K8)((()=>i instanceof Ke().SL?(0,J().GK)(o,i):void 0),[o,i]),u=(0,a().IS)((e=>({folderIcon:{width:16,color:e.icon.primary},folderIconContainer:{height:32,width:32,backgroundColor:e.tint.regular,display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:4},filingButton:{display:"flex",alignItems:"center",paddingLeft:20,paddingRight:12,fontSize:j().J.UIRegular.mobile,fontWeight:j().Wy.medium,lineHeight:j().K_.UIRegular.mobile,whiteSpace:"nowrap",minWidth:0,color:e.text.primary}})),[]);return i&&(0,X().D_)(i)?n?(0,xe.jsxs)(Fe().A,{mobileFeedback:!0,style:u.filingButton,onClick:()=>_t(t,o),children:[(0,xe.jsx)("div",{style:{marginRight:8,...u.folderIconContainer},children:(0,h().E)(u.folderIcon)}),(0,xe.jsx)(y().sA,{defaultMessage:"Private",id:"topbarMobile.filingPrivateSectionButton.label"})]}):(0,xe.jsxs)(Fe().A,{mobileFeedback:!0,style:u.filingButton,onClick:()=>_t(t,o),children:[(0,xe.jsx)(Oe().B,{disabled:!0,icon:d,isEmptyPage:l,title:c,size:24,style:{marginRight:8}}),(0,xe.jsx)(He().A,{store:i})]}):null}function Wt(){const e=(0,r().v3)(),t=(0,y().tz)(),o=(0,a().IS)((e=>({iconButton:{background:e.tint.regular,marginRight:20,borderRadius:16,width:32,height:32}})),[]);return(0,xe.jsx)(De().A,{icon:e=>(0,u().u)({width:20,height:20}),style:o.iconButton,isDarkIconColor:!0,onClick:t=>Bt(e,{isMobileHorizon1QuickCapture:!0}),ariaLabel:t.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})})}function Nt(){const e=(0,r().v3)(),t=(0,a().IS)((e=>({doneButton:{display:"flex",alignItems:"center",height:32,paddingLeft:12,paddingRight:12,marginLeft:2,marginRight:16,fontWeight:j().Wy.medium,color:e.text.primary,background:e.tint.regular,borderRadius:16}})),[]);return(0,xe.jsx)(Fe().A,{mobileFeedback:!0,style:t.doneButton,onClick:t=>function(e,t){const o=Se().default.state.mainEditorCurrentBlockStore,i=Be().Ay.state.lastPageId;if(o){var n;const e=null===(n=t.mobileNative)||void 0===n?void 0:n.supportsNativeHomeOnPhone();e?M().navigateToHomeTab(t):i?P().uK({environment:t,store:Ke().Bv.createChildStore(o,{table:x().ev,id:i}),showMoveTo:!1,saveParent:!1,redirect:e,pageVisitSource:c().y8.BackForward}):A().oo({environment:t,url:v().JZ.root,redirect:!0}),St(t,{action:"done"})}}(0,e),children:(0,xe.jsx)(y().sA,{defaultMessage:"Done",id:"topbarMobile.doneQuickAddButton.label"})})}function Ft(e){let{store:t,spaceStore:o,spaceViewStore:n,isInvalidPage:l,shouldShowAddTo:d}=e;const c=(0,y().tz)(),u=(0,r().v3)(),{isTablet:g}=(0,r().Y0)(),h=(0,oe().X)("tablet_refresh_gate"),m=(0,a().IS)((e=>({iconStyle:(0,pt().aD)(e).iconStyle,iconContainer:(0,pt().aD)(e).iconContainer})),[]),{value:S}=(0,te().fJ)(F().commentsDependency),f=(0,s().K8)((()=>{if(!S)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=S;return(0,L().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[S,t]),v=(0,s().K8)((()=>!!S&&(0,L().getDiscussions)(t).length>0),[S,t]),x=(0,s().K8)((()=>Boolean(o&&!o.canEdit())),[o]),j=(0,s().K8)((()=>t.canEdit()),[t]),w=(0,s().K8)((()=>t.isFormBlock()),[t]),k=(0,s().K8)((()=>t.isPersonProfile()),[t]),T=(0,ot().shouldShowTopbarShareMenu)({isSpaceGuest:x,canEditPage:j,isPersonalHomePage:!1,isFormBlock:w,isTranslated:!1}),P=(0,s().K8)((()=>(0,ot().shouldShowTopbarUpdatesMenu)({canEditPage:j,device:u.device,isPersonalHomePage:!1,isFormBlock:!1,isTranslated:!1})),[j,u.device]),A=(0,s().K8)((()=>D().A.state.open),[]),M=(0,s().K8)((()=>!d&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!w&&!k),[w,d,t,k]),I=!w,B=f||A;return l?null:(0,xe.jsxs)(i.Fragment,{children:[g&&(0,xe.jsx)("div",{style:{width:16}}),(0,xe.jsx)(ft,{}),T&&(0,xe.jsx)(st().J6,{store:t,renderOrigin:e=>(0,xe.jsx)("div",{children:(0,xe.jsx)(De().A,{icon:b().Y,iconStyle:m.iconStyle,ariaLabel:c.formatMessage(ut().messages.share),style:m.iconContainer,mobileFeedback:!0,...e})})}),M&&(0,xe.jsx)(st().m,{shouldShowCommentsIndicator:B,hasDiscussions:v,renderOrigin:e=>(0,xe.jsx)(De().A,{icon:p().h,iconStyle:m.iconStyle,ariaLabel:c.formatMessage(mt.comments),style:m.iconContainer,mobileFeedback:!0,...e})}),g&&h&&(0,xe.jsx)(nt().TopbarFavoriteButton,{store:t,spaceViewStore:n,isTablet:g}),P&&(0,xe.jsx)(gt().aU,{onClick:()=>function(e){_e().A.setState({open:!0}),C().nW(e)}(u)}),I&&(0,xe.jsx)(st().gW,{store:t}),d&&(0,xe.jsx)(Nt,{}),(0,xe.jsx)("div",{style:{width:4}})]})}function Lt(e){const t=(0,a().DP)(),o=(0,r().v3)(),{isTablet:i}=(0,r().Y0)(),{shouldShowAddTo:n,routerState:l,store:d,spaceStore:c,spaceViewStore:u,isInvalidPage:p,pageVisitStore:g,presenceStore:h,hideActionButtons:m,showTopPadding:S,isSidebarExpanded:b}=e,v=(0,s().K8)((()=>Ct({shouldShowAddTo:n,environment:o})),[n,o]),x=(0,s().K8)((()=>{var e;return null===(e=o.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[o.mobileNative]),{isDraftPost:y,isPersonalHome:j,isTeamHome:w,isPosts:C,isMyTasks:k,isFormBlock:T,teamStore:P,canEdit:A,canEditCollection:M,isRestricted:I,shouldShowCancelQuickAdd:B}=(0,s().K8)((()=>d?{isDraftPost:d.isPost()&&!d.isPublishedPost(),isRestricted:d.isRestricted(),canEdit:d.canEdit(),canEditCollection:d.canEditCollection(),shouldShowCancelQuickAdd:xt(n,d),isMyTasks:(0,U().sj)(d.id),isPersonalHome:(0,se().lU)(d),isTeamHome:!1,isFormBlock:d.isFormBlock(),teamStore:void 0,isPosts:!1}:{isRestricted:!1,canEdit:!1,canEditCollection:!1,isPersonalHome:!1,isTeamHome:"team"===l.route.name,isPosts:"posts"===l.route.name,isMyTasks:!1,isFormBlock:!1,shouldShowCancelQuickAdd:!1,teamStore:"team"===l.route.name&&c&&Ke().sk.createChildStore(c,{table:"team",id:l.route.teamId,spaceId:c.id})}),[d,c,l,n]),_=(0,s().K8)((()=>(0,Ce().hK)()),[]);const K=(0,s().K8)((()=>Mt(n||Boolean(y),o,t,S)),[o,n,t,S,y]),R=(0,s().K8)((()=>At(o)),[o]),F=(0,s().K8)((()=>yt(n,o)),[o,n]),L=(0,s().K8)((()=>!n&&(!p&&!T)),[n,p,T]),D=(0,s().K8)((()=>(0,Z().Es)({blockStore:d})),[d]),E=(0,oe().X)("tablet_refresh_gate"),z=(0,a().IS)((()=>({tabletSidebarButton:{height:f().lD.lg,width:f().lD.lg,marginLeft:19,marginRight:14,marginTop:20,marginBottom:21,stroke:t.icon.primary,strokeWidth:.02}})),[t.icon.primary]),V=(0,s().K8)((()=>kt(o,!0,i)),[o,i]);return C?null:(0,xe.jsx)("div",{onClick:()=>It(o),style:K,className:Y().byw,children:y&&d?(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(Dt,{store:d}),(0,xe.jsx)(je,{postStore:d})]}):(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsxs)(Ue().Ye,{alignItems:"center",justifyContent:"flex-start",style:{minWidth:0},children:[R&&!b&&i&&E&&(0,xe.jsx)(Pt,{defaultMobileButtonStyle:z.tabletSidebarButton}),R&&i&&!E&&(0,xe.jsx)(Tt,{}),R&&!i&&(0,xe.jsx)(Tt,{}),(0,xe.jsxs)(O().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,xe.jsx)(H().W,{error:t,errorId:o,iconSize:26})},children:[v&&(i||x)&&(0,xe.jsx)(et().A,{supportsNativeHomeTabPhone:x}),L&&d&&(0,xe.jsx)(W().oK,{store:d,style:V,maxAncestorCount:i?2:1,showCurrentPageControls:!1,ancestorMaxWidth:i?160:100,currentPageMaxWidth:i?240:220,isMobile:!0}),L&&D&&d&&(0,xe.jsx)(Je().YC,{blockStore:d}),F&&d&&(0,xe.jsx)(Rt,{store:d})]})]}),(0,xe.jsx)(Ue().Ye,{alignItems:"center",justifyContent:"flex-end",children:(0,xe.jsxs)(O().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,xe.jsx)(H().W,{error:t,errorId:o,iconSize:26})},children:[T&&d&&(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(He().A,{store:d,removeIfEmpty:!0,style:{fontSize:14,paddingLeft:6}}),(0,xe.jsx)(Ve().A,{size:8})]}),M&&i&&d&&(0,xe.jsx)(qe().A,{store:d},d.id),(0,xe.jsx)(it().A,{}),function(){if(!m)return T?d?(0,xe.jsx)(N().A,{formBlockStore:d,inPeekMode:!1}):void 0:j&&d?(0,xe.jsx)(ne().J,{store:d,isInvalidPage:Boolean(p)}):w&&P?(0,xe.jsx)(Ne().c,{teamStore:P,permissionsInviteStore:void 0}):(0,xe.jsxs)(xe.Fragment,{children:[I&&i&&!_&&(0,xe.jsx)(ct().A,{style:{marginRight:8},onClick:()=>we().Tk(o)}),i&&A&&d&&g&&h&&(0,xe.jsx)(dt().Ay,{rootStore:d,pageVisitStore:g,presenceStore:h}),B?(0,xe.jsx)(Wt,{}):k&&d?(0,xe.jsx)(jt,{store:d,spaceViewStore:u,isInvalidPage:p}):d?(0,xe.jsx)(Ft,{store:d,spaceStore:c,spaceViewStore:u,isInvalidPage:p,shouldShowAddTo:n}):null]})}()]})})]})})}function Dt(e){const{store:t}=e,o=(0,r().v3)(),n=(0,y().tz)(),s=(0,i.useCallback)((()=>{t&&A().aX(o)}),[o,t]),l=(0,a().IS)((e=>({iconButton:{marginLeft:16,background:e.tint.regular,borderRadius:16,width:32,height:32},rightButtons:{display:"flex",alignItems:"center"},icon:(0,pt().aD)(e).iconStyle,iconContainer:(0,pt().aD)(e).iconContainer})),[]);return(0,xe.jsxs)(xe.Fragment,{children:[(0,xe.jsx)(De().A,{icon:()=>(0,u().u)({width:20,height:20}),style:l.iconButton,onClick:s,ariaLabel:n.formatMessage({defaultMessage:"Close",id:"topbarMobile.closeButton.label"})}),(0,xe.jsxs)("div",{style:l.rightButtons,children:[(0,xe.jsx)(st().J6,{store:t,renderOrigin:e=>(0,xe.jsx)("div",{children:(0,xe.jsx)(De().A,{icon:b().Y,iconStyle:l.icon,ariaLabel:n.formatMessage(ut().messages.share),style:l.iconContainer,mobileFeedback:!0,...e})})}),(0,xe.jsx)(st().gW,{store:t,renderOrigin:e=>(0,xe.jsx)("div",{children:(0,xe.jsx)(De().A,{icon:g().L,ariaLabel:n.formatMessage(lt().messages.actions),iconStyle:l.icon,style:l.iconContainer,mobileFeedback:!0,...e})})}),(0,xe.jsx)(ht().F,{store:t})]})]})}},45972:(e,t,o)=>{o.d(t,{$x:()=>B,J6:()=>K,df:()=>W,gW:()=>R,m:()=>_});var i=o(296540),n=()=>o(484714),r=()=>o(847249),s=()=>o(401497),a=()=>o(959013),l=()=>o(2220),d=()=>o(205127),c=()=>o(20039),u=()=>o(482707),p=()=>o(776894),g=()=>o(108944),h=()=>o(963589),m=()=>o(831272),S=()=>o(913139),b=()=>o(119987),f=()=>o(265201),v=()=>o(962730),x=()=>o(351360),y=()=>o(529183),j=()=>o(630116),w=()=>o(795179),C=()=>o(538233),k=()=>o(406699),T=()=>o(897119),P=()=>o(186270),A=()=>o(764172),M=()=>o(705630),I=o(474848);function B(e){let{store:t}=e;const o=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minWidth:0,flex:1},breadcrumb:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:0,maxWidth:"100%",color:e.text.primary,fontSize:"17px",fontStyle:"normal",fontWeight:600,lineHeight:"22px"},subtitle:{color:e.text.secondary,textAlign:"center",fontSize:"13px",fontStyle:"normal",fontWeight:500,lineHeight:"16px",marginTop:2}})),[]),i=(0,r().K8)((()=>{const e=g().fU(t);if(e.length<=1)return null;const o=e[1];return o instanceof j().h4?o:g().Nq(t,1)}),[t]),n=(0,r().K8)((()=>t.isTopLevelPrivatePage()),[t]);return(0,I.jsxs)("div",{style:o.container,children:[(0,I.jsx)(d().oK,{store:t,style:o.breadcrumb,maxAncestorCount:0,showCurrentPageControls:!1,ancestorMaxWidth:100,currentPageMaxWidth:220,isMobile:!0}),(0,I.jsx)("div",{style:o.subtitle,children:n?(0,I.jsx)(a().sA,{...p().Dh.privateDestinationName}):i?(0,I.jsx)(c().A,{store:i,maxWidth:220,iconSize:12,iconStyle:{display:"none"}}):null})]})}function _(e){let{renderOrigin:t,hasDiscussions:o,shouldShowCommentsIndicator:s}=e;const a=(0,n().v3)(),d=(0,r().K8)((()=>f().A.state.open),[]),[c,u]=(0,i.useState)(Date.now());(0,i.useEffect)((()=>{d&&u(Date.now())}),[d]);const p={position:"relative",height:"100%"},g=(0,i.useCallback)((()=>{f().A.setState({open:!0}),(0,l().u)({environment:a,event:{eventName:"topbar_comments_menu_click",eventProperties:{has_discussions:o,has_unread_indicator:s}}})}),[a,o,s]),y=(0,h().X)("comment_sidebar_for_you"),j=(0,r().O$)(x().AppStoreMainEditorCurrentBlockStore);return(0,I.jsx)(k().Ay,{buttonPopupStore:f().A,popupType:T().nl.BottomSheet,alignmentToOrigin:v().C.Start,placementToOrigin:v().W.Right,originGap:0,bottomSheetBackgroundColor:y?"elevated":"wash",stopClickPropagation:!0,isWideTabletWidth:!0,render:e=>y?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(b().z,{navigableBlockStore:j}),j?(0,I.jsx)(S().B,{navigableBlockStore:j,timeViewed:c}):null]}):(0,I.jsx)(m().R,{timeViewed:c,location:"popup",onMobileClose:()=>e.close()}),isFullWidthOnMobile:!0,preventScaleTransition:!0,onClick:g,renderOrigin:e=>(0,I.jsxs)("div",{style:p,children:[t(e),s&&(0,I.jsx)(A().tS,{})]})})}function K(e){let{store:t,renderOrigin:o}=e;const n=(0,r().uB)(void 0,y().Ay),s=(0,i.useCallback)((()=>{C().A.setState({open:!0})}),[]);return(0,I.jsx)(k().Ay,{popupType:T().nl.BottomSheet,buttonPopupStore:C().A,renderOrigin:o,onClick:s,render:()=>(0,I.jsx)(u().k,{store:t,buttonPopupStore:C().A,location:"topbar_mobile",onClose:()=>C().A.setState({open:!1}),inviteTargetsStore:n})})}function R(e){let{store:t,renderOrigin:o}=e;return(0,I.jsx)(M().TopbarMoreButton,{store:t,buttonPopupStore:w().A,renderOrigin:o})}function W(e){let{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o}=e;return(0,I.jsx)(P().v,{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o})}},103674:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{permissionsInviteStore:new(o(986229).A),contextualInviteStore:new(o(159026).Ay)}}get stage(){return this.state.contextualInviteStore.state.inviteStage}}const n=i},136805:(e,t,o)=>{o.r(t),o.d(t,{TopbarShareButton:()=>I,messages:()=>k});var i=o(296540),n=()=>o(484714),r=()=>o(847249),s=()=>o(401497),a=()=>o(864896),l=()=>o(959013),d=()=>o(904671),c=()=>o(38337),u=()=>o(553965),p=()=>o(321172),g=()=>o(623275),h=()=>o(437487),m=()=>o(326589),S=()=>o(962730),b=()=>o(227440),f=()=>o(493823),v=()=>o(406699),x=()=>o(35392),y=()=>o(859428),j=()=>o(573792),w=()=>o(863059),C=o(474848);const k=(0,l().YK)({share:{defaultMessage:"Share",id:"topbar.share"}});function T(e){let{store:t,buttonPopupStore:a}=e;const l=(0,n().v3)(),{isMobile:c,isTablet:u}=(0,r().K8)((()=>({isMobile:l.device.isMobile,isTablet:l.device.isTablet})),[l]),S=(0,r().uB)(void 0,o(103674).A),b=(0,r().uB)(void 0,o(529183).Ay),f=(0,r().uB)(void 0,o(454354).A),x=(0,r().K8)((()=>function(e,t){if(t.shouldUserHaveAccessToPrivatePageBlock()&&t.state.changePermissionsEnabled&&t.state.privatePageStore&&t.state.privatePageStore.id===e.id)return t.state.privatePageStore;return e}(t,f)),[t,f]),y=(0,r().K8)((()=>(0,o(663590).FI)({disableLogging:!0})),[]),j=(0,r().K8)((()=>t.canAdmin()),[t]),w=(0,r().K8)((()=>!c&&function(e,t){const{permissionsInviteStore:o}=e.state;return o.state.inviteTargets.length>0||t.state.inviteTargets.length>0}(S,b)),[b,c,S]),{sudoModeStoreId:k}=(0,r().K8)((()=>{var e;return{sudoModeStoreId:null===(e=f.state.privatePageStore)||void 0===e?void 0:e.id}}),[f]),T=(0,r().O$)(o(351360).AppStoreCurrentSpaceStore);(0,i.useEffect)((()=>{!function(e){var t;let{environment:o,store:i,sudoModeStore:n,canAdmin:r,currentSpaceStore:s}=e;null!==(t=n.state.privatePageStore)&&void 0!==t&&t.id&&n.state.privatePageStore.id!==i.id&&n.reset();r||d().B({environment:o,sudoModeStore:n,pageBlockId:i.id,currentSpaceStore:s})}({environment:l,sudoModeStore:f,store:t,canAdmin:j,currentSpaceStore:T})}),[j,l,t,f,k,T]),(0,i.useEffect)((()=>{h().Ay.setState({...h().Ay.state,isInitialized:!0})}));const A=(0,i.useCallback)((()=>{a.reset()}),[a]),I=(0,i.useCallback)((()=>{M({buttonPopupStore:a,universalMemberInviteStore:S,inviteTargetsStore:b}),o(778417).IU({environment:l}),p().Tk(l),(0,m().g)()||o(224701).Ow(l)}),[a,S,b,l]),B=(0,i.useCallback)((e=>(0,C.jsx)(P,{buttonPopupEvents:e,handleClick:I})),[I]),_=(0,i.useCallback)((async()=>{if(b.state.inviteTargets.length>0){return void(await p().T({environment:l,inviteTargetsStore:b})&&(p().XP(l),M({buttonPopupStore:a,universalMemberInviteStore:S,inviteTargetsStore:b})))}const{permissionsInviteStore:e}=S.state;"invitee"===e.state.inputFocus&&e.setState({...e.state,inputFocus:"none"});await(0,o(743260).iQ)({environment:l,permissionsInviteStoreState:e.state,from:"share_menu"})||(p().XP(l),M({buttonPopupStore:a,universalMemberInviteStore:S,inviteTargetsStore:b}))}),[a,l,b,S]),K=(0,s().IS)((e=>({buttonPopup:{...c?{width:"100%"}:u?{width:460}:{width:y?g().$D:500,overflow:"hidden",...y&&{borderRadius:g().Sg,boxShadow:e.shadowMD,..."dark"===e.mode&&{border:`1px solid ${e.largePopupBorder}`}}}}})),[c,y,u]);return(0,C.jsx)(v().Ay,{popupType:c?v().z7.SlideUp:v().z7.Popup,forceInitialInbound:!0,buttonPopupStore:a,renderOrigin:B,originGap:c?void 0:8,style:K.buttonPopup,onClick:I,render:()=>(0,C.jsx)(o(482707).k,{buttonPopupStore:a,sudoModeStore:f,store:x,inviteTargetsStore:b,universalMemberInviteStore:S,onUpgradeButtonClick:A,location:c?"topbar_mobile":"topbar_share_button",onClose:_}),persistOnClose:w,onDismiss:_,onClose:_})}function P(e){let{buttonPopupEvents:t,handleClick:o}=e;const{isMobile:a}=(0,n().Y0)(),d=!(0,r().O$)(b().e),c=(0,r().K8)((()=>(0,m().g)()),[]),p=(0,s().IS)((e=>({shortcut:{color:e.text.contrastSecondary}})),[]),g=(0,i.useCallback)((()=>d?(0,C.jsx)(l().sA,{defaultMessage:"Unavailable while offline",id:"topbar.shareButton.offlineTooltip"}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:c?(0,C.jsx)(l().sA,{defaultMessage:"Share",id:"topbar.shareButton.tooltipAWTL"}):(0,C.jsx)(l().sA,{defaultMessage:"Share or publish to the web",id:"topbar.shareButton.tooltip"})}),(0,C.jsx)(x().A,{style:p.shortcut,name:"openShareMenu"})]})),[d,c,p.shortcut]);return(0,C.jsx)(y().A,{disableTooltip:a,renderTooltip:g,placement:S().W.Bottom,delayThreshold:400,render:e=>(0,C.jsx)(A,{events:(0,u().A)(e,t),handleClick:o,disabled:d})})}function A(e){let{events:t,handleClick:o,disabled:i}=e;const{isMobile:r}=(0,n().Y0)(),d=(0,l().tz)(),u=(0,s().IS)((e=>{const t=(0,j().aD)(e),o=(0,w().Hh)(e);return{mobileIconStyle:t.iconStyle,shareButton:{...r?t.iconContainer:{marginRight:o.iconButton.marginRight,marginLeft:o.iconButton.marginRight}}}}),[r]);const p=r?(0,a().Y)(u.mobileIconStyle):(0,C.jsx)(l().sA,{defaultMessage:"Share",id:"topbar.shareButton.title"});return(0,C.jsx)(f().p,{id:void 0,className:c().voG,...t,mobileFeedback:r,style:u.shareButton,"aria-label":d.formatMessage(k.share),disabled:i,disabledFeedback:i,children:p})}function M(e){let{buttonPopupStore:t,universalMemberInviteStore:o,inviteTargetsStore:i}=e;t.reset(),o.reset(),i.reset()}const I=i.memo(T)},186270:(e,t,o)=>{o.d(t,{v:()=>x,A:()=>j});o(296540);var i=()=>o(484714),n=()=>o(847249),r=()=>o(401497),s=()=>o(340498),a=o(474848);const l={viewBox:"0 0 20 20",svg:(0,a.jsx)("path",{d:"M6.308 9.558a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L7.634 10l4.958-4.958a.625.625 0 1 0-.884-.884z"})},d=(0,s().wt)("arrowChevronSingleLeft",l);var c=()=>o(526278),u=()=>o(940563);const p=(0,s().wt)("mobileTopbarChevronRight",{viewBox:"0 0 26 26",svg:(0,a.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M17.6504 13.0001L9.85039 20.8001",strokeWidth:"1.5",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M17.6504 13.0001L9.85039 5.20012",strokeWidth:"1.5",strokeLinecap:"round"})]})});var g=()=>o(959013),h=()=>o(435009),m=()=>o(836251),S=()=>o(963589),b=()=>o(704152),f=()=>o(573792);const v=(0,g().YK)({back:{defaultMessage:"Back",id:"mobile.topbar.back"},forward:{defaultMessage:"Forward",id:"mobile.topbar.forward"}});function x(e){let{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:o}=e;const s=(0,i().v3)(),l=(0,n().K8)((()=>!t&&!m().UL(s)),[t,s]),{isTablet:u}=(0,i().Y0)(),p=(0,r().DP)(),x=(0,f().aD)(p),y=(0,g().tz)(),j=(0,S().X)("tablet_refresh_gate");let w,C;return u&&j?(w=(0,c().w)({width:24,height:24}),C={...o,fill:x.iconStyle.fill}):(w=d({width:24,height:24,strokeWidth:.2}),C={...o}),(0,a.jsx)(b().A,{onClick:()=>function(e,t){const{mobileNative:o}=e;m().Al(e)||!t||m().UL(e)?h().aX(e):null==o||o.showNativeHomeTab()}(s,t),className:"notion-history-back-button",disabled:l,disabledFeedback:!0,mobileFeedback:!0,style:C,ariaLabel:y.formatMessage(v.back),children:w})}function y(e){let{defaultMobileButtonStyle:t}=e;const o=(0,i().v3)(),r=(0,n().K8)((()=>!m().MN(o)),[o]),{isTablet:s}=(0,i().Y0)(),l=(0,S().X)("tablet_refresh_gate"),d=(0,g().tz)();let c;return c=s&&l?(0,u().arrowStraightRightIcon)({width:24,height:24}):p({width:24,height:24}),(0,a.jsx)(b().A,{onClick:()=>{h().sY()},className:"notion-history-forward-button",disabled:r,mobileFeedback:!0,disabledFeedback:!0,style:t,ariaLabel:d.formatMessage(v.forward),children:c})}const j=function(e){let{supportsNativeHomeTabPhone:t}=e;const{isTablet:n}=(0,i().Y0)(),s=(0,S().X)("tablet_refresh_gate"),l=(0,r().IS)((e=>({container:t?{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",paddingLeft:4,paddingRight:t||n?0:4}:{display:"flex",flexShrink:0,height:"100%",paddingLeft:4,paddingRight:t||n?0:4},defaultMobileButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:32,stroke:e.icon.primary},tabletRefreshButtonStyle:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",height:"100%",width:35,stroke:e.icon.primary,strokeWidth:.2}})),[t,n]);return(0,a.jsx)(o(109488).A,{capture:!0,render:e=>(0,a.jsxs)("div",{style:l.container,...e,children:[(0,a.jsx)(x,{supportsNativeHomeTabPhone:t,defaultMobileButtonStyle:n&&s?l.tabletRefreshButtonStyle:l.defaultMobileButtonStyle}),!t&&(0,a.jsx)(y,{defaultMobileButtonStyle:n&&s?l.tabletRefreshButtonStyle:l.defaultMobileButtonStyle})]})})}},338429:(e,t,o)=>{o.d(t,{A:()=>i});const i=new(o(463830).A)},371513:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var i=o(474848);const n={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M5 6.25a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1zm-.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1H5a.5.5 0 0 1-.5-.5m.5 1.5a.5.5 0 0 0 0 1h1a.5.5 0 1 0 0-1z"}),(0,i.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v7.5c0 .483.392.875.875.875h2.95v-9.25zm11 9.25a.875.875 0 0 0 .875-.875v-7.5a.875.875 0 0 0-.875-.875H8.55v9.25z"})]})},r=(0,o(340498).wt)("sidebarLeft",n)},448360:(e,t,o)=>{o.d(t,{W:()=>i});const i=o(757695).default.createValue(!1,{name:"AiPageTranslationCalloutStore"})},577009:(e,t,o)=>{o.d(t,{rU:()=>p,QB:()=>r,hR:()=>d,pT:()=>l,JN:()=>u,i8:()=>s,Wt:()=>c,Sx:()=>a});var i=()=>o(645873);const n=new(i().O2)("notifications",(()=>Promise.all([o.e(75134),o.e(43380),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(49889),o.e(97727),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(60499),o.e(24593),o.e(89686),o.e(85314),o.e(23844),o.e(19632),o.e(6893)]).then(o.bind(o,241637)))),r=(0,i()._h)(n,(e=>e.GetNotifiedFor)),s=(0,i()._h)(n,(e=>e.TopbarUpdatesMenu)),a=(0,i()._h)(n,(e=>e.UpdateSidebar)),l=(0,i()._h)(n,(e=>e.MobileInboxPopup)),d=(0,i()._h)(n,(e=>e.InboxActionsMenu)),c=((0,i()._h)(n,(e=>e.InboxNotificationSettingsButton)),(0,i()._h)(n,(e=>e.UnreadMentionsBadge))),u=(0,i()._h)(n,(e=>e.NotificationInboxPanelContent)),p=(0,i()._h)(n,(e=>e.AnimatedEmojiBadge))},705630:(e,t,o)=>{o.r(t),o.d(t,{TopbarMoreButton:()=>M,messages:()=>I});var i=o(296540),n=()=>o(484714),r=()=>o(847249),s=()=>o(401497),a=()=>o(589407),l=()=>o(340498),d=()=>o(959013),c=()=>o(741496),u=()=>o(989423);var p=()=>o(778417),g=()=>o(645873);const h=new(g().O2)("topbarMoreMenu",(async()=>await Promise.all([o.e(75134),o.e(43380),o.e(9304),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(22900),o.e(49889),o.e(97727),o.e(85128),o.e(83700),o.e(95555),o.e(58823),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(67780),o.e(96933),o.e(87598),o.e(23063),o.e(3965),o.e(84341),o.e(80533),o.e(45620),o.e(58221),o.e(44763),o.e(8081),o.e(67183),o.e(64598),o.e(82720),o.e(4253),o.e(86787),o.e(77465),o.e(24593),o.e(80896),o.e(1440),o.e(67378),o.e(58504),o.e(97308),o.e(63996),o.e(20636),o.e(66268),o.e(55717),o.e(7005),o.e(40186),o.e(22585),o.e(73206),o.e(11037),o.e(33235),o.e(91957),o.e(84176),o.e(16357),o.e(75681)]).then(o.bind(o,628302)))),m=(0,g()._h)(h,(e=>e.TopbarMoreMenu));var S=()=>o(494043),b=()=>o(448360),f=()=>o(351360),v=()=>o(816013),x=()=>o(318890),y=()=>o(594607),j=()=>o(953006),w=o(474848);function C(e){const{originRef:t}=e,o=(0,s().IS)((e=>({aiTranslateIcon:{height:18,width:18,fill:e.text.uiBluePrimary}})),[]);return(0,w.jsx)(y().U,{calloutId:"ai_page_translation",children:(0,w.jsx)(j().k,{origin:t,placementToOrigin:"bottom",header:(0,w.jsxs)("div",{style:{display:"flex",fontSize:14,gap:12,paddingLeft:4,paddingRight:4},children:[(0,x().K)(o.aiTranslateIcon),(0,w.jsx)(d().sA,{id:"aiPageTranslationTooltip.header",defaultMessage:"You can always find translation in the top right menu"})]}),showPointer:!1,pointerOffset:6,content:null,onCloseClick:()=>{b().W.reset()},style:{width:300},onPrimaryButtonClick:()=>{b().W.reset()},nextButtonContent:(0,w.jsx)(d().sA,{id:"aiPageTranslationTooltip.dismiss",defaultMessage:"Got it"})})})}var k=()=>o(406699),T=()=>o(612900),P=()=>o(782473);function A(e){let{originRef:t}=e;return(0,w.jsx)(y().U,{calloutId:"wiki_promo",children:(0,w.jsx)(j().k,{origin:t,placementToOrigin:"bottom",header:"Upgrade your existing wikis",content:"Look for the Turn into wiki action here",onCloseClick:()=>{v().r.reset()},pointerPosition:"98%",pointerLength:24,pointerOffset:-3,style:{width:P().Sw}})})}function M(e){let{buttonPopupStore:t,store:o,isLastButton:a,renderOrigin:l}=e;const d=(0,n().v3)(),{device:g}=d,[h,x]=(0,i.useState)(void 0),y=(0,i.useRef)(null),j=(0,i.useCallback)((()=>{v().r.reset(),b().W.reset(),p().IU({environment:d});const e=y.current;e&&x(e.getBoundingClientRect()),function(e){u().vd(e,"open_more_menu")}(d)}),[y,d]),P=(0,r().K8)((()=>v().r.state.showConvertTooltip),[]),M=(0,r().O$)(b().W),I=(0,s().IS)((e=>({mobilePopupStyle:{borderRadius:12,backgroundColor:e.surface.wash}})),[]),B=(0,w.jsxs)(w.Fragment,{children:[P?(0,w.jsx)(A,{originRef:y}):M?(0,w.jsx)(C,{originRef:y}):null,(0,w.jsx)(k().Ay,{popupType:g.isMobile?k().z7.BottomSheet:k().z7.Popup,buttonPopupStore:t,renderOrigin:l||(e=>(0,w.jsx)(K,{ref:y,buttonPopupEvents:e,isLastButton:a})),onClick:j,render:()=>(0,w.jsx)(m,{blockStore:o,onClickOriginRect:h,handleAccept:e=>function(e,t,o){const{mainEditorCurrentBlockStore:i}=f().default.state;if(i){const t=i.getType();var n;if(t)(0,c().N)(o,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"topbar_more_menu",block_id:i.id,block_type:t,is_toggleable:(0,S().Yt)(t,i.getFormat()),collection_id:null===(n=i.getCollectionViewSourceCollectionStore())||void 0===n?void 0:n.id,parent_collection_id:i.getParentCollectionIdUpToTwoLevels(),form_id:i.getFirstFormIdInCollectionViewBlock()})}e.closeParentMenu&&_(t)}(e,t,d),handleDismiss:()=>_(t)}),originGap:g.isElectronWindows?12:8,forceInitialInbound:!0,style:g.isMobile?I.mobilePopupStyle:{width:240,maxHeight:"80vh"}})]}),R=(0,r().K8)((()=>f().default.state.inAppCalloutStore.getCalloutVisibility("ai_page_translation").canShow),[]);return M&&R?(0,w.jsx)(T().u,{shape:"square",borderRadius:6,children:B}):B}const I=(0,d().YK)({actions:{defaultMessage:"Actions",id:"topbar.actions"}});function B(e,t,i){const{device:n}=e;if(!n.isMobile){const{iconButton:{width:e,height:i}}=(0,o(863059).Hh)(t);return{display:"flex",alignItems:"center",justifyContent:"center",width:e,height:i,borderRadius:6}}const r=o(508496).default.checkGate({gateName:"tablet_refresh_gate"}),s=(0,o(573792).aD)(t).iconContainer;return i?{...s,marginLeft:n.isTablet&&r?-6:void 0,marginRight:0}:{...s,marginLeft:n.isTablet&&r?-6:void 0,marginRight:n.isTablet&&r?-6:s.marginRight}}function _(e){e.setState({...e.state,open:!1})}const K=i.forwardRef((function(e,t){let{buttonPopupEvents:i,isLastButton:r}=e;const c=(0,s().DP)(),u=(0,n().v3)(),{device:p}=u,g=(0,d().tz)();return(0,w.jsx)(o(859428).A,{renderTooltip:()=>u.currentUser.isLoggedIn()?(0,w.jsx)(d().sA,{defaultMessage:"Style, export, and more…",id:"topbarMoreButton.tooltip"}):(0,w.jsx)(d().sA,{defaultMessage:"More…",id:"topbarMoreButton.loggedOut.tooltip"}),placement:o(962730).W.Bottom,originGap:p.isElectronWindows?10:void 0,delayThreshold:400,render:e=>(0,w.jsx)(o(704152).A,{ref:t,style:B(u,c,r),mobileFeedback:p.isMobile,className:o(38337).ug9,ariaLabel:g.formatMessage(I.actions),...(0,o(553965).A)(i,e),children:p.isMobile?(0,a().L)({height:l().lD.lg,width:l().lD.lg,fill:c.icon.primary}):(0,a().L)({width:l().Ev.lg,height:l().Ev.lg,fill:c.icon.primary})})})}))},709274:(e,t,o)=>{o.d(t,{D:()=>i});const i=(0,o(959013).YK)({postsCollectionViewPageTitle:{id:"posts.collectionViewPage.title",defaultMessage:"Posts"},postsCollectionTitle:{id:"posts.collection.title",defaultMessage:"Updates"},postHeadingName:{id:"posts.collection.headingName",defaultMessage:"Subject"},deleteDraftTooltip:{id:"posts.deleteDraftTooltip",defaultMessage:"Delete draft"},fullScreenTooltip:{id:"posts.fullScreenTooltip",defaultMessage:"Full screen"}})},782473:(e,t,o)=>{o.d(t,{Nu:()=>s,Sw:()=>i,gO:()=>n,j$:()=>r});const i=220,n=24,r=-7,s=-3},784350:(e,t,o)=>{o.d(t,{S:()=>_,TopbarMobileElevatedButtons:()=>K});o(898992),o(737550);var i=o(296540),n=()=>o(484714),r=()=>o(847249),s=()=>o(401497),a=()=>o(628182),l=()=>o(49621),d=()=>o(589407),c=()=>o(864896),u=()=>o(959013),p=()=>o(774733),g=()=>o(493319),h=()=>o(116008),m=()=>o(112995),S=()=>o(138156),b=()=>o(38337),f=()=>o(141333),v=()=>o(645873),x=()=>o(301421),y=()=>o(195613),j=()=>o(285790),w=()=>o(21140),C=()=>o(813402),k=()=>o(533788),T=()=>o(32791),P=()=>o(45972),A=()=>o(705630),M=()=>o(136805),I=()=>o(573792),B=o(474848);function _(e){const t=(0,n().v3)(),{shouldShowAddTo:o,showTopPadding:a}=e,[l,d]=(0,i.useState)(!1),[c,u]=(0,i.useState)(0),[p,g]=(0,i.useState)(!1),[h,m]=(0,i.useState)(!1),[S,v]=(0,i.useState)(!0),j=(0,r().K8)((()=>t.RouterStore.state.route),[t.RouterStore]),w=(0,r().K8)((()=>e.store&&e.store.isDefined()),[e.store]);(0,i.useEffect)((()=>{d(!1),g(!1),u(0),m(!1)}),[j]),(0,i.useEffect)((()=>{const e=()=>{m(!0)};return document.addEventListener("touchstart",e),()=>{document.removeEventListener("touchstart",e)}}),[]);const C=(0,r().K8)((()=>y().A.state.elementRef??{current:void 0}),[]),k=(0,f().yE)(C),P=(0,r().K8)((()=>parseInt(t.WindowSizeStore.state.paddingTopCSS,10)),[t]);(0,i.useEffect)((()=>{if(!w||!h)return;if(!p&&void 0!==k&&0!==k)return g(!0),void u(k);if(void 0===k)return;if(!(Math.abs(k-c)>5))return;const t=k<c;if(u(k),k<=P)d(!1);else{const o=function(e,t){const o=e.getTitleStore();if(!o)return!1;const i=x().n.findEditableWithStore(o),n=null==i?void 0:i.getNode();if(!n)return!1;const r=n.getBoundingClientRect(),s=r.top,a=r.height,l=window.innerHeight;return s>=t&&s+a<=l}(e.store,P);d(t&&!o),v(o)}}),[k,c,p,h,w,e.store,P]);const A=(0,r().K8)((()=>{var e;return(0,T().shouldRenderBackButton)({shouldShowAddTo:o,environment:t})&&Boolean(null===(e=t.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone())}),[o,t]),M=(0,s().IS)((e=>({container:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",WebkitUserSelect:"none",cursor:"pointer",backgroundColor:"transparent"},topPadding:{backgroundColor:S?"transparent":e.surface.page,width:"100%"}})),[S]),I=(0,r().K8)((()=>({...M.topPadding,height:t.WindowSizeStore.state.paddingTopCSS})),[t.WindowSizeStore,M.topPadding]),_=a?(0,B.jsx)("div",{style:I}):null;return w?(0,B.jsxs)("div",{style:M.container,className:b().l6q,children:[_,(0,B.jsx)(R,{shouldShowBackButton:A,store:e.store,routerState:e.routerState,isVisible:l})]}):null}function K(e){const{store:t,spaceStore:o,spaceViewStore:i,isInvalidPage:a,hasCoverPhoto:l}=e,d=(0,n().v3)();const c=(0,s().IS)((e=>({topbarStyle:{...N(e,l)},iconContainer:(0,I().qB)(e).iconContainer})),[l]),u=(0,r().K8)((()=>({top:d.WindowSizeStore.getSafePaddingTopPx(18),bottom:24,left:d.WindowSizeStore.getSafePaddingLeftPx(16),right:d.WindowSizeStore.getSafePaddingRightPx(4)})),[d.WindowSizeStore]);return(0,B.jsxs)("div",{className:b().SPN,style:{...c.topbarStyle,paddingTop:u.top,paddingBottom:u.bottom,paddingLeft:u.left,paddingRight:u.right},children:[(0,B.jsx)(w().Ye,{alignItems:"center",justifyContent:"flex-start",style:{minWidth:0},children:(0,B.jsx)(m().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,B.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:(0,B.jsx)("div",{children:(0,B.jsx)(P().df,{supportsNativeHomeTabPhone:!0,defaultMobileButtonStyle:c.iconContainer})})})}),(0,B.jsx)(w().Ye,{alignItems:"center",justifyContent:"flex-end",children:(0,B.jsxs)(m().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,B.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:[(0,B.jsx)(k().A,{}),t?(0,B.jsx)(F,{store:t,spaceStore:o,spaceViewStore:i,isInvalidPage:a,shouldShowAddTo:!1}):null]})})]})}function R(e){const{shouldShowBackButton:t,isVisible:o}=e,i=(0,n().v3)(),a=(0,u().tz)(),l=(0,s().IS)((e=>({topbarStyle:{...W(e,o)},iconStyle:{...(0,I().qB)(e).iconStyle,fill:e.icon.secondary},iconContainerSecondary:(0,I().qB)(e).iconContainerSecondary})),[o]),c=(0,r().K8)((()=>({left:i.WindowSizeStore.getSafePaddingLeftPx(16),right:i.WindowSizeStore.getSafePaddingRightPx(4)})),[i.WindowSizeStore]);return(0,B.jsxs)("div",{style:{...l.topbarStyle,paddingLeft:c.left,paddingRight:c.right},children:[(0,B.jsx)(w().Ye,{alignItems:"center",justifyContent:"flex-start",style:{minWidth:0},children:(0,B.jsx)(m().K,{from:"TopbarMobile.Left",fallback:e=>{let{error:t,errorId:o}=e;return(0,B.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:t&&(0,B.jsx)(P().df,{supportsNativeHomeTabPhone:!0,defaultMobileButtonStyle:{...l.iconContainerSecondary}})})}),e.store&&(0,B.jsx)(P().$x,{store:e.store}),(0,B.jsx)(w().Ye,{alignItems:"center",justifyContent:"flex-end",children:(0,B.jsxs)(m().K,{from:"TopbarMobile.Right",fallback:e=>{let{error:t,errorId:o}=e;return(0,B.jsx)(S().W,{error:t,errorId:o,iconSize:26})},children:[(0,B.jsx)(k().A,{}),e.store&&(0,B.jsx)(P().gW,{store:e.store,renderOrigin:e=>(0,B.jsx)("div",{children:(0,B.jsx)(j().A,{icon:d().L,iconStyle:l.iconStyle,ariaLabel:a.formatMessage(A().messages.actions),isDarkIconColor:!0,style:l.iconContainerSecondary,mobileFeedback:!0,...e})})})]})})]})}function W(e,t){return{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:t?a().s1:0,backgroundColor:t?e.surface.page:"transparent",WebkitUserSelect:"none",cursor:"pointer",boxSizing:"border-box",transition:"ease all 150ms",opacity:t?1:0,pointerEvents:t?"auto":"none"}}function N(e,t){return{display:"flex",position:t?"absolute":"relative",flexDirection:"row",justifyContent:"space-between",alignItems:"center",width:"100%",maxWidth:"100%",height:a().s1,backgroundColor:t?"transparent":e.surface.page,WebkitUserSelect:"none",cursor:"pointer",pointerEvents:"auto",boxSizing:"border-box",opacity:1,zIndex:1}}function F(e){let{store:t,spaceStore:o,isInvalidPage:n,shouldShowAddTo:a}=e;const m=(0,u().tz)(),S=(0,s().IS)((e=>({iconStyle:(0,I().qB)(e).iconStyle,iconContainer:(0,I().qB)(e).iconContainer})),[]),{value:b}=(0,v().fJ)(p().commentsDependency),f=(0,r().K8)((()=>{if(!b)return!1;const{discussionViewActions:e,discussionHelpers:{getAndSortCommentStoresByTime:o}}=b;return(0,g().getDiscussions)(t).some((t=>!t.getResolved()&&o(t).some((o=>e.isCommentUnread({discussionStore:t,commentStore:o})))))}),[b,t]),x=(0,r().K8)((()=>!!b&&(0,g().getDiscussions)(t).length>0),[b,t]),y=(0,r().K8)((()=>Boolean(o&&!o.canEdit())),[o]),w=(0,r().K8)((()=>t.canEdit()),[t]),k=(0,r().K8)((()=>t.isFormBlock()),[t]),_=(0,C().shouldShowTopbarShareMenu)({canEditPage:w,isSpaceGuest:y,isFormBlock:k,isPersonalHomePage:!1,isTranslated:!1}),K=(0,r().K8)((()=>h().A.state.open),[]),R=(0,r().K8)((()=>!a&&(!t.isCollectionView()||t.isCollectionViewPageWithContent())&&!k&&x),[k,a,t,x]),W=!k,N=f||K;return n?null:(0,B.jsxs)(i.Fragment,{children:[_&&(0,B.jsx)(P().J6,{store:t,renderOrigin:e=>(0,B.jsx)("div",{children:(0,B.jsx)(j().A,{icon:c().Y,iconStyle:S.iconStyle,ariaLabel:m.formatMessage(M().messages.share),isDarkIconColor:!0,style:S.iconContainer,mobileFeedback:!0,...e})})}),R&&(0,B.jsx)(P().m,{hasDiscussions:x,shouldShowCommentsIndicator:N,renderOrigin:e=>(0,B.jsx)("div",{children:(0,B.jsx)(j().A,{icon:l().h,iconStyle:S.iconStyle,ariaLabel:m.formatMessage(T().messages.comments),isDarkIconColor:!0,style:S.iconContainer,mobileFeedback:!0,...e})})}),W&&(0,B.jsx)(P().gW,{store:t,renderOrigin:e=>(0,B.jsx)("div",{children:(0,B.jsx)(j().A,{icon:d().L,iconStyle:S.iconStyle,ariaLabel:m.formatMessage(A().messages.actions),isDarkIconColor:!0,style:S.iconContainer,mobileFeedback:!0,...e})})}),a&&(0,B.jsx)(T().QuickAddDoneComponent,{})]})}},816013:(e,t,o)=>{o.d(t,{r:()=>i});const i=o(757695).default.createValue({showConvertTooltip:!1,forceShow:!1},{name:"WikiPromoStore"})},906571:(e,t,o)=>{o.d(t,{z:()=>A});var i=()=>o(519831),n=()=>o(869558),r=()=>o(854150),s=()=>o(44729),a=()=>o(751156),l=()=>o(559102),d=()=>o(972435),c=()=>o(351360),u=()=>o(630116),p=()=>o(134025);var g=()=>o(183558);const h=(0,o(959013).YK)({postHeadingName:{id:"posts.collection.headingName",defaultMessage:"Subject"},createdBy:{id:"database.propertyTypeName.posts.created_by",defaultMessage:"Created by"},createdTime:{id:"database.propertyTypeName.posts.created_time",defaultMessage:"Created time"}}),m="feed",S="descending",b={hide_linked_collection_name:!0,inline_collection_first_load_limit:{type:"load_limit",limit:10}};function f(e){return{property:e,direction:S}}function v(e){return{table:i().Vl,id:e.collectionId,spaceId:e.spaceId}}var x=()=>o(179034),y=()=>o(63128),j=()=>o(919709),w=()=>o(498212),C=()=>o(246826),k=()=>o(319975),T=()=>o(709274);function P(e){const{environment:t,transaction:o,channelStore:r,collectionStore:s,intl:l}=e,d=r.pointer,c=d.spaceId,S=d.id,P=S,A=S,{schema:M,createdTimeId:I}=function(e){const t=(0,g().Ay)();return{schema:{title:{type:"title",name:e.formatMessage(h.postHeadingName)},[(0,g().Ay)()]:{type:"created_by",name:e.formatMessage(h.createdBy)},[t]:{type:"created_time",name:e.formatMessage(h.createdTime)}},createdTimeId:t}}(l),B=p().op.update({pointer:{id:S,table:i().Vl,spaceId:c},path:[],args:{id:P,space_id:c,name:[[l.formatMessage(T().D.postsCollectionTitle)]],schema:M,parent_id:A,parent_table:x().ev,alive:!0,version:0}}),_=(0,w().Ay)();a().applyOperation({store:s,operation:B,transaction:o});const K={id:_,table:n().Gy,spaceId:c},R={id:A,table:x().ev,spaceId:c},W=p().op.update({pointer:K,path:[],args:{id:_,version:5,type:m,parent_id:A,parent_table:x().ev,space_id:c,alive:!0,name:void 0,query2:{sort:[f(I)]},format:{...b,collection_pointer:v({collectionId:P,spaceId:c})}}}),N=u().Bv.createChildStore(r,R),F=u().pS.createChildStore(N,K);a().applyOperation({store:F,operation:W,transaction:o});const L=p().op.update({pointer:N.pointer,path:[],args:{id:A,type:"collection_view_page",version:1,alive:!0,parent_id:S,parent_table:y().Ay,space_id:c,view_ids:[_]}});a().applyOperation({store:N,operation:L,transaction:o});const D=N.getTitleStore();D&&k().R9({environment:t,store:D,value:(0,j().x9d)(l.formatMessage(T().D.postsCollectionViewPageTitle)),transaction:o}),C().zv({store:N.getFormatStore(),data:{collection_pointer:v({collectionId:P,spaceId:c})},transaction:o})}function A(e){const{environment:t,selectedStore:o,currentSpaceViewStore:g,collectionContextStore:h,postStore:m}=e,S=d().A.getIntl();if(!h)return;const b=h.collectionViewStore(),f=h.collectionViewBlockStore();if(!b||!f||!g)return;const v=o.table===r().yK?o.id:void 0,x=c().default.state.currentSpaceStore;if(!x)return;const y=null==o?void 0:o.getChannelStore();if(!y)return;const j=u().sk.createUniqueRootStore(t,{table:"block",id:null==y?void 0:y.id,spaceId:x.id}),w=null==j?void 0:j.getCollectionStore();a().createAndCommit({environment:t,userAction:"PersonalHomeFeedTab.setCollectionViewSourceTeamId",canUndo:!0,perform:e=>{const r={id:y.id,table:i().Vl,spaceId:x.id},d=u().md.createChildStore(y,r);w||(!function(e){const{transaction:t,parent:o,channelStore:i}=e,n=p().op.update({pointer:i.pointer,path:[],args:{id:i.id,parent_id:o.id,parent_table:o.table,space_id:o.spaceId}});a().applyOperation({store:i,operation:n,transaction:t})}({transaction:e,parent:o.pointer,channelStore:y}),P({environment:t,transaction:e,collectionStore:d,channelStore:y,intl:S}),(0,l().d)({environment:t,collectionViewStore:b,collectionViewBlockStore:f,collectionStore:d,collectionContextStore:h,isFullScreen:!1,isRootChild:!1,isInPeekRenderer:!1,viewsModuleContext:void 0})),m&&s().X$({childStore:m,parentStore:w??d,transaction:e}),a().applyOperation({store:b,operation:{pointer:{id:b.id,table:n().Gy},path:["format","collection_view_source","teamId"],command:"set",args:v},transaction:e})}})}},986229:(e,t,o)=>{o.d(t,{A:()=>n});class i extends(()=>o(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"editor",isInviteTargetsEmpty:!0,table:o(179034).ev,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const n=i}}]);