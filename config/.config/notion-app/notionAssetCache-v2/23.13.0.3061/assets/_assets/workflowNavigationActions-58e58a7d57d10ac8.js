"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[87196,92821,93139],{118078:(e,t,n)=>{n.r(t),n.d(t,{closeChatSidebar:()=>f,maybeCloseNotionSidebar:()=>d,maybeOpenNotionSidebar:()=>p,showChatSidebar:()=>g});var i=()=>n(435009),o=()=>n(492414),r=()=>n(644914),a=()=>n(749687),s=()=>n(351360),u=()=>n(712505),c=()=>n(890754),l=()=>n(590027);function d(e){const{environment:t}=e;(0,r().KB)(t)&&((0,c().getIsChatSidebarOpen)(t)||(a().sidebarExpandedStore.setState(!1),u().default.setSidebarExpandedStoreState(!1),l().M.setState({...l().M.state,reopenMainSidebarOnClose:!0})))}function p(){l().M.state.reopenMainSidebarOnClose&&(a().sidebarExpandedStore.setState(!0),u().default.setSidebarExpandedStoreState(!0),l().M.setState({...l().M.state,reopenMainSidebarOnClose:void 0}))}function g(e){const{environment:t,store:n}=e,r=(0,c().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),a=(0,c().routeArgsGivenChatSidebarState)(r),u=(0,o().Ef)({environment:t,updates:{...a,store:n}}),l=s().default.state.mainEditorCurrentBlockStore!==n;i().oo({environment:t,url:u,redirect:!l}),d({environment:t})}function f(e){const{environment:t}=e;p();const n=(0,c().routeArgsGivenChatSidebarState)(c().CLOSED_CHAT_SIDEBAR_STATE),r=(0,o().Ef)({environment:t,updates:n});i().oo({environment:t,url:r,redirect:!0})}},564037:(e,t,n)=>{n.r(t),n.d(t,{getCurrentWorkflowNavigationState:()=>C,getDefaultClosedNavigationState:()=>b,getDefaultOpenNavigationState:()=>S,getIsWorkflowEditorOpen:()=>m,getIsWorkflowEditorStateOpen:()=>y,getIsWorkflowNavigationStateCurrent:()=>k,getMergedWorkflowNavigationState:()=>O,routeArgsGivenNavigationState:()=>N,useIsWorkflowEditorOpen:()=>h,useWorkflowNavigationState:()=>E});var i=()=>n(484714),o=()=>n(847249),r=()=>n(496603),a=()=>n(498212),s=()=>n(534177),u=()=>n(671593),c=()=>n(638681),l=()=>n(351360),d=()=>n(46986);const p=c().object({required:{isOpen:c().literal(!0)},optional:{}}),g={configure:c().intersection([p,c().object({required:{type:c().literal("configure")},optional:{prompt:c().string()}})]),function:c().intersection([p,c().object({required:{type:c().literal("function"),key:c().string()},optional:{}})]),module:c().intersection([p,c().object({required:{type:c().literal("module"),key:c().string()},optional:{}})]),trigger:c().intersection([p,c().object({required:{type:c().literal("trigger"),key:c().string()},optional:{}})]),debug:c().intersection([p,c().object({required:{type:c().literal("debug")},optional:{}})]),preview:c().intersection([p,c().object({required:{type:c().literal("preview")},optional:{collectionViewId:c().string()}})]),runtime_actor:c().intersection([p,c().object({required:{type:c().literal("runtime_actor")},optional:{}})]),view_settings:c().intersection([p,c().object({required:{type:c().literal("view_settings"),key:c().string()},optional:{}})]),view:c().intersection([p,c().object({required:{type:c().literal("view"),key:c().string()},optional:{}})]),runs:c().intersection([p,c().object({required:{type:c().literal("runs")},optional:{runId:c().string()}})]),test:c().intersection([p,c().object({required:{type:c().literal("test"),name:c().string(),functionKey:c().string()},optional:{}})])},f=c().union(Object.values(g)),v=c().object({required:{isOpen:c().literal(!1)},optional:{}}),w=c().union([f,v]);function S(){return{isOpen:!0,type:"configure"}}function b(){return{isOpen:!1}}function y(e){return(null==e?void 0:e.isOpen)??!1}function m(e){return y(C(e))}function k(e){const{currentNavigationState:t,navigationState:n}=e,i=O({defaultNavigationState:{isOpen:!1},currentNavigationState:t,newNavigationState:n});return(0,r().n4)(t,i)}function C(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const n=l().default.state.mainEditorCurrentBlockStore;return n&&n.isCollectionView()&&n.canEdit()&&!n.isLocked()?function(e){const{workflowViewType:t,workflowViewKey:n,workflowPrompt:i,collectionViewId:o}=e;switch(t){case"debug":case"runtime_actor":return{isOpen:!0,type:t};case"function":case"module":case"trigger":case"view_settings":case"view":if(!n)return;return{isOpen:!0,type:t,key:n};case"preview":return{isOpen:!0,type:"preview",collectionViewId:o};case"configure":return{isOpen:!0,type:"configure",prompt:i?decodeURIComponent(i):void 0};case"runs":return{isOpen:!0,type:"runs",runId:(0,a().ZA)(n)};case"test":if(!n)return;const[e,r]=n.split(",");if(!e||!r)return;return{isOpen:!0,type:"test",name:r,functionKey:e};default:return}}(t.state.route):void 0}function O(e){const{defaultNavigationState:t,currentNavigationState:n,newNavigationState:i}=e;if(!(0,d().sx)())return{isOpen:!1};const o={...t};if(n)for(const[a,s]of Object.entries(n))o[a]=s;if(i)for(const[a,s]of Object.entries(i))o[a]=s;const r=(0,u().tf)(w,o);if(r)throw r;return o}function N(e){if(!e.isOpen)return{workflowViewType:void 0,workflowViewKey:void 0,collectionViewId:void 0};const t=e.type,n={};switch(t){case"configure":case"debug":case"runtime_actor":return{...n,workflowViewType:t,workflowViewKey:void 0};case"function":case"module":case"trigger":case"view_settings":case"view":return{...n,workflowViewType:t,workflowViewKey:e.key};case"runs":return{...n,workflowViewType:t,workflowViewKey:e.runId};case"test":return{...n,workflowViewType:t,workflowViewKey:`${e.functionKey},${e.name}`};case"preview":return{...n,workflowViewType:"preview",collectionViewId:e.collectionViewId};default:(0,s().HB)(t)}}function E(){const e=(0,i().v3)();return(0,o().K8)((()=>C(e)??{isOpen:!1}),[e])}function h(){const e=(0,i().v3)();return(0,o().K8)((()=>m(e)),[e])}},691093:(e,t,n)=>{n.r(t),n.d(t,{closeWorkflowEditor:()=>p,onConfigItemClick:()=>l,showWorkflowEditor:()=>d});var i=()=>n(496603),o=()=>n(435009),r=()=>n(118078),a=()=>n(890754),s=()=>n(492414),u=()=>n(351360),c=()=>n(564037);function l(e){const{environment:t,navigationState:n,parentStore:o}=e,r=(0,c().getCurrentWorkflowNavigationState)(t);(0,i().n4)(r,n)?d({environment:t,navigationState:{isOpen:!0,type:"configure"},parentStore:o}):d({environment:t,navigationState:n,parentStore:o})}function d(e){const{environment:t,parentStore:n,redirect:i}=e,l=(0,c().getMergedWorkflowNavigationState)({defaultNavigationState:(0,c().getDefaultOpenNavigationState)(),currentNavigationState:(0,c().getCurrentWorkflowNavigationState)(t),newNavigationState:e.navigationState}),d=(0,a().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),p=(0,c().routeArgsGivenNavigationState)(l),g=(0,a().routeArgsGivenChatSidebarState)(d);(0,r().maybeCloseNotionSidebar)({environment:t});const f=(0,s().Ef)({environment:t,updates:{...p,...g,store:n}}),v=void 0!==n&&u().default.state.mainEditorCurrentBlockStore!==n;o().oo({environment:t,url:f,redirect:i??!v})}function p(e){const{environment:t,newStore:n,redirect:i}=e,u=(0,c().routeArgsGivenNavigationState)((0,c().getDefaultClosedNavigationState)()),l=(0,a().routeArgsGivenChatSidebarState)(a().CLOSED_CHAT_SIDEBAR_STATE),d=(0,s().Ef)({environment:t,updates:{...u,...l,store:n}});(0,r().maybeOpenNotionSidebar)(),o().oo({environment:t,url:d,redirect:i??!0})}}}]);