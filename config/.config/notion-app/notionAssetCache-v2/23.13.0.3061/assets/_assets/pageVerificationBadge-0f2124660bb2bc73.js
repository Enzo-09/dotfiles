"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[41412],{22394:(e,t,n)=>{n.d(t,{o:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("circleCheck",{viewBox:"0 0 12 12",svg:(0,i.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var i=()=>n(597777),r=()=>n(869190),o=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:i}=e,a=o().C6.toPersistedDate(t.valueOf());return r().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:i,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=o().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return r().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:i,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=o().C6.toPersistedDateRange(t),l=r().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=r().fU({start_time:c.toFormat(i().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},97835:(e,t,n)=>{n.d(t,{x:()=>o});n(296540);var i=n(474848);const r={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("g",{clipPath:"url(#clip0_9151_10917)",children:[(0,i.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,i.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]}),(0,i.jsx)("defs",{children:(0,i.jsx)("clipPath",{id:"clip0_9151_10917",children:(0,i.jsx)("path",{d:"M20 0H0v20h20z"})})})]})},o=(0,n(340498).wt)("inviteMember",r)},108414:(e,t,n)=>{n.d(t,{A:()=>r});class i extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const r=new i},118849:(e,t,n)=>{n.d(t,{A:()=>u});n(296540);var i=()=>n(847249),r=()=>n(979340),o=()=>n(959013),a=()=>n(100622),s=()=>n(284371),l=()=>n(824160),c=()=>n(991249),d=n(474848);const u=function(e){let{subscriptionTier:t,mobileStyle:u,desktopStyle:p,analyticsName:m,onClick:v,disableTooltip:f,tooltipContent:g}=e;const h=(0,n(401497).DP)(),y=(0,n(484714).v3)(),{device:S}=y,b=(0,i().K8)((()=>{const{currentSpaceStore:e}=n(351360).default.state;return null==e?void 0:e.canAdmin()}),[]),x=(0,i().K8)((()=>function(e,t){switch(e){case"plus":case"business":case"enterprise":return{color:t.blueColor,background:"light"===t.mode?a().Ay.diffBackground:"rgba(35, 131, 226, 0.2)",fontWeight:s().Wy.medium};default:return{}}}(t,h)),[t,h]);if(S.isMobileNative)return null;let w;return"personal"===t?w=(0,d.jsx)(o().sA,{defaultMessage:"Personal Pro",id:"upgradeButton.personal.text"}):(0,r().$P)(t)?w=(0,d.jsx)(o().sA,{defaultMessage:"Plus ↗",id:"upgradeButton.plus.textWithArrow"}):(0,r().tL)(t)?w=(0,d.jsx)(o().sA,{defaultMessage:"Business ↗",id:"upgradeButton.business.textWithArrow"}):(0,r().OX)(t)?w=(0,d.jsx)(o().sA,{defaultMessage:"Enterprise ↗",id:"upgradeButton.enterprise.textWithArrow"}):(0,n(534177).HB)(t),S.isMobile||!b?(0,d.jsx)(l().A,{mobileStyle:u,children:w}):(0,d.jsx)(n(859428).A,{delayThreshold:120,disableTooltip:f,placement:n(962730).W.Bottom,renderTooltip:()=>(0,d.jsx)("div",{style:{maxWidth:500},children:g?(0,d.jsx)(o().sA,{defaultMessage:"{tooltipText}",id:"upgradeButton.upgrade.custom.tooltip",values:{tooltipText:g}}):(0,d.jsx)(o().sA,{defaultMessage:"Upgrade to use this feature.",id:"upgradeButton.upgrade.tooltip"})}),originGap:6,render:e=>(0,d.jsx)(l().A,{desktopStyle:p,innerStyle:x,onClick:e=>function(e,t,n,i,r){c().K(i,{from:t,upsell:{type:"product",product:n,limit:{type:"none"},trialability:"none"}}),r&&r(e)}(e,m,t,y,v),...e,children:w})})}},132389:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var i=n(474848);function r(e){const t={display:"inline-block",minWidth:e.size,minHeight:e.size};return"x"===e.axis?t.minHeight=1:"y"===e.axis&&(t.minWidth=1),(0,i.jsx)("div",{style:t})}},150987:(e,t,n)=>{n.d(t,{A:()=>v});n(898992),n(354520),n(581454),n(737550);var i=n.n(n(844751)),r=n(296540),o=()=>n(970013),a=()=>n(713998),s=()=>n(959013),l=()=>n(496603),c=()=>n(722872),d=()=>n(939740),u=()=>n(89924),p=()=>n(250202),m=n(474848);const v=function(e){let{selectedProperty:t,onAccept:v,schema:f,onClose:g,allowProperty:h,isRelationProperty:y}=e;const S=(0,n(484714).v3)(),b=(0,s().tz)(),[x,w]=(0,r.useState)("");let I=Object.keys(f);const C=I.some(n(443239).u);I=l().Ul(I,(e=>{const t=(0,a()._g)({schema:f,property:e});return t?t.name:""}));const A=C?o().Ho:o().rn;if(I=l().FF(I,A),I.unshift(A),h&&(I=I.filter((e=>{const t=(0,a()._g)({schema:f,property:e});return t&&h(t)}))),x){let e=I.map((e=>{const t=(0,a()._g)({schema:f,property:e});return t&&t.name}));e=i().filter(x,e).map((e=>{let{original:t}=e;return t})),I=I.filter((t=>{const n=(0,a()._g)({schema:f,property:t});return n&&n.name&&e.includes(n.name)}))}const _=x||I.length>n(525432).R8,T=l().oE(I.map((e=>{const n=(0,a()._g)({schema:f,property:e});if(!n)return null;return{key:e,render:i=>(0,m.jsx)(p().G,{...i,propertySchema:n,format:p().e.Name,isChecked:e===t}),action:()=>v(e)}}))),M=[{key:0,render:e=>(0,m.jsx)(u().A,{...e}),items:T}],{device:P}=S,k=_?(0,m.jsx)(u().A,{isInput:!0,children:(0,m.jsx)(n(419357).Ay,{focus:!P.isMobile||void 0,focusAfterAnimation:!0,value:x,onChange:e=>w(e.target.value),placeholder:y?b.formatMessage({defaultMessage:"Search for a relation property…",id:"propertySelectMenu.searchForProperty.relation.placeholder"}):b.formatMessage({defaultMessage:"Search for a property…",id:"propertySelectMenu.searchForProperty.default.placeholder"})})}):null;let j;return j=P.isMobile?{menuType:c().gu.Modal,title:y?b.formatMessage({defaultMessage:"Relation property",id:"propertySelectMenu.mobileMenu.relationProperty.header"}):b.formatMessage({defaultMessage:"Property",id:"propertySelectMenu.mobileMenu.property.header"}),right:(0,m.jsx)(n(480095).CancelMenuText,{}),onClickRight:g,header:k}:{menuType:c().gu.Popup,width:280,maxHeight:480,header:k},(0,m.jsx)(n(928600).A,{...j,children:0===T.length?(0,m.jsx)(u().A,{children:(0,m.jsx)(n(64e3).A,{title:(0,m.jsx)(s().sA,{defaultMessage:"No results",id:"propertySelectMenu.search.noResults.title"})})}):(0,m.jsx)(d().Ay,{type:d().Oh.Vertical,sections:M,onAccept:g,initialFocus:x.length>0?0:void 0})})}},159026:(e,t,n)=>{n.d(t,{Ay:()=>a,NJ:()=>i,d5:()=>r});n(898992),n(354520),n(581454),n(737550);let i=function(e){return e.unselected="unselected",e.workspace_member="workspace_member",e.request_workspace_member="request_workspace_member",e.page_guest="page_guest",e.closed="closed",e}({}),r=function(e){return e[e.closed=0]="closed",e[e.share_page=1]="share_page",e[e.share_workspace=2]="share_workspace",e[e.request_workspace=3]="request_workspace",e}({});class o extends(()=>n(757695))().default{getInitialState(){return{inviteStage:r.closed,selection:i.workspace_member,order:[i.workspace_member,i.page_guest],invitedUsers:[],invitedEmailToUserIdMap:{},flowId:n(206267).JW()}}startWorkspaceInvite(){this.setState({...this.state,inviteStage:r.share_workspace,order:[i.workspace_member,i.page_guest],selection:i.workspace_member})}startRequestMembership(){this.setState({...this.state,inviteStage:r.request_workspace,order:[i.request_workspace_member,i.page_guest],selection:i.request_workspace_member})}hasGuests(){return this.state.invitedUsers.some((e=>e.isGuest))}getGuestEmails(){return this.state.invitedUsers.filter((e=>e.isGuest)).map((e=>e.email))}}const a=o},161901:(e,t,n)=>{n.r(t),n.d(t,{PageVerificationBadge:()=>w});n(898992),n(737550);var i=n(296540),r=()=>n(484714),o=()=>n(847249),a=()=>n(401497),s=()=>n(372160),l=()=>n(677195),c=()=>n(931075),d=()=>n(959013),u=()=>n(534177),p=()=>n(989423),m=()=>n(470928),v=()=>n(891078),f=()=>n(962730),g=()=>n(493823),h=()=>n(406699),y=()=>n(859428),S=()=>n(646614),b=()=>n(379421),x=n(474848);function w(e){const{blockStore:t}=e,n=(0,r().v3)(),{device:i}=n,c=(0,o().K8)((()=>t.canEdit()),[t]),u=(0,v().i0)(t),p=!c||u,S=(0,o().K8)((()=>(0,m().i1)(t)),[t]),w=(0,a().IS)((e=>({blueIconStyle:{fill:e.text.uiBluePrimary,marginRight:i.isMobile?0:6,...i.isMobile?{height:18,width:18}:{}},lightIconStyle:{fill:e.icon.tertiary,marginRight:i.isMobile?0:6},button:{color:e.text.secondary},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0,marginRight:i.isMobile?0:6},expiredIcon:{width:8,height:9,fill:e.mediumIconColor}})),[i.isMobile]);return"none"===S.type?null:(0,x.jsx)(h().Ay,{renderOrigin:e=>(e=>(0,x.jsx)(y().A,{placement:f().W.Bottom,renderTooltip:()=>(0,x.jsx)(I,{blockStore:t}),render:t=>{switch(S.type){case"none":return null;case"expired":return(0,x.jsx)(g().p,{size:"sm",isLightGray:!0,icon:()=>(0,x.jsx)("div",{style:w.expiredIconContainer,children:(0,l().R)(w.expiredIcon)}),iconStyle:w.lightIconStyle,style:w.button,disabled:p,...t,...e,children:!i.isMobile&&(0,x.jsx)(d().sA,{defaultMessage:"Verification expired",id:"breadcrumb.verifiedBadge.expired"})});case"verified":return(0,x.jsx)(g().p,{size:"sm",isLightGray:!0,icon:s().E,iconStyle:w.blueIconStyle,style:w.button,disabled:p,...t,...e,children:!i.isMobile&&(0,x.jsx)(d().sA,{defaultMessage:"Verified",id:"breadcrumb.verifiedBadge.verified"})})}}}))(e),render:e=>(0,x.jsx)(b().C,{onClose:()=>e.close(),blockStore:t,entrypoint:"page_menu"}),popupType:i.isMobile?h().z7.SlideUp:h().z7.Popup,disabled:p,onClick:()=>{C({event:"click",environment:n,blockStore:t,isVerified:"verified"===S.type})}})}function I(e){const{blockStore:t}=e,n=(0,r().v3)(),{verificationValue:a,verificationState:s}=(0,o().K8)((()=>({verificationValue:t.getPropertyStore(c()._e.Verification).getValue(),verificationState:(0,m().i1)(t)})),[t]);(0,i.useEffect)((()=>{C({event:"hover",environment:n,blockStore:t,isVerified:"verified"===s.type})}),[t,n,s.type]);return a?(0,x.jsx)(S().V,{rootStore:t,textValue:a}):null}function C(e){const{event:t,environment:n,blockStore:i,isVerified:r}=e,{verificationOwners:o}=(0,m().h4)({blockStore:i}),a=o.some((e=>e.id===n.currentUser.id)),s=i.id,l=i.getAssociatedCollectionId(),c=i.getSpaceId();switch(t){case"hover":return void(0,p().u4)({environment:n,event:{eventName:"page_verification_status_hover",eventProperties:{is_owner:a,is_verified:r,page_id:s,collection_id:l,space_id:c}}});case"click":return void(0,p().u4)({environment:n,event:{eventName:"page_verification_status_clicked",eventProperties:{is_owner:a,is_verified:r,page_id:s,collection_id:l,space_id:c}}});default:(0,u().HB)(t)}}},175116:(e,t,n)=>{n.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>a});n(16280);var i=n(296540);const r="collectionContextStore",o=(0,n(446943).C)({displayName:r,legacyContextKey:r,modernContextDefaultValue:void 0}),a=o.context,s=o.Provider;function l(){const e=i.useContext(a);if(void 0===e)throw new Error(`No context provided: ${r}`);return e}function c(){return i.useContext(a)}},250202:(e,t,n)=>{n.d(t,{G:()=>s,e:()=>a});var i=n(296540),r=()=>n(401497),o=n(474848);let a=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const s=i.forwardRef((function(e,t){const{propertySchema:i,format:s,locked:l}=e,{name:c,type:d,icon:u}=i,p=(0,n(963589).X)("nds_default_property_noticon"),{isMobile:m}=(0,n(484714).Y0)(),v=(0,r().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),f=(0,r().DP)(),g=s===a.Name?c:n(682146).dC[d];return(0,o.jsx)(n(760217).A,{title:g,icon:(0,o.jsx)(n(743176).zB,{icon:u,type:d,size:m?18:16,theme:f,style:v.propertyIcon,isDefaultNoticonEnabled:p}),disabled:l,...e})}))},366858:(e,t,n)=>{n.d(t,{A:()=>a});n(581454);var i=()=>n(484714),r=()=>n(847249),o=()=>n(592674);function a(e){const t=(0,i().v3)();return(0,r().K8)((()=>{var n;const i=null==e?void 0:e.id;if(i)return null===(n=o().A.getData(t,{spaceId:i}))||void 0===n?void 0:n.map((e=>e.domain))}),[t,e])}},398842:(e,t,n)=>{n.d(t,{Jv:()=>y,Zr:()=>S,Rl:()=>b,mA:()=>h});var i=n(296540),r=()=>n(484714),o=()=>n(847249),a=()=>n(401497),s=()=>n(970013),l=()=>n(743176),c=()=>n(68465),d=()=>n(159588),u=()=>n(963589),p=()=>n(331542),m=n(474848);function v(){const e=(0,a().DP)();return(0,m.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,m.jsx)(p().A,{legacySize:14})})}var f=()=>n(399275);const g=function(){return(0,m.jsx)(n(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,m.jsx)(n(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=i.memo((function(e){const{propertySchema:t,showIcon:i,showDragIcon:o,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:v,className:f,labelSizeVariant:g}=e,h=(0,r().v3)(),{device:y}=h,S=y.isMobile?16:14,x=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:S,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===g||o?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:o?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:o?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[S,s,u,g,o,c]);return(0,m.jsxs)("div",{className:f,style:x.container,children:[i&&(0,m.jsxs)("div",{style:x.iconWrapper,children:[(0,m.jsx)("div",{style:x.itemIcon,children:(0,m.jsx)(b,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,m.jsx)("div",{style:x.dragHandle,children:(0,m.jsx)(n(57232).A,{style:v,iconSize:12,iconStyle:x.dragIcon})})]}),!s&&(0,m.jsx)("div",{style:{...n(284371).RC},children:t.name}),l]})}));function y(e){const{propertySchema:t}=e,n=(0,r().v3)();return(0,o().K8)((()=>(0,c().O0)(n)&&s().$M(t)&&s().om(t)),[n,t])?(0,m.jsx)(g,{}):null}function S(e){let{propertyId:t,collectionContextStore:n}=e;return(0,o().K8)((()=>{var e;const i=null===(e=n.collectionStore())||void 0===e?void 0:e.id;if(!i)return!1;const r=f().d.state.collectionsProperties[i];return!!r&&"Loading"===r[t]}),[n,t])?(0,m.jsx)(v,{}):null}function b(e){const{propertySchema:t,iconSize:n,iconStyle:i}=e,{isMobile:o}=(0,r().Y0)(),s=(0,a().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=o?18:16;return(0,m.jsx)(l().zB,{type:t.type,icon:t.icon,size:n||d,theme:s,style:i,isDefaultNoticonEnabled:c})}},399275:(e,t,n)=>{n.d(t,{d:()=>r});n(898992),n(354520);class i extends(()=>n(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,n(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const n=this.state.collectionsProperties[e],i=n?{...n,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:i}})}removeCollectionProperties(e,t){const n=this.state.collectionsProperties[e];if(!n)return;const i=Object.fromEntries(Object.entries(n).filter((e=>{let[n]=e;return!t.has(n)})));if(0===Object.keys(i).length){const{[e]:t,...n}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:n})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:i}})}}const r=new i;(0,n(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",r)},413267:(e,t,n)=>{n.d(t,{b:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454354:(e,t,n)=>{n.d(t,{A:()=>a});var i=()=>n(351360),r=()=>n(630116);class o extends(()=>n(757695))().default{getInitialState(){return{changePermissionsEnabled:!1,privatePageStore:void 0,loading:!1,error:void 0}}shouldSaveTransactionWithSudoMode(e){const t=e===this.state.privatePageStore,n=this.doesUserAlreadyHaveEditorAccess(e.pointer);return t&&this.state.changePermissionsEnabled&&!n}shouldUserHaveAccessToPrivatePageBlock(){var e,t;const n=null===(e=i().default.state.currentSpaceStore)||void 0===e?void 0:e.canAdmin(),r="enterprise"===(null===(t=i().default.state.currentSpaceStore)||void 0===t?void 0:t.getSubscriptionTier());return this.state.privatePageStore&&n&&r}doesUserAlreadyHaveEditorAccess(e){const t=i().default.state.currentSpaceStore;if(!t)return!1;return(e.table===n(179034).ev?r().Bv.createChildStore(t,e):r().md.createChildStore(t,e)).canAdmin()}}const a=o},457688:(e,t,n)=>{n.d(t,{A:()=>S,S:()=>h});var i=n(296540),r=()=>n(484714),o=()=>n(847249),a=()=>n(764880),s=()=>n(959013),l=()=>n(962730),c=()=>n(678553),d=()=>n(554509),u=()=>n(453697),p=n(474848);const m="UIRegular-14px/Regular",v="UIRegular-14px/Semibold",f="iOS/Callout-16px/Regular",g=i.forwardRef(((e,t)=>{const{actor:i,userTitle:s,defaultUserTitle:d="name_only",useEmailAsTooltip:m,tooltip:v,tooltipPlacement:f,hoveredStyle:g,disabledFeedback:S,customUserTitleStyles:b,iconSizeOverride:x}=e,w=(0,r().v3)(),I=(0,o().K8)((()=>i.asActor&&i.isUser()?i.email:void 0),[i]),C=m&&I?I:v,A=x||(w.device.isMobile?c().nd:c().pg),_="name_and_email"===d||"name_and_email_unless_right"===d&&!Boolean(e.right)?(0,p.jsx)(y,{actor:null==i?void 0:i.asActor,customStyles:b}):(0,p.jsx)(h,{customStyles:b,actor:null==i?void 0:i.asActor}),T=s??_;let M;return(0,a().H3)(i)?M=(0,p.jsx)(n(256863).A,{botValue:null==i?void 0:i.asActor,size:A}):(0,a().ps)(i)?M=(0,p.jsx)(u().A,{userValue:null==i?void 0:i.asActor,size:A}):(0,a().h2)(i)?M=(0,p.jsx)(u().A,{userValue:void 0,size:A}):(0,n(534177).HB)(i),(0,p.jsx)(n(859428).A,{placement:f??l().W.Bottom,alignment:l().C.Start,textWrap:!0,render:i=>(0,p.jsx)(n(760217).A,{...(0,n(553965).A)(i,e),icon:M,title:T,disabledFeedback:S,className:"notranslate",right:e.right,ref:t,hoveredStyle:g}),disableTooltip:!C,renderTooltip:()=>C})}));function h(e){const{actor:t,customStyles:n}=e,i=(0,r().v3)(),a=(0,s().tz)(),l=(0,o().K8)((()=>t&&t.id===i.currentUser.id),[i,t]),c=(0,o().K8)((()=>t&&t.getDisplayName(a)),[t,a]),u=i.device.isMobile?f:m;return l?(0,p.jsx)(s().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,p.jsx)(d().D,{as:"span",styleName:u,customStyles:n,children:e}),fullName:c,you:e=>(0,p.jsx)(d().D,{as:"span",colorName:"secondary",styleName:u,customStyles:n,children:e})}}):c?(0,p.jsx)(d().D,{styleName:u,customStyles:n,children:c}):(0,p.jsx)(d().D,{styleName:u,customStyles:n,children:(0,p.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function y(e){const t=(0,r().v3)(),{actor:n,customStyles:i}=e,a=(0,s().tz)(),l=(0,o().K8)((()=>n&&n.getDisplayName(a)),[n,a]),{email:c,showEmail:u}=(0,o().K8)((()=>{const e=n&&n.asActor&&n.isUser()?n.email:void 0;return{email:e,showEmail:l!==e}}),[n,l]),g=t.device.isMobile?"iOS/Callout-16px/Regular":v,h=t.device.isMobile?f:m;return l?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d().D,{as:"span",styleName:g,customStyles:i,children:l}),u&&(0,p.jsx)(d().D,{as:"span",styleName:h,customStyles:i,children:` ${c}`})]}):(0,p.jsx)(d().D,{styleName:v,customStyles:i,children:(0,p.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}g.displayName="UserMenuItem";const S=g},458366:(e,t,n)=>{n.d(t,{B2:()=>j,EI:()=>M,F1:()=>A,Kc:()=>I,NN:()=>k,UY:()=>w,br:()=>P,lA:()=>_,lh:()=>C,pi:()=>S,w_:()=>x,zP:()=>b});n(898992),n(737550);var i=()=>n(584262),r=()=>n(443239),o=()=>n(970013),a=()=>n(713998),s=()=>n(882262),l=()=>n(415566),c=()=>n(177256),d=()=>n(72135),u=()=>n(919709),p=()=>n(496603),m=()=>n(534177),v=()=>n(939768),f=()=>n(720665),g=()=>n(41459),h=()=>n(492414),y=()=>n(972435);function S(e){return Boolean(e.state.isOpen&&e.state.collectionsBulkActionsToolbarStore)}function b(e){switch(e){case g().j.Table:return"table";case g().j.Board:return"board";case g().j.ListView:return"list";case g().j.GalleryView:return"gallery";case g().j.Relation:case g().j.RelationSection:return"relation_section";case g().j.Timeline:return"timeline";case g().j.Calendar:return"calendar";case g().j.Page:return"page_properties";case g().j.CompactPage:return"compact_page";case g().j.Mini:return"mini_peek";case g().j.FormEditor:case g().j.FormViewer:case g().j.PropertyModule:return"property_module";default:(0,m().HB)(e)}}function x(e){return{backgroundImage:`linear-gradient(\n\t\tto right,\n\t\t${e.darkDividerColor} 0%,\n\t\t${e.darkDividerColor} 100%\n\t)`,backgroundRepeat:"repeat-x",backgroundPosition:"0 100%",backgroundSize:"100% 1px"}}function w(e){const{store:t,property:n,propertySchema:r}=e,o=null==r?void 0:r.type;if("title"===o)return(0,h().Ay)({store:t,fullyQualified:!1,pageVisitSource:i().y8.LinkInPage});{const e=t.getPropertyValue(n);return a().UY(o,e)}}function I(e){let t=(0,u().k4p)(e);if(!t||""===t.trim()||t.trim().includes(" "))return{domain:void 0,restOfUrl:void 0};t=t.trim();let n=v().qg(t),i=n.host;if(n.protocol&&i||(n=v().qg(`http://${t}`),i=n.host),!i)return{domain:void 0,restOfUrl:void 0};i&&(i=i.replace(/^www./i,""));const r=t.toLowerCase().indexOf(i.toLowerCase());if(-1===r)return{domain:void 0,restOfUrl:void 0};i=t.slice(r,r+i.length);return{domain:i,restOfUrl:t.slice(r+i.length)}}function C(e){const{numberValue:t,numberFormat:n,numberShowAs:i}=e;if(!(p().yr(t)||f().pN(t)||"bar"!==(null==i?void 0:i.type)&&"ring"!==(null==i?void 0:i.type))){const e=y().A.getIntl();return"percent"===n?d().ZV(t,"percent",e):`${t} / ${i.maxValue}`}}function A(e){const{property:t,collectionStore:n}=e,i=n.isSyncedCollection();return Boolean(i)&&(0,r().u)(t)}function _(e,t){switch(e){case"side_peek":return{icon:c().A,tooltip:y().A.formatMessage(T.openInSidePeekTooltip),caption:t?"":y().A.formatMessage(T.openAsPageTitle)};case"center_peek":return{icon:l().q,tooltip:y().A.formatMessage(T.openInCenterPeekTooltip),caption:t?"":y().A.formatMessage(T.openAsPageTitle)};case"full_page":return{icon:s().m,tooltip:y().A.formatMessage(T.openAsPageTooltip),caption:t?"":y().A.formatMessage(T.openAsPageTitle)};default:(0,m().HB)(e)}}const T=(0,n(959013).YK)({openAsPageTitle:{defaultMessage:"Open",id:"database.actionButton.openAsPageTitle"},openAsPageTooltip:{defaultMessage:"Open as page",id:"database.actionButton.openAsPageTooltip"},openInCenterPeekTooltip:{defaultMessage:"Open in center peek",id:"database.actionButton.openInCenterPeekTooltip"},openInSidePeekTooltip:{defaultMessage:"Open in side peek",id:"database.actionButton.openInSidePeekTooltip"}});function M(e){const t=e.getSchema();if(t)for(const[i,r]of Object.entries(t)){var n;if(r&&"text"===r.type&&"summarize"===(null===(n=r.ai_inference)||void 0===n?void 0:n.type)){const t=e.getPropertyValue(i);if(t)return t}}}function P(e){const{store:t,additionalStores:n,collectionContextStore:i}=e,r=t.getAssociatedCollectionStore();return!("collectionTypedView"!==(null==i?void 0:i.contextType)||!r)&&n.some((e=>{var t;return(null===(t=e.getAssociatedCollectionStore())||void 0===t?void 0:t.id)!==r.id}))}function k(e){return e===g().j.FormEditor||e===g().j.FormViewer}function j(e){return Boolean(e&&!o().dA.includes(e.type))}},477093:(e,t,n)=>{n.d(t,{Vs:()=>T,gj:()=>_,v4:()=>M,hX:()=>k,oH:()=>P});n(16280);var i=()=>n(110192),r=()=>n(857639),o=()=>n(416504),a=()=>n(206267),s=()=>n(854150),l=()=>n(529316),c=()=>n(797573),d=()=>n(919709),u=()=>n(946141),p=()=>n(449506),m=()=>n(413677),v=()=>n(751156),f=()=>n(972435),g=()=>n(45359),h=()=>n(37433),y=()=>n(274511),S=()=>n(406792),b=()=>n(632709),x=()=>n(351360),w=()=>n(630116),I=()=>n(108414),C=()=>n(519831);var A=()=>n(848237);async function _(e){let{environment:t,name:n,description:i,icon:r,accessLevel:o,isDefault:a,flowId:l,createTeamHome:c,teamPermissionRole:d,spacePermissionRole:m,members:v,settings:f}=e;const{currentSpaceStore:g}=x().default.getState();if(!g)throw new Error("currentSpaceStore does not exist");const h=S().default.mark("client_create_team_latency"),y=g.id,b=await p().callApi({eventName:"createTeam",environment:t,data:{spaceId:y,name:n,description:i,icon:r,isDefault:a,accessLevel:o,teamPermissionRole:d,spacePermissionRole:m,members:v,settings:f}});if("failed"===b.type)return void(0,A().O)(b);const{teamId:I}=b.data,_=w().h4.createChildStore(g,{table:s().yK,id:I,spaceId:y});await _.load();const T=null==_?void 0:_.getChannelStore();return await(null==T?void 0:T.load()),async function(e){const{environment:t,channelStore:n,parentStore:i}=e,r=null==n?void 0:n.getSpaceId(),o=n&&r&&{id:n.id,table:C().Vl,spaceId:r},a=i&&o&&w().md.createChildStore(i,o),s=n&&n.isReady()&&!n.isDefined()&&n.canEdit();if(!n||!i||!a)return;const l=n.getSpaceId();if(l&&s){const e=await p().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{spaceId:l,parentId:i.pointer.id,parentTable:i.pointer.table,channelId:n.id}});if("failed"===e.type)throw e.error;if("success"===e.type){const{collectionViewBlockId:t}=e.data}}}({environment:t,channelStore:T,parentStore:_}),c&&j({environment:t,teamStore:_}),u()._P(t,{store:_,flowId:l}),S().default.measure(h,{environment:t}),_}function T(e){var t;let{environment:n,page:i}=e;const r=a().JW(),o=(null===(t=i.getParentPointer())||void 0===t?void 0:t.table)!==s().yK?"page_to_team_nested":"page_to_team";u().H8(n,{from:o,flowId:r}),I().A.setState({open:!0,pageStore:i,flowId:r})}async function M(e){var t;let{environment:n,page:i,flowId:r,intl:a}=e;const{accessLevel:l,spacePermissionRole:c,teamPermissionRole:u,members:p}=(0,h().getAccessLevelAndPermissionsForTeamCreatedFromPage)(i),m=(i.isDefined()?i.getModel().getRenderTitle({intl:a,userTimeZone:(0,o().P)(),getRecordModel:i.getRecordModel}):void 0)??d().q4_(i.getTitleValue()),f=await _({environment:n,name:m,icon:null===(t=i.getIcon())||void 0===t?void 0:t.icon,accessLevel:l,isDefault:!1,description:"",flowId:r,createTeamHome:!1,teamPermissionRole:u,spacePermissionRole:c,members:p});if(!f)return;const{currentSpaceViewStore:g}=x().default.state;if(!g)return;const S=await(0,y().U)();v().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:n,canUndo:!0,perform:e=>{S({environment:n,currentSpaceViewStore:g,transaction:e,teamStore:f,action:"move",value:{type:s().yK,id:f.id},targets:[i],location:{type:"append"}})}}),(0,A().F2)({environment:n,teamId:f.id,tab:b().p.Members,from:"create_team_from_page"}),await new Promise((e=>setTimeout((()=>(0,A().Mh)({teamStore:f,environment:n})),100)))}async function P(e){let{environment:t,name:n,description:i,icon:r,flowId:o,trackCreateTeamComplete:a}=e;const{currentSpaceStore:l}=x().default.getState();if(!l)throw new Error("currentSpaceStore does not exist");const c=l.id,d=await p().callApi({eventName:"enableTeams",environment:t,data:{spaceId:c,defaultTeamName:n,defaultTeamIcon:r,defaultTeamDescription:i}});if("failed"===d.type)return void(0,A().O)(d);const{teamId:m}=d.data,v=w().h4.createChildStore(l,{table:s().yK,id:m,spaceId:c});return await v.load(),await j({environment:t,teamStore:v}),u().b0(t,{spaceId:c,store:v,flowId:o}),a&&m&&u()._P(t,{store:v,flowId:o}),v}async function k(e){var t;let{environment:n,teamStore:r,from:o,buttonPopupStore:s}=e;if(!n.currentUser.id)return!1;const l=a().JW(),c=r.isDefault(),d=r.getTeamAccessLevel();if(c)return!1;const p=r.getName(),m=await _({environment:n,name:(0,i().Q)(p||""),description:"",icon:r.getRawIcon(),accessLevel:d,isDefault:c,createTeamHome:!0,teamPermissionRole:null===(t=r.getTeamPermission())||void 0===t?void 0:t.role,spacePermissionRole:r.getSpacePermissionRole(),members:[],settings:r.getSettings(),flowId:l});return!!m&&(u().KK(n,{store:m,from:o}),(0,A().L0)({environment:n,teamStore:m,shouldScroll:!0}),(0,A().F2)({environment:n,teamId:m.id,tab:b().p.General,from:"duplicate_team",buttonPopupStore:s}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,g().jH)(p)})),!0)}async function j(e){const{environment:t,teamStore:n}=e,i=x().default.state.currentSpaceStore,o=x().default.state.currentSpaceViewStore;if(!i||!o)return r().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-SpaceOrSpaceViewStoreError"}),!1;const a=(s=f().A.getIntl(),(0,c().B)(l().wA.teamsHomepage,s));var s;return!!(await m().createTemplateInstance({environment:t,item:a,spaceStore:i,spaceViewStore:o,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team",isOnboarding:!1}))||(r().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},495867:(e,t,n)=>{n.d(t,{BY:()=>h,Lg:()=>y,id:()=>w,nE:()=>I,xi:()=>S});n(944114),n(898992),n(430670),n(581454);var i=()=>n(857639),r=()=>n(402390),o=()=>n(68263),a=()=>n(762433),s=()=>n(449506),l=()=>n(579627),c=()=>n(436572),d=()=>n(972435),u=()=>n(351360),p=()=>n(57605),m=()=>n(159026),v=()=>n(577437),f=()=>n(47373),g=()=>n(250064);async function h(e){const{environment:t,spaceStore:n,contextualInviteStore:i}=e;!function(e){const{spaceStore:t,contextualInviteStore:n}=e,i=t.getRole();if(!i||!(0,o().NB)(i))return!1;if(!n.hasGuests())return!1;if(t.getDisableMembershipRequests())return!1;return(0,f().x3)()}({environment:t,spaceStore:n,contextualInviteStore:i})?await async function(e){const{spaceStore:t,contextualInviteStore:n,environment:i}=e,r=t.getRole();if(!r||!(0,o().vp)(r))return!1;if(!n.hasGuests())return!1;return await(0,v().Se)(i,{name:"members",spaceId:t.id,userId:t.userId,amount:1})}({environment:t,spaceStore:n,contextualInviteStore:i})?i.startWorkspaceInvite():i.setState({...i.state,inviteStage:m().d5.closed}):i.startRequestMembership()}async function y(e){const{environment:t,spaceStore:n,contextualInviteStore:r,from:o,intl:a}=e,{selection:s,flowId:d}=r.state;if("page_guest"===s||!r.hasGuests())return r.reset(),!1;const{inviteTargets:u,unknownEmails:p}=await b({environment:t,contextualInviteStore:r}),m={...r.state};r.reset();const f=await(0,v().Se)(t,{name:"non_admin_members",spaceId:n.id,userId:n.userId})?e.inviteRole??"read_and_write":"editor";try{await l().eP({environment:t,store:n,inviteTargets:u,inviteRole:f,isOnboarding:!1,invite:{inviteOrigin:o,inviteFlowId:d,disable_invite_email:!0}})}catch(g){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.contextual_invite_failure",defaultMessage:"{userCount, plural, one {Failed to invite {users} as member} other {Failed to invite {users} as members}}"},{users:w(t,e),userCount:t.length})})}(a,m.invitedUsers),i().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.inviteTargets",data:{miscDataToConvertToString:{...m,inviteTargets:u}}}),!1}finally{p.length&&i().log({level:"error",from:"contextualInviteHelpers",type:"inviteMembers.unknownUserId",data:{miscDataToConvertToString:{...m,unknownEmails:p}}})}return!0}async function S(e){const{environment:t,spaceStore:n,originId:r,originType:o,reasonMessage:a,contextualInviteStore:l,intl:d}=e,{selection:u}=l.state;if("page_guest"===u||!l.hasGuests())return l.reset(),!1;const{inviteTargets:p,unknownEmails:m}=await b({environment:t,contextualInviteStore:l}),v={...l.state};l.reset();const f=[];try{const e=p.map((e=>s().callApi({eventName:"requestAccess",environment:t,data:{type:"actor-to-space",forActorId:e.value.id,spaceId:n.id,message:a,attributes:{origin_id:r,origin_type:o,origin_table:"share_menu"===o?"block":"space",add_permissions_on_approval:!1}}}).catch((()=>f.push(e)))));await Promise.all(e)}catch(g){return function(e,t){if(0===t.length)return;c().D6({label:e.formatMessage({id:"contextual_invite.request_members_failure",defaultMessage:"Failed to request {users} to become members"},{users:w(t,e)})})}(d,v.invitedUsers),i().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.inviteTargets",data:{miscDataToConvertToString:{...v,inviteTargetsWithErrors:f}}}),!1}finally{m.length&&i().log({level:"error",from:"contextualInviteHelpers",type:"requestMembers.unknownUserId",data:{miscDataToConvertToString:{...v,unknownEmails:m}}})}return!0}async function b(e){const{environment:t,contextualInviteStore:n}=e,{invitedEmailToUserIdMap:i}=n.state,r=[],o=[];for(const a of n.state.invitedUsers){if(!a.isGuest)continue;const e=await x(t,a,i);e?r.push({type:"existingUser",value:{id:e,email:a.email,version:1}}):o.push(a.email)}return{inviteTargets:r,unknownEmails:o}}async function x(e,t,n){const i=await async function(e,t,n){let i=t.id;if(i||(i=n[t.email]),!i){const n=await s().callApi({eventName:"findUser",environment:e,data:{email:t.email}});if("failed"!==n.type){const e=n.data;e.value&&(i=e.value.value.id)}}return i}(e,t,n);if(i)return i;const o=(0,r().H)(d().A.getIntl()),a=await s().callApi({eventName:"createEmailUser",environment:e,data:{email:t.email,preferredLocaleOrigin:"inferred_from_inviter",preferredLocale:o}});return"failed"!==a.type?a.data.userId:void 0}function w(e,t){return(0,g().l)(e.flatMap((e=>e.email||[])))}function I(e,t){var n;const{state:i}=t,r=null===(n=u().default.state.currentSpaceStore)||void 0===n?void 0:n.id,o=r?(0,a().AI)(p().A.getData(e,{spaceId:r})):void 0,s=t.getGuestEmails();return{invite_flow_id:i.flowId,user_count:s.length,user_emails:s,invite_space_role_selection:i.selection,is_bot:!1,subscription_tier:o}}},542056:(e,t,n)=>{n.d(t,{Ah:()=>U,D6:()=>B,KW:()=>P,Oo:()=>M,Pp:()=>E,St:()=>R,hQ:()=>N,iS:()=>j,kW:()=>k,l5:()=>T,lf:()=>D});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var i=()=>n(842599),r=()=>n(68263),o=()=>n(179034),a=()=>n(96689),s=()=>n(496603),l=()=>n(763824),c=()=>n(534177),d=()=>n(579627),u=()=>n(495867),p=()=>n(731320),m=()=>n(743260),v=()=>n(299545),f=()=>n(37433),g=()=>n(106628),h=()=>n(351360),y=()=>n(57605),S=()=>n(159026),b=()=>n(508496),x=()=>n(406999),w=()=>n(630116),I=()=>n(991249),C=()=>n(477093),A=()=>n(134696),_=()=>n(449506);async function T(e){const{environment:t,store:n,sudoModeStore:s,permissionsInviteStore:l,onInviteStart:u,contextualInviteStore:f,inviteOrigin:g}=e,{tokenQuery:h}=l.state;if((0,i().DT)(h.trim())&&(l.state.isInviteTargetsEmpty||!(0,x().qs)(l.state))){const e={type:"newUser",value:{email:h.trim()},source:"email"};m().mQ({target:e,permissionsInviteStore:l})||l.setState({...l.state,inviteTargets:[...l.state.inviteTargets,e],isInviteTargetsEmpty:!1,tokenQuery:""})}if(!l.state.isInviteTargetsEmpty&&l.state.inviteTargets.length>0){null==u||u();const e=l.state;if((0,x().qs)(e)){if(e.table===o().ev){if(!(0,v()._p)(n))throw new Error("Table mismatch.");const{inviteTargets:i,flowId:r,emailMessage:o}=e;l.reset();const a=await d().eP({environment:t,store:n,sudoModeStore:s,inviteTargets:i,inviteRole:void 0,isOnboarding:!1,invite:{inviteFlowId:r,inviteMessage:o,inviteOrigin:g}});return{success:a.success,requestedUserCount:a.success?Object.keys(a.requestedUsers).length:0}}if(e.table===a().NX){if(!(0,v().Yu)(n))throw new Error("Table mismatch.");const{inviteTargets:i,inviteRole:r,flowId:o}=e;l.reset();return{success:(await d().eP({environment:t,store:n,sudoModeStore:s,inviteTargets:i,inviteRole:r,isOnboarding:!1,invite:{inviteFlowId:o,inviteOrigin:g}})).success,requestedUserCount:0}}(0,c().HB)(e)}else{const{inviteRole:i,flowId:o,emailMessage:a}=e;l.reset();const c=await(0,p().hb)(n,e.inviteTargets);if((0,r().PW)(i)){const e=await d().eP({environment:t,store:n,sudoModeStore:s,inviteTargets:c,inviteRole:i,isOnboarding:!1,invite:{inviteFlowId:o,inviteMessage:a,inviteOrigin:g}});return e.success&&(null==f||f.setState({...null==f?void 0:f.state,invitedEmailToUserIdMap:e.invitedUsers})),{success:e.success,requestedUserCount:e.success?Object.keys(e.requestedUsers).length:0}}if((0,v().$R)(n)&&(0,x().nV)(e)){return{success:await d().sQ({environment:t,store:n,inviteTargets:e.inviteTargets,inviteRole:i,createNewTeamFlowId:o}),requestedUserCount:0}}}}return{success:!0,requestedUserCount:0}}function M(e){e.permissionsInviteStore.setState({...e.permissionsInviteStore.state,modalOpen:!1,flowId:void 0})}function P(e){const{permissionsInviteStore:t,contextualInviteStore:n}=e;if(!n)return;const i=[];t.state.inviteTargets.forEach((e=>{if("newUser"===e.type)i.push({email:e.value.email,isGuest:!0});else if("existingUser"===e.type){const t={...e.value,email:e.value.email,isGuest:"none"===e.spaceRole||"not_in_space"===e.spaceRole};i.push(t)}})),n.setState({...n.state,invitedUsers:i})}async function k(e){const{environment:t,store:n,sudoModeStore:i,permissionsInviteStore:r,contextualInviteStore:o,onInviteClick:s,onInviteComplete:l,inviteOrigin:c,intl:d}=e,p=n.getSpaceId(),m=new(w().SL)(t,{table:a().NX,id:p}),v=p?await y().A.awaitData(t,{spaceId:p}):void 0;if((null==o?void 0:o.state.selection)===S().NJ.workspace_member&&m&&(0,f().isEligibleToCreateTeamspace)(t,v)){if(!(await C().oH({environment:t,flowId:r.state.flowId||"",trackCreateTeamComplete:!1})))return;P({permissionsInviteStore:r,contextualInviteStore:o}),await(0,u().Lg)({environment:t,spaceStore:m,contextualInviteStore:o,from:c,intl:d})}else P({permissionsInviteStore:r,contextualInviteStore:o});let g={success:!1,requestedUserCount:0};try{g=await T({environment:t,store:n,sudoModeStore:i,permissionsInviteStore:r,contextualInviteStore:o,onInviteStart:()=>{null==s||s()},inviteOrigin:c})}catch(h){}finally{null==l||l(g.success,g.requestedUserCount)}}async function j(e){const{environment:t,permissionsInviteStore:n,from:i}=e;await m().iQ({environment:t,permissionsInviteStoreState:n.state,from:i})||n.reset()}function R(e){const{permissionsInviteStore:t,targetToRemove:n,defaultRoleForNonBot:i}=e;if(!t.state.isInviteTargetsEmpty)if((0,x().qs)(t.state))if((0,x().qs)(t.state)){const e=t.state.inviteTargets.filter((e=>e!==n));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}else(0,c().HB)(t.state);else{const e=t.state.inviteTargets.filter((e=>e!==n));0===e.length?t.setState({...t.state,inviteTargets:[],inviteRole:i,isInviteTargetsEmpty:!0}):t.setState({...t.state,inviteTargets:e})}}function B(e){const{environment:t,onUpgradeButtonClick:n,upgradeButtonName:i}=e;I().K(t,{from:i,upsell:{type:"product",product:"plus",limit:{type:"none"},trialability:"none"}}),null==n||n()}async function U(e,t){const n=new Set(t),i=Array.from(n).map((async t=>{const n=await _().callApi({eventName:"findUser",environment:e,data:{email:t}});if("success"===n.type){const e=n.data;if(e.value){return{type:"existingUser",value:e.value.value}}}return{type:"newUser",value:{email:t},source:"email"}}));return await Promise.all(i)}async function E(e){const t="invitee",{environment:n,permissionsInviteStore:r,event:o}=e;if(!r.state.isInviteTargetsEmpty&&(0,x().qs)(r.state)){const e=o.target.value;r.setState({...r.state,inputFocus:t,tokenQuery:e})}else{const e=o.target.value,{extractedEmails:a,newInputValue:s}=(0,i().Ct)(e),l=(await U(n,a)).filter((e=>!m().mQ({target:e,permissionsInviteStore:r}))),c=[...r.state.inviteTargets,...l];c.length>0?r.setState({...r.state,inviteTargets:c,isInviteTargetsEmpty:!1,inputFocus:t,tokenQuery:s}):r.setState({...r.state,inviteTargets:[],isInviteTargetsEmpty:!0,inputFocus:t,tokenQuery:s})}}function D(e){const{environment:t,newRole:n,permissionsInviteStore:i}=e,{state:r}=i;A().Jy(t,{...m().oX(t,r),invite_updated_role:n}),!r.isInviteTargetsEmpty&&(0,x().qs)(r)||i.setState({...r,inviteRole:n})}async function N(e){var t;const{query:n,environment:i,sectionLimit:r,intl:o,membersOnly:a,importContactType:c,shouldUseEdgeCache:d}=e,{currentSpaceStore:u}=h().default.state;if(!u)return{inviteUsers:[],inviteBots:[],inviteGroups:[]};const p=b().default.getConfigKey("search_contacts_timeout","timeoutMs"),{userLimit:m,botLimit:v,groupLimit:f,importContactLimit:y}=r,S=await g().T.searchActions.load(),[x,w,I,{user:C,email:A},T]=await Promise.all([m>0?d?S.searchEdgeCacheSpaceUsers({environment:i,query:n,membersOnly:a,limit:m}):S.searchVisibleSpaceUsers({environment:i,query:n,membersOnly:a}):[],v>0?S.searchSpaceBots({environment:i,query:n}):[],f>0?S.searchSpaceGroups({query:n,intl:o}):[],S.searchEmailUser(i,n),y>0?(0,l().nQ)(p,_().callApi({eventName:"searchContacts",environment:i,data:{spaceId:u.id,limit:y,query:n,importContactType:c,includeNonNotionUsers:!a,includeUserId:!0}})):void 0]),M=x.slice(0,m).map((e=>({type:"existingUser",value:e}))),P=w.slice(0,v).map((e=>({type:"bot",value:e}))),k=I.slice(0,f).map((e=>({type:"group",value:e})));C&&M.unshift({type:"existingUser",value:C}),A&&M.unshift({type:"newUser",value:{email:A},source:"email"});let j=[];return"success"===(null==T||null===(t=T.result)||void 0===t?void 0:t.type)&&(j=T.result.data.contacts.map((e=>({type:"newUser",value:{email:e.email,name:e.name,avatar_url:e.profile_photo,user_id:e.user_id},source:e.type})))),{inviteUsers:s().hS(M,(e=>e.value.email)),inviteBots:P,inviteGroups:k,importedContacts:j}}},551619:(e,t,n)=>{n.d(t,{Hy:()=>k,NV:()=>M,O9:()=>R,Rg:()=>j,Sm:()=>U,dK:()=>E,f7:()=>B,l8:()=>D,n$:()=>N,no:()=>V,sx:()=>P});var i=()=>n(484714),r=()=>n(792485),o=()=>n(847249),a=()=>n(700500),s=()=>n(651124),l=()=>n(519831),c=()=>n(620689),d=()=>n(591197),u=()=>n(835066),p=()=>n(964345),m=()=>n(68465),v=()=>n(753199),f=()=>n(504836),g=()=>n(478726),h=()=>n(747100),y=()=>n(963589),S=()=>n(665579),b=()=>n(351360),x=()=>n(525569),w=()=>n(508496),I=()=>n(375447),C=()=>n(66496),A=()=>n(548821),_=()=>n(712505),T=()=>n(302022);function M(e){(0,v().SQ)({event:e,context:v().y$.EditorMouseDown,callback:()=>{}})}function P(e){(0,v().SQ)({event:e,context:v().y$.EditorClick,callback:()=>{}})}function k(e){return(0,o().K8)((()=>Boolean(T().A.state.pageMap[e.id])||C().A.state.pages.has(e.id)),[e.id])}function j(e,t){const n=(0,i().v3)(),a=(0,r().S)(),s=k(e),l=(0,o().K8)((()=>{var n,i;return t===A().Rr.Frame?Boolean(null===(n=b().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===A().Rr.PeekView&&_().default.state.open?Boolean(null===(i=_().default.state.loadingContainerStore)||void 0===i?void 0:i.state.ready):t===A().Rr.CollectionPageView||t===A().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=B(e);return(0,o().K8)((()=>{if(!l)return!1;const t=n.currentUser.isLoggedIn(),i=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=i&&i.hasPublicPermission)||"edit"===(null==i?void 0:i.permission))&&!s&&!c&&(!(0,m().ZE)(i)||"completionPopup"!==x().default.state.type))}),[n.currentUser,c,l,a,s,e])}function R(e,t){const n=(0,i().v3)(),a=(0,r().S)(),{isTablet:s}=(0,i().Y0)(),l=(0,y().X)("tablet_refresh_template_pills_gate");return(0,o().K8)((()=>{if(t===A().Rr.SitePreview)return!1;if(n.device.isMobile&&(!s||!l))return!1;if(!n.currentUser.isLoggedIn())return!1;const i=a&&a.publicEditModeStore.state;if(null!=i&&i.hasPublicPermission&&"edit"!==(null==i?void 0:i.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const r=e.getContentStores()[0];if(r&&!r.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const o=p().gZ.state,c=p().Di.state;if(o&&e.id===c)return!1;return!((0,g().L5)(t)?d().VY.state:d().u3.state)}),[n,a,e,t,s,l])}function B(e){return(0,o().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function U(e){return(0,o().K8)((()=>{if(!(0,f().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function E(e){return(0,o().K8)((()=>{if(!(0,f().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function D(e){return(0,o().K8)((()=>{if(!w().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().IE.CsvImport}),[e])}function N(e){const t=(0,i().v3)(),{device:n,WindowSizeStore:r}=t,a=(0,o().K8)((()=>{const e=r.state.height,i=n.isMobile&&I().A.state.open?e:0;return c().C6(t)+i}),[t,r,n.isMobile]);return(0,o().K8)((()=>"home-phone"===e?S().q3:n.isTablet?380:n.isIOS?Math.max(350,a):n.isMobile?400:"side-peek"===e||"center-peek"===e?h().ln:"home"===e?S().wH:"30vh"),[n,a,e])}function V(e){const t=(0,i().v3)(),n=(0,o().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,o().K8)((()=>n&&!e.isFullWidth()?(0,u().Zy)(t,(0,h().cq)(e),(0,h().RX)(e)):0),[t,n,e])}},591197:(e,t,n)=>{n.d(t,{VY:()=>s,ZJ:()=>o,u3:()=>a});var i=()=>n(496506);class r extends(()=>n(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const o=new r,a=new(i().default)((()=>!1!==o.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(i().default)((()=>!1!==o.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},592674:(e,t,n)=>{n.d(t,{A:()=>r});const i=new(n(848776).U)((e=>{let{spaceId:t}=e;return t}),(async function(e,t){var i;let{spaceId:r}=t;const o=await Promise.resolve().then(n.bind(n,449506)),a=await o.callApi({eventName:"getInternalDomains",environment:e,data:{spaceId:r}});return"success"===a.type?null===(i=a.data)||void 0===i?void 0:i.internalDomainsWithInfo:void 0}));n(604341).exposeDebugValue("InternalDomainsStore",i);const r=i},599813:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,xMarkIcon:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M15.692 5.192a.625.625 0 1 0-.884-.884L10 9.116 5.192 4.308a.625.625 0 1 0-.884.884L9.116 10l-4.808 4.808a.625.625 0 1 0 .884.884L10 10.884l4.808 4.808a.625.625 0 1 0 .884-.884L10.884 10z"})},r=(0,n(340498).wt)("xMark",i)},603815:(e,t,n)=>{n.d(t,{A$:()=>A,JQ:()=>_,Vn:()=>I,s4:()=>C});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var i=()=>n(857639),r=()=>n(585515),o=()=>n(577449),a=()=>n(388821),s=()=>n(179034),l=()=>n(545285),c=()=>n(534177),d=()=>n(449506),u=()=>n(780054),p=()=>n(989423),m=()=>n(870618),v=()=>n(303626),f=()=>n(14307),g=()=>n(245865),h=()=>n(540758),y=()=>n(670631),S=()=>n(508496),b=()=>n(571963),x=()=>n(603815),w=()=>n(108944);async function I(e){const{environment:t,request:n,abortSignal:i,prefetchCacheKey:r,headers:o}=e;return(0,b().updateLoadCachedPageChunkCalledAt)(),f().isConnected()||f().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:n,abortSignal:i,prefetchCacheKey:r,headers:o}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:n,abortSignal:i,prefetchCacheKey:r,headers:o})}async function C(e){const{mode:t,environment:n,request:c,isFirstChunk:d,abortSignal:f}=e,g={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await x().A$(n,{id:c.page.id,table:s().ev}),null!=f&&f.aborted))throw new Error("Abort signal received");const S=a().RecordMapWithRole.create(),b=[];let w=!1;const I=new Set,C=await r().T(g,o().h.fromMonomorphicFunctionUnsafe((async e=>{const i=await m().h7({environment:n,pointer:e,abortSignal:f,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=f&&f.aborted)throw new Error("Abort signal received");if(i)return S.setModelAndRole(e,i.model,i.role),i.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!I.has(e.id)&&d){if(void 0===y().A.state.offlinePages)return b.push(e),void(w=!0);if(void 0===y().A.state.offlinePages||!h().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);b.push(e)}})),((e,t,n,i)=>{v().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${n})`),null!=i&&i.suppressErrorOnClient&&I.add(t.id)}));if(w&&(await y().A.waitUntil((()=>void 0!==y().A.state.offlinePages)),!h().Bd(c.page.id))){const[e]=b;throw new Error(`Record not found: ${e.table},${e.id}`)}if(b.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:n,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&i().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:b}})})),null!=f&&f.aborted)throw new Error("Abort signal received");return{recordMap:S.toJson(),cursor:C.cursorValue}}async function A(e,t){const n=e.currentUser.id;if(!n||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:n})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),g().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function _(e){if(!S().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let n=0;const i=()=>n>=50,r=e=>{"space"!==(null==e?void 0:e.table)&&(i()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),n++))};if(e.isReady())for(const a of(0,w().E)(e))r(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);r(t.getModel({table:"notion_user",id:e.userId}));let n=0;for(const e of t.getPointersByTable("notion_user")){if(i()||n>=10)break;n++,r(t.getModel(e))}}const o=Array.from(t).map((e=>{let{pointer:t,value:n}=e;if(void 0!==n)return{pointer:t,version:n}})).filter(c().O9);return o.length?o:void 0}},617668:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>i,plusIcon:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},r=(0,n(340498).wt)("plus",i)},637573:(e,t,n)=>{n.d(t,{r:()=>s});var i=()=>n(484714),r=()=>n(847249),o=()=>n(640653),a=()=>n(351360);function s(){const e=(0,i().v3)();return(0,r().K8)((()=>{const{currentSpaceStore:t}=a().default.state;if(t)return(0,o().fD)({environment:e,spaceId:t.id})}),[e])}},645109:(e,t,n)=>{n.d(t,{c:()=>u});var i=n(296540),r=()=>n(484714),o=()=>n(401497),a=()=>n(964996),s=()=>n(959013),l=()=>n(864943),c=()=>n(991249),d=n(474848);function u(e){let{openedFrom:t,styleOverrides:n}=e;const u=(0,r().v3)(),m=(0,i.useMemo)((()=>{switch(t){case"business_trial_verify_pages_upsell":return"pageVerification";case"business_trial_private_teamspaces_upsell":return"privateTeamspaces";case"business_trial_ai_connectors_upsell":return"aiConnectors";default:return"blank"}}),[t]),v=(0,o().IS)((e=>({button:{display:"flex",alignItems:"center",flex:1,gap:4},icon:{color:e.icon.orangePrimary,width:20}})),[]);return(0,d.jsx)(l().A,{size:"lg",icon:()=>(0,a().e)(v.icon),style:{...v.button,...n},onClick:async()=>{await(0,c().K)(u,{upsell:{product:"business",limit:{type:"none"},type:"product",trialability:"none"},from:t,isTrial:!0})},children:(0,d.jsx)(s().sA,{...p[m]})})}const p=(0,s().YK)({blank:{id:"selfServeBusinessTrial.tryButton.blank",defaultMessage:"Try"},privateTeamspaces:{id:"selfServeBusinessTrial.tryButton.privateTeamspaces",defaultMessage:"Try private teamspaces"},aiConnectors:{id:"selfServeBusinessTrial.tryButton.connectors",defaultMessage:"Try connectors"},pageVerification:{id:"selfServeBusinessTrial.tryButton.pageVerification",defaultMessage:"Try for free"},free:{id:"selfServeBusinessTrial.tryButton.free",defaultMessage:"Try for free"},thirtyDays:{id:"selfServeBusinessTrial.tryButton.30Days",defaultMessage:"Try for 30 days"}})},646614:(e,t,n)=>{n.d(t,{V:()=>g});var i=n(296540),r=()=>n(847249),o=()=>n(310442),a=()=>n(824862),s=()=>n(798880),l=()=>n(53528),c=()=>n(931075),d=()=>n(959013),u=()=>n(534177),p=()=>n(630116),m=()=>n(427636),v=()=>n(994006),f=n(474848);function g(e){const{textValue:t,rootStore:n}=e,g=(0,d().tz)(),h=(0,i.useMemo)((()=>{const e=(0,c().U1)(t);return e?c().B2(e):{type:"none"}}),[t]),y=(0,r().K8)((()=>{if("none"!==h.type)return p().sk.createChildStore(n,h.actorPointer)}),[h,n]);if("none"===h.type)return(0,f.jsx)("span",{children:g.formatMessage(c().nl.none)});let S;return void 0===y?S=(0,f.jsx)(v().A,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):y.table===s().oo?S=(0,f.jsx)(v().A,{userStore:y,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):y.table===a().GP?S=(0,f.jsx)(m().A,{botStore:y,style:{display:"inline-flex",alignItems:"baseline"}}):y.table===o().yj?S=(0,f.jsx)(v().A,{userStore:void 0,inline:!0,style:{display:"inline-flex",alignItems:"baseline"},avatarSize:18,avatarMarginRight:3}):(0,u().HB)(y),"verified"===h.type&&h.isIndefinite?(0,f.jsx)("div",{children:g.formatMessage(c().nl.verifiedIndefinitely,{actor:S})}):(0,f.jsx)("div",{children:g.formatMessage(c().nl.verifiedUntil,{actor:S,datetime:l().T2({dateTime:h.dateTimeRange.end,intl:g,displayInUserTimezone:!0})})})}},654734:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(296540),r=()=>n(869190),o=()=>n(604995),a=()=>n(416504),s=n(474848);const l=function(e){const t=(0,n(959013).tz)(),l=(0,n(401497).DP)(),u=(0,n(396182).I)(),p=(0,i.useRef)(),m=(0,i.useCallback)((()=>{const t=e.value;if(!t)return;const i=o().q8(t,(0,a().P)());if(!i)return;const r=i.valueOf(),s=r-Date.now();s<0||s>n(720665).nD||p.current&&p.current.timestamp===r||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:r,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),s)})}),[u,e.value]),v=(0,i.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,i.useEffect)((()=>{m()}),[m]),(0,i.useEffect)((()=>()=>{v()}),[v]);const{value:f,withComma:g}=e,h=(0,n(847249).K8)((()=>f?(0,r().ZF)({value:f,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,a().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,f]);if(!f)return null;const y=o().AA(f,(0,a().P)(),n(662303).locale);let S;if(f.reminder){const e=o().Zs(f,(0,a().P)());S=e?{color:l.errorText}:{color:n(100622).Ay.blue}}const b=(0,s.jsxs)(s.Fragment,{children:[h,f.reminder&&(0,n(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),g?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},children:b}):(0,s.jsx)(n(859428).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(y.start),y.end?` → ${c(y.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...S},...t,children:b}),placement:e.tooltipPlacement})};function c(e){return(0,r().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},677195:(e,t,n)=>{n.d(t,{R:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("verificationCheck",{viewBox:"0 0 6 7",svg:(0,i.jsx)("path",{d:"M2.84245 6.11619C2.71116 6.30644 2.53392 6.40156 2.31072 6.40156C2.20131 6.40156 2.10066 6.37881 2.00875 6.33332C1.92123 6.28782 1.83589 6.21545 1.75274 6.11619L0.150985 4.25515C0.0503282 4.12694 0 3.99874 0 3.87053C0 3.73406 0.04814 3.61826 0.14442 3.52314C0.245077 3.42388 0.365427 3.37425 0.50547 3.37425C0.597374 3.37425 0.680525 3.39286 0.754923 3.43008C0.833698 3.46317 0.912473 3.52934 0.991247 3.6286L2.28446 5.21049L5.00875 1.07896C5.13129 0.892857 5.28446 0.799805 5.46827 0.799805C5.60394 0.799805 5.72648 0.841161 5.83589 0.923874C5.9453 1.00659 6 1.11618 6 1.25266C6 1.32297 5.98249 1.39327 5.94748 1.46358C5.91685 1.52975 5.88184 1.59178 5.84245 1.64968L2.84245 6.11619Z"})})},797561:(e,t,n)=>{n.d(t,{E:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242m0 9.255c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h8.3c.68 0 1.328-.287 1.74-.767.429-.502.591-1.217.23-1.923-1.02-1.99-3.42-3.305-6.12-3.305"})},r=(0,n(340498).wt)("personFill",i)},811979:(e,t,n)=>{n.d(t,{A:()=>l});var i=n(296540),r=()=>n(847249),o=()=>n(592678),a=n(474848);function s(e,t){const{onClose:s,persistOnClose:l,render:u,stopClickPropagation:p,onClick:m,disablePopup:v,disabled:f,forceInitialInbound:g,renderOrigin:h,originGap:y,borderRadius:S,popupWrapStyle:b}=e,x=(0,r().uB)(e.buttonPopupStore,n(463830).A);(0,i.useEffect)((()=>()=>{x.setState({open:!1})}),[x]);const w=(0,i.useCallback)((()=>c(s,l,x)),[s,l,x]),I=(0,i.useCallback)((()=>(0,a.jsx)(d,{onClose:s,persistOnClose:l,render:u,buttonPopupStore:x})),[s,l,u,x]),C=(0,i.useCallback)((e=>function(e,t,n,i,r){t&&(null==e||e.stopPropagation());if(e&&o().Vt(e))return;n&&n(e);i||r.setState({...r.state,open:!0})}(e,p,m,v,x)),[p,m,v,x]),A=(0,r().K8)((()=>h({...e,onClick:f?n(496603).D_:C})),[f,C,e,h]),_=(0,r().K8)((()=>x.state.open),[x]);return(0,a.jsx)(n(897119).Ay,{ref:t,...e,forceInitialInbound:Boolean(g),render:I,open:_,onDismiss:w,origin:A,originGap:y,borderRadius:S,popupWrapStyle:b,trapFocus:!0})}const l=i.forwardRef(s);function c(e,t,n){e&&e(),t||n.reset()}function d(e){let{onClose:t,persistOnClose:n,render:o,buttonPopupStore:s}=e;const l=(0,i.useCallback)((()=>c(t,n,s)),[t,n,s]),d=(0,r().K8)((()=>o({close:l})),[o,l]);return(0,a.jsx)(a.Fragment,{children:d})}},824160:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var i=()=>n(484714),r=()=>n(401497),o=()=>n(704152),a=n(474848);function s(e){const t=(0,i().Y0)(),n=(0,r().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(o().A,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(o().A,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},880298:(e,t,n)=>{n.d(t,{r:()=>v});var i=n(296540),r=()=>n(401497),o=()=>n(372160),a=()=>n(677195),s=()=>n(53528),l=()=>n(931075),c=()=>n(959013),d=()=>n(534177),u=()=>n(284371),p=()=>n(828180),m=n(474848);function v(e){const{verificationValue:t,fontSize:n=p().Mi}=e,v=(0,c().tz)(),f=(0,i.useMemo)((()=>l().B2(t)),[t]),g=f.type,h=(0,r().IS)((e=>({icon:{width:"expired"===g?8:14,height:"expired"===g?9:14,fill:"verified"===g?e.blueColor:e.mediumIconColor},caption:{fontVariantNumeric:"normal",fontWeight:u().Wy.regular,color:e.text.primary,textTransform:"none",letterSpacing:0,marginLeft:6,marginRight:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:n,lineHeight:p().$g},expiredIconContainer:{width:14,height:14,borderRadius:6,border:"1px dashed",borderColor:e.mediumIconColor,display:"flex",justifyContent:"center",alignItems:"center",flexShrink:0}})),[g,n]);if("none"===g)return null;let y=null,S=null;const b=h.caption;switch(g){case"verified":y=(0,o().E)({...h.icon}),S=f.isIndefinite?(0,m.jsx)(c().sA,{defaultMessage:"Verified",id:"VerificationPropertyButton.verifiedIndefinitely"}):(0,m.jsx)(c().sA,{defaultMessage:"Until {date}",id:"VerificationPropertyButton.verifiedUntil",values:{date:s().OH({dateTime:f.dateTimeRange.end,intl:v})}});break;case"expired":y=(0,m.jsx)("div",{style:h.expiredIconContainer,children:(0,a().R)({...h.icon})}),S=(0,m.jsx)(c().sA,{defaultMessage:"Expired {timeFromMoment}",id:"VerificationPropertyButton.expired.text",values:{timeFromMoment:l().F7(f.dateTimeRange.end.setLocale(v.locale))}});break;default:(0,d().HB)(g)}return(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[y,(0,m.jsx)("div",{style:b,children:S})]})}},882262:(e,t,n)=>{n.d(t,{m:()=>r});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M4.485 8.86V5.369l4.073 4.073a.625.625 0 0 0 .884-.884L5.369 4.485H8.86a.625.625 0 0 0 0-1.25h-5a.625.625 0 0 0-.625.625v5a.625.625 0 1 0 1.25 0m10.146 6.655-4.07-4.07a.625.625 0 1 1 .884-.884l4.07 4.07V11.14a.625.625 0 1 1 1.25 0v5c0 .345-.28.625-.625.625h-5a.625.625 0 1 1 0-1.25z"})},r=(0,n(340498).wt)("arrowExpandDiagonal",i)},883234:(e,t,n)=>{n.d(t,{_:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,i.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},889154:(e,t,n)=>{n.d(t,{G:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("personBadgeExclamationMark",{viewBox:"0 0 24 22",svg:(0,i.jsx)("path",{d:"M14 20.91c1.36 0 2.64-.26 3.838-.781a10.166 10.166 0 003.183-2.158 10.198 10.198 0 002.159-3.174 9.59 9.59 0 00.78-3.848c0-1.36-.263-2.64-.79-3.838a10.165 10.165 0 00-2.158-3.183 10.165 10.165 0 00-3.184-2.158A9.52 9.52 0 0013.99.988c-1.27 0-2.47.228-3.603.684A10.24 10.24 0 007.34 3.566 10.179 10.179 0 005.152 6.39a9.75 9.75 0 00-1.045 3.466c.235-.045.508-.074.82-.087.32-.02.61-.013.87.02.137-1.01.44-1.948.908-2.813A8.088 8.088 0 018.512 4.7a8.261 8.261 0 012.5-1.504 8.095 8.095 0 012.978-.547c1.153 0 2.23.215 3.233.645a8.233 8.233 0 012.646 1.777 8.365 8.365 0 011.787 2.647 8.11 8.11 0 01.645 3.232 8.15 8.15 0 01-2.139 5.557c-.319-.378-.775-.736-1.367-1.074-.593-.345-1.296-.625-2.11-.84-.813-.215-1.712-.322-2.695-.322-.469 0-.918.029-1.347.087-.43.053-.837.124-1.221.215.117.469.176.96.176 1.475 0 .762-.134 1.488-.4 2.178a6.308 6.308 0 01-1.095 1.865c.6.26 1.228.462 1.885.605A9.426 9.426 0 0014 20.91zm-.01-8.3a3.02 3.02 0 001.69-.47 3.53 3.53 0 001.21-1.318c.3-.56.45-1.191.45-1.894 0-.658-.15-1.26-.45-1.807a3.55 3.55 0 00-1.21-1.309 3.035 3.035 0 00-1.69-.488c-.625 0-1.191.163-1.699.489a3.622 3.622 0 00-1.65 3.115c0 .696.15 1.321.449 1.875.3.553.7.993 1.201 1.318a3.194 3.194 0 001.7.488zM5.3 21.017c.67 0 1.305-.13 1.904-.391a5.082 5.082 0 001.582-1.074A5 5 0 009.87 17.97c.26-.6.39-1.237.39-1.914 0-.684-.13-1.325-.39-1.924a4.945 4.945 0 00-1.064-1.582 4.946 4.946 0 00-1.582-1.065 4.772 4.772 0 00-1.924-.39c-.677 0-1.315.13-1.914.39a4.87 4.87 0 00-1.582 1.074A5.082 5.082 0 00.73 14.142a4.707 4.707 0 00-.391 1.914c0 .683.13 1.325.39 1.924a5.07 5.07 0 001.075 1.581c.455.456.983.811 1.582 1.065.599.26 1.237.39 1.914.39zm-.01-1.797a.788.788 0 01-.576-.244.768.768 0 01-.244-.577c0-.227.081-.423.244-.585a.788.788 0 01.576-.245c.234 0 .43.085.586.254a.788.788 0 01.244.576.77.77 0 01-.244.577.8.8 0 01-.586.244zm.01-2.325a.601.601 0 01-.43-.156.613.613 0 01-.166-.41l-.078-2.793a.63.63 0 01.176-.488.673.673 0 01.498-.186.66.66 0 01.488.186.63.63 0 01.176.488l-.078 2.793a.592.592 0 01-.176.41.554.554 0 01-.41.157z"})})},964996:(e,t,n)=>{n.d(t,{e:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("gift",{viewBox:"0 0 20 20",svg:(0,i.jsx)("g",{id:"Layer_1",children:(0,i.jsx)("path",{d:"M16,5.75h-.6682129c.2590332-.4436646.4182129-.9526367.4182129-1.5024414,0-.8989258-.4003906-1.7426758-1.0986328-2.3149414-.7021484-.5761719-1.6191406-.8037109-2.5048828-.6264648-.8757935.1747437-1.6201782.6658325-2.1376343,1.3336792-.515564-.6645508-1.2658691-1.1560669-2.1675415-1.3361206-.8833008-.1767578-1.7939453.0498047-2.4926758.6220703-.6982422.5727539-1.0986328,1.4189453-1.0986328,2.3217773,0,.5498047.1592407,1.0587769.4182129,1.5024414h-.6682129c-.9648438,0-1.75.7851562-1.75,1.75v2c0,.6700439.3829346,1.246521.9375,1.5404663v4.9595337c0,.9648438.7851562,1.75,1.75,1.75h10.1875c.9648438,0,1.75-.7851562,1.75-1.75v-4.9934692c.5205078-.3035889.875-.8618164.875-1.5065308v-2c0-.9648438-.7851562-1.75-1.75-1.75ZM16.25,7.5v2c0,.1376953-.1123047.25-.25.25h-5.21875v-2.5h5.21875c.1376953,0,.25.1123047.25.25ZM12.4404297,2.7768555c.4433594-.090332.90625.0258789,1.2607422.315918.3486328.2861328.5488281.7070312.5488281,1.1547852,0,.8286133-.6738281,1.5024414-1.5029297,1.5024414h-1.9970703v-.921875c0-.9926758.7109375-1.8554688,1.6904297-2.0512695ZM5.75,4.2475586c0-.4516602.2001953-.8754883.5498047-1.1616211.2641602-.2167969.5883789-.3344727.9536133-.3344727.1186523,0,.2412109.0126953.3671875.0375977.9443359.1884766,1.6293945,1.0244141,1.6293945,1.9873047v.9736328h-1.9975586c-.8286133,0-1.5024414-.6738281-1.5024414-1.5024414ZM3.75,7.5c0-.1376953.1123047-.25.25-.25h5.28125v2.5h-5.28125c-.1376953,0-.25-.1123047-.25-.25v-2ZM4.6875,16v-4.75h4.59375v5h-4.34375c-.1376953,0-.25-.1123047-.25-.25ZM15.125,16.25h-4.34375v-5h4.59375v4.75c0,.1376953-.1123047.25-.25.25Z"})})})},992510:(e,t,n)=>{n.d(t,{A:()=>a});n(296540);var i=()=>n(959013),r=()=>n(250202),o=n(474848);const a=function(e){const t=(0,n(484714).v3)(),{device:a}=t;if(a.isMobile)return e.propertySchema?(0,o.jsx)(r().G,{propertySchema:e.propertySchema,onClick:e.onClick,focused:!1,format:r().e.Name,showExtensionArrow:!e.disabled}):(0,o.jsx)(n(760217).A,{focused:!1,title:(0,o.jsx)(i().sA,{defaultMessage:"Property",id:"database.mobileFilterAndSortMenu.property.buttonMenuItem.label"})});{const t=e.propertySchema&&(0,o.jsx)(n(398842).mA,{propertySchema:e.propertySchema,showIcon:!0,style:{lineHeight:1.4}}),r=(0,o.jsx)(i().sA,{defaultMessage:"Property",id:"database.filterAndSortMenu.propertyButton.label"});return(0,o.jsx)(n(272630).A,{title:t,placeholder:r,onClick:e.onClick,disabled:e.disabled,disableMargins:e.disableMargins,desktopStyle:e.textWrapperStyle})}}}}]);