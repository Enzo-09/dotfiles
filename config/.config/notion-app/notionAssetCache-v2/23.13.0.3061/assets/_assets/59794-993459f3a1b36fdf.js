"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[59794],{134589:(e,t,o)=>{o.d(t,{R:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M9.325 10.466V2.063a.625.625 0 1 1 1.25 0v8.453l1.458-1.458a.625.625 0 1 1 .884.884l-2.5 2.5a.625.625 0 0 1-.884 0l-2.5-2.5a.625.625 0 1 1 .884-.884z"}),(0,n.jsx)("path",{d:"M11.825 6.375H14.5c.483 0 .875.392.875.875v7.5a.875.875 0 0 1-.875.875h-9a.875.875 0 0 1-.875-.875v-7.5c0-.483.392-.875.875-.875h2.575v-1.25H5.5A2.125 2.125 0 0 0 3.375 7.25v7.5c0 1.174.951 2.125 2.125 2.125h9a2.125 2.125 0 0 0 2.125-2.125v-7.5A2.125 2.125 0 0 0 14.5 5.125h-2.675z"})]})},i=(0,o(340498).wt)("squareAndArrowDown",r)},170350:(e,t,o)=>{o.d(t,{S:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M3 4.875a.625.625 0 1 0 0 1.25h14a.625.625 0 1 0 0-1.25zm2.125 5.742h9.75a.625.625 0 1 0 0-1.25h-9.75a.625.625 0 1 0 0 1.25m1.5 3.883c0-.345.28-.625.625-.625h5.5a.625.625 0 1 1 0 1.25h-5.5a.625.625 0 0 1-.625-.625"})},r=(0,o(340498).wt)("filter",n)},187899:(e,t,o)=>{o.d(t,{Hs:()=>R,B$:()=>I,m:()=>H,x1:()=>K,RQ:()=>P,RZ:()=>_,IU:()=>D,Ms:()=>O,Aq:()=>L,LS:()=>V});o(898992),o(354520),o(672577),o(581454),o(296540);var n=()=>o(908006),r=()=>o(289915),i=()=>o(921598),l=()=>o(206267),s=()=>o(792071),a=()=>o(496603),c=()=>o(534177),d=()=>o(436572),u=()=>o(467676),p=()=>o(914701),g=()=>o(763884),h=()=>o(764670);var m=()=>o(180762),C=()=>o(314660),f=()=>o(484714),x=()=>o(959013),v=()=>o(495262),y=()=>o(104012),S=o(474848);function b(){return(0,S.jsx)(x().sA,{defaultMessage:"Changes saved for everyone.",id:"database.filterBar.saved.title"})}function A(e){const{collectionContextStore:t,temporaryState:o}=e,n=(0,f().v3)();return(0,S.jsx)(y().Ag,{onClick:()=>{v().tN({environment:n,preventSelectText:!0}),d().N2(),D({environment:n,collectionContextStore:t,temporaryState:o})},children:(0,S.jsx)(x().sA,{defaultMessage:"Undo",id:"database.filterBar.undo.title"})})}var j=()=>o(873050),F=()=>o(108944),w=()=>o(351360),k=()=>o(885110),M=()=>o(686526),T=()=>o(751156),B=()=>o(755199);let R=function(e){return e[e.All=0]="All",e[e.Filters=1]="Filters",e[e.Sorts=2]="Sorts",e}({});function I(e){const{environment:t,collectionContextStore:o,targetCollectionViewStore:n,preventSnackbarNotification:r,type:i,transaction:l}=e,s=o.temporaryStateStore.state,a=o.currentPropertyFiltersStore.state,c=n.getPropertyFiltersStore(),u=(0,j().Ml)(o,"persisted");if(i===R.All||i===R.Filters){u.combinatorFilter&&(0,C().f)({collectionViewStore:n,update:{filter:u.combinatorFilter.value||null},transaction:l});for(const e of u.filters.removed)T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListRemove",path:c.path,args:{remove:{id:e}}},transaction:l});for(const{id:e,beforeId:t}of u.filters.moveOps){const o=a.find((t=>t.id===e));o&&(t?T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListBefore",path:c.path,args:{before:{id:t},value:o}},transaction:l}):T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListAfter",path:c.path,args:{value:o}},transaction:l}))}for(const e of u.filters.updated){const t=a.find((t=>t.id===e));t&&T().applyOperation({store:c,operation:{pointer:c.pointer,command:"keyedObjectListUpdate",path:c.path,args:{value:t}},transaction:l})}}i!==R.All&&i!==R.Sorts||!u.sorts||(0,C().f)({collectionViewStore:n,update:{sort:u.sorts.value||null},transaction:l}),V({environment:t,collectionContextStore:o,temporaryState:i===R.All?void 0:i===R.Filters?{...s,combinatorFilter:void 0,propertyFilters:void 0}:{...s,sorts:void 0}}),r||d().D6({label:(0,S.jsx)(b,{}),right:(0,S.jsx)(A,{collectionContextStore:o,temporaryState:s})})}function P(e){const{environment:t,intl:o,collectionContextStore:r,transaction:i}=e,l=r.collectionViewStore(),s=r.isFullScreenStore.state,a=r.isRootChildStore.state,c=r.isInPeekRendererStore.state;if(!l)return;const d=r.collectionViewBlockStore(),p=(0,u().t)({environment:t,collectionViewBlockStore:d,collectionViewStore:l,intl:o,transaction:i});p&&(I({environment:t,type:R.All,collectionContextStore:r,targetCollectionViewStore:p,transaction:i}),p&&("chart"===p.getType()&&k().Z({environment:t,collectionContextStore:r,collectionViewId:p.id,from:"filter_save_as_new_view"}),(0,m().t)({environment:t,collectionContextStore:r,collectionViewId:p.id,isFullScreen:s,isRootChild:a,isInPeekRenderer:c}),n().default.afterNextFlush((()=>{M().Ow({collectionContextStore:r,collectionSettingsStore:r.settingsStore,selectViewNameInitial:!0})}))))}function D(e){V(e),function(e){const{environment:t,collectionContextStore:o}=e,n=o.collectionViewStore(),r=o.collectionViewBlockStore();if(!n||!r)return;(o.isUnlistedViewStore.state&&o.isInlineViewStore.state||(0,F().rD)({environment:t,store:r})&&o.permissionScopesStore.state.canConfigureBlock)&&T().createAndCommit({userAction:"collectionFilterActions.applyTemporaryStateIfPrivate",environment:t,canUndo:!0,perform:e=>{I({environment:t,collectionContextStore:o,type:R.All,targetCollectionViewStore:n,preventSnackbarNotification:!0,transaction:e})}})}(e)}function V(e){var t;const{environment:o,collectionContextStore:n,temporaryState:r}=e,i=n.collectionViewStore();if(!i)return;const l=o.currentUser.id;n.temporaryStateStore.setState(r||{}),function(e){let{currentUserId:t,collectionViewId:o,viewsModuleCurrentPageId:n,temporaryState:r}=e;const i=(0,h().l)({collectionViewId:o,viewsModuleCurrentPageId:n});r?g().K.set({userId:t,key:i,value:JSON.stringify(r)}):g().K.remove({userId:t,key:i})}({currentUserId:l,collectionViewId:i.id,viewsModuleCurrentPageId:n.viewsModuleContextStore.isInLayoutBuilder()||null===(t=n.viewsModuleContextStore.currentPageStore())||void 0===t?void 0:t.id,temporaryState:r}),n.groupsStore.resetAllLimits()}function L(e){const{environment:t,seen:o}=e,{currentUserSettingsStore:n}=w().default.state;n&&T().createAndCommit({userAction:"collectionFilterActions.setSeenFiltersIntroTooltip",environment:t,canUndo:!0,perform:e=>{B().mJ({userSettingsStore:n,transaction:e,data:{seen_filters_tooltip:o}})}})}function _(e){var t;let{transaction:o,newGroups:n,collectionContextStore:l,environment:s}=e;const d=l.collectionViewStore(),u=l.currentCombinatorFilterStore.state,p=(0,a().mg)(u),g=null==p||null===(t=p.filters)||void 0===t?void 0:t.find(r().B9),h=(0,j().I6)(l);if(!(d&&p&&p.filters&&g))return;const m=g.filter.value.filter((e=>"exact"===e.type)).map((e=>e.value)).filter(c().O9),C=n.map((e=>e.value)).filter(i().D1).map((e=>e.value)).filter(i().WO).map((e=>e.id)),f=(0,a().FF)(C,...m);0!==f.length&&(g.filter.value=[...g.filter.value,...f.map((e=>({type:"exact",value:e})))],V({environment:s,collectionContextStore:l,temporaryState:{...l.temporaryStateStore.state,combinatorFilter:{value:p}}}),h||I({environment:s,collectionContextStore:l,type:R.Filters,targetCollectionViewStore:d,preventSnackbarNotification:!0,transaction:o}))}function O(e){var t;const o=null===(t=e.collectionViewStore())||void 0===t?void 0:t.id,n=e.getCurrentUserId();o&&n&&((0,p().E)({userId:n,collectionViewId:o,isOpen:!1}),e.filtersBarOpenStore.setState(!1))}function H(e){var t;const{collectionContextStore:o,environment:n,property:r,schema:i}=e,a=o.currentPropertyFiltersStore.state,c=a.find((e=>e.filter.property===r));if(c)return c;const d=(null===(t=o.collectionViewBlockStore())||void 0===t?void 0:t.getRecordModel)??s().b4_.constant(void 0),u=(0,j().SO)({property:r,schema:i,getRecordModel:d});if(!u)return;const p={id:l().JW(),filter:u};return D({environment:n,collectionContextStore:o,temporaryState:{...o.temporaryStateStore.state,propertyFilters:{value:[...a,p]}}}),p}function K(e){const{collectionContextStore:t,environment:o}=e,n=t.currentCombinatorFilterStore.state;if(n)return n;const i=r().Lx;return D({environment:o,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,combinatorFilter:{value:i}}}),i}},314660:(e,t,o)=>{o.d(t,{f:()=>r});var n=()=>o(246826);function r(e){const{collectionViewStore:t,update:o,transaction:r}=e;n().zv({store:t.getQueryStore(),data:o,transaction:r})}},320865:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(){return(0,n.jsx)(o(678553).Ay,{title:(0,n.jsx)(o(331542).A,{})})}},324577:(e,t,o)=>{o.d(t,{Y:()=>r});var n=()=>o(847249);function r(e){return(0,n().K8)((()=>null==e?void 0:e.getWorkflowStore()),[e])}},378864:(e,t,o)=>{o.d(t,{A:()=>j,T:()=>F});o(944114),o(898992),o(354520),o(737550);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),s=()=>o(289915),a=()=>o(784892),c=()=>o(164153),d=()=>o(959013),u=()=>o(496603),p=()=>o(436696),g=()=>o(873050),h=()=>o(722872),m=()=>o(831194),C=()=>o(760217),f=()=>o(625830),x=()=>o(928600),v=()=>o(939740),y=()=>o(480095),S=()=>o(89924),b=()=>o(399762),A=o(474848);function j(e){const{propertyFilter:t,schema:o,filter:a,parentStore:m,updateValue:f,onClose:b,desktopTopActions:j,mobileMenuTitle:w,mobileMoreActions:k,collectionContextStore:M}=e,T=(0,r().v3)(),B=(0,r().Y0)(),[R,I]=(0,n.useState)([]),[P,D]=(0,n.useState)(!1),V=(0,i().K8)((()=>(0,g().YF)(o,t,m)),[o,t,m]),L=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),_=(0,i().K8)((()=>(0,s().gc)(a)?(0,s().V6)(a):[]),[a]),O=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[],t=null==M?void 0:M.collectionStoreResultsInViewOrder();return!P&&t?e.filter((e=>t.some((t=>{var o;return null===(o=e.collectionIds)||void 0===o?void 0:o.includes(t.id)})))):e}),[V,P,M]),H=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=[],t=V.groups??[],o=V.options??[];for(const n of t){const t=(0,g().Ze)({group:n,options:o,filterValues:_});if("partial"!==t.groupCheckState)continue;const r=o.filter((e=>{var t;return null===(t=n.optionIds)||void 0===t?void 0:t.includes(e.id)})).filter((e=>t.optionCheckedInfo.get(e.id)));e.push(...r)}return e}),[V,_]),K=(0,i().K8)((()=>{if(!V||"status"!==V.type)return[];const e=V.options??[];return R?e.filter((e=>!R.some((t=>t.id===e.id)))):[]}),[V,R]);(0,n.useEffect)((()=>{I((()=>u().hS([...O,...R,...H],"id")))}),[O]);const W=(0,i().K8)((()=>V&&"status"===V.type?F({propertySchema:V,statusFilterValues:_,updateValue:f,isMobile:B.isMobile,styles:{checkboxIcon:L.checkboxIcon},visibleOptions:R,shouldShowHiddenSources:P,setShouldShowHiddenSources:D}):[]),[B.isMobile,V,L.checkboxIcon,f,R,P,D,_]);if(!V||"status"!==V.type)return null;const z=(0,A.jsx)(S().A,{desktopStyle:{paddingBottom:0},children:!B.isMobile&&j});let N;N=B.isMobile?{menuType:h().gu.Modal,title:w,left:k,right:(0,A.jsx)(y().DoneMenuText,{}),onClickRight:b,header:z}:{menuType:h().gu.Popup,maxHeight:s().mi,width:260,header:z,disableHeaderBorder:!0,tokenInputHeader:!0};const q=(0,A.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:0,sections:[{key:"groups",items:W,render:e=>(0,A.jsx)(S().A,{...e,title:"",style:{paddingTop:0}})}]}),Y=K&&K.length>0&&!P?(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(C().A,{icon:(0,c().T)({width:13,height:13}),title:(0,A.jsx)(d().sA,{id:"collectionFilterValueMenu.statusFilterValueMenu.hiddenStatusOptionsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other status option} other {{numHiddenOptions} other status options}}",values:{numHiddenOptions:K.length}}),focused:!1,onClick:()=>{D(!0),M&&(0,p().X)({environment:T,collectionContextStore:M,action:"expand_property_filter",original_view_type:void 0,property_type:"status"})}})}):null,G=(0,A.jsx)(S().A,{topBorder:!0,children:(0,A.jsx)(C().A,{title:(0,A.jsx)(d().sA,{defaultMessage:"Clear selection",id:"database.filterValue.selectType.clearSelection.message"}),focused:!1,onClick:()=>{f([])}})});return(0,A.jsx)(x().A,{...N,children:(0,s().gc)(a)&&(0,A.jsxs)(A.Fragment,{children:[q,Y,G]})})}function F(e){const{propertySchema:t,statusFilterValues:o,updateValue:n,isMobile:r,styles:i,visibleOptions:l,shouldShowHiddenSources:s}=e,c=t.groups??[],d=t.options??[],u=[];for(const p of c){const e=()=>{const e=(0,g().fe)(c,d,o,{type:"is_group",value:p.name});e&&n(e)},t=(0,g().Ze)({group:p,options:d,filterValues:o}),h=d.filter((e=>{var t;return(null===(t=p.optionIds)||void 0===t?void 0:t.includes(e.id))&&(s||(null==l?void 0:l.some((t=>t.id===e.id))))})),x=[];for(const l of h){const e=()=>{const e=(0,g().fe)(c,d,o,{type:"is_option",value:l.value});e&&n(e)};x.push({key:`option-${l.id}`,action:e,render:o=>(0,A.jsx)(C().A,{...o,icon:(0,A.jsx)(f().A,{checked:t.optionCheckedInfo.get(l.id)??!1,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(b().q,{format:r?a().NY.Large:a().NY.Medium,isSingle:!0,value:l.value,color:l.color,showRemoveButton:!1,groupColor:p.color}),style:{paddingLeft:16}})})}u.push({key:`group-${p.id}`,action:e,render:o=>(0,A.jsx)(C().A,{...o,icon:(0,A.jsx)(f().A,{checked:t.groupCheckState,size:14,onClick:e,style:i.checkboxIcon}),title:(0,A.jsx)(m().RS,{style:{fontWeight:500,marginTop:2},group:p,showIcon:!0,showColor:!0}),textWrapperStyle:{marginLeft:3}})},...x)}return u}},399762:(e,t,o)=>{o.d(t,{O:()=>c,q:()=>d});o(296540);var n=()=>o(401497),r=()=>o(100622),i=()=>o(284371),l=()=>o(288722),s=()=>o(881690),a=o(474848);function c(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,hideTooltip:m,description:C,tooltipPlacement:f,...x}=e,v=(0,n().DP)(),y=(0,n().IS)((e=>({token:{...d&&i().RC}})),[d]),{textColor:S,backgroundColor:b}=(0,r().LD)(v,o);return t?(0,a.jsx)(s().A,{format:c,value:(0,a.jsx)(l().A,{children:t}),description:C,onClickRemove:u,showRemoveButton:p,isSingle:g,color:S,backgroundColor:b,shouldShrink:h,tooltipPlacement:f,showTooltip:m?"never":"overflow",style:y.token,...x}):null}function d(e){const{value:t,color:o,format:c,showEllipsis:d,onClickRemove:u,showRemoveButton:p,isSingle:g,shouldShrink:h,groupColor:m,tooltipPlacement:C,description:f,hideTooltip:x,...v}=e,y=(0,n().DP)(),S=(0,n().IS)((()=>({token:{...d&&i().RC}})),[d]);if(!t)return null;const{textColor:b,backgroundColor:A}=(0,r().LD)(y,o??m??"gray");let j;return j=o||(m||"gray"),(0,a.jsx)(s().A,{format:c,value:(0,a.jsx)(l().A,{children:t}),description:f,onClickRemove:u,showRemoveButton:p,isSingle:g,color:b,backgroundColor:A,shouldShrink:h,showTooltip:x?"never":"overflow",style:S.token,isRound:!0,showColoredDot:j,tooltipPlacement:C,...v})}},430102:(e,t,o)=>{o.d(t,{A:()=>p});var n=o(296540),r=o(774963),i=()=>o(668725),l=()=>o(100622),s=()=>o(704152),a=()=>o(859428),c=o(474848);function d(e,t,o){return"object"!=typeof o[t]?o[t]:o[t][e]}function u(e,t){const{style:r,color:u,title:p,onClick:g,onDropdownClick:h,mainButtonTooltip:m,dropdownTooltip:C,icon:f,iconStyle:x,mainButtonStyle:v,isLoading:y,className:S,disabled:b,disableDropdown:A,size:j,variant:F="solid"}=e,{isMobile:w}=(0,o(484714).Y0)(),k=(0,o(401497).IS)((e=>{const t=(0,o(960715).qq)({size:j}),n={background:d(u,F,{outline:void 0,solid:{blue:l().Ay.blue,black:l().Ay.frontBlackButtonBackground,orange:e.accentColors.orange["dark"===e.mode?100:50]}}),color:d(u,F,{outline:{blue:e.text.uiBluePrimary,black:e.text.primary,orange:e.text.orangeSecondary},solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange["dark"===e.mode?600:400]}})};return{wrap:{position:"relative",display:"inline-flex",flexShrink:0,borderRadius:6,overflow:"hidden",height:t.height},mainButton:{display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderTopLeftRadius:6,borderBottomLeftRadius:6,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,fontSize:t.fontSize,fontWeight:o(284371).Wy.medium,...n,...v},dropdownButton:{display:"flex",alignItems:"center",justifyContent:"center",width:w?28:24,alignSelf:"stretch",borderTopRightRadius:t.borderRadius,borderBottomRightRadius:t.borderRadius,boxShadow:"outline"===F||"blue"===u||"black"===u?`inset 1px 0 0 ${e.darkDividerColor}`:"orange"===u?`${e.accentColors.orange["dark"===e.mode?200:100]} 1px 0 0 inset`:(0,o(534177).HB)(u),...n},dropdownButtonIcon:{width:10,marginTop:2,fill:d(u,F,{outline:n.color,solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange["dark"===e.mode?500:400]}})},buttonHoveredStyle:{background:d(u,F,{outline:{blue:e.tint.uiBlueHover,black:e.tint.primaryHover,orange:e.tint.uiRedHover},solid:{blue:e.blueButtonHoveredBackground,black:l().Ay.frontBlackButtonBackgroundHovered,orange:e.accentColors.orange["dark"===e.mode?200:100]}})},buttonPressedStyle:{background:d(u,F,{outline:{blue:e.tint.uiBluePressed,black:e.tint.primaryPressed,orange:e.tint.uiRedPressed},solid:{blue:e.blueButtonPressedBackground,black:l().Ay.frontBlackButtonBackgroundPressed,orange:e.accentColors.orange["dark"===e.mode?300:200]}})},icon:{width:12,marginRight:6,fill:d(u,F,{outline:n.color,solid:{blue:l().Ay.white,black:l().Ay.white,orange:e.accentColors.orange[400]}}),...x},border:{position:"absolute",pointerEvents:"none",border:"outline"===F?`1px solid ${e.outlineButtonBorder}`:void 0,borderRadius:t.borderRadius,top:0,left:0,right:0,bottom:0}}}),[u,j,F,v,w,x]),M=(0,n.useMemo)((()=>m?(0,c.jsx)(a().A,{renderTooltip:()=>m,render:e=>(0,c.jsxs)(s().A,{ref:t,style:k.mainButton,onClick:g,disabled:b,disabledFeedback:!0,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,...e,children:[f&&f(k.icon),p]})}):(0,c.jsxs)(s().A,{ref:t,style:k.mainButton,onClick:g,disabled:b,isLoading:y,disabledFeedback:!0,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,children:[f&&f(k.icon),p]})),[m,t,k.mainButton,k.buttonHoveredStyle,k.buttonPressedStyle,k.icon,g,b,y,f,p]),T=(0,n.useMemo)((()=>A||b?null:C?(0,c.jsx)(a().A,{renderTooltip:()=>C,render:e=>(0,c.jsx)(s().A,{ref:t,style:k.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,...e,children:(0,i().b)(k.dropdownButtonIcon)})}):(0,c.jsx)(s().A,{ref:t,style:k.dropdownButton,onClick:h,disabledFeedback:!0,hoveredStyle:k.buttonHoveredStyle,pressedStyle:k.buttonPressedStyle,disabled:y,children:(0,i().b)(k.dropdownButtonIcon)})),[A,b,C,y,h,t,k.buttonHoveredStyle,k.buttonPressedStyle,k.dropdownButton,k.dropdownButtonIcon]);return(0,c.jsxs)("div",{style:{...k.wrap,...r},className:S,children:[M,T,(0,c.jsx)("div",{style:k.border})]})}const p=n.memo(n.forwardRef(u),r.bN)},448061:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var n=o(474848);const r=function(e){const{collectionStore:t}=e,r=(0,o(847249).K8)((()=>t.getIcon()),[t]);return(0,n.jsxs)("div",{style:{display:"flex",columnGap:4,alignItems:"center"},children:[(0,n.jsx)(o(614505).B,{disabled:!0,icon:r,isEmptyPage:!1,size:20}),(0,n.jsx)(o(16006).A,{store:t,style:{maxWidth:180}})]})}},497222:(e,t,o)=>{o.d(t,{A:()=>u});o(296540);var n=()=>o(804773),r=()=>o(401497),i=()=>o(742117),l=()=>o(30626),s=()=>o(284371),a=()=>o(760217),c=()=>o(700251),d=o(474848);function u(e){const{icon:t,iconStyle:o,title:u,caption:p,right:g,rightStyle:h,isRed:m,isGray:C,isOrange:f,onClick:x,onMouseDown:v,onMouseEnter:y,onMouseLeave:S,disabled:b,showChevron:A,chevronStyle:j,rotateChevron:F,showDragHandle:w,focused:k,textWrapperStyle:M,shouldWrapCaption:T,desktopIconStyle:B,buttonStyle:R,desktopTitleStyle:I}=e,P=(0,c().y$)(),D=(0,r().IS)((e=>({style:{color:C?e.text.secondary:f?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.text.primary,fill:C?e.mediumIconColor:f?"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[400]:e.regularIconColor,opacity:b?.4:void 0,...R},leftIconStyle:{width:P,height:P,...t===l()._&&{height:3},...o},rightStyle:{display:"flex",alignItems:"center",color:b?e.text.primary:e.text.tertiary,fill:b?e.regularIconColor:e.lightIconColor,flexShrink:0,...h},rightIconStyle:{width:12,fill:e.lightIconColor,marginLeft:6,transition:"transform 200ms ease-in-out",...j},rightIconRotatedStyle:{transform:"rotate(90deg)"}})),[C,f,b,o,t,j,h,R,P]),{itemRef:V,isTabbable:L,onKeyDown:_,onFocus:O}=(0,n().e)();return(0,d.jsx)(a().A,{ref:V,icon:null==t?void 0:t(D.leftIconStyle),focused:k||!1,disabled:b,title:u,caption:p,shouldWrapCaption:T,desktopTitleStyle:{flexGrow:1,flexShrink:1,...I},onKeyDown:_,onFocus:O,disallowTabbing:!L,showDragHandle:w,buttonStyle:D.style,rightStyle:D.rightStyle,isRedOnHover:m,ignoreLocalHoverState:!!b||void 0,right:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{style:{...s().RC,display:"flex"},children:g}),!b&&A&&(0,i().V)({...D.rightIconStyle,...F&&D.rightIconRotatedStyle})]}),onClick:x,onMouseDown:v,onMouseEnter:y,onMouseLeave:S,textWrapperStyle:M,desktopIconStyle:B})}},536583:(e,t,o)=>{o.d(t,{d:()=>r});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.342.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},r=(0,o(340498).wt)("docOnDoc",n)},573351:(e,t,o)=>{o.d(t,{A:()=>i});var n=o(296540),r=o(474848);const i=function(e){let{firstDayOfWeek:t,value:i,selectValue:l=!0,onChange:s,onFocus:a,onBlur:c,disabledDays:d,className:u}=e;const p=(0,n.useMemo)((()=>new Date(i)),[i]),[g,h]=(0,n.useState)(p),m=(0,n.useRef)(i);(0,n.useLayoutEffect)((()=>{m.current!==i&&(h(new Date(i)),m.current=i)}),[i]);const C=(0,n.useCallback)(((e,t,o)=>{s(e.getTime())}),[s]);return(0,r.jsx)("div",{style:{paddingRight:8,paddingBottom:8,paddingLeft:8,paddingTop:4},children:(0,r.jsx)(o(541181).n,{locale:o(662303).locale,className:u??"notion-calendar-picker",numberOfMonths:1,weekStartsOn:t,modifiers:l?{value:p}:{},showOutsideDays:!0,fixedWeeks:!0,onDayClick:C,onMonthSelected:h,disabled:d,month:g,onDayBlur:c,onDayFocus:a})})}},615950:(e,t,o)=>{o.d(t,{$J:()=>T,Ay:()=>I,Nf:()=>R});o(898992),o(354520),o(672577);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(289915),s=()=>o(30626),a=()=>o(959013),c=()=>o(496603),d=()=>o(284371),u=()=>o(436696),p=()=>o(187899),g=()=>o(686526),h=()=>o(751156),m=()=>o(493823),C=()=>o(760217),f=()=>o(406699),x=()=>o(928600),v=()=>o(939740),y=()=>o(897119),S=()=>o(89924),b=()=>o(859428),A=()=>o(873050),j=()=>o(722872),F=()=>o(553965),w=()=>o(962730),k=()=>o(497222),M=o(474848);let T=function(e){return e[e.FilterBar=0]="FilterBar",e[e.SettingsFilters=1]="SettingsFilters",e[e.SettingsSort=2]="SettingsSort",e}({});const B=o(757695).default.createClass(!1,{name:"ShowMoreStore"});function R(){return(0,M.jsx)(a().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.tooltip",defaultMessage:"Use an advanced filter to group filter rules and use AND/OR conditions."})}const I=function(e){let{collectionContextStore:t,context:l,showHoverActionsStore:c,moreActionsButtonPopupStore:p}=e;const g=(0,o(401497).DP)(),h=(0,r().v3)(),C=(0,a().tz)(),x=(0,r().Y0)(),v=(0,i().uB)(p,o(463830).A),S=(0,i().uB)(void 0,B),A=(0,i().K8)((()=>{const e=t.localStateDiffStore.state;return l===T.SettingsFilters?(e.filters.moved.length>0?1:0)+e.filters.added.length+e.filters.removed.length+e.filters.updated.length:0}),[t,l]),j=(0,n.useCallback)((()=>function(e,t,o){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_button"}),o.setState(!0)}(h,t,S)),[h,t,S]),F=(0,i().O$)(t.permissionScopesStore),I=(0,i().K8)((()=>t.isFullScreenStore.state||!c||c.state),[t,c]),Y=(0,i().O$)(S),G=(0,i().K8)((()=>_(t,l)),[t,l]),U=(0,i().K8)((()=>"collectionSettings"===t.contextType),[t]),Z=(0,i().K8)((()=>t.collectionViewBlockStore()),[t]),E=(0,o(324577).Y)(Z);if(l===T.FilterBar)return x.isPhone?F.canConfigureBlock?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m().p,{isOrange:!0,hovered:!0,style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Wy.semibold},onClick:()=>O(h,t,l),children:(0,M.jsx)(L,{})}),(0,M.jsx)(f().Ay,{popupType:x.isMobile?y().nl.SlideUp:y().nl.Popup,render:e=>(0,M.jsx)(N,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>z(h,t),buttonPopupStore:v,renderOrigin:e=>(0,M.jsx)(o(285790).A,{style:{width:32,height:32},iconStyle:{width:16},hovered:!0,icon:s()._,...e})})]}):(0,M.jsx)(m().p,{style:{flexGrow:1,justifyContent:"center",height:32,marginRight:8,fontWeight:d().Wy.semibold},hovered:!0,isGray:!0,onClick:()=>W(h,t,l),children:(0,M.jsx)(V,{})}):(0,M.jsxs)(o(145214).A,{visible:I,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},style:{display:"flex",alignItems:"center"},children:[!F.canConfigureBlock&&(0,M.jsx)(b().A,{placement:w().W.Bottom,renderTooltip:()=>(0,M.jsx)(a().sA,{defaultMessage:"Changes to filters & sorts in this view are only visible to you.",id:"database.viewSettings.filterAndSortSaveControl.myViewTooltip"}),render:e=>(0,M.jsx)("div",{...e,style:{color:g.text.secondary,fontSize:14,fontWeight:d().Wy.medium,cursor:"default",display:"flex",alignItems:"center",position:"relative"},children:(0,M.jsx)("div",{style:{marginRight:2,marginLeft:12,width:7,height:7,borderRadius:"50%",background:"dark"===g.mode?g.accentColors.orange[500]:g.accentColors.orange[300]}})})}),(0,M.jsx)(m().p,{isGray:!0,onClick:()=>W(h,t,l),style:{lineHeight:1.1,fontSize:x.isMobile?16:14},children:(0,M.jsx)(V,{})}),F.canConfigureBlock&&(0,M.jsx)(f().Ay,{popupType:h.device.isMobile?y().nl.SlideUp:y().nl.Popup,render:e=>(0,M.jsx)(N,{parent:e,collectionContextStore:t,context:l}),originGap:4,onClick:()=>z(h,t),buttonPopupStore:v,renderOrigin:e=>U&&E?(0,M.jsx)(o(59400).it,{workflowStore:E,collectionContextStore:t}):(0,M.jsx)(o(430102).A,{title:(0,M.jsx)(L,{}),color:"orange",onClick:()=>O(h,t,l),onDropdownClick:e.onClick,style:{marginLeft:6,marginRight:x.isMobile?8:void 0,fontSize:x.isMobile?16:14,...x.isMobile?{height:30}:null}})})]});if(l===T.SettingsFilters||l===T.SettingsSort){const e=l===T.SettingsFilters;return(0,M.jsxs)(M.Fragment,{children:[Y&&F.canConfigureBlock&&(x.isMobile?(0,M.jsx)(o(678553).Ay,{style:{fontSize:12,color:g.text.secondary},title:(0,M.jsx)(q,{context:l,changeCount:A})}):(0,M.jsx)("div",{style:{fontSize:12,color:g.text.secondary,paddingLeft:14,paddingRight:14,paddingTop:8,paddingBottom:8,maxWidth:220},children:(0,M.jsx)(q,{context:l,changeCount:A})})),F.canConfigureBlock&&(0,M.jsx)(k().A,{icon:o(134589).R,isOrange:!0,title:(0,M.jsx)(L,{}),onClick:()=>O(h,t,l)}),(0,M.jsx)(k().A,{icon:o(454503).arrowUTurnUpLeftIcon,isGray:!0,title:e?(0,M.jsx)(a().sA,{defaultMessage:"Reset filters",id:"database.viewSettings.filterAndSortSaveControl.resetFilters"}):(0,M.jsx)(a().sA,{defaultMessage:"Reset sorts",id:"database.viewSettings.filterAndSortSaveControl.resetSorts"}),onClick:()=>W(h,t,l)}),F.canConfigureBlock&&!Y&&(0,M.jsx)(k().A,{icon:s()._,isGray:!0,title:(0,M.jsx)(a().sA,{defaultMessage:"More options",id:"database.viewSettings.filterAndSortSaveControl.more"}),onClick:j}),F.canConfigureBlock&&Y&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k().A,{icon:o(536583).d,isGray:!0,title:(0,M.jsx)(P,{}),onClick:()=>{H(h,t,C)}}),G&&(0,M.jsx)(b().A,{placement:w().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(R,{})}),render:e=>(0,M.jsx)(k().A,{icon:o(170350).S,isGray:!0,title:(0,M.jsx)(D,{}),onClick:()=>{K(h,t,l)},...e})})]})]})}(0,o(534177).HB)(l)};function P(){return(0,M.jsx)(a().sA,{defaultMessage:"Save as new view",id:"database.filterBar.changesControl.saveAsNewView.title"})}function D(){return(0,M.jsx)(a().sA,{defaultMessage:"Merge into advanced filter",id:"database.filterBar.changesControl.mergeIntoAdvancedFilter.title"})}function V(){return(0,M.jsx)(a().sA,{defaultMessage:"Reset",id:"database.filterBar.changesControl.reset.title"})}function L(){return(0,M.jsx)(a().sA,{defaultMessage:"Save for everyone",id:"database.filterBar.changesControl.saveForEveryone.title"})}function _(e,t){const o=e.currentPropertyFiltersStore.state;return(t===T.FilterBar||t===T.SettingsFilters)&&Boolean(o.find((e=>(0,l().yX)(e.filter))))}function O(e,t,o){const n=t.collectionViewStore();n&&((0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_in_current_view"}),h().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveInCurrentViewClick",environment:e,canUndo:!0,perform:r=>{p().B$({environment:e,type:o===T.FilterBar?p().Hs.All:o===T.SettingsFilters?p().Hs.Filters:p().Hs.Sorts,collectionContextStore:t,targetCollectionViewStore:n,transaction:r})}}),p().Aq({environment:e,seen:!0}))}function H(e,t,o,n){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_save_as_new_view"}),h().createAndCommit({userAction:"CollectionSettingsSaveControl.handleSaveAsNewViewClick",environment:e,canUndo:!0,perform:n=>{p().RQ({environment:e,collectionContextStore:t,transaction:n,intl:o})}}),null==n||n.close()}function K(e,t,o,n){const r=(0,A().Pi)(t),i=t.currentPropertyFiltersStore.state.filter((e=>(0,A().vu)(e.id)));p().IU({environment:e,collectionContextStore:t,temporaryState:{...t.temporaryStateStore.state,propertyFilters:{value:i},combinatorFilter:{value:r}}});const l=o===T.FilterBar?t.filterBarCombinatorFilterSettingsStore:t.filterOptionsCombinatorFilterSettingsStore;g().R8({collectionSettingsStore:l,item:{type:"filter"}}),(0,u().X)({environment:e,collectionContextStore:t,action:"merge_filter_into_combinator"}),null==n||n.close()}function W(e,t,o,n){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_reset"});const r=t.temporaryStateStore.state,i=o===T.SettingsFilters?{...r,propertyFilters:void 0,combinatorFilter:void 0}:o===T.SettingsSort?{...r,sorts:void 0}:void 0;p().LS({environment:e,collectionContextStore:t,temporaryState:i}),p().Aq({environment:e,seen:!0}),null==n||n.close()}function z(e,t){(0,u().X)({environment:e,collectionContextStore:t,action:"click_save_control_more_options_popup"}),p().Aq({environment:e,seen:!0})}function N(e){let{parent:t,collectionContextStore:o,context:n}=e;const l=(0,a().tz)(),s=(0,r().v3)(),{device:d}=s,u=(0,r().WS)();let p;p=d.isMobile?{menuType:j().gu.ActionSheet}:{menuType:j().gu.Popup,width:250};const g=(0,i().K8)((()=>_(o,n)),[o,n]),h=c().oE([u&&{key:"reset",render:e=>(0,M.jsx)(C().A,{...e,disabled:!1,title:(0,M.jsx)(V,{})}),action:()=>{W(s,o,n,t)}},{key:"newView",render:e=>(0,M.jsx)(C().A,{...e,disabled:!1,title:(0,M.jsx)(P,{})}),action:()=>{H(s,o,l,t)}},g&&{key:"merge",render:e=>(0,M.jsx)(b().A,{placement:w().W.Left,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,M.jsx)("div",{children:(0,M.jsx)(R,{})}),render:t=>(0,M.jsx)(C().A,{...(0,F().A)(e,t),disabled:!1,title:(0,M.jsx)(D,{})})}),action:()=>{K(s,o,n,t)}}]);return(0,M.jsx)(x().A,{...p,children:(0,M.jsx)(v().Ay,{type:v().Oh.Vertical,sections:[{key:0,render:e=>(0,M.jsx)(S().A,{enableActionSheetTitle:!0,...e}),items:h}],initialFocus:0})})}function q(e){let{context:t,changeCount:o}=e;return t===T.SettingsFilters?(0,M.jsx)(a().sA,{defaultMessage:"{count, plural, one {{count} filter changed from what other people see} other {{count} filters changed from what other people see}}",id:"database.viewSettings.filterAndSortSaveControl.filter.caption",values:{count:o}}):(0,M.jsx)(a().sA,{defaultMessage:"Sort has been changed from what other people see",id:"database.viewSettings.filterAndSortSaveControl.sort.caption"})}},668766:(e,t,o)=>{o.d(t,{q:()=>i});var n=()=>o(72135),r=()=>o(508496);function i(e,t){return(0,n().$J)(e,r().default.checkGate({gateName:"localized_parse_number"})?t:void 0)}},742117:(e,t,o)=>{o.d(t,{V:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronRight",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M12.375 8.06445C12.375 7.83203 12.2861 7.63379 12.1084 7.45605L6.77637 2.24023C6.62598 2.08984 6.44141 2.01465 6.22266 2.01465C5.77832 2.01465 5.42285 2.35645 5.42285 2.80078C5.42285 3.01953 5.51172 3.21777 5.66211 3.375L10.4746 8.06445L5.66211 12.7539C5.51855 12.9043 5.42285 13.1025 5.42285 13.3213C5.42285 13.7725 5.77832 14.1143 6.22266 14.1143C6.44141 14.1143 6.62598 14.0391 6.77637 13.8887L12.1084 8.67285C12.293 8.49512 12.375 8.29688 12.375 8.06445Z"})})},831194:(e,t,o)=>{o.d(t,{RS:()=>x,OR:()=>C});o(296540);var n=()=>o(401497),r=()=>o(254947),i=()=>o(449552),l=()=>o(340498),s=o(474848);const a=(0,l().wt)("statusCompleteGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.71094 12.0781C8.00781 12.0781 8.27344 11.9219 8.44531 11.6562L11.8828 6.32031C11.9922 6.14844 12.0781 5.95312 12.0781 5.77344C12.0781 5.35156 11.7109 5.07031 11.3125 5.07031C11.0547 5.07031 10.8281 5.21094 10.6562 5.49219L7.6875 10.2578L6.29688 8.51562C6.10938 8.27344 5.91406 8.17969 5.67188 8.17969C5.25781 8.17969 4.92188 8.50781 4.92188 8.92969C4.92188 9.125 5 9.30469 5.14062 9.48438L6.94531 11.6641C7.16406 11.9375 7.40625 12.0781 7.71094 12.0781Z"})}),c=(0,l().wt)("statusInProgressGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.54688 16.5078C13.0156 16.5078 16.6953 12.8281 16.6953 8.35938C16.6953 3.89844 13.0078 0.210938 8.53906 0.210938C4.07812 0.210938 0.398438 3.89844 0.398438 8.35938C0.398438 12.8281 4.07812 16.5078 8.54688 16.5078ZM8.54688 14.7188C5.02344 14.7188 2.19531 11.8828 2.19531 8.35938C2.19531 4.83594 5.01562 2 8.53906 2C12.0703 2 14.8984 4.83594 14.9062 8.35938C14.9141 11.8828 12.0703 14.7188 8.54688 14.7188ZM7.07031 11.4531L11.5938 8.80469C11.9297 8.60938 11.9219 8.125 11.5938 7.92969L7.07031 5.27344C6.71875 5.07031 6.26562 5.24219 6.26562 5.63281V11.0938C6.26562 11.4766 6.69531 11.6719 7.07031 11.4531Z"})}),d=(0,l().wt)("statusTodoGroup",{viewBox:"0 0 17 17",svg:(0,s.jsx)("path",{d:"M8.52344 1.85156C8.97656 1.85156 9.34375 1.49219 9.34375 1.05469C9.34375 0.609375 8.97656 0.234375 8.52344 0.234375C8.08594 0.234375 7.72656 0.609375 7.72656 1.05469C7.72656 1.48438 8.09375 1.85156 8.52344 1.85156ZM10.7969 2.21875C11.2422 2.21875 11.6094 1.85156 11.6094 1.41406C11.6094 0.960938 11.2422 0.601562 10.7969 0.601562C10.3516 0.601562 9.99219 0.960938 9.99219 1.41406C9.99219 1.85156 10.3516 2.21875 10.7969 2.21875ZM6.27344 2.21875C6.71094 2.21875 7.07812 1.85156 7.07812 1.41406C7.07812 0.960938 6.71094 0.601562 6.27344 0.601562C5.82812 0.601562 5.46094 0.960938 5.46094 1.41406C5.46094 1.85156 5.82812 2.21875 6.27344 2.21875ZM12.8359 3.25781C13.2812 3.25781 13.6484 2.89844 13.6484 2.45312C13.6484 2.00781 13.2812 1.64062 12.8359 1.64062C12.3984 1.64062 12.0312 2.00781 12.0312 2.45312C12.0312 2.89062 12.3984 3.25781 12.8359 3.25781ZM4.23438 3.25781C4.67188 3.25781 5.03906 2.89062 5.03906 2.45312C5.03906 2.00781 4.67969 1.64062 4.23438 1.64062C3.78906 1.64062 3.42188 2.00781 3.42188 2.45312C3.42188 2.89844 3.78906 3.25781 4.23438 3.25781ZM14.4609 4.88281C14.9062 4.88281 15.2734 4.51562 15.2734 4.07812C15.2734 3.63281 14.9062 3.26562 14.4609 3.26562C14.0234 3.26562 13.6562 3.63281 13.6562 4.07812C13.6562 4.51562 14.0234 4.88281 14.4609 4.88281ZM2.625 4.88281C3.0625 4.88281 3.42969 4.51562 3.42969 4.07812C3.42969 3.63281 3.0625 3.26562 2.625 3.26562C2.17969 3.26562 1.8125 3.63281 1.8125 4.07812C1.8125 4.51562 2.17969 4.88281 2.625 4.88281ZM15.4922 6.90625C15.9375 6.90625 16.3047 6.54688 16.3047 6.10156C16.3047 5.65625 15.9375 5.28906 15.4922 5.28906C15.0547 5.28906 14.6875 5.65625 14.6875 6.10156C14.6875 6.53906 15.0547 6.90625 15.4922 6.90625ZM1.59375 6.90625C2.02344 6.90625 2.39062 6.53906 2.39062 6.10156C2.39062 5.65625 2.03125 5.28906 1.59375 5.28906C1.14062 5.28906 0.78125 5.65625 0.78125 6.10156C0.78125 6.54688 1.14062 6.90625 1.59375 6.90625ZM15.8828 9.17188C16.3281 9.17188 16.6953 8.80469 16.6953 8.35938C16.6953 7.92188 16.3281 7.55469 15.8828 7.55469C15.4453 7.55469 15.0781 7.92188 15.0781 8.35938C15.0781 8.80469 15.4453 9.17188 15.8828 9.17188ZM1.21094 9.17188C1.64844 9.17188 2.01562 8.80469 2.01562 8.35938C2.01562 7.92188 1.64844 7.55469 1.21094 7.55469C0.765625 7.55469 0.398438 7.92188 0.398438 8.35938C0.398438 8.80469 0.765625 9.17188 1.21094 9.17188ZM15.4922 11.4375C15.9375 11.4375 16.3047 11.0703 16.3047 10.625C16.3047 10.1797 15.9375 9.82031 15.4922 9.82031C15.0547 9.82031 14.6875 10.1875 14.6875 10.625C14.6875 11.0703 15.0547 11.4375 15.4922 11.4375ZM1.59375 11.4375C2.03125 11.4375 2.39062 11.0703 2.39062 10.625C2.39062 10.1875 2.02344 9.82031 1.59375 9.82031C1.14062 9.82031 0.78125 10.1797 0.78125 10.625C0.78125 11.0703 1.14062 11.4375 1.59375 11.4375ZM14.4609 13.4609C14.9062 13.4609 15.2734 13.0938 15.2734 12.6484C15.2734 12.2109 14.9062 11.8438 14.4609 11.8438C14.0234 11.8438 13.6562 12.2109 13.6562 12.6484C13.6562 13.0938 14.0234 13.4609 14.4609 13.4609ZM2.625 13.4609C3.0625 13.4609 3.42969 13.0938 3.42969 12.6484C3.42969 12.2109 3.0625 11.8438 2.625 11.8438C2.17969 11.8438 1.8125 12.2109 1.8125 12.6484C1.8125 13.0938 2.17969 13.4609 2.625 13.4609ZM12.8359 15.0859C13.2812 15.0859 13.6484 14.7188 13.6484 14.2734C13.6484 13.8281 13.2812 13.4688 12.8359 13.4688C12.3984 13.4688 12.0312 13.8359 12.0312 14.2734C12.0312 14.7188 12.3984 15.0859 12.8359 15.0859ZM4.23438 15.0859C4.67969 15.0859 5.03906 14.7188 5.03906 14.2734C5.03906 13.8359 4.67188 13.4688 4.23438 13.4688C3.78906 13.4688 3.42188 13.8281 3.42188 14.2734C3.42188 14.7188 3.78906 15.0859 4.23438 15.0859ZM10.7969 16.125C11.2422 16.125 11.6094 15.7656 11.6094 15.3125C11.6094 14.875 11.2422 14.5078 10.7969 14.5078C10.3516 14.5078 9.99219 14.875 9.99219 15.3125C9.99219 15.7656 10.3516 16.125 10.7969 16.125ZM6.27344 16.125C6.71094 16.125 7.07812 15.7656 7.07812 15.3125C7.07812 14.875 6.71094 14.5078 6.27344 14.5078C5.82812 14.5078 5.46094 14.875 5.46094 15.3125C5.46094 15.7656 5.82812 16.125 6.27344 16.125ZM8.52344 16.4922C8.97656 16.4922 9.34375 16.1172 9.34375 15.6719C9.34375 15.2344 8.97656 14.875 8.52344 14.875C8.09375 14.875 7.72656 15.2422 7.72656 15.6719C7.72656 16.1172 8.08594 16.4922 8.52344 16.4922Z"})});var u=()=>o(959013),p=()=>o(117293),g=()=>o(962730),h=()=>o(132389),m=()=>o(859428);const C={[r().QV]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameTodo}),[r().jc]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameInProgress}),[r().P0]:(0,s.jsx)(u().sA,{...r().oz.statusGroupNameComplete}),[r().nX]:(0,s.jsx)(u().sA,{...p().DZ.current}),[r().p7]:(0,s.jsx)(u().sA,{...p().DZ.future})},f={[r().QV]:d,[r().jc]:c,[r().P0]:a};function x(e){const{group:t,disableGroup:o,style:r,showIcon:l,showColor:a}=e,c=(0,n().DP)(),u=f[t.name]??d,p=t.color??"gray";return(0,s.jsxs)("div",{style:{...r,display:"inline-flex",alignItems:"center"},children:[l&&u({display:"inline-block",width:16,height:16,fill:a?c.accentColors[p][400]:c.mediumIconColor}),(0,s.jsx)("span",{style:{paddingLeft:l?6:void 0,color:a?c.accentColors[p][500]:void 0},children:C[t.name]??t.name}),o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h().A,{size:4}),(0,s.jsx)(m().A,{placement:g().W.Bottom,render:e=>(0,s.jsx)("div",{...e,children:(0,i().g)({width:12})}),renderTooltip:e=>(0,s.jsx)("div",{...e,children:o.tooltipCaption}),disableTooltip:void 0===o.tooltipCaption})]}):null]})}},859794:(e,t,o)=>{o.d(t,{td:()=>We,mL:()=>Oe,r9:()=>ze});o(944114),o(898992),o(354520),o(672577),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(847249),l=()=>o(401497),s=()=>o(764880),a=()=>o(289915),c=()=>o(970013),d=()=>o(713998),u=()=>o(784892),p=()=>o(597777),g=()=>o(604995),h=()=>o(416504),m=()=>o(668725),C=()=>o(30626),f=()=>o(170350),x=()=>o(236262),v=()=>o(799829),y=()=>o(179034),S=()=>o(824862),b=()=>o(869558),A=()=>o(798880),j=()=>o(931075),F=()=>o(959013),w=()=>o(778078),k=()=>o(496603),M=()=>o(534177),T=()=>o(284371),B=()=>o(615950),R=()=>o(186445),I=()=>o(873050),P=()=>o(205098),D=()=>o(682146),V=()=>o(522827),L=()=>o(722872),_=()=>o(553965),O=()=>o(668766),H=()=>o(685889),K=()=>o(388487),W=()=>o(857437),z=()=>o(106628),N=()=>o(962730),q=()=>o(756279),Y=()=>o(792415),G=()=>o(351360),U=()=>o(463830),Z=()=>o(508496),E=()=>o(970585),$=()=>o(630116),X=()=>o(251126),J=(o(737550),()=>o(29118)),Q=()=>o(854150),ee=()=>o(919709),te=()=>o(436696),oe=()=>o(175116),ne=()=>o(108944),re=()=>o(486130),ie=()=>o(448061),le=()=>o(760217),se=()=>o(625830),ae=()=>o(331542),ce=()=>o(928600),de=()=>o(939740),ue=()=>o(64e3),pe=()=>o(480095),ge=()=>o(89924),he=()=>o(881690),me=()=>o(856952),Ce=o(474848);function fe(e){const{filter:t,parentStore:o,updateValue:s,onClose:c,desktopTopActions:d,mobileMenuTitle:p,mobileMoreActions:g}=e,h=(0,r().v3)(),m=(0,oe().ET)(),[C,f]=(0,n.useState)([]),[x,v]=(0,n.useState)(!1),y=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().GK)(t):[]),[t]),S=(0,r().Y0)(),b=(0,i().K8)((()=>k().oE(y.map((e=>{if(e.value)return $().md.createChildStore(o,{table:"collection",id:e.value})})))),[y,o]),A=(0,i().K8)((()=>b.map((e=>(0,Ce.jsx)(he().A,{format:S.isMobile?u().NY.Large:u().NY.Small,value:(0,Ce.jsx)(ie().A,{collectionStore:e}),onClickRemove:()=>{const t=y.find((t=>t.value===e.id));if(t){const e=k().FF(y,t);s(e)}},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},e.id)))),[b,y,S.isMobile,s]),[j,M]=(0,n.useState)(""),T=(0,F().tz)(),B=(0,i().K8)((()=>{var e;return null===(e=G().default.state.currentUserStore)||void 0===e?void 0:e.userId}),[]),R=(0,i().K8)((()=>m.collectionStoresStore.state??[]),[m]),I=(0,i().K8)((()=>x?R:m.collectionStoreResultsInViewOrder()),[x,m,R]),P=(0,i().K8)((()=>(0,w().Ay)(j,R,(e=>ee().q4_(e.getName()??[])))),[j,R]),D=(0,i().K8)((()=>R.filter((e=>!C.some((t=>t.id===e.id))))),[R,C]),V=(0,i().uB)(void 0,E().A);(0,n.useEffect)((()=>{f((()=>""===j?k().hS([...I,...b,...C],"id"):P))}),[j,x,I,P,b]);const _=(0,l().IS)((e=>({checkboxIcon:{fill:e.regularIconColor}})),[]),O=(0,n.useCallback)(((e,t)=>{const o=Boolean(t.find((t=>"exact"===t.type&&t.value===e.id))),n=()=>{const o=k().Iy(t,[{type:"exact",value:e.id}],(e=>e.value));s(o)};return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,icon:(0,Ce.jsx)(se().A,{checked:o,size:14,onClick:n,style:_.checkboxIcon}),title:(0,Ce.jsx)(ie().A,{collectionStore:e}),isTokenTitle:!0}),action:n}}),[_.checkboxIcon,s]),H=(0,n.useCallback)((()=>({key:"hidden-items-button",render:e=>(0,Ce.jsx)(le().A,{...e,icon:(0,J().K)({width:13,height:13}),title:(0,Ce.jsx)(F().sA,{id:"collectionFilterValueMenu.locationFilterValueMenu.hiddenLocationsDescription",defaultMessage:"{numHiddenOptions, plural, one {{numHiddenOptions} other source} other {{numHiddenOptions} other sources}}",values:{numHiddenOptions:D.length}})}),action:()=>{v(!0),(0,te().X)({environment:h,collectionContextStore:m,action:"expand_property_filter",original_view_type:void 0,property_type:"location"})}})),[D.length,m,h]),K=(0,i().K8)((()=>{const e=[],t={},n=[];for(const o of C){const e=ne().Uo(o);e?B&&e.isMemberOrGuest(B,re()._.getSpacePermissionGroupIds({userId:B,spaceId:e.getSpaceId()}))&&(t[e.id]=[...t[e.id]??[],o]):n.push(o)}for(const[r,i]of Object.entries(t)){const t=$().h4.createChildStore(o,{table:Q().yK,id:r});e.push({key:r,items:i.map((e=>O(e,y))),render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e,title:(0,Ce.jsx)(Ce.Fragment,{children:t.getName()??""})})})}return n.length>0&&e.push({key:"private",items:n.map((e=>O(e,y))),render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e,title:(0,Ce.jsx)(F().sA,{id:"collectionFilterValueMenu.privateLocationSection",defaultMessage:"Private"})})}),D.length>0&&!x&&e.push({key:"hidden",items:[H()],render:e=>(0,Ce.jsx)(ge().A,{topBorder:!0,...e})}),e}),[D.length,x,C,B,o,O,y,H]),W=(0,Ce.jsx)(me().Ay,{focus:!S.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:A,placeholder:T.formatMessage({defaultMessage:"Search for one or more sources",id:"database.filterValue.locationType.searchPlaceholder"}),onRemoveLastToken:()=>{const e=y.slice(0,y.length-1);s(e)},onClearButtonClick:()=>{s([]),null==c||c()},value:j,onChange:e=>{M(e.target.value)},dontShowBorderBottom:S.isAndroid,showClearButton:!0,style:{maxHeight:"20vh",overflowY:"auto"}}),z=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!S.isMobile&&d,W]});let N;return N=S.isMobile?{menuType:L().gu.Modal,title:p,left:g,right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:c,header:z}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:z,disableHeaderBorder:!0},(0,Ce.jsx)(ce().A,{...N,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[!m&&(0,Ce.jsx)(ge().A,{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"8px 0px"},children:(0,Ce.jsx)(ae().A,{})}),m&&(0,Ce.jsxs)(Ce.Fragment,{children:[0===R.length||""!==j&&0===C.length?(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}):null,R.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:K,store:V,onAccept:()=>{M("")}})]})]})})}var xe=()=>o(378864),ve=()=>o(704152),ye=()=>o(406699),Se=()=>o(285790),be=()=>o(419357),Ae=()=>o(545805),je=()=>o(8980),Fe=()=>o(897119),we=()=>o(958378),ke=()=>o(933117),Me=()=>o(859428),Te=()=>o(448693),Be=()=>o(125565),Re=()=>o(712677),Ie=()=>o(527399),Pe=()=>o(573351),De=()=>o(427711),Ve=()=>o(320865),Le=()=>o(566081),_e=()=>o(399762);let Oe=function(e){return e[e.AdvancedFilter=0]="AdvancedFilter",e[e.PropertyFilter=1]="PropertyFilter",e}({});const He=(0,F().YK)({startingMessage:{defaultMessage:"Select or type a date...",id:"search.dateMenu.dateMessage"},chevronDownAriaLabel:{id:"filterDateMenu.chevronDownAriaLabel.ariaLabel",defaultMessage:"Dropdown to select a date relative to today"},pageContainingThisView:{defaultMessage:"Page containing this view",id:"database.filterValue.pageContainingThisView"}}),Ke=o(757695).default.createClass("",{name:"QueryStore"});function We(e){const{schema:t,propertyFilter:o,parentStore:r,onClose:l,onChange:s,onChangeDebounced:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:m,allowRelativeDateFilter:C}=e,f=(0,i().uB)(void 0,U().A),x=(0,i().uB)(void 0,U().A),v=(0,i().uB)(void 0,E().A),y=(0,i().uB)(void 0,Ke),S=(0,i().K8)((()=>{var e;return"form_editor"===(null==h||null===(e=h.collectionViewStore())||void 0===e?void 0:e.getType())}),[h]);(0,K().A)({capture:!S,preventType:q().A.Y});const b=(0,n.useCallback)((e=>{null==l||l()}),[l]);return(0,Ce.jsx)(Ae().A,{debugName:"CollectionFilterValueMenu",capture:!0,onEsc:b,children:(0,Ce.jsx)(St,{propertyFilter:o,schema:t,parentStore:r,onChange:s,onChangeDebounced:a,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:l,collectionViewId:g,collectionContextStore:h,allowRelativePersonFilter:m,allowRelativeDateFilter:C,queryStore:y,menuListStore:v,dateFilterPopupStore:x,dateRangeFilterPopupStore:f})})}function ze(e){const{query:t,propertySchema:o,selectedValues:n,updateValue:r,isMobile:i,styles:l,isFormEditorView:s}=e,a=o.options||[];return(t?(0,w().Ay)(t,a,(e=>e.value)):a).map((e=>{const t=Boolean(n.find((t=>t.value===e.value))),o={key:e.value,render:o=>(0,Ce.jsx)(le().A,{icon:(0,Ce.jsx)(se().A,{onClick:o.onClick,checked:t,size:14,style:l.checkboxIcon,disallowTabbing:!0}),title:s?e.value:(0,Ce.jsx)(_e().O,{format:i?u().NY.Large:u().NY.Medium,isSingle:!0,value:e.value,color:e.color,showRemoveButton:!1}),isTokenTitle:!0,...o}),action:()=>{const o=t?n.filter((t=>{let{value:o}=t;return o!==e.value})):[...n,{type:"exact",value:e.value}];r(o)}};return o}))}function Ne(e){return Array.isArray(e)?0===e.length?{type:"exact",value:void 0}:1===e.length?e[0]:e:e}function qe(e,t){return Boolean(e.find((e=>k().n4(e,t))))}function Ye(){return(0,Ce.jsx)(F().sA,{defaultMessage:"Me",id:"database.filterValue.personType.firstPersonPropertyValue.title"})}function Ge(e,t,o){const{filter:n}=o;(0,a().s1)(n)?null==t||t({...n,subfilter:{...n.subfilter,value:Ne(e)}}):null==t||t({...n,value:Ne(e)})}function Ue(e,t,o){const{filter:n}=o;(0,a().s1)(n)?null==t||t({...n,subfilter:e}):null==t||t(e)}function Ze(e,t,o,n,r){return()=>{Ge(e?t.filter((e=>!k().n4(e,o))):[...t,o],r,n)}}function Ee(e){let{filter:t,onChange:o,propertyFilter:n,onClose:r}=e;return(0,a().t6)(t.value)?null:(0,Ce.jsx)(ge().A,{topBorder:!0,children:(0,Ce.jsx)(le().A,{focused:!1,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Clear",id:"database.filterValue.clear.message"}),onClick:()=>{Ge({type:"exact",value:void 0},o,n),null==r||r()}})})}function $e(e){let{filter:t}=e;const o=(0,l().DP)();return(0,Ce.jsx)("span",{style:{color:o.text.tertiary},children:(0,P().J)(t.operator).toLocaleLowerCase()})}function Xe(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;const i=(0,l().DP)(),{isMobile:s}=(0,r().Y0)(),c=o.filter;if(!(0,a().gc)(c)||!(0,a().nM)(c))return(0,Ce.jsx)(Ce.Fragment,{children:t.name});const d={width:190,items:a().$N,selectedItem:(0,a().CY)(c),getKey:e=>e,onSelect:e=>{Ue({...c,use_end:(0,a().Zt)(e)},n,o)},renderItem:e=>(0,Ce.jsx)(Me().A,{renderTooltip:()=>(0,P().WG)(e.value),render:t=>(0,Ce.jsx)(le().A,{title:(0,P().h0)(e.value),...(0,_().A)(e,t)}),placement:N().W.Right,textWrap:!0,style:{width:"260px"}}),renderOrigin:e=>(0,Ce.jsx)(ve().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!s&&{color:i.text.secondary,fill:i.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().h0)((0,a().CY)(c))}),(0,m().b)({width:10,height:10,...s&&{marginTop:2}})]})})};return(0,Ce.jsx)(ke().A,{...d,mobileActionSheet:!0})}function Je(e){let{propertyFilter:t,onChange:o}=e;const n=(0,F().tz)(),i=(0,l().DP)(),{isMobile:s}=(0,r().Y0)(),{filter:c}=t;if(!(0,a().s1)(c))return null;const d={width:190,items:a().$X,getKey:e=>e,selectedItem:c.operator,onSelect:e=>{null==o||o({...c,operator:e})},renderItem:e=>(0,Ce.jsx)(le().A,{title:(0,P().wE)(e.value,n),...e}),renderOrigin:e=>(0,Ce.jsx)(ve().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!s&&{color:i.text.tertiary,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().wE)(c.operator,n).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...s&&{marginTop:2}})]})})};return(0,Ce.jsx)(ke().A,{...d,mobileActionSheet:!0})}function Qe(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:s}=e;const{isMobile:c}=(0,r().Y0)(),d=(0,l().DP)(),{property:u}=t,p=o[u],g=(0,a().s1)(t.filter)?t.filter.subfilter:t.filter,h=(0,i().K8)((()=>(0,a().HF)({schema:o,property:u,getRecordModel:n.getRecordModel})),[n,u,o]);if((0,a().s1)(g))return null;let C=(0,a().U6)(h);p&&(0,D().i5)(p)&&(C=C.filter((e=>!(0,a().tk)(e))));const f={width:190,items:C,selectedItem:g.operator,getKey:e=>e,onSelect:e=>{Ue((0,P().iI)(h,g,e,"propertyFilter"),s,t)},renderItem:e=>(0,Ce.jsx)(le().A,{title:(0,P().J)(e.value),...e}),renderOrigin:e=>(0,Ce.jsx)(ve().A,{...e,style:{marginRight:4,marginLeft:2,paddingLeft:2,paddingRight:2,borderRadius:6,flexShrink:0},children:(0,Ce.jsxs)("div",{style:{display:"flex",alignItems:"center",...!c&&{color:d.text.secondary,fill:d.lightIconColor,fontWeight:500,fontSize:12}},children:[(0,Ce.jsx)("span",{style:{marginRight:4},children:(0,P().J)(g.operator).toLocaleLowerCase()}),(0,m().b)({width:10,height:10,...c&&{marginTop:2}})]})})};return(0,Ce.jsx)(ke().A,{...f,mobileActionSheet:!0})}function et(e){let{parent:t,userCanConfigureFilters:o,onDelete:i,onAddToCombinatorFilter:l}=e;const{isMobile:s}=(0,r().Y0)(),c=s?{menuType:L().gu.ActionSheet}:{menuType:L().gu.Popup,maxHeight:a().mi},d=(0,n.useMemo)((()=>[{key:"actions",render:e=>(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,...e}),items:o?k().oE([{key:"delete",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{id:"database.filterValue.deleteFilter.title",defaultMessage:"Delete filter"}),icon:(0,Ce.jsx)(je().I,{icon:x().trashIcon}),isRedOnHover:!0}),action:()=>{t.close(),null==i||i()}},{key:"merge",render:e=>(0,Ce.jsx)(Me().A,{placement:N().W.Right,style:{maxWidth:240,whiteSpace:void 0},renderTooltip:()=>(0,Ce.jsx)("div",{children:(0,Ce.jsx)(B().Nf,{})}),render:t=>(0,Ce.jsx)(le().A,{...(0,_().A)(e,t),title:(0,Ce.jsx)(F().sA,{id:"database.filterValue.mergeIntoAdvancedFilter.title",defaultMessage:"Add to advanced filter"}),icon:(0,Ce.jsx)(je().I,{icon:f().S})})}),action:()=>{t.close(),null==l||l()}}]):[]}]),[l,i,t,o]);return(0,Ce.jsx)(ce().A,{...c,children:(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,sections:d,initialFocus:void 0})})}function tt(e){let{propertySchema:t,propertyFilter:o,onChange:n}=e;return(0,a().qK)(t)?(0,Ce.jsx)(Xe,{propertyFilter:o,onChange:n,propertySchema:t}):(0,Ce.jsx)(Ce.Fragment,{children:t.name})}function ot(e){let{userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}=e;const i=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),s=(0,F().tz)();return(0,Ce.jsx)(ye().Ay,{popupType:i.device.isMobile?Fe().nl.SlideUp:Fe().nl.Popup,render:e=>(0,Ce.jsx)(et,{parent:e,userCanConfigureFilters:t,onDelete:o,onAddToCombinatorFilter:n}),renderOrigin:e=>t&&(0,Ce.jsx)(Se().A,{ariaLabel:s.formatMessage({id:"database.filterValue.dotsIcon.ariaLabel",defaultMessage:"More actions"}),icon:C()._,style:{...!l&&{height:20,width:20}},...e}),style:{width:240},originGap:2,placementToOrigin:ye().sx.Right,alignmentToOrigin:ye().yP.Start})}function nt(e){let{propertyFilter:t,onChange:o,schema:n,parentStore:r,userCanConfigureFilters:i,onDelete:s,onAddToCombinatorFilter:c,context:d}=e;const u=(0,l().DP)();if(d!==Oe.PropertyFilter)return null;const{property:p}=t,g=n[p];return g?(0,Ce.jsxs)("div",{style:{display:"flex",color:u.text.tertiary,fontSize:12,alignItems:"flex-start",paddingTop:4,paddingRight:8,paddingBottom:2,paddingLeft:8},children:[(0,Ce.jsx)("span",{style:{flexShrink:1,...T().RC},children:(0,Ce.jsx)(tt,{propertyFilter:t,onChange:o,propertySchema:g})}),(0,a().s1)(t.filter)&&(0,Ce.jsx)(Je,{propertyFilter:t,onChange:o}),(0,Ce.jsx)(Qe,{propertyFilter:t,schema:n,parentStore:r,onChange:o}),(0,Ce.jsx)("div",{style:{flexGrow:1}}),(0,Ce.jsx)(ot,{userCanConfigureFilters:i,onDelete:s,onAddToCombinatorFilter:c})]}):null}function rt(e){let{propertyFilter:t,schema:o,context:n,onChange:r,parentStore:i}=e;const{property:l}=t,s=o[l];return s?n===Oe.PropertyFilter?(0,Ce.jsxs)("div",{style:{display:"flex"},children:[(0,Ce.jsx)("span",{style:{fontWeight:T().Wy.medium,flexShrink:1,marginLeft:8,maxWidth:150,...T().RC},children:(0,Ce.jsx)(tt,{propertyFilter:t,onChange:r,propertySchema:s})}),(0,a().s1)(t.filter)&&(0,Ce.jsx)(Je,{propertyFilter:t,onChange:r}),(0,Ce.jsx)(Qe,{propertyFilter:t,schema:o,parentStore:i,onChange:r})]}):(0,Ce.jsx)(Ce.Fragment,{children:s.name}):null}function it(e){let{context:t,userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r}=e;return t!==Oe.PropertyFilter?null:(0,Ce.jsx)(ot,{userCanConfigureFilters:o,onDelete:n,onAddToCombinatorFilter:r})}function lt(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,F().tz)(),{device:m}=g,C=(0,Ce.jsx)(be().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,a().gc)(t)&&t.value.value?t.value.value:"",onChange:e=>{Ge({type:"exact",value:e.target.value},o,n)},onClearButtonClick:()=>{Ge({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.textType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),f=(0,Ce.jsxs)(ge().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,a().gc)(t)&&C]});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,Ce.jsx)(it,{context:u,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,header:f},(0,Ce.jsx)(ce().A,{...x})}function st(e){let{filter:t,onChange:o,propertyFilter:n,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u,onClose:p}=e;const g=(0,r().v3)(),h=(0,F().tz)(),{device:m}=g,C=(0,Ce.jsx)(be().Ay,{focus:!0,focusInitial:!0,focusAfterAnimation:!0,value:(0,a().gc)(t)&&"number"==typeof t.value.value?t.value.value.toString():"",inputLeft:(0,Ce.jsx)($e,{filter:t}),onChange:e=>{Ge({type:"exact",value:(0,O().q)(e.target.value,h)},o,n)},onClearButtonClick:()=>{Ge({type:"exact",value:void 0},o,n)},placeholder:h.formatMessage({defaultMessage:"Type a value…",id:"database.filterValue.numberType.searchPlaceholder"}),showClearButton:!0,style:{paddingBottom:8}}),f=(0,Ce.jsxs)(ge().A,{disableMobileBorders:!0,disableMobilePadding:!0,children:[!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:o,schema:i,parentStore:l,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d,context:u}),(0,a().gc)(t)&&C]});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:u,onChange:o,parentStore:l}),left:(0,Ce.jsx)(it,{context:u,userCanConfigureFilters:s,onDelete:c,onAddToCombinatorFilter:d}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,header:f},(0,Ce.jsx)(ce().A,{...x})}function at(e,t,o){t.setState(e),o.setState({focus:{section:0,indexLocal:0,indexGlobal:0,footerFocused:!1}})}function ct(e){let{filter:t,schema:o,propertyFilter:s,parentStore:p,onChange:g,onClose:h,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f,context:x,queryStore:v,menuListStore:y,collectionContextStore:S}=e;const b=(0,F().tz)(),A=(0,l().DP)(),{isMobile:j,isAndroid:w}=(0,r().Y0)(),M=(0,i().O$)(v),T=(0,i().K8)((()=>(0,I().YF)(o,s,p)),[o,s,p]),[B,R]=(0,W().$)(),P=(0,i().K8)((()=>{const e=null==S?void 0:S.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[S]),{items:D,tokenizedInput:V}=(0,n.useMemo)((()=>{if(!T||!(0,c().lx)(T))return{items:[],tokenizedInput:null};const e=T.options||[],o=(0,a().gc)(t)?(0,a().v0)(t)?(0,a().Zl)(t):(0,a().SM)(t):[],n=o.map((t=>{if(void 0===t.value)return null;const n=(0,d().jy)(e,t.value);return n?(0,Ce.jsx)(_e().O,{format:j?u().NY.Large:u().NY.Small,isSingle:!0,value:n.value,color:n.color,showRemoveButton:!0,onClickRemove:()=>{Ge(k().FF(o,t),g,s)}},n.id):null})),r=(0,Ce.jsx)("div",{style:{...!j&&{paddingTop:0,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,Ce.jsx)(me().Ay,{focus:!j||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:P?[]:n,placeholder:b.formatMessage({defaultMessage:"Select one or more options…",id:"database.filterValue.selectType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(o.slice(0,o.length-1),g,s)},onClearButtonClick:()=>{Ge([],g,s),null==h||h()},value:M,onChange:e=>{at(e.target.value,v,y)},dontShowBorderBottom:w,showClearButton:!0,tokenWrapStyle:{paddingTop:2,gap:4},...B})});return{items:ze({query:M,propertySchema:T,selectedValues:o,updateValue:e=>{Ge(e,g,s)},isMobile:j,styles:{checkboxIcon:{fill:A.regularIconColor,pointerEvents:"none"}},isFormEditorView:P}),tokenizedInput:r}}),[T,t,j,P,b,M,w,B,A.regularIconColor,g,s,h,v,y]);if(!T||!(0,c().lx)(T))return null;const _=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0,marginTop:P?8:0},children:[!j&&!P&&(0,Ce.jsx)(nt,{propertyFilter:s,onChange:g,schema:o,parentStore:p,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f,context:x}),(0,a().gc)(t)&&V]}),O=j?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:s,schema:o,context:x,onChange:g,parentStore:p}),left:(0,Ce.jsx)(it,{context:x,userCanConfigureFilters:m,onDelete:C,onAddToCombinatorFilter:f}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:h,header:_}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:_,disableHeaderBorder:!0,tokenInputHeader:!0};return(0,Ce.jsx)(ce().A,{...O,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[0===D.length&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.selectType.noResults.message"})})}),D.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:D}],store:y,onAccept:()=>{at("",v,y)},comboboxProps:R})]})})}function dt(e){let{filter:t,error:o,results:l,schema:c,propertyFilter:d,parentStore:p,onChange:g,allowRelativePersonFilter:h,onClose:m,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:v,queryStore:y,menuListStore:b}=e;const j=(0,r().v3)(),w=(0,F().tz)(),{device:M}=j,T=(0,i().O$)(y),B=(0,i().K8)((()=>(0,I().YF)(c,d,p)),[c,d,p]),[R,P]=(0,W().$)(),D=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().Wf)(t):[]),[t]),V=(0,i().K8)((()=>k().oE(D.map(((e,t)=>{if("exact"===e.type&&e.value){const t=(0,s().xC)({pointer:e.value,getRecordValue:p.getRecordValue});return(0,Ce.jsx)(Te().Ay,{actor:t,format:M.isMobile?Te().Ay.Format.Large:Te().Ay.Format.Small,showRemoveButton:!0,onClickRemove:()=>{Ge(k().FF(D,e),g,d)},shouldShrink:!0,isSingle:!1},e.value.id)}if("relative"===e.type&&"me"===e.value&&h)return(0,Ce.jsx)(he().A,{format:M.isMobile?u().NY.Large:u().NY.Small,value:(0,Ce.jsx)(Ye,{}),onClickRemove:()=>{Ge(k().FF(D,e),g,d)},showRemoveButton:!0,isSingle:!1,shouldShrink:!0,backgroundColor:"transparent",showTooltip:"overflow"},t)})))),[h,D,M.isMobile,g,p.getRecordValue,d]);if(!B)return null;const _=(0,Ce.jsx)("div",{style:{...!M.isMobile&&{paddingTop:4,paddingRight:8,paddingBottom:8,paddingLeft:8}},children:(0,Ce.jsx)(me().Ay,{focus:!M.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:V,placeholder:w.formatMessage({defaultMessage:"Search for one or more people…",id:"database.filterValue.personType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(D.slice(0,D.length-1),g,d)},onClearButtonClick:()=>{Ge([],g,d),null==m||m()},value:T,onChange:e=>{at(e.target.value,y,b)},dontShowBorderBottom:M.isAndroid,showClearButton:!0,...R})}),O=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!M.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:d,onChange:g,schema:c,parentStore:p,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:v}),(0,a().gc)(t)&&_]});let H;H=M.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:d,schema:c,context:v,onChange:g,parentStore:p}),left:(0,Ce.jsx)(it,{context:v,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:m,header:O}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:O,disableHeaderBorder:!0};const K=k().oE((l&&l.users||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Te().t_,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Te().t_.Format.Large:Te().t_.Format.Medium,userValue:e,showRemoveButton:!1}),isTokenTitle:!0,isChecked:l}),action:()=>{Ge(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:A().oo,id:e.id}}],r,o)}}}(e,D,d,j,g)))),z=["created_by","last_edited_by"].includes(B.type)?k().oE((l&&l.bots||[]).map((e=>function(e,t,o,n,r){const{device:i}=n,l=Boolean(t.find((t=>{var o;return"exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id})));return{key:e.id,render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Te().v7,{isSingle:!0,shouldShrink:!0,format:i.isMobile?Te().v7.Format.Large:Te().v7.Format.Medium,botValue:e,showRemoveButton:!1}),isTokenTitle:!0,isChecked:l}),action:()=>{Ge(l?t.filter((t=>{var o;return!("exact"===t.type&&(null===(o=t.value)||void 0===o?void 0:o.id)===e.id)})):[...t,{type:"exact",value:{table:S().GP,id:e.id}}],r,o)}}}(e,D,d,j,g)))):[];if(h&&l&&(!T||"me".includes(T))){const e=Boolean(D.find((e=>"relative"===e.type&&"me"===e.value)));K.unshift({key:"me",render:t=>(0,Ce.jsx)(le().A,{...t,title:(0,Ce.jsx)(Ye,{}),isChecked:e,style:M.isMobile?void 0:{fontSize:14}}),action:()=>{Ge(e?D.filter((e=>{let{value:t}=e;return"me"!==t})):[...D,{type:"relative",value:"me"}],g,d)}})}const N=[];return K.length>0&&N.push({key:"user property",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:K}),z.length>0&&N.push({key:"bot property",render:e=>(0,Ce.jsx)(ge().A,{...e,title:"Pick a bot"}),items:z}),(0,Ce.jsx)(ce().A,{...H,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.personType.searchPersonPropertyMenuItem.errorMessage"})})}),0===N.length&&l&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.personType.noResults.message"})})}),!l&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(Ve().A,{})}),N.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:N,store:b,onAccept:()=>{at("",y,b)},comboboxProps:P})]})})}function ut(e){var t;let{filter:o,context:n,propertyFilter:l,schema:s,onChange:c,parentStore:d,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,onClose:h,menuListStore:m,collectionContextStore:C}=e;const f=(0,r().v3)(),{device:x}=f,v=(0,i().K8)((()=>{const e=null==C?void 0:C.collectionViewStore();return"form_editor"===(null==e?void 0:e.getType())}),[C]);let y;y=x.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:l,schema:s,context:n,onChange:c,parentStore:d}),left:(0,Ce.jsx)(it,{context:n,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:h}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,footer:(0,Ce.jsx)(Ee,{onChange:c,propertyFilter:l,onClose:h,filter:o})};const S=null===(t=o.value)||void 0===t?void 0:t.value;return(0,Ce.jsxs)(ce().A,{...y,children:[n===Oe.PropertyFilter&&(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,children:!x.isMobile&&!v&&(0,Ce.jsx)(nt,{propertyFilter:l,onChange:c,schema:s,parentStore:d,userCanConfigureFilters:u,onDelete:p,onAddToCombinatorFilter:g,context:n})}),(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{style:n===Oe.PropertyFilter?{paddingTop:0}:void 0,...e}),items:[{key:"unchecked",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Unchecked",id:"database.filterValue.checkboxType.unchecked.title"}),isTokenTitle:!0,isChecked:!1===S}),action:()=>{Ge({type:"exact",value:!1},c,l)}},{key:"checked",render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{defaultMessage:"Checked",id:"database.filterValue.checkboxType.checked.title"}),isTokenTitle:!0,isChecked:!0===S}),action:()=>{Ge({type:"exact",value:!0},c,l)}}]}],store:m,onAccept:h,captureKeyboardOnlyWhenFocused:!0}),x.isMobile&&(0,Ce.jsx)(Ee,{onChange:c,propertyFilter:l,onClose:h,filter:o})]})}function pt(e){let{filter:t,error:o,results:s,schema:d,propertyFilter:p,parentStore:g,onChange:h,onClose:m,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:S,collectionViewId:A,queryStore:j,menuListStore:w,allowCurrentPageInRelatedCollectionFilter:T}=e;const B=(0,r().v3)(),R=(0,F().tz)(),{device:P}=B,D=(0,i().O$)(j),_=(0,i().K8)((()=>(0,I().YF)(d,p,g)),[d,p,g]),O=(0,i().K8)((()=>function(e,t){if(!e)return;const o=$().pS.createChildStore(t,{table:b().Gy,id:e}).getParentBlockStore();return o?o.getNearestAncestorTemplateStore():void 0}(A,g)),[A,g]),K=(0,i().K8)((()=>null==O?void 0:O.getAssociatedCollectionId()),[O]),z=(0,n.useMemo)((()=>(0,a().gc)(t)?(0,a().Rh)(t):[]),[t]),N=(0,i().K8)((()=>{const e=(0,I().YF)(d,p,g);return e&&(0,c().nC)(e)?{appConfigUri:(0,H().LQ)(e,g),schema:(0,H().D3)(e,B)}:{}}),[d,p,g,B]),q=(0,i().K8)((()=>function(e,t,o,n,r){const{appConfigUri:i,schema:l}=n;if(!l)return[];if(!i||!(0,V().KN)(l,i))return[];const s=(0,v().qk)(l,i),a=v().n$[i];return k().oE(s.map((n=>{if(!e||n.includes(e)){const e={type:"relative",value:{type:"builtin",variable:n}},i=qe(t,e);return{key:n,render:e=>(0,Ce.jsx)(le().A,{...e,title:(0,Ce.jsx)(F().sA,{...a[n].messageDescriptor}),isChecked:i}),action:Ze(i,t,e,o,r)}}})))}(D,z,p,N,h)),[D,z,p,N,h]),Y=(0,i().K8)((()=>T?function(e,t,o,n,r){const i=e.formatMessage(He.pageContainingThisView);if(!t||i.toLowerCase().includes(t)){const e={type:"relative",value:{type:"current_page_in_related_collection"}},t=qe(o,e);return{key:e.value.type,render:e=>(0,Ce.jsx)(le().A,{...e,title:i,isChecked:t}),action:Ze(t,o,e,n,r)}}}(R,D,z,p,h):void 0),[R,D,z,p,h,T]),[G,U]=(0,W().$)(),Z=(0,l().IS)((()=>({tokenWrapStyle:{paddingTop:2,gap:"5px 3px"},tokenStyle:{margin:0},inputStyle:{maxHeight:"20vh",overflowY:"auto"}})),[]);if(!_||!(0,c().nC)(_))return null;const E=(0,c().zO)(_);if(!E)return null;const X=k().oE(z.map(((e,t)=>{if(!e.value)return null;const o={format:P.isMobile?u().NY.Large:u().NY.Small,shouldWrap:!1,showRemoveButton:!0,isSingle:!1,shouldShrink:!0,onClickRemove:()=>{Ge(k().FF(z,e),h,p)},style:Z.tokenStyle},n=e.type;if("exact"===n)return(0,Ce.jsx)(Le().A,{blockId:e.value,parentStore:g,...o},e.value);if("relative"===n){var r;const{appConfigUri:n}=N;return"current_page_in_related_collection"===e.value.type?(0,Ce.jsx)(he().A,{value:R.formatMessage(He.pageContainingThisView),backgroundColor:"transparent",showTooltip:"overflow",...o},t):n&&"builtin"===e.value.type?(0,Ce.jsx)(he().A,{value:(0,Ce.jsx)(F().sA,{...null===(r=v().n$[n])||void 0===r||null===(r=r[e.value.variable])||void 0===r?void 0:r.messageDescriptor}),backgroundColor:"transparent",showTooltip:"overflow",...o},t):null}(0,M().HB)(n)}))),J=(0,Ce.jsx)(me().Ay,{focus:!P.isMobile||void 0,focusAfterAnimation:!0,format:me().le.FilterValue,tokens:X,placeholder:R.formatMessage({defaultMessage:"Search for one or more pages…",id:"database.filterValue.relationType.searchPlaceholder"}),onRemoveLastToken:()=>{Ge(z.slice(0,z.length-1),h,p)},onClearButtonClick:()=>{Ge([],h,p),null==m||m()},value:D,onChange:e=>{at(e.target.value,j,w)},dontShowBorderBottom:P.isAndroid,style:Z.inputStyle,tokenWrapStyle:Z.tokenWrapStyle,showClearButton:!0,...G}),Q=(0,Ce.jsxs)(ge().A,{desktopStyle:{paddingBottom:0},children:[!P.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:p,onChange:h,schema:d,parentStore:g,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x,context:S}),(0,a().gc)(t)&&J]});let ee;ee=P.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:p,schema:d,context:S,onChange:h,parentStore:g}),left:(0,Ce.jsx)(it,{context:S,userCanConfigureFilters:C,onDelete:f,onAddToCombinatorFilter:x}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:m,header:Q}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:Q,disableHeaderBorder:!0},s&&!D&&O&&E&&K===E&&(s=k().sb([O.id,...s]));let te=[];if(s){const e=function(e,t,o,n,r){return e.map((e=>{const i={type:"exact",value:e},l=qe(t,i),s=$().Bv.createChildStore(o,{table:y().ev,id:e});return{key:e,action:Ze(l,t,i,n,r),render:e=>(0,Ce.jsx)(we().A,{store:s,isChecked:l,hidePath:!0,...e})}}))}(s,z,g,p,h);te=((0,a().s1)(p.filter)?[]:q).concat(e),Y&&(te=[Y,...te])}return(0,Ce.jsx)(ce().A,{...ee,children:(0,a().gc)(t)&&(0,Ce.jsxs)(Ce.Fragment,{children:[o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"Something went wrong.",id:"database.filterValue.relationType.searchRelationPropertyMenuItem.errorMessage"})})}),0===te.length&&s&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(ue().A,{title:(0,Ce.jsx)(F().sA,{defaultMessage:"No results",id:"database.filterValue.relationType.noResults.message"})})}),!s&&!o&&(0,Ce.jsx)(ge().A,{children:(0,Ce.jsx)(Ve().A,{})}),te.length>0&&(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"results",render:e=>(0,Ce.jsx)(ge().A,{...e}),items:te}],store:w,onAccept:()=>{at("",j,w)},comboboxProps:U})]})})}function gt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:r,onChange:l,allowRelativeDateFilter:s,dateRangeFilterPopupStore:c}=e;const d=(0,i().K8)((()=>(0,I().YF)(o,n,r)),[o,n,r]);if(!d)return null;let u;if((0,a().Cw)(t)&&"exact"===t.value.type&&t.value.value){const e=t.value.value;u={starting:e.start_date?{type:"date",start_date:e.start_date}:void 0,ending:e.end_date?{type:"date",start_date:e.end_date}:void 0}}else u=(0,a().Cw)(t)&&"relative"===t.value.type?t.value:{starting:void 0,ending:void 0};const p={disableMenuWrap:!0,title:d.name,value:u,onUpdate:e=>{var o,r;if(e.error)return null;const i={...u,...e.value},s=null===(o=i.starting)||void 0===o?void 0:o.start_date,a=null===(r=i.ending)||void 0===r?void 0:r.start_date;Ue({operator:"date_is_within",use_end:"use_end"in t?null==t?void 0:t.use_end:void 0,value:{type:"exact",value:s||a?{type:"daterange",start_date:s,end_date:a}:void 0}},l,n)},allowRelativeRangeFilter:s,relativeRangePopupStore:c,onUpdateRelativeFilter:e=>{Ue({...t,value:e},l,n)}};return(0,Ce.jsx)(De().A,{...p})}function ht(e){let{filter:t,events:o,onChange:n,propertyFilter:i,allowRelativeDateFilter:s,dateFilterPopupStore:a}=e;const c=(0,l().DP)(),d=(0,r().v3)(),u=(0,F().tz)();return(0,Ce.jsx)(Re().A,{...o,placeholder:u.formatMessage(He.startingMessage),focused:"exact"===t.value.type,value:t.value,onUpdate:e=>{var o;if(e.error)return null;const r=null===(o=e.value)||void 0===o?void 0:o.start_date;Ue({...t,value:{type:"exact",value:r?{type:"date",start_date:r}:void 0}},n,i)},inputRight:s&&(0,Ce.jsx)(Se().A,{icon:m().b,iconStyle:{width:12,height:12},ariaLabel:u.formatMessage(He.chevronDownAriaLabel),style:{...!d.device.isMobile&&{height:20,width:20},color:c.mediumIconColor},onClick:()=>{a.setState({open:!0})}}),hideClearButton:"relative"===t.value.type||void 0,isRightLastElementOfInput:!0})}function mt(e){let{filter:t,context:o,onChange:n,propertyFilter:i,schema:s,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,onClose:g,menuListStore:h}=e;const m=(0,l().DP)(),C=(0,r().v3)(),{device:f}=C,x=(0,a().gc)(t)?(0,a().ms)(t):[],v=x.map((e=>{let{value:t}=e;return t})),y=j().FG.map((e=>{const t=v.includes(e);return{key:e,render:o=>(0,Ce.jsx)(le().A,{icon:(0,Ce.jsx)(se().A,{checked:t,size:14,style:{fill:m.regularIconColor,pointerEvents:"none"},disallowTabbing:!0}),title:(0,P().w0)({type:"exact",value:e}),...o}),action:()=>{if(t)Ge(x.filter((t=>{let{value:o}=t;return o!==e})),n,i);else{const t={type:"exact",value:e};Ge([...x,t],n,i)}}}}));let S;return S=f.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:i,schema:s,context:o,onChange:n,parentStore:c}),left:(0,Ce.jsx)(it,{context:o,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:g}:{menuType:L().gu.Popup,maxHeight:a().mi,width:220,footer:(0,Ce.jsx)(Ee,{onChange:n,propertyFilter:i,onClose:g,filter:t})},(0,Ce.jsxs)(ce().A,{...S,children:[o===Oe.PropertyFilter&&(0,Ce.jsx)(ge().A,{disableMobilePadding:!0,children:!f.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:i,onChange:n,schema:s,parentStore:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:o})}),(0,Ce.jsx)(de().Ay,{type:de().Oh.Vertical,initialFocus:0,sections:[{key:"select",render:e=>(0,Ce.jsx)(ge().A,{style:{paddingTop:0},...e}),items:y}],store:h})]})}function Ct(e){let{filter:t,parentStore:o,schema:n,propertyFilter:l,onChange:s,allowRelativePersonFilter:a,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:m}=e;const C=(0,r().v3)(),f=(0,F().tz)(),x=(0,i().O$)(h);return(0,Ce.jsx)(X().A,{request:x,performRequest:e=>async function(e,t,o,n){const r=await z().T.searchActions.load();let{users:i,bots:l}=await r.searchSpaceActors({environment:o,query:e,membersOnly:!1,userLocale:n,shouldUseEdgeCacheForFeatureGate:Z().default.checkGate({gateName:"edge_cache_person_property"}),limit:20});return i=i.slice(0,20),l=l.slice(0,20),await Promise.all([...i.map((async e=>{let{id:o}=e;const n=(0,$().Oo)(t,{table:A().oo,id:o});await n.load()})),...l.map((async e=>{const o=(0,$().Oo)(t,{table:S().GP,id:e.id,spaceId:e.space_id});await o.load()}))]),{users:i,bots:l}}(e,o,C,f.locale),render:(e,r)=>(0,Ce.jsx)(dt,{schema:n,propertyFilter:l,parentStore:o,onChange:s,allowRelativePersonFilter:a,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,queryStore:h,menuListStore:m,filter:t,error:e,results:r})})}function ft(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:a,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:m,menuListStore:C,allowCurrentPageInRelatedCollectionFilter:f}=e;const x=(0,r().v3)(),v=(0,i().O$)(m),S=(0,i().O$)(G().AppStoreCurrentSpaceStore),b=(0,i().K8)((()=>Y().A.state.publicPageData),[]),A=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]),j=(null==S?void 0:S.id)||(null==b?void 0:b.spaceId);if(!A||!(0,c().nC)(A)||!j)return null;const F=(0,c().zO)(A);return F?(0,Ce.jsx)(X().A,{request:{query:v,spaceId:j,collectionId:F},performRequest:e=>async function(e,t,o){const{query:n,spaceId:r,collectionId:i}=e;if(!r||!i)return[];const l=await z().T.searchActions.load(),{results:s}=await l.searchPagesInCollection({environment:o,query:n,collectionId:i,limit:20,spaceId:r,excludeTemplates:!0,source:"relation_menu",includePublicPagesWithoutExplicitAccess:!0,boostRecentlyViewedPages:!1});return 0===s.length?[]:(await Promise.all(s.map((async e=>{const o=(0,$().Oo)(t,{table:y().ev,id:e});await o.load()}))),s)}(e,l,x),render:(e,r)=>(0,Ce.jsx)(pt,{schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:a,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g,collectionViewId:h,queryStore:m,menuListStore:C,filter:t,error:e,results:r,allowCurrentPageInRelatedCollectionFilter:f})}):null}function xt(e){let{filter:t,onChange:o,propertyFilter:n,allowRelativeDateFilter:r,dateFilterPopupStore:l}=e;const s=(0,i().O$)(R().XX);if(!(0,a().gc)(t))return null;const c="exact"===t.value.type?t.value.value:(0,g().fN)(t.value);return c&&!(0,p().$P)(c)?null:(0,Ce.jsxs)(Ce.Fragment,{children:[(0,Ce.jsx)(ge().A,{disableMobileBorders:!0,children:(0,Ce.jsx)(Pe().A,{firstDayOfWeek:s,selectValue:void 0!==c,value:c?g().C6.notionDateToLuxon(c).toMillis():Date.now(),onChange:e=>{Ge({type:"exact",value:(0,g().p6)(e,(0,h().P)())},o,n)}})}),"relative"===t.value.type&&(0,Ce.jsx)(ge().A,{topBorder:!0,children:(0,Ce.jsx)(Be().A,{isSmall:!0,style:{marginLeft:4,marginTop:4},children:(0,Ce.jsx)(F().sA,{id:"collectionFilterMenu.dateFilter.relativeDateFilter.description",defaultMessage:"Filter will update with the current date"})})})]})}function vt(e){let{filter:t,context:o,propertyFilter:n,schema:i,onChange:l,parentStore:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,onClose:p,allowRelativeDateFilter:g,dateFilterPopupStore:h,dateRangeFilterPopupStore:m}=e;const C=(0,r().v3)(),{device:f}=C;let x;return x=f.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:i,context:o,onChange:l,parentStore:s}),left:(0,Ce.jsx)(it,{context:o,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:p}:{menuType:L().gu.Popup,maxHeight:a().mi},(0,Ce.jsxs)(ce().A,{...x,children:[(0,Ce.jsxs)(ge().A,{disableMobilePadding:!0,disableMobileBorders:!0,isInput:o!==Oe.PropertyFilter,children:[!f.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:l,schema:i,parentStore:s,userCanConfigureFilters:c,onDelete:d,onAddToCombinatorFilter:u,context:o}),(0,a().gc)(t)&&!(0,a().Cw)(t)&&(0,Ce.jsx)(Ie().A,{type:"date",filterValue:t.value,onUpdate:e=>{Ue({...t,value:e},l,n)},renderOrigin:e=>(0,Ce.jsx)(ht,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t,events:e}),disabled:"exact"===t.value.type&&g,buttonPopupStore:h})]}),(0,a().gc)(t)&&((0,a().Cw)(t)?(0,Ce.jsx)(gt,{schema:i,propertyFilter:n,parentStore:s,onChange:l,allowRelativeDateFilter:g,dateRangeFilterPopupStore:m,filter:t}):(0,Ce.jsx)(xt,{onChange:l,propertyFilter:n,allowRelativeDateFilter:g,dateFilterPopupStore:h,filter:t}))]})}function yt(e){let{filter:t,schema:o,propertyFilter:n,parentStore:l,onChange:s,onClose:c,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g}=e;const h=(0,r().v3)(),{device:m}=h,C=(0,i().K8)((()=>(0,I().YF)(o,n,l)),[o,n,l]);if(!C||"file"!==C.type)return null;const f=(0,Ce.jsx)(ge().A,{desktopStyle:{paddingBottom:0},children:!m.isMobile&&(0,Ce.jsx)(nt,{propertyFilter:n,onChange:s,schema:o,parentStore:l,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p,context:g})});let x;return x=m.isMobile?{menuType:L().gu.Modal,title:(0,Ce.jsx)(rt,{propertyFilter:n,schema:o,context:g,onChange:s,parentStore:l}),left:(0,Ce.jsx)(it,{context:g,userCanConfigureFilters:d,onDelete:u,onAddToCombinatorFilter:p}),right:(0,Ce.jsx)(pe().DoneMenuText,{}),onClickRight:c,header:f}:{menuType:L().gu.Popup,maxHeight:a().mi,width:260,header:f,disableHeaderBorder:!0,tokenInputHeader:!0},(0,Ce.jsx)(ce().A,{...x})}function St(e){let{propertyFilter:t,schema:o,parentStore:n,onChange:r,onChangeDebounced:l,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,collectionViewId:h,collectionContextStore:m,allowRelativePersonFilter:C,allowRelativeDateFilter:f,queryStore:x,menuListStore:v,dateFilterPopupStore:y,dateRangeFilterPopupStore:S}=e;const{property:b,filter:A}=t,j=(0,i().K8)((()=>(0,a().HF)({schema:o,property:b,getRecordModel:n.getRecordModel})),[n,b,o]),F=o[b],w=(0,i().K8)((()=>!(!m||!F)&&function(e){var t;let{collectionContextStore:o,propertySchema:n}=e;if(void 0===o.viewsModuleContextStore.state)return!1;const r=null===(t=o.viewsModuleContextStore.getCurrentPageCollectionStore())||void 0===t?void 0:t.id;return!!r&&(0,c().nC)(n)&&n.collection_id===r}({collectionContextStore:m,propertySchema:F})),[m,F]),k=(0,a().s1)(A)?A.subfilter:A;return"text"===j?(0,a().YH)(k)?(0,Ce.jsx)(lt,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:k}):null:"relation"===j?(0,a().Pq)(k)?(0,Ce.jsx)(ft,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,collectionViewId:h,queryStore:x,menuListStore:v,filter:k,allowCurrentPageInRelatedCollectionFilter:w}):null:"checkbox"===j?(0,a().Ui)(k)?(0,Ce.jsx)(ut,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,menuListStore:v,filter:k,collectionContextStore:m}):null:"select"===j||"multi_select"===j?(0,a().v0)(k)||(0,a().as)(k)?(0,Ce.jsx)(ct,{schema:o,propertyFilter:t,parentStore:n,onChange:r,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:v,filter:k,collectionContextStore:m}):null:"status"===j?(0,a().H$)(k)?(0,Ce.jsx)(xe().A,{propertyFilter:t,schema:o,filter:k,parentStore:n,updateValue:e=>Ge(e,r,t),onClose:g,desktopTopActions:(0,Ce.jsx)(nt,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,Ce.jsx)(rt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,Ce.jsx)(it,{context:p,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u}),collectionContextStore:m}):null:"person"===j?(0,a().I_)(k)?(0,Ce.jsx)(Ct,{parentStore:n,schema:o,propertyFilter:t,onChange:r,allowRelativePersonFilter:C,onClose:g,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,queryStore:x,menuListStore:v,filter:k}):null:"number"===j?(0,a().My)(k)?(0,Ce.jsx)(st,{onChange:l,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:k}):null:"date"===j?(0,a().nM)(k)?(0,Ce.jsx)(vt,{context:p,propertyFilter:t,schema:o,onChange:r,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,allowRelativeDateFilter:f,dateFilterPopupStore:y,dateRangeFilterPopupStore:S,filter:k}):null:"file"===j?(0,a().B6)(k)?(0,Ce.jsx)(yt,{onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p,onClose:g,filter:k}):null:"location"===j?(0,a().G)(k)?(0,Ce.jsx)(fe,{filter:k,parentStore:n,updateValue:e=>Ge(e,r,t),onClose:g,desktopTopActions:(0,Ce.jsx)(nt,{propertyFilter:t,onChange:r,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,context:p}),mobileMenuTitle:(0,Ce.jsx)(rt,{propertyFilter:t,schema:o,context:p,onChange:r,parentStore:n}),mobileMoreActions:(0,Ce.jsx)(it,{context:p,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u})}):null:"verification"===j?(0,a().uU)(k)?(0,Ce.jsx)(mt,{context:p,onChange:r,propertyFilter:t,schema:o,parentStore:n,userCanConfigureFilters:s,onDelete:d,onAddToCombinatorFilter:u,onClose:g,menuListStore:v,filter:k}):null:"geo_point"===j?null:void(0,M().HB)(j)}},914701:(e,t,o)=>{o.d(t,{E:()=>i});var n=()=>o(763884),r=()=>o(540022);function i(e){const t=(0,r().N)(e.collectionViewId);n().K.set({userId:e.userId,key:t,value:e.isOpen})}},933117:(e,t,o)=>{o.d(t,{A:()=>g});o(944114),o(898992),o(803949),o(581454);var n=o(296540),r=()=>o(484714),i=()=>o(496603),l=()=>o(722872),s=()=>o(406699),a=()=>o(928600),c=()=>o(939740),d=()=>o(480095),u=()=>o(89924),p=o(474848);const g=function(e){let{renderOrigin:t,onClick:n,items:i,getKey:l,renderItem:a,selectedItem:c,onSelect:d,dontCloseParentOnSelect:u,mobileActionSheet:g,menuTitle:h,width:C,minWidth:f,disabled:x,originGap:v,buttonPopupStore:y,sameWidthAsOrigin:S}=e;const b=(0,r().v3)(),A=(0,o(847249).uB)(y,o(463830).A),{device:j}=b,F=(0,o(963589).X)("db_ux_mobile");return(0,p.jsx)(s().Ay,{popupType:j.isMobile?F?s().z7.BottomSheet:s().z7.SlideUp:s().z7.Popup,bottomSheetInitialState:"half",renderOrigin:t,buttonPopupStore:A,placementToOrigin:o(700250).UV.Bottom,onClick:n,render:e=>(0,p.jsx)(m,{parent:e,items:i,getKey:l,renderItem:a,selectedItem:c,onSelect:d,dontCloseParentOnSelect:u,mobileActionSheet:g,menuTitle:h,width:C,minWidth:f}),disabled:x,originGap:v,sameWidthAsOrigin:S})};function h(e,t,o,r,i,l,s,a){return{key:0,render:e=>(0,n.createElement)(u().A,{...e,key:t,topBorder:t>0}),items:e.map((e=>({key:r(e),render:t=>i({...t,value:e,key:r(e),selectedItem:l}),action:()=>{!function(e,t,o){t!==e&&o(e)}(e,l,s),a||o.close()}})))}}function m(e){let{parent:t,items:o,getKey:n,renderItem:s,selectedItem:u,onSelect:g,dontCloseParentOnSelect:m,mobileActionSheet:C,menuTitle:f,width:x,minWidth:v}=e;const y=(0,r().v3)(),{device:S}=y,b=[];if(function(e){return e.length>0&&e[0]instanceof Array}(o))o.forEach(((e,o)=>{const r=h(e,o,t,n,s,u,g,m);b.push(r)}));else{const e=h(o,0,t,n,s,u,g,m);b.push(e)}const A=(0,p.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:i().SL(i().Bq(o),(e=>i().n4(e,u))),sections:b});let j;return j=S.isMobile?C?{menuType:l().gu.ActionSheet}:{menuType:l().gu.Modal,title:f,right:(0,p.jsx)(d().DoneMenuText,{}),onClickRight:t.close}:{menuType:l().gu.Popup,width:x||160,minWidth:v},(0,p.jsx)(a().A,{...j,children:A})}}}]);