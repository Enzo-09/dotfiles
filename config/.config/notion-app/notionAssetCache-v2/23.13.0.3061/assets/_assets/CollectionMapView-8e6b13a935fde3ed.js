"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[51680],{19537:(e,t,n)=>{n.r(t),n.d(t,{CollectionMapView:()=>V});n(898992),n(581454),n(908872);var i=()=>n(912433),o=n.n(n(916443)),a=n(296540),r=()=>n(484714),s=()=>n(847249),l=()=>n(584262),c=()=>n(585849),d=()=>n(519839),p=()=>n(492414),u=()=>n(79043),m=()=>n(962730),v=()=>n(351360),_=()=>n(758740),f=()=>n(859428),b=()=>n(473594),g=()=>n(42425),C=()=>n(970330),y=()=>n(612008),h=()=>n(857783),x=()=>n(281948),w=()=>n(319975),S=()=>n(751156),M=()=>n(357643),A=()=>n(476492),I=()=>n(611371);function j(e){const{environment:t,geoPoint:n,collectionContextStore:i,query:o,schema:a,isFullScreen:r,store:s}=e,p="map_add_item";S().createAndCommit({userAction:"CollectionMapView.handleClick",environment:t,canUndo:!0,perform:e=>{const u=function(e){const{environment:t,transaction:n,geoPoint:i,query:o,isFullScreen:a,groupFormat:r,collectionContextStore:s,from:p}=e;if(!(0,I().EF)(t))return;const u=r?[r]:[],m=s.groupsStore.getGroupState(u);if(!m)return;s.searchQueryStore.state&&(0,M().S)({searchQuery:"",collectionContextStore:s,isFullScreen:a});const v=(0,y().Q)({environment:t,collectionContextStore:s,groupsPointer:u,shouldCoerce:!0,templateStore:s.defaultPageTemplateStore.state,transaction:n,from:{createBlock:p},inMemoryRecordCache:t.defaultRecordCache.inMemoryRecordCache});if(!v)return;const _=v.newStore;(function(e){const{environment:t,store:n,query:i,geoPoint:o,transaction:a}=e,{map_by:r}=i;if(!r)return;const s=n.getAssociatedCollectionStore(),l=(null==s?void 0:s.getMappedProperty(r))??r;w().R9({environment:t,store:n.getPropertyStore(l),value:(0,c().n)(o),transaction:a})})({environment:t,store:_,query:o,geoPoint:i,transaction:n}),t.device.isMobile?h().uK({environment:t,store:_,pageVisitSource:l().y8.Create}):x().VU({environment:t,store:_,peekMode:(0,d().hH)(s),resultsStore:null==m?void 0:m.resultsStore,collectionContextStore:s,pageVisitSource:l().y8.Create});return _}({environment:t,transaction:e,store:s,query:o,schema:a,geoPoint:n,isFullScreen:r,groupFormat:void 0,collectionContextStore:i,from:p});C().v(t,{from:p,type:"page",new_page_id:null==u?void 0:u.id,creating_block_id:null==u?void 0:u.id,...(0,A().sl)(i)})}})}var k=()=>n(128336),P=()=>n(124056),T=n(474848);function V(e){const{collectionContextStore:t,query:n,paddingLeft:i,paddingRight:l,format:d,renderGroupResults:p,schema:m,store:v}=e,_=(0,r().v3)(),f=(0,u().A)(!0),b=(0,a.useRef)(null),g=(0,s().K8)((()=>{var e;const i=(null==t||null===(e=t.groupsStore.getGroupState([]))||void 0===e?void 0:e.resultsStore.state)||[],o=n.map_by;return o?i.map((e=>{const t=o?e.getProperties()[o]:void 0;return(0,c().w)(t)})):[]}),[t,n.map_by]);(0,a.useEffect)((()=>{const e=g.reduce((function(e,t){return t?e.extend(t):e}),new(o().LngLatBounds));var t;e.isEmpty()||(null===(t=b.current)||void 0===t||t.getMap().fitBounds(e))}));const C=(0,a.useCallback)((e=>{const i={lat:e.lngLat.lat,lon:e.lngLat.lng};j({environment:_,geoPoint:i,collectionContextStore:t,query:n,schema:m,isFullScreen:t.isFullScreenStore.state,store:v})}),[_,t,n,m,v]);return(0,T.jsx)("div",{style:{paddingLeft:i,paddingRight:l,height:400},...f,children:(0,T.jsx)(P().S,{ref:b,initialViewState:{longitude:-100,latitude:40,zoom:3.5},onClick:C,style:{width:"100%",height:"100%",display:"flex"},children:p({disabled:!1,canDrag:!1,canDrop:!1,collectionContextStore:t,format:d,groupsPointer:[],shouldShowHoverMenu:!1,resultProps:{mapByProperty:n.map_by,disabled:!1,environment:_,collectionContextStore:t},resultComponent:B,emptyDroppableSize:0,analyticsName:"map"})})})}function B(e){const{mapByProperty:t,store:n,handleOpenPeekPage:o,environment:u,collectionContextStore:C}=e,y=(0,r().Y0)().isMobile,{geoPoint:h,title:x,url:w,peekUrl:S}=(0,s().K8)((()=>{const e=t?n.getProperties()[t]:void 0,i=n.getProperties().title,o=v().default.state.mainEditorCurrentBlockStore;return{geoPoint:(0,c().w)(e),title:i,url:(0,p().J8)({store:n,fullyQualified:!1,pageVisitSource:l().y8.LinkInPage}),peekUrl:(0,d().wy)({environment:u,store:n,mainEditorCurrentBlockStore:o,collectionContextStore:C,fullyQualified:!1})}}),[t,n,u,C]),M=(0,a.useCallback)((e=>(0,T.jsx)(b().yf,{store:n,events:e})),[n]);return h?(0,T.jsx)(i().pH,{longitude:h.lon,latitude:h.lat,anchor:"bottom",children:(0,T.jsx)(f().A,{originGap:6,alignment:g().C1.Center,placement:m().W.Top,renderTooltip:M,closeDelay:0,noStyle:!0,textWrap:!0,render:e=>(0,T.jsx)(_().A,{...e,style:{cursor:"pointer"},onClick:e=>{o(),e.stopPropagation()},href:w,metaHref:y?w:S,children:(0,T.jsx)(k().s,{})})})},null==x?void 0:x.toString()):null}},90907:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,lockIcon:()=>a});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,i.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},a=(0,n(340498).wt)("lock",o)},124056:(e,t,n)=>{n.d(t,{S:()=>a});var i=n(296540),o=n(474848);const a=i.forwardRef((function(e,t){const i="dark"===(0,n(401497).eP)();return(0,o.jsx)(n(912433).T5,{ref:t,mapStyle:i?"https://tiles.openfreemap.org/styles/dark":"https://tiles.openfreemap.org/styles/liberty",...e})}))},128336:(e,t,n)=>{n.d(t,{s:()=>a});n(296540);var i=()=>n(401497),o=n(474848);function a(){const e=(0,i().IS)((e=>({markerWrapper:{filter:"drop-shadow(0px 1px 6px rgba(0,0,0,0.35))"}})),[]);return(0,o.jsx)("svg",{style:e.markerWrapper,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"26",viewBox:"0 0 20 26",fill:"none",children:(0,o.jsx)("path",{d:"M10 1C14.9706 1 19 5.02944 19 10C19 12.3789 17.4727 14.8818 15.3408 17.5752C14.2851 18.909 13.1605 20.1965 12.0576 21.5293C11.3314 22.4069 10.6256 23.2945 10 24.1807C9.37437 23.2945 8.66859 22.4069 7.94238 21.5293C6.83952 20.1965 5.71493 18.909 4.65918 17.5752C2.52725 14.8818 1 12.3789 1 10C1 5.02944 5.02944 1 10 1Z",fill:"#2383E2",stroke:"white",strokeWidth:"2"})})}},192421:(e,t,n)=>{n.d(t,{F:()=>c});n(296540);var i=()=>n(484714),o=()=>n(433847),a=()=>n(959013),r=()=>n(583690),s=()=>n(678553),l=n(474848);function c(e){const{role:t}=e,n=(0,a().tz)(),{device:c}=(0,i().v3)(),d=(0,r().I2)(t);return(0,l.jsx)(s().Ay,{...e,title:n.formatMessage((0,o().sK)(t,void 0).label),shouldWrapCaption:!0,style:c.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:d})})}},200582:(e,t,n)=>{n.d(t,{m:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},o=(0,n(340498).wt)("lightning",i)},212727:(e,t,n)=>{n.r(t),n.d(t,{gearIcon:()=>a,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,i.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},a=(0,n(340498).wt)("gear",o)},250202:(e,t,n)=>{n.d(t,{G:()=>s,e:()=>r});var i=n(296540),o=()=>n(401497),a=n(474848);let r=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const s=i.forwardRef((function(e,t){const{propertySchema:i,format:s,locked:l}=e,{name:c,type:d,icon:p}=i,u=(0,n(963589).X)("nds_default_property_noticon"),{isMobile:m}=(0,n(484714).Y0)(),v=(0,o().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),_=(0,o().DP)(),f=s===r.Name?c:n(682146).dC[d];return(0,a.jsx)(n(760217).A,{title:f,icon:(0,a.jsx)(n(743176).zB,{icon:p,type:d,size:m?18:16,theme:_,style:v.propertyIcon,isDefaultNoticonEnabled:u}),disabled:l,...e})}))},328347:(e,t,n)=>{n.d(t,{h:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("globe2",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M8 15.126C11.8623 15.126 15.0615 11.9336 15.0615 8.06445C15.0615 4.20215 11.8623 1.00293 7.99316 1.00293C4.13086 1.00293 0.938477 4.20215 0.938477 8.06445C0.938477 11.9336 4.1377 15.126 8 15.126ZM3.88477 3.76465C4.56836 3.11523 5.39551 2.61621 6.31836 2.34277C5.83301 2.82812 5.42285 3.51172 5.11523 4.3457C4.63672 4.19531 4.22656 3.99707 3.88477 3.76465ZM9.68848 2.34961C10.6045 2.62305 11.4316 3.11523 12.1084 3.76465C11.7734 4.00391 11.3633 4.19531 10.8848 4.35254C10.5771 3.51172 10.167 2.82812 9.68848 2.34961ZM8.47852 2.56836C9.0459 2.8418 9.56543 3.58008 9.93457 4.58496C9.4834 4.66699 8.99805 4.71484 8.47852 4.73535V2.56836ZM6.06543 4.58496C6.44141 3.58008 6.9541 2.8418 7.52148 2.56836V4.73535C7.00195 4.71484 6.5166 4.66699 6.06543 4.58496ZM2.05273 7.58594C2.14844 6.42383 2.58594 5.35059 3.25586 4.46875C3.67285 4.77637 4.21289 5.04297 4.8418 5.24121C4.66406 5.95215 4.54785 6.74512 4.51367 7.58594H2.05273ZM11.4863 7.58594C11.4521 6.74512 11.3359 5.95215 11.1582 5.24121C11.7871 5.04297 12.3271 4.7832 12.7373 4.46875C13.4141 5.35059 13.8516 6.42383 13.9473 7.58594H11.4863ZM5.49121 7.58594C5.52539 6.84082 5.62793 6.12988 5.78516 5.4873C6.33203 5.59668 6.91309 5.66504 7.52148 5.69238V7.58594H5.49121ZM8.47852 7.58594V5.69238C9.08691 5.66504 9.66797 5.59668 10.2148 5.4873C10.3721 6.12988 10.4746 6.84082 10.5088 7.58594H8.47852ZM2.05273 8.54297H4.51367C4.54785 9.39746 4.66406 10.1973 4.8418 10.915C4.21973 11.1133 3.68652 11.373 3.27637 11.6807C2.59277 10.792 2.14844 9.71191 2.05273 8.54297ZM5.49121 8.54297H7.52148V10.4707C6.91992 10.498 6.33203 10.5664 5.79199 10.6689C5.62793 10.0195 5.51855 9.29492 5.49121 8.54297ZM8.47852 10.4707V8.54297H10.5088C10.4814 9.29492 10.3721 10.0195 10.208 10.6689C9.66797 10.5664 9.08691 10.498 8.47852 10.4707ZM11.1582 10.915C11.3428 10.1973 11.4521 9.39746 11.4863 8.54297H13.9473C13.8516 9.71191 13.4072 10.792 12.7236 11.6807C12.3135 11.373 11.7803 11.1133 11.1582 10.915ZM8.47852 11.4277C8.99121 11.4482 9.47656 11.4961 9.9209 11.5781C9.55176 12.5625 9.03906 13.2939 8.47852 13.5605V11.4277ZM6.0791 11.5781C6.52344 11.4961 7.00879 11.4482 7.52148 11.4277V13.5605C6.96094 13.2939 6.44824 12.5625 6.0791 11.5781ZM3.90527 12.3848C4.24023 12.1523 4.65039 11.9609 5.12207 11.8105C5.42969 12.6309 5.83301 13.3008 6.30469 13.7793C5.40234 13.5059 4.58203 13.0205 3.90527 12.3848ZM10.8779 11.8105C11.3496 11.9609 11.7598 12.1523 12.0947 12.3848C11.418 13.0205 10.5977 13.5059 9.69531 13.7793C10.167 13.3008 10.5703 12.6309 10.8779 11.8105Z"})})},424139:(e,t,n)=>{n.r(t),n.d(t,{emojiFaceIcon:()=>a,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,i.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},a=(0,n(340498).wt)("emojiFace",o)},519143:(e,t,n)=>{n.d(t,{D:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.814-5.587.625.625 0 1 1-.851.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},o=(0,n(340498).wt)("arrowCircleLoop",i)},583690:(e,t,n)=>{n.d(t,{AC:()=>p,I2:()=>c,YC:()=>d});n(296540);var i=()=>n(401497),o=()=>n(212050),a=()=>n(413267),r=()=>n(959013),s=n(474848);function l(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:o}=e,a=(0,i().IS)((e=>({container:{color:t?e.text.secondary:e.text.tertiary}})),[t]);return(0,s.jsxs)("div",{style:a.container,children:[u(t)," ",t?n:o]})}function c(e){const t="none"!==e;return[(0,s.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,s.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,s.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,s.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,s.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function d(e){return[(0,s.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,s.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function p(e){return[(0,s.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,s.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,s.jsx)(r().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function u(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,a().b)(t):(0,o().u)(t)}},609316:(e,t,n)=>{n.d(t,{V:()=>i});const i=(0,n(583835).Dv)("importFile")},751109:(e,t,n)=>{n.d(t,{z:()=>o});n(296540);var i=n(474848);const o=(0,n(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,i.jsxs)("g",{children:[(0,i.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,i.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,i.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,i.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,i.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,i.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,i.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,i.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},777092:(e,t,n)=>{n.d(t,{JQ:()=>d,d5:()=>p,vt:()=>c});var i=()=>n(764880),o=()=>n(310442),a=()=>n(824862),r=()=>n(798880),s=()=>n(534177),l=()=>n(630116);function c(e){const{parentStore:t,pointer:n}=e,o=(0,l().Oo)(t,n).getValue();if(o)return(0,i().D3)({table:n.table,value:o})}function d(e){const{parentStore:t,pointer:n}=e;return n.table===a().GP?l().vK.createChildStore(t,n):n.table===r().oo?l().LU.createChildStore(t,n):n.table===o().yj?l().pH.createChildStore(t,n):void(0,s().HB)(n)}function p(e){return e.table===a().GP?(0,i().oC)(e.getValue()):e.table===r().oo?(0,i().MR)(e.getValue()):e.table===o().yj?(0,i().w2)(e.getValue()):void(0,s().HB)(e)}},820579:(e,t,n)=>{n.d(t,{f:()=>o});n(296540);const i={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},o=(0,n(340498).wt)("arrowLineDown",i)},898563:(e,t,n)=>{n.d(t,{C6:()=>b,Eu:()=>p,FY:()=>s,MP:()=>_,YT:()=>d,d2:()=>f,fK:()=>g,lL:()=>c,mH:()=>C,oI:()=>l,sD:()=>m,tr:()=>u,yS:()=>v});var i=()=>n(989423),o=()=>n(680074),a=()=>n(508496),r=()=>n(10984);function s(e){i().vd(e,"add_slack_integration")}function l(e){i().vd(e,"remove_slack_integration")}function c(e,t){i().vd(e,"slack_notification_create",t)}function d(e,t){i().vd(e,"slack_notification_delete",t)}function p(e,t){i().vd(e,"slack_notification_update",t)}function u(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function m(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function v(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function _(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:a,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function f(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id})}function b(e,t){const n=r().AI(),a=o().FX();i().vd(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function g(e,t){const n=r().AI(),s=o().FX();i().vd(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),a().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function C(e,t){const n=r().AI(),s=o().FX();i().vd(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),a().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:n,domain_type:s,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},908928:(e,t,n)=>{n.d(t,{GO:()=>V,Ju:()=>T,KA:()=>P,L0:()=>F,L2:()=>Z,dA:()=>B,gI:()=>k,iN:()=>H,oG:()=>E,sK:()=>D});n(898992),n(354520),n(803949);var i=()=>n(386164),o=()=>n(433847),a=()=>n(68263),r=()=>n(388821),s=()=>n(179034),l=()=>n(824862),c=()=>n(161479),d=()=>n(96689),p=()=>n(798880),u=()=>n(763824),m=()=>n(534177),v=()=>n(901389),_=()=>n(855801),f=()=>n(594794),b=()=>n(972435),g=()=>n(731320),C=()=>n(630116),y=()=>n(449506),h=()=>n(496414),x=()=>n(579627),w=()=>n(246826),S=()=>n(436572),M=()=>n(751156),A=()=>n(633457);const I=(0,n(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function j(e,t){const{environment:n,spaceStore:i,spaceRole:o}=t,a=function(e){const{name:t,spaceStore:n,userId:i,icon:o,type:a,environment:r}=e,s=Date.now(),c={name:t,created_at:s,created_by_table:p().oo,created_by_id:i,alive:!0,icon:o,space_id:n.id,last_edited_at:s,last_edited_by_id:i,last_edited_by_table:p().oo};switch(a){case"guest":return{...c,type:"guest",capabilities:e.capabilities,parent_table:d().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...c,id:(0,f().Z1)({environment:r,table:l().GP,spaceId:n.id}),type:"scim",parent_table:p().oo,parent_id:i};default:(0,m().HB)(a)}}(t),r=w().eC({environment:n,table:l().GP,value:a,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return x().dy({environment:n,spaceStore:i,permissionItems:[{type:"bot_permission",role:o,bot_id:r.id}],transaction:e}),{botStore:r}}function k(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:i}}=M().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>j(t,e)});return{botStore:i,transactionPromise:n}}async function P(e){const{environment:t,botId:n,onSuccess:i}=e,o=await y().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===o.type?v().Qg(o):"success"===o.type&&i&&(await A().oX({environment:t}),i())}async function T(e){const{environment:t,table:n,id:o,type:a}=e,r=await y().callApi({eventName:"getBots",environment:t,data:{table:n,id:o,type:a},headers:(0,i().WS)({spaceId:n===d().NX?o:void 0})});if("failed"===r.type)throw v().Qg(r),r;return{botIds:r.data.botIds,recordMap:r.data.recordMap}}async function V(e){const{environment:t,currentSpaceStore:n,botIds:i}=e;if(!n)return;const o=await y().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:i}});if("failed"!==o.type)return o.data;v().Qg(o)}async function B(e){const{environment:t,botId:n}=e,i=await y().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==i.type)return i.data.token;v().Qg(i)}function D(e){const{botValue:t,store:n,environment:i}=e,{id:a,parent_id:r,parent_table:s,capabilities:l}=t,c={type:"bot_permission",bot_id:a,parent_id:r,parent_table:s,role:(0,o().MD)(l)};M().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:i,canUndo:!0,perform:e=>{x().zP({environment:i,store:n,permissionItems:[c],transaction:e})}})}function E(e){const{botId:t,store:n,environment:i}=e,o=n.getPermissionItems().filter((0,m().u0)((e=>(0,a().P3)(e)?{true:e}:{false:e})));for(const a of o)if(a.bot_id===t){const e={...a,role:"none"};M().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:i,canUndo:!0,perform:t=>{x().zP({environment:i,store:n,permissionItems:[e],transaction:t})}})}}function F(e){const{currentSpaceStore:t,environment:n,pages:i,botStore:o,addPermission:a}=e;if(!t)return;const r=(0,g().Ws)({botStore:o,addPermission:a});i.forEach((e=>{const i=C().sk.createChildStore(t,{table:s().ev,id:e,spaceId:t.getSpaceId()});M().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{x().zP({environment:n,store:i,permissionItems:[r],transaction:e})}})}))}async function H(e){const{environment:t,spaceStore:n,botStore:i,pageIdAndOperations:o,concurrency:a=20}=e;0!==o.length&&await(0,u().lX)(o,a,(async e=>{const o=C().sk.createChildStore(n,{table:s().ev,id:e.pageId,spaceId:n.getSpaceId()}),a=(0,g().Ws)({botStore:i,addPermission:"add"===e.operationType}),{serverCommitResult:r}=M().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{x().zP({environment:t,store:o,permissionItems:[a],transaction:e})}});await r}))}async function Z(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:a,botValue:s,pages:d}=e;if(!n)return;const p=C().sk.createChildStore(n,{table:l().GP,id:s.id});if(a)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:o,templatePageId:a,botStore:s}=e;if(!n||!o)return;try{h().m({message:I.duplicatingTemplate});const e=await y().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:a,spaceId:(0,c().e)(void 0)},shallow:!1},headers:(0,i().WS)({recordId:a})});if("failed"===e.type)return;const l=r().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:d}=await(0,_().nd)(),{performResult:p}=M().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const i=d({environment:t,recordMap:l,copyPageId:a,isPrivate:!0,spaceStore:n,spaceViewStore:o,transaction:e,allowCopyExternalObjectInstances:!1}),r=o.getPrivatePageIds();r.length>0&&w().zv({store:o,data:{private_pages:[i.id,...r]},transaction:e});const c=(0,g().Ws)({botStore:s,addPermission:!0});return x().zP({environment:t,store:i,permissionItems:[c],transaction:e}),i}});return p}catch(l){S().D6({label:b().A.formatMessage(I.duplicatingTemplateError)})}finally{h().V()}}({environment:t,templatePageId:a,botStore:p,spaceStore:n,spaceViewStore:o});F({environment:t,currentSpaceStore:n,botStore:p,pages:d,addPermission:!0})}},973238:(e,t,n)=>{n.r(t),n.d(t,{arrowInCircleDownIcon:()=>a,iconDefinition:()=>o});n(296540);var i=n(474848);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,i.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},a=(0,n(340498).wt)("arrowInCircleDown",o)}}]);