"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[77905],{6027:(e,t,i)=>{i.d(t,{F:()=>Z});var o=()=>i(662303),n=()=>i(825237),s=()=>i(945778),r=()=>i(142748),a=()=>i(919709),l=()=>i(751735),d=()=>i(496603),c=()=>i(284371),u=()=>i(780054),g=()=>i(972435),p=()=>i(108944),h=()=>i(613735),m=()=>i(337567),f=()=>i(896628),S=()=>i(751156),x=()=>i(892632);const y=630,C=1200,b=(0,i(100622).O4)({theme:"light"}),v=240,j="white",A=200,w=96,k=150,B=184,I=100,_=145,R=23,T=347,M=24,L=100,E=100,P=100,H="black",W=96,D=68,z=b.text.tertiary,K=40,U=(0,i(959013).YK)({builtWithNotion:{id:"socialMediaPreview.madeWithNotion",defaultMessage:"Made with Notion"}}),F='"Apple Color Emoji","Segoe UI Emoji",NotoColorEmoji,"Noto Color Emoji","Segoe UI Symbol","Android Emoji",EmojiSymbols';function N(e){return new Promise(((t,i)=>{const o=new Image;o.onload=()=>t(o),o.onerror=i,o.crossOrigin="anonymous",o.src=e}))}function V(e,t){return`${c().Wy.bold} ${t}px ${c().xf({pageFont:e,locale:o().locale})}`}function O(e){const t=c().Wy.medium,i=c().xf({pageFont:e,locale:o().locale});return`${t} ${K}px ${i}`}function Y(e){let{context:t,text:i,font:o,color:n,x:s,y:r}=e;t.font=o,t.textAlign="left",t.textBaseline="top",t.fillStyle=n,t.fillText(i,s,r)}async function Z(e){var t;let{store:i,environment:o}=e;if(i.pathIsDead()||!(0,r().ot)(p().E(i))||(0,m().dL)(i)||i.inMemoryRecordCache.recordHasOverride({pointer:i.pointer,userId:o.currentUser.id}))return;const c=a().q4_(i.getTitleValue())||"",K=null===(t=i.getIcon())||void 0===t?void 0:t.icon,Z=function(e,t){var i;const o=null===(i=t.getCover())||void 0===i?void 0:i.cover;if(o)return n().wY({url:o,width:C,permissionRecord:t.pointer,stripGoogleIconQuery:!0,baseUrl:u().A.domainBaseUrl,fullyQualified:!1,userId:e.currentUser.id})}(o,i),$=i.getFormat(),G=new OffscreenCanvas(C,y),q=G.getContext("2d"),[Q,X]=function(e,t){const i=document.createElement("div");i.style.width="auto",i.style.position="absolute",i.style.whiteSpace="nowrap",i.style.font=V(t,W),i.style.top="110vh",i.innerText=e;const o=C-L-E,n=document.body;if(n.appendChild(i),i.clientWidth<o)return n.removeChild(i),[e,W];if(i.style.font=V(t,D),i.clientWidth<o)return n.removeChild(i),[e,D];let s=e;for(;i.clientWidth>o;)s=s.substring(0,s.length-1),i.innerText=`${s}…`;return n.removeChild(i),[`${s}…`,D]}(c,$.page_font),J=V($.page_font,X),ee=T+(K?R:0),te=ee+M+X;if(q){!function(e){e.fillStyle=j,e.fillRect(0,0,C,y)}(q),await async function(e){let{context:t,coverImageUrl:i,icon:o,coverPosition:n=.5}=e;if(i){const e=await N(i),o=e.width*(v/C),s=((0,d().Et)(n)?1-n:.5)*(e.height-o);t.drawImage(e,0,s,e.width,o,0,0,C,v)}else{const e=(0,h().b)({icon:o,theme:b}),i=e?(0,l().X4)(e,.1):b.home.cards.coverPhoto.base;t.fillStyle=i,t.fillRect(0,0,C,v),t.fillStyle="rgb(0,0,0,1)"}}({context:q,coverImageUrl:Z,icon:K,coverPosition:$.page_cover_position}),await async function(e){let{context:t,store:i,icon:o}=e;if(o)if((0,s().A)(o))t.font=`${A}px ${F}`,t.textAlign="left",t.textBaseline="top",t.fillText(o,w,k);else{const e=n().wY({url:o,baseUrl:u().A.domainBaseUrl,fullyQualified:!0,permissionRecord:i.pointer,width:B,userId:void 0}),s=await N(e);t.drawImage(s,I,_,B,B)}}({context:q,store:i,icon:K}),Y({context:q,text:Q,font:J,color:H,x:L,y:ee}),Y({context:q,text:g().A.formatMessage(U.builtWithNotion),font:O($.page_font),color:z,x:P,y:te});const e=await G.convertToBlob();!function(e){let{store:t,file:i,environment:o}=e;x().QM({environment:o,file:i,bucket:"secure",record:t.pointer,isFileBlock:!1,onComplete:e=>{S().createAndCommit({userAction:"SocialMediaPreviewImageUploadStore.updateSocialMediaPreviewImage",environment:o,canUndo:!1,perform:i=>{f().lm({store:t,url:e,transaction:i})}})},retryWhenOffline:!0})}({store:i,environment:o,file:new File([e],"SocialMediaPreviewImage.png",{type:"image/png"})})}}},77279:(e,t,i)=>{i.r(t),i.d(t,{default:()=>n});class o extends(()=>i(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const n=new o},79275:(e,t,i)=>{i.d(t,{X:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("newSidebarHome",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.1416 3.77299C10.0563 3.71434 9.94368 3.71434 9.85837 3.77299L3.60837 8.06989C3.54053 8.11653 3.5 8.19357 3.5 8.2759V14.2499C3.5 14.9402 4.05964 15.4999 4.75 15.4999H7.5L7.5 10.7499C7.5 10.0595 8.05964 9.49987 8.75 9.49987H11.25C11.9404 9.49987 12.5 10.0595 12.5 10.7499L12.5 15.4999H15.25C15.9404 15.4999 16.5 14.9402 16.5 14.2499V8.2759C16.5 8.19357 16.4595 8.11653 16.3916 8.06989L10.1416 3.77299ZM9.00857 2.53693C9.60576 2.12636 10.3942 2.12636 10.9914 2.53693L17.2414 6.83383C17.7163 7.1603 18 7.69963 18 8.2759V14.2499C18 15.7687 16.7688 16.9999 15.25 16.9999H12.25C11.5596 16.9999 11 16.4402 11 15.7499L11 10.9999H9L9 15.7499C9 16.4402 8.44036 16.9999 7.75 16.9999H4.75C3.23122 16.9999 2 15.7687 2 14.2499V8.2759C2 7.69963 2.2837 7.1603 2.75857 6.83383L9.00857 2.53693Z"})})},115552:(e,t,i)=>{i.d(t,{A:()=>d});i(581454),i(296540);var o=()=>i(401497),n=()=>i(284371),s=()=>i(115512),r=()=>i(704152),a=i(474848);const l={tall:80,short:50};function d(e){const{disabled:t,options:i,selectedOption:d,onOptionSelected:c,height:u}=e,g=(0,o().IS)((e=>({cardContainer:{paddingLeft:8,paddingRight:8,display:"flex",justifyContent:"space-between",alignItems:"center",columnGap:8},cardUnselected:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,flexBasis:82,minWidth:0,color:e.accentColors.gray[500]},cardSelected:{display:"flex",flexDirection:"column",alignItems:"center",flexGrow:1,flexBasis:82,minWidth:0,color:e.accentColors.gray[500]},cardButtonBase:{height:l[u],width:"100%",borderRadius:6,borderStyle:"solid",transition:"border-color 0.3s, box-shadow 0.3s",display:"flex",justifyContent:"center",alignItems:"center",color:t?e.icon.tertiary:void 0,background:e.surface.elevated},cardButtonHovered:{background:e.surface.elevated,...(0,s().nl)({width:2,color:e.stroke.uiBlueSecondary})},cardButtonSelected:(0,s().nl)({width:2,color:e.blueColor}),cardButtonUnselected:(0,s().nl)({width:1,color:"dark"===e.mode?e.accentColors.gray[400]:e.accentColors.gray[100]}),cardLabelBase:{...n().RC,marginTop:6,fontSize:12,lineHeight:"14px",maxWidth:"100%",color:t?e.icon.tertiary:void 0},cardLabelSelected:{fontWeight:n().Wy.semibold,color:e.accentColors.gray[900]},iconBase:{height:24,width:24,color:t?void 0:e.icon.secondary},iconSelected:{color:e.blueColor,fill:e.blueColor},imageBase:{maxHeight:l[u],opacity:t?.5:1},imageSelected:{opacity:1}})),[t,u]),p=i.available.map((e=>{const o=i.appearance[e],n=e===d;return(0,a.jsxs)("div",{style:n?g.cardSelected:g.cardUnselected,children:[(0,a.jsx)(r().A,{style:{...g.cardButtonBase,...n?g.cardButtonSelected:g.cardButtonUnselected},hoveredStyle:g.cardButtonHovered,pressedStyle:g.cardButtonHovered,ignoreLocalHoverState:n,disabled:t,onClick:()=>{c(e)},children:o.icon?o.icon.function({...g.iconBase,height:o.icon.size,width:o.icon.size,...n?g.iconSelected:{}}):(0,a.jsx)("img",{src:o.image.src,style:{width:o.image.width,height:o.image.height,...g.imageBase,...n?g.imageSelected:{}}})}),(0,a.jsx)("div",{style:{...g.cardLabelBase,...n?g.cardLabelSelected:{}},children:o.label})]},e)}));return(0,a.jsx)("div",{style:g.cardContainer,children:p})}},120114:(e,t,i)=>{i.d(t,{AX:()=>r,Ur:()=>o,uw:()=>n,yP:()=>s});const o=["unified_find_variant"],n=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],s=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function r(e,t,i){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:i("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:i("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:i("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:i("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:i("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},235721:(e,t,i)=>{i.d(t,{A:()=>y});i(944114),i(898992),i(803949),i(296540);var o=()=>i(847249),n=()=>i(401497),s=()=>i(49621),r=()=>i(212439),a=()=>i(568625),l=()=>i(426388),d=()=>i(192855),c=()=>i(173019),u=()=>i(381138),g=()=>i(179034),p=()=>i(959013),h=()=>i(284371),m=()=>i(614505),f=()=>i(16006),S=()=>i(630116),x=i(474848);function y(e){const{spaceStore:t,keys:i,size:o,showCustomHeaderPages:l,left:d,style:g}=e,p=(0,n().IS)((e=>{const t=v(o),i=function(e){return"small"===e?10:16}(o);return{topbarContainer:{display:"flex",alignItems:"center",marginLeft:8,marginRight:12,...g},actionsContainer:{display:"flex",flexDirection:"row",gap:i,alignItems:"center"},icon:{height:t,width:t,fill:e.icon.primary},searchIcon:{height:t-2,width:t-2,fill:e.icon.primary}}}),[o,g]),h=[];return i.forEach((e=>{"duplicate"===e?h.push((0,x.jsx)("div",{children:(0,r().V)(p.icon)},"duplicate")):"comment"===e?h.push((0,x.jsx)("div",{children:(0,s().h)(p.icon)},"comment")):"edit"===e?h.push((0,x.jsx)("div",{children:(0,c().r)(p.icon)},"edit")):"more"===e?h.push((0,x.jsx)("div",{children:(0,a().L)(p.icon)},"more")):"search"===e?h.push((0,x.jsx)("div",{children:(0,u().q)(p.searchIcon)},"search")):"signUpOrLogIn"===e?h.push((0,x.jsx)(C,{size:o},"signUpOrLogIn")):t&&l&&h.push((0,x.jsx)(b,{spaceStore:t,blockId:e},e))})),(0,x.jsxs)("div",{style:p.topbarContainer,children:[d,(0,x.jsx)("div",{style:{flex:1}}),(0,x.jsx)("div",{style:p.actionsContainer,children:h})]})}function C(e){const{size:t}=e,i=(0,n().IS)((e=>{const i=v(t),o=function(e){return"small"===e?{paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6}:"large"===e?{paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10}:{paddingTop:4,paddingBottom:4,paddingLeft:8,paddingRight:8}}(t);return{signUpContainer:{display:"flex",alignItems:"center",gap:4,border:`1px solid ${e.darkDividerColor}`,borderRadius:4,fontSize:j(t),fontWeight:h().Wy.medium,whiteSpace:"nowrap",...o},icon:{height:i-2,width:i-2,fill:e.icon.primary}}}),[t]),o=(0,n().DP)();return(0,x.jsxs)("div",{style:i.signUpContainer,children:[(0,x.jsx)(p().sA,{defaultMessage:"Made with",id:"publishSiteSettings.topbar.madeWithPreview"}),"light"===o.mode?(0,l().S)(i.icon):(0,d().L)(i.icon)]})}function b(e){const{spaceStore:t,blockId:i}=e,{store:s,icon:r,isEmptyPage:a}=(0,o().K8)((()=>{const e=S().Bv.createChildStore(t,{table:g().ev,id:i});return{store:e,icon:e.getIcon(),isEmptyPage:e.isEmptyPage()}}),[t,i]),l=(0,n().IS)((()=>({container:{display:"flex",alignItems:"center",gap:4},pageTitle:{fontSize:14,wordBreak:"break-word",marginRight:4}})),[]);return(0,x.jsxs)("div",{style:l.container,children:[r&&(0,x.jsx)(m().B,{icon:r,store:s,disabled:!0,size:14,isEmptyPage:a,emojiSize:20,style:{marginRight:4}}),(0,x.jsx)(f().A,{store:s,style:l.pageTitle,maxLength:24})]})}function v(e){return"small"===e?12:16}function j(e){return"small"===e?9:"large"===e?14:12}},242565:(e,t,i)=>{i.r(t),i.d(t,{SITE_SETTINGS_TOOLTIP_WIDTH:()=>yt,SiteSettingsLayoutEditor:()=>Ct});var o=i.n(i(32485)),n=i(296540),s=()=>i(560198),r=()=>i(484714),a=()=>i(847249),l=()=>i(401497),d=()=>i(212050),c=()=>i(133033),u=()=>i(175947),g=()=>i(959013),p=()=>i(284371),h=()=>i(493823),m=()=>i(204063),f=()=>i(16006),S=()=>i(2143),x=()=>i(859428),y=()=>i(21140),C=()=>i(299772),b=()=>i(38337),v=()=>i(347199),j=()=>i(447934),A=()=>i(263711),w=()=>i(962730),k=()=>i(756279),B=()=>i(948914),I=()=>i(548821),_=()=>i(577437),R=()=>i(525700),T=()=>i(435212),M=()=>i(578872),L=()=>i(300451),E=()=>i(680984),P=()=>i(235721),H=(i(898992),i(354520),()=>i(614505)),W=()=>i(108944),D=()=>i(630116),z=i(474848);function K(e){const{store:t,siteRootBlockStore:i}=e,{rootStore:o,showEllipsis:n}=function(e,t){return(0,a().K8)((()=>{let i=!1;const o=W().fU(e).filter((e=>!(e instanceof D().h4)&&(!i&&(e instanceof D().Bv?(i=e.id===t.id,!0):void 0))));return{rootStore:o[o.length-1].id===e.id?void 0:o[o.length-1],showEllipsis:o.length>2}}),[e,t])}(t,i),s=(0,l().IS)((e=>({ellipsis:{color:e.text.secondary}})),[]),r=n?(0,z.jsx)("span",{style:s.ellipsis,children:"/ ... /"}):o?(0,z.jsx)("span",{style:s.ellipsis,children:"/"}):null;return(0,z.jsxs)(y().Ye,{gap:4,children:[o&&(0,z.jsx)(U,{store:o}),r,(0,z.jsx)(U,{store:t})]})}function U(e){const{store:t}=e,{icon:i,isEmptyPage:o}=(0,a().K8)((()=>({icon:t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]),n=(0,l().IS)((e=>({container:{display:"flex",alignItems:"center",gap:6,color:e.text.secondary,fontSize:14,lineHeight:1.42},title:{maxWidth:240}})),[]);return(0,z.jsxs)("div",{style:n.container,children:[i&&(0,z.jsx)(H().B,{disabled:!0,icon:i,isEmptyPage:o,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}),(0,z.jsx)(f().A,{style:n.title,shouldWrap:!1,maxLines:1,store:t})]})}var F=()=>i(189048),N=()=>i(285790),V=()=>i(112698),O=()=>i(100622),Y=()=>i(496603),Z=()=>i(623580),$=()=>i(545805),G=()=>i(125565);const q=/^[A-Za-z0-9]+$/;function Q(e){const{disabled:t}=e,[i,o]=(0,n.useState)(!1),[s,r]=(0,n.useState)(!1),d=(0,a().K8)((()=>L().A.getState().googleAnalyticsId),[]),[c,u]=(0,n.useState)(d),h=(0,l().IS)((e=>({container:{display:"flex",gap:24,marginLeft:8,marginRight:8},description:{color:e.text.secondary},inputGroup:{gap:6},inputLabel:{fontWeight:p().Wy.medium,fontSize:12,lineHeight:1.2,color:e.text.secondary},inputContainer:{background:t?e.surface.wash:e.surface.page,borderRadius:4,boxShadow:s?"0px 0px 0px 1px #2383E2 inset, 0px 0px 0px 2px rgba(35, 131, 226, 0.35)":`${e.regularDividerColor} 0px 0px 0px 1px inset`,height:28,padding:8,fontWeight:p().Wy.regular,fontSize:14,lineHeight:1.3,color:e.text.secondary},input:{marginLeft:-6,paddingLeft:0,color:e.text.primary},errorContainer:{fontSize:12,width:"100%",color:O().Ay.red}})),[s,t]);return(0,z.jsxs)(y().wt,{style:h.container,children:[(0,z.jsx)(G().A,{isSmall:!0,isMultiline:!0,style:h.description,children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.googleAnalytics.description",defaultMessage:"Add your Google Analytics measurement ID and publish changes to start tracking your site"})}),(0,z.jsxs)(y().wt,{style:h.inputGroup,children:[(0,z.jsx)("div",{style:h.inputLabel,children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.googleAnalytics.inputLabel",defaultMessage:"Measurement ID"})}),(0,z.jsx)($().A,{debugName:"InputMenuItem",capture:!0,onUntab:Y().D_,onTab:Y().D_,onSelectAll:Y().D_,onRedo:Y().D_,onUndo:Y().D_,onToggleBold:Y().D_,onToggleItalics:Y().D_,onToggleCode:Y().D_,onCut:Y().D_,onCopy:Y().D_,onPaste:Y().D_,onKeypress:Y().D_,onLeft:Y().D_,onRight:Y().D_,onDelete:Y().D_,onBackspace:Y().D_,children:(0,z.jsx)(Z().A,{type:"text",style:h.inputContainer,inputStyle:h.input,value:c,onChange:e=>{const t=e.target.value;if(t){const e=q.test(t);u(t),o(!e),e&&R().Nf(t)}else u(void 0),R().Nf(t)},format:Z().C.Transparent,onFocus:()=>r(!0),onBlur:()=>r(!1),left:"G-",disabled:t})}),i&&(0,z.jsx)("div",{style:h.errorContainer,children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.googleAnalytics.validationError",defaultMessage:"Only alphanumeric characters allowed"})})]})]})}var X=()=>i(340498);const J=(0,X().wt)("breadcrumb",{viewBox:"0 0 14 12",svg:(0,z.jsx)("path",{d:"M9.813 11.33c-.395 0-.637-.241-.637-.578 0-.1.018-.2.035-.265l2.69-9.263c.113-.378.313-.555.668-.555.377 0 .63.242.63.602a.875.875 0 0 1-.029.242l-2.702 9.299c-.106.348-.313.519-.655.519ZM7.283 9.252a.888.888 0 0 1-.899-.9c0-.499.393-.899.9-.899.499 0 .892.4.892.9 0 .505-.393.899-.893.899ZM4.491 9.252a.888.888 0 0 1-.899-.9c0-.499.393-.899.9-.899.499 0 .892.4.892.9 0 .505-.393.899-.893.899ZM1.7 9.252a.888.888 0 0 1-.9-.9c0-.499.394-.898.9-.898.499 0 .892.4.892.899 0 .505-.393.899-.893.899Z"})}),ee=(0,X().wt)("contentSearch",{viewBox:"0 0 16 16",svg:(0,z.jsx)("path",{d:"M0.25293 5.82031C0.25293 8.88965 2.74805 11.3848 5.81738 11.3848C6.95898 11.3848 8.00488 11.0361 8.87988 10.4414L12.0244 13.5859C12.2158 13.7842 12.4824 13.873 12.749 13.873C13.3301 13.873 13.7471 13.4355 13.7471 12.8682C13.7471 12.5947 13.6514 12.3418 13.4668 12.1504L10.3428 9.01953C10.9922 8.12402 11.3818 7.0166 11.3818 5.82031C11.3818 2.75098 8.88672 0.255859 5.81738 0.255859C2.74805 0.255859 0.25293 2.75098 0.25293 5.82031ZM1.70215 5.82031C1.70215 3.55078 3.54102 1.70508 5.81738 1.70508C8.08691 1.70508 9.93262 3.55078 9.93262 5.82031C9.93262 8.08984 8.08691 9.93555 5.81738 9.93555C3.54102 9.93555 1.70215 8.08984 1.70215 5.82031Z"})});var te=()=>i(939740),ie=()=>i(89924),oe=()=>i(946548),ne=()=>i(553965),se=()=>i(801494),re=()=>i(585293),ae=()=>i(887146),le=()=>i(179034),de=()=>i(439264),ce=()=>i(689094),ue=()=>i(704152),ge=(i(581454),()=>i(187174)),pe=()=>i(381138),he=()=>i(331542),me=()=>i(897119),fe=()=>i(958378),Se=()=>i(377586);const xe=10;function ye(e){const{siteRootBlockStore:t,onSelection:i,onResetInput:o}=e,[s,r]=(0,n.useState)(""),[a,d]=(0,n.useState)(!1),c=(0,l().IS)((()=>({resultsPopup:{width:264}})),[]),u=(0,n.useCallback)((e=>{i(e),d(!1),r("")}),[i,d]),g=(0,n.useCallback)((()=>{d(!1)}),[d]),p=(0,n.useCallback)((()=>{a||o()}),[a,o]);return(0,z.jsx)(me().Ay,{alignmentToOrigin:w().C.Start,origin:(0,z.jsx)(Ce,{query:s,setQuery:r,setShowResults:d,onBlurInput:p}),originGap:3,open:a,popupType:Se().n.Popup,style:c.resultsPopup,render:()=>(0,z.jsx)(be,{siteRootBlockStore:t,query:s,onSelection:u}),onDismiss:g,trapFocus:!1})}function Ce(e){const{query:t,setQuery:i,setShowResults:o,onBlurInput:s}=e,r=(0,g().tz)(),a=(0,l().IS)((e=>({input:{display:"flex",flex:1,paddingLeft:4,marginTop:8,marginLeft:8,marginRight:8,fontSize:14,width:"auto"},icon:{fill:e.icon.tertiary,width:14,height:14,marginLeft:4}})),[]),d=(0,n.useCallback)((e=>{i(e.target.value),o(!0)}),[i,o]),c=(0,n.useCallback)((()=>{o(!0)}),[o]),u=(0,n.useCallback)((e=>{"Escape"===e.key&&(s(),o(!1))}),[s,o]);return(0,z.jsx)(Z().A,{type:"text",focusInitial:!0,disabled:!1,onChange:d,onFocus:c,onBlur:s,onKeyDown:u,style:a.input,value:t,left:(0,pe().q)(a.icon),placeholder:r.formatMessage({id:"sites.siteHeaderSearchInput.placeholder",defaultMessage:"Select a page"})})}function be(e){const{siteRootBlockStore:t,query:i,onSelection:o}=e,n=(0,r().v3)(),s=(0,a().K8)((()=>t.getSpaceStore()),[t]),d=(0,a().K8)((()=>L().A.getState().customHeaderBlockIds),[]),c=(0,l().IS)((()=>({loadingSpinner:{textAlign:"center",visibility:"visible",display:"inline",marginLeft:8}})),[]),[{value:u,status:p}]=(0,ge().Yb)((()=>R().j4({environment:n,spaceStore:t.getSpaceStore(),query:i,siteRootBlockId:t.id})),[n,i,t]),h=(0,a().K8)((()=>{if(!s)return[];if("idle"===p||"pending"===p)return[{key:"sites-search-results",render:e=>(0,z.jsx)(ie().A,{...e}),items:[{key:"sites-loading-search-results",render:()=>(0,z.jsx)(he().A,{style:c.loadingSpinner}),action:()=>{}}]}];const e=(null==u?void 0:u.results)||[];if((!e||0===e.length)&&i.length>0)return[{key:"sites-no-results",render:e=>(0,z.jsx)(ie().A,{...e}),items:[{key:"sites-no-results",render:()=>(0,z.jsx)(G().A,{isSmall:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.siteHeaderSearchInput.noResults",defaultMessage:"No pages found"})}),action:()=>{}}]}];const n=(0,Y().oE)(e.map((e=>{if(d.includes(e.id))return;if(e.id===t.id)return;const i=D().Bv.createChildStore(s,{table:le().ev,id:e.id});return{key:i.id,render:e=>(0,z.jsx)(fe().A,{store:i,hidePath:!0,...e}),action:()=>{o(i.id)}}})));return 0===n.length?[ve(!1)]:""===i?n.length>=xe?[{key:"sites-suggested-search-results",render:e=>(0,z.jsx)(ie().A,{...e}),items:n.splice(0,xe)}]:[{key:"sites-suggested-search-results",render:e=>(0,z.jsx)(ie().A,{...e}),items:n.splice(0,xe)},ve(!0)]:[{key:"sites-search-results",render:e=>(0,z.jsx)(ie().A,{...e}),items:n}]}),[s,u,d,t,o,c,p,i]);return(0,z.jsx)(te().Ay,{type:te().Oh.Vertical,sections:h,initialFocus:void 0})}function ve(e){return{key:"sites-exhausted-results",render:t=>(0,z.jsx)(ie().A,{...t,topBorder:e}),items:[{key:"sites-exhausted-results",render:()=>(0,z.jsx)(G().A,{isSmall:!0,isMultiline:!0,style:{paddingLeft:8,paddingTop:4,paddingBottom:4},children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.siteHeaderSearchInput.noNewResults",defaultMessage:"When you have other published pages on this site, they will appear here"})}),action:()=>{}}]}}function je(e){const{siteRootBlockStore:t,disabled:i,customHeaderBlocks:o}=e,[s,r]=(0,n.useState)(!1),a=(0,l().IS)((e=>({button:{display:"flex",justifyContent:"center",alignItems:"center",gap:8,marginTop:8,marginLeft:8,marginRight:8,padding:4,background:e.tint.uiBlue,fontSize:14,color:i?e.text.uiBlueTertiary:e.text.uiBluePrimary,borderRadius:6},hoverContainer:{background:e.tint.uiBlueHover},addIcon:{height:14,width:14,fill:i?e.text.uiBlueTertiary:e.text.uiBluePrimary}})),[i]);return s?(0,z.jsx)(ye,{siteRootBlockStore:t,onSelection:e=>{R().aN(e),r(!1)},onResetInput:()=>r(!1)}):(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"siteSettingsEditor.header.addLinkToPageDisabledTooltip",defaultMessage:"Maximum {maximumLinks} page shortcuts",values:{maximumLinks:Ae}}),disableTooltip:o.length<Ae,render:e=>(0,z.jsxs)(ue().A,{...e,disabled:i||o.length>=Ae,onClick:()=>r(!0),style:a.button,hoveredStyle:a.hoverContainer,children:[(0,ce().W)(a.addIcon),(0,z.jsx)(g().sA,{id:"siteSettingsEditor.header.addLinkToPage",defaultMessage:"Add page"})]}),placement:w().W.Bottom,alignment:w().C.Center,textWrap:!0})}const Ae=5,we=(0,g().YK)({removeCustomHeaderPage:{id:"siteSettingsEditor.headerCustomBlockNav.removeTitle",defaultMessage:"Remove linked page"},tooltipMessage:{defaultMessage:"Add up to {maximumLinks} pages in the header",id:"siteSettingsEditor.header.addLinkToPagesHelp"}});function ke(){const e=(0,l().IS)((e=>({helpIcon:{marginLeft:4,marginTop:1,width:14,height:14,color:e.icon.tertiary,cursor:"default"}})),[]),t={maximumLinks:Ae};return(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{...we.tooltipMessage,values:t}),render:t=>(0,z.jsx)("div",{...t,children:(0,c().$)(e.helpIcon)}),placement:w().W.Bottom,alignment:w().C.Center})}function Be(e){const{siteRootBlockStore:t,disabled:i}=e,o=(0,a().K8)((()=>t.getSpaceStore()),[t]),s=(0,a().K8)((()=>L().A.state.customHeaderBlockIds),[]),r=(0,n.useCallback)((e=>{L().A.setState({...L().A.state,customHeaderBlockIds:e})}),[]),d=(0,l().IS)((e=>({container:{flex:1},title:{fontWeight:p().Wy.semibold,marginBottom:8,marginLeft:8,marginRight:8,display:"flex"},description:{color:e.text.secondary,paddingBottom:4,marginLeft:8,marginRight:8}})),[]);return(0,z.jsxs)("div",{style:d.container,children:[(0,z.jsxs)(G().A,{isSmall:!0,style:d.title,children:[(0,z.jsx)(g().sA,{id:"siteSettingsEditor.customHeader.title",defaultMessage:"Navigation"}),(0,z.jsx)(ke,{})]}),(0,z.jsx)(G().A,{isSmall:!0,isMultiline:!0,style:d.description,children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.customHeader.description",defaultMessage:"Allow users to easily navigate to other pages on this site"})}),(0,z.jsx)(de().Ay,{direction:"vertical",keys:s,renderKey:e=>function(e,t,i){return t?(0,z.jsx)(Ie,{blockId:e,spaceStore:t,disabled:i},e):null}(e,o,i),onDrop:r,disableHorizontalEdgeScroll:!1,style:{marginTop:8},disabled:i}),(0,z.jsx)(je,{siteRootBlockStore:t,disabled:i,customHeaderBlocks:s})]})}function Ie(e){const{blockId:t,spaceStore:i,disabled:o}=e,s=(0,g().tz)(),{store:r,icon:c,isEmptyPage:u}=(0,a().K8)((()=>{const e=D().Bv.createChildStore(i,{table:le().ev,id:t});return{store:e,icon:e.getIcon(),isEmptyPage:e.isEmptyPage()}}),[i,t]),[p,h]=(0,n.useState)(!1),m=(0,n.useCallback)((()=>{h(!0)}),[]),S=(0,n.useCallback)((()=>{h(!1)}),[]),x=(0,l().IS)((e=>({container:{display:"flex",flex:1,minWidth:"100%",gap:8,alignItems:"center",justifyContent:"center",paddingLeft:6,paddingRight:6,paddingTop:4,paddingBottom:4,fontSize:14},hoverContainer:{background:e.buttonHoveredBackground,borderRadius:4},pageTitle:{wordBreak:"break-word"},closeIcon:{height:12,width:12,fill:e.icon.secondary},dragIcon:{height:12,width:12,color:e.icon.secondary},filler:{flex:1}})),[]),y=p?{...x.container,...x.hoverContainer}:x.container;return(0,z.jsxs)("div",{style:y,onMouseEnter:m,onMouseLeave:S,children:[(0,ae().i)(x.dragIcon),c&&(0,z.jsx)(H().B,{icon:c,store:r,disabled:!0,size:14,isEmptyPage:u,emojiSize:14,style:{marginTop:1}}),(0,z.jsx)(G().A,{style:x.filler,children:(0,z.jsx)(f().A,{store:r,style:x.pageTitle})}),!o&&(0,z.jsx)(N().A,{icon:d().u,iconStyle:x.closeIcon,onClick:()=>R().JI(t),ariaLabel:s.formatMessage(we.removeCustomHeaderPage),disabled:o})]})}function _e(e){const{siteRootBlockStore:t,disabled:i}=e,o=(0,l().IS)((()=>({container:{paddingTop:0,paddingBottom:0,gap:0}})),[]),n=(0,Y().oE)([{key:0,render:e=>(0,z.jsx)(ie().A,{style:o.container,...e}),items:Re({siteRootBlockStore:t,disabled:i})}]);return(0,z.jsxs)(y().wt,{gap:24,children:[(0,z.jsx)(te().Ay,{type:te().Oh.Vertical,sections:n,initialFocus:void 0,resetFocusOnMouseOut:!0,resetInitialFocusOnSectionChangeAlways:!0}),(0,z.jsx)(Be,{siteRootBlockStore:t,disabled:i})]})}function Re(e){const{siteRootBlockStore:t,disabled:i}=e;return(0,Y().oE)([{key:"breadcrumbSetting",render:e=>(0,z.jsx)(Te,{...e,disabled:i}),action:()=>{R().DD(!L().A.state.hideBreadcrumbs)}},{key:"searchSetting",render:e=>(0,z.jsx)(Me,{...e,disabled:i}),action:()=>{R().XL(!L().A.state.hideSearch)}},{key:"duplicateAsTemplateSetting",render:e=>(0,z.jsx)(se().A,{...e,disabled:i,value:L().A.state.enableDuplicateAsTemplate}),action:()=>{R().d7(!L().A.state.enableDuplicateAsTemplate)}},{key:"watermarkSetting",render:e=>(0,z.jsx)(Le,{...e,disabled:i,siteRootBlockStore:t}),action:()=>{R().Xz(!L().A.state.hideWatermark)}}])}const Te=n.forwardRef(((e,t)=>{const{disabled:i}=e,o=(0,a().K8)((()=>!L().A.state.hideBreadcrumbs),[]),n=(0,l().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary}})),[]);return(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"siteSettingsEditor.headerBreadcrumbsSetting.tooltip",defaultMessage:"Show page breadcrumbs on the top left section of the header"}),disableTooltip:!1,render:s=>(0,z.jsx)(re().a,{...(0,ne().A)(e,s),ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Breadcrumbs",id:"siteSettingsEditor.headerBreadcrumbsSetting.title"}),icon:J(n.icon),right:(0,z.jsx)(oe().A,{...e,on:o,disabled:i})}),placement:w().W.Bottom,alignment:w().C.Center,textWrap:!0,style:{maxWidth:yt}})}));Te.displayName="BreadcrumbSetting";const Me=n.forwardRef(((e,t)=>{const{disabled:i}=e,o=(0,a().K8)((()=>!L().A.state.hideSearch),[]),n=(0,l().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary}})),[]);return(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"siteSettingsEditor.headerSearchSetting.tooltip",defaultMessage:"Allow users to search for content on your site"}),disableTooltip:!1,render:s=>(0,z.jsx)(re().a,{...(0,ne().A)(e,s),ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Search",id:"siteSettingsEditor.headerSearchSetting.title"}),icon:ee(n.icon),right:(0,z.jsx)(oe().A,{...e,on:o,disabled:i})})})}));Me.displayName="SearchSetting";const Le=n.forwardRef(((e,t)=>{const{siteRootBlockStore:o,disabled:n}=e,s=(0,a().K8)((()=>!L().A.state.hideWatermark),[]),r=(0,a().K8)((()=>{var e;const t=null===(e=o.getSiteStore())||void 0===e?void 0:e.getDomainId(),n=i(562800).Ue(o.getSpaceStore(),t);return"custom"===(null==n?void 0:n.getDomainType())}),[o]),d=(0,l().IS)((e=>({icon:{margin:0,height:16,width:16,fill:e.icon.secondary}})),[]);return(0,z.jsx)(x().A,{renderTooltip:()=>r?(0,z.jsx)(g().sA,{id:"siteSettingsEditor.headerWatermarkSetting.tooltip",defaultMessage:"Show 'Built with Notion' button"}):(0,z.jsx)(g().sA,{id:"siteSettingsEditor.headerWatermarkSetting.disabledTooltip",defaultMessage:"Disable Notion watermark on sites published on custom domains"}),disableTooltip:!1,render:o=>(0,z.jsx)("div",{...o,children:(0,z.jsx)(re().a,{...(0,ne().A)(e,o),disabled:n||!r,ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Notion watermark",id:"siteSettingsEditor.headerWatermarkSetting.title"}),icon:(0,i(426388).S)(d.icon),right:(0,z.jsx)(oe().A,{...e,on:s,disabled:n||!r})})}),placement:w().W.Bottom,alignment:w().C.Center,textWrap:!0,style:{maxWidth:yt}})}));Le.displayName="WatermarkSetting";var Ee=()=>i(963589);i(944114);const Pe=(0,X().wt)("arrowUpLine",{viewBox:"0 0 16 16",svg:(0,z.jsx)("path",{d:"M13.2944 7.53857C13.2944 7.74821 13.2261 7.92139 13.0894 8.05811C12.9526 8.19482 12.7817 8.26318 12.5767 8.26318C12.4718 8.26318 12.3739 8.24495 12.2827 8.2085C12.1916 8.16748 12.1118 8.11279 12.0435 8.04443L10.4917 6.51318L8.21533 3.97705L8.6665 3.75146L8.74854 5.97998V14.4702C8.74854 14.6935 8.6779 14.8758 8.53662 15.0171C8.3999 15.1584 8.22217 15.229 8.00342 15.229C7.78011 15.229 7.59782 15.1584 7.45654 15.0171C7.31982 14.8758 7.25146 14.6935 7.25146 14.4702V5.97998L7.3335 3.75146L7.7915 3.97705L5.5083 6.51318L3.95654 8.04443C3.88818 8.11279 3.80843 8.16748 3.71729 8.2085C3.62614 8.24495 3.52816 8.26318 3.42334 8.26318C3.21826 8.26318 3.04736 8.19482 2.91064 8.05811C2.77393 7.92139 2.70557 7.74821 2.70557 7.53857C2.70557 7.33805 2.78304 7.15804 2.93799 6.99854L7.44287 2.48682C7.52035 2.40479 7.60693 2.34554 7.70264 2.30908C7.79834 2.26807 7.8986 2.24756 8.00342 2.24756C8.10368 2.24756 8.20166 2.26807 8.29736 2.30908C8.39762 2.34554 8.48421 2.40479 8.55713 2.48682L13.062 6.99854C13.217 7.15804 13.2944 7.33805 13.2944 7.53857ZM13.2944 1.50928C13.2944 1.71891 13.2261 1.89437 13.0894 2.03564C12.9526 2.17692 12.7817 2.24756 12.5767 2.24756H3.43701C3.22282 2.24756 3.04736 2.17692 2.91064 2.03564C2.77393 1.89437 2.70557 1.71891 2.70557 1.50928C2.70557 1.29964 2.77393 1.12419 2.91064 0.98291C3.04736 0.841634 3.22282 0.770996 3.43701 0.770996H12.5767C12.7817 0.770996 12.9526 0.841634 13.0894 0.98291C13.2261 1.12419 13.2944 1.29964 13.2944 1.50928Z"})});var He=()=>i(742117),We=()=>i(901389),De=()=>i(760217),ze=()=>i(406699),Ke=()=>i(928600),Ue=()=>i(864943),Fe=()=>i(429145),Ne=()=>i(972435),Ve=()=>i(722872),Oe=()=>i(700250),Ye=()=>i(991249),Ze=()=>i(885400);const $e=(0,g().YK)({uploadError:{defaultMessage:"Failed to upload favicon",id:"publishSiteSettings.favicon.uploadError"}});function Ge(e,t){const{blockStore:o,siteRootBlockStore:n}=e,s=(0,r().Y0)(),{icon:d,isEmptyPage:c}=(0,a().K8)((()=>({icon:o.getIcon(),isEmptyPage:o.isEmptyPage()})),[o]),u=(0,l().IS)((e=>({chevronIcon:{height:12,width:12,fill:e.icon.tertiary,transform:"rotate(90deg)"}})),[]),p=(0,a().K8)((()=>!n.canAdmin()),[n]),h=(0,a().K8)((()=>L().A.state.faviconUrl),[]);return(0,z.jsx)(i(811979).A,{...e,disabled:p||e.disabled,popupType:s.isMobile?ze().z7.SlideUp:ze().z7.Popup,renderOrigin:i=>(0,z.jsx)(re().a,{...(0,ne().A)(e,i),ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Favicon",id:"publishSiteSettings.favicon.settingTitle"}),right:(0,z.jsxs)(z.Fragment,{children:[h?(0,z.jsx)(H().B,{disabled:!0,icon:{icon:h,pointer:n.pointer},isEmptyPage:c,disableShrinking:!0,size:16,emojiSize:16}):d?(0,z.jsx)(H().B,{disabled:!0,icon:d,isEmptyPage:!1,disableShrinking:!0,size:16,emojiSize:16}):(0,z.jsx)(Ze().A,{}),(0,He().V)(u.chevronIcon)]})}),alignmentToOrigin:Oe().MY.End,placementToOrigin:Oe().UV.Bottom,render:e=>(0,z.jsx)(qe,{blockStore:o,siteRootBlockStore:n,onClose:()=>{e.close()}})})}function qe(e){const{blockStore:t,siteRootBlockStore:i,onClose:o}=e,{spaceId:n,userId:s}=(0,a().K8)((()=>({spaceId:t.getSpaceId(),userId:t.userId})),[t]),{icon:d,isEmptyPage:c}=(0,a().K8)((()=>({icon:t.getIcon(),isEmptyPage:t.isEmptyPage()})),[t]),u=(0,a().K8)((()=>L().A.state.faviconUrl),[]),{uploadFile:h,isUploading:m}=function(e){const t=(0,r().v3)();return(0,Fe().lN)({environment:t,bucket:"secure",record:e.pointer,onSuccess:e=>{R().pu(e)},onError:e=>{We().f1(e.message??Ne().A.formatMessage($e.uploadError))}})}(i),f=(0,_()._X)({name:"custom_image_upload_favicon",spaceId:n,userId:s}),S=null==f?void 0:f.upsell,x=(0,l().IS)((e=>({icon:{height:16,width:16,fill:e.icon.secondary},uploadButtonStyle:{width:"auto",marginTop:8,marginLeft:10,marginRight:10,display:"flex",..."dark"===e.mode&&{border:`1px solid ${e.darkTextColor}`}},uploadButtonHoveredStyle:{background:e.buttonHoveredBackground},uploadCaptionStyle:{fontSize:12,lineHeight:1.25,color:e.text.secondary,fontWeight:p().Wy.regular,textAlign:"center"}})),[]),y=(0,r().v3)(),C=[];if(d?C.push({key:"default",action:()=>{R().pu(null),o()},render:e=>(0,z.jsx)(De().A,{...e,title:(0,z.jsx)(g().sA,{defaultMessage:"Page icon",id:"publishSiteSettings.faviconPageIcon.title"}),left:(0,z.jsx)(H().B,{disabled:!0,icon:d,isEmptyPage:c,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}),isChecked:!u&&!m})}):C.push({key:"notion-logo",action:()=>{R().pu(null),o()},render:e=>(0,z.jsx)(De().A,{...e,title:(0,z.jsx)(g().sA,{defaultMessage:"Notion logo",id:"publishSiteSettings.notionLogo.title"}),left:(0,z.jsx)(Ze().A,{style:{marginRight:4}}),isChecked:!u&&!m})}),m||u){const e=m?(0,z.jsx)(he().A,{style:{marginLeft:2}}):u?(0,z.jsx)(H().B,{disabled:!0,icon:{icon:u,pointer:i.pointer},isEmptyPage:!1,disableShrinking:!0,size:16,emojiSize:16}):Pe(x.icon);C.push({key:"custom",action:()=>{},render:t=>(0,z.jsx)(De().A,{...t,disabled:!0,title:(0,z.jsx)(g().sA,{defaultMessage:"Custom",id:"publishSiteSettings.faviconCustom.title"}),icon:e,isChecked:!0})})}"available"===(null==f?void 0:f.type)&&(C.push({key:"uploadFile",action:async()=>{await h()},render:e=>(0,z.jsx)(Ue().A,{...e,size:"lg",style:x.uploadButtonStyle,hoveredStyle:x.uploadButtonHoveredStyle,children:(0,z.jsx)(g().sA,{defaultMessage:"Upload image",id:"publishSiteSettings.favicon.uploadTitle"})})}),C.push({key:"uploadFileCaption",action:()=>{},render:e=>(0,z.jsx)(De().A,{...e,disabled:!0,title:(0,z.jsx)(g().sA,{defaultMessage:"Recommended size is 32 x 32",id:"publishSiteSettings.favicon.uploadCaption"}),textWrapperStyle:x.uploadCaptionStyle})}));const b=[{key:"favicon",render:e=>(0,z.jsx)(ie().A,{...e}),items:C}];return S&&"product"===S.type&&b.push({key:"upgrade-for-favicon",render:e=>(0,z.jsx)(ie().A,{...e,topBorder:!0}),items:[{key:"upsell",action:()=>{null!=f&&f.upsell&&Ye().K(y,{from:"site_favicon",upsell:S})},render:e=>(0,z.jsx)(De().A,{...e,focused:e.focused,title:(0,z.jsxs)("div",{style:{display:"flex",gap:6},children:[(0,z.jsx)(g().sA,{defaultMessage:"Upload custom favicons",id:"publishSiteSettings.favicon.upgrade"}),(0,z.jsx)(V().B,{upsell:S,analyticsName:"site_favicon"})]})})}]}),(0,z.jsx)(Ke().A,{menuType:Ve().gu.Popup,width:276,children:(0,z.jsx)(te().Ay,{type:te().Oh.Vertical,initialFocus:void 0,sections:b})})}const Qe=n.forwardRef(Ge);function Xe(e,t){const i=(0,a().K8)((()=>L().A.getState().googleAnalyticsId),[]),o=(0,l().IS)((e=>({chevronIcon:{height:12,width:12,fill:e.icon.tertiary},rightStyle:{gap:4}})),[]);return(0,z.jsx)(re().a,{...e,ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Google Analytics",id:"publishSiteSettings.googleAnalytics.settingTitle"}),right:(0,z.jsxs)(z.Fragment,{children:[i?(0,z.jsx)(g().sA,{defaultMessage:"Added",id:"publishSiteSettings.googleAnalytics.customValue"}):(0,z.jsx)(g().sA,{defaultMessage:"Off",id:"publishSiteSettings.googleAnalytics.defaultValue"}),(0,He().V)(o.chevronIcon)]}),rightStyle:o.rightStyle})}const Je=n.forwardRef(Xe);function et(e,t){const i=(0,a().K8)((()=>L().A.state.hideBreadcrumbs||L().A.state.hideSearch||L().A.state.hideWatermark||!1===L().A.state.enableDuplicateAsTemplate||L().A.state.customHeaderBlockIds.length>0),[]),o=(0,l().IS)((e=>({valueContainer:{display:"flex",alignItems:"center",gap:4,color:e.text.secondary},icon:{height:12,width:12,fill:e.icon.tertiary}})),[]);return(0,z.jsx)(re().a,{...e,ref:t,title:(0,z.jsx)(g().sA,{defaultMessage:"Header",id:"publishSiteSettings.header.settingTitle"}),right:(0,z.jsxs)("div",{style:o.valueContainer,children:[i?(0,z.jsx)(g().sA,{defaultMessage:"Custom",id:"publishSiteSettings.header.customValue"}):(0,z.jsx)(g().sA,{defaultMessage:"Default",id:"publishSiteSettings.header.defaultValue"}),(0,He().V)(o.icon)]})})}const tt=n.forwardRef(et);var it=()=>i(678553);const ot=(0,g().YK)({uploadError:{defaultMessage:"Failed to upload s preview image",id:"publishSiteSettings.linkPreview.uploadError"}}),nt=n.forwardRef(((e,t)=>{const{blockStore:o,siteRootBlockStore:s,focused:d,disabled:c}=e,u=(0,r().v3)(),h=(0,a().K8)((()=>L().A.state.previewImageUrl),[]),m=(0,a().K8)((()=>{if(o.isReady())return o.getFormat().social_media_image_preview_url}),[o]),f=Boolean(h);(0,n.useEffect)((()=>{o.isReady()&&!m&&i(6027).F({environment:u,store:o})}),[u,o,m]);const S=(0,n.useCallback)((e=>{R().yF(e)}),[]),{uploadFile:x,isUploading:C}=(0,Fe().lN)({onError:e=>{We().f1(e.message??Ne().A.formatMessage(ot.uploadError))},onSuccess:S,environment:u,bucket:"secure",record:s.pointer}),b=(0,l().IS)((e=>({container:{padding:0,marginTop:4,marginBottom:24},imageContainer:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:8,marginLeft:8,marginRight:8,background:e.surface.elevated,border:`1px solid ${e.stroke.primary}`,borderRadius:6},title:{lineHeight:1.2,marginTop:0,marginBottom:8,paddingLeft:8,color:e.text.secondary,fontWeight:p().Wy.medium,fontSize:12},buttonContainer:{position:"relative",background:"transparent"},buttonRow:{position:"absolute",right:16,top:-130,background:e.surface.elevated,borderRadius:4,boxShadow:e.shadowSM},button:{padding:6,fontSize:12,lineHeight:1.25,fontWeight:p().Wy.medium,color:e.text.secondary,background:e.surface.elevated},resetButton:{borderTopLeftRadius:4,borderBottomLeftRadius:4,borderRight:`1px solid ${e.stroke.secondary}`},uploadButton:{borderTopRightRadius:4,borderBottomRightRadius:4,...!f&&{borderTopLeftRadius:4,borderBottomLeftRadius:4}}})),[f]);return(0,z.jsx)(it().Ay,{...e,ref:t,title:(0,z.jsxs)(y().Ye,{children:[(0,z.jsx)(g().sA,{id:"publishSite.linkPreview.title",defaultMessage:"Share preview"}),(0,z.jsx)(rt,{})]}),titleStyle:b.title,style:b.container,itemMarginLeft:0,itemMarginRight:0,body:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{style:b.imageContainer,children:(0,z.jsx)(st,{blockStore:h?s:o,url:C?void 0:h??m})}),d&&!c&&!C&&(0,z.jsx)("div",{style:b.buttonContainer,children:(0,z.jsxs)(y().Ye,{style:b.buttonRow,children:[f&&(0,z.jsx)(ue().A,{style:{...b.button,...b.resetButton},onClick:()=>S(null),disabled:c,children:(0,z.jsx)(g().sA,{id:"publishSite.linkPreview.resetImage",defaultMessage:"Reset"})}),(0,z.jsx)(ue().A,{style:{...b.button,...b.uploadButton},onClick:x,disabled:c,children:(0,z.jsx)(g().sA,{id:"publishSite.linkPreview.uploadImage",defaultMessage:"Upload image"})})]})})]})})}));function st(e){const{blockStore:t,url:o}=e,s=(0,a().K8)((()=>t.pointer),[t]),[r,d]=(0,n.useState)(!1),c=(0,l().IS)((()=>({image:{height:136,width:"100%",borderRadius:5},spinner:{display:"flex",justifyContent:"center",alignItems:"center",height:136}})),[]);return o?(0,z.jsx)(i(360083).A,{url:o,isAuthenticated:!0,permissionRecord:s,width:240,onFinishedLoadingProxyUrl:()=>d(!0),render:(e,t)=>t&&r?(0,z.jsx)(i(807683).Ay,{style:c.image,src:t,loading:"lazy"}):(0,z.jsx)(he().A,{legacySize:136,style:c.spinner})}):(0,z.jsx)("div",{style:{...c.spinner,width:"100%"},children:(0,z.jsx)(he().A,{})})}function rt(){const e=(0,l().IS)((e=>({helpIcon:{marginLeft:4,marginTop:1,width:14,height:14,color:e.icon.tertiary,cursor:"default"}})),[]);return(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"publishSiteSettings.linkPreview.tooltip",defaultMessage:"The preview image of your site link when you share on social media, such as X and LinkedIn"}),render:t=>(0,z.jsx)("div",{...t,children:(0,c().$)(e.helpIcon)}),placement:w().W.Bottom,alignment:w().C.Center,textWrap:!0,style:{width:yt}})}function at(e,t){const{enableQna:i}=e;return(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"siteSettingsEditor.headerQnASetting.tooltip",defaultMessage:"Allow users to chat with AI about content on your site"}),disableTooltip:!1,render:o=>(0,z.jsx)(re().a,{...(0,ne().A)(e,o),ref:t,title:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.initialSettings.enableQna",defaultMessage:"Enable QnA"}),right:(0,z.jsx)(oe().A,{...e,on:i})}),placement:w().W.Bottom,alignment:w().C.Center,textWrap:!0,style:{maxWidth:yt}})}nt.displayName="PreviewImageSetting";const lt=n.forwardRef(at),dt=(0,X().wt)("themeDark",{viewBox:"0 0 18 19",svg:(0,z.jsx)("path",{d:"M13.8779 11.9844C14.2178 11.9844 14.5518 11.9668 14.8799 11.9316C15.2139 11.8906 15.5273 11.8379 15.8203 11.7734C16.1191 11.7031 16.3799 11.6182 16.6025 11.5186C16.7314 11.4658 16.8398 11.4307 16.9277 11.4131C17.0215 11.3955 17.1123 11.3867 17.2002 11.3867C17.376 11.3867 17.5342 11.4512 17.6748 11.5801C17.8213 11.709 17.8945 11.8848 17.8945 12.1074C17.8945 12.1719 17.8828 12.2598 17.8594 12.3711C17.8418 12.4824 17.8037 12.6055 17.7451 12.7402C17.2646 13.8418 16.6084 14.791 15.7764 15.5879C14.9502 16.3906 13.9893 17.0059 12.8936 17.4336C11.7979 17.8672 10.6172 18.084 9.35156 18.084C8.00977 18.084 6.77637 17.8525 5.65137 17.3896C4.52637 16.9326 3.54785 16.291 2.71582 15.4648C1.88965 14.6328 1.24805 13.6543 0.791016 12.5293C0.333984 11.4043 0.105469 10.1709 0.105469 8.8291C0.105469 7.59277 0.342773 6.41211 0.817383 5.28711C1.29199 4.15625 1.94824 3.16309 2.78613 2.30762C3.62988 1.44629 4.59961 0.792969 5.69531 0.347656C5.83594 0.289062 5.95312 0.250977 6.04688 0.233398C6.14648 0.209961 6.22266 0.198242 6.27539 0.198242C6.50391 0.198242 6.68848 0.277344 6.8291 0.435547C6.96973 0.59375 7.04004 0.766602 7.04004 0.954102C7.04004 1.05957 7.02539 1.16211 6.99609 1.26172C6.97266 1.35547 6.92285 1.47266 6.84668 1.61328C6.68262 1.92969 6.55078 2.35742 6.45117 2.89648C6.35742 3.43555 6.31055 4.02734 6.31055 4.67188C6.31055 6.17773 6.61816 7.47852 7.2334 8.57422C7.84863 9.66406 8.72168 10.5049 9.85254 11.0967C10.9834 11.6885 12.3252 11.9844 13.8779 11.9844ZM1.80176 8.77637C1.80176 9.88379 1.98926 10.9004 2.36426 11.8262C2.73926 12.752 3.2666 13.5576 3.94629 14.2432C4.63184 14.9229 5.4375 15.4502 6.36328 15.8252C7.28906 16.2061 8.2998 16.3965 9.39551 16.3965C10.251 16.3965 11.0713 16.2705 11.8564 16.0186C12.6475 15.7666 13.3623 15.4033 14.001 14.9287C14.6455 14.4541 15.1816 13.8887 15.6094 13.2324C15.3047 13.3438 14.9854 13.4229 14.6514 13.4697C14.3232 13.5166 13.9688 13.54 13.5879 13.54C11.7422 13.54 10.1572 13.1943 8.83301 12.5029C7.51465 11.8057 6.50098 10.8096 5.79199 9.51465C5.08887 8.21973 4.7373 6.66992 4.7373 4.86523C4.7373 4.43164 4.7666 4.01855 4.8252 3.62598C4.88965 3.22754 4.98047 2.84961 5.09766 2.49219C4.41797 2.94922 3.83203 3.50879 3.33984 4.1709C2.84766 4.83301 2.4668 5.55957 2.19727 6.35059C1.93359 7.1416 1.80176 7.9502 1.80176 8.77637Z"})}),ct=(0,X().wt)("themeLight",{viewBox:"0 0 20 21",svg:(0,z.jsx)("path",{d:"M10 14.874C9.34961 14.874 8.74023 14.751 8.17188 14.5049C7.60352 14.2588 7.09961 13.9189 6.66016 13.4854C6.22656 13.0518 5.88672 12.5508 5.64062 11.9824C5.40039 11.4082 5.28027 10.7988 5.28027 10.1543C5.28027 9.50391 5.40039 8.89453 5.64062 8.32617C5.88672 7.75195 6.22656 7.24805 6.66016 6.81445C7.09961 6.38086 7.60352 6.04102 8.17188 5.79492C8.74023 5.54883 9.34961 5.42578 10 5.42578C10.6445 5.42578 11.251 5.54883 11.8193 5.79492C12.3877 6.04102 12.8887 6.38086 13.3223 6.81445C13.7617 7.24805 14.1016 7.75195 14.3418 8.32617C14.5879 8.89453 14.7109 9.50391 14.7109 10.1543C14.7109 10.7988 14.5879 11.4082 14.3418 11.9824C14.1016 12.5508 13.7617 13.0518 13.3223 13.4854C12.8887 13.9189 12.3877 14.2588 11.8193 14.5049C11.251 14.751 10.6445 14.874 10 14.874ZM10 13.0283C10.5215 13.0283 10.999 12.8994 11.4326 12.6416C11.8662 12.3779 12.2119 12.0293 12.4697 11.5957C12.7334 11.1562 12.8652 10.6758 12.8652 10.1543C12.8652 9.63281 12.7334 9.15527 12.4697 8.72168C12.2119 8.28223 11.8662 7.93066 11.4326 7.66699C10.999 7.40332 10.5215 7.27148 10 7.27148C9.47266 7.27148 8.99219 7.40332 8.55859 7.66699C8.125 7.93066 7.77637 8.28223 7.5127 8.72168C7.25488 9.15527 7.12598 9.63281 7.12598 10.1543C7.12598 10.6758 7.25488 11.1562 7.5127 11.5957C7.77637 12.0293 8.125 12.3779 8.55859 12.6416C8.99219 12.8994 9.47266 13.0283 10 13.0283ZM10 3.87891C9.73633 3.87891 9.50781 3.78516 9.31445 3.59766C9.12695 3.4043 9.0332 3.17578 9.0332 2.91211V1.13672C9.0332 0.873047 9.12695 0.644531 9.31445 0.451172C9.50781 0.257812 9.73633 0.161133 10 0.161133C10.2637 0.161133 10.4893 0.257812 10.6768 0.451172C10.8701 0.644531 10.9668 0.873047 10.9668 1.13672V2.91211C10.9668 3.17578 10.8701 3.4043 10.6768 3.59766C10.4893 3.78516 10.2637 3.87891 10 3.87891ZM14.4297 5.74219C14.248 5.55469 14.1543 5.32617 14.1484 5.05664C14.1484 4.78711 14.2393 4.56152 14.4209 4.37988L15.6953 3.10547C15.877 2.92383 16.1025 2.83301 16.3721 2.83301C16.6416 2.82715 16.8672 2.91504 17.0488 3.09668C17.2363 3.28418 17.3301 3.51563 17.3301 3.79102C17.3359 4.06055 17.2451 4.28613 17.0576 4.46777L15.8008 5.7334C15.6133 5.9209 15.3848 6.01465 15.1152 6.01465C14.8457 6.01465 14.6172 5.92383 14.4297 5.74219ZM16.2666 10.1543C16.2666 9.89062 16.3604 9.66504 16.5479 9.47754C16.7412 9.28418 16.9697 9.1875 17.2334 9.1875H19.0176C19.2754 9.1875 19.498 9.28418 19.6855 9.47754C19.8789 9.66504 19.9756 9.89062 19.9756 10.1543C19.9756 10.4121 19.8789 10.6377 19.6855 10.8311C19.498 11.0186 19.2754 11.1123 19.0176 11.1123H17.2334C16.9697 11.1123 16.7412 11.0186 16.5479 10.8311C16.3604 10.6377 16.2666 10.4121 16.2666 10.1543ZM14.4209 14.584C14.6084 14.4023 14.8369 14.3115 15.1064 14.3115C15.376 14.3057 15.6016 14.3936 15.7832 14.5752L17.0576 15.8408C17.2451 16.0283 17.3389 16.2539 17.3389 16.5176C17.3389 16.7871 17.248 17.0156 17.0664 17.2031C16.8789 17.3789 16.6504 17.4697 16.3809 17.4756C16.1113 17.4814 15.8857 17.3936 15.7041 17.2119L14.4297 15.9375C14.248 15.7559 14.1543 15.5332 14.1484 15.2695C14.1484 15 14.2393 14.7715 14.4209 14.584ZM10 16.4297C10.2637 16.4297 10.4893 16.5234 10.6768 16.7109C10.8701 16.9043 10.9668 17.1299 10.9668 17.3877V19.1719C10.9668 19.4355 10.8701 19.6611 10.6768 19.8486C10.4893 20.042 10.2637 20.1387 10 20.1387C9.73633 20.1387 9.50781 20.042 9.31445 19.8486C9.12695 19.6611 9.0332 19.4355 9.0332 19.1719V17.3877C9.0332 17.1299 9.12695 16.9043 9.31445 16.7109C9.50781 16.5234 9.73633 16.4297 10 16.4297ZM5.5791 14.584C5.75488 14.7715 5.83984 15 5.83398 15.2695C5.83398 15.5332 5.74316 15.7559 5.56152 15.9375L4.2959 17.2119C4.1084 17.3877 3.87988 17.4727 3.61035 17.4668C3.34082 17.4668 3.1123 17.376 2.9248 17.1943C2.74316 17.0068 2.65234 16.7783 2.65234 16.5088C2.6582 16.2451 2.75488 16.0195 2.94238 15.832L4.20801 14.5752C4.38965 14.3936 4.61523 14.3057 4.88477 14.3115C5.16016 14.3115 5.3916 14.4023 5.5791 14.584ZM3.7334 10.1543C3.7334 10.4121 3.63672 10.6377 3.44336 10.8311C3.25586 11.0186 3.02734 11.1123 2.75781 11.1123H0.982422C0.724609 11.1123 0.499023 11.0186 0.305664 10.8311C0.118164 10.6377 0.0244141 10.4121 0.0244141 10.1543C0.0244141 9.89062 0.118164 9.66504 0.305664 9.47754C0.499023 9.28418 0.724609 9.1875 0.982422 9.1875H2.75781C3.02734 9.1875 3.25586 9.28418 3.44336 9.47754C3.63672 9.66504 3.7334 9.89062 3.7334 10.1543ZM5.56152 5.74219C5.37402 5.92383 5.14551 6.01465 4.87598 6.01465C4.60645 6.00879 4.38086 5.91504 4.19922 5.7334L2.93359 4.45898C2.75781 4.2832 2.66992 4.06055 2.66992 3.79102C2.66992 3.51563 2.76367 3.28418 2.95117 3.09668C3.13281 2.91504 3.3584 2.82715 3.62793 2.83301C3.89746 2.83301 4.12598 2.92383 4.31348 3.10547L5.5791 4.37988C5.75488 4.56152 5.83984 4.79004 5.83398 5.06543C5.83398 5.33496 5.74316 5.56055 5.56152 5.74219Z"})}),ut=(0,X().wt)("themeSystem",{viewBox:"0 0 26 16",svg:(0,z.jsx)("path",{d:"M0.0537109 14.3945C0.0537109 14.084 0.162109 13.8203 0.378906 13.6035C0.595703 13.3809 0.859375 13.2695 1.16992 13.2695H3.0332V2.90723C3.0332 2.22754 3.2207 1.70898 3.5957 1.35156C3.9707 0.994141 4.48633 0.81543 5.14258 0.81543H20.8486C21.5342 0.81543 22.0557 0.994141 22.4131 1.35156C22.7764 1.70898 22.958 2.22754 22.958 2.90723V13.2695H24.8213C25.1318 13.2695 25.3955 13.3809 25.6123 13.6035C25.8291 13.8203 25.9375 14.084 25.9375 14.3945C25.9375 14.6992 25.8291 14.9629 25.6123 15.1855C25.3955 15.4082 25.1318 15.5195 24.8213 15.5195H1.16992C0.859375 15.5195 0.595703 15.4082 0.378906 15.1855C0.162109 14.9629 0.0537109 14.6992 0.0537109 14.3945ZM4.75586 13.2695H21.2354V3.36426C21.2354 3.08301 21.165 2.875 21.0244 2.74023C20.8896 2.60547 20.6875 2.53809 20.418 2.53809H5.57324C5.30371 2.53809 5.09863 2.60547 4.95801 2.74023C4.82324 2.875 4.75586 3.08301 4.75586 3.36426V13.2695Z"})});const gt={available:["system","light","dark"],appearance:{system:{label:(0,z.jsx)(g().sA,{id:"themeSetting.system.label",defaultMessage:"System"}),icon:{function:ut,size:24}},light:{label:(0,z.jsx)(g().sA,{id:"themeSetting.light.label",defaultMessage:"Light"}),icon:{function:ct,size:22}},dark:{label:(0,z.jsx)(g().sA,{id:"themeSetting.dark.label",defaultMessage:"Dark"}),icon:{function:dt,size:20}}}},pt=n.forwardRef(((e,t)=>{const{disabled:o}=e,s=(0,a().K8)((()=>L().A.state.theme??"light"),[]),r=(0,l().IS)((e=>({container:{padding:0,marginBottom:24},innerContainer:{marginLeft:0,marginRight:0,display:"flex",flexDirection:"column",gap:1},title:{lineHeight:1.2,marginTop:0,marginBottom:8,paddingLeft:8,color:e.text.secondary,fontWeight:p().Wy.medium,fontSize:12},cardContainer:{marginTop:0}})),[]),d=(0,n.useCallback)((e=>{R().V_(e)}),[]);return(0,z.jsx)(it().Ay,{...e,ref:t,title:(0,z.jsx)(g().sA,{id:"themeSetting.title",defaultMessage:"Theme"}),titleStyle:r.title,style:r.container,textWrapperStyle:r.innerContainer,body:(0,z.jsx)(i(115552).A,{disabled:Boolean(o),options:gt,selectedOption:s,onOptionSelected:d,height:"short"}),bodyStyle:r.cardContainer})}));function ht(e){const{store:t,siteRootBlockStore:i,disabled:o}=e,n=(0,Ee().X)("enable_public_qna"),s=(0,a().K8)((()=>Boolean(L().A.state.enableQna)),[]),r=(0,l().IS)((()=>({container:{paddingTop:0,paddingBottom:0,gap:0}})),[]),d=(0,Y().oE)([{key:"previewImageSetting",render:e=>(0,z.jsx)(nt,{...e,disabled:o,blockStore:t,siteRootBlockStore:i}),action:()=>{}},{key:"themeSetting",render:e=>(0,z.jsx)(pt,{disabled:o,...e}),action:()=>{}},{key:"faviconSetting",render:e=>(0,z.jsx)(Qe,{...e,blockStore:t,siteRootBlockStore:i}),action:()=>{}},{key:"headerSetting",render:e=>(0,z.jsx)(tt,{...e}),action:()=>{R().aD("header")}},{key:"googleAnalyticsSetting",render:e=>(0,z.jsx)(Je,{...e}),action:()=>{R().aD("google_analytics")}},n&&{key:"qnaSetting",render:e=>(0,z.jsx)(lt,{...e,disabled:o,enableQna:s,onClick:()=>(0,R().P8)(!s)}),action:()=>{(0,R().P8)(!s)}}]),c=(0,Y().oE)([{key:0,render:e=>(0,z.jsx)(ie().A,{style:r.container,...e}),items:d}]);return(0,z.jsx)(te().Ay,{type:te().Oh.Vertical,sections:c,initialFocus:void 0,resetFocusOnMouseOut:!0,resetInitialFocusOnSectionChangeAlways:!0})}pt.displayName="ThemeSetting";const mt=312,ft=(0,g().YK)({goBack:{id:"siteSettingsEditor.setting.back",defaultMessage:"Go back"},initialSettingsTitle:{id:"siteSettingsEditor.sidebar.title",defaultMessage:"Settings"},initialSettingsSubTitle:{id:"siteSettingsEditor.sidebar.subtitle",defaultMessage:"Unlock full customization"},headerSettingsTitle:{id:"siteSettingsEditor.header.title",defaultMessage:"Header"},googleSettingsTitle:{id:"siteSettingsEditor.googleAnalytics.title",defaultMessage:"Google Analytics"}});function St(e){const{store:t,siteRootBlockStore:i}=e,{spaceId:o,userId:n}=(0,a().K8)((()=>({spaceId:t.getSpaceId(),userId:t.userId})),[t]),s=(0,_()._X)({name:"custom_public_sites_layout",spaceId:o,userId:n}),r=null==s?void 0:s.upsell,d=(0,a().K8)((()=>!i.canAdmin()||Boolean(r)),[i,r]),c=(0,a().K8)((()=>L().A.getState().settingOpen),[]),u=(0,l().IS)((()=>({container:{minWidth:mt,width:mt},sidebarContainer:{flex:1,paddingLeft:16,paddingRight:16}})),[]);let g;return g="header"===c?(0,z.jsx)(xt,{upsell:r,title:ft.headerSettingsTitle,subtitle:ft.initialSettingsSubTitle,content:(0,z.jsx)(_e,{siteRootBlockStore:i,disabled:d}),showGoBack:!0}):"google_analytics"===c?(0,z.jsx)(xt,{upsell:r,title:ft.googleSettingsTitle,subtitle:ft.initialSettingsSubTitle,content:(0,z.jsx)(Q,{disabled:d}),showGoBack:!0}):(0,z.jsx)(xt,{upsell:r,title:ft.initialSettingsTitle,subtitle:ft.initialSettingsSubTitle,content:(0,z.jsx)(ht,{store:t,siteRootBlockStore:i,disabled:d}),showGoBack:!1}),(0,z.jsx)(y().wt,{style:u.container,children:(0,z.jsx)(y().wt,{gap:8,style:u.sidebarContainer,children:g})})}function xt(e){const{title:t,subtitle:i,content:o,showGoBack:n,upsell:s}=e,r=(0,g().tz)(),a=(0,l().IS)((e=>({sidebarContainer:{flex:1},titleContainer:{fontWeight:p().Wy.semibold,fontSize:17,lineHeight:1.3,marginTop:16,marginBottom:28,marginLeft:n?4:8,marginRight:n?0:8,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:4},subtitleContainer:{display:"flex",paddingRight:16,alignItems:"center",gap:6,flex:1,paddingLeft:n?4:0},subtitleText:{color:e.text.secondary,fontSize:12,fontWeight:400,lineHeight:"16px"},icon:{fill:e.icon.tertiary,transform:"rotate(90deg)"}})),[n]);return(0,z.jsxs)(y().wt,{style:a.sidebarContainer,children:[(0,z.jsxs)(y().Ye,{gap:8,style:a.titleContainer,children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n&&(0,z.jsx)(N().A,{icon:F().u,style:{width:20,height:20},iconStyle:a.icon,ariaLabel:r.formatMessage(ft.goBack),onClick:R().wl}),(0,z.jsx)(g().sA,{...t})]}),s&&"product"===s.type&&(0,z.jsxs)("div",{style:a.subtitleContainer,children:[(0,z.jsx)("div",{style:a.subtitleText,children:(0,z.jsx)(g().sA,{...i})}),(0,z.jsx)("div",{children:(0,z.jsx)(V().B,{upsell:s,analyticsName:"customize_site_settings"})})]})]}),o]})}const yt=220;function Ct(){const e=(0,r().v3)(),t=(0,l().IS)((e=>({container:{width:"100%",background:e.sitesBuilderBackground},bodyContainer:{paddingLeft:24,height:"100%"}})),[]),i=(0,a().K8)((()=>{const t=L().A.state.theme??"light";return"system"===t?(0,s().VD)(e):t}),[e]),o=(0,a().K8)((()=>A().g.getState()),[A().g]);if(!o.isOpen||"site-settings-editor"!==o.mode)return null;const{pageStore:n,siteRootBlockStore:d}=o;return n?(0,z.jsxs)(y().wt,{style:t.container,children:[(0,z.jsx)(bt,{store:n,siteRootBlockStore:d}),(0,z.jsxs)(y().Ye,{style:t.bodyContainer,children:[(0,z.jsx)(s().wX,{mode:i,children:(0,z.jsx)(vt,{store:n,siteRootBlockStore:d})}),(0,z.jsx)(St,{store:n,siteRootBlockStore:d})]})]}):null}function bt(e){const{store:t,siteRootBlockStore:i}=e,[s,S]=(0,n.useState)(!1),C=(0,r().v3)(),{isElectronMac:v,isElectronWindows:A}=C.device,k=(0,a().K8)((()=>!v&&!A||B().A.state.isShowingTabBar),[v,A]),I=(0,a().K8)((()=>(0,u().ek)(v)),[v]),{spaceId:M,userId:E}=(0,a().K8)((()=>({spaceId:t.getSpaceId(),userId:t.userId})),[t]),P=(0,_().P9)({name:"custom_public_sites_layout",spaceId:M,userId:E}),H=(0,a().K8)((()=>{var e;if(P)return!1;const t=L().A.getState();return(null===(e=t.permissionItem)||void 0===e?void 0:e.allow_duplicate)===t.enableDuplicateAsTemplate}),[P]),W=(0,l().IS)((e=>({container:{padding:"12px 24px 12px 24px"},topbarPlaceholder:{minHeight:I,background:e.onboardingPreviewBackground,borderBottom:`1px solid ${e.stroke.secondary}`},title:{fontSize:14,fontWeight:p().Wy.semibold},helpIcon:{width:14,height:14,color:e.icon.tertiary}})),[I]),D=(0,n.useCallback)((()=>{R().wl(),j().Fv({environment:C}),(0,T().Sc)(C)}),[C]),K=(0,n.useCallback)((async()=>{S(!0),await R().uH({environment:C,store:t,siteRootBlockStore:i}),S(!1),D()}),[C,t,i,D]);return(0,z.jsxs)(z.Fragment,{children:[!k&&(0,z.jsx)("div",{style:W.topbarPlaceholder,className:o()({[b().N_7]:!0,[b().sbV]:!0})}),(0,z.jsxs)(y().Ye,{style:W.container,alignItems:"center",justifyContent:"space-between",children:[(0,z.jsx)(h().p,{onClick:D,icon:d().u,size:"lg",children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.topbar.cancel",defaultMessage:"Cancel"})}),(0,z.jsxs)(y().Ye,{justifyContent:"center",alignItems:"center",gap:4,children:[(0,z.jsx)(f().A,{shouldWrap:!1,maxLines:1,store:i,style:W.title}),(0,z.jsx)(x().A,{renderTooltip:()=>(0,z.jsx)(g().sA,{id:"siteSettingsEditor.topbar.caption",defaultMessage:"Changes will apply to all pages within this site"}),render:e=>(0,z.jsx)("div",{...e,children:(0,c().$)(W.helpIcon)})})]}),(0,z.jsx)(x().A,{disableTooltip:!H,renderTooltip:()=>(0,z.jsx)(g().sA,{defaultMessage:"Upgrade to unlock full customization",id:"siteSettingsEditor.topbar.publishTooltip"}),render:e=>(0,z.jsx)(m().A,{...e,onClick:K,size:"lg",disabled:H,isLoading:s,children:(0,z.jsx)(g().sA,{id:"siteSettingsEditor.topbar.publish",defaultMessage:"Publish changes"})}),placement:w().W.Bottom,alignment:w().C.Center})]})]})}function vt(e){const{store:t,siteRootBlockStore:i}=e,[o,s]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{s(!0)}),[]),d=(0,n.useCallback)((()=>{s(!1)}),[]),c=(0,a().K8)((()=>i.getSpaceStore()),[i]),{isHeaderSettingOpen:u,showBreadcrumbs:g,headerItemKeys:p}=(0,a().K8)((()=>{const e=L().A.getState();return{isHeaderSettingOpen:"header"===e.settingOpen,showBreadcrumbs:!e.hideBreadcrumbs,headerItemKeys:e.permissionItem?M().ue(e.permissionItem,!1!==e.enableDuplicateAsTemplate,e.hideSearch,e.hideWatermark,e.customHeaderBlockIds):[]}}),[]),h=o||u,m="light"===(0,l().DP)().mode?b().fRh:b().Rsl,f=(0,l().IS)((e=>({container:{height:"100%",background:e.contentBackground,color:e.text.primary,flexGrow:3,borderRadius:"12px 12px 0 0",boxShadow:e.shadowSM,cursor:"default",borderBottom:0,overflow:"hidden"},topBarContainer:{marginTop:2,marginBottom:10,marginLeft:12,marginRight:12,paddingTop:12,paddingBottom:12,paddingLeft:8,paddingRight:8,boxShadow:At({isThick:h,colorInHex:u?e.blueColor:e.stroke.uiBlueSecondary}),transition:"box-shadow 0.3s",borderRadius:12,cursor:"pointer"}})),[h,u]);return(0,z.jsxs)("div",{style:f.container,className:m,children:[(0,z.jsx)(E().A,{store:t,siteRootBlockStore:i,location:"site_builder_preview",showAddressBar:!0}),(0,z.jsx)("div",{style:f.topBarContainer,onMouseEnter:r,onMouseLeave:d,onClick:()=>R().aD("header"),children:(0,z.jsx)(P().A,{spaceStore:c,keys:p,size:"large",showCustomHeaderPages:!0,left:g&&(0,z.jsx)(K,{store:t,siteRootBlockStore:i}),style:{minHeight:31}})}),(0,z.jsx)(jt,{store:t})]})}function jt(e){const{store:t}=e,i=(0,l().IS)((()=>({pagePreview:{cursor:"default"},overlay:{position:"absolute",width:"100% ",height:"100%",top:204,right:280,cursor:"default",zIndex:999}})),[]),o=(0,n.useCallback)((e=>{v().A.PageScroller=e}),[]);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(S().H,{ref:o,type:k().A.Y,style:{flex:1,height:"100%",overflowY:"auto"},children:(0,z.jsx)(C().Ay,{context:I().Rr.SitePreview,style:i.pagePreview,store:t,paddingBottom:0,disabled:!0})}),(0,z.jsx)("div",{style:i.overlay,onClick:()=>R().wl()})]})}function At(e){let{isThick:t,colorInHex:i}=e;return t?`0px 0px 0px 1.5px ${i}, inset 0px 0px 0px 1.5px ${i}`:`0px 0px 0px 0px ${i}, inset 0px 0px 0px 1px ${i}`}},303742:(e,t,i)=>{i.d(t,{o:()=>s});var o=()=>i(640653),n=()=>i(508496);function s(e){return!!e&&Boolean((0,o().IL)(e)&&"external_pages_sidebar"===n().default.getEligibleGroup({experimentId:"sharing_collaboration_sidebar_guest_aggregation"}))}},551345:(e,t,i)=>{i.d(t,{VN:()=>l,or:()=>r,pV:()=>a});var o=()=>i(120114),n=()=>i(430483),s=()=>i(508496);function r(e){const{configurationState:t}=e;return t.deepFindRequested&&n().zD.isDeepFindEnabled()}function a(e){const{configurationState:t,assistantSurface:i}=e;return r({configurationState:t})&&i.isType("fullPage")}function l(){const e=n().zD.state;return(0,o().AX)(e,(e=>s().default.getConfigKey("deep_find_config",e)),(e=>s().default.checkGate({gateName:e})))}new(i(496506).default)((()=>{var e;const t=n().zD.isDeepFindEnabled(),o=Boolean(null===(e=i(295169).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&o}),{debugName:"isDeepFindActiveStore"})},613735:(e,t,i)=>{i.d(t,{b:()=>r});i(517642),i(658004),i(733853),i(845876),i(432475),i(515024),i(731698);var o=()=>i(278238),n=()=>i(945778),s=()=>i(267419);function r(e){let{icon:t,theme:i}=e;if(t)return(0,n().A)(t)?s().A.state.emojiByColorProcessed[t]:(0,o().T8)(t)?function(e){var t;let{uri:i,theme:n}=e;const s=null===(t=i.match(/\/icons\/[\w\-]*_(.+)\.svg/))||void 0===t?void 0:t[1];if(!function(e){if(!e)return!1;return a.has(e)}(s))return;return o().l8[n.mode][s]}({uri:t,theme:i}):void 0}const a=new Set((0,i(534177).uv)(o().l8.light))},680984:(e,t,i)=>{i.d(t,{A:()=>f});i(296540);var o=()=>i(484714),n=()=>i(847249),s=()=>i(401497),r=i(474848);const a=(0,i(340498).wt)("windowsControls",{viewBox:"0 0 51 9",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("rect",{width:"6",height:".75",x:"1.5",y:"4.625",rx:".375"}),(0,r.jsx)("path",{d:"M22.875 1.25c-.621 0-1.125.504-1.125 1.125v5.25c0 .621.504 1.125 1.125 1.125h5.25c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-5.25Zm0 .75h5.25c.207 0 .375.168.375.375v5.25a.375.375 0 0 1-.375.375h-5.25a.375.375 0 0 1-.375-.375v-5.25c0-.207.168-.375.375-.375ZM43.566 2.162l.044-.052a.375.375 0 0 1 .478-.043l.052.043 2.36 2.36 2.36-2.36a.375.375 0 0 1 .53.53L47.03 5l2.36 2.36c.13.13.145.332.044.478l-.044.052a.375.375 0 0 1-.478.044l-.052-.044-2.36-2.36-2.36 2.36a.375.375 0 1 1-.53-.53L45.97 5l-2.36-2.36a.375.375 0 0 1-.044-.478l.044-.052-.044.052Z"})]})});var l=()=>i(614505),d=()=>i(21140),c=()=>i(562800),u=()=>i(300451),g=()=>i(885400);const p={small:4,regular:8},h={small:{height:22,paddingLeft:8,paddingRight:10},regular:{height:42,paddingTop:10,paddingLeft:20,paddingRight:20,paddingBottom:8}},m={small:{height:28,paddingLeft:8,paddingRight:12},regular:{paddingTop:12,paddingLeft:16,paddingRight:16,paddingBottom:2}};function f(e){const{isMac:t}=(0,o().Y0)();return t?(0,r.jsx)(S,{...e}):(0,r.jsx)(y,{...e})}function S(e){const{store:t,siteRootBlockStore:i,size:o,location:n,showAddressBar:a}=e,l=p[o??"regular"],c=(0,s().IS)((e=>({container:{borderTopRightRadius:6,borderTopLeftRadius:6,backgroundColor:"publish_preview"===n?e.accentColors.gray[75]:"transparent",...h[o??"regular"]},contentContainer:{flex:1}})),[n,o]),u=a&&t&&i;return(0,r.jsxs)(d().Ye,{alignItems:"center",gap:l,style:c.container,children:[(0,r.jsx)(x,{size:o}),u&&(0,r.jsx)(d().Ye,{justifyContent:"center",alignItems:"center",style:c.contentContainer,children:(0,r.jsx)(b,{store:t,siteRootBlockStore:i})})]})}function x(e){const{size:t}=e,i=(0,s().IS)((e=>{const i="small"===t?6:10;return{circle:{borderRadius:"50%",height:i,width:i,background:e.icon.quaternary}}}),[t]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:i.circle}),(0,r.jsx)("div",{style:i.circle}),(0,r.jsx)("div",{style:i.circle})]})}function y(e){const{store:t,siteRootBlockStore:i,size:o,location:n,showAddressBar:a}=e,l=p[o??"regular"],c=(0,s().IS)((e=>({container:{width:"100%",borderTopRightRadius:6,borderTopLeftRadius:6,backgroundColor:"publish_preview"===n?e.sitesPagePreviewWindowsChromeBar:"transparent",...m[o??"regular"]},windowsButtons:{paddingRight:2}})),[n,o]),u=a&&t&&i;return(0,r.jsxs)(d().Ye,{alignItems:"center",justifyContent:u?"center":"flex-end",gap:l,style:c.container,children:[u&&(0,r.jsx)(b,{store:t,siteRootBlockStore:i}),(0,r.jsx)(C,{size:o,style:c.windowsButtons})]})}function C(e){const{size:t,style:i}=e,o=(0,s().IS)((e=>({icon:{height:"small"===t?9:24,width:"small"===t?51:70,color:e.icon.tertiary}})),[t]);return(0,r.jsx)("div",{style:i,children:a(o.icon)})}function b(e){const{store:t,siteRootBlockStore:i}=e,{isMac:a}=(0,o().Y0)(),{icon:p,isEmptyPage:h,publicDomainName:m}=(0,n().K8)((()=>{const e=u().A.getState().faviconUrl;let o;const n=i.getSiteStore(),s=c().Ix({spaceStore:t.getSpaceStore(),domainId:null==n?void 0:n.getDomainId()});return o=e?{pointer:i.pointer,icon:e}:t.getIcon(),{icon:o,isEmptyPage:t.isEmptyPage(),publicDomainName:s}}),[t,i]),f=(0,s().IS)((e=>({container:{paddingLeft:a?120:12,paddingRight:a?120:12,paddingTop:4,paddingBottom:4,background:e.contentBackground,borderRadius:a?16:20,border:`1px solid ${e.stroke.secondary}`,width:a?"auto":"100%",color:e.text.secondary,fontSize:12}})),[a]),S=p?(0,r.jsx)(l().B,{disabled:!0,icon:p,isEmptyPage:h,disableShrinking:!0,size:16,emojiSize:16,style:{marginRight:4}}):(0,r.jsx)(g().A,{});return(0,r.jsxs)(d().Ye,{alignItems:"center",gap:4,style:f.container,children:[a&&S,m]})}},694874:(e,t,i)=>{i.d(t,{Oh:()=>y,Qs:()=>x,Wy:()=>h,aX:()=>f,it:()=>S,tL:()=>m});i(898992),i(354520),i(430670);var o=()=>i(244641),n=()=>i(994310),s=()=>i(534177),r=()=>i(246826),a=()=>i(751156),l=()=>i(755199),d=()=>i(638146),c=()=>i(351360),u=()=>i(846955),g=()=>i(696746),p=()=>i(705059);function h(e){const{currentUserSettingsStore:t}=c().default.state;t&&a().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function m(e){const{currentUserSettingsStore:t}=c().default.state;t&&(u().default.setState({type:"inactive"}),a().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:o().c9.now().toMillis()}})}}))}function f(e){const{environment:t,newSeenWelcomeHomeValue:i}=e,o=c().default.state.currentSpaceViewStore;o&&a().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=o.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");r().KY({store:t,transaction:e,value:i})}})}function S(e){const{environment:t,tipType:i,completed:o}=e,{currentUserSettingsStore:n}=c().default.state;if(!n)return;const s=n.getPersonalHomeTipsSettings(),r={...s,progress_data:{...s.progress_data,[i]:{completed:o}}};a().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:n,transaction:e,data:{personal_home_tips_settings:r}})}})}function x(e){const{environment:t,hide:i}=e,{currentUserSettingsStore:o}=c().default.state;if(!o)return;const n={...o.getPersonalHomeTipsSettings(),hide_completed:i};a().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:o,transaction:e,data:{personal_home_tips_settings:n}})}})}function y(e){const{blockId:t,enabledFeatures:i,userId:o}=e,r=(0,s().WP)(i).flatMap((e=>{let[t,i]=e;if(!i)return[];switch(t){case"tasks":return[(0,g().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const e=(0,g().NY)("customDb");return[e&&(0,d().cf)({userId:o,viewBlockId:e})].filter(s().O9);case"similarUsersAndTrending":return[(0,g().NY)("similarUsersCollectionView"),(0,g().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,g().NY)("postsCollectionView")];case"recents":case"updates":case"templates":case"tips":case"calendar":case"aiChatModule":return[];default:(0,s().HB)(t)}})),{isHomeKey:a,homeCollectionViewIdsKey:l,unifiedFeedEnabledKey:c}=(0,p().h)(t);n().A.set(a,!0),n().A.set(l,r),n().A.set(c,i.unifiedFeed)}},709687:(e,t,i)=>{i.d(t,{r:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("bell",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},799384:(e,t,i)=>{i.d(t,{o:()=>n});i(296540);var o=i(474848);const n=(0,i(340498).wt)("newSidebarSearch",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 8.75C4 6.12665 6.12665 4 8.75 4C11.3734 4 13.5 6.12665 13.5 8.75C13.5 11.3734 11.3734 13.5 8.75 13.5C6.12665 13.5 4 11.3734 4 8.75ZM8.75 2.5C5.29822 2.5 2.5 5.29822 2.5 8.75C2.5 12.2018 5.29822 15 8.75 15C10.2056 15 11.545 14.5024 12.6073 13.668L16.7197 17.7803C17.0126 18.0732 17.4874 18.0732 17.7803 17.7803C18.0732 17.4874 18.0732 17.0126 17.7803 16.7197L13.668 12.6073C14.5024 11.545 15 10.2056 15 8.75C15 5.29822 12.2018 2.5 8.75 2.5Z"})})},801494:(e,t,i)=>{i.d(t,{A:()=>l});var o=i(296540),n=()=>i(959013),s=()=>i(962730),r=i(474848);function a(e,t){const{value:o}=e,a=!1!==o,l=(0,i(847249).K8)((()=>{var e;return Boolean((null===(e=i(351360).default.state.currentSpaceStore)||void 0===e?void 0:e.getDisableMoveToSpace())&&!a)}),[a]);return(0,r.jsx)(i(859428).A,{renderTooltip:()=>l?(0,r.jsx)(n().sA,{id:"publishSiteSettings.duplicateAsTemplate.moveToSpaceDisabledTooltip",defaultMessage:"Move to space is disabled for this workspace"}):(0,r.jsx)(n().sA,{id:"publishSiteSettings.duplicateAsTemplate.tooltip",defaultMessage:"Allow others to duplicate your page"}),render:o=>(0,r.jsx)(i(585293).a,{...(0,i(553965).A)(e,o),ref:t,title:(0,r.jsx)(n().sA,{defaultMessage:"Duplicate as template",id:"publishSiteSettings.duplicateAsTemplate.settingTitle"}),icon:(0,r.jsx)(i(8980).I,{icon:i(764781).V,color:"secondary"}),right:(0,r.jsx)(i(946548).A,{...e,on:a,disabled:e.disabled||l})}),placement:s().W.Bottom,alignment:s().C.Center,textWrap:!0,style:{maxWidth:i(242565).SITE_SETTINGS_TOOLTIP_WIDTH}})}const l=o.forwardRef(a)},885400:(e,t,i)=>{i.d(t,{A:()=>r});var o=()=>i(401497),n=()=>i(426388),s=()=>i(192855);function r(e){const{style:t}=e,i=(0,o().DP)(),r=(0,o().IS)((e=>({notionLogo:{height:14,width:14,fill:e.icon.primary,...t}})),[t]);return"light"===i.mode?(0,n().S)(r.notionLogo):(0,s().L)(r.notionLogo)}},916096:(e,t,i)=>{i.d(t,{ke:()=>D,Ay:()=>U,aQ:()=>K});var o=i(296540),n=()=>i(484714),s=()=>i(847249),r=()=>i(401497),a=()=>i(79275),l=()=>i(959013),d=()=>i(35392),c=()=>i(296798),u=()=>i(859428),g=()=>i(490044),p=()=>i(694874),h=()=>i(696746),m=(i(898992),i(354520),i(672577),i(803949),i(581454),()=>i(187174)),f=()=>i(921997),S=()=>i(519831),x=()=>i(763824),y=()=>i(449506),C=()=>i(941541),b=()=>i(351360),v=()=>i(630116),j=()=>i(634157),A=()=>i(578136);const w=new(i(299919).Y)((e=>new k(e)));class k extends(()=>i(757695))().default{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,i(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const i=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===i.type&&i.data){const e=i.data[0];this.setState(e)}}}function B(e){const t=(0,n().v3)(),i=(0,s().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),r=(0,o.useMemo)((()=>e.filter((e=>!w.has(e)))),[e]);(0,m().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:i}=e,o=await x().dS(i,10,(async e=>(await e.load(),e.isDefined())));if(0===o.length)return;const n=o[0].getSpaceId(),s=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:n,collectionIds:o.map((e=>e.id))}});if("success"===s.type&&s.data)for(let r=0;r<o.length;r++){const e=o[r],t=s.data[r];t.collectionId===e.id&&w.get(e).setState(t)}}({environment:t,collectionStores:r})}),[r,t]);const a=(0,o.useMemo)((()=>e.map((e=>w.get(e)))),[e]);return(0,o.useEffect)((()=>{if(!i)return;const e=a.map((e=>C().Ay.addListener((0,f().eG)(e.collectionStore.id),void 0,(0,C().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&C().Ay.removeListener(e,t)}))}}),[a,i,t]),a}var I=()=>i(962730),_=()=>i(551694),R=()=>i(487941),T=()=>i(846955),M=()=>i(644914),L=()=>i(645873);const E={LazyAiLandingPageExperimentSwitcher:new(L().O2)("LazyAiLandingPageExperimentSwitcher",(()=>i.e(66169).then(i.bind(i,981440))))},P=(0,L()._h)(E.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var H=i(474848);function W(e){const{styles:t}=e,m=(0,n().v3)(),f=(0,l().tz)(),x=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=b().default.state;if(e)return h().x$(e)}),[]),y=(0,s().K8)((()=>{const e=b().default.state.mainEditorCurrentBlockStore;return!!e&&h().Nh(e.id)}),[]),C=(0,s().K8)((()=>"home_available"===T().default.getState().type),[]),w=(0,s().K8)((()=>{var e;return null==x||null===(e=x.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==x?void 0:x.getRecordModel,pageVisitSource:i(584262).y8.SidebarHome})}),[x]),k=function(){const e=(0,n().v3)(),t=(0,s().K8)((()=>(0,A().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),i=(0,s().K8)((()=>{var e;return null===(e=b().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),o=B((0,s().K8)((()=>{if(!t)return[];const e=b().default.state.currentSpaceStore;return i&&e?j().A.getJoinedTeamStores({userId:i,spaceStore:e}).map((t=>v().md.createChildStore(t,{table:S().Vl,id:t.id,spaceId:e.id}))):[]}),[t,i]));return(0,s().K8)((()=>{var e;if(!b().default.state.currentSpaceStore)return!1;const t=(null===(e=b().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return o.find((e=>!(!e.getLatestPostCreatedById()||e.getLatestPostCreatedTime()<=t||e.getLatestPostCreatedById()===i)))}),[o,i])}(),_=(0,i(327300).w4)(),L=(0,s().O$)(i(430483).ts),[E,W]=(0,o.useState)(!1),[D,U]=(0,o.useState)(!1),F=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,i(819121).p)(t)&&U(!0)}),[]),N=(0,o.useCallback)((()=>{U(!1)}),[]),V=(0,o.useCallback)((()=>{i(353643).A.state.isDragging||W(!0)}),[]),O=(0,o.useCallback)((()=>{W(!1)}),[]),Y=(0,s().uB)(void 0,R().A),Z=(0,s().uB)(void 0,R().A),$=(0,s().K8)((()=>Z.state.focused||Z.state.hovered),[Z]),G=(0,o.useCallback)((()=>{(0,p().Wy)(m),(0,i(162674).ZL)({environment:m,from:"sidebar"}),C&&(0,p().tL)(m),i(441199).default.isVisible()&&(0,i(770906).VI)({environment:m})}),[m,C]),q=(0,M().ab)(),Q=(0,r().IS)((e=>({tooltip:{width:200},leftContainer:{position:"relative"},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...q.baseSidebarItem,...y&&q.currentSelectedSidebarItem},homeIconStyle:{...q.topButtonIcon,...y&&q.currentSelectedSidebarIcon}})),[y,q]),X=(0,o.useMemo)((()=>_.showAiFaceInHomeIcon?L?(0,i(366295).L)(q.topButtonIcon):(0,i(654601).X)({width:16}):(0,a().X)(Q.homeIconStyle)),[_.showAiFaceInHomeIcon,L,Q.homeIconStyle,q.topButtonIcon]),J=(0,o.useCallback)((()=>$?"":(0,H.jsxs)("div",{style:Q.tooltip,children:[(0,H.jsx)("div",{children:f.formatMessage(K.tooltip)}),(0,H.jsx)(d().A,{style:Q.shortcutLabel,name:"openHome"})]})),[$,f,Q.shortcutLabel,Q.tooltip]);return(0,H.jsx)(u().A,{store:Y,renderTooltip:J,disableTooltip:C,originGap:6,textWrap:!0,placement:I().W.Right,render:e=>(0,H.jsx)(c().A,{...e,style:Q.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:w,onClick:G,"aria-current":y?"page":void 0,children:(0,H.jsx)(g().A,{left:(0,H.jsxs)("div",{style:Q.leftContainer,children:[X,k&&(0,H.jsx)(z,{})]}),disableMobileBorder:!0,right:(0,H.jsx)(P,{isHovered:E,isFocused:D,tooltipStore:Z,parentTooltipStore:Y}),onMouseMove:V,onMouseLeave:O,onFocus:F,onBlur:N,children:f.formatMessage(K.label)})})})}function D(e){const{styles:t}=e,i=(0,s().K8)((()=>"home_available"===T().default.getState().type),[]),o=(0,M().ab)(),n=(0,r().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,H.jsx)(u().A,{renderTooltip:()=>(0,H.jsxs)("div",{style:n.tooltip,children:[(0,H.jsx)("div",{children:(0,H.jsx)(l().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,H.jsx)(d().A,{style:n.shortcutLabel,name:"openHome"})]}),disableTooltip:i,originGap:6,textWrap:!0,placement:I().W.Right,render:e=>(0,H.jsx)(c().A,{...e,style:o.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{_().A.open()},children:(0,H.jsx)(g().A,{left:(0,a().X)(o.topButtonIcon),disableMobileBorder:!0,children:(0,H.jsx)(l().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function z(e){const{top:t=0,right:i=-3}=e,o=(0,r().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:t,right:i,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[t,i]);return(0,H.jsx)("div",{style:o.unreadBadge})}const K=(0,l().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),U=o.memo(W)}}]);