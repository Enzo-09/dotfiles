"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[209,90871,99718],{26440:(e,t,n)=>{n.d(t,{w:()=>o});n(296540);var a=n(474848);const r={viewBox:"0 0 20 20",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M3.442 13.102a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 1 1 2.303 5.46.625.625 0 1 1 .872-.895A6.375 6.375 0 1 0 3.625 10v1.151l1.187-1.187a.625.625 0 1 1 .884.884z"}),(0,a.jsx)("path",{d:"M9.375 5.725a.625.625 0 0 1 1.25 0v3.65H13.6a.625.625 0 0 1 0 1.25H10A.625.625 0 0 1 9.375 10z"})]})},o=(0,n(340498).wt)("clockArrowBack",r)},27716:(e,t,n)=>{n.d(t,{D_:()=>A,Ft:()=>T,HN:()=>y,MA:()=>h,Sk:()=>S,Yn:()=>M,e9:()=>g,eJ:()=>I,su:()=>w});n(944114),n(898992),n(672577),n(737550);var a=()=>n(326215),r=()=>n(762433),o=()=>n(47273),i=()=>n(979340),s=()=>n(959013),c=()=>n(972435),l=()=>n(324561);const d=(0,s().YK)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function u(e){return(0,i().dL)(e)?"free":(0,i().wb)(e)?"education":(0,i().sP)(e)?"singlePlayerPlus":(0,i().$P)(e)?"plus":(0,i().tL)(e)?"business":(0,i().OX)(e)?"enterprise":"legacy"}const m=(0,s().YK)({freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),p={free:{planTitle:m.freePlan},singlePlayerPlus:{planTitle:m.plusPlan},education:{planTitle:m.educationPlusPlan},plus:{planTitle:m.plusPlan},business:{planTitle:m.businessPlan},enterprise:{planTitle:m.enterprisePlan},legacy:{planTitle:m.legacyPlan}},f=(0,s().YK)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),v=(0,s().YK)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function g(){return c().A.formatMessage(d.unableToCancelError)}function h(){return c().A.formatMessage(d.cancellationSuccess)}function b(e){var t;const n=null==e||null===(t=e.subscription)||void 0===t?void 0:t.pending;if(!n)return;const a=(0,r().PP)(e),i=(0,r().lQ)(e);return{oldTier:(0,o().Gf)(a)??"free",newTier:(0,o().Gf)(i)??"free",oldAIAddOn:(0,o().V_)(a).find((e=>"ai"===e)),newAIAddOn:(0,o().V_)(i).find((e=>"ai"===e)),oldInterval:(0,o().yw)(a),newInterval:(0,o().yw)(i),phaseOneEndDate:n.startDate}}function S(e){const t=b(e);return!(!t||!t.newInterval)&&t.oldInterval!==t.newInterval}function y(e){const t=b(e);return!!t&&t.oldTier!==t.newTier}function w(e){const t=b(e),n=[];if(!t)return{scheduledChanges:n,periodEndDate:null};const{newTier:a,oldTier:r,oldAIAddOn:o,newAIAddOn:i,oldInterval:s,newInterval:l,phaseOneEndDate:d}=t;var m,g;return r!==a&&n.push(function(e,t){const n=u(e),a=c().A.formatMessage(p[n].planTitle);if(!t)return"";const r=u(t);return`${a} → ${c().A.formatMessage(p[r].planTitle)}`}(r,a)),o!==i&&n.push((m=o,g=i,`${c().A.formatMessage(m?f.notionAI:f.removeAI)} → ${c().A.formatMessage(g?f.notionAI:f.removeAI)}`)),s!==l&&n.push(function(e,t){return e&&t?`${c().A.formatMessage("month"===e?v.month:v.year)} → ${c().A.formatMessage("month"===t?v.month:v.year)}`:""}(s,l)),{scheduledChanges:n,periodEndDate:d}}function T(e,t){if(!e)return;const n=(0,r().PP)(e).items,a=(0,r().lQ)(e).items;var o;return(0,r().HO)(n,a).some((e=>{let[n,a]=e;return(0,r().IE)(n??a)===t&&n&&!a}))?null===(o=e.subscription)||void 0===o||null===(o=o.pending)||void 0===o?void 0:o.startDate:void 0}function A(e){if(!e)return;var t;return 0===(0,r().lQ)(e).items.length?null===(t=e.subscription)||void 0===t||null===(t=t.pending)||void 0===t?void 0:t.startDate:void 0}function I(e){let{billingData:t}=e;const n=(0,l().a9)(t);if(!n)return!1;if((0,r().et)(t))return!1;const a=(0,r().bO)(n),o=(0,r().N8)(null==n?void 0:n.subscription);return!a&&!o}function M(e){const t=(0,r().V9)(e),n=(0,r().ji)(e).length>0;return!t||(!a().xd.includes(t)||!(!n||!a().iV.includes(t)))}},35588:(e,t,n)=>{n.r(t),n.d(t,{handWaveIcon:()=>r,iconDefinition:()=>a});n(296540);const a={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M6.7 3.115a1.828 1.828 0 0 0-2.558 2.151 1.828 1.828 0 0 0-.882 2.93l.084.1a1.827 1.827 0 0 0-.724 2.876l3.616 4.298a6.291 6.291 0 0 0 10.73-6.193l-1.762-4.868a1.863 1.863 0 0 0-3.612.54L9.737 2.747a1.828 1.828 0 0 0-3.038.369m-1.174 1.2a.58.58 0 0 1 .814.07L9.17 7.748a.625.625 0 0 0 .956-.805L7.897 4.295a.578.578 0 0 1 .884-.744l3.73 4.431a.625.625 0 0 0 1.07-.598l-.71-2.149a.612.612 0 0 1 1.158-.4l1.762 4.867a5.042 5.042 0 0 1-8.598 4.963l-3.617-4.297a.577.577 0 1 1 .885-.744l1.627 1.934a.625.625 0 0 0 .957-.805L4.216 7.392a.578.578 0 0 1 .884-.744l2.228 2.648a.625.625 0 0 0 .957-.805L5.456 5.13a.58.58 0 0 1 .07-.814"})},r=(0,n(340498).wt)("handWave",a)},43450:(e,t,n)=>{n.d(t,{R:()=>o});var a=()=>n(484714),r=()=>n(847249);function o(e){const t=(0,a().v3)();return(0,r().K8)((()=>{const n=t.currentUser.id;return!!(e&&e.isDefined()&&n)&&Boolean(e.isOwner(n))}),[t.currentUser.id,e])}},47273:(e,t,n)=>{n.d(t,{DS:()=>r,Fe:()=>l,GB:()=>i,Gf:()=>u,V_:()=>d,j1:()=>c,j8:()=>o,yp:()=>m,yw:()=>s});var a=()=>n(762433);function r(e){return(0,a().Fq)({subscription:e})}function o(e){return(0,a().Ry)({subscription:e,trial:void 0})}function i(e){let{subscriptionState:t,logFunction:n,spaceId:r}=e;const o=p(t);return(0,a().yB)({billingData:{subscription:o,trial:void 0},logFunction:n,spaceId:r})}function s(e){return(0,a().q8)({subscription:e})}function c(e){return(0,a().V9)({subscription:p(e),trial:void 0})}function l(e){return(0,a().d$)({subscription:p(e),trial:void 0})}function d(e){return(0,a().ji)({subscription:p(e),trial:void 0})}function u(e){return(0,a().AI)({subscription:p(e),trial:void 0})}function m(e,t){return(0,a().KH)({subscription:p(e),trial:void 0},t)}function p(e){return e?{...e,trialEnd:void 0}:void 0}},86089:(e,t,n)=>{n.d(t,{o:()=>l});var a=n(296540),r=()=>n(484714),o=()=>n(847249),i=()=>n(351360),s=()=>n(779795),c=()=>n(981046);function l(){const e=(0,r().v3)(),{spaceId:t,isGuest:n}=(0,o().K8)((()=>{const e=i().default.state.currentSpaceStore,t=null==e?void 0:e.getPublicSpaceData();return{spaceId:null==e?void 0:e.id,isGuest:"none"===(null==t?void 0:t.role)}}),[]);return(0,a.useEffect)((()=>{t&&!n&&(0,s().$W)({environment:e,spaceId:t})}),[e,t,n]),(0,o().K8)((()=>c().A.state.prices),[])}},97835:(e,t,n)=>{n.d(t,{x:()=>o});n(296540);var a=n(474848);const r={viewBox:"0 0 20 20",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("g",{clipPath:"url(#clip0_9151_10917)",children:[(0,a.jsx)("path",{d:"M10 2.375c-1.137 0-2.054.47-2.674 1.242-.608.757-.9 1.765-.9 2.824s.292 2.066.9 2.824c.62.772 1.537 1.241 2.674 1.241s2.055-.469 2.675-1.241c.608-.758.9-1.766.9-2.824 0-1.059-.292-2.067-.9-2.824-.62-.773-1.538-1.242-2.675-1.242M7.676 6.441c0-.842.233-1.554.624-2.042.38-.473.937-.774 1.7-.774s1.32.301 1.7.774c.391.488.624 1.2.624 2.042s-.233 1.554-.624 2.041c-.38.473-.937.774-1.7.774s-1.32-.3-1.7-.774c-.391-.487-.624-1.2-.624-2.041M10 11.63c-2.7 0-5.101 1.315-6.12 3.305-.361.706-.199 1.421.23 1.923.412.48 1.06.767 1.74.767h5.845a4.6 4.6 0 0 1-.28-1.25H5.85c-.342 0-.634-.148-.79-.33-.138-.162-.172-.336-.067-.54.761-1.488 2.672-2.626 5.007-2.626.83 0 1.605.144 2.294.395.269-.364.59-.688.952-.96A7.9 7.9 0 0 0 10 11.63"}),(0,a.jsx)("path",{d:"M16 19.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7m2.594-3.469a.625.625 0 0 0-.625-.625h-1.375v-1.375a.625.625 0 0 0-1.25 0v1.375h-1.375a.625.625 0 0 0 0 1.25h1.375v1.375a.625.625 0 1 0 1.25 0v-1.375h1.375c.345 0 .625-.28.625-.625"})]}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_9151_10917",children:(0,a.jsx)("path",{d:"M20 0H0v20h20z"})})})]})},o=(0,n(340498).wt)("inviteMember",r)},108414:(e,t,n)=>{n.d(t,{A:()=>r});class a extends(()=>n(757695))().default{getInitialState(){return{open:!1}}}const r=new a},126617:(e,t,n)=>{n.d(t,{Y:()=>r});n(296540);const a={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},r=(0,n(340498).wt)("ellipsisSmall",a)},127896:(e,t,n)=>{n.r(t),n.d(t,{default:()=>B});n(898992),n(354520),n(581454);var a=n(296540),r=()=>n(484714),o=()=>n(847249),i=()=>n(401497),s=()=>n(584262),c=()=>n(959013),l=()=>n(857783),d=()=>n(728611),u=()=>n(722872),m=()=>n(578136),p=()=>n(736767),f=()=>n(928600),v=()=>n(939740),g=()=>n(958378),h=()=>n(89924),b=()=>n(120739),S=()=>n(284371),y=()=>n(946141),w=()=>n(435009),T=()=>n(962730),A=()=>n(210737),I=()=>n(238518),M=()=>n(341974),_=()=>n(898808),x=()=>n(192940),j=()=>n(704152),C=()=>n(16006),P=()=>n(859428),O=n(474848);function R(e){const{teamStore:t}=e,n=(0,r().v3)(),s=(0,x().h)(t),l=(0,o().K8)((()=>(0,m().D)({isMobileNative:n.device.isMobileNative,disableExposureLogging:!0})),[n.device.isMobileNative]),d=function(e){let{teamHomeEnabled:t}=e;const n=(0,r().v3)();return(0,i().IS)((e=>({headerWrap:{display:"flex",...t?{padding:4,marginLeft:8,marginRight:8,borderRadius:6}:{marginLeft:12,marginRight:12},alignItems:"center",...n.device.isMobile&&{paddingTop:12,paddingBottom:8}},teamNameContainer:{marginRight:10,flexGrow:1,flexShrink:0,lineHeight:"1em"},teamName:{fontSize:12,fontWeight:S().Wy.semibold,maxWidth:180,marginRight:4,alignSelf:"center",...S().RC},teamNameAndSettings:{display:"flex"},icon:{marginRight:10,marginTop:2},memberCount:{fontSize:12,color:e.text.tertiary}})),[n,t])}({teamHomeEnabled:l}),u=()=>{A().A.addNamedPopup("team_more_actions"),y().lR(n,{store:t,from:"team_menu_header"})},p=()=>{A().A.removeNamedPopup("team_more_actions")},f=(0,a.useCallback)((e=>{l&&w().oo({environment:n,url:(0,b().a)({teamId:t.id}),openInNew:e.metaKey||e.ctrlKey?"tab":void 0})}),[n,t.id,l]);return(0,O.jsx)(P().A,{renderTooltip:()=>(0,O.jsx)(c().sA,{defaultMessage:"View teamspace home",id:"TeamMenuHeader.tooltip"}),disableTooltip:!l,alignment:T().C.Start,render:e=>(0,O.jsxs)(j().A,{...e,style:d.headerWrap,onClick:f,disabled:!l,children:[(0,O.jsx)(_().x,{disabled:!0,store:t,size:28,style:d.icon}),(0,O.jsxs)("div",{style:d.teamNameContainer,children:[(0,O.jsxs)("div",{style:d.teamNameAndSettings,children:[(0,O.jsx)(C().A,{store:t,style:d.teamName}),(0,O.jsx)(I().OutlinerTeamOverflow,{teamStore:t,onPopupClick:u,onPopupClose:p,from:"team_menu_header",hideJoin:!0})]}),(0,O.jsx)("div",{style:d.memberCount,children:(0,O.jsx)(c().sA,{defaultMessage:"{numberOfMembers, plural, one {{numberOfMembers} member} other {{numberOfMembers} members}}",values:{numberOfMembers:s},id:"teamMenuHeader.teamMemberCount"})})]}),(0,O.jsx)(M().TeamJoinLeaveButton,{teamStore:t,from:"team_breadcrumb_popup",navigateToTeamHomeOnJoin:!1})]})})}const D=7;function B(e){const{teamStore:t,parent:n}=e,a=(0,r().v3)(),b=(0,o().K8)((()=>(0,m().D)({isMobileNative:a.device.isMobileNative,disableExposureLogging:!0})),[a.device.isMobileNative]),S=(0,o().K8)((()=>t.getTeamPagesStores().filter((e=>e.canRead()&&e.isNavigableBlock()))),[t]),y=function(){const e=(0,r().v3)();return(0,i().IS)((t=>({morePagesCaption:e.device.isMobile?{}:{marginTop:0,marginBottom:0}})),[e])}();return(0,O.jsx)(f().A,{menuType:a.device.isMobile?u().gu.ActionSheet:u().gu.Popup,minWidth:280,header:(0,O.jsx)(h().A,{extraTopPadding:!0,children:(0,O.jsx)(R,{teamStore:t})}),children:(0,O.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:b,sections:[{key:"pages",items:S.slice(0,D).map((e=>({key:e.id,render:t=>(0,O.jsx)(g().A,{store:e,hidePath:!0,...t}),action:t=>{const r=d().Vr(t.event);l().uK({environment:a,store:e,openInNew:r,pageVisitSource:s().y8.Breadcrumb}),r||n.close()}}))),render:e=>(0,O.jsxs)(h().A,{...e,children:[e.children,S.length>D&&(0,O.jsx)(p().A,{style:y.morePagesCaption,caption:(0,O.jsx)(c().sA,{defaultMessage:"{numberOfMorePages} more…",values:{numberOfMorePages:S.length-D},id:"TeamBreadcrumbPopup.morePages"})})]})}]})})}},141273:(e,t,n)=>{n.d(t,{g:()=>c});var a=n(296540),r=()=>n(484714),o=()=>n(47170),i=()=>n(749356),s=()=>n(985315);function c(e){var t;const n=(0,r().v3)(),[c,l]=(0,a.useState)(),d=(0,o().O)(),u=(null===(t=(0,s().g)({spaceId:d}))||void 0===t?void 0:t.length)??0;return(0,a.useEffect)((()=>{!async function(){d&&l(await(0,i().L6)({environment:n,spaceId:d,offerCampaign:e}))}()}),[n,d,e,u]),c}},149257:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(296540),r=()=>n(959013),o=n(474848);const i=(0,r().YK)({message_placeholder:{id:"teamInviteLinkRequestPage.message.placeholder",defaultMessage:"Message (optional)"}});const s=function(e){const{teamStore:t,teamName:s,teamId:c,isModalOpen:l,onDismiss:d}=e,[u,m]=(0,a.useState)(""),p=(0,n(484714).v3)(),f=(0,r().tz)(),v=async()=>{await n(350648).Ip({environment:p,teamId:c,message:u}),d()},g=(0,n(401497).IS)((()=>({modal:{alignSelf:"center",overflow:"visible",padding:15,width:420},requestTitle:{display:"inline-flex",marginBottom:10},icon:{marginLeft:4,marginRight:4},footer:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:15},requestInvitesButton:{marginLeft:20},input:{padding:8}})),[]);return(0,o.jsx)(n(676007).A,{open:l,onDismiss:d,innerStyle:g.modal,preventHideChildrenWhileOpening:!0,render:()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{style:g.requestTitle,children:(0,o.jsx)(r().sA,{id:"teamInviteLinkRequestModal.reasonForRequest.title",defaultMessage:"Request access to {icon} {teamName}",values:{teamName:s,icon:(0,o.jsx)(n(898808).x,{style:g.icon,store:t,disabled:!0,size:22})}})}),(0,o.jsx)(n(623580).A,{textarea:!0,style:g.input,value:u,onChange:e=>{m(e.target.value)},placeholder:f.formatMessage(i.message_placeholder)}),(0,o.jsxs)("div",{style:g.footer,children:[(0,o.jsx)(n(125565).A,{isSecondaryColor:!0,isSmall:!0,isMultiline:!0,children:(0,o.jsx)(r().sA,{id:"teamInviteLinkRequestModal.caption",defaultMessage:"Your teamspace owners will approve or decline your request."})}),(0,o.jsx)(n(204063).A,{size:"lg",style:g.requestInvitesButton,onClick:v,children:(0,o.jsx)(r().sA,{id:"teamInviteLinkRequestModal.requestAccessButton.label",defaultMessage:"Request"})})]})]})})}},192940:(e,t,n)=>{n.d(t,{h:()=>o});var a=()=>n(847249),r=()=>n(37433);function o(e){return(0,a().K8)((()=>{var t;return void 0===e?0:(null===(t=(0,r().getTeamMemberCountAndSampleUserIds)(e))||void 0===t?void 0:t.memberCountWithGuests)??0}),[e])}},205618:(e,t,n)=>{n.d(t,{A:()=>r});class a extends(()=>n(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:n(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const r=a},211825:(e,t,n)=>{n.d(t,{G:()=>i});var a=()=>n(484714),r=()=>n(847249),o=()=>n(486130);function i(e){const t=(0,a().v3)().currentUser.id;return(0,r().K8)((()=>Boolean(void 0!==t&&e.isNonGuestMember(t,o()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()})))),[t,e])}},212727:(e,t,n)=>{n.r(t),n.d(t,{gearIcon:()=>o,iconDefinition:()=>r});n(296540);var a=n(474848);const r={viewBox:"0 0 20 20",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,a.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},o=(0,n(340498).wt)("gear",r)},233510:(e,t,n)=>{n.d(t,{Z:()=>d,c:()=>l});var a=()=>n(847249),r=()=>n(979340),o=()=>n(809730),i=()=>n(351360),s=()=>n(807778),c=()=>n(527059);function l(e){const{currentSpaceStore:t}=(0,a().O$)(i().default),n=e??t;return(0,a().K8)((()=>{const e=(null==n?void 0:n.getSubscriptionTier())??"free";return(0,r().rV)(e,"business")}),[n])}function d(){const{currentSpaceStore:e}=(0,a().O$)(i().default),t=(0,c().lh)({spaceId:null==e?void 0:e.id});return(0,a().K8)((()=>{const n=(null==e?void 0:e.getSubscriptionTier())??"free";return!(0,s().hG)()&&(0,r().rV)(n,"business")||(0,o().e)({billingData:t})}),[e,t])}},238518:(e,t,n)=>{n.r(t),n.d(t,{OutlinerTeamOverflow:()=>ae,TeamOverflowMenu:()=>re});n(898992),n(354520),n(581454);var a=n(296540),r=()=>n(484714),o=()=>n(847249),i=()=>n(401497),s=()=>n(934999),c=()=>n(26440),l=()=>n(764781),d=()=>n(126617),u=()=>n(212727),m=()=>n(35588),p=()=>n(97835),f=()=>n(835607),v=n(474848);const g=(0,n(340498).wt)("personAdmin",{viewBox:"0 0 15 16",svg:(0,v.jsx)("path",{d:"M6.082 7.215a2.71 2.71 0 001.504-.438c.451-.296.811-.69 1.08-1.182a3.352 3.352 0 00.403-1.634 3.21 3.21 0 00-.403-1.6 3.059 3.059 0 00-1.08-1.141A2.776 2.776 0 006.082.796c-.547 0-1.048.143-1.504.43a3.153 3.153 0 00-1.087 1.156 3.195 3.195 0 00-.403 1.593 3.39 3.39 0 00.41 1.627c.269.487.629.88 1.08 1.175a2.71 2.71 0 001.504.438zm0-1.19c-.314 0-.606-.088-.875-.266a1.974 1.974 0 01-.636-.738 2.247 2.247 0 01-.239-1.046c0-.379.08-.718.24-1.019.159-.3.37-.538.635-.71.264-.179.556-.267.875-.267.319 0 .61.086.875.26.264.172.476.41.636.71.16.296.239.634.239 1.012 0 .387-.08.738-.24 1.053-.159.31-.37.556-.635.738a1.508 1.508 0 01-.875.273zm-4.266 7.54h5.948a3.113 3.113 0 01-.082-.752v-.43H1.59c-.082 0-.141-.014-.178-.041-.032-.027-.048-.073-.048-.137 0-.26.105-.56.315-.902.21-.342.512-.673.909-.992.4-.323.893-.59 1.476-.8.588-.213 1.26-.32 2.017-.32a5.648 5.648 0 011.92.328c.17-.42.466-.732.89-.937a6.605 6.605 0 00-1.313-.417 6.856 6.856 0 00-1.497-.157c-.92 0-1.75.139-2.488.417-.739.273-1.372.631-1.9 1.073-.525.442-.928.918-1.21 1.429-.279.51-.418.998-.418 1.463 0 .784.584 1.175 1.75 1.175zm6.843-.731c0 .438.091.804.274 1.1.182.297.469.58.861.848.392.274.907.588 1.545.944a.6.6 0 00.294.082.62.62 0 00.335-.082c.638-.36 1.153-.675 1.545-.944.392-.269.679-.551.861-.847.182-.297.274-.664.274-1.101v-2.468a.979.979 0 00-.137-.54c-.087-.141-.24-.26-.458-.355a17.47 17.47 0 00-.417-.15c-.182-.069-.38-.14-.595-.213-.21-.077-.403-.145-.581-.205a13.002 13.002 0 01-.403-.15 1.263 1.263 0 00-.417-.055c-.146 0-.292.028-.438.082-.077.028-.205.07-.383.13l-.574.198c-.205.073-.399.144-.58.212-.183.064-.32.114-.411.15-.219.096-.374.215-.465.356a1.02 1.02 0 00-.13.54v2.468zm2.598 1.326a.601.601 0 01-.212-.04.416.416 0 01-.178-.124l-1.155-1.244a.671.671 0 01-.096-.178.492.492 0 01-.034-.178c0-.145.048-.264.144-.355a.492.492 0 01.341-.13.485.485 0 01.363.15l.793.869 1.613-2.229a.484.484 0 01.41-.219c.132 0 .246.048.342.144.1.091.15.205.15.342 0 .04-.009.086-.027.136a.463.463 0 01-.075.15l-1.983 2.722c-.086.123-.218.184-.396.184z"})});var h=()=>n(617668),b=()=>n(979340),S=()=>n(468006),y=()=>n(959013),w=()=>n(534177),T=()=>n(416726),A=()=>n(946141),I=()=>n(575143),M=()=>n(452558),_=()=>n(704152),x=()=>n(406699),j=()=>n(928600),C=()=>n(8980),P=()=>n(89924),O=()=>n(859428),R=()=>n(986863),D=()=>n(38337),B=()=>n(722872),N=()=>n(37433),k=()=>n(632709),E=()=>n(962730),L=()=>n(351360),U=()=>n(463830),K=()=>n(205618),H=()=>n(486130),F=()=>n(406965),V=()=>n(477093),q=()=>n(848237);n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);function W(e){let{adminStatus:t,accessLevel:n,isArchivedTeam:a}=e;if("adminThatCanPerformPrivilegedActions"===t)return new Set(["join","joinAsOwner"]);if(a)switch(t){case"none":return new Set;case"admin":return new Set("open"===n?["join"]:[]);default:(0,w().HB)(t)}switch(n){case"open":return new Set(["join"]);case"closed":case"private":return new Set;default:(0,w().HB)(n)}}var z=()=>n(931956),G=()=>n(605685),$=()=>n(685781),J=()=>n(233510),Y=()=>n(976519),Q=()=>n(211825),X=()=>n(418426);const Z=["join","view","add","duplicate","leave","archive","restore"],ee=["add"],te=["join","joinAsOwner","upgradeSelfToOwner","leave"],ne=(0,y().YK)({add:{defaultMessage:"Add members",id:"sidebar.outlinerTeamToggleButton.addLabel"},leave:{defaultMessage:"Leave teamspace",id:"sidebar.outlinerTeamToggleButton.leaveLabel"},joinAsOwner:{defaultMessage:"Join as owner",id:"sidebar.outlinerTeamToggleButton.joinAsOwnerLabel"},joinAsMember:{defaultMessage:"Join as member",id:"sidebar.outlinerTeamToggleButton.joinAsMemberLabel"},joinTeamspace:{defaultMessage:"Join teamspace",id:"sidebar.outlinerTeamToggleButton.joinLabel"},upgradeSelfToOwner:{defaultMessage:"Become owner",id:"sidebar.outlinerTeamToggleButton.upgradeSelfToOwnerLabel"},archive:{defaultMessage:"Archive teamspace",id:"sidebar.outlinerTeamToggleButton.archiveLabel"},restore:{defaultMessage:"Restore teamspace",id:"outlinerTeamOverflow.teamActions.restoreLabel"},duplicate:{defaultMessage:"Duplicate teamspace",id:"sidebar.outlinerTeamToggleButton.duplicateLabel"},teamspaceSettings:{defaultMessage:"Teamspace settings",id:"sidebar.outlinerTeamToggleButton.ownerViewLabel"},viewMembers:{defaultMessage:"View members",id:"sidebar.outlinerTeamToggleButton.unjoinedMemberViewLabel"}});function ae(e){let{teamStore:t,style:n,from:a,hideJoin:s,onPopupClick:c,onPopupClose:l}=e;const u=(0,r().Y0)(),m=(0,y().tz)(),p=(0,o().uB)(void 0,K().A),f=(0,o().O$)(L().AppStoreCurrentSpaceStore),g=(0,o().uB)(void 0,U().A),h=(0,i().IS)((e=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",borderRadius:4,height:20,width:20,...n}})),[n]),b=m.formatMessage({defaultMessage:"Teamspace settings and members...",id:"sidebar.outlinerTeamToggleButton.tooltip"});return f?u.isMobile?null:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(O().A,{textWrap:!1,renderTooltip:()=>b,placement:E().W.Bottom,render:e=>(0,v.jsx)(x().Ay,{popupType:x().z7.Popup,buttonPopupStore:g,alignmentToOrigin:x().yP.Start,originGap:2,renderOrigin:t=>(0,v.jsx)(_().A,{ariaLabel:b,className:D()._Oc,style:h.buttonStyle,mobileFeedback:!1,...e,...t,children:(0,v.jsx)(C().I,{icon:d().Y,size:"sm",color:"secondary"})}),render:e=>(0,v.jsx)(re,{teamStore:t,permissionsInviteStore:p,onDismiss:e.close,from:a,hideJoin:s,buttonPopupStore:g}),onClick:c,onClose:l})}),(0,v.jsx)(R().u,{permissionsInviteStore:p,store:t})]}):null}function re(e){const{teamStore:t,permissionsInviteStore:n,onDismiss:d,from:_,hideJoin:x,buttonPopupStore:R}=e,U=(0,i().DP)(),K=(0,r().v3)(),ae=(0,i().IS)((()=>({menuItemButton:{minWidth:200},caption:{minWidth:230}})),[]),re=(0,o().O$)(L().AppStoreCurrentSpaceStore),oe=(0,Q().G)(t),ie=(0,o().K8)((()=>(0,S().Sh)({archived_by:t.getArchivedBy()})),[t]),se=K.currentUser.id,ce=(0,o().K8)((()=>H()._.getSpacePermissionGroupIds({userId:se,spaceId:null==re?void 0:re.id})),[se,re]),le=(0,o().K8)((()=>se?t.getTeamRoleForUser(se,ce)??"none":"none"),[se,t,ce]),de=(0,o().K8)((()=>!(!t.isDefined()||!se)&&Boolean(t.isOwner(se))),[se,t]),ue=(0,Y().q)(t.id),me=(0,z().X)(t),{id:pe,name:fe,isDefault:ve}=(0,o().K8)((()=>({id:t.id,name:t.getName(),isDefault:t.isDefault()})),[t]),ge=(0,G().c)(),he=(0,o().K8)((()=>(0,N().canCreateTeam)({environment:K,spaceStore:re})),[re,K]),be=(0,$().a)(_),Se=function(e){const{isDefault:t,accessLevel:n,settings:a}=(0,o().K8)((()=>({isDefault:e.isDefault(),accessLevel:e.getTeamAccessLevel(),settings:e.getSettings()})),[e]),r="private"===n,i=(0,J().c)(),s=r&&!i?"business":void 0,c=(null==a?void 0:a.disable_public_access)||(null==a?void 0:a.disable_export)||(null==a?void 0:a.disable_guests),l=(0,J().Z)(),d=c&&!l?"enterprise":void 0,u=(0,b().hW)([d,s]);if(t)return"isDefault";if(u)return u}(t),ye="isDefault"===(we=Se)?(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateDefaultTeamspace",defaultMessage:"Cannot duplicate a default teamspace"}):"business"===we?(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithBusinessFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Business plans or above"}):"enterprise"===we?(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotDuplicateTeamspaceWithEnterpriseFeaturesOnDowngradedAccount",defaultMessage:"Cannot duplicate a teamspace with settings only allowed on Enterprise plans or above"}):void 0===we?void 0:(0,w().HB)(we);var we;const Te=(0,o().K8)((()=>t.getTeamAccessLevel()),[t]),Ae=(0,X().$)(t),Ie=(0,a.useCallback)((e=>{A().ks(K,{store:t,from:_,option:e})}),[K,t,_]),Me=ue&&!ge,_e=(0,o().K8)((()=>Boolean(null==re?void 0:re.canAdmin())),[re]),{joinLeaveOptionsToShow:xe,leaveOptionDisabledState:je}=function(e){let{teamRole:t,adminStatus:n,isDefaultTeam:a,accessLevel:r,isArchivedTeam:o}=e;switch(t){case"owner":case"member":const e=new Set,i=!o;return i&&e.add("leave"),"owner"!==t&&"adminThatCanPerformPrivilegedActions"===n&&e.add("upgradeSelfToOwner"),{joinLeaveOptionsToShow:e,leaveOptionDisabledState:i&&a?{disabled:!0,disabledReasonKey:"defaultTeam"}:void 0};case"team_level_guest":return{joinLeaveOptionsToShow:new Set,leaveOptionDisabledState:void 0};case"none":return{joinLeaveOptionsToShow:W({adminStatus:n,accessLevel:r,isArchivedTeam:o}),leaveOptionDisabledState:void 0};default:(0,w().HB)(t)}}({teamRole:le,adminStatus:be?"adminThatCanPerformPrivilegedActions":_e?"admin":"none",isArchivedTeam:ie,isDefaultTeam:ve,accessLevel:Te}),Ce=xe.has("joinAsOwner"),Pe=be&&!(1===xe.size&&xe.has("leave")),Oe=(0,o().K8)((()=>(0,N().getCanRestoreTeam)(t)),[t]),Re={add:{type:"action",show:!ie&&me,handle:()=>{n.update((e=>({...e,modalOpen:!0})))},title:ne.add,icon:(0,v.jsx)(C().I,{icon:p().x})},leave:{type:"action",...Pe&&{colorOverride:U.redBadgeBackground},show:xe.has("leave"),handle:()=>{q().JC({environment:K,teamStore:t,from:_,userGroupsInTeam:Ae})},title:ne.leave,disabled:Boolean(null==je?void 0:je.disabled),icon:(0,v.jsx)(C().I,{icon:m().handWaveIcon}),disabledTooltipText:"defaultTeam"===(null==je?void 0:je.disabledReasonKey)&&(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotLeaveDefaulTeamTooltip",defaultMessage:"Cannot leave a default teamspace"})},join:{type:"action",show:!x&&xe.has("join"),handle:async()=>{if(re)switch(Te){case"open":await q().e2({environment:K,teamStore:t,currentSpaceStore:re,from:_,andNavigateToTeamHome:!1});break;case"closed":case"private":await q().z9({environment:K,teamStore:t,currentSpaceStore:re,from:_,action:"joinClosedOrPrivateTeamAsMember"});break;default:(0,w().HB)(Te)}},title:Ce?ne.joinAsMember:ne.joinTeamspace,icon:(0,v.jsx)(C().I,{icon:h().plusIcon,color:"secondary"})},joinAsOwner:{type:"action",show:Ce,handle:()=>q().z9({environment:K,teamStore:t,currentSpaceStore:re,from:_,action:"joinTeamAsOwner"}),title:ne.joinAsOwner,icon:(0,v.jsx)(C().I,{icon:g})},upgradeSelfToOwner:{type:"action",show:xe.has("upgradeSelfToOwner"),handle:()=>q().z9({environment:K,teamStore:t,currentSpaceStore:re,from:_,action:"upgradeToOwner"}),title:ne.upgradeSelfToOwner,icon:(0,v.jsx)(C().I,{icon:g})},archive:{type:"action",show:!ie&&de,colorOverride:U.redBadgeBackground,handle:async()=>{Me||(await q().mm({teamStore:t,environment:K,from:_}),F().P({environment:K,messageStoreEmitValue:-1}))},title:ne.archive,disabled:Me,disabledTooltipText:(0,v.jsx)("div",{style:{whiteSpace:"normal"},children:(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.cannotArchiveTooltip.moreThanOneMember",defaultMessage:"There must only be one member in the workspace to archive this teamspace"})}),icon:(0,v.jsx)(C().I,{icon:s().B})},restore:{type:"action",show:ie,handle:async()=>{de&&Oe&&(await q().Q8({environment:K,teamStore:t,teamName:fe,from:_}),F().P({environment:K,messageStoreEmitValue:-1}))},title:ne.restore,icon:(0,v.jsx)(C().I,{icon:c().w}),disabled:!Oe||!de,disabledTooltipText:Oe?(0,v.jsx)(y().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.notOwner",defaultMessage:"Only teamspace owners can restore archived teamspaces."}):(0,v.jsx)(y().sA,{id:"outlinerTeamOverflow.restoreArchivedTeam.disabledTooltipText.noDefaultTeam",defaultMessage:"You must have an active default teamspace to restore this {accessLevel} teamspace.",values:{accessLevel:Te}})},duplicate:{type:"action",show:!ie&&he,handle:()=>{V().hX({environment:K,teamStore:t,from:_,buttonPopupStore:R})},title:ne.duplicate,disabled:void 0!==Se,icon:(0,v.jsx)(C().I,{icon:l().V}),disabledTooltipText:ye,caption:(0,v.jsx)(y().sA,{id:"sidebar.outlinerTeamToggleButton.duplicateCaption",defaultMessage:"Duplicates permissions and other settings but not pages and members"})},view:{type:"action",show:!ie,handle:()=>q().F2({environment:K,teamId:pe,tab:k().p.Members,from:_}),title:oe&&!ie?ne.teamspaceSettings:ne.viewMembers,icon:oe?(0,v.jsx)(C().I,{icon:u().gearIcon}):(0,v.jsx)(C().I,{icon:f().peopleIcon})}},De=(Pe?[{sectionName:"join/leave section",orderedOptions:te},{sectionName:"other actions",orderedOptions:Z.filter((e=>!te.includes(e)))}]:[{sectionName:"add section",orderedOptions:ee},{sectionName:"other actions section",orderedOptions:Z.filter((e=>!ee.includes(e)))}]).map((e=>{const t=e.orderedOptions.filter((e=>Re[e].show));if(0!==t.length)return{sectionName:e.sectionName,filteredOptions:t}})).filter(w().O9).map((e=>{const t=e.filteredOptions.map((e=>{const t=Re[e],{type:n}=t;return"action"===n?(0,T().Ls)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,validators:[],closeParentMenu:!0,action:()=>{d(),Ie(e),t.handle()},render:e=>(0,v.jsx)(O().A,{placement:E().W.Left,textWrap:!1,disableTooltip:!(t.disabled&&t.disabledTooltipText),renderTooltip:()=>t.disabledTooltipText,render:n=>(0,v.jsx)(I().A,{...e,...n,svg:()=>t.icon,title:(0,v.jsx)(y().sA,{...t.title}),buttonStyle:{...ae.menuItemButton,...!t.disabled&&t.colorOverride?{fill:t.colorOverride,color:t.colorOverride}:{fill:U.regularIconColor,color:U.text.primary}},disabled:t.disabled,disabledFeedback:t.disabled,caption:t.caption,captionStyle:ae.caption,shouldWrapCaption:!0})})}):"extensionAction"===n?(0,T().uk)({key:e,displayName:t.title,analyticsName:t.title.defaultMessage,svg:()=>t.icon,width:250,validators:[],subActions:()=>t.subActionSections.map((t=>({...t,actions:t.actions.map((t=>({...t,action:n=>{d(),Ie(e),t.action(n)}})))})))}):void(0,w().HB)(n)}));return(0,T().gy)({key:e.sectionName,render:e=>(0,v.jsx)(P().A,{...e}),actions:t})}));return(0,v.jsx)(j().A,{className:D()._En,menuType:B().gu.Popup,minWidth:"100%",children:(0,v.jsx)(M().A,{context:{blocks:[],environment:K,publicEditMode:void 0},sections:De,initialFocus:void 0})})}},240865:(e,t,n)=>{n.d(t,{V:()=>o});var a=()=>n(847249),r=()=>n(351360);function o(){return(0,a().K8)((()=>{const{currentSpaceStore:e}=r().default.state;return(null==e?void 0:e.getMemberCountFromPublicSpaceData())??void 0}),[])}},314907:(e,t,n)=>{n.d(t,{E:()=>o});var a=()=>n(847249),r=()=>n(134217);function o(e){return(0,a().K8)((()=>r().Fq(e.state)),[e])}},324561:(e,t,n)=>{n.d(t,{Gi:()=>f,OD:()=>d,Q7:()=>p,UU:()=>v,_3:()=>m,a9:()=>u,f_:()=>l});var a=()=>n(484714),r=()=>n(847249),o=()=>n(857639),i=()=>n(762433),s=()=>n(596513),c=()=>n(714300);function l(e){let{spaceId:t}=e;const n=(0,a().v3)();return(0,r().K8)((()=>{if(t)return s().t.getData(n,{spaceId:t})}),[n,t])}function d(e){let{environment:t,spaceId:n}=e;return n?s().t.awaitData(t,{spaceId:n}):Promise.resolve(void 0)}function u(e){if("admin"===(null==e?void 0:e.type))return e}function m(e){let{spaceId:t}=e;return u((0,c().l)({spaceId:t}))}function p(e,t,n){if(!t)return 0;const a=(0,i().yB)({spaceId:e,logFunction:o().log.bind(o()),billingData:t});return a?Math.max(a,n):0}function f(e){var t;const n=null===(t=(0,i().KH)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const a=n.unitAmount,r="year"===n.billingInterval?12:1;return{amount:a.amount/r,currencyCode:a.currencyCode}}function v(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}},341974:(e,t,n)=>{n.r(t),n.d(t,{TeamJoinLeaveButton:()=>b});var a=n(296540),r=()=>n(484714),o=()=>n(847249),i=()=>n(401497),s=()=>n(284371),c=()=>n(640653),l=()=>n(37433),d=()=>n(515512),u=()=>n(211825),m=()=>n(959013),p=()=>n(493823),f=n(474848);const v=function(e){const{teamStore:t,from:i,navigateToTeamHomeOnJoin:s,style:c,hoveredStyle:l,icon:d,isRed:u}=e,v=(0,r().v3)(),g=(0,o().O$)(n(351360).AppStoreCurrentSpaceStore),h=(0,a.useCallback)((async()=>{g&&await n(848237).e2({environment:v,teamStore:t,currentSpaceStore:g,from:i,andNavigateToTeamHome:s??!1})}),[g,v,t,i,s]);return(0,f.jsx)(p().p,{style:c,hoveredStyle:l,onClick:h,icon:d,isRed:u,children:(0,f.jsx)(m().sA,{id:"outlinerTeamToggleButton.joinTeamButton",defaultMessage:"Join"})})};var g=()=>n(655784);const h=function(e){const{teamStore:t,style:r,hoveredStyle:i}=e,[s,c]=(0,a.useState)(!1),l=(0,o().K8)((()=>t.getName()),[t]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p().p,{style:r,hoveredStyle:i,onClick:()=>c(!0),children:(0,f.jsx)(m().sA,{id:"teamRequestButton.requestButton.label",defaultMessage:"Request"})}),(0,f.jsx)(n(149257).A,{teamStore:t,teamName:l,teamId:t.id,isModalOpen:s,onDismiss:()=>c(!1)})]})};function b(e){const{teamStore:t,style:n,hoveredStyle:a}=e,m=(0,r().v3)(),p=(0,d().Q)(),b=(0,u().G)(t),S=(0,o().K8)((()=>t.getTeamAccessLevel()),[t]),y=(0,i().IS)((e=>({joinTeamButton:{maxHeight:26,marginLeft:10,paddingLeft:10,paddingRight:10,borderRadius:100,fontSize:13,fontWeight:s().Wy.semibold,background:e.buttonHoveredBackground,alignSelf:"center",...n},joinTeamButtonHoveredStyle:{background:e.buttonPressedBackground,...a}})),[n,a]),w=(0,o().K8)((()=>(0,l().isUnownedTeam)({membership:t.getRawMembership()})&&(0,c().s7)(m)),[m,t]),T=!b&&"open"===S||w,A=!b&&"closed"===S;return p?null:b?(0,f.jsx)(g().A,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):T?(0,f.jsx)(v,{...e,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):A?(0,f.jsx)(h,{teamStore:t,style:y.joinTeamButton,hoveredStyle:y.joinTeamButtonHoveredStyle}):null}},350648:(e,t,n)=>{n.d(t,{D2:()=>T,Ip:()=>S,Jk:()=>y,YT:()=>w,e2:()=>h,g:()=>b});n(898992),n(354520);var a=()=>n(584262),r=()=>n(798880),o=()=>n(946141),i=()=>n(449506),s=()=>n(246826),c=()=>n(436572),l=()=>n(426116),d=()=>n(751156),u=()=>n(972435),m=()=>n(640653),p=()=>n(351360),f=()=>n(848237),v=()=>n(263928);const g=(0,n(959013).YK)({joinTeamSuccessMessage:{id:"teamInviteLinkActions.joinTeam.confirmationMessage",defaultMessage:"Joined {teamName}"},requestTeamSuccessMessage:{id:"teamInviteLinkActions.requestAccess.successMessage",defaultMessage:"Successfully requested membership"},requestTeamFailureMessage:{id:"teamInviteLinkActions.requestAccess.failureMessage",defaultMessage:"Failed to request membership"}});async function h(e){let{environment:t,userId:n,teamStore:a,user:r}=e;const i=a.getSpaceId();if(!i)return;await f().rU({environment:t,teamId:a.id,spaceId:i,teamUserInfo:r,isSettingDefaultTeam:!1,inviterId:n})&&(o().vo(t,{store:a,joined_role:"member",from:"team_invite_link"}),await b({environment:t,userId:n,teamStore:a}),c().D6({label:u().A.formatMessage(g.joinTeamSuccessMessage,{teamName:a.getName()})}))}async function b(e){let{environment:t,userId:n,teamStore:r}=e;const o=p().default.state.currentUserRootStore,i=r.getSpaceId();if(!i||!o)return;const s=o.getSpaceViewStores().filter((e=>e.getSpaceId()===i))[0];await l().tR({environment:t,spaceViewStore:s,userSettingsStore:void 0,userRootStore:o,pageVisitSource:a().y8.JoinTeam,navigationType:"switchingToOrLoadingSpace"}),await v().J({environment:t,spaceId:i,userId:n}),f().L0({environment:t,teamStore:r,shouldScroll:!0})}async function S(e){let{environment:t,teamId:n,message:a}=e;if(!t.currentUser.id)return;"success"===(await i().callApi({eventName:"requestAccess",environment:t,data:{type:"current-actor-to-team",teamId:n,message:a}})).type?(o().XQ(t,{teamId:n}),await w({environment:t}),new Promise((e=>setTimeout(e,500))).then((()=>{c().D6({label:u().A.formatMessage(g.requestTeamSuccessMessage)})}))):c().D6({label:u().A.formatMessage(g.requestTeamFailureMessage)})}async function y(e){let{environment:t,teamStore:n,accessRequestStore:a,status:i}=e;const c=a.getForActorId();if(!c)return;const l=a.getRecordModel({table:r().oo,id:c});if(l){if("approved"===i){const e=[{type:"member",entity_type:"user",user_id:l.id}];if(!(await f().Zd({environment:t,teamStore:n,teamMemberInfos:e,isSettingDefaultTeam:!1,createNewTeamFlowId:void 0})))return}d().createAndCommit({userAction:"GrantAccessActivityAction.handleGrantAccess",environment:t,canUndo:!0,perform:e=>{s().zv({store:a,transaction:e,data:{resolved_time:Date.now(),resolved_by_table:r().oo,resolved_by_id:t.currentUser.id,status:i}})}}),o().GW(t,{store:n,resolution:i})}}async function w(e){let{environment:t}=e;const{lastVisitedSpaceView:n,userRootStore:r,userSettingsStore:o}=await(0,m().ex)({environment:t,disableRedirectUrl:!1});n?await l().tR({environment:t,spaceViewStore:n,userRootStore:r,userSettingsStore:o,pageVisitSource:a().y8.BackForward,navigationType:"switchingToOrLoadingSpace"}):await l().t9({environment:t,userRootStore:r,userSettingsStore:o,pageVisitSource:a().y8.BackForward})}async function T(e){let{environment:t,teamId:n}=e;const a=await i().callApi({eventName:"getTeamAccessRequestMetadata",environment:t,data:{teamId:n}});if("success"===a.type)return a.data}},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>O,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>A,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>T,MAX_RECURRENCE_INTERVAL:()=>h,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>b,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>M,areRecurrenceSchedulesEqual:()=>k,convertFromUnpersistedRecurrenceConfig:()=>N,convertToUnpersistedRecurrenceConfig:()=>R,getFormattedEndCondition:()=>P,getFormattedNextRecurrenceTime:()=>C,getNewEndTimestamp:()=>D,getNextDateUtc:()=>j,getRecurrenceAfter:()=>_,isRunningBetweenMidnightAnd3AM:()=>x,isValidRecurrenceInterval:()=>S,isValidRecurrenceNumberOfRuns:()=>y,rruleFromRecurrence:()=>w,templateAncestorsViolateRecurrenceNesting:()=>I});n(898992),n(354520),n(581454);var a=()=>n(244641);n(944114);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(0===n.length)return e.map((e=>[e]));const o=[];for(const i of e)o.push(...r(n[0],...n.slice(1)).map((e=>[i,...e])));return o}var o=()=>n(496603),i=()=>n(534177),s=()=>n(720665),c=()=>n(597777),l=()=>n(869190),d=()=>n(416504),u=()=>n(402390);class m extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),v={day:m.DAILY,week:m.WEEKLY,month:m.MONTHLY,year:m.YEARLY},g={MO:m.MO,TU:m.TU,WE:m.WE,TH:m.TH,FR:m.FR,SA:m.SA,SU:m.SU},h=99,b=999;function S(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function y(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function w(e){const{start_date:t,frequency:n,interval:a,weekdays:o,timezone:s,hour:l,minute:d}=e,u="week"===n&&o?o.map((e=>g[e])):void 0,p={};return(0,i().O9)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,c().eU)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,i().HB)(e.end_condition)),"month"===e.frequency&&(0,i().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,i().HB)(e.monthly_restriction)),new m({freq:v[n],dtstart:(0,c().eU)(t),interval:a,byweekday:u,tzid:s,byhour:l??0,byminute:d??0,bysecond:0,...p})}const T=1,A=1;function I(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),a=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,o=a>T,i=n.length>=A;return{violatesConstraint:o||i,templateNestingExceedsMaxDepth:o,ancestorHasDailyTemplate:i,nestedDepthOfAutomationAncestors:a,immediateAncestorRecurrenceType:r}}function M(e){var t;const{recurrence:n,afterDate:r}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=r)return n;let o=a().c9.fromMillis(n.start_date,{zone:"utc"});const i=a().c9.fromMillis(r,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(i.diff(o,"years").years/n.interval);o=o.plus({years:e*n.interval});break}case"month":{const e=Math.floor(i.diff(o,"months").months/n.interval);o=o.plus({months:e*n.interval});break}case"week":{const e=Math.floor(i.diff(o,"weeks").weeks/n.interval);o=o.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(i.diff(o,"days").days/n.interval);o=o.plus({days:e*n.interval});break}}return{...n,start_date:(0,c().DH)(o.toMillis())}}function _(e){const{recurrence:t,afterDate:n}=e;if((0,p().wt)(t)){const e=(0,c().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=w(M({recurrence:t,afterDate:n})).after((0,c().eU)(n));if(!e)return;return(0,c().h1)(e)}}function x(e){return 0===e.hour||1===e.hour||2===e.hour}function j(e){return w(e).after((0,c().eU)((0,c().Rz)()))||void 0}function C(e){const{recurrence:t,intl:n}=e,r=j(N(t));if(!r)return;const o=x(t),i=a().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,l().Yq)({date:i,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(o)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=i.toLocaleString(a().c9.TIME_SIMPLE);return t.timezone!==(0,d().P)()&&(e+=` ${i.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:s,time:e})}}function P(e,t){return(0,i().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,l().Yq)({date:a().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,i().HB)(e):t.formatMessage(f.noEndCondition)}const O=100;function R(e){return{...e,start_date:(0,c().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,c().l1)(e.end_condition.end_at)}:(0,i().HB)(e.end_condition):void 0}}function D(e,t,n){return e.plus(n-t)}function B(e,t){const n=a().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,c().Rz)(n.toJSDate())}}function N(e){return{...e,start_date:(0,c().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?B(e,e.end_condition):(0,i().HB)(e.end_condition):void 0}}function k(e,t){const n=o().fN(e,(e=>void 0!==e)),a=o().fN(t,(e=>void 0!==e));return o().n4(n,a)}},406965:(e,t,n)=>{n.d(t,{P:()=>u,U:()=>d});n(581454);var a=()=>n(945382),r=()=>n(534177),o=()=>n(37433),i=()=>n(646736),s=()=>n(351360),c=()=>n(134206),l=()=>n(912979);function d(){c().A.reset(),l().A.reset()}async function u(e){let{environment:t,messageStoreEmitValue:n,spaceStore:c}=e;if(!function(e){const t=l().A.state;switch(t.loadingState){case"uninitialized":return!0;case"loading":return!1;case"loaded":return-1===e||e!==t.messageStoreEmitValue;default:(0,r().HB)(t)}}(n))return!1;const{currentSpaceStore:d,currentUserStore:u}=s().default.state,m=d||c;if(!m||!u)return!1;"uninitialized"===l().A.state.loadingState&&l().A.setState({loadingState:"loading"});const p=await async function(e){let{environment:t,currentSpaceStore:n,currentUserStore:r}=e;const s=n.getModel(),c=r.id,l=(0,i().dp)(n,c).getModel();if(void 0===s||void 0===l)return;if((0,a().fK)({space:s,spaceUser:l})){return await(0,o().getAllTeamsInSpaceForEnterpriseAdmin)({environment:t,spaceStore:n,includeArchived:!0,currentUserId:c,minRoleOnTeamStores:"reader"})}const d=await(0,o().getTeamsWithAggregateData)({fromCache:!1,environment:t,spaceStore:n,includeArchived:!0,currentUserId:c});if(!d)return;return d.teams}({environment:t,currentSpaceStore:m,currentUserStore:u});if(!(0,r().O9)(p))return l().A.setState({loadingState:"uninitialized"}),!1;const{archivedTeams:f,unarchivedTeams:v}=(0,o().partitionArchivedAndUnarchivedTeams)(p);return l().A.setState({loadingState:"loaded",archivedTeamIds:f.map((e=>e.id)),unarchivedTeamIds:v.map((e=>e.id)),messageStoreEmitValue:n}),!0}},418426:(e,t,n)=>{n.d(t,{$:()=>c});n(898992),n(354520),n(581454);var a=()=>n(484714),r=()=>n(847249),o=()=>n(468006),i=()=>n(605402),s=()=>n(486130);function c(e){const t=(0,a().v3)().currentUser.id;return(0,r().K8)((()=>{if(!e.isDefined())return[];return(0,o().ri)({rawMembers:e.getRawMembership(),groupsInSpace:i().A.state.permissionGroupsAndMemberCounts.map((e=>e.group))}).filter((n=>s()._.getSpacePermissionGroupIds({userId:t,spaceId:e.getSpaceId()}).has(n.getGroupId())))}),[t,e])}},477093:(e,t,n)=>{n.d(t,{Vs:()=>x,gj:()=>_,v4:()=>j,hX:()=>P,oH:()=>C});n(16280);var a=()=>n(110192),r=()=>n(857639),o=()=>n(416504),i=()=>n(206267),s=()=>n(854150),c=()=>n(529316),l=()=>n(797573),d=()=>n(919709),u=()=>n(946141),m=()=>n(449506),p=()=>n(413677),f=()=>n(751156),v=()=>n(972435),g=()=>n(45359),h=()=>n(37433),b=()=>n(274511),S=()=>n(406792),y=()=>n(632709),w=()=>n(351360),T=()=>n(630116),A=()=>n(108414),I=()=>n(519831);var M=()=>n(848237);async function _(e){let{environment:t,name:n,description:a,icon:r,accessLevel:o,isDefault:i,flowId:c,createTeamHome:l,teamPermissionRole:d,spacePermissionRole:p,members:f,settings:v}=e;const{currentSpaceStore:g}=w().default.getState();if(!g)throw new Error("currentSpaceStore does not exist");const h=S().default.mark("client_create_team_latency"),b=g.id,y=await m().callApi({eventName:"createTeam",environment:t,data:{spaceId:b,name:n,description:a,icon:r,isDefault:i,accessLevel:o,teamPermissionRole:d,spacePermissionRole:p,members:f,settings:v}});if("failed"===y.type)return void(0,M().O)(y);const{teamId:A}=y.data,_=T().h4.createChildStore(g,{table:s().yK,id:A,spaceId:b});await _.load();const x=null==_?void 0:_.getChannelStore();return await(null==x?void 0:x.load()),async function(e){const{environment:t,channelStore:n,parentStore:a}=e,r=null==n?void 0:n.getSpaceId(),o=n&&r&&{id:n.id,table:I().Vl,spaceId:r},i=a&&o&&T().md.createChildStore(a,o),s=n&&n.isReady()&&!n.isDefined()&&n.canEdit();if(!n||!a||!i)return;const c=n.getSpaceId();if(c&&s){const e=await m().callApi({eventName:"createCollectionViewBlockForPosts",environment:t,data:{spaceId:c,parentId:a.pointer.id,parentTable:a.pointer.table,channelId:n.id}});if("failed"===e.type)throw e.error;if("success"===e.type){const{collectionViewBlockId:t}=e.data}}}({environment:t,channelStore:x,parentStore:_}),l&&O({environment:t,teamStore:_}),u()._P(t,{store:_,flowId:c}),S().default.measure(h,{environment:t}),_}function x(e){var t;let{environment:n,page:a}=e;const r=i().JW(),o=(null===(t=a.getParentPointer())||void 0===t?void 0:t.table)!==s().yK?"page_to_team_nested":"page_to_team";u().H8(n,{from:o,flowId:r}),A().A.setState({open:!0,pageStore:a,flowId:r})}async function j(e){var t;let{environment:n,page:a,flowId:r,intl:i}=e;const{accessLevel:c,spacePermissionRole:l,teamPermissionRole:u,members:m}=(0,h().getAccessLevelAndPermissionsForTeamCreatedFromPage)(a),p=(a.isDefined()?a.getModel().getRenderTitle({intl:i,userTimeZone:(0,o().P)(),getRecordModel:a.getRecordModel}):void 0)??d().q4_(a.getTitleValue()),v=await _({environment:n,name:p,icon:null===(t=a.getIcon())||void 0===t?void 0:t.icon,accessLevel:c,isDefault:!1,description:"",flowId:r,createTeamHome:!1,teamPermissionRole:u,spacePermissionRole:l,members:m});if(!v)return;const{currentSpaceViewStore:g}=w().default.state;if(!g)return;const S=await(0,b().U)();f().createAndCommit({userAction:"teamActions.movePageToCreatedTeam",environment:n,canUndo:!0,perform:e=>{S({environment:n,currentSpaceViewStore:g,transaction:e,teamStore:v,action:"move",value:{type:s().yK,id:v.id},targets:[a],location:{type:"append"}})}}),(0,M().F2)({environment:n,teamId:v.id,tab:y().p.Members,from:"create_team_from_page"}),await new Promise((e=>setTimeout((()=>(0,M().Mh)({teamStore:v,environment:n})),100)))}async function C(e){let{environment:t,name:n,description:a,icon:r,flowId:o,trackCreateTeamComplete:i}=e;const{currentSpaceStore:c}=w().default.getState();if(!c)throw new Error("currentSpaceStore does not exist");const l=c.id,d=await m().callApi({eventName:"enableTeams",environment:t,data:{spaceId:l,defaultTeamName:n,defaultTeamIcon:r,defaultTeamDescription:a}});if("failed"===d.type)return void(0,M().O)(d);const{teamId:p}=d.data,f=T().h4.createChildStore(c,{table:s().yK,id:p,spaceId:l});return await f.load(),await O({environment:t,teamStore:f}),u().b0(t,{spaceId:l,store:f,flowId:o}),i&&p&&u()._P(t,{store:f,flowId:o}),f}async function P(e){var t;let{environment:n,teamStore:r,from:o,buttonPopupStore:s}=e;if(!n.currentUser.id)return!1;const c=i().JW(),l=r.isDefault(),d=r.getTeamAccessLevel();if(l)return!1;const m=r.getName(),p=await _({environment:n,name:(0,a().Q)(m||""),description:"",icon:r.getRawIcon(),accessLevel:d,isDefault:l,createTeamHome:!0,teamPermissionRole:null===(t=r.getTeamPermission())||void 0===t?void 0:t.role,spacePermissionRole:r.getSpacePermissionRole(),members:[],settings:r.getSettings(),flowId:c});return!!p&&(u().KK(n,{store:p,from:o}),(0,M().L0)({environment:n,teamStore:p,shouldScroll:!0}),(0,M().F2)({environment:n,teamId:p.id,tab:y().p.General,from:"duplicate_team",buttonPopupStore:s}),new Promise((e=>setTimeout(e,500))).then((()=>{(0,g().jH)(m)})),!0)}async function O(e){const{environment:t,teamStore:n}=e,a=w().default.state.currentSpaceStore,o=w().default.state.currentSpaceViewStore;if(!a||!o)return r().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-SpaceOrSpaceViewStoreError"}),!1;const i=(s=v().A.getIntl(),(0,l().B)(c().wA.teamsHomepage,s));var s;return!!(await p().createTemplateInstance({environment:t,item:i,spaceStore:a,spaceViewStore:o,useMinimalTemplates:!1,type:"inTeam",teamStore:n,from:"homepage_team",isOnboarding:!1}))||(r().log({level:"error",from:"teamActions",type:"createHomepageOnTeamCreation-PageNotCreated"}),!1)}},515512:(e,t,n)=>{n.d(t,{Q:()=>c});var a=()=>n(484714),r=()=>n(847249),o=()=>n(640653),i=()=>n(351360),s=()=>n(749240);function c(){const e=function(){const e=(0,a().v3)();return(0,r().K8)((()=>{const t=i().default.state.currentSpaceStore,n=s().subscriptionDataStoreInstance.state;return t?o().IL(t)?n?{loading:!1,isUserTeamGuestOfSpace:o().Qx(e,n)}:{loading:!0}:{loading:!1,isUserTeamGuestOfSpace:!1}:{loading:!0}}),[e])}();return(0,r().K8)((()=>e.loading||e.isUserTeamGuestOfSpace),[e])}},527059:(e,t,n)=>{n.d(t,{lh:()=>i().l,bw:()=>l,UL:()=>T,lI:()=>M,IU:()=>x,Wo:()=>_().W,EF:()=>j().E,o2:()=>C().o});var a=()=>n(484714),r=()=>n(187174),o=()=>n(449506);var i=()=>n(714300),s=()=>n(847249),c=()=>n(27716);function l(e){return(0,s().K8)((()=>(0,c().eJ)({billingData:e})),[e])}var d=n(296540),u=()=>n(786508),m=()=>n(166386),p=()=>n(58293),f=()=>n(762433),v=()=>n(640653),g=()=>n(47170),h=()=>n(240865),b=()=>n(351360),S=()=>n(324561),y=()=>n(10984),w=()=>n(141273);function T(e){const t=(0,a().v3)(),[n,r]=(0,d.useState)(!1),i=function(e){const t=(0,w().g)("ai_fifty_percent_upgrade"),n=(0,g().O)(),a=(0,S().f_)({spaceId:n}),r=(0,f().eh)(a,"ai"),o=(0,h().V)();return(0,s().K8)((()=>{const n=t&&!r&&(0,y().wb)()&&1===o,a=(0,v().aB)(b().default.state.currentSpaceStore);return Boolean(n&&(!a||"sidebar"!==e||a>=7))}),[t,r,o,e])}(e),c=(0,p().r)(),l=(0,s().K8)((()=>null==c?void 0:c.canAdmin()),[c]),T=(0,s().K8)((()=>null==c?void 0:c.getSpaceId()),[c]);return(0,d.useEffect)((()=>{!async function(){if(i&&T&&l)try{const n=await o().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:T,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===n.type)return;if("offer"in n.data){var e;const t=(0,u().RS)(null===(e=n.data)||void 0===e?void 0:e.offer);r((0,m().J5)(t))}}catch(n){return}}()}),[t,i,T,l]),n}var A=()=>n(176983),I=()=>n(975971);function M(e){let{spaceId:t}=e;const n=(0,a().v3)(),r=(0,A().J)();return(0,s().K8)((()=>{if(!t||!r)return;const e=I().A.getData(n,{spaceId:t});return null==e?void 0:e.billingData}),[n,t,r])}var _=()=>n(987427);function x(e,t){const n=(0,s().O$)(e),a=(0,h().V)()??1,l=(0,g().O)(),d=(0,i().l)({spaceId:l}),u=(0,s().K8)((()=>(0,c().eJ)({billingData:d})),[d]),[{value:m}]=(0,r().Yb)((()=>o().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);return!!m&&("failed"!==m.type&&(!!m.data.isEligible&&(!!n&&(!!d&&(!Boolean((0,f().KH)(d,"plan"))&&(u&&1===a))))))}var j=()=>n(314907),C=()=>n(86089)},603815:(e,t,n)=>{n.d(t,{A$:()=>M,JQ:()=>_,Vn:()=>A,s4:()=>I});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var a=()=>n(857639),r=()=>n(585515),o=()=>n(577449),i=()=>n(388821),s=()=>n(179034),c=()=>n(545285),l=()=>n(534177),d=()=>n(449506),u=()=>n(780054),m=()=>n(989423),p=()=>n(870618),f=()=>n(303626),v=()=>n(14307),g=()=>n(245865),h=()=>n(540758),b=()=>n(670631),S=()=>n(508496),y=()=>n(571963),w=()=>n(603815),T=()=>n(108944);async function A(e){const{environment:t,request:n,abortSignal:a,prefetchCacheKey:r,headers:o}=e;return(0,y().updateLoadCachedPageChunkCalledAt)(),v().isConnected()||v().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:n,abortSignal:a,prefetchCacheKey:r,headers:o}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:n,abortSignal:a,prefetchCacheKey:r,headers:o})}async function I(e){const{mode:t,environment:n,request:l,isFirstChunk:d,abortSignal:v}=e,g={...l,limit:30,cursor:l.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await w().A$(n,{id:l.page.id,table:s().ev}),null!=v&&v.aborted))throw new Error("Abort signal received");const S=i().RecordMapWithRole.create(),y=[];let T=!1;const A=new Set,I=await r().T(g,o().h.fromMonomorphicFunctionUnsafe((async e=>{const a=await p().h7({environment:n,pointer:e,abortSignal:v,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=v&&v.aborted)throw new Error("Abort signal received");if(a)return S.setModelAndRole(e,a.model,a.role),a.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,c().u)(e)&&!A.has(e.id)&&d){if(void 0===b().A.state.offlinePages)return y.push(e),void(T=!0);if(void 0===b().A.state.offlinePages||!h().Bd(l.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);y.push(e)}})),((e,t,n,a)=>{f().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${n})`),null!=a&&a.suppressErrorOnClient&&A.add(t.id)}));if(T&&(await b().A.waitUntil((()=>void 0!==b().A.state.offlinePages)),!h().Bd(l.page.id))){const[e]=y;throw new Error(`Record not found: ${e.table},${e.id}`)}if(y.length>0&&(0,m().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,m().u4)({environment:n,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&a().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:l.page.id,missingRecords:y}})})),null!=v&&v.aborted)throw new Error("Abort signal received");return{recordMap:S.toJson(),cursor:I.cursorValue}}async function M(e,t){const n=e.currentUser.id;if(!n||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:n})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),g().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function _(e){if(!S().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=i().RecordMapPolymorphic.create();let n=0;const a=()=>n>=50,r=e=>{"space"!==(null==e?void 0:e.table)&&(a()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),n++))};if(e.isReady())for(const i of(0,T().E)(e))r(i);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);r(t.getModel({table:"notion_user",id:e.userId}));let n=0;for(const e of t.getPointersByTable("notion_user")){if(a()||n>=10)break;n++,r(t.getModel(e))}}const o=Array.from(t).map((e=>{let{pointer:t,value:n}=e;if(void 0!==n)return{pointer:t,version:n}})).filter(l().O9);return o.length?o:void 0}},605685:(e,t,n)=>{n.d(t,{c:()=>l});n(898992),n(354520),n(581454);var a=()=>n(484714),r=()=>n(847249),o=()=>n(433847),i=()=>n(534177),s=()=>n(240865),c=()=>n(351360);function l(){const e=(0,a().v3)().currentUser.id,t=(0,r().O$)(c().AppStoreCurrentSpaceViewStore),n=(0,s().V)()??1;return(0,r().K8)((()=>!(!e||null==t||!t.isDefined())&&(0,o().z8)({userId:e,teamsThatUserIsANonGuestMemberOf:t.getNonGuestTeamsStores().map((e=>e.getModel())).filter(i().O9),spaceMembersCount:n})),[e,t,n])}},617668:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>a,plusIcon:()=>r});n(296540);const a={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10.625 3.75a.625.625 0 1 0-1.25 0v5.625H3.75a.625.625 0 1 0 0 1.25h5.625v5.625a.625.625 0 1 0 1.25 0v-5.625h5.625a.625.625 0 1 0 0-1.25h-5.625z"})},r=(0,n(340498).wt)("plus",a)},655784:(e,t,n)=>{n.d(t,{A:()=>d});n(581454);var a=n(296540),r=()=>n(484714),o=()=>n(847249),i=()=>n(959013),s=()=>n(496603),c=()=>n(418426),l=n(474848);const d=function(e){const{teamStore:t,from:d,onLeavingTeam:u,style:m,hoveredStyle:p,icon:f,isRed:v,placement:g,alignment:h,buttonInternals:b}=e,S=(0,r().v3)(),y=(0,o().O$)(n(351360).AppStoreCurrentSpaceStore),w=(0,c().$)(t),T=(0,a.useCallback)((async()=>{if(!y)return;await n(848237).JC({environment:S,teamStore:t,from:d,userGroupsInTeam:w})&&(null==u||u())}),[y,S,t,d,w,u]),A=(0,l.jsx)(i().sA,{id:"teamJoinLeaveButton.leaveTeam.enabledTooltip",defaultMessage:"Click to leave teamspace"}),I=function(e){let{teamStore:t}=e;const n=(0,r().v3)(),a=n.currentUser.id,{isDefaultTeam:d}=(0,o().K8)((()=>({isDefaultTeam:t.isDefault()})),[t]),u=(0,c().$)(t),m=(0,o().K8)((()=>{if(!t.isReady())return!1;const{ownerUserIds:e,ownerGroupIds:n}=t.getAllOwnerIds();return Boolean(a&&t.isOwner(a)&&e.length+n.length===1)}),[t,a]);return function(e){let{isDefaultTeam:t,isOnlyTeamOwner:n,userGroupsInTeam:a}=e;if(t)return(0,l.jsx)(i().sA,{id:"teamBrowser.teamCard.leaveTeam.defaultTeamTooltip",defaultMessage:"You can’t leave this teamspace because everyone in the workspace must be a member"});if(n)return(0,l.jsx)(i().sA,{id:"teamJoinLeaveButton.leaveTeam.onlyOwnerTooltip",defaultMessage:"Invite another teamspace owner to leave this teamspace"});if(a.length>0)return(0,l.jsx)(i().sA,{id:"teamBrowser.teamCard.leaveTeam.groupTooltip",defaultMessage:"{groupNames, plural, one {You can't leave this teamspace because you're a member of multiple groups, {groupNames}.} other {You can't leave this teamspace because you're a member of the group, {groupNames}.}}",values:{groupNames:s().oE(a.map((e=>e.name))).join()}})}({isDefaultTeam:d,isOnlyTeamOwner:m,userGroupsInTeam:u})}({teamStore:t}),M=Boolean(I),_=M?I:A;return(0,l.jsx)(n(859428).A,{style:M?{width:240}:void 0,disableTooltip:!Boolean(_),renderTooltip:e=>(0,l.jsx)("div",{...e,children:_}),textWrap:M,placement:g,alignment:h,render:e=>(0,l.jsx)(n(493823).p,{...e,style:m,hoveredStyle:p,onClick:T,disabled:M,disabledFeedback:M,icon:f,isRed:v,children:b||(0,l.jsxs)(l.Fragment,{children:[(0,n(831310).o)({width:12.5,marginRight:4}),(0,l.jsx)(i().sA,{id:"teamBrowser.teamCard.button.joined",defaultMessage:"Joined"})]})})})}},714300:(e,t,n)=>{n.d(t,{l:()=>c});var a=()=>n(484714),r=()=>n(847249),o=()=>n(176983),i=()=>n(596513),s=()=>n(324561);function c(e){let{spaceId:t}=e;const n=(0,a().v3)(),c=(0,o().J)();return(0,r().K8)((()=>{if(!t||!c)return;const e=i().t.getData(n,{spaceId:t});return(0,s().a9)(e)}),[n,t,c],{useDeepEqual:!0})}},725649:(e,t,n)=>{function a(e){return!(!e||"askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function o(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>r,K$:()=>a,j6:()=>o})},736767:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(296540),r=n(474848);function o(e,t){return(0,r.jsx)(n(678553).Ay,{...e,ref:t,style:{background:"none",borderBottom:"none",boxShadow:"",marginTop:2,marginBottom:6,paddingTop:4,paddingBottom:4,minHeight:"none",...e.style}})}const i=(0,a.forwardRef)(o)},749356:(e,t,n)=>{n.d(t,{VY:()=>m,Qm:()=>p,z6:()=>u,OC:()=>g,L6:()=>f,Zc:()=>h,x3:()=>v});var a=()=>n(857639),r=()=>n(386164);const o={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var i=()=>n(502800),s=()=>n(449506),c=()=>n(901389),l=()=>n(989423),d=()=>n(351360);async function u(e,t){var n;const{spaceId:a,offerCampaign:r}=t;if(!a||!r||null===(n=d().default.state.currentSpaceStore)||void 0===n||!n.canAdmin())return;const o=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:a,offerCampaign:r}});return"failed"!==o.type&&"offer"in o.data&&o.data.offer?o.data.offer:void 0}async function m(e){const{environment:t,spaceId:n,offerCampaign:a,entrypoint:r}=e,o=await s().callApi({eventName:"applyCustomerOffer",environment:t,data:{spaceId:n,offerCampaign:a,entrypoint:r??"unknown"}});if("failed"!==o.type)return o;c().Qg(o)}async function p(e,t){const n=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...t}});if("failed"!==n.type)return n;c().Qg(n)}async function f(e){const{environment:t,spaceId:n,offerCampaign:a}=e;return void 0!==await u(t,{spaceId:n,offerCampaign:a})}async function v(e){var t;const{environment:n,hasReceived:o,offerType:c,newPlan:l,coupon:u}=e,m=null===(t=d().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId();if(!m)return;const p=await s().callApi({eventName:"updateCustomerOffer",environment:n,data:{spaceId:m,hasReceived:o,offerType:c,newPlan:l,coupon:u},headers:(0,r().WS)({cellId:void 0,spaceId:m})});"failed"===p.type&&a().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,i().convertErrorToLog)(p.error)})}async function g(e,t,n){const a=function(e){if(o.hasOwnProperty(e))return o[e]}(n);if(a)for(const r of a){const n=await u(e,{spaceId:t,offerCampaign:r});if((null==n?void 0:n.campaign)===r)return n}}function h(e){let{environment:t,spaceName:n,offerCampaign:a}=e;if(n)switch(a){case"lic_25":case"lic_50":(0,l().WU)(t,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:n,lic_25:"lic_25"===a,lic_50:"lic_50"===a});break;case"resurrection_offer":(0,l().WU)(t,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:n});break;default:return}}},809730:(e,t,n)=>{n.d(t,{e:()=>s});var a=()=>n(534177),r=()=>n(597777);var o=()=>n(807778),i=()=>n(10984);function s(e){var t;let{billingData:n}=e;return function(e){let{subscriptionTier:t,subscriptionCreatedAtTime:n,useLegacyBehavior:o}=e;return"enterprise"===t||!("plus"!==t||!o)&&(0,a().O9)(n)&&n<r().fQ}({subscriptionTier:(0,i().AI)(),subscriptionCreatedAtTime:null==n||null===(t=n.subscription)||void 0===t||null===(t=t.startDate)||void 0===t?void 0:t.toMillis(),useLegacyBehavior:!(0,o().hG)()})}},835607:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>a,peopleIcon:()=>r});n(296540);const a={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M11.794 3.936c.57-.71 1.414-1.141 2.456-1.141s1.886.43 2.456 1.14c.558.696.823 1.618.823 2.582s-.265 1.885-.823 2.58c-.57.71-1.414 1.141-2.456 1.141s-1.886-.43-2.456-1.14c-.558-.696-.823-1.618-.823-2.581 0-.964.265-1.886.823-2.581m.975.782c-.341.426-.548 1.052-.548 1.799s.207 1.373.548 1.798c.33.41.813.673 1.481.673s1.152-.262 1.481-.673c.342-.425.548-1.051.548-1.798s-.206-1.373-.548-1.799c-.33-.41-.813-.673-1.48-.673-.67 0-1.152.263-1.482.673M5.75 3.625c-.957 0-1.734.396-2.259 1.05-.513.64-.755 1.484-.755 2.362s.242 1.723.755 2.362c.525.654 1.302 1.05 2.259 1.05s1.734-.396 2.259-1.05c.513-.64.755-1.484.755-2.362s-.242-1.723-.755-2.362c-.525-.654-1.302-1.05-2.259-1.05M3.986 7.037c0-.661.183-1.21.48-1.58.284-.354.701-.582 1.284-.582s1 .228 1.284.582c.297.37.48.919.48 1.58s-.183 1.21-.48 1.58c-.284.354-.701.582-1.284.582s-1-.228-1.284-.583c-.297-.37-.48-.918-.48-1.579m-.948 8.918h4.69c.114.467.337.894.634 1.25H3.038c-.68 0-1.327-.286-1.742-.764-.432-.498-.606-1.209-.265-1.92.823-1.72 2.636-2.896 4.719-2.896 1.13 0 2.18.346 3.035.936a6.6 6.6 0 0 0-.681 1.05 4.1 4.1 0 0 0-2.354-.736c-1.611 0-2.98.908-3.592 2.186-.1.21-.063.393.082.56.161.186.455.334.798.334M14.25 11.21c-2.334 0-4.354 1.36-5.202 3.323-.31.715-.125 1.419.308 1.912.419.476 1.065.76 1.744.76h6.3c.679 0 1.325-.284 1.743-.76.434-.493.618-1.197.309-1.912-.848-1.963-2.868-3.324-5.202-3.324m-4.055 3.818c.646-1.494 2.208-2.569 4.055-2.569s3.409 1.075 4.054 2.57a.52.52 0 0 1-.1.59c-.166.19-.461.336-.804.336h-6.3c-.343 0-.639-.146-.805-.336a.52.52 0 0 1-.1-.59"})},r=(0,n(340498).wt)("people",a)},854418:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(296540),r=()=>n(484714),o=()=>n(449506);function i(){const e=(0,r().v3)(),[t,n]=(0,a.useState)();return(0,a.useEffect)((()=>{!async function(){const t=await o().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return;const a=t.data;n(a)}()}),[e]),t}},931956:(e,t,n)=>{n.d(t,{X:()=>c});var a=()=>n(847249),r=()=>n(534177),o=()=>n(10984),i=()=>n(211825),s=()=>n(43450);function c(e){const t=(0,s().R)(e),n=(0,i().G)(e);return(0,a().K8)((()=>{if(!(0,o().El)())return!1;const a=e.getSetting("invite_access");switch(a){case void 0:return!1;case"team_members":return n;case"team_owners":return t;default:(0,r().HB)(a)}}),[e,t,n])}},934999:(e,t,n)=>{n.d(t,{B:()=>o});n(296540);var a=n(474848);const r={viewBox:"0 0 20 20",svg:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M8 9.875a.625.625 0 1 0 0 1.25h4a.625.625 0 1 0 0-1.25z"}),(0,a.jsx)("path",{d:"M3.125 4.75c0-.897.728-1.625 1.625-1.625h10.5c.898 0 1.625.728 1.625 1.625v1.57c0 .676-.413 1.256-1 1.5v7.43c0 .898-.727 1.625-1.625 1.625h-8.5a1.625 1.625 0 0 1-1.625-1.625V7.82c-.587-.244-1-.824-1-1.5zm11.5 3.195h-9.25v7.305c0 .207.168.375.375.375h8.5a.375.375 0 0 0 .375-.375zm1-1.625V4.75a.375.375 0 0 0-.375-.375H4.75a.375.375 0 0 0-.375.375v1.57c0 .205.164.372.369.375h10.512a.375.375 0 0 0 .369-.375"})]})},o=(0,n(340498).wt)("archiveBox",r)},976519:(e,t,n)=>{n.d(t,{q:()=>o});n(898992),n(354520);var a=()=>n(847249),r=()=>n(37433);function o(e){const t=(0,r().useTeamsFromCache)();return(0,a().K8)((()=>{if(!e)return!1;const n=t.filter((e=>e.isDefault()&&!e.isArchived()));return 1===n.length&&n[0].id===e}),[e,t])}},986863:(e,t,n)=>{n.d(t,{u:()=>o});var a=()=>n(645873);const r=new(a().O2)("teamPermissionsInviteWithModal",(async()=>await Promise.all([n.e(75134),n.e(43380),n.e(9304),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(22900),n.e(49889),n.e(97727),n.e(85128),n.e(83700),n.e(95555),n.e(58823),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(67780),n.e(96933),n.e(87598),n.e(23063),n.e(3965),n.e(84341),n.e(80533),n.e(45620),n.e(58221),n.e(44763),n.e(8081),n.e(67183),n.e(64598),n.e(82720),n.e(4253),n.e(86787),n.e(77465),n.e(24593),n.e(80896),n.e(1440),n.e(67378),n.e(58504),n.e(97308),n.e(63996),n.e(20636),n.e(66268),n.e(55717),n.e(7005),n.e(40186),n.e(22585),n.e(73206),n.e(11037),n.e(33235),n.e(91957),n.e(84176),n.e(16357),n.e(75681)]).then(n.bind(n,487443)))),o=(0,a()._h)(r,(e=>e.TeamPermissionsInviteWithModal))},987427:(e,t,n)=>{n.d(t,{W:()=>o});var a=n(296540),r=()=>n(854418);function o(){const e=(0,r().t)(),[t,n]=(0,a.useState)();return(0,a.useEffect)((()=>{n(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}}}]);