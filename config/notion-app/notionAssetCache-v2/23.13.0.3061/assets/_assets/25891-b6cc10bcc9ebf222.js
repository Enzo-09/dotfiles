"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25891],{161165:(e,t,i)=>{i.d(t,{Bq:()=>d,P8:()=>u,tA:()=>c,v1:()=>p});i(296540);var s=()=>i(762433),a=()=>i(97065),n=()=>i(166386),o=()=>i(959013),l=i(474848);const r={ai:{title:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.v2.ai.title.v2",defaultMessage:"Get unlimited Notion AI"}),subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.ai.description",defaultMessage:"Search, generate, analyze, and chat—right inside Notion"}),fiftyPercentSubtitle:(0,l.jsx)(o().sA,{id:"addOnUpgrade.studentAiOffer.confirmation.description",defaultMessage:"Your personal teaching assistant, code reviewer, brainstorming partner, and more — right in your workspace"})},plus:{title:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.title.plusPlan",defaultMessage:"Upgrade to Plus"}),plusAiTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.title.plusPlanPlusAi",defaultMessage:"Upgrade to Plus + AI"}),subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusSubtitle",defaultMessage:"Do more with unlimited charts, files, automations & integrations"}),resurrectionOfferSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusResurrectionOfferSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 3 months."}),lic50Subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 12 months."}),lic25Subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 25% off for 12 months."})},business:{title:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlan",defaultMessage:"Upgrade to Business"}),aiCoreTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreTitle",defaultMessage:"Get Unlimited AI and more"}),aiConnectorsTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsTitle",defaultMessage:"Get AI Connectors and more"}),researchModeTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeTitle",defaultMessage:"Get Research Mode and more"}),meetingNotesTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesTitle",defaultMessage:"Get AI Meeting Notes and more"}),aiForNotionMailTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailTitle",defaultMessage:"Get AI for Notion Mail and more"}),plusAiTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanPlusAi",defaultMessage:"Upgrade to Business + AI"}),subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.business",defaultMessage:"For companies using Notion to connect several teams & tools"}),lic50Subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 50% off for 12 months."}),lic25Subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 25% off for 12 months."}),aiCoreSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),aiConnectorsSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),researchModeSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),meetingNotesSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),aiForNotionMailSubtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"})},enterprise:{title:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.title.enterprise",defaultMessage:"Upgrade to Enterprise"}),limitedTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.title.enterpriseLimited",defaultMessage:"Upgrade to Enterprise Limited"}),plusAiTitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.title.enterprisePlusAi",defaultMessage:"Upgrade to Enterprise + AI"}),subtitle:(0,l.jsx)(o().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.enterprise",defaultMessage:"Advanced controls & support to run your entire organization"})}};function u(e){const{product:t,coupon:i,isOnTrialWithAiProduct:s,from:a,may13PackagingChangesEnabled:o,useEnterpriseLimitedName:l}=e;switch(t){case"ai":const e=r.ai.title;return"ai_fifty_percent"===i?{title:e,subtitle:r.ai.fiftyPercentSubtitle}:{title:e,subtitle:r.ai.subtitle};case"sites_custom_hostnames":default:return{};case"plus":const t=s?r.plus.plusAiTitle:r.plus.title;return(0,n().u6)(i)?{title:t,subtitle:r.plus.resurrectionOfferSubtitle}:"lic_50"===i?{title:t,subtitle:r.plus.lic50Subtitle}:"lic_25"===i?{title:t,subtitle:r.plus.lic25Subtitle}:{title:t,subtitle:r.plus.subtitle};case"business":if(a&&o){if(["ai_assistant_limit_in_app","ai_autofill_fill_all_pages","ai_autofill_bulk_fill","ai_autofill_on_page_edit","ai_autofill_try_on_view","ai_limit_in_app","ai_limit_property_autofill","ai_limit_sidebar","ai_limit_settings","ai_limited_qna_no_results","ai_limited_qna_upsell_action_button","ai_qna_waitlist","ai_qna_limit_in_app","ai_upsell_notice","ai_upsell_settings","ai_connector_ai_plan_upsell_intro_modal_opened","ai_connector_ai_upsell_intro_modal","ai_page_translation","ai_plans_page"].includes(a))return{title:r.business.aiCoreTitle,subtitle:r.business.aiCoreSubtitle,featureWithCustomImage:"coreAI"};if(["placeholder1"].includes(a))return{title:r.business.aiConnectorsTitle,subtitle:r.business.aiConnectorsSubtitle,featureWithCustomImage:"aiConnectors"};if(["placeholder2"].includes(a))return{title:r.business.researchModeTitle,subtitle:r.business.researchModeSubtitle,featureWithCustomImage:"researchMode"};if(["placeholder3"].includes(a))return{title:r.business.meetingNotesTitle,subtitle:r.business.meetingNotesSubtitle,featureWithCustomImage:"meetingNotes"};if(["mail_app"].includes(a))return{title:r.business.aiForNotionMailTitle,subtitle:r.business.aiForNotionMailSubtitle,featureWithCustomImage:"notionAIForMail"}}const u=s?r.business.plusAiTitle:r.business.title;return"lic_50"===i?{title:u,subtitle:r.business.lic50Subtitle}:"lic_25"===i?{title:u,subtitle:r.business.lic25Subtitle}:{title:u,subtitle:r.business.subtitle};case"enterprise":return{title:s?r.enterprise.plusAiTitle:l?r.enterprise.limitedTitle:r.enterprise.title,subtitle:r.enterprise.subtitle}}}function d(e,t){const{subtotal:i,discount:s,balance:a}=e;return i.minus(s).minus(a).plus(t).zeroIfNegative()}function c(e,t){if(!e)return!1;const i=(0,s().q8)(e);return Boolean(t)&&"year"===i}function p(e,t,i){return(0,s().TB)(e)&&t&&(0,a().DH)(t.offer.campaign)&&i===(0,n().i)(t)}},601203:(e,t,i)=>{i.d(t,{Kz:()=>I,Qe:()=>M,dn:()=>v,gM:()=>U,jO:()=>x,qu:()=>h});i(898992),i(354520),i(581454);var s=()=>i(251111),a=()=>i(762433),n=()=>i(643819),o=()=>i(622963),l=()=>i(496603),r=()=>i(534177),u=()=>i(449506),d=()=>i(780054),c=()=>i(640653),p=()=>i(351360),g=()=>i(506090),m=()=>i(134217),b=()=>i(830140),f=()=>i(430395),A=()=>i(981046),_=()=>i(749240);async function M(e){var t;let{environment:i,billingData:n,billingInterval:l,vatId:d,addOn:b,onlyShowAddOn:f}=e;const M=g().A.state,v=_().subscriptionDataStoreInstance.state;if(!M.open||!v)return;const x=(null==n?void 0:n.address)??M.temporaryAddress;if(!(0,s().Z)(x))return;g().A.update((e=>({...e,calculatingTax:!0})));const h=l??M.temporaryBillingInterval??"year",I=b??M.addOnFeature,U=f??M.onlyShowAddOn,S=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!S)return;const C=await(0,c().Pu)({environment:i,spaceId:S})??1,{planAmount:y,promoInfo:P,accountBalance:j}=(0,m().TQ)({memberCount:C,promo:M.appliedPromo,currencyCode:A().A.selectedCurrencyCode,data:v,addOnFeature:I,onlyShowAddOn:U,subscriptionTier:M.subscriptionTier,taxAmount:M.taxAmount,calculatingTax:M.calculatingTax,billingInterval:h,coupon:M.coupon}),B=Math.max(0,y-P.amount+j),N=[M.subscriptionTier,M.addOnFeature].map((e=>{switch(e){case void 0:return;case"ai":case"sites_custom_hostnames":return e;default:return(0,o()._y)(e)}})).map((e=>{const t=A().A.getPrice(i,(t=>t.product===e&&t.billingInterval===l));return null==t?void 0:t.result})).map(T).filter(r().O9),D=await u().callApi({eventName:"calculateTax",environment:i,data:{address:x,lineItems:N,price:B,vatId:d??M.vatApplicable?M.temporaryVatCode:void 0,customerId:(0,a().Rz)(n)}});if("failed"===D.type)g().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=D.data;e.valid?g().A.update((t=>({...t,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):g().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function v(e,t){var i;const o=f().A.state,l=_().subscriptionDataStoreInstance.state;if(!o.open||!l)return;const r=o.temporaryAddress;if(!(0,s().Z)(r))return;f().A.update((e=>({...e,calculatingTax:!0})));const d=(null===(i=o.totalUpgradeCost)||void 0===i?void 0:i.amount)||0,c=await u().callApi({eventName:"calculateTax",environment:e,data:{address:r,price:d,vatId:o.vatApplicable?o.temporaryVatCode:void 0,customerId:(0,a().Rz)(t)}});if("failed"===c.type)f().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=c.data;e.valid?f().A.update((t=>({...t,taxAmount:n().W.fromValue({amount:e.taxAmount,currencyCode:A().A.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):f().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function x(e){const{environment:t,priceForTaxCalculation:i,address:s,customerId:a,vatId:n}=e,o=b().A.state,l=await u().callApi({eventName:"calculateTax",environment:t,data:{address:s,customerId:a,vatId:n,price:i}});if("failed"===l.type);else{const e=l.data;e.valid&&o.open&&b().A.update((t=>({...t,tax:Math.max(0,e.taxAmount)})))}}async function h(e){const{environment:t,billingData:i,stripeData:n,taxableAmount:o,lineItems:l}=e,{address:r}=null!=i&&i.address?{address:null==i?void 0:i.address}:e,d=(null==n?void 0:n.vatId)??(i?(0,a().t_)(i,"vat"):void 0);if(!r||!(0,s().Z)(r))return;const c=(0,a().Rz)(i),p=await u().callApi({eventName:"calculateTax",environment:t,data:{address:r,price:o.amount,vatId:d,customerId:c,lineItems:l}});if("failed"===p.type)return;const g=p.data;return g.valid?g.taxAmount:void 0}function T(e){if(!e)return;if(void 0===e.unitAmount)return;const t=d().A.pricing[e.product];return"productId"in t?{amount:e.unitAmount.amount,productId:t.productId}:void 0}function I(e){const t=d().A.pricing[e.price.product];if("productId"in t)return{amount:e.price.unitAmount.amount*e.quantity,productId:t.productId}}function U(e){let{line:t,defaultProductId:i=d().A.pricing.plus.productId}=e;const s=(0,l().xu)(t.discount_amounts??[],"amount"),a=t.price?"string"==typeof(n=t.price.product)?n:n.id:i;var n;return{amount:t.amount-s,productId:a}}}}]);