"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[9150,49157],{346:(e,t,n)=>{n.d(t,{MG:()=>p,T1:()=>h,a1:()=>y,dt:()=>f,kg:()=>m,lC:()=>x,n_:()=>v});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(187174),s=()=>n(645873),l=()=>n(941463),d=()=>n(441199),c=()=>n(749687),u=()=>n(737230),g=()=>n(756114);const h=new(s().O2)("PerformanceToolbar",(()=>Promise.all([n.e(96346),n.e(16471),n.e(85864),n.e(92845),n.e(71718),n.e(21194),n.e(17989),n.e(90625),n.e(37580),n.e(45624)]).then(n.bind(n,140401)))),p=(0,s()._h)(h,(e=>e.PerformanceToolbar)),f=(0,s()._h)(h,(e=>e.PerformanceToolbarSettings));function m(){const e=(0,i().v3)();return(0,r().K8)((()=>(0,g().D)(e,e.RouterStore.state)),[e])}function v(){const e=(0,i().v3)(),t=w("PerformanceToolbarStore"),n=w("isPerformanceToolbarVisible");return(0,r().K8)((()=>!(!t||!n)&&n(e,e.RouterStore.state,t.state)),[n,e,t])}function x(){const e=w("PerformanceToolbarStore");return(0,r().K8)((()=>!!e&&e.state.isPerformanceToolbarMounted),[e])}function y(){const e=(0,i().v3)(),t=w("createPerformanceToolbarMouseListeners"),n=w("PerformanceToolbarStore"),{sidebarExpanded:a,sidebarWidth:s,secondarySidebarExpanded:g,secondarySidebarWidth:h,updateSidebarExpanded:p,updateSidebarWidth:f}=(0,r().K8)((()=>({sidebarExpanded:c().sidebarExpandedStore.state,sidebarWidth:c().sidebarWidthStore.state,secondarySidebarExpanded:d().default.isOpen(),secondarySidebarWidth:l().Ay.getWidth(),updateSidebarExpanded:u().Ay.state.expanded,updateSidebarWidth:u().Ay.state.width})),[]);return(0,o.useEffect)((()=>{if(n&&t)return t(e,(e=>n.update((t=>({...t,isMouseNearPerformanceToolbar:e})))),a,s,g,h,p,f)}),[t,e,n,a,s,g,h,p,f])}function w(e){const t=m(),[{value:n}]=(0,a().Yb)((()=>t?h.load().then((t=>t[e])):Promise.resolve(void 0)),[e,t]);return n}},21735:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const i=new o;n(604341).exposeDebugValue("EdgeCacheStore",i);const r=i},63467:(e,t,n)=>{n.d(t,{y:()=>c});var o=()=>n(637997),i=()=>n(267419);const r={ko:()=>n.e(2268).then(n.bind(n,224434)),es:()=>n.e(95264).then(n.bind(n,196425)),de:()=>n.e(35390).then(n.bind(n,653703)),fr:()=>n.e(3272).then(n.bind(n,94677)),pt:()=>n.e(27315).then(n.bind(n,766869)),zh:()=>n.e(69945).then(n.bind(n,516814)),ja:()=>n.e(77757).then(n.bind(n,824432)),da:()=>n.e(9423).then(n.bind(n,440761)),fi:()=>n.e(59337).then(n.bind(n,462135)),nb:()=>n.e(2040).then(n.bind(n,937314)),nl:()=>n.e(51106).then(n.bind(n,530897)),sv:()=>n.e(53631).then(n.bind(n,895222))};let a=!1,s=!1;async function l(e){for(const[n,i]of Object.entries(e.emojiLocaleKeywords)){var t;o().fB[n]={...o().fB[n],keywords:[...i,...(null===(t=o().fB[n])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:n,...o}=t;return{...o,emojiByName:{...n,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=n(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const c=(0,n(279900).A)((async()=>{await async function(){s||(await l(await n.e(51872).then(n.bind(n,443716))),s=!0)}(),await d()}))},73223:(e,t,n)=>{n.r(t),n.d(t,{dismissTutorial:()=>c,resetTutorials:()=>u,tutorialAdvanceToStep:()=>g,tutorialAdvanceToStepAfter:()=>h,tutorialGoToNextStep:()=>l,tutorialGoToPrevStep:()=>d});var o=()=>n(541235),i=()=>n(751156),r=()=>n(755199),a=()=>n(739135),s=()=>n(351360);function l(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;p({userAction:"TutorialActions.nextStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().i9)(o,t)}}})},userId:o.id})}function d(e,t){var n;const{currentUserSettingsStore:o}=s().default.state;if(!o)return;const i=null===(n=o.getSettings())||void 0===n?void 0:n.tutorials;p({userAction:"TutorialActions.prevStep",environment:e,perform:e=>{r().mJ({userSettingsStore:o,transaction:e,data:{tutorials:{...i,[t]:(0,a().KD)(o,t)}}})},userId:o.id})}function c(e,t){var n;const{currentUserSettingsStore:i}=s().default.state;if(!i)return;const a=null===(n=i.getSettings())||void 0===n?void 0:n.tutorials;(null==a?void 0:a[t])!==o().YD&&p({userAction:"TutorialActions.dismissTutorial",environment:e,perform:e=>{r().mJ({userSettingsStore:i,transaction:e,data:{tutorials:{...a,[t]:o().YD}}})},userId:i.id})}function u(e){const{currentUserSettingsStore:t}=s().default.state;t&&p({userAction:"TutorialActions.resetTutorialsDebug",environment:e,perform:e=>{r().mJ({userSettingsStore:t,transaction:e,data:{tutorials:{}}})},userId:t.id})}function g(e,t,n){var i;const{currentUserSettingsStore:l}=s().default.state;if(!l||(0,a().x$)(l,t))return;const d=(0,a().gt)(l,t);o().c$[t].steps.findIndex((e=>e.id===d))>=o().c$[t].steps.findIndex((e=>e.id===n))||r().mJ({userSettingsStore:l,transaction:e,data:{tutorials:{...null===(i=l.getSettings())||void 0===i?void 0:i.tutorials,[t]:n}}})}function h(e,t,n){if((0,a().ll)(n))return;const o=(0,a().tb)(t,n);o&&g(e,t,o)}function p(e){return i().createAndCommit({...e,canUndo:!1})}},77279:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{discussionIdToExpansionStartPointMap:{}}}}const i=new o},79275:(e,t,n)=>{n.d(t,{X:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("newSidebarHome",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M10.1416 3.77299C10.0563 3.71434 9.94368 3.71434 9.85837 3.77299L3.60837 8.06989C3.54053 8.11653 3.5 8.19357 3.5 8.2759V14.2499C3.5 14.9402 4.05964 15.4999 4.75 15.4999H7.5L7.5 10.7499C7.5 10.0595 8.05964 9.49987 8.75 9.49987H11.25C11.9404 9.49987 12.5 10.0595 12.5 10.7499L12.5 15.4999H15.25C15.9404 15.4999 16.5 14.9402 16.5 14.2499V8.2759C16.5 8.19357 16.4595 8.11653 16.3916 8.06989L10.1416 3.77299ZM9.00857 2.53693C9.60576 2.12636 10.3942 2.12636 10.9914 2.53693L17.2414 6.83383C17.7163 7.1603 18 7.69963 18 8.2759V14.2499C18 15.7687 16.7688 16.9999 15.25 16.9999H12.25C11.5596 16.9999 11 16.4402 11 15.7499L11 10.9999H9L9 15.7499C9 16.4402 8.44036 16.9999 7.75 16.9999H4.75C3.23122 16.9999 2 15.7687 2 14.2499V8.2759C2 7.69963 2.2837 7.1603 2.75857 6.83383L9.00857 2.53693Z"})})},112412:(e,t,n)=>{n.d(t,{$:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M2.4 3.7a.7.7 0 1 0 0 1.4h11.2a.7.7 0 0 0 0-1.4zm9.5 3.594H4.1a.7.7 0 1 0 0 1.4h7.8a.7.7 0 1 0 0-1.4M5.8 10.9a.7.7 0 0 0 0 1.4h4.4a.7.7 0 1 0 0-1.4z"})},i=(0,n(340498).wt)("filterSmall",o)},120114:(e,t,n)=>{n.d(t,{AX:()=>a,Ur:()=>o,uw:()=>i,yP:()=>r});const o=["unified_find_variant"],i=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],r=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function a(e,t,n){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:n("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:n("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:n("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:n("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:n("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},126158:(e,t,n)=>{n.d(t,{m:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("arrowDownSmall",{viewBox:"0 0 12 12",svg:(0,o.jsx)("path",{d:"M5.99756 0.850098C5.53564 0.850098 5.21875 1.17236 5.21875 1.65576V7.61768L5.27246 8.7832L4.19287 7.53711L2.98438 6.33398C2.84473 6.18896 2.66211 6.09229 2.42578 6.09229C2.00684 6.09229 1.68994 6.40381 1.68994 6.84424C1.68994 7.04834 1.77051 7.23633 1.93164 7.40283L5.42285 10.8994C5.56787 11.0498 5.78809 11.1357 5.99756 11.1357C6.2124 11.1357 6.42725 11.0498 6.57227 10.8994L10.0688 7.40283C10.23 7.23633 10.3105 7.04834 10.3105 6.84424C10.3105 6.40381 9.99365 6.09229 9.57471 6.09229C9.34375 6.09229 9.16113 6.18896 9.01611 6.33398L7.80762 7.53711L6.72803 8.7832L6.77637 7.61768V1.65576C6.77637 1.17236 6.46484 0.850098 5.99756 0.850098Z"})})},126617:(e,t,n)=>{n.d(t,{Y:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},i=(0,n(340498).wt)("ellipsisSmall",o)},129852:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkCircleIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.875 6.25c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("exclamationMarkCircle",i)},140659:(e,t,n)=>{n.r(t),n.d(t,{WorkflowAdvanced:()=>ho});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(84817),l=()=>n(889097),d=()=>n(564037),c=()=>n(178846),u=()=>n(363186),g=(n(898992),n(354520),()=>n(915671)),h=()=>n(959013),p=()=>n(534177),f=()=>n(410930),m=()=>n(939740),v=()=>n(2143),x=()=>n(756279),y=()=>n(970585),w=()=>n(671446),S=(n(944114),n(581454),n(737550),()=>n(274570)),b=()=>n(300985),j=()=>n(340498),k=n(474848);const C={viewBox:"0 0 20 20",svg:(0,k.jsx)("path",{d:"M12.043 2.444a.625.625 0 0 0-1.13-.41l-6.17 8.55a.625.625 0 0 0 .507.99h3.098l-.401 5.5a.625.625 0 0 0 1.13.412l6.18-8.54a.625.625 0 0 0-.507-.991h-3.099z"})},A=(0,j().wt)("lightningFill",C);var I=()=>n(617668),M=()=>n(760217),R=()=>n(8980),T=()=>n(554509),L=()=>n(89924),P=()=>n(538891);const B=(0,h().YK)({views:{id:"workflows.advanced.modal.views",defaultMessage:"Views"},data:{id:"workflows.advanced.modal.data",defaultMessage:"Data"},preview:{id:"workflows.advanced.modal.preview",defaultMessage:"Preview"},createOrConnect:{id:"workflows.advanced.modal.createOrConnect",defaultMessage:"Create or connect"},automations:{id:"workflows.advanced.modal.automations",defaultMessage:"Automations"},connections:{id:"workflows.advanced.modal.connections",defaultMessage:"Connections"},allActivity:{id:"workflows.advanced.modal.allActivity",defaultMessage:"All activity"},newAutomation:{id:"workflows.advanced.modal.newAutomation",defaultMessage:"New automation"},newView:{id:"workflows.advanced.modal.newView",defaultMessage:"New view"},debug:{id:"workflows.advanced.modal.debug",defaultMessage:"Debug"},configure:{id:"workflows.advanced.modal.configure",defaultMessage:"Configure"},copyFunctionContents:{id:"workflowFunction.copyFunctionContents",defaultMessage:"Copy function contents"},save:{id:"workflowFunction.save",defaultMessage:"Save"},edit:{id:"workflowFunction.edit",defaultMessage:"Edit function"},cancel:{id:"workflowFunction.cancel",defaultMessage:"Cancel"}});var _=()=>n(691093);function D(e){const{environment:t,key:n,persistedStore:o,currentNavigationState:i,targetNavigationState:r,title:a,icon:s,indentLevel:l=0}=e,c=(0,d().getIsWorkflowNavigationStateCurrent)({currentNavigationState:i,navigationState:r});return{key:n,render:e=>(0,k.jsx)(F,{...e,isCurrent:c,targetNavigationState:r,title:a,icon:s,indentLevel:l}),action:e=>{(0,_().showWorkflowEditor)({environment:t,parentStore:o,navigationState:r})}}}const F=o.forwardRef(((e,t)=>{const{isCurrent:o,targetNavigationState:i,title:r,icon:s,indentLevel:l,...d}=e,c=(0,a().IS)((e=>({currentButton:{background:e.sidebarItemSelectedBackground,borderRadius:6},button:{paddingLeft:n(805025).Qm+14*l,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),[l]);return(0,k.jsx)(M().A,{...d,ref:t,style:{...c.button,...o?c.currentButton:{}},title:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:r}),icon:s})}));function N(e){const{persistedStore:t,currentNavigationState:n,workflow:o,environment:i,intl:r}=e,a=(0,P().Bn)(o),s=a.filter((e=>"client_react_component"===e.type)),l=(0,P().nG)(o);if(0===s.length&&0===l.length)return;const c=D({key:"all-activity",environment:i,persistedStore:t,currentNavigationState:n,targetNavigationState:{type:"runs",runId:void 0},title:r.formatMessage(B.allActivity),icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:S().clockIcon})}),u=[];for(const p of l){u.push(D({key:`trigger-${p.key}`,environment:i,persistedStore:t,currentNavigationState:n,targetNavigationState:{type:"trigger",key:p.key},title:p.name,icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:A})}));const e=(0,P()._q)({functionKey:p.key,allFunctions:a}),o=(0,d().getIsWorkflowNavigationStateCurrent)({currentNavigationState:n,navigationState:{type:"trigger",key:p.key}}),r=e.some((e=>(0,d().getIsWorkflowNavigationStateCurrent)({currentNavigationState:n,navigationState:{type:"function",key:e.key}}))),s=o||r;if(e.length>0&&s)for(const a of e)u.push(D({key:`trigger-${p.key}-function-${a.key}`,indentLevel:1,environment:i,persistedStore:t,currentNavigationState:n,targetNavigationState:{type:"function",key:a.key},title:a.name||a.key,icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:b().Z})}))}const g=s.map((e=>D({key:`function-${e.key}`,environment:i,persistedStore:t,currentNavigationState:n,targetNavigationState:{type:"function",key:e.key},title:e.name||e.key,icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:b().Z})}))),h={key:"new-automation",render:e=>(0,k.jsx)(M().A,{...e,disabled:!0,title:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"tertiary",children:r.formatMessage(B.newAutomation)}),icon:(0,k.jsx)(R().I,{size:"default",color:"tertiary",icon:I().plusIcon})}),action:e=>{}};return{key:"automations",items:[c,...u,...g,h],render:e=>(0,k.jsx)(L().A,{title:r.formatMessage(B.automations),...e})}}F.displayName="WorkflowAdvancedButtonMenuItem";var W=()=>n(485285),E=()=>n(167334),z=()=>n(94522),H=()=>n(575127);function O(e){const{module:t,previewStore:n,size:o}=e,i=K({size:o});return"database"===t.type&&n?(0,k.jsx)(V,{module:t,previewStore:n,size:o}):(0,H().c)(t)(i.icon)}function V(e){let{module:t,previewStore:n,size:i}=e;const a=K({size:i}),s=(0,o.useMemo)((()=>(0,z().V4)({module:t,store:n})),[t,n]),{collectionIcon:l,isExternal:d}=(0,r().K8)((()=>({collectionIcon:null==s?void 0:s.getIcon(),isExternal:(null==s?void 0:s.getParentId())!==(null==n?void 0:n.id)})),[s,n]);return l?(0,k.jsx)(E().A,{icon:l,isEmptyPage:!1,isAlias:d,size:i??20,iconStyle:a.icon}):(0,H().c)(t)(a.icon)}function K(e){const{size:t=22}=e??{};return(0,a().IS)((e=>({icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:t,height:t,fill:e.icon.secondary,margin:0},yellow:{fill:e.icon.yellowPrimary},failedIcon:{width:16,height:16,fill:e.accentColors.red[400]}})),[t])}function Y(e){const{previewStore:t,persistedStore:n,currentNavigationState:o,workflow:i,environment:r,intl:a}=e,s=(0,P().Rd)(i);if(0===s.length)return;return{key:"connections",items:s.map((e=>D({key:e.key,environment:r,persistedStore:n,currentNavigationState:o,targetNavigationState:{type:"module",key:e.key},title:W().d.getName(e,a),icon:(0,k.jsx)(O,{previewStore:t,module:e})}))),render:e=>(0,k.jsx)(L().A,{title:a.formatMessage(B.connections),...e})}}var $=()=>n(686526),U=()=>n(59400),G=()=>n(406699),J=()=>n(811979),q=()=>n(175116),Z=()=>n(525432);function X(e){const{previewStore:t,persistedStore:n,previewCollectionContextStore:o,currentNavigationState:i,workflow:r,environment:a,intl:s}=e;return{key:"data",items:[...(0,P().gz)(r).map((e=>D({key:e.key,environment:a,persistedStore:n,currentNavigationState:i,targetNavigationState:{type:"module",key:e.key},title:W().d.getName(e,s),icon:(0,k.jsx)(O,{previewStore:t,module:e})}))),{key:"create-or-connect",render:e=>(0,k.jsx)(J().A,{...e,popupType:G().z7.Popup,placementToOrigin:G().sx.Right,render:e=>(0,k.jsx)(q().RI,{value:o,children:(0,k.jsx)(U().m$,{context:Z().Bd.ViewSettings,collectionContextStore:o,collectionSettingsStore:o.settingsStore,fullHeight:!1,handleAddItemClick:e.close})}),renderOrigin:t=>(0,k.jsx)(M().A,{...e,...t,title:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"secondary",children:s.formatMessage(B.createOrConnect)}),icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:I().plusIcon})})}),action:()=>{$().Ow({collectionContextStore:o,collectionSettingsStore:o.settingsStore}),$().R8({collectionSettingsStore:o.settingsStore,item:{type:"createViewSource",existingCollectionStore:void 0,createdCollectionRecordPointerMap:void 0}})}}],render:e=>(0,k.jsx)(L().A,{title:s.formatMessage(B.data),...e})}}var Q=()=>n(212727),ee=()=>n(46986);function te(e){const{persistedStore:t,currentNavigationState:n,environment:o,intl:i}=e;if(!(0,ee().Ke)())return;return{key:"debug",items:[D({key:"debug",environment:o,persistedStore:t,currentNavigationState:n,targetNavigationState:{type:"debug"},title:i.formatMessage(B.debug),icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:Q().gearIcon})})],render:e=>(0,k.jsx)(L().A,{title:i.formatMessage(B.debug),...e})}}var ne=()=>n(89849);function oe(e){const{previewStore:t,persistedStore:n,currentNavigationState:o,environment:i,intl:r}=e;if(0===t.getCollectionViewStores().length)return;return{key:"preview",items:[D({key:"preview",environment:i,persistedStore:n,currentNavigationState:o,targetNavigationState:{type:"configure"},title:r.formatMessage(B.preview),icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:ne().eyeIcon})})],render:e=>(0,k.jsx)(L().A,{title:r.formatMessage(B.preview),...e,hideTitle:!0,disableDesktopPadding:!1})}}var ie=()=>n(430923),re=()=>n(745266),ae=()=>n(16006);function se(e){const{previewStore:t,persistedStore:n,currentNavigationState:o,previewCollectionContextStore:i,environment:r,intl:a,theme:s}=e,l=t.getCollectionViewStores().map((e=>{const t=e.getFormat().collection_view_icon,n=e.getType();return{store:e,icon:t,type:n}})).map((e=>D({key:e.store.id,environment:r,persistedStore:n,currentNavigationState:o,targetNavigationState:{type:"preview",collectionViewId:e.store.id},title:(0,k.jsx)(ae().A,{store:e.store}),icon:(0,k.jsx)(re().h,{color:"lightGray",viewType:e.type,viewIcon:e.icon,size:20,style:{fill:s.icon.secondary}})}))),d=!0;return{key:"views",items:[...l,{key:"new-view",render:e=>(0,k.jsx)(J().A,{...e,disabled:d,popupType:G().z7.Popup,placementToOrigin:G().sx.Right,render:e=>(0,k.jsx)(q().RI,{value:i,children:(0,k.jsx)(ie().y7,{collectionContextStore:i,onClose:e.close,showNewViewItems:!0})}),renderOrigin:t=>(0,k.jsx)(M().A,{...e,...t,disabled:d,title:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"tertiary",children:a.formatMessage(B.newView)}),icon:(0,k.jsx)(R().I,{size:"default",color:"tertiary",icon:I().plusIcon})})}),action:()=>{}}],render:e=>(0,k.jsx)(L().A,{title:a.formatMessage(B.views),...e})}}function le(e){const{previewCollectionContextStore:t}=e,n=(0,r().uB)(void 0,y().A),[l,S]=(0,o.useState)({size:300,speed:"animate"}),b=(0,i().v3)(),j=(0,h().tz)(),C=(0,a().DP)(),{workflowStore:A,store:I}=(0,u().$O)(),M=(0,d().useWorkflowNavigationState)(),R=(0,c().xA)({collectionViewBlockStore:I}),T=(0,w().J)()??g().ZB,L=(0,r().K8)((()=>{const e={environment:b,intl:j,theme:C,previewStore:R,persistedStore:I,previewCollectionContextStore:t,currentNavigationState:M,workflowStore:A,workflow:T};return[oe(e),se(e),X(e),Y(e),N(e),te(e)].filter(p().O9)}),[b,j,C,R,I,t,M,A,T]);return(0,k.jsx)(f().z,{anchorToSide:"left",isOpen:!0,isResizable:!0,width:l,onWidthChange:S,children:(0,k.jsx)(s().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0},children:(0,k.jsx)(v().H,{type:x().A.Y,style:{padding:6},children:(0,k.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:void 0,resetFocusOnMouseOut:!0,sections:L,store:n})})})})}n(672577);var de=()=>n(437768),ce=()=>n(7747),ue=()=>n(481721),ge=()=>n(963589),he=()=>n(981928),pe=()=>n(952816),fe=()=>n(285790);function me(e){const t=(0,h().tz)(),{isDebugging:n,onClick:o}=e,i=t.formatMessage({id:"workflowDebugButton.debug",defaultMessage:"Debug"});return(0,k.jsx)(fe().A,{icon:pe().E,ariaLabel:i,onClick:o,isBlue:n})}n(16280);var ve=()=>n(112551),xe=()=>n(555102),ye=()=>n(843189),we=()=>n(351360),Se=()=>n(847),be=()=>n(758417);function je(e){const{workflowFunction:t,functionArgs:n}=e,a=(0,i().v3)(),{clientStore:s,threadStore:l,workflowStore:d,store:c}=(0,u().$O)(),g=(0,r().K8)((()=>Boolean((null==l?void 0:l.id)&&s.getClientAIChatThreadStore(l.id).state.loading||void 0!==(null==l?void 0:l.getCurrentInferenceId()))),[s,l]),p=(0,o.useCallback)((()=>{const e=we().default.state.currentSpaceStore;if(!e)throw new Error("No space store");const o=we().default.state.currentUserStore;if(!o)throw new Error("No user store");const i=we().default.state.currentSpaceViewStore;if(!i)throw new Error("No space view store");if(!d)throw new Error("No workflow store");const r=(0,xe().nD)({environment:a,workflowFunction:t,functionArgs:n,from:"run-button",spaceStore:e});if(l)(0,Se().addStepsToExistingThreadAndRun)({environment:a,spaceStore:e,userStore:o,clientStore:s,threadStore:l,addSteps:[r]});else{const t=(0,be().Y$)({environment:a,userStore:o,spaceStore:e,workflowStore:d,spaceViewStore:i,store:c,addSteps:[r]}),n=(0,Se().addTranscriptToNewThreadAndRun)({environment:a,clientStore:s,spaceStore:e,transcript:t,workflowStore:d});(0,_().showWorkflowEditor)({environment:a,chatSidebarState:{isOpen:!0,threadId:n.id},parentStore:c})}}),[d,a,t,n,l,s,c]);return(0,k.jsx)(ye().E,{onClick:p,disabled:g,icon:ve().u,children:(0,k.jsx)(h().sA,{id:"workflows.function.run",defaultMessage:"Run"})})}var ke=()=>n(987017);function Ce(e){var t;const{tabs:n,right:i}=e,[r,l]=(0,o.useState)(null===(t=n[0])||void 0===t?void 0:t.key),d=(0,a().IS)((e=>({divider:{borderBottom:`0.5px solid ${e.stroke.primary}`,width:"100%",height:0},tabs:{marginLeft:8,boxShadow:"none"}})),[]),c=(0,o.useMemo)((()=>n.filter(p().O9)),[n]),u=c.findIndex((e=>(null==e?void 0:e.key)===r)),g=c[u];return(0,k.jsxs)(s().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:"auto",align:"center",children:[(0,k.jsx)(s().Y1,{direction:"horizontal",align:"center-left",gap:12,children:(0,k.jsx)(ke().Ay,{tabs:c.map((e=>e.label)),selectedIndex:u,onChange:e=>l(c[e].key),style:d.tabs})}),(0,k.jsx)(s().Y1,{direction:"horizontal",align:"center-right",gap:4,padding:"0 8px",children:i})]}),(0,k.jsx)("div",{style:d.divider}),(0,k.jsx)(s().Y1,{direction:"vertical",width:"fill",height:"fill",children:null==g?void 0:g.render()})]})}function Ae(e){const{icon:t,label:n,right:o,description:i}=e,r=(0,a().IS)((e=>({outer:{minHeight:76},divider:{borderBottom:`0.5px solid ${e.stroke.primary}`,width:"100%",height:0}})),[]);return(0,k.jsxs)(s().Y1,{direction:"vertical",padding:"0 0 0 24px",children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:"auto",align:"center",padding:`24px 24px ${i?"0":"24px"} 0px`,style:r.outer,children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",align:"center-left",gap:12,children:[t,n?(0,k.jsx)(T().D,{styleName:"UITitle-Medium-20px/Semibold",children:n}):null]}),o?(0,k.jsx)(s().Y1,{direction:"horizontal",width:"hug",align:"center-right",gap:4,children:o}):null]}),i?(0,k.jsx)(s().Y1,{direction:"horizontal",padding:"0 0 24px 0",children:(0,k.jsx)(T().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:i})}):null,(0,k.jsx)("div",{style:r.divider})]})}var Ie=()=>n(958697),Me=()=>n(764781),Re=()=>n(105819),Te=()=>n(884107),Le=()=>n(493823),Pe=()=>n(204063),Be=()=>n(449506),_e=()=>n(297872),De=()=>n(623580),Fe=()=>n(227316);function Ne(e){const{editedValue:t,setEditedValue:n,fnKey:o,functionStore:i,fillHeight:r,inputPadding:s}=e,l=(0,a().IS)((e=>({editor:{whiteSpace:"pre-wrap",wordWrap:"break-word",fontFamily:"monospace",color:e.text.primary,margin:0,fontSize:12,border:"none",borderRadius:0,padding:0,lineHeight:1.5,boxShadow:"none",...r?{height:"100%",display:"flex",flex:1,flexDirection:"row",alignItems:"stretch"}:{}},editorInput:{...r?{height:"100%"}:{},padding:s??16},outer:{flex:r?1:void 0}})),[r,s]);return(0,ge().X)("ai_workflows_function_monaco_code_editor")?(0,k.jsx)(We,{value:t,onChange:n,fnKey:o,functionStore:i,fillHeight:r}):(0,k.jsx)(_e().A,{capture:!0,render:e=>(0,k.jsx)("div",{...e,style:l.outer,children:(0,k.jsx)(De().A,{value:t,onChange:e=>n(e.target.value),textarea:!0,style:l.editor,inputStyle:l.editorInput,autosize:!r,autoFocus:!0,suppressFocusRing:!0,spellCheck:!1,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",autosizeMinHeight:80})})})}function We(e){const{value:t,onChange:n,fnKey:a,functionStore:s,fillHeight:l}=e,d=(0,i().v3)(),{workflowStore:c,threadStore:g,clientStore:h,store:p}=(0,u().$O)(),f=(0,r().K8)((()=>(0,z().n2)({workflowStore:c,clientStore:h,environment:d,threadStore:g,store:p})),[c,h,d,g,p]),m=(0,o.useCallback)((async()=>{const e=await Be().callApi({eventName:"getWorkflowTypescriptContext",environment:d,data:{workflowDefinitionPointer:(0,z().Cq)({workflowStore:c,threadStore:g})}});if("success"===e.type){const{workflowScope:t}=e.data;if(!s)return"";const n=((null==f?void 0:f.functionPointers)||[]).map((e=>Fe().j.createChildStore(s,e))).filter((e=>e.isFunction())).map((e=>e.getData())).filter((e=>(null==e?void 0:e.key)!==a));return[t.replaceAll(/export type ?{(.|\s)*?}/g,"").replaceAll(/\n\s*export/g,"\n"),...n.map((e=>null==e?void 0:e.value))].join("\n\n")}return""}),[d,c,g,s,null==f?void 0:f.functionPointers,a]);return(0,k.jsx)(he().X,{value:t,onChange:n,language:"typescript",fetchTypescriptImports:m,fillHeight:l})}function Ee(e){const{fn:t,functionStore:n}=e,r=(0,i().v3)(),{saveFunction:l}=(0,u().$O)(),[d,c]=(0,o.useState)(!1),[g,h]=(0,o.useState)(t.value||""),p=(0,a().IS)((e=>({highlightedCode:{background:e.codeBlockBackground,padding:"16px 24px",flex:1,overflowY:"auto"}})),[]),f=(0,o.useCallback)((()=>{n&&(l({functionStore:n,fn:{...t,value:g??void 0}}),c(!1))}),[t,g,l,n]),m=(0,o.useCallback)((()=>{h(t.value||""),c(!0)}),[t.value,c]),v=(0,o.useCallback)((()=>{h(t.value||""),c(!1)}),[t.value,c]),x=(0,o.useCallback)((async()=>{if(t.value){const e=await Te().R.clipboardActions.load();e.copyString({environment:r,stringValue:t.value,copiedMessage:e.clipboardMessages.copiedCodeToClipboard})}}),[t.value,r]),y=g!==t.value;return(0,k.jsxs)(s().Y1,{direction:"vertical",height:"fill",children:[(0,k.jsx)(ze,{fn:t,editing:d,isModified:y,onClickEdit:m,onClickCancel:v,onClickSave:f,onClickCopy:x}),(0,k.jsx)(s().Y1,{direction:"vertical",height:"fill",style:{minHeight:0},children:d?(0,k.jsx)(Ne,{editedValue:g,setEditedValue:h,fnKey:t.key,functionStore:n,fillHeight:!0,inputPadding:"16px 24px"}):(0,k.jsx)(he().O,{value:t.value||"",styles:p.highlightedCode})})]})}function ze(e){const{fn:t,editing:n,isModified:o,onClickEdit:i,onClickCancel:r,onClickSave:l,onClickCopy:d}=e,c=(0,h().tz)(),u=(0,a().IS)((e=>({header:{borderBottom:`1px solid ${e.lightDividerColor}`},icon:{width:16,height:16,fill:e.text.secondary}})),[]);return(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:"auto",width:"fill",padding:"10px 8px 10px 24px",style:u.header,children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:8,align:"center-left",children:[(0,Ie().m)(u.icon),(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:t.key})]}),(0,k.jsx)(s().Y1,{direction:"horizontal",gap:n?6:2,align:"center-right",children:n?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Le().p,{size:"sm",onClick:r,children:(0,k.jsx)(h().sA,{...B.cancel})}),(0,k.jsx)(Pe().A,{size:"sm",onClick:l,disabled:!o,children:(0,k.jsx)(h().sA,{...B.save})})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fe().A,{onClick:d,icon:Me().V,ariaLabel:c.formatMessage(B.copyFunctionContents)}),(0,k.jsx)(fe().A,{onClick:i,icon:Re().pencilLineIcon,ariaLabel:c.formatMessage(B.edit)})]})})]})}function He(e){const{calledFunctions:t,previewStore:n}=e,o=(0,a().IS)((e=>({titleContainer:{borderBottom:`1px solid ${e.lightDividerColor}`,paddingBottom:8,marginBottom:8}})),[]);return t.length?(0,k.jsxs)(s().Y1,{direction:"vertical",gap:4,padding:24,children:[(0,k.jsx)(s().Y1,{direction:"horizontal",gap:8,align:"center-left",style:o.titleContainer,children:(0,k.jsx)(T().D,{styleName:"UIHeading-17px/Medium",children:(0,k.jsx)(h().sA,{defaultMessage:"Referenced by this function",id:"workflow.function.referencedBy"})})}),t.map((e=>(0,k.jsx)(Oe,{fn:e,previewStore:n},e.key)))]}):null}function Oe(e){const{fn:t,previewStore:n}=e,r=(0,a().IS)((e=>({button:{color:e.text.secondary,fontSize:14},icon:{width:16,height:16,fill:e.text.secondary}})),[]),l=(0,i().v3)(),d=(0,o.useCallback)((()=>{(0,_().showWorkflowEditor)({environment:l,parentStore:n,navigationState:{isOpen:!0,type:"function",key:t.key}})}),[l,t.key,n]);return(0,k.jsx)(s().Y1,{direction:"vertical",gap:8,children:(0,k.jsx)(Le().p,{onClick:d,icon:Ie().m,iconStyle:r.icon,style:r.button,children:(0,k.jsx)(T().D,{colorName:"secondary",children:t.key})})})}var Ve=()=>n(29037),Ke=()=>n(637433),Ye=()=>n(284371),$e=()=>n(704152),Ue=()=>n(499653);function Ge(e){var t,n,i;const{test:r,functionStore:s}=e,l=(0,ge().X)("workflows_debug_tools"),[d,c]=(0,o.useState)(!1),{saveTest:g}=(0,u().$O)(),h=(0,a().IS)((e=>({container:{display:"flex",flexDirection:"column",gap:4},titleButton:{display:"flex",alignItems:"flex-start",gap:8,padding:"4px 8px",margin:"8px 0px",borderRadius:6},textContainer:{display:"flex",flexDirection:"column",gap:4,flex:1},titleText:{fontSize:13,fontWeight:Ye().Wy.medium},subtitleText:{fontSize:13,color:e.text.secondary},passedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.green[400]},failedIcon:{marginTop:2,width:16,height:16,fill:e.accentColors.red[400]}})),[]),p=(0,o.useCallback)((e=>{if(!s)return;const t=JSON.parse(e);g({functionStore:s,test:t})}),[g,s]),f=(0,o.useCallback)((()=>c((e=>!e))),[]);return(0,k.jsxs)("div",{style:h.container,children:[(0,k.jsxs)($e().A,{onClick:f,style:h.titleButton,disabled:!Boolean(null===(t=r.result)||void 0===t?void 0:t.effects),children:[null!==(n=r.result)&&void 0!==n&&n.passed?(0,Ve().checkmarkIcon)(h.passedIcon):(0,Ke().Y)(h.failedIcon),(0,k.jsxs)("div",{style:h.textContainer,children:[(0,k.jsx)("div",{style:h.titleText,children:r.description.name}),(0,k.jsx)("div",{style:h.subtitleText,children:r.description.description})]})]}),d&&(0,k.jsxs)(k.Fragment,{children:[(null===(i=r.result)||void 0===i?void 0:i.effects)&&(0,k.jsx)(k.Fragment,{children:r.result.effects.map(((e,t)=>(0,k.jsx)(Ue().T,{effect:e,isRunFinished:!0,logTimestamp:0,nextEventLogTimestamp:void 0},t)))}),l&&(0,k.jsx)(he().X,{value:JSON.stringify(r,null,2),onSave:p,language:"json"})]})]})}function Je(e){var t,n,o;const{fn:i,functionStore:r}=e,a=(null===(t=i.tests)||void 0===t?void 0:t.length)||0,l=(null===(n=i.tests)||void 0===n?void 0:n.filter((e=>{var t;return null===(t=e.result)||void 0===t?void 0:t.passed})).length)||0;return(0,k.jsxs)(s().Y1,{direction:"vertical",height:"fill",gap:24,padding:24,style:{overflowY:"auto"},children:[(0,k.jsxs)(s().Y1,{direction:"vertical",align:"center-left",gap:4,children:[(0,k.jsx)(T().D,{styleName:"UIHeading-17px/Medium",children:(0,k.jsx)(h().sA,{defaultMessage:"Simulated runs",id:"workflow.function.simulatedRuns"})}),(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:`${l}/${a} passed`})]}),(0,k.jsx)(s().Y1,{direction:"vertical",height:"fill",gap:4,children:null===(o=i.tests)||void 0===o?void 0:o.map((e=>(0,k.jsx)(Ge,{test:e,functionStore:r},e.description.name)))})]})}function qe(e){const{workflow:t,functionKey:n,previewStore:i}=e,a=(0,ge().X)("workflows_debug_tools"),[l,d]=(0,o.useState)(!1),c=(0,r().K8)((()=>(0,P().Dk)({workflow:t,previewStore:i,functionKey:n})),[t,i,n]),u=(0,r().K8)((()=>null==c?void 0:c.getData()),[c]),g=(0,r().K8)((()=>(0,P().wI)({workflow:t,functionStore:c})),[t,c]),h=(0,r().K8)((()=>u?(0,P().bq)({workflow:t,functionStoreMap:g,fn:u}):[]),[u,g,t]);return u?(0,k.jsxs)(s().Y1,{direction:"vertical",height:"fill",children:[(0,k.jsx)(Ae,{label:u.name||u.key,description:u.description,icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:ue().codeIcon})}),(0,k.jsx)(Ce,{tabs:[{key:"code",label:"Code",render:()=>(0,k.jsx)(Ee,{fn:u,functionStore:c})},{key:"tests",label:"Tests",render:()=>(0,k.jsx)(Je,{fn:u,functionStore:c})},h.length>0?{key:"related",label:"Related",render:()=>(0,k.jsx)(He,{previewStore:i,calledFunctions:h})}:void 0,{key:"debug",label:"Debug",render:()=>(0,k.jsx)(Ze,{functionStore:c,fn:u})}],right:(0,k.jsxs)(k.Fragment,{children:[a&&(0,k.jsx)(me,{isDebugging:l,onClick:()=>d((e=>!e))}),(0,k.jsx)(je,{workflowFunction:u,functionArgs:{}})]})})]}):null}function Ze(e){const{functionStore:t,fn:n}=e,{saveFunction:i}=(0,u().$O)(),r=(0,o.useCallback)((e=>{if(!t)return;const n=JSON.parse(e);i({functionStore:t,fn:n})}),[i,t]);return(0,k.jsx)(he().X,{value:(a=n,JSON.stringify(a,null,2)),onSave:r,language:"json",fillHeight:!0});var a}var Xe=()=>n(174480),Qe=()=>n(412237),et=()=>n(8741),tt=()=>n(620689),nt=()=>n(647702),ot=()=>n(286367),it=()=>n(938090),rt=()=>n(179030),at=()=>n(106412);function st(e){const{previewStore:t,module:n}=e,l=(0,i().v3)(),d=(0,o.useMemo)((()=>{if("database"===n.type)return(0,z().V4)({module:n,store:t})}),[n,t]),[c,u]=(0,o.useState)(void 0),g=(0,a().IS)((e=>({scroller:{flex:1}})),[]),h=(0,r().K8)((()=>tt().u5(l)),[l]);return"database"!==n.type?null:(0,k.jsx)(at().tx,{value:{isPreviewing:!0,disablePageLinks:!0,disableAllPointerEvents:!1,hideTableAggregationRow:!0,disableEditingName:!0,hideViewBlockSource:!0,location:"app_builder"},children:(0,k.jsxs)(s().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0,minHeight:0},children:[(0,k.jsx)(lt,{collectionContextStore:c,previewStore:t,module:n}),d?(0,k.jsx)(v().H,{type:x().A.All,style:g.scroller,preventType:h,children:(0,k.jsx)(it().dN,{store:t,overridePaddingLeft:24,overridePaddingRight:0,isFullScreen:!0,hideViewTabBar:!0,productUseCase:"preview_collection",disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"hidden",setCollectionContextStore:e=>{const n=(0,nt().d)({environment:l,collectionStore:d,collectionViewBlockStore:t,freezeTitle:!1});e.setContext({type:"collectionSettings",collectionViewBlockStore:t,collectionStore:d,collectionViewStore:n}),u(e)}})}):(0,k.jsx)(s().Y1,{padding:24,children:(0,k.jsx)(rt().l,{tint:"yellow",label:"Couldn't get collection store from database module",display:"inline"})}),(0,k.jsx)(ce().r0,{children:(0,k.jsx)(ce().bi,{module:n})})]})})}function lt(e){const{collectionContextStore:t,previewStore:n,module:i}=e,a=(0,r().r6)((()=>!1),[]),s=(0,o.useCallback)((()=>{}),[]),l=(0,o.useCallback)((()=>{}),[]);return(0,k.jsx)(Ae,{icon:(0,k.jsx)(O,{previewStore:n,module:i}),label:t?(0,k.jsx)(ot().D,{collectionContextStore:t,showHoverActionsStore:a,addViewButton:void 0,isHovered:!1,titleStyle:{fontFamily:"inherit",fontSize:"inherit",fontWeight:"inherit",margin:0,padding:0}}):i.name,right:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(ye().E,{onClick:s,disabled:!0,icon:et().arrowDiagonalUpRightSmallIcon,children:(0,k.jsx)(h().sA,{id:"workflows.database.open",defaultMessage:"Open"})}),(0,k.jsx)(ye().E,{onClick:l,disabled:!0,icon:Qe().aiFaceSmallIcon,children:(0,k.jsx)(h().sA,{id:"workflows.database.chat",defaultMessage:"Chat"})})]})})}function dt(e){const{workflow:t,workflowStore:n,previewStore:o,module:i}=e;return"database"===i.type?(0,k.jsx)(st,{workflow:t,workflowStore:n,previewStore:o,module:i}):(0,k.jsx)(s().Y1,{padding:24,width:"fill",height:"fill",style:{overflowY:"auto"},children:(0,k.jsx)(Xe().El,{moduleKey:i.key,workflow:t,workflowStore:n,previewStore:o},i.key)})}function ct(e){const{previewStore:t,collectionViewId:n}=e,l=(0,i().v3)(),[d,c]=(0,o.useState)(void 0),u=(0,r().K8)((()=>null==d?void 0:d.collectionViewStore()),[d]),g=(0,a().IS)((e=>({scroller:{flex:1}})),[]),h=(0,r().K8)((()=>tt().u5(l)),[l]);return(0,k.jsx)(at().tx,{value:{isPreviewing:!0,disablePageLinks:!0,disableAllPointerEvents:!1,hideTableAggregationRow:!0,hideViewBlockSource:!0,location:"app_builder"},children:(0,k.jsxs)(s().Y1,{direction:"vertical",width:"fill",height:"fill",style:{minWidth:0,minHeight:0},children:[u?(0,k.jsx)(ut,{collectionViewStore:u}):null,(0,k.jsx)(v().H,{type:x().A.All,style:g.scroller,preventType:h,children:(0,k.jsx)(it().dN,{store:t,overridePaddingLeft:24,overridePaddingRight:0,viewId:n,isFullScreen:!0,hideViewTabBar:!0,productUseCase:"preview_collection",showOnlyCurrentView:!0,disabled:!1,headerAllowedActions:["filter","sort","search","viewSettings","addItem"],headerActionsBehavior:"hidden",setCollectionContextStore:c})})]})})}function ut(e){const{collectionViewStore:t}=e,n=(0,o.useCallback)((()=>{}),[]),{viewIcon:i,viewType:a}=(0,r().K8)((()=>({viewIcon:t.getFormat().collection_view_icon,viewType:t.getType()})),[t]);return(0,k.jsx)(Ae,{icon:(0,k.jsx)(re().h,{color:"lightGray",viewType:a,viewIcon:i,size:24}),label:(0,k.jsx)(ae().A,{store:t}),right:(0,k.jsx)(ye().E,{onClick:n,disabled:!0,icon:Qe().aiFaceSmallIcon,children:(0,k.jsx)(h().sA,{id:"workflows.view.chat",defaultMessage:"Chat"})})})}var gt=()=>n(395361),ht=()=>n(604995),pt=()=>n(416504),ft=()=>n(187174),mt=()=>n(973647),vt=()=>n(346923);function xt(e,t){const n=(0,o.useRef)(),i=(0,o.useRef)(null),[r,a]=(0,o.useState)(t),s=(0,o.useCallback)((()=>a((e=>null===e?t:null))),[t]);function l(){var e;null===(e=n.current)||void 0===e||e.call(n)}const d=(0,o.useCallback)((()=>{i.current&&clearInterval(i.current)}),[]),c=(0,o.useCallback)((()=>{d(),i.current=setInterval(l,t)}),[d,t]);return(0,o.useEffect)((()=>{n.current=e}),[e]),(0,o.useEffect)((()=>(i.current&&clearInterval(i.current),null!==r&&(i.current=setInterval(l,r)),d)),[r,d]),{toggle:s,clear:d,reset:c}}var yt=()=>n(227440);const wt={viewBox:"0 0 20 20",svg:(0,k.jsx)("path",{d:"M6.65 17.67a4 4 0 0 1-2.85-1.18l-.37-.37a4.026 4.026 0 0 1 0-5.69l1.85-1.85c.34-.34.9-.34 1.24 0s.34.9 0 1.24l-1.85 1.85c-.89.89-.89 2.33 0 3.22l.37.37c.89.89 2.33.89 3.22 0l1.85-1.85c.34-.34.9-.34 1.24 0s.34.9 0 1.24L9.5 16.5a4 4 0 0 1-2.85 1.18zm.44-3.96c-.22 0-.45-.08-.62-.26a.88.88 0 0 1 0-1.24l5.45-5.45c.34-.34.9-.34 1.24 0s.34.9 0 1.24l-5.45 5.45a.87.87 0 0 1-.62.26m6.93-2.11c-.22 0-.45-.08-.62-.26a.88.88 0 0 1 0-1.24l1.85-1.85c.43-.43.67-1 .67-1.61s-.24-1.18-.67-1.61l-.37-.37c-.86-.86-2.36-.86-3.22 0L9.81 6.51c-.34.34-.9.34-1.24 0a.88.88 0 0 1 0-1.24l1.85-1.85a4 4 0 0 1 2.85-1.18 4 4 0 0 1 2.85 1.18l.37.37a4 4 0 0 1 1.18 2.85 4 4 0 0 1-1.18 2.85l-1.85 1.85c-.17.17-.4.26-.62.26"})},St=(0,j().wt)("linkFill",wt);var bt=()=>n(145820),jt=()=>n(186445),kt=()=>n(645873),Ct=()=>n(630116),At=()=>n(203066),It=()=>n(153321);const Mt={opacity:0,height:0},Rt={opacity:1,height:"auto"},Tt=24,Lt=12;function Pt(e){const{children:t,isOpen:n,relativePaddingLeft:i=0,relativePaddingRight:r=0}=e,l=Tt+i,d=Tt+r,[c]=(0,o.useState)(n),u=(0,a().IS)((e=>({divider:{borderBottom:`1px solid ${e.stroke.secondary}`,marginLeft:Tt}})),[]);return(0,k.jsx)(At().N,{children:n?(0,k.jsxs)(It().P.div,{initial:c?Rt:Mt,animate:Rt,exit:Mt,transition:{duration:.2},children:[(0,k.jsx)(s().Y1,{direction:"horizontal",gap:6,padding:`${Lt}px ${d}px ${Lt}px ${l}px`,children:t}),(0,k.jsx)("div",{style:u.divider})]}):null})}var Bt=()=>n(52940),_t=(n(18107),n(967357),()=>n(115512));var Dt=()=>n(731382);function Ft(e){const{functionKey:t,functionArgs:n={},stringifiedDebugContent:a,isFunctionCall:s,workflowStore:l,logTimestamp:d,nextEventLogTimestamp:c,isLastEntry:g,runStore:p}=e,f=(0,i().v3)(),{clientStore:m,threadStore:v,store:x}=(0,u().$O)(),y=function(e){const{runStore:t,workflow:n}=e,o=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.function_artifact_pointers}),[t]);return(0,r().K8)((()=>{if(!n)return[];const{currentUserStore:e}=we().default.state;if(!e)throw new Error("No current user store");const t=o||n.functionPointers;if(!t||0===t.length)return[];const i=t.map((t=>Ct().je.createChildStore(e,t)));return(0,z().aY)(i)}),[n,o])}({runStore:p,workflow:(0,r().K8)((()=>(0,z().dh)(l)),[l])}),w=(0,o.useMemo)((()=>y.find((e=>e.key===t))),[y,t]),S=(0,o.useCallback)((()=>{_().showWorkflowEditor({environment:f,parentStore:x,navigationState:{isOpen:!0,type:"function",key:t}})}),[f,t,x]),b=(0,r().K8)((()=>Boolean(void 0!==(null==v?void 0:v.getCurrentInferenceId())||(null==v?void 0:v.id)&&m.getClientAIChatThreadStore(v.id).state.loading)),[m,v]),j=(0,o.useCallback)((()=>{w&&Se().runWorkflowFunction({environment:f,workflowFunction:w,workflowStore:l,clientStore:m,threadStore:v,functionArgs:n,parentStore:x})}),[w,f,n,v,m,l,x]);return(0,k.jsxs)(Dt().u,{state:b?"running":"success",fullContent:a,logTimestamp:d,nextEventLogTimestamp:c,onClickRunButton:b?void 0:j,skipThreadLine:g,children:[!s&&(0,k.jsx)(h().sA,{id:"WorkflowRun.finished",defaultMessage:"Finished: "}),(0,k.jsx)($e().A,{onClick:S,children:null==w?void 0:w.name})]})}function Nt(e){const{errorMessage:t,stack:n,isExpanded:o}=e,i=(0,Bt().G)();return(0,k.jsxs)(k.Fragment,{children:[t,o&&(0,k.jsx)("div",{style:i.code,children:n})]})}function Wt(e){const{event:t,isLastEntry:n}=e,i=(0,Bt().G)(),r=(0,a().IS)((e=>({inlineLogMessage:{marginRight:4},expandableContextText:{color:e.text.secondary},messages:{display:"block"}})),[]),{logLevelPrefix:s,isError:l}=(0,o.useMemo)((()=>{switch(t.level){case"error":return{logLevelPrefix:"Error: ",isError:!0};case"warn":return{logLevelPrefix:"Warning: ",isError:!1};case"info":return{logLevelPrefix:void 0,isError:!1};default:(0,p().HB)(t.level)}}),[t.level]),d=(0,o.useMemo)((()=>t.messages.some((e=>"object"===e.type||"error"===e.type))),[t.messages]),c=(0,k.jsx)("div",{style:i.code,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return e.data;case"object":return(0,k.jsx)("div",{children:JSON.stringify(JSON.parse(e.data),null,2)},`${e.type}-${t}`);case"undefined":return"undefined";case"error":return(0,k.jsx)(Nt,{errorMessage:e.message,stack:e.stack,isExpanded:!0},`${e.type}-${t}`);case"database":return`${e.database_key}`;default:return(0,p().HB)(e)}}))});return(0,k.jsxs)(Dt().u,{state:l?"error":"success",skipThreadLine:n,fullContent:d?c:void 0,children:[s,(0,k.jsx)("div",{style:r.messages,children:t.messages.map(((e,t)=>{switch(e.type){case"msg":return(0,k.jsx)("span",{style:r.inlineLogMessage,children:e.data});case"object":return null;case"undefined":return"undefined";case"error":return(0,k.jsx)(Nt,{errorMessage:e.message,stack:e.stack,isExpanded:!1});case"database":return(0,k.jsx)("span",{style:r.inlineLogMessage,children:e.database_key});default:return(0,p().HB)(e)}}))}),d&&(0,k.jsx)("div",{style:r.expandableContextText,children:"{Collapsed information}"})]})}function Et(e){const{eventLog:t,store:n,workflowStore:i,runStore:r,shouldShowLogsInFunctions:s,finishedAt:l}=e,d=(0,a().IS)((e=>({list:{..._t().$t,color:e.text.primary}})),[]),c=(0,o.useMemo)((()=>s?t:t.filter((e=>{let{type:t}=e;return"log"!==t&&"functionReturn"!==t}))),[t,s]);return(0,k.jsx)("ul",{style:d.list,children:c.map(((e,t)=>{const o=c.length>t+1?c[t+1].timestamp_ms:l,a=t===c.length-1,s=((s,d)=>{switch(e.type){case"log":return(0,k.jsx)(Wt,{event:e,isLastEntry:a},`${e.type}-${t}`);case"effect":return(0,k.jsx)(Ue().T,{effect:e.effect,isRunFinished:Boolean(l),logTimestamp:e.timestamp_ms,nextEventLogTimestamp:o,isLastEntry:a});case"functionCall":const c=null===(s=e.function_arguments)||void 0===s?void 0:s.at(0),u=c?JSON.parse(c):{};return(0,k.jsx)(Ft,{functionKey:e.function_key,functionArgs:u,stringifiedDebugContent:JSON.stringify(JSON.parse(`[${(null===(d=e.function_arguments)||void 0===d?void 0:d.join(","))??""}]`),null,2),isFunctionCall:!0,workflowStore:i,store:n,logTimestamp:e.timestamp_ms,nextEventLogTimestamp:o,isLastEntry:a,runStore:r});case"functionReturn":return(0,k.jsx)(Ft,{functionKey:e.function_key,stringifiedDebugContent:JSON.stringify(e.function_return,null,2),isFunctionCall:!1,workflowStore:i,store:n,logTimestamp:e.timestamp_ms,nextEventLogTimestamp:o,isLastEntry:a,runStore:r});default:return(0,p().HB)(e)}})();return(0,k.jsx)("li",{children:s},`${e.type}-${t}`)}))})}function zt(e){let{title:t,icon:n,children:o}=e;const i=(0,a().IS)((e=>({titleContainer:{borderBottom:`1px solid ${e.stroke.primary}`,paddingBottom:8}})),[]);return(0,k.jsxs)("div",{children:[(0,k.jsx)(s().Y1,{direction:"vertical",align:"top-left",children:(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:8,style:i.titleContainer,children:[n,(0,k.jsx)(T().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:t})]})}),o]})}function Ht(e){const{runStore:t,workflowStore:n,store:o,shouldShowLogsInFunctions:i}=e,{eventLog:a,finishedAt:s}=(0,r().K8)((()=>{const e=t.getData();return{eventLog:null==e?void 0:e.event_log,finishedAt:null==e?void 0:e.finished_at}}),[t]),l=(0,Bt().G)();return a?(0,k.jsx)(zt,{title:"Actions",icon:(0,Ie().m)(l.inlineIcon),children:(0,k.jsx)(Et,{eventLog:a,workflowStore:n,store:o,runStore:t,shouldShowLogsInFunctions:i,finishedAt:s})}):null}var Ot=()=>n(859428);function Vt(e){const{children:t,tooltip:n,...o}=e,i=Boolean(!n);return(0,k.jsx)(Ot().A,{disableTooltip:i,renderTooltip:()=>n,render:e=>(0,k.jsx)(Le().p,{...o,...e,children:t})})}function Kt(e){let{script:t}=e;const n=(0,Bt().G)(),o=(0,a().IS)((e=>({highlightedCode:{marginTop:16,background:e.codeBlockBackground,borderRadius:8,padding:12}})),[]);return(0,k.jsx)(zt,{title:"Script",icon:A(n.inlineIcon),children:(0,k.jsx)(he().O,{value:t.code,styles:o.highlightedCode})})}function Yt(e){var t;const{runStore:n,workflowData:o}=e,{triggerData:i,triggerFrom:a,triggerAt:s,triggerKey:l}=(0,r().K8)((()=>{const e=n.getData(),t=null==e?void 0:e.trigger_data;return{triggerData:t?JSON.parse(t):{},triggerFrom:null==e?void 0:e.trigger_from,triggerAt:null==e?void 0:e.trigger_at,triggerKey:null==e?void 0:e.trigger_key}}),[n]),d=null==o||null===(t=o.triggers)||void 0===t?void 0:t.find((e=>e.key===l)),c=(0,Bt().G)();return d?(0,k.jsx)(zt,{title:(0,k.jsx)(h().sA,{id:"WorkflowRun.triggerEvent",defaultMessage:"Trigger event"}),icon:A(c.inlineIcon),children:(0,k.jsx)($t,{triggerName:"run-button"===a?"Run button":d.name,triggerData:i,triggerAt:s})}):null}function $t(e){const{triggerName:t,triggerData:n,triggerAt:o}=e;return(0,k.jsx)(Dt().u,{state:"success",fullContent:JSON.stringify(n,null,2),skipThreadLine:!0,logTimestamp:o,children:t||(0,k.jsx)(h().sA,{id:"WorkflowRun.unknownTrigger",defaultMessage:"Unknown"})})}var Ut=()=>n(244641),Gt=()=>n(209969),Jt=()=>n(181088),qt=()=>n(331542),Zt=()=>n(962730),Xt=()=>n(697596);function Qt(e){const{timestamp:t}=e,[n,i]=(0,o.useState)(Ut().c9.fromMillis(t).toRelative()),r=(0,o.useMemo)((()=>{const e=Ut().c9.now(),n=Ut().c9.fromMillis(t),o=e.diff(n);return o.as("seconds")<60?1e3:o.as("minutes")<60?6e4:o.as("hours")<24?36e5:864e5}),[t]),a=(0,o.useCallback)((()=>{i(Ut().c9.fromMillis(t).toRelative())}),[t]);return(0,o.useEffect)((()=>{i(Ut().c9.fromMillis(t).toRelative())}),[t]),xt(a,r),(0,k.jsx)("time",{dateTime:Ut().c9.fromMillis(t).toISO(),children:n})}function en(e){const{runSummary:t,version:n}=e,o=(0,a().IS)((e=>({version:{fontFamily:Ye().Tf.mono,fontSize:11,fontWeight:Ye().Wy.semibold,color:e.text.secondary,backgroundColor:e.tint.regular,padding:"4px 8px",borderRadius:6}})),[]);if(void 0===n&&void 0===t)return null;let i,r;if(t)switch(t.status){case"pending":case"running":i=(0,k.jsx)(nn,{createdAt:t.createdAt});break;case"success":i=(0,k.jsx)(on,{finishedAt:t.finishedAt??t.createdAt}),r=(0,k.jsx)(tn,{createdAt:t.createdAt,finishedAt:t.finishedAt});break;case"failure":i=(0,k.jsx)(rn,{finishedAt:t.finishedAt??t.createdAt}),r=(0,k.jsx)(tn,{createdAt:t.createdAt,finishedAt:t.finishedAt})}return(0,k.jsxs)(k.Fragment,{children:[void 0!==n&&(0,k.jsx)("div",{style:o.version,children:`V${n}`}),r,i]})}function tn(e){let{createdAt:t,finishedAt:n}=e;const i=(0,a().IS)((e=>({icon:{height:16,fill:e.text.secondary,width:16}})),[]),r=(0,o.useMemo)((()=>{const e=n??t;return Ut().dw.fromMillis(e-t)}),[t,n]);return(0,k.jsx)(an,{icon:(0,Jt().clockSmallIcon)(i.icon),text:(0,k.jsx)(Xt().b,{durationInMs:r.toMillis()})})}function nn(e){let{createdAt:t}=e;const n=(0,o.useMemo)((()=>Ut().c9.fromMillis(t)),[t]);return(0,k.jsx)(an,{icon:(0,k.jsx)(qt().A,{size:"sm"}),text:(0,k.jsx)(Ot().A,{placement:Zt().W.Bottom,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(h().sA,{id:"WorkflowRun.started",defaultMessage:"Started {timestampElement}",values:{timestampElement:(0,k.jsx)(Qt,{timestamp:n.toMillis()})}})}),renderTooltip:()=>(0,k.jsx)(k.Fragment,{children:n.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function on(e){let{finishedAt:t}=e;const n=(0,a().IS)((e=>({icon:{height:16,fill:e.icon.greenPrimary,width:16}})),[]),i=(0,o.useMemo)((()=>Ut().c9.fromMillis(t)),[t]);return(0,k.jsx)(an,{icon:(0,Gt().checkmarkCircleFillIcon)(n.icon),text:(0,k.jsx)(Ot().A,{placement:Zt().W.Bottom,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(h().sA,{id:"WorkflowRun.completed",defaultMessage:"Completed {timestampElement}",values:{timestampElement:(0,k.jsx)(Qt,{timestamp:i.toMillis()})}})}),renderTooltip:()=>(0,k.jsx)(k.Fragment,{children:i.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function rn(e){let{finishedAt:t}=e;const n=(0,a().IS)((e=>({icon:{fill:e.icon.redPrimary,height:16,width:16}})),[]),i=(0,o.useMemo)((()=>Ut().c9.fromMillis(t)),[t]);return(0,k.jsx)(an,{icon:(0,Ke().Y)(n.icon),text:(0,k.jsx)(Ot().A,{placement:Zt().W.Bottom,render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(h().sA,{id:"WorkflowRun.failure",defaultMessage:"Failed {timestampElement}",values:{timestampElement:(0,k.jsx)(Qt,{timestamp:i.toMillis()})}})}),renderTooltip:()=>(0,k.jsx)(k.Fragment,{children:i.toFormat("LLL dd, yyyy 'at' h:mm a")})})})}function an(e){const{icon:t,text:n}=e,o=(0,a().IS)((e=>({item:{display:"flex",alignItems:"center",gap:3}})),[]);return(0,k.jsxs)("div",{style:o.item,children:[t,(0,k.jsx)(T().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:n})]})}var sn=()=>n(769607),ln=()=>n(864943);function dn(e){const{workflowStore:t,store:n,runStore:r,error:s,label:l}=e,d=(0,i().Y0)(),c=(0,i().v3)(),{clientStore:g,threadStore:p}=(0,u().$O)(),f=Boolean(s),[m,v]=o.useState(""),x=(0,a().IS)((e=>({wrap:{width:340,padding:8},button:{paddingLeft:6},iconStyle:{fill:e.text.secondary}})),[]),y=(0,o.useCallback)((()=>{(0,Se().requestEditWorkflowFunction)({environment:c,store:n,workflowStore:t,runStore:r,threadStore:p,clientStore:g,isError:f,userFeedback:m})}),[f,m,n,t,r,c,p,g]),w=(0,h().tz)();return f?(0,k.jsx)(ln().A,{style:x.button,icon:sn().aiFaceFillIcon,size:"md",onClick:y,color:"uiRed",children:l}):(0,k.jsx)(G().Ay,{popupType:d.isMobile?G().z7.BottomSheet:G().z7.Popup,placementToOrigin:G().sx.Bottom,alignmentToOrigin:G().yP.Center,originGap:4,renderOrigin:e=>(0,k.jsx)(Le().p,{style:x.button,icon:sn().aiFaceFillIcon,iconStyle:x.iconStyle,size:"md",...e,children:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:l})}),render:e=>(0,k.jsx)(_e().A,{debugName:"WorkflowRunFeedbackButton",capture:!0,render:t=>(0,k.jsx)("div",{style:x.wrap,...t,children:(0,k.jsx)(De().A,{value:m,textarea:!0,autoFocus:!0,autosize:!0,autosizeMinHeight:200,autosizeMaxHeight:600,onChange:e=>v(e.target.value),textareaSubmitOnEnter:!0,onSubmit:()=>{e.close(),y()},placeholder:w.formatMessage({id:"workflowRun.feedbackPlaceholder",defaultMessage:"What should I fix about this run?"})})})})})}function cn(e){const{runStore:t,workflowStore:n,store:o,eventLog:i}=e,l=(0,r().K8)((()=>{var e;const n=null===(e=t.getData())||void 0===e?void 0:e.error;return n?function(e){const t=e.match(/<message>([\s\S]*?)<\/message>/),n=e.match(/<stack-trace>([\s\S]*?)<\/stack-trace>/),o=[...e.matchAll(/<snippet at="([^"]+)">\n?([\s\S]*?)\n?<\/snippet>/g)];return{message:t?t[1].trim():"Internal error",stackTrace:n?n[1].trim():"",codeSnippets:o.map((e=>{const[,t,n]=e,o=t.split(":"),i=o[0],r=parseInt(o[1]),a=i.split(".")[0];return{fileName:i,lineNumber:r,functionName:a,content:n}}))}}(n.message):null}),[t]),d=(0,a().IS)((e=>({container:{borderRadius:10,border:`1px solid ${e.stroke.primary}`},header:{borderBottom:`1px solid ${e.stroke.primary}`,padding:8},banner:{backgroundColor:e.accentColors.red[50],borderRadius:10},failedIcon:{width:16,height:16,fill:e.icon.redPrimary},code:{background:e.codeBlockBackground,padding:12}})),[]);if(!l)return null;const c=l.codeSnippets.at(0);return(0,k.jsxs)(s().Y1,{direction:"vertical",gap:16,children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",align:"center",gap:"auto",style:d.banner,padding:"8px 8px 8px 12px",children:[(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"uiRedPrimary",children:l.message}),(0,k.jsx)(dn,{workflowStore:n,store:o,eventLog:i,runStore:t,error:l.message,label:(0,k.jsx)(h().sA,{id:"WorkflowRun.fixWithAI",defaultMessage:"Fix with AI"})})]}),c&&(0,k.jsxs)(s().Y1,{direction:"vertical",style:d.container,children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",align:"center-left",gap:10,style:d.header,children:[(0,Ke().Y)(d.failedIcon),(0,k.jsx)(T().D,{styleName:"UISmall-12px/Medium",children:(null==c?void 0:c.fileName)??(0,k.jsx)(h().sA,{id:"WorkflowRun.unknownFunction",defaultMessage:"Unknown function"})})]}),(0,k.jsx)(s().Y1,{direction:"horizontal",align:"center-left",style:d.code,children:(0,k.jsx)(he().O,{value:c.content,language:"jsstacktrace"})})]})]})}function un(e){var t;const{runStore:n,workflow:o}=e,i=(0,r().K8)((()=>{var e,t;const i=null===(e=n.getData())||void 0===e||null===(e=e.workflow_version_pointer)||void 0===e?void 0:e.id,r=null==o||null===(t=o.versionPointer)||void 0===t?void 0:t.id;return Boolean(i)&&Boolean(r)&&i!==r}),[null==o||null===(t=o.versionPointer)||void 0===t?void 0:t.id,n]),l=(0,a().IS)((e=>({container:{backgroundColor:e.accentColors.yellow[50],borderRadius:10}})),[]);return i?(0,k.jsx)(s().Y1,{direction:"horizontal",align:"center-left",gap:8,style:l.container,padding:12,children:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Medium",colorName:"uiYellowPrimary",children:(0,k.jsx)(h().sA,{id:"WorkflowRun.ranOnPreviousVersion",defaultMessage:"Ran on previous version of workflow"})})}):null}function gn(e){const{runId:t,workflowStore:n,parentStore:o}=e,i=(0,r().K8)((()=>{if(n)return Ct().ty.createChildStore(n,{table:bt().QR,id:t,spaceId:o.getSpaceId()})}),[n,o,t]);return i?(0,k.jsx)(hn,{runStore:i,workflowStore:n,parentStore:o}):null}function hn(e){const{runStore:t,workflowStore:n,parentStore:l}=e,d=(0,h().tz)(),c=(0,i().v3)(),u=(0,a().IS)((e=>({subheading:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:4,fontWeight:Ye().Wy.semibold,fontSize:14,marginTop:16}})),[]),g=(0,r().K8)((()=>(0,z().dh)(n)),[n]),f=(0,r().K8)((()=>(0,jt()._m)(c)),[c]),m=(0,r().K8)((()=>f?(0,P().gf)({runStore:t,userStore:f,workflow:g}):[]),[g,t,f]),v=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.trigger_key}),[t]),x=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.script}),[t]),y=(0,r().K8)((()=>{if(v)return m.find((e=>e.key===v))}),[v,m]),w=(null==x?void 0:x.name)||(null==y?void 0:y.name)||v,b=(0,r().K8)((()=>{const e=t.getStatus();if(!e)return;const n=t.getCreatedAt(),o=t.getDataStore().getKeyValue("finished_at");switch(e){case"pending":return{createdAt:n,status:"pending"};case"running":return{createdAt:n,status:"running"};case"success":return{createdAt:n,finishedAt:o,status:"success"};case"failure":return{createdAt:n,finishedAt:o,status:"failure"};default:return(0,p().HB)(e)}}),[t]),{value:j}=(0,kt().fJ)(Te().R.clipboardActions),C=(0,o.useCallback)((()=>{const e=window.location.href;j&&j.copyString({environment:c,stringValue:e,copiedMessage:j.clipboardMessages.copiedLinkToClipboard})}),[c,j]),A=(0,r().K8)((()=>{var e;const n=null===(e=t.getData())||void 0===e?void 0:e.trigger_data;return n?JSON.parse(n):{}}),[t]),I=(0,r().K8)((()=>{var e;return null===(e=t.getData())||void 0===e?void 0:e.event_log}),[t]),M=(0,o.useMemo)((()=>!(!I||0===I.length)&&I.some((e=>"log"===e.type))),[I]),L=(0,r().K8)((()=>{var e,o;const i=null===(e=t.getData())||void 0===e?void 0:e.workflow_version_pointer;if(!i)return;const r=Ct().je.createChildStore(n,i);return null!=r&&r.isVersion()?null===(o=r.getData())||void 0===o?void 0:o.version:void 0}),[t,n]),[B,_]=(0,o.useState)(!1),D=(0,o.useCallback)((()=>_((e=>!e))),[]),F=(0,r().K8)((()=>B?t.getData():null),[t,B]),[N,W]=(0,o.useState)(!1),E=(0,ge().X)("workflows_debug_tools");return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Ae,{label:w,icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:S().clockIcon}),right:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(dn,{workflowStore:n,store:l,eventLog:I,runStore:t,label:"Ask AI"}),y?(0,k.jsx)(je,{workflowFunction:y,functionArgs:A}):null]})}),(0,k.jsx)(Pt,{isOpen:!0,children:(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:"auto",children:[(0,k.jsxs)(s().Y1,{direction:"horizontal",gap:20,align:"center-left",children:[(0,k.jsx)(en,{runSummary:b,version:L}),E&&(0,k.jsx)(me,{isDebugging:B,onClick:D})]}),(0,k.jsxs)(s().Y1,{direction:"horizontal",width:"hug",align:"center-right",gap:4,children:[(0,k.jsx)(fe().A,{onClick:C,icon:St,ariaLabel:d.formatMessage({id:"workflowRun.openRunInBuilder",defaultMessage:"Open run in builder"})}),(0,k.jsx)(Vt,{disabled:!M,disabledFeedback:!M,onClick:()=>W((e=>!e)),size:"md",tooltip:M?void 0:(0,k.jsx)(h().sA,{id:"WorkflowRun.noLogs.tooltip",defaultMessage:"No logs to display"}),children:(0,k.jsx)(T().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:N?(0,k.jsx)(h().sA,{id:"WorkflowRun.hideLogs",defaultMessage:"Hide logs"}):(0,k.jsx)(h().sA,{id:"WorkflowRun.showLogs",defaultMessage:"Show logs"})})})]})]})}),(0,k.jsxs)(s().Y1,{direction:"vertical",gap:32,padding:24,style:{overflowY:"auto"},children:[(0,k.jsx)(un,{runStore:t,workflow:g}),(0,k.jsx)(cn,{runStore:t,workflowStore:n,store:l,eventLog:I}),(0,k.jsxs)(s().Y1,{direction:"vertical",gap:33,children:[!x&&(0,k.jsx)(Yt,{runStore:t,workflowData:g}),x&&(0,k.jsx)(Kt,{script:x}),B&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{style:u.subheading,children:"Debug information"}),(0,k.jsx)(he().X,{value:JSON.stringify(F,null,2),language:"json"})]}),(0,k.jsx)(Ht,{runStore:t,workflowStore:n,store:l,shouldShowLogsInFunctions:N})]})]})]})}var pn=()=>n(42583),fn=()=>n(56394),mn=()=>n(377586),vn=()=>n(700250),xn=()=>n(928600),yn=()=>n(427711),wn=()=>n(722872);function Sn(e){const{dateRange:t,onChange:n}=e,{isMobile:r}=(0,i().Y0)(),a=(0,o.useMemo)((()=>({disableMenuWrap:!0,hideDateInputMenuItems:!0,onUpdate:e=>{if(e.error)return n({starting:void 0,ending:void 0}),null;n({...t,...e.value})},title:(0,k.jsx)("div",{children:"Title"}),value:t})),[t,n]),s=(0,o.useCallback)((()=>{n({starting:void 0,ending:void 0})}),[n]);return(0,k.jsxs)(xn().A,{menuType:r?wn().gu.Modal:wn().gu.Popup,children:[(0,k.jsx)(L().A,{children:(0,k.jsx)(yn().A,{...a})}),(0,k.jsx)(L().A,{topBorder:!0,children:(0,k.jsx)(M().A,{focused:!1,onClick:s,title:(0,k.jsx)(h().sA,{id:"workflowRuns.dateFilter.clear",defaultMessage:"Clear"})})})]})}function bn(e){const{dateRange:t,isActive:n,onChange:o}=e,{isMobile:r}=(0,i().Y0)(),s=(0,a().IS)((e=>({icon:{fill:n?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:n?void 0:e.stroke.secondary}})),[n]);return(0,k.jsx)(G().Ay,{alignmentToOrigin:vn().MY.Start,placementToOrigin:vn().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:r?mn().n.BottomSheet:mn().n.Popup,render:()=>(0,k.jsx)(Sn,{dateRange:t,onChange:o}),renderOrigin:e=>(0,k.jsx)(fn().A,{...e,icon:(0,pn().D)(s.icon),innerStyle:s.pillInnerStyle,on:n,title:"Date"}),trapFocus:!0})}var jn=()=>n(625830);function kn(e){let{selectedStatuses:t,onChange:n}=e;const{isMobile:r}=(0,i().Y0)(),s=(0,a().IS)((e=>({checkboxIcon:{fill:e.icon.primary}})),[]),l=(0,o.useCallback)((e=>{n(t.includes(e)?t.filter((t=>t!==e)):[...t,e])}),[n,t]),d=(0,o.useCallback)((()=>n([])),[n]),c=(0,o.useMemo)((()=>(0,p().uv)(Cn).map((e=>({key:`status-${e}`,action:()=>l(e),render:n=>(0,k.jsx)(M().A,{...n,icon:(0,k.jsx)(jn().A,{checked:t.includes(e),size:14,onClick:()=>l(e),style:s.checkboxIcon}),title:(0,k.jsx)(T().D,{children:Cn[e].label})})})))),[t,s.checkboxIcon,l]);return(0,k.jsx)(xn().A,{menuType:r?wn().gu.Modal:wn().gu.Popup,children:(0,k.jsx)(m().Ay,{type:m().Oh.Vertical,initialFocus:0,sections:[{key:"statuses",items:c,render:e=>(0,k.jsx)(L().A,{...e})},{key:"clear",items:[{key:"clear",action:d,render:e=>(0,k.jsx)(M().A,{...e,onClick:d,title:(0,k.jsx)(h().sA,{id:"workflowRuns.statusFilter.clear",defaultMessage:"Clear selection"})})}],render:e=>(0,k.jsx)(L().A,{...e,topBorder:!0})}]})})}const Cn={pending:{id:"pending",label:(0,k.jsx)(h().sA,{id:"workflowRuns.statusFilter.pending",defaultMessage:"Pending"})},running:{id:"running",label:(0,k.jsx)(h().sA,{id:"workflowRuns.statusFilter.running",defaultMessage:"Running"})},success:{id:"success",label:(0,k.jsx)(h().sA,{id:"workflowRuns.statusFilter.success",defaultMessage:"Success"})},failure:{id:"failure",label:(0,k.jsx)(h().sA,{id:"workflowRuns.statusFilter.failure",defaultMessage:"Failure"})}};function An(e){let{onChange:t,selectedStatuses:n}=e;const{isMobile:o}=(0,i().Y0)(),r=Boolean(n.length),s=(0,a().IS)((e=>({icon:{fill:r?e.icon.uiBluePrimary:e.icon.secondary,height:"auto",marginInlineEnd:6,width:16},pillInnerStyle:{borderColor:r?void 0:e.stroke.secondary}})),[r]);return(0,k.jsx)(G().Ay,{alignmentToOrigin:vn().MY.Start,placementToOrigin:vn().UV.Bottom,disableMouseCapture:!0,enableOutsideClickDismiss:!0,originGap:4,popupType:o?mn().n.BottomSheet:mn().n.Popup,render:()=>(0,k.jsx)(kn,{selectedStatuses:n,onChange:t}),renderOrigin:e=>(0,k.jsx)(fn().A,{...e,icon:(0,Gt().checkmarkCircleFillIcon)(s.icon),innerStyle:s.pillInnerStyle,on:r,title:"Status"}),trapFocus:!0})}function In(e){const{defaultFilterState:t,onChange:n}=e,[i,r]=(0,o.useReducer)(((e,t)=>{switch(t.type){case"setStatuses":return{...e,statuses:t.value};case"setDateRange":return{...e,dateRange:t.value};default:return e}}),t??{dateRange:{starting:void 0,ending:void 0},statuses:void 0});(0,o.useEffect)((()=>n(i)),[i,n]);const a=Boolean(i.dateRange.starting||i.dateRange.ending),s=(0,o.useCallback)((e=>{r({type:"setDateRange",value:e})}),[r]),l=(0,o.useCallback)((e=>{r({type:"setStatuses",value:e})}),[r]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(bn,{dateRange:i.dateRange,isActive:a,onChange:s}),(0,k.jsx)(An,{selectedStatuses:i.statuses??[],onChange:l})]})}var Mn=()=>n(299797);function Rn(e){let{onRefreshClick:t}=e;const n=(0,a().IS)((e=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,k.jsx)("div",{style:n.container,children:(0,k.jsx)(Mn().A,{icon:S().clockIcon,title:(0,k.jsx)(h().sA,{defaultMessage:"No runs yet",id:"workflowRuns.noRunsYet"}),description:(0,k.jsx)(h().sA,{defaultMessage:"App runs will appear here",id:"workflowRuns.noRunsYetDescription"}),cta:(0,k.jsx)(ln().A,{size:"lg",onClick:t,children:(0,k.jsx)(h().sA,{defaultMessage:"Refresh",id:"workflowRuns.refreshButton"})})})})}var Tn=()=>n(765974),Ln=()=>n(674276),Pn=()=>n(763071);function Bn(e){let{errorId:t}=e;const n=(0,a().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"},errorContainer:{marginBlockStart:8}})),[]);return(0,k.jsx)("div",{style:n.container,children:(0,k.jsx)(Mn().A,{description:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(h().sA,{defaultMessage:"It looks like something went wrong. Please try refreshing the page.",id:"workflowRuns.errorLoadingRunsDescription"}),t&&(0,k.jsx)(T().D,{styleName:"Micro-10px/Regular",style:n.errorContainer,children:(0,k.jsx)(Ln().b,{errorId:t,enablePopup:(0,Pn().o)(t)})})]}),icon:Tn().exclamationMarkTriangleFillIcon,title:(0,k.jsx)(h().sA,{defaultMessage:"Error loading runs",id:"workflowRuns.errorLoadingRunsTitle"})})})}function _n(){const e=(0,a().IS)((()=>({container:{display:"flex",justifyContent:"center",alignItems:"flex-start",paddingBlockStart:96,height:"100%"}})),[]);return(0,k.jsx)("div",{style:e.container,children:(0,k.jsx)(Mn().A,{description:"",icon:()=>(0,k.jsx)(qt().A,{size:"lg"}),title:(0,k.jsx)(h().sA,{defaultMessage:"Loading runs...",id:"workflowRuns.loadingRuns"})})})}var Dn=()=>n(496603),Fn=()=>n(641300),Nn=()=>n(710149),Wn=()=>n(566468),En=()=>n(125565),zn=()=>n(447587);function Hn(e){const{onRowClick:t,searchResponse:n,workflowStore:i}=e,s=function(){const e=(0,a().IS)((e=>({headerStyle:{boxShadow:`inset 0 -1px 0 ${e.tableDividerColor}`},headerTitle:{fontSize:14}})),[]);return(0,o.useMemo)((()=>[{id:"run",headerStyle:e.headerStyle,headerTitle:(0,k.jsx)("span",{style:e.headerTitle,children:(0,k.jsx)(h().sA,{defaultMessage:"Run",id:"workflowActivityTable.runColumn.header"})}),renderCell:e=>e.isLoading?(0,k.jsx)(Wn().mf,{includeByline:!0,includeIcon:!0}):(0,k.jsx)(Wn().s7,{byline:e.workflowVersion,containerStyles:{alignItems:"start"},icon:(0,k.jsx)(Vn,{status:e.runStatus}),iconMargin:10,title:e.runName}),sortable:!1,widthData:{minWidth:50,widthPercent:40}},{id:"completed",headerStyle:e.headerStyle,headerTitle:(0,k.jsx)("span",{style:e.headerTitle,children:(0,k.jsx)(h().sA,{defaultMessage:"Completed",id:"workflowActivityTable.completedColumn.header"})}),renderCell:e=>e.isLoading?(0,k.jsx)(Un,{maxLines:1}):e.runFinishedAt?(0,k.jsx)($n,{colorName:"tertiary",children:(0,k.jsx)(Qt,{timestamp:e.runFinishedAt})}):null,sortable:!1,widthData:{minWidth:50,widthPercent:20}}]),[e.headerStyle,e.headerTitle])}(),l=(0,a().IS)((e=>(0,Fn().rC)({columnRenderInfo:s,theme:e,containerMarginTop:0})),[s]),d=n.results,c=(0,r().K8)((()=>(0,P().My)({resultIds:d,workflowStore:i})),[d,i]);return(0,k.jsx)(Fn().WE,{columnRenderInfo:s,hideHeaderRowPadding:!0,onRowClick:t,renderNoRowsComponent:On,rows:c,showRowBorders:!0,styles:l})}function On(){return(0,k.jsxs)("div",{style:{alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",minHeight:"40vh"},children:[(0,k.jsx)("div",{children:(0,k.jsx)(En().A,{isSecondaryColor:!0,style:{fontWeight:500},children:(0,k.jsx)(h().sA,{defaultMessage:"No results",id:"workflowActivityTable.emptyTable.noResults"})})}),(0,k.jsx)(En().A,{isSecondaryColor:!0,children:(0,k.jsx)(h().sA,{defaultMessage:"Try different filters. Logs may take some time to show up.",id:"workflowActivityTable.emptyTable.noResultsHelpText"})})]})}function Vn(e){const{status:t}=e,n=(0,a().IS)((e=>({failedIcon:{fill:e.icon.uiRedPrimary},passedIcon:{fill:e.icon.greenPrimary},statusIcon:{marginTop:2,width:18,height:18}})),[]),i=(0,o.useMemo)((()=>"success"===t?{...n.statusIcon,...n.passedIcon}:"failure"===t?{...n.statusIcon,...n.failedIcon}:n.statusIcon),[t,n]);return"success"===t?(0,Gt().checkmarkCircleFillIcon)(i):"failure"===t?(0,Ke().Y)(i):"pending"===t||"running"===t?(0,k.jsx)(qt().A,{size:"sm",style:i}):void(0,p().HB)(t)}function Kn(e){return(0,Dn().Et)(e)&&e>0?e:Yn}const Yn=2;function $n(e){let{children:t,colorName:n,maxLines:o}=e;const i=(0,a().IS)((()=>({container:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"flex-start",padding:"8px 0",width:"100%"}})),[]);return(0,k.jsx)("div",{style:i.container,children:(0,k.jsx)(zn().A,{maxLines:Kn(o),children:(0,k.jsx)(T().D,{colorName:n,styleName:"UIRegular-14px/Regular",children:t})})})}function Un(e){let{maxLines:t}=e;const n=(0,a().IS)((()=>({container:{display:"flex",flexDirection:"column",gap:8,justifyContent:"center",padding:"8px 0",width:"100%"},line:{borderRadius:4,height:14,width:"100%"},lastLine:{borderRadius:4,height:14,width:"80%"}})),[]);return(0,k.jsx)("div",{style:n.container,children:Array.from({length:Kn(t)}).map(((e,t,o)=>{const i=t===o.length-1;return(0,k.jsx)(Nn().A,{style:i?n.lastLine:n.line},t)}))})}function Gn(e){const{handleRowClick:t,hasSearchTerm:n,refetchRuns:o,workflowRunsState:i,workflowStore:r}=e;if("idle"===i.status||"pending"===i.status)return(0,k.jsx)(_n,{});if("rejected"===i.status)return(0,k.jsx)(Bn,{});if("resolved"===i.status){var a;if(mt().Q.isFail(i.value))return(0,k.jsx)(Bn,{errorId:null===(a=i.value.error)||void 0===a?void 0:a.errorId});{const e=i.value.value.runIds;return(0,p().O9)(e)&&(e.length>0||n)?(0,k.jsx)(s().Y1,{direction:"vertical",width:"fill",height:"fill",padding:"16px",style:{overflowY:"auto"},children:(0,k.jsx)(Hn,{onRowClick:t,searchResponse:{results:e},workflowStore:r})}):(0,k.jsx)(Rn,{onRefreshClick:o})}}(0,p().HB)(i)}const Jn={viewBox:"0 0 16 16",svg:(0,k.jsx)("path",{d:"M11.228 2.361a.55.55 0 0 1 0 .778L9.354 5.014a.55.55 0 0 1-.778-.778l.89-.89H8A4.653 4.653 0 1 0 12.653 8a.597.597 0 0 1 1.194 0A5.847 5.847 0 1 1 8 2.153h1.465l-.889-.89a.55.55 0 1 1 .778-.777z"})},qn=(0,j().wt)("arrowCircleSpinClockwiseSmall",Jn);var Zn=()=>n(112412),Xn=()=>n(344417),Qn=()=>n(145214);function eo(e){let{value:t,onChange:n,style:i}=e;const[r,s]=(0,o.useState)(!1),l=(0,a().IS)((e=>({iconButton:{width:17,height:void 0,fill:e.icon.secondary},input:{fontSize:14,lineHeight:1,paddingRight:4,color:e.text.primary,marginBottom:1},ignoreArea:{display:"flex",alignItems:"center",overflow:"hidden"}})),[]),d=(0,o.useCallback)((()=>{s((e=>!e))}),[]),c=(0,o.useCallback)((()=>{n(""),s(!1)}),[n]),u=(0,o.useCallback)((()=>{t||s(!1)}),[t]),g=(0,o.useCallback)((e=>{27===e.keyCode&&c()}),[c]),p=(0,o.useCallback)((e=>{n(e.target.value)}),[n]),f=(0,h().tz)().formatMessage({id:"workflowRuns.searchInput.tooltip",defaultMessage:"Search"});return(0,k.jsx)(Ot().A,{renderTooltip:()=>f,render:e=>(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fe().A,{...e,icon:Xn().u,iconStyle:l.iconButton,onClick:d,ariaLabel:f}),(0,k.jsx)(Qn().A,{visible:r,animate:{width:150,opacity:1},initial:{width:0,opacity:0},exit:{width:0,opacity:0},children:(0,k.jsx)(_e().A,{debugName:"SearchInput",capture:r,allowEsc:!0,render:e=>(0,k.jsx)("div",{...e,style:l.ignoreArea,children:(0,k.jsx)(De().A,{style:{...l.input,...i},format:De().C.Transparent,value:t,onChange:p,placeholder:"Search runs...",focusInitial:r,showClearButton:!0,onBlur:u,onCancel:c,onClearButtonClick:c,onKeyDown:g})})})})]})})}function to(e){const{hasFilterEnabled:t,onFilterClick:n,onRefreshClick:o,onSearchChange:i,searchTerm:r}=e,s=(0,h().tz)(),l=(0,a().IS)((e=>({icon:{fill:e.icon.secondary,height:void 0,width:17},filterIcon:{fill:t?e.icon.uiBluePrimary:e.icon.secondary,height:void 0,width:17}})),[t]);return(0,k.jsx)(Ae,{label:(0,k.jsx)(h().sA,{defaultMessage:"All activity",id:"workflowAdvanced.runs.header"}),icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:S().clockIcon}),right:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(fe().A,{ariaLabel:s.formatMessage({defaultMessage:"Refresh",id:"workflowRuns.refreshButton"}),icon:qn,iconStyle:l.icon,onClick:o}),(0,k.jsx)(fe().A,{ariaLabel:s.formatMessage({defaultMessage:"Filter",id:"workflowRuns.filterButton"}),icon:Zn().$,iconStyle:l.filterIcon,onClick:n}),(0,k.jsx)(eo,{onChange:i,value:r??""})]})})}const no=3e4;function oo(e){const{workflowStore:t,previewStore:n,navigationState:a}=e,l=(0,i().v3)(),[d,c]=(0,o.useState)(!1),[u,g]=(0,r().K8)((()=>[t.id,t.getSpaceId()]),[t]),[p,f]=(0,o.useReducer)(((e,t)=>{switch(t.type){case"setSearchTerm":return{...e,searchTerm:t.value};case"setFilters":return{...e,dateRange:t.value.dateRange,statuses:t.value.statuses};default:return e}}),{dateRange:{starting:void 0,ending:void 0},searchTerm:"",statuses:void 0}),m=(0,vt().l)(p),v=(0,o.useMemo)((()=>{var e;return Boolean(m.dateRange.starting||m.dateRange.ending||((null===(e=m.statuses)||void 0===e?void 0:e.length)??0)>0)}),[m]),x=(0,h().tz)(),y=(0,o.useMemo)((()=>{var e,t;if(!g)return;const n=null!==(e=m.dateRange.starting)&&void 0!==e&&e.start_date?(0,ht().HF)(m.dateRange.starting,(0,pt().P)(),x.locale).startOf("day").toISO():void 0,o=null!==(t=m.dateRange.ending)&&void 0!==t&&t.start_date?(0,ht().HF)(m.dateRange.ending,(0,pt().P)(),x.locale).endOf("day").toISO():void 0;return{containsSubstring:m.searchTerm,end:o,spaceId:g,start:n,statuses:m.statuses,workflowId:u}}),[g,m,x,u]),[w,S]=(0,ft().Yb)((async()=>{if(!yt().A.state.online||!y)return mt().Q.success({runIds:void 0});const e=await Be().callApi({eventName:"getWorkflowRuns",environment:l,data:y});return"failed"===e.type?mt().Q.fail(e.body):mt().Q.success({runIds:e.data.runIds})}),[y,l]);xt(S,no);const b=(0,o.useCallback)((e=>{f({type:"setSearchTerm",value:e})}),[]),j=(0,gt().Y)(b,250),C=(0,o.useCallback)((e=>{f({type:"setFilters",value:e})}),[]),A=(0,o.useCallback)((()=>{c((e=>!e))}),[]),I=(0,o.useCallback)((e=>{(0,_().showWorkflowEditor)({environment:l,parentStore:n,navigationState:{runId:e.runId}})}),[l,n]);return a.runId?(0,k.jsx)(gn,{runId:a.runId,workflowStore:t,parentStore:n}):(0,k.jsxs)(s().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,k.jsx)(to,{hasFilterEnabled:v,onFilterClick:A,onRefreshClick:S,onSearchChange:j,searchTerm:p.searchTerm}),(0,k.jsx)(Pt,{isOpen:d,relativePaddingLeft:-6,children:(0,k.jsx)(In,{defaultFilterState:p,onChange:C})}),(0,k.jsx)(Gn,{handleRowClick:I,hasSearchTerm:Boolean(p.searchTerm),refetchRuns:S,workflowRunsState:w,workflowStore:t})]})}var io=()=>n(946548),ro=()=>n(919194);const ao=(0,h().YK)({triggerEnabledLabel:{defaultMessage:"Active",id:"aiWorkflow.trigger.triggerEnabledLabel"},triggerEnabledHiddenAriaLabel:{defaultMessage:"Trigger is active.",id:"aiWorkflow.trigger.triggerEnabledHiddenAriaLabel"},triggerPausedHiddenAriaLabel:{defaultMessage:"Trigger is paused.",id:"aiWorkflow.trigger.triggerPausedHiddenAriaLabel"},triggerDisabledTooltip:{defaultMessage:"You do not have permission to resume this trigger.",id:"aiWorkflow.trigger.triggerDisabledTooltip"},triggerErrorsDisabledTooltip:{defaultMessage:"Fix any errors or remove failing steps to enable this trigger",id:"aiWorkflow.trigger.triggerErrorsDisabledTooltip"}});function so(e){const{triggerKey:t}=e,n=(0,a().IS)((e=>({section:{display:"flex",flexDirection:"column",gap:8,width:"100%",marginBottom:28},header:{alignItems:"center",display:"flex",flexDirection:"row"},title:{color:e.text.tertiary,fontSize:12,lineHeight:1.3,fontWeight:Ye().Wy.medium}})),[]),{workflowStore:o,clientStore:s,store:l,threadStore:d}=(0,u().$O)(),c=(0,i().v3)(),g=(0,r().K8)((()=>{var e;return null===(e=(0,z().n2)({workflowStore:o,clientStore:s,environment:c,threadStore:d,store:l}))||void 0===e||null===(e=e.triggers)||void 0===e?void 0:e.find((e=>e.key===t))}),[o,t,s,c,l,d]);return g?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(lo,{trigger:g,cantSaveDueToError:!1,disabled:!1}),(0,k.jsxs)("section",{style:n.section,children:[(0,k.jsx)("header",{style:n.header,children:(0,k.jsx)("div",{style:n.title,children:(0,k.jsx)(h().sA,{defaultMessage:"When",id:"aiWorkflow.trigger.when"})})}),(0,k.jsx)(ro().VX,{children:(0,k.jsx)(ro().hZ,{trigger:g})})]}),(0,k.jsxs)("section",{style:n.section,children:[(0,k.jsx)("header",{style:n.header,children:(0,k.jsx)("div",{style:n.title,children:(0,k.jsx)(h().sA,{defaultMessage:"Do",id:"aiWorkflow.trigger.do"})})}),(0,k.jsx)(ro().VX,{children:(0,k.jsx)(ro().r2,{functionKey:g.key,parentStore:l})})]})]}):null}function lo(e){const{trigger:t,cantSaveDueToError:n,disabled:r}=e,s=!1!==t.enabled,l=`toggle-${t.key}`,d=(0,i().Y0)().isMobile,{saveTrigger:c}=(0,u().$O)(),g=(0,o.useCallback)((()=>{c({...t,enabled:!s})}),[c,t,s]),p=(0,a().IS)((e=>({labelWrap:{color:r?e.text.tertiary:e.text.secondary,flex:"1 1 auto",fontSize:d?Ye().J.UIRegular.mobile:Ye().J.UIRegular.desktop},sectionWrap:{alignItems:"start",display:"flex",flexDirection:"row",gap:6,marginBlockEnd:0,...d?{paddingBottom:0,paddingTop:0}:{paddingBottom:12,borderBottom:`1px solid ${e.stroke.secondary}`,marginBottom:16}},toggleWrap:{flex:"0 0 auto",paddingBlockStart:d?5:2}})),[r,d]),f=ao.triggerEnabledLabel,m=s?ao.triggerEnabledHiddenAriaLabel:ao.triggerPausedHiddenAriaLabel;return(0,k.jsxs)("section",{style:p.sectionWrap,children:[(0,k.jsx)("div",{style:p.toggleWrap,children:(0,k.jsx)(Ot().A,{disableTooltip:!r||!s,renderTooltip:()=>n?(0,k.jsx)(h().sA,{...ao.triggerErrorsDisabledTooltip}):(0,k.jsx)(h().sA,{...ao.triggerDisabledTooltip}),render:e=>(0,k.jsx)("div",{...e,children:(0,k.jsx)(io().A,{disabled:r,inputId:l,on:s,onClick:g})})})}),(0,k.jsx)("div",{style:p.labelWrap,children:(0,k.jsxs)("label",{htmlFor:l,children:[(0,k.jsx)("span",{"aria-hidden":!0,children:(0,k.jsx)(h().sA,{...f})}),(0,k.jsx)("span",{style:_t().Qg,children:(0,k.jsx)(h().sA,{...m})})]})})]})}function co(e){var t;const{workflow:n,triggerKey:o}=e,i=null===(t=n.triggers)||void 0===t?void 0:t.find((e=>e.key===o));return i?(0,k.jsxs)(s().Y1,{direction:"vertical",width:"fill",height:"fill",children:[(0,k.jsx)(Ae,{icon:(0,k.jsx)(R().I,{size:"default",color:"secondary",icon:A}),label:i.name}),(0,k.jsxs)(s().Y1,{direction:"vertical",gap:24,padding:24,height:"fill",style:{overflowY:"auto"},children:[(0,k.jsx)(so,{triggerKey:o}),(0,k.jsx)(ce().r0,{children:(0,k.jsx)(uo,{trigger:i})})]})]}):null}function uo(e){const{trigger:t}=e,{saveTrigger:n}=(0,u().$O)(),i=(0,o.useCallback)((e=>{const t=JSON.parse(e);n(t)}),[n]);return(0,k.jsx)(he().X,{value:(r=t,JSON.stringify(r,null,2)),onSave:i,language:"json"});var r}function go(e){const{previewStore:t,routerState:n,maybeLogSearchInteractionEvent:o}=e,i=(0,d().useWorkflowNavigationState)(),{workflowStore:r}=(0,u().$O)(),a=(0,w().J)()??g().ZB;if(null==i||!i.isOpen)return null;if("configure"===i.type)return(0,k.jsx)(de().LN,{store:t,routerState:n,maybeLogSearchInteractionEvent:o});if("preview"===i.type)return i.collectionViewId?(0,k.jsx)(ct,{previewStore:t,collectionViewId:i.collectionViewId}):null;if("module"===i.type){var l;const e=null===(l=a.modules)||void 0===l?void 0:l.find((e=>e.key===i.key));return e?(0,k.jsx)(dt,{workflow:a,workflowStore:r,previewStore:t,module:e}):(0,k.jsx)("div",{children:"Module not found"})}if("trigger"===i.type)return(0,k.jsx)(co,{triggerKey:i.key,previewStore:t,workflow:a});if("function"===i.type)return(0,k.jsx)(qe,{functionKey:i.key,workflow:a,previewStore:t},i.key);if(r&&a){if("runs"===i.type)return(0,k.jsx)(oo,{workflowStore:r,previewStore:t,navigationState:i});if("debug"===i.type)return(0,k.jsx)(s().Y1,{width:"fill",height:"fill",style:{overflowY:"auto"},children:(0,k.jsx)(ce().l$,{workflow:a,previewStore:t,workflowStore:r})})}return null}function ho(e){const{routerState:t,maybeLogSearchInteractionEvent:n}=e,{store:o}=(0,u().$O)(),g=(0,c().xA)({collectionViewBlockStore:o}),h=function(e){const{previewStore:t}=e,n=(0,i().v3)();return(0,r().K8)((()=>{const e=new(l().A)(n);return e.setContext({type:"collectionView",collectionViewBlockStore:t,collectionViewStore:t.getCollectionViewStores()[0],collectionStore:void 0,pageVisitSourceOverride:void 0}),e}),[n,t])}({previewStore:g}),p=(0,d().useWorkflowNavigationState)(),f=(0,a().IS)((e=>({container:{borderTop:`0.5px solid ${e.stroke.primary}`,minWidth:0},mainPanel:{minWidth:0}})),[]);return p.isOpen?(0,k.jsxs)(s().Y1,{direction:"horizontal",width:"fill",height:"fill",style:f.container,children:[(0,k.jsx)(le,{previewCollectionContextStore:h}),(0,k.jsx)(s().Y1,{direction:"vertical",width:"fill",height:"fill",style:f.mainPanel,children:(0,k.jsx)(go,{previewStore:g,routerState:t,maybeLogSearchInteractionEvent:n})})]}):null}},178846:(e,t,n)=>{n.d(t,{xA:()=>y});var o=n(296540),i=()=>n(221844),r=()=>n(484714),a=()=>n(847249),s=()=>n(179034),l=()=>n(743246),d=()=>n(896628),c=()=>n(246826),u=()=>n(751156),g=()=>n(594794),h=()=>n(589994),p=()=>n(847),f=()=>n(363186),m=()=>n(671446);const v="workflowDataCache",x="userEditsCache";function y(e){const{collectionViewBlockStore:t}=e,n=(0,r().v3)(),{threadStore:y,workflowStore:w}=(0,f().$O)(),S=(0,m().J)(),b=(0,a().K8)((()=>{var e;if(!w)return;const t=null===(e=w.getData())||void 0===e?void 0:e.versionPointer,n=null==S?void 0:S.versionPointer;return(null==t?void 0:t.id)===(null==n?void 0:n.id)}),[w,S]),j=(0,a().K8)((()=>t.getSpaceId()),[t]),[k,C]=(0,o.useState)([]),A=(0,o.useCallback)((e=>{C((t=>[...t,e.operation]))}),[]),I=(0,o.useMemo)((()=>{const e=new(i().A)({isTemporaryData:!0,name:v});return e.addCacheFallback(n.defaultRecordCache.inMemoryRecordCache),e}),[n.defaultRecordCache.inMemoryRecordCache]),M=(0,o.useMemo)((()=>{const e=new(i().A)({isTemporaryData:!0,name:x});return e.addCacheFallback(I),e.onOperationCallback=A,e}),[A,I]),R=(0,o.useMemo)((()=>t.clone(I)),[t,I]),T=(0,o.useMemo)((()=>R.clone(M)),[R,M]);return(0,o.useEffect)((()=>{0!==k.length&&w&&w.getData()&&(h().transactionQueue.drain().then((()=>{p().addUnsavedOperations({environment:n,threadStore:y,workflowStore:w,collectionViewBlockStore:t,operations:k})})),C((e=>e.slice(k.length))))}),[n,w,y,k,t]),(0,o.useEffect)((()=>{I.clearCache(),M.clearCache(),C([]),S&&!b&&u().createAndCommit({userAction:"workflowData",environment:n,perform:e=>{const t=c().vt({environment:n,table:l().C0,args:{id:(0,g().Z1)({environment:n,table:l().C0,spaceId:j}),data:S,parentPointer:{table:s().ev,id:R.id},space_id:j},inMemoryRecordCache:I,transaction:e});d().zA({stores:[R],update:{workflow_id:t.id},transaction:e}),p().updateDatabasesAndViews({environment:n,store:R,workflowStore:t,previousWorkflow:void 0,newWorkflow:S,transaction:e,performPushToDatabases:!0})},canUndo:!1})}),[n,j,M,S,I,R,b]),T}},240562:(e,t,n)=>{n.d(t,{p:()=>r});var o=()=>n(645873);const i=new(o().O2)("HelpButtonContent",(async()=>await n.e(42481).then(n.bind(n,101107)))),r=(0,o()._h)(i,(e=>e.HelpButtonContent))},253447:(e,t,n)=>{n.d(t,{F:()=>i});var o=()=>n(963575);function i(e,t){if(e)return e;switch(t){case"large":return o().A.card.desktop.large.height;case"small":return o().A.card.desktop.small.height;default:return o().A.card.desktop.medium.height}}},271084:(e,t,n)=>{n.d(t,{k:()=>i});n(581454);class o extends(()=>n(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[n,o]=e,[i,r]=t;return r-o})).map((e=>{let[t,n]=e;return t}))}}const i=new o;(0,n(604341).exposeDebugValue)("UserSimilarityStore",i)},271232:(e,t,n)=>{n.d(t,{t:()=>r});var o=n(296540),i=n(474848);const r=o.memo((function(e){const{coverHeight:t,coverSizeFormat:o,emptyGalleryCoverStyle:r}=e,a=(0,n(401497).IS)((()=>({container:{height:(0,n(253447).F)(t,o),...r}})),[t,o,r]);return(0,i.jsx)("div",{style:a.container})}))},279900:(e,t,n)=>{function o(e){let t,n,o;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(o=r,n||(n=t.then((()=>(n=void 0,t=e(...o),t))),n)):(t=e(...r),t)}}n.d(t,{A:()=>o})},299177:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const i=new o;n(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",i);const r=i},299797:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=()=>n(284371),i=n(474848);const r=function(e){let{icon:t,title:r,description:a,cta:s,bodyWidth:l}=e;const d=(0,n(401497).IS)((e=>({container:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},icon:{width:36,height:36,color:e.icon.tertiary},body:{fontSize:14,color:e.text.secondary,display:"flex",flexDirection:"column",textAlign:"center",maxWidth:l??300},title:{fontWeight:o().Wy.semibold},description:{paddingTop:1,fontWeight:o().Wy.regular,textWrap:"balance"}})),[l]);return(0,i.jsxs)("div",{style:d.container,children:[t(d.icon),(0,i.jsxs)("div",{style:d.body,children:[(0,i.jsx)("span",{style:d.title,children:r}),(0,i.jsx)("span",{style:d.description,children:a})]}),s&&(0,i.jsx)("div",{children:s})]})}},303742:(e,t,n)=>{n.d(t,{o:()=>r});var o=()=>n(640653),i=()=>n(508496);function r(e){return!!e&&Boolean((0,o().IL)(e)&&"external_pages_sidebar"===i().default.getEligibleGroup({experimentId:"sharing_collaboration_sidebar_guest_aggregation"}))}},311004:(e,t,n)=>{e.exports=n.p+"edfba4a6d1ff7acd.png"},344417:(e,t,n)=>{n.d(t,{u:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M7.1 1.975a5.125 5.125 0 1 0 3.155 9.164l3.107 3.107a.625.625 0 1 0 .884-.884l-3.107-3.107A5.125 5.125 0 0 0 7.1 1.975M3.225 7.1a3.875 3.875 0 1 1 7.75 0 3.875 3.875 0 0 1-7.75 0"})},i=(0,n(340498).wt)("magnifyingGlassSmall",o)},352759:(e,t,n)=>{n.d(t,{p:()=>x,t:()=>y});n(581454),n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(584262),a=()=>n(959013),s=()=>n(857783),l=()=>n(255018),d=()=>n(939740),c=()=>n(958378),u=()=>n(89924),g=()=>n(900967),h=()=>n(728611),p=()=>n(211716),f=()=>n(592968),m=()=>n(551619),v=n(474848);function x(e){let{store:t}=e;return(0,v.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:m().NV,onClick:m().sx,children:(0,v.jsx)(l().A,{type:"page",store:t,headerText:(0,v.jsx)(a().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function y(e){let{store:t}=e;const n=(0,o().v3)(),a=(0,i().K8)((()=>(0,g().c)(t,n)),[t,n]),l=(0,i().K8)((()=>a.backlinks.map((e=>e.backlinkStore))),[a]).map(((e,t)=>({key:e.id,render:t=>(0,v.jsx)(c().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:o}=t;f().F.setState({isOpen:!1});const i=h().Vr(o);s().uK({environment:n,store:e,openInNew:i,visitType:p().ig.Link,pageVisitSource:r().y8.Backlinks})}})));return(0,v.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:l,render:e=>(0,v.jsx)(u().A,{...e})}]})}},358006:(e,t,n)=>{n.d(t,{z:()=>a});n(296540);var o=()=>n(645873),i=n(474848);const r=new(o().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await n.e(79883).then(n.bind(n,873718));return{CollectionItemCover:e}})),a=(0,o()._h)(r,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:o,coverSizeFormat:r,emptyGalleryCoverStyle:a,showEmptyGalleryCover:s}=t;return s?(0,i.jsx)(n(271232).t,{coverHeight:o,coverSizeFormat:r,emptyGalleryCoverStyle:a}):null}})},412237:(e,t,n)=>{n.r(t),n.d(t,{aiFaceSmallIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 16 16",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.204 1.93a3.47 3.47 0 0 0-4.097.39.625.625 0 1 0 .834.931 2.22 2.22 0 0 1 3.16.202.625.625 0 0 0 .944-.818 3.5 3.5 0 0 0-.84-.705m6.018.976A3.47 3.47 0 0 0 8.463 4.1l-5.077 8.476a.625.625 0 0 0 .437.938l4.41.715a.625.625 0 0 0 .2-1.234l-3.5-.568 4.602-7.685a2.22 2.22 0 0 1 3.822.02.625.625 0 1 0 1.08-.63 3.46 3.46 0 0 0-1.214-1.226m-7.83 2.105a1.094 1.094 0 1 0-.35 2.159 1.094 1.094 0 0 0 .35-2.159"}),(0,o.jsx)("path",{d:"M10.762 5.881a1.093 1.093 0 1 0-.35 2.159 1.093 1.093 0 0 0 .35-2.159"})]})},r=(0,n(340498).wt)("aiFaceSmall",i)},413267:(e,t,n)=>{n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},430923:(e,t,n)=>{n.d(t,{DV:()=>s,l7:()=>a,y7:()=>r});var o=()=>n(645873);const i={CollectionNewViewsPopupComponent:new(o().O2)("CollectionNewViewsPopupComponent",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(7605),n.e(62620)]).then(n.bind(n,93709)))),CollectionLinkExistingModal:new(o().O2)("CollectionLinkExistingModal",(async()=>await Promise.all([n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(53321),n.e(90825),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(71993),n.e(52393),n.e(26090),n.e(12341),n.e(66984),n.e(90978),n.e(64598),n.e(5287)]).then(n.bind(n,901226)))),ModalOverlayCollectionView:new(o().O2)("ModalOverlayCollectionView",(async()=>await Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(74070),n.e(32413)]).then(n.bind(n,700868))))},r=(0,o()._h)(i.CollectionNewViewsPopupComponent,(e=>e.CollectionNewViewsPopupComponent)),a=(0,o()._h)(i.CollectionLinkExistingModal,(e=>e.CollectionLinkExistingModal)),s=(0,o()._h)(i.ModalOverlayCollectionView,(e=>e.ModalOverlayCollectionView))},454531:(e,t,n)=>{n.d(t,{W:()=>h});var o=()=>n(972435),i=()=>n(867772),r=()=>n(681810),a=()=>n(901389),s=()=>n(896628),l=()=>n(383594),d=()=>n(751156),c=()=>n(892632);const u=1500,g=(0,n(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function h(e){let{environment:t,intl:n,store:o,rect:i}=e;l().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:n.formatMessage(g.pageCover),onDelete:()=>{!function(e){let{environment:t,store:n}=e;l().I(),d().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{s().PT({store:n,transaction:e})}})}({environment:t,store:o})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:{originUrl:n},position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:n.formatMessage(g.fileTypeCaption,{idealImageWidth:u}),onUpload:e=>{var i;l().I(),c().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=o.getCoverStore())||void 0===i?void 0:i.pointer)??o.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:m,onProgress:v,onComplete:e=>{var n;n={environment:t,store:o,url:{originUrl:e}},p({...n,position:.5})},onError:()=>{a().f1(n.formatMessage(g.uploadFailed))}})}},{type:"embed",title:n.formatMessage(g.embedTitle),inputPlaceholder:n.formatMessage(g.embedPlaceholder),caption:n.formatMessage(g.embedCaption),buttonText:n.formatMessage(g.embedSubmit),onChange:e=>{var n;n={environment:t,store:o,url:e},p({...n,position:.5}),l().I()}},{type:"unsplash",onChange:e=>{let{url:n,position:i}=e;f({environment:t,store:o,url:{originUrl:n},position:i})}}]})}async function p(e){const{environment:t,store:n,url:a,position:l}=e,{serverCommitResult:c}=d().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{s().fg({store:n,url:a,position:l||.5,transaction:e})}});await c,r().A.state.loadingMode===i().vS&&r().A.setState({loadingMode:i().Gi,dataURL:r().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:o().A.formatMessage(g.downloading)})}function f(e){p(e),e.environment.device.isMobile&&l().I()}function m(e){const{file:t,name:n,size:a}=e;if(l().I(),r().A.setState({loadingMode:i().Wc,file:t,name:n,size:a}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:o().A.formatMessage(g.preparing)});else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,progressText:o().A.formatMessage(g.preparing)})}function v(e){const{progressPercent:t,progressText:n}=e;r().A.state.loadingMode===i().vS&&r().A.setState({...r().A.state,uploadProgress:t,progressText:n})}},490044:(e,t,n)=>{n.d(t,{A:()=>g});n(296540);var o=()=>n(484714),i=()=>n(847249),r=()=>n(401497),a=()=>n(500066),s=()=>n(159588),l=()=>n(963589),d=()=>n(644914),c=n(474848);function u(){const e=(0,r().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,a().G)(e.icon)})}function g(e){var t;const n=(0,o().v3)(),a=n.device.isMobile,{isTablet:g}=(0,o().Y0)(),h=(0,l().X)("tablet_refresh_gate"),p=(0,i().K8)((()=>{var t,o;if(a)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(o=e.style)||void 0===o?void 0:o.paddingLeft:10)}),[n.WindowSizeStore,a,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),f=(0,r().IS)((t=>({wrapper:{...a?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:g&&h?4:8,paddingBottom:g&&h?4:8,paddingLeft:p,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:d().Zr,paddingTop:4,paddingBottom:4,...(0,s().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:a?28:22,height:a?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:a?24:d().ry,height:a?24:d().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!a?"clip":"ellipsis",...e.childrenStyle}})),[a,g,h,p,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:f.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:f.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:f.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(u,{})]}),(0,c.jsx)("div",{style:f.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:f.right,children:e.right})]})}},525884:(e,t,n)=>{n.d(t,{A:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.65 8.25a.625.625 0 1 0 0 1.25h.725v3.25H8.65a.625.625 0 1 0 0 1.25h2.7a.625.625 0 1 0 0-1.25h-.725V8.875A.625.625 0 0 0 10 8.25zM10.7 6.3a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("infoCircle",i)},541235:(e,t,n)=>{n.d(t,{YD:()=>r,c$:()=>o,q_:()=>i});const o={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},i="completed",r="dismissed"},544862:(e,t,n)=>{n.d(t,{A:()=>k});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(959013),s=()=>n(896628),l=()=>n(454531),d=()=>n(751156),c=()=>n(600871),u=()=>n(478726),g=()=>n(227440),h=()=>n(867772),p=()=>n(681810),f=()=>n(608581),m=()=>n(145214),v=()=>n(704152),x=()=>n(807683),y=()=>n(401497),w=()=>n(534177),S=n(474848);function b(e){let{src:t,placeholderSrc:n,placeholderBehavior:i,imageStyle:r,containerStyle:a,onLoadComplete:s,testId:l}=e;const[d,c]=(0,o.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!n&&(d||void 0===t);break;default:(0,w().HB)(i)}const g=(0,y().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,o.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const h=(0,o.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,S.jsxs)("div",{style:g.container,children:[(0,S.jsx)(x().Ay,{src:t,onLoad:h,style:r,placeholderStyle:g.srcWrapper,placeholderLoadedStyle:g.srcWrapper,testId:l}),n&&(0,S.jsx)(x().Ay,{src:n,style:r,placeholderStyle:g.placeholderWrapper,placeholderLoadedStyle:g.placeholderWrapper})]})}var j=()=>n(24611);const k=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:u,proxyWidth:g}=e;const f=(0,i().v3)(),m=(0,r().uB)(void 0,n(454305).A),v=(0,r().K8)((()=>a||"suggest"===n(77246).Uv.getMode(t)),[a,t]),y=(0,r().K8)((()=>t.getCover()),[t]),w=(0,r().O$)(p().A),[j,k]=(0,o.useState)(void 0);if(!y)return null;const I=w.loadingMode!==h().pF&&w.loadingMode!==h().Wc;return(0,S.jsx)(n(801678).A,{mouseStore:m,onFlushTemporaryPosition:e=>function(e,t,n){const{imagePosition:o,reset:i}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:n,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:o,transaction:e}),i()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:r,isRepositioning:a}=e;return(0,S.jsx)(A,{handleRepositionClick:n,handleSavePositionClick:o,handleCancelClick:i,isVisible:r,isRepositioning:a,lastProxiedUrl:j,store:t,disabled:v,paddingRight:l,paddingLeft:c,mouseStore:m})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,S.jsxs)(o.Fragment,{children:[(0,S.jsx)(n(360083).A,{url:y.cover,isAuthenticated:!0,permissionRecord:y.pointer,width:g,onFinishedLoadingProxyUrl:k,render:(t,n)=>{const o={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:I?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,S.jsx)(b,{src:n,placeholderSrc:I?w.dataURL:void 0,placeholderBehavior:I?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:o,onLoadComplete:C,testId:"pageCover"})}}),I&&(0,S.jsxs)("div",{style:x().fd,children:[(0,S.jsx)(n(331542).A,{size:"md",style:{marginRight:4}}),(0,S.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==w.uploadProgress?(0,S.jsx)(n(773382).A,{percentage:w.uploadProgress}):w.progressText?(0,S.jsx)("span",{children:w.progressText}):null})]})]})})};function C(){p().A.reset()}function A(e){let{isVisible:t,isRepositioning:n,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:x,lastProxiedUrl:y,store:w,disabled:b,paddingRight:k,paddingLeft:C,mouseStore:A}=e;const I=(0,i().v3)(),M=(0,a().tz)(),R=(0,o.useCallback)((e=>function(e,t,n,o,i){i.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:n,store:o,rect:r})}(e,I,M,w,A)),[I,M,w,A]),T=(0,r().K8)((()=>p().A.state.loadingMode),[]),L=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":u().x6,t}(w)),[w]),{device:P}=I,B=(0,r().K8)((()=>!n&&!(0,c().LX)({device:P})),[n,P]),_=(0,r().O$)(g().e);if(b||T!==h().pF||!_)return null;const{isMobile:D}=P;return(0,S.jsx)(m().A,{animate:{width:L,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,S.jsxs)(f().A,{isVisible:t,position:"bottom",style:{marginRight:k,marginLeft:C},children:[B&&(0,S.jsx)(v().A,{style:{borderRight:D?"none":void 0,...j().k},onClick:R,children:(0,S.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!n&&!D&&(0,S.jsx)(v().A,{style:{...j().k,borderRight:"none"},onClick:e=>d(e,y),children:(0,S.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),n&&!D&&(0,S.jsx)(v().A,{style:j().k,onClick:x,children:(0,S.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),n&&!D&&(0,S.jsx)(v().A,{style:{...j().k,borderRight:"none"},onClick:s,children:(0,S.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551345:(e,t,n)=>{n.d(t,{VN:()=>l,or:()=>a,pV:()=>s});var o=()=>n(120114),i=()=>n(430483),r=()=>n(508496);function a(e){const{configurationState:t}=e;return t.deepFindRequested&&i().zD.isDeepFindEnabled()}function s(e){const{configurationState:t,assistantSurface:n}=e;return a({configurationState:t})&&n.isType("fullPage")}function l(){const e=i().zD.state;return(0,o().AX)(e,(e=>r().default.getConfigKey("deep_find_config",e)),(e=>r().default.checkGate({gateName:e})))}new(n(496506).default)((()=>{var e;const t=i().zD.isDeepFindEnabled(),o=Boolean(null===(e=n(295169).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&o}),{debugName:"isDeepFindActiveStore"})},555267:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(296540),i=()=>n(401497),r=()=>n(62856),a=()=>n(331542),s=n(474848);function l(e){let{loadingMessage:t}=e;const n=(0,i().DP)(),l=(0,r().A)(!0,400);return(0,s.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},children:l&&(0,s.jsxs)(o.Fragment,{children:[(0,s.jsx)(a().A,{}),t&&(0,s.jsx)("div",{style:{marginLeft:8,color:n.text.secondary},children:t})]})})}},562866:(e,t,n)=>{n.d(t,{$c:()=>s,aI:()=>a,cx:()=>r,uf:()=>i});var o=()=>n(645873);const i={RequestMembersModal:new(o().O2)("RequestMembersModal",(()=>Promise.all([n.e(75134),n.e(43380),n.e(96346),n.e(55373),n.e(36192),n.e(44711),n.e(62475),n.e(3151),n.e(16471),n.e(53321),n.e(58550),n.e(98629),n.e(90825),n.e(37353),n.e(29151),n.e(31895),n.e(83647),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(85515),n.e(74562),n.e(38744),n.e(63077),n.e(28271),n.e(17254),n.e(41870),n.e(90966),n.e(42120),n.e(7114),n.e(67435),n.e(92012),n.e(22462),n.e(8184),n.e(4422),n.e(28721),n.e(28866),n.e(21194),n.e(6463),n.e(71993),n.e(1213),n.e(17989),n.e(90625),n.e(59794),n.e(78846),n.e(26483),n.e(43741),n.e(81768),n.e(94387),n.e(82850),n.e(52393),n.e(77692),n.e(75601),n.e(11341),n.e(7060),n.e(82136),n.e(12739),n.e(26090),n.e(73594),n.e(93282),n.e(12341),n.e(50984),n.e(66984),n.e(40828),n.e(26199),n.e(18057),n.e(90978),n.e(56264),n.e(5023),n.e(55927),n.e(61151),n.e(72226),n.e(48199),n.e(64598),n.e(38119),n.e(77282)]).then(n.bind(n,123350)))),GoogleImportsInviteWithModal:new(o().O2)("GoogleImportsInviteWithModal",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(38744),n.e(51195),n.e(51226)]).then(n.bind(n,720193)))),InviteDropdownMenuItemLabel:new(o().O2)("InviteDropdownMenuItemLabel",(()=>n.e(25171).then(n.bind(n,726799)))),personPropertyInviteActions:new(o().O2)("personPropertyInviteActions",(()=>Promise.all([n.e(96346),n.e(85864),n.e(92845),n.e(71718),n.e(83324),n.e(48486),n.e(95794),n.e(38744),n.e(57613)]).then(n.bind(n,980270))))},r=(0,o()._h)(i.RequestMembersModal,(e=>e.RequestMembersModal)),a=(0,o()._h)(i.GoogleImportsInviteWithModal,(e=>e.GoogleImportsInviteWithModal)),s=(0,o()._h)(i.InviteDropdownMenuItemLabel,(e=>e.InviteDropdownMenuItemLabel))},566468:(e,t,n)=>{n.d(t,{Ji:()=>k,bd:()=>M,f0:()=>A,mf:()=>I,s7:()=>C});n(944114),n(296540);var o=()=>n(847249),i=()=>n(401497),r=()=>n(30626),a=()=>n(959013),s=()=>n(496603),l=()=>n(534177),d=()=>n(722872),c=()=>n(962730),u=()=>n(463830),g=()=>n(760217),h=()=>n(406699),p=()=>n(285790),f=()=>n(710149),m=()=>n(928600),v=()=>n(939740),x=()=>n(897119),y=()=>n(89924),w=()=>n(859428),S=()=>n(125565),b=n(474848);const j=20,k=12;function C(e){let{title:t,byline:n,icon:o,iconSize:i,iconMargin:r,useThinTitle:a,useSecondaryColorTitle:s,containerStyles:l,summaryStyles:d,rightContent:c,badge:u}=e;const g=A({icon:o,iconSize:i,iconMargin:r,useThinTitle:a,containerStyles:l,summaryStyles:d});return(0,b.jsxs)("div",{style:g.container,children:[o?(0,b.jsx)("div",{style:g.iconContainer,children:o}):null,(0,b.jsxs)("div",{style:g.summaryContainer,children:[(0,b.jsxs)("div",{style:g.nameContainer,children:[(0,b.jsx)(S().A,{style:g.name,isSecondaryColor:s,showTooltipWhenTruncated:!0,children:t}),u?(0,b.jsx)("div",{style:g.badge,children:u}):null]}),n?(0,b.jsx)(S().A,{style:g.byline,children:n}):null]}),c]})}function A(e){const{icon:t,iconSize:n,iconMargin:o,useThinTitle:r,containerStyles:a,summaryStyles:s}=e,l=o??k,d=t?n??j:0;return(0,i().IS)((e=>({container:{position:"relative",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",...a},summaryContainer:{width:`calc(100% - ${d}px)`,...s},iconContainer:{height:d,width:d,flexGrow:0,flexShrink:0,flexBasis:d,marginRight:l,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:6},badge:{marginRight:8},nameContainer:{display:"flex",alignItems:"center",gap:6},name:{fontSize:14,fontWeight:r?400:500},byline:{fontSize:12,lineHeight:1.3,opacity:.5}})),[d,l,r,a,s])}function I(e){let{titleStyles:t,includeByline:n,bylineStyles:o,includeIcon:r,iconStyles:a,containerStyles:s}=e;const l=(0,i().IS)((()=>({container:{height:53,display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",padding:"8px 0",width:"100%",gap:8,...s},icon:{borderRadius:4,height:24,width:24,marginLeft:-2,...a},textContainer:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",width:"calc(100% - 32px)",gap:4},title:{borderRadius:4,height:14,width:"80%",...t},byline:{borderRadius:4,height:12,width:"60%",...o}})),[s,t,o,a]);return(0,b.jsxs)("div",{style:l.container,children:[r?(0,b.jsx)(f().A,{style:l.icon}):null,(0,b.jsxs)("div",{style:l.textContainer,children:[(0,b.jsx)(f().A,{style:l.title}),n?(0,b.jsx)(f().A,{style:l.byline}):null]})]})}function M(e){const t=(0,a().tz)(),n=(0,o().uB)(void 0,u().A),f=(0,i().IS)((()=>({popupMenu:{width:312}})),[]);let S=[];const j=[];for(const o of e.items)if("divider"===o.type){const t=j.length>0,n={key:`actions-${j.length}`,render:n=>(0,b.jsx)(y().A,{title:e.title,topBorder:t,...n}),items:S};j.push(n),S=[]}else if("action"===o.type){const e={key:o.key,render:e=>(0,b.jsx)(w().A,{textWrap:!0,render:t=>(0,b.jsx)(g().A,{...e,...t,isRedOnHover:o.isDestructive,shouldWrapCaption:!0,icon:o.icon,title:o.title,caption:o.caption,disabled:o.disabled,disabledFeedback:o.disabled}),renderTooltip:()=>o.tooltipTitle,disableTooltip:o.tooltipDisabled??!0,placement:c().W.Right}),action:()=>{o.action(),n.setState({...n.state,open:!1})}};S.push(e)}else(0,l().HB)(o);const k={key:`actions-${j.length}`,render:t=>(0,b.jsx)(y().A,{title:e.title,topBorder:j.length>0,...t}),items:S};return j.push(k),(0,b.jsx)(h().Ay,{stopClickPropagation:!0,popupType:x().nl.Popup,alignmentToOrigin:c().C.Start,placementToOrigin:c().W.Bottom,style:f.popupMenu,render:()=>(0,b.jsx)(m().A,{menuType:d().gu.Popup,width:312,children:(0,b.jsx)(v().Ay,{type:v().Oh.Vertical,initialFocus:void 0,sections:j})}),onClose:s().lQ,buttonPopupStore:n,renderOrigin:e=>(0,b.jsx)(p().A,{ariaLabel:t.formatMessage({id:"iconCellActionMenu.iconButton.ariaLabel",defaultMessage:"More actions"}),icon:r()._,...e})})}},567121:(e,t,n)=>{n.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>o});const o=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},578194:(e,t,n)=>{n.d(t,{r:()=>o});const o=(0,n(583835).Dv)("importEvernote")},592968:(e,t,n)=>{n.d(t,{F:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{isOpen:!1}}}const i=new o},608581:(e,t,n)=>{n.d(t,{A:()=>c});n(898992),n(354520),n(581454),n(941795);var o=n(296540),i=()=>n(401497),r=()=>n(955825),a=()=>n(284371),s=()=>n(963575),l=n(474848);function d(e){const{button:t,isLast:n}=e,s=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return o.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,n&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,n&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:g}=e;const h=(0,n(484714).v3)(),p=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:h.device.isMobile?"auto":"none",opacity:h.device.isMobile?1:0,fontFamily:a().vc(n(662303).locale).sans,position:"absolute",right:s().A.horizontal.small,bottom:s().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().A.vertical.small,bottom:void 0}})),[h]),f=o.Children.toArray(t).filter(n(534177).O9),m=f.length;return(0,l.jsx)(n(145214).A,{animate:{opacity:c?1:0},...(0,r().AH)(p.container,g,c&&p.containerHover,"top"===u&&p.containerTop),children:f.map(((e,t)=>{const i=t===m-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===n(859428).A&&o.isValidElement(e))return o.cloneElement(e,{render:(t,n)=>{const o=e.props.render(t,n);return(0,l.jsx)(d,{isLast:i,button:o},e.key)}});if(e.type===n(704152).A&&o.isValidElement(e))return(0,l.jsx)(d,{isLast:i,button:e},e.key)}}))})}},641300:(e,t,n)=>{n.d(t,{Gr:()=>A,WE:()=>R,rC:()=>M});n(898992),n(581454),n(908872);var o=n(296540),i=()=>n(401497),r=()=>n(158359),a=()=>n(126158),s=()=>n(380048),l=()=>n(742117),d=()=>n(525884),c=()=>n(959013),u=()=>n(534177),g=()=>n(284371),h=()=>n(753199),p=()=>n(553965),f=()=>n(115512),m=()=>n(962730),v=()=>n(704152),x=()=>n(493823),y=()=>n(625830),w=()=>n(958846),S=()=>n(554509),b=()=>n(859428),j=n(474848);const k=14,C=16,A=k+C,I=24;function M(e){let{columnRenderInfo:t,theme:n,containerMarginTop:o}=e;return{container:{marginTop:o??17,tableLayout:"fixed",borderCollapse:"collapse",width:"100%",minWidth:t.reduce(((e,t)=>e+D(t.widthData)+I),0)},tableHeaderRow:{},paddingRowCell:{height:8}}}function R(e){let{columnRenderInfo:t,sortState:n,onSortStateChanged:r,showRowBorders:a,hideHeaderRow:s,hideHeaderRowPadding:l,renderRowChild:d,rows:c,onRowClick:u,renderNoRowsComponent:g,styles:h,getStyleForRow:p,extendToFullScreen:f,multiselect:m,allowHorizontalScroll:v,setStickyHeaderColumn:x,maxHeight:y,setStickyHeaderRow:S,loadMoreMethod:b}=e;const k=v?x??!0:void 0,C=(0,i().IS)((e=>({horizontalScrollContainer:{position:"relative",width:null!=f&&f.extendTableToFullWidthOffsetPx?`calc(100% + ${null==f?void 0:f.extendTableToFullWidthOffsetPx}px)`:"100%",display:"grid",overflow:"auto"},scrollableContainer:{maxHeight:y,position:"relative",display:"grid",overflowX:"auto",width:"100%"},table:k?{...h.container,minWidth:"100%",width:void 0}:h.container})),[h.container,k,y,null==f?void 0:f.extendTableToFullWidthOffsetPx]),A=(0,i().IS)((e=>({thead:{position:"sticky",zIndex:1}})),[]),I=(0,o.useCallback)((e=>{var t;const o=e.id===(null==n||null===(t=n.column)||void 0===t?void 0:t.id)&&!(null!=n&&n.sortAscending);r&&r({sortAscending:o,column:e})}),[n,r]),M=(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("table",{style:C.table,children:[!s&&(0,j.jsx)("thead",{style:S?A.thead:void 0,children:(0,j.jsxs)("tr",{children:[t.map(((e,t)=>(0,j.jsx)(T,{index:t,column:e,sortState:n,handleSortableColumnClick:I,shouldShowSortIcon:0!==c.length,multiselect:m,setStickyHeaderColumn:k,setStickyHeaderRow:S,style:e.headerStyle},`header_${e.id}`))),null!=f&&f.rightPaddingPx?(0,j.jsx)(z,{width:null==f?void 0:f.rightPaddingPx,style:t[t.length-1].rowStyle}):null]})}),!l&&(0,j.jsx)("tbody",{children:(0,j.jsxs)("tr",{children:[t.map((e=>(0,j.jsx)("td",{style:h.paddingRowCell},`padding_row_${e.id}`))),null!=f&&f.rightPaddingPx?(0,j.jsx)("td",{style:h.paddingRowCell}):null]})}),(0,j.jsx)("tbody",{children:c.map((e=>(0,j.jsx)(L,{columns:t,onRowClick:u,rowChild:null==d?void 0:d(e),showRowBorders:a,row:e,getStyleForRow:p,multiselect:m,setStickyHeaderColumn:k,rightPaddingPx:null==f?void 0:f.rightPaddingPx},`${e.id}_row`)))}),c.length>0&&b&&(!v||"scroll"!==(null==b?void 0:b.type))?(0,j.jsx)("tfoot",{children:(0,j.jsx)(E,{columnLength:t.length,loadMoreMethod:b,showRowBorders:a,rightPaddingPx:null==f?void 0:f.rightPaddingPx,style:t[t.length-1].rowStyle})}):null]}),0===c.length&&g()]});return v?(0,j.jsxs)("div",{style:C.horizontalScrollContainer,children:[(0,j.jsxs)("div",{style:C.scrollableContainer,children:[M,y&&"scroll"===(null==b?void 0:b.type)&&(0,j.jsx)(w().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:b.onLoadMore})]}),!y&&"scroll"===(null==b?void 0:b.type)&&(0,j.jsx)(w().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:b.onLoadMore})]}):(0,j.jsx)("div",{style:{maxHeight:y,overflowY:S&&y?"auto":void 0,overflowX:S&&y?"hidden":void 0},children:M})}function T(e){let{column:t,index:n,sortState:r,handleSortableColumnClick:s,shouldShowSortIcon:l,multiselect:u,setStickyHeaderColumn:h,setStickyHeaderRow:f,style:v}=e;const[w,S]=(0,o.useState)(!1),A=0===n,I=t.id===(null==r?void 0:r.column.id),M=(0,i().IS)((e=>({th:{boxShadow:`\n\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t`,...f&&{position:"sticky",top:0,zIndex:3,background:e.modalBackground},...F(t),...h&&A&&{position:"sticky",zIndex:4,left:0,background:e.modalBackground,boxShadow:`\n\t\t\t\t\t\t\tinset -1px 0px 0px ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 1px 0 ${e.tableDividerColor},\n\t\t\t\t\t\t\tinset 0 -1px 0 ${e.tableDividerColor}\n\t\t\t\t\t\t`},height:32,...v},innerDiv:{display:"flex",alignItems:"center",height:"100%",minWidth:D(t.widthData),maxWidth:t.widthData.maxWidth},text:{fontSize:g().J.UISmall.desktop,fontWeight:g().Wy.regular,color:e.text.secondary,...g().RC},sortButton:{padding:5,margin:-5},sortIcon:{color:e.text.secondary,width:12,height:12,marginLeft:4,fill:"currentColor"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:C,opacity:null!=u&&u.header.isDisabled?.5:1},tooltipContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},tooltipIcon:{marginLeft:4,color:w?e.mediumIconColor:e.lightIconColor,height:16,width:16},tooltip:{width:380}})),[t,u,h,f,v,A,w]),R=()=>{if(r&&l&&I)return(0,a().m)({...M.sortIcon,...r.sortAscending&&{transform:"rotate(180deg)"}})},T={onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1)},L=t.headerInfoTooltip?(0,j.jsxs)("div",{style:M.tooltipContainer,children:[(0,j.jsx)("div",{style:M.text,children:t.headerTitle}),(0,j.jsx)(b().A,{textWrap:!0,style:M.tooltip,delayThreshold:0,render:e=>(0,j.jsx)("div",{...(0,p().A)(e,T),children:(0,d().A)(M.tooltipIcon)}),renderTooltip:()=>t.headerInfoTooltip})]}):(0,j.jsx)("div",{style:M.text,children:t.headerTitle}),P=t.sortable?(0,j.jsx)(b().A,{placement:m().W.Bottom,disableTooltip:!t.shouldShowSortTooltip,renderTooltip:()=>I?(0,j.jsx)(c().sA,{id:"baseTable.hoverSortedHeaderCell",defaultMessage:"Reverse sort order"}):(0,j.jsx)(c().sA,{id:"baseTable.hoverSortableHeaderCell",defaultMessage:"Sort by this column"}),render:e=>(0,j.jsxs)(x().p,{size:"xs",style:M.sortButton,onClick:()=>s(t),...e,children:[L,R()]})}):L,B=void 0!==u&&0===n?(0,j.jsx)(y().A,{style:M.multiselectCheckbox,disabled:u.header.isDisabled,onClick:()=>u.header.onClick(),checked:u.header.isSelected,size:k,tapArea:{size:30}}):null;return(0,j.jsx)("th",{style:M.th,children:(0,j.jsxs)("div",{style:M.innerDiv,children:[B,P]})})}function L(e){let{row:t,columns:n,onRowClick:r,rowChild:a,showRowBorders:s,getStyleForRow:l,setStickyHeaderColumn:d,multiselect:c,rightPaddingPx:u}=e;const[g,h]=(0,o.useState)(!1),p=t.isClickable,f=(0,o.useCallback)((()=>h(!0)),[]),m=(0,o.useCallback)((()=>h(!1)),[]),v=(0,o.useCallback)((e=>{p&&void 0!==r&&B(e,(()=>r(t)))}),[p,r,t]),x=(0,i().IS)((e=>({row:{height:1,...p&&{cursor:"pointer"},...s&&{borderBottom:`1px solid ${e.tableDividerColor}`},...l&&l(t)}})),[p,s,l,t]);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("tr",{onMouseLeave:m,onMouseEnter:f,style:x.row,onClick:v,children:[n.map(((e,o)=>(0,j.jsx)(P,{isRowHovered:g,isRowClickable:p,columnIndex:o,numColumns:n.length,data:t,column:e,multiselect:c,setStickyHeaderColumn:d,cellStyle:e.rowStyle},`cell_${t.id}_${e.id}`))),u?(0,j.jsx)(H,{style:n[n.length-1].rowStyle}):null]}),a&&(0,j.jsx)("tr",{style:x.row,children:(0,j.jsx)("td",{colSpan:n.length,children:a})})]})}function P(e){let{data:t,column:n,columnIndex:o,numColumns:r,isRowHovered:a,isRowClickable:s,multiselect:l,setStickyHeaderColumn:d,cellStyle:c}=e;const u=0===o,h=o===r-1,p=(0,i().IS)((e=>({td:{...F(n),height:"inherit",...u&&{borderRadius:(0,f().Nb)({topLeft:4,bottomLeft:4})},...h&&{borderRadius:(0,f().Nb)({topRight:4,bottomRight:4})},...d&&u&&{position:"sticky",zIndex:2,left:0,background:e.modalBackground,boxShadow:`inset -1px 0px 0px ${e.tableDividerColor}`},...c,...a&&s&&{background:"light"===e.mode?"#f8f8f7":e.accentColors.gray[30]}},innerDiv:{minWidth:D(n.widthData),maxWidth:n.widthData.maxWidth,fontSize:g().J.UIRegular.desktop,color:e.text.primary,minHeight:42,maxHeight:52,display:"flex",alignItems:"center",height:"100%"},multiselectCheckbox:{color:e.selectLightGray[300],marginRight:16,opacity:null!=l&&l.row.getDisabledState(t)?.5:1}})),[n,u,h,a,s,l,t,d,c]),m=Boolean(n.hasClickableContents)||!!n.computeClickableContents&&n.computeClickableContents(t),v=l&&u?(0,j.jsx)(y().A,{style:p.multiselectCheckbox,checked:l.row.getSelectedState(t),onClick:e=>{e.stopPropagation(),l.row.onClick(t)},disabled:l.row.getDisabledState(t),size:14,tapArea:{size:30}}):null;return(0,j.jsx)("td",{style:p.td,children:(0,j.jsxs)("div",{style:p.innerDiv,onClick:m?B:void 0,children:[v,n.renderCell({...t,isRowHovered:a})]})})}function B(e,t){(0,h().SQ)({event:e,context:h().y$.BaseTableRowClick,callback:t})}const _={paddingLeft:I/2,paddingRight:I/2};function D(e){return"minWidth"in e?e.minWidth:e.width}function F(e){let t;return t="width"in e.widthData?{width:e.widthData.width}:{width:`${e.widthData.widthPercent}%`,minWidth:e.widthData.minWidth},{..._,...t}}function N(e){let{columnLength:t,onLoadMore:n,showRowBorders:o,hasNextPage:a}=e;const s=(0,i().IS)((e=>({row:{...o&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",alignItems:"center",height:30,borderRadius:o?0:6,whiteSpace:"break-spaces",fontSize:14,paddingRight:8},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.lightIconColor},text:{color:e.text.tertiary}})),[o]);return!1===a?null:(0,j.jsx)("tr",{style:s.row,children:(0,j.jsx)("td",{colSpan:t,children:(0,j.jsx)("div",{style:s.container,children:(0,j.jsx)("div",{style:s.sticky,children:(0,j.jsxs)(v().A,{style:s.button,onClick:n,children:[(0,r().P)(s.icon),(0,j.jsx)("div",{style:s.text,children:(0,j.jsx)(c().sA,{id:"baseTable.loadMoreButton",defaultMessage:"Load more"})})]})})})})})}function W(e){let{columnLength:t,onLoadNext:n,onLoadPrevious:o,currentPage:r,finalPage:a,hasNextPage:d,hasPrevPage:u,showRowBorders:g,rightPaddingPx:h,style:p}=e;const f=(0,i().IS)((e=>({row:{...g&&{borderBottom:`1px solid ${e.tableDividerColor}`}},container:{display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},sticky:{position:"sticky",left:0,display:"flex",justifyContent:"flex-start",alignItems:"center",gap:4},button:{display:"flex",justifyContent:"center",alignItems:"center",height:30,width:30,borderRadius:g?0:6,whiteSpace:"break-spaces",fontSize:14},icon:{width:14,height:14,marginLeft:4,marginRight:6,fill:e.icon.secondary}})),[g]);return(0,j.jsxs)("tr",{style:f.row,children:[(0,j.jsx)("td",{colSpan:Boolean(h)?t:t-1,children:(0,j.jsx)("div",{style:f.container,children:(0,j.jsxs)("div",{style:f.sticky,children:[(0,j.jsx)(v().A,{ariaLabel:u?"Previous page":"No previous pages",style:f.button,onClick:o,disabled:!u,disabledFeedback:!u,children:(0,s().I)(f.icon)}),(0,j.jsx)(v().A,{ariaLabel:d?"Next page":"No more pages",style:f.button,onClick:n,disabled:!d,disabledFeedback:!d,children:(0,l().V)(f.icon)}),(0,j.jsx)(S().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:a?(0,j.jsx)(c().sA,{id:"baseTable.pages.currentPageWithFinalPageCount",defaultMessage:"Page {currentPage} of {finalPage}",values:{currentPage:r,finalPage:a}}):(0,j.jsx)(c().sA,{id:"baseTable.pages.currentPage",defaultMessage:"Page {currentPage}",values:{currentPage:r}})})]})})}),h?(0,j.jsx)(H,{style:p}):null]})}function E(e){let{columnLength:t,loadMoreMethod:n,showRowBorders:o,rightPaddingPx:i,style:r}=e;switch(n.type){case"scroll":return(0,j.jsx)(w().A,{loading:!1,loadMoreOffsetThreshold:100,onLoadMore:n.onLoadMore});case"button":return(0,j.jsx)(N,{columnLength:t,onLoadMore:n.onLoadMore,showRowBorders:o,hasNextPage:n.hasNextPage});case"pages":return(0,j.jsx)(W,{columnLength:t,showRowBorders:o,onLoadNext:n.onLoadNext,onLoadPrevious:n.onLoadPrevious,currentPage:n.currentPage,finalPage:n.finalPage,hasNextPage:n.hasNextPage,hasPrevPage:n.hasPrevPage,rightPaddingPx:i,style:r});default:return(0,u().HB)(n)}}function z(e){const t=(0,i().IS)((t=>({container:{position:"relative"},extender:{width:e.width,height:1},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.width,e.style]);return(0,j.jsxs)("th",{style:t.container,children:[(0,j.jsx)("div",{style:t.extender}),(0,j.jsx)("div",{style:t.inner})]})}function H(e){const t=(0,i().IS)((t=>({container:{position:"relative"},inner:{background:t.modalBackground,position:"absolute",top:0,left:0,right:0,bottom:-1,...e.style}})),[e.style]);return(0,j.jsx)("td",{style:t.container,children:(0,j.jsx)("div",{style:t.inner})})}},665638:(e,t,n)=>{n.d(t,{$:()=>g,S:()=>h});var o=()=>n(847249),i=()=>n(401497),r=()=>n(186445),a=()=>n(838364),s=()=>n(644914),l=()=>n(155959),d=()=>n(661179),c=()=>n(508496),u=()=>n(895227);function g(e){const{environment:t,rightEdgeDistance:n,isInPeekRenderer:a}=e,l=e.width??36,c=(0,o().K8)((()=>(0,s().zo)(t,a)-(0,s().Ql)(t)),[t,a]),g=(0,o().K8)((()=>h(t,16+d().A.state)),[t]),p=(0,o().K8)((()=>n+d().A.state),[n]),f=(0,o().K8)((()=>r().$o.state?0:1),[]);return(0,i().IS)((e=>({buttonPositionStyle:{display:"flex",position:"absolute",bottom:g,right:p,opacity:f,transform:`translateX(-${c}px) translateZ(0)`,transition:`\n\t\t\t\t\topacity ${u().L}ms,\n\t\t\t\t\tcolor ${u().L}ms,\n\t\t\t\t\ttransform 200ms\n\t\t\t\t`,alignItems:"center",gap:10},roundButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",background:e.whiteButtonBackground,width:l,height:l,borderRadius:"100%",fontSize:20,boxShadow:e.shadowSM}})),[c,g,p,l,f])}function h(e,t){const n=c().default.checkGate({gateName:"tablet_refresh_gate"}),o=e.device.isMobileNative&&!n,i=(0,l().T)("supportsNativeBottomBar"),r=o&&!i;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(e.device.isTablet&&n?-12:r?a().l:0))}},681810:(e,t,n)=>{n.d(t,{A:()=>o});const o=new(n(867772).Ay)},694874:(e,t,n)=>{n.d(t,{Oh:()=>y,Qs:()=>x,Wy:()=>p,aX:()=>m,it:()=>v,tL:()=>f});n(898992),n(354520),n(430670);var o=()=>n(244641),i=()=>n(994310),r=()=>n(534177),a=()=>n(246826),s=()=>n(751156),l=()=>n(755199),d=()=>n(638146),c=()=>n(351360),u=()=>n(846955),g=()=>n(696746),h=()=>n(705059);function p(e){const{currentUserSettingsStore:t}=c().default.state;t&&s().createAndCommit({userAction:"SidebarPersonalHomeButton.markAsSeen",environment:e,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:t,transaction:e,data:{seen_personal_home:!0}})}})}function f(e){const{currentUserSettingsStore:t}=c().default.state;t&&(u().default.setState({type:"inactive"}),s().createAndCommit({userAction:"SidebarPersonalHomeButton.markHomeTooltipAsSeen",environment:e,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:t,transaction:e,data:{personal_home_delayed_tooltip_dismissed_at:o().c9.now().toMillis()}})}}))}function m(e){const{environment:t,newSeenWelcomeHomeValue:n}=e,o=c().default.state.currentSpaceViewStore;o&&s().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:t,canUndo:!0,perform:e=>{const t=o.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");a().KY({store:t,transaction:e,value:n})}})}function v(e){const{environment:t,tipType:n,completed:o}=e,{currentUserSettingsStore:i}=c().default.state;if(!i)return;const r=i.getPersonalHomeTipsSettings(),a={...r,progress_data:{...r.progress_data,[n]:{completed:o}}};s().createAndCommit({userAction:"LearnHomePanel.updateProgress",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:i,transaction:e,data:{personal_home_tips_settings:a}})}})}function x(e){const{environment:t,hide:n}=e,{currentUserSettingsStore:o}=c().default.state;if(!o)return;const i={...o.getPersonalHomeTipsSettings(),hide_completed:n};s().createAndCommit({userAction:"LearnHomePanel.hideCompleted",environment:t,canUndo:!0,perform:e=>{l().mJ({userSettingsStore:o,transaction:e,data:{personal_home_tips_settings:i}})}})}function y(e){const{blockId:t,enabledFeatures:n,userId:o}=e,a=(0,r().WP)(n).flatMap((e=>{let[t,n]=e;if(!n)return[];switch(t){case"tasks":return[(0,g().NY)("myTasksAssignedToMeCollectionView")];case"customDb":const e=(0,g().NY)("customDb");return[e&&(0,d().cf)({userId:o,viewBlockId:e})].filter(r().O9);case"similarUsersAndTrending":return[(0,g().NY)("similarUsersCollectionView"),(0,g().NY)("trendingCollectionView")];case"unifiedFeed":return[(0,g().NY)("postsCollectionView")];case"recents":case"updates":case"templates":case"tips":case"calendar":case"aiChatModule":return[];default:(0,r().HB)(t)}})),{isHomeKey:s,homeCollectionViewIdsKey:l,unifiedFeedEnabledKey:c}=(0,h().h)(t);i().A.set(s,!0),i().A.set(l,a),i().A.set(c,n.unifiedFeed)}},709687:(e,t,n)=>{n.d(t,{r:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("bell",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},739135:(e,t,n)=>{n.d(t,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var o=()=>n(541235),i=()=>n(496603);function r(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===o().q_||e===o().YD)}function s(e,t){if(a(t))return;const n=o().c$[e],i=n.steps.findIndex((e=>e.id===t));return-1===i?n.steps[0].id:i===n.steps.length-1?o().q_:n.steps[i+1].id}function l(e,t){const n=c(e,t);if(n&&!a(n))return s(t,n)}function d(e,t){const n=c(e,t);if(n)return function(e,t){const n=o().c$[e];var r;if(a(t))return null===(r=(0,i().HV)(n.steps))||void 0===r?void 0:r.id;const s=n.steps.findIndex((e=>e.id===t));return-1!==s&&0!==s?n.steps[s-1].id:void 0}(t,n)}function c(e,t){var n;if(!e)return;const i=((null===(n=e.getSettings())||void 0===n?void 0:n.tutorials)||{})[t];return void 0===i?o().c$[t].steps[0].id:i}},756114:(e,t,n)=>{n.d(t,{D:()=>o});function o(e,t){t.route.name;return!1}},769607:(e,t,n)=>{n.r(t),n.d(t,{aiFaceFillIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M9.112 2.863a4.17 4.17 0 0 0-4.92.468.875.875 0 0 0 1.167 1.304 2.42 2.42 0 0 1 3.44.22.875.875 0 0 0 1.322-1.146 4.2 4.2 0 0 0-1.01-.846m1.248 2.563a4.167 4.167 0 0 1 7.173.037.875.875 0 1 1-1.511.883 2.417 2.417 0 0 0-4.16-.02l-5.21 8.697 3.828.62a.875.875 0 0 1-.28 1.728l-5.102-.827a.875.875 0 0 1-.61-1.313zM6.51 9.204a1.416 1.416 0 1 0 .452-2.795 1.416 1.416 0 0 0-.453 2.795"}),(0,o.jsx)("path",{d:"M12.72 10.21a1.416 1.416 0 1 0 .453-2.795 1.416 1.416 0 0 0-.453 2.795"})]})},r=(0,n(340498).wt)("aiFaceFill",i)},799384:(e,t,n)=>{n.d(t,{o:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("newSidebarSearch",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 8.75C4 6.12665 6.12665 4 8.75 4C11.3734 4 13.5 6.12665 13.5 8.75C13.5 11.3734 11.3734 13.5 8.75 13.5C6.12665 13.5 4 11.3734 4 8.75ZM8.75 2.5C5.29822 2.5 2.5 5.29822 2.5 8.75C2.5 12.2018 5.29822 15 8.75 15C10.2056 15 11.545 14.5024 12.6073 13.668L16.7197 17.7803C17.0126 18.0732 17.4874 18.0732 17.7803 17.7803C18.0732 17.4874 18.0732 17.0126 17.7803 16.7197L13.668 12.6073C14.5024 11.545 15 10.2056 15 8.75C15 5.29822 12.2018 2.5 8.75 2.5Z"})})},801678:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(296540),i=()=>n(662303),r=()=>n(484714),a=()=>n(847249),s=()=>n(955825),l=()=>n(959013),d=()=>n(100622),c=()=>n(496603),u=()=>n(284371),g=()=>n(720665),h=()=>n(145214),p=n(474848);const f={isRepositioning:!1};const m=function(e){const t=(0,o.useRef)(null),i=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),[d,u]=(0,o.useState)(f),h=(0,o.useCallback)((()=>{u(f)}),[]),{renderControl:m,onFlushTemporaryPosition:x,style:y,source:w,store:S}=e,{isRepositioning:b,image:j,startDragRenderedPosition:k,startDragImageScreenHeight:C}=d,A=(0,a().K8)((()=>0===n(502438).default.state.stores.length),[]),[I,M]=(0,o.useState)(!1),R=(0,a().uB)(e.mouseStore,n(454305).A),T=(0,a().K8)((()=>R.state.mouseEntered),[R]),L=(0,n(401497).IS)((()=>({dragContainer:{width:"100%",cursor:b?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[b]),P=(0,a().K8)((()=>function(e,t,n){return(0,c().Et)(n)?n:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const n=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,g().pN)(t)?n:t}}const o=t.getFormat(),i=o.page_cover_position;if((0,c().Et)(i))return i;return n}(e,t)}(w,S,d.temporaryPosition)),[d.temporaryPosition,w,S]);(0,o.useEffect)((()=>{const e=e=>{const n=t.current;n&&!n.contains(e.target)&&b&&x({imagePosition:P,reset:()=>{R.reset(),h()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[P,b,R,x,h]),b&&!A&&h();const B=(0,o.useMemo)((()=>(0,c().nF)((e=>{R.setState({...R.state,mouseEntered:!0})}),100)),[R]),_=(0,o.useMemo)((()=>(0,c().sg)((e=>{R.setState({...R.state,mouseEntered:!1})}),100)),[R]),D=(0,o.useCallback)(((e,t)=>{n(778417).IU({environment:i});const o=new Image;o.onload=()=>{u((e=>({...e,isRepositioning:!0,image:o})))},t&&(o.src=t)}),[i]),F=(0,o.useCallback)((e=>{x({imagePosition:P,reset:()=>{h()}})}),[P,x,h]),N=(0,o.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,n(819121).p)(t)&&M(!0)}),[]),W=(0,o.useCallback)((()=>{M(!0)}),[]),E=(0,o.useCallback)((e=>{if(j&&b){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/j.width*j.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:P})))}}}),[j,P,b]),z=(0,o.useCallback)((e=>{if(b){const t=e.diffY/(C||0)+(k||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,n(40845).A)(t,0,1),4)})))}}),[b,C,k]),H=(0,o.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),O=(0,a().K8)((()=>m({handleRepositionClick:D,handleSavePositionClick:F,handleCancelClick:h,isVisible:l||T||I||b,isRepositioning:b})),[D,F,I,l,b,T,m,h]);return(0,p.jsxs)("div",{ref:t,onFocus:N,onBlur:W,onMouseEnter:B,onMouseMove:B,onMouseLeave:_,...(0,s().AH)(L.container,y),children:[(0,p.jsx)(n(603820).A,{onDraggableDragStart:E,onDraggableDragMove:z,onDraggableDragEnd:H,onDraggableDragCancel:H,disabled:!b,render:t=>(0,p.jsx)("div",{...(0,s().AH)(L.dragContainer),...t,children:e.render({imagePosition:P,isRepositioning:b})})}),(0,p.jsx)(v,{small:e.small,isRepositioning:b}),O]})};function v(e){let{small:t,isRepositioning:n}=e;if(t)return null;const o={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:u().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,p.jsx)(h().A,{visible:n,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:o,children:(0,p.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},824160:(e,t,n)=>{n.d(t,{A:()=>s});n(296540);var o=()=>n(484714),i=()=>n(401497),r=()=>n(704152),a=n(474848);function s(e){const t=(0,o().Y0)(),n=(0,i().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(r().A,{style:{...n.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(r().A,{style:{...n.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...n.innerStyle,...e.innerStyle},children:e.children})})}},843189:(e,t,n)=>{n.d(t,{E:()=>a});var o=n(296540),i=()=>n(960715),r=n(474848);const a=o.forwardRef(((e,t)=>{let{children:o,color:a,disabled:s,icon:l,iconStyle:d,isLoading:c,shape:u="default",size:g="md",style:h,...p}=e;const f=(0,n(401497).IS)((e=>{const t=a?`${a}Primary`:"primary",r=a||"regular",p=a?`${a}Hover`:"primaryHover",f=a?`${a}Pressed`:"primaryPressed";return{button:{...(0,i().qq)({shape:u,size:g,hasIconOnly:Boolean(l)&&!o}),justifyContent:"center",color:e.text[t],background:e.tint[r],opacity:s||c?.3:1,fontWeight:n(284371).Wy.medium,...h},hovered:{background:s?e.tint[r]:e.tint[p]},pressed:{background:s?e.tint[r]:e.tint[f]},icon:{...(0,i().D3)({size:g,hasIconOnly:!o}),...d}}}),[o,a,s,l,d,c,u,g,h]);return(0,r.jsxs)(n(197190).A,{ref:t,style:f.button,hoveredStyle:f.hovered,pressedStyle:f.pressed,disabled:s,isLoading:c,...p,children:[l?l(f.icon):null,o]})}));a.displayName="TintButton"},863330:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,plusSmallIcon:()=>i});n(296540);const o={viewBox:"0 0 16 16",svg:(0,n(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},i=(0,n(340498).wt)("plusSmall",o)},867772:(e,t,n)=>{n.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>o,pF:()=>a,vS:()=>i});const o="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>n(757695))().default{getInitialState(){return{loadingMode:a}}}const l=s},883234:(e,t,n)=>{n.d(t,{_:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,o.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},916096:(e,t,n)=>{n.d(t,{ke:()=>W,Ay:()=>H,aQ:()=>z});var o=n(296540),i=()=>n(484714),r=()=>n(847249),a=()=>n(401497),s=()=>n(79275),l=()=>n(959013),d=()=>n(35392),c=()=>n(296798),u=()=>n(859428),g=()=>n(490044),h=()=>n(694874),p=()=>n(696746),f=(n(898992),n(354520),n(672577),n(803949),n(581454),()=>n(187174)),m=()=>n(921997),v=()=>n(519831),x=()=>n(763824),y=()=>n(449506),w=()=>n(941541),S=()=>n(351360),b=()=>n(630116),j=()=>n(634157),k=()=>n(578136);const C=new(n(299919).Y)((e=>new A(e)));class A extends(()=>n(757695))().default{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,n(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const n=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===n.type&&n.data){const e=n.data[0];this.setState(e)}}}function I(e){const t=(0,i().v3)(),n=(0,r().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),a=(0,o.useMemo)((()=>e.filter((e=>!C.has(e)))),[e]);(0,f().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:n}=e,o=await x().dS(n,10,(async e=>(await e.load(),e.isDefined())));if(0===o.length)return;const i=o[0].getSpaceId(),r=await y().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:i,collectionIds:o.map((e=>e.id))}});if("success"===r.type&&r.data)for(let a=0;a<o.length;a++){const e=o[a],t=r.data[a];t.collectionId===e.id&&C.get(e).setState(t)}}({environment:t,collectionStores:a})}),[a,t]);const s=(0,o.useMemo)((()=>e.map((e=>C.get(e)))),[e]);return(0,o.useEffect)((()=>{if(!n)return;const e=s.map((e=>w().Ay.addListener((0,m().eG)(e.collectionStore.id),void 0,(0,w().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&w().Ay.removeListener(e,t)}))}}),[s,n,t]),s}var M=()=>n(962730),R=()=>n(551694),T=()=>n(487941),L=()=>n(846955),P=()=>n(644914),B=()=>n(645873);const _={LazyAiLandingPageExperimentSwitcher:new(B().O2)("LazyAiLandingPageExperimentSwitcher",(()=>n.e(66169).then(n.bind(n,981440))))},D=(0,B()._h)(_.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var F=n(474848);function N(e){const{styles:t}=e,f=(0,i().v3)(),m=(0,l().tz)(),x=(0,r().K8)((()=>{const{currentSpaceViewStore:e}=S().default.state;if(e)return p().x$(e)}),[]),y=(0,r().K8)((()=>{const e=S().default.state.mainEditorCurrentBlockStore;return!!e&&p().Nh(e.id)}),[]),w=(0,r().K8)((()=>"home_available"===L().default.getState().type),[]),C=(0,r().K8)((()=>{var e;return null==x||null===(e=x.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==x?void 0:x.getRecordModel,pageVisitSource:n(584262).y8.SidebarHome})}),[x]),A=function(){const e=(0,i().v3)(),t=(0,r().K8)((()=>(0,k().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),n=(0,r().K8)((()=>{var e;return null===(e=S().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),o=I((0,r().K8)((()=>{if(!t)return[];const e=S().default.state.currentSpaceStore;return n&&e?j().A.getJoinedTeamStores({userId:n,spaceStore:e}).map((t=>b().md.createChildStore(t,{table:v().Vl,id:t.id,spaceId:e.id}))):[]}),[t,n]));return(0,r().K8)((()=>{var e;if(!S().default.state.currentSpaceStore)return!1;const t=(null===(e=S().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return o.find((e=>!(!e.getLatestPostCreatedById()||e.getLatestPostCreatedTime()<=t||e.getLatestPostCreatedById()===n)))}),[o,n])}(),R=(0,n(327300).w4)(),B=(0,r().O$)(n(430483).ts),[_,N]=(0,o.useState)(!1),[W,H]=(0,o.useState)(!1),O=(0,o.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,n(819121).p)(t)&&H(!0)}),[]),V=(0,o.useCallback)((()=>{H(!1)}),[]),K=(0,o.useCallback)((()=>{n(353643).A.state.isDragging||N(!0)}),[]),Y=(0,o.useCallback)((()=>{N(!1)}),[]),$=(0,r().uB)(void 0,T().A),U=(0,r().uB)(void 0,T().A),G=(0,r().K8)((()=>U.state.focused||U.state.hovered),[U]),J=(0,o.useCallback)((()=>{(0,h().Wy)(f),(0,n(162674).ZL)({environment:f,from:"sidebar"}),w&&(0,h().tL)(f),n(441199).default.isVisible()&&(0,n(770906).VI)({environment:f})}),[f,w]),q=(0,P().ab)(),Z=(0,a().IS)((e=>({tooltip:{width:200},leftContainer:{position:"relative"},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...q.baseSidebarItem,...y&&q.currentSelectedSidebarItem},homeIconStyle:{...q.topButtonIcon,...y&&q.currentSelectedSidebarIcon}})),[y,q]),X=(0,o.useMemo)((()=>R.showAiFaceInHomeIcon?B?(0,n(366295).L)(q.topButtonIcon):(0,n(654601).X)({width:16}):(0,s().X)(Z.homeIconStyle)),[R.showAiFaceInHomeIcon,B,Z.homeIconStyle,q.topButtonIcon]),Q=(0,o.useCallback)((()=>G?"":(0,F.jsxs)("div",{style:Z.tooltip,children:[(0,F.jsx)("div",{children:m.formatMessage(z.tooltip)}),(0,F.jsx)(d().A,{style:Z.shortcutLabel,name:"openHome"})]})),[G,m,Z.shortcutLabel,Z.tooltip]);return(0,F.jsx)(u().A,{store:$,renderTooltip:Q,disableTooltip:w,originGap:6,textWrap:!0,placement:M().W.Right,render:e=>(0,F.jsx)(c().A,{...e,style:Z.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:C,onClick:J,"aria-current":y?"page":void 0,children:(0,F.jsx)(g().A,{left:(0,F.jsxs)("div",{style:Z.leftContainer,children:[X,A&&(0,F.jsx)(E,{})]}),disableMobileBorder:!0,right:(0,F.jsx)(D,{isHovered:_,isFocused:W,tooltipStore:U,parentTooltipStore:$}),onMouseMove:K,onMouseLeave:Y,onFocus:O,onBlur:V,children:m.formatMessage(z.label)})})})}function W(e){const{styles:t}=e,n=(0,r().K8)((()=>"home_available"===L().default.getState().type),[]),o=(0,P().ab)(),i=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,F.jsx)(u().A,{renderTooltip:()=>(0,F.jsxs)("div",{style:i.tooltip,children:[(0,F.jsx)("div",{children:(0,F.jsx)(l().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,F.jsx)(d().A,{style:i.shortcutLabel,name:"openHome"})]}),disableTooltip:n,originGap:6,textWrap:!0,placement:M().W.Right,render:e=>(0,F.jsx)(c().A,{...e,style:o.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{R().A.open()},children:(0,F.jsx)(g().A,{left:(0,s().X)(o.topButtonIcon),disableMobileBorder:!0,children:(0,F.jsx)(l().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function E(e){const{top:t=0,right:n=-3}=e,o=(0,a().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:t,right:n,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[t,n]);return(0,F.jsx)("div",{style:o.unreadBadge})}const z=(0,l().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),H=o.memo(N)},926329:(e,t,n)=>{n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,o.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,o.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},952816:(e,t,n)=>{n.d(t,{E:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("bug",{viewBox:"0 0 64 64",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"m32,8c-5.55,0-9,3.83-9,10h18c0-6.17-3.45-10-9-10Z"}),(0,o.jsx)("path",{d:"m48,36h12v-4h-12v-6.01c2.74-.06,4.78-.94,6.76-2.92l4.24-4.24-2.83-2.83-4.24,4.24c-1.3,1.3-2.41,1.76-4.24,1.76h-13.69v32c6.15,0,10.63-3.12,12.7-8.47l1.54,1.54c1.3,1.3,1.76,2.41,1.76,4.24v2.69h4v-2.69c0-2.9-.88-5.02-2.93-7.07l-3.26-3.26c.12-.95.19-1.94.19-2.98v-2Z"}),(0,o.jsx)("path",{d:"m12.07,20.24l-4.24-4.24-2.83,2.83,4.24,4.24c1.98,1.98,4.02,2.85,6.76,2.92v6.01H4v4h12v2c0,1.04.07,2.03.19,2.98l-3.26,3.26c-2.05,2.05-2.93,4.17-2.93,7.07v2.69h4v-2.69c0-1.83.46-2.95,1.76-4.24l1.54-1.54c2.08,5.35,6.55,8.47,12.7,8.47V22h-13.69c-1.83,0-2.95-.46-4.24-1.76Z"})]})})},958846:(e,t,n)=>{n.d(t,{A:()=>i});n(296540);var o=n(474848);const i=function(e){let{loading:t,onLoadMore:i,loadMoreOffsetThreshold:r,resultSize:a,fetchSize:s}=e;return(0,o.jsx)(n(228927).A,{onChange:e=>function(e,t,n,o,i,r){if(t)return;const a=o||200;if(e>a)return;const s=void 0===i||void 0===r||i>=r;s&&n()}(e,t,i,r,a,s)})}}}]);