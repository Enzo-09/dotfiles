(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[37580],{43972:(e,t,n)=>{"use strict";n.d(t,{w:()=>l});n(296540);var o=()=>n(764880),i=()=>n(534177),r=()=>n(256863),s=()=>n(453697),a=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,o().H3)(t)?(0,a.jsx)(r().A,{botValue:t.asActor,...n}):(0,o().ps)(t)?(0,a.jsx)(s().A,{userValue:t.asActor,...n}):(0,o().h2)(t)?(0,a.jsx)(s().A,{userValue:void 0,...n}):void(0,i().HB)(t)}},53528:(e,t,n)=>{"use strict";n.d(t,{OH:()=>a,T2:()=>l,do:()=>d});var o=()=>n(597777),i=()=>n(869190),r=()=>n(604995),s=()=>n(416504);function a(e){const{dateTime:t,intl:n,shortenDateAndRange:o}=e,s=r().C6.toPersistedDate(t.valueOf());return i().ZF({value:s,allowRelativeDates:!0,intl:n,shortenDateAndRange:o,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a}=e,l=r().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return i().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:o,displayInUserTimezone:s,alwaysIncludeTimezone:a})}function d(e){const{luxonRange:t,intl:n}=e,a=r().C6.toPersistedDateRange(t),l=i().ZF({value:a,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),d=t.end.setZone((0,s().P)()),c=i().fU({start_time:d.toFormat(o().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:c})}},90907:(e,t,n)=>{"use strict";n.r(t),n.d(t,{iconDefinition:()=>i,lockIcon:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"}),(0,o.jsx)("path",{d:"M10 1.95a4 4 0 0 0-4 4v1.433a2.426 2.426 0 0 0-2.025 2.392v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.426 2.426 0 0 0 14 7.383V5.95a4 4 0 0 0-4-4m2.75 5.4h-5.5v-1.4a2.75 2.75 0 0 1 5.5 0zM5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lock",i)},93263:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var o=n(296540);const i=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return o.cloneElement(e,t)};var r=n(474848);const s=function(e){const[t,s]=(0,o.useState)([]),{render:a}=e,l=(0,n(847249).K8)((()=>a()),[a]),d=(0,o.useMemo)((()=>new Set(l.map((e=>e.key)))),[l]),c=(0,n(591779).ZC)(l);if(c){const e=[],n=new Set(t.map((e=>e.key)));for(const t of c)if(!d.has(t.key)&&!n.has(t.key)){const n={visible:!1,onAnimationEnd:()=>{s((e=>e.filter((e=>e.key!==o.key))))}},o=i(t,n);e.push(o)}e.length>0&&s((t=>[...t,...e]))}const u=t.filter((e=>!d.has(e.key))).concat(l);return(0,r.jsx)("div",{className:e.className,children:u})}},192421:(e,t,n)=>{"use strict";n.d(t,{F:()=>d});n(296540);var o=()=>n(484714),i=()=>n(433847),r=()=>n(959013),s=()=>n(583690),a=()=>n(678553),l=n(474848);function d(e){const{role:t}=e,n=(0,r().tz)(),{device:d}=(0,o().v3)(),c=(0,s().I2)(t);return(0,l.jsx)(a().Ay,{...e,title:n.formatMessage((0,i().sK)(t,void 0).label),shouldWrapCaption:!0,style:d.isMobile?{padding:"12px 4px"}:{padding:4,marginTop:2,marginBottom:2},captionStyle:{marginTop:4},caption:(0,l.jsx)("div",{children:c})})}},200582:(e,t,n)=>{"use strict";n.d(t,{m:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M11.633 1.812c.263.096.43.354.41.632l-.392 5.51h3.099a.625.625 0 0 1 .506.992l-6.18 8.54a.625.625 0 0 1-1.13-.412l.402-5.5H5.25a.625.625 0 0 1-.507-.99l6.17-8.55a.625.625 0 0 1 .72-.222m-5.161 8.513H9.02a.625.625 0 0 1 .623.67l-.29 3.976 4.173-5.766H10.98a.625.625 0 0 1-.623-.67l.284-3.987z"})},i=(0,n(340498).wt)("lightning",o)},212727:(e,t,n)=>{"use strict";n.r(t),n.d(t,{gearIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M7.29 10c0 1.5 1.22 2.71 2.71 2.71 1.5 0 2.71-1.21 2.71-2.71S11.5 7.29 10 7.29 7.29 8.5 7.29 10m1.25 0c0-.81.66-1.46 1.46-1.46.81 0 1.46.65 1.46 1.46s-.65 1.46-1.46 1.46-1.46-.65-1.46-1.46"}),(0,o.jsx)("path",{d:"M8.49 17.64q.75.15 1.53.15v-.01c.47 0 .94-.04 1.41-.13.26-.05.46-.25.5-.51l.26-1.53.15-.06 1.28.91c.21.14.49.14.71 0 .41-.28.8-.61 1.18-.98.33-.33.63-.7.9-1.09.15-.21.15-.5 0-.71l-.9-1.27.06-.15 1.55-.27c.26-.05.46-.25.51-.5a7.8 7.8 0 0 0 .02-2.94.62.62 0 0 0-.51-.5l-1.53-.26-.06-.15.91-1.28c.14-.21.14-.49 0-.71a7.9 7.9 0 0 0-2.07-2.08.62.62 0 0 0-.71 0l-1.27.9-.15-.06-.27-1.55a.64.64 0 0 0-.5-.51c-.5-.1-1-.15-1.53-.15-.47 0-.95.04-1.41.13-.26.05-.46.25-.5.51l-.26 1.53-.15.06-1.28-.91a.65.65 0 0 0-.71 0 7.9 7.9 0 0 0-2.08 2.07c-.15.21-.15.5 0 .71l.9 1.27-.06.15-1.55.27c-.26.05-.46.25-.51.5-.1.5-.15 1-.15 1.53 0 .47.04.95.13 1.41.05.26.25.46.51.5l1.53.26.06.15-.91 1.28c-.14.21-.15.49 0 .71.29.42.61.81.98 1.18.34.34.7.65 1.09.91.21.15.5.15.71 0l1.27-.9.15.06.27 1.55c.05.26.25.46.5.51m2.29-1.15c-.53.07-1.09.07-1.63 0l-.25-1.47a.62.62 0 0 0-.42-.49 6 6 0 0 1-.68-.28.63.63 0 0 0-.65.04l-1.2.85a6.8 6.8 0 0 1-1.14-1.16l.86-1.21c.13-.19.15-.43.05-.64-.11-.22-.21-.45-.28-.68a.62.62 0 0 0-.49-.43l-1.45-.25a6.7 6.7 0 0 1 0-1.63l1.47-.25c.23-.04.42-.2.49-.42.07-.23.17-.46.28-.68.11-.21.09-.46-.04-.65l-.85-1.2A6.8 6.8 0 0 1 6.01 4.8l1.21.86c.19.13.43.15.64.05.22-.11.45-.21.68-.28s.39-.26.43-.49l.25-1.45c.53-.07 1.09-.07 1.63 0l.25 1.47c.04.23.2.42.42.49.23.07.46.17.68.28.21.11.46.09.65-.04l1.2-.85A6.8 6.8 0 0 1 15.19 6l-.86 1.21c-.13.19-.15.43-.05.64.11.22.21.45.28.68s.26.39.49.43l1.45.25a6.7 6.7 0 0 1 0 1.63l-1.47.25c-.23.04-.42.2-.49.42-.07.23-.17.46-.28.68-.11.21-.09.46.04.65l.85 1.2a6.8 6.8 0 0 1-1.16 1.14l-1.21-.86a.64.64 0 0 0-.64-.05c-.22.11-.45.21-.68.28s-.39.26-.43.49z"})]})},r=(0,n(340498).wt)("gear",i)},247123:(e,t,n)=>{"use strict";n.d(t,{QU:()=>v,f2:()=>g,r6:()=>b});n(581454),n(296540);var o=()=>n(847249),i=()=>n(401497),r=()=>n(68263),s=()=>n(959013),a=()=>n(534177),l=()=>n(284371),d=()=>n(663590),c=()=>n(756279),u=()=>n(351360),m=()=>n(2143),p=()=>n(921194),f=n(474848);function g(e){const{openState:t}=e,{mainEditorCurrentBlockStore:n,currentSpaceStore:r}=(0,o().K8)((()=>{const{mainEditorCurrentBlockStore:e,currentSpaceStore:t}=u().default.state;return{mainEditorCurrentBlockStore:e,currentSpaceStore:t}}),[]),s=(0,o().K8)((()=>(0,d().FI)()),[]),a=(0,i().IS)((e=>({scroller:{display:"flex",flexDirection:"column",maxHeight:290,...s?{border:`1px solid ${e.lightDividerColor}`,borderRadius:6,paddingTop:8,paddingLeft:12,paddingRight:12,paddingBottom:12,marginTop:15,marginBottom:5,marginLeft:-12,marginRight:-12}:{}},editContainer:{marginTop:2,marginBottom:2,color:e.text.primary}})),[s]);if(!n||!r)return null;const l=Date.now();return(0,f.jsx)(m().H,{type:c().A.Y,style:a.scroller,children:t.permissionChanges.map(((e,t)=>{let[o,i]=e;const s={timestamp:l,space_id:r.id,type:"permission-changed",permission_data:{before:o,after:i}};return(0,f.jsx)("div",{style:a.editContainer,children:(0,f.jsx)(p().A,{rootStore:n,edit:s})},`${o.type}-${t}`)}))})}function v(e,t){return["remove","restrict"].includes(e.type)?t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccessV2",defaultMessage:"Change and unlink"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restrictAccess",defaultMessage:"Restrict access"}):t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.relink",defaultMessage:"Relink"}):"restoreTeamPermissions"===e.type?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreTeamPermissions",defaultMessage:"Reset Permissions"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.restoreAccess",defaultMessage:"Restore access"})}function b(e,t){switch(e.type){case"remove":return t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restrict.description",defaultMessage:"Are you sure you want to remove this {permissionGroup} and restrict access? This page will no longer inherit share settings from the parent page.",values:{permissionGroup:h(e)}});case"restrict":return t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.descriptionV2",defaultMessage:"Change access and unlink share settings from parent page?"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.remove.description",defaultMessage:"Are you sure you want to change this role and restrict access? This page will no longer inherit share settings from the parent page."});case"restore":return t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):e.permissionChanges.length>0?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restore.description",defaultMessage:"Are you sure you want to restore access? This will inherit the following permissions from the parent page:"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreNoChanges.description",defaultMessage:"Are you sure you want to restore access?"});case"restoreTeamPermissions":return t?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.relink.description",defaultMessage:"Relink share settings?"}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("div",{style:{fontWeight:l().Wy.semibold,marginBottom:4},children:(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.mainDescription",defaultMessage:"Are you sure you want to reset permissions to match the teamspace defaults?"})}),(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.restoreTeamPermissions.warningMessage",defaultMessage:"Everyone else who is not part of the teamspace will lose access, including guests."})]});default:throw a().HB(e)}}function h(e){return(0,r().B2)(e.permissionItem)?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.user",defaultMessage:"user"}):(0,r().Ds)(e.permissionItem)?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.group",defaultMessage:"group"}):(0,r().Lg)(e.permissionItem)?(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.space",defaultMessage:"workspace"}):(0,f.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.permissionGroup.generic",defaultMessage:"permission"})}},250202:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,e:()=>s});var o=n(296540),i=()=>n(401497),r=n(474848);let s=function(e){return e[e.Name=0]="Name",e[e.Type=1]="Type",e}({});const a=o.forwardRef((function(e,t){const{propertySchema:o,format:a,locked:l}=e,{name:d,type:c,icon:u}=o,m=(0,n(963589).X)("nds_default_property_noticon"),{isMobile:p}=(0,n(484714).Y0)(),f=(0,i().IS)((e=>({propertyIcon:{fill:e.regularIconColor,marginLeft:6,marginRight:2}})),[]),g=(0,i().DP)(),v=a===s.Name?d:n(682146).dC[c];return(0,r.jsx)(n(760217).A,{title:v,icon:(0,r.jsx)(n(743176).zB,{icon:u,type:c,size:p?18:16,theme:g,style:f.propertyIcon,isDefaultNoticonEnabled:m}),disabled:l,...e})}))},266626:(e,t,n)=>{"use strict";n.d(t,{M5:()=>z,CX:()=>D});n(898992),n(672577),n(430670),n(581454);var o=n(296540),i=()=>n(484714),r=()=>n(847249),s=()=>n(401497),a=()=>n(700500),l=()=>n(555776),d=()=>n(145214),c=()=>n(93263),u=()=>n(186445),m=()=>n(728611),p=()=>n(278014),f=()=>n(108944),g=()=>n(569912),v=()=>n(953418),b=()=>n(640653),h=()=>n(695625),y=()=>n(397248),_=()=>n(337567),C=()=>n(871399),A=()=>n(666710),x=()=>n(444570),M=(n(18107),n(967357),()=>n(751735)),S=()=>n(100622),w=()=>n(410282),k=()=>n(508496);var j=n(474848);const T=new Map([[a().xd.toggle,28],[a().xd.header,28],[a().xd.subHeader,28],[a().xd.subSubHeader,28],[a().xd.toDo,28],[a().xd.bulletedList,28],[a().xd.numberedList,28],[a().xd.text,24]]),R=new Map([[a().xd.image,-2]]),I=(0,o.forwardRef)((function(e,t){const{store:a,selectable:l,insertionLocation:d,state:c,nodeRect:u,containerRect:m}=e,p=(0,i().v3)(),f=(0,i().WS)(),g=(0,n(792485).S)(),v=(0,r().K8)((()=>A().default.state.selectableRectMap.get(l)),[l]),b=(0,r().K8)((()=>x().TH({environment:p,store:a,selectableBoundingRect:v})),[p,a,v]),h=(0,r().K8)((()=>!(null!=g&&g.publicEditModeStore.state.hasPublicPermission)&&("editor"===a.getRole()||"read_and_write"===a.getRole())||"edit"===(null==g?void 0:g.publicEditModeStore.state.permission)),[null==g?void 0:g.publicEditModeStore,a]),y=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=a.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==g||null===(t=g.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==g?void 0:g.publicEditModeStore,a]),_=(0,r().K8)((()=>"suggest"===n(77246).Uv.getMode(a)),[a]),I=(0,r().K8)((()=>a.isFirstBlockInCalloutV2Block()),[a]),B=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===a.getType(),o=g&&(0,n(696746).Nh)(g.pageStore.id);return!f&&(!a.isNavigableAncestorNonEditableState()||"collection"===(null===(e=a.getParentStore())||void 0===e?void 0:e.table))&&(h||y&&_)&&!t&&!a.isNavigableAncestorExternallyImportedPage()&&!o&&!I&&v}),[y,h,I,f,_,g,v,a]),[P,E]=(0,o.useState)(!1),D=(0,r().K8)((()=>{var e;return a.id===(null===(e=a.getNavigableBlockStore())||void 0===e?void 0:e.getContentIds().at(-1))}),[a]),H=(0,r().K8)((()=>{if(!v)return 0;if("above"===d){if(k().default.checkGate({gateName:"selectable_top_margin"})){return-12-x().mC(l)/2-2}return-14}{const e=v.height-12;return D?e+12:e}}),[d,D,l,v]),z=(0,r().K8)((()=>{if(!v)return 0;if("above"===d){if(k().default.checkGate({gateName:"selectable_top_margin"})){const e=x().mC(l);return-.5*Math.max(3,e)-3}return-3.5}{const e=v.height-1.5;return D?e+12:e}}),[d,D,l,v]),{indentHintSize:F,additionalHorizontalPadding:V,additionalVerticalPadding:L}=(0,r().K8)((()=>{var e,t,o;const i=null==a?void 0:a.getRecordStoreUIParent();if(i instanceof n(630116).Bv&&["collection_view","collection_view_page"].includes(i.getType())){const e=(0,n(638146).cf)({userId:p.currentUser.id,viewBlockId:i.id}),t=i.getCollectionViewStores().find((t=>t.id===e));if(t){if("table"===t.getType())return{indentHintSize:0,additionalHorizontalPadding:5,additionalVerticalPadding:1}}}const r=null===(e=a.getParentBlockStore())||void 0===e?void 0:e.getType(),s=a.getType(),l=s?R.get(s)??0:0;if(!r)return{indentHintSize:void 0,additionalHorizontalPadding:0,additionalVerticalPadding:l};const c=null===(t=a.getParentBlockStore())||void 0===t?void 0:t.getContentIds(),u=a.id===(null==c?void 0:c[0]),m=a.id===(null==c?void 0:c.at(-1)),f=(()=>{if(a.isTransclusionType()||a.isInsideTransclusion())return 5;const e=a.getNumberOfDuplicateBlocksAncestors();return e>0?n(571400).t*e:0})(),g=(null===(o=a.getParentBlockStore())||void 0===o?void 0:o.getParentTable())===n(199378).SC;return u&&!g||m&&"below"===d?{indentHintSize:T.get(r),additionalHorizontalPadding:f,additionalVerticalPadding:l}:{indentHintSize:void 0,additionalHorizontalPadding:f,additionalVerticalPadding:l}}),[d,a,p.currentUser.id]),{left:N,positioningAdjustment:K}=(0,r().K8)((()=>{const e=x().KG({store:a,selectableBoundingRect:v,containerWidth:b});return void 0!==F?{left:26+F+V-e,positioningAdjustment:e}:{left:26+V-e,positioningAdjustment:e}}),[F,V,a,v,b]),U=(0,r().K8)((()=>{const e=function(e){var t;const n=e.getParentBlockStore(),o=null==n?void 0:n.getType(),i=null===(t=e.getParentBlockStore())||void 0===t?void 0:t.getContentIds();if(e.id!==(null==i?void 0:i[0]))return!1;switch(o){case"bulleted_list":case"toggle":case"to_do":case"numbered_list":return!0;default:return!1}}(a),t=a.getParentBlockStore();return e&&t?(0,w().j)(t):(0,w().j)(a)}),[a]),W=((null==u?void 0:u.left)??0)-((null==m?void 0:m.left)??0),O=(0,s().IS)((e=>{const t={position:"absolute",top:z+L,height:3,transition:"0.15s",left:W-K},o=function(e){const{blockBackgroundColor:t,theme:n}=e,o=(0,S().k5)(t,n);return o&&o.background?(0,M().X4)(o.background,.66):(0,M().X4)(n.contentBackground,.66)}({blockBackgroundColor:U,theme:e});return{plusIconStyles:{width:16,...(0,n(327994).Cz)(e,P)},buttonStyles:{position:"absolute",top:H+L,left:W-N,width:24,height:24,display:"flex",justifyContent:"center",borderRadius:3,backdropFilter:"blur(4px)",background:o},buttonHoveredStyles:{backdropFilter:"blur(4px)",background:(0,S().Qr)([e.buttonHoveredBackground,o])},lineStyles:{...t,width:b?`${b}px`:void 0,background:P?(0,M().X4)(e.icon.secondary,.4):"transparent"},lighterLineStyles:void 0!==F?{...t,width:b?F-2+"px":void 0,background:P?(0,M().X4)(e.icon.secondary,.4):"transparent",left:-F+K}:{},mediumColorStyle:{color:e.text.contrastSecondary}}}),[P,H,N,z,F,L,b,K,U,W]);return B?(0,j.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:n(348501).q,renderTooltip:function(){return(0,j.jsx)("div",{style:{textAlign:"center"},children:(0,j.jsx)(n(959013).sA,{defaultMessage:"Click <mediumcolor>to add block</mediumcolor>",id:"block.InterBlockAddButton.tooltip.addBlock",values:{mediumcolor:e=>(0,j.jsx)("span",{style:O.mediumColorStyle,children:e})}})})},render:e=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(n(704152).A,{ref:t,style:O.buttonStyles,hoveredStyle:O.buttonHoveredStyles,onClick:()=>{(0,n(358063).yO)(p,a,d)},onMouseEnter:t=>{var n;E(!0),C().default.setState({...c,isHoveringPlusButton:!0}),null===(n=e.onMouseEnter)||void 0===n||n.call(e,t)},onMouseLeave:t=>{var n;E(!1),C().default.setState({...c,isHoveringPlusButton:!1}),null===(n=e.onMouseLeave)||void 0===n||n.call(e,t)},children:(0,n(689094).W)(O.plusIconStyles)}),(0,j.jsx)("div",{style:O.lighterLineStyles}),(0,j.jsx)("div",{style:O.lineStyles}),void 0!==F&&(0,j.jsx)("div",{style:O.lineStyles})]})}):(C().default.setState({...c,isPlusButtonVisible:!1}),null)}));var B=()=>n(742478),P=()=>n(737517);const E=[a().xd.page,a().xd.callout,a().xd.column,a().xd.transclusionContainer];function D(e){var t;const n=(0,i().v3)(),{container:a,state:A}=e,x=(0,r().K8)((()=>(0,b().s7)(n)),[n]),M=(0,o.useRef)(null),S=(0,o.useRef)(void 0),{targetSelectable:w,icon:k}=(0,r().K8)((()=>function(e,t,n){const{mouseX:o,mouseY:i}=n;if(e.current&&y().ux(e.current.getBoundingClientRect(),o,i)&&t.current)return t.current;for(const d of n.nearbySelectables){const e=d.selectable;if("top-left-corner"===d.hoveredRegion||"above-content"===d.hoveredRegion){const n={targetSelectable:e,icon:"plus_above"};return t.current=n,n}if("bottom-left-corner"===d.hoveredRegion||"below-content"===d.hoveredRegion){var r;const n=null===(r=e.props.store.getParentBlockStore())||void 0===r?void 0:r.getType();if(n&&E.includes(n)&&e.props.isLastItem){const n={targetSelectable:e,icon:"plus_below"};return t.current=n,n}}}const s=n.currentStore,a=s&&h().T.findSelectablesFromStore(s).find((e=>Boolean(e.props.shouldShowHoverMenu||e.props.shouldShowCommentMenu)));if(!a)return{targetSelectable:void 0,icon:void 0};const l={targetSelectable:a,icon:C().default.isRightMarginCommentHovered()?"comment":"6-dot"};return t.current=l,l}(M,S,A)),[A]),T=null==w?void 0:w.props.store,R=(0,r().K8)((()=>u().ZT(n)),[n]),D=(0,o.useMemo)((()=>{var e;const t=null==R||null===(e=R.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect().left;return void 0!==t&&A.mouseX>t}),[A,R]),H=(0,r().K8)((()=>{if(!T)return!1;const e=f().Nq(T);return(null==T?void 0:T.pathIsDead())||e&&(0,_().pQ)(e.id)}),[T]),[V,L]=(0,o.useState)(null==w||null===(t=w.getNode())||void 0===t?void 0:t.getBoundingClientRect());(0,o.useEffect)((()=>{if(!w)return;const e=w.getNode();if(!e)return;const t=()=>{L(e.getBoundingClientRect())},n=(0,v().NM)(e);n&&(0,m().P4)(n,"scroll",t);const o=(0,v().T8)(e);return o&&o!==n&&(0,m().P4)(o,"scroll",t),t(),()=>{n&&(0,m().Ol)(n,"scroll",t),o&&(0,m().Ol)(o,"scroll",t)}}),[w]),(0,o.useEffect)((()=>{"comment"!==k&&l().A.state.isHovered&&l().A.resetHoverSource("right_margin_button")}),[k]);const N=null==a?void 0:a.getBoundingClientRect(),K=(0,r().K8)((()=>T?(0,p().ac)({marginItemType:"selectable_hover_menu_overlay_item",store:T,nodeRect:V,containerRect:N,environment:n}):0),[T,V,N,n]),U=(0,s().IS)((()=>({container:{position:"absolute",top:K},commentMenu:{marginLeft:3}})),[K]),W=(0,r().K8)((()=>z.state),[]);return(0,g().A)((e=>(0,j.jsxs)(j.Fragment,{children:[W?(0,j.jsx)(F,{container:a}):null,(0,j.jsx)(c().A,{render:()=>w&&T&&k&&!H?(C().default.setState({...A,isPlusButtonVisible:"plus_above"===k||"plus_below"===k}),[(0,j.jsxs)(d().A,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},config:{duration:150,delay:D?150:0,timingFunction:"ease-in-out"},style:U.container,...e,children:["comment"===k&&(0,j.jsx)("div",{style:U.commentMenu,children:(0,j.jsx)(B().A,{selectable:w,store:T,ref:M,containerRect:N})}),"6-dot"===k&&(0,j.jsx)(P().A,{selectable:w,store:T,isWorkspaceAdmin:x,ref:M,nodeRect:V,containerRect:N}),("plus_above"===k||"plus_below"===k)&&(0,j.jsx)(I,{store:T,selectable:w,insertionLocation:"plus_above"===k?"above":"below",ref:M,state:A,nodeRect:V,containerRect:N})]},T.id)]):(C().default.setState({...A,isPlusButtonVisible:!1}),[])})]})))}const H={"top-left-corner":"green","bottom-left-corner":"green","above-content":"blue","below-content":"blue"},z=n(757695).default.createValue(!1);function F(e){const{container:t}=e,n=(0,i().v3)(),s=(0,r().K8)((()=>C().default.state.isOpen?C().default.state.nearbySelectables.flatMap((e=>{let{selectable:t,hoveredRegion:o}=e;const i=A().default.state.selectableRectMap.get(t);if(!i)return[];const r=x().TH({environment:n,store:t.props.store,selectableBoundingRect:i}),s=x().KG({store:t.props.store,selectableBoundingRect:i,containerWidth:r}),a=x().mC(t);return{selectableRect:i,hoverRegionRect:(0,C().getHoverRegionOfRect)(i,o,r,s,a),hoveredRegion:o}})):[]),[n]),a=null==t?void 0:t.getBoundingClientRect(),l=((null==a?void 0:a.top)??0)+((null==t?void 0:t.scrollTop)??0),d=((null==a?void 0:a.left)??0)+((null==t?void 0:t.scrollLeft)??0);return(0,j.jsx)("div",{style:{pointerEvents:"none"},children:s.map(((e,t)=>{let{selectableRect:n,hoverRegionRect:i,hoveredRegion:r}=e;return(0,j.jsxs)(o.Fragment,{children:[(0,j.jsx)("div",{style:{position:"absolute",top:i.top-l,left:i.left-d,width:i.width,height:i.height,outline:`1px solid ${H[r]}`,fontSize:8,fontFamily:"monospace"},children:r}),(0,j.jsx)("div",{style:{position:"absolute",top:n.top-l,left:n.left-d,width:n.width,height:n.height,outline:"1px solid gray",fontSize:8,fontFamily:"monospace"}})]},t)}))})}(0,n(604341).exposeDebugValue)("SelectableHoverDebuggerEnabledStore",z)},278014:(e,t,n)=>{"use strict";n.d(t,{ac:()=>C,jU:()=>x,qg:()=>A});var o=()=>n(799954),i=()=>n(700500),r=()=>n(534177),s=()=>n(571400),a=()=>n(519839),l=()=>n(799832),d=()=>n(835066),c=()=>n(444570),u=()=>n(327994),m=()=>n(980914),p=()=>n(508496),f=()=>n(871399),g=()=>n(502438);const v=n(236030).Fh-2,b=2,h=4,y=15,_=24;function C(e){const{marginItemType:t,store:n,nodeRect:o,containerRect:s,environment:a}=e,l=function(e){const{store:t,marginItemType:n}=e,o=t.getType(),r=t.getNavigableAncestorFormat(),s=Boolean(r.page_small_text);return o===i().xd.divider?-6:o===i().xd.header?s?7:10:o===i().xd.subHeader?s?4:6:o===i().xd.collectionView?8:o===i().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),d=function(e,t,n){if(t.isTransclusionType())return e+5;if(w(t,n))return e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===i().xd.button)return e+3;return e}(l,n,a),c=((null==o?void 0:o.top)??0)-((null==s?void 0:s.top)??0)+d,m=a.device.isMobile?20:22,p=(u().jK-m)/2;if("selectable_hover_menu_overlay_item"===t)return c;if("attribution_avatars"===t)return c-p;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return c+p+(n+(t?1:0)-1)*y}(0,r().HB)(t)}function A(e){const{marginItemType:t,store:n,environment:o,nodeRect:i,containerRect:s,selectable:a}=e,d=o.device.isMobile?20:22,u=(0,c().zb)()+b,{maxLeft:m,isBoundedByParentContainer:p}=function(e){const{environment:t,selectable:n,nodeRect:o,store:i}=e,r=(null==o?void 0:o.left)??0;if(i.isCollectionView()||i.isInsideCollection()){const e=(0,l().U)(i);if(e&&"table"!==e.getViewType())return{maxLeft:r,isBoundedByParentContainer:!1}}const s=null==n?void 0:n.getScrollerContext();let a=0;if(s&&s.horizontalScroller){const e=s.horizontalScroller.getClientRect();a=(null==e?void 0:e.left)??0}const d=Math.max(a,r),c=w(i,t)&&k(i)?v:0,u=d-c<=a,m=u?a:d;return{maxLeft:m,isBoundedByParentContainer:u}}({environment:o,selectable:a,nodeRect:i,store:n}),f=S(o,u+_,n,p),g=m-((null==s?void 0:s.left)??0);if("drag_handle"===t)return g-S(o,u,n,p);if("plus_button"===t)return g-f;if("attribution_avatars"===t){return g-M({marginItemType:t,store:n,originalMenuOffset:f,environment:o,isBoundedByParentContainer:p})-h-d}if("presence_avatars"===t){return g-M({marginItemType:t,originalMenuOffset:f,environment:o,store:n,isBoundedByParentContainer:p})-h-d}(0,r().HB)(t)}function x(e){const{marginItemType:t,nodeRect:n,containerRect:o}=e;if("add_comment"===t)return((null==o?void 0:o.right)??0)-((null==n?void 0:n.right)??0);(0,r().HB)(t)}function M(e){var t;const{marginItemType:n,originalMenuOffset:o,environment:i,store:s,isBoundedByParentContainer:a}=e,l=f().default.state,d=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===s.id;switch(n){case"attribution_avatars":return d?o:S(i,0,s,a);case"presence_avatars":return d&&l.currentStore&&!f().default.isRightMarginCommentHovered()?o:S(i,0,s,a);case"drag_handle":case"plus_button":return o;default:(0,r().HB)(n)}}function S(e,t,n,r){if(!r&&k(n)&&w(n,e))return t+v;if(n.isQuoteBlockChild()){return t+3+14+o().nE.paddingLeft}if(p().default.checkGate({gateName:"db_ux_chrome"})&&n.getType()===i().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===i().xd.table){const o=m().Xe({simpleTableStore:n,environment:e,includeInline:!(0,d().dC)(e,n)}),i=n.isImmediateColumnChild();return 0!==o||i?t+8:t}const a=n.getNumberOfDuplicateBlocksAncestors();return a>0?t+s().t*a:t}function w(e,t){var n;if(e.getType()!==i().xd.page&&!e.isPersonProfile())return!1;const o=(0,l().U)(e);if(!o)return!1;return(e.isInsideCollection()||Boolean(null==o||null===(n=o.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,a().f5)({environment:t,collectionContextStore:o})}function k(e){var t;const n=g().default.state.stores.includes(e);return f().default.state.isOpen&&(null===(t=f().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},314660:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});var o=()=>n(246826);function i(e){const{collectionViewStore:t,update:n,transaction:i}=e;o().zv({store:t.getQueryStore(),data:n,transaction:i})}},348501:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,q:()=>a});var o=n(296540),i=()=>n(959013),r=()=>n(59364),s=n(474848);const a=300,l=(0,o.forwardRef)((function(e,t){const l=(0,i().tz)(),d=(0,n(444570).Jj)(),c=(0,n(401497).IS)((t=>({buttonStyle:{display:"flex",alignItems:"center",justifyContent:"center",cursor:e.disableDrag?"pointer":"grab",width:e.width??r().Z,height:e.height??r().S,borderRadius:4,fill:d?t.icon.secondary:t.lightIconColor,...e.style},text:{color:t.text.contrastSecondary}})),[e.disableDrag,e.width,e.height,e.style,d]);const{onClick:u}=e,m=(0,o.useCallback)((e=>{u&&(e.preventDefault(),u(e))}),[u]);return(0,s.jsx)(n(859428).A,{placement:e.tooltipPlacement??n(962730).W.Bottom,delayThreshold:a,renderTooltip:function(){return(0,s.jsxs)("div",{style:{textAlign:"center"},children:[!e.disableDrag&&(0,s.jsx)(i().sA,{defaultMessage:"Drag <medium>to move</medium>",id:"dragHandleButton.dragPrompt.text",values:{medium:e=>(0,s.jsx)("span",{style:c.text,children:e})}}),!e.hideClickMessage&&(0,s.jsx)("div",{children:(0,s.jsx)(i().sA,{defaultMessage:"Click <medium>to open menu</medium>",id:"dragHandleButton.clickPrompt.text",values:{medium:e=>(0,s.jsx)("span",{style:c.text,children:e})}})})]})},render:o=>(0,s.jsx)(n(704152).A,{ref:t,ariaLabel:l.formatMessage({id:"dragHandleButton.ariaLabel",defaultMessage:"Drag"}),role:e.role,style:c.buttonStyle,onClick:e.onClick,onContextMenu:m,disallowTabbing:e.disallowTabbing,...o,children:(0,n(887146).i)({width:14,height:14,...e.iconStyle})})})}))},358063:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>A,yO:()=>S});n(898992),n(672577);var o=n(296540),i=()=>n(484714),r=()=>n(847249),s=()=>n(401497),a=()=>n(206267),l=()=>n(959013),d=()=>n(989423);var c=()=>n(751156),u=()=>n(413962),m=()=>n(87017),p=()=>n(478726),f=()=>n(299545),g=()=>n(695625),v=()=>n(393255),b=()=>n(77246),h=()=>n(871399),y=()=>n(611371),_=n(474848);const C=(0,l().YK)({ariaLabelApple:{id:"block.selectableAddMenu.ariaLabel.apple",defaultMessage:"Click to add below. Option-click to add a block above"},ariaLabelWindows:{id:"block.selectableAddMenu.ariaLabel.windows",defaultMessage:"Click to add below. Alt-click to add a block above"}}),A=(0,o.forwardRef)((function(e,t){let{store:o,nodeRect:a,containerRect:d,selectable:c}=e;const u=(0,l().tz)(),m=(0,s().DP)(),p=(0,i().v3)(),f=(0,i().WS)(),g=(0,n(792485).S)(),v=(0,r().K8)((()=>{var e;return"editor"===o.getRole()||"read_and_write"===o.getRole()||"edit"===(null==g||null===(e=g.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==g?void 0:g.publicEditModeStore,o]),h=(0,r().K8)((()=>{var e,t;return"comment_only"===(null===(e=o.getNavigableBlockStore({skipCurrent:!0}))||void 0===e?void 0:e.getRole())||"comment"===(null==g||null===(t=g.publicEditModeStore.state)||void 0===t?void 0:t.permission)}),[null==g?void 0:g.publicEditModeStore,o]),A=(0,r().K8)((()=>"suggest"===b().Uv.getMode(o)),[o]),w=(0,r().K8)((()=>o.isFirstBlockInCalloutV2Block()),[o]),k=(0,r().K8)((()=>{var e;const t="external_object_instance_page"===o.getType(),i=g&&(0,n(696746).Nh)(g.pageStore.id);return!f&&(!o.isNavigableAncestorNonEditableState()||"collection"===(null===(e=o.getParentStore())||void 0===e?void 0:e.table))&&(v||h&&A)&&!t&&!o.isNavigableAncestorExternallyImportedPage()&&!i&&!w&&!o.isPersonProfile()}),[h,v,w,f,A,g,o]),j=(0,r().K8)((()=>{var e;return null===(e=o.getSpaceStore())||void 0===e?void 0:e.getFreezeSettings()}),[o]),T=(0,n(973454).p)(j);return!k||"active"===T?null:(0,_.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,_.jsx)(M,{}),render:e=>(0,_.jsx)(n(704152).A,{ref:t,disallowTabbing:!0,onClick:()=>{if(!(0,y().EF)(p))return(0,y().QY)(p);S(p,o,(0,n(281322).r)().option?"above":"below")},style:x(o,p,m,a,d,c),ariaLabel:u.formatMessage(p.device.isApple?C.ariaLabelApple:C.ariaLabelWindows),...e,children:(0,n(689094).W)({width:16})})})}));function x(e,t,o,i,r,s){const a=(0,n(278014).qg)({marginItemType:"plus_button",store:e,environment:t,nodeRect:i,containerRect:r,selectable:s});return{display:"flex",alignItems:"center",justifyContent:"center",fill:o.lightIconColor,position:"absolute",left:a,width:24,height:24,borderRadius:4,pointerEvents:"auto",cursor:"-webkit-grab"}}function M(){const e=(0,s().DP)(),t=(0,i().v3)(),n={color:e.text.contrastSecondary};return(0,_.jsxs)("div",{style:{textAlign:"center"},children:[(0,_.jsx)(l().sA,{defaultMessage:"Click <mediumcolor>to add below</mediumcolor>",id:"block.selectableAddMenu.tooltip.addBlockBelow",values:{mediumcolor:e=>(0,_.jsx)("span",{style:n,children:e})}}),(0,_.jsx)("div",{children:t.device.isApple?(0,_.jsx)(l().sA,{defaultMessage:"Option-click <mediumcolor>to add above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove",values:{mediumcolor:e=>(0,_.jsx)("span",{style:n,children:e})}}):(0,_.jsx)(l().sA,{defaultMessage:"Alt-click <mediumcolor>to add a block above</mediumcolor>",id:"block.selectableAddMenu.tooltip.addAbove.windows",values:{mediumcolor:e=>(0,_.jsx)("span",{style:n,children:e})}})})]})}function S(e,t,n){const o="above"===n,i=b().Uv.getMode(t),r=g().T.findSelectablesFromStore(t).find((e=>Boolean(e.props.onInsertRowBelow)));(0,p().fc)(t)||(o?r&&r.props.onInsertRowAbove?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowAbove&&r.props.onInsertRowAbove({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addAbove",canUndo:!0,perform:n=>{const o=m().insertTextAbove({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}):f().wm(t)?v().zz({environment:e,blockStore:t,insertedTextBlockLocation:"none"}):r&&r.props.onInsertRowBelow?c().createAndCommit({userAction:"SelectableAddMenu.handleClick.onInsertRowBelow",environment:e,canUndo:!0,perform:e=>{r.props.onInsertRowBelow&&r.props.onInsertRowBelow({transaction:e})}}):c().createAndCommit({environment:e,userAction:"SelectableAddMenu.handleClick.addBelow",canUndo:!0,perform:n=>{const o=m().insertTextBelow({environment:e,blocks:[t],transaction:n,skipAnalytics:!0});if("suggest"===i&&o){const t=u().RR(e,n,o);u().tM(n,o,{id:a().JW(),type:"insert",discussionId:t.id}),u().c3({environment:e,transaction:n,discussionStore:t,addModifiedBlockIdsAfter:[o.id]})}}}),function(e){d().vd(e,"click_add_menu")}(e),h().default.reset())}},390527:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>I,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>A,MAX_RECURRENCE_INTERVAL:()=>b,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>h,RRULE_WEEKDAYS_MAP:()=>v,adjustedStartDateIfPossible:()=>S,areRecurrenceSchedulesEqual:()=>H,convertFromUnpersistedRecurrenceConfig:()=>D,convertToUnpersistedRecurrenceConfig:()=>B,getFormattedEndCondition:()=>R,getFormattedNextRecurrenceTime:()=>T,getNewEndTimestamp:()=>P,getNextDateUtc:()=>j,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>k,isValidRecurrenceInterval:()=>y,isValidRecurrenceNumberOfRuns:()=>_,rruleFromRecurrence:()=>C,templateAncestorsViolateRecurrenceNesting:()=>M});n(898992),n(354520),n(581454);var o=()=>n(244641);n(944114);function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const r=[];for(const s of e)r.push(...i(n[0],...n.slice(1)).map((e=>[s,...e])));return r}var r=()=>n(496603),s=()=>n(534177),a=()=>n(720665),l=()=>n(597777),d=()=>n(869190),c=()=>n(416504),u=()=>n(402390);class m extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var p=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12â€“3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),g={day:m.DAILY,week:m.WEEKLY,month:m.MONTHLY,year:m.YEARLY},v={MO:m.MO,TU:m.TU,WE:m.WE,TH:m.TH,FR:m.FR,SA:m.SA,SU:m.SU},b=99,h=999;function y(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=b}function _(e){return(0,a().Et)(e)&&Number.isInteger(e)&&e>0&&e<=h}function C(e){const{start_date:t,frequency:n,interval:o,weekdays:r,timezone:a,hour:d,minute:c}=e,u="week"===n&&r?r.map((e=>v[e])):void 0,p={};return(0,s().O9)(e.end_condition)&&("date"===e.end_condition.type?p.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?p.count=e.end_condition.number_of_occurrences:(0,s().HB)(e.end_condition)),"month"===e.frequency&&(0,s().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?p.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?p.byweekday=i(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return v[t].nth(n)})):(0,s().HB)(e.monthly_restriction)),new m({freq:g[n],dtstart:(0,l().eU)(t),interval:o,byweekday:u,tzid:a,byhour:d??0,byminute:c??0,bysecond:0,...p})}const A=1,x=1;function M(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,i=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,r=o>A,s=n.length>=x;return{violatesConstraint:r||s,templateNestingExceedsMaxDepth:r,ancestorHasDailyTemplate:s,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:i}}function S(e){var t;const{recurrence:n,afterDate:i}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=i)return n;let r=o().c9.fromMillis(n.start_date,{zone:"utc"});const s=o().c9.fromMillis(i,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(s.diff(r,"years").years/n.interval);r=r.plus({years:e*n.interval});break}case"month":{const e=Math.floor(s.diff(r,"months").months/n.interval);r=r.plus({months:e*n.interval});break}case"week":{const e=Math.floor(s.diff(r,"weeks").weeks/n.interval);r=r.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(s.diff(r,"days").days/n.interval);r=r.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(r.toMillis())}}function w(e){const{recurrence:t,afterDate:n}=e;if((0,p().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=C(S({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function k(e){return 0===e.hour||1===e.hour||2===e.hour}function j(e){return C(e).after((0,l().eU)((0,l().Rz)()))||void 0}function T(e){const{recurrence:t,intl:n}=e,i=j(D(t));if(!i)return;const r=k(t),s=o().c9.fromJSDate(i).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),a=(0,d().Yq)({date:s,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(r)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:a});{let e=s.toLocaleString(o().c9.TIME_SIMPLE);return t.timezone!==(0,c().P)()&&(e+=` ${s.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:a,time:e})}}function R(e,t){return(0,s().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:o().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,s().HB)(e):t.formatMessage(f.noEndCondition)}const I=100;function B(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,s().HB)(e.end_condition):void 0}}function P(e,t,n){return e.plus(n-t)}function E(e,t){const n=o().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function D(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?E(e,e.end_condition):(0,s().HB)(e.end_condition):void 0}}function H(e,t){const n=r().fN(e,(e=>void 0!==e)),o=r().fN(t,(e=>void 0!==e));return r().n4(n,o)}},409268:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});n(898992),n(672577);var o=n.n(n(791611)),i=()=>n(489348);function r(e){const t=i().A.find((t=>t.store===e));if(t){const e=t.getContentWrapEl();if(e)return o()(e.innerText)}return 0}},413267:(e,t,n)=>{"use strict";n.d(t,{b:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,o.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},424139:(e,t,n)=>{"use strict";n.r(t),n.d(t,{emojiFaceIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M8.045 11.706a.625.625 0 0 0-1.036.698A3.6 3.6 0 0 0 10.005 14c1.245 0 2.35-.637 2.996-1.596a.625.625 0 0 0-1.036-.698 2.37 2.37 0 0 1-1.96 1.044 2.36 2.36 0 0 1-1.96-1.044m-.68-2.041c.49 0 .88-.46.88-1.02s-.39-1.02-.88-1.02-.88.46-.88 1.02.39 1.02.88 1.02m6.15-1.02c0 .56-.39 1.02-.88 1.02s-.88-.46-.88-1.02.39-1.02.88-1.02.88.46.88 1.02"}),(0,o.jsx)("path",{d:"M10 2.375a7.625 7.625 0 1 0 0 15.25 7.625 7.625 0 0 0 0-15.25M3.625 10a6.375 6.375 0 1 1 12.75 0 6.375 6.375 0 0 1-12.75 0"})]})},r=(0,n(340498).wt)("emojiFace",i)},440882:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("commentAdd",{viewBox:"0 0 16 15",svg:(0,o.jsx)("path",{d:"M4.73926 14.6865C4.46582 14.6865 4.25163 14.5977 4.09668 14.4199C3.94629 14.2422 3.87109 14.0007 3.87109 13.6953V12.0137H3.50195C2.84115 12.0137 2.27376 11.8861 1.7998 11.6309C1.3304 11.3757 0.968099 11.0111 0.712891 10.5371C0.46224 10.0586 0.336914 9.47982 0.336914 8.80078V3.49609C0.336914 2.81706 0.46224 2.24056 0.712891 1.7666C0.963542 1.28809 1.32585 0.921224 1.7998 0.666016C2.27832 0.410807 2.86165 0.283203 3.5498 0.283203H12.4434C13.127 0.283203 13.708 0.410807 14.1865 0.666016C14.665 0.921224 15.0296 1.28809 15.2803 1.7666C15.5309 2.24056 15.6562 2.81706 15.6562 3.49609V8.80078C15.6562 9.47982 15.5309 10.0586 15.2803 10.5371C15.0296 11.0111 14.665 11.3757 14.1865 11.6309C13.708 11.8861 13.127 12.0137 12.4434 12.0137H8.21875L5.88086 14.085C5.64844 14.29 5.44792 14.4404 5.2793 14.5361C5.11068 14.6364 4.93066 14.6865 4.73926 14.6865ZM5.07422 13.1758L7.24121 11.0293C7.38704 10.8835 7.52148 10.7878 7.64453 10.7422C7.77214 10.6921 7.94076 10.667 8.15039 10.667H12.4023C13.0495 10.667 13.528 10.5075 13.8379 10.1885C14.1523 9.86491 14.3096 9.38639 14.3096 8.75293V3.53711C14.3096 2.9082 14.1523 2.43424 13.8379 2.11523C13.528 1.79167 13.0495 1.62988 12.4023 1.62988H3.58398C2.94141 1.62988 2.46289 1.79167 2.14844 2.11523C1.83854 2.43424 1.68359 2.9082 1.68359 3.53711V8.75293C1.68359 9.38639 1.83854 9.86491 2.14844 10.1885C2.46289 10.5075 2.94141 10.667 3.58398 10.667H4.52051C4.71191 10.667 4.85091 10.7103 4.9375 10.7969C5.02865 10.8789 5.07422 11.0225 5.07422 11.2275V13.1758ZM4.8418 6.14844C4.8418 5.95703 4.90104 5.80208 5.01953 5.68359C5.13802 5.56055 5.29525 5.49902 5.49121 5.49902H7.36426V3.62598C7.36426 3.43913 7.4235 3.28646 7.54199 3.16797C7.66048 3.04492 7.81087 2.9834 7.99316 2.9834C8.18457 2.9834 8.33952 3.04264 8.45801 3.16113C8.58105 3.27962 8.64258 3.43457 8.64258 3.62598V5.49902H10.5156C10.707 5.49902 10.862 5.56055 10.9805 5.68359C11.099 5.80208 11.1582 5.95703 11.1582 6.14844C11.1582 6.33073 11.099 6.48112 10.9805 6.59961C10.862 6.7181 10.707 6.77734 10.5156 6.77734H8.64258V8.65723C8.64258 8.84408 8.58105 8.99902 8.45801 9.12207C8.33952 9.24056 8.18457 9.2998 7.99316 9.2998C7.81087 9.2998 7.66048 9.24056 7.54199 9.12207C7.4235 8.99902 7.36426 8.84408 7.36426 8.65723V6.77734H5.49121C5.2998 6.77734 5.14258 6.7181 5.01953 6.59961C4.90104 6.48112 4.8418 6.33073 4.8418 6.14844Z"})})},519143:(e,t,n)=>{"use strict";n.d(t,{D:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m3.625 11.151 1.187-1.187a.625.625 0 1 1 .884.884l-2.254 2.254a.625.625 0 0 1-.884 0L.304 10.848a.625.625 0 0 1 .884-.884l1.187 1.187V10a7.625 7.625 0 0 1 12.814-5.587.625.625 0 1 1-.851.915A6.375 6.375 0 0 0 3.625 10zm14-2.302 1.187 1.187a.625.625 0 1 0 .884-.884l-2.254-2.254a.625.625 0 0 0-.884 0l-2.254 2.254a.625.625 0 1 0 .884.884l1.187-1.187V10a6.375 6.375 0 0 1-10.713 4.672.625.625 0 0 0-.85.915A7.625 7.625 0 0 0 17.625 10z"})},i=(0,n(340498).wt)("arrowCircleLoop",o)},536583:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M9.294 2.325h3.103c.484 0 .948.192 1.29.534l2.897 2.898c.342.342.535.806.535 1.29v5.903a1.825 1.825 0 0 1-1.825 1.825H12.53v1.075a1.825 1.825 0 0 1-1.825 1.825h-6A1.825 1.825 0 0 1 2.88 15.85v-8.8c0-1.008.817-1.825 1.825-1.825H7.47V4.15c0-1.008.817-1.825 1.825-1.825M9.1 5.76l2.897 2.897c.342.342.534.806.534 1.29v3.578h2.763a.575.575 0 0 0 .575-.575V7.3h-1.975a1.75 1.75 0 0 1-1.75-1.75V3.575h-2.85a.575.575 0 0 0-.575.575v1.318q.208.12.38.292m6.16.44-2.016-2.016V5.55c0 .359.29.65.65.65zm-10.554.275a.575.575 0 0 0-.575.575v8.8c0 .318.258.575.575.575h6a.575.575 0 0 0 .575-.575V10.2H9.306a1.75 1.75 0 0 1-1.75-1.75V6.475zm3.95.609V8.45c0 .359.291.65.65.65h1.366z"})},i=(0,n(340498).wt)("docOnDoc",o)},571400:(e,t,n)=>{"use strict";n.d(t,{t:()=>o});const o=35},583690:(e,t,n)=>{"use strict";n.d(t,{AC:()=>u,I2:()=>d,YC:()=>c});n(296540);var o=()=>n(401497),i=()=>n(212050),r=()=>n(413267),s=()=>n(959013),a=n(474848);function l(e){const{enabled:t,labelIfEnabled:n,labelIfDisabled:i}=e,r=(0,o().IS)((e=>({container:{color:t?e.text.secondary:e.text.tertiary}})),[t]);return(0,a.jsxs)("div",{style:r.container,children:[m(t)," ",t?n:i]})}function d(e){const t="none"!==e;return[(0,a.jsx)(l,{enabled:t&&e.read_content,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedAccess.readContent.enabled",defaultMessage:"Can read content."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.readContent.disabled",defaultMessage:"Cannot read content."})},"read_content"),(0,a.jsx)(l,{enabled:t&&e.insert_content,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.enabled",defaultMessage:"Can insert content."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.insertContent.disabled",defaultMessage:"Cannot insert content."})},"insert_content"),(0,a.jsx)(l,{enabled:t&&e.update_content,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.enabled",defaultMessage:"Can update content."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.mixedaccess.updateContent.disabled",defaultMessage:"Cannot update content."})},"update_content"),(0,a.jsx)(l,{enabled:t&&e.insert_comment,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.enabled",defaultMessage:"Can comment."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.insertComment.disabled",defaultMessage:"Cannot comment."})},"insert_comment"),(0,a.jsx)(l,{enabled:t&&e.read_comment,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.enabled",defaultMessage:"Can read comments."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.readComment.disabled",defaultMessage:"Cannot read comments."})},"read_comment")]}function c(e){return[(0,a.jsx)(l,{enabled:e.read_user_without_email,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.enabled",defaultMessage:"Can view users."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUsers.disabled",defaultMessage:"Cannot view users."})},"read_user_without_email"),(0,a.jsx)(l,{enabled:e.read_user_with_email,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.enabled",defaultMessage:"Can view user email addresses."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.userAccess.readUserEmailAddresses.disabled",defaultMessage:"Cannot view user email addresses."})},"read_user_with_email")]}function u(e){return[(0,a.jsx)(l,{enabled:e.link_preview,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.enabled",defaultMessage:"Can preview links."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.linkPreview.disabled",defaultMessage:"Cannot preview links."})},"link_preview"),(0,a.jsx)(l,{enabled:e.synced_database,labelIfEnabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.enabled",defaultMessage:"Can sync databases."}),labelIfDisabled:(0,a.jsx)(s().sA,{id:"capabilitiesTooltip.syncedDatabase.disabled",defaultMessage:"Cannot sync databases."})},"synced_database")]}function m(e){const t={width:12,display:"inline",verticalAlign:"middle"};return e?(0,r().b)(t):(0,i().u)(t)}},609316:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const o=(0,n(583835).Dv)("importFile")},654734:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var o=n(296540),i=()=>n(869190),r=()=>n(604995),s=()=>n(416504),a=n(474848);const l=function(e){const t=(0,n(959013).tz)(),l=(0,n(401497).DP)(),u=(0,n(396182).I)(),m=(0,o.useRef)(),p=(0,o.useCallback)((()=>{const t=e.value;if(!t)return;const o=r().q8(t,(0,s().P)());if(!o)return;const i=o.valueOf(),a=i-Date.now();a<0||a>n(720665).nD||m.current&&m.current.timestamp===i||(m.current&&clearTimeout(m.current.timer),m.current={timestamp:i,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),a)})}),[u,e.value]),f=(0,o.useCallback)((()=>{m.current&&(clearTimeout(m.current.timer),m.current=void 0)}),[]);(0,o.useEffect)((()=>{p()}),[p]),(0,o.useEffect)((()=>()=>{f()}),[f]);const{value:g,withComma:v}=e,b=(0,n(847249).K8)((()=>g?(0,i().ZF)({value:g,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,s().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,g]);if(!g)return null;const h=r().AA(g,(0,s().P)(),n(662303).locale);let y;if(g.reminder){const e=r().Zs(g,(0,s().P)());y=e?{color:l.errorText}:{color:n(100622).Ay.blue}}const _=(0,a.jsxs)(a.Fragment,{children:[b,g.reminder&&(0,n(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),v?", ":null]});return e.disableTooltip?(0,a.jsx)("div",{className:e.className,style:{...e.style,...y},children:_}):(0,a.jsx)(n(859428).A,{renderTooltip:()=>(0,a.jsxs)(a.Fragment,{children:[e.tooltipHeader,(0,a.jsxs)("div",{style:c(l,e.tooltipHeader),children:[d(h.start),h.end?` â†’ ${d(h.end)}`:""]})]}),render:t=>(0,a.jsx)("div",{className:e.className,style:{...e.style,...y},...t,children:_}),placement:e.tooltipPlacement})};function d(e){return(0,i().eV)({value:e,preset:"medium"})}function c(e,t){return t?{color:e.text.contrastSecondary}:{}}},701751:(e,t,n)=>{"use strict";n.d(t,{p:()=>r});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M10.55 12.808a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 1 0 1.1 0z"}),(0,o.jsx)("path",{d:"M15.4 1.95a3.48 3.48 0 0 0-3.48 3.48v1.92H6.4a2.425 2.425 0 0 0-2.425 2.425v5.4A2.425 2.425 0 0 0 6.4 17.6h7.2a2.425 2.425 0 0 0 2.425-2.425v-5.4A2.425 2.425 0 0 0 13.6 7.35h-.43V5.43a2.23 2.23 0 1 1 4.46 0v2.095a.625.625 0 1 0 1.25 0V5.43a3.48 3.48 0 0 0-3.48-3.48M5.225 9.775c0-.649.526-1.175 1.175-1.175h7.2c.649 0 1.175.526 1.175 1.175v5.4c0 .649-.526 1.175-1.175 1.175H6.4a1.175 1.175 0 0 1-1.175-1.175z"})]})},r=(0,n(340498).wt)("lockOpen",i)},704907:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});var o=n(296540),i=()=>n(847249),r=()=>n(433847),s=()=>n(959013),a=()=>n(901389),l=()=>n(579627),d=()=>n(247123),c=()=>n(878377),u=()=>n(108944),m=()=>n(125565),p=n(474848);const f=function(e){let{store:t}=e;const f=(0,n(401497).DP)(),g=(0,n(484714).v3)(),v=(0,o.useMemo)((()=>({environment:g,blocks:[t],publicEditMode:void 0})),[g,t]),b=(0,i().K8)((()=>c().Uo6([c().Ezz,c().AU6(c().p2L)])(v)),[v]),h=(0,i().K8)((()=>c().Uo6([c()._mr,c().AU6(c().Km9)])(v)),[v]);if(b){const{device:e}=g;return(0,p.jsx)("div",{style:{backgroundColor:f.sidebarSecondaryBackground,boxShadow:`0 -1px 0 ${f.regularDividerColor}`,marginTop:e.isMobile?28:1},children:(0,p.jsxs)(n(704152).A,{disabled:!h,style:{padding:12},onClick:()=>async function(e,t){if(!e.isDefined())return;const n=e.getPermissionItems(),o=u().KA(e),i=o?r().wD(u().E(o)):[],c=r().Cd(e.getModel(),n,i),m={type:"restore",permissionChanges:c},{accept:f}=await a().Gh({message:(0,d().r6)(m),acceptLabel:(0,d().QU)(m),cancelLabel:(0,p.jsx)(s().sA,{id:"restrictedPermissionConfirmationModal.actionButton.close",defaultMessage:"Close"}),description:(0,p.jsx)(d().f2,{openState:m})});f&&l().YD({environment:t,store:e})}(t,g),children:[(0,p.jsx)(m().A,{isMultiline:!0,isSmall:!0,children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.label",defaultMessage:"You donâ€™t have permission to edit this block because it is restricted."})}),h&&(0,p.jsx)(m().A,{style:{marginTop:6,fontWeight:n(284371).Wy.semibold},children:(0,p.jsx)(s().sA,{id:"blockMenuRestrictedMessage.adminRestoreAction.label",defaultMessage:"Restore permissions"})})]})})}return null}},706965:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});n(296540);var o=()=>n(847249),i=()=>n(401497),r=()=>n(764880),s=()=>n(310442),a=()=>n(824862),l=()=>n(798880),d=()=>n(959013),c=()=>n(534177),u=()=>n(284371),m=()=>n(43972),p=()=>n(972435),f=()=>n(907514),g=()=>n(646736),v=n(474848);function b(e){const{store:t}=e,n=(0,i().DP)(),b=(0,o().K8)((()=>t.getCreatedTime()),[t]),h=(0,o().K8)((()=>t.getLastEditedTime()),[t]),y=(0,o().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),_=(0,o().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,r().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),C=(0,o().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==y?void 0:y.asActor;if(!n)return!1;const o=n.table;switch(o){case l().oo:return(0,g().dp)(e,n.id).isMember();case a().GP:return(0,g().Ts)(e,n.id).isMember();case s().yj:return!1;default:(0,c().HB)(o)}}),[t,y]),A=b?(0,f().nl)(b,{useCompactFormat:!0,useLowercase:!0}):"",x=h?(0,f().nl)(h,{useLowercase:!0,useCompactFormat:!0}):"";if(!(h?(0,f().nl)(h,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const M={display:"flex",gap:4,color:n.text.contrastSecondary,height:16,fontSize:12},S={size:14,style:{marginRight:2}},w=p().A.getIntl();return(0,v.jsxs)(v.Fragment,{children:[(e=>{let t;if(null!=_&&_.asActor)t=(0,v.jsx)(d().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:_,...S}),(0,r().lR)(w,_)]})}),timestamp:x}});else{if(!x)return;o=x,t=(0,v.jsx)(d().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:o}})}var o;return(0,v.jsx)("div",{style:{...M,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=y&&y.asActor&&C)t=(0,v.jsx)(d().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,v.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,v.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,m().w)({actor:y,...S}),(0,r().lR)(w,y)]})}),timestamp:A}});else{if(!A)return;t=(0,v.jsx)(d().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:A}})}return(0,v.jsx)("div",{style:{...M,marginBottom:4},children:t})})(e.compactFormat)]})}},715011:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(296540),i=()=>n(959013),r=()=>n(409268),s=n(474848);function a(e){const t=(0,o.useMemo)((()=>(0,r().s)(e.store)),[e.store]);return(0,s.jsx)(i().sA,{id:"pageWordCount.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:t}})}},725649:(e,t,n)=>{"use strict";function o(e){return!(!e||"askUserToPick"in e)}function i(e){if(!e||!("askUserToPick"in e))return e}function r(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>i,K$:()=>o,j6:()=>r})},737517:(e,t,n)=>{"use strict";n.d(t,{A:()=>S});var o=n(296540),i=()=>n(484714),r=()=>n(847249);function s(e,t){n(989423).vd(e,"click_selection_menu",{block_type:t.blockType})}var a=()=>n(406699),l=()=>n(574012),d=()=>n(871399),c=()=>n(444570),u=()=>n(327994),m=(n(898992),n(354520),()=>n(959013)),p=()=>n(290625),f=()=>n(419357),g=()=>n(89924),v=()=>n(962036),b=()=>n(722872),h=()=>n(836251),y=()=>n(502438),_=n(474848);const C=(0,m().YK)({filterActions:{defaultMessage:"Search actionsâ€¦",id:"selectableHoverMenu.filterActions.placeholder"}});function A(e){const{hasEditorPermissions:t,isWorkspaceAdmin:s,store:a,onDismiss:l,containerRef:d,query:c,setQuery:u}=e,m=(0,i().v3)(),f=(0,i().WS)(),g=(0,r().K8)((()=>y().default.state.stores),[]),v=(0,r().K8)((()=>{var e;return{environment:m,blocks:y().default.state.stores.length?y().default.state.stores:[a],originRect:null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect(),publicEditMode:void 0,analyticsFrom:"selection_menu"}}),[m,a,d]),h=(0,r().K8)((()=>a.isNavigableAncestorNonEditableState()),[a]),C=(0,r().K8)((()=>(0,n(478726).yU)(a)),[a]),[A,S]=(0,n(857437).$)(),w=(0,o.useCallback)((e=>{const t=g[0];if(t){const o=t.getType();if(o){const i=(0,n(799832).U)(t),r=(0,n(476492).sl)(i)||{};(0,n(741496).N)(m,{analyticsName:e.analyticsName,action_type:e.analyticsActionType,from:"selection_menu",block_id:t.id,block_type:o,is_toggleable:(0,n(494043).Yt)(o,t.getFormat()),parent_collection_id:t.getParentCollectionIdUpToTwoLevels(),...r})}}e.closeParentMenu&&l()}),[m,l,g]),k=(0,r().K8)((()=>a.isCollectionView()),[a]),j=(0,n(891078).i0)(a),T=!f&&t&&!h&&!C&&!j,R=T&&(0,_.jsx)(x,{filter:c,setQuery:u,inputComboboxProps:A});let I;I=f?{menuType:b().gu.ActionSheet,header:R}:{menuType:b().gu.Popup,width:265,header:R};const B=(0,r().K8)((()=>void 0!==a.getAssociatedCollectionStore()),[a]);return(0,_.jsxs)(n(928600).A,{...I,children:[(0,_.jsx)(n(452558).A,{filter:c,initialFocus:c?0:void 0,sections:B?p().SH:p().JS,context:v,onAccept:w,comboboxProps:T?S:void 0,shouldShowBlockTypeTitle:!0}),!c&&(t||s)&&(0,_.jsx)(n(819493).$,{store:a,wordCountStores:g,isPageMoreButton:!1,hideTopBorder:!1}),!c&&(0,_.jsx)(n(704907).A,{store:a}),!c&&k&&(0,_.jsx)(M,{})]})}function x(e){const{filter:t,setQuery:n,inputComboboxProps:o}=e,r=(0,i().Y0)(),s=(0,m().tz)();return(0,_.jsx)(g().A,{isInput:!0,children:(0,_.jsx)(f().Ay,{value:t,onChange:e=>n(e.target.value),focus:!r.isMobile||void 0,focusAfterAnimation:!0,placeholder:s.formatMessage(C.filterActions),preventCaptureDeleteWhenEmpty:!0,preventCaptureClipboardShortcuts:!0,...o})})}function M(){return(0,_.jsx)(g().A,{topBorder:!0,children:(0,_.jsx)(v().A,{title:(0,_.jsx)(m().sA,{defaultMessage:"Learn about databases",id:"blocks.hoverBlockMenu.collectionHelpButton"}),href:(0,h().xS)("guides.database"),analyticsFrom:"selectable_hover_menu"})})}const S=(0,o.forwardRef)((function(e,t){const{selectable:m,store:p,disableDrag:f,isWorkspaceAdmin:g,nodeRect:v,containerRect:b}=e,h=(0,i().v3)(),y=(0,i().WS)(),C=(0,n(792485).S)(),[x,M]=(0,o.useState)(!1),S=(0,o.useRef)(null),w=(0,c().Jj)(),k=(0,r().K8)((()=>(0,c().zb)()),[]),j=u().jK,T=(0,r().K8)((()=>(0,n(278014).qg)({marginItemType:"drag_handle",store:p,environment:h,nodeRect:v,containerRect:b,selectable:m})),[p,h,v,b,m]),R=(0,r().K8)((()=>p.isNavigableAncestorNonEditableState()&&!p.isInsideCollection()),[p]),I=(0,r().K8)((()=>{var e;return"editor"===p.getRole()||"read_and_write"===p.getRole()||"edit"===(null==C||null===(e=C.publicEditModeStore.state)||void 0===e?void 0:e.permission)}),[null==C?void 0:C.publicEditModeStore,p]),B=(0,r().K8)((()=>"suggest"===n(77246).Uv.getMode(p)),[p]),P=!f&&I&&!R&&!B,E=(0,n(401497).IS)((e=>({div:{position:"absolute",left:T,width:k,height:j,pointerEvents:"auto",cursor:P?"-webkit-grab":void 0},popup:{width:265,overflow:"hidden"},iconStyle:w?(0,u().Cz)(e,x):{}})),[T,k,j,P,w,x]),[D,H]=(0,o.useState)(""),z=(0,r().K8)((()=>{const e=d().default.state;return e.isOpen&&e.menuIsOpen&&e.currentStore===p}),[p]);(0,o.useEffect)((()=>()=>{z&&d().default.reset()}),[]);const F=(0,o.useCallback)((()=>{const e=d().default.state,t=l().A.state;if(e.isOpen){H(""),y&&t.phase===l().i.shown?l().A.onHide((()=>d().default.setState({...e,menuIsOpen:!0}))):d().default.setState({...e,menuIsOpen:!0}),n(778417).Lt({environment:h,store:p});const o=p.getType();o&&s(h,{blockType:o})}}),[h,y,p]),V=(0,o.useCallback)((()=>d().default.reset()),[]);return(0,r().K8)((()=>{if(!m||!m.props.shouldShowHoverMenu||y)return!1;const e=p.getType();return!e||!["column_list"].includes(e)}),[p,m,y])?(0,_.jsx)("div",{style:E.div,ref:S,children:(0,_.jsx)(n(897119).Ay,{popupType:y?a().z7.SlideUp:a().z7.Popup,open:z,placementToOrigin:a().sx.Left,alignmentToOrigin:a().yP.Center,onDismiss:V,originGap:5,forceInitialInbound:!0,style:E.popup,render:()=>(0,_.jsx)(A,{hasEditorPermissions:I,isWorkspaceAdmin:g,store:p,onDismiss:V,containerRef:S,query:D,setQuery:H}),origin:(0,_.jsx)(n(199896).A,{className:n(38337).LpV,store:p,isHoverMenu:!0,canDrag:P,canSelect:!1,analyticsName:"selection_menu",disableForceTouch:!0,disableHorizontalDragEdgeScroll:!0,onMouseEnter:()=>{M(!0)},onMouseLeave:()=>{M(!1)},children:(0,_.jsx)(n(348501).A,{ref:t,width:k,height:j,disallowTabbing:!0,onClick:F,disableDrag:!P,iconStyle:E.iconStyle})}),trapFocus:z})}):null}))},742478:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});n(898992),n(354520),n(737550);var o=n(296540),i=()=>n(484714),r=()=>n(847249),s=()=>n(959013),a=()=>n(555776),l=()=>n(24157),d=n(474848);const c=(0,o.forwardRef)((function(e,t){const c=(0,i().v3)(),u=(0,i().Y0)(),m=(0,s().tz)(),{selectable:p,store:f,containerRect:g}=e,[v,b]=(0,o.useState)(!1),h=(0,n(444570).Jj)(),y=(0,r().K8)((()=>f.isFirstBlockInCalloutV2Block()),[f]),_=(0,r().K8)((()=>{var e;const t=Boolean(n(94953).A.getFirstSelectedDiscussionId()||n(372154).A.getFramePageFirstSelectedDiscussionId()||a().A.state.isActivelyComposing),o=f.getDiscussionStores().filter((e=>!e.getResolved())).length>0,i=n(116008).A.getBlockStore()===f,r=f.getType(),s="toggle"===r&&!n(468484).A.isOpen(f.id)&&(0,n(299545).O3)(f,{recursivelyLoadAllDiscussions:!0}).length>0;if(!p||u.isMobile||!p.props.shouldShowCommentMenu||f.isNavigableAncestorNonCommentableState()||t||r&&["video","image"].includes(r)||f.isEmptyTitle()||o||i||s||y)return!1;const d="empty"!==l().default.state.mode&&l().default.state.multiSelection;if(d&&(0,n(231722).kM)(d))return!0;return!(d?(null===(e=(0,n(962845).ZS)({multiSelection:d,filterCommonAncestors:!1,focus:"end"}))||void 0===e?void 0:e.stores)??[]:[]).some((e=>e.id===f.id))}),[f,p,u.isMobile,y]),C=(0,r().K8)((()=>{var e;const t=n(186445).ZT(c),o=null==t||null===(e=t.getContentWrapEl())||void 0===e?void 0:e.getBoundingClientRect();return(0,n(278014).jU)({marginItemType:"add_comment",nodeRect:o,containerRect:g})}),[c,g]),A=(0,n(401497).IS)((e=>({container:{position:"relative",right:C},iconStyle:{marginLeft:.65,...h?(0,n(327994).Cz)(e,v):{}},iconButton:{paddingLeft:6,paddingRight:6,width:"unset"}})),[h,v,C]),x=(0,o.useCallback)((async()=>{if(f.isType(n(700500).uP)){const e=f.getBlockTitleStore(),t=n(871399).default.state,o=t.isOpen?t.selectableBoundingRect:void 0,i=n(792002).mk(e);if(i){const t=await n(862292).T.formulas.load();n(441467).hN({environment:c,blockStore:f,multiSelection:{start:{index:i.startIndex,store:e},end:{index:i.endIndex,store:e}},rect:o,from:"right_margin",formulasModule:t})}}else(0,n(730307).l)({environment:c,blockStore:f,from:"right_margin"})}),[c,f]),M=(0,o.useCallback)((e=>{b(e),e?a().A.setHoverWithSource("right_margin_button"):a().A.resetHoverSource("right_margin_button")}),[]),S=(0,o.useCallback)((()=>M(!0)),[M]),w=(0,o.useCallback)((()=>M(!1)),[M]);return _?(0,d.jsx)("div",{style:A.container,onMouseDown:n(753199).tr,children:(0,d.jsx)(n(859428).A,{placement:n(962730).W.Bottom,delayThreshold:300,renderTooltip:()=>(0,d.jsx)(s().sA,{defaultMessage:"Comment",id:"selectableCommentMenu.commentPrompt.tooltip"}),render:e=>(0,d.jsx)("div",{onMouseOver:S,onMouseLeave:w,children:(0,d.jsx)(n(285790).A,{ref:t,ariaLabel:m.formatMessage({id:"selectableCommentMenu.iconButton",defaultMessage:"Comment"}),disallowTabbing:!0,icon:n(440882).w,onClick:x,style:A.iconButton,iconStyle:A.iconStyle,...e})})})}):null}))},751109:(e,t,n)=>{"use strict";n.d(t,{z:()=>i});n(296540);var o=n(474848);const i=(0,n(340498).wt)("slackLogo",{viewBox:"0 0 16 16",svg:(0,o.jsxs)("g",{children:[(0,o.jsx)("path",{d:"M1.68078 11.7915C2.60586 11.7915 3.36156 11.0358 3.36156 10.1107V8.42993H1.68078C0.755701 8.42993 0 9.18563 0 10.1107C0 11.0358 0.755701 11.7915 1.68078 11.7915Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M5.88928 8.42993C4.9642 8.42993 4.2085 9.18563 4.2085 10.1107V14.3192C4.2085 15.2443 4.9642 16 5.88928 16C6.81436 16 7.57006 15.2443 7.57006 14.3192V10.1107C7.57006 9.18563 6.81436 8.42993 5.88928 8.42993Z",fill:"#E01E5A"}),(0,o.jsx)("path",{d:"M4.2085 1.68078C4.2085 2.60586 4.9642 3.36156 5.88928 3.36156H7.57006V1.68078C7.57006 0.755701 6.81436 0 5.88928 0C4.9642 0 4.2085 0.755701 4.2085 1.68078Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M7.57003 5.88928C7.57003 4.9642 6.81433 4.2085 5.88925 4.2085H1.68078C0.755701 4.2085 0 4.9642 0 5.88928C0 6.81436 0.755701 7.57006 1.68078 7.57006H5.88925C6.81433 7.57006 7.57003 6.81436 7.57003 5.88928Z",fill:"#36C5F0"}),(0,o.jsx)("path",{d:"M10.1107 7.57003C11.0358 7.57003 11.7915 6.81433 11.7915 5.88925V1.68078C11.7915 0.755701 11.0358 0 10.1107 0C9.18563 0 8.42993 0.755701 8.42993 1.68078V5.88925C8.42993 6.81433 9.18563 7.57003 10.1107 7.57003Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M14.3192 4.2085C13.3941 4.2085 12.6384 4.9642 12.6384 5.88928V7.57006H14.3192C15.2443 7.57006 16 6.81436 16 5.88928C16 4.9642 15.2443 4.2085 14.3192 4.2085Z",fill:"#2EB67D"}),(0,o.jsx)("path",{d:"M8.42993 10.1107C8.42993 11.0358 9.18563 11.7915 10.1107 11.7915H14.3192C15.2443 11.7915 16 11.0358 16 10.1107C16 9.18563 15.2443 8.42993 14.3192 8.42993H10.1107C9.18563 8.42993 8.42993 9.18563 8.42993 10.1107Z",fill:"#ECB22E"}),(0,o.jsx)("path",{d:"M11.7915 14.3192C11.7915 13.3941 11.0358 12.6384 10.1107 12.6384H8.42993V14.3192C8.42993 15.2443 9.18563 16 10.1107 16C11.0358 16 11.7915 15.2443 11.7915 14.3192Z",fill:"#ECB22E"})]})})},777092:(e,t,n)=>{"use strict";n.d(t,{JQ:()=>c,d5:()=>u,vt:()=>d});var o=()=>n(764880),i=()=>n(310442),r=()=>n(824862),s=()=>n(798880),a=()=>n(534177),l=()=>n(630116);function d(e){const{parentStore:t,pointer:n}=e,i=(0,l().Oo)(t,n).getValue();if(i)return(0,o().D3)({table:n.table,value:i})}function c(e){const{parentStore:t,pointer:n}=e;return n.table===r().GP?l().vK.createChildStore(t,n):n.table===s().oo?l().LU.createChildStore(t,n):n.table===i().yj?l().pH.createChildStore(t,n):void(0,a().HB)(n)}function u(e){return e.table===r().GP?(0,o().oC)(e.getValue()):e.table===s().oo?(0,o().MR)(e.getValue()):e.table===i().yj?(0,o().w2)(e.getValue()):void(0,a().HB)(e)}},791611:e=>{var t=/[a-zA-Z0-9_\u0392-\u03c9\u00c0-\u00ff\u0600-\u06ff]+|[\u4e00-\u9fff\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;e.exports=function(e){var n=e.match(t),o=0;if(!n)return 0;for(var i=0;i<n.length;i++)n[i].charCodeAt(0)>=19968?o+=n[i].length:o+=1;return o}},819493:(e,t,n)=>{"use strict";n.d(t,{$:()=>A,b:()=>x});n(898992),n(908872),n(296540);var o=()=>n(662303),i=()=>n(484714),r=()=>n(847249),s=()=>n(401497),a=()=>n(764880),l=()=>n(869190),d=()=>n(959013),c=()=>n(777092),u=()=>n(921855),m=()=>n(972435),p=()=>n(963589),f=()=>n(962730),g=()=>n(706965),v=()=>n(678553),b=()=>n(89924),h=()=>n(859428),y=()=>n(125565),_=()=>n(715011),C=n(474848);function A(e){let{isPageMoreButton:t,hideTopBorder:n,store:o,wordCountStores:l,showWordCount:c}=e;const u=(0,r().K8)((()=>x(o)),[o]),{device:p}=(0,i().v3)(),A=(0,r().K8)((()=>p.isPhone),[p]),S=m().A.getIntl(),w=(0,s().IS)((()=>({menuItem:{paddingTop:A?8:n?0:6,paddingBottom:A?8:16}})),[n,A]);return u&&!u.canAccess?null:(0,C.jsx)(b().A,{topBorder:!t&&!n,style:{paddingTop:t?0:8,paddingBottom:t?0:8},children:(0,C.jsx)(v().Ay,{style:u?void 0:w.menuItem,shouldWrapTitle:!0,title:u?(0,C.jsx)(h().A,{placement:f().W.Right,render:e=>(0,C.jsxs)("div",{...e,children:[c&&(0,C.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4,marginTop:8},children:(0,C.jsx)(d().sA,{id:"pageMoreButton.wordCount.caption",defaultMessage:"Word count: {count}",values:{count:(0,C.jsx)(_().A,{store:o})}})}),l&&(0,C.jsx)(M,{stores:l}),(0,C.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,isMultiline:!0,style:{marginBottom:4},children:(0,C.jsx)(d().sA,{id:"blockAuthorInfo.label",defaultMessage:"Last edited by {author}",values:{author:u.lastEditedBy.asActor?(0,a().lR)(S,u.lastEditedBy):void 0}})}),(0,C.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,isMobile:p.isPhone,style:{marginBottom:c?8:0},children:u.lastEditedTime})]}),renderTooltip:()=>(0,C.jsx)(g().A,{store:o,compactFormat:!0})}):void 0,loading:!u})})}function x(e){const t=e.getCreatedByPointer(),n=e.getCreatedTime(),i=e.getLastEditedByPointer(),r=e.getLastEditedTime(),s=m().A.getIntl();if(!e.canRead())return{canAccess:!1};if(t&&n&&r&&i){const a=(0,c().vt)({parentStore:e,pointer:t}),d=(0,l().jE)(n,o().locale,s),u=(0,c().vt)({parentStore:e,pointer:i}),m=(0,l().jE)(r,o().locale,s);if(!u)return;return{canAccess:!0,createdBy:a,createdTime:d,lastEditedBy:u,lastEditedTime:m}}}function M(e){const{stores:t}=e,n=(0,p().X)("selectable_word_count"),o=(0,r().K8)((()=>n?S(t):0),[n,t]);return n?(0,C.jsx)(y().A,{isSmall:!0,isSecondaryColor:!0,style:{marginBottom:4},children:(0,C.jsx)(d().sA,{id:"blockMetadataMenuItem.wordCount",defaultMessage:"{count, plural, one {# word} other {# words}}",values:{count:o}})}):null}function S(e){return e.reduce(((e,t)=>{const n=(0,u().r4)(t.getTitleValue(),t);return e+(0,u().sQ)(n)+S(t.getContentStores())}),0)}},820579:(e,t,n)=>{"use strict";n.d(t,{f:()=>i});n(296540);const o={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M10 2.4c.345 0 .625.28.625.625v9.966l3.333-3.333a.625.625 0 1 1 .884.884l-4.4 4.4a.625.625 0 0 1-.884 0l-4.4-4.4a.625.625 0 0 1 .884-.884l3.333 3.333V3.025c0-.345.28-.625.625-.625M4.15 16.35a.625.625 0 1 0 0 1.25h11.7a.625.625 0 0 0 0-1.25z"})},i=(0,n(340498).wt)("arrowLineDown",o)},898563:(e,t,n)=>{"use strict";n.d(t,{C6:()=>b,Eu:()=>u,FY:()=>a,MP:()=>g,YT:()=>c,d2:()=>v,fK:()=>h,lL:()=>d,mH:()=>y,oI:()=>l,sD:()=>p,tr:()=>m,yS:()=>f});var o=()=>n(989423),i=()=>n(680074),r=()=>n(508496),s=()=>n(10984);function a(e){o().vd(e,"add_slack_integration")}function l(e){o().vd(e,"remove_slack_integration")}function d(e,t){o().vd(e,"slack_notification_create",t)}function c(e,t){o().vd(e,"slack_notification_delete",t)}function u(e,t){o().vd(e,"slack_notification_update",t)}function m(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_render_button",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function p(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_render_invite_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function f(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_click_invite_button",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,origin:t.origin,invite_token_query:t.inviteTokenQuery,invite_targets:t.inviteTargets,invite_flow_id:t.invite_flow_id})}function g(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_completed",{subscription_tier:n,domain_type:r,invited_user_count:t.invited_user_count,is_success:t.is_success,origin:t.origin,invite_flow_id:t.invite_flow_id,error:t.error,invite_stage:t.invite_stage})}function v(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_dismiss_popup",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id})}function b(e,t){const n=s().AI(),r=i().FX();o().vd(e,"slack_imports_invite_click_select_all",{subscription_tier:n,domain_type:r,origin:t.origin,invite_flow_id:t.invite_flow_id,invited_user_count:t.invited_user_count,is_unselect:t.is_unselect,invite_token_query:t.invite_token_query})}function h(e,t){const n=s().AI(),a=i().FX();o().vd(e,"slack_imports_invite_start_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from}),r().default.logEvent("slack_imports_invite_start_slack_integration",void 0,{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from})}function y(e,t){const n=s().AI(),a=i().FX();o().vd(e,"slack_imports_invite_complete_slack_integration",{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}),r().default.logEvent("slack_imports_invite_complete_slack_integration",void 0,{metadata:{subscription_tier:n,domain_type:a,origin:t.origin,invite_flow_id:t.invite_flow_id,from:t.from,is_success:t.is_success}})}},908928:(e,t,n)=>{"use strict";n.d(t,{GO:()=>B,Ju:()=>I,KA:()=>R,L0:()=>H,L2:()=>F,dA:()=>P,gI:()=>T,iN:()=>z,oG:()=>D,sK:()=>E});n(898992),n(354520),n(803949);var o=()=>n(386164),i=()=>n(433847),r=()=>n(68263),s=()=>n(388821),a=()=>n(179034),l=()=>n(824862),d=()=>n(161479),c=()=>n(96689),u=()=>n(798880),m=()=>n(763824),p=()=>n(534177),f=()=>n(901389),g=()=>n(855801),v=()=>n(594794),b=()=>n(972435),h=()=>n(731320),y=()=>n(630116),_=()=>n(449506),C=()=>n(496414),A=()=>n(579627),x=()=>n(246826),M=()=>n(436572),S=()=>n(751156),w=()=>n(633457);const k=(0,n(959013).YK)({duplicatingTemplate:{id:"botActions.duplicatingTemplate.loadingMessage",defaultMessage:"Duplicating template..."},duplicatingTemplateError:{id:"botActions.duplicateTemplateAndShareWithBot.snackbar.failure",defaultMessage:"Failed to duplicate template for to your workspace"}});function j(e,t){const{environment:n,spaceStore:o,spaceRole:i}=t,r=function(e){const{name:t,spaceStore:n,userId:o,icon:i,type:r,environment:s}=e,a=Date.now(),d={name:t,created_at:a,created_by_table:u().oo,created_by_id:o,alive:!0,icon:i,space_id:n.id,last_edited_at:a,last_edited_by_id:o,last_edited_by_table:u().oo};switch(r){case"guest":return{...d,type:"guest",capabilities:e.capabilities,parent_table:c().NX,parent_id:n.id,integration_id:void 0};case"scim":return{...d,id:(0,v().Z1)({environment:s,table:l().GP,spaceId:n.id}),type:"scim",parent_table:u().oo,parent_id:o};default:(0,p().HB)(r)}}(t),s=x().eC({environment:n,table:l().GP,value:r,inMemoryRecordCache:n.defaultRecordCache.inMemoryRecordCache,transaction:e});return A().dy({environment:n,spaceStore:o,permissionItems:[{type:"bot_permission",role:i,bot_id:s.id}],transaction:e}),{botStore:s}}function T(e){const{environment:t}=e,{serverCommitResult:n,performResult:{botStore:o}}=S().createAndCommit({userAction:"botActions.createSpaceBot",environment:t,canUndo:!0,perform:t=>j(t,e)});return{botStore:o,transactionPromise:n}}async function R(e){const{environment:t,botId:n,onSuccess:o}=e,i=await _().callApi({eventName:"deleteBot",environment:t,data:{botId:n}});"failed"===i.type?f().Qg(i):"success"===i.type&&o&&(await w().oX({environment:t}),o())}async function I(e){const{environment:t,table:n,id:i,type:r}=e,s=await _().callApi({eventName:"getBots",environment:t,data:{table:n,id:i,type:r},headers:(0,o().WS)({spaceId:n===c().NX?i:void 0})});if("failed"===s.type)throw f().Qg(s),s;return{botIds:s.data.botIds,recordMap:s.data.recordMap}}async function B(e){const{environment:t,currentSpaceStore:n,botIds:o}=e;if(!n)return;const i=await _().callApi({eventName:"getBotSharedPageIds",environment:t,data:{spaceId:n.id,botIds:o}});if("failed"!==i.type)return i.data;f().Qg(i)}async function P(e){const{environment:t,botId:n}=e,o=await _().callApi({eventName:"getBotToken",environment:t,data:{botId:n}});if("failed"!==o.type)return o.data.token;f().Qg(o)}function E(e){const{botValue:t,store:n,environment:o}=e,{id:r,parent_id:s,parent_table:a,capabilities:l}=t,d={type:"bot_permission",bot_id:r,parent_id:s,parent_table:a,role:(0,i().MD)(l)};S().createAndCommit({userAction:"TopbarMoreButton.handleAddingConnection",environment:o,canUndo:!0,perform:e=>{A().zP({environment:o,store:n,permissionItems:[d],transaction:e})}})}function D(e){const{botId:t,store:n,environment:o}=e,i=n.getPermissionItems().filter((0,p().u0)((e=>(0,r().P3)(e)?{true:e}:{false:e})));for(const r of i)if(r.bot_id===t){const e={...r,role:"none"};S().createAndCommit({userAction:"TopbarMoreButton.handleRemovingConnection",environment:o,canUndo:!0,perform:t=>{A().zP({environment:o,store:n,permissionItems:[e],transaction:t})}})}}function H(e){const{currentSpaceStore:t,environment:n,pages:o,botStore:i,addPermission:r}=e;if(!t)return;const s=(0,h().Ws)({botStore:i,addPermission:r});o.forEach((e=>{const o=y().sk.createChildStore(t,{table:a().ev,id:e,spaceId:t.getSpaceId()});S().createAndCommit({userAction:"botActions.updateBlockPermissionsForBot",environment:n,canUndo:!0,perform:e=>{A().zP({environment:n,store:o,permissionItems:[s],transaction:e})}})}))}async function z(e){const{environment:t,spaceStore:n,botStore:o,pageIdAndOperations:i,concurrency:r=20}=e;0!==i.length&&await(0,m().lX)(i,r,(async e=>{const i=y().sk.createChildStore(n,{table:a().ev,id:e.pageId,spaceId:n.getSpaceId()}),r=(0,h().Ws)({botStore:o,addPermission:"add"===e.operationType}),{serverCommitResult:s}=S().createAndCommit({userAction:`botActions.updateBotPermissionsForPages.${e.operationType}`,environment:t,canUndo:!0,perform:e=>{A().zP({environment:t,store:i,permissionItems:[r],transaction:e})}});await s}))}async function F(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botValue:a,pages:c}=e;if(!n)return;const u=y().sk.createChildStore(n,{table:l().GP,id:a.id});if(r)return await async function(e){const{environment:t,spaceStore:n,spaceViewStore:i,templatePageId:r,botStore:a}=e;if(!n||!i)return;try{C().m({message:k.duplicatingTemplate});const e=await _().callApi({eventName:"loadBlockSubtree",environment:t,data:{block:{id:r,spaceId:(0,d().e)(void 0)},shallow:!1},headers:(0,o().WS)({recordId:r})});if("failed"===e.type)return;const l=s().RecordMapWithRole.create(e.data.subtreeRecordMap),{createAndDuplicatePageInSpace:c}=await(0,g().nd)(),{performResult:u}=S().createAndCommit({userAction:"botActions.duplicateTemplateAndShareWithBot",environment:t,canUndo:!0,perform:e=>{const o=c({environment:t,recordMap:l,copyPageId:r,isPrivate:!0,spaceStore:n,spaceViewStore:i,transaction:e,allowCopyExternalObjectInstances:!1}),s=i.getPrivatePageIds();s.length>0&&x().zv({store:i,data:{private_pages:[o.id,...s]},transaction:e});const d=(0,h().Ws)({botStore:a,addPermission:!0});return A().zP({environment:t,store:o,permissionItems:[d],transaction:e}),o}});return u}catch(l){M().D6({label:b().A.formatMessage(k.duplicatingTemplateError)})}finally{C().V()}}({environment:t,templatePageId:r,botStore:u,spaceStore:n,spaceViewStore:i});H({environment:t,currentSpaceStore:n,botStore:u,pages:c,addPermission:!0})}},973238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{arrowInCircleDownIcon:()=>r,iconDefinition:()=>i});n(296540);var o=n(474848);const i={viewBox:"0 0 20 20",svg:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("path",{d:"M6.958 10.446a.625.625 0 0 1 .884 0l1.533 1.533V6.513a.625.625 0 1 1 1.25 0v5.466l1.533-1.533a.625.625 0 1 1 .884.883l-2.6 2.6a.625.625 0 0 1-.884 0l-2.6-2.6a.625.625 0 0 1 0-.883"}),(0,o.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},r=(0,n(340498).wt)("arrowInCircleDown",i)},973454:(e,t,n)=>{"use strict";n.d(t,{p:()=>l,A:()=>d});var o=n(296540),i=()=>n(615234);const r=24*i().pT;function s(e){return a(e).status}function a(e){if(null==e||!e.enabled)return{status:"disabled"};const t=e.start_ts?1e3*e.start_ts-Date.now():0;return t<=0?{status:"active"}:t<=r?{status:"warning",nextUpdateInMs:t}:{status:"scheduled",nextUpdateInMs:t-r}}function l(e){const[t,n]=(0,o.useState)((()=>s(e)));return(0,o.useEffect)((()=>{if(null==e||!e.enabled)return;let t;return function o(){t=void 0;const{status:i,nextUpdateInMs:r}=a(e);n(i),r&&(t=setTimeout(o,r))}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[e]),t}function d(e){const[t,n]=(0,o.useState)((()=>Date.now())),r=(null==e?void 0:e.enabled)&&e.start_ts;return(0,o.useEffect)((()=>{if("number"!=typeof r)return;const e=r;let t;return function o(){const r=Date.now();n(r);const s=e*i().TD-r;if(s>0){const e=s%i().Xb,n=0===e?i().Xb:e;t=setTimeout(o,n)}else t=void 0}(),()=>{t&&(clearTimeout(t),t=void 0)}}),[r]),{freezeStatus:s(e),minUntilFreeze:r?Math.floor((r*i().TD-t)/i().Xb):void 0}}}}]);