"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[35947,84084],{21735:(e,t,o)=>{o.d(t,{A:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const r=new n;o(604341).exposeDebugValue("EdgeCacheStore",r);const i=r},38e3:(e,t,o)=>{o.d(t,{$:()=>p,Q:()=>g});o(16280);var n=()=>o(179034),r=()=>o(869558),i=()=>o(44729),a=()=>o(246826),s=()=>o(751156),l=()=>o(594794),c=()=>o(972435),d=()=>o(630116),u=()=>o(435930);function p(e){const{environment:t,layoutStore:o,transaction:n,options:r}=e,{inMemoryRecordCache:s}=o,l=o.getSpaceId(),c=o.getParentPointer();if(!c||"collection"!==c.table)throw new Error("Invalid state: no collection pointer");if(!l)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const d=a().Wv({environment:t,type:"collection_view",inMemoryRecordCache:s,transaction:n});i().NI({childStore:d,parentStore:o,transaction:n});const{collectionViewStore:u}=g({environment:t,transaction:n,layoutStore:o,collectionViewBlockStore:d,options:r});return{collectionViewStore:u,collectionViewBlockStore:d}}function g(e){const{environment:t,transaction:o,layoutStore:i,collectionViewBlockStore:p,options:g}=e,{inMemoryRecordCache:m}=i,f=i.getParentPointer();if(!f||"collection"!==f.table)throw new Error("Invalid state: no collection pointer");const v=i.getSpaceId();if(!v)throw new Error("Cannot add collection view to views main module -- Invalid state: no space id");const h=(0,l().JH)({environment:t,table:r().Gy,spaceId:v}),y={id:h.id,type:"page",parent_id:p.pointer.id,parent_table:n().ev,space_id:v,alive:!0,name:c().A.formatMessage(u().s.editor),format:{collection_pointer:f,hide_linked_collection_name:!0}};return null!=g&&g.viewsTabId&&(y.format={...y.format,page_layout_pointer:{...i.pointer,views_main_tab_id:g.viewsTabId}}),a().eC({environment:t,table:r().Gy,value:y,inMemoryRecordCache:m,transaction:o}),s().applyOperation({store:p,operation:{pointer:p.pointer,path:["view_ids"],command:"listBefore",args:{id:h.id}},transaction:o}),{collectionViewStore:d().pS.createChildStore(p,h)}}},43972:(e,t,o)=>{o.d(t,{w:()=>l});o(296540);var n=()=>o(764880),r=()=>o(534177),i=()=>o(256863),a=()=>o(453697),s=o(474848);function l(e){const{actor:t}=e,o={size:e.size??14,style:{marginRight:2,...e.style}};return(0,n().H3)(t)?(0,s.jsx)(i().A,{botValue:t.asActor,...o}):(0,n().ps)(t)?(0,s.jsx)(a().A,{userValue:t.asActor,...o}):(0,n().h2)(t)?(0,s.jsx)(a().A,{userValue:void 0,...o}):void(0,r().HB)(t)}},63467:(e,t,o)=>{o.d(t,{y:()=>d});var n=()=>o(637997),r=()=>o(267419);const i={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222))};let a=!1,s=!1;async function l(e){for(const[o,r]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...r,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await r().A.waitUntilLoaded(),r().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function c(){if(a)return;const[e]=o(662303).locale.split("-");e in i&&(await l(await i[e]()),a=!0)}const d=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await c()}))},72307:(e,t,o)=>{o.d(t,{A:()=>n});const n={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},79275:(e,t,o)=>{o.d(t,{X:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("newSidebarHome",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{d:"M10.1416 3.77299C10.0563 3.71434 9.94368 3.71434 9.85837 3.77299L3.60837 8.06989C3.54053 8.11653 3.5 8.19357 3.5 8.2759V14.2499C3.5 14.9402 4.05964 15.4999 4.75 15.4999H7.5L7.5 10.7499C7.5 10.0595 8.05964 9.49987 8.75 9.49987H11.25C11.9404 9.49987 12.5 10.0595 12.5 10.7499L12.5 15.4999H15.25C15.9404 15.4999 16.5 14.9402 16.5 14.2499V8.2759C16.5 8.19357 16.4595 8.11653 16.3916 8.06989L10.1416 3.77299ZM9.00857 2.53693C9.60576 2.12636 10.3942 2.12636 10.9914 2.53693L17.2414 6.83383C17.7163 7.1603 18 7.69963 18 8.2759V14.2499C18 15.7687 16.7688 16.9999 15.25 16.9999H12.25C11.5596 16.9999 11 16.4402 11 15.7499L11 10.9999H9L9 15.7499C9 16.4402 8.44036 16.9999 7.75 16.9999H4.75C3.23122 16.9999 2 15.7687 2 14.2499V8.2759C2 7.69963 2.2837 7.1603 2.75857 6.83383L9.00857 2.53693Z"})})},97059:(e,t,o)=>{o.d(t,{W:()=>f,w:()=>m});o(944114);var n=()=>o(585515),r=()=>o(577449),i=()=>o(161479),a=()=>o(545285),s=()=>o(763824),l=()=>o(780054),c=()=>o(870618),d=()=>o(670631),u=()=>o(227440),p=()=>o(508496),g=()=>o(540758);async function m(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:o}=e,s={page:{id:o,spaceId:(0,i().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await n().T(s,r().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),r().h.fromMonomorphicFunctionUnsafe((async e=>{const o=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==o?void 0:o.model})))),d}({environment:t,pageId:e})))).flat()}function f(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,g().Bd)(t)}},120114:(e,t,o)=>{o.d(t,{AX:()=>a,Ur:()=>n,uw:()=>r,yP:()=>i});const n=["unified_find_variant"],r=["deep_find_enable_query_gen","deep_find_enable_universal_blending","deep_find_enable_3p_sources","deep_find_enable_query_gen_finetuned_json_schema","deep_find_enable_query_gen_json_schema","deep_find_enable_request_tracing","deep_find_render_and_hydrate_notion_pages","deep_find_use_query_gen_for_notion_search","deep_find_should_show_streaming_ux","deep_find_append_keywords_to_notion_search","deep_find_all_connectors"],i=["notionSourceNumResults","maxPagesToDecorate","maxResultsPerSourceToBlendedRanking","maxFinalResults","maxResultsPerSourceToBoost"];function a(e,t,o){return{universalBlendingEnabled:e.isDeepFindUniversalBlendingEnabled(),queryGenEnabled:e.isDeepFindQueryGenEnabled(),notionSourceNumResults:t("notionSourceNumResults"),enableRequestTracing:o("deep_find_enable_request_tracing"),maxPagesToDecorate:t("maxPagesToDecorate"),maxResultsPerSourceToBlendedRanking:t("maxResultsPerSourceToBlendedRanking"),maxFinalResults:t("maxFinalResults"),useQueryGenForNotionSearch:o("deep_find_use_query_gen_for_notion_search"),shouldShowStreamingUx:o("deep_find_should_show_streaming_ux"),appendKeywordsToNotionSearch:o("deep_find_append_keywords_to_notion_search"),allConnectorsEnabled:o("deep_find_all_connectors"),maxResultsPerSourceToBoost:t("maxResultsPerSourceToBoost")}}},126617:(e,t,o)=>{o.d(t,{Y:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},r=(0,o(340498).wt)("ellipsisSmall",n)},173417:(e,t,o)=>{o(16280),o(944114),o(898992),o(354520),o(672577),o(430670),o(803949),o(581454),o(737550),o(814603),o(147566),o(198721);var n=()=>o(466103),r=()=>o(700500),i=()=>o(604995),a=()=>o(80979),s=()=>o(416504);function l(e){if(!e)return Math.floor(249e6*Math.random())+67500000001;return 67500000001+parseInt(e.substring(0,8),16)%249e6}var c=()=>o(402390),d=()=>o(436604),u=()=>o(212547),p=()=>o(388821),g=()=>o(696706),m=()=>o(912720),f=()=>o(179034),v=()=>o(628536),h=()=>o(234459),y=()=>o(798880),b=()=>o(245241),S=()=>o(919709),_=()=>o(973647),w=()=>o(534177),A=()=>o(683259),k=()=>o(251582),C=(o(517642),o(658004),o(733853),o(845876),o(432475),o(515024),o(731698),o(823215),()=>o(496603)),I=()=>o(510818),x=()=>o(970013),M=()=>o(236162),T=()=>o(792071),P=()=>o(185078);function R(e){return e.every((e=>{const t="element"===e.type&&["annotation","mention","equation"].includes(e.tagName);return"text"===e.type||t}))}function E(e){return void 0!==e&&"element"===e.type&&"block"===e.tagName}function B(e){return e.every((e=>"element"===e.type&&("block"===e.tagName||"text"===e.tagName||"property"===e.tagName)))}function L(e){return t=>{const{block:o,exportArgs:n,renderers:r}=t,i=T().Bj6.fromBlock(o),a=(0,A().vy)({textValue:i.getProperty("title"),exportArgs:n,renderers:r,fromString:e=>({type:"text",value:(0,I().Pm)(e)})});if(0===a.length&&0===i.getContentLength()&&"page"!==i.getType())return;const s=e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type});if(!R(a))throw new Error("Delineated text node children are invalid");const l={type:"element",tagName:"text",attributes:{},children:a},c={type:"element",tagName:"block",attributes:{id:s.toString()},children:[l]};if(i.getContentLength()>0){const e=n.visitedBlockIds??new Set,t=C().oE(i.getRenderableContentIds().map((t=>{if(!e.has(t))return(0,A().g8)({exportArgs:{...n,blockId:t,renderParentBlockId:i.id,visitedBlockIds:e.add(t)},renderers:r})})));if(!B(t))throw new Error("Block simple XML node children are invalid");c.children.push(...t)}if("page"===i.type&&o.properties){const t=(0,M().zN)({getRecordValue:n.getRecordValue,block:o});if(t&&t.schema)for(const[i,a]of Object.entries(t.schema)){var d;const s=(null===(d=o.properties[i])||void 0===d?void 0:d.toString())??"";a&&s&&i in o.properties&&"text"===a.type&&c.children.push(K(e,i,s,n,r,{parentCollectionId:t.id,propertyId:i}))}}return c}}function U(e){return async(t,o)=>{if(n=t.block,!["page","text","header","sub_header","sub_sub_header","quote","bulleted_list","toggle","to_do","numbered_list","callout"].includes(n.type))return;var n;return await Promise.resolve(L(e)({...t,block:t.block}))}}function j(e){return t=>{const{block:o,exportArgs:n,renderers:r}=t,i=T().Bj6.fromBlock(o),a={type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:[]};if(i.getContentLength()>0){const e=n.visitedBlockIds||new Set,t=C().oE(i.getRenderableContentIds().map((t=>{if(!e.has(t))return(0,A().g8)({exportArgs:{...n,blockId:t,renderParentBlockId:i.id,visitedBlockIds:e.add(t)},renderers:r})})));if(!B(t))throw new Error("Block simple XML node children are invalid");a.children.push(...t)}return a}}function N(e){return async(t,o)=>{if(n=t.block,!["transclusion_container","column","column_list","table_row"].includes(n.type))return;var n;return await Promise.resolve(j(e)({...t,block:t.block}))}}function V(e){const{block:t,exportArgs:o,renderers:n}=e,r=T().Bj6.fromBlock(t),i=r.getTransclusionReferenceTargetPointer();if(!i)return;const a=o.visitedBlockIds||new Set;return a.has(i.id)?void 0:(0,A().g8)({exportArgs:{...o,blockId:i.id,renderParentBlockId:r.id,visitedBlockIds:a.add(i.id)},renderers:n})}function O(e){return t=>{const{block:o,exportArgs:n,renderers:r}=t,i=T().Bj6.fromBlock(o),a=(0,A().vy)({textValue:i.getProperty("caption"),exportArgs:n,renderers:r,fromString:e=>({type:"text",value:e})}),s=e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type});if(!R(a))throw new Error("Delineated text node children are invalid");const l={type:"element",tagName:"text",attributes:{},children:a};return{type:"element",tagName:"block",attributes:{id:s.toString()},children:[l]}}}function D(e){return async(t,o)=>{if(n=t.block,!["image","video"].includes(n.type))return;var n;return await Promise.resolve(O(e)({...t,block:t.block}))}}function F(e){return t=>{const{block:o,exportArgs:n,renderers:r}=t,i=T().Bj6.fromBlock(o),a={type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:[]};if(i.getContentLength()>0){const e=n.visitedBlockIds||new Set,t=C().oE(i.getRenderableContentIds().map((t=>{if(!e.has(t))return(0,A().g8)({exportArgs:{...n,blockId:t,renderParentBlockId:i.id,visitedBlockIds:e.add(t)},renderers:r})})));if(!B(t))throw new Error("Block simple XML node children are invalid");a.children.push(...t)}return a}}function H(e){return async(t,o)=>{if(!function(e){return"table"===e.block.type}(t))return;return await Promise.resolve(F(e)(t))}}function $(e){return async(t,o)=>await Promise.resolve(W(e)(t))}function W(e){return t=>{const{block:o,exportArgs:n,renderers:r}=t,i=T().Bj6.fromBlock(o),a=i.getProperties(),s=C().oE(Object.keys(a).map((t=>{const o=i.getProperty(t);if(!o)return;const a=(0,A().vy)({textValue:o,exportArgs:n,renderers:r,fromString:e=>({type:"text",value:(0,I().Pm)(e)})});if(!R(a))throw new Error("Property children are invalid");return{type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:t}).toString()},children:a}})));if(!s.length)return;return{type:"element",tagName:"block",attributes:{id:e.mapBlockOrAnnotation({type:"block",id:i.id,blockType:i.type}).toString()},children:s}}}function z(e){return t=>{const{annotation:o}=t,n=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),{date_format:r,time_format:i,...a}=S().K7D(o),s="date"===(l=a).type?l.start_date:"daterange"===l.type?`${l.start_date} -> ${l.end_date}`:"datetime"===l.type?`${l.start_date} ${l.start_time}`:"datetimerange"===l.type?`${l.start_date} ${l.start_time} -> ${l.end_date} ${l.end_time}`:void(0,w().HB)(l);var l;return{type:"element",tagName:"mention",attributes:{id:n.toString()},children:[{type:"text",value:s}]}}}function q(e){const{children:t}=e;return t}function G(e){return async function(t){let{block:o,exportArgs:n,renderers:r}=t;const i=e.mapBlockOrAnnotation({type:"block",id:o.id,blockType:o.type}),a=await Promise.resolve((0,A().ki)({blockModel:T().Bj6.fromBlock(o),exportArgs:n,includeEmptyCollection:!0}));if(!a||!a.length)return;const s=a[0],{collectionTitle:l,columnIds:c,collectionDescription:d,columnIdToName:u,collectionId:p,collectionSpaceId:g,schema:m}=s,f=l?Q(e,{collectionId:p,type:P().kl.NAME,collectionSpaceId:g},l,n,r):void 0,v=d?Q(e,{collectionId:p,type:P().kl.DESCRIPTION,collectionSpaceId:g},d,n,r):void 0,h=[];for(const S of a){const{collectionViewName:t,collectionViewId:o,collectionViewSpaceId:i}=S;if(!t)continue;const a=t?Q(e,{collectionId:p,type:P().kl.VIEW_NAME,collectionViewId:o,collectionSpaceId:g,collectionViewSpaceId:i},t,n,r):void 0;a&&h.push(a)}const y=[],b=C().oE(c.map((t=>{var o;const i=u[t];if(!i)return;const a=(0,A().vy)({textValue:[[i,[]]],exportArgs:n,renderers:r,fromString:e=>({type:"text",value:"string"==typeof e?(0,I().Pm)(e):""})});if(!R(a))throw new Error("Property children are invalid");const s={collectionId:p,type:P().kl.SCHEMA_PROPERTY_NAME,collectionSpaceId:g,propertyId:t,oldValue:i,propertySchemaType:null===(o=m[t])||void 0===o?void 0:o.type},l={type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:J(s),metadata:s}).toString()},children:a},c=m[t];return c&&(0,x().DQ)(c)&&c.options&&y.push(...c.options.map((o=>Q(e,{collectionId:p,type:P().kl.SCHEMA_PROPERTY_OPTION,propertyId:t,optionId:o.id,optionColor:(0,x().lx)(c)?o.color:void 0,collectionSpaceId:g,oldValue:o.value,propertySchemaType:c.type},o.value,n,r)))),l})));return{type:"element",tagName:"block",attributes:{id:i.toString()},children:[...f?[f]:[],...h,...v?[v]:[],...b,...y]}}}function K(e,t,o,n,r,i){const a=(0,A().vy)({textValue:[[o,[]]],exportArgs:n,renderers:r,fromString:e=>({type:"text",value:(0,I().Pm)(e)})});if(!R(a))throw new Error("Delineated text node children are invalid");return{type:"element",tagName:"property",attributes:{key:e.mapBlockOrAnnotation({type:"property",key:t,metadata:i}).toString()},children:a}}function J(e){const{type:t,propertyId:o,optionId:n,optionColor:r,collectionViewId:i}=e;switch(t){case P().kl.NAME:return"collection.name";case P().kl.VIEW_NAME:return`collection.view_name.${i}`;case P().kl.DESCRIPTION:return"collection.description";case P().kl.SCHEMA_PROPERTY_NAME:return`collection.property.${o}`;case P().kl.SCHEMA_PROPERTY_OPTION:return`collection.option.${o}.${n}${r?`.${r}`:""}`;default:(0,w().HB)(t)}}function Q(e,t,o,n,r){return K(e,J(t),o,n,r,t)}function Z(){throw new Error("unimplemented")}function X(){}function Y(e){const t=L(e),o=j(e),n=O(e),r=F(e),i=W(e),a=function(e){return t=>{const{annotation:o,children:n}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:o});if(!n)return;if(!function(e){return"text"===e.type||"element"===e.type&&("annotation"===e.tagName||"mention"===e.tagName||"equation"===e.tagName)}(n))throw new Error("Annotation simple XML node children are invalid");const i=[n];return{type:"element",tagName:"annotation",attributes:{id:r.toString()},children:i}}}(e),s=function(e){return t=>{const{annotation:o,exportArgs:n}=t,r=T().b4_.fromGetRecordValueFn(n.getRecordValue),i=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),a=S().v55(o);let s="Untitled page";return r({table:f().ev,id:a})&&(s=(0,A()._z)({intl:n.intl,blockId:a,getRecordValue:n.getRecordValue,userTimeZone:n.userTimeZone})),{type:"element",tagName:"mention",attributes:{id:i.toString()},children:[{type:"text",value:s}]}}}(e),l=function(e){return t=>{const{annotation:o,exportArgs:{intl:n,getRecordValue:r}}=t,i=T().b4_.fromGetRecordValueFn(r),a=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),s=S().NcG(o),l=i({table:y().oo,id:s});let c=null==l?void 0:l.getFullName(n);return c||(c="Tim Smith"),{type:"element",tagName:"mention",attributes:{id:a.toString()},children:[{type:"text",value:c}]}}}(e),c=function(e){return t=>{const{annotation:o,exportArgs:n}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:o});let i=(0,A().Pf)({annotation:o,exportArgs:n});return i||(i="Employee group"),{type:"element",tagName:"mention",attributes:{id:r.toString()},children:[{type:"text",value:i}]}}}(e),d=function(e){return t=>{const{annotation:o,exportArgs:n}=t,r=e.mapBlockOrAnnotation({type:"annotation",annotation:o});let i=(0,A().nZ)({annotation:o,exportArgs:n});return i||(i="Employee team"),{type:"element",tagName:"mention",attributes:{id:r.toString()},children:[{type:"text",value:i}]}}}(e),u=function(e){return t=>{var o;const{annotation:n,exportArgs:{getRecordValue:r}}=t,i=e.mapBlockOrAnnotation({type:"annotation",annotation:n}),a=T().b4_.fromGetRecordValueFn(r),s=S().T$c(n),l=(null===(o=a({table:f().ev,id:s}))||void 0===o?void 0:o.getFormatValue("original_url"))??"https://example.com";return{type:"element",tagName:"mention",attributes:{id:i.toString()},children:[{type:"text",value:l}]}}}(e),p=function(e){return t=>{const{annotation:o}=t,n=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),r=S().q1R(o).href;return{type:"element",tagName:"mention",attributes:{id:n.toString()},children:[{type:"text",value:r}]}}}(e),g=z(e),m=function(e){return t=>{const{annotation:o}=t,n=e.mapBlockOrAnnotation({type:"annotation",annotation:o}),r=S().U35(o);return{type:"element",tagName:"equation",attributes:{id:n.toString()},children:[{type:"text",value:r}]}}}(e),v=function(e){return G(e)}(e),h=function(e){return async function(t){return G(e)({...t,block:{...t.block,type:"collection_view"}})}}(e),b={...{page:t,text:t,header:t,sub_header:t,sub_sub_header:t,quote:t,bulleted_list:t,toggle:t,to_do:t,numbered_list:t,callout:t,image:n,video:n,transclusion_container:o,transclusion_reference:V,column:o,column_list:o,table:r,table_row:i},...{code:X,embed:X,bookmark:X,file:X,tweet:X,maps:X,gist:X,framer:X,invision:X,mixpanel:X,drive:X,figma:X,loom:X,pdf:X,typeform:X,codepen:X,audio:X,divider:X,equation:X,collection_view:X,collection_view_page:X,factory:X,copy_indicator:X,breadcrumb:X,link_to_collection:X,link_to_page:X,table_of_contents:X,whimsical:X,miro:X,abstract:X,sketch:X,excalidraw:X,replit:X,alias:X,external_object_instance:X,tab:X,hex:X,deepnote:X,external_object_instance_page:X,button:X,ai_block:X,drawing:X,slide:X,personal_home_page:X,form:X,post:X,workflow:X,encrypted_text:X,transcription:X,person_profile:X}},_={...{page:U(e),text:U(e),header:U(e),sub_header:U(e),sub_sub_header:U(e),quote:U(e),bulleted_list:U(e),toggle:U(e),to_do:U(e),numbered_list:U(e),callout:U(e),image:D(e),video:D(e),transclusion_container:N(e),transclusion_reference:async e=>{const t=function(e){return"transclusion_reference"===e.type}(e.block)?e.block:void 0;if(t)return await Promise.resolve(V({...e,block:t}))},column:N(e),column_list:N(e),table:H(e),table_row:$(e),collection_view:v,collection_view_page:h},...{image:Z,video:Z,code:Z,embed:Z,bookmark:Z,file:Z,tweet:Z,maps:Z,gist:Z,framer:Z,invision:Z,mixpanel:Z,drive:Z,figma:Z,loom:Z,pdf:Z,typeform:Z,codepen:Z,audio:Z,divider:Z,equation:Z,factory:Z,copy_indicator:Z,breadcrumb:Z,link_to_collection:Z,link_to_page:Z,table_of_contents:Z,transcription:Z,whimsical:Z,miro:Z,abstract:Z,sketch:Z,excalidraw:Z,replit:Z,alias:Z,external_object_instance:Z,tab:Z,hex:Z,deepnote:Z,external_object_instance_page:Z,button:Z,ai_block:Z,drawing:Z,slide:Z,personal_home_page:Z,form:Z,post:Z,workflow:Z,encrypted_text:Z,person_profile:Z}};return{blockRenderers:b,annotationRenderers:{[S().Ifu.Bold]:a,[S().Ifu.Italic]:a,[S().Ifu.Strike]:a,[S().Ifu.Code]:a,[S().Ifu.Highlight]:a,[S().Ifu.Discussion]:a,[S().Ifu.Underline]:a,[S().Ifu.Link]:a,[S().Ifu.Equation]:m,[S().Ifu.Comment]:q,[S().Ifu.Page]:s,[S().Ifu.User]:l,[S().Ifu.Group]:c,[S().Ifu.Team]:d,[S().Ifu.LinkMention]:p,[S().Ifu.Date]:g,[S().Ifu.ExternalObjectInstance]:u,[S().Ifu.Inserted]:q,[S().Ifu.SlackSpecialMention]:X,[S().Ifu.CustomEmoji]:X,[S().Ifu.SuggestionInsertText]:X,[S().Ifu.SuggestionRemoveText]:X,[S().Ifu.SuggestionAnnotate]:X,[S().Ifu.SuggestionUnannotate]:X,[S().Ifu.Deleted]:X,[S().Ifu.Bot]:X,[S().Ifu.TemporaryComment]:X,[S().Ifu.TemporaryCursor]:X,[S().Ifu.TemporaryEquation]:X,[S().Ifu.TemporaryPage]:X,[S().Ifu.TemporaryInput]:X,[S().Ifu.TemporarySelection]:X,[S().Ifu.TemporaryFindHighlight]:X,[S().Ifu.TemporarySelectedFindHighlight]:X,[S().Ifu.TemplateVariable]:X,[S().Ifu.FormulaPageProperty]:X,[S().Ifu.FormulaContextValue]:X,[S().Ifu.FormulaError]:X,[S().Ifu.Citation]:X,[S().Ifu.TemporaryNativeMABFilter]:X,[S().Ifu.TemporaryDictation]:X,[S().Ifu.TemporaryHighlight]:X,[S().Ifu.AssistantInstructionsCollection]:X,[S().Ifu.TemporaryCommentHighlight]:X,[S().Ifu.TemporarySuggestionUnderline]:X,[S().Ifu.GeoPoint]:X},asyncBlockRenderers:_,propertyRenderers:{title:X,text:X,select:X,multi_select:X,status:X,relation:X,rollup:X,url:X,email:X,phone_number:X,checkbox:X,person:X,number:X,date:X,file:X,formula:X,created_time:X,last_edited_time:X,created_by:X,last_edited_by:X,button:X,auto_increment_id:X,last_visited_time:X,location:X,verification:X,geo_point:X}}}o(18107),o(967357);var ee=()=>o(331119);function te(e){const{translateRenderer:t,attributes:o,expectedType:n}=e;if(!("id"in o))return{error:new Error("Expected ID attribute")};const r=parseInt(o.id);if(!(r in t.map))return{error:new Error(`Could not find ${r} in TranslateRenderer`)};const i=t.map[r];return"block"===i.type&&"block"===n?{value:{counter:r,value:{blockType:i.blockType,id:i.id}}}:"annotation"===i.type&&(0,S().Ta1)(i.annotation)&&"textAnnotation"===n||"annotation"===i.type&&(0,S().iGj)(i.annotation)&&"mentionAnnotation"===n||"annotation"===i.type&&(0,S().gir)(i.annotation)&&"equationAnnotation"===n?{value:{counter:r,value:i.annotation}}:{error:new Error(`Expected ${n}, received ${JSON.stringify(i)}.`)}}const oe=k().p.mapResult(ee().W6,(e=>({value:e.value})));function ne(e){return k().p.mapResult((0,ee().U5)("text"),(t=>{const o=(0,k().$d)((0,ee().nx)("text",[le(e),ie(e),ae(e),oe]),t.children??[]);return _().Q.isFail(o),o}))}function re(e){return k().p.mapResult((0,ee().U5)("block"),(t=>{const o=te({translateRenderer:e,attributes:t.attributes,expectedType:"block"});if(_().Q.isFail(o))return o;const n=(0,k().$d)(k().p.mapResult((0,ee().nx)("block",[k().p.mapResult(oe,(e=>({value:[e]}))),k().p.mapResult(le(e),(e=>({value:[e]}))),k().p.mapResult(ie(e),(e=>({value:[e]}))),k().p.mapResult(se(e),(e=>({value:[e],metadata:e.metadata}))),k().p.mapResult(re(e),(e=>({value:[e]}))),ne(e)]),(e=>({value:e.flat()}))),t.children??[]);return _().Q.isFail(n)?n:{value:{type:"block",blockType:o.value.value.blockType,id:o.value.value.id,children:n.value}}}))}function ie(e){return k().p.mapResult((0,ee().U5)("mention"),(t=>{const o=te({translateRenderer:e,attributes:t.attributes,expectedType:"mentionAnnotation"});if(_().Q.isFail(o))return o;const n=(0,k().$d)(k().p.many(oe),t.children??[]);return _().Q.isFail(n)?n:{value:{type:"mention",annotation:o.value.value,text:n.value.join("")}}}))}function ae(e){return k().p.mapResult((0,ee().U5)("equation"),(t=>{const o=te({translateRenderer:e,attributes:t.attributes,expectedType:"equationAnnotation"});if(_().Q.isFail(o))return o;const n=(0,k().$d)(k().p.many(oe),t.children??[]);return _().Q.isFail(n)?n:{value:{type:"equation",annotation:o.value.value}}}))}function se(e){return k().p.mapResult((0,ee().U5)("property"),(t=>{const o=(0,ee().nx)("property",[oe,le(e),ie(e)]),n=function(e,t){if(!("key"in t))return{error:new Error("Expected key attribute")};const o=parseInt(t.key);if(!(o in e.map))return{error:new Error(`Could not find ${o} in TranslateRenderer`)};const n=e.map[o];return"property"!==n.type?{error:new Error(`Expected property, received ${JSON.stringify(n)}.`)}:{value:{counter:o,value:{key:n.key},metadata:n.metadata}}}(e,t.attributes);if(_().Q.isFail(n))return n;const r=(0,k().$d)(k().p.map(o,(e=>e)),t.children??[]);return _().Q.isFail(r)?r:{value:{type:"property",key:n.value.value.key,children:r.value,metadata:n.value.metadata}}}))}function le(e){return k().p.mapResult((0,ee().U5)("annotation"),(t=>{const o=te({translateRenderer:e,attributes:t.attributes,expectedType:"textAnnotation"});if(_().Q.isFail(o))return o;const n=(0,ee().nx)("annotation",[oe,le(e),ie(e)]),r=(0,k().$d)(k().p.map(n,(e=>{if(function(e){return 1===e.length}(e))return e;return[e.at(0)??""]})),t.children??[]);return _().Q.isFail(r)?r:{value:{type:"annotation",annotation:o.value.value,children:r.value}}}))}function ce(e){const{annotation:t}=e;return(0,S().wmz)(t)}function de(e){const{annotation:t}=e;return(0,S().G0H)(t[1])}function ue(e){const{annotations:t,value:o}=function e(t){const o=[t.annotation],n=t.children[0];if("string"==typeof n)return{annotations:o,value:n};if("mention"===n.type)return{annotations:o,value:n};if("annotation"===n.type){const{annotations:t,value:r}=e(n);return o.push(...t),{annotations:o,value:r}}(0,w().HB)(n)}(e);return"string"==typeof o?(0,S().Ey_)(o,t):(0,S().wmz)(o.annotation,t)}function pe(e){const t=[];for(const o of e.children)"string"==typeof o?t.push((0,S().Ey_)(o)):"annotation"===o.type?t.push(ue(o)):"mention"===o.type?t.push(ce(o)):(0,w().HB)(o);return t}function ge(e){let t={};const o={},n=[];for(const r of e.children)"string"==typeof r?n.push((0,S().Ey_)(r)):"annotation"===r.type?n.push(ue(r)):"mention"===r.type?n.push(ce(r)):"property"===r.type?o[r.key]={value:pe(r),metadata:r.metadata}:"equation"===r.type?n.push(de(r)):"block"===r.type&&(t={...ge(r),...t});return{[e.id]:{value:n,blockType:e.blockType,mapping:(0,P().oQ)(e.blockType),properties:o},...t}}class me{constructor(e){this.map=void 0,this.counter=0,this.renderers=void 0,this.hasTranslated=!1,this.renderers=Y(this),this.map=e??{}}getExportArgs(e){const{pagePointer:t,intl:n,getRecordModel:r,serverOrClientConfig:i,experimentService:a,formulasModule:l}=e;return{blockId:t.id,navigableBlockId:t.id,renderParentBlockId:void 0,root:t,numberedListCache:{},bulletedListCache:{},getExportedPathToFile:e=>"",getExportedRenderAsset:e=>"",getExportedPathToPage:e=>"",getRecordValue:r.getRecordValue,getRecordsWithParent:()=>[],userTimeZone:(0,s().P)(),intl:n,baseUrl:i.domainBaseUrl,publicDomainName:i.publicDomainBaseUrl,resultCache:new Map,regExpCache:new Map,experimentService:a,collectionFeatureGates:(0,o(670913).v)({experimentService:a,actor:void 0,spaceId:t.spaceId}),formulasModule:l}}mapPageToXML(e){if(this.hasTranslated)throw new Error("Page already loaded.");this.hasTranslated=!0;const t=this.getExportArgs(e),o=(0,A().g8)({exportArgs:t,renderers:this.renderers});if(!o||!E(o))throw new Error("Failed to render page");return o}async asyncMapPageToXML(e){if(this.hasTranslated)throw new Error("Page already loaded.");this.hasTranslated=!0;const t=this.getExportArgs(e),n=await(0,A().wL)({exportArgs:t,renderers:this.renderers,ticker:new(o(863567).D)});if(!n||!E(n))throw new Error("Failed to render page");return n}parseXMLToTranslations(e){const t=(0,k().$d)(re(this),e);if(_().Q.isSuccess(t))return ge(t.value);throw t.error}getBlocksMissingFromTranslationMap(e){const t=Object.keys(e);return Object.values(this.map).map((e=>"block"===e.type?e.id:void 0)).filter(w().O9).filter((e=>!t.includes(e)))}mapBlockOrAnnotation(e){const t=this.counter++;return this.map[t]=e,t}}var fe=()=>o(220719),ve=()=>o(550622),he=()=>o(545285),ye=()=>o(498212),be=()=>o(449506),Se=()=>o(276470),_e=()=>o(334261),we=()=>o(295118),Ae=()=>o(246826),ke=()=>o(72234),Ce=()=>o(319975),Ie=()=>o(751156),xe=()=>o(755199),Me=()=>o(813297),Te=()=>o(780054),Pe=()=>o(862292),Re=()=>o(263711),Ee=()=>o(199058),Be=()=>o(351360),Le=()=>o(508496),Ue=()=>o(712505),je=()=>o(630116),Ne=()=>o(148832),Ve=()=>o(502438),Oe=()=>o(686594),De=()=>o(314648),Fe=()=>o(10984),He=()=>o(954220),$e=()=>o(157857),We=()=>o(698331),ze=()=>o(972435),qe=()=>o(780865),Ge=()=>o(244641),Ke=()=>o(917629),Je=()=>o(628315);function Qe(e){const{environment:t,userAction:o,data:n}=e,r=Be().default.state.currentUserSettingsStore;r?Ie().createAndCommit({userAction:o,environment:t,canUndo:!0,userId:r.id,perform:e=>{xe().mJ({userSettingsStore:r,data:n,transaction:e})}}):console.error("Could not find current user settings")}(0,n().exposeDebugEnvironmentValue)("messages",(function(e){const t=t=>{Je().bc(e),Je().X3(e,t),Je().nS(e,t)};return{resetNotionCalendarOnboarding:()=>{Qe({environment:e,userAction:"debuggingHelpers.clearNotionCalendarOnboarding",data:{notion_calendar_launch_modal_phase:null,notion_calendar_launch_modal_dismissed_at:null,seen_open_in_calendar_tooltip:null}}),t("notion_calendar_launch_promo")},resetAsanaPostImportTour:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetAsanaPostImportTour",data:{seen_asana_post_import_tour:null}}),t("asana_post_import_tour")},resetFormsShareTooltip:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetFormsShareTooltip",data:{seen_forms_share_form_tooltip:null}}),t("forms_share_form_tooltip")},resetFormsAddConditionalLogicTooltip:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetFormsAddConditionalLogicTooltip",data:{seen_forms_add_conditional_logic_tooltip:null}}),t("forms_add_conditional_logic_tooltip")},resetDummyModal:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetDummyModal",data:{seen_dummy_modal:null}}),t("dummy_modal")},resetSidebarUpgradeNudge:()=>{Qe({environment:e,userAction:"sidebarUpgradeNudge.markNotificationAsDismissed",data:{dismissed_sidebar_upgrade_nudge:!1}}),t("sidebar_upgrade_nudge")},forceShowMessage:t=>{const o=(0,Ke().h2)(t);o?Je().UW(e,o):console.log(`Invalid static message key: ${t}`)},resetMessageExposures:()=>{Je().bc(e)},tryShowMessage:(t,o)=>{const n=(0,Ke().h2)(t);if(n){const t=Je().$j(e,n,o);t.error&&console.log(`Could not show ${n} because of ${t.error}`)}else console.log(`Invalid static message key: ${t}`)},resetMessage:t,resetMessageSeen:t=>{Je().nS(e,t)},resetLanguageSwitchPrompt:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetLanguageSwitchPrompt",data:{language_switching_prompt_dismissals:[]}}),t("language_switch_prompt")},pushOrReplaceToast:e=>{o(812182).HK(e)},resetLayoutPageEducation:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetLayoutPageEducation",data:{layout_info_panel_button_education_tooltip_dismissed_at:null,layout_builder_add_module_button_education_tooltip_dismissed_at:null}})},resetMwnFeatureModal:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetMwnFeatureModal",data:{mwn_feature_modal_dismissed_at_millis:null}}),t("mwn_feature_modal")},resetSlackEmbedAiConnectorTooltip:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetSlackEmbedAiConnectorTooltip",data:{seen_slack_embed_ai_connector_tooltip:!1}}),t("ai_slack_qna_embed_tooltip")},addDynamicCallout:t=>{Je().Ez(e,t)},resetGithubAIConnectorAnnouncement:()=>{const{currentSpaceViewStore:o}=Be().default.state;o&&(Ie().createAndCommit({environment:e,userAction:"AiGithubAIConnectorAnnouncementModal.clearGithubAIConnectorAnnouncementSeenAt",canUndo:!0,perform:e=>{Ie().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings"],command:"update",args:{...o.getSettings(),ai_github_ai_connector_announcement_seen_at:null}},transaction:e})}}),t("ai_github_ai_connector_announcement"))},resetJiraUniversalQnaAnnouncement:()=>{const{currentSpaceViewStore:o}=Be().default.state;o&&(Ie().createAndCommit({environment:e,userAction:"debuggingHelpers.resetJiraUniversalQnaAnnouncement",canUndo:!0,perform:e=>{Ie().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings"],command:"update",args:{...o.getSettings(),ai_jira_universal_qna_announcement_seen_at:null}},transaction:e})}}),t("ai_jira_universal_qna_announcement"))},advanceDaysSinceCalloutDismissal:t=>{const{messageKey:o,nDays:n}=t,{currentUserSettingsStore:r,currentSpaceViewStore:i}=Be().default.state,a=Ge().c9.now().toMillis();if(r||i){if(r){const t=r.getSettings();if(t){const i=t.callout_dismissal_timestamps??[],s=new Map(i.map((e=>[e.name,e]))),l=s.get(o);l?(l.timestamp=Ge().c9.fromMillis(l.timestamp||a).minus({days:n}).toMillis(),Ie().createAndCommit({userAction:`debugHelpers.advanceDaysSinceCalloutDismissal(userSettings: ${o})`,environment:e,canUndo:!0,perform:e=>{xe().mJ({userSettingsStore:r,transaction:e,data:{callout_dismissal_timestamps:Array.from(s.values())}})}})):console.warn(`No dismissal timestamp found for "${o}" in user settings.`)}else console.error("No user settings found!")}if(i){const t=i.getSettings();if(t){const r=t.callout_dismissal_timestamps??[],s=new Map(r.map((e=>[e.name,e]))),l=s.get(o);l?(l.timestamp=Ge().c9.fromMillis(l.timestamp||a).minus({days:n}).toMillis(),Ie().createAndCommit({userAction:`debugHelpers.advanceDaysSinceCalloutDismissal(spaceView: ${o})`,environment:e,canUndo:!0,perform:e=>{ke().AG(i,e,{callout_dismissal_timestamps:Array.from(s.values())})}})):console.warn(`No dismissal timestamp found for "${o}" in space view settings.`)}else console.error("No space view settings found!")}}else console.error("No user settings or space view store found!")},advanceDaysSinceCalloutSeen:t=>{const{messageKey:o,nDays:n}=t,{currentUserSettingsStore:r}=Be().default.state;if(!r)return void console.error("No user settings found!");const i=r.getSettings();if(!i)return void console.error("No user settings found!");const a={...i.callout_seen_timestamps??{}};console.log("Seen record:",a),a[o]?(a[o]=Ge().c9.fromMillis(a[o]).minus({days:n}).toMillis(),console.log("New seen record:",a),Ie().createAndCommit({userAction:`debugHelpers.advanceDaysSinceCalloutSeen(messageKey: ${o})`,environment:e,canUndo:!0,perform:e=>{xe().mJ({userSettingsStore:r,transaction:e,data:{callout_seen_timestamps:a}})}})):console.warn(`No seen timestamp found for "${o}" in user settings.`)},resetAILimitNudge:()=>{Qe({environment:e,userAction:"debuggingHelpers.resetAiLimitNudge",data:{addOnLimitNotifications:null}}),t("ai_limit_nudge")},checkMessageEligibility:async t=>await Je().TD(e,t)}}));const Ze=20;async function Xe(e,t){const o=(0,ye().ZA)(t)||t,{inMemoryRecordCache:n,persistedRecordCache:r}=e.defaultRecordCache;let i;for(const a of n.data)if(a.pointer.id===o){console.log(`Found a ${a.pointer.table} record in the in-memory record cache:`,a.model,a.model.__IM_SORRY__getValue());const e=n.checkRecordForTemporaryData(a);if(e&&console.log("The record has been augmented by temporary data:",e),r&&(0,he().u)(a.pointer)){const e=await r.get({pointer:a.pointer,userId:a.userId});console.log("The record is also in the persisted record cache: ",e)}i=u().ms.fromModel(a.model)}return i||console.log("Alas, no records with the id were found in the in-memory record cache."),i}function Ye(e,t){return"string"==typeof e&&"string"==typeof t?Object.keys(v().jo).includes(e)?{table:e,id:(0,ye().ZA)(t)||t}:{table:t,id:(0,ye().ZA)(e)||e}:"string"!=typeof e||t?"object"==typeof e?e:t:{table:"block",id:(0,ye().ZA)(e)||e}}function et(e,t){if(t>Ze)return[];const o=[],n=(null==e?void 0:e.getAutomationStores())??[];o.push(...n.map((e=>ot(e))).filter(w().O9));const r=(null==e?void 0:e.getTemplatePageStores())??[];for(const a of r){const e=a.getAutomationStore();if(e){const t=ot(e);t&&o.push(t)}o.push(...tt(a,t+1))}const i=e.getSchema();for(const a of Object.values(i))if("button"===(null==a?void 0:a.type)&&(0,w().O9)(a.automation_id)){const t=ot(je().dn.createChildStore(e,{id:a.automation_id,spaceId:e.getSpaceId(),table:m().yB}));t&&o.push(t)}return C().hS(o,(e=>g().L3.toKey(e.automation.pointer)))}function tt(e,t){if(t>Ze)return[];const o=[];{const n=e.getAutomationStore();if(n){const e=ot(n);e&&o.push(e)}if(e.isCollectionView()){const n=e.getCollectionStore();n&&o.push(...et(n,t+1))}}const n=e.getContentStores();for(const r of n){const e=r.getAutomationStore();if(e){const t=ot(e);t&&o.push(t)}if(r.isCollectionView()){const e=r.getCollectionStore();e&&o.push(...et(e,t+1))}o.push(...tt(r,t+1))}return C().hS(o,(e=>g().L3.toKey(e.automation.pointer)))}function ot(e){if(!e)return;const t=(null==e?void 0:e.getActionStores())??[],o=null==e?void 0:e.getCreatedByPointer(),n=(null==o?void 0:o.table)===y().oo&&(null==e?void 0:e.getRecordModel(o));return n?{automation:e,actions:t,createdBy:n,parent:e.getParentBlockStore()}:void 0}(0,n().exposeDebugEnvironmentValue)("debugging",(e=>{const t=function(e){const t=async(t,o)=>{const n=Ye(t,o),r=await(0,Se().e)(e,{pointer:n,version:-1,userId:e.currentUser.id});return(null==r?void 0:r.value)||void 0},n=async(t,n)=>{var i;const a=Ye(t,n),s=await(0,Se().e)(e,{pointer:a,version:-1,userId:e.currentUser.id}),l=null==s?void 0:s.value;if(!l)return void console.log(`Unable to find record ${(0,o(452540).jV)(a)}.`);const c=null===(i=(0,o(186445).ZO)())||void 0===i?void 0:i.pointer.spaceId;Ie().createAndCommit({environment:e,perform(t){const n=Ae().Wv({environment:e,type:r().xd.code,inMemoryRecordCache:e.defaultRecordCache.inMemoryRecordCache,transaction:t,spaceId:c});Ce().R9({environment:e,store:n.getBlockTitleStore(),transaction:t,value:[[JSON.stringify(l,null,2)]]}),o(899038).IA({blocks:[n],language:"JSON",transaction:t}),Ce().R9({environment:e,store:n.getCaptionStore(),transaction:t,value:[[`${a.table} ${a.id}`]]}),o(797265).LE({environment:e,blocksToInsert:[n],target:Ve().default.state.stores,transaction:t,replaceEmptyTextBlock:!1})},userAction:"debuggingHelpers.editRecordJson",canUndo:!0}),console.log("Created a code block with the record source. You can make edits and, with the text cursor still in the block, use __console.updateRecordJson() to write it back to the database. Do not modify the caption.")},u=()=>{const t=Ve().default.state.stores[0];if(!(t instanceof Ne().B&&t.isType(r().xd.code)))return void console.log("No code block is selected!");const o=(e=>{try{return JSON.parse(e)}catch(t){return void console.error(t)}})((0,S().q4_)(t.getTitleValue()));if(!o)return void console.log("Unable to parse JSON in selected code block.");const[n,i]=(0,S().q4_)(t.getCaptionStore().getValue()).split(" ");if(!n||!i)return void console.log("Unable to parse record pointer in caption.");const a=Ye(n,i);Ie().createAndCommit({environment:e,perform(n){const r=(0,je().Oo)(t,a);if(r instanceof Ne().B){const t=o.properties;if(t){delete o.properties;const i=t.title;i&&Ce().R9({environment:e,store:r.getBlockTitleStore(),value:i,transaction:n}),delete t.title,Ie().applyOperation({store:r,operation:{pointer:r.pointer,path:["properties"],command:"update",args:t},transaction:n})}}Ie().applyOperation({store:r,operation:{pointer:r.pointer,path:[],command:"update",args:o},transaction:n})},userAction:"debuggingHelpers.updateRecordJson",canUndo:!0}),console.log(`Updated ${n} ${i}. Press Cmd-Z (in Notion, not console) to undo.`)},g=async()=>{var t,o;const n=null===(t=Be().default.state.currentSpaceStore)||void 0===t?void 0:t.getSpaceId(),r=null===(o=Be().default.state.currentUserStore)||void 0===o?void 0:o.userId;if(!n||!r)return;const i=await(0,He().fetchUserSignals)({spaceId:n,environment:e});void 0!==i&&(0,He().setUserSignals)({spaceId:n,userId:r,environment:e,newSignals:i,initialize:!1})},_=()=>{var e,t;const o=null===(e=Be().default.state.currentSpaceStore)||void 0===e?void 0:e.getSpaceId(),n=null===(t=Be().default.state.currentUserStore)||void 0===t?void 0:t.userId;if(!o||!n)return;const r=De().default.getUserSignals({spaceId:o,userId:n});return r?De().USER_SIGNALS_KEYS.map((e=>[e,("similarUserRecentPages"===e?Array.from(Object.values(r[e])):r[e]).map((e=>{let{pageId:t,...o}=e;return{...o,pageId:t,page:x(f().ev,t)}}))])):void 0},A=t=>je().sk.createUniqueRootStore(e,t),k=(t,o)=>{var n;const r=Ye(t,o),i=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:r,userId:e.currentUser.id});if(void 0===(null==i?void 0:i.value))return`${r.table}: ${r.id}`;const a="type"in i.value?i.value.type:r.table;return"name"in(null==i?void 0:i.value)?`${a} ${i.value.id} ${i.value.name}`:"properties"in(null==i?void 0:i.value)&&(0,w().O9)(i.value.properties)&&"title"in i.value.properties&&(0,w().O9)(null==i?void 0:i.value.properties.title)?`${a} ${i.value.id} ${i.value.properties.title.join(" ").slice(0,30)}`:`${a} ${null==i||null===(n=i.value)||void 0===n?void 0:n.id}`},I=(t,o)=>{const n=Ye(t,o);return e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:n,userId:e.currentUser.id})},x=(e,t)=>{const o=Ye(e,t),n=I(e,t),r={title:k(e,t),raw:null==n?void 0:n.value,parent:void 0,id:o,children:[]};var i,a;void 0!==(null==n?void 0:n.value)&&"parent_table"in(null==n?void 0:n.value)&&"parent_id"in(null==n?void 0:n.value)&&n.value.parent_id&&(r.parent=Ye(null===(i=n.value)||void 0===i?void 0:i.parent_id,null===(a=n.value)||void 0===a?void 0:a.parent_table));if(null!=n&&n.value&&"content"in(null==n?void 0:n.value)){var s;const e=(null==n||null===(s=n.value)||void 0===s?void 0:s.content)||[];for(const t of e){const e=Ye(t,"block"),n=I(t,"block"),i={title:k(t,"block"),raw:null==n?void 0:n.value,parent:o,id:e,children:[]};r.children.push(i)}}return r},M=()=>{var e;const t=null===(e=L())||void 0===e?void 0:e.id;if(t)return x(t,"block");console.error("Not opening")},T=(e,t)=>`${Te().A.adminUrl}/__admin/${e}/${t}`,P=(e,t)=>{window.open(T(e,t))},R=()=>{if(0!==Ve().default.state.stores.length)return Ve().default.state.stores.forEach((e=>{P(f().ev,e.id)}));console.error("No selected block")},E=()=>{Be().default.state.currentSpaceStore?P(o(96689).NX,Be().default.state.currentSpaceStore.id):console.error("No current space")},B=()=>{var e;const t=null===(e=L())||void 0===e?void 0:e.id;t?P(f().ev,t):console.error("Not opening")},L=()=>Ue().default.state.open?(console.warn("Returning peek view page, if you want the underlying page, please close it and try again"),Ue().default.state.targetStore):Be().default.state.mainEditorCurrentBlockStore?Be().default.state.mainEditorCurrentBlockStore:void console.error("No current mainEditorCurrentBlockStore"),U=t=>{if(!t.isTabbedPageLayout())return void console.error("Current layout is not a tabbed page layout, make it tabbed before using this function to add duplicate content tab");const n=t.getViewsModuleCollectionViewBlockStore();if(!n)return void console.error("No collection view block store found");const r=`view_tab_duplicate_${l()}`;Ie().createAndCommit({userAction:"debuggingHelpers.addDuplicateContentTabToCurrentLayout",environment:e,canUndo:!0,perform(i){(0,o(38e3).Q)({environment:e,layoutStore:t,transaction:i,collectionViewBlockStore:n,options:{viewsTabId:r}})}})},j=()=>{var t;if(!Be().default.state.mainEditorCurrentBlockStore)return void console.error("No current mainEditorCurrentBlockStore");const o=Be().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore()||Be().default.state.mainEditorCurrentBlockStore.getCollectionStore();if(!o)return void console.error("Cannot find collection store to remove Page sections from");const n=o.getFormat(),r=((null===(t=n.property_visibility)||void 0===t?void 0:t.filter((e=>"section"===e.visibility)))||[]).map((e=>e.property));Ie().createAndCommit({userAction:"debuggingHelpers.addRelationsGroupModuleToCurrentLayout",environment:e,canUndo:!0,perform(t){_e().LK({store:o,pageSectionFormats:[],transaction:t,environment:e}),r.forEach((e=>{_e().D7({property:e,visibility:"show",store:o,format:n,transaction:t})}))}})},N=t=>{const{visibility:o,section:n}=t,r=Be().default.state.mainEditorCurrentBlockStore;if(!o||!n)return void console.error("No visibility or section provided");if(!r)return;const i=r.getAssociatedCollectionStore()||r.getCollectionStore(),a=(null==i?void 0:i.getFormat())||r.getFormat();_e().OD({environment:e,store:i||r,pageSection:n,visibility:o,format:a})},V=()=>{var e,t;const o=null===(e=L())||void 0===e?void 0:e.getCreatedById(),n=null===(t=L())||void 0===t?void 0:t.getCreatedByTable();if(o&&n)return I(o,n);console.error("no created_by_id or created_by_table for this page")},O=()=>{var e;const t=V(),o=null==t||null===(e=t.value)||void 0===e?void 0:e.id;o?P(y().oo,o):console.error("no current page Creator, not opening")},D=function(t){var o;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;const a="string"==typeof t?{query:{text:t,filters:(0,b().N2)(),sort:{field:"relevance"}},limit:20,debug:n}:t;return{environment:e,input:a,spaceId:null===(o=Be().default.state.currentSpaceStore)||void 0===o?void 0:o.id,publicAccessPermissionAncestorBlockId:qe().Er(e).publicAccessPermissionAncestorBlockId,searchExperimentOverrides:i,forcedClusterPattern:r,source:"debugging"}},F=async function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i="string"==typeof t?{query:{text:t,filters:(0,b().N2)(),sort:{field:"relevance"}},limit:20,debug:o}:t,a=Be().default.state.currentSpaceStore,{query:s,limit:l}=i;if(!a)return;const c=be().callApi({eventName:"search",environment:e,data:{type:b().Vz.CollectionsInSpace,query:s.text.trim(),spaceId:a.id,limit:l,filters:b().N2({excludeTemplates:!0,requireEditPermissions:!0}),sort:{field:"relevance"},debug:o,searchExperimentOverrides:r,forcedClusterPattern:n}}),d=await c;return"success"===d.type?d.data:d},H={id:"root0000-0000",table:"block"},$=e=>{var t;if(void 0!==(null==e||null===(t=e.value)||void 0===t?void 0:t.parent_id))return Ye(e.value.parent_id,e.value.parent_table)},W=e=>{const t=new(o(795727).A);e.map((e=>{const o=Ye(e.id,e.table),n=k(e.id,e.table),r=I(e.id,e.table),i={title:n,parent:$(r),id:o,raw:null==r?void 0:r.value,children:[]};t.set(o,i)}));const n={title:"root",parent:void 0,id:H,raw:void 0,children:[]};return e.map((e=>{const o=Ye(e.id,e.table),r=t.get(o);var i;void 0!==(null==r?void 0:r.parent)&&t.has(r.parent)?null===(i=t.get(r.parent))||void 0===i||i.children.push(r):void 0!==r?n.children.push(r):n.children.push({title:"Failed to load Record",parent:void 0,id:o,raw:void 0,children:[]})})),n},z=()=>{if(!Le().default.isStatsigEnabled())throw new Error("Failed to override: Statsig not enabled");if(!Oe().A.isInitialized())throw new Error("Failed to override: Statsig not initialized")},q=()=>{var e;return null===(e=L())||void 0===e?void 0:e.getSpaceId()},G=()=>{var e;return null===(e=Be().default.state.currentUserStore)||void 0===e?void 0:e.id},K=async t=>{const o=q(),n=G(),r=`${"production"}-main-usw2-0001`,i=await be().callApi({eventName:"getSpacesInitial",environment:e,data:{},headers:{[d().tx]:r}});if(o&&n&&"success"===i.type){const e=i.data.fanoutData,t=(null==e?void 0:e.filter((e=>{let{request:t}=e;return t.users[n].some((e=>{let{spaceId:t}=e;return t===o}))})))||[];return t.length>0?t[0].headers[d().tx]:void 0}},J=()=>{const e=L();if(e)return tt(e,0)},Q=()=>{var t;const n=null===(t=Be().default.state.currentSpaceStore)||void 0===t?void 0:t.id,r=e.currentUser.id;if(n&&r)return(0,o(90634).hj)({spaceId:n,userId:r})},Z=async(t,n)=>{const r=await Pe().T.formulas.load(),i=L(),a=null==i?void 0:i.getModel();if(!i||!a||!a.isPageBlock())return;const l=i.getRecordModel,d=i.getRecordRole,u=l({id:t,spaceId:i.getSpaceId(),table:m().yB});if(!u)return;const p=(0,o(68465).t1)(e),g=u.getActionPointers().map((e=>l(e))).filter(w().O9);return g.length===u.getActionIds().length?(0,o(310109).typecheckAutomation)("button_block"===n?{actionModels:g,automationModel:u,assistantFeatureGate:p,checkExperimentGate:e=>Le().default.checkGate({gateName:e}),contextType:n,formulasModule:r,getRecordModel:l,getRecordRole:d,intl:(0,c()._z)(),isSubscribed:(0,Fe().y4)(),pageBlockModel:a,userTimeZone:(0,s().P)(),valueTypes:[],env:"production"}:{actionModels:g,automationModel:u,assistantFeatureGate:p,checkExperimentGate:e=>Le().default.checkGate({gateName:e}),contextType:n,formulasModule:r,getRecordModel:l,getRecordRole:d,intl:(0,c()._z)(),isSubscribed:(0,Fe().y4)(),userTimeZone:(0,s().P)(),valueTypes:[],env:"production"}):void 0},X=async t=>{var n,i;const a=L();if(!a)throw new Error("Could not get current page");const s=je().dn.createChildStore(a,{id:t,table:m().yB,spaceId:a.getSpaceId()}),[l,c,d]=await Promise.all([Pe().T.formulas.load(),Me().QV.automationTypecheck.load(),Me().QV.automationActionRegistry.load()]),u=Be().default.state,p=(0,o(577437).zD)(e,{name:"premium_automations",spaceId:null===(n=u.currentSpaceStore)||void 0===n?void 0:n.id,userId:null===(i=u.currentUserStore)||void 0===i?void 0:i.id});if(s.isTriggerType("button")){const n=s.getParentStore();if(!n)throw new Error("Could not get parent store");if(n instanceof Ne().B){var g;if(!n.isType(r().xd.button))throw new Error("Unexpected parent for button block automation");if(!a.isPageBlock())throw new Error("Current page must be a page block for button analysis");return(0,$e().jl)({environment:e,automationActionRegistryModule:d,automationStore:s,automationTypecheckModule:c,blockStore:n,currentUserId:null===(g=e.currentUser)||void 0===g?void 0:g.id,isLoggedIn:e.currentUser.isLoggedIn(),formulasModule:l,intl:ze().A.getIntl(),isSubscribed:p,pageStore:a,parentRecordStore:s,type:"button_block"})}{var f;const r=Object.entries(n.getSchema()).find((e=>{let[,o]=e;return"button"===(null==o?void 0:o.type)&&o.automation_id===t}));if(!r)throw new Error("Could not find property schema for button automation");const[i,a]=r;if("button"!==(null==a?void 0:a.type))throw new Error("Expected button property schema");const u=new(o(889097).A)(e);return u.setContext({type:"collectionPage",collectionViewBlockStore:void 0,collectionStore:n}),(0,$e().jl)({environment:e,automationActionRegistryModule:d,automationStore:s,automationTypecheckModule:c,collectionContextStore:u,currentUserId:null===(f=e.currentUser)||void 0===f?void 0:f.id,formulasModule:l,intl:ze().A.getIntl(),isLoggedIn:e.currentUser.isLoggedIn(),isSubscribed:p,parentRecordStore:s,propertyId:i,propertySchema:a,type:"button_property"})}}if((0,We().$X)(s))return(0,$e().sl)({environment:e,automationActionRegistryModule:d,automationTypecheckModule:c,automationStore:s,contextType:(0,We().H8)((0,fe().o9)(s.getTriggerType(),"Could not get trigger type")),formulasModule:l,intl:ze().A.getIntl(),isSubscribed:p});throw new Error("Unexpected automation type")},Y=t=>{const o=Be().default.state.currentUserSettingsStore,n=null==o?void 0:o.getSettings();if(!o||!n)return void console.error("Could not find current user settings");const r=e=>e?(0,i().K1)({date:e,daysToAdd:-t}):e;Ie().createAndCommit({userAction:"debuggingHelpers.advanceAssistantOnboardingNDays",environment:e,canUndo:!0,userId:o.id,perform:e=>{xe().mJ({userSettingsStore:o,data:{last_exposed_to_ai_qna_at:r(n.last_exposed_to_ai_qna_at),last_used_ai_writer_at:r(n.last_used_ai_writer_at),ai_assistant_onboarding_phase_last_set_at:r(n.ai_assistant_onboarding_phase_last_set_at),ai_assistant_tutorial_dismissed_at:r(n.ai_assistant_tutorial_dismissed_at),ai_sales_assisted_extra_notification_seen_at:r(n.ai_sales_assisted_extra_notification_seen_at),qna_reminders_shown_at:(0,w().O9)(n.qna_reminders_shown_at)?n.qna_reminders_shown_at.map((e=>(0,i().K1)({date:e,daysToAdd:-t}))):void 0},transaction:e})}})},ee=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetNotionAiSidebarNewBadge",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{ai_sidebar_item_new_badge_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},te=()=>{const t=Be().default.state.currentSpaceViewStore;t&&Ie().createAndCommit({userAction:"SidebarPersonalHomeSettings.markWelcomeAnimationAsSeen",environment:e,canUndo:!0,perform:e=>{const o=t.getSettingsStore().getKeyStore("personal_home").getKeyStore("seen_welcome_animation");Ae().KY({store:o,transaction:e,value:!1})}})},oe=()=>{const t=Be().default.state.currentSpaceViewStore;t?Ie().createAndCommit({environment:e,userAction:"debuggingHelpers.resetDatabaseAISummaryDismiss",canUndo:!0,perform:e=>{ke().AG(t,e,{dismissed_db_page_summary_suggestion:0})}}):console.error("Could not find current space view")},ne=()=>{const t=Be().default.state.currentSpaceViewStore;t?Ie().createAndCommit({userAction:"githubAIConnector.onboarding.dismissPersonalAuthPrompt",environment:e,canUndo:!0,perform:e=>{t&&Ie().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),dismissed_github_personal_auth_prompt:!1}},transaction:e})}}):console.error("Could not find current user settings")},re=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.clearQnAOnboarding",environment:e,canUndo:!0,userId:t.id,perform:e=>{var o;xe().mJ({userSettingsStore:t,data:{ai_qna_intro_onboarding_phase:null,last_exposed_to_ai_qna_at:null,last_used_ai_writer_at:null,qna_reminders_shown_at:null,ai_assistant_onboarding_phase:null,ai_assistant_tooltips_onboarding_phase:null,ai_onboarding_phase:null,ai_assistant_onboarding_phase_last_set_at:null,ai_sales_assisted_extra_notification_seen_at:null,ai_assistant_tutorial_dismissed_at:null,assistant_summarize_this_page_shown_at:void 0,ai_qna_abandoned_search_reminder_shown_at:void 0,callout_dismissal_timestamps:((null===(o=t.getSettings())||void 0===o?void 0:o.callout_dismissal_timestamps)??[]).filter((e=>"ai_assistant_announcement"!==e.name))},transaction:e})}}):console.error("Could not find current user settings")},ie=()=>{const{currentSpaceViewStore:t}=Be().default.state;t&&Ie().createAndCommit({environment:e,userAction:"AiSlackQnaNotificationTooltip.clearSlackQnaAnnouncementSeenAt",canUndo:!0,perform:e=>{Ie().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),slack_universal_qna_announcement_seen_at:null}},transaction:e})}})},ae=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetTwoWayLimitAddRelationConfirmationDialog",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{relation_limit_confirmation_dialog_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},se=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetAiPageTranslationPassiveSuggestions",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{ai_page_translation_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},le=()=>{const{currentSpaceViewStore:t}=Be().default.state;t&&Ie().createAndCommit({environment:e,userAction:"AiGoogleDriveQnaNotificationTooltip.clearGoogleDriveQnaAnnouncementSeenAt",canUndo:!0,perform:e=>{Ie().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),google_drive_universal_qna_announcement_seen_at:null}},transaction:e})}})},ce=()=>{const t=Be().default.state.currentSpaceStore,o=Be().default.state.currentSpaceViewStore;t&&o?Ie().createAndCommit({userAction:"debuggingHelpers.resetAssistantLeapSettings",environment:e,canUndo:!0,perform:e=>{Ae().zv({store:t,data:{settings:{...t.getSettings(),enable_ai_training:void 0}},transaction:e}),Ie().applyOperation({store:o,operation:{pointer:o.pointer,path:["settings"],command:"update",args:{...o.getSettings(),has_user_seen_leap_modal:!1}},transaction:e})}}):console.error("Could not find current space")},de=()=>{const t=Be().default.state.currentSpaceViewStore;t?Ie().createAndCommit({userAction:"slackAIConnector.onboarding.dismissPersonalAuthPrompt",environment:e,canUndo:!0,perform:e=>{t&&Ie().applyOperation({store:t,operation:{pointer:t.pointer,path:["settings"],command:"update",args:{...t.getSettings(),dismissed_slack_personal_auth_prompt:!1}},transaction:e})}}):console.error("Could not find current user settings")},ue=()=>{const{RouterStore:t}=e,o=Be().default.state.currentSpaceStore;if(!o)return;const n=t.state.route;let r;if("chat"===n.name?r=n.threadId:"page"===n.name&&(r=(0,ye().ZA)(n.chatThreadId)),!r)return;const i=je().Ei.createChildStore(o,{id:r,spaceId:o.id,table:h().To});return{thread:i,messages:i.getMessageStores()}},pe=()=>{const{thread:e}=ue()??{};return e?e.getTranscript():[]},ge=()=>(0,o(943387).XY)(pe()),he=()=>{const e=pe(),t=e.filter(ve().av).flatMap((e=>{var t;return(null===(t=e.result)||void 0===t?void 0:t.entities)??[]})).filter((e=>"app"===e.type||"page"===e.type)).map((e=>e.id));return 0===t.length?p().RecordMap.create({}).toJson():(0,ve().sL)({transcript:e,pageOrAppId:t[0]}).toJson()},Ge=()=>{var t,o,n,r,i;const{RouterStore:a}=e,s=a.state.route;if("page"!==s.name)return;const l=s.collectionViewId;if(!l)return void console.error("Must run this from a Form view");const c=null===(t=I(l,"collection_view"))||void 0===t?void 0:t.value;if(!c||"form_editor"!==c.type)return void console.error("Must run this from a Form view");const d=(null===(o=c.format)||void 0===o||null===(o=o.form_block_pointer)||void 0===o?void 0:o.id)??"",u=null===(n=I(d,"block"))||void 0===n?void 0:n.value;if(!u)return void console.error("Can't load form block");const p=(null===(r=u.format)||void 0===r||null===(r=r.form_layout_pointer)||void 0===r?void 0:r.id)??"",g=null===(i=I(p,"layout"))||void 0===i?void 0:i.value;g?(console.log("Form editor view: \n"),console.log(c),console.log("Form block: \n"),console.log(u),console.log("Form layout: \n"),console.log(g)):console.error("Can't load form layout")},Ke=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetJiraOnboardingTourLaunch",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{tutorials:{"jira-sync-onboarding":"all-projects-tooltip"},jira_sync_onboarding_tour_state:"notSeen",seen_jira_sync_source_tooltip:!1},transaction:e})}}):console.error("Could not find current user settings")},Je=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetImproveJiraSyncPopup",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{seen_improve_jira_sync_popup:null},transaction:e})}}):console.error("Could not find current user settings")},Qe=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetJiraSetupGuide",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{jira_sync_guide_dismissed_at:null},transaction:e})}}):console.error("Could not find current user settings")},Ze=async()=>{const{currentSpaceStore:t,currentSpaceViewStore:n}=Be().default.state;if(t){const r=await(0,o(448433).h)({environment:e,currentSpaceStore:t,currentSpaceViewStore:n}),i=new Map;return r.getAllBlocks().forEach((e=>{e.block.source.forEach((t=>{const o=i.get(t)||[];o?i.set(t,[...o,e.block]):i.set(t,[e.block])}))})),{...r,groupedPages:i}}},et=async()=>{var t;const o=null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.getDedicatedWorkerConnection_DEBUG_ONLY();if(!o)throw new Error("Browser SQLite is not active here!");await o.completelyRebuildSqliteDb(),console.log("Browser SQLite DB successfully reset!")},ot=async()=>{try{var t;await(null===(t=e.defaultRecordCache.persistedRecordCache)||void 0===t?void 0:t.reset()),o(670631).A.reset()}catch(n){console.error("Error resetting SQLite:",n)}finally{console.log("SQLite reset successfully")}},nt=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unread_and_read",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US";const r=q();if(r){const i=await be().callApi({eventName:"getNotificationsForInbox",environment:e,data:{spaceId:r,size:o,type:t,locale:n}});console.log(i)}else console.log("no space id")},rt=t=>{const o=p().RecordMapWithRole.create();for(const[n,r]of Object.entries(t)){if(!v().bI(n)||!Array.isArray(r))throw new Error(`Not a table: ${n}. Argument should be like { block: [id1, id2], collection: [...], ... }`);for(const t of r){const r={table:n,id:t},i=e.defaultRecordCache.inMemoryRecordCache.getRecord({pointer:r,userId:e.currentUser.id});i&&o.setValueAndRole(r,i.value,i.role)}}return o},it=e=>rt(e).toRecordMap(),at=()=>{const t=L();t&&(0,o(198874).l)({environment:e,pageStore:t,duplicateTo:"private_pages",triggeredFrom:"debugging_helper"})},st=()=>{const t=L();if(!t)return;const n=(new me).mapPageToXML({pagePointer:t.getSpaceShardedPointer(),intl:(0,c()._z)(),getRecordModel:e.defaultRecordCache.inMemoryRecordCache.makeGetRecordModelFn(e.currentUser.id),serverOrClientConfig:{domainBaseUrl:Te().A.domainBaseUrl,publicDomainBaseUrl:Te().A.publicDomainName},experimentService:Le().default,formulasModule:a()});return(0,o(706461)._o)(n)},lt=async t=>await(0,o(207276).p)({environment:e,chatTranscriptStorageStep:t,chatStartTimestamp:Date.now(),makeActiveSession:!0}),ct=()=>{const t=Be().default.state.currentUserSettingsStore;t?Ie().createAndCommit({userAction:"debuggingHelpers.resetAssistantSuggestionExposure",environment:e,canUndo:!0,userId:t.id,perform:e=>{xe().mJ({userSettingsStore:t,data:{ai_suggested_skill_exposure_tracker:null},transaction:e})}}):console.error("Could not find current user settings")},dt=()=>{console.error("Mock connector statuses are not enabled in production")},ut=()=>{we().ZC.setState(!1)},pt=(t,o)=>{if(we().ZC.state)try{we().Wh(e,t,o),console.log("Setting mock connector status for",t,o)}catch(n){console.error(n)}else console.error("Mock connector statuses are not enabled")},gt=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2500;we().jx(e,t).catch((e=>{console.error(e)})).finally((()=>{console.log("Mock connector statuses run through complete.")}))};return{getRecordFromApi:t,getRecordFromCache:I,getAdminUrl:T,getSelectedBlocks:()=>Ve().default.state.stores,openInAdmin:P,openSelectedBlocksInAdmin:R,openCurrentPageCreatorInAdmin:O,getCurrentPage:L,getCurrentLayoutStore:()=>{var e,t;const n=Re().g.state.isOpen&&"layout-editor"===Re().g.state.mode&&Re().g.state.collectionStore;if(n){var r,i;const e=null===(r=o(878423).A.state.caches[o(342).oB])||void 0===r?void 0:r.inMemoryRecordCache;return null===(i=n.getLayoutStore())||void 0===i?void 0:i.clone(e)}const a=null===(e=Be().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.getAssociatedLayoutStore();if(a)return a;const s=n?[n]:(null===(t=Be().default.state.mainEditorCurrentBlockStore)||void 0===t?void 0:t.getCollectionStores())??[];if(0===s.length)return void console.error("Collection pages use layouts, but can't find a collection page in the main editor.");const l=s.map((e=>e.getLayoutStore())).filter(w().O9);if(0!==l.length)return l.length>1&&console.error("Multiple layout stores found, returning first one"),l[0];console.error("This collection doesn't have a layout in main editor.")},addDuplicateContentTabToCurrentLayout:U,removeAllCollectionPageSections:j,setPageSectionVisibility:N,getCurrentNormalizedPropertyGroups:()=>{if(!Be().default.state.mainEditorCurrentBlockStore)return void console.error("No current mainEditorCurrentBlockStore");const e=Be().default.state.mainEditorCurrentBlockStore.getAssociatedCollectionStore()||Be().default.state.mainEditorCurrentBlockStore.getCollectionStore();if(e)return e.getNormalizedPropertyGroups();console.error("Property groups are stored on collections but can't find collection in main editor.")},openCurrentPageInAdmin:B,openCurrentSpaceInAdmin:E,quickFind:function(e){const t=D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0),o=qe().Uc(t);return o&&o.then((e=>"success"===e.type?e.data:e))},quickFindRequest:function(e){return D(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)},quickFindCollections:F,getCurrentPageDetail:M,getHomeBlockIdsForUser:Q,getRecordStore:A,getRecordDetail:x,getRecordTitle:k,getRecordTree:W,overrideStatsigLocalExperiment:(e,t)=>{z(),Oe().A.updateLocalOverrideConfig(e,t)},overrideStatsigLocalFeatureGate:(e,t)=>{z(),Oe().A.updateLocalOverrideGate(e,t)},removeAllStatsigLocalOverrides:()=>{z(),Oe().A.removeAllLocalOverrides()},getCurrentSpaceId:q,getCurrentUserId:G,getAutomationsForSelectedBlocks:()=>Ve().default.state.stores.map((e=>tt(e,0))).filter(w().O9),getAutomationsForCurrentPage:J,getCurrentThread:ue,getCurrentThreadSteps:pe,getCurrentThreadOperations:ge,getCurrentThreadRecordMap:he,debugCompileAutomation:Z,getAutomationAnalysis:X,generateTutorialData:(e,t,o)=>{const n="production";if("development"!==n&&"local"!==n)return;const r=o??Be().default.state.mainEditorCurrentBlockStore,i=null==r?void 0:r.getType(),a=null==r?void 0:r.getProperties(),s=null==r?void 0:r.getFormat();if(!(r&&i&&a&&s))return void console.log(`Missing one of these: ${JSON.stringify({rootBlockStore:r,type:i,properties:a,format:s})}`);function l(e,t){const o=t.getContentStores();return C().Bq(o.map(((t,o)=>{const n=t.getType(),r=t.getProperties(),i=t.getFormat();if(!n||!r||!i)return;return[{uri:`${e}/${o}`,type:"block",parentUri:e,parentType:"block",blockValue:{type:n,properties:r,format:i}},...l(`${e}/${o}`,t)]}))).filter(w().O9)}const c=[{uri:e,type:"block",parentUri:t,parentType:"collection",blockValue:{type:i,properties:a,format:s}},...l(e,r)];function d(t){const o=t.replace(e,"").split("/");return C().xQ(e)+o.join("_")}const u={},p=c.map((t=>{const o=t.uri;return JSON.stringify(t,((n,r)=>{if("uri"===n||"parentUri"===n)return["<<<START>>>","`",r.replace(e,"${uri}"),"`","<<<END>>>"].join("");if("title"===n&&Array.isArray(r)&&"image"!==t.blockValue.type){const e=[];for(const[t,n]of r.entries()){if(n.length>1&&"a"===n[1][0][0])return n;const r=d(`${o}/${t}`),i=[["<<<START>>>",`LocalizationHelper.formatMessage(messages.${r})`,"<<<END>>>"].join(""),...n.slice(1)];u[r]={defaultMessage:n[0],id:r,description:"Page template's content"},e.push(i)}return e}return r}))})).map((e=>e.replace(/"<<<START>>>/g,"").replace(/<<<END>>>"/g,"").replace(/<<<QUOTE>>>/g,'"')));return`\n\t\t\tconst messages = defineMessages({\n\t\t\t\t${(0,w().WP)(u).map((e=>{let[t,o]=e;return`"${t}": {\n\t\t\t\t\t\t\t\t\tid: "${o.id}",\n\t\t\t\t\t\t\t\t\tdefaultMessage: \`${o.defaultMessage}\`,\n\t\t\t\t\t\t\t\t\tdescription: "${o.description}",\n\t\t\t\t\t\t\t\t}`})).join(",\n")}\n\t\t\t})\n\t\t\tconst uri = "${e}"\n\t\t\treturn [\n\t\t\t\t${p.join(", ")}\n\t\t\t]`},setHomeTemplatesPersona:e=>{const t=[...Ee().U7.map((e=>({personaValue:{type:"function",persona:e},key:`function - ${e}`}))),...Ee().mh.map((e=>({personaValue:{type:"space_intent",persona:e},key:`space_intent - ${e}`}))),...Ee().Ol.map((e=>({personaValue:{type:"space_type",persona:e},key:`space_type - ${e}`})))],n=t.find((t=>t.key===e));n?o(769705).A.setState(n.personaValue):console.error("input must be one of the following values",t.map((e=>e.key)))},setHomeLearnUserType:e=>{const t={isMultiplayer:e.isMultiplayer??!1,isNewAccount:e.isNewAccount??!1,isWorkspaceOwner:e.isWorkspaceOwner??!1,isOnTrial:e.isOnTrial??!1,persona:e.persona};o(116499).A.setState(t)},advanceAssistantOnboardingNDays:Y,printAllFormsDataModel:Ge,resetJiraOnboardingTourLaunch:Ke,resetImproveJiraSyncPopup:Je,resetJiraSetupGuide:Qe,getAllUserSignals:_,loadAllUserSignals:g,getLocalSearchableCache:Ze,saveFileFromOpfs:async e=>{const t=await navigator.storage.getDirectory(),o=await(await t.getFileHandle(e)).getFile(),n=document.createElement("a");n.href=URL.createObjectURL(o),n.download=e,n.click()},resetBrowserSqlite:et,resetSqliteForOffline:ot,resetNotionAiSidebarNewBadge:ee,resetWelcomeHomeAnimation:te,resetDatabaseAISummaryDismiss:oe,getNotificationsforInbox:nt,createRecordMapWithRole:rt,createRecordMap:it,findId:Xe.bind(null,e),editRecordJson:n,updateRecordJson:u,duplicateTranslatedPage:at,loadAssistantChatTranscriptStorageStep:lt,resetGithubPersonalAuthPrompt:ne,resetSlackPersonalAuthPrompt:de,getTranslatedPageXml:st,resetAssistantSuggestionExposure:ct,resetGoogleDriveOnboarding:le,resetSlackOnboarding:ie,resetAssistantOnboarding:re,resetAssistantLeapSettings:ce,resetTwoWayLimitAddRelationConfirmationDialog:ae,resetAiPageTranslationPassiveSuggestions:se,getCurrentCellId:K,turnOnMockConnectorStatuses:dt,setMockConnectorStatus:pt,runThroughAllMockConnectorStatuses:gt,turnOffMockConnectorStatuses:ut}}(e);for(const[n,r]of Object.entries(t))(0,o(604341).exposeDebugValue)(n,r);return t}))},198874:(e,t,o)=>{o.d(t,{l:()=>b});o(16280);var n=()=>o(584262),r=()=>o(534177),i=()=>o(896628),a=()=>o(910302),s=()=>o(44729),l=()=>o(857783),c=()=>o(185544),d=()=>o(751156),u=()=>o(183324),p=()=>o(989423),g=()=>o(450486),m=()=>o(351360),f=()=>o(430483),v=()=>o(77246),h=()=>o(611371),y=()=>o(825726);function b(e){try{const{pageStore:t,environment:o,duplicateTo:y,triggeredFrom:b}=e,{currentUserStore:S,currentSpaceStore:_,currentSpaceViewStore:w}=m().default.state;if(!f().zD.isFullPageTranslateEnabled())throw new Error("Invalid call to duplicateTranslatedPage: full page translate is not enabled");if(!S||!_||!w)throw new Error("Cannot duplicate translated page: missing required stores");if(!(0,h().EF)(o))throw new Error("Cannot duplicate translated page: user cannot create page");const A=v().Uv.getStateForBlock(t.id);if(!A)throw new Error("Cannot duplicate translated page: no editor mode state");if("translate_locked"!==A.mode||"active"!==A.status)throw new Error("Cannot duplicate translated page: invalid editor mode state");const k=async e=>{const{duplicateStore:r,duplicateBlockResultStatusPromise:s}=e;try{"success"===(await s).status&&(r.isLocked()&&d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPage.unlockPage",environment:o,canUndo:!0,perform:e=>{i()._l({environment:o,store:r,isLocked:!1,transaction:e})}}),l().uK({environment:o,store:r,pageVisitSource:n().y8.SavePageTranslationCopy}),a().DL({pageStore:t,environment:o,triggeredFrom:"navigation"}))}catch(c){throw new Error("Error duplicating translated page",{cause:c})}};if((0,p().u4)({environment:o,event:{eventName:"duplicate_translated_page",eventProperties:{duplicate_to:y,triggered_from:b,page_id:t.id}}}),"parent"===y){const e=t.getParentStore();if("block"!==(null==e?void 0:e.table)&&"team"!==(null==e?void 0:e.table)&&"space"!==(null==e?void 0:e.table)&&"collection"!==(null==e?void 0:e.table))throw new Error("Cannot duplicate translated page: invalid parent store table");const n=d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPageToParent",environment:o,canUndo:!0,perform:n=>{const{blockStores:i,onComplete:a}=u().duplicateBlock({environment:o,stores:[t],transaction:n,targetSpaceId:_.id,preferDuplicateLocation:"local",applyTranslationMap:A.translationMap,options:{addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!t.isInsideTemplate()}}),l=i[0],d={type:"append",after:t.id};switch(e.table){case"team":(0,g().moveToTeamImpl)({transaction:n,currentSpaceViewStore:w,teamStore:e,targets:[l],environment:o,location:d,action:"move",value:{type:"team",id:e.id,spaceId:_.id}});break;case"block":s().NI({parentStore:e,childStore:l,transaction:n,after:d.after});break;case"space":c().yM({environment:o,spaceStore:_,spaceViewStore:w,pageStore:l,isPrivate:!0,location:d,transaction:n});break;case"collection":s().X$({childStore:l,parentStore:e,transaction:n});break;default:(0,r().HB)(e)}return{duplicateStore:l,duplicateBlockResultStatusPromise:a}}}).performResult;return k(n),n.duplicateStore}if("private_pages"===y){const e=d().createAndCommit({userAction:"fullPageTranslationActions.duplicateTranslatedPageToPrivatePages",environment:o,canUndo:!0,perform:e=>{const{blockStores:n,onComplete:r}=u().duplicateBlock({environment:o,stores:[t],transaction:e,targetSpaceId:_.id,preferDuplicateLocation:"local",applyTranslationMap:A.translationMap,options:{addCopyName:!1,deepCopyTransclusionContainers:!0,resolveTemplateVariables:!t.isInsideTemplate()}}),i=n[0];return c().yM({environment:o,spaceStore:_,spaceViewStore:w,pageStore:i,isPrivate:!0,location:{type:"prepend"},transaction:e}),{duplicateStore:i,duplicateBlockResultStatusPromise:r}}}).performResult;return k(e),e.duplicateStore}(0,r().HB)(y)}catch(t){(0,y().l)(t)}}},205618:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:o(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const r=n},224011:(e,t,o)=>{o.d(t,{A:()=>i});var n=()=>o(705540);class r extends(()=>o(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await n().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},n().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const i=new r},271084:(e,t,o)=>{o.d(t,{k:()=>r});o(581454);class n extends(()=>o(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[r,i]=t;return i-n})).map((e=>{let[t,o]=e;return t}))}}const r=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",r)},277201:(e,t,o)=>{o.d(t,{I:()=>_,i:()=>A});var n=o(296540),r=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(387964),l=()=>o(340498),c=()=>o(959013),d=()=>o(186445),u=()=>o(38337),p=()=>o(869562),g=()=>o(749687),m=()=>o(962730),f=()=>o(948914),v=()=>o(145214),h=()=>o(285790),y=()=>o(35392),b=()=>o(859428),S=o(474848);function _(e){const t=(0,r().v3)(),o=(0,r().Y0)(),n=(0,c().tz)(),a=(0,i().O$)(g().sidebarMouseEnteredStore),l=(0,i().O$)(f().b),u=(0,i().O$)(d().$o),m=n.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),v=(!o.isElectronMac||!u)&&!l&&a;return(0,S.jsx)(A,{isVisible:v,icon:s().S,caption:m,onClick:()=>{p().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const w={width:l().Ev.lg,height:l().Ev.lg,fill:"inherit"};function A(e){const t=(0,r().Y0)(),o=(0,a().IS)((e=>({keyboardShortcut:{color:e.text.contrastSecondary},button:{fill:e.mediumIconColor}})),[]),i=(0,n.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...o.button,...e.style})),[e.style,o.button,t.isMobile]);return(0,S.jsx)(b().A,{renderTooltip:()=>(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,S.jsx)(y().A,{style:o.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?m().W.Right:m().W.Bottom,render:o=>(0,S.jsx)(v().A,{tag:h().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:i,hoveredStyle:e.hoveredStyle,iconStyle:w,mobileFeedback:t.isMobile,onClick:e.onClick,className:u().P7S,...o})})}},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(n=i,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...i),t)}}o.d(t,{A:()=>n})},303742:(e,t,o)=>{o.d(t,{o:()=>i});var n=()=>o(640653),r=()=>o(508496);function i(e){return!!e&&Boolean((0,n().IL)(e)&&"external_pages_sidebar"===r().default.getEligibleGroup({experimentId:"sharing_collaboration_sidebar_guest_aggregation"}))}},311004:(e,t,o)=>{e.exports=o.p+"edfba4a6d1ff7acd.png"},352759:(e,t,o)=>{o.d(t,{p:()=>y,t:()=>b});o(581454),o(296540);var n=()=>o(484714),r=()=>o(847249),i=()=>o(584262),a=()=>o(959013),s=()=>o(857783),l=()=>o(255018),c=()=>o(939740),d=()=>o(958378),u=()=>o(89924),p=()=>o(900967),g=()=>o(728611),m=()=>o(211716),f=()=>o(592968),v=()=>o(551619),h=o(474848);function y(e){let{store:t}=e;return(0,h.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:v().NV,onClick:v().sx,children:(0,h.jsx)(l().A,{type:"page",store:t,headerText:(0,h.jsx)(a().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function b(e){let{store:t}=e;const o=(0,n().v3)(),a=(0,r().K8)((()=>(0,p().c)(t,o)),[t,o]),l=(0,r().K8)((()=>a.backlinks.map((e=>e.backlinkStore))),[a]).map(((e,t)=>({key:e.id,render:t=>(0,h.jsx)(d().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:n}=t;f().F.setState({isOpen:!1});const r=g().Vr(n);s().uK({environment:o,store:e,openInNew:r,visitType:m().ig.Link,pageVisitSource:i().y8.Backlinks})}})));return(0,h.jsx)(c().Ay,{type:c().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:l,render:e=>(0,h.jsx)(u().A,{...e})}]})}},387964:(e,t,o)=>{o.d(t,{S:()=>i});o(296540);var n=o(474848);const r={viewBox:"0 0 20 20",svg:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,n.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},i=(0,o(340498).wt)("arrowChevronDoubleBackward",r)},398842:(e,t,o)=>{o.d(t,{Jv:()=>y,Zr:()=>b,Rl:()=>S,mA:()=>h});var n=o(296540),r=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(970013),l=()=>o(743176),c=()=>o(68465),d=()=>o(159588),u=()=>o(963589),p=()=>o(331542),g=o(474848);function m(){const e=(0,a().DP)();return(0,g.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,g.jsx)(p().A,{legacySize:14})})}var f=()=>o(399275);const v=function(){return(0,g.jsx)(o(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,g.jsx)(o(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const h=n.memo((function(e){const{propertySchema:t,showIcon:n,showDragIcon:i,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:m,className:f,labelSizeVariant:v}=e,h=(0,r().v3)(),{device:y}=h,b=y.isMobile?16:14,_=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:b,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===v||i?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[b,s,u,v,i,c]);return(0,g.jsxs)("div",{className:f,style:_.container,children:[n&&(0,g.jsxs)("div",{style:_.iconWrapper,children:[(0,g.jsx)("div",{style:_.itemIcon,children:(0,g.jsx)(S,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,g.jsx)("div",{style:_.dragHandle,children:(0,g.jsx)(o(57232).A,{style:m,iconSize:12,iconStyle:_.dragIcon})})]}),!s&&(0,g.jsx)("div",{style:{...o(284371).RC},children:t.name}),l]})}));function y(e){const{propertySchema:t}=e,o=(0,r().v3)();return(0,i().K8)((()=>(0,c().O0)(o)&&s().$M(t)&&s().om(t)),[o,t])?(0,g.jsx)(v,{}):null}function b(e){let{propertyId:t,collectionContextStore:o}=e;return(0,i().K8)((()=>{var e;const n=null===(e=o.collectionStore())||void 0===e?void 0:e.id;if(!n)return!1;const r=f().d.state.collectionsProperties[n];return!!r&&"Loading"===r[t]}),[o,t])?(0,g.jsx)(m,{}):null}function S(e){const{propertySchema:t,iconSize:o,iconStyle:n}=e,{isMobile:i}=(0,r().Y0)(),s=(0,a().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=i?18:16;return(0,g.jsx)(l().zB,{type:t.type,icon:t.icon,size:o||d,theme:s,style:n,isDefaultNoticonEnabled:c})}},399275:(e,t,o)=>{o.d(t,{d:()=>r});o(898992),o(354520);class n extends(()=>o(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,o(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const o=this.state.collectionsProperties[e],n=o?{...o,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}removeCollectionProperties(e,t){const o=this.state.collectionsProperties[e];if(!o)return;const n=Object.fromEntries(Object.entries(o).filter((e=>{let[o]=e;return!t.has(o)})));if(0===Object.keys(n).length){const{[e]:t,...o}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:o})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:n}})}}const r=new n;(0,o(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",r)},413267:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},435930:(e,t,o)=>{o.d(t,{s:()=>a});const n={id:"pageLayoutEditor.property",defaultMessage:"Property",description:"Label for the property section in the page layout editor"},r={id:"pageLayoutEditor.titleWithIcon",defaultMessage:"Heading",description:"Label for the titleWithIcon section in the page layout editor"},i={id:"pageLayoutEditor.collectionView",defaultMessage:"Database View",description:"Label for the form submit button section in the form page layout editor"},a=(0,o(959013).YK)({cover:{id:"pageLayoutEditor.cover",defaultMessage:"Cover"},properties:{id:"pageLayoutEditor.properties",defaultMessage:"Property group"},inlinePageSections:{id:"pageLayoutEditor.inlinePageSections",defaultMessage:"Inline Page Sections"},expandedBacklinks:{id:"pageLayoutEditor.expandedBacklinks",defaultMessage:"Backlinks"},discussions:{id:"pageLayoutEditor.discussions",defaultMessage:"Page Comments"},editor:{id:"pageLayoutEditor.editor",defaultMessage:"Content"},tabs:{id:"pageLayoutEditor.tabs",defaultMessage:"Tabs"},transcript:{id:"pageLayoutEditor.transcript",defaultMessage:"Transcript"},bottomControls:{id:"pageLayoutEditor.bottomControls",defaultMessage:"Bottom Controls"},selectAModulePrompt:{id:"pageLayoutEditor.selectAModuleTitle",defaultMessage:"Select a module to configure"},deleteModuleButton:{id:"pageLayoutEditor.deleteModuleButton",defaultMessage:"Delete"},views:{id:"pageLayoutEditor.views",defaultMessage:"Views"},viewsMain:{id:"pageLayoutEditor.views",defaultMessage:"Views"},relationsGroup:{id:"pageLayoutEditor.relationsGroup",defaultMessage:"Relations group"},formTitle:{id:"pageLayoutEditor.formTitle",defaultMessage:"Form Title"},formQuestion:{id:"pageLayoutEditor.formQuestion",defaultMessage:"Form Question"},formSubmit:{id:"pageLayoutEditor.formSubmit",defaultMessage:"Form Submit"},placeholder:{id:"pageLayoutEditor.placeholder",defaultMessage:"New"},recentActivity:{id:"pageLayoutEditor.recentActivity",defaultMessage:"Recent activity"},collaborators:{id:"pageLayoutEditor.collaborators",defaultMessage:"Top collaborators"},teamspaces:{id:"pageLayoutEditor.teamspaces",defaultMessage:"Teamspaces"},normalizedTitleWithIcon:r,titleWithIcon:r,deleted_property:n,property_number:n,property_title:n,property_person:n,property_file:n,property_text:n,property_checkbox:n,property_url:n,property_email:n,property_phone_number:n,property_created_by:n,property_last_edited_by:n,property_button:n,property_select:n,property_multi_select:n,property_status:n,property_date:n,property_created_time:n,property_last_edited_time:n,property_last_visited_time:n,property_relation:n,property_rollup:n,property_formula:n,property_auto_increment_id:n,property_location:n,property_verification:n,property_geo_point:n,property:n,collectionView:i,collectionViewV2:i})},450486:(e,t,o)=>{o.r(t),o.d(t,{moveToTeamImpl:()=>l});var n=()=>o(496603),r=()=>o(534177),i=()=>o(44729),a=()=>o(955930),s=()=>o(375078);function l(e){let{transaction:t,currentSpaceViewStore:o,teamStore:l,targets:c,location:d,environment:u}=e;const p=o.getTeamsStores(),g=l.getTeamPagesStore();s().maybeTurnCollectionViewIntoCollectionViewPage({environment:u,blocks:c,transaction:t});for(const s of c){const e=n().I6(p,(e=>{const t=e.getTeamPagesStore().getValue();if(t)return t.includes(s.id)}));(null==e?void 0:e.id)!==l.id&&("append"===d.type?i().NI({parentStore:g,childStore:s,after:d.after,transaction:t}):"prepend"===d.type?i().Ti({parentStore:g,childStore:s,before:d.before,transaction:t}):(0,r().HB)(d),e&&a().Ex({teamStore:e,store:s,transaction:t}))}return l}},454531:(e,t,o)=>{o.d(t,{W:()=>g});var n=()=>o(972435),r=()=>o(867772),i=()=>o(681810),a=()=>o(901389),s=()=>o(896628),l=()=>o(383594),c=()=>o(751156),d=()=>o(892632);const u=1500,p=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image link",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:o,store:n,rect:r}=e;l().W(t,{originGap:3,originRect:r,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;l().I(),c().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{s().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:r}=e;f({environment:t,store:n,url:{originUrl:o},position:r})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(p.fileTypeCaption,{idealImageWidth:u}),onUpload:e=>{var r;l().I(),d().QM({environment:t,file:e[0],bucket:"secure",record:(null===(r=n.getCoverStore())||void 0===r?void 0:r.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:v,onProgress:h,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},m({...o,position:.5})},onError:()=>{a().f1(o.formatMessage(p.uploadFailed))}})}},{type:"embed",title:o.formatMessage(p.embedTitle),inputPlaceholder:o.formatMessage(p.embedPlaceholder),caption:o.formatMessage(p.embedCaption),buttonText:o.formatMessage(p.embedSubmit),onChange:e=>{var o;o={environment:t,store:n,url:e},m({...o,position:.5}),l().I()}},{type:"unsplash",onChange:e=>{let{url:o,position:r}=e;f({environment:t,store:n,url:{originUrl:o},position:r})}}]})}async function m(e){const{environment:t,store:o,url:a,position:l}=e,{serverCommitResult:d}=c().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{s().fg({store:o,url:a,position:l||.5,transaction:e})}});await d,i().A.state.loadingMode===r().vS&&i().A.setState({loadingMode:r().Gi,dataURL:i().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:n().A.formatMessage(p.downloading)})}function f(e){m(e),e.environment.device.isMobile&&l().I()}function v(e){const{file:t,name:o,size:a}=e;if(l().I(),i().A.setState({loadingMode:r().Wc,file:t,name:o,size:a}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,dataURL:t.dataURL,progressText:n().A.formatMessage(p.preparing)});else i().A.state.loadingMode===r().Wc&&i().A.setState({...i().A.state,loadingMode:r().vS,progressText:n().A.formatMessage(p.preparing)})}function h(e){const{progressPercent:t,progressText:o}=e;i().A.state.loadingMode===r().vS&&i().A.setState({...i().A.state,uploadProgress:t,progressText:o})}},529803:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{}const r=new n},544862:(e,t,o)=>{o.d(t,{A:()=>k});var n=o(296540),r=()=>o(484714),i=()=>o(847249),a=()=>o(959013),s=()=>o(896628),l=()=>o(454531),c=()=>o(751156),d=()=>o(600871),u=()=>o(478726),p=()=>o(227440),g=()=>o(867772),m=()=>o(681810),f=()=>o(608581),v=()=>o(145214),h=()=>o(704152),y=()=>o(807683),b=()=>o(401497),S=()=>o(534177),_=o(474848);function w(e){let{src:t,placeholderSrc:o,placeholderBehavior:r,imageStyle:i,containerStyle:a,onLoadComplete:s,testId:l}=e;const[c,d]=(0,n.useState)(!0);let u;switch(r){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(c||void 0===t);break;default:(0,S().HB)(r)}const p=(0,b().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,n.useEffect)((()=>{void 0!==t&&d(!0)}),[t]);const g=(0,n.useCallback)((e=>{d(!1),null==s||s()}),[s]);return(0,_.jsxs)("div",{style:p.container,children:[(0,_.jsx)(y().Ay,{src:t,onLoad:g,style:i,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,_.jsx)(y().Ay,{src:o,style:i,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var A=()=>o(24611);const k=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:d,height:u,proxyWidth:p}=e;const f=(0,r().v3)(),v=(0,i().uB)(void 0,o(454305).A),h=(0,i().K8)((()=>a||"suggest"===o(77246).Uv.getMode(t)),[a,t]),b=(0,i().K8)((()=>t.getCover()),[t]),S=(0,i().O$)(m().A),[A,k]=(0,n.useState)(void 0);if(!b)return null;const x=S.loadingMode!==g().pF&&S.loadingMode!==g().Wc;return(0,_.jsx)(o(801678).A,{mouseStore:v,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:r}=e;c().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),r()}})}(e,t,f),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:r,isVisible:i,isRepositioning:a}=e;return(0,_.jsx)(I,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:r,isVisible:i,isRepositioning:a,lastProxiedUrl:A,store:t,disabled:h,paddingRight:l,paddingLeft:d,mouseStore:v})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,_.jsxs)(n.Fragment,{children:[(0,_.jsx)(o(360083).A,{url:b.cover,isAuthenticated:!0,permissionRecord:b.pointer,width:p,onFinishedLoadingProxyUrl:k,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:x?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},r={width:"100%",height:u,maxHeight:280};return(0,_.jsx)(w,{src:o,placeholderSrc:x?S.dataURL:void 0,placeholderBehavior:x?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:r,imageStyle:n,onLoadComplete:C,testId:"pageCover"})}}),x&&(0,_.jsxs)("div",{style:y().fd,children:[(0,_.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,_.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==S.uploadProgress?(0,_.jsx)(o(773382).A,{percentage:S.uploadProgress}):S.progressText?(0,_.jsx)("span",{children:S.progressText}):null})]})]})})};function C(){m().A.reset()}function I(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:c,handleSavePositionClick:y,lastProxiedUrl:b,store:S,disabled:w,paddingRight:k,paddingLeft:C,mouseStore:I}=e;const x=(0,r().v3)(),M=(0,a().tz)(),T=(0,n.useCallback)((e=>function(e,t,o,n,r){r.reset();const i=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:i})}(e,x,M,S,I)),[x,M,S,I]),P=(0,i().K8)((()=>m().A.state.loadingMode),[]),R=(0,i().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":u().x6,t}(S)),[S]),{device:E}=x,B=(0,i().K8)((()=>!o&&!(0,d().LX)({device:E})),[o,E]),L=(0,i().O$)(p().e);if(w||P!==g().pF||!L)return null;const{isMobile:U}=E;return(0,_.jsx)(v().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,_.jsxs)(f().A,{isVisible:t,position:"bottom",style:{marginRight:k,marginLeft:C},children:[B&&(0,_.jsx)(h().A,{style:{borderRight:U?"none":void 0,...A().k},onClick:T,children:(0,_.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!U&&(0,_.jsx)(h().A,{style:{...A().k,borderRight:"none"},onClick:e=>c(e,b),children:(0,_.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!U&&(0,_.jsx)(h().A,{style:A().k,onClick:y,children:(0,_.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!U&&(0,_.jsx)(h().A,{style:{...A().k,borderRight:"none"},onClick:s,children:(0,_.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},551345:(e,t,o)=>{o.d(t,{VN:()=>l,or:()=>a,pV:()=>s});var n=()=>o(120114),r=()=>o(430483),i=()=>o(508496);function a(e){const{configurationState:t}=e;return t.deepFindRequested&&r().zD.isDeepFindEnabled()}function s(e){const{configurationState:t,assistantSurface:o}=e;return a({configurationState:t})&&o.isType("fullPage")}function l(){const e=r().zD.state;return(0,n().AX)(e,(e=>i().default.getConfigKey("deep_find_config",e)),(e=>i().default.checkGate({gateName:e})))}new(o(496506).default)((()=>{var e;const t=r().zD.isDeepFindEnabled(),n=Boolean(null===(e=o(295169).default.getActiveAssistantConfigurationState())||void 0===e?void 0:e.deepFindRequested);return t&&n}),{debugName:"isDeepFindActiveStore"})},562866:(e,t,o)=>{o.d(t,{$c:()=>s,aI:()=>a,cx:()=>i,uf:()=>r});var n=()=>o(645873);const r={RequestMembersModal:new(n().O2)("RequestMembersModal",(()=>Promise.all([o.e(75134),o.e(43380),o.e(96346),o.e(55373),o.e(36192),o.e(44711),o.e(62475),o.e(3151),o.e(16471),o.e(53321),o.e(58550),o.e(98629),o.e(90825),o.e(37353),o.e(29151),o.e(31895),o.e(83647),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(85515),o.e(74562),o.e(38744),o.e(63077),o.e(28271),o.e(17254),o.e(41870),o.e(90966),o.e(42120),o.e(7114),o.e(67435),o.e(92012),o.e(22462),o.e(8184),o.e(4422),o.e(28721),o.e(28866),o.e(21194),o.e(6463),o.e(71993),o.e(1213),o.e(17989),o.e(90625),o.e(59794),o.e(78846),o.e(26483),o.e(43741),o.e(81768),o.e(94387),o.e(82850),o.e(52393),o.e(77692),o.e(75601),o.e(11341),o.e(7060),o.e(82136),o.e(12739),o.e(26090),o.e(73594),o.e(93282),o.e(12341),o.e(50984),o.e(66984),o.e(40828),o.e(26199),o.e(18057),o.e(90978),o.e(56264),o.e(5023),o.e(55927),o.e(61151),o.e(72226),o.e(48199),o.e(64598),o.e(38119),o.e(77282)]).then(o.bind(o,123350)))),GoogleImportsInviteWithModal:new(n().O2)("GoogleImportsInviteWithModal",(()=>Promise.all([o.e(96346),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(38744),o.e(51195),o.e(51226)]).then(o.bind(o,720193)))),InviteDropdownMenuItemLabel:new(n().O2)("InviteDropdownMenuItemLabel",(()=>o.e(25171).then(o.bind(o,726799)))),personPropertyInviteActions:new(n().O2)("personPropertyInviteActions",(()=>Promise.all([o.e(96346),o.e(85864),o.e(92845),o.e(71718),o.e(83324),o.e(48486),o.e(95794),o.e(38744),o.e(57613)]).then(o.bind(o,980270))))},i=(0,n()._h)(r.RequestMembersModal,(e=>e.RequestMembersModal)),a=(0,n()._h)(r.GoogleImportsInviteWithModal,(e=>e.GoogleImportsInviteWithModal)),s=(0,n()._h)(r.InviteDropdownMenuItemLabel,(e=>e.InviteDropdownMenuItemLabel))},592968:(e,t,o)=>{o.d(t,{F:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const r=new n},608581:(e,t,o)=>{o.d(t,{A:()=>d});o(898992),o(354520),o(581454),o(941795);var n=o(296540),r=()=>o(401497),i=()=>o(955825),a=()=>o(284371),s=()=>o(963575),l=o(474848);function c(e){const{button:t,isLast:o}=e,s=(0,r().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,i().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,i().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const d=function(e){let{children:t,isVisible:d,position:u,style:p}=e;const g=(0,o(484714).v3)(),m=(0,r().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:a().vc(o(662303).locale).sans,position:"absolute",right:s().A.horizontal.small,bottom:s().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().A.vertical.small,bottom:void 0}})),[g]),f=n.Children.toArray(t).filter(o(534177).O9),v=f.length;return(0,l.jsx)(o(145214).A,{animate:{opacity:d?1:0},...(0,i().AH)(m.container,p,d&&m.containerHover,"top"===u&&m.containerTop),children:f.map(((e,t)=>{const r=t===v-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,l.jsx)(c,{isLast:r,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,l.jsx)(c,{isLast:r,button:e},e.key)}}))})}},709687:(e,t,o)=>{o.d(t,{r:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("bell",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M1.36914 11.7627C1.36914 12.3369 1.80664 12.7266 2.51074 12.7266H5.32031C5.38184 14.0322 6.44824 15.2285 8 15.2285C9.55176 15.2285 10.6182 14.0391 10.6797 12.7266H13.4893C14.2002 12.7266 14.6309 12.3369 14.6309 11.7627C14.6309 11.0381 13.9678 10.416 13.3457 9.81445C12.8672 9.34277 12.751 8.39941 12.6621 7.46289C12.5732 4.87207 11.8213 3.14258 10.0371 2.49316C9.77734 1.59082 9.01855 0.900391 8 0.900391C6.98145 0.900391 6.22266 1.59082 5.96289 2.49316C4.17871 3.14258 3.42676 4.87207 3.33789 7.46289C3.24902 8.39941 3.13965 9.34277 2.6543 9.81445C2.03906 10.416 1.36914 11.0381 1.36914 11.7627ZM3.00293 11.4756V11.3936C3.18066 11.1953 3.57715 10.833 3.91211 10.4434C4.38379 9.90332 4.60254 8.92578 4.6709 7.62695C4.75293 4.85156 5.60059 3.92871 6.70801 3.62793C6.87207 3.58691 6.96777 3.50488 6.98145 3.32031C7.01562 2.62305 7.39844 2.1582 8 2.1582C8.60156 2.1582 8.99121 2.62305 9.01855 3.32031C9.03223 3.50488 9.12793 3.58691 9.29883 3.62793C10.3994 3.92871 11.2539 4.85156 11.3291 7.62695C11.3975 8.92578 11.623 9.90332 12.0879 10.4434C12.4297 10.833 12.8125 11.1953 12.9834 11.3936V11.4756H3.00293ZM6.6123 12.7266H9.3877C9.33984 13.5811 8.7793 14.1348 8 14.1348C7.22754 14.1348 6.66699 13.5811 6.6123 12.7266Z"})})},765974:(e,t,o)=>{o.r(t),o.d(t,{exclamationMarkTriangleFillIcon:()=>r,iconDefinition:()=>n});o(296540);const n={viewBox:"0 0 20 20",svg:(0,o(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},r=(0,o(340498).wt)("exclamationMarkTriangleFill",n)},799384:(e,t,o)=>{o.d(t,{o:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("newSidebarSearch",{viewBox:"0 0 20 20",svg:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 8.75C4 6.12665 6.12665 4 8.75 4C11.3734 4 13.5 6.12665 13.5 8.75C13.5 11.3734 11.3734 13.5 8.75 13.5C6.12665 13.5 4 11.3734 4 8.75ZM8.75 2.5C5.29822 2.5 2.5 5.29822 2.5 8.75C2.5 12.2018 5.29822 15 8.75 15C10.2056 15 11.545 14.5024 12.6073 13.668L16.7197 17.7803C17.0126 18.0732 17.4874 18.0732 17.7803 17.7803C18.0732 17.4874 18.0732 17.0126 17.7803 16.7197L13.668 12.6073C14.5024 11.545 15 10.2056 15 8.75C15 5.29822 12.2018 2.5 8.75 2.5Z"})})},801678:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),r=()=>o(662303),i=()=>o(484714),a=()=>o(847249),s=()=>o(955825),l=()=>o(959013),c=()=>o(100622),d=()=>o(496603),u=()=>o(284371),p=()=>o(720665),g=()=>o(145214),m=o(474848);const f={isRepositioning:!1};const v=function(e){const t=(0,n.useRef)(null),r=(0,i().v3)(),{isMobile:l}=(0,i().Y0)(),[c,u]=(0,n.useState)(f),g=(0,n.useCallback)((()=>{u(f)}),[]),{renderControl:v,onFlushTemporaryPosition:y,style:b,source:S,store:_}=e,{isRepositioning:w,image:A,startDragRenderedPosition:k,startDragImageScreenHeight:C}=c,I=(0,a().K8)((()=>0===o(502438).default.state.stores.length),[]),[x,M]=(0,n.useState)(!1),T=(0,a().uB)(e.mouseStore,o(454305).A),P=(0,a().K8)((()=>T.state.mouseEntered),[T]),R=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:w?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[w]),E=(0,a().K8)((()=>function(e,t,o){return(0,d().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,d().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const n=t.getFormat(),r=n.page_cover_position;if((0,d().Et)(r))return r;return o}(e,t)}(S,_,c.temporaryPosition)),[c.temporaryPosition,S,_]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&w&&y({imagePosition:E,reset:()=>{T.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[E,w,T,y,g]),w&&!I&&g();const B=(0,n.useMemo)((()=>(0,d().nF)((e=>{T.setState({...T.state,mouseEntered:!0})}),100)),[T]),L=(0,n.useMemo)((()=>(0,d().sg)((e=>{T.setState({...T.state,mouseEntered:!1})}),100)),[T]),U=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:r});const n=new Image;n.onload=()=>{u((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[r]),j=(0,n.useCallback)((e=>{y({imagePosition:E,reset:()=>{g()}})}),[E,y,g]),N=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&M(!0)}),[]),V=(0,n.useCallback)((()=>{M(!0)}),[]),O=(0,n.useCallback)((e=>{if(A&&w){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/A.width*A.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:E})))}}}),[A,E,w]),D=(0,n.useCallback)((e=>{if(w){const t=e.diffY/(C||0)+(k||0);u((e=>({...e,temporaryPosition:(0,d().LI)((0,o(40845).A)(t,0,1),4)})))}}),[w,C,k]),F=(0,n.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),H=(0,a().K8)((()=>v({handleRepositionClick:U,handleSavePositionClick:j,handleCancelClick:g,isVisible:l||P||x||w,isRepositioning:w})),[U,j,x,l,w,P,v,g]);return(0,m.jsxs)("div",{ref:t,onFocus:N,onBlur:V,onMouseEnter:B,onMouseMove:B,onMouseLeave:L,...(0,s().AH)(R.container,b),children:[(0,m.jsx)(o(603820).A,{onDraggableDragStart:O,onDraggableDragMove:D,onDraggableDragEnd:F,onDraggableDragCancel:F,disabled:!w,render:t=>(0,m.jsx)("div",{...(0,s().AH)(R.dragContainer),...t,children:e.render({imagePosition:E,isRepositioning:w})})}),(0,m.jsx)(h,{small:e.small,isRepositioning:w}),H]})};function h(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:c().Ay.blackWithAlpha(.4),borderRadius:4,color:c().Ay.white,fontSize:12,fontFamily:u().vc(r().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,m.jsx)(g().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,m.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},824160:(e,t,o)=>{o.d(t,{A:()=>s});o(296540);var n=()=>o(484714),r=()=>o(401497),i=()=>o(704152),a=o(474848);function s(e){const t=(0,n().Y0)(),o=(0,r().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:t.isMobile?11:9,lineHeight:t.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[t.isAndroid,t.isMobile]);return t.isMobile?(0,a.jsx)(i().A,{style:{...o.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(i().A,{style:{...o.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...o.innerStyle,...e.innerStyle},children:e.children})})}},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>n,plusSmallIcon:()=>r});o(296540);const n={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},r=(0,o(340498).wt)("plusSmall",n)},883234:(e,t,o)=>{o.d(t,{_:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,n.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},916096:(e,t,o)=>{o.d(t,{ke:()=>V,Ay:()=>F,aQ:()=>D});var n=o(296540),r=()=>o(484714),i=()=>o(847249),a=()=>o(401497),s=()=>o(79275),l=()=>o(959013),c=()=>o(35392),d=()=>o(296798),u=()=>o(859428),p=()=>o(490044),g=()=>o(694874),m=()=>o(696746),f=(o(898992),o(354520),o(672577),o(803949),o(581454),()=>o(187174)),v=()=>o(921997),h=()=>o(519831),y=()=>o(763824),b=()=>o(449506),S=()=>o(941541),_=()=>o(351360),w=()=>o(630116),A=()=>o(634157),k=()=>o(578136);const C=new(o(299919).Y)((e=>new I(e)));class I extends(()=>o(757695))().default{constructor(e){super(),this.collectionStore=void 0,this.debouncedRefresh=void 0,this.collectionStore=e,this.debouncedRefresh=(0,o(496603).sg)(this.unthrottledRefresh.bind(this),2e3)}getInitialState(){return{createdTime:-1/0,createdById:void 0}}getLatestPostCreatedTime(){return this.state.createdTime}getLatestPostCreatedById(){return this.state.createdById}async refresh(e){return this.debouncedRefresh(e)}async unthrottledRefresh(e){const{environment:t}=e;if(!t.currentUser.id)return;if(await this.collectionStore.load(),!this.collectionStore.isDefined())return;const o=await b().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:this.collectionStore.getSpaceId(),collectionIds:[this.collectionStore.id]}});if("success"===o.type&&o.data){const e=o.data[0];this.setState(e)}}}function x(e){const t=(0,r().v3)(),o=(0,i().K8)((()=>{var t;return null==e||null===(t=e[0])||void 0===t?void 0:t.getSpaceId()}),[e]),a=(0,n.useMemo)((()=>e.filter((e=>!C.has(e)))),[e]);(0,f().Yb)((async()=>{await async function(e){const{environment:t,collectionStores:o}=e,n=await y().dS(o,10,(async e=>(await e.load(),e.isDefined())));if(0===n.length)return;const r=n[0].getSpaceId(),i=await b().callApi({eventName:"getLatestPostCreated",environment:t,data:{spaceId:r,collectionIds:n.map((e=>e.id))}});if("success"===i.type&&i.data)for(let a=0;a<n.length;a++){const e=n[a],t=i.data[a];t.collectionId===e.id&&C.get(e).setState(t)}}({environment:t,collectionStores:a})}),[a,t]);const s=(0,n.useMemo)((()=>e.map((e=>C.get(e)))),[e]);return(0,n.useEffect)((()=>{if(!o)return;const e=s.map((e=>S().Ay.addListener((0,v().eG)(e.collectionStore.id),void 0,(0,S().AY)((async()=>await e.refresh({environment:t}))),void 0,t)));return()=>{e.forEach((e=>{e&&S().Ay.removeListener(e,t)}))}}),[s,o,t]),s}var M=()=>o(962730),T=()=>o(551694),P=()=>o(487941),R=()=>o(846955),E=()=>o(644914),B=()=>o(645873);const L={LazyAiLandingPageExperimentSwitcher:new(B().O2)("LazyAiLandingPageExperimentSwitcher",(()=>o.e(66169).then(o.bind(o,981440))))},U=(0,B()._h)(L.LazyAiLandingPageExperimentSwitcher,(e=>e.AiLandingPageExperimentSwitcher));var j=o(474848);function N(e){const{styles:t}=e,f=(0,r().v3)(),v=(0,l().tz)(),y=(0,i().K8)((()=>{const{currentSpaceViewStore:e}=_().default.state;if(e)return m().x$(e)}),[]),b=(0,i().K8)((()=>{const e=_().default.state.mainEditorCurrentBlockStore;return!!e&&m().Nh(e.id)}),[]),S=(0,i().K8)((()=>"home_available"===R().default.getState().type),[]),C=(0,i().K8)((()=>{var e;return null==y||null===(e=y.getModel())||void 0===e?void 0:e.getRenderUrl({getRecordModel:null==y?void 0:y.getRecordModel,pageVisitSource:o(584262).y8.SidebarHome})}),[y]),I=function(){const e=(0,r().v3)(),t=(0,i().K8)((()=>(0,k().D)({isMobileNative:e.device.isMobileNative,disableExposureLogging:!0})),[e]),o=(0,i().K8)((()=>{var e;return null===(e=_().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),n=x((0,i().K8)((()=>{if(!t)return[];const e=_().default.state.currentSpaceStore;return o&&e?A().A.getJoinedTeamStores({userId:o,spaceStore:e}).map((t=>w().md.createChildStore(t,{table:h().Vl,id:t.id,spaceId:e.id}))):[]}),[t,o]));return(0,i().K8)((()=>{var e;if(!_().default.state.currentSpaceStore)return!1;const t=(null===(e=_().default.state.currentSpaceViewStore)||void 0===e?void 0:e.getKeyStore("settings").getKeyStore("last_opened_aggregated_feed").getValue())??0;return n.find((e=>!(!e.getLatestPostCreatedById()||e.getLatestPostCreatedTime()<=t||e.getLatestPostCreatedById()===o)))}),[n,o])}(),T=(0,o(327300).w4)(),B=(0,i().O$)(o(430483).ts),[L,N]=(0,n.useState)(!1),[V,F]=(0,n.useState)(!1),H=(0,n.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&F(!0)}),[]),$=(0,n.useCallback)((()=>{F(!1)}),[]),W=(0,n.useCallback)((()=>{o(353643).A.state.isDragging||N(!0)}),[]),z=(0,n.useCallback)((()=>{N(!1)}),[]),q=(0,i().uB)(void 0,P().A),G=(0,i().uB)(void 0,P().A),K=(0,i().K8)((()=>G.state.focused||G.state.hovered),[G]),J=(0,n.useCallback)((()=>{(0,g().Wy)(f),(0,o(162674).ZL)({environment:f,from:"sidebar"}),S&&(0,g().tL)(f),o(441199).default.isVisible()&&(0,o(770906).VI)({environment:f})}),[f,S]),Q=(0,E().ab)(),Z=(0,a().IS)((e=>({tooltip:{width:200},leftContainer:{position:"relative"},shortcutLabel:{color:e.text.contrastSecondary},linkBoxStyle:{...Q.baseSidebarItem,...b&&Q.currentSelectedSidebarItem},homeIconStyle:{...Q.topButtonIcon,...b&&Q.currentSelectedSidebarIcon}})),[b,Q]),X=(0,n.useMemo)((()=>T.showAiFaceInHomeIcon?B?(0,o(366295).L)(Q.topButtonIcon):(0,o(654601).X)({width:16}):(0,s().X)(Z.homeIconStyle)),[T.showAiFaceInHomeIcon,B,Z.homeIconStyle,Q.topButtonIcon]),Y=(0,n.useCallback)((()=>K?"":(0,j.jsxs)("div",{style:Z.tooltip,children:[(0,j.jsx)("div",{children:v.formatMessage(D.tooltip)}),(0,j.jsx)(c().A,{style:Z.shortcutLabel,name:"openHome"})]})),[K,v,Z.shortcutLabel,Z.tooltip]);return(0,j.jsx)(u().A,{store:q,renderTooltip:Y,disableTooltip:S,originGap:6,textWrap:!0,placement:M().W.Right,render:e=>(0,j.jsx)(d().A,{...e,style:Z.linkBoxStyle,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,href:C,onClick:J,"aria-current":b?"page":void 0,children:(0,j.jsx)(p().A,{left:(0,j.jsxs)("div",{style:Z.leftContainer,children:[X,I&&(0,j.jsx)(O,{})]}),disableMobileBorder:!0,right:(0,j.jsx)(U,{isHovered:L,isFocused:V,tooltipStore:G,parentTooltipStore:q}),onMouseMove:W,onMouseLeave:z,onFocus:H,onBlur:$,children:v.formatMessage(D.label)})})})}function V(e){const{styles:t}=e,o=(0,i().K8)((()=>"home_available"===R().default.getState().type),[]),n=(0,E().ab)(),r=(0,a().IS)((e=>({tooltip:{width:200},shortcutLabel:{color:e.text.contrastSecondary}})),[]);return(0,j.jsx)(u().A,{renderTooltip:()=>(0,j.jsxs)("div",{style:r.tooltip,children:[(0,j.jsx)("div",{children:(0,j.jsx)(l().sA,{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"})}),(0,j.jsx)(c().A,{style:r.shortcutLabel,name:"openHome"})]}),disableTooltip:o,originGap:6,textWrap:!0,placement:M().W.Right,render:e=>(0,j.jsx)(d().A,{...e,style:n.baseSidebarItem,hoveredStyle:null==t?void 0:t.buttonHoveredStyle,onClick:()=>{T().A.open()},children:(0,j.jsx)(p().A,{left:(0,s().X)(n.topButtonIcon),disableMobileBorder:!0,children:(0,j.jsx)(l().sA,{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"})})})})}function O(e){const{top:t=0,right:o=-3}=e,n=(0,a().IS)((e=>({unreadBadge:{backgroundColor:e.redBadgeBackground,position:"absolute",top:t,right:o,width:8,height:8,borderRadius:4,border:`1px solid ${e.surface.wash}`}})),[t,o]);return(0,j.jsx)("div",{style:n.unreadBadge})}const D=(0,l().YK)({tooltip:{id:"sidebarPersonalHomeButton.tooltip",defaultMessage:"View recent pages and more"},label:{id:"sidebarPersonalHomeButton.label",defaultMessage:"Home"}}),F=n.memo(N)},926329:(e,t,o)=>{o.d(t,{b:()=>r});o(296540);var n=o(474848);const r=(0,o(340498).wt)("templates",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z"})]})})},954220:(e,t,o)=>{o.r(t),o.d(t,{computeSimilarUserRecentPagesState:()=>p,fetchUserSignals:()=>v,initializeAndLoadAllUserSignals:()=>m,refreshAndBroadcastSimilarUserSignals:()=>g,setUserSignals:()=>f});o(944114),o(898992),o(803949),o(581454);var n=()=>o(386164),r=()=>o(496603),i=()=>o(449506),a=()=>o(187778),s=()=>o(508496),l=()=>o(20199),c=()=>o(314648);const d=5*o(720665).Xb;function u(e){const t=s().default.getEligibleGroup({experimentId:e,parameter:"editedPagesLookbackDays",defaultGroup:"control"});return void 0===t||"control"===t?"1":t}function p(e){const t={};return e.forEach((e=>{let{userId:o,recentPages:n,similarity:i}=e;if(!n.length)return;const a=r().$z(n,(e=>{let{pageId:t}=e;return t}));Object.entries(a).forEach((e=>{let[n,r]=e;const a=r.map((e=>{let{visitedAt:t}=e;return t})).sort(((e,t)=>t-e));t[n]||(t[n]={pageId:n,sortedSimilarUserSignals:[]}),t[n].sortedSimilarUserSignals.push({userId:o,similarity:i,visitedAt:a})}))})),Object.values(t).forEach((e=>{e.sortedSimilarUserSignals.sort(((e,t)=>t.similarity-e.similarity))})),t}async function g(e){var t;const{spaceId:o,userId:n,environment:r}=e,i=await v({spaceId:o,environment:r,signalsOverride:[{name:"similarUserRecentPages",includeRecords:!0},{name:"similarUsersEditedPages",includeRecords:!0,lookbackDays:1}]});void 0!==i&&(f({spaceId:o,userId:n,environment:r,newSignals:i,initialize:!1}),await(null===(t=l().A.state.broadcastChannel)||void 0===t?void 0:t.postMessage({type:"userSignals",data:i})))}async function m(e){const{spaceId:t,userId:o,environment:n,refreshTimer:r=d}=e,i=await v({spaceId:t,environment:n});if(void 0===i)return;f({spaceId:t,userId:o,environment:n,newSignals:i,initialize:!0});var a;"on"===s().default.getGroup("search_refresh_user_signals")?(await c().default.waitUntil((()=>Boolean(c().default.getUserSignals({spaceId:t,userId:o})))),null===(a=l().A.state.broadcastChannel)||void 0===a||a.addEventListener("message",(e=>{"userSignals"===e.type&&f({spaceId:t,userId:o,environment:n,newSignals:e.data,initialize:!1})})),await l().A.waitUntil((()=>Boolean(l().A.state.elector))),l().A.state.elector.awaitLeadership().then((()=>{c().default.update((e=>{e.refreshIntervalId&&window.clearInterval(e.refreshIntervalId);const i=window.setInterval((async()=>{await g({spaceId:t,userId:o,environment:n})}),r);return{...e,refreshIntervalId:i}}))}))):c().default.update((e=>{e.refreshIntervalId&&window.clearTimeout(e.refreshIntervalId);const i=window.setTimeout((async()=>{const e=await v({spaceId:t,environment:n});void 0!==e&&f({spaceId:t,userId:o,environment:n,newSignals:e,initialize:!1})}),r);return{...e,refreshIntervalId:i}}))}function f(e){const{spaceId:t,userId:o,environment:n,newSignals:r,initialize:i}=e;r&&(c().default.setUserSignals({spaceId:t,userId:o,userSignals:r,initialize:i}),a().G(n,i?"userSignalsInitialization":"userSignalsReload"))}async function v(e){const{spaceId:t,environment:o,signalsOverride:a}=e,s=u("search-local-edited-pages-max"),l=u("search-local-sim-users-edited-pages-max"),d=parseInt(l),g=parseInt(s),m=await i().callApi({eventName:"getUserSignals",environment:o,data:{spaceId:t,signals:a??[{name:"similarUserRecentPages",includeRecords:!0},{name:"topPages7dPageView",includeRecords:!0},{name:"editedPages",includeRecords:!0,lookbackDays:g},{name:"similarUsersEditedPages",includeRecords:!0,lookbackDays:d}]},headers:(0,n().WS)({cellId:void 0,recordId:void 0,spaceId:t})});if("success"!==m.type)return;const f=a?r().Up((0,c().getInitialUserSignalsState)(),a.map((e=>e.name))):(0,c().getInitialUserSignalsState)();return m.data.signals.forEach((e=>{if("error"===e.status)return;const t=e.name;switch(t){case"similarUserRecentPages":f.similarUserRecentPages=p(e.data);break;case"recentPages":f.recentPages=e.data;break;case"topPages7dPageView":f.topPages7dPageView=e.data;break;case"similarUsersEditedPages":f.similarUsersEditedPages=e.data;break;case"editedPages":f.editedPages=e.data}})),f}}}]);