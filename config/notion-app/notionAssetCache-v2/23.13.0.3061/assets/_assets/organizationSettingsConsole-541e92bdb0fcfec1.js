"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[19596,77970],{47273:(e,n,t)=>{t.d(n,{DS:()=>o,Fe:()=>d,GB:()=>a,Gf:()=>u,V_:()=>c,j1:()=>l,j8:()=>r,yp:()=>m,yw:()=>s});var i=()=>t(762433);function o(e){return(0,i().Fq)({subscription:e})}function r(e){return(0,i().Ry)({subscription:e,trial:void 0})}function a(e){let{subscriptionState:n,logFunction:t,spaceId:o}=e;const r=p(n);return(0,i().yB)({billingData:{subscription:r,trial:void 0},logFunction:t,spaceId:o})}function s(e){return(0,i().q8)({subscription:e})}function l(e){return(0,i().V9)({subscription:p(e),trial:void 0})}function d(e){return(0,i().d$)({subscription:p(e),trial:void 0})}function c(e){return(0,i().ji)({subscription:p(e),trial:void 0})}function u(e){return(0,i().AI)({subscription:p(e),trial:void 0})}function m(e,n){return(0,i().KH)({subscription:p(e),trial:void 0},n)}function p(e){return e?{...e,trialEnd:void 0}:void 0}},56394:(e,n,t)=>{t.d(n,{A:()=>d});t(296540);var i=()=>t(484714),o=()=>t(401497),r=()=>t(668725),a=()=>t(704152),s=()=>t(963589),l=t(474848);function d(e){const{icon:n,title:t,on:d,disabled:c,hasDiff:u,wrapStyle:m,innerStyle:p,hideChevron:g}=e,{isMobile:f}=(0,i().Y0)(),v=(0,s().X)("db_ux_chrome"),h=(0,o().IS)((e=>({container:{borderRadius:14,marginRight:6,display:"inline-flex",...u&&{position:"relative"},...m},filterPill:{fontSize:14,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",borderRadius:32,height:f?28:24,lineHeight:f?"28px":"24px",padding:"0 8px",...!v&&{border:`1px solid ${e.outlineButtonBorder}`},color:e.text.secondary,...d&&{color:e.text.uiBluePrimary,borderColor:e.filterPillBorder,background:e.tint.uiBlue},...c&&{color:e.text.uiBlueTertiary,borderColor:e.text.uiBlueTertiary,background:e.tint.uiBlue},...p},hovered:d?{background:e.tint.uiBlueHover}:{},pressed:d?{background:e.tint.uiBluePressed}:{},chevron:{width:10,marginLeft:4,marginTop:1,fill:c?e.text.uiBlueTertiary:d?e.blueColor:e.lightIconColor},diffDot:{position:"absolute",top:-2,right:-2,background:"dark"===e.mode?e.accentColors.orange[500]:e.accentColors.orange[300],border:`1px solid ${e.contentBackground}`,width:9,height:9,borderRadius:9}})),[u,m,f,v,d,c,p]);return(0,l.jsxs)("div",{style:h.container,children:[(0,l.jsxs)(a().A,{disabled:c,style:h.filterPill,hoveredStyle:h.hovered,pressedStyle:h.pressed,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onClick:e.onClick,onDoubleClick:e.onDoubleClick,children:[n,t,!g&&(0,r().b)(h.chevron)]}),u&&(0,l.jsx)("div",{style:h.diffDot})]})}},66460:(e,n,t)=>{t.d(n,{V_:()=>T,WR:()=>_,eu:()=>z,xE:()=>O,xX:()=>B});t(16280);var i=()=>t(244641),o=(t(296540),()=>t(857639)),r=()=>t(762433),a=()=>t(323063),s=()=>t(959013),l=()=>t(502800),d=()=>t(498212),c=()=>t(252105),u=()=>t(449506),m=()=>t(901389),p=()=>t(496414),g=()=>t(989423),f=()=>t(351360),v=()=>t(57605),h=()=>t(508496),y=()=>t(613240),x=()=>t(128265),b=()=>t(224701),C=()=>t(749356),I=()=>t(779795),j=()=>t(807778),S=()=>t(134217),w=()=>t(981046),k=()=>t(151168),A=t(474848);const M=(0,s().YK)({applyingBusinessTrial:{id:"trialUpsellActions.applyingBusinessTrial",defaultMessage:"Setting up your Business trial…"}});async function z(e){var n,t;const{environment:l,stripe:d,elements:u,trialData:p,trialDays:g,sessionId:h,customerName:y,businessName:x}=e;if(!u||!d)return void o().log({level:"error",from:"trialUpsellActions",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}});const{error:C}=await u.submit();if(C)return void c().$X(l,{error:"could not submit form",error_type:"payment_method"});const M=await d.createPaymentMethod({elements:u});if(M.error)return void c().$X(l,{error:M.error.message,error_type:"payment_method"});if(!M.paymentMethod)return void c().$X(l,{error:"could not create token",error_type:"payment_method"});const z={type:"paymentMethodId",value:M.paymentMethod.id},_=f().default.state.currentSpaceStore;if(!_)return;const T=_.id,B=await I().p_({environment:l,spaceId:T}),O=await v().A.awaitData(l,{spaceId:T});if(!O)throw new Error("Billing data not loaded");const R=(0,r().lQ)(O),D=w().A.state.selectedCurrencyCode??"USD",N=(0,k().Zr)(),V=(0,a().vk)(B,{interval:"month",product:N,currency:D}),P=(0,j().Le)(),E=(0,a().vH)(R,{price:V,quantity:1},{isMay13PackagingChangesEnabled:P}),L=i().c9.now().plus({days:g});return await async function(e){const{environment:n,spaceStore:t,paymentData:i,desiredState:o,stripe:r,trialData:a,customerName:l,businessName:d,addressZip:u,addressCountry:p,sessionId:g}=e,f=await v().A.awaitData(n,{spaceId:t.id});try{const e=await b().nV({environment:n,sessionId:g,spaceStore:t,desiredState:o,paymentData:i,from:"onboarding",trialData:a,billingEmail:(0,S().cs)(f),customerName:l,businessName:d,addressZip:u,addressCountry:p}),c=e.paymentIntentClientSecret,v=e.paymentIntentStatus;if(c&&"requires_action"===v){const{error:e}=await r.handleNextAction({clientSecret:c});e&&(await b().M2({environment:n,spaceStore:t,from:"subscription_upgrade_onboarding_failed_payment"}),m().f1((0,A.jsx)(s().sA,{id:"subscription.upgrade.payment_failed",defaultMessage:"Your payment could not be processed. Please provide an alternate payment method or you will lose access to Notion."})))}return"success"}catch{return void c().AF(n)}}({environment:l,spaceStore:_,desiredState:{...E,trialEnd:L},paymentData:z,stripe:d,trialData:p,customerName:y,businessName:x,addressZip:(null===(n=M.paymentMethod.billing_details.address)||void 0===n?void 0:n.postal_code)||"",addressCountry:(null===(t=M.paymentMethod.billing_details.address)||void 0===t?void 0:t.country)||"",sessionId:h})}const _=(0,t(496603).sg)(z,1e3,{leading:!0,trailing:!1});async function T(e){let{spaceId:n,environment:t}=e;if(await(0,C().L6)({environment:t,spaceId:n,offerCampaign:"reverse"})&&(0,j().s)(t)){await O(n,t,"going_multiplayer")&&await y().A.resetData(t,{spaceId:n})}}async function B(e,n,t){try{p().m({message:M.applyingBusinessTrial});const i=await u().callApi({eventName:"applyReverseTrial",environment:n,data:{spaceId:e,trialData:{id:"business_reverse",from:t}}});return"success"===i.type?((0,g().u4)({environment:n,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:"business_reverse",success:"success"===i.data.status}}}),await b().Ow(n),p().V(),"success"===i.data.status):(R("business_reverse",n,i.error),p().V(),!1)}catch(i){return R("business_reverse",n,i),p().V(),!1}}async function O(e,n,t){let i="reverse";try{const o=await(0,x().G)(n),r=Boolean(h().default.checkGate({gateName:"apply_reverse_trial_key"}));o&&(i="reverse_mm_ent");const a=`${e}_timed_trial`,s=r?(0,d().gB)(a):void 0,l=await u().callApi({eventName:"applyReverseTrial",environment:n,data:{spaceId:e,trialData:{id:i,from:t},idempotencyKey:s}});return"success"===l.type?((0,g().u4)({environment:n,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:i,success:"success"===l.data.status}}}),await b().Ow(n),"success"===l.data.status):(R(i,n,l.error),!1)}catch(o){return R(i,n,o),!1}}function R(e,n,t){(0,g().u4)({environment:n,event:{eventName:"trial_apply_attempt",eventProperties:{trial_id:e,success:!1}}}),o().log({level:"error",from:"trialUpsellActions",type:"applyReverseTrialError",error:(0,l().convertErrorToLog)(t)})}},101919:(e,n,t)=>{t.d(n,{A:()=>o});t(296540);var i=t(474848);const o=function(e){const{hasMarginTop:n}=e,o=(0,t(401497).IS)((e=>{const t={display:"block",marginBottom:4,fontSize:12,color:e.text.secondary};return n&&(t.marginTop=14),{style:t}}),[n]),{forId:r,children:a,style:s}=e;return(0,i.jsx)("label",{style:{...o.style,...s},htmlFor:r,children:a})}},171789:(e,n,t)=>{t.d(n,{A:()=>s});t(898992),t(354520),t(581454);var i=t(296540),o=()=>t(705540),r=t(474848);function a(){const[e,n]=(0,i.useReducer)(((e,n)=>{switch(n.type){case"push":return[...e.map((e=>({...e,isAnimatingOut:!0}))),{item:n.item,isAnimatingOut:!1}];case"delete":return e.filter((e=>e.item.key!==n.key));case"clear":return e.map((e=>({...e,isAnimatingOut:!0})));default:return e}}),[]);return(0,i.useEffect)((()=>(null===o()||void 0===o()||o().snackbarReady(!0),()=>{null===o()||void 0===o()||o().snackbarReady(!1)})),[]),(0,i.useEffect)((()=>{const e=new(t(496506).default)((()=>t(666429).Ay.state.currentItem),{debugName:"currentItemStore"});let i=null;function o(){const t=e.state;t&&i!==t.key?(n({type:"push",item:t}),i=t.key):t||n({type:"clear"})}return e.addListener(o),()=>{e.removeListener(o)}}),[]),(0,r.jsx)(t(177158).A,{open:e.length>0,zIndex:201,children:e.map((e=>(0,i.createElement)(l,{...e,key:e.item.key,dispatch:n})))})}const s=i.memo(a),l=i.memo((function(e){let{dispatch:n,isAnimatingOut:o,item:a}=e;const s=(0,t(401497).DP)(),l=(0,t(552871).L)(),d=(0,i.useCallback)((()=>{n({type:"delete",key:a.key})}),[n,a.key]),c=(0,i.useRef)(o);(0,i.useEffect)((()=>{if(!c.current&&o){const e=setTimeout(d,270);return()=>{d(),clearTimeout(e)}}c.current=o}),[o,d]);const u=a.position??"bottom",m="top"===u?{top:24}:{bottom:l};return(0,r.jsx)("div",{style:{...m,position:"fixed",left:0,width:"100%",display:"flex",zIndex:1e6,padding:4,pointerEvents:"none"},children:(0,r.jsxs)("div",{"aria-live":"polite",style:{background:s.tooltipBackground,color:s.text.contrastPrimary,borderRadius:8,padding:"11px 16px",boxShadow:s.shadowLG,margin:"0 auto",fontSize:14,display:"flex",alignItems:"center",pointerEvents:"auto",...a.style,animationName:`snackbar-slide-in-${u}`,animationDuration:"270ms",animationTimingFunction:"ease",transitionProperty:"transform, opacity",transitionDuration:"270ms",transitionTimingFunction:"ease",transform:o?"scale(0.95)":"scale(1)",opacity:o?0:1},onTransitionEnd:o?d:void 0,children:[a.label,a.helpUrl&&(0,r.jsx)(t(296798).A,{href:a.helpUrl,external:!0,style:{marginLeft:8,width:16,height:16,color:s.text.contrastPrimary},children:(0,t(133033).$)({fill:s.text.contrastSecondary})}),(0,r.jsx)("div",{style:{marginLeft:4,marginRight:-4},children:a.right})]})})}))},297401:(e,n,t)=>{t.d(n,{A:()=>o});t(296540);var i=t(474848);const o=function(e){const n=(0,t(484714).v3)(),o={removeFilterButton:{height:void 0,width:void 0},removeFilterButtonMobile:{marginRight:-12,marginTop:-12,marginBottom:-12,paddingRight:12,paddingTop:12,paddingBottom:12}},{onClick:r,disabled:a}=e,{device:s}=n,l=s.isMobile?{...o.removeFilterButton,...o.removeFilterButtonMobile}:o.removeFilterButton;return(0,i.jsx)(t(285790).A,{icon:t(931121).J,onClick:r,disabled:a,disableBackground:!0,style:l})}},323063:(e,n,t)=>{t.d(n,{HO:()=>p,V5:()=>l,Vr:()=>d,ef:()=>m,gL:()=>c,ng:()=>v,vH:()=>u,vk:()=>f,z2:()=>g});t(16280),t(269479),t(898992),t(354520),t(672577),t(581454),t(737550);var i=()=>t(720665),o=()=>t(762433),r=()=>t(47273),a=()=>t(622963),s=()=>t(979340);function l(e,n){return p(e.items,n.items).some((e=>{let[n,t]=e;return function(e,n){if(!e)return!1;if(!n)return!0;const t=o().xp(e),i=o().xp(n);if(!t||!i)return!1;return s().o3[t]>s().o3[i]}(n,t)}))}function d(e,n,t){let{trialEnd:i,items:o}=n;return{trialEnd:i,items:o.map((n=>{const i=n.price.product,o=n.price.unitAmount.currencyCode,r=f(e,{interval:t,product:i,currency:o});return{...n,price:r}}))}}function c(e,n){const t=e.items.filter((e=>o().IE(e)!==n));return{...e,items:t}}function u(e,n,t){const{isMay13PackagingChangesEnabled:i}=t,r=o().IE(n),a=n.price.product,s=e.items.filter((e=>{const n=e.price.product,t=o().IE(e);return!(r===t)&&!(i&&"ai"===n&&("business"===a||"enterprise"===a))}));return{...e,items:s.concat([n])}}function m(e){const{state:n,prices:t,quantities:i,params:{interval:r,currency:a},products:s,flags:{isMay13PackagingChangesEnabled:l}}=e,d=s.map((e=>function(e){if("personal_free"===e||"team_free"===e)return"free";return e}(e))),c=d.map((e=>o().Mr(e))),u=n.items.filter((e=>{const n=e.price.product,t=o().IE(e),i=c.includes(t),r=l&&"ai"===n&&(d.includes("business")||d.includes("enterprise"));return!i&&!r})),m=d.map((e=>v(f(t,{interval:r,currency:a,product:e}),i)));return{...n,items:u.concat(m)}}function p(e,n){return(0,i().Z4)(e,(e=>o().IE(e)),n,(e=>o().IE(e)))}function g(e){const{prices:n,billingData:t,product:i}=e,a=o().Ry(t),s=o().lQ(t),l=r().yw(s),d=o().q8(t),c=l??d;return n.find((e=>e.product===i&&e.billingInterval===c&&e.unitAmount.currencyCode===a))}function f(e,n){let{interval:t,product:i,currency:o}=n;return function(e,n){if(null==e)throw new Error(n);return e}(e.find((e=>e.product===i&&e.billingInterval===t&&e.unitAmount.currencyCode===o)),`Unable to find price with interval: ${t}, product: ${i}, currency: ${o}`)}function v(e,n){const{numSeats:t,numCustomHostnames:i}=n;return"public_domain_custom_hostnames"===(0,a().vK)(e.product)?{price:e,quantity:i}:{price:e,quantity:t}}},373204:(e,n,t)=>{t.d(n,{K:()=>o});t(296540);var i=t(474848);const o=(0,t(340498).wt)("lockShield",{viewBox:"0 0 21 25",svg:(0,i.jsx)("path",{d:"M10.418 24.75C10.6289 24.75 10.9453 24.668 11.25 24.5039C17.9766 20.8359 20.3203 19.1484 20.3203 14.8828V6.01172C20.3203 4.62891 19.7812 4.13672 18.6211 3.64453C17.3203 3.09375 12.9258 1.54688 11.6367 1.125C11.2617 0.996094 10.8164 0.914062 10.418 0.914062C10.0312 0.914062 9.58594 1.01953 9.19922 1.125C7.92188 1.47656 3.52734 3.10547 2.22656 3.64453C1.06641 4.125 0.527344 4.62891 0.527344 6.01172V14.8828C0.527344 19.1484 2.87109 20.8242 9.59766 24.5039C9.90234 24.668 10.2188 24.75 10.418 24.75ZM10.418 22.2891C10.2539 22.2891 10.0781 22.2305 9.75 22.0195C4.38281 18.7617 2.71875 17.8711 2.71875 14.4375V6.38672C2.71875 5.97656 2.8125 5.8125 3.12891 5.68359C4.86328 4.98047 8.23828 3.86719 9.80859 3.24609C10.0664 3.15234 10.2539 3.11719 10.418 3.11719C10.5938 3.11719 10.7695 3.15234 11.0273 3.24609C12.6094 3.86719 15.9492 5.05078 17.707 5.68359C18.0352 5.80078 18.1172 5.97656 18.1172 6.38672V14.4375C18.1172 17.8945 16.3945 18.832 11.0977 22.0195C10.7578 22.2305 10.5938 22.2891 10.418 22.2891ZM6.22266 16.7695C6.22266 17.6602 6.62109 18.0703 7.44141 18.0703H13.4062C14.2266 18.0703 14.625 17.6602 14.625 16.7695V12.1992C14.625 11.3906 14.2969 10.9805 13.6406 10.9219V9.58594C13.6406 7.44141 12.3398 5.98828 10.4297 5.98828C8.50781 5.98828 7.21875 7.44141 7.21875 9.58594V10.9102C6.55078 10.9805 6.22266 11.3906 6.22266 12.1992V16.7695ZM8.57812 10.8984V9.46875C8.57812 8.17969 9.31641 7.32422 10.4297 7.32422C11.5312 7.32422 12.2695 8.17969 12.2695 9.46875V10.8984H8.57812Z"})})},457688:(e,n,t)=>{t.d(n,{A:()=>x,S:()=>h});var i=t(296540),o=()=>t(484714),r=()=>t(847249),a=()=>t(764880),s=()=>t(959013),l=()=>t(962730),d=()=>t(678553),c=()=>t(554509),u=()=>t(453697),m=t(474848);const p="UIRegular-14px/Regular",g="UIRegular-14px/Semibold",f="iOS/Callout-16px/Regular",v=i.forwardRef(((e,n)=>{const{actor:i,userTitle:s,defaultUserTitle:c="name_only",useEmailAsTooltip:p,tooltip:g,tooltipPlacement:f,hoveredStyle:v,disabledFeedback:x,customUserTitleStyles:b,iconSizeOverride:C}=e,I=(0,o().v3)(),j=(0,r().K8)((()=>i.asActor&&i.isUser()?i.email:void 0),[i]),S=p&&j?j:g,w=C||(I.device.isMobile?d().nd:d().pg),k="name_and_email"===c||"name_and_email_unless_right"===c&&!Boolean(e.right)?(0,m.jsx)(y,{actor:null==i?void 0:i.asActor,customStyles:b}):(0,m.jsx)(h,{customStyles:b,actor:null==i?void 0:i.asActor}),A=s??k;let M;return(0,a().H3)(i)?M=(0,m.jsx)(t(256863).A,{botValue:null==i?void 0:i.asActor,size:w}):(0,a().ps)(i)?M=(0,m.jsx)(u().A,{userValue:null==i?void 0:i.asActor,size:w}):(0,a().h2)(i)?M=(0,m.jsx)(u().A,{userValue:void 0,size:w}):(0,t(534177).HB)(i),(0,m.jsx)(t(859428).A,{placement:f??l().W.Bottom,alignment:l().C.Start,textWrap:!0,render:i=>(0,m.jsx)(t(760217).A,{...(0,t(553965).A)(i,e),icon:M,title:A,disabledFeedback:x,className:"notranslate",right:e.right,ref:n,hoveredStyle:v}),disableTooltip:!S,renderTooltip:()=>S})}));function h(e){const{actor:n,customStyles:t}=e,i=(0,o().v3)(),a=(0,s().tz)(),l=(0,r().K8)((()=>n&&n.id===i.currentUser.id),[i,n]),d=(0,r().K8)((()=>n&&n.getDisplayName(a)),[n,a]),u=i.device.isMobile?f:p;return l?(0,m.jsx)(s().sA,{id:"UserMenuItem.fullName.authorLabel",defaultMessage:"<author>{fullName}</author> <you>(You)</you>",values:{author:e=>(0,m.jsx)(c().D,{as:"span",styleName:u,customStyles:t,children:e}),fullName:d,you:e=>(0,m.jsx)(c().D,{as:"span",colorName:"secondary",styleName:u,customStyles:t,children:e})}}):d?(0,m.jsx)(c().D,{styleName:u,customStyles:t,children:d}):(0,m.jsx)(c().D,{styleName:u,customStyles:t,children:(0,m.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}function y(e){const n=(0,o().v3)(),{actor:t,customStyles:i}=e,a=(0,s().tz)(),l=(0,r().K8)((()=>t&&t.getDisplayName(a)),[t,a]),{email:d,showEmail:u}=(0,r().K8)((()=>{const e=t&&t.asActor&&t.isUser()?t.email:void 0;return{email:e,showEmail:l!==e}}),[t,l]),v=n.device.isMobile?"iOS/Callout-16px/Regular":g,h=n.device.isMobile?f:p;return l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c().D,{as:"span",styleName:v,customStyles:i,children:l}),u&&(0,m.jsx)(c().D,{as:"span",styleName:h,customStyles:i,children:` ${d}`})]}):(0,m.jsx)(c().D,{styleName:g,customStyles:i,children:(0,m.jsx)(s().sA,{id:"UserMenuItem.fullName.unknownAuthorLabel",defaultMessage:"Unknown author"})})}v.displayName="UserMenuItem";const x=v},506005:(e,n,t)=>{t.r(n),t.d(n,{OrganizationSettingsConsole:()=>en,Redirect:()=>tn});t(898992),t(672577),t(581454);var i=t(296540),o=()=>t(484714),r=()=>t(852507),a=()=>t(847249),s=()=>t(427704),l=()=>t(734459),d=()=>t(713996),c=()=>t(435009),u=()=>t(351360),m=()=>t(534177),p=()=>t(989423),g=()=>t(555267),f=()=>t(625319),v=(t(18107),t(967357),t(354520),()=>t(187174)),h=()=>t(449506),y=()=>t(375243);const x=["domain_verification_start","domain_verification_pending","domain_verification_success","organization_configuration","onboarding_success"];function b(e){return n=>{e((e=>{if(e)return{...e,domainVerificationInfo:e.domainVerificationInfo?{...e.domainVerificationInfo,...n}:void 0}}))}}var C=()=>t(511303);var I=()=>t(401497),j=()=>t(148307),S=()=>t(486345),w=()=>t(959013),k=()=>t(901389),A=()=>t(898486),M=()=>t(554509),z=()=>t(689216),_=()=>t(602105),T=()=>t(688437),B=()=>t(174517),O=()=>t(338499),R=()=>t(364280),D=t(474848);function N(e){let{icon:n,title:t,description:i}=e;const o=(0,I().IS)((e=>({iconContainer:{display:"flex",justifyContent:"center"},headerContainer:{paddingTop:64,maxWidth:482,margin:"0 auto",textAlign:"center"}})),[]);return(0,D.jsx)("div",{style:o.headerContainer,children:(0,D.jsxs)(R().VP,{gap:20,children:[(0,D.jsx)("div",{style:o.iconContainer,children:n}),(0,D.jsxs)(R().VP,{gap:12,children:[(0,D.jsx)(M().D,{styleName:"UITitle-22px/Semibold",children:t}),(0,D.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",children:i})]})]})})}var V=()=>t(920773),P=()=>t(204063),E=()=>t(890494);const L={domain_verification_start:"not_started",domain_verification_pending:"not_started",domain_verification_success:"not_started",organization_configuration:"domain_verified",onboarding_success:"completed"},F=45,U=["not_started","domain_verified","completed"];function H(e){let{currentStageName:n}=e;const t=(0,I().IS)((e=>({header:{width:"100%",padding:12,borderBottom:`1px solid ${e.stroke.secondary}`,height:F}})),[]),i=L[n];return(0,D.jsx)("div",{style:t.header,children:(0,D.jsx)(R().fI,{gap:24,justifyContent:"center",children:U.map(((e,n)=>(0,D.jsx)($,{stepNumber:n+1,onboardingStep:e,isCurrentStep:e===i},n)))})})}function $(e){let{stepNumber:n,onboardingStep:t,isCurrentStep:i}=e;const o=(0,I().IS)((e=>({stepContainer:{display:"flex",gap:8,alignItems:"center"}})),[]);return(0,D.jsxs)("div",{style:o.stepContainer,children:[(0,D.jsx)(E().A,{number:n,isLightBlueHighlighted:i}),(0,D.jsx)(M().D,{styleName:"UISmall-12px/Medium",colorName:i?"primary":"tertiary",children:function(e){switch(e){case"not_started":return(0,D.jsx)(w().sA,{id:"onboarding.organization.header.verifyEmailDomain",defaultMessage:"Verify email domain"});case"domain_verified":return(0,D.jsx)(w().sA,{id:"onboarding.organization.header.configureOrganization",defaultMessage:"Configure organization"});case"completed":return(0,D.jsx)(w().sA,{id:"onboarding.organization.header.finishSetup",defaultMessage:"Finish setup"});default:(0,m().HB)(e)}}(t)})]})}function q(e){let{header:n,continueButtonLabel:t,onContinue:o,children:r,isContinueDisabled:a,onGoBack:s}=e;const l=(0,I().IS)((e=>({container:{overflowY:"auto",height:`calc(100% - ${F}px)`},contentContainer:{paddingTop:48,paddingBottom:64,maxWidth:533,margin:"0 auto"},continueButtonContainer:{paddingTop:24,width:"100%"},continueButton:{width:"100%",height:32},goBackButtonContainer:{paddingTop:6,width:"100%"},goBackButton:{width:"100%",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"}})),[]),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1);return(0,D.jsxs)("div",{style:l.container,children:[n,(0,D.jsxs)("div",{style:l.contentContainer,children:[r,(0,D.jsx)("div",{style:l.continueButtonContainer,children:(0,D.jsx)(P().A,{onClick:async()=>{c(!0),await o(),c(!1)},style:l.continueButton,disabled:d||a,children:t})}),s?(0,D.jsx)("div",{style:l.goBackButtonContainer,children:(0,D.jsx)(V().p,{isBlue:!0,size:"lg",onClick:async()=>{m(!0),await s(),m(!1)},style:l.goBackButton,disabled:u,children:(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.goBack",defaultMessage:"Go back"})})}):null]})]})}function W(e){let{setOnboardingState:n,shouldContinue:t}=e;return async()=>{if(t){if(!(await t()))return}n((e=>({...e,currentStageIndex:((null==e?void 0:e.currentStageIndex)??0)+1})))}}function K(e){var n;let{onboardingState:t,setOnboardingState:r}=e;const a=(0,o().v3)(),s=(0,w().tz)(),l=b(r),d=(0,i.useCallback)((async()=>{if(!t.domainVerificationInfo)return!1;const e=await h().callApi({eventName:"setSamlConfig",environment:a,data:{spaceId:t.domainVerificationInfo.spaceId}});if("failed"===e.type)return l({emailDomainError:(0,A().Hu)(s,e)}),!1;const n=await h().callApi({eventName:"createDomainVerificationCode",environment:a,data:{type:"saml_config",spaceId:t.domainVerificationInfo.spaceId,domain:t.domainVerificationInfo.emailDomain??""}});if("success"===n.type){const e=n.data.domainVerification,t=(0,S().pl)(e);return l({domainVerification:t}),!0}return l({emailDomainError:(0,A().Hu)(s,n)}),!1}),[a,s,t,l]);if(!t.domainVerificationInfo)return null;const c=W({setOnboardingState:r,shouldContinue:d});return(0,D.jsx)(q,{header:(0,D.jsx)(X,{}),continueButtonLabel:(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.getVerificationCode",defaultMessage:"Get verification code"}),onContinue:c,isContinueDisabled:!(null!==(n=t.domainVerificationInfo)&&void 0!==n&&n.emailDomain),children:(0,D.jsx)(G,{domainVerificationInfo:t.domainVerificationInfo,setDomainVerificationInfo:l})})}function G(e){let{domainVerificationInfo:n,setDomainVerificationInfo:t}=e;const{emailDomain:i,emailDomainError:o}=n;return(0,D.jsx)(T().K4,{pendingDomain:i,setPendingDomain:e=>{t({emailDomain:e,emailDomainError:void 0})},error:o})}function Y(e){var n;let{onboardingState:t,setOnboardingState:r}=e;const a=(0,w().tz)(),s=(0,o().v3)(),l=b(r),d=(0,i.useCallback)((async e=>{if(!t.domainVerificationInfo)return!1;const n=await h().callApi({eventName:"verifyDomain",environment:s,data:{verificationId:e.id}});if("success"===n.type){const n={type:"verified",domain:e.domain};return l({domainVerification:n}),!0}return k().f1((0,A().Hu)(a,n)),!1}),[s,a,t,l]),c=null===(n=t.domainVerificationInfo)||void 0===n?void 0:n.domainVerification,u=(0,i.useCallback)((async()=>{if(c&&"verified"!==c.type)return(0,z().n)({onRequest:()=>h().callApi({eventName:"deleteDomainVerificationCode",environment:s,data:{id:c.id}}),onSuccess:()=>{l({domainVerification:void 0}),r((e=>({...e,currentStageIndex:x.indexOf("domain_verification_start")})))}})}),[s,c,l,r]),m=(0,i.useCallback)((async e=>{const n=t.domainVerificationInfo;if(!n)return;const i=await h().callApi({eventName:"deleteDomainVerificationCode",environment:s,data:{id:e.id}});if("failed"===i.type)return k().f1((0,A().Hu)(a,i));const o=await h().callApi({eventName:"createDomainVerificationCode",environment:s,data:{type:"saml_config",domain:e.domain,spaceId:n.spaceId}});if("failed"===o.type)return k().f1((0,A().Hu)(a,o));r((e=>e?{...e,domainVerificationInfo:{...n,domainVerification:(0,O().Hj)(o.data.domainVerification).data}}:e))}),[s,a,t.domainVerificationInfo,r]);if(!c||"verified"===c.type)return null;const p=W({setOnboardingState:r,shouldContinue:()=>d(c)});return(0,D.jsx)(q,{header:(0,D.jsx)(X,{domainToBeVerified:c.domain}),continueButtonLabel:(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.verifyDomain",defaultMessage:"Verify domain"}),onContinue:p,onGoBack:u,children:(0,D.jsx)(B().$,{domainVerification:c,regenerateCode:m})})}function Z(e){var n;let{onboardingState:t,setOnboardingState:o,refreshOnboardingState:r}=e;const a=(0,I().IS)((e=>({rowItemContainer:{width:"100%",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:_().v,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"14px 16px"}})),[]),[s,l]=(0,i.useState)(!1),d=null===(n=t.domainVerificationInfo)||void 0===n?void 0:n.domainVerification;if(!d||"verified"!==d.type)return null;const c=W({setOnboardingState:o,shouldContinue:async()=>(l(!0),await r(),!1)});return(0,D.jsx)(q,{header:(0,D.jsx)(X,{}),continueButtonLabel:(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.configureOrganization",defaultMessage:"Configure organization"}),onContinue:c,isContinueDisabled:s,children:(0,D.jsxs)("div",{style:a.rowItemContainer,children:[(0,D.jsx)("div",{children:(0,D.jsx)(M().D,{styleName:"UIRegular-14px/Medium",children:`@${d.domain}`})}),(0,D.jsx)(y().d9,{status:"success"})]})})}function X(e){let{domainToBeVerified:n}=e;return(0,D.jsx)(N,{icon:(0,D.jsx)("img",{src:j().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77}}),title:n?(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.title.withDomain",defaultMessage:"Verify {domainToBeVerified}",values:{domainToBeVerified:n}}):(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.title",defaultMessage:"Verify an email domain"}),description:(0,D.jsx)(w().sA,{id:"onboarding.domainVerification.description",defaultMessage:"Verified email domains can be used to manage user accounts and workspaces created using an email address with that email domain"})})}var Q=()=>t(29037),J=()=>t(798880),ee=()=>t(630116),ne=()=>t(614505),te=()=>t(453697),ie=()=>t(538739),oe=()=>t(51703),re=()=>t(629148),ae=()=>t(27198),se=()=>t(142448),le=()=>t(477657);function de(e){var n;let{onboardingState:t,setOnboardingState:i,refreshUserOrganizations:r}=e;const a=(0,o().v3)(),s=null===(n=t.orgConfigurationInfo)||void 0===n?void 0:n.organizationId,u=(0,re().E)({organizationId:s});if(!s||!u)return null;const m=W({setOnboardingState:i,shouldContinue:async()=>(await r(),c().oo({environment:a,url:(0,l().re)({organizationId:s,tabRoute:d().Vo,queryParams:{}})}),!0)});return(0,D.jsx)(q,{header:(0,D.jsx)(ce,{organizationId:s}),continueButtonLabel:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.goToAdminConsole",defaultMessage:"Go to organization console"}),onContinue:m,children:(0,D.jsx)(ue,{organizationStore:u,setOnboardingState:i})})}function ce(e){var n;let{organizationId:t}=e;const i=(0,re().E)({organizationId:t}),{icon:o,name:r}=(0,a().K8)((()=>({icon:null==i?void 0:i.getIcon(),name:null==i?void 0:i.getName()})),[i]),{state:s}=(0,oe().j)(),l=(null===(n=s.value)||void 0===n?void 0:n.memberCount)||0;return i?(0,D.jsx)(N,{icon:(0,D.jsx)(ne().B,{disabled:!0,icon:o,isEmptyPage:!1,title:r,size:80,isLarge:!0}),title:r,description:(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.description.enterprise",defaultMessage:"Enterprise"}),(0,D.jsx)(ie().A,{style:{margin:"0 2px"}}),(0,D.jsx)(ae().Qq,{memberCount:l})]})}):null}function ue(e){let{organizationStore:n,setOnboardingState:t}=e;const i=(0,o().v3)(),r=(0,a().K8)((()=>n.getEmailDomains()),[n]),s=(0,w().tz)(),l=(0,a().K8)((()=>n.getOwnerIds().map((e=>new(ee().LU)(i,{table:J().oo,id:e})))),[n,i]),d=(0,a().K8)((()=>{var e;return(null===(e=l.at(0))||void 0===e?void 0:e.getDisplayName(s))??""}),[l,s]);return(0,D.jsxs)(R().VP,{gap:16,children:[(0,D.jsx)(me,{title:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.verifyEmailDomain",defaultMessage:"Verify email domain"}),rightContent:1===r.length?(0,D.jsx)(M().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",as:"span",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.singleEmailDomain",defaultMessage:"{emailDomain} verified",values:{emailDomain:(0,D.jsx)(M().D,{styleName:"UIMedium-13px/Medium",colorName:"primary",as:"span",children:`@${r[0]}`})}})}):(0,D.jsx)(M().D,{styleName:"UIMedium-13px/Regular",colorName:"secondary",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.emailDomainCount",defaultMessage:"{count} {count, plural, one {email domain} other {email domains}}",values:{count:r.length}})})}),(0,D.jsx)(me,{title:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.configureOrganization",defaultMessage:"Configure organization"}),rightContent:(0,D.jsxs)(D.Fragment,{children:[1===l.length?(0,D.jsxs)(R().fI,{gap:8,alignItems:"center",children:[(0,D.jsx)(te().A,{userStore:l[0],size:se().tR,avatarShouldShowShadow:!1,hasTooltip:!1,iconStyle:{fontSize:12}}),(0,D.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"secondary",as:"span",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.singleOwner",defaultMessage:"{userName} invited",values:{userName:(0,D.jsx)(M().D,{styleName:"UIRegular-14px/Regular",colorName:"primary",as:"span",children:d})}})})]}):(0,D.jsx)(le().t,{users:l,showTooltip:!0,isLoading:!1}),(0,D.jsx)(V().p,{isBlue:!0,size:"sm",onClick:()=>{t((e=>({...e,currentStageIndex:x.indexOf("organization_configuration")})))},children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup.content.editOrganization",defaultMessage:"Edit"})})]})})]})}function me(e){let{title:n,rightContent:t}=e;const i=(0,I().IS)((e=>({rowItemContainer:{width:"100%",borderRadius:8,borderWidth:1,borderStyle:"solid",borderColor:e.stroke.secondary,boxShadow:_().v,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:"14px 16px"},checkmarkCircle:{display:"flex",borderRadius:"100%",backgroundColor:e.fill.uiBlueSecondary,width:24,height:24,color:e.text.uiBluePrimary,alignItems:"center",justifyContent:"center"},checkmarkIcon:{width:14,height:14},leftContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:8},rightContent:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:12}})),[]);return(0,D.jsxs)("div",{style:i.rowItemContainer,children:[(0,D.jsxs)("div",{style:i.leftContent,children:[(0,D.jsx)("div",{style:i.checkmarkCircle,children:(0,Q().checkmarkIcon)(i.checkmarkIcon)}),(0,D.jsx)(M().D,{styleName:"UIRegular-14px/Medium",children:n})]}),(0,D.jsx)("div",{style:i.rightContent,children:t})]})}var pe=()=>t(848392),ge=()=>t(972435),fe=()=>t(623580),ve=(t(517642),t(658004),t(733853),t(845876),t(432475),t(515024),t(731698),t(803949),()=>t(764880)),he=()=>t(784892),ye=()=>t(322769),xe=()=>t(574752),be=()=>t(962730),Ce=()=>t(377586),Ie=()=>t(508496),je=()=>t(939740),Se=()=>t(64e3),we=()=>t(897119),ke=()=>t(267155),Ae=()=>t(881690),Me=()=>t(856952),ze=()=>t(457688),_e=()=>t(303129),Te=()=>t(443573);const Be=5;function Oe(e){let{isOpen:n,onDismiss:t,onClick:r,organizationStore:s,organizationOwnerIds:l,setOrganizationOwnerIds:d}=e;const c=(0,w().tz)(),m=(0,I().IS)((e=>({menuItem:{padding:6,borderRadius:_().V.default,maxHeight:240},pillContainer:{margin:"0px 4px 4px 0px",background:e.surface.page,padding:"0px 6px",height:28},pillContents:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"},pillText:{marginLeft:6}})),[]),p=(0,i.useCallback)((e=>{const n=l.filter((n=>n!==e));d(n)}),[l,d]),g=(0,i.useCallback)((()=>{l.length>1&&d(l.slice(0,l.length-1))}),[l,d]),f=(0,a().K8)((()=>{var e;return null===(e=u().default.state.currentUserStore)||void 0===e?void 0:e.id}),[]),[v,h]=(0,i.useState)(!1),y=(0,o().v3)(),x=(0,a().K8)((()=>l.map((e=>{const n=new(ee().LU)(y,{table:J().oo,id:e}),t=n.getModel();return(0,D.jsx)(Ae().A,{showRemoveButton:e!==f,value:(0,D.jsxs)("div",{style:m.pillContents,children:[(0,D.jsx)(te().A,{userStore:n,size:18}),(0,D.jsx)("div",{style:m.pillText,children:(0,D.jsx)(ze().S,{actor:t?(0,ve().A7)(t):void 0})})]}),style:m.pillContainer,format:he().NY.Medium,isSingle:!1,onClickRemove:n=>{n.stopPropagation(),p(e),h(!1)}},e)}))),[f,y,p,l,m.pillContainer,m.pillContents,m.pillText]),[b,C]=(0,i.useState)(""),j=(0,i.useCallback)((e=>{C(e.currentTarget.value)}),[]),S=e=>{const n=[...l,e];d(n),C("")};return(0,D.jsx)(we().Ay,{placementToOrigin:be().W.Bottom,alignmentToOrigin:be().C.Start,originGap:8,open:n,popupType:Ce().n.Popup,onDismiss:()=>{h(!1),t()},origin:(0,D.jsx)(Me().Ay,{focus:v,focusInitial:!1,showBorder:!0,onRemoveLastToken:g,format:Me().le.Select,value:b,tokens:x,onChange:j,onClick:()=>{h(!0),r()},placeholder:c.formatMessage({id:"onboarding.configureOrganization.selectOwnersPlaceholder",defaultMessage:"Select organization owners"}),style:m.menuItem}),render:()=>(0,D.jsx)(Re,{organizationStore:s,query:b,onSelectUser:S,userIdsToExclude:l})})}function Re(e){let{organizationStore:n,query:t,onSelectUser:i,userIdsToExclude:r}=e;const s=(0,o().v3)(),l=(0,_e().l)(),{spaceUsers:d}=(0,Te().$)(l),c=(0,a().K8)((()=>{const e=new Set;for(const n of l){(d[n.id]??[]).forEach((n=>{(0,ye().c7)(n)&&e.add(n.userId)}))}return e}),[l,d]),[{value:u}]=(0,v().Yb)((async()=>{if(Ie().default.checkGate({gateName:"dont_load_users"}))return[];const e=Array.from(c).filter((e=>!(null!=r&&r.includes(e))));return(await(0,xe().searchUsers)({environment:s,query:t,parentStore:n,userIds:e})).slice(0,Be)}),[c,t,n,r,s]);if(0===t.length||!u)return null;const m=u.length>0?u.map((e=>({key:e.id,render:n=>(0,D.jsx)(ze().A,{...n,actor:(0,ve().A7)(e)}),action:()=>{i(e.id)}}))):[{key:"no users found",render:()=>(0,D.jsx)(Se().A,{title:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.noMembersFound",defaultMessage:"No members found"})}),action:()=>{}}];return(0,D.jsx)(je().Ay,{initialFocus:0,type:je().Oh.Vertical,sections:[{key:"user results",render:e=>(0,D.jsx)(ke().z,{loading:!1,...e}),items:m}]})}function De(e){let{onboardingState:n,setOnboardingState:t}=e;const r=(0,o().v3)(),{updateCacheWithRecordMap:a}=(0,i.useContext)(C().N),s=function(e){return n=>{e((e=>{if(e)return{...e,orgConfigurationInfo:e.orgConfigurationInfo?{...e.orgConfigurationInfo,...n}:void 0}}))}}(t),l=n.orgConfigurationInfo;if(!l)return null;const d=W({setOnboardingState:t,shouldContinue:async()=>{const e=await h().callApi({eventName:"updateOrganization",environment:r,data:{organizationId:l.organizationId,name:l.organizationName,...l.organizationIcon?{icon:l.organizationIcon}:{},...l.organizationOwners?{ownerIds:l.organizationOwners}:{},onboardingStatus:"completed"}});return"success"===e.type?(a(e),!0):(k().f1((0,A().Hu)(ge().A.getIntl(),e)),!1)}});return(0,D.jsx)(q,{header:(0,D.jsx)(N,{icon:(0,D.jsx)("img",{src:j().A.images.onboarding.planTypeForWorkSplitIntentDarkmodePng,style:{height:77,width:77}}),title:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.title",defaultMessage:"Configure organization"}),description:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.description",defaultMessage:"Organizations let you view all your members, guests, and security settings in one place, even if you’re managing multiple workspaces"})}),isContinueDisabled:!Ve(l),continueButtonLabel:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.finishSetup",defaultMessage:"Finish setup"}),onContinue:d,children:(0,D.jsx)(Ne,{organizationConfigurationInfo:l,setOrganizationConfigurationInfo:s})})}function Ne(e){let{organizationConfigurationInfo:n,setOrganizationConfigurationInfo:t}=e;const r=(0,o().v3)(),s=(0,w().tz)(),l=(0,I().IS)((e=>({label:{paddingBottom:6},nameInput:{paddingTop:6,paddingBottom:6},orgOwnerInput:{paddingBottom:8},defaultIcon:{padding:6,color:e.icon.secondary},icon:{height:32,width:32,background:e.tokenInputMenuItemBackground,borderRadius:_().V.default,border:`1px solid ${e.stroke.primary}`}})),[]),d=(0,re().E)({organizationId:n.organizationId}),{primaryWorkspaceName:c,initialOrganizationOwnerIds:u}=(0,a().K8)((()=>({primaryWorkspaceName:(null==d?void 0:d.getName())??"",initialOrganizationOwnerIds:(null==d?void 0:d.getOwnerIds())??[]})),[d]),m=n.organizationName,p=n.organizationIcon,[g,f]=(0,i.useState)(!1),v=r.currentUser.id;if(!d||!v)return null;const h=[v,...u.filter((e=>e!==v))],y=n.organizationOwners??h;return(0,D.jsxs)(R().VP,{gap:24,children:[(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{style:l.label,children:(0,D.jsx)(M().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.chooseIconAndName",defaultMessage:"Choose icon & name"})})}),(0,D.jsxs)(R().fI,{gap:8,children:[(0,D.jsx)(ne().B,{disabled:!1,bucket:"public",icon:void 0===p?void 0:{pointer:d.pointer,icon:p},defaultIcon:(0,pe().M)(l.defaultIcon),isEmptyPage:!1,emojiSize:24,size:32,onChange:e=>{t({organizationIcon:e})},style:l.icon}),(0,D.jsx)(R().VP,{gap:4,width:"100%",children:(0,D.jsx)(fe().A,{value:m,onChange:e=>{t({organizationName:e.target.value})},inputElementAttributes:{required:!0,"aria-describedby":"organization-name-validation-errors"},placeholder:s.formatMessage({id:"onboarding.configureOrganization.organizationNamePlaceholder",defaultMessage:"Name of organization"}),style:l.nameInput})})]})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{style:l.label,children:(0,D.jsx)(M().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.selectOwners",defaultMessage:"Select who will be organization owner"})})}),(0,D.jsx)("div",{style:l.orgOwnerInput,children:(0,D.jsx)(Oe,{isOpen:g,onDismiss:()=>f(!1),onClick:()=>f(!0),organizationStore:d,organizationOwnerIds:y,setOrganizationOwnerIds:e=>{t({organizationOwners:e})}})}),(0,D.jsx)(M().D,{styleName:"UISmall-12px/Regular",colorName:"secondary",children:(0,D.jsx)(w().sA,{id:"onboarding.configureOrganization.selectOwnersDescription",defaultMessage:"Organization owners have more power than workspace owners. You can add all existing workspace owners of <b>{primaryWorkspaceName}</b>, or only give this role to a few people.",values:{primaryWorkspaceName:c,b:function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return(0,D.jsx)("b",{children:n})}}})})]})]})}function Ve(e){const n=e.organizationName;return n&&n.length>0}function Pe(e){var n;const t=(0,o().v3)(),{loading:r,onboardingInfo:a,onboardingState:s,refresh:l}=function(e){const n=(0,o().v3)(),{updateCacheWithRecordMap:t}=(0,i.useContext)(C().N),[{status:r,value:a},s]=(0,v().Yb)((async()=>{const i=await h().callApi({eventName:"getOrganizationOnboardingInfo",environment:n,data:{...e,includeRecordMap:!0}});if("success"!==i.type)return"failed"===i.type?{onboardingInfo:{onboardingStatus:"ineligible"},onboardingState:void 0}:(0,m().HB)(i);{t({data:i.data});const e=i.data.result,a=e.onboardingStatus;if("ineligible"===a)return{onboardingInfo:e,onboardingState:void 0};if("not_started"===a){var o,r;const t=e.spaceId,i=await h().callApi({eventName:"getSamlConfigForSpace",environment:n,data:{spaceId:t}});if("failed"===i.type)return{onboardingInfo:e,onboardingState:void 0};const a=null===(o=i.data.samlConfig)||void 0===o?void 0:o.emailDomains,s=null===(r=i.data.samlConfig)||void 0===r?void 0:r.domainVerifications.filter((e=>!(null!=a&&a.includes(e.domain)))).sort(((e,n)=>n.createdAt-e.createdAt)).map(y().W0).map((e=>e.data)).at(0);return{onboardingInfo:e,onboardingState:{currentStageIndex:s?x.indexOf("domain_verification_pending"):x.indexOf("domain_verification_start"),domainVerificationInfo:{spaceId:t,domainVerification:s}}}}if("domain_verified"===a||"completed"===a){const n=e.organizationId;return{onboardingInfo:e,onboardingState:{currentStageIndex:x.indexOf("completed"===a?"onboarding_success":"organization_configuration"),orgConfigurationInfo:{organizationId:n}}}}(0,m().HB)(a)}}),[n,e,t]);return{loading:"pending"===r||"idle"===r,onboardingInfo:null==a?void 0:a.onboardingInfo,onboardingState:null==a?void 0:a.onboardingState,refresh:s}}(e.onboardingProps),[c,u]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{r||u(s)}),[r,s]);const b=(0,i.useRef)(null==c?void 0:c.currentStageIndex);if((0,i.useEffect)((()=>{var e,n;const i=null==c?void 0:c.currentStageIndex,o=null==c||null===(e=c.orgConfigurationInfo)||void 0===e?void 0:e.organizationId,a=null==c||null===(n=c.domainVerificationInfo)||void 0===n?void 0:n.spaceId;if(r||void 0===i)return;if(b.current===i)return;const s=x[i],l=b.current?x[b.current]:void 0;(0,p().u4)({environment:t,event:{eventName:"org_console_onboarding_navigate",eventProperties:{organizationId:o,spaceId:a,route:`${d()._P.name}/${s}`,from:l?`${d()._P.name}/${l}`:d()._P.name}}}),b.current=i}),[c,r,t]),r||!a)return(0,D.jsx)(g().A,{});if("completed"===a.onboardingStatus)return(0,D.jsx)(tn,{organizationId:a.organizationId});if("ineligible"===a.onboardingStatus)return(0,D.jsx)(tn,{organizationId:void 0});if(!c||c.currentStageIndex<0||c.currentStageIndex>=x.length)return(0,D.jsx)(g().A,{});const I=x[c.currentStageIndex],j=(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(H,{currentStageName:I}),Ee(I,c,u,l,e.refreshUserOrganizations)]}),S=null===(n=c.orgConfigurationInfo)||void 0===n?void 0:n.organizationId;return S?(0,D.jsx)(f().X,{organizationId:S,children:j}):j}function Ee(e,n,t,i,o){switch(e){case"domain_verification_start":return(0,D.jsx)(K,{onboardingState:n,setOnboardingState:t});case"domain_verification_pending":return(0,D.jsx)(Y,{onboardingState:n,setOnboardingState:t});case"domain_verification_success":return(0,D.jsx)(Z,{onboardingState:n,setOnboardingState:t,refreshOnboardingState:i});case"organization_configuration":return(0,D.jsx)(De,{onboardingState:n,setOnboardingState:t});case"onboarding_success":return(0,D.jsx)(de,{onboardingState:n,setOnboardingState:t,refreshUserOrganizations:o});default:(0,m().HB)(e)}}var Le=()=>t(780879),Fe=()=>t(626466),Ue=()=>t(737693),He=()=>t(493823),$e=()=>t(710149),qe=()=>t(188213),We=()=>t(590082),Ke=()=>t(871405),Ge=()=>t(182392),Ye=()=>t(687190);function Ze(e){let{organizationId:n,currentUserStore:t,selectedTabName:r}=e;const s=(0,o().v3)(),l=(0,I().DP)(),{availableOrganizationFeatures:c}=(0,i.useContext)(f().D),{clearAllPendingSettings:u,hasPendingCentralizedSettings:p}=(0,i.useContext)(Le().p),{state:g}=(0,oe().j)(),v=(0,re().E)({organizationId:n}),h=(0,a().K8)((()=>v?(0,D.jsx)(ne().B,{disabled:!0,icon:v.getIcon(),defaultIcon:(0,Ue().V)(),isEmptyPage:!1,size:We().WK}):(0,D.jsx)($e().A,{style:{height:We().WK,width:We().WK,borderRadius:6}})),[v]),y=(0,a().K8)((()=>v?v.getName():(0,D.jsx)($e().A,{style:{marginTop:4,height:18,width:120,borderRadius:4}})),[v]),x=(0,a().K8)((()=>{var e;return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(w().sA,{id:"organization.general.orgMetadata",defaultMessage:"Enterprise plan"}),(0,D.jsx)(ie().A,{style:{margin:"0 2px"}}),(0,D.jsx)(ae().Qq,{memberCount:(null===(e=g.value)||void 0===e?void 0:e.memberCount)||0})]})}),[g.value]),b=(0,a().K8)((()=>d().oh.filter((e=>{if("onboarding"===e.name)return!1;return(0,Ke().N9[e.name])({environment:s,currentUserStore:t,organizationId:n,features:c})}))),[t,s,n,c]),C=(0,i.useMemo)((()=>b.map((e=>{if("onboarding"!==e.name)return{id:e.name,name:Ke().HG[e.name].tab.name,icon:Ke().HG[e.name].tab.icon,isSelected:r===e.name,onClick:async()=>{const t=p();if("security"===r&&t){const{accept:e}=await(0,qe().A)(l);if(!e)return;u()}(0,Ge().i)({environment:s,organizationId:n,tabRoute:e})}}})).filter(m().O9)),[s,l,b,r,n,p,u]);return(0,D.jsx)(Ye().yc,{sidebarTitle:y,sidebarByline:x,sidebarTitleIcon:h,sidebarItemsTitle:(0,D.jsx)(w().sA,{id:"organization.general.sidebar.itemsTitle",defaultMessage:"Admin console"}),topEntitySection:(0,D.jsx)(Xe,{}),bottomEntitySection:(0,D.jsx)(Ye().$n,{}),items:C,hideSeparator:!0})}function Xe(){const e=(0,o().v3)(),n=(0,I().IS)((e=>({container:{display:"flex",alignItems:"center",justifyContent:"center",gap:10,width:"fit-content"},iconContainer:{display:"flex",justifyContent:"center",alignItems:"center",opacity:.5,borderRadius:"100%",background:e.accentColors.gray[100],height:20,width:20},icon:{height:20,width:20,padding:4,color:e.icon.primary,transform:"rotate(90deg)"}})),[]);return(0,D.jsxs)(He().p,{style:n.container,onClick:()=>{c().oo({environment:e,url:s().JZ.root})},children:[(0,D.jsx)("div",{style:n.iconContainer,children:(0,Fe().arrowChevronSingleDownFillIcon)(n.icon)}),(0,D.jsx)(M().D,{styleName:"UISmall-12px/Medium",colorName:"secondary",as:"span",children:(0,D.jsx)(w().sA,{id:"organization.general.button.backToNotion",defaultMessage:"Back to Notion"})})]})}var Qe=()=>t(732770);function Je(){const e=(0,i.useRef)(),n=(0,i.useRef)();return(0,i.useEffect)((()=>{function t(t){Qe().A.state.isKeyboardMode&&(t.clientX===e.current&&t.clientY===n.current||(e.current=t.clientX,n.current=t.clientY,Qe().A.setKeyboardMode(!1)))}return window.addEventListener("mousemove",t),()=>{window.removeEventListener("mousemove",t)}}),[]),null}const en=(nn=function(e){let{organizationId:n,tabRoute:i,properties:r,params:s}=e;const c=(0,o().v3)(),{loading:m,organizationsInfo:p,refresh:g}=(0,t(926938).q)(),v=(0,a().K8)((()=>u().default.state.currentUserStore),[]),h=p.map((e=>e.id)),y=n&&h.includes(n)?n:h[0],{features:x}=(0,t(594137).z)(y),b=(0,a().K8)((()=>!!i&&("onboarding"===i.name||(0,Ke().N9[i.name])({environment:c,currentUserStore:v,organizationId:y,features:x}))),[c,v,y,i,x]);if(m)return null;const I=n===l().Zf;if(I||"onboarding"===(null==i?void 0:i.name)){const e=s[Ke().ge];return I&&!e?(0,D.jsx)(tn,{organizationId:void 0}):(0,D.jsx)(C().$,{children:(0,D.jsx)(Pe,{onboardingProps:I?{spaceId:e}:{organizationId:y},queryParams:s,refreshUserOrganizations:g})})}const j=p.find((e=>e.id===y));if(!y||!j||!i)return(0,D.jsx)(tn,{organizationId:y,queryParams:s});if("completed"!==j.onboardingStatus)return(0,D.jsx)(tn,{organizationId:y,tabRoute:d()._P});const S=Ke().HG[i.name];return b?(0,D.jsx)(C().$,{children:(0,D.jsx)(f().X,{organizationId:y,children:(0,D.jsx)(Le().$,{children:(0,D.jsx)(t(466492).J,{left:(0,D.jsx)(Ze,{organizationId:y,currentUserStore:v,selectedTabName:i.name}),right:S.scene({properties:r,queryParams:s,organizationId:y,tabRoute:i}),showElevatedConsoleContainer:!0})})})}):(0,D.jsx)(tn,{organizationId:y,queryParams:s})},function(e){return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsx)(t(518627).A,{}),(0,D.jsx)(t(171789).A,{}),(0,D.jsx)(t(775812).A,{}),(0,D.jsx)(nn,{...e}),(0,D.jsx)(Je,{})]})});var nn;function tn(e){const n=(0,o().v3)(),{organizationId:t,queryParams:i,tabRoute:a}=e;return(0,r().l)((()=>{t?c().oo({environment:n,url:(0,l().re)({organizationId:t,tabRoute:a??d().Vo,queryParams:i??{}})}):c().oo({environment:n,url:s().JZ.root})})),null}},541235:(e,n,t)=>{t.d(n,{YD:()=>r,c$:()=>i,q_:()=>o});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},o="completed",r="dismissed"},552871:(e,n,t)=>{t.d(n,{L:()=>d});var i=()=>t(484714),o=()=>t(792485),r=()=>t(847249),a=()=>t(986260),s=()=>t(351360),l=()=>t(574012);function d(){const e=(0,i().v3)(),n=(0,i().Y0)(),t=(0,o().S)(),d=(0,r().K8)((()=>{if(!n.isMobileNative||!n.isAndroid)return 0;const{mainEditorCurrentBlockStore:i}=s().default.state;if(!i)return 0;return(0,a().rV)(e,i,null==t?void 0:t.publicEditModeStore.state).shouldShow?48:0}),[e,n,t]);return(0,r().K8)((()=>{if(!n.isMobileNative)return 24;const t=l().A.mobileNativeBottomPadding(e);return 24+d+t}),[e,n.isMobileNative,d])}},655765:(e,n,t)=>{t.r(n),t.d(n,{applyMultiplayerReverseTrialIfEligible:()=>d().V_,applyReverseBusinessTrial:()=>d().xX,applyReversePlusTrial:()=>d().xE,handleTrialUpgradeFromOnboarding:()=>d().WR,handleTrialUpgradeFromOnboardingImpl:()=>d().eu,isEligibleForBlockLimitTimedTrial:()=>l});var i=()=>t(130382),o=()=>t(762433),r=()=>t(57605),a=()=>t(128265),s=()=>t(749356);async function l(e,n){const t=await r().A.awaitData(e,{spaceId:null==n?void 0:n.id});if("free"!==(0,o().AI)(t))return!1;const l=null==n?void 0:n.getSetting("reach_block_limit_time");if(!l||(0,i().Mn)(l)<3)return!1;if(await(0,a().G)(e))return!1;const d=n.getSpaceId();return!!(await(0,s().L6)({environment:e,spaceId:d,offerCampaign:"default"}))}var d=()=>t(66460)},689216:(e,n,t)=>{t.d(n,{n:()=>s});var i=()=>t(534177),o=()=>t(901389),r=()=>t(898486),a=()=>t(972435);async function s(e){let{onRequest:n,onSuccess:t}=e;const s=await n();switch(s.type){case"success":t&&await t(s);break;case"failed":o().f1((0,r().Hu)(a().A.getIntl(),s));break;default:(0,i().HB)(s)}}},739135:(e,n,t)=>{t.d(n,{KD:()=>d,gt:()=>c,i9:()=>l,ll:()=>a,tb:()=>s,x$:()=>r});var i=()=>t(541235),o=()=>t(496603);function r(e,n){return a(c(e,n))}function a(e){return void 0!==e&&(e===i().q_||e===i().YD)}function s(e,n){if(a(n))return;const t=i().c$[e],o=t.steps.findIndex((e=>e.id===n));return-1===o?t.steps[0].id:o===t.steps.length-1?i().q_:t.steps[o+1].id}function l(e,n){const t=c(e,n);if(t&&!a(t))return s(n,t)}function d(e,n){const t=c(e,n);if(t)return function(e,n){const t=i().c$[e];var r;if(a(n))return null===(r=(0,o().HV)(t.steps))||void 0===r?void 0:r.id;const s=t.steps.findIndex((e=>e.id===n));return-1!==s&&0!==s?t.steps[s-1].id:void 0}(n,t)}function c(e,n){var t;if(!e)return;const o=((null===(t=e.getSettings())||void 0===t?void 0:t.tutorials)||{})[n];return void 0===o?i().c$[n].steps[0].id:o}},749356:(e,n,t)=>{t.d(n,{VY:()=>m,Qm:()=>p,z6:()=>u,OC:()=>v,L6:()=>g,Zc:()=>h,x3:()=>f});var i=()=>t(857639),o=()=>t(386164);const r={plans_page:["lic_25","lic_50","resurrection_offer","ai_fifty_percent_upgrade"],sidebar_upsell:["lic_25","lic_50"]};var a=()=>t(502800),s=()=>t(449506),l=()=>t(901389),d=()=>t(989423),c=()=>t(351360);async function u(e,n){var t;const{spaceId:i,offerCampaign:o}=n;if(!i||!o||null===(t=c().default.state.currentSpaceStore)||void 0===t||!t.canAdmin())return;const r=await s().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:i,offerCampaign:o}});return"failed"!==r.type&&"offer"in r.data&&r.data.offer?r.data.offer:void 0}async function m(e){const{environment:n,spaceId:t,offerCampaign:i,entrypoint:o}=e,r=await s().callApi({eventName:"applyCustomerOffer",environment:n,data:{spaceId:t,offerCampaign:i,entrypoint:o??"unknown"}});if("failed"!==r.type)return r;l().Qg(r)}async function p(e,n){const t=await s().callApi({eventName:"applyCustomerOffer",environment:e,data:{...n}});if("failed"!==t.type)return t;l().Qg(t)}async function g(e){const{environment:n,spaceId:t,offerCampaign:i}=e;return void 0!==await u(n,{spaceId:t,offerCampaign:i})}async function f(e){var n;const{environment:t,hasReceived:r,offerType:l,newPlan:d,coupon:u}=e,m=null===(n=c().default.state.currentSpaceStore)||void 0===n?void 0:n.getSpaceId();if(!m)return;const p=await s().callApi({eventName:"updateCustomerOffer",environment:t,data:{spaceId:m,hasReceived:r,offerType:l,newPlan:d,coupon:u},headers:(0,o().WS)({cellId:void 0,spaceId:m})});"failed"===p.type&&i().log({level:"error",from:"offerActions",type:"updateLegacyCustomerOfferFailed",error:(0,a().convertErrorToLog)(p.error)})}async function v(e,n,t){const i=function(e){if(r.hasOwnProperty(e))return r[e]}(t);if(i)for(const o of i){const t=await u(e,{spaceId:n,offerCampaign:o});if((null==t?void 0:t.campaign)===o)return t}}function h(e){let{environment:n,spaceName:t,offerCampaign:i}=e;if(t)switch(i){case"lic_25":case"lic_50":(0,d().WU)(n,"lic_offer_eligible","lic_offer_eligible",3600,{workspace_name:t,lic_25:"lic_25"===i,lic_50:"lic_50"===i});break;case"resurrection_offer":(0,d().WU)(n,"resurrection_offer_eligible","resurrection_offer_eligible",3600,{workspace_name:t});break;default:return}}},775812:(e,n,t)=>{t.d(n,{A:()=>l});t(296540);var i=()=>t(496603),o=()=>t(383594),r=()=>t(962730),a=()=>t(377586),s=t(474848);const l=function(){const{isMobile:e,isTablet:n}=(0,t(484714).Y0)(),o=(0,t(847249).O$)(t(969141).A),l=(0,t(963589).X)("mobile_icon_picker_bottom_sheet");return(0,s.jsx)(t(897119).Ay,{popupType:e?l?a().n.BottomSheet:a().n.SlideUp:a().n.Popup,bottomSheetInitialState:n?"full":"half",open:o.isActive,originRect:o.isActive?o.originRect:void 0,originGap:o.isActive?o.originGap:void 0,placementToOrigin:r().W.Bottom,alignmentToOrigin:r().C.Center,preventScaleTransition:!0,onDismiss:d,render:()=>{if(o.isActive)return(0,s.jsx)(t(545805).A,{debugName:"MediaMenu",capture:!0,onUp:i().D_,onDown:i().D_,children:(0,s.jsx)(t(126090).Ay,{...o,onCancel:d})})},trapFocus:!0})};function d(){o().I()}},806754:(e,n,t)=>{t.d(n,{A:()=>o});t(296540);var i=t(474848);const o=function(e){const n={desktopTitleStyle:{marginBottom:4},marginAfter:{marginBottom:16}},{title:o,marginAfter:r,desktopStyle:a,desktopTitleStyle:s,...l}=e,d=(r||a)&&{...r&&n.marginAfter,...a},c=s?{...n.desktopTitleStyle,...s}:n.desktopTitleStyle;return(0,i.jsx)(t(89924).A,{disableDesktopPadding:!0,enableActionSheetTitle:!0,desktopStyle:d,desktopTitleStyle:c,shouldShowBottomDivider:!1,title:o,...l})}},821879:(e,n,t)=>{t.d(n,{C:()=>O,A:()=>R});t(898992),t(354520),t(581454);var i=t(296540),o=()=>t(484714),r=()=>t(401497),a=()=>t(959013),s=()=>t(496603),l=()=>t(115512),d=()=>t(962730),c=()=>t(377586),u=()=>t(493823),m=()=>t(760217),p=()=>t(897119),g=()=>t(204063),f=()=>t(89924),v=()=>t(978625),h=()=>t(847249),y=()=>t(857639),x=()=>t(502800),b=()=>t(722872),C=()=>t(970585),I=()=>t(939740),j=()=>t(64e3),S=()=>t(480095),w=()=>t(856952),k=t(474848);const A={menu:{width:250,maxHeight:"40vh"},inputMenu:{maxHeight:"20vh"}};const M=function(e){let{labelText:n,value:r,renderResultMenuItem:a,onConfirm:s,items:l,performRequest:d,onDismiss:c,onChange:u,renderToken:m,onRemove:p,onClear:g,disabled:f}=e;const v=(0,o().v3)(),y=(0,h().uB)(void 0,C().A),x=(0,h().uB)(void 0,t(40851).A),[b,I]=(0,t(857437).$)(),j=(0,i.useCallback)(((e,t,i)=>(0,k.jsx)(B,{error:e,data:t,ready:i,labelText:n,value:r,renderResultMenuItem:a,onConfirm:s,menuListStore:y,comboboxProps:I})),[n,r,a,s,y,I]),S={query:r,current:l};return(0,k.jsx)(t(928600).A,{...T(v,c,n,r,l,u,m,p,g,f,b),children:(0,k.jsx)(t(251126).A,{debounce:100,requestStore:x,request:S,performRequest:d,render:j})})};function z(e){const{device:n}=e;return n.isMobile}function _(e){let{labelText:n,value:t,items:i,disabled:r,onChange:a,renderToken:l,onRemove:d,onClear:c,inputComboboxProps:u}=e;const m=(0,o().v3)(),p=i.map((e=>l(e,{onRemove:()=>d(e)})));return(0,k.jsx)(f().A,{isInput:!0,children:(0,k.jsx)("div",{style:{padding:"4px 8px"},children:(0,k.jsx)(w().Ay,{focus:!z(m)||void 0,focusAfterAnimation:!0,format:w().le.FilterValue,tokens:p,placeholder:n.tokenInputPlaceholder,onRemoveLastToken:()=>function(e,n){const t=s().HV(e);t&&n(t)}(i,d),onClearButtonClick:c,value:t,onChange:a,showClearButton:!0,disabled:Boolean(r),style:A.inputMenu,...u})})})}function T(e,n,t,i,o,r,a,s,l,d,c){if(z(e)){return{menuType:b().gu.Modal,title:t.title,right:(0,k.jsx)(S().DoneMenuText,{}),onClickRight:n,header:(0,k.jsx)(_,{labelText:t,value:i,items:o,disabled:d,onChange:r,renderToken:a,onRemove:s,onClear:l,inputComboboxProps:c})}}return{menuType:b().gu.Popup,onClickOutside:n,header:(0,k.jsx)(_,{labelText:t,value:i,items:o,disabled:d,onChange:r,renderToken:a,onRemove:s,onClear:l,inputComboboxProps:c}),...A.menu}}function B(e){let{error:n,data:t,ready:o,labelText:r,value:s,renderResultMenuItem:l,onConfirm:d,menuListStore:c,comboboxProps:u}=e;const m=(0,h().uB)(c,C().A),p=(0,i.useCallback)((e=>(0,k.jsx)(f().A,{...e,title:r.resultSectionTitle,loading:!o})),[r,o]);if(n)return y().log({level:"error",from:r.componentDebugName,type:"requestFailed",error:(0,x().convertErrorToLog)(n),data:{miscDataToConvertToString:{query:s}}}),(0,k.jsx)(p,{children:(0,k.jsx)(j().A,{title:(0,k.jsx)(a().sA,{defaultMessage:"Something went wrong.",id:"search.inputMenu.errorMessage"})})});if(!t)return(0,k.jsx)(p,{children:(0,k.jsx)(j().A,{title:(0,k.jsx)(a().sA,{defaultMessage:"Loading…",id:"search.inputMenu.loading.message"})})});if(t&&0===t.length)return(0,k.jsx)(p,{children:(0,k.jsx)(j().A,{title:(0,k.jsx)(a().sA,{defaultMessage:"No results found.",id:"search.inputMenu.noResults.message"})})});const g={key:"results",items:t.map((e=>function(e,n,t){return{key:e,action:()=>t(e),render:t=>n(e,t)}}(e,l,d))),render:p};return(0,k.jsx)(I().Ay,{type:I().Oh.Vertical,store:m,initialFocus:0,sections:[g],comboboxProps:u})}let O=function(e){return e.Button="Button",e.Section="Section",e.Pill="Pill",e}({});function R(e){const{items:n,keepInputOnItemConfirm:t,mode:r,onChange:a,onMenuDismiss:l,onMenuOpen:d}=e,{device:c}=(0,o().v3)(),u=(0,i.useRef)(),m=(0,i.useRef)(null),[p,g]=(0,i.useState)(!1),[f,v]=(0,i.useState)(""),[h,y]=(0,i.useState)(void 0),[x,b]=(0,i.useState)(void 0);function C(e,n){u.current=requestAnimationFrame((e=>{if(m&&m.current&&(b(m.current.getBoundingClientRect()),n)){const{shouldOpenMenu:e,nextIndexToReplace:t}=n;e&&(g(!0),y(t))}}))}(0,i.useEffect)((()=>(window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C),u.current&&(cancelAnimationFrame(u.current),u.current=void 0)})),[]);const I=n.length;function j(e){w(),g(!1),y(void 0),null==l||l(e)}function S(e){v(e.target.value)}function w(){v("")}function A(){a([])}const M=(0,i.useCallback)((e=>{const t=n.filter((n=>n!==e));a(t)}),[n,a]),z=(0,i.useCallback)((e=>{if("number"==typeof h&&h<n.length){const t=n.slice(0,h).concat(e,n.slice(h+1));a(t)}else if(n.includes(e)&&O.Pill)M(e);else{const t=n.concat(e);a(s().sb(t))}t||w()}),[M,h,n,t,a]);return(0,i.useEffect)((()=>{C()}),[I,r]),c.isMobile?(0,k.jsx)(H,{inputTemporaryValue:f,isMenuOpen:p,onClearInput:w,onClearItems:A,onItemConfirm:z,onMenuClose:j,onMenuInputChange:S,onMenuOpen:function(){g(!0)},onRemove:M,searchTokenFilterProps:e}):(0,k.jsx)(V,{hasItemsSelected:r===O.Pill&&e.hasItemsSelected,inputTemporaryValue:f,isMenuOpen:p,onClearInput:w,onClearItems:A,onItemConfirm:z,onMenuClose:j,onMenuInputChange:S,onMenuOpen:function(e){null==d||d(),C(0,{shouldOpenMenu:!0,nextIndexToReplace:e})},onRemove:M,popupOriginRect:x,ref:m,searchTokenFilterProps:e})}function D(e){return{buttonMenuItem:{color:e.text.secondary},appendListItemButton:{color:e.text.tertiary}}}function N(e,n){return{menuItem:{minHeight:void 0,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},menuItemWrapper:{display:"flex"},sectionMenuItem:{display:"flex"},appendListItemButton:{minHeight:void 0,paddingTop:4,paddingBottom:4,fontSize:l().ny(e,"UIRegular")},icon:{height:16,width:16,marginRight:"Pill"===n?6:-2,fill:"currentColor"},iconSmall:{height:12,width:12},summary:{display:"inline"},summaryItem:{display:"inline"}}}const V=(0,i.forwardRef)((function(e,n){const{hasItemsSelected:r,inputTemporaryValue:a,isMenuOpen:s,onClearInput:l,onClearItems:u,onItemConfirm:m,onMenuClose:g,onMenuInputChange:f,onMenuOpen:v,onRemove:h,popupOriginRect:y,searchTokenFilterProps:x}=e,{addItemLabel:b,disabled:C,focused:I,icon:j,iconStyles:S,items:w,mode:A,renderFilter:M,title:z}=x,_=(0,o().v3)(),T=C||s,B=(0,i.useMemo)((()=>({open:s})),[s]),R=(0,i.useCallback)((()=>{v()}),[v]);return(0,k.jsxs)(t(806754).A,{title:A===O.Section?z:void 0,marginAfter:A===O.Section,style:N(_,A).sectionMenuItem,children:[A!==O.Pill&&(0,k.jsx)(P,{disableFilters:T,items:w,onClick:v,onRemove:h,renderFilter:M}),(0,k.jsx)(t(240260).k.Provider,{value:B,children:A===O.Section?(0,k.jsx)(E,{addItemLabel:b,disabled:C,isMenuOpen:s,mode:A,onClick:R,ref:n}):A===O.Button?(0,k.jsx)(L,{disabled:C,focused:I,icon:j,isMenuOpen:s,mode:A,onClick:R,ref:n,title:z}):A===O.Pill?(0,k.jsx)(F,{disabled:C,hasItemsSelected:r,icon:j,iconStyles:S,onClick:R,ref:n,title:z}):void(0,t(534177).HB)(A)}),(0,k.jsx)(p().Ay,{alignmentToOrigin:d().C.Start,keepFocus:!0,onDismiss:g,open:s,originRect:y,placementToOrigin:d().W.Bottom,popupType:c().n.Popup,preventScaleTransition:!0,render:()=>(0,k.jsx)($,{searchTokenFilterProps:x,inputTemporaryValue:a,onMenuInputChange:f,onClearInput:l,onClearItems:u,onItemConfirm:m,onMenuClose:g,onRemove:h}),trapFocus:!0})]})}));function P(e){const{disableFilters:n,items:t,onClick:o,onRemove:r,renderFilter:a}=e,s=(0,i.useMemo)((()=>t.map(((e,t)=>(0,k.jsx)("li",{children:a(e,{disabled:n,onClick:()=>o(t),onRemove:()=>r(e)})},`${e}_${t}`)))),[n,t,o,r,a]);return(0,k.jsx)("ul",{style:l().$t,children:s})}const E=(0,i.forwardRef)((function(e,n){const{addItemLabel:i,disabled:a,isMenuOpen:s,mode:l,onClick:d}=e,c=N((0,o().v3)(),l),u=(0,r().IS)(D,[D]);return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{ref:n,style:c.menuItemWrapper}),(0,k.jsx)(m().A,{disabled:a||s,focused:!1,icon:(0,t(689094).W)(c.iconSmall),onClick:d,style:{...c.appendListItemButton,...u.appendListItemButton},title:i})]})})),L=(0,i.forwardRef)((function(e,n){const{disabled:t,focused:i,icon:a,isMenuOpen:s,mode:l,onClick:d,title:c}=e,u=N((0,o().v3)(),l),p=(0,r().IS)(D,[D]),g={...u.menuItem,...p.buttonMenuItem};return(0,k.jsx)("div",{ref:n,style:u.menuItemWrapper,children:(0,k.jsx)(m().A,{disabled:t||s,focused:i,icon:a(u.icon),onClick:d,style:g,title:c})})})),F=(0,i.forwardRef)((function(e,n){const{disabled:i,hasItemsSelected:r,icon:a,iconStyles:s,onClick:l,title:d}=e,c=N((0,o().v3)(),O.Pill);return(0,k.jsx)("div",{ref:n,style:c.menuItemWrapper,children:(0,k.jsx)(t(56394).A,{on:r,icon:a({...c.icon,...s}),title:(0,k.jsx)("span",{children:d}),onClick:l,wrapStyle:{opacity:i?.4:1}})})}));function U(e){const{disableFilters:n,items:t,mode:i,onClickClear:r,onMenuOpen:a,renderItemForSummary:s,title:d}=e,c=N((0,o().v3)(),i),u={...l().$t,...c.summary},m=t.length-1,p=(0,k.jsx)("ul",{style:u,children:t.map(((e,n)=>(0,k.jsxs)("li",{style:c.summaryItem,children:[s(e),n!==m&&","," "]},e)))});return(0,k.jsx)(v().A,{disabled:n,label:d,onClick:a,onClickClear:r,title:p})}function H(e){const{inputTemporaryValue:n,isMenuOpen:t,onClearInput:i,onClearItems:r,onItemConfirm:a,onMenuClose:s,onMenuInputChange:l,onMenuOpen:d,onRemove:u,searchTokenFilterProps:g}=e,{mode:f,disabled:v,title:h,items:y,renderItemForSummary:x,icon:b}=g,C=N((0,o().v3)(),f),I=v||t,j=f===O.Section?(0,k.jsx)(U,{disableFilters:I,items:y,mode:f,onClickClear:r,onMenuOpen:d,renderItemForSummary:x,title:h}):(0,k.jsx)(m().A,{disabled:I,focused:!1,icon:b({...C.icon}),onClick:d,title:h});return(0,k.jsx)(p().Ay,{keepFocus:!0,onDismiss:s,open:t,origin:j,popupType:c().n.SlideUp,render:()=>(0,k.jsx)($,{inputTemporaryValue:n,onClearInput:i,onClearItems:r,onItemConfirm:a,onMenuClose:s,onMenuInputChange:l,onRemove:u,searchTokenFilterProps:g})})}function $(e){const{inputTemporaryValue:n,onClearInput:t,onClearItems:i,onItemConfirm:o,onMenuClose:r,onMenuInputChange:s,onRemove:l,searchTokenFilterProps:d}=e,{renderToken:c,renderFooter:m,allowApplyBatchSelection:p}=d;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(M,{...d,onChange:s,onClear:()=>{t(),i()},onConfirm:o,onDismiss:r,onRemove:l,renderToken:c,value:n}),m&&(0,k.jsxs)(f().A,{style:{padding:6,justifyContent:"space-between",display:"flex",flexDirection:"row"},topBorder:!0,children:[(0,k.jsx)(u().p,{onClick:i,children:(0,k.jsx)(a().sA,{id:"searchTokenFilter.clearButton",defaultMessage:"Clear"})}),p&&(0,k.jsx)(g().A,{onClick:()=>{r("applyButton")},children:(0,k.jsx)(a().sA,{defaultMessage:"Apply",id:"searchTokenFilter.applyButton"})})]})]})}},824160:(e,n,t)=>{t.d(n,{A:()=>s});t(296540);var i=()=>t(484714),o=()=>t(401497),r=()=>t(704152),a=t(474848);function s(e){const n=(0,i().Y0)(),t=(0,o().IS)((e=>({sharedStyle:{display:"flex",alignItems:"center",borderRadius:4},innerStyle:{padding:"2px 6px",borderRadius:4,color:e.text.secondary,background:e.defaultBadgeBackground,fontSize:n.isMobile?11:9,lineHeight:n.isAndroid?1.5:1,textTransform:"uppercase",letterSpacing:"0.04em",whiteSpace:"nowrap"}})),[n.isAndroid,n.isMobile]);return n.isMobile?(0,a.jsx)(r().A,{style:{...t.sharedStyle,...e.mobileStyle},disabled:void 0===e.onClick,children:(0,a.jsx)("div",{style:{...t.innerStyle,...e.innerStyle},children:e.children})}):(0,a.jsx)(r().A,{style:{...t.sharedStyle,...e.desktopStyle},disabled:void 0===e.onClick,...e,children:(0,a.jsx)("div",{style:{...t.innerStyle,...e.innerStyle},children:e.children})})}},843518:(e,n,t)=>{t.d(n,{F:()=>d});t(296540);var i=()=>t(484714),o=()=>t(401497),r=()=>t(175947),a=()=>t(277201),s=()=>t(38337),l=t(474848);function d(e){let{}=e;const{isElectronMac:n}=(0,i().Y0)(),t=function(e){return(0,o().IS)((n=>({container:{display:"flex",justifyContent:"flex-end",alignItems:"center",paddingRight:10,height:(0,r().ek)(e)},unexpand:{borderRadius:4,width:28,height:28},hoveredUnexpand:{fill:n.text.primary,background:n.sidebarItemSelectedBackground}})),[e])}(n);return(0,l.jsx)("div",{style:t.container,className:s().sbV,children:(0,l.jsx)("div",{className:s().qGl,children:(0,l.jsx)(a().I,{style:t.unexpand,hoveredStyle:t.hoveredUnexpand})})})}},848392:(e,n,t)=>{t.d(n,{M:()=>r});t(296540);var i=t(474848);const o={viewBox:"0 0 20 20",svg:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("path",{d:"M8.5 9.31a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3"}),(0,i.jsx)("path",{d:"M2.375 6.25c0-1.174.951-2.125 2.125-2.125h11c1.174 0 2.125.951 2.125 2.125v7.5a2.125 2.125 0 0 1-2.125 2.125h-11a2.125 2.125 0 0 1-2.125-2.125zM4.5 5.375a.875.875 0 0 0-.875.875v5.491l1.996-1.995a.625.625 0 0 1 .883 0l1.98 1.98 4.137-4.137a.625.625 0 0 1 .883 0l2.871 2.87V6.25a.875.875 0 0 0-.875-.875zm11.875 6.852-3.312-3.312-4.137 4.136a.625.625 0 0 1-.884 0l-1.98-1.98-2.437 2.438v.241c0 .483.392.875.875.875h11a.875.875 0 0 0 .875-.875z"})]})},r=(0,t(340498).wt)("photo",o)},863330:(e,n,t)=>{t.r(n),t.d(n,{iconDefinition:()=>i,plusSmallIcon:()=>o});t(296540);const i={viewBox:"0 0 16 16",svg:(0,t(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},o=(0,t(340498).wt)("plusSmall",i)},883234:(e,n,t)=>{t.d(n,{_:()=>o});t(296540);var i=t(474848);const o=(0,t(340498).wt)("chevronDownRounded",{viewBox:"0 0 15 9",svg:(0,i.jsx)("path",{d:"M7.92188 8.65625C8.19531 8.64844 8.44531 8.54688 8.64844 8.32812L14.5859 2.25C14.7578 2.07812 14.8516 1.85938 14.8516 1.60156C14.8516 1.08594 14.4453 0.671875 13.9297 0.671875C13.6797 0.671875 13.4375 0.773438 13.2578 0.953125L7.92969 6.42969L2.58594 0.953125C2.40625 0.78125 2.17188 0.671875 1.91406 0.671875C1.39844 0.671875 0.992188 1.08594 0.992188 1.60156C0.992188 1.85938 1.08594 2.07812 1.25781 2.25L7.20312 8.32812C7.41406 8.54688 7.64844 8.65625 7.92188 8.65625Z"})})},890494:(e,n,t)=>{t.d(n,{A:()=>a});t(296540);var i=()=>t(401497),o=()=>t(284371),r=t(474848);function a(e){const n=(0,i().IS)((n=>({numberCircleBaseStyle:{display:"flex",flexShrink:0,borderRadius:"100%",backgroundColor:e.isHighlighted?n.accentColors.uiBlue[600]:e.isLightBlueHighlighted?n.fill.uiBlueSecondary:"dark"===n.mode?n.accentColors.gray[300]:n.accentColors.gray[75],width:20,height:20,color:e.isHighlighted?"white":e.isLightBlueHighlighted?n.text.uiBluePrimary:n.accentColors.gray[600],textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:o().Wy.semibold,fontSize:"10px"}})),[e.isHighlighted,e.isLightBlueHighlighted]);return(0,r.jsx)("div",{style:{...n.numberCircleBaseStyle,...e.style},children:e.number})}},926938:(e,n,t)=>{t.d(n,{q:()=>s});var i=()=>t(484714),o=()=>t(187174),r=()=>t(534177),a=()=>t(449506);function s(){const e=(0,i().v3)(),[{status:n,error:t,value:s},l]=(0,o().Yb)((async()=>{const n=await a().callApi({eventName:"getUserOrganizations",environment:e,data:{}});if("success"===n.type)return n.data;if("failed"===n.type)throw n.error;return(0,r().HB)(n)}),[e]);return{organizationsInfo:(null==s?void 0:s.organizationsInfo)??[],loading:"pending"===n||"idle"===n,error:t,refresh:l}}},978625:(e,n,t)=>{t.d(n,{A:()=>l});t(296540);var i=()=>t(484714),o=()=>t(284371),r=()=>t(946548),a=()=>t(297401),s=t(474848);const l=function(e){const{disabled:n,label:o,title:r,onClick:a,isToggle:l,isToggleActive:u,onClickClear:m,...p}=e,g=(0,t(401497).DP)(),f=(0,i().v3)(),v=function(e){return{menuItemLabel:{color:e.text.tertiary}}}(g),h=d(f),y=(0,s.jsx)("span",{style:v.menuItemLabel,children:o});return(0,s.jsx)(t(760217).A,{focused:!1,...p,inline:l,disabled:n,icon:y,title:r,right:(0,s.jsx)(c,{disabled:Boolean(n),isToggle:Boolean(l),isToggleActive:Boolean(u),onClick:a,onClickClear:m}),onClick:a,dontShrinkIcon:!0,dontShrinkRight:!0,shouldWrapTitle:!0,style:h.menuItem,desktopIconStyle:h.menuItemLabel})};function d(e){return{menuItem:{background:void 0,minHeight:void 0,fontSize:e.device.isMobile?o().J.UISmall.mobile:o().J.UIRegular.desktop,paddingTop:e.device.isMobile?12:4,paddingBottom:e.device.isMobile?12:4},labeledMenuItemTitle:{display:"inline-flex",alignItems:"center"},menuItemLabel:{marginTop:0},rightWrapper:{display:"flex",alignItems:"center",marginTop:"-50%",marginBottom:"-50%",height:44}}}function c(e){let{disabled:n,isToggle:t,isToggleActive:o,onClick:l,onClickClear:c=(()=>{})}=e;const u=d((0,i().v3)()).rightWrapper;return t?(0,s.jsx)("div",{style:u,children:(0,s.jsx)(r().A,{on:Boolean(o),onClick:l})}):(0,s.jsx)(a().A,{disabled:n,onClick:c})}},985595:(e,n,t)=>{t.d(n,{n:()=>o});t(296540);var i=t(474848);const o=(0,t(340498).wt)("mailRound",{viewBox:"0 0 17 12",svg:(0,i.jsx)("path",{d:"M3.09961 11.9639H14.1055C15.3359 11.9639 16.0469 11.2529 16.0469 9.84473V2.29785C16.0469 0.896484 15.3291 0.185547 13.9004 0.185547H2.89453C1.66406 0.185547 0.953125 0.889648 0.953125 2.29785V9.84473C0.953125 11.2598 1.6709 11.9639 3.09961 11.9639ZM7.68652 6.41992L2.52539 1.32715C2.67578 1.26562 2.85352 1.23145 3.05859 1.23145H13.9414C14.1533 1.23145 14.3379 1.26562 14.4883 1.33398L9.34082 6.41992C9.04688 6.71387 8.78027 6.84375 8.51367 6.84375C8.24023 6.84375 7.97363 6.70703 7.68652 6.41992ZM1.99902 9.84473V2.29785C1.99902 2.24316 1.99902 2.27051 1.99902 2.22266L5.92969 6.08496L2.00586 9.96094C1.99902 9.92676 1.99902 9.88574 1.99902 9.84473ZM15.001 2.30469V9.85156C15.001 9.87891 15.001 9.91309 15.001 9.94043L11.0977 6.08496L15.001 2.24316C15.001 2.30469 15.001 2.30469 15.001 2.30469ZM3.05859 10.918C2.86719 10.918 2.70312 10.8906 2.55957 10.8291L6.64746 6.78906L7.0918 7.22656C7.57031 7.69824 8.02832 7.89648 8.51367 7.89648C8.99219 7.89648 9.45703 7.69824 9.93555 7.22656L10.3799 6.78906L14.4609 10.8223C14.3105 10.8906 14.1396 10.918 13.9414 10.918H3.05859Z"})})}}]);