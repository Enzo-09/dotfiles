"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[4253],{43972:(e,t,n)=>{n.d(t,{w:()=>l});n(296540);var r=()=>n(764880),o=()=>n(534177),i=()=>n(256863),a=()=>n(453697),s=n(474848);function l(e){const{actor:t}=e,n={size:e.size??14,style:{marginRight:2,...e.style}};return(0,r().H3)(t)?(0,s.jsx)(i().A,{botValue:t.asActor,...n}):(0,r().ps)(t)?(0,s.jsx)(a().A,{userValue:t.asActor,...n}):(0,r().h2)(t)?(0,s.jsx)(a().A,{userValue:void 0,...n}):void(0,o().HB)(t)}},53528:(e,t,n)=>{n.d(t,{OH:()=>s,T2:()=>l,do:()=>c});var r=()=>n(597777),o=()=>n(869190),i=()=>n(604995),a=()=>n(416504);function s(e){const{dateTime:t,intl:n,shortenDateAndRange:r}=e,a=i().C6.toPersistedDate(t.valueOf());return o().ZF({value:a,allowRelativeDates:!0,intl:n,shortenDateAndRange:r,displayInUserTimezone:!0})}function l(e){const{dateTime:t,intl:n,userTimeZone:r,displayInUserTimezone:a,alwaysIncludeTimezone:s}=e,l=i().C6.toPersistedDateTime(t.valueOf(),t.zoneName);return o().ZF({value:l,allowRelativeDates:!0,intl:n,userTimeZone:r,displayInUserTimezone:a,alwaysIncludeTimezone:s})}function c(e){const{luxonRange:t,intl:n}=e,s=i().C6.toPersistedDateRange(t),l=o().ZF({value:s,allowRelativeDates:!1,shortenDateAndRange:!0,intl:n,displayInUserTimezone:!0}),c=t.end.setZone((0,a().P)()),d=o().fU({start_time:c.toFormat(r().GE),humanReadable:!1,intl:n});return n.formatMessage({id:"verification.timeRange",defaultMessage:"{formattedDateRange} at {formattedEndTime}"},{formattedDateRange:l,formattedEndTime:d})}},56197:(e,t,n)=>{n.d(t,{q:()=>r});const r=n(757695).default.createValue({attached:!1,animating:!1,proportion:0},{name:"PopupBottomSheetOpenProportionStore"})},72307:(e,t,n)=>{n.d(t,{A:()=>r});const r={appCursorListener:{sidebar:1,secondarySidebar:2,editor:3,aiChat:3,marketplace:3,teamHome:3}}},77126:(e,t,n)=>{n.d(t,{j:()=>o});class r extends(()=>n(959180))().A{}const o=new r},93263:(e,t,n)=>{n.d(t,{A:()=>a});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(581454);var r=n(296540);const o=function(e,t){if(e.ref&&t.ref){const n=t.ref;t.ref=t=>{e.ref(t),n(t)}}return r.cloneElement(e,t)};var i=n(474848);const a=function(e){const[t,a]=(0,r.useState)([]),{render:s}=e,l=(0,n(847249).K8)((()=>s()),[s]),c=(0,r.useMemo)((()=>new Set(l.map((e=>e.key)))),[l]),d=(0,n(591779).ZC)(l);if(d){const e=[],n=new Set(t.map((e=>e.key)));for(const t of d)if(!c.has(t.key)&&!n.has(t.key)){const n={visible:!1,onAnimationEnd:()=>{a((e=>e.filter((e=>e.key!==r.key))))}},r=o(t,n);e.push(r)}e.length>0&&a((t=>[...t,...e]))}const u=t.filter((e=>!c.has(e.key))).concat(l);return(0,i.jsx)("div",{className:e.className,children:u})}},97059:(e,t,n)=>{n.d(t,{W:()=>m,w:()=>g});n(944114);var r=()=>n(585515),o=()=>n(577449),i=()=>n(161479),a=()=>n(545285),s=()=>n(763824),l=()=>n(780054),c=()=>n(870618),d=()=>n(670631),u=()=>n(227440),p=()=>n(508496),f=()=>n(540758);async function g(e){const{environment:t}=e;return(await s().lX(Object.keys(d().A.state.offlinePages||{}),100,(e=>async function(e){const{environment:t,pageId:n}=e,s={page:{id:n,spaceId:(0,i().e)(void 0)},baseUrl:l().A.domainBaseUrl,publicDomainName:l().A.publicDomainName,shouldTraverseToggleBlocks:!0,limit:1/0,cursor:{stack:[]},verticalColumns:!1},d=[];return await r().T(s,o().h.sideEffect((e=>((0,a().u)(e)&&d.push(e.id),Promise.resolve())),o().h.fromMonomorphicFunctionUnsafe((async e=>{const n=await c().h7({environment:t,pointer:e,useInMemoryCacheOnly:!1,skipAccessWrites:!0});return null==n?void 0:n.model})))),d}({environment:t,pageId:e})))).flat()}function m(e,t){return!u().A.state.online&&(e.device.isElectron||e.device.isMobileNative)&&p().default.checkGate({gateName:"download_for_offline"})&&!(0,f().Bd)(t)}},105819:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>r,pencilLineIcon:()=>o});n(296540);const r={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"m13.987 5.682-.684.684-1.288-1.288.692-.691a.91.91 0 0 1 1.28 0c.35.35.35.93 0 1.28zm-9.433 9.433 7.914-7.914-1.289-1.289-7.92 7.908c-.122.122-.214.29-.274.457l-.336 1.082c-.06.229.153.442.366.366l1.082-.335q.252-.07.457-.275m12.446.76H5.61l1.25-1.25H17a.625.625 0 1 1 0 1.25"})},o=(0,n(340498).wt)("pencilLine",r)},175116:(e,t,n)=>{n.d(t,{ET:()=>l,Ks:()=>c,RI:()=>s,p2:()=>a});n(16280);var r=n(296540);const o="collectionContextStore",i=(0,n(446943).C)({displayName:o,legacyContextKey:o,modernContextDefaultValue:void 0}),a=i.context,s=i.Provider;function l(){const e=r.useContext(a);if(void 0===e)throw new Error(`No context provided: ${o}`);return e}function c(){return r.useContext(a)}},182034:(e,t,n)=>{n.d(t,{O:()=>u,e:()=>d});n(898992),n(672577);var r=()=>n(908006),o=()=>n(878523),i=()=>n(725614),a=()=>n(892632),s=()=>n(299545),l=()=>n(77126),c=()=>n(489348);function d(e,t){const n=s().dd(t),r=a().xh(n);e.setState({...e.state,files:r})}async function u(e){const{blockStore:t,pageViewBlockStore:n,environment:a}=e;n?n.setState({...n.state,forceDiscussionOpen:!0}):c().A.openNewPageDiscussionInput(t),o().o2(a,{from:"page_comments"}),await r().default.afterNextFlush();const s=l().j.find((e=>e.getBlockStore().id===t.id)),d=null==s?void 0:s.getInputStore();d&&i().setSelectionAtEnd({store:d.state.textStore})}},205618:(e,t,n)=>{n.d(t,{A:()=>o});class r extends(()=>n(757695))().default{getInitialState(){return{modalOpen:!1,tokenQuery:"",inviteTargets:[],inviteRole:"member",isInviteTargetsEmpty:!0,table:n(854150).yK,isFocused:!0,flowId:void 0,inputFocus:"invitee",emailMessage:""}}}const o=r},224011:(e,t,n)=>{n.d(t,{A:()=>i});var r=()=>n(705540);class o extends(()=>n(757695))().default{getInitialState(){return{isFullScreen:window.outerWidth===window.screen.width&&window.outerHeight===window.screen.height}}constructor(){super(),this.updateFromElectronState=async()=>{const e=await r().fullscreen.get();void 0!==e&&this.setState({isFullScreen:e})},r().fullscreen.addListener(this.updateFromElectronState),this.updateFromElectronState()}}const i=new o},227417:(e,t,n)=>{n.d(t,{S:()=>o});var r=()=>n(963589);function o(){return(0,r().X)("opfs_recordmap_cache")}},232280:(e,t,n)=>{n.d(t,{a:()=>o,h:()=>r});const r=.5,o=.3},277201:(e,t,n)=>{n.d(t,{I:()=>x,i:()=>w});var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(387964),l=()=>n(340498),c=()=>n(959013),d=()=>n(186445),u=()=>n(38337),p=()=>n(869562),f=()=>n(749687),g=()=>n(962730),m=()=>n(948914),h=()=>n(145214),v=()=>n(285790),S=()=>n(35392),b=()=>n(859428),y=n(474848);function x(e){const t=(0,o().v3)(),n=(0,o().Y0)(),r=(0,c().tz)(),a=(0,i().O$)(f().sidebarMouseEnteredStore),l=(0,i().O$)(m().b),u=(0,i().O$)(d().$o),g=r.formatMessage({defaultMessage:"Close sidebar",id:"sidebarUnexpandButton.closeSidebar.tooltip"}),h=(!n.isElectronMac||!u)&&!l&&a;return(0,y.jsx)(w,{isVisible:h,icon:s().S,caption:g,onClick:()=>{p().closeSidebarFromTopbarUnexpandButton(t)},keyboardShortcutName:"toggleSidebar",style:e.style,hoveredStyle:e.hoveredStyle})}const C={width:l().Ev.lg,height:l().Ev.lg,fill:"inherit"};function w(e){const t=(0,o().Y0)(),n=(0,a().IS)((e=>({keyboardShortcut:{color:e.text.contrastSecondary},button:{fill:e.mediumIconColor}})),[]),i=(0,r.useMemo)((()=>({position:"relative",marginLeft:10,...t.isMobile&&{height:"100%"},...n.button,...e.style})),[e.style,n.button,t.isMobile]);return(0,y.jsx)(b().A,{renderTooltip:()=>(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{children:e.caption}),e.keyboardShortcutName&&(0,y.jsx)(S().A,{style:n.keyboardShortcut,name:e.keyboardShortcutName})]}),originGap:6,placement:t.isElectron?g().W.Right:g().W.Bottom,render:n=>(0,y.jsx)(h().A,{tag:v().A,animate:{opacity:e.isVisible?1:0},ariaLabel:e.caption,disabled:!e.isVisible,icon:e.icon,style:i,hoveredStyle:e.hoveredStyle,iconStyle:C,mobileFeedback:t.isMobile,onClick:e.onClick,className:u().P7S,...n})})}},278014:(e,t,n)=>{n.d(t,{ac:()=>x,jU:()=>w,qg:()=>C});var r=()=>n(799954),o=()=>n(700500),i=()=>n(534177),a=()=>n(571400),s=()=>n(519839),l=()=>n(799832),c=()=>n(835066),d=()=>n(444570),u=()=>n(327994),p=()=>n(980914),f=()=>n(508496),g=()=>n(871399),m=()=>n(502438);const h=n(236030).Fh-2,v=2,S=4,b=15,y=24;function x(e){const{marginItemType:t,store:n,nodeRect:r,containerRect:a,environment:s}=e,l=function(e){const{store:t,marginItemType:n}=e,r=t.getType(),i=t.getNavigableAncestorFormat(),a=Boolean(i.page_small_text);return r===o().xd.divider?-6:r===o().xd.header?a?7:10:r===o().xd.subHeader?a?4:6:r===o().xd.collectionView?8:r===o().xd.table?"presence_avatars"===n?5.5:14:3}({store:n,marginItemType:t}),c=function(e,t,n){if(t.isTransclusionType())return e+5;if(k(t,n))return e+1;if("ai_block"===t.getType())return t.hasContent()?e+9:e+15;if(t.getType()===o().xd.button)return e+3;return e}(l,n,s),d=((null==r?void 0:r.top)??0)-((null==a?void 0:a.top)??0)+c,p=s.device.isMobile?20:22,f=(u().jK-p)/2;if("selectable_hover_menu_overlay_item"===t)return d;if("attribution_avatars"===t)return d-f;if("presence_avatars"===t){const{attributionsIncludeFoundBlock:t,avatarCount:n}=e;return d+f+(n+(t?1:0)-1)*b}(0,i().HB)(t)}function C(e){const{marginItemType:t,store:n,environment:r,nodeRect:o,containerRect:a,selectable:s}=e,c=r.device.isMobile?20:22,u=(0,d().zb)()+v,{maxLeft:p,isBoundedByParentContainer:f}=function(e){const{environment:t,selectable:n,nodeRect:r,store:o}=e,i=(null==r?void 0:r.left)??0;if(o.isCollectionView()||o.isInsideCollection()){const e=(0,l().U)(o);if(e&&"table"!==e.getViewType())return{maxLeft:i,isBoundedByParentContainer:!1}}const a=null==n?void 0:n.getScrollerContext();let s=0;if(a&&a.horizontalScroller){const e=a.horizontalScroller.getClientRect();s=(null==e?void 0:e.left)??0}const c=Math.max(s,i),d=k(o,t)&&P(o)?h:0,u=c-d<=s,p=u?s:c;return{maxLeft:p,isBoundedByParentContainer:u}}({environment:r,selectable:s,nodeRect:o,store:n}),g=A(r,u+y,n,f),m=p-((null==a?void 0:a.left)??0);if("drag_handle"===t)return m-A(r,u,n,f);if("plus_button"===t)return m-g;if("attribution_avatars"===t){return m-I({marginItemType:t,store:n,originalMenuOffset:g,environment:r,isBoundedByParentContainer:f})-S-c}if("presence_avatars"===t){return m-I({marginItemType:t,originalMenuOffset:g,environment:r,store:n,isBoundedByParentContainer:f})-S-c}(0,i().HB)(t)}function w(e){const{marginItemType:t,nodeRect:n,containerRect:r}=e;if("add_comment"===t)return((null==r?void 0:r.right)??0)-((null==n?void 0:n.right)??0);(0,i().HB)(t)}function I(e){var t;const{marginItemType:n,originalMenuOffset:r,environment:o,store:a,isBoundedByParentContainer:s}=e,l=g().default.state,c=l.isOpen&&(null===(t=l.currentStore)||void 0===t?void 0:t.id)===a.id;switch(n){case"attribution_avatars":return c?r:A(o,0,a,s);case"presence_avatars":return c&&l.currentStore&&!g().default.isRightMarginCommentHovered()?r:A(o,0,a,s);case"drag_handle":case"plus_button":return r;default:(0,i().HB)(n)}}function A(e,t,n,i){if(!i&&P(n)&&k(n,e))return t+h;if(n.isQuoteBlockChild()){return t+3+14+r().nE.paddingLeft}if(f().default.checkGate({gateName:"db_ux_chrome"})&&n.getType()===o().xd.collectionView)return t+6;if(n.isTransclusionType()||"ai_block"===n.getType())return t+4;if(n.isDirectChildOfAiBlock())return t+13;if(n.isInsideTransclusion())return t+5;if(n.getType()===o().xd.table){const r=p().Xe({simpleTableStore:n,environment:e,includeInline:!(0,c().dC)(e,n)}),o=n.isImmediateColumnChild();return 0!==r||o?t+8:t}const s=n.getNumberOfDuplicateBlocksAncestors();return s>0?t+a().t*s:t}function k(e,t){var n;if(e.getType()!==o().xd.page&&!e.isPersonProfile())return!1;const r=(0,l().U)(e);if(!r)return!1;return(e.isInsideCollection()||Boolean(null==r||null===(n=r.collectionStore())||void 0===n?void 0:n.isPageTreeCollection()))&&(0,s().f5)({environment:t,collectionContextStore:r})}function P(e){var t;const n=m().default.state.stores.includes(e);return g().default.state.isOpen&&(null===(t=g().default.state.currentStore)||void 0===t?void 0:t.id)===e.id||n}},339702:(e,t,n)=>{n.d(t,{j:()=>o});var r=()=>n(989423);function o(e,t){r().vd(e,"offline_access_failure",t)}},343916:(e,t,n)=>{n.d(t,{i:()=>r});const r=(0,n(340498).xh)("arrowUpRightSquare",{default:{loader:()=>n.e(43459).then(n.bind(n,443459))},small:{loader:()=>n.e(97517).then(n.bind(n,497517))},mini:{loader:()=>n.e(60475).then(n.bind(n,260475))},large:{loader:()=>n.e(3953).then(n.bind(n,303953))}})},387964:(e,t,n)=>{n.d(t,{S:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M3.608 10.442a.625.625 0 0 1 0-.884l5.4-5.4a.625.625 0 0 1 .884.884L4.934 10l4.958 4.958a.625.625 0 1 1-.884.884z"}),(0,r.jsx)("path",{d:"m14.508 4.158-5.4 5.4a.625.625 0 0 0 0 .884l5.4 5.4a.625.625 0 1 0 .884-.884L10.434 10l4.958-4.958a.625.625 0 1 0-.884-.884"})]})},i=(0,n(340498).wt)("arrowChevronDoubleBackward",o)},398842:(e,t,n)=>{n.d(t,{Jv:()=>S,Zr:()=>b,Rl:()=>y,mA:()=>v});var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(970013),l=()=>n(743176),c=()=>n(68465),d=()=>n(159588),u=()=>n(963589),p=()=>n(331542),f=n(474848);function g(){const e=(0,a().DP)();return(0,f.jsx)("span",{style:{marginLeft:6,fontSize:11,padding:"1px 4px",borderRadius:4,display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1,color:"light"===e.mode?e.accentColors.blue[500]:e.accentColors.blue[600]},children:(0,f.jsx)(p().A,{legacySize:14})})}var m=()=>n(399275);const h=function(){return(0,f.jsx)(n(464708).A,{color:"purple",style:{marginLeft:6,padding:"1px 4px",display:"inline-flex",flexDirection:"row",alignItems:"center",gap:4,marginTop:1},content:(0,f.jsx)(n(959013).sA,{defaultMessage:"AI",id:"database.property.aiAutofillEnabledIndicator"})})};const v=r.memo((function(e){const{propertySchema:t,showIcon:r,showDragIcon:i,hideName:s,badge:l,style:c,iconStyle:u,iconSize:p,dragHandleStyle:g,className:m,labelSizeVariant:h}=e,v=(0,o().v3)(),{device:S}=v,b=S.isMobile?16:14,x=(0,a().IS)((e=>({container:{display:"flex",alignItems:"center",lineHeight:"120%",minWidth:0,fontSize:b,...c},iconWrapper:{display:"grid",justifyContent:"center",alignItems:"center",marginRight:s?void 0:"small"===h||i?4:6,...u},dragHandle:{gridColumn:1,gridRow:1,opacity:i?1:0,transition:`opacity ${d().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:i?0:1,transition:`opacity ${d().bM}`},dragIcon:{fill:e.icon.secondary}})),[b,s,u,h,i,c]);return(0,f.jsxs)("div",{className:m,style:x.container,children:[r&&(0,f.jsxs)("div",{style:x.iconWrapper,children:[(0,f.jsx)("div",{style:x.itemIcon,children:(0,f.jsx)(y,{propertySchema:t,iconSize:p,iconStyle:u})}),(0,f.jsx)("div",{style:x.dragHandle,children:(0,f.jsx)(n(57232).A,{style:g,iconSize:12,iconStyle:x.dragIcon})})]}),!s&&(0,f.jsx)("div",{style:{...n(284371).RC},children:t.name}),l]})}));function S(e){const{propertySchema:t}=e,n=(0,o().v3)();return(0,i().K8)((()=>(0,c().O0)(n)&&s().$M(t)&&s().om(t)),[n,t])?(0,f.jsx)(h,{}):null}function b(e){let{propertyId:t,collectionContextStore:n}=e;return(0,i().K8)((()=>{var e;const r=null===(e=n.collectionStore())||void 0===e?void 0:e.id;if(!r)return!1;const o=m().d.state.collectionsProperties[r];return!!o&&"Loading"===o[t]}),[n,t])?(0,f.jsx)(g,{}):null}function y(e){const{propertySchema:t,iconSize:n,iconStyle:r}=e,{isMobile:i}=(0,o().Y0)(),s=(0,a().DP)(),c=(0,u().X)("nds_default_property_noticon"),d=i?18:16;return(0,f.jsx)(l().zB,{type:t.type,icon:t.icon,size:n||d,theme:s,style:r,isDefaultNoticonEnabled:c})}},399275:(e,t,n)=>{n.d(t,{d:()=>o});n(898992),n(354520);class r extends(()=>n(757695))().default{getInitialState(){return{flowId:void 0,type:"connected_properties_setup",collectionsProperties:{}}}createNewFlowId(){const e=(0,n(206267).JW)();return this.setState({...this.state,flowId:e}),e}getFlowId(){return this.state.flowId?this.state.flowId:this.createNewFlowId()}addCollectionProperties(e,t){const n=this.state.collectionsProperties[e],r=n?{...n,...t}:t;this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:r}})}removeCollectionProperties(e,t){const n=this.state.collectionsProperties[e];if(!n)return;const r=Object.fromEntries(Object.entries(n).filter((e=>{let[n]=e;return!t.has(n)})));if(0===Object.keys(r).length){const{[e]:t,...n}=this.state.collectionsProperties;this.setState({...this.state,collectionsProperties:n})}else this.setState({...this.state,collectionsProperties:{...this.state.collectionsProperties,[e]:r}})}}const o=new r;(0,n(604341).exposeDebugValue)("ConnectedPropertiesSyncStore",o)},406533:(e,t,n)=>{n.r(t),n.d(t,{iconDefinition:()=>o,questionMarkCircleIcon:()=>i});n(296540);var r=n(474848);const o={viewBox:"0 0 20 20",svg:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("path",{d:"M9.978 7.154c-.804 0-1.333.456-1.438.874a.625.625 0 0 1-1.213-.303c.28-1.121 1.44-1.82 2.65-1.82 1.365 0 2.714.905 2.714 2.298 0 .812-.49 1.477-1.13 1.872l-.755.516a.84.84 0 0 0-.381.677.625.625 0 1 1-1.25 0c0-.688.36-1.318.921-1.706l.003-.002.784-.535.014-.008c.374-.228.544-.537.544-.814 0-.459-.517-1.049-1.463-1.049m.662 6.336a.8.8 0 1 1-1.6 0 .8.8 0 0 1 1.6 0"}),(0,r.jsx)("path",{d:"M2.375 10a7.625 7.625 0 1 1 15.25 0 7.625 7.625 0 0 1-15.25 0M10 3.625a6.375 6.375 0 1 0 0 12.75 6.375 6.375 0 0 0 0-12.75"})]})},i=(0,n(340498).wt)("questionMarkCircle",o)},437768:(e,t,n)=>{n.d(t,{LN:()=>me,Kh:()=>le,Ay:()=>de,gj:()=>ye});n(16280),n(898992),n(737550);var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(628182),l=()=>n(175947),c=()=>n(496603),d=()=>n(222917),u=()=>n(622232),p=()=>n(620689),f=()=>n(255460),g=()=>n(662453),m=()=>n(2143),h=()=>n(765974),v=()=>n(668435),S=()=>n(959013),b=()=>n(100622),y=()=>n(284371),x=()=>n(339702),C=()=>n(963589),w=()=>n(227440),I=()=>n(204063),A=n(474848);function k(){const e=(0,o().v3)(),t=(0,i().O$)(w().e);let n;return(0,r.useEffect)((()=>{t||(0,x().j)(e,{type:"page_error_indicator"})}),[t,e]),n=t?(0,A.jsx)(S().sA,{defaultMessage:"Oops, there was an error loading this page. Refresh to load it again.",id:"pageErrorIndicator.loadingError.message"}):e.defaultRecordCache.persistedRecordCache?(0,A.jsx)(S().sA,{defaultMessage:"Please go online to load this page, then you'll be able to access it while offline.",id:"pageOfflineIndicator.hasLocalData.message"}):(0,A.jsx)(S().sA,{defaultMessage:"Oops, you seem to be offline. Please go online to view this page.",id:"pageOfflineIndicator.noLocalData.message"}),(0,A.jsxs)("div",{style:_(e),children:[(0,A.jsx)("div",{style:M(e),children:n}),(0,A.jsx)(I().A,{size:"lg",onClick:()=>window.location.reload(),children:(0,A.jsx)(S().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}function P(e){let{isOfflineAndUnavailable:t}=e;const n=(0,o().v3)(),s=(0,i().O$)(w().e);(0,r.useEffect)((()=>{s||(0,x().j)(n,{type:"page_error_indicator"})}),[s,n]);const c=(0,a().IS)((e=>({container:{height:"100%",minHeight:`calc(100vh - ${2*l().ek(n.device.isElectronMac)}px)`,paddingLeft:n.device.isMobile?16:32,paddingRight:n.device.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},icon:{width:29,height:24,fill:e.text.secondary,marginBottom:8},title:{fontWeight:y().Wy.medium,color:e.text.secondary,textAlign:"center"},description:{color:e.text.secondary,textAlign:"center"},button:{marginTop:8}})),[n.device]);let d,u;return t?(d=(0,A.jsx)(S().sA,{defaultMessage:"This page is not available while offline.",id:"pageOfflineIndicator.unavailableError.title"}),u=(0,A.jsx)(S().sA,{defaultMessage:"Please return online to access this content{hasLocalData, select, true { or sync the page} other {}}.",id:"pageOfflineIndicator.unavailableError.description",values:{hasLocalData:Boolean(n.defaultRecordCache.persistedRecordCache)}})):(d=(0,A.jsx)(S().sA,{defaultMessage:"Oops, there was an error loading this page.",id:"pageErrorIndicator.loadingError.title"}),u=(0,A.jsx)(S().sA,{defaultMessage:"Refresh to load it again.",id:"pageErrorIndicator.loadingError.description"})),(0,A.jsxs)("div",{style:c.container,children:[s?(0,h().exclamationMarkTriangleFillIcon)(c.icon):(0,v().h)(c.icon),(0,A.jsx)("div",{style:c.title,children:d}),(0,A.jsx)("div",{style:c.description,children:u}),s&&(0,A.jsx)(I().A,{style:c.button,size:"lg",onClick:()=>window.location.reload(),children:(0,A.jsx)(S().sA,{defaultMessage:"Refresh",id:"pageErrorIndicator.reloadButton.label"})})]})}const R=function(e){let{isOfflineAndUnavailable:t}=e;return(0,C().X)("download_for_offline")?(0,A.jsx)(P,{isOfflineAndUnavailable:t}):(0,A.jsx)(k,{})};function M(e){const{device:t}=e;return{fontSize:t.isMobile?18:32,marginBottom:8,textAlign:"center",color:b().Ay.uiBlack,maxWidth:640,lineHeight:1.3}}function _(e){const{device:t}=e;return{height:"100%",minHeight:`calc(100vh - ${2*l().ek(e.device.isElectronMac)}px)`,paddingLeft:t.isMobile?16:32,paddingRight:t.isMobile?16:32,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}var T=()=>n(299772),j=()=>n(13679),E=()=>n(281401),B=()=>n(824622),O=()=>n(186445),L=()=>n(38337),D=()=>n(68465),F=()=>n(600871),K=()=>n(731320),V=()=>n(645873);const N=new(V().O2)("SavePageToOPFS",(()=>n.e(82094).then(n.bind(n,402245)))),z=(0,V()._h)(N,(e=>e.SavePageToOPFS));const $={PersonProfileContainer:new(V().O2)("PersonProfileContainer",(()=>Promise.all([n.e(16471),n.e(28866),n.e(21194),n.e(60499),n.e(44632)]).then(n.bind(n,6260))))},U=(0,V()._h)($.PersonProfileContainer,(e=>e.PersonProfileContainer));var W=()=>n(441199);const q=new(V().O2)("BeamRenderer",(()=>n.e(61227).then(n.bind(n,397005)))),H=(0,V()._h)(q,(e=>e.BeamActivity));var J=()=>n(644914),Z=()=>n(749687),X=()=>n(351360),G=()=>n(948914),Y=()=>n(150193),Q=()=>n(195613),ee=()=>n(375447),te=()=>n(714818),ne=()=>n(712505),re=()=>n(411671),oe=()=>n(543491),ie=()=>n(563615),ae=()=>n(766081),se=()=>n(629537);const le="1.375em";function ce(e){return(0,n(861017).Jx)(e.route)}const de=r.memo((function(e){const{store:t,routerState:c}=e,u=(0,o().v3)(),{RouterStore:p}=u,f=(0,o().Y0)(),g=(0,r.useRef)(null),[m,h]=(0,r.useState)((()=>l().ek(f.isElectronMac)));(0,r.useLayoutEffect)((()=>{if(!g.current)return;const e=g.current.getBoundingClientRect().height;h(e);const t=new ResizeObserver((e=>{for(const t of e)h(t.contentRect.height)}));return t.observe(g.current),()=>t.disconnect()}),[]);const v=(0,r.useCallback)((e=>{oe().A.state&&("scroll"===e?oe().A.state.hadScroll||(oe().A.setState({...oe().A.state,hadScroll:!0}),d().pF(u,{interactionType:e})):"click"===e?oe().A.state.hadClick||(oe().A.setState({...oe().A.state,hadClick:!0}),d().pF(u,{interactionType:e})):"copy"===e?oe().A.state.hadCopy||(oe().A.setState({...oe().A.state,hadCopy:!0}),d().pF(u,{interactionType:e})):(0,n(534177).HB)(e))}),[u]);(0,r.useEffect)((()=>{if(v){const e=()=>{v("copy")};return window.addEventListener("copy",e),()=>window.removeEventListener("copy",e)}}),[v]),(0,r.useEffect)((()=>()=>t&&n(773582).O({rootStore:t})),[t]);const S=(0,i().r6)((()=>t?re().A.getMode(u,t):re().s.disabled),[u,t]),b=(0,i().r6)((()=>(0,D().ZE)(S.state)),[S]),y=(0,i().K8)((()=>{if(!t)return;const{presenceStore:e,pageVisitStore:n}=X().default.state;return{pageStore:t,presenceStore:e,pageVisitStore:n,publicEditModeStore:S,arePublicEditCompletionsEnabledStore:b}}),[b,S,t]),x=(0,i().K8)((()=>u.currentUser.isLoggedIn()),[u]),{isInvalidPage:C,isAppInitializationScreen:w,appContainerStore:I,isHome:k,isPersonProfile:P,shouldShowAddTo:R}=(0,i().K8)((()=>{if(!t)return{isInvalidPage:!0,isAppInitializationScreen:!1,appContainerStore:void 0,isHome:!1,isPersonProfile:!1,shouldShowAddTo:!1};const e=u.currentUser.id===t.getCreatedById()&&t.getCreatedByTable()===n(798880).oo;return{isInvalidPage:Boolean(!t.isDefined()||!t.canRead()),isAppInitializationScreen:Boolean(t.getAppContainerBlockStore()),appContainerStore:t.getAppContainerBlockStore(),isHome:"personal_home_page"===t.getType(),isPersonProfile:t.isPersonProfile(),shouldShowAddTo:Boolean(c.route.showMoveTo&&t.canEdit()&&x&&e)}}),[t,c.route,x,u.currentUser]),M=(0,i().O$)(X().AppStoreMainEditorCurrentBlockStore),_=(0,i().K8)((()=>O().X4(u)),[u]),T=(0,a().DP)(),j=(0,i().K8)((()=>(0,n(696746).lU)(M)),[M]),E=(0,i().K8)((()=>{var e;return Boolean(null===(e=G().A.state.preferences)||void 0===e?void 0:e.isVibrancyEnabled)}),[]),F=(0,i().K8)((()=>{const e="team"===c.route.name,t={flexGrow:0,flexShrink:1,display:"flex",flexDirection:"column",background:j||e?E?`rgba(255, 255, 255, ${n(232280).a})`:(0,n(665579).Lu)({theme:T,isPhone:f.isPhone}):T.contentBackground,zIndex:1,height:f.isMobile?"100vh":`calc(100vh - ${m}px)`,maxHeight:"100%",position:"relative",...j?{height:"100%",position:"absolute"}:{}};if(!(0,J().tv)(u)){const e=Z().sidebarOpenStore.state;(0,J().o1)(u)||(t.boxShadow=T.shadowMD),t.pointerEvents=e?"none":"auto",t.transform="translateX(0)"}return!_&&f.isMobileNative&&(t.pointerEvents="auto",t.transform="translateX(0px)"),t}),[c.route.name,j,E,T,f.isPhone,f.isMobile,f.isMobileNative,m,u,_]),K=(0,i().K8)((()=>"nativeTab"===p.state.route.name),[p]),[N,z]=(0,i().K8)((()=>{const e=(0,J().Uh)(u);return[e,e+(0,J().Ql)(u)]}),[u]),$=(0,i().K8)((()=>n(900652).Z8()),[]),q=(0,i().K8)((()=>W().default.isTogglingToPanelModeState()),[]),H=(0,i().O$)(Z().sidebarResizingStore),Q=(0,i().O$)(G().b),ee=(0,i().O$)(Y().A).banners,te=(0,i().K8)((()=>!Q&&!(0,J().KB)(u)&&!W().default.isPanelPinnedState()),[u,Q]),ne=(0,i().K8)((()=>(0,J().KB)(u)),[u]),ae=(0,i().O$)(n(56197).q),se=(0,i().K8)((()=>u.WindowSizeStore.state.paddingTop),[u.WindowSizeStore]),le=(0,a().IS)((()=>({frameContainer:{order:n(72307).A.appCursorListener.editor,display:"flex",flexDirection:"column",width:f.isTablet?"unset":"100%",overflow:f.isTablet?"unset":"hidden",isolation:"auto",background:ae.attached?"black":"transparent"},sheetInset:ae.attached?{borderRadius:12*ae.proportion+"px",transform:`scale(${1-.08*ae.proportion}, ${1-.035*ae.proportion}) translateY(${.8*se*ae.proportion}px) translateZ(0)`,willChange:"transform border-radius",transition:ae.animating?"transform 0.5s cubic-bezier(0.32, 0.72, 0, 1), border-radius 0.5s cubic-bezier(0.32, 0.72, 0, 1)":void 0}:{}})),[f.isTablet,ae,se]),ce=(0,i().O$)(n(865241).P),de=(0,i().K8)((()=>null==t?void 0:t.canEdit()),[t]),{value:he}=(0,V().fJ)(ie().oQ.workflowNavigationHelpers),ve=(0,i().K8)((()=>null==he?void 0:he.getIsWorkflowEditorOpen(u)),[u,he]),Se=(0,i().O$)(X().AppStoreCurrentSpaceViewStore),ye=(0,i().K8)((()=>(0,J().MJ)(u)),[u]);return(0,r.useEffect)((()=>{n(729380).u.resetHeights()}),[null==M?void 0:M.id]),(0,A.jsx)(ue,{pageContext:y,children:(0,A.jsxs)("div",{className:K?"hidden":"",style:le.frameContainer,children:[!f.isMobile&&!w&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(n(895227).b,{...e,ref:g,showSidebarButton:te,isElectron:f.isElectron,isInvalidPage:C,banners:ee}),f.isElectronWindows&&!Q&&(0,A.jsx)(n(518598).K,{})]}),(0,A.jsxs)(n(145214).A,{tag:"main",animate:{width:j?z:N,opacity:ye?0:1,...ae.attached?{}:{translateX:$}},skip:Q&&H.isResizing||q||f.isMobile||ce,style:{...F,...le.sheetInset},className:L().GtI,children:[f.isMobile&&(0,A.jsx)(n(112995).K,{from:"TopbarMobile",fallback:e=>{let{error:t,errorId:r}=e;return(0,A.jsx)("div",{className:L().byw,style:{display:"flex",justifyContent:"flex-end",alignItems:"center",width:"100%",height:s().s1,maxWidth:"100vw",paddingRight:8},children:(0,A.jsx)(n(138156).W,{error:t,errorId:r,iconSize:26})})},children:(0,A.jsx)(be,{shouldShowAddTo:R,children:(0,A.jsx)(B().$j,{...e,isInvalidPage:C,shouldShowAddTo:R,banners:ee,isSidebarExpanded:ne,spaceViewStore:Se})})}),I?(0,A.jsx)(pe,{appContainerStore:I}):"team"===c.route.name?(0,A.jsx)(n(3243).zF,{teamId:c.route.teamId}):"posts"===c.route.name?(0,A.jsx)(n(732430).Lb,{}):k&&t?(0,A.jsx)(ge,{store:t}):P&&t?(0,A.jsx)(U,{store:t}):ve&&t?(0,A.jsx)(ie().ZO,{store:t,routerState:c,maybeLogSearchInteractionEvent:v}):t?(0,A.jsx)(me,{store:t,routerState:c,maybeLogSearchInteractionEvent:v,shouldShowAddTo:R}):null,x&&f.isMobile&&t&&(0,A.jsx)(fe,{store:t,shouldShowMoveTo:Boolean((c.route.showMoveTo||f.isTablet)&&de)}),f.isMobileNative&&x&&M&&(0,A.jsx)(B().pX,{})]})]})})}));function ue(e){let{pageContext:t,children:r}=e;return t?(0,A.jsx)(n(452446).q,{value:t,children:r}):(0,A.jsx)(A.Fragment,{children:r})}function pe(e){let{appContainerStore:t}=e;return(0,A.jsx)("div",{style:{position:"absolute",height:"100vh",width:"100%"},children:(0,A.jsx)(n(601734).EU,{collectionViewBlockStore:t})})}function fe(e){var t;let{store:n,shouldShowMoveTo:a}=e;const s=(0,o().v3)(),l=(0,i().K8)((()=>{var e;return null===(e=s.mobileNative)||void 0===e?void 0:e.api.renderMobileActionBar}),[null===(t=s.mobileNative)||void 0===t?void 0:t.api.renderMobileActionBar]),c=(0,r.useCallback)((e=>{const{isMobileNative:t}=s.device;return(0,A.jsx)(B().q_,{stores:e,position:t?F().nh.Bottom:F().nh.Floating,currentBlockStore:n})}),[s.device,n]);return s.device.isMobileNative?(0,A.jsx)(B().rs,{currentBlockStore:n,isNativeMobileActionBar:!0,makeActionBarComponent:e=>(0,A.jsx)(B().Ry,{renderApi:l,stores:e,currentBlockStore:n,shouldShowMoveTo:a,fallbackRenderer:c})}):(0,A.jsx)(B().rs,{currentBlockStore:n,isNativeMobileActionBar:!1,makeActionBarComponent:c})}const ge=r.memo((function(e){let{store:t}=e;return(0,A.jsx)(j().A,{disable:!0,store:t,isDefaultContainer:!0,render:()=>(0,A.jsx)(n(117296).VJ,{})})}));function me(e){let{store:t,routerState:n,maybeLogSearchInteractionEvent:a,shouldShowAddTo:s=!1}=e;const l=(0,o().v3)(),{RouterStore:d}=l,{historyState:p}=n,{currentLoadingContainerStore:g,pageVisitStore:m}=(0,i().K8)((()=>{const{currentLoadingContainerStore:e,pageVisitStore:t}=X().default.state;return{currentLoadingContainerStore:e,pageVisitStore:t}}),[]),h=(0,i().K8)((()=>p&&c().Et(p.scrollTop)?p.scrollTop:void 0),[p]),v=(0,i().K8)((()=>Boolean((0,K().qb)(l,t))),[l,t]),S=(0,i().K8)((()=>Boolean(ne().default.isCenterPeekOpen()||te().A.state.open)),[]);return(0,A.jsx)(j().A,{store:t,isDefaultContainer:!0,droppable:!0,isRootContainer:!0,disableRectangularSelection:v,disable:S,render:e=>{let{selectableEvents:o,selectableHoverMenuOverlay:i}=e;const c=f().Cf(d),p={pageStore:t,pageVisitStore:m,scrollToBlockIds:c,scrollToDiscussionId:c.length?void 0:n.route.discussionId,scrollToPosition:h,onReady:()=>{u().$(l,{animateScrollToBlocks:!1,shouldScroll:!1})},onDone:()=>{t.isCollectionView()||"rendered"===X().default.state.renderPhase||X().default.setState({...X().default.state,renderPhase:"rendered"})},render:e=>{let{scrollerRef:n,error:r,ready:l,initialRequestCompleted:c,endOfResultsReached:d,isCollectionInPage:u}=e;return(0,A.jsx)(he,{scrollerRef:n,store:t,error:r,ready:l,initialRequestCompleted:c,endOfResultsReached:d,isCollectionInPage:u,selectableEvents:o,selectableHoverMenuOverlay:i,maybeLogSearchInteractionEvent:a,shouldShowAddTo:s})}};return(0,A.jsx)(r.Suspense,{fallback:(0,A.jsx)(ae().A,{isVisible:!0,store:t}),children:(0,A.jsx)(se().V,{...p,store:g})})}},t.id)}const he=r.memo((function(e){let{store:t,error:s,ready:l,initialRequestCompleted:c,endOfResultsReached:d,isCollectionInPage:u,selectableEvents:f,selectableHoverMenuOverlay:h,maybeLogSearchInteractionEvent:v,scrollerRef:S,shouldShowAddTo:b}=e;const y=(0,o().v3)(),x=(0,o().Y0)(),{publicEditModeStore:C}=(0,n(792485).S)()??{},w=(0,i().K8)((()=>(0,D().ZE)(null==C?void 0:C.state)),[C]),I=(0,n(877051).V)(),k=(0,r.useCallback)((e=>{let{startTime:r,endTime:o}=e;const i=(0,n(799832).U)(t);n(406792).default.DO_NOT_USE_measureLegacy({metricName:"collections.max_scroll_lag_in_session",startTime:r,endTime:o},{environment:y,data:n(476492).kz(i)})}),[y,t]),P=(0,r.useCallback)((e=>{if(n(347199).A.PageScroller=e,e){const t=e.getNode();t instanceof HTMLElement&&(S.current=t)}}),[S]),R=(0,r.useCallback)((()=>{v("scroll")}),[v]),M=(0,r.useCallback)((e=>{f.onClick(e),v("click")}),[v,f]),_=(0,i().K8)((()=>t.isCollectionView()),[t]),j=(0,i().K8)((()=>function(e){const t=(0,T().Wj)(e);return"number"==typeof t?`${t}px`:t}(y)),[y]),E=(0,a().IS)((()=>({spinner:{zIndex:1,opacity:.5,marginTop:`calc(-${le} / 2 - ${j} / 2)`,marginBottom:24,marginLeft:"auto",marginRight:"auto"},scroller:{display:"flex",flexDirection:"column",zIndex:1,flexGrow:1,position:"relative",...l?{}:{opacity:0,pointerEvents:"none",height:0},..._?{}:{alignItems:"center"}}})),[j,_,l]),B=(0,i().K8)((()=>Y().A.state.banners.some((e=>"over_free_block_limit"===e.contentKey))),[]),L=(0,i().K8)((()=>(0,n(807778).Km)(y)),[y]),F=(0,i().K8)((()=>ne().default.isSidePeekOpen()?void 0:l?p().u5(y):n(756279).A.All),[y,l]),K=(0,i().K8)((()=>O().fl({environment:y,store:t})),[y,t]),V=(0,n(227417).S)();return(0,A.jsxs)(r.Fragment,{children:[(0,A.jsxs)(m().H,{ref:P,onScrollLagMeasure:u?k:void 0,onScroll:R,preventType:F,type:K,style:E.scroller,store:Q().A,...f,onClick:M,children:[h,!I&&!x.isPhone&&w&&(0,A.jsx)(g().H7,{scrollerStore:Q().A}),!I&&(0,A.jsx)(n(549500).EO,{scrollerStore:Q().A}),!I&&(0,A.jsx)(n(738944).x,{blockStore:t}),!I&&L&&B&&(0,A.jsx)(n(811481).i,{}),!I&&(0,A.jsx)(n(998765).hD,{blockStore:t}),c&&(0,A.jsx)(ve,{store:t,error:s,shouldShowAddTo:b}),l&&!d&&!(c&&s)&&(0,A.jsx)(n(331542).A,{legacySize:le,style:E.spinner})]}),!I&&x.isPhone&&w&&(0,A.jsx)(g().H7,{scrollerStore:Q().A}),!I&&!x.isPhone&&w&&(0,A.jsx)(g().X9,{scrollerKey:"Page"}),(0,A.jsx)(ae().A,{isVisible:!l,store:t}),V&&(0,A.jsx)(z,{pageId:t.id})]})})),ve=r.memo((function(e){let{store:t,error:s,shouldShowAddTo:l}=e;const{pageVisitStore:c,presenceStore:d,currentLoadingContainerStore:u}=(0,i().K8)((()=>{const{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}=X().default.state;return{pageVisitStore:e,presenceStore:t,currentLoadingContainerStore:n}}),[]),p=(0,o().v3)(),{WindowSizeStore:f,RouterStore:g}=p,m=(0,i().O$)(g),h=(0,i().K8)((()=>f.state.height),[f]),[v,S]=(0,i().K8)((()=>{const e=(0,J().Uh)(p),r=Math.max(n(478726).x6,e),o=e+(0,J().Ql)(p);return[(0,n(747100).RX)(t)&&!t.isFullWidth()?r:o,ye(p,h)]}),[h,p,t]),b=(0,i().K8)((()=>ne().default.isSidePeekOpen()||ne().default.isSidePeekClosingStore.state),[]),y=(0,n(539412).x9)(),x=(0,a().IS)((()=>({pageViewBlockStyle:b?{width:v,position:"absolute",overflowX:"hidden",left:0}:Se})),[b,v]),[I,k]=(0,r.useState)(!1);(0,n(852507).w)((()=>{(0,n(97059).W)(p,t.id)&&k(!0)}));const P=(0,i().O$)(w().e),M=(0,n(591779).ZC)(P);(0,r.useEffect)((()=>{void 0!==M&&(P&&!M)&&I&&k(!1)}),[P,M,I]);const _=(0,i().K8)((()=>{if(!p.currentUser.isLoggedIn())return!1;const e=u&&!u.state.endOfResultsReached,n=t.isDefined()&&!t.canRead();return e&&s||n}),[p.currentUser,u,t,s]),j=(0,i().K8)((()=>!1===(null==u?void 0:u.state.endOfResultsReached)),[u]),O=(0,i().K8)((()=>t.canRead()&&t.isDefined()),[t]),L=(0,C().X)("mobile_page_simplification_next"),D=(0,i().K8)((()=>(0,E().PD)({device:p.device,isMobileTopbarRedesignEnabled:L,shouldShowAddTo:l})),[p.device,L,l]),F=(0,i().K8)((()=>Boolean(t.getCover())),[t]),K=(0,i().O$)(X().AppStoreCurrentSpaceStore),V=(0,i().O$)(X().AppStoreCurrentSpaceViewStore);return(0,r.useEffect)((()=>{if(_){const e=s||new Error("Page loading error");n(449412).O8(e,{from:"Frame.PageContainerContent",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{isLoading:j,canRead:O}}})}}),[_,j,O,s,t.id]),_||I?(0,A.jsx)(R,{isOfflineAndUnavailable:I}):(0,A.jsxs)(r.Fragment,{children:[y?(0,A.jsx)(n(679192).w,{}):null,D&&m&&ce(m)&&(0,A.jsx)(B().Ap,{store:t,routerState:m,hasCoverPhoto:F,spaceStore:K,spaceViewStore:V,isInvalidPage:!1}),(0,A.jsx)(T().Ay,{context:n(548821).Rr.Frame,style:x.pageViewBlockStyle,store:t,paddingBottom:S,disabled:!1}),(0,A.jsx)(H,{}),(0,A.jsx)(n(496978).A,{pageVisitStore:c,presenceStore:d,isPeekView:!1})]})})),Se={};function be(e){const{children:t,shouldShowAddTo:n}=e,r=(0,o().v3)(),l=(0,C().X)("mobile_page_simplification_next"),c=(0,i().K8)((()=>(0,E().PD)({device:r.device,isMobileTopbarRedesignEnabled:l,shouldShowAddTo:n})),[r.device,l,n]),d=(0,a().IS)((()=>({mobileTopbarPlaceholder:{minHeight:s().s1,display:"flex",flexShrink:0},mobileTopbarRedesigned:{position:"absolute",left:0,right:0,zIndex:m().Z+1}})),[]);return(0,A.jsx)("div",{style:c?d.mobileTopbarRedesigned:d.mobileTopbarPlaceholder,children:t})}function ye(e,t){const{device:n}=e,r=n.isMobile&&ee().A.state.open?t:0;return(0,T().Wj)(e,p().C6(e)+r)}},496978:(e,t,n)=>{n.d(t,{A:()=>F});n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(823215),n(354520),n(672577),n(430670),n(581454);var r=n(296540),o=()=>n(484714),i=()=>n(847249),a=()=>n(401497),s=()=>n(641007),l=()=>n(798880),c=()=>n(959013),d=()=>n(496603),u=()=>n(534177),p=()=>n(116008),f=()=>n(777092),g=()=>n(278014),m=()=>n(680026),h=()=>n(569912),v=()=>n(299545),S=()=>n(141333),b=()=>n(129522),y=()=>n(695625),x=()=>n(351360),C=()=>n(372154),w=()=>n(732770),I=()=>n(630116),A=()=>n(502438),k=()=>n(24157),P=()=>n(100622),R=()=>n(634201);function M(e,t){return e&&(0,P().Nq)(e,t)}var _=()=>n(962730),T=n(474848);const j=function(e){let{renderTooltip:t,children:r,style:o}=e;return(0,T.jsx)(n(859428).A,{renderTooltip:t,placement:_().W.Bottom,alignment:_().C.Start,render:e=>(0,T.jsx)("div",{style:o,...e,children:r})})};const E=function(e){let{name:t,size:r,style:o,tooltipStore:i,userId:s}=e;const l=(0,a().IS)((e=>({wrapper:{background:"none",boxShadow:"none"},attribution:{boxSizing:"content-box",width:r||18,height:r||18,lineHeight:`${r||18}px`,overflow:"hidden",textAlign:"center",fontSize:11,letterSpacing:"0.03em",userSelect:"none",WebkitUserSelect:"none",fontVariant:"small-caps",color:s&&M(s,e),cursor:"default"}})),[s,r]),c=function(e){const t=e.name,n=e.email;let r;if(t||n){if(t){const e=t.split(" ").filter((e=>e.length>0));r=e.length>1?String(R().PE(e[0])[0])+String(R().PE(e[e.length-1])[0]):String(R().PE(t)[0])+String(R().PE(t)[1])}else r=null==n?void 0:n.substring(0,2);return r=r?r.toUpperCase():void 0,r}}({name:t});return c&&l.attribution.color?(0,T.jsx)(j,{style:o,renderTooltip:()=>(0,T.jsx)(n(706965).A,{store:i}),children:(0,T.jsx)("div",{style:l.wrapper,children:(0,T.jsx)("div",{style:l.attribution,children:(0,T.jsx)(n(288722).A,{children:c})})})}):null};var B=()=>n(453697);const O={position:"absolute",top:0,left:0,zIndex:89},L=20,D=22;const F=function(e){const{pageVisitStore:t,presenceStore:a}=e,s=(0,o().v3)(),[{status:l,value:c}]=(0,n(187174).Yb)((async()=>(0,n(488923).$g)()),[]),u=(0,r.useRef)(null),f=(0,n(963589).X)("block_attribution"),h=e.isPeekView?n(285288).A:n(195613).A,P=(0,i().K8)((()=>h.state.elementRef??{current:null}),[h]),R=(0,S().yE)(P),M=(0,S().o7)(P),_=(0,i().r6)((()=>{if(!f)return[];const e=R-5e3,t=e+M+5e3,n=function(e){var t;const{blockAttributionEnabled:n,containerEl:r,presenceStore:o,environment:i}=e,{currentUserSettingsStore:a}=x().default.state,s=(null==a||null===(t=a.getSettings())||void 0===t?void 0:t.show_block_attribution)??!0;if(!n||!s)return[];const{rootStore:l}=o.state;if(!r||!l||"editing"!==k().default.state.mode||p().A.state.open||C().A.state.open||w().A.state.isKeyboardMode)return[];let c;for(const d of A().default.state.stores){const e=d.findRecordStoreUIAncestor((e=>e instanceof I().Bv&&e.isTransclusionType())).ancestor;e&&e instanceof I().Bv&&"transclusion_container"===e.getType()&&(c=e)}const u=y().T.getMembersByDOMOrder({filter:()=>!0}),f=r.getBoundingClientRect(),g=v().zo({blockStore:l,transclusionReferences:"omit",childPages:"omit"}).flatMap((e=>{const t=[];if(e.isInsideTransclusion()||e.isTransclusionType()){let n=e;if("transclusion_reference"===e.getType()){const t=e.getTransclusionReferenceTargetStore();t&&(n=t)}"transclusion_reference"!==e.getType()&&"transclusion_container"!==e.getType()||(n!==c?t.push(V(e,u,f,i)):v().zo({blockStore:n,transclusionReferences:"omit",childPages:"omit"}).map((e=>t.push(V(e,u,f,i)))))}else t.push(V(e,u,f,i));return t})).filter((e=>!d().b0(e)));g.sort(((e,t)=>e.top-t.top));const m=g.filter(((e,t,n)=>0===t||e.actor.id!==n[t-1].actor.id));if(1===m.length)return[];return m}({blockAttributionEnabled:f,containerEl:u.current,presenceStore:a,environment:s});n.sort(((e,t)=>e.top-t.top));const r=[];return n.every((n=>n.top>=e&&n.top<=t&&(r.push(n),!0))),r}),[f,a,R,M,s],{debugName:"attributionAvatarStore",useDeepEqual:!0});(0,i().O$)(_),(0,r.useEffect)((()=>{let e;const t=d().sg(_.recompute,100);return f&&(window.addEventListener("resize",t),e=setInterval(t,1e3)),()=>{window.removeEventListener("resize",t),clearInterval(e)}}),[_,f]);const j=(0,i().O$)(_),E=[...(0,i().K8)((()=>function(e){const{attributionAvatars:t,pageVisitStore:n,presenceStore:r,environment:o,containerEl:i,coEditingPresenceStore:a}=e,{rootStore:s}=r.state;if(!s||!(0,m().xm)(r))return[];if(!i)return[];const l=o.currentUser.id,c=(0,m().PZ)({pageVisitStore:n,presenceStore:r}).filter((e=>e.userId!==l&&(0,m().dp)(o,e))),d=null==a?void 0:a.getPresencesForBlock(s.id);d&&c.push(...d);if(!c.length)return[];const u=new Set(t.map((e=>{let{blockStore:t}=e;return t.id}))),p={},f=y().T.getMembersByDOMOrder({filter:()=>!0}),h=i.getBoundingClientRect(),v=[];for(const y of c){const e=(0,m().EV)(y),t=null==y?void 0:y.blockPath;let n;if(t&&(null==t?void 0:t.length)>0?n=z(f,t,s):e&&(n=K(f,e,s)),!n)continue;const r=n.props.store.id;p.hasOwnProperty(r)||(p[r]=0),p[r]++;const i=n.getNode();if(!(i&&i instanceof Element))continue;const a=i.getBoundingClientRect();if(!a)continue;let l,c;if(n.props.store.isFirstBlockInCalloutV2Block()){var S;const e=null===(S=n.props.store.getRecordStoreUIParent())||void 0===S?void 0:S.findRecordStoreUIAncestor((e=>e instanceof I().Bv)).ancestor;e instanceof I().Bv&&(l=e,c=l?b().K.getRect(l):void 0)}const d=u.has(r),x=(0,g().ac)({marginItemType:"presence_avatars",nodeRect:c??a,containerRect:h,attributionsIncludeFoundBlock:d,avatarCount:p[r],store:l??n.props.store,environment:o}),C=(0,g().qg)({marginItemType:"presence_avatars",nodeRect:c??a,containerRect:h,environment:o,store:l??n.props.store,selectable:n});v.push({type:"presence",userId:y.userId,left:C,top:x,blockType:n.props.store.getType()})}return v}({attributionAvatars:j,pageVisitStore:t,presenceStore:a,environment:s,containerEl:u.current,coEditingPresenceStore:"resolved"===l?c:void 0})),[j,t,a,s,l,c],{debugName:"presenceAvatars",useDeepEqual:!0}),...j];return(0,T.jsx)("div",{className:"notion-presence-container",style:O,ref:u,children:(0,T.jsx)(n(93263).A,{render:()=>E.map((t=>{const{left:r,top:o}=t,i={avatarWrapperAnimation:{translateX:r,translateY:o,scale:1,opacity:1},avatarEnterExitAnimation:{scale:.7,opacity:0}},a={...i.avatarWrapperAnimation,...i.avatarEnterExitAnimation};return(0,T.jsx)(n(145214).A,{initial:a,exit:a,animate:i.avatarWrapperAnimation,children:(0,T.jsx)(N,{avatar:t,presenceStore:e.presenceStore})},"attribution"===t.type?t.uniqueId:t.userId)}))})})};function K(e,t,n){return e.find((e=>{const r=e.props.store;return Boolean(r&&r.id===t&&n.uiContains(r)&&e.props.shouldShowHalo)}))}function V(e,t,n,r){const o=e.getLastEditedByPointer();if(!o||o.table!==l().oo)return;const i=e.getType();if("collection_view"===i||"collection_view_page"===i||"divider"===i||"table"===i||"table_row"===i||"tab"===i)return;if(e.isEmptyEditableBlock())return;const a=K(t,e.id,e);if(!a)return;const s=a.getNode();if(!(s&&s instanceof Element))return;const c=s.getBoundingClientRect();if(!c)return;const d=(0,g().ac)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:r}),u=(0,g().qg)({marginItemType:"attribution_avatars",store:e,containerRect:n,nodeRect:c,environment:r,selectable:a});return{type:"attribution",actor:o,left:u,top:d,uniqueId:u>0?`${String(e.key)}+left`:String(e.key),blockStore:e}}function N(e){const{device:t}=(0,o().v3)(),{isMobile:n}=t,{avatar:r}=e,d=(0,c().tz)(),p="presence"===r.type&&r.blockType?r.blockType:void 0,g=n?L:D,v=(0,a().IS)((e=>{const t=p&&["breadcrumb","bulleted_list","numbered_list","toggle"].includes(p),o={width:g,height:g,borderRadius:g};return{uiUserAvatarStyles:{...o},avatarInnerOutline:{...o,outlineStyle:"solid",outlineColor:e.UIUserAvatarInnerOutline,outlineWidth:.5,outlineOffset:-.5},avatarBorder:"presence"===r.type?{...o,outlineStyle:"solid",outlineColor:(0,m().$L)({userId:r.userId,theme:e}),outlineWidth:1.5,outlineOffset:-.5}:{},avatarWrapper:{...o,position:"absolute",top:0,left:n&&t?3:0,outlineStyle:"solid",outlineWidth:.5,outlineOffset:1,outlineColor:e.UIUserAvatarOuterOutline},initialColor:"presence"===r.type?{color:(0,m().$L)({userId:r.userId,theme:e})}:{}}}),[n,p,g,r]),S=(0,i().K8)((()=>{const{rootStore:t}=e.presenceStore.state;if(t){if("presence"===r.type){if((0,l().MF)(r.userId))return{type:"presence",userStore:s().px};const e=I().LU.createChildStore(t,{table:l().oo,id:r.userId});return e.isDefined()?{type:"presence",userStore:e}:null}if("attribution"===r.type){const e=(0,f().JQ)({parentStore:t,pointer:r.actor});return e.isDefined()?{type:"attribution",userId:e.id,name:e.getDisplayName(d),blockStore:r.blockStore}:null}(0,u().HB)(r)}return null}),[r,d,e.presenceStore]);return S?(0,h().A)((e=>"presence"===S.type?(0,T.jsx)("div",{style:v.avatarWrapper,...e,children:(0,T.jsx)("div",{style:v.avatarBorder,children:(0,T.jsx)(B().A,{iconStyle:v.avatarInnerOutline,hasTooltip:!0,userStore:S.userStore,style:v.uiUserAvatarStyles,size:g,avatarShouldShowShadow:!0,initialOverrideStyle:v.initialColor})})}):"attribution"===S.type?(0,T.jsx)("div",{style:v.avatarWrapper,...e,children:(0,T.jsx)(E,{userId:S.userId,name:S.name,style:v.uiUserAvatarStyles,size:D,tooltipStore:S.blockStore})}):void(0,u().HB)(S))):null}function z(e,t,n){const r=new Map(t.map(((e,t)=>[e,t])));let o,i;for(const a of e){const e=a.props.store,t=r.get(e.id);if(void 0!==t&&((void 0===i||t<i)&&n.uiContains(e)&&a.props.shouldShowHalo&&(o=a,i=t),0===i))return o}return o}},529803:(e,t,n)=>{n.d(t,{A:()=>o});class r extends(()=>n(757695))().default{}const o=new r},539412:(e,t,n)=>{n.d(t,{$y:()=>b,jc:()=>S,x9:()=>v});n(296540);var r=()=>n(484714),o=()=>n(847249),i=()=>n(343916),a=()=>n(929468),s=()=>n(959013),l=()=>n(209660),c=()=>n(460292),d=()=>n(989423),u=()=>n(640653),p=()=>n(529803),f=()=>n(780262),g=()=>n(807778),m=()=>n(671812),h=n(474848);function v(){const e=(0,o().K8)((()=>{const{editsBlocked:e}=f().A.state;return e??!1}),[]),t=(0,r().v3)();return(0,o().K8)((()=>(0,g().Jq)(t)),[t])&&e}function S(){return(0,o().K8)((()=>{var e;const t=p().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,r().v3)(),t=S(),n=(0,o().K8)((()=>{var e;const t=p().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),d=(0,o().K8)((()=>(0,u().s7)(e)),[e]),f=function(e,t){if(e)return t>1?(0,h.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,h.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(d,n),g=function(e){if(e)return;return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(d),v=function(e,t,n){if(t){const r=(0,m().a)(n);return n=>{r&&(y(t,e),r(n))}}return n=>{y(t,e),l().Ow()}}(e,d,t),b=function(e){if(e)return(0,h.jsx)(s().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,h.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(d),x=function(e){if(e)return(0,h.jsx)(c().Q,{iconGroup:i().i,variantName:"default",colorName:"primary"});return(0,h.jsx)(c().Q,{iconGroup:a()._,variantName:"default",colorName:"primary"})}(d);return{clickAction:v,ctaMessage:b,primaryMessage:f,secondaryMessage:g,ctaIcon:x,tooltipBodyMessage:d?b:g,isWorkspaceOwner:d,overdueInvoiceCount:n}}function y(e,t){(0,d().u4)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},551619:(e,t,n)=>{n.d(t,{Hy:()=>_,NV:()=>R,O9:()=>j,Rg:()=>T,Sm:()=>B,dK:()=>O,f7:()=>E,l8:()=>L,n$:()=>D,no:()=>F,sx:()=>M});var r=()=>n(484714),o=()=>n(792485),i=()=>n(847249),a=()=>n(700500),s=()=>n(651124),l=()=>n(519831),c=()=>n(620689),d=()=>n(591197),u=()=>n(835066),p=()=>n(964345),f=()=>n(68465),g=()=>n(753199),m=()=>n(504836),h=()=>n(478726),v=()=>n(747100),S=()=>n(963589),b=()=>n(665579),y=()=>n(351360),x=()=>n(525569),C=()=>n(508496),w=()=>n(375447),I=()=>n(66496),A=()=>n(548821),k=()=>n(712505),P=()=>n(302022);function R(e){(0,g().SQ)({event:e,context:g().y$.EditorMouseDown,callback:()=>{}})}function M(e){(0,g().SQ)({event:e,context:g().y$.EditorClick,callback:()=>{}})}function _(e){return(0,i().K8)((()=>Boolean(P().A.state.pageMap[e.id])||I().A.state.pages.has(e.id)),[e.id])}function T(e,t){const n=(0,r().v3)(),a=(0,o().S)(),s=_(e),l=(0,i().K8)((()=>{var n,r;return t===A().Rr.Frame?Boolean(null===(n=y().default.state.currentLoadingContainerStore)||void 0===n?void 0:n.state.ready):t===A().Rr.PeekView&&k().default.state.open?Boolean(null===(r=k().default.state.loadingContainerStore)||void 0===r?void 0:r.state.ready):t===A().Rr.CollectionPageView||t===A().Rr.CollectionPageViewFullScreen?e.isReady():void 0}),[t,e]),c=E(e);return(0,i().K8)((()=>{if(!l)return!1;const t=n.currentUser.isLoggedIn(),r=a&&a.publicEditModeStore.state;return Boolean(e&&e.isDefined()&&!e.isNonEditableState()&&e.canEdit()&&!e.hasContent()&&t&&(!(null!=r&&r.hasPublicPermission)||"edit"===(null==r?void 0:r.permission))&&!s&&!c&&(!(0,f().ZE)(r)||"completionPopup"!==x().default.state.type))}),[n.currentUser,c,l,a,s,e])}function j(e,t){const n=(0,r().v3)(),a=(0,o().S)(),{isTablet:s}=(0,r().Y0)(),l=(0,S().X)("tablet_refresh_template_pills_gate");return(0,i().K8)((()=>{if(t===A().Rr.SitePreview)return!1;if(n.device.isMobile&&(!s||!l))return!1;if(!n.currentUser.isLoggedIn())return!1;const r=a&&a.publicEditModeStore.state;if(null!=r&&r.hasPublicPermission&&"edit"!==(null==r?void 0:r.permission))return!1;if(e.getContentLength()>1)return!1;if(!e.canEdit()||e.isNonEditableState())return!1;const o=e.getContentStores()[0];if(o&&!o.isEmptyTextBlock())return!1;if(e.getAssociatedCollectionStore())return!1;const i=p().gZ.state,c=p().Di.state;if(i&&e.id===c)return!1;return!((0,h().L5)(t)?d().VY.state:d().u3.state)}),[n,a,e,t,s,l])}function E(e){return(0,i().K8)((()=>{if(e.isCollectionView()){const t=e.getCollectionStoreIfSingleSource();return!!t&&t.isSyncedCollection()}return e.isType(a().xd.externalObjectInstancePage)}),[e])}function B(e){return(0,i().K8)((()=>{if(!(0,m().vL)())return!1;const t=e.getParentStore();if((null==t?void 0:t.table)===l().Vl){return!!t.getFormatStore().getKeyStore("external_collection_type").getValue()}return!1}),[e])}function O(e){return(0,i().K8)((()=>{if(!(0,m().pB)())return!1;var t;return!!e.isCollectionView()&&((null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("external_collection_type").getValue())??!1)}),[e])}function L(e){return(0,i().K8)((()=>{if(!C().default.checkGate({gateName:"csvimport_faster_navigate_to_page_enabled"}))return!1;var t;return!!e.isCollectionView()&&(null===(t=e.getCollectionStore())||void 0===t?void 0:t.getFormatStore().getKeyStore("static_import_collection_type").getValue())===s().IE.CsvImport}),[e])}function D(e){const t=(0,r().v3)(),{device:n,WindowSizeStore:o}=t,a=(0,i().K8)((()=>{const e=o.state.height,r=n.isMobile&&w().A.state.open?e:0;return c().C6(t)+r}),[t,o,n.isMobile]);return(0,i().K8)((()=>"home-phone"===e?b().q3:n.isTablet?380:n.isIOS?Math.max(350,a):n.isMobile?400:"side-peek"===e||"center-peek"===e?v().ln:"home"===e?b().wH:"30vh"),[n,a,e])}function F(e){const t=(0,r().v3)(),n=(0,i().K8)((()=>(0,u().dC)(t,e)),[t,e]);return(0,i().K8)((()=>n&&!e.isFullWidth()?(0,u().Zy)(t,(0,v().cq)(e),(0,v().RX)(e)):0),[t,n,e])}},556048:(e,t,n)=>{n.d(t,{C8:()=>p,Dz:()=>l,GC:()=>g,GL:()=>m,YY:()=>f,dM:()=>d,h9:()=>c,jX:()=>s,oF:()=>u,uj:()=>a});var r=()=>n(645873);const o={JiraSyncInfoPopup:new(r().O2)("JiraSyncInfoPopup",(async()=>await Promise.all([n.e(75134),n.e(68744)]).then(n.bind(n,408453)))),ImproveJiraSyncPopup:new(r().O2)("ImproveJiraSyncPopup",(async()=>await Promise.all([n.e(75134),n.e(2686)]).then(n.bind(n,484967)))),JiraDCAuthModal:new(r().O2)("JiraDCAuthModal",(async()=>await n.e(28763).then(n.bind(n,992567)))),ExternalImportAndSyncIndicator:new(r().O2)("ExternalImportAndSyncIndicator",(async()=>await n.e(98288).then(n.bind(n,984289)))),JiraSyncedAllProjectsTooltip:new(r().O2)("JiraSyncedAllProjectsTooltip",(async()=>await n.e(21446).then(n.bind(n,470020)))),JiraSyncedAllIssuesTooltip:new(r().O2)("JiraSyncedAllIssuesTooltip",(async()=>await n.e(21446).then(n.bind(n,470020)))),JiraSyncedDatabaseViewsAndFiltersTooltip:new(r().O2)("JiraSyncedDatabaseViewsAndFiltersTooltip",(async()=>await n.e(21446).then(n.bind(n,470020)))),JiraSyncSourceTooltip:new(r().O2)("JiraSyncSourceTooltip",(async()=>await n.e(21446).then(n.bind(n,470020)))),JiraSyncedSettingsToSetupProjectsAndIssuesTooltip:new(r().O2)("JiraSyncedSettingsToSetupProjectsAndIssuesTooltip",(async()=>await n.e(21446).then(n.bind(n,470020))))},i={JiraSyncTeamSpaceModal:new(r().O2)("JiraSyncTeamSpaceModal",(async()=>n.e(56188).then(n.bind(n,604698))))},a=(0,r()._h)(i.JiraSyncTeamSpaceModal,(e=>e.default)),s=(0,r()._h)(o.JiraSyncedAllProjectsTooltip,(e=>e.JiraSyncedAllProjectsTooltip)),l=(0,r()._h)(o.JiraDCAuthModal,(e=>e.default)),c=(0,r()._h)(o.JiraSyncedAllIssuesTooltip,(e=>e.JiraSyncedAllIssuesTooltip)),d=(0,r()._h)(o.JiraSyncedDatabaseViewsAndFiltersTooltip,(e=>e.JiraSyncedDatabaseViewsAndFiltersTooltip)),u=(0,r()._h)(o.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip,(e=>e.JiraSyncedSettingsToSetupProjectsAndIssuesTooltip)),p=(0,r()._h)(o.JiraSyncSourceTooltip,(e=>e.JiraSyncSourceTooltip)),f=(0,r()._h)(o.JiraSyncInfoPopup,(e=>e.JiraSyncInfoPopup)),g=(0,r()._h)(o.ImproveJiraSyncPopup,(e=>e.ImproveJiraSyncPopup)),m=(0,r()._h)(o.ExternalImportAndSyncIndicator,(e=>e.ExternalImportAndSyncIndicator));(0,n(340498).xh)("jira",{default:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:20},small:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:16},mini:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:14},large:{loader:()=>n.e(60677).then(n.bind(n,460677)),size:24}})},571400:(e,t,n)=>{n.d(t,{t:()=>r});const r=35},591197:(e,t,n)=>{n.d(t,{VY:()=>s,ZJ:()=>i,u3:()=>a});var r=()=>n(496506);class o extends(()=>n(757695))().default{getInitialState(){return{popupRenderedInPage:!1,popupRenderedInPeekView:!1}}}const i=new o,a=new(r().default)((()=>!1!==i.state.popupRenderedInPage),{debugName:"AssistantWriterRenderedInPageStore"}),s=new(r().default)((()=>!1!==i.state.popupRenderedInPeekView),{debugName:"AssistantWriterRenderedInPeekViewStore"})},603815:(e,t,n)=>{n.d(t,{A$:()=>A,JQ:()=>k,Vn:()=>w,s4:()=>I});n(16280),n(944114),n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698),n(898992),n(354520),n(803949),n(581454);var r=()=>n(857639),o=()=>n(585515),i=()=>n(577449),a=()=>n(388821),s=()=>n(179034),l=()=>n(545285),c=()=>n(534177),d=()=>n(449506),u=()=>n(780054),p=()=>n(989423),f=()=>n(870618),g=()=>n(303626),m=()=>n(14307),h=()=>n(245865),v=()=>n(540758),S=()=>n(670631),b=()=>n(508496),y=()=>n(571963),x=()=>n(603815),C=()=>n(108944);async function w(e){const{environment:t,request:n,abortSignal:r,prefetchCacheKey:o,headers:i}=e;return(0,y().updateLoadCachedPageChunkCalledAt)(),m().isConnected()||m().isConnecting()?d().callApi({eventName:"loadCachedPageChunkV2",environment:t,data:n,abortSignal:r,prefetchCacheKey:o,headers:i}):d().callApi({eventName:"loadPageChunkV2",environment:t,data:n,abortSignal:r,prefetchCacheKey:o,headers:i})}async function I(e){const{mode:t,environment:n,request:c,isFirstChunk:d,abortSignal:m}=e,h={...c,limit:30,cursor:c.cursor||{stack:[]},baseUrl:u().A.domainBaseUrl,publicDomainName:u().A.publicDomainName};if("inMemoryAndDiskCacheWithInexactPreload"===t&&(await x().A$(n,{id:c.page.id,table:s().ev}),null!=m&&m.aborted))throw new Error("Abort signal received");const b=a().RecordMapWithRole.create(),y=[];let C=!1;const w=new Set,I=await o().T(h,i().h.fromMonomorphicFunctionUnsafe((async e=>{const r=await f().h7({environment:n,pointer:e,abortSignal:m,useInMemoryCacheOnly:"inMemoryOnly"===t});if(null!=m&&m.aborted)throw new Error("Abort signal received");if(r)return b.setModelAndRole(e,r.model,r.role),r.model;if("inMemoryOnly"===t)throw new Error(`Record not found: ${e.table},${e.id}`);if((0,l().u)(e)&&!w.has(e.id)&&d){if(void 0===S().A.state.offlinePages)return y.push(e),void(C=!0);if(void 0===S().A.state.offlinePages||!v().Bd(c.page.id))throw new Error(`Record not found: ${e.table},${e.id}`);y.push(e)}})),((e,t,n,r)=>{g().N.enableLogging&&console.log(`Spidering from ${e.table}:${e.id} to ${t.table}:${t.id} (${n})`),null!=r&&r.suppressErrorOnClient&&w.add(t.id)}));if(C&&(await S().A.waitUntil((()=>void 0!==S().A.state.offlinePages)),!v().Bd(c.page.id))){const[e]=y;throw new Error(`Record not found: ${e.table},${e.id}`)}if(y.length>0&&(0,p().LM)({eventName:"offline_page_was_missing_records_in_cache",sampling:{behavior:"statsig",fallbackBehavior:"statsig",statsigNotAvailableBehavior:"drop"}}).then((e=>{(0,p().u4)({environment:n,event:{eventName:"offline_page_was_missing_records_in_cache",eventProperties:{}},opts:{sampling:{behavior:"decided",sampleDecision:e}}}),e&&r().log({level:"error",from:"loadingHelpers",type:"offlinePageWasMissingRecordsInCache",data:{pageId:c.page.id,missingRecords:y}})})),null!=m&&m.aborted)throw new Error("Abort signal received");return{recordMap:b.toJson(),cursor:I.cursorValue}}async function A(e,t){const n=e.currentUser.id;if(!n||!e.defaultRecordCache.persistedRecordCache)return Promise.resolve(void 0);(await e.defaultRecordCache.persistedRecordCache.getPageBlocksByParent({page:t,userId:n})).forEach((t=>{e.defaultRecordCache.inMemoryRecordCache.setRecord({pointer:t.pointer,userId:t.userId},t.value),e.defaultRecordCache.inMemoryRecordCache.emitRecord(t.pointer,[]),h().unsubscribeAfterDelay({environment:e,pointer:t.pointer,userId:t.userId})}))}function k(e){if(!b().default.checkGate({gateName:"load_page_chunk_omit_existing_record_versions"}))return;const t=a().RecordMapPolymorphic.create();let n=0;const r=()=>n>=50,o=e=>{"space"!==(null==e?void 0:e.table)&&(r()||e&&void 0===t.get(e.pointer)&&(t.set(e.pointer,e.getVersion()),n++))};if(e.isReady())for(const a of(0,C().E)(e))o(a);if(e.userId){const t=e.environment.defaultRecordCache.inMemoryRecordCache.data.getUserRecordMap(e.userId);o(t.getModel({table:"notion_user",id:e.userId}));let n=0;for(const e of t.getPointersByTable("notion_user")){if(r()||n>=10)break;n++,o(t.getModel(e))}}const i=Array.from(t).map((e=>{let{pointer:t,value:n}=e;if(void 0!==n)return{pointer:t,version:n}})).filter(c().O9);return i.length?i:void 0}},629537:(e,t,n)=>{n.d(t,{V:()=>a});n(296540);var r=()=>n(847249),o=()=>n(851240),i=n(474848);function a(e){const{render:t,...n}=e,a=(0,o().A)(n);return(0,i.jsx)(i.Fragment,{children:(0,r().K8)((()=>t(a)),[t,a])})}},654734:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(296540),o=()=>n(869190),i=()=>n(604995),a=()=>n(416504),s=n(474848);const l=function(e){const t=(0,n(959013).tz)(),l=(0,n(401497).DP)(),u=(0,n(396182).I)(),p=(0,r.useRef)(),f=(0,r.useCallback)((()=>{const t=e.value;if(!t)return;const r=i().q8(t,(0,a().P)());if(!r)return;const o=r.valueOf(),s=o-Date.now();s<0||s>n(720665).nD||p.current&&p.current.timestamp===o||(p.current&&clearTimeout(p.current.timer),p.current={timestamp:o,timer:setTimeout((()=>u("DateBox","DateBox/createReminderTimer")),s)})}),[u,e.value]),g=(0,r.useCallback)((()=>{p.current&&(clearTimeout(p.current.timer),p.current=void 0)}),[]);(0,r.useEffect)((()=>{f()}),[f]),(0,r.useEffect)((()=>()=>{g()}),[g]);const{value:m,withComma:h}=e,v=(0,n(847249).K8)((()=>m?(0,o().ZF)({value:m,date_format:e.dateFormat,time_format:e.timeFormat,userTimeZone:(0,a().P)(),allowRelativeDates:!0,intl:t,shortenDateAndRange:e.shortenDateAndRange,displayInUserTimezone:e.displayInUserTimezone,getToday:n(838924).x1}):void 0),[t,e.dateFormat,e.displayInUserTimezone,e.shortenDateAndRange,e.timeFormat,m]);if(!m)return null;const S=i().AA(m,(0,a().P)(),n(662303).locale);let b;if(m.reminder){const e=i().Zs(m,(0,a().P)());b=e?{color:l.errorText}:{color:n(100622).Ay.blue}}const y=(0,s.jsxs)(s.Fragment,{children:[v,m.reminder&&(0,n(599987).P)({display:"inline-block",width:"1em",marginLeft:6,marginRight:2,paddingBottom:4,verticalAlign:"middle"}),h?", ":null]});return e.disableTooltip?(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},children:y}):(0,s.jsx)(n(859428).A,{renderTooltip:()=>(0,s.jsxs)(s.Fragment,{children:[e.tooltipHeader,(0,s.jsxs)("div",{style:d(l,e.tooltipHeader),children:[c(S.start),S.end?` → ${c(S.end)}`:""]})]}),render:t=>(0,s.jsx)("div",{className:e.className,style:{...e.style,...b},...t,children:y}),placement:e.tooltipPlacement})};function c(e){return(0,o().eV)({value:e,preset:"medium"})}function d(e,t){return t?{color:e.text.contrastSecondary}:{}}},679192:(e,t,n)=>{n.d(t,{w:()=>i});var r=()=>n(645873);const o={UncollectibleExperienceOverlay:new(r().O2)("UncollectibleExperienceOverlay",(async()=>n.e(36432).then(n.bind(n,134673))))},i=(0,r()._h)(o.UncollectibleExperienceOverlay,(e=>e.UncollectibleExperienceOverlay))},706965:(e,t,n)=>{n.d(t,{A:()=>v});n(296540);var r=()=>n(847249),o=()=>n(401497),i=()=>n(764880),a=()=>n(310442),s=()=>n(824862),l=()=>n(798880),c=()=>n(959013),d=()=>n(534177),u=()=>n(284371),p=()=>n(43972),f=()=>n(972435),g=()=>n(907514),m=()=>n(646736),h=n(474848);function v(e){const{store:t}=e,n=(0,o().DP)(),v=(0,r().K8)((()=>t.getCreatedTime()),[t]),S=(0,r().K8)((()=>t.getLastEditedTime()),[t]),b=(0,r().K8)((()=>{const e=t.getCreatedByPointer();if(e)return(0,i().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),y=(0,r().K8)((()=>{const e=t.getLastEditedByPointer();if(e)return(0,i().xC)({pointer:e,getRecordValue:t.getRecordValue})}),[t]),x=(0,r().K8)((()=>{const e=t.getSpaceStore();if(!e)return!1;const n=null==b?void 0:b.asActor;if(!n)return!1;const r=n.table;switch(r){case l().oo:return(0,m().dp)(e,n.id).isMember();case s().GP:return(0,m().Ts)(e,n.id).isMember();case a().yj:return!1;default:(0,d().HB)(r)}}),[t,b]),C=v?(0,g().nl)(v,{useCompactFormat:!0,useLowercase:!0}):"",w=S?(0,g().nl)(S,{useLowercase:!0,useCompactFormat:!0}):"";if(!(S?(0,g().nl)(S,{useLowercase:!0,useCompactFormat:!0,roundDownYears:!0}):""))return null;const I={display:"flex",gap:4,color:n.text.contrastSecondary,height:16,fontSize:12},A={size:14,style:{marginRight:2}},k=f().A.getIntl();return(0,h.jsxs)(h.Fragment,{children:[(e=>{let t;if(null!=y&&y.asActor)t=(0,h.jsx)(c().sA,{defaultMessage:"Edited by {editor} {timestamp}",id:"pagePropertiesHeader.editedBy.label",values:{editor:(0,h.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,h.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,p().w)({actor:y,...A}),(0,i().lR)(k,y)]})}),timestamp:w}});else{if(!w)return;r=w,t=(0,h.jsx)(c().sA,{defaultMessage:"Edited {timestamp}",id:"pagePropertiesHeader.edited.label",values:{timestamp:r}})}var r;return(0,h.jsx)("div",{style:{...I,marginTop:3,marginBottom:3},children:t})})(e.compactFormat),(e=>{let t;if(null!=b&&b.asActor&&x)t=(0,h.jsx)(c().sA,{id:"pagePropertiesHeader.createdBy.label",defaultMessage:"Created by {creator} {timestamp}",values:{creator:(0,h.jsx)("span",{style:{fontWeight:u().Wy.medium,color:n.text.contrastPrimary},children:(0,h.jsxs)("span",{style:{display:"flex"},children:[!e&&(0,p().w)({actor:b,...A}),(0,i().lR)(k,b)]})}),timestamp:C}});else{if(!C)return;t=(0,h.jsx)(c().sA,{id:"pagePropertiesHeader.created.label",defaultMessage:"Created {timestamp}",values:{timestamp:C}})}return(0,h.jsx)("div",{style:{...I,marginBottom:4},children:t})})(e.compactFormat)]})}},738944:(e,t,n)=>{n.d(t,{x:()=>i});var r=()=>n(645873);const o=new(r().O2)("ScrollableSitesBannerContainer",(async()=>await Promise.all([n.e(16471),n.e(21194),n.e(25700),n.e(33161),n.e(7771)]).then(n.bind(n,457781)))),i=(0,r()._h)(o,(e=>e.ScrollableSitesBannerContainer))},765974:(e,t,n)=>{n.r(t),n.d(t,{exclamationMarkTriangleFillIcon:()=>o,iconDefinition:()=>r});n(296540);const r={viewBox:"0 0 20 20",svg:(0,n(474848).jsx)("path",{d:"M11.84 3.563c-.817-1.417-2.862-1.417-3.68 0L2.314 13.688c-.818 1.416.205 3.187 1.84 3.187h11.692c1.636 0 2.658-1.77 1.84-3.187zM9.876 6.75c.345 0 .625.28.625.625v3.5a.625.625 0 1 1-1.25 0v-3.5c0-.345.28-.625.625-.625m0 7.375a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5"})},o=(0,n(340498).wt)("exclamationMarkTriangleFill",r)},773582:(e,t,n)=>{n.d(t,{I:()=>o,O:()=>i});var r=()=>n(143197);function o(e){const{cursors:t,rootStore:n}=e,o={};for(const r of t)for(const e of r.stack)for(const t of e)o[t.id]=t.index;r().A.setLimitParents(n,o)}function i(e){r().A.removeLimitParents(e.rootStore)}},811481:(e,t,n)=>{n.d(t,{i:()=>i});var r=()=>n(645873);const o={ScrollableBlockLimitBanner:new(r().O2)("ScrollableBlockLimitBanner",(async()=>Promise.all([n.e(33618),n.e(27942)]).then(n.bind(n,333618))))},i=(0,r()._h)(o.ScrollableBlockLimitBanner,(e=>e.default))},848565:(e,t,n)=>{n.d(t,{FB:()=>p,Ql:()=>f,SM:()=>g,Wv:()=>i,Yz:()=>s,ds:()=>o,e4:()=>r,eQ:()=>a,im:()=>c,jw:()=>l,k2:()=>u,uG:()=>d});const r=8,o=10,i=8,a=24,s=6,l=1.5,c=(a-l)/2,d=a+s,u=`calc(100% + ${i+(r-s)-d}px)`,p=a+8,f=-16;function g(e){return"margin_comments"===e?12:"comment_unfurl"===e?14:16}},851240:(e,t,n)=>{n.d(t,{A:()=>X});n(16280),n(944114),n(898992),n(354520),n(672577),n(430670),n(964979);var r=n.n(n(625473)),o=n(296540),i=()=>n(17022),a=()=>n(908006),s=()=>n(484714),l=()=>n(847249),c=()=>n(591779),d=()=>n(386164),u=()=>n(631616),p=()=>n(388821),f=()=>n(161479),g=()=>n(449412),m=()=>n(319625),h=()=>n(496603),v=()=>n(763824),S=()=>n(498212),b=()=>n(534177),y=()=>n(787172),x=()=>n(915086),C=()=>n(773582),w=()=>n(466721),I=()=>n(507785),A=()=>n(666144),k=()=>n(255460),P=()=>n(633457),R=()=>n(374026),M=()=>n(504836),_=()=>n(603815),T=()=>n(953418),j=()=>n(449506);var E=()=>n(303626),B=()=>n(227417),O=()=>n(865085),L=()=>n(53429),D=()=>n(495074),F=()=>n(695625),K=()=>n(792415),V=()=>n(351360),N=()=>n(227440),z=()=>n(508496),$=()=>n(83573),U=()=>n(961581),W=()=>n(606932),q=()=>n(865688);function H(e){performance.mark(`OPFS:useLoadPage:${e}`)}function J(e,t,n){return performance.measure(`OPFS:useLoadPage:${e}`,`OPFS:useLoadPage:${t}`,`OPFS:useLoadPage:${n}`)}let Z=!1;function X(e){return function(e){!function(e){const{pageStore:t,store:n}=e,{initialRequestCompleted:r,error:i}=(0,l().K8)((()=>({initialRequestCompleted:n.state.initialRequestCompleted,error:n.state.error})),[n]);(0,o.useEffect)((()=>{if(r&&!i)return D().A.trackPage(t),()=>{D().A.untrackPage(t)}}),[r,i,t])}(e);const{isCollectionInPage:t,updateIsCollectionInPage:n}=function(){const e=(0,s().v3)(),[t,n]=(0,o.useState)(!1),r=(0,o.useCallback)((n=>{var r;const{page:o,recordMap:i,inMemoryRecordCache:a}=n;if(t)return!0;const s=null===(r=a.getRecord({pointer:{table:"block",id:o.id,spaceId:o.spaceId},userId:e.currentUser.id}))||void 0===r?void 0:r.value;if(s)for(const e of i.getByTable("block")){var l,c,d;if(("collection_view"===(null===(l=e.value)||void 0===l||null===(l=l.value)||void 0===l?void 0:l.type)||"collection_view_page"===(null===(c=e.value)||void 0===c||null===(c=c.value)||void 0===c?void 0:c.type))&&s.parent_id!==(null===(d=e.value)||void 0===d||null===(d=d.value)||void 0===d?void 0:d.collection_id))return!0}return!1}),[e,t]);return{isCollectionInPage:t,updateIsCollectionInPage:(0,o.useCallback)((e=>{n(r(e))}),[r])}}(),r=(0,o.useRef)(null);(function(e){const{store:t,pageStore:n}=e,r=(0,s().v3)(),{loading:c,endOfResultsReached:f,initialRequestCompleted:g,error:h}=(0,l().K8)((()=>({loading:t.state.loading,endOfResultsReached:t.state.endOfResultsReached,initialRequestCompleted:t.state.initialRequestCompleted,error:t.state.error})),[t]),S=Q(e),C=function(e){const{pageStore:t}=e,n=(0,s().v3)(),r=(0,s().Y0)(),i=(0,B().S)(),a=Y(e),l=G(e),c=function(e){const{pageStore:t}=e,n=(0,s().v3)();return(0,o.useCallback)((async e=>{const{request:r,userId:o,abortSignal:i}=e;H("load-opfs-recordmap.start");const a=await async function(e){const{userId:t,pageId:n,abortSignal:r}=e;if(!(0,L().getOPFSPageCache)())return;if(!U().A.state.initialRenderCompleted&&O().OPFSBootupRegistry.pageRecordMapBufferPromise)try{H("readBuffer.start");const e=await O().OPFSBootupRegistry.pageRecordMapBufferPromise;H("readBuffer.end");const t=J("readBuffer","readBuffer.start","readBuffer.end");return O().OPFSBootupRegistry.updateInitialMetricData({await_read_blocking_page_chunk_end_duration:t.duration}),e}catch(h){return}else{const e=(0,L().getOPFSPageCache)();if(!e)return;try{const o=(0,u().createOPFSPageCacheKey)(t,n);return await e.readBuffer(o,r)}catch(h){return void(h instanceof DOMException&&h.name)}}}({userId:o,pageId:r.page.id,abortSignal:i});H("load-opfs-recordmap.end");J("load-opfs-recordmap","load-opfs-recordmap.start","load-opfs-recordmap.end");if(null!=i&&i.aborted)throw new Error("Abort signal received");if(!a)throw new Error("No OPFS RecordMap found");if(!a.buffer||0===a.buffer.byteLength)throw new Error("No Valid OPFS RecordMap found");const s=a.iterator.next();if(!s.value)throw new Error("Failed to extract first chunk from buffer");const l=s.value.recordMap,c=p().RecordMapWithRole.create(l);return A()._O({environment:n,inMemoryRecordCache:t.inMemoryRecordCache,recordMap:c,debugSource:"PageLoadingContainer.OPFSRecordMap"}),{buffer:a.buffer,chunksIterator:a.iterator,source:"local",localSource:"opfs",recordMap:c,index:s.value.index,isLast:s.value.isLast}}),[n,t])}(e),f=Q(e);return(0,o.useCallback)((async()=>{const e={page:{id:t.id,spaceId:t.getSpaceId()},cursor:{stack:[]},verticalColumns:r.isMobile};try{return{firstPageChunkResult:await a({request:e,mode:"inMemoryOnly",isFirstChunk:!0})}}catch(h){}const o=function(e){const{environment:t,pageId:n}=e,r=window.__serverSidePrefetchData;if(r&&(delete window.__serverSidePrefetchData,r.pageId===n)){(0,y().s)({environment:t,eventName:"loadCachedPageChunkV2",response:r,userId:t.currentUser.id});const e=p().RecordMapWithRole.create(r.recordMap);return{source:"server",cursors:r.cursors,recordMap:e}}}({environment:n,pageId:t.id});if(o)return{firstPageChunkResult:o};const s=oe(e),u=s?n.prefetchCache.getPrefetchStatus(s):void 0,g=Boolean(n.defaultRecordCache.persistedRecordCache)&&"success"!==u,m=new AbortController,v=new AbortController,S=new AbortController,x=[];i&&n.currentUser.id&&x.push(c({request:e,userId:n.currentUser.id,abortSignal:S.signal})),g&&x.push(a({request:e,mode:r.isAndroid?"inMemoryAndDiskCache":"inMemoryAndDiskCacheWithInexactPreload",isFirstChunk:!0,abortSignal:m.signal})),x.push(l({request:e,headers:(0,d().WS)({recordId:t.id,spaceId:t.getSpaceId()}),abortSignal:v.signal})),f.concurrentlyWithAsyncRequests();const C=await Promise.any(x);if("local"===C.source){const e=`${C.source}-${C.localSource} won`;"disk"===C.localSource?(v.abort(e),S.abort(e)):"opfs"===C.localSource&&(m.abort(e),v.abort(e))}else if("remote"===C.source||"remoteV2"===C.source||"server"===C.source){const e=`${C.source} won`;m.abort(e),S.abort(e)}else(0,b().HB)(C);return{firstPageChunkResult:C}}),[f,r.isMobile,r.isAndroid,a,l,c,t,n,i])}(e),w=function(e){const{pageStore:t}=e,n=(0,s().v3)(),r=(0,s().Y0)(),i=Y(e),a=G(e),l=Q(e);return(0,o.useCallback)((async e=>{const{firstPageChunkResult:o}=e;if(re(o)){const e=o.chunksIterator;let r=e.next();for(;r.value;){const i=r.value.recordMap,a=p().RecordMapWithRole.create(i);await A()._O({environment:n,inMemoryRecordCache:t.inMemoryRecordCache,recordMap:a,debugSource:"PageLoadingContainer.OPFSRecordMap"}),l.afterEachChunk({source:"local",localSource:"opfs",buffer:o.buffer,chunksIterator:e,recordMap:a,isLast:r.value.isLast,index:r.value.index}),r=e.next()}}else{const e=e=>{let t;if(t=ne(e)?e.cursors:re(e)?void 0:[e.cursor],t)return t.filter((e=>e.stack.length>0))};let n=e(o);for(;n&&n.length>0;){n=(await v().lX(n,10,(async e=>{const n={page:{id:t.id,spaceId:t.getSpaceId()},cursor:e,verticalColumns:r.isMobile};let s;try{s="local"===o.source?await i({request:n,mode:"inMemoryAndDiskCache",isFirstChunk:!1}):await a({request:n,headers:(0,d().WS)({cellId:"cellId"in e?e.cellId:void 0})})}catch(h){s=ne(o)?{source:"remoteV2",cursors:[],recordMap:p().RecordMapWithRole.create({})}:"remote"===o.source?{source:o.source,cursor:{stack:[]},recordMap:p().RecordMapWithRole.create({})}:{source:o.source,localSource:o.localSource,cursor:{stack:[]},recordMap:p().RecordMapWithRole.create({})}}return l.afterEachChunk(s),s}))).flatMap((t=>e(t)??[]))}}}),[n,l,r.isMobile,i,a,t])}(e);if(c||f||g&&h)return;async function I(){let e;t.setState({...t.state,loading:!0}),W().A.markRequestFirstChunkStart(),U().A.state.initialRenderCompleted||x().setSubMetric({name:"render_end_to_await_page_chunk_start",startTime:e=>{var t;return null===(t=e.render_start_to_render_end)||void 0===t?void 0:t.endTime},endTime:performance.now()});try{e=(await C()).firstPageChunkResult}catch(h){return void R(h)}if(!U().A.state.initialRenderCompleted){x().setSubMetric({name:"await_page_chunk_start_to_await_page_chunk_end",startTime:e=>{var t;return null===(t=e.render_end_to_await_page_chunk_start)||void 0===t?void 0:t.endTime},endTime:performance.now()}),"local"===e.source&&"opfs"===e.localSource&&O().OPFSBootupRegistry.IPRMetricData&&x().updateOPFSMetricData(O().OPFSBootupRegistry.IPRMetricData);const t=r.prefetchCache;x().updateMetricData({page_chunk_source:e.source,local_source:"local"===e.source?e.localSource:void 0,page_chunk_prefetch:"server"===e.source?{type:"hit-server"}:t.getPrefetchAnalytic(`loadCachedPageChunk(${n.id})`)})}W().A.markRequestFirstChunkEnd({chunkSource:e.source,chunkLocalSource:"local"===e.source?e.localSource:void 0}),k(),z().default.checkGate({gateName:"load_page_flush"})?await a().default.flush():await a().default.afterNextFlush(),S.afterEachChunk(e);const o=w({firstPageChunkResult:e});try{await o}catch(h){return void R(h)}P(),S.afterAllChunks()}function k(){t.setState({...t.state,initialRequestCompleted:!0})}function P(){t.setState({initialRequestCompleted:!0,ready:!0,loading:!1,endOfResultsReached:!0,error:void 0})}function R(e){t.setState({ready:!0,initialRequestCompleted:!0,loading:!1,endOfResultsReached:!1,error:(0,m().A)(e)})}i().A.withListenerIgnored((()=>{I()}))})({...e,updateIsCollectionInPage:n,scrollerRef:r}),function(e){const{store:t,scrollToBlockIds:n,onReady:r,onDone:i,pageStore:s}=e;(0,o.useEffect)((()=>{let e;const o=h().Oo((()=>{n&&r&&(e=async function(e,t){e&&await k().NH(t,e)}(n,s))})),l=h().Oo((()=>{r&&a().default.afterNextFlush((()=>{a().default.afterNextFlush((async()=>{if(e){const t=performance.now();await(0,v().Vq)(e,5e3),U().A.state.initialRenderCompleted||x().updateMetricData({scroll_to_blocks_wait_time:performance.now()-t})}r()}))}))})),c=h().Oo((()=>{null==i||i()})),d=()=>{t.state.loading&&o(),t.state.ready&&l(),(t.state.endOfResultsReached||t.state.error)&&c()};return t.addListener(d),()=>{t.removeListener(d)}}),[i,r,s,n,t])}(e),function(e){const{store:t}=e,n=(0,l().K8)((()=>t.state.error),[t]),r=(0,l().O$)(N().e),i=(0,c().ZC)(r),a=void 0!==i&&(r&&!i);(0,o.useEffect)((()=>{a&&n&&t.reset()}),[a,t,n])}(e),function(){const e=(0,s().v3)(),t=(0,l().K8)((()=>{var e;return null===(e=V().default.state.mainEditorCurrentBlockStore)||void 0===e?void 0:e.id}),[]),n=(0,l().K8)((()=>V().default.state.currentUserRootStore),[]),r=(0,l().O$)(N().e),i=(0,c().ZC)(r),a=void 0!==i&&(r&&!i);(0,o.useEffect)((()=>{async function r(){const{route:r}=e.RouterStore.state,o=await I().Ty({environment:e,request:{...r,type:"block-space",blockId:t,spaceId:"spaceId"in r?r.spaceId:void 0,slug:"slug"in r?r.slug:void 0,spaceDomain:"spaceDomain"in r?r.spaceDomain:void 0,requestedOnPublicDomain:"requestedOnPublicDomain"in r?r.requestedOnPublicDomain:void 0,isBot:!1}});if("failed"===o.type)return;const i=o.data;if(K().A.setState({publicPageData:i}),i.spaceId&&n){const e=n.getSpaceViewStores().find((e=>e.getSpaceId()===i.spaceId));e&&V().default.setState({...V().default.state,currentSpaceStore:e.getSpaceStore(),currentSpaceViewStore:e})}}a&&t&&r()}),[a,e,t,n])}();const{store:f}=e;return{...(0,l().K8)((()=>({ready:f.state.ready,error:f.state.error,initialRequestCompleted:f.state.initialRequestCompleted,endOfResultsReached:f.state.endOfResultsReached})),[f]),isCollectionInPage:t,scrollerRef:r}}({...e,store:(0,l().uB)(e.store,q().A)})}function G(e){const{pageStore:t}=e,n=(0,s().v3)();return(0,o.useCallback)((async e=>{const{request:r,headers:o,abortSignal:i}=e,a=_().JQ(t),s=await _().Vn({environment:n,request:{...r,...a?{omitExistingRecordVersions:a}:{}},abortSignal:i,prefetchCacheKey:oe(r),headers:o});if(null!=i&&i.aborted)throw new Error("Abort signal received");if("success"===s.type){return{recordMap:p().RecordMapWithRole.create(s.data.recordMap),cursors:s.data.cursors,source:"remoteV2"}}throw g().O8(s.error,{from:"useLoadRemotePageChunk",type:"pageLoadingError",data:{pageId:t.id,miscDataToConvertToString:{offline:s.offline,status:s.status,body:s.body}}}),new Error("No successful load result found.")}),[n,t])}function Y(e){const{pageStore:t}=e,n=(0,s().v3)();return(0,o.useCallback)((async e=>{const{request:r,mode:o,isFirstChunk:i,abortSignal:a}=e;H("localLoadPageChunk.start");const s=await E().N.measure("localLoadPageChunk",r.page.id,(()=>_().s4({mode:o,environment:n,request:r,isFirstChunk:i,abortSignal:a})));H("localLoadPageChunk.end");J("localLoadPageChunk","localLoadPageChunk.start","localLoadPageChunk.end");if(null!=a&&a.aborted)throw new Error("Abort signal received");const l=p().RecordMapWithRole.create(s.recordMap);return A()._O({environment:n,inMemoryRecordCache:t.inMemoryRecordCache,recordMap:l,debugSource:"PageLoadingContainer.performLocalLoadPageChunk"}),{source:"local",localSource:"inMemoryOnly"===o?"memory":"disk",cursor:s.cursor,recordMap:l}}),[n,t])}function Q(e){const{pageStore:t,store:n,scrollToDiscussionId:r,scrollerRef:i,scrollToPosition:l,scrollToBlockIds:c,updateIsCollectionInPage:d,pageVisitStore:u,disableSideEffects:p}=e,f=(0,s().v3)(),g=(0,o.useCallback)((()=>{p||(z().default.checkGate({gateName:"fetch_backlinks_after_page_load"})||ee({environment:f,blockPointer:t.pointer}),w().Ds(f,{blockStore:t,pageVisitStore:u,incremental:!1}).catch((()=>{})))}),[p,f,t,u]),m=(0,o.useCallback)((e=>{if(p)return;let o,s;ne(e)?(o=te(e.cursors),s=e.cursors):re(e)?(o=function(e){return e.isLast}(e),s=void 0):(o=te([e.cursor]),s=[e.cursor]),o||a().default.afterNextFlush((()=>{if(n.state.ready)return;const e=!r||(t=r,Boolean((0,R().V)({discussionId:t})));var t;const o=!0===function(e){const{scrollerRef:t,scrollToPosition:n}=e;if(null===t.current)return;const r=(0,T().NM)(t.current);return!r||!h().Et(n)||n<=r.scrollHeight-r.clientHeight}({scrollerRef:i,scrollToPosition:l})&&function(e){return!e||F().T.findSelectablesFromIds(e).length===e.length}(c)&&e;o&&n.setState({...n.state,ready:!0})})),d({page:{id:t.id,spaceId:t.getSpaceId()},recordMap:e.recordMap,inMemoryRecordCache:t.inMemoryRecordCache}),f.currentUser.isLoggedIn()&&($().A.addFromRecordMapWithRole(e.recordMap),$().A.isEmpty()||P().lK({environment:f})),s&&C().I({rootStore:t,cursors:s})}),[p,f,t,c,r,l,i,n,d]),v=(0,o.useCallback)((()=>{p||(z().default.checkGate({gateName:"fetch_backlinks_after_page_load"})&&"personal_home_page"!==t.getType()&&ee({environment:f,blockPointer:t.pointer}),f.currentUser.isLoggedIn()&&(0,M().Yq)(t)&&async function(e,t){await j().callApi({eventName:"resyncJiraCollection",environment:e,data:{pagePointer:t}})}(f,t.pointer))}),[p,f,t]);return(0,o.useMemo)((()=>({concurrentlyWithAsyncRequests:g,afterEachChunk:m,afterAllChunks:v})),[g,m,v])}async function ee(e){const{blockPointer:t,environment:n}=e;n.LocalBacklinkStore.initializeBacklinks({block:{id:t.id,spaceId:(0,f().e)(t.spaceId)},currentUserId:n.currentUser.id,environment:n});try{await n.LocalBacklinkStore.awaitLoaded(t.id)}catch(r){}}function te(e){return 0===e.length||1===e.length&&(!(t=e[0])||0===t.stack.length);var t}function ne(e){return"remoteV2"===e.source||"server"===e.source}function re(e){return"local"===e.source&&"opfs"===e.localSource}function oe(e){if(function(e){return!e.cursor||0===e.cursor.stack.length}(e))return`loadCachedPageChunk(${e.page.id})`;{const t=(0,S().gB)(r()(e.cursor));return`loadCachedPageChunk(${e.page.id})-${t}`}}(0,n(604341).exposeDebugValue)("toggleLogLocalPageLoadFailures",(()=>{Z=!Z,console.info(Z?"Local page load error logging enabled":"Local page load error logging disabled")}))},929468:(e,t,n)=>{n.d(t,{_:()=>r});const r=(0,n(340498).xh)("personCircle",{default:{loader:()=>n.e(89491).then(n.bind(n,989491))},small:{loader:()=>n.e(95357).then(n.bind(n,95357))},mini:{loader:()=>n.e(70891).then(n.bind(n,970891))},large:{loader:()=>n.e(49761).then(n.bind(n,649761))}})},998765:(e,t,n)=>{n.d(t,{hD:()=>i,lK:()=>s});var r=()=>n(645873);const o=new(r().O2)("MaybeMarketplaceReviewNudge",(()=>n.e(54215).then(n.bind(n,348069)))),i=(0,r()._h)(o,(e=>e.MaybeMarketplaceReviewNudge)),a=new(r().O2)("MarketplaceReviewNudge",(()=>Promise.all([n.e(39782),n.e(2501)]).then(n.bind(n,11385)))),s=(0,r()._h)(a,(e=>e.MarketplaceReviewNudge))}}]);