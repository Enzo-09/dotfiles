"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[78171],{67805:(e,t,i)=>{i.d(t,{X:()=>o,c:()=>r});i(898992),i(672577);var s=()=>i(68263),n=()=>i(731320);function o(e,t){return e.sort(((e,i)=>{const s=e.store.canAdmin();if(s===i.store.canAdmin()){var n,o;const s=null===(n=e.publishedMetadata.publishedBy)||void 0===n?void 0:n.id,r=e.publishedMetadata.publishedTime,a=null===(o=i.publishedMetadata.publishedBy)||void 0===o?void 0:o.id,l=i.publishedMetadata.publishedTime;if(t){if(s===t&&a===t&&r&&l)return l-r;if(s===t)return-1;if(a===t)return 1}return r&&l?l-r:0}return s?-1:1}))}function r(e){const{environment:t,store:i}=e;if(!i.pathIsAccessibleAndAlive())return!1;if(!n().i0(i).find((e=>(0,s().W8)(e.permissionItem))))return!1;return!n().qb(t,i)}},253447:(e,t,i)=>{i.d(t,{F:()=>n});var s=()=>i(963575);function n(e,t){if(e)return e;switch(t){case"large":return s().A.card.desktop.large.height;case"small":return s().A.card.desktop.small.height;default:return s().A.card.desktop.medium.height}}},271232:(e,t,i)=>{i.d(t,{t:()=>o});var s=i(296540),n=i(474848);const o=s.memo((function(e){const{coverHeight:t,coverSizeFormat:s,emptyGalleryCoverStyle:o}=e,r=(0,i(401497).IS)((()=>({container:{height:(0,i(253447).F)(t,s),...o}})),[t,s,o]);return(0,n.jsx)("div",{style:r.container})}))},315841:(e,t,i)=>{i.d(t,{Js:()=>r,Ns:()=>n,d:()=>o});var s=()=>i(645873);const n={publishSite:new(s().O2)("PublishSite",(async()=>await Promise.all([i.e(9304),i.e(67780),i.e(96933),i.e(52979),i.e(16345)]).then(i.bind(i,142650)))),publishedSiteSettings:new(s().O2)("PublishedSiteSettings",(async()=>await Promise.all([i.e(75134),i.e(9304),i.e(62475),i.e(3151),i.e(98629),i.e(37353),i.e(29151),i.e(31895),i.e(83647),i.e(28721),i.e(6463),i.e(71993),i.e(26483),i.e(81768),i.e(94387),i.e(82850),i.e(77692),i.e(7060),i.e(82136),i.e(12739),i.e(50984),i.e(67780),i.e(96933),i.e(77905),i.e(39301)]).then(i.bind(i,355852))))},o=(0,s()._h)(n.publishedSiteSettings,(e=>e.default)),r=(0,s()._h)(n.publishSite,(e=>e.default))},358006:(e,t,i)=>{i.d(t,{z:()=>r});i(296540);var s=()=>i(645873),n=i(474848);const o=new(s().O2)("CollectionItemCover",(async()=>{const{CollectionItemCover:e}=await i.e(79883).then(i.bind(i,873718));return{CollectionItemCover:e}})),r=(0,s()._h)(o,(e=>e.CollectionItemCover),{renderLoading:(e,t)=>{const{coverHeight:s,coverSizeFormat:o,emptyGalleryCoverStyle:r,showEmptyGalleryCover:a}=t;return a?(0,n.jsx)(i(271232).t,{coverHeight:s,coverSizeFormat:o,emptyGalleryCoverStyle:r}):null}})},466094:(e,t,i)=>{i.r(t),i.d(t,{SitesSettingsTab:()=>fe});var s=i(296540),n=()=>i(401497),o=()=>i(959013),r=()=>i(284371),a=()=>i(802790),l=()=>i(690197),d=()=>i(843878),c=()=>i(8178),u=()=>i(645873);const h=new(u().O2)("SitesDomainsSection",(async()=>await Promise.all([i.e(25891),i.e(91062),i.e(27229)]).then(i.bind(i,312338)))),p=(0,u()._h)(h,(e=>e.DomainsSection));var m=()=>i(836251),g=(i(944114),i(581454),i(814603),i(147566),i(198721),()=>i(244641)),y=()=>i(484714),x=()=>i(847249),b=()=>i(584262),f=()=>i(869190),S=()=>i(126158),v=()=>i(133033),j=()=>i(884107),A=()=>i(704152),C=()=>i(493823),w=()=>i(710149),k=()=>i(859428),I=()=>i(125565),B=()=>i(994006),M=()=>i(317182),P=()=>i(40226),T=()=>i(578872),R=()=>i(962730),F=()=>i(630116),U=()=>i(716979),L=()=>i(562800),W=()=>i(558410),z=()=>i(652300),_=()=>i(568625),D=()=>i(406699),H=()=>i(285790),E=()=>i(107683),V=()=>i(380682),N=()=>i(212727),G=()=>i(278768),O=()=>i(760217),$=()=>i(928600),K=()=>i(939740),J=()=>i(8980),q=()=>i(89924),Y=()=>i(722872),X=()=>i(525700),Q=i(474848);function Z(e){const{store:t,parent:i,isSettingsDisabled:s,onSettingsClick:n}=e,o=(0,y().v3)(),r=[{key:"view",render:e=>(0,Q.jsx)(ee,{...e}),action:()=>{X().uY({environment:o,store:t,pageVisitSource:b().y8.SiteSettings}),G().ym(o,{action:"view_site"}),i.close()}},{key:"copy",render:e=>(0,Q.jsx)(te,{...e}),action:()=>{!async function(e,t){const i=P().R({store:t,pageVisitSource:b().y8.SiteSettings}),s=await j().R.clipboardActions.load();s.copyString({environment:e,stringValue:i,copiedMessage:s.clipboardMessages.copiedLinkToClipboard})}(o,t),G().ym(o,{action:"copy_site_link"}),i.close()}}],a={key:"settings",render:e=>(0,Q.jsx)(ie,{...e,disabled:s}),action:()=>{n(t.id),G().ym(o,{action:"configure_site"}),i.close()}};return(0,Q.jsx)($().A,{menuType:Y().gu.Popup,width:160,children:(0,Q.jsx)(K().Ay,{initialFocus:void 0,type:K().Oh.Vertical,sections:[{key:"link",render:e=>(0,Q.jsx)(q().A,{...e}),items:r},{key:"settings",render:e=>(0,Q.jsx)(q().A,{...e,topBorder:!0}),items:[a]}]})})}const ee=s.forwardRef(((e,t)=>(0,Q.jsx)(O().A,{...e,ref:t,icon:(0,Q.jsx)(J().I,{icon:i(12193).globeIcon}),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.viewSite",defaultMessage:"View site"})})));ee.displayName="ViewAction";const te=s.forwardRef(((e,t)=>(0,Q.jsx)(O().A,{...e,ref:t,icon:(0,Q.jsx)(J().I,{icon:i(764781).V}),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.copySiteLink",defaultMessage:"Copy site link"})})));te.displayName="CopyAction";const ie=s.forwardRef(((e,t)=>{const{disabled:s}=e;return s?(0,Q.jsx)(k().A,{renderTooltip:()=>(0,Q.jsx)(o().sA,{id:"sites.siteActions.noEditAccess",defaultMessage:"You do not have access to update the settings for this published site."}),placement:R().W.Bottom,render:s=>(0,Q.jsx)(O().A,{...(0,i(553965).A)(s,e),ref:t,icon:(0,Q.jsx)(J().I,{icon:N().gearIcon}),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}):(0,Q.jsx)(O().A,{...e,ref:t,icon:(0,Q.jsx)(J().I,{icon:N().gearIcon}),title:(0,Q.jsx)(o().sA,{id:"sites.siteActions.settings",defaultMessage:"Settings"})})}));ie.displayName="SettingsAction";var se=()=>i(149375),ne=()=>i(954845),oe=()=>i(179034),re=()=>i(120303),ae=()=>i(928074),le=()=>i(315841);function de(e){let{spaceStore:t,blockId:i,onClose:s,onUnpublish:n}=e;const o=(0,y().v3)(),r=F().Bv.createChildStore(t,{table:oe().ev,id:i}),a=(0,x().K8)((()=>ae().dR({store:r,environment:o}).mostPermissivePublicItem),[o,r]);return"none"===a.permissionItem.role?(s(),null):(0,Q.jsx)(ce,{store:r,mostPermissivePublicItem:a,onClose:s,onUnpublish:n})}function ce(e){const{store:t,mostPermissivePublicItem:i,onClose:a,onUnpublish:l}=e,d=(0,x().K8)((()=>"seo"===V().A.state.siteSettingContentType),[]),c=(0,s.useCallback)((()=>{X().Bp("initial")}),[]),u=(0,n().IS)((()=>({container:{flex:1,paddingBottom:8},titleContainer:{display:"flex",alignItems:"center",gap:4,padding:20,fontSize:14,lineHeight:1.25,fontWeight:r().Wy.semibold,paddingLeft:d?8:20},publishIcon:{height:16,width:16}})),[d]);return(0,Q.jsxs)("div",{style:u.container,children:[(0,Q.jsxs)("div",{style:u.titleContainer,children:[d&&(0,Q.jsx)(ue,{onClick:c}),(0,Q.jsx)(I().A,{children:(0,Q.jsx)(o().sA,{defaultMessage:"Publish settings",id:"publishSiteSettings.settings.title"})}),(0,ne().J)(u.publishIcon),(0,Q.jsx)(re().R,{onClick:a})]}),(0,Q.jsx)(le().d,{store:t,mostPermissivePublicItem:i,sudoModeStore:void 0,location:"published_site_settings",showManageAllDomains:!1,showAllPublishedSites:!1,onUnpublish:l,shouldAskForConfirmationOnPublish:!0})]})}function ue(e){const{onClick:t}=e,i=(0,o().tz)(),s=(0,n().IS)((()=>({topContainer:{display:"flex",alignItems:"center",width:"max-content"},iconButton:{marginRight:6,height:24,width:24},arrowIcon:{height:16,width:16,strokeWidth:r().Wy.semibold}})),[]);return(0,Q.jsx)("div",{style:s.topContainer,children:(0,Q.jsx)(H().A,{icon:se().v,iconStyle:s.arrowIcon,style:s.iconButton,onClick:t,ariaLabel:i.formatMessage({id:"publishSiteSettings.settings.backbutton.ariaLabel",defaultMessage:"Go back to publish settings."})})})}function he(e){const t=(0,o().tz)(),{spaceStore:i,store:r,isSettingsDisabled:a}=e,[l,d]=(0,s.useState)(void 0),c=(0,s.useCallback)((e=>{d(e)}),[d]),u=(0,s.useCallback)((()=>{d(void 0),V().A.reset()}),[d]),h=(0,n().IS)((()=>({settingButtonIcon:{width:18,height:18}})),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(D().Ay,{alignmentToOrigin:R().C.End,renderOrigin:e=>(0,Q.jsx)(H().A,{...e,ariaLabel:t.formatMessage({id:"sites.siteActionsButtonPopup.siteSettings",defaultMessage:"Site settings"}),icon:_().L,iconStyle:h.settingButtonIcon}),popupType:D().z7.Popup,render:e=>(0,Q.jsx)(Z,{store:r,parent:e,isSettingsDisabled:a,onSettingsClick:c})}),(0,Q.jsx)(E().s,{isOpen:Boolean(l),onDismiss:u,areaConstraint:{width:{type:"fixed",length:480}},render:()=>l?(0,Q.jsx)(de,{spaceStore:i,blockId:l,onClose:u,onUnpublish:()=>{W().A.removeSiteFromSpace(i.id,l)}}):null})]})}const pe=5e3;function me(){const e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"3px 5px":0;return[{key:"page",header:(0,Q.jsx)(o().sA,{id:"sites.header.pageColumnHeader",defaultMessage:"Page"}),style:{width:"32%",padding:e}},{key:"domain",header:(0,Q.jsx)(o().sA,{id:"sites.header.domainColumnHeader",defaultMessage:"Domain"}),style:{width:"28%"}},{key:"published-by",header:(0,Q.jsx)(o().sA,{id:"sites.home.publishedByColumnHeader",defaultMessage:"Published by"}),style:{width:"20%",padding:e}},{key:"published-date",header:(0,Q.jsx)(o().sA,{id:"sites.home.publishedDateColumnHeader",defaultMessage:"Published date"}),style:{width:"16%",padding:e}},{key:"edit",header:(0,Q.jsx)(Q.Fragment,{}),style:{width:"4%"}}]}function ge(e){let{column:t,onSortableColumnClick:i,header:s}=e;const o=(0,n().IS)((e=>({wrapper:{display:"flex"},sortButton:{display:"flex",alignItems:"center",padding:"3px 5px",overflow:"hidden",maxWidth:"100%",borderRadius:4},sortIcon:{fill:e.text.secondary,width:12,height:12,marginLeft:4}})),[]),{sortColumn:r,sortAscending:a}=(0,x().K8)((()=>{const{sortColumn:e,sortAscending:t}=W().A.state;return{sortColumn:e,sortAscending:t}}),[]),l=["page","published-or-created-by","published-date"].includes(t),d=()=>{if(t===r)return(0,S().m)({...o.sortIcon,...!a&&{transform:"rotate(180deg)"}})};return s&&l?(0,Q.jsx)("div",{style:o.wrapper,children:(0,Q.jsxs)(A().A,{style:o.sortButton,onClick:()=>i(t),children:[s,d()]})}):s?(0,Q.jsx)("div",{style:o.wrapper,children:s}):(0,Q.jsx)(Q.Fragment,{children:s})}function ye(e){const{spaceStore:t}=e,i=(0,y().v3)(),a=i.currentUser.id,l=(0,o().tz)();(0,s.useEffect)((()=>(U().rw(i,{spaceStore:t,currentUserId:a,limit:pe}),()=>{U().Ss(t)})),[i,t,a]);const d=(0,n().IS)((e=>({headerContainer:{display:"flex",alignItems:"center",gap:4,marginBottom:12},helpIcon:{height:14,width:15,color:e.icon.tertiary},tableBox:{tableLayout:"fixed"},cell:{paddingRight:12,height:44},shimmerBox:{height:12,gap:16,display:"flex",borderRadius:6},urlTooltip:{display:"flex",flexDirection:"column",fontWeight:r().Wy.regular,gap:4,padding:"2px"},urlCopyText:{color:e.text.secondary},domainButton:{width:"fit-content",maxWidth:"98%",background:e.lightGrayButtonBackground},domainButtonHover:{background:e.lightGrayButtonHoveredBackground},domainButtonPressed:{background:e.lightGrayButtonPressedBackground},relativeUrl:{color:e.text.tertiary}})),[]),u=(0,x().K8)((()=>{const e=W().A.getSortedSitesForSpace(t.id,l);if(!e)return;const s=[];for(const n of e){const e=P().R({store:n.store,pageVisitSource:b().y8.CopyLink}),o=new URL(e),a=`${o.host}${o.pathname}`,{store:c,publishedMetadata:u}=n,h=c.id,p=c.canAdmin(),m=T().UP(c),y=u.publishedTime?(0,f().eV)({value:g().c9.fromMillis(u.publishedTime),preset:"medium"}):"",x=u.publishedBy,S=x?F().sk.createChildStore(c,x):void 0,v=null==S?void 0:S.getDisplayName(l),A=S instanceof F().LU?(0,Q.jsx)(B().A,{userStore:S,avatarSize:20,style:{width:"fit-content",maxWidth:"98%"}},`${h}-published-by`):(0,Q.jsx)(xe,{text:v},`${h}-published-by`),w=L().Ix({spaceStore:t,domainId:m});s.push({key:h,columns:[(0,Q.jsx)(z().A,{store:c},h),(0,Q.jsx)(k().A,{allowHover:!0,renderTooltip:()=>(0,Q.jsxs)("div",{style:d.urlTooltip,children:[(0,Q.jsx)("span",{children:a}),(0,Q.jsx)("span",{style:d.urlCopyText,children:"Click to copy full URL"})]}),render:t=>(0,Q.jsx)("div",{...t,children:(0,Q.jsx)(C().p,{onClick:async()=>{const t=await j().R.clipboardActions.load();t.copyString({environment:i,stringValue:e,copiedMessage:t.clipboardMessages.copiedLinkToClipboard})},style:d.domainButton,size:"xs",hoveredStyle:d.domainButtonHover,pressedStyle:d.domainButtonPressed,children:(0,Q.jsxs)("span",{style:{...r().RC},children:[w,(0,Q.jsx)("span",{style:d.relativeUrl,children:"/..."})]})})}),placement:R().W.Bottom},`${h}-domain`),A,(0,Q.jsx)(xe,{text:y},`${h}-published-on`),(0,Q.jsx)(he,{spaceStore:t,store:c,isSettingsDisabled:!p},`${h}-actions`)]})}return s}),[t,l,d.urlTooltip,d.urlCopyText,d.domainButton,d.domainButtonHover,d.domainButtonPressed,d.relativeUrl,i]),h=(0,s.useMemo)((()=>Array.from({length:9}).map(((e,t)=>({columns:Array.from({length:5}).map(((e,t)=>(0,Q.jsx)(w().A,{style:d.shimmerBox},t))),key:`shimmerRow-${t}`})))),[d.shimmerBox]),p=!u,m=u&&0===u.length,S=(0,s.useCallback)((e=>{const{sortColumn:t,sortAscending:i}=W().A.state,s=e!==t||!i;W().A.setState({...W().A.state,sortAscending:s,sortColumn:e})}),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsxs)(c().A,{style:d.headerContainer,children:[(0,Q.jsx)(o().sA,{id:"sites.home.title",defaultMessage:"All published sites"}),(0,Q.jsx)(k().A,{renderTooltip:()=>(0,Q.jsx)(o().sA,{id:"sites.home.tooltip",defaultMessage:"Notion pages that have been published as a site"}),render:e=>(0,Q.jsx)("div",{...e,children:(0,v().$)(d.helpIcon)}),placement:R().W.Bottom,alignment:R().C.Center})]}),p?(0,Q.jsx)(M().A,{columns:me(!0),rows:h,tableStyle:d.tableBox,cellStyle:d.cell}):(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(M().A,{columns:me(!1).map((e=>({key:e.key,header:(0,Q.jsx)(ge,{column:e.key,onSortableColumnClick:S,header:e.header}),style:e.style}))),rows:u,tableStyle:d.tableBox,cellStyle:d.cell}),m&&(0,Q.jsx)(be,{})]})]})}function xe(e){const{text:t}=e,i=(0,n().IS)((()=>({text:{width:"fit-content",maxWidth:"98%",...r().RC}})),[]);return t?(0,Q.jsx)("div",{style:i.text,children:t}):null}function be(){const e=(0,n().IS)((e=>({message:{textAlign:"center",marginTop:12,marginBottom:12,color:e.text.tertiary}})),[]);return(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(I().A,{style:e.message,children:(0,Q.jsx)(o().sA,{id:"sites.results.empty",defaultMessage:"You have no published sites in this workspace"})}),(0,Q.jsx)(a().A,{size:1})]})}function fe(e){const{spaceStore:t}=e,i=(0,n().IS)((()=>({headerContainer:{display:"flex"},titleContainer:{flex:1},learnMoreButton:{fontWeight:r().Wy.regular}})),[]);return(0,Q.jsxs)(d().Ay,{children:[(0,Q.jsx)(c().A,{large:!0,divider:"full",children:(0,Q.jsxs)("div",{style:i.headerContainer,children:[(0,Q.jsx)("div",{style:i.titleContainer,children:(0,Q.jsx)(o().sA,{id:"sites.heading.title",defaultMessage:"Sites"})}),(0,Q.jsx)(l().A,{buttonStyle:i.learnMoreButton,title:(0,Q.jsx)(o().sA,{id:"sites.heading.learnMore",defaultMessage:"Learn more"}),href:(0,m().xS)("guides.autogeneratedDomains"),analyticsFrom:"sites_settings"})]})}),(0,Q.jsx)(p,{spaceStore:t}),(0,Q.jsx)(a().A,{size:20,isHidden:!0}),(0,Q.jsx)(ye,{spaceStore:t})]})}},558410:(e,t,i)=>{i.d(t,{A:()=>o});i(898992),i(354520);var s=()=>i(496603);class n extends(()=>i(757695))().default{getInitialState(){return{sites:{},sortAscending:!0,sortColumn:void 0}}initializeSiteResultsForSpace(e,t){this.state.sites[e]=t,this.emit()}getSortedSitesForSpace(e,t){const{sortAscending:n,sortColumn:o}=this.state,r=this.state.sites[e];if(r)switch(o){case"page":return s().My(r,(e=>i(919709).q4_(e.store.getTitleValue()).toLowerCase()),n?"asc":"desc");case"published-by":return s().My(r,(e=>{const s=e.publishedMetadata.publishedBy,n=s?i(630116).sk.createChildStore(e.store,s):void 0;return null==n?void 0:n.getDisplayName(t).toLowerCase()}),n?"asc":"desc");case"published-date":return s().My(r,(e=>e.publishedMetadata.publishedTime),n?"asc":"desc");default:return r}}removeSiteFromSpace(e,t){const i=this.state.sites[e];i&&(this.state.sites[e]=i.filter((e=>e.store.id!==t)),this.emit())}resetSitesForSpace(e){this.state.sites[e]=void 0}}const o=new n},652300:(e,t,i)=>{i.d(t,{A:()=>f});var s=i(296540),n=()=>i(847249),o=()=>i(401497),r=()=>i(584262),a=()=>i(926401),l=()=>i(500066),d=()=>i(296798),c=()=>i(614505),u=()=>i(16006),h=()=>i(492414),p=()=>i(553965),m=()=>i(962730),g=i(474848);function y(e){let{store:t,...n}=e;const o=(0,s.useCallback)((e=>(0,g.jsx)(i(473594).yf,{store:t,events:e})),[t]);return(0,g.jsx)(i(859428).A,{noStyle:!0,delayThreshold:400,placement:m().W.Bottom,alignment:m().C.Start,renderTooltip:o,...n})}const x=s.memo(y);var b=()=>i(404141);function f(e){const{store:t,style:i,hideIcon:m}=e,y=(0,n().K8)((()=>{if(t)return{icon:t.getIcon(),isEmptyPage:t.isEmptyPage(),url:(0,h().J8)({store:t,pageVisitSource:r().y8.SiteSettings})}}),[t]),f=(0,s.useCallback)((e=>{e.metaKey||b().A.setState({...b().A.state,open:!1})}),[]),S=(0,o().IS)((e=>({container:{display:"flex",alignItems:"center",overflow:"hidden",cursor:"default"},emptyPageIcon:{height:18,width:18,fill:e.accentColors.gray[500]},iconContainer:{position:"relative",width:20,height:20,marginRight:4},linkBox:{borderRadius:3,maxWidth:"100%"},linkIcon:{position:"absolute",width:10,height:10,right:0,bottom:0},pageRecordContainer:{display:"flex",alignItems:"center",paddingTop:2,paddingBottom:2,paddingRight:4,paddingLeft:4,...i},pageTitle:{wordBreak:"break-word",borderBottom:"0.05em solid rgba(55,53,47,.25)"}})),[i]);if(!t||!y)return null;const v=(0,g.jsxs)("div",{style:S.pageRecordContainer,children:[!m&&(0,g.jsxs)("div",{style:S.iconContainer,children:[y.icon?(0,g.jsx)(c().B,{icon:y.icon,store:t,disabled:!0,size:16,isEmptyPage:y.isEmptyPage,emojiSize:20}):(0,a().n)(S.emptyPageIcon),(0,l().G)(S.linkIcon)]}),(0,g.jsx)(u().A,{store:t,style:S.pageTitle})]});return(0,g.jsx)("div",{style:S.container,children:(0,g.jsx)(x,{store:t,render:e=>(0,g.jsx)(d().A,{href:null==y?void 0:y.url,style:S.linkBox,...(0,p().A)(e,{onClick:f}),children:v})})})}},716979:(e,t,i)=>{i.d(t,{EL:()=>A,KD:()=>v,Ss:()=>f,l2:()=>C,n0:()=>j,rw:()=>S});i(16280),i(944114),i(898992),i(354520),i(296540);var s=()=>i(388821),n=()=>i(179034),o=()=>i(959013),r=()=>i(763824),a=()=>i(449506),l=()=>i(901389),d=()=>i(106628),c=()=>i(321172),u=()=>i(437487),h=()=>i(227440),p=()=>i(630116),m=()=>i(250484),g=()=>i(67805),y=()=>i(558410),x=i(474848);const b=50;function f(e){y().A.resetSitesForSpace(e.id)}async function S(e,t){const{spaceStore:i,currentUserId:o,limit:l}=t;if(!i.id)return;const[d]=await Promise.all([a().callApi({eventName:"getPublishedPagesForUser",environment:e,data:{spaceId:i.id,limit:l||b,fetchPublishedMetadata:!0}}),(0,r().wR)(1500)]);if("failed"===d.type)throw new Error("Failed to fetch published pages.");if(d.data.recordMap){const e=[],t=s().RecordMapWithRole.create(d.data.recordMap),r=d.data.publishedEdits;for(const{model:s}of t)if(s&&s.table===n().ev){const t=p().Bv.createChildStore(i,{table:n().ev,id:s.id}),o=r[t.id],a=o&&o.authors?o.authors[0]:void 0,l={publishedTime:null==o?void 0:o.timestamp,publishedBy:a};e.push({store:t,publishedMetadata:l})}let a=e;return o&&(a=g().X(e,o)),y().A.initializeSiteResultsForSpace(i.id,a),a}}async function v(e,t){const{spaceStore:i}=t,s=e.currentUser.id,n=await S(e,{spaceStore:i,currentUserId:s});return n?n.filter((e=>{var t;return(null===(t=e.publishedMetadata.publishedBy)||void 0===t?void 0:t.id)===s})):[]}function j(e){c().Tk(e),u().Ay.setState({...u().Ay.state,display:u().pP.Publish,tab:u().QC.Publish})}async function A(e){return new Promise(((t,i)=>{l().ui({message:(0,x.jsx)("div",{style:{textAlign:"center"},children:(0,x.jsx)(o().sA,{id:"sites.confirmUnpublish.title",defaultMessage:"Unpublish this site?"})}),description:(0,x.jsx)("div",{style:{textAlign:"center"},children:(0,x.jsx)(o().sA,{id:"sites.confirmUnpublish.caption",defaultMessage:"{pageTitle} will no longer be live on the web.",values:{pageTitle:e}})}),keepFocus:!0,items:[{label:(0,x.jsx)(o().sA,{id:"sites.confirmUnpublish.confirm",defaultMessage:"Unpublish"}),color:"red",onAccept:()=>t(!0)}],showCancel:!0})}))}async function C(e,t){if(!h().A.state.online)return[];const i=await d().T.searchActions.load();return await i.searchPublicPages({environment:t,query:e,source:"public_home_page_menu",limit:m().ZK})}},954845:(e,t,i)=>{i.d(t,{J:()=>n});i(296540);var s=i(474848);const n=(0,i(340498).wt)("blueCircleDot",{viewBox:"0 0 16 16",svg:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("circle",{cx:"8",cy:"8",r:"8",fill:"none",stroke:"#2383E2",children:[(0,s.jsx)("animate",{attributeName:"r",from:"3",to:"8",dur:"1s",begin:"0s",repeatCount:"indefinite"}),(0,s.jsx)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"1s",begin:"0s",repeatCount:"indefinite"})]}),(0,s.jsx)("circle",{cx:"8",cy:"8",r:"3",fill:"#2383E2"})]})})}}]);