"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[28307],{51194:(e,t,n)=>{n.d(t,{a:()=>o});var i=n(296540),r=()=>n(525128);function o(){const e=(0,i.useRef)(!1);return(0,r().E)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},84987:(e,t,n)=>{n.r(t),n.d(t,{SidebarInboxButton:()=>I,inboxMessages:()=>R});var i=n(296540),r=()=>n(484714),o=()=>n(847249),s=()=>n(401497),a=()=>n(563864),l=()=>n(959013),c=()=>n(284371),d=()=>n(35392),u=()=>n(296798),f=()=>n(859428),p=()=>n(171347),m=()=>n(490044),h=()=>n(47170),g=()=>n(477293),y=()=>n(770906),b=()=>n(441199),x=()=>n(644914),v=()=>n(179534),S=()=>n(749687),C=()=>n(962730),j=()=>n(227440),w=()=>n(509659),E=()=>n(105127),k=n(474848);function I(e){const t=(0,r().v3)(),n=(0,l().tz)(),I=(0,h().O)(),M=(0,o().K8)((()=>"inbox"===b().default.state.contentType&&b().default.isOpen()),[]),B=(0,o().O$)(S().sidebarExpandedStore),A=(0,o().K8)((()=>b().default.state.mode),[]),L=M&&"panel"===A,T=(0,i.useCallback)((()=>{y().ZT({environment:t,contentType:"inbox"})}),[t]),z=(0,s().IS)((e=>({sidebarItem:{...L&&{fontWeight:c().Wy.semibold,background:e.sidebarItemSelectedBackground}},badge:{width:void 0,minWidth:16,paddingLeft:3,paddingRight:3},number:{fontWeight:c().Wy.semibold,letterSpacing:.12,fontSize:10,fontVariantNumeric:"lining-nums tabular-nums",fontFeatureSettings:"lnum",MozFontFeatureSettings:"lnum",WebkitFontFeatureSettings:"lnum"},shortcutLabel:{color:e.text.contrastSecondary}})),[L]),W=(0,x().ab)(),P="on"===(0,g().r)("inbox_activity_split"),F=(0,o().K8)((()=>P?v().A.getUnreadCountForCurrentSpace().comments:0),[P]),H=P?(0,k.jsx)(p().A,{count:F,color:p().g.Red,style:z.badge,numberStyle:z.number,fadeIn:!0}):(0,k.jsx)(E().A,{type:"currentSpace",color:p().g.Red,style:z.badge,numberStyle:z.number,fadeIn:!0}),O="on"===(0,g().r)("collaboration_reaction_notifications")&&B,_=!(0,o().O$)(j().e);return(0,k.jsx)(f().A,{renderTooltip:()=>_?(0,k.jsx)("div",{children:n.formatMessage(R.offlineTooltip)}):(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{children:n.formatMessage(R.tooltip)}),(0,k.jsx)(d().A,{style:z.shortcutLabel,name:"toggleAllUpdates"})]}),originGap:6,placement:C().W.Right,render:t=>{var i;return(0,k.jsx)(u().A,{style:{...W.baseSidebarItem,...z.sidebarItem,...L&&W.currentSelectedSidebarItem},onClick:T,hoveredStyle:null===(i=e.styles)||void 0===i?void 0:i.buttonHoveredStyle,...t,disabled:_,disabledFeedback:_,children:(0,k.jsx)(m().A,{left:(0,a().S)(W.topButtonIcon),right:O?(0,k.jsx)(w().f,{children:H},I):H,children:n.formatMessage(P?R.messagesTitle:R.inboxTitle)})})}})}const R=(0,l().YK)({tooltip:{id:"sidebar.inbox.tooltip",defaultMessage:"View recent updates and notifications"},inboxTitle:{id:"sidebar.inbox.button",defaultMessage:"Inbox"},messagesTitle:{id:"sidebar.messages.button",defaultMessage:"Messages"},offlineTooltip:{id:"sidebar.inbox.offlineTooltip",defaultMessage:"Unavailable while offline"}})},105127:(e,t,n)=>{n.d(t,{A:()=>l});n(296540);var i=()=>n(847249),r=()=>n(534177),o=()=>n(171347),s=()=>n(179534),a=n(474848);function l(e){const{type:t,...n}=e,l=(0,i().K8)((()=>{switch(t){case"currentSpace":return s().A.getUnreadCountForCurrentSpace().mentions;case"otherSpaces":return s().A.getUnreadMentionsCountForOtherSpaces();case"allSpaces":return s().A.getTotalUnreadMentionsCount();default:(0,r().HB)(t)}}),[t]);return(0,a.jsx)(o().A,{count:l,...n})}},171347:(e,t,n)=>{n.d(t,{A:()=>a,g:()=>o});n(296540);var i=n(474848);const r={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:16,height:16,fontSize:10,textAlign:"center",fontWeight:n(284371).Wy.semibold,borderRadius:4,color:n(100622).Ay.white,position:"static",marginLeft:6,WebkitFontSmoothing:"auto"};let o=function(e){return e[e.Red=0]="Red",e[e.Gray=1]="Gray",e}({});function s(e){return!!e&&e>0}const a=function(e){let{count:t,color:a,style:c,numberStyle:d,fadeIn:u}=e;const f=a===o.Red,p=(0,n(401497).IS)((e=>({badge:{...r,...c,...(t??0)>99&&{width:void 0,padding:2},background:f?e.redBadgeBackground:e.lightIconColor,...u&&{transition:"opacity 0.1s",opacity:s(t)?1:0}}})),[t,u,f,c]);return u||s(t)?(0,i.jsx)("div",{style:p.badge,children:(0,i.jsx)(l,{count:t,numberStyle:d})}):null};function l(e){let{count:t,numberStyle:n}=e;return t?1===t?(0,i.jsx)("span",{style:{marginLeft:-.5,...n},children:"1"}):t>99?(0,i.jsx)("span",{style:{letterSpacing:-.5,...n},children:"99+"}):t>9?(0,i.jsx)("span",{style:{letterSpacing:-.5,marginLeft:-.5,...n},children:t}):(0,i.jsx)("span",{style:{...n},children:t}):null}},198048:(e,t,n)=>{n.d(t,{C:()=>s});var i=n(296540),r=()=>n(51194),o=()=>n(610104);function s(){const e=(0,r().a)(),[t,n]=(0,i.useState)(0),s=(0,i.useCallback)((()=>{e.current&&n(t+1)}),[t]);return[(0,i.useCallback)((()=>o().Gt.postRender(s)),[s]),t]}},203066:(e,t,n)=>{n.d(t,{N:()=>c});var i=n(296540);class r extends i.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function o({children:e,isPresent:t}){const n=(0,i.useId)(),o=(0,i.useRef)(null),s=(0,i.useRef)({width:0,height:0,top:0,left:0});return(0,i.useInsertionEffect)((()=>{const{width:e,height:i,top:r,left:a}=s.current;if(t||!o.current||!e||!i)return;o.current.dataset.motionPopId=n;const l=document.createElement("style");return document.head.appendChild(l),l.sheet&&l.sheet.insertRule(`\n          [data-motion-pop-id="${n}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${i}px !important;\n            top: ${r}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(l)}}),[t]),i.createElement(r,{isPresent:t,childRef:o,sizeRef:s},i.cloneElement(e,{ref:o}))}const s=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:l,presenceAffectsLayout:c,mode:d})=>{const u=(0,n(328601).M)(a),f=(0,i.useId)(),p=(0,i.useMemo)((()=>({id:f,initial:t,isPresent:r,custom:l,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;s&&s()},register:e=>(u.set(e,!1),()=>u.delete(e))})),c?void 0:[r]);return(0,i.useMemo)((()=>{u.forEach(((e,t)=>u.set(t,!1)))}),[r]),i.useEffect((()=>{!r&&!u.size&&s&&s()}),[r]),"popLayout"===d&&(e=i.createElement(o,{isPresent:r},e)),i.createElement(n(786719).t.Provider,{value:p},e)};function a(){return new Map}const l=e=>e.key||"";const c=({children:e,custom:t,initial:r=!0,onExitComplete:o,exitBeforeEnter:a,presenceAffectsLayout:c=!0,mode:d="sync"})=>{(0,n(285238).V)(!a,"Replace exitBeforeEnter with mode='wait'");const u=(0,i.useContext)(n(29473).L).forceRender||(0,n(198048).C)()[0],f=(0,n(51194).a)(),p=function(e){const t=[];return i.Children.forEach(e,(e=>{(0,i.isValidElement)(e)&&t.push(e)})),t}(e);let m=p;const h=(0,i.useRef)(new Map).current,g=(0,i.useRef)(m),y=(0,i.useRef)(new Map).current,b=(0,i.useRef)(!0);if((0,n(525128).E)((()=>{b.current=!1,function(e,t){e.forEach((e=>{const n=l(e);t.set(n,e)}))}(p,y),g.current=m})),(0,n(757491).l)((()=>{b.current=!0,y.clear(),h.clear()})),b.current)return i.createElement(i.Fragment,null,m.map((e=>i.createElement(s,{key:l(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:c,mode:d},e))));m=[...m];const x=g.current.map(l),v=p.map(l),S=x.length;for(let n=0;n<S;n++){const e=x[n];-1!==v.indexOf(e)||h.has(e)||h.set(e,void 0)}return"wait"===d&&h.size&&(m=[]),h.forEach(((e,n)=>{if(-1!==v.indexOf(n))return;const r=y.get(n);if(!r)return;const a=x.indexOf(n);let b=e;if(!b){const e=()=>{h.delete(n);const e=Array.from(y.keys()).filter((e=>!v.includes(e)));if(e.forEach((e=>y.delete(e))),g.current=p.filter((t=>{const i=l(t);return i===n||e.includes(i)})),!h.size){if(!1===f.current)return;u(),o&&o()}};b=i.createElement(s,{key:l(r),isPresent:!1,onExitComplete:e,custom:t,presenceAffectsLayout:c,mode:d},r),h.set(n,b)}m.splice(a,0,b)})),m=m.map((e=>{const t=e.key;return h.has(t)?e:i.createElement(s,{key:l(e),isPresent:!0,presenceAffectsLayout:c,mode:d},e)})),i.createElement(i.Fragment,null,h.size?m:m.map((e=>(0,i.cloneElement)(e))))}},490044:(e,t,n)=>{n.d(t,{A:()=>f});n(296540);var i=()=>n(484714),r=()=>n(847249),o=()=>n(401497),s=()=>n(500066),a=()=>n(159588),l=()=>n(963589),c=()=>n(644914),d=n(474848);function u(){const e=(0,o().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,d.jsx)("div",{children:(0,s().G)(e.icon)})}function f(e){var t;const n=(0,i().v3)(),s=n.device.isMobile,{isTablet:f}=(0,i().Y0)(),p=(0,l().X)("tablet_refresh_gate"),m=(0,r().K8)((()=>{var t,i;if(s)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(i=e.style)||void 0===i?void 0:i.paddingLeft:10)}),[n.WindowSizeStore,s,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),h=(0,o().IS)((t=>({wrapper:{...s?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:f&&p?4:8,paddingBottom:f&&p?4:8,paddingLeft:m,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:c().Zr,paddingTop:4,paddingBottom:4,...(0,a().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:s?28:22,height:s?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:s?24:c().ry,height:s?24:c().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!s?"clip":"ellipsis",...e.childrenStyle}})),[s,f,p,m,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,d.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:h.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,d.jsx)("div",{style:h.left,children:e.left}),e.icon&&(0,d.jsxs)("div",{style:h.icon,children:[e.icon,e.isAlias&&(0,d.jsx)(u,{})]}),(0,d.jsx)("div",{style:h.children,children:e.children}),e.right&&(0,d.jsx)("div",{style:h.right,children:e.right})]})}},509659:(e,t,n)=>{n.d(t,{f:()=>R});n(898992),n(354520),n(430670),n(803949),n(581454);var i=()=>n(203066),r=()=>n(153321),o=n(296540),s=()=>n(847249),a=()=>n(401497),l=()=>n(959044),c=()=>n(204384),d=()=>n(96689),u=()=>n(496603),f=()=>n(534177),p=()=>n(56086),m=()=>n(299545),h=()=>n(47170),g=()=>n(179534),y=()=>n(351360),b=()=>n(865241),x=()=>n(630116);n(517642),n(658004),n(733853),n(845876),n(432475),n(515024),n(731698);class v extends(()=>n(757695))().default{getInitialState(){return{emojisBySpace:{}}}addEmojis(e,t){this.update((n=>{const i=n.emojisBySpace[t]||[],r=new Set(i),o=e.filter((e=>!r.has(e)));if(o.length>0){const e=10-i.length,r=o.slice(0,e);if(r.length>0)return{emojisBySpace:{...n.emojisBySpace,[t]:[...i,...r]}}}return n}))}popEmoji(e){const t=this.state.emojisBySpace[e]||[],n=t[t.length-1];return n&&this.update((n=>({emojisBySpace:{...n.emojisBySpace,[e]:t.slice(0,-1)}}))),n}getEmojis(e){return this.state.emojisBySpace[e]||[]}clearEmojis(e){this.update((t=>({emojisBySpace:{...t.emojisBySpace,[e]:[]}})))}}const S=new v;var C=n(474848);const j=.8,w=1,E=24,k=432,I=1;function R(e){const{children:t}=e,[n,v]=(0,o.useState)(!1),[R,M]=(0,o.useState)(void 0),B=(0,s().K8)((()=>b().A.state.isVisible),[]);(0,s().K8)((()=>{const e=g().A.state.results,t=y().default.state.currentUserRootStore;t&&e.forEach((e=>{var n;const i=(null===(n=e.unreceived)||void 0===n?void 0:n.notificationIds)||[],r=e.spaceId;if(!r||!i.length)return;const o=x().SL.createChildStore(t,{table:d().NX,id:r});if(!o)return;g().A.markNotificationsAsReceived(r,i);const s=i.map((e=>x().sk.createChildStore(o,{table:l()._p,id:e}))),a=u().oE(s.map((e=>{const t=m().g5(e);if(null!=t&&t.isReady())return t}))).filter((e=>"reacted"===(null==e?void 0:e.getType()))).filter((e=>!(null!=e&&e.getInvalid()))).sort(((e,t)=>{const n=Number(null==e?void 0:e.getEndTime())??0;return(Number(null==t?void 0:t.getEndTime())??0)-n})).flatMap((e=>{const t=((null==e?void 0:e.getEdits())||[]).filter((e=>e&&"reaction_id"in e&&"reaction-created"===e.type)).sort(((e,t)=>{const n=(null==e?void 0:e.timestamp)??0;return((null==t?void 0:t.timestamp)??0)-n}))[0];return(null==t?void 0:t.reaction_id)??[]})).map((e=>x().sk.createChildStore(o,{table:c().ez,id:e}))).map((e=>null==e?void 0:e.getIcon())).filter(f().O9);a.length>0&&S.addEmojis(a,r)}))}),[]);const A=(0,h().O)(),L=o.useRef(),T=o.useRef(),z=(0,o.useCallback)((()=>{L.current&&(clearTimeout(L.current),L.current=void 0),T.current&&(clearTimeout(T.current),T.current=void 0),v(!1),M(void 0)}),[]),W=(0,o.useCallback)((()=>{if(!B)return void z();if(!A)return void z();const e=S.popEmoji(A);M(e),e?(v(!0),L.current=setTimeout((()=>{v(!1),T.current=setTimeout((()=>{W()}),1e3*j)}),1e3*w)):z()}),[z,B,A]);(0,s().K8)((()=>{if(!A)return;S.getEmojis(A).length>0&&!n&&!L.current&&W()}),[n,W,A]),(0,o.useEffect)((()=>z),[z]);const P=(0,a().IS)((()=>({container:{display:"flex",alignItems:"center",justifyContent:"center"},badge:{display:"flex",alignItems:"center"}})),[]);return(0,C.jsx)("div",{style:P.container,children:(0,C.jsx)(i().N,{mode:"wait",children:R?(0,C.jsx)(r().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:j,type:"spring",damping:E,stiffness:k,mass:I},children:(0,C.jsx)(p().A,{char:R,size:18})},`emoji-${R}`):(0,C.jsx)(r().P.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:j,type:"spring",damping:E,stiffness:k,mass:I},style:P.badge,children:t},"number")})})}},563864:(e,t,n)=>{n.d(t,{S:()=>r});n(296540);var i=n(474848);const r=(0,n(340498).wt)("newSidebarInbox",{viewBox:"0 0 20 20",svg:(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.79331 5.57891C6.02276 5.21835 6.42052 5 6.84789 5H13.1521C13.5795 5 13.9772 5.21835 14.2067 5.57891C14.2139 5.59022 14.2214 5.60134 14.2292 5.61225L16.6496 9H12.25C11.8358 9 11.5 9.33579 11.5 9.75C11.5 10.5784 10.8284 11.25 10 11.25C9.17157 11.25 8.5 10.5784 8.5 9.75C8.5 9.33579 8.16421 9 7.75 9H3.35037L5.77082 5.61225C5.77861 5.60134 5.78611 5.59022 5.79331 5.57891ZM3 10.5V14.25C3 14.9404 3.55964 15.5 4.25 15.5H15.75C16.4404 15.5 17 14.9404 17 14.25V10.5H12.9055C12.5725 11.7939 11.3979 12.75 10 12.75C8.60212 12.75 7.42755 11.7939 7.09451 10.5H3ZM6.84789 3.5C5.91491 3.5 5.04609 3.97299 4.53955 4.75532L1.82609 8.55319C1.61401 8.85003 1.5 9.20572 1.5 9.57053V14.25C1.5 15.7688 2.73122 17 4.25 17H15.75C17.2688 17 18.5 15.7688 18.5 14.25V9.57053C18.5 9.20572 18.386 8.85003 18.1739 8.55319L15.4604 4.75531C14.9539 3.97299 14.0851 3.5 13.1521 3.5H6.84789Z"})})},757491:(e,t,n)=>{n.d(t,{l:()=>r});var i=n(296540);function r(e){return(0,i.useEffect)((()=>()=>e()),[])}}}]);