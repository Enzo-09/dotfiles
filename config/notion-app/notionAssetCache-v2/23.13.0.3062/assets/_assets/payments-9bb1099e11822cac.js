"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[25891,59970],{6208:(e,t,n)=>{n.d(t,{L:()=>d,y:()=>l});var o=()=>n(847249),r=()=>n(798880),i=()=>n(959013),a=()=>n(351360),s=()=>n(630116);function l(e){const t=(0,i().tz)();return(0,o().K8)((()=>{const{currentSpaceStore:n}=a().default.state;if(!n||!e)return;return s().LU.createChildStore(n,{table:r().oo,id:e}).getDisplayName(t)}),[t,e])}function d(){const e=(0,i().tz)();return(0,o().K8)((()=>{const{currentUserStore:t}=a().default.state,n=null!=t&&t.isDefined()?t.getModel():void 0;return n?n.getDisplayName(e):void 0}),[e])}},27716:(e,t,n)=>{n.d(t,{D_:()=>x,Ft:()=>A,HN:()=>h,MA:()=>v,Sk:()=>b,Yn:()=>I,e9:()=>g,eJ:()=>M,su:()=>S});n(944114),n(898992),n(672577),n(737550);var o=()=>n(326215),r=()=>n(762433),i=()=>n(47273),a=()=>n(979340),s=()=>n(959013),l=()=>n(972435),d=()=>n(324561);const c=(0,s().YK)({cancellationError:{id:"midtermSubscriptionHelpers.cancellationFailed",defaultMessage:"There was an error attempting to cancel your pending changes. Please try again."},unableToCancelError:{id:"midtermSubscriptionHelpers.unableToCancel",defaultMessage:"We cannot cancel your scheduled changes right now. Please contact support for more help."},cancellationSuccess:{id:"midtermSubscriptionHelpers.cancellationSucceeded",defaultMessage:"Pending changes have been canceled"},invalidSubscriptionId:{id:"midtermSubscriptionHelpers.invalidSubscriptionId",defaultMessage:"Unable to cancel your pending changes. Something was wrong with your pending subscription changes."}});function u(e){return(0,a().dL)(e)?"free":(0,a().wb)(e)?"education":(0,a().sP)(e)?"singlePlayerPlus":(0,a().$P)(e)?"plus":(0,a().tL)(e)?"business":(0,a().OX)(e)?"enterprise":"legacy"}const p=(0,s().YK)({freePlan:{defaultMessage:"Free Plan",id:"freePlan.title"},educationPlusPlan:{defaultMessage:"Education Plus Plan",id:"educationPlusPlan.title"},plusPlan:{defaultMessage:"Plus Plan",id:"plusPlan.title"},businessPlan:{id:"businessPlan.title",defaultMessage:"Business Plan"},enterprisePlan:{defaultMessage:"Enterprise Plan",id:"enterprisePlan.label"},legacyPlan:{defaultMessage:"Legacy Plan",id:"legacyPlan.label"}}),m={free:{planTitle:p.freePlan},singlePlayerPlus:{planTitle:p.plusPlan},education:{planTitle:p.educationPlusPlan},plus:{planTitle:p.plusPlan},business:{planTitle:p.businessPlan},enterprise:{planTitle:p.enterprisePlan},legacy:{planTitle:p.legacyPlan}},f=(0,s().YK)({notionAI:{defaultMessage:"Notion AI",id:"notionAI.title"},removeAI:{defaultMessage:"Remove AI",id:"notionAI.remove.title"}}),y=(0,s().YK)({month:{defaultMessage:"Monthly billing",id:"billingInterval.monthly"},year:{defaultMessage:"Annual billing",id:"billingInterval.annual"}});function g(){return l().A.formatMessage(c.unableToCancelError)}function v(){return l().A.formatMessage(c.cancellationSuccess)}function _(e){var t;const n=null==e||null===(t=e.subscription)||void 0===t?void 0:t.pending;if(!n)return;const o=(0,r().PP)(e),a=(0,r().lQ)(e);return{oldTier:(0,i().Gf)(o)??"free",newTier:(0,i().Gf)(a)??"free",oldAIAddOn:(0,i().V_)(o).find((e=>"ai"===e)),newAIAddOn:(0,i().V_)(a).find((e=>"ai"===e)),oldInterval:(0,i().yw)(o),newInterval:(0,i().yw)(a),phaseOneEndDate:n.startDate}}function b(e){const t=_(e);return!(!t||!t.newInterval)&&t.oldInterval!==t.newInterval}function h(e){const t=_(e);return!!t&&t.oldTier!==t.newTier}function S(e){const t=_(e),n=[];if(!t)return{scheduledChanges:n,periodEndDate:null};const{newTier:o,oldTier:r,oldAIAddOn:i,newAIAddOn:a,oldInterval:s,newInterval:d,phaseOneEndDate:c}=t;var p,g;return r!==o&&n.push(function(e,t){const n=u(e),o=l().A.formatMessage(m[n].planTitle);if(!t)return"";const r=u(t);return`${o} → ${l().A.formatMessage(m[r].planTitle)}`}(r,o)),i!==a&&n.push((p=i,g=a,`${l().A.formatMessage(p?f.notionAI:f.removeAI)} → ${l().A.formatMessage(g?f.notionAI:f.removeAI)}`)),s!==d&&n.push(function(e,t){return e&&t?`${l().A.formatMessage("month"===e?y.month:y.year)} → ${l().A.formatMessage("month"===t?y.month:y.year)}`:""}(s,d)),{scheduledChanges:n,periodEndDate:c}}function A(e,t){if(!e)return;const n=(0,r().PP)(e).items,o=(0,r().lQ)(e).items;var i;return(0,r().HO)(n,o).some((e=>{let[n,o]=e;return(0,r().IE)(n??o)===t&&n&&!o}))?null===(i=e.subscription)||void 0===i||null===(i=i.pending)||void 0===i?void 0:i.startDate:void 0}function x(e){if(!e)return;var t;return 0===(0,r().lQ)(e).items.length?null===(t=e.subscription)||void 0===t||null===(t=t.pending)||void 0===t?void 0:t.startDate:void 0}function M(e){let{billingData:t}=e;const n=(0,d().a9)(t);if(!n)return!1;if((0,r().et)(t))return!1;const o=(0,r().bO)(n),i=(0,r().N8)(null==n?void 0:n.subscription);return!o&&!i}function I(e){const t=(0,r().V9)(e),n=(0,r().ji)(e).length>0;return!t||(!o().xd.includes(t)||!(!n||!o().iV.includes(t)))}},33218:(e,t,n)=>{n.d(t,{UQ:()=>m,gL:()=>y});n(16280),n(898992),n(672577),n(803949);var o=()=>n(651124),r=()=>n(792071),i=()=>n(688728),a=()=>n(369186),s=()=>n(475140),l=()=>n(235692),d=()=>n(778781),c=()=>n(696706),u=()=>n(896628),p=()=>n(751156);function m(e){let{environment:t,transaction:n,layoutStore:o,position:l,updatedModule:d,sessionId:c}=e;const u=i().Zm[l.area],m=o.getRawModules();if("form_conditional_modules"===u){const e=null==m?void 0:m[u];if(!(null==e?void 0:e[l.moduleId]))throw new Error("Unable to find module being updated.");return void p().createAndCommitOrAppend({environment:t,transaction:n,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:o,operation:r().N4X.updateModuleInArea({pointer:o.pointer,area:u,module:(0,a().Lv)(d)})})},userAction:"BuilderLayoutModules.updateModule"})}if(!m)throw new Error("Unable to find modules");const f=(0,s().LC)(m,(e=>e.id===l.moduleId));if(!f||f.area!==u)throw new Error("Unable to find module being updated.");p().createAndCommitOrAppend({environment:t,transaction:n,canUndo:!0,perform(e){p().applyOperation({transaction:e,store:o,operation:r().N4X.updateModuleInArea({pointer:o.pointer,module:(0,a().Lv)(d),..."views_main_tab_modules"===f.area?{area:f.area,viewId:f.viewId}:{area:f.area}})})},userAction:"BuilderLayoutModules.updateModule"})}function f(e){var t,n,o;let{collectionStore:r,layoutStore:i}=e;const a=new Map,s=r.getFormat(),l=[...null===(t=i.getModules())||void 0===t?void 0:t.page_main,...null===(n=i.getModules())||void 0===n?void 0:n.page_details],c=new Map;null===(o=s.property_visibility)||void 0===o||o.forEach((e=>{c.set(e.property,e)})),l.forEach((e=>{if(!(0,d()._Q)(e))return(0,d().gx)(e)?(a.set(e.propertyId,{property:e.propertyId}),void c.set(e.propertyId,{property:e.propertyId,visibility:"show"})):void 0;e.propertyIds.forEach((e=>{a.set(e,{property:e}),c.set(e,{property:e,visibility:"show"})}))}));const u=r.getNormalizedPropertyGroups();var p;u?u.forEach((e=>{var t;null===(t=e.propertyIds)||void 0===t||t.forEach((e=>{a.has(e)||a.set(e,{property:e})}))})):null===(p=s.collection_page_properties)||void 0===p||p.forEach((e=>{a.has(e.property)||a.set(e.property,e)}));return{propertiesFormat:Array.from(a.values()),propertyVisibility:Array.from(c.values())}}function y(e){let{environment:t,transaction:n,collectionStore:i,layoutStore:a}=e;const{propertiesFormat:s,propertyVisibility:m}=f({collectionStore:i,layoutStore:a});p().createAndCommitOrAppend({environment:t,transaction:n,canUndo:!0,perform(e){const t=a.getBlockChildrenPointers(),n=a.getFormat(),f=a.firstModuleOfType("viewsMain");f&&(0,d().y6)(f)&&t.find((e=>c().L3.isEqual(e,f.collection_view_block_pointer)))&&p().applyOperation({transaction:e,store:a,operation:r().N4X.removeBlockChild(a.pointer,f.collection_view_block_pointer.id)});const y=null==n?void 0:n.previousViewsMainCollectionViewBlockPointer,g=y&&t.find((e=>c().L3.isEqual(e,y)));g&&p().applyOperation({transaction:e,store:a,operation:r().N4X.removeBlockChild(a.pointer,g.id)}),p().applyOperation({transaction:e,store:a,operation:r().N4X.setModulesByAreas(a.pointer,(0,l().K5)())}),p().applyOperation({transaction:e,store:a,operation:r().N4X.deleteFormat(a.pointer)});const v=i.getFormat(),{page_section_visibility:_}=v;u().zA({stores:[i],update:{property_groups:void 0,collection_page_properties:s,property_visibility:m,..._?{page_section_visibility:o().Zi}:void 0},transaction:e})},userAction:"BuilderLayoutModules.resetLayoutToDefault"})}},86089:(e,t,n)=>{n.d(t,{o:()=>d});var o=n(296540),r=()=>n(484714),i=()=>n(847249),a=()=>n(351360),s=()=>n(779795),l=()=>n(981046);function d(){const e=(0,r().v3)(),{spaceId:t,isGuest:n}=(0,i().K8)((()=>{const e=a().default.state.currentSpaceStore,t=null==e?void 0:e.getPublicSpaceData();return{spaceId:null==e?void 0:e.id,isGuest:"none"===(null==t?void 0:t.role)}}),[]);return(0,o.useEffect)((()=>{t&&!n&&(0,s().$W)({environment:e,spaceId:t})}),[e,t,n]),(0,i().K8)((()=>l().A.state.prices),[])}},101847:(e,t,n)=>{n.d(t,{T:()=>o});const o=(0,n(340498).xh)("gift",{default:{loader:()=>n.e(23202).then(n.bind(n,723202))},small:{loader:()=>n.e(2264).then(n.bind(n,902264))},mini:{loader:()=>n.e(42668).then(n.bind(n,542668))},large:{loader:()=>n.e(25196).then(n.bind(n,725196))}})},155185:(e,t,n)=>{n.d(t,{I:()=>a,_:()=>i});const o={normalizedTitleWithIcon:!0,properties:!0,property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,views:!0,viewsMain:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,deleted_property:!1,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},r={properties:!0,property:!0,relationsGroup:!0,formQuestion:!0,placeholder:!0,titleWithIcon:!0,cover:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,transcript:!1,formTitle:!1,formSubmit:!1,views:!0,viewsMain:!0,collectionView:!0,collectionViewV2:!0,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return o[e.type]}function a(e){return r[e.type]}},161165:(e,t,n)=>{n.d(t,{Bq:()=>c,P8:()=>d,tA:()=>u,v1:()=>p});n(296540);var o=()=>n(762433),r=()=>n(97065),i=()=>n(166386),a=()=>n(959013),s=n(474848);const l={ai:{title:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.v2.ai.title.v2",defaultMessage:"Get unlimited Notion AI"}),subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.ai.description",defaultMessage:"Search, generate, analyze, and chat—right inside Notion"}),fiftyPercentSubtitle:(0,s.jsx)(a().sA,{id:"addOnUpgrade.studentAiOffer.confirmation.description",defaultMessage:"Your personal teaching assistant, code reviewer, brainstorming partner, and more — right in your workspace"})},plus:{title:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.title.plusPlan",defaultMessage:"Upgrade to Plus"}),plusAiTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.title.plusPlanPlusAi",defaultMessage:"Upgrade to Plus + AI"}),subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusSubtitle",defaultMessage:"Do more with unlimited charts, files, automations & integrations"}),resurrectionOfferSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.plusResurrectionOfferSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 3 months."}),lic50Subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 50% off for 12 months."}),lic25Subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Plus to get 25% off for 12 months."})},business:{title:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlan",defaultMessage:"Upgrade to Business"}),aiCoreTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreTitle",defaultMessage:"Get Unlimited AI and more"}),aiConnectorsTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsTitle",defaultMessage:"Get AI Connectors and more"}),researchModeTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeTitle",defaultMessage:"Get Research Mode and more"}),meetingNotesTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesTitle",defaultMessage:"Get AI Meeting Notes and more"}),aiForNotionMailTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailTitle",defaultMessage:"Get AI for Notion Mail and more"}),plusAiTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanPlusAi",defaultMessage:"Upgrade to Business + AI"}),subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.business",defaultMessage:"For companies using Notion to connect several teams & tools"}),lic50Subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.lic50.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 50% off for 12 months."}),lic25Subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.plus.lic25.biz.offerSubtitle",defaultMessage:"Unlimited content, charts and more. Upgrade to Business to get 25% off for 12 months."}),aiCoreSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiCoreSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),aiConnectorsSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiConnectorsSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),researchModeSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanResearchModeSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),meetingNotesSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanMeetingNotesSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"}),aiForNotionMailSubtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.upgradeToBusinessDialog.businessPlanAiForNotionMailSubtitle",defaultMessage:"Upgrade to the Business plan to get unlimited AI and all the premium features"})},enterprise:{title:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.title.enterprise",defaultMessage:"Upgrade to Enterprise"}),limitedTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.title.enterpriseLimited",defaultMessage:"Upgrade to Enterprise Limited"}),plusAiTitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.title.enterprisePlusAi",defaultMessage:"Upgrade to Enterprise + AI"}),subtitle:(0,s.jsx)(a().sA,{id:"subscriptionUpgradeModal.oneLiner.v2.enterprise",defaultMessage:"Advanced controls & support to run your entire organization"})}};function d(e){const{product:t,coupon:n,isOnTrialWithAiProduct:o,from:r,may13PackagingChangesEnabled:a,useEnterpriseLimitedName:s}=e;switch(t){case"ai":const e=l.ai.title;return"ai_fifty_percent"===n?{title:e,subtitle:l.ai.fiftyPercentSubtitle}:{title:e,subtitle:l.ai.subtitle};case"sites_custom_hostnames":default:return{};case"plus":const t=o?l.plus.plusAiTitle:l.plus.title;return(0,i().u6)(n)?{title:t,subtitle:l.plus.resurrectionOfferSubtitle}:"lic_50"===n?{title:t,subtitle:l.plus.lic50Subtitle}:"lic_25"===n?{title:t,subtitle:l.plus.lic25Subtitle}:{title:t,subtitle:l.plus.subtitle};case"business":if(r&&a){if(["ai_assistant_limit_in_app","ai_autofill_fill_all_pages","ai_autofill_bulk_fill","ai_autofill_on_page_edit","ai_autofill_try_on_view","ai_limit_in_app","ai_limit_property_autofill","ai_limit_sidebar","ai_limit_settings","ai_limited_qna_no_results","ai_limited_qna_upsell_action_button","ai_qna_waitlist","ai_qna_limit_in_app","ai_upsell_notice","ai_upsell_settings","ai_connector_ai_plan_upsell_intro_modal_opened","ai_connector_ai_upsell_intro_modal","ai_page_translation","ai_plans_page"].includes(r))return{title:l.business.aiCoreTitle,subtitle:l.business.aiCoreSubtitle,featureWithCustomImage:"coreAI"};if(["placeholder1"].includes(r))return{title:l.business.aiConnectorsTitle,subtitle:l.business.aiConnectorsSubtitle,featureWithCustomImage:"aiConnectors"};if(["placeholder2"].includes(r))return{title:l.business.researchModeTitle,subtitle:l.business.researchModeSubtitle,featureWithCustomImage:"researchMode"};if(["placeholder3"].includes(r))return{title:l.business.meetingNotesTitle,subtitle:l.business.meetingNotesSubtitle,featureWithCustomImage:"meetingNotes"};if(["mail_app"].includes(r))return{title:l.business.aiForNotionMailTitle,subtitle:l.business.aiForNotionMailSubtitle,featureWithCustomImage:"notionAIForMail"}}const d=o?l.business.plusAiTitle:l.business.title;return"lic_50"===n?{title:d,subtitle:l.business.lic50Subtitle}:"lic_25"===n?{title:d,subtitle:l.business.lic25Subtitle}:{title:d,subtitle:l.business.subtitle};case"enterprise":return{title:o?l.enterprise.plusAiTitle:s?l.enterprise.limitedTitle:l.enterprise.title,subtitle:l.enterprise.subtitle}}}function c(e,t){const{subtotal:n,discount:o,balance:r}=e;return n.minus(o).minus(r).plus(t).zeroIfNegative()}function u(e,t){if(!e)return!1;const n=(0,o().q8)(e);return Boolean(t)&&"year"===n}function p(e,t,n){return(0,o().TB)(e)&&t&&(0,r().DH)(t.offer.campaign)&&n===(0,i().i)(t)}},235692:(e,t,n)=>{n.d(t,{K5:()=>p,Vp:()=>c,_u:()=>d,oP:()=>m,wC:()=>l,xN:()=>u});n(898992),n(354520),n(581454);var o=()=>n(183558),r=()=>n(155185),i=()=>n(778781),a=()=>n(369186);const s={page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"properties",type:"properties"},{id:"discussions",type:"discussions"},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},l={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"editor",type:"editor"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},d={page_main:[{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyLabels:"hide",propertyIds:[]},{id:"editor",type:"editor"},{id:"discussions",type:"discussions"}],page_details:[],form_layout_schema:[],person_profile_page_main:[],person_profile_page_details:[]},c={page_main:[],page_details:[],form_layout_schema:[],person_profile_page_main:[{id:"cover",type:"cover"},{id:"title_with_icon",type:"normalizedTitleWithIcon",propertyIds:[]},{id:"recent_activity",type:"recentActivity"}],person_profile_page_details:[{id:"collaborators",type:"collaborators"},{id:"teamspaces",type:"teamspaces"}]};function u(e){return(0,a().jr)({modulesByArea:s,collectionSchema:null==e?void 0:e.collectionSchema,collectionFormat:null==e?void 0:e.collectionFormat})}function p(){return{page_layout_schema:(0,a().ke)(s.page_main).map((e=>{if(!(0,i().cn)(e))return(0,r().I)(e)?{...e,id:(0,o().Ay)()}:e})).filter((e=>void 0!==e)),page_info_layout_schema:(0,a().ke)(s.page_details).map((e=>{if(!(0,i().cn)(e))return(0,r().I)(e)?{...e,id:(0,o().Ay)()}:e})).filter((e=>void 0!==e)),form_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0}}function m(e,t){const n=void 0===t?[{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:e}]:[{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:e},{id:(0,o().Ay)(),type:"formQuestion",formQuestionId:t}];return{page_layout_schema:void 0,page_info_layout_schema:void 0,person_profile_page_main:void 0,person_profile_page_details:void 0,form_layout_schema:[{id:(0,o().Ay)(),type:"cover"},{id:(0,o().Ay)(),type:"formTitle"},...n,{id:(0,o().Ay)(),type:"formSubmit"}]}}},271084:(e,t,n)=>{n.d(t,{k:()=>r});n(581454);class o extends(()=>n(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[n,o]=e,[r,i]=t;return i-o})).map((e=>{let[t,n]=e;return t}))}}const r=new o;(0,n(604341).exposeDebugValue)("UserSimilarityStore",r)},299177:(e,t,n)=>{n.d(t,{A:()=>i});class o extends(()=>n(757695))().default{getInitialState(){return{}}}const r=new o;n(604341).exposeDebugValue("SpaceWorkflowTemplateInstanceMapStore",r);const i=r},311004:(e,t,n)=>{e.exports=n.p+"edfba4a6d1ff7acd.png"},314907:(e,t,n)=>{n.d(t,{E:()=>i});var o=()=>n(847249),r=()=>n(134217);function i(e){return(0,o().K8)((()=>r().Fq(e.state)),[e])}},324561:(e,t,n)=>{n.d(t,{Gi:()=>f,OD:()=>c,Q7:()=>m,UU:()=>y,_3:()=>p,a9:()=>u,f_:()=>d});var o=()=>n(484714),r=()=>n(847249),i=()=>n(857639),a=()=>n(762433),s=()=>n(596513),l=()=>n(714300);function d(e){let{spaceId:t}=e;const n=(0,o().v3)();return(0,r().K8)((()=>{if(t)return s().t.getData(n,{spaceId:t})}),[n,t])}function c(e){let{environment:t,spaceId:n}=e;return n?s().t.awaitData(t,{spaceId:n}):Promise.resolve(void 0)}function u(e){if("admin"===(null==e?void 0:e.type))return e}function p(e){let{spaceId:t}=e;return u((0,l().l)({spaceId:t}))}function m(e,t,n){if(!t)return 0;const o=(0,a().yB)({spaceId:e,logFunction:i().log.bind(i()),billingData:t});return o?Math.max(o,n):0}function f(e){var t;const n=null===(t=(0,a().KH)(e,"plan"))||void 0===t?void 0:t.price;if(!n)return;const o=n.unitAmount,r="year"===n.billingInterval?12:1;return{amount:o.amount/r,currencyCode:o.currencyCode}}function y(e){return"app_store"===(null==e?void 0:e.provider)||"play_store"===(null==e?void 0:e.provider)||"mixed"===(null==e?void 0:e.provider)}},334992:(e,t,n)=>{n.d(t,{A:()=>s});var o=()=>n(762433),r=()=>n(497799),i=()=>n(324561),a=()=>n(714300);function s(e){const t=(0,r().H)({spaceStore:e}),n=(0,a().l)({spaceId:e.id}),s=(0,i().Q7)(e.id,n,t.loading?0:t.members.length);return Boolean(!(0,o().Qx)(null==n?void 0:n.subscription)&&!(0,o().N8)(null==n?void 0:n.subscription)&&!(0,o().TB)(n)&&s>0)}},343916:(e,t,n)=>{n.d(t,{i:()=>o});const o=(0,n(340498).xh)("arrowUpRightSquare",{default:{loader:()=>n.e(43459).then(n.bind(n,443459))},small:{loader:()=>n.e(97517).then(n.bind(n,497517))},mini:{loader:()=>n.e(60475).then(n.bind(n,260475))},large:{loader:()=>n.e(3953).then(n.bind(n,303953))}})},390527:(e,t,n)=>{n.r(t),n.d(t,{DEFAULT_MAX_RECURRENCE_DUPLICATION_PER_TASK:()=>E,MAXIMUM_DAILY_RECURRENCES_IN_PATH:()=>x,MAXIMUM_NESTED_RECURRENCE_LEVEL:()=>A,MAX_RECURRENCE_INTERVAL:()=>v,MAX_RECURRENCE_NUMBER_OF_RUNS:()=>_,RRULE_WEEKDAYS_MAP:()=>g,adjustedStartDateIfPossible:()=>I,areRecurrenceSchedulesEqual:()=>O,convertFromUnpersistedRecurrenceConfig:()=>N,convertToUnpersistedRecurrenceConfig:()=>U,getFormattedEndCondition:()=>k,getFormattedNextRecurrenceTime:()=>C,getNewEndTimestamp:()=>B,getNextDateUtc:()=>P,getRecurrenceAfter:()=>w,isRunningBetweenMidnightAnd3AM:()=>T,isValidRecurrenceInterval:()=>b,isValidRecurrenceNumberOfRuns:()=>h,rruleFromRecurrence:()=>S,templateAncestorsViolateRecurrenceNesting:()=>M});n(898992),n(354520),n(581454);var o=()=>n(244641);n(944114);function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(0===n.length)return e.map((e=>[e]));const i=[];for(const a of e)i.push(...r(n[0],...n.slice(1)).map((e=>[a,...e])));return i}var i=()=>n(496603),a=()=>n(534177),s=()=>n(720665),l=()=>n(597777),d=()=>n(869190),c=()=>n(416504),u=()=>n(402390);class p extends(()=>n(896346))().p3{constructor(e,t){super(e,t)}after(e,t){return super.after(e,t)}}var m=()=>n(912720);const f=(0,n(959013).YK)({dateAtTime:{id:"automations.recurrenceHelpers.dateAtTime",defaultMessage:"{date} at {time}"},dateBetweenMidnightAnd3AM:{id:"automations.recurrenceHelpers.dateBetweenMidnightAnd3AM",defaultMessage:"{date} between 12–3 AM"},numberEndConditionDescription:{id:"automations.recurrenceHelpers.numberEndConditionDescription",defaultMessage:"{number, plural, one {After {number} run} other {After {number} runs}}"},noEndCondition:{id:"automations.recurrenceHelpers.noEndCondition",defaultMessage:"Never"}}),y={day:p.DAILY,week:p.WEEKLY,month:p.MONTHLY,year:p.YEARLY},g={MO:p.MO,TU:p.TU,WE:p.WE,TH:p.TH,FR:p.FR,SA:p.SA,SU:p.SU},v=99,_=999;function b(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=v}function h(e){return(0,s().Et)(e)&&Number.isInteger(e)&&e>0&&e<=_}function S(e){const{start_date:t,frequency:n,interval:o,weekdays:i,timezone:s,hour:d,minute:c}=e,u="week"===n&&i?i.map((e=>g[e])):void 0,m={};return(0,a().O9)(e.end_condition)&&("date"===e.end_condition.type?m.until=(0,l().eU)(e.end_condition.end_at):"number"===e.end_condition.type?m.count=e.end_condition.number_of_occurrences:(0,a().HB)(e.end_condition)),"month"===e.frequency&&(0,a().O9)(e.monthly_restriction)&&("monthdays"===e.monthly_restriction.type?m.bymonthday=e.monthly_restriction.monthdays:"weekdays_in_month"===e.monthly_restriction.type?m.byweekday=r(e.monthly_restriction.weekdays,e.monthly_restriction.week_numbers).map((e=>{let[t,n]=e;return g[t].nth(n)})):(0,a().HB)(e.monthly_restriction)),new p({freq:y[n],dtstart:(0,l().eU)(t),interval:o,byweekday:u,tzid:s,byhour:d??0,byminute:c??0,bysecond:0,...m})}const A=1,x=1;function M(e){var t;if(0===e.length)return{violatesConstraint:!1,templateNestingExceedsMaxDepth:!1,ancestorHasDailyTemplate:!1,nestedDepthOfAutomationAncestors:void 0,immediateAncestorRecurrenceType:void 0};const n=e.filter((e=>{var t;return"day"===(null===(t=e.getRecurrence())||void 0===t?void 0:t.frequency)})),o=e.length,r=null===(t=e[0].getRecurrence())||void 0===t?void 0:t.frequency,i=o>A,a=n.length>=x;return{violatesConstraint:i||a,templateNestingExceedsMaxDepth:i,ancestorHasDailyTemplate:a,nestedDepthOfAutomationAncestors:o,immediateAncestorRecurrenceType:r}}function I(e){var t;const{recurrence:n,afterDate:r}=e;if("number"===(null===(t=n.end_condition)||void 0===t?void 0:t.type)||n.start_date>=r)return n;let i=o().c9.fromMillis(n.start_date,{zone:"utc"});const a=o().c9.fromMillis(r,{zone:"utc"});switch(n.frequency){case"year":{const e=Math.floor(a.diff(i,"years").years/n.interval);i=i.plus({years:e*n.interval});break}case"month":{const e=Math.floor(a.diff(i,"months").months/n.interval);i=i.plus({months:e*n.interval});break}case"week":{const e=Math.floor(a.diff(i,"weeks").weeks/n.interval);i=i.plus({weeks:e*n.interval});break}case"day":{const e=Math.floor(a.diff(i,"days").days/n.interval);i=i.plus({days:e*n.interval});break}}return{...n,start_date:(0,l().DH)(i.toMillis())}}function w(e){const{recurrence:t,afterDate:n}=e;if((0,m().wt)(t)){const e=(0,l().l1)(n);return t.start_date>=e?new Date(t.start_date):void 0}{const e=S(I({recurrence:t,afterDate:n})).after((0,l().eU)(n));if(!e)return;return(0,l().h1)(e)}}function T(e){return 0===e.hour||1===e.hour||2===e.hour}function P(e){return S(e).after((0,l().eU)((0,l().Rz)()))||void 0}function C(e){const{recurrence:t,intl:n}=e,r=P(N(t));if(!r)return;const i=T(t),a=o().c9.fromJSDate(r).toUTC().setZone("local",{keepLocalTime:!0}).setLocale((0,u().H)(n)).setZone(t.timezone),s=(0,d().Yq)({date:a,dateFormat:"relative",allowRelativeDates:!0,intl:n,shortenDate:!0});if(i)return n.formatMessage(f.dateBetweenMidnightAnd3AM,{date:s});{let e=a.toLocaleString(o().c9.TIME_SIMPLE);return t.timezone!==(0,c().P)()&&(e+=` ${a.toFormat("ZZZZ")}`),n.formatMessage(f.dateAtTime,{date:s,time:e})}}function k(e,t){return(0,a().O9)(e)?"number"===e.type?t.formatMessage(f.numberEndConditionDescription,{number:e.number_of_occurrences}):"date"===e.type?(0,d().Yq)({date:o().c9.fromMillis(e.end_at),dateFormat:"relative",allowRelativeDates:!0,intl:t,shortenDate:!0}):void(0,a().HB)(e):t.formatMessage(f.noEndCondition)}const E=100;function U(e){return{...e,start_date:(0,l().l1)(e.start_date),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?{type:"date",end_at:(0,l().l1)(e.end_condition.end_at)}:(0,a().HB)(e.end_condition):void 0}}function B(e,t,n){return e.plus(n-t)}function D(e,t){const n=o().c9.fromMillis(t.end_at).set({hour:e.hour??0,minute:e.minute??0});return{type:"date",end_at:(0,l().Rz)(n.toJSDate())}}function N(e){return{...e,start_date:(0,l().Rz)(new Date(e.start_date)),end_condition:e.end_condition?"number"===e.end_condition.type?e.end_condition:"date"===e.end_condition.type?D(e,e.end_condition):(0,a().HB)(e.end_condition):void 0}}function O(e,t){const n=i().fN(e,(e=>void 0!==e)),o=i().fN(t,(e=>void 0!==e));return i().n4(n,o)}},422540:(e,t,n)=>{n.d(t,{$0:()=>g,Fx:()=>x,Ge:()=>m,I3:()=>u,Kj:()=>S,PP:()=>M,TK:()=>I,Yy:()=>c,aE:()=>w,cQ:()=>A,kH:()=>f,m7:()=>p,nq:()=>b,nv:()=>v,tj:()=>y});n(898992),n(354520),n(737550);var o=()=>n(496603),r=()=>n(534177),i=()=>n(970013),a=()=>n(651124),s=()=>n(349835),l=()=>n(390066);(0,r().u0)((e=>(0,r().O9)(e)&&(0,r().O9)(e.target)&&(0,r().O9)(e.external_bot_id)?{true:{external_bot_id:e.external_bot_id,target:e.target,custom_message:e.custom_message}}:{false:e}));const d={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1},c={checkbox:[{type:"checkbox"}],date:[{type:"date"}],email:[{type:"text"}],multi_select:[{type:"text"},{of:{type:"text"},type:"array"}],number:[{type:"number"}],person:[{type:"person"},{of:{type:"person"},type:"array"}],phone_number:[{type:"text"}],relation:[{type:"block"},{of:{type:"block"},type:"array"}],select:[{type:"text"},{of:{type:"text"},type:"array"}],status:[{type:"text"},{of:{type:"text"},type:"array"}],text:void 0,title:void 0,url:[{type:"text"}]};function u(e){return Boolean(d[e.type]&&!(0,i().UU)(e)&&(!(0,i().$M)(e)||void 0===(0,i().om)(e)))}function p(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:d,sourcePropertyIds:c}=e,p=(c??(0,r().uv)(n)).filter(((t,o,r)=>{const a=n[t];return!(!a||!u(a))&&(("relation"!==a.type||!e.restrictCrossSpace||!(0,i().o2)(e.spaceId,a))&&(!s||s([t,a],o,n)))}));if(0===p.length)return[];if(!t||!1===d)return p;const m=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(p,(e=>m.findIndex((t=>t.property===e))))}function m(e){const{collectionFormat:t,collectionSchema:n,sort:s}=e,d=(0,r().uv)(n).filter(((e,t,o)=>{const r=n[e];return!(!r||!(0,i().JY)(r))}));if(0===d.length)return[];if(!t||!1===s)return d;const c=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(d,(e=>c.findIndex((t=>t.property===e))))}function f(e){return e.type===s().M9.InvalidCharacter?{type:e.type,character:e.character}:e.type===s().M9.TokenExpected?{type:e.type,token:e.token}:e.type===s().uW.MissingSchemaPropertyOnThisRow||e.type===s().uW.MissingSchemaPropertyOnCollection?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ThisRowBlockPropertyMismatchCollection?{type:e.type,thisRowCollection:e.thisRowCollection}:e.type===s().uW.MissingContextVariable?{type:e.type,valueId:e.valueId}:e.type===s().uW.FunctionCallTooFewArguments?{type:e.type,numArguments:e.numArguments}:e.type===s().uW.FunctionCallUnexpectedArgument?{type:e.type,parameterIndex:e.parameterIndex}:e.type===s().uW.FunctionCallArgumentWrongType?{type:e.type,argumentType:e.argumentType,libraryFunctionName:e.libraryFunction.name,parameterIndex:e.parameterIndex}:e.type===s().uW.MissingDataDependencyBlock?{type:e.type,blockPointer:e.blockPointer,node:e.node}:e.type===s().uW.MissingDataDependencyPerson?{type:e.type,personPointer:e.personPointer}:e.type===s().uW.MemberPropertyMismatchCollection?{type:e.type,blockCollection:e.blockCollection}:e.type===s().uW.DownstreamParseFailure?{type:e.type,collectionId:e.collectionId,property:e.property}:e.type===s().uW.ContextVariableWrongType?{type:e.type,valueId:e.valueId,expectedType:e.expectedType,resultType:e.resultType}:e.type===s().uW.DisallowedValueType?{type:e.type,expressionValue:e.expressionValue,allowedValueTypes:e.allowedValueTypes}:e.type===s().uW.LibraryFunctionExecutionError?{type:e.type,error:e.error,libraryFunctionName:e.libraryFunction.name}:{type:e.type}}const y={checkbox:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,button:!1,file:!1,verification:!1,auto_increment_id:!1,created_by:!1,created_time:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,geo_point:!1};function g(e){return Boolean(y[e.type])}function v(e){const{collectionFormat:t,collectionSchema:n,filter:s,sort:d}=e,c=(0,r().uv)(n).filter(((e,t,o)=>{var r;const a=n[e];return!(!a||!y[a.type])&&((!(0,i().$M)(a)||null===(r=(0,i().om)(a))||void 0===r||!r.auto_update_on_edit)&&(!s||s([e,a],t,n)))}));if(0===c.length)return[];if(!t||!1===d)return c;const u=(0,l().L)(t,n,void 0,a().jf.Page).collection_page_properties||[];return o().Ul(c,(e=>u.findIndex((t=>t.property===e))))}const _={checkbox:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,auto_increment_id:!1,button:!1,created_by:!1,created_time:!1,date:!1,file:!1,formula:!1,last_edited_by:!1,last_edited_time:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function b(e){return _[e.type]}const h={checkbox:!0,created_by:!0,created_time:!0,date:!0,email:!0,multi_select:!0,number:!0,person:!0,phone_number:!0,relation:!0,select:!0,status:!0,text:!0,title:!0,url:!0,last_edited_by:!0,last_edited_time:!0,auto_increment_id:!1,button:!1,file:!1,formula:!1,last_visited_time:!1,location:!1,rollup:!1,verification:!1,geo_point:!1};function S(e){return h[e.type]}function A(e){return 0===e}function x(e){return function(e){return"button_block"===e||"button_property"===e}(e)}function M(e){const{property:t,collectionSchema:n}=e;return!!n&&!n[t]}function I(e){const{collectionSchema:t,property:n,type:o}=e,r=null==t?void 0:t[n];return!r||("action"===o?!u(r):!y[r.type])}function w(e){let{automationTrigger:t,collectionSchema:n}=e;if("event"===(null==t?void 0:t.type)){const{pagesAdded:e,pagePropertiesEdited:o,source:i,relativeDate:a}=t.event;if(void 0===i)return!1;const s="some"===o.type&&o.some,l="all"===o.type&&o.all;if((s||l||[]).some((e=>M({collectionSchema:n,property:e.property})||I({collectionSchema:n,property:e.property,type:"trigger"}))))return!1;const d="some"===o.type&&(!(0,r().O9)(o.some)||0===o.some.length),c="all"===o.type&&(!(0,r().O9)(o.all)||0===o.all.length);if(!e&&("none"===o.type||d||c)&&!a)return!1}else{if("recurrence"!==(null==t?void 0:t.type))return!1;if(!t.recurrence)return!1}return!0}},447934:(e,t,n)=>{n.d(t,{$L:()=>w,Fv:()=>D,HD:()=>N,V_:()=>E,bV:()=>U,jP:()=>k,nh:()=>C,w8:()=>B});n(16280),n(18107),n(967357),n(898992),n(354520);var o=()=>n(206267),r=()=>n(792071),i=()=>n(688728),a=()=>n(475140),s=()=>n(235692),l=()=>n(924329),d=()=>n(778781),c=()=>n(144081),u=()=>n(334261),p=()=>n(661920),m=()=>n(435009),f=()=>n(751156),y=()=>n(799832),g=()=>n(492414),v=()=>n(594794),_=()=>n(869562),b=()=>n(351360),h=()=>n(712505),S=()=>n(630116),A=()=>n(263711),x=()=>n(640868),M=()=>n(204521),I=()=>n(33218);function w(e){let{environment:t,transaction:n,collectionStore:o,userId:i,modules:a}=e;const l=(0,v().zP)({environment:t,spaceId:o.getSpaceId(),table:c().zx}),d=S().sk.createChildStore(o,l),{model:u,operations:[p]}=r().wfN.create({pointer:l,parent:o.pointer,createdByUserId:i,modules:a??(0,s().K5)()});f().applyOperation({transaction:n,store:d,operation:p});const m=r().BnK.setLayout(o.pointer,l);return f().applyOperation({transaction:n,store:o,operation:m}),{model:u,store:d}}function T(e){let t;return e?t=e:h().default.state.open&&h().default.state.targetStore?t=h().default.state.targetStore:b().default.state.mainEditorCurrentBlockStore&&(t=b().default.state.mainEditorCurrentBlockStore),t}function P(e){_().setUpdateExpand({environment:e,isExpanded:!1,from:"keyboard_default",saveDetailsSidebarPreference:!1}),p().VN({environment:e,from:"open_page_layout_editor",preventAnimation:!0})}function C(e){var t,n;let{environment:r,blockStore:i,collectionStore:a,collectionViewStore:s,from:l,initialSelectedModuleType:d}=e;const c=function(e){var t;let n=T(e);if(null!==(t=n)&&void 0!==t&&t.isCollectionView()){const e=(0,y().U)(n);n=e?e.resultsInViewOrder(1).at(0):void 0}return n}(i),u=window.location.href;P(r);const p=o().JW();A().g.setState({isOpen:!0,mode:"layout-editor",collectionStore:a,pageStore:c,siteRootBlockStore:void 0,sessionId:p,initialSelectedModuleId:null==c||null===(t=c.getAssociatedCollectionStore())||void 0===t||null===(t=t.getLayoutStore())||void 0===t||null===(t=t.getModel())||void 0===t||null===(t=t.firstRawModuleOfType(d??"titleWithIcon"))||void 0===t?void 0:t.id,urlOnOpen:u}),(0,M().Ko)({environment:r,from:l,context:"layout",sessionId:p,collectionId:null==a?void 0:a.id,existingLayoutId:null==a||null===(n=a.getLayoutStore())||void 0===n?void 0:n.id,collectionViewId:null==s?void 0:s.id})}function k(e){let{environment:t,store:n,siteRootBlockStore:r,from:i}=e;const a=T(n);P(t);const s=o().JW();A().g.setState({isOpen:!0,mode:"site-settings-editor",pageStore:a,siteRootBlockStore:r,sessionId:s}),(0,M().Ko)({environment:t,context:"site",from:i,sessionId:s,collectionId:void 0,existingLayoutId:void 0})}function E(e){let{slideBlockStore:t}=e;const n=t.getNavigableBlockStore(),r=o().JW();A().g.setState({isOpen:!0,mode:"presentation",pageStore:n,currentSlideStore:t,sessionId:r}),window.document.documentElement.requestFullscreen()}function U(e){let{environment:t,pageStore:n,slideBlockStore:o}=e;A().g.setState({isOpen:!1});const r=(0,g().Ay)({store:n,scrollToBlockId:o.id,pageVisitSource:void 0});m().oo({environment:t,url:r}),window.document.fullscreenElement&&window.document.exitFullscreen()}function B(e){A().g.getState().isOpen&&D(e)}function D(e){let{environment:t}=e;const n=A().g.getState();if(!n.isOpen)throw new Error("Cannot close page layout editor. Page layout editor is not open.");"layout-editor"===n.mode&&n.urlOnOpen&&window.location.href!==n.urlOnOpen&&m().aX(t),A().g.setState({isOpen:!1})}function N(e){var t;let{environment:n,transaction:o,property:r,layoutStore:s}=e;const c=A().g.getSessionId(),p=null===(t=s.getModel())||void 0===t?void 0:t.getRawModules(),m=s.getCollectionModel();if(!p||!m)return;const f=S().md.createChildStore(s,m.pointer),y=(0,a().yn)(p,(e=>"titleWithIcon"===e.type));if(y&&(0,d().Mj)(y.module)){var g;const{module:e,position:t}=y,a={...e,type:"titleWithIcon",propertyIds:null===(g=e.propertyIds)||void 0===g?void 0:g.filter((e=>e!==r))};(0,I().UQ)({environment:n,sessionId:c,transaction:o,layoutStore:s,position:{area:(0,i().Fw)(t.area),moduleId:e.id},updatedModule:(0,l().X)(a)})}const v=(0,a().LP)(p,(e=>"property"===e.type&&e.propertyId===r));for(const{module:a,position:l}of v){const e=a.id,t=(0,i().Fw)(l.area);(0,x().U)({environment:n,sessionId:c,transaction:o,layoutStore:s,position:{area:t,moduleId:e}})}const _=m.getFormat().collection_page_sections;if(_){const e=_.filter((e=>e.section!==r));u().LK({store:f,pageSectionFormats:e,transaction:o,environment:n})}}},461946:(e,t,n)=>{n.d(t,{$G:()=>i,$z:()=>p,BV:()=>c,WL:()=>r,YO:()=>l,e3:()=>s,x5:()=>a,yL:()=>d});n(898992),n(672577);var o=()=>n(166386);const r=30,i=5,a=3;function s(e){return Boolean(p(e)||u(e))}function l(e){return p(e)||u(e)}function d(e){const t=p(e)||u(e);if(t)return(0,o().Vm)(t)}function c(e){const t=p(e)||u(e);if(t)return(0,o().kd)(t)}function u(e){var t;return null===(t=m(e))||void 0===t?void 0:t.find((e=>{let{offer:t}=e;return"trial"===t.type&&"business_reverse"===t.campaign}))}function p(e){var t;return null===(t=m(e))||void 0===t?void 0:t.find((e=>{let{offer:t}=e;return"stacked_business_trial"===t.campaign}))}function m(e){if(e)return Array.isArray(e)?e:[e]}},465364:(e,t,n)=>{n.d(t,{$N:()=>C,D5:()=>k,GB:()=>w,M9:()=>M,Pt:()=>P,eW:()=>T,jo:()=>E,v7:()=>I});n(944114),n(898992),n(803949),n(581454);var o=()=>n(244641),r=()=>n(787626),i=()=>n(713998),a=()=>n(597777),s=()=>n(604995),l=()=>n(416504),d=()=>n(519831),c=()=>n(496603),u=()=>n(534177),p=()=>n(299709),m=()=>n(317001),f=()=>n(520861),y=()=>n(878060),g=()=>n(44729),v=()=>n(246826),_=()=>n(319975),b=()=>n(519839),h=()=>n(695625),S=()=>n(397248),A=()=>n(630116),x=()=>n(747671);function M(e){const{environment:t,droppedStores:n,duplicate:i,calendarBy:c,transaction:u,collectionContextStore:y,duplicateActions:v}=e,_=o().c9.fromMillis(e.startOfDay);let h=!0;for(const o of n){const t=e.collectionStore?e.collectionStore:(0,b().Dj)({store:o,collectionContextStore:y});if(o.getParentTable()===d().Vl||!t){h=!1;break}g().X$({childStore:o,parentStore:t,transaction:u})||(h=!1)}const S=(0,f().T)({environment:t,droppedStores:n,duplicate:i,transaction:u,collectionStore:e.collectionStore,duplicateActions:v});for(const o of S){const n=e.collectionStore?e.collectionStore:(0,b().Dj)({store:o,collectionContextStore:y});if(!n)continue;const i=n.getMappedProperty(c),d=o.getPropertyStore(i),f=(0,r().b)(d.getValue())||s().Ec((0,l().P)()),g=s().kW(f,(0,l().P)()),v=_.toFormat(s().tr);let S;if("date"===g.type||"datetime"===g.type)S={...g,start_date:v};else{const e=s().AA(g,(0,l().P)());if(!e.end)return;const t={...g,start_date:v},n=s().AA(t,(0,l().P)()).start.diff(e.start,"days"),o=e.end.plus(n).toFormat(s().tr);S={...g,start_date:v,end_date:o}}const A=s().kW(S,a().$K(f)||(0,l().P)());(0,m().j)({environment:t,store:o,collectionStore:n,collectionContextStore:y,shouldCoerce:!0,groupsPointer:[],transaction:u,alreadyMovedToCollection:h}),k({environment:t,type:"dateValue",propertyId:i,store:o,transaction:u,dateValue:A}),(0,p().E)({environment:t,collectionContextStore:y,block_id:o.id,property:i,property_type:"date",from:"calendar"})}}function I(e){const{calendarStore:t,direction:n,targetStore:o}=e;t.setState({...t.state,isDragging:!0,targetStore:o,direction:n,temporaryValue:void 0})}function w(e){const{calendarStore:t,x:n,y:i,calendarBy:d}=e,u=t.state;if(u.isDragging){const e=(0,r().b)(u.targetStore.getPropertyStore(d).getValue());if(!e)return;const p=s().kW(e,(0,l().P)()),m=u.temporaryValue||e,f=s().kW(m,(0,l().P)()),y=[];u.dayStoreMap.forEach(((e,t)=>{y.push({store:e,timestamp:t})}));const g=y.find((e=>{let{store:t}=e;const o=h().T.getRectFromStore(t);return Boolean(o&&S().ux(o,n,i))}));let v;if(g){const e=o().c9.fromMillis(g.timestamp),t=e.endOf("day"),n=e.toFormat(s().tr);if(p){const r=s().AA(p,(0,l().P)());if(u.direction===x().Q.Left)if(o().IX.fromDateTimes(e,t).contains(r.start))v=p;else{let e;e="datetimerange"===p.type||"daterange"===p.type?{...p,start_date:n,end_date:p.end_date}:"datetime"===p.type?{type:"datetimerange",start_date:n,start_time:p.start_time,end_date:p.start_date,end_time:p.start_time,time_zone:p.time_zone,reminder:p.reminder}:{type:"daterange",start_date:n,end_date:p.start_date,reminder:p.reminder};const t=s().AA(e,(0,l().P)());v=!r.end&&t.start>r.start||r.end&&t.start>r.end?f:e}else if(r.end?o().IX.fromDateTimes(e,t).contains(r.end):o().IX.fromDateTimes(e,t).contains(r.start))v=p;else{let e;e="date"===p.type?{...p,type:"daterange",end_date:n}:"datetime"===p.type?{...p,type:"datetimerange",end_date:n,end_time:"00:00"}:{...p,end_date:n};const t=s().AA(e,(0,l().P)());v=t.end&&t.end<t.start?f:e}}}if(v&&!c().n4(f,v)){const e=s().kW(v,a().$K(m)||(0,l().P)());t.setState({...u,temporaryValue:e})}}}function T(e){const{environment:t,calendarStore:n,calendarBy:o,transaction:r}=e,i=n.state;i.isDragging&&i.temporaryValue&&(k({type:"dateValue",environment:t,dateValue:i.temporaryValue,propertyId:o,store:i.targetStore,transaction:r}),n.setState({...n.state,isDragging:!1}))}function P(e){const{calendarStore:t}=e,n=t.state;n.isDragging&&t.setState({...n,isDragging:!1})}function C(e){const{environment:t,store:n,collectionStore:r,collectionContextStore:a,startDayOfWeek:d,transaction:c}=e,u=a.dateRangeStartStore.state,p=(0,l().P)(),f=a.normalizedQueryStore.state;if(!f||!f.calendar_by)return;const y=(null==r?void 0:r.getMappedProperty(f.calendar_by))??f.calendar_by,g=s().hp(u,d,p),_=g.startOf("month"),b=g.endOf("month"),h=o().c9.now().startOf("day");let S;return S=o().IX.fromDateTimes(_,b).contains(h)?s().p6(h.valueOf(),p):s().p6(s().iB(u,d,p).valueOf(),p),v().zv({store:n.getPropertiesStore(),data:{[y]:i().m5(S)},transaction:c}),(0,m().j)({environment:t,store:n,collectionStore:r,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:c}),n}function k(e){const{environment:t,store:n,propertyId:o,transaction:r}=e;let a;"timestamp"===e.type?a=s().p6(e.timestampMs.valueOf(),(0,l().P)()):"dateValue"===e.type?a=e.dateValue:(0,u().HB)(e);const d=n.getPropertyValue(o),c=i().m5(a);v().zv({store:n.getPropertiesStore(),data:{[o]:c},transaction:r}),y().O({environment:t,store:n,dateProperty:{id:o,oldValue:d,newValue:c}})}function E(e){const{environment:t,collectionStore:n,calendarBy:o,store:r,insertStores:i,collectionContextStore:a,transaction:s}=e,l=r.getPropertyStore(o).getValue();for(const d of i)(0,m().j)({environment:t,store:d,collectionStore:n,collectionContextStore:a,shouldCoerce:!0,groupsPointer:[],transaction:s}),_().R9({environment:t,store:d.getPropertyStore(o),value:l,transaction:s});return i.map((e=>A().Bv.createChildStore(n,e.pointer)))}},490044:(e,t,n)=>{n.d(t,{A:()=>p});n(296540);var o=()=>n(484714),r=()=>n(847249),i=()=>n(401497),a=()=>n(500066),s=()=>n(159588),l=()=>n(963589),d=()=>n(644914),c=n(474848);function u(){const e=(0,i().IS)((e=>({icon:{position:"absolute",width:"50%",height:"50%",right:0,bottom:0,fill:"dark"===e.mode?e.text.primary:"#3E3C38",stroke:"dark"===e.mode?e.surface.wash:"white",strokeWidth:"dark"===e.mode?"1.85px":"1.5px"}})),[]);return(0,c.jsx)("div",{children:(0,a().G)(e.icon)})}function p(e){var t;const n=(0,o().v3)(),a=n.device.isMobile,{isTablet:p}=(0,o().Y0)(),m=(0,l().X)("tablet_refresh_gate"),f=(0,r().K8)((()=>{var t,o;if(a)return n.WindowSizeStore.getSafePaddingLeftCSS("number"==typeof(null===(t=e.style)||void 0===t?void 0:t.paddingLeft)?null===(o=e.style)||void 0===o?void 0:o.paddingLeft:10)}),[n.WindowSizeStore,a,null===(t=e.style)||void 0===t?void 0:t.paddingLeft]),y=(0,i().IS)((t=>({wrapper:{...a?{display:"flex",alignItems:"center",width:"100%",minHeight:26,fontSize:16,paddingTop:p&&m?4:8,paddingBottom:p&&m?4:8,paddingLeft:f,paddingRight:10,userSelect:"none",WebkitUserSelect:"none",boxShadow:void 0,marginBottom:e.shouldShowMobileMarginBottom?12:1}:{display:"flex",alignItems:"center",width:"100%",fontSize:14,minHeight:e.isBottomItem?24:27,height:d().Zr,paddingTop:4,paddingBottom:4,...(0,s().ic)()},...e.style},icon:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,width:a?28:22,height:a?24:18,marginRight:8,position:"relative"},right:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,height:"100%",...e.rightStyle},left:{flexShrink:0,flexGrow:0,borderRadius:4,color:t.text.secondary,width:a?24:d().ry,height:a?24:d().ry,display:"flex",alignItems:"center",justifyContent:"center",marginRight:e.icon?0:8},children:{flexGrow:1,flexShrink:1,flexBasis:"auto",whiteSpace:"nowrap",minWidth:0,overflow:"hidden",textOverflow:e.right&&!a?"clip":"ellipsis",...e.childrenStyle}})),[a,p,m,f,e.shouldShowMobileMarginBottom,e.isBottomItem,e.style,e.rightStyle,e.icon,e.right,e.childrenStyle]);return(0,c.jsxs)("div",{role:e.role,dir:"ltr","aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:y.wrapper,onFocus:e.onFocus,onBlur:e.onBlur,onMouseMove:e.onMouseMove,onMouseLeave:e.onMouseLeave,onClick:e.onClick,className:e.className,children:[e.left&&(0,c.jsx)("div",{style:y.left,children:e.left}),e.icon&&(0,c.jsxs)("div",{style:y.icon,children:[e.icon,e.isAlias&&(0,c.jsx)(u,{})]}),(0,c.jsx)("div",{style:y.children,children:e.children}),e.right&&(0,c.jsx)("div",{style:y.right,children:e.right})]})}},497799:(e,t,n)=>{n.d(t,{H:()=>c});n(898992),n(823215),n(354520),n(581454);var o=()=>n(847249),r=()=>n(798880),i=()=>n(322769),a=()=>n(508496),s=()=>n(630116),l=()=>n(134217),d=()=>n(749240);function c(e){let{spaceStore:t}=e;return(0,o().K8)((()=>{const e=d().subscriptionDataStoreInstance.state;if(!e)return{loading:!0};if(a().default.checkGate({gateName:"dont_load_users"}))return{loading:!1,members:[],guests:[]};const n=l().Be(e);if(!n.every((e=>s().LU.createChildStore(t,{table:r().oo,id:e.userId}).isReady())))return{loading:!0};const o=n.filter(i().c7),c=n.filter(i().QE);return{loading:!1,members:o.map((e=>{let{userId:n}=e;return s().LU.createChildStore(t,{table:r().oo,id:n})})),guests:c.map((e=>{let{userId:n}=e;return s().LU.createChildStore(t,{table:r().oo,id:n})}))}}),[t])}},520861:(e,t,n)=>{n.d(t,{T:()=>r});n(944114),n(898992),n(908872);var o=()=>n(415651);function r(e){const{environment:t,collectionStore:n,duplicate:r,droppedStores:i,transaction:a,duplicateActions:s}=e,{movedStores:l,reparentedStores:d}=i.reduce(((e,t)=>(r||t.getAssociatedCollectionId()!==(null==n?void 0:n.id)?e.reparentedStores.push(t):e.movedStores.push(t),e)),{movedStores:[],reparentedStores:[]});return[...l,...o().MS({environment:t,droppedStores:d,duplicate:r,transaction:a,resolveTemplateVariables:!1,duplicateActions:s})]}},527059:(e,t,n)=>{n.d(t,{lh:()=>a().l,bw:()=>d,UL:()=>A,lI:()=>I,IU:()=>T,Wo:()=>w().W,EF:()=>P().E,o2:()=>C().o});var o=()=>n(484714),r=()=>n(187174),i=()=>n(449506);var a=()=>n(714300),s=()=>n(847249),l=()=>n(27716);function d(e){return(0,s().K8)((()=>(0,l().eJ)({billingData:e})),[e])}var c=n(296540),u=()=>n(786508),p=()=>n(166386),m=()=>n(58293),f=()=>n(762433),y=()=>n(640653),g=()=>n(47170),v=()=>n(240865),_=()=>n(351360),b=()=>n(324561),h=()=>n(10984),S=()=>n(141273);function A(e){const t=(0,o().v3)(),[n,r]=(0,c.useState)(!1),a=function(e){const t=(0,S().g)("ai_fifty_percent_upgrade"),n=(0,g().O)(),o=(0,b().f_)({spaceId:n}),r=(0,f().eh)(o,"ai"),i=(0,v().V)();return(0,s().K8)((()=>{const n=t&&!r&&(0,h().wb)()&&1===i,o=(0,y().aB)(_().default.state.currentSpaceStore);return Boolean(n&&(!o||"sidebar"!==e||o>=7))}),[t,r,i,e])}(e),l=(0,m().r)(),d=(0,s().K8)((()=>null==l?void 0:l.canAdmin()),[l]),A=(0,s().K8)((()=>null==l?void 0:l.getSpaceId()),[l]);return(0,c.useEffect)((()=>{!async function(){if(a&&A&&d)try{const n=await i().callApi({eventName:"getCustomerOffer",environment:t,data:{spaceId:A,offerCampaign:"ai_fifty_percent_upgrade"}});if("failed"===n.type)return;if("offer"in n.data){var e;const t=(0,u().RS)(null===(e=n.data)||void 0===e?void 0:e.offer);r((0,p().J5)(t))}}catch(n){return}}()}),[t,a,A,d]),n}var x=()=>n(176983),M=()=>n(975971);function I(e){let{spaceId:t}=e;const n=(0,o().v3)(),r=(0,x().J)();return(0,s().K8)((()=>{if(!t||!r)return;const e=M().A.getData(n,{spaceId:t});return null==e?void 0:e.billingData}),[n,t,r])}var w=()=>n(987427);function T(e,t){const n=(0,s().O$)(e),o=(0,v().V)()??1,d=(0,g().O)(),c=(0,a().l)({spaceId:d}),u=(0,s().K8)((()=>(0,l().eJ)({billingData:c})),[c]),[{value:p}]=(0,r().Yb)((()=>i().callApi({eventName:"isEmailEducation",environment:t,data:{}})),[t]);return!!p&&("failed"!==p.type&&(!!p.data.isEligible&&(!!n&&(!!c&&(!Boolean((0,f().KH)(c,"plan"))&&(u&&1===o))))))}var P=()=>n(314907),C=()=>n(86089)},529803:(e,t,n)=>{n.d(t,{A:()=>r});class o extends(()=>n(757695))().default{}const r=new o},539412:(e,t,n)=>{n.d(t,{$y:()=>b,jc:()=>_,x9:()=>v});n(296540);var o=()=>n(484714),r=()=>n(847249),i=()=>n(343916),a=()=>n(929468),s=()=>n(959013),l=()=>n(209660),d=()=>n(460292),c=()=>n(989423),u=()=>n(640653),p=()=>n(529803),m=()=>n(780262),f=()=>n(807778),y=()=>n(671812),g=n(474848);function v(){const e=(0,r().K8)((()=>{const{editsBlocked:e}=m().A.state;return e??!1}),[]),t=(0,o().v3)();return(0,r().K8)((()=>(0,f().Jq)(t)),[t])&&e}function _(){return(0,r().K8)((()=>{var e;const t=p().A.state;return null==t||null===(e=t.data)||void 0===e?void 0:e.invoiceHostedUrl}),[])}function b(){const e=(0,o().v3)(),t=_(),n=(0,r().K8)((()=>{var e;const t=p().A.state;return(null==t||null===(e=t.data)||void 0===e?void 0:e.overdueInvoiceCount)??0}),[]),c=(0,r().K8)((()=>(0,u().s7)(e)),[e]),m=function(e,t){if(e)return t>1?(0,g.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process {overdueInvoiceCount, plural, one {your last payment} other {{overdueInvoiceCount} payments}}.",id:"uncollectibleExperience.uncollectibleExperienceOverlay.multipleInvoicesMessageContent",values:{overdueInvoiceCount:t}}):(0,g.jsx)(s().sA,{defaultMessage:"Access to Notion is limited because we couldn’t process your last payment",id:"uncollectibleExperience.uncollectibleExperienceOverlay.messageContent"});return(0,g.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberMessageContent",defaultMessage:"Access to Notion is limited"})}(c,n),f=function(e){if(e)return;return(0,g.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberSecondaryLabel",defaultMessage:"Contact a workspace owner to update your workspace’s payment method"})}(c),v=function(e,t,n){if(t){const o=(0,y().a)(n);return n=>{o&&(h(t,e),o(n))}}return n=>{h(t,e),l().Ow()}}(e,c,t),b=function(e){if(e)return(0,g.jsx)(s().sA,{defaultMessage:"View unpaid invoice",id:"uncollectibleExperience.uncollectibleExperienceOverlay.buttonLabel"});return(0,g.jsx)(s().sA,{id:"uncollectibleExperience.uncollectibleExperienceOverlay.memberButtonLabel",defaultMessage:"View workspace owner"})}(c),S=function(e){if(e)return(0,g.jsx)(d().Q,{iconGroup:i().i,variantName:"default",colorName:"primary"});return(0,g.jsx)(d().Q,{iconGroup:a()._,variantName:"default",colorName:"primary"})}(c);return{clickAction:v,ctaMessage:b,primaryMessage:m,secondaryMessage:f,ctaIcon:S,tooltipBodyMessage:c?b:f,isWorkspaceOwner:c,overdueInvoiceCount:n}}function h(e,t){(0,c().u4)({environment:t,event:{eventName:"subscription_uncollectible_blurred_experience_cta_clicked",eventProperties:{is_workspace_owner:e}}})}},546461:(e,t,n)=>{n.d(t,{EC:()=>A,To:()=>S,YC:()=>x,or:()=>h,u:()=>b});n(16280);var o=n(296540),r=()=>n(484714),i=()=>n(847249),a=()=>n(496506),s=()=>n(322867),l=()=>n(959013),d=()=>n(534177),c=()=>n(813297),u=()=>n(862292),p=()=>n(698331),m=()=>n(645873),f=()=>n(190019),y=()=>n(76190),g=n(474848);const v=new WeakMap,_=(0,o.createContext)({automationStore:void 0,contextType:void 0,defined:!1,typecheckResult:void 0});_.displayName="AutomationContext";function b(e){const{automationStore:t,children:n,contextType:o}=e,b=(0,r().v3)(),h=(0,l().tz)(),{value:S}=(0,m().fJ)(u().T.formulas),{value:A}=(0,m().fJ)(c().QV.automationTypecheck),x=(0,y().n)(t),M=(0,i().K8)((()=>{if(!S)return{error:new(s().N9)("Missing formulas dependency")};if(!A)return{error:new(s().N9)("Missing automation dependency")};const e=function(e){const{environment:t,automationStore:n,automationTypecheckModule:o,contextType:r,formulasModule:i,intl:s,isSubscribed:l}=e,c=v.get(n);if(c)return c;{const e=new(a().default)((()=>{const e=n.getTriggerType();let a=r;return(0,d().O9)(e)&&(0,p().x2)(e)&&(a=(0,p().H8)(e)),(0,f().Z)({environment:t,automationStore:n,automationTypecheckModule:o,contextType:a,formulasModule:i,intl:s,isSubscribed:l})}),{debugName:"automationContextTypecheckResultCachedStore"});return v.set(n,e),e}}({environment:b,automationStore:t,automationTypecheckModule:A,contextType:o,formulasModule:S,intl:h,isSubscribed:x});return e.state}),[b,t,A,o,S,h,x]);return(0,g.jsx)(_.Provider,{value:{automationStore:t,typecheckResult:M,contextType:o,defined:!0},children:n})}function h(e){const{automationStore:t,children:n}=e,o=(0,i().K8)((()=>{var e;return null===(e=t.getTrigger())||void 0===e?void 0:e.type}),[t]);return(0,g.jsx)(b,{automationStore:t,contextType:(0,p().H8)(o??"event"),children:n})}function S(e){var t;return null===(t=v.get(e))||void 0===t?void 0:t.state}function A(){const e=o.useContext(_);if(!1===e.defined)throw new Error("No automation context found!");return e}function x(){return o.useContext(_)}},599500:(e,t,n)=>{n.d(t,{g:()=>_});n(296540);var o=()=>n(484714),r=()=>n(847249),i=()=>n(401497),a=()=>n(101847),s=()=>n(959013),l=()=>n(100622),d=()=>n(704152),c=()=>n(460292),u=()=>n(554509),p=()=>n(859428),m=()=>n(640653),f=()=>n(58293),y=()=>n(962730),g=()=>n(10984),v=n(474848);function _(e){let{onClick:t,showIcon:n=!0}=e;const i=h(n),a=(0,o().v3)(),l=(0,f().r)(),c=(0,r().K8)((()=>l&&(0,m().GK)(a,l)),[a,l]),_=(0,r().K8)((()=>(0,g().AI)()),[]);return void 0===t?(0,v.jsx)("div",{style:{...i.badge,cursor:"default"},children:(0,v.jsx)(b,{showIcon:n})}):(0,v.jsx)(p().A,{placement:y().W.Bottom,style:i.tooltip,render:e=>(0,v.jsx)(d().A,{onClick:t,style:{...i.badge,cursor:"pointer"},hoveredStyle:i.badgeHover,pressedStyle:i.badgePressed,...e,children:(0,v.jsx)(b,{showIcon:n})}),renderTooltip:()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u().D,{styleName:"UISmall-12px/Medium",colorName:"contrastPrimary",children:(0,v.jsx)(s().sA,{id:"trialBadge.tooltip.title",defaultMessage:"{hasSpaceName, select, true {{spaceName}} other {Your workspace}} is on a free {planName, select, plus {Plus} business {Business} enterprise {Enterprise} other {}} trial",values:{hasSpaceName:Boolean(c),spaceName:c,planName:_}})}),(0,v.jsx)(u().D,{styleName:"UISmall-12px/Regular",colorName:"contrastSecondary",children:(0,v.jsx)(s().sA,{id:"trialBadge.tooltip.description",defaultMessage:"Click to learn more"})})]}),textWrap:!0})}function b(e){let{showIcon:t}=e;const n=h(t);return(0,v.jsxs)(v.Fragment,{children:[t?(0,v.jsx)("span",{style:n.giftIcon,children:(0,v.jsx)(c().Q,{iconGroup:a().T,variantName:"mini",colorName:"orangePrimary"})}):null,(0,v.jsx)(u().D,{styleName:"UISmall-12px/Medium",children:(0,v.jsx)(s().sA,{id:"trialBadge.title",defaultMessage:"Free trial"})})]})}function h(e){return(0,i().IS)((t=>({badge:{display:"flex",flexDirection:"row",gap:4,justifyContent:"center",alignItems:"center",color:t.icon.orangePrimary,background:t.fill.orangeSecondary,padding:e?"0px 6px 0px 4px":"0px 6px",height:e?22:20,borderRadius:6,width:"fit-content"},badgeHover:{background:l().XA[t.mode].orange[100]},badgePressed:{background:l().XA[t.mode].orange[200]},tooltip:{maxWidth:"240px",width:"max-content",display:"flex",padding:"4px 6px",flexDirection:"column",alignItems:"flex-start",gap:2,borderRadius:4},giftIcon:{paddingBottom:1}})),[e])}},601203:(e,t,n)=>{n.d(t,{Kz:()=>M,Qe:()=>b,dn:()=>h,gM:()=>I,jO:()=>S,qu:()=>A});n(898992),n(354520),n(581454);var o=()=>n(251111),r=()=>n(762433),i=()=>n(643819),a=()=>n(622963),s=()=>n(496603),l=()=>n(534177),d=()=>n(449506),c=()=>n(780054),u=()=>n(640653),p=()=>n(351360),m=()=>n(506090),f=()=>n(134217),y=()=>n(830140),g=()=>n(430395),v=()=>n(981046),_=()=>n(749240);async function b(e){var t;let{environment:n,billingData:i,billingInterval:s,vatId:c,addOn:y,onlyShowAddOn:g}=e;const b=m().A.state,h=_().subscriptionDataStoreInstance.state;if(!b.open||!h)return;const S=(null==i?void 0:i.address)??b.temporaryAddress;if(!(0,o().Z)(S))return;m().A.update((e=>({...e,calculatingTax:!0})));const A=s??b.temporaryBillingInterval??"year",M=y??b.addOnFeature,I=g??b.onlyShowAddOn,w=null===(t=p().default.state.currentSpaceStore)||void 0===t?void 0:t.id;if(!w)return;const T=await(0,u().Pu)({environment:n,spaceId:w})??1,{planAmount:P,promoInfo:C,accountBalance:k}=(0,f().TQ)({memberCount:T,promo:b.appliedPromo,currencyCode:v().A.selectedCurrencyCode,data:h,addOnFeature:M,onlyShowAddOn:I,subscriptionTier:b.subscriptionTier,taxAmount:b.taxAmount,calculatingTax:b.calculatingTax,billingInterval:A,coupon:b.coupon}),E=Math.max(0,P-C.amount+k),U=[b.subscriptionTier,b.addOnFeature].map((e=>{switch(e){case void 0:return;case"ai":case"sites_custom_hostnames":return e;default:return(0,a()._y)(e)}})).map((e=>{const t=v().A.getPrice(n,(t=>t.product===e&&t.billingInterval===s));return null==t?void 0:t.result})).map(x).filter(l().O9),B=await d().callApi({eventName:"calculateTax",environment:n,data:{address:S,lineItems:U,price:E,vatId:c??b.vatApplicable?b.temporaryVatCode:void 0,customerId:(0,r().Rz)(i)}});if("failed"===B.type)m().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=B.data;e.valid?m().A.update((t=>({...t,taxAmount:e.taxAmount,calculatingTax:!1,taxCalculationError:void 0}))):m().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function h(e,t){var n;const a=g().A.state,s=_().subscriptionDataStoreInstance.state;if(!a.open||!s)return;const l=a.temporaryAddress;if(!(0,o().Z)(l))return;g().A.update((e=>({...e,calculatingTax:!0})));const c=(null===(n=a.totalUpgradeCost)||void 0===n?void 0:n.amount)||0,u=await d().callApi({eventName:"calculateTax",environment:e,data:{address:l,price:c,vatId:a.vatApplicable?a.temporaryVatCode:void 0,customerId:(0,r().Rz)(t)}});if("failed"===u.type)g().A.update((e=>({...e,taxAmount:void 0,calculatingTax:!1})));else{const e=u.data;e.valid?g().A.update((t=>({...t,taxAmount:i().W.fromValue({amount:e.taxAmount,currencyCode:v().A.selectedCurrencyCode}),calculatingTax:!1,taxCalculationError:void 0}))):g().A.update((t=>({...t,taxAmount:void 0,calculatingTax:!1,taxCalculationError:e.error})))}}async function S(e){const{environment:t,priceForTaxCalculation:n,address:o,customerId:r,vatId:i}=e,a=y().A.state,s=await d().callApi({eventName:"calculateTax",environment:t,data:{address:o,customerId:r,vatId:i,price:n}});if("failed"===s.type);else{const e=s.data;e.valid&&a.open&&y().A.update((t=>({...t,tax:Math.max(0,e.taxAmount)})))}}async function A(e){const{environment:t,billingData:n,stripeData:i,taxableAmount:a,lineItems:s}=e,{address:l}=null!=n&&n.address?{address:null==n?void 0:n.address}:e,c=(null==i?void 0:i.vatId)??(n?(0,r().t_)(n,"vat"):void 0);if(!l||!(0,o().Z)(l))return;const u=(0,r().Rz)(n),p=await d().callApi({eventName:"calculateTax",environment:t,data:{address:l,price:a.amount,vatId:c,customerId:u,lineItems:s}});if("failed"===p.type)return;const m=p.data;return m.valid?m.taxAmount:void 0}function x(e){if(!e)return;if(void 0===e.unitAmount)return;const t=c().A.pricing[e.product];return"productId"in t?{amount:e.unitAmount.amount,productId:t.productId}:void 0}function M(e){const t=c().A.pricing[e.price.product];if("productId"in t)return{amount:e.price.unitAmount.amount*e.quantity,productId:t.productId}}function I(e){let{line:t,defaultProductId:n=c().A.pricing.plus.productId}=e;const o=(0,s().xu)(t.discount_amounts??[],"amount"),r=t.price?"string"==typeof(i=t.price.product)?i:i.id:n;var i;return{amount:t.amount-o,productId:r}}},640868:(e,t,n)=>{n.d(t,{U:()=>p});n(16280);var o=()=>n(31503),r=()=>n(454984),i=()=>n(688728),a=()=>n(475140),s=()=>n(789280),l=()=>n(778781),d=()=>n(751156),c=()=>n(204521),u=()=>n(658616);function p(e){let{environment:t,transaction:n,layoutStore:p,position:m,sessionId:f,beforePerformDeleteModule:y}=e;const g=p.getModules();if(!g)throw new Error("[deleteModuleAtPosition] modules by area not found for layout store");const v=(0,a().EX)(g,(e=>e.id===m.moduleId)),_=(0,o().Cg)({moduleId:null==v?void 0:v.module.id,modulesByArea:p.getModules()}).length;if(!v)return;const{module:b,position:h}=v;if(!(0,s().Fe)(b))throw new Error("[deleteModuleAtPosition] module to delete is not removeable");var S;(d().createAndCommitOrAppend({environment:t,transaction:n,canUndo:!0,perform(e){!function(e){const{transaction:t,layoutStore:n,moduleLocation:o,moduleToDelete:a,beforePerformDeleteModule:s}=e;s&&s(t);(0,l().V6)(a)&&(0,u().deleteViewsModuleDependencies)({layoutStore:n,viewsModule:a,transaction:t});if("form_conditional_modules"===o.area){const e=r().N4.removeChildModule({pointer:n.pointer,modulesByArea:n.getModules(),module:a});for(const o of e)d().applyOperation({transaction:t,store:n,operation:o})}else{const e="views_main_tab_modules"===o.area?{area:o.area,viewId:o.viewId}:{area:i().Zm[o.area]};d().applyOperation({transaction:t,store:n,operation:r().N4.deleteModuleInArea({...e,pointer:n.pointer,moduleId:a.id})})}}({environment:t,transaction:e,layoutStore:p,moduleLocation:h,moduleToDelete:b,beforePerformDeleteModule:y})},userAction:"pageLayout.deleteActions.deleteModuleAtPosition"}),f)&&c().PS({environment:t,module:b,sessionId:f,collectionId:null===(S=p.getCollectionModel())||void 0===S?void 0:S.id,layoutId:p.id,context:(0,i().We)(m.area),area:m.area,depth:_})}},658616:(e,t,n)=>{n.r(t),n.d(t,{deleteViewsModuleDependencies:()=>a});var o=()=>n(220719),r=()=>n(44729),i=()=>n(630116);function a(e){const{layoutStore:t,viewsModule:n,transaction:a}=e,s=(0,o().o9)(i().Bv.createChildStore(t,n.collection_view_block_pointer));r().zz({childStore:s,parentStore:t,transaction:a})}},698331:(e,t,n)=>{n.d(t,{$X:()=>i,H8:()=>a,x2:()=>r});var o=()=>n(534177);function r(e){return"event"===e||"recurrence"===e}function i(e){const t=e.getTrigger();return(0,o().O9)(t)&&r(t.type)}function a(e){return"event"===e?"event":"recurrence"===e?"recurrence":void(0,o().HB)(e)}},714300:(e,t,n)=>{n.d(t,{l:()=>l});var o=()=>n(484714),r=()=>n(847249),i=()=>n(176983),a=()=>n(596513),s=()=>n(324561);function l(e){let{spaceId:t}=e;const n=(0,o().v3)(),l=(0,i().J)();return(0,r().K8)((()=>{if(!t||!l)return;const e=a().t.getData(n,{spaceId:t});return(0,s().a9)(e)}),[n,t,l],{useDeepEqual:!0})}},725649:(e,t,n)=>{function o(e){return!(!e||"askUserToPick"in e)}function r(e){if(!e||!("askUserToPick"in e))return e}function i(e){return!(!e||!("askUserToPick"in e))&&e.askUserToPick}n.d(t,{DK:()=>r,K$:()=>o,j6:()=>i})},747671:(e,t,n)=>{n.d(t,{Q:()=>o,a:()=>r});let o=function(e){return e[e.Left=0]="Left",e[e.Right=1]="Right",e}({});class r extends(()=>n(757695))().default{getInitialState(){return{dayStoreMap:new Map,isDragging:!1,startingMonth:0}}}},789280:(e,t,n)=>{n.d(t,{Fe:()=>i,wm:()=>a});const o={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,relationsGroup:!0,formSubmit:!0,formQuestion:!0,formTitle:!0,placeholder:!0,transcript:!0,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,editor:!1,views:!0,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1},r={property_number:!0,property_title:!0,property_person:!0,property_file:!0,property_text:!0,property_checkbox:!0,property_url:!0,property_email:!0,property_phone_number:!0,property_created_by:!0,property_last_edited_by:!0,property_button:!0,property_select:!0,property_multi_select:!0,property_status:!0,property_date:!0,property_created_time:!0,property_last_edited_time:!0,property_last_visited_time:!0,property_relation:!0,property_rollup:!0,property_formula:!0,property_auto_increment_id:!0,property_location:!0,property_verification:!0,property_geo_point:!0,deleted_property:!1,formSubmit:!1,formQuestion:!1,formTitle:!1,placeholder:!1,transcript:!1,cover:!1,normalizedTitleWithIcon:!1,properties:!1,inlinePageSections:!1,expandedBacklinks:!1,discussions:!1,bottomControls:!1,relationsGroup:!0,editor:!1,views:!1,viewsMain:!1,recentActivity:!1,collaborators:!1,teamspaces:!1};function i(e){return o[e.type]}function a(e){return r[e.type]}},793565:(e,t,n)=>{n.d(t,{V:()=>r});n(296540);var o=n(474848);const r=(0,n(340498).wt)("settingsUpgrade",{viewBox:"0 0 20 20",svg:(0,o.jsx)("path",{d:"M9.969 17.938c4.36 0 7.969-3.618 7.969-7.97C17.938 5.61 14.32 2 9.96 2 5.609 2 2 5.61 2 9.969c0 4.351 3.617 7.969 7.969 7.969zm0-1.329a6.609 6.609 0 01-6.633-6.64 6.602 6.602 0 016.625-6.64 6.627 6.627 0 016.648 6.64 6.61 6.61 0 01-6.64 6.64zm0-2.734a.562.562 0 00.586-.586V9.383l-.063-1.656.797.945.922.937a.52.52 0 00.414.172c.32 0 .57-.242.57-.562a.566.566 0 00-.164-.406L10.43 6.219c-.149-.149-.29-.227-.461-.227-.164 0-.297.07-.453.227l-2.61 2.593a.555.555 0 00-.148.407c0 .32.242.562.562.562a.572.572 0 00.414-.172l.93-.937.781-.938-.062 1.649v3.906c0 .344.25.586.586.586z"})})},827774:(e,t,n)=>{n.d(t,{C:()=>f});n(898992),n(737550);var o=()=>n(244641),r=n(296540),i=()=>n(484714),a=()=>n(847249),s=()=>n(461946),l=()=>n(645873),d=()=>n(58293),c=()=>n(679616),u=()=>n(324561),p=()=>n(985315);const m={TrialModals:new(l().O2)("TrialModals",(()=>Promise.all([n.e(48779),n.e(24077),n.e(71677)]).then(n.bind(n,161163))))};function f(){const e=(0,i().v3)(),t=(0,d().r)(),n=(0,u()._3)({spaceId:null==t?void 0:t.id}),l=(0,p().g)({spaceId:null==t?void 0:t.id}),m=g("showTimedTrialInfoModal"),f=g("showTimedTrialCancelModal"),v=g("isSelfServeBusinessTrialsEnabled"),_=g("openSelfServeBusinessTrialExplorePlanModal"),b=g("openSelfServeBusinessTrialLossAversionModal"),h=(0,a().K8)((()=>null==v?void 0:v()),[v]);return{showTrialInfoModal:(0,r.useCallback)((e=>{let{openedFrom:t}=e;if(!h)return void(null==m||m({openedFrom:t}));const r=(null==n?void 0:n.clock.now)??o().c9.now();if(y(l,t)){const e=(0,s().BV)(l);if(!e)return;r>e.minus({days:s().$G})?c().uI({openedFrom:"plans_page",modalState:"initial"}):null==_||_()}else null==m||m({openedFrom:t})}),[h,null==n?void 0:n.clock.now,l,_,m]),showTrialCancelModal:(0,r.useCallback)((t=>{let{openedFrom:n,trialPlan:o}=t;h&&y(l,n)?null==b||b({openedFrom:n}):null==f||f({environment:e,trialPlan:o,openedFrom:n})}),[h,l,e,b,f])}}function y(e,t){return Boolean(null==e?void 0:e.some((e=>"trial"===e.offer.type&&"business"===e.offer.subscriptionTier&&("business_reverse"===e.offer.campaign||"stacked_business_trial"===e.offer.campaign))))}function g(e){var t;const n=(0,l().fJ)(m.TrialModals);return null==n||null===(t=n.value)||void 0===t?void 0:t[e]}},854418:(e,t,n)=>{n.d(t,{t:()=>a});var o=n(296540),r=()=>n(484714),i=()=>n(449506);function a(){const e=(0,r().v3)(),[t,n]=(0,o.useState)();return(0,o.useEffect)((()=>{!async function(){const t=await i().callApi({eventName:"getExternalOrgData",environment:e,data:{}});if("failed"===t.type)return;const o=t.data;n(o)}()}),[e]),t}},888325:(e,t,n)=>{function o(e){return`${e.table}:${e.id}`}n.d(t,{_:()=>o})},929468:(e,t,n)=>{n.d(t,{_:()=>o});const o=(0,n(340498).xh)("personCircle",{default:{loader:()=>n.e(89491).then(n.bind(n,989491))},small:{loader:()=>n.e(95357).then(n.bind(n,95357))},mini:{loader:()=>n.e(70891).then(n.bind(n,970891))},large:{loader:()=>n.e(49761).then(n.bind(n,649761))}})},987427:(e,t,n)=>{n.d(t,{W:()=>i});var o=n(296540),r=()=>n(854418);function i(){const e=(0,r().t)(),[t,n]=(0,o.useState)();return(0,o.useEffect)((()=>{n(!(!e||!("company_employee_count"in e))&&parseInt(e.company_employee_count)>99)}),[e]),t}}}]);