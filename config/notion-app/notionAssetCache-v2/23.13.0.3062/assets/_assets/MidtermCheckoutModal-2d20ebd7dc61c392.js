"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[75436],{275764:(e,t,i)=>{i.d(t,{G5:()=>u,Ux:()=>g,g3:()=>m,jn:()=>l,o2:()=>p});i(898992),i(581454),i(908872);var r=()=>i(484714),n=()=>i(187174),a=()=>i(643819),s=()=>i(786508),o=()=>i(166386),d=()=>i(449506),c=()=>i(134217);function l(e){const{items:t,promo:i}=e;return t.map((e=>e.price.getDiscountPerBillingInterval({quantity:e.quantity,promo:i}))).reduce(((e,t)=>e.plus(t)))}function u(e){const{items:t,coupon:i}=e,r=i?(0,o().Pz)((0,s().Pq)(i)):void 0;return t.map((e=>e.price.getCostPerBillingInterval({quantity:e.quantity,offer:r}))).reduce(((e,t)=>e.plus(t)))}function m(e){const{taxAmount:t,calculatingTax:i,currencyCode:r}=e,n=t&&!i?t:0;return new(a().W)(r,n)}function p(e,t){const i=Math.min(0,c().o2(e));return new(a().W)(t,-i)}function g(e){const t=(0,r().v3)(),[i]=(0,n().Yb)((async()=>{if(!e)return;const i=await d().callApi({eventName:"getPromoCode",environment:t,data:{code:e.code}});return"failed"!==i.type?i.data.promo:void 0}),[t,e]);return"resolved"===i.status?i.value:void 0}},560322:(e,t,i)=>{i.r(t),i.d(t,{MidtermCheckoutModal:()=>X});var r=i(296540),n=()=>i(484714),a=()=>i(847249),s=()=>i(762433),o=()=>i(47273),d=()=>i(107683),c=()=>i(38337),l=()=>i(807778),u=()=>i(10984),m=()=>i(527059),p=()=>i(183819),g=()=>i(749240),h=()=>i(72256),f=(i(898992),i(354520),i(581454),()=>i(401497)),x=()=>i(148307),v=()=>i(627090),y=()=>i(643819),b=()=>i(959013),S=()=>i(496603),j=()=>i(534177),I=()=>i(84817),A=()=>i(802790),w=()=>i(807683),M=()=>i(554509),D=()=>i(581495),P=()=>i(601203),C=()=>i(889173),T=()=>i(27716),N=()=>i(275764),E=()=>i(753735),L=()=>i(310212),B=()=>i(137826),k=()=>i(161165),U=()=>i(815418),F=()=>i(857639),K=()=>i(252105),O=()=>i(944609),R=()=>i(730764),W=()=>i(112527),q=()=>i(995604),z=()=>i(101118),_=i(474848);function G(e){let{desiredState:t,subscription:i,spaceStore:a,showTrialEndDisclaimer:s,modalId:d,primaryButtonText:c}=e;const l=(0,n().v3)(),u=(0,b().tz)(),[m,p]=r.useState(void 0),[g,f]=r.useState(!1);return(0,_.jsx)(z().i,{textAlign:"center",primaryButtons:[{buttonType:"primary",label:c??(0,_.jsx)(b().sA,{id:"subscriptionUpdateModal.confirmationButton",defaultMessage:"Confirm changes"}),onClick:async()=>{K().wD(l,{modalId:d}),f(!0);const e=await(0,W().getStripe)();if(!e)return(0,F().log)({level:"error",from:"MidtermCheckoutModal",type:"StripeError",error:{miscDataString:"Stripe elements not initialized when user tried to upgrade"}}),p(u.formatMessage({id:"spaceSubscriptionUpgradeModal.stripeNotLoaded",defaultMessage:"We could not reach our payment processor. Please reload the page or try again later."})),void f(!1);if((0,O().v4)({environment:l,currentState:i,desiredState:t})){if(!(await(0,q().Z)(l)))return void f(!1)}const r=await(0,U().F3)({environment:l,spaceStore:a,desiredState:t,stripe:e,intl:u});if(null!=r&&r.error)return p(r.error),void f(!1);(0,h().A)(l,d)},baseStyleOverride:{borderRadius:8},isDisabled:g,isLoading:g}],termsOfService:(0,_.jsx)(R().w,{products:(0,o().Fe)(t),showTrialEndDisclaimer:s}),error:m})}var Y=()=>i(997929);function H(e){let{from:t,desiredProducts:i,desiredInterval:d,billingData:c,subscription:u,subscriptionData:m,spaceStore:p,modalId:g,prices:h,useEnterpriseLimitedName:F}=e;const K=(0,n().v3)(),O=(0,f().IS)((()=>({headerImage:{width:49,height:52}})),[]),R=(0,f().DP)(),W=(0,s().Ry)(c)??"USD",q=(0,N().o2)(m,W),{desiredState:z,quantities:H,newItems:V}=(0,U().cP)({desiredProducts:i,desiredInterval:d,billingData:c,prices:h}),X=(0,r.useMemo)((()=>(0,U().Dd)(W,z)),[W,z]),Z=(0,r.useMemo)((()=>z.items.map(P().Kz).filter(j().O9)),[z.items]),{tax:J,isLoading:Q}=(0,U().Fy)({environment:K,currencyCode:W,address:c.address,lineItems:Z,taxableAmount:X,billingData:c}),{subtotal:$,lineItems:ee,isLoading:te}=(0,U().vF)({spaceStore:p,quantities:H,desiredState:z,currencyCode:W}),ie=(0,r.useMemo)((()=>ee&&(0,j().EI)(ee)?ee.map((e=>(0,P().gM)({line:e}))):[]),[ee]),{tax:re,isLoading:ne}=(0,U().Fy)({environment:K,currencyCode:W,address:c.address,lineItems:ie,taxableAmount:$??new(y().W)(W,0),billingData:c}),ae=(0,v().Cg)(h,c,z,H,{}),se=(0,E().Hj)(c,ae),oe=(0,U().Vq)({change:ae.subscription,interval:(0,o().yw)(z),currentPeriodEnd:u.currentPeriodEnd,now:c.clock.now}),de=(0,r.useMemo)((()=>(0,T().Sk)(c)?(0,S().Lc)(ae.subscription.immediate.items,u.items,"price.externalId"):V),[c,ae.subscription.immediate.items,u.items,V]),ce=i[0],le=!(0,T().Sk)(c)&&d!==(0,s().q8)(c),ue=(0,a().K8)((()=>(0,l().Le)()),[]),me=le?(0,U().eO)({interval:d,effectiveDate:(0,v().AL)(ae.subscription)?void 0:oe}):(0,k().P8)({from:t,product:ce,may13PackagingChangesEnabled:ue,useEnterpriseLimitedName:F}),pe=le?(0,_.jsx)(w().Ay,{src:"light"===R.mode?x().A.images.pricing.light.changeBillingPeriodPng:x().A.images.pricing.dark.changeBillingPeriodPng,style:O.headerImage}):(0,C().f)({headerContent:me,primaryProduct:ce}),[ge,he]=(0,r.useState)(!1);return(0,_.jsxs)(I().Y1,{gap:28,padding:"28px 32px",children:[(0,_.jsx)(L().K,{...me,title:(0,_.jsx)(M().D,{styleName:"Title-Large-26px/Bold",colorName:"primary",children:me.title}),image:pe}),(0,_.jsx)(B().I,{billingData:c}),(0,_.jsxs)(I().Y1,{gap:20,children:[(0,_.jsx)(A().A,{size:1}),(0,_.jsx)(Y().J,{immediate:{subtotal:$,tax:re,isLoading:ne||te},recurring:{subtotal:X,tax:J,isLoading:Q},nextBillingDate:oe,accountBalance:q,items:de,chargeType:(0,v().AL)(ae.subscription)?{chargeType:"immediate"}:{chargeType:"nextPeriod",periodEnd:oe},modalId:g,isExpanded:ge,setIsExpanded:he}),(0,_.jsx)(G,{desiredState:z,subscription:u,spaceStore:p,showTrialEndDisclaimer:se,modalId:g,primaryButtonText:le?void 0:(0,_.jsx)(b().sA,{id:"subscriptionUpgradeModal.upgradeButton.upgradeAi",defaultMessage:"Upgrade now"})})]}),(0,_.jsx)(D().Rz,{style:{top:16,right:16}})]})}var V=()=>i(644837);function X(e){let{spaceStore:t}=e;const i=(0,n().v3)(),r=(0,m().lh)({spaceId:t.id}),f=(0,p().q)(),x=(0,a().K8)((()=>(0,l().Le)()),[]),v=(0,u().RL)({salesStatus:f,packagingChangesEnabled:x}),y=(0,m().o2)(),b=(0,a().O$)(g().subscriptionDataStoreInstance),S=(0,a().K8)((()=>V().A.state),[]);if(!(r&&r.subscription&&S.open&&b&&0!==y.length))return null;const j=r.subscription,I=(0,s().lQ)(r),A=S.desiredProducts??(0,o().Fe)(I),w=S.desiredInterval??(0,o().yw)(I)??(0,o().yw)(j)??"month";return(0,_.jsx)(d().s,{ariaLabelledBy:c().Kvs,isOpen:!0,onDismiss:()=>(0,h().A)(i,S.modalId),animateSizeTransition:!1,areaConstraint:{width:{type:"min",length:480},height:{type:"unlimited",scroll:"allow"}},render:()=>(0,_.jsx)(H,{from:S.from,desiredProducts:A,desiredInterval:w,billingData:r,subscription:j,subscriptionData:b,spaceStore:t,modalId:S.modalId,prices:y,useEnterpriseLimitedName:v})})}},730764:(e,t,i)=>{i.d(t,{w:()=>b});i(898992),i(737550);var r=i(296540),n=()=>i(484714),a=()=>i(847249),s=()=>i(401497),o=()=>i(166386),d=()=>i(959013),c=()=>i(449506),l=()=>i(554509),u=()=>i(719147),m=()=>i(836251),p=()=>i(47170),g=()=>i(506090),h=()=>i(906195),f=()=>i(981046),x=()=>i(284371),v=i(474848);const y=function(){const e=(0,s().IS)((e=>({discountDescription:{alignItems:"center",color:e.text.secondary,fontSize:12,lineHeight:x().K_.UISmall.desktop}})),[]);return(0,v.jsx)("div",{style:e.discountDescription,children:(0,v.jsx)(d().sA,{id:"spaceSubscriptionSettings.orderOptions.estimatedPriceWarning",defaultMessage:"The final amount due may be impacted by prorations and member changes since your last invoice."})})};function b(e){const{products:t,showTrialEndDisclaimer:i,showProductTerms:r=!0}=e,n=(0,s().IS)((()=>({termsOfService:{display:"flex",flexDirection:"column",gap:12}})),[]),d=(0,a().K8)((()=>f().A.state.selectedCurrencyCode),[]),c=t.includes("ai"),u=t.some((e=>"ai"!==e)),m=void 0!==d&&"USD"!==d,p=(0,a().K8)((()=>{var e;return g().A.state.open?null===(e=g().A.state)||void 0===e?void 0:e.coupon:void 0}),[]),x=(0,h().D)()&&t.includes("plus")&&(0,o().u6)(p);return(0,v.jsx)(l().D,{styleName:"Body-12px/Regular",colorName:"secondary",children:(0,v.jsxs)("div",{style:n.termsOfService,children:[i?(0,v.jsx)(j,{}):null,r?(0,v.jsx)(S,{hasAi:c,hasPlan:u}):null,u&&x&&(0,v.jsx)(M,{}),m?(0,v.jsx)(D,{currencyCode:d}):null]})})}function S(e){let{hasAi:t,hasPlan:i}=e;return(0,v.jsxs)(v.Fragment,{children:[t&&!i?(0,v.jsx)(I,{}):null,t&&i?(0,v.jsx)(A,{}):null,!t&&i?(0,v.jsx)(w,{}):null]})}function j(){return(0,v.jsx)("div",{children:(0,v.jsx)(d().sA,{id:"spaceSubscriptionUpgradeModal.trialWillEndToday.message",defaultMessage:"Upgrading will end your trial and your workspace will be billed immediately."})})}function I(){const e=function(){const e=(0,n().v3)(),t=(0,p().O)(),[i,a]=(0,r.useState)();return(0,r.useEffect)((()=>{async function i(){var i;if(!t)return!1;const r=await c().callApi({eventName:"getSpaceMembershipUpdates",environment:e,data:{spaceId:t}});if("failed"===r.type)return!1;const n=!1===(null===(i=r.data[0])||void 0===i?void 0:i.isProcessed);a(!!n)}i()}),[e,t]),i}();return(0,v.jsxs)("div",{children:[(0,v.jsx)(d().sA,{id:"subscriptionUpgradeModal.confirmation.aiOnly",defaultMessage:"By continuing, you agree to the <aiTerms>Notion AI Product Specific Terms</aiTerms>.",values:{br:(0,v.jsx)("br",{}),aiTerms:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("ai.terms"),external:!0,children:e})}}),e?(0,v.jsx)(y,{}):null]})}function A(){return(0,v.jsx)("div",{children:(0,v.jsx)(d().sA,{id:"subscriptionUpgradeModal.confirmation.planWithAi",defaultMessage:"By continuing, you agree to the <terms>Notion Terms and Conditions</terms> and <aiTerms>Notion AI Product Specific Terms</aiTerms>.",values:{br:(0,v.jsx)("br",{}),terms:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("terms"),external:!0,children:e}),aiTerms:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("ai.terms"),external:!0,children:e})}})})}function w(){return(0,v.jsx)("div",{children:(0,v.jsx)(d().sA,{id:"subscriptionUpgradeModal.confirmation.planOnly",defaultMessage:"By continuing, you agree to the <terms>Notion Terms and Conditions</terms>.",values:{terms:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("terms"),external:!0,children:e})}})})}function M(){return(0,v.jsx)("div",{children:(0,v.jsx)(d().sA,{id:"subscriptionUpgradeModal.confirmation.planOnlyResurrection",defaultMessage:"Enjoy 50% off your first 3 months of billing, then standard rates apply. <learnMore>Learn more</learnMore>",values:{learnMore:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("resurrectionLearnMore"),external:!0,children:e})}})})}function D(e){return(0,v.jsx)("div",{children:(0,v.jsx)(d().sA,{id:"subscriptionUpgradeModal.confirmation.currencyRateWarning",defaultMessage:"<terms>Learn about FX rates</terms>. Rates will refresh throughout the billing period.",values:{terms:e=>(0,v.jsx)(u().A,{href:(0,m().xS)("terms.currency.fxRates"),external:!0,children:e})}})})}},889173:(e,t,i)=>{i.d(t,{f:()=>m});i(296540);var r=()=>i(148307),n=()=>i(401497),a=i(474848);function s(e){const{style:t,shadowVariant:i="strong",wrapStyle:r,imageSrc:s,variant:o="medium",alt:d,wrapWithPadding:c=!0}=e;let l=36;"medium"===o?l=36:"large"===o&&(l=48);const u=(0,n().IS)((e=>({faceImgWrap:{width:l,height:l,borderRadius:"100%",background:e.assistantCornerButtonBackground,..."strong"===i&&{boxShadow:e.shadowMD},..."light"===i&&{borderRadius:"50%",boxShadow:e.shadowSM},overflow:"hidden",...r},faceImg:{height:l,width:l,...c&&{pointerEvents:"none"},...t}})),[i,r,c,t,l]),m=(0,a.jsx)("img",{style:u.faceImg,src:s,alt:d});return c?(0,a.jsx)("div",{children:(0,a.jsx)("div",{style:u.faceImgWrap,children:m})}):m}var o=()=>i(200424);function d(){const e=(0,n().IS)((e=>({wrapper:{display:"inline-block",position:"relative",width:55,height:50,top:0,right:0},headset:{position:"absolute",width:16,objectFit:"cover",left:0,bottom:0},notionAIFace:{position:"absolute",top:0,right:0}})),[]);return(0,a.jsxs)("div",{style:e.wrapper,children:[(0,a.jsx)(s,{imageSrc:o(),variant:"large",alt:"Notion AI Meeting Notes Icon",style:e.notionAIFace,wrapStyle:e.notionAIFace}),(0,a.jsx)("img",{style:e.headset,src:r().A.images.subscriptions.meetingNotesSvg,alt:"Notion AI Meeting Notes Icon"})]})}function c(){const e=(0,n().IS)((e=>({wrapper:{display:"inline-block",position:"relative",width:52,height:52},mailIcon:{position:"absolute",width:24,objectFit:"cover",right:0,bottom:0}})),[]);return(0,a.jsxs)("div",{style:e.wrapper,children:[(0,a.jsx)(s,{imageSrc:o(),variant:"large",alt:"Notion AI Mail Icon"}),(0,a.jsx)("img",{style:e.mailIcon,src:r().A.images.subscriptions.notionAiMailSvg,alt:"Notion AI Mail Icon"})]})}var l=()=>i(938987),u=()=>i(558094);function m(e){const{headerContent:t,primaryProduct:i}=e;if("featureWithCustomImage"in t)switch(t.featureWithCustomImage){case"coreAI":case"aiConnectors":return(0,a.jsx)(l().cG,{variant:"medium_large"});case"meetingNotes":return(0,a.jsx)(d,{});case"researchMode":return(0,a.jsx)(s,{imageSrc:r().A.images.subscriptions.researchModeSvg,variant:"large",alt:"Notion Research Mode"});case"notionAIForMail":return(0,a.jsx)(c,{})}else if("ai"===i)return(0,a.jsx)(l().cG,{variant:"medium_large"});return(0,a.jsx)(u().X,{product:i})}},906195:(e,t,i)=>{i.d(t,{D:()=>f});var r=i(296540),n=()=>i(484714),a=()=>i(847249),s=()=>i(786508),o=()=>i(166386),d=()=>i(449506),c=()=>i(640653),l=()=>i(58293),u=()=>i(351360),m=()=>i(749356),p=()=>i(714300),g=()=>i(762433),h=()=>i(807778);function f(){const e=(0,n().v3)(),t=(0,l().r)(),i=null==t?void 0:t.id,f=(0,p().l)({spaceId:i}),[x,v]=(0,r.useState)(!1),{currentSpaceStore:y}=(0,a().K8)((()=>{const{currentSpaceStore:e}=u().default.state;return{currentSpaceStore:e}}),[]),b=(0,a().K8)((()=>y?(0,c().GK)(e,y):void 0),[y,e]),S=function(e){return(0,a().K8)((()=>(0,h().vv)()&&Boolean("free"===(0,g().AI)(e))),[e])}(f),j=(0,a().K8)((()=>null==t?void 0:t.canAdmin()),[t]);return(0,r.useEffect)((()=>{!async function(){if(S&&i&&j)try{const t=await d().callApi({eventName:"getCustomerOffer",environment:e,data:{spaceId:i,offerCampaign:"resurrection_offer"}});if("failed"===t.type)return;if("offer"in t.data){const i=(0,s().RS)(t.data.offer);(0,o().u6)(i)&&(v(!0),b&&(0,m().Zc)({environment:e,spaceName:b,offerCampaign:"resurrection_offer"}))}}catch(t){return}}()}),[e,i,S,b,j]),x}}}]);