"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[3476],{471095:(e,t,i)=>{i.r(t),i.d(t,{iconDefinition:()=>n,lockFillIcon:()=>r});i(296540);const n={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M6 5.95a4 4 0 1 1 8 0v1.433a2.426 2.426 0 0 1 2.025 2.392v5.4A2.425 2.425 0 0 1 13.6 17.6H6.4a2.425 2.425 0 0 1-2.425-2.425v-5.4c0-1.203.876-2.201 2.025-2.392zm6.75 1.4v-1.4a2.75 2.75 0 1 0-5.5 0v1.4zm-2.2 5.458a1.35 1.35 0 1 0-1.1 0v1.242a.55.55 0 0 0 1.1 0z"})},r=(0,i(340498).wt)("lockFill",n)},626466:(e,t,i)=>{i.r(t),i.d(t,{arrowChevronSingleDownFillIcon:()=>r,iconDefinition:()=>n});i(296540);const n={viewBox:"0 0 20 20",svg:(0,i(474848).jsx)("path",{d:"M9.381 13.619a.875.875 0 0 0 1.238 0l5.4-5.4A.875.875 0 1 0 14.78 6.98L10 11.763 5.219 6.98A.875.875 0 1 0 3.98 8.22z"})},r=(0,i(340498).wt)("arrowChevronSingleDownFill",n)},991293:(e,t,i)=>{i.d(t,{default:()=>Z});var n=i(296540),r=()=>i(484714),s=()=>i(847249),o=()=>i(401497),a=()=>i(284371),l=()=>i(696746),c=()=>i(351360),d=(i(898992),i(354520),i(581454),()=>i(959013)),u=()=>i(705540),h=()=>i(108944),x=()=>i(71304),g=()=>i(37433),m=()=>i(630116),v=()=>i(704152),p=()=>i(493823),f=()=>i(406699),b=()=>i(928600),j=()=>i(939740),M=()=>i(722872),y=()=>i(675811),w=i(474848);const k=function(e,t){return[{key:"results",render:e=>(0,w.jsx)(i(89924).A,{...e}),items:t.map(((t,n)=>({key:t.id,render:e=>(0,w.jsx)(i(958378).A,{...e,isSubpage:0!==n,store:t,hidePath:!0}),action:n=>{let{event:r}=n;const s=i(728611).Vr(r);t instanceof m().Bv&&i(857783).uK({environment:e,store:t,openInNew:s,visitType:i(211716).ig.Link,pageVisitSource:i(584262).y8.Breadcrumb})}})))}]};const S=function(e){const{isMobile:t,stores:n}=e,s=(0,r().v3)(),o={display:"flex",alignItems:"center",flexShrink:0};return(0,w.jsx)(f().Ay,{popupType:t?f().z7.SlideUp:f().z7.Popup,renderOrigin:e=>t?(0,w.jsxs)(v().A,{style:{...o},mobileFeedback:!0,...e,children:[(0,w.jsx)(y().f,{}),(0,w.jsx)("div",{style:{marginLeft:8,marginRight:8},children:"..."}),(0,w.jsx)(y().f,{})]}):(0,w.jsxs)("div",{style:o,children:[(0,w.jsx)(p().p,{size:"sm",...e,children:"..."}),(0,w.jsx)(y().f,{})]}),render:e=>{let r;return r=t?{menuType:M().gu.Modal,title:(0,w.jsx)(d().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),right:(0,w.jsx)(i(480095).DoneMenuText,{}),onClickRight:e.close}:{menuType:M().gu.Popup,width:240},(0,w.jsx)(b().A,{...r,children:(0,w.jsx)(j().Ay,{type:j().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:k(s,n)})})}})};var A=()=>i(906719),W=()=>i(565049);function C(e){const{ancestorMaxWidth:t,showDivider:i,store:n}=e;return n instanceof m().h4?(0,w.jsx)(W().A,{store:n,showDivider:i,maxWidth:t}):(0,w.jsx)(A().A,{store:n,showDivider:i,maxWidth:t})}function P(e){const{ancestorMaxWidth:t,isMobile:i,homeStore:o,store:a,maxAncestorCount:c}=e,v=(0,r().v3)(),p=(0,d().tz)(),[f,b]=(0,s().K8)((()=>{const e=h().fU(a);e.reverse();return[a.isNavigableBlock()?e.slice(0,-1):[...e],e]}),[a],{useDeepEqual:!0}),j=(0,s().K8)((()=>f.map((e=>(0,x().Qe)(e,p,v,!0)||(0,x().gG)(e,p)||""))),[v,p,f]);(0,n.useEffect)((()=>(u().setTabBreadcrumbs(j),()=>{u().setTabBreadcrumbs(void 0)})),[j]);const M=(0,s().K8)((()=>(0,l().Nh)(a.id)),[a]),y=(0,s().K8)((()=>(0,g().getActiveTeamCount)()>0),[]);if(M&&void 0!==o)return(0,w.jsx)(C,{ancestorMaxWidth:t,showDivider:f.length>0,store:o},o.id);if(f.length>c){const[e,n,r]=[f[0],f.slice(1,f.length-c+1),f.slice(f.length-c+1)];if(y)return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(C,{ancestorMaxWidth:t,showDivider:!i,store:e},e.id),(0,w.jsx)(S,{isMobile:i,stores:i?b:n},"pages-popup"),r.map((e=>e instanceof m().h4?(0,w.jsx)(W().A,{store:e,showDivider:!0,maxWidth:t},e.id):(0,w.jsx)(A().A,{store:e,showDivider:!0,maxWidth:t},e.id)))]});{const e=f.filter((e=>e instanceof m().Bv)),n=f.filter((e=>e instanceof m().Bv));return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(A().A,{store:e[0],showDivider:!i,maxWidth:t},e[0].id),(0,w.jsx)(S,{isMobile:i,stores:i?n:e.slice(1,e.length-c+1)},"pages-popup"),e.slice(e.length-c+1).map((e=>(0,w.jsx)(A().A,{store:e,showDivider:!0,maxWidth:t},e.id)))]})}}return(0,w.jsx)(w.Fragment,{children:f.map((e=>(0,w.jsx)(C,{ancestorMaxWidth:t,showDivider:!0,store:e},`${e.table}-${e.id}`)))})}var D=()=>i(989423);var B=()=>i(898286),R=()=>i(478726),I=()=>i(836251),_=()=>i(347199),K=()=>i(953418),T=()=>i(712505);const N=function(e){const{ancestorMaxWidth:t,ignoreMaxLength:n,showDivider:r,store:s}=e,a=(0,o().IS)((()=>({wrapper:{display:"flex",alignItems:"center",flexShrink:1,marginLeft:6,minWidth:0,maxWidth:n?void 0:"100%"}})),[n]);return(0,w.jsxs)("div",{style:a.wrapper,children:[(0,w.jsx)(i(20039).A,{store:s,maxWidth:t,ignoreMaxLength:n}),r&&(0,w.jsx)(y().f,{})]})};function z(e,t,i,n){return(0,s().K8)((()=>{const r=n.canEdit(),s=n.isNonEditableState(),o=n.getCollectionStore(),a=null==o?void 0:o.isSyncedCollection(),c=n.isExternalObjectInstancePageBlockStore(),d=(0,R().fc)(n);return(0,l().Nh)(n.id)||t||(0,I().w6)(e)||T().default.isCenterPeekOpen()||!i||!r||s||c||a||d}),[e,t,i,n])}function F(e,t,i,r){const s=z(e,t,i,r);return(0,n.useCallback)((()=>{if(s)return;const t=T().default.isCenterPeekOpen()?_().A.PeekViewScroller:_().A.PageScroller;if(t){const i=t.getNode();if(i&&!K().Np(i))return K().VG({element:i,environment:e,options:{top:0,behavior:"smooth"}}),void function(e){D().vd(e,"click_breadcrumb_current_page_scroll_to_top")}(e)}const n=i.current;if(!n)return;if(!(n instanceof Element))return;const o=n.getBoundingClientRect();B().U({blockStore:r,originRect:o}),function(e){D().vd(e,"open_breadcrumb_current_page_menu")}(e)}),[s,e,i,r])}function L(e,t){const{currentPageMaxWidth:n,isMobile:o,currentPageRef:a,store:l}=e,c=(0,r().v3)(),d=z(c,o,a,l),u=(0,s().K8)((()=>l.isEmptyPage()),[l]),h=(0,s().K8)((()=>l.getIcon()),[l]),x=o?24:20,g=F(c,o,a,l);return(0,w.jsxs)(p().p,{shouldShrink:!0,onClick:g,size:"sm",ref:t,disabled:d,children:[Boolean(h)&&(0,w.jsx)(i(614505).B,{disabled:!0,icon:h,isEmptyPage:u,size:x,style:{marginRight:6},largeIcon:!0}),(0,w.jsx)(i(16006).A,{store:l,style:{maxWidth:n},enableHover:!0})]})}const O=(0,n.forwardRef)(L);function U(e){const{ancestorMaxWidth:t,isMobile:i,currentPageRef:n,store:o}=e,a=(0,r().v3)(),{mobileNative:c}=a,d=(0,s().K8)((()=>(0,l().lU)(o)),[o]),u=F(a,i,n,o),x=(0,s().K8)((()=>{const e=h().fU(o);return 0===(o.isNavigableBlock()?e.slice(1):[...e]).length}),[o]);return d?null:i?(0,w.jsx)(p().p,{shouldShrink:!0,onClick:u,size:"sm",style:null!=c&&c.supportsNativeHomeOnPhone()?{paddingLeft:0}:void 0,children:(0,w.jsx)(N,{store:o,showDivider:!1,ignoreMaxLength:x,ancestorMaxWidth:t})}):(0,w.jsx)(p().p,{shouldShrink:!0,onClick:u,size:"sm",style:{fontSize:"inherit"},children:(0,w.jsx)(N,{store:o,showDivider:!1,ancestorMaxWidth:t})})}function E(e){const{ancestorMaxWidth:t,store:i}=e,o=(0,r().v3)(),a={display:"flex",alignItems:"center",flexShrink:0},l=(0,s().K8)((()=>{const e=h().fU(i);return e.reverse(),e}),[i]),c=(0,n.useCallback)((()=>{(0,D().u4)({environment:o,event:{eventName:"topbar_breadcrumb_menu_click",eventProperties:{has_parent_pages:l.length>1}}})}),[o,l]);return(0,w.jsx)(f().Ay,{popupType:f().z7.BottomSheet,bottomSheetInitialState:"half",onClick:c,renderOrigin:e=>(0,w.jsx)(v().A,{style:{...a,maxWidth:"100%"},mobileFeedback:!0,...e,children:(0,w.jsx)(N,{store:i,showDivider:!1,ignoreMaxLength:!0,ancestorMaxWidth:t})}),render:e=>(0,w.jsx)(b().A,{menuType:M().gu.Modal,title:(0,w.jsx)(d().sA,{defaultMessage:"Breadcrumb",id:"breadcrumb.mobileBreadcrumbMenu.title"}),children:(0,w.jsx)(j().Ay,{type:j().Oh.Vertical,onAccept:e.close,initialFocus:void 0,sections:k(o,l)})})},"pages-popup")}i(823215),i(737550);var V=i(440961),H=()=>i(626466),G=()=>i(471095),$=()=>i(68263),J=()=>i(95313),q=()=>i(750660),Q=()=>i(859428),X=()=>i(962730);function Y(e){const{store:t}=e,i=(0,r().v3)(),a=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state,n=(null==e?void 0:e.getPrivatePages(i))??[];return null==n?void 0:n.some((e=>e.id===t.id))}),[i,t]),l=(0,s().K8)((()=>{const e=i.currentUser.id;return t.getPermissionItems().every((t=>(0,$().B2)(t)&&e===t.user_id))}),[i,t]),u=(0,o().DP)(),h=(0,n.useRef)(null),x=(0,n.useCallback)((()=>{if(!h)return;const e=V.findDOMNode(h.current);if(!(e&&e instanceof Element))return;const n=e.getBoundingClientRect(),r=new DOMRect(n.x,n.y,n.width,n.height+5);J().D3(i),q().ho({environment:i,blocks:[t],originRect:r,moveToContext:"topbar_breadcrumb"})}),[i,h,t]);return a&&l?(0,w.jsx)(Q().A,{placement:X().W.Right,renderTooltip:e=>(0,w.jsxs)("div",{children:[(0,w.jsx)("div",{children:(0,w.jsx)(d().sA,{defaultMessage:"Only you have access",id:"breadcrumb.moveTo.hasPermission.title"})}),(0,w.jsx)("div",{style:{color:u.text.contrastSecondary},children:(0,w.jsx)(d().sA,{defaultMessage:"Click to move",id:"breadcrumb.moveTo.hasPermission.subtitle"})})]}),render:e=>(0,w.jsxs)(p().p,{size:"sm",disabled:!1,onClick:x,ref:h,...e,children:[(0,G().lockFillIcon)({width:16,fill:u.lightIconColor}),(0,w.jsx)("span",{style:{color:u.text.tertiary,marginLeft:4,marginRight:5},children:(0,w.jsx)(d().sA,{defaultMessage:"Private",id:"breadcrumb.moveTo.privatePages"})}),(0,H().arrowChevronSingleDownFillIcon)({width:11,fill:u.lightIconColor})]})}):null}const Z=function(e){const{ancestorMaxWidth:t,maxAncestorCount:d,currentPageMaxWidth:u,isMobile:h,showCurrentPageControls:x,store:g,style:m}=e,v=(0,n.useRef)(null),p=(0,r().v3)(),f=(0,o().IS)((()=>({container:{display:"flex",alignItems:"center",lineHeight:1.2,fontSize:h?a().J.UIRegular.mobile:a().J.UIRegular.desktop,...m},enforceMaxLength:{maxWidth:"100%"}})),[h,m]),b=(0,s().K8)((()=>{var e;return Boolean(null===(e=g.getTitleStore())||void 0===e?void 0:e.isReady())}),[g]),j=(0,s().K8)((()=>{const{currentSpaceViewStore:e}=c().default.state;let t;return e&&e.isReady()&&(t=(0,l().x$)(e)),t}),[]),M=(0,s().K8)((()=>!(0,l().lU)(g)&&x&&g.isReady()),[x,g]),y=(0,s().K8)((()=>{var e;return null===(e=p.mobileNative)||void 0===e?void 0:e.supportsNativeHomeOnPhone()}),[p]);return(0,s().K8)((()=>{var e;if(Boolean(p.currentUser.isLoggedIn()||p.publicDomainUserId))return!1;const t=i(578872).GN(g),n=p.RouterStore.state.route;return!(!(0,i(861017).bh)(n)||(null==t?void 0:t.id)!==g.id)||(null==t||null===(e=t.getSiteStore())||void 0===e||null===(e=e.getHeader())||void 0===e?void 0:e.hideBreadcrumbs)}),[p,g])?null:b?y?(0,w.jsx)("div",{style:{...f.container,...f.enforceMaxLength},className:"notranslate",children:(0,w.jsx)(E,{store:g,ancestorMaxWidth:t})}):(0,w.jsxs)("div",{style:f.container,className:"notranslate shadow-cursor-breadcrumb",children:[(0,w.jsx)(P,{ancestorMaxWidth:t,maxAncestorCount:d,isMobile:h,homeStore:j,store:g}),M?(0,w.jsx)(O,{currentPageMaxWidth:u,isMobile:h,currentPageRef:v,ref:v,store:g}):(0,w.jsx)(U,{ancestorMaxWidth:t,isMobile:h,currentPageRef:v,store:g}),(0,w.jsx)(Y,{store:g})]}):null}}}]);