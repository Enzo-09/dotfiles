"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[49157,84176],{21735:(e,t,o)=>{o.d(t,{A:()=>r});class n extends(()=>o(757695))().default{getInitialState(){return{shouldUseEdgeCache:!1}}}const i=new n;o(604341).exposeDebugValue("EdgeCacheStore",i);const r=i},22394:(e,t,o)=>{o.d(t,{o:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("circleCheck",{viewBox:"0 0 12 12",svg:(0,n.jsx)("path",{d:"M6.09277 11.1855C8.88574 11.1855 11.1855 8.88574 11.1855 6.09277C11.1855 3.30469 8.88086 1 6.08789 1C3.2998 1 1 3.30469 1 6.09277C1 8.88574 3.2998 11.1855 6.09277 11.1855ZM6.09277 10.0674C3.89062 10.0674 2.12305 8.29492 2.12305 6.09277C2.12305 3.89062 3.88574 2.11816 6.08789 2.11816C8.29492 2.11816 10.0625 3.89062 10.0674 6.09277C10.0723 8.29492 8.29492 10.0674 6.09277 10.0674ZM5.57031 8.41699C5.75586 8.41699 5.92188 8.31934 6.0293 8.15332L8.17773 4.81836C8.24609 4.71094 8.2998 4.58887 8.2998 4.47656C8.2998 4.21289 8.07031 4.03711 7.82129 4.03711C7.66016 4.03711 7.51855 4.125 7.41113 4.30078L5.55566 7.2793L4.68652 6.19043C4.56934 6.03906 4.44727 5.98047 4.2959 5.98047C4.03711 5.98047 3.82715 6.18555 3.82715 6.44922C3.82715 6.57129 3.87598 6.68359 3.96387 6.7959L5.0918 8.1582C5.22852 8.3291 5.37988 8.41699 5.57031 8.41699Z"})})},63467:(e,t,o)=>{o.d(t,{y:()=>c});var n=()=>o(637997),i=()=>o(267419);const r={ko:()=>o.e(2268).then(o.bind(o,224434)),es:()=>o.e(95264).then(o.bind(o,196425)),de:()=>o.e(35390).then(o.bind(o,653703)),fr:()=>o.e(3272).then(o.bind(o,94677)),pt:()=>o.e(27315).then(o.bind(o,766869)),zh:()=>o.e(69945).then(o.bind(o,516814)),ja:()=>o.e(77757).then(o.bind(o,824432)),da:()=>o.e(9423).then(o.bind(o,440761)),fi:()=>o.e(59337).then(o.bind(o,462135)),nb:()=>o.e(2040).then(o.bind(o,937314)),nl:()=>o.e(51106).then(o.bind(o,530897)),sv:()=>o.e(53631).then(o.bind(o,895222))};let a=!1,s=!1;async function l(e){for(const[o,i]of Object.entries(e.emojiLocaleKeywords)){var t;n().fB[o]={...n().fB[o],keywords:[...i,...(null===(t=n().fB[o])||void 0===t?void 0:t.keywords)||[]]}}await i().A.waitUntilLoaded(),i().A.update((t=>{let{emojiByName:o,...n}=t;return{...n,emojiByName:{...o,...e.emojiByName}}}))}async function d(){if(a)return;const[e]=o(662303).locale.split("-");e in r&&(await l(await r[e]()),a=!0)}const c=(0,o(279900).A)((async()=>{await async function(){s||(await l(await o.e(51872).then(o.bind(o,443716))),s=!0)}(),await d()}))},123133:(e,t,o)=>{o.d(t,{F:()=>c});var n=()=>o(912433),i=(o(296540),()=>o(401497)),r=()=>o(284371),a=()=>o(758740),s=()=>o(128336),l=()=>o(124056),d=o(474848);function c(e){const{geoPoint:t,zoom:o=15}=e,c=(0,i().IS)((e=>({addressLink:{color:e.text.secondary,paddingLeft:10,paddingRight:10,paddingBottom:8,fontSize:r().J.UISmall.desktop,cursor:"pointer"}})),[]);return(0,d.jsxs)("div",{style:{width:"100%",height:"200px"},children:[(0,d.jsx)(a().A,{style:c.addressLink,disabled:Boolean(!t.address),href:t.mapUri??"",external:!0,children:t.address}),(0,d.jsx)(l().S,{initialViewState:{longitude:t.lon,latitude:t.lat,zoom:o},dragRotate:!1,scrollZoom:!1,attributionControl:!1,children:(0,d.jsx)(n().pH,{longitude:t.lon,latitude:t.lat,anchor:"bottom",children:(0,d.jsx)(s().s,{})})})]})}},124056:(e,t,o)=>{o.d(t,{S:()=>r});var n=o(296540),i=o(474848);const r=n.forwardRef((function(e,t){const n="dark"===(0,o(401497).eP)();return(0,i.jsx)(o(912433).T5,{ref:t,mapStyle:n?"https://tiles.openfreemap.org/styles/dark":"https://tiles.openfreemap.org/styles/liberty",...e})}))},128336:(e,t,o)=>{o.d(t,{s:()=>r});o(296540);var n=()=>o(401497),i=o(474848);function r(){const e=(0,n().IS)((e=>({markerWrapper:{filter:"drop-shadow(0px 1px 6px rgba(0,0,0,0.35))"}})),[]);return(0,i.jsx)("svg",{style:e.markerWrapper,xmlns:"http://www.w3.org/2000/svg",width:"20",height:"26",viewBox:"0 0 20 26",fill:"none",children:(0,i.jsx)("path",{d:"M10 1C14.9706 1 19 5.02944 19 10C19 12.3789 17.4727 14.8818 15.3408 17.5752C14.2851 18.909 13.1605 20.1965 12.0576 21.5293C11.3314 22.4069 10.6256 23.2945 10 24.1807C9.37437 23.2945 8.66859 22.4069 7.94238 21.5293C6.83952 20.1965 5.71493 18.909 4.65918 17.5752C2.52725 14.8818 1 12.3789 1 10C1 5.02944 5.02944 1 10 1Z",fill:"#2383E2",stroke:"white",strokeWidth:"2"})})}},213799:(e,t,o)=>{o.d(t,{A:()=>w});o(581454);var n=o(296540),i=()=>o(17022),r=()=>o(484714),a=()=>o(847249),s=()=>o(401497),l=()=>o(919709),d=()=>o(959013),c=()=>o(100622),u=()=>o(284371),p=()=>o(21869),g=()=>o(906590),h=()=>o(482287),m=()=>o(722872),f=()=>o(77272),y=()=>o(24157),b=()=>o(491073),v=()=>o(406699),x=()=>o(928600),C=()=>o(939740),S=()=>o(480095),k=()=>o(89924),A=o(474848);const M=n.Fragment;function j(e){let{parent:t,shouldShowUpdatedColorPicker:o,textSelectionColor:l,backgroundSelectionColor:u}=e;const y=(0,r().v3)(),{isMobile:v}=y.device,[M,j]=(0,n.useState)((()=>i().A.withListenerIgnored((()=>f().A.state.recentlyUsedColors)))),w=(0,n.useCallback)((e=>{g().Q(e,!o),h().po({environment:y,annotation:["h",f().A.getMostRecentlyUsedColor()]}),(0,p().s)(y,{action:"h",color:f().A.getMostRecentlyUsedColor()})}),[y,o]),I=(0,n.useCallback)(((e,t,n,i)=>({key:t||e,action:()=>{w(e),v&&n.close()},render:n=>(0,A.jsx)(b().Ay,{...n,color:e,overrideDisplayName:t,selected:i,shouldShowUpdatedColorPicker:o})})),[w,o,v]);let T;T=v?{menuType:m().gu.Modal,title:(0,A.jsx)(d().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:(0,A.jsx)(S().CancelMenuText,{}),onClickRight:()=>{t.close()}}:o?{menuType:m().gu.Popup,width:190}:{menuType:m().gu.Popup,width:220};const P=M.map((e=>I(e,void 0,t,!1))),R=(0,a().K8)((()=>f().A.getMostRecentlyUsedColor()),[]),O=c().N.map((e=>I(e,void 0,t,l||u?e===l:"default"===e))),B=c().AQ.map((e=>I(e,void 0,t,e===u))),F=(0,s().IS)((e=>({blockColorMenuItemContainer:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:4,paddingTop:0,paddingBottom:0,paddingLeft:8,paddingRight:8},sectionMenuItemOverride:{display:"block"}})),[]);return(0,A.jsx)(x().A,{...T,children:(0,A.jsx)(C().Ay,{type:C().Oh.Vertical,sections:[{key:0,items:o?P:[{key:0,action:()=>{w(R),v&&t.close()},render:e=>(0,A.jsx)(b().Ay,{...e,color:R,shortcuts:["toggleHighlight"]})}],render:e=>(0,A.jsx)(k().A,{...e,title:(0,A.jsx)(d().sA,{defaultMessage:"Recently used",id:"highlightSelectionButton.lastUsedSection.label"}),desktopStyle:F.sectionMenuItemOverride,children:o?(0,A.jsx)("div",{style:F.blockColorMenuItemContainer,children:e.children}):e.children})},{key:1,items:O,render:e=>(0,A.jsx)(k().A,{...e,title:(0,A.jsx)(d().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.colorSection.label"}),desktopStyle:F.sectionMenuItemOverride,children:o?(0,A.jsx)("div",{style:F.blockColorMenuItemContainer,children:e.children}):e.children})},{key:2,items:B,render:e=>(0,A.jsx)(k().A,{...e,title:(0,A.jsx)(d().sA,{defaultMessage:"Background color",id:"highlightSelectionButton.backgroundSection.label"}),desktopStyle:F.sectionMenuItemOverride,children:o?(0,A.jsx)("div",{style:{...F.blockColorMenuItemContainer,paddingBottom:8},children:e.children}):e.children})}],initialFocus:void 0})})}const w=function(e){const{disabled:t,style:i,blockStore:g}=e,h=(0,r().v3)(),m=(0,s().DP)(),f=(0,n.useCallback)((e=>{(0,p().s)(h,{action:"h"})}),[h]),x=(0,n.useCallback)((()=>{y().default.emit()}),[]),C=(0,o(963589).X)("updated_color_picker")&&!h.device.isMobile,{textSelectionColor:S,backgroundSelectionColor:k}=(0,a().K8)((()=>{if("editing"!==y().default.state.mode)return{textSelectionColor:void 0,backgroundSelectionColor:void 0};const e=(0,o(792002).x7)(["hf","hb"],y().default.state.multiSelection,y().default.state.forceExtendAnnotations),t=e.hf,n=e.hb;let i="default",r="default_background";if(t&&l().YuY(t))i=l().uIc(t);else if(g){const{block_color:e}=g.getFormat();e&&c().N.includes(e)&&(i=e)}return n&&l().YuY(n)&&(r=l().uIc(n)),{textSelectionColor:i,backgroundSelectionColor:r}}),[g]),w=(0,s().IS)((e=>{const t=(0,c().D$)(S??"default",e),o=(0,c().D$)(k??"default_background",e),n="default"!==S||void 0===o.background?t:o,i=(0,b().Nc)(k??"default_background",!1,e);return{colorIcon:{display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2,...!h.device.isMobile&&{width:18,fontWeight:u().Wy.medium,marginBottom:2},...o,...t},colorIconCircle:C?{display:"inline-flex",alignItems:"center",justifyContent:"center",width:24,height:24,textAlign:"center",padding:8,margin:0,fontSize:16,borderRadius:6,fontWeight:u().Wy.medium,color:t.color,background:o.background,boxShadow:(0,b().Yr)(i,!1)}:{width:16,height:16,borderRadius:8,background:n.color??n.fill??n.background}}}),[S,k,h.device.isMobile,C]);return(0,A.jsx)(v().Ay,{popupType:h.device.isMobile?v().z7.SlideUp:v().z7.Popup,originGap:4,onClose:x,onClick:f,renderOrigin:e=>(0,A.jsx)(o(859428).A,{renderTooltip:()=>(0,A.jsxs)(M,{children:[(0,A.jsx)("div",{children:(0,A.jsx)(d().sA,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})}),(0,A.jsx)("div",{children:(0,A.jsx)(o(35392).A,{style:{color:m.text.contrastSecondary},name:"toggleHighlight"})})]}),render:n=>(0,A.jsxs)(o(704152).A,{style:{display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap",borderRadius:6,...i},disabled:t,disabledFeedback:t,...(0,o(553965).A)(e,n),children:[h.device.isMobile?(0,A.jsx)("div",{style:w.colorIcon,children:(0,A.jsx)(d().sA,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"})}):(0,A.jsx)("div",{style:w.colorIconCircle,children:C?"A":""}),(0,o(668725).b)({width:10,marginLeft:4,fill:"dark"===m.mode?c().Ay.white:m.lightIconColor})]})}),render:e=>(0,A.jsx)(j,{parent:e,shouldShowUpdatedColorPicker:C,textSelectionColor:S,backgroundSelectionColor:k})})}},236228:(e,t,o)=>{o.d(t,{A:()=>a});var n=o(296540),i=()=>o(847249),r=o(474848);const a=function(e){const{disabled:t,type:a,tooltipLabel:s,children:l,style:d,onClick:c}=e,u=(0,o(484714).v3)(),p=(0,n.useCallback)((e=>{a!==o(919709).Ifu.TemporarySuggestionUnderline&&(o(482287).po({environment:u,annotation:[a]}),c&&c(),(0,o(21869).s)(u,{action:a}))}),[u,a,c]),g=(0,i().K8)((()=>t||"editing"!==o(24157).default.state.mode),[t]),h=(0,i().K8)((()=>Boolean((0,o(792002).B1)(a))),[a]),m=(0,o(401497).IS)((e=>({button:{display:"flex",alignItems:"center",fill:h?e.icon.uiBluePrimary:e.icon.primary,borderRadius:6,height:28,width:28,padding:6,...d}})),[h,d]);return(0,r.jsx)(o(859428).A,{renderTooltip:()=>s,render:e=>(0,r.jsx)(o(704152).A,{style:m.button,disabled:g,disabledFeedback:g,onClick:p,...e,children:l})})}},240562:(e,t,o)=>{o.d(t,{p:()=>r});var n=()=>o(645873);const i=new(n().O2)("HelpButtonContent",(async()=>await o.e(42481).then(o.bind(o,101107)))),r=(0,n()._h)(i,(e=>e.HelpButtonContent))},249696:(e,t,o)=>{o.d(t,{W:()=>r});var n=()=>o(847249),i=()=>o(540144);function r(){return(0,n().K8)((()=>(0,i().M5)()),[])}},271084:(e,t,o)=>{o.d(t,{k:()=>i});o(581454);class n extends(()=>o(757695))().default{getInitialState(){}waitUntilLoaded(){return this.waitUntil((()=>Boolean(this.state)))}getSortedUserIds(){return Object.entries(this.state||{}).sort(((e,t)=>{let[o,n]=e,[i,r]=t;return r-n})).map((e=>{let[t,o]=e;return t}))}}const i=new n;(0,o(604341).exposeDebugValue)("UserSimilarityStore",i)},279900:(e,t,o)=>{function n(e){let t,o,n;return async function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t?(n=r,o||(o=t.then((()=>(o=void 0,t=e(...n),t))),o)):(t=e(...r),t)}}o.d(t,{A:()=>n})},352759:(e,t,o)=>{o.d(t,{p:()=>b,t:()=>v});o(581454),o(296540);var n=()=>o(484714),i=()=>o(847249),r=()=>o(584262),a=()=>o(959013),s=()=>o(857783),l=()=>o(255018),d=()=>o(939740),c=()=>o(958378),u=()=>o(89924),p=()=>o(900967),g=()=>o(728611),h=()=>o(211716),m=()=>o(592968),f=()=>o(551619),y=o(474848);function b(e){let{store:t}=e;return(0,y.jsx)("div",{style:{width:"100%",maxWidth:"100%",margin:"0 auto 6px auto"},onMouseDown:f().NV,onClick:f().sx,children:(0,y.jsx)(l().A,{type:"page",store:t,headerText:(0,y.jsx)(a().sA,{defaultMessage:"Linked to this page",id:"page.expandedBacklinks.label"}),disableCurrentPageToken:!0,disableInaccessiblePages:!0})})}function v(e){let{store:t}=e;const o=(0,n().v3)(),a=(0,i().K8)((()=>(0,p().c)(t,o)),[t,o]),l=(0,i().K8)((()=>a.backlinks.map((e=>e.backlinkStore))),[a]).map(((e,t)=>({key:e.id,render:t=>(0,y.jsx)(c().A,{...t,store:e,hidePath:!1}),action:t=>{let{event:n}=t;m().F.setState({isOpen:!1});const i=g().Vr(n);s().uK({environment:o,store:e,openInNew:i,visitType:h().ig.Link,pageVisitSource:r().y8.Backlinks})}})));return(0,y.jsx)(d().Ay,{type:d().Oh.Vertical,initialFocus:void 0,sections:[{key:"all",items:l,render:e=>(0,y.jsx)(u().A,{...e})}]})}},413267:(e,t,o)=>{o.d(t,{b:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("thinCheck",{viewBox:"0 0 16 16",svg:(0,n.jsx)("path",{d:"M6.385 14.162c.362 0 .642-.15.84-.444L13.652 3.71c.144-.226.205-.417.205-.602 0-.485-.341-.82-.833-.82-.335 0-.54.123-.746.444l-5.926 9.4-3.042-3.903c-.205-.267-.417-.376-.718-.376-.492 0-.848.348-.848.827 0 .212.075.417.253.629l3.541 4.416c.24.3.492.437.848.437z"})})},454531:(e,t,o)=>{o.d(t,{W:()=>g});var n=()=>o(972435),i=()=>o(867772),r=()=>o(681810),a=()=>o(901389),s=()=>o(896628),l=()=>o(383594),d=()=>o(751156),c=()=>o(892632);const u=1500,p=(0,o(959013).YK)({pageCover:{defaultMessage:"Page cover",id:"pageCover.title"},fileTypeCaption:{defaultMessage:"Images wider than {idealImageWidth} pixels work best.",id:"pageCover.fileType.caption"},uploadFailed:{defaultMessage:"Upload failed",id:"pageCover.errorDialogMessage.uploadFailed"},preparing:{defaultMessage:"Preparing...",id:"pageCover.status.preparing"},downloading:{defaultMessage:"Downloading...",id:"pageCover.status.downloading"},embedTitle:{defaultMessage:"Link",id:"pageCover.embedType.title"},embedPlaceholder:{defaultMessage:"Paste an image linkâ€¦",id:"pageCover.embedType.placeholder"},embedCaption:{defaultMessage:"Works with any image from the web.",id:"pageCover.embedType.caption"},embedSubmit:{defaultMessage:"Submit",id:"pageCover.embedType.buttonText"}});function g(e){let{environment:t,intl:o,store:n,rect:i}=e;l().W(t,{originGap:3,originRect:i,isSmallWidth:!1,popupWidth:540,maxHeight:485,title:o.formatMessage(p.pageCover),onDelete:()=>{!function(e){let{environment:t,store:o}=e;l().I(),d().createAndCommit({userAction:"PageCover.handleDelete",environment:t,canUndo:!0,perform:e=>{s().PT({store:o,transaction:e})}})}({environment:t,store:n})},currentTab:"gallery",tabs:[{type:"gallery",onChange:e=>{let{url:o,position:i}=e;m({environment:t,store:n,url:{originUrl:o},position:i})}},{type:"file",fileUpload:!1,imageUpload:!0,videoUpload:!1,caption:o.formatMessage(p.fileTypeCaption,{idealImageWidth:u}),onUpload:e=>{var i;l().I(),c().QM({environment:t,file:e[0],bucket:"secure",record:(null===(i=n.getCoverStore())||void 0===i?void 0:i.pointer)??n.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:f,onProgress:y,onComplete:e=>{var o;o={environment:t,store:n,url:{originUrl:e}},h({...o,position:.5})},onError:()=>{a().f1(o.formatMessage(p.uploadFailed))}})}},{type:"embed",title:o.formatMessage(p.embedTitle),inputPlaceholder:o.formatMessage(p.embedPlaceholder),caption:o.formatMessage(p.embedCaption),buttonText:o.formatMessage(p.embedSubmit),onChange:e=>{var o;o={environment:t,store:n,url:e},h({...o,position:.5}),l().I()}},{type:"unsplash",onChange:e=>{let{url:o,position:i}=e;m({environment:t,store:n,url:{originUrl:o},position:i})}}]})}async function h(e){const{environment:t,store:o,url:a,position:l}=e,{serverCommitResult:c}=d().createAndCommit({userAction:"PageCover.updatePageCover",environment:t,canUndo:!0,perform:e=>{s().fg({store:o,url:a,position:l||.5,transaction:e})}});await c,r().A.state.loadingMode===i().vS&&r().A.setState({loadingMode:i().Gi,dataURL:r().A.state.dataURL,uploadProgress:t.device.isMobileNative?void 0:100,progressText:n().A.formatMessage(p.downloading)})}function m(e){h(e),e.environment.device.isMobile&&l().I()}function f(e){const{file:t,name:o,size:a}=e;if(l().I(),r().A.setState({loadingMode:i().Wc,file:t,name:o,size:a}),t.type.indexOf("image")>=0)if(t instanceof File){const e=new FileReader;e.onload=e=>{r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,uploadProgress:0,dataURL:e.target.result})},e.readAsDataURL(t)}else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,dataURL:t.dataURL,progressText:n().A.formatMessage(p.preparing)});else r().A.state.loadingMode===i().Wc&&r().A.setState({...r().A.state,loadingMode:i().vS,progressText:n().A.formatMessage(p.preparing)})}function y(e){const{progressPercent:t,progressText:o}=e;r().A.state.loadingMode===i().vS&&r().A.setState({...r().A.state,uploadProgress:t,progressText:o})}},544862:(e,t,o)=>{o.d(t,{A:()=>A});var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(959013),s=()=>o(896628),l=()=>o(454531),d=()=>o(751156),c=()=>o(600871),u=()=>o(478726),p=()=>o(227440),g=()=>o(867772),h=()=>o(681810),m=()=>o(608581),f=()=>o(145214),y=()=>o(704152),b=()=>o(807683),v=()=>o(401497),x=()=>o(534177),C=o(474848);function S(e){let{src:t,placeholderSrc:o,placeholderBehavior:i,imageStyle:r,containerStyle:a,onLoadComplete:s,testId:l}=e;const[d,c]=(0,n.useState)(!0);let u;switch(i){case"force-show-placeholder":u=!0;break;case"force-show-src":u=!1;break;case"show-placeholder-if-loading-src":u=!!o&&(d||void 0===t);break;default:(0,x().HB)(i)}const p=(0,v().IS)((()=>{const e={gridColumn:1,gridRow:1};return{container:{display:"grid",...a},srcWrapper:{...u&&{display:"none"},...e},placeholderWrapper:{pointerEvents:"none",...e}}}),[a,u]);(0,n.useEffect)((()=>{void 0!==t&&c(!0)}),[t]);const g=(0,n.useCallback)((e=>{c(!1),null==s||s()}),[s]);return(0,C.jsxs)("div",{style:p.container,children:[(0,C.jsx)(b().Ay,{src:t,onLoad:g,style:r,placeholderStyle:p.srcWrapper,placeholderLoadedStyle:p.srcWrapper,testId:l}),o&&(0,C.jsx)(b().Ay,{src:o,style:r,placeholderStyle:p.placeholderWrapper,placeholderLoadedStyle:p.placeholderWrapper})]})}var k=()=>o(24611);const A=function(e){let{store:t,disabled:a,paddingRight:l,paddingLeft:c,height:u,proxyWidth:p}=e;const m=(0,i().v3)(),f=(0,r().uB)(void 0,o(454305).A),y=(0,r().K8)((()=>a||"suggest"===o(77246).Uv.getMode(t)),[a,t]),v=(0,r().K8)((()=>t.getCover()),[t]),x=(0,r().O$)(h().A),[k,A]=(0,n.useState)(void 0);if(!v)return null;const w=x.loadingMode!==g().pF&&x.loadingMode!==g().Wc;return(0,C.jsx)(o(801678).A,{mouseStore:f,onFlushTemporaryPosition:e=>function(e,t,o){const{imagePosition:n,reset:i}=e;d().createAndCommit({userAction:"PageCover.handleFlushTemporaryPosition",environment:o,canUndo:!0,perform:e=>{s().yY({store:t,coverPosition:n,transaction:e}),i()}})}(e,t,m),renderControl:e=>{let{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a}=e;return(0,C.jsx)(j,{handleRepositionClick:o,handleSavePositionClick:n,handleCancelClick:i,isVisible:r,isRepositioning:a,lastProxiedUrl:k,store:t,disabled:y,paddingRight:l,paddingLeft:c,mouseStore:f})},source:"page",store:t,style:{display:"flex",flexDirection:"column",alignItems:"center",height:u,maxHeight:280,cursor:"default"},render:e=>(0,C.jsxs)(n.Fragment,{children:[(0,C.jsx)(o(360083).A,{url:v.cover,isAuthenticated:!0,permissionRecord:v.pointer,width:p,onFinishedLoadingProxyUrl:A,render:(t,o)=>{const n={width:"100%",height:u,maxHeight:280,objectFit:"cover",opacity:w?.5:1,objectPosition:`center ${100*(1-(e.imagePosition||0))}%`,borderRadius:0},i={width:"100%",height:u,maxHeight:280};return(0,C.jsx)(S,{src:o,placeholderSrc:w?x.dataURL:void 0,placeholderBehavior:w?"force-show-placeholder":"show-placeholder-if-loading-src",containerStyle:i,imageStyle:n,onLoadComplete:M,testId:"pageCover"})}}),w&&(0,C.jsxs)("div",{style:b().fd,children:[(0,C.jsx)(o(331542).A,{size:"md",style:{marginRight:4}}),(0,C.jsx)("div",{style:{minWidth:30,textAlign:"right"},children:void 0!==x.uploadProgress?(0,C.jsx)(o(773382).A,{percentage:x.uploadProgress}):x.progressText?(0,C.jsx)("span",{children:x.progressText}):null})]})]})})};function M(){h().A.reset()}function j(e){let{isVisible:t,isRepositioning:o,handleCancelClick:s,handleRepositionClick:d,handleSavePositionClick:b,lastProxiedUrl:v,store:x,disabled:S,paddingRight:A,paddingLeft:M,mouseStore:j}=e;const w=(0,i().v3)(),I=(0,a().tz)(),T=(0,n.useCallback)((e=>function(e,t,o,n,i){i.reset();const r=e.target.getBoundingClientRect();l().W({environment:t,intl:o,store:n,rect:r})}(e,w,I,x,j)),[w,I,x,j]),P=(0,r().K8)((()=>h().A.state.loadingMode),[]),R=(0,r().K8)((()=>function(e){let t;return t=Boolean(e.isFullWidth())?"100%":u().x6,t}(x)),[x]),{device:O}=w,B=(0,r().K8)((()=>!o&&!(0,c().LX)({device:O})),[o,O]),F=(0,r().O$)(p().e);if(S||P!==g().pF||!F)return null;const{isMobile:L}=O;return(0,C.jsx)(f().A,{animate:{width:R,opacity:t?1:0},style:{position:"absolute",pointerEvents:t?"auto":"none",maxWidth:"100%",top:48},children:(0,C.jsxs)(m().A,{isVisible:t,position:"bottom",style:{marginRight:A,marginLeft:M},children:[B&&(0,C.jsx)(y().A,{style:{borderRight:L?"none":void 0,...k().k},onClick:T,children:(0,C.jsx)(a().sA,{defaultMessage:"Change cover",id:"pageCover.changeCover.text"})}),!o&&!L&&(0,C.jsx)(y().A,{style:{...k().k,borderRight:"none"},onClick:e=>d(e,v),children:(0,C.jsx)(a().sA,{defaultMessage:"Reposition",id:"pageCover.reposition.text"})}),o&&!L&&(0,C.jsx)(y().A,{style:k().k,onClick:b,children:(0,C.jsx)(a().sA,{defaultMessage:"Save position",id:"pageCover.savePosition.text"})}),o&&!L&&(0,C.jsx)(y().A,{style:{...k().k,borderRight:"none"},onClick:s,children:(0,C.jsx)(a().sA,{defaultMessage:"Cancel",id:"pageCover.reposition.cancelText"})})]})})}},567121:(e,t,o)=>{o.d(t,{EG:()=>a,K5:()=>r,RH:()=>i,Yi:()=>s,ls:()=>n});const n=32,i=202,r=1e3,a="Want to add a metric? Look for 'src/client/performanceToolbar/config.ts' in notion-next.",s="To disable the toolbar entirely, go to the 'Experiments' panel and look for the 'performance_debugging_toolbar' flag."},592968:(e,t,o)=>{o.d(t,{F:()=>i});class n extends(()=>o(757695))().default{getInitialState(){return{isOpen:!1}}}const i=new n},608581:(e,t,o)=>{o.d(t,{A:()=>c});o(898992),o(354520),o(581454),o(941795);var n=o(296540),i=()=>o(401497),r=()=>o(955825),a=()=>o(284371),s=()=>o(963575),l=o(474848);function d(e){const{button:t,isLast:o}=e,s=(0,i().IS)((e=>({button:{display:"flex",alignItems:"center",padding:"4px 6px",fontWeight:a().Wy.medium,borderRight:`1px solid ${e.regularDividerColor}`,color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor},buttonLast:{borderRight:"none"},buttonHovered:{background:e.whiteButtonHoveredBackground},buttonPressed:{background:e.whiteButtonPressedBackground}})),[]);return n.cloneElement(t,{...(0,r().AH)(t.props.style,s.button,o&&s.buttonLast),hoveredStyle:(0,r().AH)(s.buttonHovered,o&&s.buttonLast).style,pressedStyle:s.buttonPressed})}const c=function(e){let{children:t,isVisible:c,position:u,style:p}=e;const g=(0,o(484714).v3)(),h=(0,i().IS)((e=>({container:{color:e.actionMenuButtonTextColor,fill:e.actionMenuButtonTextColor,fontSize:12,background:e.whiteButtonBackground,boxShadow:e.shadowSM,display:"flex",whiteSpace:"nowrap",borderRadius:s().A.borderRadius,maxWidth:"calc(100% - 16px)",minHeight:24,overflow:"hidden",pointerEvents:g.device.isMobile?"auto":"none",opacity:g.device.isMobile?1:0,fontFamily:a().vc(o(662303).locale).sans,position:"absolute",right:s().A.horizontal.small,bottom:s().A.vertical.small,zIndex:2},containerHover:{pointerEvents:"auto",opacity:1},containerTop:{top:s().A.vertical.small,bottom:void 0}})),[g]),m=n.Children.toArray(t).filter(o(534177).O9),f=m.length;return(0,l.jsx)(o(145214).A,{animate:{opacity:c?1:0},...(0,r().AH)(h.container,p,c&&h.containerHover,"top"===u&&h.containerTop),children:m.map(((e,t)=>{const i=t===f-1;if(e&&"object"==typeof e&&"type"in e){if(e.type===o(859428).A&&n.isValidElement(e))return n.cloneElement(e,{render:(t,o)=>{const n=e.props.render(t,o);return(0,l.jsx)(d,{isLast:i,button:n},e.key)}});if(e.type===o(704152).A&&n.isValidElement(e))return(0,l.jsx)(d,{isLast:i,button:e},e.key)}}))})}},617837:(e,t,o)=>{o.d(t,{j:()=>h});var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(959013),s=()=>o(534177),l=()=>o(937075),d=()=>o(273190),c=()=>o(227440),u=()=>o(966106),p=()=>o(285790),g=o(474848);function h(e){const{traceId:t,feedbackState:o,setFeedbackState:l,feedbackType:h}=e,{thumbsUpType:f,thumbsDownType:y}=(0,n.useMemo)((()=>{switch(h){case"ai_block":return{thumbsDownType:"ai_block_thumbs_down",thumbsUpType:"ai_block_thumbs_down"};case"autofill":return{thumbsDownType:"ai_autofill_thumbs_down",thumbsUpType:"ai_autofill_thumbs_up"};default:(0,s().HB)(h)}}),[h]),b=(0,a().tz)(),v=(0,i().v3)(),x=!(0,r().O$)(c().e),C=(0,n.useCallback)((()=>{u().A.setState({...u().A.state,open:!0,type:y,traceId:t,thumbsUpOrDown:"down"}),l({type:"thumbsdown",userContent:"",shareWithNotion:!0}),m({environment:v,inferenceId:t,feedbackType:"thumbsdown",userContent:"",shareWithNotion:!0})}),[v,l,y,t]),S=(0,n.useCallback)((()=>{u().A.setState({...u().A.state,open:!0,type:f,traceId:t,thumbsUpOrDown:"up"}),l({type:"thumbsup",userContent:"",shareWithNotion:!0}),m({environment:v,inferenceId:t,feedbackType:"thumbsup",userContent:"",shareWithNotion:!0})}),[v,l,f,t]);return(0,g.jsxs)("div",{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[(0,g.jsx)(p().A,{onClick:S,icon:(0,d().gZ)("thumbsup","thumbsup"===(null==o?void 0:o.type)),ariaLabel:b.formatMessage({id:"AiFeatureFeedbackButtons.thumbsUp",defaultMessage:"Helpful"}),disabled:x}),(0,g.jsx)(p().A,{icon:(0,d().gZ)("thumbsdown","thumbsdown"===(null==o?void 0:o.type)),onClick:C,ariaLabel:b.formatMessage({id:"AiFeatureFeedbackButtons.thumbsDown",defaultMessage:"Not helpful"}),disabled:x})]})}function m(e){const{environment:t,inferenceId:o,feedbackType:n,userContent:i,shareWithNotion:r}=e;l().I5(t,{type:"property_autofill",inference_id:o,feedback_type:n,timestamp:(new Date).toUTCString(),user_comment:i,share_with_notion:r})}},665638:(e,t,o)=>{o.d(t,{$:()=>p,S:()=>g});var n=()=>o(847249),i=()=>o(401497),r=()=>o(186445),a=()=>o(838364),s=()=>o(644914),l=()=>o(155959),d=()=>o(661179),c=()=>o(508496),u=()=>o(895227);function p(e){const{environment:t,rightEdgeDistance:o,isInPeekRenderer:a}=e,l=e.width??36,c=(0,n().K8)((()=>(0,s().zo)(t,a)-(0,s().Ql)(t)),[t,a]),p=(0,n().K8)((()=>g(t,16+d().A.state)),[t]),h=(0,n().K8)((()=>o+d().A.state),[o]),m=(0,n().K8)((()=>r().$o.state?0:1),[]);return(0,i().IS)((e=>({buttonPositionStyle:{display:"flex",position:"absolute",bottom:p,right:h,opacity:m,transform:`translateX(-${c}px) translateZ(0)`,transition:`\n\t\t\t\t\topacity ${u().L}ms,\n\t\t\t\t\tcolor ${u().L}ms,\n\t\t\t\t\ttransform 200ms\n\t\t\t\t`,alignItems:"center",gap:10},roundButtonStyle:{display:"flex",alignItems:"center",justifyContent:"center",background:e.whiteButtonBackground,width:l,height:l,borderRadius:"100%",fontSize:20,boxShadow:e.shadowSM}})),[c,p,h,l,m])}function g(e,t){const o=c().default.checkGate({gateName:"tablet_refresh_gate"}),n=e.device.isMobileNative&&!o,i=(0,l().T)("supportsNativeBottomBar"),r=n&&!i;return e.WindowSizeStore.getSafePaddingBottomCSS(t+(e.device.isTablet&&o?-12:r?a().l:0))}},681810:(e,t,o)=>{o.d(t,{A:()=>n});const n=new(o(867772).Ay)},683881:(e,t,o)=>{o.d(t,{A:()=>U});o(944114),o(898992),o(354520),o(672577),o(581454),o(737550);var n=o.n(o(844751)),i=o(296540),r=()=>o(484714),a=()=>o(847249),s=()=>o(970013),l=()=>o(713998),d=()=>o(784892),c=()=>o(206267),u=()=>o(519831),p=()=>o(959013),g=()=>o(496603),h=()=>o(183558),m=()=>o(534177),f=()=>o(193722),y=()=>o(519839),b=()=>o(175116),v=()=>o(476492),x=()=>o(722872),C=()=>o(963589),S=()=>o(857437),k=()=>o(970585),A=()=>o(828180),M=()=>o(760217),j=()=>o(439264),w=()=>o(928600),I=()=>o(939740),T=()=>o(64e3),P=()=>o(480095),R=()=>o(89924),O=()=>o(753199),B=()=>o(399762),F=o(474848);const L=i.forwardRef((function(e,t){var n;const{locked:i,option:a,actionMenuOpen:s,property:l,collectionId:c,analyticsFrom:u,onChange:p,onCloseActionMenu:h,focused:m,propertySchema:f,onOpenActionMenu:y}=e,b=(0,o(401497).DP)(),v=(0,r().v3)();return(0,F.jsx)(o(545805).A,{debugName:"SelectPropertyMenuItem",capture:s,onEnter:g().D_,children:(0,F.jsx)(o(859428).A,{renderTooltip:e=>(0,F.jsxs)("div",{...e,style:o(673730).Q$,children:[(0,F.jsx)("div",{children:a.value}),(0,F.jsx)("div",{style:{color:b.text.contrastSecondary},children:a.description})]}),placement:o(962730).W.Left,disableTooltip:!(null!==(n=a.description)&&void 0!==n&&n.length),render:n=>(0,F.jsx)(M().A,{...(0,o(553965).A)(n,e),ref:t,title:(0,F.jsx)(B().O,{format:v.device.isMobile?d().NY.Large:d().NY.Medium,value:a.value,color:a.color,hideTooltip:!0,showRemoveButton:!1,isSingle:!0,showEllipsis:!0}),desktopTitleStyle:{marginRight:6},isTokenTitle:!0,right:!i&&(0,F.jsx)(_,{property:l,collectionId:c,analyticsFrom:u,onChange:p,onCloseActionMenu:h,actionMenuOpen:s,focused:m,option:a,propertySchema:f,onOpenActionMenu:y})})})})}));function _(e){let{property:t,collectionId:n,analyticsFrom:i,onChange:a,onCloseActionMenu:s,actionMenuOpen:l,focused:d,option:c,propertySchema:u,onOpenActionMenu:p}=e;const g=(0,r().v3)(),{device:h}=g;return(0,F.jsx)(o(814777).h,{open:l,origin:(0,F.jsx)(o(911706).A,{onClick:e=>function(e,t,o){(0,O().SQ)({event:e,context:O().y$.MenuListClick,callback:()=>t(o.value)})}(e,p,c),isMobile:h.isMobile,style:{opacity:d||h.isMobile?1:0}}),option:c,propertySchema:u,property:t,collectionId:n,analyticsFrom:i,onChange:a,onClose:s})}var D=()=>o(856952);function U(e){const{allowMultiple:t,analyticsFrom:o,autofillExplanation:l,bulkAutofillButton:d,canConfigureCollection:p,collectionId:g,disabled:h,insertChar:A,onAccept:M,onChange:j,onDismiss:O,property:B,schema:L,value:_,additionalStores:D}=e,U=(0,r().v3)(),N=(0,C().X)("db_ux_mobile"),{device:H}=U,z=(0,i.useRef)(void 0),G=(0,b().ET)(),Z=(0,a().uB)(void 0,k().A),[Q,X]=(0,S().$)(),[q,J]=(0,i.useState)(""),[ee,te]=(0,i.useState)(void 0);(0,i.useEffect)((()=>{Y(L,B,z),A&&J(A)}),[A,B,L]);const oe=(0,i.useCallback)((e=>function(e){const{change:t,allowMultiple:o,analyticsFrom:n,collectionContextStore:i,collectionId:r,createSelectColorRef:a,environment:l,onChange:d,property:p,schema:g,setInputValue:h}=e;h("");const b=g[p];if(!b)return;if(!s().lx(b))return;const x=b.options||[];let C;if("removeToken"===t.type)C={type:"selectPropertyMenuUpdateRemoveOption",removeOption:t.removedToken};else if("addTokens"===t.type){let e;o?(e=t.newTokens,C={type:"selectPropertyMenuUpdateAddOptions",addOptions:e}):(e=t.newTokens.length>0?[t.newTokens[t.newTokens.length-1]]:[],C={type:"selectPropertyMenuUpdateReplaceOptions",options:e});const s=e.find((e=>!x.find((t=>t.value===e))));if(s){const e={id:c().JW(),value:s,color:a.current};let t;t="alphabetical"===b.auto_sort_options||"reverse_alphabetical"===b.auto_sort_options?[(0,y().og)({collectionId:r,property:p,propertySchema:b,newOption:e,isAscending:"alphabetical"===b.auto_sort_options})]:[{pointer:{table:u().Vl,id:r},command:"keyedObjectListAfter",path:["schema",p,"options"],args:{value:e}}],C.schemaOperations=t,Y(g,p,a),(0,f().L)(l,{...(0,v().sl)(i),property_type:b.type,action:"select_add_option",from:n})}}else(0,m().HB)(t);d(C)}({allowMultiple:t,analyticsFrom:o,collectionContextStore:G,collectionId:g,createSelectColorRef:z,environment:U,onChange:j,property:B,schema:L,setInputValue:J,...e})),[t,o,G,g,U,j,B,L]),ne=(0,i.useCallback)((e=>{te(e)}),[]),ie=L[B];if(!ie)return null;if(!s().lx(ie))return null;const re=ie.options||[],ae=function(e,t,o){const i=t.map((e=>e.value));let r;if(e){r=n().filter(e,i).map((e=>e.original));!t.find((t=>t.value===e))&&e.trim().length>0&&o&&r.push(e.trim().replace(/,/g,""))}else r=i;return r}(q,re,p),se=0===ae.length,le=(0,F.jsx)(E,{inputComboboxProps:Q,openPropertyActionMenu:ee,disabled:h,value:_,inputValue:q,handleOnTokenInputChange:oe,setInputValue:J,options:re,propertySchema:ie,autofillExplanation:l});let de;return de=H.isMobile?{menuType:x().gu.Modal,title:ie.name,...!N&&{right:(0,F.jsx)(P().DoneMenuText,{}),onClickRight:O},header:le,footer:d}:{menuType:x().gu.Popup,header:le,tokenInputHeader:!0,footer:d},h?(0,F.jsx)(w().A,{...de}):(0,F.jsx)(w().A,{...de,children:se?(0,F.jsx)(R().A,{title:p?(0,F.jsx)(V,{}):(0,F.jsx)(W,{}),children:H.isMobileNative&&(0,F.jsx)(T().A,{title:(0,F.jsx)(W,{})})}):(0,F.jsx)(I().Ay,{type:I().Oh.Vertical,initialFocus:q.length>0?0:void 0,sections:[{key:1,render:e=>(0,F.jsx)(K,{collectionId:g,property:B,schema:L,onChange:j,canConfigureCollection:p,menuListStore:Z,args:e,tokens:ae}),items:$({analyticsFrom:o,canConfigureCollection:p,collectionId:g,createSelectColorRef:z,handleOnTokenInputChange:oe,handleSetOpenPropertyActionMenu:ne,onChange:j,openPropertyActionMenu:ee,options:re,property:B,schema:L,tokens:ae,value:_,additionalStores:D})}],onAccept:(e,t,o)=>{M(o)},store:Z,comboboxProps:X})})}function E(e){let{inputComboboxProps:t,openPropertyActionMenu:o,disabled:n,value:a,inputValue:s,handleOnTokenInputChange:c,setInputValue:u,options:h,propertySchema:m,autofillExplanation:f}=e;const y=(0,r().Y0)(),b=(0,p().tz)(),v=(0,x().Tf)(),S=(0,C().X)("db_ux_chrome"),k=(0,i.useCallback)((e=>g().oE(a.map((t=>{const o=(0,l().jy)(e,t);if(o)return(0,F.jsx)(B().O,{value:o.value,color:o.color,showRemoveButton:!n,isSingle:!0,format:y.isMobile?d().NY.Large:d().NY.Medium,shouldShrink:!0,onClickRemove:()=>{c({change:{type:"removeToken",removedToken:t}})},showEllipsis:!0},o.id)})))),[y.isMobile,n,c,a]),M=k(h),j=m.select_ai_inference,w=S?{padding:A().QJ[0].token,gap:6}:{padding:"3px 5px",gap:6};return(0,F.jsxs)(R().A,{disableDesktopPadding:!0,children:[(0,F.jsx)(D().Ay,{focus:y.isMobile?void 0:!o,focusAfterAnimation:!0,format:D().le.Select,tokens:M,tokenWrapStyle:w,placeholder:null!=j&&j.auto_update_on_edit?b.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder.aiAutoUpdate",defaultMessage:"Empty"}):b.formatMessage({id:"database.selectPropertyEditMenu.searchPlaceholder",defaultMessage:"Search for an option..."}),onRemoveLastToken:()=>{a.length>0&&c({change:{type:"removeToken",removedToken:a[a.length-1]}})},value:s,disabled:n,hideInput:!1,onChange:e=>u(e.target.value),dontShowBorderBottom:y.isAndroid||v,...t,suppressFocusRing:!0}),f]})}function W(){return(0,F.jsx)(p().sA,{id:"database.selectPropertyEditMenu.noResults",defaultMessage:"No options found"})}function N(){return(0,F.jsx)(p().sA,{id:"database.selectPropertyEditMenu.selectOnlyPrompt",defaultMessage:"Select an option"})}function V(){return(0,F.jsx)(p().sA,{id:"database.selectPropertyEditMenu.selectOrCreatePrompt",defaultMessage:"Select an option or create one"})}function H(e){let{props:t,newOption:o,token:n}=e;const i=(0,r().v3)(),{device:a}=i;return(0,F.jsx)(M().A,{...t,title:(0,F.jsxs)("div",{style:{display:"flex",minWidth:0},children:[(0,F.jsx)("div",{style:{marginRight:6,lineHeight:1.3},children:(0,F.jsx)(p().sA,{id:"database.selectPropertyEditMenu.createLabel",defaultMessage:"Create"})}),(0,F.jsx)(B().O,{value:o.value,color:o.color,showRemoveButton:!1,isSingle:!0,format:a.isMobile?d().NY.Large:d().NY.Medium,showEllipsis:!0})]}),isTokenTitle:!0})}function K(e){let{args:t,tokens:o,collectionId:n,property:r,schema:a,onChange:l,canConfigureCollection:d,menuListStore:c}=e;const p=(0,i.useCallback)((e=>function(e,t,o,n,i,r){const a=(0,y().os)({newOptions:e,collectionId:t,property:o,schema:n});if(a){const e=n[o];e&&s().lx(e)&&"manual"!==(e.auto_sort_options||"manual")&&a.push({pointer:{table:u().Vl,id:t},command:"update",path:["schema",o],args:{auto_sort_options:"manual"}}),i({type:"selectPropertyMenuUpdateSchema",schemaOperations:a})}r.reset()}(e,n,r,a,l,c)),[n,r,a,l,c]);return d?(0,F.jsx)(R().A,{...t,title:(0,F.jsx)(V,{}),children:(0,F.jsx)(j().Ay,{direction:"vertical",keys:o,renderKey:e=>t.children[o.indexOf(e)],onDrop:p})}):(0,F.jsx)(R().A,{...t,title:(0,F.jsx)(N,{}),children:t.children})}function z(e){let{analyticsFrom:t,canConfigureCollection:o,collectionId:n,handleSetOpenPropertyActionMenu:a,onChange:l,openPropertyActionMenu:d,option:c,property:u,props:p,schema:h,value:m}=e;const f=(0,r().Y0)(),y=(0,i.useMemo)((()=>c.value===d),[d,c.value]),b=h[u];return b&&s().lx(b)?(0,F.jsx)(L,{...p,option:c,showDragHandle:o&&!f.isMobile,locked:!o,property:u,analyticsFrom:t,collectionId:n,onChange:e=>function(e,t,o,n,i){const r=o[t];if(!r)return;if(!s().lx(r))return;const a=r.options||[],l=[...a];let d;const c=n.filter((e=>{const t=a.find((t=>t.value===e));return!t||l.some((e=>e.id===t.id))}));d=g().n4(c,n)?{type:"selectPropertyMenuUpdateSchema",schemaOperations:e}:{type:"selectPropertyMenuUpdateReplaceOptions",options:c,schemaOperations:e};i(d)}(e,u,h,m,l),actionMenuOpen:y,propertySchema:b,onCloseActionMenu:a,onOpenActionMenu:a}):null}function Y(e,t,o){const n=e[t];if(!n)return;if(!s().lx(n))return;const i=n.options||[],r=(0,s().Zd)(i);o.current=r}function $(e){const{analyticsFrom:t,canConfigureCollection:o,collectionId:n,createSelectColorRef:i,handleOnTokenInputChange:r,handleSetOpenPropertyActionMenu:a,onChange:s,openPropertyActionMenu:l,options:d,property:c,schema:u,tokens:p,value:g,additionalStores:m}=e;return p.map((e=>{const p=d.find((t=>t.value===e));return{key:e,render:r=>{if(p)return(0,F.jsx)(z,{analyticsFrom:t,canConfigureCollection:o,collectionId:n,handleSetOpenPropertyActionMenu:a,onChange:s,openPropertyActionMenu:l,option:p,property:c,props:r,schema:u,value:g});{const t={id:(0,h().Ay)(),value:e,color:i.current};return(0,F.jsx)(H,{props:r,newOption:t,token:e})}},action:()=>{!(m&&m.length>0)&&g.includes(e)||r({change:{type:"addTokens",newTokens:[e]}})}}}))}},706513:(e,t,o)=>{o.d(t,{r:()=>L});o(898992),o(354520),o(672577),o(581454);var n=o.n(o(844751)),i=o(296540),r=()=>o(484714),a=()=>o(847249),s=()=>o(401497),l=()=>o(713998),d=()=>o(784892),c=()=>o(735790),u=()=>o(959013),p=()=>o(496603),g=()=>o(534177),h=()=>o(686526),m=()=>o(673964),f=()=>o(458366),y=()=>o(673730),b=()=>o(722872),v=()=>o(553965),x=()=>o(963589),C=()=>o(857437),S=()=>o(962730),k=()=>o(828180),A=()=>o(831194),M=()=>o(760217),j=()=>o(928600),w=()=>o(939740),I=()=>o(480095),T=()=>o(8980),P=()=>o(89924),R=()=>o(859428),O=()=>o(399762),B=()=>o(856952),F=o(474848);function L(e){var t;const{propertySchema:o,blockPropertyValueOverlayStore:L,onChange:_}=e,D=(0,r().v3)(),{device:U}=D,[E,W]=(0,i.useState)(e.initialValue??""),[N,V]=(0,i.useState)(""),H=(0,s().DP)(),K=(0,u().tz)(),z=(0,x().X)("db_ux_mobile"),Y=(0,x().X)("db_ux_chrome"),$=(0,a().K8)((()=>{const e=L.state;if(e.isOpen)return e.collectionContextStore}),[L]),G=(0,a().K8)((()=>(null==$?void 0:$.permissionScopesStore.state.canConfigureCollection)&&"collectionPage"!==(null==$?void 0:$.contextType)),[$]),Z=(0,a().K8)((()=>{const e=L.state;return!!e.isOpen&&(0,f().br)({store:e.store,additionalStores:e.additionalStores,collectionContextStore:e.collectionContextStore})}),[L]),Q=Z?[]:o.options??[],X=(0,l().jy)(Q,E),q=o.groups??[],J=X&&q.find((e=>{var t;return null===(t=e.optionIds)||void 0===t?void 0:t.includes(X.id)})),[ee,te]=(0,C().$)(),oe=X?[(0,F.jsx)(O().q,{value:X.value,color:X.color,groupColor:null==J?void 0:J.color,isSingle:!0,format:U.isMobile?d().NY.Large:d().NY.Medium,onClickRemove:()=>{W(""),_(void 0,void 0)},showRemoveButton:void 0===o.defaultOption,shouldShrink:!0,showEllipsis:!0,tooltipPlacement:S().W.Left,hideTooltip:Boolean(null===(t=X.description)||void 0===t?void 0:t.length)},"status")]:[],ne=Y?{padding:k().QJ[0].token,gap:6}:{padding:"3px 5px",gap:6},ie=Z?null:(0,F.jsx)(B().Ay,{focus:!U.isMobile||void 0,focusAfterAnimation:!0,format:B().le.Select,tokens:oe,tokenWrapStyle:ne,placeholder:K.formatMessage({id:"database.selectPropertyEditMenu.searchStatusPlaceholder",defaultMessage:"Search for an option"}),onRemoveLastToken:p().lQ,value:N,disabled:e.disabled,hideInput:e.disabled,onChange:e=>{V(e.target.value)},dontShowBorderBottom:U.isAndroid,...ee,suppressFocusRing:!0});let re;if(re=U.isMobile?{menuType:b().gu.Modal,title:o.name,...!z&&{right:(0,F.jsx)(I().DoneMenuText,{}),onClickRight:e.onDismiss,header:ie}}:{menuType:b().gu.Popup,header:ie,tokenInputHeader:!0},e.disabled)return(0,F.jsx)(j().A,{...re});let ae=Q;if(""!==N){const e=n().filter(N,Q.map((e=>e.value))).map((e=>e.original));ae=Q.filter((t=>e.includes(t.value)))}const se=q.map((e=>{const t=ae.filter((t=>{var o;return null===(o=e.optionIds)||void 0===o?void 0:o.includes(t.id)}));if(0!==t.length)return{group:e,groupOptions:t}})).filter(g().O9),le=se.length>1,de=Z?[{items:q.map((t=>({key:t.name,render:e=>(0,F.jsx)(M().A,{...e,disabledFeedback:!0,focused:e.focused,title:(0,F.jsx)(A().RS,{style:{fontWeight:500,marginTop:2},group:t,showIcon:!0,showColor:!0})}),action:()=>{e.onChange(void 0,t.name)}}))),key:"all-groups",render:e=>(0,F.jsx)(P().A,{...e})}]:se.map(((t,o)=>{let{group:n,groupOptions:i}=t;return{items:i.map((t=>{const o=e.shouldDisableOption?e.shouldDisableOption(t.id):{disabled:!1};return{key:t.value,render:e=>{var i;return(0,F.jsx)(R().A,{disableTooltip:o.disabled&&!(null!==(i=t.description)&&void 0!==i&&i.length),placement:S().W.Left,renderTooltip:e=>o.disabled?o.disableReasonMessage:(0,F.jsxs)("div",{...e,style:y().Q$,children:[(0,F.jsx)("div",{children:t.value}),(0,F.jsx)("div",{style:{color:H.text.contrastSecondary},children:t.description})]}),render:i=>{var r;return(0,F.jsx)(M().A,{...(0,v().A)(i,e),disabled:o.disabled,disabledFeedback:!0,focused:e.focused,title:(0,F.jsx)(O().q,{...i,value:t.value,color:t.color,hideTooltip:Boolean(null===(r=t.description)||void 0===r?void 0:r.length),tooltipPlacement:S().W.Left,groupColor:n.color,showRemoveButton:!1,isSingle:!0,format:U.isMobile?d().NY.Large:d().NY.Medium}),isTokenTitle:!0})}})},action:()=>{e.onChange(t.value,void 0)}}})),key:`group-${o}`,render:e=>(0,F.jsx)(P().A,{...e,topBorder:e.index>0,title:le&&(0,F.jsx)(A().RS,{group:n,showColor:!1,style:{fontSize:12}})})}})),ce=$&&G?{items:[{key:"edit property",render:e=>(0,F.jsx)(M().A,{...e,title:(0,F.jsx)(u().sA,{defaultMessage:"Edit property",id:"database.tableHeaderCell.editProperty"}),icon:(0,F.jsx)(T().I,{icon:c().M})}),action:()=>{const t=$.settingsStore;$.collectionStore()&&(e.onDismiss(),(0,m().j)({environment:D,collectionContextStore:$,fit:"settings"}),h().Ow({collectionContextStore:$,collectionSettingsStore:t}),h().a2({collectionSettingsStore:t,item:{type:"property",formatKey:$.getPropertyFormatKey(),property:e.property}}))}}],key:"edit-property",render:e=>(0,F.jsx)(P().A,{...e,topBorder:e.index>0})}:void 0;return(0,F.jsx)(j().A,{...re,children:(0,F.jsx)(w().Ay,{type:w().Oh.Vertical,initialFocus:N.length>0?0:void 0,sections:p().oE([...de,ce]),onAccept:(t,o,n)=>{e.onAccept(n)},comboboxProps:te})})}},720263:(e,t,o)=>{o.d(t,{A:()=>v});var n=o(296540),i=()=>o(484714),r=()=>o(401497),a=()=>o(965998),s=()=>o(959013),l=()=>o(21869),d=()=>o(441467),c=()=>o(862292),u=()=>o(980914),p=()=>o(205682),g=()=>o(77238),h=()=>o(24157),m=()=>o(704152),f=()=>o(35392),y=()=>o(859428),b=o(474848);function v(e){const t=(0,i().v3)(),{isMobile:o}=(0,i().Y0)(),v=(0,r().IS)((e=>({keyboardShorcut:{color:e.text.contrastSecondary}})),[]),x=async()=>{let o;const n=h().default.state;if("empty"!==n.mode){o=u().wg();const i=await c().T.formulas.load();d().hN({environment:t,blockStore:e.blockStore,multiSelection:n.multiSelection,property_id:p().A.state.isOpen?p().A.state.property:g().A.state.isOpen?g().A.state.property:void 0,formulasModule:i})}(0,l().s)(t,{action:"comment",from:o?"simple_table_cell":void 0})};return(0,b.jsx)(y().A,{renderTooltip:()=>(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)("div",{children:(0,b.jsx)(s().sA,{defaultMessage:"Comment",id:"inlineCommentButton.tooltip"})}),(0,b.jsx)("div",{children:(0,b.jsx)(f().A,{style:v.keyboardShorcut,name:"comment"})})]}),render:t=>(0,b.jsxs)(m().A,{style:{display:"flex",alignItems:"center",padding:e.iconOnly?6:"0 10px",whiteSpace:"nowrap",...e.style},disabled:e.disabled,disabledFeedback:e.disabled,onClick:x,ariaLabel:e.ariaLabel,...t,children:[(0,a().M)({width:o?18:16,height:o?18:16,marginTop:o?0:1,marginRight:e.iconOnly?0:4}),!o&&!e.iconOnly&&(0,b.jsx)(s().sA,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"})]})})}},736173:(e,t,o)=>{o.d(t,{V:()=>r});const n=new(o(754869).aH)({apiKey:o(780054).A.google.mapsApiKey,version:"weekly"});let i;async function r(e){const t={input:e,sessionToken:i},o=await async function(){const e=await n.importLibrary("places");return i||(i=new e.AutocompleteSessionToken),e}(),{suggestions:r}=await o.AutocompleteSuggestion.fetchAutocompleteSuggestions(t);return r}},766024:(e,t,o)=>{o.d(t,{A:()=>K});o(898992),o(354520),o(672577),o(581454);var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(522419),s=()=>o(959013),l=()=>o(496603),d=()=>o(901389),c=()=>o(383594),u=()=>o(892632),p=()=>o(972435),g=()=>o(722872),h=()=>o(663173),m=()=>o(274652),f=()=>o(439264),y=()=>o(805751),b=()=>o(928600),v=()=>o(480095),x=()=>o(89924),C=(o(944114),()=>o(401497)),S=()=>o(304740),k=()=>o(641007),A=()=>o(147588),M=()=>o(437219),j=()=>o(235116),w=()=>o(35622),I=()=>o(465741);class T extends(()=>o(757695))().default{getInitialState(){return{open:!1}}}const P=T;var R=()=>o(911706),O=()=>o(760217),B=()=>o(406699),F=()=>o(623580),L=()=>o(939740),_=()=>o(897119),D=()=>o(360083),U=o(474848);function E(e){const{disabled:t,store:o,name:s,url:l,onChange:d,onDelete:c}=e,u=S().rS({url:e.url}),p=(0,n.useRef)(null),g=(0,i().v3)(),{device:h}=g,m=(0,r().uB)(void 0,P),f=(0,r().O$)(m),y=(0,n.useCallback)((e=>{if(!f.open)return;m.setState({...f,inputValue:e});const t=a().SB({title:e,source:l});d({url:l,name:t})}),[m,f,d,l]),b=(0,n.useCallback)((()=>{m.setState({open:!0,inputValue:s})}),[m,s]),v=(0,n.useCallback)((()=>{m.setState({open:!1})}),[m]),x=(0,n.useCallback)((()=>{c(l)}),[c,l]),T=(0,n.useCallback)((()=>{const e=()=>{M().uR(g,{url:l,from:"FilePropertyMenuItem"}),j().KE(g,{url:l,download:!0,downloadName:s,permissionRecord:o.pointer})};o.getCreatedById()===k().xY.id?(0,I().TW)({propertyType:"file",onConfirm:e}):e()}),[g,s,l,o]),R=(0,n.useCallback)((()=>{j().OG(g,{url:l,type:"file",from:"view_original",downloadName:s,permissionRecord:o.pointer})}),[g,s,o.pointer,l]),F=(0,n.useCallback)((()=>{if(!p.current)return;const e=p.current.getBoundingClientRect(),t=e.width/e.height;w().o9({environment:g,renderFullScreenNode:()=>(0,U.jsx)(D().A,{url:l,isAuthenticated:!0,permissionRecord:o.pointer,width:window.innerWidth,render:(e,t)=>(0,U.jsx)("img",{src:t,style:{position:"relative",maxHeight:"100%",maxWidth:"100%",margin:0,alignSelf:"center",width:"100%"}})}),fullScreenNodeRect:e,contentAspectRatio:t,blockStore:o,imageUrl:l})}),[g,o,l]),L=(0,n.useCallback)((()=>{if(f.open)return(0,U.jsx)(V,{url:e.url,inputValue:f.inputValue,isOpen:f.open,handleFileRename:y,handleCloseRenamePopover:v})}),[f,v,y,e.url]),E=(0,C().IS)((()=>({imageInner:{display:"block",maxWidth:"100%",maxHeight:180,cursor:"zoom-in"},imageInnerWrapper:{flex:"auto",overflow:"hidden"}})),[]),N=(0,U.jsx)(W,{fileIsImage:u,fileUrl:l,disabled:t,handleOpenFullscreenPreviewOfFile:F,handleDownloadFile:T,handleViewOriginalFile:R,handleOpenRenamePopover:b,handleDeleteFile:x});return u?(()=>{const o=(0,U.jsx)(D().A,{url:l,isAuthenticated:!0,permissionRecord:e.store.pointer,width:300,render:(e,t)=>(0,U.jsx)("div",{style:E.imageInnerWrapper,children:(0,U.jsx)("img",{src:t,style:E.imageInner,onClick:F,ref:p})})}),n={paddingTop:h.isMobile?12:8,paddingBottom:h.isMobile?12:8,alignItems:"flex-start"};return(0,U.jsx)(O().A,{focused:!1,showDragHandle:!t&&!h.isMobile,style:n,title:o,right:N,dontShrinkRight:!0})})():(()=>{const t=(0,U.jsx)(O().A,{focused:!1,showDragHandle:!e.disabled&&!h.isMobile,onClick:R,title:s,icon:(0,U.jsx)("div",{style:{width:h.isMobile?16:14},children:(0,A().Y)()}),right:N,dontShrinkRight:!0});return(0,U.jsx)(_().Ay,{open:f.open,popupType:h.isMobile?B().z7.SlideUp:B().z7.Popup,origin:t,render:L,onDismiss:v})})()}function W(e){const{disabled:t,fileIsImage:o,fileUrl:r,handleOpenFullscreenPreviewOfFile:a,handleDownloadFile:s,handleViewOriginalFile:l,handleOpenRenamePopover:d,handleDeleteFile:c}=e,u=(0,i().v3)(),{isMobile:p}=u.device,g=(0,n.useCallback)((e=>(0,U.jsx)(R().A,{isMobile:p,...e})),[p]),h=(0,n.useCallback)((e=>(0,U.jsx)(N,{fileIsImage:o,fileUrl:r,disabled:t,parent:e,handleOpenFullscreenPreviewOfFile:a,handleDownloadFile:s,handleViewOriginalFile:l,handleOpenRenamePopover:d,handleDeleteFile:c})),[o,r,t,a,s,l,d,c]);return(0,U.jsx)(B().Ay,{popupType:p?B().z7.SlideUp:B().z7.Popup,renderOrigin:g,render:h})}function N(e){const{parent:t,disabled:o,fileUrl:r,fileIsImage:l,handleOpenFullscreenPreviewOfFile:d,handleDownloadFile:c,handleViewOriginalFile:u,handleOpenRenamePopover:p,handleDeleteFile:h}=e,m=(0,i().v3)(),{isMobile:f,isNative:y}=m.device,v=(0,n.useMemo)((()=>{const e=[];l&&e.push({key:"fullscreen",render:e=>(0,U.jsx)(O().A,{...e,title:(0,U.jsx)(s().sA,{defaultMessage:"Full screen",id:"database.actionMenu.fileProperty.fullscreen.title"})}),action:d});return(a()._J(r)||y)&&e.push({key:"download",render:e=>(0,U.jsx)(O().A,{...e,title:(0,U.jsx)(s().sA,{defaultMessage:"Download",id:"database.actionMenu.fileProperty.download.title"})}),action:c}),e.push({key:"original",render:e=>(0,U.jsx)(O().A,{...e,title:(0,U.jsx)(s().sA,{defaultMessage:"View original",id:"database.actionMenu.fileProperty.viewOriginal.title"})}),action:()=>u()}),o||l||e.push({key:"rename",render:e=>(0,U.jsx)(O().A,{...e,title:(0,U.jsx)(s().sA,{defaultMessage:"Rename",id:"database.actionMenu.fileProperty.rename.title"})}),action:p}),o||e.push({key:"delete",render:e=>(0,U.jsx)(O().A,{...e,title:(0,U.jsx)(s().sA,{defaultMessage:"Delete",id:"database.actionMenu.fileProperty.delete.title"})}),action:h}),e}),[o,l,r,h,d,p,u,c,y]),C=(0,n.useMemo)((()=>[{key:"section",render:e=>(0,U.jsx)(x().A,{...e}),items:v}]),[v]),S=f?{menuType:g().gu.ActionSheet}:{menuType:g().gu.Popup,width:200};return(0,U.jsx)(b().A,{...S,children:(0,U.jsx)(L().Ay,{type:L().Oh.Vertical,initialFocus:0,onAccept:t.close,sections:C})})}function V(e){const{url:t,handleFileRename:o,handleCloseRenamePopover:r,isOpen:s,inputValue:l}=e,d=(0,i().v3)(),{device:c}=d,u=(0,n.useCallback)((e=>{const t=e.target.value;o(t)}),[o]),p=(0,C().IS)((e=>({renameInputWrapper:{display:"flex",alignItems:"center",color:e.text.primary,fontSize:"13px",padding:"4px 8px"},renameInput:{display:"flex",alignItems:"center",flexGrow:1,fontSize:14,lineHeight:"20px",paddingTop:4,paddingBottom:4,paddingLeft:10,paddingRight:10,width:"100%",borderRadius:4,boxShadow:e.inputBoxShadow,background:e.inputBackground,cursor:"text",position:"relative"}})),[]),h=c.isMobile?{menuType:g().gu.ActionSheet}:{menuType:g().gu.Popup,width:380};return s?(0,U.jsx)(b().A,{...h,children:(0,U.jsx)("div",{style:p.renameInputWrapper,children:(0,U.jsx)(F().A,{style:p.renameInput,value:l,placeholder:a().Jt(t),onChange:u,onSubmit:r,focusInitial:!0,selectAll:!0})})}):null}const H=function(e){return(0,U.jsx)(o(678553).Ay,{title:(0,U.jsxs)("div",{style:{display:"flex"},children:[(0,U.jsx)(o(331542).A,{style:{marginTop:1,marginRight:6}}),e.progressPercent?(0,U.jsx)(o(773382).A,{percentage:e.progressPercent}):e.progressText?(0,U.jsx)("span",{children:e.progressText}):null]})})};function K(e){const{store:t,uploadFiles:o,value:l,disabled:f,onChange:C,onDismiss:S}=e,k=z(l),A=(0,i().v3)(),M=(0,n.useRef)(),j=(0,n.useRef)(null),w=(0,r().uB)(void 0,h().A),{isLoading:I,progressPercent:T,progressText:P}=(0,r().O$)(w),R=(0,n.useCallback)((e=>{w.setState({isLoading:!0,progressPercent:0}),M.current=e}),[w]),O=(0,n.useCallback)((e=>{const{progressPercent:t,progressText:o}=e;w.setState({...w.state,progressPercent:t,progressText:o})}),[w]),B=(0,n.useCallback)((e=>{if(!M.current)return;const t=M.current.map(((t,o)=>{const n=e[o];return{name:t.name||n,url:n}}));C({value:[...t,...l]}),w.reset()}),[w,C,l]),F=(0,n.useCallback)((()=>{w.reset(),d().f1((0,U.jsx)(s().sA,{id:"filePropertyMenu.uploadFileFailedError.message",defaultMessage:"Upload failed."}))}),[w]),L=(0,n.useCallback)((e=>{c().I(),w.setState({isLoading:!0,progressPercent:0}),M.current=[e]}),[w]),_=(0,n.useCallback)((e=>{if(!M.current)return;const t=M.current[0];if(!t)return;const o={name:t.name||e,url:e};C({value:[...l,o]}),w.reset(),c().I()}),[w,C,l]),D=(0,n.useCallback)((e=>{const{originUrl:t,pastedSecureFile:o}=e,n={name:t,url:o?(0,a().xm)(o):t};C({value:[...l,n],pastedSecureFile:o}),w.reset(),c().I()}),[w,C,l]),E=(0,n.useCallback)((()=>{const e=j.current;if(!(e&&e instanceof Element))return;const o=p().A.getIntl();c().W(A,{originRect:e.getBoundingClientRect(),originGap:3,isSmallWidth:!0,showArrow:!0,title:o.formatMessage({id:"filePropertyMenu.header",defaultMessage:"File"}),currentTab:"file",tabs:[{type:"file",fileUpload:!0,imageUpload:!1,videoUpload:!1,onUpload:e=>{u().QM({environment:A,file:e[0],bucket:"secure",record:t.pointer,isFileBlock:!1,reportRichUploadMetrics:!0,onStart:L,onProgress:O,onComplete:_,onError:F})}},{type:"embed",onChange:D}]})}),[A,D,_,L,F,O,t.pointer]),W=(0,n.useCallback)((()=>{E()}),[E]),N=()=>{c().I()};(0,n.useEffect)((()=>((()=>{const{device:e}=A;o?u().Zn({environment:A,files:o,bucket:"secure",record:t.pointer,isFileBlock:!1,onBatchStart:R,onBatchProgress:O,onBatchComplete:B,onBatchError:F}):z(l)&&!e.isMobile&&E()})(),N)),[]);const V=A.device.isMobile?{menuType:g().gu.Modal,title:(0,U.jsx)(s().sA,{defaultMessage:"File property",id:"database.fileProperty.mobileMenu.title"}),right:(0,U.jsx)(v().DoneMenuText,{}),onClickRight:S}:{menuType:g().gu.Popup};return(0,U.jsx)(y().A,{debugName:"FilePropertyMenu",capture:!0,allowUndo:!0,allowEsc:!0,allowTabUntab:!0,children:(0,U.jsxs)(b().A,{...V,children:[(0,U.jsx)(Z,{value:l,disabled:f,store:t,onChange:C}),(0,U.jsxs)(x().A,{topBorder:!k&&!f,desktopStyle:{...k&&{paddingTop:3,paddingBottom:3}},children:[I&&(0,U.jsx)(H,{progressPercent:T,progressText:P}),!I&&!f&&(0,U.jsx)(m().A,{focused:!1,onClick:W,title:(0,U.jsx)(s().sA,{id:"database.fileProperty.focusedLabel",defaultMessage:"Add a file or image"}),ref:j})]})]})})}function z(e){return 0===e.length}function Y(e,t,o){o({value:t.map((t=>t.url===e.url?{name:e.name,url:e.url}:t))})}function $(e,t,o){o({value:t.filter((t=>t.url!==e))})}function G(e){let{url:t,value:o,disabled:n,store:r,onChange:a}=e;const s=(0,i().v3)(),{device:l}=s,d=o.find((e=>e.url===t));if(d){const e=d.url,t=d.name;return l.isMobile?(0,U.jsx)(x().A,{children:(0,U.jsx)(E,{store:r,name:t,url:e,onDelete:e=>$(e,o,a),onChange:e=>Y(e,o,a),disabled:n})}):(0,U.jsx)(E,{store:r,name:t,url:e,onDelete:e=>$(e,o,a),onChange:e=>Y(e,o,a),disabled:n})}return null}function Z(e){let{value:t,disabled:o,store:r,onChange:a}=e;const s=(0,i().v3)(),{device:d}=s,c=l().oE(t.map((e=>e.url)));return 0===c.length?null:d.isMobile||o?(0,U.jsx)(n.Fragment,{children:c.map((e=>(0,U.jsx)(G,{url:e,value:t,disabled:o,store:r,onChange:a},e)))}):(0,U.jsx)(x().A,{children:(0,U.jsx)(f().Ay,{direction:"vertical",keys:c,renderKey:e=>(0,U.jsx)(G,{url:e,value:t,disabled:o,store:r,onChange:a}),onDrop:e=>function(e,t,o){t({value:l().Ul(o,(t=>{const o=t.url;return o?e.indexOf(o):1/0}))})}(e,a,t)})})}},777849:(e,t,o)=>{o.d(t,{A:()=>m});var n=o(296540),i=()=>o(847249),r=()=>o(401497),a=()=>o(919709),s=()=>o(959013),l=()=>o(448619),d=()=>o(792002),c=()=>o(569777),u=()=>o(24157),p=()=>o(35392),g=o(474848);const h={display:"flex",alignItems:"center",borderRadius:6,padding:6,width:28,height:28};const m=function(e){let{style:t,children:n,disabled:s,onClick:p}=e;const m=(0,r().DP)(),b=(0,o(484714).v3)(),v=(0,i().K8)((()=>f(m)),[m]),x=(0,i().K8)((()=>function(e){if(e)return!0;if("editing"!==u().default.state.mode&&!c().A.isOpen())return!0;const t={[a().Ifu.User]:a().Ifu.User,[a().Ifu.Page]:a().Ifu.Page,[a().Ifu.CustomEmoji]:a().Ifu.CustomEmoji,[a().Ifu.Comment]:a().Ifu.Comment,[a().Ifu.Bot]:a().Ifu.Bot,[a().Ifu.Date]:a().Ifu.Date,[a().Ifu.ExternalObjectInstance]:a().Ifu.ExternalObjectInstance,[a().Ifu.TemporaryPage]:a().Ifu.TemporaryPage,[a().Ifu.TemplateVariable]:a().Ifu.TemplateVariable,[a().Ifu.FormulaPageProperty]:a().Ifu.FormulaPageProperty,[a().Ifu.FormulaContextValue]:a().Ifu.FormulaContextValue,[a().Ifu.Group]:a().Ifu.Group,[a().Ifu.Team]:a().Ifu.Team,[a().Ifu.Citation]:a().Ifu.Citation,[a().Ifu.LinkMention]:a().Ifu.LinkMention,[a().Ifu.AssistantInstructionsCollection]:a().Ifu.AssistantInstructionsCollection,[a().Ifu.GeoPoint]:a().Ifu.GeoPoint,[a().Ifu.SlackSpecialMention]:a().Ifu.SlackSpecialMention};for(const o of Object.values(t))if((0,d().y_)(o))return!0;return!1}(s)),[s]);return(0,g.jsx)(o(859428).A,{renderTooltip:()=>(0,g.jsx)(y,{}),render:e=>(0,g.jsx)(o(704152).A,{style:{...h,...v.equationButton,...t},disabled:x,disabledFeedback:x,onClick:e=>function(e,t,o){l().Wx({environment:t,analyticsFrom:"rich_text_menu"}),o&&o(e)}(e,b,p),...e,children:n})})};function f(e){return{equationButton:{fill:(0,d().B1)(a().Ifu.Equation)?e.blueColor:e.icon.primary},keyboardShortcut:{color:e.text.contrastSecondary}}}function y(){const e=(0,r().DP)(),t=(0,i().K8)((()=>f(e)),[e]);return(0,g.jsxs)(n.Fragment,{children:[(0,g.jsx)("div",{children:(0,g.jsx)(s().sA,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Mark as equation"})}),(0,g.jsx)("div",{children:(0,g.jsx)(p().A,{style:t.keyboardShortcut,name:"openEquationMenu"})})]})}},780243:(e,t,o)=>{o.d(t,{A:()=>b});var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(401497),s=()=>o(919709),l=()=>o(959013),d=()=>o(21869),c=()=>o(501666),u=()=>o(792002),p=()=>o(711319),g=()=>o(24157),h=()=>o(704152),m=()=>o(35392),f=()=>o(859428),y=o(474848);function b(e){const t=(0,a().DP)(),o=(0,i().v3)(),b=(0,r().K8)((()=>(0,u().B1)(s().Ifu.Link)),[]),v=(0,r().K8)((()=>function(e){if(e)return!0;if("editing"!==g().default.state.mode&&!p().A.state.open)return!0;if((0,u().y_)(s().Ifu.User)||(0,u().y_)(s().Ifu.Bot)||(0,u().y_)(s().Ifu.Date)||(0,u().y_)(s().Ifu.Page)||(0,u().y_)(s().Ifu.Group))return!0;return!1}(e.disabled)),[e.disabled]);return(0,y.jsx)(f().A,{renderTooltip:()=>(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)("div",{children:(0,y.jsx)(l().sA,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip"})}),(0,y.jsx)("div",{children:(0,y.jsx)(m().A,{style:{color:t.text.contrastSecondary},name:"openLinkMenuOrOpenSearch"})})]}),render:n=>(0,y.jsx)(h().A,{style:{display:"flex",alignItems:"center",borderRadius:6,paddingLeft:7,paddingRight:6,...b&&{color:t.blueColor},whiteSpace:"nowrap",...e.style},disabled:v,disabledFeedback:v,...n,onClick:()=>function(e){c().fi({type:"focusOnly",focus:!0}),(0,d().s)(e,{action:s().Ifu.Link})}(o),children:e.children})})}},801678:(e,t,o)=>{o.d(t,{A:()=>f});var n=o(296540),i=()=>o(662303),r=()=>o(484714),a=()=>o(847249),s=()=>o(955825),l=()=>o(959013),d=()=>o(100622),c=()=>o(496603),u=()=>o(284371),p=()=>o(720665),g=()=>o(145214),h=o(474848);const m={isRepositioning:!1};const f=function(e){const t=(0,n.useRef)(null),i=(0,r().v3)(),{isMobile:l}=(0,r().Y0)(),[d,u]=(0,n.useState)(m),g=(0,n.useCallback)((()=>{u(m)}),[]),{renderControl:f,onFlushTemporaryPosition:b,style:v,source:x,store:C}=e,{isRepositioning:S,image:k,startDragRenderedPosition:A,startDragImageScreenHeight:M}=d,j=(0,a().K8)((()=>0===o(502438).default.state.stores.length),[]),[w,I]=(0,n.useState)(!1),T=(0,a().uB)(e.mouseStore,o(454305).A),P=(0,a().K8)((()=>T.state.mouseEntered),[T]),R=(0,o(401497).IS)((()=>({dragContainer:{width:"100%",cursor:S?"move":"inherit"},container:{position:"relative",width:"100%",zIndex:1}})),[S]),O=(0,a().K8)((()=>function(e,t,o){return(0,c().Et)(o)?o:function(e,t){if("gallery"===e||"board"===e){const e=t.getFormat().card_cover_position;if((0,c().Et)(e))return e}const o=.5;if(t.isCollectionView()){const e=t.getCollectionStore();if(e){const t=e.getFormat().collection_cover_position;return(0,p().pN)(t)?o:t}}const n=t.getFormat(),i=n.page_cover_position;if((0,c().Et)(i))return i;return o}(e,t)}(x,C,d.temporaryPosition)),[d.temporaryPosition,x,C]);(0,n.useEffect)((()=>{const e=e=>{const o=t.current;o&&!o.contains(e.target)&&S&&b({imagePosition:O,reset:()=>{T.reset(),g()}})};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)}),[O,S,T,b,g]),S&&!j&&g();const B=(0,n.useMemo)((()=>(0,c().nF)((e=>{T.setState({...T.state,mouseEntered:!0})}),100)),[T]),F=(0,n.useMemo)((()=>(0,c().sg)((e=>{T.setState({...T.state,mouseEntered:!1})}),100)),[T]),L=(0,n.useCallback)(((e,t)=>{o(778417).IU({environment:i});const n=new Image;n.onload=()=>{u((e=>({...e,isRepositioning:!0,image:n})))},t&&(n.src=t)}),[i]),_=(0,n.useCallback)((e=>{b({imagePosition:O,reset:()=>{g()}})}),[O,b,g]),D=(0,n.useCallback)((e=>{const t=e.target;void 0!==t&&t instanceof HTMLElement&&(0,o(819121).p)(t)&&I(!0)}),[]),U=(0,n.useCallback)((()=>{I(!0)}),[]),E=(0,n.useCallback)((e=>{if(k&&S){const e=t.current;if(e&&e instanceof Element){const t=e.getBoundingClientRect().width/k.width*k.height;u((e=>({...e,startDragImageScreenHeight:t,startDragRenderedPosition:O})))}}}),[k,O,S]),W=(0,n.useCallback)((e=>{if(S){const t=e.diffY/(M||0)+(A||0);u((e=>({...e,temporaryPosition:(0,c().LI)((0,o(40845).A)(t,0,1),4)})))}}),[S,M,A]),N=(0,n.useCallback)((()=>{u((e=>({...e,startDragImageScreenHeight:void 0,startDragRenderedPosition:void 0})))}),[]),V=(0,a().K8)((()=>f({handleRepositionClick:L,handleSavePositionClick:_,handleCancelClick:g,isVisible:l||P||w||S,isRepositioning:S})),[L,_,w,l,S,P,f,g]);return(0,h.jsxs)("div",{ref:t,onFocus:D,onBlur:U,onMouseEnter:B,onMouseMove:B,onMouseLeave:F,...(0,s().AH)(R.container,v),children:[(0,h.jsx)(o(603820).A,{onDraggableDragStart:E,onDraggableDragMove:W,onDraggableDragEnd:N,onDraggableDragCancel:N,disabled:!S,render:t=>(0,h.jsx)("div",{...(0,s().AH)(R.dragContainer),...t,children:e.render({imagePosition:O,isRepositioning:S})})}),(0,h.jsx)(y,{small:e.small,isRepositioning:S}),V]})};function y(e){let{small:t,isRepositioning:o}=e;if(t)return null;const n={background:d().Ay.blackWithAlpha(.4),borderRadius:4,color:d().Ay.white,fontSize:12,fontFamily:u().vc(i().locale).sans,width:180,left:"calc(50% - 90px)",padding:"0.3em 1.5em 0.3em",pointerEvents:"none",position:"absolute",top:"calc(50% - 10px)",textAlign:"center"};return(0,h.jsx)(g().A,{visible:o,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:n,children:(0,h.jsx)(l().sA,{defaultMessage:"Drag image to reposition",id:"withImageRepositioning.dragImage.text"})})}},867772:(e,t,o)=>{o.d(t,{Ay:()=>l,Gi:()=>r,Wc:()=>n,pF:()=>a,vS:()=>i});const n="loadingLocalImage",i="uploading",r="downloading",a="loaded";class s extends(()=>o(757695))().default{getInitialState(){return{loadingMode:a}}}const l=s},940433:(e,t,o)=>{o.d(t,{F:()=>y});var n=o(296540),i=()=>o(484714),r=()=>o(847249),a=()=>o(66689),s=()=>o(636090),l=()=>o(416504),d=()=>o(187174),c=()=>o(799829),u=()=>o(959013),p=()=>o(449506),g=()=>o(175116),h=()=>o(706513),m=o(474848);const f=(0,u().YK)({cannotSetSprintToCurrentTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToCurrentTooltip",defaultMessage:"Current sprint already exists"},cannotSetSprintToNextTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToNextTooltip",defaultMessage:"Next sprint already exists"},cannotSetSprintToLastTooltip:{id:"SprintStatusPropertyMenu.cannotSetSprintToLastTooltip",defaultMessage:"Last sprint already exists"}});function y(e){const{blockPropertyValueOverlayStore:t}=e,o=(0,i().v3)(),y=(0,g().ET)(),b=(0,r().O$)(y.normalizedSchemaStore),v=function(e){let{sprintCollectionStore:t,environment:o,normalizedBlockSchema:n}=e;const[{value:i,status:r}]=(0,d().Yb)((async()=>{var e;if(!t)return;const i=t.getSchema(),r=t.getFormat().app_config_uri;if(!r||r!==s().av)return;const d=(0,c().qk)(i,r).includes("last"),u=c().n$[r],g=u.current.reducer.get(n),h=u.next.reducer.get(n),m=u.last.reducer.get(n);if(!g||!h)return;const f={userId:o.currentUser.id,userTimeZone:(0,l().P)(),searchQuery:void 0,reducers:{[a().Xk]:g,[a().tO]:h,...d&&m?{[a().el]:m}:{}},currentPageInRelatedCollection:void 0},y=null===(e=t.getParentBlockStore())||void 0===e?void 0:e.getCollectionViewStores()[0],b=t.getSpaceId();if(!y)return;const v=await p().callApi({eventName:"queryCollection",environment:o,data:{source:{type:"collection",id:t.id,spaceId:b},collectionView:{id:y.id,spaceId:b},loader:f},tracking:{src:"sprint_status_overlay_check"}});if("success"!==v.type)return;const x=v.data.result.reducerResults[a().Xk],C=v.data.result.reducerResults[a().tO];if("results"!==x.type||"results"!==C.type)return;const S=x.blockIds.length>0,k=C.blockIds.length>0;if(!d)return{hasCurrentSprint:S,hasNextSprint:k,hasLastSprint:!1};const A=v.data.result.reducerResults[a().el];if("results"!==A.type)return;return{hasCurrentSprint:S,hasNextSprint:k,hasLastSprint:A.blockIds.length>0}}),[o,n,t]);if("resolved"!==r||!i)return;return i}({sprintCollectionStore:(0,r().K8)((()=>{const e=t.state;if(e.isOpen)return e.store.getAssociatedCollectionStore()}),[t]),environment:o,normalizedBlockSchema:b}),x=(0,u().tz)(),C=(0,n.useCallback)((e=>void 0===v&&[a().tO,a().Xk,a().el].includes(e)?{disabled:!0}:e===a().tO&&null!=v&&v.hasNextSprint?{disabled:!0,disableReasonMessage:x.formatMessage(f.cannotSetSprintToNextTooltip)}:e===a().Xk&&null!=v&&v.hasCurrentSprint?{disabled:!0,disableReasonMessage:x.formatMessage(f.cannotSetSprintToCurrentTooltip)}:e===a().el&&null!=v&&v.hasLastSprint?{disabled:!0,disableReasonMessage:x.formatMessage(f.cannotSetSprintToLastTooltip)}:{disabled:!1}),[v,x]);return(0,m.jsx)(h().r,{...e,shouldDisableOption:C})}},948352:(e,t,o)=>{o.d(t,{M:()=>i});o(296540);var n=o(474848);const i=(0,o(340498).wt)("templatesColor",{viewBox:"0 0 20 20",svg:(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M6.39733 5.67853C5.89764 5.50234 5.36002 5.40649 4.8 5.40649C2.14904 5.40649 0 7.55432 0 10.2038C0 12.8533 2.14904 15.0011 4.8 15.0011C6.52165 15.0011 8.0316 14.0952 8.87867 12.7343L5.26487 12.0975L6.39733 5.67853Z",fill:"#3C9ED7"}),(0,n.jsx)("path",{d:"M17.3126 3.66609L7.85843 2L6.19141 11.4489L10.6545 12.2354L14.3998 5.81854L16.3449 9.15116L17.3126 3.66609Z",fill:"#E7595E"}),(0,n.jsx)("path",{d:"M8.80078 17L14.4008 7.4054L20.0008 17H8.80078Z",fill:"#F5BC4E"})]})})}}]);