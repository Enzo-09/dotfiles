"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[4390],{138873:(e,t,o)=>{o.d(t,{tx:()=>Z,ZR:()=>ee,Of:()=>Q,Ay:()=>te,uJ:()=>X});o(898992),o(354520),o(581454),o(737550);var i=o(296540),n=()=>o(484714),a=()=>o(847249),r=()=>o(401497),s=()=>o(634201),l=()=>o(546703),d=()=>o(340498),c=o(474848);const u={viewBox:"0 0 16 16",svg:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("path",{d:"M8 1.875a6.125 6.125 0 1 0 .918 12.182l.091-.014-.032-.087a4 4 0 0 1-.233-1.056l-.006-.08-.08.01q-.323.045-.658.045a4.875 4.875 0 1 1 4.83-4.216l-.01.079.08.006q.555.044 1.056.233l.087.032.014-.092q.068-.449.068-.917A6.125 6.125 0 0 0 8 1.875"}),(0,c.jsx)("path",{d:"M5.892 6.025c-.444 0-.779.413-.779.891s.335.891.78.891c.443 0 .778-.413.778-.891s-.335-.891-.779-.891m4.216 0c-.444 0-.779.413-.779.891s.335.891.779.891.779-.413.779-.891-.335-.891-.779-.891M6.499 9.323a.575.575 0 0 0-.954.642A2.96 2.96 0 0 0 9.008 11.1l.03-.011.013-.03a3.9 3.9 0 0 1 1.374-1.658l.066-.045-.048-.063a.576.576 0 0 0-.933.03 1.82 1.82 0 0 1-1.506.802A1.81 1.81 0 0 1 6.5 9.323m6.1.202a3.075 3.075 0 1 0 0 6.15 3.075 3.075 0 0 0 0-6.15m-.425 1.409a.425.425 0 1 1 .85 0v1.241h1.242a.425.425 0 1 1 0 .85h-1.242v1.242a.425.425 0 0 1-.85 0v-1.242h-1.242a.425.425 0 0 1 0-.85h1.242z"})]})},m=(0,d().wt)("emojiFacePlusSmall",u);var h=()=>o(483690),g=()=>o(959013),p=()=>o(100622),x=()=>o(534177),f=()=>o(284371),v=()=>o(112873),j=()=>o(383594),S=()=>o(751156),y=()=>o(145214),b=()=>o(704152),A=()=>o(285790),C=()=>o(859428),T=()=>o(56086),R=()=>o(508398),w=()=>o(87878),k=()=>o(486666),I=()=>o(962730),B=()=>o(630116),L=()=>o(249349),M=()=>o(528787),E=()=>o(406699),z=()=>o(928600),N=()=>o(678553),D=()=>o(987017),P=()=>o(712030),U=()=>o(722872),K=()=>o(683097),W=()=>o(811879);function _(e){let{reactionStores:t,initialIndex:o}=e;const[r,l]=i.useState(o),d=(0,g().tz)(),u=(0,n().v3)(),m=(0,a().K8)((()=>(0,P().FN)(u)),[u]),h=(0,a().K8)((()=>t.map(((e,t)=>{const o=e.getIcon();if(!o)return;const i="raw"!==m||s().qg.isCustomEmojiString(o);return(0,c.jsx)("span",{style:i&&t!==r?{opacity:.5}:{},children:(0,c.jsx)(T().A,{size:14,char:o})},o)})).filter(x().O9)),[t,r,m]),p=(0,a().K8)((()=>t[r].getActorStores().map((e=>({id:e.id,store:e,name:e.getDisplayName(d)}))).filter(x().O9)),[t,r,d]);return(0,c.jsxs)(z().A,{menuType:U().gu.ActionSheet,children:[(0,c.jsx)(D().Ay,{tabStyle:{flex:1,justifyContent:"center",display:"flex",minWidth:60},tabs:h,selectedIndex:r,onChange:e=>l(e)}),p.map((e=>(0,c.jsx)(N().Ay,{title:e.name,dontShrinkIcon:!0,icon:(0,c.jsx)(W().E,{authorStore:e.store,avatarSize:20,avatarStyle:{width:20,height:20},placeholderStyle:{width:20,height:20}})},e.id)))]})}function F(e){const t=(0,n().Y0)(),o=(0,a().K8)((()=>B().Lk.getUserVisibleReactions(e.store)),[e.store]),r=(0,i.useRef)(null),s=(0,K().A)({onLongPress:()=>{var e;return null===(e=r.current)||void 0===e?void 0:e.setOpen(!0)}});if(!t.isMobile)return(0,c.jsx)(c.Fragment,{children:e.children});const l=o.findIndex((t=>!e.reactionStore||t===e.reactionStore))??0;return(0,c.jsx)(E().Ay,{bottomSheetBackgroundColor:"elevated",ref:r,renderOrigin:()=>(0,c.jsx)("div",{...s,onTouchStart:e=>{e.stopPropagation(),s.onTouchStart()},onTouchMove:e=>{e.stopPropagation(),s.onTouchMove(e)},onTouchEnd:e=>{e.stopPropagation(),s.onTouchEnd()},onTouchCancel:e=>{e.stopPropagation(),s.onTouchCancel()},children:e.children}),bottomSheetInitialState:"half",popupType:t.isTablet?E().z7.Popup:E().z7.BottomSheet,render:()=>(0,c.jsx)(_,{initialIndex:l,reactionStores:o})},e.store.id)}const O=(0,g().YK)({addReaction:{defaultMessage:"Add reaction",id:"ReactionBar.newReaction.ariaLabel"},resolveDiscussion:{defaultMessage:"Resolve",id:"ReactionBar.resolveDiscussion.ariaLabel"},emojiPickerTitle:{defaultMessage:"Reaction",id:"ReactionBar.emojiModalMenu.title"}});function $(){const{isMobile:e}=(0,n().Y0)();return(0,r().IS)((t=>({reaction:{...Q,display:"flex",padding:"1px 6px 1px 6px",justifyContent:"center",alignItems:"center",gap:"4px",border:`1px solid ${t.regularDividerColor}`,borderRadius:"100px",fontSize:14,fontVariantNumeric:"tabular-nums",background:t.whiteButtonBackground,...e?ee:{}},count:{color:t.text.secondary,fontSize:e?f().J.UISmall.mobile:f().J.UISmall.desktop},countReacted:{color:t.blueColor},reacted:{background:p().Ay.blueWithAlpha(.08),border:`1px solid ${t.filterPillBorder}`,fontWeight:500},reactedHover:{background:p().Ay.blueWithAlpha(.18)},emojiStyle:{color:"black",display:"flex"},reactionIcon:{width:d().Ev.sm,height:d().Ev.sm,fill:t.icon.secondary,marginRight:1},dropShadow:{boxShadow:t.shadowSM}})),[e])}function q(e){const{store:t,disabled:o,onClick:i,size:r,dropShadow:s}=e,l=(0,a().K8)((()=>t.getActors()),[t]),d=(0,a().K8)((()=>t.getIcon()),[t]),u=$(),{currentUser:m}=(0,n().v3)();if(!l||!d)return null;if(0===l.length)return null;const h=l.some((e=>e.id===m.id)),g={...u.reaction,...h&&u.reacted,...s&&u.dropShadow},p={...u.count,...h&&u.countReacted};return(0,c.jsx)(C().A,{textWrap:!0,style:{maxWidth:250,width:"max-content"},placement:I().W.Bottom,delayThreshold:300,renderTooltip:()=>(0,c.jsx)(V,{store:t,icon:d}),render:e=>(0,c.jsxs)(b().A,{disabled:o,style:g,hoveredStyle:h?u.reactedHover:void 0,onClick:i,...e,children:[(0,c.jsx)("span",{style:u.emojiStyle,children:(0,c.jsx)(T().A,{size:r??14,char:d})}),(0,c.jsx)("span",{style:p,children:l.length})]})})}function H(e){const{parentStore:t,reactions:o,discussionLocation:s,disabled:l,onReact:d}=e,u=(0,n().v3)(),[m,h]=(0,i.useState)(e.maxReactionsToShow),{reactionsToShow:p,remainingCount:x}=(0,a().K8)((()=>({reactionsToShow:o.slice(0,m),remainingCount:void 0!==m?o.length-m:0})),[m,o]),f=$(),v=(0,r().IS)((e=>({remaining:{...f.reaction,...f.count,color:e.text.secondary}})),[f.reaction,f.count]);return(0,c.jsxs)(c.Fragment,{children:[p.map((e=>(0,c.jsx)(F,{reactionStore:e,store:t,children:(0,c.jsx)(q,{disabled:l,store:e,onClick:()=>{e.isDefined()&&(null==d||d(),S().createAndCommit({environment:u,userAction:"Comment.toggleReaction",canUndo:!0,perform:o=>M().toggleReaction({environment:u,transaction:o,store:t,icon:e.getIcon(),discussionLocation:s})}))}})},e.id))),x>0?(0,c.jsx)("div",{role:"button",tabIndex:0,style:v.remaining,onClick:()=>h(void 0),children:(0,c.jsx)(g().sA,{defaultMessage:"+{count}",id:"ReactionBar.remaining",values:{count:x}})}):null]})}function V(e){let{store:t,icon:o}=e;const i=(0,g().tz)(),n=(0,a().K8)((()=>t.getActorStores()),[t]),r=(0,a().K8)((()=>n.map((e=>e.getDisplayName(i))).filter(x().O9)),[n,i]),l=s().qg.isCustomEmojiString(o),d=(0,a().K8)((()=>{if(l){const e=s().qg.fromCustomEmojiString(o).pointer;return(0,w().nA)({parentStore:void 0,pointer:e})}}),[o,l]),u=(0,a().K8)((()=>{if(null!=d&&d.isDefined())return null==d?void 0:d.getModel().getRenderTitle()}),[d]);return l?d?(0,c.jsx)(R().A,{type:"custom",customEmojiStore:d,text:(0,c.jsx)(Y,{names:r,emojiNameOrIcon:(0,c.jsx)("span",{className:"notranslate",children:u}),isDeletedCustomEmoji:!1}),deletedText:(0,c.jsx)(Y,{names:r,emojiNameOrIcon:(0,c.jsx)("span",{className:"notranslate",children:u}),isDeletedCustomEmoji:!0})}):null:(0,c.jsx)(R().A,{type:"unicode",emoji:o,text:(0,c.jsx)(Y,{names:r,emojiNameOrIcon:(0,c.jsx)(T().A,{size:12,char:o}),isDeletedCustomEmoji:!1})})}function Y(e){let{names:t,emojiNameOrIcon:o,isDeletedCustomEmoji:i}=e;const n=(0,r().IS)((e=>({text:{color:e.text.contrastSecondary}})),[]);return t.length>50?(0,c.jsx)(g().sA,{defaultMessage:"{additionalNames, plural, one {{names} and {additionalNames} other <medium>reacted with</medium> {icon}} other {{names} and {additionalNames} others <medium>reacted with</medium> {icon}}} {isDeletedCustomEmoji, select, true {<medium>(deleted)</medium>} other {}}",id:"ReactionBar.hoverTooltip.textAbbreviated",values:{additionalNames:t.length-50,names:t.slice(0,50).join(", "),medium:e=>(0,c.jsx)("span",{style:n.text,children:e}),icon:o,isDeletedCustomEmoji:i}}):(0,c.jsx)(g().sA,{defaultMessage:"{nameOrNames} <medium>reacted with</medium> {icon} {isDeletedCustomEmoji, select, true {<medium>(deleted)</medium>} other {}}",id:"ReactionBar.hoverTooltip.text",values:{numberOfNames:t.length,nameOrNames:t.join(", "),medium:e=>(0,c.jsx)("span",{style:n.text,children:e}),icon:o,isDeletedCustomEmoji:i}})}function G(e){const{store:t,discussionLocation:o,onEmojiSelection:a,style:s}=e,u=(0,n().v3)(),m=(0,i.useRef)(null),h=(0,n().Y0)(),p=(0,r().IS)((e=>({container:{padding:2,display:"flex",boxShadow:e.shadowSM,backgroundColor:e.buttonGroupBackground,borderRadius:h.isMobile?3:4,...s},addIcon:{width:d().Ev.default,height:d().Ev.default,fill:e.icon.secondary},iconButton:{height:24,width:24,flex:"0 0 auto"}})),[h.isMobile,s]),x=(0,g().tz)();return(0,c.jsx)("div",{style:p.container,children:(0,c.jsx)(A().A,{hasBackground:!0,ariaLabel:x.formatMessage(O.addReaction),showShadow:!1,icon:()=>(0,l().r)(p.addIcon),style:p.iconButton,ref:m,onClick:()=>X(u,x,t,null==m?void 0:m.current,o,a)})})}function J(e){let{store:t,discussionLocation:o,onEmojiSelection:a}=e;const r=(0,n().v3)(),s=(0,i.useRef)(null),l=$(),d=(0,g().tz)();return(0,c.jsx)(b().A,{style:{...l.reaction,minWidth:"2em"},ref:s,onClick:()=>X(r,d,t,null==s?void 0:s.current,o,a),children:m(l.reactionIcon)})}function X(e,t,o,i,n,a){if(!(i instanceof Element))return;const r=i.getBoundingClientRect();j().W(e,{originGap:4,originRect:r,popupWidth:k().jv,popupHeight:k().GF,isSmallWidth:!1,title:t.formatMessage(O.emojiPickerTitle),currentTab:"emoji",tabs:[{type:"emoji",title:(0,c.jsx)(g().sA,{defaultMessage:"Emoji",id:"recordIcon.emojiTab.title"}),hideRandomButton:!0,onChange:(t,i)=>{a&&a(),S().createAndCommit({environment:e,userAction:"Comment.toggleReactionFromMenu",canUndo:!0,perform:a=>{M().toggleReaction({environment:e,transaction:a,store:o,icon:t,discussionLocation:n}),i&&i.keepVisible||j().I()}})}}]})}function Z(e){const{parentStore:t,discussionLocation:o,onReact:s,focused:u,showAddReactionButton:m=!0,additionalItems:p}=e,[x,f]=(0,i.useState)(!1),j=(0,n().Y0)(),b=(0,r().IS)((e=>({reactionIcon:{height:d().Ev.default,width:d().Ev.default,fill:e.icon.secondary},resolveIcon:{height:16,width:16,fill:e.icon.secondary},container:{gap:"4px",marginTop:"post_top_level_discussion"===o?0:12,paddingBottom:0,display:"flex",flexWrap:"wrap",alignItems:"center",willChange:"transform",transition:"transform 200ms ease",transformOrigin:"center left",transform:u?"scale3d(1.05)":"scale(1)"},actionButton:{borderRadius:"50%",marginLeft:2},postReactionButton:{...Q,width:40,padding:"0 10px 0 10px",borderRadius:13,borderWidth:1,borderColor:e.stroke.secondary,borderStyle:"solid",...j.isMobile?ee:{}}})),[u,o,j.isMobile]),T=e=>{S().createAndCommit({userAction:"Discussion.handleResolve",environment:R,canUndo:!0,perform:e=>{(0,L().j)({environment:R,discussionStore:t,transaction:e,discussionLocation:o})}}),v().UP(),null==e||e.stopPropagation()},R=(0,n().v3)(),w=(0,a().K8)((()=>!!R.currentUser.isLoggedIn()&&t.canComment()),[t,R.currentUser]),k=(0,a().K8)((()=>{var e;return!!R.currentUser.isLoggedIn()&&(t.canEdit()&&!(null!==(e=t.getParentStore())&&void 0!==e&&e.isPost()))}),[t,R.currentUser]),I=(0,i.useRef)(null),M=(0,g().tz)(),E=x||e.focused,z=(0,a().K8)((()=>B().Lk.getUserVisibleReactions(t)),[t]),N=()=>{X(R,M,t,null==I?void 0:I.current,o,s)};return(0,c.jsxs)("div",{onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),style:b.container,children:[(0,c.jsx)(H,{parentStore:t,reactions:z,discussionLocation:o,disabled:!w,onReact:s,maxReactionsToShow:j.isMobile?6:void 0}),m&&(0,c.jsxs)(y().A,{animate:{opacity:E?1:0},style:{display:"flex",alignItems:"center",marginLeft:2},children:[w&&(0,c.jsx)(F,{store:t,children:(0,c.jsx)(C().A,{renderTooltip:()=>(0,c.jsx)(g().sA,{...O.addReaction}),render:t=>(0,c.jsx)(A().A,{style:"post_top_level_discussion"===e.discussionLocation?b.postReactionButton:b.actionButton,hasBackground:!1,showShadow:!1,ref:I,icon:()=>(0,l().r)(b.reactionIcon),onClick:N,...t,ariaLabel:M.formatMessage(O.addReaction)})})}),k&&(0,c.jsx)(C().A,{renderTooltip:()=>(0,c.jsx)(g().sA,{...O.resolveDiscussion}),render:e=>(0,c.jsx)(A().A,{style:{borderRadius:"50%",marginLeft:4},hasBackground:!1,showShadow:!1,icon:()=>(0,h().q)(b.resolveIcon),onClick:T,...e,ariaLabel:M.formatMessage(O.resolveDiscussion)})})]}),p]})}const Q={height:25},ee={height:32,borderRadius:100,fontSize:13,padding:"1px 12px 1px 12px",minWidth:44},te=i.memo((function(e){const{parentStore:t,discussionLocation:i,onReactionToggle:r,newReactionStyle:s}=e,l=(0,n().v3)(),d=(0,a().K8)((()=>!!l.currentUser.isLoggedIn()&&t.canComment()),[t,l.currentUser]),u=(0,a().K8)((()=>B().Lk.getUserVisibleReactions(t)),[t]),m=(0,a().K8)((()=>{if(t.table===o(343666).SN){const e=t.getParentBlockStore();return Boolean(e&&e.pathIsDead())}if(t.table===o(197959).$Y){const e=t.getParentStore();return Boolean(e&&e.pathIsDead())}return!1}),[t]),h=d&&!m&&u.length>0,g=d&&!m&&0===u.length;return(0,c.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:[u.map((e=>(0,c.jsx)(F,{reactionStore:e,store:t,children:(0,c.jsx)(q,{disabled:!d||m,store:e,onClick:()=>{if(e.isDefined()){const o=S().createAndCommit({environment:l,userAction:"Comment.toggleReaction",canUndo:!0,perform:o=>M().toggleReaction({environment:l,transaction:o,store:t,icon:e.getIcon(),discussionLocation:i})});void 0!==o.performResult&&r&&r(o.performResult)}}})},e.id))),h&&(0,c.jsx)(F,{store:t,children:(0,c.jsx)(J,{store:t,discussionLocation:i,onEmojiSelection:void 0!==r?()=>r("Added"):void 0})}),g&&(0,c.jsx)(G,{store:t,discussionLocation:i,onEmojiSelection:void 0!==r?()=>r("Added"):void 0,style:s})]})}))},436683:(e,t,o)=>{o.d(t,{Y:()=>M,e:()=>L});var i=o(296540),n=()=>o(847249),a=()=>o(401497),r=()=>o(563884),s=o(474848);const l=(0,o(340498).wt)("suggestionExtraSmall",{viewBox:"0 0 10 9",svg:(0,s.jsxs)("g",{children:[(0,s.jsx)("path",{d:"M5.175 4.745l-.906.339c-.07.027-.14.012-.205-.045-.064-.057-.08-.127-.048-.212l.342-.899L7.492.798l.814.813-3.131 3.134zm3.4-3.397L7.76.53l.359-.352A.617.617 0 018.48.005a.364.364 0 01.33.105l.14.14c.1.105.145.226.134.365a.596.596 0 01-.168.366l-.341.366z"}),(0,s.jsx)("path",{d:"M4.91 1.962L5.969.906H2.704c-.354 0-.66.072-.92.216-.26.14-.46.341-.601.601-.142.26-.212.566-.212.92v2.754c0 .354.074.66.222.92.148.26.345.461.591.605.249.141.524.212.827.212h.25v.694c0 .214.056.382.167.506a.603.603 0 00.465.184.84.84 0 00.383-.092c.125-.06.27-.16.434-.301l1.138-.991h1.846c.353 0 .66-.07.92-.212.26-.144.46-.345.6-.605a1.89 1.89 0 00.213-.92V2.643c0-.114-.007-.223-.022-.327l-.433.443-.601.602V5.32c0 .253-.064.442-.192.567-.125.126-.314.188-.567.188h-1.85a.757.757 0 00-.307.051.962.962 0 00-.256.192L3.743 7.349v-.926c0-.125-.031-.214-.093-.267a.372.372 0 00-.256-.082h-.608c-.251 0-.44-.062-.568-.188-.125-.125-.188-.314-.188-.567V2.72c0-.253.063-.442.188-.567.128-.128.317-.192.568-.192H4.91z"})]})});var d=()=>o(120739),c=()=>o(959013),u=()=>o(284371),m=()=>o(187485),h=()=>o(296798),g=()=>o(824160),p=()=>o(125565),x=()=>o(659799),f=()=>o(47373),v=()=>o(907514),j=()=>o(963589),S=()=>o(12974),y=()=>o(351360),b=()=>o(141465),A=()=>o(630116),C=()=>o(898808),T=()=>o(848565),R=()=>o(811879);function w(e){let{shouldShowFullProfiles:t,personProfileUrl:o,displayName:i,styles:n}=e;return o&&t?(0,s.jsx)(m().A,{href:o,children:(0,s.jsx)("div",{style:n.author,children:i||(0,s.jsx)("span",{style:n.placeholder})})}):(0,s.jsx)("div",{style:n.author,children:i||(0,s.jsx)("span",{style:n.placeholder})})}function k(e){let{teamStore:t,teamName:o,iconSize:i,styles:n}=e;return t?(0,s.jsx)(h().A,{style:n.linkBox,href:(0,d().a)({teamId:t.id}),children:(0,s.jsxs)("div",{style:n.teamIconAndName,children:[(0,s.jsx)(C().x,{size:i,store:t,disabled:!1}),(0,s.jsx)("span",{style:n.teamName,children:o})]})}):null}function I(e){let{shouldEnablePersonHoverCard:t,authorStore:o,size:i,styles:n}=e;return(0,s.jsx)(R().E,{hasTooltip:!t,authorStore:o,avatarSize:i,avatarStyle:n.avatar,placeholderStyle:n.commentAuthorPlaceholder})}function B(e){let{createdTime:t,lastEditedTime:o,style:i}=e;const n=o&&o>t+5e3;return(0,s.jsx)(p().A,{isSmall:!0,isSecondaryColor:!0,isMultiline:!0,style:i,children:n?(0,s.jsx)(z,{createdTime:t,lastEditedTime:o}):(0,s.jsx)(E,{createdTime:t})})}function L(e){let{lastEditedTime:t,createdTime:o,location:a,teamStore:r,authorStore:l}=e;const d=(0,c().tz)(),u=(0,i.useRef)(null),m=(0,n().K8)((()=>(0,f().qm)()),[]),h=(0,n().K8)((()=>(0,f().F0)()),[]),g=(0,n().K8)((()=>l.getDisplayName(d)),[l,d]),p=(0,n().K8)((()=>null==r?void 0:r.getName()),[r]),x=N({location:a,avatarSize:35,authorFontSize:15,authorAndTeamNameLetterSpacing:-.24,enableTeamNameUnderline:!1}),v=(0,n().K8)((()=>{const e=l.id;return(0,S().M)(e,y().default.state.currentSpaceStore)||""}),[l]);return o?(0,s.jsxs)("div",{style:{...x.mobileAuthorRow},children:[(0,s.jsx)("div",{style:{...x.user,...x.mobileUserAvatar},children:(0,s.jsx)(I,{shouldEnablePersonHoverCard:m,authorStore:l,size:35,styles:x})}),(0,s.jsxs)("div",{style:{...x.mobileUserAndTeamLink},children:[(0,s.jsx)("div",{style:x.userRow,children:(0,s.jsxs)("div",{ref:u,style:x.user,children:[(0,s.jsx)(w,{shouldShowFullProfiles:h,personProfileUrl:v,displayName:g,styles:x}),(0,s.jsx)(B,{createdTime:o,lastEditedTime:t,style:x.timestamp})]})}),(0,s.jsx)("div",{style:{...x.user,...x.mobileTeamLink},children:(0,s.jsx)(k,{teamStore:r,teamName:p,iconSize:15,styles:x})})]})]}):null}function M(e){let{lastEditedTime:t,createdTime:o,location:a,isResolved:r,isSuggestionComment:d,teamStore:u,authorStore:m}=e;const h=(0,c().tz)(),p=(0,n().K8)((()=>(0,f().qm)()),[]),x=(0,n().K8)((()=>(0,f().F0)()),[]),v=(0,i.useRef)(null),C=(0,n().K8)((()=>m.getDisplayName(h)),[m,h]),L=(0,n().K8)((()=>null==u?void 0:u.getName()),[u]),M=(0,j().X)("ken_new_home_design")&&"post_creator"===a,E=M?32:T().eQ,z=N({location:a,avatarSize:E,authorFontSize:14,authorAndTeamNameLetterSpacing:0,enableTeamNameUnderline:!1}),D=(0,i.useCallback)((()=>{const e=v.current;e&&m&&m instanceof A().LU&&b().A.setState({type:"user",store:m,domRect:e.getBoundingClientRect()})}),[v,m]),P=(0,i.useCallback)((()=>b().A.setState(void 0)),[]),U=(0,n().K8)((()=>{const e=m.id;return(0,S().M)(e,y().default.state.currentSpaceStore)||""}),[m]);return o?(0,s.jsxs)("div",{style:z.userRow,children:[(0,s.jsxs)("div",{ref:v,onMouseEnter:D,onMouseLeave:P,style:z.user,children:[d?(0,s.jsxs)("div",{style:{position:"relative"},children:[(0,s.jsx)(R().E,{authorStore:m,avatarSize:E,avatarStyle:z.avatar,placeholderStyle:z.commentAuthorPlaceholder}),(0,s.jsx)("div",{style:z.avatarSuggestionBadgeWrapper,children:(0,s.jsxs)("div",{style:z.avatarSuggestionBadge,children:[l({height:8.5}),(0,s.jsx)("div",{style:z.avatarSuggestionBadgeBacking})]})})]}):(0,s.jsx)(I,{shouldEnablePersonHoverCard:p,authorStore:m,size:E,styles:z}),M?(0,s.jsx)("div",{style:z.avatarBubbleTipWrapper,children:(0,s.jsx)("div",{style:z.avatarBubbleTip})}):(0,s.jsx)(w,{shouldShowFullProfiles:x,personProfileUrl:U,displayName:C,styles:z})]}),u&&(0,s.jsxs)(s.Fragment,{children:[!M&&(0,s.jsx)("div",{style:z.in,children:(0,s.jsx)(c().sA,{id:"posts.post.inPreposition",defaultMessage:" in "})}),(0,s.jsx)(k,{teamStore:u,teamName:L,iconSize:M?16:14,styles:z})]}),(0,s.jsx)(B,{createdTime:o,lastEditedTime:t,style:z.timestamp}),"comment_unfurl"===a&&r&&(0,s.jsx)("div",{style:{display:"inline-flex"},children:(0,s.jsx)(g().A,{children:(0,s.jsx)(c().sA,{id:"comment.unfurl.resolvedStatus",defaultMessage:"Resolved"})})})]}):null}function E(e){const{createdTime:t}=e;return(0,s.jsx)(x().A,{text:(0,v().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,v().x$)(t),icon:r().k})}function z(e){const{createdTime:t,lastEditedTime:o}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x().A,{text:(0,v().nl)(t,{useUltraCompactFormat:!0}),tooltipText:(0,s.jsx)(c().sA,{defaultMessage:"Created {absoluteCreatedTime}",id:"comment.createdAtTime.label",values:{absoluteCreatedTime:(0,v().x$)(t)}}),icon:r().k})," ",(0,s.jsx)(x().A,{text:(0,s.jsx)(c().sA,{defaultMessage:"(edited)",id:"comment.editedAtIndicator"}),tooltipText:(0,s.jsx)(c().sA,{defaultMessage:"Last edited {absoluteLastEditedTime}",id:"comment.editedAtTime.label",values:{absoluteLastEditedTime:(0,v().x$)(o)}}),icon:r().k})]})}function N(e){let{location:t,avatarSize:o,authorFontSize:i,authorAndTeamNameLetterSpacing:n,enableTeamNameUnderline:r}=e;const s=(0,j().X)("ken_new_home_design")&&"post_creator"===t;return(0,a().IS)((e=>({avatar:{marginTop:0,marginRight:2,userSelect:"none",...s&&{position:"absolute",right:"100%",marginRight:16}},avatarBubbleTipWrapper:{position:"absolute",width:12,height:24,right:"100%",paddingLeft:8,overflow:"hidden"},avatarBubbleTip:{borderRadius:3,transform:"rotate(45deg)",background:e.surface.elevated,width:24,height:24,border:`1px solid ${e.regularDividerColor}`},avatarSuggestionBadgeWrapper:{position:"absolute",right:-2,bottom:-4},avatarSuggestionBadge:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:100,background:"light"===e.mode?"#fff":"#000",width:16,height:16,border:`1px solid ${e.accentColors.uiBlue[200]}`,fill:e.accentColors.uiBlue[600]},avatarSuggestionBadgeBacking:{position:"absolute",width:"100%",height:"100%",borderRadius:100,background:e.accentColors.uiBlue[100]},in:{color:e.text.secondary},timestamp:{whiteSpace:"normal",flexGrow:"updates_sidebar"===t||"comment_unfurl"===t?void 0:1,display:"inline",color:e.text.tertiary},userRow:{display:"flex",flexDirection:"row",alignItems:"center",userSelect:"none",fontSize:i,gap:6},user:{display:"flex",alignItems:"center",gap:6},placeholder:{height:8,width:81,borderRadius:6,background:e.lightDividerColor},commentAuthorPlaceholder:{marginRight:2,marginTop:"comment_unfurl"===t?14:2,height:o,width:o,borderRadius:20,flexShrink:0},teamIconAndName:{display:"flex",alignItems:"center",gap:8},linkBox:{borderRadius:6,padding:"4px 6px",marginInline:-4},author:{fontWeight:u().Wy.medium,whiteSpace:"normal",flexShrink:0,letterSpacing:n},teamName:{lineHeight:1.3,letterSpacing:n,...r?{borderBottom:`1px solid ${e.darkDividerColor}`}:{}},mobileAuthorRow:{display:"flex",flexDirection:"row"},mobileUserAvatar:{marginRight:8},mobileUserAndTeamLink:{display:"flex",flexDirection:"column",gap:0},mobileTeamLink:{marginTop:-4,fontSize:i}})),[o,t,r,i,n,s])}},483690:(e,t,o)=>{o.d(t,{q:()=>n});o(296540);var i=o(474848);const n=(0,o(340498).wt)("resolve",{viewBox:"0 0 16 16",svg:(0,i.jsx)("path",{d:"M6.6123 14.2646C7.07715 14.2646 7.43945 14.0869 7.68555 13.7109L14.0566 3.96973C14.2344 3.69629 14.3096 3.44336 14.3096 3.2041C14.3096 2.56152 13.8311 2.09668 13.1748 2.09668C12.7236 2.09668 12.4434 2.26074 12.1699 2.69141L6.57812 11.5098L3.74121 7.98926C3.48828 7.68848 3.21484 7.55176 2.83203 7.55176C2.16895 7.55176 1.69043 8.02344 1.69043 8.66602C1.69043 8.95312 1.7793 9.20605 2.02539 9.48633L5.55273 13.7588C5.84668 14.1074 6.1748 14.2646 6.6123 14.2646Z"})})},499512:(e,t,o)=>{o.d(t,{d:()=>l});o(296540);var i=()=>o(401497),n=()=>o(126158),a=()=>o(959013),r=()=>o(859428),s=o(474848);function l(e){const{enableIcon:t,onClick:o}=e,l=(0,i().IS)((e=>({moreCommentsWrapper:{position:"absolute",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1,left:0,right:0,height:30,background:`linear-gradient(to bottom, ${e.contentBackgroundTransparent} 0px, ${e.selectedMarginDiscussionBackground} 30px)`,marginTop:-28},tooltip:{...(0,r().n)(e,!1),cursor:"pointer",display:"flex",justifyContent:"center",alignItems:"center",marginTop:-4,borderRadius:6,padding:"4px 10px 4px 8px"}})),[]),d=(0,i().DP)();return(0,s.jsx)("div",{style:l.moreCommentsWrapper,children:(0,s.jsxs)("div",{tabIndex:0,role:"button",style:l.tooltip,onClick:o,children:[t?(0,s.jsx)("div",{style:{marginRight:5},children:(0,n().m)({fill:d.text.contrastPrimary,height:12,width:12})}):null,(0,s.jsx)(a().sA,{defaultMessage:"See more",id:"discussion.moreMessageTooltip"})]})})}},659799:(e,t,o)=>{o.d(t,{A:()=>l});o(296540);var i=()=>o(401497),n=()=>o(284371),a=()=>o(962730),r=()=>o(859428),s=o(474848);function l(e){let{text:t,tooltipText:o,icon:l}=e;const d=(0,i().IS)((e=>({icon:{height:"1em",width:"1em",marginRight:"0.25em",fill:e.mediumIconColor,marginBottom:"0.1em"},tooltip:{background:e.contentBackground,boxShadow:e.shadowSM},container:{display:"flex",alignItems:"center",fontWeight:n().Wy.regular,color:e.text.secondary,fontSize:n().J.UISmall.desktop,textAlign:"center"},text:{display:"inline"}})),[]);return(0,s.jsx)(r().A,{style:d.tooltip,render:e=>(0,s.jsx)("div",{style:d.text,...e,children:t}),renderTooltip:()=>(0,s.jsxs)("div",{style:d.container,children:[l(d.icon),(0,s.jsx)("div",{children:o})]}),alignment:a().C.Start,placement:a().W.Bottom})}}}]);