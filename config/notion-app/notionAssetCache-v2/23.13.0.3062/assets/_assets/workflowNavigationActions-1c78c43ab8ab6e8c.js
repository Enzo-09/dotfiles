"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[92821,93139],{564037:(e,t,n)=>{n.r(t),n.d(t,{getCurrentWorkflowNavigationState:()=>N,getDefaultClosedNavigationState:()=>y,getDefaultOpenNavigationState:()=>S,getIsWorkflowEditorOpen:()=>b,getIsWorkflowEditorStateOpen:()=>k,getIsWorkflowNavigationStateCurrent:()=>m,getMergedWorkflowNavigationState:()=>O,routeArgsGivenNavigationState:()=>C,useIsWorkflowEditorOpen:()=>j,useWorkflowNavigationState:()=>V});var i=()=>n(484714),o=()=>n(847249),r=()=>n(496603),a=()=>n(498212),c=()=>n(534177),s=()=>n(671593),u=()=>n(638681),l=()=>n(351360),g=()=>n(46986);const p=u().object({required:{isOpen:u().literal(!0)},optional:{}}),w={configure:u().intersection([p,u().object({required:{type:u().literal("configure")},optional:{prompt:u().string()}})]),function:u().intersection([p,u().object({required:{type:u().literal("function"),key:u().string()},optional:{}})]),module:u().intersection([p,u().object({required:{type:u().literal("module"),key:u().string()},optional:{}})]),trigger:u().intersection([p,u().object({required:{type:u().literal("trigger"),key:u().string()},optional:{}})]),debug:u().intersection([p,u().object({required:{type:u().literal("debug")},optional:{}})]),preview:u().intersection([p,u().object({required:{type:u().literal("preview")},optional:{collectionViewId:u().string()}})]),runtime_actor:u().intersection([p,u().object({required:{type:u().literal("runtime_actor")},optional:{}})]),view_settings:u().intersection([p,u().object({required:{type:u().literal("view_settings"),key:u().string()},optional:{}})]),view:u().intersection([p,u().object({required:{type:u().literal("view"),key:u().string()},optional:{}})]),runs:u().intersection([p,u().object({required:{type:u().literal("runs")},optional:{runId:u().string()}})]),test:u().intersection([p,u().object({required:{type:u().literal("test"),name:u().string(),functionKey:u().string()},optional:{}})])},f=u().union(Object.values(w)),d=u().object({required:{isOpen:u().literal(!1)},optional:{}}),v=u().union([f,d]);function S(){return{isOpen:!0,type:"configure"}}function y(){return{isOpen:!1}}function k(e){return(null==e?void 0:e.isOpen)??!1}function b(e){return k(N(e))}function m(e){const{currentNavigationState:t,navigationState:n}=e,i=O({defaultNavigationState:{isOpen:!1},currentNavigationState:t,newNavigationState:n});return(0,r().n4)(t,i)}function N(e){const{RouterStore:t}=e;if("page"!==t.state.route.name)return;const n=l().default.state.mainEditorCurrentBlockStore;return n&&n.isCollectionView()&&n.canEdit()&&!n.isLocked()?function(e){const{workflowViewType:t,workflowViewKey:n,workflowPrompt:i,collectionViewId:o}=e;switch(t){case"debug":case"runtime_actor":return{isOpen:!0,type:t};case"function":case"module":case"trigger":case"view_settings":case"view":if(!n)return;return{isOpen:!0,type:t,key:n};case"preview":return{isOpen:!0,type:"preview",collectionViewId:o};case"configure":return{isOpen:!0,type:"configure",prompt:i?decodeURIComponent(i):void 0};case"runs":return{isOpen:!0,type:"runs",runId:(0,a().ZA)(n)};case"test":if(!n)return;const[e,r]=n.split(",");if(!e||!r)return;return{isOpen:!0,type:"test",name:r,functionKey:e};default:return}}(t.state.route):void 0}function O(e){const{defaultNavigationState:t,currentNavigationState:n,newNavigationState:i}=e;if(!(0,g().sx)())return{isOpen:!1};const o={...t};if(n)for(const[a,c]of Object.entries(n))o[a]=c;if(i)for(const[a,c]of Object.entries(i))o[a]=c;const r=(0,s().tf)(v,o);if(r)throw r;return o}function C(e){if(!e.isOpen)return{workflowViewType:void 0,workflowViewKey:void 0,collectionViewId:void 0};const t=e.type,n={};switch(t){case"configure":case"debug":case"runtime_actor":return{...n,workflowViewType:t,workflowViewKey:void 0};case"function":case"module":case"trigger":case"view_settings":case"view":return{...n,workflowViewType:t,workflowViewKey:e.key};case"runs":return{...n,workflowViewType:t,workflowViewKey:e.runId};case"test":return{...n,workflowViewType:t,workflowViewKey:`${e.functionKey},${e.name}`};case"preview":return{...n,workflowViewType:"preview",collectionViewId:e.collectionViewId};default:(0,c().HB)(t)}}function V(){const e=(0,i().v3)();return(0,o().K8)((()=>N(e)??{isOpen:!1}),[e])}function j(){const e=(0,i().v3)();return(0,o().K8)((()=>b(e)),[e])}},691093:(e,t,n)=>{n.r(t),n.d(t,{closeWorkflowEditor:()=>p,onConfigItemClick:()=>l,showWorkflowEditor:()=>g});var i=()=>n(496603),o=()=>n(435009),r=()=>n(118078),a=()=>n(890754),c=()=>n(492414),s=()=>n(351360),u=()=>n(564037);function l(e){const{environment:t,navigationState:n,parentStore:o}=e,r=(0,u().getCurrentWorkflowNavigationState)(t);(0,i().n4)(r,n)?g({environment:t,navigationState:{isOpen:!0,type:"configure"},parentStore:o}):g({environment:t,navigationState:n,parentStore:o})}function g(e){const{environment:t,parentStore:n,redirect:i}=e,l=(0,u().getMergedWorkflowNavigationState)({defaultNavigationState:(0,u().getDefaultOpenNavigationState)(),currentNavigationState:(0,u().getCurrentWorkflowNavigationState)(t),newNavigationState:e.navigationState}),g=(0,a().getMergedChatSidebarState)({environment:t,update:e.chatSidebarState}),p=(0,u().routeArgsGivenNavigationState)(l),w=(0,a().routeArgsGivenChatSidebarState)(g);(0,r().maybeCloseNotionSidebar)({environment:t});const f=(0,c().Ef)({environment:t,updates:{...p,...w,store:n}}),d=void 0!==n&&s().default.state.mainEditorCurrentBlockStore!==n;o().oo({environment:t,url:f,redirect:i??!d})}function p(e){const{environment:t,newStore:n,redirect:i}=e,s=(0,u().routeArgsGivenNavigationState)((0,u().getDefaultClosedNavigationState)()),l=(0,a().routeArgsGivenChatSidebarState)(a().CLOSED_CHAT_SIDEBAR_STATE),g=(0,c().Ef)({environment:t,updates:{...s,...l,store:n}});(0,r().maybeOpenNotionSidebar)(),o().oo({environment:t,url:g,redirect:i??!0})}}}]);