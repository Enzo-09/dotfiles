"use strict";(globalThis.webpackChunknotion_next=globalThis.webpackChunknotion_next||[]).push([[33194],{31902:(e,t,o)=>{o.d(t,{A:()=>r});o(296540);var i=()=>o(959013),n=o(474848);const r=function(e){let{collectionViewName:t,collectionViewType:r}=e;return t?(0,n.jsx)(o(288722).A,{children:t}):"page"===r?(0,n.jsx)(i().sA,{id:"database.collectionView.untitledName.untitled",defaultMessage:"Untitled"}):(0,n.jsx)(i().sA,{...o(403905).X[r]})}},33194:(e,t,o)=>{o.d(t,{Hc:()=>te,ph:()=>Z,RD:()=>ee,Ay:()=>oe});var i=o(296540),n=()=>o(484714),r=()=>o(847249),a=()=>o(401497),l=()=>o(700500),s=()=>o(534177),d=()=>o(872539),c=()=>o(396301),p=()=>o(744705),u=()=>o(630116),g=()=>o(644914),m=(o(16280),()=>o(179034)),y=()=>o(959013),b=()=>o(284371),f=()=>o(899963),S=()=>o(426116),v=()=>o(313892),h=()=>o(296798),I=()=>o(16006),x=()=>o(859428),w=()=>o(125565),j=()=>o(490044),A=()=>o(492414),k=()=>o(159588),T=()=>o(108944),C=()=>o(37433),M=()=>o(907514),B=()=>o(441199),V=()=>o(962730),_=()=>o(351360),D=()=>o(246826),O=()=>o(751156),P=()=>o(614505),K=()=>o(696746),L=o(474848);function E(e){const{targetStore:t,canEditItem:o}=e,i=(0,y().tz)(),l=(0,n().v3)(),{isMobile:s}=l.device,d=(0,r().K8)((()=>t.getIcon()),[t]),c=(0,r().K8)((()=>!s&&o&&!t.isNonEditableState()&&!(0,K().Nh)(t.id)),[s,o,t]),p=(0,r().K8)((()=>{var e;return null===(e=t.getIconStore())||void 0===e?void 0:e.table}),[t]),u=(0,a().IS)((e=>({pageIcon:{fill:e.sidebarSecondaryColor}})),[]),g=e=>{const o=t.getIconStore();o&&O().createAndCommit({userAction:"OutlinerItem.handleRecordIconChange",environment:l,canUndo:!0,perform:t=>{D().KY({store:o,value:e,transaction:t})}})},m=(0,r().K8)((()=>{var e;return{recordTable:p,source:"sidebar",block_type:t.getType(),collection_id:"collection"===p?null===(e=t.getIconStore())||void 0===e?void 0:e.id:void 0}}),[p,t]);return(0,L.jsx)(x().A,{renderTooltip:()=>(0,L.jsx)(y().sA,{defaultMessage:"Change icon",id:"sidebarItem.changeIconButton.tooltip"}),placement:V().W.Bottom,render:e=>c?(0,L.jsx)(P().B,{bucket:"secure",disabled:!0,icon:d,store:t,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,onChange:g,pageIconStyle:u.pageIcon,...e,largeIcon:!0,iconLoggingData:m,label:i.formatMessage({defaultMessage:"Change page icon",id:"sidebarItem.changeIconButton.buttonLabel"}),disableAnimation:!0}):(0,L.jsx)(P().B,{disabled:!0,icon:d,title:void 0,isEmptyPage:t.isEmptyPage(),size:s?24:20,pageIconStyle:u.pageIcon,largeIcon:!0,label:i.formatMessage({defaultMessage:"Page icon",id:"sidebarItem.changeIconButton.disabledLabel"}),disableAnimation:!0,iconLoggingData:m})})}var N=()=>o(702796);function F(e){const{store:t,from:o,type:i,itemIndex:r,itemDepth:l,isOpen:s,onToggle:d}=e,p=(0,n().v3)(),u=(0,a().IS)((e=>({toggle:{color:e.lightIconColor}})),[]);return(0,L.jsx)(N().A,{isSidebar:!0,fill:!0,icon:"chevron",open:s,color:u.toggle.color,onClick:()=>{const e=0===l,n=T().Uo(t);f().tD(p,{teamStore:n,type:e?"top_level":"nested",is_toggled:!s,outliner_type:i,outliner_position:r,outliner_depth:l,outliner_location:"main_sidebar"===o?"sidebar":"pane"}),d(),c().s4({store:t,toOpen:!s,environment:p,isTopLevelItem:e})},"aria-describedby":e["aria-describedby"],"aria-controls":e["aria-controls"]})}var R=()=>o(907893);const W=function(e){const{store:t,from:l,variant:s,style:d,targetStore:c,itemDepth:p,type:u,nestedOutlinerAriaId:m,titleAriaId:b,isOpen:v,itemIndex:I,onFocus:w,onBlur:A,onMouseMove:C,onMouseLeave:M,onNavigate:D,spaceViewStore:O}=e,P=(0,n().v3)(),K=P.device.isMobile,E=(0,r().K8)((()=>U({targetStore:c,type:u,from:l})),[l,c,u]),N=(0,i.useCallback)((()=>U({targetStore:c,type:u,from:l,openInSidePeek:!0})),[l,c,u]),{isCopyIndicator:F,shouldShowAsLoadingSpinner:R}=(0,g().v8)(t),W=(0,r().K8)((()=>{const{mainEditorCurrentBlockStore:e}=_().default.state;return e&&t.id===e.id}),[t]),H=(0,r().K8)((()=>(0,o(97059).W)(P,t.id)),[P,t]),$=(0,r().K8)((()=>{const e=t.getFormat();if("workflow_template_placeholder"===e.collection_view_sub_type&&e.placeholder_workflow_template_id&&t.isCollectionView())return{collectionTemplateId:e.placeholder_workflow_template_id,collectionViewBlockStore:t}}),[t]),Y=(0,r().K8)((()=>(0,k().sQ)({isMobile:K})),[K]),X=(0,g().ab)(),Q=(0,a().IS)((e=>({sidebarItem:{...!K&&{paddingLeft:5},...W&&X.currentSelectedSidebarItem,...!K&&(0,k().Jg)(),...d,..."secondary"===s&&{padding:8,height:"unset"}},children:{display:"flex",alignItems:"center"},loadingSpinner:{marginLeft:6},moveOrDuplicateProgress:{flex:1,marginLeft:K?10:6,marginRight:K?12:void 0},link:{width:"100%"},sidebarItemHovered:{background:e.sidebarItemSelectedBackground},tooltipContainer:{maxWidth:280,width:"max-content"},tooltipMessage:{color:e.text.secondary}})),[K,W,X.currentSelectedSidebarItem,d,s]),q=(0,i.useCallback)((e=>{if(H)return;D&&D(t);if(!(e.metaKey||e.ctrlKey)){("secondary_sidebar"===l?"peek"===B().default.state.mode&&B().default.isVisible():B().default.isVisible())&&o(770906).VI({environment:P,skipAnimation:!0})}const i=T().Uo(t);f().zg(P,{teamStore:i,type:0===p?"top_level":"nested",outliner_type:u,outliner_position:I,outliner_depth:p})}),[l,D,u,I,t,P,p,H]),G=(0,i.useCallback)((async e=>{if(O){const{currentSpaceStore:t}=_().default.state;if(!((null==t?void 0:t.id)===O.getSpaceId())){const t=await S().yV({environment:P,spaceViewStore:O});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[P,O]),J={role:"treeitem","aria-current":W?"page":void 0,"aria-expanded":!!v,"aria-owns":m,"aria-labelledby":b};if(F)return R?(0,L.jsxs)(j().A,{style:Q.sidebarItem,childrenStyle:Q.children,onFocus:w,onBlur:A,onMouseMove:C,onMouseLeave:M,children:[(0,L.jsx)(o(331542).A,{style:Q.loadingSpinner}),(0,L.jsx)(o(575650).A,{targetRecordId:t.id,style:Q.moveOrDuplicateProgress})]}):null;if($)return(0,L.jsx)(o(704152).A,{onClick:async()=>{const{collectionTemplateId:e,collectionViewBlockStore:i}=$,{getCollectionTemplateFromId:n}=await o(541801).tA.load(),r=n(e);if(!r)throw new Error("Collection template not found");D&&D(t);const{onNavigateToPlaceholderWorkflowTemplateBlock:a}=await o(373444).O.load();a({environment:P,collectionTemplate:r,collectionViewBlockStore:i})},children:(0,L.jsx)(z,{...e,onFocus:w,onBlur:A,sidebarItemStyle:Q.sidebarItem,sidebarItemChildrenStyle:Q.children,titleAriaId:b,nestedOutlinerAriaId:m,isWorkflowTemplatePlaceholder:!0,...J})});const Z=(0,L.jsxs)("div",{style:Q.tooltipContainer,children:[(0,L.jsx)(y().sA,{id:"blockSidebarItem.offlineTooltip.title",defaultMessage:"Unavailable offline"}),(0,L.jsx)("div",{style:Q.tooltipMessage,children:(0,L.jsx)(y().sA,{id:"blockSidebarItem.offlineTooltip.message",defaultMessage:"Return online to view or make the page available offline."})})]});return E?(0,L.jsx)(x().A,{disableTooltip:!H,placement:V().W.Right,textWrap:!0,renderTooltip:()=>Z,render:t=>(0,L.jsx)(h().A,{altHref:N,disabled:H,disabledFeedback:H,onFocus:w,onBlur:A,style:Q.link,href:H?void 0:E,onClick:q,innerStyle:Y,hoveredStyle:Q.sidebarItemHovered,preNavigationAction:G,...J,...t,children:(0,L.jsx)(z,{...e,sidebarItemStyle:Q.sidebarItem,sidebarItemChildrenStyle:Q.children,titleAriaId:b,nestedOutlinerAriaId:m,disableRightButtons:H})})}):(0,L.jsx)(z,{...e,onFocus:w,onBlur:A,sidebarItemStyle:Q.sidebarItem,sidebarItemChildrenStyle:Q.children,titleAriaId:b,nestedOutlinerAriaId:m,...J})};function z(e){const{store:t,variant:o,from:i,parentStore:s,targetStore:d,itemDepth:p,type:g,onFocus:y,onBlur:f,onMouseMove:S,onMouseLeave:h,onToggle:x,titleAriaId:A,nestedOutlinerAriaId:T,isOpen:B,isHovered:V,isFocused:_}=e,D=(0,r().K8)((()=>function(e){const{store:t,parentStore:o,isTopLevelItem:i,type:n}=e;if(t.isDefined()&&(0,v().sZ)(t))return!1;const r=(0,C().getActiveTeamCount)()>0;if(t.isCollectionView()&&!r)return 0===t.getAllSourceCollectionStores().length;if("block"===(null==o?void 0:o.table)){if(u().Bv.createChildStore(o,{table:m().ev,id:o.id,spaceId:t.getSpaceId()}).isType("collection_view_page"))return!1}if(t.isDefined()&&t.getType()===l().xd.alias)return!0;if(i&&"team"!==n)return!1;if(!o)return!1;if(t.isDefined())return t.getParentId()!==o.id;return!1}({store:t,parentStore:s,isTopLevelItem:0===p,type:g})),[t,s,p,g]),O=(0,n().Y0)().isMobile,P=(0,r().K8)((()=>{const e=t.getLastEditedTime();return(0,M().nl)(e,{useLowercase:!1,useCompactFormat:!0})}),[t]),K=V||_,N=(0,r().K8)((()=>{if((0,C().isHideEmptySidebarTogglesEnabled)()){const e=Boolean(null==d?void 0:d.isCollectionView()),o=c().Mr(t).length>0;return e||o}return!0}),[t,d]),W=K&&N,z=(0,a().IS)((t=>({iconContainer:{display:"grid"},toggle:{gridColumn:1,gridRow:1,zIndex:1,opacity:W?1:0,order:W?1:0,transition:`opacity ${k().bM}`},itemIcon:{gridColumn:1,gridRow:1,opacity:W?0:1,transition:`opacity ${k().bM}`,order:W?0:1,..."secondary"===o&&{marginTop:-6}},rightIcons:{...!O&&{opacity:K?1:0,transition:`opacity ${k().bM}`}},childrenStyle:{...e.sidebarItemChildrenStyle,..."secondary"===o&&{display:"flex",flexDirection:"column",alignItems:"flex-start"}},title:{fontWeight:b().Wy.medium,..."secondary"===o&&{width:"100%"}},subtitle:{marginTop:2}})),[O,e.sidebarItemChildrenStyle,K,o,W]);return(0,L.jsxs)(j().A,{role:e.role,"aria-current":e["aria-current"],"aria-expanded":e["aria-expanded"],"aria-owns":e["aria-owns"],"aria-labelledby":e["aria-labelledby"],style:e.sidebarItemStyle,childrenStyle:z.childrenStyle,left:O?(0,L.jsx)(F,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":T,"aria-describedby":A,onToggle:x,isOpen:B}):void 0,icon:O?d&&(0,L.jsx)(E,{targetStore:d,canEditItem:e.canEditItem}):(0,L.jsxs)("div",{style:z.iconContainer,children:[N&&(0,L.jsx)("div",{style:z.toggle,children:(0,L.jsx)(F,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,"aria-controls":T,"aria-describedby":A,onToggle:x,isOpen:B})}),(0,L.jsx)("div",{style:z.itemIcon,children:d&&(0,L.jsxs)(L.Fragment,{children:[e.isWorkflowTemplatePlaceholder&&(0,L.jsx)(H,{}),(0,L.jsx)(E,{targetStore:d,canEditItem:e.canEditItem})]})})]}),right:e.disableRightButtons?void 0:(0,L.jsx)("div",{style:z.rightIcons,children:(0,L.jsx)(R().Ay,{store:t,from:i,type:g,itemIndex:e.itemIndex,itemDepth:p,canEditItem:e.canEditItem,onToggle:x,isHovered:V,isFocused:_})}),onFocus:y,onBlur:f,onMouseMove:S,onMouseLeave:h,isAlias:D,children:[(0,L.jsx)(I().A,{id:A,store:t,style:z.title}),"secondary"===o&&(0,L.jsx)(w().A,{isSmall:!0,isSecondaryColor:!0,style:z.subtitle,children:P})]})}function H(){const e=(0,a().IS)((e=>({circle:{position:"absolute",background:e.blueColor,borderRadius:"50%",border:`1px solid ${e.surface.wash}`,width:8,height:8,left:14,zIndex:1}})),[]);return(0,L.jsx)("div",{style:e.circle})}function U(e){const{targetStore:t,type:o,from:i,openInSidePeek:n=!1}=e;if(!t)return;const r=(0,c().NX)({type:o,from:i}),a=n?{openInSidePeek:!0,peekMode:"s",peekViewBlockId:t.id}:{};if(t.isNavigableBlock())return(0,A().Ay)({...a,store:t,fullyQualified:!1,pageVisitSource:r});{const e=T().Nq(t);if(e)return(0,A().Ay)({...a,store:e,scrollToBlockId:t.id,fullyQualified:!1,pageVisitSource:r})}}o(581454);var $=()=>o(753199),Y=(o(898992),o(737550),()=>o(31902)),X=()=>o(578392);function Q(e){const{store:t,collectionViewStore:o,onNavigate:l,type:s,from:d,spaceViewStore:m}=e,y=(0,n().v3)(),b=(0,r().K8)((()=>t.getCollectionViewStores().some((e=>"page"===e.getType()))),[t]),f=(0,r().K8)((()=>{if(b)return!1;const{mainEditorCurrentBlockStore:e,currentCollectionViewStore:i}=_().default.state;return Boolean(e&&t.id===e.id&&i&&i.id===o.id)}),[o.id,t.id,b]),v=(0,g().ab)(),I=(0,a().IS)((t=>({initialIcon:{fontSize:12,fontWeight:500,marginLeft:5,color:t.text.secondary},sidebarItem:{...f&&v.currentSelectedSidebarItem,...(0,k().Jg)(),...e.style},hoveredItem:{background:t.sidebarItemSelectedBackground},linkBox:{width:"100%"}})),[f,v.currentSelectedSidebarItem,e.style]),x=(0,r().K8)((()=>(0,A().Ay)({store:t,fullyQualified:!1,collectionViewId:o.id,pageVisitSource:(0,c().NX)({type:s,from:d})})),[o.id,d,t,s]),w=(0,r().K8)((()=>({ready:o.isReady(),type:o.getType(),pagePointer:o.getFormat().page_pointer,name:o.getName()})),[o]),T=(0,r().K8)((()=>{if("page"!==w.type||!w.pagePointer)return null;const e=u().Bv.createChildStore(t,{table:w.pagePointer.table,id:w.pagePointer.id});return{ready:(0,p().X)(e),outlinerItems:(0,c().yD)({rootStore:e})}}),[w,t]),C=(0,r().K8)((()=>t.getContentStore()),[t]),M=(0,i.useCallback)((()=>{l&&l(t)}),[t,l]),B=(0,r().K8)((()=>(0,k().sQ)({isMobile:y.device.isMobile})),[y]),V=(0,i.useCallback)((async e=>{if(m){const{currentSpaceStore:t}=_().default.state;if(!((null==t?void 0:t.id)===m.getSpaceId())){const t=await S().yV({environment:y,spaceViewStore:m});if(t.switchedUser)return e(t.newEnvironment)}}e()}),[y,m]);if(!w.ready)return null;if("page"===w.type&&T){const{ready:t,outlinerItems:o}=T;return(0,L.jsx)(X().A,{type:e.type,childStores:o,areChildrenLoading:!t,itemDepth:e.itemDepth+1,parentStore:C,itemStyle:I.sidebarItem,itemToggleStyle:e.itemToggleStyle,onNavigate:e.onNavigate,disabled:e.disabled,from:d,spaceViewStore:e.spaceViewStore})}return b?null:(0,L.jsx)(h().A,{href:x,style:I.linkBox,hoveredStyle:I.hoveredItem,innerStyle:B,preNavigationAction:V,onClick:M,role:"treeitem","aria-current":f?"step":void 0,children:(0,L.jsx)(j().A,{icon:(0,L.jsx)("div",{style:I.initialIcon,children:"•"}),style:I.sidebarItem,children:(0,L.jsx)(Y().A,{collectionViewName:w.name,collectionViewType:w.type??"table"})})})}function q(e){const{store:t,from:o}=e,i=(0,r().K8)((()=>t.getCollectionViewStores()),[t]);return(0,L.jsx)("div",{role:"group",id:e.id,"aria-labelledby":e["aria-labelledby"],onContextMenu:e=>{e.preventDefault(),(0,$().SQ)({event:e,context:$().y$.EditorContextMenu,callback:()=>{}})},children:i.map((i=>(0,L.jsx)(Q,{store:t,from:o,collectionViewStore:i,style:e.itemStyle,onNavigate:e.onNavigate,type:e.type,itemDepth:e.itemDepth,disabled:e.disabled,childStores:e.childStores,spaceViewStore:e.spaceViewStore},i.id)))})}function G(e){const{disabled:t,store:o,from:i,style:l,targetStore:s,itemDepth:d,nestedOutlinerAriaId:u,titleAriaId:g,onNavigate:m,type:y,toggleStyle:b,spaceViewStore:f}=e,{isMobile:S}=(0,n().Y0)(),v=(0,r().K8)((()=>!(0,p().X)(o)),[o]),h=(0,r().K8)((()=>s.isCollectionView()?s:null),[s]),I=(0,r().K8)((()=>(0,c().Mr)(o)),[o]),x=(0,r().K8)((()=>s.getContentStore()),[s]),w=(0,a().IS)((()=>{const e="number"==typeof(null==l?void 0:l.paddingLeft)?l.paddingLeft:S?Z:5,t=S?ee:te;return{item:{...l,paddingLeft:e+t}}}),[l,S]);return h?(0,L.jsx)(q,{store:h,from:i,itemStyle:w.item,onNavigate:m,type:y,childStores:I,areChildrenLoading:!1,itemDepth:d+1,parentStore:x,itemToggleStyle:e.toggleStyle,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:f}):(0,L.jsx)(X().A,{from:i,type:y,childStores:I,areChildrenLoading:v,itemDepth:d+1,parentStore:x,itemStyle:w.item,itemToggleStyle:b,onNavigate:m,disabled:t,id:u,"aria-labelledby":g,spaceViewStore:f})}function J(e){return`Outliner-${e.id}`}const Z=6,ee=22,te=8,oe=function(e){const{store:t,itemIndex:c,parentStore:p,type:m,itemDepth:y,disabled:b,from:f,variant:S,spaceViewStore:v}=e,h=(0,n().v3)(),I=(0,o(792485).S)(),x=function(e){return 0===e}(y),[w,j]=(0,i.useState)((()=>{if((0,s().O9)(e.itemOpenByDefault))return e.itemOpenByDefault;if(x){const e=o(763884).K.get({userId:h.currentUser.id,key:J(t)});if((0,s().O9)(e))return e}return!1})),[A,k]=(0,i.useState)(!1),[T,C]=(0,i.useState)(!1),M=(0,i.useId)(),B=(0,i.useId)(),V=(0,r().K8)((()=>function(e){if(e.getType()===l().xd.alias){const t=e.getAliasTargetStore();return t instanceof u().Bv?t:void 0}return e}(t)),[t]),_=(0,r().K8)((()=>g().UN(t)),[t]),D=0===c,O=(0,r().K8)((()=>!b&&(0,o(878377).p2L)({environment:h,blocks:[t],publicEditMode:I&&I.publicEditModeStore.state})),[b,I,h,t]),P=(0,r().K8)((()=>O&&!t.isLinkedCollectionView()),[t,O]),{isCopyIndicator:K,shouldShowAsLoadingSpinner:E}=(0,g().v8)(t),N=(0,i.useRef)(null);(0,o(790748).b)(o(182106).A,(()=>({store:t,parentStore:p,type:m,isTopLevelItem:x,getNode:()=>N.current})),[t,p,m,x]);const F=(0,i.useMemo)((()=>_&&p?{onInsertBelow:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!0,type:m}),onInsertAbove:e=>d().o8({...e,environment:h,store:t,parentStore:p,before:!1,type:m})}:{}),[_,h,p,t,m]),R=(0,i.useCallback)((e=>{const t=e.target;t instanceof HTMLElement&&(0,o(819121).p)(t)&&C(!0)}),[]),z=(0,i.useCallback)((()=>{C(!1)}),[]),H=(0,i.useCallback)((()=>{o(353643).A.state.isDragging||k(!0)}),[]),U=(0,i.useCallback)((()=>{k(!1)}),[]),$=(0,i.useCallback)((e=>{j(void 0!==e?e:e=>!e)}),[]),Y=(0,a().IS)((()=>({selectableStyle:{display:"flex",flexDirection:"column",gap:1,paddingBottom:w&&"secondary"===S?8:0}})),[w,S]),X=(0,i.useCallback)((e=>{const i=t.getRecordStoreUIParent();null!=i&&i.valueIs(o(65269)._)&&d().Nr({...e,type:m,targetStore:t,targetParentStore:i,isTopLevelItem:x})}),[t,m,x]),{value:Q}=(0,o(645873).fJ)(o(855801).VI.duplicateActions),q=(0,i.useCallback)((async e=>{const{droppedDirection:o,droppedStores:i,duplicate:n}=e;p&&await d().Hu({environment:h,type:m,targetParentStore:p,targetStore:t,isTopLevelItem:x,droppedDirection:o,droppedStores:i,duplicate:n,isDroppingOnFullSection:!1,duplicateActions:Q})}),[p,h,m,t,x,Q]);return V?K&&!E?null:(0,L.jsxs)(o(199896).A,{analyticsName:"outliner_item",actionSectionGroupKey:"sidebar_outliner",contextMenuAndDragStores:[t],canDrag:_,canDropAbove:D,canDropBelow:_,canDropOnto:P,canInsertBelow:_,canInsertAbove:_,canSelect:_,canTriggerContextMenu:!0,onRemove:X,onSelectableDrop:q,shouldShowDropZone:!0,showBlockMenuInput:!1,store:t,ref:N,style:Y.selectableStyle,...F,children:[(0,L.jsx)(W,{variant:S,from:f,store:t,style:e.style,parentStore:p,type:m,itemIndex:e.itemIndex,itemDepth:e.itemDepth,onNavigate:e.onNavigate,targetStore:V,canEditItem:O,nestedOutlinerAriaId:M,titleAriaId:B,onFocus:R,onBlur:z,onMouseMove:H,onMouseLeave:U,onToggle:$,isHovered:A,isFocused:T,isOpen:w,spaceViewStore:v}),w&&(0,L.jsx)(G,{disabled:b,store:t,from:f,style:e.style,targetStore:V,itemDepth:e.itemDepth,nestedOutlinerAriaId:M,titleAriaId:B,onNavigate:e.onNavigate,type:m,toggleStyle:e.toggleStyle,spaceViewStore:v})]}):null}},126617:(e,t,o)=>{o.d(t,{Y:()=>n});o(296540);const i={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M3.2 6.725a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55m4.8 0a1.275 1.275 0 1 0 0 2.55 1.275 1.275 0 0 0 0-2.55"})},n=(0,o(340498).wt)("ellipsisSmall",i)},205160:(e,t,o)=>{o.d(t,{K:()=>r,v:()=>n});var i=()=>o(959013);const n=(0,i().YK)({addAPageInside:{defaultMessage:"Add a page inside",id:"sidebarItem.addAPageInside.tooltip"}}),r=(0,i().YK)({addPageTooltip:{defaultMessage:"Add a page",id:"sidebar.addButton.addPageTooltip"}})},541235:(e,t,o)=>{o.d(t,{YD:()=>r,c$:()=>i,q_:()=>n});const i={"sprints-onboarding":{steps:[{id:"current-sprint-view-tooltip"},{id:"sprint-task-tooltip"},{id:"complete-sprint-button-tooltip"}]},"enhanced-qna-onboarding":{steps:[{id:"find-in-tooltip"},{id:"mention-tooltip"}]},"jira-sync-onboarding":{steps:[{id:"all-projects-tooltip"},{id:"all-issues-tooltip"},{id:"database-views-and-filters-tooltip"},{id:"settings-to-setup-projects-and-issues"}]},"project-management-import-onboarding":{steps:[{id:"your-teamspace-tooltip"},{id:"all-projects-tooltip"},{id:"navigate-to-project-tasks-tooltip"},{id:"project-customization-tooltip"},{id:"related-tasks-database-views-tooltip"}]},"ai-comment-onboarding":{steps:[{id:"ai-comment-onboarding-tooltip"}]}},n="completed",r="dismissed"},578392:(e,t,o)=>{o.d(t,{A:()=>w});o(898992),o(354520),o(581454);var i=o(296540),n=()=>o(484714),r=()=>o(847249),a=()=>o(401497),l=()=>o(946065),s=()=>o(959013),d=()=>o(638013),c=()=>o(872539),p=()=>o(556048),u=()=>o(490044),g=()=>o(38337),m=()=>o(396301),y=()=>o(351360),b=()=>o(373444),f=o(474848);const S=i.memo((e=>{const{disabled:t,childStores:a,areChildrenLoading:s,itemDepth:c,type:u}=e,S=(0,n().v3)(),w=(0,r().O$)(y().AppStoreMainEditorCurrentBlockStore),j=(0,r().K8)((()=>(0,o(739135).gt)(y().default.state.currentUserSettingsStore,"jira-sync-onboarding")),[]),A=S.device,k=(0,i.useRef)(),T=(0,i.useRef)(),C=(0,r().O$)(o(666803).Ay),M=(0,r().K8)((()=>{const e=(0,o(337567).Vk)();if(C.showOnboardingTour){let e=null,r=null;for(const i of a){if(i.isCollectionView()){const n=i.getCollectionStore();if((null==w?void 0:w.id)===i.id){var t;const a=null===(t=i.getCollectionStore())||void 0===t?void 0:t.getFormat();if("notion://projects_collection"===(null==a?void 0:a.app_config_uri)||"notion://tasks_collection"===(null==a?void 0:a.app_config_uri)){const t=(0,o(504836).Be)(n);e=t.projectCollectionPointer,r=t.taskCollectionPointer;break}}}}for(const t of a){if(t.isCollectionView()){var i,n;const o=t.getCollectionStore();if(o&&(null==o?void 0:o.id)===(null===(i=e)||void 0===i?void 0:i.id)){k.current=t.id;continue}if(o&&o.id===(null===(n=r)||void 0===n?void 0:n.id)){T.current=t.id;continue}}}}return(0,o(534177).O9)(e)?a.filter((t=>!e.includes(t.id))):a}),[a,null==w?void 0:w.id,C.showOnboardingTour]).map(((t,o)=>{const n=i.createRef();return C.showOnboardingTour&&k.current===t.id&&"all-projects-tooltip"===j?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{ref:n,style:{boxShadow:d().p.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})}),(0,f.jsx)(p().jX,{origin:n})]},t.id):C.showOnboardingTour&&T.current===t.id&&"all-issues-tooltip"===j?(0,f.jsxs)("div",{children:[(0,f.jsx)("div",{ref:n,style:{boxShadow:d().p.outlineBlueInputBoxShadow.light,borderRadius:6},children:(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})}),(0,f.jsx)(p().h9,{origin:n})]},t.id):(0,i.createElement)(I,{...e,key:t.id,store:t,index:o})})),B=(0,r().O$)(y().AppStoreCurrentSpaceViewStore),V=(0,r().K8)((()=>void 0!==B&&(0,m().XA)({spaceViewStore:B})),[B]),_=(0,r().K8)((()=>(0,o(37433).isHideEmptySidebarTogglesEnabled)()&&!A.isMobile),[A]),D=(0,r().K8)((()=>(0,o(611371).EF)(S)),[S]),O=0===c,P=0===(null==M?void 0:M.length),K=((null==M?void 0:M.length)<=o(962877).i||e.isHeaderless||A.isMobile)&&O&&("private"===u||"workspace"===u)&&!t,L=P&&!K&&!O&&!_,E={offline:g().lpW,bookmarks:g().X3W,workspace:g().rR7,shared:g().Bbz,private:g().$_L,team:g().zqk,[l().zt]:void 0,[l().AX]:void 0,[l().GU]:void 0,[l().st]:void 0,[l().yy]:void 0}[e.type],N=K&&D;return(0,i.useEffect)((()=>{N&&b().O.load()}),[N]),(0,f.jsxs)(o(378765).A,{id:e.id,"aria-labelledby":e["aria-labelledby"],role:O?"tree":"group",style:e.style,innerStyle:{display:"flex",flexDirection:"column",gap:1},className:E,loaded:!s,showSpinnerTimeout:3e3,spinnerSize:"relative",children:[(0,f.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:1},children:M}),P&&O&&!("private"===u&&V)&&(0,f.jsx)(x,{type:e.type,parentStore:e.parentStore}),K&&(0,f.jsx)(h,{type:e.type,from:"main_sidebar"}),L&&(0,f.jsx)(v,{itemStyle:e.itemStyle})]})}));function v(e){const{isMobile:t,isTablet:i}=(0,n().Y0)(),r=(0,o(963589).X)("tablet_refresh_gate"),l=(0,a().IS)((e=>({placeholder:{color:e.text.tertiary,fontWeight:i&&r?o(284371).Wy.regular:void 0,paddingLeft:16,...t&&{display:"flex",alignItems:"center",height:32,marginTop:i&&r?"-8px":void 0}}})),[t,i,r]);return(0,f.jsx)(u().A,{role:"treeitem",style:e.itemStyle,children:(0,f.jsx)("div",{style:l.placeholder,children:(0,f.jsx)(s().sA,{defaultMessage:"No pages inside",id:"outliner.NoPagesInside.placeholder"})})})}function h(e){const{type:t,from:r}=e,l=(0,n().v3)(),d=(0,n().Y0)().isMobile,p=(0,a().IS)((e=>({sidebarItem:{color:e.sidebarSecondaryColor},hovered:{background:e.sidebarItemSelectedBackground}})),[]),g=(0,o(644914).ab)(),m=(0,i.useCallback)((async()=>{if("team"===t||!y().default.state.currentSpaceStore||!y().default.state.currentSpaceViewStore)return;if((0,o(338907).u)(l)){const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:t}=await b().O.load();return void e({origin:"sidebar_private_section_empty_state",parentStore:y().default.state.currentSpaceStore,template:void 0,version:t({template:void 0})})}await c().SE({environment:l,spaceStore:y().default.state.currentSpaceStore,spaceViewStore:y().default.state.currentSpaceViewStore,type:t,outlinerItemFrom:r,prepend:!1,shouldPersistToggleState:!0})&&d&&o(869562).close()}),[t,l,r,d]);return(0,f.jsx)(o(704152).A,{style:g.baseSidebarItem,hoveredStyle:p.hovered,mobileFeedback:d,onClick:m,children:(0,f.jsx)(u().A,{style:p.sidebarItem,left:(0,f.jsx)(o(8980).I,{icon:o(863330).plusSmallIcon,size:"sm",color:d?"tertiary":"secondary"}),disableMobileBorder:!0,children:(0,f.jsx)(s().sA,{defaultMessage:"Add new",id:"sidebar.addAWorkspaceOrPrivatePage.tooltip"})})})}S.displayName="Outliner";const I=i.memo((function(e){const{store:t,index:i}=e;return(0,f.jsx)(o(33194).Ay,{type:e.type,from:e.from,variant:"primary",store:t,style:e.itemStyle,toggleStyle:e.itemToggleStyle,itemIndex:i,itemDepth:e.itemDepth,itemOpenByDefault:e.itemOpenByDefault,parentStore:t.getRecordStoreUIParent(),onNavigate:e.onNavigate,disabled:e.disabled,spaceViewStore:e.spaceViewStore},t.id)})),x=i.memo((function(e){const t=(0,n().v3)(),{type:i,parentStore:r}=e,a=`OutlinerItem${i??""}${(null==r?void 0:r.id)??""}`,{value:l}=(0,o(645873).fJ)(o(855801).VI.duplicateActions);return(0,f.jsx)(o(218557).Tl,{dropTargetKey:a,canDropBelow:!0,onSelectableDrop:async e=>{await c().RM({dropArgs:e,environment:t,type:i,isDroppingOnFullSection:!1,parentStore:r,duplicateActions:l})},shouldShowDropZone:!0,canAcceptDrop:e=>{const{currentSpaceStore:o}=y().default.state;return!!o&&(0,m().ox)({environment:t,draggingStores:e.draggingStores,parentStore:r,currentSpaceStore:o})}})})),w=S},739135:(e,t,o)=>{o.d(t,{KD:()=>d,gt:()=>c,i9:()=>s,ll:()=>a,tb:()=>l,x$:()=>r});var i=()=>o(541235),n=()=>o(496603);function r(e,t){return a(c(e,t))}function a(e){return void 0!==e&&(e===i().q_||e===i().YD)}function l(e,t){if(a(t))return;const o=i().c$[e],n=o.steps.findIndex((e=>e.id===t));return-1===n?o.steps[0].id:n===o.steps.length-1?i().q_:o.steps[n+1].id}function s(e,t){const o=c(e,t);if(o&&!a(o))return l(t,o)}function d(e,t){const o=c(e,t);if(o)return function(e,t){const o=i().c$[e];var r;if(a(t))return null===(r=(0,n().HV)(o.steps))||void 0===r?void 0:r.id;const l=o.steps.findIndex((e=>e.id===t));return-1!==l&&0!==l?o.steps[l-1].id:void 0}(t,o)}function c(e,t){var o;if(!e)return;const n=((null===(o=e.getSettings())||void 0===o?void 0:o.tutorials)||{})[t];return void 0===n?i().c$[t].steps[0].id:n}},863330:(e,t,o)=>{o.r(t),o.d(t,{iconDefinition:()=>i,plusSmallIcon:()=>n});o(296540);const i={viewBox:"0 0 16 16",svg:(0,o(474848).jsx)("path",{d:"M8 2.3a.7.7 0 0 0-.7.7v4.3H3a.7.7 0 1 0 0 1.4h4.3V13a.7.7 0 1 0 1.4 0V8.7H13a.7.7 0 1 0 0-1.4H8.7V3a.7.7 0 0 0-.7-.7"})},n=(0,o(340498).wt)("plusSmall",i)},907893:(e,t,o)=>{o.d(t,{Ay:()=>P,Kd:()=>F,pK:()=>R});o(18107),o(967357),o(581454);var i=o(296540),n=()=>o(484714),r=()=>o(847249),a=()=>o(401497),l=()=>o(126617),s=()=>o(863330),d=()=>o(869558),c=()=>o(959013),p=()=>o(901265),u=()=>o(872539),g=()=>o(778417),m=()=>o(704152),y=()=>o(760217),b=()=>o(406699),f=()=>o(928600),S=()=>o(939740),v=()=>o(480095),h=()=>o(8980),I=()=>o(614505),x=()=>o(16006),w=()=>o(89924),j=()=>o(859428),A=()=>o(972435),k=()=>o(722872),T=()=>o(553965),C=()=>o(108944),M=()=>o(115512),B=()=>o(962730),V=()=>o(630116),_=()=>o(205160),D=o(474848);function O(e){const{store:t,from:i,type:a,canEditItem:l,itemDepth:s,isHovered:d,isFocused:c,onToggle:p}=e,{isMobile:u}=(0,n().Y0)(),g=u||d||c,m=(0,r().K8)((()=>{var e;const o=Boolean(t.getAppContainerBlockStore()),i=t.isPlaceholderWorkflowTemplateBlock(),n=null===(e=t.getCollectionStore())||void 0===e?void 0:e.isSyncedCollection();return Boolean(t.getType()&&l&&!o&&!i&&!n)}),[t,l]),y=R({showRightIcons:g});return a===o(946065).yy?null:(0,D.jsxs)("div",{style:y.iconContainer,children:[(0,D.jsx)(N,{store:t,from:i,type:e.type,itemIndex:e.itemIndex,itemDepth:s}),m&&(0,D.jsx)(K,{store:t,onToggle:p,isTopLevelItem:0===s,from:i,type:a})]})}const P=i.memo(O);function K(e){const{store:t,onToggle:o,isTopLevelItem:i,from:a,type:l}=e,s=(0,n().v3)(),{isMobile:c}=s.device,p=(0,r().K8)((()=>t.isCollectionView()),[t]),g=(0,r().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),m=(0,r().K8)((()=>{var e;const o=null===(e=t.getCollectionViewStores().at(0))||void 0===e?void 0:e.id;if(!o)return;const i=V().pS.createChildStore(t,{table:d().Gy,id:o});return null==i?void 0:i.getFormatStore().getValue()}),[t]),y=A().A.formatMessage(_().v.addAPageInside);return p&&!m&&0===g.length?(0,D.jsx)(L,{disabled:!0}):g.length<=1?(0,D.jsx)(j().A,{renderTooltip:()=>y,placement:B().W.Bottom,render:e=>{const n={...e,onClick:e=>{u().y6({blockStore:g[0]??t,shouldNavigateToSource:!1,environment:s,event:e,analytics:{from:a,type:l},toggleOptions:{onToggle:o,isTopLevelItem:i}})}};return(0,D.jsx)(L,{events:n})}}):(0,D.jsx)(j().A,{renderTooltip:()=>y,placement:B().W.Bottom,render:e=>(0,D.jsx)(b().Ay,{popupType:c?b().z7.SlideUp:b().z7.Popup,renderOrigin:t=>(0,D.jsx)(L,{events:(0,T().A)(e,t)}),render:e=>(0,D.jsx)(E,{store:t,onToggle:o,parent:e,isTopLevelItem:i,from:a,type:l})})})}function L(e){const{isMobile:t}=(0,n().Y0)(),o=F();return(0,D.jsx)(m().A,{ariaLabel:A().A.formatMessage(_().v.addAPageInside),mobileFeedback:t,style:o.button,disabled:e.disabled,disabledFeedback:e.disabled,...e.events,children:(0,D.jsx)(h().I,{icon:s().plusSmallIcon,size:"sm",color:t?"tertiary":"secondary"})})}function E(e){const{store:t,onToggle:o,parent:i,isTopLevelItem:l,from:s,type:d}=e,p=(0,n().v3)(),{isMobile:g}=p.device,m=(0,r().K8)((()=>t.getLinkedViewCollectionBlockStores()),[t]),b=(0,a().IS)((()=>({menuItem:{display:"flex",alignItems:"center",whiteSpace:"pre"}})),[]),h={menuType:g?k().gu.Modal:k().gu.Popup,right:g?(0,D.jsx)(v().DoneMenuText,{}):void 0},j={key:"collections",render:e=>(0,D.jsx)(w().A,{...e,title:(0,D.jsx)(c().sA,{defaultMessage:"Add to",id:"sidebarItem.addAPageInside.popup.addTo"})}),items:m.map((e=>({key:e.id,render:t=>(0,D.jsx)(y().A,{...t,title:(0,D.jsx)("div",{style:b.menuItem,children:(0,D.jsx)(x().A,{store:e})}),icon:(0,D.jsx)(I().B,{disabled:!0,icon:e.getIcon(),isEmptyPage:e.isEmptyPage(),size:14})}),action:t=>{u().y6({blockStore:e,environment:p,event:t.event,shouldNavigateToSource:!0,analytics:{from:s,type:d},toggleOptions:{onToggle:o,isTopLevelItem:l}})}})))};return(0,D.jsx)(f().A,{...h,children:(0,D.jsx)(S().Ay,{type:S().Oh.Vertical,onAccept:i.close,initialFocus:void 0,sections:[j]})})}function N(e){const{store:t,from:o,type:i,itemDepth:r,itemIndex:a}=e,s=(0,c().tz)(),d=(0,n().v3)(),{isMobile:u}=d.device,y=F(),b=e=>{const n=C().Uo(t);g().Lt({environment:d,store:t}),p().it({environment:d,stores:[t],left:e.clientX,top:e.clientY,showInput:!1,actionSectionGroupKey:"sidebar_outliner",analyticsFrom:"sidebar_more_menu",optionalAnalyticsProperties:{teamStore:n,type:0===r?"top_level":"nested",outliner_type:i,outliner_position:a,outliner_depth:r,outliner_location:"main_sidebar"===o?"sidebar":"pane"}})},f="bookmarks"===i?s.formatMessage({defaultMessage:"Remove, rename, and more…",id:"sidebarItem.favoritedPageMenuButton.tooltip"}):s.formatMessage({defaultMessage:"Delete, duplicate, and more…",id:"sidebarItem.pageMenuButton.tooltip"});return(0,D.jsx)(j().A,{renderTooltip:()=>f,placement:B().W.Bottom,render:e=>(0,D.jsx)(m().A,{ariaLabel:f,mobileFeedback:u,style:y.button,onClick:b,...e,children:(0,D.jsx)(h().I,{icon:l().Y,size:"sm",color:u?"tertiary":"secondary"})})})}function F(){const e=(0,n().v3)().device.isMobile;return(0,a().IS)((t=>({button:e?{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:4,marginLeft:0}:{display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20,borderRadius:4,marginLeft:4}})),[e])}function R(e){const{showRightIcons:t}=e;return(0,a().IS)((()=>({iconContainer:{display:"flex",paddingLeft:3,...t?{}:{...M().Qg,display:"block"}}})),[t])}},962877:(e,t,o)=>{o.d(t,{c:()=>j,i:()=>w});var i=o(296540),n=()=>o(484714),r=()=>o(847249),a=()=>o(401497),l=()=>o(863330),s=()=>o(959013),d=()=>o(872539),c=()=>o(704152),p=()=>o(8980),u=()=>o(859428),g=()=>o(490044),m=()=>o(646736),y=()=>o(962730),b=()=>o(351360),f=()=>o(486130),S=()=>o(611371),v=()=>o(373444),h=()=>o(644914),I=()=>o(33194),x=o(474848);const w=2;function j(e){let{teamStore:t,numTeamPages:o,currentSpaceStore:j}=e;const A=(0,n().Y0)(),k=(0,n().v3)(),T=(0,r().K8)((()=>b().default.state.currentUserStore),[]),C=(0,r().K8)((()=>t.canAddOrRemoveTopLevelPages()),[t]),M=(0,r().K8)((()=>(0,S().EF)(k)),[k]),B=(0,r().K8)((()=>{if(!T)return!1;const e=(0,m().dp)(j,T.id).getModel();return t.canViewTopLevelPages(T.id,f()._.getSpacePermissionGroupIds({userId:T.id,spaceId:j.id}),e)}),[t,T,j]),V=o<=w,_=V&&C&&M;(0,i.useEffect)((()=>{_&&v().O.load()}),[_]);const D=(0,i.useCallback)((async()=>{const{currentSpaceStore:e,currentSpaceViewStore:o}=b().default.state;if(e&&o)if(A.isMobile)d().A5({environment:k,from:"sidebar_team_section_empty_state",spaceStore:e,spaceViewStore:o,teamStore:t,andNavigate:!0,appendOrPrepend:"append"});else{const{openTemplateOnboardingModal:e,getTemplateOnboardingVersion:o}=await v().O.load();e({origin:"sidebar_team_section_empty_state",parentStore:t,template:void 0,version:o({template:void 0})})}}),[k,t,A.isMobile]),O=(0,a().IS)((e=>({emptyPlaceholder:{color:e.text.tertiary,paddingLeft:29,...!A.isMobile&&{fontSize:14},...A.isMobile&&{display:"flex",alignItems:"center",height:32},display:"flex",alignItems:"center"},addPageButtonText:{color:e.sidebarSecondaryColor},addPageButton:{borderRadius:6,paddingLeft:A.isMobile?I().RD:I().Hc,height:h().Zr},addPageButtonHovered:{background:e.sidebarItemSelectedBackground},addPageIconContainer:{display:"flex",alignItems:"center",justifyContent:"center"},tooltip:{width:"204px"}})),[A.isMobile]);return!V||!C&&o>0?null:C?(0,x.jsx)(u().A,{textWrap:!0,renderTooltip:()=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:(0,x.jsx)(s().sA,{defaultMessage:"You’ve used up your free blocks.",id:"teamOutliner.disabledTooltipUpper"})}),(0,x.jsx)("div",{children:(0,x.jsx)(s().sA,{defaultMessage:"Upgrade to add a new page.",id:"teamOutliner.disabledTooltipLower"})})]}),placement:y().W.Bottom,render:e=>(0,x.jsx)(c().A,{mobileFeedback:A.isMobile,onClick:D,style:O.addPageButton,hoveredStyle:O.addPageButtonHovered,disabled:!M,...e,children:(0,x.jsx)(g().A,{style:O.addPageButtonText,disableMobileBorder:!0,left:(0,x.jsx)("div",{style:O.addPageIconContainer,children:(0,x.jsx)(p().I,{icon:l().plusSmallIcon,size:"sm",color:A.isMobile?"tertiary":"secondary"})}),children:(0,x.jsx)(s().sA,{id:"teamOutlinerEmptyState.addNew",defaultMessage:"Add new"})})}),style:O.tooltip,disableTooltip:M}):(0,x.jsx)(g().A,{disableMobileBorder:!0,children:(0,x.jsx)("div",{style:O.emptyPlaceholder,children:(0,x.jsx)("span",{children:(()=>{if(T)return B?0===o?(0,x.jsx)(s().sA,{defaultMessage:"No pages inside",id:"teamOutliner.noOverflowEmptyMessage"}):void 0:(0,x.jsx)(s().sA,{defaultMessage:"No access",id:"teamOutliner.noOverflowEmptyMessage.noViewPermission"})})()})})})}}}]);